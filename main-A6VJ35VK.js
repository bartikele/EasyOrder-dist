var CA=Object.create;var qh=Object.defineProperty,vA=Object.defineProperties,_A=Object.getOwnPropertyDescriptor,xA=Object.getOwnPropertyDescriptors,EA=Object.getOwnPropertyNames,Rw=Object.getOwnPropertySymbols,bA=Object.getPrototypeOf,Pw=Object.prototype.hasOwnProperty,IA=Object.prototype.propertyIsEnumerable;var Ow=(e,t,n)=>t in e?qh(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,J=(e,t)=>{for(var n in t||={})Pw.call(t,n)&&Ow(e,n,t[n]);if(Rw)for(var n of Rw(t))IA.call(t,n)&&Ow(e,n,t[n]);return e},Pe=(e,t)=>vA(e,xA(t));var lt=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var DA=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of EA(t))!Pw.call(e,i)&&i!==n&&qh(e,i,{get:()=>t[i],enumerable:!(r=_A(t,i))||r.enumerable});return e};var kw=(e,t,n)=>(n=e!=null?CA(bA(e)):{},DA(t||!e||!e.__esModule?qh(n,"default",{value:e,enumerable:!0}):n,e));var Yt=(e,t,n)=>new Promise((r,i)=>{var s=g=>{try{h(n.next(g))}catch(m){i(m)}},c=g=>{try{h(n.throw(g))}catch(m){i(m)}},h=g=>g.done?r(g.value):Promise.resolve(g.value).then(s,c);h((n=n.apply(e,t)).next())});var UD=lt((YG,jD)=>{"use strict";jD.exports=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}});var wo=lt(cs=>{"use strict";var Dy,P6=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];cs.getSymbolSize=function(t){if(!t)throw new Error('"version" cannot be null or undefined');if(t<1||t>40)throw new Error('"version" should be in range from 1 to 40');return t*4+17};cs.getSymbolTotalCodewords=function(t){return P6[t]};cs.getBCHDigit=function(e){let t=0;for(;e!==0;)t++,e>>>=1;return t};cs.setToSJISFunction=function(t){if(typeof t!="function")throw new Error('"toSJISFunc" is not a valid function.');Dy=t};cs.isKanjiModeEnabled=function(){return typeof Dy<"u"};cs.toSJIS=function(t){return Dy(t)}});var sh=lt(yr=>{"use strict";yr.L={bit:1};yr.M={bit:0};yr.Q={bit:3};yr.H={bit:2};function k6(e){if(typeof e!="string")throw new Error("Param is not a string");switch(e.toLowerCase()){case"l":case"low":return yr.L;case"m":case"medium":return yr.M;case"q":case"quartile":return yr.Q;case"h":case"high":return yr.H;default:throw new Error("Unknown EC Level: "+e)}}yr.isValid=function(t){return t&&typeof t.bit<"u"&&t.bit>=0&&t.bit<4};yr.from=function(t,n){if(yr.isValid(t))return t;try{return k6(t)}catch{return n}}});var WD=lt((XG,zD)=>{"use strict";function HD(){this.buffer=[],this.length=0}HD.prototype={get:function(e){let t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)===1},put:function(e,t){for(let n=0;n<t;n++)this.putBit((e>>>t-n-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(e){let t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}};zD.exports=HD});var $D=lt((KG,GD)=>{"use strict";function jc(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}jc.prototype.set=function(e,t,n,r){let i=e*this.size+t;this.data[i]=n,r&&(this.reservedBit[i]=!0)};jc.prototype.get=function(e,t){return this.data[e*this.size+t]};jc.prototype.xor=function(e,t,n){this.data[e*this.size+t]^=n};jc.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]};GD.exports=jc});var qD=lt(ah=>{"use strict";var L6=wo().getSymbolSize;ah.getRowColCoords=function(t){if(t===1)return[];let n=Math.floor(t/7)+2,r=L6(t),i=r===145?26:Math.ceil((r-13)/(2*n-2))*2,s=[r-7];for(let c=1;c<n-1;c++)s[c]=s[c-1]-i;return s.push(6),s.reverse()};ah.getPositions=function(t){let n=[],r=ah.getRowColCoords(t),i=r.length;for(let s=0;s<i;s++)for(let c=0;c<i;c++)s===0&&c===0||s===0&&c===i-1||s===i-1&&c===0||n.push([r[s],r[c]]);return n}});var QD=lt(ZD=>{"use strict";var F6=wo().getSymbolSize,YD=7;ZD.getPositions=function(t){let n=F6(t);return[[0,0],[n-YD,0],[0,n-YD]]}});var XD=lt(It=>{"use strict";It.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};var us={N1:3,N2:3,N3:40,N4:10};It.isValid=function(t){return t!=null&&t!==""&&!isNaN(t)&&t>=0&&t<=7};It.from=function(t){return It.isValid(t)?parseInt(t,10):void 0};It.getPenaltyN1=function(t){let n=t.size,r=0,i=0,s=0,c=null,h=null;for(let g=0;g<n;g++){i=s=0,c=h=null;for(let m=0;m<n;m++){let _=t.get(g,m);_===c?i++:(i>=5&&(r+=us.N1+(i-5)),c=_,i=1),_=t.get(m,g),_===h?s++:(s>=5&&(r+=us.N1+(s-5)),h=_,s=1)}i>=5&&(r+=us.N1+(i-5)),s>=5&&(r+=us.N1+(s-5))}return r};It.getPenaltyN2=function(t){let n=t.size,r=0;for(let i=0;i<n-1;i++)for(let s=0;s<n-1;s++){let c=t.get(i,s)+t.get(i,s+1)+t.get(i+1,s)+t.get(i+1,s+1);(c===4||c===0)&&r++}return r*us.N2};It.getPenaltyN3=function(t){let n=t.size,r=0,i=0,s=0;for(let c=0;c<n;c++){i=s=0;for(let h=0;h<n;h++)i=i<<1&2047|t.get(c,h),h>=10&&(i===1488||i===93)&&r++,s=s<<1&2047|t.get(h,c),h>=10&&(s===1488||s===93)&&r++}return r*us.N3};It.getPenaltyN4=function(t){let n=0,r=t.data.length;for(let s=0;s<r;s++)n+=t.data[s];return Math.abs(Math.ceil(n*100/r/5)-10)*us.N4};function B6(e,t,n){switch(e){case It.Patterns.PATTERN000:return(t+n)%2===0;case It.Patterns.PATTERN001:return t%2===0;case It.Patterns.PATTERN010:return n%3===0;case It.Patterns.PATTERN011:return(t+n)%3===0;case It.Patterns.PATTERN100:return(Math.floor(t/2)+Math.floor(n/3))%2===0;case It.Patterns.PATTERN101:return t*n%2+t*n%3===0;case It.Patterns.PATTERN110:return(t*n%2+t*n%3)%2===0;case It.Patterns.PATTERN111:return(t*n%3+(t+n)%2)%2===0;default:throw new Error("bad maskPattern:"+e)}}It.applyMask=function(t,n){let r=n.size;for(let i=0;i<r;i++)for(let s=0;s<r;s++)n.isReserved(s,i)||n.xor(s,i,B6(t,s,i))};It.getBestMask=function(t,n){let r=Object.keys(It.Patterns).length,i=0,s=1/0;for(let c=0;c<r;c++){n(c),It.applyMask(c,t);let h=It.getPenaltyN1(t)+It.getPenaltyN2(t)+It.getPenaltyN3(t)+It.getPenaltyN4(t);It.applyMask(c,t),h<s&&(s=h,i=c)}return i}});var Ay=lt(Sy=>{"use strict";var Co=sh(),lh=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],ch=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];Sy.getBlocksCount=function(t,n){switch(n){case Co.L:return lh[(t-1)*4+0];case Co.M:return lh[(t-1)*4+1];case Co.Q:return lh[(t-1)*4+2];case Co.H:return lh[(t-1)*4+3];default:return}};Sy.getTotalCodewordsCount=function(t,n){switch(n){case Co.L:return ch[(t-1)*4+0];case Co.M:return ch[(t-1)*4+1];case Co.Q:return ch[(t-1)*4+2];case Co.H:return ch[(t-1)*4+3];default:return}}});var KD=lt(dh=>{"use strict";var Uc=new Uint8Array(512),uh=new Uint8Array(256);(function(){let t=1;for(let n=0;n<255;n++)Uc[n]=t,uh[t]=n,t<<=1,t&256&&(t^=285);for(let n=255;n<512;n++)Uc[n]=Uc[n-255]})();dh.log=function(t){if(t<1)throw new Error("log("+t+")");return uh[t]};dh.exp=function(t){return Uc[t]};dh.mul=function(t,n){return t===0||n===0?0:Uc[uh[t]+uh[n]]}});var JD=lt(Hc=>{"use strict";var Ty=KD();Hc.mul=function(t,n){let r=new Uint8Array(t.length+n.length-1);for(let i=0;i<t.length;i++)for(let s=0;s<n.length;s++)r[i+s]^=Ty.mul(t[i],n[s]);return r};Hc.mod=function(t,n){let r=new Uint8Array(t);for(;r.length-n.length>=0;){let i=r[0];for(let c=0;c<n.length;c++)r[c]^=Ty.mul(n[c],i);let s=0;for(;s<r.length&&r[s]===0;)s++;r=r.slice(s)}return r};Hc.generateECPolynomial=function(t){let n=new Uint8Array([1]);for(let r=0;r<t;r++)n=Hc.mul(n,new Uint8Array([1,Ty.exp(r)]));return n}});var nS=lt((o$,tS)=>{"use strict";var eS=JD();function My(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}My.prototype.initialize=function(t){this.degree=t,this.genPoly=eS.generateECPolynomial(this.degree)};My.prototype.encode=function(t){if(!this.genPoly)throw new Error("Encoder not initialized");let n=new Uint8Array(t.length+this.degree);n.set(t);let r=eS.mod(n,this.genPoly),i=this.degree-r.length;if(i>0){let s=new Uint8Array(this.degree);return s.set(r,i),s}return r};tS.exports=My});var Ny=lt(rS=>{"use strict";rS.isValid=function(t){return!isNaN(t)&&t>=1&&t<=40}});var Ry=lt(Li=>{"use strict";var iS="[0-9]+",V6="[A-Z $%*+\\-./:]+",zc="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";zc=zc.replace(/u/g,"\\u");var j6="(?:(?![A-Z0-9 $%*+\\-./:]|"+zc+`)(?:.|[\r
]))+`;Li.KANJI=new RegExp(zc,"g");Li.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");Li.BYTE=new RegExp(j6,"g");Li.NUMERIC=new RegExp(iS,"g");Li.ALPHANUMERIC=new RegExp(V6,"g");var U6=new RegExp("^"+zc+"$"),H6=new RegExp("^"+iS+"$"),z6=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");Li.testKanji=function(t){return U6.test(t)};Li.testNumeric=function(t){return H6.test(t)};Li.testAlphanumeric=function(t){return z6.test(t)}});var vo=lt($t=>{"use strict";var W6=Ny(),Oy=Ry();$t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]};$t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]};$t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]};$t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]};$t.MIXED={bit:-1};$t.getCharCountIndicator=function(t,n){if(!t.ccBits)throw new Error("Invalid mode: "+t);if(!W6.isValid(n))throw new Error("Invalid version: "+n);return n>=1&&n<10?t.ccBits[0]:n<27?t.ccBits[1]:t.ccBits[2]};$t.getBestModeForData=function(t){return Oy.testNumeric(t)?$t.NUMERIC:Oy.testAlphanumeric(t)?$t.ALPHANUMERIC:Oy.testKanji(t)?$t.KANJI:$t.BYTE};$t.toString=function(t){if(t&&t.id)return t.id;throw new Error("Invalid mode")};$t.isValid=function(t){return t&&t.bit&&t.ccBits};function G6(e){if(typeof e!="string")throw new Error("Param is not a string");switch(e.toLowerCase()){case"numeric":return $t.NUMERIC;case"alphanumeric":return $t.ALPHANUMERIC;case"kanji":return $t.KANJI;case"byte":return $t.BYTE;default:throw new Error("Unknown mode: "+e)}}$t.from=function(t,n){if($t.isValid(t))return t;try{return G6(t)}catch{return n}}});var cS=lt(ds=>{"use strict";var fh=wo(),$6=Ay(),oS=sh(),_o=vo(),Py=Ny(),aS=7973,sS=fh.getBCHDigit(aS);function q6(e,t,n){for(let r=1;r<=40;r++)if(t<=ds.getCapacity(r,n,e))return r}function lS(e,t){return _o.getCharCountIndicator(e,t)+4}function Y6(e,t){let n=0;return e.forEach(function(r){let i=lS(r.mode,t);n+=i+r.getBitsLength()}),n}function Z6(e,t){for(let n=1;n<=40;n++)if(Y6(e,n)<=ds.getCapacity(n,t,_o.MIXED))return n}ds.from=function(t,n){return Py.isValid(t)?parseInt(t,10):n};ds.getCapacity=function(t,n,r){if(!Py.isValid(t))throw new Error("Invalid QR Code version");typeof r>"u"&&(r=_o.BYTE);let i=fh.getSymbolTotalCodewords(t),s=$6.getTotalCodewordsCount(t,n),c=(i-s)*8;if(r===_o.MIXED)return c;let h=c-lS(r,t);switch(r){case _o.NUMERIC:return Math.floor(h/10*3);case _o.ALPHANUMERIC:return Math.floor(h/11*2);case _o.KANJI:return Math.floor(h/13);case _o.BYTE:default:return Math.floor(h/8)}};ds.getBestVersionForData=function(t,n){let r,i=oS.from(n,oS.M);if(Array.isArray(t)){if(t.length>1)return Z6(t,i);if(t.length===0)return 1;r=t[0]}else r=t;return q6(r.mode,r.getLength(),i)};ds.getEncodedBits=function(t){if(!Py.isValid(t)||t<7)throw new Error("Invalid QR Code version");let n=t<<12;for(;fh.getBCHDigit(n)-sS>=0;)n^=aS<<fh.getBCHDigit(n)-sS;return t<<12|n}});var hS=lt(fS=>{"use strict";var ky=wo(),dS=1335,Q6=21522,uS=ky.getBCHDigit(dS);fS.getEncodedBits=function(t,n){let r=t.bit<<3|n,i=r<<10;for(;ky.getBCHDigit(i)-uS>=0;)i^=dS<<ky.getBCHDigit(i)-uS;return(r<<10|i)^Q6}});var gS=lt((d$,pS)=>{"use strict";var X6=vo();function ka(e){this.mode=X6.NUMERIC,this.data=e.toString()}ka.getBitsLength=function(t){return 10*Math.floor(t/3)+(t%3?t%3*3+1:0)};ka.prototype.getLength=function(){return this.data.length};ka.prototype.getBitsLength=function(){return ka.getBitsLength(this.data.length)};ka.prototype.write=function(t){let n,r,i;for(n=0;n+3<=this.data.length;n+=3)r=this.data.substr(n,3),i=parseInt(r,10),t.put(i,10);let s=this.data.length-n;s>0&&(r=this.data.substr(n),i=parseInt(r,10),t.put(i,s*3+1))};pS.exports=ka});var yS=lt((f$,mS)=>{"use strict";var K6=vo(),Ly=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function La(e){this.mode=K6.ALPHANUMERIC,this.data=e}La.getBitsLength=function(t){return 11*Math.floor(t/2)+6*(t%2)};La.prototype.getLength=function(){return this.data.length};La.prototype.getBitsLength=function(){return La.getBitsLength(this.data.length)};La.prototype.write=function(t){let n;for(n=0;n+2<=this.data.length;n+=2){let r=Ly.indexOf(this.data[n])*45;r+=Ly.indexOf(this.data[n+1]),t.put(r,11)}this.data.length%2&&t.put(Ly.indexOf(this.data[n]),6)};mS.exports=La});var CS=lt((h$,wS)=>{"use strict";wS.exports=function(t){for(var n=[],r=t.length,i=0;i<r;i++){var s=t.charCodeAt(i);if(s>=55296&&s<=56319&&r>i+1){var c=t.charCodeAt(i+1);c>=56320&&c<=57343&&(s=(s-55296)*1024+c-56320+65536,i+=1)}if(s<128){n.push(s);continue}if(s<2048){n.push(s>>6|192),n.push(s&63|128);continue}if(s<55296||s>=57344&&s<65536){n.push(s>>12|224),n.push(s>>6&63|128),n.push(s&63|128);continue}if(s>=65536&&s<=1114111){n.push(s>>18|240),n.push(s>>12&63|128),n.push(s>>6&63|128),n.push(s&63|128);continue}n.push(239,191,189)}return new Uint8Array(n).buffer}});var _S=lt((p$,vS)=>{"use strict";var J6=CS(),eB=vo();function Fa(e){this.mode=eB.BYTE,typeof e=="string"&&(e=J6(e)),this.data=new Uint8Array(e)}Fa.getBitsLength=function(t){return t*8};Fa.prototype.getLength=function(){return this.data.length};Fa.prototype.getBitsLength=function(){return Fa.getBitsLength(this.data.length)};Fa.prototype.write=function(e){for(let t=0,n=this.data.length;t<n;t++)e.put(this.data[t],8)};vS.exports=Fa});var ES=lt((g$,xS)=>{"use strict";var tB=vo(),nB=wo();function Ba(e){this.mode=tB.KANJI,this.data=e}Ba.getBitsLength=function(t){return t*13};Ba.prototype.getLength=function(){return this.data.length};Ba.prototype.getBitsLength=function(){return Ba.getBitsLength(this.data.length)};Ba.prototype.write=function(e){let t;for(t=0;t<this.data.length;t++){let n=nB.toSJIS(this.data[t]);if(n>=33088&&n<=40956)n-=33088;else if(n>=57408&&n<=60351)n-=49472;else throw new Error("Invalid SJIS character: "+this.data[t]+`
Make sure your charset is UTF-8`);n=(n>>>8&255)*192+(n&255),e.put(n,13)}};xS.exports=Ba});var bS=lt((m$,Fy)=>{"use strict";var Wc={single_source_shortest_paths:function(e,t,n){var r={},i={};i[t]=0;var s=Wc.PriorityQueue.make();s.push(t,0);for(var c,h,g,m,_,x,I,A,P;!s.empty();){c=s.pop(),h=c.value,m=c.cost,_=e[h]||{};for(g in _)_.hasOwnProperty(g)&&(x=_[g],I=m+x,A=i[g],P=typeof i[g]>"u",(P||A>I)&&(i[g]=I,s.push(g,I),r[g]=h))}if(typeof n<"u"&&typeof i[n]>"u"){var U=["Could not find a path from ",t," to ",n,"."].join("");throw new Error(U)}return r},extract_shortest_path_from_predecessor_list:function(e,t){for(var n=[],r=t,i;r;)n.push(r),i=e[r],r=e[r];return n.reverse(),n},find_path:function(e,t,n){var r=Wc.single_source_shortest_paths(e,t,n);return Wc.extract_shortest_path_from_predecessor_list(r,n)},PriorityQueue:{make:function(e){var t=Wc.PriorityQueue,n={},r;e=e||{};for(r in t)t.hasOwnProperty(r)&&(n[r]=t[r]);return n.queue=[],n.sorter=e.sorter||t.default_sorter,n},default_sorter:function(e,t){return e.cost-t.cost},push:function(e,t){var n={value:e,cost:t};this.queue.push(n),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};typeof Fy<"u"&&(Fy.exports=Wc)});var RS=lt(Va=>{"use strict";var dt=vo(),SS=gS(),AS=yS(),TS=_S(),MS=ES(),Gc=Ry(),hh=wo(),rB=bS();function IS(e){return unescape(encodeURIComponent(e)).length}function $c(e,t,n){let r=[],i;for(;(i=e.exec(n))!==null;)r.push({data:i[0],index:i.index,mode:t,length:i[0].length});return r}function NS(e){let t=$c(Gc.NUMERIC,dt.NUMERIC,e),n=$c(Gc.ALPHANUMERIC,dt.ALPHANUMERIC,e),r,i;return hh.isKanjiModeEnabled()?(r=$c(Gc.BYTE,dt.BYTE,e),i=$c(Gc.KANJI,dt.KANJI,e)):(r=$c(Gc.BYTE_KANJI,dt.BYTE,e),i=[]),t.concat(n,r,i).sort(function(c,h){return c.index-h.index}).map(function(c){return{data:c.data,mode:c.mode,length:c.length}})}function By(e,t){switch(t){case dt.NUMERIC:return SS.getBitsLength(e);case dt.ALPHANUMERIC:return AS.getBitsLength(e);case dt.KANJI:return MS.getBitsLength(e);case dt.BYTE:return TS.getBitsLength(e)}}function iB(e){return e.reduce(function(t,n){let r=t.length-1>=0?t[t.length-1]:null;return r&&r.mode===n.mode?(t[t.length-1].data+=n.data,t):(t.push(n),t)},[])}function oB(e){let t=[];for(let n=0;n<e.length;n++){let r=e[n];switch(r.mode){case dt.NUMERIC:t.push([r,{data:r.data,mode:dt.ALPHANUMERIC,length:r.length},{data:r.data,mode:dt.BYTE,length:r.length}]);break;case dt.ALPHANUMERIC:t.push([r,{data:r.data,mode:dt.BYTE,length:r.length}]);break;case dt.KANJI:t.push([r,{data:r.data,mode:dt.BYTE,length:IS(r.data)}]);break;case dt.BYTE:t.push([{data:r.data,mode:dt.BYTE,length:IS(r.data)}])}}return t}function sB(e,t){let n={},r={start:{}},i=["start"];for(let s=0;s<e.length;s++){let c=e[s],h=[];for(let g=0;g<c.length;g++){let m=c[g],_=""+s+g;h.push(_),n[_]={node:m,lastCount:0},r[_]={};for(let x=0;x<i.length;x++){let I=i[x];n[I]&&n[I].node.mode===m.mode?(r[I][_]=By(n[I].lastCount+m.length,m.mode)-By(n[I].lastCount,m.mode),n[I].lastCount+=m.length):(n[I]&&(n[I].lastCount=m.length),r[I][_]=By(m.length,m.mode)+4+dt.getCharCountIndicator(m.mode,t))}}i=h}for(let s=0;s<i.length;s++)r[i[s]].end=0;return{map:r,table:n}}function DS(e,t){let n,r=dt.getBestModeForData(e);if(n=dt.from(t,r),n!==dt.BYTE&&n.bit<r.bit)throw new Error('"'+e+'" cannot be encoded with mode '+dt.toString(n)+`.
 Suggested mode is: `+dt.toString(r));switch(n===dt.KANJI&&!hh.isKanjiModeEnabled()&&(n=dt.BYTE),n){case dt.NUMERIC:return new SS(e);case dt.ALPHANUMERIC:return new AS(e);case dt.KANJI:return new MS(e);case dt.BYTE:return new TS(e)}}Va.fromArray=function(t){return t.reduce(function(n,r){return typeof r=="string"?n.push(DS(r,null)):r.data&&n.push(DS(r.data,r.mode)),n},[])};Va.fromString=function(t,n){let r=NS(t,hh.isKanjiModeEnabled()),i=oB(r),s=sB(i,n),c=rB.find_path(s.map,"start","end"),h=[];for(let g=1;g<c.length-1;g++)h.push(s.table[c[g]].node);return Va.fromArray(iB(h))};Va.rawSplit=function(t){return Va.fromArray(NS(t,hh.isKanjiModeEnabled()))}});var PS=lt(OS=>{"use strict";var gh=wo(),Vy=sh(),aB=WD(),lB=$D(),cB=qD(),uB=QD(),Hy=XD(),zy=Ay(),dB=nS(),ph=cS(),fB=hS(),hB=vo(),jy=RS();function pB(e,t){let n=e.size,r=uB.getPositions(t);for(let i=0;i<r.length;i++){let s=r[i][0],c=r[i][1];for(let h=-1;h<=7;h++)if(!(s+h<=-1||n<=s+h))for(let g=-1;g<=7;g++)c+g<=-1||n<=c+g||(h>=0&&h<=6&&(g===0||g===6)||g>=0&&g<=6&&(h===0||h===6)||h>=2&&h<=4&&g>=2&&g<=4?e.set(s+h,c+g,!0,!0):e.set(s+h,c+g,!1,!0))}}function gB(e){let t=e.size;for(let n=8;n<t-8;n++){let r=n%2===0;e.set(n,6,r,!0),e.set(6,n,r,!0)}}function mB(e,t){let n=cB.getPositions(t);for(let r=0;r<n.length;r++){let i=n[r][0],s=n[r][1];for(let c=-2;c<=2;c++)for(let h=-2;h<=2;h++)c===-2||c===2||h===-2||h===2||c===0&&h===0?e.set(i+c,s+h,!0,!0):e.set(i+c,s+h,!1,!0)}}function yB(e,t){let n=e.size,r=ph.getEncodedBits(t),i,s,c;for(let h=0;h<18;h++)i=Math.floor(h/3),s=h%3+n-8-3,c=(r>>h&1)===1,e.set(i,s,c,!0),e.set(s,i,c,!0)}function Uy(e,t,n){let r=e.size,i=fB.getEncodedBits(t,n),s,c;for(s=0;s<15;s++)c=(i>>s&1)===1,s<6?e.set(s,8,c,!0):s<8?e.set(s+1,8,c,!0):e.set(r-15+s,8,c,!0),s<8?e.set(8,r-s-1,c,!0):s<9?e.set(8,15-s-1+1,c,!0):e.set(8,15-s-1,c,!0);e.set(r-8,8,1,!0)}function wB(e,t){let n=e.size,r=-1,i=n-1,s=7,c=0;for(let h=n-1;h>0;h-=2)for(h===6&&h--;;){for(let g=0;g<2;g++)if(!e.isReserved(i,h-g)){let m=!1;c<t.length&&(m=(t[c]>>>s&1)===1),e.set(i,h-g,m),s--,s===-1&&(c++,s=7)}if(i+=r,i<0||n<=i){i-=r,r=-r;break}}}function CB(e,t,n){let r=new aB;n.forEach(function(g){r.put(g.mode.bit,4),r.put(g.getLength(),hB.getCharCountIndicator(g.mode,e)),g.write(r)});let i=gh.getSymbolTotalCodewords(e),s=zy.getTotalCodewordsCount(e,t),c=(i-s)*8;for(r.getLengthInBits()+4<=c&&r.put(0,4);r.getLengthInBits()%8!==0;)r.putBit(0);let h=(c-r.getLengthInBits())/8;for(let g=0;g<h;g++)r.put(g%2?17:236,8);return vB(r,e,t)}function vB(e,t,n){let r=gh.getSymbolTotalCodewords(t),i=zy.getTotalCodewordsCount(t,n),s=r-i,c=zy.getBlocksCount(t,n),h=r%c,g=c-h,m=Math.floor(r/c),_=Math.floor(s/c),x=_+1,I=m-_,A=new dB(I),P=0,U=new Array(c),q=new Array(c),W=0,le=new Uint8Array(e.buffer);for(let G=0;G<c;G++){let Zn=G<g?_:x;U[G]=le.slice(P,P+Zn),q[G]=A.encode(U[G]),P+=Zn,W=Math.max(W,Zn)}let Ke=new Uint8Array(r),me=0,z,ue;for(z=0;z<W;z++)for(ue=0;ue<c;ue++)z<U[ue].length&&(Ke[me++]=U[ue][z]);for(z=0;z<I;z++)for(ue=0;ue<c;ue++)Ke[me++]=q[ue][z];return Ke}function _B(e,t,n,r){let i;if(Array.isArray(e))i=jy.fromArray(e);else if(typeof e=="string"){let m=t;if(!m){let _=jy.rawSplit(e);m=ph.getBestVersionForData(_,n)}i=jy.fromString(e,m||40)}else throw new Error("Invalid data");let s=ph.getBestVersionForData(i,n);if(!s)throw new Error("The amount of data is too big to be stored in a QR Code");if(!t)t=s;else if(t<s)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+s+`.
`);let c=CB(t,n,i),h=gh.getSymbolSize(t),g=new lB(h);return pB(g,t),gB(g),mB(g,t),Uy(g,n,0),t>=7&&yB(g,t),wB(g,c),isNaN(r)&&(r=Hy.getBestMask(g,Uy.bind(null,g,n))),Hy.applyMask(r,g),Uy(g,n,r),{modules:g,version:t,errorCorrectionLevel:n,maskPattern:r,segments:i}}OS.create=function(t,n){if(typeof t>"u"||t==="")throw new Error("No input text");let r=Vy.M,i,s;return typeof n<"u"&&(r=Vy.from(n.errorCorrectionLevel,Vy.M),i=ph.from(n.version),s=Hy.from(n.maskPattern),n.toSJISFunc&&gh.setToSJISFunction(n.toSJISFunc)),_B(t,i,r,s)}});var Wy=lt(fs=>{"use strict";function kS(e){if(typeof e=="number"&&(e=e.toString()),typeof e!="string")throw new Error("Color should be defined as hex string");let t=e.slice().replace("#","").split("");if(t.length<3||t.length===5||t.length>8)throw new Error("Invalid hex color: "+e);(t.length===3||t.length===4)&&(t=Array.prototype.concat.apply([],t.map(function(r){return[r,r]}))),t.length===6&&t.push("F","F");let n=parseInt(t.join(""),16);return{r:n>>24&255,g:n>>16&255,b:n>>8&255,a:n&255,hex:"#"+t.slice(0,6).join("")}}fs.getOptions=function(t){t||(t={}),t.color||(t.color={});let n=typeof t.margin>"u"||t.margin===null||t.margin<0?4:t.margin,r=t.width&&t.width>=21?t.width:void 0,i=t.scale||4;return{width:r,scale:r?4:i,margin:n,color:{dark:kS(t.color.dark||"#000000ff"),light:kS(t.color.light||"#ffffffff")},type:t.type,rendererOpts:t.rendererOpts||{}}};fs.getScale=function(t,n){return n.width&&n.width>=t+n.margin*2?n.width/(t+n.margin*2):n.scale};fs.getImageWidth=function(t,n){let r=fs.getScale(t,n);return Math.floor((t+n.margin*2)*r)};fs.qrToImageData=function(t,n,r){let i=n.modules.size,s=n.modules.data,c=fs.getScale(i,r),h=Math.floor((i+r.margin*2)*c),g=r.margin*c,m=[r.color.light,r.color.dark];for(let _=0;_<h;_++)for(let x=0;x<h;x++){let I=(_*h+x)*4,A=r.color.light;if(_>=g&&x>=g&&_<h-g&&x<h-g){let P=Math.floor((_-g)/c),U=Math.floor((x-g)/c);A=m[s[P*i+U]?1:0]}t[I++]=A.r,t[I++]=A.g,t[I++]=A.b,t[I]=A.a}}});var LS=lt(mh=>{"use strict";var Gy=Wy();function xB(e,t,n){e.clearRect(0,0,t.width,t.height),t.style||(t.style={}),t.height=n,t.width=n,t.style.height=n+"px",t.style.width=n+"px"}function EB(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}mh.render=function(t,n,r){let i=r,s=n;typeof i>"u"&&(!n||!n.getContext)&&(i=n,n=void 0),n||(s=EB()),i=Gy.getOptions(i);let c=Gy.getImageWidth(t.modules.size,i),h=s.getContext("2d"),g=h.createImageData(c,c);return Gy.qrToImageData(g.data,t,i),xB(h,s,c),h.putImageData(g,0,0),s};mh.renderToDataURL=function(t,n,r){let i=r;typeof i>"u"&&(!n||!n.getContext)&&(i=n,n=void 0),i||(i={});let s=mh.render(t,n,i),c=i.type||"image/png",h=i.rendererOpts||{};return s.toDataURL(c,h.quality)}});var VS=lt(BS=>{"use strict";var bB=Wy();function FS(e,t){let n=e.a/255,r=t+'="'+e.hex+'"';return n<1?r+" "+t+'-opacity="'+n.toFixed(2).slice(1)+'"':r}function $y(e,t,n){let r=e+t;return typeof n<"u"&&(r+=" "+n),r}function IB(e,t,n){let r="",i=0,s=!1,c=0;for(let h=0;h<e.length;h++){let g=Math.floor(h%t),m=Math.floor(h/t);!g&&!s&&(s=!0),e[h]?(c++,h>0&&g>0&&e[h-1]||(r+=s?$y("M",g+n,.5+m+n):$y("m",i,0),i=0,s=!1),g+1<t&&e[h+1]||(r+=$y("h",c),c=0)):i++}return r}BS.render=function(t,n,r){let i=bB.getOptions(n),s=t.modules.size,c=t.modules.data,h=s+i.margin*2,g=i.color.light.a?"<path "+FS(i.color.light,"fill")+' d="M0 0h'+h+"v"+h+'H0z"/>':"",m="<path "+FS(i.color.dark,"stroke")+' d="'+IB(c,s,i.margin)+'"/>',_='viewBox="0 0 '+h+" "+h+'"',I='<svg xmlns="http://www.w3.org/2000/svg" '+(i.width?'width="'+i.width+'" height="'+i.width+'" ':"")+_+' shape-rendering="crispEdges">'+g+m+`</svg>
`;return typeof r=="function"&&r(null,I),I}});var US=lt(qc=>{"use strict";var DB=UD(),qy=PS(),jS=LS(),SB=VS();function Yy(e,t,n,r,i){let s=[].slice.call(arguments,1),c=s.length,h=typeof s[c-1]=="function";if(!h&&!DB())throw new Error("Callback required as last argument");if(h){if(c<2)throw new Error("Too few arguments provided");c===2?(i=n,n=t,t=r=void 0):c===3&&(t.getContext&&typeof i>"u"?(i=r,r=void 0):(i=r,r=n,n=t,t=void 0))}else{if(c<1)throw new Error("Too few arguments provided");return c===1?(n=t,t=r=void 0):c===2&&!t.getContext&&(r=n,n=t,t=void 0),new Promise(function(g,m){try{let _=qy.create(n,r);g(e(_,t,r))}catch(_){m(_)}})}try{let g=qy.create(n,r);i(null,e(g,t,r))}catch(g){i(g)}}qc.create=qy.create;qc.toCanvas=Yy.bind(null,jS.render);qc.toDataURL=Yy.bind(null,jS.renderToDataURL);qc.toString=Yy.bind(null,function(e,t,n){return SB.render(e,n)})});var JS=lt((vh,KS)=>{"use strict";(function(e,t){typeof vh=="object"&&typeof KS<"u"?t(vh):typeof define=="function"&&define.amd?define(["exports"],t):(e=typeof globalThis<"u"?globalThis:e||self,t(e.ZXing={}))})(vh,function(e){"use strict";function t(C){return C==null}var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,o){C.__proto__=o}||function(C,o){for(var a in o)o.hasOwnProperty(a)&&(C[a]=o[a])};function r(C,o){n(C,o);function a(){this.constructor=C}C.prototype=o===null?Object.create(o):(a.prototype=o.prototype,new a)}function i(C,o){var a=Object.setPrototypeOf;a?a(C,o):C.__proto__=o}function s(C,o){o===void 0&&(o=C.constructor);var a=Error.captureStackTrace;a&&a(C,o)}var c=function(C){r(o,C);function o(a){var l=this.constructor,u=C.call(this,a)||this;return Object.defineProperty(u,"name",{value:l.name,enumerable:!1}),i(u,l.prototype),s(u),u}return o}(Error);let h=(()=>{class C extends c{constructor(a=void 0){super(a),this.message=a}getKind(){return this.constructor.kind}}return C.kind="Exception",C})(),g=(()=>{class C extends h{}return C.kind="ArgumentException",C})(),m=(()=>{class C extends h{}return C.kind="IllegalArgumentException",C})();class _{constructor(o){if(this.binarizer=o,o===null)throw new m("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(o,a){return this.binarizer.getBlackRow(o,a)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(o,a,l,u){let d=this.binarizer.getLuminanceSource().crop(o,a,l,u);return new _(this.binarizer.createBinarizer(d))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){let o=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new _(this.binarizer.createBinarizer(o))}rotateCounterClockwise45(){let o=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new _(this.binarizer.createBinarizer(o))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}let x=(()=>{class C extends h{static getChecksumInstance(){return new C}}return C.kind="ChecksumException",C})();class I{constructor(o){this.source=o}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class A{static arraycopy(o,a,l,u,d){for(;d--;)l[u++]=o[a++]}static currentTimeMillis(){return Date.now()}}let P=(()=>{class C extends h{}return C.kind="IndexOutOfBoundsException",C})(),U=(()=>{class C extends P{constructor(a=void 0,l=void 0){super(l),this.index=a,this.message=l}}return C.kind="ArrayIndexOutOfBoundsException",C})();class q{static fill(o,a){for(let l=0,u=o.length;l<u;l++)o[l]=a}static fillWithin(o,a,l,u){q.rangeCheck(o.length,a,l);for(let d=a;d<l;d++)o[d]=u}static rangeCheck(o,a,l){if(a>l)throw new m("fromIndex("+a+") > toIndex("+l+")");if(a<0)throw new U(a);if(l>o)throw new U(l)}static asList(...o){return o}static create(o,a,l){return Array.from({length:o}).map(d=>Array.from({length:a}).fill(l))}static createInt32Array(o,a,l){return Array.from({length:o}).map(d=>Int32Array.from({length:a}).fill(l))}static equals(o,a){if(!o||!a||!o.length||!a.length||o.length!==a.length)return!1;for(let l=0,u=o.length;l<u;l++)if(o[l]!==a[l])return!1;return!0}static hashCode(o){if(o===null)return 0;let a=1;for(let l of o)a=31*a+l;return a}static fillUint8Array(o,a){for(let l=0;l!==o.length;l++)o[l]=a}static copyOf(o,a){return o.slice(0,a)}static copyOfUint8Array(o,a){if(o.length<=a){let l=new Uint8Array(a);return l.set(o),l}return o.slice(0,a)}static copyOfRange(o,a,l){let u=l-a,d=new Int32Array(u);return A.arraycopy(o,a,d,0,u),d}static binarySearch(o,a,l){l===void 0&&(l=q.numberComparator);let u=0,d=o.length-1;for(;u<=d;){let f=d+u>>1,p=l(a,o[f]);if(p>0)u=f+1;else if(p<0)d=f-1;else return f}return-u-1}static numberComparator(o,a){return o-a}}class W{static numberOfTrailingZeros(o){let a;if(o===0)return 32;let l=31;return a=o<<16,a!==0&&(l-=16,o=a),a=o<<8,a!==0&&(l-=8,o=a),a=o<<4,a!==0&&(l-=4,o=a),a=o<<2,a!==0&&(l-=2,o=a),l-(o<<1>>>31)}static numberOfLeadingZeros(o){if(o===0)return 32;let a=1;return o>>>16||(a+=16,o<<=16),o>>>24||(a+=8,o<<=8),o>>>28||(a+=4,o<<=4),o>>>30||(a+=2,o<<=2),a-=o>>>31,a}static toHexString(o){return o.toString(16)}static toBinaryString(o){return String(parseInt(String(o),2))}static bitCount(o){return o=o-(o>>>1&1431655765),o=(o&858993459)+(o>>>2&858993459),o=o+(o>>>4)&252645135,o=o+(o>>>8),o=o+(o>>>16),o&63}static truncDivision(o,a){return Math.trunc(o/a)}static parseInt(o,a=void 0){return parseInt(o,a)}}W.MIN_VALUE_32_BITS=-2147483648,W.MAX_VALUE=Number.MAX_SAFE_INTEGER;class le{constructor(o,a){o===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=o,a==null?this.bits=le.makeArray(o):this.bits=a)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(o){if(o>this.bits.length*32){let a=le.makeArray(o);A.arraycopy(this.bits,0,a,0,this.bits.length),this.bits=a}}get(o){return(this.bits[Math.floor(o/32)]&1<<(o&31))!==0}set(o){this.bits[Math.floor(o/32)]|=1<<(o&31)}flip(o){this.bits[Math.floor(o/32)]^=1<<(o&31)}getNextSet(o){let a=this.size;if(o>=a)return a;let l=this.bits,u=Math.floor(o/32),d=l[u];d&=~((1<<(o&31))-1);let f=l.length;for(;d===0;){if(++u===f)return a;d=l[u]}let p=u*32+W.numberOfTrailingZeros(d);return p>a?a:p}getNextUnset(o){let a=this.size;if(o>=a)return a;let l=this.bits,u=Math.floor(o/32),d=~l[u];d&=~((1<<(o&31))-1);let f=l.length;for(;d===0;){if(++u===f)return a;d=~l[u]}let p=u*32+W.numberOfTrailingZeros(d);return p>a?a:p}setBulk(o,a){this.bits[Math.floor(o/32)]=a}setRange(o,a){if(a<o||o<0||a>this.size)throw new m;if(a===o)return;a--;let l=Math.floor(o/32),u=Math.floor(a/32),d=this.bits;for(let f=l;f<=u;f++){let p=f>l?0:o&31,w=(2<<(f<u?31:a&31))-(1<<p);d[f]|=w}}clear(){let o=this.bits.length,a=this.bits;for(let l=0;l<o;l++)a[l]=0}isRange(o,a,l){if(a<o||o<0||a>this.size)throw new m;if(a===o)return!0;a--;let u=Math.floor(o/32),d=Math.floor(a/32),f=this.bits;for(let p=u;p<=d;p++){let y=p>u?0:o&31,v=(2<<(p<d?31:a&31))-(1<<y)&4294967295;if((f[p]&v)!==(l?v:0))return!1}return!0}appendBit(o){this.ensureCapacity(this.size+1),o&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(o,a){if(a<0||a>32)throw new m("Num bits must be between 0 and 32");this.ensureCapacity(this.size+a);for(let l=a;l>0;l--)this.appendBit((o>>l-1&1)===1)}appendBitArray(o){let a=o.size;this.ensureCapacity(this.size+a);for(let l=0;l<a;l++)this.appendBit(o.get(l))}xor(o){if(this.size!==o.size)throw new m("Sizes don't match");let a=this.bits;for(let l=0,u=a.length;l<u;l++)a[l]^=o.bits[l]}toBytes(o,a,l,u){for(let d=0;d<u;d++){let f=0;for(let p=0;p<8;p++)this.get(o)&&(f|=1<<7-p),o++;a[l+d]=f}}getBitArray(){return this.bits}reverse(){let o=new Int32Array(this.bits.length),a=Math.floor((this.size-1)/32),l=a+1,u=this.bits;for(let d=0;d<l;d++){let f=u[d];f=f>>1&1431655765|(f&1431655765)<<1,f=f>>2&858993459|(f&858993459)<<2,f=f>>4&252645135|(f&252645135)<<4,f=f>>8&16711935|(f&16711935)<<8,f=f>>16&65535|(f&65535)<<16,o[a-d]=f}if(this.size!==l*32){let d=l*32-this.size,f=o[0]>>>d;for(let p=1;p<l;p++){let y=o[p];f|=y<<32-d,o[p-1]=f,f=y>>>d}o[l-1]=f}this.bits=o}static makeArray(o){return new Int32Array(Math.floor((o+31)/32))}equals(o){if(!(o instanceof le))return!1;let a=o;return this.size===a.size&&q.equals(this.bits,a.bits)}hashCode(){return 31*this.size+q.hashCode(this.bits)}toString(){let o="";for(let a=0,l=this.size;a<l;a++)a&7||(o+=" "),o+=this.get(a)?"X":".";return o}clone(){return new le(this.size,this.bits.slice())}}var Ke=function(C){return C[C.OTHER=0]="OTHER",C[C.PURE_BARCODE=1]="PURE_BARCODE",C[C.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",C[C.TRY_HARDER=3]="TRY_HARDER",C[C.CHARACTER_SET=4]="CHARACTER_SET",C[C.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",C[C.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",C[C.ASSUME_GS1=7]="ASSUME_GS1",C[C.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",C[C.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",C[C.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS",C}(Ke||{}),me=Ke;let z=(()=>{class C extends h{static getFormatInstance(){return new C}}return C.kind="FormatException",C})();var ue=function(C){return C[C.Cp437=0]="Cp437",C[C.ISO8859_1=1]="ISO8859_1",C[C.ISO8859_2=2]="ISO8859_2",C[C.ISO8859_3=3]="ISO8859_3",C[C.ISO8859_4=4]="ISO8859_4",C[C.ISO8859_5=5]="ISO8859_5",C[C.ISO8859_6=6]="ISO8859_6",C[C.ISO8859_7=7]="ISO8859_7",C[C.ISO8859_8=8]="ISO8859_8",C[C.ISO8859_9=9]="ISO8859_9",C[C.ISO8859_10=10]="ISO8859_10",C[C.ISO8859_11=11]="ISO8859_11",C[C.ISO8859_13=12]="ISO8859_13",C[C.ISO8859_14=13]="ISO8859_14",C[C.ISO8859_15=14]="ISO8859_15",C[C.ISO8859_16=15]="ISO8859_16",C[C.SJIS=16]="SJIS",C[C.Cp1250=17]="Cp1250",C[C.Cp1251=18]="Cp1251",C[C.Cp1252=19]="Cp1252",C[C.Cp1256=20]="Cp1256",C[C.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",C[C.UTF8=22]="UTF8",C[C.ASCII=23]="ASCII",C[C.Big5=24]="Big5",C[C.GB18030=25]="GB18030",C[C.EUC_KR=26]="EUC_KR",C}(ue||{});class G{constructor(o,a,l,...u){this.valueIdentifier=o,this.name=l,typeof a=="number"?this.values=Int32Array.from([a]):this.values=a,this.otherEncodingNames=u,G.VALUE_IDENTIFIER_TO_ECI.set(o,this),G.NAME_TO_ECI.set(l,this);let d=this.values;for(let f=0,p=d.length;f!==p;f++){let y=d[f];G.VALUES_TO_ECI.set(y,this)}for(let f of u)G.NAME_TO_ECI.set(f,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(o){if(o<0||o>=900)throw new z("incorect value");let a=G.VALUES_TO_ECI.get(o);if(a===void 0)throw new z("incorect value");return a}static getCharacterSetECIByName(o){let a=G.NAME_TO_ECI.get(o);if(a===void 0)throw new z("incorect value");return a}equals(o){if(!(o instanceof G))return!1;let a=o;return this.getName()===a.getName()}}G.VALUE_IDENTIFIER_TO_ECI=new Map,G.VALUES_TO_ECI=new Map,G.NAME_TO_ECI=new Map,G.Cp437=new G(ue.Cp437,Int32Array.from([0,2]),"Cp437"),G.ISO8859_1=new G(ue.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),G.ISO8859_2=new G(ue.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),G.ISO8859_3=new G(ue.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),G.ISO8859_4=new G(ue.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),G.ISO8859_5=new G(ue.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),G.ISO8859_6=new G(ue.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),G.ISO8859_7=new G(ue.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),G.ISO8859_8=new G(ue.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),G.ISO8859_9=new G(ue.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),G.ISO8859_10=new G(ue.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),G.ISO8859_11=new G(ue.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),G.ISO8859_13=new G(ue.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),G.ISO8859_14=new G(ue.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),G.ISO8859_15=new G(ue.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),G.ISO8859_16=new G(ue.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),G.SJIS=new G(ue.SJIS,20,"SJIS","Shift_JIS"),G.Cp1250=new G(ue.Cp1250,21,"Cp1250","windows-1250"),G.Cp1251=new G(ue.Cp1251,22,"Cp1251","windows-1251"),G.Cp1252=new G(ue.Cp1252,23,"Cp1252","windows-1252"),G.Cp1256=new G(ue.Cp1256,24,"Cp1256","windows-1256"),G.UnicodeBigUnmarked=new G(ue.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),G.UTF8=new G(ue.UTF8,26,"UTF8","UTF-8"),G.ASCII=new G(ue.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),G.Big5=new G(ue.Big5,28,"Big5"),G.GB18030=new G(ue.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),G.EUC_KR=new G(ue.EUC_KR,30,"EUC_KR","EUC-KR");let Zn=(()=>{class C extends h{}return C.kind="UnsupportedOperationException",C})();class Cn{static decode(o,a){let l=this.encodingName(a);return this.customDecoder?this.customDecoder(o,l):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(l)?this.decodeFallback(o,l):new TextDecoder(l).decode(o)}static shouldDecodeOnFallback(o){return!Cn.isBrowser()&&o==="ISO-8859-1"}static encode(o,a){let l=this.encodingName(a);return this.customEncoder?this.customEncoder(o,l):typeof TextEncoder>"u"?this.encodeFallback(o):new TextEncoder().encode(o)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(o){return typeof o=="string"?o:o.getName()}static encodingCharacterSet(o){return o instanceof G?o:G.getCharacterSetECIByName(o)}static decodeFallback(o,a){let l=this.encodingCharacterSet(a);if(Cn.isDecodeFallbackSupported(l)){let u="";for(let d=0,f=o.length;d<f;d++){let p=o[d].toString(16);p.length<2&&(p="0"+p),u+="%"+p}return decodeURIComponent(u)}if(l.equals(G.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(o.buffer));throw new Zn(`Encoding ${this.encodingName(a)} not supported by fallback.`)}static isDecodeFallbackSupported(o){return o.equals(G.UTF8)||o.equals(G.ISO8859_1)||o.equals(G.ASCII)}static encodeFallback(o){let l=btoa(unescape(encodeURIComponent(o))).split(""),u=[];for(let d=0;d<l.length;d++)u.push(l[d].charCodeAt(0));return new Uint8Array(u)}}class ve{static castAsNonUtf8Char(o,a=null){let l=a?a.getName():this.ISO88591;return Cn.decode(new Uint8Array([o]),l)}static guessEncoding(o,a){if(a!=null&&a.get(me.CHARACTER_SET)!==void 0)return a.get(me.CHARACTER_SET).toString();let l=o.length,u=!0,d=!0,f=!0,p=0,y=0,w=0,v=0,E=0,b=0,S=0,T=0,M=0,O=0,L=0,$=o.length>3&&o[0]===239&&o[1]===187&&o[2]===191;for(let K=0;K<l&&(u||d||f);K++){let V=o[K]&255;f&&(p>0?V&128?p--:f=!1:V&128&&(V&64?(p++,V&32?(p++,V&16?(p++,V&8?f=!1:v++):w++):y++):f=!1)),u&&(V>127&&V<160?u=!1:V>159&&(V<192||V===215||V===247)&&L++),d&&(E>0?V<64||V===127||V>252?d=!1:E--:V===128||V===160||V>239?d=!1:V>160&&V<224?(b++,T=0,S++,S>M&&(M=S)):V>127?(E++,S=0,T++,T>O&&(O=T)):(S=0,T=0))}return f&&p>0&&(f=!1),d&&E>0&&(d=!1),f&&($||y+w+v>0)?ve.UTF8:d&&(ve.ASSUME_SHIFT_JIS||M>=3||O>=3)?ve.SHIFT_JIS:u&&d?M===2&&b===2||L*10>=l?ve.SHIFT_JIS:ve.ISO88591:u?ve.ISO88591:d?ve.SHIFT_JIS:f?ve.UTF8:ve.PLATFORM_DEFAULT_ENCODING}static format(o,...a){let l=-1;function u(f,p,y,w,v,E){if(f==="%%")return"%";if(a[++l]===void 0)return;f=w?parseInt(w.substr(1)):void 0;let b=v?parseInt(v.substr(1)):void 0,S;switch(E){case"s":S=a[l];break;case"c":S=a[l][0];break;case"f":S=parseFloat(a[l]).toFixed(f);break;case"p":S=parseFloat(a[l]).toPrecision(f);break;case"e":S=parseFloat(a[l]).toExponential(f);break;case"x":S=parseInt(a[l]).toString(b||16);break;case"d":S=parseFloat(parseInt(a[l],b||10).toPrecision(f)).toFixed(0);break}S=typeof S=="object"?JSON.stringify(S):(+S).toString(b);let T=parseInt(y),M=y&&y[0]+""=="0"?"0":" ";for(;S.length<T;)S=p!==void 0?S+M:M+S;return S}let d=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return o.replace(d,u)}static getBytes(o,a){return Cn.encode(o,a)}static getCharCode(o,a=0){return o.charCodeAt(a)}static getCharAt(o){return String.fromCharCode(o)}}ve.SHIFT_JIS=G.SJIS.getName(),ve.GB2312="GB2312",ve.ISO88591=G.ISO8859_1.getName(),ve.EUC_JP="EUC_JP",ve.UTF8=G.UTF8.getName(),ve.PLATFORM_DEFAULT_ENCODING=ve.UTF8,ve.ASSUME_SHIFT_JIS=!1;class ht{constructor(o=""){this.value=o}enableDecoding(o){return this.encoding=o,this}append(o){return typeof o=="string"?this.value+=o.toString():this.encoding?this.value+=ve.castAsNonUtf8Char(o,this.encoding):this.value+=String.fromCharCode(o),this}appendChars(o,a,l){for(let u=a;a<a+l;u++)this.append(o[u]);return this}length(){return this.value.length}charAt(o){return this.value.charAt(o)}deleteCharAt(o){this.value=this.value.substr(0,o)+this.value.substring(o+1)}setCharAt(o,a){this.value=this.value.substr(0,o)+a+this.value.substr(o+1)}substring(o,a){return this.value.substring(o,a)}setLengthToZero(){this.value=""}toString(){return this.value}insert(o,a){this.value=this.value.substr(0,o)+a+this.value.substr(o+a.length)}}class en{constructor(o,a,l,u){if(this.width=o,this.height=a,this.rowSize=l,this.bits=u,a==null&&(a=o),this.height=a,o<1||a<1)throw new m("Both dimensions must be greater than 0");l==null&&(l=Math.floor((o+31)/32)),this.rowSize=l,u==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(o){let a=o.length,l=o[0].length,u=new en(l,a);for(let d=0;d<a;d++){let f=o[d];for(let p=0;p<l;p++)f[p]&&u.set(p,d)}return u}static parseFromString(o,a,l){if(o===null)throw new m("stringRepresentation cannot be null");let u=new Array(o.length),d=0,f=0,p=-1,y=0,w=0;for(;w<o.length;)if(o.charAt(w)===`
`||o.charAt(w)==="\r"){if(d>f){if(p===-1)p=d-f;else if(d-f!==p)throw new m("row lengths do not match");f=d,y++}w++}else if(o.substring(w,w+a.length)===a)w+=a.length,u[d]=!0,d++;else if(o.substring(w,w+l.length)===l)w+=l.length,u[d]=!1,d++;else throw new m("illegal character encountered: "+o.substring(w));if(d>f){if(p===-1)p=d-f;else if(d-f!==p)throw new m("row lengths do not match");y++}let v=new en(p,y);for(let E=0;E<d;E++)u[E]&&v.set(Math.floor(E%p),Math.floor(E/p));return v}get(o,a){let l=a*this.rowSize+Math.floor(o/32);return(this.bits[l]>>>(o&31)&1)!==0}set(o,a){let l=a*this.rowSize+Math.floor(o/32);this.bits[l]|=1<<(o&31)&4294967295}unset(o,a){let l=a*this.rowSize+Math.floor(o/32);this.bits[l]&=~(1<<(o&31)&4294967295)}flip(o,a){let l=a*this.rowSize+Math.floor(o/32);this.bits[l]^=1<<(o&31)&4294967295}xor(o){if(this.width!==o.getWidth()||this.height!==o.getHeight()||this.rowSize!==o.getRowSize())throw new m("input matrix dimensions do not match");let a=new le(Math.floor(this.width/32)+1),l=this.rowSize,u=this.bits;for(let d=0,f=this.height;d<f;d++){let p=d*l,y=o.getRow(d,a).getBitArray();for(let w=0;w<l;w++)u[p+w]^=y[w]}}clear(){let o=this.bits,a=o.length;for(let l=0;l<a;l++)o[l]=0}setRegion(o,a,l,u){if(a<0||o<0)throw new m("Left and top must be nonnegative");if(u<1||l<1)throw new m("Height and width must be at least 1");let d=o+l,f=a+u;if(f>this.height||d>this.width)throw new m("The region must fit inside the matrix");let p=this.rowSize,y=this.bits;for(let w=a;w<f;w++){let v=w*p;for(let E=o;E<d;E++)y[v+Math.floor(E/32)]|=1<<(E&31)&4294967295}}getRow(o,a){a==null||a.getSize()<this.width?a=new le(this.width):a.clear();let l=this.rowSize,u=this.bits,d=o*l;for(let f=0;f<l;f++)a.setBulk(f*32,u[d+f]);return a}setRow(o,a){A.arraycopy(a.getBitArray(),0,this.bits,o*this.rowSize,this.rowSize)}rotate180(){let o=this.getWidth(),a=this.getHeight(),l=new le(o),u=new le(o);for(let d=0,f=Math.floor((a+1)/2);d<f;d++)l=this.getRow(d,l),u=this.getRow(a-1-d,u),l.reverse(),u.reverse(),this.setRow(d,u),this.setRow(a-1-d,l)}getEnclosingRectangle(){let o=this.width,a=this.height,l=this.rowSize,u=this.bits,d=o,f=a,p=-1,y=-1;for(let w=0;w<a;w++)for(let v=0;v<l;v++){let E=u[w*l+v];if(E!==0){if(w<f&&(f=w),w>y&&(y=w),v*32<d){let b=0;for(;!(E<<31-b&4294967295);)b++;v*32+b<d&&(d=v*32+b)}if(v*32+31>p){let b=31;for(;!(E>>>b);)b--;v*32+b>p&&(p=v*32+b)}}}return p<d||y<f?null:Int32Array.from([d,f,p-d+1,y-f+1])}getTopLeftOnBit(){let o=this.rowSize,a=this.bits,l=0;for(;l<a.length&&a[l]===0;)l++;if(l===a.length)return null;let u=l/o,d=l%o*32,f=a[l],p=0;for(;!(f<<31-p&4294967295);)p++;return d+=p,Int32Array.from([d,u])}getBottomRightOnBit(){let o=this.rowSize,a=this.bits,l=a.length-1;for(;l>=0&&a[l]===0;)l--;if(l<0)return null;let u=Math.floor(l/o),d=Math.floor(l%o)*32,f=a[l],p=31;for(;!(f>>>p);)p--;return d+=p,Int32Array.from([d,u])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(o){if(!(o instanceof en))return!1;let a=o;return this.width===a.width&&this.height===a.height&&this.rowSize===a.rowSize&&q.equals(this.bits,a.bits)}hashCode(){let o=this.width;return o=31*o+this.width,o=31*o+this.height,o=31*o+this.rowSize,o=31*o+q.hashCode(this.bits),o}toString(o="X ",a="  ",l=`
`){return this.buildToString(o,a,l)}buildToString(o,a,l){let u=new ht;for(let d=0,f=this.height;d<f;d++){for(let p=0,y=this.width;p<y;p++)u.append(this.get(p,d)?o:a);u.append(l)}return u.toString()}clone(){return new en(this.width,this.height,this.rowSize,this.bits.slice())}}let j=(()=>{class C extends h{static getNotFoundInstance(){return new C}}return C.kind="NotFoundException",C})();class tn extends I{constructor(o){super(o),this.luminances=tn.EMPTY,this.buckets=new Int32Array(tn.LUMINANCE_BUCKETS)}getBlackRow(o,a){let l=this.getLuminanceSource(),u=l.getWidth();a==null||a.getSize()<u?a=new le(u):a.clear(),this.initArrays(u);let d=l.getRow(o,this.luminances),f=this.buckets;for(let y=0;y<u;y++)f[(d[y]&255)>>tn.LUMINANCE_SHIFT]++;let p=tn.estimateBlackPoint(f);if(u<3)for(let y=0;y<u;y++)(d[y]&255)<p&&a.set(y);else{let y=d[0]&255,w=d[1]&255;for(let v=1;v<u-1;v++){let E=d[v+1]&255;(w*4-y-E)/2<p&&a.set(v),y=w,w=E}}return a}getBlackMatrix(){let o=this.getLuminanceSource(),a=o.getWidth(),l=o.getHeight(),u=new en(a,l);this.initArrays(a);let d=this.buckets;for(let y=1;y<5;y++){let w=Math.floor(l*y/5),v=o.getRow(w,this.luminances),E=Math.floor(a*4/5);for(let b=Math.floor(a/5);b<E;b++){let S=v[b]&255;d[S>>tn.LUMINANCE_SHIFT]++}}let f=tn.estimateBlackPoint(d),p=o.getMatrix();for(let y=0;y<l;y++){let w=y*a;for(let v=0;v<a;v++)(p[w+v]&255)<f&&u.set(v,y)}return u}createBinarizer(o){return new tn(o)}initArrays(o){this.luminances.length<o&&(this.luminances=new Uint8ClampedArray(o));let a=this.buckets;for(let l=0;l<tn.LUMINANCE_BUCKETS;l++)a[l]=0}static estimateBlackPoint(o){let a=o.length,l=0,u=0,d=0;for(let v=0;v<a;v++)o[v]>d&&(u=v,d=o[v]),o[v]>l&&(l=o[v]);let f=0,p=0;for(let v=0;v<a;v++){let E=v-u,b=o[v]*E*E;b>p&&(f=v,p=b)}if(u>f){let v=u;u=f,f=v}if(f-u<=a/16)throw new j;let y=f-1,w=-1;for(let v=f-1;v>u;v--){let E=v-u,b=E*E*(f-v)*(l-o[v]);b>w&&(y=v,w=b)}return y<<tn.LUMINANCE_SHIFT}}tn.LUMINANCE_BITS=5,tn.LUMINANCE_SHIFT=8-tn.LUMINANCE_BITS,tn.LUMINANCE_BUCKETS=1<<tn.LUMINANCE_BITS,tn.EMPTY=Uint8ClampedArray.from([0]);class Re extends tn{constructor(o){super(o),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;let o=this.getLuminanceSource(),a=o.getWidth(),l=o.getHeight();if(a>=Re.MINIMUM_DIMENSION&&l>=Re.MINIMUM_DIMENSION){let u=o.getMatrix(),d=a>>Re.BLOCK_SIZE_POWER;a&Re.BLOCK_SIZE_MASK&&d++;let f=l>>Re.BLOCK_SIZE_POWER;l&Re.BLOCK_SIZE_MASK&&f++;let p=Re.calculateBlackPoints(u,d,f,a,l),y=new en(a,l);Re.calculateThresholdForBlock(u,d,f,a,l,p,y),this.matrix=y}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(o){return new Re(o)}static calculateThresholdForBlock(o,a,l,u,d,f,p){let y=d-Re.BLOCK_SIZE,w=u-Re.BLOCK_SIZE;for(let v=0;v<l;v++){let E=v<<Re.BLOCK_SIZE_POWER;E>y&&(E=y);let b=Re.cap(v,2,l-3);for(let S=0;S<a;S++){let T=S<<Re.BLOCK_SIZE_POWER;T>w&&(T=w);let M=Re.cap(S,2,a-3),O=0;for(let $=-2;$<=2;$++){let K=f[b+$];O+=K[M-2]+K[M-1]+K[M]+K[M+1]+K[M+2]}let L=O/25;Re.thresholdBlock(o,T,E,L,u,p)}}}static cap(o,a,l){return o<a?a:o>l?l:o}static thresholdBlock(o,a,l,u,d,f){for(let p=0,y=l*d+a;p<Re.BLOCK_SIZE;p++,y+=d)for(let w=0;w<Re.BLOCK_SIZE;w++)(o[y+w]&255)<=u&&f.set(a+w,l+p)}static calculateBlackPoints(o,a,l,u,d){let f=d-Re.BLOCK_SIZE,p=u-Re.BLOCK_SIZE,y=new Array(l);for(let w=0;w<l;w++){y[w]=new Int32Array(a);let v=w<<Re.BLOCK_SIZE_POWER;v>f&&(v=f);for(let E=0;E<a;E++){let b=E<<Re.BLOCK_SIZE_POWER;b>p&&(b=p);let S=0,T=255,M=0;for(let L=0,$=v*u+b;L<Re.BLOCK_SIZE;L++,$+=u){for(let K=0;K<Re.BLOCK_SIZE;K++){let V=o[$+K]&255;S+=V,V<T&&(T=V),V>M&&(M=V)}if(M-T>Re.MIN_DYNAMIC_RANGE)for(L++,$+=u;L<Re.BLOCK_SIZE;L++,$+=u)for(let K=0;K<Re.BLOCK_SIZE;K++)S+=o[$+K]&255}let O=S>>Re.BLOCK_SIZE_POWER*2;if(M-T<=Re.MIN_DYNAMIC_RANGE&&(O=T/2,w>0&&E>0)){let L=(y[w-1][E]+2*y[w][E-1]+y[w-1][E-1])/4;T<L&&(O=L)}y[w][E]=O}}return y}}Re.BLOCK_SIZE_POWER=3,Re.BLOCK_SIZE=1<<Re.BLOCK_SIZE_POWER,Re.BLOCK_SIZE_MASK=Re.BLOCK_SIZE-1,Re.MINIMUM_DIMENSION=Re.BLOCK_SIZE*5,Re.MIN_DYNAMIC_RANGE=24;class za{constructor(o,a){this.width=o,this.height=a}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(o,a,l,u){throw new Zn("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new Zn("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new Zn("This luminance source does not support rotation by 45 degrees.")}toString(){let o=new Uint8ClampedArray(this.width),a=new ht;for(let l=0;l<this.height;l++){let u=this.getRow(l,o);for(let d=0;d<this.width;d++){let f=u[d]&255,p;f<64?p="#":f<128?p="+":f<192?p=".":p=" ",a.append(p)}a.append(`
`)}return a.toString()}}class Bi extends za{constructor(o){super(o.getWidth(),o.getHeight()),this.delegate=o}getRow(o,a){let l=this.delegate.getRow(o,a),u=this.getWidth();for(let d=0;d<u;d++)l[d]=255-(l[d]&255);return l}getMatrix(){let o=this.delegate.getMatrix(),a=this.getWidth()*this.getHeight(),l=new Uint8ClampedArray(a);for(let u=0;u<a;u++)l[u]=255-(o[u]&255);return l}isCropSupported(){return this.delegate.isCropSupported()}crop(o,a,l,u){return new Bi(this.delegate.crop(o,a,l,u))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new Bi(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new Bi(this.delegate.rotateCounterClockwise45())}}class Vi extends za{constructor(o){super(o.width,o.height),this.canvas=o,this.tempCanvasElement=null,this.buffer=Vi.makeBufferFromCanvasImageData(o)}static makeBufferFromCanvasImageData(o){let a=o.getContext("2d").getImageData(0,0,o.width,o.height);return Vi.toGrayscaleBuffer(a.data,o.width,o.height)}static toGrayscaleBuffer(o,a,l){let u=new Uint8ClampedArray(a*l);for(let d=0,f=0,p=o.length;d<p;d+=4,f++){let y;if(o[d+3]===0)y=255;else{let v=o[d],E=o[d+1],b=o[d+2];y=306*v+601*E+117*b+512>>10}u[f]=y}return u}getRow(o,a){if(o<0||o>=this.getHeight())throw new m("Requested row is outside the image: "+o);let l=this.getWidth(),u=o*l;return a===null?a=this.buffer.slice(u,u+l):(a.length<l&&(a=new Uint8ClampedArray(l)),a.set(this.buffer.slice(u,u+l))),a}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(o,a,l,u){return super.crop(o,a,l,u),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){let o=this.canvas.ownerDocument.createElement("canvas");o.width=this.canvas.width,o.height=this.canvas.height,this.tempCanvasElement=o}return this.tempCanvasElement}rotate(o){let a=this.getTempCanvasElement(),l=a.getContext("2d"),u=o*Vi.DEGREE_TO_RADIANS,d=this.canvas.width,f=this.canvas.height,p=Math.ceil(Math.abs(Math.cos(u))*d+Math.abs(Math.sin(u))*f),y=Math.ceil(Math.abs(Math.sin(u))*d+Math.abs(Math.cos(u))*f);return a.width=p,a.height=y,l.translate(p/2,y/2),l.rotate(u),l.drawImage(this.canvas,d/-2,f/-2),this.buffer=Vi.makeBufferFromCanvasImageData(a),this}invert(){return new Bi(this)}}Vi.DEGREE_TO_RADIANS=Math.PI/180;class ow{constructor(o,a,l){this.deviceId=o,this.label=a,this.kind="videoinput",this.groupId=l||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var Tn=(globalThis||global||self||window||void 0)&&(globalThis||global||self||window||void 0).__awaiter||function(C,o,a,l){function u(d){return d instanceof a?d:new a(function(f){f(d)})}return new(a||(a=Promise))(function(d,f){function p(v){try{w(l.next(v))}catch(E){f(E)}}function y(v){try{w(l.throw(v))}catch(E){f(E)}}function w(v){v.done?d(v.value):u(v.value).then(p,y)}w((l=l.apply(C,o||[])).next())})};class Eo{constructor(o,a=500,l){this.reader=o,this.timeBetweenScansMillis=a,this._hints=l,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(o){this._timeBetweenDecodingAttempts=o<0?0:o}set hints(o){this._hints=o||null}get hints(){return this._hints}listVideoInputDevices(){return Tn(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");let o=yield navigator.mediaDevices.enumerateDevices(),a=[];for(let l of o){let u=l.kind==="video"?"videoinput":l.kind;if(u!=="videoinput")continue;let d=l.deviceId||l.id,f=l.label||`Video device ${a.length+1}`,p=l.groupId,y={deviceId:d,label:f,kind:u,groupId:p};a.push(y)}return a})}getVideoInputDevices(){return Tn(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(a=>new ow(a.deviceId,a.label))})}findDeviceById(o){return Tn(this,void 0,void 0,function*(){let a=yield this.listVideoInputDevices();return a?a.find(l=>l.deviceId===o):null})}decodeFromInputVideoDevice(o,a){return Tn(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(o,a)})}decodeOnceFromVideoDevice(o,a){return Tn(this,void 0,void 0,function*(){this.reset();let l;o?l={deviceId:{exact:o}}:l={facingMode:"environment"};let u={video:l};return yield this.decodeOnceFromConstraints(u,a)})}decodeOnceFromConstraints(o,a){return Tn(this,void 0,void 0,function*(){let l=yield navigator.mediaDevices.getUserMedia(o);return yield this.decodeOnceFromStream(l,a)})}decodeOnceFromStream(o,a){return Tn(this,void 0,void 0,function*(){this.reset();let l=yield this.attachStreamToVideo(o,a);return yield this.decodeOnce(l)})}decodeFromInputVideoDeviceContinuously(o,a,l){return Tn(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(o,a,l)})}decodeFromVideoDevice(o,a,l){return Tn(this,void 0,void 0,function*(){let u;o?u={deviceId:{exact:o}}:u={facingMode:"environment"};let d={video:u};return yield this.decodeFromConstraints(d,a,l)})}decodeFromConstraints(o,a,l){return Tn(this,void 0,void 0,function*(){let u=yield navigator.mediaDevices.getUserMedia(o);return yield this.decodeFromStream(u,a,l)})}decodeFromStream(o,a,l){return Tn(this,void 0,void 0,function*(){this.reset();let u=yield this.attachStreamToVideo(o,a);return yield this.decodeContinuously(u,l)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(o,a){return Tn(this,void 0,void 0,function*(){let l=this.prepareVideoElement(a);return this.addVideoSource(l,o),this.videoElement=l,this.stream=o,yield this.playVideoOnLoadAsync(l),l})}playVideoOnLoadAsync(o){return new Promise((a,l)=>this.playVideoOnLoad(o,()=>a()))}playVideoOnLoad(o,a){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(o),o.addEventListener("ended",this.videoEndedListener),o.addEventListener("canplay",this.videoCanPlayListener),o.addEventListener("playing",a),this.tryPlayVideo(o)}isVideoPlaying(o){return o.currentTime>0&&!o.paused&&!o.ended&&o.readyState>2}tryPlayVideo(o){return Tn(this,void 0,void 0,function*(){if(this.isVideoPlaying(o)){console.warn("Trying to play video that is already playing.");return}try{yield o.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(o,a){let l=document.getElementById(o);if(!l)throw new g(`element with id '${o}' not found`);if(l.nodeName.toLowerCase()!==a.toLowerCase())throw new g(`element with id '${o}' must be an ${a} element`);return l}decodeFromImage(o,a){if(!o&&!a)throw new g("either imageElement with a src set or an url must be provided");return a&&!o?this.decodeFromImageUrl(a):this.decodeFromImageElement(o)}decodeFromVideo(o,a){if(!o&&!a)throw new g("Either an element with a src set or an URL must be provided");return a&&!o?this.decodeFromVideoUrl(a):this.decodeFromVideoElement(o)}decodeFromVideoContinuously(o,a,l){if(o===void 0&&a===void 0)throw new g("Either an element with a src set or an URL must be provided");return a&&!o?this.decodeFromVideoUrlContinuously(a,l):this.decodeFromVideoElementContinuously(o,l)}decodeFromImageElement(o){if(!o)throw new g("An image element must be provided.");this.reset();let a=this.prepareImageElement(o);this.imageElement=a;let l;return this.isImageLoaded(a)?l=this.decodeOnce(a,!1,!0):l=this._decodeOnLoadImage(a),l}decodeFromVideoElement(o){let a=this._decodeFromVideoElementSetup(o);return this._decodeOnLoadVideo(a)}decodeFromVideoElementContinuously(o,a){let l=this._decodeFromVideoElementSetup(o);return this._decodeOnLoadVideoContinuously(l,a)}_decodeFromVideoElementSetup(o){if(!o)throw new g("A video element must be provided.");this.reset();let a=this.prepareVideoElement(o);return this.videoElement=a,a}decodeFromImageUrl(o){if(!o)throw new g("An URL must be provided.");this.reset();let a=this.prepareImageElement();this.imageElement=a;let l=this._decodeOnLoadImage(a);return a.src=o,l}decodeFromVideoUrl(o){if(!o)throw new g("An URL must be provided.");this.reset();let a=this.prepareVideoElement(),l=this.decodeFromVideoElement(a);return a.src=o,l}decodeFromVideoUrlContinuously(o,a){if(!o)throw new g("An URL must be provided.");this.reset();let l=this.prepareVideoElement(),u=this.decodeFromVideoElementContinuously(l,a);return l.src=o,u}_decodeOnLoadImage(o){return new Promise((a,l)=>{this.imageLoadedListener=()=>this.decodeOnce(o,!1,!0).then(a,l),o.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(o){return Tn(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(o),yield this.decodeOnce(o)})}_decodeOnLoadVideoContinuously(o,a){return Tn(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(o),this.decodeContinuously(o,a)})}isImageLoaded(o){return!(!o.complete||o.naturalWidth===0)}prepareImageElement(o){let a;return typeof o>"u"&&(a=document.createElement("img"),a.width=200,a.height=200),typeof o=="string"&&(a=this.getMediaElement(o,"img")),o instanceof HTMLImageElement&&(a=o),a}prepareVideoElement(o){let a;return!o&&typeof document<"u"&&(a=document.createElement("video"),a.width=200,a.height=200),typeof o=="string"&&(a=this.getMediaElement(o,"video")),o instanceof HTMLVideoElement&&(a=o),a.setAttribute("autoplay","true"),a.setAttribute("muted","true"),a.setAttribute("playsinline","true"),a}decodeOnce(o,a=!0,l=!0){this._stopAsyncDecode=!1;let u=(d,f)=>{if(this._stopAsyncDecode){f(new j("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{let p=this.decode(o);d(p)}catch(p){let y=a&&p instanceof j,v=(p instanceof x||p instanceof z)&&l;if(y||v)return setTimeout(u,this._timeBetweenDecodingAttempts,d,f);f(p)}};return new Promise((d,f)=>u(d,f))}decodeContinuously(o,a){this._stopContinuousDecode=!1;let l=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{let u=this.decode(o);a(u,null),setTimeout(l,this.timeBetweenScansMillis)}catch(u){a(null,u);let d=u instanceof x||u instanceof z,f=u instanceof j;(d||f)&&setTimeout(l,this._timeBetweenDecodingAttempts)}};l()}decode(o){let a=this.createBinaryBitmap(o);return this.decodeBitmap(a)}_isHTMLVideoElement(o){return o.videoWidth!==0}drawFrameOnCanvas(o,a,l){a||(a={sx:0,sy:0,sWidth:o.videoWidth,sHeight:o.videoHeight,dx:0,dy:0,dWidth:o.videoWidth,dHeight:o.videoHeight}),l||(l=this.captureCanvasContext),l.drawImage(o,a.sx,a.sy,a.sWidth,a.sHeight,a.dx,a.dy,a.dWidth,a.dHeight)}drawImageOnCanvas(o,a,l=this.captureCanvasContext){a||(a={sx:0,sy:0,sWidth:o.naturalWidth,sHeight:o.naturalHeight,dx:0,dy:0,dWidth:o.naturalWidth,dHeight:o.naturalHeight}),l||(l=this.captureCanvasContext),l.drawImage(o,a.sx,a.sy,a.sWidth,a.sHeight,a.dx,a.dy,a.dWidth,a.dHeight)}createBinaryBitmap(o){let a=this.getCaptureCanvasContext(o);this._isHTMLVideoElement(o)?this.drawFrameOnCanvas(o):this.drawImageOnCanvas(o);let l=this.getCaptureCanvas(o),u=new Vi(l),d=new Re(u);return new _(d)}getCaptureCanvasContext(o){if(!this.captureCanvasContext){let l=this.getCaptureCanvas(o).getContext("2d");this.captureCanvasContext=l}return this.captureCanvasContext}getCaptureCanvas(o){if(!this.captureCanvas){let a=this.createCaptureCanvas(o);this.captureCanvas=a}return this.captureCanvas}decodeBitmap(o){return this.reader.decode(o,this._hints)}createCaptureCanvas(o){if(typeof document>"u")return this._destroyCaptureCanvas(),null;let a=document.createElement("canvas"),l,u;return typeof o<"u"&&(o instanceof HTMLVideoElement?(l=o.videoWidth,u=o.videoHeight):o instanceof HTMLImageElement&&(l=o.naturalWidth||o.width,u=o.naturalHeight||o.height)),a.style.width=l+"px",a.style.height=u+"px",a.width=l,a.height=u,a}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(o=>o.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(o,a){try{o.srcObject=a}catch{o.src=URL.createObjectURL(a)}}cleanVideoSource(o){try{o.srcObject=null}catch{o.src=""}this.videoElement.removeAttribute("src")}}class Mn{constructor(o,a,l=a==null?0:8*a.length,u,d,f=A.currentTimeMillis()){this.text=o,this.rawBytes=a,this.numBits=l,this.resultPoints=u,this.format=d,this.timestamp=f,this.text=o,this.rawBytes=a,l==null?this.numBits=a==null?0:8*a.length:this.numBits=l,this.resultPoints=u,this.format=d,this.resultMetadata=null,f==null?this.timestamp=A.currentTimeMillis():this.timestamp=f}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(o,a){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(o,a)}putAllMetadata(o){o!==null&&(this.resultMetadata===null?this.resultMetadata=o:this.resultMetadata=new Map(o))}addResultPoints(o){let a=this.resultPoints;if(a===null)this.resultPoints=o;else if(o!==null&&o.length>0){let l=new Array(a.length+o.length);A.arraycopy(a,0,l,0,a.length),A.arraycopy(o,0,l,a.length,o.length),this.resultPoints=l}}getTimestamp(){return this.timestamp}toString(){return this.text}}var sw=function(C){return C[C.AZTEC=0]="AZTEC",C[C.CODABAR=1]="CODABAR",C[C.CODE_39=2]="CODE_39",C[C.CODE_93=3]="CODE_93",C[C.CODE_128=4]="CODE_128",C[C.DATA_MATRIX=5]="DATA_MATRIX",C[C.EAN_8=6]="EAN_8",C[C.EAN_13=7]="EAN_13",C[C.ITF=8]="ITF",C[C.MAXICODE=9]="MAXICODE",C[C.PDF_417=10]="PDF_417",C[C.QR_CODE=11]="QR_CODE",C[C.RSS_14=12]="RSS_14",C[C.RSS_EXPANDED=13]="RSS_EXPANDED",C[C.UPC_A=14]="UPC_A",C[C.UPC_E=15]="UPC_E",C[C.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION",C}(sw||{}),ye=sw,aw=function(C){return C[C.OTHER=0]="OTHER",C[C.ORIENTATION=1]="ORIENTATION",C[C.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",C[C.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",C[C.ISSUE_NUMBER=4]="ISSUE_NUMBER",C[C.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",C[C.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",C[C.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",C[C.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",C[C.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",C[C.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY",C}(aw||{}),nn=aw;class Wa{constructor(o,a,l,u,d=-1,f=-1){this.rawBytes=o,this.text=a,this.byteSegments=l,this.ecLevel=u,this.structuredAppendSequenceNumber=d,this.structuredAppendParity=f,this.numBits=o==null?0:8*o.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(o){this.numBits=o}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(o){this.errorsCorrected=o}getErasures(){return this.erasures}setErasures(o){this.erasures=o}getOther(){return this.other}setOther(o){this.other=o}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class Ga{exp(o){return this.expTable[o]}log(o){if(o===0)throw new m;return this.logTable[o]}static addOrSubtract(o,a){return o^a}}class Fn{constructor(o,a){if(a.length===0)throw new m;this.field=o;let l=a.length;if(l>1&&a[0]===0){let u=1;for(;u<l&&a[u]===0;)u++;u===l?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(l-u),A.arraycopy(a,u,this.coefficients,0,this.coefficients.length))}else this.coefficients=a}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(o){return this.coefficients[this.coefficients.length-1-o]}evaluateAt(o){if(o===0)return this.getCoefficient(0);let a=this.coefficients,l;if(o===1){l=0;for(let f=0,p=a.length;f!==p;f++){let y=a[f];l=Ga.addOrSubtract(l,y)}return l}l=a[0];let u=a.length,d=this.field;for(let f=1;f<u;f++)l=Ga.addOrSubtract(d.multiply(o,l),a[f]);return l}addOrSubtract(o){if(!this.field.equals(o.field))throw new m("GenericGFPolys do not have same GenericGF field");if(this.isZero())return o;if(o.isZero())return this;let a=this.coefficients,l=o.coefficients;if(a.length>l.length){let f=a;a=l,l=f}let u=new Int32Array(l.length),d=l.length-a.length;A.arraycopy(l,0,u,0,d);for(let f=d;f<l.length;f++)u[f]=Ga.addOrSubtract(a[f-d],l[f]);return new Fn(this.field,u)}multiply(o){if(!this.field.equals(o.field))throw new m("GenericGFPolys do not have same GenericGF field");if(this.isZero()||o.isZero())return this.field.getZero();let a=this.coefficients,l=a.length,u=o.coefficients,d=u.length,f=new Int32Array(l+d-1),p=this.field;for(let y=0;y<l;y++){let w=a[y];for(let v=0;v<d;v++)f[y+v]=Ga.addOrSubtract(f[y+v],p.multiply(w,u[v]))}return new Fn(p,f)}multiplyScalar(o){if(o===0)return this.field.getZero();if(o===1)return this;let a=this.coefficients.length,l=this.field,u=new Int32Array(a),d=this.coefficients;for(let f=0;f<a;f++)u[f]=l.multiply(d[f],o);return new Fn(l,u)}multiplyByMonomial(o,a){if(o<0)throw new m;if(a===0)return this.field.getZero();let l=this.coefficients,u=l.length,d=new Int32Array(u+o),f=this.field;for(let p=0;p<u;p++)d[p]=f.multiply(l[p],a);return new Fn(f,d)}divide(o){if(!this.field.equals(o.field))throw new m("GenericGFPolys do not have same GenericGF field");if(o.isZero())throw new m("Divide by 0");let a=this.field,l=a.getZero(),u=this,d=o.getCoefficient(o.getDegree()),f=a.inverse(d);for(;u.getDegree()>=o.getDegree()&&!u.isZero();){let p=u.getDegree()-o.getDegree(),y=a.multiply(u.getCoefficient(u.getDegree()),f),w=o.multiplyByMonomial(p,y),v=a.buildMonomial(p,y);l=l.addOrSubtract(v),u=u.addOrSubtract(w)}return[l,u]}toString(){let o="";for(let a=this.getDegree();a>=0;a--){let l=this.getCoefficient(a);if(l!==0){if(l<0?(o+=" - ",l=-l):o.length>0&&(o+=" + "),a===0||l!==1){let u=this.field.log(l);u===0?o+="1":u===1?o+="a":(o+="a^",o+=u)}a!==0&&(a===1?o+="x":(o+="x^",o+=a))}}return o}}let bh=(()=>{class C extends h{}return C.kind="ArithmeticException",C})();class it extends Ga{constructor(o,a,l){super(),this.primitive=o,this.size=a,this.generatorBase=l;let u=new Int32Array(a),d=1;for(let p=0;p<a;p++)u[p]=d,d*=2,d>=a&&(d^=o,d&=a-1);this.expTable=u;let f=new Int32Array(a);for(let p=0;p<a-1;p++)f[u[p]]=p;this.logTable=f,this.zero=new Fn(this,Int32Array.from([0])),this.one=new Fn(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(o,a){if(o<0)throw new m;if(a===0)return this.zero;let l=new Int32Array(o+1);return l[0]=a,new Fn(this,l)}inverse(o){if(o===0)throw new bh;return this.expTable[this.size-this.logTable[o]-1]}multiply(o,a){return o===0||a===0?0:this.expTable[(this.logTable[o]+this.logTable[a])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+W.toHexString(this.primitive)+","+this.size+")"}equals(o){return o===this}}it.AZTEC_DATA_12=new it(4201,4096,1),it.AZTEC_DATA_10=new it(1033,1024,1),it.AZTEC_DATA_6=new it(67,64,1),it.AZTEC_PARAM=new it(19,16,1),it.QR_CODE_FIELD_256=new it(285,256,0),it.DATA_MATRIX_FIELD_256=new it(301,256,1),it.AZTEC_DATA_8=it.DATA_MATRIX_FIELD_256,it.MAXICODE_FIELD_64=it.AZTEC_DATA_6;let $a=(()=>{class C extends h{}return C.kind="ReedSolomonException",C})(),li=(()=>{class C extends h{}return C.kind="IllegalStateException",C})();class qa{constructor(o){this.field=o}decode(o,a){let l=this.field,u=new Fn(l,o),d=new Int32Array(a),f=!0;for(let S=0;S<a;S++){let T=u.evaluateAt(l.exp(S+l.getGeneratorBase()));d[d.length-1-S]=T,T!==0&&(f=!1)}if(f)return;let p=new Fn(l,d),y=this.runEuclideanAlgorithm(l.buildMonomial(a,1),p,a),w=y[0],v=y[1],E=this.findErrorLocations(w),b=this.findErrorMagnitudes(v,E);for(let S=0;S<E.length;S++){let T=o.length-1-l.log(E[S]);if(T<0)throw new $a("Bad error location");o[T]=it.addOrSubtract(o[T],b[S])}}runEuclideanAlgorithm(o,a,l){if(o.getDegree()<a.getDegree()){let S=o;o=a,a=S}let u=this.field,d=o,f=a,p=u.getZero(),y=u.getOne();for(;f.getDegree()>=(l/2|0);){let S=d,T=p;if(d=f,p=y,d.isZero())throw new $a("r_{i-1} was zero");f=S;let M=u.getZero(),O=d.getCoefficient(d.getDegree()),L=u.inverse(O);for(;f.getDegree()>=d.getDegree()&&!f.isZero();){let $=f.getDegree()-d.getDegree(),K=u.multiply(f.getCoefficient(f.getDegree()),L);M=M.addOrSubtract(u.buildMonomial($,K)),f=f.addOrSubtract(d.multiplyByMonomial($,K))}if(y=M.multiply(p).addOrSubtract(T),f.getDegree()>=d.getDegree())throw new li("Division algorithm failed to reduce polynomial?")}let w=y.getCoefficient(0);if(w===0)throw new $a("sigmaTilde(0) was zero");let v=u.inverse(w),E=y.multiplyScalar(v),b=f.multiplyScalar(v);return[E,b]}findErrorLocations(o){let a=o.getDegree();if(a===1)return Int32Array.from([o.getCoefficient(1)]);let l=new Int32Array(a),u=0,d=this.field;for(let f=1;f<d.getSize()&&u<a;f++)o.evaluateAt(f)===0&&(l[u]=d.inverse(f),u++);if(u!==a)throw new $a("Error locator degree does not match number of roots");return l}findErrorMagnitudes(o,a){let l=a.length,u=new Int32Array(l),d=this.field;for(let f=0;f<l;f++){let p=d.inverse(a[f]),y=1;for(let w=0;w<l;w++)if(f!==w){let v=d.multiply(a[w],p),E=v&1?v&-2:v|1;y=d.multiply(y,E)}u[f]=d.multiply(o.evaluateAt(p),d.inverse(y)),d.getGeneratorBase()!==0&&(u[f]=d.multiply(u[f],p))}return u}}var vn=function(C){return C[C.UPPER=0]="UPPER",C[C.LOWER=1]="LOWER",C[C.MIXED=2]="MIXED",C[C.DIGIT=3]="DIGIT",C[C.PUNCT=4]="PUNCT",C[C.BINARY=5]="BINARY",C}(vn||{});let Ih=(()=>{class C{decode(a){this.ddata=a;let l=a.getBits(),u=this.extractBits(l),d=this.correctBits(u),f=C.convertBoolArrayToByteArray(d),p=C.getEncodedData(d),y=new Wa(f,p,null,null);return y.setNumBits(d.length),y}static highLevelDecode(a){return this.getEncodedData(a)}static getEncodedData(a){let l=a.length,u=vn.UPPER,d=vn.UPPER,f="",p=0;for(;p<l;)if(d===vn.BINARY){if(l-p<5)break;let y=C.readCode(a,p,5);if(p+=5,y===0){if(l-p<11)break;y=C.readCode(a,p,11)+31,p+=11}for(let w=0;w<y;w++){if(l-p<8){p=l;break}let v=C.readCode(a,p,8);f+=ve.castAsNonUtf8Char(v),p+=8}d=u}else{let y=d===vn.DIGIT?4:5;if(l-p<y)break;let w=C.readCode(a,p,y);p+=y;let v=C.getCharacter(d,w);v.startsWith("CTRL_")?(u=d,d=C.getTable(v.charAt(5)),v.charAt(6)==="L"&&(u=d)):(f+=v,d=u)}return f}static getTable(a){switch(a){case"L":return vn.LOWER;case"P":return vn.PUNCT;case"M":return vn.MIXED;case"D":return vn.DIGIT;case"B":return vn.BINARY;case"U":default:return vn.UPPER}}static getCharacter(a,l){switch(a){case vn.UPPER:return C.UPPER_TABLE[l];case vn.LOWER:return C.LOWER_TABLE[l];case vn.MIXED:return C.MIXED_TABLE[l];case vn.PUNCT:return C.PUNCT_TABLE[l];case vn.DIGIT:return C.DIGIT_TABLE[l];default:throw new li("Bad table")}}correctBits(a){let l,u;this.ddata.getNbLayers()<=2?(u=6,l=it.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(u=8,l=it.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(u=10,l=it.AZTEC_DATA_10):(u=12,l=it.AZTEC_DATA_12);let d=this.ddata.getNbDatablocks(),f=a.length/u;if(f<d)throw new z;let p=a.length%u,y=new Int32Array(f);for(let S=0;S<f;S++,p+=u)y[S]=C.readCode(a,p,u);try{new qa(l).decode(y,f-d)}catch(S){throw new z(S)}let w=(1<<u)-1,v=0;for(let S=0;S<d;S++){let T=y[S];if(T===0||T===w)throw new z;(T===1||T===w-1)&&v++}let E=new Array(d*u-v),b=0;for(let S=0;S<d;S++){let T=y[S];if(T===1||T===w-1)E.fill(T>1,b,b+u-1),b+=u-1;else for(let M=u-1;M>=0;--M)E[b++]=(T&1<<M)!==0}return E}extractBits(a){let l=this.ddata.isCompact(),u=this.ddata.getNbLayers(),d=(l?11:14)+u*4,f=new Int32Array(d),p=new Array(this.totalBitsInLayer(u,l));if(l)for(let y=0;y<f.length;y++)f[y]=y;else{let y=d+1+2*W.truncDivision(W.truncDivision(d,2)-1,15),w=d/2,v=W.truncDivision(y,2);for(let E=0;E<w;E++){let b=E+W.truncDivision(E,15);f[w-E-1]=v-b-1,f[w+E]=v+b+1}}for(let y=0,w=0;y<u;y++){let v=(u-y)*4+(l?9:12),E=y*2,b=d-1-E;for(let S=0;S<v;S++){let T=S*2;for(let M=0;M<2;M++)p[w+T+M]=a.get(f[E+M],f[E+S]),p[w+2*v+T+M]=a.get(f[E+S],f[b-M]),p[w+4*v+T+M]=a.get(f[b-M],f[b-S]),p[w+6*v+T+M]=a.get(f[b-S],f[E+M])}w+=v*8}return p}static readCode(a,l,u){let d=0;for(let f=l;f<l+u;f++)d<<=1,a[f]&&(d|=1);return d}static readByte(a,l){let u=a.length-l;return u>=8?C.readCode(a,l,8):C.readCode(a,l,u)<<8-u}static convertBoolArrayToByteArray(a){let l=new Uint8Array((a.length+7)/8);for(let u=0;u<l.length;u++)l[u]=C.readByte(a,8*u);return l}totalBitsInLayer(a,l){return((l?88:112)+16*a)*a}}return C.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],C.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],C.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],C.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],C.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],C})();class Je{constructor(){}static round(o){return o===NaN?0:o<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:o>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:o+(o<0?-.5:.5)|0}static distance(o,a,l,u){let d=o-l,f=a-u;return Math.sqrt(d*d+f*f)}static sum(o){let a=0;for(let l=0,u=o.length;l!==u;l++){let d=o[l];a+=d}return a}}class Zc{static floatToIntBits(o){return o}}Zc.MAX_VALUE=Number.MAX_SAFE_INTEGER;class ce{constructor(o,a){this.x=o,this.y=a}getX(){return this.x}getY(){return this.y}equals(o){if(o instanceof ce){let a=o;return this.x===a.x&&this.y===a.y}return!1}hashCode(){return 31*Zc.floatToIntBits(this.x)+Zc.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(o){let a=this.distance(o[0],o[1]),l=this.distance(o[1],o[2]),u=this.distance(o[0],o[2]),d,f,p;if(l>=a&&l>=u?(f=o[0],d=o[1],p=o[2]):u>=l&&u>=a?(f=o[1],d=o[0],p=o[2]):(f=o[2],d=o[0],p=o[1]),this.crossProductZ(d,f,p)<0){let y=d;d=p,p=y}o[0]=d,o[1]=f,o[2]=p}static distance(o,a){return Je.distance(o.x,o.y,a.x,a.y)}static crossProductZ(o,a,l){let u=a.x,d=a.y;return(l.x-u)*(o.y-d)-(l.y-d)*(o.x-u)}}class Qc{constructor(o,a){this.bits=o,this.points=a}getBits(){return this.bits}getPoints(){return this.points}}class lw extends Qc{constructor(o,a,l,u,d){super(o,a),this.compact=l,this.nbDatablocks=u,this.nbLayers=d}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}let Xc=(()=>{class C{constructor(a,l,u,d){this.image=a,this.height=a.getHeight(),this.width=a.getWidth(),l==null&&(l=C.INIT_SIZE),u==null&&(u=a.getWidth()/2|0),d==null&&(d=a.getHeight()/2|0);let f=l/2|0;if(this.leftInit=u-f,this.rightInit=u+f,this.upInit=d-f,this.downInit=d+f,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new j}detect(){let a=this.leftInit,l=this.rightInit,u=this.upInit,d=this.downInit,f=!1,p=!0,y=!1,w=!1,v=!1,E=!1,b=!1,S=this.width,T=this.height;for(;p;){p=!1;let M=!0;for(;(M||!w)&&l<S;)M=this.containsBlackPoint(u,d,l,!1),M?(l++,p=!0,w=!0):w||l++;if(l>=S){f=!0;break}let O=!0;for(;(O||!v)&&d<T;)O=this.containsBlackPoint(a,l,d,!0),O?(d++,p=!0,v=!0):v||d++;if(d>=T){f=!0;break}let L=!0;for(;(L||!E)&&a>=0;)L=this.containsBlackPoint(u,d,a,!1),L?(a--,p=!0,E=!0):E||a--;if(a<0){f=!0;break}let $=!0;for(;($||!b)&&u>=0;)$=this.containsBlackPoint(a,l,u,!0),$?(u--,p=!0,b=!0):b||u--;if(u<0){f=!0;break}p&&(y=!0)}if(!f&&y){let M=l-a,O=null;for(let V=1;O===null&&V<M;V++)O=this.getBlackPointOnSegment(a,d-V,a+V,d);if(O==null)throw new j;let L=null;for(let V=1;L===null&&V<M;V++)L=this.getBlackPointOnSegment(a,u+V,a+V,u);if(L==null)throw new j;let $=null;for(let V=1;$===null&&V<M;V++)$=this.getBlackPointOnSegment(l,u+V,l-V,u);if($==null)throw new j;let K=null;for(let V=1;K===null&&V<M;V++)K=this.getBlackPointOnSegment(l,d-V,l-V,d);if(K==null)throw new j;return this.centerEdges(K,O,$,L)}else throw new j}getBlackPointOnSegment(a,l,u,d){let f=Je.round(Je.distance(a,l,u,d)),p=(u-a)/f,y=(d-l)/f,w=this.image;for(let v=0;v<f;v++){let E=Je.round(a+v*p),b=Je.round(l+v*y);if(w.get(E,b))return new ce(E,b)}return null}centerEdges(a,l,u,d){let f=a.getX(),p=a.getY(),y=l.getX(),w=l.getY(),v=u.getX(),E=u.getY(),b=d.getX(),S=d.getY(),T=C.CORR;return f<this.width/2?[new ce(b-T,S+T),new ce(y+T,w+T),new ce(v-T,E-T),new ce(f+T,p-T)]:[new ce(b+T,S+T),new ce(y+T,w-T),new ce(v-T,E+T),new ce(f-T,p-T)]}containsBlackPoint(a,l,u,d){let f=this.image;if(d){for(let p=a;p<=l;p++)if(f.get(p,u))return!0}else for(let p=a;p<=l;p++)if(f.get(u,p))return!0;return!1}}return C.INIT_SIZE=10,C.CORR=1,C})();class Dh{static checkAndNudgePoints(o,a){let l=o.getWidth(),u=o.getHeight(),d=!0;for(let f=0;f<a.length&&d;f+=2){let p=Math.floor(a[f]),y=Math.floor(a[f+1]);if(p<-1||p>l||y<-1||y>u)throw new j;d=!1,p===-1?(a[f]=0,d=!0):p===l&&(a[f]=l-1,d=!0),y===-1?(a[f+1]=0,d=!0):y===u&&(a[f+1]=u-1,d=!0)}d=!0;for(let f=a.length-2;f>=0&&d;f-=2){let p=Math.floor(a[f]),y=Math.floor(a[f+1]);if(p<-1||p>l||y<-1||y>u)throw new j;d=!1,p===-1?(a[f]=0,d=!0):p===l&&(a[f]=l-1,d=!0),y===-1?(a[f+1]=0,d=!0):y===u&&(a[f+1]=u-1,d=!0)}}}class vr{constructor(o,a,l,u,d,f,p,y,w){this.a11=o,this.a21=a,this.a31=l,this.a12=u,this.a22=d,this.a32=f,this.a13=p,this.a23=y,this.a33=w}static quadrilateralToQuadrilateral(o,a,l,u,d,f,p,y,w,v,E,b,S,T,M,O){let L=vr.quadrilateralToSquare(o,a,l,u,d,f,p,y);return vr.squareToQuadrilateral(w,v,E,b,S,T,M,O).times(L)}transformPoints(o){let a=o.length,l=this.a11,u=this.a12,d=this.a13,f=this.a21,p=this.a22,y=this.a23,w=this.a31,v=this.a32,E=this.a33;for(let b=0;b<a;b+=2){let S=o[b],T=o[b+1],M=d*S+y*T+E;o[b]=(l*S+f*T+w)/M,o[b+1]=(u*S+p*T+v)/M}}transformPointsWithValues(o,a){let l=this.a11,u=this.a12,d=this.a13,f=this.a21,p=this.a22,y=this.a23,w=this.a31,v=this.a32,E=this.a33,b=o.length;for(let S=0;S<b;S++){let T=o[S],M=a[S],O=d*T+y*M+E;o[S]=(l*T+f*M+w)/O,a[S]=(u*T+p*M+v)/O}}static squareToQuadrilateral(o,a,l,u,d,f,p,y){let w=o-l+d-p,v=a-u+f-y;if(w===0&&v===0)return new vr(l-o,d-l,o,u-a,f-u,a,0,0,1);{let E=l-d,b=p-d,S=u-f,T=y-f,M=E*T-b*S,O=(w*T-b*v)/M,L=(E*v-w*S)/M;return new vr(l-o+O*l,p-o+L*p,o,u-a+O*u,y-a+L*y,a,O,L,1)}}static quadrilateralToSquare(o,a,l,u,d,f,p,y){return vr.squareToQuadrilateral(o,a,l,u,d,f,p,y).buildAdjoint()}buildAdjoint(){return new vr(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(o){return new vr(this.a11*o.a11+this.a21*o.a12+this.a31*o.a13,this.a11*o.a21+this.a21*o.a22+this.a31*o.a23,this.a11*o.a31+this.a21*o.a32+this.a31*o.a33,this.a12*o.a11+this.a22*o.a12+this.a32*o.a13,this.a12*o.a21+this.a22*o.a22+this.a32*o.a23,this.a12*o.a31+this.a22*o.a32+this.a32*o.a33,this.a13*o.a11+this.a23*o.a12+this.a33*o.a13,this.a13*o.a21+this.a23*o.a22+this.a33*o.a23,this.a13*o.a31+this.a23*o.a32+this.a33*o.a33)}}class cw extends Dh{sampleGrid(o,a,l,u,d,f,p,y,w,v,E,b,S,T,M,O,L,$,K){let V=vr.quadrilateralToQuadrilateral(u,d,f,p,y,w,v,E,b,S,T,M,O,L,$,K);return this.sampleGridWithTransform(o,a,l,V)}sampleGridWithTransform(o,a,l,u){if(a<=0||l<=0)throw new j;let d=new en(a,l),f=new Float32Array(2*a);for(let p=0;p<l;p++){let y=f.length,w=p+.5;for(let v=0;v<y;v+=2)f[v]=v/2+.5,f[v+1]=w;u.transformPoints(f),Dh.checkAndNudgePoints(o,f);try{for(let v=0;v<y;v+=2)o.get(Math.floor(f[v]),Math.floor(f[v+1]))&&d.set(v/2,p)}catch{throw new j}}return d}}class ji{static setGridSampler(o){ji.gridSampler=o}static getInstance(){return ji.gridSampler}}ji.gridSampler=new cw;class Nn{constructor(o,a){this.x=o,this.y=a}toResultPoint(){return new ce(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class uw{constructor(o){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=o}detect(){return this.detectMirror(!1)}detectMirror(o){let a=this.getMatrixCenter(),l=this.getBullsEyeCorners(a);if(o){let f=l[0];l[0]=l[2],l[2]=f}this.extractParameters(l);let u=this.sampleGrid(this.image,l[this.shift%4],l[(this.shift+1)%4],l[(this.shift+2)%4],l[(this.shift+3)%4]),d=this.getMatrixCornerPoints(l);return new lw(u,d,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(o){if(!this.isValidPoint(o[0])||!this.isValidPoint(o[1])||!this.isValidPoint(o[2])||!this.isValidPoint(o[3]))throw new j;let a=2*this.nbCenterLayers,l=new Int32Array([this.sampleLine(o[0],o[1],a),this.sampleLine(o[1],o[2],a),this.sampleLine(o[2],o[3],a),this.sampleLine(o[3],o[0],a)]);this.shift=this.getRotation(l,a);let u=0;for(let f=0;f<4;f++){let p=l[(this.shift+f)%4];this.compact?(u<<=7,u+=p>>1&127):(u<<=10,u+=(p>>2&992)+(p>>1&31))}let d=this.getCorrectedParameterData(u,this.compact);this.compact?(this.nbLayers=(d>>6)+1,this.nbDataBlocks=(d&63)+1):(this.nbLayers=(d>>11)+1,this.nbDataBlocks=(d&2047)+1)}getRotation(o,a){let l=0;o.forEach((u,d,f)=>{let p=(u>>a-2<<1)+(u&1);l=(l<<3)+p}),l=((l&1)<<11)+(l>>1);for(let u=0;u<4;u++)if(W.bitCount(l^this.EXPECTED_CORNER_BITS[u])<=2)return u;throw new j}getCorrectedParameterData(o,a){let l,u;a?(l=7,u=2):(l=10,u=4);let d=l-u,f=new Int32Array(l);for(let y=l-1;y>=0;--y)f[y]=o&15,o>>=4;try{new qa(it.AZTEC_PARAM).decode(f,d)}catch{throw new j}let p=0;for(let y=0;y<u;y++)p=(p<<4)+f[y];return p}getBullsEyeCorners(o){let a=o,l=o,u=o,d=o,f=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let E=this.getFirstDifferent(a,f,1,-1),b=this.getFirstDifferent(l,f,1,1),S=this.getFirstDifferent(u,f,-1,1),T=this.getFirstDifferent(d,f,-1,-1);if(this.nbCenterLayers>2){let M=this.distancePoint(T,E)*this.nbCenterLayers/(this.distancePoint(d,a)*(this.nbCenterLayers+2));if(M<.75||M>1.25||!this.isWhiteOrBlackRectangle(E,b,S,T))break}a=E,l=b,u=S,d=T,f=!f}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new j;this.compact=this.nbCenterLayers===5;let p=new ce(a.getX()+.5,a.getY()-.5),y=new ce(l.getX()+.5,l.getY()+.5),w=new ce(u.getX()-.5,u.getY()+.5),v=new ce(d.getX()-.5,d.getY()-.5);return this.expandSquare([p,y,w,v],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let o,a,l,u;try{let p=new Xc(this.image).detect();o=p[0],a=p[1],l=p[2],u=p[3]}catch{let y=this.image.getWidth()/2,w=this.image.getHeight()/2;o=this.getFirstDifferent(new Nn(y+7,w-7),!1,1,-1).toResultPoint(),a=this.getFirstDifferent(new Nn(y+7,w+7),!1,1,1).toResultPoint(),l=this.getFirstDifferent(new Nn(y-7,w+7),!1,-1,1).toResultPoint(),u=this.getFirstDifferent(new Nn(y-7,w-7),!1,-1,-1).toResultPoint()}let d=Je.round((o.getX()+u.getX()+a.getX()+l.getX())/4),f=Je.round((o.getY()+u.getY()+a.getY()+l.getY())/4);try{let p=new Xc(this.image,15,d,f).detect();o=p[0],a=p[1],l=p[2],u=p[3]}catch{o=this.getFirstDifferent(new Nn(d+7,f-7),!1,1,-1).toResultPoint(),a=this.getFirstDifferent(new Nn(d+7,f+7),!1,1,1).toResultPoint(),l=this.getFirstDifferent(new Nn(d-7,f+7),!1,-1,1).toResultPoint(),u=this.getFirstDifferent(new Nn(d-7,f-7),!1,-1,-1).toResultPoint()}return d=Je.round((o.getX()+u.getX()+a.getX()+l.getX())/4),f=Je.round((o.getY()+u.getY()+a.getY()+l.getY())/4),new Nn(d,f)}getMatrixCornerPoints(o){return this.expandSquare(o,2*this.nbCenterLayers,this.getDimension())}sampleGrid(o,a,l,u,d){let f=ji.getInstance(),p=this.getDimension(),y=p/2-this.nbCenterLayers,w=p/2+this.nbCenterLayers;return f.sampleGrid(o,p,p,y,y,w,y,w,w,y,w,a.getX(),a.getY(),l.getX(),l.getY(),u.getX(),u.getY(),d.getX(),d.getY())}sampleLine(o,a,l){let u=0,d=this.distanceResultPoint(o,a),f=d/l,p=o.getX(),y=o.getY(),w=f*(a.getX()-o.getX())/d,v=f*(a.getY()-o.getY())/d;for(let E=0;E<l;E++)this.image.get(Je.round(p+E*w),Je.round(y+E*v))&&(u|=1<<l-E-1);return u}isWhiteOrBlackRectangle(o,a,l,u){let d=3;o=new Nn(o.getX()-d,o.getY()+d),a=new Nn(a.getX()-d,a.getY()-d),l=new Nn(l.getX()+d,l.getY()-d),u=new Nn(u.getX()+d,u.getY()+d);let f=this.getColor(u,o);if(f===0)return!1;let p=this.getColor(o,a);return p!==f||(p=this.getColor(a,l),p!==f)?!1:(p=this.getColor(l,u),p===f)}getColor(o,a){let l=this.distancePoint(o,a),u=(a.getX()-o.getX())/l,d=(a.getY()-o.getY())/l,f=0,p=o.getX(),y=o.getY(),w=this.image.get(o.getX(),o.getY()),v=Math.ceil(l);for(let b=0;b<v;b++)p+=u,y+=d,this.image.get(Je.round(p),Je.round(y))!==w&&f++;let E=f/l;return E>.1&&E<.9?0:E<=.1===w?1:-1}getFirstDifferent(o,a,l,u){let d=o.getX()+l,f=o.getY()+u;for(;this.isValid(d,f)&&this.image.get(d,f)===a;)d+=l,f+=u;for(d-=l,f-=u;this.isValid(d,f)&&this.image.get(d,f)===a;)d+=l;for(d-=l;this.isValid(d,f)&&this.image.get(d,f)===a;)f+=u;return f-=u,new Nn(d,f)}expandSquare(o,a,l){let u=l/(2*a),d=o[0].getX()-o[2].getX(),f=o[0].getY()-o[2].getY(),p=(o[0].getX()+o[2].getX())/2,y=(o[0].getY()+o[2].getY())/2,w=new ce(p+u*d,y+u*f),v=new ce(p-u*d,y-u*f);d=o[1].getX()-o[3].getX(),f=o[1].getY()-o[3].getY(),p=(o[1].getX()+o[3].getX())/2,y=(o[1].getY()+o[3].getY())/2;let E=new ce(p+u*d,y+u*f),b=new ce(p-u*d,y-u*f);return[w,E,v,b]}isValid(o,a){return o>=0&&o<this.image.getWidth()&&a>0&&a<this.image.getHeight()}isValidPoint(o){let a=Je.round(o.getX()),l=Je.round(o.getY());return this.isValid(a,l)}distancePoint(o,a){return Je.distance(o.getX(),o.getY(),a.getX(),a.getY())}distanceResultPoint(o,a){return Je.distance(o.getX(),o.getY(),a.getX(),a.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(W.truncDivision(this.nbLayers-4,8)+1)+15}}class Kc{decode(o,a=null){let l=null,u=new uw(o.getBlackMatrix()),d=null,f=null;try{let v=u.detectMirror(!1);d=v.getPoints(),this.reportFoundResultPoints(a,d),f=new Ih().decode(v)}catch(v){l=v}if(f==null)try{let v=u.detectMirror(!0);d=v.getPoints(),this.reportFoundResultPoints(a,d),f=new Ih().decode(v)}catch(v){throw l??v}let p=new Mn(f.getText(),f.getRawBytes(),f.getNumBits(),d,ye.AZTEC,A.currentTimeMillis()),y=f.getByteSegments();y!=null&&p.putMetadata(nn.BYTE_SEGMENTS,y);let w=f.getECLevel();return w!=null&&p.putMetadata(nn.ERROR_CORRECTION_LEVEL,w),p}reportFoundResultPoints(o,a){if(o!=null){let l=o.get(me.NEED_RESULT_POINT_CALLBACK);l!=null&&a.forEach((u,d,f)=>{l.foundPossibleResultPoint(u)})}}reset(){}}class O2 extends Eo{constructor(o=500){super(new Kc,o)}}class Ut{decode(o,a){try{return this.doDecode(o,a)}catch{if(a&&a.get(me.TRY_HARDER)===!0&&o.isRotateSupported()){let d=o.rotateCounterClockwise(),f=this.doDecode(d,a),p=f.getResultMetadata(),y=270;p!==null&&p.get(nn.ORIENTATION)===!0&&(y=y+p.get(nn.ORIENTATION)%360),f.putMetadata(nn.ORIENTATION,y);let w=f.getResultPoints();if(w!==null){let v=d.getHeight();for(let E=0;E<w.length;E++)w[E]=new ce(v-w[E].getY()-1,w[E].getX())}return f}else throw new j}}reset(){}doDecode(o,a){let l=o.getWidth(),u=o.getHeight(),d=new le(l),f=a&&a.get(me.TRY_HARDER)===!0,p=Math.max(1,u>>(f?8:5)),y;f?y=u:y=15;let w=Math.trunc(u/2);for(let v=0;v<y;v++){let E=Math.trunc((v+1)/2),b=(v&1)===0,S=w+p*(b?E:-E);if(S<0||S>=u)break;try{d=o.getBlackRow(S,d)}catch{continue}for(let T=0;T<2;T++){if(T===1&&(d.reverse(),a&&a.get(me.NEED_RESULT_POINT_CALLBACK)===!0)){let M=new Map;a.forEach((O,L)=>M.set(L,O)),M.delete(me.NEED_RESULT_POINT_CALLBACK),a=M}try{let M=this.decodeRow(S,d,a);if(T===1){M.putMetadata(nn.ORIENTATION,180);let O=M.getResultPoints();O!==null&&(O[0]=new ce(l-O[0].getX()-1,O[0].getY()),O[1]=new ce(l-O[1].getX()-1,O[1].getY()))}return M}catch{}}}throw new j}static recordPattern(o,a,l){let u=l.length;for(let w=0;w<u;w++)l[w]=0;let d=o.getSize();if(a>=d)throw new j;let f=!o.get(a),p=0,y=a;for(;y<d;){if(o.get(y)!==f)l[p]++;else{if(++p===u)break;l[p]=1,f=!f}y++}if(!(p===u||p===u-1&&y===d))throw new j}static recordPatternInReverse(o,a,l){let u=l.length,d=o.get(a);for(;a>0&&u>=0;)o.get(--a)!==d&&(u--,d=!d);if(u>=0)throw new j;Ut.recordPattern(o,a+1,l)}static patternMatchVariance(o,a,l){let u=o.length,d=0,f=0;for(let w=0;w<u;w++)d+=o[w],f+=a[w];if(d<f)return Number.POSITIVE_INFINITY;let p=d/f;l*=p;let y=0;for(let w=0;w<u;w++){let v=o[w],E=a[w]*p,b=v>E?v-E:E-v;if(b>l)return Number.POSITIVE_INFINITY;y+=b}return y/d}}class Z extends Ut{static findStartPattern(o){let a=o.getSize(),l=o.getNextSet(0),u=0,d=Int32Array.from([0,0,0,0,0,0]),f=l,p=!1,y=6;for(let w=l;w<a;w++)if(o.get(w)!==p)d[u]++;else{if(u===y-1){let v=Z.MAX_AVG_VARIANCE,E=-1;for(let b=Z.CODE_START_A;b<=Z.CODE_START_C;b++){let S=Ut.patternMatchVariance(d,Z.CODE_PATTERNS[b],Z.MAX_INDIVIDUAL_VARIANCE);S<v&&(v=S,E=b)}if(E>=0&&o.isRange(Math.max(0,f-(w-f)/2),f,!1))return Int32Array.from([f,w,E]);f+=d[0]+d[1],d=d.slice(2,d.length-1),d[u-1]=0,d[u]=0,u--}else u++;d[u]=1,p=!p}throw new j}static decodeCode(o,a,l){Ut.recordPattern(o,l,a);let u=Z.MAX_AVG_VARIANCE,d=-1;for(let f=0;f<Z.CODE_PATTERNS.length;f++){let p=Z.CODE_PATTERNS[f],y=this.patternMatchVariance(a,p,Z.MAX_INDIVIDUAL_VARIANCE);y<u&&(u=y,d=f)}if(d>=0)return d;throw new j}decodeRow(o,a,l){let u=l&&l.get(me.ASSUME_GS1)===!0,d=Z.findStartPattern(a),f=d[2],p=0,y=new Uint8Array(20);y[p++]=f;let w;switch(f){case Z.CODE_START_A:w=Z.CODE_CODE_A;break;case Z.CODE_START_B:w=Z.CODE_CODE_B;break;case Z.CODE_START_C:w=Z.CODE_CODE_C;break;default:throw new z}let v=!1,E=!1,b="",S=d[0],T=d[1],M=Int32Array.from([0,0,0,0,0,0]),O=0,L=0,$=f,K=0,V=!0,ze=!1,De=!1;for(;!v;){let vs=E;switch(E=!1,O=L,L=Z.decodeCode(a,M,T),y[p++]=L,L!==Z.CODE_STOP&&(V=!0),L!==Z.CODE_STOP&&(K++,$+=K*L),S=T,T+=M.reduce((yA,wA)=>yA+wA,0),L){case Z.CODE_START_A:case Z.CODE_START_B:case Z.CODE_START_C:throw new z}switch(w){case Z.CODE_CODE_A:if(L<64)De===ze?b+=String.fromCharCode(32+L):b+=String.fromCharCode(32+L+128),De=!1;else if(L<96)De===ze?b+=String.fromCharCode(L-64):b+=String.fromCharCode(L+64),De=!1;else switch(L!==Z.CODE_STOP&&(V=!1),L){case Z.CODE_FNC_1:u&&(b.length===0?b+="]C1":b+="");break;case Z.CODE_FNC_2:case Z.CODE_FNC_3:break;case Z.CODE_FNC_4_A:!ze&&De?(ze=!0,De=!1):ze&&De?(ze=!1,De=!1):De=!0;break;case Z.CODE_SHIFT:E=!0,w=Z.CODE_CODE_B;break;case Z.CODE_CODE_B:w=Z.CODE_CODE_B;break;case Z.CODE_CODE_C:w=Z.CODE_CODE_C;break;case Z.CODE_STOP:v=!0;break}break;case Z.CODE_CODE_B:if(L<96)De===ze?b+=String.fromCharCode(32+L):b+=String.fromCharCode(32+L+128),De=!1;else switch(L!==Z.CODE_STOP&&(V=!1),L){case Z.CODE_FNC_1:u&&(b.length===0?b+="]C1":b+="");break;case Z.CODE_FNC_2:case Z.CODE_FNC_3:break;case Z.CODE_FNC_4_B:!ze&&De?(ze=!0,De=!1):ze&&De?(ze=!1,De=!1):De=!0;break;case Z.CODE_SHIFT:E=!0,w=Z.CODE_CODE_A;break;case Z.CODE_CODE_A:w=Z.CODE_CODE_A;break;case Z.CODE_CODE_C:w=Z.CODE_CODE_C;break;case Z.CODE_STOP:v=!0;break}break;case Z.CODE_CODE_C:if(L<100)L<10&&(b+="0"),b+=L;else switch(L!==Z.CODE_STOP&&(V=!1),L){case Z.CODE_FNC_1:u&&(b.length===0?b+="]C1":b+="");break;case Z.CODE_CODE_A:w=Z.CODE_CODE_A;break;case Z.CODE_CODE_B:w=Z.CODE_CODE_B;break;case Z.CODE_STOP:v=!0;break}break}vs&&(w=w===Z.CODE_CODE_A?Z.CODE_CODE_B:Z.CODE_CODE_A)}let Vn=T-S;if(T=a.getNextUnset(T),!a.isRange(T,Math.min(a.getSize(),T+(T-S)/2),!1))throw new j;if($-=K*O,$%103!==O)throw new x;let Ir=b.length;if(Ir===0)throw new j;Ir>0&&V&&(w===Z.CODE_CODE_C?b=b.substring(0,Ir-2):b=b.substring(0,Ir-1));let jn=(d[1]+d[0])/2,wt=S+Vn/2,dn=y.length,Qn=new Uint8Array(dn);for(let vs=0;vs<dn;vs++)Qn[vs]=y[vs];let Cs=[new ce(jn,o),new ce(wt,o)];return new Mn(b,Qn,0,Cs,ye.CODE_128,new Date().getTime())}}Z.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],Z.MAX_AVG_VARIANCE=.25,Z.MAX_INDIVIDUAL_VARIANCE=.7,Z.CODE_SHIFT=98,Z.CODE_CODE_C=99,Z.CODE_CODE_B=100,Z.CODE_CODE_A=101,Z.CODE_FNC_1=102,Z.CODE_FNC_2=97,Z.CODE_FNC_3=96,Z.CODE_FNC_4_A=101,Z.CODE_FNC_4_B=100,Z.CODE_START_A=103,Z.CODE_START_B=104,Z.CODE_START_C=105,Z.CODE_STOP=106;let Sh=(()=>{class C extends Ut{constructor(a=!1,l=!1){super(),this.usingCheckDigit=a,this.extendedMode=l,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(a,l,u){let d=this.counters;d.fill(0),this.decodeRowResult="";let f=C.findAsteriskPattern(l,d),p=l.getNextSet(f[1]),y=l.getSize(),w,v;do{C.recordPattern(l,p,d);let O=C.toNarrowWidePattern(d);if(O<0)throw new j;w=C.patternToChar(O),this.decodeRowResult+=w,v=p;for(let L of d)p+=L;p=l.getNextSet(p)}while(w!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let E=0;for(let O of d)E+=O;let b=p-v-E;if(p!==y&&b*2<E)throw new j;if(this.usingCheckDigit){let O=this.decodeRowResult.length-1,L=0;for(let $=0;$<O;$++)L+=C.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt($));if(this.decodeRowResult.charAt(O)!==C.ALPHABET_STRING.charAt(L%43))throw new x;this.decodeRowResult=this.decodeRowResult.substring(0,O)}if(this.decodeRowResult.length===0)throw new j;let S;this.extendedMode?S=C.decodeExtended(this.decodeRowResult):S=this.decodeRowResult;let T=(f[1]+f[0])/2,M=v+E/2;return new Mn(S,null,0,[new ce(T,a),new ce(M,a)],ye.CODE_39,new Date().getTime())}static findAsteriskPattern(a,l){let u=a.getSize(),d=a.getNextSet(0),f=0,p=d,y=!1,w=l.length;for(let v=d;v<u;v++)if(a.get(v)!==y)l[f]++;else{if(f===w-1){if(this.toNarrowWidePattern(l)===C.ASTERISK_ENCODING&&a.isRange(Math.max(0,p-Math.floor((v-p)/2)),p,!1))return[p,v];p+=l[0]+l[1],l.copyWithin(0,2,2+f-1),l[f-1]=0,l[f]=0,f--}else f++;l[f]=1,y=!y}throw new j}static toNarrowWidePattern(a){let l=a.length,u=0,d;do{let f=2147483647;for(let w of a)w<f&&w>u&&(f=w);u=f,d=0;let p=0,y=0;for(let w=0;w<l;w++){let v=a[w];v>u&&(y|=1<<l-1-w,d++,p+=v)}if(d===3){for(let w=0;w<l&&d>0;w++){let v=a[w];if(v>u&&(d--,v*2>=p))return-1}return y}}while(d>3);return-1}static patternToChar(a){for(let l=0;l<C.CHARACTER_ENCODINGS.length;l++)if(C.CHARACTER_ENCODINGS[l]===a)return C.ALPHABET_STRING.charAt(l);if(a===C.ASTERISK_ENCODING)return"*";throw new j}static decodeExtended(a){let l=a.length,u="";for(let d=0;d<l;d++){let f=a.charAt(d);if(f==="+"||f==="$"||f==="%"||f==="/"){let p=a.charAt(d+1),y="\0";switch(f){case"+":if(p>="A"&&p<="Z")y=String.fromCharCode(p.charCodeAt(0)+32);else throw new z;break;case"$":if(p>="A"&&p<="Z")y=String.fromCharCode(p.charCodeAt(0)-64);else throw new z;break;case"%":if(p>="A"&&p<="E")y=String.fromCharCode(p.charCodeAt(0)-38);else if(p>="F"&&p<="J")y=String.fromCharCode(p.charCodeAt(0)-11);else if(p>="K"&&p<="O")y=String.fromCharCode(p.charCodeAt(0)+16);else if(p>="P"&&p<="T")y=String.fromCharCode(p.charCodeAt(0)+43);else if(p==="U")y="\0";else if(p==="V")y="@";else if(p==="W")y="`";else if(p==="X"||p==="Y"||p==="Z")y="\x7F";else throw new z;break;case"/":if(p>="A"&&p<="O")y=String.fromCharCode(p.charCodeAt(0)-32);else if(p==="Z")y=":";else throw new z;break}u+=y,d++}else u+=f}return u}}return C.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",C.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],C.ASTERISK_ENCODING=148,C})();class mt extends Ut{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(o,a,l){let u=this.decodeStart(a),d=this.decodeEnd(a),f=new ht;mt.decodeMiddle(a,u[1],d[0],f);let p=f.toString(),y=null;l!=null&&(y=l.get(me.ALLOWED_LENGTHS)),y==null&&(y=mt.DEFAULT_ALLOWED_LENGTHS);let w=p.length,v=!1,E=0;for(let T of y){if(w===T){v=!0;break}T>E&&(E=T)}if(!v&&w>E&&(v=!0),!v)throw new z;let b=[new ce(u[1],o),new ce(d[0],o)];return new Mn(p,null,0,b,ye.ITF,new Date().getTime())}static decodeMiddle(o,a,l,u){let d=new Int32Array(10),f=new Int32Array(5),p=new Int32Array(5);for(d.fill(0),f.fill(0),p.fill(0);a<l;){Ut.recordPattern(o,a,d);for(let w=0;w<5;w++){let v=2*w;f[w]=d[v],p[w]=d[v+1]}let y=mt.decodeDigit(f);u.append(y.toString()),y=this.decodeDigit(p),u.append(y.toString()),d.forEach(function(w){a+=w})}}decodeStart(o){let a=mt.skipWhiteSpace(o),l=mt.findGuardPattern(o,a,mt.START_PATTERN);return this.narrowLineWidth=(l[1]-l[0])/4,this.validateQuietZone(o,l[0]),l}validateQuietZone(o,a){let l=this.narrowLineWidth*10;l=l<a?l:a;for(let u=a-1;l>0&&u>=0&&!o.get(u);u--)l--;if(l!==0)throw new j}static skipWhiteSpace(o){let a=o.getSize(),l=o.getNextSet(0);if(l===a)throw new j;return l}decodeEnd(o){o.reverse();try{let a=mt.skipWhiteSpace(o),l;try{l=mt.findGuardPattern(o,a,mt.END_PATTERN_REVERSED[0])}catch(d){d instanceof j&&(l=mt.findGuardPattern(o,a,mt.END_PATTERN_REVERSED[1]))}this.validateQuietZone(o,l[0]);let u=l[0];return l[0]=o.getSize()-l[1],l[1]=o.getSize()-u,l}finally{o.reverse()}}static findGuardPattern(o,a,l){let u=l.length,d=new Int32Array(u),f=o.getSize(),p=!1,y=0,w=a;d.fill(0);for(let v=a;v<f;v++)if(o.get(v)!==p)d[y]++;else{if(y===u-1){if(Ut.patternMatchVariance(d,l,mt.MAX_INDIVIDUAL_VARIANCE)<mt.MAX_AVG_VARIANCE)return[w,v];w+=d[0]+d[1],A.arraycopy(d,2,d,0,y-1),d[y-1]=0,d[y]=0,y--}else y++;d[y]=1,p=!p}throw new j}static decodeDigit(o){let a=mt.MAX_AVG_VARIANCE,l=-1,u=mt.PATTERNS.length;for(let d=0;d<u;d++){let f=mt.PATTERNS[d],p=Ut.patternMatchVariance(o,f,mt.MAX_INDIVIDUAL_VARIANCE);p<a?(a=p,l=d):p===a&&(l=-1)}if(l>=0)return l%10;throw new j}}mt.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],mt.MAX_AVG_VARIANCE=.38,mt.MAX_INDIVIDUAL_VARIANCE=.5,mt.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],mt.START_PATTERN=Int32Array.from([1,1,1,1]),mt.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Rt extends Ut{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(o){let a=!1,l,u=0,d=Int32Array.from([0,0,0]);for(;!a;){d=Int32Array.from([0,0,0]),l=Rt.findGuardPattern(o,u,!1,this.START_END_PATTERN,d);let f=l[0];u=l[1];let p=f-(u-f);p>=0&&(a=o.isRange(p,f,!1))}return l}static checkChecksum(o){return Rt.checkStandardUPCEANChecksum(o)}static checkStandardUPCEANChecksum(o){let a=o.length;if(a===0)return!1;let l=parseInt(o.charAt(a-1),10);return Rt.getStandardUPCEANChecksum(o.substring(0,a-1))===l}static getStandardUPCEANChecksum(o){let a=o.length,l=0;for(let u=a-1;u>=0;u-=2){let d=o.charAt(u).charCodeAt(0)-48;if(d<0||d>9)throw new z;l+=d}l*=3;for(let u=a-2;u>=0;u-=2){let d=o.charAt(u).charCodeAt(0)-48;if(d<0||d>9)throw new z;l+=d}return(1e3-l)%10}static decodeEnd(o,a){return Rt.findGuardPattern(o,a,!1,Rt.START_END_PATTERN,new Int32Array(Rt.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(o,a,l,u){return this.findGuardPattern(o,a,l,u,new Int32Array(u.length))}static findGuardPattern(o,a,l,u,d){let f=o.getSize();a=l?o.getNextUnset(a):o.getNextSet(a);let p=0,y=a,w=u.length,v=l;for(let E=a;E<f;E++)if(o.get(E)!==v)d[p]++;else{if(p===w-1){if(Ut.patternMatchVariance(d,u,Rt.MAX_INDIVIDUAL_VARIANCE)<Rt.MAX_AVG_VARIANCE)return Int32Array.from([y,E]);y+=d[0]+d[1];let b=d.slice(2,d.length-1);for(let S=0;S<p-1;S++)d[S]=b[S];d[p-1]=0,d[p]=0,p--}else p++;d[p]=1,v=!v}throw new j}static decodeDigit(o,a,l,u){this.recordPattern(o,l,a);let d=this.MAX_AVG_VARIANCE,f=-1,p=u.length;for(let y=0;y<p;y++){let w=u[y],v=Ut.patternMatchVariance(a,w,Rt.MAX_INDIVIDUAL_VARIANCE);v<d&&(d=v,f=y)}if(f>=0)return f;throw new j}}Rt.MAX_AVG_VARIANCE=.48,Rt.MAX_INDIVIDUAL_VARIANCE=.7,Rt.START_END_PATTERN=Int32Array.from([1,1,1]),Rt.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Rt.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Rt.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Ya{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(o,a,l){let u=this.decodeRowStringBuffer,d=this.decodeMiddle(a,l,u),f=u.toString(),p=Ya.parseExtensionString(f),y=[new ce((l[0]+l[1])/2,o),new ce(d,o)],w=new Mn(f,null,0,y,ye.UPC_EAN_EXTENSION,new Date().getTime());return p!=null&&w.putAllMetadata(p),w}decodeMiddle(o,a,l){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let d=o.getSize(),f=a[1],p=0;for(let w=0;w<5&&f<d;w++){let v=Rt.decodeDigit(o,u,f,Rt.L_AND_G_PATTERNS);l+=String.fromCharCode(48+v%10);for(let E of u)f+=E;v>=10&&(p|=1<<4-w),w!==4&&(f=o.getNextSet(f),f=o.getNextUnset(f))}if(l.length!==5)throw new j;let y=this.determineCheckDigit(p);if(Ya.extensionChecksum(l.toString())!==y)throw new j;return f}static extensionChecksum(o){let a=o.length,l=0;for(let u=a-2;u>=0;u-=2)l+=o.charAt(u).charCodeAt(0)-48;l*=3;for(let u=a-1;u>=0;u-=2)l+=o.charAt(u).charCodeAt(0)-48;return l*=3,l%10}determineCheckDigit(o){for(let a=0;a<10;a++)if(o===this.CHECK_DIGIT_ENCODINGS[a])return a;throw new j}static parseExtensionString(o){if(o.length!==5)return null;let a=Ya.parseExtension5String(o);return a==null?null:new Map([[nn.SUGGESTED_PRICE,a]])}static parseExtension5String(o){let a;switch(o.charAt(0)){case"0":a="\xA3";break;case"5":a="$";break;case"9":switch(o){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}a="";break;default:a="";break}let l=parseInt(o.substring(1)),u=(l/100).toString(),d=l%100,f=d<10?"0"+d:d.toString();return a+u+"."+f}}class Ah{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(o,a,l){let u=this.decodeRowStringBuffer,d=this.decodeMiddle(a,l,u),f=u.toString(),p=Ah.parseExtensionString(f),y=[new ce((l[0]+l[1])/2,o),new ce(d,o)],w=new Mn(f,null,0,y,ye.UPC_EAN_EXTENSION,new Date().getTime());return p!=null&&w.putAllMetadata(p),w}decodeMiddle(o,a,l){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let d=o.getSize(),f=a[1],p=0;for(let y=0;y<2&&f<d;y++){let w=Rt.decodeDigit(o,u,f,Rt.L_AND_G_PATTERNS);l+=String.fromCharCode(48+w%10);for(let v of u)f+=v;w>=10&&(p|=1<<1-y),y!==1&&(f=o.getNextSet(f),f=o.getNextUnset(f))}if(l.length!==2)throw new j;if(parseInt(l.toString())%4!==p)throw new j;return f}static parseExtensionString(o){return o.length!==2?null:new Map([[nn.ISSUE_NUMBER,parseInt(o)]])}}class dw{static decodeRow(o,a,l){let u=Rt.findGuardPattern(a,l,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new Ya().decodeRow(o,a,u)}catch{return new Ah().decodeRow(o,a,u)}}}dw.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class ot extends Rt{constructor(){super(),this.decodeRowStringBuffer="",ot.L_AND_G_PATTERNS=ot.L_PATTERNS.map(o=>Int32Array.from(o));for(let o=10;o<20;o++){let a=ot.L_PATTERNS[o-10],l=new Int32Array(a.length);for(let u=0;u<a.length;u++)l[u]=a[a.length-u-1];ot.L_AND_G_PATTERNS[o]=l}}decodeRow(o,a,l){let u=ot.findStartGuardPattern(a),d=l==null?null:l.get(me.NEED_RESULT_POINT_CALLBACK);if(d!=null){let V=new ce((u[0]+u[1])/2,o);d.foundPossibleResultPoint(V)}let f=this.decodeMiddle(a,u,this.decodeRowStringBuffer),p=f.rowOffset,y=f.resultString;if(d!=null){let V=new ce(p,o);d.foundPossibleResultPoint(V)}let w=this.decodeEnd(a,p);if(d!=null){let V=new ce((w[0]+w[1])/2,o);d.foundPossibleResultPoint(V)}let v=w[1],E=v+(v-w[0]);if(E>=a.getSize()||!a.isRange(v,E,!1))throw new j;let b=y.toString();if(b.length<8)throw new z;if(!ot.checkChecksum(b))throw new x;let S=(u[1]+u[0])/2,T=(w[1]+w[0])/2,M=this.getBarcodeFormat(),O=[new ce(S,o),new ce(T,o)],L=new Mn(b,null,0,O,M,new Date().getTime()),$=0;try{let V=dw.decodeRow(o,a,w[1]);L.putMetadata(nn.UPC_EAN_EXTENSION,V.getText()),L.putAllMetadata(V.getResultMetadata()),L.addResultPoints(V.getResultPoints()),$=V.getText().length}catch{}let K=l==null?null:l.get(me.ALLOWED_EAN_EXTENSIONS);if(K!=null){let V=!1;for(let ze in K)if($.toString()===ze){V=!0;break}if(!V)throw new j}return L}decodeEnd(o,a){return ot.findGuardPattern(o,a,!1,ot.START_END_PATTERN,new Int32Array(ot.START_END_PATTERN.length).fill(0))}static checkChecksum(o){return ot.checkStandardUPCEANChecksum(o)}static checkStandardUPCEANChecksum(o){let a=o.length;if(a===0)return!1;let l=parseInt(o.charAt(a-1),10);return ot.getStandardUPCEANChecksum(o.substring(0,a-1))===l}static getStandardUPCEANChecksum(o){let a=o.length,l=0;for(let u=a-1;u>=0;u-=2){let d=o.charAt(u).charCodeAt(0)-48;if(d<0||d>9)throw new z;l+=d}l*=3;for(let u=a-2;u>=0;u-=2){let d=o.charAt(u).charCodeAt(0)-48;if(d<0||d>9)throw new z;l+=d}return(1e3-l)%10}}let Jc=(()=>{class C extends ot{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(a,l,u){let d=this.decodeMiddleCounters;d[0]=0,d[1]=0,d[2]=0,d[3]=0;let f=a.getSize(),p=l[1],y=0;for(let v=0;v<6&&p<f;v++){let E=ot.decodeDigit(a,d,p,ot.L_AND_G_PATTERNS);u+=String.fromCharCode(48+E%10);for(let b of d)p+=b;E>=10&&(y|=1<<5-v)}u=C.determineFirstDigit(u,y),p=ot.findGuardPattern(a,p,!0,ot.MIDDLE_PATTERN,new Int32Array(ot.MIDDLE_PATTERN.length).fill(0))[1];for(let v=0;v<6&&p<f;v++){let E=ot.decodeDigit(a,d,p,ot.L_PATTERNS);u+=String.fromCharCode(48+E);for(let b of d)p+=b}return{rowOffset:p,resultString:u}}getBarcodeFormat(){return ye.EAN_13}static determineFirstDigit(a,l){for(let u=0;u<10;u++)if(l===this.FIRST_DIGIT_ENCODINGS[u])return a=String.fromCharCode(48+u)+a,a;throw new j}}return C.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],C})();class fw extends ot{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(o,a,l){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let d=o.getSize(),f=a[1];for(let y=0;y<4&&f<d;y++){let w=ot.decodeDigit(o,u,f,ot.L_PATTERNS);l+=String.fromCharCode(48+w);for(let v of u)f+=v}f=ot.findGuardPattern(o,f,!0,ot.MIDDLE_PATTERN,new Int32Array(ot.MIDDLE_PATTERN.length).fill(0))[1];for(let y=0;y<4&&f<d;y++){let w=ot.decodeDigit(o,u,f,ot.L_PATTERNS);l+=String.fromCharCode(48+w);for(let v of u)f+=v}return{rowOffset:f,resultString:l}}getBarcodeFormat(){return ye.EAN_8}}class hw extends ot{constructor(){super(...arguments),this.ean13Reader=new Jc}getBarcodeFormat(){return ye.UPC_A}decode(o,a){return this.maybeReturnResult(this.ean13Reader.decode(o))}decodeRow(o,a,l){return this.maybeReturnResult(this.ean13Reader.decodeRow(o,a,l))}decodeMiddle(o,a,l){return this.ean13Reader.decodeMiddle(o,a,l)}maybeReturnResult(o){let a=o.getText();if(a.charAt(0)==="0"){let l=new Mn(a.substring(1),null,null,o.getResultPoints(),ye.UPC_A);return o.getResultMetadata()!=null&&l.putAllMetadata(o.getResultMetadata()),l}else throw new j}reset(){this.ean13Reader.reset()}}class _r extends ot{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(o,a,l){let u=this.decodeMiddleCounters.map(w=>w);u[0]=0,u[1]=0,u[2]=0,u[3]=0;let d=o.getSize(),f=a[1],p=0;for(let w=0;w<6&&f<d;w++){let v=_r.decodeDigit(o,u,f,_r.L_AND_G_PATTERNS);l+=String.fromCharCode(48+v%10);for(let E of u)f+=E;v>=10&&(p|=1<<5-w)}let y=_r.determineNumSysAndCheckDigit(l,p);return{rowOffset:f,resultString:y}}decodeEnd(o,a){return _r.findGuardPatternWithoutCounters(o,a,!0,_r.MIDDLE_END_PATTERN)}checkChecksum(o){return ot.checkChecksum(_r.convertUPCEtoUPCA(o))}static determineNumSysAndCheckDigit(o,a){for(let l=0;l<=1;l++)for(let u=0;u<10;u++)if(a===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[l][u]){let d=String.fromCharCode(48+l),f=String.fromCharCode(48+u);return d+o+f}throw j.getNotFoundInstance()}getBarcodeFormat(){return ye.UPC_E}static convertUPCEtoUPCA(o){let a=o.slice(1,7).split("").map(d=>d.charCodeAt(0)),l=new ht;l.append(o.charAt(0));let u=a[5];switch(u){case 0:case 1:case 2:l.appendChars(a,0,2),l.append(u),l.append("0000"),l.appendChars(a,2,3);break;case 3:l.appendChars(a,0,3),l.append("00000"),l.appendChars(a,3,2);break;case 4:l.appendChars(a,0,4),l.append("00000"),l.append(a[4]);break;default:l.appendChars(a,0,5),l.append("0000"),l.append(u);break}return o.length>=8&&l.append(o.charAt(7)),l.toString()}}_r.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),_r.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Th extends Ut{constructor(o){super();let a=o==null?null:o.get(me.POSSIBLE_FORMATS),l=[];t(a)?(l.push(new Jc),l.push(new hw),l.push(new fw),l.push(new _r)):(a.indexOf(ye.EAN_13)>-1&&l.push(new Jc),a.indexOf(ye.UPC_A)>-1&&l.push(new hw),a.indexOf(ye.EAN_8)>-1&&l.push(new fw),a.indexOf(ye.UPC_E)>-1&&l.push(new _r)),this.readers=l}decodeRow(o,a,l){for(let u of this.readers)try{let d=u.decodeRow(o,a,l),f=d.getBarcodeFormat()===ye.EAN_13&&d.getText().charAt(0)==="0",p=l==null?null:l.get(me.POSSIBLE_FORMATS),y=p==null||p.includes(ye.UPC_A);if(f&&y){let w=d.getRawBytes(),v=new Mn(d.getText().substring(1),w,w?w.length:null,d.getResultPoints(),ye.UPC_A);return v.putAllMetadata(d.getResultMetadata()),v}return d}catch{}throw new j}reset(){for(let o of this.readers)o.reset()}}let bo=(()=>{class C extends Ut{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(a,l){for(let u=0;u<l.length;u++)if(Ut.patternMatchVariance(a,l[u],C.MAX_INDIVIDUAL_VARIANCE)<C.MAX_AVG_VARIANCE)return u;throw new j}static count(a){return Je.sum(new Int32Array(a))}static increment(a,l){let u=0,d=l[0];for(let f=1;f<a.length;f++)l[f]>d&&(d=l[f],u=f);a[u]++}static decrement(a,l){let u=0,d=l[0];for(let f=1;f<a.length;f++)l[f]<d&&(d=l[f],u=f);a[u]--}static isFinderPattern(a){let l=a[0]+a[1],u=l+a[2]+a[3],d=l/u;if(d>=C.MIN_FINDER_PATTERN_RATIO&&d<=C.MAX_FINDER_PATTERN_RATIO){let f=Number.MAX_SAFE_INTEGER,p=Number.MIN_SAFE_INTEGER;for(let y of a)y>p&&(p=y),y<f&&(f=y);return p<10*f}return!1}}return C.MAX_AVG_VARIANCE=.2,C.MAX_INDIVIDUAL_VARIANCE=.45,C.MIN_FINDER_PATTERN_RATIO=9.5/12,C.MAX_FINDER_PATTERN_RATIO=12.5/14,C})();class hs{constructor(o,a){this.value=o,this.checksumPortion=a}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(o){if(!(o instanceof hs))return!1;let a=o;return this.value===a.value&&this.checksumPortion===a.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class eu{constructor(o,a,l,u,d){this.value=o,this.startEnd=a,this.value=o,this.startEnd=a,this.resultPoints=new Array,this.resultPoints.push(new ce(l,d)),this.resultPoints.push(new ce(u,d))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(o){if(!(o instanceof eu))return!1;let a=o;return this.value===a.value}hashCode(){return this.value}}class Ur{constructor(){}static getRSSvalue(o,a,l){let u=0;for(let y of o)u+=y;let d=0,f=0,p=o.length;for(let y=0;y<p-1;y++){let w;for(w=1,f|=1<<y;w<o[y];w++,f&=~(1<<y)){let v=Ur.combins(u-w-1,p-y-2);if(l&&f===0&&u-w-(p-y-1)>=p-y-1&&(v-=Ur.combins(u-w-(p-y),p-y-2)),p-y-1>1){let E=0;for(let b=u-w-(p-y-2);b>a;b--)E+=Ur.combins(u-w-b-1,p-y-3);v-=E*(p-1-y)}else u-w>a&&v--;d+=v}u-=w}return d}static combins(o,a){let l,u;o-a>a?(u=a,l=o-a):(u=o-a,l=a);let d=1,f=1;for(let p=o;p>l;p--)d*=p,f<=u&&(d/=f,f++);for(;f<=u;)d/=f,f++;return d}}class P2{static buildBitArray(o){let a=o.length*2-1;o[o.length-1].getRightChar()==null&&(a-=1);let l=12*a,u=new le(l),d=0,p=o[0].getRightChar().getValue();for(let y=11;y>=0;--y)p&1<<y&&u.set(d),d++;for(let y=1;y<o.length;++y){let w=o[y],v=w.getLeftChar().getValue();for(let E=11;E>=0;--E)v&1<<E&&u.set(d),d++;if(w.getRightChar()!=null){let E=w.getRightChar().getValue();for(let b=11;b>=0;--b)E&1<<b&&u.set(d),d++}}return u}}class Io{constructor(o,a){a?this.decodedInformation=null:(this.finished=o,this.decodedInformation=a)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class Mh{constructor(o){this.newPosition=o}getNewPosition(){return this.newPosition}}let xr=(()=>{class C extends Mh{constructor(a,l){super(a),this.value=l}getValue(){return this.value}isFNC1(){return this.value===C.FNC1}}return C.FNC1="$",C})();class Do extends Mh{constructor(o,a,l){super(o),l?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=a}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}let ps=(()=>{class C extends Mh{constructor(a,l,u){if(super(a),l<0||l>10||u<0||u>10)throw new z;this.firstDigit=l,this.secondDigit=u}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===C.FNC1}isSecondDigitFNC1(){return this.secondDigit===C.FNC1}isAnyFNC1(){return this.firstDigit===C.FNC1||this.secondDigit===C.FNC1}}return C.FNC1=10,C})();class ie{constructor(){}static parseFieldsInGeneralPurpose(o){if(!o)return null;if(o.length<2)throw new j;let a=o.substring(0,2);for(let d of ie.TWO_DIGIT_DATA_LENGTH)if(d[0]===a)return d[1]===ie.VARIABLE_LENGTH?ie.processVariableAI(2,d[2],o):ie.processFixedAI(2,d[1],o);if(o.length<3)throw new j;let l=o.substring(0,3);for(let d of ie.THREE_DIGIT_DATA_LENGTH)if(d[0]===l)return d[1]===ie.VARIABLE_LENGTH?ie.processVariableAI(3,d[2],o):ie.processFixedAI(3,d[1],o);for(let d of ie.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(d[0]===l)return d[1]===ie.VARIABLE_LENGTH?ie.processVariableAI(4,d[2],o):ie.processFixedAI(4,d[1],o);if(o.length<4)throw new j;let u=o.substring(0,4);for(let d of ie.FOUR_DIGIT_DATA_LENGTH)if(d[0]===u)return d[1]===ie.VARIABLE_LENGTH?ie.processVariableAI(4,d[2],o):ie.processFixedAI(4,d[1],o);throw new j}static processFixedAI(o,a,l){if(l.length<o)throw new j;let u=l.substring(0,o);if(l.length<o+a)throw new j;let d=l.substring(o,o+a),f=l.substring(o+a),p="("+u+")"+d,y=ie.parseFieldsInGeneralPurpose(f);return y==null?p:p+y}static processVariableAI(o,a,l){let u=l.substring(0,o),d;l.length<o+a?d=l.length:d=o+a;let f=l.substring(o,d),p=l.substring(d),y="("+u+")"+f,w=ie.parseFieldsInGeneralPurpose(p);return w==null?y:y+w}}ie.VARIABLE_LENGTH=[],ie.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",ie.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",ie.VARIABLE_LENGTH,20],["22",ie.VARIABLE_LENGTH,29],["30",ie.VARIABLE_LENGTH,8],["37",ie.VARIABLE_LENGTH,8],["90",ie.VARIABLE_LENGTH,30],["91",ie.VARIABLE_LENGTH,30],["92",ie.VARIABLE_LENGTH,30],["93",ie.VARIABLE_LENGTH,30],["94",ie.VARIABLE_LENGTH,30],["95",ie.VARIABLE_LENGTH,30],["96",ie.VARIABLE_LENGTH,30],["97",ie.VARIABLE_LENGTH,3],["98",ie.VARIABLE_LENGTH,30],["99",ie.VARIABLE_LENGTH,30]],ie.THREE_DIGIT_DATA_LENGTH=[["240",ie.VARIABLE_LENGTH,30],["241",ie.VARIABLE_LENGTH,30],["242",ie.VARIABLE_LENGTH,6],["250",ie.VARIABLE_LENGTH,30],["251",ie.VARIABLE_LENGTH,30],["253",ie.VARIABLE_LENGTH,17],["254",ie.VARIABLE_LENGTH,20],["400",ie.VARIABLE_LENGTH,30],["401",ie.VARIABLE_LENGTH,30],["402",17],["403",ie.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",ie.VARIABLE_LENGTH,20],["421",ie.VARIABLE_LENGTH,15],["422",3],["423",ie.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],ie.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",ie.VARIABLE_LENGTH,15],["391",ie.VARIABLE_LENGTH,18],["392",ie.VARIABLE_LENGTH,15],["393",ie.VARIABLE_LENGTH,18],["703",ie.VARIABLE_LENGTH,30]],ie.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",ie.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",ie.VARIABLE_LENGTH,20],["8003",ie.VARIABLE_LENGTH,30],["8004",ie.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",ie.VARIABLE_LENGTH,30],["8008",ie.VARIABLE_LENGTH,12],["8018",18],["8020",ie.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",ie.VARIABLE_LENGTH,70],["8200",ie.VARIABLE_LENGTH,70]];class gs{constructor(o){this.buffer=new ht,this.information=o}decodeAllCodes(o,a){let l=a,u=null;do{let d=this.decodeGeneralPurposeField(l,u),f=ie.parseFieldsInGeneralPurpose(d.getNewString());if(f!=null&&o.append(f),d.isRemaining()?u=""+d.getRemainingValue():u=null,l===d.getNewPosition())break;l=d.getNewPosition()}while(!0);return o.toString()}isStillNumeric(o){if(o+7>this.information.getSize())return o+4<=this.information.getSize();for(let a=o;a<o+3;++a)if(this.information.get(a))return!0;return this.information.get(o+3)}decodeNumeric(o){if(o+7>this.information.getSize()){let d=this.extractNumericValueFromBitArray(o,4);return d===0?new ps(this.information.getSize(),ps.FNC1,ps.FNC1):new ps(this.information.getSize(),d-1,ps.FNC1)}let a=this.extractNumericValueFromBitArray(o,7),l=(a-8)/11,u=(a-8)%11;return new ps(o+7,l,u)}extractNumericValueFromBitArray(o,a){return gs.extractNumericValueFromBitArray(this.information,o,a)}static extractNumericValueFromBitArray(o,a,l){let u=0;for(let d=0;d<l;++d)o.get(a+d)&&(u|=1<<l-d-1);return u}decodeGeneralPurposeField(o,a){this.buffer.setLengthToZero(),a!=null&&this.buffer.append(a),this.current.setPosition(o);let l=this.parseBlocks();return l!=null&&l.isRemaining()?new Do(this.current.getPosition(),this.buffer.toString(),l.getRemainingValue()):new Do(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let o,a;do{let l=this.current.getPosition();if(this.current.isAlpha()?(a=this.parseAlphaBlock(),o=a.isFinished()):this.current.isIsoIec646()?(a=this.parseIsoIec646Block(),o=a.isFinished()):(a=this.parseNumericBlock(),o=a.isFinished()),!(l!==this.current.getPosition())&&!o)break}while(!o);return a.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let o=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(o.getNewPosition()),o.isFirstDigitFNC1()){let a;return o.isSecondDigitFNC1()?a=new Do(this.current.getPosition(),this.buffer.toString()):a=new Do(this.current.getPosition(),this.buffer.toString(),o.getSecondDigit()),new Io(!0,a)}if(this.buffer.append(o.getFirstDigit()),o.isSecondDigitFNC1()){let a=new Do(this.current.getPosition(),this.buffer.toString());return new Io(!0,a)}this.buffer.append(o.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Io(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let o=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(o.getNewPosition()),o.isFNC1()){let a=new Do(this.current.getPosition(),this.buffer.toString());return new Io(!0,a)}this.buffer.append(o.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Io(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let o=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(o.getNewPosition()),o.isFNC1()){let a=new Do(this.current.getPosition(),this.buffer.toString());return new Io(!0,a)}this.buffer.append(o.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Io(!1)}isStillIsoIec646(o){if(o+5>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(o,5);if(a>=5&&a<16)return!0;if(o+7>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(o,7);if(l>=64&&l<116)return!0;if(o+8>this.information.getSize())return!1;let u=this.extractNumericValueFromBitArray(o,8);return u>=232&&u<253}decodeIsoIec646(o){let a=this.extractNumericValueFromBitArray(o,5);if(a===15)return new xr(o+5,xr.FNC1);if(a>=5&&a<15)return new xr(o+5,"0"+(a-5));let l=this.extractNumericValueFromBitArray(o,7);if(l>=64&&l<90)return new xr(o+7,""+(l+1));if(l>=90&&l<116)return new xr(o+7,""+(l+7));let u=this.extractNumericValueFromBitArray(o,8),d;switch(u){case 232:d="!";break;case 233:d='"';break;case 234:d="%";break;case 235:d="&";break;case 236:d="'";break;case 237:d="(";break;case 238:d=")";break;case 239:d="*";break;case 240:d="+";break;case 241:d=",";break;case 242:d="-";break;case 243:d=".";break;case 244:d="/";break;case 245:d=":";break;case 246:d=";";break;case 247:d="<";break;case 248:d="=";break;case 249:d=">";break;case 250:d="?";break;case 251:d="_";break;case 252:d=" ";break;default:throw new z}return new xr(o+8,d)}isStillAlpha(o){if(o+5>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(o,5);if(a>=5&&a<16)return!0;if(o+6>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(o,6);return l>=16&&l<63}decodeAlphanumeric(o){let a=this.extractNumericValueFromBitArray(o,5);if(a===15)return new xr(o+5,xr.FNC1);if(a>=5&&a<15)return new xr(o+5,"0"+(a-5));let l=this.extractNumericValueFromBitArray(o,6);if(l>=32&&l<58)return new xr(o+6,""+(l+33));let u;switch(l){case 58:u="*";break;case 59:u=",";break;case 60:u="-";break;case 61:u=".";break;case 62:u="/";break;default:throw new li("Decoding invalid alphanumeric value: "+l)}return new xr(o+6,u)}isAlphaTo646ToAlphaLatch(o){if(o+1>this.information.getSize())return!1;for(let a=0;a<5&&a+o<this.information.getSize();++a)if(a===2){if(!this.information.get(o+2))return!1}else if(this.information.get(o+a))return!1;return!0}isAlphaOr646ToNumericLatch(o){if(o+3>this.information.getSize())return!1;for(let a=o;a<o+3;++a)if(this.information.get(a))return!1;return!0}isNumericToAlphaNumericLatch(o){if(o+1>this.information.getSize())return!1;for(let a=0;a<4&&a+o<this.information.getSize();++a)if(this.information.get(o+a))return!1;return!0}}class Nh{constructor(o){this.information=o,this.generalDecoder=new gs(o)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}let Er=(()=>{class C extends Nh{constructor(a){super(a)}encodeCompressedGtin(a,l){a.append("(01)");let u=a.length();a.append("9"),this.encodeCompressedGtinWithoutAI(a,l,u)}encodeCompressedGtinWithoutAI(a,l,u){for(let d=0;d<4;++d){let f=this.getGeneralDecoder().extractNumericValueFromBitArray(l+10*d,10);f/100===0&&a.append("0"),f/10===0&&a.append("0"),a.append(f)}C.appendCheckDigit(a,u)}static appendCheckDigit(a,l){let u=0;for(let d=0;d<13;d++){let f=a.charAt(d+l).charCodeAt(0)-48;u+=d&1?f:3*f}u=10-u%10,u===10&&(u=0),a.append(u)}}return C.GTIN_SIZE=40,C})(),k2=(()=>{class C extends Er{constructor(a){super(a)}parseInformation(){let a=new ht;a.append("(01)");let l=a.length(),u=this.getGeneralDecoder().extractNumericValueFromBitArray(C.HEADER_SIZE,4);return a.append(u),this.encodeCompressedGtinWithoutAI(a,C.HEADER_SIZE+4,l),this.getGeneralDecoder().decodeAllCodes(a,C.HEADER_SIZE+44)}}return C.HEADER_SIZE=4,C})(),L2=(()=>{class C extends Nh{constructor(a){super(a)}parseInformation(){let a=new ht;return this.getGeneralDecoder().decodeAllCodes(a,C.HEADER_SIZE)}}return C.HEADER_SIZE=5,C})();class tu extends Er{constructor(o){super(o)}encodeCompressedWeight(o,a,l){let u=this.getGeneralDecoder().extractNumericValueFromBitArray(a,l);this.addWeightCode(o,u);let d=this.checkWeight(u),f=1e5;for(let p=0;p<5;++p)d/f===0&&o.append("0"),f/=10;o.append(d)}}let pw=(()=>{class C extends tu{constructor(a){super(a)}parseInformation(){if(this.getInformation().getSize()!=C.HEADER_SIZE+tu.GTIN_SIZE+C.WEIGHT_SIZE)throw new j;let a=new ht;return this.encodeCompressedGtin(a,C.HEADER_SIZE),this.encodeCompressedWeight(a,C.HEADER_SIZE+tu.GTIN_SIZE,C.WEIGHT_SIZE),a.toString()}}return C.HEADER_SIZE=5,C.WEIGHT_SIZE=15,C})();class F2 extends pw{constructor(o){super(o)}addWeightCode(o,a){o.append("(3103)")}checkWeight(o){return o}}class B2 extends pw{constructor(o){super(o)}addWeightCode(o,a){a<1e4?o.append("(3202)"):o.append("(3203)")}checkWeight(o){return o<1e4?o:o-1e4}}let V2=(()=>{class C extends Er{constructor(a){super(a)}parseInformation(){if(this.getInformation().getSize()<C.HEADER_SIZE+Er.GTIN_SIZE)throw new j;let a=new ht;this.encodeCompressedGtin(a,C.HEADER_SIZE);let l=this.getGeneralDecoder().extractNumericValueFromBitArray(C.HEADER_SIZE+Er.GTIN_SIZE,C.LAST_DIGIT_SIZE);a.append("(392"),a.append(l),a.append(")");let u=this.getGeneralDecoder().decodeGeneralPurposeField(C.HEADER_SIZE+Er.GTIN_SIZE+C.LAST_DIGIT_SIZE,null);return a.append(u.getNewString()),a.toString()}}return C.HEADER_SIZE=8,C.LAST_DIGIT_SIZE=2,C})(),j2=(()=>{class C extends Er{constructor(a){super(a)}parseInformation(){if(this.getInformation().getSize()<C.HEADER_SIZE+Er.GTIN_SIZE)throw new j;let a=new ht;this.encodeCompressedGtin(a,C.HEADER_SIZE);let l=this.getGeneralDecoder().extractNumericValueFromBitArray(C.HEADER_SIZE+Er.GTIN_SIZE,C.LAST_DIGIT_SIZE);a.append("(393"),a.append(l),a.append(")");let u=this.getGeneralDecoder().extractNumericValueFromBitArray(C.HEADER_SIZE+Er.GTIN_SIZE+C.LAST_DIGIT_SIZE,C.FIRST_THREE_DIGITS_SIZE);u/100==0&&a.append("0"),u/10==0&&a.append("0"),a.append(u);let d=this.getGeneralDecoder().decodeGeneralPurposeField(C.HEADER_SIZE+Er.GTIN_SIZE+C.LAST_DIGIT_SIZE+C.FIRST_THREE_DIGITS_SIZE,null);return a.append(d.getNewString()),a.toString()}}return C.HEADER_SIZE=8,C.LAST_DIGIT_SIZE=2,C.FIRST_THREE_DIGITS_SIZE=10,C})(),Ui=(()=>{class C extends tu{constructor(a,l,u){super(a),this.dateCode=u,this.firstAIdigits=l}parseInformation(){if(this.getInformation().getSize()!=C.HEADER_SIZE+C.GTIN_SIZE+C.WEIGHT_SIZE+C.DATE_SIZE)throw new j;let a=new ht;return this.encodeCompressedGtin(a,C.HEADER_SIZE),this.encodeCompressedWeight(a,C.HEADER_SIZE+C.GTIN_SIZE,C.WEIGHT_SIZE),this.encodeCompressedDate(a,C.HEADER_SIZE+C.GTIN_SIZE+C.WEIGHT_SIZE),a.toString()}encodeCompressedDate(a,l){let u=this.getGeneralDecoder().extractNumericValueFromBitArray(l,C.DATE_SIZE);if(u==38400)return;a.append("("),a.append(this.dateCode),a.append(")");let d=u%32;u/=32;let f=u%12+1;u/=12;let p=u;p/10==0&&a.append("0"),a.append(p),f/10==0&&a.append("0"),a.append(f),d/10==0&&a.append("0"),a.append(d)}addWeightCode(a,l){a.append("("),a.append(this.firstAIdigits),a.append(l/1e5),a.append(")")}checkWeight(a){return a%1e5}}return C.HEADER_SIZE=8,C.WEIGHT_SIZE=20,C.DATE_SIZE=16,C})();function gw(C){try{if(C.get(1))return new k2(C);if(!C.get(2))return new L2(C);switch(gs.extractNumericValueFromBitArray(C,1,4)){case 4:return new F2(C);case 5:return new B2(C)}switch(gs.extractNumericValueFromBitArray(C,1,5)){case 12:return new V2(C);case 13:return new j2(C)}switch(gs.extractNumericValueFromBitArray(C,1,7)){case 56:return new Ui(C,"310","11");case 57:return new Ui(C,"320","11");case 58:return new Ui(C,"310","13");case 59:return new Ui(C,"320","13");case 60:return new Ui(C,"310","15");case 61:return new Ui(C,"320","15");case 62:return new Ui(C,"310","17");case 63:return new Ui(C,"320","17")}}catch(o){throw console.log(o),new li("unknown decoder: "+C)}}class Hi{constructor(o,a,l,u){this.leftchar=o,this.rightchar=a,this.finderpattern=l,this.maybeLast=u}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(o,a){return o instanceof Hi?Hi.equalsOrNull(o.leftchar,a.leftchar)&&Hi.equalsOrNull(o.rightchar,a.rightchar)&&Hi.equalsOrNull(o.finderpattern,a.finderpattern):!1}static equalsOrNull(o,a){return o===null?a===null:Hi.equals(o,a)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Rh{constructor(o,a,l){this.pairs=o,this.rowNumber=a,this.wasReversed=l}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(o){return this.checkEqualitity(this,o)}toString(){return"{ "+this.pairs+" }"}equals(o,a){return o instanceof Rh?this.checkEqualitity(o,a)&&o.wasReversed===a.wasReversed:!1}checkEqualitity(o,a){if(!o||!a)return;let l;return o.forEach((u,d)=>{a.forEach(f=>{u.getLeftChar().getValue()===f.getLeftChar().getValue()&&u.getRightChar().getValue()===f.getRightChar().getValue()&&u.getFinderPatter().getValue()===f.getFinderPatter().getValue()&&(l=!0)})}),l}}class H extends bo{constructor(o){super(...arguments),this.pairs=new Array(H.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=o===!0}decodeRow(o,a,l){this.pairs.length=0,this.startFromEven=!1;try{return H.constructResult(this.decodeRow2pairs(o,a))}catch(u){this.verbose&&console.log(u)}return this.pairs.length=0,this.startFromEven=!0,H.constructResult(this.decodeRow2pairs(o,a))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(o,a){let l=!1;for(;!l;)try{this.pairs.push(this.retrieveNextPair(a,this.pairs,o))}catch(d){if(d instanceof j){if(!this.pairs.length)throw new j;l=!0}}if(this.checkChecksum())return this.pairs;let u;if(this.rows.length?u=!0:u=!1,this.storeRow(o,!1),u){let d=this.checkRowsBoolean(!1);if(d!=null||(d=this.checkRowsBoolean(!0),d!=null))return d}throw new j}checkRowsBoolean(o){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,o&&(this.rows=this.rows.reverse());let a=null;try{a=this.checkRows(new Array,0)}catch(l){this.verbose&&console.log(l)}return o&&(this.rows=this.rows.reverse()),a}checkRows(o,a){for(let l=a;l<this.rows.length;l++){let u=this.rows[l];this.pairs.length=0;for(let f of o)this.pairs.push(f.getPairs());if(this.pairs.push(u.getPairs()),!H.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let d=new Array(o);d.push(u);try{return this.checkRows(d,l+1)}catch(f){this.verbose&&console.log(f)}}throw new j}static isValidSequence(o){for(let a of H.FINDER_PATTERN_SEQUENCES){if(o.length>a.length)continue;let l=!0;for(let u=0;u<o.length;u++)if(o[u].getFinderPattern().getValue()!=a[u]){l=!1;break}if(l)return!0}return!1}storeRow(o,a){let l=0,u=!1,d=!1;for(;l<this.rows.length;){let f=this.rows[l];if(f.getRowNumber()>o){d=f.isEquivalent(this.pairs);break}u=f.isEquivalent(this.pairs),l++}d||u||H.isPartialRow(this.pairs,this.rows)||(this.rows.push(l,new Rh(this.pairs,o,a)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(o,a){for(let l of a)if(l.getPairs().length!==o.length){for(let u of l.getPairs())for(let d of o)if(Hi.equals(u,d))break}}static isPartialRow(o,a){for(let l of a){let u=!0;for(let d of o){let f=!1;for(let p of l.getPairs())if(d.equals(p)){f=!0;break}if(!f){u=!1;break}}if(u)return!0}return!1}getRows(){return this.rows}static constructResult(o){let a=P2.buildBitArray(o),u=gw(a).parseInformation(),d=o[0].getFinderPattern().getResultPoints(),f=o[o.length-1].getFinderPattern().getResultPoints(),p=[d[0],d[1],f[0],f[1]];return new Mn(u,null,null,p,ye.RSS_EXPANDED,null)}checkChecksum(){let o=this.pairs.get(0),a=o.getLeftChar(),l=o.getRightChar();if(l==null)return!1;let u=l.getChecksumPortion(),d=2;for(let p=1;p<this.pairs.size();++p){let y=this.pairs.get(p);u+=y.getLeftChar().getChecksumPortion(),d++;let w=y.getRightChar();w!=null&&(u+=w.getChecksumPortion(),d++)}return u%=211,211*(d-4)+u==a.getValue()}static getNextSecondBar(o,a){let l;return o.get(a)?(l=o.getNextUnset(a),l=o.getNextSet(l)):(l=o.getNextSet(a),l=o.getNextUnset(l)),l}retrieveNextPair(o,a,l){let u=a.length%2==0;this.startFromEven&&(u=!u);let d,f=!0,p=-1;do this.findNextPair(o,a,p),d=this.parseFoundFinderPattern(o,l,u),d==null?p=H.getNextSecondBar(o,this.startEnd[0]):f=!1;while(f);let y=this.decodeDataCharacter(o,d,u,!0);if(!this.isEmptyPair(a)&&a[a.length-1].mustBeLast())throw new j;let w;try{w=this.decodeDataCharacter(o,d,u,!1)}catch(v){w=null,this.verbose&&console.log(v)}return new Hi(y,w,d,!0)}isEmptyPair(o){return o.length===0}findNextPair(o,a,l){let u=this.getDecodeFinderCounters();u[0]=0,u[1]=0,u[2]=0,u[3]=0;let d=o.getSize(),f;l>=0?f=l:this.isEmptyPair(a)?f=0:f=a[a.length-1].getFinderPattern().getStartEnd()[1];let p=a.length%2!=0;this.startFromEven&&(p=!p);let y=!1;for(;f<d&&(y=!o.get(f),!!y);)f++;let w=0,v=f;for(let E=f;E<d;E++)if(o.get(E)!=y)u[w]++;else{if(w==3){if(p&&H.reverseCounters(u),H.isFinderPattern(u)){this.startEnd[0]=v,this.startEnd[1]=E;return}p&&H.reverseCounters(u),v+=u[0]+u[1],u[0]=u[2],u[1]=u[3],u[2]=0,u[3]=0,w--}else w++;u[w]=1,y=!y}throw new j}static reverseCounters(o){let a=o.length;for(let l=0;l<a/2;++l){let u=o[l];o[l]=o[a-l-1],o[a-l-1]=u}}parseFoundFinderPattern(o,a,l){let u,d,f;if(l){let w=this.startEnd[0]-1;for(;w>=0&&!o.get(w);)w--;w++,u=this.startEnd[0]-w,d=w,f=this.startEnd[1]}else d=this.startEnd[0],f=o.getNextUnset(this.startEnd[1]+1),u=f-this.startEnd[1];let p=this.getDecodeFinderCounters();A.arraycopy(p,0,p,1,p.length-1),p[0]=u;let y;try{y=this.parseFinderValue(p,H.FINDER_PATTERNS)}catch{return null}return new eu(y,[d,f],d,f,a)}decodeDataCharacter(o,a,l,u){let d=this.getDataCharacterCounters();for(let wt=0;wt<d.length;wt++)d[wt]=0;if(u)H.recordPatternInReverse(o,a.getStartEnd()[0],d);else{H.recordPattern(o,a.getStartEnd()[1],d);for(let wt=0,dn=d.length-1;wt<dn;wt++,dn--){let Qn=d[wt];d[wt]=d[dn],d[dn]=Qn}}let f=17,p=Je.sum(new Int32Array(d))/f,y=(a.getStartEnd()[1]-a.getStartEnd()[0])/15;if(Math.abs(p-y)/y>.3)throw new j;let w=this.getOddCounts(),v=this.getEvenCounts(),E=this.getOddRoundingErrors(),b=this.getEvenRoundingErrors();for(let wt=0;wt<d.length;wt++){let dn=1*d[wt]/p,Qn=dn+.5;if(Qn<1){if(dn<.3)throw new j;Qn=1}else if(Qn>8){if(dn>8.7)throw new j;Qn=8}let Cs=wt/2;wt&1?(v[Cs]=Qn,b[Cs]=dn-Qn):(w[Cs]=Qn,E[Cs]=dn-Qn)}this.adjustOddEvenCounts(f);let S=4*a.getValue()+(l?0:2)+(u?0:1)-1,T=0,M=0;for(let wt=w.length-1;wt>=0;wt--){if(H.isNotA1left(a,l,u)){let dn=H.WEIGHTS[S][2*wt];M+=w[wt]*dn}T+=w[wt]}let O=0;for(let wt=v.length-1;wt>=0;wt--)if(H.isNotA1left(a,l,u)){let dn=H.WEIGHTS[S][2*wt+1];O+=v[wt]*dn}let L=M+O;if(T&1||T>13||T<4)throw new j;let $=(13-T)/2,K=H.SYMBOL_WIDEST[$],V=9-K,ze=Ur.getRSSvalue(w,K,!0),De=Ur.getRSSvalue(v,V,!1),Vn=H.EVEN_TOTAL_SUBSET[$],Ir=H.GSUM[$],jn=ze*Vn+De+Ir;return new hs(jn,L)}static isNotA1left(o,a,l){return!(o.getValue()==0&&a&&l)}adjustOddEvenCounts(o){let a=Je.sum(new Int32Array(this.getOddCounts())),l=Je.sum(new Int32Array(this.getEvenCounts())),u=!1,d=!1;a>13?d=!0:a<4&&(u=!0);let f=!1,p=!1;l>13?p=!0:l<4&&(f=!0);let y=a+l-o,w=(a&1)==1,v=(l&1)==0;if(y==1)if(w){if(v)throw new j;d=!0}else{if(!v)throw new j;p=!0}else if(y==-1)if(w){if(v)throw new j;u=!0}else{if(!v)throw new j;f=!0}else if(y==0){if(w){if(!v)throw new j;a<l?(u=!0,p=!0):(d=!0,f=!0)}else if(v)throw new j}else throw new j;if(u){if(d)throw new j;H.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(d&&H.decrement(this.getOddCounts(),this.getOddRoundingErrors()),f){if(p)throw new j;H.increment(this.getEvenCounts(),this.getOddRoundingErrors())}p&&H.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}H.SYMBOL_WIDEST=[7,5,4,3,1],H.EVEN_TOTAL_SUBSET=[4,20,52,104,204],H.GSUM=[0,348,1388,2948,3988],H.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],H.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],H.FINDER_PAT_A=0,H.FINDER_PAT_B=1,H.FINDER_PAT_C=2,H.FINDER_PAT_D=3,H.FINDER_PAT_E=4,H.FINDER_PAT_F=5,H.FINDER_PATTERN_SEQUENCES=[[H.FINDER_PAT_A,H.FINDER_PAT_A],[H.FINDER_PAT_A,H.FINDER_PAT_B,H.FINDER_PAT_B],[H.FINDER_PAT_A,H.FINDER_PAT_C,H.FINDER_PAT_B,H.FINDER_PAT_D],[H.FINDER_PAT_A,H.FINDER_PAT_E,H.FINDER_PAT_B,H.FINDER_PAT_D,H.FINDER_PAT_C],[H.FINDER_PAT_A,H.FINDER_PAT_E,H.FINDER_PAT_B,H.FINDER_PAT_D,H.FINDER_PAT_D,H.FINDER_PAT_F],[H.FINDER_PAT_A,H.FINDER_PAT_E,H.FINDER_PAT_B,H.FINDER_PAT_D,H.FINDER_PAT_E,H.FINDER_PAT_F,H.FINDER_PAT_F],[H.FINDER_PAT_A,H.FINDER_PAT_A,H.FINDER_PAT_B,H.FINDER_PAT_B,H.FINDER_PAT_C,H.FINDER_PAT_C,H.FINDER_PAT_D,H.FINDER_PAT_D],[H.FINDER_PAT_A,H.FINDER_PAT_A,H.FINDER_PAT_B,H.FINDER_PAT_B,H.FINDER_PAT_C,H.FINDER_PAT_C,H.FINDER_PAT_D,H.FINDER_PAT_E,H.FINDER_PAT_E],[H.FINDER_PAT_A,H.FINDER_PAT_A,H.FINDER_PAT_B,H.FINDER_PAT_B,H.FINDER_PAT_C,H.FINDER_PAT_C,H.FINDER_PAT_D,H.FINDER_PAT_E,H.FINDER_PAT_F,H.FINDER_PAT_F],[H.FINDER_PAT_A,H.FINDER_PAT_A,H.FINDER_PAT_B,H.FINDER_PAT_B,H.FINDER_PAT_C,H.FINDER_PAT_D,H.FINDER_PAT_D,H.FINDER_PAT_E,H.FINDER_PAT_E,H.FINDER_PAT_F,H.FINDER_PAT_F]],H.MAX_PAIRS=11;class U2 extends hs{constructor(o,a,l){super(o,a),this.count=0,this.finderPattern=l}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Ot extends bo{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(o,a,l){let u=this.decodePair(a,!1,o,l);Ot.addOrTally(this.possibleLeftPairs,u),a.reverse();let d=this.decodePair(a,!0,o,l);Ot.addOrTally(this.possibleRightPairs,d),a.reverse();for(let f of this.possibleLeftPairs)if(f.getCount()>1){for(let p of this.possibleRightPairs)if(p.getCount()>1&&Ot.checkChecksum(f,p))return Ot.constructResult(f,p)}throw new j}static addOrTally(o,a){if(a==null)return;let l=!1;for(let u of o)if(u.getValue()===a.getValue()){u.incrementCount(),l=!0;break}l||o.push(a)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(o,a){let l=4537077*o.getValue()+a.getValue(),u=new String(l).toString(),d=new ht;for(let w=13-u.length;w>0;w--)d.append("0");d.append(u);let f=0;for(let w=0;w<13;w++){let v=d.charAt(w).charCodeAt(0)-48;f+=w&1?v:3*v}f=10-f%10,f===10&&(f=0),d.append(f.toString());let p=o.getFinderPattern().getResultPoints(),y=a.getFinderPattern().getResultPoints();return new Mn(d.toString(),null,0,[p[0],p[1],y[0],y[1]],ye.RSS_14,new Date().getTime())}static checkChecksum(o,a){let l=(o.getChecksumPortion()+16*a.getChecksumPortion())%79,u=9*o.getFinderPattern().getValue()+a.getFinderPattern().getValue();return u>72&&u--,u>8&&u--,l===u}decodePair(o,a,l,u){try{let d=this.findFinderPattern(o,a),f=this.parseFoundFinderPattern(o,l,a,d),p=u==null?null:u.get(me.NEED_RESULT_POINT_CALLBACK);if(p!=null){let v=(d[0]+d[1])/2;a&&(v=o.getSize()-1-v),p.foundPossibleResultPoint(new ce(v,l))}let y=this.decodeDataCharacter(o,f,!0),w=this.decodeDataCharacter(o,f,!1);return new U2(1597*y.getValue()+w.getValue(),y.getChecksumPortion()+4*w.getChecksumPortion(),f)}catch{return null}}decodeDataCharacter(o,a,l){let u=this.getDataCharacterCounters();for(let O=0;O<u.length;O++)u[O]=0;if(l)Ut.recordPatternInReverse(o,a.getStartEnd()[0],u);else{Ut.recordPattern(o,a.getStartEnd()[1]+1,u);for(let O=0,L=u.length-1;O<L;O++,L--){let $=u[O];u[O]=u[L],u[L]=$}}let d=l?16:15,f=Je.sum(new Int32Array(u))/d,p=this.getOddCounts(),y=this.getEvenCounts(),w=this.getOddRoundingErrors(),v=this.getEvenRoundingErrors();for(let O=0;O<u.length;O++){let L=u[O]/f,$=Math.floor(L+.5);$<1?$=1:$>8&&($=8);let K=Math.floor(O/2);O&1?(y[K]=$,v[K]=L-$):(p[K]=$,w[K]=L-$)}this.adjustOddEvenCounts(l,d);let E=0,b=0;for(let O=p.length-1;O>=0;O--)b*=9,b+=p[O],E+=p[O];let S=0,T=0;for(let O=y.length-1;O>=0;O--)S*=9,S+=y[O],T+=y[O];let M=b+3*S;if(l){if(E&1||E>12||E<4)throw new j;let O=(12-E)/2,L=Ot.OUTSIDE_ODD_WIDEST[O],$=9-L,K=Ur.getRSSvalue(p,L,!1),V=Ur.getRSSvalue(y,$,!0),ze=Ot.OUTSIDE_EVEN_TOTAL_SUBSET[O],De=Ot.OUTSIDE_GSUM[O];return new hs(K*ze+V+De,M)}else{if(T&1||T>10||T<4)throw new j;let O=(10-T)/2,L=Ot.INSIDE_ODD_WIDEST[O],$=9-L,K=Ur.getRSSvalue(p,L,!0),V=Ur.getRSSvalue(y,$,!1),ze=Ot.INSIDE_ODD_TOTAL_SUBSET[O],De=Ot.INSIDE_GSUM[O];return new hs(V*ze+K+De,M)}}findFinderPattern(o,a){let l=this.getDecodeFinderCounters();l[0]=0,l[1]=0,l[2]=0,l[3]=0;let u=o.getSize(),d=!1,f=0;for(;f<u&&(d=!o.get(f),a!==d);)f++;let p=0,y=f;for(let w=f;w<u;w++)if(o.get(w)!==d)l[p]++;else{if(p===3){if(bo.isFinderPattern(l))return[y,w];y+=l[0]+l[1],l[0]=l[2],l[1]=l[3],l[2]=0,l[3]=0,p--}else p++;l[p]=1,d=!d}throw new j}parseFoundFinderPattern(o,a,l,u){let d=o.get(u[0]),f=u[0]-1;for(;f>=0&&d!==o.get(f);)f--;f++;let p=u[0]-f,y=this.getDecodeFinderCounters(),w=new Int32Array(y.length);A.arraycopy(y,0,w,1,y.length-1),w[0]=p;let v=this.parseFinderValue(w,Ot.FINDER_PATTERNS),E=f,b=u[1];return l&&(E=o.getSize()-1-E,b=o.getSize()-1-b),new eu(v,[f,u[1]],E,b,a)}adjustOddEvenCounts(o,a){let l=Je.sum(new Int32Array(this.getOddCounts())),u=Je.sum(new Int32Array(this.getEvenCounts())),d=!1,f=!1,p=!1,y=!1;o?(l>12?f=!0:l<4&&(d=!0),u>12?y=!0:u<4&&(p=!0)):(l>11?f=!0:l<5&&(d=!0),u>10?y=!0:u<4&&(p=!0));let w=l+u-a,v=(l&1)===(o?1:0),E=(u&1)===1;if(w===1)if(v){if(E)throw new j;f=!0}else{if(!E)throw new j;y=!0}else if(w===-1)if(v){if(E)throw new j;d=!0}else{if(!E)throw new j;p=!0}else if(w===0){if(v){if(!E)throw new j;l<u?(d=!0,y=!0):(f=!0,p=!0)}else if(E)throw new j}else throw new j;if(d){if(f)throw new j;bo.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(f&&bo.decrement(this.getOddCounts(),this.getOddRoundingErrors()),p){if(y)throw new j;bo.increment(this.getEvenCounts(),this.getOddRoundingErrors())}y&&bo.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Ot.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Ot.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Ot.OUTSIDE_GSUM=[0,161,961,2015,2715],Ot.INSIDE_GSUM=[0,336,1036,1516],Ot.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Ot.INSIDE_ODD_WIDEST=[2,4,6,8],Ot.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class ms extends Ut{constructor(o,a){super(),this.readers=[],this.verbose=a===!0;let l=o?o.get(me.POSSIBLE_FORMATS):null,u=o&&o.get(me.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;l?((l.includes(ye.EAN_13)||l.includes(ye.UPC_A)||l.includes(ye.EAN_8)||l.includes(ye.UPC_E))&&this.readers.push(new Th(o)),l.includes(ye.CODE_39)&&this.readers.push(new Sh(u)),l.includes(ye.CODE_128)&&this.readers.push(new Z),l.includes(ye.ITF)&&this.readers.push(new mt),l.includes(ye.RSS_14)&&this.readers.push(new Ot),l.includes(ye.RSS_EXPANDED)&&this.readers.push(new H(this.verbose))):(this.readers.push(new Th(o)),this.readers.push(new Sh),this.readers.push(new Th(o)),this.readers.push(new Z),this.readers.push(new mt),this.readers.push(new Ot),this.readers.push(new H(this.verbose)))}decodeRow(o,a,l){for(let u=0;u<this.readers.length;u++)try{return this.readers[u].decodeRow(o,a,l)}catch{}throw new j}reset(){this.readers.forEach(o=>o.reset())}}class H2 extends Eo{constructor(o=500,a){super(new ms(a),o,a)}}class at{constructor(o,a,l){this.ecCodewords=o,this.ecBlocks=[a],l&&this.ecBlocks.push(l)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class st{constructor(o,a){this.count=o,this.dataCodewords=a}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Ze{constructor(o,a,l,u,d,f){this.versionNumber=o,this.symbolSizeRows=a,this.symbolSizeColumns=l,this.dataRegionSizeRows=u,this.dataRegionSizeColumns=d,this.ecBlocks=f;let p=0,y=f.getECCodewords(),w=f.getECBlocks();for(let v of w)p+=v.getCount()*(v.getDataCodewords()+y);this.totalCodewords=p}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(o,a){if(o&1||a&1)throw new z;for(let l of Ze.VERSIONS)if(l.symbolSizeRows===o&&l.symbolSizeColumns===a)return l;throw new z}toString(){return""+this.versionNumber}static buildVersions(){return[new Ze(1,10,10,8,8,new at(5,new st(1,3))),new Ze(2,12,12,10,10,new at(7,new st(1,5))),new Ze(3,14,14,12,12,new at(10,new st(1,8))),new Ze(4,16,16,14,14,new at(12,new st(1,12))),new Ze(5,18,18,16,16,new at(14,new st(1,18))),new Ze(6,20,20,18,18,new at(18,new st(1,22))),new Ze(7,22,22,20,20,new at(20,new st(1,30))),new Ze(8,24,24,22,22,new at(24,new st(1,36))),new Ze(9,26,26,24,24,new at(28,new st(1,44))),new Ze(10,32,32,14,14,new at(36,new st(1,62))),new Ze(11,36,36,16,16,new at(42,new st(1,86))),new Ze(12,40,40,18,18,new at(48,new st(1,114))),new Ze(13,44,44,20,20,new at(56,new st(1,144))),new Ze(14,48,48,22,22,new at(68,new st(1,174))),new Ze(15,52,52,24,24,new at(42,new st(2,102))),new Ze(16,64,64,14,14,new at(56,new st(2,140))),new Ze(17,72,72,16,16,new at(36,new st(4,92))),new Ze(18,80,80,18,18,new at(48,new st(4,114))),new Ze(19,88,88,20,20,new at(56,new st(4,144))),new Ze(20,96,96,22,22,new at(68,new st(4,174))),new Ze(21,104,104,24,24,new at(56,new st(6,136))),new Ze(22,120,120,18,18,new at(68,new st(6,175))),new Ze(23,132,132,20,20,new at(62,new st(8,163))),new Ze(24,144,144,22,22,new at(62,new st(8,156),new st(2,155))),new Ze(25,8,18,6,16,new at(7,new st(1,5))),new Ze(26,8,32,6,14,new at(11,new st(1,10))),new Ze(27,12,26,10,24,new at(14,new st(1,16))),new Ze(28,12,36,10,16,new at(18,new st(1,22))),new Ze(29,16,36,14,16,new at(24,new st(1,32))),new Ze(30,16,48,14,22,new at(28,new st(1,49)))]}}Ze.VERSIONS=Ze.buildVersions();class Oh{constructor(o){let a=o.getHeight();if(a<8||a>144||a&1)throw new z;this.version=Oh.readVersion(o),this.mappingBitMatrix=this.extractDataRegion(o),this.readMappingMatrix=new en(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(o){let a=o.getHeight(),l=o.getWidth();return Ze.getVersionForDimensions(a,l)}readCodewords(){let o=new Int8Array(this.version.getTotalCodewords()),a=0,l=4,u=0,d=this.mappingBitMatrix.getHeight(),f=this.mappingBitMatrix.getWidth(),p=!1,y=!1,w=!1,v=!1;do if(l===d&&u===0&&!p)o[a++]=this.readCorner1(d,f)&255,l-=2,u+=2,p=!0;else if(l===d-2&&u===0&&f&3&&!y)o[a++]=this.readCorner2(d,f)&255,l-=2,u+=2,y=!0;else if(l===d+4&&u===2&&!(f&7)&&!w)o[a++]=this.readCorner3(d,f)&255,l-=2,u+=2,w=!0;else if(l===d-2&&u===0&&(f&7)===4&&!v)o[a++]=this.readCorner4(d,f)&255,l-=2,u+=2,v=!0;else{do l<d&&u>=0&&!this.readMappingMatrix.get(u,l)&&(o[a++]=this.readUtah(l,u,d,f)&255),l-=2,u+=2;while(l>=0&&u<f);l+=1,u+=3;do l>=0&&u<f&&!this.readMappingMatrix.get(u,l)&&(o[a++]=this.readUtah(l,u,d,f)&255),l+=2,u-=2;while(l<d&&u>=0);l+=3,u+=1}while(l<d||u<f);if(a!==this.version.getTotalCodewords())throw new z;return o}readModule(o,a,l,u){return o<0&&(o+=l,a+=4-(l+4&7)),a<0&&(a+=u,o+=4-(u+4&7)),this.readMappingMatrix.set(a,o),this.mappingBitMatrix.get(a,o)}readUtah(o,a,l,u){let d=0;return this.readModule(o-2,a-2,l,u)&&(d|=1),d<<=1,this.readModule(o-2,a-1,l,u)&&(d|=1),d<<=1,this.readModule(o-1,a-2,l,u)&&(d|=1),d<<=1,this.readModule(o-1,a-1,l,u)&&(d|=1),d<<=1,this.readModule(o-1,a,l,u)&&(d|=1),d<<=1,this.readModule(o,a-2,l,u)&&(d|=1),d<<=1,this.readModule(o,a-1,l,u)&&(d|=1),d<<=1,this.readModule(o,a,l,u)&&(d|=1),d}readCorner1(o,a){let l=0;return this.readModule(o-1,0,o,a)&&(l|=1),l<<=1,this.readModule(o-1,1,o,a)&&(l|=1),l<<=1,this.readModule(o-1,2,o,a)&&(l|=1),l<<=1,this.readModule(0,a-2,o,a)&&(l|=1),l<<=1,this.readModule(0,a-1,o,a)&&(l|=1),l<<=1,this.readModule(1,a-1,o,a)&&(l|=1),l<<=1,this.readModule(2,a-1,o,a)&&(l|=1),l<<=1,this.readModule(3,a-1,o,a)&&(l|=1),l}readCorner2(o,a){let l=0;return this.readModule(o-3,0,o,a)&&(l|=1),l<<=1,this.readModule(o-2,0,o,a)&&(l|=1),l<<=1,this.readModule(o-1,0,o,a)&&(l|=1),l<<=1,this.readModule(0,a-4,o,a)&&(l|=1),l<<=1,this.readModule(0,a-3,o,a)&&(l|=1),l<<=1,this.readModule(0,a-2,o,a)&&(l|=1),l<<=1,this.readModule(0,a-1,o,a)&&(l|=1),l<<=1,this.readModule(1,a-1,o,a)&&(l|=1),l}readCorner3(o,a){let l=0;return this.readModule(o-1,0,o,a)&&(l|=1),l<<=1,this.readModule(o-1,a-1,o,a)&&(l|=1),l<<=1,this.readModule(0,a-3,o,a)&&(l|=1),l<<=1,this.readModule(0,a-2,o,a)&&(l|=1),l<<=1,this.readModule(0,a-1,o,a)&&(l|=1),l<<=1,this.readModule(1,a-3,o,a)&&(l|=1),l<<=1,this.readModule(1,a-2,o,a)&&(l|=1),l<<=1,this.readModule(1,a-1,o,a)&&(l|=1),l}readCorner4(o,a){let l=0;return this.readModule(o-3,0,o,a)&&(l|=1),l<<=1,this.readModule(o-2,0,o,a)&&(l|=1),l<<=1,this.readModule(o-1,0,o,a)&&(l|=1),l<<=1,this.readModule(0,a-2,o,a)&&(l|=1),l<<=1,this.readModule(0,a-1,o,a)&&(l|=1),l<<=1,this.readModule(1,a-1,o,a)&&(l|=1),l<<=1,this.readModule(2,a-1,o,a)&&(l|=1),l<<=1,this.readModule(3,a-1,o,a)&&(l|=1),l}extractDataRegion(o){let a=this.version.getSymbolSizeRows(),l=this.version.getSymbolSizeColumns();if(o.getHeight()!==a)throw new m("Dimension of bitMatrix must match the version size");let u=this.version.getDataRegionSizeRows(),d=this.version.getDataRegionSizeColumns(),f=a/u|0,p=l/d|0,y=f*u,w=p*d,v=new en(w,y);for(let E=0;E<f;++E){let b=E*u;for(let S=0;S<p;++S){let T=S*d;for(let M=0;M<u;++M){let O=E*(u+2)+1+M,L=b+M;for(let $=0;$<d;++$){let K=S*(d+2)+1+$;if(o.get(K,O)){let V=T+$;v.set(V,L)}}}}}return v}}class Ph{constructor(o,a){this.numDataCodewords=o,this.codewords=a}static getDataBlocks(o,a){let l=a.getECBlocks(),u=0,d=l.getECBlocks();for(let M of d)u+=M.getCount();let f=new Array(u),p=0;for(let M of d)for(let O=0;O<M.getCount();O++){let L=M.getDataCodewords(),$=l.getECCodewords()+L;f[p++]=new Ph(L,new Uint8Array($))}let w=f[0].codewords.length-l.getECCodewords(),v=w-1,E=0;for(let M=0;M<v;M++)for(let O=0;O<p;O++)f[O].codewords[M]=o[E++];let b=a.getVersionNumber()===24,S=b?8:p;for(let M=0;M<S;M++)f[M].codewords[w-1]=o[E++];let T=f[0].codewords.length;for(let M=w;M<T;M++)for(let O=0;O<p;O++){let L=b?(O+8)%p:O,$=b&&L>7?M-1:M;f[L].codewords[$]=o[E++]}if(E!==o.length)throw new m;return f}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class kh{constructor(o){this.bytes=o,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(o){if(o<1||o>32||o>this.available())throw new m(""+o);let a=0,l=this.bitOffset,u=this.byteOffset,d=this.bytes;if(l>0){let f=8-l,p=o<f?o:f,y=f-p,w=255>>8-p<<y;a=(d[u]&w)>>y,o-=p,l+=p,l===8&&(l=0,u++)}if(o>0){for(;o>=8;)a=a<<8|d[u]&255,u++,o-=8;if(o>0){let f=8-o,p=255>>f<<f;a=a<<o|(d[u]&p)>>f,l+=o}}return this.bitOffset=l,this.byteOffset=u,a}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var rn=function(C){return C[C.PAD_ENCODE=0]="PAD_ENCODE",C[C.ASCII_ENCODE=1]="ASCII_ENCODE",C[C.C40_ENCODE=2]="C40_ENCODE",C[C.TEXT_ENCODE=3]="TEXT_ENCODE",C[C.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",C[C.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",C[C.BASE256_ENCODE=6]="BASE256_ENCODE",C}(rn||{});class zi{static decode(o){let a=new kh(o),l=new ht,u=new ht,d=new Array,f=rn.ASCII_ENCODE;do if(f===rn.ASCII_ENCODE)f=this.decodeAsciiSegment(a,l,u);else{switch(f){case rn.C40_ENCODE:this.decodeC40Segment(a,l);break;case rn.TEXT_ENCODE:this.decodeTextSegment(a,l);break;case rn.ANSIX12_ENCODE:this.decodeAnsiX12Segment(a,l);break;case rn.EDIFACT_ENCODE:this.decodeEdifactSegment(a,l);break;case rn.BASE256_ENCODE:this.decodeBase256Segment(a,l,d);break;default:throw new z}f=rn.ASCII_ENCODE}while(f!==rn.PAD_ENCODE&&a.available()>0);return u.length()>0&&l.append(u.toString()),new Wa(o,l.toString(),d.length===0?null:d,null)}static decodeAsciiSegment(o,a,l){let u=!1;do{let d=o.readBits(8);if(d===0)throw new z;if(d<=128)return u&&(d+=128),a.append(String.fromCharCode(d-1)),rn.ASCII_ENCODE;if(d===129)return rn.PAD_ENCODE;if(d<=229){let f=d-130;f<10&&a.append("0"),a.append(""+f)}else switch(d){case 230:return rn.C40_ENCODE;case 231:return rn.BASE256_ENCODE;case 232:a.append("");break;case 233:case 234:break;case 235:u=!0;break;case 236:a.append("[)>05"),l.insert(0,"");break;case 237:a.append("[)>06"),l.insert(0,"");break;case 238:return rn.ANSIX12_ENCODE;case 239:return rn.TEXT_ENCODE;case 240:return rn.EDIFACT_ENCODE;case 241:break;default:if(d!==254||o.available()!==0)throw new z;break}}while(o.available()>0);return rn.ASCII_ENCODE}static decodeC40Segment(o,a){let l=!1,u=[],d=0;do{if(o.available()===8)return;let f=o.readBits(8);if(f===254)return;this.parseTwoBytes(f,o.readBits(8),u);for(let p=0;p<3;p++){let y=u[p];switch(d){case 0:if(y<3)d=y+1;else if(y<this.C40_BASIC_SET_CHARS.length){let w=this.C40_BASIC_SET_CHARS[y];l?(a.append(String.fromCharCode(w.charCodeAt(0)+128)),l=!1):a.append(w)}else throw new z;break;case 1:l?(a.append(String.fromCharCode(y+128)),l=!1):a.append(String.fromCharCode(y)),d=0;break;case 2:if(y<this.C40_SHIFT2_SET_CHARS.length){let w=this.C40_SHIFT2_SET_CHARS[y];l?(a.append(String.fromCharCode(w.charCodeAt(0)+128)),l=!1):a.append(w)}else switch(y){case 27:a.append("");break;case 30:l=!0;break;default:throw new z}d=0;break;case 3:l?(a.append(String.fromCharCode(y+224)),l=!1):a.append(String.fromCharCode(y+96)),d=0;break;default:throw new z}}}while(o.available()>0)}static decodeTextSegment(o,a){let l=!1,u=[],d=0;do{if(o.available()===8)return;let f=o.readBits(8);if(f===254)return;this.parseTwoBytes(f,o.readBits(8),u);for(let p=0;p<3;p++){let y=u[p];switch(d){case 0:if(y<3)d=y+1;else if(y<this.TEXT_BASIC_SET_CHARS.length){let w=this.TEXT_BASIC_SET_CHARS[y];l?(a.append(String.fromCharCode(w.charCodeAt(0)+128)),l=!1):a.append(w)}else throw new z;break;case 1:l?(a.append(String.fromCharCode(y+128)),l=!1):a.append(String.fromCharCode(y)),d=0;break;case 2:if(y<this.TEXT_SHIFT2_SET_CHARS.length){let w=this.TEXT_SHIFT2_SET_CHARS[y];l?(a.append(String.fromCharCode(w.charCodeAt(0)+128)),l=!1):a.append(w)}else switch(y){case 27:a.append("");break;case 30:l=!0;break;default:throw new z}d=0;break;case 3:if(y<this.TEXT_SHIFT3_SET_CHARS.length){let w=this.TEXT_SHIFT3_SET_CHARS[y];l?(a.append(String.fromCharCode(w.charCodeAt(0)+128)),l=!1):a.append(w),d=0}else throw new z;break;default:throw new z}}}while(o.available()>0)}static decodeAnsiX12Segment(o,a){let l=[];do{if(o.available()===8)return;let u=o.readBits(8);if(u===254)return;this.parseTwoBytes(u,o.readBits(8),l);for(let d=0;d<3;d++){let f=l[d];switch(f){case 0:a.append("\r");break;case 1:a.append("*");break;case 2:a.append(">");break;case 3:a.append(" ");break;default:if(f<14)a.append(String.fromCharCode(f+44));else if(f<40)a.append(String.fromCharCode(f+51));else throw new z;break}}}while(o.available()>0)}static parseTwoBytes(o,a,l){let u=(o<<8)+a-1,d=Math.floor(u/1600);l[0]=d,u-=d*1600,d=Math.floor(u/40),l[1]=d,l[2]=u-d*40}static decodeEdifactSegment(o,a){do{if(o.available()<=16)return;for(let l=0;l<4;l++){let u=o.readBits(6);if(u===31){let d=8-o.getBitOffset();d!==8&&o.readBits(d);return}u&32||(u|=64),a.append(String.fromCharCode(u))}}while(o.available()>0)}static decodeBase256Segment(o,a,l){let u=1+o.getByteOffset(),d=this.unrandomize255State(o.readBits(8),u++),f;if(d===0?f=o.available()/8|0:d<250?f=d:f=250*(d-249)+this.unrandomize255State(o.readBits(8),u++),f<0)throw new z;let p=new Uint8Array(f);for(let y=0;y<f;y++){if(o.available()<8)throw new z;p[y]=this.unrandomize255State(o.readBits(8),u++)}l.push(p);try{a.append(Cn.decode(p,ve.ISO88591))}catch(y){throw new li("Platform does not support required encoding: "+y.message)}}static unrandomize255State(o,a){let l=149*a%255+1,u=o-l;return u>=0?u:u+256}}zi.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],zi.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],zi.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],zi.TEXT_SHIFT2_SET_CHARS=zi.C40_SHIFT2_SET_CHARS,zi.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~","\x7F"];class z2{constructor(){this.rsDecoder=new qa(it.DATA_MATRIX_FIELD_256)}decode(o){let a=new Oh(o),l=a.getVersion(),u=a.readCodewords(),d=Ph.getDataBlocks(u,l),f=0;for(let w of d)f+=w.getNumDataCodewords();let p=new Uint8Array(f),y=d.length;for(let w=0;w<y;w++){let v=d[w],E=v.getCodewords(),b=v.getNumDataCodewords();this.correctErrors(E,b);for(let S=0;S<b;S++)p[S*y+w]=E[S]}return zi.decode(p)}correctErrors(o,a){let l=new Int32Array(o);try{this.rsDecoder.decode(l,o.length-a)}catch{throw new x}for(let u=0;u<a;u++)o[u]=l[u]}}class Vt{constructor(o){this.image=o,this.rectangleDetector=new Xc(this.image)}detect(){let o=this.rectangleDetector.detect(),a=this.detectSolid1(o);if(a=this.detectSolid2(a),a[3]=this.correctTopRight(a),!a[3])throw new j;a=this.shiftToModuleCenter(a);let l=a[0],u=a[1],d=a[2],f=a[3],p=this.transitionsBetween(l,f)+1,y=this.transitionsBetween(d,f)+1;(p&1)===1&&(p+=1),(y&1)===1&&(y+=1),4*p<7*y&&4*y<7*p&&(p=y=Math.max(p,y));let w=Vt.sampleGrid(this.image,l,u,d,f,p,y);return new Qc(w,[l,u,d,f])}static shiftPoint(o,a,l){let u=(a.getX()-o.getX())/(l+1),d=(a.getY()-o.getY())/(l+1);return new ce(o.getX()+u,o.getY()+d)}static moveAway(o,a,l){let u=o.getX(),d=o.getY();return u<a?u-=1:u+=1,d<l?d-=1:d+=1,new ce(u,d)}detectSolid1(o){let a=o[0],l=o[1],u=o[3],d=o[2],f=this.transitionsBetween(a,l),p=this.transitionsBetween(l,u),y=this.transitionsBetween(u,d),w=this.transitionsBetween(d,a),v=f,E=[d,a,l,u];return v>p&&(v=p,E[0]=a,E[1]=l,E[2]=u,E[3]=d),v>y&&(v=y,E[0]=l,E[1]=u,E[2]=d,E[3]=a),v>w&&(E[0]=u,E[1]=d,E[2]=a,E[3]=l),E}detectSolid2(o){let a=o[0],l=o[1],u=o[2],d=o[3],f=this.transitionsBetween(a,d),p=Vt.shiftPoint(l,u,(f+1)*4),y=Vt.shiftPoint(u,l,(f+1)*4),w=this.transitionsBetween(p,a),v=this.transitionsBetween(y,d);return w<v?(o[0]=a,o[1]=l,o[2]=u,o[3]=d):(o[0]=l,o[1]=u,o[2]=d,o[3]=a),o}correctTopRight(o){let a=o[0],l=o[1],u=o[2],d=o[3],f=this.transitionsBetween(a,d),p=this.transitionsBetween(l,d),y=Vt.shiftPoint(a,l,(p+1)*4),w=Vt.shiftPoint(u,l,(f+1)*4);f=this.transitionsBetween(y,d),p=this.transitionsBetween(w,d);let v=new ce(d.getX()+(u.getX()-l.getX())/(f+1),d.getY()+(u.getY()-l.getY())/(f+1)),E=new ce(d.getX()+(a.getX()-l.getX())/(p+1),d.getY()+(a.getY()-l.getY())/(p+1));if(!this.isValid(v))return this.isValid(E)?E:null;if(!this.isValid(E))return v;let b=this.transitionsBetween(y,v)+this.transitionsBetween(w,v),S=this.transitionsBetween(y,E)+this.transitionsBetween(w,E);return b>S?v:E}shiftToModuleCenter(o){let a=o[0],l=o[1],u=o[2],d=o[3],f=this.transitionsBetween(a,d)+1,p=this.transitionsBetween(u,d)+1,y=Vt.shiftPoint(a,l,p*4),w=Vt.shiftPoint(u,l,f*4);f=this.transitionsBetween(y,d)+1,p=this.transitionsBetween(w,d)+1,(f&1)===1&&(f+=1),(p&1)===1&&(p+=1);let v=(a.getX()+l.getX()+u.getX()+d.getX())/4,E=(a.getY()+l.getY()+u.getY()+d.getY())/4;a=Vt.moveAway(a,v,E),l=Vt.moveAway(l,v,E),u=Vt.moveAway(u,v,E),d=Vt.moveAway(d,v,E);let b,S;return y=Vt.shiftPoint(a,l,p*4),y=Vt.shiftPoint(y,d,f*4),b=Vt.shiftPoint(l,a,p*4),b=Vt.shiftPoint(b,u,f*4),w=Vt.shiftPoint(u,d,p*4),w=Vt.shiftPoint(w,l,f*4),S=Vt.shiftPoint(d,u,p*4),S=Vt.shiftPoint(S,a,f*4),[y,b,w,S]}isValid(o){return o.getX()>=0&&o.getX()<this.image.getWidth()&&o.getY()>0&&o.getY()<this.image.getHeight()}static sampleGrid(o,a,l,u,d,f,p){return ji.getInstance().sampleGrid(o,f,p,.5,.5,f-.5,.5,f-.5,p-.5,.5,p-.5,a.getX(),a.getY(),d.getX(),d.getY(),u.getX(),u.getY(),l.getX(),l.getY())}transitionsBetween(o,a){let l=Math.trunc(o.getX()),u=Math.trunc(o.getY()),d=Math.trunc(a.getX()),f=Math.trunc(a.getY()),p=Math.abs(f-u)>Math.abs(d-l);if(p){let M=l;l=u,u=M,M=d,d=f,f=M}let y=Math.abs(d-l),w=Math.abs(f-u),v=-y/2,E=u<f?1:-1,b=l<d?1:-1,S=0,T=this.image.get(p?u:l,p?l:u);for(let M=l,O=u;M!==d;M+=b){let L=this.image.get(p?O:M,p?M:O);if(L!==T&&(S++,T=L),v+=w,v>0){if(O===f)break;O+=E,v-=y}}return S}}let nu=(()=>{class C{constructor(){this.decoder=new z2}decode(a,l=null){let u,d;if(l!=null&&l.has(me.PURE_BARCODE)){let v=C.extractPureBits(a.getBlackMatrix());u=this.decoder.decode(v),d=C.NO_POINTS}else{let v=new Vt(a.getBlackMatrix()).detect();u=this.decoder.decode(v.getBits()),d=v.getPoints()}let f=u.getRawBytes(),p=new Mn(u.getText(),f,8*f.length,d,ye.DATA_MATRIX,A.currentTimeMillis()),y=u.getByteSegments();y!=null&&p.putMetadata(nn.BYTE_SEGMENTS,y);let w=u.getECLevel();return w!=null&&p.putMetadata(nn.ERROR_CORRECTION_LEVEL,w),p}reset(){}static extractPureBits(a){let l=a.getTopLeftOnBit(),u=a.getBottomRightOnBit();if(l==null||u==null)throw new j;let d=this.moduleSize(l,a),f=l[1],p=u[1],y=l[0],v=(u[0]-y+1)/d,E=(p-f+1)/d;if(v<=0||E<=0)throw new j;let b=d/2;f+=b,y+=b;let S=new en(v,E);for(let T=0;T<E;T++){let M=f+T*d;for(let O=0;O<v;O++)a.get(y+O*d,M)&&S.set(O,T)}return S}static moduleSize(a,l){let u=l.getWidth(),d=a[0],f=a[1];for(;d<u&&l.get(d,f);)d++;if(d===u)throw new j;let p=d-a[0];if(p===0)throw new j;return p}}return C.NO_POINTS=[],C})();class W2 extends Eo{constructor(o=500){super(new nu,o)}}var Za=function(C){return C[C.L=0]="L",C[C.M=1]="M",C[C.Q=2]="Q",C[C.H=3]="H",C}(Za||{});class vt{constructor(o,a,l){this.value=o,this.stringValue=a,this.bits=l,vt.FOR_BITS.set(l,this),vt.FOR_VALUE.set(o,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(o){switch(o){case"L":return vt.L;case"M":return vt.M;case"Q":return vt.Q;case"H":return vt.H;default:throw new g(o+"not available")}}toString(){return this.stringValue}equals(o){if(!(o instanceof vt))return!1;let a=o;return this.value===a.value}static forBits(o){if(o<0||o>=vt.FOR_BITS.size)throw new m;return vt.FOR_BITS.get(o)}}vt.FOR_BITS=new Map,vt.FOR_VALUE=new Map,vt.L=new vt(Za.L,"L",1),vt.M=new vt(Za.M,"M",0),vt.Q=new vt(Za.Q,"Q",3),vt.H=new vt(Za.H,"H",2);class _n{constructor(o){this.errorCorrectionLevel=vt.forBits(o>>3&3),this.dataMask=o&7}static numBitsDiffering(o,a){return W.bitCount(o^a)}static decodeFormatInformation(o,a){let l=_n.doDecodeFormatInformation(o,a);return l!==null?l:_n.doDecodeFormatInformation(o^_n.FORMAT_INFO_MASK_QR,a^_n.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(o,a){let l=Number.MAX_SAFE_INTEGER,u=0;for(let d of _n.FORMAT_INFO_DECODE_LOOKUP){let f=d[0];if(f===o||f===a)return new _n(d[1]);let p=_n.numBitsDiffering(o,f);p<l&&(u=d[1],l=p),o!==a&&(p=_n.numBitsDiffering(a,f),p<l&&(u=d[1],l=p))}return l<=3?new _n(u):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(o){if(!(o instanceof _n))return!1;let a=o;return this.errorCorrectionLevel===a.errorCorrectionLevel&&this.dataMask===a.dataMask}}_n.FORMAT_INFO_MASK_QR=21522,_n.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class k{constructor(o,...a){this.ecCodewordsPerBlock=o,this.ecBlocks=a}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let o=0,a=this.ecBlocks;for(let l of a)o+=l.getCount();return o}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class D{constructor(o,a){this.count=o,this.dataCodewords=a}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class de{constructor(o,a,...l){this.versionNumber=o,this.alignmentPatternCenters=a,this.ecBlocks=l;let u=0,d=l[0].getECCodewordsPerBlock(),f=l[0].getECBlocks();for(let p of f)u+=p.getCount()*(p.getDataCodewords()+d);this.totalCodewords=u}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(o){return this.ecBlocks[o.getValue()]}static getProvisionalVersionForDimension(o){if(o%4!==1)throw new z;try{return this.getVersionForNumber((o-17)/4)}catch{throw new z}}static getVersionForNumber(o){if(o<1||o>40)throw new m;return de.VERSIONS[o-1]}static decodeVersionInformation(o){let a=Number.MAX_SAFE_INTEGER,l=0;for(let u=0;u<de.VERSION_DECODE_INFO.length;u++){let d=de.VERSION_DECODE_INFO[u];if(d===o)return de.getVersionForNumber(u+7);let f=_n.numBitsDiffering(o,d);f<a&&(l=u+7,a=f)}return a<=3?de.getVersionForNumber(l):null}buildFunctionPattern(){let o=this.getDimensionForVersion(),a=new en(o);a.setRegion(0,0,9,9),a.setRegion(o-8,0,8,9),a.setRegion(0,o-8,9,8);let l=this.alignmentPatternCenters.length;for(let u=0;u<l;u++){let d=this.alignmentPatternCenters[u]-2;for(let f=0;f<l;f++)u===0&&(f===0||f===l-1)||u===l-1&&f===0||a.setRegion(this.alignmentPatternCenters[f]-2,d,5,5)}return a.setRegion(6,9,1,o-17),a.setRegion(9,6,o-17,1),this.versionNumber>6&&(a.setRegion(o-11,0,3,6),a.setRegion(0,o-11,6,3)),a}toString(){return""+this.versionNumber}}de.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),de.VERSIONS=[new de(1,new Int32Array(0),new k(7,new D(1,19)),new k(10,new D(1,16)),new k(13,new D(1,13)),new k(17,new D(1,9))),new de(2,Int32Array.from([6,18]),new k(10,new D(1,34)),new k(16,new D(1,28)),new k(22,new D(1,22)),new k(28,new D(1,16))),new de(3,Int32Array.from([6,22]),new k(15,new D(1,55)),new k(26,new D(1,44)),new k(18,new D(2,17)),new k(22,new D(2,13))),new de(4,Int32Array.from([6,26]),new k(20,new D(1,80)),new k(18,new D(2,32)),new k(26,new D(2,24)),new k(16,new D(4,9))),new de(5,Int32Array.from([6,30]),new k(26,new D(1,108)),new k(24,new D(2,43)),new k(18,new D(2,15),new D(2,16)),new k(22,new D(2,11),new D(2,12))),new de(6,Int32Array.from([6,34]),new k(18,new D(2,68)),new k(16,new D(4,27)),new k(24,new D(4,19)),new k(28,new D(4,15))),new de(7,Int32Array.from([6,22,38]),new k(20,new D(2,78)),new k(18,new D(4,31)),new k(18,new D(2,14),new D(4,15)),new k(26,new D(4,13),new D(1,14))),new de(8,Int32Array.from([6,24,42]),new k(24,new D(2,97)),new k(22,new D(2,38),new D(2,39)),new k(22,new D(4,18),new D(2,19)),new k(26,new D(4,14),new D(2,15))),new de(9,Int32Array.from([6,26,46]),new k(30,new D(2,116)),new k(22,new D(3,36),new D(2,37)),new k(20,new D(4,16),new D(4,17)),new k(24,new D(4,12),new D(4,13))),new de(10,Int32Array.from([6,28,50]),new k(18,new D(2,68),new D(2,69)),new k(26,new D(4,43),new D(1,44)),new k(24,new D(6,19),new D(2,20)),new k(28,new D(6,15),new D(2,16))),new de(11,Int32Array.from([6,30,54]),new k(20,new D(4,81)),new k(30,new D(1,50),new D(4,51)),new k(28,new D(4,22),new D(4,23)),new k(24,new D(3,12),new D(8,13))),new de(12,Int32Array.from([6,32,58]),new k(24,new D(2,92),new D(2,93)),new k(22,new D(6,36),new D(2,37)),new k(26,new D(4,20),new D(6,21)),new k(28,new D(7,14),new D(4,15))),new de(13,Int32Array.from([6,34,62]),new k(26,new D(4,107)),new k(22,new D(8,37),new D(1,38)),new k(24,new D(8,20),new D(4,21)),new k(22,new D(12,11),new D(4,12))),new de(14,Int32Array.from([6,26,46,66]),new k(30,new D(3,115),new D(1,116)),new k(24,new D(4,40),new D(5,41)),new k(20,new D(11,16),new D(5,17)),new k(24,new D(11,12),new D(5,13))),new de(15,Int32Array.from([6,26,48,70]),new k(22,new D(5,87),new D(1,88)),new k(24,new D(5,41),new D(5,42)),new k(30,new D(5,24),new D(7,25)),new k(24,new D(11,12),new D(7,13))),new de(16,Int32Array.from([6,26,50,74]),new k(24,new D(5,98),new D(1,99)),new k(28,new D(7,45),new D(3,46)),new k(24,new D(15,19),new D(2,20)),new k(30,new D(3,15),new D(13,16))),new de(17,Int32Array.from([6,30,54,78]),new k(28,new D(1,107),new D(5,108)),new k(28,new D(10,46),new D(1,47)),new k(28,new D(1,22),new D(15,23)),new k(28,new D(2,14),new D(17,15))),new de(18,Int32Array.from([6,30,56,82]),new k(30,new D(5,120),new D(1,121)),new k(26,new D(9,43),new D(4,44)),new k(28,new D(17,22),new D(1,23)),new k(28,new D(2,14),new D(19,15))),new de(19,Int32Array.from([6,30,58,86]),new k(28,new D(3,113),new D(4,114)),new k(26,new D(3,44),new D(11,45)),new k(26,new D(17,21),new D(4,22)),new k(26,new D(9,13),new D(16,14))),new de(20,Int32Array.from([6,34,62,90]),new k(28,new D(3,107),new D(5,108)),new k(26,new D(3,41),new D(13,42)),new k(30,new D(15,24),new D(5,25)),new k(28,new D(15,15),new D(10,16))),new de(21,Int32Array.from([6,28,50,72,94]),new k(28,new D(4,116),new D(4,117)),new k(26,new D(17,42)),new k(28,new D(17,22),new D(6,23)),new k(30,new D(19,16),new D(6,17))),new de(22,Int32Array.from([6,26,50,74,98]),new k(28,new D(2,111),new D(7,112)),new k(28,new D(17,46)),new k(30,new D(7,24),new D(16,25)),new k(24,new D(34,13))),new de(23,Int32Array.from([6,30,54,78,102]),new k(30,new D(4,121),new D(5,122)),new k(28,new D(4,47),new D(14,48)),new k(30,new D(11,24),new D(14,25)),new k(30,new D(16,15),new D(14,16))),new de(24,Int32Array.from([6,28,54,80,106]),new k(30,new D(6,117),new D(4,118)),new k(28,new D(6,45),new D(14,46)),new k(30,new D(11,24),new D(16,25)),new k(30,new D(30,16),new D(2,17))),new de(25,Int32Array.from([6,32,58,84,110]),new k(26,new D(8,106),new D(4,107)),new k(28,new D(8,47),new D(13,48)),new k(30,new D(7,24),new D(22,25)),new k(30,new D(22,15),new D(13,16))),new de(26,Int32Array.from([6,30,58,86,114]),new k(28,new D(10,114),new D(2,115)),new k(28,new D(19,46),new D(4,47)),new k(28,new D(28,22),new D(6,23)),new k(30,new D(33,16),new D(4,17))),new de(27,Int32Array.from([6,34,62,90,118]),new k(30,new D(8,122),new D(4,123)),new k(28,new D(22,45),new D(3,46)),new k(30,new D(8,23),new D(26,24)),new k(30,new D(12,15),new D(28,16))),new de(28,Int32Array.from([6,26,50,74,98,122]),new k(30,new D(3,117),new D(10,118)),new k(28,new D(3,45),new D(23,46)),new k(30,new D(4,24),new D(31,25)),new k(30,new D(11,15),new D(31,16))),new de(29,Int32Array.from([6,30,54,78,102,126]),new k(30,new D(7,116),new D(7,117)),new k(28,new D(21,45),new D(7,46)),new k(30,new D(1,23),new D(37,24)),new k(30,new D(19,15),new D(26,16))),new de(30,Int32Array.from([6,26,52,78,104,130]),new k(30,new D(5,115),new D(10,116)),new k(28,new D(19,47),new D(10,48)),new k(30,new D(15,24),new D(25,25)),new k(30,new D(23,15),new D(25,16))),new de(31,Int32Array.from([6,30,56,82,108,134]),new k(30,new D(13,115),new D(3,116)),new k(28,new D(2,46),new D(29,47)),new k(30,new D(42,24),new D(1,25)),new k(30,new D(23,15),new D(28,16))),new de(32,Int32Array.from([6,34,60,86,112,138]),new k(30,new D(17,115)),new k(28,new D(10,46),new D(23,47)),new k(30,new D(10,24),new D(35,25)),new k(30,new D(19,15),new D(35,16))),new de(33,Int32Array.from([6,30,58,86,114,142]),new k(30,new D(17,115),new D(1,116)),new k(28,new D(14,46),new D(21,47)),new k(30,new D(29,24),new D(19,25)),new k(30,new D(11,15),new D(46,16))),new de(34,Int32Array.from([6,34,62,90,118,146]),new k(30,new D(13,115),new D(6,116)),new k(28,new D(14,46),new D(23,47)),new k(30,new D(44,24),new D(7,25)),new k(30,new D(59,16),new D(1,17))),new de(35,Int32Array.from([6,30,54,78,102,126,150]),new k(30,new D(12,121),new D(7,122)),new k(28,new D(12,47),new D(26,48)),new k(30,new D(39,24),new D(14,25)),new k(30,new D(22,15),new D(41,16))),new de(36,Int32Array.from([6,24,50,76,102,128,154]),new k(30,new D(6,121),new D(14,122)),new k(28,new D(6,47),new D(34,48)),new k(30,new D(46,24),new D(10,25)),new k(30,new D(2,15),new D(64,16))),new de(37,Int32Array.from([6,28,54,80,106,132,158]),new k(30,new D(17,122),new D(4,123)),new k(28,new D(29,46),new D(14,47)),new k(30,new D(49,24),new D(10,25)),new k(30,new D(24,15),new D(46,16))),new de(38,Int32Array.from([6,32,58,84,110,136,162]),new k(30,new D(4,122),new D(18,123)),new k(28,new D(13,46),new D(32,47)),new k(30,new D(48,24),new D(14,25)),new k(30,new D(42,15),new D(32,16))),new de(39,Int32Array.from([6,26,54,82,110,138,166]),new k(30,new D(20,117),new D(4,118)),new k(28,new D(40,47),new D(7,48)),new k(30,new D(43,24),new D(22,25)),new k(30,new D(10,15),new D(67,16))),new de(40,Int32Array.from([6,30,58,86,114,142,170]),new k(30,new D(19,118),new D(6,119)),new k(28,new D(18,47),new D(31,48)),new k(30,new D(34,24),new D(34,25)),new k(30,new D(20,15),new D(61,16)))];var ln=function(C){return C[C.DATA_MASK_000=0]="DATA_MASK_000",C[C.DATA_MASK_001=1]="DATA_MASK_001",C[C.DATA_MASK_010=2]="DATA_MASK_010",C[C.DATA_MASK_011=3]="DATA_MASK_011",C[C.DATA_MASK_100=4]="DATA_MASK_100",C[C.DATA_MASK_101=5]="DATA_MASK_101",C[C.DATA_MASK_110=6]="DATA_MASK_110",C[C.DATA_MASK_111=7]="DATA_MASK_111",C}(ln||{});class ir{constructor(o,a){this.value=o,this.isMasked=a}unmaskBitMatrix(o,a){for(let l=0;l<a;l++)for(let u=0;u<a;u++)this.isMasked(l,u)&&o.flip(u,l)}}ir.values=new Map([[ln.DATA_MASK_000,new ir(ln.DATA_MASK_000,(C,o)=>(C+o&1)===0)],[ln.DATA_MASK_001,new ir(ln.DATA_MASK_001,(C,o)=>(C&1)===0)],[ln.DATA_MASK_010,new ir(ln.DATA_MASK_010,(C,o)=>o%3===0)],[ln.DATA_MASK_011,new ir(ln.DATA_MASK_011,(C,o)=>(C+o)%3===0)],[ln.DATA_MASK_100,new ir(ln.DATA_MASK_100,(C,o)=>(Math.floor(C/2)+Math.floor(o/3)&1)===0)],[ln.DATA_MASK_101,new ir(ln.DATA_MASK_101,(C,o)=>C*o%6===0)],[ln.DATA_MASK_110,new ir(ln.DATA_MASK_110,(C,o)=>C*o%6<3)],[ln.DATA_MASK_111,new ir(ln.DATA_MASK_111,(C,o)=>(C+o+C*o%3&1)===0)]]);class G2{constructor(o){let a=o.getHeight();if(a<21||(a&3)!==1)throw new z;this.bitMatrix=o}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let o=0;for(let d=0;d<6;d++)o=this.copyBit(d,8,o);o=this.copyBit(7,8,o),o=this.copyBit(8,8,o),o=this.copyBit(8,7,o);for(let d=5;d>=0;d--)o=this.copyBit(8,d,o);let a=this.bitMatrix.getHeight(),l=0,u=a-7;for(let d=a-1;d>=u;d--)l=this.copyBit(8,d,l);for(let d=a-8;d<a;d++)l=this.copyBit(d,8,l);if(this.parsedFormatInfo=_n.decodeFormatInformation(o,l),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new z}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;let o=this.bitMatrix.getHeight(),a=Math.floor((o-17)/4);if(a<=6)return de.getVersionForNumber(a);let l=0,u=o-11;for(let f=5;f>=0;f--)for(let p=o-9;p>=u;p--)l=this.copyBit(p,f,l);let d=de.decodeVersionInformation(l);if(d!==null&&d.getDimensionForVersion()===o)return this.parsedVersion=d,d;l=0;for(let f=5;f>=0;f--)for(let p=o-9;p>=u;p--)l=this.copyBit(f,p,l);if(d=de.decodeVersionInformation(l),d!==null&&d.getDimensionForVersion()===o)return this.parsedVersion=d,d;throw new z}copyBit(o,a,l){return(this.isMirror?this.bitMatrix.get(a,o):this.bitMatrix.get(o,a))?l<<1|1:l<<1}readCodewords(){let o=this.readFormatInformation(),a=this.readVersion(),l=ir.values.get(o.getDataMask()),u=this.bitMatrix.getHeight();l.unmaskBitMatrix(this.bitMatrix,u);let d=a.buildFunctionPattern(),f=!0,p=new Uint8Array(a.getTotalCodewords()),y=0,w=0,v=0;for(let E=u-1;E>0;E-=2){E===6&&E--;for(let b=0;b<u;b++){let S=f?u-1-b:b;for(let T=0;T<2;T++)d.get(E-T,S)||(v++,w<<=1,this.bitMatrix.get(E-T,S)&&(w|=1),v===8&&(p[y++]=w,v=0,w=0))}f=!f}if(y!==a.getTotalCodewords())throw new z;return p}remask(){if(this.parsedFormatInfo===null)return;let o=ir.values[this.parsedFormatInfo.getDataMask()],a=this.bitMatrix.getHeight();o.unmaskBitMatrix(this.bitMatrix,a)}setMirror(o){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=o}mirror(){let o=this.bitMatrix;for(let a=0,l=o.getWidth();a<l;a++)for(let u=a+1,d=o.getHeight();u<d;u++)o.get(a,u)!==o.get(u,a)&&(o.flip(u,a),o.flip(a,u))}}class Lh{constructor(o,a){this.numDataCodewords=o,this.codewords=a}static getDataBlocks(o,a,l){if(o.length!==a.getTotalCodewords())throw new m;let u=a.getECBlocksForLevel(l),d=0,f=u.getECBlocks();for(let T of f)d+=T.getCount();let p=new Array(d),y=0;for(let T of f)for(let M=0;M<T.getCount();M++){let O=T.getDataCodewords(),L=u.getECCodewordsPerBlock()+O;p[y++]=new Lh(O,new Uint8Array(L))}let w=p[0].codewords.length,v=p.length-1;for(;v>=0&&p[v].codewords.length!==w;)v--;v++;let E=w-u.getECCodewordsPerBlock(),b=0;for(let T=0;T<E;T++)for(let M=0;M<y;M++)p[M].codewords[T]=o[b++];for(let T=v;T<y;T++)p[T].codewords[E]=o[b++];let S=p[0].codewords.length;for(let T=E;T<S;T++)for(let M=0;M<y;M++){let O=M<v?T:T+1;p[M].codewords[O]=o[b++]}return p}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var br=function(C){return C[C.TERMINATOR=0]="TERMINATOR",C[C.NUMERIC=1]="NUMERIC",C[C.ALPHANUMERIC=2]="ALPHANUMERIC",C[C.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",C[C.BYTE=4]="BYTE",C[C.ECI=5]="ECI",C[C.KANJI=6]="KANJI",C[C.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",C[C.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",C[C.HANZI=9]="HANZI",C}(br||{});class ge{constructor(o,a,l,u){this.value=o,this.stringValue=a,this.characterCountBitsForVersions=l,this.bits=u,ge.FOR_BITS.set(u,this),ge.FOR_VALUE.set(o,this)}static forBits(o){let a=ge.FOR_BITS.get(o);if(a===void 0)throw new m;return a}getCharacterCountBits(o){let a=o.getVersionNumber(),l;return a<=9?l=0:a<=26?l=1:l=2,this.characterCountBitsForVersions[l]}getValue(){return this.value}getBits(){return this.bits}equals(o){if(!(o instanceof ge))return!1;let a=o;return this.value===a.value}toString(){return this.stringValue}}ge.FOR_BITS=new Map,ge.FOR_VALUE=new Map,ge.TERMINATOR=new ge(br.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),ge.NUMERIC=new ge(br.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),ge.ALPHANUMERIC=new ge(br.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),ge.STRUCTURED_APPEND=new ge(br.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),ge.BYTE=new ge(br.BYTE,"BYTE",Int32Array.from([8,16,16]),4),ge.ECI=new ge(br.ECI,"ECI",Int32Array.from([0,0,0]),7),ge.KANJI=new ge(br.KANJI,"KANJI",Int32Array.from([8,10,12]),8),ge.FNC1_FIRST_POSITION=new ge(br.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),ge.FNC1_SECOND_POSITION=new ge(br.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),ge.HANZI=new ge(br.HANZI,"HANZI",Int32Array.from([8,10,12]),13);let mw=(()=>{class C{static decode(a,l,u,d){let f=new kh(a),p=new ht,y=new Array,w=-1,v=-1;try{let E=null,b=!1,S;do{if(f.available()<4)S=ge.TERMINATOR;else{let T=f.readBits(4);S=ge.forBits(T)}switch(S){case ge.TERMINATOR:break;case ge.FNC1_FIRST_POSITION:case ge.FNC1_SECOND_POSITION:b=!0;break;case ge.STRUCTURED_APPEND:if(f.available()<16)throw new z;w=f.readBits(8),v=f.readBits(8);break;case ge.ECI:let T=C.parseECIValue(f);if(E=G.getCharacterSetECIByValue(T),E===null)throw new z;break;case ge.HANZI:let M=f.readBits(4),O=f.readBits(S.getCharacterCountBits(l));M===C.GB2312_SUBSET&&C.decodeHanziSegment(f,p,O);break;default:let L=f.readBits(S.getCharacterCountBits(l));switch(S){case ge.NUMERIC:C.decodeNumericSegment(f,p,L);break;case ge.ALPHANUMERIC:C.decodeAlphanumericSegment(f,p,L,b);break;case ge.BYTE:C.decodeByteSegment(f,p,L,E,y,d);break;case ge.KANJI:C.decodeKanjiSegment(f,p,L);break;default:throw new z}break}}while(S!==ge.TERMINATOR)}catch{throw new z}return new Wa(a,p.toString(),y.length===0?null:y,u===null?null:u.toString(),w,v)}static decodeHanziSegment(a,l,u){if(u*13>a.available())throw new z;let d=new Uint8Array(2*u),f=0;for(;u>0;){let p=a.readBits(13),y=p/96<<8&4294967295|p%96;y<959?y+=41377:y+=42657,d[f]=y>>8&255,d[f+1]=y&255,f+=2,u--}try{l.append(Cn.decode(d,ve.GB2312))}catch(p){throw new z(p)}}static decodeKanjiSegment(a,l,u){if(u*13>a.available())throw new z;let d=new Uint8Array(2*u),f=0;for(;u>0;){let p=a.readBits(13),y=p/192<<8&4294967295|p%192;y<7936?y+=33088:y+=49472,d[f]=y>>8,d[f+1]=y,f+=2,u--}try{l.append(Cn.decode(d,ve.SHIFT_JIS))}catch(p){throw new z(p)}}static decodeByteSegment(a,l,u,d,f,p){if(8*u>a.available())throw new z;let y=new Uint8Array(u);for(let v=0;v<u;v++)y[v]=a.readBits(8);let w;d===null?w=ve.guessEncoding(y,p):w=d.getName();try{l.append(Cn.decode(y,w))}catch(v){throw new z(v)}f.push(y)}static toAlphaNumericChar(a){if(a>=C.ALPHANUMERIC_CHARS.length)throw new z;return C.ALPHANUMERIC_CHARS[a]}static decodeAlphanumericSegment(a,l,u,d){let f=l.length();for(;u>1;){if(a.available()<11)throw new z;let p=a.readBits(11);l.append(C.toAlphaNumericChar(Math.floor(p/45))),l.append(C.toAlphaNumericChar(p%45)),u-=2}if(u===1){if(a.available()<6)throw new z;l.append(C.toAlphaNumericChar(a.readBits(6)))}if(d)for(let p=f;p<l.length();p++)l.charAt(p)==="%"&&(p<l.length()-1&&l.charAt(p+1)==="%"?l.deleteCharAt(p+1):l.setCharAt(p,""))}static decodeNumericSegment(a,l,u){for(;u>=3;){if(a.available()<10)throw new z;let d=a.readBits(10);if(d>=1e3)throw new z;l.append(C.toAlphaNumericChar(Math.floor(d/100))),l.append(C.toAlphaNumericChar(Math.floor(d/10)%10)),l.append(C.toAlphaNumericChar(d%10)),u-=3}if(u===2){if(a.available()<7)throw new z;let d=a.readBits(7);if(d>=100)throw new z;l.append(C.toAlphaNumericChar(Math.floor(d/10))),l.append(C.toAlphaNumericChar(d%10))}else if(u===1){if(a.available()<4)throw new z;let d=a.readBits(4);if(d>=10)throw new z;l.append(C.toAlphaNumericChar(d))}}static parseECIValue(a){let l=a.readBits(8);if(!(l&128))return l&127;if((l&192)===128){let u=a.readBits(8);return(l&63)<<8&4294967295|u}if((l&224)===192){let u=a.readBits(16);return(l&31)<<16&4294967295|u}throw new z}}return C.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",C.GB2312_SUBSET=1,C})();class yw{constructor(o){this.mirrored=o}isMirrored(){return this.mirrored}applyMirroredCorrection(o){if(!this.mirrored||o===null||o.length<3)return;let a=o[0];o[0]=o[2],o[2]=a}}class $2{constructor(){this.rsDecoder=new qa(it.QR_CODE_FIELD_256)}decodeBooleanArray(o,a){return this.decodeBitMatrix(en.parseFromBooleanArray(o),a)}decodeBitMatrix(o,a){let l=new G2(o),u=null;try{return this.decodeBitMatrixParser(l,a)}catch(d){u=d}try{l.remask(),l.setMirror(!0),l.readVersion(),l.readFormatInformation(),l.mirror();let d=this.decodeBitMatrixParser(l,a);return d.setOther(new yw(!0)),d}catch(d){throw u!==null?u:d}}decodeBitMatrixParser(o,a){let l=o.readVersion(),u=o.readFormatInformation().getErrorCorrectionLevel(),d=o.readCodewords(),f=Lh.getDataBlocks(d,l,u),p=0;for(let v of f)p+=v.getNumDataCodewords();let y=new Uint8Array(p),w=0;for(let v of f){let E=v.getCodewords(),b=v.getNumDataCodewords();this.correctErrors(E,b);for(let S=0;S<b;S++)y[w++]=E[S]}return mw.decode(y,l,u,a)}correctErrors(o,a){let l=new Int32Array(o);try{this.rsDecoder.decode(l,o.length-a)}catch{throw new x}for(let u=0;u<a;u++)o[u]=l[u]}}class Fh extends ce{constructor(o,a,l){super(o,a),this.estimatedModuleSize=l}aboutEquals(o,a,l){if(Math.abs(a-this.getY())<=o&&Math.abs(l-this.getX())<=o){let u=Math.abs(o-this.estimatedModuleSize);return u<=1||u<=this.estimatedModuleSize}return!1}combineEstimate(o,a,l){let u=(this.getX()+a)/2,d=(this.getY()+o)/2,f=(this.estimatedModuleSize+l)/2;return new Fh(u,d,f)}}class ru{constructor(o,a,l,u,d,f,p){this.image=o,this.startX=a,this.startY=l,this.width=u,this.height=d,this.moduleSize=f,this.resultPointCallback=p,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){let o=this.startX,a=this.height,l=this.width,u=o+l,d=this.startY+a/2,f=new Int32Array(3),p=this.image;for(let y=0;y<a;y++){let w=d+(y&1?-Math.floor((y+1)/2):Math.floor((y+1)/2));f[0]=0,f[1]=0,f[2]=0;let v=o;for(;v<u&&!p.get(v,w);)v++;let E=0;for(;v<u;){if(p.get(v,w))if(E===1)f[1]++;else if(E===2){if(this.foundPatternCross(f)){let b=this.handlePossibleCenter(f,w,v);if(b!==null)return b}f[0]=f[2],f[1]=1,f[2]=0,E=1}else f[++E]++;else E===1&&E++,f[E]++;v++}if(this.foundPatternCross(f)){let b=this.handlePossibleCenter(f,w,u);if(b!==null)return b}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new j}static centerFromEnd(o,a){return a-o[2]-o[1]/2}foundPatternCross(o){let a=this.moduleSize,l=a/2;for(let u=0;u<3;u++)if(Math.abs(a-o[u])>=l)return!1;return!0}crossCheckVertical(o,a,l,u){let d=this.image,f=d.getHeight(),p=this.crossCheckStateCount;p[0]=0,p[1]=0,p[2]=0;let y=o;for(;y>=0&&d.get(a,y)&&p[1]<=l;)p[1]++,y--;if(y<0||p[1]>l)return NaN;for(;y>=0&&!d.get(a,y)&&p[0]<=l;)p[0]++,y--;if(p[0]>l)return NaN;for(y=o+1;y<f&&d.get(a,y)&&p[1]<=l;)p[1]++,y++;if(y===f||p[1]>l)return NaN;for(;y<f&&!d.get(a,y)&&p[2]<=l;)p[2]++,y++;if(p[2]>l)return NaN;let w=p[0]+p[1]+p[2];return 5*Math.abs(w-u)>=2*u?NaN:this.foundPatternCross(p)?ru.centerFromEnd(p,y):NaN}handlePossibleCenter(o,a,l){let u=o[0]+o[1]+o[2],d=ru.centerFromEnd(o,l),f=this.crossCheckVertical(a,d,2*o[1],u);if(!isNaN(f)){let p=(o[0]+o[1]+o[2])/3;for(let w of this.possibleCenters)if(w.aboutEquals(p,f,d))return w.combineEstimate(f,d,p);let y=new Fh(d,f,p);this.possibleCenters.push(y),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(y)}return null}}class Bh extends ce{constructor(o,a,l,u){super(o,a),this.estimatedModuleSize=l,this.count=u,u===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(o,a,l){if(Math.abs(a-this.getY())<=o&&Math.abs(l-this.getX())<=o){let u=Math.abs(o-this.estimatedModuleSize);return u<=1||u<=this.estimatedModuleSize}return!1}combineEstimate(o,a,l){let u=this.count+1,d=(this.count*this.getX()+a)/u,f=(this.count*this.getY()+o)/u,p=(this.count*this.estimatedModuleSize+l)/u;return new Bh(d,f,p,u)}}class q2{constructor(o){this.bottomLeft=o[0],this.topLeft=o[1],this.topRight=o[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}let Y2=(()=>{class C{constructor(a,l){this.image=a,this.resultPointCallback=l,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=l}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(a){let l=a!=null&&a.get(me.TRY_HARDER)!==void 0,u=a!=null&&a.get(me.PURE_BARCODE)!==void 0,d=this.image,f=d.getHeight(),p=d.getWidth(),y=Math.floor(3*f/(4*C.MAX_MODULES));(y<C.MIN_SKIP||l)&&(y=C.MIN_SKIP);let w=!1,v=new Int32Array(5);for(let b=y-1;b<f&&!w;b+=y){v[0]=0,v[1]=0,v[2]=0,v[3]=0,v[4]=0;let S=0;for(let T=0;T<p;T++)if(d.get(T,b))(S&1)===1&&S++,v[S]++;else if(S&1)v[S]++;else if(S===4)if(C.foundPatternCross(v)){if(this.handlePossibleCenter(v,b,T,u)===!0)if(y=2,this.hasSkipped===!0)w=this.haveMultiplyConfirmedCenters();else{let O=this.findRowSkip();O>v[2]&&(b+=O-v[2]-y,T=p-1)}else{v[0]=v[2],v[1]=v[3],v[2]=v[4],v[3]=1,v[4]=0,S=3;continue}S=0,v[0]=0,v[1]=0,v[2]=0,v[3]=0,v[4]=0}else v[0]=v[2],v[1]=v[3],v[2]=v[4],v[3]=1,v[4]=0,S=3;else v[++S]++;C.foundPatternCross(v)&&this.handlePossibleCenter(v,b,p,u)===!0&&(y=v[0],this.hasSkipped&&(w=this.haveMultiplyConfirmedCenters()))}let E=this.selectBestPatterns();return ce.orderBestPatterns(E),new q2(E)}static centerFromEnd(a,l){return l-a[4]-a[3]-a[2]/2}static foundPatternCross(a){let l=0;for(let f=0;f<5;f++){let p=a[f];if(p===0)return!1;l+=p}if(l<7)return!1;let u=l/7,d=u/2;return Math.abs(u-a[0])<d&&Math.abs(u-a[1])<d&&Math.abs(3*u-a[2])<3*d&&Math.abs(u-a[3])<d&&Math.abs(u-a[4])<d}getCrossCheckStateCount(){let a=this.crossCheckStateCount;return a[0]=0,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a}crossCheckDiagonal(a,l,u,d){let f=this.getCrossCheckStateCount(),p=0,y=this.image;for(;a>=p&&l>=p&&y.get(l-p,a-p);)f[2]++,p++;if(a<p||l<p)return!1;for(;a>=p&&l>=p&&!y.get(l-p,a-p)&&f[1]<=u;)f[1]++,p++;if(a<p||l<p||f[1]>u)return!1;for(;a>=p&&l>=p&&y.get(l-p,a-p)&&f[0]<=u;)f[0]++,p++;if(f[0]>u)return!1;let w=y.getHeight(),v=y.getWidth();for(p=1;a+p<w&&l+p<v&&y.get(l+p,a+p);)f[2]++,p++;if(a+p>=w||l+p>=v)return!1;for(;a+p<w&&l+p<v&&!y.get(l+p,a+p)&&f[3]<u;)f[3]++,p++;if(a+p>=w||l+p>=v||f[3]>=u)return!1;for(;a+p<w&&l+p<v&&y.get(l+p,a+p)&&f[4]<u;)f[4]++,p++;if(f[4]>=u)return!1;let E=f[0]+f[1]+f[2]+f[3]+f[4];return Math.abs(E-d)<2*d&&C.foundPatternCross(f)}crossCheckVertical(a,l,u,d){let f=this.image,p=f.getHeight(),y=this.getCrossCheckStateCount(),w=a;for(;w>=0&&f.get(l,w);)y[2]++,w--;if(w<0)return NaN;for(;w>=0&&!f.get(l,w)&&y[1]<=u;)y[1]++,w--;if(w<0||y[1]>u)return NaN;for(;w>=0&&f.get(l,w)&&y[0]<=u;)y[0]++,w--;if(y[0]>u)return NaN;for(w=a+1;w<p&&f.get(l,w);)y[2]++,w++;if(w===p)return NaN;for(;w<p&&!f.get(l,w)&&y[3]<u;)y[3]++,w++;if(w===p||y[3]>=u)return NaN;for(;w<p&&f.get(l,w)&&y[4]<u;)y[4]++,w++;if(y[4]>=u)return NaN;let v=y[0]+y[1]+y[2]+y[3]+y[4];return 5*Math.abs(v-d)>=2*d?NaN:C.foundPatternCross(y)?C.centerFromEnd(y,w):NaN}crossCheckHorizontal(a,l,u,d){let f=this.image,p=f.getWidth(),y=this.getCrossCheckStateCount(),w=a;for(;w>=0&&f.get(w,l);)y[2]++,w--;if(w<0)return NaN;for(;w>=0&&!f.get(w,l)&&y[1]<=u;)y[1]++,w--;if(w<0||y[1]>u)return NaN;for(;w>=0&&f.get(w,l)&&y[0]<=u;)y[0]++,w--;if(y[0]>u)return NaN;for(w=a+1;w<p&&f.get(w,l);)y[2]++,w++;if(w===p)return NaN;for(;w<p&&!f.get(w,l)&&y[3]<u;)y[3]++,w++;if(w===p||y[3]>=u)return NaN;for(;w<p&&f.get(w,l)&&y[4]<u;)y[4]++,w++;if(y[4]>=u)return NaN;let v=y[0]+y[1]+y[2]+y[3]+y[4];return 5*Math.abs(v-d)>=d?NaN:C.foundPatternCross(y)?C.centerFromEnd(y,w):NaN}handlePossibleCenter(a,l,u,d){let f=a[0]+a[1]+a[2]+a[3]+a[4],p=C.centerFromEnd(a,u),y=this.crossCheckVertical(l,Math.floor(p),a[2],f);if(!isNaN(y)&&(p=this.crossCheckHorizontal(Math.floor(p),Math.floor(y),a[2],f),!isNaN(p)&&(!d||this.crossCheckDiagonal(Math.floor(y),Math.floor(p),a[2],f)))){let w=f/7,v=!1,E=this.possibleCenters;for(let b=0,S=E.length;b<S;b++){let T=E[b];if(T.aboutEquals(w,y,p)){E[b]=T.combineEstimate(y,p,w),v=!0;break}}if(!v){let b=new Bh(p,y,w);E.push(b),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(b)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let l=null;for(let u of this.possibleCenters)if(u.getCount()>=C.CENTER_QUORUM)if(l==null)l=u;else return this.hasSkipped=!0,Math.floor((Math.abs(l.getX()-u.getX())-Math.abs(l.getY()-u.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let a=0,l=0,u=this.possibleCenters.length;for(let p of this.possibleCenters)p.getCount()>=C.CENTER_QUORUM&&(a++,l+=p.getEstimatedModuleSize());if(a<3)return!1;let d=l/u,f=0;for(let p of this.possibleCenters)f+=Math.abs(p.getEstimatedModuleSize()-d);return f<=.05*l}selectBestPatterns(){let a=this.possibleCenters.length;if(a<3)throw new j;let l=this.possibleCenters,u;if(a>3){let d=0,f=0;for(let w of this.possibleCenters){let v=w.getEstimatedModuleSize();d+=v,f+=v*v}u=d/a;let p=Math.sqrt(f/a-u*u);l.sort((w,v)=>{let E=Math.abs(v.getEstimatedModuleSize()-u),b=Math.abs(w.getEstimatedModuleSize()-u);return E<b?-1:E>b?1:0});let y=Math.max(.2*u,p);for(let w=0;w<l.length&&l.length>3;w++){let v=l[w];Math.abs(v.getEstimatedModuleSize()-u)>y&&(l.splice(w,1),w--)}}if(l.length>3){let d=0;for(let f of l)d+=f.getEstimatedModuleSize();u=d/l.length,l.sort((f,p)=>{if(p.getCount()===f.getCount()){let y=Math.abs(p.getEstimatedModuleSize()-u),w=Math.abs(f.getEstimatedModuleSize()-u);return y<w?1:y>w?-1:0}else return p.getCount()-f.getCount()}),l.splice(3)}return[l[0],l[1],l[2]]}}return C.CENTER_QUORUM=2,C.MIN_SKIP=3,C.MAX_MODULES=57,C})();class Qa{constructor(o){this.image=o}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(o){this.resultPointCallback=o==null?null:o.get(me.NEED_RESULT_POINT_CALLBACK);let l=new Y2(this.image,this.resultPointCallback).find(o);return this.processFinderPatternInfo(l)}processFinderPatternInfo(o){let a=o.getTopLeft(),l=o.getTopRight(),u=o.getBottomLeft(),d=this.calculateModuleSize(a,l,u);if(d<1)throw new j("No pattern found in proccess finder.");let f=Qa.computeDimension(a,l,u,d),p=de.getProvisionalVersionForDimension(f),y=p.getDimensionForVersion()-7,w=null;if(p.getAlignmentPatternCenters().length>0){let S=l.getX()-a.getX()+u.getX(),T=l.getY()-a.getY()+u.getY(),M=1-3/y,O=Math.floor(a.getX()+M*(S-a.getX())),L=Math.floor(a.getY()+M*(T-a.getY()));for(let $=4;$<=16;$<<=1)try{w=this.findAlignmentInRegion(d,O,L,$);break}catch(K){if(!(K instanceof j))throw K}}let v=Qa.createTransform(a,l,u,w,f),E=Qa.sampleGrid(this.image,v,f),b;return w===null?b=[u,a,l]:b=[u,a,l,w],new Qc(E,b)}static createTransform(o,a,l,u,d){let f=d-3.5,p,y,w,v;return u!==null?(p=u.getX(),y=u.getY(),w=f-3,v=w):(p=a.getX()-o.getX()+l.getX(),y=a.getY()-o.getY()+l.getY(),w=f,v=f),vr.quadrilateralToQuadrilateral(3.5,3.5,f,3.5,w,v,3.5,f,o.getX(),o.getY(),a.getX(),a.getY(),p,y,l.getX(),l.getY())}static sampleGrid(o,a,l){return ji.getInstance().sampleGridWithTransform(o,l,l,a)}static computeDimension(o,a,l,u){let d=Je.round(ce.distance(o,a)/u),f=Je.round(ce.distance(o,l)/u),p=Math.floor((d+f)/2)+7;switch(p&3){case 0:p++;break;case 2:p--;break;case 3:throw new j("Dimensions could be not found.")}return p}calculateModuleSize(o,a,l){return(this.calculateModuleSizeOneWay(o,a)+this.calculateModuleSizeOneWay(o,l))/2}calculateModuleSizeOneWay(o,a){let l=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(o.getX()),Math.floor(o.getY()),Math.floor(a.getX()),Math.floor(a.getY())),u=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(a.getX()),Math.floor(a.getY()),Math.floor(o.getX()),Math.floor(o.getY()));return isNaN(l)?u/7:isNaN(u)?l/7:(l+u)/14}sizeOfBlackWhiteBlackRunBothWays(o,a,l,u){let d=this.sizeOfBlackWhiteBlackRun(o,a,l,u),f=1,p=o-(l-o);p<0?(f=o/(o-p),p=0):p>=this.image.getWidth()&&(f=(this.image.getWidth()-1-o)/(p-o),p=this.image.getWidth()-1);let y=Math.floor(a-(u-a)*f);return f=1,y<0?(f=a/(a-y),y=0):y>=this.image.getHeight()&&(f=(this.image.getHeight()-1-a)/(y-a),y=this.image.getHeight()-1),p=Math.floor(o+(p-o)*f),d+=this.sizeOfBlackWhiteBlackRun(o,a,p,y),d-1}sizeOfBlackWhiteBlackRun(o,a,l,u){let d=Math.abs(u-a)>Math.abs(l-o);if(d){let S=o;o=a,a=S,S=l,l=u,u=S}let f=Math.abs(l-o),p=Math.abs(u-a),y=-f/2,w=o<l?1:-1,v=a<u?1:-1,E=0,b=l+w;for(let S=o,T=a;S!==b;S+=w){let M=d?T:S,O=d?S:T;if(E===1===this.image.get(M,O)){if(E===2)return Je.distance(S,T,o,a);E++}if(y+=p,y>0){if(T===u)break;T+=v,y-=f}}return E===2?Je.distance(l+w,u,o,a):NaN}findAlignmentInRegion(o,a,l,u){let d=Math.floor(u*o),f=Math.max(0,a-d),p=Math.min(this.image.getWidth()-1,a+d);if(p-f<o*3)throw new j("Alignment top exceeds estimated module size.");let y=Math.max(0,l-d),w=Math.min(this.image.getHeight()-1,l+d);if(w-y<o*3)throw new j("Alignment bottom exceeds estimated module size.");return new ru(this.image,f,y,p-f,w-y,o,this.resultPointCallback).find()}}class Wi{constructor(){this.decoder=new $2}getDecoder(){return this.decoder}decode(o,a){let l,u;if(a!=null&&a.get(me.PURE_BARCODE)!==void 0){let y=Wi.extractPureBits(o.getBlackMatrix());l=this.decoder.decodeBitMatrix(y,a),u=Wi.NO_POINTS}else{let y=new Qa(o.getBlackMatrix()).detect(a);l=this.decoder.decodeBitMatrix(y.getBits(),a),u=y.getPoints()}l.getOther()instanceof yw&&l.getOther().applyMirroredCorrection(u);let d=new Mn(l.getText(),l.getRawBytes(),void 0,u,ye.QR_CODE,void 0),f=l.getByteSegments();f!==null&&d.putMetadata(nn.BYTE_SEGMENTS,f);let p=l.getECLevel();return p!==null&&d.putMetadata(nn.ERROR_CORRECTION_LEVEL,p),l.hasStructuredAppend()&&(d.putMetadata(nn.STRUCTURED_APPEND_SEQUENCE,l.getStructuredAppendSequenceNumber()),d.putMetadata(nn.STRUCTURED_APPEND_PARITY,l.getStructuredAppendParity())),d}reset(){}static extractPureBits(o){let a=o.getTopLeftOnBit(),l=o.getBottomRightOnBit();if(a===null||l===null)throw new j;let u=this.moduleSize(a,o),d=a[1],f=l[1],p=a[0],y=l[0];if(p>=y||d>=f)throw new j;if(f-d!==y-p&&(y=p+(f-d),y>=o.getWidth()))throw new j;let w=Math.round((y-p+1)/u),v=Math.round((f-d+1)/u);if(w<=0||v<=0)throw new j;if(v!==w)throw new j;let E=Math.floor(u/2);d+=E,p+=E;let b=p+Math.floor((w-1)*u)-y;if(b>0){if(b>E)throw new j;p-=b}let S=d+Math.floor((v-1)*u)-f;if(S>0){if(S>E)throw new j;d-=S}let T=new en(w,v);for(let M=0;M<v;M++){let O=d+Math.floor(M*u);for(let L=0;L<w;L++)o.get(p+Math.floor(L*u),O)&&T.set(L,M)}return T}static moduleSize(o,a){let l=a.getHeight(),u=a.getWidth(),d=o[0],f=o[1],p=!0,y=0;for(;d<u&&f<l;){if(p!==a.get(d,f)){if(++y===5)break;p=!p}d++,f++}if(d===u||f===l)throw new j;return(d-o[0])/7}}Wi.NO_POINTS=new Array;class Ce{PDF417Common(){}static getBitCountSum(o){return Je.sum(o)}static toIntArray(o){if(o==null||!o.length)return Ce.EMPTY_INT_ARRAY;let a=new Int32Array(o.length),l=0;for(let u of o)a[l++]=u;return a}static getCodeword(o){let a=q.binarySearch(Ce.SYMBOL_TABLE,o&262143);return a<0?-1:(Ce.CODEWORD_TABLE[a]-1)%Ce.NUMBER_OF_CODEWORDS}}Ce.NUMBER_OF_CODEWORDS=929,Ce.MAX_CODEWORDS_IN_BARCODE=Ce.NUMBER_OF_CODEWORDS-1,Ce.MIN_ROWS_IN_BARCODE=3,Ce.MAX_ROWS_IN_BARCODE=90,Ce.MODULES_IN_CODEWORD=17,Ce.MODULES_IN_STOP_PATTERN=18,Ce.BARS_IN_MODULE=8,Ce.EMPTY_INT_ARRAY=new Int32Array([]),Ce.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),Ce.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Z2{constructor(o,a){this.bits=o,this.points=a}getBits(){return this.bits}getPoints(){return this.points}}class Oe{static detectMultiple(o,a,l){let u=o.getBlackMatrix(),d=Oe.detect(l,u);return d.length||(u=u.clone(),u.rotate180(),d=Oe.detect(l,u)),new Z2(u,d)}static detect(o,a){let l=new Array,u=0,d=0,f=!1;for(;u<a.getHeight();){let p=Oe.findVertices(a,u,d);if(p[0]==null&&p[3]==null){if(!f)break;f=!1,d=0;for(let y of l)y[1]!=null&&(u=Math.trunc(Math.max(u,y[1].getY()))),y[3]!=null&&(u=Math.max(u,Math.trunc(y[3].getY())));u+=Oe.ROW_STEP;continue}if(f=!0,l.push(p),!o)break;p[2]!=null?(d=Math.trunc(p[2].getX()),u=Math.trunc(p[2].getY())):(d=Math.trunc(p[4].getX()),u=Math.trunc(p[4].getY()))}return l}static findVertices(o,a,l){let u=o.getHeight(),d=o.getWidth(),f=new Array(8);return Oe.copyToResult(f,Oe.findRowsWithPattern(o,u,d,a,l,Oe.START_PATTERN),Oe.INDEXES_START_PATTERN),f[4]!=null&&(l=Math.trunc(f[4].getX()),a=Math.trunc(f[4].getY())),Oe.copyToResult(f,Oe.findRowsWithPattern(o,u,d,a,l,Oe.STOP_PATTERN),Oe.INDEXES_STOP_PATTERN),f}static copyToResult(o,a,l){for(let u=0;u<l.length;u++)o[l[u]]=a[u]}static findRowsWithPattern(o,a,l,u,d,f){let p=new Array(4),y=!1,w=new Int32Array(f.length);for(;u<a;u+=Oe.ROW_STEP){let E=Oe.findGuardPattern(o,d,u,l,!1,f,w);if(E!=null){for(;u>0;){let b=Oe.findGuardPattern(o,d,--u,l,!1,f,w);if(b!=null)E=b;else{u++;break}}p[0]=new ce(E[0],u),p[1]=new ce(E[1],u),y=!0;break}}let v=u+1;if(y){let E=0,b=Int32Array.from([Math.trunc(p[0].getX()),Math.trunc(p[1].getX())]);for(;v<a;v++){let S=Oe.findGuardPattern(o,b[0],v,l,!1,f,w);if(S!=null&&Math.abs(b[0]-S[0])<Oe.MAX_PATTERN_DRIFT&&Math.abs(b[1]-S[1])<Oe.MAX_PATTERN_DRIFT)b=S,E=0;else{if(E>Oe.SKIPPED_ROW_COUNT_MAX)break;E++}}v-=E+1,p[2]=new ce(b[0],v),p[3]=new ce(b[1],v)}return v-u<Oe.BARCODE_MIN_HEIGHT&&q.fill(p,null),p}static findGuardPattern(o,a,l,u,d,f,p){q.fillWithin(p,0,p.length,0);let y=a,w=0;for(;o.get(y,l)&&y>0&&w++<Oe.MAX_PIXEL_DRIFT;)y--;let v=y,E=0,b=f.length;for(let S=d;v<u;v++)if(o.get(v,l)!==S)p[E]++;else{if(E===b-1){if(Oe.patternMatchVariance(p,f,Oe.MAX_INDIVIDUAL_VARIANCE)<Oe.MAX_AVG_VARIANCE)return new Int32Array([y,v]);y+=p[0]+p[1],A.arraycopy(p,2,p,0,E-1),p[E-1]=0,p[E]=0,E--}else E++;p[E]=1,S=!S}return E===b-1&&Oe.patternMatchVariance(p,f,Oe.MAX_INDIVIDUAL_VARIANCE)<Oe.MAX_AVG_VARIANCE?new Int32Array([y,v-1]):null}static patternMatchVariance(o,a,l){let u=o.length,d=0,f=0;for(let w=0;w<u;w++)d+=o[w],f+=a[w];if(d<f)return 1/0;let p=d/f;l*=p;let y=0;for(let w=0;w<u;w++){let v=o[w],E=a[w]*p,b=v>E?v-E:E-v;if(b>l)return 1/0;y+=b}return y/d}}Oe.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),Oe.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),Oe.MAX_AVG_VARIANCE=.42,Oe.MAX_INDIVIDUAL_VARIANCE=.8,Oe.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),Oe.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),Oe.MAX_PIXEL_DRIFT=3,Oe.MAX_PATTERN_DRIFT=5,Oe.SKIPPED_ROW_COUNT_MAX=25,Oe.ROW_STEP=5,Oe.BARCODE_MIN_HEIGHT=10;class cn{constructor(o,a){if(a.length===0)throw new m;this.field=o;let l=a.length;if(l>1&&a[0]===0){let u=1;for(;u<l&&a[u]===0;)u++;u===l?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(l-u),A.arraycopy(a,u,this.coefficients,0,this.coefficients.length))}else this.coefficients=a}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(o){return this.coefficients[this.coefficients.length-1-o]}evaluateAt(o){if(o===0)return this.getCoefficient(0);if(o===1){let u=0;for(let d of this.coefficients)u=this.field.add(u,d);return u}let a=this.coefficients[0],l=this.coefficients.length;for(let u=1;u<l;u++)a=this.field.add(this.field.multiply(o,a),this.coefficients[u]);return a}add(o){if(!this.field.equals(o.field))throw new m("ModulusPolys do not have same ModulusGF field");if(this.isZero())return o;if(o.isZero())return this;let a=this.coefficients,l=o.coefficients;if(a.length>l.length){let f=a;a=l,l=f}let u=new Int32Array(l.length),d=l.length-a.length;A.arraycopy(l,0,u,0,d);for(let f=d;f<l.length;f++)u[f]=this.field.add(a[f-d],l[f]);return new cn(this.field,u)}subtract(o){if(!this.field.equals(o.field))throw new m("ModulusPolys do not have same ModulusGF field");return o.isZero()?this:this.add(o.negative())}multiply(o){return o instanceof cn?this.multiplyOther(o):this.multiplyScalar(o)}multiplyOther(o){if(!this.field.equals(o.field))throw new m("ModulusPolys do not have same ModulusGF field");if(this.isZero()||o.isZero())return new cn(this.field,new Int32Array([0]));let a=this.coefficients,l=a.length,u=o.coefficients,d=u.length,f=new Int32Array(l+d-1);for(let p=0;p<l;p++){let y=a[p];for(let w=0;w<d;w++)f[p+w]=this.field.add(f[p+w],this.field.multiply(y,u[w]))}return new cn(this.field,f)}negative(){let o=this.coefficients.length,a=new Int32Array(o);for(let l=0;l<o;l++)a[l]=this.field.subtract(0,this.coefficients[l]);return new cn(this.field,a)}multiplyScalar(o){if(o===0)return new cn(this.field,new Int32Array([0]));if(o===1)return this;let a=this.coefficients.length,l=new Int32Array(a);for(let u=0;u<a;u++)l[u]=this.field.multiply(this.coefficients[u],o);return new cn(this.field,l)}multiplyByMonomial(o,a){if(o<0)throw new m;if(a===0)return new cn(this.field,new Int32Array([0]));let l=this.coefficients.length,u=new Int32Array(l+o);for(let d=0;d<l;d++)u[d]=this.field.multiply(this.coefficients[d],a);return new cn(this.field,u)}toString(){let o=new ht;for(let a=this.getDegree();a>=0;a--){let l=this.getCoefficient(a);l!==0&&(l<0?(o.append(" - "),l=-l):o.length()>0&&o.append(" + "),(a===0||l!==1)&&o.append(l),a!==0&&(a===1?o.append("x"):(o.append("x^"),o.append(a))))}return o.toString()}}class Q2{add(o,a){return(o+a)%this.modulus}subtract(o,a){return(this.modulus+o-a)%this.modulus}exp(o){return this.expTable[o]}log(o){if(o===0)throw new m;return this.logTable[o]}inverse(o){if(o===0)throw new bh;return this.expTable[this.modulus-this.logTable[o]-1]}multiply(o,a){return o===0||a===0?0:this.expTable[(this.logTable[o]+this.logTable[a])%(this.modulus-1)]}getSize(){return this.modulus}equals(o){return o===this}}class Vh extends Q2{constructor(o,a){super(),this.modulus=o,this.expTable=new Int32Array(o),this.logTable=new Int32Array(o);let l=1;for(let u=0;u<o;u++)this.expTable[u]=l,l=l*a%o;for(let u=0;u<o-1;u++)this.logTable[this.expTable[u]]=u;this.zero=new cn(this,new Int32Array([0])),this.one=new cn(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(o,a){if(o<0)throw new m;if(a===0)return this.zero;let l=new Int32Array(o+1);return l[0]=a,new cn(this,l)}}Vh.PDF417_GF=new Vh(Ce.NUMBER_OF_CODEWORDS,3);class ww{constructor(){this.field=Vh.PDF417_GF}decode(o,a,l){let u=new cn(this.field,o),d=new Int32Array(a),f=!1;for(let T=a;T>0;T--){let M=u.evaluateAt(this.field.exp(T));d[a-T]=M,M!==0&&(f=!0)}if(!f)return 0;let p=this.field.getOne();if(l!=null)for(let T of l){let M=this.field.exp(o.length-1-T),O=new cn(this.field,new Int32Array([this.field.subtract(0,M),1]));p=p.multiply(O)}let y=new cn(this.field,d),w=this.runEuclideanAlgorithm(this.field.buildMonomial(a,1),y,a),v=w[0],E=w[1],b=this.findErrorLocations(v),S=this.findErrorMagnitudes(E,v,b);for(let T=0;T<b.length;T++){let M=o.length-1-this.field.log(b[T]);if(M<0)throw x.getChecksumInstance();o[M]=this.field.subtract(o[M],S[T])}return b.length}runEuclideanAlgorithm(o,a,l){if(o.getDegree()<a.getDegree()){let b=o;o=a,a=b}let u=o,d=a,f=this.field.getZero(),p=this.field.getOne();for(;d.getDegree()>=Math.round(l/2);){let b=u,S=f;if(u=d,f=p,u.isZero())throw x.getChecksumInstance();d=b;let T=this.field.getZero(),M=u.getCoefficient(u.getDegree()),O=this.field.inverse(M);for(;d.getDegree()>=u.getDegree()&&!d.isZero();){let L=d.getDegree()-u.getDegree(),$=this.field.multiply(d.getCoefficient(d.getDegree()),O);T=T.add(this.field.buildMonomial(L,$)),d=d.subtract(u.multiplyByMonomial(L,$))}p=T.multiply(f).subtract(S).negative()}let y=p.getCoefficient(0);if(y===0)throw x.getChecksumInstance();let w=this.field.inverse(y),v=p.multiply(w),E=d.multiply(w);return[v,E]}findErrorLocations(o){let a=o.getDegree(),l=new Int32Array(a),u=0;for(let d=1;d<this.field.getSize()&&u<a;d++)o.evaluateAt(d)===0&&(l[u]=this.field.inverse(d),u++);if(u!==a)throw x.getChecksumInstance();return l}findErrorMagnitudes(o,a,l){let u=a.getDegree(),d=new Int32Array(u);for(let w=1;w<=u;w++)d[u-w]=this.field.multiply(w,a.getCoefficient(w));let f=new cn(this.field,d),p=l.length,y=new Int32Array(p);for(let w=0;w<p;w++){let v=this.field.inverse(l[w]),E=this.field.subtract(0,o.evaluateAt(v)),b=this.field.inverse(f.evaluateAt(v));y[w]=this.field.multiply(E,b)}return y}}class So{constructor(o,a,l,u,d){o instanceof So?this.constructor_2(o):this.constructor_1(o,a,l,u,d)}constructor_1(o,a,l,u,d){let f=a==null||l==null,p=u==null||d==null;if(f&&p)throw new j;f?(a=new ce(0,u.getY()),l=new ce(0,d.getY())):p&&(u=new ce(o.getWidth()-1,a.getY()),d=new ce(o.getWidth()-1,l.getY())),this.image=o,this.topLeft=a,this.bottomLeft=l,this.topRight=u,this.bottomRight=d,this.minX=Math.trunc(Math.min(a.getX(),l.getX())),this.maxX=Math.trunc(Math.max(u.getX(),d.getX())),this.minY=Math.trunc(Math.min(a.getY(),u.getY())),this.maxY=Math.trunc(Math.max(l.getY(),d.getY()))}constructor_2(o){this.image=o.image,this.topLeft=o.getTopLeft(),this.bottomLeft=o.getBottomLeft(),this.topRight=o.getTopRight(),this.bottomRight=o.getBottomRight(),this.minX=o.getMinX(),this.maxX=o.getMaxX(),this.minY=o.getMinY(),this.maxY=o.getMaxY()}static merge(o,a){return o==null?a:a==null?o:new So(o.image,o.topLeft,o.bottomLeft,a.topRight,a.bottomRight)}addMissingRows(o,a,l){let u=this.topLeft,d=this.bottomLeft,f=this.topRight,p=this.bottomRight;if(o>0){let y=l?this.topLeft:this.topRight,w=Math.trunc(y.getY()-o);w<0&&(w=0);let v=new ce(y.getX(),w);l?u=v:f=v}if(a>0){let y=l?this.bottomLeft:this.bottomRight,w=Math.trunc(y.getY()+a);w>=this.image.getHeight()&&(w=this.image.getHeight()-1);let v=new ce(y.getX(),w);l?d=v:p=v}return new So(this.image,u,d,f,p)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class X2{constructor(o,a,l,u){this.columnCount=o,this.errorCorrectionLevel=u,this.rowCountUpperPart=a,this.rowCountLowerPart=l,this.rowCount=a+l}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Xa{constructor(){this.buffer=""}static form(o,a){let l=-1;function u(f,p,y,w,v,E){if(f==="%%")return"%";if(a[++l]===void 0)return;f=w?parseInt(w.substr(1)):void 0;let b=v?parseInt(v.substr(1)):void 0,S;switch(E){case"s":S=a[l];break;case"c":S=a[l][0];break;case"f":S=parseFloat(a[l]).toFixed(f);break;case"p":S=parseFloat(a[l]).toPrecision(f);break;case"e":S=parseFloat(a[l]).toExponential(f);break;case"x":S=parseInt(a[l]).toString(b||16);break;case"d":S=parseFloat(parseInt(a[l],b||10).toPrecision(f)).toFixed(0);break}S=typeof S=="object"?JSON.stringify(S):(+S).toString(b);let T=parseInt(y),M=y&&y[0]+""=="0"?"0":" ";for(;S.length<T;)S=p!==void 0?S+M:M+S;return S}let d=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return o.replace(d,u)}format(o,...a){this.buffer+=Xa.form(o,a)}toString(){return this.buffer}}let Cw=(()=>{class C{constructor(a){this.boundingBox=new So(a),this.codewords=new Array(a.getMaxY()-a.getMinY()+1)}getCodewordNearby(a){let l=this.getCodeword(a);if(l!=null)return l;for(let u=1;u<C.MAX_NEARBY_DISTANCE;u++){let d=this.imageRowToCodewordIndex(a)-u;if(d>=0&&(l=this.codewords[d],l!=null)||(d=this.imageRowToCodewordIndex(a)+u,d<this.codewords.length&&(l=this.codewords[d],l!=null)))return l}return null}imageRowToCodewordIndex(a){return a-this.boundingBox.getMinY()}setCodeword(a,l){this.codewords[this.imageRowToCodewordIndex(a)]=l}getCodeword(a){return this.codewords[this.imageRowToCodewordIndex(a)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){let a=new Xa,l=0;for(let u of this.codewords){if(u==null){a.format("%3d:    |   %n",l++);continue}a.format("%3d: %3d|%3d%n",l++,u.getRowNumber(),u.getValue())}return a.toString()}}return C.MAX_NEARBY_DISTANCE=5,C})();class Ka{constructor(){this.values=new Map}setValue(o){o=Math.trunc(o);let a=this.values.get(o);a==null&&(a=0),a++,this.values.set(o,a)}getValue(){let o=-1,a=new Array;for(let[l,u]of this.values.entries()){let d={getKey:()=>l,getValue:()=>u};d.getValue()>o?(o=d.getValue(),a=[],a.push(d.getKey())):d.getValue()===o&&a.push(d.getKey())}return Ce.toIntArray(a)}getConfidence(o){return this.values.get(o)}}class vw extends Cw{constructor(o,a){super(o),this._isLeft=a}setRowNumbers(){for(let o of this.getCodewords())o?.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(o){let a=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(a,o);let l=this.getBoundingBox(),u=this._isLeft?l.getTopLeft():l.getTopRight(),d=this._isLeft?l.getBottomLeft():l.getBottomRight(),f=this.imageRowToCodewordIndex(Math.trunc(u.getY())),p=this.imageRowToCodewordIndex(Math.trunc(d.getY())),y=-1,w=1,v=0;for(let E=f;E<p;E++){if(a[E]==null)continue;let b=a[E],S=b.getRowNumber()-y;if(S===0)v++;else if(S===1)w=Math.max(w,v),v=1,y=b.getRowNumber();else if(S<0||b.getRowNumber()>=o.getRowCount()||S>E)a[E]=null;else{let T;w>2?T=(w-2)*S:T=S;let M=T>=E;for(let O=1;O<=T&&!M;O++)M=a[E-O]!=null;M?a[E]=null:(y=b.getRowNumber(),v=1)}}}getRowHeights(){let o=this.getBarcodeMetadata();if(o==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(o);let a=new Int32Array(o.getRowCount());for(let l of this.getCodewords())if(l!=null){let u=l.getRowNumber();if(u>=a.length)continue;a[u]++}return a}adjustIncompleteIndicatorColumnRowNumbers(o){let a=this.getBoundingBox(),l=this._isLeft?a.getTopLeft():a.getTopRight(),u=this._isLeft?a.getBottomLeft():a.getBottomRight(),d=this.imageRowToCodewordIndex(Math.trunc(l.getY())),f=this.imageRowToCodewordIndex(Math.trunc(u.getY())),p=this.getCodewords(),y=-1;for(let w=d;w<f;w++){if(p[w]==null)continue;let v=p[w];v.setRowNumberAsRowIndicatorColumn();let E=v.getRowNumber()-y;E===0||(E===1?y=v.getRowNumber():v.getRowNumber()>=o.getRowCount()?p[w]=null:y=v.getRowNumber())}}getBarcodeMetadata(){let o=this.getCodewords(),a=new Ka,l=new Ka,u=new Ka,d=new Ka;for(let p of o){if(p==null)continue;p.setRowNumberAsRowIndicatorColumn();let y=p.getValue()%30,w=p.getRowNumber();switch(this._isLeft||(w+=2),w%3){case 0:l.setValue(y*3+1);break;case 1:d.setValue(y/3),u.setValue(y%3);break;case 2:a.setValue(y+1);break}}if(a.getValue().length===0||l.getValue().length===0||u.getValue().length===0||d.getValue().length===0||a.getValue()[0]<1||l.getValue()[0]+u.getValue()[0]<Ce.MIN_ROWS_IN_BARCODE||l.getValue()[0]+u.getValue()[0]>Ce.MAX_ROWS_IN_BARCODE)return null;let f=new X2(a.getValue()[0],l.getValue()[0],u.getValue()[0],d.getValue()[0]);return this.removeIncorrectCodewords(o,f),f}removeIncorrectCodewords(o,a){for(let l=0;l<o.length;l++){let u=o[l];if(o[l]==null)continue;let d=u.getValue()%30,f=u.getRowNumber();if(f>a.getRowCount()){o[l]=null;continue}switch(this._isLeft||(f+=2),f%3){case 0:d*3+1!==a.getRowCountUpperPart()&&(o[l]=null);break;case 1:(Math.trunc(d/3)!==a.getErrorCorrectionLevel()||d%3!==a.getRowCountLowerPart())&&(o[l]=null);break;case 2:d+1!==a.getColumnCount()&&(o[l]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Ja{constructor(o,a){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=o,this.barcodeColumnCount=o.getColumnCount(),this.boundingBox=a,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let o=Ce.MAX_CODEWORDS_IN_BARCODE,a;do a=o,o=this.adjustRowNumbersAndGetCount();while(o>0&&o<a);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(o){o?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let o=this.adjustRowNumbersByRow();if(o===0)return 0;for(let a=1;a<this.barcodeColumnCount+1;a++){let l=this.detectionResultColumns[a].getCodewords();for(let u=0;u<l.length;u++)l[u]!=null&&(l[u].hasValidRowNumber()||this.adjustRowNumbers(a,u,l))}return o}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let o=this.detectionResultColumns[0].getCodewords(),a=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let l=0;l<o.length;l++)if(o[l]!=null&&a[l]!=null&&o[l].getRowNumber()===a[l].getRowNumber())for(let u=1;u<=this.barcodeColumnCount;u++){let d=this.detectionResultColumns[u].getCodewords()[l];d!=null&&(d.setRowNumber(o[l].getRowNumber()),d.hasValidRowNumber()||(this.detectionResultColumns[u].getCodewords()[l]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let o=0,a=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let l=0;l<a.length;l++){if(a[l]==null)continue;let u=a[l].getRowNumber(),d=0;for(let f=this.barcodeColumnCount+1;f>0&&d<this.ADJUST_ROW_NUMBER_SKIP;f--){let p=this.detectionResultColumns[f].getCodewords()[l];p!=null&&(d=Ja.adjustRowNumberIfValid(u,d,p),p.hasValidRowNumber()||o++)}}return o}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let o=0,a=this.detectionResultColumns[0].getCodewords();for(let l=0;l<a.length;l++){if(a[l]==null)continue;let u=a[l].getRowNumber(),d=0;for(let f=1;f<this.barcodeColumnCount+1&&d<this.ADJUST_ROW_NUMBER_SKIP;f++){let p=this.detectionResultColumns[f].getCodewords()[l];p!=null&&(d=Ja.adjustRowNumberIfValid(u,d,p),p.hasValidRowNumber()||o++)}}return o}static adjustRowNumberIfValid(o,a,l){return l==null||l.hasValidRowNumber()||(l.isValidRowNumber(o)?(l.setRowNumber(o),a=0):++a),a}adjustRowNumbers(o,a,l){if(!this.detectionResultColumns[o-1])return;let u=l[a],d=this.detectionResultColumns[o-1].getCodewords(),f=d;this.detectionResultColumns[o+1]!=null&&(f=this.detectionResultColumns[o+1].getCodewords());let p=new Array(14);p[2]=d[a],p[3]=f[a],a>0&&(p[0]=l[a-1],p[4]=d[a-1],p[5]=f[a-1]),a>1&&(p[8]=l[a-2],p[10]=d[a-2],p[11]=f[a-2]),a<l.length-1&&(p[1]=l[a+1],p[6]=d[a+1],p[7]=f[a+1]),a<l.length-2&&(p[9]=l[a+2],p[12]=d[a+2],p[13]=f[a+2]);for(let y of p)if(Ja.adjustRowNumber(u,y))return}static adjustRowNumber(o,a){return a==null?!1:a.hasValidRowNumber()&&a.getBucket()===o.getBucket()?(o.setRowNumber(a.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(o){this.boundingBox=o}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(o,a){this.detectionResultColumns[o]=a}getDetectionResultColumn(o){return this.detectionResultColumns[o]}toString(){let o=this.detectionResultColumns[0];o==null&&(o=this.detectionResultColumns[this.barcodeColumnCount+1]);let a=new Xa;for(let l=0;l<o.getCodewords().length;l++){a.format("CW %3d:",l);for(let u=0;u<this.barcodeColumnCount+2;u++){if(this.detectionResultColumns[u]==null){a.format("    |   ");continue}let d=this.detectionResultColumns[u].getCodewords()[l];if(d==null){a.format("    |   ");continue}a.format(" %3d|%3d",d.getRowNumber(),d.getValue())}a.format("%n")}return a.toString()}}let K2=(()=>{class C{constructor(a,l,u,d){this.rowNumber=C.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(a),this.endX=Math.trunc(l),this.bucket=Math.trunc(u),this.value=Math.trunc(d)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(a){return a!==C.BARCODE_ROW_UNKNOWN&&this.bucket===a%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(a){this.rowNumber=a}toString(){return this.rowNumber+"|"+this.value}}return C.BARCODE_ROW_UNKNOWN=-1,C})();class Bn{static initialize(){for(let o=0;o<Ce.SYMBOL_TABLE.length;o++){let a=Ce.SYMBOL_TABLE[o],l=a&1;for(let u=0;u<Ce.BARS_IN_MODULE;u++){let d=0;for(;(a&1)===l;)d+=1,a>>=1;l=a&1,Bn.RATIOS_TABLE[o]||(Bn.RATIOS_TABLE[o]=new Array(Ce.BARS_IN_MODULE)),Bn.RATIOS_TABLE[o][Ce.BARS_IN_MODULE-u-1]=Math.fround(d/Ce.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(o){let a=Bn.getDecodedCodewordValue(Bn.sampleBitCounts(o));return a!==-1?a:Bn.getClosestDecodedValue(o)}static sampleBitCounts(o){let a=Je.sum(o),l=new Int32Array(Ce.BARS_IN_MODULE),u=0,d=0;for(let f=0;f<Ce.MODULES_IN_CODEWORD;f++){let p=a/(2*Ce.MODULES_IN_CODEWORD)+f*a/Ce.MODULES_IN_CODEWORD;d+o[u]<=p&&(d+=o[u],u++),l[u]++}return l}static getDecodedCodewordValue(o){let a=Bn.getBitValue(o);return Ce.getCodeword(a)===-1?-1:a}static getBitValue(o){let a=0;for(let l=0;l<o.length;l++)for(let u=0;u<o[l];u++)a=a<<1|(l%2===0?1:0);return Math.trunc(a)}static getClosestDecodedValue(o){let a=Je.sum(o),l=new Array(Ce.BARS_IN_MODULE);if(a>1)for(let f=0;f<l.length;f++)l[f]=Math.fround(o[f]/a);let u=Zc.MAX_VALUE,d=-1;this.bSymbolTableReady||Bn.initialize();for(let f=0;f<Bn.RATIOS_TABLE.length;f++){let p=0,y=Bn.RATIOS_TABLE[f];for(let w=0;w<Ce.BARS_IN_MODULE;w++){let v=Math.fround(y[w]-l[w]);if(p+=Math.fround(v*v),p>=u)break}p<u&&(u=p,d=Ce.SYMBOL_TABLE[f])}return d}}Bn.bSymbolTableReady=!1,Bn.RATIOS_TABLE=new Array(Ce.SYMBOL_TABLE.length).map(C=>C=new Array(Ce.BARS_IN_MODULE));class _w{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(o){this.segmentIndex=o}getFileId(){return this.fileId}setFileId(o){this.fileId=o}getOptionalData(){return this.optionalData}setOptionalData(o){this.optionalData=o}isLastSegment(){return this.lastSegment}setLastSegment(o){this.lastSegment=o}getSegmentCount(){return this.segmentCount}setSegmentCount(o){this.segmentCount=o}getSender(){return this.sender||null}setSender(o){this.sender=o}getAddressee(){return this.addressee||null}setAddressee(o){this.addressee=o}getFileName(){return this.fileName}setFileName(o){this.fileName=o}getFileSize(){return this.fileSize}setFileSize(o){this.fileSize=o}getChecksum(){return this.checksum}setChecksum(o){this.checksum=o}getTimestamp(){return this.timestamp}setTimestamp(o){this.timestamp=o}}class xw{static parseLong(o,a=void 0){return parseInt(o,a)}}let J2=(()=>{class C extends h{}return C.kind="NullPointerException",C})();class eA{writeBytes(o){this.writeBytesOffset(o,0,o.length)}writeBytesOffset(o,a,l){if(o==null)throw new J2;if(a<0||a>o.length||l<0||a+l>o.length||a+l<0)throw new P;if(l===0)return;for(let u=0;u<l;u++)this.write(o[a+u])}flush(){}close(){}}class tA extends h{}class nA extends eA{constructor(o=32){if(super(),this.count=0,o<0)throw new m("Negative initial size: "+o);this.buf=new Uint8Array(o)}ensureCapacity(o){o-this.buf.length>0&&this.grow(o)}grow(o){let l=this.buf.length<<1;if(l-o<0&&(l=o),l<0){if(o<0)throw new tA;l=W.MAX_VALUE}this.buf=q.copyOfUint8Array(this.buf,l)}write(o){this.ensureCapacity(this.count+1),this.buf[this.count]=o,this.count+=1}writeBytesOffset(o,a,l){if(a<0||a>o.length||l<0||a+l-o.length>0)throw new P;this.ensureCapacity(this.count+l),A.arraycopy(o,a,this.buf,this.count,l),this.count+=l}writeTo(o){o.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return q.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(o){return o?typeof o=="string"?this.toString_string(o):this.toString_number(o):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(o){return new String(this.buf).toString()}toString_number(o){return new String(this.buf).toString()}close(){}}var yt=function(C){return C[C.ALPHA=0]="ALPHA",C[C.LOWER=1]="LOWER",C[C.MIXED=2]="MIXED",C[C.PUNCT=3]="PUNCT",C[C.ALPHA_SHIFT=4]="ALPHA_SHIFT",C[C.PUNCT_SHIFT=5]="PUNCT_SHIFT",C}(yt||{});function Ew(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let iu;function Gi(C){if(typeof iu>"u"&&(iu=Ew()),iu===null)throw new Error("BigInt is not supported!");return iu(C)}function rA(){let C=[];C[0]=Gi(1);let o=Gi(900);C[1]=o;for(let a=2;a<16;a++)C[a]=C[a-1]*o;return C}class F{static decode(o,a){let l=new ht(""),u=G.ISO8859_1;l.enableDecoding(u);let d=1,f=o[d++],p=new _w;for(;d<o[0];){switch(f){case F.TEXT_COMPACTION_MODE_LATCH:d=F.textCompaction(o,d,l);break;case F.BYTE_COMPACTION_MODE_LATCH:case F.BYTE_COMPACTION_MODE_LATCH_6:d=F.byteCompaction(f,o,u,d,l);break;case F.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(o[d++]);break;case F.NUMERIC_COMPACTION_MODE_LATCH:d=F.numericCompaction(o,d,l);break;case F.ECI_CHARSET:let w=G.getCharacterSetECIByValue(o[d++]);break;case F.ECI_GENERAL_PURPOSE:d+=2;break;case F.ECI_USER_DEFINED:d++;break;case F.BEGIN_MACRO_PDF417_CONTROL_BLOCK:d=F.decodeMacroBlock(o,d,p);break;case F.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case F.MACRO_PDF417_TERMINATOR:throw new z;default:d--,d=F.textCompaction(o,d,l);break}if(d<o.length)f=o[d++];else throw z.getFormatInstance()}if(l.length()===0)throw z.getFormatInstance();let y=new Wa(null,l.toString(),null,a);return y.setOther(p),y}static decodeMacroBlock(o,a,l){if(a+F.NUMBER_OF_SEQUENCE_CODEWORDS>o[0])throw z.getFormatInstance();let u=new Int32Array(F.NUMBER_OF_SEQUENCE_CODEWORDS);for(let p=0;p<F.NUMBER_OF_SEQUENCE_CODEWORDS;p++,a++)u[p]=o[a];l.setSegmentIndex(W.parseInt(F.decodeBase900toBase10(u,F.NUMBER_OF_SEQUENCE_CODEWORDS)));let d=new ht;a=F.textCompaction(o,a,d),l.setFileId(d.toString());let f=-1;for(o[a]===F.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(f=a+1);a<o[0];)switch(o[a]){case F.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(a++,o[a]){case F.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let p=new ht;a=F.textCompaction(o,a+1,p),l.setFileName(p.toString());break;case F.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let y=new ht;a=F.textCompaction(o,a+1,y),l.setSender(y.toString());break;case F.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let w=new ht;a=F.textCompaction(o,a+1,w),l.setAddressee(w.toString());break;case F.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let v=new ht;a=F.numericCompaction(o,a+1,v),l.setSegmentCount(W.parseInt(v.toString()));break;case F.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let E=new ht;a=F.numericCompaction(o,a+1,E),l.setTimestamp(xw.parseLong(E.toString()));break;case F.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let b=new ht;a=F.numericCompaction(o,a+1,b),l.setChecksum(W.parseInt(b.toString()));break;case F.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let S=new ht;a=F.numericCompaction(o,a+1,S),l.setFileSize(xw.parseLong(S.toString()));break;default:throw z.getFormatInstance()}break;case F.MACRO_PDF417_TERMINATOR:a++,l.setLastSegment(!0);break;default:throw z.getFormatInstance()}if(f!==-1){let p=a-f;l.isLastSegment()&&p--,l.setOptionalData(q.copyOfRange(o,f,f+p))}return a}static textCompaction(o,a,l){let u=new Int32Array((o[0]-a)*2),d=new Int32Array((o[0]-a)*2),f=0,p=!1;for(;a<o[0]&&!p;){let y=o[a++];if(y<F.TEXT_COMPACTION_MODE_LATCH)u[f]=y/30,u[f+1]=y%30,f+=2;else switch(y){case F.TEXT_COMPACTION_MODE_LATCH:u[f++]=F.TEXT_COMPACTION_MODE_LATCH;break;case F.BYTE_COMPACTION_MODE_LATCH:case F.BYTE_COMPACTION_MODE_LATCH_6:case F.NUMERIC_COMPACTION_MODE_LATCH:case F.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case F.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case F.MACRO_PDF417_TERMINATOR:a--,p=!0;break;case F.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u[f]=F.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,y=o[a++],d[f]=y,f++;break}}return F.decodeTextCompaction(u,d,f,l),a}static decodeTextCompaction(o,a,l,u){let d=yt.ALPHA,f=yt.ALPHA,p=0;for(;p<l;){let y=o[p],w="";switch(d){case yt.ALPHA:if(y<26)w=String.fromCharCode(65+y);else switch(y){case 26:w=" ";break;case F.LL:d=yt.LOWER;break;case F.ML:d=yt.MIXED;break;case F.PS:f=d,d=yt.PUNCT_SHIFT;break;case F.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(a[p]);break;case F.TEXT_COMPACTION_MODE_LATCH:d=yt.ALPHA;break}break;case yt.LOWER:if(y<26)w=String.fromCharCode(97+y);else switch(y){case 26:w=" ";break;case F.AS:f=d,d=yt.ALPHA_SHIFT;break;case F.ML:d=yt.MIXED;break;case F.PS:f=d,d=yt.PUNCT_SHIFT;break;case F.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(a[p]);break;case F.TEXT_COMPACTION_MODE_LATCH:d=yt.ALPHA;break}break;case yt.MIXED:if(y<F.PL)w=F.MIXED_CHARS[y];else switch(y){case F.PL:d=yt.PUNCT;break;case 26:w=" ";break;case F.LL:d=yt.LOWER;break;case F.AL:d=yt.ALPHA;break;case F.PS:f=d,d=yt.PUNCT_SHIFT;break;case F.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(a[p]);break;case F.TEXT_COMPACTION_MODE_LATCH:d=yt.ALPHA;break}break;case yt.PUNCT:if(y<F.PAL)w=F.PUNCT_CHARS[y];else switch(y){case F.PAL:d=yt.ALPHA;break;case F.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(a[p]);break;case F.TEXT_COMPACTION_MODE_LATCH:d=yt.ALPHA;break}break;case yt.ALPHA_SHIFT:if(d=f,y<26)w=String.fromCharCode(65+y);else switch(y){case 26:w=" ";break;case F.TEXT_COMPACTION_MODE_LATCH:d=yt.ALPHA;break}break;case yt.PUNCT_SHIFT:if(d=f,y<F.PAL)w=F.PUNCT_CHARS[y];else switch(y){case F.PAL:d=yt.ALPHA;break;case F.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(a[p]);break;case F.TEXT_COMPACTION_MODE_LATCH:d=yt.ALPHA;break}break}w!==""&&u.append(w),p++}}static byteCompaction(o,a,l,u,d){let f=new nA,p=0,y=0,w=!1;switch(o){case F.BYTE_COMPACTION_MODE_LATCH:let v=new Int32Array(6),E=a[u++];for(;u<a[0]&&!w;)switch(v[p++]=E,y=900*y+E,E=a[u++],E){case F.TEXT_COMPACTION_MODE_LATCH:case F.BYTE_COMPACTION_MODE_LATCH:case F.NUMERIC_COMPACTION_MODE_LATCH:case F.BYTE_COMPACTION_MODE_LATCH_6:case F.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case F.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case F.MACRO_PDF417_TERMINATOR:u--,w=!0;break;default:if(p%5===0&&p>0){for(let b=0;b<6;++b)f.write(Number(Gi(y)>>Gi(8*(5-b))));y=0,p=0}break}u===a[0]&&E<F.TEXT_COMPACTION_MODE_LATCH&&(v[p++]=E);for(let b=0;b<p;b++)f.write(v[b]);break;case F.BYTE_COMPACTION_MODE_LATCH_6:for(;u<a[0]&&!w;){let b=a[u++];if(b<F.TEXT_COMPACTION_MODE_LATCH)p++,y=900*y+b;else switch(b){case F.TEXT_COMPACTION_MODE_LATCH:case F.BYTE_COMPACTION_MODE_LATCH:case F.NUMERIC_COMPACTION_MODE_LATCH:case F.BYTE_COMPACTION_MODE_LATCH_6:case F.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case F.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case F.MACRO_PDF417_TERMINATOR:u--,w=!0;break}if(p%5===0&&p>0){for(let S=0;S<6;++S)f.write(Number(Gi(y)>>Gi(8*(5-S))));y=0,p=0}}break}return d.append(Cn.decode(f.toByteArray(),l)),u}static numericCompaction(o,a,l){let u=0,d=!1,f=new Int32Array(F.MAX_NUMERIC_CODEWORDS);for(;a<o[0]&&!d;){let p=o[a++];if(a===o[0]&&(d=!0),p<F.TEXT_COMPACTION_MODE_LATCH)f[u]=p,u++;else switch(p){case F.TEXT_COMPACTION_MODE_LATCH:case F.BYTE_COMPACTION_MODE_LATCH:case F.BYTE_COMPACTION_MODE_LATCH_6:case F.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case F.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case F.MACRO_PDF417_TERMINATOR:a--,d=!0;break}(u%F.MAX_NUMERIC_CODEWORDS===0||p===F.NUMERIC_COMPACTION_MODE_LATCH||d)&&u>0&&(l.append(F.decodeBase900toBase10(f,u)),u=0)}return a}static decodeBase900toBase10(o,a){let l=Gi(0);for(let d=0;d<a;d++)l+=F.EXP900[a-d-1]*Gi(o[d]);let u=l.toString();if(u.charAt(0)!=="1")throw new z;return u.substring(1)}}F.TEXT_COMPACTION_MODE_LATCH=900,F.BYTE_COMPACTION_MODE_LATCH=901,F.NUMERIC_COMPACTION_MODE_LATCH=902,F.BYTE_COMPACTION_MODE_LATCH_6=924,F.ECI_USER_DEFINED=925,F.ECI_GENERAL_PURPOSE=926,F.ECI_CHARSET=927,F.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,F.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,F.MACRO_PDF417_TERMINATOR=922,F.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,F.MAX_NUMERIC_CODEWORDS=15,F.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,F.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,F.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,F.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,F.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,F.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,F.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,F.PL=25,F.LL=27,F.AS=27,F.ML=28,F.AL=28,F.PS=29,F.PAL=29,F.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,F.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",F.EXP900=Ew()?rA():[],F.NUMBER_OF_SEQUENCE_CODEWORDS=2;class Fe{constructor(){}static decode(o,a,l,u,d,f,p){let y=new So(o,a,l,u,d),w=null,v=null,E;for(let T=!0;;T=!1){if(a!=null&&(w=Fe.getRowIndicatorColumn(o,y,a,!0,f,p)),u!=null&&(v=Fe.getRowIndicatorColumn(o,y,u,!1,f,p)),E=Fe.merge(w,v),E==null)throw j.getNotFoundInstance();let M=E.getBoundingBox();if(T&&M!=null&&(M.getMinY()<y.getMinY()||M.getMaxY()>y.getMaxY()))y=M;else break}E.setBoundingBox(y);let b=E.getBarcodeColumnCount()+1;E.setDetectionResultColumn(0,w),E.setDetectionResultColumn(b,v);let S=w!=null;for(let T=1;T<=b;T++){let M=S?T:b-T;if(E.getDetectionResultColumn(M)!==void 0)continue;let O;M===0||M===b?O=new vw(y,M===0):O=new Cw(y),E.setDetectionResultColumn(M,O);let L=-1,$=L;for(let K=y.getMinY();K<=y.getMaxY();K++){if(L=Fe.getStartColumn(E,M,K,S),L<0||L>y.getMaxX()){if($===-1)continue;L=$}let V=Fe.detectCodeword(o,y.getMinX(),y.getMaxX(),S,L,K,f,p);V!=null&&(O.setCodeword(K,V),$=L,f=Math.min(f,V.getWidth()),p=Math.max(p,V.getWidth()))}}return Fe.createDecoderResult(E)}static merge(o,a){if(o==null&&a==null)return null;let l=Fe.getBarcodeMetadata(o,a);if(l==null)return null;let u=So.merge(Fe.adjustBoundingBox(o),Fe.adjustBoundingBox(a));return new Ja(l,u)}static adjustBoundingBox(o){if(o==null)return null;let a=o.getRowHeights();if(a==null)return null;let l=Fe.getMax(a),u=0;for(let p of a)if(u+=l-p,p>0)break;let d=o.getCodewords();for(let p=0;u>0&&d[p]==null;p++)u--;let f=0;for(let p=a.length-1;p>=0&&(f+=l-a[p],!(a[p]>0));p--);for(let p=d.length-1;f>0&&d[p]==null;p--)f--;return o.getBoundingBox().addMissingRows(u,f,o.isLeft())}static getMax(o){let a=-1;for(let l of o)a=Math.max(a,l);return a}static getBarcodeMetadata(o,a){let l;if(o==null||(l=o.getBarcodeMetadata())==null)return a==null?null:a.getBarcodeMetadata();let u;return a==null||(u=a.getBarcodeMetadata())==null?l:l.getColumnCount()!==u.getColumnCount()&&l.getErrorCorrectionLevel()!==u.getErrorCorrectionLevel()&&l.getRowCount()!==u.getRowCount()?null:l}static getRowIndicatorColumn(o,a,l,u,d,f){let p=new vw(a,u);for(let y=0;y<2;y++){let w=y===0?1:-1,v=Math.trunc(Math.trunc(l.getX()));for(let E=Math.trunc(Math.trunc(l.getY()));E<=a.getMaxY()&&E>=a.getMinY();E+=w){let b=Fe.detectCodeword(o,0,o.getWidth(),u,v,E,d,f);b!=null&&(p.setCodeword(E,b),u?v=b.getStartX():v=b.getEndX())}}return p}static adjustCodewordCount(o,a){let l=a[0][1],u=l.getValue(),d=o.getBarcodeColumnCount()*o.getBarcodeRowCount()-Fe.getNumberOfECCodeWords(o.getBarcodeECLevel());if(u.length===0){if(d<1||d>Ce.MAX_CODEWORDS_IN_BARCODE)throw j.getNotFoundInstance();l.setValue(d)}else u[0]!==d&&l.setValue(d)}static createDecoderResult(o){let a=Fe.createBarcodeMatrix(o);Fe.adjustCodewordCount(o,a);let l=new Array,u=new Int32Array(o.getBarcodeRowCount()*o.getBarcodeColumnCount()),d=[],f=new Array;for(let y=0;y<o.getBarcodeRowCount();y++)for(let w=0;w<o.getBarcodeColumnCount();w++){let v=a[y][w+1].getValue(),E=y*o.getBarcodeColumnCount()+w;v.length===0?l.push(E):v.length===1?u[E]=v[0]:(f.push(E),d.push(v))}let p=new Array(d.length);for(let y=0;y<p.length;y++)p[y]=d[y];return Fe.createDecoderResultFromAmbiguousValues(o.getBarcodeECLevel(),u,Ce.toIntArray(l),Ce.toIntArray(f),p)}static createDecoderResultFromAmbiguousValues(o,a,l,u,d){let f=new Int32Array(u.length),p=100;for(;p-- >0;){for(let y=0;y<f.length;y++)a[u[y]]=d[y][f[y]];try{return Fe.decodeCodewords(a,o,l)}catch(y){if(!(y instanceof x))throw y}if(f.length===0)throw x.getChecksumInstance();for(let y=0;y<f.length;y++)if(f[y]<d[y].length-1){f[y]++;break}else if(f[y]=0,y===f.length-1)throw x.getChecksumInstance()}throw x.getChecksumInstance()}static createBarcodeMatrix(o){let a=Array.from({length:o.getBarcodeRowCount()},()=>new Array(o.getBarcodeColumnCount()+2));for(let u=0;u<a.length;u++)for(let d=0;d<a[u].length;d++)a[u][d]=new Ka;let l=0;for(let u of o.getDetectionResultColumns()){if(u!=null){for(let d of u.getCodewords())if(d!=null){let f=d.getRowNumber();if(f>=0){if(f>=a.length)continue;a[f][l].setValue(d.getValue())}}}l++}return a}static isValidBarcodeColumn(o,a){return a>=0&&a<=o.getBarcodeColumnCount()+1}static getStartColumn(o,a,l,u){let d=u?1:-1,f=null;if(Fe.isValidBarcodeColumn(o,a-d)&&(f=o.getDetectionResultColumn(a-d).getCodeword(l)),f!=null)return u?f.getEndX():f.getStartX();if(f=o.getDetectionResultColumn(a).getCodewordNearby(l),f!=null)return u?f.getStartX():f.getEndX();if(Fe.isValidBarcodeColumn(o,a-d)&&(f=o.getDetectionResultColumn(a-d).getCodewordNearby(l)),f!=null)return u?f.getEndX():f.getStartX();let p=0;for(;Fe.isValidBarcodeColumn(o,a-d);){a-=d;for(let y of o.getDetectionResultColumn(a).getCodewords())if(y!=null)return(u?y.getEndX():y.getStartX())+d*p*(y.getEndX()-y.getStartX());p++}return u?o.getBoundingBox().getMinX():o.getBoundingBox().getMaxX()}static detectCodeword(o,a,l,u,d,f,p,y){d=Fe.adjustCodewordStartColumn(o,a,l,u,d,f);let w=Fe.getModuleBitCount(o,a,l,u,d,f);if(w==null)return null;let v,E=Je.sum(w);if(u)v=d+E;else{for(let T=0;T<w.length/2;T++){let M=w[T];w[T]=w[w.length-1-T],w[w.length-1-T]=M}v=d,d=v-E}if(!Fe.checkCodewordSkew(E,p,y))return null;let b=Bn.getDecodedValue(w),S=Ce.getCodeword(b);return S===-1?null:new K2(d,v,Fe.getCodewordBucketNumber(b),S)}static getModuleBitCount(o,a,l,u,d,f){let p=d,y=new Int32Array(8),w=0,v=u?1:-1,E=u;for(;(u?p<l:p>=a)&&w<y.length;)o.get(p,f)===E?(y[w]++,p+=v):(w++,E=!E);return w===y.length||p===(u?l:a)&&w===y.length-1?y:null}static getNumberOfECCodeWords(o){return 2<<o}static adjustCodewordStartColumn(o,a,l,u,d,f){let p=d,y=u?-1:1;for(let w=0;w<2;w++){for(;(u?p>=a:p<l)&&u===o.get(p,f);){if(Math.abs(d-p)>Fe.CODEWORD_SKEW_SIZE)return d;p+=y}y=-y,u=!u}return p}static checkCodewordSkew(o,a,l){return a-Fe.CODEWORD_SKEW_SIZE<=o&&o<=l+Fe.CODEWORD_SKEW_SIZE}static decodeCodewords(o,a,l){if(o.length===0)throw z.getFormatInstance();let u=1<<a+1,d=Fe.correctErrors(o,l,u);Fe.verifyCodewordCount(o,u);let f=F.decode(o,""+a);return f.setErrorsCorrected(d),f.setErasures(l.length),f}static correctErrors(o,a,l){if(a!=null&&a.length>l/2+Fe.MAX_ERRORS||l<0||l>Fe.MAX_EC_CODEWORDS)throw x.getChecksumInstance();return Fe.errorCorrection.decode(o,l,a)}static verifyCodewordCount(o,a){if(o.length<4)throw z.getFormatInstance();let l=o[0];if(l>o.length)throw z.getFormatInstance();if(l===0)if(a<o.length)o[0]=o.length-a;else throw z.getFormatInstance()}static getBitCountForCodeword(o){let a=new Int32Array(8),l=0,u=a.length-1;for(;!((o&1)!==l&&(l=o&1,u--,u<0));)a[u]++,o>>=1;return a}static getCodewordBucketNumber(o){return o instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(o):this.getCodewordBucketNumber_number(o)}static getCodewordBucketNumber_number(o){return Fe.getCodewordBucketNumber(Fe.getBitCountForCodeword(o))}static getCodewordBucketNumber_Int32Array(o){return(o[0]-o[2]+o[4]-o[6]+9)%9}static toString(o){let a=new Xa;for(let l=0;l<o.length;l++){a.format("Row %2d: ",l);for(let u=0;u<o[l].length;u++){let d=o[l][u];d.getValue().length===0?a.format("        ",null):a.format("%4d(%2d)",d.getValue()[0],d.getConfidence(d.getValue()[0]))}a.format("%n")}return a.toString()}}Fe.CODEWORD_SKEW_SIZE=2,Fe.MAX_ERRORS=3,Fe.MAX_EC_CODEWORDS=512,Fe.errorCorrection=new ww;class un{decode(o,a=null){let l=un.decode(o,a,!1);if(l==null||l.length===0||l[0]==null)throw j.getNotFoundInstance();return l[0]}decodeMultiple(o,a=null){try{return un.decode(o,a,!0)}catch(l){throw l instanceof z||l instanceof x?j.getNotFoundInstance():l}}static decode(o,a,l){let u=new Array,d=Oe.detectMultiple(o,a,l);for(let f of d.getPoints()){let p=Fe.decode(d.getBits(),f[4],f[5],f[6],f[7],un.getMinCodewordWidth(f),un.getMaxCodewordWidth(f)),y=new Mn(p.getText(),p.getRawBytes(),void 0,f,ye.PDF_417);y.putMetadata(nn.ERROR_CORRECTION_LEVEL,p.getECLevel());let w=p.getOther();w!=null&&y.putMetadata(nn.PDF417_EXTRA_METADATA,w),u.push(y)}return u.map(f=>f)}static getMaxWidth(o,a){return o==null||a==null?0:Math.trunc(Math.abs(o.getX()-a.getX()))}static getMinWidth(o,a){return o==null||a==null?W.MAX_VALUE:Math.trunc(Math.abs(o.getX()-a.getX()))}static getMaxCodewordWidth(o){return Math.floor(Math.max(Math.max(un.getMaxWidth(o[0],o[4]),un.getMaxWidth(o[6],o[2])*Ce.MODULES_IN_CODEWORD/Ce.MODULES_IN_STOP_PATTERN),Math.max(un.getMaxWidth(o[1],o[5]),un.getMaxWidth(o[7],o[3])*Ce.MODULES_IN_CODEWORD/Ce.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(o){return Math.floor(Math.min(Math.min(un.getMinWidth(o[0],o[4]),un.getMinWidth(o[6],o[2])*Ce.MODULES_IN_CODEWORD/Ce.MODULES_IN_STOP_PATTERN),Math.min(un.getMinWidth(o[1],o[5]),un.getMinWidth(o[7],o[3])*Ce.MODULES_IN_CODEWORD/Ce.MODULES_IN_STOP_PATTERN)))}reset(){}}let jh=(()=>{class C extends h{}return C.kind="ReaderException",C})();class bw{constructor(o,a){this.verbose=o===!0,a&&this.setHints(a)}decode(o,a){return a&&this.setHints(a),this.decodeInternal(o)}decodeWithState(o){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(o)}setHints(o){this.hints=o;let a=!t(o)&&o.get(me.TRY_HARDER)===!0,l=t(o)?null:o.get(me.POSSIBLE_FORMATS),u=new Array;if(!t(l)){let d=l.some(f=>f===ye.UPC_A||f===ye.UPC_E||f===ye.EAN_13||f===ye.EAN_8||f===ye.CODABAR||f===ye.CODE_39||f===ye.CODE_93||f===ye.CODE_128||f===ye.ITF||f===ye.RSS_14||f===ye.RSS_EXPANDED);d&&!a&&u.push(new ms(o,this.verbose)),l.includes(ye.QR_CODE)&&u.push(new Wi),l.includes(ye.DATA_MATRIX)&&u.push(new nu),l.includes(ye.AZTEC)&&u.push(new Kc),l.includes(ye.PDF_417)&&u.push(new un),d&&a&&u.push(new ms(o,this.verbose))}u.length===0&&(a||u.push(new ms(o,this.verbose)),u.push(new Wi),u.push(new nu),u.push(new Kc),u.push(new un),a&&u.push(new ms(o,this.verbose))),this.readers=u}reset(){if(this.readers!==null)for(let o of this.readers)o.reset()}decodeInternal(o){if(this.readers===null)throw new jh("No readers where selected, nothing can be read.");for(let a of this.readers)try{return a.decode(o,this.hints)}catch(l){if(l instanceof jh)continue}throw new j("No MultiFormat Readers were able to detect the code.")}}class iA extends Eo{constructor(o=null,a=500){let l=new bw;l.setHints(o),super(l,a)}decodeBitmap(o){return this.reader.decodeWithState(o)}}class oA extends Eo{constructor(o=500){super(new un,o)}}class sA extends Eo{constructor(o=500){super(new Wi,o)}}var Iw=function(C){return C[C.ERROR_CORRECTION=0]="ERROR_CORRECTION",C[C.CHARACTER_SET=1]="CHARACTER_SET",C[C.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",C[C.MIN_SIZE=3]="MIN_SIZE",C[C.MAX_SIZE=4]="MAX_SIZE",C[C.MARGIN=5]="MARGIN",C[C.PDF417_COMPACT=6]="PDF417_COMPACT",C[C.PDF417_COMPACTION=7]="PDF417_COMPACTION",C[C.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",C[C.AZTEC_LAYERS=9]="AZTEC_LAYERS",C[C.QR_VERSION=10]="QR_VERSION",C}(Iw||{}),qt=Iw;class Uh{constructor(o){this.field=o,this.cachedGenerators=[],this.cachedGenerators.push(new Fn(o,Int32Array.from([1])))}buildGenerator(o){let a=this.cachedGenerators;if(o>=a.length){let l=a[a.length-1],u=this.field;for(let d=a.length;d<=o;d++){let f=l.multiply(new Fn(u,Int32Array.from([1,u.exp(d-1+u.getGeneratorBase())])));a.push(f),l=f}}return a[o]}encode(o,a){if(a===0)throw new m("No error correction bytes");let l=o.length-a;if(l<=0)throw new m("No data bytes provided");let u=this.buildGenerator(a),d=new Int32Array(l);A.arraycopy(o,0,d,0,l);let f=new Fn(this.field,d);f=f.multiplyByMonomial(a,1);let y=f.divide(u)[1].getCoefficients(),w=a-y.length;for(let v=0;v<w;v++)o[l+v]=0;A.arraycopy(y,0,o,l+w,y.length)}}let ys=(()=>{class C{constructor(){}static applyMaskPenaltyRule1(a){return C.applyMaskPenaltyRule1Internal(a,!0)+C.applyMaskPenaltyRule1Internal(a,!1)}static applyMaskPenaltyRule2(a){let l=0,u=a.getArray(),d=a.getWidth(),f=a.getHeight();for(let p=0;p<f-1;p++){let y=u[p];for(let w=0;w<d-1;w++){let v=y[w];v===y[w+1]&&v===u[p+1][w]&&v===u[p+1][w+1]&&l++}}return C.N2*l}static applyMaskPenaltyRule3(a){let l=0,u=a.getArray(),d=a.getWidth(),f=a.getHeight();for(let p=0;p<f;p++)for(let y=0;y<d;y++){let w=u[p];y+6<d&&w[y]===1&&w[y+1]===0&&w[y+2]===1&&w[y+3]===1&&w[y+4]===1&&w[y+5]===0&&w[y+6]===1&&(C.isWhiteHorizontal(w,y-4,y)||C.isWhiteHorizontal(w,y+7,y+11))&&l++,p+6<f&&u[p][y]===1&&u[p+1][y]===0&&u[p+2][y]===1&&u[p+3][y]===1&&u[p+4][y]===1&&u[p+5][y]===0&&u[p+6][y]===1&&(C.isWhiteVertical(u,y,p-4,p)||C.isWhiteVertical(u,y,p+7,p+11))&&l++}return l*C.N3}static isWhiteHorizontal(a,l,u){l=Math.max(l,0),u=Math.min(u,a.length);for(let d=l;d<u;d++)if(a[d]===1)return!1;return!0}static isWhiteVertical(a,l,u,d){u=Math.max(u,0),d=Math.min(d,a.length);for(let f=u;f<d;f++)if(a[f][l]===1)return!1;return!0}static applyMaskPenaltyRule4(a){let l=0,u=a.getArray(),d=a.getWidth(),f=a.getHeight();for(let w=0;w<f;w++){let v=u[w];for(let E=0;E<d;E++)v[E]===1&&l++}let p=a.getHeight()*a.getWidth();return Math.floor(Math.abs(l*2-p)*10/p)*C.N4}static getDataMaskBit(a,l,u){let d,f;switch(a){case 0:d=u+l&1;break;case 1:d=u&1;break;case 2:d=l%3;break;case 3:d=(u+l)%3;break;case 4:d=Math.floor(u/2)+Math.floor(l/3)&1;break;case 5:f=u*l,d=(f&1)+f%3;break;case 6:f=u*l,d=(f&1)+f%3&1;break;case 7:f=u*l,d=f%3+(u+l&1)&1;break;default:throw new m("Invalid mask pattern: "+a)}return d===0}static applyMaskPenaltyRule1Internal(a,l){let u=0,d=l?a.getHeight():a.getWidth(),f=l?a.getWidth():a.getHeight(),p=a.getArray();for(let y=0;y<d;y++){let w=0,v=-1;for(let E=0;E<f;E++){let b=l?p[y][E]:p[E][y];b===v?w++:(w>=5&&(u+=C.N1+(w-5)),w=1,v=b)}w>=5&&(u+=C.N1+(w-5))}return u}}return C.N1=3,C.N2=3,C.N3=40,C.N4=10,C})();class ou{constructor(o,a){this.width=o,this.height=a;let l=new Array(a);for(let u=0;u!==a;u++)l[u]=new Uint8Array(o);this.bytes=l}getHeight(){return this.height}getWidth(){return this.width}get(o,a){return this.bytes[a][o]}getArray(){return this.bytes}setNumber(o,a,l){this.bytes[a][o]=l}setBoolean(o,a,l){this.bytes[a][o]=l?1:0}clear(o){for(let a of this.bytes)q.fill(a,o)}equals(o){if(!(o instanceof ou))return!1;let a=o;if(this.width!==a.width||this.height!==a.height)return!1;for(let l=0,u=this.height;l<u;++l){let d=this.bytes[l],f=a.bytes[l];for(let p=0,y=this.width;p<y;++p)if(d[p]!==f[p])return!1}return!0}toString(){let o=new ht;for(let a=0,l=this.height;a<l;++a){let u=this.bytes[a];for(let d=0,f=this.width;d<f;++d)switch(u[d]){case 0:o.append(" 0");break;case 1:o.append(" 1");break;default:o.append("  ");break}o.append(`
`)}return o.toString()}}let su=(()=>{class C{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){let a=new ht;return a.append(`<<
`),a.append(" mode: "),a.append(this.mode?this.mode.toString():"null"),a.append(`
 ecLevel: `),a.append(this.ecLevel?this.ecLevel.toString():"null"),a.append(`
 version: `),a.append(this.version?this.version.toString():"null"),a.append(`
 maskPattern: `),a.append(this.maskPattern.toString()),this.matrix?(a.append(`
 matrix:
`),a.append(this.matrix.toString())):a.append(`
 matrix: null
`),a.append(`>>
`),a.toString()}setMode(a){this.mode=a}setECLevel(a){this.ecLevel=a}setVersion(a){this.version=a}setMaskPattern(a){this.maskPattern=a}setMatrix(a){this.matrix=a}static isValidMaskPattern(a){return a>=0&&a<C.NUM_MASK_PATTERNS}}return C.NUM_MASK_PATTERNS=8,C})(),_t=(()=>{class C extends h{}return C.kind="WriterException",C})();class we{constructor(){}static clearMatrix(o){o.clear(255)}static buildMatrix(o,a,l,u,d){we.clearMatrix(d),we.embedBasicPatterns(l,d),we.embedTypeInfo(a,u,d),we.maybeEmbedVersionInfo(l,d),we.embedDataBits(o,u,d)}static embedBasicPatterns(o,a){we.embedPositionDetectionPatternsAndSeparators(a),we.embedDarkDotAtLeftBottomCorner(a),we.maybeEmbedPositionAdjustmentPatterns(o,a),we.embedTimingPatterns(a)}static embedTypeInfo(o,a,l){let u=new le;we.makeTypeInfoBits(o,a,u);for(let d=0,f=u.getSize();d<f;++d){let p=u.get(u.getSize()-1-d),y=we.TYPE_INFO_COORDINATES[d],w=y[0],v=y[1];if(l.setBoolean(w,v,p),d<8){let E=l.getWidth()-d-1;l.setBoolean(E,8,p)}else{let b=l.getHeight()-7+(d-8);l.setBoolean(8,b,p)}}}static maybeEmbedVersionInfo(o,a){if(o.getVersionNumber()<7)return;let l=new le;we.makeVersionInfoBits(o,l);let u=6*3-1;for(let d=0;d<6;++d)for(let f=0;f<3;++f){let p=l.get(u);u--,a.setBoolean(d,a.getHeight()-11+f,p),a.setBoolean(a.getHeight()-11+f,d,p)}}static embedDataBits(o,a,l){let u=0,d=-1,f=l.getWidth()-1,p=l.getHeight()-1;for(;f>0;){for(f===6&&(f-=1);p>=0&&p<l.getHeight();){for(let y=0;y<2;++y){let w=f-y;if(!we.isEmpty(l.get(w,p)))continue;let v;u<o.getSize()?(v=o.get(u),++u):v=!1,a!==255&&ys.getDataMaskBit(a,w,p)&&(v=!v),l.setBoolean(w,p,v)}p+=d}d=-d,p+=d,f-=2}if(u!==o.getSize())throw new _t("Not all bits consumed: "+u+"/"+o.getSize())}static findMSBSet(o){return 32-W.numberOfLeadingZeros(o)}static calculateBCHCode(o,a){if(a===0)throw new m("0 polynomial");let l=we.findMSBSet(a);for(o<<=l-1;we.findMSBSet(o)>=l;)o^=a<<we.findMSBSet(o)-l;return o}static makeTypeInfoBits(o,a,l){if(!su.isValidMaskPattern(a))throw new _t("Invalid mask pattern");let u=o.getBits()<<3|a;l.appendBits(u,5);let d=we.calculateBCHCode(u,we.TYPE_INFO_POLY);l.appendBits(d,10);let f=new le;if(f.appendBits(we.TYPE_INFO_MASK_PATTERN,15),l.xor(f),l.getSize()!==15)throw new _t("should not happen but we got: "+l.getSize())}static makeVersionInfoBits(o,a){a.appendBits(o.getVersionNumber(),6);let l=we.calculateBCHCode(o.getVersionNumber(),we.VERSION_INFO_POLY);if(a.appendBits(l,12),a.getSize()!==18)throw new _t("should not happen but we got: "+a.getSize())}static isEmpty(o){return o===255}static embedTimingPatterns(o){for(let a=8;a<o.getWidth()-8;++a){let l=(a+1)%2;we.isEmpty(o.get(a,6))&&o.setNumber(a,6,l),we.isEmpty(o.get(6,a))&&o.setNumber(6,a,l)}}static embedDarkDotAtLeftBottomCorner(o){if(o.get(8,o.getHeight()-8)===0)throw new _t;o.setNumber(8,o.getHeight()-8,1)}static embedHorizontalSeparationPattern(o,a,l){for(let u=0;u<8;++u){if(!we.isEmpty(l.get(o+u,a)))throw new _t;l.setNumber(o+u,a,0)}}static embedVerticalSeparationPattern(o,a,l){for(let u=0;u<7;++u){if(!we.isEmpty(l.get(o,a+u)))throw new _t;l.setNumber(o,a+u,0)}}static embedPositionAdjustmentPattern(o,a,l){for(let u=0;u<5;++u){let d=we.POSITION_ADJUSTMENT_PATTERN[u];for(let f=0;f<5;++f)l.setNumber(o+f,a+u,d[f])}}static embedPositionDetectionPattern(o,a,l){for(let u=0;u<7;++u){let d=we.POSITION_DETECTION_PATTERN[u];for(let f=0;f<7;++f)l.setNumber(o+f,a+u,d[f])}}static embedPositionDetectionPatternsAndSeparators(o){let a=we.POSITION_DETECTION_PATTERN[0].length;we.embedPositionDetectionPattern(0,0,o),we.embedPositionDetectionPattern(o.getWidth()-a,0,o),we.embedPositionDetectionPattern(0,o.getWidth()-a,o);let l=8;we.embedHorizontalSeparationPattern(0,l-1,o),we.embedHorizontalSeparationPattern(o.getWidth()-l,l-1,o),we.embedHorizontalSeparationPattern(0,o.getWidth()-l,o);let u=7;we.embedVerticalSeparationPattern(u,0,o),we.embedVerticalSeparationPattern(o.getHeight()-u-1,0,o),we.embedVerticalSeparationPattern(u,o.getHeight()-u,o)}static maybeEmbedPositionAdjustmentPatterns(o,a){if(o.getVersionNumber()<2)return;let l=o.getVersionNumber()-1,u=we.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[l];for(let d=0,f=u.length;d!==f;d++){let p=u[d];if(p>=0)for(let y=0;y!==f;y++){let w=u[y];w>=0&&we.isEmpty(a.get(w,p))&&we.embedPositionAdjustmentPattern(w-2,p-2,a)}}}}we.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),we.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),we.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),we.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),we.VERSION_INFO_POLY=7973,we.TYPE_INFO_POLY=1335,we.TYPE_INFO_MASK_PATTERN=21522;class aA{constructor(o,a){this.dataBytes=o,this.errorCorrectionBytes=a}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class Dt{constructor(){}static calculateMaskPenalty(o){return ys.applyMaskPenaltyRule1(o)+ys.applyMaskPenaltyRule2(o)+ys.applyMaskPenaltyRule3(o)+ys.applyMaskPenaltyRule4(o)}static encode(o,a,l=null){let u=Dt.DEFAULT_BYTE_MODE_ENCODING,d=l!==null&&l.get(qt.CHARACTER_SET)!==void 0;d&&(u=l.get(qt.CHARACTER_SET).toString());let f=this.chooseMode(o,u),p=new le;if(f===ge.BYTE&&(d||Dt.DEFAULT_BYTE_MODE_ENCODING!==u)){let K=G.getCharacterSetECIByName(u);K!==void 0&&this.appendECI(K,p)}this.appendModeInfo(f,p);let y=new le;this.appendBytes(o,f,y,u);let w;if(l!==null&&l.get(qt.QR_VERSION)!==void 0){let K=Number.parseInt(l.get(qt.QR_VERSION).toString(),10);w=de.getVersionForNumber(K);let V=this.calculateBitsNeeded(f,p,y,w);if(!this.willFit(V,w,a))throw new _t("Data too big for requested version")}else w=this.recommendVersion(a,f,p,y);let v=new le;v.appendBitArray(p);let E=f===ge.BYTE?y.getSizeInBytes():o.length;this.appendLengthInfo(E,w,f,v),v.appendBitArray(y);let b=w.getECBlocksForLevel(a),S=w.getTotalCodewords()-b.getTotalECCodewords();this.terminateBits(S,v);let T=this.interleaveWithECBytes(v,w.getTotalCodewords(),S,b.getNumBlocks()),M=new su;M.setECLevel(a),M.setMode(f),M.setVersion(w);let O=w.getDimensionForVersion(),L=new ou(O,O),$=this.chooseMaskPattern(T,a,w,L);return M.setMaskPattern($),we.buildMatrix(T,a,w,$,L),M.setMatrix(L),M}static recommendVersion(o,a,l,u){let d=this.calculateBitsNeeded(a,l,u,de.getVersionForNumber(1)),f=this.chooseVersion(d,o),p=this.calculateBitsNeeded(a,l,u,f);return this.chooseVersion(p,o)}static calculateBitsNeeded(o,a,l,u){return a.getSize()+o.getCharacterCountBits(u)+l.getSize()}static getAlphanumericCode(o){return o<Dt.ALPHANUMERIC_TABLE.length?Dt.ALPHANUMERIC_TABLE[o]:-1}static chooseMode(o,a=null){if(G.SJIS.getName()===a&&this.isOnlyDoubleByteKanji(o))return ge.KANJI;let l=!1,u=!1;for(let d=0,f=o.length;d<f;++d){let p=o.charAt(d);if(Dt.isDigit(p))l=!0;else if(this.getAlphanumericCode(p.charCodeAt(0))!==-1)u=!0;else return ge.BYTE}return u?ge.ALPHANUMERIC:l?ge.NUMERIC:ge.BYTE}static isOnlyDoubleByteKanji(o){let a;try{a=Cn.encode(o,G.SJIS)}catch{return!1}let l=a.length;if(l%2!==0)return!1;for(let u=0;u<l;u+=2){let d=a[u]&255;if((d<129||d>159)&&(d<224||d>235))return!1}return!0}static chooseMaskPattern(o,a,l,u){let d=Number.MAX_SAFE_INTEGER,f=-1;for(let p=0;p<su.NUM_MASK_PATTERNS;p++){we.buildMatrix(o,a,l,p,u);let y=this.calculateMaskPenalty(u);y<d&&(d=y,f=p)}return f}static chooseVersion(o,a){for(let l=1;l<=40;l++){let u=de.getVersionForNumber(l);if(Dt.willFit(o,u,a))return u}throw new _t("Data too big")}static willFit(o,a,l){let u=a.getTotalCodewords(),f=a.getECBlocksForLevel(l).getTotalECCodewords(),p=u-f,y=(o+7)/8;return p>=y}static terminateBits(o,a){let l=o*8;if(a.getSize()>l)throw new _t("data bits cannot fit in the QR Code"+a.getSize()+" > "+l);for(let f=0;f<4&&a.getSize()<l;++f)a.appendBit(!1);let u=a.getSize()&7;if(u>0)for(let f=u;f<8;f++)a.appendBit(!1);let d=o-a.getSizeInBytes();for(let f=0;f<d;++f)a.appendBits(f&1?17:236,8);if(a.getSize()!==l)throw new _t("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(o,a,l,u,d,f){if(u>=l)throw new _t("Block ID too large");let p=o%l,y=l-p,w=Math.floor(o/l),v=w+1,E=Math.floor(a/l),b=E+1,S=w-E,T=v-b;if(S!==T)throw new _t("EC bytes mismatch");if(l!==y+p)throw new _t("RS blocks mismatch");if(o!==(E+S)*y+(b+T)*p)throw new _t("Total bytes mismatch");u<y?(d[0]=E,f[0]=S):(d[0]=b,f[0]=T)}static interleaveWithECBytes(o,a,l,u){if(o.getSizeInBytes()!==l)throw new _t("Number of bits and data bytes does not match");let d=0,f=0,p=0,y=new Array;for(let v=0;v<u;++v){let E=new Int32Array(1),b=new Int32Array(1);Dt.getNumDataBytesAndNumECBytesForBlockID(a,l,u,v,E,b);let S=E[0],T=new Uint8Array(S);o.toBytes(8*d,T,0,S);let M=Dt.generateECBytes(T,b[0]);y.push(new aA(T,M)),f=Math.max(f,S),p=Math.max(p,M.length),d+=E[0]}if(l!==d)throw new _t("Data bytes does not match offset");let w=new le;for(let v=0;v<f;++v)for(let E of y){let b=E.getDataBytes();v<b.length&&w.appendBits(b[v],8)}for(let v=0;v<p;++v)for(let E of y){let b=E.getErrorCorrectionBytes();v<b.length&&w.appendBits(b[v],8)}if(a!==w.getSizeInBytes())throw new _t("Interleaving error: "+a+" and "+w.getSizeInBytes()+" differ.");return w}static generateECBytes(o,a){let l=o.length,u=new Int32Array(l+a);for(let f=0;f<l;f++)u[f]=o[f]&255;new Uh(it.QR_CODE_FIELD_256).encode(u,a);let d=new Uint8Array(a);for(let f=0;f<a;f++)d[f]=u[l+f];return d}static appendModeInfo(o,a){a.appendBits(o.getBits(),4)}static appendLengthInfo(o,a,l,u){let d=l.getCharacterCountBits(a);if(o>=1<<d)throw new _t(o+" is bigger than "+((1<<d)-1));u.appendBits(o,d)}static appendBytes(o,a,l,u){switch(a){case ge.NUMERIC:Dt.appendNumericBytes(o,l);break;case ge.ALPHANUMERIC:Dt.appendAlphanumericBytes(o,l);break;case ge.BYTE:Dt.append8BitBytes(o,l,u);break;case ge.KANJI:Dt.appendKanjiBytes(o,l);break;default:throw new _t("Invalid mode: "+a)}}static getDigit(o){return o.charCodeAt(0)-48}static isDigit(o){let a=Dt.getDigit(o);return a>=0&&a<=9}static appendNumericBytes(o,a){let l=o.length,u=0;for(;u<l;){let d=Dt.getDigit(o.charAt(u));if(u+2<l){let f=Dt.getDigit(o.charAt(u+1)),p=Dt.getDigit(o.charAt(u+2));a.appendBits(d*100+f*10+p,10),u+=3}else if(u+1<l){let f=Dt.getDigit(o.charAt(u+1));a.appendBits(d*10+f,7),u+=2}else a.appendBits(d,4),u++}}static appendAlphanumericBytes(o,a){let l=o.length,u=0;for(;u<l;){let d=Dt.getAlphanumericCode(o.charCodeAt(u));if(d===-1)throw new _t;if(u+1<l){let f=Dt.getAlphanumericCode(o.charCodeAt(u+1));if(f===-1)throw new _t;a.appendBits(d*45+f,11),u+=2}else a.appendBits(d,6),u++}}static append8BitBytes(o,a,l){let u;try{u=Cn.encode(o,l)}catch(d){throw new _t(d)}for(let d=0,f=u.length;d!==f;d++){let p=u[d];a.appendBits(p,8)}}static appendKanjiBytes(o,a){let l;try{l=Cn.encode(o,G.SJIS)}catch(d){throw new _t(d)}let u=l.length;for(let d=0;d<u;d+=2){let f=l[d]&255,p=l[d+1]&255,y=f<<8&4294967295|p,w=-1;if(y>=33088&&y<=40956?w=y-33088:y>=57408&&y<=60351&&(w=y-49472),w===-1)throw new _t("Invalid byte sequence");let v=(w>>8)*192+(w&255);a.appendBits(v,13)}}static appendECI(o,a){a.appendBits(ge.ECI.getBits(),4),a.appendBits(o.getValue(),8)}}Dt.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),Dt.DEFAULT_BYTE_MODE_ENCODING=G.UTF8.getName();let lA=(()=>{class C{write(a,l,u,d=null){if(a.length===0)throw new m("Found empty contents");if(l<0||u<0)throw new m("Requested dimensions are too small: "+l+"x"+u);let f=vt.L,p=C.QUIET_ZONE_SIZE;d!==null&&(d.get(qt.ERROR_CORRECTION)!==void 0&&(f=vt.fromString(d.get(qt.ERROR_CORRECTION).toString())),d.get(qt.MARGIN)!==void 0&&(p=Number.parseInt(d.get(qt.MARGIN).toString(),10)));let y=Dt.encode(a,f,d);return this.renderResult(y,l,u,p)}writeToDom(a,l,u,d,f=null){typeof a=="string"&&(a=document.querySelector(a));let p=this.write(l,u,d,f);a&&a.appendChild(p)}renderResult(a,l,u,d){let f=a.getMatrix();if(f===null)throw new li;let p=f.getWidth(),y=f.getHeight(),w=p+d*2,v=y+d*2,E=Math.max(l,w),b=Math.max(u,v),S=Math.min(Math.floor(E/w),Math.floor(b/v)),T=Math.floor((E-p*S)/2),M=Math.floor((b-y*S)/2),O=this.createSVGElement(E,b);for(let L=0,$=M;L<y;L++,$+=S)for(let K=0,V=T;K<p;K++,V+=S)if(f.get(K,L)===1){let ze=this.createSvgRectElement(V,$,S,S);O.appendChild(ze)}return O}createSVGElement(a,l){let u=document.createElementNS(C.SVG_NS,"svg");return u.setAttributeNS(null,"height",a.toString()),u.setAttributeNS(null,"width",l.toString()),u}createSvgRectElement(a,l,u,d){let f=document.createElementNS(C.SVG_NS,"rect");return f.setAttributeNS(null,"x",a.toString()),f.setAttributeNS(null,"y",l.toString()),f.setAttributeNS(null,"height",u.toString()),f.setAttributeNS(null,"width",d.toString()),f.setAttributeNS(null,"fill","#000000"),f}}return C.QUIET_ZONE_SIZE=4,C.SVG_NS="http://www.w3.org/2000/svg",C})(),Dw=(()=>{class C{encode(a,l,u,d,f){if(a.length===0)throw new m("Found empty contents");if(l!==ye.QR_CODE)throw new m("Can only encode QR_CODE, but got "+l);if(u<0||d<0)throw new m(`Requested dimensions are too small: ${u}x${d}`);let p=vt.L,y=C.QUIET_ZONE_SIZE;f!==null&&(f.get(qt.ERROR_CORRECTION)!==void 0&&(p=vt.fromString(f.get(qt.ERROR_CORRECTION).toString())),f.get(qt.MARGIN)!==void 0&&(y=Number.parseInt(f.get(qt.MARGIN).toString(),10)));let w=Dt.encode(a,p,f);return C.renderResult(w,u,d,y)}static renderResult(a,l,u,d){let f=a.getMatrix();if(f===null)throw new li;let p=f.getWidth(),y=f.getHeight(),w=p+d*2,v=y+d*2,E=Math.max(l,w),b=Math.max(u,v),S=Math.min(Math.floor(E/w),Math.floor(b/v)),T=Math.floor((E-p*S)/2),M=Math.floor((b-y*S)/2),O=new en(E,b);for(let L=0,$=M;L<y;L++,$+=S)for(let K=0,V=T;K<p;K++,V+=S)f.get(K,L)===1&&O.setRegion(V,$,S,S);return O}}return C.QUIET_ZONE_SIZE=4,C})();class cA{encode(o,a,l,u,d){let f;switch(a){case ye.QR_CODE:f=new Dw;break;default:throw new m("No encoder available for format "+a)}return f.encode(o,a,l,u,d)}}let uA=(()=>{class C extends za{constructor(a,l,u,d,f,p,y,w){if(super(p,y),this.yuvData=a,this.dataWidth=l,this.dataHeight=u,this.left=d,this.top=f,d+p>l||f+y>u)throw new m("Crop rectangle does not fit within image data.");w&&this.reverseHorizontal(p,y)}getRow(a,l){if(a<0||a>=this.getHeight())throw new m("Requested row is outside the image: "+a);let u=this.getWidth();(l==null||l.length<u)&&(l=new Uint8ClampedArray(u));let d=(a+this.top)*this.dataWidth+this.left;return A.arraycopy(this.yuvData,d,l,0,u),l}getMatrix(){let a=this.getWidth(),l=this.getHeight();if(a===this.dataWidth&&l===this.dataHeight)return this.yuvData;let u=a*l,d=new Uint8ClampedArray(u),f=this.top*this.dataWidth+this.left;if(a===this.dataWidth)return A.arraycopy(this.yuvData,f,d,0,u),d;for(let p=0;p<l;p++){let y=p*a;A.arraycopy(this.yuvData,f,d,y,a),f+=this.dataWidth}return d}isCropSupported(){return!0}crop(a,l,u,d){return new C(this.yuvData,this.dataWidth,this.dataHeight,this.left+a,this.top+l,u,d,!1)}renderThumbnail(){let a=this.getWidth()/C.THUMBNAIL_SCALE_FACTOR,l=this.getHeight()/C.THUMBNAIL_SCALE_FACTOR,u=new Int32Array(a*l),d=this.yuvData,f=this.top*this.dataWidth+this.left;for(let p=0;p<l;p++){let y=p*a;for(let w=0;w<a;w++){let v=d[f+w*C.THUMBNAIL_SCALE_FACTOR]&255;u[y+w]=4278190080|v*65793}f+=this.dataWidth*C.THUMBNAIL_SCALE_FACTOR}return u}getThumbnailWidth(){return this.getWidth()/C.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/C.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(a,l){let u=this.yuvData;for(let d=0,f=this.top*this.dataWidth+this.left;d<l;d++,f+=this.dataWidth){let p=f+a/2;for(let y=f,w=f+a-1;y<p;y++,w--){let v=u[y];u[y]=u[w],u[w]=v}}}invert(){return new Bi(this)}}return C.THUMBNAIL_SCALE_FACTOR=2,C})();class Hh extends za{constructor(o,a,l,u,d,f,p){if(super(a,l),this.dataWidth=u,this.dataHeight=d,this.left=f,this.top=p,o.BYTES_PER_ELEMENT===4){let y=a*l,w=new Uint8ClampedArray(y);for(let v=0;v<y;v++){let E=o[v],b=E>>16&255,S=E>>7&510,T=E&255;w[v]=(b+S+T)/4&255}this.luminances=w}else this.luminances=o;if(u===void 0&&(this.dataWidth=a),d===void 0&&(this.dataHeight=l),f===void 0&&(this.left=0),p===void 0&&(this.top=0),this.left+a>this.dataWidth||this.top+l>this.dataHeight)throw new m("Crop rectangle does not fit within image data.")}getRow(o,a){if(o<0||o>=this.getHeight())throw new m("Requested row is outside the image: "+o);let l=this.getWidth();(a==null||a.length<l)&&(a=new Uint8ClampedArray(l));let u=(o+this.top)*this.dataWidth+this.left;return A.arraycopy(this.luminances,u,a,0,l),a}getMatrix(){let o=this.getWidth(),a=this.getHeight();if(o===this.dataWidth&&a===this.dataHeight)return this.luminances;let l=o*a,u=new Uint8ClampedArray(l),d=this.top*this.dataWidth+this.left;if(o===this.dataWidth)return A.arraycopy(this.luminances,d,u,0,l),u;for(let f=0;f<a;f++){let p=f*o;A.arraycopy(this.luminances,d,u,p,o),d+=this.dataWidth}return u}isCropSupported(){return!0}crop(o,a,l,u){return new Hh(this.luminances,l,u,this.dataWidth,this.dataHeight,this.left+o,this.top+a)}invert(){return new Bi(this)}}class Sw extends G{static forName(o){return this.getCharacterSetECIByName(o)}}class zh{}zh.ISO_8859_1=G.ISO8859_1;class Aw{isCompact(){return this.compact}setCompact(o){this.compact=o}getSize(){return this.size}setSize(o){this.size=o}getLayers(){return this.layers}setLayers(o){this.layers=o}getCodeWords(){return this.codeWords}setCodeWords(o){this.codeWords=o}getMatrix(){return this.matrix}setMatrix(o){this.matrix=o}}class Tw{static singletonList(o){return[o]}static min(o,a){return o.sort(a)[0]}}class dA{constructor(o){this.previous=o}getPrevious(){return this.previous}}class ws extends dA{constructor(o,a,l){super(o),this.value=a,this.bitCount=l}appendTo(o,a){o.appendBits(this.value,this.bitCount)}add(o,a){return new ws(this,o,a)}addBinaryShift(o,a){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new ws(this,o,a)}toString(){let o=this.value&(1<<this.bitCount)-1;return o|=1<<this.bitCount,"<"+W.toBinaryString(o|1<<this.bitCount).substring(1)+">"}}class Wh extends ws{constructor(o,a,l){super(o,0,0),this.binaryShiftStart=a,this.binaryShiftByteCount=l}appendTo(o,a){for(let l=0;l<this.binaryShiftByteCount;l++)(l===0||l===31&&this.binaryShiftByteCount<=62)&&(o.appendBits(31,5),this.binaryShiftByteCount>62?o.appendBits(this.binaryShiftByteCount-31,16):l===0?o.appendBits(Math.min(this.binaryShiftByteCount,31),5):o.appendBits(this.binaryShiftByteCount-31,5)),o.appendBits(a[this.binaryShiftStart+l],8)}addBinaryShift(o,a){return new Wh(this,o,a)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function fA(C,o,a){return new Wh(C,o,a)}function el(C,o,a){return new ws(C,o,a)}let hA=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],$i=0,au=1,or=2,Mw=3,Hr=4,pA=new ws(null,0,0),Gh=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function gA(C){for(let o of C)q.fill(o,-1);return C[$i][Hr]=0,C[au][Hr]=0,C[au][$i]=28,C[Mw][Hr]=0,C[or][Hr]=0,C[or][$i]=15,C}let Nw=gA(q.createInt32Array(6,6));class zr{constructor(o,a,l,u){this.token=o,this.mode=a,this.binaryShiftByteCount=l,this.bitCount=u}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(o,a){let l=this.bitCount,u=this.token;if(o!==this.mode){let f=Gh[this.mode][o];u=el(u,f&65535,f>>16),l+=f>>16}let d=o===or?4:5;return u=el(u,a,d),new zr(u,o,0,l+d)}shiftAndAppend(o,a){let l=this.token,u=this.mode===or?4:5;return l=el(l,Nw[this.mode][o],u),l=el(l,a,5),new zr(l,this.mode,0,this.bitCount+u+5)}addBinaryShiftChar(o){let a=this.token,l=this.mode,u=this.bitCount;if(this.mode===Hr||this.mode===or){let p=Gh[l][$i];a=el(a,p&65535,p>>16),u+=p>>16,l=$i}let d=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,f=new zr(a,l,this.binaryShiftByteCount+1,u+d);return f.binaryShiftByteCount===2078&&(f=f.endBinaryShift(o+1)),f}endBinaryShift(o){if(this.binaryShiftByteCount===0)return this;let a=this.token;return a=fA(a,o-this.binaryShiftByteCount,this.binaryShiftByteCount),new zr(a,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(o){let a=this.bitCount+(Gh[this.mode][o.mode]>>16);return this.binaryShiftByteCount<o.binaryShiftByteCount?a+=zr.calculateBinaryShiftCost(o)-zr.calculateBinaryShiftCost(this):this.binaryShiftByteCount>o.binaryShiftByteCount&&o.binaryShiftByteCount>0&&(a+=10),a<=o.bitCount}toBitArray(o){let a=[];for(let u=this.endBinaryShift(o.length).token;u!==null;u=u.getPrevious())a.unshift(u);let l=new le;for(let u of a)u.appendTo(l,o);return l}toString(){return ve.format("%s bits=%d bytes=%d",hA[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(o){return o.binaryShiftByteCount>62?21:o.binaryShiftByteCount>31?20:o.binaryShiftByteCount>0?10:0}}zr.INITIAL_STATE=new zr(pA,$i,0,0);function mA(C){let o=ve.getCharCode(" "),a=ve.getCharCode("."),l=ve.getCharCode(",");C[$i][o]=1;let u=ve.getCharCode("Z"),d=ve.getCharCode("A");for(let b=d;b<=u;b++)C[$i][b]=b-d+2;C[au][o]=1;let f=ve.getCharCode("z"),p=ve.getCharCode("a");for(let b=p;b<=f;b++)C[au][b]=b-p+2;C[or][o]=1;let y=ve.getCharCode("9"),w=ve.getCharCode("0");for(let b=w;b<=y;b++)C[or][b]=b-w+2;C[or][l]=12,C[or][a]=13;let v=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~","\x7F"];for(let b=0;b<v.length;b++)C[Mw][ve.getCharCode(v[b])]=b;let E=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let b=0;b<E.length;b++)ve.getCharCode(E[b])>0&&(C[Hr][ve.getCharCode(E[b])]=b);return C}let $h=mA(q.createInt32Array(5,256));class tl{constructor(o){this.text=o}encode(){let o=ve.getCharCode(" "),a=ve.getCharCode(`
`),l=Tw.singletonList(zr.INITIAL_STATE);for(let d=0;d<this.text.length;d++){let f,p=d+1<this.text.length?this.text[d+1]:0;switch(this.text[d]){case ve.getCharCode("\r"):f=p===a?2:0;break;case ve.getCharCode("."):f=p===o?3:0;break;case ve.getCharCode(","):f=p===o?4:0;break;case ve.getCharCode(":"):f=p===o?5:0;break;default:f=0}f>0?(l=tl.updateStateListForPair(l,d,f),d++):l=this.updateStateListForChar(l,d)}return Tw.min(l,(d,f)=>d.getBitCount()-f.getBitCount()).toBitArray(this.text)}updateStateListForChar(o,a){let l=[];for(let u of o)this.updateStateForChar(u,a,l);return tl.simplifyStates(l)}updateStateForChar(o,a,l){let u=this.text[a]&255,d=$h[o.getMode()][u]>0,f=null;for(let p=0;p<=Hr;p++){let y=$h[p][u];if(y>0){if(f==null&&(f=o.endBinaryShift(a)),!d||p===o.getMode()||p===or){let w=f.latchAndAppend(p,y);l.push(w)}if(!d&&Nw[o.getMode()][p]>=0){let w=f.shiftAndAppend(p,y);l.push(w)}}}if(o.getBinaryShiftByteCount()>0||$h[o.getMode()][u]===0){let p=o.addBinaryShiftChar(a);l.push(p)}}static updateStateListForPair(o,a,l){let u=[];for(let d of o)this.updateStateForPair(d,a,l,u);return this.simplifyStates(u)}static updateStateForPair(o,a,l,u){let d=o.endBinaryShift(a);if(u.push(d.latchAndAppend(Hr,l)),o.getMode()!==Hr&&u.push(d.shiftAndAppend(Hr,l)),l===3||l===4){let f=d.latchAndAppend(or,16-l).latchAndAppend(or,1);u.push(f)}if(o.getBinaryShiftByteCount()>0){let f=o.addBinaryShiftChar(a).addBinaryShiftChar(a+1);u.push(f)}}static simplifyStates(o){let a=[];for(let l of o){let u=!0;for(let d of a){if(d.isBetterThanOrEqualTo(l)){u=!1;break}l.isBetterThanOrEqualTo(d)&&(a=a.filter(f=>f!==d))}u&&a.push(l)}return a}}class et{constructor(){}static encodeBytes(o){return et.encode(o,et.DEFAULT_EC_PERCENT,et.DEFAULT_AZTEC_LAYERS)}static encode(o,a,l){let u=new tl(o).encode(),d=W.truncDivision(u.getSize()*a,100)+11,f=u.getSize()+d,p,y,w,v,E;if(l!==et.DEFAULT_AZTEC_LAYERS){if(p=l<0,y=Math.abs(l),y>(p?et.MAX_NB_BITS_COMPACT:et.MAX_NB_BITS))throw new m(ve.format("Illegal value %s for layers",l));w=et.totalBitsInLayer(y,p),v=et.WORD_SIZE[y];let V=w-w%v;if(E=et.stuffBits(u,v),E.getSize()+d>V)throw new m("Data to large for user specified layer");if(p&&E.getSize()>v*64)throw new m("Data to large for user specified layer")}else{v=0,E=null;for(let V=0;;V++){if(V>et.MAX_NB_BITS)throw new m("Data too large for an Aztec code");if(p=V<=3,y=p?V+1:V,w=et.totalBitsInLayer(y,p),f>w)continue;(E==null||v!==et.WORD_SIZE[y])&&(v=et.WORD_SIZE[y],E=et.stuffBits(u,v));let ze=w-w%v;if(!(p&&E.getSize()>v*64)&&E.getSize()+d<=ze)break}}let b=et.generateCheckWords(E,w,v),S=E.getSize()/v,T=et.generateModeMessage(p,y,S),M=(p?11:14)+y*4,O=new Int32Array(M),L;if(p){L=M;for(let V=0;V<O.length;V++)O[V]=V}else{L=M+1+2*W.truncDivision(W.truncDivision(M,2)-1,15);let V=W.truncDivision(M,2),ze=W.truncDivision(L,2);for(let De=0;De<V;De++){let Vn=De+W.truncDivision(De,15);O[V-De-1]=ze-Vn-1,O[V+De]=ze+Vn+1}}let $=new en(L);for(let V=0,ze=0;V<y;V++){let De=(y-V)*4+(p?9:12);for(let Vn=0;Vn<De;Vn++){let Ir=Vn*2;for(let jn=0;jn<2;jn++)b.get(ze+Ir+jn)&&$.set(O[V*2+jn],O[V*2+Vn]),b.get(ze+De*2+Ir+jn)&&$.set(O[V*2+Vn],O[M-1-V*2-jn]),b.get(ze+De*4+Ir+jn)&&$.set(O[M-1-V*2-jn],O[M-1-V*2-Vn]),b.get(ze+De*6+Ir+jn)&&$.set(O[M-1-V*2-Vn],O[V*2+jn])}ze+=De*8}if(et.drawModeMessage($,p,L,T),p)et.drawBullsEye($,W.truncDivision(L,2),5);else{et.drawBullsEye($,W.truncDivision(L,2),7);for(let V=0,ze=0;V<W.truncDivision(M,2)-1;V+=15,ze+=16)for(let De=W.truncDivision(L,2)&1;De<L;De+=2)$.set(W.truncDivision(L,2)-ze,De),$.set(W.truncDivision(L,2)+ze,De),$.set(De,W.truncDivision(L,2)-ze),$.set(De,W.truncDivision(L,2)+ze)}let K=new Aw;return K.setCompact(p),K.setSize(L),K.setLayers(y),K.setCodeWords(S),K.setMatrix($),K}static drawBullsEye(o,a,l){for(let u=0;u<l;u+=2)for(let d=a-u;d<=a+u;d++)o.set(d,a-u),o.set(d,a+u),o.set(a-u,d),o.set(a+u,d);o.set(a-l,a-l),o.set(a-l+1,a-l),o.set(a-l,a-l+1),o.set(a+l,a-l),o.set(a+l,a-l+1),o.set(a+l,a+l-1)}static generateModeMessage(o,a,l){let u=new le;return o?(u.appendBits(a-1,2),u.appendBits(l-1,6),u=et.generateCheckWords(u,28,4)):(u.appendBits(a-1,5),u.appendBits(l-1,11),u=et.generateCheckWords(u,40,4)),u}static drawModeMessage(o,a,l,u){let d=W.truncDivision(l,2);if(a)for(let f=0;f<7;f++){let p=d-3+f;u.get(f)&&o.set(p,d-5),u.get(f+7)&&o.set(d+5,p),u.get(20-f)&&o.set(p,d+5),u.get(27-f)&&o.set(d-5,p)}else for(let f=0;f<10;f++){let p=d-5+f+W.truncDivision(f,5);u.get(f)&&o.set(p,d-7),u.get(f+10)&&o.set(d+7,p),u.get(29-f)&&o.set(p,d+7),u.get(39-f)&&o.set(d-7,p)}}static generateCheckWords(o,a,l){let u=o.getSize()/l,d=new Uh(et.getGF(l)),f=W.truncDivision(a,l),p=et.bitsToWords(o,l,f);d.encode(p,f-u);let y=a%l,w=new le;w.appendBits(0,y);for(let v of Array.from(p))w.appendBits(v,l);return w}static bitsToWords(o,a,l){let u=new Int32Array(l),d,f;for(d=0,f=o.getSize()/a;d<f;d++){let p=0;for(let y=0;y<a;y++)p|=o.get(d*a+y)?1<<a-y-1:0;u[d]=p}return u}static getGF(o){switch(o){case 4:return it.AZTEC_PARAM;case 6:return it.AZTEC_DATA_6;case 8:return it.AZTEC_DATA_8;case 10:return it.AZTEC_DATA_10;case 12:return it.AZTEC_DATA_12;default:throw new m("Unsupported word size "+o)}}static stuffBits(o,a){let l=new le,u=o.getSize(),d=(1<<a)-2;for(let f=0;f<u;f+=a){let p=0;for(let y=0;y<a;y++)(f+y>=u||o.get(f+y))&&(p|=1<<a-1-y);(p&d)===d?(l.appendBits(p&d,a),f--):p&d?l.appendBits(p,a):(l.appendBits(p|1,a),f--)}return l}static totalBitsInLayer(o,a){return((a?88:112)+16*o)*o}}et.DEFAULT_EC_PERCENT=33,et.DEFAULT_AZTEC_LAYERS=0,et.MAX_NB_BITS=32,et.MAX_NB_BITS_COMPACT=4,et.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class lu{encode(o,a,l,u){return this.encodeWithHints(o,a,l,u,null)}encodeWithHints(o,a,l,u,d){let f=zh.ISO_8859_1,p=et.DEFAULT_EC_PERCENT,y=et.DEFAULT_AZTEC_LAYERS;return d!=null&&(d.has(qt.CHARACTER_SET)&&(f=Sw.forName(d.get(qt.CHARACTER_SET).toString())),d.has(qt.ERROR_CORRECTION)&&(p=W.parseInt(d.get(qt.ERROR_CORRECTION).toString())),d.has(qt.AZTEC_LAYERS)&&(y=W.parseInt(d.get(qt.AZTEC_LAYERS).toString()))),lu.encodeLayers(o,a,l,u,f,p,y)}static encodeLayers(o,a,l,u,d,f,p){if(a!==ye.AZTEC)throw new m("Can only encode AZTEC, but got "+a);let y=et.encode(ve.getBytes(o,d),f,p);return lu.renderResult(y,l,u)}static renderResult(o,a,l){let u=o.getMatrix();if(u==null)throw new li;let d=u.getWidth(),f=u.getHeight(),p=Math.max(a,d),y=Math.max(l,f),w=Math.min(p/d,y/f),v=(p-d*w)/2,E=(y-f*w)/2,b=new en(p,y);for(let S=0,T=E;S<f;S++,T+=w)for(let M=0,O=v;M<d;M++,O+=w)u.get(M,S)&&b.setRegion(O,T,w,w);return b}}e.AbstractExpandedDecoder=Nh,e.ArgumentException=g,e.ArithmeticException=bh,e.AztecCode=Aw,e.AztecCodeReader=Kc,e.AztecCodeWriter=lu,e.AztecDecoder=Ih,e.AztecDetector=uw,e.AztecDetectorResult=lw,e.AztecEncoder=et,e.AztecHighLevelEncoder=tl,e.AztecPoint=Nn,e.BarcodeFormat=ye,e.Binarizer=I,e.BinaryBitmap=_,e.BitArray=le,e.BitMatrix=en,e.BitSource=kh,e.BrowserAztecCodeReader=O2,e.BrowserBarcodeReader=H2,e.BrowserCodeReader=Eo,e.BrowserDatamatrixCodeReader=W2,e.BrowserMultiFormatReader=iA,e.BrowserPDF417Reader=oA,e.BrowserQRCodeReader=sA,e.BrowserQRCodeSvgWriter=lA,e.CharacterSetECI=G,e.ChecksumException=x,e.Code128Reader=Z,e.Code39Reader=Sh,e.DataMatrixDecodedBitStreamParser=zi,e.DataMatrixReader=nu,e.DecodeHintType=me,e.DecoderResult=Wa,e.DefaultGridSampler=cw,e.DetectorResult=Qc,e.EAN13Reader=Jc,e.EncodeHintType=qt,e.Exception=h,e.FormatException=z,e.GenericGF=it,e.GenericGFPoly=Fn,e.GlobalHistogramBinarizer=tn,e.GridSampler=Dh,e.GridSamplerInstance=ji,e.HTMLCanvasElementLuminanceSource=Vi,e.HybridBinarizer=Re,e.ITFReader=mt,e.IllegalArgumentException=m,e.IllegalStateException=li,e.InvertedLuminanceSource=Bi,e.LuminanceSource=za,e.MathUtils=Je,e.MultiFormatOneDReader=ms,e.MultiFormatReader=bw,e.MultiFormatWriter=cA,e.NotFoundException=j,e.OneDReader=Ut,e.PDF417DecodedBitStreamParser=F,e.PDF417DecoderErrorCorrection=ww,e.PDF417Reader=un,e.PDF417ResultMetadata=_w,e.PerspectiveTransform=vr,e.PlanarYUVLuminanceSource=uA,e.QRCodeByteMatrix=ou,e.QRCodeDataMask=ir,e.QRCodeDecodedBitStreamParser=mw,e.QRCodeDecoderErrorCorrectionLevel=vt,e.QRCodeDecoderFormatInformation=_n,e.QRCodeEncoder=Dt,e.QRCodeEncoderQRCode=su,e.QRCodeMaskUtil=ys,e.QRCodeMatrixUtil=we,e.QRCodeMode=ge,e.QRCodeReader=Wi,e.QRCodeVersion=de,e.QRCodeWriter=Dw,e.RGBLuminanceSource=Hh,e.RSS14Reader=Ot,e.RSSExpandedReader=H,e.ReaderException=jh,e.ReedSolomonDecoder=qa,e.ReedSolomonEncoder=Uh,e.ReedSolomonException=$a,e.Result=Mn,e.ResultMetadataType=nn,e.ResultPoint=ce,e.StringUtils=ve,e.UnsupportedOperationException=Zn,e.VideoInputDevice=ow,e.WhiteRectangleDetector=Xc,e.WriterException=_t,e.ZXingArrays=q,e.ZXingCharset=Sw,e.ZXingInteger=W,e.ZXingStandardCharsets=zh,e.ZXingStringBuilder=ht,e.ZXingStringEncoding=Cn,e.ZXingSystem=A,e.createAbstractExpandedDecoder=gw,Object.defineProperty(e,"__esModule",{value:!0})})});function Lw(e,t){return Object.is(e,t)}var Zt=null,cu=!1,uu=1,ci=Symbol("SIGNAL");function $e(e){let t=Zt;return Zt=e,t}function Fw(){return Zt}var rl={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Qh(e){if(cu)throw new Error("");if(Zt===null)return;Zt.consumerOnSignalRead(e);let t=Zt.nextProducerIndex++;if(pu(Zt),t<Zt.producerNode.length&&Zt.producerNode[t]!==e&&nl(Zt)){let n=Zt.producerNode[t];hu(n,Zt.producerIndexOfThis[t])}Zt.producerNode[t]!==e&&(Zt.producerNode[t]=e,Zt.producerIndexOfThis[t]=nl(Zt)?Uw(e,Zt,t):0),Zt.producerLastReadVersion[t]=e.version}function SA(){uu++}function Bw(e){if(!(nl(e)&&!e.dirty)&&!(!e.dirty&&e.lastCleanEpoch===uu)){if(!e.producerMustRecompute(e)&&!Kh(e)){e.dirty=!1,e.lastCleanEpoch=uu;return}e.producerRecomputeValue(e),e.dirty=!1,e.lastCleanEpoch=uu}}function Vw(e){if(e.liveConsumerNode===void 0)return;let t=cu;cu=!0;try{for(let n of e.liveConsumerNode)n.dirty||AA(n)}finally{cu=t}}function jw(){return Zt?.consumerAllowSignalWrites!==!1}function AA(e){e.dirty=!0,Vw(e),e.consumerMarkedDirty?.(e)}function fu(e){return e&&(e.nextProducerIndex=0),$e(e)}function Xh(e,t){if($e(t),!(!e||e.producerNode===void 0||e.producerIndexOfThis===void 0||e.producerLastReadVersion===void 0)){if(nl(e))for(let n=e.nextProducerIndex;n<e.producerNode.length;n++)hu(e.producerNode[n],e.producerIndexOfThis[n]);for(;e.producerNode.length>e.nextProducerIndex;)e.producerNode.pop(),e.producerLastReadVersion.pop(),e.producerIndexOfThis.pop()}}function Kh(e){pu(e);for(let t=0;t<e.producerNode.length;t++){let n=e.producerNode[t],r=e.producerLastReadVersion[t];if(r!==n.version||(Bw(n),r!==n.version))return!0}return!1}function Jh(e){if(pu(e),nl(e))for(let t=0;t<e.producerNode.length;t++)hu(e.producerNode[t],e.producerIndexOfThis[t]);e.producerNode.length=e.producerLastReadVersion.length=e.producerIndexOfThis.length=0,e.liveConsumerNode&&(e.liveConsumerNode.length=e.liveConsumerIndexOfThis.length=0)}function Uw(e,t,n){if(Hw(e),e.liveConsumerNode.length===0&&zw(e))for(let r=0;r<e.producerNode.length;r++)e.producerIndexOfThis[r]=Uw(e.producerNode[r],e,r);return e.liveConsumerIndexOfThis.push(n),e.liveConsumerNode.push(t)-1}function hu(e,t){if(Hw(e),e.liveConsumerNode.length===1&&zw(e))for(let r=0;r<e.producerNode.length;r++)hu(e.producerNode[r],e.producerIndexOfThis[r]);let n=e.liveConsumerNode.length-1;if(e.liveConsumerNode[t]=e.liveConsumerNode[n],e.liveConsumerIndexOfThis[t]=e.liveConsumerIndexOfThis[n],e.liveConsumerNode.length--,e.liveConsumerIndexOfThis.length--,t<e.liveConsumerNode.length){let r=e.liveConsumerIndexOfThis[t],i=e.liveConsumerNode[t];pu(i),i.producerIndexOfThis[r]=t}}function nl(e){return e.consumerIsAlwaysLive||(e?.liveConsumerNode?.length??0)>0}function pu(e){e.producerNode??=[],e.producerIndexOfThis??=[],e.producerLastReadVersion??=[]}function Hw(e){e.liveConsumerNode??=[],e.liveConsumerIndexOfThis??=[]}function zw(e){return e.producerNode!==void 0}function Ww(e){let t=Object.create(TA);t.computation=e;let n=()=>{if(Bw(t),Qh(t),t.value===du)throw t.error;return t.value};return n[ci]=t,n}var Yh=Symbol("UNSET"),Zh=Symbol("COMPUTING"),du=Symbol("ERRORED"),TA=Pe(J({},rl),{value:Yh,dirty:!0,error:null,equal:Lw,producerMustRecompute(e){return e.value===Yh||e.value===Zh},producerRecomputeValue(e){if(e.value===Zh)throw new Error("Detected cycle in computations.");let t=e.value;e.value=Zh;let n=fu(e),r;try{r=e.computation()}catch(i){r=du,e.error=i}finally{Xh(e,n)}if(t!==Yh&&t!==du&&r!==du&&e.equal(t,r)){e.value=t;return}e.value=r,e.version++}});function MA(){throw new Error}var Gw=MA;function $w(){Gw()}function qw(e){Gw=e}var NA=null;function Yw(e){let t=Object.create(Qw);t.value=e;let n=()=>(Qh(t),t.value);return n[ci]=t,n}function ep(e,t){jw()||$w(),e.equal(e.value,t)||(e.value=t,RA(e))}function Zw(e,t){jw()||$w(),ep(e,t(e.value))}var Qw=Pe(J({},rl),{equal:Lw,value:void 0});function RA(e){e.version++,SA(),Vw(e),NA?.()}function Ie(e){return typeof e=="function"}function _s(e){let n=e(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var gu=_s(e=>function(n){e(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Ao(e,t){if(e){let n=e.indexOf(t);0<=n&&e.splice(n,1)}}var Pt=class e{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let s of n)s.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(Ie(r))try{r()}catch(s){t=s instanceof gu?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{Xw(s)}catch(c){t=t??[],c instanceof gu?t=[...t,...c.errors]:t.push(c)}}if(t)throw new gu(t)}}add(t){var n;if(t&&t!==this)if(this.closed)Xw(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(t)}}_hasParent(t){let{_parentage:n}=this;return n===t||Array.isArray(n)&&n.includes(t)}_addParent(t){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t}_removeParent(t){let{_parentage:n}=this;n===t?this._parentage=null:Array.isArray(n)&&Ao(n,t)}remove(t){let{_finalizers:n}=this;n&&Ao(n,t),t instanceof e&&t._removeParent(this)}};Pt.EMPTY=(()=>{let e=new Pt;return e.closed=!0,e})();var tp=Pt.EMPTY;function mu(e){return e instanceof Pt||e&&"closed"in e&&Ie(e.remove)&&Ie(e.add)&&Ie(e.unsubscribe)}function Xw(e){Ie(e)?e():e.unsubscribe()}var Dr={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var xs={setTimeout(e,t,...n){let{delegate:r}=xs;return r?.setTimeout?r.setTimeout(e,t,...n):setTimeout(e,t,...n)},clearTimeout(e){let{delegate:t}=xs;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0};function yu(e){xs.setTimeout(()=>{let{onUnhandledError:t}=Dr;if(t)t(e);else throw e})}function il(){}var Kw=np("C",void 0,void 0);function Jw(e){return np("E",void 0,e)}function eC(e){return np("N",e,void 0)}function np(e,t,n){return{kind:e,value:t,error:n}}var To=null;function Es(e){if(Dr.useDeprecatedSynchronousErrorHandling){let t=!To;if(t&&(To={errorThrown:!1,error:null}),e(),t){let{errorThrown:n,error:r}=To;if(To=null,n)throw r}}else e()}function tC(e){Dr.useDeprecatedSynchronousErrorHandling&&To&&(To.errorThrown=!0,To.error=e)}var Mo=class extends Pt{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,mu(t)&&t.add(this)):this.destination=kA}static create(t,n,r){return new bs(t,n,r)}next(t){this.isStopped?ip(eC(t),this):this._next(t)}error(t){this.isStopped?ip(Jw(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?ip(Kw,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},OA=Function.prototype.bind;function rp(e,t){return OA.call(e,t)}var op=class{constructor(t){this.partialObserver=t}next(t){let{partialObserver:n}=this;if(n.next)try{n.next(t)}catch(r){wu(r)}}error(t){let{partialObserver:n}=this;if(n.error)try{n.error(t)}catch(r){wu(r)}else wu(t)}complete(){let{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(n){wu(n)}}},bs=class extends Mo{constructor(t,n,r){super();let i;if(Ie(t)||!t)i={next:t??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&Dr.useDeprecatedNextContext?(s=Object.create(t),s.unsubscribe=()=>this.unsubscribe(),i={next:t.next&&rp(t.next,s),error:t.error&&rp(t.error,s),complete:t.complete&&rp(t.complete,s)}):i=t}this.destination=new op(i)}};function wu(e){Dr.useDeprecatedSynchronousErrorHandling?tC(e):yu(e)}function PA(e){throw e}function ip(e,t){let{onStoppedNotification:n}=Dr;n&&xs.setTimeout(()=>n(e,t))}var kA={closed:!0,next:il,error:PA,complete:il};var Is=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Xn(e){return e}function sp(...e){return ap(e)}function ap(e){return e.length===0?Xn:e.length===1?e[0]:function(n){return e.reduce((r,i)=>i(r),n)}}var Be=(()=>{class e{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new e;return r.source=this,r.operator=n,r}subscribe(n,r,i){let s=FA(n)?n:new bs(n,r,i);return Es(()=>{let{operator:c,source:h}=this;s.add(c?c.call(s,h):h?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=nC(r),new r((i,s)=>{let c=new bs({next:h=>{try{n(h)}catch(g){s(g),c.unsubscribe()}},error:s,complete:i});this.subscribe(c)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Is](){return this}pipe(...n){return ap(n)(this)}toPromise(n){return n=nC(n),new n((r,i)=>{let s;this.subscribe(c=>s=c,c=>i(c),()=>r(s))})}}return e.create=t=>new e(t),e})();function nC(e){var t;return(t=e??Dr.Promise)!==null&&t!==void 0?t:Promise}function LA(e){return e&&Ie(e.next)&&Ie(e.error)&&Ie(e.complete)}function FA(e){return e&&e instanceof Mo||LA(e)&&mu(e)}function lp(e){return Ie(e?.lift)}function Qe(e){return t=>{if(lp(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ye(e,t,n,r,i){return new cp(e,t,n,r,i)}var cp=class extends Mo{constructor(t,n,r,i,s,c){super(t),this.onFinalize=s,this.shouldUnsubscribe=c,this._next=n?function(h){try{n(h)}catch(g){t.error(g)}}:super._next,this._error=i?function(h){try{i(h)}catch(g){t.error(g)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(h){t.error(h)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((t=this.onFinalize)===null||t===void 0||t.call(this))}}};function Ds(){return Qe((e,t)=>{let n=null;e._refCount++;let r=Ye(t,void 0,void 0,void 0,()=>{if(!e||e._refCount<=0||0<--e._refCount){n=null;return}let i=e._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),t.unsubscribe()});e.subscribe(r),r.closed||(n=e.connect())})}var Ss=class extends Be{constructor(t,n){super(),this.source=t,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,lp(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){let t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new Pt;let n=this.getSubject();t.add(this.source.subscribe(Ye(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),t.closed&&(this._connection=null,t=Pt.EMPTY)}return t}refCount(){return Ds()(this)}};var rC=_s(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var fn=(()=>{class e extends Be{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Cu(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new rC}next(n){Es(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Es(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Es(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:s}=this;return r||i?tp:(this.currentObservers=null,s.push(n),new Pt(()=>{this.currentObservers=null,Ao(s,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){let n=new Be;return n.source=this,n}}return e.create=(t,n)=>new Cu(t,n),e})(),Cu=class extends fn{constructor(t,n){super(),this.destination=t,this.source=n}next(t){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,t)}error(t){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,t)}complete(){var t,n;(n=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||n===void 0||n.call(t)}_subscribe(t){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(t))!==null&&r!==void 0?r:tp}};var hn=class extends fn{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){let n=super._subscribe(t);return!n.closed&&t.next(this._value),n}getValue(){let{hasError:t,thrownError:n,_value:r}=this;if(t)throw n;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}};var up={now(){return(up.delegate||Date).now()},delegate:void 0};var vu=class extends Pt{constructor(t,n){super()}schedule(t,n=0){return this}};var ol={setInterval(e,t,...n){let{delegate:r}=ol;return r?.setInterval?r.setInterval(e,t,...n):setInterval(e,t,...n)},clearInterval(e){let{delegate:t}=ol;return(t?.clearInterval||clearInterval)(e)},delegate:void 0};var _u=class extends vu{constructor(t,n){super(t,n),this.scheduler=t,this.work=n,this.pending=!1}schedule(t,n=0){var r;if(this.closed)return this;this.state=t;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,n),this}requestAsyncId(t,n,r=0){return ol.setInterval(t.flush.bind(t,this),r)}recycleAsyncId(t,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&ol.clearInterval(n)}execute(t,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(t,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,n){let r=!1,i;try{this.work(t)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:t,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Ao(r,this),t!=null&&(this.id=this.recycleAsyncId(n,t,null)),this.delay=null,super.unsubscribe()}}};var As=class e{constructor(t,n=e.now){this.schedulerActionCtor=t,this.now=n}schedule(t,n=0,r){return new this.schedulerActionCtor(this,t).schedule(r,n)}};As.now=up.now;var xu=class extends As{constructor(t,n=As.now){super(t,n),this.actions=[],this._active=!1}flush(t){let{actions:n}=this;if(this._active){n.push(t);return}let r;this._active=!0;do if(r=t.execute(t.state,t.delay))break;while(t=n.shift());if(this._active=!1,r){for(;t=n.shift();)t.unsubscribe();throw r}}};var BA=new xu(_u),iC=BA;var Kn=new Be(e=>e.complete());function Eu(e){return e&&Ie(e.schedule)}function oC(e){return e[e.length-1]}function bu(e){return Ie(oC(e))?e.pop():void 0}function qi(e){return Eu(oC(e))?e.pop():void 0}function aC(e,t,n,r){function i(s){return s instanceof n?s:new n(function(c){c(s)})}return new(n||(n=Promise))(function(s,c){function h(_){try{m(r.next(_))}catch(x){c(x)}}function g(_){try{m(r.throw(_))}catch(x){c(x)}}function m(_){_.done?s(_.value):i(_.value).then(h,g)}m((r=r.apply(e,t||[])).next())})}function sC(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function No(e){return this instanceof No?(this.v=e,this):new No(e)}function lC(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),h("next"),h("throw"),h("return",c),i[Symbol.asyncIterator]=function(){return this},i;function c(A){return function(P){return Promise.resolve(P).then(A,x)}}function h(A,P){r[A]&&(i[A]=function(U){return new Promise(function(q,W){s.push([A,U,q,W])>1||g(A,U)})},P&&(i[A]=P(i[A])))}function g(A,P){try{m(r[A](P))}catch(U){I(s[0][3],U)}}function m(A){A.value instanceof No?Promise.resolve(A.value.v).then(_,x):I(s[0][2],A)}function _(A){g("next",A)}function x(A){g("throw",A)}function I(A,P){A(P),s.shift(),s.length&&g(s[0][0],s[0][1])}}function cC(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof sC=="function"?sC(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=e[s]&&function(c){return new Promise(function(h,g){c=e[s](c),i(h,g,c.done,c.value)})}}function i(s,c,h,g){Promise.resolve(g).then(function(m){s({value:m,done:h})},c)}}var Iu=e=>e&&typeof e.length=="number"&&typeof e!="function";function Du(e){return Ie(e?.then)}function Su(e){return Ie(e[Is])}function Au(e){return Symbol.asyncIterator&&Ie(e?.[Symbol.asyncIterator])}function Tu(e){return new TypeError(`You provided ${e!==null&&typeof e=="object"?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function VA(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Mu=VA();function Nu(e){return Ie(e?.[Mu])}function Ru(e){return lC(this,arguments,function*(){let n=e.getReader();try{for(;;){let{value:r,done:i}=yield No(n.read());if(i)return yield No(void 0);yield yield No(r)}}finally{n.releaseLock()}})}function Ou(e){return Ie(e?.getReader)}function Ht(e){if(e instanceof Be)return e;if(e!=null){if(Su(e))return jA(e);if(Iu(e))return UA(e);if(Du(e))return HA(e);if(Au(e))return uC(e);if(Nu(e))return zA(e);if(Ou(e))return WA(e)}throw Tu(e)}function jA(e){return new Be(t=>{let n=e[Is]();if(Ie(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function UA(e){return new Be(t=>{for(let n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}function HA(e){return new Be(t=>{e.then(n=>{t.closed||(t.next(n),t.complete())},n=>t.error(n)).then(null,yu)})}function zA(e){return new Be(t=>{for(let n of e)if(t.next(n),t.closed)return;t.complete()})}function uC(e){return new Be(t=>{GA(e,t).catch(n=>t.error(n))})}function WA(e){return uC(Ru(e))}function GA(e,t){var n,r,i,s;return aC(this,void 0,void 0,function*(){try{for(n=cC(e);r=yield n.next(),!r.done;){let c=r.value;if(t.next(c),t.closed)return}}catch(c){i={error:c}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}t.complete()})}function Un(e,t,n,r=0,i=!1){let s=t.schedule(function(){n(),i?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(s),!i)return s}function Pu(e,t=0){return Qe((n,r)=>{n.subscribe(Ye(r,i=>Un(r,e,()=>r.next(i),t),()=>Un(r,e,()=>r.complete(),t),i=>Un(r,e,()=>r.error(i),t)))})}function ku(e,t=0){return Qe((n,r)=>{r.add(e.schedule(()=>n.subscribe(r),t))})}function dC(e,t){return Ht(e).pipe(ku(t),Pu(t))}function fC(e,t){return Ht(e).pipe(ku(t),Pu(t))}function hC(e,t){return new Be(n=>{let r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}function pC(e,t){return new Be(n=>{let r;return Un(n,t,()=>{r=e[Mu](),Un(n,t,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(c){n.error(c);return}s?n.complete():n.next(i)},0,!0)}),()=>Ie(r?.return)&&r.return()})}function Lu(e,t){if(!e)throw new Error("Iterable cannot be null");return new Be(n=>{Un(n,t,()=>{let r=e[Symbol.asyncIterator]();Un(n,t,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function gC(e,t){return Lu(Ru(e),t)}function mC(e,t){if(e!=null){if(Su(e))return dC(e,t);if(Iu(e))return hC(e,t);if(Du(e))return fC(e,t);if(Au(e))return Lu(e,t);if(Nu(e))return pC(e,t);if(Ou(e))return gC(e,t)}throw Tu(e)}function xt(e,t){return t?mC(e,t):Ht(e)}function Se(...e){let t=qi(e);return xt(e,t)}function Ts(e,t){let n=Ie(e)?e:()=>e,r=i=>i.error(n());return new Be(t?i=>t.schedule(r,0,i):r)}function dp(e){return!!e&&(e instanceof Be||Ie(e.lift)&&Ie(e.subscribe))}var ui=_s(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"});function yC(e){return e instanceof Date&&!isNaN(e)}function Ve(e,t){return Qe((n,r)=>{let i=0;n.subscribe(Ye(r,s=>{r.next(e.call(t,s,i++))}))})}var{isArray:$A}=Array;function qA(e,t){return $A(t)?e(...t):e(t)}function Fu(e){return Ve(t=>qA(e,t))}var{isArray:YA}=Array,{getPrototypeOf:ZA,prototype:QA,keys:XA}=Object;function Bu(e){if(e.length===1){let t=e[0];if(YA(t))return{args:t,keys:null};if(KA(t)){let n=XA(t);return{args:n.map(r=>t[r]),keys:n}}}return{args:e,keys:null}}function KA(e){return e&&typeof e=="object"&&ZA(e)===QA}function Vu(e,t){return e.reduce((n,r,i)=>(n[r]=t[i],n),{})}function ju(...e){let t=qi(e),n=bu(e),{args:r,keys:i}=Bu(e);if(r.length===0)return xt([],t);let s=new Be(JA(r,t,i?c=>Vu(i,c):Xn));return n?s.pipe(Fu(n)):s}function JA(e,t,n=Xn){return r=>{wC(t,()=>{let{length:i}=e,s=new Array(i),c=i,h=i;for(let g=0;g<i;g++)wC(t,()=>{let m=xt(e[g],t),_=!1;m.subscribe(Ye(r,x=>{s[g]=x,_||(_=!0,h--),h||r.next(n(s.slice()))},()=>{--c||r.complete()}))},r)},r)}}function wC(e,t,n){e?Un(n,e,t):t()}function CC(e,t,n,r,i,s,c,h){let g=[],m=0,_=0,x=!1,I=()=>{x&&!g.length&&!m&&t.complete()},A=U=>m<r?P(U):g.push(U),P=U=>{s&&t.next(U),m++;let q=!1;Ht(n(U,_++)).subscribe(Ye(t,W=>{i?.(W),s?A(W):t.next(W)},()=>{q=!0},void 0,()=>{if(q)try{for(m--;g.length&&m<r;){let W=g.shift();c?Un(t,c,()=>P(W)):P(W)}I()}catch(W){t.error(W)}}))};return e.subscribe(Ye(t,A,()=>{x=!0,I()})),()=>{h?.()}}function Qt(e,t,n=1/0){return Ie(t)?Qt((r,i)=>Ve((s,c)=>t(r,s,i,c))(Ht(e(r,i))),n):(typeof t=="number"&&(n=t),Qe((r,i)=>CC(r,i,e,n)))}function fp(e=1/0){return Qt(Xn,e)}function vC(){return fp(1)}function Ms(...e){return vC()(xt(e,qi(e)))}function Uu(e){return new Be(t=>{Ht(e()).subscribe(t)})}function hp(...e){let t=bu(e),{args:n,keys:r}=Bu(e),i=new Be(s=>{let{length:c}=n;if(!c){s.complete();return}let h=new Array(c),g=c,m=c;for(let _=0;_<c;_++){let x=!1;Ht(n[_]).subscribe(Ye(s,I=>{x||(x=!0,m--),h[_]=I},()=>g--,void 0,()=>{(!g||!x)&&(m||s.next(r?Vu(r,h):h),s.complete())}))}});return t?i.pipe(Fu(t)):i}function pp(e=0,t,n=iC){let r=-1;return t!=null&&(Eu(t)?n=t:r=t),new Be(i=>{let s=yC(e)?+e-n.now():e;s<0&&(s=0);let c=0;return n.schedule(function(){i.closed||(i.next(c++),0<=r?this.schedule(void 0,r):i.complete())},s)})}function Sr(e,t){return Qe((n,r)=>{let i=0;n.subscribe(Ye(r,s=>e.call(t,s,i++)&&r.next(s)))})}function sr(e){return Qe((t,n)=>{let r=null,i=!1,s;r=t.subscribe(Ye(n,void 0,void 0,c=>{s=Ht(e(c,sr(e)(t))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function _C(e,t,n,r,i){return(s,c)=>{let h=n,g=t,m=0;s.subscribe(Ye(c,_=>{let x=m++;g=h?e(g,_,x):(h=!0,_),r&&c.next(g)},i&&(()=>{h&&c.next(g),c.complete()})))}}function Ns(e,t){return Ie(t)?Qt(e,t,1):Qt(e,1)}function Yi(e){return Qe((t,n)=>{let r=!1;t.subscribe(Ye(n,i=>{r=!0,n.next(i)},()=>{r||n.next(e),n.complete()}))})}function di(e){return e<=0?()=>Kn:Qe((t,n)=>{let r=0;t.subscribe(Ye(n,i=>{++r<=e&&(n.next(i),e<=r&&n.complete())}))})}function gp(e){return Ve(()=>e)}function Hu(e=eT){return Qe((t,n)=>{let r=!1;t.subscribe(Ye(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(e())))})}function eT(){return new ui}function sl(e){return Qe((t,n)=>{try{t.subscribe(n)}finally{n.add(e)}})}function Wr(e,t){let n=arguments.length>=2;return r=>r.pipe(e?Sr((i,s)=>e(i,s,r)):Xn,di(1),n?Yi(t):Hu(()=>new ui))}function Rs(e){return e<=0?()=>Kn:Qe((t,n)=>{let r=[];t.subscribe(Ye(n,i=>{r.push(i),e<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function mp(e,t){let n=arguments.length>=2;return r=>r.pipe(e?Sr((i,s)=>e(i,s,r)):Xn,Rs(1),n?Yi(t):Hu(()=>new ui))}function yp(e,t){return Qe(_C(e,t,arguments.length>=2,!0))}function wp(...e){let t=qi(e);return Qe((n,r)=>{(t?Ms(e,n,t):Ms(e,n)).subscribe(r)})}function Ar(e,t){return Qe((n,r)=>{let i=null,s=0,c=!1,h=()=>c&&!i&&r.complete();n.subscribe(Ye(r,g=>{i?.unsubscribe();let m=0,_=s++;Ht(e(g,_)).subscribe(i=Ye(r,x=>r.next(t?t(g,x,_,m++):x),()=>{i=null,h()}))},()=>{c=!0,h()}))})}function Cp(e){return Qe((t,n)=>{Ht(e).subscribe(Ye(n,()=>n.complete(),il)),!n.closed&&t.subscribe(n)})}function pn(e,t,n){let r=Ie(e)||t||n?{next:e,error:t,complete:n}:e;return r?Qe((i,s)=>{var c;(c=r.subscribe)===null||c===void 0||c.call(r);let h=!0;i.subscribe(Ye(s,g=>{var m;(m=r.next)===null||m===void 0||m.call(r,g),s.next(g)},()=>{var g;h=!1,(g=r.complete)===null||g===void 0||g.call(r),s.complete()},g=>{var m;h=!1,(m=r.error)===null||m===void 0||m.call(r,g),s.error(g)},()=>{var g,m;h&&((g=r.unsubscribe)===null||g===void 0||g.call(r)),(m=r.finalize)===null||m===void 0||m.call(r)}))}):Xn}var av="https://g.co/ng/security#xss",he=class extends Error{constructor(t,n){super(jg(t,n)),this.code=t}};function jg(e,t){return`${`NG0${Math.abs(e)}`}${t?": "+t:""}`}function _d(e){return{toString:e}.toString()}var Pp=globalThis;function Ct(e){for(let t in e)if(e[t]===Ct)return t;throw Error("Could not find renamed property on target object.")}function tT(e,t){for(let n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function zn(e){if(typeof e=="string")return e;if(Array.isArray(e))return"["+e.map(zn).join(", ")+"]";if(e==null)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;let t=e.toString();if(t==null)return""+t;let n=t.indexOf(`
`);return n===-1?t:t.substring(0,n)}function kp(e,t){return e==null||e===""?t===null?"":t:t==null||t===""?e:e+" "+t}var nT=Ct({__forward_ref__:Ct});function zo(e){return e.__forward_ref__=zo,e.toString=function(){return zn(this())},e}function Rn(e){return lv(e)?e():e}function lv(e){return typeof e=="function"&&e.hasOwnProperty(nT)&&e.__forward_ref__===zo}function pe(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function yi(e){return{providers:e.providers||[],imports:e.imports||[]}}function xd(e){return xC(e,uv)||xC(e,dv)}function cv(e){return xd(e)!==null}function xC(e,t){return e.hasOwnProperty(t)?e[t]:null}function rT(e){let t=e&&(e[uv]||e[dv]);return t||null}function EC(e){return e&&(e.hasOwnProperty(bC)||e.hasOwnProperty(iT))?e[bC]:null}var uv=Ct({\u0275prov:Ct}),bC=Ct({\u0275inj:Ct}),dv=Ct({ngInjectableDef:Ct}),iT=Ct({ngInjectorDef:Ct}),xe=class{constructor(t,n){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=pe({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function fv(e){return e&&!!e.\u0275providers}var oT=Ct({\u0275cmp:Ct}),sT=Ct({\u0275dir:Ct}),aT=Ct({\u0275pipe:Ct}),lT=Ct({\u0275mod:Ct}),ed=Ct({\u0275fac:Ct}),cl=Ct({__NG_ELEMENT_ID__:Ct}),IC=Ct({__NG_ENV_ID__:Ct});function ul(e){return typeof e=="string"?e:e==null?"":String(e)}function cT(e){return typeof e=="function"?e.name||e.toString():typeof e=="object"&&e!=null&&typeof e.type=="function"?e.type.name||e.type.toString():ul(e)}function uT(e,t){let n=t?`. Dependency path: ${t.join(" > ")} > ${e}`:"";throw new he(-200,e)}function Ug(e,t){throw new he(-201,!1)}var je=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}(je||{}),Lp;function hv(){return Lp}function ar(e){let t=Lp;return Lp=e,t}function pv(e,t,n){let r=xd(e);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&je.Optional)return null;if(t!==void 0)return t;Ug(e,"Injector")}var dT={},dl=dT,fT="__NG_DI_FLAG__",td="ngTempTokenPath",hT="ngTokenPath",pT=/\n/gm,gT="\u0275",DC="__source",Ls;function mT(){return Ls}function Zi(e){let t=Ls;return Ls=e,t}function yT(e,t=je.Default){if(Ls===void 0)throw new he(-203,!1);return Ls===null?pv(e,void 0,t):Ls.get(e,t&je.Optional?null:void 0,t)}function Ue(e,t=je.Default){return(hv()||yT)(Rn(e),t)}function te(e,t=je.Default){return Ue(e,Ed(t))}function Ed(e){return typeof e>"u"||typeof e=="number"?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function Fp(e){let t=[];for(let n=0;n<e.length;n++){let r=Rn(e[n]);if(Array.isArray(r)){if(r.length===0)throw new he(900,!1);let i,s=je.Default;for(let c=0;c<r.length;c++){let h=r[c],g=wT(h);typeof g=="number"?g===-1?i=h.token:s|=g:i=h}t.push(Ue(i,s))}else t.push(Ue(r))}return t}function wT(e){return e[fT]}function CT(e,t,n,r){let i=e[td];throw t[DC]&&i.unshift(t[DC]),e.message=vT(`
`+e.message,i,n,r),e[hT]=i,e[td]=null,e}function vT(e,t,n,r=null){e=e&&e.charAt(0)===`
`&&e.charAt(1)==gT?e.slice(2):e;let i=zn(t);if(Array.isArray(t))i=t.map(zn).join(" -> ");else if(typeof t=="object"){let s=[];for(let c in t)if(t.hasOwnProperty(c)){let h=t[c];s.push(c+":"+(typeof h=="string"?JSON.stringify(h):zn(h)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${e.replace(pT,`
  `)}`}function Bs(e,t){let n=e.hasOwnProperty(ed);return n?e[ed]:null}function _T(e,t,n){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],s=t[r];if(n&&(i=n(i),s=n(s)),s!==i)return!1}return!0}function xT(e){return e.flat(Number.POSITIVE_INFINITY)}function Hg(e,t){e.forEach(n=>Array.isArray(n)?Hg(n,t):t(n))}function gv(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function nd(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function ET(e,t,n,r){let i=e.length;if(i==t)e.push(n,r);else if(i===1)e.push(r,e[0]),e[0]=n;else{for(i--,e.push(e[i-1],e[i]);i>t;){let s=i-2;e[i]=e[s],i--}e[t]=n,e[t+1]=r}}function zg(e,t,n){let r=El(e,t);return r>=0?e[r|1]=n:(r=~r,ET(e,r,t,n)),r}function vp(e,t){let n=El(e,t);if(n>=0)return e[n|1]}function El(e,t){return bT(e,t,1)}function bT(e,t,n){let r=0,i=e.length>>n;for(;i!==r;){let s=r+(i-r>>1),c=e[s<<n];if(t===c)return s<<n;c>t?i=s:r=s+1}return~(i<<n)}var Vs={},Hn=[],js=new xe(""),mv=new xe("",-1),yv=new xe(""),rd=class{get(t,n=dl){if(n===dl){let r=new Error(`NullInjectorError: No provider for ${zn(t)}!`);throw r.name="NullInjectorError",r}return n}},wv=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}(wv||{}),qr=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}(qr||{}),Ki=function(e){return e[e.None=0]="None",e[e.SignalBased=1]="SignalBased",e[e.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",e}(Ki||{});function IT(e,t,n){let r=e.length;for(;;){let i=e.indexOf(t,n);if(i===-1)return i;if(i===0||e.charCodeAt(i-1)<=32){let s=t.length;if(i+s===r||e.charCodeAt(i+s)<=32)return i}n=i+1}}function Bp(e,t,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let s=n[r++],c=n[r++],h=n[r++];e.setAttribute(t,c,h,s)}else{let s=i,c=n[++r];ST(s)?e.setProperty(t,s,c):e.setAttribute(t,s,c),r++}}return r}function DT(e){return e===3||e===4||e===6}function ST(e){return e.charCodeAt(0)===64}function fl(e,t){if(!(t===null||t.length===0))if(e===null||e.length===0)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){let i=t[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?SC(e,n,i,null,t[++r]):SC(e,n,i,null,null))}}return e}function SC(e,t,n,r,i){let s=0,c=e.length;if(t===-1)c=-1;else for(;s<e.length;){let h=e[s++];if(typeof h=="number"){if(h===t){c=-1;break}else if(h>t){c=s-1;break}}}for(;s<e.length;){let h=e[s];if(typeof h=="number")break;if(h===n){if(r===null){i!==null&&(e[s+1]=i);return}else if(r===e[s+1]){e[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}c!==-1&&(e.splice(c,0,t),s=c+1),e.splice(s++,0,n),r!==null&&e.splice(s++,0,r),i!==null&&e.splice(s++,0,i)}var Cv="ng-template";function AT(e,t,n,r){let i=0;if(r){for(;i<t.length&&typeof t[i]=="string";i+=2)if(t[i]==="class"&&IT(t[i+1].toLowerCase(),n,0)!==-1)return!0}else if(Wg(e))return!1;if(i=t.indexOf(1,i),i>-1){let s;for(;++i<t.length&&typeof(s=t[i])=="string";)if(s.toLowerCase()===n)return!0}return!1}function Wg(e){return e.type===4&&e.value!==Cv}function TT(e,t,n){let r=e.type===4&&!n?Cv:e.value;return t===r}function MT(e,t,n){let r=4,i=e.attrs,s=i!==null?OT(i):0,c=!1;for(let h=0;h<t.length;h++){let g=t[h];if(typeof g=="number"){if(!c&&!Tr(r)&&!Tr(g))return!1;if(c&&Tr(g))continue;c=!1,r=g|r&1;continue}if(!c)if(r&4){if(r=2|r&1,g!==""&&!TT(e,g,n)||g===""&&t.length===1){if(Tr(r))return!1;c=!0}}else if(r&8){if(i===null||!AT(e,i,g,n)){if(Tr(r))return!1;c=!0}}else{let m=t[++h],_=NT(g,i,Wg(e),n);if(_===-1){if(Tr(r))return!1;c=!0;continue}if(m!==""){let x;if(_>s?x="":x=i[_+1].toLowerCase(),r&2&&m!==x){if(Tr(r))return!1;c=!0}}}}return Tr(r)||c}function Tr(e){return(e&1)===0}function NT(e,t,n,r){if(t===null)return-1;let i=0;if(r||!n){let s=!1;for(;i<t.length;){let c=t[i];if(c===e)return i;if(c===3||c===6)s=!0;else if(c===1||c===2){let h=t[++i];for(;typeof h=="string";)h=t[++i];continue}else{if(c===4)break;if(c===0){i+=4;continue}}i+=s?1:2}return-1}else return PT(t,e)}function RT(e,t,n=!1){for(let r=0;r<t.length;r++)if(MT(e,t[r],n))return!0;return!1}function OT(e){for(let t=0;t<e.length;t++){let n=e[t];if(DT(n))return t}return e.length}function PT(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){let r=e[n];if(typeof r=="number")return-1;if(r===t)return n;n++}return-1}function AC(e,t){return e?":not("+t.trim()+")":t}function kT(e){let t=e[0],n=1,r=2,i="",s=!1;for(;n<e.length;){let c=e[n];if(typeof c=="string")if(r&2){let h=e[++n];i+="["+c+(h.length>0?'="'+h+'"':"")+"]"}else r&8?i+="."+c:r&4&&(i+=" "+c);else i!==""&&!Tr(c)&&(t+=AC(s,i),i=""),r=c,s=s||!Tr(r);n++}return i!==""&&(t+=AC(s,i)),t}function LT(e){return e.map(kT).join(",")}function FT(e){let t=[],n=[],r=1,i=2;for(;r<e.length;){let s=e[r];if(typeof s=="string")i===2?s!==""&&t.push(s,e[++r]):i===8&&n.push(s);else{if(!Tr(i))break;i=s}r++}return{attrs:t,classes:n}}function oe(e){return _d(()=>{let t=bv(e),n=Pe(J({},t),{decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===wv.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&e.dependencies||null,getStandaloneInjector:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||qr.Emulated,styles:e.styles||Hn,_:null,schemas:e.schemas||null,tView:null,id:""});Iv(n);let r=e.dependencies;return n.directiveDefs=MC(r,!1),n.pipeDefs=MC(r,!0),n.id=jT(n),n})}function BT(e){return Oo(e)||vv(e)}function VT(e){return e!==null}function wi(e){return _d(()=>({type:e.type,bootstrap:e.bootstrap||Hn,declarations:e.declarations||Hn,imports:e.imports||Hn,exports:e.exports||Hn,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function TC(e,t){if(e==null)return Vs;let n={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r],s,c,h=Ki.None;Array.isArray(i)?(h=i[0],s=i[1],c=i[2]??s):(s=i,c=i),t?(n[s]=h!==Ki.None?[r,h]:r,t[s]=c):n[s]=r}return n}function Wn(e){return _d(()=>{let t=bv(e);return Iv(t),t})}function Oo(e){return e[oT]||null}function vv(e){return e[sT]||null}function _v(e){return e[aT]||null}function xv(e){let t=Oo(e)||vv(e)||_v(e);return t!==null?t.standalone:!1}function Ev(e,t){let n=e[lT]||null;if(!n&&t===!0)throw new Error(`Type ${zn(e)} does not have '\u0275mod' property.`);return n}function bv(e){let t={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputTransforms:null,inputConfig:e.inputs||Vs,exportAs:e.exportAs||null,standalone:e.standalone===!0,signals:e.signals===!0,selectors:e.selectors||Hn,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:TC(e.inputs,t),outputs:TC(e.outputs),debugInfo:null}}function Iv(e){e.features?.forEach(t=>t(e))}function MC(e,t){if(!e)return null;let n=t?_v:BT;return()=>(typeof e=="function"?e():e).map(r=>n(r)).filter(VT)}function jT(e){let t=0,n=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,e.consts,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery].join("|");for(let i of n)t=Math.imul(31,t)+i.charCodeAt(0)<<0;return t+=2147483648,"c"+t}function Gg(e){return{\u0275providers:e}}function UT(...e){return{\u0275providers:Dv(!0,e),\u0275fromNgModule:!0}}function Dv(e,...t){let n=[],r=new Set,i,s=c=>{n.push(c)};return Hg(t,c=>{let h=c;Vp(h,s,[],r)&&(i||=[],i.push(h))}),i!==void 0&&Sv(i,s),n}function Sv(e,t){for(let n=0;n<e.length;n++){let{ngModule:r,providers:i}=e[n];$g(i,s=>{t(s,r)})}}function Vp(e,t,n,r){if(e=Rn(e),!e)return!1;let i=null,s=EC(e),c=!s&&Oo(e);if(!s&&!c){let g=e.ngModule;if(s=EC(g),s)i=g;else return!1}else{if(c&&!c.standalone)return!1;i=e}let h=r.has(i);if(c){if(h)return!1;if(r.add(i),c.dependencies){let g=typeof c.dependencies=="function"?c.dependencies():c.dependencies;for(let m of g)Vp(m,t,n,r)}}else if(s){if(s.imports!=null&&!h){r.add(i);let m;try{Hg(s.imports,_=>{Vp(_,t,n,r)&&(m||=[],m.push(_))})}finally{}m!==void 0&&Sv(m,t)}if(!h){let m=Bs(i)||(()=>new i);t({provide:i,useFactory:m,deps:Hn},i),t({provide:yv,useValue:i,multi:!0},i),t({provide:js,useValue:()=>Ue(i),multi:!0},i)}let g=s.providers;if(g!=null&&!h){let m=e;$g(g,_=>{t(_,m)})}}else return!1;return i!==e&&e.providers!==void 0}function $g(e,t){for(let n of e)fv(n)&&(n=n.\u0275providers),Array.isArray(n)?$g(n,t):t(n)}var HT=Ct({provide:String,useValue:Ct});function Av(e){return e!==null&&typeof e=="object"&&HT in e}function zT(e){return!!(e&&e.useExisting)}function WT(e){return!!(e&&e.useFactory)}function Us(e){return typeof e=="function"}function GT(e){return!!e.useClass}var bd=new xe(""),Yu={},$T={},_p;function qg(){return _p===void 0&&(_p=new rd),_p}var cr=class{},hl=class extends cr{get destroyed(){return this._destroyed}constructor(t,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Up(t,c=>this.processProvider(c)),this.records.set(mv,Os(void 0,this)),i.has("environment")&&this.records.set(cr,Os(void 0,this));let s=this.records.get(bd);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(yv,Hn,je.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let t=$e(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),$e(t)}}onDestroy(t){return this.assertNotDestroyed(),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){this.assertNotDestroyed();let n=Zi(this),r=ar(void 0),i;try{return t()}finally{Zi(n),ar(r)}}get(t,n=dl,r=je.Default){if(this.assertNotDestroyed(),t.hasOwnProperty(IC))return t[IC](this);r=Ed(r);let i,s=Zi(this),c=ar(void 0);try{if(!(r&je.SkipSelf)){let g=this.records.get(t);if(g===void 0){let m=XT(t)&&xd(t);m&&this.injectableDefInScope(m)?g=Os(jp(t),Yu):g=null,this.records.set(t,g)}if(g!=null)return this.hydrate(t,g)}let h=r&je.Self?qg():this.parent;return n=r&je.Optional&&n===dl?null:n,h.get(t,n)}catch(h){if(h.name==="NullInjectorError"){if((h[td]=h[td]||[]).unshift(zn(t)),s)throw h;return CT(h,t,"R3InjectorError",this.source)}else throw h}finally{ar(c),Zi(s)}}resolveInjectorInitializers(){let t=$e(null),n=Zi(this),r=ar(void 0),i;try{let s=this.get(js,Hn,je.Self);for(let c of s)c()}finally{Zi(n),ar(r),$e(t)}}toString(){let t=[],n=this.records;for(let r of n.keys())t.push(zn(r));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new he(205,!1)}processProvider(t){t=Rn(t);let n=Us(t)?t:Rn(t&&t.provide),r=YT(t);if(!Us(t)&&t.multi===!0){let i=this.records.get(n);i||(i=Os(void 0,Yu,!0),i.factory=()=>Fp(i.multi),this.records.set(n,i)),n=t,i.multi.push(t)}this.records.set(n,r)}hydrate(t,n){let r=$e(null);try{return n.value===Yu&&(n.value=$T,n.value=n.factory()),typeof n.value=="object"&&n.value&&QT(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{$e(r)}}injectableDefInScope(t){if(!t.providedIn)return!1;let n=Rn(t.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(t){let n=this._onDestroyHooks.indexOf(t);n!==-1&&this._onDestroyHooks.splice(n,1)}};function jp(e){let t=xd(e),n=t!==null?t.factory:Bs(e);if(n!==null)return n;if(e instanceof xe)throw new he(204,!1);if(e instanceof Function)return qT(e);throw new he(204,!1)}function qT(e){if(e.length>0)throw new he(204,!1);let n=rT(e);return n!==null?()=>n.factory(e):()=>new e}function YT(e){if(Av(e))return Os(void 0,e.useValue);{let t=Tv(e);return Os(t,Yu)}}function Tv(e,t,n){let r;if(Us(e)){let i=Rn(e);return Bs(i)||jp(i)}else if(Av(e))r=()=>Rn(e.useValue);else if(WT(e))r=()=>e.useFactory(...Fp(e.deps||[]));else if(zT(e))r=()=>Ue(Rn(e.useExisting));else{let i=Rn(e&&(e.useClass||e.provide));if(ZT(e))r=()=>new i(...Fp(e.deps));else return Bs(i)||jp(i)}return r}function Os(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function ZT(e){return!!e.deps}function QT(e){return e!==null&&typeof e=="object"&&typeof e.ngOnDestroy=="function"}function XT(e){return typeof e=="function"||typeof e=="object"&&e instanceof xe}function Up(e,t){for(let n of e)Array.isArray(n)?Up(n,t):n&&fv(n)?Up(n.\u0275providers,t):t(n)}function Ci(e,t){e instanceof hl&&e.assertNotDestroyed();let n,r=Zi(e),i=ar(void 0);try{return t()}finally{Zi(r),ar(i)}}function KT(){return hv()!==void 0||mT()!=null}function JT(e){return typeof e=="function"}var vi=0,be=1,_e=2,bn=3,Nr=4,Or=5,pl=6,id=7,xn=8,Hs=9,fi=10,zt=11,gl=12,NC=13,Zs=14,Rr=15,Po=16,Ps=17,hi=18,Id=19,Mv=20,Qi=21,xp=22,lr=23,ur=25,Nv=1;var ko=7,od=8,zs=9,En=10,sd=function(e){return e[e.None=0]="None",e[e.HasTransplantedViews=2]="HasTransplantedViews",e}(sd||{});function Xi(e){return Array.isArray(e)&&typeof e[Nv]=="object"}function _i(e){return Array.isArray(e)&&e[Nv]===!0}function Rv(e){return(e.flags&4)!==0}function Dd(e){return e.componentOffset>-1}function Yg(e){return(e.flags&1)===1}function Ji(e){return!!e.template}function Hp(e){return(e[_e]&512)!==0}var zp=class{constructor(t,n,r){this.previousValue=t,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function Ov(e,t,n,r){t!==null?t.applyValueToInputSignal(t,r):e[n]=r}function xi(){return Pv}function Pv(e){return e.type.prototype.ngOnChanges&&(e.setInput=tM),eM}xi.ngInherit=!0;function eM(){let e=Lv(this),t=e?.current;if(t){let n=e.previous;if(n===Vs)e.previous=t;else for(let r in t)n[r]=t[r];e.current=null,this.ngOnChanges(t)}}function tM(e,t,n,r,i){let s=this.declaredInputs[r],c=Lv(e)||nM(e,{previous:Vs,current:null}),h=c.current||(c.current={}),g=c.previous,m=g[s];h[s]=new zp(m&&m.currentValue,n,g===Vs),Ov(e,t,i,n)}var kv="__ngSimpleChanges__";function Lv(e){return e[kv]||null}function nM(e,t){return e[kv]=t}var RC=null;var Gr=function(e,t,n){RC?.(e,t,n)},rM="svg",iM="math";function Yr(e){for(;Array.isArray(e);)e=e[vi];return e}function Fv(e,t){return Yr(t[e])}function dr(e,t){return Yr(t[e.index])}function Zg(e,t){return e.data[t]}function oM(e,t){return e[t]}function no(e,t){let n=t[e];return Xi(n)?n:n[vi]}function sM(e){return(e[_e]&4)===4}function Qg(e){return(e[_e]&128)===128}function aM(e){return _i(e[bn])}function Ws(e,t){return t==null?null:e[t]}function Bv(e){e[Ps]=0}function Vv(e){e[_e]&1024||(e[_e]|=1024,Qg(e)&&Ad(e))}function lM(e,t){for(;e>0;)t=t[Zs],e--;return t}function Sd(e){return!!(e[_e]&9216||e[lr]?.dirty)}function Wp(e){e[fi].changeDetectionScheduler?.notify(8),e[_e]&64&&(e[_e]|=1024),Sd(e)&&Ad(e)}function Ad(e){e[fi].changeDetectionScheduler?.notify(0);let t=Lo(e);for(;t!==null&&!(t[_e]&8192||(t[_e]|=8192,!Qg(t)));)t=Lo(t)}function jv(e,t){if((e[_e]&256)===256)throw new he(911,!1);e[Qi]===null&&(e[Qi]=[]),e[Qi].push(t)}function cM(e,t){if(e[Qi]===null)return;let n=e[Qi].indexOf(t);n!==-1&&e[Qi].splice(n,1)}function Lo(e){let t=e[bn];return _i(t)?t[bn]:t}var He={lFrame:Zv(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Uv=!1;function uM(){return He.lFrame.elementDepthCount}function dM(){He.lFrame.elementDepthCount++}function fM(){He.lFrame.elementDepthCount--}function Hv(){return He.bindingsEnabled}function hM(){return He.skipHydrationRootTNode!==null}function pM(e){return He.skipHydrationRootTNode===e}function gM(){He.skipHydrationRootTNode=null}function tt(){return He.lFrame.lView}function gn(){return He.lFrame.tView}function pt(e){return He.lFrame.contextLView=e,e[xn]}function gt(e){return He.lFrame.contextLView=null,e}function Gn(){let e=zv();for(;e!==null&&e.type===64;)e=e.parent;return e}function zv(){return He.lFrame.currentTNode}function mM(){let e=He.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}function bl(e,t){let n=He.lFrame;n.currentTNode=e,n.isParent=t}function Wv(){return He.lFrame.isParent}function yM(){He.lFrame.isParent=!1}function wM(){return He.lFrame.contextLView}function Gv(){return Uv}function OC(e){Uv=e}function CM(){return He.lFrame.bindingIndex}function vM(e){return He.lFrame.bindingIndex=e}function Qs(){return He.lFrame.bindingIndex++}function Xg(e){let t=He.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}function _M(){return He.lFrame.inI18n}function xM(e,t){let n=He.lFrame;n.bindingIndex=n.bindingRootIndex=e,Gp(t)}function EM(){return He.lFrame.currentDirectiveIndex}function Gp(e){He.lFrame.currentDirectiveIndex=e}function bM(e){let t=He.lFrame.currentDirectiveIndex;return t===-1?null:e[t]}function $v(){return He.lFrame.currentQueryIndex}function Kg(e){He.lFrame.currentQueryIndex=e}function IM(e){let t=e[be];return t.type===2?t.declTNode:t.type===1?e[Or]:null}function qv(e,t,n){if(n&je.SkipSelf){let i=t,s=e;for(;i=i.parent,i===null&&!(n&je.Host);)if(i=IM(s),i===null||(s=s[Zs],i.type&10))break;if(i===null)return!1;t=i,e=s}let r=He.lFrame=Yv();return r.currentTNode=t,r.lView=e,!0}function Jg(e){let t=Yv(),n=e[be];He.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function Yv(){let e=He.lFrame,t=e===null?null:e.child;return t===null?Zv(e):t}function Zv(e){let t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return e!==null&&(e.child=t),t}function Qv(){let e=He.lFrame;return He.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}var Xv=Qv;function e0(){let e=Qv();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function DM(e){return(He.lFrame.contextLView=lM(e,He.lFrame.contextLView))[xn]}function Ei(){return He.lFrame.selectedIndex}function Fo(e){He.lFrame.selectedIndex=e}function t0(){let e=He.lFrame;return Zg(e.tView,e.selectedIndex)}function SM(){return He.lFrame.currentNamespace}var Kv=!0;function n0(){return Kv}function r0(e){Kv=e}function AM(e,t,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=t.type.prototype;if(r){let c=Pv(t);(n.preOrderHooks??=[]).push(e,c),(n.preOrderCheckHooks??=[]).push(e,c)}i&&(n.preOrderHooks??=[]).push(0-e,i),s&&((n.preOrderHooks??=[]).push(e,s),(n.preOrderCheckHooks??=[]).push(e,s))}function i0(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){let s=e.data[n].type.prototype,{ngAfterContentInit:c,ngAfterContentChecked:h,ngAfterViewInit:g,ngAfterViewChecked:m,ngOnDestroy:_}=s;c&&(e.contentHooks??=[]).push(-n,c),h&&((e.contentHooks??=[]).push(n,h),(e.contentCheckHooks??=[]).push(n,h)),g&&(e.viewHooks??=[]).push(-n,g),m&&((e.viewHooks??=[]).push(n,m),(e.viewCheckHooks??=[]).push(n,m)),_!=null&&(e.destroyHooks??=[]).push(n,_)}}function Zu(e,t,n){Jv(e,t,3,n)}function Qu(e,t,n,r){(e[_e]&3)===n&&Jv(e,t,n,r)}function Ep(e,t){let n=e[_e];(n&3)===t&&(n&=16383,n+=1,e[_e]=n)}function Jv(e,t,n,r){let i=r!==void 0?e[Ps]&65535:0,s=r??-1,c=t.length-1,h=0;for(let g=i;g<c;g++)if(typeof t[g+1]=="number"){if(h=t[g],r!=null&&h>=r)break}else t[g]<0&&(e[Ps]+=65536),(h<s||s==-1)&&(TM(e,n,t,g),e[Ps]=(e[Ps]&4294901760)+g+2),g++}function PC(e,t){Gr(4,e,t);let n=$e(null);try{t.call(e)}finally{$e(n),Gr(5,e,t)}}function TM(e,t,n,r){let i=n[r]<0,s=n[r+1],c=i?-n[r]:n[r],h=e[c];i?e[_e]>>14<e[Ps]>>16&&(e[_e]&3)===t&&(e[_e]+=16384,PC(h,s)):PC(h,s)}var Fs=-1,Bo=class{constructor(t,n,r){this.factory=t,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function MM(e){return e instanceof Bo}function NM(e){return(e.flags&8)!==0}function RM(e){return(e.flags&16)!==0}var bp={},$p=class{constructor(t,n){this.injector=t,this.parentInjector=n}get(t,n,r){r=Ed(r);let i=this.injector.get(t,bp,r);return i!==bp||n===bp?i:this.parentInjector.get(t,n,r)}};function e_(e){return e!==Fs}function ad(e){return e&32767}function OM(e){return e>>16}function ld(e,t){let n=OM(e),r=t;for(;n>0;)r=r[Zs],n--;return r}var qp=!0;function kC(e){let t=qp;return qp=e,t}var PM=256,t_=PM-1,n_=5,kM=0,$r={};function LM(e,t,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(cl)&&(r=n[cl]),r==null&&(r=n[cl]=kM++);let i=r&t_,s=1<<i;t.data[e+(i>>n_)]|=s}function cd(e,t){let n=r_(e,t);if(n!==-1)return n;let r=t[be];r.firstCreatePass&&(e.injectorIndex=t.length,Ip(r.data,e),Ip(t,null),Ip(r.blueprint,null));let i=o0(e,t),s=e.injectorIndex;if(e_(i)){let c=ad(i),h=ld(i,t),g=h[be].data;for(let m=0;m<8;m++)t[s+m]=h[c+m]|g[c+m]}return t[s+8]=i,s}function Ip(e,t){e.push(0,0,0,0,0,0,0,0,t)}function r_(e,t){return e.injectorIndex===-1||e.parent&&e.parent.injectorIndex===e.injectorIndex||t[e.injectorIndex+8]===null?-1:e.injectorIndex}function o0(e,t){if(e.parent&&e.parent.injectorIndex!==-1)return e.parent.injectorIndex;let n=0,r=null,i=t;for(;i!==null;){if(r=l_(i),r===null)return Fs;if(n++,i=i[Zs],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Fs}function Yp(e,t,n){LM(e,t,n)}function i_(e,t,n){if(n&je.Optional||e!==void 0)return e;Ug(t,"NodeInjector")}function o_(e,t,n,r){if(n&je.Optional&&r===void 0&&(r=null),!(n&(je.Self|je.Host))){let i=e[Hs],s=ar(void 0);try{return i?i.get(t,r,n&je.Optional):pv(t,r,n&je.Optional)}finally{ar(s)}}return i_(r,t,n)}function s_(e,t,n,r=je.Default,i){if(e!==null){if(t[_e]&2048&&!(r&je.Self)){let c=jM(e,t,n,r,$r);if(c!==$r)return c}let s=a_(e,t,n,r,$r);if(s!==$r)return s}return o_(t,n,r,i)}function a_(e,t,n,r,i){let s=BM(n);if(typeof s=="function"){if(!qv(t,e,r))return r&je.Host?i_(i,n,r):o_(t,n,r,i);try{let c;if(c=s(r),c==null&&!(r&je.Optional))Ug(n);else return c}finally{Xv()}}else if(typeof s=="number"){let c=null,h=r_(e,t),g=Fs,m=r&je.Host?t[Rr][Or]:null;for((h===-1||r&je.SkipSelf)&&(g=h===-1?o0(e,t):t[h+8],g===Fs||!FC(r,!1)?h=-1:(c=t[be],h=ad(g),t=ld(g,t)));h!==-1;){let _=t[be];if(LC(s,h,_.data)){let x=FM(h,t,n,c,r,m);if(x!==$r)return x}g=t[h+8],g!==Fs&&FC(r,t[be].data[h+8]===m)&&LC(s,h,t)?(c=_,h=ad(g),t=ld(g,t)):h=-1}}return i}function FM(e,t,n,r,i,s){let c=t[be],h=c.data[e+8],g=r==null?Dd(h)&&qp:r!=c&&(h.type&3)!==0,m=i&je.Host&&s===h,_=Xu(h,c,n,g,m);return _!==null?Vo(t,c,_,h):$r}function Xu(e,t,n,r,i){let s=e.providerIndexes,c=t.data,h=s&1048575,g=e.directiveStart,m=e.directiveEnd,_=s>>20,x=r?h:h+_,I=i?h+_:m;for(let A=x;A<I;A++){let P=c[A];if(A<g&&n===P||A>=g&&P.type===n)return A}if(i){let A=c[g];if(A&&Ji(A)&&A.type===n)return g}return null}function Vo(e,t,n,r){let i=e[n],s=t.data;if(MM(i)){let c=i;c.resolving&&uT(cT(s[n]));let h=kC(c.canSeeViewProviders);c.resolving=!0;let g,m=c.injectImpl?ar(c.injectImpl):null,_=qv(e,r,je.Default);try{i=e[n]=c.factory(void 0,s,e,r),t.firstCreatePass&&n>=r.directiveStart&&AM(n,s[n],t)}finally{m!==null&&ar(m),kC(h),c.resolving=!1,Xv()}}return i}function BM(e){if(typeof e=="string")return e.charCodeAt(0)||0;let t=e.hasOwnProperty(cl)?e[cl]:void 0;return typeof t=="number"?t>=0?t&t_:VM:t}function LC(e,t,n){let r=1<<e;return!!(n[t+(e>>n_)]&r)}function FC(e,t){return!(e&je.Self)&&!(e&je.Host&&t)}var Ro=class{constructor(t,n){this._tNode=t,this._lView=n}get(t,n,r){return s_(this._tNode,this._lView,t,Ed(r),n)}};function VM(){return new Ro(Gn(),tt())}function Xs(e){return _d(()=>{let t=e.prototype.constructor,n=t[ed]||Zp(t),r=Object.prototype,i=Object.getPrototypeOf(e.prototype).constructor;for(;i&&i!==r;){let s=i[ed]||Zp(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function Zp(e){return lv(e)?()=>{let t=Zp(Rn(e));return t&&t()}:Bs(e)}function jM(e,t,n,r,i){let s=e,c=t;for(;s!==null&&c!==null&&c[_e]&2048&&!(c[_e]&512);){let h=a_(s,c,n,r|je.Self,$r);if(h!==$r)return h;let g=s.parent;if(!g){let m=c[Mv];if(m){let _=m.get(n,$r,r);if(_!==$r)return _}g=l_(c),c=c[Zs]}s=g}return i}function l_(e){let t=e[be],n=t.type;return n===2?t.declTNode:n===1?e[Or]:null}function BC(e,t=null,n=null,r){let i=c_(e,t,n,r);return i.resolveInjectorInitializers(),i}function c_(e,t=null,n=null,r,i=new Set){let s=[n||Hn,UT(e)];return r=r||(typeof e=="object"?void 0:zn(e)),new hl(s,t||qg(),r||null,i)}var eo=class e{static{this.THROW_IF_NOT_FOUND=dl}static{this.NULL=new rd}static create(t,n){if(Array.isArray(t))return BC({name:""},n,t,"");{let r=t.name??"";return BC({name:r},t.parent,t.providers,r)}}static{this.\u0275prov=pe({token:e,providedIn:"any",factory:()=>Ue(mv)})}static{this.__NG_ELEMENT_ID__=-1}};var UM=new xe("");UM.__NG_ELEMENT_ID__=e=>{let t=Gn();if(t===null)throw new he(204,!1);if(t.type&2)return t.value;if(e&je.Optional)return null;throw new he(204,!1)};var HM="ngOriginalError";function Dp(e){return e[HM]}var u_=!0,d_=(()=>{class e{static{this.__NG_ELEMENT_ID__=zM}static{this.__NG_ENV_ID__=n=>n}}return e})(),Qp=class extends d_{constructor(t){super(),this._lView=t}onDestroy(t){return jv(this._lView,t),()=>cM(this._lView,t)}};function zM(){return new Qp(tt())}var Ks=(()=>{class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new hn(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=pe({token:e,providedIn:"root",factory:()=>new e})}}return e})();var Xp=class extends fn{constructor(t=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=t,KT()&&(this.destroyRef=te(d_,{optional:!0})??void 0,this.pendingTasks=te(Ks,{optional:!0})??void 0)}emit(t){let n=$e(null);try{super.next(t)}finally{$e(n)}}subscribe(t,n,r){let i=t,s=n||(()=>null),c=r;if(t&&typeof t=="object"){let g=t;i=g.next?.bind(g),s=g.error?.bind(g),c=g.complete?.bind(g)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),c&&(c=this.wrapInTimeout(c)));let h=super.subscribe({next:i,error:s,complete:c});return t instanceof Pt&&t.add(h),h}wrapInTimeout(t){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{t(n),r!==void 0&&this.pendingTasks?.remove(r)})}}},St=Xp;function ud(...e){}function f_(e){let t,n;function r(){e=ud;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),t!==void 0&&clearTimeout(t)}catch{}}return t=setTimeout(()=>{e(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{e(),r()})),()=>r()}function VC(e){return queueMicrotask(()=>e()),()=>{e=ud}}var s0="isAngularZone",dd=s0+"_ID",WM=0,Xt=class e{constructor(t){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new St(!1),this.onMicrotaskEmpty=new St(!1),this.onStable=new St(!1),this.onError=new St(!1);let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=u_}=t;if(typeof Zone>"u")throw new he(908,!1);Zone.assertZonePatched();let c=this;c._nesting=0,c._outer=c._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(c._inner=c._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(c._inner=c._inner.fork(Zone.longStackTraceZoneSpec)),c.shouldCoalesceEventChangeDetection=!i&&r,c.shouldCoalesceRunChangeDetection=i,c.callbackScheduled=!1,c.scheduleInRootZone=s,qM(c)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(s0)===!0}static assertInAngularZone(){if(!e.isInAngularZone())throw new he(909,!1)}static assertNotInAngularZone(){if(e.isInAngularZone())throw new he(909,!1)}run(t,n,r){return this._inner.run(t,n,r)}runTask(t,n,r,i){let s=this._inner,c=s.scheduleEventTask("NgZoneEvent: "+i,t,GM,ud,ud);try{return s.runTask(c,n,r)}finally{s.cancelTask(c)}}runGuarded(t,n,r){return this._inner.runGuarded(t,n,r)}runOutsideAngular(t){return this._outer.run(t)}},GM={};function a0(e){if(e._nesting==0&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function $M(e){if(e.isCheckStableRunning||e.callbackScheduled)return;e.callbackScheduled=!0;function t(){f_(()=>{e.callbackScheduled=!1,Kp(e),e.isCheckStableRunning=!0,a0(e),e.isCheckStableRunning=!1})}e.scheduleInRootZone?Zone.root.run(()=>{t()}):e._outer.run(()=>{t()}),Kp(e)}function qM(e){let t=()=>{$M(e)},n=WM++;e._inner=e._inner.fork({name:"angular",properties:{[s0]:!0,[dd]:n,[dd+n]:!0},onInvokeTask:(r,i,s,c,h,g)=>{if(YM(g))return r.invokeTask(s,c,h,g);try{return jC(e),r.invokeTask(s,c,h,g)}finally{(e.shouldCoalesceEventChangeDetection&&c.type==="eventTask"||e.shouldCoalesceRunChangeDetection)&&t(),UC(e)}},onInvoke:(r,i,s,c,h,g,m)=>{try{return jC(e),r.invoke(s,c,h,g,m)}finally{e.shouldCoalesceRunChangeDetection&&!e.callbackScheduled&&!ZM(g)&&t(),UC(e)}},onHasTask:(r,i,s,c)=>{r.hasTask(s,c),i===s&&(c.change=="microTask"?(e._hasPendingMicrotasks=c.microTask,Kp(e),a0(e)):c.change=="macroTask"&&(e.hasPendingMacrotasks=c.macroTask))},onHandleError:(r,i,s,c)=>(r.handleError(s,c),e.runOutsideAngular(()=>e.onError.emit(c)),!1)})}function Kp(e){e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&e.callbackScheduled===!0?e.hasPendingMicrotasks=!0:e.hasPendingMicrotasks=!1}function jC(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function UC(e){e._nesting--,a0(e)}var Jp=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new St,this.onMicrotaskEmpty=new St,this.onStable=new St,this.onError=new St}run(t,n,r){return t.apply(n,r)}runGuarded(t,n,r){return t.apply(n,r)}runOutsideAngular(t){return t()}runTask(t,n,r,i){return t.apply(n,r)}};function YM(e){return h_(e,"__ignore_ng_zone__")}function ZM(e){return h_(e,"__scheduler_tick__")}function h_(e,t){return!Array.isArray(e)||e.length!==1?!1:e[0]?.data?.[t]===!0}var pi=class{constructor(){this._console=console}handleError(t){let n=this._findOriginalError(t);this._console.error("ERROR",t),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(t){let n=t&&Dp(t);for(;n&&Dp(n);)n=Dp(n);return n||null}},QM=new xe("",{providedIn:"root",factory:()=>{let e=te(Xt),t=te(pi);return n=>e.runOutsideAngular(()=>t.handleError(n))}});function XM(){return Js(Gn(),tt())}function Js(e,t){return new Qr(dr(e,t))}var Qr=(()=>{class e{constructor(n){this.nativeElement=n}static{this.__NG_ELEMENT_ID__=XM}}return e})();function KM(e){return e instanceof Qr?e.nativeElement:e}function JM(){return this._results[Symbol.iterator]()}var eg=class e{get changes(){return this._changes??=new St}constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let n=e.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=JM)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,n){return this._results.reduce(t,n)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,n){this.dirty=!1;let r=xT(t);(this._changesDetected=!_T(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(t){this._onDirty=t}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function p_(e){return(e.flags&128)===128}var g_=new Map,eN=0;function tN(){return eN++}function nN(e){g_.set(e[Id],e)}function tg(e){g_.delete(e[Id])}var HC="__ngContext__";function jo(e,t){Xi(t)?(e[HC]=t[Id],nN(t)):e[HC]=t}function m_(e){return w_(e[gl])}function y_(e){return w_(e[Nr])}function w_(e){for(;e!==null&&!_i(e);)e=e[Nr];return e}var ng;function C_(e){ng=e}function rN(){if(ng!==void 0)return ng;if(typeof document<"u")return document;throw new he(210,!1)}var l0=new xe("",{providedIn:"root",factory:()=>iN}),iN="ng",c0=new xe(""),ea=new xe("",{providedIn:"platform",factory:()=>"unknown"});var u0=new xe("",{providedIn:"root",factory:()=>rN().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var oN="h",sN="b";var aN=()=>null;function d0(e,t,n=!1){return aN(e,t,n)}var v_=!1,lN=new xe("",{providedIn:"root",factory:()=>v_});var zu;function cN(){if(zu===void 0&&(zu=null,Pp.trustedTypes))try{zu=Pp.trustedTypes.createPolicy("angular",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch{}return zu}function Td(e){return cN()?.createHTML(e)||e}var gi=class{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${av})`}},rg=class extends gi{getTypeName(){return"HTML"}},ig=class extends gi{getTypeName(){return"Style"}},og=class extends gi{getTypeName(){return"Script"}},sg=class extends gi{getTypeName(){return"URL"}},ag=class extends gi{getTypeName(){return"ResourceURL"}};function bi(e){return e instanceof gi?e.changingThisBreaksApplicationSecurity:e}function ta(e,t){let n=uN(e);if(n!=null&&n!==t){if(n==="ResourceURL"&&t==="URL")return!0;throw new Error(`Required a safe ${t}, got a ${n} (see ${av})`)}return n===t}function uN(e){return e instanceof gi&&e.getTypeName()||null}function __(e){return new rg(e)}function x_(e){return new ig(e)}function E_(e){return new og(e)}function b_(e){return new sg(e)}function I_(e){return new ag(e)}function dN(e){let t=new cg(e);return fN()?new lg(t):t}var lg=class{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{let n=new window.DOMParser().parseFromString(Td(t),"text/html").body;return n===null?this.inertDocumentHelper.getInertBodyElement(t):(n.firstChild?.remove(),n)}catch{return null}}},cg=class{constructor(t){this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(t){let n=this.inertDocument.createElement("template");return n.innerHTML=Td(t),n}};function fN(){try{return!!new window.DOMParser().parseFromString(Td(""),"text/html")}catch{return!1}}var hN=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function f0(e){return e=String(e),e.match(hN)?e:"unsafe:"+e}function Ii(e){let t={};for(let n of e.split(","))t[n]=!0;return t}function Il(...e){let t={};for(let n of e)for(let r in n)n.hasOwnProperty(r)&&(t[r]=!0);return t}var D_=Ii("area,br,col,hr,img,wbr"),S_=Ii("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),A_=Ii("rp,rt"),pN=Il(A_,S_),gN=Il(S_,Ii("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),mN=Il(A_,Ii("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),zC=Il(D_,gN,mN,pN),T_=Ii("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),yN=Ii("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),wN=Ii("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),CN=Il(T_,yN,wN),vN=Ii("script,style,template"),ug=class{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let n=t.firstChild,r=!0,i=[];for(;n;){if(n.nodeType===Node.ELEMENT_NODE?r=this.startElement(n):n.nodeType===Node.TEXT_NODE?this.chars(n.nodeValue):this.sanitizedSomething=!0,r&&n.firstChild){i.push(n),n=EN(n);continue}for(;n;){n.nodeType===Node.ELEMENT_NODE&&this.endElement(n);let s=xN(n);if(s){n=s;break}n=i.pop()}}return this.buf.join("")}startElement(t){let n=WC(t).toLowerCase();if(!zC.hasOwnProperty(n))return this.sanitizedSomething=!0,!vN.hasOwnProperty(n);this.buf.push("<"),this.buf.push(n);let r=t.attributes;for(let i=0;i<r.length;i++){let s=r.item(i),c=s.name,h=c.toLowerCase();if(!CN.hasOwnProperty(h)){this.sanitizedSomething=!0;continue}let g=s.value;T_[h]&&(g=f0(g)),this.buf.push(" ",c,'="',GC(g),'"')}return this.buf.push(">"),!0}endElement(t){let n=WC(t).toLowerCase();zC.hasOwnProperty(n)&&!D_.hasOwnProperty(n)&&(this.buf.push("</"),this.buf.push(n),this.buf.push(">"))}chars(t){this.buf.push(GC(t))}};function _N(e,t){return(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function xN(e){let t=e.nextSibling;if(t&&e!==t.previousSibling)throw M_(t);return t}function EN(e){let t=e.firstChild;if(t&&_N(e,t))throw M_(t);return t}function WC(e){let t=e.nodeName;return typeof t=="string"?t:"FORM"}function M_(e){return new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`)}var bN=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,IN=/([^\#-~ |!])/g;function GC(e){return e.replace(/&/g,"&amp;").replace(bN,function(t){let n=t.charCodeAt(0),r=t.charCodeAt(1);return"&#"+((n-55296)*1024+(r-56320)+65536)+";"}).replace(IN,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var Wu;function N_(e,t){let n=null;try{Wu=Wu||dN(e);let r=t?String(t):"";n=Wu.getInertBodyElement(r);let i=5,s=r;do{if(i===0)throw new Error("Failed to sanitize html because the input is unstable");i--,r=s,s=n.innerHTML,n=Wu.getInertBodyElement(r)}while(r!==s);let h=new ug().sanitizeChildren($C(n)||n);return Td(h)}finally{if(n){let r=$C(n)||n;for(;r.firstChild;)r.firstChild.remove()}}}function $C(e){return"content"in e&&DN(e)?e.content:null}function DN(e){return e.nodeType===Node.ELEMENT_NODE&&e.nodeName==="TEMPLATE"}var ro=function(e){return e[e.NONE=0]="NONE",e[e.HTML=1]="HTML",e[e.STYLE=2]="STYLE",e[e.SCRIPT=3]="SCRIPT",e[e.URL=4]="URL",e[e.RESOURCE_URL=5]="RESOURCE_URL",e}(ro||{});function R_(e){return e instanceof Function?e():e}var mi=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}(mi||{}),SN;function h0(e,t){return SN(e,t)}function ks(e,t,n,r,i){if(r!=null){let s,c=!1;_i(r)?s=r:Xi(r)&&(c=!0,r=r[vi]);let h=Yr(r);e===0&&n!==null?i==null?L_(t,n,h):fd(t,n,h,i||null,!0):e===1&&n!==null?fd(t,n,h,i||null,!0):e===2?HN(t,h,c):e===3&&t.destroyNode(h),s!=null&&WN(t,e,s,n,i)}}function AN(e,t){return e.createText(t)}function TN(e,t,n){e.setValue(t,n)}function O_(e,t,n){return e.createElement(t,n)}function MN(e,t){P_(e,t),t[vi]=null,t[Or]=null}function NN(e,t,n,r,i,s){r[vi]=i,r[Or]=t,Nd(e,r,n,1,i,s)}function P_(e,t){t[fi].changeDetectionScheduler?.notify(9),Nd(e,t,t[zt],2,null,null)}function RN(e){let t=e[gl];if(!t)return Sp(e[be],e);for(;t;){let n=null;if(Xi(t))n=t[gl];else{let r=t[En];r&&(n=r)}if(!n){for(;t&&!t[Nr]&&t!==e;)Xi(t)&&Sp(t[be],t),t=t[bn];t===null&&(t=e),Xi(t)&&Sp(t[be],t),n=t&&t[Nr]}t=n}}function ON(e,t,n,r){let i=En+r,s=n.length;r>0&&(n[i-1][Nr]=t),r<s-En?(t[Nr]=n[i],gv(n,En+r,t)):(n.push(t),t[Nr]=null),t[bn]=n;let c=t[Po];c!==null&&n!==c&&k_(c,t);let h=t[hi];h!==null&&h.insertView(e),Wp(t),t[_e]|=128}function k_(e,t){let n=e[zs],r=t[bn];if(Xi(r))e[_e]|=sd.HasTransplantedViews;else{let i=r[bn][Rr];t[Rr]!==i&&(e[_e]|=sd.HasTransplantedViews)}n===null?e[zs]=[t]:n.push(t)}function p0(e,t){let n=e[zs],r=n.indexOf(t);n.splice(r,1)}function ml(e,t){if(e.length<=En)return;let n=En+t,r=e[n];if(r){let i=r[Po];i!==null&&i!==e&&p0(i,r),t>0&&(e[n-1][Nr]=r[Nr]);let s=nd(e,En+t);MN(r[be],r);let c=s[hi];c!==null&&c.detachView(s[be]),r[bn]=null,r[Nr]=null,r[_e]&=-129}return r}function Md(e,t){if(!(t[_e]&256)){let n=t[zt];n.destroyNode&&Nd(e,t,n,3,null,null),RN(t)}}function Sp(e,t){if(t[_e]&256)return;let n=$e(null);try{t[_e]&=-129,t[_e]|=256,t[lr]&&Jh(t[lr]),kN(e,t),PN(e,t),t[be].type===1&&t[zt].destroy();let r=t[Po];if(r!==null&&_i(t[bn])){r!==t[bn]&&p0(r,t);let i=t[hi];i!==null&&i.detachView(e)}tg(t)}finally{$e(n)}}function PN(e,t){let n=e.cleanup,r=t[id];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let c=n[s+3];c>=0?r[c]():r[-c].unsubscribe(),s+=2}else{let c=r[n[s+1]];n[s].call(c)}r!==null&&(t[id]=null);let i=t[Qi];if(i!==null){t[Qi]=null;for(let s=0;s<i.length;s++){let c=i[s];c()}}}function kN(e,t){let n;if(e!=null&&(n=e.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=t[n[r]];if(!(i instanceof Bo)){let s=n[r+1];if(Array.isArray(s))for(let c=0;c<s.length;c+=2){let h=i[s[c]],g=s[c+1];Gr(4,h,g);try{g.call(h)}finally{Gr(5,h,g)}}else{Gr(4,i,s);try{s.call(i)}finally{Gr(5,i,s)}}}}}function LN(e,t,n){return FN(e,t.parent,n)}function FN(e,t,n){let r=t;for(;r!==null&&r.type&168;)t=r,r=t.parent;if(r===null)return n[vi];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=e.data[r.directiveStart+i];if(s===qr.None||s===qr.Emulated)return null}return dr(r,n)}}function fd(e,t,n,r,i){e.insertBefore(t,n,r,i)}function L_(e,t,n){e.appendChild(t,n)}function qC(e,t,n,r,i){r!==null?fd(e,t,n,r,i):L_(e,t,n)}function F_(e,t){return e.parentNode(t)}function BN(e,t){return e.nextSibling(t)}function VN(e,t,n){return UN(e,t,n)}function jN(e,t,n){return e.type&40?dr(e,n):null}var UN=jN,YC;function g0(e,t,n,r){let i=LN(e,r,t),s=t[zt],c=r.parent||t[Or],h=VN(c,r,t);if(i!=null)if(Array.isArray(n))for(let g=0;g<n.length;g++)qC(s,i,n[g],h,!1);else qC(s,i,n,h,!1);YC!==void 0&&YC(s,r,t,n,i)}function al(e,t){if(t!==null){let n=t.type;if(n&3)return dr(t,e);if(n&4)return dg(-1,e[t.index]);if(n&8){let r=t.child;if(r!==null)return al(e,r);{let i=e[t.index];return _i(i)?dg(-1,i):Yr(i)}}else{if(n&128)return al(e,t.next);if(n&32)return h0(t,e)()||Yr(e[t.index]);{let r=B_(e,t);if(r!==null){if(Array.isArray(r))return r[0];let i=Lo(e[Rr]);return al(i,r)}else return al(e,t.next)}}}return null}function B_(e,t){if(t!==null){let r=e[Rr][Or],i=t.projection;return r.projection[i]}return null}function dg(e,t){let n=En+e+1;if(n<t.length){let r=t[n],i=r[be].firstChild;if(i!==null)return al(r,i)}return t[ko]}function HN(e,t,n){e.removeChild(null,t,n)}function m0(e,t,n,r,i,s,c){for(;n!=null;){if(n.type===128){n=n.next;continue}let h=r[n.index],g=n.type;if(c&&t===0&&(h&&jo(Yr(h),r),n.flags|=2),(n.flags&32)!==32)if(g&8)m0(e,t,n.child,r,i,s,!1),ks(t,e,i,h,s);else if(g&32){let m=h0(n,r),_;for(;_=m();)ks(t,e,i,_,s);ks(t,e,i,h,s)}else g&16?zN(e,t,r,n,i,s):ks(t,e,i,h,s);n=c?n.projectionNext:n.next}}function Nd(e,t,n,r,i,s){m0(n,r,e.firstChild,t,i,s,!1)}function zN(e,t,n,r,i,s){let c=n[Rr],g=c[Or].projection[r.projection];if(Array.isArray(g))for(let m=0;m<g.length;m++){let _=g[m];ks(t,e,i,_,s)}else{let m=g,_=c[bn];p_(r)&&(m.flags|=128),m0(e,t,m,_,i,s,!0)}}function WN(e,t,n,r,i){let s=n[ko],c=Yr(n);s!==c&&ks(t,e,r,s,i);for(let h=En;h<n.length;h++){let g=n[h];Nd(g[be],g,e,t,r,s)}}function GN(e,t,n,r,i){if(t)i?e.addClass(n,r):e.removeClass(n,r);else{let s=r.indexOf("-")===-1?void 0:mi.DashCase;i==null?e.removeStyle(n,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=mi.Important),e.setStyle(n,r,i,s))}}function $N(e,t,n){e.setAttribute(t,"style",n)}function V_(e,t,n){n===""?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n)}function j_(e,t,n){let{mergedAttrs:r,classes:i,styles:s}=n;r!==null&&Bp(e,t,r),i!==null&&V_(e,t,i),s!==null&&$N(e,t,s)}var Pr={};function ee(e=1){U_(gn(),tt(),Ei()+e,!1)}function U_(e,t,n,r){if(!r)if((t[_e]&3)===3){let s=e.preOrderCheckHooks;s!==null&&Zu(t,s,n)}else{let s=e.preOrderHooks;s!==null&&Qu(t,s,0,n)}Fo(n)}function Q(e,t=je.Default){let n=tt();if(n===null)return Ue(e,t);let r=Gn();return s_(r,n,Rn(e),t)}function H_(e,t,n,r,i,s){let c=$e(null);try{let h=null;i&Ki.SignalBased&&(h=t[r][ci]),h!==null&&h.transformFn!==void 0&&(s=h.transformFn(s)),i&Ki.HasDecoratorInputTransform&&(s=e.inputTransforms[r].call(t,s)),e.setInput!==null?e.setInput(t,h,s,n,r):Ov(t,h,r,s)}finally{$e(c)}}function qN(e,t){let n=e.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Fo(~i);else{let s=i,c=n[++r],h=n[++r];xM(c,s);let g=t[s];h(2,g)}}}finally{Fo(-1)}}function Rd(e,t,n,r,i,s,c,h,g,m,_){let x=t.blueprint.slice();return x[vi]=i,x[_e]=r|4|128|8|64,(m!==null||e&&e[_e]&2048)&&(x[_e]|=2048),Bv(x),x[bn]=x[Zs]=e,x[xn]=n,x[fi]=c||e&&e[fi],x[zt]=h||e&&e[zt],x[Hs]=g||e&&e[Hs]||null,x[Or]=s,x[Id]=tN(),x[pl]=_,x[Mv]=m,x[Rr]=t.type==2?e[Rr]:x,x}function Od(e,t,n,r,i){let s=e.data[t];if(s===null)s=YN(e,t,n,r,i),_M()&&(s.flags|=32);else if(s.type&64){s.type=n,s.value=r,s.attrs=i;let c=mM();s.injectorIndex=c===null?-1:c.injectorIndex}return bl(s,!0),s}function YN(e,t,n,r,i){let s=zv(),c=Wv(),h=c?s:s&&s.parent,g=e.data[t]=eR(e,h,n,t,r,i);return e.firstChild===null&&(e.firstChild=g),s!==null&&(c?s.child==null&&g.parent!==null&&(s.child=g):s.next===null&&(s.next=g,g.prev=s)),g}function z_(e,t,n,r){if(n===0)return-1;let i=t.length;for(let s=0;s<n;s++)t.push(r),e.blueprint.push(r),e.data.push(null);return i}function W_(e,t,n,r,i){let s=Ei(),c=r&2;try{Fo(-1),c&&t.length>ur&&U_(e,t,ur,!1),Gr(c?2:0,i),n(r,i)}finally{Fo(s),Gr(c?3:1,i)}}function G_(e,t,n){if(Rv(t)){let r=$e(null);try{let i=t.directiveStart,s=t.directiveEnd;for(let c=i;c<s;c++){let h=e.data[c];if(h.contentQueries){let g=n[c];h.contentQueries(1,g,c)}}}finally{$e(r)}}}function $_(e,t,n){Hv()&&(sR(e,t,n,dr(n,t)),(n.flags&64)===64&&K_(e,t,n))}function q_(e,t,n=dr){let r=t.localNames;if(r!==null){let i=t.index+1;for(let s=0;s<r.length;s+=2){let c=r[s+1],h=c===-1?n(t,e):e[c];e[i++]=h}}}function Y_(e){let t=e.tView;return t===null||t.incompleteFirstPass?e.tView=y0(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):t}function y0(e,t,n,r,i,s,c,h,g,m,_){let x=ur+r,I=x+i,A=ZN(x,I),P=typeof m=="function"?m():m;return A[be]={type:e,blueprint:A,template:n,queries:null,viewQuery:h,declTNode:t,data:A.slice().fill(null,x),bindingStartIndex:x,expandoStartIndex:I,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof c=="function"?c():c,firstChild:null,schemas:g,consts:P,incompleteFirstPass:!1,ssrId:_}}function ZN(e,t){let n=[];for(let r=0;r<t;r++)n.push(r<e?null:Pr);return n}function QN(e,t,n,r){let s=r.get(lN,v_)||n===qr.ShadowDom,c=e.selectRootElement(t,s);return XN(c),c}function XN(e){KN(e)}var KN=()=>null;function JN(e,t,n,r){let i=tx(t);i.push(n),e.firstCreatePass&&nx(e).push(r,i.length-1)}function eR(e,t,n,r,i,s){let c=t?t.injectorIndex:-1,h=0;return hM()&&(h|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:c,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:h,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function ZC(e,t,n,r,i){for(let s in t){if(!t.hasOwnProperty(s))continue;let c=t[s];if(c===void 0)continue;r??={};let h,g=Ki.None;Array.isArray(c)?(h=c[0],g=c[1]):h=c;let m=s;if(i!==null){if(!i.hasOwnProperty(s))continue;m=i[s]}e===0?QC(r,n,m,h,g):QC(r,n,m,h)}return r}function QC(e,t,n,r,i){let s;e.hasOwnProperty(n)?(s=e[n]).push(t,r):s=e[n]=[t,r],i!==void 0&&s.push(i)}function tR(e,t,n){let r=t.directiveStart,i=t.directiveEnd,s=e.data,c=t.attrs,h=[],g=null,m=null;for(let _=r;_<i;_++){let x=s[_],I=n?n.get(x):null,A=I?I.inputs:null,P=I?I.outputs:null;g=ZC(0,x.inputs,_,g,A),m=ZC(1,x.outputs,_,m,P);let U=g!==null&&c!==null&&!Wg(t)?yR(g,_,c):null;h.push(U)}g!==null&&(g.hasOwnProperty("class")&&(t.flags|=8),g.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=h,t.inputs=g,t.outputs=m}function nR(e){return e==="class"?"className":e==="for"?"htmlFor":e==="formaction"?"formAction":e==="innerHtml"?"innerHTML":e==="readonly"?"readOnly":e==="tabindex"?"tabIndex":e}function Z_(e,t,n,r,i,s,c,h){let g=dr(t,n),m=t.inputs,_;!h&&m!=null&&(_=m[r])?(w0(e,n,_,r,i),Dd(t)&&rR(n,t.index)):t.type&3?(r=nR(r),i=c!=null?c(i,t.value||"",r):i,s.setProperty(g,r,i)):t.type&12}function rR(e,t){let n=no(t,e);n[_e]&16||(n[_e]|=64)}function Q_(e,t,n,r){if(Hv()){let i=r===null?null:{"":-1},s=lR(e,n),c,h;s===null?c=h=null:[c,h]=s,c!==null&&X_(e,t,n,c,i,h),i&&cR(n,r,i)}n.mergedAttrs=fl(n.mergedAttrs,n.attrs)}function X_(e,t,n,r,i,s){for(let m=0;m<r.length;m++)Yp(cd(n,t),e,r[m].type);dR(n,e.data.length,r.length);for(let m=0;m<r.length;m++){let _=r[m];_.providersResolver&&_.providersResolver(_)}let c=!1,h=!1,g=z_(e,t,r.length,null);for(let m=0;m<r.length;m++){let _=r[m];n.mergedAttrs=fl(n.mergedAttrs,_.hostAttrs),fR(e,n,t,g,_),uR(g,_,i),_.contentQueries!==null&&(n.flags|=4),(_.hostBindings!==null||_.hostAttrs!==null||_.hostVars!==0)&&(n.flags|=64);let x=_.type.prototype;!c&&(x.ngOnChanges||x.ngOnInit||x.ngDoCheck)&&((e.preOrderHooks??=[]).push(n.index),c=!0),!h&&(x.ngOnChanges||x.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(n.index),h=!0),g++}tR(e,n,s)}function iR(e,t,n,r,i){let s=i.hostBindings;if(s){let c=e.hostBindingOpCodes;c===null&&(c=e.hostBindingOpCodes=[]);let h=~t.index;oR(c)!=h&&c.push(h),c.push(n,r,s)}}function oR(e){let t=e.length;for(;t>0;){let n=e[--t];if(typeof n=="number"&&n<0)return n}return 0}function sR(e,t,n,r){let i=n.directiveStart,s=n.directiveEnd;Dd(n)&&hR(t,n,e.data[i+n.componentOffset]),e.firstCreatePass||cd(n,t),jo(r,t);let c=n.initialInputs;for(let h=i;h<s;h++){let g=e.data[h],m=Vo(t,e,h,n);if(jo(m,t),c!==null&&mR(t,h-i,m,g,n,c),Ji(g)){let _=no(n.index,t);_[xn]=Vo(t,e,h,n)}}}function K_(e,t,n){let r=n.directiveStart,i=n.directiveEnd,s=n.index,c=EM();try{Fo(s);for(let h=r;h<i;h++){let g=e.data[h],m=t[h];Gp(h),(g.hostBindings!==null||g.hostVars!==0||g.hostAttrs!==null)&&aR(g,m)}}finally{Fo(-1),Gp(c)}}function aR(e,t){e.hostBindings!==null&&e.hostBindings(1,t)}function lR(e,t){let n=e.directiveRegistry,r=null,i=null;if(n)for(let s=0;s<n.length;s++){let c=n[s];if(RT(t,c.selectors,!1))if(r||(r=[]),Ji(c))if(c.findHostDirectiveDefs!==null){let h=[];i=i||new Map,c.findHostDirectiveDefs(c,h,i),r.unshift(...h,c);let g=h.length;fg(e,t,g)}else r.unshift(c),fg(e,t,0);else i=i||new Map,c.findHostDirectiveDefs?.(c,r,i),r.push(c)}return r===null?null:[r,i]}function fg(e,t,n){t.componentOffset=n,(e.components??=[]).push(t.index)}function cR(e,t,n){if(t){let r=e.localNames=[];for(let i=0;i<t.length;i+=2){let s=n[t[i+1]];if(s==null)throw new he(-301,!1);r.push(t[i],s)}}}function uR(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;Ji(t)&&(n[""]=e)}}function dR(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function fR(e,t,n,r,i){e.data[r]=i;let s=i.factory||(i.factory=Bs(i.type,!0)),c=new Bo(s,Ji(i),Q);e.blueprint[r]=c,n[r]=c,iR(e,t,r,z_(e,n,i.hostVars,Pr),i)}function hR(e,t,n){let r=dr(t,e),i=Y_(n),s=e[fi].rendererFactory,c=16;n.signals?c=4096:n.onPush&&(c=64);let h=Pd(e,Rd(e,i,null,c,r,t,null,s.createRenderer(r,n),null,null,null));e[t.index]=h}function pR(e,t,n,r,i,s){let c=dr(e,t);gR(t[zt],c,s,e.value,n,r,i)}function gR(e,t,n,r,i,s,c){if(s==null)e.removeAttribute(t,i,n);else{let h=c==null?ul(s):c(s,r||"",i);e.setAttribute(t,i,h,n)}}function mR(e,t,n,r,i,s){let c=s[t];if(c!==null)for(let h=0;h<c.length;){let g=c[h++],m=c[h++],_=c[h++],x=c[h++];H_(r,n,g,m,_,x)}}function yR(e,t,n){let r=null,i=0;for(;i<n.length;){let s=n[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(e.hasOwnProperty(s)){r===null&&(r=[]);let c=e[s];for(let h=0;h<c.length;h+=3)if(c[h]===t){r.push(s,c[h+1],c[h+2],n[i+1]);break}}i+=2}return r}function J_(e,t,n,r){return[e,!0,0,t,null,r,null,n,null,null]}function ex(e,t){let n=e.contentQueries;if(n!==null){let r=$e(null);try{for(let i=0;i<n.length;i+=2){let s=n[i],c=n[i+1];if(c!==-1){let h=e.data[c];Kg(s),h.contentQueries(2,t[c],c)}}}finally{$e(r)}}}function Pd(e,t){return e[gl]?e[NC][Nr]=t:e[gl]=t,e[NC]=t,t}function hg(e,t,n){Kg(0);let r=$e(null);try{t(e,n)}finally{$e(r)}}function tx(e){return e[id]??=[]}function nx(e){return e.cleanup??=[]}function rx(e,t){let n=e[Hs],r=n?n.get(pi,null):null;r&&r.handleError(t)}function w0(e,t,n,r,i){for(let s=0;s<n.length;){let c=n[s++],h=n[s++],g=n[s++],m=t[c],_=e.data[c];H_(_,m,r,h,g,i)}}function ix(e,t,n){let r=Fv(t,e);TN(e[zt],r,n)}function wR(e,t){let n=no(t,e),r=n[be];CR(r,n);let i=n[vi];i!==null&&n[pl]===null&&(n[pl]=d0(i,n[Hs])),C0(r,n,n[xn])}function CR(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}function C0(e,t,n){Jg(t);try{let r=e.viewQuery;r!==null&&hg(1,r,n);let i=e.template;i!==null&&W_(e,t,i,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),t[hi]?.finishViewCreation(e),e.staticContentQueries&&ex(e,t),e.staticViewQueries&&hg(2,e.viewQuery,n);let s=e.components;s!==null&&vR(t,s)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{t[_e]&=-5,e0()}}function vR(e,t){for(let n=0;n<t.length;n++)wR(e,t[n])}function kd(e,t,n,r){let i=$e(null);try{let s=t.tView,h=e[_e]&4096?4096:16,g=Rd(e,s,n,h,null,t,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),m=e[t.index];g[Po]=m;let _=e[hi];return _!==null&&(g[hi]=_.createEmbeddedView(s)),C0(s,g,n),g}finally{$e(i)}}function ox(e,t){let n=En+t;if(n<e.length)return e[n]}function yl(e,t){return!t||t.firstChild===null||p_(e)}function Ld(e,t,n,r=!0){let i=t[be];if(ON(i,t,e,n),r){let c=dg(n,e),h=t[zt],g=F_(h,e[ko]);g!==null&&NN(i,e[Or],h,t,g,c)}let s=t[pl];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function sx(e,t){let n=ml(e,t);return n!==void 0&&Md(n[be],n),n}function hd(e,t,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let s=t[n.index];s!==null&&r.push(Yr(s)),_i(s)&&_R(s,r);let c=n.type;if(c&8)hd(e,t,n.child,r);else if(c&32){let h=h0(n,t),g;for(;g=h();)r.push(g)}else if(c&16){let h=B_(t,n);if(Array.isArray(h))r.push(...h);else{let g=Lo(t[Rr]);hd(g[be],g,h,r,!0)}}n=i?n.projectionNext:n.next}return r}function _R(e,t){for(let n=En;n<e.length;n++){let r=e[n],i=r[be].firstChild;i!==null&&hd(r[be],r,i,t)}e[ko]!==e[vi]&&t.push(e[ko])}var ax=[];function xR(e){return e[lr]??ER(e)}function ER(e){let t=ax.pop()??Object.create(IR);return t.lView=e,t}function bR(e){e.lView[lr]!==e&&(e.lView=null,ax.push(e))}var IR=Pe(J({},rl),{consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{Ad(e.lView)},consumerOnSignalRead(){this.lView[lr]=this}});function DR(e){let t=e[lr]??Object.create(SR);return t.lView=e,t}var SR=Pe(J({},rl),{consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{let t=Lo(e.lView);for(;t&&!lx(t[be]);)t=Lo(t);t&&Vv(t)},consumerOnSignalRead(){this.lView[lr]=this}});function lx(e){return e.type!==2}var AR=100;function cx(e,t=!0,n=0){let r=e[fi],i=r.rendererFactory,s=!1;s||i.begin?.();try{TR(e,n)}catch(c){throw t&&rx(e,c),c}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function TR(e,t){let n=Gv();try{OC(!0),pg(e,t);let r=0;for(;Sd(e);){if(r===AR)throw new he(103,!1);r++,pg(e,1)}}finally{OC(n)}}function MR(e,t,n,r){let i=t[_e];if((i&256)===256)return;let s=!1,c=!1;!s&&t[fi].inlineEffectRunner?.flush(),Jg(t);let h=!0,g=null,m=null;s||(lx(e)?(m=xR(t),g=fu(m)):Fw()===null?(h=!1,m=DR(t),g=fu(m)):t[lr]&&(Jh(t[lr]),t[lr]=null));try{Bv(t),vM(e.bindingStartIndex),n!==null&&W_(e,t,n,2,r);let _=(i&3)===3;if(!s)if(_){let A=e.preOrderCheckHooks;A!==null&&Zu(t,A,null)}else{let A=e.preOrderHooks;A!==null&&Qu(t,A,0,null),Ep(t,0)}if(c||NR(t),ux(t,0),e.contentQueries!==null&&ex(e,t),!s)if(_){let A=e.contentCheckHooks;A!==null&&Zu(t,A)}else{let A=e.contentHooks;A!==null&&Qu(t,A,1),Ep(t,1)}qN(e,t);let x=e.components;x!==null&&fx(t,x,0);let I=e.viewQuery;if(I!==null&&hg(2,I,r),!s)if(_){let A=e.viewCheckHooks;A!==null&&Zu(t,A)}else{let A=e.viewHooks;A!==null&&Qu(t,A,2),Ep(t,2)}if(e.firstUpdatePass===!0&&(e.firstUpdatePass=!1),t[xp]){for(let A of t[xp])A();t[xp]=null}s||(t[_e]&=-73)}catch(_){throw s||Ad(t),_}finally{m!==null&&(Xh(m,g),h&&bR(m)),e0()}}function ux(e,t){for(let n=m_(e);n!==null;n=y_(n))for(let r=En;r<n.length;r++){let i=n[r];dx(i,t)}}function NR(e){for(let t=m_(e);t!==null;t=y_(t)){if(!(t[_e]&sd.HasTransplantedViews))continue;let n=t[zs];for(let r=0;r<n.length;r++){let i=n[r];Vv(i)}}}function RR(e,t,n){let r=no(t,e);dx(r,n)}function dx(e,t){Qg(e)&&pg(e,t)}function pg(e,t){let r=e[be],i=e[_e],s=e[lr],c=!!(t===0&&i&16);if(c||=!!(i&64&&t===0),c||=!!(i&1024),c||=!!(s?.dirty&&Kh(s)),c||=!1,s&&(s.dirty=!1),e[_e]&=-9217,c)MR(r,e,r.template,e[xn]);else if(i&8192){ux(e,1);let h=r.components;h!==null&&fx(e,h,1)}}function fx(e,t,n){for(let r=0;r<t.length;r++)RR(e,t[r],n)}function v0(e,t){let n=Gv()?64:1088;for(e[fi].changeDetectionScheduler?.notify(t);e;){e[_e]|=n;let r=Lo(e);if(Hp(e)&&!r)return e;e=r}return null}var Uo=class{get rootNodes(){let t=this._lView,n=t[be];return hd(n,t,n.firstChild,[])}constructor(t,n,r=!0){this._lView=t,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[xn]}set context(t){this._lView[xn]=t}get destroyed(){return(this._lView[_e]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let t=this._lView[bn];if(_i(t)){let n=t[od],r=n?n.indexOf(this):-1;r>-1&&(ml(t,r),nd(n,r))}this._attachedToViewContainer=!1}Md(this._lView[be],this._lView)}onDestroy(t){jv(this._lView,t)}markForCheck(){v0(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[_e]&=-129}reattach(){Wp(this._lView),this._lView[_e]|=128}detectChanges(){this._lView[_e]|=1024,cx(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new he(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let t=Hp(this._lView),n=this._lView[Po];n!==null&&!t&&p0(n,this._lView),P_(this._lView[be],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new he(902,!1);this._appRef=t;let n=Hp(this._lView),r=this._lView[Po];r!==null&&!n&&k_(r,this._lView),Wp(this._lView)}},wl=(()=>{class e{static{this.__NG_ELEMENT_ID__=kR}}return e})(),OR=wl,PR=class extends OR{constructor(t,n,r){super(),this._declarationLView=t,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,n){return this.createEmbeddedViewImpl(t,n)}createEmbeddedViewImpl(t,n,r){let i=kd(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:n,dehydratedView:r});return new Uo(i)}};function kR(){return _0(Gn(),tt())}function _0(e,t){return e.type&4?new PR(t,e,Js(e,t)):null}var vH=new RegExp(`^(\\d+)*(${sN}|${oN})*(.*)`);var LR=()=>null;function Cl(e,t){return LR(e,t)}var Gs=class{},x0=new xe("",{providedIn:"root",factory:()=>!1});var hx=new xe(""),px=new xe(""),gg=class{},pd=class{};function FR(e){let t=Error(`No component factory found for ${zn(e)}.`);return t[BR]=e,t}var BR="ngComponent";var mg=class{resolveComponentFactory(t){throw FR(t)}},$s=class{static{this.NULL=new mg}},qs=class{},io=(()=>{class e{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>VR()}}return e})();function VR(){let e=tt(),t=Gn(),n=no(t.index,e);return(Xi(n)?n:e)[zt]}var jR=(()=>{class e{static{this.\u0275prov=pe({token:e,providedIn:"root",factory:()=>null})}}return e})();function yg(e,t,n){let r=n?e.styles:null,i=n?e.classes:null,s=0;if(t!==null)for(let c=0;c<t.length;c++){let h=t[c];if(typeof h=="number")s=h;else if(s==1)i=kp(i,h);else if(s==2){let g=h,m=t[++c];r=kp(r,g+": "+m+";")}}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=i:e.classesWithoutHost=i}var gd=class extends $s{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){let n=Oo(t);return new vl(n,this.ngModule)}};function XC(e,t){let n=[];for(let r in e){if(!e.hasOwnProperty(r))continue;let i=e[r];if(i===void 0)continue;let s=Array.isArray(i),c=s?i[0]:i,h=s?i[1]:Ki.None;t?n.push({propName:c,templateName:r,isSignal:(h&Ki.SignalBased)!==0}):n.push({propName:c,templateName:r})}return n}function UR(e){let t=e.toLowerCase();return t==="svg"?rM:t==="math"?iM:null}var vl=class extends pd{get inputs(){let t=this.componentDef,n=t.inputTransforms,r=XC(t.inputs,!0);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return XC(this.componentDef.outputs,!1)}constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=LT(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!n}create(t,n,r,i){let s=$e(null);try{i=i||this.ngModule;let c=i instanceof cr?i:i?.injector;c&&this.componentDef.getStandaloneInjector!==null&&(c=this.componentDef.getStandaloneInjector(c)||c);let h=c?new $p(t,c):t,g=h.get(qs,null);if(g===null)throw new he(407,!1);let m=h.get(jR,null),_=h.get(Gs,null),x={rendererFactory:g,sanitizer:m,inlineEffectRunner:null,changeDetectionScheduler:_},I=g.createRenderer(null,this.componentDef),A=this.componentDef.selectors[0][0]||"div",P=r?QN(I,r,this.componentDef.encapsulation,h):O_(I,A,UR(A)),U=512;this.componentDef.signals?U|=4096:this.componentDef.onPush||(U|=16);let q=null;P!==null&&(q=d0(P,h,!0));let W=y0(0,null,null,1,0,null,null,null,null,null,null),le=Rd(null,W,null,U,null,null,x,I,h,null,q);Jg(le);let Ke,me,z=null;try{let ue=this.componentDef,G,Zn=null;ue.findHostDirectiveDefs?(G=[],Zn=new Map,ue.findHostDirectiveDefs(ue,G,Zn),G.push(ue)):G=[ue];let Cn=HR(le,P);z=zR(Cn,P,ue,G,le,x,I),me=Zg(W,ur),P&&$R(I,ue,P,r),n!==void 0&&qR(me,this.ngContentSelectors,n),Ke=GR(z,ue,G,Zn,le,[YR]),C0(W,le,null)}catch(ue){throw z!==null&&tg(z),tg(le),ue}finally{e0()}return new wg(this.componentType,Ke,Js(me,le),le,me)}finally{$e(s)}}},wg=class extends gg{constructor(t,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Uo(i,void 0,!1),this.componentType=t}setInput(t,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[t])){if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),n))return;let s=this._rootLView;w0(s[be],s,i,t,n),this.previousInputValues.set(t,n);let c=no(this._tNode.index,s);v0(c,1)}}get injector(){return new Ro(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}};function HR(e,t){let n=e[be],r=ur;return e[r]=t,Od(n,r,2,"#host",null)}function zR(e,t,n,r,i,s,c){let h=i[be];WR(r,e,t,c);let g=null;t!==null&&(g=d0(t,i[Hs]));let m=s.rendererFactory.createRenderer(t,n),_=16;n.signals?_=4096:n.onPush&&(_=64);let x=Rd(i,Y_(n),null,_,i[e.index],e,s,m,null,null,g);return h.firstCreatePass&&fg(h,e,r.length-1),Pd(i,x),i[e.index]=x}function WR(e,t,n,r){for(let i of e)t.mergedAttrs=fl(t.mergedAttrs,i.hostAttrs);t.mergedAttrs!==null&&(yg(t,t.mergedAttrs,!0),n!==null&&j_(r,n,t))}function GR(e,t,n,r,i,s){let c=Gn(),h=i[be],g=dr(c,i);X_(h,i,c,n,null,r);for(let _=0;_<n.length;_++){let x=c.directiveStart+_,I=Vo(i,h,x,c);jo(I,i)}K_(h,i,c),g&&jo(g,i);let m=Vo(i,h,c.directiveStart+c.componentOffset,c);if(e[xn]=i[xn]=m,s!==null)for(let _ of s)_(m,t);return G_(h,c,i),m}function $R(e,t,n,r){if(r)Bp(e,n,["ng-version","18.2.7"]);else{let{attrs:i,classes:s}=FT(t.selectors[0]);i&&Bp(e,n,i),s&&s.length>0&&V_(e,n,s.join(" "))}}function qR(e,t,n){let r=e.projection=[];for(let i=0;i<t.length;i++){let s=n[i];r.push(s!=null?Array.from(s):null)}}function YR(){let e=Gn();i0(tt()[be],e)}var na=(()=>{class e{static{this.__NG_ELEMENT_ID__=ZR}}return e})();function ZR(){let e=Gn();return mx(e,tt())}var QR=na,gx=class extends QR{constructor(t,n,r){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=r}get element(){return Js(this._hostTNode,this._hostLView)}get injector(){return new Ro(this._hostTNode,this._hostLView)}get parentInjector(){let t=o0(this._hostTNode,this._hostLView);if(e_(t)){let n=ld(t,this._hostLView),r=ad(t),i=n[be].data[r+8];return new Ro(i,n)}else return new Ro(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){let n=KC(this._lContainer);return n!==null&&n[t]||null}get length(){return this._lContainer.length-En}createEmbeddedView(t,n,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let c=Cl(this._lContainer,t.ssrId),h=t.createEmbeddedViewImpl(n||{},s,c);return this.insertImpl(h,i,yl(this._hostTNode,c)),h}createComponent(t,n,r,i,s){let c=t&&!JT(t),h;if(c)h=n;else{let P=n||{};h=P.index,r=P.injector,i=P.projectableNodes,s=P.environmentInjector||P.ngModuleRef}let g=c?t:new vl(Oo(t)),m=r||this.parentInjector;if(!s&&g.ngModule==null){let U=(c?m:this.parentInjector).get(cr,null);U&&(s=U)}let _=Oo(g.componentType??{}),x=Cl(this._lContainer,_?.id??null),I=x?.firstChild??null,A=g.create(m,i,I,s);return this.insertImpl(A.hostView,h,yl(this._hostTNode,x)),A}insert(t,n){return this.insertImpl(t,n,!0)}insertImpl(t,n,r){let i=t._lView;if(aM(i)){let h=this.indexOf(t);if(h!==-1)this.detach(h);else{let g=i[bn],m=new gx(g,g[Or],g[bn]);m.detach(m.indexOf(t))}}let s=this._adjustIndex(n),c=this._lContainer;return Ld(c,i,s,r),t.attachToViewContainerRef(),gv(Ap(c),s,t),t}move(t,n){return this.insert(t,n)}indexOf(t){let n=KC(this._lContainer);return n!==null?n.indexOf(t):-1}remove(t){let n=this._adjustIndex(t,-1),r=ml(this._lContainer,n);r&&(nd(Ap(this._lContainer),n),Md(r[be],r))}detach(t){let n=this._adjustIndex(t,-1),r=ml(this._lContainer,n);return r&&nd(Ap(this._lContainer),n)!=null?new Uo(r):null}_adjustIndex(t,n=0){return t??this.length+n}};function KC(e){return e[od]}function Ap(e){return e[od]||(e[od]=[])}function mx(e,t){let n,r=t[e.index];return _i(r)?n=r:(n=J_(r,t,null,e),t[e.index]=n,Pd(t,n)),KR(n,t,e,r),new gx(n,e,t)}function XR(e,t){let n=e[zt],r=n.createComment(""),i=dr(t,e),s=F_(n,i);return fd(n,s,r,BN(n,i),!1),r}var KR=tO,JR=()=>!1;function eO(e,t,n){return JR(e,t,n)}function tO(e,t,n,r){if(e[ko])return;let i;n.type&8?i=Yr(r):i=XR(t,n),e[ko]=i}var Cg=class e{constructor(t){this.queryList=t,this.matches=null}clone(){return new e(this.queryList)}setDirty(){this.queryList.setDirty()}},vg=class e{constructor(t=[]){this.queries=t}createEmbeddedView(t){let n=t.queries;if(n!==null){let r=t.contentQueries!==null?t.contentQueries[0]:n.length,i=[];for(let s=0;s<r;s++){let c=n.getByIndex(s),h=this.queries[c.indexInDeclarationView];i.push(h.clone())}return new e(i)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}finishViewCreation(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let n=0;n<this.queries.length;n++)E0(t,n).matches!==null&&this.queries[n].setDirty()}},_g=class{constructor(t,n,r=null){this.flags=n,this.read=r,typeof t=="string"?this.predicate=cO(t):this.predicate=t}},xg=class e{constructor(t=[]){this.queries=t}elementStart(t,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(t,n)}elementEnd(t){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(t)}embeddedTView(t){let n=null;for(let r=0;r<this.length;r++){let i=n!==null?n.length:0,s=this.getByIndex(r).embeddedTView(t,i);s&&(s.indexInDeclarationView=r,n!==null?n.push(s):n=[s])}return n!==null?new e(n):null}template(t,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(t,n)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}},Eg=class e{constructor(t,n=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(t,n){this.isApplyingToNode(n)&&this.matchTNode(t,n)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,n){this.elementStart(t,n)}embeddedTView(t,n){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,n),new e(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,r=t.parent;for(;r!==null&&r.type&8&&r.index!==n;)r=r.parent;return n===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(t,n){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let s=r[i];this.matchTNodeWithReadOption(t,n,nO(n,s)),this.matchTNodeWithReadOption(t,n,Xu(n,t,s,!1,!1))}else r===wl?n.type&4&&this.matchTNodeWithReadOption(t,n,-1):this.matchTNodeWithReadOption(t,n,Xu(n,t,r,!1,!1))}matchTNodeWithReadOption(t,n,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===Qr||i===na||i===wl&&n.type&4)this.addMatch(n.index,-2);else{let s=Xu(n,t,i,!1,!1);s!==null&&this.addMatch(n.index,s)}else this.addMatch(n.index,r)}}addMatch(t,n){this.matches===null?this.matches=[t,n]:this.matches.push(t,n)}};function nO(e,t){let n=e.localNames;if(n!==null){for(let r=0;r<n.length;r+=2)if(n[r]===t)return n[r+1]}return null}function rO(e,t){return e.type&11?Js(e,t):e.type&4?_0(e,t):null}function iO(e,t,n,r){return n===-1?rO(t,e):n===-2?oO(e,t,r):Vo(e,e[be],n,t)}function oO(e,t,n){if(n===Qr)return Js(t,e);if(n===wl)return _0(t,e);if(n===na)return mx(t,e)}function yx(e,t,n,r){let i=t[hi].queries[r];if(i.matches===null){let s=e.data,c=n.matches,h=[];for(let g=0;c!==null&&g<c.length;g+=2){let m=c[g];if(m<0)h.push(null);else{let _=s[m];h.push(iO(t,_,c[g+1],n.metadata.read))}}i.matches=h}return i.matches}function bg(e,t,n,r){let i=e.queries.getByIndex(n),s=i.matches;if(s!==null){let c=yx(e,t,i,n);for(let h=0;h<s.length;h+=2){let g=s[h];if(g>0)r.push(c[h/2]);else{let m=s[h+1],_=t[-g];for(let x=En;x<_.length;x++){let I=_[x];I[Po]===I[bn]&&bg(I[be],I,m,r)}if(_[zs]!==null){let x=_[zs];for(let I=0;I<x.length;I++){let A=x[I];bg(A[be],A,m,r)}}}}}return r}function sO(e,t){return e[hi].queries[t].queryList}function aO(e,t,n){let r=new eg((n&4)===4);return JN(e,t,r,r.destroy),(t[hi]??=new vg).queries.push(new Cg(r))-1}function lO(e,t,n){let r=gn();return r.firstCreatePass&&(uO(r,new _g(e,t,n),-1),(t&2)===2&&(r.staticViewQueries=!0)),aO(r,tt(),t)}function cO(e){return e.split(",").map(t=>t.trim())}function uO(e,t,n){e.queries===null&&(e.queries=new xg),e.queries.track(new Eg(t,n))}function E0(e,t){return e.queries.getByIndex(t)}function dO(e,t){let n=e[be],r=E0(n,t);return r.crossesNgTemplate?bg(n,e,t,[]):yx(n,e,r,t)}var JC=new Set;function ra(e){JC.has(e)||(JC.add(e),performance?.mark?.("mark_feature_usage",{detail:{feature:e}}))}function fO(e){return typeof e=="function"&&e[ci]!==void 0}function Dl(e,t){ra("NgSignals");let n=Yw(e),r=n[ci];return t?.equal&&(r.equal=t.equal),n.set=i=>ep(r,i),n.update=i=>Zw(r,i),n.asReadonly=hO.bind(n),n}function hO(){let e=this[ci];if(e.readonlyFn===void 0){let t=()=>this();t[ci]=e,e.readonlyFn=t}return e.readonlyFn}function wx(e){return fO(e)&&typeof e.set=="function"}function pO(e){return Object.getPrototypeOf(e.prototype).constructor}function Di(e){let t=pO(e.type),n=!0,r=[e];for(;t;){let i;if(Ji(e))i=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new he(903,!1);i=t.\u0275dir}if(i){if(n){r.push(i);let c=e;c.inputs=Gu(e.inputs),c.inputTransforms=Gu(e.inputTransforms),c.declaredInputs=Gu(e.declaredInputs),c.outputs=Gu(e.outputs);let h=i.hostBindings;h&&CO(e,h);let g=i.viewQuery,m=i.contentQueries;if(g&&yO(e,g),m&&wO(e,m),gO(e,i),tT(e.outputs,i.outputs),Ji(i)&&i.data.animation){let _=e.data;_.animation=(_.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let c=0;c<s.length;c++){let h=s[c];h&&h.ngInherit&&h(e),h===Di&&(n=!1)}}t=Object.getPrototypeOf(t)}mO(r)}function gO(e,t){for(let n in t.inputs){if(!t.inputs.hasOwnProperty(n)||e.inputs.hasOwnProperty(n))continue;let r=t.inputs[n];if(r!==void 0&&(e.inputs[n]=r,e.declaredInputs[n]=t.declaredInputs[n],t.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!t.inputTransforms.hasOwnProperty(i))continue;e.inputTransforms??={},e.inputTransforms[i]=t.inputTransforms[i]}}}function mO(e){let t=0,n=null;for(let r=e.length-1;r>=0;r--){let i=e[r];i.hostVars=t+=i.hostVars,i.hostAttrs=fl(i.hostAttrs,n=fl(n,i.hostAttrs))}}function Gu(e){return e===Vs?{}:e===Hn?[]:e}function yO(e,t){let n=e.viewQuery;n?e.viewQuery=(r,i)=>{t(r,i),n(r,i)}:e.viewQuery=t}function wO(e,t){let n=e.contentQueries;n?e.contentQueries=(r,i,s)=>{t(r,i,s),n(r,i,s)}:e.contentQueries=t}function CO(e,t){let n=e.hostBindings;n?e.hostBindings=(r,i)=>{t(r,i),n(r,i)}:e.hostBindings=t}var to=class{},_l=class{};var Ig=class extends to{constructor(t,n,r,i=!0){super(),this.ngModuleType=t,this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new gd(this);let s=Ev(t);this._bootstrapComponents=R_(s.bootstrap),this._r3Injector=c_(t,n,[{provide:to,useValue:this},{provide:$s,useValue:this.componentFactoryResolver},...r],zn(t),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}},Dg=class extends _l{constructor(t){super(),this.moduleType=t}create(t){return new Ig(this.moduleType,t,[])}};var md=class extends to{constructor(t){super(),this.componentFactoryResolver=new gd(this),this.instance=null;let n=new hl([...t.providers,{provide:to,useValue:this},{provide:$s,useValue:this.componentFactoryResolver}],t.parent||qg(),t.debugName,new Set(["environment"]));this.injector=n,t.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}};function b0(e,t,n=null){return new md({providers:e,parent:t,debugName:n,runEnvironmentInitializers:!0}).injector}function Zr(e,t,n){let r=e[t];return Object.is(r,n)?!1:(e[t]=n,!0)}function vO(e,t,n,r){let i=Zr(e,t,n);return Zr(e,t+1,r)||i}function _O(e){return(e.flags&32)===32}function xO(e,t,n,r,i,s,c,h,g){let m=t.consts,_=Od(t,e,4,c||null,h||null);Q_(t,n,_,Ws(m,g)),i0(t,_);let x=_.tView=y0(2,_,r,i,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,m,null);return t.queries!==null&&(t.queries.template(t,_),x.queries=t.queries.embeddedTView(_)),_}function Sg(e,t,n,r,i,s,c,h,g,m){let _=n+ur,x=t.firstCreatePass?xO(_,t,e,r,i,s,c,h,g):t.data[_];bl(x,!1);let I=EO(t,e,x,n);n0()&&g0(t,e,I,x),jo(I,e);let A=J_(I,e,I,x);return e[_]=A,Pd(e,A),eO(A,x,e),Yg(x)&&$_(t,e,x),g!=null&&q_(e,x,m),x}function on(e,t,n,r,i,s,c,h){let g=tt(),m=gn(),_=Ws(m.consts,s);return Sg(g,m,e,t,n,r,i,_,c,h),on}var EO=bO;function bO(e,t,n,r){return r0(!0),t[zt].createComment("")}var ll=function(e){return e[e.EarlyRead=0]="EarlyRead",e[e.Write=1]="Write",e[e.MixedReadWrite=2]="MixedReadWrite",e[e.Read=3]="Read",e}(ll||{}),IO=(()=>{class e{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=pe({token:e,providedIn:"root",factory:()=>new e})}}return e})(),ev=class e{constructor(){this.ngZone=te(Xt),this.scheduler=te(Gs),this.errorHandler=te(pi,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[ll.EarlyRead,ll.Write,ll.MixedReadWrite,ll.Read]}execute(){this.executing=!0;for(let t of e.PHASES)for(let n of this.sequences)if(!(n.erroredOrDestroyed||!n.hooks[t]))try{n.pipelinedValue=this.ngZone.runOutsideAngular(()=>n.hooks[t](n.pipelinedValue))}catch(r){n.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let t of this.sequences)t.afterRun(),t.once&&this.sequences.delete(t);for(let t of this.deferredRegistrations)this.sequences.add(t);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(t){this.executing?this.deferredRegistrations.add(t):(this.sequences.add(t),this.scheduler.notify(6))}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}static{this.\u0275prov=pe({token:e,providedIn:"root",factory:()=>new e})}};function Fd(e,t,n,r){let i=tt(),s=Qs();if(Zr(i,s,t)){let c=gn(),h=t0();pR(h,i,e,t,n,r)}return Fd}function DO(e,t,n,r){return Zr(e,Qs(),n)?t+ul(n)+r:Pr}function SO(e,t,n,r,i,s){let c=CM(),h=vO(e,c,n,i);return Xg(2),h?t+ul(n)+r+ul(i)+s:Pr}function $u(e,t){return e<<17|t<<2}function Ho(e){return e>>17&32767}function AO(e){return(e&2)==2}function TO(e,t){return e&131071|t<<17}function Ag(e){return e|2}function Ys(e){return(e&131068)>>2}function Tp(e,t){return e&-131069|t<<2}function MO(e){return(e&1)===1}function Tg(e){return e|1}function NO(e,t,n,r,i,s){let c=s?t.classBindings:t.styleBindings,h=Ho(c),g=Ys(c);e[r]=n;let m=!1,_;if(Array.isArray(n)){let x=n;_=x[1],(_===null||El(x,_)>0)&&(m=!0)}else _=n;if(i)if(g!==0){let I=Ho(e[h+1]);e[r+1]=$u(I,h),I!==0&&(e[I+1]=Tp(e[I+1],r)),e[h+1]=TO(e[h+1],r)}else e[r+1]=$u(h,0),h!==0&&(e[h+1]=Tp(e[h+1],r)),h=r;else e[r+1]=$u(g,0),h===0?h=r:e[g+1]=Tp(e[g+1],r),g=r;m&&(e[r+1]=Ag(e[r+1])),tv(e,_,r,!0),tv(e,_,r,!1),RO(t,_,e,r,s),c=$u(h,g),s?t.classBindings=c:t.styleBindings=c}function RO(e,t,n,r,i){let s=i?e.residualClasses:e.residualStyles;s!=null&&typeof t=="string"&&El(s,t)>=0&&(n[r+1]=Tg(n[r+1]))}function tv(e,t,n,r){let i=e[n+1],s=t===null,c=r?Ho(i):Ys(i),h=!1;for(;c!==0&&(h===!1||s);){let g=e[c],m=e[c+1];OO(g,t)&&(h=!0,e[c+1]=r?Tg(m):Ag(m)),c=r?Ho(m):Ys(m)}h&&(e[n+1]=r?Ag(i):Tg(i))}function OO(e,t){return e===null||t==null||(Array.isArray(e)?e[1]:e)===t?!0:Array.isArray(e)&&typeof t=="string"?El(e,t)>=0:!1}var Mr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function PO(e){return e.substring(Mr.key,Mr.keyEnd)}function kO(e){return LO(e),Cx(e,vx(e,0,Mr.textEnd))}function Cx(e,t){let n=Mr.textEnd;return n===t?-1:(t=Mr.keyEnd=FO(e,Mr.key=t,n),vx(e,t,n))}function LO(e){Mr.key=0,Mr.keyEnd=0,Mr.value=0,Mr.valueEnd=0,Mr.textEnd=e.length}function vx(e,t,n){for(;t<n&&e.charCodeAt(t)<=32;)t++;return t}function FO(e,t,n){for(;t<n&&e.charCodeAt(t)>32;)t++;return t}function kr(e,t,n){let r=tt(),i=Qs();if(Zr(r,i,t)){let s=gn(),c=t0();Z_(s,c,r,e,t,r[zt],n,!1)}return kr}function Mg(e,t,n,r,i){let s=t.inputs,c=i?"class":"style";w0(e,n,s[c],c,r)}function Bd(e,t,n){return xx(e,t,n,!1),Bd}function oo(e,t){return xx(e,t,null,!0),oo}function _x(e){VO(GO,BO,e,!0)}function BO(e,t){for(let n=kO(t);n>=0;n=Cx(t,n))zg(e,PO(t),!0)}function xx(e,t,n,r){let i=tt(),s=gn(),c=Xg(2);if(s.firstUpdatePass&&bx(s,e,c,r),t!==Pr&&Zr(i,c,t)){let h=s.data[Ei()];Ix(s,h,i,i[zt],e,i[c+1]=qO(t,n),r,c)}}function VO(e,t,n,r){let i=gn(),s=Xg(2);i.firstUpdatePass&&bx(i,null,s,r);let c=tt();if(n!==Pr&&Zr(c,s,n)){let h=i.data[Ei()];if(Dx(h,r)&&!Ex(i,s)){let g=r?h.classesWithoutHost:h.stylesWithoutHost;g!==null&&(n=kp(g,n||"")),Mg(i,h,c,n,r)}else $O(i,h,c,c[zt],c[s+1],c[s+1]=WO(e,t,n),r,s)}}function Ex(e,t){return t>=e.expandoStartIndex}function bx(e,t,n,r){let i=e.data;if(i[n+1]===null){let s=i[Ei()],c=Ex(e,n);Dx(s,r)&&t===null&&!c&&(t=!1),t=jO(i,s,t,r),NO(i,s,t,n,c,r)}}function jO(e,t,n,r){let i=bM(e),s=r?t.residualClasses:t.residualStyles;if(i===null)(r?t.classBindings:t.styleBindings)===0&&(n=Mp(null,e,t,n,r),n=xl(n,t.attrs,r),s=null);else{let c=t.directiveStylingLast;if(c===-1||e[c]!==i)if(n=Mp(i,e,t,n,r),s===null){let g=UO(e,t,r);g!==void 0&&Array.isArray(g)&&(g=Mp(null,e,t,g[1],r),g=xl(g,t.attrs,r),HO(e,t,r,g))}else s=zO(e,t,r)}return s!==void 0&&(r?t.residualClasses=s:t.residualStyles=s),n}function UO(e,t,n){let r=n?t.classBindings:t.styleBindings;if(Ys(r)!==0)return e[Ho(r)]}function HO(e,t,n,r){let i=n?t.classBindings:t.styleBindings;e[Ho(i)]=r}function zO(e,t,n){let r,i=t.directiveEnd;for(let s=1+t.directiveStylingLast;s<i;s++){let c=e[s].hostAttrs;r=xl(r,c,n)}return xl(r,t.attrs,n)}function Mp(e,t,n,r,i){let s=null,c=n.directiveEnd,h=n.directiveStylingLast;for(h===-1?h=n.directiveStart:h++;h<c&&(s=t[h],r=xl(r,s.hostAttrs,i),s!==e);)h++;return e!==null&&(n.directiveStylingLast=h),r}function xl(e,t,n){let r=n?1:2,i=-1;if(t!==null)for(let s=0;s<t.length;s++){let c=t[s];typeof c=="number"?i=c:i===r&&(Array.isArray(e)||(e=e===void 0?[]:["",e]),zg(e,c,n?!0:t[++s]))}return e===void 0?null:e}function WO(e,t,n){if(n==null||n==="")return Hn;let r=[],i=bi(n);if(Array.isArray(i))for(let s=0;s<i.length;s++)e(r,i[s],!0);else if(typeof i=="object")for(let s in i)i.hasOwnProperty(s)&&e(r,s,i[s]);else typeof i=="string"&&t(r,i);return r}function GO(e,t,n){let r=String(t);r!==""&&!r.includes(" ")&&zg(e,r,n)}function $O(e,t,n,r,i,s,c,h){i===Pr&&(i=Hn);let g=0,m=0,_=0<i.length?i[0]:null,x=0<s.length?s[0]:null;for(;_!==null||x!==null;){let I=g<i.length?i[g+1]:void 0,A=m<s.length?s[m+1]:void 0,P=null,U;_===x?(g+=2,m+=2,I!==A&&(P=x,U=A)):x===null||_!==null&&_<x?(g+=2,P=_):(m+=2,P=x,U=A),P!==null&&Ix(e,t,n,r,P,U,c,h),_=g<i.length?i[g]:null,x=m<s.length?s[m]:null}}function Ix(e,t,n,r,i,s,c,h){if(!(t.type&3))return;let g=e.data,m=g[h+1],_=MO(m)?nv(g,t,n,i,Ys(m),c):void 0;if(!yd(_)){yd(s)||AO(m)&&(s=nv(g,null,n,i,h,c));let x=Fv(Ei(),n);GN(r,c,x,i,s)}}function nv(e,t,n,r,i,s){let c=t===null,h;for(;i>0;){let g=e[i],m=Array.isArray(g),_=m?g[1]:g,x=_===null,I=n[i+1];I===Pr&&(I=x?Hn:void 0);let A=x?vp(I,r):_===r?I:void 0;if(m&&!yd(A)&&(A=vp(g,r)),yd(A)&&(h=A,c))return h;let P=e[i+1];i=c?Ho(P):Ys(P)}if(t!==null){let g=s?t.residualClasses:t.residualStyles;g!=null&&(h=vp(g,r))}return h}function yd(e){return e!==void 0}function qO(e,t){return e==null||e===""||(typeof t=="string"?e=e+t:typeof e=="object"&&(e=zn(bi(e)))),e}function Dx(e,t){return(e.flags&(t?8:16))!==0}var Ng=class{destroy(t){}updateValue(t,n){}swap(t,n){let r=Math.min(t,n),i=Math.max(t,n),s=this.detach(i);if(i-r>1){let c=this.detach(r);this.attach(r,s),this.attach(i,c)}else this.attach(r,s)}move(t,n){this.attach(n,this.detach(t))}};function Np(e,t,n,r,i){return e===n&&Object.is(t,r)?1:Object.is(i(e,t),i(n,r))?-1:0}function YO(e,t,n){let r,i,s=0,c=e.length-1,h=void 0;if(Array.isArray(t)){let g=t.length-1;for(;s<=c&&s<=g;){let m=e.at(s),_=t[s],x=Np(s,m,s,_,n);if(x!==0){x<0&&e.updateValue(s,_),s++;continue}let I=e.at(c),A=t[g],P=Np(c,I,g,A,n);if(P!==0){P<0&&e.updateValue(c,A),c--,g--;continue}let U=n(s,m),q=n(c,I),W=n(s,_);if(Object.is(W,q)){let le=n(g,A);Object.is(le,U)?(e.swap(s,c),e.updateValue(c,A),g--,c--):e.move(c,s),e.updateValue(s,_),s++;continue}if(r??=new wd,i??=iv(e,s,c,n),Rg(e,r,s,W))e.updateValue(s,_),s++,c++;else if(i.has(W))r.set(U,e.detach(s)),c--;else{let le=e.create(s,t[s]);e.attach(s,le),s++,c++}}for(;s<=g;)rv(e,r,n,s,t[s]),s++}else if(t!=null){let g=t[Symbol.iterator](),m=g.next();for(;!m.done&&s<=c;){let _=e.at(s),x=m.value,I=Np(s,_,s,x,n);if(I!==0)I<0&&e.updateValue(s,x),s++,m=g.next();else{r??=new wd,i??=iv(e,s,c,n);let A=n(s,x);if(Rg(e,r,s,A))e.updateValue(s,x),s++,c++,m=g.next();else if(!i.has(A))e.attach(s,e.create(s,x)),s++,c++,m=g.next();else{let P=n(s,_);r.set(P,e.detach(s)),c--}}}for(;!m.done;)rv(e,r,n,e.length,m.value),m=g.next()}for(;s<=c;)e.destroy(e.detach(c--));r?.forEach(g=>{e.destroy(g)})}function Rg(e,t,n,r){return t!==void 0&&t.has(r)?(e.attach(n,t.get(r)),t.delete(r),!0):!1}function rv(e,t,n,r,i){if(Rg(e,t,r,n(r,i)))e.updateValue(r,i);else{let s=e.create(r,i);e.attach(r,s)}}function iv(e,t,n,r){let i=new Set;for(let s=t;s<=n;s++)i.add(r(s,e.at(s)));return i}var wd=class{constructor(){this.kvMap=new Map,this._vMap=void 0}has(t){return this.kvMap.has(t)}delete(t){if(!this.has(t))return!1;let n=this.kvMap.get(t);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(t,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(t),!0}get(t){return this.kvMap.get(t)}set(t,n){if(this.kvMap.has(t)){let r=this.kvMap.get(t);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,n)}else this.kvMap.set(t,n)}forEach(t){for(let[n,r]of this.kvMap)if(t(r,n),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),t(r,n)}}};function Kt(e,t){ra("NgControlFlow");let n=tt(),r=Qs(),i=n[r]!==Pr?n[r]:-1,s=i!==-1?Cd(n,ur+i):void 0,c=0;if(Zr(n,r,e)){let h=$e(null);try{if(s!==void 0&&sx(s,c),e!==-1){let g=ur+e,m=Cd(n,g),_=Lg(n[be],g),x=Cl(m,_.tView.ssrId),I=kd(n,_,t,{dehydratedView:x});Ld(m,I,c,yl(_,x))}}finally{$e(h)}}else if(s!==void 0){let h=ox(s,c);h!==void 0&&(h[xn]=t)}}var Og=class{constructor(t,n,r){this.lContainer=t,this.$implicit=n,this.$index=r}get $count(){return this.lContainer.length-En}};function In(e,t){return t}var Pg=class{constructor(t,n,r){this.hasEmptyBlock=t,this.trackByFn=n,this.liveCollection=r}};function Dn(e,t,n,r,i,s,c,h,g,m,_,x,I){ra("NgControlFlow");let A=tt(),P=gn(),U=g!==void 0,q=tt(),W=h?c.bind(q[Rr][xn]):c,le=new Pg(U,W);q[ur+e]=le,Sg(A,P,e+1,t,n,r,i,Ws(P.consts,s)),U&&Sg(A,P,e+2,g,m,_,x,Ws(P.consts,I))}var kg=class extends Ng{constructor(t,n,r){super(),this.lContainer=t,this.hostLView=n,this.templateTNode=r,this.operationsCounter=void 0,this.needsIndexUpdate=!1}get length(){return this.lContainer.length-En}at(t){return this.getLView(t)[xn].$implicit}attach(t,n){let r=n[pl];this.needsIndexUpdate||=t!==this.length,Ld(this.lContainer,n,t,yl(this.templateTNode,r))}detach(t){return this.needsIndexUpdate||=t!==this.length-1,ZO(this.lContainer,t)}create(t,n){let r=Cl(this.lContainer,this.templateTNode.tView.ssrId),i=kd(this.hostLView,this.templateTNode,new Og(this.lContainer,n,t),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(t){Md(t[be],t),this.operationsCounter?.recordDestroy()}updateValue(t,n){this.getLView(t)[xn].$implicit=n}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let t=0;t<this.length;t++)this.getLView(t)[xn].$index=t}getLView(t){return QO(this.lContainer,t)}};function Sn(e){let t=$e(null),n=Ei();try{let r=tt(),i=r[be],s=r[n],c=n+1,h=Cd(r,c);if(s.liveCollection===void 0){let m=Lg(i,c);s.liveCollection=new kg(h,r,m)}else s.liveCollection.reset();let g=s.liveCollection;if(YO(g,e,s.trackByFn),g.updateIndexes(),s.hasEmptyBlock){let m=Qs(),_=g.length===0;if(Zr(r,m,_)){let x=n+2,I=Cd(r,x);if(_){let A=Lg(i,x),P=Cl(I,A.tView.ssrId),U=kd(r,A,void 0,{dehydratedView:P});Ld(I,U,0,yl(A,P))}else sx(I,0)}}}finally{$e(t)}}function Cd(e,t){return e[t]}function ZO(e,t){return ml(e,t)}function QO(e,t){return ox(e,t)}function Lg(e,t){return Zg(e,t)}function XO(e,t,n,r,i,s){let c=t.consts,h=Ws(c,i),g=Od(t,e,2,r,h);return Q_(t,n,g,Ws(c,s)),g.attrs!==null&&yg(g,g.attrs,!1),g.mergedAttrs!==null&&yg(g,g.mergedAttrs,!0),t.queries!==null&&t.queries.elementStart(t,g),g}function N(e,t,n,r){let i=tt(),s=gn(),c=ur+e,h=i[zt],g=s.firstCreatePass?XO(c,s,i,t,n,r):s.data[c],m=KO(s,i,g,h,t,e);i[c]=m;let _=Yg(g);return bl(g,!0),j_(h,m,g),!_O(g)&&n0()&&g0(s,i,m,g),uM()===0&&jo(m,i),dM(),_&&($_(s,i,g),G_(s,g,i)),r!==null&&q_(i,g),N}function R(){let e=Gn();Wv()?yM():(e=e.parent,bl(e,!1));let t=e;pM(t)&&gM(),fM();let n=gn();return n.firstCreatePass&&(i0(n,e),Rv(e)&&n.queries.elementEnd(e)),t.classesWithoutHost!=null&&NM(t)&&Mg(n,t,tt(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&RM(t)&&Mg(n,t,tt(),t.stylesWithoutHost,!1),R}function fe(e,t,n,r){return N(e,t,n,r),R(),fe}var KO=(e,t,n,r,i,s)=>(r0(!0),O_(r,i,SM()));function At(){return tt()}var vd="en-US";var JO=vd;function e3(e){typeof e=="string"&&(JO=e.toLowerCase().replace(/_/g,"-"))}var t3=(e,t,n)=>{};function X(e,t,n,r){let i=tt(),s=gn(),c=Gn();return Sx(s,i,i[zt],c,e,t,r),X}function n3(e,t,n,r){let i=e.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let c=i[s];if(c===n&&i[s+1]===r){let h=t[id],g=i[s+2];return h.length>g?h[g]:null}typeof c=="string"&&(s+=2)}return null}function Sx(e,t,n,r,i,s,c){let h=Yg(r),m=e.firstCreatePass&&nx(e),_=t[xn],x=tx(t),I=!0;if(r.type&3||c){let U=dr(r,t),q=c?c(U):U,W=x.length,le=c?me=>c(Yr(me[r.index])):r.index,Ke=null;if(!c&&h&&(Ke=n3(e,t,i,r.index)),Ke!==null){let me=Ke.__ngLastListenerFn__||Ke;me.__ngNextListenerFn__=s,Ke.__ngLastListenerFn__=s,I=!1}else{s=sv(r,t,_,s),t3(U,i,s);let me=n.listen(q,i,s);x.push(s,me),m&&m.push(i,le,W,W+1)}}else s=sv(r,t,_,s);let A=r.outputs,P;if(I&&A!==null&&(P=A[i])){let U=P.length;if(U)for(let q=0;q<U;q+=2){let W=P[q],le=P[q+1],z=t[W][le].subscribe(s),ue=x.length;x.push(s,z),m&&m.push(i,r.index,ue,-(ue+1))}}}function ov(e,t,n,r){let i=$e(null);try{return Gr(6,t,n),n(r)!==!1}catch(s){return rx(e,s),!1}finally{Gr(7,t,n),$e(i)}}function sv(e,t,n,r){return function i(s){if(s===Function)return r;let c=e.componentOffset>-1?no(e.index,t):t;v0(c,5);let h=ov(t,n,r,s),g=i.__ngNextListenerFn__;for(;g;)h=ov(t,n,g,s)&&h,g=g.__ngNextListenerFn__;return h}}function nt(e=1){return DM(e)}function Vd(e,t,n){lO(e,t,n)}function Sl(e){let t=tt(),n=gn(),r=$v();Kg(r+1);let i=E0(n,r);if(e.dirty&&sM(t)===((i.metadata.flags&2)===2)){if(i.matches===null)e.reset([]);else{let s=dO(t,r);e.reset(s,KM),e.notifyOnChanges()}return!0}return!1}function Al(){return sO(tt(),$v())}function jd(e){let t=wM();return oM(t,ur+e)}function B(e,t=""){let n=tt(),r=gn(),i=e+ur,s=r.firstCreatePass?Od(r,i,1,t,null):r.data[i],c=r3(r,n,s,t,e);n[i]=c,n0()&&g0(r,n,c,s),bl(s,!1)}var r3=(e,t,n,r,i)=>(r0(!0),AN(t[zt],r));function fr(e){return Wt("",e,""),fr}function Wt(e,t,n){let r=tt(),i=DO(r,e,t,n);return i!==Pr&&ix(r,Ei(),i),Wt}function I0(e,t,n,r,i){let s=tt(),c=SO(s,e,t,n,r,i);return c!==Pr&&ix(s,Ei(),c),I0}function Tt(e,t,n){wx(t)&&(t=t());let r=tt(),i=Qs();if(Zr(r,i,t)){let s=gn(),c=t0();Z_(s,c,r,e,t,r[zt],n,!1)}return Tt}function kt(e,t){let n=wx(e);return n&&e.set(t),n}function Mt(e,t){let n=tt(),r=gn(),i=Gn();return Sx(r,n,n[zt],i,e,t),Mt}function i3(e,t,n){let r=gn();if(r.firstCreatePass){let i=Ji(e);Fg(n,r.data,r.blueprint,i,!0),Fg(t,r.data,r.blueprint,i,!1)}}function Fg(e,t,n,r,i){if(e=Rn(e),Array.isArray(e))for(let s=0;s<e.length;s++)Fg(e[s],t,n,r,i);else{let s=gn(),c=tt(),h=Gn(),g=Us(e)?e:Rn(e.provide),m=Tv(e),_=h.providerIndexes&1048575,x=h.directiveStart,I=h.providerIndexes>>20;if(Us(e)||!e.multi){let A=new Bo(m,i,Q),P=Op(g,t,i?_:_+I,x);P===-1?(Yp(cd(h,c),s,g),Rp(s,e,t.length),t.push(g),h.directiveStart++,h.directiveEnd++,i&&(h.providerIndexes+=1048576),n.push(A),c.push(A)):(n[P]=A,c[P]=A)}else{let A=Op(g,t,_+I,x),P=Op(g,t,_,_+I),U=A>=0&&n[A],q=P>=0&&n[P];if(i&&!q||!i&&!U){Yp(cd(h,c),s,g);let W=a3(i?s3:o3,n.length,i,r,m);!i&&q&&(n[P].providerFactory=W),Rp(s,e,t.length,0),t.push(g),h.directiveStart++,h.directiveEnd++,i&&(h.providerIndexes+=1048576),n.push(W),c.push(W)}else{let W=Ax(n[i?P:A],m,!i&&r);Rp(s,e,A>-1?A:P,W)}!i&&r&&q&&n[P].componentProviders++}}}function Rp(e,t,n,r){let i=Us(t),s=GT(t);if(i||s){let g=(s?Rn(t.useClass):t).prototype.ngOnDestroy;if(g){let m=e.destroyHooks||(e.destroyHooks=[]);if(!i&&t.multi){let _=m.indexOf(n);_===-1?m.push(n,[r,g]):m[_+1].push(r,g)}else m.push(n,g)}}}function Ax(e,t,n){return n&&e.componentProviders++,e.multi.push(t)-1}function Op(e,t,n,r){for(let i=n;i<r;i++)if(t[i]===e)return i;return-1}function o3(e,t,n,r){return Bg(this.multi,[])}function s3(e,t,n,r){let i=this.multi,s;if(this.providerFactory){let c=this.providerFactory.componentProviders,h=Vo(n,n[be],this.providerFactory.index,r);s=h.slice(0,c),Bg(i,s);for(let g=c;g<h.length;g++)s.push(h[g])}else s=[],Bg(i,s);return s}function Bg(e,t){for(let n=0;n<e.length;n++){let r=e[n];t.push(r())}return t}function a3(e,t,n,r,i){let s=new Bo(e,n,Q);return s.multi=[],s.index=t,s.componentProviders=0,Ax(s,i,r&&!n),s}function Tl(e,t=[]){return n=>{n.providersResolver=(r,i)=>i3(r,i?i(e):e,t)}}var l3=(()=>{class e{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=Dv(!1,n.type),i=r.length>0?b0([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=pe({token:e,providedIn:"environment",factory:()=>new e(Ue(cr))})}}return e})();function ae(e){ra("NgStandalone"),e.getStandaloneInjector=t=>t.get(l3).getOrCreateStandaloneInjector(e)}var Ud=(()=>{class e{log(n){console.log(n)}warn(n){console.warn(n)}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"platform"})}}return e})();var Tx=new xe("");function Wo(e){return!!e&&typeof e.then=="function"}function Mx(e){return!!e&&typeof e.subscribe=="function"}var Nx=new xe(""),Rx=(()=>{class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r}),this.appInits=te(Nx,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let s=i();if(Wo(s))n.push(s);else if(Mx(s)){let c=new Promise((h,g)=>{s.subscribe({complete:h,error:g})});n.push(c)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),D0=new xe("");function c3(){qw(()=>{throw new he(600,!1)})}function u3(e){return e.isBoundToModule}var d3=10;function f3(e,t,n){try{let r=n();return Wo(r)?r.catch(i=>{throw t.runOutsideAngular(()=>e.handleError(i)),i}):r}catch(r){throw t.runOutsideAngular(()=>e.handleError(r)),r}}var Go=(()=>{class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=te(QM),this.afterRenderManager=te(IO),this.zonelessEnabled=te(x0),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new fn,this.afterTick=new fn,this.componentTypes=[],this.components=[],this.isStable=te(Ks).hasPendingTasks.pipe(Ve(n=>!n)),this._injector=te(cr)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}get injector(){return this._injector}bootstrap(n,r){let i=n instanceof pd;if(!this._injector.get(Rx).done){let I=!i&&xv(n),A=!1;throw new he(405,A)}let c;i?c=n:c=this._injector.get($s).resolveComponentFactory(n),this.componentTypes.push(c.componentType);let h=u3(c)?void 0:this._injector.get(to),g=r||c.selector,m=c.create(eo.NULL,[],g,h),_=m.location.nativeElement,x=m.injector.get(Tx,null);return x?.registerApplication(_),m.onDestroy(()=>{this.detachView(m.hostView),Ku(this.components,m),x?.unregisterApplication(_)}),this._loadComponent(m),m}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new he(101,!1);let n=$e(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,$e(n),this.afterTick.next()}}synchronize(){let n=null;this._injector.destroyed||(n=this._injector.get(qs,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<d3;)this.synchronizeOnce(n)}synchronizeOnce(n){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:s}of this._views)h3(i,s,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else n?.begin?.(),n?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>Sd(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;Ku(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);let r=this._injector.get(D0,[]);[...this._bootstrapListeners,...r].forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>Ku(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new he(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function Ku(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}function h3(e,t,n,r){if(!n&&!Sd(e))return;cx(e,t,n&&!r?0:1)}var Vg=class{constructor(t,n){this.ngModuleFactory=t,this.componentFactories=n}},S0=(()=>{class e{compileModuleSync(n){return new Dg(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=Ev(n),s=R_(i.declarations).reduce((c,h)=>{let g=Oo(h);return g&&c.push(new vl(g)),c},[]);return new Vg(r,s)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var p3=(()=>{class e{constructor(){this.zone=te(Xt),this.changeDetectionScheduler=te(Gs),this.applicationRef=te(Go)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function g3({ngZoneFactory:e,ignoreChangesOutsideZone:t,scheduleInRootZone:n}){return e??=()=>new Xt(Pe(J({},m3()),{scheduleInRootZone:n})),[{provide:Xt,useFactory:e},{provide:js,multi:!0,useFactory:()=>{let r=te(p3,{optional:!0});return()=>r.initialize()}},{provide:js,multi:!0,useFactory:()=>{let r=te(y3);return()=>{r.initialize()}}},t===!0?{provide:hx,useValue:!0}:[],{provide:px,useValue:n??u_}]}function m3(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}var y3=(()=>{class e{constructor(){this.subscription=new Pt,this.initialized=!1,this.zone=te(Xt),this.pendingTasks=te(Ks)}initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Xt.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Xt.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var w3=(()=>{class e{constructor(){this.appRef=te(Go),this.taskService=te(Ks),this.ngZone=te(Xt),this.zonelessEnabled=te(x0),this.disableScheduling=te(hx,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new Pt,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(dd):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(te(px,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Jp||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?VC:f_;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(dd+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(n),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,VC(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function C3(){return typeof $localize<"u"&&$localize.locale||vd}var A0=new xe("",{providedIn:"root",factory:()=>te(A0,je.Optional|je.SkipSelf)||C3()});var Ox=new xe("");function qu(e){return!!e.platformInjector}function v3(e){let t=qu(e)?e.r3Injector:e.moduleRef.injector,n=t.get(Xt);return n.run(()=>{qu(e)?e.r3Injector.resolveInjectorInitializers():e.moduleRef.resolveInjectorInitializers();let r=t.get(pi,null),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:s=>{r.handleError(s)}})}),qu(e)){let s=()=>t.destroy(),c=e.platformInjector.get(Ox);c.add(s),t.onDestroy(()=>{i.unsubscribe(),c.delete(s)})}else e.moduleRef.onDestroy(()=>{Ku(e.allPlatformModules,e.moduleRef),i.unsubscribe()});return f3(r,n,()=>{let s=t.get(Rx);return s.runInitializers(),s.donePromise.then(()=>{let c=t.get(A0,vd);if(e3(c||vd),qu(e)){let h=t.get(Go);return e.rootComponent!==void 0&&h.bootstrap(e.rootComponent),h}else return _3(e.moduleRef,e.allPlatformModules),e.moduleRef})})})}function _3(e,t){let n=e.injector.get(Go);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(r=>n.bootstrap(r));else if(e.instance.ngDoBootstrap)e.instance.ngDoBootstrap(n);else throw new he(-403,!1);t.push(e)}var Ju=null;function x3(e=[],t){return eo.create({name:t,providers:[{provide:bd,useValue:"platform"},{provide:Ox,useValue:new Set([()=>Ju=null])},...e]})}function E3(e=[]){if(Ju)return Ju;let t=x3(e);return Ju=t,c3(),b3(t),t}function b3(e){e.get(c0,null)?.forEach(n=>n())}var Si=(()=>{class e{static{this.__NG_ELEMENT_ID__=I3}}return e})();function I3(e){return D3(Gn(),tt(),(e&16)===16)}function D3(e,t,n){if(Dd(e)&&!n){let r=no(e.index,t);return new Uo(r,r)}else if(e.type&175){let r=t[Rr];return new Uo(r,t)}return null}function Px(e){try{let{rootComponent:t,appProviders:n,platformProviders:r}=e,i=E3(r),s=[g3({}),{provide:Gs,useExisting:w3},...n||[]],c=new md({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1});return v3({r3Injector:c.injector,platformInjector:i,rootComponent:t})}catch(t){return Promise.reject(t)}}function Ml(e){return typeof e=="boolean"?e:e!=null&&e!=="false"}function Nl(e,t){ra("NgSignals");let n=Ww(e);return t?.equal&&(n[ci].equal=t.equal),n}function Ai(e){let t=$e(null);try{return e()}finally{$e(t)}}var Fx=null;function Ti(){return Fx}function Bx(e){Fx??=e}var Hd=class{};var Jn=new xe(""),Vx=(()=>{class e{historyGo(n){throw new Error("")}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=pe({token:e,factory:()=>te(T3),providedIn:"platform"})}}return e})();var T3=(()=>{class e extends Vx{constructor(){super(),this._doc=te(Jn),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Ti().getBaseHref(this._doc)}onPopState(n){let r=Ti().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=Ti().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=pe({token:e,factory:()=>new e,providedIn:"platform"})}}return e})();function jx(e,t){if(e.length==0)return t;if(t.length==0)return e;let n=0;return e.endsWith("/")&&n++,t.startsWith("/")&&n++,n==2?e+t.substring(1):n==1?e+t:e+"/"+t}function kx(e){let t=e.match(/#|\?|$/),n=t&&t.index||e.length,r=n-(e[n-1]==="/"?1:0);return e.slice(0,r)+e.slice(n)}function $o(e){return e&&e[0]!=="?"?"?"+e:e}var Wd=(()=>{class e{historyGo(n){throw new Error("")}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=pe({token:e,factory:()=>te(Ux),providedIn:"root"})}}return e})(),M3=new xe(""),Ux=(()=>{class e extends Wd{constructor(n,r){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??te(Jn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return jx(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+$o(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,s){let c=this.prepareExternalUrl(i+$o(s));this._platformLocation.pushState(n,r,c)}replaceState(n,r,i,s){let c=this.prepareExternalUrl(i+$o(s));this._platformLocation.replaceState(n,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static{this.\u0275fac=function(r){return new(r||e)(Ue(Vx),Ue(M3,8))}}static{this.\u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var Rl=(()=>{class e{constructor(n){this._subject=new St,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=O3(kx(Lx(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+$o(r))}normalize(n){return e.stripTrailingSlash(R3(this._basePath,Lx(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+$o(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+$o(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r,complete:i})}static{this.normalizeQueryParams=$o}static{this.joinWithSlash=jx}static{this.stripTrailingSlash=kx}static{this.\u0275fac=function(r){return new(r||e)(Ue(Wd))}}static{this.\u0275prov=pe({token:e,factory:()=>N3(),providedIn:"root"})}}return e})();function N3(){return new Rl(Ue(Wd))}function R3(e,t){if(!e||!t.startsWith(e))return t;let n=t.substring(e.length);return n===""||["/",";","?","#"].includes(n[0])?n:t}function Lx(e){return e.replace(/\/index.html$/,"")}function O3(e){if(new RegExp("^(https?:)?//").test(e)){let[,n]=e.split(/\/\/[^\/]+/);return n}return e}function Hx(e,t){t=encodeURIComponent(t);for(let n of e.split(";")){let r=n.indexOf("="),[i,s]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===t)return decodeURIComponent(s)}return null}var M0=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=wi({type:e})}static{this.\u0275inj=yi({})}}return e})(),zx="browser",P3="server";function N0(e){return e===P3}var zd=class{};var P0=class extends Hd{constructor(){super(...arguments),this.supportsDOMEvents=!0}},k0=class e extends P0{static makeCurrent(){Bx(new e)}onAndCancel(t,n,r){return t.addEventListener(n,r),()=>{t.removeEventListener(n,r)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.remove()}createElement(t,n){return n=n||this.getDefaultDocument(),n.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return n==="window"?window:n==="document"?t:n==="body"?t.body:null}getBaseHref(t){let n=L3();return n==null?null:F3(n)}resetBaseElement(){Ol=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return Hx(document.cookie,t)}},Ol=null;function L3(){return Ol=Ol||document.querySelector("base"),Ol?Ol.getAttribute("href"):null}function F3(e){return new URL(e,document.baseURI).pathname}var B3=(()=>{class e{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=pe({token:e,factory:e.\u0275fac})}}return e})(),L0=new xe(""),qx=(()=>{class e{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(s=>s.supports(n)),!r)throw new he(5101,!1);return this._eventNameToPlugin.set(n,r),r}static{this.\u0275fac=function(r){return new(r||e)(Ue(L0),Ue(Xt))}}static{this.\u0275prov=pe({token:e,factory:e.\u0275fac})}}return e})(),Gd=class{constructor(t){this._doc=t}},R0="ng-app-id",Yx=(()=>{class e{constructor(n,r,i,s={}){this.doc=n,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=N0(s),this.resetHostNodes()}addStyles(n){for(let r of n)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(n){for(let r of n)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let n=this.styleNodesInDOM;n&&(n.forEach(r=>r.remove()),n.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(let r of this.getAllStyles())this.addStyleToHost(n,r)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(let r of this.hostNodes)this.addStyleToHost(r,n)}onStyleRemoved(n){let r=this.styleRef;r.get(n)?.elements?.forEach(i=>i.remove()),r.delete(n)}collectServerRenderedStyles(){let n=this.doc.head?.querySelectorAll(`style[${R0}="${this.appId}"]`);if(n?.length){let r=new Map;return n.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(n,r){let i=this.styleRef;if(i.has(n)){let s=i.get(n);return s.usage+=r,s.usage}return i.set(n,{usage:r,elements:[]}),r}getStyleElement(n,r){let i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===n)return i.delete(r),s.removeAttribute(R0),s;{let c=this.doc.createElement("style");return this.nonce&&c.setAttribute("nonce",this.nonce),c.textContent=r,this.platformIsServer&&c.setAttribute(R0,this.appId),n.appendChild(c),c}}addStyleToHost(n,r){let i=this.getStyleElement(n,r),s=this.styleRef,c=s.get(r)?.elements;c?c.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){let n=this.hostNodes;n.clear(),n.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||e)(Ue(Jn),Ue(l0),Ue(u0,8),Ue(ea))}}static{this.\u0275prov=pe({token:e,factory:e.\u0275fac})}}return e})(),O0={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},B0=/%COMP%/g,Zx="%COMP%",V3=`_nghost-${Zx}`,j3=`_ngcontent-${Zx}`,U3=!0,H3=new xe("",{providedIn:"root",factory:()=>U3});function z3(e){return j3.replace(B0,e)}function W3(e){return V3.replace(B0,e)}function Qx(e,t){return t.map(n=>n.replace(B0,e))}var Wx=(()=>{class e{constructor(n,r,i,s,c,h,g,m=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=c,this.platformId=h,this.ngZone=g,this.nonce=m,this.rendererByCompId=new Map,this.platformIsServer=N0(h),this.defaultRenderer=new Pl(n,c,g,this.platformIsServer)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===qr.ShadowDom&&(r=Pe(J({},r),{encapsulation:qr.Emulated}));let i=this.getOrCreateRenderer(n,r);return i instanceof $d?i.applyToHost(n):i instanceof kl&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,s=i.get(r.id);if(!s){let c=this.doc,h=this.ngZone,g=this.eventManager,m=this.sharedStylesHost,_=this.removeStylesOnCompDestroy,x=this.platformIsServer;switch(r.encapsulation){case qr.Emulated:s=new $d(g,m,r,this.appId,_,c,h,x);break;case qr.ShadowDom:return new F0(g,m,n,r,c,h,this.nonce,x);default:s=new kl(g,m,r,_,c,h,x);break}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||e)(Ue(qx),Ue(Yx),Ue(l0),Ue(H3),Ue(Jn),Ue(ea),Ue(Xt),Ue(u0))}}static{this.\u0275prov=pe({token:e,factory:e.\u0275fac})}}return e})(),Pl=class{constructor(t,n,r,i){this.eventManager=t,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(t,n){return n?this.doc.createElementNS(O0[n]||n,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,n){(Gx(t)?t.content:t).appendChild(n)}insertBefore(t,n,r){t&&(Gx(t)?t.content:t).insertBefore(n,r)}removeChild(t,n){n.remove()}selectRootElement(t,n){let r=typeof t=="string"?this.doc.querySelector(t):t;if(!r)throw new he(-5104,!1);return n||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,r,i){if(i){n=i+":"+n;let s=O0[i];s?t.setAttributeNS(s,n,r):t.setAttribute(n,r)}else t.setAttribute(n,r)}removeAttribute(t,n,r){if(r){let i=O0[r];i?t.removeAttributeNS(i,n):t.removeAttribute(`${r}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,r,i){i&(mi.DashCase|mi.Important)?t.style.setProperty(n,r,i&mi.Important?"important":""):t.style[n]=r}removeStyle(t,n,r){r&mi.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,r){t!=null&&(t[n]=r)}setValue(t,n){t.nodeValue=n}listen(t,n,r){if(typeof t=="string"&&(t=Ti().getGlobalEventTarget(this.doc,t),!t))throw new Error(`Unsupported event target ${t} for event ${n}`);return this.eventManager.addEventListener(t,n,this.decoratePreventDefault(r))}decoratePreventDefault(t){return n=>{if(n==="__ngUnwrap__")return t;(this.platformIsServer?this.ngZone.runGuarded(()=>t(n)):t(n))===!1&&n.preventDefault()}}};function Gx(e){return e.tagName==="TEMPLATE"&&e.content!==void 0}var F0=class extends Pl{constructor(t,n,r,i,s,c,h,g){super(t,s,c,g),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let m=Qx(i.id,i.styles);for(let _ of m){let x=document.createElement("style");h&&x.setAttribute("nonce",h),x.textContent=_,this.shadowRoot.appendChild(x)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,r){return super.insertBefore(this.nodeOrShadowRoot(t),n,r)}removeChild(t,n){return super.removeChild(null,n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},kl=class extends Pl{constructor(t,n,r,i,s,c,h,g){super(t,s,c,h),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=g?Qx(g,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},$d=class extends kl{constructor(t,n,r,i,s,c,h,g){let m=i+"-"+r.id;super(t,n,r,s,c,h,g,m),this.contentAttr=z3(m),this.hostAttr=W3(m)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,n){let r=super.createElement(t,n);return super.setAttribute(r,this.contentAttr,""),r}},G3=(()=>{class e extends Gd{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||e)(Ue(Jn))}}static{this.\u0275prov=pe({token:e,factory:e.\u0275fac})}}return e})(),$x=["alt","control","meta","shift"],$3={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},q3={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey},Y3=(()=>{class e extends Gd{constructor(n){super(n)}supports(n){return e.parseEventName(n)!=null}addEventListener(n,r,i){let s=e.parseEventName(r),c=e.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ti().onAndCancel(n,s.domEventName,c))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let s=e._normalizeKey(r.pop()),c="",h=r.indexOf("code");if(h>-1&&(r.splice(h,1),c="code."),$x.forEach(m=>{let _=r.indexOf(m);_>-1&&(r.splice(_,1),c+=m+".")}),c+=s,r.length!=0||s.length===0)return null;let g={};return g.domEventName=i,g.fullKey=c,g}static matchEventFullKeyCode(n,r){let i=$3[n.key]||n.key,s="";return r.indexOf("code.")>-1&&(i=n.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),$x.forEach(c=>{if(c!==i){let h=q3[c];h(n)&&(s+=c+".")}}),s+=i,s===r)}static eventCallback(n,r,i){return s=>{e.matchEventFullKeyCode(s,n)&&i.runGuarded(()=>r(s))}}static _normalizeKey(n){return n==="esc"?"escape":n}static{this.\u0275fac=function(r){return new(r||e)(Ue(Jn))}}static{this.\u0275prov=pe({token:e,factory:e.\u0275fac})}}return e})();function Xx(e,t){return Px(J({rootComponent:e},Z3(t)))}function Z3(e){return{appProviders:[...eP,...e?.providers??[]],platformProviders:J3}}function Q3(){k0.makeCurrent()}function X3(){return new pi}function K3(){return C_(document),document}var J3=[{provide:ea,useValue:zx},{provide:c0,useValue:Q3,multi:!0},{provide:Jn,useFactory:K3,deps:[]}];var eP=[{provide:bd,useValue:"root"},{provide:pi,useFactory:X3,deps:[]},{provide:L0,useClass:G3,multi:!0,deps:[Jn,Xt,ea]},{provide:L0,useClass:Y3,multi:!0,deps:[Jn]},Wx,Yx,qx,{provide:qs,useExisting:Wx},{provide:zd,useClass:B3,deps:[]},[]];var Kx=(()=>{class e{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static{this.\u0275fac=function(r){return new(r||e)(Ue(Jn))}}static{this.\u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var V0=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=pe({token:e,factory:function(r){let i=null;return r?i=new(r||e):i=Ue(tP),i},providedIn:"root"})}}return e})(),tP=(()=>{class e extends V0{constructor(n){super(),this._doc=n}sanitize(n,r){if(r==null)return null;switch(n){case ro.NONE:return r;case ro.HTML:return ta(r,"HTML")?bi(r):N_(this._doc,String(r)).toString();case ro.STYLE:return ta(r,"Style")?bi(r):r;case ro.SCRIPT:if(ta(r,"Script"))return bi(r);throw new he(5200,!1);case ro.URL:return ta(r,"URL")?bi(r):f0(String(r));case ro.RESOURCE_URL:if(ta(r,"ResourceURL"))return bi(r);throw new he(5201,!1);default:throw new he(5202,!1)}}bypassSecurityTrustHtml(n){return __(n)}bypassSecurityTrustStyle(n){return x_(n)}bypassSecurityTrustScript(n){return E_(n)}bypassSecurityTrustUrl(n){return b_(n)}bypassSecurityTrustResourceUrl(n){return I_(n)}static{this.\u0275fac=function(r){return new(r||e)(Ue(Jn))}}static{this.\u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var Me="primary",Kl=Symbol("RouteTitle"),W0=class{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n[0]:n}return null}getAll(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function ca(e){return new W0(e)}function nP(e,t,n){let r=n.path.split("/");if(r.length>e.length||n.pathMatch==="full"&&(t.hasChildren()||r.length<e.length))return null;let i={};for(let s=0;s<r.length;s++){let c=r[s],h=e[s];if(c[0]===":")i[c.substring(1)]=h;else if(c!==h.path)return null}return{consumed:e.slice(0,r.length),posParams:i}}function rP(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!Xr(e[n],t[n]))return!1;return!0}function Xr(e,t){let n=e?G0(e):void 0,r=t?G0(t):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!aE(e[i],t[i]))return!1;return!0}function G0(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}function aE(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;let n=[...e].sort(),r=[...t].sort();return n.every((i,s)=>r[s]===i)}else return e===t}function lE(e){return e.length>0?e[e.length-1]:null}function so(e){return dp(e)?e:Wo(e)?xt(Promise.resolve(e)):Se(e)}var iP={exact:uE,subset:dE},cE={exact:oP,subset:sP,ignored:()=>!0};function eE(e,t,n){return iP[n.paths](e.root,t.root,n.matrixParams)&&cE[n.queryParams](e.queryParams,t.queryParams)&&!(n.fragment==="exact"&&e.fragment!==t.fragment)}function oP(e,t){return Xr(e,t)}function uE(e,t,n){if(!Yo(e.segments,t.segments)||!Zd(e.segments,t.segments,n)||e.numberOfChildren!==t.numberOfChildren)return!1;for(let r in t.children)if(!e.children[r]||!uE(e.children[r],t.children[r],n))return!1;return!0}function sP(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>aE(e[n],t[n]))}function dE(e,t,n){return fE(e,t,t.segments,n)}function fE(e,t,n,r){if(e.segments.length>n.length){let i=e.segments.slice(0,n.length);return!(!Yo(i,n)||t.hasChildren()||!Zd(i,n,r))}else if(e.segments.length===n.length){if(!Yo(e.segments,n)||!Zd(e.segments,n,r))return!1;for(let i in t.children)if(!e.children[i]||!dE(e.children[i],t.children[i],r))return!1;return!0}else{let i=n.slice(0,e.segments.length),s=n.slice(e.segments.length);return!Yo(e.segments,i)||!Zd(e.segments,i,r)||!e.children[Me]?!1:fE(e.children[Me],t,s,r)}}function Zd(e,t,n){return t.every((r,i)=>cE[n](e[i].parameters,r.parameters))}var Ni=class{constructor(t=new ct([],{}),n={},r=null){this.root=t,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=ca(this.queryParams),this._queryParamMap}toString(){return cP.serialize(this)}},ct=class{constructor(t,n){this.segments=t,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Qd(this)}},qo=class{constructor(t,n){this.path=t,this.parameters=n}get parameterMap(){return this._parameterMap??=ca(this.parameters),this._parameterMap}toString(){return pE(this)}};function aP(e,t){return Yo(e,t)&&e.every((n,r)=>Xr(n.parameters,t[r].parameters))}function Yo(e,t){return e.length!==t.length?!1:e.every((n,r)=>n.path===t[r].path)}function lP(e,t){let n=[];return Object.entries(e.children).forEach(([r,i])=>{r===Me&&(n=n.concat(t(i,r)))}),Object.entries(e.children).forEach(([r,i])=>{r!==Me&&(n=n.concat(t(i,r)))}),n}var ym=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=pe({token:e,factory:()=>new Hl,providedIn:"root"})}}return e})(),Hl=class{parse(t){let n=new q0(t);return new Ni(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(t){let n=`/${Ll(t.root,!0)}`,r=fP(t.queryParams),i=typeof t.fragment=="string"?`#${uP(t.fragment)}`:"";return`${n}${r}${i}`}},cP=new Hl;function Qd(e){return e.segments.map(t=>pE(t)).join("/")}function Ll(e,t){if(!e.hasChildren())return Qd(e);if(t){let n=e.children[Me]?Ll(e.children[Me],!1):"",r=[];return Object.entries(e.children).forEach(([i,s])=>{i!==Me&&r.push(`${i}:${Ll(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=lP(e,(r,i)=>i===Me?[Ll(e.children[Me],!1)]:[`${i}:${Ll(r,!1)}`]);return Object.keys(e.children).length===1&&e.children[Me]!=null?`${Qd(e)}/${n[0]}`:`${Qd(e)}/(${n.join("//")})`}}function hE(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function qd(e){return hE(e).replace(/%3B/gi,";")}function uP(e){return encodeURI(e)}function $0(e){return hE(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Xd(e){return decodeURIComponent(e)}function tE(e){return Xd(e.replace(/\+/g,"%20"))}function pE(e){return`${$0(e.path)}${dP(e.parameters)}`}function dP(e){return Object.entries(e).map(([t,n])=>`;${$0(t)}=${$0(n)}`).join("")}function fP(e){let t=Object.entries(e).map(([n,r])=>Array.isArray(r)?r.map(i=>`${qd(n)}=${qd(i)}`).join("&"):`${qd(n)}=${qd(r)}`).filter(n=>n);return t.length?`?${t.join("&")}`:""}var hP=/^[^\/()?;#]+/;function j0(e){let t=e.match(hP);return t?t[0]:""}var pP=/^[^\/()?;=#]+/;function gP(e){let t=e.match(pP);return t?t[0]:""}var mP=/^[^=?&#]+/;function yP(e){let t=e.match(mP);return t?t[0]:""}var wP=/^[^&#]+/;function CP(e){let t=e.match(wP);return t?t[0]:""}var q0=class{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ct([],{}):new ct([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(n).length>0)&&(r[Me]=new ct(t,n)),r}parseSegment(){let t=j0(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new he(4009,!1);return this.capture(t),new qo(Xd(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let n=gP(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=j0(this.remaining);i&&(r=i,this.capture(r))}t[Xd(n)]=Xd(r)}parseQueryParam(t){let n=yP(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let c=CP(this.remaining);c&&(r=c,this.capture(r))}let i=tE(n),s=tE(r);if(t.hasOwnProperty(i)){let c=t[i];Array.isArray(c)||(c=[c],t[i]=c),c.push(s)}else t[i]=s}parseParens(t){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=j0(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new he(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):t&&(s=Me);let c=this.parseChildren();n[s]=Object.keys(c).length===1?c[Me]:new ct([],c),this.consumeOptional("//")}return n}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new he(4011,!1)}};function gE(e){return e.segments.length>0?new ct([],{[Me]:e}):e}function mE(e){let t={};for(let[r,i]of Object.entries(e.children)){let s=mE(i);if(r===Me&&s.segments.length===0&&s.hasChildren())for(let[c,h]of Object.entries(s.children))t[c]=h;else(s.segments.length>0||s.hasChildren())&&(t[r]=s)}let n=new ct(e.segments,t);return vP(n)}function vP(e){if(e.numberOfChildren===1&&e.children[Me]){let t=e.children[Me];return new ct(e.segments.concat(t.segments),t.children)}return e}function zl(e){return e instanceof Ni}function _P(e,t,n=null,r=null){let i=yE(e);return wE(i,t,n,r)}function yE(e){let t;function n(s){let c={};for(let g of s.children){let m=n(g);c[g.outlet]=m}let h=new ct(s.url,c);return s===e&&(t=h),h}let r=n(e.root),i=gE(r);return t??i}function wE(e,t,n,r){let i=e;for(;i.parent;)i=i.parent;if(t.length===0)return U0(i,i,i,n,r);let s=xP(t);if(s.toRoot())return U0(i,i,new ct([],{}),n,r);let c=EP(s,i,e),h=c.processChildren?Vl(c.segmentGroup,c.index,s.commands):vE(c.segmentGroup,c.index,s.commands);return U0(i,c.segmentGroup,h,n,r)}function Kd(e){return typeof e=="object"&&e!=null&&!e.outlets&&!e.segmentPath}function Wl(e){return typeof e=="object"&&e!=null&&e.outlets}function U0(e,t,n,r,i){let s={};r&&Object.entries(r).forEach(([g,m])=>{s[g]=Array.isArray(m)?m.map(_=>`${_}`):`${m}`});let c;e===t?c=n:c=CE(e,t,n);let h=gE(mE(c));return new Ni(h,s,i)}function CE(e,t,n){let r={};return Object.entries(e.children).forEach(([i,s])=>{s===t?r[i]=n:r[i]=CE(s,t,n)}),new ct(e.segments,r)}var Jd=class{constructor(t,n,r){if(this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=r,t&&r.length>0&&Kd(r[0]))throw new he(4003,!1);let i=r.find(Wl);if(i&&i!==lE(r))throw new he(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function xP(e){if(typeof e[0]=="string"&&e.length===1&&e[0]==="/")return new Jd(!0,0,e);let t=0,n=!1,r=e.reduce((i,s,c)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let h={};return Object.entries(s.outlets).forEach(([g,m])=>{h[g]=typeof m=="string"?m.split("/"):m}),[...i,{outlets:h}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:c===0?(s.split("/").forEach((h,g)=>{g==0&&h==="."||(g==0&&h===""?n=!0:h===".."?t++:h!=""&&i.push(h))}),i):[...i,s]},[]);return new Jd(n,t,r)}var sa=class{constructor(t,n,r){this.segmentGroup=t,this.processChildren=n,this.index=r}};function EP(e,t,n){if(e.isAbsolute)return new sa(t,!0,0);if(!n)return new sa(t,!1,NaN);if(n.parent===null)return new sa(n,!0,0);let r=Kd(e.commands[0])?0:1,i=n.segments.length-1+r;return bP(n,i,e.numberOfDoubleDots)}function bP(e,t,n){let r=e,i=t,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new he(4005,!1);i=r.segments.length}return new sa(r,!1,i-s)}function IP(e){return Wl(e[0])?e[0].outlets:{[Me]:e}}function vE(e,t,n){if(e??=new ct([],{}),e.segments.length===0&&e.hasChildren())return Vl(e,t,n);let r=DP(e,t,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){let s=new ct(e.segments.slice(0,r.pathIndex),{});return s.children[Me]=new ct(e.segments.slice(r.pathIndex),e.children),Vl(s,0,i)}else return r.match&&i.length===0?new ct(e.segments,{}):r.match&&!e.hasChildren()?Y0(e,t,n):r.match?Vl(e,0,i):Y0(e,t,n)}function Vl(e,t,n){if(n.length===0)return new ct(e.segments,{});{let r=IP(n),i={};if(Object.keys(r).some(s=>s!==Me)&&e.children[Me]&&e.numberOfChildren===1&&e.children[Me].segments.length===0){let s=Vl(e.children[Me],t,n);return new ct(e.segments,s.children)}return Object.entries(r).forEach(([s,c])=>{typeof c=="string"&&(c=[c]),c!==null&&(i[s]=vE(e.children[s],t,c))}),Object.entries(e.children).forEach(([s,c])=>{r[s]===void 0&&(i[s]=c)}),new ct(e.segments,i)}}function DP(e,t,n){let r=0,i=t,s={match:!1,pathIndex:0,commandIndex:0};for(;i<e.segments.length;){if(r>=n.length)return s;let c=e.segments[i],h=n[r];if(Wl(h))break;let g=`${h}`,m=r<n.length-1?n[r+1]:null;if(i>0&&g===void 0)break;if(g&&m&&typeof m=="object"&&m.outlets===void 0){if(!rE(g,m,c))return s;r+=2}else{if(!rE(g,{},c))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Y0(e,t,n){let r=e.segments.slice(0,t),i=0;for(;i<n.length;){let s=n[i];if(Wl(s)){let g=SP(s.outlets);return new ct(r,g)}if(i===0&&Kd(n[0])){let g=e.segments[t];r.push(new qo(g.path,nE(n[0]))),i++;continue}let c=Wl(s)?s.outlets[Me]:`${s}`,h=i<n.length-1?n[i+1]:null;c&&h&&Kd(h)?(r.push(new qo(c,nE(h))),i+=2):(r.push(new qo(c,{})),i++)}return new ct(r,{})}function SP(e){let t={};return Object.entries(e).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(t[n]=Y0(new ct([],{}),0,r))}),t}function nE(e){let t={};return Object.entries(e).forEach(([n,r])=>t[n]=`${r}`),t}function rE(e,t,n){return e==n.path&&Xr(t,n.parameters)}var jl="imperative",mn=function(e){return e[e.NavigationStart=0]="NavigationStart",e[e.NavigationEnd=1]="NavigationEnd",e[e.NavigationCancel=2]="NavigationCancel",e[e.NavigationError=3]="NavigationError",e[e.RoutesRecognized=4]="RoutesRecognized",e[e.ResolveStart=5]="ResolveStart",e[e.ResolveEnd=6]="ResolveEnd",e[e.GuardsCheckStart=7]="GuardsCheckStart",e[e.GuardsCheckEnd=8]="GuardsCheckEnd",e[e.RouteConfigLoadStart=9]="RouteConfigLoadStart",e[e.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",e[e.ChildActivationStart=11]="ChildActivationStart",e[e.ChildActivationEnd=12]="ChildActivationEnd",e[e.ActivationStart=13]="ActivationStart",e[e.ActivationEnd=14]="ActivationEnd",e[e.Scroll=15]="Scroll",e[e.NavigationSkipped=16]="NavigationSkipped",e}(mn||{}),hr=class{constructor(t,n){this.id=t,this.url=n}},Gl=class extends hr{constructor(t,n,r="imperative",i=null){super(t,n),this.type=mn.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Zo=class extends hr{constructor(t,n,r){super(t,n),this.urlAfterRedirects=r,this.type=mn.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},tr=function(e){return e[e.Redirect=0]="Redirect",e[e.SupersededByNewNavigation=1]="SupersededByNewNavigation",e[e.NoDataFromResolver=2]="NoDataFromResolver",e[e.GuardRejected=3]="GuardRejected",e}(tr||{}),Z0=function(e){return e[e.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",e[e.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",e}(Z0||{}),Mi=class extends hr{constructor(t,n,r,i){super(t,n),this.reason=r,this.code=i,this.type=mn.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Qo=class extends hr{constructor(t,n,r,i){super(t,n),this.reason=r,this.code=i,this.type=mn.NavigationSkipped}},$l=class extends hr{constructor(t,n,r,i){super(t,n),this.error=r,this.target=i,this.type=mn.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},ef=class extends hr{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=mn.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Q0=class extends hr{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=mn.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},X0=class extends hr{constructor(t,n,r,i,s){super(t,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=mn.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},K0=class extends hr{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=mn.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},J0=class extends hr{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=mn.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},em=class{constructor(t){this.route=t,this.type=mn.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},tm=class{constructor(t){this.route=t,this.type=mn.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},nm=class{constructor(t){this.snapshot=t,this.type=mn.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},rm=class{constructor(t){this.snapshot=t,this.type=mn.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},im=class{constructor(t){this.snapshot=t,this.type=mn.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},om=class{constructor(t){this.snapshot=t,this.type=mn.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var ql=class{},ua=class{constructor(t,n){this.url=t,this.navigationBehaviorOptions=n}};function AP(e,t){return e.providers&&!e._injector&&(e._injector=b0(e.providers,t,`Route: ${e.path}`)),e._injector??t}function Lr(e){return e.outlet||Me}function TP(e,t){let n=e.filter(r=>Lr(r)===t);return n.push(...e.filter(r=>Lr(r)!==t)),n}function Jl(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let t=e.parent;t;t=t.parent){let n=t.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var sm=class{get injector(){return Jl(this.route?.snapshot)??this.rootInjector}set injector(t){}constructor(t){this.rootInjector=t,this.outlet=null,this.route=null,this.children=new lf(this.rootInjector),this.attachRef=null}},lf=(()=>{class e{constructor(n){this.rootInjector=n,this.contexts=new Map}onChildOutletCreated(n,r){let i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new sm(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static{this.\u0275fac=function(r){return new(r||e)(Ue(cr))}}static{this.\u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),tf=class{constructor(t){this._root=t}get root(){return this._root.value}parent(t){let n=this.pathFromRoot(t);return n.length>1?n[n.length-2]:null}children(t){let n=am(t,this._root);return n?n.children.map(r=>r.value):[]}firstChild(t){let n=am(t,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(t){let n=lm(t,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==t)}pathFromRoot(t){return lm(t,this._root).map(n=>n.value)}};function am(e,t){if(e===t.value)return t;for(let n of t.children){let r=am(e,n);if(r)return r}return null}function lm(e,t){if(e===t.value)return[t];for(let n of t.children){let r=lm(e,n);if(r.length)return r.unshift(t),r}return[]}var er=class{constructor(t,n){this.value=t,this.children=n}toString(){return`TreeNode(${this.value})`}};function oa(e){let t={};return e&&e.children.forEach(n=>t[n.value.outlet]=n),t}var nf=class extends tf{constructor(t,n){super(t),this.snapshot=n,wm(this,t)}toString(){return this.snapshot.toString()}};function _E(e){let t=MP(e),n=new hn([new qo("",{})]),r=new hn({}),i=new hn({}),s=new hn({}),c=new hn(""),h=new Kr(n,r,s,c,i,Me,e,t.root);return h.snapshot=t.root,new nf(new er(h,[]),t)}function MP(e){let t={},n={},r={},i="",s=new aa([],t,r,i,n,Me,e,null,{});return new of("",new er(s,[]))}var Kr=class{constructor(t,n,r,i,s,c,h,g){this.urlSubject=t,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=c,this.component=h,this._futureSnapshot=g,this.title=this.dataSubject?.pipe(Ve(m=>m[Kl]))??Se(void 0),this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Ve(t=>ca(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Ve(t=>ca(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function rf(e,t,n="emptyOnly"){let r,{routeConfig:i}=e;return t!==null&&(n==="always"||i?.path===""||!t.component&&!t.routeConfig?.loadComponent)?r={params:J(J({},t.params),e.params),data:J(J({},t.data),e.data),resolve:J(J(J(J({},e.data),t.data),i?.data),e._resolvedData)}:r={params:J({},e.params),data:J({},e.data),resolve:J(J({},e.data),e._resolvedData??{})},i&&EE(i)&&(r.resolve[Kl]=i.title),r}var aa=class{get title(){return this.data?.[Kl]}constructor(t,n,r,i,s,c,h,g,m){this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=c,this.component=h,this.routeConfig=g,this._resolve=m}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=ca(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=ca(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${n}')`}},of=class extends tf{constructor(t,n){super(n),this.url=t,wm(this,n)}toString(){return xE(this._root)}};function wm(e,t){t.value._routerState=e,t.children.forEach(n=>wm(e,n))}function xE(e){let t=e.children.length>0?` { ${e.children.map(xE).join(", ")} } `:"";return`${e.value}${t}`}function H0(e){if(e.snapshot){let t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,Xr(t.queryParams,n.queryParams)||e.queryParamsSubject.next(n.queryParams),t.fragment!==n.fragment&&e.fragmentSubject.next(n.fragment),Xr(t.params,n.params)||e.paramsSubject.next(n.params),rP(t.url,n.url)||e.urlSubject.next(n.url),Xr(t.data,n.data)||e.dataSubject.next(n.data)}else e.snapshot=e._futureSnapshot,e.dataSubject.next(e._futureSnapshot.data)}function cm(e,t){let n=Xr(e.params,t.params)&&aP(e.url,t.url),r=!e.parent!=!t.parent;return n&&!r&&(!e.parent||cm(e.parent,t.parent))}function EE(e){return typeof e.title=="string"||e.title===null}var Cm=(()=>{class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=Me,this.activateEvents=new St,this.deactivateEvents=new St,this.attachEvents=new St,this.detachEvents=new St,this.parentContexts=te(lf),this.location=te(na),this.changeDetector=te(Si),this.inputBinder=te(vm,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new he(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new he(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new he(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new he(4013,!1);this._activatedRoute=n;let i=this.location,c=n.snapshot.component,h=this.parentContexts.getOrCreateContext(this.name).children,g=new um(n,h,i.injector);this.activated=i.createComponent(c,{index:i.length,injector:g,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275dir=Wn({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[xi]})}}return e})(),um=class e{__ngOutletInjector(t){return new e(this.route,this.childContexts,t)}constructor(t,n,r){this.route=t,this.childContexts=n,this.parent=r}get(t,n){return t===Kr?this.route:t===lf?this.childContexts:this.parent.get(t,n)}},vm=new xe("");function NP(e,t,n){let r=Yl(e,t._root,n?n._root:void 0);return new nf(r,t)}function Yl(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=t.value;let i=RP(e,t,n);return new er(r,i)}else{if(e.shouldAttach(t.value)){let s=e.retrieve(t.value);if(s!==null){let c=s.route;return c.value._futureSnapshot=t.value,c.children=t.children.map(h=>Yl(e,h)),c}}let r=OP(t.value),i=t.children.map(s=>Yl(e,s));return new er(r,i)}}function RP(e,t,n){return t.children.map(r=>{for(let i of n.children)if(e.shouldReuseRoute(r.value,i.value.snapshot))return Yl(e,r,i);return Yl(e,r)})}function OP(e){return new Kr(new hn(e.url),new hn(e.params),new hn(e.queryParams),new hn(e.fragment),new hn(e.data),e.outlet,e.component,e)}var Zl=class{constructor(t,n){this.redirectTo=t,this.navigationBehaviorOptions=n}},bE="ngNavigationCancelingError";function sf(e,t){let{redirectTo:n,navigationBehaviorOptions:r}=zl(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,i=IE(!1,tr.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function IE(e,t){let n=new Error(`NavigationCancelingError: ${e||""}`);return n[bE]=!0,n.cancellationCode=t,n}function PP(e){return DE(e)&&zl(e.url)}function DE(e){return!!e&&e[bE]}var kP=(e,t,n,r)=>Ve(i=>(new dm(t,i.targetRouterState,i.currentRouterState,n,r).activate(e),i)),dm=class{constructor(t,n,r,i,s){this.routeReuseStrategy=t,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(t){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,t),H0(this.futureState.root),this.activateChildRoutes(n,r,t)}deactivateChildRoutes(t,n,r){let i=oa(n);t.children.forEach(s=>{let c=s.value.outlet;this.deactivateRoutes(s,i[c],r),delete i[c]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(t,n,r){let i=t.value,s=n?n.value:null;if(i===s)if(i.component){let c=r.getContext(i.outlet);c&&this.deactivateChildRoutes(t,n,c.children)}else this.deactivateChildRoutes(t,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(t,n){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,n):this.deactivateRouteAndOutlet(t,n)}detachAndStoreRouteSubtree(t,n){let r=n.getContext(t.value.outlet),i=r&&t.value.component?r.children:n,s=oa(t);for(let c of Object.values(s))this.deactivateRouteAndItsChildren(c,i);if(r&&r.outlet){let c=r.outlet.detach(),h=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:c,route:t,contexts:h})}}deactivateRouteAndOutlet(t,n){let r=n.getContext(t.value.outlet),i=r&&t.value.component?r.children:n,s=oa(t);for(let c of Object.values(s))this.deactivateRouteAndItsChildren(c,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(t,n,r){let i=oa(n);t.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new om(s.value.snapshot))}),t.children.length&&this.forwardEvent(new rm(t.value.snapshot))}activateRoutes(t,n,r){let i=t.value,s=n?n.value:null;if(H0(i),i===s)if(i.component){let c=r.getOrCreateContext(i.outlet);this.activateChildRoutes(t,n,c.children)}else this.activateChildRoutes(t,n,r);else if(i.component){let c=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let h=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),c.children.onOutletReAttached(h.contexts),c.attachRef=h.componentRef,c.route=h.route.value,c.outlet&&c.outlet.attach(h.componentRef,h.route.value),H0(h.route.value),this.activateChildRoutes(t,null,c.children)}else c.attachRef=null,c.route=i,c.outlet&&c.outlet.activateWith(i,c.injector),this.activateChildRoutes(t,null,c.children)}else this.activateChildRoutes(t,null,r)}},af=class{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},la=class{constructor(t,n){this.component=t,this.route=n}};function LP(e,t,n){let r=e._root,i=t?t._root:null;return Fl(r,i,n,[r.value])}function FP(e){let t=e.routeConfig?e.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:e,guards:t}}function fa(e,t){let n=Symbol(),r=t.get(e,n);return r===n?typeof e=="function"&&!cv(e)?e:t.get(e):r}function Fl(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=oa(t);return e.children.forEach(c=>{BP(c,s[c.value.outlet],n,r.concat([c.value]),i),delete s[c.value.outlet]}),Object.entries(s).forEach(([c,h])=>Ul(h,n.getContext(c),i)),i}function BP(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=e.value,c=t?t.value:null,h=n?n.getContext(e.value.outlet):null;if(c&&s.routeConfig===c.routeConfig){let g=VP(c,s,s.routeConfig.runGuardsAndResolvers);g?i.canActivateChecks.push(new af(r)):(s.data=c.data,s._resolvedData=c._resolvedData),s.component?Fl(e,t,h?h.children:null,r,i):Fl(e,t,n,r,i),g&&h&&h.outlet&&h.outlet.isActivated&&i.canDeactivateChecks.push(new la(h.outlet.component,c))}else c&&Ul(t,h,i),i.canActivateChecks.push(new af(r)),s.component?Fl(e,null,h?h.children:null,r,i):Fl(e,null,n,r,i);return i}function VP(e,t,n){if(typeof n=="function")return n(e,t);switch(n){case"pathParamsChange":return!Yo(e.url,t.url);case"pathParamsOrQueryParamsChange":return!Yo(e.url,t.url)||!Xr(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!cm(e,t)||!Xr(e.queryParams,t.queryParams);case"paramsChange":default:return!cm(e,t)}}function Ul(e,t,n){let r=oa(e),i=e.value;Object.entries(r).forEach(([s,c])=>{i.component?t?Ul(c,t.children.getContext(s),n):Ul(c,null,n):Ul(c,t,n)}),i.component?t&&t.outlet&&t.outlet.isActivated?n.canDeactivateChecks.push(new la(t.outlet.component,i)):n.canDeactivateChecks.push(new la(null,i)):n.canDeactivateChecks.push(new la(null,i))}function ec(e){return typeof e=="function"}function jP(e){return typeof e=="boolean"}function UP(e){return e&&ec(e.canLoad)}function HP(e){return e&&ec(e.canActivate)}function zP(e){return e&&ec(e.canActivateChild)}function WP(e){return e&&ec(e.canDeactivate)}function GP(e){return e&&ec(e.canMatch)}function SE(e){return e instanceof ui||e?.name==="EmptyError"}var Yd=Symbol("INITIAL_VALUE");function da(){return Ar(e=>ju(e.map(t=>t.pipe(di(1),wp(Yd)))).pipe(Ve(t=>{for(let n of t)if(n!==!0){if(n===Yd)return Yd;if(n===!1||$P(n))return n}return!0}),Sr(t=>t!==Yd),di(1)))}function $P(e){return zl(e)||e instanceof Zl}function qP(e,t){return Qt(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:c}}=n;return c.length===0&&s.length===0?Se(Pe(J({},n),{guardsResult:!0})):YP(c,r,i,e).pipe(Qt(h=>h&&jP(h)?ZP(r,s,e,t):Se(h)),Ve(h=>Pe(J({},n),{guardsResult:h})))})}function YP(e,t,n,r){return xt(e).pipe(Qt(i=>ek(i.component,i.route,n,t,r)),Wr(i=>i!==!0,!0))}function ZP(e,t,n,r){return xt(t).pipe(Ns(i=>Ms(XP(i.route.parent,r),QP(i.route,r),JP(e,i.path,n),KP(e,i.route,n))),Wr(i=>i!==!0,!0))}function QP(e,t){return e!==null&&t&&t(new im(e)),Se(!0)}function XP(e,t){return e!==null&&t&&t(new nm(e)),Se(!0)}function KP(e,t,n){let r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||r.length===0)return Se(!0);let i=r.map(s=>Uu(()=>{let c=Jl(t)??n,h=fa(s,c),g=HP(h)?h.canActivate(t,e):Ci(c,()=>h(t,e));return so(g).pipe(Wr())}));return Se(i).pipe(da())}function JP(e,t,n){let r=t[t.length-1],s=t.slice(0,t.length-1).reverse().map(c=>FP(c)).filter(c=>c!==null).map(c=>Uu(()=>{let h=c.guards.map(g=>{let m=Jl(c.node)??n,_=fa(g,m),x=zP(_)?_.canActivateChild(r,e):Ci(m,()=>_(r,e));return so(x).pipe(Wr())});return Se(h).pipe(da())}));return Se(s).pipe(da())}function ek(e,t,n,r,i){let s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!s||s.length===0)return Se(!0);let c=s.map(h=>{let g=Jl(t)??i,m=fa(h,g),_=WP(m)?m.canDeactivate(e,t,n,r):Ci(g,()=>m(e,t,n,r));return so(_).pipe(Wr())});return Se(c).pipe(da())}function tk(e,t,n,r){let i=t.canLoad;if(i===void 0||i.length===0)return Se(!0);let s=i.map(c=>{let h=fa(c,e),g=UP(h)?h.canLoad(t,n):Ci(e,()=>h(t,n));return so(g)});return Se(s).pipe(da(),AE(r))}function AE(e){return sp(pn(t=>{if(typeof t!="boolean")throw sf(e,t)}),Ve(t=>t===!0))}function nk(e,t,n,r){let i=t.canMatch;if(!i||i.length===0)return Se(!0);let s=i.map(c=>{let h=fa(c,e),g=GP(h)?h.canMatch(t,n):Ci(e,()=>h(t,n));return so(g)});return Se(s).pipe(da(),AE(r))}var Ql=class{constructor(t){this.segmentGroup=t||null}},Xl=class extends Error{constructor(t){super(),this.urlTree=t}};function ia(e){return Ts(new Ql(e))}function rk(e){return Ts(new he(4e3,!1))}function ik(e){return Ts(IE(!1,tr.GuardRejected))}var fm=class{constructor(t,n){this.urlSerializer=t,this.urlTree=n}lineralizeSegments(t,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return Se(r);if(i.numberOfChildren>1||!i.children[Me])return rk(`${t.redirectTo}`);i=i.children[Me]}}applyRedirectCommands(t,n,r,i,s){if(typeof n!="string"){let h=n,{queryParams:g,fragment:m,routeConfig:_,url:x,outlet:I,params:A,data:P,title:U}=i,q=Ci(s,()=>h({params:A,data:P,queryParams:g,fragment:m,routeConfig:_,url:x,outlet:I,title:U}));if(q instanceof Ni)throw new Xl(q);n=q}let c=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),t,r);if(n[0]==="/")throw new Xl(c);return c}applyRedirectCreateUrlTree(t,n,r,i){let s=this.createSegmentGroup(t,n.root,r,i);return new Ni(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(t,n){let r={};return Object.entries(t).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let h=s.substring(1);r[i]=n[h]}else r[i]=s}),r}createSegmentGroup(t,n,r,i){let s=this.createSegments(t,n.segments,r,i),c={};return Object.entries(n.children).forEach(([h,g])=>{c[h]=this.createSegmentGroup(t,g,r,i)}),new ct(s,c)}createSegments(t,n,r,i){return n.map(s=>s.path[0]===":"?this.findPosParam(t,s,i):this.findOrReturn(s,r))}findPosParam(t,n,r){let i=r[n.path.substring(1)];if(!i)throw new he(4001,!1);return i}findOrReturn(t,n){let r=0;for(let i of n){if(i.path===t.path)return n.splice(r),i;r++}return t}},hm={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function ok(e,t,n,r,i){let s=TE(e,t,n);return s.matched?(r=AP(t,r),nk(r,t,n,i).pipe(Ve(c=>c===!0?s:J({},hm)))):Se(s)}function TE(e,t,n){if(t.path==="**")return sk(n);if(t.path==="")return t.pathMatch==="full"&&(e.hasChildren()||n.length>0)?J({},hm):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(t.matcher||nP)(n,e,t);if(!i)return J({},hm);let s={};Object.entries(i.posParams??{}).forEach(([h,g])=>{s[h]=g.path});let c=i.consumed.length>0?J(J({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:c,positionalParamSegments:i.posParams??{}}}function sk(e){return{matched:!0,parameters:e.length>0?lE(e).parameters:{},consumedSegments:e,remainingSegments:[],positionalParamSegments:{}}}function iE(e,t,n,r){return n.length>0&&ck(e,n,r)?{segmentGroup:new ct(t,lk(r,new ct(n,e.children))),slicedSegments:[]}:n.length===0&&uk(e,n,r)?{segmentGroup:new ct(e.segments,ak(e,n,r,e.children)),slicedSegments:n}:{segmentGroup:new ct(e.segments,e.children),slicedSegments:n}}function ak(e,t,n,r){let i={};for(let s of n)if(cf(e,t,s)&&!r[Lr(s)]){let c=new ct([],{});i[Lr(s)]=c}return J(J({},r),i)}function lk(e,t){let n={};n[Me]=t;for(let r of e)if(r.path===""&&Lr(r)!==Me){let i=new ct([],{});n[Lr(r)]=i}return n}function ck(e,t,n){return n.some(r=>cf(e,t,r)&&Lr(r)!==Me)}function uk(e,t,n){return n.some(r=>cf(e,t,r))}function cf(e,t,n){return(e.hasChildren()||t.length>0)&&n.pathMatch==="full"?!1:n.path===""}function dk(e,t,n){return t.length===0&&!e.children[n]}var pm=class{};function fk(e,t,n,r,i,s,c="emptyOnly"){return new gm(e,t,n,r,i,c,s).recognize()}var hk=31,gm=class{constructor(t,n,r,i,s,c,h){this.injector=t,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=c,this.urlSerializer=h,this.applyRedirects=new fm(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(t){return new he(4002,`'${t.segmentGroup}'`)}recognize(){let t=iE(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(Ve(({children:n,rootSnapshot:r})=>{let i=new er(r,n),s=new of("",i),c=_P(r,[],this.urlTree.queryParams,this.urlTree.fragment);return c.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(c),{state:s,tree:c}}))}match(t){let n=new aa([],Object.freeze({}),Object.freeze(J({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),Me,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,t,Me,n).pipe(Ve(r=>({children:r,rootSnapshot:n})),sr(r=>{if(r instanceof Xl)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Ql?this.noMatchError(r):r}))}processSegmentGroup(t,n,r,i,s){return r.segments.length===0&&r.hasChildren()?this.processChildren(t,n,r,s):this.processSegment(t,n,r,r.segments,i,!0,s).pipe(Ve(c=>c instanceof er?[c]:[]))}processChildren(t,n,r,i){let s=[];for(let c of Object.keys(r.children))c==="primary"?s.unshift(c):s.push(c);return xt(s).pipe(Ns(c=>{let h=r.children[c],g=TP(n,c);return this.processSegmentGroup(t,g,h,c,i)}),yp((c,h)=>(c.push(...h),c)),Yi(null),mp(),Qt(c=>{if(c===null)return ia(r);let h=ME(c);return pk(h),Se(h)}))}processSegment(t,n,r,i,s,c,h){return xt(n).pipe(Ns(g=>this.processSegmentAgainstRoute(g._injector??t,n,g,r,i,s,c,h).pipe(sr(m=>{if(m instanceof Ql)return Se(null);throw m}))),Wr(g=>!!g),sr(g=>{if(SE(g))return dk(r,i,s)?Se(new pm):ia(r);throw g}))}processSegmentAgainstRoute(t,n,r,i,s,c,h,g){return Lr(r)!==c&&(c===Me||!cf(i,s,r))?ia(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(t,i,r,s,c,g):this.allowRedirects&&h?this.expandSegmentAgainstRouteUsingRedirect(t,i,n,r,s,c,g):ia(i)}expandSegmentAgainstRouteUsingRedirect(t,n,r,i,s,c,h){let{matched:g,parameters:m,consumedSegments:_,positionalParamSegments:x,remainingSegments:I}=TE(n,i,s);if(!g)return ia(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>hk&&(this.allowRedirects=!1));let A=new aa(s,m,Object.freeze(J({},this.urlTree.queryParams)),this.urlTree.fragment,oE(i),Lr(i),i.component??i._loadedComponent??null,i,sE(i)),P=rf(A,h,this.paramsInheritanceStrategy);A.params=Object.freeze(P.params),A.data=Object.freeze(P.data);let U=this.applyRedirects.applyRedirectCommands(_,i.redirectTo,x,A,t);return this.applyRedirects.lineralizeSegments(i,U).pipe(Qt(q=>this.processSegment(t,r,n,q.concat(I),c,!1,h)))}matchSegmentAgainstRoute(t,n,r,i,s,c){let h=ok(n,r,i,t,this.urlSerializer);return r.path==="**"&&(n.children={}),h.pipe(Ar(g=>g.matched?(t=r._injector??t,this.getChildConfig(t,r,i).pipe(Ar(({routes:m})=>{let _=r._loadedInjector??t,{parameters:x,consumedSegments:I,remainingSegments:A}=g,P=new aa(I,x,Object.freeze(J({},this.urlTree.queryParams)),this.urlTree.fragment,oE(r),Lr(r),r.component??r._loadedComponent??null,r,sE(r)),U=rf(P,c,this.paramsInheritanceStrategy);P.params=Object.freeze(U.params),P.data=Object.freeze(U.data);let{segmentGroup:q,slicedSegments:W}=iE(n,I,A,m);if(W.length===0&&q.hasChildren())return this.processChildren(_,m,q,P).pipe(Ve(Ke=>new er(P,Ke)));if(m.length===0&&W.length===0)return Se(new er(P,[]));let le=Lr(r)===s;return this.processSegment(_,m,q,W,le?Me:s,!0,P).pipe(Ve(Ke=>new er(P,Ke instanceof er?[Ke]:[])))}))):ia(n)))}getChildConfig(t,n,r){return n.children?Se({routes:n.children,injector:t}):n.loadChildren?n._loadedRoutes!==void 0?Se({routes:n._loadedRoutes,injector:n._loadedInjector}):tk(t,n,r,this.urlSerializer).pipe(Qt(i=>i?this.configLoader.loadChildren(t,n).pipe(pn(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):ik(n))):Se({routes:[],injector:t})}};function pk(e){e.sort((t,n)=>t.value.outlet===Me?-1:n.value.outlet===Me?1:t.value.outlet.localeCompare(n.value.outlet))}function gk(e){let t=e.value.routeConfig;return t&&t.path===""}function ME(e){let t=[],n=new Set;for(let r of e){if(!gk(r)){t.push(r);continue}let i=t.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):t.push(r)}for(let r of n){let i=ME(r.children);t.push(new er(r.value,i))}return t.filter(r=>!n.has(r))}function oE(e){return e.data||{}}function sE(e){return e.resolve||{}}function mk(e,t,n,r,i,s){return Qt(c=>fk(e,t,n,r,c.extractedUrl,i,s).pipe(Ve(({state:h,tree:g})=>Pe(J({},c),{targetSnapshot:h,urlAfterRedirects:g}))))}function yk(e,t){return Qt(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return Se(n);let s=new Set(i.map(g=>g.route)),c=new Set;for(let g of s)if(!c.has(g))for(let m of NE(g))c.add(m);let h=0;return xt(c).pipe(Ns(g=>s.has(g)?wk(g,r,e,t):(g.data=rf(g,g.parent,e).resolve,Se(void 0))),pn(()=>h++),Rs(1),Qt(g=>h===c.size?Se(n):Kn))})}function NE(e){let t=e.children.map(n=>NE(n)).flat();return[e,...t]}function wk(e,t,n,r){let i=e.routeConfig,s=e._resolve;return i?.title!==void 0&&!EE(i)&&(s[Kl]=i.title),Ck(s,e,t,r).pipe(Ve(c=>(e._resolvedData=c,e.data=rf(e,e.parent,n).resolve,null)))}function Ck(e,t,n,r){let i=G0(e);if(i.length===0)return Se({});let s={};return xt(i).pipe(Qt(c=>vk(e[c],t,n,r).pipe(Wr(),pn(h=>{if(h instanceof Zl)throw sf(new Hl,h);s[c]=h}))),Rs(1),gp(s),sr(c=>SE(c)?Kn:Ts(c)))}function vk(e,t,n,r){let i=Jl(t)??r,s=fa(e,i),c=s.resolve?s.resolve(t,n):Ci(i,()=>s(t,n));return so(c)}function z0(e){return Ar(t=>{let n=e(t);return n?xt(n).pipe(Ve(()=>t)):Se(t)})}var RE=(()=>{class e{buildTitle(n){let r,i=n.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===Me);return r}getResolvedTitleForRoute(n){return n.data[Kl]}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=pe({token:e,factory:()=>te(_k),providedIn:"root"})}}return e})(),_k=(()=>{class e extends RE{constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||e)(Ue(Kx))}}static{this.\u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),_m=new xe("",{providedIn:"root",factory:()=>({})}),xk=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275cmp=oe({type:e,selectors:[["ng-component"]],standalone:!0,features:[ae],decls:1,vars:0,template:function(r,i){r&1&&fe(0,"router-outlet")},dependencies:[Cm],encapsulation:2})}}return e})();function xm(e){let t=e.children&&e.children.map(xm),n=t?Pe(J({},e),{children:t}):J({},e);return!n.component&&!n.loadComponent&&(t||n.loadChildren)&&n.outlet&&n.outlet!==Me&&(n.component=xk),n}var Em=new xe(""),Ek=(()=>{class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=te(S0)}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return Se(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);let r=so(n.loadComponent()).pipe(Ve(OE),pn(s=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=s}),sl(()=>{this.componentLoaders.delete(n)})),i=new Ss(r,()=>new fn).pipe(Ds());return this.componentLoaders.set(n,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Se({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let s=bk(r,this.compiler,n,this.onLoadEndListener).pipe(sl(()=>{this.childrenLoaders.delete(r)})),c=new Ss(s,()=>new fn).pipe(Ds());return this.childrenLoaders.set(r,c),c}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function bk(e,t,n,r){return so(e.loadChildren()).pipe(Ve(OE),Qt(i=>i instanceof _l||Array.isArray(i)?Se(i):xt(t.compileModuleAsync(i))),Ve(i=>{r&&r(e);let s,c,h=!1;return Array.isArray(i)?(c=i,h=!0):(s=i.create(n).injector,c=s.get(Em,[],{optional:!0,self:!0}).flat()),{routes:c.map(xm),injector:s}}))}function Ik(e){return e&&typeof e=="object"&&"default"in e}function OE(e){return Ik(e)?e.default:e}var bm=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=pe({token:e,factory:()=>te(Dk),providedIn:"root"})}}return e})(),Dk=(()=>{class e{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),Sk=new xe("");var Ak=new xe(""),Tk=(()=>{class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new fn,this.transitionAbortSubject=new fn,this.configLoader=te(Ek),this.environmentInjector=te(cr),this.urlSerializer=te(ym),this.rootContexts=te(lf),this.location=te(Rl),this.inputBindingEnabled=te(vm,{optional:!0})!==null,this.titleStrategy=te(RE),this.options=te(_m,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=te(bm),this.createViewTransition=te(Sk,{optional:!0}),this.navigationErrorHandler=te(Ak,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Se(void 0),this.rootComponentType=null;let n=i=>this.events.next(new em(i)),r=i=>this.events.next(new tm(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;this.transitions?.next(Pe(J(J({},this.transitions.value),n),{id:r}))}setupNavigations(n,r,i){return this.transitions=new hn({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:jl,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Sr(s=>s.id!==0),Ve(s=>Pe(J({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),Ar(s=>{let c=!1,h=!1;return Se(s).pipe(Ar(g=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",tr.SupersededByNewNavigation),Kn;this.currentTransition=s,this.currentNavigation={id:g.id,initialUrl:g.rawUrl,extractedUrl:g.extractedUrl,targetBrowserUrl:typeof g.extras.browserUrl=="string"?this.urlSerializer.parse(g.extras.browserUrl):g.extras.browserUrl,trigger:g.source,extras:g.extras,previousNavigation:this.lastSuccessfulNavigation?Pe(J({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let m=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),_=g.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!m&&_!=="reload"){let x="";return this.events.next(new Qo(g.id,this.urlSerializer.serialize(g.rawUrl),x,Z0.IgnoredSameUrlNavigation)),g.resolve(!1),Kn}if(this.urlHandlingStrategy.shouldProcessUrl(g.rawUrl))return Se(g).pipe(Ar(x=>{let I=this.transitions?.getValue();return this.events.next(new Gl(x.id,this.urlSerializer.serialize(x.extractedUrl),x.source,x.restoredState)),I!==this.transitions?.getValue()?Kn:Promise.resolve(x)}),mk(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),pn(x=>{s.targetSnapshot=x.targetSnapshot,s.urlAfterRedirects=x.urlAfterRedirects,this.currentNavigation=Pe(J({},this.currentNavigation),{finalUrl:x.urlAfterRedirects});let I=new ef(x.id,this.urlSerializer.serialize(x.extractedUrl),this.urlSerializer.serialize(x.urlAfterRedirects),x.targetSnapshot);this.events.next(I)}));if(m&&this.urlHandlingStrategy.shouldProcessUrl(g.currentRawUrl)){let{id:x,extractedUrl:I,source:A,restoredState:P,extras:U}=g,q=new Gl(x,this.urlSerializer.serialize(I),A,P);this.events.next(q);let W=_E(this.rootComponentType).snapshot;return this.currentTransition=s=Pe(J({},g),{targetSnapshot:W,urlAfterRedirects:I,extras:Pe(J({},U),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=I,Se(s)}else{let x="";return this.events.next(new Qo(g.id,this.urlSerializer.serialize(g.extractedUrl),x,Z0.IgnoredByUrlHandlingStrategy)),g.resolve(!1),Kn}}),pn(g=>{let m=new Q0(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(m)}),Ve(g=>(this.currentTransition=s=Pe(J({},g),{guards:LP(g.targetSnapshot,g.currentSnapshot,this.rootContexts)}),s)),qP(this.environmentInjector,g=>this.events.next(g)),pn(g=>{if(s.guardsResult=g.guardsResult,g.guardsResult&&typeof g.guardsResult!="boolean")throw sf(this.urlSerializer,g.guardsResult);let m=new X0(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot,!!g.guardsResult);this.events.next(m)}),Sr(g=>g.guardsResult?!0:(this.cancelNavigationTransition(g,"",tr.GuardRejected),!1)),z0(g=>{if(g.guards.canActivateChecks.length)return Se(g).pipe(pn(m=>{let _=new K0(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(_)}),Ar(m=>{let _=!1;return Se(m).pipe(yk(this.paramsInheritanceStrategy,this.environmentInjector),pn({next:()=>_=!0,complete:()=>{_||this.cancelNavigationTransition(m,"",tr.NoDataFromResolver)}}))}),pn(m=>{let _=new J0(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(_)}))}),z0(g=>{let m=_=>{let x=[];_.routeConfig?.loadComponent&&!_.routeConfig._loadedComponent&&x.push(this.configLoader.loadComponent(_.routeConfig).pipe(pn(I=>{_.component=I}),Ve(()=>{})));for(let I of _.children)x.push(...m(I));return x};return ju(m(g.targetSnapshot.root)).pipe(Yi(null),di(1))}),z0(()=>this.afterPreactivation()),Ar(()=>{let{currentSnapshot:g,targetSnapshot:m}=s,_=this.createViewTransition?.(this.environmentInjector,g.root,m.root);return _?xt(_).pipe(Ve(()=>s)):Se(s)}),Ve(g=>{let m=NP(n.routeReuseStrategy,g.targetSnapshot,g.currentRouterState);return this.currentTransition=s=Pe(J({},g),{targetRouterState:m}),this.currentNavigation.targetRouterState=m,s}),pn(()=>{this.events.next(new ql)}),kP(this.rootContexts,n.routeReuseStrategy,g=>this.events.next(g),this.inputBindingEnabled),di(1),pn({next:g=>{c=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Zo(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects))),this.titleStrategy?.updateTitle(g.targetRouterState.snapshot),g.resolve(!0)},complete:()=>{c=!0}}),Cp(this.transitionAbortSubject.pipe(pn(g=>{throw g}))),sl(()=>{!c&&!h&&this.cancelNavigationTransition(s,"",tr.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),sr(g=>{if(h=!0,DE(g))this.events.next(new Mi(s.id,this.urlSerializer.serialize(s.extractedUrl),g.message,g.cancellationCode)),PP(g)?this.events.next(new ua(g.url,g.navigationBehaviorOptions)):s.resolve(!1);else{let m=new $l(s.id,this.urlSerializer.serialize(s.extractedUrl),g,s.targetSnapshot??void 0);try{let _=Ci(this.environmentInjector,()=>this.navigationErrorHandler?.(m));if(_ instanceof Zl){let{message:x,cancellationCode:I}=sf(this.urlSerializer,_);this.events.next(new Mi(s.id,this.urlSerializer.serialize(s.extractedUrl),x,I)),this.events.next(new ua(_.redirectTo,_.navigationBehaviorOptions))}else{this.events.next(m);let x=n.errorHandler(g);s.resolve(!!x)}}catch(_){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(_)}}return Kn}))}))}cancelNavigationTransition(n,r,i){let s=new Mi(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(s),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return n.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function Mk(e){return e!==jl}var Nk=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=pe({token:e,factory:()=>te(Rk),providedIn:"root"})}}return e})(),mm=class{shouldDetach(t){return!1}store(t,n){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,n){return t.routeConfig===n.routeConfig}},Rk=(()=>{class e extends mm{static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=Xs(e)))(i||e)}})()}static{this.\u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),PE=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=pe({token:e,factory:()=>te(Ok),providedIn:"root"})}}return e})(),Ok=(()=>{class e extends PE{constructor(){super(...arguments),this.location=te(Rl),this.urlSerializer=te(ym),this.options=te(_m,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=te(bm),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Ni,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=_E(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&n(r.url,r.state)})}handleRouterEvent(n,r){if(n instanceof Gl)this.stateMemento=this.createStateMemento();else if(n instanceof Qo)this.rawUrlTree=r.initialUrl;else if(n instanceof ef){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else n instanceof ql?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):n instanceof Mi&&(n.code===tr.GuardRejected||n.code===tr.NoDataFromResolver)?this.restoreHistory(r):n instanceof $l?this.restoreHistory(r,!0):n instanceof Zo&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,r){let i=n instanceof Ni?this.urlSerializer.serialize(n):n;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let s=this.browserPageId,c=J(J({},r.extras.state),this.generateNgRouterState(r.id,s));this.location.replaceState(i,"",c)}else{let s=J(J({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",s)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,s=this.currentPageId-i;s!==0?this.location.historyGo(s):this.currentUrlTree===n.finalUrl&&s===0&&(this.resetState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=Xs(e)))(i||e)}})()}static{this.\u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),Bl=function(e){return e[e.COMPLETE=0]="COMPLETE",e[e.FAILED=1]="FAILED",e[e.REDIRECTING=2]="REDIRECTING",e}(Bl||{});function Pk(e,t){e.events.pipe(Sr(n=>n instanceof Zo||n instanceof Mi||n instanceof $l||n instanceof Qo),Ve(n=>n instanceof Zo||n instanceof Qo?Bl.COMPLETE:(n instanceof Mi?n.code===tr.Redirect||n.code===tr.SupersededByNewNavigation:!1)?Bl.REDIRECTING:Bl.FAILED),Sr(n=>n!==Bl.REDIRECTING),di(1)).subscribe(()=>{t()})}function kk(e){throw e}var Lk={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Fk={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Jr=(()=>{class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=te(Ud),this.stateManager=te(PE),this.options=te(_m,{optional:!0})||{},this.pendingTasks=te(Ks),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=te(Tk),this.urlSerializer=te(ym),this.location=te(Rl),this.urlHandlingStrategy=te(bm),this._events=new fn,this.errorHandler=this.options.errorHandler||kk,this.navigated=!1,this.routeReuseStrategy=te(Nk),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=te(Em,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!te(vm,{optional:!0}),this.eventsSubscription=new Pt,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(i!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof Mi&&r.code!==tr.Redirect&&r.code!==tr.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Zo)this.navigated=!0;else if(r instanceof ua){let c=r.navigationBehaviorOptions,h=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),g=J({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||Mk(i.source)},c);this.scheduleNavigation(h,jl,null,g,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}Vk(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),jl,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(n,"popstate",r)},0)})}navigateToSyncWithBrowser(n,r,i){let s={replaceUrl:!0},c=i?.navigationId?i:null;if(i){let g=J({},i);delete g.navigationId,delete g.\u0275routerPageId,Object.keys(g).length!==0&&(s.state=g)}let h=this.parseUrl(n);this.scheduleNavigation(h,r,c,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(xm),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:i,queryParams:s,fragment:c,queryParamsHandling:h,preserveFragment:g}=r,m=g?this.currentUrlTree.fragment:c,_=null;switch(h??this.options.defaultQueryParamsHandling){case"merge":_=J(J({},this.currentUrlTree.queryParams),s);break;case"preserve":_=this.currentUrlTree.queryParams;break;default:_=s||null}_!==null&&(_=this.removeEmptyProps(_));let x;try{let I=i?i.snapshot:this.routerState.snapshot.root;x=yE(I)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),x=this.currentUrlTree.root}return wE(x,n,_,m??null)}navigateByUrl(n,r={skipLocationChange:!1}){let i=zl(n)?n:this.parseUrl(n),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,jl,null,r)}navigate(n,r={skipLocationChange:!1}){return Bk(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.urlSerializer.parse("/")}}isActive(n,r){let i;if(r===!0?i=J({},Lk):r===!1?i=J({},Fk):i=r,zl(n))return eE(this.currentUrlTree,n,i);let s=this.parseUrl(n);return eE(this.currentUrlTree,s,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,s])=>(s!=null&&(r[i]=s),r),{})}scheduleNavigation(n,r,i,s,c){if(this.disposed)return Promise.resolve(!1);let h,g,m;c?(h=c.resolve,g=c.reject,m=c.promise):m=new Promise((x,I)=>{h=x,g=I});let _=this.pendingTasks.add();return Pk(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(_))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:s,resolve:h,reject:g,promise:m,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),m.catch(x=>Promise.reject(x))}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function Bk(e){for(let t=0;t<e.length;t++)if(e[t]==null)throw new he(4008,!1)}function Vk(e){return!(e instanceof ql)&&!(e instanceof ua)}var jk=new xe("");function kE(e,...t){return Gg([{provide:Em,multi:!0,useValue:e},[],{provide:Kr,useFactory:Uk,deps:[Jr]},{provide:D0,multi:!0,useFactory:Hk},t.map(n=>n.\u0275providers)])}function Uk(e){return e.routerState.root}function Hk(){let e=te(eo);return t=>{let n=e.get(Go);if(t!==n.components[0])return;let r=e.get(Jr),i=e.get(zk);e.get(Wk)===1&&r.initialNavigation(),e.get(Gk,null,je.Optional)?.setUpPreloading(),e.get(jk,null,je.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var zk=new xe("",{factory:()=>new fn}),Wk=new xe("",{providedIn:"root",factory:()=>1});var Gk=new xe("");var LE=(()=>{class e{constructor(){}title="Tablefi";static \u0275fac=function(r){return new(r||e)};static \u0275cmp=oe({type:e,selectors:[["app-root"]],standalone:!0,features:[ae],decls:1,vars:0,template:function(r,i){r&1&&fe(0,"router-outlet")},dependencies:[Cm,M0],styles:["router-outlet[_ngcontent-%COMP%]{height:100%;width:100%}"]})}return e})();var GE=(()=>{class e{constructor(n,r){this._renderer=n,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static{this.\u0275fac=function(r){return new(r||e)(Q(io),Q(Qr))}}static{this.\u0275dir=Wn({type:e})}}return e})(),$k=(()=>{class e extends GE{static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=Xs(e)))(i||e)}})()}static{this.\u0275dir=Wn({type:e,features:[Di]})}}return e})(),$E=new xe("");var qk={provide:$E,useExisting:zo(()=>An),multi:!0};function Yk(){let e=Ti()?Ti().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}var Zk=new xe(""),An=(()=>{class e extends GE{constructor(n,r,i){super(n,r),this._compositionMode=i,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!Yk())}writeValue(n){let r=n??"";this.setProperty("value",r)}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static{this.\u0275fac=function(r){return new(r||e)(Q(io),Q(Qr),Q(Zk,8))}}static{this.\u0275dir=Wn({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&X("input",function(c){return i._handleInput(c.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(c){return i._compositionEnd(c.target.value)})},features:[Tl([qk]),Di]})}}return e})();function Qk(e){return e==null||(typeof e=="string"||Array.isArray(e))&&e.length===0}var Dm=new xe(""),qE=new xe("");function Xk(e){return Qk(e.value)?{required:!0}:null}function FE(e){return null}function YE(e){return e!=null}function ZE(e){return Wo(e)?xt(e):e}function QE(e){let t={};return e.forEach(n=>{t=n!=null?J(J({},t),n):t}),Object.keys(t).length===0?null:t}function XE(e,t){return t.map(n=>n(e))}function Kk(e){return!e.validate}function KE(e){return e.map(t=>Kk(t)?t:n=>t.validate(n))}function Jk(e){if(!e)return null;let t=e.filter(YE);return t.length==0?null:function(n){return QE(XE(n,t))}}function Sm(e){return e!=null?Jk(KE(e)):null}function e8(e){if(!e)return null;let t=e.filter(YE);return t.length==0?null:function(n){let r=XE(n,t).map(ZE);return hp(r).pipe(Ve(QE))}}function Am(e){return e!=null?e8(KE(e)):null}function BE(e,t){return e===null?[t]:Array.isArray(e)?[...e,t]:[e,t]}function t8(e){return e._rawValidators}function n8(e){return e._rawAsyncValidators}function Im(e){return e?Array.isArray(e)?e:[e]:[]}function ff(e,t){return Array.isArray(e)?e.includes(t):e===t}function VE(e,t){let n=Im(t);return Im(e).forEach(i=>{ff(n,i)||n.push(i)}),n}function jE(e,t){return Im(t).filter(n=>!ff(e,n))}var hf=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=Sm(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=Am(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,n){return this.control?this.control.hasError(t,n):!1}getError(t,n){return this.control?this.control.getError(t,n):null}},ga=class extends hf{get formDirective(){return null}get path(){return null}},sc=class extends hf{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},pf=class{constructor(t){this._cd=t}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},r8={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},iW=Pe(J({},r8),{"[class.ng-submitted]":"isSubmitted"}),$n=(()=>{class e extends pf{constructor(n){super(n)}static{this.\u0275fac=function(r){return new(r||e)(Q(sc,2))}}static{this.\u0275dir=Wn({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&oo("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[Di]})}}return e})(),ei=(()=>{class e extends pf{constructor(n){super(n)}static{this.\u0275fac=function(r){return new(r||e)(Q(ga,10))}}static{this.\u0275dir=Wn({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&oo("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[Di]})}}return e})();var tc="VALID",df="INVALID",ha="PENDING",nc="DISABLED",ma=class{},gf=class extends ma{constructor(t,n){super(),this.value=t,this.source=n}},ic=class extends ma{constructor(t,n){super(),this.pristine=t,this.source=n}},oc=class extends ma{constructor(t,n){super(),this.touched=t,this.source=n}},pa=class extends ma{constructor(t,n){super(),this.status=t,this.source=n}};function JE(e){return(wf(e)?e.validators:e)||null}function i8(e){return Array.isArray(e)?Sm(e):e||null}function eb(e,t){return(wf(t)?t.asyncValidators:e)||null}function o8(e){return Array.isArray(e)?Am(e):e||null}function wf(e){return e!=null&&!Array.isArray(e)&&typeof e=="object"}function s8(e,t,n){let r=e.controls;if(!(t?Object.keys(r):r).length)throw new he(1e3,"");if(!r[n])throw new he(1001,"")}function a8(e,t,n){e._forEachChild((r,i)=>{if(n[i]===void 0)throw new he(1002,"")})}var mf=class{constructor(t,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=Nl(()=>this.statusReactive()),this.statusReactive=Dl(void 0),this._pristine=Nl(()=>this.pristineReactive()),this.pristineReactive=Dl(!0),this._touched=Nl(()=>this.touchedReactive()),this.touchedReactive=Dl(!1),this._events=new fn,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get status(){return Ai(this.statusReactive)}set status(t){Ai(()=>this.statusReactive.set(t))}get valid(){return this.status===tc}get invalid(){return this.status===df}get pending(){return this.status==ha}get disabled(){return this.status===nc}get enabled(){return this.status!==nc}get pristine(){return Ai(this.pristineReactive)}set pristine(t){Ai(()=>this.pristineReactive.set(t))}get dirty(){return!this.pristine}get touched(){return Ai(this.touchedReactive)}set touched(t){Ai(()=>this.touchedReactive.set(t))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(VE(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(VE(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(jE(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(jE(t,this._rawAsyncValidators))}hasValidator(t){return ff(this._rawValidators,t)}hasAsyncValidator(t){return ff(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){let n=this.touched===!1;this.touched=!0;let r=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsTouched(Pe(J({},t),{sourceControl:r})),n&&t.emitEvent!==!1&&this._events.next(new oc(!0,r))}markAllAsTouched(t={}){this.markAsTouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(t))}markAsUntouched(t={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=t.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:r})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,r),n&&t.emitEvent!==!1&&this._events.next(new oc(!1,r))}markAsDirty(t={}){let n=this.pristine===!0;this.pristine=!1;let r=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsDirty(Pe(J({},t),{sourceControl:r})),n&&t.emitEvent!==!1&&this._events.next(new ic(!1,r))}markAsPristine(t={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=t.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:t.emitEvent})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t,r),n&&t.emitEvent!==!1&&this._events.next(new ic(!0,r))}markAsPending(t={}){this.status=ha;let n=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new pa(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.markAsPending(Pe(J({},t),{sourceControl:n}))}disable(t={}){let n=this._parentMarkedDirty(t.onlySelf);this.status=nc,this.errors=null,this._forEachChild(i=>{i.disable(Pe(J({},t),{onlySelf:!0}))}),this._updateValue();let r=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new gf(this.value,r)),this._events.next(new pa(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Pe(J({},t),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(t={}){let n=this._parentMarkedDirty(t.onlySelf);this.status=tc,this._forEachChild(r=>{r.enable(Pe(J({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Pe(J({},t),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(t,n){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===tc||this.status===ha)&&this._runAsyncValidator(r,t.emitEvent)}let n=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new gf(this.value,n)),this._events.next(new pa(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(Pe(J({},t),{sourceControl:n}))}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?nc:tc}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t,n){if(this.asyncValidator){this.status=ha,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1};let r=ZE(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:n,shouldHaveEmitted:t})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let t=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,t}return!1}setErrors(t,n={}){this.errors=t,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(t){let n=t;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(t,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[t]:null}hasError(t,n){return!!this.getError(t,n)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t,n,r){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),(t||r)&&this._events.next(new pa(this.status,n)),this._parent&&this._parent._updateControlsErrors(t,n,r)}_initObservables(){this.valueChanges=new St,this.statusChanges=new St}_calculateStatus(){return this._allControlsDisabled()?nc:this.errors?df:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ha)?ha:this._anyControlsHaveStatus(df)?df:tc}_anyControlsHaveStatus(t){return this._anyControls(n=>n.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t,n){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!t.onlySelf&&this._parent._updatePristine(t,n),i&&this._events.next(new ic(this.pristine,n))}_updateTouched(t={},n){this.touched=this._anyControlsTouched(),this._events.next(new oc(this.touched,n)),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,n)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){wf(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let n=this._parent&&this._parent.dirty;return!t&&!!n&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=i8(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=o8(this._rawAsyncValidators)}},yf=class extends mf{constructor(t,n,r){super(JE(n),eb(r,n)),this.controls=t,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,n){return this.controls[t]?this.controls[t]:(this.controls[t]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(t,n,r={}){this.registerControl(t,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(t,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(t,n,r={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],n&&this.registerControl(t,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,n={}){a8(this,!0,t),Object.keys(t).forEach(r=>{s8(this,!0,r),this.controls[r].setValue(t[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(t,n={}){t!=null&&(Object.keys(t).forEach(r=>{let i=this.controls[r];i&&i.patchValue(t[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(t={},n={}){this._forEachChild((r,i)=>{r.reset(t?t[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(t,n,r)=>(t[r]=n.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&t(r,n)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&t(r))return!0;return!1}_reduceValue(){let t={};return this._reduceChildren(t,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(t,n){let r=t;return this._forEachChild((i,s)=>{r=n(r,i,s)}),r}_allControlsDisabled(){for(let t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}};var Tm=new xe("CallSetDisabledState",{providedIn:"root",factory:()=>Mm}),Mm="always";function l8(e,t){return[...t.path,e]}function tb(e,t,n=Mm){nb(e,t),t.valueAccessor.writeValue(e.value),(e.disabled||n==="always")&&t.valueAccessor.setDisabledState?.(e.disabled),u8(e,t),f8(e,t),d8(e,t),c8(e,t)}function UE(e,t){e.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(t)})}function c8(e,t){if(t.valueAccessor.setDisabledState){let n=r=>{t.valueAccessor.setDisabledState(r)};e.registerOnDisabledChange(n),t._registerOnDestroy(()=>{e._unregisterOnDisabledChange(n)})}}function nb(e,t){let n=t8(e);t.validator!==null?e.setValidators(BE(n,t.validator)):typeof n=="function"&&e.setValidators([n]);let r=n8(e);t.asyncValidator!==null?e.setAsyncValidators(BE(r,t.asyncValidator)):typeof r=="function"&&e.setAsyncValidators([r]);let i=()=>e.updateValueAndValidity();UE(t._rawValidators,i),UE(t._rawAsyncValidators,i)}function u8(e,t){t.valueAccessor.registerOnChange(n=>{e._pendingValue=n,e._pendingChange=!0,e._pendingDirty=!0,e.updateOn==="change"&&rb(e,t)})}function d8(e,t){t.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,e.updateOn==="blur"&&e._pendingChange&&rb(e,t),e.updateOn!=="submit"&&e.markAsTouched()})}function rb(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function f8(e,t){let n=(r,i)=>{t.valueAccessor.writeValue(r),i&&t.viewToModelUpdate(r)};e.registerOnChange(n),t._registerOnDestroy(()=>{e._unregisterOnChange(n)})}function h8(e,t){e==null,nb(e,t)}function p8(e,t){if(!e.hasOwnProperty("model"))return!1;let n=e.model;return n.isFirstChange()?!0:!Object.is(t,n.currentValue)}function g8(e){return Object.getPrototypeOf(e.constructor)===$k}function m8(e,t){e._syncPendingControls(),t.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function y8(e,t){if(!t)return null;Array.isArray(t);let n,r,i;return t.forEach(s=>{s.constructor===An?n=s:g8(s)?r=s:i=s}),i||r||n||null}var w8={provide:ga,useExisting:zo(()=>Fr)},rc=Promise.resolve(),Fr=(()=>{class e extends ga{get submitted(){return Ai(this.submittedReactive)}constructor(n,r,i){super(),this.callSetDisabledState=i,this._submitted=Nl(()=>this.submittedReactive()),this.submittedReactive=Dl(!1),this._directives=new Set,this.ngSubmit=new St,this.form=new yf({},Sm(n),Am(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(n){rc.then(()=>{let r=this._findContainer(n.path);n.control=r.registerControl(n.name,n.control),tb(n.control,n,this.callSetDisabledState),n.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(n)})}getControl(n){return this.form.get(n.path)}removeControl(n){rc.then(()=>{let r=this._findContainer(n.path);r&&r.removeControl(n.name),this._directives.delete(n)})}addFormGroup(n){rc.then(()=>{let r=this._findContainer(n.path),i=new yf({});h8(i,n),r.registerControl(n.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(n){rc.then(()=>{let r=this._findContainer(n.path);r&&r.removeControl(n.name)})}getFormGroup(n){return this.form.get(n.path)}updateModel(n,r){rc.then(()=>{this.form.get(n.path).setValue(r)})}setValue(n){this.control.setValue(n)}onSubmit(n){return this.submittedReactive.set(!0),m8(this.form,this._directives),this.ngSubmit.emit(n),n?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(n=void 0){this.form.reset(n),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(n){return n.pop(),n.length?this.form.get(n):this.form}static{this.\u0275fac=function(r){return new(r||e)(Q(Dm,10),Q(qE,10),Q(Tm,8))}}static{this.\u0275dir=Wn({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&X("submit",function(c){return i.onSubmit(c)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Tl([w8]),Di]})}}return e})();function HE(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}function zE(e){return typeof e=="object"&&e!==null&&Object.keys(e).length===2&&"value"in e&&"disabled"in e}var C8=class extends mf{constructor(t=null,n,r){super(JE(n),eb(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),wf(n)&&(n.nonNullable||n.initialValueIsDefault)&&(zE(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,n={}){this.value=this._pendingValue=t,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(t,n={}){this.setValue(t,n)}reset(t=this.defaultValue,n={}){this._applyFormState(t),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){HE(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){HE(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){zE(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var v8={provide:sc,useExisting:zo(()=>On)},WE=Promise.resolve(),On=(()=>{class e extends sc{constructor(n,r,i,s,c,h){super(),this._changeDetectorRef=c,this.callSetDisabledState=h,this.control=new C8,this._registered=!1,this.name="",this.update=new St,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=y8(this,s)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){let r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),p8(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){tb(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(n){WE.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){let r=n.isDisabled.currentValue,i=r!==0&&Ml(r);WE.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?l8(n,this._parent):[n]}static{this.\u0275fac=function(r){return new(r||e)(Q(ga,9),Q(Dm,10),Q(qE,10),Q($E,10),Q(Si,8),Q(Tm,8))}}static{this.\u0275dir=Wn({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Tl([v8]),Di,xi]})}}return e})(),ti=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275dir=Wn({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return e})();var _8=(()=>{class e{constructor(){this._validator=FE}ngOnChanges(n){if(this.inputName in n){let r=this.normalizeInput(n[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):FE,this._onChange&&this._onChange()}}validate(n){return this._validator(n)}registerOnValidatorChange(n){this._onChange=n}enabled(n){return n!=null}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275dir=Wn({type:e,features:[xi]})}}return e})();var x8={provide:Dm,useExisting:zo(()=>nr),multi:!0};var nr=(()=>{class e extends _8{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=Ml,this.createValidator=n=>Xk}enabled(n){return n}static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=Xs(e)))(i||e)}})()}static{this.\u0275dir=Wn({type:e,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&Fd("required",i._enabled?"":null)},inputs:{required:"required"},features:[Tl([x8]),Di]})}}return e})();var E8=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=wi({type:e})}static{this.\u0275inj=yi({})}}return e})();var sn=(()=>{class e{static withConfig(n){return{ngModule:e,providers:[{provide:Tm,useValue:n.callSetDisabledState??Mm}]}}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=wi({type:e})}static{this.\u0275inj=yi({imports:[E8]})}}return e})();var Nm={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};var Y=function(e,t){if(!e)throw Jo(t)},Jo=function(e){return new Error("Firebase Database ("+Nm.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)};var ob=function(e){let t=[],n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},b8=function(e){let t=[],n=0,r=0;for(;n<e.length;){let i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=e[n++];t[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=e[n++],c=e[n++],h=e[n++],g=((i&7)<<18|(s&63)<<12|(c&63)<<6|h&63)-65536;t[r++]=String.fromCharCode(55296+(g>>10)),t[r++]=String.fromCharCode(56320+(g&1023))}else{let s=e[n++],c=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|c&63)}}return t.join("")},vf={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){let s=e[i],c=i+1<e.length,h=c?e[i+1]:0,g=i+2<e.length,m=g?e[i+2]:0,_=s>>2,x=(s&3)<<4|h>>4,I=(h&15)<<2|m>>6,A=m&63;g||(A=64,c||(I=64)),r.push(n[_],n[x],n[I],n[A])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(ob(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):b8(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();let n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){let s=n[e.charAt(i++)],h=i<e.length?n[e.charAt(i)]:0;++i;let m=i<e.length?n[e.charAt(i)]:64;++i;let x=i<e.length?n[e.charAt(i)]:64;if(++i,s==null||h==null||m==null||x==null)throw new Rm;let I=s<<2|h>>4;if(r.push(I),m!==64){let A=h<<4&240|m>>2;if(r.push(A),x!==64){let P=m<<6&192|x;r.push(P)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},Rm=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},Pm=function(e){let t=ob(e);return vf.encodeByteArray(t,!0)},ac=function(e){return Pm(e).replace(/\./g,"")},Om=function(e){try{return vf.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function sb(e){return ab(void 0,e)}function ab(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:let n=t;return new Date(n.getTime());case Object:e===void 0&&(e={});break;case Array:e=[];break;default:return t}for(let n in t)!t.hasOwnProperty(n)||!I8(n)||(e[n]=ab(e[n],t[n]));return e}function I8(e){return e!=="__proto__"}function D8(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var S8=()=>D8().__FIREBASE_DEFAULTS__,A8=()=>{if(typeof process>"u"||typeof process.env>"u")return;let e=process.env.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},T8=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let t=e&&Om(e[1]);return t&&JSON.parse(t)},lb=()=>{try{return S8()||A8()||T8()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},M8=e=>{var t,n;return(n=(t=lb())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},cb=e=>{let t=M8(e);if(!t)return;let n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);let r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},km=()=>{var e;return(e=lb())===null||e===void 0?void 0:e.config};var Ri=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}};function ub(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=t||"demo-project",i=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let c=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[ac(JSON.stringify(n)),ac(JSON.stringify(c)),""].join(".")}function N8(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Lm(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(N8())}function db(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function ni(){return Nm.NODE_CLIENT===!0||Nm.NODE_ADMIN===!0}function fb(){try{return typeof indexedDB=="object"}catch{return!1}}function hb(){return new Promise((e,t)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;t(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){t(n)}})}var R8="FirebaseError",Ko=class e extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=R8,Object.setPrototypeOf(this,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,lc.prototype.create)}},lc=class{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){let r=n[0]||{},i=`${this.service}/${t}`,s=this.errors[t],c=s?O8(s,r):"Error",h=`${this.serviceName}: ${c} (${i}).`;return new Ko(i,h,r)}};function O8(e,t){return e.replace(P8,(n,r)=>{let i=t[r];return i!=null?String(i):`<${r}?>`})}var P8=/\{\$([^}]+)}/g;function ya(e){return JSON.parse(e)}function Gt(e){return JSON.stringify(e)}var pb=function(e){let t={},n={},r={},i="";try{let s=e.split(".");t=ya(Om(s[0])||""),n=ya(Om(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:t,claims:n,data:r,signature:i}};var gb=function(e){let t=pb(e),n=t.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},mb=function(e){let t=pb(e).claims;return typeof t=="object"&&t.admin===!0};function Br(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function es(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]}function Fm(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function cc(e,t,n){let r={};for(let i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function _f(e,t){if(e===t)return!0;let n=Object.keys(e),r=Object.keys(t);for(let i of n){if(!r.includes(i))return!1;let s=e[i],c=t[i];if(ib(s)&&ib(c)){if(!_f(s,c))return!1}else if(s!==c)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function ib(e){return e!==null&&typeof e=="object"}function yb(e){let t=[];for(let[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(i=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}var Cf=class{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(t,n){n||(n=0);let r=this.W_;if(typeof t=="string")for(let x=0;x<16;x++)r[x]=t.charCodeAt(n)<<24|t.charCodeAt(n+1)<<16|t.charCodeAt(n+2)<<8|t.charCodeAt(n+3),n+=4;else for(let x=0;x<16;x++)r[x]=t[n]<<24|t[n+1]<<16|t[n+2]<<8|t[n+3],n+=4;for(let x=16;x<80;x++){let I=r[x-3]^r[x-8]^r[x-14]^r[x-16];r[x]=(I<<1|I>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],c=this.chain_[2],h=this.chain_[3],g=this.chain_[4],m,_;for(let x=0;x<80;x++){x<40?x<20?(m=h^s&(c^h),_=1518500249):(m=s^c^h,_=1859775393):x<60?(m=s&c|h&(s|c),_=2400959708):(m=s^c^h,_=3395469782);let I=(i<<5|i>>>27)+m+g+_+r[x]&4294967295;g=h,h=c,c=(s<<30|s>>>2)&4294967295,s=i,i=I}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+g&4294967295}update(t,n){if(t==null)return;n===void 0&&(n=t.length);let r=n-this.blockSize,i=0,s=this.buf_,c=this.inbuf_;for(;i<n;){if(c===0)for(;i<=r;)this.compress_(t,i),i+=this.blockSize;if(typeof t=="string"){for(;i<n;)if(s[c]=t.charCodeAt(i),++c,++i,c===this.blockSize){this.compress_(s),c=0;break}}else for(;i<n;)if(s[c]=t[i],++c,++i,c===this.blockSize){this.compress_(s),c=0;break}}this.inbuf_=c,this.total_+=n}digest(){let t=[],n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)t[r]=this.chain_[i]>>s&255,++r;return t}};function uc(e,t){return`${e} failed: ${t} argument `}var wb=function(e){let t=[],n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);if(i>=55296&&i<=56319){let s=i-55296;r++,Y(r<e.length,"Surrogate pair missing trail surrogate.");let c=e.charCodeAt(r)-56320;i=65536+(s<<10)+c}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},dc=function(e){let t=0;for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};var aW=4*60*60*1e3;function ao(e){return e&&e._delegate?e._delegate:e}var Oi=class{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}};var ts="[DEFAULT]";var xf=class{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){let n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){let r=new Ri;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;let r=this.normalizeInstanceIdentifier(t?.identifier),i=(n=t?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(L8(t))try{this.getOrInitializeService({instanceIdentifier:ts})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(t=ts){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}delete(){return Yt(this,null,function*(){let t=Array.from(this.instances.values());yield Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(t=ts){return this.instances.has(t)}getOptions(t=ts){return this.instancesOptions.get(t)||{}}initialize(t={}){let{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[s,c]of this.instancesDeferred.entries()){let h=this.normalizeInstanceIdentifier(s);r===h&&c.resolve(i)}return i}onInit(t,n){var r;let i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(t),this.onInitCallbacks.set(i,s);let c=this.instances.get(i);return c&&t(c,i),()=>{s.delete(t)}}invokeOnInitCallbacks(t,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:k8(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=ts){return this.component?this.component.multipleInstances?t:ts:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function k8(e){return e===ts?void 0:e}function L8(e){return e.instantiationMode==="EAGER"}var fc=class{constructor(t){this.name=t,this.providers=new Map}addComponent(t){let n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);let n=new xf(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}};var F8=[],Et=function(e){return e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT",e}(Et||{}),B8={debug:Et.DEBUG,verbose:Et.VERBOSE,info:Et.INFO,warn:Et.WARN,error:Et.ERROR,silent:Et.SILENT},V8=Et.INFO,j8={[Et.DEBUG]:"log",[Et.VERBOSE]:"log",[Et.INFO]:"info",[Et.WARN]:"warn",[Et.ERROR]:"error"},U8=(e,t,...n)=>{if(t<e.logLevel)return;let r=new Date().toISOString(),i=j8[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)},wa=class{constructor(t){this.name=t,this._logLevel=V8,this._logHandler=U8,this._userLogHandler=null,F8.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Et))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?B8[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Et.DEBUG,...t),this._logHandler(this,Et.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Et.VERBOSE,...t),this._logHandler(this,Et.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Et.INFO,...t),this._logHandler(this,Et.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Et.WARN,...t),this._logHandler(this,Et.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Et.ERROR,...t),this._logHandler(this,Et.ERROR,...t)}};var H8=(e,t)=>t.some(n=>e instanceof n),Cb,vb;function z8(){return Cb||(Cb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function W8(){return vb||(vb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var _b=new WeakMap,Vm=new WeakMap,xb=new WeakMap,Bm=new WeakMap,Um=new WeakMap;function G8(e){let t=new Promise((n,r)=>{let i=()=>{e.removeEventListener("success",s),e.removeEventListener("error",c)},s=()=>{n(ri(e.result)),i()},c=()=>{r(e.error),i()};e.addEventListener("success",s),e.addEventListener("error",c)});return t.then(n=>{n instanceof IDBCursor&&_b.set(n,e)}).catch(()=>{}),Um.set(t,e),t}function $8(e){if(Vm.has(e))return;let t=new Promise((n,r)=>{let i=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",c),e.removeEventListener("abort",c)},s=()=>{n(),i()},c=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",s),e.addEventListener("error",c),e.addEventListener("abort",c)});Vm.set(e,t)}var jm={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return Vm.get(e);if(t==="objectStoreNames")return e.objectStoreNames||xb.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ri(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function Eb(e){jm=e(jm)}function q8(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){let r=e.call(Ef(this),t,...n);return xb.set(r,t.sort?t.sort():[t]),ri(r)}:W8().includes(e)?function(...t){return e.apply(Ef(this),t),ri(_b.get(this))}:function(...t){return ri(e.apply(Ef(this),t))}}function Y8(e){return typeof e=="function"?q8(e):(e instanceof IDBTransaction&&$8(e),H8(e,z8())?new Proxy(e,jm):e)}function ri(e){if(e instanceof IDBRequest)return G8(e);if(Bm.has(e))return Bm.get(e);let t=Y8(e);return t!==e&&(Bm.set(e,t),Um.set(t,e)),t}var Ef=e=>Um.get(e);function Ib(e,t,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){let c=indexedDB.open(e,t),h=ri(c);return r&&c.addEventListener("upgradeneeded",g=>{r(ri(c.result),g.oldVersion,g.newVersion,ri(c.transaction),g)}),n&&c.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),h.then(g=>{s&&g.addEventListener("close",()=>s()),i&&g.addEventListener("versionchange",m=>i(m.oldVersion,m.newVersion,m))}).catch(()=>{}),h}var Z8=["get","getKey","getAll","getAllKeys","count"],Q8=["put","add","delete","clear"],Hm=new Map;function bb(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(Hm.get(t))return Hm.get(t);let n=t.replace(/FromIndex$/,""),r=t!==n,i=Q8.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Z8.includes(n)))return;let s=function(c,...h){return Yt(this,null,function*(){let g=this.transaction(c,i?"readwrite":"readonly"),m=g.store;return r&&(m=m.index(h.shift())),(yield Promise.all([m[n](...h),i&&g.done]))[0]})};return Hm.set(t,s),s}Eb(e=>Pe(J({},e),{get:(t,n,r)=>bb(t,n)||e.get(t,n,r),has:(t,n)=>!!bb(t,n)||e.has(t,n)}));var Wm=class{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(X8(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function X8(e){let t=e.getComponent();return t?.type==="VERSION"}var Gm="@firebase/app",Db="0.10.12";var Pi=new wa("@firebase/app"),K8="@firebase/app-compat",J8="@firebase/analytics-compat",e4="@firebase/analytics",t4="@firebase/app-check-compat",n4="@firebase/app-check",r4="@firebase/auth",i4="@firebase/auth-compat",o4="@firebase/database",s4="@firebase/data-connect",a4="@firebase/database-compat",l4="@firebase/functions",c4="@firebase/functions-compat",u4="@firebase/installations",d4="@firebase/installations-compat",f4="@firebase/messaging",h4="@firebase/messaging-compat",p4="@firebase/performance",g4="@firebase/performance-compat",m4="@firebase/remote-config",y4="@firebase/remote-config-compat",w4="@firebase/storage",C4="@firebase/storage-compat",v4="@firebase/firestore",_4="@firebase/vertexai-preview",x4="@firebase/firestore-compat",E4="firebase",b4="10.14.0";var $m="[DEFAULT]",I4={[Gm]:"fire-core",[K8]:"fire-core-compat",[e4]:"fire-analytics",[J8]:"fire-analytics-compat",[n4]:"fire-app-check",[t4]:"fire-app-check-compat",[r4]:"fire-auth",[i4]:"fire-auth-compat",[o4]:"fire-rtdb",[s4]:"fire-data-connect",[a4]:"fire-rtdb-compat",[l4]:"fire-fn",[c4]:"fire-fn-compat",[u4]:"fire-iid",[d4]:"fire-iid-compat",[f4]:"fire-fcm",[h4]:"fire-fcm-compat",[p4]:"fire-perf",[g4]:"fire-perf-compat",[m4]:"fire-rc",[y4]:"fire-rc-compat",[w4]:"fire-gcs",[C4]:"fire-gcs-compat",[v4]:"fire-fst",[x4]:"fire-fst-compat",[_4]:"fire-vertex","fire-js":"fire-js",[E4]:"fire-js-all"};var bf=new Map,D4=new Map,qm=new Map;function Sb(e,t){try{e.container.addComponent(t)}catch(n){Pi.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function hc(e){let t=e.name;if(qm.has(t))return Pi.debug(`There were multiple attempts to register component ${t}.`),!1;qm.set(t,e);for(let n of bf.values())Sb(n,e);for(let n of D4.values())Sb(n,e);return!0}function Nb(e,t){let n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}var S4={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},lo=new lc("app","Firebase",S4);var Ym=class{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Oi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw lo.create("app-deleted",{appName:this._name})}};var Rb=b4;function Ee(e,t={}){let n=e;typeof t!="object"&&(t={name:t});let r=Object.assign({name:$m,automaticDataCollectionEnabled:!1},t),i=r.name;if(typeof i!="string"||!i)throw lo.create("bad-app-name",{appName:String(i)});if(n||(n=km()),!n)throw lo.create("no-options");let s=bf.get(i);if(s){if(_f(n,s.options)&&_f(r,s.config))return s;throw lo.create("duplicate-app",{appName:i})}let c=new fc(i);for(let g of qm.values())c.addComponent(g);let h=new Ym(n,r,c);return bf.set(i,h),h}function Ob(e=$m){let t=bf.get(e);if(!t&&e===$m&&km())return Ee();if(!t)throw lo.create("no-app",{appName:e});return t}function co(e,t,n){var r;let i=(r=I4[e])!==null&&r!==void 0?r:e;n&&(i+=`-${n}`);let s=i.match(/\s|\//),c=t.match(/\s|\//);if(s||c){let h=[`Unable to register library "${i}" with version "${t}":`];s&&h.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&c&&h.push("and"),c&&h.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Pi.warn(h.join(" "));return}hc(new Oi(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}var A4="firebase-heartbeat-database",T4=1,pc="firebase-heartbeat-store",zm=null;function Pb(){return zm||(zm=Ib(A4,T4,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(pc)}catch(n){console.warn(n)}}}}).catch(e=>{throw lo.create("idb-open",{originalErrorMessage:e.message})})),zm}function M4(e){return Yt(this,null,function*(){try{let n=(yield Pb()).transaction(pc),r=yield n.objectStore(pc).get(kb(e));return yield n.done,r}catch(t){if(t instanceof Ko)Pi.warn(t.message);else{let n=lo.create("idb-get",{originalErrorMessage:t?.message});Pi.warn(n.message)}}})}function Ab(e,t){return Yt(this,null,function*(){try{let r=(yield Pb()).transaction(pc,"readwrite");yield r.objectStore(pc).put(t,kb(e)),yield r.done}catch(n){if(n instanceof Ko)Pi.warn(n.message);else{let r=lo.create("idb-set",{originalErrorMessage:n?.message});Pi.warn(r.message)}}})}function kb(e){return`${e.name}!${e.options.appId}`}var N4=1024,R4=30*24*60*60*1e3,Zm=class{constructor(t){this.container=t,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new Qm(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return Yt(this,null,function*(){var t,n;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Tb();return((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(c=>c.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(c=>{let h=new Date(c.date).valueOf();return Date.now()-h<=R4}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Pi.warn(r)}})}getHeartbeatsHeader(){return Yt(this,null,function*(){var t;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=Tb(),{heartbeatsToSend:r,unsentEntries:i}=O4(this._heartbeatsCache.heartbeats),s=ac(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Pi.warn(n),""}})}};function Tb(){return new Date().toISOString().substring(0,10)}function O4(e,t=N4){let n=[],r=e.slice();for(let i of e){let s=n.find(c=>c.agent===i.agent);if(s){if(s.dates.push(i.date),Mb(n)>t){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Mb(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var Qm=class{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return Yt(this,null,function*(){return fb()?hb().then(()=>!0).catch(()=>!1):!1})}read(){return Yt(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield M4(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(t){return Yt(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return Ab(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return})}add(t){return Yt(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return Ab(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return})}};function Mb(e){return ac(JSON.stringify({version:2,heartbeats:e})).length}function P4(e){hc(new Oi("platform-logger",t=>new Wm(t),"PRIVATE")),hc(new Oi("heartbeat",t=>new Zm(t),"PRIVATE")),co(Gm,Db,e),co(Gm,Db,"esm2017"),co("fire-js","")}P4("");var k4="firebase",L4="10.14.0";co(k4,L4,"app");var Lb="@firebase/database",Fb="1.0.8";var J1="";function F4(e){J1=e}var i1=class{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,n){n==null?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Gt(n))}get(t){let n=this.domStorage_.getItem(this.prefixedName_(t));return n==null?null:ya(n)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}};var o1=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,n){n==null?delete this.cache_[t]:this.cache_[t]=n}get(t){return Br(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}};var gI=function(e){try{if(typeof window<"u"&&typeof window[e]<"u"){let t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new i1(t)}}catch{}return new o1},rs=gI("localStorage"),s1=gI("sessionStorage");var _a=new wa("@firebase/database"),B4=function(){let e=1;return function(){return e++}}(),mI=function(e){let t=wb(e),n=new Cf;n.update(t);let r=n.digest();return vf.encodeByteArray(r)},Pc=function(...e){let t="";for(let n=0;n<e.length;n++){let r=e[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?t+=Pc.apply(null,r):typeof r=="object"?t+=Gt(r):t+=r,t+=" "}return t},is=null,Bb=!0,V4=function(e,t){Y(!t||e===!0||e===!1,"Can't turn on custom loggers persistently."),e===!0?(_a.logLevel=Et.VERBOSE,is=_a.log.bind(_a),t&&s1.set("logging_enabled",!0)):typeof e=="function"?is=e:(is=null,s1.remove("logging_enabled"))},yn=function(...e){if(Bb===!0&&(Bb=!1,is===null&&s1.get("logging_enabled")===!0&&V4(!0)),is){let t=Pc.apply(null,e);is(t)}},kc=function(e){return function(...t){yn(e,...t)}},a1=function(...e){let t="FIREBASE INTERNAL ERROR: "+Pc(...e);_a.error(t)},ki=function(...e){let t=`FIREBASE FATAL ERROR: ${Pc(...e)}`;throw _a.error(t),new Error(t)},kn=function(...e){let t="FIREBASE WARNING: "+Pc(...e);_a.warn(t)},j4=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&kn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},ey=function(e){return typeof e=="number"&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},U4=function(e){if(ni()||document.readyState==="complete")e();else{let t=!1,n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}t||(t=!0,e())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Ea="[MIN_NAME]",os="[MAX_NAME]",as=function(e,t){if(e===t)return 0;if(e===Ea||t===os)return-1;if(t===Ea||e===os)return 1;{let n=Vb(e),r=Vb(t);return n!==null?r!==null?n-r===0?e.length-t.length:n-r:-1:r!==null?1:e<t?-1:1}},H4=function(e,t){return e===t?0:e<t?-1:1},gc=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+Gt(t))},ty=function(e){if(typeof e!="object"||e===null)return Gt(e);let t=[];for(let r in e)t.push(r);t.sort();let n="{";for(let r=0;r<t.length;r++)r!==0&&(n+=","),n+=Gt(t[r]),n+=":",n+=ty(e[t[r]]);return n+="}",n},yI=function(e,t){let n=e.length;if(n<=t)return[e];let r=[];for(let i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function wn(e,t){for(let n in e)e.hasOwnProperty(n)&&t(n,e[n])}var wI=function(e){Y(!ey(e),"Invalid JSON number");let t=11,n=52,r=(1<<t-1)-1,i,s,c,h,g;e===0?(s=0,c=0,i=1/e===-1/0?1:0):(i=e<0,e=Math.abs(e),e>=Math.pow(2,1-r)?(h=Math.min(Math.floor(Math.log(e)/Math.LN2),r),s=h+r,c=Math.round(e*Math.pow(2,n-h)-Math.pow(2,n))):(s=0,c=Math.round(e/Math.pow(2,1-r-n))));let m=[];for(g=n;g;g-=1)m.push(c%2?1:0),c=Math.floor(c/2);for(g=t;g;g-=1)m.push(s%2?1:0),s=Math.floor(s/2);m.push(i?1:0),m.reverse();let _=m.join(""),x="";for(g=0;g<64;g+=8){let I=parseInt(_.substr(g,8),2).toString(16);I.length===1&&(I="0"+I),x=x+I}return x.toLowerCase()},z4=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},W4=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function G4(e,t){let n="Unknown Error";e==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":e==="permission_denied"?n="Client doesn't have permission to access the desired data.":e==="unavailable"&&(n="The service is unavailable");let r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}var $4=new RegExp("^-?(0*)\\d{1,10}$"),q4=-2147483648,Y4=2147483647,Vb=function(e){if($4.test(e)){let t=Number(e);if(t>=q4&&t<=Y4)return t}return null},Ra=function(e){try{e()}catch(t){setTimeout(()=>{let n=t.stack||"";throw kn("Exception was thrown by user callback.",n),t},Math.floor(0))}},Z4=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},vc=function(e,t){let n=setTimeout(e,t);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};var l1=class{constructor(t,n){this.appName_=t,this.appCheckProvider=n,this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(r=>this.appCheck=r)}getToken(t){return this.appCheck?this.appCheck.getToken(t):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(n,r):n(null)},0)})}addTokenChangeListener(t){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(t))}notifyForInvalidToken(){kn(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var c1=class{constructor(t,n,r){this.appName_=t,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(n=>n&&n.code==="auth/token-not-initialized"?(yn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(n,r):n(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(n=>n.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(n=>n.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',kn(t)}},_c=(()=>{class e{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}e.OWNER="owner";return e})(),Df="5",CI="v",vI="s",_I="r",xI="f",EI=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,bI="ls",II="p",u1="ac",DI="websocket",SI="long_polling";var Sf=class{constructor(t,n,r,i,s=!1,c="",h=!1,g=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=c,this.includeNamespaceInQueryParams=h,this.isUsingEmulator=g,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=rs.get("host:"+t)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&rs.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){let t=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${t}${this.host}/${n}`}};function Q4(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams}function AI(e,t,n){Y(typeof t=="string","typeof type must == string"),Y(typeof n=="object","typeof params must == object");let r;if(t===DI)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else if(t===SI)r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+t);Q4(e)&&(n.ns=e.namespace);let i=[];return wn(n,(s,c)=>{i.push(s+"="+c)}),r+i.join("&")}var d1=class{constructor(){this.counters_={}}incrementCounter(t,n=1){Br(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=n}get(){return sb(this.counters_)}};var Xm={},Km={};function ny(e){let t=e.toString();return Xm[t]||(Xm[t]=new d1),Xm[t]}function X4(e,t){let n=e.toString();return Km[n]||(Km[n]=t()),Km[n]}var f1=class{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,n){this.closeAfterResponse=t,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,n){for(this.pendingResponses[t]=n;this.pendingResponses[this.currentResponseNum];){let r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Ra(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var jb="start",K4="close",J4="pLPCommand",eL="pRTLPCB",TI="id",MI="pw",NI="ser",tL="cb",nL="seg",rL="ts",iL="d",oL="dframe",RI=1870,OI=30,sL=RI-OI,aL=25e3,lL=3e4,h1=class e{constructor(t,n,r,i,s,c,h){this.connId=t,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=c,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=kc(t),this.stats_=ny(n),this.urlFn=g=>(this.appCheckToken&&(g[u1]=this.appCheckToken),AI(n,SI,g))}open(t,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new f1(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(lL)),U4(()=>{if(this.isClosed_)return;this.scriptTagHolder=new p1((...s)=>{let[c,h,g,m,_]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,c===jb)this.id=h,this.password=g;else if(c===K4)h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+c)},(...s)=>{let[c,h]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(c,h)},()=>{this.onClosed_()},this.urlFn);let r={};r[jb]="t",r[NI]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[tL]=this.scriptTagHolder.uniqueCallbackIdentifier),r[CI]=Df,this.transportSessionId&&(r[vI]=this.transportSessionId),this.lastSessionId&&(r[bI]=this.lastSessionId),this.applicationId&&(r[II]=this.applicationId),this.appCheckToken&&(r[u1]=this.appCheckToken),typeof location<"u"&&location.hostname&&EI.test(location.hostname)&&(r[_I]=xI);let i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){e.forceAllow_=!0}static forceDisallow(){e.forceDisallow_=!0}static isAvailable(){return ni()?!1:e.forceAllow_?!0:!e.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!z4()&&!W4()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){let n=Gt(t);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);let r=Pm(n),i=yI(r,sL);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(t,n){if(ni())return;this.myDisconnFrame=document.createElement("iframe");let r={};r[oL]="t",r[TI]=t,r[MI]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){let n=Gt(t).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}},p1=class e{constructor(t,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,ni())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=B4(),window[J4+this.uniqueCallbackIdentifier]=t,window[eL+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');let c="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(h){yn("frame writing exception"),h.stack&&yn(h.stack),yn(h)}}}static createIFrame_(){let t=document.createElement("iframe");if(t.style.display="none",document.body){document.body.appendChild(t);try{t.contentWindow.document||yn("No IE domain setting required")}catch{let r=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,n){for(this.myID=t,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let t={};t[TI]=this.myID,t[MI]=this.myPW,t[NI]=this.currentSerial;let n=this.urlFn(t),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+OI+r.length<=RI;){let c=this.pendingSegs.shift();r=r+"&"+nL+i+"="+c.seg+"&"+rL+i+"="+c.ts+"&"+iL+i+"="+c.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(t,n,r){this.pendingSegs.push({seg:t,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(t,n){this.outstandingRequests.add(n);let r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(aL)),s=()=>{clearTimeout(i),r()};this.addTag(t,s)}addTag(t,n){ni()?this.doNodeLongPoll(t,n):setTimeout(()=>{try{if(!this.sendNewPolls)return;let r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){let i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{yn("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}};var cL=16384,uL=45e3,Af=null;typeof MozWebSocket<"u"?Af=MozWebSocket:typeof WebSocket<"u"&&(Af=WebSocket);var mc=(()=>{class e{constructor(n,r,i,s,c,h,g){this.connId=n,this.applicationId=i,this.appCheckToken=s,this.authToken=c,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=kc(this.connId),this.stats_=ny(r),this.connURL=e.connectionURL_(r,h,g,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(n,r,i,s,c){let h={};return h[CI]=Df,!ni()&&typeof location<"u"&&location.hostname&&EI.test(location.hostname)&&(h[_I]=xI),r&&(h[vI]=r),i&&(h[bI]=i),s&&(h[u1]=s),c&&(h[II]=c),AI(n,DI,h)}open(n,r){this.onDisconnect=r,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,rs.set("previous_websocket_failure",!0);try{let i;if(ni()){let s=this.nodeAdmin?"AdminNode":"Node";i={headers:{"User-Agent":`Firebase/${Df}/${J1}/${process.platform}/${s}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);let c=process.env,h=this.connURL.indexOf("wss://")===0?c.HTTPS_PROXY||c.https_proxy:c.HTTP_PROXY||c.http_proxy;h&&(i.proxy={origin:h})}this.mySock=new Af(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){e.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){let r=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(r);i&&i.length>1&&parseFloat(i[1])<4.4&&(n=!0)}return!n&&Af!==null&&!e.forceDisallow_}static previouslyFailed(){return rs.isInMemoryStorage||rs.get("previous_websocket_failure")===!0}markConnectionHealthy(){rs.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){let r=this.frames.join("");this.frames=null;let i=ya(r);this.onMessage(i)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if(Y(this.frames===null,"We already have a frame buffer"),n.length<=6){let r=Number(n);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(this.mySock===null)return;let r=n.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{let i=this.extractFrameCount_(r);i!==null&&this.appendFrame_(i)}}send(n){this.resetKeepAlive();let r=Gt(n);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);let i=yI(r,cL);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(uL))}sendString_(n){try{this.mySock.send(n)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}e.responsesRequiredToBeHealthy=2,e.healthyTimeout=3e4;return e})(),dL=(()=>{class e{constructor(n){this.initTransports_(n)}static get ALL_TRANSPORTS(){return[h1,mc]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(n){let r=mc&&mc.isAvailable(),i=r&&!mc.previouslyFailed();if(n.webSocketOnly&&(r||kn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[mc];else{let s=this.transports_=[];for(let c of e.ALL_TRANSPORTS)c&&c.isAvailable()&&s.push(c);e.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}e.globalTransportInitialized_=!1;return e})(),fL=6e4,hL=5e3,pL=10*1024,gL=100*1024,Jm="t",Ub="d",mL="s",Hb="r",yL="e",zb="o",Wb="a",Gb="n",$b="p",wL="h",g1=class{constructor(t,n,r,i,s,c,h,g,m,_){this.id=t,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=c,this.onReady_=h,this.onDisconnect_=g,this.onKill_=m,this.lastSessionId=_,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=kc("c:"+this.id+":"),this.transportManager_=new dL(n),this.log_("Connection created"),this.start_()}start_(){let t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));let i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=vc(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>gL?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>pL?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return n=>{t===this.conn_?this.onConnectionLost_(n):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return n=>{this.state_!==2&&(t===this.rx_?this.onPrimaryMessageReceived_(n):t===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(t){let n={t:"d",d:t};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if(Jm in t){let n=t[Jm];n===Wb?this.upgradeIfSecondaryHealthy_():n===Hb?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===zb&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){let n=gc("t",t),r=gc("d",t);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:$b,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Wb,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Gb,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){let n=gc("t",t),r=gc("d",t);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){let n=gc(Jm,t);if(Ub in t){let r=t[Ub];if(n===wL){let i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===Gb){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===mL?this.onConnectionShutdown_(r):n===Hb?this.onReset_(r):n===yL?a1("Server Error: "+r):n===zb?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):a1("Unknown control packet command: "+n)}}onHandshake_(t){let n=t.ts,r=t.v,i=t.h;this.sessionId=t.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Df!==r&&kn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),vc(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(fL))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,n){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):vc(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(hL))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:$b,d:{}}}))}onSecondaryConnectionLost_(){let t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,!t&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(rs.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(t)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var Tf=class{put(t,n,r,i){}merge(t,n,r,i){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,n,r){}onDisconnectMerge(t,n,r){}onDisconnectCancel(t,n){}reportStats(t){}};var Mf=class{constructor(t){this.allowedEvents_=t,this.listeners_={},Y(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...n){if(Array.isArray(this.listeners_[t])){let r=[...this.listeners_[t]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(t,n,r){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:n,context:r});let i=this.getInitialEvent(t);i&&n.apply(r,i)}off(t,n,r){this.validateEventType_(t);let i=this.listeners_[t]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(t){Y(this.allowedEvents_.find(n=>n===t),"Unknown event: "+t)}};var Nf=class e extends Mf{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Lm()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new e}getInitialEvent(t){return Y(t==="online","Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}};var qb=32,Yb=768,ut=class{constructor(t,n){if(n===void 0){this.pieces_=t.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}toString(){let t="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(t+="/"+this.pieces_[n]);return t||"/"}};function rt(){return new ut("")}function We(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function po(e){return e.pieces_.length-e.pieceNum_}function bt(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new ut(e.pieces_,t)}function ry(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function CL(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)e.pieces_[n]!==""&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}function Ic(e,t=0){return e.pieces_.slice(e.pieceNum_+t)}function PI(e){if(e.pieceNum_>=e.pieces_.length)return null;let t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new ut(t,0)}function Lt(e,t){let n=[];for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof ut)for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else{let r=t.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new ut(n,0)}function qe(e){return e.pieceNum_>=e.pieces_.length}function Pn(e,t){let n=We(e),r=We(t);if(n===null)return t;if(n===r)return Pn(bt(e),bt(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function vL(e,t){let n=Ic(e,0),r=Ic(t,0);for(let i=0;i<n.length&&i<r.length;i++){let s=as(n[i],r[i]);if(s!==0)return s}return n.length===r.length?0:n.length<r.length?-1:1}function iy(e,t){if(po(e)!==po(t))return!1;for(let n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function pr(e,t){let n=e.pieceNum_,r=t.pieceNum_;if(po(e)>po(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}var m1=class{constructor(t,n){this.errorPrefix_=n,this.parts_=Ic(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=dc(this.parts_[r]);kI(this)}};function _L(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=dc(t),kI(e)}function xL(e){let t=e.parts_.pop();e.byteLength_-=dc(t),e.parts_.length>0&&(e.byteLength_-=1)}function kI(e){if(e.byteLength_>Yb)throw new Error(e.errorPrefix_+"has a key path longer than "+Yb+" bytes ("+e.byteLength_+").");if(e.parts_.length>qb)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+qb+") or object contains a cycle "+ns(e))}function ns(e){return e.parts_.length===0?"":"in property '"+e.parts_.join(".")+"'"}var y1=class e extends Mf{constructor(){super(["visible"]);let t,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{let r=!document[t];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new e}getInitialEvent(t){return Y(t==="visible","Unknown event type: "+t),[this.visible_]}};var yc=1e3,EL=60*5*1e3,Zb=30*1e3,bL=1.3,IL=3e4,DL="server_kill",Qb=3,oy=(()=>{class e extends Tf{constructor(n,r,i,s,c,h,g,m){if(super(),this.repoInfo_=n,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=c,this.authTokenProvider_=h,this.appCheckTokenProvider_=g,this.authOverride_=m,this.id=e.nextPersistentConnectionId_++,this.log_=kc("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=yc,this.maxReconnectDelay_=EL,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,m&&!ni())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");y1.getInstance().on("visible",this.onVisible_,this),n.host.indexOf("fblocal")===-1&&Nf.getInstance().on("online",this.onOnline_,this)}sendRequest(n,r,i){let s=++this.requestNumber_,c={r:s,a:n,b:r};this.log_(Gt(c)),Y(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(c),i&&(this.requestCBHash_[s]=i)}get(n){this.initConnection_();let r=new Ri,s={action:"g",request:{p:n._path.toString(),q:n._queryObject},onComplete:h=>{let g=h.d;h.s==="ok"?r.resolve(g):r.reject(g)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;let c=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(c),r.promise}listen(n,r,i,s){this.initConnection_();let c=n._queryIdentifier,h=n._path.toString();this.log_("Listen called for "+h+" "+c),this.listens.has(h)||this.listens.set(h,new Map),Y(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Y(!this.listens.get(h).has(c),"listen() called twice for same path/queryId.");let g={onComplete:s,hashFn:r,query:n,tag:i};this.listens.get(h).set(c,g),this.connected_&&this.sendListen_(g)}sendGet_(n){let r=this.outstandingGets_[n];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(n){let r=n.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);let c={p:i},h="q";n.tag&&(c.q=r._queryObject,c.t=n.tag),c.h=n.hashFn(),this.sendRequest(h,c,g=>{let m=g.d,_=g.s;e.warnOnListenWarnings_(m,r),(this.listens.get(i)&&this.listens.get(i).get(s))===n&&(this.log_("listen response",g),_!=="ok"&&this.removeListen_(i,s),n.onComplete&&n.onComplete(_,m))})}static warnOnListenWarnings_(n,r){if(n&&typeof n=="object"&&Br(n,"w")){let i=es(n,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){let s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',c=r._path.toString();kn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${c} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&n.length===40||mb(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Zb)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let n=this.authToken_,r=gb(n)?"auth":"gauth",i={cred:n};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{let c=s.s,h=s.d||"error";this.authToken_===n&&(c==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(c,h))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{let r=n.s,i=n.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(n,r){let i=n._path.toString(),s=n._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),Y(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,n._queryObject,r)}sendUnlisten_(n,r,i,s){this.log_("Unlisten on "+n+" for "+r);let c={p:n},h="n";s&&(c.q=i,c.t=s),this.sendRequest(h,c)}onDisconnectPut(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:r,onComplete:i})}onDisconnectMerge(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:r,onComplete:i})}onDisconnectCancel(n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(n,r,i,s){let c={p:r,d:i};this.log_("onDisconnect "+n,c),this.sendRequest(n,c,h=>{s&&setTimeout(()=>{s(h.s,h.d)},Math.floor(0))})}put(n,r,i,s){this.putInternal("p",n,r,i,s)}merge(n,r,i,s){this.putInternal("m",n,r,i,s)}putInternal(n,r,i,s,c){this.initConnection_();let h={p:r,d:i};c!==void 0&&(h.h=c),this.outstandingPuts_.push({action:n,request:h,onComplete:s}),this.outstandingPutCount_++;let g=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(g):this.log_("Buffering put: "+r)}sendPut_(n){let r=this.outstandingPuts_[n].action,i=this.outstandingPuts_[n].request,s=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(r,i,c=>{this.log_(r+" response",c),delete this.outstandingPuts_[n],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(c.s,c.d)})}reportStats(n){if(this.connected_){let r={c:n};this.log_("reportStats",r),this.sendRequest("s",r,i=>{if(i.s!=="ok"){let c=i.d;this.log_("reportStats","Error sending stats: "+c)}})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+Gt(n));let r=n.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,r){this.log_("handleServerMessage",n,r),n==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):n==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):n==="c"?this.onListenRevoked_(r.p,r.q):n==="ac"?this.onAuthRevoked_(r.s,r.d):n==="apc"?this.onAppCheckRevoked_(r.s,r.d):n==="sd"?this.onSecurityDebugPacket_(r):a1("Unrecognized action received from server: "+Gt(n)+`
Are you using the latest client?`)}onReady_(n,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(n),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){Y(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=yc,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=yc,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>IL&&(this.reconnectDelay_=yc),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let n=new Date().getTime()-this.lastConnectionAttemptTime_,r=Math.max(0,this.reconnectDelay_-n);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*bL)}this.onConnectStatus_(!1)}establishConnection_(){return Yt(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+e.nextConnectionId_++,c=this.lastSessionId,h=!1,g=null,m=function(){g?g.close():(h=!0,i())},_=function(I){Y(g,"sendRequest call when we're not connected not allowed."),g.sendRequest(I)};this.realtime_={close:m,sendRequest:_};let x=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[I,A]=yield Promise.all([this.authTokenProvider_.getToken(x),this.appCheckTokenProvider_.getToken(x)]);h?yn("getToken() completed but was canceled"):(yn("getToken() completed. Creating connection."),this.authToken_=I&&I.accessToken,this.appCheckToken_=A&&A.token,g=new g1(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,n,r,i,P=>{kn(P+" ("+this.repoInfo_.toString()+")"),this.interrupt(DL)},c))}catch(I){this.log_("Failed to get token: "+I),h||(this.repoInfo_.nodeAdmin&&kn(I),m())}}})}interrupt(n){yn("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){yn("Resuming connection for reason: "+n),delete this.interruptReasons_[n],Fm(this.interruptReasons_)&&(this.reconnectDelay_=yc,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){let r=n-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){let r=this.outstandingPuts_[n];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(n,r){let i;r?i=r.map(c=>ty(c)).join("$"):i="default";let s=this.removeListen_(n,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(n,r){let i=new ut(n).toString(),s;if(this.listens.has(i)){let c=this.listens.get(i);s=c.get(r),c.delete(r),c.size===0&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(n,r){yn("Auth token revoked: "+n+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(n==="invalid_token"||n==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Qb&&(this.reconnectDelay_=Zb,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,r){yn("App check token revoked: "+n+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(n==="invalid_token"||n==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Qb&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let n of this.listens.values())for(let r of n.values())this.sendListen_(r);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){let n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){let n={},r="js";ni()&&(this.repoInfo_.nodeAdmin?r="admin_node":r="node"),n["sdk."+r+"."+J1.replace(/\./g,"-")]=1,Lm()?n["framework.cordova"]=1:db()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){let n=Nf.getInstance().currentlyOnline();return Fm(this.interruptReasons_)&&n}}e.nextPersistentConnectionId_=0,e.nextConnectionId_=0;return e})(),Ge=class e{constructor(t,n){this.name=t,this.node=n}static Wrap(t,n){return new e(t,n)}};var ba=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,n){let r=new Ge(Ea,t),i=new Ge(Ea,n);return this.compare(r,i)!==0}minPost(){return Ge.MIN}};var If,Rf=class extends ba{static get __EMPTY_NODE(){return If}static set __EMPTY_NODE(t){If=t}compare(t,n){return as(t.name,n.name)}isDefinedOn(t){throw Jo("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,n){return!1}minPost(){return Ge.MIN}maxPost(){return new Ge(os,If)}makePost(t,n){return Y(typeof t=="string","KeyIndex indexValue must always be a string."),new Ge(t,If)}toString(){return".key"}},xa=new Rf;var va=class{constructor(t,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let c=1;for(;!t.isEmpty();)if(t=t,c=n?r(t.key,n):1,i&&(c*=-1),c<0)this.isReverse_?t=t.left:t=t.right;else if(c===0){this.nodeStack_.push(t);break}else this.nodeStack_.push(t),this.isReverse_?t=t.right:t=t.left}getNext(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(t.key,t.value):n={key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}},Vr=(()=>{class e{constructor(n,r,i,s,c){this.key=n,this.value=r,this.color=i??e.RED,this.left=s??gr.EMPTY_NODE,this.right=c??gr.EMPTY_NODE}copy(n,r,i,s,c){return new e(n??this.key,r??this.value,i??this.color,s??this.left,c??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,r,i){let s=this,c=i(n,s.key);return c<0?s=s.copy(null,null,null,s.left.insert(n,r,i),null):c===0?s=s.copy(null,r,null,null,null):s=s.copy(null,null,null,null,s.right.insert(n,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return gr.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,r){let i,s;if(i=this,r(n,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(n,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),r(n,i.key)===0){if(i.right.isEmpty())return gr.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(n,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){let n=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){let n=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){let n=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,r)}checkMaxDepth_(){let n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}return e.RED=!0,e.BLACK=!1,e})(),w1=class{copy(t,n,r,i,s){return this}insert(t,n,r){return new Vr(t,n,null)}remove(t,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},gr=class e{constructor(t,n=e.EMPTY_NODE){this.comparator_=t,this.root_=n}insert(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,Vr.BLACK,null,null))}remove(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Vr.BLACK,null,null))}get(t){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(t,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(t){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(t,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new va(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,n){return new va(this.root_,t,this.comparator_,!1,n)}getReverseIteratorFrom(t,n){return new va(this.root_,t,this.comparator_,!0,n)}getReverseIterator(t){return new va(this.root_,null,this.comparator_,!0,t)}};gr.EMPTY_NODE=new w1;function SL(e,t){return as(e.name,t.name)}function sy(e,t){return as(e,t)}var C1;function AL(e){C1=e}var LI=function(e){return typeof e=="number"?"number:"+wI(e):"string:"+e},FI=function(e){if(e.isLeafNode()){let t=e.val();Y(typeof t=="string"||typeof t=="number"||typeof t=="object"&&Br(t,".sv"),"Priority must be a string or number.")}else Y(e===C1||e.isEmpty(),"priority of unexpected type.");Y(e===C1||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var Xb,Ia=(()=>{class e{constructor(n,r=e.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=r,this.lazyHash_=null,Y(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),FI(this.priorityNode_)}static set __childrenNodeConstructor(n){Xb=n}static get __childrenNodeConstructor(){return Xb}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new e(this.value_,n)}getImmediateChild(n){return n===".priority"?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return qe(n)?this:We(n)===".priority"?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,r){return null}updateImmediateChild(n,r){return n===".priority"?this.updatePriority(r):r.isEmpty()&&n!==".priority"?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,r).updatePriority(this.priorityNode_)}updateChild(n,r){let i=We(n);return i===null?r:r.isEmpty()&&i!==".priority"?this:(Y(i!==".priority"||po(n)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(bt(n),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,r){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+LI(this.priorityNode_.val())+":");let r=typeof this.value_;n+=r+":",r==="number"?n+=wI(this.value_):n+=this.value_,this.lazyHash_=mI(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===e.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof e.__childrenNodeConstructor?-1:(Y(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){let r=typeof n.value_,i=typeof this.value_,s=e.VALUE_TYPE_ORDER.indexOf(r),c=e.VALUE_TYPE_ORDER.indexOf(i);return Y(s>=0,"Unknown leaf type: "+r),Y(c>=0,"Unknown leaf type: "+i),s===c?i==="object"?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:c-s}withIndex(){return this}isIndexed(){return!0}equals(n){if(n===this)return!0;if(n.isLeafNode()){let r=n;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}e.VALUE_TYPE_ORDER=["object","boolean","number","string"];return e})(),BI,VI;function TL(e){BI=e}function ML(e){VI=e}var v1=class extends ba{compare(t,n){let r=t.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?as(t.name,n.name):s}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,n){return!t.getPriority().equals(n.getPriority())}minPost(){return Ge.MIN}maxPost(){return new Ge(os,new Ia("[PRIORITY-POST]",VI))}makePost(t,n){let r=BI(t);return new Ge(n,new Ia("[PRIORITY-POST]",r))}toString(){return".priority"}},Ft=new v1;var NL=Math.log(2),_1=class{constructor(t){let n=s=>parseInt(Math.log(s)/NL,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(t+1),this.current_=this.count-1;let i=r(this.count);this.bits_=t+1&i}nextBitIsOne(){let t=!(this.bits_&1<<this.current_);return this.current_--,t}},Of=function(e,t,n,r){e.sort(t);let i=function(g,m){let _=m-g,x,I;if(_===0)return null;if(_===1)return x=e[g],I=n?n(x):x,new Vr(I,x.node,Vr.BLACK,null,null);{let A=parseInt(_/2,10)+g,P=i(g,A),U=i(A+1,m);return x=e[A],I=n?n(x):x,new Vr(I,x.node,Vr.BLACK,P,U)}},s=function(g){let m=null,_=null,x=e.length,I=function(P,U){let q=x-P,W=x;x-=P;let le=i(q+1,W),Ke=e[q],me=n?n(Ke):Ke;A(new Vr(me,Ke.node,U,null,le))},A=function(P){m?(m.left=P,m=P):(_=P,m=P)};for(let P=0;P<g.count;++P){let U=g.nextBitIsOne(),q=Math.pow(2,g.count-(P+1));U?I(q,Vr.BLACK):(I(q,Vr.BLACK),I(q,Vr.RED))}return _},c=new _1(e.length),h=s(c);return new gr(r||t,h)};var e1,Ca={},Da=class e{constructor(t,n){this.indexes_=t,this.indexSet_=n}static get Default(){return Y(Ca&&Ft,"ChildrenNode.ts has not been loaded"),e1=e1||new e({".priority":Ca},{".priority":Ft}),e1}get(t){let n=es(this.indexes_,t);if(!n)throw new Error("No index defined for "+t);return n instanceof gr?n:null}hasIndex(t){return Br(this.indexSet_,t.toString())}addIndex(t,n){Y(t!==xa,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let r=[],i=!1,s=n.getIterator(Ge.Wrap),c=s.getNext();for(;c;)i=i||t.isDefinedOn(c.node),r.push(c),c=s.getNext();let h;i?h=Of(r,t.getCompare()):h=Ca;let g=t.toString(),m=Object.assign({},this.indexSet_);m[g]=t;let _=Object.assign({},this.indexes_);return _[g]=h,new e(_,m)}addToIndexes(t,n){let r=cc(this.indexes_,(i,s)=>{let c=es(this.indexSet_,s);if(Y(c,"Missing index implementation for "+s),i===Ca)if(c.isDefinedOn(t.node)){let h=[],g=n.getIterator(Ge.Wrap),m=g.getNext();for(;m;)m.name!==t.name&&h.push(m),m=g.getNext();return h.push(t),Of(h,c.getCompare())}else return Ca;else{let h=n.get(t.name),g=i;return h&&(g=g.remove(new Ge(t.name,h))),g.insert(t,t.node)}});return new e(r,this.indexSet_)}removeFromIndexes(t,n){let r=cc(this.indexes_,i=>{if(i===Ca)return i;{let s=n.get(t.name);return s?i.remove(new Ge(t.name,s)):i}});return new e(r,this.indexSet_)}};var wc,Ae=(()=>{class e{constructor(n,r,i){this.children_=n,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&FI(this.priorityNode_),this.children_.isEmpty()&&Y(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return wc||(wc=new e(new gr(sy),null,Da.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||wc}updatePriority(n){return this.children_.isEmpty()?this:new e(this.children_,n,this.indexMap_)}getImmediateChild(n){if(n===".priority")return this.getPriority();{let r=this.children_.get(n);return r===null?wc:r}}getChild(n){let r=We(n);return r===null?this:this.getImmediateChild(r).getChild(bt(n))}hasChild(n){return this.children_.get(n)!==null}updateImmediateChild(n,r){if(Y(r,"We should always be passing snapshot nodes"),n===".priority")return this.updatePriority(r);{let i=new Ge(n,r),s,c;r.isEmpty()?(s=this.children_.remove(n),c=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(n,r),c=this.indexMap_.addToIndexes(i,this.children_));let h=s.isEmpty()?wc:this.priorityNode_;return new e(s,h,c)}}updateChild(n,r){let i=We(n);if(i===null)return r;{Y(We(n)!==".priority"||po(n)===1,".priority must be the last token in a path");let s=this.getImmediateChild(i).updateChild(bt(n),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;let r={},i=0,s=0,c=!0;if(this.forEachChild(Ft,(h,g)=>{r[h]=g.val(n),i++,c&&e.INTEGER_REGEXP_.test(h)?s=Math.max(s,Number(h)):c=!1}),!n&&c&&s<2*i){let h=[];for(let g in r)h[g]=r[g];return h}else return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let n="";this.getPriority().isEmpty()||(n+="priority:"+LI(this.getPriority().val())+":"),this.forEachChild(Ft,(r,i)=>{let s=i.hash();s!==""&&(n+=":"+r+":"+s)}),this.lazyHash_=n===""?"":mI(n)}return this.lazyHash_}getPredecessorChildName(n,r,i){let s=this.resolveIndex_(i);if(s){let c=s.getPredecessorKey(new Ge(n,r));return c?c.name:null}else return this.children_.getPredecessorKey(n)}getFirstChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(n){let r=this.getFirstChildName(n);return r?new Ge(r,this.children_.get(r)):null}getLastChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(n){let r=this.getLastChildName(n);return r?new Ge(r,this.children_.get(r)):null}forEachChild(n,r){let i=this.resolveIndex_(n);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(n,s=>s);{let s=this.children_.getIteratorFrom(n.name,Ge.Wrap),c=s.peek();for(;c!=null&&r.compare(c,n)<0;)s.getNext(),c=s.peek();return s}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(n,s=>s);{let s=this.children_.getReverseIteratorFrom(n.name,Ge.Wrap),c=s.peek();for(;c!=null&&r.compare(c,n)>0;)s.getNext(),c=s.peek();return s}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===Lc?-1:0}withIndex(n){if(n===xa||this.indexMap_.hasIndex(n))return this;{let r=this.indexMap_.addIndex(n,this.children_);return new e(this.children_,this.priorityNode_,r)}}isIndexed(n){return n===xa||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{let r=n;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){let i=this.getIterator(Ft),s=r.getIterator(Ft),c=i.getNext(),h=s.getNext();for(;c&&h;){if(c.name!==h.name||!c.node.equals(h.node))return!1;c=i.getNext(),h=s.getNext()}return c===null&&h===null}else return!1;else return!1}}resolveIndex_(n){return n===xa?null:this.indexMap_.get(n.toString())}}return e.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,e})(),x1=class extends Ae{constructor(){super(new gr(sy),Ae.EMPTY_NODE,Da.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return Ae.EMPTY_NODE}isEmpty(){return!1}},Lc=new x1;Object.defineProperties(Ge,{MIN:{value:new Ge(Ea,Ae.EMPTY_NODE)},MAX:{value:new Ge(os,Lc)}});Rf.__EMPTY_NODE=Ae.EMPTY_NODE;Ia.__childrenNodeConstructor=Ae;AL(Lc);ML(Lc);var RL=!0;function Jt(e,t=null){if(e===null)return Ae.EMPTY_NODE;if(typeof e=="object"&&".priority"in e&&(t=e[".priority"]),Y(t===null||typeof t=="string"||typeof t=="number"||typeof t=="object"&&".sv"in t,"Invalid priority type found: "+typeof t),typeof e=="object"&&".value"in e&&e[".value"]!==null&&(e=e[".value"]),typeof e!="object"||".sv"in e){let n=e;return new Ia(n,Jt(t))}if(!(e instanceof Array)&&RL){let n=[],r=!1;if(wn(e,(c,h)=>{if(c.substring(0,1)!=="."){let g=Jt(h);g.isEmpty()||(r=r||!g.getPriority().isEmpty(),n.push(new Ge(c,g)))}}),n.length===0)return Ae.EMPTY_NODE;let s=Of(n,SL,c=>c.name,sy);if(r){let c=Of(n,Ft.getCompare());return new Ae(s,Jt(t),new Da({".priority":c},{".priority":Ft}))}else return new Ae(s,Jt(t),Da.Default)}else{let n=Ae.EMPTY_NODE;return wn(e,(r,i)=>{if(Br(e,r)&&r.substring(0,1)!=="."){let s=Jt(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(Jt(t))}}TL(Jt);var E1=class extends ba{constructor(t){super(),this.indexPath_=t,Y(!qe(t)&&We(t)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,n){let r=this.extractChild(t.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?as(t.name,n.name):s}makePost(t,n){let r=Jt(t),i=Ae.EMPTY_NODE.updateChild(this.indexPath_,r);return new Ge(n,i)}maxPost(){let t=Ae.EMPTY_NODE.updateChild(this.indexPath_,Lc);return new Ge(os,t)}toString(){return Ic(this.indexPath_,0).join("/")}};var b1=class extends ba{compare(t,n){let r=t.node.compareTo(n.node);return r===0?as(t.name,n.name):r}isDefinedOn(t){return!0}indexedValueChanged(t,n){return!t.equals(n)}minPost(){return Ge.MIN}maxPost(){return Ge.MAX}makePost(t,n){let r=Jt(t);return new Ge(n,r)}toString(){return".value"}},OL=new b1;function jI(e){return{type:"value",snapshotNode:e}}function Sa(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function Dc(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function Sc(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}function PL(e,t){return{type:"child_moved",snapshotNode:t,childName:e}}var Ac=class{constructor(t){this.index_=t}updateChild(t,n,r,i,s,c){Y(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");let h=t.getImmediateChild(n);return h.getChild(i).equals(r.getChild(i))&&h.isEmpty()===r.isEmpty()||(c!=null&&(r.isEmpty()?t.hasChild(n)?c.trackChildChange(Dc(n,h)):Y(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?c.trackChildChange(Sa(n,r)):c.trackChildChange(Sc(n,r,h))),t.isLeafNode()&&r.isEmpty())?t:t.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(t,n,r){return r!=null&&(t.isLeafNode()||t.forEachChild(Ft,(i,s)=>{n.hasChild(i)||r.trackChildChange(Dc(i,s))}),n.isLeafNode()||n.forEachChild(Ft,(i,s)=>{if(t.hasChild(i)){let c=t.getImmediateChild(i);c.equals(s)||r.trackChildChange(Sc(i,s,c))}else r.trackChildChange(Sa(i,s))})),n.withIndex(this.index_)}updatePriority(t,n){return t.isEmpty()?Ae.EMPTY_NODE:t.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}};var Pf=class e{constructor(t){this.indexedFilter_=new Ac(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){let n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),t)<=0:this.index_.compare(this.getStartPost(),t)<0,r=this.endIsInclusive_?this.index_.compare(t,this.getEndPost())<=0:this.index_.compare(t,this.getEndPost())<0;return n&&r}updateChild(t,n,r,i,s,c){return this.matches(new Ge(n,r))||(r=Ae.EMPTY_NODE),this.indexedFilter_.updateChild(t,n,r,i,s,c)}updateFullNode(t,n,r){n.isLeafNode()&&(n=Ae.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(Ae.EMPTY_NODE);let s=this;return n.forEachChild(Ft,(c,h)=>{s.matches(new Ge(c,h))||(i=i.updateImmediateChild(c,Ae.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,i,r)}updatePriority(t,n){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){let n=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),n)}else return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){let n=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),n)}else return t.getIndex().maxPost()}};var I1=class{constructor(t){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{let r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{let r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new Pf(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft(),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}updateChild(t,n,r,i,s,c){return this.rangedFilter_.matches(new Ge(n,r))||(r=Ae.EMPTY_NODE),t.getImmediateChild(n).equals(r)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,n,r,i,s,c):this.fullLimitUpdateChild_(t,n,r,s,c)}updateFullNode(t,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=Ae.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=Ae.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let c=0;for(;s.hasNext()&&c<this.limit_;){let h=s.getNext();if(this.withinDirectionalStart(h))if(this.withinDirectionalEnd(h))i=i.updateImmediateChild(h.name,h.node),c++;else break;else continue}}else{i=n.withIndex(this.index_),i=i.updatePriority(Ae.EMPTY_NODE);let s;this.reverse_?s=i.getReverseIterator(this.index_):s=i.getIterator(this.index_);let c=0;for(;s.hasNext();){let h=s.getNext();c<this.limit_&&this.withinDirectionalStart(h)&&this.withinDirectionalEnd(h)?c++:i=i.updateImmediateChild(h.name,Ae.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,i,r)}updatePriority(t,n){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,n,r,i,s){let c;if(this.reverse_){let x=this.index_.getCompare();c=(I,A)=>x(A,I)}else c=this.index_.getCompare();let h=t;Y(h.numChildren()===this.limit_,"");let g=new Ge(n,r),m=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),_=this.rangedFilter_.matches(g);if(h.hasChild(n)){let x=h.getImmediateChild(n),I=i.getChildAfterChild(this.index_,m,this.reverse_);for(;I!=null&&(I.name===n||h.hasChild(I.name));)I=i.getChildAfterChild(this.index_,I,this.reverse_);let A=I==null?1:c(I,g);if(_&&!r.isEmpty()&&A>=0)return s?.trackChildChange(Sc(n,r,x)),h.updateImmediateChild(n,r);{s?.trackChildChange(Dc(n,x));let U=h.updateImmediateChild(n,Ae.EMPTY_NODE);return I!=null&&this.rangedFilter_.matches(I)?(s?.trackChildChange(Sa(I.name,I.node)),U.updateImmediateChild(I.name,I.node)):U}}else return r.isEmpty()?t:_&&c(m,g)>=0?(s!=null&&(s.trackChildChange(Dc(m.name,m.node)),s.trackChildChange(Sa(n,r))),h.updateImmediateChild(n,r).updateImmediateChild(m.name,Ae.EMPTY_NODE)):t}};var D1=class e{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ft}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return Y(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Y(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ea}hasEnd(){return this.endSet_}getIndexEndValue(){return Y(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Y(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:os}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return Y(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Ft}copy(){let t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}};function kL(e){return e.loadsAllData()?new Ac(e.getIndex()):e.hasLimit()?new I1(e):new Pf(e)}function Kb(e){let t={};if(e.isDefault())return t;let n;if(e.index_===Ft?n="$priority":e.index_===OL?n="$value":e.index_===xa?n="$key":(Y(e.index_ instanceof E1,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=Gt(n),e.startSet_){let r=e.startAfterSet_?"startAfter":"startAt";t[r]=Gt(e.indexStartValue_),e.startNameSet_&&(t[r]+=","+Gt(e.indexStartName_))}if(e.endSet_){let r=e.endBeforeSet_?"endBefore":"endAt";t[r]=Gt(e.indexEndValue_),e.endNameSet_&&(t[r]+=","+Gt(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function Jb(e){let t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;n===""&&(e.isViewFromLeft()?n="l":n="r"),t.vf=n}return e.index_!==Ft&&(t.i=e.index_.toString()),t}var S1=class e extends Tf{constructor(t,n,r,i){super(),this.repoInfo_=t,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=kc("p:rest:"),this.listens_={}}reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,n){return n!==void 0?"tag$"+n:(Y(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}listen(t,n,r,i){let s=t._path.toString();this.log_("Listen called for "+s+" "+t._queryIdentifier);let c=e.getListenId_(t,r),h={};this.listens_[c]=h;let g=Kb(t._queryParams);this.restRequest_(s+".json",g,(m,_)=>{let x=_;if(m===404&&(x=null,m=null),m===null&&this.onDataUpdate_(s,x,!1,r),es(this.listens_,c)===h){let I;m?m===401?I="permission_denied":I="rest_error:"+m:I="ok",i(I,null)}})}unlisten(t,n){let r=e.getListenId_(t,n);delete this.listens_[r]}get(t){let n=Kb(t._queryParams),r=t._path.toString(),i=new Ri;return this.restRequest_(r+".json",n,(s,c)=>{let h=c;s===404&&(h=null,s=null),s===null?(this.onDataUpdate_(r,h,!1,null),i.resolve(h)):i.reject(new Error(h))}),i.promise}refreshAuthToken(t){}restRequest_(t,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);let c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+yb(n);this.log_("Sending REST request for "+c);let h=new XMLHttpRequest;h.onreadystatechange=()=>{if(r&&h.readyState===4){this.log_("REST Response for "+c+" received. status:",h.status,"response:",h.responseText);let g=null;if(h.status>=200&&h.status<300){try{g=ya(h.responseText)}catch{kn("Failed to parse JSON response for "+c+": "+h.responseText)}r(null,g)}else h.status!==401&&h.status!==404&&kn("Got unsuccessful REST response for "+c+" Status: "+h.status),r(h.status);r=null}},h.open("GET",c,!0),h.send()})}};var A1=class{constructor(){this.rootNode_=Ae.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,n){this.rootNode_=this.rootNode_.updateChild(t,n)}};function kf(){return{value:null,children:new Map}}function UI(e,t,n){if(qe(t))e.value=n,e.children.clear();else if(e.value!==null)e.value=e.value.updateChild(t,n);else{let r=We(t);e.children.has(r)||e.children.set(r,kf());let i=e.children.get(r);t=bt(t),UI(i,t,n)}}function T1(e,t,n){e.value!==null?n(t,e.value):LL(e,(r,i)=>{let s=new ut(t.toString()+"/"+r);T1(i,s,n)})}function LL(e,t){e.children.forEach((n,r)=>{t(r,n)})}var M1=class{constructor(t){this.collection_=t,this.last_=null}get(){let t=this.collection_.get(),n=Object.assign({},t);return this.last_&&wn(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=t,n}};var eI=10*1e3,FL=30*1e3,BL=5*60*1e3,N1=class{constructor(t,n){this.server_=n,this.statsToReport_={},this.statsListener_=new M1(t);let r=eI+(FL-eI)*Math.random();vc(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){let t=this.statsListener_.get(),n={},r=!1;wn(t,(i,s)=>{s>0&&Br(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),vc(this.reportStats_.bind(this),Math.floor(Math.random()*2*BL))}};var ii=function(e){return e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",e}(ii||{});function ay(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function ly(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function cy(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}var R1=class e{constructor(t,n,r){this.path=t,this.affectedTree=n,this.revert=r,this.type=ii.ACK_USER_WRITE,this.source=ay()}operationForChild(t){if(qe(this.path)){if(this.affectedTree.value!=null)return Y(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let n=this.affectedTree.subtree(new ut(t));return new e(rt(),n,this.revert)}}else return Y(We(this.path)===t,"operationForChild called for unrelated child."),new e(bt(this.path),this.affectedTree,this.revert)}};var Lf=class e{constructor(t,n){this.source=t,this.path=n,this.type=ii.LISTEN_COMPLETE}operationForChild(t){return qe(this.path)?new e(this.source,rt()):new e(this.source,bt(this.path))}};var Aa=class e{constructor(t,n,r){this.source=t,this.path=n,this.snap=r,this.type=ii.OVERWRITE}operationForChild(t){return qe(this.path)?new e(this.source,rt(),this.snap.getImmediateChild(t)):new e(this.source,bt(this.path),this.snap)}};var Tc=class e{constructor(t,n,r){this.source=t,this.path=n,this.children=r,this.type=ii.MERGE}operationForChild(t){if(qe(this.path)){let n=this.children.subtree(new ut(t));return n.isEmpty()?null:n.value?new Aa(this.source,rt(),n.value):new e(this.source,rt(),n)}else return Y(We(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,bt(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var oi=class{constructor(t,n,r){this.node_=t,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(qe(t))return this.isFullyInitialized()&&!this.filtered_;let n=We(t);return this.isCompleteForChild(n)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}};var O1=class{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}};function VL(e,t,n,r){let i=[],s=[];return t.forEach(c=>{c.type==="child_changed"&&e.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&s.push(PL(c.childName,c.snapshotNode))}),Cc(e,i,"child_removed",t,r,n),Cc(e,i,"child_added",t,r,n),Cc(e,i,"child_moved",s,r,n),Cc(e,i,"child_changed",t,r,n),Cc(e,i,"value",t,r,n),i}function Cc(e,t,n,r,i,s){let c=r.filter(h=>h.type===n);c.sort((h,g)=>UL(e,h,g)),c.forEach(h=>{let g=jL(e,h,s);i.forEach(m=>{m.respondsTo(h.type)&&t.push(m.createEvent(g,e.query_))})})}function jL(e,t,n){return t.type==="value"||t.type==="child_removed"||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}function UL(e,t,n){if(t.childName==null||n.childName==null)throw Jo("Should only compare child_ events.");let r=new Ge(t.childName,t.snapshotNode),i=new Ge(n.childName,n.snapshotNode);return e.index_.compare(r,i)}function Qf(e,t){return{eventCache:e,serverCache:t}}function xc(e,t,n,r){return Qf(new oi(t,n,r),e.serverCache)}function HI(e,t,n,r){return Qf(e.eventCache,new oi(t,n,r))}function Ff(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function ss(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}var t1,HL=()=>(t1||(t1=new gr(H4)),t1),Ln=class e{constructor(t,n=HL()){this.value=t,this.children=n}static fromObject(t){let n=new e(null);return wn(t,(r,i)=>{n=n.set(new ut(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,n){if(this.value!=null&&n(this.value))return{path:rt(),value:this.value};if(qe(t))return null;{let r=We(t),i=this.children.get(r);if(i!==null){let s=i.findRootMostMatchingPathAndValue(bt(t),n);return s!=null?{path:Lt(new ut(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(qe(t))return this;{let n=We(t),r=this.children.get(n);return r!==null?r.subtree(bt(t)):new e(null)}}set(t,n){if(qe(t))return new e(n,this.children);{let r=We(t),s=(this.children.get(r)||new e(null)).set(bt(t),n),c=this.children.insert(r,s);return new e(this.value,c)}}remove(t){if(qe(t))return this.children.isEmpty()?new e(null):new e(null,this.children);{let n=We(t),r=this.children.get(n);if(r){let i=r.remove(bt(t)),s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new e(null):new e(this.value,s)}else return this}}get(t){if(qe(t))return this.value;{let n=We(t),r=this.children.get(n);return r?r.get(bt(t)):null}}setTree(t,n){if(qe(t))return n;{let r=We(t),s=(this.children.get(r)||new e(null)).setTree(bt(t),n),c;return s.isEmpty()?c=this.children.remove(r):c=this.children.insert(r,s),new e(this.value,c)}}fold(t){return this.fold_(rt(),t)}fold_(t,n){let r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(Lt(t,i),n)}),n(t,this.value,r)}findOnPath(t,n){return this.findOnPath_(t,rt(),n)}findOnPath_(t,n,r){let i=this.value?r(n,this.value):!1;if(i)return i;if(qe(t))return null;{let s=We(t),c=this.children.get(s);return c?c.findOnPath_(bt(t),Lt(n,s),r):null}}foreachOnPath(t,n){return this.foreachOnPath_(t,rt(),n)}foreachOnPath_(t,n,r){if(qe(t))return this;{this.value&&r(n,this.value);let i=We(t),s=this.children.get(i);return s?s.foreachOnPath_(bt(t),Lt(n,i),r):new e(null)}}foreach(t){this.foreach_(rt(),t)}foreach_(t,n){this.children.inorderTraversal((r,i)=>{i.foreach_(Lt(t,r),n)}),this.value&&n(t,this.value)}foreachChild(t){this.children.inorderTraversal((n,r)=>{r.value&&t(n,r.value)})}};var jr=class e{constructor(t){this.writeTree_=t}static empty(){return new e(new Ln(null))}};function Ec(e,t,n){if(qe(t))return new jr(new Ln(n));{let r=e.writeTree_.findRootMostValueAndPath(t);if(r!=null){let i=r.path,s=r.value,c=Pn(i,t);return s=s.updateChild(c,n),new jr(e.writeTree_.set(i,s))}else{let i=new Ln(n),s=e.writeTree_.setTree(t,i);return new jr(s)}}}function P1(e,t,n){let r=e;return wn(n,(i,s)=>{r=Ec(r,Lt(t,i),s)}),r}function tI(e,t){if(qe(t))return jr.empty();{let n=e.writeTree_.setTree(t,new Ln(null));return new jr(n)}}function k1(e,t){return ls(e,t)!=null}function ls(e,t){let n=e.writeTree_.findRootMostValueAndPath(t);return n!=null?e.writeTree_.get(n.path).getChild(Pn(n.path,t)):null}function nI(e){let t=[],n=e.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Ft,(r,i)=>{t.push(new Ge(r,i))}):e.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&t.push(new Ge(r,i.value))}),t}function fo(e,t){if(qe(t))return e;{let n=ls(e,t);return n!=null?new jr(new Ln(n)):new jr(e.writeTree_.subtree(t))}}function L1(e){return e.writeTree_.isEmpty()}function Ta(e,t){return zI(rt(),e.writeTree_,t)}function zI(e,t,n){if(t.value!=null)return n.updateChild(e,t.value);{let r=null;return t.children.inorderTraversal((i,s)=>{i===".priority"?(Y(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=zI(Lt(e,i),s,n)}),!n.getChild(e).isEmpty()&&r!==null&&(n=n.updateChild(Lt(e,".priority"),r)),n}}function Xf(e,t){return qI(t,e)}function zL(e,t,n,r,i){Y(r>e.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=Ec(e.visibleWrites,t,n)),e.lastWriteId=r}function WL(e,t,n,r){Y(r>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:n,writeId:r,visible:!0}),e.visibleWrites=P1(e.visibleWrites,t,n),e.lastWriteId=r}function GL(e,t){for(let n=0;n<e.allWrites.length;n++){let r=e.allWrites[n];if(r.writeId===t)return r}return null}function $L(e,t){let n=e.allWrites.findIndex(h=>h.writeId===t);Y(n>=0,"removeWrite called with nonexistent writeId.");let r=e.allWrites[n];e.allWrites.splice(n,1);let i=r.visible,s=!1,c=e.allWrites.length-1;for(;i&&c>=0;){let h=e.allWrites[c];h.visible&&(c>=n&&qL(h,r.path)?i=!1:pr(r.path,h.path)&&(s=!0)),c--}if(i){if(s)return YL(e),!0;if(r.snap)e.visibleWrites=tI(e.visibleWrites,r.path);else{let h=r.children;wn(h,g=>{e.visibleWrites=tI(e.visibleWrites,Lt(r.path,g))})}return!0}else return!1}function qL(e,t){if(e.snap)return pr(e.path,t);for(let n in e.children)if(e.children.hasOwnProperty(n)&&pr(Lt(e.path,n),t))return!0;return!1}function YL(e){e.visibleWrites=WI(e.allWrites,ZL,rt()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}function ZL(e){return e.visible}function WI(e,t,n){let r=jr.empty();for(let i=0;i<e.length;++i){let s=e[i];if(t(s)){let c=s.path,h;if(s.snap)pr(n,c)?(h=Pn(n,c),r=Ec(r,h,s.snap)):pr(c,n)&&(h=Pn(c,n),r=Ec(r,rt(),s.snap.getChild(h)));else if(s.children){if(pr(n,c))h=Pn(n,c),r=P1(r,h,s.children);else if(pr(c,n))if(h=Pn(c,n),qe(h))r=P1(r,rt(),s.children);else{let g=es(s.children,We(h));if(g){let m=g.getChild(bt(h));r=Ec(r,rt(),m)}}}else throw Jo("WriteRecord should have .snap or .children")}}return r}function GI(e,t,n,r,i){if(!r&&!i){let s=ls(e.visibleWrites,t);if(s!=null)return s;{let c=fo(e.visibleWrites,t);if(L1(c))return n;if(n==null&&!k1(c,rt()))return null;{let h=n||Ae.EMPTY_NODE;return Ta(c,h)}}}else{let s=fo(e.visibleWrites,t);if(!i&&L1(s))return n;if(!i&&n==null&&!k1(s,rt()))return null;{let c=function(m){return(m.visible||i)&&(!r||!~r.indexOf(m.writeId))&&(pr(m.path,t)||pr(t,m.path))},h=WI(e.allWrites,c,t),g=n||Ae.EMPTY_NODE;return Ta(h,g)}}}function QL(e,t,n){let r=Ae.EMPTY_NODE,i=ls(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(Ft,(s,c)=>{r=r.updateImmediateChild(s,c)}),r;if(n){let s=fo(e.visibleWrites,t);return n.forEachChild(Ft,(c,h)=>{let g=Ta(fo(s,new ut(c)),h);r=r.updateImmediateChild(c,g)}),nI(s).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}else{let s=fo(e.visibleWrites,t);return nI(s).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}}function XL(e,t,n,r,i){Y(r||i,"Either existingEventSnap or existingServerSnap must exist");let s=Lt(t,n);if(k1(e.visibleWrites,s))return null;{let c=fo(e.visibleWrites,s);return L1(c)?i.getChild(n):Ta(c,i.getChild(n))}}function KL(e,t,n,r){let i=Lt(t,n),s=ls(e.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){let c=fo(e.visibleWrites,i);return Ta(c,r.getNode().getImmediateChild(n))}else return null}function JL(e,t){return ls(e.visibleWrites,t)}function eF(e,t,n,r,i,s,c){let h,g=fo(e.visibleWrites,t),m=ls(g,rt());if(m!=null)h=m;else if(n!=null)h=Ta(g,n);else return[];if(h=h.withIndex(c),!h.isEmpty()&&!h.isLeafNode()){let _=[],x=c.getCompare(),I=s?h.getReverseIteratorFrom(r,c):h.getIteratorFrom(r,c),A=I.getNext();for(;A&&_.length<i;)x(A,r)!==0&&_.push(A),A=I.getNext();return _}else return[]}function tF(){return{visibleWrites:jr.empty(),allWrites:[],lastWriteId:-1}}function Bf(e,t,n,r){return GI(e.writeTree,e.treePath,t,n,r)}function uy(e,t){return QL(e.writeTree,e.treePath,t)}function rI(e,t,n,r){return XL(e.writeTree,e.treePath,t,n,r)}function Vf(e,t){return JL(e.writeTree,Lt(e.treePath,t))}function nF(e,t,n,r,i,s){return eF(e.writeTree,e.treePath,t,n,r,i,s)}function dy(e,t,n){return KL(e.writeTree,e.treePath,t,n)}function $I(e,t){return qI(Lt(e.treePath,t),e.writeTree)}function qI(e,t){return{treePath:e,writeTree:t}}var F1=class{constructor(){this.changeMap=new Map}trackChildChange(t){let n=t.type,r=t.childName;Y(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),Y(r!==".priority","Only non-priority child changes can be tracked.");let i=this.changeMap.get(r);if(i){let s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,Sc(r,t.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,Dc(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,Sa(r,t.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,Sc(r,t.snapshotNode,i.oldSnap));else throw Jo("Illegal combination of changes: "+t+" occurred after "+i)}else this.changeMap.set(r,t)}getChanges(){return Array.from(this.changeMap.values())}};var B1=class{getCompleteChild(t){return null}getChildAfterChild(t,n,r){return null}},YI=new B1,Mc=class{constructor(t,n,r=null){this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(t){let n=this.viewCache_.eventCache;if(n.isCompleteForChild(t))return n.getNode().getImmediateChild(t);{let r=this.optCompleteServerCache_!=null?new oi(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return dy(this.writes_,t,r)}}getChildAfterChild(t,n,r){let i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:ss(this.viewCache_),s=nF(this.writes_,i,n,1,r,t);return s.length===0?null:s[0]}};function rF(e){return{filter:e}}function iF(e,t){Y(t.eventCache.getNode().isIndexed(e.filter.getIndex()),"Event snap not indexed"),Y(t.serverCache.getNode().isIndexed(e.filter.getIndex()),"Server snap not indexed")}function oF(e,t,n,r,i){let s=new F1,c,h;if(n.type===ii.OVERWRITE){let m=n;m.source.fromUser?c=V1(e,t,m.path,m.snap,r,i,s):(Y(m.source.fromServer,"Unknown source."),h=m.source.tagged||t.serverCache.isFiltered()&&!qe(m.path),c=jf(e,t,m.path,m.snap,r,i,h,s))}else if(n.type===ii.MERGE){let m=n;m.source.fromUser?c=aF(e,t,m.path,m.children,r,i,s):(Y(m.source.fromServer,"Unknown source."),h=m.source.tagged||t.serverCache.isFiltered(),c=j1(e,t,m.path,m.children,r,i,h,s))}else if(n.type===ii.ACK_USER_WRITE){let m=n;m.revert?c=uF(e,t,m.path,r,i,s):c=lF(e,t,m.path,m.affectedTree,r,i,s)}else if(n.type===ii.LISTEN_COMPLETE)c=cF(e,t,n.path,r,s);else throw Jo("Unknown operation type: "+n.type);let g=s.getChanges();return sF(t,c,g),{viewCache:c,changes:g}}function sF(e,t,n){let r=t.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=Ff(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(jI(Ff(t)))}}function ZI(e,t,n,r,i,s){let c=t.eventCache;if(Vf(r,n)!=null)return t;{let h,g;if(qe(n))if(Y(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){let m=ss(t),_=m instanceof Ae?m:Ae.EMPTY_NODE,x=uy(r,_);h=e.filter.updateFullNode(t.eventCache.getNode(),x,s)}else{let m=Bf(r,ss(t));h=e.filter.updateFullNode(t.eventCache.getNode(),m,s)}else{let m=We(n);if(m===".priority"){Y(po(n)===1,"Can't have a priority with additional path components");let _=c.getNode();g=t.serverCache.getNode();let x=rI(r,n,_,g);x!=null?h=e.filter.updatePriority(_,x):h=c.getNode()}else{let _=bt(n),x;if(c.isCompleteForChild(m)){g=t.serverCache.getNode();let I=rI(r,n,c.getNode(),g);I!=null?x=c.getNode().getImmediateChild(m).updateChild(_,I):x=c.getNode().getImmediateChild(m)}else x=dy(r,m,t.serverCache);x!=null?h=e.filter.updateChild(c.getNode(),m,x,_,i,s):h=c.getNode()}}return xc(t,h,c.isFullyInitialized()||qe(n),e.filter.filtersNodes())}}function jf(e,t,n,r,i,s,c,h){let g=t.serverCache,m,_=c?e.filter:e.filter.getIndexedFilter();if(qe(n))m=_.updateFullNode(g.getNode(),r,null);else if(_.filtersNodes()&&!g.isFiltered()){let A=g.getNode().updateChild(n,r);m=_.updateFullNode(g.getNode(),A,null)}else{let A=We(n);if(!g.isCompleteForPath(n)&&po(n)>1)return t;let P=bt(n),q=g.getNode().getImmediateChild(A).updateChild(P,r);A===".priority"?m=_.updatePriority(g.getNode(),q):m=_.updateChild(g.getNode(),A,q,P,YI,null)}let x=HI(t,m,g.isFullyInitialized()||qe(n),_.filtersNodes()),I=new Mc(i,x,s);return ZI(e,x,n,i,I,h)}function V1(e,t,n,r,i,s,c){let h=t.eventCache,g,m,_=new Mc(i,t,s);if(qe(n))m=e.filter.updateFullNode(t.eventCache.getNode(),r,c),g=xc(t,m,!0,e.filter.filtersNodes());else{let x=We(n);if(x===".priority")m=e.filter.updatePriority(t.eventCache.getNode(),r),g=xc(t,m,h.isFullyInitialized(),h.isFiltered());else{let I=bt(n),A=h.getNode().getImmediateChild(x),P;if(qe(I))P=r;else{let U=_.getCompleteChild(x);U!=null?ry(I)===".priority"&&U.getChild(PI(I)).isEmpty()?P=U:P=U.updateChild(I,r):P=Ae.EMPTY_NODE}if(A.equals(P))g=t;else{let U=e.filter.updateChild(h.getNode(),x,P,I,_,c);g=xc(t,U,h.isFullyInitialized(),e.filter.filtersNodes())}}}return g}function iI(e,t){return e.eventCache.isCompleteForChild(t)}function aF(e,t,n,r,i,s,c){let h=t;return r.foreach((g,m)=>{let _=Lt(n,g);iI(t,We(_))&&(h=V1(e,h,_,m,i,s,c))}),r.foreach((g,m)=>{let _=Lt(n,g);iI(t,We(_))||(h=V1(e,h,_,m,i,s,c))}),h}function oI(e,t,n){return n.foreach((r,i)=>{t=t.updateChild(r,i)}),t}function j1(e,t,n,r,i,s,c,h){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let g=t,m;qe(n)?m=r:m=new Ln(null).setTree(n,r);let _=t.serverCache.getNode();return m.children.inorderTraversal((x,I)=>{if(_.hasChild(x)){let A=t.serverCache.getNode().getImmediateChild(x),P=oI(e,A,I);g=jf(e,g,new ut(x),P,i,s,c,h)}}),m.children.inorderTraversal((x,I)=>{let A=!t.serverCache.isCompleteForChild(x)&&I.value===null;if(!_.hasChild(x)&&!A){let P=t.serverCache.getNode().getImmediateChild(x),U=oI(e,P,I);g=jf(e,g,new ut(x),U,i,s,c,h)}}),g}function lF(e,t,n,r,i,s,c){if(Vf(i,n)!=null)return t;let h=t.serverCache.isFiltered(),g=t.serverCache;if(r.value!=null){if(qe(n)&&g.isFullyInitialized()||g.isCompleteForPath(n))return jf(e,t,n,g.getNode().getChild(n),i,s,h,c);if(qe(n)){let m=new Ln(null);return g.getNode().forEachChild(xa,(_,x)=>{m=m.set(new ut(_),x)}),j1(e,t,n,m,i,s,h,c)}else return t}else{let m=new Ln(null);return r.foreach((_,x)=>{let I=Lt(n,_);g.isCompleteForPath(I)&&(m=m.set(_,g.getNode().getChild(I)))}),j1(e,t,n,m,i,s,h,c)}}function cF(e,t,n,r,i){let s=t.serverCache,c=HI(t,s.getNode(),s.isFullyInitialized()||qe(n),s.isFiltered());return ZI(e,c,n,r,YI,i)}function uF(e,t,n,r,i,s){let c;if(Vf(r,n)!=null)return t;{let h=new Mc(r,t,i),g=t.eventCache.getNode(),m;if(qe(n)||We(n)===".priority"){let _;if(t.serverCache.isFullyInitialized())_=Bf(r,ss(t));else{let x=t.serverCache.getNode();Y(x instanceof Ae,"serverChildren would be complete if leaf node"),_=uy(r,x)}_=_,m=e.filter.updateFullNode(g,_,s)}else{let _=We(n),x=dy(r,_,t.serverCache);x==null&&t.serverCache.isCompleteForChild(_)&&(x=g.getImmediateChild(_)),x!=null?m=e.filter.updateChild(g,_,x,bt(n),h,s):t.eventCache.getNode().hasChild(_)?m=e.filter.updateChild(g,_,Ae.EMPTY_NODE,bt(n),h,s):m=g,m.isEmpty()&&t.serverCache.isFullyInitialized()&&(c=Bf(r,ss(t)),c.isLeafNode()&&(m=e.filter.updateFullNode(m,c,s)))}return c=t.serverCache.isFullyInitialized()||Vf(r,rt())!=null,xc(t,m,c,e.filter.filtersNodes())}}var U1=class{constructor(t,n){this.query_=t,this.eventRegistrations_=[];let r=this.query_._queryParams,i=new Ac(r.getIndex()),s=kL(r);this.processor_=rF(s);let c=n.serverCache,h=n.eventCache,g=i.updateFullNode(Ae.EMPTY_NODE,c.getNode(),null),m=s.updateFullNode(Ae.EMPTY_NODE,h.getNode(),null),_=new oi(g,c.isFullyInitialized(),i.filtersNodes()),x=new oi(m,h.isFullyInitialized(),s.filtersNodes());this.viewCache_=Qf(x,_),this.eventGenerator_=new O1(this.query_)}get query(){return this.query_}};function dF(e){return e.viewCache_.serverCache.getNode()}function fF(e){return Ff(e.viewCache_)}function hF(e,t){let n=ss(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!qe(t)&&!n.getImmediateChild(We(t)).isEmpty())?n.getChild(t):null}function sI(e){return e.eventRegistrations_.length===0}function pF(e,t){e.eventRegistrations_.push(t)}function aI(e,t,n){let r=[];if(n){Y(t==null,"A cancel should cancel all event registrations.");let i=e.query._path;e.eventRegistrations_.forEach(s=>{let c=s.createCancelEvent(n,i);c&&r.push(c)})}if(t){let i=[];for(let s=0;s<e.eventRegistrations_.length;++s){let c=e.eventRegistrations_[s];if(!c.matches(t))i.push(c);else if(t.hasAnyCallback()){i=i.concat(e.eventRegistrations_.slice(s+1));break}}e.eventRegistrations_=i}else e.eventRegistrations_=[];return r}function lI(e,t,n,r){t.type===ii.MERGE&&t.source.queryId!==null&&(Y(ss(e.viewCache_),"We should always have a full cache before handling merges"),Y(Ff(e.viewCache_),"Missing event cache, even though we have a server cache"));let i=e.viewCache_,s=oF(e.processor_,i,t,n,r);return iF(e.processor_,s.viewCache),Y(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=s.viewCache,QI(e,s.changes,s.viewCache.eventCache.getNode(),null)}function gF(e,t){let n=e.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Ft,(s,c)=>{r.push(Sa(s,c))}),n.isFullyInitialized()&&r.push(jI(n.getNode())),QI(e,r,n.getNode(),t)}function QI(e,t,n,r){let i=r?[r]:e.eventRegistrations_;return VL(e.eventGenerator_,t,n,i)}var Uf,Hf=class{constructor(){this.views=new Map}};function mF(e){Y(!Uf,"__referenceConstructor has already been defined"),Uf=e}function yF(){return Y(Uf,"Reference.ts has not been loaded"),Uf}function wF(e){return e.views.size===0}function fy(e,t,n,r){let i=t.source.queryId;if(i!==null){let s=e.views.get(i);return Y(s!=null,"SyncTree gave us an op for an invalid query."),lI(s,t,n,r)}else{let s=[];for(let c of e.views.values())s=s.concat(lI(c,t,n,r));return s}}function XI(e,t,n,r,i){let s=t._queryIdentifier,c=e.views.get(s);if(!c){let h=Bf(n,i?r:null),g=!1;h?g=!0:r instanceof Ae?(h=uy(n,r),g=!1):(h=Ae.EMPTY_NODE,g=!1);let m=Qf(new oi(h,g,!1),new oi(r,i,!1));return new U1(t,m)}return c}function CF(e,t,n,r,i,s){let c=XI(e,t,r,i,s);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,c),pF(c,n),gF(c,n)}function vF(e,t,n,r){let i=t._queryIdentifier,s=[],c=[],h=go(e);if(i==="default")for(let[g,m]of e.views.entries())c=c.concat(aI(m,n,r)),sI(m)&&(e.views.delete(g),m.query._queryParams.loadsAllData()||s.push(m.query));else{let g=e.views.get(i);g&&(c=c.concat(aI(g,n,r)),sI(g)&&(e.views.delete(i),g.query._queryParams.loadsAllData()||s.push(g.query)))}return h&&!go(e)&&s.push(new(yF())(t._repo,t._path)),{removed:s,events:c}}function KI(e){let t=[];for(let n of e.views.values())n.query._queryParams.loadsAllData()||t.push(n);return t}function ho(e,t){let n=null;for(let r of e.views.values())n=n||hF(r,t);return n}function JI(e,t){if(t._queryParams.loadsAllData())return Kf(e);{let r=t._queryIdentifier;return e.views.get(r)}}function eD(e,t){return JI(e,t)!=null}function go(e){return Kf(e)!=null}function Kf(e){for(let t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}var zf;function _F(e){Y(!zf,"__referenceConstructor has already been defined"),zf=e}function xF(){return Y(zf,"Reference.ts has not been loaded"),zf}var EF=1,Wf=class{constructor(t){this.listenProvider_=t,this.syncPointTree_=new Ln(null),this.pendingWriteTree_=tF(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function tD(e,t,n,r,i){return zL(e.pendingWriteTree_,t,n,r,i),i?Oa(e,new Aa(ay(),t,n)):[]}function bF(e,t,n,r){WL(e.pendingWriteTree_,t,n,r);let i=Ln.fromObject(n);return Oa(e,new Tc(ay(),t,i))}function uo(e,t,n=!1){let r=GL(e.pendingWriteTree_,t);if($L(e.pendingWriteTree_,t)){let s=new Ln(null);return r.snap!=null?s=s.set(rt(),!0):wn(r.children,c=>{s=s.set(new ut(c),!0)}),Oa(e,new R1(r.path,s,n))}else return[]}function Fc(e,t,n){return Oa(e,new Aa(ly(),t,n))}function IF(e,t,n){let r=Ln.fromObject(n);return Oa(e,new Tc(ly(),t,r))}function DF(e,t){return Oa(e,new Lf(ly(),t))}function SF(e,t,n){let r=py(e,n);if(r){let i=gy(r),s=i.path,c=i.queryId,h=Pn(s,t),g=new Lf(cy(c),h);return my(e,s,g)}else return[]}function Gf(e,t,n,r,i=!1){let s=t._path,c=e.syncPointTree_.get(s),h=[];if(c&&(t._queryIdentifier==="default"||eD(c,t))){let g=vF(c,t,n,r);wF(c)&&(e.syncPointTree_=e.syncPointTree_.remove(s));let m=g.removed;if(h=g.events,!i){let _=m.findIndex(I=>I._queryParams.loadsAllData())!==-1,x=e.syncPointTree_.findOnPath(s,(I,A)=>go(A));if(_&&!x){let I=e.syncPointTree_.subtree(s);if(!I.isEmpty()){let A=MF(I);for(let P=0;P<A.length;++P){let U=A[P],q=U.query,W=oD(e,U);e.listenProvider_.startListening(bc(q),Nc(e,q),W.hashFn,W.onComplete)}}}!x&&m.length>0&&!r&&(_?e.listenProvider_.stopListening(bc(t),null):m.forEach(I=>{let A=e.queryToTagMap.get(Jf(I));e.listenProvider_.stopListening(bc(I),A)}))}NF(e,m)}return h}function nD(e,t,n,r){let i=py(e,r);if(i!=null){let s=gy(i),c=s.path,h=s.queryId,g=Pn(c,t),m=new Aa(cy(h),g,n);return my(e,c,m)}else return[]}function AF(e,t,n,r){let i=py(e,r);if(i){let s=gy(i),c=s.path,h=s.queryId,g=Pn(c,t),m=Ln.fromObject(n),_=new Tc(cy(h),g,m);return my(e,c,_)}else return[]}function H1(e,t,n,r=!1){let i=t._path,s=null,c=!1;e.syncPointTree_.foreachOnPath(i,(I,A)=>{let P=Pn(I,i);s=s||ho(A,P),c=c||go(A)});let h=e.syncPointTree_.get(i);h?(c=c||go(h),s=s||ho(h,rt())):(h=new Hf,e.syncPointTree_=e.syncPointTree_.set(i,h));let g;s!=null?g=!0:(g=!1,s=Ae.EMPTY_NODE,e.syncPointTree_.subtree(i).foreachChild((A,P)=>{let U=ho(P,rt());U&&(s=s.updateImmediateChild(A,U))}));let m=eD(h,t);if(!m&&!t._queryParams.loadsAllData()){let I=Jf(t);Y(!e.queryToTagMap.has(I),"View does not exist, but we have a tag");let A=RF();e.queryToTagMap.set(I,A),e.tagToQueryMap.set(A,I)}let _=Xf(e.pendingWriteTree_,i),x=CF(h,t,n,_,s,g);if(!m&&!c&&!r){let I=JI(h,t);x=x.concat(OF(e,t,I))}return x}function hy(e,t,n){let i=e.pendingWriteTree_,s=e.syncPointTree_.findOnPath(t,(c,h)=>{let g=Pn(c,t),m=ho(h,g);if(m)return m});return GI(i,t,s,n,!0)}function TF(e,t){let n=t._path,r=null;e.syncPointTree_.foreachOnPath(n,(m,_)=>{let x=Pn(m,n);r=r||ho(_,x)});let i=e.syncPointTree_.get(n);i?r=r||ho(i,rt()):(i=new Hf,e.syncPointTree_=e.syncPointTree_.set(n,i));let s=r!=null,c=s?new oi(r,!0,!1):null,h=Xf(e.pendingWriteTree_,t._path),g=XI(i,t,h,s?c.getNode():Ae.EMPTY_NODE,s);return fF(g)}function Oa(e,t){return rD(t,e.syncPointTree_,null,Xf(e.pendingWriteTree_,rt()))}function rD(e,t,n,r){if(qe(e.path))return iD(e,t,n,r);{let i=t.get(rt());n==null&&i!=null&&(n=ho(i,rt()));let s=[],c=We(e.path),h=e.operationForChild(c),g=t.children.get(c);if(g&&h){let m=n?n.getImmediateChild(c):null,_=$I(r,c);s=s.concat(rD(h,g,m,_))}return i&&(s=s.concat(fy(i,e,r,n))),s}}function iD(e,t,n,r){let i=t.get(rt());n==null&&i!=null&&(n=ho(i,rt()));let s=[];return t.children.inorderTraversal((c,h)=>{let g=n?n.getImmediateChild(c):null,m=$I(r,c),_=e.operationForChild(c);_&&(s=s.concat(iD(_,h,g,m)))}),i&&(s=s.concat(fy(i,e,r,n))),s}function oD(e,t){let n=t.query,r=Nc(e,n);return{hashFn:()=>(dF(t)||Ae.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?SF(e,n._path,r):DF(e,n._path);{let s=G4(i,n);return Gf(e,n,null,s)}}}}function Nc(e,t){let n=Jf(t);return e.queryToTagMap.get(n)}function Jf(e){return e._path.toString()+"$"+e._queryIdentifier}function py(e,t){return e.tagToQueryMap.get(t)}function gy(e){let t=e.indexOf("$");return Y(t!==-1&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new ut(e.substr(0,t))}}function my(e,t,n){let r=e.syncPointTree_.get(t);Y(r,"Missing sync point for query tag that we're tracking");let i=Xf(e.pendingWriteTree_,t);return fy(r,n,i,null)}function MF(e){return e.fold((t,n,r)=>{if(n&&go(n))return[Kf(n)];{let i=[];return n&&(i=KI(n)),wn(r,(s,c)=>{i=i.concat(c)}),i}})}function bc(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(xF())(e._repo,e._path):e}function NF(e,t){for(let n=0;n<t.length;++n){let r=t[n];if(!r._queryParams.loadsAllData()){let i=Jf(r),s=e.queryToTagMap.get(i);e.queryToTagMap.delete(i),e.tagToQueryMap.delete(s)}}}function RF(){return EF++}function OF(e,t,n){let r=t._path,i=Nc(e,t),s=oD(e,n),c=e.listenProvider_.startListening(bc(t),i,s.hashFn,s.onComplete),h=e.syncPointTree_.subtree(r);if(i)Y(!go(h.value),"If we're adding a query, it shouldn't be shadowed");else{let g=h.fold((m,_,x)=>{if(!qe(m)&&_&&go(_))return[Kf(_).query];{let I=[];return _&&(I=I.concat(KI(_).map(A=>A.query))),wn(x,(A,P)=>{I=I.concat(P)}),I}});for(let m=0;m<g.length;++m){let _=g[m];e.listenProvider_.stopListening(bc(_),Nc(e,_))}}return c}var z1=class e{constructor(t){this.node_=t}getImmediateChild(t){let n=this.node_.getImmediateChild(t);return new e(n)}node(){return this.node_}},W1=class e{constructor(t,n){this.syncTree_=t,this.path_=n}getImmediateChild(t){let n=Lt(this.path_,t);return new e(this.syncTree_,n)}node(){return hy(this.syncTree_,this.path_)}},PF=function(e){return e=e||{},e.timestamp=e.timestamp||new Date().getTime(),e},cI=function(e,t,n){if(!e||typeof e!="object")return e;if(Y(".sv"in e,"Unexpected leaf node or priority contents"),typeof e[".sv"]=="string")return kF(e[".sv"],t,n);if(typeof e[".sv"]=="object")return LF(e[".sv"],t);Y(!1,"Unexpected server value: "+JSON.stringify(e,null,2))},kF=function(e,t,n){switch(e){case"timestamp":return n.timestamp;default:Y(!1,"Unexpected server value: "+e)}},LF=function(e,t,n){e.hasOwnProperty("increment")||Y(!1,"Unexpected server value: "+JSON.stringify(e,null,2));let r=e.increment;typeof r!="number"&&Y(!1,"Unexpected increment value: "+r);let i=t.node();if(Y(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;let c=i.getValue();return typeof c!="number"?r:c+r},sD=function(e,t,n,r){return yy(t,new W1(n,e),r)},aD=function(e,t,n){return yy(e,new z1(t),n)};function yy(e,t,n){let r=e.getPriority().val(),i=cI(r,t.getImmediateChild(".priority"),n),s;if(e.isLeafNode()){let c=e,h=cI(c.getValue(),t,n);return h!==c.getValue()||i!==c.getPriority().val()?new Ia(h,Jt(i)):e}else{let c=e;return s=c,i!==c.getPriority().val()&&(s=s.updatePriority(new Ia(i))),c.forEachChild(Ft,(h,g)=>{let m=yy(g,t.getImmediateChild(h),n);m!==g&&(s=s.updateImmediateChild(h,m))}),s}}var Rc=class{constructor(t="",n=null,r={children:{},childCount:0}){this.name=t,this.parent=n,this.node=r}};function wy(e,t){let n=t instanceof ut?t:new ut(t),r=e,i=We(n);for(;i!==null;){let s=es(r.node.children,i)||{children:{},childCount:0};r=new Rc(i,r,s),n=bt(n),i=We(n)}return r}function Pa(e){return e.node.value}function lD(e,t){e.node.value=t,G1(e)}function cD(e){return e.node.childCount>0}function FF(e){return Pa(e)===void 0&&!cD(e)}function eh(e,t){wn(e.node.children,(n,r)=>{t(new Rc(n,e,r))})}function uD(e,t,n,r){n&&!r&&t(e),eh(e,i=>{uD(i,t,!0,r)}),n&&r&&t(e)}function BF(e,t,n){let r=n?e:e.parent;for(;r!==null;){if(t(r))return!0;r=r.parent}return!1}function Bc(e){return new ut(e.parent===null?e.name:Bc(e.parent)+"/"+e.name)}function G1(e){e.parent!==null&&VF(e.parent,e.name,e)}function VF(e,t,n){let r=FF(n),i=Br(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,G1(e)):!r&&!i&&(e.node.children[t]=n.node,e.node.childCount++,G1(e))}var jF=/[\[\].#$\/\u0000-\u001F\u007F]/,UF=/[\[\].#$\u0000-\u001F\u007F]/,n1=10*1024*1024,Cy=function(e){return typeof e=="string"&&e.length!==0&&!jF.test(e)},dD=function(e){return typeof e=="string"&&e.length!==0&&!UF.test(e)},HF=function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),dD(e)},zF=function(e){return e===null||typeof e=="string"||typeof e=="number"&&!ey(e)||e&&typeof e=="object"&&Br(e,".sv")},fD=function(e,t,n,r){r&&t===void 0||th(uc(e,"value"),t,n)},th=function(e,t,n){let r=n instanceof ut?new m1(n,e):n;if(t===void 0)throw new Error(e+"contains undefined "+ns(r));if(typeof t=="function")throw new Error(e+"contains a function "+ns(r)+" with contents = "+t.toString());if(ey(t))throw new Error(e+"contains "+t.toString()+" "+ns(r));if(typeof t=="string"&&t.length>n1/3&&dc(t)>n1)throw new Error(e+"contains a string greater than "+n1+" utf8 bytes "+ns(r)+" ('"+t.substring(0,50)+"...')");if(t&&typeof t=="object"){let i=!1,s=!1;if(wn(t,(c,h)=>{if(c===".value")i=!0;else if(c!==".priority"&&c!==".sv"&&(s=!0,!Cy(c)))throw new Error(e+" contains an invalid key ("+c+") "+ns(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);_L(r,c),th(e,h,r),xL(r)}),i&&s)throw new Error(e+' contains ".value" child '+ns(r)+" in addition to actual children.")}},WF=function(e,t){let n,r;for(n=0;n<t.length;n++){r=t[n];let s=Ic(r);for(let c=0;c<s.length;c++)if(!(s[c]===".priority"&&c===s.length-1)){if(!Cy(s[c]))throw new Error(e+"contains an invalid key ("+s[c]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}t.sort(vL);let i=null;for(n=0;n<t.length;n++){if(r=t[n],i!==null&&pr(i,r))throw new Error(e+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}},GF=function(e,t,n,r){if(r&&t===void 0)return;let i=uc(e,"values");if(!(t&&typeof t=="object")||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");let s=[];wn(t,(c,h)=>{let g=new ut(c);if(th(i,h,Lt(n,g)),ry(g)===".priority"&&!zF(h))throw new Error(i+"contains an invalid value for '"+g.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(g)}),WF(i,s)};var hD=function(e,t,n,r){if(!(r&&n===void 0)&&!dD(n))throw new Error(uc(e,t)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},$F=function(e,t,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),hD(e,t,n,r)},vy=function(e,t){if(We(t)===".info")throw new Error(e+" failed = Can't modify data under /.info/")},qF=function(e,t){let n=t.path.toString();if(typeof t.repoInfo.host!="string"||t.repoInfo.host.length===0||!Cy(t.repoInfo.namespace)&&t.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!HF(n))throw new Error(uc(e,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var $1=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function nh(e,t){let n=null;for(let r=0;r<t.length;r++){let i=t[r],s=i.getPath();n!==null&&!iy(s,n.path)&&(e.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&e.eventLists_.push(n)}function pD(e,t,n){nh(e,n),gD(e,r=>iy(r,t))}function mr(e,t,n){nh(e,n),gD(e,r=>pr(r,t)||pr(t,r))}function gD(e,t){e.recursionDepth_++;let n=!0;for(let r=0;r<e.eventLists_.length;r++){let i=e.eventLists_[r];if(i){let s=i.path;t(s)?(YF(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}}n&&(e.eventLists_=[]),e.recursionDepth_--}function YF(e){for(let t=0;t<e.events.length;t++){let n=e.events[t];if(n!==null){e.events[t]=null;let r=n.getEventRunner();is&&yn("event: "+n.toString()),Ra(r)}}}var ZF="repo_interrupt",QF=25,q1=class{constructor(t,n,r,i){this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new $1,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=kf(),this.transactionQueueTree_=new Rc,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function XF(e,t,n){if(e.stats_=ny(e.repoInfo_),e.forceRestClient_||Z4())e.server_=new S1(e.repoInfo_,(r,i,s,c)=>{uI(e,r,i,s,c)},e.authTokenProvider_,e.appCheckProvider_),setTimeout(()=>dI(e,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Gt(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}e.persistentConnection_=new oy(e.repoInfo_,t,(r,i,s,c)=>{uI(e,r,i,s,c)},r=>{dI(e,r)},r=>{KF(e,r)},e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener(r=>{e.server_.refreshAuthToken(r)}),e.appCheckProvider_.addTokenChangeListener(r=>{e.server_.refreshAppCheckToken(r.token)}),e.statsReporter_=X4(e.repoInfo_,()=>new N1(e.stats_,e.server_)),e.infoData_=new A1,e.infoSyncTree_=new Wf({startListening:(r,i,s,c)=>{let h=[],g=e.infoData_.getNode(r._path);return g.isEmpty()||(h=Fc(e.infoSyncTree_,r._path,g),setTimeout(()=>{c("ok")},0)),h},stopListening:()=>{}}),_y(e,"connected",!1),e.serverSyncTree_=new Wf({startListening:(r,i,s,c)=>(e.server_.listen(r,s,i,(h,g)=>{let m=c(h,g);mr(e.eventQueue_,r._path,m)}),[]),stopListening:(r,i)=>{e.server_.unlisten(r,i)}})}function mD(e){let n=e.infoData_.getNode(new ut(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function rh(e){return PF({timestamp:mD(e)})}function uI(e,t,n,r,i){e.dataUpdateCount++;let s=new ut(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let c=[];if(i)if(r){let g=cc(n,m=>Jt(m));c=AF(e.serverSyncTree_,s,g,i)}else{let g=Jt(n);c=nD(e.serverSyncTree_,s,g,i)}else if(r){let g=cc(n,m=>Jt(m));c=IF(e.serverSyncTree_,s,g)}else{let g=Jt(n);c=Fc(e.serverSyncTree_,s,g)}let h=s;c.length>0&&(h=Ma(e,s)),mr(e.eventQueue_,h,c)}function dI(e,t){_y(e,"connected",t),t===!1&&n6(e)}function KF(e,t){wn(t,(n,r)=>{_y(e,n,r)})}function _y(e,t,n){let r=new ut("/.info/"+t),i=Jt(n);e.infoData_.updateSnapshot(r,i);let s=Fc(e.infoSyncTree_,r,i);mr(e.eventQueue_,r,s)}function xy(e){return e.nextWriteId_++}function JF(e,t,n){let r=TF(e.serverSyncTree_,t);return r!=null?Promise.resolve(r):e.server_.get(t).then(i=>{let s=Jt(i).withIndex(t._queryParams.getIndex());H1(e.serverSyncTree_,t,n,!0);let c;if(t._queryParams.loadsAllData())c=Fc(e.serverSyncTree_,t._path,s);else{let h=Nc(e.serverSyncTree_,t);c=nD(e.serverSyncTree_,t._path,s,h)}return mr(e.eventQueue_,t._path,c),Gf(e.serverSyncTree_,t,n,null,!0),s},i=>(Vc(e,"get for query "+Gt(t)+" failed: "+i),Promise.reject(new Error(i))))}function e6(e,t,n,r,i){Vc(e,"set",{path:t.toString(),value:n,priority:r});let s=rh(e),c=Jt(n,r),h=hy(e.serverSyncTree_,t),g=aD(c,h,s),m=xy(e),_=tD(e.serverSyncTree_,t,g,m,!0);nh(e.eventQueue_,_),e.server_.put(t.toString(),c.val(!0),(I,A)=>{let P=I==="ok";P||kn("set at "+t+" failed: "+I);let U=uo(e.serverSyncTree_,m,!P);mr(e.eventQueue_,t,U),Y1(e,i,I,A)});let x=by(e,t);Ma(e,x),mr(e.eventQueue_,x,[])}function t6(e,t,n,r){Vc(e,"update",{path:t.toString(),value:n});let i=!0,s=rh(e),c={};if(wn(n,(h,g)=>{i=!1,c[h]=sD(Lt(t,h),Jt(g),e.serverSyncTree_,s)}),i)yn("update() called with empty data.  Don't do anything."),Y1(e,r,"ok",void 0);else{let h=xy(e),g=bF(e.serverSyncTree_,t,c,h);nh(e.eventQueue_,g),e.server_.merge(t.toString(),n,(m,_)=>{let x=m==="ok";x||kn("update at "+t+" failed: "+m);let I=uo(e.serverSyncTree_,h,!x),A=I.length>0?Ma(e,t):t;mr(e.eventQueue_,A,I),Y1(e,r,m,_)}),wn(n,m=>{let _=by(e,Lt(t,m));Ma(e,_)}),mr(e.eventQueue_,t,[])}}function n6(e){Vc(e,"onDisconnectEvents");let t=rh(e),n=kf();T1(e.onDisconnect_,rt(),(i,s)=>{let c=sD(i,s,e.serverSyncTree_,t);UI(n,i,c)});let r=[];T1(n,rt(),(i,s)=>{r=r.concat(Fc(e.serverSyncTree_,i,s));let c=by(e,i);Ma(e,c)}),e.onDisconnect_=kf(),mr(e.eventQueue_,rt(),r)}function r6(e,t,n){let r;We(t._path)===".info"?r=H1(e.infoSyncTree_,t,n):r=H1(e.serverSyncTree_,t,n),pD(e.eventQueue_,t._path,r)}function fI(e,t,n){let r;We(t._path)===".info"?r=Gf(e.infoSyncTree_,t,n):r=Gf(e.serverSyncTree_,t,n),pD(e.eventQueue_,t._path,r)}function i6(e){e.persistentConnection_&&e.persistentConnection_.interrupt(ZF)}function Vc(e,...t){let n="";e.persistentConnection_&&(n=e.persistentConnection_.id+":"),yn(n,...t)}function Y1(e,t,n,r){t&&Ra(()=>{if(n==="ok")t(null);else{let i=(n||"error").toUpperCase(),s=i;r&&(s+=": "+r);let c=new Error(s);c.code=i,t(c)}})}function yD(e,t,n){return hy(e.serverSyncTree_,t,n)||Ae.EMPTY_NODE}function Ey(e,t=e.transactionQueueTree_){if(t||ih(e,t),Pa(t)){let n=CD(e,t);Y(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&o6(e,Bc(t),n)}else cD(t)&&eh(t,n=>{Ey(e,n)})}function o6(e,t,n){let r=n.map(m=>m.currentWriteId),i=yD(e,t,r),s=i,c=i.hash();for(let m=0;m<n.length;m++){let _=n[m];Y(_.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),_.status=1,_.retryCount++;let x=Pn(t,_.path);s=s.updateChild(x,_.currentOutputSnapshotRaw)}let h=s.val(!0),g=t;e.server_.put(g.toString(),h,m=>{Vc(e,"transaction put response",{path:g.toString(),status:m});let _=[];if(m==="ok"){let x=[];for(let I=0;I<n.length;I++)n[I].status=2,_=_.concat(uo(e.serverSyncTree_,n[I].currentWriteId)),n[I].onComplete&&x.push(()=>n[I].onComplete(null,!0,n[I].currentOutputSnapshotResolved)),n[I].unwatcher();ih(e,wy(e.transactionQueueTree_,t)),Ey(e,e.transactionQueueTree_),mr(e.eventQueue_,t,_);for(let I=0;I<x.length;I++)Ra(x[I])}else{if(m==="datastale")for(let x=0;x<n.length;x++)n[x].status===3?n[x].status=4:n[x].status=0;else{kn("transaction at "+g.toString()+" failed: "+m);for(let x=0;x<n.length;x++)n[x].status=4,n[x].abortReason=m}Ma(e,t)}},c)}function Ma(e,t){let n=wD(e,t),r=Bc(n),i=CD(e,n);return s6(e,i,r),r}function s6(e,t,n){if(t.length===0)return;let r=[],i=[],c=t.filter(h=>h.status===0).map(h=>h.currentWriteId);for(let h=0;h<t.length;h++){let g=t[h],m=Pn(n,g.path),_=!1,x;if(Y(m!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),g.status===4)_=!0,x=g.abortReason,i=i.concat(uo(e.serverSyncTree_,g.currentWriteId,!0));else if(g.status===0)if(g.retryCount>=QF)_=!0,x="maxretry",i=i.concat(uo(e.serverSyncTree_,g.currentWriteId,!0));else{let I=yD(e,g.path,c);g.currentInputSnapshot=I;let A=t[h].update(I.val());if(A!==void 0){th("transaction failed: Data returned ",A,g.path);let P=Jt(A);typeof A=="object"&&A!=null&&Br(A,".priority")||(P=P.updatePriority(I.getPriority()));let q=g.currentWriteId,W=rh(e),le=aD(P,I,W);g.currentOutputSnapshotRaw=P,g.currentOutputSnapshotResolved=le,g.currentWriteId=xy(e),c.splice(c.indexOf(q),1),i=i.concat(tD(e.serverSyncTree_,g.path,le,g.currentWriteId,g.applyLocally)),i=i.concat(uo(e.serverSyncTree_,q,!0))}else _=!0,x="nodata",i=i.concat(uo(e.serverSyncTree_,g.currentWriteId,!0))}mr(e.eventQueue_,n,i),i=[],_&&(t[h].status=2,function(I){setTimeout(I,Math.floor(0))}(t[h].unwatcher),t[h].onComplete&&(x==="nodata"?r.push(()=>t[h].onComplete(null,!1,t[h].currentInputSnapshot)):r.push(()=>t[h].onComplete(new Error(x),!1,null))))}ih(e,e.transactionQueueTree_);for(let h=0;h<r.length;h++)Ra(r[h]);Ey(e,e.transactionQueueTree_)}function wD(e,t){let n,r=e.transactionQueueTree_;for(n=We(t);n!==null&&Pa(r)===void 0;)r=wy(r,n),t=bt(t),n=We(t);return r}function CD(e,t){let n=[];return vD(e,t,n),n.sort((r,i)=>r.order-i.order),n}function vD(e,t,n){let r=Pa(t);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);eh(t,i=>{vD(e,i,n)})}function ih(e,t){let n=Pa(t);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,lD(t,n.length>0?n:void 0)}eh(t,r=>{ih(e,r)})}function by(e,t){let n=Bc(wD(e,t)),r=wy(e.transactionQueueTree_,t);return BF(r,i=>{r1(e,i)}),r1(e,r),uD(r,i=>{r1(e,i)}),n}function r1(e,t){let n=Pa(t);if(n){let r=[],i=[],s=-1;for(let c=0;c<n.length;c++)n[c].status===3||(n[c].status===1?(Y(s===c-1,"All SENT items should be at beginning of queue."),s=c,n[c].status=3,n[c].abortReason="set"):(Y(n[c].status===0,"Unexpected transaction status in abort"),n[c].unwatcher(),i=i.concat(uo(e.serverSyncTree_,n[c].currentWriteId,!0)),n[c].onComplete&&r.push(n[c].onComplete.bind(null,new Error("set"),!1,null))));s===-1?lD(t,void 0):n.length=s+1,mr(e.eventQueue_,Bc(t),i);for(let c=0;c<r.length;c++)Ra(r[c])}}function a6(e){let t="",n=e.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}t+="/"+i}return t}function l6(e){let t={};e.charAt(0)==="?"&&(e=e.substring(1));for(let n of e.split("&")){if(n.length===0)continue;let r=n.split("=");r.length===2?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):kn(`Invalid query segment '${n}' in query '${e}'`)}return t}var hI=function(e,t){let n=c6(e),r=n.namespace;n.domain==="firebase.com"&&ki(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&ki("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||j4();let i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new Sf(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new ut(n.pathString)}},c6=function(e){let t="",n="",r="",i="",s="",c=!0,h="https",g=443;if(typeof e=="string"){let m=e.indexOf("//");m>=0&&(h=e.substring(0,m-1),e=e.substring(m+2));let _=e.indexOf("/");_===-1&&(_=e.length);let x=e.indexOf("?");x===-1&&(x=e.length),t=e.substring(0,Math.min(_,x)),_<x&&(i=a6(e.substring(_,x)));let I=l6(e.substring(Math.min(e.length,x)));m=t.indexOf(":"),m>=0?(c=h==="https"||h==="wss",g=parseInt(t.substring(m+1),10)):m=t.length;let A=t.slice(0,m);if(A.toLowerCase()==="localhost")n="localhost";else if(A.split(".").length<=2)n=A;else{let P=t.indexOf(".");r=t.substring(0,P).toLowerCase(),n=t.substring(P+1),s=r}"ns"in I&&(s=I.ns)}return{host:t,port:g,domain:n,subdomain:r,secure:c,scheme:h,pathString:i,namespace:s}};var pI="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",u6=function(){let e=0,t=[];return function(n){let r=n===e;e=n;let i,s=new Array(8);for(i=7;i>=0;i--)s[i]=pI.charAt(n%64),n=Math.floor(n/64);Y(n===0,"Cannot push at time == 0");let c=s.join("");if(r){for(i=11;i>=0&&t[i]===63;i--)t[i]=0;t[i]++}else for(i=0;i<12;i++)t[i]=Math.floor(Math.random()*64);for(i=0;i<12;i++)c+=pI.charAt(t[i]);return Y(c.length===20,"nextPushId: Length should be 20."),c}}();var $f=class{constructor(t,n,r,i){this.eventType=t,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){let t=this.snapshot.ref;return this.eventType==="value"?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Gt(this.snapshot.exportVal())}},qf=class{constructor(t,n,r){this.eventRegistration=t,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}};var Yf=class{constructor(t,n){this.snapshotCallback=t,this.cancelCallback=n}onValue(t,n){this.snapshotCallback.call(null,t,n)}onCancel(t){return Y(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}};var Z1=class e{constructor(t,n,r,i){this._repo=t,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return qe(this._path)?null:ry(this._path)}get ref(){return new si(this._repo,this._path)}get _queryIdentifier(){let t=Jb(this._queryParams),n=ty(t);return n==="{}"?"default":n}get _queryObject(){return Jb(this._queryParams)}isEqual(t){if(t=ao(t),!(t instanceof e))return!1;let n=this._repo===t._repo,r=iy(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+CL(this._path)}};var si=class e extends Z1{constructor(t,n){super(t,n,new D1,!1)}get parent(){let t=PI(this._path);return t===null?null:new e(this._repo,t)}get root(){let t=this;for(;t.parent!==null;)t=t.parent;return t}},Oc=class e{constructor(t,n,r){this._node=t,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){let n=new ut(t),r=Na(this.ref,t);return new e(this._node.getChild(n),r,Ft)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>t(new e(i,Na(this.ref,r),Ft)))}hasChild(t){let n=new ut(t);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}};function re(e,t){return e=ao(e),e._checkNotDeleted("ref"),t!==void 0?Na(e._root,t):e._root}function Na(e,t){return e=ao(e),We(e._path)===null?$F("child","path",t,!1):hD("child","path",t,!1),new si(e._repo,Lt(e._path,t))}function _D(e,t){e=ao(e),vy("push",e._path),fD("push",t,e._path,!0);let n=mD(e._repo),r=u6(n),i=Na(e,r),s=Na(e,r),c;return t!=null?c=yo(s,t).then(()=>s):c=Promise.resolve(s),i.then=c.then.bind(c),i.catch=c.then.bind(c,void 0),i}function mo(e){return vy("remove",e._path),yo(e,null)}function yo(e,t){e=ao(e),vy("set",e._path),fD("set",t,e._path,!1);let n=new Ri;return e6(e._repo,e._path,t,null,n.wrapCallback(()=>{})),n.promise}function Bt(e,t){GF("update",t,e._path,!1);let n=new Ri;return t6(e._repo,e._path,t,n.wrapCallback(()=>{})),n.promise}function Ne(e){e=ao(e);let t=new Yf(()=>{}),n=new Zf(t);return JF(e._repo,e,n).then(r=>new Oc(r,new si(e._repo,e._path),e._queryParams.getIndex()))}var Zf=class e{constructor(t){this.callbackContext=t}respondsTo(t){return t==="value"}createEvent(t,n){let r=n._queryParams.getIndex();return new $f("value",this,new Oc(t.snapshotNode,new si(n._repo,n._path),r))}getEventRunner(t){return t.getEventType()==="cancel"?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,n){return this.callbackContext.hasCancelCallback?new qf(this,t,n):null}matches(t){return t instanceof e?!t.callbackContext||!this.callbackContext?!0:t.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}},Q1=class e{constructor(t,n){this.eventType=t,this.callbackContext=n}respondsTo(t){let n=t==="children_added"?"child_added":t;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(t,n){return this.callbackContext.hasCancelCallback?new qf(this,t,n):null}createEvent(t,n){Y(t.childName!=null,"Child events should have a childName.");let r=Na(new si(n._repo,n._path),t.childName),i=n._queryParams.getIndex();return new $f(t.type,this,new Oc(t.snapshotNode,r,i),t.prevName)}getEventRunner(t){return t.getEventType()==="cancel"?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,t.prevName)}matches(t){return t instanceof e?this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}};function d6(e,t,n,r,i){let s;if(typeof r=="object"&&(s=void 0,i=r),typeof r=="function"&&(s=r),i&&i.onlyOnce){let g=n,m=(_,x)=>{fI(e._repo,e,h),g(_,x)};m.userCallback=n.userCallback,m.context=n.context,n=m}let c=new Yf(n,s||void 0),h=t==="value"?new Zf(c):new Q1(t,c);return r6(e._repo,e,h),()=>fI(e._repo,e,h)}function xD(e,t,n,r){return d6(e,"value",t,n,r)}mF(si);_F(si);var f6="FIREBASE_DATABASE_EMULATOR_HOST",X1={},h6=!1;function p6(e,t,n,r){e.repoInfo_=new Sf(`${t}:${n}`,!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0),r&&(e.authTokenProvider_=r)}function g6(e,t,n,r,i){let s=r||e.options.databaseURL;s===void 0&&(e.options.projectId||ki("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),yn("Using default host for project ",e.options.projectId),s=`${e.options.projectId}-default-rtdb.firebaseio.com`);let c=hI(s,i),h=c.repoInfo,g,m;typeof process<"u"&&process.env&&(m=process.env[f6]),m?(g=!0,s=`http://${m}?ns=${h.namespace}`,c=hI(s,i),h=c.repoInfo):g=!c.repoInfo.secure;let _=i&&g?new _c(_c.OWNER):new c1(e.name,e.options,t);qF("Invalid Firebase Database URL",c),qe(c.path)||ki("Database URL must point to the root of a Firebase Database (not including a child path).");let x=y6(h,e,_,new l1(e.name,n));return new K1(x,e)}function m6(e,t){let n=X1[t];(!n||n[e.key]!==e)&&ki(`Database ${t}(${e.repoInfo_}) has already been deleted.`),i6(e),delete n[e.key]}function y6(e,t,n,r){let i=X1[t.name];i||(i={},X1[t.name]=i);let s=i[e.toURLString()];return s&&ki("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new q1(e,h6,n,r),i[e.toURLString()]=s,s}var K1=class{constructor(t,n){this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(XF(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new si(this._repo,rt())),this._rootInternal}_delete(){return this._rootInternal!==null&&(m6(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){this._rootInternal===null&&ki("Cannot call "+t+" on a deleted database.")}};function se(e=Ob(),t){let n=Nb(e,"database").getImmediate({identifier:t});if(!n._instanceStarted){let r=cb("database");r&&w6(n,...r)}return n}function w6(e,t,n,r={}){e=ao(e),e._checkNotDeleted("useEmulator"),e._instanceStarted&&ki("Cannot call useEmulator() after instance has already been initialized.");let i=e._repoInternal,s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&ki('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new _c(_c.OWNER);else if(r.mockUserToken){let c=typeof r.mockUserToken=="string"?r.mockUserToken:ub(r.mockUserToken,e.app.options.projectId);s=new _c(c)}p6(i,t,n,s)}function C6(e){F4(Rb),hc(new Oi("database",(t,{instanceIdentifier:n})=>{let r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return g6(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),co(Lb,Fb,e),co(Lb,Fb,"esm2017")}oy.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)};oy.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};C6();var Le={production:!0,firebaseConfig:{apiKey:"AIzaSyC2ak3O4qovvrDLGJ-L3a6E1uLASES2xuU",authDomain:"tablefi-31087.firebaseapp.com",databaseURL:"https://tablefi-31087-default-rtdb.europe-west1.firebasedatabase.app",projectId:"tablefi-31087",storageBucket:"tablefi-31087.appspot.com",messagingSenderId:"821585389969",appId:"1:821585389969:web:9383409a2e5fbf601b5230",measurementId:"G-QXT5KZEKGZ"}};var ED=(()=>{class e{db;constructor(){let n=Ee(Le.firebaseConfig);this.db=se(n)}login(n,r){return new Be(i=>{let s=re(this.db,"Owners");Ne(s).then(c=>{if(c.exists()){let h=c.val(),m=Object.values(h).find(_=>_.email===n);m?m.password===r?i.next(m):i.error("Invalid password"):i.error("No user found with this email")}else i.error("No owners found in the database")}).catch(c=>{console.error("Error fetching owners:",c),i.error("An error occurred while fetching owners")})}).pipe(sr(i=>(console.error("Error during login:",i),xt([null]))))}static \u0275fac=function(r){return new(r||e)};static \u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var Te=(()=>{class e{router;constructor(n){this.router=n}NavigateTo(n){this.router.navigate([n])}static \u0275fac=function(r){return new(r||e)(Ue(Jr))};static \u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var bD=(()=>{class e{loginService;navigationService;email="";password="";constructor(n,r){this.loginService=n,this.navigationService=r}onSubmit(n){n.preventDefault(),this.loginService.login(this.email,this.password).subscribe({next:r=>{r&&(sessionStorage.setItem("userId",r.id),sessionStorage.setItem("userEmail",r.email),sessionStorage.setItem("uniqueLinkToken",r.uniqueLinkToken),console.log("User logged in:",r),this.navigationService.NavigateTo("changerestaurant"))},error:r=>{alert(r),console.error("Login error:",r)}})}static \u0275fac=function(r){return new(r||e)(Q(ED),Q(Te))};static \u0275cmp=oe({type:e,selectors:[["app-login"]],standalone:!0,features:[ae],decls:15,vars:2,consts:[[1,"displaybox"],[1,"logo"],[1,"loginform"],[3,"ngSubmit"],["type","email","id","email","name","email","placeholder","E-mail","required","",3,"ngModelChange","ngModel"],["type","password","id","password","name","password","placeholder","Has\u0142o","required","",3,"ngModelChange","ngModel"],["type","submit",1,"login"],[1,"footstatic"]],template:function(r,i){r&1&&(N(0,"main")(1,"div",0)(2,"div",1)(3,"h1"),B(4,"EasyOrder"),R()(),N(5,"div",2)(6,"form",3),X("ngSubmit",function(c){return i.onSubmit(c)}),N(7,"div")(8,"input",4),Mt("ngModelChange",function(c){return kt(i.email,c)||(i.email=c),c}),R()(),N(9,"div")(10,"input",5),Mt("ngModelChange",function(c){return kt(i.password,c)||(i.password=c),c}),R()(),fe(11,"div"),N(12,"button",6),B(13,"Zaloguj"),R()()(),fe(14,"div",7),R()()),r&2&&(ee(8),Tt("ngModel",i.email),ee(2),Tt("ngModel",i.password))},dependencies:[sn,ti,An,$n,ei,nr,On,Fr],styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;padding:32px;position:relative}.displaybox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center;position:relative}.logo[_ngcontent-%COMP%]{display:flex;font-size:45%;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center;margin-bottom:48px}.loginform[_ngcontent-%COMP%]{width:100%;height:fit-content;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center;position:relative}.loginform[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:100%}.loginform[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;background:#fff;padding:16px;font-size:110%;color:#000;font-weight:600;letter-spacing:2px;border:1px solid #000000;transition:all .5s;margin-bottom:24px}.loginform[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;background:#000;padding:16px;font-size:110%;color:#fff;font-weight:600;letter-spacing:2px;border:none;transition:all .5s}"]})}return e})();var ID=(()=>{class e{db;constructor(){let n=Ee(Le.firebaseConfig);this.db=se(n)}emailExists(n){let r=re(this.db,"Owners");return xt(Ne(r)).pipe(Ve(i=>{if(i.exists()){let s=i.val();return Object.values(s).map(h=>h.email).includes(n)}return!1}),sr(i=>(console.error("Error checking email existence:",i),xt([!1]))))}register(n){let r=re(this.db,"Owners"),i=_D(r);return new Be(s=>{yo(i,Pe(J({},n),{id:i.key})).then(()=>{s.next(i),s.complete()}).catch(c=>{s.error(c)})})}static \u0275fac=function(r){return new(r||e)};static \u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var DD=(()=>{class e{registrationService;navigationService;email="";password="";confirmPassword="";constructor(n,r){this.registrationService=n,this.navigationService=r}onSubmit(n){if(n.preventDefault(),this.password!==this.confirmPassword){alert("Has\u0142a nie pasuj\u0105 do siebie!");return}this.registrationService.emailExists(this.email).subscribe(r=>{if(r){alert("Email jest ju\u017C zarejestrowany!");return}let i={name:this.email.split("@")[0],email:this.email,password:this.password,uniqueLinkToken:this.generateUniqueLinkToken(128)};this.registrationService.register(i).subscribe({next:s=>{let c=s.key;c?(sessionStorage.setItem("userId",c),sessionStorage.setItem("userEmail",i.email),sessionStorage.setItem("uniqueLinkToken",i.uniqueLinkToken),this.navigationService.NavigateTo("newrestaurant")):console.error("Nie uda\u0142o si\u0119 uzyska\u0107 ownerId z Firebase.")},error:s=>{console.error("Registration failed:",s)}})})}generateUniqueLinkToken(n=128){let r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i="";for(let s=0;s<n;s++)i+=r.charAt(Math.floor(Math.random()*r.length));return i}static \u0275fac=function(r){return new(r||e)(Q(ID),Q(Te))};static \u0275cmp=oe({type:e,selectors:[["app-register"]],standalone:!0,features:[ae],decls:16,vars:3,consts:[[1,"displaybox"],[1,"logo"],[1,"loginform"],[3,"ngSubmit"],["type","email","id","email","name","email","placeholder","E-mail","required","",3,"ngModelChange","ngModel"],["type","password","id","password","name","password","placeholder","Has\u0142o","required","",3,"ngModelChange","ngModel"],["type","password","id","confirmPassword","name","confirmPassword","placeholder","Powt\xF3rz has\u0142o","required","",3,"ngModelChange","ngModel"],["type","submit",1,"register"],[1,"footstatic"]],template:function(r,i){r&1&&(N(0,"main")(1,"div",0)(2,"div",1)(3,"h1"),B(4,"EasyOrder"),R()(),N(5,"div",2)(6,"form",3),X("ngSubmit",function(c){return i.onSubmit(c)}),N(7,"div")(8,"input",4),Mt("ngModelChange",function(c){return kt(i.email,c)||(i.email=c),c}),R()(),N(9,"div")(10,"input",5),Mt("ngModelChange",function(c){return kt(i.password,c)||(i.password=c),c}),R()(),N(11,"div")(12,"input",6),Mt("ngModelChange",function(c){return kt(i.confirmPassword,c)||(i.confirmPassword=c),c}),R()(),N(13,"button",7),B(14,"Zarejestruj"),R()()(),fe(15,"div",8),R()()),r&2&&(ee(8),Tt("ngModel",i.email),ee(2),Tt("ngModel",i.password),ee(2),Tt("ngModel",i.confirmPassword))},dependencies:[sn,ti,An,$n,ei,nr,On,Fr],styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;padding:32px;position:relative}.displaybox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center;position:relative}.logo[_ngcontent-%COMP%]{display:flex;font-size:45%;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center;margin-bottom:48px}.loginform[_ngcontent-%COMP%]{width:100%;height:fit-content;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center;position:relative}.loginform[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:100%}.loginform[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;background:#fff;padding:16px;font-size:110%;color:#000;font-weight:600;letter-spacing:2px;border:1px solid #000000;transition:all .5s;margin-bottom:24px}.loginform[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;background:#000;padding:16px;font-size:110%;color:#fff;font-weight:600;letter-spacing:2px;border:none;transition:all .5s}"]})}return e})();var Iy=(()=>{class e{navigationService;constructor(n){this.navigationService=n}goToPage(n){this.navigationService.NavigateTo(n)}static \u0275fac=function(r){return new(r||e)(Q(Te))};static \u0275cmp=oe({type:e,selectors:[["app-landing-page"]],standalone:!0,features:[ae],decls:9,vars:0,consts:[[1,"displaybox"],[1,"logo"],["src","https://cdn1.mandarin.com.pl/easyorderlogo.png","alt","EasyOrder"],[1,"buttons"],[1,"register",3,"click"],[1,"login",3,"click"]],template:function(r,i){r&1&&(N(0,"main")(1,"div",0)(2,"div",1),fe(3,"img",2),R(),N(4,"div",3)(5,"button",4),X("click",function(){return i.goToPage("register")}),B(6,"Zarejestruj si\u0119"),R(),N(7,"button",5),X("click",function(){return i.goToPage("login")}),B(8,"Zaloguj si\u0119"),R()()()())},styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;padding:32px;position:relative}.displaybox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center;position:relative}.logo[_ngcontent-%COMP%]{display:flex;font-size:110%;width:80%;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center;margin-bottom:48px}.logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:80%}.buttons[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center}.buttons[_ngcontent-%COMP%]   .register[_ngcontent-%COMP%]{width:80%;background:#000;padding:16px;font-size:110%;color:#fff;font-weight:600;letter-spacing:2px;border:none;border-radius:16px;transition:all .5s;margin-bottom:16px}.buttons[_ngcontent-%COMP%]   .login[_ngcontent-%COMP%]{width:80%;background:#000;padding:16px;font-size:110%;color:#fff;font-weight:600;letter-spacing:2px;border:none;border-radius:16px;transition:all .5s}.buttons[_ngcontent-%COMP%]   .register[_ngcontent-%COMP%]:hover, .buttons[_ngcontent-%COMP%]   .login[_ngcontent-%COMP%]:hover{background:#292929;transition:all .5s}"]})}return e})();var SD=(()=>{class e{navigationService;name="";address="";constructor(n){this.navigationService=n;let r=Ee(Le.firebaseConfig)}onSubmit(n){n.preventDefault();let r=sessionStorage.getItem("uniqueLinkToken"),i=sessionStorage.getItem("userId");if(!i){alert("You must be logged in to create a restaurant.");return}let s={id:Date.now().toString(),name:this.name,address:this.address,uniqueLinkToken:r||"",settings:{table_change_allowed:!0,table_block_allowed:!0,order_number_typed_by_waiter_required:!0,waiter_access_pin:1234},TableGroups:[],Tables:[],Orders:[]};this.saveRestaurant(s,i)}saveRestaurant(n,r){let i=se(),s=n.id,c=re(i,`Owners/${r}/Restaurants/${s}`);yo(c,n).then(()=>{console.log("Restaurant added successfully:",n),this.navigationService.NavigateTo("changerestaurant"),this.resetForm()}).catch(h=>{console.error("Error adding restaurant:",h)})}resetForm(){this.name="",this.address=""}static \u0275fac=function(r){return new(r||e)(Q(Te))};static \u0275cmp=oe({type:e,selectors:[["app-newrestaurant"]],standalone:!0,features:[ae],decls:15,vars:2,consts:[[1,"displaybox"],[1,"logo"],[1,"newrestaurantform"],[3,"ngSubmit"],["type","text","id","name","name","name","placeholder","Nazwa restauracji","required","",3,"ngModelChange","ngModel"],["type","text","id","adress","name","adress","placeholder","Adres","required","",3,"ngModelChange","ngModel"],["type","submit",1,"addrestaurant"],[1,"footstatic"]],template:function(r,i){r&1&&(N(0,"main")(1,"div",0)(2,"div",1)(3,"h1"),B(4,"EasyOrder"),R()(),N(5,"div",2)(6,"form",3),X("ngSubmit",function(c){return i.onSubmit(c)}),N(7,"div")(8,"input",4),Mt("ngModelChange",function(c){return kt(i.name,c)||(i.name=c),c}),R()(),N(9,"div")(10,"input",5),Mt("ngModelChange",function(c){return kt(i.address,c)||(i.address=c),c}),R()(),fe(11,"div"),N(12,"button",6),B(13,"Dodaj"),R()()(),fe(14,"div",7),R()()),r&2&&(ee(8),Tt("ngModel",i.name),ee(2),Tt("ngModel",i.address))},dependencies:[sn,ti,An,$n,ei,nr,On,Fr],styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;padding:32px;position:relative}.displaybox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center;position:relative}.logo[_ngcontent-%COMP%]{display:flex;font-size:45%;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center;margin-bottom:48px}.newrestaurantform[_ngcontent-%COMP%]{width:100%;height:fit-content;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center;position:relative}.newrestaurantform[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:100%}.newrestaurantform[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;background:#fff;padding:16px;font-size:110%;color:#000;font-weight:600;letter-spacing:2px;border:1px solid #000000;transition:all .5s;margin-bottom:24px}.newrestaurantform[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;background:#000;padding:16px;font-size:110%;color:#fff;font-weight:600;letter-spacing:2px;border:none;transition:all .5s}"]})}return e})();var AD=(()=>{class e{navigationService;constructor(n){this.navigationService=n}goToPage(n){this.navigationService.NavigateTo(n)}static \u0275fac=function(r){return new(r||e)(Q(Te))};static \u0275cmp=oe({type:e,selectors:[["app-restaurantmanage"]],standalone:!0,features:[ae],decls:17,vars:0,consts:[[1,"displaybox"],[1,"logo"],[1,"buttons"],[1,"tablemanage",3,"click"],[1,"settings",3,"click"],[1,"revievs",3,"click"],[1,"stats",3,"click"],[1,"bilings",3,"click"],[1,"footstatic"]],template:function(r,i){r&1&&(N(0,"main")(1,"div",0)(2,"div",1)(3,"h1"),B(4,"EasyOrder"),R()(),N(5,"div",2)(6,"button",3),X("click",function(){return i.goToPage("tablemanage")}),B(7,"Zarz\u0105dzanie stolikami"),R(),N(8,"button",4),X("click",function(){return i.goToPage("restaurantsettings")}),B(9,"Ustawienia"),R(),N(10,"button",5),X("click",function(){return i.goToPage("restaurantrevievs")}),B(11,"Opinie restauracji"),R(),N(12,"button",6),X("click",function(){return i.goToPage("restaurantstats")}),B(13,"Statystyki"),R(),N(14,"button",7),X("click",function(){return i.goToPage("restaurantbilings")}),B(15,"P\u0142atno\u015Bci"),R()(),fe(16,"div",8),R()())},dependencies:[sn],styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;padding:16px;position:relative}.displaybox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center;position:relative}.logo[_ngcontent-%COMP%]{display:flex;font-size:45%;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center;margin-bottom:48px}.buttons[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center}.buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;background:#fff;padding:24px;font-size:110%;color:#000;font-weight:600;letter-spacing:2px;border:1px solid #000000;transition:all .5s;margin-bottom:24px}"]})}return e})();var oh={production:!0,firebaseConfig:{apiKey:"AIzaSyC2ak3O4qovvrDLGJ-L3a6E1uLASES2xuU",authDomain:"tablefi-31087.firebaseapp.com",databaseURL:"https://tablefi-31087-default-rtdb.europe-west1.firebasedatabase.app",projectId:"tablefi-31087",storageBucket:"tablefi-31087.appspot.com",messagingSenderId:"821585389969",appId:"1:821585389969:web:9383409a2e5fbf601b5230",measurementId:"G-QXT5KZEKGZ"}};function x6(e,t){e&1&&(N(0,"p"),B(1,"Brak restauracji przypisanych do konta."),R())}function E6(e,t){if(e&1){let n=At();N(0,"button",6),X("click",function(){let i=pt(n).$implicit,s=nt(2);return gt(s.setRestaurant(i.id))}),N(1,"p",7),B(2),R(),N(3,"p",7),B(4),R()()}if(e&2){let n=t.$implicit;ee(2),I0("",n.name," ",n.id,""),ee(2),fr(n.address)}}function b6(e,t){if(e&1&&Dn(0,E6,5,3,"button",5,In),e&2){let n=nt();Sn(n.restaurants)}}var TD=(()=>{class e{navigationService;restaurants=[];db;constructor(n){this.navigationService=n;let r=Ee(oh.firebaseConfig);this.db=se(r)}ngOnInit(){this.loadRestaurants()}loadRestaurants(){let n=sessionStorage.getItem("userId"),r=re(this.db,`Owners/${n}/Restaurants`);Ne(r).then(i=>{if(i.exists()){let s=i.val();this.restaurants=Object.values(s),this.restaurants.length===1&&(localStorage.setItem("currentRestaurant",this.restaurants[0].id.toString()),console.log(this.restaurants[0].id.toString()),this.navigationService.NavigateTo("managerestaurant"))}else console.log("No restaurants found for this owner.")}).catch(i=>{console.error("Error loading restaurants:",i)})}setRestaurant(n){localStorage.setItem("currentRestaurant",n),this.navigationService.NavigateTo("managerestaurant")}static \u0275fac=function(r){return new(r||e)(Q(Te))};static \u0275cmp=oe({type:e,selectors:[["app-changerestaurant"]],standalone:!0,features:[ae],decls:12,vars:1,consts:[[1,"displaybox"],[1,"logo"],[1,"flexcontainer"],[1,"buttons"],[1,"footstatic"],[1,"restaurant"],[1,"restaurant",3,"click"],["id","datavalve"]],template:function(r,i){r&1&&(N(0,"main")(1,"div",0)(2,"div",1)(3,"h1"),B(4,"EasyOrder"),R()(),N(5,"div",2)(6,"h1"),B(7,"Wybierz restauracj\u0119"),R(),N(8,"div",3),on(9,x6,2,0,"p")(10,b6,2,0),R()(),fe(11,"div",4),R()()),r&2&&(ee(9),Kt(i.restaurants.length===0?9:10))},styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;padding:16px;position:relative}.displaybox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center;position:relative}.logo[_ngcontent-%COMP%]{display:flex;font-size:45%;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center;margin-bottom:48px}.flexcontainer[_ngcontent-%COMP%]{display:flex;font-size:60%;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center}.flexcontainer[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center;font-size:110%;color:#000;font-weight:600}.flexcontainer[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   .restaurant[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center;background:#fff;padding:24px;font-size:110%;color:#000;font-weight:600;letter-spacing:2px;border:1px solid #000000;transition:all .5s;margin-bottom:24px}.flexcontainer[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   .restaurant[_ngcontent-%COMP%]   #datavalve[_ngcontent-%COMP%]{color:#000;font-weight:800;letter-spacing:2px}"]})}return e})();var MD=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275cmp=oe({type:e,selectors:[["app-restaurantbilings"]],standalone:!0,features:[ae],decls:9,vars:0,consts:[[1,"displaybox"],[1,"logo"],[1,"buttons"],[1,"footstatic"]],template:function(r,i){r&1&&(N(0,"main")(1,"div",0)(2,"div",1)(3,"h1"),B(4,"EasyOrder"),R()(),N(5,"div",2)(6,"h1"),B(7,"Brak Projektu!"),R()(),fe(8,"div",3),R()())},styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;padding:32px;position:relative;background:#000!important;color:#ffa700}.displaybox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center;position:relative}.logo[_ngcontent-%COMP%]{display:flex;font-size:45%;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center;margin-bottom:48px}body[_ngcontent-%COMP%]{background:#000!important;color:#ffa700}h1[_ngcontent-%COMP%]{font-size:200%}"]})}return e})();var ND=(()=>{class e{navigationService;constructor(n){this.navigationService=n,Ee(Le.firebaseConfig)}goToPage(n){this.navigationService.NavigateTo(n)}deleteaccount(){let n=se(),r=sessionStorage.getItem("userId"),i=re(n,`Owners/${r}`);mo(i).then(()=>{console.log("owner deleted successfully"),this.navigationService.NavigateTo("landingpage")}).catch(s=>{console.error("Error deleting table:",s)})}static \u0275fac=function(r){return new(r||e)(Q(Te))};static \u0275cmp=oe({type:e,selectors:[["app-restaurantsettings"]],standalone:!0,features:[ae],decls:19,vars:0,consts:[[1,"displaybox"],[1,"logo"],[1,"buttons"],[1,"alltablesqrcodes",3,"click"],[1,"tablesettings",3,"click"],[1,"waitersoptions",3,"click"],[1,"myrestaaurants",3,"click"],[1,"deleteaccount",3,"click"],[1,"footstatic"]],template:function(r,i){r&1&&(N(0,"main")(1,"div",0)(2,"div",1)(3,"h1"),B(4,"EasyOrder"),R()(),N(5,"div",2)(6,"button",3),X("click",function(){return i.goToPage("alltablesqrcodes")}),B(7,"Pobierz kody QR Stolik\xF3w"),R(),N(8,"button",4),X("click",function(){return i.goToPage("tablesettings")}),B(9,"Ustawienia Stolik\xF3w"),R(),N(10,"button",5),X("click",function(){return i.goToPage("waitersettings")}),B(11,"Opcje dotycz\u0105ce kelner\xF3w"),R(),N(12,"button",6),X("click",function(){return i.goToPage("changerestaurant")}),B(13,"Moje restauracje"),R(),N(14,"button",6),X("click",function(){return i.goToPage("newrestaurant")}),B(15,"Dodaj restauracje"),R(),N(16,"button",7),X("click",function(){return i.deleteaccount()}),B(17,"Usu\u0144 Konto"),R()(),fe(18,"div",8),R()())},styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;padding:16px;position:relative}.displaybox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center;position:relative}.logo[_ngcontent-%COMP%]{display:flex;font-size:45%;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center;margin-bottom:48px}.buttons[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center}.buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;background:#fff;padding:24px;font-size:110%;color:#000;font-weight:600;letter-spacing:2px;border:1px solid #000000;transition:all .5s;margin-bottom:24px}"]})}return e})();var RD=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275cmp=oe({type:e,selectors:[["app-restaurantrevievs"]],standalone:!0,features:[ae],decls:2,vars:0,template:function(r,i){r&1&&(N(0,"p"),B(1,"restaurantrevievs works!"),R())}})}return e})();var OD=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275cmp=oe({type:e,selectors:[["app-restaurantstats"]],standalone:!0,features:[ae],decls:2,vars:0,template:function(r,i){r&1&&(N(0,"p"),B(1,"restaurantstats works!"),R())}})}return e})();function I6(e,t){e&1&&(N(0,"p"),B(1,"Brak stolik\xF3w przypisanych do restauracji."),R())}function D6(e,t){if(e&1){let n=At();N(0,"button",6),X("click",function(){let i=pt(n).$implicit,s=nt(2);return gt(s.setTable(i.id))}),B(1),R()}if(e&2){let n=t.$implicit;ee(),Wt(" ",n.name," ")}}function S6(e,t){if(e&1&&Dn(0,D6,2,1,"button",5,In),e&2){let n=nt();Sn(n.tables)}}var PD=(()=>{class e{navigationService;tables=[];constructor(n){this.navigationService=n;let r=Ee(Le.firebaseConfig)}ngOnInit(){this.loadTables()}loadTables(){let n=se(),r=localStorage.getItem("currentRestaurant"),i=sessionStorage.getItem("userId");if(!r){console.error("No current restaurant found in local storage");return}let s=re(n,`Owners/${i}/Restaurants/${r}/Tables`);Ne(s).then(c=>{if(c.exists()){let h=c.val();this.tables=Object.values(h)}else console.log("No tables found")}).catch(c=>{console.error("Error loading tables:",c)})}setTable(n){localStorage.setItem("currentTable",n),this.goToPage("tableedit")}goToPage(n){this.navigationService.NavigateTo(n)}static \u0275fac=function(r){return new(r||e)(Q(Te))};static \u0275cmp=oe({type:e,selectors:[["app-tablemanage"]],standalone:!0,features:[ae],decls:13,vars:1,consts:[[1,"displaybox"],[1,"logo"],[1,"buttons"],[1,"footstatic"],[3,"click"],[1,"table-button"],[1,"table-button",3,"click"]],template:function(r,i){r&1&&(N(0,"main")(1,"div",0)(2,"div",1)(3,"h1"),B(4,"EasyOrder"),R()(),N(5,"div",2),on(6,I6,2,0,"p")(7,S6,2,0),R(),N(8,"div",3)(9,"button",4),X("click",function(){return i.goToPage("tablecreate")}),B(10,"Dodaj stolik"),R(),N(11,"button",4),X("click",function(){return i.goToPage("tablegroupmanage")}),B(12,"Edytuj grupy"),R()()()()),r&2&&(ee(6),Kt(i.tables.length===0?6:7))},styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;padding:16px;position:relative}.displaybox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center;position:relative}.logo[_ngcontent-%COMP%]{display:flex;font-size:45%;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center;margin-bottom:48px}.buttons[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:flex-start;align-items:center;align-content:center}.buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{text-align:left;width:100%;background:#fff;padding:24px;font-size:110%;color:#000;font-weight:600;letter-spacing:2px;border:1px solid #000000;transition:all .5s;margin-bottom:24px}.footstatic[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center}.footstatic[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:calc(100% - 16px);background:#fff;padding:24px;font-size:110%;color:#000;font-weight:600;letter-spacing:2px;border:1px solid #000000;transition:all .5s;margin-bottom:24px;margin-right:8px}"]})}return e})();var kD=(()=>{class e{navigationService;name="";description="";constructor(n){this.navigationService=n,Ee(Le.firebaseConfig)}onSubmit(n){n.preventDefault();let r=Date.now().toString(),i="0g",s=localStorage.getItem("currentRestaurant");if(!s){alert("Nie wybrano restauracji.");return}let c={id:r,group_id:i,name:this.name,is_blocked:!1,description:this.description?this.description:""};this.saveTable(c,s)}saveTable(n,r){let i=se(),s=re(i,`Owners/${sessionStorage.getItem("userId")}/Restaurants/${r}/Tables`);Bt(s,{[n.id]:n}).then(()=>{console.log("Stolik dodany pomy\u015Blnie:",n),this.navigationService.NavigateTo("tablemanage"),this.resetForm()}).catch(c=>{console.error("B\u0142\u0105d podczas dodawania stolika:",c)})}resetForm(){this.name="",this.description=""}static \u0275fac=function(r){return new(r||e)(Q(Te))};static \u0275cmp=oe({type:e,selectors:[["app-tablecreate"]],standalone:!0,features:[ae],decls:14,vars:2,consts:[[1,"displaybox"],[1,"logo"],[1,"buttons"],[3,"ngSubmit"],["type","text","id","name","name","name","placeholder","Nazwa Stolika","required","",3,"ngModelChange","ngModel"],["type","text","id","description","name","description","placeholder","Opis . . . ",3,"ngModelChange","ngModel"],["type","submit",1,"addtable"],[1,"footstatic"]],template:function(r,i){r&1&&(N(0,"main")(1,"div",0)(2,"div",1)(3,"h1"),B(4,"EasyOrder"),R()(),N(5,"div",2)(6,"form",3),X("ngSubmit",function(c){return i.onSubmit(c)}),N(7,"div")(8,"input",4),Mt("ngModelChange",function(c){return kt(i.name,c)||(i.name=c),c}),R()(),N(9,"div")(10,"input",5),Mt("ngModelChange",function(c){return kt(i.description,c)||(i.description=c),c}),R()(),N(11,"button",6),B(12,"Dodaj stolik"),R()()(),fe(13,"div",7),R()()),r&2&&(ee(8),Tt("ngModel",i.name),ee(2),Tt("ngModel",i.description))},dependencies:[sn,ti,An,$n,ei,nr,On,Fr],styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;padding:16px;position:relative}.displaybox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center;position:relative}.logo[_ngcontent-%COMP%]{display:flex;font-size:45%;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center;margin-bottom:48px}.buttons[_ngcontent-%COMP%]{width:100%;border:1px solid #000000;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:flex-start;align-items:center;align-content:center}.buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;background:#fff;padding:24px;font-size:110%;color:#000;font-weight:600;letter-spacing:2px;border:1px solid #000000;transition:all .5s;margin-bottom:24px}.footstatic[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center}.footstatic[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:calc(100% - 16px);background:#fff;padding:24px;font-size:110%;color:#000;font-weight:600;letter-spacing:2px;border:1px solid #000000;transition:all .5s;margin-bottom:24px;margin-right:8px}form[_ngcontent-%COMP%]{width:100%;padding:24px;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;border:1px solid #000000;height:24px;margin-bottom:16px}input[_ngcontent-%COMP%]:last-child{height:100px}"]})}return e})();function A6(e,t){if(e&1){let n=At();N(0,"button",9),X("click",function(){pt(n);let i=nt(2);return gt(i.blockTable())}),B(1,"Zablokuj"),R()}}function T6(e,t){if(e&1){let n=At();N(0,"button",9),X("click",function(){pt(n);let i=nt(2);return gt(i.unlockTable())}),B(1,"Odblokuj"),R()}}function M6(e,t){if(e&1&&on(0,A6,2,0,"button")(1,T6,2,0,"button"),e&2){let n=nt();Kt((n.table==null?null:n.table.is_blocked)==!1?0:-1),ee(),Kt((n.table==null?null:n.table.is_blocked)==!0?1:-1)}}var LD=(()=>{class e{navigationService;tableId=null;table=null;tableGroupName=null;groupColor=null;tableBlockAllowed=!0;restaurantId="";constructor(n){this.navigationService=n,Ee(Le.firebaseConfig)}ngOnInit(){this.loadTable(),this.loadSettings()}loadSettings(){let n=sessionStorage.getItem("userId");if(this.restaurantId=localStorage.getItem("currentRestaurant")??"",!n||!this.restaurantId){console.error("Missing owner or restaurant ID");return}let r=se(),i=re(r,`Owners/${n}/Restaurants/${this.restaurantId}/settings`);Ne(i).then(s=>{if(s.exists()){let c=s.val();this.tableBlockAllowed=c.table_block_allowed}else console.log("No settings found for this restaurant")}).catch(s=>{console.error("Error loading settings:",s)})}deleteTable(){let n=se(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant");if(!this.tableId||!r||!i){console.error("Missing table, owner, or restaurant ID");return}let s=re(n,`Owners/${r}/Restaurants/${i}/Tables/${this.tableId}`);mo(s).then(()=>{console.log("Table deleted successfully"),this.navigationService.NavigateTo("tablemanage")}).catch(c=>{console.error("Error deleting table:",c)})}blockTable(){let n=se(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant");if(!this.tableId||!r||!i){console.error("Missing table, owner, or restaurant ID");return}let s=re(n,`Owners/${r}/Restaurants/${i}/Tables/${this.tableId}`);Bt(s,{is_blocked:!0}).then(()=>{console.log("Table blocked successfully"),location.reload()}).catch(c=>{console.error("Error blocking table:",c)})}unlockTable(){let n=se(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant");if(!this.tableId||!r||!i){console.error("Missing table, owner, or restaurant ID");return}let s=re(n,`Owners/${r}/Restaurants/${i}/Tables/${this.tableId}`);Bt(s,{is_blocked:!1}).then(()=>{console.log("Table unlocked successfully"),location.reload()}).catch(c=>{console.error("Error blocking table:",c)})}saveTable(){}showQRCode(){this.navigationService.NavigateTo("showtableqr")}loadTable(){if(this.tableId=localStorage.getItem("currentTable"),!this.tableId){console.error("No current table found in local storage");return}let n=se(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant"),s=re(n,`Owners/${r}/Restaurants/${i}/Tables/${this.tableId}`);Ne(s).then(c=>{c.exists()?(this.table=c.val(),this.loadTableGroup()):console.log("No table found")}).catch(c=>{console.error("Error loading table:",c)})}loadTableGroup(){let n=se(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant");if(!this.table?.group_id||this.table.group_id==="0g"){this.tableGroupName="Stoliki bez grupy",this.groupColor="#000000";return}let s=re(n,`Owners/${r}/Restaurants/${i}/TableGroups/${this.table.group_id}`);Ne(s).then(c=>{if(c.exists()){let h=c.val();this.tableGroupName=h.name,this.groupColor=h.color}else console.log("No group found for this table")}).catch(c=>{console.error("Error loading group:",c)})}static \u0275fac=function(r){return new(r||e)(Q(Te))};static \u0275cmp=oe({type:e,selectors:[["app-tableedit"]],standalone:!0,features:[ae],decls:25,vars:6,consts:[[1,"displaybox"],[1,"logo"],[1,"flexcontainer"],[1,"buttons"],[1,"colorbar"],[1,"head"],["name","description","id","description","placeholder","Description","readonly","",3,"value"],[1,"actionbtns"],[1,"arow"],[3,"click"],[1,"footstatic"]],template:function(r,i){r&1&&(N(0,"main")(1,"div",0)(2,"div",1)(3,"h1"),B(4,"EasyOrder"),R()(),N(5,"div",2)(6,"div",3),fe(7,"div",4),N(8,"div",5)(9,"h3"),B(10),R(),N(11,"h3"),B(12),R()(),fe(13,"textarea",6),N(14,"div",7)(15,"div",8)(16,"button",9),X("click",function(){return i.deleteTable()}),B(17,"Usu\u0144 stolik"),R(),on(18,M6,2,2),R(),N(19,"div",8)(20,"button"),B(21,"Usu\u0144 zam\xF3wienie"),R(),N(22,"button",9),X("click",function(){return i.showQRCode()}),B(23,"poka\u017C kod qr"),R()()()()(),fe(24,"div",10),R()()),r&2&&(ee(7),Bd("background-color",i.groupColor),ee(3),fr(i.table==null?null:i.table.name),ee(2),fr(i.tableGroupName),ee(),kr("value",i.table==null?null:i.table.description),ee(5),Kt(i.tableBlockAllowed==!0?18:-1))},styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;padding:16px;position:relative}.displaybox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center;position:relative}.flexcontainer[_ngcontent-%COMP%]{width:100%}.logo[_ngcontent-%COMP%]{display:flex;font-size:45%;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center;margin-bottom:48px}.buttons[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center;border:1px solid #000000}.buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:calc(100% - 24px);background:#fff;padding:24px;font-size:110%;color:#000;font-weight:600;letter-spacing:2px;border:1px solid #000000;transition:all .5s}.footstatic[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center}.footstatic[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;background:#fff;padding:24px;font-size:110%;color:#000;font-weight:600;letter-spacing:2px;border:1px solid #000000;transition:all .5s;margin-bottom:24px;margin-right:8px}.arow[_ngcontent-%COMP%]{width:calc(100% - 24px);display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:space-evenly;align-items:center;align-content:center}.arow[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:95%;width:calc(100% - 24px);margin-bottom:16px}.arow[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-child{margin-right:8px}.arow[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-child{margin-left:8px}.actionbtns[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center}.colorbar[_ngcontent-%COMP%]{height:24px;width:100%}.savebtn[_ngcontent-%COMP%]{margin-top:16px;margin-bottom:16px}.head[_ngcontent-%COMP%]{width:100%;padding:8px;display:flex;flex-direction:row;justify-content:space-between;align-items:center;align-content:center}.head[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0}textarea[_ngcontent-%COMP%]{width:calc(100% - 24px);height:100px;margin-bottom:16px;resize:none;border:1px solid #000000}"]})}return e})();var FD=(()=>{class e{route;router;tableId=null;uniqueLinkToken=null;ownerId=null;restaurantid=null;constructor(n,r){this.route=n,this.router=r,Ee(Le.firebaseConfig)}ngOnInit(){this.route.queryParams.subscribe(n=>{this.tableId=n.tableid||null,this.uniqueLinkToken=n.uniqueLinkToken||null,this.ownerId=n.ownerid||null,this.restaurantid=n.restaurantid||null})}setTable(n){let r=localStorage.getItem("currentRestaurant"),i=se();if(!this.ownerId||!this.restaurantid||!this.tableId||!this.uniqueLinkToken){console.error("Missing required data");return}let s=re(i,`Owners/${this.ownerId}/Restaurants/${r}/settings`);Ne(s).then(c=>{c.exists()?c.val().order_number_typed_by_waiter_required?this.verifyOrderNumber(n):this.saveTableAssignment(n):console.error("Settings not found")}).catch(c=>{console.error("Error loading settings:",c)})}verifyOrderNumber(n){let r=se(),i=re(r,`Owners/${this.ownerId}/Restaurants/${this.restaurantid}/Orders`);Ne(i).then(s=>{if(s.exists()){let c=s.val();Object.values(c).some(g=>g.name===n)?this.saveTableAssignment(n):console.error("Order not found")}else console.log("No orders found")}).catch(s=>{console.error("Error checking order number:",s)})}saveTableAssignment(n){localStorage.setItem("customercurrentTable",this.tableId),localStorage.setItem("uniqueLinkToken",this.uniqueLinkToken),localStorage.setItem("orderNumber",n),localStorage.setItem("restaurantid",this.restaurantid),localStorage.setItem("ownerid",this.ownerId),this.router.navigate(["/tableordered"])}static \u0275fac=function(r){return new(r||e)(Q(Kr),Q(Jr))};static \u0275cmp=oe({type:e,selectors:[["app-settable"]],standalone:!0,features:[ae],decls:13,vars:0,consts:[["orderNumberInput",""],[1,"displaybox"],[1,"logo"],[1,"buttons"],["type","number","placeholder","numer zam\xF3wienia"],[3,"click"],[1,"footstatic"]],template:function(r,i){if(r&1){let s=At();N(0,"main")(1,"div",1)(2,"div",2)(3,"h1"),B(4,"EasyOrder"),R()(),N(5,"div",3)(6,"label"),B(7,"Wprowad\u017A numer zam\xF3wienia"),R(),fe(8,"input",4,0),N(10,"button",5),X("click",function(){pt(s);let h=jd(9);return gt(i.setTable(h.value))}),B(11,"Przypisz stolik"),R()(),fe(12,"div",6),R()()}}})}return e})();function N6(e,t){if(e&1){let n=At();N(0,"div",8),X("dragstart",function(i){let s=pt(n).$implicit,c=nt();return gt(c.onDragStart(i,s))}),N(1,"button",9),X("click",function(){let i=pt(n).$implicit,s=nt();return gt(s.setTable(i.id))}),B(2),R()()}if(e&2){let n=t.$implicit;ee(2),Wt(" ",n.name," ")}}function R6(e,t){if(e&1){let n=At();N(0,"div",8),X("dragstart",function(i){let s=pt(n).$implicit,c=nt(2);return gt(c.onDragStart(i,s))}),N(1,"button",9),X("click",function(){let i=pt(n).$implicit,s=nt(2);return gt(s.setTable(i.id))}),B(2),R()()}if(e&2){let n=t.$implicit;ee(2),Wt(" ",n.name," ")}}function O6(e,t){if(e&1){let n=At();N(0,"div",2),X("dragover",function(i){pt(n);let s=nt();return gt(s.allowDrop(i))})("drop",function(i){let s=pt(n).$implicit,c=nt();return gt(c.onDrop(i,s.id))}),N(1,"div",3)(2,"h3"),B(3),R()(),Dn(4,R6,3,1,"div",4,In),R()}if(e&2){let n=t.$implicit,r=nt();ee(3),fr(n.name),ee(),Sn(r.getTablesForGroup(n.id))}}var BD=(()=>{class e{navigationService;cd;tableGroups=[];tables=[];draggedTableId=null;ungroupedTables=[];constructor(n,r){this.navigationService=n,this.cd=r,Ee(Le.firebaseConfig)}ngOnInit(){this.loadGroupsAndTables()}loadGroupsAndTables(){let n=se(),r=localStorage.getItem("currentRestaurant"),i=sessionStorage.getItem("userId");if(!r){console.error("No current restaurant found in local storage");return}let s=re(n,`Owners/${i}/Restaurants/${r}/Tables`),c=re(n,`Owners/${i}/Restaurants/${r}/TableGroups`);Ne(s).then(h=>{h.exists()?(this.tables=Object.values(h.val()),this.ungroupedTables=this.tables.filter(g=>g.group_id==="0g")):console.log("No tables found")}).catch(h=>{console.error("Error loading tables:",h)}),Ne(c).then(h=>{h.exists()?this.tableGroups=Object.values(h.val()):console.log("No table groups found")}).catch(h=>{console.error("Error loading table groups:",h)})}getTablesForGroup(n){return this.tables.filter(r=>r.group_id===n)}onDragStart(n,r){this.draggedTableId=r.id,n.dataTransfer?.setData("text",r.id)}onDrop(n,r){n.preventDefault();let i=this.draggedTableId||n.dataTransfer?.getData("text");if(i){let s=this.tables.find(c=>c.id===i);s&&(s.group_id==="0g"&&(this.ungroupedTables=this.ungroupedTables.filter(c=>c.id!==s.id)),s.group_id=r,r==="0g"&&this.ungroupedTables.push(s),this.updateTableGroup(s),this.cd.detectChanges(),this.draggedTableId=null)}}allowDrop(n){n.preventDefault()}updateTableGroup(n){let r=se(),i=localStorage.getItem("currentRestaurant"),s=sessionStorage.getItem("userId");if(!i){console.error("No current restaurant found in local storage");return}let c=re(r,`Owners/${s}/Restaurants/${i}/Tables/${n.id}`);Bt(c,{group_id:n.group_id}).then(()=>{console.log(`Table ${n.name} moved to group ${n.group_id}`)}).catch(h=>{console.error("Error updating table group:",h)})}setTable(n){localStorage.setItem("currentTable",n),this.goToPage("tableedit")}goToPage(n){this.navigationService.NavigateTo(n)}static \u0275fac=function(r){return new(r||e)(Q(Te),Q(Si))};static \u0275cmp=oe({type:e,selectors:[["app-tablegroupmanage"]],standalone:!0,features:[ae],decls:16,vars:0,consts:[[1,"displaybox"],[1,"logo"],[1,"table-group",3,"dragover","drop"],[1,"head"],["draggable","true"],[1,"table-group"],[1,"footstatic"],[3,"click"],["draggable","true",3,"dragstart"],[1,"table-button",3,"click"]],template:function(r,i){r&1&&(N(0,"main")(1,"div",0)(2,"div",1)(3,"h1"),B(4,"EasyOrder"),R()(),N(5,"div",2),X("dragover",function(c){return i.allowDrop(c)})("drop",function(c){return i.onDrop(c,"0g")}),N(6,"div",3)(7,"h3"),B(8,"Stoliki bez grupy"),R()(),Dn(9,N6,3,1,"div",4,In),R(),Dn(11,O6,6,1,"div",5,In),N(13,"div",6)(14,"button",7),X("click",function(){return i.goToPage("tablegroupcreate")}),B(15,"Dodaj now\u0105 grup\u0119"),R()()()()),r&2&&(ee(9),Sn(i.ungroupedTables),ee(2),Sn(i.tableGroups))},styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;padding:16px;position:relative}.displaybox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center;position:relative}.logo[_ngcontent-%COMP%]{display:flex;font-size:45%;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center;margin-bottom:48px}.buttons[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:flex-start;align-items:center;align-content:center}.buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{text-align:left;width:100%;background:#fff;padding:24px;font-size:110%;color:#000;font-weight:600;letter-spacing:2px;border:1px solid #000000;transition:all .5s;margin-bottom:24px}.footstatic[_ngcontent-%COMP%]{width:100%}.footstatic[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;background:#fff;padding:24px;font-size:110%;color:#000;font-weight:600;letter-spacing:2px;border:1px solid #000000;transition:all .5s;margin-bottom:24px;margin-right:8px}.table-group[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:flex-start;align-items:flex-start;align-content:center;border:1px solid #000000;padding:0;margin-bottom:20px;min-height:100px}.table-group[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{width:100%;padding:8px;height:40px;font-size:100%;border:1px solid #000000}.table-group[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0}.table-group[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:100%}.table-button[_ngcontent-%COMP%]{width:100%;border:1px solid #000000;height:60px;display:block;text-align:left;margin-bottom:0;padding:8px;font-weight:700}.table-group[_ngcontent-%COMP%]:hover{background-color:#f1f1f1}"]})}return e})();var VD=(()=>{class e{navigationService;name="";description="";color="";location="";constructor(n){this.navigationService=n,Ee(Le.firebaseConfig)}onSubmit(n){n.preventDefault();let r=Date.now().toString(),i=localStorage.getItem("currentRestaurant");if(!i){alert("Nie wybrano restauracji.");return}let s={id:r,name:this.name,color:this.color,description:this.description?this.description:"",location:this.location?this.location:""};this.saveTableGroup(s,i)}saveTableGroup(n,r){let i=se(),s=re(i,`Owners/${sessionStorage.getItem("userId")}/Restaurants/${r}/TableGroups`);Bt(s,{[n.id]:n}).then(()=>{console.log("Grupa stolik\xF3w dodana pomy\u015Blnie:",n),this.navigationService.NavigateTo("tablegroupmanage"),this.resetForm()}).catch(c=>{console.error("B\u0142\u0105d podczas dodawania grupy stolik\xF3w:",c)})}resetForm(){this.name="",this.description="",this.color="",this.location=""}static \u0275fac=function(r){return new(r||e)(Q(Te))};static \u0275cmp=oe({type:e,selectors:[["app-tablegroupcreate"]],standalone:!0,features:[ae],decls:18,vars:4,consts:[[1,"displaybox"],[1,"logo"],[1,"buttons"],[3,"ngSubmit"],["type","text","id","name","name","name","placeholder","Nazwa Grupy Stolika","required","",3,"ngModelChange","ngModel"],["type","text","id","description","name","description","placeholder","Opis grupy . . . ",3,"ngModelChange","ngModel"],["type","color","id","color","name","color","placeholder","Kolor grupy",3,"ngModelChange","ngModel"],["type","text","id","location","name","location","placeholder","Lokalizacja grupy",3,"ngModelChange","ngModel"],["type","submit",1,"addtable"],[1,"footstatic"]],template:function(r,i){r&1&&(N(0,"main")(1,"div",0)(2,"div",1)(3,"h1"),B(4,"EasyOrder"),R()(),N(5,"div",2)(6,"form",3),X("ngSubmit",function(c){return i.onSubmit(c)}),N(7,"div")(8,"input",4),Mt("ngModelChange",function(c){return kt(i.name,c)||(i.name=c),c}),R()(),N(9,"div")(10,"input",5),Mt("ngModelChange",function(c){return kt(i.description,c)||(i.description=c),c}),R()(),N(11,"div")(12,"input",6),Mt("ngModelChange",function(c){return kt(i.color,c)||(i.color=c),c}),R()(),N(13,"div")(14,"input",7),Mt("ngModelChange",function(c){return kt(i.location,c)||(i.location=c),c}),R()(),N(15,"button",8),B(16,"Dodaj grup\u0119 stolik\xF3w"),R()()(),fe(17,"div",9),R()()),r&2&&(ee(8),Tt("ngModel",i.name),ee(2),Tt("ngModel",i.description),ee(2),Tt("ngModel",i.color),ee(2),Tt("ngModel",i.location))},dependencies:[sn,ti,An,$n,ei,nr,On,Fr]})}return e})();var ja=kw(US(),1);var AB=["qrcElement"],Ua=(()=>{class e{constructor(n,r){this.renderer=n,this.sanitizer=r,this.allowEmptyString=!1,this.colorDark="#000000ff",this.colorLight="#ffffffff",this.cssClass="qrcode",this.elementType="canvas",this.errorCorrectionLevel="M",this.margin=4,this.qrdata="",this.scale=4,this.width=10,this.qrCodeURL=new St,this.context=null}ngOnChanges(){return Yt(this,null,function*(){yield this.createQRCode()})}isValidQrCodeText(n){return this.allowEmptyString===!1?!(typeof n>"u"||n===""||n==="null"||n===null):!(typeof n>"u")}toDataURL(n){return new Promise((r,i)=>{(0,ja.toDataURL)(this.qrdata,n,(s,c)=>{s?i(s):r(c)})})}toCanvas(n,r){return new Promise((i,s)=>{(0,ja.toCanvas)(n,this.qrdata,r,c=>{c?s(c):i("success")})})}toSVG(n){return new Promise((r,i)=>{(0,ja.toString)(this.qrdata,n,(s,c)=>{s?i(s):r(c)})})}renderElement(n){for(let r of this.qrcElement.nativeElement.childNodes)this.renderer.removeChild(this.qrcElement.nativeElement,r);this.renderer.appendChild(this.qrcElement.nativeElement,n)}createQRCode(){return Yt(this,null,function*(){this.version&&this.version>40?(console.warn("[angularx-qrcode] max value for `version` is 40"),this.version=40):this.version&&this.version<1?(console.warn("[angularx-qrcode]`min value for `version` is 1"),this.version=1):this.version!==void 0&&isNaN(this.version)&&(console.warn("[angularx-qrcode] version should be a number, defaulting to auto."),this.version=void 0);try{if(!this.isValidQrCodeText(this.qrdata))throw new Error("[angularx-qrcode] Field `qrdata` is empty, set 'allowEmptyString=\"true\"' to overwrite this behaviour.");this.isValidQrCodeText(this.qrdata)&&this.qrdata===""&&(this.qrdata=" ");let n={color:{dark:this.colorDark,light:this.colorLight},errorCorrectionLevel:this.errorCorrectionLevel,margin:this.margin,scale:this.scale,version:this.version,width:this.width},r=this.imageSrc,i=this.imageHeight||40,s=this.imageWidth||40;switch(this.elementType){case"canvas":{let c=this.renderer.createElement("canvas");this.context=c.getContext("2d"),this.toCanvas(c,n).then(()=>{if(this.ariaLabel&&this.renderer.setAttribute(c,"aria-label",`${this.ariaLabel}`),this.title&&this.renderer.setAttribute(c,"title",`${this.title}`),r&&this.context){this.centerImage=new Image(s,i),r!==this.centerImage.src&&(this.centerImage.crossOrigin="anonymous",this.centerImage.src=r),i!==this.centerImage.height&&(this.centerImage.height=i),s!==this.centerImage.width&&(this.centerImage.width=s);let h=this.centerImage;h&&(h.onload=()=>{this.context?.drawImage(h,c.width/2-s/2,c.height/2-i/2,s,i)})}this.renderElement(c),this.emitQRCodeURL(c)}).catch(h=>{console.error("[angularx-qrcode] canvas error:",h)});break}case"svg":{let c=this.renderer.createElement("div");this.toSVG(n).then(h=>{this.renderer.setProperty(c,"innerHTML",h);let g=c.firstChild;this.renderer.setAttribute(g,"height",`${this.width}`),this.renderer.setAttribute(g,"width",`${this.width}`),this.renderElement(g),this.emitQRCodeURL(g)}).catch(h=>{console.error("[angularx-qrcode] svg error:",h)});break}case"url":case"img":default:{let c=this.renderer.createElement("img");this.toDataURL(n).then(h=>{this.alt&&c.setAttribute("alt",this.alt),this.ariaLabel&&c.setAttribute("aria-label",this.ariaLabel),c.setAttribute("src",h),this.title&&c.setAttribute("title",this.title),this.renderElement(c),this.emitQRCodeURL(c)}).catch(h=>{console.error("[angularx-qrcode] img/url error:",h)})}}}catch(n){console.error("[angularx-qrcode] Error generating QR Code:",n.message)}})}convertBase64ImageUrlToBlob(n){let r=n.split(";base64,"),i=r[0].split(":")[1],s=atob(r[1]),c=new Uint8Array(s.length);for(let h=0;h<s.length;++h)c[h]=s.charCodeAt(h);return new Blob([c],{type:i})}emitQRCodeURL(n){let r=n.constructor.name;if(r===SVGSVGElement.name){let g=n.outerHTML,m=new Blob([g],{type:"image/svg+xml"}),_=URL.createObjectURL(m),x=this.sanitizer.bypassSecurityTrustUrl(_);this.qrCodeURL.emit(x);return}let i="";r===HTMLCanvasElement.name&&(i=n.toDataURL("image/png")),r===HTMLImageElement.name&&(i=n.src);let s=this.convertBase64ImageUrlToBlob(i),c=URL.createObjectURL(s),h=this.sanitizer.bypassSecurityTrustUrl(c);this.qrCodeURL.emit(h)}static{this.\u0275fac=function(r){return new(r||e)(Q(io),Q(V0))}}static{this.\u0275cmp=oe({type:e,selectors:[["qrcode"]],viewQuery:function(r,i){if(r&1&&Vd(AB,7),r&2){let s;Sl(s=Al())&&(i.qrcElement=s.first)}},inputs:{allowEmptyString:"allowEmptyString",colorDark:"colorDark",colorLight:"colorLight",cssClass:"cssClass",elementType:"elementType",errorCorrectionLevel:"errorCorrectionLevel",imageSrc:"imageSrc",imageHeight:"imageHeight",imageWidth:"imageWidth",margin:"margin",qrdata:"qrdata",scale:"scale",version:"version",width:"width",alt:"alt",ariaLabel:"ariaLabel",title:"title"},outputs:{qrCodeURL:"qrCodeURL"},features:[xi],decls:2,vars:2,consts:[["qrcElement",""]],template:function(r,i){r&1&&fe(0,"div",null,0),r&2&&_x(i.cssClass)},encapsulation:2,changeDetection:0})}}return e})(),Ha=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=wi({type:e})}static{this.\u0275inj=yi({})}}return e})();var HS=(()=>{class e{navigationService;tableId=null;table=null;tableGroupName=null;groupColor=null;uniqueLinkToken=null;ownerId=null;restaurantId=null;constructor(n){this.navigationService=n,Ee(Le.firebaseConfig)}ngOnInit(){this.loadTable(),this.loadUniqueLinkToken()}loadUniqueLinkToken(){let n=se();this.ownerId=sessionStorage.getItem("userId"),this.restaurantId=localStorage.getItem("currentRestaurant");let r=re(n,`Owners/${this.ownerId}/Restaurants/${this.restaurantId}/uniqueLinkToken`);Ne(r).then(i=>{i.exists()?this.uniqueLinkToken=i.val():console.log("No unique link token found")}).catch(i=>{console.error("Error loading unique link token:",i)})}deleteTable(){let n=se(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant");if(!this.tableId||!r||!i){console.error("Missing table, owner, or restaurant ID");return}let s=re(n,`Owners/${r}/Restaurants/${i}/Tables/${this.tableId}`);mo(s).then(()=>{console.log("Table deleted successfully"),this.navigationService.NavigateTo("tablemanage")}).catch(c=>{console.error("Error deleting table:",c)})}blockTable(){let n=se(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant");if(!this.tableId||!r||!i){console.error("Missing table, owner, or restaurant ID");return}let s=re(n,`Owners/${r}/Restaurants/${i}/Tables/${this.tableId}`);Bt(s,{is_blocked:!0}).then(()=>{console.log("Table blocked successfully"),location.reload()}).catch(c=>{console.error("Error blocking table:",c)})}unlockTable(){let n=se(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant");if(!this.tableId||!r||!i){console.error("Missing table, owner, or restaurant ID");return}let s=re(n,`Owners/${r}/Restaurants/${i}/Tables/${this.tableId}`);Bt(s,{is_blocked:!1}).then(()=>{console.log("Table unlocked successfully"),location.reload()}).catch(c=>{console.error("Error unlocking table:",c)})}saveTable(){}loadTable(){if(this.tableId=localStorage.getItem("currentTable"),!this.tableId){console.error("No current table found in local storage");return}let n=se(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant"),s=re(n,`Owners/${r}/Restaurants/${i}/Tables/${this.tableId}`);Ne(s).then(c=>{c.exists()?(this.table=c.val(),this.loadTableGroup()):console.log("No table found")}).catch(c=>{console.error("Error loading table:",c)})}loadTableGroup(){let n=se(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant");if(!this.table?.group_id||this.table.group_id==="0g"){this.tableGroupName="Stoliki bez grupy",this.groupColor="#000000";return}let s=re(n,`Owners/${r}/Restaurants/${i}/TableGroups/${this.table.group_id}`);Ne(s).then(c=>{if(c.exists()){let h=c.val();this.tableGroupName=h.name,this.groupColor=h.color}else console.log("No group found for this table")}).catch(c=>{console.error("Error loading group:",c)})}getQRCodeData(){let n=this.table?.id||"",r=this.uniqueLinkToken||"",i=sessionStorage.getItem("userId"),s=localStorage.getItem("currentRestaurant");return`https://easyorder.mandarin.com.pl/settable?tableid=${n}&uniqueLinkToken=${r}&ownerid=${i}&restaurantid=${s}`}static \u0275fac=function(r){return new(r||e)(Q(Te))};static \u0275cmp=oe({type:e,selectors:[["app-showtableqr"]],standalone:!0,features:[ae],decls:3,vars:13,consts:[[1,"qrcodeImage"],[3,"qrdata","allowEmptyString","alt","ariaLabel","cssClass","colorDark","colorLight","elementType","errorCorrectionLevel","margin","scale","title","width"]],template:function(r,i){r&1&&(N(0,"main")(1,"div",0),fe(2,"qrcode",1),R()()),r&2&&(ee(2),kr("qrdata","https://easyorder.mandarin.com.pl/settable?tableid="+i.tableId+"&uniqueLinkToken="+i.uniqueLinkToken+"&ownerid="+i.ownerId+"&restaurantid="+i.restaurantId)("allowEmptyString",!0)("alt","A custom alt attribute")("ariaLabel","QR Code image with the following content...")("cssClass","center")("colorDark","#000000ff")("colorLight","#ffffffff")("elementType","img")("errorCorrectionLevel","H")("margin",4)("scale",1)("title","A custom title attribute")("width",300))},dependencies:[Ha,Ua]})}return e})();var zS=(()=>{class e{tableChangeAllowed=!1;tableBlockAllowed=!1;restaurantId=null;constructor(){Ee(Le.firebaseConfig)}ngOnInit(){this.loadSettings()}loadSettings(){let n=sessionStorage.getItem("userId");if(this.restaurantId=localStorage.getItem("currentRestaurant"),!n||!this.restaurantId){console.error("Missing owner or restaurant ID");return}let r=se(),i=re(r,`Owners/${n}/Restaurants/${this.restaurantId}/settings`);Ne(i).then(s=>{if(s.exists()){let c=s.val();this.tableChangeAllowed=c.table_change_allowed,this.tableBlockAllowed=c.table_block_allowed}else console.log("No settings found for this restaurant")}).catch(s=>{console.error("Error loading settings:",s)})}toggleTableChangeAllowed(){this.tableChangeAllowed=!this.tableChangeAllowed,this.saveSettings()}toggleTableBlockAllowed(){this.tableBlockAllowed=!this.tableBlockAllowed,this.saveSettings()}saveSettings(){let n=sessionStorage.getItem("userId");if(!n||!this.restaurantId){console.error("Missing owner or restaurant ID");return}let r=se(),i=re(r,`Owners/${n}/Restaurants/${this.restaurantId}/settings`);Bt(i,{table_change_allowed:this.tableChangeAllowed,table_block_allowed:this.tableBlockAllowed}).then(()=>{console.log("Settings updated successfully")}).catch(s=>{console.error("Error updating settings:",s)})}static \u0275fac=function(r){return new(r||e)};static \u0275cmp=oe({type:e,selectors:[["app-tablesettings"]],standalone:!0,features:[ae],decls:15,vars:2,consts:[[1,"displaybox"],[1,"logo"],[1,"buttons"],[3,"click"],[1,"footstatic"]],template:function(r,i){r&1&&(N(0,"main")(1,"div",0)(2,"div",1)(3,"h1"),B(4,"EasyOrder"),R()(),N(5,"div",2)(6,"label"),B(7,"Opcja Zmiany stolika:"),R(),N(8,"button",3),X("click",function(){return i.toggleTableChangeAllowed()}),B(9),R(),N(10,"label"),B(11,"Opcja blokowania stolik\xF3w:"),R(),N(12,"button",3),X("click",function(){return i.toggleTableBlockAllowed()}),B(13),R()(),fe(14,"div",4),R()()),r&2&&(ee(9),Wt(" ",i.tableChangeAllowed?"W\u0142\u0105czona":"Wy\u0142\u0105czona"," "),ee(4),Wt(" ",i.tableBlockAllowed?"W\u0142\u0105czona":"Wy\u0142\u0105czona"," "))}})}return e})();var TB=["pin"],WS=(()=>{class e{navigationService;order_number_typed_by_waiter_required=!1;waiter_access_pin=1234;restaurantId=null;pinRef;constructor(n){this.navigationService=n,Ee(Le.firebaseConfig)}ngOnInit(){this.loadSettings()}ngAfterViewInit(){this.pinRef||console.error("PIN input element not found")}goToPage(n){this.navigationService.NavigateTo(n)}loadSettings(){let n=sessionStorage.getItem("userId");if(this.restaurantId=localStorage.getItem("currentRestaurant"),!n||!this.restaurantId){console.error("Missing owner or restaurant ID");return}let r=se(),i=re(r,`Owners/${n}/Restaurants/${this.restaurantId}/settings`);Ne(i).then(s=>{if(s.exists()){let c=s.val();this.order_number_typed_by_waiter_required=c.order_number_typed_by_waiter_required,this.waiter_access_pin=c.waiter_access_pin}else console.log("No settings found for this restaurant")}).catch(s=>{console.error("Error loading settings:",s)})}toggleTableChangeAllowed(){this.order_number_typed_by_waiter_required=!this.order_number_typed_by_waiter_required,this.saveSettings()}toggleTableBlockAllowed(){this.pinRef&&this.pinRef.nativeElement?(this.waiter_access_pin=this.pinRef.nativeElement.value,this.saveSettings()):console.error("PIN input element not available")}saveSettings(){let n=sessionStorage.getItem("userId");if(!n||!this.restaurantId){console.error("Missing owner or restaurant ID");return}let r=se(),i=re(r,`Owners/${n}/Restaurants/${this.restaurantId}/settings`);Bt(i,{order_number_typed_by_waiter_required:this.order_number_typed_by_waiter_required,waiter_access_pin:this.waiter_access_pin}).then(()=>{console.log("Settings updated successfully")}).catch(s=>{console.error("Error updating settings:",s)})}static \u0275fac=function(r){return new(r||e)(Q(Te))};static \u0275cmp=oe({type:e,selectors:[["app-waitersettings"]],viewQuery:function(r,i){if(r&1&&Vd(TB,5),r&2){let s;Sl(s=Al())&&(i.pinRef=s.first)}},standalone:!0,features:[ae],decls:19,vars:2,consts:[["pin",""],[1,"displaybox"],[1,"logo"],[1,"buttons"],[3,"click"],["type","number",3,"value"],[1,"myrestaaurants",3,"click"],[1,"footstatic"]],template:function(r,i){if(r&1){let s=At();N(0,"main")(1,"div",1)(2,"div",2)(3,"h1"),B(4,"EasyOrder"),R()(),N(5,"div",3)(6,"label"),B(7,"Opcja Zmiany stolika:"),R(),N(8,"button",4),X("click",function(){return pt(s),gt(i.toggleTableChangeAllowed())}),B(9),R(),N(10,"label"),B(11,"Opcja blokowania stolik\xF3w:"),R(),fe(12,"input",5,0),N(14,"button",4),X("click",function(){return pt(s),gt(i.toggleTableBlockAllowed())}),B(15,"Update PIN"),R(),N(16,"button",6),X("click",function(){return pt(s),gt(i.goToPage("waiterqrcode"))}),B(17,"Poka\u017C kod qr dla kelner\xF3w"),R()(),fe(18,"div",7),R()()}r&2&&(ee(9),Wt(" ",i.order_number_typed_by_waiter_required?"W\u0142\u0105czona":"Wy\u0142\u0105czona"," "),ee(3),kr("value",i.waiter_access_pin))}})}return e})();function MB(e,t){if(e&1&&(N(0,"div",2),fe(1,"qrcode",3),R()),e&2){let n=t.$implicit,r=nt();ee(),kr("qrdata",r.getQRCodeData(n.id))("allowEmptyString",!0)("alt","QR code for table "+n.name)("cssClass","center")("colorDark","#000000ff")("colorLight","#ffffffff")("elementType","img")("errorCorrectionLevel","H")("margin",4)("scale",1)("width",300)}}var GS=(()=>{class e{tables=[];uniqueLinkToken=null;constructor(){Ee(Le.firebaseConfig)}ngOnInit(){this.loadTables(),this.loadUniqueLinkToken()}loadTables(){let n=sessionStorage.getItem("userId"),r=localStorage.getItem("currentRestaurant");if(!n||!r){console.error("Missing owner or restaurant ID");return}let i=se(),s=re(i,`Owners/${n}/Restaurants/${r}/Tables`);Ne(s).then(c=>{c.exists()?this.tables=Object.values(c.val()):console.log("No tables found")}).catch(c=>{console.error("Error loading tables:",c)})}loadUniqueLinkToken(){let n=se(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant"),s=re(n,`Owners/${r}/Restaurants/${i}/uniqueLinkToken`);Ne(s).then(c=>{c.exists()?this.uniqueLinkToken=c.val():console.log("No unique link token found")}).catch(c=>{console.error("Error loading unique link token:",c)})}getQRCodeData(n){let r=this.uniqueLinkToken||"",i=sessionStorage.getItem("userId"),s=localStorage.getItem("currentRestaurant");return`https://easyorder.mandarin.com.pl/settable?tableid=${n}&uniqueLinkToken=${r}&ownerid=${i}&restaurantid=${s}`}printQRCodePage(){window.print()}static \u0275fac=function(r){return new(r||e)};static \u0275cmp=oe({type:e,selectors:[["app-alltableqrcodes"]],standalone:!0,features:[ae],decls:6,vars:0,consts:[[3,"click"],[1,"qr-code-container"],[1,"qr-container"],[3,"qrdata","allowEmptyString","alt","cssClass","colorDark","colorLight","elementType","errorCorrectionLevel","margin","scale","width"]],template:function(r,i){r&1&&(N(0,"div")(1,"button",0),X("click",function(){return i.printQRCodePage()}),B(2,"Print QR Codes"),R()(),N(3,"div",1),Dn(4,MB,2,11,"div",2,In),R()),r&2&&(ee(4),Sn(i.tables))},dependencies:[Ha,Ua],styles:[".qr-code-container[_ngcontent-%COMP%]{width:100%;min-height:max-content;display:flex;flex-wrap:wrap;justify-content:center}.qr-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;flex-wrap:nowrap;width:375px;height:565px;background:url(https://cdn1.mandarin.com.pl/qrbg2.png) no-repeat center center;background-size:cover;margin:10px;padding:10px;text-align:center;border:1px dashed black}@media print{button[_ngcontent-%COMP%]{display:none}.qr-code-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-between;margin:0;padding:0}.qr-code-box[_ngcontent-%COMP%]{width:calc(50% - 10px);height:565px;margin:5px;text-align:center;page-break-inside:avoid}.qr-code-container[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:nth-child(2n){page-break-after:always}body[_ngcontent-%COMP%]{background-color:#fff;margin:0}}"]})}return e})();var $S=(()=>{class e{constructor(){Ee(oh.firebaseConfig)}getOrderList(n){let r=se(),i=re(r,`Owners/${sessionStorage.getItem("userId")}/Restaurants/${n}/Orders`);return new Be(s=>(xD(i,c=>{if(c.exists()){let h=c.val();s.next(Object.values(h))}else s.next([])},c=>{s.error(c)}),()=>{}))}static \u0275fac=function(r){return new(r||e)};static \u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function RB(e,t){e&1&&(N(0,"h2"),B(1,"Loading order status..."),R())}function OB(e,t){if(e&1&&(N(0,"h2"),B(1),R()),e&2){let n=nt(2);ee(),Wt(" ",n.status||"Status not available","")}}function PB(e,t){if(e&1&&on(0,OB,2,1,"h2"),e&2){let n=t.$implicit,r=nt();Kt(n.table_id==r.tableId?0:-1)}}function kB(e,t){e&1&&(N(0,"h2"),B(1,"No current order found."),R())}function LB(e,t){if(e&1){let n=At();N(0,"button",5),X("click",function(){pt(n);let i=nt();return gt(i.changetable())}),B(1,"Zmie\u0144 stolik"),R()}}var qS=(()=>{class e{databaseService;navigationService;tableId=null;uniqueLinkToken=null;orderNumber=null;ownerId=null;restaurantid=null;orderList=null;updateSubscription=null;status;constructor(n,r){this.databaseService=n,this.navigationService=r,Ee(Le.firebaseConfig)}ngOnInit(){this.tableId=localStorage.getItem("customercurrentTable"),this.uniqueLinkToken=localStorage.getItem("uniqueLinkToken"),this.orderNumber=localStorage.getItem("orderNumber"),this.restaurantid=localStorage.getItem("restaurantid"),this.ownerId=localStorage.getItem("ownerid"),this.orderNumber?this.processOrder(this.orderNumber):console.error("Order number is missing"),this.startOrderUpdates()}ngOnDestroy(){this.updateSubscription?.unsubscribe()}processOrder(n){if(!this.ownerId||!this.restaurantid||!this.tableId||!this.uniqueLinkToken){console.error("Missing required data");return}let r=se(),i=re(r,`Owners/${this.ownerId}/Restaurants/${this.restaurantid}/Orders`);Ne(i).then(s=>{if(s.exists()){let c=s.val(),h=Object.keys(c).find(g=>c[g].name===n);h?this.updateOrderWithTable(h):this.createNewOrder(n)}else console.log("No orders found, creating a new order"),this.createNewOrder(n)}).catch(s=>{console.error("Error checking orders:",s)})}updateOrderWithTable(n){let r=se(),i=re(r,`Owners/${this.ownerId}/Restaurants/${this.restaurantid}/Orders/${n}`);Bt(i,{table_id:this.tableId}).then(()=>{console.log("Order updated with table ID successfully")}).catch(s=>{console.error("Error updating order:",s)})}createNewOrder(n){let r=se(),i={name:n,waiter_get_order_at_table:!1,created_at:Date.now(),canceled_at:null,completed_at:null,table_id:this.tableId,waiter_set_order_number:!0,table_id_entered_by_waiter:!0,completed_during_table_clean:!1},s=re(r,`Owners/${this.ownerId}/Restaurants/${this.restaurantid}/Orders`),c=Date.now().toString();Bt(s,{[c]:i}).then(()=>{console.log("New order created successfully:",i)}).catch(h=>{console.error("Error creating new order:",h)})}startOrderUpdates(){if(!this.restaurantid){console.error("Restaurant ID is missing");return}this.updateSubscription=pp(0,15e3).subscribe(()=>{this.databaseService.getOrderList(this.restaurantid).subscribe(n=>{this.orderList=n.map(r=>Pe(J({},r),{status:this.getOrderStatus(r)}))})})}changetable(){this.navigationService.NavigateTo("scanqrcode")}getOrderStatus(n){n.canceled_at?this.status="Anulowano":n.completed_at?this.status="Zrealizowane":n.created_at?this.status="W realizacji":this.status="Nieznany status"}static \u0275fac=function(r){return new(r||e)(Q($S),Q(Te))};static \u0275cmp=oe({type:e,selectors:[["app-tableordered"]],standalone:!0,features:[ae],decls:12,vars:3,consts:[[1,"displaybox"],[1,"logo"],[1,"buttons"],[1,"addtable"],[1,"footstatic"],[1,"addtable",3,"click"]],template:function(r,i){r&1&&(N(0,"main")(1,"div",0)(2,"div",1)(3,"h1"),B(4,"EasyOrder"),R()(),N(5,"div",2),on(6,RB,2,0,"h2"),Dn(7,PB,1,1,null,null,In),on(9,kB,2,0,"h2")(10,LB,2,0,"button",3),R(),fe(11,"div",4),R()()),r&2&&(ee(6),Kt(i.orderList===null?6:-1),ee(),Sn(i.orderList),ee(2),Kt(i.orderList&&i.orderList.length===0?9:-1),ee(),Kt(i.orderList&&i.orderList.length<=1?10:-1))},styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;padding:16px;position:relative}.displaybox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center;position:relative}.logo[_ngcontent-%COMP%]{display:flex;font-size:45%;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center;margin-bottom:48px}.buttons[_ngcontent-%COMP%]{width:100%;border:none;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:flex-start;align-items:center;align-content:center}.buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;background:#fff;padding:24px;font-size:110%;color:#000;font-weight:600;letter-spacing:2px;border:1px solid #000000;transition:all .5s;margin-bottom:24px}.footstatic[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center}.footstatic[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:calc(100% - 16px);background:#fff;padding:24px;font-size:110%;color:#000;font-weight:600;letter-spacing:2px;border:1px solid #000000;transition:all .5s;margin-bottom:24px;margin-right:8px}form[_ngcontent-%COMP%]{width:100%;padding:24px;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;border:1px solid #000000;height:24px;margin-bottom:16px}input[_ngcontent-%COMP%]:last-child{height:100px}"]})}return e})();var ne=function(e){return e[e.QR_CODE=0]="QR_CODE",e[e.AZTEC=1]="AZTEC",e[e.CODABAR=2]="CODABAR",e[e.CODE_39=3]="CODE_39",e[e.CODE_93=4]="CODE_93",e[e.CODE_128=5]="CODE_128",e[e.DATA_MATRIX=6]="DATA_MATRIX",e[e.MAXICODE=7]="MAXICODE",e[e.ITF=8]="ITF",e[e.EAN_13=9]="EAN_13",e[e.EAN_8=10]="EAN_8",e[e.PDF_417=11]="PDF_417",e[e.RSS_14=12]="RSS_14",e[e.RSS_EXPANDED=13]="RSS_EXPANDED",e[e.UPC_A=14]="UPC_A",e[e.UPC_E=15]="UPC_E",e[e.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION",e}(ne||{}),YS=new Map([[ne.QR_CODE,"QR_CODE"],[ne.AZTEC,"AZTEC"],[ne.CODABAR,"CODABAR"],[ne.CODE_39,"CODE_39"],[ne.CODE_93,"CODE_93"],[ne.CODE_128,"CODE_128"],[ne.DATA_MATRIX,"DATA_MATRIX"],[ne.MAXICODE,"MAXICODE"],[ne.ITF,"ITF"],[ne.EAN_13,"EAN_13"],[ne.EAN_8,"EAN_8"],[ne.PDF_417,"PDF_417"],[ne.RSS_14,"RSS_14"],[ne.RSS_EXPANDED,"RSS_EXPANDED"],[ne.UPC_A,"UPC_A"],[ne.UPC_E,"UPC_E"],[ne.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]);function ZS(e){return Object.values(ne).includes(e)}var ai=function(e){return e[e.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",e[e.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE",e}(ai||{}),qn=function(){function e(){}return e.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",e.SCAN_DEFAULT_FPS=2,e.DEFAULT_DISABLE_FLIP=!1,e.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,e.DEFAULT_SUPPORTED_SCAN_TYPE=[ai.SCAN_TYPE_CAMERA,ai.SCAN_TYPE_FILE],e}();var yh=function(){function e(t,n){this.format=t,this.formatName=n}return e.prototype.toString=function(){return this.formatName},e.create=function(t){if(!YS.has(t))throw"".concat(t," not in html5QrcodeSupportedFormatsTextMap");return new e(t,YS.get(t))},e}();var Qy=function(){function e(){}return e.createFromText=function(t){var n={text:t};return{decodedText:t,result:n}},e.createFromQrcodeResult=function(t){return{decodedText:t.text,result:t}},e}();var QS=function(e){return e[e.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",e[e.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",e[e.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR",e}(QS||{}),wh=function(){function e(){}return e.createFrom=function(t){return{errorMessage:t,type:QS.UNKWOWN_ERROR}},e}();var Ch=function(){function e(t){this.verbose=t}return e.prototype.log=function(t){this.verbose&&console.log(t)},e.prototype.warn=function(t){this.verbose&&console.warn(t)},e.prototype.logError=function(t,n){(this.verbose||n===!0)&&console.error(t)},e.prototype.logErrors=function(t){if(t.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(t)},e}();function wr(e){return typeof e>"u"||e===null}function XS(e,t,n){return e>n?n:e<t?t:e}var xo=function(){function e(){}return e.codeParseError=function(t){return"QR code parse error, error = ".concat(t)},e.errorGettingUserMedia=function(t){return"Error getting userMedia, error = ".concat(t)},e.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},e.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},e.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},e.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},e.scannerPaused=function(){return"Scanner paused"},e}();var Xe=function(){function e(){}return e.scanningStatus=function(){return"Scanning"},e.idleStatus=function(){return"Idle"},e.errorStatus=function(){return"Error"},e.permissionStatus=function(){return"Permission"},e.noCameraFoundErrorStatus=function(){return"No Cameras"},e.lastMatch=function(t){return"Last Match: ".concat(t)},e.codeScannerTitle=function(){return"Code Scanner"},e.cameraPermissionTitle=function(){return"Request Camera Permissions"},e.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},e.noCameraFound=function(){return"No camera found"},e.scanButtonStopScanningText=function(){return"Stop Scanning"},e.scanButtonStartScanningText=function(){return"Start Scanning"},e.torchOnButton=function(){return"Switch On Torch"},e.torchOffButton=function(){return"Switch Off Torch"},e.torchOnFailedMessage=function(){return"Failed to turn on torch"},e.torchOffFailedMessage=function(){return"Failed to turn off torch"},e.scanButtonScanningStarting=function(){return"Launching Camera..."},e.textIfCameraScanSelected=function(){return"Scan an Image File"},e.textIfFileScanSelected=function(){return"Scan using camera directly"},e.selectCamera=function(){return"Select Camera"},e.fileSelectionChooseImage=function(){return"Choose Image"},e.fileSelectionChooseAnother=function(){return"Choose Another"},e.fileSelectionNoImageSelected=function(){return"No image choosen"},e.anonymousCameraPrefix=function(){return"Anonymous Camera"},e.dragAndDropMessage=function(){return"Or drop an image to scan"},e.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},e.zoom=function(){return"zoom"},e.loadingImage=function(){return"Loading image..."},e.cameraScanAltText=function(){return"Camera based scan"},e.fileScanAltText=function(){return"Fule based scan"},e}();var Xy=function(){function e(){}return e.poweredBy=function(){return"Powered by "},e.reportIssues=function(){return"Report issues"},e}();var Ky=function(){function e(){}return e.isMediaStreamConstraintsValid=function(t,n){if(typeof t!="object"){var r=typeof t;return n.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(r,"."),!0),!1}for(var i=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],s=new Set(i),c=Object.keys(t),h=0,g=c;h<g.length;h++){var m=g[h];if(s.has(m))return n.logError("".concat(m," is not supported videoConstaints."),!0),!1}return!0},e}();var ft=kw(JS());var Jy=function(){function e(t,n,r){if(this.formatMap=new Map([[ne.QR_CODE,ft.BarcodeFormat.QR_CODE],[ne.AZTEC,ft.BarcodeFormat.AZTEC],[ne.CODABAR,ft.BarcodeFormat.CODABAR],[ne.CODE_39,ft.BarcodeFormat.CODE_39],[ne.CODE_93,ft.BarcodeFormat.CODE_93],[ne.CODE_128,ft.BarcodeFormat.CODE_128],[ne.DATA_MATRIX,ft.BarcodeFormat.DATA_MATRIX],[ne.MAXICODE,ft.BarcodeFormat.MAXICODE],[ne.ITF,ft.BarcodeFormat.ITF],[ne.EAN_13,ft.BarcodeFormat.EAN_13],[ne.EAN_8,ft.BarcodeFormat.EAN_8],[ne.PDF_417,ft.BarcodeFormat.PDF_417],[ne.RSS_14,ft.BarcodeFormat.RSS_14],[ne.RSS_EXPANDED,ft.BarcodeFormat.RSS_EXPANDED],[ne.UPC_A,ft.BarcodeFormat.UPC_A],[ne.UPC_E,ft.BarcodeFormat.UPC_E],[ne.UPC_EAN_EXTENSION,ft.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!ft)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=n,this.logger=r;var i=this.createZXingFormats(t),s=new Map;s.set(ft.DecodeHintType.POSSIBLE_FORMATS,i),s.set(ft.DecodeHintType.TRY_HARDER,!1),this.hints=s}return e.prototype.decodeAsync=function(t){var n=this;return new Promise(function(r,i){try{r(n.decode(t))}catch(s){i(s)}})},e.prototype.decode=function(t){var n=new ft.MultiFormatReader(this.verbose,this.hints),r=new ft.HTMLCanvasElementLuminanceSource(t),i=new ft.BinaryBitmap(new ft.HybridBinarizer(r)),s=n.decode(i);return{text:s.text,format:yh.create(this.toHtml5QrcodeSupportedFormats(s.format)),debugData:this.createDebugData()}},e.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(n,r,i){t.set(n,r)}),t},e.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},e.prototype.createZXingFormats=function(t){for(var n=[],r=0,i=t;r<i.length;r++){var s=i[r];this.formatMap.has(s)?n.push(this.formatMap.get(s)):this.logger.logError("".concat(s," is not supported by")+"ZXingHtml5QrcodeShim")}return n},e.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},e}();var FB=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(c){c(s)})}return new(n||(n=Promise))(function(s,c){function h(_){try{m(r.next(_))}catch(x){c(x)}}function g(_){try{m(r.throw(_))}catch(x){c(x)}}function m(_){_.done?s(_.value):i(_.value).then(h,g)}m((r=r.apply(e,t||[])).next())})},BB=function(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,c;return c={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function h(m){return function(_){return g([m,_])}}function g(m){if(r)throw new TypeError("Generator is already executing.");for(;c&&(c=0,m[0]&&(n=0)),n;)try{if(r=1,i&&(s=m[0]&2?i.return:m[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,m[1])).done)return s;switch(i=0,s&&(m=[m[0]&2,s.value]),m[0]){case 0:case 1:s=m;break;case 4:return n.label++,{value:m[1],done:!1};case 5:n.label++,i=m[1],m=[0];continue;case 7:m=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(m[0]===6||m[0]===2)){n=0;continue}if(m[0]===3&&(!s||m[1]>s[0]&&m[1]<s[3])){n.label=m[1];break}if(m[0]===6&&n.label<s[1]){n.label=s[1],s=m;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(m);break}s[2]&&n.ops.pop(),n.trys.pop();continue}m=t.call(e,n)}catch(_){m=[6,_],i=0}finally{r=s=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},ew=function(){function e(t,n,r){if(this.formatMap=new Map([[ne.QR_CODE,"qr_code"],[ne.AZTEC,"aztec"],[ne.CODABAR,"codabar"],[ne.CODE_39,"code_39"],[ne.CODE_93,"code_93"],[ne.CODE_128,"code_128"],[ne.DATA_MATRIX,"data_matrix"],[ne.ITF,"itf"],[ne.EAN_13,"ean_13"],[ne.EAN_8,"ean_8"],[ne.PDF_417,"pdf417"],[ne.UPC_A,"upc_a"],[ne.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!e.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=n,this.logger=r;var i=this.createBarcodeDetectorFormats(t);if(this.detector=new BarcodeDetector(i),!this.detector)throw"BarcodeDetector detector not supported"}return e.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var t=new BarcodeDetector({formats:["qr_code"]});return typeof t<"u"},e.prototype.decodeAsync=function(t){return FB(this,void 0,void 0,function(){var n,r;return BB(this,function(i){switch(i.label){case 0:return[4,this.detector.detect(t)];case 1:if(n=i.sent(),!n||n.length===0)throw"No barcode or QR code detected.";return r=this.selectLargestBarcode(n),[2,{text:r.rawValue,format:yh.create(this.toHtml5QrcodeSupportedFormats(r.format)),debugData:this.createDebugData()}]}})})},e.prototype.selectLargestBarcode=function(t){for(var n=null,r=0,i=0,s=t;i<s.length;i++){var c=s[i],h=c.boundingBox.width*c.boundingBox.height;h>r&&(r=h,n=c)}if(!n)throw"No largest barcode found";return n},e.prototype.createBarcodeDetectorFormats=function(t){for(var n=[],r=0,i=t;r<i.length;r++){var s=i[r];this.formatMap.has(s)?n.push(this.formatMap.get(s)):this.logger.warn("".concat(s," is not supported by")+"BarcodeDetectorDelegate")}return{formats:n}},e.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},e.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(n,r,i){t.set(n,r)}),t},e.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},e}();var e2=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(c){c(s)})}return new(n||(n=Promise))(function(s,c){function h(_){try{m(r.next(_))}catch(x){c(x)}}function g(_){try{m(r.throw(_))}catch(x){c(x)}}function m(_){_.done?s(_.value):i(_.value).then(h,g)}m((r=r.apply(e,t||[])).next())})},t2=function(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,c;return c={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function h(m){return function(_){return g([m,_])}}function g(m){if(r)throw new TypeError("Generator is already executing.");for(;c&&(c=0,m[0]&&(n=0)),n;)try{if(r=1,i&&(s=m[0]&2?i.return:m[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,m[1])).done)return s;switch(i=0,s&&(m=[m[0]&2,s.value]),m[0]){case 0:case 1:s=m;break;case 4:return n.label++,{value:m[1],done:!1};case 5:n.label++,i=m[1],m=[0];continue;case 7:m=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(m[0]===6||m[0]===2)){n=0;continue}if(m[0]===3&&(!s||m[1]>s[0]&&m[1]<s[3])){n.label=m[1];break}if(m[0]===6&&n.label<s[1]){n.label=s[1],s=m;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(m);break}s[2]&&n.ops.pop(),n.trys.pop();continue}m=t.call(e,n)}catch(_){m=[6,_],i=0}finally{r=s=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},n2=function(){function e(t,n,r,i){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=r,n&&ew.isSupported()?(this.primaryDecoder=new ew(t,r,i),this.secondaryDecoder=new Jy(t,r,i)):this.primaryDecoder=new Jy(t,r,i)}return e.prototype.decodeAsync=function(t){return e2(this,void 0,void 0,function(){var n;return t2(this,function(r){switch(r.label){case 0:n=performance.now(),r.label=1;case 1:return r.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(t)];case 2:return[2,r.sent()];case 3:return this.possiblyLogPerformance(n),[7];case 4:return[2]}})})},e.prototype.decodeRobustlyAsync=function(t){return e2(this,void 0,void 0,function(){var n,r;return t2(this,function(i){switch(i.label){case 0:n=performance.now(),i.label=1;case 1:return i.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(t)];case 2:return[2,i.sent()];case 3:if(r=i.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(t)];throw r;case 4:return this.possiblyLogPerformance(n),[7];case 5:return[2]}})})},e.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},e.prototype.possiblyLogPerformance=function(t){if(this.verbose){var n=performance.now()-t;this.executionResults.push(n),this.executions++,this.possiblyFlushPerformanceReport()}},e.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var t=0,n=0,r=this.executionResults;n<r.length;n++){var i=r[n];t+=i}var s=t/this.executionResults.length;console.log("".concat(s," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},e}();var tw=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),_h=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(c){c(s)})}return new(n||(n=Promise))(function(s,c){function h(_){try{m(r.next(_))}catch(x){c(x)}}function g(_){try{m(r.throw(_))}catch(x){c(x)}}function m(_){_.done?s(_.value):i(_.value).then(h,g)}m((r=r.apply(e,t||[])).next())})},xh=function(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,c;return c={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function h(m){return function(_){return g([m,_])}}function g(m){if(r)throw new TypeError("Generator is already executing.");for(;c&&(c=0,m[0]&&(n=0)),n;)try{if(r=1,i&&(s=m[0]&2?i.return:m[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,m[1])).done)return s;switch(i=0,s&&(m=[m[0]&2,s.value]),m[0]){case 0:case 1:s=m;break;case 4:return n.label++,{value:m[1],done:!1};case 5:n.label++,i=m[1],m=[0];continue;case 7:m=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(m[0]===6||m[0]===2)){n=0;continue}if(m[0]===3&&(!s||m[1]>s[0]&&m[1]<s[3])){n.label=m[1];break}if(m[0]===6&&n.label<s[1]){n.label=s[1],s=m;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(m);break}s[2]&&n.ops.pop(),n.trys.pop();continue}m=t.call(e,n)}catch(_){m=[6,_],i=0}finally{r=s=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},r2=function(){function e(t,n){this.name=t,this.track=n}return e.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},e.prototype.apply=function(t){var n={};n[this.name]=t;var r={advanced:[n]};return this.track.applyConstraints(r)},e.prototype.value=function(){var t=this.track.getSettings();if(this.name in t){var n=t[this.name];return n}return null},e}(),VB=function(e){tw(t,e);function t(n,r){return e.call(this,n,r)||this}return t.prototype.min=function(){return this.getCapabilities().min},t.prototype.max=function(){return this.getCapabilities().max},t.prototype.step=function(){return this.getCapabilities().step},t.prototype.apply=function(n){var r={};r[this.name]=n;var i={advanced:[r]};return this.track.applyConstraints(i)},t.prototype.getCapabilities=function(){this.failIfNotSupported();var n=this.track.getCapabilities(),r=n[this.name];return{min:r.min,max:r.max,step:r.step}},t.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},t}(r2),jB=function(e){tw(t,e);function t(n){return e.call(this,"zoom",n)||this}return t}(VB),UB=function(e){tw(t,e);function t(n){return e.call(this,"torch",n)||this}return t}(r2),HB=function(){function e(t){this.track=t}return e.prototype.zoomFeature=function(){return new jB(this.track)},e.prototype.torchFeature=function(){return new UB(this.track)},e}(),zB=function(){function e(t,n,r){this.isClosed=!1,this.parentElement=t,this.mediaStream=n,this.callbacks=r,this.surface=this.createVideoElement(this.parentElement.clientWidth),t.append(this.surface)}return e.prototype.createVideoElement=function(t){var n=document.createElement("video");return n.style.width="".concat(t,"px"),n.style.display="block",n.muted=!0,n.setAttribute("muted","true"),n.playsInline=!0,n},e.prototype.setupSurface=function(){var t=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var n=function(){var r=t.surface.clientWidth,i=t.surface.clientHeight;t.callbacks.onRenderSurfaceReady(r,i),t.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.srcObject=this.mediaStream,this.surface.play()},e.create=function(t,n,r,i){return _h(this,void 0,void 0,function(){var s,c;return xh(this,function(h){switch(h.label){case 0:return s=new e(t,n,i),r.aspectRatio?(c={aspectRatio:r.aspectRatio},[4,s.getFirstTrackOrFail().applyConstraints(c)]):[3,2];case 1:h.sent(),h.label=2;case 2:return s.setupSurface(),[2,s]}})})},e.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},e.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},e.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},e.prototype.resume=function(t){this.failIfClosed();var n=this,r=function(){setTimeout(t,200),n.surface.removeEventListener("playing",r)};this.surface.addEventListener("playing",r),this.surface.play()},e.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},e.prototype.getSurface=function(){return this.failIfClosed(),this.surface},e.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},e.prototype.applyVideoConstraints=function(t){return _h(this,void 0,void 0,function(){return xh(this,function(n){if("aspectRatio"in t)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(t)]})})},e.prototype.close=function(){if(this.isClosed)return Promise.resolve();var t=this;return new Promise(function(n,r){var i=t.mediaStream.getVideoTracks(),s=i.length,c=0;t.mediaStream.getVideoTracks().forEach(function(h){t.mediaStream.removeTrack(h),h.stop(),++c,c>=s&&(t.isClosed=!0,t.parentElement.removeChild(t.surface),n())})})},e.prototype.getCapabilities=function(){return new HB(this.getFirstTrackOrFail())},e}(),i2=function(){function e(t){this.mediaStream=t}return e.prototype.render=function(t,n,r){return _h(this,void 0,void 0,function(){return xh(this,function(i){return[2,zB.create(t,this.mediaStream,n,r)]})})},e.create=function(t){return _h(this,void 0,void 0,function(){var n,r;return xh(this,function(i){switch(i.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return n={audio:!1,video:t},[4,navigator.mediaDevices.getUserMedia(n)];case 1:return r=i.sent(),[2,new e(r)]}})})},e}();var o2=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(c){c(s)})}return new(n||(n=Promise))(function(s,c){function h(_){try{m(r.next(_))}catch(x){c(x)}}function g(_){try{m(r.throw(_))}catch(x){c(x)}}function m(_){_.done?s(_.value):i(_.value).then(h,g)}m((r=r.apply(e,t||[])).next())})},s2=function(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,c;return c={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function h(m){return function(_){return g([m,_])}}function g(m){if(r)throw new TypeError("Generator is already executing.");for(;c&&(c=0,m[0]&&(n=0)),n;)try{if(r=1,i&&(s=m[0]&2?i.return:m[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,m[1])).done)return s;switch(i=0,s&&(m=[m[0]&2,s.value]),m[0]){case 0:case 1:s=m;break;case 4:return n.label++,{value:m[1],done:!1};case 5:n.label++,i=m[1],m=[0];continue;case 7:m=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(m[0]===6||m[0]===2)){n=0;continue}if(m[0]===3&&(!s||m[1]>s[0]&&m[1]<s[3])){n.label=m[1];break}if(m[0]===6&&n.label<s[1]){n.label=s[1],s=m;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(m);break}s[2]&&n.ops.pop(),n.trys.pop();continue}m=t.call(e,n)}catch(_){m=[6,_],i=0}finally{r=s=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},a2=function(){function e(){}return e.failIfNotSupported=function(){return o2(this,void 0,void 0,function(){return s2(this,function(t){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new e]})})},e.prototype.create=function(t){return o2(this,void 0,void 0,function(){return s2(this,function(n){return[2,i2.create(t)]})})},e}();var WB=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(c){c(s)})}return new(n||(n=Promise))(function(s,c){function h(_){try{m(r.next(_))}catch(x){c(x)}}function g(_){try{m(r.throw(_))}catch(x){c(x)}}function m(_){_.done?s(_.value):i(_.value).then(h,g)}m((r=r.apply(e,t||[])).next())})},GB=function(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,c;return c={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function h(m){return function(_){return g([m,_])}}function g(m){if(r)throw new TypeError("Generator is already executing.");for(;c&&(c=0,m[0]&&(n=0)),n;)try{if(r=1,i&&(s=m[0]&2?i.return:m[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,m[1])).done)return s;switch(i=0,s&&(m=[m[0]&2,s.value]),m[0]){case 0:case 1:s=m;break;case 4:return n.label++,{value:m[1],done:!1};case 5:n.label++,i=m[1],m=[0];continue;case 7:m=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(m[0]===6||m[0]===2)){n=0;continue}if(m[0]===3&&(!s||m[1]>s[0]&&m[1]<s[3])){n.label=m[1];break}if(m[0]===6&&n.label<s[1]){n.label=s[1],s=m;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(m);break}s[2]&&n.ops.pop(),n.trys.pop();continue}m=t.call(e,n)}catch(_){m=[6,_],i=0}finally{r=s=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},l2=function(){function e(){}return e.retrieve=function(){if(navigator.mediaDevices)return e.getCamerasFromMediaDevices();var t=MediaStreamTrack;return MediaStreamTrack&&t.getSources?e.getCamerasFromMediaStreamTrack():e.rejectWithError()},e.rejectWithError=function(){var t=xo.unableToQuerySupportedDevices();return e.isHttpsOrLocalhost()||(t=xo.insecureContextCameraQueryError()),Promise.reject(t)},e.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var t=location.host.split(":")[0];return t==="127.0.0.1"||t==="localhost"},e.getCamerasFromMediaDevices=function(){return WB(this,void 0,void 0,function(){var t,n,r,i,s,c,h;return GB(this,function(g){switch(g.label){case 0:return t=function(m){for(var _=m.getVideoTracks(),x=0,I=_;x<I.length;x++){var A=I[x];A.enabled=!1,A.stop(),m.removeTrack(A)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return n=g.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(r=g.sent(),i=[],s=0,c=r;s<c.length;s++)h=c[s],h.kind==="videoinput"&&i.push({id:h.deviceId,label:h.label});return t(n),[2,i]}})})},e.getCamerasFromMediaStreamTrack=function(){return new Promise(function(t,n){var r=function(s){for(var c=[],h=0,g=s;h<g.length;h++){var m=g[h];m.kind==="video"&&c.push({id:m.id,label:m.label})}t(c)},i=MediaStreamTrack;i.getSources(r)})},e}();var Nt=function(e){return e[e.UNKNOWN=0]="UNKNOWN",e[e.NOT_STARTED=1]="NOT_STARTED",e[e.SCANNING=2]="SCANNING",e[e.PAUSED=3]="PAUSED",e}(Nt||{}),$B=function(){function e(){this.state=Nt.NOT_STARTED,this.onGoingTransactionNewState=Nt.UNKNOWN}return e.prototype.directTransition=function(t){this.failIfTransitionOngoing(),this.validateTransition(t),this.state=t},e.prototype.startTransition=function(t){return this.failIfTransitionOngoing(),this.validateTransition(t),this.onGoingTransactionNewState=t,this},e.prototype.execute=function(){if(this.onGoingTransactionNewState===Nt.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var t=this.onGoingTransactionNewState;this.onGoingTransactionNewState=Nt.UNKNOWN,this.directTransition(t)},e.prototype.cancel=function(){if(this.onGoingTransactionNewState===Nt.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=Nt.UNKNOWN},e.prototype.getState=function(){return this.state},e.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==Nt.UNKNOWN)throw"Cannot transition to a new state, already under transition"},e.prototype.validateTransition=function(t){switch(this.state){case Nt.UNKNOWN:throw"Transition from unknown is not allowed";case Nt.NOT_STARTED:this.failIfNewStateIs(t,[Nt.PAUSED]);break;case Nt.SCANNING:break;case Nt.PAUSED:break}},e.prototype.failIfNewStateIs=function(t,n){for(var r=0,i=n;r<i.length;r++){var s=i[r];if(t===s)throw"Cannot transition from ".concat(this.state," to ").concat(t)}},e}(),qB=function(){function e(t){this.stateManager=t}return e.prototype.startTransition=function(t){return this.stateManager.startTransition(t)},e.prototype.directTransition=function(t){this.stateManager.directTransition(t)},e.prototype.getState=function(){return this.stateManager.getState()},e.prototype.canScanFile=function(){return this.stateManager.getState()===Nt.NOT_STARTED},e.prototype.isScanning=function(){return this.stateManager.getState()!==Nt.NOT_STARTED},e.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===Nt.SCANNING},e.prototype.isPaused=function(){return this.stateManager.getState()===Nt.PAUSED},e}();var c2=function(){function e(){}return e.create=function(){return new qB(new $B)},e}();var YB=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),rr=function(e){YB(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.DEFAULT_WIDTH=300,t.DEFAULT_WIDTH_OFFSET=2,t.FILE_SCAN_MIN_HEIGHT=300,t.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,t.MIN_QR_BOX_SIZE=50,t.SHADED_LEFT=1,t.SHADED_RIGHT=2,t.SHADED_TOP=3,t.SHADED_BOTTOM=4,t.SHADED_REGION_ELEMENT_ID="qr-shaded-region",t.VERBOSE=!1,t.BORDER_SHADER_DEFAULT_COLOR="#ffffff",t.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",t}(qn),ZB=function(){function e(t,n){this.logger=n,this.fps=rr.SCAN_DEFAULT_FPS,t?(t.fps&&(this.fps=t.fps),this.disableFlip=t.disableFlip===!0,this.qrbox=t.qrbox,this.aspectRatio=t.aspectRatio,this.videoConstraints=t.videoConstraints):this.disableFlip=rr.DEFAULT_DISABLE_FLIP}return e.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?Ky.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},e.prototype.isShadedBoxEnabled=function(){return!wr(this.qrbox)},e.create=function(t,n){return new e(t,n)},e}(),Eh=function(){function e(t,n){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(t))throw"HTML Element with id=".concat(t," not found");this.elementId=t,this.verbose=!1;var r,i;typeof n=="boolean"?this.verbose=n===!0:n&&(i=n,this.verbose=i.verbose===!0,r=i.experimentalFeatures),this.logger=new Ch(this.verbose),this.qrcode=new n2(this.getSupportedFormats(n),this.getUseBarCodeDetectorIfSupported(i),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=c2.create()}return e.prototype.start=function(t,n,r,i){var s=this;if(!t)throw"cameraIdOrConfig is required";if(!r||typeof r!="function")throw"qrCodeSuccessCallback is required and should be a function.";var c;i?c=i:c=this.verbose?this.logger.log:function(){};var h=ZB.create(n,this.logger);this.clearElement();var g=!1;h.videoConstraints&&(h.isMediaStreamConstraintsValid()?g=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var m=g,_=document.getElementById(this.elementId),x=_.clientWidth?_.clientWidth:rr.DEFAULT_WIDTH;_.style.position="relative",this.shouldScan=!0,this.element=_;var I=this,A=this.stateManagerProxy.startTransition(Nt.SCANNING);return new Promise(function(P,U){var q=m?h.videoConstraints:I.createVideoConstraints(t);if(!q){A.cancel(),U("videoConstraints should be defined");return}var W={};(!m||h.aspectRatio)&&(W.aspectRatio=h.aspectRatio);var le={onRenderSurfaceReady:function(Ke,me){I.setupUi(Ke,me,h),I.isScanning=!0,I.foreverScan(h,r,c)}};a2.failIfNotSupported().then(function(Ke){Ke.create(q).then(function(me){return me.render(s.element,W,le).then(function(z){I.renderedCamera=z,A.execute(),P(null)}).catch(function(z){A.cancel(),U(z)})}).catch(function(me){A.cancel(),U(xo.errorGettingUserMedia(me))})}).catch(function(Ke){A.cancel(),U(xo.cameraStreamingNotSupported())})})},e.prototype.pause=function(t){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(Nt.PAUSED),this.showPausedState(),(wr(t)||t!==!0)&&(t=!1),t&&this.renderedCamera&&this.renderedCamera.pause()},e.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var t=this,n=function(){t.stateManagerProxy.directTransition(Nt.SCANNING),t.hidePausedState()};if(!this.renderedCamera.isPaused()){n();return}this.renderedCamera.resume(function(){n()})},e.prototype.getState=function(){return this.stateManagerProxy.getState()},e.prototype.stop=function(){var t=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var n=this.stateManagerProxy.startTransition(Nt.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var r=function(){if(t.element){var s=document.getElementById(rr.SHADED_REGION_ELEMENT_ID);s&&t.element.removeChild(s)}},i=this;return this.renderedCamera.close().then(function(){return i.renderedCamera=null,i.element&&(i.element.removeChild(i.canvasElement),i.canvasElement=null),r(),i.qrRegion&&(i.qrRegion=null),i.context&&(i.context=null),n.execute(),i.hidePausedState(),i.isScanning=!1,Promise.resolve()})},e.prototype.scanFile=function(t,n){return this.scanFileV2(t,n).then(function(r){return r.decodedText})},e.prototype.scanFileV2=function(t,n){var r=this;if(!t||!(t instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(wr(n)&&(n=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(i,s){r.possiblyCloseLastScanImageFile(),r.clearElement(),r.lastScanImageFile=URL.createObjectURL(t);var c=new Image;c.onload=function(){var h=c.width,g=c.height,m=document.getElementById(r.elementId),_=m.clientWidth?m.clientWidth:rr.DEFAULT_WIDTH,x=Math.max(m.clientHeight?m.clientHeight:g,rr.FILE_SCAN_MIN_HEIGHT),I=r.computeCanvasDrawConfig(h,g,_,x);if(n){var A=r.createCanvasElement(_,x,"qr-canvas-visible");A.style.display="inline-block",m.appendChild(A);var P=A.getContext("2d");if(!P)throw"Unable to get 2d context from canvas";P.canvas.width=_,P.canvas.height=x,P.drawImage(c,0,0,h,g,I.x,I.y,I.width,I.height)}var U=rr.FILE_SCAN_HIDDEN_CANVAS_PADDING,q=Math.max(c.width,I.width),W=Math.max(c.height,I.height),le=q+2*U,Ke=W+2*U,me=r.createCanvasElement(le,Ke);m.appendChild(me);var z=me.getContext("2d");if(!z)throw"Unable to get 2d context from canvas";z.canvas.width=le,z.canvas.height=Ke,z.drawImage(c,0,0,h,g,U,U,q,W);try{r.qrcode.decodeRobustlyAsync(me).then(function(ue){i(Qy.createFromQrcodeResult(ue))}).catch(s)}catch(ue){s("QR code parse error, error = ".concat(ue))}},c.onerror=s,c.onabort=s,c.onstalled=s,c.onsuspend=s,c.src=URL.createObjectURL(t)})},e.prototype.clear=function(){this.clearElement()},e.getCameras=function(){return l2.retrieve()},e.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},e.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},e.prototype.applyVideoConstraints=function(t){if(t){if(!Ky.isMediaStreamConstraintsValid(t,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(t)},e.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},e.prototype.getSupportedFormats=function(t){var n=[ne.QR_CODE,ne.AZTEC,ne.CODABAR,ne.CODE_39,ne.CODE_93,ne.CODE_128,ne.DATA_MATRIX,ne.MAXICODE,ne.ITF,ne.EAN_13,ne.EAN_8,ne.PDF_417,ne.RSS_14,ne.RSS_EXPANDED,ne.UPC_A,ne.UPC_E,ne.UPC_EAN_EXTENSION];if(!t||typeof t=="boolean"||!t.formatsToSupport)return n;if(!Array.isArray(t.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(t.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var r=[],i=0,s=t.formatsToSupport;i<s.length;i++){var c=s[i];ZS(c)?r.push(c):this.logger.warn("Invalid format: ".concat(c," passed in config, ignoring."))}if(r.length===0)throw"None of formatsToSupport match supported values.";return r},e.prototype.getUseBarCodeDetectorIfSupported=function(t){if(wr(t))return!0;if(!wr(t.useBarCodeDetectorIfSupported))return t.useBarCodeDetectorIfSupported!==!1;if(wr(t.experimentalFeatures))return!0;var n=t.experimentalFeatures;return wr(n.useBarCodeDetectorIfSupported)?!0:n.useBarCodeDetectorIfSupported!==!1},e.prototype.validateQrboxSize=function(t,n,r){var i=this,s=r.qrbox;this.validateQrboxConfig(s);var c=this.toQrdimensions(t,n,s),h=function(m){if(m<rr.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(rr.MIN_QR_BOX_SIZE,"px.")},g=function(m){return m>t&&(i.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),m=t),m};h(c.width),h(c.height),c.width=g(c.width)},e.prototype.validateQrboxConfig=function(t){if(typeof t!="number"&&typeof t!="function"&&(t.width===void 0||t.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},e.prototype.toQrdimensions=function(t,n,r){if(typeof r=="number")return{width:r,height:r};if(typeof r=="function")try{return r(t,n)}catch(i){throw new Error("qrbox config was passed as a function but it failed with unknown error"+i)}return r},e.prototype.setupUi=function(t,n,r){r.isShadedBoxEnabled()&&this.validateQrboxSize(t,n,r);var i=wr(r.qrbox)?{width:t,height:n}:r.qrbox;this.validateQrboxConfig(i);var s=this.toQrdimensions(t,n,i);s.height>n&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var c=r.isShadedBoxEnabled()&&s.height<=n,h={x:0,y:0,width:t,height:n},g=c?this.getShadedRegionBounds(t,n,s):h,m=this.createCanvasElement(g.width,g.height),_={willReadFrequently:!0},x=m.getContext("2d",_);x.canvas.width=g.width,x.canvas.height=g.height,this.element.append(m),c&&this.possiblyInsertShadingElement(this.element,t,n,s),this.createScannerPausedUiElement(this.element),this.qrRegion=g,this.context=x,this.canvasElement=m},e.prototype.createScannerPausedUiElement=function(t){var n=document.createElement("div");n.innerText=xo.scannerPaused(),n.style.display="none",n.style.position="absolute",n.style.top="0px",n.style.zIndex="1",n.style.background="rgba(9, 9, 9, 0.46)",n.style.color="#FFECEC",n.style.textAlign="center",n.style.width="100%",t.appendChild(n),this.scannerPausedUiElement=n},e.prototype.scanContext=function(t,n){var r=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(i){return t(i.text,Qy.createFromQrcodeResult(i)),r.possiblyUpdateShaders(!0),!0}).catch(function(i){r.possiblyUpdateShaders(!1);var s=xo.codeParseError(i);return n(s,wh.createFrom(s)),!1})},e.prototype.foreverScan=function(t,n,r){var i=this;if(this.shouldScan&&this.renderedCamera){var s=this.renderedCamera.getSurface(),c=s.videoWidth/s.clientWidth,h=s.videoHeight/s.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var g=this.qrRegion.width*c,m=this.qrRegion.height*h,_=this.qrRegion.x*c,x=this.qrRegion.y*h;this.context.drawImage(s,_,x,g,m,0,0,this.qrRegion.width,this.qrRegion.height);var I=function(){i.foreverScanTimeout=setTimeout(function(){i.foreverScan(t,n,r)},i.getTimeoutFps(t.fps))};this.scanContext(n,r).then(function(A){!A&&t.disableFlip!==!0?(i.context.translate(i.context.canvas.width,0),i.context.scale(-1,1),i.scanContext(n,r).finally(function(){I()})):I()}).catch(function(A){i.logger.logError("Error happend while scanning context",A),I()})}},e.prototype.createVideoConstraints=function(t){if(typeof t=="string")return{deviceId:{exact:t}};if(typeof t=="object"){var n="facingMode",r="deviceId",i={user:!0,environment:!0},s="exact",c=function(P){if(P in i)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(P,"'")},h=Object.keys(t);if(h.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(h.length," keys");var g=Object.keys(t)[0];if(g!==n&&g!==r)throw"Only '".concat(n,"' and '").concat(r,"' ")+" are supported for 'cameraIdOrConfig'";if(g===n){var m=t.facingMode;if(typeof m=="string"){if(c(m))return{facingMode:m}}else if(typeof m=="object")if(s in m){if(c(m["".concat(s)]))return{facingMode:{exact:m["".concat(s)]}}}else throw"'facingMode' should be string or object with"+" ".concat(s," as key.");else{var _=typeof m;throw"Invalid type of 'facingMode' = ".concat(_)}}else{var x=t.deviceId;if(typeof x=="string")return{deviceId:x};if(typeof x=="object"){if(s in x)return{deviceId:{exact:x["".concat(s)]}};throw"'deviceId' should be string or object with"+" ".concat(s," as key.")}else{var I=typeof x;throw"Invalid type of 'deviceId' = ".concat(I)}}}var A=typeof t;throw"Invalid type of 'cameraIdOrConfig' = ".concat(A)},e.prototype.computeCanvasDrawConfig=function(t,n,r,i){if(t<=r&&n<=i){var s=(r-t)/2,c=(i-n)/2;return{x:s,y:c,width:t,height:n}}else{var h=t,g=n;return t>r&&(n=r/t*n,t=r),n>i&&(t=i/n*t,n=i),this.logger.log("Image downsampled from "+"".concat(h,"X").concat(g)+" to ".concat(t,"X").concat(n,".")),this.computeCanvasDrawConfig(t,n,r,i)}},e.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var t=document.getElementById(this.elementId);t&&(t.innerHTML="")},e.prototype.possiblyUpdateShaders=function(t){this.qrMatch!==t&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(n){n.style.backgroundColor=t?rr.BORDER_SHADER_MATCH_COLOR:rr.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=t)},e.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},e.prototype.createCanvasElement=function(t,n,r){var i=t,s=n,c=document.createElement("canvas");return c.style.width="".concat(i,"px"),c.style.height="".concat(s,"px"),c.style.display="none",c.id=wr(r)?"qr-canvas":r,c},e.prototype.getShadedRegionBounds=function(t,n,r){if(r.width>t||r.height>n)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(t-r.width)/2,y:(n-r.height)/2,width:r.width,height:r.height}},e.prototype.possiblyInsertShadingElement=function(t,n,r,i){if(!(n-i.width<1||r-i.height<1)){var s=document.createElement("div");s.style.position="absolute";var c=(n-i.width)/2,h=(r-i.height)/2;if(s.style.borderLeft="".concat(c,"px solid rgba(0, 0, 0, 0.48)"),s.style.borderRight="".concat(c,"px solid rgba(0, 0, 0, 0.48)"),s.style.borderTop="".concat(h,"px solid rgba(0, 0, 0, 0.48)"),s.style.borderBottom="".concat(h,"px solid rgba(0, 0, 0, 0.48)"),s.style.boxSizing="border-box",s.style.top="0px",s.style.bottom="0px",s.style.left="0px",s.style.right="0px",s.id="".concat(rr.SHADED_REGION_ELEMENT_ID),n-i.width<11||r-i.height<11)this.hasBorderShaders=!1;else{var g=5,m=40;this.insertShaderBorders(s,m,g,-g,null,0,!0),this.insertShaderBorders(s,m,g,-g,null,0,!1),this.insertShaderBorders(s,m,g,null,-g,0,!0),this.insertShaderBorders(s,m,g,null,-g,0,!1),this.insertShaderBorders(s,g,m+g,-g,null,-g,!0),this.insertShaderBorders(s,g,m+g,null,-g,-g,!0),this.insertShaderBorders(s,g,m+g,-g,null,-g,!1),this.insertShaderBorders(s,g,m+g,null,-g,-g,!1),this.hasBorderShaders=!0}t.append(s)}},e.prototype.insertShaderBorders=function(t,n,r,i,s,c,h){var g=document.createElement("div");g.style.position="absolute",g.style.backgroundColor=rr.BORDER_SHADER_DEFAULT_COLOR,g.style.width="".concat(n,"px"),g.style.height="".concat(r,"px"),i!==null&&(g.style.top="".concat(i,"px")),s!==null&&(g.style.bottom="".concat(s,"px")),h?g.style.left="".concat(c,"px"):g.style.right="".concat(c,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(g),t.appendChild(g)},e.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},e.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},e.prototype.getTimeoutFps=function(t){return 1e3/t},e}();var nw="data:image/svg+xml;base64,",u2=nw+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",d2=nw+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",rw=nw+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",f2="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=";var h2=function(){function e(){}return e.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},e}(),p2=function(){function e(){this.data=h2.createDefault();var t=localStorage.getItem(e.LOCAL_STORAGE_KEY);t?this.data=JSON.parse(t):this.reset()}return e.prototype.hasCameraPermissions=function(){return this.data.hasPermission},e.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},e.prototype.setHasPermission=function(t){this.data.hasPermission=t,this.flush()},e.prototype.setLastUsedCameraId=function(t){this.data.lastUsedCameraId=t,this.flush()},e.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},e.prototype.reset=function(){this.data=h2.createDefault(),this.flush()},e.prototype.flush=function(){localStorage.setItem(e.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},e.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",e}();var QB=function(){function e(){this.infoDiv=document.createElement("div")}return e.prototype.renderInto=function(t){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=Xy.poweredBy();var n=document.createElement("a");n.innerText="ScanApp",n.href="https://scanapp.org",n.target="new",n.style.color="white",this.infoDiv.appendChild(n);var r=document.createElement("br"),i=document.createElement("br");this.infoDiv.appendChild(r),this.infoDiv.appendChild(i);var s=document.createElement("a");s.innerText=Xy.reportIssues(),s.href="https://github.com/mebjas/html5-qrcode/issues",s.target="new",s.style.color="white",this.infoDiv.appendChild(s),t.appendChild(this.infoDiv)},e.prototype.show=function(){this.infoDiv.style.display="block"},e.prototype.hide=function(){this.infoDiv.style.display="none"},e}(),XB=function(){function e(t,n){this.isShowingInfoIcon=!0,this.onTapIn=t,this.onTapOut=n,this.infoIcon=document.createElement("img")}return e.prototype.renderInto=function(t){var n=this;this.infoIcon.alt="Info icon",this.infoIcon.src=rw,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(r){return n.onHoverIn()},this.infoIcon.onmouseout=function(r){return n.onHoverOut()},this.infoIcon.onclick=function(r){return n.onClick()},t.appendChild(this.infoIcon)},e.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},e.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},e.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src=f2,this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=rw,this.infoIcon.style.opacity="0.6")},e}(),g2=function(){function e(){var t=this;this.infoDiv=new QB,this.infoIcon=new XB(function(){t.infoDiv.show()},function(){t.infoDiv.hide()})}return e.prototype.renderInto=function(t){this.infoDiv.renderInto(t),this.infoIcon.renderInto(t)},e}();var KB=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(c){c(s)})}return new(n||(n=Promise))(function(s,c){function h(_){try{m(r.next(_))}catch(x){c(x)}}function g(_){try{m(r.throw(_))}catch(x){c(x)}}function m(_){_.done?s(_.value):i(_.value).then(h,g)}m((r=r.apply(e,t||[])).next())})},JB=function(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,c;return c={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function h(m){return function(_){return g([m,_])}}function g(m){if(r)throw new TypeError("Generator is already executing.");for(;c&&(c=0,m[0]&&(n=0)),n;)try{if(r=1,i&&(s=m[0]&2?i.return:m[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,m[1])).done)return s;switch(i=0,s&&(m=[m[0]&2,s.value]),m[0]){case 0:case 1:s=m;break;case 4:return n.label++,{value:m[1],done:!1};case 5:n.label++,i=m[1],m=[0];continue;case 7:m=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(m[0]===6||m[0]===2)){n=0;continue}if(m[0]===3&&(!s||m[1]>s[0]&&m[1]<s[3])){n.label=m[1];break}if(m[0]===6&&n.label<s[1]){n.label=s[1],s=m;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(m);break}s[2]&&n.ops.pop(),n.trys.pop();continue}m=t.call(e,n)}catch(_){m=[6,_],i=0}finally{r=s=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},iw=function(){function e(){}return e.hasPermissions=function(){return KB(this,void 0,void 0,function(){var t,n,r,i;return JB(this,function(s){switch(s.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(t=s.sent(),n=0,r=t;n<r.length;n++)if(i=r[n],i.kind==="videoinput"&&i.label)return[2,!0];return[2,!1]}})})},e}();var Fi=function(){function e(t){this.supportedScanTypes=this.validateAndReturnScanTypes(t)}return e.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},e.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},e.prototype.isCameraScanRequired=function(){for(var t=0,n=this.supportedScanTypes;t<n.length;t++){var r=n[t];if(e.isCameraScanType(r))return!0}return!1},e.isCameraScanType=function(t){return t===ai.SCAN_TYPE_CAMERA},e.isFileScanType=function(t){return t===ai.SCAN_TYPE_FILE},e.prototype.validateAndReturnScanTypes=function(t){if(!t||t.length===0)return qn.DEFAULT_SUPPORTED_SCAN_TYPE;var n=qn.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(t.length>n)throw"Max ".concat(n," values expected for ")+"supportedScanTypes";for(var r=0,i=t;r<i.length;r++){var s=i[r];if(!qn.DEFAULT_SUPPORTED_SCAN_TYPE.includes(s))throw"Unsupported scan type ".concat(s)}return t},e}();var an=function(){function e(){}return e.ALL_ELEMENT_CLASS="html5-qrcode-element",e.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",e.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",e.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",e.TORCH_BUTTON_ID="html5-qrcode-button-torch",e.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",e.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",e.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",e.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",e.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",e.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",e}();var Yn=function(){function e(){}return e.createElement=function(t,n){var r=document.createElement(t);return r.id=n,r.classList.add(an.ALL_ELEMENT_CLASS),t==="button"&&r.setAttribute("type","button"),r},e}();var y2=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(c){c(s)})}return new(n||(n=Promise))(function(s,c){function h(_){try{m(r.next(_))}catch(x){c(x)}}function g(_){try{m(r.throw(_))}catch(x){c(x)}}function m(_){_.done?s(_.value):i(_.value).then(h,g)}m((r=r.apply(e,t||[])).next())})},w2=function(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,c;return c={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function h(m){return function(_){return g([m,_])}}function g(m){if(r)throw new TypeError("Generator is already executing.");for(;c&&(c=0,m[0]&&(n=0)),n;)try{if(r=1,i&&(s=m[0]&2?i.return:m[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,m[1])).done)return s;switch(i=0,s&&(m=[m[0]&2,s.value]),m[0]){case 0:case 1:s=m;break;case 4:return n.label++,{value:m[1],done:!1};case 5:n.label++,i=m[1],m=[0];continue;case 7:m=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(m[0]===6||m[0]===2)){n=0;continue}if(m[0]===3&&(!s||m[1]>s[0]&&m[1]<s[3])){n.label=m[1];break}if(m[0]===6&&n.label<s[1]){n.label=s[1],s=m;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(m);break}s[2]&&n.ops.pop(),n.trys.pop();continue}m=t.call(e,n)}catch(_){m=[6,_],i=0}finally{r=s=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},m2=function(){function e(t,n,r){this.isTorchOn=!1,this.torchCapability=t,this.buttonController=n,this.onTorchActionFailureCallback=r}return e.prototype.isTorchEnabled=function(){return this.isTorchOn},e.prototype.flipState=function(){return y2(this,void 0,void 0,function(){var t,n;return w2(this,function(r){switch(r.label){case 0:this.buttonController.disable(),t=!this.isTorchOn,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.torchCapability.apply(t)];case 2:return r.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),t),[3,4];case 3:return n=r.sent(),this.propagateFailure(t,n),this.buttonController.enable(),[3,4];case 4:return[2]}})})},e.prototype.updateUiBasedOnLatestSettings=function(t,n){t===n?(this.buttonController.setText(n?Xe.torchOffButton():Xe.torchOnButton()),this.isTorchOn=n):this.propagateFailure(n),this.buttonController.enable()},e.prototype.propagateFailure=function(t,n){var r=t?Xe.torchOnFailedMessage():Xe.torchOffFailedMessage();n&&(r+="; Error = "+n),this.onTorchActionFailureCallback(r)},e.prototype.reset=function(){this.isTorchOn=!1},e}(),C2=function(){function e(t,n){this.onTorchActionFailureCallback=n,this.torchButton=Yn.createElement("button",an.TORCH_BUTTON_ID),this.torchController=new m2(t,this,n)}return e.prototype.render=function(t,n){var r=this;this.torchButton.innerText=Xe.torchOnButton(),this.torchButton.style.display=n.display,this.torchButton.style.marginLeft=n.marginLeft;var i=this;this.torchButton.addEventListener("click",function(s){return y2(r,void 0,void 0,function(){return w2(this,function(c){switch(c.label){case 0:return[4,i.torchController.flipState()];case 1:return c.sent(),i.torchController.isTorchEnabled()?(i.torchButton.classList.remove(an.TORCH_BUTTON_CLASS_TORCH_OFF),i.torchButton.classList.add(an.TORCH_BUTTON_CLASS_TORCH_ON)):(i.torchButton.classList.remove(an.TORCH_BUTTON_CLASS_TORCH_ON),i.torchButton.classList.add(an.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}})})}),t.appendChild(this.torchButton)},e.prototype.updateTorchCapability=function(t){this.torchController=new m2(t,this,this.onTorchActionFailureCallback)},e.prototype.getTorchButton=function(){return this.torchButton},e.prototype.hide=function(){this.torchButton.style.display="none"},e.prototype.show=function(){this.torchButton.style.display="inline-block"},e.prototype.disable=function(){this.torchButton.disabled=!0},e.prototype.enable=function(){this.torchButton.disabled=!1},e.prototype.setText=function(t){this.torchButton.innerText=t},e.prototype.reset=function(){this.torchButton.innerText=Xe.torchOnButton(),this.torchController.reset()},e.create=function(t,n,r,i){var s=new e(n,i);return s.render(t,r),s},e}();var v2=function(){function e(t,n,r){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=n?"block":"none",t.appendChild(this.fileBasedScanRegion);var i=document.createElement("label");i.setAttribute("for",this.getFileScanInputId()),i.style.display="inline-block",this.fileBasedScanRegion.appendChild(i),this.fileSelectionButton=Yn.createElement("button",an.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",function(h){i.click()}),i.append(this.fileSelectionButton),this.fileScanInput=Yn.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",i.appendChild(this.fileScanInput);var s=this;this.fileScanInput.addEventListener("change",function(h){if(!(h==null||h.target==null)){var g=h.target;if(!(g.files&&g.files.length===0)){var m=g.files,_=m[0],x=_.name;s.setImageNameToButton(x),r(_)}}});var c=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(c),this.fileBasedScanRegion.addEventListener("dragenter",function(h){s.fileBasedScanRegion.style.border=s.fileBasedScanRegionActiveBorder(),h.stopPropagation(),h.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragleave",function(h){s.fileBasedScanRegion.style.border=s.fileBasedScanRegionDefaultBorder(),h.stopPropagation(),h.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragover",function(h){s.fileBasedScanRegion.style.border=s.fileBasedScanRegionActiveBorder(),h.stopPropagation(),h.preventDefault()}),this.fileBasedScanRegion.addEventListener("drop",function(h){h.stopPropagation(),h.preventDefault(),s.fileBasedScanRegion.style.border=s.fileBasedScanRegionDefaultBorder();var g=h.dataTransfer;if(g){var m=g.files;if(!m||m.length===0)return;for(var _=!1,x=0;x<m.length;++x){var I=m.item(x);if(I){var A=/image.*/;if(I.type.match(A)){_=!0;var P=I.name;s.setImageNameToButton(P),r(I),c.innerText=Xe.dragAndDropMessage();break}}}_||(c.innerText=Xe.dragAndDropMessageOnlyImages())}})}return e.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},e.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},e.prototype.isShowing=function(){return this.fileBasedScanRegion.style.display==="block"},e.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},e.prototype.createFileBasedScanRegion=function(){var t=document.createElement("div");return t.style.textAlign="center",t.style.margin="auto",t.style.width="80%",t.style.maxWidth="600px",t.style.border=this.fileBasedScanRegionDefaultBorder(),t.style.padding="10px",t.style.marginBottom="10px",t},e.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},e.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},e.prototype.createDragAndDropMessage=function(){var t=document.createElement("div");return t.innerText=Xe.dragAndDropMessage(),t.style.fontWeight="400",t},e.prototype.setImageNameToButton=function(t){var n=20;if(t.length>n){var r=t.substring(0,8),i=t.length,s=t.substring(i-8,i);t="".concat(r,"....").concat(s)}var c=Xe.fileSelectionChooseAnother()+" - "+t;this.fileSelectionButton.innerText=c},e.prototype.setInitialValueToButton=function(){var t=Xe.fileSelectionChooseImage()+" - "+Xe.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=t},e.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},e.create=function(t,n,r){var i=new e(t,n,r);return i},e}();var _2=function(){function e(t){this.selectElement=Yn.createElement("select",an.CAMERA_SELECTION_SELECT_ID),this.cameras=t,this.options=[]}return e.prototype.render=function(t){var n=document.createElement("span");n.style.marginRight="10px";var r=this.cameras.length;if(r===0)throw new Error("No cameras found");if(r===1)n.style.display="none";else{var i=Xe.selectCamera();n.innerText="".concat(i," (").concat(this.cameras.length,")  ")}for(var s=1,c=0,h=this.cameras;c<h.length;c++){var g=h[c],m=g.id,_=g.label==null?m:g.label;(!_||_==="")&&(_=[Xe.anonymousCameraPrefix(),s++].join(" "));var x=document.createElement("option");x.value=m,x.innerText=_,this.options.push(x),this.selectElement.appendChild(x)}n.appendChild(this.selectElement),t.appendChild(n)},e.prototype.disable=function(){this.selectElement.disabled=!0},e.prototype.isDisabled=function(){return this.selectElement.disabled===!0},e.prototype.enable=function(){this.selectElement.disabled=!1},e.prototype.getValue=function(){return this.selectElement.value},e.prototype.hasValue=function(t){for(var n=0,r=this.options;n<r.length;n++){var i=r[n];if(i.value===t)return!0}return!1},e.prototype.setValue=function(t){if(!this.hasValue(t))throw new Error("".concat(t," is not present in the camera list."));this.selectElement.value=t},e.prototype.hasSingleItem=function(){return this.cameras.length===1},e.prototype.numCameras=function(){return this.cameras.length},e.create=function(t,n){var r=new e(n);return r.render(t),r},e}();var x2=function(){function e(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=Yn.createElement("input",an.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return e.prototype.render=function(t,n){this.zoomElementContainer.style.display=n?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",t.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var r=Xe.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(r),this.rangeText.style.marginRight="10px";var i=this;this.rangeInput.addEventListener("input",function(){return i.onValueChange()}),this.rangeInput.addEventListener("change",function(){return i.onValueChange()}),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},e.prototype.onValueChange=function(){var t=Xe.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(t),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},e.prototype.setValues=function(t,n,r,i){this.rangeInput.min=t.toString(),this.rangeInput.max=n.toString(),this.rangeInput.step=i.toString(),this.rangeInput.value=r.toString(),this.onValueChange()},e.prototype.show=function(){this.zoomElementContainer.style.display="block"},e.prototype.hide=function(){this.zoomElementContainer.style.display="none"},e.prototype.setOnCameraZoomValueChangeCallback=function(t){this.onChangeCallback=t},e.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},e.create=function(t,n){var r=new e;return r.render(t,n),r},e}();var Cr=function(e){return e[e.STATUS_DEFAULT=0]="STATUS_DEFAULT",e[e.STATUS_SUCCESS=1]="STATUS_SUCCESS",e[e.STATUS_WARNING=2]="STATUS_WARNING",e[e.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION",e}(Cr||{});function e5(e){return{fps:e.fps,qrbox:e.qrbox,aspectRatio:e.aspectRatio,disableFlip:e.disableFlip,videoConstraints:e.videoConstraints}}function t5(e,t){return{formatsToSupport:e.formatsToSupport,useBarCodeDetectorIfSupported:e.useBarCodeDetectorIfSupported,experimentalFeatures:e.experimentalFeatures,verbose:t}}var Yc=function(){function e(t,n,r){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=t,this.config=this.createConfig(n),this.verbose=r===!0,!document.getElementById(t))throw"HTML Element with id=".concat(t," not found");this.scanTypeSelector=new Fi(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new Ch(this.verbose),this.persistedDataManager=new p2,n.rememberLastUsedCamera!==!0&&this.persistedDataManager.reset()}return e.prototype.render=function(t,n){var r=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(s,c){if(t)t(s,c);else{if(r.lastMatchFound===s)return;r.lastMatchFound=s,r.setHeaderMessage(Xe.lastMatch(s),Cr.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(s,c){n&&n(s,c)};var i=document.getElementById(this.elementId);if(!i)throw"HTML Element with id=".concat(this.elementId," not found");i.innerHTML="",this.createBasicLayout(i),this.html5Qrcode=new Eh(this.getScanRegionId(),t5(this.config,this.verbose))},e.prototype.pause=function(t){(wr(t)||t!==!0)&&(t=!1),this.getHtml5QrcodeOrFail().pause(t)},e.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},e.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},e.prototype.clear=function(){var t=this,n=function(){var r=document.getElementById(t.elementId);r&&(r.innerHTML="",t.resetBasicLayout(r))};return this.html5Qrcode?new Promise(function(r,i){if(!t.html5Qrcode){r();return}t.html5Qrcode.isScanning?t.html5Qrcode.stop().then(function(s){if(!t.html5Qrcode){r();return}t.html5Qrcode.clear(),n(),r()}).catch(function(s){t.verbose&&t.logger.logError("Unable to stop qrcode scanner",s),i(s)}):(t.html5Qrcode.clear(),n(),r())}):Promise.resolve()},e.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},e.prototype.applyVideoConstraints=function(t){return this.getHtml5QrcodeOrFail().applyVideoConstraints(t)},e.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},e.prototype.createConfig=function(t){return t?(t.fps||(t.fps=qn.SCAN_DEFAULT_FPS),t.rememberLastUsedCamera!==!qn.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(t.rememberLastUsedCamera=qn.DEFAULT_REMEMBER_LAST_CAMERA_USED),t.supportedScanTypes||(t.supportedScanTypes=qn.DEFAULT_SUPPORTED_SCAN_TYPE),t):{fps:qn.SCAN_DEFAULT_FPS,rememberLastUsedCamera:qn.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:qn.DEFAULT_SUPPORTED_SCAN_TYPE}},e.prototype.createBasicLayout=function(t){t.style.position="relative",t.style.padding="0px",t.style.border="1px solid silver",this.createHeader(t);var n=document.createElement("div"),r=this.getScanRegionId();n.id=r,n.style.width="100%",n.style.minHeight="100px",n.style.textAlign="center",t.appendChild(n),Fi.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var i=document.createElement("div"),s=this.getDashboardId();i.id=s,i.style.width="100%",t.appendChild(i),this.setupInitialDashboard(i)},e.prototype.resetBasicLayout=function(t){t.style.border="none"},e.prototype.setupInitialDashboard=function(t){this.createSection(t),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},e.prototype.createHeader=function(t){var n=document.createElement("div");n.style.textAlign="left",n.style.margin="0px",t.appendChild(n);var r=new g2;r.renderInto(n);var i=document.createElement("div");i.id=this.getHeaderMessageContainerId(),i.style.display="none",i.style.textAlign="center",i.style.fontSize="14px",i.style.padding="2px 10px",i.style.margin="4px",i.style.borderTop="1px solid #f6f6f6",n.appendChild(i)},e.prototype.createSection=function(t){var n=document.createElement("div");n.id=this.getDashboardSectionId(),n.style.width="100%",n.style.padding="10px 0px 10px 0px",n.style.textAlign="left",t.appendChild(n)},e.prototype.createCameraListUi=function(t,n,r){var i=this;i.showHideScanTypeSwapLink(!1),i.setHeaderMessage(Xe.cameraPermissionRequesting());var s=function(){r||i.createPermissionButton(t,n)};Eh.getCameras().then(function(c){i.persistedDataManager.setHasPermission(!0),i.showHideScanTypeSwapLink(!0),i.resetHeaderMessage(),c&&c.length>0?(t.removeChild(n),i.renderCameraSelection(c)):(i.setHeaderMessage(Xe.noCameraFound(),Cr.STATUS_WARNING),s())}).catch(function(c){i.persistedDataManager.setHasPermission(!1),r?r.disabled=!1:s(),i.setHeaderMessage(c,Cr.STATUS_WARNING),i.showHideScanTypeSwapLink(!0)})},e.prototype.createPermissionButton=function(t,n){var r=this,i=Yn.createElement("button",this.getCameraPermissionButtonId());i.innerText=Xe.cameraPermissionTitle(),i.addEventListener("click",function(){i.disabled=!0,r.createCameraListUi(t,n,i)}),n.appendChild(i)},e.prototype.createPermissionsUi=function(t,n){var r=this;if(Fi.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()){iw.hasPermissions().then(function(i){i?r.createCameraListUi(t,n):(r.persistedDataManager.setHasPermission(!1),r.createPermissionButton(t,n))}).catch(function(i){r.persistedDataManager.setHasPermission(!1),r.createPermissionButton(t,n)});return}this.createPermissionButton(t,n)},e.prototype.createSectionControlPanel=function(){var t=document.getElementById(this.getDashboardSectionId()),n=document.createElement("div");t.appendChild(n);var r=document.createElement("div");r.id=this.getDashboardSectionCameraScanRegionId(),r.style.display=Fi.isCameraScanType(this.currentScanType)?"block":"none",n.appendChild(r);var i=document.createElement("div");i.style.textAlign="center",r.appendChild(i),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(r,i),this.renderFileScanUi(n)},e.prototype.renderFileScanUi=function(t){var n=Fi.isFileScanType(this.currentScanType),r=this,i=function(s){if(!r.html5Qrcode)throw"html5Qrcode not defined";Fi.isFileScanType(r.currentScanType)&&(r.setHeaderMessage(Xe.loadingImage()),r.html5Qrcode.scanFileV2(s,!0).then(function(c){r.resetHeaderMessage(),r.qrCodeSuccessCallback(c.decodedText,c)}).catch(function(c){r.setHeaderMessage(c,Cr.STATUS_WARNING),r.qrCodeErrorCallback(c,wh.createFrom(c))}))};this.fileSelectionUi=v2.create(t,n,i)},e.prototype.renderCameraSelection=function(t){var n=this,r=this,i=document.getElementById(this.getDashboardSectionCameraScanRegionId());i.style.textAlign="center";var s=x2.create(i,!1),c=function(U){var q=U.zoomFeature();if(q.isSupported()){s.setOnCameraZoomValueChangeCallback(function(le){q.apply(le)});var W=1;n.config.defaultZoomValueIfSupported&&(W=n.config.defaultZoomValueIfSupported),W=XS(W,q.min(),q.max()),s.setValues(q.min(),q.max(),W,q.step()),s.show()}},h=_2.create(i,t),g=document.createElement("span"),m=Yn.createElement("button",an.CAMERA_START_BUTTON_ID);m.innerText=Xe.scanButtonStartScanningText(),g.appendChild(m);var _=Yn.createElement("button",an.CAMERA_STOP_BUTTON_ID);_.innerText=Xe.scanButtonStopScanningText(),_.style.display="none",_.disabled=!0,g.appendChild(_);var x,I=function(U){if(!U.torchFeature().isSupported()){x&&x.hide();return}x?x.updateTorchCapability(U.torchFeature()):x=C2.create(g,U.torchFeature(),{display:"none",marginLeft:"5px"},function(q){r.setHeaderMessage(q,Cr.STATUS_WARNING)}),x.show()};i.appendChild(g);var A=function(U){U||(m.style.display="none"),m.innerText=Xe.scanButtonStartScanningText(),m.style.opacity="1",m.disabled=!1,U&&(m.style.display="inline-block")};if(m.addEventListener("click",function(U){m.innerText=Xe.scanButtonScanningStarting(),h.disable(),m.disabled=!0,m.style.opacity="0.5",n.scanTypeSelector.hasMoreThanOneScanType()&&r.showHideScanTypeSwapLink(!1),r.resetHeaderMessage();var q=h.getValue();r.persistedDataManager.setLastUsedCameraId(q),r.html5Qrcode.start(q,e5(r.config),r.qrCodeSuccessCallback,r.qrCodeErrorCallback).then(function(W){_.disabled=!1,_.style.display="inline-block",A(!1);var le=r.html5Qrcode.getRunningTrackCameraCapabilities();n.config.showTorchButtonIfSupported===!0&&I(le),n.config.showZoomSliderIfSupported===!0&&c(le)}).catch(function(W){r.showHideScanTypeSwapLink(!0),h.enable(),A(!0),r.setHeaderMessage(W,Cr.STATUS_WARNING)})}),h.hasSingleItem()&&m.click(),_.addEventListener("click",function(U){if(!r.html5Qrcode)throw"html5Qrcode not defined";_.disabled=!0,r.html5Qrcode.stop().then(function(q){n.scanTypeSelector.hasMoreThanOneScanType()&&r.showHideScanTypeSwapLink(!0),h.enable(),m.disabled=!1,_.style.display="none",m.style.display="inline-block",x&&(x.reset(),x.hide()),s.removeOnCameraZoomValueChangeCallback(),s.hide(),r.insertCameraScanImageToScanRegion()}).catch(function(q){_.disabled=!1,r.setHeaderMessage(q,Cr.STATUS_WARNING)})}),r.persistedDataManager.getLastUsedCameraId()){var P=r.persistedDataManager.getLastUsedCameraId();h.hasValue(P)?(h.setValue(P),m.click()):r.persistedDataManager.resetLastUsedCameraId()}},e.prototype.createSectionSwap=function(){var t=this,n=Xe.textIfCameraScanSelected(),r=Xe.textIfFileScanSelected(),i=document.getElementById(this.getDashboardSectionId()),s=document.createElement("div");s.style.textAlign="center";var c=Yn.createElement("span",this.getDashboardSectionSwapLinkId());c.style.textDecoration="underline",c.style.cursor="pointer",c.innerText=Fi.isCameraScanType(this.currentScanType)?n:r,c.addEventListener("click",function(){if(!t.sectionSwapAllowed){t.verbose&&t.logger.logError("Section swap called when not allowed");return}t.resetHeaderMessage(),t.fileSelectionUi.resetValue(),t.sectionSwapAllowed=!1,Fi.isCameraScanType(t.currentScanType)?(t.clearScanRegion(),t.getCameraScanRegion().style.display="none",t.fileSelectionUi.show(),c.innerText=r,t.currentScanType=ai.SCAN_TYPE_FILE,t.insertFileScanImageToScanRegion()):(t.clearScanRegion(),t.getCameraScanRegion().style.display="block",t.fileSelectionUi.hide(),c.innerText=n,t.currentScanType=ai.SCAN_TYPE_CAMERA,t.insertCameraScanImageToScanRegion(),t.startCameraScanIfPermissionExistsOnSwap()),t.sectionSwapAllowed=!0}),s.appendChild(c),i.appendChild(s)},e.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var t=this,n=this;if(this.persistedDataManager.hasCameraPermissions()){iw.hasPermissions().then(function(r){if(r){var i=document.getElementById(n.getCameraPermissionButtonId());if(!i)throw t.logger.logError("Permission button not found, fail;"),"Permission button not found";i.click()}else n.persistedDataManager.setHasPermission(!1)}).catch(function(r){n.persistedDataManager.setHasPermission(!1)});return}},e.prototype.resetHeaderMessage=function(){var t=document.getElementById(this.getHeaderMessageContainerId());t.style.display="none"},e.prototype.setHeaderMessage=function(t,n){n||(n=Cr.STATUS_DEFAULT);var r=this.getHeaderMessageDiv();switch(r.innerText=t,r.style.display="block",n){case Cr.STATUS_SUCCESS:r.style.background="rgba(106, 175, 80, 0.26)",r.style.color="#477735";break;case Cr.STATUS_WARNING:r.style.background="rgba(203, 36, 49, 0.14)",r.style.color="#cb2431";break;case Cr.STATUS_DEFAULT:default:r.style.background="rgba(0, 0, 0, 0)",r.style.color="rgb(17, 17, 17)";break}},e.prototype.showHideScanTypeSwapLink=function(t){this.scanTypeSelector.hasMoreThanOneScanType()&&(t!==!0&&(t=!1),this.sectionSwapAllowed=t,this.getDashboardSectionSwapLink().style.display=t?"inline-block":"none")},e.prototype.insertCameraScanImageToScanRegion=function(){var t=this,n=document.getElementById(this.getScanRegionId());if(this.cameraScanImage){n.innerHTML="<br>",n.appendChild(this.cameraScanImage);return}this.cameraScanImage=new Image,this.cameraScanImage.onload=function(r){n.innerHTML="<br>",n.appendChild(t.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=u2,this.cameraScanImage.alt=Xe.cameraScanAltText()},e.prototype.insertFileScanImageToScanRegion=function(){var t=this,n=document.getElementById(this.getScanRegionId());if(this.fileScanImage){n.innerHTML="<br>",n.appendChild(this.fileScanImage);return}this.fileScanImage=new Image,this.fileScanImage.onload=function(r){n.innerHTML="<br>",n.appendChild(t.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=d2,this.fileScanImage.alt=Xe.fileScanAltText()},e.prototype.clearScanRegion=function(){var t=document.getElementById(this.getScanRegionId());t.innerHTML=""},e.prototype.getDashboardSectionId=function(){return"".concat(this.elementId,"__dashboard_section")},e.prototype.getDashboardSectionCameraScanRegionId=function(){return"".concat(this.elementId,"__dashboard_section_csr")},e.prototype.getDashboardSectionSwapLinkId=function(){return an.SCAN_TYPE_CHANGE_ANCHOR_ID},e.prototype.getScanRegionId=function(){return"".concat(this.elementId,"__scan_region")},e.prototype.getDashboardId=function(){return"".concat(this.elementId,"__dashboard")},e.prototype.getHeaderMessageContainerId=function(){return"".concat(this.elementId,"__header_message")},e.prototype.getCameraPermissionButtonId=function(){return an.CAMERA_PERMISSION_BUTTON_ID},e.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},e.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},e.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())},e}();function n5(e,t){if(e&1&&(N(0,"p"),B(1),R()),e&2){let n=nt();ee(),Wt("Table ID: ",n.tableId,"")}}var E2=(()=>{class e{navigationService;tableId=null;uniqueLinkToken=null;ownerId=null;restaurantid=null;html5QrCodeScanner=null;constructor(n){this.navigationService=n}ngAfterViewInit(){this.html5QrCodeScanner=new Yc("reader",{fps:10,qrbox:{width:250,height:250}},!1),this.html5QrCodeScanner.render(this.onScanSuccess.bind(this),this.onScanFailure)}onScanSuccess(n){let r=new URL(n),i=r.searchParams.get("tableid"),s=r.searchParams.get("uniqueLinkToken"),c=r.searchParams.get("restaurantid"),h=r.searchParams.get("ownerid");i?(this.tableId=i,this.uniqueLinkToken=s,this.restaurantid=c,this.ownerId=h,localStorage.setItem("customercurrentTable",this.tableId),localStorage.setItem("uniqueLinkToken",this.uniqueLinkToken),localStorage.setItem("restaurantid",this.restaurantid),localStorage.setItem("ownerid",this.ownerId),this.navigationService.NavigateTo("tableordered"),console.log("Table ID saved:",this.tableId)):console.error("Table ID not found in the scanned QR code."),this.html5QrCodeScanner?.clear()}onScanFailure(n){console.warn(`QR code scan error: ${n}`)}ngOnDestroy(){this.html5QrCodeScanner?.clear()}static \u0275fac=function(r){return new(r||e)(Q(Te))};static \u0275cmp=oe({type:e,selectors:[["app-scanqrcode"]],standalone:!0,features:[ae],decls:4,vars:1,consts:[["id","reader",2,"width","300px"]],template:function(r,i){r&1&&(N(0,"p"),B(1,"scanqrcode works!"),R(),fe(2,"div",0),on(3,n5,2,1,"p")),r&2&&(ee(3),Kt(i.tableId?3:-1))}})}return e})();var b2=(()=>{class e{router;constructor(n){this.router=n}setOrder(n){localStorage.setItem("orderNumber",n),this.router.navigate(["/scanqrcode"])}static \u0275fac=function(r){return new(r||e)(Q(Jr))};static \u0275cmp=oe({type:e,selectors:[["app-setorder"]],standalone:!0,features:[ae],decls:13,vars:0,consts:[["orderNumberInput",""],[1,"displaybox"],[1,"logo"],[1,"buttons"],["type","number","placeholder","numer zam\xF3wienia"],[3,"click"],[1,"footstatic"]],template:function(r,i){if(r&1){let s=At();N(0,"main")(1,"div",1)(2,"div",2)(3,"h1"),B(4,"EasyOrder"),R()(),N(5,"div",3)(6,"label"),B(7,"Wprowad\u017A numer zam\xF3wienia"),R(),fe(8,"input",4,0),N(10,"button",5),X("click",function(){pt(s);let h=jd(9);return gt(i.setOrder(h.value))}),B(11,"Przypisz stolik"),R()(),fe(12,"div",6),R()()}}})}return e})();var I2=(()=>{class e{route;router;waiterId=null;uniqueLinkToken=null;ownerId=null;restaurantId=null;pin="";constructor(n,r){this.route=n,this.router=r,Ee(Le.firebaseConfig)}ngOnInit(){this.route.queryParams.subscribe(n=>{this.uniqueLinkToken=n.uniqueLinkToken||null,this.ownerId=n.ownerid||null,this.restaurantId=n.restaurantid||null})}authenticateWaiter(){let n=se();if(!this.restaurantId||!this.uniqueLinkToken||!this.ownerId){console.error("Missing required data");return}let r=re(n,`Owners/${this.ownerId}/Restaurants/${this.restaurantId}`);Ne(r).then(i=>{if(i.exists()){let c=i.val().settings.waiter_access_pin;c&&c.toString()===this.pin?this.saveAuthData():console.error("Invalid PIN")}else console.error("Restaurant not found")}).catch(i=>{console.error("Error authenticating waiter:",i)})}saveAuthData(){localStorage.setItem("uniqueLinkToken",this.uniqueLinkToken),localStorage.setItem("restaurantid",this.restaurantId),localStorage.setItem("ownerid",this.ownerId),localStorage.setItem("waiterpin",this.pin),this.router.navigate(["/waitertablelist"])}static \u0275fac=function(r){return new(r||e)(Q(Kr),Q(Jr))};static \u0275cmp=oe({type:e,selectors:[["app-waiterauth"]],standalone:!0,features:[ae],decls:8,vars:1,consts:[[1,"auth-container"],["for","pin"],["id","pin","type","password","placeholder","Access Pin","required","",3,"ngModelChange","ngModel"],[3,"click"]],template:function(r,i){r&1&&(N(0,"div",0)(1,"h2"),B(2,"Waiter Authentication"),R(),N(3,"label",1),B(4,"Wprowad\u017A numer Pin:"),R(),N(5,"input",2),Mt("ngModelChange",function(c){return kt(i.pin,c)||(i.pin=c),c}),R(),N(6,"button",3),X("click",function(){return i.authenticateWaiter()}),B(7,"Zaloguj"),R()()),r&2&&(ee(5),Tt("ngModel",i.pin))},dependencies:[sn,An,$n,nr,On]})}return e})();function r5(e,t){e&1&&(N(0,"p"),B(1,"Brak stolik\xF3w przypisanych do restauracji."),R())}function i5(e,t){if(e&1){let n=At();N(0,"button",13),X("click",function(){let i=pt(n).$implicit,s=nt(2);return gt(s.setTable(i.id))}),B(1),R()}if(e&2){let n=t.$implicit;ee(),Wt(" ",n.name," ")}}function o5(e,t){if(e&1&&Dn(0,i5,2,1,"button",12,In),e&2){let n=nt();Sn(n.tables)}}var D2=(()=>{class e{navigationService;tables=[];isMenuOpen=!1;toggleMenu(){this.isMenuOpen=!this.isMenuOpen}constructor(n){this.navigationService=n;let r=Ee(Le.firebaseConfig)}ngOnInit(){this.loadTables()}loadTables(){let n=se(),r=localStorage.getItem("currentRestaurant"),i=localStorage.getItem("ownerid");if(!r){console.error("No current restaurant found in local storage");return}let s=re(n,`Owners/${i}/Restaurants/${r}/Tables`);Ne(s).then(c=>{if(c.exists()){let h=c.val();this.tables=Object.values(h)}else console.log("No tables found")}).catch(c=>{console.error("Error loading tables:",c)})}setTable(n){localStorage.setItem("currentTable",n),this.goToPage("waitertablelookup")}goToPage(n){this.navigationService.NavigateTo(n)}static \u0275fac=function(r){return new(r||e)(Q(Te))};static \u0275cmp=oe({type:e,selectors:[["app-waitertablelist"]],standalone:!0,features:[ae],decls:40,vars:4,consts:[[1,"displaybox"],[1,"logo"],["id","head"],[1,"logotype"],["href","#"],[1,"burger",3,"click"],[1,"material-symbols-rounded"],[1,"menu"],["href","#",1,"menu-item"],[1,"buttons"],[1,"footstatic"],[3,"click"],[1,"table-button"],[1,"table-button",3,"click"]],template:function(r,i){r&1&&(N(0,"main")(1,"div",0)(2,"div",1)(3,"nav",2)(4,"ul")(5,"li",3)(6,"a",4),B(7,"EasyOrder"),R()(),N(8,"li",5),X("click",function(){return i.toggleMenu()}),N(9,"span",6),B(10),R()(),N(11,"li",7)(12,"div"),B(13,"Moje zam\xF3wienia: "),N(14,"a",8),B(15,"Nowe"),R(),N(16,"a",8),B(17,"Wydane"),R()(),N(18,"div"),B(19,"Wszystkie zam\xF3wienia: "),N(20,"a",8),B(21,"Nowe"),R(),N(22,"a",8),B(23,"Wydane"),R()(),N(24,"div"),B(25,"Widok: "),N(26,"a",8),B(27,"Stoliki"),R(),N(28,"a",8),B(29,"Zam\xF3wienia"),R()()()()()(),N(30,"div",9),on(31,r5,2,0,"p")(32,o5,2,0),R(),N(33,"div",10)(34,"button",11),X("click",function(){return i.goToPage("waiterscan")}),N(35,"span",6),B(36," photo_camera "),R()(),N(37,"button",11),X("click",function(){return i.goToPage("addorder")}),N(38,"span",6),B(39," post_add "),R()()()()()),r&2&&(ee(10),fr(i.isMenuOpen?"X":"menu"),ee(),oo("is-open",i.isMenuOpen),ee(20),Kt(i.tables.length===0?31:32))},styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;padding:16px;position:relative}.displaybox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center;position:relative}.logo[_ngcontent-%COMP%]{display:flex;font-size:45%;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center;margin-bottom:48px}.buttons[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:flex-start;align-items:center;align-content:center}.buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{text-align:left;width:100%;background:#fff;padding:24px;font-size:110%;color:#000;font-weight:600;letter-spacing:2px;border:1px solid #000000;transition:all .5s;margin-bottom:24px}.footstatic[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center}.footstatic[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:calc(100% - 16px);background:#fff;padding:24px;font-size:110%;color:#000;font-weight:600;letter-spacing:2px;border:1px solid #000000;transition:all .5s;margin-bottom:24px;margin-right:8px}#head[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:0;padding:0;display:flex;align-items:center;justify-content:space-between;background:#fff;box-shadow:0 2px 4px #0003}#head[_ngcontent-%COMP%]   .logotype[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding:0 8px;font-size:1.4rem;text-decoration:none;color:#000}#head[_ngcontent-%COMP%]   .burger[_ngcontent-%COMP%]{padding:0 10px;border-left:1px solid #eee;display:none;cursor:pointer}#head[_ngcontent-%COMP%]   .burger[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#999;line-height:60px}@media (max-width: 768px){#head[_ngcontent-%COMP%]   .burger[_ngcontent-%COMP%]{display:block}}#head[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]{display:flex;align-items:center}@media (max-width: 768px){#head[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]{display:none}#head[_ngcontent-%COMP%]   .menu.is-open[_ngcontent-%COMP%]{display:block;position:absolute;top:62px;background:#fff;width:100%}#head[_ngcontent-%COMP%]   .menu.is-open[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]{border-bottom:1px solid #cccccc}}#head[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]{padding:0 10px;height:60px;line-height:60px;text-decoration:none;display:block;text-transform:uppercase;font-size:.8rem;font-weight:600;color:#454545}.active[_ngcontent-%COMP%]{background:#000;color:#fff}"]})}return e})();var S2=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275cmp=oe({type:e,selectors:[["app-waitertablelookup"]],standalone:!0,features:[ae],decls:2,vars:0,template:function(r,i){r&1&&(N(0,"p"),B(1,"waitertablelookup works!"),R())}})}return e})();function s5(e,t){e&1&&(N(0,"p"),B(1,"Brak stolik\xF3w przypisanych do restauracji."),R())}function a5(e,t){if(e&1){let n=At();N(0,"button",14),X("click",function(){let i=pt(n).$implicit,s=nt(2);return gt(s.setTable(i.name))}),B(1),R()}if(e&2){let n=t.$implicit;ee(),Wt(" ",n.name," ")}}function l5(e,t){if(e&1&&Dn(0,a5,2,1,"button",13,In),e&2){let n=nt();Sn(n.orders)}}var A2=(()=>{class e{navigationService;orders=[];constructor(n){this.navigationService=n;let r=Ee(Le.firebaseConfig)}isMenuOpen=!1;toggleMenu(){this.isMenuOpen=!this.isMenuOpen}ngOnInit(){this.loadOrders()}loadOrders(){let n=se(),r=localStorage.getItem("currentRestaurant"),i=localStorage.getItem("ownerid");if(console.log("Current restaurant ID:",r),console.log("Current owner ID:",i),!r||!i){console.error("No current restaurant or owner found");return}let s=re(n,`Owners/${i}/Restaurants/${r}/Orders`);Ne(s).then(c=>{if(console.log("Firebase Snapshot:",c),c.exists()){let h=c.val();console.log("Orders Data:",h),this.orders=Object.values(h),this.orders.sort((g,m)=>g.created_at<m.created_at?-1:g.created_at>m.created_at||g.completed_at&&!m.completed_at?1:!g.completed_at&&m.completed_at?-1:0),console.log("Sorted Orders:",this.orders)}else console.log("No orders found")}).catch(c=>{console.error("Error loading orders:",c)})}setTable(n){localStorage.setItem("currentTable",n),this.goToPage("waitertablelookup")}goToPage(n){this.navigationService.NavigateTo(n)}static \u0275fac=function(r){return new(r||e)(Q(Te))};static \u0275cmp=oe({type:e,selectors:[["app-waiterorderlist"]],standalone:!0,features:[ae],decls:40,vars:4,consts:[[1,"displaybox"],[1,"logo"],["id","head"],[1,"logotype"],["href","#"],[1,"burger",3,"click"],[1,"material-symbols-rounded"],[1,"menu"],["href","#",1,"menu-item"],["href","#",1,"menu-item","active"],[1,"buttons"],[1,"footstatic"],[3,"click"],[1,"table-button"],[1,"table-button",3,"click"]],template:function(r,i){r&1&&(N(0,"main")(1,"div",0)(2,"div",1)(3,"nav",2)(4,"ul")(5,"li",3)(6,"a",4),B(7,"EasyOrder"),R()(),N(8,"li",5),X("click",function(){return i.toggleMenu()}),N(9,"span",6),B(10),R()(),N(11,"li",7)(12,"div"),B(13,"Moje zam\xF3wienia: "),N(14,"a",8),B(15,"Nowe"),R(),N(16,"a",8),B(17,"Wydane"),R()(),N(18,"div"),B(19,"Wszystkie zam\xF3wienia: "),N(20,"a",8),B(21,"Nowe"),R(),N(22,"a",8),B(23,"Wydane"),R()(),N(24,"div"),B(25,"Widok: "),N(26,"a",8),B(27,"Stoliki"),R(),N(28,"a",9),B(29,"Zam\xF3wienia"),R()()()()()(),N(30,"div",10),on(31,s5,2,0,"p")(32,l5,2,0),R(),N(33,"div",11)(34,"button",12),X("click",function(){return i.goToPage("waiterscan")}),N(35,"span",6),B(36," photo_camera "),R()(),N(37,"button",12),X("click",function(){return i.goToPage("addorder")}),N(38,"span",6),B(39," post_add "),R()()()()()),r&2&&(ee(10),fr(i.isMenuOpen?"X":"menu"),ee(),oo("is-open",i.isMenuOpen),ee(20),Kt(i.orders.length===0?31:32))},styles:["#head[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:0;padding:0;display:flex;align-items:center;justify-content:space-between;background:#fff;box-shadow:0 2px 4px #0003}#head[_ngcontent-%COMP%]   .logotype[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding:0 8px;font-size:1.4rem;text-decoration:none;color:#000}#head[_ngcontent-%COMP%]   .burger[_ngcontent-%COMP%]{padding:0 10px;border-left:1px solid #eee;display:none;cursor:pointer}#head[_ngcontent-%COMP%]   .burger[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#999;line-height:60px}@media (max-width: 768px){#head[_ngcontent-%COMP%]   .burger[_ngcontent-%COMP%]{display:block}}#head[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]{display:flex;align-items:center}@media (max-width: 768px){#head[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]{display:none}#head[_ngcontent-%COMP%]   .menu.is-open[_ngcontent-%COMP%]{display:block;position:absolute;top:62px;background:#fff;width:100%}#head[_ngcontent-%COMP%]   .menu.is-open[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]{border-bottom:1px solid #cccccc}}#head[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]{padding:0 10px;height:60px;line-height:60px;text-decoration:none;display:block;text-transform:uppercase;font-size:.8rem;font-weight:600;color:#454545}.active[_ngcontent-%COMP%]{background:#000;color:#fff!important}"]})}return e})();var T2=(()=>{class e{navigationService;tableId=null;uniqueLinkToken=null;ownerId=null;restaurantid=null;html5QrCodeScanner=null;constructor(n){this.navigationService=n}ngAfterViewInit(){this.html5QrCodeScanner=new Yc("reader",{fps:10,qrbox:{width:250,height:250}},!1),this.html5QrCodeScanner.render(this.onScanSuccess.bind(this),this.onScanFailure)}onScanSuccess(n){let r=new URL(n),i=r.searchParams.get("tableid"),s=r.searchParams.get("uniqueLinkToken"),c=r.searchParams.get("restaurantid"),h=r.searchParams.get("ownerid");i?(this.tableId=i,this.uniqueLinkToken=s,this.restaurantid=c,this.ownerId=h,localStorage.setItem("customercurrentTable",this.tableId),localStorage.setItem("uniqueLinkToken",this.uniqueLinkToken),localStorage.setItem("restaurantid",this.restaurantid),localStorage.setItem("ownerid",this.ownerId),this.navigationService.NavigateTo("tableordered"),console.log("Table ID saved:",this.tableId)):console.error("Table ID not found in the scanned QR code."),this.html5QrCodeScanner?.clear()}onScanFailure(n){console.warn(`QR code scan error: ${n}`)}ngOnDestroy(){this.html5QrCodeScanner?.clear()}static \u0275fac=function(r){return new(r||e)(Q(Te))};static \u0275cmp=oe({type:e,selectors:[["app-waiterscan"]],standalone:!0,features:[ae],decls:1,vars:0,consts:[["id","reader",2,"width","300px"]],template:function(r,i){r&1&&fe(0,"div",0)}})}return e})();var M2=(()=>{class e{navigationService;tableId=null;table=null;tableGroupName=null;groupColor=null;uniqueLinkToken=null;ownerId=null;restaurantId=null;constructor(n){this.navigationService=n,Ee(Le.firebaseConfig)}ngOnInit(){this.loadTable(),this.loadUniqueLinkToken()}loadUniqueLinkToken(){let n=se();this.ownerId=sessionStorage.getItem("userId"),this.restaurantId=localStorage.getItem("currentRestaurant");let r=re(n,`Owners/${this.ownerId}/Restaurants/${this.restaurantId}/uniqueLinkToken`);Ne(r).then(i=>{i.exists()?this.uniqueLinkToken=i.val():console.log("No unique link token found")}).catch(i=>{console.error("Error loading unique link token:",i)})}deleteTable(){let n=se(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant");if(!this.tableId||!r||!i){console.error("Missing table, owner, or restaurant ID");return}let s=re(n,`Owners/${r}/Restaurants/${i}/Tables/${this.tableId}`);mo(s).then(()=>{console.log("Table deleted successfully"),this.navigationService.NavigateTo("tablemanage")}).catch(c=>{console.error("Error deleting table:",c)})}blockTable(){let n=se(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant");if(!this.tableId||!r||!i){console.error("Missing table, owner, or restaurant ID");return}let s=re(n,`Owners/${r}/Restaurants/${i}/Tables/${this.tableId}`);Bt(s,{is_blocked:!0}).then(()=>{console.log("Table blocked successfully"),location.reload()}).catch(c=>{console.error("Error blocking table:",c)})}unlockTable(){let n=se(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant");if(!this.tableId||!r||!i){console.error("Missing table, owner, or restaurant ID");return}let s=re(n,`Owners/${r}/Restaurants/${i}/Tables/${this.tableId}`);Bt(s,{is_blocked:!1}).then(()=>{console.log("Table unlocked successfully"),location.reload()}).catch(c=>{console.error("Error unlocking table:",c)})}saveTable(){}loadTable(){if(this.tableId=localStorage.getItem("currentTable"),!this.tableId){console.error("No current table found in local storage");return}let n=se(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant"),s=re(n,`Owners/${r}/Restaurants/${i}/Tables/${this.tableId}`);Ne(s).then(c=>{c.exists()?(this.table=c.val(),this.loadTableGroup()):console.log("No table found")}).catch(c=>{console.error("Error loading table:",c)})}loadTableGroup(){let n=se(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant");if(!this.table?.group_id||this.table.group_id==="0g"){this.tableGroupName="Stoliki bez grupy",this.groupColor="#000000";return}let s=re(n,`Owners/${r}/Restaurants/${i}/TableGroups/${this.table.group_id}`);Ne(s).then(c=>{if(c.exists()){let h=c.val();this.tableGroupName=h.name,this.groupColor=h.color}else console.log("No group found for this table")}).catch(c=>{console.error("Error loading group:",c)})}getQRCodeData(){let n=this.table?.id||"",r=this.uniqueLinkToken||"",i=sessionStorage.getItem("userId"),s=localStorage.getItem("currentRestaurant");return`https://easyorder.mandarin.com.pl/settable?tableid=${n}&uniqueLinkToken=${r}&ownerid=${i}&restaurantid=${s}`}static \u0275fac=function(r){return new(r||e)(Q(Te))};static \u0275cmp=oe({type:e,selectors:[["app-waiterqrcode"]],standalone:!0,features:[ae],decls:3,vars:13,consts:[[1,"qrcodeImage"],[3,"qrdata","allowEmptyString","alt","ariaLabel","cssClass","colorDark","colorLight","elementType","errorCorrectionLevel","margin","scale","title","width"]],template:function(r,i){r&1&&(N(0,"main")(1,"div",0),fe(2,"qrcode",1),R()()),r&2&&(ee(2),kr("qrdata","https://easyorder.mandarin.com.pl/waiterauth?uniqueLinkToken="+i.uniqueLinkToken+"&ownerid="+i.ownerId+"&restaurantid="+i.restaurantId)("allowEmptyString",!0)("alt","A custom alt attribute")("ariaLabel","QR Code image with the following content...")("cssClass","center")("colorDark","#000000ff")("colorLight","#ffffffff")("elementType","img")("errorCorrectionLevel","H")("margin",4)("scale",1)("title","A custom title attribute")("width",300))},dependencies:[Ha,Ua]})}return e})();var N2=(()=>{class e{navigationService;orderNumber="";constructor(n){this.navigationService=n,Ee(Le.firebaseConfig)}addOrder(){let n=se(),r=localStorage.getItem("ownerid"),i=localStorage.getItem("currentRestaurant");if(!r||!i){console.error("Brak wymaganych danych");return}let s=Date.now().toString(),c={name:this.orderNumber,waiter_get_order_at_table:!0,created_at:Date.now(),canceled_at:null,completed_at:null,table_id:"",waiter_set_order_number:!0,table_id_entered_by_waiter:!1,completed_during_table_clean:!1},h=re(n,`Owners/${r}/Restaurants/${i}/Orders/${s}`);yo(h,c).then(()=>{console.log("Zam\xF3wienie dodane pomy\u015Blnie"),this.orderNumber="",this.navigationService.NavigateTo("waiterorderlist")}).catch(g=>{console.error("B\u0142\u0105d podczas dodawania zam\xF3wienia:",g)})}static \u0275fac=function(r){return new(r||e)(Q(Te))};static \u0275cmp=oe({type:e,selectors:[["app-addorder"]],standalone:!0,features:[ae],decls:8,vars:1,consts:[["for","orderNumber"],["type","text","id","orderNumber",3,"ngModelChange","ngModel"],[3,"click"]],template:function(r,i){r&1&&(N(0,"p"),B(1,"addorder works!"),R(),N(2,"div")(3,"label",0),B(4,"Numer zam\xF3wienia:"),R(),N(5,"input",1),Mt("ngModelChange",function(c){return kt(i.orderNumber,c)||(i.orderNumber=c),c}),R(),N(6,"button",2),X("click",function(){return i.addOrder()}),B(7,"Dodaj zam\xF3wienie"),R()()),r&2&&(ee(5),Tt("ngModel",i.orderNumber))},dependencies:[sn,An,$n,On]})}return e})();var R2=[{path:"",component:Iy},{path:"landingpage",component:Iy},{path:"register",component:DD},{path:"login",component:bD},{path:"newrestaurant",component:SD},{path:"managerestaurant",component:AD},{path:"changerestaurant",component:TD},{path:"restaurantbilings",component:MD},{path:"restaurantsettings",component:ND},{path:"tablemanage",component:PD},{path:"tablecreate",component:kD},{path:"tableedit",component:LD},{path:"restaurantstats",component:OD},{path:"restaurantrevievs",component:RD},{path:"settable",component:FD},{path:"tablegroupcreate",component:VD},{path:"tablegroupmanage",component:BD},{path:"showtableqr",component:HS},{path:"tablesettings",component:zS},{path:"waitersettings",component:WS},{path:"alltablesqrcodes",component:GS},{path:"tableordered",component:qS},{path:"scanqrcode",component:E2},{path:"setorder",component:b2},{path:"waiterauth",component:I2},{path:"waitertablelist",component:D2},{path:"waitertablelookup",component:S2},{path:"waiterorderlist",component:A2},{path:"waiterscan",component:T2},{path:"waiterqrcode",component:M2},{path:"addorder",component:N2}];Xx(LE,{providers:[kE(R2),{provide:sn}]});
