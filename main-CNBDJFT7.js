var tM=Object.create;var Sp=Object.defineProperty,nM=Object.defineProperties,rM=Object.getOwnPropertyDescriptor,iM=Object.getOwnPropertyDescriptors,oM=Object.getOwnPropertyNames,vu=Object.getOwnPropertySymbols,sM=Object.getPrototypeOf,Dp=Object.prototype.hasOwnProperty,xC=Object.prototype.propertyIsEnumerable;var vC=(e,n,t)=>n in e?Sp(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,ne=(e,n)=>{for(var t in n||={})Dp.call(n,t)&&vC(e,t,n[t]);if(vu)for(var t of vu(n))xC.call(n,t)&&vC(e,t,n[t]);return e},Le=(e,n)=>nM(e,iM(n));var bC=(e,n)=>{var t={};for(var r in e)Dp.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(e!=null&&vu)for(var r of vu(e))n.indexOf(r)<0&&xC.call(e,r)&&(t[r]=e[r]);return t};var dt=(e,n)=>()=>(n||e((n={exports:{}}).exports,n),n.exports);var aM=(e,n,t,r)=>{if(n&&typeof n=="object"||typeof n=="function")for(let i of oM(n))!Dp.call(e,i)&&i!==t&&Sp(e,i,{get:()=>n[i],enumerable:!(r=rM(n,i))||r.enumerable});return e};var EC=(e,n,t)=>(t=e!=null?tM(sM(e)):{},aM(n||!e||!e.__esModule?Sp(t,"default",{value:e,enumerable:!0}):t,e));var qt=(e,n,t)=>new Promise((r,i)=>{var o=g=>{try{h(t.next(g))}catch(m){i(m)}},c=g=>{try{h(t.throw(g))}catch(m){i(m)}},h=g=>g.done?r(g.value):Promise.resolve(g.value).then(o,c);h((t=t.apply(e,n)).next())});var _2=dt((jY,C2)=>{"use strict";C2.exports=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}});var Do=dt(_s=>{"use strict";var mw,m7=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];_s.getSymbolSize=function(n){if(!n)throw new Error('"version" cannot be null or undefined');if(n<1||n>40)throw new Error('"version" should be in range from 1 to 40');return n*4+17};_s.getSymbolTotalCodewords=function(n){return m7[n]};_s.getBCHDigit=function(e){let n=0;for(;e!==0;)n++,e>>>=1;return n};_s.setToSJISFunction=function(n){if(typeof n!="function")throw new Error('"toSJISFunc" is not a valid function.');mw=n};_s.isKanjiModeEnabled=function(){return typeof mw<"u"};_s.toSJIS=function(n){return mw(n)}});var Bh=dt(Dr=>{"use strict";Dr.L={bit:1};Dr.M={bit:0};Dr.Q={bit:3};Dr.H={bit:2};function y7(e){if(typeof e!="string")throw new Error("Param is not a string");switch(e.toLowerCase()){case"l":case"low":return Dr.L;case"m":case"medium":return Dr.M;case"q":case"quartile":return Dr.Q;case"h":case"high":return Dr.H;default:throw new Error("Unknown EC Level: "+e)}}Dr.isValid=function(n){return n&&typeof n.bit<"u"&&n.bit>=0&&n.bit<4};Dr.from=function(n,t){if(Dr.isValid(n))return n;try{return y7(n)}catch{return t}}});var b2=dt((WY,x2)=>{"use strict";function v2(){this.buffer=[],this.length=0}v2.prototype={get:function(e){let n=Math.floor(e/8);return(this.buffer[n]>>>7-e%8&1)===1},put:function(e,n){for(let t=0;t<n;t++)this.putBit((e>>>n-t-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(e){let n=Math.floor(this.length/8);this.buffer.length<=n&&this.buffer.push(0),e&&(this.buffer[n]|=128>>>this.length%8),this.length++}};x2.exports=v2});var I2=dt((GY,E2)=>{"use strict";function Kc(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}Kc.prototype.set=function(e,n,t,r){let i=e*this.size+n;this.data[i]=t,r&&(this.reservedBit[i]=!0)};Kc.prototype.get=function(e,n){return this.data[e*this.size+n]};Kc.prototype.xor=function(e,n,t){this.data[e*this.size+n]^=t};Kc.prototype.isReserved=function(e,n){return this.reservedBit[e*this.size+n]};E2.exports=Kc});var S2=dt(Vh=>{"use strict";var w7=Do().getSymbolSize;Vh.getRowColCoords=function(n){if(n===1)return[];let t=Math.floor(n/7)+2,r=w7(n),i=r===145?26:Math.ceil((r-13)/(2*t-2))*2,o=[r-7];for(let c=1;c<t-1;c++)o[c]=o[c-1]-i;return o.push(6),o.reverse()};Vh.getPositions=function(n){let t=[],r=Vh.getRowColCoords(n),i=r.length;for(let o=0;o<i;o++)for(let c=0;c<i;c++)o===0&&c===0||o===0&&c===i-1||o===i-1&&c===0||t.push([r[o],r[c]]);return t}});var T2=dt(A2=>{"use strict";var C7=Do().getSymbolSize,D2=7;A2.getPositions=function(n){let t=C7(n);return[[0,0],[t-D2,0],[0,t-D2]]}});var M2=dt(At=>{"use strict";At.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};var vs={N1:3,N2:3,N3:40,N4:10};At.isValid=function(n){return n!=null&&n!==""&&!isNaN(n)&&n>=0&&n<=7};At.from=function(n){return At.isValid(n)?parseInt(n,10):void 0};At.getPenaltyN1=function(n){let t=n.size,r=0,i=0,o=0,c=null,h=null;for(let g=0;g<t;g++){i=o=0,c=h=null;for(let m=0;m<t;m++){let v=n.get(g,m);v===c?i++:(i>=5&&(r+=vs.N1+(i-5)),c=v,i=1),v=n.get(m,g),v===h?o++:(o>=5&&(r+=vs.N1+(o-5)),h=v,o=1)}i>=5&&(r+=vs.N1+(i-5)),o>=5&&(r+=vs.N1+(o-5))}return r};At.getPenaltyN2=function(n){let t=n.size,r=0;for(let i=0;i<t-1;i++)for(let o=0;o<t-1;o++){let c=n.get(i,o)+n.get(i,o+1)+n.get(i+1,o)+n.get(i+1,o+1);(c===4||c===0)&&r++}return r*vs.N2};At.getPenaltyN3=function(n){let t=n.size,r=0,i=0,o=0;for(let c=0;c<t;c++){i=o=0;for(let h=0;h<t;h++)i=i<<1&2047|n.get(c,h),h>=10&&(i===1488||i===93)&&r++,o=o<<1&2047|n.get(h,c),h>=10&&(o===1488||o===93)&&r++}return r*vs.N3};At.getPenaltyN4=function(n){let t=0,r=n.data.length;for(let o=0;o<r;o++)t+=n.data[o];return Math.abs(Math.ceil(t*100/r/5)-10)*vs.N4};function _7(e,n,t){switch(e){case At.Patterns.PATTERN000:return(n+t)%2===0;case At.Patterns.PATTERN001:return n%2===0;case At.Patterns.PATTERN010:return t%3===0;case At.Patterns.PATTERN011:return(n+t)%3===0;case At.Patterns.PATTERN100:return(Math.floor(n/2)+Math.floor(t/3))%2===0;case At.Patterns.PATTERN101:return n*t%2+n*t%3===0;case At.Patterns.PATTERN110:return(n*t%2+n*t%3)%2===0;case At.Patterns.PATTERN111:return(n*t%3+(n+t)%2)%2===0;default:throw new Error("bad maskPattern:"+e)}}At.applyMask=function(n,t){let r=t.size;for(let i=0;i<r;i++)for(let o=0;o<r;o++)t.isReserved(o,i)||t.xor(o,i,_7(n,o,i))};At.getBestMask=function(n,t){let r=Object.keys(At.Patterns).length,i=0,o=1/0;for(let c=0;c<r;c++){t(c),At.applyMask(c,n);let h=At.getPenaltyN1(n)+At.getPenaltyN2(n)+At.getPenaltyN3(n)+At.getPenaltyN4(n);At.applyMask(c,n),h<o&&(o=h,i=c)}return i}});var ww=dt(yw=>{"use strict";var Ao=Bh(),Uh=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],jh=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];yw.getBlocksCount=function(n,t){switch(t){case Ao.L:return Uh[(n-1)*4+0];case Ao.M:return Uh[(n-1)*4+1];case Ao.Q:return Uh[(n-1)*4+2];case Ao.H:return Uh[(n-1)*4+3];default:return}};yw.getTotalCodewordsCount=function(n,t){switch(t){case Ao.L:return jh[(n-1)*4+0];case Ao.M:return jh[(n-1)*4+1];case Ao.Q:return jh[(n-1)*4+2];case Ao.H:return jh[(n-1)*4+3];default:return}}});var N2=dt(zh=>{"use strict";var Jc=new Uint8Array(512),Hh=new Uint8Array(256);(function(){let n=1;for(let t=0;t<255;t++)Jc[t]=n,Hh[n]=t,n<<=1,n&256&&(n^=285);for(let t=255;t<512;t++)Jc[t]=Jc[t-255]})();zh.log=function(n){if(n<1)throw new Error("log("+n+")");return Hh[n]};zh.exp=function(n){return Jc[n]};zh.mul=function(n,t){return n===0||t===0?0:Jc[Hh[n]+Hh[t]]}});var O2=dt(eu=>{"use strict";var Cw=N2();eu.mul=function(n,t){let r=new Uint8Array(n.length+t.length-1);for(let i=0;i<n.length;i++)for(let o=0;o<t.length;o++)r[i+o]^=Cw.mul(n[i],t[o]);return r};eu.mod=function(n,t){let r=new Uint8Array(n);for(;r.length-t.length>=0;){let i=r[0];for(let c=0;c<t.length;c++)r[c]^=Cw.mul(t[c],i);let o=0;for(;o<r.length&&r[o]===0;)o++;r=r.slice(o)}return r};eu.generateECPolynomial=function(n){let t=new Uint8Array([1]);for(let r=0;r<n;r++)t=eu.mul(t,new Uint8Array([1,Cw.exp(r)]));return t}});var k2=dt((KY,P2)=>{"use strict";var R2=O2();function _w(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}_w.prototype.initialize=function(n){this.degree=n,this.genPoly=R2.generateECPolynomial(this.degree)};_w.prototype.encode=function(n){if(!this.genPoly)throw new Error("Encoder not initialized");let t=new Uint8Array(n.length+this.degree);t.set(n);let r=R2.mod(t,this.genPoly),i=this.degree-r.length;if(i>0){let o=new Uint8Array(this.degree);return o.set(r,i),o}return r};P2.exports=_w});var vw=dt(L2=>{"use strict";L2.isValid=function(n){return!isNaN(n)&&n>=1&&n<=40}});var xw=dt(qi=>{"use strict";var F2="[0-9]+",v7="[A-Z $%*+\\-./:]+",tu="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";tu=tu.replace(/u/g,"\\u");var x7="(?:(?![A-Z0-9 $%*+\\-./:]|"+tu+`)(?:.|[\r
]))+`;qi.KANJI=new RegExp(tu,"g");qi.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");qi.BYTE=new RegExp(x7,"g");qi.NUMERIC=new RegExp(F2,"g");qi.ALPHANUMERIC=new RegExp(v7,"g");var b7=new RegExp("^"+tu+"$"),E7=new RegExp("^"+F2+"$"),I7=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");qi.testKanji=function(n){return b7.test(n)};qi.testNumeric=function(n){return E7.test(n)};qi.testAlphanumeric=function(n){return I7.test(n)}});var To=dt(Kt=>{"use strict";var S7=vw(),bw=xw();Kt.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]};Kt.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]};Kt.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]};Kt.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]};Kt.MIXED={bit:-1};Kt.getCharCountIndicator=function(n,t){if(!n.ccBits)throw new Error("Invalid mode: "+n);if(!S7.isValid(t))throw new Error("Invalid version: "+t);return t>=1&&t<10?n.ccBits[0]:t<27?n.ccBits[1]:n.ccBits[2]};Kt.getBestModeForData=function(n){return bw.testNumeric(n)?Kt.NUMERIC:bw.testAlphanumeric(n)?Kt.ALPHANUMERIC:bw.testKanji(n)?Kt.KANJI:Kt.BYTE};Kt.toString=function(n){if(n&&n.id)return n.id;throw new Error("Invalid mode")};Kt.isValid=function(n){return n&&n.bit&&n.ccBits};function D7(e){if(typeof e!="string")throw new Error("Param is not a string");switch(e.toLowerCase()){case"numeric":return Kt.NUMERIC;case"alphanumeric":return Kt.ALPHANUMERIC;case"kanji":return Kt.KANJI;case"byte":return Kt.BYTE;default:throw new Error("Unknown mode: "+e)}}Kt.from=function(n,t){if(Kt.isValid(n))return n;try{return D7(n)}catch{return t}}});var H2=dt(xs=>{"use strict";var Wh=Do(),A7=ww(),B2=Bh(),Mo=To(),Ew=vw(),U2=7973,V2=Wh.getBCHDigit(U2);function T7(e,n,t){for(let r=1;r<=40;r++)if(n<=xs.getCapacity(r,t,e))return r}function j2(e,n){return Mo.getCharCountIndicator(e,n)+4}function M7(e,n){let t=0;return e.forEach(function(r){let i=j2(r.mode,n);t+=i+r.getBitsLength()}),t}function N7(e,n){for(let t=1;t<=40;t++)if(M7(e,t)<=xs.getCapacity(t,n,Mo.MIXED))return t}xs.from=function(n,t){return Ew.isValid(n)?parseInt(n,10):t};xs.getCapacity=function(n,t,r){if(!Ew.isValid(n))throw new Error("Invalid QR Code version");typeof r>"u"&&(r=Mo.BYTE);let i=Wh.getSymbolTotalCodewords(n),o=A7.getTotalCodewordsCount(n,t),c=(i-o)*8;if(r===Mo.MIXED)return c;let h=c-j2(r,n);switch(r){case Mo.NUMERIC:return Math.floor(h/10*3);case Mo.ALPHANUMERIC:return Math.floor(h/11*2);case Mo.KANJI:return Math.floor(h/13);case Mo.BYTE:default:return Math.floor(h/8)}};xs.getBestVersionForData=function(n,t){let r,i=B2.from(t,B2.M);if(Array.isArray(n)){if(n.length>1)return N7(n,i);if(n.length===0)return 1;r=n[0]}else r=n;return T7(r.mode,r.getLength(),i)};xs.getEncodedBits=function(n){if(!Ew.isValid(n)||n<7)throw new Error("Invalid QR Code version");let t=n<<12;for(;Wh.getBCHDigit(t)-V2>=0;)t^=U2<<Wh.getBCHDigit(t)-V2;return n<<12|t}});var $2=dt(G2=>{"use strict";var Iw=Do(),W2=1335,O7=21522,z2=Iw.getBCHDigit(W2);G2.getEncodedBits=function(n,t){let r=n.bit<<3|t,i=r<<10;for(;Iw.getBCHDigit(i)-z2>=0;)i^=W2<<Iw.getBCHDigit(i)-z2;return(r<<10|i)^O7}});var Y2=dt((iX,q2)=>{"use strict";var R7=To();function Ga(e){this.mode=R7.NUMERIC,this.data=e.toString()}Ga.getBitsLength=function(n){return 10*Math.floor(n/3)+(n%3?n%3*3+1:0)};Ga.prototype.getLength=function(){return this.data.length};Ga.prototype.getBitsLength=function(){return Ga.getBitsLength(this.data.length)};Ga.prototype.write=function(n){let t,r,i;for(t=0;t+3<=this.data.length;t+=3)r=this.data.substr(t,3),i=parseInt(r,10),n.put(i,10);let o=this.data.length-t;o>0&&(r=this.data.substr(t),i=parseInt(r,10),n.put(i,o*3+1))};q2.exports=Ga});var Z2=dt((oX,X2)=>{"use strict";var P7=To(),Sw=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function $a(e){this.mode=P7.ALPHANUMERIC,this.data=e}$a.getBitsLength=function(n){return 11*Math.floor(n/2)+6*(n%2)};$a.prototype.getLength=function(){return this.data.length};$a.prototype.getBitsLength=function(){return $a.getBitsLength(this.data.length)};$a.prototype.write=function(n){let t;for(t=0;t+2<=this.data.length;t+=2){let r=Sw.indexOf(this.data[t])*45;r+=Sw.indexOf(this.data[t+1]),n.put(r,11)}this.data.length%2&&n.put(Sw.indexOf(this.data[t]),6)};X2.exports=$a});var K2=dt((sX,Q2)=>{"use strict";Q2.exports=function(n){for(var t=[],r=n.length,i=0;i<r;i++){var o=n.charCodeAt(i);if(o>=55296&&o<=56319&&r>i+1){var c=n.charCodeAt(i+1);c>=56320&&c<=57343&&(o=(o-55296)*1024+c-56320+65536,i+=1)}if(o<128){t.push(o);continue}if(o<2048){t.push(o>>6|192),t.push(o&63|128);continue}if(o<55296||o>=57344&&o<65536){t.push(o>>12|224),t.push(o>>6&63|128),t.push(o&63|128);continue}if(o>=65536&&o<=1114111){t.push(o>>18|240),t.push(o>>12&63|128),t.push(o>>6&63|128),t.push(o&63|128);continue}t.push(239,191,189)}return new Uint8Array(t).buffer}});var eA=dt((aX,J2)=>{"use strict";var k7=K2(),L7=To();function qa(e){this.mode=L7.BYTE,typeof e=="string"&&(e=k7(e)),this.data=new Uint8Array(e)}qa.getBitsLength=function(n){return n*8};qa.prototype.getLength=function(){return this.data.length};qa.prototype.getBitsLength=function(){return qa.getBitsLength(this.data.length)};qa.prototype.write=function(e){for(let n=0,t=this.data.length;n<t;n++)e.put(this.data[n],8)};J2.exports=qa});var nA=dt((lX,tA)=>{"use strict";var F7=To(),B7=Do();function Ya(e){this.mode=F7.KANJI,this.data=e}Ya.getBitsLength=function(n){return n*13};Ya.prototype.getLength=function(){return this.data.length};Ya.prototype.getBitsLength=function(){return Ya.getBitsLength(this.data.length)};Ya.prototype.write=function(e){let n;for(n=0;n<this.data.length;n++){let t=B7.toSJIS(this.data[n]);if(t>=33088&&t<=40956)t-=33088;else if(t>=57408&&t<=60351)t-=49472;else throw new Error("Invalid SJIS character: "+this.data[n]+`
Make sure your charset is UTF-8`);t=(t>>>8&255)*192+(t&255),e.put(t,13)}};tA.exports=Ya});var rA=dt((cX,Dw)=>{"use strict";var nu={single_source_shortest_paths:function(e,n,t){var r={},i={};i[n]=0;var o=nu.PriorityQueue.make();o.push(n,0);for(var c,h,g,m,v,x,I,A,R;!o.empty();){c=o.pop(),h=c.value,m=c.cost,v=e[h]||{};for(g in v)v.hasOwnProperty(g)&&(x=v[g],I=m+x,A=i[g],R=typeof i[g]>"u",(R||A>I)&&(i[g]=I,o.push(g,I),r[g]=h))}if(typeof t<"u"&&typeof i[t]>"u"){var j=["Could not find a path from ",n," to ",t,"."].join("");throw new Error(j)}return r},extract_shortest_path_from_predecessor_list:function(e,n){for(var t=[],r=n,i;r;)t.push(r),i=e[r],r=e[r];return t.reverse(),t},find_path:function(e,n,t){var r=nu.single_source_shortest_paths(e,n,t);return nu.extract_shortest_path_from_predecessor_list(r,t)},PriorityQueue:{make:function(e){var n=nu.PriorityQueue,t={},r;e=e||{};for(r in n)n.hasOwnProperty(r)&&(t[r]=n[r]);return t.queue=[],t.sorter=e.sorter||n.default_sorter,t},default_sorter:function(e,n){return e.cost-n.cost},push:function(e,n){var t={value:e,cost:n};this.queue.push(t),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};typeof Dw<"u"&&(Dw.exports=nu)});var dA=dt(Xa=>{"use strict";var pt=To(),sA=Y2(),aA=Z2(),lA=eA(),cA=nA(),ru=xw(),Gh=Do(),V7=rA();function iA(e){return unescape(encodeURIComponent(e)).length}function iu(e,n,t){let r=[],i;for(;(i=e.exec(t))!==null;)r.push({data:i[0],index:i.index,mode:n,length:i[0].length});return r}function uA(e){let n=iu(ru.NUMERIC,pt.NUMERIC,e),t=iu(ru.ALPHANUMERIC,pt.ALPHANUMERIC,e),r,i;return Gh.isKanjiModeEnabled()?(r=iu(ru.BYTE,pt.BYTE,e),i=iu(ru.KANJI,pt.KANJI,e)):(r=iu(ru.BYTE_KANJI,pt.BYTE,e),i=[]),n.concat(t,r,i).sort(function(c,h){return c.index-h.index}).map(function(c){return{data:c.data,mode:c.mode,length:c.length}})}function Aw(e,n){switch(n){case pt.NUMERIC:return sA.getBitsLength(e);case pt.ALPHANUMERIC:return aA.getBitsLength(e);case pt.KANJI:return cA.getBitsLength(e);case pt.BYTE:return lA.getBitsLength(e)}}function U7(e){return e.reduce(function(n,t){let r=n.length-1>=0?n[n.length-1]:null;return r&&r.mode===t.mode?(n[n.length-1].data+=t.data,n):(n.push(t),n)},[])}function j7(e){let n=[];for(let t=0;t<e.length;t++){let r=e[t];switch(r.mode){case pt.NUMERIC:n.push([r,{data:r.data,mode:pt.ALPHANUMERIC,length:r.length},{data:r.data,mode:pt.BYTE,length:r.length}]);break;case pt.ALPHANUMERIC:n.push([r,{data:r.data,mode:pt.BYTE,length:r.length}]);break;case pt.KANJI:n.push([r,{data:r.data,mode:pt.BYTE,length:iA(r.data)}]);break;case pt.BYTE:n.push([{data:r.data,mode:pt.BYTE,length:iA(r.data)}])}}return n}function H7(e,n){let t={},r={start:{}},i=["start"];for(let o=0;o<e.length;o++){let c=e[o],h=[];for(let g=0;g<c.length;g++){let m=c[g],v=""+o+g;h.push(v),t[v]={node:m,lastCount:0},r[v]={};for(let x=0;x<i.length;x++){let I=i[x];t[I]&&t[I].node.mode===m.mode?(r[I][v]=Aw(t[I].lastCount+m.length,m.mode)-Aw(t[I].lastCount,m.mode),t[I].lastCount+=m.length):(t[I]&&(t[I].lastCount=m.length),r[I][v]=Aw(m.length,m.mode)+4+pt.getCharCountIndicator(m.mode,n))}}i=h}for(let o=0;o<i.length;o++)r[i[o]].end=0;return{map:r,table:t}}function oA(e,n){let t,r=pt.getBestModeForData(e);if(t=pt.from(n,r),t!==pt.BYTE&&t.bit<r.bit)throw new Error('"'+e+'" cannot be encoded with mode '+pt.toString(t)+`.
 Suggested mode is: `+pt.toString(r));switch(t===pt.KANJI&&!Gh.isKanjiModeEnabled()&&(t=pt.BYTE),t){case pt.NUMERIC:return new sA(e);case pt.ALPHANUMERIC:return new aA(e);case pt.KANJI:return new cA(e);case pt.BYTE:return new lA(e)}}Xa.fromArray=function(n){return n.reduce(function(t,r){return typeof r=="string"?t.push(oA(r,null)):r.data&&t.push(oA(r.data,r.mode)),t},[])};Xa.fromString=function(n,t){let r=uA(n,Gh.isKanjiModeEnabled()),i=j7(r),o=H7(i,t),c=V7.find_path(o.map,"start","end"),h=[];for(let g=1;g<c.length-1;g++)h.push(o.table[c[g]].node);return Xa.fromArray(U7(h))};Xa.rawSplit=function(n){return Xa.fromArray(uA(n,Gh.isKanjiModeEnabled()))}});var hA=dt(fA=>{"use strict";var qh=Do(),Tw=Bh(),z7=b2(),W7=I2(),G7=S2(),$7=T2(),Ow=M2(),Rw=ww(),q7=k2(),$h=H2(),Y7=$2(),X7=To(),Mw=dA();function Z7(e,n){let t=e.size,r=$7.getPositions(n);for(let i=0;i<r.length;i++){let o=r[i][0],c=r[i][1];for(let h=-1;h<=7;h++)if(!(o+h<=-1||t<=o+h))for(let g=-1;g<=7;g++)c+g<=-1||t<=c+g||(h>=0&&h<=6&&(g===0||g===6)||g>=0&&g<=6&&(h===0||h===6)||h>=2&&h<=4&&g>=2&&g<=4?e.set(o+h,c+g,!0,!0):e.set(o+h,c+g,!1,!0))}}function Q7(e){let n=e.size;for(let t=8;t<n-8;t++){let r=t%2===0;e.set(t,6,r,!0),e.set(6,t,r,!0)}}function K7(e,n){let t=G7.getPositions(n);for(let r=0;r<t.length;r++){let i=t[r][0],o=t[r][1];for(let c=-2;c<=2;c++)for(let h=-2;h<=2;h++)c===-2||c===2||h===-2||h===2||c===0&&h===0?e.set(i+c,o+h,!0,!0):e.set(i+c,o+h,!1,!0)}}function J7(e,n){let t=e.size,r=$h.getEncodedBits(n),i,o,c;for(let h=0;h<18;h++)i=Math.floor(h/3),o=h%3+t-8-3,c=(r>>h&1)===1,e.set(i,o,c,!0),e.set(o,i,c,!0)}function Nw(e,n,t){let r=e.size,i=Y7.getEncodedBits(n,t),o,c;for(o=0;o<15;o++)c=(i>>o&1)===1,o<6?e.set(o,8,c,!0):o<8?e.set(o+1,8,c,!0):e.set(r-15+o,8,c,!0),o<8?e.set(8,r-o-1,c,!0):o<9?e.set(8,15-o-1+1,c,!0):e.set(8,15-o-1,c,!0);e.set(r-8,8,1,!0)}function e9(e,n){let t=e.size,r=-1,i=t-1,o=7,c=0;for(let h=t-1;h>0;h-=2)for(h===6&&h--;;){for(let g=0;g<2;g++)if(!e.isReserved(i,h-g)){let m=!1;c<n.length&&(m=(n[c]>>>o&1)===1),e.set(i,h-g,m),o--,o===-1&&(c++,o=7)}if(i+=r,i<0||t<=i){i-=r,r=-r;break}}}function t9(e,n,t){let r=new z7;t.forEach(function(g){r.put(g.mode.bit,4),r.put(g.getLength(),X7.getCharCountIndicator(g.mode,e)),g.write(r)});let i=qh.getSymbolTotalCodewords(e),o=Rw.getTotalCodewordsCount(e,n),c=(i-o)*8;for(r.getLengthInBits()+4<=c&&r.put(0,4);r.getLengthInBits()%8!==0;)r.putBit(0);let h=(c-r.getLengthInBits())/8;for(let g=0;g<h;g++)r.put(g%2?17:236,8);return n9(r,e,n)}function n9(e,n,t){let r=qh.getSymbolTotalCodewords(n),i=Rw.getTotalCodewordsCount(n,t),o=r-i,c=Rw.getBlocksCount(n,t),h=r%c,g=c-h,m=Math.floor(r/c),v=Math.floor(o/c),x=v+1,I=m-v,A=new q7(I),R=0,j=new Array(c),$=new Array(c),W=0,ce=new Uint8Array(e.buffer);for(let G=0;G<c;G++){let rr=G<g?v:x;j[G]=ce.slice(R,R+rr),$[G]=A.encode(j[G]),R+=rr,W=Math.max(W,rr)}let Xe=new Uint8Array(r),ge=0,H,fe;for(H=0;H<W;H++)for(fe=0;fe<c;fe++)H<j[fe].length&&(Xe[ge++]=j[fe][H]);for(H=0;H<I;H++)for(fe=0;fe<c;fe++)Xe[ge++]=$[fe][H];return Xe}function r9(e,n,t,r){let i;if(Array.isArray(e))i=Mw.fromArray(e);else if(typeof e=="string"){let m=n;if(!m){let v=Mw.rawSplit(e);m=$h.getBestVersionForData(v,t)}i=Mw.fromString(e,m||40)}else throw new Error("Invalid data");let o=$h.getBestVersionForData(i,t);if(!o)throw new Error("The amount of data is too big to be stored in a QR Code");if(!n)n=o;else if(n<o)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+o+`.
`);let c=t9(n,t,i),h=qh.getSymbolSize(n),g=new W7(h);return Z7(g,n),Q7(g),K7(g,n),Nw(g,t,0),n>=7&&J7(g,n),e9(g,c),isNaN(r)&&(r=Ow.getBestMask(g,Nw.bind(null,g,t))),Ow.applyMask(r,g),Nw(g,t,r),{modules:g,version:n,errorCorrectionLevel:t,maskPattern:r,segments:i}}fA.create=function(n,t){if(typeof n>"u"||n==="")throw new Error("No input text");let r=Tw.M,i,o;return typeof t<"u"&&(r=Tw.from(t.errorCorrectionLevel,Tw.M),i=$h.from(t.version),o=Ow.from(t.maskPattern),t.toSJISFunc&&qh.setToSJISFunction(t.toSJISFunc)),r9(n,i,r,o)}});var Pw=dt(bs=>{"use strict";function pA(e){if(typeof e=="number"&&(e=e.toString()),typeof e!="string")throw new Error("Color should be defined as hex string");let n=e.slice().replace("#","").split("");if(n.length<3||n.length===5||n.length>8)throw new Error("Invalid hex color: "+e);(n.length===3||n.length===4)&&(n=Array.prototype.concat.apply([],n.map(function(r){return[r,r]}))),n.length===6&&n.push("F","F");let t=parseInt(n.join(""),16);return{r:t>>24&255,g:t>>16&255,b:t>>8&255,a:t&255,hex:"#"+n.slice(0,6).join("")}}bs.getOptions=function(n){n||(n={}),n.color||(n.color={});let t=typeof n.margin>"u"||n.margin===null||n.margin<0?4:n.margin,r=n.width&&n.width>=21?n.width:void 0,i=n.scale||4;return{width:r,scale:r?4:i,margin:t,color:{dark:pA(n.color.dark||"#000000ff"),light:pA(n.color.light||"#ffffffff")},type:n.type,rendererOpts:n.rendererOpts||{}}};bs.getScale=function(n,t){return t.width&&t.width>=n+t.margin*2?t.width/(n+t.margin*2):t.scale};bs.getImageWidth=function(n,t){let r=bs.getScale(n,t);return Math.floor((n+t.margin*2)*r)};bs.qrToImageData=function(n,t,r){let i=t.modules.size,o=t.modules.data,c=bs.getScale(i,r),h=Math.floor((i+r.margin*2)*c),g=r.margin*c,m=[r.color.light,r.color.dark];for(let v=0;v<h;v++)for(let x=0;x<h;x++){let I=(v*h+x)*4,A=r.color.light;if(v>=g&&x>=g&&v<h-g&&x<h-g){let R=Math.floor((v-g)/c),j=Math.floor((x-g)/c);A=m[o[R*i+j]?1:0]}n[I++]=A.r,n[I++]=A.g,n[I++]=A.b,n[I]=A.a}}});var gA=dt(Yh=>{"use strict";var kw=Pw();function i9(e,n,t){e.clearRect(0,0,n.width,n.height),n.style||(n.style={}),n.height=t,n.width=t,n.style.height=t+"px",n.style.width=t+"px"}function o9(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}Yh.render=function(n,t,r){let i=r,o=t;typeof i>"u"&&(!t||!t.getContext)&&(i=t,t=void 0),t||(o=o9()),i=kw.getOptions(i);let c=kw.getImageWidth(n.modules.size,i),h=o.getContext("2d"),g=h.createImageData(c,c);return kw.qrToImageData(g.data,n,i),i9(h,o,c),h.putImageData(g,0,0),o};Yh.renderToDataURL=function(n,t,r){let i=r;typeof i>"u"&&(!t||!t.getContext)&&(i=t,t=void 0),i||(i={});let o=Yh.render(n,t,i),c=i.type||"image/png",h=i.rendererOpts||{};return o.toDataURL(c,h.quality)}});var wA=dt(yA=>{"use strict";var s9=Pw();function mA(e,n){let t=e.a/255,r=n+'="'+e.hex+'"';return t<1?r+" "+n+'-opacity="'+t.toFixed(2).slice(1)+'"':r}function Lw(e,n,t){let r=e+n;return typeof t<"u"&&(r+=" "+t),r}function a9(e,n,t){let r="",i=0,o=!1,c=0;for(let h=0;h<e.length;h++){let g=Math.floor(h%n),m=Math.floor(h/n);!g&&!o&&(o=!0),e[h]?(c++,h>0&&g>0&&e[h-1]||(r+=o?Lw("M",g+t,.5+m+t):Lw("m",i,0),i=0,o=!1),g+1<n&&e[h+1]||(r+=Lw("h",c),c=0)):i++}return r}yA.render=function(n,t,r){let i=s9.getOptions(t),o=n.modules.size,c=n.modules.data,h=o+i.margin*2,g=i.color.light.a?"<path "+mA(i.color.light,"fill")+' d="M0 0h'+h+"v"+h+'H0z"/>':"",m="<path "+mA(i.color.dark,"stroke")+' d="'+a9(c,o,i.margin)+'"/>',v='viewBox="0 0 '+h+" "+h+'"',I='<svg xmlns="http://www.w3.org/2000/svg" '+(i.width?'width="'+i.width+'" height="'+i.width+'" ':"")+v+' shape-rendering="crispEdges">'+g+m+`</svg>
`;return typeof r=="function"&&r(null,I),I}});var _A=dt(ou=>{"use strict";var l9=_2(),Fw=hA(),CA=gA(),c9=wA();function Bw(e,n,t,r,i){let o=[].slice.call(arguments,1),c=o.length,h=typeof o[c-1]=="function";if(!h&&!l9())throw new Error("Callback required as last argument");if(h){if(c<2)throw new Error("Too few arguments provided");c===2?(i=t,t=n,n=r=void 0):c===3&&(n.getContext&&typeof i>"u"?(i=r,r=void 0):(i=r,r=t,t=n,n=void 0))}else{if(c<1)throw new Error("Too few arguments provided");return c===1?(t=n,n=r=void 0):c===2&&!n.getContext&&(r=t,t=n,n=void 0),new Promise(function(g,m){try{let v=Fw.create(t,r);g(e(v,n,r))}catch(v){m(v)}})}try{let g=Fw.create(t,r);i(null,e(g,n,r))}catch(g){i(g)}}ou.create=Fw.create;ou.toCanvas=Bw.bind(null,CA.render);ou.toDataURL=Bw.bind(null,CA.renderToDataURL);ou.toString=Bw.bind(null,function(e,n,t){return c9.render(e,t)})});var OA=dt((Jh,NA)=>{"use strict";(function(e,n){typeof Jh=="object"&&typeof NA<"u"?n(Jh):typeof define=="function"&&define.amd?define(["exports"],n):(e=typeof globalThis<"u"?globalThis:e||self,n(e.ZXing={}))})(Jh,function(e){"use strict";function n(C){return C==null}var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,s){C.__proto__=s}||function(C,s){for(var a in s)s.hasOwnProperty(a)&&(C[a]=s[a])};function r(C,s){t(C,s);function a(){this.constructor=C}C.prototype=s===null?Object.create(s):(a.prototype=s.prototype,new a)}function i(C,s){var a=Object.setPrototypeOf;a?a(C,s):C.__proto__=s}function o(C,s){s===void 0&&(s=C.constructor);var a=Error.captureStackTrace;a&&a(C,s)}var c=function(C){r(s,C);function s(a){var l=this.constructor,u=C.call(this,a)||this;return Object.defineProperty(u,"name",{value:l.name,enumerable:!1}),i(u,l.prototype),o(u),u}return s}(Error);let h=(()=>{class C extends c{constructor(a=void 0){super(a),this.message=a}getKind(){return this.constructor.kind}}return C.kind="Exception",C})(),g=(()=>{class C extends h{}return C.kind="ArgumentException",C})(),m=(()=>{class C extends h{}return C.kind="IllegalArgumentException",C})();class v{constructor(s){if(this.binarizer=s,s===null)throw new m("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(s,a){return this.binarizer.getBlackRow(s,a)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(s,a,l,u){let d=this.binarizer.getLuminanceSource().crop(s,a,l,u);return new v(this.binarizer.createBinarizer(d))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){let s=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new v(this.binarizer.createBinarizer(s))}rotateCounterClockwise45(){let s=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new v(this.binarizer.createBinarizer(s))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}let x=(()=>{class C extends h{static getChecksumInstance(){return new C}}return C.kind="ChecksumException",C})();class I{constructor(s){this.source=s}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class A{static arraycopy(s,a,l,u,d){for(;d--;)l[u++]=s[a++]}static currentTimeMillis(){return Date.now()}}let R=(()=>{class C extends h{}return C.kind="IndexOutOfBoundsException",C})(),j=(()=>{class C extends R{constructor(a=void 0,l=void 0){super(l),this.index=a,this.message=l}}return C.kind="ArrayIndexOutOfBoundsException",C})();class ${static fill(s,a){for(let l=0,u=s.length;l<u;l++)s[l]=a}static fillWithin(s,a,l,u){$.rangeCheck(s.length,a,l);for(let d=a;d<l;d++)s[d]=u}static rangeCheck(s,a,l){if(a>l)throw new m("fromIndex("+a+") > toIndex("+l+")");if(a<0)throw new j(a);if(l>s)throw new j(l)}static asList(...s){return s}static create(s,a,l){return Array.from({length:s}).map(d=>Array.from({length:a}).fill(l))}static createInt32Array(s,a,l){return Array.from({length:s}).map(d=>Int32Array.from({length:a}).fill(l))}static equals(s,a){if(!s||!a||!s.length||!a.length||s.length!==a.length)return!1;for(let l=0,u=s.length;l<u;l++)if(s[l]!==a[l])return!1;return!0}static hashCode(s){if(s===null)return 0;let a=1;for(let l of s)a=31*a+l;return a}static fillUint8Array(s,a){for(let l=0;l!==s.length;l++)s[l]=a}static copyOf(s,a){return s.slice(0,a)}static copyOfUint8Array(s,a){if(s.length<=a){let l=new Uint8Array(a);return l.set(s),l}return s.slice(0,a)}static copyOfRange(s,a,l){let u=l-a,d=new Int32Array(u);return A.arraycopy(s,a,d,0,u),d}static binarySearch(s,a,l){l===void 0&&(l=$.numberComparator);let u=0,d=s.length-1;for(;u<=d;){let f=d+u>>1,p=l(a,s[f]);if(p>0)u=f+1;else if(p<0)d=f-1;else return f}return-u-1}static numberComparator(s,a){return s-a}}class W{static numberOfTrailingZeros(s){let a;if(s===0)return 32;let l=31;return a=s<<16,a!==0&&(l-=16,s=a),a=s<<8,a!==0&&(l-=8,s=a),a=s<<4,a!==0&&(l-=4,s=a),a=s<<2,a!==0&&(l-=2,s=a),l-(s<<1>>>31)}static numberOfLeadingZeros(s){if(s===0)return 32;let a=1;return s>>>16||(a+=16,s<<=16),s>>>24||(a+=8,s<<=8),s>>>28||(a+=4,s<<=4),s>>>30||(a+=2,s<<=2),a-=s>>>31,a}static toHexString(s){return s.toString(16)}static toBinaryString(s){return String(parseInt(String(s),2))}static bitCount(s){return s=s-(s>>>1&1431655765),s=(s&858993459)+(s>>>2&858993459),s=s+(s>>>4)&252645135,s=s+(s>>>8),s=s+(s>>>16),s&63}static truncDivision(s,a){return Math.trunc(s/a)}static parseInt(s,a=void 0){return parseInt(s,a)}}W.MIN_VALUE_32_BITS=-2147483648,W.MAX_VALUE=Number.MAX_SAFE_INTEGER;class ce{constructor(s,a){s===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=s,a==null?this.bits=ce.makeArray(s):this.bits=a)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(s){if(s>this.bits.length*32){let a=ce.makeArray(s);A.arraycopy(this.bits,0,a,0,this.bits.length),this.bits=a}}get(s){return(this.bits[Math.floor(s/32)]&1<<(s&31))!==0}set(s){this.bits[Math.floor(s/32)]|=1<<(s&31)}flip(s){this.bits[Math.floor(s/32)]^=1<<(s&31)}getNextSet(s){let a=this.size;if(s>=a)return a;let l=this.bits,u=Math.floor(s/32),d=l[u];d&=~((1<<(s&31))-1);let f=l.length;for(;d===0;){if(++u===f)return a;d=l[u]}let p=u*32+W.numberOfTrailingZeros(d);return p>a?a:p}getNextUnset(s){let a=this.size;if(s>=a)return a;let l=this.bits,u=Math.floor(s/32),d=~l[u];d&=~((1<<(s&31))-1);let f=l.length;for(;d===0;){if(++u===f)return a;d=~l[u]}let p=u*32+W.numberOfTrailingZeros(d);return p>a?a:p}setBulk(s,a){this.bits[Math.floor(s/32)]=a}setRange(s,a){if(a<s||s<0||a>this.size)throw new m;if(a===s)return;a--;let l=Math.floor(s/32),u=Math.floor(a/32),d=this.bits;for(let f=l;f<=u;f++){let p=f>l?0:s&31,w=(2<<(f<u?31:a&31))-(1<<p);d[f]|=w}}clear(){let s=this.bits.length,a=this.bits;for(let l=0;l<s;l++)a[l]=0}isRange(s,a,l){if(a<s||s<0||a>this.size)throw new m;if(a===s)return!0;a--;let u=Math.floor(s/32),d=Math.floor(a/32),f=this.bits;for(let p=u;p<=d;p++){let y=p>u?0:s&31,_=(2<<(p<d?31:a&31))-(1<<y)&4294967295;if((f[p]&_)!==(l?_:0))return!1}return!0}appendBit(s){this.ensureCapacity(this.size+1),s&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(s,a){if(a<0||a>32)throw new m("Num bits must be between 0 and 32");this.ensureCapacity(this.size+a);for(let l=a;l>0;l--)this.appendBit((s>>l-1&1)===1)}appendBitArray(s){let a=s.size;this.ensureCapacity(this.size+a);for(let l=0;l<a;l++)this.appendBit(s.get(l))}xor(s){if(this.size!==s.size)throw new m("Sizes don't match");let a=this.bits;for(let l=0,u=a.length;l<u;l++)a[l]^=s.bits[l]}toBytes(s,a,l,u){for(let d=0;d<u;d++){let f=0;for(let p=0;p<8;p++)this.get(s)&&(f|=1<<7-p),s++;a[l+d]=f}}getBitArray(){return this.bits}reverse(){let s=new Int32Array(this.bits.length),a=Math.floor((this.size-1)/32),l=a+1,u=this.bits;for(let d=0;d<l;d++){let f=u[d];f=f>>1&1431655765|(f&1431655765)<<1,f=f>>2&858993459|(f&858993459)<<2,f=f>>4&252645135|(f&252645135)<<4,f=f>>8&16711935|(f&16711935)<<8,f=f>>16&65535|(f&65535)<<16,s[a-d]=f}if(this.size!==l*32){let d=l*32-this.size,f=s[0]>>>d;for(let p=1;p<l;p++){let y=s[p];f|=y<<32-d,s[p-1]=f,f=y>>>d}s[l-1]=f}this.bits=s}static makeArray(s){return new Int32Array(Math.floor((s+31)/32))}equals(s){if(!(s instanceof ce))return!1;let a=s;return this.size===a.size&&$.equals(this.bits,a.bits)}hashCode(){return 31*this.size+$.hashCode(this.bits)}toString(){let s="";for(let a=0,l=this.size;a<l;a++)a&7||(s+=" "),s+=this.get(a)?"X":".";return s}clone(){return new ce(this.size,this.bits.slice())}}var Xe=function(C){return C[C.OTHER=0]="OTHER",C[C.PURE_BARCODE=1]="PURE_BARCODE",C[C.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",C[C.TRY_HARDER=3]="TRY_HARDER",C[C.CHARACTER_SET=4]="CHARACTER_SET",C[C.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",C[C.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",C[C.ASSUME_GS1=7]="ASSUME_GS1",C[C.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",C[C.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",C[C.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS",C}(Xe||{}),ge=Xe;let H=(()=>{class C extends h{static getFormatInstance(){return new C}}return C.kind="FormatException",C})();var fe=function(C){return C[C.Cp437=0]="Cp437",C[C.ISO8859_1=1]="ISO8859_1",C[C.ISO8859_2=2]="ISO8859_2",C[C.ISO8859_3=3]="ISO8859_3",C[C.ISO8859_4=4]="ISO8859_4",C[C.ISO8859_5=5]="ISO8859_5",C[C.ISO8859_6=6]="ISO8859_6",C[C.ISO8859_7=7]="ISO8859_7",C[C.ISO8859_8=8]="ISO8859_8",C[C.ISO8859_9=9]="ISO8859_9",C[C.ISO8859_10=10]="ISO8859_10",C[C.ISO8859_11=11]="ISO8859_11",C[C.ISO8859_13=12]="ISO8859_13",C[C.ISO8859_14=13]="ISO8859_14",C[C.ISO8859_15=14]="ISO8859_15",C[C.ISO8859_16=15]="ISO8859_16",C[C.SJIS=16]="SJIS",C[C.Cp1250=17]="Cp1250",C[C.Cp1251=18]="Cp1251",C[C.Cp1252=19]="Cp1252",C[C.Cp1256=20]="Cp1256",C[C.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",C[C.UTF8=22]="UTF8",C[C.ASCII=23]="ASCII",C[C.Big5=24]="Big5",C[C.GB18030=25]="GB18030",C[C.EUC_KR=26]="EUC_KR",C}(fe||{});class G{constructor(s,a,l,...u){this.valueIdentifier=s,this.name=l,typeof a=="number"?this.values=Int32Array.from([a]):this.values=a,this.otherEncodingNames=u,G.VALUE_IDENTIFIER_TO_ECI.set(s,this),G.NAME_TO_ECI.set(l,this);let d=this.values;for(let f=0,p=d.length;f!==p;f++){let y=d[f];G.VALUES_TO_ECI.set(y,this)}for(let f of u)G.NAME_TO_ECI.set(f,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(s){if(s<0||s>=900)throw new H("incorect value");let a=G.VALUES_TO_ECI.get(s);if(a===void 0)throw new H("incorect value");return a}static getCharacterSetECIByName(s){let a=G.NAME_TO_ECI.get(s);if(a===void 0)throw new H("incorect value");return a}equals(s){if(!(s instanceof G))return!1;let a=s;return this.getName()===a.getName()}}G.VALUE_IDENTIFIER_TO_ECI=new Map,G.VALUES_TO_ECI=new Map,G.NAME_TO_ECI=new Map,G.Cp437=new G(fe.Cp437,Int32Array.from([0,2]),"Cp437"),G.ISO8859_1=new G(fe.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),G.ISO8859_2=new G(fe.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),G.ISO8859_3=new G(fe.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),G.ISO8859_4=new G(fe.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),G.ISO8859_5=new G(fe.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),G.ISO8859_6=new G(fe.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),G.ISO8859_7=new G(fe.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),G.ISO8859_8=new G(fe.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),G.ISO8859_9=new G(fe.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),G.ISO8859_10=new G(fe.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),G.ISO8859_11=new G(fe.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),G.ISO8859_13=new G(fe.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),G.ISO8859_14=new G(fe.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),G.ISO8859_15=new G(fe.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),G.ISO8859_16=new G(fe.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),G.SJIS=new G(fe.SJIS,20,"SJIS","Shift_JIS"),G.Cp1250=new G(fe.Cp1250,21,"Cp1250","windows-1250"),G.Cp1251=new G(fe.Cp1251,22,"Cp1251","windows-1251"),G.Cp1252=new G(fe.Cp1252,23,"Cp1252","windows-1252"),G.Cp1256=new G(fe.Cp1256,24,"Cp1256","windows-1256"),G.UnicodeBigUnmarked=new G(fe.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),G.UTF8=new G(fe.UTF8,26,"UTF8","UTF-8"),G.ASCII=new G(fe.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),G.Big5=new G(fe.Big5,28,"Big5"),G.GB18030=new G(fe.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),G.EUC_KR=new G(fe.EUC_KR,30,"EUC_KR","EUC-KR");let rr=(()=>{class C extends h{}return C.kind="UnsupportedOperationException",C})();class On{static decode(s,a){let l=this.encodingName(a);return this.customDecoder?this.customDecoder(s,l):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(l)?this.decodeFallback(s,l):new TextDecoder(l).decode(s)}static shouldDecodeOnFallback(s){return!On.isBrowser()&&s==="ISO-8859-1"}static encode(s,a){let l=this.encodingName(a);return this.customEncoder?this.customEncoder(s,l):typeof TextEncoder>"u"?this.encodeFallback(s):new TextEncoder().encode(s)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(s){return typeof s=="string"?s:s.getName()}static encodingCharacterSet(s){return s instanceof G?s:G.getCharacterSetECIByName(s)}static decodeFallback(s,a){let l=this.encodingCharacterSet(a);if(On.isDecodeFallbackSupported(l)){let u="";for(let d=0,f=s.length;d<f;d++){let p=s[d].toString(16);p.length<2&&(p="0"+p),u+="%"+p}return decodeURIComponent(u)}if(l.equals(G.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(s.buffer));throw new rr(`Encoding ${this.encodingName(a)} not supported by fallback.`)}static isDecodeFallbackSupported(s){return s.equals(G.UTF8)||s.equals(G.ISO8859_1)||s.equals(G.ASCII)}static encodeFallback(s){let l=btoa(unescape(encodeURIComponent(s))).split(""),u=[];for(let d=0;d<l.length;d++)u.push(l[d].charCodeAt(0));return new Uint8Array(u)}}class Ee{static castAsNonUtf8Char(s,a=null){let l=a?a.getName():this.ISO88591;return On.decode(new Uint8Array([s]),l)}static guessEncoding(s,a){if(a!=null&&a.get(ge.CHARACTER_SET)!==void 0)return a.get(ge.CHARACTER_SET).toString();let l=s.length,u=!0,d=!0,f=!0,p=0,y=0,w=0,_=0,b=0,E=0,D=0,T=0,O=0,k=0,F=0,q=s.length>3&&s[0]===239&&s[1]===187&&s[2]===191;for(let re=0;re<l&&(u||d||f);re++){let V=s[re]&255;f&&(p>0?V&128?p--:f=!1:V&128&&(V&64?(p++,V&32?(p++,V&16?(p++,V&8?f=!1:_++):w++):y++):f=!1)),u&&(V>127&&V<160?u=!1:V>159&&(V<192||V===215||V===247)&&F++),d&&(b>0?V<64||V===127||V>252?d=!1:b--:V===128||V===160||V>239?d=!1:V>160&&V<224?(E++,T=0,D++,D>O&&(O=D)):V>127?(b++,D=0,T++,T>k&&(k=T)):(D=0,T=0))}return f&&p>0&&(f=!1),d&&b>0&&(d=!1),f&&(q||y+w+_>0)?Ee.UTF8:d&&(Ee.ASSUME_SHIFT_JIS||O>=3||k>=3)?Ee.SHIFT_JIS:u&&d?O===2&&E===2||F*10>=l?Ee.SHIFT_JIS:Ee.ISO88591:u?Ee.ISO88591:d?Ee.SHIFT_JIS:f?Ee.UTF8:Ee.PLATFORM_DEFAULT_ENCODING}static format(s,...a){let l=-1;function u(f,p,y,w,_,b){if(f==="%%")return"%";if(a[++l]===void 0)return;f=w?parseInt(w.substr(1)):void 0;let E=_?parseInt(_.substr(1)):void 0,D;switch(b){case"s":D=a[l];break;case"c":D=a[l][0];break;case"f":D=parseFloat(a[l]).toFixed(f);break;case"p":D=parseFloat(a[l]).toPrecision(f);break;case"e":D=parseFloat(a[l]).toExponential(f);break;case"x":D=parseInt(a[l]).toString(E||16);break;case"d":D=parseFloat(parseInt(a[l],E||10).toPrecision(f)).toFixed(0);break}D=typeof D=="object"?JSON.stringify(D):(+D).toString(E);let T=parseInt(y),O=y&&y[0]+""=="0"?"0":" ";for(;D.length<T;)D=p!==void 0?D+O:O+D;return D}let d=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return s.replace(d,u)}static getBytes(s,a){return On.encode(s,a)}static getCharCode(s,a=0){return s.charCodeAt(a)}static getCharAt(s){return String.fromCharCode(s)}}Ee.SHIFT_JIS=G.SJIS.getName(),Ee.GB2312="GB2312",Ee.ISO88591=G.ISO8859_1.getName(),Ee.EUC_JP="EUC_JP",Ee.UTF8=G.UTF8.getName(),Ee.PLATFORM_DEFAULT_ENCODING=Ee.UTF8,Ee.ASSUME_SHIFT_JIS=!1;class yt{constructor(s=""){this.value=s}enableDecoding(s){return this.encoding=s,this}append(s){return typeof s=="string"?this.value+=s.toString():this.encoding?this.value+=Ee.castAsNonUtf8Char(s,this.encoding):this.value+=String.fromCharCode(s),this}appendChars(s,a,l){for(let u=a;a<a+l;u++)this.append(s[u]);return this}length(){return this.value.length}charAt(s){return this.value.charAt(s)}deleteCharAt(s){this.value=this.value.substr(0,s)+this.value.substring(s+1)}setCharAt(s,a){this.value=this.value.substr(0,s)+a+this.value.substr(s+1)}substring(s,a){return this.value.substring(s,a)}setLengthToZero(){this.value=""}toString(){return this.value}insert(s,a){this.value=this.value.substr(0,s)+a+this.value.substr(s+a.length)}}class ln{constructor(s,a,l,u){if(this.width=s,this.height=a,this.rowSize=l,this.bits=u,a==null&&(a=s),this.height=a,s<1||a<1)throw new m("Both dimensions must be greater than 0");l==null&&(l=Math.floor((s+31)/32)),this.rowSize=l,u==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(s){let a=s.length,l=s[0].length,u=new ln(l,a);for(let d=0;d<a;d++){let f=s[d];for(let p=0;p<l;p++)f[p]&&u.set(p,d)}return u}static parseFromString(s,a,l){if(s===null)throw new m("stringRepresentation cannot be null");let u=new Array(s.length),d=0,f=0,p=-1,y=0,w=0;for(;w<s.length;)if(s.charAt(w)===`
`||s.charAt(w)==="\r"){if(d>f){if(p===-1)p=d-f;else if(d-f!==p)throw new m("row lengths do not match");f=d,y++}w++}else if(s.substring(w,w+a.length)===a)w+=a.length,u[d]=!0,d++;else if(s.substring(w,w+l.length)===l)w+=l.length,u[d]=!1,d++;else throw new m("illegal character encountered: "+s.substring(w));if(d>f){if(p===-1)p=d-f;else if(d-f!==p)throw new m("row lengths do not match");y++}let _=new ln(p,y);for(let b=0;b<d;b++)u[b]&&_.set(Math.floor(b%p),Math.floor(b/p));return _}get(s,a){let l=a*this.rowSize+Math.floor(s/32);return(this.bits[l]>>>(s&31)&1)!==0}set(s,a){let l=a*this.rowSize+Math.floor(s/32);this.bits[l]|=1<<(s&31)&4294967295}unset(s,a){let l=a*this.rowSize+Math.floor(s/32);this.bits[l]&=~(1<<(s&31)&4294967295)}flip(s,a){let l=a*this.rowSize+Math.floor(s/32);this.bits[l]^=1<<(s&31)&4294967295}xor(s){if(this.width!==s.getWidth()||this.height!==s.getHeight()||this.rowSize!==s.getRowSize())throw new m("input matrix dimensions do not match");let a=new ce(Math.floor(this.width/32)+1),l=this.rowSize,u=this.bits;for(let d=0,f=this.height;d<f;d++){let p=d*l,y=s.getRow(d,a).getBitArray();for(let w=0;w<l;w++)u[p+w]^=y[w]}}clear(){let s=this.bits,a=s.length;for(let l=0;l<a;l++)s[l]=0}setRegion(s,a,l,u){if(a<0||s<0)throw new m("Left and top must be nonnegative");if(u<1||l<1)throw new m("Height and width must be at least 1");let d=s+l,f=a+u;if(f>this.height||d>this.width)throw new m("The region must fit inside the matrix");let p=this.rowSize,y=this.bits;for(let w=a;w<f;w++){let _=w*p;for(let b=s;b<d;b++)y[_+Math.floor(b/32)]|=1<<(b&31)&4294967295}}getRow(s,a){a==null||a.getSize()<this.width?a=new ce(this.width):a.clear();let l=this.rowSize,u=this.bits,d=s*l;for(let f=0;f<l;f++)a.setBulk(f*32,u[d+f]);return a}setRow(s,a){A.arraycopy(a.getBitArray(),0,this.bits,s*this.rowSize,this.rowSize)}rotate180(){let s=this.getWidth(),a=this.getHeight(),l=new ce(s),u=new ce(s);for(let d=0,f=Math.floor((a+1)/2);d<f;d++)l=this.getRow(d,l),u=this.getRow(a-1-d,u),l.reverse(),u.reverse(),this.setRow(d,u),this.setRow(a-1-d,l)}getEnclosingRectangle(){let s=this.width,a=this.height,l=this.rowSize,u=this.bits,d=s,f=a,p=-1,y=-1;for(let w=0;w<a;w++)for(let _=0;_<l;_++){let b=u[w*l+_];if(b!==0){if(w<f&&(f=w),w>y&&(y=w),_*32<d){let E=0;for(;!(b<<31-E&4294967295);)E++;_*32+E<d&&(d=_*32+E)}if(_*32+31>p){let E=31;for(;!(b>>>E);)E--;_*32+E>p&&(p=_*32+E)}}}return p<d||y<f?null:Int32Array.from([d,f,p-d+1,y-f+1])}getTopLeftOnBit(){let s=this.rowSize,a=this.bits,l=0;for(;l<a.length&&a[l]===0;)l++;if(l===a.length)return null;let u=l/s,d=l%s*32,f=a[l],p=0;for(;!(f<<31-p&4294967295);)p++;return d+=p,Int32Array.from([d,u])}getBottomRightOnBit(){let s=this.rowSize,a=this.bits,l=a.length-1;for(;l>=0&&a[l]===0;)l--;if(l<0)return null;let u=Math.floor(l/s),d=Math.floor(l%s)*32,f=a[l],p=31;for(;!(f>>>p);)p--;return d+=p,Int32Array.from([d,u])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(s){if(!(s instanceof ln))return!1;let a=s;return this.width===a.width&&this.height===a.height&&this.rowSize===a.rowSize&&$.equals(this.bits,a.bits)}hashCode(){let s=this.width;return s=31*s+this.width,s=31*s+this.height,s=31*s+this.rowSize,s=31*s+$.hashCode(this.bits),s}toString(s="X ",a="  ",l=`
`){return this.buildToString(s,a,l)}buildToString(s,a,l){let u=new yt;for(let d=0,f=this.height;d<f;d++){for(let p=0,y=this.width;p<y;p++)u.append(this.get(p,d)?s:a);u.append(l)}return u.toString()}clone(){return new ln(this.width,this.height,this.rowSize,this.bits.slice())}}let U=(()=>{class C extends h{static getNotFoundInstance(){return new C}}return C.kind="NotFoundException",C})();class cn extends I{constructor(s){super(s),this.luminances=cn.EMPTY,this.buckets=new Int32Array(cn.LUMINANCE_BUCKETS)}getBlackRow(s,a){let l=this.getLuminanceSource(),u=l.getWidth();a==null||a.getSize()<u?a=new ce(u):a.clear(),this.initArrays(u);let d=l.getRow(s,this.luminances),f=this.buckets;for(let y=0;y<u;y++)f[(d[y]&255)>>cn.LUMINANCE_SHIFT]++;let p=cn.estimateBlackPoint(f);if(u<3)for(let y=0;y<u;y++)(d[y]&255)<p&&a.set(y);else{let y=d[0]&255,w=d[1]&255;for(let _=1;_<u-1;_++){let b=d[_+1]&255;(w*4-y-b)/2<p&&a.set(_),y=w,w=b}}return a}getBlackMatrix(){let s=this.getLuminanceSource(),a=s.getWidth(),l=s.getHeight(),u=new ln(a,l);this.initArrays(a);let d=this.buckets;for(let y=1;y<5;y++){let w=Math.floor(l*y/5),_=s.getRow(w,this.luminances),b=Math.floor(a*4/5);for(let E=Math.floor(a/5);E<b;E++){let D=_[E]&255;d[D>>cn.LUMINANCE_SHIFT]++}}let f=cn.estimateBlackPoint(d),p=s.getMatrix();for(let y=0;y<l;y++){let w=y*a;for(let _=0;_<a;_++)(p[w+_]&255)<f&&u.set(_,y)}return u}createBinarizer(s){return new cn(s)}initArrays(s){this.luminances.length<s&&(this.luminances=new Uint8ClampedArray(s));let a=this.buckets;for(let l=0;l<cn.LUMINANCE_BUCKETS;l++)a[l]=0}static estimateBlackPoint(s){let a=s.length,l=0,u=0,d=0;for(let _=0;_<a;_++)s[_]>d&&(u=_,d=s[_]),s[_]>l&&(l=s[_]);let f=0,p=0;for(let _=0;_<a;_++){let b=_-u,E=s[_]*b*b;E>p&&(f=_,p=E)}if(u>f){let _=u;u=f,f=_}if(f-u<=a/16)throw new U;let y=f-1,w=-1;for(let _=f-1;_>u;_--){let b=_-u,E=b*b*(f-_)*(l-s[_]);E>w&&(y=_,w=E)}return y<<cn.LUMINANCE_SHIFT}}cn.LUMINANCE_BITS=5,cn.LUMINANCE_SHIFT=8-cn.LUMINANCE_BITS,cn.LUMINANCE_BUCKETS=1<<cn.LUMINANCE_BITS,cn.EMPTY=Uint8ClampedArray.from([0]);class Pe extends cn{constructor(s){super(s),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;let s=this.getLuminanceSource(),a=s.getWidth(),l=s.getHeight();if(a>=Pe.MINIMUM_DIMENSION&&l>=Pe.MINIMUM_DIMENSION){let u=s.getMatrix(),d=a>>Pe.BLOCK_SIZE_POWER;a&Pe.BLOCK_SIZE_MASK&&d++;let f=l>>Pe.BLOCK_SIZE_POWER;l&Pe.BLOCK_SIZE_MASK&&f++;let p=Pe.calculateBlackPoints(u,d,f,a,l),y=new ln(a,l);Pe.calculateThresholdForBlock(u,d,f,a,l,p,y),this.matrix=y}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(s){return new Pe(s)}static calculateThresholdForBlock(s,a,l,u,d,f,p){let y=d-Pe.BLOCK_SIZE,w=u-Pe.BLOCK_SIZE;for(let _=0;_<l;_++){let b=_<<Pe.BLOCK_SIZE_POWER;b>y&&(b=y);let E=Pe.cap(_,2,l-3);for(let D=0;D<a;D++){let T=D<<Pe.BLOCK_SIZE_POWER;T>w&&(T=w);let O=Pe.cap(D,2,a-3),k=0;for(let q=-2;q<=2;q++){let re=f[E+q];k+=re[O-2]+re[O-1]+re[O]+re[O+1]+re[O+2]}let F=k/25;Pe.thresholdBlock(s,T,b,F,u,p)}}}static cap(s,a,l){return s<a?a:s>l?l:s}static thresholdBlock(s,a,l,u,d,f){for(let p=0,y=l*d+a;p<Pe.BLOCK_SIZE;p++,y+=d)for(let w=0;w<Pe.BLOCK_SIZE;w++)(s[y+w]&255)<=u&&f.set(a+w,l+p)}static calculateBlackPoints(s,a,l,u,d){let f=d-Pe.BLOCK_SIZE,p=u-Pe.BLOCK_SIZE,y=new Array(l);for(let w=0;w<l;w++){y[w]=new Int32Array(a);let _=w<<Pe.BLOCK_SIZE_POWER;_>f&&(_=f);for(let b=0;b<a;b++){let E=b<<Pe.BLOCK_SIZE_POWER;E>p&&(E=p);let D=0,T=255,O=0;for(let F=0,q=_*u+E;F<Pe.BLOCK_SIZE;F++,q+=u){for(let re=0;re<Pe.BLOCK_SIZE;re++){let V=s[q+re]&255;D+=V,V<T&&(T=V),V>O&&(O=V)}if(O-T>Pe.MIN_DYNAMIC_RANGE)for(F++,q+=u;F<Pe.BLOCK_SIZE;F++,q+=u)for(let re=0;re<Pe.BLOCK_SIZE;re++)D+=s[q+re]&255}let k=D>>Pe.BLOCK_SIZE_POWER*2;if(O-T<=Pe.MIN_DYNAMIC_RANGE&&(k=T/2,w>0&&b>0)){let F=(y[w-1][b]+2*y[w][b-1]+y[w-1][b-1])/4;T<F&&(k=F)}y[w][b]=k}}return y}}Pe.BLOCK_SIZE_POWER=3,Pe.BLOCK_SIZE=1<<Pe.BLOCK_SIZE_POWER,Pe.BLOCK_SIZE_MASK=Pe.BLOCK_SIZE-1,Pe.MINIMUM_DIMENSION=Pe.BLOCK_SIZE*5,Pe.MIN_DYNAMIC_RANGE=24;class Qa{constructor(s,a){this.width=s,this.height=a}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(s,a,l,u){throw new rr("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new rr("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new rr("This luminance source does not support rotation by 45 degrees.")}toString(){let s=new Uint8ClampedArray(this.width),a=new yt;for(let l=0;l<this.height;l++){let u=this.getRow(l,s);for(let d=0;d<this.width;d++){let f=u[d]&255,p;f<64?p="#":f<128?p="+":f<192?p=".":p=" ",a.append(p)}a.append(`
`)}return a.toString()}}class Xi extends Qa{constructor(s){super(s.getWidth(),s.getHeight()),this.delegate=s}getRow(s,a){let l=this.delegate.getRow(s,a),u=this.getWidth();for(let d=0;d<u;d++)l[d]=255-(l[d]&255);return l}getMatrix(){let s=this.delegate.getMatrix(),a=this.getWidth()*this.getHeight(),l=new Uint8ClampedArray(a);for(let u=0;u<a;u++)l[u]=255-(s[u]&255);return l}isCropSupported(){return this.delegate.isCropSupported()}crop(s,a,l,u){return new Xi(this.delegate.crop(s,a,l,u))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new Xi(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new Xi(this.delegate.rotateCounterClockwise45())}}class Zi extends Qa{constructor(s){super(s.width,s.height),this.canvas=s,this.tempCanvasElement=null,this.buffer=Zi.makeBufferFromCanvasImageData(s)}static makeBufferFromCanvasImageData(s){let a=s.getContext("2d").getImageData(0,0,s.width,s.height);return Zi.toGrayscaleBuffer(a.data,s.width,s.height)}static toGrayscaleBuffer(s,a,l){let u=new Uint8ClampedArray(a*l);for(let d=0,f=0,p=s.length;d<p;d+=4,f++){let y;if(s[d+3]===0)y=255;else{let _=s[d],b=s[d+1],E=s[d+2];y=306*_+601*b+117*E+512>>10}u[f]=y}return u}getRow(s,a){if(s<0||s>=this.getHeight())throw new m("Requested row is outside the image: "+s);let l=this.getWidth(),u=s*l;return a===null?a=this.buffer.slice(u,u+l):(a.length<l&&(a=new Uint8ClampedArray(l)),a.set(this.buffer.slice(u,u+l))),a}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(s,a,l,u){return super.crop(s,a,l,u),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){let s=this.canvas.ownerDocument.createElement("canvas");s.width=this.canvas.width,s.height=this.canvas.height,this.tempCanvasElement=s}return this.tempCanvasElement}rotate(s){let a=this.getTempCanvasElement(),l=a.getContext("2d"),u=s*Zi.DEGREE_TO_RADIANS,d=this.canvas.width,f=this.canvas.height,p=Math.ceil(Math.abs(Math.cos(u))*d+Math.abs(Math.sin(u))*f),y=Math.ceil(Math.abs(Math.sin(u))*d+Math.abs(Math.cos(u))*f);return a.width=p,a.height=y,l.translate(p/2,y/2),l.rotate(u),l.drawImage(this.canvas,d/-2,f/-2),this.buffer=Zi.makeBufferFromCanvasImageData(a),this}invert(){return new Xi(this)}}Zi.DEGREE_TO_RADIANS=Math.PI/180;class Yw{constructor(s,a,l){this.deviceId=s,this.label=a,this.kind="videoinput",this.groupId=l||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var Ln=(globalThis||global||self||window||void 0)&&(globalThis||global||self||window||void 0).__awaiter||function(C,s,a,l){function u(d){return d instanceof a?d:new a(function(f){f(d)})}return new(a||(a=Promise))(function(d,f){function p(_){try{w(l.next(_))}catch(b){f(b)}}function y(_){try{w(l.throw(_))}catch(b){f(b)}}function w(_){_.done?d(_.value):u(_.value).then(p,y)}w((l=l.apply(C,s||[])).next())})};class Po{constructor(s,a=500,l){this.reader=s,this.timeBetweenScansMillis=a,this._hints=l,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(s){this._timeBetweenDecodingAttempts=s<0?0:s}set hints(s){this._hints=s||null}get hints(){return this._hints}listVideoInputDevices(){return Ln(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");let s=yield navigator.mediaDevices.enumerateDevices(),a=[];for(let l of s){let u=l.kind==="video"?"videoinput":l.kind;if(u!=="videoinput")continue;let d=l.deviceId||l.id,f=l.label||`Video device ${a.length+1}`,p=l.groupId,y={deviceId:d,label:f,kind:u,groupId:p};a.push(y)}return a})}getVideoInputDevices(){return Ln(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(a=>new Yw(a.deviceId,a.label))})}findDeviceById(s){return Ln(this,void 0,void 0,function*(){let a=yield this.listVideoInputDevices();return a?a.find(l=>l.deviceId===s):null})}decodeFromInputVideoDevice(s,a){return Ln(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(s,a)})}decodeOnceFromVideoDevice(s,a){return Ln(this,void 0,void 0,function*(){this.reset();let l;s?l={deviceId:{exact:s}}:l={facingMode:"environment"};let u={video:l};return yield this.decodeOnceFromConstraints(u,a)})}decodeOnceFromConstraints(s,a){return Ln(this,void 0,void 0,function*(){let l=yield navigator.mediaDevices.getUserMedia(s);return yield this.decodeOnceFromStream(l,a)})}decodeOnceFromStream(s,a){return Ln(this,void 0,void 0,function*(){this.reset();let l=yield this.attachStreamToVideo(s,a);return yield this.decodeOnce(l)})}decodeFromInputVideoDeviceContinuously(s,a,l){return Ln(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(s,a,l)})}decodeFromVideoDevice(s,a,l){return Ln(this,void 0,void 0,function*(){let u;s?u={deviceId:{exact:s}}:u={facingMode:"environment"};let d={video:u};return yield this.decodeFromConstraints(d,a,l)})}decodeFromConstraints(s,a,l){return Ln(this,void 0,void 0,function*(){let u=yield navigator.mediaDevices.getUserMedia(s);return yield this.decodeFromStream(u,a,l)})}decodeFromStream(s,a,l){return Ln(this,void 0,void 0,function*(){this.reset();let u=yield this.attachStreamToVideo(s,a);return yield this.decodeContinuously(u,l)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(s,a){return Ln(this,void 0,void 0,function*(){let l=this.prepareVideoElement(a);return this.addVideoSource(l,s),this.videoElement=l,this.stream=s,yield this.playVideoOnLoadAsync(l),l})}playVideoOnLoadAsync(s){return new Promise((a,l)=>this.playVideoOnLoad(s,()=>a()))}playVideoOnLoad(s,a){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(s),s.addEventListener("ended",this.videoEndedListener),s.addEventListener("canplay",this.videoCanPlayListener),s.addEventListener("playing",a),this.tryPlayVideo(s)}isVideoPlaying(s){return s.currentTime>0&&!s.paused&&!s.ended&&s.readyState>2}tryPlayVideo(s){return Ln(this,void 0,void 0,function*(){if(this.isVideoPlaying(s)){console.warn("Trying to play video that is already playing.");return}try{yield s.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(s,a){let l=document.getElementById(s);if(!l)throw new g(`element with id '${s}' not found`);if(l.nodeName.toLowerCase()!==a.toLowerCase())throw new g(`element with id '${s}' must be an ${a} element`);return l}decodeFromImage(s,a){if(!s&&!a)throw new g("either imageElement with a src set or an url must be provided");return a&&!s?this.decodeFromImageUrl(a):this.decodeFromImageElement(s)}decodeFromVideo(s,a){if(!s&&!a)throw new g("Either an element with a src set or an URL must be provided");return a&&!s?this.decodeFromVideoUrl(a):this.decodeFromVideoElement(s)}decodeFromVideoContinuously(s,a,l){if(s===void 0&&a===void 0)throw new g("Either an element with a src set or an URL must be provided");return a&&!s?this.decodeFromVideoUrlContinuously(a,l):this.decodeFromVideoElementContinuously(s,l)}decodeFromImageElement(s){if(!s)throw new g("An image element must be provided.");this.reset();let a=this.prepareImageElement(s);this.imageElement=a;let l;return this.isImageLoaded(a)?l=this.decodeOnce(a,!1,!0):l=this._decodeOnLoadImage(a),l}decodeFromVideoElement(s){let a=this._decodeFromVideoElementSetup(s);return this._decodeOnLoadVideo(a)}decodeFromVideoElementContinuously(s,a){let l=this._decodeFromVideoElementSetup(s);return this._decodeOnLoadVideoContinuously(l,a)}_decodeFromVideoElementSetup(s){if(!s)throw new g("A video element must be provided.");this.reset();let a=this.prepareVideoElement(s);return this.videoElement=a,a}decodeFromImageUrl(s){if(!s)throw new g("An URL must be provided.");this.reset();let a=this.prepareImageElement();this.imageElement=a;let l=this._decodeOnLoadImage(a);return a.src=s,l}decodeFromVideoUrl(s){if(!s)throw new g("An URL must be provided.");this.reset();let a=this.prepareVideoElement(),l=this.decodeFromVideoElement(a);return a.src=s,l}decodeFromVideoUrlContinuously(s,a){if(!s)throw new g("An URL must be provided.");this.reset();let l=this.prepareVideoElement(),u=this.decodeFromVideoElementContinuously(l,a);return l.src=s,u}_decodeOnLoadImage(s){return new Promise((a,l)=>{this.imageLoadedListener=()=>this.decodeOnce(s,!1,!0).then(a,l),s.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(s){return Ln(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(s),yield this.decodeOnce(s)})}_decodeOnLoadVideoContinuously(s,a){return Ln(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(s),this.decodeContinuously(s,a)})}isImageLoaded(s){return!(!s.complete||s.naturalWidth===0)}prepareImageElement(s){let a;return typeof s>"u"&&(a=document.createElement("img"),a.width=200,a.height=200),typeof s=="string"&&(a=this.getMediaElement(s,"img")),s instanceof HTMLImageElement&&(a=s),a}prepareVideoElement(s){let a;return!s&&typeof document<"u"&&(a=document.createElement("video"),a.width=200,a.height=200),typeof s=="string"&&(a=this.getMediaElement(s,"video")),s instanceof HTMLVideoElement&&(a=s),a.setAttribute("autoplay","true"),a.setAttribute("muted","true"),a.setAttribute("playsinline","true"),a}decodeOnce(s,a=!0,l=!0){this._stopAsyncDecode=!1;let u=(d,f)=>{if(this._stopAsyncDecode){f(new U("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{let p=this.decode(s);d(p)}catch(p){let y=a&&p instanceof U,_=(p instanceof x||p instanceof H)&&l;if(y||_)return setTimeout(u,this._timeBetweenDecodingAttempts,d,f);f(p)}};return new Promise((d,f)=>u(d,f))}decodeContinuously(s,a){this._stopContinuousDecode=!1;let l=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{let u=this.decode(s);a(u,null),setTimeout(l,this.timeBetweenScansMillis)}catch(u){a(null,u);let d=u instanceof x||u instanceof H,f=u instanceof U;(d||f)&&setTimeout(l,this._timeBetweenDecodingAttempts)}};l()}decode(s){let a=this.createBinaryBitmap(s);return this.decodeBitmap(a)}_isHTMLVideoElement(s){return s.videoWidth!==0}drawFrameOnCanvas(s,a,l){a||(a={sx:0,sy:0,sWidth:s.videoWidth,sHeight:s.videoHeight,dx:0,dy:0,dWidth:s.videoWidth,dHeight:s.videoHeight}),l||(l=this.captureCanvasContext),l.drawImage(s,a.sx,a.sy,a.sWidth,a.sHeight,a.dx,a.dy,a.dWidth,a.dHeight)}drawImageOnCanvas(s,a,l=this.captureCanvasContext){a||(a={sx:0,sy:0,sWidth:s.naturalWidth,sHeight:s.naturalHeight,dx:0,dy:0,dWidth:s.naturalWidth,dHeight:s.naturalHeight}),l||(l=this.captureCanvasContext),l.drawImage(s,a.sx,a.sy,a.sWidth,a.sHeight,a.dx,a.dy,a.dWidth,a.dHeight)}createBinaryBitmap(s){let a=this.getCaptureCanvasContext(s);this._isHTMLVideoElement(s)?this.drawFrameOnCanvas(s):this.drawImageOnCanvas(s);let l=this.getCaptureCanvas(s),u=new Zi(l),d=new Pe(u);return new v(d)}getCaptureCanvasContext(s){if(!this.captureCanvasContext){let l=this.getCaptureCanvas(s).getContext("2d");this.captureCanvasContext=l}return this.captureCanvasContext}getCaptureCanvas(s){if(!this.captureCanvas){let a=this.createCaptureCanvas(s);this.captureCanvas=a}return this.captureCanvas}decodeBitmap(s){return this.reader.decode(s,this._hints)}createCaptureCanvas(s){if(typeof document>"u")return this._destroyCaptureCanvas(),null;let a=document.createElement("canvas"),l,u;return typeof s<"u"&&(s instanceof HTMLVideoElement?(l=s.videoWidth,u=s.videoHeight):s instanceof HTMLImageElement&&(l=s.naturalWidth||s.width,u=s.naturalHeight||s.height)),a.style.width=l+"px",a.style.height=u+"px",a.width=l,a.height=u,a}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(s=>s.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(s,a){try{s.srcObject=a}catch{s.src=URL.createObjectURL(a)}}cleanVideoSource(s){try{s.srcObject=null}catch{s.src=""}this.videoElement.removeAttribute("src")}}class Fn{constructor(s,a,l=a==null?0:8*a.length,u,d,f=A.currentTimeMillis()){this.text=s,this.rawBytes=a,this.numBits=l,this.resultPoints=u,this.format=d,this.timestamp=f,this.text=s,this.rawBytes=a,l==null?this.numBits=a==null?0:8*a.length:this.numBits=l,this.resultPoints=u,this.format=d,this.resultMetadata=null,f==null?this.timestamp=A.currentTimeMillis():this.timestamp=f}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(s,a){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(s,a)}putAllMetadata(s){s!==null&&(this.resultMetadata===null?this.resultMetadata=s:this.resultMetadata=new Map(s))}addResultPoints(s){let a=this.resultPoints;if(a===null)this.resultPoints=s;else if(s!==null&&s.length>0){let l=new Array(a.length+s.length);A.arraycopy(a,0,l,0,a.length),A.arraycopy(s,0,l,a.length,s.length),this.resultPoints=l}}getTimestamp(){return this.timestamp}toString(){return this.text}}var Xw=function(C){return C[C.AZTEC=0]="AZTEC",C[C.CODABAR=1]="CODABAR",C[C.CODE_39=2]="CODE_39",C[C.CODE_93=3]="CODE_93",C[C.CODE_128=4]="CODE_128",C[C.DATA_MATRIX=5]="DATA_MATRIX",C[C.EAN_8=6]="EAN_8",C[C.EAN_13=7]="EAN_13",C[C.ITF=8]="ITF",C[C.MAXICODE=9]="MAXICODE",C[C.PDF_417=10]="PDF_417",C[C.QR_CODE=11]="QR_CODE",C[C.RSS_14=12]="RSS_14",C[C.RSS_EXPANDED=13]="RSS_EXPANDED",C[C.UPC_A=14]="UPC_A",C[C.UPC_E=15]="UPC_E",C[C.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION",C}(Xw||{}),we=Xw,Zw=function(C){return C[C.OTHER=0]="OTHER",C[C.ORIENTATION=1]="ORIENTATION",C[C.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",C[C.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",C[C.ISSUE_NUMBER=4]="ISSUE_NUMBER",C[C.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",C[C.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",C[C.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",C[C.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",C[C.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",C[C.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY",C}(Zw||{}),un=Zw;class Ka{constructor(s,a,l,u,d=-1,f=-1){this.rawBytes=s,this.text=a,this.byteSegments=l,this.ecLevel=u,this.structuredAppendSequenceNumber=d,this.structuredAppendParity=f,this.numBits=s==null?0:8*s.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(s){this.numBits=s}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(s){this.errorsCorrected=s}getErasures(){return this.erasures}setErasures(s){this.erasures=s}getOther(){return this.other}setOther(s){this.other=s}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class Ja{exp(s){return this.expTable[s]}log(s){if(s===0)throw new m;return this.logTable[s]}static addOrSubtract(s,a){return s^a}}class Gn{constructor(s,a){if(a.length===0)throw new m;this.field=s;let l=a.length;if(l>1&&a[0]===0){let u=1;for(;u<l&&a[u]===0;)u++;u===l?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(l-u),A.arraycopy(a,u,this.coefficients,0,this.coefficients.length))}else this.coefficients=a}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(s){return this.coefficients[this.coefficients.length-1-s]}evaluateAt(s){if(s===0)return this.getCoefficient(0);let a=this.coefficients,l;if(s===1){l=0;for(let f=0,p=a.length;f!==p;f++){let y=a[f];l=Ja.addOrSubtract(l,y)}return l}l=a[0];let u=a.length,d=this.field;for(let f=1;f<u;f++)l=Ja.addOrSubtract(d.multiply(s,l),a[f]);return l}addOrSubtract(s){if(!this.field.equals(s.field))throw new m("GenericGFPolys do not have same GenericGF field");if(this.isZero())return s;if(s.isZero())return this;let a=this.coefficients,l=s.coefficients;if(a.length>l.length){let f=a;a=l,l=f}let u=new Int32Array(l.length),d=l.length-a.length;A.arraycopy(l,0,u,0,d);for(let f=d;f<l.length;f++)u[f]=Ja.addOrSubtract(a[f-d],l[f]);return new Gn(this.field,u)}multiply(s){if(!this.field.equals(s.field))throw new m("GenericGFPolys do not have same GenericGF field");if(this.isZero()||s.isZero())return this.field.getZero();let a=this.coefficients,l=a.length,u=s.coefficients,d=u.length,f=new Int32Array(l+d-1),p=this.field;for(let y=0;y<l;y++){let w=a[y];for(let _=0;_<d;_++)f[y+_]=Ja.addOrSubtract(f[y+_],p.multiply(w,u[_]))}return new Gn(p,f)}multiplyScalar(s){if(s===0)return this.field.getZero();if(s===1)return this;let a=this.coefficients.length,l=this.field,u=new Int32Array(a),d=this.coefficients;for(let f=0;f<a;f++)u[f]=l.multiply(d[f],s);return new Gn(l,u)}multiplyByMonomial(s,a){if(s<0)throw new m;if(a===0)return this.field.getZero();let l=this.coefficients,u=l.length,d=new Int32Array(u+s),f=this.field;for(let p=0;p<u;p++)d[p]=f.multiply(l[p],a);return new Gn(f,d)}divide(s){if(!this.field.equals(s.field))throw new m("GenericGFPolys do not have same GenericGF field");if(s.isZero())throw new m("Divide by 0");let a=this.field,l=a.getZero(),u=this,d=s.getCoefficient(s.getDegree()),f=a.inverse(d);for(;u.getDegree()>=s.getDegree()&&!u.isZero();){let p=u.getDegree()-s.getDegree(),y=a.multiply(u.getCoefficient(u.getDegree()),f),w=s.multiplyByMonomial(p,y),_=a.buildMonomial(p,y);l=l.addOrSubtract(_),u=u.addOrSubtract(w)}return[l,u]}toString(){let s="";for(let a=this.getDegree();a>=0;a--){let l=this.getCoefficient(a);if(l!==0){if(l<0?(s+=" - ",l=-l):s.length>0&&(s+=" + "),a===0||l!==1){let u=this.field.log(l);u===0?s+="1":u===1?s+="a":(s+="a^",s+=u)}a!==0&&(a===1?s+="x":(s+="x^",s+=a))}}return s}}let rp=(()=>{class C extends h{}return C.kind="ArithmeticException",C})();class at extends Ja{constructor(s,a,l){super(),this.primitive=s,this.size=a,this.generatorBase=l;let u=new Int32Array(a),d=1;for(let p=0;p<a;p++)u[p]=d,d*=2,d>=a&&(d^=s,d&=a-1);this.expTable=u;let f=new Int32Array(a);for(let p=0;p<a-1;p++)f[u[p]]=p;this.logTable=f,this.zero=new Gn(this,Int32Array.from([0])),this.one=new Gn(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(s,a){if(s<0)throw new m;if(a===0)return this.zero;let l=new Int32Array(s+1);return l[0]=a,new Gn(this,l)}inverse(s){if(s===0)throw new rp;return this.expTable[this.size-this.logTable[s]-1]}multiply(s,a){return s===0||a===0?0:this.expTable[(this.logTable[s]+this.logTable[a])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+W.toHexString(this.primitive)+","+this.size+")"}equals(s){return s===this}}at.AZTEC_DATA_12=new at(4201,4096,1),at.AZTEC_DATA_10=new at(1033,1024,1),at.AZTEC_DATA_6=new at(67,64,1),at.AZTEC_PARAM=new at(19,16,1),at.QR_CODE_FIELD_256=new at(285,256,0),at.DATA_MATRIX_FIELD_256=new at(301,256,1),at.AZTEC_DATA_8=at.DATA_MATRIX_FIELD_256,at.MAXICODE_FIELD_64=at.AZTEC_DATA_6;let el=(()=>{class C extends h{}return C.kind="ReedSolomonException",C})(),vi=(()=>{class C extends h{}return C.kind="IllegalStateException",C})();class tl{constructor(s){this.field=s}decode(s,a){let l=this.field,u=new Gn(l,s),d=new Int32Array(a),f=!0;for(let D=0;D<a;D++){let T=u.evaluateAt(l.exp(D+l.getGeneratorBase()));d[d.length-1-D]=T,T!==0&&(f=!1)}if(f)return;let p=new Gn(l,d),y=this.runEuclideanAlgorithm(l.buildMonomial(a,1),p,a),w=y[0],_=y[1],b=this.findErrorLocations(w),E=this.findErrorMagnitudes(_,b);for(let D=0;D<b.length;D++){let T=s.length-1-l.log(b[D]);if(T<0)throw new el("Bad error location");s[T]=at.addOrSubtract(s[T],E[D])}}runEuclideanAlgorithm(s,a,l){if(s.getDegree()<a.getDegree()){let D=s;s=a,a=D}let u=this.field,d=s,f=a,p=u.getZero(),y=u.getOne();for(;f.getDegree()>=(l/2|0);){let D=d,T=p;if(d=f,p=y,d.isZero())throw new el("r_{i-1} was zero");f=D;let O=u.getZero(),k=d.getCoefficient(d.getDegree()),F=u.inverse(k);for(;f.getDegree()>=d.getDegree()&&!f.isZero();){let q=f.getDegree()-d.getDegree(),re=u.multiply(f.getCoefficient(f.getDegree()),F);O=O.addOrSubtract(u.buildMonomial(q,re)),f=f.addOrSubtract(d.multiplyByMonomial(q,re))}if(y=O.multiply(p).addOrSubtract(T),f.getDegree()>=d.getDegree())throw new vi("Division algorithm failed to reduce polynomial?")}let w=y.getCoefficient(0);if(w===0)throw new el("sigmaTilde(0) was zero");let _=u.inverse(w),b=y.multiplyScalar(_),E=f.multiplyScalar(_);return[b,E]}findErrorLocations(s){let a=s.getDegree();if(a===1)return Int32Array.from([s.getCoefficient(1)]);let l=new Int32Array(a),u=0,d=this.field;for(let f=1;f<d.getSize()&&u<a;f++)s.evaluateAt(f)===0&&(l[u]=d.inverse(f),u++);if(u!==a)throw new el("Error locator degree does not match number of roots");return l}findErrorMagnitudes(s,a){let l=a.length,u=new Int32Array(l),d=this.field;for(let f=0;f<l;f++){let p=d.inverse(a[f]),y=1;for(let w=0;w<l;w++)if(f!==w){let _=d.multiply(a[w],p),b=_&1?_&-2:_|1;y=d.multiply(y,b)}u[f]=d.multiply(s.evaluateAt(p),d.inverse(y)),d.getGeneratorBase()!==0&&(u[f]=d.multiply(u[f],p))}return u}}var Rn=function(C){return C[C.UPPER=0]="UPPER",C[C.LOWER=1]="LOWER",C[C.MIXED=2]="MIXED",C[C.DIGIT=3]="DIGIT",C[C.PUNCT=4]="PUNCT",C[C.BINARY=5]="BINARY",C}(Rn||{});let ip=(()=>{class C{decode(a){this.ddata=a;let l=a.getBits(),u=this.extractBits(l),d=this.correctBits(u),f=C.convertBoolArrayToByteArray(d),p=C.getEncodedData(d),y=new Ka(f,p,null,null);return y.setNumBits(d.length),y}static highLevelDecode(a){return this.getEncodedData(a)}static getEncodedData(a){let l=a.length,u=Rn.UPPER,d=Rn.UPPER,f="",p=0;for(;p<l;)if(d===Rn.BINARY){if(l-p<5)break;let y=C.readCode(a,p,5);if(p+=5,y===0){if(l-p<11)break;y=C.readCode(a,p,11)+31,p+=11}for(let w=0;w<y;w++){if(l-p<8){p=l;break}let _=C.readCode(a,p,8);f+=Ee.castAsNonUtf8Char(_),p+=8}d=u}else{let y=d===Rn.DIGIT?4:5;if(l-p<y)break;let w=C.readCode(a,p,y);p+=y;let _=C.getCharacter(d,w);_.startsWith("CTRL_")?(u=d,d=C.getTable(_.charAt(5)),_.charAt(6)==="L"&&(u=d)):(f+=_,d=u)}return f}static getTable(a){switch(a){case"L":return Rn.LOWER;case"P":return Rn.PUNCT;case"M":return Rn.MIXED;case"D":return Rn.DIGIT;case"B":return Rn.BINARY;case"U":default:return Rn.UPPER}}static getCharacter(a,l){switch(a){case Rn.UPPER:return C.UPPER_TABLE[l];case Rn.LOWER:return C.LOWER_TABLE[l];case Rn.MIXED:return C.MIXED_TABLE[l];case Rn.PUNCT:return C.PUNCT_TABLE[l];case Rn.DIGIT:return C.DIGIT_TABLE[l];default:throw new vi("Bad table")}}correctBits(a){let l,u;this.ddata.getNbLayers()<=2?(u=6,l=at.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(u=8,l=at.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(u=10,l=at.AZTEC_DATA_10):(u=12,l=at.AZTEC_DATA_12);let d=this.ddata.getNbDatablocks(),f=a.length/u;if(f<d)throw new H;let p=a.length%u,y=new Int32Array(f);for(let D=0;D<f;D++,p+=u)y[D]=C.readCode(a,p,u);try{new tl(l).decode(y,f-d)}catch(D){throw new H(D)}let w=(1<<u)-1,_=0;for(let D=0;D<d;D++){let T=y[D];if(T===0||T===w)throw new H;(T===1||T===w-1)&&_++}let b=new Array(d*u-_),E=0;for(let D=0;D<d;D++){let T=y[D];if(T===1||T===w-1)b.fill(T>1,E,E+u-1),E+=u-1;else for(let O=u-1;O>=0;--O)b[E++]=(T&1<<O)!==0}return b}extractBits(a){let l=this.ddata.isCompact(),u=this.ddata.getNbLayers(),d=(l?11:14)+u*4,f=new Int32Array(d),p=new Array(this.totalBitsInLayer(u,l));if(l)for(let y=0;y<f.length;y++)f[y]=y;else{let y=d+1+2*W.truncDivision(W.truncDivision(d,2)-1,15),w=d/2,_=W.truncDivision(y,2);for(let b=0;b<w;b++){let E=b+W.truncDivision(b,15);f[w-b-1]=_-E-1,f[w+b]=_+E+1}}for(let y=0,w=0;y<u;y++){let _=(u-y)*4+(l?9:12),b=y*2,E=d-1-b;for(let D=0;D<_;D++){let T=D*2;for(let O=0;O<2;O++)p[w+T+O]=a.get(f[b+O],f[b+D]),p[w+2*_+T+O]=a.get(f[b+D],f[E-O]),p[w+4*_+T+O]=a.get(f[E-O],f[E-D]),p[w+6*_+T+O]=a.get(f[E-D],f[b+O])}w+=_*8}return p}static readCode(a,l,u){let d=0;for(let f=l;f<l+u;f++)d<<=1,a[f]&&(d|=1);return d}static readByte(a,l){let u=a.length-l;return u>=8?C.readCode(a,l,8):C.readCode(a,l,u)<<8-u}static convertBoolArrayToByteArray(a){let l=new Uint8Array((a.length+7)/8);for(let u=0;u<l.length;u++)l[u]=C.readByte(a,8*u);return l}totalBitsInLayer(a,l){return((l?88:112)+16*a)*a}}return C.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],C.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],C.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],C.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],C.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],C})();class et{constructor(){}static round(s){return s===NaN?0:s<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:s>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:s+(s<0?-.5:.5)|0}static distance(s,a,l,u){let d=s-l,f=a-u;return Math.sqrt(d*d+f*f)}static sum(s){let a=0;for(let l=0,u=s.length;l!==u;l++){let d=s[l];a+=d}return a}}class au{static floatToIntBits(s){return s}}au.MAX_VALUE=Number.MAX_SAFE_INTEGER;class ue{constructor(s,a){this.x=s,this.y=a}getX(){return this.x}getY(){return this.y}equals(s){if(s instanceof ue){let a=s;return this.x===a.x&&this.y===a.y}return!1}hashCode(){return 31*au.floatToIntBits(this.x)+au.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(s){let a=this.distance(s[0],s[1]),l=this.distance(s[1],s[2]),u=this.distance(s[0],s[2]),d,f,p;if(l>=a&&l>=u?(f=s[0],d=s[1],p=s[2]):u>=l&&u>=a?(f=s[1],d=s[0],p=s[2]):(f=s[2],d=s[0],p=s[1]),this.crossProductZ(d,f,p)<0){let y=d;d=p,p=y}s[0]=d,s[1]=f,s[2]=p}static distance(s,a){return et.distance(s.x,s.y,a.x,a.y)}static crossProductZ(s,a,l){let u=a.x,d=a.y;return(l.x-u)*(s.y-d)-(l.y-d)*(s.x-u)}}class lu{constructor(s,a){this.bits=s,this.points=a}getBits(){return this.bits}getPoints(){return this.points}}class Qw extends lu{constructor(s,a,l,u,d){super(s,a),this.compact=l,this.nbDatablocks=u,this.nbLayers=d}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}let cu=(()=>{class C{constructor(a,l,u,d){this.image=a,this.height=a.getHeight(),this.width=a.getWidth(),l==null&&(l=C.INIT_SIZE),u==null&&(u=a.getWidth()/2|0),d==null&&(d=a.getHeight()/2|0);let f=l/2|0;if(this.leftInit=u-f,this.rightInit=u+f,this.upInit=d-f,this.downInit=d+f,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new U}detect(){let a=this.leftInit,l=this.rightInit,u=this.upInit,d=this.downInit,f=!1,p=!0,y=!1,w=!1,_=!1,b=!1,E=!1,D=this.width,T=this.height;for(;p;){p=!1;let O=!0;for(;(O||!w)&&l<D;)O=this.containsBlackPoint(u,d,l,!1),O?(l++,p=!0,w=!0):w||l++;if(l>=D){f=!0;break}let k=!0;for(;(k||!_)&&d<T;)k=this.containsBlackPoint(a,l,d,!0),k?(d++,p=!0,_=!0):_||d++;if(d>=T){f=!0;break}let F=!0;for(;(F||!b)&&a>=0;)F=this.containsBlackPoint(u,d,a,!1),F?(a--,p=!0,b=!0):b||a--;if(a<0){f=!0;break}let q=!0;for(;(q||!E)&&u>=0;)q=this.containsBlackPoint(a,l,u,!0),q?(u--,p=!0,E=!0):E||u--;if(u<0){f=!0;break}p&&(y=!0)}if(!f&&y){let O=l-a,k=null;for(let V=1;k===null&&V<O;V++)k=this.getBlackPointOnSegment(a,d-V,a+V,d);if(k==null)throw new U;let F=null;for(let V=1;F===null&&V<O;V++)F=this.getBlackPointOnSegment(a,u+V,a+V,u);if(F==null)throw new U;let q=null;for(let V=1;q===null&&V<O;V++)q=this.getBlackPointOnSegment(l,u+V,l-V,u);if(q==null)throw new U;let re=null;for(let V=1;re===null&&V<O;V++)re=this.getBlackPointOnSegment(l,d-V,l-V,d);if(re==null)throw new U;return this.centerEdges(re,k,q,F)}else throw new U}getBlackPointOnSegment(a,l,u,d){let f=et.round(et.distance(a,l,u,d)),p=(u-a)/f,y=(d-l)/f,w=this.image;for(let _=0;_<f;_++){let b=et.round(a+_*p),E=et.round(l+_*y);if(w.get(b,E))return new ue(b,E)}return null}centerEdges(a,l,u,d){let f=a.getX(),p=a.getY(),y=l.getX(),w=l.getY(),_=u.getX(),b=u.getY(),E=d.getX(),D=d.getY(),T=C.CORR;return f<this.width/2?[new ue(E-T,D+T),new ue(y+T,w+T),new ue(_-T,b-T),new ue(f+T,p-T)]:[new ue(E+T,D+T),new ue(y+T,w-T),new ue(_-T,b+T),new ue(f-T,p-T)]}containsBlackPoint(a,l,u,d){let f=this.image;if(d){for(let p=a;p<=l;p++)if(f.get(p,u))return!0}else for(let p=a;p<=l;p++)if(f.get(u,p))return!0;return!1}}return C.INIT_SIZE=10,C.CORR=1,C})();class op{static checkAndNudgePoints(s,a){let l=s.getWidth(),u=s.getHeight(),d=!0;for(let f=0;f<a.length&&d;f+=2){let p=Math.floor(a[f]),y=Math.floor(a[f+1]);if(p<-1||p>l||y<-1||y>u)throw new U;d=!1,p===-1?(a[f]=0,d=!0):p===l&&(a[f]=l-1,d=!0),y===-1?(a[f+1]=0,d=!0):y===u&&(a[f+1]=u-1,d=!0)}d=!0;for(let f=a.length-2;f>=0&&d;f-=2){let p=Math.floor(a[f]),y=Math.floor(a[f+1]);if(p<-1||p>l||y<-1||y>u)throw new U;d=!1,p===-1?(a[f]=0,d=!0):p===l&&(a[f]=l-1,d=!0),y===-1?(a[f+1]=0,d=!0):y===u&&(a[f+1]=u-1,d=!0)}}}class Mr{constructor(s,a,l,u,d,f,p,y,w){this.a11=s,this.a21=a,this.a31=l,this.a12=u,this.a22=d,this.a32=f,this.a13=p,this.a23=y,this.a33=w}static quadrilateralToQuadrilateral(s,a,l,u,d,f,p,y,w,_,b,E,D,T,O,k){let F=Mr.quadrilateralToSquare(s,a,l,u,d,f,p,y);return Mr.squareToQuadrilateral(w,_,b,E,D,T,O,k).times(F)}transformPoints(s){let a=s.length,l=this.a11,u=this.a12,d=this.a13,f=this.a21,p=this.a22,y=this.a23,w=this.a31,_=this.a32,b=this.a33;for(let E=0;E<a;E+=2){let D=s[E],T=s[E+1],O=d*D+y*T+b;s[E]=(l*D+f*T+w)/O,s[E+1]=(u*D+p*T+_)/O}}transformPointsWithValues(s,a){let l=this.a11,u=this.a12,d=this.a13,f=this.a21,p=this.a22,y=this.a23,w=this.a31,_=this.a32,b=this.a33,E=s.length;for(let D=0;D<E;D++){let T=s[D],O=a[D],k=d*T+y*O+b;s[D]=(l*T+f*O+w)/k,a[D]=(u*T+p*O+_)/k}}static squareToQuadrilateral(s,a,l,u,d,f,p,y){let w=s-l+d-p,_=a-u+f-y;if(w===0&&_===0)return new Mr(l-s,d-l,s,u-a,f-u,a,0,0,1);{let b=l-d,E=p-d,D=u-f,T=y-f,O=b*T-E*D,k=(w*T-E*_)/O,F=(b*_-w*D)/O;return new Mr(l-s+k*l,p-s+F*p,s,u-a+k*u,y-a+F*y,a,k,F,1)}}static quadrilateralToSquare(s,a,l,u,d,f,p,y){return Mr.squareToQuadrilateral(s,a,l,u,d,f,p,y).buildAdjoint()}buildAdjoint(){return new Mr(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(s){return new Mr(this.a11*s.a11+this.a21*s.a12+this.a31*s.a13,this.a11*s.a21+this.a21*s.a22+this.a31*s.a23,this.a11*s.a31+this.a21*s.a32+this.a31*s.a33,this.a12*s.a11+this.a22*s.a12+this.a32*s.a13,this.a12*s.a21+this.a22*s.a22+this.a32*s.a23,this.a12*s.a31+this.a22*s.a32+this.a32*s.a33,this.a13*s.a11+this.a23*s.a12+this.a33*s.a13,this.a13*s.a21+this.a23*s.a22+this.a33*s.a23,this.a13*s.a31+this.a23*s.a32+this.a33*s.a33)}}class Kw extends op{sampleGrid(s,a,l,u,d,f,p,y,w,_,b,E,D,T,O,k,F,q,re){let V=Mr.quadrilateralToQuadrilateral(u,d,f,p,y,w,_,b,E,D,T,O,k,F,q,re);return this.sampleGridWithTransform(s,a,l,V)}sampleGridWithTransform(s,a,l,u){if(a<=0||l<=0)throw new U;let d=new ln(a,l),f=new Float32Array(2*a);for(let p=0;p<l;p++){let y=f.length,w=p+.5;for(let _=0;_<y;_+=2)f[_]=_/2+.5,f[_+1]=w;u.transformPoints(f),op.checkAndNudgePoints(s,f);try{for(let _=0;_<y;_+=2)s.get(Math.floor(f[_]),Math.floor(f[_+1]))&&d.set(_/2,p)}catch{throw new U}}return d}}class Qi{static setGridSampler(s){Qi.gridSampler=s}static getInstance(){return Qi.gridSampler}}Qi.gridSampler=new Kw;class Bn{constructor(s,a){this.x=s,this.y=a}toResultPoint(){return new ue(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Jw{constructor(s){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=s}detect(){return this.detectMirror(!1)}detectMirror(s){let a=this.getMatrixCenter(),l=this.getBullsEyeCorners(a);if(s){let f=l[0];l[0]=l[2],l[2]=f}this.extractParameters(l);let u=this.sampleGrid(this.image,l[this.shift%4],l[(this.shift+1)%4],l[(this.shift+2)%4],l[(this.shift+3)%4]),d=this.getMatrixCornerPoints(l);return new Qw(u,d,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(s){if(!this.isValidPoint(s[0])||!this.isValidPoint(s[1])||!this.isValidPoint(s[2])||!this.isValidPoint(s[3]))throw new U;let a=2*this.nbCenterLayers,l=new Int32Array([this.sampleLine(s[0],s[1],a),this.sampleLine(s[1],s[2],a),this.sampleLine(s[2],s[3],a),this.sampleLine(s[3],s[0],a)]);this.shift=this.getRotation(l,a);let u=0;for(let f=0;f<4;f++){let p=l[(this.shift+f)%4];this.compact?(u<<=7,u+=p>>1&127):(u<<=10,u+=(p>>2&992)+(p>>1&31))}let d=this.getCorrectedParameterData(u,this.compact);this.compact?(this.nbLayers=(d>>6)+1,this.nbDataBlocks=(d&63)+1):(this.nbLayers=(d>>11)+1,this.nbDataBlocks=(d&2047)+1)}getRotation(s,a){let l=0;s.forEach((u,d,f)=>{let p=(u>>a-2<<1)+(u&1);l=(l<<3)+p}),l=((l&1)<<11)+(l>>1);for(let u=0;u<4;u++)if(W.bitCount(l^this.EXPECTED_CORNER_BITS[u])<=2)return u;throw new U}getCorrectedParameterData(s,a){let l,u;a?(l=7,u=2):(l=10,u=4);let d=l-u,f=new Int32Array(l);for(let y=l-1;y>=0;--y)f[y]=s&15,s>>=4;try{new tl(at.AZTEC_PARAM).decode(f,d)}catch{throw new U}let p=0;for(let y=0;y<u;y++)p=(p<<4)+f[y];return p}getBullsEyeCorners(s){let a=s,l=s,u=s,d=s,f=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let b=this.getFirstDifferent(a,f,1,-1),E=this.getFirstDifferent(l,f,1,1),D=this.getFirstDifferent(u,f,-1,1),T=this.getFirstDifferent(d,f,-1,-1);if(this.nbCenterLayers>2){let O=this.distancePoint(T,b)*this.nbCenterLayers/(this.distancePoint(d,a)*(this.nbCenterLayers+2));if(O<.75||O>1.25||!this.isWhiteOrBlackRectangle(b,E,D,T))break}a=b,l=E,u=D,d=T,f=!f}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new U;this.compact=this.nbCenterLayers===5;let p=new ue(a.getX()+.5,a.getY()-.5),y=new ue(l.getX()+.5,l.getY()+.5),w=new ue(u.getX()-.5,u.getY()+.5),_=new ue(d.getX()-.5,d.getY()-.5);return this.expandSquare([p,y,w,_],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let s,a,l,u;try{let p=new cu(this.image).detect();s=p[0],a=p[1],l=p[2],u=p[3]}catch{let y=this.image.getWidth()/2,w=this.image.getHeight()/2;s=this.getFirstDifferent(new Bn(y+7,w-7),!1,1,-1).toResultPoint(),a=this.getFirstDifferent(new Bn(y+7,w+7),!1,1,1).toResultPoint(),l=this.getFirstDifferent(new Bn(y-7,w+7),!1,-1,1).toResultPoint(),u=this.getFirstDifferent(new Bn(y-7,w-7),!1,-1,-1).toResultPoint()}let d=et.round((s.getX()+u.getX()+a.getX()+l.getX())/4),f=et.round((s.getY()+u.getY()+a.getY()+l.getY())/4);try{let p=new cu(this.image,15,d,f).detect();s=p[0],a=p[1],l=p[2],u=p[3]}catch{s=this.getFirstDifferent(new Bn(d+7,f-7),!1,1,-1).toResultPoint(),a=this.getFirstDifferent(new Bn(d+7,f+7),!1,1,1).toResultPoint(),l=this.getFirstDifferent(new Bn(d-7,f+7),!1,-1,1).toResultPoint(),u=this.getFirstDifferent(new Bn(d-7,f-7),!1,-1,-1).toResultPoint()}return d=et.round((s.getX()+u.getX()+a.getX()+l.getX())/4),f=et.round((s.getY()+u.getY()+a.getY()+l.getY())/4),new Bn(d,f)}getMatrixCornerPoints(s){return this.expandSquare(s,2*this.nbCenterLayers,this.getDimension())}sampleGrid(s,a,l,u,d){let f=Qi.getInstance(),p=this.getDimension(),y=p/2-this.nbCenterLayers,w=p/2+this.nbCenterLayers;return f.sampleGrid(s,p,p,y,y,w,y,w,w,y,w,a.getX(),a.getY(),l.getX(),l.getY(),u.getX(),u.getY(),d.getX(),d.getY())}sampleLine(s,a,l){let u=0,d=this.distanceResultPoint(s,a),f=d/l,p=s.getX(),y=s.getY(),w=f*(a.getX()-s.getX())/d,_=f*(a.getY()-s.getY())/d;for(let b=0;b<l;b++)this.image.get(et.round(p+b*w),et.round(y+b*_))&&(u|=1<<l-b-1);return u}isWhiteOrBlackRectangle(s,a,l,u){let d=3;s=new Bn(s.getX()-d,s.getY()+d),a=new Bn(a.getX()-d,a.getY()-d),l=new Bn(l.getX()+d,l.getY()-d),u=new Bn(u.getX()+d,u.getY()+d);let f=this.getColor(u,s);if(f===0)return!1;let p=this.getColor(s,a);return p!==f||(p=this.getColor(a,l),p!==f)?!1:(p=this.getColor(l,u),p===f)}getColor(s,a){let l=this.distancePoint(s,a),u=(a.getX()-s.getX())/l,d=(a.getY()-s.getY())/l,f=0,p=s.getX(),y=s.getY(),w=this.image.get(s.getX(),s.getY()),_=Math.ceil(l);for(let E=0;E<_;E++)p+=u,y+=d,this.image.get(et.round(p),et.round(y))!==w&&f++;let b=f/l;return b>.1&&b<.9?0:b<=.1===w?1:-1}getFirstDifferent(s,a,l,u){let d=s.getX()+l,f=s.getY()+u;for(;this.isValid(d,f)&&this.image.get(d,f)===a;)d+=l,f+=u;for(d-=l,f-=u;this.isValid(d,f)&&this.image.get(d,f)===a;)d+=l;for(d-=l;this.isValid(d,f)&&this.image.get(d,f)===a;)f+=u;return f-=u,new Bn(d,f)}expandSquare(s,a,l){let u=l/(2*a),d=s[0].getX()-s[2].getX(),f=s[0].getY()-s[2].getY(),p=(s[0].getX()+s[2].getX())/2,y=(s[0].getY()+s[2].getY())/2,w=new ue(p+u*d,y+u*f),_=new ue(p-u*d,y-u*f);d=s[1].getX()-s[3].getX(),f=s[1].getY()-s[3].getY(),p=(s[1].getX()+s[3].getX())/2,y=(s[1].getY()+s[3].getY())/2;let b=new ue(p+u*d,y+u*f),E=new ue(p-u*d,y-u*f);return[w,b,_,E]}isValid(s,a){return s>=0&&s<this.image.getWidth()&&a>0&&a<this.image.getHeight()}isValidPoint(s){let a=et.round(s.getX()),l=et.round(s.getY());return this.isValid(a,l)}distancePoint(s,a){return et.distance(s.getX(),s.getY(),a.getX(),a.getY())}distanceResultPoint(s,a){return et.distance(s.getX(),s.getY(),a.getX(),a.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(W.truncDivision(this.nbLayers-4,8)+1)+15}}class uu{decode(s,a=null){let l=null,u=new Jw(s.getBlackMatrix()),d=null,f=null;try{let _=u.detectMirror(!1);d=_.getPoints(),this.reportFoundResultPoints(a,d),f=new ip().decode(_)}catch(_){l=_}if(f==null)try{let _=u.detectMirror(!0);d=_.getPoints(),this.reportFoundResultPoints(a,d),f=new ip().decode(_)}catch(_){throw l??_}let p=new Fn(f.getText(),f.getRawBytes(),f.getNumBits(),d,we.AZTEC,A.currentTimeMillis()),y=f.getByteSegments();y!=null&&p.putMetadata(un.BYTE_SEGMENTS,y);let w=f.getECLevel();return w!=null&&p.putMetadata(un.ERROR_CORRECTION_LEVEL,w),p}reportFoundResultPoints(s,a){if(s!=null){let l=s.get(ge.NEED_RESULT_POINT_CALLBACK);l!=null&&a.forEach((u,d,f)=>{l.foundPossibleResultPoint(u)})}}reset(){}}class gT extends Po{constructor(s=500){super(new uu,s)}}class $t{decode(s,a){try{return this.doDecode(s,a)}catch{if(a&&a.get(ge.TRY_HARDER)===!0&&s.isRotateSupported()){let d=s.rotateCounterClockwise(),f=this.doDecode(d,a),p=f.getResultMetadata(),y=270;p!==null&&p.get(un.ORIENTATION)===!0&&(y=y+p.get(un.ORIENTATION)%360),f.putMetadata(un.ORIENTATION,y);let w=f.getResultPoints();if(w!==null){let _=d.getHeight();for(let b=0;b<w.length;b++)w[b]=new ue(_-w[b].getY()-1,w[b].getX())}return f}else throw new U}}reset(){}doDecode(s,a){let l=s.getWidth(),u=s.getHeight(),d=new ce(l),f=a&&a.get(ge.TRY_HARDER)===!0,p=Math.max(1,u>>(f?8:5)),y;f?y=u:y=15;let w=Math.trunc(u/2);for(let _=0;_<y;_++){let b=Math.trunc((_+1)/2),E=(_&1)===0,D=w+p*(E?b:-b);if(D<0||D>=u)break;try{d=s.getBlackRow(D,d)}catch{continue}for(let T=0;T<2;T++){if(T===1&&(d.reverse(),a&&a.get(ge.NEED_RESULT_POINT_CALLBACK)===!0)){let O=new Map;a.forEach((k,F)=>O.set(F,k)),O.delete(ge.NEED_RESULT_POINT_CALLBACK),a=O}try{let O=this.decodeRow(D,d,a);if(T===1){O.putMetadata(un.ORIENTATION,180);let k=O.getResultPoints();k!==null&&(k[0]=new ue(l-k[0].getX()-1,k[0].getY()),k[1]=new ue(l-k[1].getX()-1,k[1].getY()))}return O}catch{}}}throw new U}static recordPattern(s,a,l){let u=l.length;for(let w=0;w<u;w++)l[w]=0;let d=s.getSize();if(a>=d)throw new U;let f=!s.get(a),p=0,y=a;for(;y<d;){if(s.get(y)!==f)l[p]++;else{if(++p===u)break;l[p]=1,f=!f}y++}if(!(p===u||p===u-1&&y===d))throw new U}static recordPatternInReverse(s,a,l){let u=l.length,d=s.get(a);for(;a>0&&u>=0;)s.get(--a)!==d&&(u--,d=!d);if(u>=0)throw new U;$t.recordPattern(s,a+1,l)}static patternMatchVariance(s,a,l){let u=s.length,d=0,f=0;for(let w=0;w<u;w++)d+=s[w],f+=a[w];if(d<f)return Number.POSITIVE_INFINITY;let p=d/f;l*=p;let y=0;for(let w=0;w<u;w++){let _=s[w],b=a[w]*p,E=_>b?_-b:b-_;if(E>l)return Number.POSITIVE_INFINITY;y+=E}return y/d}}class te extends $t{static findStartPattern(s){let a=s.getSize(),l=s.getNextSet(0),u=0,d=Int32Array.from([0,0,0,0,0,0]),f=l,p=!1,y=6;for(let w=l;w<a;w++)if(s.get(w)!==p)d[u]++;else{if(u===y-1){let _=te.MAX_AVG_VARIANCE,b=-1;for(let E=te.CODE_START_A;E<=te.CODE_START_C;E++){let D=$t.patternMatchVariance(d,te.CODE_PATTERNS[E],te.MAX_INDIVIDUAL_VARIANCE);D<_&&(_=D,b=E)}if(b>=0&&s.isRange(Math.max(0,f-(w-f)/2),f,!1))return Int32Array.from([f,w,b]);f+=d[0]+d[1],d=d.slice(2,d.length-1),d[u-1]=0,d[u]=0,u--}else u++;d[u]=1,p=!p}throw new U}static decodeCode(s,a,l){$t.recordPattern(s,l,a);let u=te.MAX_AVG_VARIANCE,d=-1;for(let f=0;f<te.CODE_PATTERNS.length;f++){let p=te.CODE_PATTERNS[f],y=this.patternMatchVariance(a,p,te.MAX_INDIVIDUAL_VARIANCE);y<u&&(u=y,d=f)}if(d>=0)return d;throw new U}decodeRow(s,a,l){let u=l&&l.get(ge.ASSUME_GS1)===!0,d=te.findStartPattern(a),f=d[2],p=0,y=new Uint8Array(20);y[p++]=f;let w;switch(f){case te.CODE_START_A:w=te.CODE_CODE_A;break;case te.CODE_START_B:w=te.CODE_CODE_B;break;case te.CODE_START_C:w=te.CODE_CODE_C;break;default:throw new H}let _=!1,b=!1,E="",D=d[0],T=d[1],O=Int32Array.from([0,0,0,0,0,0]),k=0,F=0,q=f,re=0,V=!0,ze=!1,Ne=!1;for(;!_;){let Ns=b;switch(b=!1,k=F,F=te.decodeCode(a,O,T),y[p++]=F,F!==te.CODE_STOP&&(V=!0),F!==te.CODE_STOP&&(re++,q+=re*F),D=T,T+=O.reduce((JT,eM)=>JT+eM,0),F){case te.CODE_START_A:case te.CODE_START_B:case te.CODE_START_C:throw new H}switch(w){case te.CODE_CODE_A:if(F<64)Ne===ze?E+=String.fromCharCode(32+F):E+=String.fromCharCode(32+F+128),Ne=!1;else if(F<96)Ne===ze?E+=String.fromCharCode(F-64):E+=String.fromCharCode(F+64),Ne=!1;else switch(F!==te.CODE_STOP&&(V=!1),F){case te.CODE_FNC_1:u&&(E.length===0?E+="]C1":E+="");break;case te.CODE_FNC_2:case te.CODE_FNC_3:break;case te.CODE_FNC_4_A:!ze&&Ne?(ze=!0,Ne=!1):ze&&Ne?(ze=!1,Ne=!1):Ne=!0;break;case te.CODE_SHIFT:b=!0,w=te.CODE_CODE_B;break;case te.CODE_CODE_B:w=te.CODE_CODE_B;break;case te.CODE_CODE_C:w=te.CODE_CODE_C;break;case te.CODE_STOP:_=!0;break}break;case te.CODE_CODE_B:if(F<96)Ne===ze?E+=String.fromCharCode(32+F):E+=String.fromCharCode(32+F+128),Ne=!1;else switch(F!==te.CODE_STOP&&(V=!1),F){case te.CODE_FNC_1:u&&(E.length===0?E+="]C1":E+="");break;case te.CODE_FNC_2:case te.CODE_FNC_3:break;case te.CODE_FNC_4_B:!ze&&Ne?(ze=!0,Ne=!1):ze&&Ne?(ze=!1,Ne=!1):Ne=!0;break;case te.CODE_SHIFT:b=!0,w=te.CODE_CODE_A;break;case te.CODE_CODE_A:w=te.CODE_CODE_A;break;case te.CODE_CODE_C:w=te.CODE_CODE_C;break;case te.CODE_STOP:_=!0;break}break;case te.CODE_CODE_C:if(F<100)F<10&&(E+="0"),E+=F;else switch(F!==te.CODE_STOP&&(V=!1),F){case te.CODE_FNC_1:u&&(E.length===0?E+="]C1":E+="");break;case te.CODE_CODE_A:w=te.CODE_CODE_A;break;case te.CODE_CODE_B:w=te.CODE_CODE_B;break;case te.CODE_STOP:_=!0;break}break}Ns&&(w=w===te.CODE_CODE_A?te.CODE_CODE_B:te.CODE_CODE_A)}let qn=T-D;if(T=a.getNextUnset(T),!a.isRange(T,Math.min(a.getSize(),T+(T-D)/2),!1))throw new U;if(q-=re*k,q%103!==k)throw new x;let kr=E.length;if(kr===0)throw new U;kr>0&&V&&(w===te.CODE_CODE_C?E=E.substring(0,kr-2):E=E.substring(0,kr-1));let Yn=(d[1]+d[0])/2,_t=D+qn/2,vn=y.length,ir=new Uint8Array(vn);for(let Ns=0;Ns<vn;Ns++)ir[Ns]=y[Ns];let Ms=[new ue(Yn,s),new ue(_t,s)];return new Fn(E,ir,0,Ms,we.CODE_128,new Date().getTime())}}te.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],te.MAX_AVG_VARIANCE=.25,te.MAX_INDIVIDUAL_VARIANCE=.7,te.CODE_SHIFT=98,te.CODE_CODE_C=99,te.CODE_CODE_B=100,te.CODE_CODE_A=101,te.CODE_FNC_1=102,te.CODE_FNC_2=97,te.CODE_FNC_3=96,te.CODE_FNC_4_A=101,te.CODE_FNC_4_B=100,te.CODE_START_A=103,te.CODE_START_B=104,te.CODE_START_C=105,te.CODE_STOP=106;let sp=(()=>{class C extends $t{constructor(a=!1,l=!1){super(),this.usingCheckDigit=a,this.extendedMode=l,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(a,l,u){let d=this.counters;d.fill(0),this.decodeRowResult="";let f=C.findAsteriskPattern(l,d),p=l.getNextSet(f[1]),y=l.getSize(),w,_;do{C.recordPattern(l,p,d);let k=C.toNarrowWidePattern(d);if(k<0)throw new U;w=C.patternToChar(k),this.decodeRowResult+=w,_=p;for(let F of d)p+=F;p=l.getNextSet(p)}while(w!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let b=0;for(let k of d)b+=k;let E=p-_-b;if(p!==y&&E*2<b)throw new U;if(this.usingCheckDigit){let k=this.decodeRowResult.length-1,F=0;for(let q=0;q<k;q++)F+=C.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(q));if(this.decodeRowResult.charAt(k)!==C.ALPHABET_STRING.charAt(F%43))throw new x;this.decodeRowResult=this.decodeRowResult.substring(0,k)}if(this.decodeRowResult.length===0)throw new U;let D;this.extendedMode?D=C.decodeExtended(this.decodeRowResult):D=this.decodeRowResult;let T=(f[1]+f[0])/2,O=_+b/2;return new Fn(D,null,0,[new ue(T,a),new ue(O,a)],we.CODE_39,new Date().getTime())}static findAsteriskPattern(a,l){let u=a.getSize(),d=a.getNextSet(0),f=0,p=d,y=!1,w=l.length;for(let _=d;_<u;_++)if(a.get(_)!==y)l[f]++;else{if(f===w-1){if(this.toNarrowWidePattern(l)===C.ASTERISK_ENCODING&&a.isRange(Math.max(0,p-Math.floor((_-p)/2)),p,!1))return[p,_];p+=l[0]+l[1],l.copyWithin(0,2,2+f-1),l[f-1]=0,l[f]=0,f--}else f++;l[f]=1,y=!y}throw new U}static toNarrowWidePattern(a){let l=a.length,u=0,d;do{let f=2147483647;for(let w of a)w<f&&w>u&&(f=w);u=f,d=0;let p=0,y=0;for(let w=0;w<l;w++){let _=a[w];_>u&&(y|=1<<l-1-w,d++,p+=_)}if(d===3){for(let w=0;w<l&&d>0;w++){let _=a[w];if(_>u&&(d--,_*2>=p))return-1}return y}}while(d>3);return-1}static patternToChar(a){for(let l=0;l<C.CHARACTER_ENCODINGS.length;l++)if(C.CHARACTER_ENCODINGS[l]===a)return C.ALPHABET_STRING.charAt(l);if(a===C.ASTERISK_ENCODING)return"*";throw new U}static decodeExtended(a){let l=a.length,u="";for(let d=0;d<l;d++){let f=a.charAt(d);if(f==="+"||f==="$"||f==="%"||f==="/"){let p=a.charAt(d+1),y="\0";switch(f){case"+":if(p>="A"&&p<="Z")y=String.fromCharCode(p.charCodeAt(0)+32);else throw new H;break;case"$":if(p>="A"&&p<="Z")y=String.fromCharCode(p.charCodeAt(0)-64);else throw new H;break;case"%":if(p>="A"&&p<="E")y=String.fromCharCode(p.charCodeAt(0)-38);else if(p>="F"&&p<="J")y=String.fromCharCode(p.charCodeAt(0)-11);else if(p>="K"&&p<="O")y=String.fromCharCode(p.charCodeAt(0)+16);else if(p>="P"&&p<="T")y=String.fromCharCode(p.charCodeAt(0)+43);else if(p==="U")y="\0";else if(p==="V")y="@";else if(p==="W")y="`";else if(p==="X"||p==="Y"||p==="Z")y="\x7F";else throw new H;break;case"/":if(p>="A"&&p<="O")y=String.fromCharCode(p.charCodeAt(0)-32);else if(p==="Z")y=":";else throw new H;break}u+=y,d++}else u+=f}return u}}return C.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",C.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],C.ASTERISK_ENCODING=148,C})();class wt extends $t{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(s,a,l){let u=this.decodeStart(a),d=this.decodeEnd(a),f=new yt;wt.decodeMiddle(a,u[1],d[0],f);let p=f.toString(),y=null;l!=null&&(y=l.get(ge.ALLOWED_LENGTHS)),y==null&&(y=wt.DEFAULT_ALLOWED_LENGTHS);let w=p.length,_=!1,b=0;for(let T of y){if(w===T){_=!0;break}T>b&&(b=T)}if(!_&&w>b&&(_=!0),!_)throw new H;let E=[new ue(u[1],s),new ue(d[0],s)];return new Fn(p,null,0,E,we.ITF,new Date().getTime())}static decodeMiddle(s,a,l,u){let d=new Int32Array(10),f=new Int32Array(5),p=new Int32Array(5);for(d.fill(0),f.fill(0),p.fill(0);a<l;){$t.recordPattern(s,a,d);for(let w=0;w<5;w++){let _=2*w;f[w]=d[_],p[w]=d[_+1]}let y=wt.decodeDigit(f);u.append(y.toString()),y=this.decodeDigit(p),u.append(y.toString()),d.forEach(function(w){a+=w})}}decodeStart(s){let a=wt.skipWhiteSpace(s),l=wt.findGuardPattern(s,a,wt.START_PATTERN);return this.narrowLineWidth=(l[1]-l[0])/4,this.validateQuietZone(s,l[0]),l}validateQuietZone(s,a){let l=this.narrowLineWidth*10;l=l<a?l:a;for(let u=a-1;l>0&&u>=0&&!s.get(u);u--)l--;if(l!==0)throw new U}static skipWhiteSpace(s){let a=s.getSize(),l=s.getNextSet(0);if(l===a)throw new U;return l}decodeEnd(s){s.reverse();try{let a=wt.skipWhiteSpace(s),l;try{l=wt.findGuardPattern(s,a,wt.END_PATTERN_REVERSED[0])}catch(d){d instanceof U&&(l=wt.findGuardPattern(s,a,wt.END_PATTERN_REVERSED[1]))}this.validateQuietZone(s,l[0]);let u=l[0];return l[0]=s.getSize()-l[1],l[1]=s.getSize()-u,l}finally{s.reverse()}}static findGuardPattern(s,a,l){let u=l.length,d=new Int32Array(u),f=s.getSize(),p=!1,y=0,w=a;d.fill(0);for(let _=a;_<f;_++)if(s.get(_)!==p)d[y]++;else{if(y===u-1){if($t.patternMatchVariance(d,l,wt.MAX_INDIVIDUAL_VARIANCE)<wt.MAX_AVG_VARIANCE)return[w,_];w+=d[0]+d[1],A.arraycopy(d,2,d,0,y-1),d[y-1]=0,d[y]=0,y--}else y++;d[y]=1,p=!p}throw new U}static decodeDigit(s){let a=wt.MAX_AVG_VARIANCE,l=-1,u=wt.PATTERNS.length;for(let d=0;d<u;d++){let f=wt.PATTERNS[d],p=$t.patternMatchVariance(s,f,wt.MAX_INDIVIDUAL_VARIANCE);p<a?(a=p,l=d):p===a&&(l=-1)}if(l>=0)return l%10;throw new U}}wt.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],wt.MAX_AVG_VARIANCE=.38,wt.MAX_INDIVIDUAL_VARIANCE=.5,wt.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],wt.START_PATTERN=Int32Array.from([1,1,1,1]),wt.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Ft extends $t{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(s){let a=!1,l,u=0,d=Int32Array.from([0,0,0]);for(;!a;){d=Int32Array.from([0,0,0]),l=Ft.findGuardPattern(s,u,!1,this.START_END_PATTERN,d);let f=l[0];u=l[1];let p=f-(u-f);p>=0&&(a=s.isRange(p,f,!1))}return l}static checkChecksum(s){return Ft.checkStandardUPCEANChecksum(s)}static checkStandardUPCEANChecksum(s){let a=s.length;if(a===0)return!1;let l=parseInt(s.charAt(a-1),10);return Ft.getStandardUPCEANChecksum(s.substring(0,a-1))===l}static getStandardUPCEANChecksum(s){let a=s.length,l=0;for(let u=a-1;u>=0;u-=2){let d=s.charAt(u).charCodeAt(0)-48;if(d<0||d>9)throw new H;l+=d}l*=3;for(let u=a-2;u>=0;u-=2){let d=s.charAt(u).charCodeAt(0)-48;if(d<0||d>9)throw new H;l+=d}return(1e3-l)%10}static decodeEnd(s,a){return Ft.findGuardPattern(s,a,!1,Ft.START_END_PATTERN,new Int32Array(Ft.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(s,a,l,u){return this.findGuardPattern(s,a,l,u,new Int32Array(u.length))}static findGuardPattern(s,a,l,u,d){let f=s.getSize();a=l?s.getNextUnset(a):s.getNextSet(a);let p=0,y=a,w=u.length,_=l;for(let b=a;b<f;b++)if(s.get(b)!==_)d[p]++;else{if(p===w-1){if($t.patternMatchVariance(d,u,Ft.MAX_INDIVIDUAL_VARIANCE)<Ft.MAX_AVG_VARIANCE)return Int32Array.from([y,b]);y+=d[0]+d[1];let E=d.slice(2,d.length-1);for(let D=0;D<p-1;D++)d[D]=E[D];d[p-1]=0,d[p]=0,p--}else p++;d[p]=1,_=!_}throw new U}static decodeDigit(s,a,l,u){this.recordPattern(s,l,a);let d=this.MAX_AVG_VARIANCE,f=-1,p=u.length;for(let y=0;y<p;y++){let w=u[y],_=$t.patternMatchVariance(a,w,Ft.MAX_INDIVIDUAL_VARIANCE);_<d&&(d=_,f=y)}if(f>=0)return f;throw new U}}Ft.MAX_AVG_VARIANCE=.48,Ft.MAX_INDIVIDUAL_VARIANCE=.7,Ft.START_END_PATTERN=Int32Array.from([1,1,1]),Ft.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Ft.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Ft.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class nl{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(s,a,l){let u=this.decodeRowStringBuffer,d=this.decodeMiddle(a,l,u),f=u.toString(),p=nl.parseExtensionString(f),y=[new ue((l[0]+l[1])/2,s),new ue(d,s)],w=new Fn(f,null,0,y,we.UPC_EAN_EXTENSION,new Date().getTime());return p!=null&&w.putAllMetadata(p),w}decodeMiddle(s,a,l){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let d=s.getSize(),f=a[1],p=0;for(let w=0;w<5&&f<d;w++){let _=Ft.decodeDigit(s,u,f,Ft.L_AND_G_PATTERNS);l+=String.fromCharCode(48+_%10);for(let b of u)f+=b;_>=10&&(p|=1<<4-w),w!==4&&(f=s.getNextSet(f),f=s.getNextUnset(f))}if(l.length!==5)throw new U;let y=this.determineCheckDigit(p);if(nl.extensionChecksum(l.toString())!==y)throw new U;return f}static extensionChecksum(s){let a=s.length,l=0;for(let u=a-2;u>=0;u-=2)l+=s.charAt(u).charCodeAt(0)-48;l*=3;for(let u=a-1;u>=0;u-=2)l+=s.charAt(u).charCodeAt(0)-48;return l*=3,l%10}determineCheckDigit(s){for(let a=0;a<10;a++)if(s===this.CHECK_DIGIT_ENCODINGS[a])return a;throw new U}static parseExtensionString(s){if(s.length!==5)return null;let a=nl.parseExtension5String(s);return a==null?null:new Map([[un.SUGGESTED_PRICE,a]])}static parseExtension5String(s){let a;switch(s.charAt(0)){case"0":a="\xA3";break;case"5":a="$";break;case"9":switch(s){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}a="";break;default:a="";break}let l=parseInt(s.substring(1)),u=(l/100).toString(),d=l%100,f=d<10?"0"+d:d.toString();return a+u+"."+f}}class ap{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(s,a,l){let u=this.decodeRowStringBuffer,d=this.decodeMiddle(a,l,u),f=u.toString(),p=ap.parseExtensionString(f),y=[new ue((l[0]+l[1])/2,s),new ue(d,s)],w=new Fn(f,null,0,y,we.UPC_EAN_EXTENSION,new Date().getTime());return p!=null&&w.putAllMetadata(p),w}decodeMiddle(s,a,l){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let d=s.getSize(),f=a[1],p=0;for(let y=0;y<2&&f<d;y++){let w=Ft.decodeDigit(s,u,f,Ft.L_AND_G_PATTERNS);l+=String.fromCharCode(48+w%10);for(let _ of u)f+=_;w>=10&&(p|=1<<1-y),y!==1&&(f=s.getNextSet(f),f=s.getNextUnset(f))}if(l.length!==2)throw new U;if(parseInt(l.toString())%4!==p)throw new U;return f}static parseExtensionString(s){return s.length!==2?null:new Map([[un.ISSUE_NUMBER,parseInt(s)]])}}class eC{static decodeRow(s,a,l){let u=Ft.findGuardPattern(a,l,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new nl().decodeRow(s,a,u)}catch{return new ap().decodeRow(s,a,u)}}}eC.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class lt extends Ft{constructor(){super(),this.decodeRowStringBuffer="",lt.L_AND_G_PATTERNS=lt.L_PATTERNS.map(s=>Int32Array.from(s));for(let s=10;s<20;s++){let a=lt.L_PATTERNS[s-10],l=new Int32Array(a.length);for(let u=0;u<a.length;u++)l[u]=a[a.length-u-1];lt.L_AND_G_PATTERNS[s]=l}}decodeRow(s,a,l){let u=lt.findStartGuardPattern(a),d=l==null?null:l.get(ge.NEED_RESULT_POINT_CALLBACK);if(d!=null){let V=new ue((u[0]+u[1])/2,s);d.foundPossibleResultPoint(V)}let f=this.decodeMiddle(a,u,this.decodeRowStringBuffer),p=f.rowOffset,y=f.resultString;if(d!=null){let V=new ue(p,s);d.foundPossibleResultPoint(V)}let w=this.decodeEnd(a,p);if(d!=null){let V=new ue((w[0]+w[1])/2,s);d.foundPossibleResultPoint(V)}let _=w[1],b=_+(_-w[0]);if(b>=a.getSize()||!a.isRange(_,b,!1))throw new U;let E=y.toString();if(E.length<8)throw new H;if(!lt.checkChecksum(E))throw new x;let D=(u[1]+u[0])/2,T=(w[1]+w[0])/2,O=this.getBarcodeFormat(),k=[new ue(D,s),new ue(T,s)],F=new Fn(E,null,0,k,O,new Date().getTime()),q=0;try{let V=eC.decodeRow(s,a,w[1]);F.putMetadata(un.UPC_EAN_EXTENSION,V.getText()),F.putAllMetadata(V.getResultMetadata()),F.addResultPoints(V.getResultPoints()),q=V.getText().length}catch{}let re=l==null?null:l.get(ge.ALLOWED_EAN_EXTENSIONS);if(re!=null){let V=!1;for(let ze in re)if(q.toString()===ze){V=!0;break}if(!V)throw new U}return F}decodeEnd(s,a){return lt.findGuardPattern(s,a,!1,lt.START_END_PATTERN,new Int32Array(lt.START_END_PATTERN.length).fill(0))}static checkChecksum(s){return lt.checkStandardUPCEANChecksum(s)}static checkStandardUPCEANChecksum(s){let a=s.length;if(a===0)return!1;let l=parseInt(s.charAt(a-1),10);return lt.getStandardUPCEANChecksum(s.substring(0,a-1))===l}static getStandardUPCEANChecksum(s){let a=s.length,l=0;for(let u=a-1;u>=0;u-=2){let d=s.charAt(u).charCodeAt(0)-48;if(d<0||d>9)throw new H;l+=d}l*=3;for(let u=a-2;u>=0;u-=2){let d=s.charAt(u).charCodeAt(0)-48;if(d<0||d>9)throw new H;l+=d}return(1e3-l)%10}}let du=(()=>{class C extends lt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(a,l,u){let d=this.decodeMiddleCounters;d[0]=0,d[1]=0,d[2]=0,d[3]=0;let f=a.getSize(),p=l[1],y=0;for(let _=0;_<6&&p<f;_++){let b=lt.decodeDigit(a,d,p,lt.L_AND_G_PATTERNS);u+=String.fromCharCode(48+b%10);for(let E of d)p+=E;b>=10&&(y|=1<<5-_)}u=C.determineFirstDigit(u,y),p=lt.findGuardPattern(a,p,!0,lt.MIDDLE_PATTERN,new Int32Array(lt.MIDDLE_PATTERN.length).fill(0))[1];for(let _=0;_<6&&p<f;_++){let b=lt.decodeDigit(a,d,p,lt.L_PATTERNS);u+=String.fromCharCode(48+b);for(let E of d)p+=E}return{rowOffset:p,resultString:u}}getBarcodeFormat(){return we.EAN_13}static determineFirstDigit(a,l){for(let u=0;u<10;u++)if(l===this.FIRST_DIGIT_ENCODINGS[u])return a=String.fromCharCode(48+u)+a,a;throw new U}}return C.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],C})();class tC extends lt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(s,a,l){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let d=s.getSize(),f=a[1];for(let y=0;y<4&&f<d;y++){let w=lt.decodeDigit(s,u,f,lt.L_PATTERNS);l+=String.fromCharCode(48+w);for(let _ of u)f+=_}f=lt.findGuardPattern(s,f,!0,lt.MIDDLE_PATTERN,new Int32Array(lt.MIDDLE_PATTERN.length).fill(0))[1];for(let y=0;y<4&&f<d;y++){let w=lt.decodeDigit(s,u,f,lt.L_PATTERNS);l+=String.fromCharCode(48+w);for(let _ of u)f+=_}return{rowOffset:f,resultString:l}}getBarcodeFormat(){return we.EAN_8}}class nC extends lt{constructor(){super(...arguments),this.ean13Reader=new du}getBarcodeFormat(){return we.UPC_A}decode(s,a){return this.maybeReturnResult(this.ean13Reader.decode(s))}decodeRow(s,a,l){return this.maybeReturnResult(this.ean13Reader.decodeRow(s,a,l))}decodeMiddle(s,a,l){return this.ean13Reader.decodeMiddle(s,a,l)}maybeReturnResult(s){let a=s.getText();if(a.charAt(0)==="0"){let l=new Fn(a.substring(1),null,null,s.getResultPoints(),we.UPC_A);return s.getResultMetadata()!=null&&l.putAllMetadata(s.getResultMetadata()),l}else throw new U}reset(){this.ean13Reader.reset()}}class Nr extends lt{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(s,a,l){let u=this.decodeMiddleCounters.map(w=>w);u[0]=0,u[1]=0,u[2]=0,u[3]=0;let d=s.getSize(),f=a[1],p=0;for(let w=0;w<6&&f<d;w++){let _=Nr.decodeDigit(s,u,f,Nr.L_AND_G_PATTERNS);l+=String.fromCharCode(48+_%10);for(let b of u)f+=b;_>=10&&(p|=1<<5-w)}let y=Nr.determineNumSysAndCheckDigit(l,p);return{rowOffset:f,resultString:y}}decodeEnd(s,a){return Nr.findGuardPatternWithoutCounters(s,a,!0,Nr.MIDDLE_END_PATTERN)}checkChecksum(s){return lt.checkChecksum(Nr.convertUPCEtoUPCA(s))}static determineNumSysAndCheckDigit(s,a){for(let l=0;l<=1;l++)for(let u=0;u<10;u++)if(a===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[l][u]){let d=String.fromCharCode(48+l),f=String.fromCharCode(48+u);return d+s+f}throw U.getNotFoundInstance()}getBarcodeFormat(){return we.UPC_E}static convertUPCEtoUPCA(s){let a=s.slice(1,7).split("").map(d=>d.charCodeAt(0)),l=new yt;l.append(s.charAt(0));let u=a[5];switch(u){case 0:case 1:case 2:l.appendChars(a,0,2),l.append(u),l.append("0000"),l.appendChars(a,2,3);break;case 3:l.appendChars(a,0,3),l.append("00000"),l.appendChars(a,3,2);break;case 4:l.appendChars(a,0,4),l.append("00000"),l.append(a[4]);break;default:l.appendChars(a,0,5),l.append("0000"),l.append(u);break}return s.length>=8&&l.append(s.charAt(7)),l.toString()}}Nr.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Nr.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class lp extends $t{constructor(s){super();let a=s==null?null:s.get(ge.POSSIBLE_FORMATS),l=[];n(a)?(l.push(new du),l.push(new nC),l.push(new tC),l.push(new Nr)):(a.indexOf(we.EAN_13)>-1&&l.push(new du),a.indexOf(we.UPC_A)>-1&&l.push(new nC),a.indexOf(we.EAN_8)>-1&&l.push(new tC),a.indexOf(we.UPC_E)>-1&&l.push(new Nr)),this.readers=l}decodeRow(s,a,l){for(let u of this.readers)try{let d=u.decodeRow(s,a,l),f=d.getBarcodeFormat()===we.EAN_13&&d.getText().charAt(0)==="0",p=l==null?null:l.get(ge.POSSIBLE_FORMATS),y=p==null||p.includes(we.UPC_A);if(f&&y){let w=d.getRawBytes(),_=new Fn(d.getText().substring(1),w,w?w.length:null,d.getResultPoints(),we.UPC_A);return _.putAllMetadata(d.getResultMetadata()),_}return d}catch{}throw new U}reset(){for(let s of this.readers)s.reset()}}let ko=(()=>{class C extends $t{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(a,l){for(let u=0;u<l.length;u++)if($t.patternMatchVariance(a,l[u],C.MAX_INDIVIDUAL_VARIANCE)<C.MAX_AVG_VARIANCE)return u;throw new U}static count(a){return et.sum(new Int32Array(a))}static increment(a,l){let u=0,d=l[0];for(let f=1;f<a.length;f++)l[f]>d&&(d=l[f],u=f);a[u]++}static decrement(a,l){let u=0,d=l[0];for(let f=1;f<a.length;f++)l[f]<d&&(d=l[f],u=f);a[u]--}static isFinderPattern(a){let l=a[0]+a[1],u=l+a[2]+a[3],d=l/u;if(d>=C.MIN_FINDER_PATTERN_RATIO&&d<=C.MAX_FINDER_PATTERN_RATIO){let f=Number.MAX_SAFE_INTEGER,p=Number.MIN_SAFE_INTEGER;for(let y of a)y>p&&(p=y),y<f&&(f=y);return p<10*f}return!1}}return C.MAX_AVG_VARIANCE=.2,C.MAX_INDIVIDUAL_VARIANCE=.45,C.MIN_FINDER_PATTERN_RATIO=9.5/12,C.MAX_FINDER_PATTERN_RATIO=12.5/14,C})();class Es{constructor(s,a){this.value=s,this.checksumPortion=a}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(s){if(!(s instanceof Es))return!1;let a=s;return this.value===a.value&&this.checksumPortion===a.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class fu{constructor(s,a,l,u,d){this.value=s,this.startEnd=a,this.value=s,this.startEnd=a,this.resultPoints=new Array,this.resultPoints.push(new ue(l,d)),this.resultPoints.push(new ue(u,d))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(s){if(!(s instanceof fu))return!1;let a=s;return this.value===a.value}hashCode(){return this.value}}class Jr{constructor(){}static getRSSvalue(s,a,l){let u=0;for(let y of s)u+=y;let d=0,f=0,p=s.length;for(let y=0;y<p-1;y++){let w;for(w=1,f|=1<<y;w<s[y];w++,f&=~(1<<y)){let _=Jr.combins(u-w-1,p-y-2);if(l&&f===0&&u-w-(p-y-1)>=p-y-1&&(_-=Jr.combins(u-w-(p-y),p-y-2)),p-y-1>1){let b=0;for(let E=u-w-(p-y-2);E>a;E--)b+=Jr.combins(u-w-E-1,p-y-3);_-=b*(p-1-y)}else u-w>a&&_--;d+=_}u-=w}return d}static combins(s,a){let l,u;s-a>a?(u=a,l=s-a):(u=s-a,l=a);let d=1,f=1;for(let p=s;p>l;p--)d*=p,f<=u&&(d/=f,f++);for(;f<=u;)d/=f,f++;return d}}class mT{static buildBitArray(s){let a=s.length*2-1;s[s.length-1].getRightChar()==null&&(a-=1);let l=12*a,u=new ce(l),d=0,p=s[0].getRightChar().getValue();for(let y=11;y>=0;--y)p&1<<y&&u.set(d),d++;for(let y=1;y<s.length;++y){let w=s[y],_=w.getLeftChar().getValue();for(let b=11;b>=0;--b)_&1<<b&&u.set(d),d++;if(w.getRightChar()!=null){let b=w.getRightChar().getValue();for(let E=11;E>=0;--E)b&1<<E&&u.set(d),d++}}return u}}class Lo{constructor(s,a){a?this.decodedInformation=null:(this.finished=s,this.decodedInformation=a)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class cp{constructor(s){this.newPosition=s}getNewPosition(){return this.newPosition}}let Or=(()=>{class C extends cp{constructor(a,l){super(a),this.value=l}getValue(){return this.value}isFNC1(){return this.value===C.FNC1}}return C.FNC1="$",C})();class Fo extends cp{constructor(s,a,l){super(s),l?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=a}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}let Is=(()=>{class C extends cp{constructor(a,l,u){if(super(a),l<0||l>10||u<0||u>10)throw new H;this.firstDigit=l,this.secondDigit=u}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===C.FNC1}isSecondDigitFNC1(){return this.secondDigit===C.FNC1}isAnyFNC1(){return this.firstDigit===C.FNC1||this.secondDigit===C.FNC1}}return C.FNC1=10,C})();class ae{constructor(){}static parseFieldsInGeneralPurpose(s){if(!s)return null;if(s.length<2)throw new U;let a=s.substring(0,2);for(let d of ae.TWO_DIGIT_DATA_LENGTH)if(d[0]===a)return d[1]===ae.VARIABLE_LENGTH?ae.processVariableAI(2,d[2],s):ae.processFixedAI(2,d[1],s);if(s.length<3)throw new U;let l=s.substring(0,3);for(let d of ae.THREE_DIGIT_DATA_LENGTH)if(d[0]===l)return d[1]===ae.VARIABLE_LENGTH?ae.processVariableAI(3,d[2],s):ae.processFixedAI(3,d[1],s);for(let d of ae.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(d[0]===l)return d[1]===ae.VARIABLE_LENGTH?ae.processVariableAI(4,d[2],s):ae.processFixedAI(4,d[1],s);if(s.length<4)throw new U;let u=s.substring(0,4);for(let d of ae.FOUR_DIGIT_DATA_LENGTH)if(d[0]===u)return d[1]===ae.VARIABLE_LENGTH?ae.processVariableAI(4,d[2],s):ae.processFixedAI(4,d[1],s);throw new U}static processFixedAI(s,a,l){if(l.length<s)throw new U;let u=l.substring(0,s);if(l.length<s+a)throw new U;let d=l.substring(s,s+a),f=l.substring(s+a),p="("+u+")"+d,y=ae.parseFieldsInGeneralPurpose(f);return y==null?p:p+y}static processVariableAI(s,a,l){let u=l.substring(0,s),d;l.length<s+a?d=l.length:d=s+a;let f=l.substring(s,d),p=l.substring(d),y="("+u+")"+f,w=ae.parseFieldsInGeneralPurpose(p);return w==null?y:y+w}}ae.VARIABLE_LENGTH=[],ae.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",ae.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",ae.VARIABLE_LENGTH,20],["22",ae.VARIABLE_LENGTH,29],["30",ae.VARIABLE_LENGTH,8],["37",ae.VARIABLE_LENGTH,8],["90",ae.VARIABLE_LENGTH,30],["91",ae.VARIABLE_LENGTH,30],["92",ae.VARIABLE_LENGTH,30],["93",ae.VARIABLE_LENGTH,30],["94",ae.VARIABLE_LENGTH,30],["95",ae.VARIABLE_LENGTH,30],["96",ae.VARIABLE_LENGTH,30],["97",ae.VARIABLE_LENGTH,3],["98",ae.VARIABLE_LENGTH,30],["99",ae.VARIABLE_LENGTH,30]],ae.THREE_DIGIT_DATA_LENGTH=[["240",ae.VARIABLE_LENGTH,30],["241",ae.VARIABLE_LENGTH,30],["242",ae.VARIABLE_LENGTH,6],["250",ae.VARIABLE_LENGTH,30],["251",ae.VARIABLE_LENGTH,30],["253",ae.VARIABLE_LENGTH,17],["254",ae.VARIABLE_LENGTH,20],["400",ae.VARIABLE_LENGTH,30],["401",ae.VARIABLE_LENGTH,30],["402",17],["403",ae.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",ae.VARIABLE_LENGTH,20],["421",ae.VARIABLE_LENGTH,15],["422",3],["423",ae.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],ae.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",ae.VARIABLE_LENGTH,15],["391",ae.VARIABLE_LENGTH,18],["392",ae.VARIABLE_LENGTH,15],["393",ae.VARIABLE_LENGTH,18],["703",ae.VARIABLE_LENGTH,30]],ae.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",ae.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",ae.VARIABLE_LENGTH,20],["8003",ae.VARIABLE_LENGTH,30],["8004",ae.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",ae.VARIABLE_LENGTH,30],["8008",ae.VARIABLE_LENGTH,12],["8018",18],["8020",ae.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",ae.VARIABLE_LENGTH,70],["8200",ae.VARIABLE_LENGTH,70]];class Ss{constructor(s){this.buffer=new yt,this.information=s}decodeAllCodes(s,a){let l=a,u=null;do{let d=this.decodeGeneralPurposeField(l,u),f=ae.parseFieldsInGeneralPurpose(d.getNewString());if(f!=null&&s.append(f),d.isRemaining()?u=""+d.getRemainingValue():u=null,l===d.getNewPosition())break;l=d.getNewPosition()}while(!0);return s.toString()}isStillNumeric(s){if(s+7>this.information.getSize())return s+4<=this.information.getSize();for(let a=s;a<s+3;++a)if(this.information.get(a))return!0;return this.information.get(s+3)}decodeNumeric(s){if(s+7>this.information.getSize()){let d=this.extractNumericValueFromBitArray(s,4);return d===0?new Is(this.information.getSize(),Is.FNC1,Is.FNC1):new Is(this.information.getSize(),d-1,Is.FNC1)}let a=this.extractNumericValueFromBitArray(s,7),l=(a-8)/11,u=(a-8)%11;return new Is(s+7,l,u)}extractNumericValueFromBitArray(s,a){return Ss.extractNumericValueFromBitArray(this.information,s,a)}static extractNumericValueFromBitArray(s,a,l){let u=0;for(let d=0;d<l;++d)s.get(a+d)&&(u|=1<<l-d-1);return u}decodeGeneralPurposeField(s,a){this.buffer.setLengthToZero(),a!=null&&this.buffer.append(a),this.current.setPosition(s);let l=this.parseBlocks();return l!=null&&l.isRemaining()?new Fo(this.current.getPosition(),this.buffer.toString(),l.getRemainingValue()):new Fo(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let s,a;do{let l=this.current.getPosition();if(this.current.isAlpha()?(a=this.parseAlphaBlock(),s=a.isFinished()):this.current.isIsoIec646()?(a=this.parseIsoIec646Block(),s=a.isFinished()):(a=this.parseNumericBlock(),s=a.isFinished()),!(l!==this.current.getPosition())&&!s)break}while(!s);return a.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let s=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(s.getNewPosition()),s.isFirstDigitFNC1()){let a;return s.isSecondDigitFNC1()?a=new Fo(this.current.getPosition(),this.buffer.toString()):a=new Fo(this.current.getPosition(),this.buffer.toString(),s.getSecondDigit()),new Lo(!0,a)}if(this.buffer.append(s.getFirstDigit()),s.isSecondDigitFNC1()){let a=new Fo(this.current.getPosition(),this.buffer.toString());return new Lo(!0,a)}this.buffer.append(s.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Lo(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let s=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(s.getNewPosition()),s.isFNC1()){let a=new Fo(this.current.getPosition(),this.buffer.toString());return new Lo(!0,a)}this.buffer.append(s.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Lo(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let s=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(s.getNewPosition()),s.isFNC1()){let a=new Fo(this.current.getPosition(),this.buffer.toString());return new Lo(!0,a)}this.buffer.append(s.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Lo(!1)}isStillIsoIec646(s){if(s+5>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(s,5);if(a>=5&&a<16)return!0;if(s+7>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(s,7);if(l>=64&&l<116)return!0;if(s+8>this.information.getSize())return!1;let u=this.extractNumericValueFromBitArray(s,8);return u>=232&&u<253}decodeIsoIec646(s){let a=this.extractNumericValueFromBitArray(s,5);if(a===15)return new Or(s+5,Or.FNC1);if(a>=5&&a<15)return new Or(s+5,"0"+(a-5));let l=this.extractNumericValueFromBitArray(s,7);if(l>=64&&l<90)return new Or(s+7,""+(l+1));if(l>=90&&l<116)return new Or(s+7,""+(l+7));let u=this.extractNumericValueFromBitArray(s,8),d;switch(u){case 232:d="!";break;case 233:d='"';break;case 234:d="%";break;case 235:d="&";break;case 236:d="'";break;case 237:d="(";break;case 238:d=")";break;case 239:d="*";break;case 240:d="+";break;case 241:d=",";break;case 242:d="-";break;case 243:d=".";break;case 244:d="/";break;case 245:d=":";break;case 246:d=";";break;case 247:d="<";break;case 248:d="=";break;case 249:d=">";break;case 250:d="?";break;case 251:d="_";break;case 252:d=" ";break;default:throw new H}return new Or(s+8,d)}isStillAlpha(s){if(s+5>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(s,5);if(a>=5&&a<16)return!0;if(s+6>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(s,6);return l>=16&&l<63}decodeAlphanumeric(s){let a=this.extractNumericValueFromBitArray(s,5);if(a===15)return new Or(s+5,Or.FNC1);if(a>=5&&a<15)return new Or(s+5,"0"+(a-5));let l=this.extractNumericValueFromBitArray(s,6);if(l>=32&&l<58)return new Or(s+6,""+(l+33));let u;switch(l){case 58:u="*";break;case 59:u=",";break;case 60:u="-";break;case 61:u=".";break;case 62:u="/";break;default:throw new vi("Decoding invalid alphanumeric value: "+l)}return new Or(s+6,u)}isAlphaTo646ToAlphaLatch(s){if(s+1>this.information.getSize())return!1;for(let a=0;a<5&&a+s<this.information.getSize();++a)if(a===2){if(!this.information.get(s+2))return!1}else if(this.information.get(s+a))return!1;return!0}isAlphaOr646ToNumericLatch(s){if(s+3>this.information.getSize())return!1;for(let a=s;a<s+3;++a)if(this.information.get(a))return!1;return!0}isNumericToAlphaNumericLatch(s){if(s+1>this.information.getSize())return!1;for(let a=0;a<4&&a+s<this.information.getSize();++a)if(this.information.get(s+a))return!1;return!0}}class up{constructor(s){this.information=s,this.generalDecoder=new Ss(s)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}let Rr=(()=>{class C extends up{constructor(a){super(a)}encodeCompressedGtin(a,l){a.append("(01)");let u=a.length();a.append("9"),this.encodeCompressedGtinWithoutAI(a,l,u)}encodeCompressedGtinWithoutAI(a,l,u){for(let d=0;d<4;++d){let f=this.getGeneralDecoder().extractNumericValueFromBitArray(l+10*d,10);f/100===0&&a.append("0"),f/10===0&&a.append("0"),a.append(f)}C.appendCheckDigit(a,u)}static appendCheckDigit(a,l){let u=0;for(let d=0;d<13;d++){let f=a.charAt(d+l).charCodeAt(0)-48;u+=d&1?f:3*f}u=10-u%10,u===10&&(u=0),a.append(u)}}return C.GTIN_SIZE=40,C})(),yT=(()=>{class C extends Rr{constructor(a){super(a)}parseInformation(){let a=new yt;a.append("(01)");let l=a.length(),u=this.getGeneralDecoder().extractNumericValueFromBitArray(C.HEADER_SIZE,4);return a.append(u),this.encodeCompressedGtinWithoutAI(a,C.HEADER_SIZE+4,l),this.getGeneralDecoder().decodeAllCodes(a,C.HEADER_SIZE+44)}}return C.HEADER_SIZE=4,C})(),wT=(()=>{class C extends up{constructor(a){super(a)}parseInformation(){let a=new yt;return this.getGeneralDecoder().decodeAllCodes(a,C.HEADER_SIZE)}}return C.HEADER_SIZE=5,C})();class hu extends Rr{constructor(s){super(s)}encodeCompressedWeight(s,a,l){let u=this.getGeneralDecoder().extractNumericValueFromBitArray(a,l);this.addWeightCode(s,u);let d=this.checkWeight(u),f=1e5;for(let p=0;p<5;++p)d/f===0&&s.append("0"),f/=10;s.append(d)}}let rC=(()=>{class C extends hu{constructor(a){super(a)}parseInformation(){if(this.getInformation().getSize()!=C.HEADER_SIZE+hu.GTIN_SIZE+C.WEIGHT_SIZE)throw new U;let a=new yt;return this.encodeCompressedGtin(a,C.HEADER_SIZE),this.encodeCompressedWeight(a,C.HEADER_SIZE+hu.GTIN_SIZE,C.WEIGHT_SIZE),a.toString()}}return C.HEADER_SIZE=5,C.WEIGHT_SIZE=15,C})();class CT extends rC{constructor(s){super(s)}addWeightCode(s,a){s.append("(3103)")}checkWeight(s){return s}}class _T extends rC{constructor(s){super(s)}addWeightCode(s,a){a<1e4?s.append("(3202)"):s.append("(3203)")}checkWeight(s){return s<1e4?s:s-1e4}}let vT=(()=>{class C extends Rr{constructor(a){super(a)}parseInformation(){if(this.getInformation().getSize()<C.HEADER_SIZE+Rr.GTIN_SIZE)throw new U;let a=new yt;this.encodeCompressedGtin(a,C.HEADER_SIZE);let l=this.getGeneralDecoder().extractNumericValueFromBitArray(C.HEADER_SIZE+Rr.GTIN_SIZE,C.LAST_DIGIT_SIZE);a.append("(392"),a.append(l),a.append(")");let u=this.getGeneralDecoder().decodeGeneralPurposeField(C.HEADER_SIZE+Rr.GTIN_SIZE+C.LAST_DIGIT_SIZE,null);return a.append(u.getNewString()),a.toString()}}return C.HEADER_SIZE=8,C.LAST_DIGIT_SIZE=2,C})(),xT=(()=>{class C extends Rr{constructor(a){super(a)}parseInformation(){if(this.getInformation().getSize()<C.HEADER_SIZE+Rr.GTIN_SIZE)throw new U;let a=new yt;this.encodeCompressedGtin(a,C.HEADER_SIZE);let l=this.getGeneralDecoder().extractNumericValueFromBitArray(C.HEADER_SIZE+Rr.GTIN_SIZE,C.LAST_DIGIT_SIZE);a.append("(393"),a.append(l),a.append(")");let u=this.getGeneralDecoder().extractNumericValueFromBitArray(C.HEADER_SIZE+Rr.GTIN_SIZE+C.LAST_DIGIT_SIZE,C.FIRST_THREE_DIGITS_SIZE);u/100==0&&a.append("0"),u/10==0&&a.append("0"),a.append(u);let d=this.getGeneralDecoder().decodeGeneralPurposeField(C.HEADER_SIZE+Rr.GTIN_SIZE+C.LAST_DIGIT_SIZE+C.FIRST_THREE_DIGITS_SIZE,null);return a.append(d.getNewString()),a.toString()}}return C.HEADER_SIZE=8,C.LAST_DIGIT_SIZE=2,C.FIRST_THREE_DIGITS_SIZE=10,C})(),Ki=(()=>{class C extends hu{constructor(a,l,u){super(a),this.dateCode=u,this.firstAIdigits=l}parseInformation(){if(this.getInformation().getSize()!=C.HEADER_SIZE+C.GTIN_SIZE+C.WEIGHT_SIZE+C.DATE_SIZE)throw new U;let a=new yt;return this.encodeCompressedGtin(a,C.HEADER_SIZE),this.encodeCompressedWeight(a,C.HEADER_SIZE+C.GTIN_SIZE,C.WEIGHT_SIZE),this.encodeCompressedDate(a,C.HEADER_SIZE+C.GTIN_SIZE+C.WEIGHT_SIZE),a.toString()}encodeCompressedDate(a,l){let u=this.getGeneralDecoder().extractNumericValueFromBitArray(l,C.DATE_SIZE);if(u==38400)return;a.append("("),a.append(this.dateCode),a.append(")");let d=u%32;u/=32;let f=u%12+1;u/=12;let p=u;p/10==0&&a.append("0"),a.append(p),f/10==0&&a.append("0"),a.append(f),d/10==0&&a.append("0"),a.append(d)}addWeightCode(a,l){a.append("("),a.append(this.firstAIdigits),a.append(l/1e5),a.append(")")}checkWeight(a){return a%1e5}}return C.HEADER_SIZE=8,C.WEIGHT_SIZE=20,C.DATE_SIZE=16,C})();function iC(C){try{if(C.get(1))return new yT(C);if(!C.get(2))return new wT(C);switch(Ss.extractNumericValueFromBitArray(C,1,4)){case 4:return new CT(C);case 5:return new _T(C)}switch(Ss.extractNumericValueFromBitArray(C,1,5)){case 12:return new vT(C);case 13:return new xT(C)}switch(Ss.extractNumericValueFromBitArray(C,1,7)){case 56:return new Ki(C,"310","11");case 57:return new Ki(C,"320","11");case 58:return new Ki(C,"310","13");case 59:return new Ki(C,"320","13");case 60:return new Ki(C,"310","15");case 61:return new Ki(C,"320","15");case 62:return new Ki(C,"310","17");case 63:return new Ki(C,"320","17")}}catch(s){throw console.log(s),new vi("unknown decoder: "+C)}}class Ji{constructor(s,a,l,u){this.leftchar=s,this.rightchar=a,this.finderpattern=l,this.maybeLast=u}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(s,a){return s instanceof Ji?Ji.equalsOrNull(s.leftchar,a.leftchar)&&Ji.equalsOrNull(s.rightchar,a.rightchar)&&Ji.equalsOrNull(s.finderpattern,a.finderpattern):!1}static equalsOrNull(s,a){return s===null?a===null:Ji.equals(s,a)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class dp{constructor(s,a,l){this.pairs=s,this.rowNumber=a,this.wasReversed=l}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(s){return this.checkEqualitity(this,s)}toString(){return"{ "+this.pairs+" }"}equals(s,a){return s instanceof dp?this.checkEqualitity(s,a)&&s.wasReversed===a.wasReversed:!1}checkEqualitity(s,a){if(!s||!a)return;let l;return s.forEach((u,d)=>{a.forEach(f=>{u.getLeftChar().getValue()===f.getLeftChar().getValue()&&u.getRightChar().getValue()===f.getRightChar().getValue()&&u.getFinderPatter().getValue()===f.getFinderPatter().getValue()&&(l=!0)})}),l}}class z extends ko{constructor(s){super(...arguments),this.pairs=new Array(z.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=s===!0}decodeRow(s,a,l){this.pairs.length=0,this.startFromEven=!1;try{return z.constructResult(this.decodeRow2pairs(s,a))}catch(u){this.verbose&&console.log(u)}return this.pairs.length=0,this.startFromEven=!0,z.constructResult(this.decodeRow2pairs(s,a))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(s,a){let l=!1;for(;!l;)try{this.pairs.push(this.retrieveNextPair(a,this.pairs,s))}catch(d){if(d instanceof U){if(!this.pairs.length)throw new U;l=!0}}if(this.checkChecksum())return this.pairs;let u;if(this.rows.length?u=!0:u=!1,this.storeRow(s,!1),u){let d=this.checkRowsBoolean(!1);if(d!=null||(d=this.checkRowsBoolean(!0),d!=null))return d}throw new U}checkRowsBoolean(s){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,s&&(this.rows=this.rows.reverse());let a=null;try{a=this.checkRows(new Array,0)}catch(l){this.verbose&&console.log(l)}return s&&(this.rows=this.rows.reverse()),a}checkRows(s,a){for(let l=a;l<this.rows.length;l++){let u=this.rows[l];this.pairs.length=0;for(let f of s)this.pairs.push(f.getPairs());if(this.pairs.push(u.getPairs()),!z.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let d=new Array(s);d.push(u);try{return this.checkRows(d,l+1)}catch(f){this.verbose&&console.log(f)}}throw new U}static isValidSequence(s){for(let a of z.FINDER_PATTERN_SEQUENCES){if(s.length>a.length)continue;let l=!0;for(let u=0;u<s.length;u++)if(s[u].getFinderPattern().getValue()!=a[u]){l=!1;break}if(l)return!0}return!1}storeRow(s,a){let l=0,u=!1,d=!1;for(;l<this.rows.length;){let f=this.rows[l];if(f.getRowNumber()>s){d=f.isEquivalent(this.pairs);break}u=f.isEquivalent(this.pairs),l++}d||u||z.isPartialRow(this.pairs,this.rows)||(this.rows.push(l,new dp(this.pairs,s,a)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(s,a){for(let l of a)if(l.getPairs().length!==s.length){for(let u of l.getPairs())for(let d of s)if(Ji.equals(u,d))break}}static isPartialRow(s,a){for(let l of a){let u=!0;for(let d of s){let f=!1;for(let p of l.getPairs())if(d.equals(p)){f=!0;break}if(!f){u=!1;break}}if(u)return!0}return!1}getRows(){return this.rows}static constructResult(s){let a=mT.buildBitArray(s),u=iC(a).parseInformation(),d=s[0].getFinderPattern().getResultPoints(),f=s[s.length-1].getFinderPattern().getResultPoints(),p=[d[0],d[1],f[0],f[1]];return new Fn(u,null,null,p,we.RSS_EXPANDED,null)}checkChecksum(){let s=this.pairs.get(0),a=s.getLeftChar(),l=s.getRightChar();if(l==null)return!1;let u=l.getChecksumPortion(),d=2;for(let p=1;p<this.pairs.size();++p){let y=this.pairs.get(p);u+=y.getLeftChar().getChecksumPortion(),d++;let w=y.getRightChar();w!=null&&(u+=w.getChecksumPortion(),d++)}return u%=211,211*(d-4)+u==a.getValue()}static getNextSecondBar(s,a){let l;return s.get(a)?(l=s.getNextUnset(a),l=s.getNextSet(l)):(l=s.getNextSet(a),l=s.getNextUnset(l)),l}retrieveNextPair(s,a,l){let u=a.length%2==0;this.startFromEven&&(u=!u);let d,f=!0,p=-1;do this.findNextPair(s,a,p),d=this.parseFoundFinderPattern(s,l,u),d==null?p=z.getNextSecondBar(s,this.startEnd[0]):f=!1;while(f);let y=this.decodeDataCharacter(s,d,u,!0);if(!this.isEmptyPair(a)&&a[a.length-1].mustBeLast())throw new U;let w;try{w=this.decodeDataCharacter(s,d,u,!1)}catch(_){w=null,this.verbose&&console.log(_)}return new Ji(y,w,d,!0)}isEmptyPair(s){return s.length===0}findNextPair(s,a,l){let u=this.getDecodeFinderCounters();u[0]=0,u[1]=0,u[2]=0,u[3]=0;let d=s.getSize(),f;l>=0?f=l:this.isEmptyPair(a)?f=0:f=a[a.length-1].getFinderPattern().getStartEnd()[1];let p=a.length%2!=0;this.startFromEven&&(p=!p);let y=!1;for(;f<d&&(y=!s.get(f),!!y);)f++;let w=0,_=f;for(let b=f;b<d;b++)if(s.get(b)!=y)u[w]++;else{if(w==3){if(p&&z.reverseCounters(u),z.isFinderPattern(u)){this.startEnd[0]=_,this.startEnd[1]=b;return}p&&z.reverseCounters(u),_+=u[0]+u[1],u[0]=u[2],u[1]=u[3],u[2]=0,u[3]=0,w--}else w++;u[w]=1,y=!y}throw new U}static reverseCounters(s){let a=s.length;for(let l=0;l<a/2;++l){let u=s[l];s[l]=s[a-l-1],s[a-l-1]=u}}parseFoundFinderPattern(s,a,l){let u,d,f;if(l){let w=this.startEnd[0]-1;for(;w>=0&&!s.get(w);)w--;w++,u=this.startEnd[0]-w,d=w,f=this.startEnd[1]}else d=this.startEnd[0],f=s.getNextUnset(this.startEnd[1]+1),u=f-this.startEnd[1];let p=this.getDecodeFinderCounters();A.arraycopy(p,0,p,1,p.length-1),p[0]=u;let y;try{y=this.parseFinderValue(p,z.FINDER_PATTERNS)}catch{return null}return new fu(y,[d,f],d,f,a)}decodeDataCharacter(s,a,l,u){let d=this.getDataCharacterCounters();for(let _t=0;_t<d.length;_t++)d[_t]=0;if(u)z.recordPatternInReverse(s,a.getStartEnd()[0],d);else{z.recordPattern(s,a.getStartEnd()[1],d);for(let _t=0,vn=d.length-1;_t<vn;_t++,vn--){let ir=d[_t];d[_t]=d[vn],d[vn]=ir}}let f=17,p=et.sum(new Int32Array(d))/f,y=(a.getStartEnd()[1]-a.getStartEnd()[0])/15;if(Math.abs(p-y)/y>.3)throw new U;let w=this.getOddCounts(),_=this.getEvenCounts(),b=this.getOddRoundingErrors(),E=this.getEvenRoundingErrors();for(let _t=0;_t<d.length;_t++){let vn=1*d[_t]/p,ir=vn+.5;if(ir<1){if(vn<.3)throw new U;ir=1}else if(ir>8){if(vn>8.7)throw new U;ir=8}let Ms=_t/2;_t&1?(_[Ms]=ir,E[Ms]=vn-ir):(w[Ms]=ir,b[Ms]=vn-ir)}this.adjustOddEvenCounts(f);let D=4*a.getValue()+(l?0:2)+(u?0:1)-1,T=0,O=0;for(let _t=w.length-1;_t>=0;_t--){if(z.isNotA1left(a,l,u)){let vn=z.WEIGHTS[D][2*_t];O+=w[_t]*vn}T+=w[_t]}let k=0;for(let _t=_.length-1;_t>=0;_t--)if(z.isNotA1left(a,l,u)){let vn=z.WEIGHTS[D][2*_t+1];k+=_[_t]*vn}let F=O+k;if(T&1||T>13||T<4)throw new U;let q=(13-T)/2,re=z.SYMBOL_WIDEST[q],V=9-re,ze=Jr.getRSSvalue(w,re,!0),Ne=Jr.getRSSvalue(_,V,!1),qn=z.EVEN_TOTAL_SUBSET[q],kr=z.GSUM[q],Yn=ze*qn+Ne+kr;return new Es(Yn,F)}static isNotA1left(s,a,l){return!(s.getValue()==0&&a&&l)}adjustOddEvenCounts(s){let a=et.sum(new Int32Array(this.getOddCounts())),l=et.sum(new Int32Array(this.getEvenCounts())),u=!1,d=!1;a>13?d=!0:a<4&&(u=!0);let f=!1,p=!1;l>13?p=!0:l<4&&(f=!0);let y=a+l-s,w=(a&1)==1,_=(l&1)==0;if(y==1)if(w){if(_)throw new U;d=!0}else{if(!_)throw new U;p=!0}else if(y==-1)if(w){if(_)throw new U;u=!0}else{if(!_)throw new U;f=!0}else if(y==0){if(w){if(!_)throw new U;a<l?(u=!0,p=!0):(d=!0,f=!0)}else if(_)throw new U}else throw new U;if(u){if(d)throw new U;z.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(d&&z.decrement(this.getOddCounts(),this.getOddRoundingErrors()),f){if(p)throw new U;z.increment(this.getEvenCounts(),this.getOddRoundingErrors())}p&&z.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}z.SYMBOL_WIDEST=[7,5,4,3,1],z.EVEN_TOTAL_SUBSET=[4,20,52,104,204],z.GSUM=[0,348,1388,2948,3988],z.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],z.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],z.FINDER_PAT_A=0,z.FINDER_PAT_B=1,z.FINDER_PAT_C=2,z.FINDER_PAT_D=3,z.FINDER_PAT_E=4,z.FINDER_PAT_F=5,z.FINDER_PATTERN_SEQUENCES=[[z.FINDER_PAT_A,z.FINDER_PAT_A],[z.FINDER_PAT_A,z.FINDER_PAT_B,z.FINDER_PAT_B],[z.FINDER_PAT_A,z.FINDER_PAT_C,z.FINDER_PAT_B,z.FINDER_PAT_D],[z.FINDER_PAT_A,z.FINDER_PAT_E,z.FINDER_PAT_B,z.FINDER_PAT_D,z.FINDER_PAT_C],[z.FINDER_PAT_A,z.FINDER_PAT_E,z.FINDER_PAT_B,z.FINDER_PAT_D,z.FINDER_PAT_D,z.FINDER_PAT_F],[z.FINDER_PAT_A,z.FINDER_PAT_E,z.FINDER_PAT_B,z.FINDER_PAT_D,z.FINDER_PAT_E,z.FINDER_PAT_F,z.FINDER_PAT_F],[z.FINDER_PAT_A,z.FINDER_PAT_A,z.FINDER_PAT_B,z.FINDER_PAT_B,z.FINDER_PAT_C,z.FINDER_PAT_C,z.FINDER_PAT_D,z.FINDER_PAT_D],[z.FINDER_PAT_A,z.FINDER_PAT_A,z.FINDER_PAT_B,z.FINDER_PAT_B,z.FINDER_PAT_C,z.FINDER_PAT_C,z.FINDER_PAT_D,z.FINDER_PAT_E,z.FINDER_PAT_E],[z.FINDER_PAT_A,z.FINDER_PAT_A,z.FINDER_PAT_B,z.FINDER_PAT_B,z.FINDER_PAT_C,z.FINDER_PAT_C,z.FINDER_PAT_D,z.FINDER_PAT_E,z.FINDER_PAT_F,z.FINDER_PAT_F],[z.FINDER_PAT_A,z.FINDER_PAT_A,z.FINDER_PAT_B,z.FINDER_PAT_B,z.FINDER_PAT_C,z.FINDER_PAT_D,z.FINDER_PAT_D,z.FINDER_PAT_E,z.FINDER_PAT_E,z.FINDER_PAT_F,z.FINDER_PAT_F]],z.MAX_PAIRS=11;class bT extends Es{constructor(s,a,l){super(s,a),this.count=0,this.finderPattern=l}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Bt extends ko{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(s,a,l){let u=this.decodePair(a,!1,s,l);Bt.addOrTally(this.possibleLeftPairs,u),a.reverse();let d=this.decodePair(a,!0,s,l);Bt.addOrTally(this.possibleRightPairs,d),a.reverse();for(let f of this.possibleLeftPairs)if(f.getCount()>1){for(let p of this.possibleRightPairs)if(p.getCount()>1&&Bt.checkChecksum(f,p))return Bt.constructResult(f,p)}throw new U}static addOrTally(s,a){if(a==null)return;let l=!1;for(let u of s)if(u.getValue()===a.getValue()){u.incrementCount(),l=!0;break}l||s.push(a)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(s,a){let l=4537077*s.getValue()+a.getValue(),u=new String(l).toString(),d=new yt;for(let w=13-u.length;w>0;w--)d.append("0");d.append(u);let f=0;for(let w=0;w<13;w++){let _=d.charAt(w).charCodeAt(0)-48;f+=w&1?_:3*_}f=10-f%10,f===10&&(f=0),d.append(f.toString());let p=s.getFinderPattern().getResultPoints(),y=a.getFinderPattern().getResultPoints();return new Fn(d.toString(),null,0,[p[0],p[1],y[0],y[1]],we.RSS_14,new Date().getTime())}static checkChecksum(s,a){let l=(s.getChecksumPortion()+16*a.getChecksumPortion())%79,u=9*s.getFinderPattern().getValue()+a.getFinderPattern().getValue();return u>72&&u--,u>8&&u--,l===u}decodePair(s,a,l,u){try{let d=this.findFinderPattern(s,a),f=this.parseFoundFinderPattern(s,l,a,d),p=u==null?null:u.get(ge.NEED_RESULT_POINT_CALLBACK);if(p!=null){let _=(d[0]+d[1])/2;a&&(_=s.getSize()-1-_),p.foundPossibleResultPoint(new ue(_,l))}let y=this.decodeDataCharacter(s,f,!0),w=this.decodeDataCharacter(s,f,!1);return new bT(1597*y.getValue()+w.getValue(),y.getChecksumPortion()+4*w.getChecksumPortion(),f)}catch{return null}}decodeDataCharacter(s,a,l){let u=this.getDataCharacterCounters();for(let k=0;k<u.length;k++)u[k]=0;if(l)$t.recordPatternInReverse(s,a.getStartEnd()[0],u);else{$t.recordPattern(s,a.getStartEnd()[1]+1,u);for(let k=0,F=u.length-1;k<F;k++,F--){let q=u[k];u[k]=u[F],u[F]=q}}let d=l?16:15,f=et.sum(new Int32Array(u))/d,p=this.getOddCounts(),y=this.getEvenCounts(),w=this.getOddRoundingErrors(),_=this.getEvenRoundingErrors();for(let k=0;k<u.length;k++){let F=u[k]/f,q=Math.floor(F+.5);q<1?q=1:q>8&&(q=8);let re=Math.floor(k/2);k&1?(y[re]=q,_[re]=F-q):(p[re]=q,w[re]=F-q)}this.adjustOddEvenCounts(l,d);let b=0,E=0;for(let k=p.length-1;k>=0;k--)E*=9,E+=p[k],b+=p[k];let D=0,T=0;for(let k=y.length-1;k>=0;k--)D*=9,D+=y[k],T+=y[k];let O=E+3*D;if(l){if(b&1||b>12||b<4)throw new U;let k=(12-b)/2,F=Bt.OUTSIDE_ODD_WIDEST[k],q=9-F,re=Jr.getRSSvalue(p,F,!1),V=Jr.getRSSvalue(y,q,!0),ze=Bt.OUTSIDE_EVEN_TOTAL_SUBSET[k],Ne=Bt.OUTSIDE_GSUM[k];return new Es(re*ze+V+Ne,O)}else{if(T&1||T>10||T<4)throw new U;let k=(10-T)/2,F=Bt.INSIDE_ODD_WIDEST[k],q=9-F,re=Jr.getRSSvalue(p,F,!0),V=Jr.getRSSvalue(y,q,!1),ze=Bt.INSIDE_ODD_TOTAL_SUBSET[k],Ne=Bt.INSIDE_GSUM[k];return new Es(V*ze+re+Ne,O)}}findFinderPattern(s,a){let l=this.getDecodeFinderCounters();l[0]=0,l[1]=0,l[2]=0,l[3]=0;let u=s.getSize(),d=!1,f=0;for(;f<u&&(d=!s.get(f),a!==d);)f++;let p=0,y=f;for(let w=f;w<u;w++)if(s.get(w)!==d)l[p]++;else{if(p===3){if(ko.isFinderPattern(l))return[y,w];y+=l[0]+l[1],l[0]=l[2],l[1]=l[3],l[2]=0,l[3]=0,p--}else p++;l[p]=1,d=!d}throw new U}parseFoundFinderPattern(s,a,l,u){let d=s.get(u[0]),f=u[0]-1;for(;f>=0&&d!==s.get(f);)f--;f++;let p=u[0]-f,y=this.getDecodeFinderCounters(),w=new Int32Array(y.length);A.arraycopy(y,0,w,1,y.length-1),w[0]=p;let _=this.parseFinderValue(w,Bt.FINDER_PATTERNS),b=f,E=u[1];return l&&(b=s.getSize()-1-b,E=s.getSize()-1-E),new fu(_,[f,u[1]],b,E,a)}adjustOddEvenCounts(s,a){let l=et.sum(new Int32Array(this.getOddCounts())),u=et.sum(new Int32Array(this.getEvenCounts())),d=!1,f=!1,p=!1,y=!1;s?(l>12?f=!0:l<4&&(d=!0),u>12?y=!0:u<4&&(p=!0)):(l>11?f=!0:l<5&&(d=!0),u>10?y=!0:u<4&&(p=!0));let w=l+u-a,_=(l&1)===(s?1:0),b=(u&1)===1;if(w===1)if(_){if(b)throw new U;f=!0}else{if(!b)throw new U;y=!0}else if(w===-1)if(_){if(b)throw new U;d=!0}else{if(!b)throw new U;p=!0}else if(w===0){if(_){if(!b)throw new U;l<u?(d=!0,y=!0):(f=!0,p=!0)}else if(b)throw new U}else throw new U;if(d){if(f)throw new U;ko.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(f&&ko.decrement(this.getOddCounts(),this.getOddRoundingErrors()),p){if(y)throw new U;ko.increment(this.getEvenCounts(),this.getOddRoundingErrors())}y&&ko.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Bt.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Bt.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Bt.OUTSIDE_GSUM=[0,161,961,2015,2715],Bt.INSIDE_GSUM=[0,336,1036,1516],Bt.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Bt.INSIDE_ODD_WIDEST=[2,4,6,8],Bt.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Ds extends $t{constructor(s,a){super(),this.readers=[],this.verbose=a===!0;let l=s?s.get(ge.POSSIBLE_FORMATS):null,u=s&&s.get(ge.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;l?((l.includes(we.EAN_13)||l.includes(we.UPC_A)||l.includes(we.EAN_8)||l.includes(we.UPC_E))&&this.readers.push(new lp(s)),l.includes(we.CODE_39)&&this.readers.push(new sp(u)),l.includes(we.CODE_128)&&this.readers.push(new te),l.includes(we.ITF)&&this.readers.push(new wt),l.includes(we.RSS_14)&&this.readers.push(new Bt),l.includes(we.RSS_EXPANDED)&&this.readers.push(new z(this.verbose))):(this.readers.push(new lp(s)),this.readers.push(new sp),this.readers.push(new lp(s)),this.readers.push(new te),this.readers.push(new wt),this.readers.push(new Bt),this.readers.push(new z(this.verbose)))}decodeRow(s,a,l){for(let u=0;u<this.readers.length;u++)try{return this.readers[u].decodeRow(s,a,l)}catch{}throw new U}reset(){this.readers.forEach(s=>s.reset())}}class ET extends Po{constructor(s=500,a){super(new Ds(a),s,a)}}class ut{constructor(s,a,l){this.ecCodewords=s,this.ecBlocks=[a],l&&this.ecBlocks.push(l)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class ct{constructor(s,a){this.count=s,this.dataCodewords=a}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Ze{constructor(s,a,l,u,d,f){this.versionNumber=s,this.symbolSizeRows=a,this.symbolSizeColumns=l,this.dataRegionSizeRows=u,this.dataRegionSizeColumns=d,this.ecBlocks=f;let p=0,y=f.getECCodewords(),w=f.getECBlocks();for(let _ of w)p+=_.getCount()*(_.getDataCodewords()+y);this.totalCodewords=p}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(s,a){if(s&1||a&1)throw new H;for(let l of Ze.VERSIONS)if(l.symbolSizeRows===s&&l.symbolSizeColumns===a)return l;throw new H}toString(){return""+this.versionNumber}static buildVersions(){return[new Ze(1,10,10,8,8,new ut(5,new ct(1,3))),new Ze(2,12,12,10,10,new ut(7,new ct(1,5))),new Ze(3,14,14,12,12,new ut(10,new ct(1,8))),new Ze(4,16,16,14,14,new ut(12,new ct(1,12))),new Ze(5,18,18,16,16,new ut(14,new ct(1,18))),new Ze(6,20,20,18,18,new ut(18,new ct(1,22))),new Ze(7,22,22,20,20,new ut(20,new ct(1,30))),new Ze(8,24,24,22,22,new ut(24,new ct(1,36))),new Ze(9,26,26,24,24,new ut(28,new ct(1,44))),new Ze(10,32,32,14,14,new ut(36,new ct(1,62))),new Ze(11,36,36,16,16,new ut(42,new ct(1,86))),new Ze(12,40,40,18,18,new ut(48,new ct(1,114))),new Ze(13,44,44,20,20,new ut(56,new ct(1,144))),new Ze(14,48,48,22,22,new ut(68,new ct(1,174))),new Ze(15,52,52,24,24,new ut(42,new ct(2,102))),new Ze(16,64,64,14,14,new ut(56,new ct(2,140))),new Ze(17,72,72,16,16,new ut(36,new ct(4,92))),new Ze(18,80,80,18,18,new ut(48,new ct(4,114))),new Ze(19,88,88,20,20,new ut(56,new ct(4,144))),new Ze(20,96,96,22,22,new ut(68,new ct(4,174))),new Ze(21,104,104,24,24,new ut(56,new ct(6,136))),new Ze(22,120,120,18,18,new ut(68,new ct(6,175))),new Ze(23,132,132,20,20,new ut(62,new ct(8,163))),new Ze(24,144,144,22,22,new ut(62,new ct(8,156),new ct(2,155))),new Ze(25,8,18,6,16,new ut(7,new ct(1,5))),new Ze(26,8,32,6,14,new ut(11,new ct(1,10))),new Ze(27,12,26,10,24,new ut(14,new ct(1,16))),new Ze(28,12,36,10,16,new ut(18,new ct(1,22))),new Ze(29,16,36,14,16,new ut(24,new ct(1,32))),new Ze(30,16,48,14,22,new ut(28,new ct(1,49)))]}}Ze.VERSIONS=Ze.buildVersions();class fp{constructor(s){let a=s.getHeight();if(a<8||a>144||a&1)throw new H;this.version=fp.readVersion(s),this.mappingBitMatrix=this.extractDataRegion(s),this.readMappingMatrix=new ln(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(s){let a=s.getHeight(),l=s.getWidth();return Ze.getVersionForDimensions(a,l)}readCodewords(){let s=new Int8Array(this.version.getTotalCodewords()),a=0,l=4,u=0,d=this.mappingBitMatrix.getHeight(),f=this.mappingBitMatrix.getWidth(),p=!1,y=!1,w=!1,_=!1;do if(l===d&&u===0&&!p)s[a++]=this.readCorner1(d,f)&255,l-=2,u+=2,p=!0;else if(l===d-2&&u===0&&f&3&&!y)s[a++]=this.readCorner2(d,f)&255,l-=2,u+=2,y=!0;else if(l===d+4&&u===2&&!(f&7)&&!w)s[a++]=this.readCorner3(d,f)&255,l-=2,u+=2,w=!0;else if(l===d-2&&u===0&&(f&7)===4&&!_)s[a++]=this.readCorner4(d,f)&255,l-=2,u+=2,_=!0;else{do l<d&&u>=0&&!this.readMappingMatrix.get(u,l)&&(s[a++]=this.readUtah(l,u,d,f)&255),l-=2,u+=2;while(l>=0&&u<f);l+=1,u+=3;do l>=0&&u<f&&!this.readMappingMatrix.get(u,l)&&(s[a++]=this.readUtah(l,u,d,f)&255),l+=2,u-=2;while(l<d&&u>=0);l+=3,u+=1}while(l<d||u<f);if(a!==this.version.getTotalCodewords())throw new H;return s}readModule(s,a,l,u){return s<0&&(s+=l,a+=4-(l+4&7)),a<0&&(a+=u,s+=4-(u+4&7)),this.readMappingMatrix.set(a,s),this.mappingBitMatrix.get(a,s)}readUtah(s,a,l,u){let d=0;return this.readModule(s-2,a-2,l,u)&&(d|=1),d<<=1,this.readModule(s-2,a-1,l,u)&&(d|=1),d<<=1,this.readModule(s-1,a-2,l,u)&&(d|=1),d<<=1,this.readModule(s-1,a-1,l,u)&&(d|=1),d<<=1,this.readModule(s-1,a,l,u)&&(d|=1),d<<=1,this.readModule(s,a-2,l,u)&&(d|=1),d<<=1,this.readModule(s,a-1,l,u)&&(d|=1),d<<=1,this.readModule(s,a,l,u)&&(d|=1),d}readCorner1(s,a){let l=0;return this.readModule(s-1,0,s,a)&&(l|=1),l<<=1,this.readModule(s-1,1,s,a)&&(l|=1),l<<=1,this.readModule(s-1,2,s,a)&&(l|=1),l<<=1,this.readModule(0,a-2,s,a)&&(l|=1),l<<=1,this.readModule(0,a-1,s,a)&&(l|=1),l<<=1,this.readModule(1,a-1,s,a)&&(l|=1),l<<=1,this.readModule(2,a-1,s,a)&&(l|=1),l<<=1,this.readModule(3,a-1,s,a)&&(l|=1),l}readCorner2(s,a){let l=0;return this.readModule(s-3,0,s,a)&&(l|=1),l<<=1,this.readModule(s-2,0,s,a)&&(l|=1),l<<=1,this.readModule(s-1,0,s,a)&&(l|=1),l<<=1,this.readModule(0,a-4,s,a)&&(l|=1),l<<=1,this.readModule(0,a-3,s,a)&&(l|=1),l<<=1,this.readModule(0,a-2,s,a)&&(l|=1),l<<=1,this.readModule(0,a-1,s,a)&&(l|=1),l<<=1,this.readModule(1,a-1,s,a)&&(l|=1),l}readCorner3(s,a){let l=0;return this.readModule(s-1,0,s,a)&&(l|=1),l<<=1,this.readModule(s-1,a-1,s,a)&&(l|=1),l<<=1,this.readModule(0,a-3,s,a)&&(l|=1),l<<=1,this.readModule(0,a-2,s,a)&&(l|=1),l<<=1,this.readModule(0,a-1,s,a)&&(l|=1),l<<=1,this.readModule(1,a-3,s,a)&&(l|=1),l<<=1,this.readModule(1,a-2,s,a)&&(l|=1),l<<=1,this.readModule(1,a-1,s,a)&&(l|=1),l}readCorner4(s,a){let l=0;return this.readModule(s-3,0,s,a)&&(l|=1),l<<=1,this.readModule(s-2,0,s,a)&&(l|=1),l<<=1,this.readModule(s-1,0,s,a)&&(l|=1),l<<=1,this.readModule(0,a-2,s,a)&&(l|=1),l<<=1,this.readModule(0,a-1,s,a)&&(l|=1),l<<=1,this.readModule(1,a-1,s,a)&&(l|=1),l<<=1,this.readModule(2,a-1,s,a)&&(l|=1),l<<=1,this.readModule(3,a-1,s,a)&&(l|=1),l}extractDataRegion(s){let a=this.version.getSymbolSizeRows(),l=this.version.getSymbolSizeColumns();if(s.getHeight()!==a)throw new m("Dimension of bitMatrix must match the version size");let u=this.version.getDataRegionSizeRows(),d=this.version.getDataRegionSizeColumns(),f=a/u|0,p=l/d|0,y=f*u,w=p*d,_=new ln(w,y);for(let b=0;b<f;++b){let E=b*u;for(let D=0;D<p;++D){let T=D*d;for(let O=0;O<u;++O){let k=b*(u+2)+1+O,F=E+O;for(let q=0;q<d;++q){let re=D*(d+2)+1+q;if(s.get(re,k)){let V=T+q;_.set(V,F)}}}}}return _}}class hp{constructor(s,a){this.numDataCodewords=s,this.codewords=a}static getDataBlocks(s,a){let l=a.getECBlocks(),u=0,d=l.getECBlocks();for(let O of d)u+=O.getCount();let f=new Array(u),p=0;for(let O of d)for(let k=0;k<O.getCount();k++){let F=O.getDataCodewords(),q=l.getECCodewords()+F;f[p++]=new hp(F,new Uint8Array(q))}let w=f[0].codewords.length-l.getECCodewords(),_=w-1,b=0;for(let O=0;O<_;O++)for(let k=0;k<p;k++)f[k].codewords[O]=s[b++];let E=a.getVersionNumber()===24,D=E?8:p;for(let O=0;O<D;O++)f[O].codewords[w-1]=s[b++];let T=f[0].codewords.length;for(let O=w;O<T;O++)for(let k=0;k<p;k++){let F=E?(k+8)%p:k,q=E&&F>7?O-1:O;f[F].codewords[q]=s[b++]}if(b!==s.length)throw new m;return f}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class pp{constructor(s){this.bytes=s,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(s){if(s<1||s>32||s>this.available())throw new m(""+s);let a=0,l=this.bitOffset,u=this.byteOffset,d=this.bytes;if(l>0){let f=8-l,p=s<f?s:f,y=f-p,w=255>>8-p<<y;a=(d[u]&w)>>y,s-=p,l+=p,l===8&&(l=0,u++)}if(s>0){for(;s>=8;)a=a<<8|d[u]&255,u++,s-=8;if(s>0){let f=8-s,p=255>>f<<f;a=a<<s|(d[u]&p)>>f,l+=s}}return this.bitOffset=l,this.byteOffset=u,a}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var dn=function(C){return C[C.PAD_ENCODE=0]="PAD_ENCODE",C[C.ASCII_ENCODE=1]="ASCII_ENCODE",C[C.C40_ENCODE=2]="C40_ENCODE",C[C.TEXT_ENCODE=3]="TEXT_ENCODE",C[C.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",C[C.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",C[C.BASE256_ENCODE=6]="BASE256_ENCODE",C}(dn||{});class eo{static decode(s){let a=new pp(s),l=new yt,u=new yt,d=new Array,f=dn.ASCII_ENCODE;do if(f===dn.ASCII_ENCODE)f=this.decodeAsciiSegment(a,l,u);else{switch(f){case dn.C40_ENCODE:this.decodeC40Segment(a,l);break;case dn.TEXT_ENCODE:this.decodeTextSegment(a,l);break;case dn.ANSIX12_ENCODE:this.decodeAnsiX12Segment(a,l);break;case dn.EDIFACT_ENCODE:this.decodeEdifactSegment(a,l);break;case dn.BASE256_ENCODE:this.decodeBase256Segment(a,l,d);break;default:throw new H}f=dn.ASCII_ENCODE}while(f!==dn.PAD_ENCODE&&a.available()>0);return u.length()>0&&l.append(u.toString()),new Ka(s,l.toString(),d.length===0?null:d,null)}static decodeAsciiSegment(s,a,l){let u=!1;do{let d=s.readBits(8);if(d===0)throw new H;if(d<=128)return u&&(d+=128),a.append(String.fromCharCode(d-1)),dn.ASCII_ENCODE;if(d===129)return dn.PAD_ENCODE;if(d<=229){let f=d-130;f<10&&a.append("0"),a.append(""+f)}else switch(d){case 230:return dn.C40_ENCODE;case 231:return dn.BASE256_ENCODE;case 232:a.append("");break;case 233:case 234:break;case 235:u=!0;break;case 236:a.append("[)>05"),l.insert(0,"");break;case 237:a.append("[)>06"),l.insert(0,"");break;case 238:return dn.ANSIX12_ENCODE;case 239:return dn.TEXT_ENCODE;case 240:return dn.EDIFACT_ENCODE;case 241:break;default:if(d!==254||s.available()!==0)throw new H;break}}while(s.available()>0);return dn.ASCII_ENCODE}static decodeC40Segment(s,a){let l=!1,u=[],d=0;do{if(s.available()===8)return;let f=s.readBits(8);if(f===254)return;this.parseTwoBytes(f,s.readBits(8),u);for(let p=0;p<3;p++){let y=u[p];switch(d){case 0:if(y<3)d=y+1;else if(y<this.C40_BASIC_SET_CHARS.length){let w=this.C40_BASIC_SET_CHARS[y];l?(a.append(String.fromCharCode(w.charCodeAt(0)+128)),l=!1):a.append(w)}else throw new H;break;case 1:l?(a.append(String.fromCharCode(y+128)),l=!1):a.append(String.fromCharCode(y)),d=0;break;case 2:if(y<this.C40_SHIFT2_SET_CHARS.length){let w=this.C40_SHIFT2_SET_CHARS[y];l?(a.append(String.fromCharCode(w.charCodeAt(0)+128)),l=!1):a.append(w)}else switch(y){case 27:a.append("");break;case 30:l=!0;break;default:throw new H}d=0;break;case 3:l?(a.append(String.fromCharCode(y+224)),l=!1):a.append(String.fromCharCode(y+96)),d=0;break;default:throw new H}}}while(s.available()>0)}static decodeTextSegment(s,a){let l=!1,u=[],d=0;do{if(s.available()===8)return;let f=s.readBits(8);if(f===254)return;this.parseTwoBytes(f,s.readBits(8),u);for(let p=0;p<3;p++){let y=u[p];switch(d){case 0:if(y<3)d=y+1;else if(y<this.TEXT_BASIC_SET_CHARS.length){let w=this.TEXT_BASIC_SET_CHARS[y];l?(a.append(String.fromCharCode(w.charCodeAt(0)+128)),l=!1):a.append(w)}else throw new H;break;case 1:l?(a.append(String.fromCharCode(y+128)),l=!1):a.append(String.fromCharCode(y)),d=0;break;case 2:if(y<this.TEXT_SHIFT2_SET_CHARS.length){let w=this.TEXT_SHIFT2_SET_CHARS[y];l?(a.append(String.fromCharCode(w.charCodeAt(0)+128)),l=!1):a.append(w)}else switch(y){case 27:a.append("");break;case 30:l=!0;break;default:throw new H}d=0;break;case 3:if(y<this.TEXT_SHIFT3_SET_CHARS.length){let w=this.TEXT_SHIFT3_SET_CHARS[y];l?(a.append(String.fromCharCode(w.charCodeAt(0)+128)),l=!1):a.append(w),d=0}else throw new H;break;default:throw new H}}}while(s.available()>0)}static decodeAnsiX12Segment(s,a){let l=[];do{if(s.available()===8)return;let u=s.readBits(8);if(u===254)return;this.parseTwoBytes(u,s.readBits(8),l);for(let d=0;d<3;d++){let f=l[d];switch(f){case 0:a.append("\r");break;case 1:a.append("*");break;case 2:a.append(">");break;case 3:a.append(" ");break;default:if(f<14)a.append(String.fromCharCode(f+44));else if(f<40)a.append(String.fromCharCode(f+51));else throw new H;break}}}while(s.available()>0)}static parseTwoBytes(s,a,l){let u=(s<<8)+a-1,d=Math.floor(u/1600);l[0]=d,u-=d*1600,d=Math.floor(u/40),l[1]=d,l[2]=u-d*40}static decodeEdifactSegment(s,a){do{if(s.available()<=16)return;for(let l=0;l<4;l++){let u=s.readBits(6);if(u===31){let d=8-s.getBitOffset();d!==8&&s.readBits(d);return}u&32||(u|=64),a.append(String.fromCharCode(u))}}while(s.available()>0)}static decodeBase256Segment(s,a,l){let u=1+s.getByteOffset(),d=this.unrandomize255State(s.readBits(8),u++),f;if(d===0?f=s.available()/8|0:d<250?f=d:f=250*(d-249)+this.unrandomize255State(s.readBits(8),u++),f<0)throw new H;let p=new Uint8Array(f);for(let y=0;y<f;y++){if(s.available()<8)throw new H;p[y]=this.unrandomize255State(s.readBits(8),u++)}l.push(p);try{a.append(On.decode(p,Ee.ISO88591))}catch(y){throw new vi("Platform does not support required encoding: "+y.message)}}static unrandomize255State(s,a){let l=149*a%255+1,u=s-l;return u>=0?u:u+256}}eo.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],eo.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],eo.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],eo.TEXT_SHIFT2_SET_CHARS=eo.C40_SHIFT2_SET_CHARS,eo.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~","\x7F"];class IT{constructor(){this.rsDecoder=new tl(at.DATA_MATRIX_FIELD_256)}decode(s){let a=new fp(s),l=a.getVersion(),u=a.readCodewords(),d=hp.getDataBlocks(u,l),f=0;for(let w of d)f+=w.getNumDataCodewords();let p=new Uint8Array(f),y=d.length;for(let w=0;w<y;w++){let _=d[w],b=_.getCodewords(),E=_.getNumDataCodewords();this.correctErrors(b,E);for(let D=0;D<E;D++)p[D*y+w]=b[D]}return eo.decode(p)}correctErrors(s,a){let l=new Int32Array(s);try{this.rsDecoder.decode(l,s.length-a)}catch{throw new x}for(let u=0;u<a;u++)s[u]=l[u]}}class Wt{constructor(s){this.image=s,this.rectangleDetector=new cu(this.image)}detect(){let s=this.rectangleDetector.detect(),a=this.detectSolid1(s);if(a=this.detectSolid2(a),a[3]=this.correctTopRight(a),!a[3])throw new U;a=this.shiftToModuleCenter(a);let l=a[0],u=a[1],d=a[2],f=a[3],p=this.transitionsBetween(l,f)+1,y=this.transitionsBetween(d,f)+1;(p&1)===1&&(p+=1),(y&1)===1&&(y+=1),4*p<7*y&&4*y<7*p&&(p=y=Math.max(p,y));let w=Wt.sampleGrid(this.image,l,u,d,f,p,y);return new lu(w,[l,u,d,f])}static shiftPoint(s,a,l){let u=(a.getX()-s.getX())/(l+1),d=(a.getY()-s.getY())/(l+1);return new ue(s.getX()+u,s.getY()+d)}static moveAway(s,a,l){let u=s.getX(),d=s.getY();return u<a?u-=1:u+=1,d<l?d-=1:d+=1,new ue(u,d)}detectSolid1(s){let a=s[0],l=s[1],u=s[3],d=s[2],f=this.transitionsBetween(a,l),p=this.transitionsBetween(l,u),y=this.transitionsBetween(u,d),w=this.transitionsBetween(d,a),_=f,b=[d,a,l,u];return _>p&&(_=p,b[0]=a,b[1]=l,b[2]=u,b[3]=d),_>y&&(_=y,b[0]=l,b[1]=u,b[2]=d,b[3]=a),_>w&&(b[0]=u,b[1]=d,b[2]=a,b[3]=l),b}detectSolid2(s){let a=s[0],l=s[1],u=s[2],d=s[3],f=this.transitionsBetween(a,d),p=Wt.shiftPoint(l,u,(f+1)*4),y=Wt.shiftPoint(u,l,(f+1)*4),w=this.transitionsBetween(p,a),_=this.transitionsBetween(y,d);return w<_?(s[0]=a,s[1]=l,s[2]=u,s[3]=d):(s[0]=l,s[1]=u,s[2]=d,s[3]=a),s}correctTopRight(s){let a=s[0],l=s[1],u=s[2],d=s[3],f=this.transitionsBetween(a,d),p=this.transitionsBetween(l,d),y=Wt.shiftPoint(a,l,(p+1)*4),w=Wt.shiftPoint(u,l,(f+1)*4);f=this.transitionsBetween(y,d),p=this.transitionsBetween(w,d);let _=new ue(d.getX()+(u.getX()-l.getX())/(f+1),d.getY()+(u.getY()-l.getY())/(f+1)),b=new ue(d.getX()+(a.getX()-l.getX())/(p+1),d.getY()+(a.getY()-l.getY())/(p+1));if(!this.isValid(_))return this.isValid(b)?b:null;if(!this.isValid(b))return _;let E=this.transitionsBetween(y,_)+this.transitionsBetween(w,_),D=this.transitionsBetween(y,b)+this.transitionsBetween(w,b);return E>D?_:b}shiftToModuleCenter(s){let a=s[0],l=s[1],u=s[2],d=s[3],f=this.transitionsBetween(a,d)+1,p=this.transitionsBetween(u,d)+1,y=Wt.shiftPoint(a,l,p*4),w=Wt.shiftPoint(u,l,f*4);f=this.transitionsBetween(y,d)+1,p=this.transitionsBetween(w,d)+1,(f&1)===1&&(f+=1),(p&1)===1&&(p+=1);let _=(a.getX()+l.getX()+u.getX()+d.getX())/4,b=(a.getY()+l.getY()+u.getY()+d.getY())/4;a=Wt.moveAway(a,_,b),l=Wt.moveAway(l,_,b),u=Wt.moveAway(u,_,b),d=Wt.moveAway(d,_,b);let E,D;return y=Wt.shiftPoint(a,l,p*4),y=Wt.shiftPoint(y,d,f*4),E=Wt.shiftPoint(l,a,p*4),E=Wt.shiftPoint(E,u,f*4),w=Wt.shiftPoint(u,d,p*4),w=Wt.shiftPoint(w,l,f*4),D=Wt.shiftPoint(d,u,p*4),D=Wt.shiftPoint(D,a,f*4),[y,E,w,D]}isValid(s){return s.getX()>=0&&s.getX()<this.image.getWidth()&&s.getY()>0&&s.getY()<this.image.getHeight()}static sampleGrid(s,a,l,u,d,f,p){return Qi.getInstance().sampleGrid(s,f,p,.5,.5,f-.5,.5,f-.5,p-.5,.5,p-.5,a.getX(),a.getY(),d.getX(),d.getY(),u.getX(),u.getY(),l.getX(),l.getY())}transitionsBetween(s,a){let l=Math.trunc(s.getX()),u=Math.trunc(s.getY()),d=Math.trunc(a.getX()),f=Math.trunc(a.getY()),p=Math.abs(f-u)>Math.abs(d-l);if(p){let O=l;l=u,u=O,O=d,d=f,f=O}let y=Math.abs(d-l),w=Math.abs(f-u),_=-y/2,b=u<f?1:-1,E=l<d?1:-1,D=0,T=this.image.get(p?u:l,p?l:u);for(let O=l,k=u;O!==d;O+=E){let F=this.image.get(p?k:O,p?O:k);if(F!==T&&(D++,T=F),_+=w,_>0){if(k===f)break;k+=b,_-=y}}return D}}let pu=(()=>{class C{constructor(){this.decoder=new IT}decode(a,l=null){let u,d;if(l!=null&&l.has(ge.PURE_BARCODE)){let _=C.extractPureBits(a.getBlackMatrix());u=this.decoder.decode(_),d=C.NO_POINTS}else{let _=new Wt(a.getBlackMatrix()).detect();u=this.decoder.decode(_.getBits()),d=_.getPoints()}let f=u.getRawBytes(),p=new Fn(u.getText(),f,8*f.length,d,we.DATA_MATRIX,A.currentTimeMillis()),y=u.getByteSegments();y!=null&&p.putMetadata(un.BYTE_SEGMENTS,y);let w=u.getECLevel();return w!=null&&p.putMetadata(un.ERROR_CORRECTION_LEVEL,w),p}reset(){}static extractPureBits(a){let l=a.getTopLeftOnBit(),u=a.getBottomRightOnBit();if(l==null||u==null)throw new U;let d=this.moduleSize(l,a),f=l[1],p=u[1],y=l[0],_=(u[0]-y+1)/d,b=(p-f+1)/d;if(_<=0||b<=0)throw new U;let E=d/2;f+=E,y+=E;let D=new ln(_,b);for(let T=0;T<b;T++){let O=f+T*d;for(let k=0;k<_;k++)a.get(y+k*d,O)&&D.set(k,T)}return D}static moduleSize(a,l){let u=l.getWidth(),d=a[0],f=a[1];for(;d<u&&l.get(d,f);)d++;if(d===u)throw new U;let p=d-a[0];if(p===0)throw new U;return p}}return C.NO_POINTS=[],C})();class ST extends Po{constructor(s=500){super(new pu,s)}}var rl=function(C){return C[C.L=0]="L",C[C.M=1]="M",C[C.Q=2]="Q",C[C.H=3]="H",C}(rl||{});class bt{constructor(s,a,l){this.value=s,this.stringValue=a,this.bits=l,bt.FOR_BITS.set(l,this),bt.FOR_VALUE.set(s,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(s){switch(s){case"L":return bt.L;case"M":return bt.M;case"Q":return bt.Q;case"H":return bt.H;default:throw new g(s+"not available")}}toString(){return this.stringValue}equals(s){if(!(s instanceof bt))return!1;let a=s;return this.value===a.value}static forBits(s){if(s<0||s>=bt.FOR_BITS.size)throw new m;return bt.FOR_BITS.get(s)}}bt.FOR_BITS=new Map,bt.FOR_VALUE=new Map,bt.L=new bt(rl.L,"L",1),bt.M=new bt(rl.M,"M",0),bt.Q=new bt(rl.Q,"Q",3),bt.H=new bt(rl.H,"H",2);class Pn{constructor(s){this.errorCorrectionLevel=bt.forBits(s>>3&3),this.dataMask=s&7}static numBitsDiffering(s,a){return W.bitCount(s^a)}static decodeFormatInformation(s,a){let l=Pn.doDecodeFormatInformation(s,a);return l!==null?l:Pn.doDecodeFormatInformation(s^Pn.FORMAT_INFO_MASK_QR,a^Pn.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(s,a){let l=Number.MAX_SAFE_INTEGER,u=0;for(let d of Pn.FORMAT_INFO_DECODE_LOOKUP){let f=d[0];if(f===s||f===a)return new Pn(d[1]);let p=Pn.numBitsDiffering(s,f);p<l&&(u=d[1],l=p),s!==a&&(p=Pn.numBitsDiffering(a,f),p<l&&(u=d[1],l=p))}return l<=3?new Pn(u):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(s){if(!(s instanceof Pn))return!1;let a=s;return this.errorCorrectionLevel===a.errorCorrectionLevel&&this.dataMask===a.dataMask}}Pn.FORMAT_INFO_MASK_QR=21522,Pn.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class L{constructor(s,...a){this.ecCodewordsPerBlock=s,this.ecBlocks=a}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let s=0,a=this.ecBlocks;for(let l of a)s+=l.getCount();return s}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class S{constructor(s,a){this.count=s,this.dataCodewords=a}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class he{constructor(s,a,...l){this.versionNumber=s,this.alignmentPatternCenters=a,this.ecBlocks=l;let u=0,d=l[0].getECCodewordsPerBlock(),f=l[0].getECBlocks();for(let p of f)u+=p.getCount()*(p.getDataCodewords()+d);this.totalCodewords=u}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(s){return this.ecBlocks[s.getValue()]}static getProvisionalVersionForDimension(s){if(s%4!==1)throw new H;try{return this.getVersionForNumber((s-17)/4)}catch{throw new H}}static getVersionForNumber(s){if(s<1||s>40)throw new m;return he.VERSIONS[s-1]}static decodeVersionInformation(s){let a=Number.MAX_SAFE_INTEGER,l=0;for(let u=0;u<he.VERSION_DECODE_INFO.length;u++){let d=he.VERSION_DECODE_INFO[u];if(d===s)return he.getVersionForNumber(u+7);let f=Pn.numBitsDiffering(s,d);f<a&&(l=u+7,a=f)}return a<=3?he.getVersionForNumber(l):null}buildFunctionPattern(){let s=this.getDimensionForVersion(),a=new ln(s);a.setRegion(0,0,9,9),a.setRegion(s-8,0,8,9),a.setRegion(0,s-8,9,8);let l=this.alignmentPatternCenters.length;for(let u=0;u<l;u++){let d=this.alignmentPatternCenters[u]-2;for(let f=0;f<l;f++)u===0&&(f===0||f===l-1)||u===l-1&&f===0||a.setRegion(this.alignmentPatternCenters[f]-2,d,5,5)}return a.setRegion(6,9,1,s-17),a.setRegion(9,6,s-17,1),this.versionNumber>6&&(a.setRegion(s-11,0,3,6),a.setRegion(0,s-11,6,3)),a}toString(){return""+this.versionNumber}}he.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),he.VERSIONS=[new he(1,new Int32Array(0),new L(7,new S(1,19)),new L(10,new S(1,16)),new L(13,new S(1,13)),new L(17,new S(1,9))),new he(2,Int32Array.from([6,18]),new L(10,new S(1,34)),new L(16,new S(1,28)),new L(22,new S(1,22)),new L(28,new S(1,16))),new he(3,Int32Array.from([6,22]),new L(15,new S(1,55)),new L(26,new S(1,44)),new L(18,new S(2,17)),new L(22,new S(2,13))),new he(4,Int32Array.from([6,26]),new L(20,new S(1,80)),new L(18,new S(2,32)),new L(26,new S(2,24)),new L(16,new S(4,9))),new he(5,Int32Array.from([6,30]),new L(26,new S(1,108)),new L(24,new S(2,43)),new L(18,new S(2,15),new S(2,16)),new L(22,new S(2,11),new S(2,12))),new he(6,Int32Array.from([6,34]),new L(18,new S(2,68)),new L(16,new S(4,27)),new L(24,new S(4,19)),new L(28,new S(4,15))),new he(7,Int32Array.from([6,22,38]),new L(20,new S(2,78)),new L(18,new S(4,31)),new L(18,new S(2,14),new S(4,15)),new L(26,new S(4,13),new S(1,14))),new he(8,Int32Array.from([6,24,42]),new L(24,new S(2,97)),new L(22,new S(2,38),new S(2,39)),new L(22,new S(4,18),new S(2,19)),new L(26,new S(4,14),new S(2,15))),new he(9,Int32Array.from([6,26,46]),new L(30,new S(2,116)),new L(22,new S(3,36),new S(2,37)),new L(20,new S(4,16),new S(4,17)),new L(24,new S(4,12),new S(4,13))),new he(10,Int32Array.from([6,28,50]),new L(18,new S(2,68),new S(2,69)),new L(26,new S(4,43),new S(1,44)),new L(24,new S(6,19),new S(2,20)),new L(28,new S(6,15),new S(2,16))),new he(11,Int32Array.from([6,30,54]),new L(20,new S(4,81)),new L(30,new S(1,50),new S(4,51)),new L(28,new S(4,22),new S(4,23)),new L(24,new S(3,12),new S(8,13))),new he(12,Int32Array.from([6,32,58]),new L(24,new S(2,92),new S(2,93)),new L(22,new S(6,36),new S(2,37)),new L(26,new S(4,20),new S(6,21)),new L(28,new S(7,14),new S(4,15))),new he(13,Int32Array.from([6,34,62]),new L(26,new S(4,107)),new L(22,new S(8,37),new S(1,38)),new L(24,new S(8,20),new S(4,21)),new L(22,new S(12,11),new S(4,12))),new he(14,Int32Array.from([6,26,46,66]),new L(30,new S(3,115),new S(1,116)),new L(24,new S(4,40),new S(5,41)),new L(20,new S(11,16),new S(5,17)),new L(24,new S(11,12),new S(5,13))),new he(15,Int32Array.from([6,26,48,70]),new L(22,new S(5,87),new S(1,88)),new L(24,new S(5,41),new S(5,42)),new L(30,new S(5,24),new S(7,25)),new L(24,new S(11,12),new S(7,13))),new he(16,Int32Array.from([6,26,50,74]),new L(24,new S(5,98),new S(1,99)),new L(28,new S(7,45),new S(3,46)),new L(24,new S(15,19),new S(2,20)),new L(30,new S(3,15),new S(13,16))),new he(17,Int32Array.from([6,30,54,78]),new L(28,new S(1,107),new S(5,108)),new L(28,new S(10,46),new S(1,47)),new L(28,new S(1,22),new S(15,23)),new L(28,new S(2,14),new S(17,15))),new he(18,Int32Array.from([6,30,56,82]),new L(30,new S(5,120),new S(1,121)),new L(26,new S(9,43),new S(4,44)),new L(28,new S(17,22),new S(1,23)),new L(28,new S(2,14),new S(19,15))),new he(19,Int32Array.from([6,30,58,86]),new L(28,new S(3,113),new S(4,114)),new L(26,new S(3,44),new S(11,45)),new L(26,new S(17,21),new S(4,22)),new L(26,new S(9,13),new S(16,14))),new he(20,Int32Array.from([6,34,62,90]),new L(28,new S(3,107),new S(5,108)),new L(26,new S(3,41),new S(13,42)),new L(30,new S(15,24),new S(5,25)),new L(28,new S(15,15),new S(10,16))),new he(21,Int32Array.from([6,28,50,72,94]),new L(28,new S(4,116),new S(4,117)),new L(26,new S(17,42)),new L(28,new S(17,22),new S(6,23)),new L(30,new S(19,16),new S(6,17))),new he(22,Int32Array.from([6,26,50,74,98]),new L(28,new S(2,111),new S(7,112)),new L(28,new S(17,46)),new L(30,new S(7,24),new S(16,25)),new L(24,new S(34,13))),new he(23,Int32Array.from([6,30,54,78,102]),new L(30,new S(4,121),new S(5,122)),new L(28,new S(4,47),new S(14,48)),new L(30,new S(11,24),new S(14,25)),new L(30,new S(16,15),new S(14,16))),new he(24,Int32Array.from([6,28,54,80,106]),new L(30,new S(6,117),new S(4,118)),new L(28,new S(6,45),new S(14,46)),new L(30,new S(11,24),new S(16,25)),new L(30,new S(30,16),new S(2,17))),new he(25,Int32Array.from([6,32,58,84,110]),new L(26,new S(8,106),new S(4,107)),new L(28,new S(8,47),new S(13,48)),new L(30,new S(7,24),new S(22,25)),new L(30,new S(22,15),new S(13,16))),new he(26,Int32Array.from([6,30,58,86,114]),new L(28,new S(10,114),new S(2,115)),new L(28,new S(19,46),new S(4,47)),new L(28,new S(28,22),new S(6,23)),new L(30,new S(33,16),new S(4,17))),new he(27,Int32Array.from([6,34,62,90,118]),new L(30,new S(8,122),new S(4,123)),new L(28,new S(22,45),new S(3,46)),new L(30,new S(8,23),new S(26,24)),new L(30,new S(12,15),new S(28,16))),new he(28,Int32Array.from([6,26,50,74,98,122]),new L(30,new S(3,117),new S(10,118)),new L(28,new S(3,45),new S(23,46)),new L(30,new S(4,24),new S(31,25)),new L(30,new S(11,15),new S(31,16))),new he(29,Int32Array.from([6,30,54,78,102,126]),new L(30,new S(7,116),new S(7,117)),new L(28,new S(21,45),new S(7,46)),new L(30,new S(1,23),new S(37,24)),new L(30,new S(19,15),new S(26,16))),new he(30,Int32Array.from([6,26,52,78,104,130]),new L(30,new S(5,115),new S(10,116)),new L(28,new S(19,47),new S(10,48)),new L(30,new S(15,24),new S(25,25)),new L(30,new S(23,15),new S(25,16))),new he(31,Int32Array.from([6,30,56,82,108,134]),new L(30,new S(13,115),new S(3,116)),new L(28,new S(2,46),new S(29,47)),new L(30,new S(42,24),new S(1,25)),new L(30,new S(23,15),new S(28,16))),new he(32,Int32Array.from([6,34,60,86,112,138]),new L(30,new S(17,115)),new L(28,new S(10,46),new S(23,47)),new L(30,new S(10,24),new S(35,25)),new L(30,new S(19,15),new S(35,16))),new he(33,Int32Array.from([6,30,58,86,114,142]),new L(30,new S(17,115),new S(1,116)),new L(28,new S(14,46),new S(21,47)),new L(30,new S(29,24),new S(19,25)),new L(30,new S(11,15),new S(46,16))),new he(34,Int32Array.from([6,34,62,90,118,146]),new L(30,new S(13,115),new S(6,116)),new L(28,new S(14,46),new S(23,47)),new L(30,new S(44,24),new S(7,25)),new L(30,new S(59,16),new S(1,17))),new he(35,Int32Array.from([6,30,54,78,102,126,150]),new L(30,new S(12,121),new S(7,122)),new L(28,new S(12,47),new S(26,48)),new L(30,new S(39,24),new S(14,25)),new L(30,new S(22,15),new S(41,16))),new he(36,Int32Array.from([6,24,50,76,102,128,154]),new L(30,new S(6,121),new S(14,122)),new L(28,new S(6,47),new S(34,48)),new L(30,new S(46,24),new S(10,25)),new L(30,new S(2,15),new S(64,16))),new he(37,Int32Array.from([6,28,54,80,106,132,158]),new L(30,new S(17,122),new S(4,123)),new L(28,new S(29,46),new S(14,47)),new L(30,new S(49,24),new S(10,25)),new L(30,new S(24,15),new S(46,16))),new he(38,Int32Array.from([6,32,58,84,110,136,162]),new L(30,new S(4,122),new S(18,123)),new L(28,new S(13,46),new S(32,47)),new L(30,new S(48,24),new S(14,25)),new L(30,new S(42,15),new S(32,16))),new he(39,Int32Array.from([6,26,54,82,110,138,166]),new L(30,new S(20,117),new S(4,118)),new L(28,new S(40,47),new S(7,48)),new L(30,new S(43,24),new S(22,25)),new L(30,new S(10,15),new S(67,16))),new he(40,Int32Array.from([6,30,58,86,114,142,170]),new L(30,new S(19,118),new S(6,119)),new L(28,new S(18,47),new S(31,48)),new L(30,new S(34,24),new S(34,25)),new L(30,new S(20,15),new S(61,16)))];var wn=function(C){return C[C.DATA_MASK_000=0]="DATA_MASK_000",C[C.DATA_MASK_001=1]="DATA_MASK_001",C[C.DATA_MASK_010=2]="DATA_MASK_010",C[C.DATA_MASK_011=3]="DATA_MASK_011",C[C.DATA_MASK_100=4]="DATA_MASK_100",C[C.DATA_MASK_101=5]="DATA_MASK_101",C[C.DATA_MASK_110=6]="DATA_MASK_110",C[C.DATA_MASK_111=7]="DATA_MASK_111",C}(wn||{});class pr{constructor(s,a){this.value=s,this.isMasked=a}unmaskBitMatrix(s,a){for(let l=0;l<a;l++)for(let u=0;u<a;u++)this.isMasked(l,u)&&s.flip(u,l)}}pr.values=new Map([[wn.DATA_MASK_000,new pr(wn.DATA_MASK_000,(C,s)=>(C+s&1)===0)],[wn.DATA_MASK_001,new pr(wn.DATA_MASK_001,(C,s)=>(C&1)===0)],[wn.DATA_MASK_010,new pr(wn.DATA_MASK_010,(C,s)=>s%3===0)],[wn.DATA_MASK_011,new pr(wn.DATA_MASK_011,(C,s)=>(C+s)%3===0)],[wn.DATA_MASK_100,new pr(wn.DATA_MASK_100,(C,s)=>(Math.floor(C/2)+Math.floor(s/3)&1)===0)],[wn.DATA_MASK_101,new pr(wn.DATA_MASK_101,(C,s)=>C*s%6===0)],[wn.DATA_MASK_110,new pr(wn.DATA_MASK_110,(C,s)=>C*s%6<3)],[wn.DATA_MASK_111,new pr(wn.DATA_MASK_111,(C,s)=>(C+s+C*s%3&1)===0)]]);class DT{constructor(s){let a=s.getHeight();if(a<21||(a&3)!==1)throw new H;this.bitMatrix=s}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let s=0;for(let d=0;d<6;d++)s=this.copyBit(d,8,s);s=this.copyBit(7,8,s),s=this.copyBit(8,8,s),s=this.copyBit(8,7,s);for(let d=5;d>=0;d--)s=this.copyBit(8,d,s);let a=this.bitMatrix.getHeight(),l=0,u=a-7;for(let d=a-1;d>=u;d--)l=this.copyBit(8,d,l);for(let d=a-8;d<a;d++)l=this.copyBit(d,8,l);if(this.parsedFormatInfo=Pn.decodeFormatInformation(s,l),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new H}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;let s=this.bitMatrix.getHeight(),a=Math.floor((s-17)/4);if(a<=6)return he.getVersionForNumber(a);let l=0,u=s-11;for(let f=5;f>=0;f--)for(let p=s-9;p>=u;p--)l=this.copyBit(p,f,l);let d=he.decodeVersionInformation(l);if(d!==null&&d.getDimensionForVersion()===s)return this.parsedVersion=d,d;l=0;for(let f=5;f>=0;f--)for(let p=s-9;p>=u;p--)l=this.copyBit(f,p,l);if(d=he.decodeVersionInformation(l),d!==null&&d.getDimensionForVersion()===s)return this.parsedVersion=d,d;throw new H}copyBit(s,a,l){return(this.isMirror?this.bitMatrix.get(a,s):this.bitMatrix.get(s,a))?l<<1|1:l<<1}readCodewords(){let s=this.readFormatInformation(),a=this.readVersion(),l=pr.values.get(s.getDataMask()),u=this.bitMatrix.getHeight();l.unmaskBitMatrix(this.bitMatrix,u);let d=a.buildFunctionPattern(),f=!0,p=new Uint8Array(a.getTotalCodewords()),y=0,w=0,_=0;for(let b=u-1;b>0;b-=2){b===6&&b--;for(let E=0;E<u;E++){let D=f?u-1-E:E;for(let T=0;T<2;T++)d.get(b-T,D)||(_++,w<<=1,this.bitMatrix.get(b-T,D)&&(w|=1),_===8&&(p[y++]=w,_=0,w=0))}f=!f}if(y!==a.getTotalCodewords())throw new H;return p}remask(){if(this.parsedFormatInfo===null)return;let s=pr.values[this.parsedFormatInfo.getDataMask()],a=this.bitMatrix.getHeight();s.unmaskBitMatrix(this.bitMatrix,a)}setMirror(s){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=s}mirror(){let s=this.bitMatrix;for(let a=0,l=s.getWidth();a<l;a++)for(let u=a+1,d=s.getHeight();u<d;u++)s.get(a,u)!==s.get(u,a)&&(s.flip(u,a),s.flip(a,u))}}class gp{constructor(s,a){this.numDataCodewords=s,this.codewords=a}static getDataBlocks(s,a,l){if(s.length!==a.getTotalCodewords())throw new m;let u=a.getECBlocksForLevel(l),d=0,f=u.getECBlocks();for(let T of f)d+=T.getCount();let p=new Array(d),y=0;for(let T of f)for(let O=0;O<T.getCount();O++){let k=T.getDataCodewords(),F=u.getECCodewordsPerBlock()+k;p[y++]=new gp(k,new Uint8Array(F))}let w=p[0].codewords.length,_=p.length-1;for(;_>=0&&p[_].codewords.length!==w;)_--;_++;let b=w-u.getECCodewordsPerBlock(),E=0;for(let T=0;T<b;T++)for(let O=0;O<y;O++)p[O].codewords[T]=s[E++];for(let T=_;T<y;T++)p[T].codewords[b]=s[E++];let D=p[0].codewords.length;for(let T=b;T<D;T++)for(let O=0;O<y;O++){let k=O<_?T:T+1;p[O].codewords[k]=s[E++]}return p}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Pr=function(C){return C[C.TERMINATOR=0]="TERMINATOR",C[C.NUMERIC=1]="NUMERIC",C[C.ALPHANUMERIC=2]="ALPHANUMERIC",C[C.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",C[C.BYTE=4]="BYTE",C[C.ECI=5]="ECI",C[C.KANJI=6]="KANJI",C[C.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",C[C.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",C[C.HANZI=9]="HANZI",C}(Pr||{});class me{constructor(s,a,l,u){this.value=s,this.stringValue=a,this.characterCountBitsForVersions=l,this.bits=u,me.FOR_BITS.set(u,this),me.FOR_VALUE.set(s,this)}static forBits(s){let a=me.FOR_BITS.get(s);if(a===void 0)throw new m;return a}getCharacterCountBits(s){let a=s.getVersionNumber(),l;return a<=9?l=0:a<=26?l=1:l=2,this.characterCountBitsForVersions[l]}getValue(){return this.value}getBits(){return this.bits}equals(s){if(!(s instanceof me))return!1;let a=s;return this.value===a.value}toString(){return this.stringValue}}me.FOR_BITS=new Map,me.FOR_VALUE=new Map,me.TERMINATOR=new me(Pr.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),me.NUMERIC=new me(Pr.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),me.ALPHANUMERIC=new me(Pr.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),me.STRUCTURED_APPEND=new me(Pr.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),me.BYTE=new me(Pr.BYTE,"BYTE",Int32Array.from([8,16,16]),4),me.ECI=new me(Pr.ECI,"ECI",Int32Array.from([0,0,0]),7),me.KANJI=new me(Pr.KANJI,"KANJI",Int32Array.from([8,10,12]),8),me.FNC1_FIRST_POSITION=new me(Pr.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),me.FNC1_SECOND_POSITION=new me(Pr.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),me.HANZI=new me(Pr.HANZI,"HANZI",Int32Array.from([8,10,12]),13);let oC=(()=>{class C{static decode(a,l,u,d){let f=new pp(a),p=new yt,y=new Array,w=-1,_=-1;try{let b=null,E=!1,D;do{if(f.available()<4)D=me.TERMINATOR;else{let T=f.readBits(4);D=me.forBits(T)}switch(D){case me.TERMINATOR:break;case me.FNC1_FIRST_POSITION:case me.FNC1_SECOND_POSITION:E=!0;break;case me.STRUCTURED_APPEND:if(f.available()<16)throw new H;w=f.readBits(8),_=f.readBits(8);break;case me.ECI:let T=C.parseECIValue(f);if(b=G.getCharacterSetECIByValue(T),b===null)throw new H;break;case me.HANZI:let O=f.readBits(4),k=f.readBits(D.getCharacterCountBits(l));O===C.GB2312_SUBSET&&C.decodeHanziSegment(f,p,k);break;default:let F=f.readBits(D.getCharacterCountBits(l));switch(D){case me.NUMERIC:C.decodeNumericSegment(f,p,F);break;case me.ALPHANUMERIC:C.decodeAlphanumericSegment(f,p,F,E);break;case me.BYTE:C.decodeByteSegment(f,p,F,b,y,d);break;case me.KANJI:C.decodeKanjiSegment(f,p,F);break;default:throw new H}break}}while(D!==me.TERMINATOR)}catch{throw new H}return new Ka(a,p.toString(),y.length===0?null:y,u===null?null:u.toString(),w,_)}static decodeHanziSegment(a,l,u){if(u*13>a.available())throw new H;let d=new Uint8Array(2*u),f=0;for(;u>0;){let p=a.readBits(13),y=p/96<<8&4294967295|p%96;y<959?y+=41377:y+=42657,d[f]=y>>8&255,d[f+1]=y&255,f+=2,u--}try{l.append(On.decode(d,Ee.GB2312))}catch(p){throw new H(p)}}static decodeKanjiSegment(a,l,u){if(u*13>a.available())throw new H;let d=new Uint8Array(2*u),f=0;for(;u>0;){let p=a.readBits(13),y=p/192<<8&4294967295|p%192;y<7936?y+=33088:y+=49472,d[f]=y>>8,d[f+1]=y,f+=2,u--}try{l.append(On.decode(d,Ee.SHIFT_JIS))}catch(p){throw new H(p)}}static decodeByteSegment(a,l,u,d,f,p){if(8*u>a.available())throw new H;let y=new Uint8Array(u);for(let _=0;_<u;_++)y[_]=a.readBits(8);let w;d===null?w=Ee.guessEncoding(y,p):w=d.getName();try{l.append(On.decode(y,w))}catch(_){throw new H(_)}f.push(y)}static toAlphaNumericChar(a){if(a>=C.ALPHANUMERIC_CHARS.length)throw new H;return C.ALPHANUMERIC_CHARS[a]}static decodeAlphanumericSegment(a,l,u,d){let f=l.length();for(;u>1;){if(a.available()<11)throw new H;let p=a.readBits(11);l.append(C.toAlphaNumericChar(Math.floor(p/45))),l.append(C.toAlphaNumericChar(p%45)),u-=2}if(u===1){if(a.available()<6)throw new H;l.append(C.toAlphaNumericChar(a.readBits(6)))}if(d)for(let p=f;p<l.length();p++)l.charAt(p)==="%"&&(p<l.length()-1&&l.charAt(p+1)==="%"?l.deleteCharAt(p+1):l.setCharAt(p,""))}static decodeNumericSegment(a,l,u){for(;u>=3;){if(a.available()<10)throw new H;let d=a.readBits(10);if(d>=1e3)throw new H;l.append(C.toAlphaNumericChar(Math.floor(d/100))),l.append(C.toAlphaNumericChar(Math.floor(d/10)%10)),l.append(C.toAlphaNumericChar(d%10)),u-=3}if(u===2){if(a.available()<7)throw new H;let d=a.readBits(7);if(d>=100)throw new H;l.append(C.toAlphaNumericChar(Math.floor(d/10))),l.append(C.toAlphaNumericChar(d%10))}else if(u===1){if(a.available()<4)throw new H;let d=a.readBits(4);if(d>=10)throw new H;l.append(C.toAlphaNumericChar(d))}}static parseECIValue(a){let l=a.readBits(8);if(!(l&128))return l&127;if((l&192)===128){let u=a.readBits(8);return(l&63)<<8&4294967295|u}if((l&224)===192){let u=a.readBits(16);return(l&31)<<16&4294967295|u}throw new H}}return C.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",C.GB2312_SUBSET=1,C})();class sC{constructor(s){this.mirrored=s}isMirrored(){return this.mirrored}applyMirroredCorrection(s){if(!this.mirrored||s===null||s.length<3)return;let a=s[0];s[0]=s[2],s[2]=a}}class AT{constructor(){this.rsDecoder=new tl(at.QR_CODE_FIELD_256)}decodeBooleanArray(s,a){return this.decodeBitMatrix(ln.parseFromBooleanArray(s),a)}decodeBitMatrix(s,a){let l=new DT(s),u=null;try{return this.decodeBitMatrixParser(l,a)}catch(d){u=d}try{l.remask(),l.setMirror(!0),l.readVersion(),l.readFormatInformation(),l.mirror();let d=this.decodeBitMatrixParser(l,a);return d.setOther(new sC(!0)),d}catch(d){throw u!==null?u:d}}decodeBitMatrixParser(s,a){let l=s.readVersion(),u=s.readFormatInformation().getErrorCorrectionLevel(),d=s.readCodewords(),f=gp.getDataBlocks(d,l,u),p=0;for(let _ of f)p+=_.getNumDataCodewords();let y=new Uint8Array(p),w=0;for(let _ of f){let b=_.getCodewords(),E=_.getNumDataCodewords();this.correctErrors(b,E);for(let D=0;D<E;D++)y[w++]=b[D]}return oC.decode(y,l,u,a)}correctErrors(s,a){let l=new Int32Array(s);try{this.rsDecoder.decode(l,s.length-a)}catch{throw new x}for(let u=0;u<a;u++)s[u]=l[u]}}class mp extends ue{constructor(s,a,l){super(s,a),this.estimatedModuleSize=l}aboutEquals(s,a,l){if(Math.abs(a-this.getY())<=s&&Math.abs(l-this.getX())<=s){let u=Math.abs(s-this.estimatedModuleSize);return u<=1||u<=this.estimatedModuleSize}return!1}combineEstimate(s,a,l){let u=(this.getX()+a)/2,d=(this.getY()+s)/2,f=(this.estimatedModuleSize+l)/2;return new mp(u,d,f)}}class gu{constructor(s,a,l,u,d,f,p){this.image=s,this.startX=a,this.startY=l,this.width=u,this.height=d,this.moduleSize=f,this.resultPointCallback=p,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){let s=this.startX,a=this.height,l=this.width,u=s+l,d=this.startY+a/2,f=new Int32Array(3),p=this.image;for(let y=0;y<a;y++){let w=d+(y&1?-Math.floor((y+1)/2):Math.floor((y+1)/2));f[0]=0,f[1]=0,f[2]=0;let _=s;for(;_<u&&!p.get(_,w);)_++;let b=0;for(;_<u;){if(p.get(_,w))if(b===1)f[1]++;else if(b===2){if(this.foundPatternCross(f)){let E=this.handlePossibleCenter(f,w,_);if(E!==null)return E}f[0]=f[2],f[1]=1,f[2]=0,b=1}else f[++b]++;else b===1&&b++,f[b]++;_++}if(this.foundPatternCross(f)){let E=this.handlePossibleCenter(f,w,u);if(E!==null)return E}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new U}static centerFromEnd(s,a){return a-s[2]-s[1]/2}foundPatternCross(s){let a=this.moduleSize,l=a/2;for(let u=0;u<3;u++)if(Math.abs(a-s[u])>=l)return!1;return!0}crossCheckVertical(s,a,l,u){let d=this.image,f=d.getHeight(),p=this.crossCheckStateCount;p[0]=0,p[1]=0,p[2]=0;let y=s;for(;y>=0&&d.get(a,y)&&p[1]<=l;)p[1]++,y--;if(y<0||p[1]>l)return NaN;for(;y>=0&&!d.get(a,y)&&p[0]<=l;)p[0]++,y--;if(p[0]>l)return NaN;for(y=s+1;y<f&&d.get(a,y)&&p[1]<=l;)p[1]++,y++;if(y===f||p[1]>l)return NaN;for(;y<f&&!d.get(a,y)&&p[2]<=l;)p[2]++,y++;if(p[2]>l)return NaN;let w=p[0]+p[1]+p[2];return 5*Math.abs(w-u)>=2*u?NaN:this.foundPatternCross(p)?gu.centerFromEnd(p,y):NaN}handlePossibleCenter(s,a,l){let u=s[0]+s[1]+s[2],d=gu.centerFromEnd(s,l),f=this.crossCheckVertical(a,d,2*s[1],u);if(!isNaN(f)){let p=(s[0]+s[1]+s[2])/3;for(let w of this.possibleCenters)if(w.aboutEquals(p,f,d))return w.combineEstimate(f,d,p);let y=new mp(d,f,p);this.possibleCenters.push(y),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(y)}return null}}class yp extends ue{constructor(s,a,l,u){super(s,a),this.estimatedModuleSize=l,this.count=u,u===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(s,a,l){if(Math.abs(a-this.getY())<=s&&Math.abs(l-this.getX())<=s){let u=Math.abs(s-this.estimatedModuleSize);return u<=1||u<=this.estimatedModuleSize}return!1}combineEstimate(s,a,l){let u=this.count+1,d=(this.count*this.getX()+a)/u,f=(this.count*this.getY()+s)/u,p=(this.count*this.estimatedModuleSize+l)/u;return new yp(d,f,p,u)}}class TT{constructor(s){this.bottomLeft=s[0],this.topLeft=s[1],this.topRight=s[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}let MT=(()=>{class C{constructor(a,l){this.image=a,this.resultPointCallback=l,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=l}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(a){let l=a!=null&&a.get(ge.TRY_HARDER)!==void 0,u=a!=null&&a.get(ge.PURE_BARCODE)!==void 0,d=this.image,f=d.getHeight(),p=d.getWidth(),y=Math.floor(3*f/(4*C.MAX_MODULES));(y<C.MIN_SKIP||l)&&(y=C.MIN_SKIP);let w=!1,_=new Int32Array(5);for(let E=y-1;E<f&&!w;E+=y){_[0]=0,_[1]=0,_[2]=0,_[3]=0,_[4]=0;let D=0;for(let T=0;T<p;T++)if(d.get(T,E))(D&1)===1&&D++,_[D]++;else if(D&1)_[D]++;else if(D===4)if(C.foundPatternCross(_)){if(this.handlePossibleCenter(_,E,T,u)===!0)if(y=2,this.hasSkipped===!0)w=this.haveMultiplyConfirmedCenters();else{let k=this.findRowSkip();k>_[2]&&(E+=k-_[2]-y,T=p-1)}else{_[0]=_[2],_[1]=_[3],_[2]=_[4],_[3]=1,_[4]=0,D=3;continue}D=0,_[0]=0,_[1]=0,_[2]=0,_[3]=0,_[4]=0}else _[0]=_[2],_[1]=_[3],_[2]=_[4],_[3]=1,_[4]=0,D=3;else _[++D]++;C.foundPatternCross(_)&&this.handlePossibleCenter(_,E,p,u)===!0&&(y=_[0],this.hasSkipped&&(w=this.haveMultiplyConfirmedCenters()))}let b=this.selectBestPatterns();return ue.orderBestPatterns(b),new TT(b)}static centerFromEnd(a,l){return l-a[4]-a[3]-a[2]/2}static foundPatternCross(a){let l=0;for(let f=0;f<5;f++){let p=a[f];if(p===0)return!1;l+=p}if(l<7)return!1;let u=l/7,d=u/2;return Math.abs(u-a[0])<d&&Math.abs(u-a[1])<d&&Math.abs(3*u-a[2])<3*d&&Math.abs(u-a[3])<d&&Math.abs(u-a[4])<d}getCrossCheckStateCount(){let a=this.crossCheckStateCount;return a[0]=0,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a}crossCheckDiagonal(a,l,u,d){let f=this.getCrossCheckStateCount(),p=0,y=this.image;for(;a>=p&&l>=p&&y.get(l-p,a-p);)f[2]++,p++;if(a<p||l<p)return!1;for(;a>=p&&l>=p&&!y.get(l-p,a-p)&&f[1]<=u;)f[1]++,p++;if(a<p||l<p||f[1]>u)return!1;for(;a>=p&&l>=p&&y.get(l-p,a-p)&&f[0]<=u;)f[0]++,p++;if(f[0]>u)return!1;let w=y.getHeight(),_=y.getWidth();for(p=1;a+p<w&&l+p<_&&y.get(l+p,a+p);)f[2]++,p++;if(a+p>=w||l+p>=_)return!1;for(;a+p<w&&l+p<_&&!y.get(l+p,a+p)&&f[3]<u;)f[3]++,p++;if(a+p>=w||l+p>=_||f[3]>=u)return!1;for(;a+p<w&&l+p<_&&y.get(l+p,a+p)&&f[4]<u;)f[4]++,p++;if(f[4]>=u)return!1;let b=f[0]+f[1]+f[2]+f[3]+f[4];return Math.abs(b-d)<2*d&&C.foundPatternCross(f)}crossCheckVertical(a,l,u,d){let f=this.image,p=f.getHeight(),y=this.getCrossCheckStateCount(),w=a;for(;w>=0&&f.get(l,w);)y[2]++,w--;if(w<0)return NaN;for(;w>=0&&!f.get(l,w)&&y[1]<=u;)y[1]++,w--;if(w<0||y[1]>u)return NaN;for(;w>=0&&f.get(l,w)&&y[0]<=u;)y[0]++,w--;if(y[0]>u)return NaN;for(w=a+1;w<p&&f.get(l,w);)y[2]++,w++;if(w===p)return NaN;for(;w<p&&!f.get(l,w)&&y[3]<u;)y[3]++,w++;if(w===p||y[3]>=u)return NaN;for(;w<p&&f.get(l,w)&&y[4]<u;)y[4]++,w++;if(y[4]>=u)return NaN;let _=y[0]+y[1]+y[2]+y[3]+y[4];return 5*Math.abs(_-d)>=2*d?NaN:C.foundPatternCross(y)?C.centerFromEnd(y,w):NaN}crossCheckHorizontal(a,l,u,d){let f=this.image,p=f.getWidth(),y=this.getCrossCheckStateCount(),w=a;for(;w>=0&&f.get(w,l);)y[2]++,w--;if(w<0)return NaN;for(;w>=0&&!f.get(w,l)&&y[1]<=u;)y[1]++,w--;if(w<0||y[1]>u)return NaN;for(;w>=0&&f.get(w,l)&&y[0]<=u;)y[0]++,w--;if(y[0]>u)return NaN;for(w=a+1;w<p&&f.get(w,l);)y[2]++,w++;if(w===p)return NaN;for(;w<p&&!f.get(w,l)&&y[3]<u;)y[3]++,w++;if(w===p||y[3]>=u)return NaN;for(;w<p&&f.get(w,l)&&y[4]<u;)y[4]++,w++;if(y[4]>=u)return NaN;let _=y[0]+y[1]+y[2]+y[3]+y[4];return 5*Math.abs(_-d)>=d?NaN:C.foundPatternCross(y)?C.centerFromEnd(y,w):NaN}handlePossibleCenter(a,l,u,d){let f=a[0]+a[1]+a[2]+a[3]+a[4],p=C.centerFromEnd(a,u),y=this.crossCheckVertical(l,Math.floor(p),a[2],f);if(!isNaN(y)&&(p=this.crossCheckHorizontal(Math.floor(p),Math.floor(y),a[2],f),!isNaN(p)&&(!d||this.crossCheckDiagonal(Math.floor(y),Math.floor(p),a[2],f)))){let w=f/7,_=!1,b=this.possibleCenters;for(let E=0,D=b.length;E<D;E++){let T=b[E];if(T.aboutEquals(w,y,p)){b[E]=T.combineEstimate(y,p,w),_=!0;break}}if(!_){let E=new yp(p,y,w);b.push(E),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(E)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let l=null;for(let u of this.possibleCenters)if(u.getCount()>=C.CENTER_QUORUM)if(l==null)l=u;else return this.hasSkipped=!0,Math.floor((Math.abs(l.getX()-u.getX())-Math.abs(l.getY()-u.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let a=0,l=0,u=this.possibleCenters.length;for(let p of this.possibleCenters)p.getCount()>=C.CENTER_QUORUM&&(a++,l+=p.getEstimatedModuleSize());if(a<3)return!1;let d=l/u,f=0;for(let p of this.possibleCenters)f+=Math.abs(p.getEstimatedModuleSize()-d);return f<=.05*l}selectBestPatterns(){let a=this.possibleCenters.length;if(a<3)throw new U;let l=this.possibleCenters,u;if(a>3){let d=0,f=0;for(let w of this.possibleCenters){let _=w.getEstimatedModuleSize();d+=_,f+=_*_}u=d/a;let p=Math.sqrt(f/a-u*u);l.sort((w,_)=>{let b=Math.abs(_.getEstimatedModuleSize()-u),E=Math.abs(w.getEstimatedModuleSize()-u);return b<E?-1:b>E?1:0});let y=Math.max(.2*u,p);for(let w=0;w<l.length&&l.length>3;w++){let _=l[w];Math.abs(_.getEstimatedModuleSize()-u)>y&&(l.splice(w,1),w--)}}if(l.length>3){let d=0;for(let f of l)d+=f.getEstimatedModuleSize();u=d/l.length,l.sort((f,p)=>{if(p.getCount()===f.getCount()){let y=Math.abs(p.getEstimatedModuleSize()-u),w=Math.abs(f.getEstimatedModuleSize()-u);return y<w?1:y>w?-1:0}else return p.getCount()-f.getCount()}),l.splice(3)}return[l[0],l[1],l[2]]}}return C.CENTER_QUORUM=2,C.MIN_SKIP=3,C.MAX_MODULES=57,C})();class il{constructor(s){this.image=s}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(s){this.resultPointCallback=s==null?null:s.get(ge.NEED_RESULT_POINT_CALLBACK);let l=new MT(this.image,this.resultPointCallback).find(s);return this.processFinderPatternInfo(l)}processFinderPatternInfo(s){let a=s.getTopLeft(),l=s.getTopRight(),u=s.getBottomLeft(),d=this.calculateModuleSize(a,l,u);if(d<1)throw new U("No pattern found in proccess finder.");let f=il.computeDimension(a,l,u,d),p=he.getProvisionalVersionForDimension(f),y=p.getDimensionForVersion()-7,w=null;if(p.getAlignmentPatternCenters().length>0){let D=l.getX()-a.getX()+u.getX(),T=l.getY()-a.getY()+u.getY(),O=1-3/y,k=Math.floor(a.getX()+O*(D-a.getX())),F=Math.floor(a.getY()+O*(T-a.getY()));for(let q=4;q<=16;q<<=1)try{w=this.findAlignmentInRegion(d,k,F,q);break}catch(re){if(!(re instanceof U))throw re}}let _=il.createTransform(a,l,u,w,f),b=il.sampleGrid(this.image,_,f),E;return w===null?E=[u,a,l]:E=[u,a,l,w],new lu(b,E)}static createTransform(s,a,l,u,d){let f=d-3.5,p,y,w,_;return u!==null?(p=u.getX(),y=u.getY(),w=f-3,_=w):(p=a.getX()-s.getX()+l.getX(),y=a.getY()-s.getY()+l.getY(),w=f,_=f),Mr.quadrilateralToQuadrilateral(3.5,3.5,f,3.5,w,_,3.5,f,s.getX(),s.getY(),a.getX(),a.getY(),p,y,l.getX(),l.getY())}static sampleGrid(s,a,l){return Qi.getInstance().sampleGridWithTransform(s,l,l,a)}static computeDimension(s,a,l,u){let d=et.round(ue.distance(s,a)/u),f=et.round(ue.distance(s,l)/u),p=Math.floor((d+f)/2)+7;switch(p&3){case 0:p++;break;case 2:p--;break;case 3:throw new U("Dimensions could be not found.")}return p}calculateModuleSize(s,a,l){return(this.calculateModuleSizeOneWay(s,a)+this.calculateModuleSizeOneWay(s,l))/2}calculateModuleSizeOneWay(s,a){let l=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(s.getX()),Math.floor(s.getY()),Math.floor(a.getX()),Math.floor(a.getY())),u=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(a.getX()),Math.floor(a.getY()),Math.floor(s.getX()),Math.floor(s.getY()));return isNaN(l)?u/7:isNaN(u)?l/7:(l+u)/14}sizeOfBlackWhiteBlackRunBothWays(s,a,l,u){let d=this.sizeOfBlackWhiteBlackRun(s,a,l,u),f=1,p=s-(l-s);p<0?(f=s/(s-p),p=0):p>=this.image.getWidth()&&(f=(this.image.getWidth()-1-s)/(p-s),p=this.image.getWidth()-1);let y=Math.floor(a-(u-a)*f);return f=1,y<0?(f=a/(a-y),y=0):y>=this.image.getHeight()&&(f=(this.image.getHeight()-1-a)/(y-a),y=this.image.getHeight()-1),p=Math.floor(s+(p-s)*f),d+=this.sizeOfBlackWhiteBlackRun(s,a,p,y),d-1}sizeOfBlackWhiteBlackRun(s,a,l,u){let d=Math.abs(u-a)>Math.abs(l-s);if(d){let D=s;s=a,a=D,D=l,l=u,u=D}let f=Math.abs(l-s),p=Math.abs(u-a),y=-f/2,w=s<l?1:-1,_=a<u?1:-1,b=0,E=l+w;for(let D=s,T=a;D!==E;D+=w){let O=d?T:D,k=d?D:T;if(b===1===this.image.get(O,k)){if(b===2)return et.distance(D,T,s,a);b++}if(y+=p,y>0){if(T===u)break;T+=_,y-=f}}return b===2?et.distance(l+w,u,s,a):NaN}findAlignmentInRegion(s,a,l,u){let d=Math.floor(u*s),f=Math.max(0,a-d),p=Math.min(this.image.getWidth()-1,a+d);if(p-f<s*3)throw new U("Alignment top exceeds estimated module size.");let y=Math.max(0,l-d),w=Math.min(this.image.getHeight()-1,l+d);if(w-y<s*3)throw new U("Alignment bottom exceeds estimated module size.");return new gu(this.image,f,y,p-f,w-y,s,this.resultPointCallback).find()}}class to{constructor(){this.decoder=new AT}getDecoder(){return this.decoder}decode(s,a){let l,u;if(a!=null&&a.get(ge.PURE_BARCODE)!==void 0){let y=to.extractPureBits(s.getBlackMatrix());l=this.decoder.decodeBitMatrix(y,a),u=to.NO_POINTS}else{let y=new il(s.getBlackMatrix()).detect(a);l=this.decoder.decodeBitMatrix(y.getBits(),a),u=y.getPoints()}l.getOther()instanceof sC&&l.getOther().applyMirroredCorrection(u);let d=new Fn(l.getText(),l.getRawBytes(),void 0,u,we.QR_CODE,void 0),f=l.getByteSegments();f!==null&&d.putMetadata(un.BYTE_SEGMENTS,f);let p=l.getECLevel();return p!==null&&d.putMetadata(un.ERROR_CORRECTION_LEVEL,p),l.hasStructuredAppend()&&(d.putMetadata(un.STRUCTURED_APPEND_SEQUENCE,l.getStructuredAppendSequenceNumber()),d.putMetadata(un.STRUCTURED_APPEND_PARITY,l.getStructuredAppendParity())),d}reset(){}static extractPureBits(s){let a=s.getTopLeftOnBit(),l=s.getBottomRightOnBit();if(a===null||l===null)throw new U;let u=this.moduleSize(a,s),d=a[1],f=l[1],p=a[0],y=l[0];if(p>=y||d>=f)throw new U;if(f-d!==y-p&&(y=p+(f-d),y>=s.getWidth()))throw new U;let w=Math.round((y-p+1)/u),_=Math.round((f-d+1)/u);if(w<=0||_<=0)throw new U;if(_!==w)throw new U;let b=Math.floor(u/2);d+=b,p+=b;let E=p+Math.floor((w-1)*u)-y;if(E>0){if(E>b)throw new U;p-=E}let D=d+Math.floor((_-1)*u)-f;if(D>0){if(D>b)throw new U;d-=D}let T=new ln(w,_);for(let O=0;O<_;O++){let k=d+Math.floor(O*u);for(let F=0;F<w;F++)s.get(p+Math.floor(F*u),k)&&T.set(F,O)}return T}static moduleSize(s,a){let l=a.getHeight(),u=a.getWidth(),d=s[0],f=s[1],p=!0,y=0;for(;d<u&&f<l;){if(p!==a.get(d,f)){if(++y===5)break;p=!p}d++,f++}if(d===u||f===l)throw new U;return(d-s[0])/7}}to.NO_POINTS=new Array;class xe{PDF417Common(){}static getBitCountSum(s){return et.sum(s)}static toIntArray(s){if(s==null||!s.length)return xe.EMPTY_INT_ARRAY;let a=new Int32Array(s.length),l=0;for(let u of s)a[l++]=u;return a}static getCodeword(s){let a=$.binarySearch(xe.SYMBOL_TABLE,s&262143);return a<0?-1:(xe.CODEWORD_TABLE[a]-1)%xe.NUMBER_OF_CODEWORDS}}xe.NUMBER_OF_CODEWORDS=929,xe.MAX_CODEWORDS_IN_BARCODE=xe.NUMBER_OF_CODEWORDS-1,xe.MIN_ROWS_IN_BARCODE=3,xe.MAX_ROWS_IN_BARCODE=90,xe.MODULES_IN_CODEWORD=17,xe.MODULES_IN_STOP_PATTERN=18,xe.BARS_IN_MODULE=8,xe.EMPTY_INT_ARRAY=new Int32Array([]),xe.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),xe.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class NT{constructor(s,a){this.bits=s,this.points=a}getBits(){return this.bits}getPoints(){return this.points}}class ke{static detectMultiple(s,a,l){let u=s.getBlackMatrix(),d=ke.detect(l,u);return d.length||(u=u.clone(),u.rotate180(),d=ke.detect(l,u)),new NT(u,d)}static detect(s,a){let l=new Array,u=0,d=0,f=!1;for(;u<a.getHeight();){let p=ke.findVertices(a,u,d);if(p[0]==null&&p[3]==null){if(!f)break;f=!1,d=0;for(let y of l)y[1]!=null&&(u=Math.trunc(Math.max(u,y[1].getY()))),y[3]!=null&&(u=Math.max(u,Math.trunc(y[3].getY())));u+=ke.ROW_STEP;continue}if(f=!0,l.push(p),!s)break;p[2]!=null?(d=Math.trunc(p[2].getX()),u=Math.trunc(p[2].getY())):(d=Math.trunc(p[4].getX()),u=Math.trunc(p[4].getY()))}return l}static findVertices(s,a,l){let u=s.getHeight(),d=s.getWidth(),f=new Array(8);return ke.copyToResult(f,ke.findRowsWithPattern(s,u,d,a,l,ke.START_PATTERN),ke.INDEXES_START_PATTERN),f[4]!=null&&(l=Math.trunc(f[4].getX()),a=Math.trunc(f[4].getY())),ke.copyToResult(f,ke.findRowsWithPattern(s,u,d,a,l,ke.STOP_PATTERN),ke.INDEXES_STOP_PATTERN),f}static copyToResult(s,a,l){for(let u=0;u<l.length;u++)s[l[u]]=a[u]}static findRowsWithPattern(s,a,l,u,d,f){let p=new Array(4),y=!1,w=new Int32Array(f.length);for(;u<a;u+=ke.ROW_STEP){let b=ke.findGuardPattern(s,d,u,l,!1,f,w);if(b!=null){for(;u>0;){let E=ke.findGuardPattern(s,d,--u,l,!1,f,w);if(E!=null)b=E;else{u++;break}}p[0]=new ue(b[0],u),p[1]=new ue(b[1],u),y=!0;break}}let _=u+1;if(y){let b=0,E=Int32Array.from([Math.trunc(p[0].getX()),Math.trunc(p[1].getX())]);for(;_<a;_++){let D=ke.findGuardPattern(s,E[0],_,l,!1,f,w);if(D!=null&&Math.abs(E[0]-D[0])<ke.MAX_PATTERN_DRIFT&&Math.abs(E[1]-D[1])<ke.MAX_PATTERN_DRIFT)E=D,b=0;else{if(b>ke.SKIPPED_ROW_COUNT_MAX)break;b++}}_-=b+1,p[2]=new ue(E[0],_),p[3]=new ue(E[1],_)}return _-u<ke.BARCODE_MIN_HEIGHT&&$.fill(p,null),p}static findGuardPattern(s,a,l,u,d,f,p){$.fillWithin(p,0,p.length,0);let y=a,w=0;for(;s.get(y,l)&&y>0&&w++<ke.MAX_PIXEL_DRIFT;)y--;let _=y,b=0,E=f.length;for(let D=d;_<u;_++)if(s.get(_,l)!==D)p[b]++;else{if(b===E-1){if(ke.patternMatchVariance(p,f,ke.MAX_INDIVIDUAL_VARIANCE)<ke.MAX_AVG_VARIANCE)return new Int32Array([y,_]);y+=p[0]+p[1],A.arraycopy(p,2,p,0,b-1),p[b-1]=0,p[b]=0,b--}else b++;p[b]=1,D=!D}return b===E-1&&ke.patternMatchVariance(p,f,ke.MAX_INDIVIDUAL_VARIANCE)<ke.MAX_AVG_VARIANCE?new Int32Array([y,_-1]):null}static patternMatchVariance(s,a,l){let u=s.length,d=0,f=0;for(let w=0;w<u;w++)d+=s[w],f+=a[w];if(d<f)return 1/0;let p=d/f;l*=p;let y=0;for(let w=0;w<u;w++){let _=s[w],b=a[w]*p,E=_>b?_-b:b-_;if(E>l)return 1/0;y+=E}return y/d}}ke.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),ke.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),ke.MAX_AVG_VARIANCE=.42,ke.MAX_INDIVIDUAL_VARIANCE=.8,ke.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),ke.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),ke.MAX_PIXEL_DRIFT=3,ke.MAX_PATTERN_DRIFT=5,ke.SKIPPED_ROW_COUNT_MAX=25,ke.ROW_STEP=5,ke.BARCODE_MIN_HEIGHT=10;class Cn{constructor(s,a){if(a.length===0)throw new m;this.field=s;let l=a.length;if(l>1&&a[0]===0){let u=1;for(;u<l&&a[u]===0;)u++;u===l?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(l-u),A.arraycopy(a,u,this.coefficients,0,this.coefficients.length))}else this.coefficients=a}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(s){return this.coefficients[this.coefficients.length-1-s]}evaluateAt(s){if(s===0)return this.getCoefficient(0);if(s===1){let u=0;for(let d of this.coefficients)u=this.field.add(u,d);return u}let a=this.coefficients[0],l=this.coefficients.length;for(let u=1;u<l;u++)a=this.field.add(this.field.multiply(s,a),this.coefficients[u]);return a}add(s){if(!this.field.equals(s.field))throw new m("ModulusPolys do not have same ModulusGF field");if(this.isZero())return s;if(s.isZero())return this;let a=this.coefficients,l=s.coefficients;if(a.length>l.length){let f=a;a=l,l=f}let u=new Int32Array(l.length),d=l.length-a.length;A.arraycopy(l,0,u,0,d);for(let f=d;f<l.length;f++)u[f]=this.field.add(a[f-d],l[f]);return new Cn(this.field,u)}subtract(s){if(!this.field.equals(s.field))throw new m("ModulusPolys do not have same ModulusGF field");return s.isZero()?this:this.add(s.negative())}multiply(s){return s instanceof Cn?this.multiplyOther(s):this.multiplyScalar(s)}multiplyOther(s){if(!this.field.equals(s.field))throw new m("ModulusPolys do not have same ModulusGF field");if(this.isZero()||s.isZero())return new Cn(this.field,new Int32Array([0]));let a=this.coefficients,l=a.length,u=s.coefficients,d=u.length,f=new Int32Array(l+d-1);for(let p=0;p<l;p++){let y=a[p];for(let w=0;w<d;w++)f[p+w]=this.field.add(f[p+w],this.field.multiply(y,u[w]))}return new Cn(this.field,f)}negative(){let s=this.coefficients.length,a=new Int32Array(s);for(let l=0;l<s;l++)a[l]=this.field.subtract(0,this.coefficients[l]);return new Cn(this.field,a)}multiplyScalar(s){if(s===0)return new Cn(this.field,new Int32Array([0]));if(s===1)return this;let a=this.coefficients.length,l=new Int32Array(a);for(let u=0;u<a;u++)l[u]=this.field.multiply(this.coefficients[u],s);return new Cn(this.field,l)}multiplyByMonomial(s,a){if(s<0)throw new m;if(a===0)return new Cn(this.field,new Int32Array([0]));let l=this.coefficients.length,u=new Int32Array(l+s);for(let d=0;d<l;d++)u[d]=this.field.multiply(this.coefficients[d],a);return new Cn(this.field,u)}toString(){let s=new yt;for(let a=this.getDegree();a>=0;a--){let l=this.getCoefficient(a);l!==0&&(l<0?(s.append(" - "),l=-l):s.length()>0&&s.append(" + "),(a===0||l!==1)&&s.append(l),a!==0&&(a===1?s.append("x"):(s.append("x^"),s.append(a))))}return s.toString()}}class OT{add(s,a){return(s+a)%this.modulus}subtract(s,a){return(this.modulus+s-a)%this.modulus}exp(s){return this.expTable[s]}log(s){if(s===0)throw new m;return this.logTable[s]}inverse(s){if(s===0)throw new rp;return this.expTable[this.modulus-this.logTable[s]-1]}multiply(s,a){return s===0||a===0?0:this.expTable[(this.logTable[s]+this.logTable[a])%(this.modulus-1)]}getSize(){return this.modulus}equals(s){return s===this}}class wp extends OT{constructor(s,a){super(),this.modulus=s,this.expTable=new Int32Array(s),this.logTable=new Int32Array(s);let l=1;for(let u=0;u<s;u++)this.expTable[u]=l,l=l*a%s;for(let u=0;u<s-1;u++)this.logTable[this.expTable[u]]=u;this.zero=new Cn(this,new Int32Array([0])),this.one=new Cn(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(s,a){if(s<0)throw new m;if(a===0)return this.zero;let l=new Int32Array(s+1);return l[0]=a,new Cn(this,l)}}wp.PDF417_GF=new wp(xe.NUMBER_OF_CODEWORDS,3);class aC{constructor(){this.field=wp.PDF417_GF}decode(s,a,l){let u=new Cn(this.field,s),d=new Int32Array(a),f=!1;for(let T=a;T>0;T--){let O=u.evaluateAt(this.field.exp(T));d[a-T]=O,O!==0&&(f=!0)}if(!f)return 0;let p=this.field.getOne();if(l!=null)for(let T of l){let O=this.field.exp(s.length-1-T),k=new Cn(this.field,new Int32Array([this.field.subtract(0,O),1]));p=p.multiply(k)}let y=new Cn(this.field,d),w=this.runEuclideanAlgorithm(this.field.buildMonomial(a,1),y,a),_=w[0],b=w[1],E=this.findErrorLocations(_),D=this.findErrorMagnitudes(b,_,E);for(let T=0;T<E.length;T++){let O=s.length-1-this.field.log(E[T]);if(O<0)throw x.getChecksumInstance();s[O]=this.field.subtract(s[O],D[T])}return E.length}runEuclideanAlgorithm(s,a,l){if(s.getDegree()<a.getDegree()){let E=s;s=a,a=E}let u=s,d=a,f=this.field.getZero(),p=this.field.getOne();for(;d.getDegree()>=Math.round(l/2);){let E=u,D=f;if(u=d,f=p,u.isZero())throw x.getChecksumInstance();d=E;let T=this.field.getZero(),O=u.getCoefficient(u.getDegree()),k=this.field.inverse(O);for(;d.getDegree()>=u.getDegree()&&!d.isZero();){let F=d.getDegree()-u.getDegree(),q=this.field.multiply(d.getCoefficient(d.getDegree()),k);T=T.add(this.field.buildMonomial(F,q)),d=d.subtract(u.multiplyByMonomial(F,q))}p=T.multiply(f).subtract(D).negative()}let y=p.getCoefficient(0);if(y===0)throw x.getChecksumInstance();let w=this.field.inverse(y),_=p.multiply(w),b=d.multiply(w);return[_,b]}findErrorLocations(s){let a=s.getDegree(),l=new Int32Array(a),u=0;for(let d=1;d<this.field.getSize()&&u<a;d++)s.evaluateAt(d)===0&&(l[u]=this.field.inverse(d),u++);if(u!==a)throw x.getChecksumInstance();return l}findErrorMagnitudes(s,a,l){let u=a.getDegree(),d=new Int32Array(u);for(let w=1;w<=u;w++)d[u-w]=this.field.multiply(w,a.getCoefficient(w));let f=new Cn(this.field,d),p=l.length,y=new Int32Array(p);for(let w=0;w<p;w++){let _=this.field.inverse(l[w]),b=this.field.subtract(0,s.evaluateAt(_)),E=this.field.inverse(f.evaluateAt(_));y[w]=this.field.multiply(b,E)}return y}}class Bo{constructor(s,a,l,u,d){s instanceof Bo?this.constructor_2(s):this.constructor_1(s,a,l,u,d)}constructor_1(s,a,l,u,d){let f=a==null||l==null,p=u==null||d==null;if(f&&p)throw new U;f?(a=new ue(0,u.getY()),l=new ue(0,d.getY())):p&&(u=new ue(s.getWidth()-1,a.getY()),d=new ue(s.getWidth()-1,l.getY())),this.image=s,this.topLeft=a,this.bottomLeft=l,this.topRight=u,this.bottomRight=d,this.minX=Math.trunc(Math.min(a.getX(),l.getX())),this.maxX=Math.trunc(Math.max(u.getX(),d.getX())),this.minY=Math.trunc(Math.min(a.getY(),u.getY())),this.maxY=Math.trunc(Math.max(l.getY(),d.getY()))}constructor_2(s){this.image=s.image,this.topLeft=s.getTopLeft(),this.bottomLeft=s.getBottomLeft(),this.topRight=s.getTopRight(),this.bottomRight=s.getBottomRight(),this.minX=s.getMinX(),this.maxX=s.getMaxX(),this.minY=s.getMinY(),this.maxY=s.getMaxY()}static merge(s,a){return s==null?a:a==null?s:new Bo(s.image,s.topLeft,s.bottomLeft,a.topRight,a.bottomRight)}addMissingRows(s,a,l){let u=this.topLeft,d=this.bottomLeft,f=this.topRight,p=this.bottomRight;if(s>0){let y=l?this.topLeft:this.topRight,w=Math.trunc(y.getY()-s);w<0&&(w=0);let _=new ue(y.getX(),w);l?u=_:f=_}if(a>0){let y=l?this.bottomLeft:this.bottomRight,w=Math.trunc(y.getY()+a);w>=this.image.getHeight()&&(w=this.image.getHeight()-1);let _=new ue(y.getX(),w);l?d=_:p=_}return new Bo(this.image,u,d,f,p)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class RT{constructor(s,a,l,u){this.columnCount=s,this.errorCorrectionLevel=u,this.rowCountUpperPart=a,this.rowCountLowerPart=l,this.rowCount=a+l}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class ol{constructor(){this.buffer=""}static form(s,a){let l=-1;function u(f,p,y,w,_,b){if(f==="%%")return"%";if(a[++l]===void 0)return;f=w?parseInt(w.substr(1)):void 0;let E=_?parseInt(_.substr(1)):void 0,D;switch(b){case"s":D=a[l];break;case"c":D=a[l][0];break;case"f":D=parseFloat(a[l]).toFixed(f);break;case"p":D=parseFloat(a[l]).toPrecision(f);break;case"e":D=parseFloat(a[l]).toExponential(f);break;case"x":D=parseInt(a[l]).toString(E||16);break;case"d":D=parseFloat(parseInt(a[l],E||10).toPrecision(f)).toFixed(0);break}D=typeof D=="object"?JSON.stringify(D):(+D).toString(E);let T=parseInt(y),O=y&&y[0]+""=="0"?"0":" ";for(;D.length<T;)D=p!==void 0?D+O:O+D;return D}let d=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return s.replace(d,u)}format(s,...a){this.buffer+=ol.form(s,a)}toString(){return this.buffer}}let lC=(()=>{class C{constructor(a){this.boundingBox=new Bo(a),this.codewords=new Array(a.getMaxY()-a.getMinY()+1)}getCodewordNearby(a){let l=this.getCodeword(a);if(l!=null)return l;for(let u=1;u<C.MAX_NEARBY_DISTANCE;u++){let d=this.imageRowToCodewordIndex(a)-u;if(d>=0&&(l=this.codewords[d],l!=null)||(d=this.imageRowToCodewordIndex(a)+u,d<this.codewords.length&&(l=this.codewords[d],l!=null)))return l}return null}imageRowToCodewordIndex(a){return a-this.boundingBox.getMinY()}setCodeword(a,l){this.codewords[this.imageRowToCodewordIndex(a)]=l}getCodeword(a){return this.codewords[this.imageRowToCodewordIndex(a)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){let a=new ol,l=0;for(let u of this.codewords){if(u==null){a.format("%3d:    |   %n",l++);continue}a.format("%3d: %3d|%3d%n",l++,u.getRowNumber(),u.getValue())}return a.toString()}}return C.MAX_NEARBY_DISTANCE=5,C})();class sl{constructor(){this.values=new Map}setValue(s){s=Math.trunc(s);let a=this.values.get(s);a==null&&(a=0),a++,this.values.set(s,a)}getValue(){let s=-1,a=new Array;for(let[l,u]of this.values.entries()){let d={getKey:()=>l,getValue:()=>u};d.getValue()>s?(s=d.getValue(),a=[],a.push(d.getKey())):d.getValue()===s&&a.push(d.getKey())}return xe.toIntArray(a)}getConfidence(s){return this.values.get(s)}}class cC extends lC{constructor(s,a){super(s),this._isLeft=a}setRowNumbers(){for(let s of this.getCodewords())s?.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(s){let a=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(a,s);let l=this.getBoundingBox(),u=this._isLeft?l.getTopLeft():l.getTopRight(),d=this._isLeft?l.getBottomLeft():l.getBottomRight(),f=this.imageRowToCodewordIndex(Math.trunc(u.getY())),p=this.imageRowToCodewordIndex(Math.trunc(d.getY())),y=-1,w=1,_=0;for(let b=f;b<p;b++){if(a[b]==null)continue;let E=a[b],D=E.getRowNumber()-y;if(D===0)_++;else if(D===1)w=Math.max(w,_),_=1,y=E.getRowNumber();else if(D<0||E.getRowNumber()>=s.getRowCount()||D>b)a[b]=null;else{let T;w>2?T=(w-2)*D:T=D;let O=T>=b;for(let k=1;k<=T&&!O;k++)O=a[b-k]!=null;O?a[b]=null:(y=E.getRowNumber(),_=1)}}}getRowHeights(){let s=this.getBarcodeMetadata();if(s==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(s);let a=new Int32Array(s.getRowCount());for(let l of this.getCodewords())if(l!=null){let u=l.getRowNumber();if(u>=a.length)continue;a[u]++}return a}adjustIncompleteIndicatorColumnRowNumbers(s){let a=this.getBoundingBox(),l=this._isLeft?a.getTopLeft():a.getTopRight(),u=this._isLeft?a.getBottomLeft():a.getBottomRight(),d=this.imageRowToCodewordIndex(Math.trunc(l.getY())),f=this.imageRowToCodewordIndex(Math.trunc(u.getY())),p=this.getCodewords(),y=-1;for(let w=d;w<f;w++){if(p[w]==null)continue;let _=p[w];_.setRowNumberAsRowIndicatorColumn();let b=_.getRowNumber()-y;b===0||(b===1?y=_.getRowNumber():_.getRowNumber()>=s.getRowCount()?p[w]=null:y=_.getRowNumber())}}getBarcodeMetadata(){let s=this.getCodewords(),a=new sl,l=new sl,u=new sl,d=new sl;for(let p of s){if(p==null)continue;p.setRowNumberAsRowIndicatorColumn();let y=p.getValue()%30,w=p.getRowNumber();switch(this._isLeft||(w+=2),w%3){case 0:l.setValue(y*3+1);break;case 1:d.setValue(y/3),u.setValue(y%3);break;case 2:a.setValue(y+1);break}}if(a.getValue().length===0||l.getValue().length===0||u.getValue().length===0||d.getValue().length===0||a.getValue()[0]<1||l.getValue()[0]+u.getValue()[0]<xe.MIN_ROWS_IN_BARCODE||l.getValue()[0]+u.getValue()[0]>xe.MAX_ROWS_IN_BARCODE)return null;let f=new RT(a.getValue()[0],l.getValue()[0],u.getValue()[0],d.getValue()[0]);return this.removeIncorrectCodewords(s,f),f}removeIncorrectCodewords(s,a){for(let l=0;l<s.length;l++){let u=s[l];if(s[l]==null)continue;let d=u.getValue()%30,f=u.getRowNumber();if(f>a.getRowCount()){s[l]=null;continue}switch(this._isLeft||(f+=2),f%3){case 0:d*3+1!==a.getRowCountUpperPart()&&(s[l]=null);break;case 1:(Math.trunc(d/3)!==a.getErrorCorrectionLevel()||d%3!==a.getRowCountLowerPart())&&(s[l]=null);break;case 2:d+1!==a.getColumnCount()&&(s[l]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class al{constructor(s,a){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=s,this.barcodeColumnCount=s.getColumnCount(),this.boundingBox=a,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let s=xe.MAX_CODEWORDS_IN_BARCODE,a;do a=s,s=this.adjustRowNumbersAndGetCount();while(s>0&&s<a);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(s){s?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let s=this.adjustRowNumbersByRow();if(s===0)return 0;for(let a=1;a<this.barcodeColumnCount+1;a++){let l=this.detectionResultColumns[a].getCodewords();for(let u=0;u<l.length;u++)l[u]!=null&&(l[u].hasValidRowNumber()||this.adjustRowNumbers(a,u,l))}return s}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let s=this.detectionResultColumns[0].getCodewords(),a=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let l=0;l<s.length;l++)if(s[l]!=null&&a[l]!=null&&s[l].getRowNumber()===a[l].getRowNumber())for(let u=1;u<=this.barcodeColumnCount;u++){let d=this.detectionResultColumns[u].getCodewords()[l];d!=null&&(d.setRowNumber(s[l].getRowNumber()),d.hasValidRowNumber()||(this.detectionResultColumns[u].getCodewords()[l]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let s=0,a=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let l=0;l<a.length;l++){if(a[l]==null)continue;let u=a[l].getRowNumber(),d=0;for(let f=this.barcodeColumnCount+1;f>0&&d<this.ADJUST_ROW_NUMBER_SKIP;f--){let p=this.detectionResultColumns[f].getCodewords()[l];p!=null&&(d=al.adjustRowNumberIfValid(u,d,p),p.hasValidRowNumber()||s++)}}return s}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let s=0,a=this.detectionResultColumns[0].getCodewords();for(let l=0;l<a.length;l++){if(a[l]==null)continue;let u=a[l].getRowNumber(),d=0;for(let f=1;f<this.barcodeColumnCount+1&&d<this.ADJUST_ROW_NUMBER_SKIP;f++){let p=this.detectionResultColumns[f].getCodewords()[l];p!=null&&(d=al.adjustRowNumberIfValid(u,d,p),p.hasValidRowNumber()||s++)}}return s}static adjustRowNumberIfValid(s,a,l){return l==null||l.hasValidRowNumber()||(l.isValidRowNumber(s)?(l.setRowNumber(s),a=0):++a),a}adjustRowNumbers(s,a,l){if(!this.detectionResultColumns[s-1])return;let u=l[a],d=this.detectionResultColumns[s-1].getCodewords(),f=d;this.detectionResultColumns[s+1]!=null&&(f=this.detectionResultColumns[s+1].getCodewords());let p=new Array(14);p[2]=d[a],p[3]=f[a],a>0&&(p[0]=l[a-1],p[4]=d[a-1],p[5]=f[a-1]),a>1&&(p[8]=l[a-2],p[10]=d[a-2],p[11]=f[a-2]),a<l.length-1&&(p[1]=l[a+1],p[6]=d[a+1],p[7]=f[a+1]),a<l.length-2&&(p[9]=l[a+2],p[12]=d[a+2],p[13]=f[a+2]);for(let y of p)if(al.adjustRowNumber(u,y))return}static adjustRowNumber(s,a){return a==null?!1:a.hasValidRowNumber()&&a.getBucket()===s.getBucket()?(s.setRowNumber(a.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(s){this.boundingBox=s}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(s,a){this.detectionResultColumns[s]=a}getDetectionResultColumn(s){return this.detectionResultColumns[s]}toString(){let s=this.detectionResultColumns[0];s==null&&(s=this.detectionResultColumns[this.barcodeColumnCount+1]);let a=new ol;for(let l=0;l<s.getCodewords().length;l++){a.format("CW %3d:",l);for(let u=0;u<this.barcodeColumnCount+2;u++){if(this.detectionResultColumns[u]==null){a.format("    |   ");continue}let d=this.detectionResultColumns[u].getCodewords()[l];if(d==null){a.format("    |   ");continue}a.format(" %3d|%3d",d.getRowNumber(),d.getValue())}a.format("%n")}return a.toString()}}let PT=(()=>{class C{constructor(a,l,u,d){this.rowNumber=C.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(a),this.endX=Math.trunc(l),this.bucket=Math.trunc(u),this.value=Math.trunc(d)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(a){return a!==C.BARCODE_ROW_UNKNOWN&&this.bucket===a%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(a){this.rowNumber=a}toString(){return this.rowNumber+"|"+this.value}}return C.BARCODE_ROW_UNKNOWN=-1,C})();class $n{static initialize(){for(let s=0;s<xe.SYMBOL_TABLE.length;s++){let a=xe.SYMBOL_TABLE[s],l=a&1;for(let u=0;u<xe.BARS_IN_MODULE;u++){let d=0;for(;(a&1)===l;)d+=1,a>>=1;l=a&1,$n.RATIOS_TABLE[s]||($n.RATIOS_TABLE[s]=new Array(xe.BARS_IN_MODULE)),$n.RATIOS_TABLE[s][xe.BARS_IN_MODULE-u-1]=Math.fround(d/xe.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(s){let a=$n.getDecodedCodewordValue($n.sampleBitCounts(s));return a!==-1?a:$n.getClosestDecodedValue(s)}static sampleBitCounts(s){let a=et.sum(s),l=new Int32Array(xe.BARS_IN_MODULE),u=0,d=0;for(let f=0;f<xe.MODULES_IN_CODEWORD;f++){let p=a/(2*xe.MODULES_IN_CODEWORD)+f*a/xe.MODULES_IN_CODEWORD;d+s[u]<=p&&(d+=s[u],u++),l[u]++}return l}static getDecodedCodewordValue(s){let a=$n.getBitValue(s);return xe.getCodeword(a)===-1?-1:a}static getBitValue(s){let a=0;for(let l=0;l<s.length;l++)for(let u=0;u<s[l];u++)a=a<<1|(l%2===0?1:0);return Math.trunc(a)}static getClosestDecodedValue(s){let a=et.sum(s),l=new Array(xe.BARS_IN_MODULE);if(a>1)for(let f=0;f<l.length;f++)l[f]=Math.fround(s[f]/a);let u=au.MAX_VALUE,d=-1;this.bSymbolTableReady||$n.initialize();for(let f=0;f<$n.RATIOS_TABLE.length;f++){let p=0,y=$n.RATIOS_TABLE[f];for(let w=0;w<xe.BARS_IN_MODULE;w++){let _=Math.fround(y[w]-l[w]);if(p+=Math.fround(_*_),p>=u)break}p<u&&(u=p,d=xe.SYMBOL_TABLE[f])}return d}}$n.bSymbolTableReady=!1,$n.RATIOS_TABLE=new Array(xe.SYMBOL_TABLE.length).map(C=>C=new Array(xe.BARS_IN_MODULE));class uC{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(s){this.segmentIndex=s}getFileId(){return this.fileId}setFileId(s){this.fileId=s}getOptionalData(){return this.optionalData}setOptionalData(s){this.optionalData=s}isLastSegment(){return this.lastSegment}setLastSegment(s){this.lastSegment=s}getSegmentCount(){return this.segmentCount}setSegmentCount(s){this.segmentCount=s}getSender(){return this.sender||null}setSender(s){this.sender=s}getAddressee(){return this.addressee||null}setAddressee(s){this.addressee=s}getFileName(){return this.fileName}setFileName(s){this.fileName=s}getFileSize(){return this.fileSize}setFileSize(s){this.fileSize=s}getChecksum(){return this.checksum}setChecksum(s){this.checksum=s}getTimestamp(){return this.timestamp}setTimestamp(s){this.timestamp=s}}class dC{static parseLong(s,a=void 0){return parseInt(s,a)}}let kT=(()=>{class C extends h{}return C.kind="NullPointerException",C})();class LT{writeBytes(s){this.writeBytesOffset(s,0,s.length)}writeBytesOffset(s,a,l){if(s==null)throw new kT;if(a<0||a>s.length||l<0||a+l>s.length||a+l<0)throw new R;if(l===0)return;for(let u=0;u<l;u++)this.write(s[a+u])}flush(){}close(){}}class FT extends h{}class BT extends LT{constructor(s=32){if(super(),this.count=0,s<0)throw new m("Negative initial size: "+s);this.buf=new Uint8Array(s)}ensureCapacity(s){s-this.buf.length>0&&this.grow(s)}grow(s){let l=this.buf.length<<1;if(l-s<0&&(l=s),l<0){if(s<0)throw new FT;l=W.MAX_VALUE}this.buf=$.copyOfUint8Array(this.buf,l)}write(s){this.ensureCapacity(this.count+1),this.buf[this.count]=s,this.count+=1}writeBytesOffset(s,a,l){if(a<0||a>s.length||l<0||a+l-s.length>0)throw new R;this.ensureCapacity(this.count+l),A.arraycopy(s,a,this.buf,this.count,l),this.count+=l}writeTo(s){s.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return $.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(s){return s?typeof s=="string"?this.toString_string(s):this.toString_number(s):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(s){return new String(this.buf).toString()}toString_number(s){return new String(this.buf).toString()}close(){}}var Ct=function(C){return C[C.ALPHA=0]="ALPHA",C[C.LOWER=1]="LOWER",C[C.MIXED=2]="MIXED",C[C.PUNCT=3]="PUNCT",C[C.ALPHA_SHIFT=4]="ALPHA_SHIFT",C[C.PUNCT_SHIFT=5]="PUNCT_SHIFT",C}(Ct||{});function fC(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let mu;function no(C){if(typeof mu>"u"&&(mu=fC()),mu===null)throw new Error("BigInt is not supported!");return mu(C)}function VT(){let C=[];C[0]=no(1);let s=no(900);C[1]=s;for(let a=2;a<16;a++)C[a]=C[a-1]*s;return C}class B{static decode(s,a){let l=new yt(""),u=G.ISO8859_1;l.enableDecoding(u);let d=1,f=s[d++],p=new uC;for(;d<s[0];){switch(f){case B.TEXT_COMPACTION_MODE_LATCH:d=B.textCompaction(s,d,l);break;case B.BYTE_COMPACTION_MODE_LATCH:case B.BYTE_COMPACTION_MODE_LATCH_6:d=B.byteCompaction(f,s,u,d,l);break;case B.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(s[d++]);break;case B.NUMERIC_COMPACTION_MODE_LATCH:d=B.numericCompaction(s,d,l);break;case B.ECI_CHARSET:let w=G.getCharacterSetECIByValue(s[d++]);break;case B.ECI_GENERAL_PURPOSE:d+=2;break;case B.ECI_USER_DEFINED:d++;break;case B.BEGIN_MACRO_PDF417_CONTROL_BLOCK:d=B.decodeMacroBlock(s,d,p);break;case B.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case B.MACRO_PDF417_TERMINATOR:throw new H;default:d--,d=B.textCompaction(s,d,l);break}if(d<s.length)f=s[d++];else throw H.getFormatInstance()}if(l.length()===0)throw H.getFormatInstance();let y=new Ka(null,l.toString(),null,a);return y.setOther(p),y}static decodeMacroBlock(s,a,l){if(a+B.NUMBER_OF_SEQUENCE_CODEWORDS>s[0])throw H.getFormatInstance();let u=new Int32Array(B.NUMBER_OF_SEQUENCE_CODEWORDS);for(let p=0;p<B.NUMBER_OF_SEQUENCE_CODEWORDS;p++,a++)u[p]=s[a];l.setSegmentIndex(W.parseInt(B.decodeBase900toBase10(u,B.NUMBER_OF_SEQUENCE_CODEWORDS)));let d=new yt;a=B.textCompaction(s,a,d),l.setFileId(d.toString());let f=-1;for(s[a]===B.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(f=a+1);a<s[0];)switch(s[a]){case B.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(a++,s[a]){case B.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let p=new yt;a=B.textCompaction(s,a+1,p),l.setFileName(p.toString());break;case B.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let y=new yt;a=B.textCompaction(s,a+1,y),l.setSender(y.toString());break;case B.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let w=new yt;a=B.textCompaction(s,a+1,w),l.setAddressee(w.toString());break;case B.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let _=new yt;a=B.numericCompaction(s,a+1,_),l.setSegmentCount(W.parseInt(_.toString()));break;case B.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let b=new yt;a=B.numericCompaction(s,a+1,b),l.setTimestamp(dC.parseLong(b.toString()));break;case B.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let E=new yt;a=B.numericCompaction(s,a+1,E),l.setChecksum(W.parseInt(E.toString()));break;case B.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let D=new yt;a=B.numericCompaction(s,a+1,D),l.setFileSize(dC.parseLong(D.toString()));break;default:throw H.getFormatInstance()}break;case B.MACRO_PDF417_TERMINATOR:a++,l.setLastSegment(!0);break;default:throw H.getFormatInstance()}if(f!==-1){let p=a-f;l.isLastSegment()&&p--,l.setOptionalData($.copyOfRange(s,f,f+p))}return a}static textCompaction(s,a,l){let u=new Int32Array((s[0]-a)*2),d=new Int32Array((s[0]-a)*2),f=0,p=!1;for(;a<s[0]&&!p;){let y=s[a++];if(y<B.TEXT_COMPACTION_MODE_LATCH)u[f]=y/30,u[f+1]=y%30,f+=2;else switch(y){case B.TEXT_COMPACTION_MODE_LATCH:u[f++]=B.TEXT_COMPACTION_MODE_LATCH;break;case B.BYTE_COMPACTION_MODE_LATCH:case B.BYTE_COMPACTION_MODE_LATCH_6:case B.NUMERIC_COMPACTION_MODE_LATCH:case B.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case B.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case B.MACRO_PDF417_TERMINATOR:a--,p=!0;break;case B.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u[f]=B.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,y=s[a++],d[f]=y,f++;break}}return B.decodeTextCompaction(u,d,f,l),a}static decodeTextCompaction(s,a,l,u){let d=Ct.ALPHA,f=Ct.ALPHA,p=0;for(;p<l;){let y=s[p],w="";switch(d){case Ct.ALPHA:if(y<26)w=String.fromCharCode(65+y);else switch(y){case 26:w=" ";break;case B.LL:d=Ct.LOWER;break;case B.ML:d=Ct.MIXED;break;case B.PS:f=d,d=Ct.PUNCT_SHIFT;break;case B.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(a[p]);break;case B.TEXT_COMPACTION_MODE_LATCH:d=Ct.ALPHA;break}break;case Ct.LOWER:if(y<26)w=String.fromCharCode(97+y);else switch(y){case 26:w=" ";break;case B.AS:f=d,d=Ct.ALPHA_SHIFT;break;case B.ML:d=Ct.MIXED;break;case B.PS:f=d,d=Ct.PUNCT_SHIFT;break;case B.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(a[p]);break;case B.TEXT_COMPACTION_MODE_LATCH:d=Ct.ALPHA;break}break;case Ct.MIXED:if(y<B.PL)w=B.MIXED_CHARS[y];else switch(y){case B.PL:d=Ct.PUNCT;break;case 26:w=" ";break;case B.LL:d=Ct.LOWER;break;case B.AL:d=Ct.ALPHA;break;case B.PS:f=d,d=Ct.PUNCT_SHIFT;break;case B.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(a[p]);break;case B.TEXT_COMPACTION_MODE_LATCH:d=Ct.ALPHA;break}break;case Ct.PUNCT:if(y<B.PAL)w=B.PUNCT_CHARS[y];else switch(y){case B.PAL:d=Ct.ALPHA;break;case B.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(a[p]);break;case B.TEXT_COMPACTION_MODE_LATCH:d=Ct.ALPHA;break}break;case Ct.ALPHA_SHIFT:if(d=f,y<26)w=String.fromCharCode(65+y);else switch(y){case 26:w=" ";break;case B.TEXT_COMPACTION_MODE_LATCH:d=Ct.ALPHA;break}break;case Ct.PUNCT_SHIFT:if(d=f,y<B.PAL)w=B.PUNCT_CHARS[y];else switch(y){case B.PAL:d=Ct.ALPHA;break;case B.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(a[p]);break;case B.TEXT_COMPACTION_MODE_LATCH:d=Ct.ALPHA;break}break}w!==""&&u.append(w),p++}}static byteCompaction(s,a,l,u,d){let f=new BT,p=0,y=0,w=!1;switch(s){case B.BYTE_COMPACTION_MODE_LATCH:let _=new Int32Array(6),b=a[u++];for(;u<a[0]&&!w;)switch(_[p++]=b,y=900*y+b,b=a[u++],b){case B.TEXT_COMPACTION_MODE_LATCH:case B.BYTE_COMPACTION_MODE_LATCH:case B.NUMERIC_COMPACTION_MODE_LATCH:case B.BYTE_COMPACTION_MODE_LATCH_6:case B.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case B.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case B.MACRO_PDF417_TERMINATOR:u--,w=!0;break;default:if(p%5===0&&p>0){for(let E=0;E<6;++E)f.write(Number(no(y)>>no(8*(5-E))));y=0,p=0}break}u===a[0]&&b<B.TEXT_COMPACTION_MODE_LATCH&&(_[p++]=b);for(let E=0;E<p;E++)f.write(_[E]);break;case B.BYTE_COMPACTION_MODE_LATCH_6:for(;u<a[0]&&!w;){let E=a[u++];if(E<B.TEXT_COMPACTION_MODE_LATCH)p++,y=900*y+E;else switch(E){case B.TEXT_COMPACTION_MODE_LATCH:case B.BYTE_COMPACTION_MODE_LATCH:case B.NUMERIC_COMPACTION_MODE_LATCH:case B.BYTE_COMPACTION_MODE_LATCH_6:case B.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case B.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case B.MACRO_PDF417_TERMINATOR:u--,w=!0;break}if(p%5===0&&p>0){for(let D=0;D<6;++D)f.write(Number(no(y)>>no(8*(5-D))));y=0,p=0}}break}return d.append(On.decode(f.toByteArray(),l)),u}static numericCompaction(s,a,l){let u=0,d=!1,f=new Int32Array(B.MAX_NUMERIC_CODEWORDS);for(;a<s[0]&&!d;){let p=s[a++];if(a===s[0]&&(d=!0),p<B.TEXT_COMPACTION_MODE_LATCH)f[u]=p,u++;else switch(p){case B.TEXT_COMPACTION_MODE_LATCH:case B.BYTE_COMPACTION_MODE_LATCH:case B.BYTE_COMPACTION_MODE_LATCH_6:case B.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case B.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case B.MACRO_PDF417_TERMINATOR:a--,d=!0;break}(u%B.MAX_NUMERIC_CODEWORDS===0||p===B.NUMERIC_COMPACTION_MODE_LATCH||d)&&u>0&&(l.append(B.decodeBase900toBase10(f,u)),u=0)}return a}static decodeBase900toBase10(s,a){let l=no(0);for(let d=0;d<a;d++)l+=B.EXP900[a-d-1]*no(s[d]);let u=l.toString();if(u.charAt(0)!=="1")throw new H;return u.substring(1)}}B.TEXT_COMPACTION_MODE_LATCH=900,B.BYTE_COMPACTION_MODE_LATCH=901,B.NUMERIC_COMPACTION_MODE_LATCH=902,B.BYTE_COMPACTION_MODE_LATCH_6=924,B.ECI_USER_DEFINED=925,B.ECI_GENERAL_PURPOSE=926,B.ECI_CHARSET=927,B.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,B.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,B.MACRO_PDF417_TERMINATOR=922,B.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,B.MAX_NUMERIC_CODEWORDS=15,B.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,B.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,B.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,B.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,B.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,B.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,B.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,B.PL=25,B.LL=27,B.AS=27,B.ML=28,B.AL=28,B.PS=29,B.PAL=29,B.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,B.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",B.EXP900=fC()?VT():[],B.NUMBER_OF_SEQUENCE_CODEWORDS=2;class Ue{constructor(){}static decode(s,a,l,u,d,f,p){let y=new Bo(s,a,l,u,d),w=null,_=null,b;for(let T=!0;;T=!1){if(a!=null&&(w=Ue.getRowIndicatorColumn(s,y,a,!0,f,p)),u!=null&&(_=Ue.getRowIndicatorColumn(s,y,u,!1,f,p)),b=Ue.merge(w,_),b==null)throw U.getNotFoundInstance();let O=b.getBoundingBox();if(T&&O!=null&&(O.getMinY()<y.getMinY()||O.getMaxY()>y.getMaxY()))y=O;else break}b.setBoundingBox(y);let E=b.getBarcodeColumnCount()+1;b.setDetectionResultColumn(0,w),b.setDetectionResultColumn(E,_);let D=w!=null;for(let T=1;T<=E;T++){let O=D?T:E-T;if(b.getDetectionResultColumn(O)!==void 0)continue;let k;O===0||O===E?k=new cC(y,O===0):k=new lC(y),b.setDetectionResultColumn(O,k);let F=-1,q=F;for(let re=y.getMinY();re<=y.getMaxY();re++){if(F=Ue.getStartColumn(b,O,re,D),F<0||F>y.getMaxX()){if(q===-1)continue;F=q}let V=Ue.detectCodeword(s,y.getMinX(),y.getMaxX(),D,F,re,f,p);V!=null&&(k.setCodeword(re,V),q=F,f=Math.min(f,V.getWidth()),p=Math.max(p,V.getWidth()))}}return Ue.createDecoderResult(b)}static merge(s,a){if(s==null&&a==null)return null;let l=Ue.getBarcodeMetadata(s,a);if(l==null)return null;let u=Bo.merge(Ue.adjustBoundingBox(s),Ue.adjustBoundingBox(a));return new al(l,u)}static adjustBoundingBox(s){if(s==null)return null;let a=s.getRowHeights();if(a==null)return null;let l=Ue.getMax(a),u=0;for(let p of a)if(u+=l-p,p>0)break;let d=s.getCodewords();for(let p=0;u>0&&d[p]==null;p++)u--;let f=0;for(let p=a.length-1;p>=0&&(f+=l-a[p],!(a[p]>0));p--);for(let p=d.length-1;f>0&&d[p]==null;p--)f--;return s.getBoundingBox().addMissingRows(u,f,s.isLeft())}static getMax(s){let a=-1;for(let l of s)a=Math.max(a,l);return a}static getBarcodeMetadata(s,a){let l;if(s==null||(l=s.getBarcodeMetadata())==null)return a==null?null:a.getBarcodeMetadata();let u;return a==null||(u=a.getBarcodeMetadata())==null?l:l.getColumnCount()!==u.getColumnCount()&&l.getErrorCorrectionLevel()!==u.getErrorCorrectionLevel()&&l.getRowCount()!==u.getRowCount()?null:l}static getRowIndicatorColumn(s,a,l,u,d,f){let p=new cC(a,u);for(let y=0;y<2;y++){let w=y===0?1:-1,_=Math.trunc(Math.trunc(l.getX()));for(let b=Math.trunc(Math.trunc(l.getY()));b<=a.getMaxY()&&b>=a.getMinY();b+=w){let E=Ue.detectCodeword(s,0,s.getWidth(),u,_,b,d,f);E!=null&&(p.setCodeword(b,E),u?_=E.getStartX():_=E.getEndX())}}return p}static adjustCodewordCount(s,a){let l=a[0][1],u=l.getValue(),d=s.getBarcodeColumnCount()*s.getBarcodeRowCount()-Ue.getNumberOfECCodeWords(s.getBarcodeECLevel());if(u.length===0){if(d<1||d>xe.MAX_CODEWORDS_IN_BARCODE)throw U.getNotFoundInstance();l.setValue(d)}else u[0]!==d&&l.setValue(d)}static createDecoderResult(s){let a=Ue.createBarcodeMatrix(s);Ue.adjustCodewordCount(s,a);let l=new Array,u=new Int32Array(s.getBarcodeRowCount()*s.getBarcodeColumnCount()),d=[],f=new Array;for(let y=0;y<s.getBarcodeRowCount();y++)for(let w=0;w<s.getBarcodeColumnCount();w++){let _=a[y][w+1].getValue(),b=y*s.getBarcodeColumnCount()+w;_.length===0?l.push(b):_.length===1?u[b]=_[0]:(f.push(b),d.push(_))}let p=new Array(d.length);for(let y=0;y<p.length;y++)p[y]=d[y];return Ue.createDecoderResultFromAmbiguousValues(s.getBarcodeECLevel(),u,xe.toIntArray(l),xe.toIntArray(f),p)}static createDecoderResultFromAmbiguousValues(s,a,l,u,d){let f=new Int32Array(u.length),p=100;for(;p-- >0;){for(let y=0;y<f.length;y++)a[u[y]]=d[y][f[y]];try{return Ue.decodeCodewords(a,s,l)}catch(y){if(!(y instanceof x))throw y}if(f.length===0)throw x.getChecksumInstance();for(let y=0;y<f.length;y++)if(f[y]<d[y].length-1){f[y]++;break}else if(f[y]=0,y===f.length-1)throw x.getChecksumInstance()}throw x.getChecksumInstance()}static createBarcodeMatrix(s){let a=Array.from({length:s.getBarcodeRowCount()},()=>new Array(s.getBarcodeColumnCount()+2));for(let u=0;u<a.length;u++)for(let d=0;d<a[u].length;d++)a[u][d]=new sl;let l=0;for(let u of s.getDetectionResultColumns()){if(u!=null){for(let d of u.getCodewords())if(d!=null){let f=d.getRowNumber();if(f>=0){if(f>=a.length)continue;a[f][l].setValue(d.getValue())}}}l++}return a}static isValidBarcodeColumn(s,a){return a>=0&&a<=s.getBarcodeColumnCount()+1}static getStartColumn(s,a,l,u){let d=u?1:-1,f=null;if(Ue.isValidBarcodeColumn(s,a-d)&&(f=s.getDetectionResultColumn(a-d).getCodeword(l)),f!=null)return u?f.getEndX():f.getStartX();if(f=s.getDetectionResultColumn(a).getCodewordNearby(l),f!=null)return u?f.getStartX():f.getEndX();if(Ue.isValidBarcodeColumn(s,a-d)&&(f=s.getDetectionResultColumn(a-d).getCodewordNearby(l)),f!=null)return u?f.getEndX():f.getStartX();let p=0;for(;Ue.isValidBarcodeColumn(s,a-d);){a-=d;for(let y of s.getDetectionResultColumn(a).getCodewords())if(y!=null)return(u?y.getEndX():y.getStartX())+d*p*(y.getEndX()-y.getStartX());p++}return u?s.getBoundingBox().getMinX():s.getBoundingBox().getMaxX()}static detectCodeword(s,a,l,u,d,f,p,y){d=Ue.adjustCodewordStartColumn(s,a,l,u,d,f);let w=Ue.getModuleBitCount(s,a,l,u,d,f);if(w==null)return null;let _,b=et.sum(w);if(u)_=d+b;else{for(let T=0;T<w.length/2;T++){let O=w[T];w[T]=w[w.length-1-T],w[w.length-1-T]=O}_=d,d=_-b}if(!Ue.checkCodewordSkew(b,p,y))return null;let E=$n.getDecodedValue(w),D=xe.getCodeword(E);return D===-1?null:new PT(d,_,Ue.getCodewordBucketNumber(E),D)}static getModuleBitCount(s,a,l,u,d,f){let p=d,y=new Int32Array(8),w=0,_=u?1:-1,b=u;for(;(u?p<l:p>=a)&&w<y.length;)s.get(p,f)===b?(y[w]++,p+=_):(w++,b=!b);return w===y.length||p===(u?l:a)&&w===y.length-1?y:null}static getNumberOfECCodeWords(s){return 2<<s}static adjustCodewordStartColumn(s,a,l,u,d,f){let p=d,y=u?-1:1;for(let w=0;w<2;w++){for(;(u?p>=a:p<l)&&u===s.get(p,f);){if(Math.abs(d-p)>Ue.CODEWORD_SKEW_SIZE)return d;p+=y}y=-y,u=!u}return p}static checkCodewordSkew(s,a,l){return a-Ue.CODEWORD_SKEW_SIZE<=s&&s<=l+Ue.CODEWORD_SKEW_SIZE}static decodeCodewords(s,a,l){if(s.length===0)throw H.getFormatInstance();let u=1<<a+1,d=Ue.correctErrors(s,l,u);Ue.verifyCodewordCount(s,u);let f=B.decode(s,""+a);return f.setErrorsCorrected(d),f.setErasures(l.length),f}static correctErrors(s,a,l){if(a!=null&&a.length>l/2+Ue.MAX_ERRORS||l<0||l>Ue.MAX_EC_CODEWORDS)throw x.getChecksumInstance();return Ue.errorCorrection.decode(s,l,a)}static verifyCodewordCount(s,a){if(s.length<4)throw H.getFormatInstance();let l=s[0];if(l>s.length)throw H.getFormatInstance();if(l===0)if(a<s.length)s[0]=s.length-a;else throw H.getFormatInstance()}static getBitCountForCodeword(s){let a=new Int32Array(8),l=0,u=a.length-1;for(;!((s&1)!==l&&(l=s&1,u--,u<0));)a[u]++,s>>=1;return a}static getCodewordBucketNumber(s){return s instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(s):this.getCodewordBucketNumber_number(s)}static getCodewordBucketNumber_number(s){return Ue.getCodewordBucketNumber(Ue.getBitCountForCodeword(s))}static getCodewordBucketNumber_Int32Array(s){return(s[0]-s[2]+s[4]-s[6]+9)%9}static toString(s){let a=new ol;for(let l=0;l<s.length;l++){a.format("Row %2d: ",l);for(let u=0;u<s[l].length;u++){let d=s[l][u];d.getValue().length===0?a.format("        ",null):a.format("%4d(%2d)",d.getValue()[0],d.getConfidence(d.getValue()[0]))}a.format("%n")}return a.toString()}}Ue.CODEWORD_SKEW_SIZE=2,Ue.MAX_ERRORS=3,Ue.MAX_EC_CODEWORDS=512,Ue.errorCorrection=new aC;class _n{decode(s,a=null){let l=_n.decode(s,a,!1);if(l==null||l.length===0||l[0]==null)throw U.getNotFoundInstance();return l[0]}decodeMultiple(s,a=null){try{return _n.decode(s,a,!0)}catch(l){throw l instanceof H||l instanceof x?U.getNotFoundInstance():l}}static decode(s,a,l){let u=new Array,d=ke.detectMultiple(s,a,l);for(let f of d.getPoints()){let p=Ue.decode(d.getBits(),f[4],f[5],f[6],f[7],_n.getMinCodewordWidth(f),_n.getMaxCodewordWidth(f)),y=new Fn(p.getText(),p.getRawBytes(),void 0,f,we.PDF_417);y.putMetadata(un.ERROR_CORRECTION_LEVEL,p.getECLevel());let w=p.getOther();w!=null&&y.putMetadata(un.PDF417_EXTRA_METADATA,w),u.push(y)}return u.map(f=>f)}static getMaxWidth(s,a){return s==null||a==null?0:Math.trunc(Math.abs(s.getX()-a.getX()))}static getMinWidth(s,a){return s==null||a==null?W.MAX_VALUE:Math.trunc(Math.abs(s.getX()-a.getX()))}static getMaxCodewordWidth(s){return Math.floor(Math.max(Math.max(_n.getMaxWidth(s[0],s[4]),_n.getMaxWidth(s[6],s[2])*xe.MODULES_IN_CODEWORD/xe.MODULES_IN_STOP_PATTERN),Math.max(_n.getMaxWidth(s[1],s[5]),_n.getMaxWidth(s[7],s[3])*xe.MODULES_IN_CODEWORD/xe.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(s){return Math.floor(Math.min(Math.min(_n.getMinWidth(s[0],s[4]),_n.getMinWidth(s[6],s[2])*xe.MODULES_IN_CODEWORD/xe.MODULES_IN_STOP_PATTERN),Math.min(_n.getMinWidth(s[1],s[5]),_n.getMinWidth(s[7],s[3])*xe.MODULES_IN_CODEWORD/xe.MODULES_IN_STOP_PATTERN)))}reset(){}}let Cp=(()=>{class C extends h{}return C.kind="ReaderException",C})();class hC{constructor(s,a){this.verbose=s===!0,a&&this.setHints(a)}decode(s,a){return a&&this.setHints(a),this.decodeInternal(s)}decodeWithState(s){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(s)}setHints(s){this.hints=s;let a=!n(s)&&s.get(ge.TRY_HARDER)===!0,l=n(s)?null:s.get(ge.POSSIBLE_FORMATS),u=new Array;if(!n(l)){let d=l.some(f=>f===we.UPC_A||f===we.UPC_E||f===we.EAN_13||f===we.EAN_8||f===we.CODABAR||f===we.CODE_39||f===we.CODE_93||f===we.CODE_128||f===we.ITF||f===we.RSS_14||f===we.RSS_EXPANDED);d&&!a&&u.push(new Ds(s,this.verbose)),l.includes(we.QR_CODE)&&u.push(new to),l.includes(we.DATA_MATRIX)&&u.push(new pu),l.includes(we.AZTEC)&&u.push(new uu),l.includes(we.PDF_417)&&u.push(new _n),d&&a&&u.push(new Ds(s,this.verbose))}u.length===0&&(a||u.push(new Ds(s,this.verbose)),u.push(new to),u.push(new pu),u.push(new uu),u.push(new _n),a&&u.push(new Ds(s,this.verbose))),this.readers=u}reset(){if(this.readers!==null)for(let s of this.readers)s.reset()}decodeInternal(s){if(this.readers===null)throw new Cp("No readers where selected, nothing can be read.");for(let a of this.readers)try{return a.decode(s,this.hints)}catch(l){if(l instanceof Cp)continue}throw new U("No MultiFormat Readers were able to detect the code.")}}class UT extends Po{constructor(s=null,a=500){let l=new hC;l.setHints(s),super(l,a)}decodeBitmap(s){return this.reader.decodeWithState(s)}}class jT extends Po{constructor(s=500){super(new _n,s)}}class HT extends Po{constructor(s=500){super(new to,s)}}var pC=function(C){return C[C.ERROR_CORRECTION=0]="ERROR_CORRECTION",C[C.CHARACTER_SET=1]="CHARACTER_SET",C[C.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",C[C.MIN_SIZE=3]="MIN_SIZE",C[C.MAX_SIZE=4]="MAX_SIZE",C[C.MARGIN=5]="MARGIN",C[C.PDF417_COMPACT=6]="PDF417_COMPACT",C[C.PDF417_COMPACTION=7]="PDF417_COMPACTION",C[C.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",C[C.AZTEC_LAYERS=9]="AZTEC_LAYERS",C[C.QR_VERSION=10]="QR_VERSION",C}(pC||{}),Jt=pC;class _p{constructor(s){this.field=s,this.cachedGenerators=[],this.cachedGenerators.push(new Gn(s,Int32Array.from([1])))}buildGenerator(s){let a=this.cachedGenerators;if(s>=a.length){let l=a[a.length-1],u=this.field;for(let d=a.length;d<=s;d++){let f=l.multiply(new Gn(u,Int32Array.from([1,u.exp(d-1+u.getGeneratorBase())])));a.push(f),l=f}}return a[s]}encode(s,a){if(a===0)throw new m("No error correction bytes");let l=s.length-a;if(l<=0)throw new m("No data bytes provided");let u=this.buildGenerator(a),d=new Int32Array(l);A.arraycopy(s,0,d,0,l);let f=new Gn(this.field,d);f=f.multiplyByMonomial(a,1);let y=f.divide(u)[1].getCoefficients(),w=a-y.length;for(let _=0;_<w;_++)s[l+_]=0;A.arraycopy(y,0,s,l+w,y.length)}}let As=(()=>{class C{constructor(){}static applyMaskPenaltyRule1(a){return C.applyMaskPenaltyRule1Internal(a,!0)+C.applyMaskPenaltyRule1Internal(a,!1)}static applyMaskPenaltyRule2(a){let l=0,u=a.getArray(),d=a.getWidth(),f=a.getHeight();for(let p=0;p<f-1;p++){let y=u[p];for(let w=0;w<d-1;w++){let _=y[w];_===y[w+1]&&_===u[p+1][w]&&_===u[p+1][w+1]&&l++}}return C.N2*l}static applyMaskPenaltyRule3(a){let l=0,u=a.getArray(),d=a.getWidth(),f=a.getHeight();for(let p=0;p<f;p++)for(let y=0;y<d;y++){let w=u[p];y+6<d&&w[y]===1&&w[y+1]===0&&w[y+2]===1&&w[y+3]===1&&w[y+4]===1&&w[y+5]===0&&w[y+6]===1&&(C.isWhiteHorizontal(w,y-4,y)||C.isWhiteHorizontal(w,y+7,y+11))&&l++,p+6<f&&u[p][y]===1&&u[p+1][y]===0&&u[p+2][y]===1&&u[p+3][y]===1&&u[p+4][y]===1&&u[p+5][y]===0&&u[p+6][y]===1&&(C.isWhiteVertical(u,y,p-4,p)||C.isWhiteVertical(u,y,p+7,p+11))&&l++}return l*C.N3}static isWhiteHorizontal(a,l,u){l=Math.max(l,0),u=Math.min(u,a.length);for(let d=l;d<u;d++)if(a[d]===1)return!1;return!0}static isWhiteVertical(a,l,u,d){u=Math.max(u,0),d=Math.min(d,a.length);for(let f=u;f<d;f++)if(a[f][l]===1)return!1;return!0}static applyMaskPenaltyRule4(a){let l=0,u=a.getArray(),d=a.getWidth(),f=a.getHeight();for(let w=0;w<f;w++){let _=u[w];for(let b=0;b<d;b++)_[b]===1&&l++}let p=a.getHeight()*a.getWidth();return Math.floor(Math.abs(l*2-p)*10/p)*C.N4}static getDataMaskBit(a,l,u){let d,f;switch(a){case 0:d=u+l&1;break;case 1:d=u&1;break;case 2:d=l%3;break;case 3:d=(u+l)%3;break;case 4:d=Math.floor(u/2)+Math.floor(l/3)&1;break;case 5:f=u*l,d=(f&1)+f%3;break;case 6:f=u*l,d=(f&1)+f%3&1;break;case 7:f=u*l,d=f%3+(u+l&1)&1;break;default:throw new m("Invalid mask pattern: "+a)}return d===0}static applyMaskPenaltyRule1Internal(a,l){let u=0,d=l?a.getHeight():a.getWidth(),f=l?a.getWidth():a.getHeight(),p=a.getArray();for(let y=0;y<d;y++){let w=0,_=-1;for(let b=0;b<f;b++){let E=l?p[y][b]:p[b][y];E===_?w++:(w>=5&&(u+=C.N1+(w-5)),w=1,_=E)}w>=5&&(u+=C.N1+(w-5))}return u}}return C.N1=3,C.N2=3,C.N3=40,C.N4=10,C})();class yu{constructor(s,a){this.width=s,this.height=a;let l=new Array(a);for(let u=0;u!==a;u++)l[u]=new Uint8Array(s);this.bytes=l}getHeight(){return this.height}getWidth(){return this.width}get(s,a){return this.bytes[a][s]}getArray(){return this.bytes}setNumber(s,a,l){this.bytes[a][s]=l}setBoolean(s,a,l){this.bytes[a][s]=l?1:0}clear(s){for(let a of this.bytes)$.fill(a,s)}equals(s){if(!(s instanceof yu))return!1;let a=s;if(this.width!==a.width||this.height!==a.height)return!1;for(let l=0,u=this.height;l<u;++l){let d=this.bytes[l],f=a.bytes[l];for(let p=0,y=this.width;p<y;++p)if(d[p]!==f[p])return!1}return!0}toString(){let s=new yt;for(let a=0,l=this.height;a<l;++a){let u=this.bytes[a];for(let d=0,f=this.width;d<f;++d)switch(u[d]){case 0:s.append(" 0");break;case 1:s.append(" 1");break;default:s.append("  ");break}s.append(`
`)}return s.toString()}}let wu=(()=>{class C{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){let a=new yt;return a.append(`<<
`),a.append(" mode: "),a.append(this.mode?this.mode.toString():"null"),a.append(`
 ecLevel: `),a.append(this.ecLevel?this.ecLevel.toString():"null"),a.append(`
 version: `),a.append(this.version?this.version.toString():"null"),a.append(`
 maskPattern: `),a.append(this.maskPattern.toString()),this.matrix?(a.append(`
 matrix:
`),a.append(this.matrix.toString())):a.append(`
 matrix: null
`),a.append(`>>
`),a.toString()}setMode(a){this.mode=a}setECLevel(a){this.ecLevel=a}setVersion(a){this.version=a}setMaskPattern(a){this.maskPattern=a}setMatrix(a){this.matrix=a}static isValidMaskPattern(a){return a>=0&&a<C.NUM_MASK_PATTERNS}}return C.NUM_MASK_PATTERNS=8,C})(),Et=(()=>{class C extends h{}return C.kind="WriterException",C})();class Ce{constructor(){}static clearMatrix(s){s.clear(255)}static buildMatrix(s,a,l,u,d){Ce.clearMatrix(d),Ce.embedBasicPatterns(l,d),Ce.embedTypeInfo(a,u,d),Ce.maybeEmbedVersionInfo(l,d),Ce.embedDataBits(s,u,d)}static embedBasicPatterns(s,a){Ce.embedPositionDetectionPatternsAndSeparators(a),Ce.embedDarkDotAtLeftBottomCorner(a),Ce.maybeEmbedPositionAdjustmentPatterns(s,a),Ce.embedTimingPatterns(a)}static embedTypeInfo(s,a,l){let u=new ce;Ce.makeTypeInfoBits(s,a,u);for(let d=0,f=u.getSize();d<f;++d){let p=u.get(u.getSize()-1-d),y=Ce.TYPE_INFO_COORDINATES[d],w=y[0],_=y[1];if(l.setBoolean(w,_,p),d<8){let b=l.getWidth()-d-1;l.setBoolean(b,8,p)}else{let E=l.getHeight()-7+(d-8);l.setBoolean(8,E,p)}}}static maybeEmbedVersionInfo(s,a){if(s.getVersionNumber()<7)return;let l=new ce;Ce.makeVersionInfoBits(s,l);let u=6*3-1;for(let d=0;d<6;++d)for(let f=0;f<3;++f){let p=l.get(u);u--,a.setBoolean(d,a.getHeight()-11+f,p),a.setBoolean(a.getHeight()-11+f,d,p)}}static embedDataBits(s,a,l){let u=0,d=-1,f=l.getWidth()-1,p=l.getHeight()-1;for(;f>0;){for(f===6&&(f-=1);p>=0&&p<l.getHeight();){for(let y=0;y<2;++y){let w=f-y;if(!Ce.isEmpty(l.get(w,p)))continue;let _;u<s.getSize()?(_=s.get(u),++u):_=!1,a!==255&&As.getDataMaskBit(a,w,p)&&(_=!_),l.setBoolean(w,p,_)}p+=d}d=-d,p+=d,f-=2}if(u!==s.getSize())throw new Et("Not all bits consumed: "+u+"/"+s.getSize())}static findMSBSet(s){return 32-W.numberOfLeadingZeros(s)}static calculateBCHCode(s,a){if(a===0)throw new m("0 polynomial");let l=Ce.findMSBSet(a);for(s<<=l-1;Ce.findMSBSet(s)>=l;)s^=a<<Ce.findMSBSet(s)-l;return s}static makeTypeInfoBits(s,a,l){if(!wu.isValidMaskPattern(a))throw new Et("Invalid mask pattern");let u=s.getBits()<<3|a;l.appendBits(u,5);let d=Ce.calculateBCHCode(u,Ce.TYPE_INFO_POLY);l.appendBits(d,10);let f=new ce;if(f.appendBits(Ce.TYPE_INFO_MASK_PATTERN,15),l.xor(f),l.getSize()!==15)throw new Et("should not happen but we got: "+l.getSize())}static makeVersionInfoBits(s,a){a.appendBits(s.getVersionNumber(),6);let l=Ce.calculateBCHCode(s.getVersionNumber(),Ce.VERSION_INFO_POLY);if(a.appendBits(l,12),a.getSize()!==18)throw new Et("should not happen but we got: "+a.getSize())}static isEmpty(s){return s===255}static embedTimingPatterns(s){for(let a=8;a<s.getWidth()-8;++a){let l=(a+1)%2;Ce.isEmpty(s.get(a,6))&&s.setNumber(a,6,l),Ce.isEmpty(s.get(6,a))&&s.setNumber(6,a,l)}}static embedDarkDotAtLeftBottomCorner(s){if(s.get(8,s.getHeight()-8)===0)throw new Et;s.setNumber(8,s.getHeight()-8,1)}static embedHorizontalSeparationPattern(s,a,l){for(let u=0;u<8;++u){if(!Ce.isEmpty(l.get(s+u,a)))throw new Et;l.setNumber(s+u,a,0)}}static embedVerticalSeparationPattern(s,a,l){for(let u=0;u<7;++u){if(!Ce.isEmpty(l.get(s,a+u)))throw new Et;l.setNumber(s,a+u,0)}}static embedPositionAdjustmentPattern(s,a,l){for(let u=0;u<5;++u){let d=Ce.POSITION_ADJUSTMENT_PATTERN[u];for(let f=0;f<5;++f)l.setNumber(s+f,a+u,d[f])}}static embedPositionDetectionPattern(s,a,l){for(let u=0;u<7;++u){let d=Ce.POSITION_DETECTION_PATTERN[u];for(let f=0;f<7;++f)l.setNumber(s+f,a+u,d[f])}}static embedPositionDetectionPatternsAndSeparators(s){let a=Ce.POSITION_DETECTION_PATTERN[0].length;Ce.embedPositionDetectionPattern(0,0,s),Ce.embedPositionDetectionPattern(s.getWidth()-a,0,s),Ce.embedPositionDetectionPattern(0,s.getWidth()-a,s);let l=8;Ce.embedHorizontalSeparationPattern(0,l-1,s),Ce.embedHorizontalSeparationPattern(s.getWidth()-l,l-1,s),Ce.embedHorizontalSeparationPattern(0,s.getWidth()-l,s);let u=7;Ce.embedVerticalSeparationPattern(u,0,s),Ce.embedVerticalSeparationPattern(s.getHeight()-u-1,0,s),Ce.embedVerticalSeparationPattern(u,s.getHeight()-u,s)}static maybeEmbedPositionAdjustmentPatterns(s,a){if(s.getVersionNumber()<2)return;let l=s.getVersionNumber()-1,u=Ce.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[l];for(let d=0,f=u.length;d!==f;d++){let p=u[d];if(p>=0)for(let y=0;y!==f;y++){let w=u[y];w>=0&&Ce.isEmpty(a.get(w,p))&&Ce.embedPositionAdjustmentPattern(w-2,p-2,a)}}}}Ce.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),Ce.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),Ce.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),Ce.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),Ce.VERSION_INFO_POLY=7973,Ce.TYPE_INFO_POLY=1335,Ce.TYPE_INFO_MASK_PATTERN=21522;class zT{constructor(s,a){this.dataBytes=s,this.errorCorrectionBytes=a}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class Tt{constructor(){}static calculateMaskPenalty(s){return As.applyMaskPenaltyRule1(s)+As.applyMaskPenaltyRule2(s)+As.applyMaskPenaltyRule3(s)+As.applyMaskPenaltyRule4(s)}static encode(s,a,l=null){let u=Tt.DEFAULT_BYTE_MODE_ENCODING,d=l!==null&&l.get(Jt.CHARACTER_SET)!==void 0;d&&(u=l.get(Jt.CHARACTER_SET).toString());let f=this.chooseMode(s,u),p=new ce;if(f===me.BYTE&&(d||Tt.DEFAULT_BYTE_MODE_ENCODING!==u)){let re=G.getCharacterSetECIByName(u);re!==void 0&&this.appendECI(re,p)}this.appendModeInfo(f,p);let y=new ce;this.appendBytes(s,f,y,u);let w;if(l!==null&&l.get(Jt.QR_VERSION)!==void 0){let re=Number.parseInt(l.get(Jt.QR_VERSION).toString(),10);w=he.getVersionForNumber(re);let V=this.calculateBitsNeeded(f,p,y,w);if(!this.willFit(V,w,a))throw new Et("Data too big for requested version")}else w=this.recommendVersion(a,f,p,y);let _=new ce;_.appendBitArray(p);let b=f===me.BYTE?y.getSizeInBytes():s.length;this.appendLengthInfo(b,w,f,_),_.appendBitArray(y);let E=w.getECBlocksForLevel(a),D=w.getTotalCodewords()-E.getTotalECCodewords();this.terminateBits(D,_);let T=this.interleaveWithECBytes(_,w.getTotalCodewords(),D,E.getNumBlocks()),O=new wu;O.setECLevel(a),O.setMode(f),O.setVersion(w);let k=w.getDimensionForVersion(),F=new yu(k,k),q=this.chooseMaskPattern(T,a,w,F);return O.setMaskPattern(q),Ce.buildMatrix(T,a,w,q,F),O.setMatrix(F),O}static recommendVersion(s,a,l,u){let d=this.calculateBitsNeeded(a,l,u,he.getVersionForNumber(1)),f=this.chooseVersion(d,s),p=this.calculateBitsNeeded(a,l,u,f);return this.chooseVersion(p,s)}static calculateBitsNeeded(s,a,l,u){return a.getSize()+s.getCharacterCountBits(u)+l.getSize()}static getAlphanumericCode(s){return s<Tt.ALPHANUMERIC_TABLE.length?Tt.ALPHANUMERIC_TABLE[s]:-1}static chooseMode(s,a=null){if(G.SJIS.getName()===a&&this.isOnlyDoubleByteKanji(s))return me.KANJI;let l=!1,u=!1;for(let d=0,f=s.length;d<f;++d){let p=s.charAt(d);if(Tt.isDigit(p))l=!0;else if(this.getAlphanumericCode(p.charCodeAt(0))!==-1)u=!0;else return me.BYTE}return u?me.ALPHANUMERIC:l?me.NUMERIC:me.BYTE}static isOnlyDoubleByteKanji(s){let a;try{a=On.encode(s,G.SJIS)}catch{return!1}let l=a.length;if(l%2!==0)return!1;for(let u=0;u<l;u+=2){let d=a[u]&255;if((d<129||d>159)&&(d<224||d>235))return!1}return!0}static chooseMaskPattern(s,a,l,u){let d=Number.MAX_SAFE_INTEGER,f=-1;for(let p=0;p<wu.NUM_MASK_PATTERNS;p++){Ce.buildMatrix(s,a,l,p,u);let y=this.calculateMaskPenalty(u);y<d&&(d=y,f=p)}return f}static chooseVersion(s,a){for(let l=1;l<=40;l++){let u=he.getVersionForNumber(l);if(Tt.willFit(s,u,a))return u}throw new Et("Data too big")}static willFit(s,a,l){let u=a.getTotalCodewords(),f=a.getECBlocksForLevel(l).getTotalECCodewords(),p=u-f,y=(s+7)/8;return p>=y}static terminateBits(s,a){let l=s*8;if(a.getSize()>l)throw new Et("data bits cannot fit in the QR Code"+a.getSize()+" > "+l);for(let f=0;f<4&&a.getSize()<l;++f)a.appendBit(!1);let u=a.getSize()&7;if(u>0)for(let f=u;f<8;f++)a.appendBit(!1);let d=s-a.getSizeInBytes();for(let f=0;f<d;++f)a.appendBits(f&1?17:236,8);if(a.getSize()!==l)throw new Et("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(s,a,l,u,d,f){if(u>=l)throw new Et("Block ID too large");let p=s%l,y=l-p,w=Math.floor(s/l),_=w+1,b=Math.floor(a/l),E=b+1,D=w-b,T=_-E;if(D!==T)throw new Et("EC bytes mismatch");if(l!==y+p)throw new Et("RS blocks mismatch");if(s!==(b+D)*y+(E+T)*p)throw new Et("Total bytes mismatch");u<y?(d[0]=b,f[0]=D):(d[0]=E,f[0]=T)}static interleaveWithECBytes(s,a,l,u){if(s.getSizeInBytes()!==l)throw new Et("Number of bits and data bytes does not match");let d=0,f=0,p=0,y=new Array;for(let _=0;_<u;++_){let b=new Int32Array(1),E=new Int32Array(1);Tt.getNumDataBytesAndNumECBytesForBlockID(a,l,u,_,b,E);let D=b[0],T=new Uint8Array(D);s.toBytes(8*d,T,0,D);let O=Tt.generateECBytes(T,E[0]);y.push(new zT(T,O)),f=Math.max(f,D),p=Math.max(p,O.length),d+=b[0]}if(l!==d)throw new Et("Data bytes does not match offset");let w=new ce;for(let _=0;_<f;++_)for(let b of y){let E=b.getDataBytes();_<E.length&&w.appendBits(E[_],8)}for(let _=0;_<p;++_)for(let b of y){let E=b.getErrorCorrectionBytes();_<E.length&&w.appendBits(E[_],8)}if(a!==w.getSizeInBytes())throw new Et("Interleaving error: "+a+" and "+w.getSizeInBytes()+" differ.");return w}static generateECBytes(s,a){let l=s.length,u=new Int32Array(l+a);for(let f=0;f<l;f++)u[f]=s[f]&255;new _p(at.QR_CODE_FIELD_256).encode(u,a);let d=new Uint8Array(a);for(let f=0;f<a;f++)d[f]=u[l+f];return d}static appendModeInfo(s,a){a.appendBits(s.getBits(),4)}static appendLengthInfo(s,a,l,u){let d=l.getCharacterCountBits(a);if(s>=1<<d)throw new Et(s+" is bigger than "+((1<<d)-1));u.appendBits(s,d)}static appendBytes(s,a,l,u){switch(a){case me.NUMERIC:Tt.appendNumericBytes(s,l);break;case me.ALPHANUMERIC:Tt.appendAlphanumericBytes(s,l);break;case me.BYTE:Tt.append8BitBytes(s,l,u);break;case me.KANJI:Tt.appendKanjiBytes(s,l);break;default:throw new Et("Invalid mode: "+a)}}static getDigit(s){return s.charCodeAt(0)-48}static isDigit(s){let a=Tt.getDigit(s);return a>=0&&a<=9}static appendNumericBytes(s,a){let l=s.length,u=0;for(;u<l;){let d=Tt.getDigit(s.charAt(u));if(u+2<l){let f=Tt.getDigit(s.charAt(u+1)),p=Tt.getDigit(s.charAt(u+2));a.appendBits(d*100+f*10+p,10),u+=3}else if(u+1<l){let f=Tt.getDigit(s.charAt(u+1));a.appendBits(d*10+f,7),u+=2}else a.appendBits(d,4),u++}}static appendAlphanumericBytes(s,a){let l=s.length,u=0;for(;u<l;){let d=Tt.getAlphanumericCode(s.charCodeAt(u));if(d===-1)throw new Et;if(u+1<l){let f=Tt.getAlphanumericCode(s.charCodeAt(u+1));if(f===-1)throw new Et;a.appendBits(d*45+f,11),u+=2}else a.appendBits(d,6),u++}}static append8BitBytes(s,a,l){let u;try{u=On.encode(s,l)}catch(d){throw new Et(d)}for(let d=0,f=u.length;d!==f;d++){let p=u[d];a.appendBits(p,8)}}static appendKanjiBytes(s,a){let l;try{l=On.encode(s,G.SJIS)}catch(d){throw new Et(d)}let u=l.length;for(let d=0;d<u;d+=2){let f=l[d]&255,p=l[d+1]&255,y=f<<8&4294967295|p,w=-1;if(y>=33088&&y<=40956?w=y-33088:y>=57408&&y<=60351&&(w=y-49472),w===-1)throw new Et("Invalid byte sequence");let _=(w>>8)*192+(w&255);a.appendBits(_,13)}}static appendECI(s,a){a.appendBits(me.ECI.getBits(),4),a.appendBits(s.getValue(),8)}}Tt.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),Tt.DEFAULT_BYTE_MODE_ENCODING=G.UTF8.getName();let WT=(()=>{class C{write(a,l,u,d=null){if(a.length===0)throw new m("Found empty contents");if(l<0||u<0)throw new m("Requested dimensions are too small: "+l+"x"+u);let f=bt.L,p=C.QUIET_ZONE_SIZE;d!==null&&(d.get(Jt.ERROR_CORRECTION)!==void 0&&(f=bt.fromString(d.get(Jt.ERROR_CORRECTION).toString())),d.get(Jt.MARGIN)!==void 0&&(p=Number.parseInt(d.get(Jt.MARGIN).toString(),10)));let y=Tt.encode(a,f,d);return this.renderResult(y,l,u,p)}writeToDom(a,l,u,d,f=null){typeof a=="string"&&(a=document.querySelector(a));let p=this.write(l,u,d,f);a&&a.appendChild(p)}renderResult(a,l,u,d){let f=a.getMatrix();if(f===null)throw new vi;let p=f.getWidth(),y=f.getHeight(),w=p+d*2,_=y+d*2,b=Math.max(l,w),E=Math.max(u,_),D=Math.min(Math.floor(b/w),Math.floor(E/_)),T=Math.floor((b-p*D)/2),O=Math.floor((E-y*D)/2),k=this.createSVGElement(b,E);for(let F=0,q=O;F<y;F++,q+=D)for(let re=0,V=T;re<p;re++,V+=D)if(f.get(re,F)===1){let ze=this.createSvgRectElement(V,q,D,D);k.appendChild(ze)}return k}createSVGElement(a,l){let u=document.createElementNS(C.SVG_NS,"svg");return u.setAttributeNS(null,"height",a.toString()),u.setAttributeNS(null,"width",l.toString()),u}createSvgRectElement(a,l,u,d){let f=document.createElementNS(C.SVG_NS,"rect");return f.setAttributeNS(null,"x",a.toString()),f.setAttributeNS(null,"y",l.toString()),f.setAttributeNS(null,"height",u.toString()),f.setAttributeNS(null,"width",d.toString()),f.setAttributeNS(null,"fill","#000000"),f}}return C.QUIET_ZONE_SIZE=4,C.SVG_NS="http://www.w3.org/2000/svg",C})(),gC=(()=>{class C{encode(a,l,u,d,f){if(a.length===0)throw new m("Found empty contents");if(l!==we.QR_CODE)throw new m("Can only encode QR_CODE, but got "+l);if(u<0||d<0)throw new m(`Requested dimensions are too small: ${u}x${d}`);let p=bt.L,y=C.QUIET_ZONE_SIZE;f!==null&&(f.get(Jt.ERROR_CORRECTION)!==void 0&&(p=bt.fromString(f.get(Jt.ERROR_CORRECTION).toString())),f.get(Jt.MARGIN)!==void 0&&(y=Number.parseInt(f.get(Jt.MARGIN).toString(),10)));let w=Tt.encode(a,p,f);return C.renderResult(w,u,d,y)}static renderResult(a,l,u,d){let f=a.getMatrix();if(f===null)throw new vi;let p=f.getWidth(),y=f.getHeight(),w=p+d*2,_=y+d*2,b=Math.max(l,w),E=Math.max(u,_),D=Math.min(Math.floor(b/w),Math.floor(E/_)),T=Math.floor((b-p*D)/2),O=Math.floor((E-y*D)/2),k=new ln(b,E);for(let F=0,q=O;F<y;F++,q+=D)for(let re=0,V=T;re<p;re++,V+=D)f.get(re,F)===1&&k.setRegion(V,q,D,D);return k}}return C.QUIET_ZONE_SIZE=4,C})();class GT{encode(s,a,l,u,d){let f;switch(a){case we.QR_CODE:f=new gC;break;default:throw new m("No encoder available for format "+a)}return f.encode(s,a,l,u,d)}}let $T=(()=>{class C extends Qa{constructor(a,l,u,d,f,p,y,w){if(super(p,y),this.yuvData=a,this.dataWidth=l,this.dataHeight=u,this.left=d,this.top=f,d+p>l||f+y>u)throw new m("Crop rectangle does not fit within image data.");w&&this.reverseHorizontal(p,y)}getRow(a,l){if(a<0||a>=this.getHeight())throw new m("Requested row is outside the image: "+a);let u=this.getWidth();(l==null||l.length<u)&&(l=new Uint8ClampedArray(u));let d=(a+this.top)*this.dataWidth+this.left;return A.arraycopy(this.yuvData,d,l,0,u),l}getMatrix(){let a=this.getWidth(),l=this.getHeight();if(a===this.dataWidth&&l===this.dataHeight)return this.yuvData;let u=a*l,d=new Uint8ClampedArray(u),f=this.top*this.dataWidth+this.left;if(a===this.dataWidth)return A.arraycopy(this.yuvData,f,d,0,u),d;for(let p=0;p<l;p++){let y=p*a;A.arraycopy(this.yuvData,f,d,y,a),f+=this.dataWidth}return d}isCropSupported(){return!0}crop(a,l,u,d){return new C(this.yuvData,this.dataWidth,this.dataHeight,this.left+a,this.top+l,u,d,!1)}renderThumbnail(){let a=this.getWidth()/C.THUMBNAIL_SCALE_FACTOR,l=this.getHeight()/C.THUMBNAIL_SCALE_FACTOR,u=new Int32Array(a*l),d=this.yuvData,f=this.top*this.dataWidth+this.left;for(let p=0;p<l;p++){let y=p*a;for(let w=0;w<a;w++){let _=d[f+w*C.THUMBNAIL_SCALE_FACTOR]&255;u[y+w]=4278190080|_*65793}f+=this.dataWidth*C.THUMBNAIL_SCALE_FACTOR}return u}getThumbnailWidth(){return this.getWidth()/C.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/C.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(a,l){let u=this.yuvData;for(let d=0,f=this.top*this.dataWidth+this.left;d<l;d++,f+=this.dataWidth){let p=f+a/2;for(let y=f,w=f+a-1;y<p;y++,w--){let _=u[y];u[y]=u[w],u[w]=_}}}invert(){return new Xi(this)}}return C.THUMBNAIL_SCALE_FACTOR=2,C})();class vp extends Qa{constructor(s,a,l,u,d,f,p){if(super(a,l),this.dataWidth=u,this.dataHeight=d,this.left=f,this.top=p,s.BYTES_PER_ELEMENT===4){let y=a*l,w=new Uint8ClampedArray(y);for(let _=0;_<y;_++){let b=s[_],E=b>>16&255,D=b>>7&510,T=b&255;w[_]=(E+D+T)/4&255}this.luminances=w}else this.luminances=s;if(u===void 0&&(this.dataWidth=a),d===void 0&&(this.dataHeight=l),f===void 0&&(this.left=0),p===void 0&&(this.top=0),this.left+a>this.dataWidth||this.top+l>this.dataHeight)throw new m("Crop rectangle does not fit within image data.")}getRow(s,a){if(s<0||s>=this.getHeight())throw new m("Requested row is outside the image: "+s);let l=this.getWidth();(a==null||a.length<l)&&(a=new Uint8ClampedArray(l));let u=(s+this.top)*this.dataWidth+this.left;return A.arraycopy(this.luminances,u,a,0,l),a}getMatrix(){let s=this.getWidth(),a=this.getHeight();if(s===this.dataWidth&&a===this.dataHeight)return this.luminances;let l=s*a,u=new Uint8ClampedArray(l),d=this.top*this.dataWidth+this.left;if(s===this.dataWidth)return A.arraycopy(this.luminances,d,u,0,l),u;for(let f=0;f<a;f++){let p=f*s;A.arraycopy(this.luminances,d,u,p,s),d+=this.dataWidth}return u}isCropSupported(){return!0}crop(s,a,l,u){return new vp(this.luminances,l,u,this.dataWidth,this.dataHeight,this.left+s,this.top+a)}invert(){return new Xi(this)}}class mC extends G{static forName(s){return this.getCharacterSetECIByName(s)}}class xp{}xp.ISO_8859_1=G.ISO8859_1;class yC{isCompact(){return this.compact}setCompact(s){this.compact=s}getSize(){return this.size}setSize(s){this.size=s}getLayers(){return this.layers}setLayers(s){this.layers=s}getCodeWords(){return this.codeWords}setCodeWords(s){this.codeWords=s}getMatrix(){return this.matrix}setMatrix(s){this.matrix=s}}class wC{static singletonList(s){return[s]}static min(s,a){return s.sort(a)[0]}}class qT{constructor(s){this.previous=s}getPrevious(){return this.previous}}class Ts extends qT{constructor(s,a,l){super(s),this.value=a,this.bitCount=l}appendTo(s,a){s.appendBits(this.value,this.bitCount)}add(s,a){return new Ts(this,s,a)}addBinaryShift(s,a){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Ts(this,s,a)}toString(){let s=this.value&(1<<this.bitCount)-1;return s|=1<<this.bitCount,"<"+W.toBinaryString(s|1<<this.bitCount).substring(1)+">"}}class bp extends Ts{constructor(s,a,l){super(s,0,0),this.binaryShiftStart=a,this.binaryShiftByteCount=l}appendTo(s,a){for(let l=0;l<this.binaryShiftByteCount;l++)(l===0||l===31&&this.binaryShiftByteCount<=62)&&(s.appendBits(31,5),this.binaryShiftByteCount>62?s.appendBits(this.binaryShiftByteCount-31,16):l===0?s.appendBits(Math.min(this.binaryShiftByteCount,31),5):s.appendBits(this.binaryShiftByteCount-31,5)),s.appendBits(a[this.binaryShiftStart+l],8)}addBinaryShift(s,a){return new bp(this,s,a)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function YT(C,s,a){return new bp(C,s,a)}function ll(C,s,a){return new Ts(C,s,a)}let XT=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],ro=0,Cu=1,gr=2,CC=3,ei=4,ZT=new Ts(null,0,0),Ep=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function QT(C){for(let s of C)$.fill(s,-1);return C[ro][ei]=0,C[Cu][ei]=0,C[Cu][ro]=28,C[CC][ei]=0,C[gr][ei]=0,C[gr][ro]=15,C}let _C=QT($.createInt32Array(6,6));class ti{constructor(s,a,l,u){this.token=s,this.mode=a,this.binaryShiftByteCount=l,this.bitCount=u}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(s,a){let l=this.bitCount,u=this.token;if(s!==this.mode){let f=Ep[this.mode][s];u=ll(u,f&65535,f>>16),l+=f>>16}let d=s===gr?4:5;return u=ll(u,a,d),new ti(u,s,0,l+d)}shiftAndAppend(s,a){let l=this.token,u=this.mode===gr?4:5;return l=ll(l,_C[this.mode][s],u),l=ll(l,a,5),new ti(l,this.mode,0,this.bitCount+u+5)}addBinaryShiftChar(s){let a=this.token,l=this.mode,u=this.bitCount;if(this.mode===ei||this.mode===gr){let p=Ep[l][ro];a=ll(a,p&65535,p>>16),u+=p>>16,l=ro}let d=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,f=new ti(a,l,this.binaryShiftByteCount+1,u+d);return f.binaryShiftByteCount===2078&&(f=f.endBinaryShift(s+1)),f}endBinaryShift(s){if(this.binaryShiftByteCount===0)return this;let a=this.token;return a=YT(a,s-this.binaryShiftByteCount,this.binaryShiftByteCount),new ti(a,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(s){let a=this.bitCount+(Ep[this.mode][s.mode]>>16);return this.binaryShiftByteCount<s.binaryShiftByteCount?a+=ti.calculateBinaryShiftCost(s)-ti.calculateBinaryShiftCost(this):this.binaryShiftByteCount>s.binaryShiftByteCount&&s.binaryShiftByteCount>0&&(a+=10),a<=s.bitCount}toBitArray(s){let a=[];for(let u=this.endBinaryShift(s.length).token;u!==null;u=u.getPrevious())a.unshift(u);let l=new ce;for(let u of a)u.appendTo(l,s);return l}toString(){return Ee.format("%s bits=%d bytes=%d",XT[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(s){return s.binaryShiftByteCount>62?21:s.binaryShiftByteCount>31?20:s.binaryShiftByteCount>0?10:0}}ti.INITIAL_STATE=new ti(ZT,ro,0,0);function KT(C){let s=Ee.getCharCode(" "),a=Ee.getCharCode("."),l=Ee.getCharCode(",");C[ro][s]=1;let u=Ee.getCharCode("Z"),d=Ee.getCharCode("A");for(let E=d;E<=u;E++)C[ro][E]=E-d+2;C[Cu][s]=1;let f=Ee.getCharCode("z"),p=Ee.getCharCode("a");for(let E=p;E<=f;E++)C[Cu][E]=E-p+2;C[gr][s]=1;let y=Ee.getCharCode("9"),w=Ee.getCharCode("0");for(let E=w;E<=y;E++)C[gr][E]=E-w+2;C[gr][l]=12,C[gr][a]=13;let _=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~","\x7F"];for(let E=0;E<_.length;E++)C[CC][Ee.getCharCode(_[E])]=E;let b=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let E=0;E<b.length;E++)Ee.getCharCode(b[E])>0&&(C[ei][Ee.getCharCode(b[E])]=E);return C}let Ip=KT($.createInt32Array(5,256));class cl{constructor(s){this.text=s}encode(){let s=Ee.getCharCode(" "),a=Ee.getCharCode(`
`),l=wC.singletonList(ti.INITIAL_STATE);for(let d=0;d<this.text.length;d++){let f,p=d+1<this.text.length?this.text[d+1]:0;switch(this.text[d]){case Ee.getCharCode("\r"):f=p===a?2:0;break;case Ee.getCharCode("."):f=p===s?3:0;break;case Ee.getCharCode(","):f=p===s?4:0;break;case Ee.getCharCode(":"):f=p===s?5:0;break;default:f=0}f>0?(l=cl.updateStateListForPair(l,d,f),d++):l=this.updateStateListForChar(l,d)}return wC.min(l,(d,f)=>d.getBitCount()-f.getBitCount()).toBitArray(this.text)}updateStateListForChar(s,a){let l=[];for(let u of s)this.updateStateForChar(u,a,l);return cl.simplifyStates(l)}updateStateForChar(s,a,l){let u=this.text[a]&255,d=Ip[s.getMode()][u]>0,f=null;for(let p=0;p<=ei;p++){let y=Ip[p][u];if(y>0){if(f==null&&(f=s.endBinaryShift(a)),!d||p===s.getMode()||p===gr){let w=f.latchAndAppend(p,y);l.push(w)}if(!d&&_C[s.getMode()][p]>=0){let w=f.shiftAndAppend(p,y);l.push(w)}}}if(s.getBinaryShiftByteCount()>0||Ip[s.getMode()][u]===0){let p=s.addBinaryShiftChar(a);l.push(p)}}static updateStateListForPair(s,a,l){let u=[];for(let d of s)this.updateStateForPair(d,a,l,u);return this.simplifyStates(u)}static updateStateForPair(s,a,l,u){let d=s.endBinaryShift(a);if(u.push(d.latchAndAppend(ei,l)),s.getMode()!==ei&&u.push(d.shiftAndAppend(ei,l)),l===3||l===4){let f=d.latchAndAppend(gr,16-l).latchAndAppend(gr,1);u.push(f)}if(s.getBinaryShiftByteCount()>0){let f=s.addBinaryShiftChar(a).addBinaryShiftChar(a+1);u.push(f)}}static simplifyStates(s){let a=[];for(let l of s){let u=!0;for(let d of a){if(d.isBetterThanOrEqualTo(l)){u=!1;break}l.isBetterThanOrEqualTo(d)&&(a=a.filter(f=>f!==d))}u&&a.push(l)}return a}}class tt{constructor(){}static encodeBytes(s){return tt.encode(s,tt.DEFAULT_EC_PERCENT,tt.DEFAULT_AZTEC_LAYERS)}static encode(s,a,l){let u=new cl(s).encode(),d=W.truncDivision(u.getSize()*a,100)+11,f=u.getSize()+d,p,y,w,_,b;if(l!==tt.DEFAULT_AZTEC_LAYERS){if(p=l<0,y=Math.abs(l),y>(p?tt.MAX_NB_BITS_COMPACT:tt.MAX_NB_BITS))throw new m(Ee.format("Illegal value %s for layers",l));w=tt.totalBitsInLayer(y,p),_=tt.WORD_SIZE[y];let V=w-w%_;if(b=tt.stuffBits(u,_),b.getSize()+d>V)throw new m("Data to large for user specified layer");if(p&&b.getSize()>_*64)throw new m("Data to large for user specified layer")}else{_=0,b=null;for(let V=0;;V++){if(V>tt.MAX_NB_BITS)throw new m("Data too large for an Aztec code");if(p=V<=3,y=p?V+1:V,w=tt.totalBitsInLayer(y,p),f>w)continue;(b==null||_!==tt.WORD_SIZE[y])&&(_=tt.WORD_SIZE[y],b=tt.stuffBits(u,_));let ze=w-w%_;if(!(p&&b.getSize()>_*64)&&b.getSize()+d<=ze)break}}let E=tt.generateCheckWords(b,w,_),D=b.getSize()/_,T=tt.generateModeMessage(p,y,D),O=(p?11:14)+y*4,k=new Int32Array(O),F;if(p){F=O;for(let V=0;V<k.length;V++)k[V]=V}else{F=O+1+2*W.truncDivision(W.truncDivision(O,2)-1,15);let V=W.truncDivision(O,2),ze=W.truncDivision(F,2);for(let Ne=0;Ne<V;Ne++){let qn=Ne+W.truncDivision(Ne,15);k[V-Ne-1]=ze-qn-1,k[V+Ne]=ze+qn+1}}let q=new ln(F);for(let V=0,ze=0;V<y;V++){let Ne=(y-V)*4+(p?9:12);for(let qn=0;qn<Ne;qn++){let kr=qn*2;for(let Yn=0;Yn<2;Yn++)E.get(ze+kr+Yn)&&q.set(k[V*2+Yn],k[V*2+qn]),E.get(ze+Ne*2+kr+Yn)&&q.set(k[V*2+qn],k[O-1-V*2-Yn]),E.get(ze+Ne*4+kr+Yn)&&q.set(k[O-1-V*2-Yn],k[O-1-V*2-qn]),E.get(ze+Ne*6+kr+Yn)&&q.set(k[O-1-V*2-qn],k[V*2+Yn])}ze+=Ne*8}if(tt.drawModeMessage(q,p,F,T),p)tt.drawBullsEye(q,W.truncDivision(F,2),5);else{tt.drawBullsEye(q,W.truncDivision(F,2),7);for(let V=0,ze=0;V<W.truncDivision(O,2)-1;V+=15,ze+=16)for(let Ne=W.truncDivision(F,2)&1;Ne<F;Ne+=2)q.set(W.truncDivision(F,2)-ze,Ne),q.set(W.truncDivision(F,2)+ze,Ne),q.set(Ne,W.truncDivision(F,2)-ze),q.set(Ne,W.truncDivision(F,2)+ze)}let re=new yC;return re.setCompact(p),re.setSize(F),re.setLayers(y),re.setCodeWords(D),re.setMatrix(q),re}static drawBullsEye(s,a,l){for(let u=0;u<l;u+=2)for(let d=a-u;d<=a+u;d++)s.set(d,a-u),s.set(d,a+u),s.set(a-u,d),s.set(a+u,d);s.set(a-l,a-l),s.set(a-l+1,a-l),s.set(a-l,a-l+1),s.set(a+l,a-l),s.set(a+l,a-l+1),s.set(a+l,a+l-1)}static generateModeMessage(s,a,l){let u=new ce;return s?(u.appendBits(a-1,2),u.appendBits(l-1,6),u=tt.generateCheckWords(u,28,4)):(u.appendBits(a-1,5),u.appendBits(l-1,11),u=tt.generateCheckWords(u,40,4)),u}static drawModeMessage(s,a,l,u){let d=W.truncDivision(l,2);if(a)for(let f=0;f<7;f++){let p=d-3+f;u.get(f)&&s.set(p,d-5),u.get(f+7)&&s.set(d+5,p),u.get(20-f)&&s.set(p,d+5),u.get(27-f)&&s.set(d-5,p)}else for(let f=0;f<10;f++){let p=d-5+f+W.truncDivision(f,5);u.get(f)&&s.set(p,d-7),u.get(f+10)&&s.set(d+7,p),u.get(29-f)&&s.set(p,d+7),u.get(39-f)&&s.set(d-7,p)}}static generateCheckWords(s,a,l){let u=s.getSize()/l,d=new _p(tt.getGF(l)),f=W.truncDivision(a,l),p=tt.bitsToWords(s,l,f);d.encode(p,f-u);let y=a%l,w=new ce;w.appendBits(0,y);for(let _ of Array.from(p))w.appendBits(_,l);return w}static bitsToWords(s,a,l){let u=new Int32Array(l),d,f;for(d=0,f=s.getSize()/a;d<f;d++){let p=0;for(let y=0;y<a;y++)p|=s.get(d*a+y)?1<<a-y-1:0;u[d]=p}return u}static getGF(s){switch(s){case 4:return at.AZTEC_PARAM;case 6:return at.AZTEC_DATA_6;case 8:return at.AZTEC_DATA_8;case 10:return at.AZTEC_DATA_10;case 12:return at.AZTEC_DATA_12;default:throw new m("Unsupported word size "+s)}}static stuffBits(s,a){let l=new ce,u=s.getSize(),d=(1<<a)-2;for(let f=0;f<u;f+=a){let p=0;for(let y=0;y<a;y++)(f+y>=u||s.get(f+y))&&(p|=1<<a-1-y);(p&d)===d?(l.appendBits(p&d,a),f--):p&d?l.appendBits(p,a):(l.appendBits(p|1,a),f--)}return l}static totalBitsInLayer(s,a){return((a?88:112)+16*s)*s}}tt.DEFAULT_EC_PERCENT=33,tt.DEFAULT_AZTEC_LAYERS=0,tt.MAX_NB_BITS=32,tt.MAX_NB_BITS_COMPACT=4,tt.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class _u{encode(s,a,l,u){return this.encodeWithHints(s,a,l,u,null)}encodeWithHints(s,a,l,u,d){let f=xp.ISO_8859_1,p=tt.DEFAULT_EC_PERCENT,y=tt.DEFAULT_AZTEC_LAYERS;return d!=null&&(d.has(Jt.CHARACTER_SET)&&(f=mC.forName(d.get(Jt.CHARACTER_SET).toString())),d.has(Jt.ERROR_CORRECTION)&&(p=W.parseInt(d.get(Jt.ERROR_CORRECTION).toString())),d.has(Jt.AZTEC_LAYERS)&&(y=W.parseInt(d.get(Jt.AZTEC_LAYERS).toString()))),_u.encodeLayers(s,a,l,u,f,p,y)}static encodeLayers(s,a,l,u,d,f,p){if(a!==we.AZTEC)throw new m("Can only encode AZTEC, but got "+a);let y=tt.encode(Ee.getBytes(s,d),f,p);return _u.renderResult(y,l,u)}static renderResult(s,a,l){let u=s.getMatrix();if(u==null)throw new vi;let d=u.getWidth(),f=u.getHeight(),p=Math.max(a,d),y=Math.max(l,f),w=Math.min(p/d,y/f),_=(p-d*w)/2,b=(y-f*w)/2,E=new ln(p,y);for(let D=0,T=b;D<f;D++,T+=w)for(let O=0,k=_;O<d;O++,k+=w)u.get(O,D)&&E.setRegion(k,T,w,w);return E}}e.AbstractExpandedDecoder=up,e.ArgumentException=g,e.ArithmeticException=rp,e.AztecCode=yC,e.AztecCodeReader=uu,e.AztecCodeWriter=_u,e.AztecDecoder=ip,e.AztecDetector=Jw,e.AztecDetectorResult=Qw,e.AztecEncoder=tt,e.AztecHighLevelEncoder=cl,e.AztecPoint=Bn,e.BarcodeFormat=we,e.Binarizer=I,e.BinaryBitmap=v,e.BitArray=ce,e.BitMatrix=ln,e.BitSource=pp,e.BrowserAztecCodeReader=gT,e.BrowserBarcodeReader=ET,e.BrowserCodeReader=Po,e.BrowserDatamatrixCodeReader=ST,e.BrowserMultiFormatReader=UT,e.BrowserPDF417Reader=jT,e.BrowserQRCodeReader=HT,e.BrowserQRCodeSvgWriter=WT,e.CharacterSetECI=G,e.ChecksumException=x,e.Code128Reader=te,e.Code39Reader=sp,e.DataMatrixDecodedBitStreamParser=eo,e.DataMatrixReader=pu,e.DecodeHintType=ge,e.DecoderResult=Ka,e.DefaultGridSampler=Kw,e.DetectorResult=lu,e.EAN13Reader=du,e.EncodeHintType=Jt,e.Exception=h,e.FormatException=H,e.GenericGF=at,e.GenericGFPoly=Gn,e.GlobalHistogramBinarizer=cn,e.GridSampler=op,e.GridSamplerInstance=Qi,e.HTMLCanvasElementLuminanceSource=Zi,e.HybridBinarizer=Pe,e.ITFReader=wt,e.IllegalArgumentException=m,e.IllegalStateException=vi,e.InvertedLuminanceSource=Xi,e.LuminanceSource=Qa,e.MathUtils=et,e.MultiFormatOneDReader=Ds,e.MultiFormatReader=hC,e.MultiFormatWriter=GT,e.NotFoundException=U,e.OneDReader=$t,e.PDF417DecodedBitStreamParser=B,e.PDF417DecoderErrorCorrection=aC,e.PDF417Reader=_n,e.PDF417ResultMetadata=uC,e.PerspectiveTransform=Mr,e.PlanarYUVLuminanceSource=$T,e.QRCodeByteMatrix=yu,e.QRCodeDataMask=pr,e.QRCodeDecodedBitStreamParser=oC,e.QRCodeDecoderErrorCorrectionLevel=bt,e.QRCodeDecoderFormatInformation=Pn,e.QRCodeEncoder=Tt,e.QRCodeEncoderQRCode=wu,e.QRCodeMaskUtil=As,e.QRCodeMatrixUtil=Ce,e.QRCodeMode=me,e.QRCodeReader=to,e.QRCodeVersion=he,e.QRCodeWriter=gC,e.RGBLuminanceSource=vp,e.RSS14Reader=Bt,e.RSSExpandedReader=z,e.ReaderException=Cp,e.ReedSolomonDecoder=tl,e.ReedSolomonEncoder=_p,e.ReedSolomonException=el,e.Result=Fn,e.ResultMetadataType=un,e.ResultPoint=ue,e.StringUtils=Ee,e.UnsupportedOperationException=rr,e.VideoInputDevice=Yw,e.WhiteRectangleDetector=cu,e.WriterException=Et,e.ZXingArrays=$,e.ZXingCharset=mC,e.ZXingInteger=W,e.ZXingStandardCharsets=xp,e.ZXingStringBuilder=yt,e.ZXingStringEncoding=On,e.ZXingSystem=A,e.createAbstractExpandedDecoder=iC,Object.defineProperty(e,"__esModule",{value:!0})})});function IC(e,n){return Object.is(e,n)}var en=null,xu=!1,bu=1,xi=Symbol("SIGNAL");function $e(e){let n=en;return en=e,n}function SC(){return en}var dl={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Mp(e){if(xu)throw new Error("");if(en===null)return;en.consumerOnSignalRead(e);let n=en.nextProducerIndex++;if(Du(en),n<en.producerNode.length&&en.producerNode[n]!==e&&ul(en)){let t=en.producerNode[n];Su(t,en.producerIndexOfThis[n])}en.producerNode[n]!==e&&(en.producerNode[n]=e,en.producerIndexOfThis[n]=ul(en)?MC(e,en,n):0),en.producerLastReadVersion[n]=e.version}function lM(){bu++}function DC(e){if(!(ul(e)&&!e.dirty)&&!(!e.dirty&&e.lastCleanEpoch===bu)){if(!e.producerMustRecompute(e)&&!Op(e)){e.dirty=!1,e.lastCleanEpoch=bu;return}e.producerRecomputeValue(e),e.dirty=!1,e.lastCleanEpoch=bu}}function AC(e){if(e.liveConsumerNode===void 0)return;let n=xu;xu=!0;try{for(let t of e.liveConsumerNode)t.dirty||cM(t)}finally{xu=n}}function TC(){return en?.consumerAllowSignalWrites!==!1}function cM(e){e.dirty=!0,AC(e),e.consumerMarkedDirty?.(e)}function Iu(e){return e&&(e.nextProducerIndex=0),$e(e)}function Np(e,n){if($e(n),!(!e||e.producerNode===void 0||e.producerIndexOfThis===void 0||e.producerLastReadVersion===void 0)){if(ul(e))for(let t=e.nextProducerIndex;t<e.producerNode.length;t++)Su(e.producerNode[t],e.producerIndexOfThis[t]);for(;e.producerNode.length>e.nextProducerIndex;)e.producerNode.pop(),e.producerLastReadVersion.pop(),e.producerIndexOfThis.pop()}}function Op(e){Du(e);for(let n=0;n<e.producerNode.length;n++){let t=e.producerNode[n],r=e.producerLastReadVersion[n];if(r!==t.version||(DC(t),r!==t.version))return!0}return!1}function Rp(e){if(Du(e),ul(e))for(let n=0;n<e.producerNode.length;n++)Su(e.producerNode[n],e.producerIndexOfThis[n]);e.producerNode.length=e.producerLastReadVersion.length=e.producerIndexOfThis.length=0,e.liveConsumerNode&&(e.liveConsumerNode.length=e.liveConsumerIndexOfThis.length=0)}function MC(e,n,t){if(NC(e),e.liveConsumerNode.length===0&&OC(e))for(let r=0;r<e.producerNode.length;r++)e.producerIndexOfThis[r]=MC(e.producerNode[r],e,r);return e.liveConsumerIndexOfThis.push(t),e.liveConsumerNode.push(n)-1}function Su(e,n){if(NC(e),e.liveConsumerNode.length===1&&OC(e))for(let r=0;r<e.producerNode.length;r++)Su(e.producerNode[r],e.producerIndexOfThis[r]);let t=e.liveConsumerNode.length-1;if(e.liveConsumerNode[n]=e.liveConsumerNode[t],e.liveConsumerIndexOfThis[n]=e.liveConsumerIndexOfThis[t],e.liveConsumerNode.length--,e.liveConsumerIndexOfThis.length--,n<e.liveConsumerNode.length){let r=e.liveConsumerIndexOfThis[n],i=e.liveConsumerNode[n];Du(i),i.producerIndexOfThis[r]=n}}function ul(e){return e.consumerIsAlwaysLive||(e?.liveConsumerNode?.length??0)>0}function Du(e){e.producerNode??=[],e.producerIndexOfThis??=[],e.producerLastReadVersion??=[]}function NC(e){e.liveConsumerNode??=[],e.liveConsumerIndexOfThis??=[]}function OC(e){return e.producerNode!==void 0}function RC(e){let n=Object.create(uM);n.computation=e;let t=()=>{if(DC(n),Mp(n),n.value===Eu)throw n.error;return n.value};return t[xi]=n,t}var Ap=Symbol("UNSET"),Tp=Symbol("COMPUTING"),Eu=Symbol("ERRORED"),uM=Le(ne({},dl),{value:Ap,dirty:!0,error:null,equal:IC,producerMustRecompute(e){return e.value===Ap||e.value===Tp},producerRecomputeValue(e){if(e.value===Tp)throw new Error("Detected cycle in computations.");let n=e.value;e.value=Tp;let t=Iu(e),r;try{r=e.computation()}catch(i){r=Eu,e.error=i}finally{Np(e,t)}if(n!==Ap&&n!==Eu&&r!==Eu&&e.equal(n,r)){e.value=n;return}e.value=r,e.version++}});function dM(){throw new Error}var PC=dM;function kC(){PC()}function LC(e){PC=e}var fM=null;function FC(e){let n=Object.create(VC);n.value=e;let t=()=>(Mp(n),n.value);return t[xi]=n,t}function Pp(e,n){TC()||kC(),e.equal(e.value,n)||(e.value=n,hM(e))}function BC(e,n){TC()||kC(),Pp(e,n(e.value))}var VC=Le(ne({},dl),{equal:IC,value:void 0});function hM(e){e.version++,lM(),AC(e),fM?.()}function Te(e){return typeof e=="function"}function Os(e){let t=e(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Au=Os(e=>function(t){e(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Vo(e,n){if(e){let t=e.indexOf(n);0<=t&&e.splice(t,1)}}var Vt=class e{constructor(n){this.initialTeardown=n,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let n;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(Te(r))try{r()}catch(o){n=o instanceof Au?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{UC(o)}catch(c){n=n??[],c instanceof Au?n=[...n,...c.errors]:n.push(c)}}if(n)throw new Au(n)}}add(n){var t;if(n&&n!==this)if(this.closed)UC(n);else{if(n instanceof e){if(n.closed||n._hasParent(this))return;n._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(n)}}_hasParent(n){let{_parentage:t}=this;return t===n||Array.isArray(t)&&t.includes(n)}_addParent(n){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(n),t):t?[t,n]:n}_removeParent(n){let{_parentage:t}=this;t===n?this._parentage=null:Array.isArray(t)&&Vo(t,n)}remove(n){let{_finalizers:t}=this;t&&Vo(t,n),n instanceof e&&n._removeParent(this)}};Vt.EMPTY=(()=>{let e=new Vt;return e.closed=!0,e})();var kp=Vt.EMPTY;function Tu(e){return e instanceof Vt||e&&"closed"in e&&Te(e.remove)&&Te(e.add)&&Te(e.unsubscribe)}function UC(e){Te(e)?e():e.unsubscribe()}var Lr={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Rs={setTimeout(e,n,...t){let{delegate:r}=Rs;return r?.setTimeout?r.setTimeout(e,n,...t):setTimeout(e,n,...t)},clearTimeout(e){let{delegate:n}=Rs;return(n?.clearTimeout||clearTimeout)(e)},delegate:void 0};function Mu(e){Rs.setTimeout(()=>{let{onUnhandledError:n}=Lr;if(n)n(e);else throw e})}function fl(){}var jC=Lp("C",void 0,void 0);function HC(e){return Lp("E",void 0,e)}function zC(e){return Lp("N",e,void 0)}function Lp(e,n,t){return{kind:e,value:n,error:t}}var Uo=null;function Ps(e){if(Lr.useDeprecatedSynchronousErrorHandling){let n=!Uo;if(n&&(Uo={errorThrown:!1,error:null}),e(),n){let{errorThrown:t,error:r}=Uo;if(Uo=null,t)throw r}}else e()}function WC(e){Lr.useDeprecatedSynchronousErrorHandling&&Uo&&(Uo.errorThrown=!0,Uo.error=e)}var jo=class extends Vt{constructor(n){super(),this.isStopped=!1,n?(this.destination=n,Tu(n)&&n.add(this)):this.destination=mM}static create(n,t,r){return new ks(n,t,r)}next(n){this.isStopped?Bp(zC(n),this):this._next(n)}error(n){this.isStopped?Bp(HC(n),this):(this.isStopped=!0,this._error(n))}complete(){this.isStopped?Bp(jC,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(n){this.destination.next(n)}_error(n){try{this.destination.error(n)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},pM=Function.prototype.bind;function Fp(e,n){return pM.call(e,n)}var Vp=class{constructor(n){this.partialObserver=n}next(n){let{partialObserver:t}=this;if(t.next)try{t.next(n)}catch(r){Nu(r)}}error(n){let{partialObserver:t}=this;if(t.error)try{t.error(n)}catch(r){Nu(r)}else Nu(n)}complete(){let{partialObserver:n}=this;if(n.complete)try{n.complete()}catch(t){Nu(t)}}},ks=class extends jo{constructor(n,t,r){super();let i;if(Te(n)||!n)i={next:n??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&Lr.useDeprecatedNextContext?(o=Object.create(n),o.unsubscribe=()=>this.unsubscribe(),i={next:n.next&&Fp(n.next,o),error:n.error&&Fp(n.error,o),complete:n.complete&&Fp(n.complete,o)}):i=n}this.destination=new Vp(i)}};function Nu(e){Lr.useDeprecatedSynchronousErrorHandling?WC(e):Mu(e)}function gM(e){throw e}function Bp(e,n){let{onStoppedNotification:t}=Lr;t&&Rs.setTimeout(()=>t(e,n))}var mM={closed:!0,next:fl,error:gM,complete:fl};var Ls=typeof Symbol=="function"&&Symbol.observable||"@@observable";function or(e){return e}function Up(...e){return jp(e)}function jp(e){return e.length===0?or:e.length===1?e[0]:function(t){return e.reduce((r,i)=>i(r),t)}}var Fe=(()=>{class e{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new e;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=wM(t)?t:new ks(t,r,i);return Ps(()=>{let{operator:c,source:h}=this;o.add(c?c.call(o,h):h?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=GC(r),new r((i,o)=>{let c=new ks({next:h=>{try{t(h)}catch(g){o(g),c.unsubscribe()}},error:o,complete:i});this.subscribe(c)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Ls](){return this}pipe(...t){return jp(t)(this)}toPromise(t){return t=GC(t),new t((r,i)=>{let o;this.subscribe(c=>o=c,c=>i(c),()=>r(o))})}}return e.create=n=>new e(n),e})();function GC(e){var n;return(n=e??Lr.Promise)!==null&&n!==void 0?n:Promise}function yM(e){return e&&Te(e.next)&&Te(e.error)&&Te(e.complete)}function wM(e){return e&&e instanceof jo||yM(e)&&Tu(e)}function Hp(e){return Te(e?.lift)}function Ke(e){return n=>{if(Hp(n))return n.lift(function(t){try{return e(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ye(e,n,t,r,i){return new zp(e,n,t,r,i)}var zp=class extends jo{constructor(n,t,r,i,o,c){super(n),this.onFinalize=o,this.shouldUnsubscribe=c,this._next=t?function(h){try{t(h)}catch(g){n.error(g)}}:super._next,this._error=i?function(h){try{i(h)}catch(g){n.error(g)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(h){n.error(h)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((n=this.onFinalize)===null||n===void 0||n.call(this))}}};function Fs(){return Ke((e,n)=>{let t=null;e._refCount++;let r=Ye(n,void 0,void 0,void 0,()=>{if(!e||e._refCount<=0||0<--e._refCount){t=null;return}let i=e._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),n.unsubscribe()});e.subscribe(r),r.closed||(t=e.connect())})}var Bs=class extends Fe{constructor(n,t){super(),this.source=n,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Hp(n)&&(this.lift=n.lift)}_subscribe(n){return this.getSubject().subscribe(n)}getSubject(){let n=this._subject;return(!n||n.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:n}=this;this._subject=this._connection=null,n?.unsubscribe()}connect(){let n=this._connection;if(!n){n=this._connection=new Vt;let t=this.getSubject();n.add(this.source.subscribe(Ye(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),n.closed&&(this._connection=null,n=Vt.EMPTY)}return n}refCount(){return Fs()(this)}};var $C=Os(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var xn=(()=>{class e extends Fe{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Ou(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new $C}next(t){Ps(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Ps(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Ps(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?kp:(this.currentObservers=null,o.push(t),new Vt(()=>{this.currentObservers=null,Vo(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new Fe;return t.source=this,t}}return e.create=(n,t)=>new Ou(n,t),e})(),Ou=class extends xn{constructor(n,t){super(),this.destination=n,this.source=t}next(n){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,n)}error(n){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,n)}complete(){var n,t;(t=(n=this.destination)===null||n===void 0?void 0:n.complete)===null||t===void 0||t.call(n)}_subscribe(n){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(n))!==null&&r!==void 0?r:kp}};var bn=class extends xn{constructor(n){super(),this._value=n}get value(){return this.getValue()}_subscribe(n){let t=super._subscribe(n);return!t.closed&&n.next(this._value),t}getValue(){let{hasError:n,thrownError:t,_value:r}=this;if(n)throw t;return this._throwIfClosed(),r}next(n){super.next(this._value=n)}};var Wp={now(){return(Wp.delegate||Date).now()},delegate:void 0};var Ru=class extends Vt{constructor(n,t){super()}schedule(n,t=0){return this}};var hl={setInterval(e,n,...t){let{delegate:r}=hl;return r?.setInterval?r.setInterval(e,n,...t):setInterval(e,n,...t)},clearInterval(e){let{delegate:n}=hl;return(n?.clearInterval||clearInterval)(e)},delegate:void 0};var Pu=class extends Ru{constructor(n,t){super(n,t),this.scheduler=n,this.work=t,this.pending=!1}schedule(n,t=0){var r;if(this.closed)return this;this.state=n;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(n,t,r=0){return hl.setInterval(n.flush.bind(n,this),r)}recycleAsyncId(n,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&hl.clearInterval(t)}execute(n,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(n,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(n,t){let r=!1,i;try{this.work(n)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:n,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Vo(r,this),n!=null&&(this.id=this.recycleAsyncId(t,n,null)),this.delay=null,super.unsubscribe()}}};var Vs=class e{constructor(n,t=e.now){this.schedulerActionCtor=n,this.now=t}schedule(n,t=0,r){return new this.schedulerActionCtor(this,n).schedule(r,t)}};Vs.now=Wp.now;var ku=class extends Vs{constructor(n,t=Vs.now){super(n,t),this.actions=[],this._active=!1}flush(n){let{actions:t}=this;if(this._active){t.push(n);return}let r;this._active=!0;do if(r=n.execute(n.state,n.delay))break;while(n=t.shift());if(this._active=!1,r){for(;n=t.shift();)n.unsubscribe();throw r}}};var CM=new ku(Pu),qC=CM;var sr=new Fe(e=>e.complete());function Lu(e){return e&&Te(e.schedule)}function YC(e){return e[e.length-1]}function Fu(e){return Te(YC(e))?e.pop():void 0}function io(e){return Lu(YC(e))?e.pop():void 0}function ZC(e,n,t,r){function i(o){return o instanceof t?o:new t(function(c){c(o)})}return new(t||(t=Promise))(function(o,c){function h(v){try{m(r.next(v))}catch(x){c(x)}}function g(v){try{m(r.throw(v))}catch(x){c(x)}}function m(v){v.done?o(v.value):i(v.value).then(h,g)}m((r=r.apply(e,n||[])).next())})}function XC(e){var n=typeof Symbol=="function"&&Symbol.iterator,t=n&&e[n],r=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ho(e){return this instanceof Ho?(this.v=e,this):new Ho(e)}function QC(e,n,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(e,n||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),h("next"),h("throw"),h("return",c),i[Symbol.asyncIterator]=function(){return this},i;function c(A){return function(R){return Promise.resolve(R).then(A,x)}}function h(A,R){r[A]&&(i[A]=function(j){return new Promise(function($,W){o.push([A,j,$,W])>1||g(A,j)})},R&&(i[A]=R(i[A])))}function g(A,R){try{m(r[A](R))}catch(j){I(o[0][3],j)}}function m(A){A.value instanceof Ho?Promise.resolve(A.value.v).then(v,x):I(o[0][2],A)}function v(A){g("next",A)}function x(A){g("throw",A)}function I(A,R){A(R),o.shift(),o.length&&g(o[0][0],o[0][1])}}function KC(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=e[Symbol.asyncIterator],t;return n?n.call(e):(e=typeof XC=="function"?XC(e):e[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=e[o]&&function(c){return new Promise(function(h,g){c=e[o](c),i(h,g,c.done,c.value)})}}function i(o,c,h,g){Promise.resolve(g).then(function(m){o({value:m,done:h})},c)}}var Bu=e=>e&&typeof e.length=="number"&&typeof e!="function";function Vu(e){return Te(e?.then)}function Uu(e){return Te(e[Ls])}function ju(e){return Symbol.asyncIterator&&Te(e?.[Symbol.asyncIterator])}function Hu(e){return new TypeError(`You provided ${e!==null&&typeof e=="object"?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function _M(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var zu=_M();function Wu(e){return Te(e?.[zu])}function Gu(e){return QC(this,arguments,function*(){let t=e.getReader();try{for(;;){let{value:r,done:i}=yield Ho(t.read());if(i)return yield Ho(void 0);yield yield Ho(r)}}finally{t.releaseLock()}})}function $u(e){return Te(e?.getReader)}function Yt(e){if(e instanceof Fe)return e;if(e!=null){if(Uu(e))return vM(e);if(Bu(e))return xM(e);if(Vu(e))return bM(e);if(ju(e))return JC(e);if(Wu(e))return EM(e);if($u(e))return IM(e)}throw Hu(e)}function vM(e){return new Fe(n=>{let t=e[Ls]();if(Te(t.subscribe))return t.subscribe(n);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function xM(e){return new Fe(n=>{for(let t=0;t<e.length&&!n.closed;t++)n.next(e[t]);n.complete()})}function bM(e){return new Fe(n=>{e.then(t=>{n.closed||(n.next(t),n.complete())},t=>n.error(t)).then(null,Mu)})}function EM(e){return new Fe(n=>{for(let t of e)if(n.next(t),n.closed)return;n.complete()})}function JC(e){return new Fe(n=>{SM(e,n).catch(t=>n.error(t))})}function IM(e){return JC(Gu(e))}function SM(e,n){var t,r,i,o;return ZC(this,void 0,void 0,function*(){try{for(t=KC(e);r=yield t.next(),!r.done;){let c=r.value;if(n.next(c),n.closed)return}}catch(c){i={error:c}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}n.complete()})}function Xn(e,n,t,r=0,i=!1){let o=n.schedule(function(){t(),i?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(o),!i)return o}function qu(e,n=0){return Ke((t,r)=>{t.subscribe(Ye(r,i=>Xn(r,e,()=>r.next(i),n),()=>Xn(r,e,()=>r.complete(),n),i=>Xn(r,e,()=>r.error(i),n)))})}function Yu(e,n=0){return Ke((t,r)=>{r.add(e.schedule(()=>t.subscribe(r),n))})}function e_(e,n){return Yt(e).pipe(Yu(n),qu(n))}function t_(e,n){return Yt(e).pipe(Yu(n),qu(n))}function n_(e,n){return new Fe(t=>{let r=0;return n.schedule(function(){r===e.length?t.complete():(t.next(e[r++]),t.closed||this.schedule())})})}function r_(e,n){return new Fe(t=>{let r;return Xn(t,n,()=>{r=e[zu](),Xn(t,n,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(c){t.error(c);return}o?t.complete():t.next(i)},0,!0)}),()=>Te(r?.return)&&r.return()})}function Xu(e,n){if(!e)throw new Error("Iterable cannot be null");return new Fe(t=>{Xn(t,n,()=>{let r=e[Symbol.asyncIterator]();Xn(t,n,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function i_(e,n){return Xu(Gu(e),n)}function o_(e,n){if(e!=null){if(Uu(e))return e_(e,n);if(Bu(e))return n_(e,n);if(Vu(e))return t_(e,n);if(ju(e))return Xu(e,n);if(Wu(e))return r_(e,n);if($u(e))return i_(e,n)}throw Hu(e)}function vt(e,n){return n?o_(e,n):Yt(e)}function Ae(...e){let n=io(e);return vt(e,n)}function Us(e,n){let t=Te(e)?e:()=>e,r=i=>i.error(t());return new Fe(n?i=>n.schedule(r,0,i):r)}function Gp(e){return!!e&&(e instanceof Fe||Te(e.lift)&&Te(e.subscribe))}var bi=Os(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"});function s_(e){return e instanceof Date&&!isNaN(e)}function Be(e,n){return Ke((t,r)=>{let i=0;t.subscribe(Ye(r,o=>{r.next(e.call(n,o,i++))}))})}var{isArray:DM}=Array;function AM(e,n){return DM(n)?e(...n):e(n)}function Zu(e){return Be(n=>AM(e,n))}var{isArray:TM}=Array,{getPrototypeOf:MM,prototype:NM,keys:OM}=Object;function Qu(e){if(e.length===1){let n=e[0];if(TM(n))return{args:n,keys:null};if(RM(n)){let t=OM(n);return{args:t.map(r=>n[r]),keys:t}}}return{args:e,keys:null}}function RM(e){return e&&typeof e=="object"&&MM(e)===NM}function Ku(e,n){return e.reduce((t,r,i)=>(t[r]=n[i],t),{})}function Ju(...e){let n=io(e),t=Fu(e),{args:r,keys:i}=Qu(e);if(r.length===0)return vt([],n);let o=new Fe(PM(r,n,i?c=>Ku(i,c):or));return t?o.pipe(Zu(t)):o}function PM(e,n,t=or){return r=>{a_(n,()=>{let{length:i}=e,o=new Array(i),c=i,h=i;for(let g=0;g<i;g++)a_(n,()=>{let m=vt(e[g],n),v=!1;m.subscribe(Ye(r,x=>{o[g]=x,v||(v=!0,h--),h||r.next(t(o.slice()))},()=>{--c||r.complete()}))},r)},r)}}function a_(e,n,t){e?Xn(t,e,n):n()}function l_(e,n,t,r,i,o,c,h){let g=[],m=0,v=0,x=!1,I=()=>{x&&!g.length&&!m&&n.complete()},A=j=>m<r?R(j):g.push(j),R=j=>{o&&n.next(j),m++;let $=!1;Yt(t(j,v++)).subscribe(Ye(n,W=>{i?.(W),o?A(W):n.next(W)},()=>{$=!0},void 0,()=>{if($)try{for(m--;g.length&&m<r;){let W=g.shift();c?Xn(n,c,()=>R(W)):R(W)}I()}catch(W){n.error(W)}}))};return e.subscribe(Ye(n,A,()=>{x=!0,I()})),()=>{h?.()}}function tn(e,n,t=1/0){return Te(n)?tn((r,i)=>Be((o,c)=>n(r,o,i,c))(Yt(e(r,i))),t):(typeof n=="number"&&(t=n),Ke((r,i)=>l_(r,i,e,t)))}function $p(e=1/0){return tn(or,e)}function c_(){return $p(1)}function js(...e){return c_()(vt(e,io(e)))}function ed(e){return new Fe(n=>{Yt(e()).subscribe(n)})}function qp(...e){let n=Fu(e),{args:t,keys:r}=Qu(e),i=new Fe(o=>{let{length:c}=t;if(!c){o.complete();return}let h=new Array(c),g=c,m=c;for(let v=0;v<c;v++){let x=!1;Yt(t[v]).subscribe(Ye(o,I=>{x||(x=!0,m--),h[v]=I},()=>g--,void 0,()=>{(!g||!x)&&(m||o.next(r?Ku(r,h):h),o.complete())}))}});return n?i.pipe(Zu(n)):i}function Yp(e=0,n,t=qC){let r=-1;return n!=null&&(Lu(n)?t=n:r=n),new Fe(i=>{let o=s_(e)?+e-t.now():e;o<0&&(o=0);let c=0;return t.schedule(function(){i.closed||(i.next(c++),0<=r?this.schedule(void 0,r):i.complete())},o)})}function mr(e,n){return Ke((t,r)=>{let i=0;t.subscribe(Ye(r,o=>e.call(n,o,i++)&&r.next(o)))})}function yr(e){return Ke((n,t)=>{let r=null,i=!1,o;r=n.subscribe(Ye(t,void 0,void 0,c=>{o=Yt(e(c,yr(e)(n))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function u_(e,n,t,r,i){return(o,c)=>{let h=t,g=n,m=0;o.subscribe(Ye(c,v=>{let x=m++;g=h?e(g,v,x):(h=!0,v),r&&c.next(g)},i&&(()=>{h&&c.next(g),c.complete()})))}}function zo(e,n){return Te(n)?tn(e,n,1):tn(e,1)}function oo(e){return Ke((n,t)=>{let r=!1;n.subscribe(Ye(t,i=>{r=!0,t.next(i)},()=>{r||t.next(e),t.complete()}))})}function Ei(e){return e<=0?()=>sr:Ke((n,t)=>{let r=0;n.subscribe(Ye(t,i=>{++r<=e&&(t.next(i),e<=r&&t.complete())}))})}function Xp(e){return Be(()=>e)}function td(e=kM){return Ke((n,t)=>{let r=!1;n.subscribe(Ye(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(e())))})}function kM(){return new bi}function Hs(e){return Ke((n,t)=>{try{n.subscribe(t)}finally{t.add(e)}})}function Fr(e,n){let t=arguments.length>=2;return r=>r.pipe(e?mr((i,o)=>e(i,o,r)):or,Ei(1),t?oo(n):td(()=>new bi))}function zs(e){return e<=0?()=>sr:Ke((n,t)=>{let r=[];n.subscribe(Ye(t,i=>{r.push(i),e<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Zp(e,n){let t=arguments.length>=2;return r=>r.pipe(e?mr((i,o)=>e(i,o,r)):or,zs(1),t?oo(n):td(()=>new bi))}function Qp(e,n){return Ke(u_(e,n,arguments.length>=2,!0))}function Kp(...e){let n=io(e);return Ke((t,r)=>{(n?js(e,t,n):js(e,t)).subscribe(r)})}function wr(e,n){return Ke((t,r)=>{let i=null,o=0,c=!1,h=()=>c&&!i&&r.complete();t.subscribe(Ye(r,g=>{i?.unsubscribe();let m=0,v=o++;Yt(e(g,v)).subscribe(i=Ye(r,x=>r.next(n?n(g,x,v,m++):x),()=>{i=null,h()}))},()=>{c=!0,h()}))})}function Jp(e){return Ke((n,t)=>{Yt(e).subscribe(Ye(t,()=>t.complete(),fl)),!t.closed&&n.subscribe(t)})}function nn(e,n,t){let r=Te(e)||n||t?{next:e,error:n,complete:t}:e;return r?Ke((i,o)=>{var c;(c=r.subscribe)===null||c===void 0||c.call(r);let h=!0;i.subscribe(Ye(o,g=>{var m;(m=r.next)===null||m===void 0||m.call(r,g),o.next(g)},()=>{var g;h=!1,(g=r.complete)===null||g===void 0||g.call(r),o.complete()},g=>{var m;h=!1,(m=r.error)===null||m===void 0||m.call(r,g),o.error(g)},()=>{var g,m;h&&((g=r.unsubscribe)===null||g===void 0||g.call(r)),(m=r.finalize)===null||m===void 0||m.call(r)}))}):or}var K_="https://g.co/ng/security#xss",de=class extends Error{constructor(n,t){super(Hd(n,t)),this.code=n}};function Hd(e,n){return`${`NG0${Math.abs(e)}`}${n?": "+n:""}`}function Tl(e){return{toString:e}.toString()}var nd="__parameters__";function LM(e){return function(...t){if(e){let r=e(...t);for(let i in r)this[i]=r[i]}}}function J_(e,n,t){return Tl(()=>{let r=LM(n);function i(...o){if(this instanceof i)return r.apply(this,o),this;let c=new i(...o);return h.annotation=c,h;function h(g,m,v){let x=g.hasOwnProperty(nd)?g[nd]:Object.defineProperty(g,nd,{value:[]})[nd];for(;x.length<=v;)x.push(null);return(x[v]=x[v]||[]).push(c),g}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=e,i.annotationCls=i,i})}var mg=globalThis;function xt(e){for(let n in e)if(e[n]===xt)return n;throw Error("Could not find renamed property on target object.")}function FM(e,n){for(let t in n)n.hasOwnProperty(t)&&!e.hasOwnProperty(t)&&(e[t]=n[t])}function Zn(e){if(typeof e=="string")return e;if(Array.isArray(e))return"["+e.map(Zn).join(", ")+"]";if(e==null)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;let n=e.toString();if(n==null)return""+n;let t=n.indexOf(`
`);return t===-1?n:n.substring(0,t)}function yg(e,n){return e==null||e===""?n===null?"":n:n==null||n===""?e:e+" "+n}var BM=xt({__forward_ref__:xt});function Mi(e){return e.__forward_ref__=Mi,e.toString=function(){return Zn(this())},e}function Vn(e){return ev(e)?e():e}function ev(e){return typeof e=="function"&&e.hasOwnProperty(BM)&&e.__forward_ref__===Mi}function pe(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function Ni(e){return{providers:e.providers||[],imports:e.imports||[]}}function zd(e){return d_(e,nv)||d_(e,rv)}function tv(e){return zd(e)!==null}function d_(e,n){return e.hasOwnProperty(n)?e[n]:null}function VM(e){let n=e&&(e[nv]||e[rv]);return n||null}function f_(e){return e&&(e.hasOwnProperty(h_)||e.hasOwnProperty(UM))?e[h_]:null}var nv=xt({\u0275prov:xt}),h_=xt({\u0275inj:xt}),rv=xt({ngInjectableDef:xt}),UM=xt({ngInjectorDef:xt}),ve=class{constructor(n,t){this._desc=n,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=pe({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function iv(e){return e&&!!e.\u0275providers}var jM=xt({\u0275cmp:xt}),HM=xt({\u0275dir:xt}),zM=xt({\u0275pipe:xt}),WM=xt({\u0275mod:xt}),yd=xt({\u0275fac:xt}),ml=xt({__NG_ELEMENT_ID__:xt}),p_=xt({__NG_ENV_ID__:xt});function D0(e){return typeof e=="string"?e:e==null?"":String(e)}function GM(e){return typeof e=="function"?e.name||e.toString():typeof e=="object"&&e!=null&&typeof e.type=="function"?e.type.name||e.type.toString():D0(e)}function $M(e,n){let t=n?`. Dependency path: ${n.join(" > ")} > ${e}`:"";throw new de(-200,e)}function A0(e,n){throw new de(-201,!1)}var je=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}(je||{}),wg;function ov(){return wg}function Cr(e){let n=wg;return wg=e,n}function sv(e,n,t){let r=zd(e);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&je.Optional)return null;if(n!==void 0)return n;A0(e,"Injector")}var qM={},yl=qM,Cg="__NG_DI_FLAG__",wd="ngTempTokenPath",YM="ngTokenPath",XM=/\n/gm,ZM="\u0275",g_="__source",qs;function QM(){return qs}function so(e){let n=qs;return qs=e,n}function KM(e,n=je.Default){if(qs===void 0)throw new de(-203,!1);return qs===null?sv(e,void 0,n):qs.get(e,n&je.Optional?null:void 0,n)}function He(e,n=je.Default){return(ov()||KM)(Vn(e),n)}function K(e,n=je.Default){return He(e,Wd(n))}function Wd(e){return typeof e>"u"||typeof e=="number"?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function _g(e){let n=[];for(let t=0;t<e.length;t++){let r=Vn(e[t]);if(Array.isArray(r)){if(r.length===0)throw new de(900,!1);let i,o=je.Default;for(let c=0;c<r.length;c++){let h=r[c],g=JM(h);typeof g=="number"?g===-1?i=h.token:o|=g:i=h}n.push(He(i,o))}else n.push(He(r))}return n}function av(e,n){return e[Cg]=n,e.prototype[Cg]=n,e}function JM(e){return e[Cg]}function eN(e,n,t,r){let i=e[wd];throw n[g_]&&i.unshift(n[g_]),e.message=tN(`
`+e.message,i,t,r),e[YM]=i,e[wd]=null,e}function tN(e,n,t,r=null){e=e&&e.charAt(0)===`
`&&e.charAt(1)==ZM?e.slice(2):e;let i=Zn(n);if(Array.isArray(n))i=n.map(Zn).join(" -> ");else if(typeof n=="object"){let o=[];for(let c in n)if(n.hasOwnProperty(c)){let h=n[c];o.push(c+":"+(typeof h=="string"?JSON.stringify(h):Zn(h)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${e.replace(XM,`
  `)}`}var T0=av(J_("Optional"),8);var lv=av(J_("SkipSelf"),4);function Xs(e,n){let t=e.hasOwnProperty(yd);return t?e[yd]:null}function nN(e,n,t){if(e.length!==n.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],o=n[r];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}function rN(e){return e.flat(Number.POSITIVE_INFINITY)}function M0(e,n){e.forEach(t=>Array.isArray(t)?M0(t,n):n(t))}function cv(e,n,t){n>=e.length?e.push(t):e.splice(n,0,t)}function Cd(e,n){return n>=e.length-1?e.pop():e.splice(n,1)[0]}function iN(e,n,t,r){let i=e.length;if(i==n)e.push(t,r);else if(i===1)e.push(r,e[0]),e[0]=t;else{for(i--,e.push(e[i-1],e[i]);i>n;){let o=i-2;e[i]=e[o],i--}e[n]=t,e[n+1]=r}}function N0(e,n,t){let r=Ml(e,n);return r>=0?e[r|1]=t:(r=~r,iN(e,r,n,t)),r}function eg(e,n){let t=Ml(e,n);if(t>=0)return e[t|1]}function Ml(e,n){return oN(e,n,1)}function oN(e,n,t){let r=0,i=e.length>>t;for(;i!==r;){let o=r+(i-r>>1),c=e[o<<t];if(n===c)return o<<t;c>n?i=o:r=o+1}return~(i<<t)}var Zs={},Un=[],Go=new ve(""),uv=new ve("",-1),dv=new ve(""),_d=class{get(n,t=yl){if(t===yl){let r=new Error(`NullInjectorError: No provider for ${Zn(n)}!`);throw r.name="NullInjectorError",r}return t}},fv=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}(fv||{}),ii=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}(ii||{}),lo=function(e){return e[e.None=0]="None",e[e.SignalBased=1]="SignalBased",e[e.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",e}(lo||{});function sN(e,n,t){let r=e.length;for(;;){let i=e.indexOf(n,t);if(i===-1)return i;if(i===0||e.charCodeAt(i-1)<=32){let o=n.length;if(i+o===r||e.charCodeAt(i+o)<=32)return i}t=i+1}}function vg(e,n,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],c=t[r++],h=t[r++];e.setAttribute(n,c,h,o)}else{let o=i,c=t[++r];lN(o)?e.setProperty(n,o,c):e.setAttribute(n,o,c),r++}}return r}function aN(e){return e===3||e===4||e===6}function lN(e){return e.charCodeAt(0)===64}function wl(e,n){if(!(n===null||n.length===0))if(e===null||e.length===0)e=n.slice();else{let t=-1;for(let r=0;r<n.length;r++){let i=n[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?m_(e,t,i,null,n[++r]):m_(e,t,i,null,null))}}return e}function m_(e,n,t,r,i){let o=0,c=e.length;if(n===-1)c=-1;else for(;o<e.length;){let h=e[o++];if(typeof h=="number"){if(h===n){c=-1;break}else if(h>n){c=o-1;break}}}for(;o<e.length;){let h=e[o];if(typeof h=="number")break;if(h===t){if(r===null){i!==null&&(e[o+1]=i);return}else if(r===e[o+1]){e[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}c!==-1&&(e.splice(c,0,n),o=c+1),e.splice(o++,0,t),r!==null&&e.splice(o++,0,r),i!==null&&e.splice(o++,0,i)}var hv="ng-template";function cN(e,n,t,r){let i=0;if(r){for(;i<n.length&&typeof n[i]=="string";i+=2)if(n[i]==="class"&&sN(n[i+1].toLowerCase(),t,0)!==-1)return!0}else if(O0(e))return!1;if(i=n.indexOf(1,i),i>-1){let o;for(;++i<n.length&&typeof(o=n[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function O0(e){return e.type===4&&e.value!==hv}function uN(e,n,t){let r=e.type===4&&!t?hv:e.value;return n===r}function dN(e,n,t){let r=4,i=e.attrs,o=i!==null?pN(i):0,c=!1;for(let h=0;h<n.length;h++){let g=n[h];if(typeof g=="number"){if(!c&&!Br(r)&&!Br(g))return!1;if(c&&Br(g))continue;c=!1,r=g|r&1;continue}if(!c)if(r&4){if(r=2|r&1,g!==""&&!uN(e,g,t)||g===""&&n.length===1){if(Br(r))return!1;c=!0}}else if(r&8){if(i===null||!cN(e,i,g,t)){if(Br(r))return!1;c=!0}}else{let m=n[++h],v=fN(g,i,O0(e),t);if(v===-1){if(Br(r))return!1;c=!0;continue}if(m!==""){let x;if(v>o?x="":x=i[v+1].toLowerCase(),r&2&&m!==x){if(Br(r))return!1;c=!0}}}}return Br(r)||c}function Br(e){return(e&1)===0}function fN(e,n,t,r){if(n===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<n.length;){let c=n[i];if(c===e)return i;if(c===3||c===6)o=!0;else if(c===1||c===2){let h=n[++i];for(;typeof h=="string";)h=n[++i];continue}else{if(c===4)break;if(c===0){i+=4;continue}}i+=o?1:2}return-1}else return gN(n,e)}function hN(e,n,t=!1){for(let r=0;r<n.length;r++)if(dN(e,n[r],t))return!0;return!1}function pN(e){for(let n=0;n<e.length;n++){let t=e[n];if(aN(t))return n}return e.length}function gN(e,n){let t=e.indexOf(4);if(t>-1)for(t++;t<e.length;){let r=e[t];if(typeof r=="number")return-1;if(r===n)return t;t++}return-1}function y_(e,n){return e?":not("+n.trim()+")":n}function mN(e){let n=e[0],t=1,r=2,i="",o=!1;for(;t<e.length;){let c=e[t];if(typeof c=="string")if(r&2){let h=e[++t];i+="["+c+(h.length>0?'="'+h+'"':"")+"]"}else r&8?i+="."+c:r&4&&(i+=" "+c);else i!==""&&!Br(c)&&(n+=y_(o,i),i=""),r=c,o=o||!Br(r);t++}return i!==""&&(n+=y_(o,i)),n}function yN(e){return e.map(mN).join(",")}function wN(e){let n=[],t=[],r=1,i=2;for(;r<e.length;){let o=e[r];if(typeof o=="string")i===2?o!==""&&n.push(o,e[++r]):i===8&&t.push(o);else{if(!Br(i))break;i=o}r++}return{attrs:n,classes:t}}function ie(e){return Tl(()=>{let n=wv(e),t=Le(ne({},n),{decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===fv.OnPush,directiveDefs:null,pipeDefs:null,dependencies:n.standalone&&e.dependencies||null,getStandaloneInjector:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||ii.Emulated,styles:e.styles||Un,_:null,schemas:e.schemas||null,tView:null,id:""});Cv(t);let r=e.dependencies;return t.directiveDefs=C_(r,!1),t.pipeDefs=C_(r,!0),t.id=vN(t),t})}function CN(e){return $o(e)||pv(e)}function _N(e){return e!==null}function Oi(e){return Tl(()=>({type:e.type,bootstrap:e.bootstrap||Un,declarations:e.declarations||Un,imports:e.imports||Un,exports:e.exports||Un,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function w_(e,n){if(e==null)return Zs;let t={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r],o,c,h=lo.None;Array.isArray(i)?(h=i[0],o=i[1],c=i[2]??o):(o=i,c=i),n?(t[o]=h!==lo.None?[r,h]:r,n[o]=c):t[o]=r}return t}function rn(e){return Tl(()=>{let n=wv(e);return Cv(n),n})}function $o(e){return e[jM]||null}function pv(e){return e[HM]||null}function gv(e){return e[zM]||null}function mv(e){let n=$o(e)||pv(e)||gv(e);return n!==null?n.standalone:!1}function yv(e,n){let t=e[WM]||null;if(!t&&n===!0)throw new Error(`Type ${Zn(e)} does not have '\u0275mod' property.`);return t}function wv(e){let n={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:n,inputTransforms:null,inputConfig:e.inputs||Zs,exportAs:e.exportAs||null,standalone:e.standalone===!0,signals:e.signals===!0,selectors:e.selectors||Un,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:w_(e.inputs,n),outputs:w_(e.outputs),debugInfo:null}}function Cv(e){e.features?.forEach(n=>n(e))}function C_(e,n){if(!e)return null;let t=n?gv:CN;return()=>(typeof e=="function"?e():e).map(r=>t(r)).filter(_N)}function vN(e){let n=0,t=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,e.consts,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery].join("|");for(let i of t)n=Math.imul(31,n)+i.charCodeAt(0)<<0;return n+=2147483648,"c"+n}function oa(e){return{\u0275providers:e}}function xN(...e){return{\u0275providers:_v(!0,e),\u0275fromNgModule:!0}}function _v(e,...n){let t=[],r=new Set,i,o=c=>{t.push(c)};return M0(n,c=>{let h=c;xg(h,o,[],r)&&(i||=[],i.push(h))}),i!==void 0&&vv(i,o),t}function vv(e,n){for(let t=0;t<e.length;t++){let{ngModule:r,providers:i}=e[t];R0(i,o=>{n(o,r)})}}function xg(e,n,t,r){if(e=Vn(e),!e)return!1;let i=null,o=f_(e),c=!o&&$o(e);if(!o&&!c){let g=e.ngModule;if(o=f_(g),o)i=g;else return!1}else{if(c&&!c.standalone)return!1;i=e}let h=r.has(i);if(c){if(h)return!1;if(r.add(i),c.dependencies){let g=typeof c.dependencies=="function"?c.dependencies():c.dependencies;for(let m of g)xg(m,n,t,r)}}else if(o){if(o.imports!=null&&!h){r.add(i);let m;try{M0(o.imports,v=>{xg(v,n,t,r)&&(m||=[],m.push(v))})}finally{}m!==void 0&&vv(m,n)}if(!h){let m=Xs(i)||(()=>new i);n({provide:i,useFactory:m,deps:Un},i),n({provide:dv,useValue:i,multi:!0},i),n({provide:Go,useValue:()=>He(i),multi:!0},i)}let g=o.providers;if(g!=null&&!h){let m=e;R0(g,v=>{n(v,m)})}}else return!1;return i!==e&&e.providers!==void 0}function R0(e,n){for(let t of e)iv(t)&&(t=t.\u0275providers),Array.isArray(t)?R0(t,n):n(t)}var bN=xt({provide:String,useValue:xt});function xv(e){return e!==null&&typeof e=="object"&&bN in e}function EN(e){return!!(e&&e.useExisting)}function IN(e){return!!(e&&e.useFactory)}function Qs(e){return typeof e=="function"}function SN(e){return!!e.useClass}var Gd=new ve(""),dd={},DN={},tg;function P0(){return tg===void 0&&(tg=new _d),tg}var vr=class{},Cl=class extends vr{get destroyed(){return this._destroyed}constructor(n,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Eg(n,c=>this.processProvider(c)),this.records.set(uv,Ws(void 0,this)),i.has("environment")&&this.records.set(vr,Ws(void 0,this));let o=this.records.get(Gd);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(dv,Un,je.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let n=$e(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),$e(n)}}onDestroy(n){return this.assertNotDestroyed(),this._onDestroyHooks.push(n),()=>this.removeOnDestroy(n)}runInContext(n){this.assertNotDestroyed();let t=so(this),r=Cr(void 0),i;try{return n()}finally{so(t),Cr(r)}}get(n,t=yl,r=je.Default){if(this.assertNotDestroyed(),n.hasOwnProperty(p_))return n[p_](this);r=Wd(r);let i,o=so(this),c=Cr(void 0);try{if(!(r&je.SkipSelf)){let g=this.records.get(n);if(g===void 0){let m=ON(n)&&zd(n);m&&this.injectableDefInScope(m)?g=Ws(bg(n),dd):g=null,this.records.set(n,g)}if(g!=null)return this.hydrate(n,g)}let h=r&je.Self?P0():this.parent;return t=r&je.Optional&&t===yl?null:t,h.get(n,t)}catch(h){if(h.name==="NullInjectorError"){if((h[wd]=h[wd]||[]).unshift(Zn(n)),o)throw h;return eN(h,n,"R3InjectorError",this.source)}else throw h}finally{Cr(c),so(o)}}resolveInjectorInitializers(){let n=$e(null),t=so(this),r=Cr(void 0),i;try{let o=this.get(Go,Un,je.Self);for(let c of o)c()}finally{so(t),Cr(r),$e(n)}}toString(){let n=[],t=this.records;for(let r of t.keys())n.push(Zn(r));return`R3Injector[${n.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new de(205,!1)}processProvider(n){n=Vn(n);let t=Qs(n)?n:Vn(n&&n.provide),r=TN(n);if(!Qs(n)&&n.multi===!0){let i=this.records.get(t);i||(i=Ws(void 0,dd,!0),i.factory=()=>_g(i.multi),this.records.set(t,i)),t=n,i.multi.push(n)}this.records.set(t,r)}hydrate(n,t){let r=$e(null);try{return t.value===dd&&(t.value=DN,t.value=t.factory()),typeof t.value=="object"&&t.value&&NN(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{$e(r)}}injectableDefInScope(n){if(!n.providedIn)return!1;let t=Vn(n.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(n){let t=this._onDestroyHooks.indexOf(n);t!==-1&&this._onDestroyHooks.splice(t,1)}};function bg(e){let n=zd(e),t=n!==null?n.factory:Xs(e);if(t!==null)return t;if(e instanceof ve)throw new de(204,!1);if(e instanceof Function)return AN(e);throw new de(204,!1)}function AN(e){if(e.length>0)throw new de(204,!1);let t=VM(e);return t!==null?()=>t.factory(e):()=>new e}function TN(e){if(xv(e))return Ws(void 0,e.useValue);{let n=bv(e);return Ws(n,dd)}}function bv(e,n,t){let r;if(Qs(e)){let i=Vn(e);return Xs(i)||bg(i)}else if(xv(e))r=()=>Vn(e.useValue);else if(IN(e))r=()=>e.useFactory(..._g(e.deps||[]));else if(EN(e))r=()=>He(Vn(e.useExisting));else{let i=Vn(e&&(e.useClass||e.provide));if(MN(e))r=()=>new i(..._g(e.deps));else return Xs(i)||bg(i)}return r}function Ws(e,n,t=!1){return{factory:e,value:n,multi:t?[]:void 0}}function MN(e){return!!e.deps}function NN(e){return e!==null&&typeof e=="object"&&typeof e.ngOnDestroy=="function"}function ON(e){return typeof e=="function"||typeof e=="object"&&e instanceof ve}function Eg(e,n){for(let t of e)Array.isArray(t)?Eg(t,n):t&&iv(t)?Eg(t.\u0275providers,n):n(t)}function ai(e,n){e instanceof Cl&&e.assertNotDestroyed();let t,r=so(e),i=Cr(void 0);try{return n()}finally{so(r),Cr(i)}}function RN(){return ov()!==void 0||QM()!=null}function PN(e){return typeof e=="function"}var ar=0,Se=1,Ie=2,In=3,Ur=4,Gr=5,Hr=6,vd=7,kn=8,Ks=9,Ii=10,Mt=11,_l=12,__=13,sa=14,lr=15,qo=16,Gs=17,Si=18,$d=19,Ev=20,ao=21,ng=22,_r=23,fn=25,Iv=1,vl=6,Di=7,xd=8,Js=9,En=10,bd=function(e){return e[e.None=0]="None",e[e.HasTransplantedViews=2]="HasTransplantedViews",e}(bd||{});function jr(e){return Array.isArray(e)&&typeof e[Iv]=="object"}function li(e){return Array.isArray(e)&&e[Iv]===!0}function Sv(e){return(e.flags&4)!==0}function Nl(e){return e.componentOffset>-1}function k0(e){return(e.flags&1)===1}function co(e){return!!e.template}function Ed(e){return(e[Ie]&512)!==0}var Ig=class{constructor(n,t,r){this.previousValue=n,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function Dv(e,n,t,r){n!==null?n.applyValueToInputSignal(n,r):e[t]=r}function Ri(){return Av}function Av(e){return e.type.prototype.ngOnChanges&&(e.setInput=LN),kN}Ri.ngInherit=!0;function kN(){let e=Mv(this),n=e?.current;if(n){let t=e.previous;if(t===Zs)e.previous=n;else for(let r in n)t[r]=n[r];e.current=null,this.ngOnChanges(n)}}function LN(e,n,t,r,i){let o=this.declaredInputs[r],c=Mv(e)||FN(e,{previous:Zs,current:null}),h=c.current||(c.current={}),g=c.previous,m=g[o];h[o]=new Ig(m&&m.currentValue,t,g===Zs),Dv(e,n,i,t)}var Tv="__ngSimpleChanges__";function Mv(e){return e[Tv]||null}function FN(e,n){return e[Tv]=n}var v_=null;var ni=function(e,n,t){v_?.(e,n,t)},BN="svg",VN="math";function zr(e){for(;Array.isArray(e);)e=e[ar];return e}function Nv(e,n){return zr(n[e])}function cr(e,n){return zr(n[e.index])}function L0(e,n){return e.data[n]}function UN(e,n){return e[n]}function fo(e,n){let t=n[e];return jr(t)?t:t[ar]}function jN(e){return(e[Ie]&4)===4}function F0(e){return(e[Ie]&128)===128}function HN(e){return li(e[In])}function ea(e,n){return n==null?null:e[n]}function Ov(e){e[Gs]=0}function Rv(e){e[Ie]&1024||(e[Ie]|=1024,F0(e)&&Yd(e))}function zN(e,n){for(;e>0;)n=n[sa],e--;return n}function qd(e){return!!(e[Ie]&9216||e[_r]?.dirty)}function Sg(e){e[Ii].changeDetectionScheduler?.notify(8),e[Ie]&64&&(e[Ie]|=1024),qd(e)&&Yd(e)}function Yd(e){e[Ii].changeDetectionScheduler?.notify(0);let n=Yo(e);for(;n!==null&&!(n[Ie]&8192||(n[Ie]|=8192,!F0(n)));)n=Yo(n)}function Pv(e,n){if((e[Ie]&256)===256)throw new de(911,!1);e[ao]===null&&(e[ao]=[]),e[ao].push(n)}function WN(e,n){if(e[ao]===null)return;let t=e[ao].indexOf(n);t!==-1&&e[ao].splice(t,1)}function Yo(e){let n=e[In];return li(n)?n[In]:n}var Ve={lFrame:Wv(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var kv=!1;function GN(){return Ve.lFrame.elementDepthCount}function $N(){Ve.lFrame.elementDepthCount++}function qN(){Ve.lFrame.elementDepthCount--}function Lv(){return Ve.bindingsEnabled}function Ol(){return Ve.skipHydrationRootTNode!==null}function YN(e){return Ve.skipHydrationRootTNode===e}function XN(e){Ve.skipHydrationRootTNode=e}function ZN(){Ve.skipHydrationRootTNode=null}function nt(){return Ve.lFrame.lView}function Sn(){return Ve.lFrame.tView}function Rt(e){return Ve.lFrame.contextLView=e,e[kn]}function Pt(e){return Ve.lFrame.contextLView=null,e}function Qn(){let e=Fv();for(;e!==null&&e.type===64;)e=e.parent;return e}function Fv(){return Ve.lFrame.currentTNode}function QN(){let e=Ve.lFrame,n=e.currentTNode;return e.isParent?n:n.parent}function Rl(e,n){let t=Ve.lFrame;t.currentTNode=e,t.isParent=n}function Bv(){return Ve.lFrame.isParent}function KN(){Ve.lFrame.isParent=!1}function JN(){return Ve.lFrame.contextLView}function Vv(){return kv}function x_(e){kv=e}function eO(){let e=Ve.lFrame,n=e.bindingRootIndex;return n===-1&&(n=e.bindingRootIndex=e.tView.bindingStartIndex),n}function tO(e){return Ve.lFrame.bindingIndex=e}function aa(){return Ve.lFrame.bindingIndex++}function Uv(e){let n=Ve.lFrame,t=n.bindingIndex;return n.bindingIndex=n.bindingIndex+e,t}function nO(){return Ve.lFrame.inI18n}function rO(e,n){let t=Ve.lFrame;t.bindingIndex=t.bindingRootIndex=e,Dg(n)}function iO(){return Ve.lFrame.currentDirectiveIndex}function Dg(e){Ve.lFrame.currentDirectiveIndex=e}function oO(e){let n=Ve.lFrame.currentDirectiveIndex;return n===-1?null:e[n]}function jv(){return Ve.lFrame.currentQueryIndex}function B0(e){Ve.lFrame.currentQueryIndex=e}function sO(e){let n=e[Se];return n.type===2?n.declTNode:n.type===1?e[Gr]:null}function Hv(e,n,t){if(t&je.SkipSelf){let i=n,o=e;for(;i=i.parent,i===null&&!(t&je.Host);)if(i=sO(o),i===null||(o=o[sa],i.type&10))break;if(i===null)return!1;n=i,e=o}let r=Ve.lFrame=zv();return r.currentTNode=n,r.lView=e,!0}function V0(e){let n=zv(),t=e[Se];Ve.lFrame=n,n.currentTNode=t.firstChild,n.lView=e,n.tView=t,n.contextLView=e,n.bindingIndex=t.bindingStartIndex,n.inI18n=!1}function zv(){let e=Ve.lFrame,n=e===null?null:e.child;return n===null?Wv(e):n}function Wv(e){let n={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return e!==null&&(e.child=n),n}function Gv(){let e=Ve.lFrame;return Ve.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}var $v=Gv;function U0(){let e=Gv();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function aO(e){return(Ve.lFrame.contextLView=zN(e,Ve.lFrame.contextLView))[kn]}function ho(){return Ve.lFrame.selectedIndex}function Xo(e){Ve.lFrame.selectedIndex=e}function j0(){let e=Ve.lFrame;return L0(e.tView,e.selectedIndex)}function qv(){return Ve.lFrame.currentNamespace}var Yv=!0;function H0(){return Yv}function po(e){Yv=e}function lO(e,n,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=n.type.prototype;if(r){let c=Av(n);(t.preOrderHooks??=[]).push(e,c),(t.preOrderCheckHooks??=[]).push(e,c)}i&&(t.preOrderHooks??=[]).push(0-e,i),o&&((t.preOrderHooks??=[]).push(e,o),(t.preOrderCheckHooks??=[]).push(e,o))}function z0(e,n){for(let t=n.directiveStart,r=n.directiveEnd;t<r;t++){let o=e.data[t].type.prototype,{ngAfterContentInit:c,ngAfterContentChecked:h,ngAfterViewInit:g,ngAfterViewChecked:m,ngOnDestroy:v}=o;c&&(e.contentHooks??=[]).push(-t,c),h&&((e.contentHooks??=[]).push(t,h),(e.contentCheckHooks??=[]).push(t,h)),g&&(e.viewHooks??=[]).push(-t,g),m&&((e.viewHooks??=[]).push(t,m),(e.viewCheckHooks??=[]).push(t,m)),v!=null&&(e.destroyHooks??=[]).push(t,v)}}function fd(e,n,t){Xv(e,n,3,t)}function hd(e,n,t,r){(e[Ie]&3)===t&&Xv(e,n,t,r)}function rg(e,n){let t=e[Ie];(t&3)===n&&(t&=16383,t+=1,e[Ie]=t)}function Xv(e,n,t,r){let i=r!==void 0?e[Gs]&65535:0,o=r??-1,c=n.length-1,h=0;for(let g=i;g<c;g++)if(typeof n[g+1]=="number"){if(h=n[g],r!=null&&h>=r)break}else n[g]<0&&(e[Gs]+=65536),(h<o||o==-1)&&(cO(e,t,n,g),e[Gs]=(e[Gs]&4294901760)+g+2),g++}function b_(e,n){ni(4,e,n);let t=$e(null);try{n.call(e)}finally{$e(t),ni(5,e,n)}}function cO(e,n,t,r){let i=t[r]<0,o=t[r+1],c=i?-t[r]:t[r],h=e[c];i?e[Ie]>>14<e[Gs]>>16&&(e[Ie]&3)===n&&(e[Ie]+=16384,b_(h,o)):b_(h,o)}var Ys=-1,Zo=class{constructor(n,t,r){this.factory=n,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function uO(e){return e instanceof Zo}function dO(e){return(e.flags&8)!==0}function fO(e){return(e.flags&16)!==0}var ig={},Ag=class{constructor(n,t){this.injector=n,this.parentInjector=t}get(n,t,r){r=Wd(r);let i=this.injector.get(n,ig,r);return i!==ig||t===ig?i:this.parentInjector.get(n,t,r)}};function Zv(e){return e!==Ys}function Id(e){return e&32767}function hO(e){return e>>16}function Sd(e,n){let t=hO(e),r=n;for(;t>0;)r=r[sa],t--;return r}var Tg=!0;function E_(e){let n=Tg;return Tg=e,n}var pO=256,Qv=pO-1,Kv=5,gO=0,ri={};function mO(e,n,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(ml)&&(r=t[ml]),r==null&&(r=t[ml]=gO++);let i=r&Qv,o=1<<i;n.data[e+(i>>Kv)]|=o}function Dd(e,n){let t=Jv(e,n);if(t!==-1)return t;let r=n[Se];r.firstCreatePass&&(e.injectorIndex=n.length,og(r.data,e),og(n,null),og(r.blueprint,null));let i=W0(e,n),o=e.injectorIndex;if(Zv(i)){let c=Id(i),h=Sd(i,n),g=h[Se].data;for(let m=0;m<8;m++)n[o+m]=h[c+m]|g[c+m]}return n[o+8]=i,o}function og(e,n){e.push(0,0,0,0,0,0,0,0,n)}function Jv(e,n){return e.injectorIndex===-1||e.parent&&e.parent.injectorIndex===e.injectorIndex||n[e.injectorIndex+8]===null?-1:e.injectorIndex}function W0(e,n){if(e.parent&&e.parent.injectorIndex!==-1)return e.parent.injectorIndex;let t=0,r=null,i=n;for(;i!==null;){if(r=ix(i),r===null)return Ys;if(t++,i=i[sa],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return Ys}function Mg(e,n,t){mO(e,n,t)}function ex(e,n,t){if(t&je.Optional||e!==void 0)return e;A0(n,"NodeInjector")}function tx(e,n,t,r){if(t&je.Optional&&r===void 0&&(r=null),!(t&(je.Self|je.Host))){let i=e[Ks],o=Cr(void 0);try{return i?i.get(n,r,t&je.Optional):sv(n,r,t&je.Optional)}finally{Cr(o)}}return ex(r,n,t)}function nx(e,n,t,r=je.Default,i){if(e!==null){if(n[Ie]&2048&&!(r&je.Self)){let c=_O(e,n,t,r,ri);if(c!==ri)return c}let o=rx(e,n,t,r,ri);if(o!==ri)return o}return tx(n,t,r,i)}function rx(e,n,t,r,i){let o=wO(t);if(typeof o=="function"){if(!Hv(n,e,r))return r&je.Host?ex(i,t,r):tx(n,t,r,i);try{let c;if(c=o(r),c==null&&!(r&je.Optional))A0(t);else return c}finally{$v()}}else if(typeof o=="number"){let c=null,h=Jv(e,n),g=Ys,m=r&je.Host?n[lr][Gr]:null;for((h===-1||r&je.SkipSelf)&&(g=h===-1?W0(e,n):n[h+8],g===Ys||!S_(r,!1)?h=-1:(c=n[Se],h=Id(g),n=Sd(g,n)));h!==-1;){let v=n[Se];if(I_(o,h,v.data)){let x=yO(h,n,t,c,r,m);if(x!==ri)return x}g=n[h+8],g!==Ys&&S_(r,n[Se].data[h+8]===m)&&I_(o,h,n)?(c=v,h=Id(g),n=Sd(g,n)):h=-1}}return i}function yO(e,n,t,r,i,o){let c=n[Se],h=c.data[e+8],g=r==null?Nl(h)&&Tg:r!=c&&(h.type&3)!==0,m=i&je.Host&&o===h,v=pd(h,c,t,g,m);return v!==null?Qo(n,c,v,h):ri}function pd(e,n,t,r,i){let o=e.providerIndexes,c=n.data,h=o&1048575,g=e.directiveStart,m=e.directiveEnd,v=o>>20,x=r?h:h+v,I=i?h+v:m;for(let A=x;A<I;A++){let R=c[A];if(A<g&&t===R||A>=g&&R.type===t)return A}if(i){let A=c[g];if(A&&co(A)&&A.type===t)return g}return null}function Qo(e,n,t,r){let i=e[t],o=n.data;if(uO(i)){let c=i;c.resolving&&$M(GM(o[t]));let h=E_(c.canSeeViewProviders);c.resolving=!0;let g,m=c.injectImpl?Cr(c.injectImpl):null,v=Hv(e,r,je.Default);try{i=e[t]=c.factory(void 0,o,e,r),n.firstCreatePass&&t>=r.directiveStart&&lO(t,o[t],n)}finally{m!==null&&Cr(m),E_(h),c.resolving=!1,$v()}}return i}function wO(e){if(typeof e=="string")return e.charCodeAt(0)||0;let n=e.hasOwnProperty(ml)?e[ml]:void 0;return typeof n=="number"?n>=0?n&Qv:CO:n}function I_(e,n,t){let r=1<<e;return!!(t[n+(e>>Kv)]&r)}function S_(e,n){return!(e&je.Self)&&!(e&je.Host&&n)}var Wo=class{constructor(n,t){this._tNode=n,this._lView=t}get(n,t,r){return nx(this._tNode,this._lView,n,Wd(r),t)}};function CO(){return new Wo(Qn(),nt())}function go(e){return Tl(()=>{let n=e.prototype.constructor,t=n[yd]||Ng(n),r=Object.prototype,i=Object.getPrototypeOf(e.prototype).constructor;for(;i&&i!==r;){let o=i[yd]||Ng(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Ng(e){return ev(e)?()=>{let n=Ng(Vn(e));return n&&n()}:Xs(e)}function _O(e,n,t,r,i){let o=e,c=n;for(;o!==null&&c!==null&&c[Ie]&2048&&!(c[Ie]&512);){let h=rx(o,c,t,r|je.Self,ri);if(h!==ri)return h;let g=o.parent;if(!g){let m=c[Ev];if(m){let v=m.get(t,ri,r);if(v!==ri)return v}g=ix(c),c=c[sa]}o=g}return i}function ix(e){let n=e[Se],t=n.type;return t===2?n.declTNode:t===1?e[Gr]:null}function D_(e,n=null,t=null,r){let i=ox(e,n,t,r);return i.resolveInjectorInitializers(),i}function ox(e,n=null,t=null,r,i=new Set){let o=[t||Un,xN(e)];return r=r||(typeof e=="object"?void 0:Zn(e)),new Cl(o,n||P0(),r||null,i)}var oi=class e{static{this.THROW_IF_NOT_FOUND=yl}static{this.NULL=new _d}static create(n,t){if(Array.isArray(n))return D_({name:""},t,n,"");{let r=n.name??"";return D_({name:r},n.parent,n.providers,r)}}static{this.\u0275prov=pe({token:e,providedIn:"any",factory:()=>He(uv)})}static{this.__NG_ELEMENT_ID__=-1}};var vO=new ve("");vO.__NG_ELEMENT_ID__=e=>{let n=Qn();if(n===null)throw new de(204,!1);if(n.type&2)return n.value;if(e&je.Optional)return null;throw new de(204,!1)};var xO="ngOriginalError";function sg(e){return e[xO]}var sx=!0,ax=(()=>{class e{static{this.__NG_ELEMENT_ID__=bO}static{this.__NG_ENV_ID__=t=>t}}return e})(),Og=class extends ax{constructor(n){super(),this._lView=n}onDestroy(n){return Pv(this._lView,n),()=>WN(this._lView,n)}};function bO(){return new Og(nt())}var ts=(()=>{class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new bn(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=pe({token:e,providedIn:"root",factory:()=>new e})}}return e})();var Rg=class extends xn{constructor(n=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=n,RN()&&(this.destroyRef=K(ax,{optional:!0})??void 0,this.pendingTasks=K(ts,{optional:!0})??void 0)}emit(n){let t=$e(null);try{super.next(n)}finally{$e(t)}}subscribe(n,t,r){let i=n,o=t||(()=>null),c=r;if(n&&typeof n=="object"){let g=n;i=g.next?.bind(g),o=g.error?.bind(g),c=g.complete?.bind(g)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),c&&(c=this.wrapInTimeout(c)));let h=super.subscribe({next:i,error:o,complete:c});return n instanceof Vt&&n.add(h),h}wrapInTimeout(n){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{n(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},Ot=Rg;function Ad(...e){}function lx(e){let n,t;function r(){e=Ad;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),n!==void 0&&clearTimeout(n)}catch{}}return n=setTimeout(()=>{e(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{e(),r()})),()=>r()}function A_(e){return queueMicrotask(()=>e()),()=>{e=Ad}}var G0="isAngularZone",Td=G0+"_ID",EO=0,Xt=class e{constructor(n){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ot(!1),this.onMicrotaskEmpty=new Ot(!1),this.onStable=new Ot(!1),this.onError=new Ot(!1);let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=sx}=n;if(typeof Zone>"u")throw new de(908,!1);Zone.assertZonePatched();let c=this;c._nesting=0,c._outer=c._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(c._inner=c._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(c._inner=c._inner.fork(Zone.longStackTraceZoneSpec)),c.shouldCoalesceEventChangeDetection=!i&&r,c.shouldCoalesceRunChangeDetection=i,c.callbackScheduled=!1,c.scheduleInRootZone=o,DO(c)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(G0)===!0}static assertInAngularZone(){if(!e.isInAngularZone())throw new de(909,!1)}static assertNotInAngularZone(){if(e.isInAngularZone())throw new de(909,!1)}run(n,t,r){return this._inner.run(n,t,r)}runTask(n,t,r,i){let o=this._inner,c=o.scheduleEventTask("NgZoneEvent: "+i,n,IO,Ad,Ad);try{return o.runTask(c,t,r)}finally{o.cancelTask(c)}}runGuarded(n,t,r){return this._inner.runGuarded(n,t,r)}runOutsideAngular(n){return this._outer.run(n)}},IO={};function $0(e){if(e._nesting==0&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function SO(e){if(e.isCheckStableRunning||e.callbackScheduled)return;e.callbackScheduled=!0;function n(){lx(()=>{e.callbackScheduled=!1,Pg(e),e.isCheckStableRunning=!0,$0(e),e.isCheckStableRunning=!1})}e.scheduleInRootZone?Zone.root.run(()=>{n()}):e._outer.run(()=>{n()}),Pg(e)}function DO(e){let n=()=>{SO(e)},t=EO++;e._inner=e._inner.fork({name:"angular",properties:{[G0]:!0,[Td]:t,[Td+t]:!0},onInvokeTask:(r,i,o,c,h,g)=>{if(AO(g))return r.invokeTask(o,c,h,g);try{return T_(e),r.invokeTask(o,c,h,g)}finally{(e.shouldCoalesceEventChangeDetection&&c.type==="eventTask"||e.shouldCoalesceRunChangeDetection)&&n(),M_(e)}},onInvoke:(r,i,o,c,h,g,m)=>{try{return T_(e),r.invoke(o,c,h,g,m)}finally{e.shouldCoalesceRunChangeDetection&&!e.callbackScheduled&&!TO(g)&&n(),M_(e)}},onHasTask:(r,i,o,c)=>{r.hasTask(o,c),i===o&&(c.change=="microTask"?(e._hasPendingMicrotasks=c.microTask,Pg(e),$0(e)):c.change=="macroTask"&&(e.hasPendingMacrotasks=c.macroTask))},onHandleError:(r,i,o,c)=>(r.handleError(o,c),e.runOutsideAngular(()=>e.onError.emit(c)),!1)})}function Pg(e){e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&e.callbackScheduled===!0?e.hasPendingMicrotasks=!0:e.hasPendingMicrotasks=!1}function T_(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function M_(e){e._nesting--,$0(e)}var kg=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ot,this.onMicrotaskEmpty=new Ot,this.onStable=new Ot,this.onError=new Ot}run(n,t,r){return n.apply(t,r)}runGuarded(n,t,r){return n.apply(t,r)}runOutsideAngular(n){return n()}runTask(n,t,r,i){return n.apply(t,r)}};function AO(e){return cx(e,"__ignore_ng_zone__")}function TO(e){return cx(e,"__scheduler_tick__")}function cx(e,n){return!Array.isArray(e)||e.length!==1?!1:e[0]?.data?.[n]===!0}var Ai=class{constructor(){this._console=console}handleError(n){let t=this._findOriginalError(n);this._console.error("ERROR",n),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(n){let t=n&&sg(n);for(;t&&sg(t);)t=sg(t);return t||null}},MO=new ve("",{providedIn:"root",factory:()=>{let e=K(Xt),n=K(Ai);return t=>e.runOutsideAngular(()=>n.handleError(t))}});function NO(){return la(Qn(),nt())}function la(e,n){return new ur(cr(e,n))}var ur=(()=>{class e{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=NO}}return e})();function OO(e){return e instanceof ur?e.nativeElement:e}function RO(){return this._results[Symbol.iterator]()}var Lg=class e{get changes(){return this._changes??=new Ot}constructor(n=!1){this._emitDistinctChangesOnly=n,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let t=e.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=RO)}get(n){return this._results[n]}map(n){return this._results.map(n)}filter(n){return this._results.filter(n)}find(n){return this._results.find(n)}reduce(n,t){return this._results.reduce(n,t)}forEach(n){this._results.forEach(n)}some(n){return this._results.some(n)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(n,t){this.dirty=!1;let r=rN(n);(this._changesDetected=!nN(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(n){this._onDirty=n}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}},PO="ngSkipHydration",kO="ngskiphydration";function ux(e){let n=e.mergedAttrs;if(n===null)return!1;for(let t=0;t<n.length;t+=2){let r=n[t];if(typeof r=="number")return!1;if(typeof r=="string"&&r.toLowerCase()===kO)return!0}return!1}function dx(e){return e.hasAttribute(PO)}function Md(e){return(e.flags&128)===128}function LO(e){if(Md(e))return!0;let n=e.parent;for(;n;){if(Md(e)||ux(n))return!0;n=n.parent}return!1}var fx=new Map,FO=0;function BO(){return FO++}function VO(e){fx.set(e[$d],e)}function Fg(e){fx.delete(e[$d])}var N_="__ngContext__";function Ko(e,n){jr(n)?(e[N_]=n[$d],VO(n)):e[N_]=n}function hx(e){return gx(e[_l])}function px(e){return gx(e[Ur])}function gx(e){for(;e!==null&&!li(e);)e=e[Ur];return e}var Bg;function mx(e){Bg=e}function Xd(){if(Bg!==void 0)return Bg;if(typeof document<"u")return document;throw new de(210,!1)}var Zd=new ve("",{providedIn:"root",factory:()=>UO}),UO="ng",q0=new ve(""),ci=new ve("",{providedIn:"platform",factory:()=>"unknown"});var Y0=new ve("",{providedIn:"root",factory:()=>Xd().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function jO(){let e=new ca;return K(ci)==="browser"&&(e.store=HO(Xd(),K(Zd))),e}var ca=(()=>{class e{constructor(){this.store={},this.onSerializeCallbacks={}}static{this.\u0275prov=pe({token:e,providedIn:"root",factory:jO})}get(t,r){return this.store[t]!==void 0?this.store[t]:r}set(t,r){this.store[t]=r}remove(t){delete this.store[t]}hasKey(t){return this.store.hasOwnProperty(t)}get isEmpty(){return Object.keys(this.store).length===0}onSerialize(t,r){this.onSerializeCallbacks[t]=r}toJson(){for(let t in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(t))try{this.store[t]=this.onSerializeCallbacks[t]()}catch(r){console.warn("Exception in onSerialize callback: ",r)}return JSON.stringify(this.store).replace(/</g,"\\u003C")}}return e})();function HO(e,n){let t=e.getElementById(n+"-state");if(t?.textContent)try{return JSON.parse(t.textContent)}catch(r){console.warn("Exception while restoring TransferState for app "+n,r)}return{}}var yx="h",wx="b",Vg=function(e){return e.FirstChild="f",e.NextSibling="n",e}(Vg||{}),zO="e",WO="t",X0="c",Cx="x",Nd="r",GO="i",$O="n",_x="d";var qO="__nghData__",vx=qO,ag="ngh",YO="nghm",xx=()=>null;function XO(e,n,t=!1){let r=e.getAttribute(ag);if(r==null)return null;let[i,o]=r.split("|");if(r=t?o:i,!r)return null;let c=o?`|${o}`:"",h=t?i:c,g={};if(r!==""){let v=n.get(ca,null,{optional:!0});v!==null&&(g=v.get(vx,[])[Number(r)])}let m={data:g,firstChild:e.firstChild??null};return t&&(m.firstChild=e,Qd(m,0,e.nextSibling)),h?e.setAttribute(ag,h):e.removeAttribute(ag),m}function ZO(){xx=XO}function Z0(e,n,t=!1){return xx(e,n,t)}function QO(e){let n=e._lView;return n[Se].type===2?null:(Ed(n)&&(n=n[fn]),n)}function KO(e){return e.textContent?.replace(/\s/gm,"")}function JO(e){let n=Xd(),t=n.createNodeIterator(e,NodeFilter.SHOW_COMMENT,{acceptNode(o){let c=KO(o);return c==="ngetn"||c==="ngtns"?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}}),r,i=[];for(;r=t.nextNode();)i.push(r);for(let o of i)o.textContent==="ngetn"?o.replaceWith(n.createTextNode("")):o.remove()}function Qd(e,n,t){e.segmentHeads??={},e.segmentHeads[n]=t}function Ug(e,n){return e.segmentHeads?.[n]??null}function eR(e,n){let t=e.data,r=t[zO]?.[n]??null;return r===null&&t[X0]?.[n]&&(r=Q0(e,n)),r}function bx(e,n){return e.data[X0]?.[n]??null}function Q0(e,n){let t=bx(e,n)??[],r=0;for(let i of t)r+=i[Nd]*(i[Cx]??1);return r}function tR(e){if(typeof e.disconnectedNodes>"u"){let n=e.data[_x];e.disconnectedNodes=n?new Set(n):null}return e.disconnectedNodes}function Pl(e,n){if(typeof e.disconnectedNodes>"u"){let t=e.data[_x];e.disconnectedNodes=t?new Set(t):null}return!!tR(e)?.has(n)}var rd=new ve(""),Ex=!1,Ix=new ve("",{providedIn:"root",factory:()=>Ex});var id;function Sx(){if(id===void 0&&(id=null,mg.trustedTypes))try{id=mg.trustedTypes.createPolicy("angular",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch{}return id}function Kd(e){return Sx()?.createHTML(e)||e}function nR(e){return Sx()?.createScriptURL(e)||e}var Ti=class{constructor(n){this.changingThisBreaksApplicationSecurity=n}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${K_})`}},jg=class extends Ti{getTypeName(){return"HTML"}},Hg=class extends Ti{getTypeName(){return"Style"}},zg=class extends Ti{getTypeName(){return"Script"}},Wg=class extends Ti{getTypeName(){return"URL"}},Gg=class extends Ti{getTypeName(){return"ResourceURL"}};function Pi(e){return e instanceof Ti?e.changingThisBreaksApplicationSecurity:e}function ua(e,n){let t=rR(e);if(t!=null&&t!==n){if(t==="ResourceURL"&&n==="URL")return!0;throw new Error(`Required a safe ${n}, got a ${t} (see ${K_})`)}return t===n}function rR(e){return e instanceof Ti&&e.getTypeName()||null}function Dx(e){return new jg(e)}function Ax(e){return new Hg(e)}function Tx(e){return new zg(e)}function Mx(e){return new Wg(e)}function Nx(e){return new Gg(e)}function iR(e){let n=new qg(e);return oR()?new $g(n):n}var $g=class{constructor(n){this.inertDocumentHelper=n}getInertBodyElement(n){n="<body><remove></remove>"+n;try{let t=new window.DOMParser().parseFromString(Kd(n),"text/html").body;return t===null?this.inertDocumentHelper.getInertBodyElement(n):(t.firstChild?.remove(),t)}catch{return null}}},qg=class{constructor(n){this.defaultDoc=n,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(n){let t=this.inertDocument.createElement("template");return t.innerHTML=Kd(n),t}};function oR(){try{return!!new window.DOMParser().parseFromString(Kd(""),"text/html")}catch{return!1}}var sR=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function K0(e){return e=String(e),e.match(sR)?e:"unsafe:"+e}function ki(e){let n={};for(let t of e.split(","))n[t]=!0;return n}function kl(...e){let n={};for(let t of e)for(let r in t)t.hasOwnProperty(r)&&(n[r]=!0);return n}var Ox=ki("area,br,col,hr,img,wbr"),Rx=ki("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Px=ki("rp,rt"),aR=kl(Px,Rx),lR=kl(Rx,ki("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),cR=kl(Px,ki("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),O_=kl(Ox,lR,cR,aR),kx=ki("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),uR=ki("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),dR=ki("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),fR=kl(kx,uR,dR),hR=ki("script,style,template"),Yg=class{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(n){let t=n.firstChild,r=!0,i=[];for(;t;){if(t.nodeType===Node.ELEMENT_NODE?r=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,r&&t.firstChild){i.push(t),t=mR(t);continue}for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let o=gR(t);if(o){t=o;break}t=i.pop()}}return this.buf.join("")}startElement(n){let t=R_(n).toLowerCase();if(!O_.hasOwnProperty(t))return this.sanitizedSomething=!0,!hR.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);let r=n.attributes;for(let i=0;i<r.length;i++){let o=r.item(i),c=o.name,h=c.toLowerCase();if(!fR.hasOwnProperty(h)){this.sanitizedSomething=!0;continue}let g=o.value;kx[h]&&(g=K0(g)),this.buf.push(" ",c,'="',P_(g),'"')}return this.buf.push(">"),!0}endElement(n){let t=R_(n).toLowerCase();O_.hasOwnProperty(t)&&!Ox.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(n){this.buf.push(P_(n))}};function pR(e,n){return(e.compareDocumentPosition(n)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function gR(e){let n=e.nextSibling;if(n&&e!==n.previousSibling)throw Lx(n);return n}function mR(e){let n=e.firstChild;if(n&&pR(e,n))throw Lx(n);return n}function R_(e){let n=e.nodeName;return typeof n=="string"?n:"FORM"}function Lx(e){return new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`)}var yR=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,wR=/([^\#-~ |!])/g;function P_(e){return e.replace(/&/g,"&amp;").replace(yR,function(n){let t=n.charCodeAt(0),r=n.charCodeAt(1);return"&#"+((t-55296)*1024+(r-56320)+65536)+";"}).replace(wR,function(n){return"&#"+n.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var od;function Fx(e,n){let t=null;try{od=od||iR(e);let r=n?String(n):"";t=od.getInertBodyElement(r);let i=5,o=r;do{if(i===0)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=t.innerHTML,t=od.getInertBodyElement(r)}while(r!==o);let h=new Yg().sanitizeChildren(k_(t)||t);return Kd(h)}finally{if(t){let r=k_(t)||t;for(;r.firstChild;)r.firstChild.remove()}}}function k_(e){return"content"in e&&CR(e)?e.content:null}function CR(e){return e.nodeType===Node.ELEMENT_NODE&&e.nodeName==="TEMPLATE"}var mo=function(e){return e[e.NONE=0]="NONE",e[e.HTML=1]="HTML",e[e.STYLE=2]="STYLE",e[e.SCRIPT=3]="SCRIPT",e[e.URL=4]="URL",e[e.RESOURCE_URL=5]="RESOURCE_URL",e}(mo||{});function Bx(e){return nR(e[0])}var _R=/^>|^->|<!--|-->|--!>|<!-$/g,vR=/(<|>)/g,xR="\u200B$1\u200B";function bR(e){return e.replace(_R,n=>n.replace(vR,xR))}function ER(e){return e.ownerDocument.body}function Vx(e){return e instanceof Function?e():e}function sd(e){return(e??K(oi)).get(ci)==="browser"}var si=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}(si||{}),IR;function J0(e,n){return IR(e,n)}function $s(e,n,t,r,i){if(r!=null){let o,c=!1;li(r)?o=r:jr(r)&&(c=!0,r=r[ar]);let h=zr(r);e===0&&t!==null?i==null?Wx(n,t,h):Od(n,t,h,i||null,!0):e===1&&t!==null?Od(n,t,h,i||null,!0):e===2?rm(n,h,c):e===3&&n.destroyNode(h),o!=null&&UR(n,e,o,t,i)}}function Ux(e,n){return e.createText(n)}function SR(e,n,t){e.setValue(n,t)}function jx(e,n){return e.createComment(bR(n))}function em(e,n,t){return e.createElement(n,t)}function DR(e,n){Hx(e,n),n[ar]=null,n[Gr]=null}function AR(e,n,t,r,i,o){r[ar]=i,r[Gr]=n,ef(e,r,t,1,i,o)}function Hx(e,n){n[Ii].changeDetectionScheduler?.notify(9),ef(e,n,n[Mt],2,null,null)}function TR(e){let n=e[_l];if(!n)return lg(e[Se],e);for(;n;){let t=null;if(jr(n))t=n[_l];else{let r=n[En];r&&(t=r)}if(!t){for(;n&&!n[Ur]&&n!==e;)jr(n)&&lg(n[Se],n),n=n[In];n===null&&(n=e),jr(n)&&lg(n[Se],n),t=n&&n[Ur]}n=t}}function MR(e,n,t,r){let i=En+r,o=t.length;r>0&&(t[i-1][Ur]=n),r<o-En?(n[Ur]=t[i],cv(t,En+r,n)):(t.push(n),n[Ur]=null),n[In]=t;let c=n[qo];c!==null&&t!==c&&zx(c,n);let h=n[Si];h!==null&&h.insertView(e),Sg(n),n[Ie]|=128}function zx(e,n){let t=e[Js],r=n[In];if(jr(r))e[Ie]|=bd.HasTransplantedViews;else{let i=r[In][lr];n[lr]!==i&&(e[Ie]|=bd.HasTransplantedViews)}t===null?e[Js]=[n]:t.push(n)}function tm(e,n){let t=e[Js],r=t.indexOf(n);t.splice(r,1)}function xl(e,n){if(e.length<=En)return;let t=En+n,r=e[t];if(r){let i=r[qo];i!==null&&i!==e&&tm(i,r),n>0&&(e[t-1][Ur]=r[Ur]);let o=Cd(e,En+n);DR(r[Se],r);let c=o[Si];c!==null&&c.detachView(o[Se]),r[In]=null,r[Ur]=null,r[Ie]&=-129}return r}function Jd(e,n){if(!(n[Ie]&256)){let t=n[Mt];t.destroyNode&&ef(e,n,t,3,null,null),TR(n)}}function lg(e,n){if(n[Ie]&256)return;let t=$e(null);try{n[Ie]&=-129,n[Ie]|=256,n[_r]&&Rp(n[_r]),OR(e,n),NR(e,n),n[Se].type===1&&n[Mt].destroy();let r=n[qo];if(r!==null&&li(n[In])){r!==n[In]&&tm(r,n);let i=n[Si];i!==null&&i.detachView(e)}Fg(n)}finally{$e(t)}}function NR(e,n){let t=e.cleanup,r=n[vd];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let c=t[o+3];c>=0?r[c]():r[-c].unsubscribe(),o+=2}else{let c=r[t[o+1]];t[o].call(c)}r!==null&&(n[vd]=null);let i=n[ao];if(i!==null){n[ao]=null;for(let o=0;o<i.length;o++){let c=i[o];c()}}}function OR(e,n){let t;if(e!=null&&(t=e.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=n[t[r]];if(!(i instanceof Zo)){let o=t[r+1];if(Array.isArray(o))for(let c=0;c<o.length;c+=2){let h=i[o[c]],g=o[c+1];ni(4,h,g);try{g.call(h)}finally{ni(5,h,g)}}else{ni(4,i,o);try{o.call(i)}finally{ni(5,i,o)}}}}}function RR(e,n,t){return PR(e,n.parent,t)}function PR(e,n,t){let r=n;for(;r!==null&&r.type&168;)n=r,r=n.parent;if(r===null)return t[ar];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=e.data[r.directiveStart+i];if(o===ii.None||o===ii.Emulated)return null}return cr(r,t)}}function Od(e,n,t,r,i){e.insertBefore(n,t,r,i)}function Wx(e,n,t){e.appendChild(n,t)}function L_(e,n,t,r,i){r!==null?Od(e,n,t,r,i):Wx(e,n,t)}function Gx(e,n){return e.parentNode(n)}function kR(e,n){return e.nextSibling(n)}function LR(e,n,t){return BR(e,n,t)}function FR(e,n,t){return e.type&40?cr(e,t):null}var BR=FR,F_;function nm(e,n,t,r){let i=RR(e,r,n),o=n[Mt],c=r.parent||n[Gr],h=LR(c,r,n);if(i!=null)if(Array.isArray(t))for(let g=0;g<t.length;g++)L_(o,i,t[g],h,!1);else L_(o,i,t,h,!1);F_!==void 0&&F_(o,r,n,t,i)}function pl(e,n){if(n!==null){let t=n.type;if(t&3)return cr(n,e);if(t&4)return Xg(-1,e[n.index]);if(t&8){let r=n.child;if(r!==null)return pl(e,r);{let i=e[n.index];return li(i)?Xg(-1,i):zr(i)}}else{if(t&128)return pl(e,n.next);if(t&32)return J0(n,e)()||zr(e[n.index]);{let r=$x(e,n);if(r!==null){if(Array.isArray(r))return r[0];let i=Yo(e[lr]);return pl(i,r)}else return pl(e,n.next)}}}return null}function $x(e,n){if(n!==null){let r=e[lr][Gr],i=n.projection;return r.projection[i]}return null}function Xg(e,n){let t=En+e+1;if(t<n.length){let r=n[t],i=r[Se].firstChild;if(i!==null)return pl(r,i)}return n[Di]}function rm(e,n,t){e.removeChild(null,n,t)}function qx(e){e.textContent=""}function im(e,n,t,r,i,o,c){for(;t!=null;){if(t.type===128){t=t.next;continue}let h=r[t.index],g=t.type;if(c&&n===0&&(h&&Ko(zr(h),r),t.flags|=2),(t.flags&32)!==32)if(g&8)im(e,n,t.child,r,i,o,!1),$s(n,e,i,h,o);else if(g&32){let m=J0(t,r),v;for(;v=m();)$s(n,e,i,v,o);$s(n,e,i,h,o)}else g&16?VR(e,n,r,t,i,o):$s(n,e,i,h,o);t=c?t.projectionNext:t.next}}function ef(e,n,t,r,i,o){im(t,r,e.firstChild,n,i,o,!1)}function VR(e,n,t,r,i,o){let c=t[lr],g=c[Gr].projection[r.projection];if(Array.isArray(g))for(let m=0;m<g.length;m++){let v=g[m];$s(n,e,i,v,o)}else{let m=g,v=c[In];Md(r)&&(m.flags|=128),im(e,n,m,v,i,o,!0)}}function UR(e,n,t,r,i){let o=t[Di],c=zr(t);o!==c&&$s(n,e,r,o,i);for(let h=En;h<t.length;h++){let g=t[h];ef(g[Se],g,e,n,r,o)}}function jR(e,n,t,r,i){if(n)i?e.addClass(t,r):e.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:si.DashCase;i==null?e.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=si.Important),e.setStyle(t,r,i,o))}}function HR(e,n,t){e.setAttribute(n,"style",t)}function Yx(e,n,t){t===""?e.removeAttribute(n,"class"):e.setAttribute(n,"class",t)}function Xx(e,n,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&vg(e,n,r),i!==null&&Yx(e,n,i),o!==null&&HR(e,n,o)}var ui={};function X(e=1){Zx(Sn(),nt(),ho()+e,!1)}function Zx(e,n,t,r){if(!r)if((n[Ie]&3)===3){let o=e.preOrderCheckHooks;o!==null&&fd(n,o,t)}else{let o=e.preOrderHooks;o!==null&&hd(n,o,0,t)}Xo(t)}function Z(e,n=je.Default){let t=nt();if(t===null)return He(e,n);let r=Qn();return nx(r,t,Vn(e),n)}function Qx(e,n,t,r,i,o){let c=$e(null);try{let h=null;i&lo.SignalBased&&(h=n[r][xi]),h!==null&&h.transformFn!==void 0&&(o=h.transformFn(o)),i&lo.HasDecoratorInputTransform&&(o=e.inputTransforms[r].call(n,o)),e.setInput!==null?e.setInput(n,h,o,t,r):Dv(n,h,r,o)}finally{$e(c)}}function zR(e,n){let t=e.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Xo(~i);else{let o=i,c=t[++r],h=t[++r];rO(c,o);let g=n[o];h(2,g)}}}finally{Xo(-1)}}function tf(e,n,t,r,i,o,c,h,g,m,v){let x=n.blueprint.slice();return x[ar]=i,x[Ie]=r|4|128|8|64,(m!==null||e&&e[Ie]&2048)&&(x[Ie]|=2048),Ov(x),x[In]=x[sa]=e,x[kn]=t,x[Ii]=c||e&&e[Ii],x[Mt]=h||e&&e[Mt],x[Ks]=g||e&&e[Ks]||null,x[Gr]=o,x[$d]=BO(),x[Hr]=v,x[Ev]=m,x[lr]=n.type==2?e[lr]:x,x}function nf(e,n,t,r,i){let o=e.data[n];if(o===null)o=WR(e,n,t,r,i),nO()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let c=QN();o.injectorIndex=c===null?-1:c.injectorIndex}return Rl(o,!0),o}function WR(e,n,t,r,i){let o=Fv(),c=Bv(),h=c?o:o&&o.parent,g=e.data[n]=QR(e,h,t,n,r,i);return e.firstChild===null&&(e.firstChild=g),o!==null&&(c?o.child==null&&g.parent!==null&&(o.child=g):o.next===null&&(o.next=g,g.prev=o)),g}function Kx(e,n,t,r){if(t===0)return-1;let i=n.length;for(let o=0;o<t;o++)n.push(r),e.blueprint.push(r),e.data.push(null);return i}function Jx(e,n,t,r,i){let o=ho(),c=r&2;try{Xo(-1),c&&n.length>fn&&Zx(e,n,fn,!1),ni(c?2:0,i),t(r,i)}finally{Xo(o),ni(c?3:1,i)}}function eb(e,n,t){if(Sv(n)){let r=$e(null);try{let i=n.directiveStart,o=n.directiveEnd;for(let c=i;c<o;c++){let h=e.data[c];if(h.contentQueries){let g=t[c];h.contentQueries(1,g,c)}}}finally{$e(r)}}}function tb(e,n,t){Lv()&&(r3(e,n,t,cr(t,n)),(t.flags&64)===64&&lb(e,n,t))}function nb(e,n,t=cr){let r=n.localNames;if(r!==null){let i=n.index+1;for(let o=0;o<r.length;o+=2){let c=r[o+1],h=c===-1?t(n,e):e[c];e[i++]=h}}}function rb(e){let n=e.tView;return n===null||n.incompleteFirstPass?e.tView=om(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):n}function om(e,n,t,r,i,o,c,h,g,m,v){let x=fn+r,I=x+i,A=GR(x,I),R=typeof m=="function"?m():m;return A[Se]={type:e,blueprint:A,template:t,queries:null,viewQuery:h,declTNode:n,data:A.slice().fill(null,x),bindingStartIndex:x,expandoStartIndex:I,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof c=="function"?c():c,firstChild:null,schemas:g,consts:R,incompleteFirstPass:!1,ssrId:v}}function GR(e,n){let t=[];for(let r=0;r<n;r++)t.push(r<e?null:ui);return t}function $R(e,n,t,r){let o=r.get(Ix,Ex)||t===ii.ShadowDom,c=e.selectRootElement(n,o);return qR(c),c}function qR(e){ib(e)}var ib=()=>null;function YR(e){dx(e)?qx(e):JO(e)}function XR(){ib=YR}function ZR(e,n,t,r){let i=db(n);i.push(t),e.firstCreatePass&&fb(e).push(r,i.length-1)}function QR(e,n,t,r,i,o){let c=n?n.injectorIndex:-1,h=0;return Ol()&&(h|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:c,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:h,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:n,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function B_(e,n,t,r,i){for(let o in n){if(!n.hasOwnProperty(o))continue;let c=n[o];if(c===void 0)continue;r??={};let h,g=lo.None;Array.isArray(c)?(h=c[0],g=c[1]):h=c;let m=o;if(i!==null){if(!i.hasOwnProperty(o))continue;m=i[o]}e===0?V_(r,t,m,h,g):V_(r,t,m,h)}return r}function V_(e,n,t,r,i){let o;e.hasOwnProperty(t)?(o=e[t]).push(n,r):o=e[t]=[n,r],i!==void 0&&o.push(i)}function KR(e,n,t){let r=n.directiveStart,i=n.directiveEnd,o=e.data,c=n.attrs,h=[],g=null,m=null;for(let v=r;v<i;v++){let x=o[v],I=t?t.get(x):null,A=I?I.inputs:null,R=I?I.outputs:null;g=B_(0,x.inputs,v,g,A),m=B_(1,x.outputs,v,m,R);let j=g!==null&&c!==null&&!O0(n)?p3(g,v,c):null;h.push(j)}g!==null&&(g.hasOwnProperty("class")&&(n.flags|=8),g.hasOwnProperty("style")&&(n.flags|=16)),n.initialInputs=h,n.inputs=g,n.outputs=m}function JR(e){return e==="class"?"className":e==="for"?"htmlFor":e==="formaction"?"formAction":e==="innerHtml"?"innerHTML":e==="readonly"?"readOnly":e==="tabindex"?"tabIndex":e}function ob(e,n,t,r,i,o,c,h){let g=cr(n,t),m=n.inputs,v;!h&&m!=null&&(v=m[r])?(sm(e,t,v,r,i),Nl(n)&&e3(t,n.index)):n.type&3?(r=JR(r),i=c!=null?c(i,n.value||"",r):i,o.setProperty(g,r,i)):n.type&12}function e3(e,n){let t=fo(n,e);t[Ie]&16||(t[Ie]|=64)}function sb(e,n,t,r){if(Lv()){let i=r===null?null:{"":-1},o=o3(e,t),c,h;o===null?c=h=null:[c,h]=o,c!==null&&ab(e,n,t,c,i,h),i&&s3(t,r,i)}t.mergedAttrs=wl(t.mergedAttrs,t.attrs)}function ab(e,n,t,r,i,o){for(let m=0;m<r.length;m++)Mg(Dd(t,n),e,r[m].type);l3(t,e.data.length,r.length);for(let m=0;m<r.length;m++){let v=r[m];v.providersResolver&&v.providersResolver(v)}let c=!1,h=!1,g=Kx(e,n,r.length,null);for(let m=0;m<r.length;m++){let v=r[m];t.mergedAttrs=wl(t.mergedAttrs,v.hostAttrs),c3(e,t,n,g,v),a3(g,v,i),v.contentQueries!==null&&(t.flags|=4),(v.hostBindings!==null||v.hostAttrs!==null||v.hostVars!==0)&&(t.flags|=64);let x=v.type.prototype;!c&&(x.ngOnChanges||x.ngOnInit||x.ngDoCheck)&&((e.preOrderHooks??=[]).push(t.index),c=!0),!h&&(x.ngOnChanges||x.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(t.index),h=!0),g++}KR(e,t,o)}function t3(e,n,t,r,i){let o=i.hostBindings;if(o){let c=e.hostBindingOpCodes;c===null&&(c=e.hostBindingOpCodes=[]);let h=~n.index;n3(c)!=h&&c.push(h),c.push(t,r,o)}}function n3(e){let n=e.length;for(;n>0;){let t=e[--n];if(typeof t=="number"&&t<0)return t}return 0}function r3(e,n,t,r){let i=t.directiveStart,o=t.directiveEnd;Nl(t)&&u3(n,t,e.data[i+t.componentOffset]),e.firstCreatePass||Dd(t,n),Ko(r,n);let c=t.initialInputs;for(let h=i;h<o;h++){let g=e.data[h],m=Qo(n,e,h,t);if(Ko(m,n),c!==null&&h3(n,h-i,m,g,t,c),co(g)){let v=fo(t.index,n);v[kn]=Qo(n,e,h,t)}}}function lb(e,n,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,c=iO();try{Xo(o);for(let h=r;h<i;h++){let g=e.data[h],m=n[h];Dg(h),(g.hostBindings!==null||g.hostVars!==0||g.hostAttrs!==null)&&i3(g,m)}}finally{Xo(-1),Dg(c)}}function i3(e,n){e.hostBindings!==null&&e.hostBindings(1,n)}function o3(e,n){let t=e.directiveRegistry,r=null,i=null;if(t)for(let o=0;o<t.length;o++){let c=t[o];if(hN(n,c.selectors,!1))if(r||(r=[]),co(c))if(c.findHostDirectiveDefs!==null){let h=[];i=i||new Map,c.findHostDirectiveDefs(c,h,i),r.unshift(...h,c);let g=h.length;Zg(e,n,g)}else r.unshift(c),Zg(e,n,0);else i=i||new Map,c.findHostDirectiveDefs?.(c,r,i),r.push(c)}return r===null?null:[r,i]}function Zg(e,n,t){n.componentOffset=t,(e.components??=[]).push(n.index)}function s3(e,n,t){if(n){let r=e.localNames=[];for(let i=0;i<n.length;i+=2){let o=t[n[i+1]];if(o==null)throw new de(-301,!1);r.push(n[i],o)}}}function a3(e,n,t){if(t){if(n.exportAs)for(let r=0;r<n.exportAs.length;r++)t[n.exportAs[r]]=e;co(n)&&(t[""]=e)}}function l3(e,n,t){e.flags|=1,e.directiveStart=n,e.directiveEnd=n+t,e.providerIndexes=n}function c3(e,n,t,r,i){e.data[r]=i;let o=i.factory||(i.factory=Xs(i.type,!0)),c=new Zo(o,co(i),Z);e.blueprint[r]=c,t[r]=c,t3(e,n,r,Kx(e,t,i.hostVars,ui),i)}function u3(e,n,t){let r=cr(n,e),i=rb(t),o=e[Ii].rendererFactory,c=16;t.signals?c=4096:t.onPush&&(c=64);let h=rf(e,tf(e,i,null,c,r,n,null,o.createRenderer(r,t),null,null,null));e[n.index]=h}function d3(e,n,t,r,i,o){let c=cr(e,n);f3(n[Mt],c,o,e.value,t,r,i)}function f3(e,n,t,r,i,o,c){if(o==null)e.removeAttribute(n,i,t);else{let h=c==null?D0(o):c(o,r||"",i);e.setAttribute(n,i,h,t)}}function h3(e,n,t,r,i,o){let c=o[n];if(c!==null)for(let h=0;h<c.length;){let g=c[h++],m=c[h++],v=c[h++],x=c[h++];Qx(r,t,g,m,v,x)}}function p3(e,n,t){let r=null,i=0;for(;i<t.length;){let o=t[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(e.hasOwnProperty(o)){r===null&&(r=[]);let c=e[o];for(let h=0;h<c.length;h+=3)if(c[h]===n){r.push(o,c[h+1],c[h+2],t[i+1]);break}}i+=2}return r}function cb(e,n,t,r){return[e,!0,0,n,null,r,null,t,null,null]}function ub(e,n){let t=e.contentQueries;if(t!==null){let r=$e(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],c=t[i+1];if(c!==-1){let h=e.data[c];B0(o),h.contentQueries(2,n[c],c)}}}finally{$e(r)}}}function rf(e,n){return e[_l]?e[__][Ur]=n:e[_l]=n,e[__]=n,n}function Qg(e,n,t){B0(0);let r=$e(null);try{n(e,t)}finally{$e(r)}}function db(e){return e[vd]??=[]}function fb(e){return e.cleanup??=[]}function hb(e,n){let t=e[Ks],r=t?t.get(Ai,null):null;r&&r.handleError(n)}function sm(e,n,t,r,i){for(let o=0;o<t.length;){let c=t[o++],h=t[o++],g=t[o++],m=n[c],v=e.data[c];Qx(v,m,r,h,g,i)}}function g3(e,n,t){let r=Nv(n,e);SR(e[Mt],r,t)}function m3(e,n){let t=fo(n,e),r=t[Se];y3(r,t);let i=t[ar];i!==null&&t[Hr]===null&&(t[Hr]=Z0(i,t[Ks])),am(r,t,t[kn])}function y3(e,n){for(let t=n.length;t<e.blueprint.length;t++)n.push(e.blueprint[t])}function am(e,n,t){V0(n);try{let r=e.viewQuery;r!==null&&Qg(1,r,t);let i=e.template;i!==null&&Jx(e,n,i,1,t),e.firstCreatePass&&(e.firstCreatePass=!1),n[Si]?.finishViewCreation(e),e.staticContentQueries&&ub(e,n),e.staticViewQueries&&Qg(2,e.viewQuery,t);let o=e.components;o!==null&&w3(n,o)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{n[Ie]&=-5,U0()}}function w3(e,n){for(let t=0;t<n.length;t++)m3(e,n[t])}function of(e,n,t,r){let i=$e(null);try{let o=n.tView,h=e[Ie]&4096?4096:16,g=tf(e,o,t,h,null,n,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),m=e[n.index];g[qo]=m;let v=e[Si];return v!==null&&(g[Si]=v.createEmbeddedView(o)),am(o,g,t),g}finally{$e(i)}}function pb(e,n){let t=En+n;if(t<e.length)return e[t]}function bl(e,n){return!n||n.firstChild===null||Md(e)}function sf(e,n,t,r=!0){let i=n[Se];if(MR(i,n,e,t),r){let c=Xg(t,e),h=n[Mt],g=Gx(h,e[Di]);g!==null&&AR(i,e[Gr],h,n,g,c)}let o=n[Hr];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function gb(e,n){let t=xl(e,n);return t!==void 0&&Jd(t[Se],t),t}function Rd(e,n,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=n[t.index];o!==null&&r.push(zr(o)),li(o)&&C3(o,r);let c=t.type;if(c&8)Rd(e,n,t.child,r);else if(c&32){let h=J0(t,n),g;for(;g=h();)r.push(g)}else if(c&16){let h=$x(n,t);if(Array.isArray(h))r.push(...h);else{let g=Yo(n[lr]);Rd(g[Se],g,h,r,!0)}}t=i?t.projectionNext:t.next}return r}function C3(e,n){for(let t=En;t<e.length;t++){let r=e[t],i=r[Se].firstChild;i!==null&&Rd(r[Se],r,i,n)}e[Di]!==e[ar]&&n.push(e[Di])}var mb=[];function _3(e){return e[_r]??v3(e)}function v3(e){let n=mb.pop()??Object.create(b3);return n.lView=e,n}function x3(e){e.lView[_r]!==e&&(e.lView=null,mb.push(e))}var b3=Le(ne({},dl),{consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{Yd(e.lView)},consumerOnSignalRead(){this.lView[_r]=this}});function E3(e){let n=e[_r]??Object.create(I3);return n.lView=e,n}var I3=Le(ne({},dl),{consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{let n=Yo(e.lView);for(;n&&!yb(n[Se]);)n=Yo(n);n&&Rv(n)},consumerOnSignalRead(){this.lView[_r]=this}});function yb(e){return e.type!==2}var S3=100;function wb(e,n=!0,t=0){let r=e[Ii],i=r.rendererFactory,o=!1;o||i.begin?.();try{D3(e,t)}catch(c){throw n&&hb(e,c),c}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function D3(e,n){let t=Vv();try{x_(!0),Kg(e,n);let r=0;for(;qd(e);){if(r===S3)throw new de(103,!1);r++,Kg(e,1)}}finally{x_(t)}}function A3(e,n,t,r){let i=n[Ie];if((i&256)===256)return;let o=!1,c=!1;!o&&n[Ii].inlineEffectRunner?.flush(),V0(n);let h=!0,g=null,m=null;o||(yb(e)?(m=_3(n),g=Iu(m)):SC()===null?(h=!1,m=E3(n),g=Iu(m)):n[_r]&&(Rp(n[_r]),n[_r]=null));try{Ov(n),tO(e.bindingStartIndex),t!==null&&Jx(e,n,t,2,r);let v=(i&3)===3;if(!o)if(v){let A=e.preOrderCheckHooks;A!==null&&fd(n,A,null)}else{let A=e.preOrderHooks;A!==null&&hd(n,A,0,null),rg(n,0)}if(c||T3(n),Cb(n,0),e.contentQueries!==null&&ub(e,n),!o)if(v){let A=e.contentCheckHooks;A!==null&&fd(n,A)}else{let A=e.contentHooks;A!==null&&hd(n,A,1),rg(n,1)}zR(e,n);let x=e.components;x!==null&&vb(n,x,0);let I=e.viewQuery;if(I!==null&&Qg(2,I,r),!o)if(v){let A=e.viewCheckHooks;A!==null&&fd(n,A)}else{let A=e.viewHooks;A!==null&&hd(n,A,2),rg(n,2)}if(e.firstUpdatePass===!0&&(e.firstUpdatePass=!1),n[ng]){for(let A of n[ng])A();n[ng]=null}o||(n[Ie]&=-73)}catch(v){throw o||Yd(n),v}finally{m!==null&&(Np(m,g),h&&x3(m)),U0()}}function Cb(e,n){for(let t=hx(e);t!==null;t=px(t))for(let r=En;r<t.length;r++){let i=t[r];_b(i,n)}}function T3(e){for(let n=hx(e);n!==null;n=px(n)){if(!(n[Ie]&bd.HasTransplantedViews))continue;let t=n[Js];for(let r=0;r<t.length;r++){let i=t[r];Rv(i)}}}function M3(e,n,t){let r=fo(n,e);_b(r,t)}function _b(e,n){F0(e)&&Kg(e,n)}function Kg(e,n){let r=e[Se],i=e[Ie],o=e[_r],c=!!(n===0&&i&16);if(c||=!!(i&64&&n===0),c||=!!(i&1024),c||=!!(o?.dirty&&Op(o)),c||=!1,o&&(o.dirty=!1),e[Ie]&=-9217,c)A3(r,e,r.template,e[kn]);else if(i&8192){Cb(e,1);let h=r.components;h!==null&&vb(e,h,1)}}function vb(e,n,t){for(let r=0;r<n.length;r++)M3(e,n[r],t)}function lm(e,n){let t=Vv()?64:1088;for(e[Ii].changeDetectionScheduler?.notify(n);e;){e[Ie]|=t;let r=Yo(e);if(Ed(e)&&!r)return e;e=r}return null}var Jo=class{get rootNodes(){let n=this._lView,t=n[Se];return Rd(t,n,t.firstChild,[])}constructor(n,t,r=!0){this._lView=n,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[kn]}set context(n){this._lView[kn]=n}get destroyed(){return(this._lView[Ie]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let n=this._lView[In];if(li(n)){let t=n[xd],r=t?t.indexOf(this):-1;r>-1&&(xl(n,r),Cd(t,r))}this._attachedToViewContainer=!1}Jd(this._lView[Se],this._lView)}onDestroy(n){Pv(this._lView,n)}markForCheck(){lm(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Ie]&=-129}reattach(){Sg(this._lView),this._lView[Ie]|=128}detectChanges(){this._lView[Ie]|=1024,wb(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new de(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let n=Ed(this._lView),t=this._lView[qo];t!==null&&!n&&tm(t,this._lView),Hx(this._lView[Se],this._lView)}attachToAppRef(n){if(this._attachedToViewContainer)throw new de(902,!1);this._appRef=n;let t=Ed(this._lView),r=this._lView[qo];r!==null&&!t&&zx(r,this._lView),Sg(this._lView)}},El=(()=>{class e{static{this.__NG_ELEMENT_ID__=R3}}return e})(),N3=El,O3=class extends N3{constructor(n,t,r){super(),this._declarationLView=n,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,t){return this.createEmbeddedViewImpl(n,t)}createEmbeddedViewImpl(n,t,r){let i=of(this._declarationLView,this._declarationTContainer,n,{embeddedViewInjector:t,dehydratedView:r});return new Jo(i)}};function R3(){return cm(Qn(),nt())}function cm(e,n){return e.type&4?new O3(n,e,la(e,n)):null}var P3=new RegExp(`^(\\d+)*(${wx}|${yx})*(.*)`);function k3(e){let n=e.match(P3),[t,r,i,o]=n,c=r?parseInt(r,10):i,h=[];for(let[g,m,v]of o.matchAll(/(f|n)(\d*)/g)){let x=parseInt(v,10)||1;h.push(m,x)}return[c,...h]}function L3(e){return!e.prev&&e.parent?.type===8}function cg(e){return e.index-fn}function F3(e,n){let t=e.i18nNodes;if(t)return t.get(n)}function af(e,n,t,r){let i=cg(r),o=F3(e,i);if(o===void 0){let c=e.data[$O];if(c?.[i])o=V3(c[i],t);else if(n.firstChild===r)o=e.firstChild;else{let h=r.prev===null,g=r.prev??r.parent;if(L3(r)){let m=cg(r.parent);o=Ug(e,m)}else{let m=cr(g,t);if(h)o=m.firstChild;else{let v=cg(g),x=Ug(e,v);if(g.type===2&&x){let A=Q0(e,v)+1;o=lf(A,x)}else o=m.nextSibling}}}}return o}function lf(e,n){let t=n;for(let r=0;r<e;r++)t=t.nextSibling;return t}function B3(e,n){let t=e;for(let r=0;r<n.length;r+=2){let i=n[r],o=n[r+1];for(let c=0;c<o;c++)switch(i){case Vg.FirstChild:t=t.firstChild;break;case Vg.NextSibling:t=t.nextSibling;break}}return t}function V3(e,n){let[t,...r]=k3(e),i;if(t===yx)i=n[lr][ar];else if(t===wx)i=ER(n[lr][ar]);else{let o=Number(t);i=zr(n[o+fn])}return B3(i,r)}var U3=!1;function j3(e){U3=e}function H3(e){let n=e[Hr];if(n){let{i18nNodes:t,dehydratedIcuData:r}=n;if(t&&r){let i=e[Mt];for(let o of r.values())z3(i,t,o)}n.i18nNodes=void 0,n.dehydratedIcuData=void 0}}function z3(e,n,t){for(let r of t.node.cases[t.case]){let i=n.get(r.index-fn);i&&rm(e,i,!1)}}function xb(e){let n=e[vl]??[],r=e[In][Mt];for(let i of n)W3(i,r);e[vl]=Un}function W3(e,n){let t=0,r=e.firstChild;if(r){let i=e.data[Nd];for(;t<i;){let o=r.nextSibling;rm(n,r,!1),r=o,t++}}}function bb(e){xb(e);let n=e[ar];jr(n)&&Pd(n);for(let t=En;t<e.length;t++)Pd(e[t])}function Pd(e){H3(e);let n=e[Se];for(let t=fn;t<n.bindingStartIndex;t++)if(li(e[t])){let r=e[t];bb(r)}else jr(e[t])&&Pd(e[t])}function G3(e){let n=e._views;for(let t of n){let r=QO(t);r!==null&&r[ar]!==null&&(jr(r)?Pd(r):bb(r))}}function $3(e,n){let t=[];for(let r of n)for(let i=0;i<(r[Cx]??1);i++){let o={data:r,firstChild:null};r[Nd]>0&&(o.firstChild=e,e=lf(r[Nd],e)),t.push(o)}return[e,t]}var Eb=()=>null;function q3(e,n){let t=e[vl];return!n||t===null||t.length===0?null:t[0].data[GO]===n?t.shift():(xb(e),null)}function Y3(){Eb=q3}function Il(e,n){return Eb(e,n)}var ta=class{},um=new ve("",{providedIn:"root",factory:()=>!1});var Ib=new ve(""),Sb=new ve(""),Jg=class{},kd=class{};function X3(e){let n=Error(`No component factory found for ${Zn(e)}.`);return n[Z3]=e,n}var Z3="ngComponent";var e0=class{resolveComponentFactory(n){throw X3(n)}},na=class{static{this.NULL=new e0}},ra=class{},$r=(()=>{class e{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>Q3()}}return e})();function Q3(){let e=nt(),n=Qn(),t=fo(n.index,e);return(jr(t)?t:e)[Mt]}var K3=(()=>{class e{static{this.\u0275prov=pe({token:e,providedIn:"root",factory:()=>null})}}return e})();function t0(e,n,t){let r=t?e.styles:null,i=t?e.classes:null,o=0;if(n!==null)for(let c=0;c<n.length;c++){let h=n[c];if(typeof h=="number")o=h;else if(o==1)i=yg(i,h);else if(o==2){let g=h,m=n[++c];r=yg(r,g+": "+m+";")}}t?e.styles=r:e.stylesWithoutHost=r,t?e.classes=i:e.classesWithoutHost=i}var Ld=class extends na{constructor(n){super(),this.ngModule=n}resolveComponentFactory(n){let t=$o(n);return new Sl(t,this.ngModule)}};function U_(e,n){let t=[];for(let r in e){if(!e.hasOwnProperty(r))continue;let i=e[r];if(i===void 0)continue;let o=Array.isArray(i),c=o?i[0]:i,h=o?i[1]:lo.None;n?t.push({propName:c,templateName:r,isSignal:(h&lo.SignalBased)!==0}):t.push({propName:c,templateName:r})}return t}function J3(e){let n=e.toLowerCase();return n==="svg"?BN:n==="math"?VN:null}var Sl=class extends kd{get inputs(){let n=this.componentDef,t=n.inputTransforms,r=U_(n.inputs,!0);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return U_(this.componentDef.outputs,!1)}constructor(n,t){super(),this.componentDef=n,this.ngModule=t,this.componentType=n.type,this.selector=yN(n.selectors),this.ngContentSelectors=n.ngContentSelectors?n.ngContentSelectors:[],this.isBoundToModule=!!t}create(n,t,r,i){let o=$e(null);try{i=i||this.ngModule;let c=i instanceof vr?i:i?.injector;c&&this.componentDef.getStandaloneInjector!==null&&(c=this.componentDef.getStandaloneInjector(c)||c);let h=c?new Ag(n,c):n,g=h.get(ra,null);if(g===null)throw new de(407,!1);let m=h.get(K3,null),v=h.get(ta,null),x={rendererFactory:g,sanitizer:m,inlineEffectRunner:null,changeDetectionScheduler:v},I=g.createRenderer(null,this.componentDef),A=this.componentDef.selectors[0][0]||"div",R=r?$R(I,r,this.componentDef.encapsulation,h):em(I,A,J3(A)),j=512;this.componentDef.signals?j|=4096:this.componentDef.onPush||(j|=16);let $=null;R!==null&&($=Z0(R,h,!0));let W=om(0,null,null,1,0,null,null,null,null,null,null),ce=tf(null,W,null,j,null,null,x,I,h,null,$);V0(ce);let Xe,ge,H=null;try{let fe=this.componentDef,G,rr=null;fe.findHostDirectiveDefs?(G=[],rr=new Map,fe.findHostDirectiveDefs(fe,G,rr),G.push(fe)):G=[fe];let On=eP(ce,R);H=tP(On,R,fe,G,ce,x,I),ge=L0(W,fn),R&&iP(I,fe,R,r),t!==void 0&&oP(ge,this.ngContentSelectors,t),Xe=rP(H,fe,G,rr,ce,[sP]),am(W,ce,null)}catch(fe){throw H!==null&&Fg(H),Fg(ce),fe}finally{U0()}return new n0(this.componentType,Xe,la(ge,ce),ce,ge)}finally{$e(o)}}},n0=class extends Jg{constructor(n,t,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new Jo(i,void 0,!1),this.componentType=n}setInput(n,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[n])){if(this.previousInputValues??=new Map,this.previousInputValues.has(n)&&Object.is(this.previousInputValues.get(n),t))return;let o=this._rootLView;sm(o[Se],o,i,n,t),this.previousInputValues.set(n,t);let c=fo(this._tNode.index,o);lm(c,1)}}get injector(){return new Wo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(n){this.hostView.onDestroy(n)}};function eP(e,n){let t=e[Se],r=fn;return e[r]=n,nf(t,r,2,"#host",null)}function tP(e,n,t,r,i,o,c){let h=i[Se];nP(r,e,n,c);let g=null;n!==null&&(g=Z0(n,i[Ks]));let m=o.rendererFactory.createRenderer(n,t),v=16;t.signals?v=4096:t.onPush&&(v=64);let x=tf(i,rb(t),null,v,i[e.index],e,o,m,null,null,g);return h.firstCreatePass&&Zg(h,e,r.length-1),rf(i,x),i[e.index]=x}function nP(e,n,t,r){for(let i of e)n.mergedAttrs=wl(n.mergedAttrs,i.hostAttrs);n.mergedAttrs!==null&&(t0(n,n.mergedAttrs,!0),t!==null&&Xx(r,t,n))}function rP(e,n,t,r,i,o){let c=Qn(),h=i[Se],g=cr(c,i);ab(h,i,c,t,null,r);for(let v=0;v<t.length;v++){let x=c.directiveStart+v,I=Qo(i,h,x,c);Ko(I,i)}lb(h,i,c),g&&Ko(g,i);let m=Qo(i,h,c.directiveStart+c.componentOffset,c);if(e[kn]=i[kn]=m,o!==null)for(let v of o)v(m,n);return eb(h,c,i),m}function iP(e,n,t,r){if(r)vg(e,t,["ng-version","18.2.7"]);else{let{attrs:i,classes:o}=wN(n.selectors[0]);i&&vg(e,t,i),o&&o.length>0&&Yx(e,t,o.join(" "))}}function oP(e,n,t){let r=e.projection=[];for(let i=0;i<n.length;i++){let o=t[i];r.push(o!=null?Array.from(o):null)}}function sP(){let e=Qn();z0(nt()[Se],e)}var da=(()=>{class e{static{this.__NG_ELEMENT_ID__=aP}}return e})();function aP(){let e=Qn();return Ab(e,nt())}var lP=da,Db=class extends lP{constructor(n,t,r){super(),this._lContainer=n,this._hostTNode=t,this._hostLView=r}get element(){return la(this._hostTNode,this._hostLView)}get injector(){return new Wo(this._hostTNode,this._hostLView)}get parentInjector(){let n=W0(this._hostTNode,this._hostLView);if(Zv(n)){let t=Sd(n,this._hostLView),r=Id(n),i=t[Se].data[r+8];return new Wo(i,t)}else return new Wo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(n){let t=j_(this._lContainer);return t!==null&&t[n]||null}get length(){return this._lContainer.length-En}createEmbeddedView(n,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let c=Il(this._lContainer,n.ssrId),h=n.createEmbeddedViewImpl(t||{},o,c);return this.insertImpl(h,i,bl(this._hostTNode,c)),h}createComponent(n,t,r,i,o){let c=n&&!PN(n),h;if(c)h=t;else{let R=t||{};h=R.index,r=R.injector,i=R.projectableNodes,o=R.environmentInjector||R.ngModuleRef}let g=c?n:new Sl($o(n)),m=r||this.parentInjector;if(!o&&g.ngModule==null){let j=(c?m:this.parentInjector).get(vr,null);j&&(o=j)}let v=$o(g.componentType??{}),x=Il(this._lContainer,v?.id??null),I=x?.firstChild??null,A=g.create(m,i,I,o);return this.insertImpl(A.hostView,h,bl(this._hostTNode,x)),A}insert(n,t){return this.insertImpl(n,t,!0)}insertImpl(n,t,r){let i=n._lView;if(HN(i)){let h=this.indexOf(n);if(h!==-1)this.detach(h);else{let g=i[In],m=new Db(g,g[Gr],g[In]);m.detach(m.indexOf(n))}}let o=this._adjustIndex(t),c=this._lContainer;return sf(c,i,o,r),n.attachToViewContainerRef(),cv(ug(c),o,n),n}move(n,t){return this.insert(n,t)}indexOf(n){let t=j_(this._lContainer);return t!==null?t.indexOf(n):-1}remove(n){let t=this._adjustIndex(n,-1),r=xl(this._lContainer,t);r&&(Cd(ug(this._lContainer),t),Jd(r[Se],r))}detach(n){let t=this._adjustIndex(n,-1),r=xl(this._lContainer,t);return r&&Cd(ug(this._lContainer),t)!=null?new Jo(r):null}_adjustIndex(n,t=0){return n??this.length+t}};function j_(e){return e[xd]}function ug(e){return e[xd]||(e[xd]=[])}function Ab(e,n){let t,r=n[e.index];return li(r)?t=r:(t=cb(r,n,null,e),n[e.index]=t,rf(n,t)),Tb(t,n,e,r),new Db(t,e,n)}function cP(e,n){let t=e[Mt],r=t.createComment(""),i=cr(n,e),o=Gx(t,i);return Od(t,o,r,kR(t,i),!1),r}var Tb=Mb,dm=()=>!1;function uP(e,n,t){return dm(e,n,t)}function Mb(e,n,t,r){if(e[Di])return;let i;t.type&8?i=zr(r):i=cP(n,t),e[Di]=i}function dP(e,n,t){if(e[Di]&&e[vl])return!0;let r=t[Hr],i=n.index-fn;if(!r||LO(n)||Pl(r,i))return!1;let c=Ug(r,i),h=r.data[X0]?.[i],[g,m]=$3(c,h);return e[Di]=g,e[vl]=m,!0}function fP(e,n,t,r){dm(e,t,n)||Mb(e,n,t,r)}function hP(){Tb=fP,dm=dP}var r0=class e{constructor(n){this.queryList=n,this.matches=null}clone(){return new e(this.queryList)}setDirty(){this.queryList.setDirty()}},i0=class e{constructor(n=[]){this.queries=n}createEmbeddedView(n){let t=n.queries;if(t!==null){let r=n.contentQueries!==null?n.contentQueries[0]:t.length,i=[];for(let o=0;o<r;o++){let c=t.getByIndex(o),h=this.queries[c.indexInDeclarationView];i.push(h.clone())}return new e(i)}return null}insertView(n){this.dirtyQueriesWithMatches(n)}detachView(n){this.dirtyQueriesWithMatches(n)}finishViewCreation(n){this.dirtyQueriesWithMatches(n)}dirtyQueriesWithMatches(n){for(let t=0;t<this.queries.length;t++)fm(n,t).matches!==null&&this.queries[t].setDirty()}},o0=class{constructor(n,t,r=null){this.flags=t,this.read=r,typeof n=="string"?this.predicate=vP(n):this.predicate=n}},s0=class e{constructor(n=[]){this.queries=n}elementStart(n,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(n,t)}elementEnd(n){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(n)}embeddedTView(n){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,o=this.getByIndex(r).embeddedTView(n,i);o&&(o.indexInDeclarationView=r,t!==null?t.push(o):t=[o])}return t!==null?new e(t):null}template(n,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(n,t)}getByIndex(n){return this.queries[n]}get length(){return this.queries.length}track(n){this.queries.push(n)}},a0=class e{constructor(n,t=-1){this.metadata=n,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(n,t){this.isApplyingToNode(t)&&this.matchTNode(n,t)}elementEnd(n){this._declarationNodeIndex===n.index&&(this._appliesToNextNode=!1)}template(n,t){this.elementStart(n,t)}embeddedTView(n,t){return this.isApplyingToNode(n)?(this.crossesNgTemplate=!0,this.addMatch(-n.index,t),new e(this.metadata)):null}isApplyingToNode(n){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=n.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(n,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(n,t,pP(t,o)),this.matchTNodeWithReadOption(n,t,pd(t,n,o,!1,!1))}else r===El?t.type&4&&this.matchTNodeWithReadOption(n,t,-1):this.matchTNodeWithReadOption(n,t,pd(t,n,r,!1,!1))}matchTNodeWithReadOption(n,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===ur||i===da||i===El&&t.type&4)this.addMatch(t.index,-2);else{let o=pd(t,n,i,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(n,t){this.matches===null?this.matches=[n,t]:this.matches.push(n,t)}};function pP(e,n){let t=e.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===n)return t[r+1]}return null}function gP(e,n){return e.type&11?la(e,n):e.type&4?cm(e,n):null}function mP(e,n,t,r){return t===-1?gP(n,e):t===-2?yP(e,n,r):Qo(e,e[Se],t,n)}function yP(e,n,t){if(t===ur)return la(n,e);if(t===El)return cm(n,e);if(t===da)return Ab(n,e)}function Nb(e,n,t,r){let i=n[Si].queries[r];if(i.matches===null){let o=e.data,c=t.matches,h=[];for(let g=0;c!==null&&g<c.length;g+=2){let m=c[g];if(m<0)h.push(null);else{let v=o[m];h.push(mP(n,v,c[g+1],t.metadata.read))}}i.matches=h}return i.matches}function l0(e,n,t,r){let i=e.queries.getByIndex(t),o=i.matches;if(o!==null){let c=Nb(e,n,i,t);for(let h=0;h<o.length;h+=2){let g=o[h];if(g>0)r.push(c[h/2]);else{let m=o[h+1],v=n[-g];for(let x=En;x<v.length;x++){let I=v[x];I[qo]===I[In]&&l0(I[Se],I,m,r)}if(v[Js]!==null){let x=v[Js];for(let I=0;I<x.length;I++){let A=x[I];l0(A[Se],A,m,r)}}}}}return r}function wP(e,n){return e[Si].queries[n].queryList}function CP(e,n,t){let r=new Lg((t&4)===4);return ZR(e,n,r,r.destroy),(n[Si]??=new i0).queries.push(new r0(r))-1}function _P(e,n,t){let r=Sn();return r.firstCreatePass&&(xP(r,new o0(e,n,t),-1),(n&2)===2&&(r.staticViewQueries=!0)),CP(r,nt(),n)}function vP(e){return e.split(",").map(n=>n.trim())}function xP(e,n,t){e.queries===null&&(e.queries=new s0),e.queries.track(new a0(n,t))}function fm(e,n){return e.queries.getByIndex(n)}function bP(e,n){let t=e[Se],r=fm(t,n);return r.crossesNgTemplate?l0(t,e,n,[]):Nb(t,e,r,n)}var H_=new Set;function Li(e){H_.has(e)||(H_.add(e),performance?.mark?.("mark_feature_usage",{detail:{feature:e}}))}function EP(e){return typeof e=="function"&&e[xi]!==void 0}function Ll(e,n){Li("NgSignals");let t=FC(e),r=t[xi];return n?.equal&&(r.equal=n.equal),t.set=i=>Pp(r,i),t.update=i=>BC(r,i),t.asReadonly=IP.bind(t),t}function IP(){let e=this[xi];if(e.readonlyFn===void 0){let n=()=>this();n[xi]=e,e.readonlyFn=n}return e.readonlyFn}function Ob(e){return EP(e)&&typeof e.set=="function"}function SP(e){return Object.getPrototypeOf(e.prototype).constructor}function qr(e){let n=SP(e.type),t=!0,r=[e];for(;n;){let i;if(co(e))i=n.\u0275cmp||n.\u0275dir;else{if(n.\u0275cmp)throw new de(903,!1);i=n.\u0275dir}if(i){if(t){r.push(i);let c=e;c.inputs=ad(e.inputs),c.inputTransforms=ad(e.inputTransforms),c.declaredInputs=ad(e.declaredInputs),c.outputs=ad(e.outputs);let h=i.hostBindings;h&&NP(e,h);let g=i.viewQuery,m=i.contentQueries;if(g&&TP(e,g),m&&MP(e,m),DP(e,i),FM(e.outputs,i.outputs),co(i)&&i.data.animation){let v=e.data;v.animation=(v.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let c=0;c<o.length;c++){let h=o[c];h&&h.ngInherit&&h(e),h===qr&&(t=!1)}}n=Object.getPrototypeOf(n)}AP(r)}function DP(e,n){for(let t in n.inputs){if(!n.inputs.hasOwnProperty(t)||e.inputs.hasOwnProperty(t))continue;let r=n.inputs[t];if(r!==void 0&&(e.inputs[t]=r,e.declaredInputs[t]=n.declaredInputs[t],n.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!n.inputTransforms.hasOwnProperty(i))continue;e.inputTransforms??={},e.inputTransforms[i]=n.inputTransforms[i]}}}function AP(e){let n=0,t=null;for(let r=e.length-1;r>=0;r--){let i=e[r];i.hostVars=n+=i.hostVars,i.hostAttrs=wl(i.hostAttrs,t=wl(t,i.hostAttrs))}}function ad(e){return e===Zs?{}:e===Un?[]:e}function TP(e,n){let t=e.viewQuery;t?e.viewQuery=(r,i)=>{n(r,i),t(r,i)}:e.viewQuery=n}function MP(e,n){let t=e.contentQueries;t?e.contentQueries=(r,i,o)=>{n(r,i,o),t(r,i,o)}:e.contentQueries=n}function NP(e,n){let t=e.hostBindings;t?e.hostBindings=(r,i)=>{n(r,i),t(r,i)}:e.hostBindings=n}var uo=class{},Dl=class{};var c0=class extends uo{constructor(n,t,r,i=!0){super(),this.ngModuleType=n,this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Ld(this);let o=yv(n);this._bootstrapComponents=Vx(o.bootstrap),this._r3Injector=ox(n,t,[{provide:uo,useValue:this},{provide:na,useValue:this.componentFactoryResolver},...r],Zn(n),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let n=this._r3Injector;!n.destroyed&&n.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(n){this.destroyCbs.push(n)}},u0=class extends Dl{constructor(n){super(),this.moduleType=n}create(n){return new c0(this.moduleType,n,[])}};var Fd=class extends uo{constructor(n){super(),this.componentFactoryResolver=new Ld(this),this.instance=null;let t=new Cl([...n.providers,{provide:uo,useValue:this},{provide:na,useValue:this.componentFactoryResolver}],n.parent||P0(),n.debugName,new Set(["environment"]));this.injector=t,n.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(n){this.injector.onDestroy(n)}};function hm(e,n,t=null){return new Fd({providers:e,parent:n,debugName:t,runEnvironmentInitializers:!0}).injector}function Rb(e){return e!==null&&(typeof e=="function"||typeof e=="object")}function OP(e,n,t){return e[n]=t}function Wr(e,n,t){let r=e[n];return Object.is(r,t)?!1:(e[n]=t,!0)}function RP(e,n,t,r){let i=Wr(e,n,t);return Wr(e,n+1,r)||i}function PP(e,n,t,r,i){let o=RP(e,n,t,r);return Wr(e,n+2,i)||o}function Fl(e){return(e.flags&32)===32}function kP(e,n,t,r,i,o,c,h,g){let m=n.consts,v=nf(n,e,4,c||null,h||null);sb(n,t,v,ea(m,g)),z0(n,v);let x=v.tView=om(2,v,r,i,o,n.directiveRegistry,n.pipeRegistry,null,n.schemas,m,null);return n.queries!==null&&(n.queries.template(n,v),x.queries=n.queries.embeddedTView(v)),v}function d0(e,n,t,r,i,o,c,h,g,m){let v=t+fn,x=n.firstCreatePass?kP(v,n,e,r,i,o,c,h,g):n.data[v];Rl(x,!1);let I=Pb(n,e,x,t);H0()&&nm(n,e,I,x),Ko(I,e);let A=cb(I,e,I,x);return e[v]=A,rf(e,A),uP(A,x,e),k0(x)&&tb(n,e,x),g!=null&&nb(e,x,m),x}function Ut(e,n,t,r,i,o,c,h){let g=nt(),m=Sn(),v=ea(m.consts,o);return d0(g,m,e,n,t,r,i,v,c,h),Ut}var Pb=kb;function kb(e,n,t,r){return po(!0),n[Mt].createComment("")}function LP(e,n,t,r){let i=n[Hr],o=!i||Ol()||Fl(t)||Pl(i,r);if(po(o),o)return kb(e,n,t,r);let c=i.data[WO]?.[r]??null;c!==null&&t.tView!==null&&t.tView.ssrId===null&&(t.tView.ssrId=c);let h=af(i,e,n,t);Qd(i,r,h);let g=Q0(i,r);return lf(g,h)}function FP(){Pb=LP}var gl=function(e){return e[e.EarlyRead=0]="EarlyRead",e[e.Write=1]="Write",e[e.MixedReadWrite=2]="MixedReadWrite",e[e.Read=3]="Read",e}(gl||{}),BP=(()=>{class e{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=pe({token:e,providedIn:"root",factory:()=>new e})}}return e})(),z_=class e{constructor(){this.ngZone=K(Xt),this.scheduler=K(ta),this.errorHandler=K(Ai,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[gl.EarlyRead,gl.Write,gl.MixedReadWrite,gl.Read]}execute(){this.executing=!0;for(let n of e.PHASES)for(let t of this.sequences)if(!(t.erroredOrDestroyed||!t.hooks[n]))try{t.pipelinedValue=this.ngZone.runOutsideAngular(()=>t.hooks[n](t.pipelinedValue))}catch(r){t.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let n of this.sequences)n.afterRun(),n.once&&this.sequences.delete(n);for(let n of this.deferredRegistrations)this.sequences.add(n);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(n){this.executing?this.deferredRegistrations.add(n):(this.sequences.add(n),this.scheduler.notify(6))}unregister(n){this.executing&&this.sequences.has(n)?(n.erroredOrDestroyed=!0,n.pipelinedValue=void 0,n.once=!0):(this.sequences.delete(n),this.deferredRegistrations.delete(n))}static{this.\u0275prov=pe({token:e,providedIn:"root",factory:()=>new e})}};function cf(e,n,t,r){let i=nt(),o=aa();if(Wr(i,o,n)){let c=Sn(),h=j0();d3(h,i,e,n,t,r)}return cf}function VP(e,n,t,r){return Wr(e,aa(),t)?n+D0(t)+r:ui}function ld(e,n){return e<<17|n<<2}function es(e){return e>>17&32767}function UP(e){return(e&2)==2}function jP(e,n){return e&131071|n<<17}function f0(e){return e|2}function ia(e){return(e&131068)>>2}function dg(e,n){return e&-131069|n<<2}function HP(e){return(e&1)===1}function h0(e){return e|1}function zP(e,n,t,r,i,o){let c=o?n.classBindings:n.styleBindings,h=es(c),g=ia(c);e[r]=t;let m=!1,v;if(Array.isArray(t)){let x=t;v=x[1],(v===null||Ml(x,v)>0)&&(m=!0)}else v=t;if(i)if(g!==0){let I=es(e[h+1]);e[r+1]=ld(I,h),I!==0&&(e[I+1]=dg(e[I+1],r)),e[h+1]=jP(e[h+1],r)}else e[r+1]=ld(h,0),h!==0&&(e[h+1]=dg(e[h+1],r)),h=r;else e[r+1]=ld(g,0),h===0?h=r:e[g+1]=dg(e[g+1],r),g=r;m&&(e[r+1]=f0(e[r+1])),W_(e,v,r,!0),W_(e,v,r,!1),WP(n,v,e,r,o),c=ld(h,g),o?n.classBindings=c:n.styleBindings=c}function WP(e,n,t,r,i){let o=i?e.residualClasses:e.residualStyles;o!=null&&typeof n=="string"&&Ml(o,n)>=0&&(t[r+1]=h0(t[r+1]))}function W_(e,n,t,r){let i=e[t+1],o=n===null,c=r?es(i):ia(i),h=!1;for(;c!==0&&(h===!1||o);){let g=e[c],m=e[c+1];GP(g,n)&&(h=!0,e[c+1]=r?h0(m):f0(m)),c=r?es(m):ia(m)}h&&(e[t+1]=r?f0(i):h0(i))}function GP(e,n){return e===null||n==null||(Array.isArray(e)?e[1]:e)===n?!0:Array.isArray(e)&&typeof n=="string"?Ml(e,n)>=0:!1}var Vr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function $P(e){return e.substring(Vr.key,Vr.keyEnd)}function qP(e){return YP(e),Lb(e,Fb(e,0,Vr.textEnd))}function Lb(e,n){let t=Vr.textEnd;return t===n?-1:(n=Vr.keyEnd=XP(e,Vr.key=n,t),Fb(e,n,t))}function YP(e){Vr.key=0,Vr.keyEnd=0,Vr.value=0,Vr.valueEnd=0,Vr.textEnd=e.length}function Fb(e,n,t){for(;n<t&&e.charCodeAt(n)<=32;)n++;return n}function XP(e,n,t){for(;n<t&&e.charCodeAt(n)>32;)n++;return n}function kt(e,n,t){let r=nt(),i=aa();if(Wr(r,i,n)){let o=Sn(),c=j0();ob(o,c,r,e,n,r[Mt],t,!1)}return kt}function p0(e,n,t,r,i){let o=n.inputs,c=i?"class":"style";sm(e,t,o[c],c,r)}function uf(e,n,t){return Vb(e,n,t,!1),uf}function Yr(e,n){return Vb(e,n,null,!0),Yr}function Bb(e){QP(rk,ZP,e,!0)}function ZP(e,n){for(let t=qP(n);t>=0;t=Lb(n,t))N0(e,$P(n),!0)}function Vb(e,n,t,r){let i=nt(),o=Sn(),c=Uv(2);if(o.firstUpdatePass&&jb(o,e,c,r),n!==ui&&Wr(i,c,n)){let h=o.data[ho()];Hb(o,h,i,i[Mt],e,i[c+1]=ok(n,t),r,c)}}function QP(e,n,t,r){let i=Sn(),o=Uv(2);i.firstUpdatePass&&jb(i,null,o,r);let c=nt();if(t!==ui&&Wr(c,o,t)){let h=i.data[ho()];if(zb(h,r)&&!Ub(i,o)){let g=r?h.classesWithoutHost:h.stylesWithoutHost;g!==null&&(t=yg(g,t||"")),p0(i,h,c,t,r)}else ik(i,h,c,c[Mt],c[o+1],c[o+1]=nk(e,n,t),r,o)}}function Ub(e,n){return n>=e.expandoStartIndex}function jb(e,n,t,r){let i=e.data;if(i[t+1]===null){let o=i[ho()],c=Ub(e,t);zb(o,r)&&n===null&&!c&&(n=!1),n=KP(i,o,n,r),zP(i,o,n,t,c,r)}}function KP(e,n,t,r){let i=oO(e),o=r?n.residualClasses:n.residualStyles;if(i===null)(r?n.classBindings:n.styleBindings)===0&&(t=fg(null,e,n,t,r),t=Al(t,n.attrs,r),o=null);else{let c=n.directiveStylingLast;if(c===-1||e[c]!==i)if(t=fg(i,e,n,t,r),o===null){let g=JP(e,n,r);g!==void 0&&Array.isArray(g)&&(g=fg(null,e,n,g[1],r),g=Al(g,n.attrs,r),ek(e,n,r,g))}else o=tk(e,n,r)}return o!==void 0&&(r?n.residualClasses=o:n.residualStyles=o),t}function JP(e,n,t){let r=t?n.classBindings:n.styleBindings;if(ia(r)!==0)return e[es(r)]}function ek(e,n,t,r){let i=t?n.classBindings:n.styleBindings;e[es(i)]=r}function tk(e,n,t){let r,i=n.directiveEnd;for(let o=1+n.directiveStylingLast;o<i;o++){let c=e[o].hostAttrs;r=Al(r,c,t)}return Al(r,n.attrs,t)}function fg(e,n,t,r,i){let o=null,c=t.directiveEnd,h=t.directiveStylingLast;for(h===-1?h=t.directiveStart:h++;h<c&&(o=n[h],r=Al(r,o.hostAttrs,i),o!==e);)h++;return e!==null&&(t.directiveStylingLast=h),r}function Al(e,n,t){let r=t?1:2,i=-1;if(n!==null)for(let o=0;o<n.length;o++){let c=n[o];typeof c=="number"?i=c:i===r&&(Array.isArray(e)||(e=e===void 0?[]:["",e]),N0(e,c,t?!0:n[++o]))}return e===void 0?null:e}function nk(e,n,t){if(t==null||t==="")return Un;let r=[],i=Pi(t);if(Array.isArray(i))for(let o=0;o<i.length;o++)e(r,i[o],!0);else if(typeof i=="object")for(let o in i)i.hasOwnProperty(o)&&e(r,o,i[o]);else typeof i=="string"&&n(r,i);return r}function rk(e,n,t){let r=String(n);r!==""&&!r.includes(" ")&&N0(e,r,t)}function ik(e,n,t,r,i,o,c,h){i===ui&&(i=Un);let g=0,m=0,v=0<i.length?i[0]:null,x=0<o.length?o[0]:null;for(;v!==null||x!==null;){let I=g<i.length?i[g+1]:void 0,A=m<o.length?o[m+1]:void 0,R=null,j;v===x?(g+=2,m+=2,I!==A&&(R=x,j=A)):x===null||v!==null&&v<x?(g+=2,R=v):(m+=2,R=x,j=A),R!==null&&Hb(e,n,t,r,R,j,c,h),v=g<i.length?i[g]:null,x=m<o.length?o[m]:null}}function Hb(e,n,t,r,i,o,c,h){if(!(n.type&3))return;let g=e.data,m=g[h+1],v=HP(m)?G_(g,n,t,i,ia(m),c):void 0;if(!Bd(v)){Bd(o)||UP(m)&&(o=G_(g,null,t,i,h,c));let x=Nv(ho(),t);jR(r,c,x,i,o)}}function G_(e,n,t,r,i,o){let c=n===null,h;for(;i>0;){let g=e[i],m=Array.isArray(g),v=m?g[1]:g,x=v===null,I=t[i+1];I===ui&&(I=x?Un:void 0);let A=x?eg(I,r):v===r?I:void 0;if(m&&!Bd(A)&&(A=eg(g,r)),Bd(A)&&(h=A,c))return h;let R=e[i+1];i=c?es(R):ia(R)}if(n!==null){let g=o?n.residualClasses:n.residualStyles;g!=null&&(h=eg(g,r))}return h}function Bd(e){return e!==void 0}function ok(e,n){return e==null||e===""||(typeof n=="string"?e=e+n:typeof e=="object"&&(e=Zn(Pi(e)))),e}function zb(e,n){return(e.flags&(n?8:16))!==0}var g0=class{destroy(n){}updateValue(n,t){}swap(n,t){let r=Math.min(n,t),i=Math.max(n,t),o=this.detach(i);if(i-r>1){let c=this.detach(r);this.attach(r,o),this.attach(i,c)}else this.attach(r,o)}move(n,t){this.attach(t,this.detach(n))}};function hg(e,n,t,r,i){return e===t&&Object.is(n,r)?1:Object.is(i(e,n),i(t,r))?-1:0}function sk(e,n,t){let r,i,o=0,c=e.length-1,h=void 0;if(Array.isArray(n)){let g=n.length-1;for(;o<=c&&o<=g;){let m=e.at(o),v=n[o],x=hg(o,m,o,v,t);if(x!==0){x<0&&e.updateValue(o,v),o++;continue}let I=e.at(c),A=n[g],R=hg(c,I,g,A,t);if(R!==0){R<0&&e.updateValue(c,A),c--,g--;continue}let j=t(o,m),$=t(c,I),W=t(o,v);if(Object.is(W,$)){let ce=t(g,A);Object.is(ce,j)?(e.swap(o,c),e.updateValue(c,A),g--,c--):e.move(c,o),e.updateValue(o,v),o++;continue}if(r??=new Vd,i??=q_(e,o,c,t),m0(e,r,o,W))e.updateValue(o,v),o++,c++;else if(i.has(W))r.set(j,e.detach(o)),c--;else{let ce=e.create(o,n[o]);e.attach(o,ce),o++,c++}}for(;o<=g;)$_(e,r,t,o,n[o]),o++}else if(n!=null){let g=n[Symbol.iterator](),m=g.next();for(;!m.done&&o<=c;){let v=e.at(o),x=m.value,I=hg(o,v,o,x,t);if(I!==0)I<0&&e.updateValue(o,x),o++,m=g.next();else{r??=new Vd,i??=q_(e,o,c,t);let A=t(o,x);if(m0(e,r,o,A))e.updateValue(o,x),o++,c++,m=g.next();else if(!i.has(A))e.attach(o,e.create(o,x)),o++,c++,m=g.next();else{let R=t(o,v);r.set(R,e.detach(o)),c--}}}for(;!m.done;)$_(e,r,t,e.length,m.value),m=g.next()}for(;o<=c;)e.destroy(e.detach(c--));r?.forEach(g=>{e.destroy(g)})}function m0(e,n,t,r){return n!==void 0&&n.has(r)?(e.attach(t,n.get(r)),n.delete(r),!0):!1}function $_(e,n,t,r,i){if(m0(e,n,r,t(r,i)))e.updateValue(r,i);else{let o=e.create(r,i);e.attach(r,o)}}function q_(e,n,t,r){let i=new Set;for(let o=n;o<=t;o++)i.add(r(o,e.at(o)));return i}var Vd=class{constructor(){this.kvMap=new Map,this._vMap=void 0}has(n){return this.kvMap.has(n)}delete(n){if(!this.has(n))return!1;let t=this.kvMap.get(n);return this._vMap!==void 0&&this._vMap.has(t)?(this.kvMap.set(n,this._vMap.get(t)),this._vMap.delete(t)):this.kvMap.delete(n),!0}get(n){return this.kvMap.get(n)}set(n,t){if(this.kvMap.has(n)){let r=this.kvMap.get(n);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,t)}else this.kvMap.set(n,t)}forEach(n){for(let[t,r]of this.kvMap)if(n(r,t),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),n(r,t)}}};function It(e,n){Li("NgControlFlow");let t=nt(),r=aa(),i=t[r]!==ui?t[r]:-1,o=i!==-1?Ud(t,fn+i):void 0,c=0;if(Wr(t,r,e)){let h=$e(null);try{if(o!==void 0&&gb(o,c),e!==-1){let g=fn+e,m=Ud(t,g),v=_0(t[Se],g),x=Il(m,v.tView.ssrId),I=of(t,v,n,{dehydratedView:x});sf(m,I,c,bl(v,x))}}finally{$e(h)}}else if(o!==void 0){let h=pb(o,c);h!==void 0&&(h[kn]=n)}}var y0=class{constructor(n,t,r){this.lContainer=n,this.$implicit=t,this.$index=r}get $count(){return this.lContainer.length-En}};function hn(e,n){return n}var w0=class{constructor(n,t,r){this.hasEmptyBlock=n,this.trackByFn=t,this.liveCollection=r}};function pn(e,n,t,r,i,o,c,h,g,m,v,x,I){Li("NgControlFlow");let A=nt(),R=Sn(),j=g!==void 0,$=nt(),W=h?c.bind($[lr][kn]):c,ce=new w0(j,W);$[fn+e]=ce,d0(A,R,e+1,n,t,r,i,ea(R.consts,o)),j&&d0(A,R,e+2,g,m,v,x,ea(R.consts,I))}var C0=class extends g0{constructor(n,t,r){super(),this.lContainer=n,this.hostLView=t,this.templateTNode=r,this.operationsCounter=void 0,this.needsIndexUpdate=!1}get length(){return this.lContainer.length-En}at(n){return this.getLView(n)[kn].$implicit}attach(n,t){let r=t[Hr];this.needsIndexUpdate||=n!==this.length,sf(this.lContainer,t,n,bl(this.templateTNode,r))}detach(n){return this.needsIndexUpdate||=n!==this.length-1,ak(this.lContainer,n)}create(n,t){let r=Il(this.lContainer,this.templateTNode.tView.ssrId),i=of(this.hostLView,this.templateTNode,new y0(this.lContainer,t,n),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(n){Jd(n[Se],n),this.operationsCounter?.recordDestroy()}updateValue(n,t){this.getLView(n)[kn].$implicit=t}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let n=0;n<this.length;n++)this.getLView(n)[kn].$index=n}getLView(n){return lk(this.lContainer,n)}};function gn(e){let n=$e(null),t=ho();try{let r=nt(),i=r[Se],o=r[t],c=t+1,h=Ud(r,c);if(o.liveCollection===void 0){let m=_0(i,c);o.liveCollection=new C0(h,r,m)}else o.liveCollection.reset();let g=o.liveCollection;if(sk(g,e,o.trackByFn),g.updateIndexes(),o.hasEmptyBlock){let m=aa(),v=g.length===0;if(Wr(r,m,v)){let x=t+2,I=Ud(r,x);if(v){let A=_0(i,x),R=Il(I,A.tView.ssrId),j=of(r,A,void 0,{dehydratedView:R});sf(I,j,0,bl(A,R))}else gb(I,0)}}}finally{$e(n)}}function Ud(e,n){return e[n]}function ak(e,n){return xl(e,n)}function lk(e,n){return pb(e,n)}function _0(e,n){return L0(e,n)}function ck(e,n,t,r,i,o){let c=n.consts,h=ea(c,i),g=nf(n,e,2,r,h);return sb(n,t,g,ea(c,o)),g.attrs!==null&&t0(g,g.attrs,!1),g.mergedAttrs!==null&&t0(g,g.mergedAttrs,!0),n.queries!==null&&n.queries.elementStart(n,g),g}function M(e,n,t,r){let i=nt(),o=Sn(),c=fn+e,h=i[Mt],g=o.firstCreatePass?ck(c,o,i,n,t,r):o.data[c],m=Wb(o,i,g,h,n,e);i[c]=m;let v=k0(g);return Rl(g,!0),Xx(h,m,g),!Fl(g)&&H0()&&nm(o,i,m,g),GN()===0&&Ko(m,i),$N(),v&&(tb(o,i,g),eb(o,g,i)),r!==null&&nb(i,g),M}function N(){let e=Qn();Bv()?KN():(e=e.parent,Rl(e,!1));let n=e;YN(n)&&ZN(),qN();let t=Sn();return t.firstCreatePass&&(z0(t,e),Sv(e)&&t.queries.elementEnd(e)),n.classesWithoutHost!=null&&dO(n)&&p0(t,n,nt(),n.classesWithoutHost,!0),n.stylesWithoutHost!=null&&fO(n)&&p0(t,n,nt(),n.stylesWithoutHost,!1),N}function le(e,n,t,r){return M(e,n,t,r),N(),le}var Wb=(e,n,t,r,i,o)=>(po(!0),em(r,i,qv()));function uk(e,n,t,r,i,o){let c=n[Hr],h=!c||Ol()||Fl(t)||Pl(c,o);if(po(h),h)return em(r,i,qv());let g=af(c,e,n,t);return bx(c,o)&&Qd(c,o,g.nextSibling),c&&(ux(t)||dx(g))&&Nl(t)&&(XN(t),qx(g)),g}function dk(){Wb=uk}var fk=(e,n,t,r)=>(po(!0),jx(n[Mt],""));function hk(e,n,t,r){let i,o=n[Hr],c=!o||Ol()||Pl(o,r)||Fl(t);if(po(c),c)return jx(n[Mt],"");let h=af(o,e,n,t),g=eR(o,r);return Qd(o,r,h),i=lf(g,h),i}function pk(){fk=hk}function Gt(){return nt()}var jd="en-US";var gk=jd;function mk(e){typeof e=="string"&&(gk=e.toLowerCase().replace(/_/g,"-"))}var yk=(e,n,t)=>{};function Y(e,n,t,r){let i=nt(),o=Sn(),c=Qn();return Gb(o,i,i[Mt],c,e,n,r),Y}function wk(e,n,t,r){let i=e.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let c=i[o];if(c===t&&i[o+1]===r){let h=n[vd],g=i[o+2];return h.length>g?h[g]:null}typeof c=="string"&&(o+=2)}return null}function Gb(e,n,t,r,i,o,c){let h=k0(r),m=e.firstCreatePass&&fb(e),v=n[kn],x=db(n),I=!0;if(r.type&3||c){let j=cr(r,n),$=c?c(j):j,W=x.length,ce=c?ge=>c(zr(ge[r.index])):r.index,Xe=null;if(!c&&h&&(Xe=wk(e,n,i,r.index)),Xe!==null){let ge=Xe.__ngLastListenerFn__||Xe;ge.__ngNextListenerFn__=o,Xe.__ngLastListenerFn__=o,I=!1}else{o=X_(r,n,v,o),yk(j,i,o);let ge=t.listen($,i,o);x.push(o,ge),m&&m.push(i,ce,W,W+1)}}else o=X_(r,n,v,o);let A=r.outputs,R;if(I&&A!==null&&(R=A[i])){let j=R.length;if(j)for(let $=0;$<j;$+=2){let W=R[$],ce=R[$+1],H=n[W][ce].subscribe(o),fe=x.length;x.push(o,H),m&&m.push(i,r.index,fe,-(fe+1))}}}function Y_(e,n,t,r){let i=$e(null);try{return ni(6,n,t),t(r)!==!1}catch(o){return hb(e,o),!1}finally{ni(7,n,t),$e(i)}}function X_(e,n,t,r){return function i(o){if(o===Function)return r;let c=e.componentOffset>-1?fo(e.index,n):n;lm(c,5);let h=Y_(n,t,r,o),g=i.__ngNextListenerFn__;for(;g;)h=Y_(n,t,g,o)&&h,g=g.__ngNextListenerFn__;return h}}function Qe(e=1){return aO(e)}function df(e,n,t){_P(e,n,t)}function Bl(e){let n=nt(),t=Sn(),r=jv();B0(r+1);let i=fm(t,r);if(e.dirty&&jN(n)===((i.metadata.flags&2)===2)){if(i.matches===null)e.reset([]);else{let o=bP(n,r);e.reset(o,OO),e.notifyOnChanges()}return!0}return!1}function Vl(){return wP(nt(),jv())}function ff(e){let n=JN();return UN(n,fn+e)}function P(e,n=""){let t=nt(),r=Sn(),i=e+fn,o=r.firstCreatePass?nf(r,i,1,n,null):r.data[i],c=$b(r,t,o,n,e);t[i]=c,H0()&&nm(r,t,c,o),Rl(o,!1)}var $b=(e,n,t,r,i)=>(po(!0),Ux(n[Mt],r));function Ck(e,n,t,r,i){let o=n[Hr],c=!o||Ol()||Fl(t)||Pl(o,i);return po(c),c?Ux(n[Mt],r):af(o,e,n,t)}function _k(){$b=Ck}function on(e){return Dn("",e,""),on}function Dn(e,n,t){let r=nt(),i=VP(r,e,n,t);return i!==ui&&g3(r,ho(),i),Dn}function rt(e,n,t){Ob(n)&&(n=n());let r=nt(),i=aa();if(Wr(r,i,n)){let o=Sn(),c=j0();ob(o,c,r,e,n,r[Mt],t,!1)}return rt}function ot(e,n){let t=Ob(e);return t&&e.set(n),t}function it(e,n){let t=nt(),r=Sn(),i=Qn();return Gb(r,t,t[Mt],i,e,n),it}function vk(e,n,t){let r=Sn();if(r.firstCreatePass){let i=co(e);v0(t,r.data,r.blueprint,i,!0),v0(n,r.data,r.blueprint,i,!1)}}function v0(e,n,t,r,i){if(e=Vn(e),Array.isArray(e))for(let o=0;o<e.length;o++)v0(e[o],n,t,r,i);else{let o=Sn(),c=nt(),h=Qn(),g=Qs(e)?e:Vn(e.provide),m=bv(e),v=h.providerIndexes&1048575,x=h.directiveStart,I=h.providerIndexes>>20;if(Qs(e)||!e.multi){let A=new Zo(m,i,Z),R=gg(g,n,i?v:v+I,x);R===-1?(Mg(Dd(h,c),o,g),pg(o,e,n.length),n.push(g),h.directiveStart++,h.directiveEnd++,i&&(h.providerIndexes+=1048576),t.push(A),c.push(A)):(t[R]=A,c[R]=A)}else{let A=gg(g,n,v+I,x),R=gg(g,n,v,v+I),j=A>=0&&t[A],$=R>=0&&t[R];if(i&&!$||!i&&!j){Mg(Dd(h,c),o,g);let W=Ek(i?bk:xk,t.length,i,r,m);!i&&$&&(t[R].providerFactory=W),pg(o,e,n.length,0),n.push(g),h.directiveStart++,h.directiveEnd++,i&&(h.providerIndexes+=1048576),t.push(W),c.push(W)}else{let W=qb(t[i?R:A],m,!i&&r);pg(o,e,A>-1?A:R,W)}!i&&r&&$&&t[R].componentProviders++}}}function pg(e,n,t,r){let i=Qs(n),o=SN(n);if(i||o){let g=(o?Vn(n.useClass):n).prototype.ngOnDestroy;if(g){let m=e.destroyHooks||(e.destroyHooks=[]);if(!i&&n.multi){let v=m.indexOf(t);v===-1?m.push(t,[r,g]):m[v+1].push(r,g)}else m.push(t,g)}}}function qb(e,n,t){return t&&e.componentProviders++,e.multi.push(n)-1}function gg(e,n,t,r){for(let i=t;i<r;i++)if(n[i]===e)return i;return-1}function xk(e,n,t,r){return x0(this.multi,[])}function bk(e,n,t,r){let i=this.multi,o;if(this.providerFactory){let c=this.providerFactory.componentProviders,h=Qo(t,t[Se],this.providerFactory.index,r);o=h.slice(0,c),x0(i,o);for(let g=c;g<h.length;g++)o.push(h[g])}else o=[],x0(i,o);return o}function x0(e,n){for(let t=0;t<e.length;t++){let r=e[t];n.push(r())}return n}function Ek(e,n,t,r,i){let o=new Zo(e,t,Z);return o.multi=[],o.index=n,o.componentProviders=0,qb(o,i,r&&!t),o}function ns(e,n=[]){return t=>{t.providersResolver=(r,i)=>vk(r,i?i(e):e,n)}}var Ik=(()=>{class e{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=_v(!1,t.type),i=r.length>0?hm([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=pe({token:e,providedIn:"environment",factory:()=>new e(He(vr))})}}return e})();function oe(e){Li("NgStandalone"),e.getStandaloneInjector=n=>n.get(Ik).getOrCreateStandaloneInjector(e)}function Yb(e,n,t,r,i,o){return Dk(nt(),eO(),e,n,t,r,i,o)}function Sk(e,n){let t=e[n];return t===ui?void 0:t}function Dk(e,n,t,r,i,o,c,h){let g=n+t;return PP(e,g,i,o,c)?OP(e,g+3,h?r.call(h,i,o,c):r(i,o,c)):Sk(e,g+3)}var hf=(()=>{class e{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"platform"})}}return e})();var Xb=new ve("");function rs(e){return!!e&&typeof e.then=="function"}function Zb(e){return!!e&&typeof e.subscribe=="function"}var Qb=new ve(""),Kb=(()=>{class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=K(Qb,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=i();if(rs(o))t.push(o);else if(Zb(o)){let c=new Promise((h,g)=>{o.subscribe({complete:h,error:g})});t.push(c)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),fa=new ve("");function Ak(){LC(()=>{throw new de(600,!1)})}function Tk(e){return e.isBoundToModule}var Mk=10;function Nk(e,n,t){try{let r=t();return rs(r)?r.catch(i=>{throw n.runOutsideAngular(()=>e.handleError(i)),i}):r}catch(r){throw n.runOutsideAngular(()=>e.handleError(r)),r}}var di=(()=>{class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=K(MO),this.afterRenderManager=K(BP),this.zonelessEnabled=K(um),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new xn,this.afterTick=new xn,this.componentTypes=[],this.components=[],this.isStable=K(ts).hasPendingTasks.pipe(Be(t=>!t)),this._injector=K(vr)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}get injector(){return this._injector}bootstrap(t,r){let i=t instanceof kd;if(!this._injector.get(Kb).done){let I=!i&&mv(t),A=!1;throw new de(405,A)}let c;i?c=t:c=this._injector.get(na).resolveComponentFactory(t),this.componentTypes.push(c.componentType);let h=Tk(c)?void 0:this._injector.get(uo),g=r||c.selector,m=c.create(oi.NULL,[],g,h),v=m.location.nativeElement,x=m.injector.get(Xb,null);return x?.registerApplication(v),m.onDestroy(()=>{this.detachView(m.hostView),gd(this.components,m),x?.unregisterApplication(v)}),this._loadComponent(m),m}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new de(101,!1);let t=$e(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,$e(t),this.afterTick.next()}}synchronize(){let t=null;this._injector.destroyed||(t=this._injector.get(ra,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<Mk;)this.synchronizeOnce(t)}synchronizeOnce(t){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:o}of this._views)Ok(i,o,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else t?.begin?.(),t?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>qd(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;gd(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let r=this._injector.get(fa,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>gd(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new de(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function gd(e,n){let t=e.indexOf(n);t>-1&&e.splice(t,1)}var cd;function pf(e){cd??=new WeakMap;let n=cd.get(e);if(n)return n;let t=e.isStable.pipe(Fr(r=>r)).toPromise().then(()=>{});return cd.set(e,t),e.onDestroy(()=>cd?.delete(e)),t}function Ok(e,n,t,r){if(!t&&!qd(e))return;wb(e,n,t&&!r?0:1)}var b0=class{constructor(n,t){this.ngModuleFactory=n,this.componentFactories=t}},pm=(()=>{class e{compileModuleSync(t){return new u0(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=yv(t),o=Vx(i.declarations).reduce((c,h)=>{let g=$o(h);return g&&c.push(new Sl(g)),c},[]);return new b0(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var Rk=(()=>{class e{constructor(){this.zone=K(Xt),this.changeDetectionScheduler=K(ta),this.applicationRef=K(di)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function Pk({ngZoneFactory:e,ignoreChangesOutsideZone:n,scheduleInRootZone:t}){return e??=()=>new Xt(Le(ne({},kk()),{scheduleInRootZone:t})),[{provide:Xt,useFactory:e},{provide:Go,multi:!0,useFactory:()=>{let r=K(Rk,{optional:!0});return()=>r.initialize()}},{provide:Go,multi:!0,useFactory:()=>{let r=K(Lk);return()=>{r.initialize()}}},n===!0?{provide:Ib,useValue:!0}:[],{provide:Sb,useValue:t??sx}]}function kk(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}var Lk=(()=>{class e{constructor(){this.subscription=new Vt,this.initialized=!1,this.zone=K(Xt),this.pendingTasks=K(ts)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Xt.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Xt.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var Fk=(()=>{class e{constructor(){this.appRef=K(di),this.taskService=K(ts),this.ngZone=K(Xt),this.zonelessEnabled=K(um),this.disableScheduling=K(Ib,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new Vt,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Td):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(K(Sb,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof kg||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?A_:lx;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Td+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,A_(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function Bk(){return typeof $localize<"u"&&$localize.locale||jd}var gm=new ve("",{providedIn:"root",factory:()=>K(gm,je.Optional|je.SkipSelf)||Bk()});var Jb=new ve("");function ud(e){return!!e.platformInjector}function Vk(e){let n=ud(e)?e.r3Injector:e.moduleRef.injector,t=n.get(Xt);return t.run(()=>{ud(e)?e.r3Injector.resolveInjectorInitializers():e.moduleRef.resolveInjectorInitializers();let r=n.get(Ai,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:o=>{r.handleError(o)}})}),ud(e)){let o=()=>n.destroy(),c=e.platformInjector.get(Jb);c.add(o),n.onDestroy(()=>{i.unsubscribe(),c.delete(o)})}else e.moduleRef.onDestroy(()=>{gd(e.allPlatformModules,e.moduleRef),i.unsubscribe()});return Nk(r,t,()=>{let o=n.get(Kb);return o.runInitializers(),o.donePromise.then(()=>{let c=n.get(gm,jd);if(mk(c||jd),ud(e)){let h=n.get(di);return e.rootComponent!==void 0&&h.bootstrap(e.rootComponent),h}else return Uk(e.moduleRef,e.allPlatformModules),e.moduleRef})})})}function Uk(e,n){let t=e.injector.get(di);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(e.instance.ngDoBootstrap)e.instance.ngDoBootstrap(t);else throw new de(-403,!1);n.push(e)}var md=null;function jk(e=[],n){return oi.create({name:n,providers:[{provide:Gd,useValue:"platform"},{provide:Jb,useValue:new Set([()=>md=null])},...e]})}function Hk(e=[]){if(md)return md;let n=jk(e);return md=n,Ak(),zk(n),n}function zk(e){e.get(q0,null)?.forEach(t=>t())}var Fi=(()=>{class e{static{this.__NG_ELEMENT_ID__=Wk}}return e})();function Wk(e){return Gk(Qn(),nt(),(e&16)===16)}function Gk(e,n,t){if(Nl(e)&&!t){let r=fo(e.index,n);return new Jo(r,r)}else if(e.type&175){let r=n[lr];return new Jo(r,n)}return null}var E0=class{constructor(){}supports(n){return n instanceof Map||Rb(n)}create(){return new I0}},I0=class{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return this._additionsHead!==null||this._changesHead!==null||this._removalsHead!==null}forEachItem(n){let t;for(t=this._mapHead;t!==null;t=t._next)n(t)}forEachPreviousItem(n){let t;for(t=this._previousMapHead;t!==null;t=t._nextPrevious)n(t)}forEachChangedItem(n){let t;for(t=this._changesHead;t!==null;t=t._nextChanged)n(t)}forEachAddedItem(n){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)n(t)}forEachRemovedItem(n){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)n(t)}diff(n){if(!n)n=new Map;else if(!(n instanceof Map||Rb(n)))throw new de(900,!1);return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(n,(r,i)=>{if(t&&t.key===i)this._maybeAddToChanges(t,r),this._appendAfter=t,t=t._next;else{let o=this._getOrCreateRecordForKey(i,r);t=this._insertBeforeOrAppend(t,o)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let r=t;r!==null;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(n,t){if(n){let r=n._prev;return t._next=n,t._prev=r,n._prev=t,r&&(r._next=t),n===this._mapHead&&(this._mapHead=t),this._appendAfter=n,n}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(n,t){if(this._records.has(n)){let i=this._records.get(n);this._maybeAddToChanges(i,t);let o=i._prev,c=i._next;return o&&(o._next=c),c&&(c._prev=o),i._next=null,i._prev=null,i}let r=new S0(n);return this._records.set(n,r),r.currentValue=t,this._addToAdditions(r),r}_reset(){if(this.isDirty){let n;for(this._previousMapHead=this._mapHead,n=this._previousMapHead;n!==null;n=n._next)n._nextPrevious=n._next;for(n=this._changesHead;n!==null;n=n._nextChanged)n.previousValue=n.currentValue;for(n=this._additionsHead;n!=null;n=n._nextAdded)n.previousValue=n.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(n,t){Object.is(t,n.currentValue)||(n.previousValue=n.currentValue,n.currentValue=t,this._addToChanges(n))}_addToAdditions(n){this._additionsHead===null?this._additionsHead=this._additionsTail=n:(this._additionsTail._nextAdded=n,this._additionsTail=n)}_addToChanges(n){this._changesHead===null?this._changesHead=this._changesTail=n:(this._changesTail._nextChanged=n,this._changesTail=n)}_forEach(n,t){n instanceof Map?n.forEach(t):Object.keys(n).forEach(r=>t(n[r],r))}},S0=class{constructor(n){this.key=n,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}};function Z_(){return new mm([new E0])}var mm=(()=>{class e{static{this.\u0275prov=pe({token:e,providedIn:"root",factory:Z_})}constructor(t){this.factories=t}static create(t,r){if(r){let i=r.factories.slice();t=t.concat(i)}return new e(t)}static extend(t){return{provide:e,useFactory:r=>e.create(t,r||Z_()),deps:[[e,new lv,new T0]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r)return r;throw new de(901,!1)}}return e})();function eE(e){try{let{rootComponent:n,appProviders:t,platformProviders:r}=e,i=Hk(r),o=[Pk({}),{provide:ta,useExisting:Fk},...t||[]],c=new Fd({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1});return Vk({r3Injector:c.injector,platformInjector:i,rootComponent:n})}catch(n){return Promise.reject(n)}}var Q_=!1;function $k(){Q_||(Q_=!0,ZO(),dk(),_k(),pk(),FP(),hP(),Y3(),XR())}function qk(e,n){return pf(e)}function tE(){return oa([{provide:rd,useFactory:()=>{let e=!0;return sd()&&(e=!!K(ca,{optional:!0})?.get(vx,null)),e&&Li("NgHydration"),e}},{provide:Go,useValue:()=>{j3(!1),sd()&&K(rd)&&(Yk(),$k())},multi:!0},{provide:Ix,useFactory:()=>sd()&&K(rd)},{provide:fa,useFactory:()=>{if(sd()&&K(rd)){let e=K(di),n=K(oi);return()=>{qk(e,n).then(()=>{G3(e)})}}return()=>{}},multi:!0}])}function Yk(){let e=Xd(),n;for(let t of e.body.childNodes)if(t.nodeType===Node.COMMENT_NODE&&t.textContent?.trim()===YO){n=t;break}if(!n)throw new de(-507,!1)}function Ul(e){return typeof e=="boolean"?e:e!=null&&e!=="false"}function jl(e,n){Li("NgSignals");let t=RC(e);return n?.equal&&(t[xi].equal=n.equal),t}function Bi(e){let n=$e(null);try{return e()}finally{$e(n)}}var iE=null;function Vi(){return iE}function oE(e){iE??=e}var gf=class{};var Kn=new ve(""),sE=(()=>{class e{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=pe({token:e,factory:()=>K(Qk),providedIn:"platform"})}}return e})();var Qk=(()=>{class e extends sE{constructor(){super(),this._doc=K(Kn),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Vi().getBaseHref(this._doc)}onPopState(t){let r=Vi().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Vi().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=pe({token:e,factory:()=>new e,providedIn:"platform"})}}return e})();function aE(e,n){if(e.length==0)return n;if(n.length==0)return e;let t=0;return e.endsWith("/")&&t++,n.startsWith("/")&&t++,t==2?e+n.substring(1):t==1?e+n:e+"/"+n}function nE(e){let n=e.match(/#|\?|$/),t=n&&n.index||e.length,r=t-(e[t-1]==="/"?1:0);return e.slice(0,r)+e.slice(t)}function is(e){return e&&e[0]!=="?"?"?"+e:e}var yf=(()=>{class e{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=pe({token:e,factory:()=>K(lE),providedIn:"root"})}}return e})(),Kk=new ve(""),lE=(()=>{class e extends yf{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??K(Kn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return aE(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+is(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let c=this.prepareExternalUrl(i+is(o));this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,o){let c=this.prepareExternalUrl(i+is(o));this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||e)(He(sE),He(Kk,8))}}static{this.\u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var Hl=(()=>{class e{constructor(t){this._subject=new Ot,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=t4(nE(rE(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+is(r))}normalize(t){return e.stripTrailingSlash(e4(this._basePath,rE(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+is(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+is(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=is}static{this.joinWithSlash=aE}static{this.stripTrailingSlash=nE}static{this.\u0275fac=function(r){return new(r||e)(He(yf))}}static{this.\u0275prov=pe({token:e,factory:()=>Jk(),providedIn:"root"})}}return e})();function Jk(){return new Hl(He(yf))}function e4(e,n){if(!e||!n.startsWith(e))return n;let t=n.substring(e.length);return t===""||["/",";","?","#"].includes(t[0])?t:n}function rE(e){return e.replace(/\/index.html$/,"")}function t4(e){if(new RegExp("^(https?:)?//").test(e)){let[,t]=e.split(/\/\/[^\/]+/);return t}return e}function wm(e,n){n=encodeURIComponent(n);for(let t of e.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===n)return decodeURIComponent(o)}return null}var cE=(()=>{class e{constructor(t,r,i){this._ngEl=t,this._differs=r,this._renderer=i,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){let t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,r){let[i,o]=t.split("."),c=i.indexOf("-")===-1?void 0:si.DashCase;r!=null?this._renderer.setStyle(this._ngEl.nativeElement,i,o?`${r}${o}`:r,c):this._renderer.removeStyle(this._ngEl.nativeElement,i,c)}_applyChanges(t){t.forEachRemovedItem(r=>this._setStyle(r.key,null)),t.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}static{this.\u0275fac=function(r){return new(r||e)(Z(ur),Z(mm),Z($r))}}static{this.\u0275dir=rn({type:e,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0})}}return e})();var zl=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=Oi({type:e})}static{this.\u0275inj=Ni({})}}return e})(),uE="browser",n4="server";function Wl(e){return e===n4}var mf=class{};var Cf=class e{constructor(n){this.normalizedNames=new Map,this.lazyUpdate=null,n?typeof n=="string"?this.lazyInit=()=>{this.headers=new Map,n.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),o=i.toLowerCase(),c=t.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(c):this.headers.set(o,[c])}})}:typeof Headers<"u"&&n instanceof Headers?(this.headers=new Map,n.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(n).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(n){return this.init(),this.headers.has(n.toLowerCase())}get(n){this.init();let t=this.headers.get(n.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(n){return this.init(),this.headers.get(n.toLowerCase())||null}append(n,t){return this.clone({name:n,value:t,op:"a"})}set(n,t){return this.clone({name:n,value:t,op:"s"})}delete(n,t){return this.clone({name:n,value:t,op:"d"})}maybeSetNormalizedName(n,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,n)}init(){this.lazyInit&&(this.lazyInit instanceof e?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(n=>this.applyUpdate(n)),this.lazyUpdate=null))}copyFrom(n){n.init(),Array.from(n.headers.keys()).forEach(t=>{this.headers.set(t,n.headers.get(t)),this.normalizedNames.set(t,n.normalizedNames.get(t))})}clone(n){let t=new e;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof e?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([n]),t}applyUpdate(n){let t=n.name.toLowerCase();switch(n.op){case"a":case"s":let r=n.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(n.name,t);let i=(n.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let o=n.value;if(!o)this.headers.delete(t),this.normalizedNames.delete(t);else{let c=this.headers.get(t);if(!c)return;c=c.filter(h=>o.indexOf(h)===-1),c.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,c)}break}}setHeaderEntries(n,t){let r=(Array.isArray(t)?t:[t]).map(o=>o.toString()),i=n.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(n,i)}forEach(n){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>n(this.normalizedNames.get(t),this.headers.get(t)))}};var wE=function(e){return e[e.Sent=0]="Sent",e[e.UploadProgress=1]="UploadProgress",e[e.ResponseHeader=2]="ResponseHeader",e[e.DownloadProgress=3]="DownloadProgress",e[e.Response=4]="Response",e[e.User=5]="User",e}(wE||{}),Cm=class{constructor(n,t=200,r="OK"){this.headers=n.headers||new Cf,this.status=n.status!==void 0?n.status:t,this.statusText=n.statusText||r,this.url=n.url||null,this.ok=this.status>=200&&this.status<300}};var _f=class e extends Cm{constructor(n={}){super(n),this.type=wE.Response,this.body=n.body!==void 0?n.body:null}clone(n={}){return new e({body:n.body!==void 0?n.body:this.body,headers:n.headers||this.headers,status:n.status!==void 0?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}};var i4=new ve("");var o4=new ve(""),dE="b",fE="h",hE="s",pE="st",gE="u",mE="rt",wf=new ve(""),s4=["GET","HEAD"];function a4(e,n){let A=K(wf),{isCacheActive:t}=A,r=bC(A,["isCacheActive"]),{transferCache:i,method:o}=e;if(!t||i===!1||o==="POST"&&!r.includePostRequests&&!i||o!=="POST"&&!s4.includes(o)||!r.includeRequestsWithAuthHeaders&&l4(e)||r.filter?.(e)===!1)return n(e);let c=K(ca),h=K(o4,{optional:!0}),g=Wl(K(ci));if(h&&!g)throw new de(2803,!1);let m=g&&h?f4(e.url,h):e.url,v=u4(e,m),x=c.get(v,null),I=r.includeHeaders;if(typeof i=="object"&&i.includeHeaders&&(I=i.includeHeaders),x){let{[dE]:R,[mE]:j,[fE]:$,[hE]:W,[pE]:ce,[gE]:Xe}=x,ge=R;switch(j){case"arraybuffer":ge=new TextEncoder().encode(R).buffer;break;case"blob":ge=new Blob([R]);break}let H=new Cf($);return Ae(new _f({body:ge,headers:H,status:W,statusText:ce,url:Xe}))}return n(e).pipe(nn(R=>{R instanceof _f&&g&&c.set(v,{[dE]:R.body,[fE]:c4(R.headers,I),[hE]:R.status,[pE]:R.statusText,[gE]:m,[mE]:e.responseType})}))}function l4(e){return e.headers.has("authorization")||e.headers.has("proxy-authorization")}function c4(e,n){if(!n)return{};let t={};for(let r of n){let i=e.getAll(r);i!==null&&(t[r]=i)}return t}function yE(e){return[...e.keys()].sort().map(n=>`${n}=${e.getAll(n)}`).join("&")}function u4(e,n){let{params:t,method:r,responseType:i}=e,o=yE(t),c=e.serializeBody();c instanceof URLSearchParams?c=yE(c):typeof c!="string"&&(c="");let h=[r,i,n,c,o].join("|"),g=d4(h);return g}function d4(e){let n=0;for(let t of e)n=Math.imul(31,n)+t.charCodeAt(0)<<0;return n+=2147483648,n.toString()}function CE(e){return[{provide:wf,useFactory:()=>(Li("NgHttpTransferCache"),ne({isCacheActive:!0},e))},{provide:i4,useValue:a4,multi:!0,deps:[ca,wf]},{provide:fa,multi:!0,useFactory:()=>{let n=K(di),t=K(wf);return()=>{pf(n).then(()=>{t.isCacheActive=!1})}}}]}function f4(e,n){let t=new URL(e,"resolve://").origin,r=n[t];return r?e.replace(t,r):e}var xm=class extends gf{constructor(){super(...arguments),this.supportsDOMEvents=!0}},bm=class e extends xm{static makeCurrent(){oE(new e)}onAndCancel(n,t,r){return n.addEventListener(t,r),()=>{n.removeEventListener(t,r)}}dispatchEvent(n,t){n.dispatchEvent(t)}remove(n){n.remove()}createElement(n,t){return t=t||this.getDefaultDocument(),t.createElement(n)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(n){return n.nodeType===Node.ELEMENT_NODE}isShadowRoot(n){return n instanceof DocumentFragment}getGlobalEventTarget(n,t){return t==="window"?window:t==="document"?n:t==="body"?n.body:null}getBaseHref(n){let t=h4();return t==null?null:p4(t)}resetBaseElement(){Gl=null}getUserAgent(){return window.navigator.userAgent}getCookie(n){return wm(document.cookie,n)}},Gl=null;function h4(){return Gl=Gl||document.querySelector("base"),Gl?Gl.getAttribute("href"):null}function p4(e){return new URL(e,document.baseURI).pathname}var g4=(()=>{class e{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=pe({token:e,factory:e.\u0275fac})}}return e})(),Em=new ve(""),bE=(()=>{class e{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new de(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||e)(He(Em),He(Xt))}}static{this.\u0275prov=pe({token:e,factory:e.\u0275fac})}}return e})(),vf=class{constructor(n){this._doc=n}},_m="ng-app-id",EE=(()=>{class e{constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Wl(o),this.resetHostNodes()}addStyles(t){for(let r of t)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(t){for(let r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){let r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${_m}="${this.appId}"]`);if(t?.length){let r=new Map;return t.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){let i=this.styleRef;if(i.has(t)){let o=i.get(t);return o.usage+=r,o.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){let i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===t)return i.delete(r),o.removeAttribute(_m),o;{let c=this.doc.createElement("style");return this.nonce&&c.setAttribute("nonce",this.nonce),c.textContent=r,this.platformIsServer&&c.setAttribute(_m,this.appId),t.appendChild(c),c}}addStyleToHost(t,r){let i=this.getStyleElement(t,r),o=this.styleRef,c=o.get(r)?.elements;c?c.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||e)(He(Kn),He(Zd),He(Y0,8),He(ci))}}static{this.\u0275prov=pe({token:e,factory:e.\u0275fac})}}return e})(),vm={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Dm=/%COMP%/g,IE="%COMP%",m4=`_nghost-${IE}`,y4=`_ngcontent-${IE}`,w4=!0,C4=new ve("",{providedIn:"root",factory:()=>w4});function _4(e){return y4.replace(Dm,e)}function v4(e){return m4.replace(Dm,e)}function SE(e,n){return n.map(t=>t.replace(Dm,e))}var _E=(()=>{class e{constructor(t,r,i,o,c,h,g,m=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=c,this.platformId=h,this.ngZone=g,this.nonce=m,this.rendererByCompId=new Map,this.platformIsServer=Wl(h),this.defaultRenderer=new $l(t,c,g,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===ii.ShadowDom&&(r=Le(ne({},r),{encapsulation:ii.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof xf?i.applyToHost(t):i instanceof ql&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let c=this.doc,h=this.ngZone,g=this.eventManager,m=this.sharedStylesHost,v=this.removeStylesOnCompDestroy,x=this.platformIsServer;switch(r.encapsulation){case ii.Emulated:o=new xf(g,m,r,this.appId,v,c,h,x);break;case ii.ShadowDom:return new Im(g,m,t,r,c,h,this.nonce,x);default:o=new ql(g,m,r,v,c,h,x);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||e)(He(bE),He(EE),He(Zd),He(C4),He(Kn),He(ci),He(Xt),He(Y0))}}static{this.\u0275prov=pe({token:e,factory:e.\u0275fac})}}return e})(),$l=class{constructor(n,t,r,i){this.eventManager=n,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(n,t){return t?this.doc.createElementNS(vm[t]||t,n):this.doc.createElement(n)}createComment(n){return this.doc.createComment(n)}createText(n){return this.doc.createTextNode(n)}appendChild(n,t){(vE(n)?n.content:n).appendChild(t)}insertBefore(n,t,r){n&&(vE(n)?n.content:n).insertBefore(t,r)}removeChild(n,t){t.remove()}selectRootElement(n,t){let r=typeof n=="string"?this.doc.querySelector(n):n;if(!r)throw new de(-5104,!1);return t||(r.textContent=""),r}parentNode(n){return n.parentNode}nextSibling(n){return n.nextSibling}setAttribute(n,t,r,i){if(i){t=i+":"+t;let o=vm[i];o?n.setAttributeNS(o,t,r):n.setAttribute(t,r)}else n.setAttribute(t,r)}removeAttribute(n,t,r){if(r){let i=vm[r];i?n.removeAttributeNS(i,t):n.removeAttribute(`${r}:${t}`)}else n.removeAttribute(t)}addClass(n,t){n.classList.add(t)}removeClass(n,t){n.classList.remove(t)}setStyle(n,t,r,i){i&(si.DashCase|si.Important)?n.style.setProperty(t,r,i&si.Important?"important":""):n.style[t]=r}removeStyle(n,t,r){r&si.DashCase?n.style.removeProperty(t):n.style[t]=""}setProperty(n,t,r){n!=null&&(n[t]=r)}setValue(n,t){n.nodeValue=t}listen(n,t,r){if(typeof n=="string"&&(n=Vi().getGlobalEventTarget(this.doc,n),!n))throw new Error(`Unsupported event target ${n} for event ${t}`);return this.eventManager.addEventListener(n,t,this.decoratePreventDefault(r))}decoratePreventDefault(n){return t=>{if(t==="__ngUnwrap__")return n;(this.platformIsServer?this.ngZone.runGuarded(()=>n(t)):n(t))===!1&&t.preventDefault()}}};function vE(e){return e.tagName==="TEMPLATE"&&e.content!==void 0}var Im=class extends $l{constructor(n,t,r,i,o,c,h,g){super(n,o,c,g),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let m=SE(i.id,i.styles);for(let v of m){let x=document.createElement("style");h&&x.setAttribute("nonce",h),x.textContent=v,this.shadowRoot.appendChild(x)}}nodeOrShadowRoot(n){return n===this.hostEl?this.shadowRoot:n}appendChild(n,t){return super.appendChild(this.nodeOrShadowRoot(n),t)}insertBefore(n,t,r){return super.insertBefore(this.nodeOrShadowRoot(n),t,r)}removeChild(n,t){return super.removeChild(null,t)}parentNode(n){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(n)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},ql=class extends $l{constructor(n,t,r,i,o,c,h,g){super(n,o,c,h),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=g?SE(g,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},xf=class extends ql{constructor(n,t,r,i,o,c,h,g){let m=i+"-"+r.id;super(n,t,r,o,c,h,g,m),this.contentAttr=_4(m),this.hostAttr=v4(m)}applyToHost(n){this.applyStyles(),this.setAttribute(n,this.hostAttr,"")}createElement(n,t){let r=super.createElement(n,t);return super.setAttribute(r,this.contentAttr,""),r}},x4=(()=>{class e extends vf{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||e)(He(Kn))}}static{this.\u0275prov=pe({token:e,factory:e.\u0275fac})}}return e})(),xE=["alt","control","meta","shift"],b4={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},E4={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey},I4=(()=>{class e extends vf{constructor(t){super(t)}supports(t){return e.parseEventName(t)!=null}addEventListener(t,r,i){let o=e.parseEventName(r),c=e.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Vi().onAndCancel(t,o.domEventName,c))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=e._normalizeKey(r.pop()),c="",h=r.indexOf("code");if(h>-1&&(r.splice(h,1),c="code."),xE.forEach(m=>{let v=r.indexOf(m);v>-1&&(r.splice(v,1),c+=m+".")}),c+=o,r.length!=0||o.length===0)return null;let g={};return g.domEventName=i,g.fullKey=c,g}static matchEventFullKeyCode(t,r){let i=b4[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),xE.forEach(c=>{if(c!==i){let h=E4[c];h(t)&&(o+=c+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{e.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(r){return new(r||e)(He(Kn))}}static{this.\u0275prov=pe({token:e,factory:e.\u0275fac})}}return e})();function DE(e,n){return eE(ne({rootComponent:e},S4(n)))}function S4(e){return{appProviders:[...N4,...e?.providers??[]],platformProviders:M4}}function D4(){bm.makeCurrent()}function A4(){return new Ai}function T4(){return mx(document),document}var M4=[{provide:ci,useValue:uE},{provide:q0,useValue:D4,multi:!0},{provide:Kn,useFactory:T4,deps:[]}];var N4=[{provide:Gd,useValue:"root"},{provide:Ai,useFactory:A4,deps:[]},{provide:Em,useClass:x4,multi:!0,deps:[Kn,Xt,ci]},{provide:Em,useClass:I4,multi:!0,deps:[Kn]},_E,EE,bE,{provide:ra,useExisting:_E},{provide:mf,useClass:g4,deps:[]},[]];var AE=(()=>{class e{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||e)(He(Kn))}}static{this.\u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var Am=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=pe({token:e,factory:function(r){let i=null;return r?i=new(r||e):i=He(O4),i},providedIn:"root"})}}return e})(),O4=(()=>{class e extends Am{constructor(t){super(),this._doc=t}sanitize(t,r){if(r==null)return null;switch(t){case mo.NONE:return r;case mo.HTML:return ua(r,"HTML")?Pi(r):Fx(this._doc,String(r)).toString();case mo.STYLE:return ua(r,"Style")?Pi(r):r;case mo.SCRIPT:if(ua(r,"Script"))return Pi(r);throw new de(5200,!1);case mo.URL:return ua(r,"URL")?Pi(r):K0(String(r));case mo.RESOURCE_URL:if(ua(r,"ResourceURL"))return Pi(r);throw new de(5201,!1);default:throw new de(5202,!1)}}bypassSecurityTrustHtml(t){return Dx(t)}bypassSecurityTrustStyle(t){return Ax(t)}bypassSecurityTrustScript(t){return Tx(t)}bypassSecurityTrustUrl(t){return Mx(t)}bypassSecurityTrustResourceUrl(t){return Nx(t)}static{this.\u0275fac=function(r){return new(r||e)(He(Kn))}}static{this.\u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),Sm=function(e){return e[e.NoHttpTransferCache=0]="NoHttpTransferCache",e[e.HttpTransferCacheOptions=1]="HttpTransferCacheOptions",e[e.I18nSupport=2]="I18nSupport",e[e.EventReplay=3]="EventReplay",e}(Sm||{});function TE(...e){let n=[],t=new Set,r=t.has(Sm.HttpTransferCacheOptions);for(let{\u0275providers:i,\u0275kind:o}of e)t.add(o),i.length&&n.push(i);return oa([[],tE(),t.has(Sm.NoHttpTransferCache)||r?[]:CE({}),n])}var Re="primary",uc=Symbol("RouteTitle"),Rm=class{constructor(n){this.params=n||{}}has(n){return Object.prototype.hasOwnProperty.call(this.params,n)}get(n){if(this.has(n)){let t=this.params[n];return Array.isArray(t)?t[0]:t}return null}getAll(n){if(this.has(n)){let t=this.params[n];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function wa(e){return new Rm(e)}function R4(e,n,t){let r=t.path.split("/");if(r.length>e.length||t.pathMatch==="full"&&(n.hasChildren()||r.length<e.length))return null;let i={};for(let o=0;o<r.length;o++){let c=r[o],h=e[o];if(c[0]===":")i[c.substring(1)]=h;else if(c!==h.path)return null}return{consumed:e.slice(0,r.length),posParams:i}}function P4(e,n){if(e.length!==n.length)return!1;for(let t=0;t<e.length;++t)if(!fi(e[t],n[t]))return!1;return!0}function fi(e,n){let t=e?Pm(e):void 0,r=n?Pm(n):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!BE(e[i],n[i]))return!1;return!0}function Pm(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}function BE(e,n){if(Array.isArray(e)&&Array.isArray(n)){if(e.length!==n.length)return!1;let t=[...e].sort(),r=[...n].sort();return t.every((i,o)=>r[o]===i)}else return e===n}function VE(e){return e.length>0?e[e.length-1]:null}function yo(e){return Gp(e)?e:rs(e)?vt(Promise.resolve(e)):Ae(e)}var k4={exact:jE,subset:HE},UE={exact:L4,subset:F4,ignored:()=>!0};function NE(e,n,t){return k4[t.paths](e.root,n.root,t.matrixParams)&&UE[t.queryParams](e.queryParams,n.queryParams)&&!(t.fragment==="exact"&&e.fragment!==n.fragment)}function L4(e,n){return fi(e,n)}function jE(e,n,t){if(!ss(e.segments,n.segments)||!If(e.segments,n.segments,t)||e.numberOfChildren!==n.numberOfChildren)return!1;for(let r in n.children)if(!e.children[r]||!jE(e.children[r],n.children[r],t))return!1;return!0}function F4(e,n){return Object.keys(n).length<=Object.keys(e).length&&Object.keys(n).every(t=>BE(e[t],n[t]))}function HE(e,n,t){return zE(e,n,n.segments,t)}function zE(e,n,t,r){if(e.segments.length>t.length){let i=e.segments.slice(0,t.length);return!(!ss(i,t)||n.hasChildren()||!If(i,t,r))}else if(e.segments.length===t.length){if(!ss(e.segments,t)||!If(e.segments,t,r))return!1;for(let i in n.children)if(!e.children[i]||!HE(e.children[i],n.children[i],r))return!1;return!0}else{let i=t.slice(0,e.segments.length),o=t.slice(e.segments.length);return!ss(e.segments,i)||!If(e.segments,i,r)||!e.children[Re]?!1:zE(e.children[Re],n,o,r)}}function If(e,n,t){return n.every((r,i)=>UE[t](e[i].parameters,r.parameters))}var ji=class{constructor(n=new ft([],{}),t={},r=null){this.root=n,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=wa(this.queryParams),this._queryParamMap}toString(){return U4.serialize(this)}},ft=class{constructor(n,t){this.segments=n,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Sf(this)}},os=class{constructor(n,t){this.path=n,this.parameters=t}get parameterMap(){return this._parameterMap??=wa(this.parameters),this._parameterMap}toString(){return GE(this)}};function B4(e,n){return ss(e,n)&&e.every((t,r)=>fi(t.parameters,n[r].parameters))}function ss(e,n){return e.length!==n.length?!1:e.every((t,r)=>t.path===n[r].path)}function V4(e,n){let t=[];return Object.entries(e.children).forEach(([r,i])=>{r===Re&&(t=t.concat(n(i,r)))}),Object.entries(e.children).forEach(([r,i])=>{r!==Re&&(t=t.concat(n(i,r)))}),t}var s1=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=pe({token:e,factory:()=>new ec,providedIn:"root"})}}return e})(),ec=class{parse(n){let t=new Lm(n);return new ji(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(n){let t=`/${Yl(n.root,!0)}`,r=z4(n.queryParams),i=typeof n.fragment=="string"?`#${j4(n.fragment)}`:"";return`${t}${r}${i}`}},U4=new ec;function Sf(e){return e.segments.map(n=>GE(n)).join("/")}function Yl(e,n){if(!e.hasChildren())return Sf(e);if(n){let t=e.children[Re]?Yl(e.children[Re],!1):"",r=[];return Object.entries(e.children).forEach(([i,o])=>{i!==Re&&r.push(`${i}:${Yl(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=V4(e,(r,i)=>i===Re?[Yl(e.children[Re],!1)]:[`${i}:${Yl(r,!1)}`]);return Object.keys(e.children).length===1&&e.children[Re]!=null?`${Sf(e)}/${t[0]}`:`${Sf(e)}/(${t.join("//")})`}}function WE(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function bf(e){return WE(e).replace(/%3B/gi,";")}function j4(e){return encodeURI(e)}function km(e){return WE(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Df(e){return decodeURIComponent(e)}function OE(e){return Df(e.replace(/\+/g,"%20"))}function GE(e){return`${km(e.path)}${H4(e.parameters)}`}function H4(e){return Object.entries(e).map(([n,t])=>`;${km(n)}=${km(t)}`).join("")}function z4(e){let n=Object.entries(e).map(([t,r])=>Array.isArray(r)?r.map(i=>`${bf(t)}=${bf(i)}`).join("&"):`${bf(t)}=${bf(r)}`).filter(t=>t);return n.length?`?${n.join("&")}`:""}var W4=/^[^\/()?;#]+/;function Tm(e){let n=e.match(W4);return n?n[0]:""}var G4=/^[^\/()?;=#]+/;function $4(e){let n=e.match(G4);return n?n[0]:""}var q4=/^[^=?&#]+/;function Y4(e){let n=e.match(q4);return n?n[0]:""}var X4=/^[^&#]+/;function Z4(e){let n=e.match(X4);return n?n[0]:""}var Lm=class{constructor(n){this.url=n,this.remaining=n}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ft([],{}):new ft([],this.parseChildren())}parseQueryParams(){let n={};if(this.consumeOptional("?"))do this.parseQueryParam(n);while(this.consumeOptional("&"));return n}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let n=[];for(this.peekStartsWith("(")||n.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),n.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(n.length>0||Object.keys(t).length>0)&&(r[Re]=new ft(n,t)),r}parseSegment(){let n=Tm(this.remaining);if(n===""&&this.peekStartsWith(";"))throw new de(4009,!1);return this.capture(n),new os(Df(n),this.parseMatrixParams())}parseMatrixParams(){let n={};for(;this.consumeOptional(";");)this.parseParam(n);return n}parseParam(n){let t=$4(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=Tm(this.remaining);i&&(r=i,this.capture(r))}n[Df(t)]=Df(r)}parseQueryParam(n){let t=Y4(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let c=Z4(this.remaining);c&&(r=c,this.capture(r))}let i=OE(t),o=OE(r);if(n.hasOwnProperty(i)){let c=n[i];Array.isArray(c)||(c=[c],n[i]=c),c.push(o)}else n[i]=o}parseParens(n){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Tm(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new de(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):n&&(o=Re);let c=this.parseChildren();t[o]=Object.keys(c).length===1?c[Re]:new ft([],c),this.consumeOptional("//")}return t}peekStartsWith(n){return this.remaining.startsWith(n)}consumeOptional(n){return this.peekStartsWith(n)?(this.remaining=this.remaining.substring(n.length),!0):!1}capture(n){if(!this.consumeOptional(n))throw new de(4011,!1)}};function $E(e){return e.segments.length>0?new ft([],{[Re]:e}):e}function qE(e){let n={};for(let[r,i]of Object.entries(e.children)){let o=qE(i);if(r===Re&&o.segments.length===0&&o.hasChildren())for(let[c,h]of Object.entries(o.children))n[c]=h;else(o.segments.length>0||o.hasChildren())&&(n[r]=o)}let t=new ft(e.segments,n);return Q4(t)}function Q4(e){if(e.numberOfChildren===1&&e.children[Re]){let n=e.children[Re];return new ft(e.segments.concat(n.segments),n.children)}return e}function tc(e){return e instanceof ji}function K4(e,n,t=null,r=null){let i=YE(e);return XE(i,n,t,r)}function YE(e){let n;function t(o){let c={};for(let g of o.children){let m=t(g);c[g.outlet]=m}let h=new ft(o.url,c);return o===e&&(n=h),h}let r=t(e.root),i=$E(r);return n??i}function XE(e,n,t,r){let i=e;for(;i.parent;)i=i.parent;if(n.length===0)return Mm(i,i,i,t,r);let o=J4(n);if(o.toRoot())return Mm(i,i,new ft([],{}),t,r);let c=e8(o,i,e),h=c.processChildren?Ql(c.segmentGroup,c.index,o.commands):QE(c.segmentGroup,c.index,o.commands);return Mm(i,c.segmentGroup,h,t,r)}function Af(e){return typeof e=="object"&&e!=null&&!e.outlets&&!e.segmentPath}function nc(e){return typeof e=="object"&&e!=null&&e.outlets}function Mm(e,n,t,r,i){let o={};r&&Object.entries(r).forEach(([g,m])=>{o[g]=Array.isArray(m)?m.map(v=>`${v}`):`${m}`});let c;e===n?c=t:c=ZE(e,n,t);let h=$E(qE(c));return new ji(h,o,i)}function ZE(e,n,t){let r={};return Object.entries(e.children).forEach(([i,o])=>{o===n?r[i]=t:r[i]=ZE(o,n,t)}),new ft(e.segments,r)}var Tf=class{constructor(n,t,r){if(this.isAbsolute=n,this.numberOfDoubleDots=t,this.commands=r,n&&r.length>0&&Af(r[0]))throw new de(4003,!1);let i=r.find(nc);if(i&&i!==VE(r))throw new de(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function J4(e){if(typeof e[0]=="string"&&e.length===1&&e[0]==="/")return new Tf(!0,0,e);let n=0,t=!1,r=e.reduce((i,o,c)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let h={};return Object.entries(o.outlets).forEach(([g,m])=>{h[g]=typeof m=="string"?m.split("/"):m}),[...i,{outlets:h}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:c===0?(o.split("/").forEach((h,g)=>{g==0&&h==="."||(g==0&&h===""?t=!0:h===".."?n++:h!=""&&i.push(h))}),i):[...i,o]},[]);return new Tf(t,n,r)}var ga=class{constructor(n,t,r){this.segmentGroup=n,this.processChildren=t,this.index=r}};function e8(e,n,t){if(e.isAbsolute)return new ga(n,!0,0);if(!t)return new ga(n,!1,NaN);if(t.parent===null)return new ga(t,!0,0);let r=Af(e.commands[0])?0:1,i=t.segments.length-1+r;return t8(t,i,e.numberOfDoubleDots)}function t8(e,n,t){let r=e,i=n,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new de(4005,!1);i=r.segments.length}return new ga(r,!1,i-o)}function n8(e){return nc(e[0])?e[0].outlets:{[Re]:e}}function QE(e,n,t){if(e??=new ft([],{}),e.segments.length===0&&e.hasChildren())return Ql(e,n,t);let r=r8(e,n,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){let o=new ft(e.segments.slice(0,r.pathIndex),{});return o.children[Re]=new ft(e.segments.slice(r.pathIndex),e.children),Ql(o,0,i)}else return r.match&&i.length===0?new ft(e.segments,{}):r.match&&!e.hasChildren()?Fm(e,n,t):r.match?Ql(e,0,i):Fm(e,n,t)}function Ql(e,n,t){if(t.length===0)return new ft(e.segments,{});{let r=n8(t),i={};if(Object.keys(r).some(o=>o!==Re)&&e.children[Re]&&e.numberOfChildren===1&&e.children[Re].segments.length===0){let o=Ql(e.children[Re],n,t);return new ft(e.segments,o.children)}return Object.entries(r).forEach(([o,c])=>{typeof c=="string"&&(c=[c]),c!==null&&(i[o]=QE(e.children[o],n,c))}),Object.entries(e.children).forEach(([o,c])=>{r[o]===void 0&&(i[o]=c)}),new ft(e.segments,i)}}function r8(e,n,t){let r=0,i=n,o={match:!1,pathIndex:0,commandIndex:0};for(;i<e.segments.length;){if(r>=t.length)return o;let c=e.segments[i],h=t[r];if(nc(h))break;let g=`${h}`,m=r<t.length-1?t[r+1]:null;if(i>0&&g===void 0)break;if(g&&m&&typeof m=="object"&&m.outlets===void 0){if(!PE(g,m,c))return o;r+=2}else{if(!PE(g,{},c))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Fm(e,n,t){let r=e.segments.slice(0,n),i=0;for(;i<t.length;){let o=t[i];if(nc(o)){let g=i8(o.outlets);return new ft(r,g)}if(i===0&&Af(t[0])){let g=e.segments[n];r.push(new os(g.path,RE(t[0]))),i++;continue}let c=nc(o)?o.outlets[Re]:`${o}`,h=i<t.length-1?t[i+1]:null;c&&h&&Af(h)?(r.push(new os(c,RE(h))),i+=2):(r.push(new os(c,{})),i++)}return new ft(r,{})}function i8(e){let n={};return Object.entries(e).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(n[t]=Fm(new ft([],{}),0,r))}),n}function RE(e){let n={};return Object.entries(e).forEach(([t,r])=>n[t]=`${r}`),n}function PE(e,n,t){return e==t.path&&fi(n,t.parameters)}var Kl="imperative",An=function(e){return e[e.NavigationStart=0]="NavigationStart",e[e.NavigationEnd=1]="NavigationEnd",e[e.NavigationCancel=2]="NavigationCancel",e[e.NavigationError=3]="NavigationError",e[e.RoutesRecognized=4]="RoutesRecognized",e[e.ResolveStart=5]="ResolveStart",e[e.ResolveEnd=6]="ResolveEnd",e[e.GuardsCheckStart=7]="GuardsCheckStart",e[e.GuardsCheckEnd=8]="GuardsCheckEnd",e[e.RouteConfigLoadStart=9]="RouteConfigLoadStart",e[e.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",e[e.ChildActivationStart=11]="ChildActivationStart",e[e.ChildActivationEnd=12]="ChildActivationEnd",e[e.ActivationStart=13]="ActivationStart",e[e.ActivationEnd=14]="ActivationEnd",e[e.Scroll=15]="Scroll",e[e.NavigationSkipped=16]="NavigationSkipped",e}(An||{}),xr=class{constructor(n,t){this.id=n,this.url=t}},rc=class extends xr{constructor(n,t,r="imperative",i=null){super(n,t),this.type=An.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},as=class extends xr{constructor(n,t,r){super(n,t),this.urlAfterRedirects=r,this.type=An.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},fr=function(e){return e[e.Redirect=0]="Redirect",e[e.SupersededByNewNavigation=1]="SupersededByNewNavigation",e[e.NoDataFromResolver=2]="NoDataFromResolver",e[e.GuardRejected=3]="GuardRejected",e}(fr||{}),Bm=function(e){return e[e.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",e[e.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",e}(Bm||{}),Ui=class extends xr{constructor(n,t,r,i){super(n,t),this.reason=r,this.code=i,this.type=An.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},ls=class extends xr{constructor(n,t,r,i){super(n,t),this.reason=r,this.code=i,this.type=An.NavigationSkipped}},ic=class extends xr{constructor(n,t,r,i){super(n,t),this.error=r,this.target=i,this.type=An.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Mf=class extends xr{constructor(n,t,r,i){super(n,t),this.urlAfterRedirects=r,this.state=i,this.type=An.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Vm=class extends xr{constructor(n,t,r,i){super(n,t),this.urlAfterRedirects=r,this.state=i,this.type=An.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Um=class extends xr{constructor(n,t,r,i,o){super(n,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=An.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},jm=class extends xr{constructor(n,t,r,i){super(n,t),this.urlAfterRedirects=r,this.state=i,this.type=An.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Hm=class extends xr{constructor(n,t,r,i){super(n,t),this.urlAfterRedirects=r,this.state=i,this.type=An.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},zm=class{constructor(n){this.route=n,this.type=An.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Wm=class{constructor(n){this.route=n,this.type=An.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Gm=class{constructor(n){this.snapshot=n,this.type=An.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},$m=class{constructor(n){this.snapshot=n,this.type=An.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},qm=class{constructor(n){this.snapshot=n,this.type=An.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ym=class{constructor(n){this.snapshot=n,this.type=An.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var oc=class{},Ca=class{constructor(n,t){this.url=n,this.navigationBehaviorOptions=t}};function o8(e,n){return e.providers&&!e._injector&&(e._injector=hm(e.providers,n,`Route: ${e.path}`)),e._injector??n}function Xr(e){return e.outlet||Re}function s8(e,n){let t=e.filter(r=>Xr(r)===n);return t.push(...e.filter(r=>Xr(r)!==n)),t}function dc(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let n=e.parent;n;n=n.parent){let t=n.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var Xm=class{get injector(){return dc(this.route?.snapshot)??this.rootInjector}set injector(n){}constructor(n){this.rootInjector=n,this.outlet=null,this.route=null,this.children=new Ff(this.rootInjector),this.attachRef=null}},Ff=(()=>{class e{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Xm(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||e)(He(vr))}}static{this.\u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),Nf=class{constructor(n){this._root=n}get root(){return this._root.value}parent(n){let t=this.pathFromRoot(n);return t.length>1?t[t.length-2]:null}children(n){let t=Zm(n,this._root);return t?t.children.map(r=>r.value):[]}firstChild(n){let t=Zm(n,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(n){let t=Qm(n,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==n)}pathFromRoot(n){return Qm(n,this._root).map(t=>t.value)}};function Zm(e,n){if(e===n.value)return n;for(let t of n.children){let r=Zm(e,t);if(r)return r}return null}function Qm(e,n){if(e===n.value)return[n];for(let t of n.children){let r=Qm(e,t);if(r.length)return r.unshift(n),r}return[]}var dr=class{constructor(n,t){this.value=n,this.children=t}toString(){return`TreeNode(${this.value})`}};function pa(e){let n={};return e&&e.children.forEach(t=>n[t.value.outlet]=t),n}var Of=class extends Nf{constructor(n,t){super(n),this.snapshot=t,a1(this,n)}toString(){return this.snapshot.toString()}};function KE(e){let n=a8(e),t=new bn([new os("",{})]),r=new bn({}),i=new bn({}),o=new bn({}),c=new bn(""),h=new hi(t,r,o,c,i,Re,e,n.root);return h.snapshot=n.root,new Of(new dr(h,[]),n)}function a8(e){let n={},t={},r={},i="",o=new ma([],n,r,i,t,Re,e,null,{});return new Pf("",new dr(o,[]))}var hi=class{constructor(n,t,r,i,o,c,h,g){this.urlSubject=n,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=c,this.component=h,this._futureSnapshot=g,this.title=this.dataSubject?.pipe(Be(m=>m[uc]))??Ae(void 0),this.url=n,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Be(n=>wa(n))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Be(n=>wa(n))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Rf(e,n,t="emptyOnly"){let r,{routeConfig:i}=e;return n!==null&&(t==="always"||i?.path===""||!n.component&&!n.routeConfig?.loadComponent)?r={params:ne(ne({},n.params),e.params),data:ne(ne({},n.data),e.data),resolve:ne(ne(ne(ne({},e.data),n.data),i?.data),e._resolvedData)}:r={params:ne({},e.params),data:ne({},e.data),resolve:ne(ne({},e.data),e._resolvedData??{})},i&&eI(i)&&(r.resolve[uc]=i.title),r}var ma=class{get title(){return this.data?.[uc]}constructor(n,t,r,i,o,c,h,g,m){this.url=n,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=c,this.component=h,this.routeConfig=g,this._resolve=m}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=wa(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=wa(this.queryParams),this._queryParamMap}toString(){let n=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${n}', path:'${t}')`}},Pf=class extends Nf{constructor(n,t){super(t),this.url=n,a1(this,t)}toString(){return JE(this._root)}};function a1(e,n){n.value._routerState=e,n.children.forEach(t=>a1(e,t))}function JE(e){let n=e.children.length>0?` { ${e.children.map(JE).join(", ")} } `:"";return`${e.value}${n}`}function Nm(e){if(e.snapshot){let n=e.snapshot,t=e._futureSnapshot;e.snapshot=t,fi(n.queryParams,t.queryParams)||e.queryParamsSubject.next(t.queryParams),n.fragment!==t.fragment&&e.fragmentSubject.next(t.fragment),fi(n.params,t.params)||e.paramsSubject.next(t.params),P4(n.url,t.url)||e.urlSubject.next(t.url),fi(n.data,t.data)||e.dataSubject.next(t.data)}else e.snapshot=e._futureSnapshot,e.dataSubject.next(e._futureSnapshot.data)}function Km(e,n){let t=fi(e.params,n.params)&&B4(e.url,n.url),r=!e.parent!=!n.parent;return t&&!r&&(!e.parent||Km(e.parent,n.parent))}function eI(e){return typeof e.title=="string"||e.title===null}var l1=(()=>{class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=Re,this.activateEvents=new Ot,this.deactivateEvents=new Ot,this.attachEvents=new Ot,this.detachEvents=new Ot,this.parentContexts=K(Ff),this.location=K(da),this.changeDetector=K(Fi),this.inputBinder=K(c1,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new de(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new de(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new de(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new de(4013,!1);this._activatedRoute=t;let i=this.location,c=t.snapshot.component,h=this.parentContexts.getOrCreateContext(this.name).children,g=new Jm(t,h,i.injector);this.activated=i.createComponent(c,{index:i.length,injector:g,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275dir=rn({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Ri]})}}return e})(),Jm=class e{__ngOutletInjector(n){return new e(this.route,this.childContexts,n)}constructor(n,t,r){this.route=n,this.childContexts=t,this.parent=r}get(n,t){return n===hi?this.route:n===Ff?this.childContexts:this.parent.get(n,t)}},c1=new ve("");function l8(e,n,t){let r=sc(e,n._root,t?t._root:void 0);return new Of(r,n)}function sc(e,n,t){if(t&&e.shouldReuseRoute(n.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=n.value;let i=c8(e,n,t);return new dr(r,i)}else{if(e.shouldAttach(n.value)){let o=e.retrieve(n.value);if(o!==null){let c=o.route;return c.value._futureSnapshot=n.value,c.children=n.children.map(h=>sc(e,h)),c}}let r=u8(n.value),i=n.children.map(o=>sc(e,o));return new dr(r,i)}}function c8(e,n,t){return n.children.map(r=>{for(let i of t.children)if(e.shouldReuseRoute(r.value,i.value.snapshot))return sc(e,r,i);return sc(e,r)})}function u8(e){return new hi(new bn(e.url),new bn(e.params),new bn(e.queryParams),new bn(e.fragment),new bn(e.data),e.outlet,e.component,e)}var ac=class{constructor(n,t){this.redirectTo=n,this.navigationBehaviorOptions=t}},tI="ngNavigationCancelingError";function kf(e,n){let{redirectTo:t,navigationBehaviorOptions:r}=tc(n)?{redirectTo:n,navigationBehaviorOptions:void 0}:n,i=nI(!1,fr.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function nI(e,n){let t=new Error(`NavigationCancelingError: ${e||""}`);return t[tI]=!0,t.cancellationCode=n,t}function d8(e){return rI(e)&&tc(e.url)}function rI(e){return!!e&&e[tI]}var f8=(e,n,t,r)=>Be(i=>(new e1(n,i.targetRouterState,i.currentRouterState,t,r).activate(e),i)),e1=class{constructor(n,t,r,i,o){this.routeReuseStrategy=n,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(n){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,n),Nm(this.futureState.root),this.activateChildRoutes(t,r,n)}deactivateChildRoutes(n,t,r){let i=pa(t);n.children.forEach(o=>{let c=o.value.outlet;this.deactivateRoutes(o,i[c],r),delete i[c]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(n,t,r){let i=n.value,o=t?t.value:null;if(i===o)if(i.component){let c=r.getContext(i.outlet);c&&this.deactivateChildRoutes(n,t,c.children)}else this.deactivateChildRoutes(n,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(n,t){n.value.component&&this.routeReuseStrategy.shouldDetach(n.value.snapshot)?this.detachAndStoreRouteSubtree(n,t):this.deactivateRouteAndOutlet(n,t)}detachAndStoreRouteSubtree(n,t){let r=t.getContext(n.value.outlet),i=r&&n.value.component?r.children:t,o=pa(n);for(let c of Object.values(o))this.deactivateRouteAndItsChildren(c,i);if(r&&r.outlet){let c=r.outlet.detach(),h=r.children.onOutletDeactivated();this.routeReuseStrategy.store(n.value.snapshot,{componentRef:c,route:n,contexts:h})}}deactivateRouteAndOutlet(n,t){let r=t.getContext(n.value.outlet),i=r&&n.value.component?r.children:t,o=pa(n);for(let c of Object.values(o))this.deactivateRouteAndItsChildren(c,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(n,t,r){let i=pa(t);n.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Ym(o.value.snapshot))}),n.children.length&&this.forwardEvent(new $m(n.value.snapshot))}activateRoutes(n,t,r){let i=n.value,o=t?t.value:null;if(Nm(i),i===o)if(i.component){let c=r.getOrCreateContext(i.outlet);this.activateChildRoutes(n,t,c.children)}else this.activateChildRoutes(n,t,r);else if(i.component){let c=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let h=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),c.children.onOutletReAttached(h.contexts),c.attachRef=h.componentRef,c.route=h.route.value,c.outlet&&c.outlet.attach(h.componentRef,h.route.value),Nm(h.route.value),this.activateChildRoutes(n,null,c.children)}else c.attachRef=null,c.route=i,c.outlet&&c.outlet.activateWith(i,c.injector),this.activateChildRoutes(n,null,c.children)}else this.activateChildRoutes(n,null,r)}},Lf=class{constructor(n){this.path=n,this.route=this.path[this.path.length-1]}},ya=class{constructor(n,t){this.component=n,this.route=t}};function h8(e,n,t){let r=e._root,i=n?n._root:null;return Xl(r,i,t,[r.value])}function p8(e){let n=e.routeConfig?e.routeConfig.canActivateChild:null;return!n||n.length===0?null:{node:e,guards:n}}function va(e,n){let t=Symbol(),r=n.get(e,t);return r===t?typeof e=="function"&&!tv(e)?e:n.get(e):r}function Xl(e,n,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=pa(n);return e.children.forEach(c=>{g8(c,o[c.value.outlet],t,r.concat([c.value]),i),delete o[c.value.outlet]}),Object.entries(o).forEach(([c,h])=>Jl(h,t.getContext(c),i)),i}function g8(e,n,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=e.value,c=n?n.value:null,h=t?t.getContext(e.value.outlet):null;if(c&&o.routeConfig===c.routeConfig){let g=m8(c,o,o.routeConfig.runGuardsAndResolvers);g?i.canActivateChecks.push(new Lf(r)):(o.data=c.data,o._resolvedData=c._resolvedData),o.component?Xl(e,n,h?h.children:null,r,i):Xl(e,n,t,r,i),g&&h&&h.outlet&&h.outlet.isActivated&&i.canDeactivateChecks.push(new ya(h.outlet.component,c))}else c&&Jl(n,h,i),i.canActivateChecks.push(new Lf(r)),o.component?Xl(e,null,h?h.children:null,r,i):Xl(e,null,t,r,i);return i}function m8(e,n,t){if(typeof t=="function")return t(e,n);switch(t){case"pathParamsChange":return!ss(e.url,n.url);case"pathParamsOrQueryParamsChange":return!ss(e.url,n.url)||!fi(e.queryParams,n.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Km(e,n)||!fi(e.queryParams,n.queryParams);case"paramsChange":default:return!Km(e,n)}}function Jl(e,n,t){let r=pa(e),i=e.value;Object.entries(r).forEach(([o,c])=>{i.component?n?Jl(c,n.children.getContext(o),t):Jl(c,null,t):Jl(c,n,t)}),i.component?n&&n.outlet&&n.outlet.isActivated?t.canDeactivateChecks.push(new ya(n.outlet.component,i)):t.canDeactivateChecks.push(new ya(null,i)):t.canDeactivateChecks.push(new ya(null,i))}function fc(e){return typeof e=="function"}function y8(e){return typeof e=="boolean"}function w8(e){return e&&fc(e.canLoad)}function C8(e){return e&&fc(e.canActivate)}function _8(e){return e&&fc(e.canActivateChild)}function v8(e){return e&&fc(e.canDeactivate)}function x8(e){return e&&fc(e.canMatch)}function iI(e){return e instanceof bi||e?.name==="EmptyError"}var Ef=Symbol("INITIAL_VALUE");function _a(){return wr(e=>Ju(e.map(n=>n.pipe(Ei(1),Kp(Ef)))).pipe(Be(n=>{for(let t of n)if(t!==!0){if(t===Ef)return Ef;if(t===!1||b8(t))return t}return!0}),mr(n=>n!==Ef),Ei(1)))}function b8(e){return tc(e)||e instanceof ac}function E8(e,n){return tn(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:c}}=t;return c.length===0&&o.length===0?Ae(Le(ne({},t),{guardsResult:!0})):I8(c,r,i,e).pipe(tn(h=>h&&y8(h)?S8(r,o,e,n):Ae(h)),Be(h=>Le(ne({},t),{guardsResult:h})))})}function I8(e,n,t,r){return vt(e).pipe(tn(i=>N8(i.component,i.route,t,n,r)),Fr(i=>i!==!0,!0))}function S8(e,n,t,r){return vt(n).pipe(zo(i=>js(A8(i.route.parent,r),D8(i.route,r),M8(e,i.path,t),T8(e,i.route,t))),Fr(i=>i!==!0,!0))}function D8(e,n){return e!==null&&n&&n(new qm(e)),Ae(!0)}function A8(e,n){return e!==null&&n&&n(new Gm(e)),Ae(!0)}function T8(e,n,t){let r=n.routeConfig?n.routeConfig.canActivate:null;if(!r||r.length===0)return Ae(!0);let i=r.map(o=>ed(()=>{let c=dc(n)??t,h=va(o,c),g=C8(h)?h.canActivate(n,e):ai(c,()=>h(n,e));return yo(g).pipe(Fr())}));return Ae(i).pipe(_a())}function M8(e,n,t){let r=n[n.length-1],o=n.slice(0,n.length-1).reverse().map(c=>p8(c)).filter(c=>c!==null).map(c=>ed(()=>{let h=c.guards.map(g=>{let m=dc(c.node)??t,v=va(g,m),x=_8(v)?v.canActivateChild(r,e):ai(m,()=>v(r,e));return yo(x).pipe(Fr())});return Ae(h).pipe(_a())}));return Ae(o).pipe(_a())}function N8(e,n,t,r,i){let o=n&&n.routeConfig?n.routeConfig.canDeactivate:null;if(!o||o.length===0)return Ae(!0);let c=o.map(h=>{let g=dc(n)??i,m=va(h,g),v=v8(m)?m.canDeactivate(e,n,t,r):ai(g,()=>m(e,n,t,r));return yo(v).pipe(Fr())});return Ae(c).pipe(_a())}function O8(e,n,t,r){let i=n.canLoad;if(i===void 0||i.length===0)return Ae(!0);let o=i.map(c=>{let h=va(c,e),g=w8(h)?h.canLoad(n,t):ai(e,()=>h(n,t));return yo(g)});return Ae(o).pipe(_a(),oI(r))}function oI(e){return Up(nn(n=>{if(typeof n!="boolean")throw kf(e,n)}),Be(n=>n===!0))}function R8(e,n,t,r){let i=n.canMatch;if(!i||i.length===0)return Ae(!0);let o=i.map(c=>{let h=va(c,e),g=x8(h)?h.canMatch(n,t):ai(e,()=>h(n,t));return yo(g)});return Ae(o).pipe(_a(),oI(r))}var lc=class{constructor(n){this.segmentGroup=n||null}},cc=class extends Error{constructor(n){super(),this.urlTree=n}};function ha(e){return Us(new lc(e))}function P8(e){return Us(new de(4e3,!1))}function k8(e){return Us(nI(!1,fr.GuardRejected))}var t1=class{constructor(n,t){this.urlSerializer=n,this.urlTree=t}lineralizeSegments(n,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return Ae(r);if(i.numberOfChildren>1||!i.children[Re])return P8(`${n.redirectTo}`);i=i.children[Re]}}applyRedirectCommands(n,t,r,i,o){if(typeof t!="string"){let h=t,{queryParams:g,fragment:m,routeConfig:v,url:x,outlet:I,params:A,data:R,title:j}=i,$=ai(o,()=>h({params:A,data:R,queryParams:g,fragment:m,routeConfig:v,url:x,outlet:I,title:j}));if($ instanceof ji)throw new cc($);t=$}let c=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),n,r);if(t[0]==="/")throw new cc(c);return c}applyRedirectCreateUrlTree(n,t,r,i){let o=this.createSegmentGroup(n,t.root,r,i);return new ji(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(n,t){let r={};return Object.entries(n).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let h=o.substring(1);r[i]=t[h]}else r[i]=o}),r}createSegmentGroup(n,t,r,i){let o=this.createSegments(n,t.segments,r,i),c={};return Object.entries(t.children).forEach(([h,g])=>{c[h]=this.createSegmentGroup(n,g,r,i)}),new ft(o,c)}createSegments(n,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(n,o,i):this.findOrReturn(o,r))}findPosParam(n,t,r){let i=r[t.path.substring(1)];if(!i)throw new de(4001,!1);return i}findOrReturn(n,t){let r=0;for(let i of t){if(i.path===n.path)return t.splice(r),i;r++}return n}},n1={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function L8(e,n,t,r,i){let o=sI(e,n,t);return o.matched?(r=o8(n,r),R8(r,n,t,i).pipe(Be(c=>c===!0?o:ne({},n1)))):Ae(o)}function sI(e,n,t){if(n.path==="**")return F8(t);if(n.path==="")return n.pathMatch==="full"&&(e.hasChildren()||t.length>0)?ne({},n1):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(n.matcher||R4)(t,e,n);if(!i)return ne({},n1);let o={};Object.entries(i.posParams??{}).forEach(([h,g])=>{o[h]=g.path});let c=i.consumed.length>0?ne(ne({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:c,positionalParamSegments:i.posParams??{}}}function F8(e){return{matched:!0,parameters:e.length>0?VE(e).parameters:{},consumedSegments:e,remainingSegments:[],positionalParamSegments:{}}}function kE(e,n,t,r){return t.length>0&&U8(e,t,r)?{segmentGroup:new ft(n,V8(r,new ft(t,e.children))),slicedSegments:[]}:t.length===0&&j8(e,t,r)?{segmentGroup:new ft(e.segments,B8(e,t,r,e.children)),slicedSegments:t}:{segmentGroup:new ft(e.segments,e.children),slicedSegments:t}}function B8(e,n,t,r){let i={};for(let o of t)if(Bf(e,n,o)&&!r[Xr(o)]){let c=new ft([],{});i[Xr(o)]=c}return ne(ne({},r),i)}function V8(e,n){let t={};t[Re]=n;for(let r of e)if(r.path===""&&Xr(r)!==Re){let i=new ft([],{});t[Xr(r)]=i}return t}function U8(e,n,t){return t.some(r=>Bf(e,n,r)&&Xr(r)!==Re)}function j8(e,n,t){return t.some(r=>Bf(e,n,r))}function Bf(e,n,t){return(e.hasChildren()||n.length>0)&&t.pathMatch==="full"?!1:t.path===""}function H8(e,n,t){return n.length===0&&!e.children[t]}var r1=class{};function z8(e,n,t,r,i,o,c="emptyOnly"){return new i1(e,n,t,r,i,c,o).recognize()}var W8=31,i1=class{constructor(n,t,r,i,o,c,h){this.injector=n,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=c,this.urlSerializer=h,this.applyRedirects=new t1(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(n){return new de(4002,`'${n.segmentGroup}'`)}recognize(){let n=kE(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(n).pipe(Be(({children:t,rootSnapshot:r})=>{let i=new dr(r,t),o=new Pf("",i),c=K4(r,[],this.urlTree.queryParams,this.urlTree.fragment);return c.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(c),{state:o,tree:c}}))}match(n){let t=new ma([],Object.freeze({}),Object.freeze(ne({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),Re,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,n,Re,t).pipe(Be(r=>({children:r,rootSnapshot:t})),yr(r=>{if(r instanceof cc)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof lc?this.noMatchError(r):r}))}processSegmentGroup(n,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(n,t,r,o):this.processSegment(n,t,r,r.segments,i,!0,o).pipe(Be(c=>c instanceof dr?[c]:[]))}processChildren(n,t,r,i){let o=[];for(let c of Object.keys(r.children))c==="primary"?o.unshift(c):o.push(c);return vt(o).pipe(zo(c=>{let h=r.children[c],g=s8(t,c);return this.processSegmentGroup(n,g,h,c,i)}),Qp((c,h)=>(c.push(...h),c)),oo(null),Zp(),tn(c=>{if(c===null)return ha(r);let h=aI(c);return G8(h),Ae(h)}))}processSegment(n,t,r,i,o,c,h){return vt(t).pipe(zo(g=>this.processSegmentAgainstRoute(g._injector??n,t,g,r,i,o,c,h).pipe(yr(m=>{if(m instanceof lc)return Ae(null);throw m}))),Fr(g=>!!g),yr(g=>{if(iI(g))return H8(r,i,o)?Ae(new r1):ha(r);throw g}))}processSegmentAgainstRoute(n,t,r,i,o,c,h,g){return Xr(r)!==c&&(c===Re||!Bf(i,o,r))?ha(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(n,i,r,o,c,g):this.allowRedirects&&h?this.expandSegmentAgainstRouteUsingRedirect(n,i,t,r,o,c,g):ha(i)}expandSegmentAgainstRouteUsingRedirect(n,t,r,i,o,c,h){let{matched:g,parameters:m,consumedSegments:v,positionalParamSegments:x,remainingSegments:I}=sI(t,i,o);if(!g)return ha(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>W8&&(this.allowRedirects=!1));let A=new ma(o,m,Object.freeze(ne({},this.urlTree.queryParams)),this.urlTree.fragment,LE(i),Xr(i),i.component??i._loadedComponent??null,i,FE(i)),R=Rf(A,h,this.paramsInheritanceStrategy);A.params=Object.freeze(R.params),A.data=Object.freeze(R.data);let j=this.applyRedirects.applyRedirectCommands(v,i.redirectTo,x,A,n);return this.applyRedirects.lineralizeSegments(i,j).pipe(tn($=>this.processSegment(n,r,t,$.concat(I),c,!1,h)))}matchSegmentAgainstRoute(n,t,r,i,o,c){let h=L8(t,r,i,n,this.urlSerializer);return r.path==="**"&&(t.children={}),h.pipe(wr(g=>g.matched?(n=r._injector??n,this.getChildConfig(n,r,i).pipe(wr(({routes:m})=>{let v=r._loadedInjector??n,{parameters:x,consumedSegments:I,remainingSegments:A}=g,R=new ma(I,x,Object.freeze(ne({},this.urlTree.queryParams)),this.urlTree.fragment,LE(r),Xr(r),r.component??r._loadedComponent??null,r,FE(r)),j=Rf(R,c,this.paramsInheritanceStrategy);R.params=Object.freeze(j.params),R.data=Object.freeze(j.data);let{segmentGroup:$,slicedSegments:W}=kE(t,I,A,m);if(W.length===0&&$.hasChildren())return this.processChildren(v,m,$,R).pipe(Be(Xe=>new dr(R,Xe)));if(m.length===0&&W.length===0)return Ae(new dr(R,[]));let ce=Xr(r)===o;return this.processSegment(v,m,$,W,ce?Re:o,!0,R).pipe(Be(Xe=>new dr(R,Xe instanceof dr?[Xe]:[])))}))):ha(t)))}getChildConfig(n,t,r){return t.children?Ae({routes:t.children,injector:n}):t.loadChildren?t._loadedRoutes!==void 0?Ae({routes:t._loadedRoutes,injector:t._loadedInjector}):O8(n,t,r,this.urlSerializer).pipe(tn(i=>i?this.configLoader.loadChildren(n,t).pipe(nn(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):k8(t))):Ae({routes:[],injector:n})}};function G8(e){e.sort((n,t)=>n.value.outlet===Re?-1:t.value.outlet===Re?1:n.value.outlet.localeCompare(t.value.outlet))}function $8(e){let n=e.value.routeConfig;return n&&n.path===""}function aI(e){let n=[],t=new Set;for(let r of e){if(!$8(r)){n.push(r);continue}let i=n.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):n.push(r)}for(let r of t){let i=aI(r.children);n.push(new dr(r.value,i))}return n.filter(r=>!t.has(r))}function LE(e){return e.data||{}}function FE(e){return e.resolve||{}}function q8(e,n,t,r,i,o){return tn(c=>z8(e,n,t,r,c.extractedUrl,i,o).pipe(Be(({state:h,tree:g})=>Le(ne({},c),{targetSnapshot:h,urlAfterRedirects:g}))))}function Y8(e,n){return tn(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Ae(t);let o=new Set(i.map(g=>g.route)),c=new Set;for(let g of o)if(!c.has(g))for(let m of lI(g))c.add(m);let h=0;return vt(c).pipe(zo(g=>o.has(g)?X8(g,r,e,n):(g.data=Rf(g,g.parent,e).resolve,Ae(void 0))),nn(()=>h++),zs(1),tn(g=>h===c.size?Ae(t):sr))})}function lI(e){let n=e.children.map(t=>lI(t)).flat();return[e,...n]}function X8(e,n,t,r){let i=e.routeConfig,o=e._resolve;return i?.title!==void 0&&!eI(i)&&(o[uc]=i.title),Z8(o,e,n,r).pipe(Be(c=>(e._resolvedData=c,e.data=Rf(e,e.parent,t).resolve,null)))}function Z8(e,n,t,r){let i=Pm(e);if(i.length===0)return Ae({});let o={};return vt(i).pipe(tn(c=>Q8(e[c],n,t,r).pipe(Fr(),nn(h=>{if(h instanceof ac)throw kf(new ec,h);o[c]=h}))),zs(1),Xp(o),yr(c=>iI(c)?sr:Us(c)))}function Q8(e,n,t,r){let i=dc(n)??r,o=va(e,i),c=o.resolve?o.resolve(n,t):ai(i,()=>o(n,t));return yo(c)}function Om(e){return wr(n=>{let t=e(n);return t?vt(t).pipe(Be(()=>n)):Ae(n)})}var cI=(()=>{class e{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===Re);return r}getResolvedTitleForRoute(t){return t.data[uc]}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=pe({token:e,factory:()=>K(K8),providedIn:"root"})}}return e})(),K8=(()=>{class e extends cI{constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||e)(He(AE))}}static{this.\u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),u1=new ve("",{providedIn:"root",factory:()=>({})}),J8=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275cmp=ie({type:e,selectors:[["ng-component"]],standalone:!0,features:[oe],decls:1,vars:0,template:function(r,i){r&1&&le(0,"router-outlet")},dependencies:[l1],encapsulation:2})}}return e})();function d1(e){let n=e.children&&e.children.map(d1),t=n?Le(ne({},e),{children:n}):ne({},e);return!t.component&&!t.loadComponent&&(n||t.loadChildren)&&t.outlet&&t.outlet!==Re&&(t.component=J8),t}var f1=new ve(""),eL=(()=>{class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=K(pm)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Ae(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=yo(t.loadComponent()).pipe(Be(uI),nn(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),Hs(()=>{this.componentLoaders.delete(t)})),i=new Bs(r,()=>new xn).pipe(Fs());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Ae({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=tL(r,this.compiler,t,this.onLoadEndListener).pipe(Hs(()=>{this.childrenLoaders.delete(r)})),c=new Bs(o,()=>new xn).pipe(Fs());return this.childrenLoaders.set(r,c),c}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function tL(e,n,t,r){return yo(e.loadChildren()).pipe(Be(uI),tn(i=>i instanceof Dl||Array.isArray(i)?Ae(i):vt(n.compileModuleAsync(i))),Be(i=>{r&&r(e);let o,c,h=!1;return Array.isArray(i)?(c=i,h=!0):(o=i.create(t).injector,c=o.get(f1,[],{optional:!0,self:!0}).flat()),{routes:c.map(d1),injector:o}}))}function nL(e){return e&&typeof e=="object"&&"default"in e}function uI(e){return nL(e)?e.default:e}var h1=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=pe({token:e,factory:()=>K(rL),providedIn:"root"})}}return e})(),rL=(()=>{class e{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),iL=new ve("");var oL=new ve(""),sL=(()=>{class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new xn,this.transitionAbortSubject=new xn,this.configLoader=K(eL),this.environmentInjector=K(vr),this.urlSerializer=K(s1),this.rootContexts=K(Ff),this.location=K(Hl),this.inputBindingEnabled=K(c1,{optional:!0})!==null,this.titleStrategy=K(cI),this.options=K(u1,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=K(h1),this.createViewTransition=K(iL,{optional:!0}),this.navigationErrorHandler=K(oL,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Ae(void 0),this.rootComponentType=null;let t=i=>this.events.next(new zm(i)),r=i=>this.events.next(new Wm(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(Le(ne(ne({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,i){return this.transitions=new bn({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Kl,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(mr(o=>o.id!==0),Be(o=>Le(ne({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),wr(o=>{let c=!1,h=!1;return Ae(o).pipe(wr(g=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",fr.SupersededByNewNavigation),sr;this.currentTransition=o,this.currentNavigation={id:g.id,initialUrl:g.rawUrl,extractedUrl:g.extractedUrl,targetBrowserUrl:typeof g.extras.browserUrl=="string"?this.urlSerializer.parse(g.extras.browserUrl):g.extras.browserUrl,trigger:g.source,extras:g.extras,previousNavigation:this.lastSuccessfulNavigation?Le(ne({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let m=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),v=g.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!m&&v!=="reload"){let x="";return this.events.next(new ls(g.id,this.urlSerializer.serialize(g.rawUrl),x,Bm.IgnoredSameUrlNavigation)),g.resolve(!1),sr}if(this.urlHandlingStrategy.shouldProcessUrl(g.rawUrl))return Ae(g).pipe(wr(x=>{let I=this.transitions?.getValue();return this.events.next(new rc(x.id,this.urlSerializer.serialize(x.extractedUrl),x.source,x.restoredState)),I!==this.transitions?.getValue()?sr:Promise.resolve(x)}),q8(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),nn(x=>{o.targetSnapshot=x.targetSnapshot,o.urlAfterRedirects=x.urlAfterRedirects,this.currentNavigation=Le(ne({},this.currentNavigation),{finalUrl:x.urlAfterRedirects});let I=new Mf(x.id,this.urlSerializer.serialize(x.extractedUrl),this.urlSerializer.serialize(x.urlAfterRedirects),x.targetSnapshot);this.events.next(I)}));if(m&&this.urlHandlingStrategy.shouldProcessUrl(g.currentRawUrl)){let{id:x,extractedUrl:I,source:A,restoredState:R,extras:j}=g,$=new rc(x,this.urlSerializer.serialize(I),A,R);this.events.next($);let W=KE(this.rootComponentType).snapshot;return this.currentTransition=o=Le(ne({},g),{targetSnapshot:W,urlAfterRedirects:I,extras:Le(ne({},j),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=I,Ae(o)}else{let x="";return this.events.next(new ls(g.id,this.urlSerializer.serialize(g.extractedUrl),x,Bm.IgnoredByUrlHandlingStrategy)),g.resolve(!1),sr}}),nn(g=>{let m=new Vm(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(m)}),Be(g=>(this.currentTransition=o=Le(ne({},g),{guards:h8(g.targetSnapshot,g.currentSnapshot,this.rootContexts)}),o)),E8(this.environmentInjector,g=>this.events.next(g)),nn(g=>{if(o.guardsResult=g.guardsResult,g.guardsResult&&typeof g.guardsResult!="boolean")throw kf(this.urlSerializer,g.guardsResult);let m=new Um(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot,!!g.guardsResult);this.events.next(m)}),mr(g=>g.guardsResult?!0:(this.cancelNavigationTransition(g,"",fr.GuardRejected),!1)),Om(g=>{if(g.guards.canActivateChecks.length)return Ae(g).pipe(nn(m=>{let v=new jm(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(v)}),wr(m=>{let v=!1;return Ae(m).pipe(Y8(this.paramsInheritanceStrategy,this.environmentInjector),nn({next:()=>v=!0,complete:()=>{v||this.cancelNavigationTransition(m,"",fr.NoDataFromResolver)}}))}),nn(m=>{let v=new Hm(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(v)}))}),Om(g=>{let m=v=>{let x=[];v.routeConfig?.loadComponent&&!v.routeConfig._loadedComponent&&x.push(this.configLoader.loadComponent(v.routeConfig).pipe(nn(I=>{v.component=I}),Be(()=>{})));for(let I of v.children)x.push(...m(I));return x};return Ju(m(g.targetSnapshot.root)).pipe(oo(null),Ei(1))}),Om(()=>this.afterPreactivation()),wr(()=>{let{currentSnapshot:g,targetSnapshot:m}=o,v=this.createViewTransition?.(this.environmentInjector,g.root,m.root);return v?vt(v).pipe(Be(()=>o)):Ae(o)}),Be(g=>{let m=l8(t.routeReuseStrategy,g.targetSnapshot,g.currentRouterState);return this.currentTransition=o=Le(ne({},g),{targetRouterState:m}),this.currentNavigation.targetRouterState=m,o}),nn(()=>{this.events.next(new oc)}),f8(this.rootContexts,t.routeReuseStrategy,g=>this.events.next(g),this.inputBindingEnabled),Ei(1),nn({next:g=>{c=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new as(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects))),this.titleStrategy?.updateTitle(g.targetRouterState.snapshot),g.resolve(!0)},complete:()=>{c=!0}}),Jp(this.transitionAbortSubject.pipe(nn(g=>{throw g}))),Hs(()=>{!c&&!h&&this.cancelNavigationTransition(o,"",fr.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),yr(g=>{if(h=!0,rI(g))this.events.next(new Ui(o.id,this.urlSerializer.serialize(o.extractedUrl),g.message,g.cancellationCode)),d8(g)?this.events.next(new Ca(g.url,g.navigationBehaviorOptions)):o.resolve(!1);else{let m=new ic(o.id,this.urlSerializer.serialize(o.extractedUrl),g,o.targetSnapshot??void 0);try{let v=ai(this.environmentInjector,()=>this.navigationErrorHandler?.(m));if(v instanceof ac){let{message:x,cancellationCode:I}=kf(this.urlSerializer,v);this.events.next(new Ui(o.id,this.urlSerializer.serialize(o.extractedUrl),x,I)),this.events.next(new Ca(v.redirectTo,v.navigationBehaviorOptions))}else{this.events.next(m);let x=t.errorHandler(g);o.resolve(!!x)}}catch(v){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(v)}}return sr}))}))}cancelNavigationTransition(t,r,i){let o=new Ui(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function aL(e){return e!==Kl}var lL=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=pe({token:e,factory:()=>K(cL),providedIn:"root"})}}return e})(),o1=class{shouldDetach(n){return!1}store(n,t){}shouldAttach(n){return!1}retrieve(n){return null}shouldReuseRoute(n,t){return n.routeConfig===t.routeConfig}},cL=(()=>{class e extends o1{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=go(e)))(i||e)}})()}static{this.\u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),dI=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=pe({token:e,factory:()=>K(uL),providedIn:"root"})}}return e})(),uL=(()=>{class e extends dI{constructor(){super(...arguments),this.location=K(Hl),this.urlSerializer=K(s1),this.options=K(u1,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=K(h1),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new ji,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=KE(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof rc)this.stateMemento=this.createStateMemento();else if(t instanceof ls)this.rawUrlTree=r.initialUrl;else if(t instanceof Mf){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else t instanceof oc?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof Ui&&(t.code===fr.GuardRejected||t.code===fr.NoDataFromResolver)?this.restoreHistory(r):t instanceof ic?this.restoreHistory(r,!0):t instanceof as&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let i=t instanceof ji?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let o=this.browserPageId,c=ne(ne({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(i,"",c)}else{let o=ne(ne({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",o)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.currentUrlTree===t.finalUrl&&o===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=go(e)))(i||e)}})()}static{this.\u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),Zl=function(e){return e[e.COMPLETE=0]="COMPLETE",e[e.FAILED=1]="FAILED",e[e.REDIRECTING=2]="REDIRECTING",e}(Zl||{});function dL(e,n){e.events.pipe(mr(t=>t instanceof as||t instanceof Ui||t instanceof ic||t instanceof ls),Be(t=>t instanceof as||t instanceof ls?Zl.COMPLETE:(t instanceof Ui?t.code===fr.Redirect||t.code===fr.SupersededByNewNavigation:!1)?Zl.REDIRECTING:Zl.FAILED),mr(t=>t!==Zl.REDIRECTING),Ei(1)).subscribe(()=>{n()})}function fL(e){throw e}var hL={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},pL={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},pi=(()=>{class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=K(hf),this.stateManager=K(dI),this.options=K(u1,{optional:!0})||{},this.pendingTasks=K(ts),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=K(sL),this.urlSerializer=K(s1),this.location=K(Hl),this.urlHandlingStrategy=K(h1),this._events=new xn,this.errorHandler=this.options.errorHandler||fL,this.navigated=!1,this.routeReuseStrategy=K(lL),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=K(f1,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!K(c1,{optional:!0}),this.eventsSubscription=new Vt,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Ui&&r.code!==fr.Redirect&&r.code!==fr.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof as)this.navigated=!0;else if(r instanceof Ca){let c=r.navigationBehaviorOptions,h=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),g=ne({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||aL(i.source)},c);this.scheduleNavigation(h,Kl,null,g,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}mL(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Kl,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},c=i?.navigationId?i:null;if(i){let g=ne({},i);delete g.navigationId,delete g.\u0275routerPageId,Object.keys(g).length!==0&&(o.state=g)}let h=this.parseUrl(t);this.scheduleNavigation(h,r,c,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(d1),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:c,queryParamsHandling:h,preserveFragment:g}=r,m=g?this.currentUrlTree.fragment:c,v=null;switch(h??this.options.defaultQueryParamsHandling){case"merge":v=ne(ne({},this.currentUrlTree.queryParams),o);break;case"preserve":v=this.currentUrlTree.queryParams;break;default:v=o||null}v!==null&&(v=this.removeEmptyProps(v));let x;try{let I=i?i.snapshot:this.routerState.snapshot.root;x=YE(I)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),x=this.currentUrlTree.root}return XE(x,t,v,m??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=tc(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Kl,null,r)}navigate(t,r={skipLocationChange:!1}){return gL(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=ne({},hL):r===!1?i=ne({},pL):i=r,tc(t))return NE(this.currentUrlTree,t,i);let o=this.parseUrl(t);return NE(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,c){if(this.disposed)return Promise.resolve(!1);let h,g,m;c?(h=c.resolve,g=c.reject,m=c.promise):m=new Promise((x,I)=>{h=x,g=I});let v=this.pendingTasks.add();return dL(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(v))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:h,reject:g,promise:m,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),m.catch(x=>Promise.reject(x))}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function gL(e){for(let n=0;n<e.length;n++)if(e[n]==null)throw new de(4008,!1)}function mL(e){return!(e instanceof oc)&&!(e instanceof Ca)}var yL=new ve("");function fI(e,...n){return oa([{provide:f1,multi:!0,useValue:e},[],{provide:hi,useFactory:wL,deps:[pi]},{provide:fa,multi:!0,useFactory:CL},n.map(t=>t.\u0275providers)])}function wL(e){return e.routerState.root}function CL(){let e=K(oi);return n=>{let t=e.get(di);if(n!==t.components[0])return;let r=e.get(pi),i=e.get(_L);e.get(vL)===1&&r.initialNavigation(),e.get(xL,null,je.Optional)?.setUpPreloading(),e.get(yL,null,je.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var _L=new ve("",{factory:()=>new xn}),vL=new ve("",{providedIn:"root",factory:()=>1});var xL=new ve("");var hI=(()=>{class e{constructor(){}title="Tablefi";static \u0275fac=function(r){return new(r||e)};static \u0275cmp=ie({type:e,selectors:[["app-root"]],standalone:!0,features:[oe],decls:2,vars:0,consts:[["rel","stylesheet","href",Bx`https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200&icon_names=arrow_back`]],template:function(r,i){r&1&&le(0,"link",0)(1,"router-outlet")},dependencies:[l1,zl],styles:['@font-face{font-family:Lexend;font-style:normal;font-weight:100 900;font-display:swap;src:url(https://fonts.gstatic.com/s/lexend/v23/wlpwgwvFAVdoq2_v9KQU4Wc.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Lexend;font-style:normal;font-weight:100 900;font-display:swap;src:url(https://fonts.gstatic.com/s/lexend/v23/wlpwgwvFAVdoq2_v9aQU4Wc.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Lexend;font-style:normal;font-weight:100 900;font-display:swap;src:url(https://fonts.gstatic.com/s/lexend/v23/wlpwgwvFAVdoq2_v-6QU.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}router-outlet[_ngcontent-%COMP%]{font-family:Lexend,sans-serif;font-optical-sizing:auto;height:100%;width:100%}']})}return e})();var bI=(()=>{class e{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(r){return new(r||e)(Z($r),Z(ur))}}static{this.\u0275dir=rn({type:e})}}return e})(),g1=(()=>{class e extends bI{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=go(e)))(i||e)}})()}static{this.\u0275dir=rn({type:e,features:[qr]})}}return e})(),qf=new ve("");var bL={provide:qf,useExisting:Mi(()=>Zt),multi:!0};function EL(){let e=Vi()?Vi().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}var IL=new ve(""),Zt=(()=>{class e extends bI{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!EL())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(r){return new(r||e)(Z($r),Z(ur),Z(IL,8))}}static{this.\u0275dir=rn({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&Y("input",function(c){return i._handleInput(c.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(c){return i._compositionEnd(c.target.value)})},features:[ns([bL]),qr]})}}return e})();function SL(e){return e==null||(typeof e=="string"||Array.isArray(e))&&e.length===0}var m1=new ve(""),EI=new ve("");function DL(e){return SL(e.value)?{required:!0}:null}function pI(e){return null}function II(e){return e!=null}function SI(e){return rs(e)?vt(e):e}function DI(e){let n={};return e.forEach(t=>{n=t!=null?ne(ne({},n),t):n}),Object.keys(n).length===0?null:n}function AI(e,n){return n.map(t=>t(e))}function AL(e){return!e.validate}function TI(e){return e.map(n=>AL(n)?n:t=>n.validate(t))}function TL(e){if(!e)return null;let n=e.filter(II);return n.length==0?null:function(t){return DI(AI(t,n))}}function y1(e){return e!=null?TL(TI(e)):null}function ML(e){if(!e)return null;let n=e.filter(II);return n.length==0?null:function(t){let r=AI(t,n).map(SI);return qp(r).pipe(Be(DI))}}function w1(e){return e!=null?ML(TI(e)):null}function gI(e,n){return e===null?[n]:Array.isArray(e)?[...e,n]:[e,n]}function NL(e){return e._rawValidators}function OL(e){return e._rawAsyncValidators}function p1(e){return e?Array.isArray(e)?e:[e]:[]}function jf(e,n){return Array.isArray(e)?e.includes(n):e===n}function mI(e,n){let t=p1(n);return p1(e).forEach(i=>{jf(t,i)||t.push(i)}),t}function yI(e,n){return p1(n).filter(t=>!jf(e,t))}var Hf=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(n){this._rawValidators=n||[],this._composedValidatorFn=y1(this._rawValidators)}_setAsyncValidators(n){this._rawAsyncValidators=n||[],this._composedAsyncValidatorFn=w1(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(n){this._onDestroyCallbacks.push(n)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(n=>n()),this._onDestroyCallbacks=[]}reset(n=void 0){this.control&&this.control.reset(n)}hasError(n,t){return this.control?this.control.hasError(n,t):!1}getError(n,t){return this.control?this.control.getError(n,t):null}},Ea=class extends Hf{get formDirective(){return null}get path(){return null}},wc=class extends Hf{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},zf=class{constructor(n){this._cd=n}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},RL={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Z$=Le(ne({},RL),{"[class.ng-submitted]":"isSubmitted"}),mn=(()=>{class e extends zf{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||e)(Z(wc,2))}}static{this.\u0275dir=rn({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Yr("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[qr]})}}return e})(),Jn=(()=>{class e extends zf{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||e)(Z(Ea,10))}}static{this.\u0275dir=rn({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&Yr("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[qr]})}}return e})();var hc="VALID",Uf="INVALID",xa="PENDING",pc="DISABLED",Ia=class{},Wf=class extends Ia{constructor(n,t){super(),this.value=n,this.source=t}},mc=class extends Ia{constructor(n,t){super(),this.pristine=n,this.source=t}},yc=class extends Ia{constructor(n,t){super(),this.touched=n,this.source=t}},ba=class extends Ia{constructor(n,t){super(),this.status=n,this.source=t}};function MI(e){return(Yf(e)?e.validators:e)||null}function PL(e){return Array.isArray(e)?y1(e):e||null}function NI(e,n){return(Yf(n)?n.asyncValidators:e)||null}function kL(e){return Array.isArray(e)?w1(e):e||null}function Yf(e){return e!=null&&!Array.isArray(e)&&typeof e=="object"}function LL(e,n,t){let r=e.controls;if(!(n?Object.keys(r):r).length)throw new de(1e3,"");if(!r[t])throw new de(1001,"")}function FL(e,n,t){e._forEachChild((r,i)=>{if(t[i]===void 0)throw new de(1002,"")})}var Gf=class{constructor(n,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=jl(()=>this.statusReactive()),this.statusReactive=Ll(void 0),this._pristine=jl(()=>this.pristineReactive()),this.pristineReactive=Ll(!0),this._touched=jl(()=>this.touchedReactive()),this.touchedReactive=Ll(!1),this._events=new xn,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(n),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(n){this._rawValidators=this._composedValidatorFn=n}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(n){this._rawAsyncValidators=this._composedAsyncValidatorFn=n}get parent(){return this._parent}get status(){return Bi(this.statusReactive)}set status(n){Bi(()=>this.statusReactive.set(n))}get valid(){return this.status===hc}get invalid(){return this.status===Uf}get pending(){return this.status==xa}get disabled(){return this.status===pc}get enabled(){return this.status!==pc}get pristine(){return Bi(this.pristineReactive)}set pristine(n){Bi(()=>this.pristineReactive.set(n))}get dirty(){return!this.pristine}get touched(){return Bi(this.touchedReactive)}set touched(n){Bi(()=>this.touchedReactive.set(n))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(n){this._assignValidators(n)}setAsyncValidators(n){this._assignAsyncValidators(n)}addValidators(n){this.setValidators(mI(n,this._rawValidators))}addAsyncValidators(n){this.setAsyncValidators(mI(n,this._rawAsyncValidators))}removeValidators(n){this.setValidators(yI(n,this._rawValidators))}removeAsyncValidators(n){this.setAsyncValidators(yI(n,this._rawAsyncValidators))}hasValidator(n){return jf(this._rawValidators,n)}hasAsyncValidator(n){return jf(this._rawAsyncValidators,n)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(n={}){let t=this.touched===!1;this.touched=!0;let r=n.sourceControl??this;this._parent&&!n.onlySelf&&this._parent.markAsTouched(Le(ne({},n),{sourceControl:r})),t&&n.emitEvent!==!1&&this._events.next(new yc(!0,r))}markAllAsTouched(n={}){this.markAsTouched({onlySelf:!0,emitEvent:n.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(n))}markAsUntouched(n={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=n.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:n.emitEvent,sourceControl:r})}),this._parent&&!n.onlySelf&&this._parent._updateTouched(n,r),t&&n.emitEvent!==!1&&this._events.next(new yc(!1,r))}markAsDirty(n={}){let t=this.pristine===!0;this.pristine=!1;let r=n.sourceControl??this;this._parent&&!n.onlySelf&&this._parent.markAsDirty(Le(ne({},n),{sourceControl:r})),t&&n.emitEvent!==!1&&this._events.next(new mc(!1,r))}markAsPristine(n={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=n.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:n.emitEvent})}),this._parent&&!n.onlySelf&&this._parent._updatePristine(n,r),t&&n.emitEvent!==!1&&this._events.next(new mc(!0,r))}markAsPending(n={}){this.status=xa;let t=n.sourceControl??this;n.emitEvent!==!1&&(this._events.next(new ba(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!n.onlySelf&&this._parent.markAsPending(Le(ne({},n),{sourceControl:t}))}disable(n={}){let t=this._parentMarkedDirty(n.onlySelf);this.status=pc,this.errors=null,this._forEachChild(i=>{i.disable(Le(ne({},n),{onlySelf:!0}))}),this._updateValue();let r=n.sourceControl??this;n.emitEvent!==!1&&(this._events.next(new Wf(this.value,r)),this._events.next(new ba(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Le(ne({},n),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(n={}){let t=this._parentMarkedDirty(n.onlySelf);this.status=hc,this._forEachChild(r=>{r.enable(Le(ne({},n),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent}),this._updateAncestors(Le(ne({},n),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(n,t){this._parent&&!n.onlySelf&&(this._parent.updateValueAndValidity(n),n.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(n){this._parent=n}getRawValue(){return this.value}updateValueAndValidity(n={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===hc||this.status===xa)&&this._runAsyncValidator(r,n.emitEvent)}let t=n.sourceControl??this;n.emitEvent!==!1&&(this._events.next(new Wf(this.value,t)),this._events.next(new ba(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!n.onlySelf&&this._parent.updateValueAndValidity(Le(ne({},n),{sourceControl:t}))}_updateTreeValidity(n={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(n)),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?pc:hc}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(n,t){if(this.asyncValidator){this.status=xa,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let r=SI(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:n})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let n=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,n}return!1}setErrors(n,t={}){this.errors=n,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(n){let t=n;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(n,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[n]:null}hasError(n,t){return!!this.getError(n,t)}get root(){let n=this;for(;n._parent;)n=n._parent;return n}_updateControlsErrors(n,t,r){this.status=this._calculateStatus(),n&&this.statusChanges.emit(this.status),(n||r)&&this._events.next(new ba(this.status,t)),this._parent&&this._parent._updateControlsErrors(n,t,r)}_initObservables(){this.valueChanges=new Ot,this.statusChanges=new Ot}_calculateStatus(){return this._allControlsDisabled()?pc:this.errors?Uf:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(xa)?xa:this._anyControlsHaveStatus(Uf)?Uf:hc}_anyControlsHaveStatus(n){return this._anyControls(t=>t.status===n)}_anyControlsDirty(){return this._anyControls(n=>n.dirty)}_anyControlsTouched(){return this._anyControls(n=>n.touched)}_updatePristine(n,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!n.onlySelf&&this._parent._updatePristine(n,t),i&&this._events.next(new mc(this.pristine,t))}_updateTouched(n={},t){this.touched=this._anyControlsTouched(),this._events.next(new yc(this.touched,t)),this._parent&&!n.onlySelf&&this._parent._updateTouched(n,t)}_registerOnCollectionChange(n){this._onCollectionChange=n}_setUpdateStrategy(n){Yf(n)&&n.updateOn!=null&&(this._updateOn=n.updateOn)}_parentMarkedDirty(n){let t=this._parent&&this._parent.dirty;return!n&&!!t&&!this._parent._anyControlsDirty()}_find(n){return null}_assignValidators(n){this._rawValidators=Array.isArray(n)?n.slice():n,this._composedValidatorFn=PL(this._rawValidators)}_assignAsyncValidators(n){this._rawAsyncValidators=Array.isArray(n)?n.slice():n,this._composedAsyncValidatorFn=kL(this._rawAsyncValidators)}},$f=class extends Gf{constructor(n,t,r){super(MI(t),NI(r,t)),this.controls=n,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(n,t){return this.controls[n]?this.controls[n]:(this.controls[n]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(n,t,r={}){this.registerControl(n,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(n,t={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(n,t,r={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],t&&this.registerControl(n,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(n){return this.controls.hasOwnProperty(n)&&this.controls[n].enabled}setValue(n,t={}){FL(this,!0,n),Object.keys(n).forEach(r=>{LL(this,!0,r),this.controls[r].setValue(n[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(n,t={}){n!=null&&(Object.keys(n).forEach(r=>{let i=this.controls[r];i&&i.patchValue(n[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(n={},t={}){this._forEachChild((r,i)=>{r.reset(n?n[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(n,t,r)=>(n[r]=t.getRawValue(),n))}_syncPendingControls(){let n=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return n&&this.updateValueAndValidity({onlySelf:!0}),n}_forEachChild(n){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&n(r,t)})}_setUpControls(){this._forEachChild(n=>{n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(n){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&n(r))return!0;return!1}_reduceValue(){let n={};return this._reduceChildren(n,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(n,t){let r=n;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let n of Object.keys(this.controls))if(this.controls[n].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(n){return this.controls.hasOwnProperty(n)?this.controls[n]:null}};var C1=new ve("CallSetDisabledState",{providedIn:"root",factory:()=>_1}),_1="always";function BL(e,n){return[...n.path,e]}function OI(e,n,t=_1){RI(e,n),n.valueAccessor.writeValue(e.value),(e.disabled||t==="always")&&n.valueAccessor.setDisabledState?.(e.disabled),UL(e,n),HL(e,n),jL(e,n),VL(e,n)}function wI(e,n){e.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(n)})}function VL(e,n){if(n.valueAccessor.setDisabledState){let t=r=>{n.valueAccessor.setDisabledState(r)};e.registerOnDisabledChange(t),n._registerOnDestroy(()=>{e._unregisterOnDisabledChange(t)})}}function RI(e,n){let t=NL(e);n.validator!==null?e.setValidators(gI(t,n.validator)):typeof t=="function"&&e.setValidators([t]);let r=OL(e);n.asyncValidator!==null?e.setAsyncValidators(gI(r,n.asyncValidator)):typeof r=="function"&&e.setAsyncValidators([r]);let i=()=>e.updateValueAndValidity();wI(n._rawValidators,i),wI(n._rawAsyncValidators,i)}function UL(e,n){n.valueAccessor.registerOnChange(t=>{e._pendingValue=t,e._pendingChange=!0,e._pendingDirty=!0,e.updateOn==="change"&&PI(e,n)})}function jL(e,n){n.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,e.updateOn==="blur"&&e._pendingChange&&PI(e,n),e.updateOn!=="submit"&&e.markAsTouched()})}function PI(e,n){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),n.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function HL(e,n){let t=(r,i)=>{n.valueAccessor.writeValue(r),i&&n.viewToModelUpdate(r)};e.registerOnChange(t),n._registerOnDestroy(()=>{e._unregisterOnChange(t)})}function zL(e,n){e==null,RI(e,n)}function WL(e,n){if(!e.hasOwnProperty("model"))return!1;let t=e.model;return t.isFirstChange()?!0:!Object.is(n,t.currentValue)}function GL(e){return Object.getPrototypeOf(e.constructor)===g1}function $L(e,n){e._syncPendingControls(),n.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function qL(e,n){if(!n)return null;Array.isArray(n);let t,r,i;return n.forEach(o=>{o.constructor===Zt?t=o:GL(o)?r=o:i=o}),i||r||t||null}var YL={provide:Ea,useExisting:Mi(()=>jn)},gc=Promise.resolve(),jn=(()=>{class e extends Ea{get submitted(){return Bi(this.submittedReactive)}constructor(t,r,i){super(),this.callSetDisabledState=i,this._submitted=jl(()=>this.submittedReactive()),this.submittedReactive=Ll(!1),this._directives=new Set,this.ngSubmit=new Ot,this.form=new $f({},y1(t),w1(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){gc.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),OI(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){gc.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){gc.then(()=>{let r=this._findContainer(t.path),i=new $f({});zL(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){gc.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){gc.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),$L(this.form,this._directives),this.ngSubmit.emit(t),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static{this.\u0275fac=function(r){return new(r||e)(Z(m1,10),Z(EI,10),Z(C1,8))}}static{this.\u0275dir=rn({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&Y("submit",function(c){return i.onSubmit(c)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[ns([YL]),qr]})}}return e})();function CI(e,n){let t=e.indexOf(n);t>-1&&e.splice(t,1)}function _I(e){return typeof e=="object"&&e!==null&&Object.keys(e).length===2&&"value"in e&&"disabled"in e}var XL=class extends Gf{constructor(n=null,t,r){super(MI(t),NI(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(n),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Yf(t)&&(t.nonNullable||t.initialValueIsDefault)&&(_I(n)?this.defaultValue=n.value:this.defaultValue=n)}setValue(n,t={}){this.value=this._pendingValue=n,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(n,t={}){this.setValue(n,t)}reset(n=this.defaultValue,t={}){this._applyFormState(n),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(n){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(n){this._onChange.push(n)}_unregisterOnChange(n){CI(this._onChange,n)}registerOnDisabledChange(n){this._onDisabledChange.push(n)}_unregisterOnDisabledChange(n){CI(this._onDisabledChange,n)}_forEachChild(n){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(n){_I(n)?(this.value=this._pendingValue=n.value,n.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=n}};var ZL={provide:wc,useExisting:Mi(()=>sn)},vI=Promise.resolve(),sn=(()=>{class e extends wc{constructor(t,r,i,o,c,h){super(),this._changeDetectorRef=c,this.callSetDisabledState=h,this.control=new XL,this._registered=!1,this.name="",this.update=new Ot,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=qL(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),WL(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){OI(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){vI.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&Ul(r);vI.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?BL(t,this._parent):[t]}static{this.\u0275fac=function(r){return new(r||e)(Z(Ea,9),Z(m1,10),Z(EI,10),Z(qf,10),Z(Fi,8),Z(C1,8))}}static{this.\u0275dir=rn({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[ns([ZL]),qr,Ri]})}}return e})(),er=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275dir=rn({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return e})();var QL={provide:qf,useExisting:Mi(()=>Sa),multi:!0};function kI(e,n){return e==null?`${n}`:(n&&typeof n=="object"&&(n="Object"),`${e}: ${n}`.slice(0,50))}function KL(e){return e.split(":")[0]}var Sa=(()=>{class e extends g1{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let r=this._getOptionId(t),i=kI(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=KL(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=go(e)))(i||e)}})()}static{this.\u0275dir=rn({type:e,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&Y("change",function(c){return i.onChange(c.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[ns([QL]),qr]})}}return e})(),Xf=(()=>{class e{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(kI(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||e)(Z(ur),Z($r),Z(Sa,9))}}static{this.\u0275dir=rn({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return e})(),JL={provide:qf,useExisting:Mi(()=>LI),multi:!0};function xI(e,n){return e==null?`${n}`:(typeof n=="string"&&(n=`'${n}'`),n&&typeof n=="object"&&(n="Object"),`${e}: ${n}`.slice(0,50))}function eF(e){return e.split(":")[0]}var LI=(()=>{class e extends g1{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(o=>this._getOptionId(o));r=(o,c)=>{o._setSelected(i.indexOf(c.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let c=o;for(let h=0;h<c.length;h++){let g=c[h],m=this._getOptionValue(g.value);i.push(m)}}else{let c=r.options;for(let h=0;h<c.length;h++){let g=c[h];if(g.selected){let m=this._getOptionValue(g.value);i.push(m)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=eF(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=go(e)))(i||e)}})()}static{this.\u0275dir=rn({type:e,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&Y("change",function(c){return i.onChange(c.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[ns([JL]),qr]})}}return e})(),Zf=(()=>{class e{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(xI(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(xI(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||e)(Z(ur),Z($r),Z(LI,9))}}static{this.\u0275dir=rn({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return e})();var tF=(()=>{class e{constructor(){this._validator=pI}ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):pI,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275dir=rn({type:e,features:[Ri]})}}return e})();var nF={provide:m1,useExisting:Mi(()=>Tn),multi:!0};var Tn=(()=>{class e extends tF{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=Ul,this.createValidator=t=>DL}enabled(t){return t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=go(e)))(i||e)}})()}static{this.\u0275dir=rn({type:e,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&cf("required",i._enabled?"":null)},inputs:{required:"required"},features:[ns([nF]),qr]})}}return e})();var rF=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=Oi({type:e})}static{this.\u0275inj=Ni({})}}return e})();var jt=(()=>{class e{static withConfig(t){return{ngModule:e,providers:[{provide:C1,useValue:t.callSetDisabledState??_1}]}}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=Oi({type:e})}static{this.\u0275inj=Ni({imports:[rF]})}}return e})();var v1={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};var Q=function(e,n){if(!e)throw us(n)},us=function(e){return new Error("Firebase Database ("+v1.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)};var BI=function(e){let n=[],t=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?n[t++]=i:i<2048?(n[t++]=i>>6|192,n[t++]=i&63|128):(i&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),n[t++]=i>>18|240,n[t++]=i>>12&63|128,n[t++]=i>>6&63|128,n[t++]=i&63|128):(n[t++]=i>>12|224,n[t++]=i>>6&63|128,n[t++]=i&63|128)}return n},iF=function(e){let n=[],t=0,r=0;for(;t<e.length;){let i=e[t++];if(i<128)n[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=e[t++];n[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=e[t++],c=e[t++],h=e[t++],g=((i&7)<<18|(o&63)<<12|(c&63)<<6|h&63)-65536;n[r++]=String.fromCharCode(55296+(g>>10)),n[r++]=String.fromCharCode(56320+(g&1023))}else{let o=e[t++],c=e[t++];n[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|c&63)}}return n.join("")},Kf={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,n){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=n?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){let o=e[i],c=i+1<e.length,h=c?e[i+1]:0,g=i+2<e.length,m=g?e[i+2]:0,v=o>>2,x=(o&3)<<4|h>>4,I=(h&15)<<2|m>>6,A=m&63;g||(A=64,c||(I=64)),r.push(t[v],t[x],t[I],t[A])}return r.join("")},encodeString(e,n){return this.HAS_NATIVE_SUPPORT&&!n?btoa(e):this.encodeByteArray(BI(e),n)},decodeString(e,n){return this.HAS_NATIVE_SUPPORT&&!n?atob(e):iF(this.decodeStringToByteArray(e,n))},decodeStringToByteArray(e,n){this.init_();let t=n?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){let o=t[e.charAt(i++)],h=i<e.length?t[e.charAt(i)]:0;++i;let m=i<e.length?t[e.charAt(i)]:64;++i;let x=i<e.length?t[e.charAt(i)]:64;if(++i,o==null||h==null||m==null||x==null)throw new x1;let I=o<<2|h>>4;if(r.push(I),m!==64){let A=h<<4&240|m>>2;if(r.push(A),x!==64){let R=m<<6&192|x;r.push(R)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},x1=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},E1=function(e){let n=BI(e);return Kf.encodeByteArray(n,!0)},Cc=function(e){return E1(e).replace(/\./g,"")},b1=function(e){try{return Kf.decodeString(e,!0)}catch(n){console.error("base64Decode failed: ",n)}return null};function VI(e){return UI(void 0,e)}function UI(e,n){if(!(n instanceof Object))return n;switch(n.constructor){case Date:let t=n;return new Date(t.getTime());case Object:e===void 0&&(e={});break;case Array:e=[];break;default:return n}for(let t in n)!n.hasOwnProperty(t)||!oF(t)||(e[t]=UI(e[t],n[t]));return e}function oF(e){return e!=="__proto__"}function sF(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var aF=()=>sF().__FIREBASE_DEFAULTS__,lF=()=>{if(typeof process>"u"||typeof process.env>"u")return;let e=process.env.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},cF=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let n=e&&b1(e[1]);return n&&JSON.parse(n)},jI=()=>{try{return aF()||lF()||cF()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},uF=e=>{var n,t;return(t=(n=jI())===null||n===void 0?void 0:n.emulatorHosts)===null||t===void 0?void 0:t[e]},HI=e=>{let n=uF(e);if(!n)return;let t=n.lastIndexOf(":");if(t<=0||t+1===n.length)throw new Error(`Invalid host ${n} with no separate hostname and port!`);let r=parseInt(n.substring(t+1),10);return n[0]==="["?[n.substring(1,t-1),r]:[n.substring(0,t),r]},I1=()=>{var e;return(e=jI())===null||e===void 0?void 0:e.config};var zi=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((n,t)=>{this.resolve=n,this.reject=t})}wrapCallback(n){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof n=="function"&&(this.promise.catch(()=>{}),n.length===1?n(t):n(t,r))}}};function zI(e,n){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=n||"demo-project",i=e.iat||0,o=e.sub||e.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let c=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Cc(JSON.stringify(t)),Cc(JSON.stringify(c)),""].join(".")}function dF(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function S1(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(dF())}function WI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function gi(){return v1.NODE_CLIENT===!0||v1.NODE_ADMIN===!0}function GI(){try{return typeof indexedDB=="object"}catch{return!1}}function $I(){return new Promise((e,n)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;n(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){n(t)}})}var fF="FirebaseError",cs=class e extends Error{constructor(n,t,r){super(t),this.code=n,this.customData=r,this.name=fF,Object.setPrototypeOf(this,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,_c.prototype.create)}},_c=class{constructor(n,t,r){this.service=n,this.serviceName=t,this.errors=r}create(n,...t){let r=t[0]||{},i=`${this.service}/${n}`,o=this.errors[n],c=o?hF(o,r):"Error",h=`${this.serviceName}: ${c} (${i}).`;return new cs(i,h,r)}};function hF(e,n){return e.replace(pF,(t,r)=>{let i=n[r];return i!=null?String(i):`<${r}?>`})}var pF=/\{\$([^}]+)}/g;function Da(e){return JSON.parse(e)}function Qt(e){return JSON.stringify(e)}var qI=function(e){let n={},t={},r={},i="";try{let o=e.split(".");n=Da(b1(o[0])||""),t=Da(b1(o[1])||""),i=o[2],r=t.d||{},delete t.d}catch{}return{header:n,claims:t,data:r,signature:i}};var YI=function(e){let n=qI(e),t=n.claims;return!!t&&typeof t=="object"&&t.hasOwnProperty("iat")},XI=function(e){let n=qI(e).claims;return typeof n=="object"&&n.admin===!0};function Zr(e,n){return Object.prototype.hasOwnProperty.call(e,n)}function ds(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]}function D1(e){for(let n in e)if(Object.prototype.hasOwnProperty.call(e,n))return!1;return!0}function vc(e,n,t){let r={};for(let i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=n.call(t,e[i],i,e));return r}function Jf(e,n){if(e===n)return!0;let t=Object.keys(e),r=Object.keys(n);for(let i of t){if(!r.includes(i))return!1;let o=e[i],c=n[i];if(FI(o)&&FI(c)){if(!Jf(o,c))return!1}else if(o!==c)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function FI(e){return e!==null&&typeof e=="object"}function ZI(e){let n=[];for(let[t,r]of Object.entries(e))Array.isArray(r)?r.forEach(i=>{n.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):n.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return n.length?"&"+n.join("&"):""}var Qf=class{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let n=1;n<this.blockSize;++n)this.pad_[n]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(n,t){t||(t=0);let r=this.W_;if(typeof n=="string")for(let x=0;x<16;x++)r[x]=n.charCodeAt(t)<<24|n.charCodeAt(t+1)<<16|n.charCodeAt(t+2)<<8|n.charCodeAt(t+3),t+=4;else for(let x=0;x<16;x++)r[x]=n[t]<<24|n[t+1]<<16|n[t+2]<<8|n[t+3],t+=4;for(let x=16;x<80;x++){let I=r[x-3]^r[x-8]^r[x-14]^r[x-16];r[x]=(I<<1|I>>>31)&4294967295}let i=this.chain_[0],o=this.chain_[1],c=this.chain_[2],h=this.chain_[3],g=this.chain_[4],m,v;for(let x=0;x<80;x++){x<40?x<20?(m=h^o&(c^h),v=1518500249):(m=o^c^h,v=1859775393):x<60?(m=o&c|h&(o|c),v=2400959708):(m=o^c^h,v=3395469782);let I=(i<<5|i>>>27)+m+g+v+r[x]&4294967295;g=h,h=c,c=(o<<30|o>>>2)&4294967295,o=i,i=I}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+g&4294967295}update(n,t){if(n==null)return;t===void 0&&(t=n.length);let r=t-this.blockSize,i=0,o=this.buf_,c=this.inbuf_;for(;i<t;){if(c===0)for(;i<=r;)this.compress_(n,i),i+=this.blockSize;if(typeof n=="string"){for(;i<t;)if(o[c]=n.charCodeAt(i),++c,++i,c===this.blockSize){this.compress_(o),c=0;break}}else for(;i<t;)if(o[c]=n[i],++c,++i,c===this.blockSize){this.compress_(o),c=0;break}}this.inbuf_=c,this.total_+=t}digest(){let n=[],t=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=t&255,t/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let o=24;o>=0;o-=8)n[r]=this.chain_[i]>>o&255,++r;return n}};function xc(e,n){return`${e} failed: ${n} argument `}var QI=function(e){let n=[],t=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);if(i>=55296&&i<=56319){let o=i-55296;r++,Q(r<e.length,"Surrogate pair missing trail surrogate.");let c=e.charCodeAt(r)-56320;i=65536+(o<<10)+c}i<128?n[t++]=i:i<2048?(n[t++]=i>>6|192,n[t++]=i&63|128):i<65536?(n[t++]=i>>12|224,n[t++]=i>>6&63|128,n[t++]=i&63|128):(n[t++]=i>>18|240,n[t++]=i>>12&63|128,n[t++]=i>>6&63|128,n[t++]=i&63|128)}return n},bc=function(e){let n=0;for(let t=0;t<e.length;t++){let r=e.charCodeAt(t);r<128?n++:r<2048?n+=2:r>=55296&&r<=56319?(n+=4,t++):n+=3}return n};var J$=4*60*60*1e3;function wo(e){return e&&e._delegate?e._delegate:e}var Wi=class{constructor(n,t,r){this.name=n,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(n){return this.instantiationMode=n,this}setMultipleInstances(n){return this.multipleInstances=n,this}setServiceProps(n){return this.serviceProps=n,this}setInstanceCreatedCallback(n){return this.onInstanceCreated=n,this}};var fs="[DEFAULT]";var eh=class{constructor(n,t){this.name=n,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(n){let t=this.normalizeInstanceIdentifier(n);if(!this.instancesDeferred.has(t)){let r=new zi;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(n){var t;let r=this.normalizeInstanceIdentifier(n?.identifier),i=(t=n?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(n){if(n.name!==this.name)throw Error(`Mismatching Component ${n.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=n,!!this.shouldAutoInitialize()){if(mF(n))try{this.getOrInitializeService({instanceIdentifier:fs})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(n=fs){this.instancesDeferred.delete(n),this.instancesOptions.delete(n),this.instances.delete(n)}delete(){return qt(this,null,function*(){let n=Array.from(this.instances.values());yield Promise.all([...n.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...n.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(n=fs){return this.instances.has(n)}getOptions(n=fs){return this.instancesOptions.get(n)||{}}initialize(n={}){let{options:t={}}=n,r=this.normalizeInstanceIdentifier(n.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,c]of this.instancesDeferred.entries()){let h=this.normalizeInstanceIdentifier(o);r===h&&c.resolve(i)}return i}onInit(n,t){var r;let i=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(n),this.onInitCallbacks.set(i,o);let c=this.instances.get(i);return c&&n(c,i),()=>{o.delete(n)}}invokeOnInitCallbacks(n,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(n,t)}catch{}}getOrInitializeService({instanceIdentifier:n,options:t={}}){let r=this.instances.get(n);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:gF(n),options:t}),this.instances.set(n,r),this.instancesOptions.set(n,t),this.invokeOnInitCallbacks(r,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,r)}catch{}return r||null}normalizeInstanceIdentifier(n=fs){return this.component?this.component.multipleInstances?n:fs:n}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function gF(e){return e===fs?void 0:e}function mF(e){return e.instantiationMode==="EAGER"}var Ec=class{constructor(n){this.name=n,this.providers=new Map}addComponent(n){let t=this.getProvider(n.name);if(t.isComponentSet())throw new Error(`Component ${n.name} has already been registered with ${this.name}`);t.setComponent(n)}addOrOverwriteComponent(n){this.getProvider(n.name).isComponentSet()&&this.providers.delete(n.name),this.addComponent(n)}getProvider(n){if(this.providers.has(n))return this.providers.get(n);let t=new eh(n,this);return this.providers.set(n,t),t}getProviders(){return Array.from(this.providers.values())}};var yF=[],St=function(e){return e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT",e}(St||{}),wF={debug:St.DEBUG,verbose:St.VERBOSE,info:St.INFO,warn:St.WARN,error:St.ERROR,silent:St.SILENT},CF=St.INFO,_F={[St.DEBUG]:"log",[St.VERBOSE]:"log",[St.INFO]:"info",[St.WARN]:"warn",[St.ERROR]:"error"},vF=(e,n,...t)=>{if(n<e.logLevel)return;let r=new Date().toISOString(),i=_F[n];if(i)console[i](`[${r}]  ${e.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${n})`)},Aa=class{constructor(n){this.name=n,this._logLevel=CF,this._logHandler=vF,this._userLogHandler=null,yF.push(this)}get logLevel(){return this._logLevel}set logLevel(n){if(!(n in St))throw new TypeError(`Invalid value "${n}" assigned to \`logLevel\``);this._logLevel=n}setLogLevel(n){this._logLevel=typeof n=="string"?wF[n]:n}get logHandler(){return this._logHandler}set logHandler(n){if(typeof n!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=n}get userLogHandler(){return this._userLogHandler}set userLogHandler(n){this._userLogHandler=n}debug(...n){this._userLogHandler&&this._userLogHandler(this,St.DEBUG,...n),this._logHandler(this,St.DEBUG,...n)}log(...n){this._userLogHandler&&this._userLogHandler(this,St.VERBOSE,...n),this._logHandler(this,St.VERBOSE,...n)}info(...n){this._userLogHandler&&this._userLogHandler(this,St.INFO,...n),this._logHandler(this,St.INFO,...n)}warn(...n){this._userLogHandler&&this._userLogHandler(this,St.WARN,...n),this._logHandler(this,St.WARN,...n)}error(...n){this._userLogHandler&&this._userLogHandler(this,St.ERROR,...n),this._logHandler(this,St.ERROR,...n)}};var xF=(e,n)=>n.some(t=>e instanceof t),KI,JI;function bF(){return KI||(KI=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function EF(){return JI||(JI=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var eS=new WeakMap,T1=new WeakMap,tS=new WeakMap,A1=new WeakMap,N1=new WeakMap;function IF(e){let n=new Promise((t,r)=>{let i=()=>{e.removeEventListener("success",o),e.removeEventListener("error",c)},o=()=>{t(mi(e.result)),i()},c=()=>{r(e.error),i()};e.addEventListener("success",o),e.addEventListener("error",c)});return n.then(t=>{t instanceof IDBCursor&&eS.set(t,e)}).catch(()=>{}),N1.set(n,e),n}function SF(e){if(T1.has(e))return;let n=new Promise((t,r)=>{let i=()=>{e.removeEventListener("complete",o),e.removeEventListener("error",c),e.removeEventListener("abort",c)},o=()=>{t(),i()},c=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",o),e.addEventListener("error",c),e.addEventListener("abort",c)});T1.set(e,n)}var M1={get(e,n,t){if(e instanceof IDBTransaction){if(n==="done")return T1.get(e);if(n==="objectStoreNames")return e.objectStoreNames||tS.get(e);if(n==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return mi(e[n])},set(e,n,t){return e[n]=t,!0},has(e,n){return e instanceof IDBTransaction&&(n==="done"||n==="store")?!0:n in e}};function nS(e){M1=e(M1)}function DF(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(n,...t){let r=e.call(th(this),n,...t);return tS.set(r,n.sort?n.sort():[n]),mi(r)}:EF().includes(e)?function(...n){return e.apply(th(this),n),mi(eS.get(this))}:function(...n){return mi(e.apply(th(this),n))}}function AF(e){return typeof e=="function"?DF(e):(e instanceof IDBTransaction&&SF(e),xF(e,bF())?new Proxy(e,M1):e)}function mi(e){if(e instanceof IDBRequest)return IF(e);if(A1.has(e))return A1.get(e);let n=AF(e);return n!==e&&(A1.set(e,n),N1.set(n,e)),n}var th=e=>N1.get(e);function iS(e,n,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let c=indexedDB.open(e,n),h=mi(c);return r&&c.addEventListener("upgradeneeded",g=>{r(mi(c.result),g.oldVersion,g.newVersion,mi(c.transaction),g)}),t&&c.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),h.then(g=>{o&&g.addEventListener("close",()=>o()),i&&g.addEventListener("versionchange",m=>i(m.oldVersion,m.newVersion,m))}).catch(()=>{}),h}var TF=["get","getKey","getAll","getAllKeys","count"],MF=["put","add","delete","clear"],O1=new Map;function rS(e,n){if(!(e instanceof IDBDatabase&&!(n in e)&&typeof n=="string"))return;if(O1.get(n))return O1.get(n);let t=n.replace(/FromIndex$/,""),r=n!==t,i=MF.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||TF.includes(t)))return;let o=function(c,...h){return qt(this,null,function*(){let g=this.transaction(c,i?"readwrite":"readonly"),m=g.store;return r&&(m=m.index(h.shift())),(yield Promise.all([m[t](...h),i&&g.done]))[0]})};return O1.set(n,o),o}nS(e=>Le(ne({},e),{get:(n,t,r)=>rS(n,t)||e.get(n,t,r),has:(n,t)=>!!rS(n,t)||e.has(n,t)}));var P1=class{constructor(n){this.container=n}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(NF(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function NF(e){let n=e.getComponent();return n?.type==="VERSION"}var k1="@firebase/app",oS="0.10.12";var Gi=new Aa("@firebase/app"),OF="@firebase/app-compat",RF="@firebase/analytics-compat",PF="@firebase/analytics",kF="@firebase/app-check-compat",LF="@firebase/app-check",FF="@firebase/auth",BF="@firebase/auth-compat",VF="@firebase/database",UF="@firebase/data-connect",jF="@firebase/database-compat",HF="@firebase/functions",zF="@firebase/functions-compat",WF="@firebase/installations",GF="@firebase/installations-compat",$F="@firebase/messaging",qF="@firebase/messaging-compat",YF="@firebase/performance",XF="@firebase/performance-compat",ZF="@firebase/remote-config",QF="@firebase/remote-config-compat",KF="@firebase/storage",JF="@firebase/storage-compat",e6="@firebase/firestore",t6="@firebase/vertexai-preview",n6="@firebase/firestore-compat",r6="firebase",i6="10.14.0";var L1="[DEFAULT]",o6={[k1]:"fire-core",[OF]:"fire-core-compat",[PF]:"fire-analytics",[RF]:"fire-analytics-compat",[LF]:"fire-app-check",[kF]:"fire-app-check-compat",[FF]:"fire-auth",[BF]:"fire-auth-compat",[VF]:"fire-rtdb",[UF]:"fire-data-connect",[jF]:"fire-rtdb-compat",[HF]:"fire-fn",[zF]:"fire-fn-compat",[WF]:"fire-iid",[GF]:"fire-iid-compat",[$F]:"fire-fcm",[qF]:"fire-fcm-compat",[YF]:"fire-perf",[XF]:"fire-perf-compat",[ZF]:"fire-rc",[QF]:"fire-rc-compat",[KF]:"fire-gcs",[JF]:"fire-gcs-compat",[e6]:"fire-fst",[n6]:"fire-fst-compat",[t6]:"fire-vertex","fire-js":"fire-js",[r6]:"fire-js-all"};var nh=new Map,s6=new Map,F1=new Map;function sS(e,n){try{e.container.addComponent(n)}catch(t){Gi.debug(`Component ${n.name} failed to register with FirebaseApp ${e.name}`,t)}}function Ic(e){let n=e.name;if(F1.has(n))return Gi.debug(`There were multiple attempts to register component ${n}.`),!1;F1.set(n,e);for(let t of nh.values())sS(t,e);for(let t of s6.values())sS(t,e);return!0}function uS(e,n){let t=e.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),e.container.getProvider(n)}var a6={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Co=new _c("app","Firebase",a6);var B1=class{constructor(n,t,r){this._isDeleted=!1,this._options=Object.assign({},n),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Wi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(n){this.checkDestroyed(),this._automaticDataCollectionEnabled=n}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(n){this._isDeleted=n}checkDestroyed(){if(this.isDeleted)throw Co.create("app-deleted",{appName:this._name})}};var dS=i6;function _e(e,n={}){let t=e;typeof n!="object"&&(n={name:n});let r=Object.assign({name:L1,automaticDataCollectionEnabled:!1},n),i=r.name;if(typeof i!="string"||!i)throw Co.create("bad-app-name",{appName:String(i)});if(t||(t=I1()),!t)throw Co.create("no-options");let o=nh.get(i);if(o){if(Jf(t,o.options)&&Jf(r,o.config))return o;throw Co.create("duplicate-app",{appName:i})}let c=new Ec(i);for(let g of F1.values())c.addComponent(g);let h=new B1(t,r,c);return nh.set(i,h),h}function fS(e=L1){let n=nh.get(e);if(!n&&e===L1&&I1())return _e();if(!n)throw Co.create("no-app",{appName:e});return n}function _o(e,n,t){var r;let i=(r=o6[e])!==null&&r!==void 0?r:e;t&&(i+=`-${t}`);let o=i.match(/\s|\//),c=n.match(/\s|\//);if(o||c){let h=[`Unable to register library "${i}" with version "${n}":`];o&&h.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&c&&h.push("and"),c&&h.push(`version name "${n}" contains illegal characters (whitespace or "/")`),Gi.warn(h.join(" "));return}Ic(new Wi(`${i}-version`,()=>({library:i,version:n}),"VERSION"))}var l6="firebase-heartbeat-database",c6=1,Sc="firebase-heartbeat-store",R1=null;function hS(){return R1||(R1=iS(l6,c6,{upgrade:(e,n)=>{switch(n){case 0:try{e.createObjectStore(Sc)}catch(t){console.warn(t)}}}}).catch(e=>{throw Co.create("idb-open",{originalErrorMessage:e.message})})),R1}function u6(e){return qt(this,null,function*(){try{let t=(yield hS()).transaction(Sc),r=yield t.objectStore(Sc).get(pS(e));return yield t.done,r}catch(n){if(n instanceof cs)Gi.warn(n.message);else{let t=Co.create("idb-get",{originalErrorMessage:n?.message});Gi.warn(t.message)}}})}function aS(e,n){return qt(this,null,function*(){try{let r=(yield hS()).transaction(Sc,"readwrite");yield r.objectStore(Sc).put(n,pS(e)),yield r.done}catch(t){if(t instanceof cs)Gi.warn(t.message);else{let r=Co.create("idb-set",{originalErrorMessage:t?.message});Gi.warn(r.message)}}})}function pS(e){return`${e.name}!${e.options.appId}`}var d6=1024,f6=30*24*60*60*1e3,V1=class{constructor(n){this.container=n,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new U1(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return qt(this,null,function*(){var n,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=lS();return((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(c=>c.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(c=>{let h=new Date(c.date).valueOf();return Date.now()-h<=f6}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Gi.warn(r)}})}getHeartbeatsHeader(){return qt(this,null,function*(){var n;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=lS(),{heartbeatsToSend:r,unsentEntries:i}=h6(this._heartbeatsCache.heartbeats),o=Cc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return Gi.warn(t),""}})}};function lS(){return new Date().toISOString().substring(0,10)}function h6(e,n=d6){let t=[],r=e.slice();for(let i of e){let o=t.find(c=>c.agent===i.agent);if(o){if(o.dates.push(i.date),cS(t)>n){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),cS(t)>n){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var U1=class{constructor(n){this.app=n,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return qt(this,null,function*(){return GI()?$I().then(()=>!0).catch(()=>!1):!1})}read(){return qt(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield u6(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(n){return qt(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return aS(this.app,{lastSentHeartbeatDate:(t=n.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:n.heartbeats})}else return})}add(n){return qt(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return aS(this.app,{lastSentHeartbeatDate:(t=n.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...n.heartbeats]})}else return})}};function cS(e){return Cc(JSON.stringify({version:2,heartbeats:e})).length}function p6(e){Ic(new Wi("platform-logger",n=>new P1(n),"PRIVATE")),Ic(new Wi("heartbeat",n=>new V1(n),"PRIVATE")),_o(k1,oS,e),_o(k1,oS,"esm2017"),_o("fire-js","")}p6("");var g6="firebase",m6="10.14.0";_o(g6,m6,"app");var gS="@firebase/database",mS="1.0.8";var zy="";function y6(e){zy=e}var Y1=class{constructor(n){this.domStorage_=n,this.prefix_="firebase:"}set(n,t){t==null?this.domStorage_.removeItem(this.prefixedName_(n)):this.domStorage_.setItem(this.prefixedName_(n),Qt(t))}get(n){let t=this.domStorage_.getItem(this.prefixedName_(n));return t==null?null:Da(t)}remove(n){this.domStorage_.removeItem(this.prefixedName_(n))}prefixedName_(n){return this.prefix_+n}toString(){return this.domStorage_.toString()}};var X1=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(n,t){t==null?delete this.cache_[n]:this.cache_[n]=t}get(n){return Zr(this.cache_,n)?this.cache_[n]:null}remove(n){delete this.cache_[n]}};var YS=function(e){try{if(typeof window<"u"&&typeof window[e]<"u"){let n=window[e];return n.setItem("firebase:sentinel","cache"),n.removeItem("firebase:sentinel"),new Y1(n)}}catch{}return new X1},ps=YS("localStorage"),Z1=YS("sessionStorage");var Na=new Aa("@firebase/database"),w6=function(){let e=1;return function(){return e++}}(),XS=function(e){let n=QI(e),t=new Qf;t.update(n);let r=t.digest();return Kf.encodeByteArray(r)},$c=function(...e){let n="";for(let t=0;t<e.length;t++){let r=e[t];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?n+=$c.apply(null,r):typeof r=="object"?n+=Qt(r):n+=r,n+=" "}return n},gs=null,yS=!0,C6=function(e,n){Q(!n||e===!0||e===!1,"Can't turn on custom loggers persistently."),e===!0?(Na.logLevel=St.VERBOSE,gs=Na.log.bind(Na),n&&Z1.set("logging_enabled",!0)):typeof e=="function"?gs=e:(gs=null,Z1.remove("logging_enabled"))},Mn=function(...e){if(yS===!0&&(yS=!1,gs===null&&Z1.get("logging_enabled")===!0&&C6(!0)),gs){let n=$c.apply(null,e);gs(n)}},qc=function(e){return function(...n){Mn(e,...n)}},Q1=function(...e){let n="FIREBASE INTERNAL ERROR: "+$c(...e);Na.error(n)},$i=function(...e){let n=`FIREBASE FATAL ERROR: ${$c(...e)}`;throw Na.error(n),new Error(n)},zn=function(...e){let n="FIREBASE WARNING: "+$c(...e);Na.warn(n)},_6=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&zn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Wy=function(e){return typeof e=="number"&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},v6=function(e){if(gi()||document.readyState==="complete")e();else{let n=!1,t=function(){if(!document.body){setTimeout(t,Math.floor(10));return}n||(n=!0,e())};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&t()}),window.attachEvent("onload",t))}},Ra="[MIN_NAME]",ms="[MAX_NAME]",ws=function(e,n){if(e===n)return 0;if(e===Ra||n===ms)return-1;if(n===Ra||e===ms)return 1;{let t=wS(e),r=wS(n);return t!==null?r!==null?t-r===0?e.length-n.length:t-r:-1:r!==null?1:e<n?-1:1}},x6=function(e,n){return e===n?0:e<n?-1:1},Dc=function(e,n){if(n&&e in n)return n[e];throw new Error("Missing required key ("+e+") in object: "+Qt(n))},Gy=function(e){if(typeof e!="object"||e===null)return Qt(e);let n=[];for(let r in e)n.push(r);n.sort();let t="{";for(let r=0;r<n.length;r++)r!==0&&(t+=","),t+=Qt(n[r]),t+=":",t+=Gy(e[n[r]]);return t+="}",t},ZS=function(e,n){let t=e.length;if(t<=n)return[e];let r=[];for(let i=0;i<t;i+=n)i+n>t?r.push(e.substring(i,t)):r.push(e.substring(i,i+n));return r};function Nn(e,n){for(let t in e)e.hasOwnProperty(t)&&n(t,e[t])}var QS=function(e){Q(!Wy(e),"Invalid JSON number");let n=11,t=52,r=(1<<n-1)-1,i,o,c,h,g;e===0?(o=0,c=0,i=1/e===-1/0?1:0):(i=e<0,e=Math.abs(e),e>=Math.pow(2,1-r)?(h=Math.min(Math.floor(Math.log(e)/Math.LN2),r),o=h+r,c=Math.round(e*Math.pow(2,t-h)-Math.pow(2,t))):(o=0,c=Math.round(e/Math.pow(2,1-r-t))));let m=[];for(g=t;g;g-=1)m.push(c%2?1:0),c=Math.floor(c/2);for(g=n;g;g-=1)m.push(o%2?1:0),o=Math.floor(o/2);m.push(i?1:0),m.reverse();let v=m.join(""),x="";for(g=0;g<64;g+=8){let I=parseInt(v.substr(g,8),2).toString(16);I.length===1&&(I="0"+I),x=x+I}return x.toLowerCase()},b6=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},E6=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function I6(e,n){let t="Unknown Error";e==="too_big"?t="The data requested exceeds the maximum size that can be accessed with a single request.":e==="permission_denied"?t="Client doesn't have permission to access the desired data.":e==="unavailable"&&(t="The service is unavailable");let r=new Error(e+" at "+n._path.toString()+": "+t);return r.code=e.toUpperCase(),r}var S6=new RegExp("^-?(0*)\\d{1,10}$"),D6=-2147483648,A6=2147483647,wS=function(e){if(S6.test(e)){let n=Number(e);if(n>=D6&&n<=A6)return n}return null},Ha=function(e){try{e()}catch(n){setTimeout(()=>{let t=n.stack||"";throw zn("Exception was thrown by user callback.",t),n},Math.floor(0))}},T6=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Oc=function(e,n){let t=setTimeout(e,n);return typeof t=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):typeof t=="object"&&t.unref&&t.unref(),t};var K1=class{constructor(n,t){this.appName_=n,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(n){return this.appCheck?this.appCheck.getToken(n):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(n).then(t,r):t(null)},0)})}addTokenChangeListener(n){var t;(t=this.appCheckProvider)===null||t===void 0||t.get().then(r=>r.addTokenListener(n))}notifyForInvalidToken(){zn(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var J1=class{constructor(n,t,r){this.appName_=n,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(n){return this.auth_?this.auth_.getToken(n).catch(t=>t&&t.code==="auth/token-not-initialized"?(Mn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(n).then(t,r):t(null)},0)})}addTokenChangeListener(n){this.auth_?this.auth_.addAuthTokenListener(n):this.authProvider_.get().then(t=>t.addAuthTokenListener(n))}removeTokenChangeListener(n){this.authProvider_.get().then(t=>t.removeAuthTokenListener(n))}notifyForInvalidToken(){let n='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?n+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?n+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':n+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',zn(n)}},Rc=(()=>{class e{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}e.OWNER="owner";return e})(),ih="5",KS="v",JS="s",eD="r",tD="f",nD=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,rD="ls",iD="p",ey="ac",oD="websocket",sD="long_polling";var oh=class{constructor(n,t,r,i,o=!1,c="",h=!1,g=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=o,this.persistenceKey=c,this.includeNamespaceInQueryParams=h,this.isUsingEmulator=g,this._host=n.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ps.get("host:"+n)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(n){n!==this.internalHost&&(this.internalHost=n,this.isCacheableHost()&&ps.set("host:"+this._host,this.internalHost))}toString(){let n=this.toURLString();return this.persistenceKey&&(n+="<"+this.persistenceKey+">"),n}toURLString(){let n=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${n}${this.host}/${t}`}};function M6(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams}function aD(e,n,t){Q(typeof n=="string","typeof type must == string"),Q(typeof t=="object","typeof params must == object");let r;if(n===oD)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else if(n===sD)r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+n);M6(e)&&(t.ns=e.namespace);let i=[];return Nn(t,(o,c)=>{i.push(o+"="+c)}),r+i.join("&")}var ty=class{constructor(){this.counters_={}}incrementCounter(n,t=1){Zr(this.counters_,n)||(this.counters_[n]=0),this.counters_[n]+=t}get(){return VI(this.counters_)}};var j1={},H1={};function $y(e){let n=e.toString();return j1[n]||(j1[n]=new ty),j1[n]}function N6(e,n){let t=e.toString();return H1[t]||(H1[t]=n()),H1[t]}var ny=class{constructor(n){this.onMessage_=n,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(n,t){this.closeAfterResponse=n,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(n,t){for(this.pendingResponses[n]=t;this.pendingResponses[this.currentResponseNum];){let r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Ha(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var CS="start",O6="close",R6="pLPCommand",P6="pRTLPCB",lD="id",cD="pw",uD="ser",k6="cb",L6="seg",F6="ts",B6="d",V6="dframe",dD=1870,fD=30,U6=dD-fD,j6=25e3,H6=3e4,ry=class e{constructor(n,t,r,i,o,c,h){this.connId=n,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.transportSessionId=c,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=qc(n),this.stats_=$y(t),this.urlFn=g=>(this.appCheckToken&&(g[ey]=this.appCheckToken),aD(t,sD,g))}open(n,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new ny(n),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(H6)),v6(()=>{if(this.isClosed_)return;this.scriptTagHolder=new iy((...o)=>{let[c,h,g,m,v]=o;if(this.incrementIncomingBytes_(o),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,c===CS)this.id=h,this.password=g;else if(c===O6)h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+c)},(...o)=>{let[c,h]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(c,h)},()=>{this.onClosed_()},this.urlFn);let r={};r[CS]="t",r[uD]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[k6]=this.scriptTagHolder.uniqueCallbackIdentifier),r[KS]=ih,this.transportSessionId&&(r[JS]=this.transportSessionId),this.lastSessionId&&(r[rD]=this.lastSessionId),this.applicationId&&(r[iD]=this.applicationId),this.appCheckToken&&(r[ey]=this.appCheckToken),typeof location<"u"&&location.hostname&&nD.test(location.hostname)&&(r[eD]=tD);let i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){e.forceAllow_=!0}static forceDisallow(){e.forceDisallow_=!0}static isAvailable(){return gi()?!1:e.forceAllow_?!0:!e.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!b6()&&!E6()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(n){let t=Qt(n);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);let r=E1(t),i=ZS(r,U6);for(let o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++}addDisconnectPingFrame(n,t){if(gi())return;this.myDisconnFrame=document.createElement("iframe");let r={};r[V6]="t",r[lD]=n,r[cD]=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(n){let t=Qt(n).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}},iy=class e{constructor(n,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,gi())this.commandCB=n,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=w6(),window[R6+this.uniqueCallbackIdentifier]=n,window[P6+this.uniqueCallbackIdentifier]=t,this.myIFrame=e.createIFrame_();let o="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(o='<script>document.domain="'+document.domain+'";<\/script>');let c="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(h){Mn("frame writing exception"),h.stack&&Mn(h.stack),Mn(h)}}}static createIFrame_(){let n=document.createElement("iframe");if(n.style.display="none",document.body){document.body.appendChild(n);try{n.contentWindow.document||Mn("No IE domain setting required")}catch{let r=document.domain;n.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return n.contentDocument?n.doc=n.contentDocument:n.contentWindow?n.doc=n.contentWindow.document:n.document&&(n.doc=n.document),n}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let n=this.onDisconnect;n&&(this.onDisconnect=null,n())}startLongPoll(n,t){for(this.myID=n,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let n={};n[lD]=this.myID,n[cD]=this.myPW,n[uD]=this.currentSerial;let t=this.urlFn(n),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+fD+r.length<=dD;){let c=this.pendingSegs.shift();r=r+"&"+L6+i+"="+c.seg+"&"+F6+i+"="+c.ts+"&"+B6+i+"="+c.d,i++}return t=t+r,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(n,t,r){this.pendingSegs.push({seg:n,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(n,t){this.outstandingRequests.add(t);let r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(j6)),o=()=>{clearTimeout(i),r()};this.addTag(n,o)}addTag(n,t){gi()?this.doNodeLongPoll(n,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;let r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=n,r.onload=r.onreadystatechange=function(){let i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Mn("Long-poll script failed to load: "+n),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}};var z6=16384,W6=45e3,sh=null;typeof MozWebSocket<"u"?sh=MozWebSocket:typeof WebSocket<"u"&&(sh=WebSocket);var Ac=(()=>{class e{constructor(t,r,i,o,c,h,g){this.connId=t,this.applicationId=i,this.appCheckToken=o,this.authToken=c,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=qc(this.connId),this.stats_=$y(r),this.connURL=e.connectionURL_(r,h,g,o,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,o,c){let h={};return h[KS]=ih,!gi()&&typeof location<"u"&&location.hostname&&nD.test(location.hostname)&&(h[eD]=tD),r&&(h[JS]=r),i&&(h[rD]=i),o&&(h[ey]=o),c&&(h[iD]=c),aD(t,oD,h)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ps.set("previous_websocket_failure",!0);try{let i;if(gi()){let o=this.nodeAdmin?"AdminNode":"Node";i={headers:{"User-Agent":`Firebase/${ih}/${zy}/${process.platform}/${o}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);let c=process.env,h=this.connURL.indexOf("wss://")===0?c.HTTPS_PROXY||c.https_proxy:c.HTTP_PROXY||c.http_proxy;h&&(i.proxy={origin:h})}this.mySock=new sh(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");let o=i.message||i.data;o&&this.log_(o),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");let o=i.message||i.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){e.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){let r=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(r);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&sh!==null&&!e.forceDisallow_}static previouslyFailed(){return ps.isInMemoryStorage||ps.get("previous_websocket_failure")===!0}markConnectionHealthy(){ps.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){let r=this.frames.join("");this.frames=null;let i=Da(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(Q(this.frames===null,"We already have a frame buffer"),t.length<=6){let r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(this.mySock===null)return;let r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{let i=this.extractFrameCount_(r);i!==null&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();let r=Qt(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);let i=ZS(r,z6);i.length>1&&this.sendString_(String(i.length));for(let o=0;o<i.length;o++)this.sendString_(i[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(W6))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}e.responsesRequiredToBeHealthy=2,e.healthyTimeout=3e4;return e})(),G6=(()=>{class e{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[ry,Ac]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){let r=Ac&&Ac.isAvailable(),i=r&&!Ac.previouslyFailed();if(t.webSocketOnly&&(r||zn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Ac];else{let o=this.transports_=[];for(let c of e.ALL_TRANSPORTS)c&&c.isAvailable()&&o.push(c);e.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}e.globalTransportInitialized_=!1;return e})(),$6=6e4,q6=5e3,Y6=10*1024,X6=100*1024,z1="t",_S="d",Z6="s",vS="r",Q6="e",xS="o",bS="a",ES="n",IS="p",K6="h",oy=class{constructor(n,t,r,i,o,c,h,g,m,v){this.id=n,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=o,this.onMessage_=c,this.onReady_=h,this.onDisconnect_=g,this.onKill_=m,this.lastSessionId=v,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=qc("c:"+this.id+":"),this.transportManager_=new G6(t),this.log_("Connection created"),this.start_()}start_(){let n=this.transportManager_.initialTransport();this.conn_=new n(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=n.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));let i=n.healthyTimeout||0;i>0&&(this.healthyTimeout_=Oc(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>X6?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>Y6?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(n){return t=>{n===this.conn_?this.onConnectionLost_(t):n===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(n){return t=>{this.state_!==2&&(n===this.rx_?this.onPrimaryMessageReceived_(t):n===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(n){let t={t:"d",d:n};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(n){if(z1 in n){let t=n[z1];t===bS?this.upgradeIfSecondaryHealthy_():t===vS?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===xS&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(n){let t=Dc("t",n),r=Dc("d",n);if(t==="c")this.onSecondaryControl_(r);else if(t==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:IS,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:bS,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:ES,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(n){let t=Dc("t",n),r=Dc("d",n);t==="c"?this.onControl_(r):t==="d"&&this.onDataMessage_(r)}onDataMessage_(n){this.onPrimaryResponse_(),this.onMessage_(n)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(n){let t=Dc(z1,n);if(_S in n){let r=n[_S];if(t===K6){let i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(t===ES){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===Z6?this.onConnectionShutdown_(r):t===vS?this.onReset_(r):t===Q6?Q1("Server Error: "+r):t===xS?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Q1("Unknown control packet command: "+t)}}onHandshake_(n){let t=n.ts,r=n.v,i=n.h;this.sessionId=n.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),ih!==r&&zn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let n=this.transportManager_.upgradeTransport();n&&this.startUpgrade_(n)}startUpgrade_(n){this.secondaryConn_=new n(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=n.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),Oc(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor($6))}onReset_(n){this.log_("Reset packet received.  New host: "+n),this.repoInfo_.host=n,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(n,t){this.log_("Realtime connection established."),this.conn_=n,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Oc(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(q6))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:IS,d:{}}}))}onSecondaryConnectionLost_(){let n=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===n||this.rx_===n)&&this.close()}onConnectionLost_(n){this.conn_=null,!n&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ps.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(n){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(n),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(n){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(n)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var ah=class{put(n,t,r,i){}merge(n,t,r,i){}refreshAuthToken(n){}refreshAppCheckToken(n){}onDisconnectPut(n,t,r){}onDisconnectMerge(n,t,r){}onDisconnectCancel(n,t){}reportStats(n){}};var lh=class{constructor(n){this.allowedEvents_=n,this.listeners_={},Q(Array.isArray(n)&&n.length>0,"Requires a non-empty array")}trigger(n,...t){if(Array.isArray(this.listeners_[n])){let r=[...this.listeners_[n]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(n,t,r){this.validateEventType_(n),this.listeners_[n]=this.listeners_[n]||[],this.listeners_[n].push({callback:t,context:r});let i=this.getInitialEvent(n);i&&t.apply(r,i)}off(n,t,r){this.validateEventType_(n);let i=this.listeners_[n]||[];for(let o=0;o<i.length;o++)if(i[o].callback===t&&(!r||r===i[o].context)){i.splice(o,1);return}}validateEventType_(n){Q(this.allowedEvents_.find(t=>t===n),"Unknown event: "+n)}};var ch=class e extends lh{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!S1()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new e}getInitialEvent(n){return Q(n==="online","Unknown event type: "+n),[this.online_]}currentlyOnline(){return this.online_}};var SS=32,DS=768,ht=class{constructor(n,t){if(t===void 0){this.pieces_=n.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=n,this.pieceNum_=t}toString(){let n="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==""&&(n+="/"+this.pieces_[t]);return n||"/"}};function st(){return new ht("")}function We(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function Eo(e){return e.pieces_.length-e.pieceNum_}function Dt(e){let n=e.pieceNum_;return n<e.pieces_.length&&n++,new ht(e.pieces_,n)}function qy(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function J6(e){let n="";for(let t=e.pieceNum_;t<e.pieces_.length;t++)e.pieces_[t]!==""&&(n+="/"+encodeURIComponent(String(e.pieces_[t])));return n||"/"}function Fc(e,n=0){return e.pieces_.slice(e.pieceNum_+n)}function hD(e){if(e.pieceNum_>=e.pieces_.length)return null;let n=[];for(let t=e.pieceNum_;t<e.pieces_.length-1;t++)n.push(e.pieces_[t]);return new ht(n,0)}function Ht(e,n){let t=[];for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);if(n instanceof ht)for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);else{let r=n.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new ht(t,0)}function qe(e){return e.pieceNum_>=e.pieces_.length}function Hn(e,n){let t=We(e),r=We(n);if(t===null)return n;if(t===r)return Hn(Dt(e),Dt(n));throw new Error("INTERNAL ERROR: innerPath ("+n+") is not within outerPath ("+e+")")}function eB(e,n){let t=Fc(e,0),r=Fc(n,0);for(let i=0;i<t.length&&i<r.length;i++){let o=ws(t[i],r[i]);if(o!==0)return o}return t.length===r.length?0:t.length<r.length?-1:1}function Yy(e,n){if(Eo(e)!==Eo(n))return!1;for(let t=e.pieceNum_,r=n.pieceNum_;t<=e.pieces_.length;t++,r++)if(e.pieces_[t]!==n.pieces_[r])return!1;return!0}function br(e,n){let t=e.pieceNum_,r=n.pieceNum_;if(Eo(e)>Eo(n))return!1;for(;t<e.pieces_.length;){if(e.pieces_[t]!==n.pieces_[r])return!1;++t,++r}return!0}var sy=class{constructor(n,t){this.errorPrefix_=t,this.parts_=Fc(n,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=bc(this.parts_[r]);pD(this)}};function tB(e,n){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(n),e.byteLength_+=bc(n),pD(e)}function nB(e){let n=e.parts_.pop();e.byteLength_-=bc(n),e.parts_.length>0&&(e.byteLength_-=1)}function pD(e){if(e.byteLength_>DS)throw new Error(e.errorPrefix_+"has a key path longer than "+DS+" bytes ("+e.byteLength_+").");if(e.parts_.length>SS)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+SS+") or object contains a cycle "+hs(e))}function hs(e){return e.parts_.length===0?"":"in property '"+e.parts_.join(".")+"'"}var ay=class e extends lh{constructor(){super(["visible"]);let n,t;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",n="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",n="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",n="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",n="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{let r=!document[n];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new e}getInitialEvent(n){return Q(n==="visible","Unknown event type: "+n),[this.visible_]}};var Tc=1e3,rB=60*5*1e3,AS=30*1e3,iB=1.3,oB=3e4,sB="server_kill",TS=3,Xy=(()=>{class e extends ah{constructor(t,r,i,o,c,h,g,m){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=o,this.onServerInfoUpdate_=c,this.authTokenProvider_=h,this.appCheckTokenProvider_=g,this.authOverride_=m,this.id=e.nextPersistentConnectionId_++,this.log_=qc("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Tc,this.maxReconnectDelay_=rB,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,m&&!gi())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");ay.getInstance().on("visible",this.onVisible_,this),t.host.indexOf("fblocal")===-1&&ch.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){let o=++this.requestNumber_,c={r:o,a:t,b:r};this.log_(Qt(c)),Q(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(c),i&&(this.requestCBHash_[o]=i)}get(t){this.initConnection_();let r=new zi,o={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:h=>{let g=h.d;h.s==="ok"?r.resolve(g):r.reject(g)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;let c=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(c),r.promise}listen(t,r,i,o){this.initConnection_();let c=t._queryIdentifier,h=t._path.toString();this.log_("Listen called for "+h+" "+c),this.listens.has(h)||this.listens.set(h,new Map),Q(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Q(!this.listens.get(h).has(c),"listen() called twice for same path/queryId.");let g={onComplete:o,hashFn:r,query:t,tag:i};this.listens.get(h).set(c,g),this.connected_&&this.sendListen_(g)}sendGet_(t){let r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){let r=t.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);let c={p:i},h="q";t.tag&&(c.q=r._queryObject,c.t=t.tag),c.h=t.hashFn(),this.sendRequest(h,c,g=>{let m=g.d,v=g.s;e.warnOnListenWarnings_(m,r),(this.listens.get(i)&&this.listens.get(i).get(o))===t&&(this.log_("listen response",g),v!=="ok"&&this.removeListen_(i,o),t.onComplete&&t.onComplete(v,m))})}static warnOnListenWarnings_(t,r){if(t&&typeof t=="object"&&Zr(t,"w")){let i=ds(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){let o='".indexOn": "'+r._queryParams.getIndex().toString()+'"',c=r._path.toString();zn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${c} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&t.length===40||XI(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=AS)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let t=this.authToken_,r=YI(t)?"auth":"gauth",i={cred:t};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(r,i,o=>{let c=o.s,h=o.d||"error";this.authToken_===t&&(c==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(c,h))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{let r=t.s,i=t.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){let i=t._path.toString(),o=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+o),Q(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,o)&&this.connected_&&this.sendUnlisten_(i,o,t._queryObject,r)}sendUnlisten_(t,r,i,o){this.log_("Unlisten on "+t+" for "+r);let c={p:t},h="n";o&&(c.q=i,c.t=o),this.sendRequest(h,c)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,o){let c={p:r,d:i};this.log_("onDisconnect "+t,c),this.sendRequest(t,c,h=>{o&&setTimeout(()=>{o(h.s,h.d)},Math.floor(0))})}put(t,r,i,o){this.putInternal("p",t,r,i,o)}merge(t,r,i,o){this.putInternal("m",t,r,i,o)}putInternal(t,r,i,o,c){this.initConnection_();let h={p:r,d:i};c!==void 0&&(h.h=c),this.outstandingPuts_.push({action:t,request:h,onComplete:o}),this.outstandingPutCount_++;let g=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(g):this.log_("Buffering put: "+r)}sendPut_(t){let r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,o=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,c=>{this.log_(r+" response",c),delete this.outstandingPuts_[t],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),o&&o(c.s,c.d)})}reportStats(t){if(this.connected_){let r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{if(i.s!=="ok"){let c=i.d;this.log_("reportStats","Error sending stats: "+c)}})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+Qt(t));let r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),t==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):t==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):t==="c"?this.onListenRevoked_(r.p,r.q):t==="ac"?this.onAuthRevoked_(r.s,r.d):t==="apc"?this.onAppCheckRevoked_(r.s,r.d):t==="sd"?this.onSecurityDebugPacket_(r):Q1("Unrecognized action received from server: "+Qt(t)+`
Are you using the latest client?`)}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){Q(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Tc,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Tc,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>oB&&(this.reconnectDelay_=Tc),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let t=new Date().getTime()-this.lastConnectionAttemptTime_,r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*iB)}this.onConnectStatus_(!1)}establishConnection_(){return qt(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let t=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+e.nextConnectionId_++,c=this.lastSessionId,h=!1,g=null,m=function(){g?g.close():(h=!0,i())},v=function(I){Q(g,"sendRequest call when we're not connected not allowed."),g.sendRequest(I)};this.realtime_={close:m,sendRequest:v};let x=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[I,A]=yield Promise.all([this.authTokenProvider_.getToken(x),this.appCheckTokenProvider_.getToken(x)]);h?Mn("getToken() completed but was canceled"):(Mn("getToken() completed. Creating connection."),this.authToken_=I&&I.accessToken,this.appCheckToken_=A&&A.token,g=new oy(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,r,i,R=>{zn(R+" ("+this.repoInfo_.toString()+")"),this.interrupt(sB)},c))}catch(I){this.log_("Failed to get token: "+I),h||(this.repoInfo_.nodeAdmin&&zn(I),m())}}})}interrupt(t){Mn("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Mn("Resuming connection for reason: "+t),delete this.interruptReasons_[t],D1(this.interruptReasons_)&&(this.reconnectDelay_=Tc,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){let r=t-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){let r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;r?i=r.map(c=>Gy(c)).join("$"):i="default";let o=this.removeListen_(t,i);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(t,r){let i=new ht(t).toString(),o;if(this.listens.has(i)){let c=this.listens.get(i);o=c.get(r),c.delete(r),c.size===0&&this.listens.delete(i)}else o=void 0;return o}onAuthRevoked_(t,r){Mn("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(t==="invalid_token"||t==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=TS&&(this.reconnectDelay_=AS,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Mn("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(t==="invalid_token"||t==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=TS&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let t of this.listens.values())for(let r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){let t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){let t={},r="js";gi()&&(this.repoInfo_.nodeAdmin?r="admin_node":r="node"),t["sdk."+r+"."+zy.replace(/\./g,"-")]=1,S1()?t["framework.cordova"]=1:WI()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){let t=ch.getInstance().currentlyOnline();return D1(this.interruptReasons_)&&t}}e.nextPersistentConnectionId_=0,e.nextConnectionId_=0;return e})(),Ge=class e{constructor(n,t){this.name=n,this.node=t}static Wrap(n,t){return new e(n,t)}};var Pa=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(n,t){let r=new Ge(Ra,n),i=new Ge(Ra,t);return this.compare(r,i)!==0}minPost(){return Ge.MIN}};var rh,uh=class extends Pa{static get __EMPTY_NODE(){return rh}static set __EMPTY_NODE(n){rh=n}compare(n,t){return ws(n.name,t.name)}isDefinedOn(n){throw us("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(n,t){return!1}minPost(){return Ge.MIN}maxPost(){return new Ge(ms,rh)}makePost(n,t){return Q(typeof n=="string","KeyIndex indexValue must always be a string."),new Ge(n,rh)}toString(){return".key"}},Oa=new uh;var Ma=class{constructor(n,t,r,i,o=null){this.isReverse_=i,this.resultGenerator_=o,this.nodeStack_=[];let c=1;for(;!n.isEmpty();)if(n=n,c=t?r(n.key,t):1,i&&(c*=-1),c<0)this.isReverse_?n=n.left:n=n.right;else if(c===0){this.nodeStack_.push(n);break}else this.nodeStack_.push(n),this.isReverse_?n=n.right:n=n.left}getNext(){if(this.nodeStack_.length===0)return null;let n=this.nodeStack_.pop(),t;if(this.resultGenerator_?t=this.resultGenerator_(n.key,n.value):t={key:n.key,value:n.value},this.isReverse_)for(n=n.left;!n.isEmpty();)this.nodeStack_.push(n),n=n.right;else for(n=n.right;!n.isEmpty();)this.nodeStack_.push(n),n=n.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let n=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(n.key,n.value):{key:n.key,value:n.value}}},Qr=(()=>{class e{constructor(t,r,i,o,c){this.key=t,this.value=r,this.color=i??e.RED,this.left=o??Er.EMPTY_NODE,this.right=c??Er.EMPTY_NODE}copy(t,r,i,o,c){return new e(t??this.key,r??this.value,i??this.color,o??this.left,c??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let o=this,c=i(t,o.key);return c<0?o=o.copy(null,null,null,o.left.insert(t,r,i),null):c===0?o=o.copy(null,r,null,null,null):o=o.copy(null,null,null,null,o.right.insert(t,r,i)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return Er.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,o;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),r(t,i.key)===0){if(i.right.isEmpty())return Er.EMPTY_NODE;o=i.right.min_(),i=i.copy(o.key,o.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){let t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){let t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){let t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){let t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return e.RED=!0,e.BLACK=!1,e})(),ly=class{copy(n,t,r,i,o){return this}insert(n,t,r){return new Qr(n,t,null)}remove(n,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},Er=class e{constructor(n,t=e.EMPTY_NODE){this.comparator_=n,this.root_=t}insert(n,t){return new e(this.comparator_,this.root_.insert(n,t,this.comparator_).copy(null,null,Qr.BLACK,null,null))}remove(n){return new e(this.comparator_,this.root_.remove(n,this.comparator_).copy(null,null,Qr.BLACK,null,null))}get(n){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(n,r.key),t===0)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(n){let t,r=this.root_,i=null;for(;!r.isEmpty();)if(t=this.comparator_(n,r.key),t===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else t<0?r=r.left:t>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(n){return this.root_.inorderTraversal(n)}reverseTraversal(n){return this.root_.reverseTraversal(n)}getIterator(n){return new Ma(this.root_,null,this.comparator_,!1,n)}getIteratorFrom(n,t){return new Ma(this.root_,n,this.comparator_,!1,t)}getReverseIteratorFrom(n,t){return new Ma(this.root_,n,this.comparator_,!0,t)}getReverseIterator(n){return new Ma(this.root_,null,this.comparator_,!0,n)}};Er.EMPTY_NODE=new ly;function aB(e,n){return ws(e.name,n.name)}function Zy(e,n){return ws(e,n)}var cy;function lB(e){cy=e}var gD=function(e){return typeof e=="number"?"number:"+QS(e):"string:"+e},mD=function(e){if(e.isLeafNode()){let n=e.val();Q(typeof n=="string"||typeof n=="number"||typeof n=="object"&&Zr(n,".sv"),"Priority must be a string or number.")}else Q(e===cy||e.isEmpty(),"priority of unexpected type.");Q(e===cy||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var MS,ka=(()=>{class e{constructor(t,r=e.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,Q(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),mD(this.priorityNode_)}static set __childrenNodeConstructor(t){MS=t}static get __childrenNodeConstructor(){return MS}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new e(this.value_,t)}getImmediateChild(t){return t===".priority"?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return qe(t)?this:We(t)===".priority"?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return t===".priority"?this.updatePriority(r):r.isEmpty()&&t!==".priority"?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){let i=We(t);return i===null?r:r.isEmpty()&&i!==".priority"?this:(Q(i!==".priority"||Eo(t)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(Dt(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+gD(this.priorityNode_.val())+":");let r=typeof this.value_;t+=r+":",r==="number"?t+=QS(this.value_):t+=this.value_,this.lazyHash_=XS(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:(Q(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){let r=typeof t.value_,i=typeof this.value_,o=e.VALUE_TYPE_ORDER.indexOf(r),c=e.VALUE_TYPE_ORDER.indexOf(i);return Q(o>=0,"Unknown leaf type: "+r),Q(c>=0,"Unknown leaf type: "+i),o===c?i==="object"?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:c-o}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){let r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}e.VALUE_TYPE_ORDER=["object","boolean","number","string"];return e})(),yD,wD;function cB(e){yD=e}function uB(e){wD=e}var uy=class extends Pa{compare(n,t){let r=n.node.getPriority(),i=t.node.getPriority(),o=r.compareTo(i);return o===0?ws(n.name,t.name):o}isDefinedOn(n){return!n.getPriority().isEmpty()}indexedValueChanged(n,t){return!n.getPriority().equals(t.getPriority())}minPost(){return Ge.MIN}maxPost(){return new Ge(ms,new ka("[PRIORITY-POST]",wD))}makePost(n,t){let r=yD(n);return new Ge(t,new ka("[PRIORITY-POST]",r))}toString(){return".priority"}},zt=new uy;var dB=Math.log(2),dy=class{constructor(n){let t=o=>parseInt(Math.log(o)/dB,10),r=o=>parseInt(Array(o+1).join("1"),2);this.count=t(n+1),this.current_=this.count-1;let i=r(this.count);this.bits_=n+1&i}nextBitIsOne(){let n=!(this.bits_&1<<this.current_);return this.current_--,n}},dh=function(e,n,t,r){e.sort(n);let i=function(g,m){let v=m-g,x,I;if(v===0)return null;if(v===1)return x=e[g],I=t?t(x):x,new Qr(I,x.node,Qr.BLACK,null,null);{let A=parseInt(v/2,10)+g,R=i(g,A),j=i(A+1,m);return x=e[A],I=t?t(x):x,new Qr(I,x.node,Qr.BLACK,R,j)}},o=function(g){let m=null,v=null,x=e.length,I=function(R,j){let $=x-R,W=x;x-=R;let ce=i($+1,W),Xe=e[$],ge=t?t(Xe):Xe;A(new Qr(ge,Xe.node,j,null,ce))},A=function(R){m?(m.left=R,m=R):(v=R,m=R)};for(let R=0;R<g.count;++R){let j=g.nextBitIsOne(),$=Math.pow(2,g.count-(R+1));j?I($,Qr.BLACK):(I($,Qr.BLACK),I($,Qr.RED))}return v},c=new dy(e.length),h=o(c);return new Er(r||n,h)};var W1,Ta={},La=class e{constructor(n,t){this.indexes_=n,this.indexSet_=t}static get Default(){return Q(Ta&&zt,"ChildrenNode.ts has not been loaded"),W1=W1||new e({".priority":Ta},{".priority":zt}),W1}get(n){let t=ds(this.indexes_,n);if(!t)throw new Error("No index defined for "+n);return t instanceof Er?t:null}hasIndex(n){return Zr(this.indexSet_,n.toString())}addIndex(n,t){Q(n!==Oa,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let r=[],i=!1,o=t.getIterator(Ge.Wrap),c=o.getNext();for(;c;)i=i||n.isDefinedOn(c.node),r.push(c),c=o.getNext();let h;i?h=dh(r,n.getCompare()):h=Ta;let g=n.toString(),m=Object.assign({},this.indexSet_);m[g]=n;let v=Object.assign({},this.indexes_);return v[g]=h,new e(v,m)}addToIndexes(n,t){let r=vc(this.indexes_,(i,o)=>{let c=ds(this.indexSet_,o);if(Q(c,"Missing index implementation for "+o),i===Ta)if(c.isDefinedOn(n.node)){let h=[],g=t.getIterator(Ge.Wrap),m=g.getNext();for(;m;)m.name!==n.name&&h.push(m),m=g.getNext();return h.push(n),dh(h,c.getCompare())}else return Ta;else{let h=t.get(n.name),g=i;return h&&(g=g.remove(new Ge(n.name,h))),g.insert(n,n.node)}});return new e(r,this.indexSet_)}removeFromIndexes(n,t){let r=vc(this.indexes_,i=>{if(i===Ta)return i;{let o=t.get(n.name);return o?i.remove(new Ge(n.name,o)):i}});return new e(r,this.indexSet_)}};var Mc,Oe=(()=>{class e{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&mD(this.priorityNode_),this.children_.isEmpty()&&Q(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Mc||(Mc=new e(new Er(Zy),null,La.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Mc}updatePriority(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)}getImmediateChild(t){if(t===".priority")return this.getPriority();{let r=this.children_.get(t);return r===null?Mc:r}}getChild(t){let r=We(t);return r===null?this:this.getImmediateChild(r).getChild(Dt(t))}hasChild(t){return this.children_.get(t)!==null}updateImmediateChild(t,r){if(Q(r,"We should always be passing snapshot nodes"),t===".priority")return this.updatePriority(r);{let i=new Ge(t,r),o,c;r.isEmpty()?(o=this.children_.remove(t),c=this.indexMap_.removeFromIndexes(i,this.children_)):(o=this.children_.insert(t,r),c=this.indexMap_.addToIndexes(i,this.children_));let h=o.isEmpty()?Mc:this.priorityNode_;return new e(o,h,c)}}updateChild(t,r){let i=We(t);if(i===null)return r;{Q(We(t)!==".priority"||Eo(t)===1,".priority must be the last token in a path");let o=this.getImmediateChild(i).updateChild(Dt(t),r);return this.updateImmediateChild(i,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;let r={},i=0,o=0,c=!0;if(this.forEachChild(zt,(h,g)=>{r[h]=g.val(t),i++,c&&e.INTEGER_REGEXP_.test(h)?o=Math.max(o,Number(h)):c=!1}),!t&&c&&o<2*i){let h=[];for(let g in r)h[g]=r[g];return h}else return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let t="";this.getPriority().isEmpty()||(t+="priority:"+gD(this.getPriority().val())+":"),this.forEachChild(zt,(r,i)=>{let o=i.hash();o!==""&&(t+=":"+r+":"+o)}),this.lazyHash_=t===""?"":XS(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){let o=this.resolveIndex_(i);if(o){let c=o.getPredecessorKey(new Ge(t,r));return c?c.name:null}else return this.children_.getPredecessorKey(t)}getFirstChildName(t){let r=this.resolveIndex_(t);if(r){let i=r.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(t){let r=this.getFirstChildName(t);return r?new Ge(r,this.children_.get(r)):null}getLastChildName(t){let r=this.resolveIndex_(t);if(r){let i=r.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(t){let r=this.getLastChildName(t);return r?new Ge(r,this.children_.get(r)):null}forEachChild(t,r){let i=this.resolveIndex_(t);return i?i.inorderTraversal(o=>r(o.name,o.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){let i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,o=>o);{let o=this.children_.getIteratorFrom(t.name,Ge.Wrap),c=o.peek();for(;c!=null&&r.compare(c,t)<0;)o.getNext(),c=o.peek();return o}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){let i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,o=>o);{let o=this.children_.getReverseIteratorFrom(t.name,Ge.Wrap),c=o.peek();for(;c!=null&&r.compare(c,t)>0;)o.getNext(),c=o.peek();return o}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Yc?-1:0}withIndex(t){if(t===Oa||this.indexMap_.hasIndex(t))return this;{let r=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Oa||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{let r=t;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){let i=this.getIterator(zt),o=r.getIterator(zt),c=i.getNext(),h=o.getNext();for(;c&&h;){if(c.name!==h.name||!c.node.equals(h.node))return!1;c=i.getNext(),h=o.getNext()}return c===null&&h===null}else return!1;else return!1}}resolveIndex_(t){return t===Oa?null:this.indexMap_.get(t.toString())}}return e.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,e})(),fy=class extends Oe{constructor(){super(new Er(Zy),Oe.EMPTY_NODE,La.Default)}compareTo(n){return n===this?0:1}equals(n){return n===this}getPriority(){return this}getImmediateChild(n){return Oe.EMPTY_NODE}isEmpty(){return!1}},Yc=new fy;Object.defineProperties(Ge,{MIN:{value:new Ge(Ra,Oe.EMPTY_NODE)},MAX:{value:new Ge(ms,Yc)}});uh.__EMPTY_NODE=Oe.EMPTY_NODE;ka.__childrenNodeConstructor=Oe;lB(Yc);uB(Yc);var fB=!0;function an(e,n=null){if(e===null)return Oe.EMPTY_NODE;if(typeof e=="object"&&".priority"in e&&(n=e[".priority"]),Q(n===null||typeof n=="string"||typeof n=="number"||typeof n=="object"&&".sv"in n,"Invalid priority type found: "+typeof n),typeof e=="object"&&".value"in e&&e[".value"]!==null&&(e=e[".value"]),typeof e!="object"||".sv"in e){let t=e;return new ka(t,an(n))}if(!(e instanceof Array)&&fB){let t=[],r=!1;if(Nn(e,(c,h)=>{if(c.substring(0,1)!=="."){let g=an(h);g.isEmpty()||(r=r||!g.getPriority().isEmpty(),t.push(new Ge(c,g)))}}),t.length===0)return Oe.EMPTY_NODE;let o=dh(t,aB,c=>c.name,Zy);if(r){let c=dh(t,zt.getCompare());return new Oe(o,an(n),new La({".priority":c},{".priority":zt}))}else return new Oe(o,an(n),La.Default)}else{let t=Oe.EMPTY_NODE;return Nn(e,(r,i)=>{if(Zr(e,r)&&r.substring(0,1)!=="."){let o=an(i);(o.isLeafNode()||!o.isEmpty())&&(t=t.updateImmediateChild(r,o))}}),t.updatePriority(an(n))}}cB(an);var hy=class extends Pa{constructor(n){super(),this.indexPath_=n,Q(!qe(n)&&We(n)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(n){return n.getChild(this.indexPath_)}isDefinedOn(n){return!n.getChild(this.indexPath_).isEmpty()}compare(n,t){let r=this.extractChild(n.node),i=this.extractChild(t.node),o=r.compareTo(i);return o===0?ws(n.name,t.name):o}makePost(n,t){let r=an(n),i=Oe.EMPTY_NODE.updateChild(this.indexPath_,r);return new Ge(t,i)}maxPost(){let n=Oe.EMPTY_NODE.updateChild(this.indexPath_,Yc);return new Ge(ms,n)}toString(){return Fc(this.indexPath_,0).join("/")}};var py=class extends Pa{compare(n,t){let r=n.node.compareTo(t.node);return r===0?ws(n.name,t.name):r}isDefinedOn(n){return!0}indexedValueChanged(n,t){return!n.equals(t)}minPost(){return Ge.MIN}maxPost(){return Ge.MAX}makePost(n,t){let r=an(n);return new Ge(t,r)}toString(){return".value"}},hB=new py;function CD(e){return{type:"value",snapshotNode:e}}function Fa(e,n){return{type:"child_added",snapshotNode:n,childName:e}}function Bc(e,n){return{type:"child_removed",snapshotNode:n,childName:e}}function Vc(e,n,t){return{type:"child_changed",snapshotNode:n,childName:e,oldSnap:t}}function pB(e,n){return{type:"child_moved",snapshotNode:n,childName:e}}var Uc=class{constructor(n){this.index_=n}updateChild(n,t,r,i,o,c){Q(n.isIndexed(this.index_),"A node must be indexed if only a child is updated");let h=n.getImmediateChild(t);return h.getChild(i).equals(r.getChild(i))&&h.isEmpty()===r.isEmpty()||(c!=null&&(r.isEmpty()?n.hasChild(t)?c.trackChildChange(Bc(t,h)):Q(n.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?c.trackChildChange(Fa(t,r)):c.trackChildChange(Vc(t,r,h))),n.isLeafNode()&&r.isEmpty())?n:n.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(n,t,r){return r!=null&&(n.isLeafNode()||n.forEachChild(zt,(i,o)=>{t.hasChild(i)||r.trackChildChange(Bc(i,o))}),t.isLeafNode()||t.forEachChild(zt,(i,o)=>{if(n.hasChild(i)){let c=n.getImmediateChild(i);c.equals(o)||r.trackChildChange(Vc(i,o,c))}else r.trackChildChange(Fa(i,o))})),t.withIndex(this.index_)}updatePriority(n,t){return n.isEmpty()?Oe.EMPTY_NODE:n.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}};var fh=class e{constructor(n){this.indexedFilter_=new Uc(n.getIndex()),this.index_=n.getIndex(),this.startPost_=e.getStartPost_(n),this.endPost_=e.getEndPost_(n),this.startIsInclusive_=!n.startAfterSet_,this.endIsInclusive_=!n.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(n){let t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),n)<=0:this.index_.compare(this.getStartPost(),n)<0,r=this.endIsInclusive_?this.index_.compare(n,this.getEndPost())<=0:this.index_.compare(n,this.getEndPost())<0;return t&&r}updateChild(n,t,r,i,o,c){return this.matches(new Ge(t,r))||(r=Oe.EMPTY_NODE),this.indexedFilter_.updateChild(n,t,r,i,o,c)}updateFullNode(n,t,r){t.isLeafNode()&&(t=Oe.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(Oe.EMPTY_NODE);let o=this;return t.forEachChild(zt,(c,h)=>{o.matches(new Ge(c,h))||(i=i.updateImmediateChild(c,Oe.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(n,i,r)}updatePriority(n,t){return n}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(n){if(n.hasStart()){let t=n.getIndexStartName();return n.getIndex().makePost(n.getIndexStartValue(),t)}else return n.getIndex().minPost()}static getEndPost_(n){if(n.hasEnd()){let t=n.getIndexEndName();return n.getIndex().makePost(n.getIndexEndValue(),t)}else return n.getIndex().maxPost()}};var gy=class{constructor(n){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{let r=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=t=>{let r=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new fh(n),this.index_=n.getIndex(),this.limit_=n.getLimit(),this.reverse_=!n.isViewFromLeft(),this.startIsInclusive_=!n.startAfterSet_,this.endIsInclusive_=!n.endBeforeSet_}updateChild(n,t,r,i,o,c){return this.rangedFilter_.matches(new Ge(t,r))||(r=Oe.EMPTY_NODE),n.getImmediateChild(t).equals(r)?n:n.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(n,t,r,i,o,c):this.fullLimitUpdateChild_(n,t,r,o,c)}updateFullNode(n,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=Oe.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<t.numChildren()&&t.isIndexed(this.index_)){i=Oe.EMPTY_NODE.withIndex(this.index_);let o;this.reverse_?o=t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):o=t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let c=0;for(;o.hasNext()&&c<this.limit_;){let h=o.getNext();if(this.withinDirectionalStart(h))if(this.withinDirectionalEnd(h))i=i.updateImmediateChild(h.name,h.node),c++;else break;else continue}}else{i=t.withIndex(this.index_),i=i.updatePriority(Oe.EMPTY_NODE);let o;this.reverse_?o=i.getReverseIterator(this.index_):o=i.getIterator(this.index_);let c=0;for(;o.hasNext();){let h=o.getNext();c<this.limit_&&this.withinDirectionalStart(h)&&this.withinDirectionalEnd(h)?c++:i=i.updateImmediateChild(h.name,Oe.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(n,i,r)}updatePriority(n,t){return n}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(n,t,r,i,o){let c;if(this.reverse_){let x=this.index_.getCompare();c=(I,A)=>x(A,I)}else c=this.index_.getCompare();let h=n;Q(h.numChildren()===this.limit_,"");let g=new Ge(t,r),m=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),v=this.rangedFilter_.matches(g);if(h.hasChild(t)){let x=h.getImmediateChild(t),I=i.getChildAfterChild(this.index_,m,this.reverse_);for(;I!=null&&(I.name===t||h.hasChild(I.name));)I=i.getChildAfterChild(this.index_,I,this.reverse_);let A=I==null?1:c(I,g);if(v&&!r.isEmpty()&&A>=0)return o?.trackChildChange(Vc(t,r,x)),h.updateImmediateChild(t,r);{o?.trackChildChange(Bc(t,x));let j=h.updateImmediateChild(t,Oe.EMPTY_NODE);return I!=null&&this.rangedFilter_.matches(I)?(o?.trackChildChange(Fa(I.name,I.node)),j.updateImmediateChild(I.name,I.node)):j}}else return r.isEmpty()?n:v&&c(m,g)>=0?(o!=null&&(o.trackChildChange(Bc(m.name,m.node)),o.trackChildChange(Fa(t,r))),h.updateImmediateChild(t,r).updateImmediateChild(m.name,Oe.EMPTY_NODE)):n}};var my=class e{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=zt}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return Q(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Q(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ra}hasEnd(){return this.endSet_}getIndexEndValue(){return Q(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Q(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ms}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return Q(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===zt}copy(){let n=new e;return n.limitSet_=this.limitSet_,n.limit_=this.limit_,n.startSet_=this.startSet_,n.startAfterSet_=this.startAfterSet_,n.indexStartValue_=this.indexStartValue_,n.startNameSet_=this.startNameSet_,n.indexStartName_=this.indexStartName_,n.endSet_=this.endSet_,n.endBeforeSet_=this.endBeforeSet_,n.indexEndValue_=this.indexEndValue_,n.endNameSet_=this.endNameSet_,n.indexEndName_=this.indexEndName_,n.index_=this.index_,n.viewFrom_=this.viewFrom_,n}};function gB(e){return e.loadsAllData()?new Uc(e.getIndex()):e.hasLimit()?new gy(e):new fh(e)}function NS(e){let n={};if(e.isDefault())return n;let t;if(e.index_===zt?t="$priority":e.index_===hB?t="$value":e.index_===Oa?t="$key":(Q(e.index_ instanceof hy,"Unrecognized index type!"),t=e.index_.toString()),n.orderBy=Qt(t),e.startSet_){let r=e.startAfterSet_?"startAfter":"startAt";n[r]=Qt(e.indexStartValue_),e.startNameSet_&&(n[r]+=","+Qt(e.indexStartName_))}if(e.endSet_){let r=e.endBeforeSet_?"endBefore":"endAt";n[r]=Qt(e.indexEndValue_),e.endNameSet_&&(n[r]+=","+Qt(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?n.limitToFirst=e.limit_:n.limitToLast=e.limit_),n}function OS(e){let n={};if(e.startSet_&&(n.sp=e.indexStartValue_,e.startNameSet_&&(n.sn=e.indexStartName_),n.sin=!e.startAfterSet_),e.endSet_&&(n.ep=e.indexEndValue_,e.endNameSet_&&(n.en=e.indexEndName_),n.ein=!e.endBeforeSet_),e.limitSet_){n.l=e.limit_;let t=e.viewFrom_;t===""&&(e.isViewFromLeft()?t="l":t="r"),n.vf=t}return e.index_!==zt&&(n.i=e.index_.toString()),n}var yy=class e extends ah{constructor(n,t,r,i){super(),this.repoInfo_=n,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=qc("p:rest:"),this.listens_={}}reportStats(n){throw new Error("Method not implemented.")}static getListenId_(n,t){return t!==void 0?"tag$"+t:(Q(n._queryParams.isDefault(),"should have a tag if it's not a default query."),n._path.toString())}listen(n,t,r,i){let o=n._path.toString();this.log_("Listen called for "+o+" "+n._queryIdentifier);let c=e.getListenId_(n,r),h={};this.listens_[c]=h;let g=NS(n._queryParams);this.restRequest_(o+".json",g,(m,v)=>{let x=v;if(m===404&&(x=null,m=null),m===null&&this.onDataUpdate_(o,x,!1,r),ds(this.listens_,c)===h){let I;m?m===401?I="permission_denied":I="rest_error:"+m:I="ok",i(I,null)}})}unlisten(n,t){let r=e.getListenId_(n,t);delete this.listens_[r]}get(n){let t=NS(n._queryParams),r=n._path.toString(),i=new zi;return this.restRequest_(r+".json",t,(o,c)=>{let h=c;o===404&&(h=null,o=null),o===null?(this.onDataUpdate_(r,h,!1,null),i.resolve(h)):i.reject(new Error(h))}),i.promise}refreshAuthToken(n){}restRequest_(n,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,o])=>{i&&i.accessToken&&(t.auth=i.accessToken),o&&o.token&&(t.ac=o.token);let c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+n+"?ns="+this.repoInfo_.namespace+ZI(t);this.log_("Sending REST request for "+c);let h=new XMLHttpRequest;h.onreadystatechange=()=>{if(r&&h.readyState===4){this.log_("REST Response for "+c+" received. status:",h.status,"response:",h.responseText);let g=null;if(h.status>=200&&h.status<300){try{g=Da(h.responseText)}catch{zn("Failed to parse JSON response for "+c+": "+h.responseText)}r(null,g)}else h.status!==401&&h.status!==404&&zn("Got unsuccessful REST response for "+c+" Status: "+h.status),r(h.status);r=null}},h.open("GET",c,!0),h.send()})}};var wy=class{constructor(){this.rootNode_=Oe.EMPTY_NODE}getNode(n){return this.rootNode_.getChild(n)}updateSnapshot(n,t){this.rootNode_=this.rootNode_.updateChild(n,t)}};function hh(){return{value:null,children:new Map}}function _D(e,n,t){if(qe(n))e.value=t,e.children.clear();else if(e.value!==null)e.value=e.value.updateChild(n,t);else{let r=We(n);e.children.has(r)||e.children.set(r,hh());let i=e.children.get(r);n=Dt(n),_D(i,n,t)}}function Cy(e,n,t){e.value!==null?t(n,e.value):mB(e,(r,i)=>{let o=new ht(n.toString()+"/"+r);Cy(i,o,t)})}function mB(e,n){e.children.forEach((t,r)=>{n(r,t)})}var _y=class{constructor(n){this.collection_=n,this.last_=null}get(){let n=this.collection_.get(),t=Object.assign({},n);return this.last_&&Nn(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=n,t}};var RS=10*1e3,yB=30*1e3,wB=5*60*1e3,vy=class{constructor(n,t){this.server_=t,this.statsToReport_={},this.statsListener_=new _y(n);let r=RS+(yB-RS)*Math.random();Oc(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){let n=this.statsListener_.get(),t={},r=!1;Nn(n,(i,o)=>{o>0&&Zr(this.statsToReport_,i)&&(t[i]=o,r=!0)}),r&&this.server_.reportStats(t),Oc(this.reportStats_.bind(this),Math.floor(Math.random()*2*wB))}};var yi=function(e){return e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",e}(yi||{});function Qy(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Ky(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Jy(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}var xy=class e{constructor(n,t,r){this.path=n,this.affectedTree=t,this.revert=r,this.type=yi.ACK_USER_WRITE,this.source=Qy()}operationForChild(n){if(qe(this.path)){if(this.affectedTree.value!=null)return Q(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let t=this.affectedTree.subtree(new ht(n));return new e(st(),t,this.revert)}}else return Q(We(this.path)===n,"operationForChild called for unrelated child."),new e(Dt(this.path),this.affectedTree,this.revert)}};var ph=class e{constructor(n,t){this.source=n,this.path=t,this.type=yi.LISTEN_COMPLETE}operationForChild(n){return qe(this.path)?new e(this.source,st()):new e(this.source,Dt(this.path))}};var Ba=class e{constructor(n,t,r){this.source=n,this.path=t,this.snap=r,this.type=yi.OVERWRITE}operationForChild(n){return qe(this.path)?new e(this.source,st(),this.snap.getImmediateChild(n)):new e(this.source,Dt(this.path),this.snap)}};var jc=class e{constructor(n,t,r){this.source=n,this.path=t,this.children=r,this.type=yi.MERGE}operationForChild(n){if(qe(this.path)){let t=this.children.subtree(new ht(n));return t.isEmpty()?null:t.value?new Ba(this.source,st(),t.value):new e(this.source,st(),t)}else return Q(We(this.path)===n,"Can't get a merge for a child not on the path of the operation"),new e(this.source,Dt(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var wi=class{constructor(n,t,r){this.node_=n,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(n){if(qe(n))return this.isFullyInitialized()&&!this.filtered_;let t=We(n);return this.isCompleteForChild(t)}isCompleteForChild(n){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(n)}getNode(){return this.node_}};var by=class{constructor(n){this.query_=n,this.index_=this.query_._queryParams.getIndex()}};function CB(e,n,t,r){let i=[],o=[];return n.forEach(c=>{c.type==="child_changed"&&e.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&o.push(pB(c.childName,c.snapshotNode))}),Nc(e,i,"child_removed",n,r,t),Nc(e,i,"child_added",n,r,t),Nc(e,i,"child_moved",o,r,t),Nc(e,i,"child_changed",n,r,t),Nc(e,i,"value",n,r,t),i}function Nc(e,n,t,r,i,o){let c=r.filter(h=>h.type===t);c.sort((h,g)=>vB(e,h,g)),c.forEach(h=>{let g=_B(e,h,o);i.forEach(m=>{m.respondsTo(h.type)&&n.push(m.createEvent(g,e.query_))})})}function _B(e,n,t){return n.type==="value"||n.type==="child_removed"||(n.prevName=t.getPredecessorChildName(n.childName,n.snapshotNode,e.index_)),n}function vB(e,n,t){if(n.childName==null||t.childName==null)throw us("Should only compare child_ events.");let r=new Ge(n.childName,n.snapshotNode),i=new Ge(t.childName,t.snapshotNode);return e.index_.compare(r,i)}function Ah(e,n){return{eventCache:e,serverCache:n}}function Pc(e,n,t,r){return Ah(new wi(n,t,r),e.serverCache)}function vD(e,n,t,r){return Ah(e.eventCache,new wi(n,t,r))}function gh(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function ys(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}var G1,xB=()=>(G1||(G1=new Er(x6)),G1),Wn=class e{constructor(n,t=xB()){this.value=n,this.children=t}static fromObject(n){let t=new e(null);return Nn(n,(r,i)=>{t=t.set(new ht(r),i)}),t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(n,t){if(this.value!=null&&t(this.value))return{path:st(),value:this.value};if(qe(n))return null;{let r=We(n),i=this.children.get(r);if(i!==null){let o=i.findRootMostMatchingPathAndValue(Dt(n),t);return o!=null?{path:Ht(new ht(r),o.path),value:o.value}:null}else return null}}findRootMostValueAndPath(n){return this.findRootMostMatchingPathAndValue(n,()=>!0)}subtree(n){if(qe(n))return this;{let t=We(n),r=this.children.get(t);return r!==null?r.subtree(Dt(n)):new e(null)}}set(n,t){if(qe(n))return new e(t,this.children);{let r=We(n),o=(this.children.get(r)||new e(null)).set(Dt(n),t),c=this.children.insert(r,o);return new e(this.value,c)}}remove(n){if(qe(n))return this.children.isEmpty()?new e(null):new e(null,this.children);{let t=We(n),r=this.children.get(t);if(r){let i=r.remove(Dt(n)),o;return i.isEmpty()?o=this.children.remove(t):o=this.children.insert(t,i),this.value===null&&o.isEmpty()?new e(null):new e(this.value,o)}else return this}}get(n){if(qe(n))return this.value;{let t=We(n),r=this.children.get(t);return r?r.get(Dt(n)):null}}setTree(n,t){if(qe(n))return t;{let r=We(n),o=(this.children.get(r)||new e(null)).setTree(Dt(n),t),c;return o.isEmpty()?c=this.children.remove(r):c=this.children.insert(r,o),new e(this.value,c)}}fold(n){return this.fold_(st(),n)}fold_(n,t){let r={};return this.children.inorderTraversal((i,o)=>{r[i]=o.fold_(Ht(n,i),t)}),t(n,this.value,r)}findOnPath(n,t){return this.findOnPath_(n,st(),t)}findOnPath_(n,t,r){let i=this.value?r(t,this.value):!1;if(i)return i;if(qe(n))return null;{let o=We(n),c=this.children.get(o);return c?c.findOnPath_(Dt(n),Ht(t,o),r):null}}foreachOnPath(n,t){return this.foreachOnPath_(n,st(),t)}foreachOnPath_(n,t,r){if(qe(n))return this;{this.value&&r(t,this.value);let i=We(n),o=this.children.get(i);return o?o.foreachOnPath_(Dt(n),Ht(t,i),r):new e(null)}}foreach(n){this.foreach_(st(),n)}foreach_(n,t){this.children.inorderTraversal((r,i)=>{i.foreach_(Ht(n,r),t)}),this.value&&t(n,this.value)}foreachChild(n){this.children.inorderTraversal((t,r)=>{r.value&&n(t,r.value)})}};var Kr=class e{constructor(n){this.writeTree_=n}static empty(){return new e(new Wn(null))}};function kc(e,n,t){if(qe(n))return new Kr(new Wn(t));{let r=e.writeTree_.findRootMostValueAndPath(n);if(r!=null){let i=r.path,o=r.value,c=Hn(i,n);return o=o.updateChild(c,t),new Kr(e.writeTree_.set(i,o))}else{let i=new Wn(t),o=e.writeTree_.setTree(n,i);return new Kr(o)}}}function Ey(e,n,t){let r=e;return Nn(t,(i,o)=>{r=kc(r,Ht(n,i),o)}),r}function PS(e,n){if(qe(n))return Kr.empty();{let t=e.writeTree_.setTree(n,new Wn(null));return new Kr(t)}}function Iy(e,n){return Cs(e,n)!=null}function Cs(e,n){let t=e.writeTree_.findRootMostValueAndPath(n);return t!=null?e.writeTree_.get(t.path).getChild(Hn(t.path,n)):null}function kS(e){let n=[],t=e.writeTree_.value;return t!=null?t.isLeafNode()||t.forEachChild(zt,(r,i)=>{n.push(new Ge(r,i))}):e.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&n.push(new Ge(r,i.value))}),n}function xo(e,n){if(qe(n))return e;{let t=Cs(e,n);return t!=null?new Kr(new Wn(t)):new Kr(e.writeTree_.subtree(n))}}function Sy(e){return e.writeTree_.isEmpty()}function Va(e,n){return xD(st(),e.writeTree_,n)}function xD(e,n,t){if(n.value!=null)return t.updateChild(e,n.value);{let r=null;return n.children.inorderTraversal((i,o)=>{i===".priority"?(Q(o.value!==null,"Priority writes must always be leaf nodes"),r=o.value):t=xD(Ht(e,i),o,t)}),!t.getChild(e).isEmpty()&&r!==null&&(t=t.updateChild(Ht(e,".priority"),r)),t}}function Th(e,n){return SD(n,e)}function bB(e,n,t,r,i){Q(r>e.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),e.allWrites.push({path:n,snap:t,writeId:r,visible:i}),i&&(e.visibleWrites=kc(e.visibleWrites,n,t)),e.lastWriteId=r}function EB(e,n,t,r){Q(r>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:n,children:t,writeId:r,visible:!0}),e.visibleWrites=Ey(e.visibleWrites,n,t),e.lastWriteId=r}function IB(e,n){for(let t=0;t<e.allWrites.length;t++){let r=e.allWrites[t];if(r.writeId===n)return r}return null}function SB(e,n){let t=e.allWrites.findIndex(h=>h.writeId===n);Q(t>=0,"removeWrite called with nonexistent writeId.");let r=e.allWrites[t];e.allWrites.splice(t,1);let i=r.visible,o=!1,c=e.allWrites.length-1;for(;i&&c>=0;){let h=e.allWrites[c];h.visible&&(c>=t&&DB(h,r.path)?i=!1:br(r.path,h.path)&&(o=!0)),c--}if(i){if(o)return AB(e),!0;if(r.snap)e.visibleWrites=PS(e.visibleWrites,r.path);else{let h=r.children;Nn(h,g=>{e.visibleWrites=PS(e.visibleWrites,Ht(r.path,g))})}return!0}else return!1}function DB(e,n){if(e.snap)return br(e.path,n);for(let t in e.children)if(e.children.hasOwnProperty(t)&&br(Ht(e.path,t),n))return!0;return!1}function AB(e){e.visibleWrites=bD(e.allWrites,TB,st()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}function TB(e){return e.visible}function bD(e,n,t){let r=Kr.empty();for(let i=0;i<e.length;++i){let o=e[i];if(n(o)){let c=o.path,h;if(o.snap)br(t,c)?(h=Hn(t,c),r=kc(r,h,o.snap)):br(c,t)&&(h=Hn(c,t),r=kc(r,st(),o.snap.getChild(h)));else if(o.children){if(br(t,c))h=Hn(t,c),r=Ey(r,h,o.children);else if(br(c,t))if(h=Hn(c,t),qe(h))r=Ey(r,st(),o.children);else{let g=ds(o.children,We(h));if(g){let m=g.getChild(Dt(h));r=kc(r,st(),m)}}}else throw us("WriteRecord should have .snap or .children")}}return r}function ED(e,n,t,r,i){if(!r&&!i){let o=Cs(e.visibleWrites,n);if(o!=null)return o;{let c=xo(e.visibleWrites,n);if(Sy(c))return t;if(t==null&&!Iy(c,st()))return null;{let h=t||Oe.EMPTY_NODE;return Va(c,h)}}}else{let o=xo(e.visibleWrites,n);if(!i&&Sy(o))return t;if(!i&&t==null&&!Iy(o,st()))return null;{let c=function(m){return(m.visible||i)&&(!r||!~r.indexOf(m.writeId))&&(br(m.path,n)||br(n,m.path))},h=bD(e.allWrites,c,n),g=t||Oe.EMPTY_NODE;return Va(h,g)}}}function MB(e,n,t){let r=Oe.EMPTY_NODE,i=Cs(e.visibleWrites,n);if(i)return i.isLeafNode()||i.forEachChild(zt,(o,c)=>{r=r.updateImmediateChild(o,c)}),r;if(t){let o=xo(e.visibleWrites,n);return t.forEachChild(zt,(c,h)=>{let g=Va(xo(o,new ht(c)),h);r=r.updateImmediateChild(c,g)}),kS(o).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}else{let o=xo(e.visibleWrites,n);return kS(o).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}}function NB(e,n,t,r,i){Q(r||i,"Either existingEventSnap or existingServerSnap must exist");let o=Ht(n,t);if(Iy(e.visibleWrites,o))return null;{let c=xo(e.visibleWrites,o);return Sy(c)?i.getChild(t):Va(c,i.getChild(t))}}function OB(e,n,t,r){let i=Ht(n,t),o=Cs(e.visibleWrites,i);if(o!=null)return o;if(r.isCompleteForChild(t)){let c=xo(e.visibleWrites,i);return Va(c,r.getNode().getImmediateChild(t))}else return null}function RB(e,n){return Cs(e.visibleWrites,n)}function PB(e,n,t,r,i,o,c){let h,g=xo(e.visibleWrites,n),m=Cs(g,st());if(m!=null)h=m;else if(t!=null)h=Va(g,t);else return[];if(h=h.withIndex(c),!h.isEmpty()&&!h.isLeafNode()){let v=[],x=c.getCompare(),I=o?h.getReverseIteratorFrom(r,c):h.getIteratorFrom(r,c),A=I.getNext();for(;A&&v.length<i;)x(A,r)!==0&&v.push(A),A=I.getNext();return v}else return[]}function kB(){return{visibleWrites:Kr.empty(),allWrites:[],lastWriteId:-1}}function mh(e,n,t,r){return ED(e.writeTree,e.treePath,n,t,r)}function ew(e,n){return MB(e.writeTree,e.treePath,n)}function LS(e,n,t,r){return NB(e.writeTree,e.treePath,n,t,r)}function yh(e,n){return RB(e.writeTree,Ht(e.treePath,n))}function LB(e,n,t,r,i,o){return PB(e.writeTree,e.treePath,n,t,r,i,o)}function tw(e,n,t){return OB(e.writeTree,e.treePath,n,t)}function ID(e,n){return SD(Ht(e.treePath,n),e.writeTree)}function SD(e,n){return{treePath:e,writeTree:n}}var Dy=class{constructor(){this.changeMap=new Map}trackChildChange(n){let t=n.type,r=n.childName;Q(t==="child_added"||t==="child_changed"||t==="child_removed","Only child changes supported for tracking"),Q(r!==".priority","Only non-priority child changes can be tracked.");let i=this.changeMap.get(r);if(i){let o=i.type;if(t==="child_added"&&o==="child_removed")this.changeMap.set(r,Vc(r,n.snapshotNode,i.snapshotNode));else if(t==="child_removed"&&o==="child_added")this.changeMap.delete(r);else if(t==="child_removed"&&o==="child_changed")this.changeMap.set(r,Bc(r,i.oldSnap));else if(t==="child_changed"&&o==="child_added")this.changeMap.set(r,Fa(r,n.snapshotNode));else if(t==="child_changed"&&o==="child_changed")this.changeMap.set(r,Vc(r,n.snapshotNode,i.oldSnap));else throw us("Illegal combination of changes: "+n+" occurred after "+i)}else this.changeMap.set(r,n)}getChanges(){return Array.from(this.changeMap.values())}};var Ay=class{getCompleteChild(n){return null}getChildAfterChild(n,t,r){return null}},DD=new Ay,Hc=class{constructor(n,t,r=null){this.writes_=n,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(n){let t=this.viewCache_.eventCache;if(t.isCompleteForChild(n))return t.getNode().getImmediateChild(n);{let r=this.optCompleteServerCache_!=null?new wi(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return tw(this.writes_,n,r)}}getChildAfterChild(n,t,r){let i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:ys(this.viewCache_),o=LB(this.writes_,i,t,1,r,n);return o.length===0?null:o[0]}};function FB(e){return{filter:e}}function BB(e,n){Q(n.eventCache.getNode().isIndexed(e.filter.getIndex()),"Event snap not indexed"),Q(n.serverCache.getNode().isIndexed(e.filter.getIndex()),"Server snap not indexed")}function VB(e,n,t,r,i){let o=new Dy,c,h;if(t.type===yi.OVERWRITE){let m=t;m.source.fromUser?c=Ty(e,n,m.path,m.snap,r,i,o):(Q(m.source.fromServer,"Unknown source."),h=m.source.tagged||n.serverCache.isFiltered()&&!qe(m.path),c=wh(e,n,m.path,m.snap,r,i,h,o))}else if(t.type===yi.MERGE){let m=t;m.source.fromUser?c=jB(e,n,m.path,m.children,r,i,o):(Q(m.source.fromServer,"Unknown source."),h=m.source.tagged||n.serverCache.isFiltered(),c=My(e,n,m.path,m.children,r,i,h,o))}else if(t.type===yi.ACK_USER_WRITE){let m=t;m.revert?c=WB(e,n,m.path,r,i,o):c=HB(e,n,m.path,m.affectedTree,r,i,o)}else if(t.type===yi.LISTEN_COMPLETE)c=zB(e,n,t.path,r,o);else throw us("Unknown operation type: "+t.type);let g=o.getChanges();return UB(n,c,g),{viewCache:c,changes:g}}function UB(e,n,t){let r=n.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=gh(e);(t.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&t.push(CD(gh(n)))}}function AD(e,n,t,r,i,o){let c=n.eventCache;if(yh(r,t)!=null)return n;{let h,g;if(qe(t))if(Q(n.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),n.serverCache.isFiltered()){let m=ys(n),v=m instanceof Oe?m:Oe.EMPTY_NODE,x=ew(r,v);h=e.filter.updateFullNode(n.eventCache.getNode(),x,o)}else{let m=mh(r,ys(n));h=e.filter.updateFullNode(n.eventCache.getNode(),m,o)}else{let m=We(t);if(m===".priority"){Q(Eo(t)===1,"Can't have a priority with additional path components");let v=c.getNode();g=n.serverCache.getNode();let x=LS(r,t,v,g);x!=null?h=e.filter.updatePriority(v,x):h=c.getNode()}else{let v=Dt(t),x;if(c.isCompleteForChild(m)){g=n.serverCache.getNode();let I=LS(r,t,c.getNode(),g);I!=null?x=c.getNode().getImmediateChild(m).updateChild(v,I):x=c.getNode().getImmediateChild(m)}else x=tw(r,m,n.serverCache);x!=null?h=e.filter.updateChild(c.getNode(),m,x,v,i,o):h=c.getNode()}}return Pc(n,h,c.isFullyInitialized()||qe(t),e.filter.filtersNodes())}}function wh(e,n,t,r,i,o,c,h){let g=n.serverCache,m,v=c?e.filter:e.filter.getIndexedFilter();if(qe(t))m=v.updateFullNode(g.getNode(),r,null);else if(v.filtersNodes()&&!g.isFiltered()){let A=g.getNode().updateChild(t,r);m=v.updateFullNode(g.getNode(),A,null)}else{let A=We(t);if(!g.isCompleteForPath(t)&&Eo(t)>1)return n;let R=Dt(t),$=g.getNode().getImmediateChild(A).updateChild(R,r);A===".priority"?m=v.updatePriority(g.getNode(),$):m=v.updateChild(g.getNode(),A,$,R,DD,null)}let x=vD(n,m,g.isFullyInitialized()||qe(t),v.filtersNodes()),I=new Hc(i,x,o);return AD(e,x,t,i,I,h)}function Ty(e,n,t,r,i,o,c){let h=n.eventCache,g,m,v=new Hc(i,n,o);if(qe(t))m=e.filter.updateFullNode(n.eventCache.getNode(),r,c),g=Pc(n,m,!0,e.filter.filtersNodes());else{let x=We(t);if(x===".priority")m=e.filter.updatePriority(n.eventCache.getNode(),r),g=Pc(n,m,h.isFullyInitialized(),h.isFiltered());else{let I=Dt(t),A=h.getNode().getImmediateChild(x),R;if(qe(I))R=r;else{let j=v.getCompleteChild(x);j!=null?qy(I)===".priority"&&j.getChild(hD(I)).isEmpty()?R=j:R=j.updateChild(I,r):R=Oe.EMPTY_NODE}if(A.equals(R))g=n;else{let j=e.filter.updateChild(h.getNode(),x,R,I,v,c);g=Pc(n,j,h.isFullyInitialized(),e.filter.filtersNodes())}}}return g}function FS(e,n){return e.eventCache.isCompleteForChild(n)}function jB(e,n,t,r,i,o,c){let h=n;return r.foreach((g,m)=>{let v=Ht(t,g);FS(n,We(v))&&(h=Ty(e,h,v,m,i,o,c))}),r.foreach((g,m)=>{let v=Ht(t,g);FS(n,We(v))||(h=Ty(e,h,v,m,i,o,c))}),h}function BS(e,n,t){return t.foreach((r,i)=>{n=n.updateChild(r,i)}),n}function My(e,n,t,r,i,o,c,h){if(n.serverCache.getNode().isEmpty()&&!n.serverCache.isFullyInitialized())return n;let g=n,m;qe(t)?m=r:m=new Wn(null).setTree(t,r);let v=n.serverCache.getNode();return m.children.inorderTraversal((x,I)=>{if(v.hasChild(x)){let A=n.serverCache.getNode().getImmediateChild(x),R=BS(e,A,I);g=wh(e,g,new ht(x),R,i,o,c,h)}}),m.children.inorderTraversal((x,I)=>{let A=!n.serverCache.isCompleteForChild(x)&&I.value===null;if(!v.hasChild(x)&&!A){let R=n.serverCache.getNode().getImmediateChild(x),j=BS(e,R,I);g=wh(e,g,new ht(x),j,i,o,c,h)}}),g}function HB(e,n,t,r,i,o,c){if(yh(i,t)!=null)return n;let h=n.serverCache.isFiltered(),g=n.serverCache;if(r.value!=null){if(qe(t)&&g.isFullyInitialized()||g.isCompleteForPath(t))return wh(e,n,t,g.getNode().getChild(t),i,o,h,c);if(qe(t)){let m=new Wn(null);return g.getNode().forEachChild(Oa,(v,x)=>{m=m.set(new ht(v),x)}),My(e,n,t,m,i,o,h,c)}else return n}else{let m=new Wn(null);return r.foreach((v,x)=>{let I=Ht(t,v);g.isCompleteForPath(I)&&(m=m.set(v,g.getNode().getChild(I)))}),My(e,n,t,m,i,o,h,c)}}function zB(e,n,t,r,i){let o=n.serverCache,c=vD(n,o.getNode(),o.isFullyInitialized()||qe(t),o.isFiltered());return AD(e,c,t,r,DD,i)}function WB(e,n,t,r,i,o){let c;if(yh(r,t)!=null)return n;{let h=new Hc(r,n,i),g=n.eventCache.getNode(),m;if(qe(t)||We(t)===".priority"){let v;if(n.serverCache.isFullyInitialized())v=mh(r,ys(n));else{let x=n.serverCache.getNode();Q(x instanceof Oe,"serverChildren would be complete if leaf node"),v=ew(r,x)}v=v,m=e.filter.updateFullNode(g,v,o)}else{let v=We(t),x=tw(r,v,n.serverCache);x==null&&n.serverCache.isCompleteForChild(v)&&(x=g.getImmediateChild(v)),x!=null?m=e.filter.updateChild(g,v,x,Dt(t),h,o):n.eventCache.getNode().hasChild(v)?m=e.filter.updateChild(g,v,Oe.EMPTY_NODE,Dt(t),h,o):m=g,m.isEmpty()&&n.serverCache.isFullyInitialized()&&(c=mh(r,ys(n)),c.isLeafNode()&&(m=e.filter.updateFullNode(m,c,o)))}return c=n.serverCache.isFullyInitialized()||yh(r,st())!=null,Pc(n,m,c,e.filter.filtersNodes())}}var Ny=class{constructor(n,t){this.query_=n,this.eventRegistrations_=[];let r=this.query_._queryParams,i=new Uc(r.getIndex()),o=gB(r);this.processor_=FB(o);let c=t.serverCache,h=t.eventCache,g=i.updateFullNode(Oe.EMPTY_NODE,c.getNode(),null),m=o.updateFullNode(Oe.EMPTY_NODE,h.getNode(),null),v=new wi(g,c.isFullyInitialized(),i.filtersNodes()),x=new wi(m,h.isFullyInitialized(),o.filtersNodes());this.viewCache_=Ah(x,v),this.eventGenerator_=new by(this.query_)}get query(){return this.query_}};function GB(e){return e.viewCache_.serverCache.getNode()}function $B(e){return gh(e.viewCache_)}function qB(e,n){let t=ys(e.viewCache_);return t&&(e.query._queryParams.loadsAllData()||!qe(n)&&!t.getImmediateChild(We(n)).isEmpty())?t.getChild(n):null}function VS(e){return e.eventRegistrations_.length===0}function YB(e,n){e.eventRegistrations_.push(n)}function US(e,n,t){let r=[];if(t){Q(n==null,"A cancel should cancel all event registrations.");let i=e.query._path;e.eventRegistrations_.forEach(o=>{let c=o.createCancelEvent(t,i);c&&r.push(c)})}if(n){let i=[];for(let o=0;o<e.eventRegistrations_.length;++o){let c=e.eventRegistrations_[o];if(!c.matches(n))i.push(c);else if(n.hasAnyCallback()){i=i.concat(e.eventRegistrations_.slice(o+1));break}}e.eventRegistrations_=i}else e.eventRegistrations_=[];return r}function jS(e,n,t,r){n.type===yi.MERGE&&n.source.queryId!==null&&(Q(ys(e.viewCache_),"We should always have a full cache before handling merges"),Q(gh(e.viewCache_),"Missing event cache, even though we have a server cache"));let i=e.viewCache_,o=VB(e.processor_,i,n,t,r);return BB(e.processor_,o.viewCache),Q(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=o.viewCache,TD(e,o.changes,o.viewCache.eventCache.getNode(),null)}function XB(e,n){let t=e.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(zt,(o,c)=>{r.push(Fa(o,c))}),t.isFullyInitialized()&&r.push(CD(t.getNode())),TD(e,r,t.getNode(),n)}function TD(e,n,t,r){let i=r?[r]:e.eventRegistrations_;return CB(e.eventGenerator_,n,t,i)}var Ch,_h=class{constructor(){this.views=new Map}};function ZB(e){Q(!Ch,"__referenceConstructor has already been defined"),Ch=e}function QB(){return Q(Ch,"Reference.ts has not been loaded"),Ch}function KB(e){return e.views.size===0}function nw(e,n,t,r){let i=n.source.queryId;if(i!==null){let o=e.views.get(i);return Q(o!=null,"SyncTree gave us an op for an invalid query."),jS(o,n,t,r)}else{let o=[];for(let c of e.views.values())o=o.concat(jS(c,n,t,r));return o}}function MD(e,n,t,r,i){let o=n._queryIdentifier,c=e.views.get(o);if(!c){let h=mh(t,i?r:null),g=!1;h?g=!0:r instanceof Oe?(h=ew(t,r),g=!1):(h=Oe.EMPTY_NODE,g=!1);let m=Ah(new wi(h,g,!1),new wi(r,i,!1));return new Ny(n,m)}return c}function JB(e,n,t,r,i,o){let c=MD(e,n,r,i,o);return e.views.has(n._queryIdentifier)||e.views.set(n._queryIdentifier,c),YB(c,t),XB(c,t)}function e5(e,n,t,r){let i=n._queryIdentifier,o=[],c=[],h=Io(e);if(i==="default")for(let[g,m]of e.views.entries())c=c.concat(US(m,t,r)),VS(m)&&(e.views.delete(g),m.query._queryParams.loadsAllData()||o.push(m.query));else{let g=e.views.get(i);g&&(c=c.concat(US(g,t,r)),VS(g)&&(e.views.delete(i),g.query._queryParams.loadsAllData()||o.push(g.query)))}return h&&!Io(e)&&o.push(new(QB())(n._repo,n._path)),{removed:o,events:c}}function ND(e){let n=[];for(let t of e.views.values())t.query._queryParams.loadsAllData()||n.push(t);return n}function bo(e,n){let t=null;for(let r of e.views.values())t=t||qB(r,n);return t}function OD(e,n){if(n._queryParams.loadsAllData())return Mh(e);{let r=n._queryIdentifier;return e.views.get(r)}}function RD(e,n){return OD(e,n)!=null}function Io(e){return Mh(e)!=null}function Mh(e){for(let n of e.views.values())if(n.query._queryParams.loadsAllData())return n;return null}var vh;function t5(e){Q(!vh,"__referenceConstructor has already been defined"),vh=e}function n5(){return Q(vh,"Reference.ts has not been loaded"),vh}var r5=1,xh=class{constructor(n){this.listenProvider_=n,this.syncPointTree_=new Wn(null),this.pendingWriteTree_=kB(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function PD(e,n,t,r,i){return bB(e.pendingWriteTree_,n,t,r,i),i?za(e,new Ba(Qy(),n,t)):[]}function i5(e,n,t,r){EB(e.pendingWriteTree_,n,t,r);let i=Wn.fromObject(t);return za(e,new jc(Qy(),n,i))}function vo(e,n,t=!1){let r=IB(e.pendingWriteTree_,n);if(SB(e.pendingWriteTree_,n)){let o=new Wn(null);return r.snap!=null?o=o.set(st(),!0):Nn(r.children,c=>{o=o.set(new ht(c),!0)}),za(e,new xy(r.path,o,t))}else return[]}function Xc(e,n,t){return za(e,new Ba(Ky(),n,t))}function o5(e,n,t){let r=Wn.fromObject(t);return za(e,new jc(Ky(),n,r))}function s5(e,n){return za(e,new ph(Ky(),n))}function a5(e,n,t){let r=iw(e,t);if(r){let i=ow(r),o=i.path,c=i.queryId,h=Hn(o,n),g=new ph(Jy(c),h);return sw(e,o,g)}else return[]}function bh(e,n,t,r,i=!1){let o=n._path,c=e.syncPointTree_.get(o),h=[];if(c&&(n._queryIdentifier==="default"||RD(c,n))){let g=e5(c,n,t,r);KB(c)&&(e.syncPointTree_=e.syncPointTree_.remove(o));let m=g.removed;if(h=g.events,!i){let v=m.findIndex(I=>I._queryParams.loadsAllData())!==-1,x=e.syncPointTree_.findOnPath(o,(I,A)=>Io(A));if(v&&!x){let I=e.syncPointTree_.subtree(o);if(!I.isEmpty()){let A=u5(I);for(let R=0;R<A.length;++R){let j=A[R],$=j.query,W=BD(e,j);e.listenProvider_.startListening(Lc($),zc(e,$),W.hashFn,W.onComplete)}}}!x&&m.length>0&&!r&&(v?e.listenProvider_.stopListening(Lc(n),null):m.forEach(I=>{let A=e.queryToTagMap.get(Nh(I));e.listenProvider_.stopListening(Lc(I),A)}))}d5(e,m)}return h}function kD(e,n,t,r){let i=iw(e,r);if(i!=null){let o=ow(i),c=o.path,h=o.queryId,g=Hn(c,n),m=new Ba(Jy(h),g,t);return sw(e,c,m)}else return[]}function l5(e,n,t,r){let i=iw(e,r);if(i){let o=ow(i),c=o.path,h=o.queryId,g=Hn(c,n),m=Wn.fromObject(t),v=new jc(Jy(h),g,m);return sw(e,c,v)}else return[]}function Oy(e,n,t,r=!1){let i=n._path,o=null,c=!1;e.syncPointTree_.foreachOnPath(i,(I,A)=>{let R=Hn(I,i);o=o||bo(A,R),c=c||Io(A)});let h=e.syncPointTree_.get(i);h?(c=c||Io(h),o=o||bo(h,st())):(h=new _h,e.syncPointTree_=e.syncPointTree_.set(i,h));let g;o!=null?g=!0:(g=!1,o=Oe.EMPTY_NODE,e.syncPointTree_.subtree(i).foreachChild((A,R)=>{let j=bo(R,st());j&&(o=o.updateImmediateChild(A,j))}));let m=RD(h,n);if(!m&&!n._queryParams.loadsAllData()){let I=Nh(n);Q(!e.queryToTagMap.has(I),"View does not exist, but we have a tag");let A=f5();e.queryToTagMap.set(I,A),e.tagToQueryMap.set(A,I)}let v=Th(e.pendingWriteTree_,i),x=JB(h,n,t,v,o,g);if(!m&&!c&&!r){let I=OD(h,n);x=x.concat(h5(e,n,I))}return x}function rw(e,n,t){let i=e.pendingWriteTree_,o=e.syncPointTree_.findOnPath(n,(c,h)=>{let g=Hn(c,n),m=bo(h,g);if(m)return m});return ED(i,n,o,t,!0)}function c5(e,n){let t=n._path,r=null;e.syncPointTree_.foreachOnPath(t,(m,v)=>{let x=Hn(m,t);r=r||bo(v,x)});let i=e.syncPointTree_.get(t);i?r=r||bo(i,st()):(i=new _h,e.syncPointTree_=e.syncPointTree_.set(t,i));let o=r!=null,c=o?new wi(r,!0,!1):null,h=Th(e.pendingWriteTree_,n._path),g=MD(i,n,h,o?c.getNode():Oe.EMPTY_NODE,o);return $B(g)}function za(e,n){return LD(n,e.syncPointTree_,null,Th(e.pendingWriteTree_,st()))}function LD(e,n,t,r){if(qe(e.path))return FD(e,n,t,r);{let i=n.get(st());t==null&&i!=null&&(t=bo(i,st()));let o=[],c=We(e.path),h=e.operationForChild(c),g=n.children.get(c);if(g&&h){let m=t?t.getImmediateChild(c):null,v=ID(r,c);o=o.concat(LD(h,g,m,v))}return i&&(o=o.concat(nw(i,e,r,t))),o}}function FD(e,n,t,r){let i=n.get(st());t==null&&i!=null&&(t=bo(i,st()));let o=[];return n.children.inorderTraversal((c,h)=>{let g=t?t.getImmediateChild(c):null,m=ID(r,c),v=e.operationForChild(c);v&&(o=o.concat(FD(v,h,g,m)))}),i&&(o=o.concat(nw(i,e,r,t))),o}function BD(e,n){let t=n.query,r=zc(e,t);return{hashFn:()=>(GB(n)||Oe.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?a5(e,t._path,r):s5(e,t._path);{let o=I6(i,t);return bh(e,t,null,o)}}}}function zc(e,n){let t=Nh(n);return e.queryToTagMap.get(t)}function Nh(e){return e._path.toString()+"$"+e._queryIdentifier}function iw(e,n){return e.tagToQueryMap.get(n)}function ow(e){let n=e.indexOf("$");return Q(n!==-1&&n<e.length-1,"Bad queryKey."),{queryId:e.substr(n+1),path:new ht(e.substr(0,n))}}function sw(e,n,t){let r=e.syncPointTree_.get(n);Q(r,"Missing sync point for query tag that we're tracking");let i=Th(e.pendingWriteTree_,n);return nw(r,t,i,null)}function u5(e){return e.fold((n,t,r)=>{if(t&&Io(t))return[Mh(t)];{let i=[];return t&&(i=ND(t)),Nn(r,(o,c)=>{i=i.concat(c)}),i}})}function Lc(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(n5())(e._repo,e._path):e}function d5(e,n){for(let t=0;t<n.length;++t){let r=n[t];if(!r._queryParams.loadsAllData()){let i=Nh(r),o=e.queryToTagMap.get(i);e.queryToTagMap.delete(i),e.tagToQueryMap.delete(o)}}}function f5(){return r5++}function h5(e,n,t){let r=n._path,i=zc(e,n),o=BD(e,t),c=e.listenProvider_.startListening(Lc(n),i,o.hashFn,o.onComplete),h=e.syncPointTree_.subtree(r);if(i)Q(!Io(h.value),"If we're adding a query, it shouldn't be shadowed");else{let g=h.fold((m,v,x)=>{if(!qe(m)&&v&&Io(v))return[Mh(v).query];{let I=[];return v&&(I=I.concat(ND(v).map(A=>A.query))),Nn(x,(A,R)=>{I=I.concat(R)}),I}});for(let m=0;m<g.length;++m){let v=g[m];e.listenProvider_.stopListening(Lc(v),zc(e,v))}}return c}var Ry=class e{constructor(n){this.node_=n}getImmediateChild(n){let t=this.node_.getImmediateChild(n);return new e(t)}node(){return this.node_}},Py=class e{constructor(n,t){this.syncTree_=n,this.path_=t}getImmediateChild(n){let t=Ht(this.path_,n);return new e(this.syncTree_,t)}node(){return rw(this.syncTree_,this.path_)}},p5=function(e){return e=e||{},e.timestamp=e.timestamp||new Date().getTime(),e},HS=function(e,n,t){if(!e||typeof e!="object")return e;if(Q(".sv"in e,"Unexpected leaf node or priority contents"),typeof e[".sv"]=="string")return g5(e[".sv"],n,t);if(typeof e[".sv"]=="object")return m5(e[".sv"],n);Q(!1,"Unexpected server value: "+JSON.stringify(e,null,2))},g5=function(e,n,t){switch(e){case"timestamp":return t.timestamp;default:Q(!1,"Unexpected server value: "+e)}},m5=function(e,n,t){e.hasOwnProperty("increment")||Q(!1,"Unexpected server value: "+JSON.stringify(e,null,2));let r=e.increment;typeof r!="number"&&Q(!1,"Unexpected increment value: "+r);let i=n.node();if(Q(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;let c=i.getValue();return typeof c!="number"?r:c+r},VD=function(e,n,t,r){return aw(n,new Py(t,e),r)},UD=function(e,n,t){return aw(e,new Ry(n),t)};function aw(e,n,t){let r=e.getPriority().val(),i=HS(r,n.getImmediateChild(".priority"),t),o;if(e.isLeafNode()){let c=e,h=HS(c.getValue(),n,t);return h!==c.getValue()||i!==c.getPriority().val()?new ka(h,an(i)):e}else{let c=e;return o=c,i!==c.getPriority().val()&&(o=o.updatePriority(new ka(i))),c.forEachChild(zt,(h,g)=>{let m=aw(g,n.getImmediateChild(h),t);m!==g&&(o=o.updateImmediateChild(h,m))}),o}}var Wc=class{constructor(n="",t=null,r={children:{},childCount:0}){this.name=n,this.parent=t,this.node=r}};function lw(e,n){let t=n instanceof ht?n:new ht(n),r=e,i=We(t);for(;i!==null;){let o=ds(r.node.children,i)||{children:{},childCount:0};r=new Wc(i,r,o),t=Dt(t),i=We(t)}return r}function Wa(e){return e.node.value}function jD(e,n){e.node.value=n,ky(e)}function HD(e){return e.node.childCount>0}function y5(e){return Wa(e)===void 0&&!HD(e)}function Oh(e,n){Nn(e.node.children,(t,r)=>{n(new Wc(t,e,r))})}function zD(e,n,t,r){t&&!r&&n(e),Oh(e,i=>{zD(i,n,!0,r)}),t&&r&&n(e)}function w5(e,n,t){let r=t?e:e.parent;for(;r!==null;){if(n(r))return!0;r=r.parent}return!1}function Zc(e){return new ht(e.parent===null?e.name:Zc(e.parent)+"/"+e.name)}function ky(e){e.parent!==null&&C5(e.parent,e.name,e)}function C5(e,n,t){let r=y5(t),i=Zr(e.node.children,n);r&&i?(delete e.node.children[n],e.node.childCount--,ky(e)):!r&&!i&&(e.node.children[n]=t.node,e.node.childCount++,ky(e))}var _5=/[\[\].#$\/\u0000-\u001F\u007F]/,v5=/[\[\].#$\u0000-\u001F\u007F]/,$1=10*1024*1024,cw=function(e){return typeof e=="string"&&e.length!==0&&!_5.test(e)},WD=function(e){return typeof e=="string"&&e.length!==0&&!v5.test(e)},x5=function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),WD(e)},b5=function(e){return e===null||typeof e=="string"||typeof e=="number"&&!Wy(e)||e&&typeof e=="object"&&Zr(e,".sv")},GD=function(e,n,t,r){r&&n===void 0||Rh(xc(e,"value"),n,t)},Rh=function(e,n,t){let r=t instanceof ht?new sy(t,e):t;if(n===void 0)throw new Error(e+"contains undefined "+hs(r));if(typeof n=="function")throw new Error(e+"contains a function "+hs(r)+" with contents = "+n.toString());if(Wy(n))throw new Error(e+"contains "+n.toString()+" "+hs(r));if(typeof n=="string"&&n.length>$1/3&&bc(n)>$1)throw new Error(e+"contains a string greater than "+$1+" utf8 bytes "+hs(r)+" ('"+n.substring(0,50)+"...')");if(n&&typeof n=="object"){let i=!1,o=!1;if(Nn(n,(c,h)=>{if(c===".value")i=!0;else if(c!==".priority"&&c!==".sv"&&(o=!0,!cw(c)))throw new Error(e+" contains an invalid key ("+c+") "+hs(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);tB(r,c),Rh(e,h,r),nB(r)}),i&&o)throw new Error(e+' contains ".value" child '+hs(r)+" in addition to actual children.")}},E5=function(e,n){let t,r;for(t=0;t<n.length;t++){r=n[t];let o=Fc(r);for(let c=0;c<o.length;c++)if(!(o[c]===".priority"&&c===o.length-1)){if(!cw(o[c]))throw new Error(e+"contains an invalid key ("+o[c]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}n.sort(eB);let i=null;for(t=0;t<n.length;t++){if(r=n[t],i!==null&&br(i,r))throw new Error(e+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}},I5=function(e,n,t,r){if(r&&n===void 0)return;let i=xc(e,"values");if(!(n&&typeof n=="object")||Array.isArray(n))throw new Error(i+" must be an object containing the children to replace.");let o=[];Nn(n,(c,h)=>{let g=new ht(c);if(Rh(i,h,Ht(t,g)),qy(g)===".priority"&&!b5(h))throw new Error(i+"contains an invalid value for '"+g.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(g)}),E5(i,o)};var $D=function(e,n,t,r){if(!(r&&t===void 0)&&!WD(t))throw new Error(xc(e,n)+'was an invalid path = "'+t+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},S5=function(e,n,t,r){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),$D(e,n,t,r)},uw=function(e,n){if(We(n)===".info")throw new Error(e+" failed = Can't modify data under /.info/")},D5=function(e,n){let t=n.path.toString();if(typeof n.repoInfo.host!="string"||n.repoInfo.host.length===0||!cw(n.repoInfo.namespace)&&n.repoInfo.host.split(":")[0]!=="localhost"||t.length!==0&&!x5(t))throw new Error(xc(e,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var Ly=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function Ph(e,n){let t=null;for(let r=0;r<n.length;r++){let i=n[r],o=i.getPath();t!==null&&!Yy(o,t.path)&&(e.eventLists_.push(t),t=null),t===null&&(t={events:[],path:o}),t.events.push(i)}t&&e.eventLists_.push(t)}function qD(e,n,t){Ph(e,t),YD(e,r=>Yy(r,n))}function Ir(e,n,t){Ph(e,t),YD(e,r=>br(r,n)||br(n,r))}function YD(e,n){e.recursionDepth_++;let t=!0;for(let r=0;r<e.eventLists_.length;r++){let i=e.eventLists_[r];if(i){let o=i.path;n(o)?(A5(e.eventLists_[r]),e.eventLists_[r]=null):t=!1}}t&&(e.eventLists_=[]),e.recursionDepth_--}function A5(e){for(let n=0;n<e.events.length;n++){let t=e.events[n];if(t!==null){e.events[n]=null;let r=t.getEventRunner();gs&&Mn("event: "+t.toString()),Ha(r)}}}var T5="repo_interrupt",M5=25,Fy=class{constructor(n,t,r,i){this.repoInfo_=n,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Ly,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=hh(),this.transactionQueueTree_=new Wc,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function N5(e,n,t){if(e.stats_=$y(e.repoInfo_),e.forceRestClient_||T6())e.server_=new yy(e.repoInfo_,(r,i,o,c)=>{zS(e,r,i,o,c)},e.authTokenProvider_,e.appCheckProvider_),setTimeout(()=>WS(e,!0),0);else{if(typeof t<"u"&&t!==null){if(typeof t!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Qt(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}e.persistentConnection_=new Xy(e.repoInfo_,n,(r,i,o,c)=>{zS(e,r,i,o,c)},r=>{WS(e,r)},r=>{O5(e,r)},e.authTokenProvider_,e.appCheckProvider_,t),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener(r=>{e.server_.refreshAuthToken(r)}),e.appCheckProvider_.addTokenChangeListener(r=>{e.server_.refreshAppCheckToken(r.token)}),e.statsReporter_=N6(e.repoInfo_,()=>new vy(e.stats_,e.server_)),e.infoData_=new wy,e.infoSyncTree_=new xh({startListening:(r,i,o,c)=>{let h=[],g=e.infoData_.getNode(r._path);return g.isEmpty()||(h=Xc(e.infoSyncTree_,r._path,g),setTimeout(()=>{c("ok")},0)),h},stopListening:()=>{}}),dw(e,"connected",!1),e.serverSyncTree_=new xh({startListening:(r,i,o,c)=>(e.server_.listen(r,o,i,(h,g)=>{let m=c(h,g);Ir(e.eventQueue_,r._path,m)}),[]),stopListening:(r,i)=>{e.server_.unlisten(r,i)}})}function XD(e){let t=e.infoData_.getNode(new ht(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function kh(e){return p5({timestamp:XD(e)})}function zS(e,n,t,r,i){e.dataUpdateCount++;let o=new ht(n);t=e.interceptServerDataCallback_?e.interceptServerDataCallback_(n,t):t;let c=[];if(i)if(r){let g=vc(t,m=>an(m));c=l5(e.serverSyncTree_,o,g,i)}else{let g=an(t);c=kD(e.serverSyncTree_,o,g,i)}else if(r){let g=vc(t,m=>an(m));c=o5(e.serverSyncTree_,o,g)}else{let g=an(t);c=Xc(e.serverSyncTree_,o,g)}let h=o;c.length>0&&(h=Ua(e,o)),Ir(e.eventQueue_,h,c)}function WS(e,n){dw(e,"connected",n),n===!1&&L5(e)}function O5(e,n){Nn(n,(t,r)=>{dw(e,t,r)})}function dw(e,n,t){let r=new ht("/.info/"+n),i=an(t);e.infoData_.updateSnapshot(r,i);let o=Xc(e.infoSyncTree_,r,i);Ir(e.eventQueue_,r,o)}function fw(e){return e.nextWriteId_++}function R5(e,n,t){let r=c5(e.serverSyncTree_,n);return r!=null?Promise.resolve(r):e.server_.get(n).then(i=>{let o=an(i).withIndex(n._queryParams.getIndex());Oy(e.serverSyncTree_,n,t,!0);let c;if(n._queryParams.loadsAllData())c=Xc(e.serverSyncTree_,n._path,o);else{let h=zc(e.serverSyncTree_,n);c=kD(e.serverSyncTree_,n._path,o,h)}return Ir(e.eventQueue_,n._path,c),bh(e.serverSyncTree_,n,t,null,!0),o},i=>(Qc(e,"get for query "+Qt(n)+" failed: "+i),Promise.reject(new Error(i))))}function P5(e,n,t,r,i){Qc(e,"set",{path:n.toString(),value:t,priority:r});let o=kh(e),c=an(t,r),h=rw(e.serverSyncTree_,n),g=UD(c,h,o),m=fw(e),v=PD(e.serverSyncTree_,n,g,m,!0);Ph(e.eventQueue_,v),e.server_.put(n.toString(),c.val(!0),(I,A)=>{let R=I==="ok";R||zn("set at "+n+" failed: "+I);let j=vo(e.serverSyncTree_,m,!R);Ir(e.eventQueue_,n,j),By(e,i,I,A)});let x=pw(e,n);Ua(e,x),Ir(e.eventQueue_,x,[])}function k5(e,n,t,r){Qc(e,"update",{path:n.toString(),value:t});let i=!0,o=kh(e),c={};if(Nn(t,(h,g)=>{i=!1,c[h]=VD(Ht(n,h),an(g),e.serverSyncTree_,o)}),i)Mn("update() called with empty data.  Don't do anything."),By(e,r,"ok",void 0);else{let h=fw(e),g=i5(e.serverSyncTree_,n,c,h);Ph(e.eventQueue_,g),e.server_.merge(n.toString(),t,(m,v)=>{let x=m==="ok";x||zn("update at "+n+" failed: "+m);let I=vo(e.serverSyncTree_,h,!x),A=I.length>0?Ua(e,n):n;Ir(e.eventQueue_,A,I),By(e,r,m,v)}),Nn(t,m=>{let v=pw(e,Ht(n,m));Ua(e,v)}),Ir(e.eventQueue_,n,[])}}function L5(e){Qc(e,"onDisconnectEvents");let n=kh(e),t=hh();Cy(e.onDisconnect_,st(),(i,o)=>{let c=VD(i,o,e.serverSyncTree_,n);_D(t,i,c)});let r=[];Cy(t,st(),(i,o)=>{r=r.concat(Xc(e.serverSyncTree_,i,o));let c=pw(e,i);Ua(e,c)}),e.onDisconnect_=hh(),Ir(e.eventQueue_,st(),r)}function F5(e,n,t){let r;We(n._path)===".info"?r=Oy(e.infoSyncTree_,n,t):r=Oy(e.serverSyncTree_,n,t),qD(e.eventQueue_,n._path,r)}function GS(e,n,t){let r;We(n._path)===".info"?r=bh(e.infoSyncTree_,n,t):r=bh(e.serverSyncTree_,n,t),qD(e.eventQueue_,n._path,r)}function B5(e){e.persistentConnection_&&e.persistentConnection_.interrupt(T5)}function Qc(e,...n){let t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":"),Mn(t,...n)}function By(e,n,t,r){n&&Ha(()=>{if(t==="ok")n(null);else{let i=(t||"error").toUpperCase(),o=i;r&&(o+=": "+r);let c=new Error(o);c.code=i,n(c)}})}function ZD(e,n,t){return rw(e.serverSyncTree_,n,t)||Oe.EMPTY_NODE}function hw(e,n=e.transactionQueueTree_){if(n||Lh(e,n),Wa(n)){let t=KD(e,n);Q(t.length>0,"Sending zero length transaction queue"),t.every(i=>i.status===0)&&V5(e,Zc(n),t)}else HD(n)&&Oh(n,t=>{hw(e,t)})}function V5(e,n,t){let r=t.map(m=>m.currentWriteId),i=ZD(e,n,r),o=i,c=i.hash();for(let m=0;m<t.length;m++){let v=t[m];Q(v.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),v.status=1,v.retryCount++;let x=Hn(n,v.path);o=o.updateChild(x,v.currentOutputSnapshotRaw)}let h=o.val(!0),g=n;e.server_.put(g.toString(),h,m=>{Qc(e,"transaction put response",{path:g.toString(),status:m});let v=[];if(m==="ok"){let x=[];for(let I=0;I<t.length;I++)t[I].status=2,v=v.concat(vo(e.serverSyncTree_,t[I].currentWriteId)),t[I].onComplete&&x.push(()=>t[I].onComplete(null,!0,t[I].currentOutputSnapshotResolved)),t[I].unwatcher();Lh(e,lw(e.transactionQueueTree_,n)),hw(e,e.transactionQueueTree_),Ir(e.eventQueue_,n,v);for(let I=0;I<x.length;I++)Ha(x[I])}else{if(m==="datastale")for(let x=0;x<t.length;x++)t[x].status===3?t[x].status=4:t[x].status=0;else{zn("transaction at "+g.toString()+" failed: "+m);for(let x=0;x<t.length;x++)t[x].status=4,t[x].abortReason=m}Ua(e,n)}},c)}function Ua(e,n){let t=QD(e,n),r=Zc(t),i=KD(e,t);return U5(e,i,r),r}function U5(e,n,t){if(n.length===0)return;let r=[],i=[],c=n.filter(h=>h.status===0).map(h=>h.currentWriteId);for(let h=0;h<n.length;h++){let g=n[h],m=Hn(t,g.path),v=!1,x;if(Q(m!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),g.status===4)v=!0,x=g.abortReason,i=i.concat(vo(e.serverSyncTree_,g.currentWriteId,!0));else if(g.status===0)if(g.retryCount>=M5)v=!0,x="maxretry",i=i.concat(vo(e.serverSyncTree_,g.currentWriteId,!0));else{let I=ZD(e,g.path,c);g.currentInputSnapshot=I;let A=n[h].update(I.val());if(A!==void 0){Rh("transaction failed: Data returned ",A,g.path);let R=an(A);typeof A=="object"&&A!=null&&Zr(A,".priority")||(R=R.updatePriority(I.getPriority()));let $=g.currentWriteId,W=kh(e),ce=UD(R,I,W);g.currentOutputSnapshotRaw=R,g.currentOutputSnapshotResolved=ce,g.currentWriteId=fw(e),c.splice(c.indexOf($),1),i=i.concat(PD(e.serverSyncTree_,g.path,ce,g.currentWriteId,g.applyLocally)),i=i.concat(vo(e.serverSyncTree_,$,!0))}else v=!0,x="nodata",i=i.concat(vo(e.serverSyncTree_,g.currentWriteId,!0))}Ir(e.eventQueue_,t,i),i=[],v&&(n[h].status=2,function(I){setTimeout(I,Math.floor(0))}(n[h].unwatcher),n[h].onComplete&&(x==="nodata"?r.push(()=>n[h].onComplete(null,!1,n[h].currentInputSnapshot)):r.push(()=>n[h].onComplete(new Error(x),!1,null))))}Lh(e,e.transactionQueueTree_);for(let h=0;h<r.length;h++)Ha(r[h]);hw(e,e.transactionQueueTree_)}function QD(e,n){let t,r=e.transactionQueueTree_;for(t=We(n);t!==null&&Wa(r)===void 0;)r=lw(r,t),n=Dt(n),t=We(n);return r}function KD(e,n){let t=[];return JD(e,n,t),t.sort((r,i)=>r.order-i.order),t}function JD(e,n,t){let r=Wa(n);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);Oh(n,i=>{JD(e,i,t)})}function Lh(e,n){let t=Wa(n);if(t){let r=0;for(let i=0;i<t.length;i++)t[i].status!==2&&(t[r]=t[i],r++);t.length=r,jD(n,t.length>0?t:void 0)}Oh(n,r=>{Lh(e,r)})}function pw(e,n){let t=Zc(QD(e,n)),r=lw(e.transactionQueueTree_,n);return w5(r,i=>{q1(e,i)}),q1(e,r),zD(r,i=>{q1(e,i)}),t}function q1(e,n){let t=Wa(n);if(t){let r=[],i=[],o=-1;for(let c=0;c<t.length;c++)t[c].status===3||(t[c].status===1?(Q(o===c-1,"All SENT items should be at beginning of queue."),o=c,t[c].status=3,t[c].abortReason="set"):(Q(t[c].status===0,"Unexpected transaction status in abort"),t[c].unwatcher(),i=i.concat(vo(e.serverSyncTree_,t[c].currentWriteId,!0)),t[c].onComplete&&r.push(t[c].onComplete.bind(null,new Error("set"),!1,null))));o===-1?jD(n,void 0):t.length=o+1,Ir(e.eventQueue_,Zc(n),i);for(let c=0;c<r.length;c++)Ha(r[c])}}function j5(e){let n="",t=e.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}n+="/"+i}return n}function H5(e){let n={};e.charAt(0)==="?"&&(e=e.substring(1));for(let t of e.split("&")){if(t.length===0)continue;let r=t.split("=");r.length===2?n[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):zn(`Invalid query segment '${t}' in query '${e}'`)}return n}var $S=function(e,n){let t=z5(e),r=t.namespace;t.domain==="firebase.com"&&$i(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&t.domain!=="localhost"&&$i("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||_6();let i=t.scheme==="ws"||t.scheme==="wss";return{repoInfo:new oh(t.host,t.secure,r,i,n,"",r!==t.subdomain),path:new ht(t.pathString)}},z5=function(e){let n="",t="",r="",i="",o="",c=!0,h="https",g=443;if(typeof e=="string"){let m=e.indexOf("//");m>=0&&(h=e.substring(0,m-1),e=e.substring(m+2));let v=e.indexOf("/");v===-1&&(v=e.length);let x=e.indexOf("?");x===-1&&(x=e.length),n=e.substring(0,Math.min(v,x)),v<x&&(i=j5(e.substring(v,x)));let I=H5(e.substring(Math.min(e.length,x)));m=n.indexOf(":"),m>=0?(c=h==="https"||h==="wss",g=parseInt(n.substring(m+1),10)):m=n.length;let A=n.slice(0,m);if(A.toLowerCase()==="localhost")t="localhost";else if(A.split(".").length<=2)t=A;else{let R=n.indexOf(".");r=n.substring(0,R).toLowerCase(),t=n.substring(R+1),o=r}"ns"in I&&(o=I.ns)}return{host:n,port:g,domain:t,subdomain:r,secure:c,scheme:h,pathString:i,namespace:o}};var qS="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",W5=function(){let e=0,n=[];return function(t){let r=t===e;e=t;let i,o=new Array(8);for(i=7;i>=0;i--)o[i]=qS.charAt(t%64),t=Math.floor(t/64);Q(t===0,"Cannot push at time == 0");let c=o.join("");if(r){for(i=11;i>=0&&n[i]===63;i--)n[i]=0;n[i]++}else for(i=0;i<12;i++)n[i]=Math.floor(Math.random()*64);for(i=0;i<12;i++)c+=qS.charAt(n[i]);return Q(c.length===20,"nextPushId: Length should be 20."),c}}();var Eh=class{constructor(n,t,r,i){this.eventType=n,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){let n=this.snapshot.ref;return this.eventType==="value"?n._path:n.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Qt(this.snapshot.exportVal())}},Ih=class{constructor(n,t,r){this.eventRegistration=n,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}};var Sh=class{constructor(n,t){this.snapshotCallback=n,this.cancelCallback=t}onValue(n,t){this.snapshotCallback.call(null,n,t)}onCancel(n){return Q(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,n)}get hasCancelCallback(){return!!this.cancelCallback}matches(n){return this.snapshotCallback===n.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===n.snapshotCallback.userCallback&&this.snapshotCallback.context===n.snapshotCallback.context}};var Vy=class e{constructor(n,t,r,i){this._repo=n,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return qe(this._path)?null:qy(this._path)}get ref(){return new Ci(this._repo,this._path)}get _queryIdentifier(){let n=OS(this._queryParams),t=Gy(n);return t==="{}"?"default":t}get _queryObject(){return OS(this._queryParams)}isEqual(n){if(n=wo(n),!(n instanceof e))return!1;let t=this._repo===n._repo,r=Yy(this._path,n._path),i=this._queryIdentifier===n._queryIdentifier;return t&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+J6(this._path)}};var Ci=class e extends Vy{constructor(n,t){super(n,t,new my,!1)}get parent(){let n=hD(this._path);return n===null?null:new e(this._repo,n)}get root(){let n=this;for(;n.parent!==null;)n=n.parent;return n}},Gc=class e{constructor(n,t,r){this._node=n,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(n){let t=new ht(n),r=ja(this.ref,n);return new e(this._node.getChild(t),r,zt)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(n){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>n(new e(i,ja(this.ref,r),zt)))}hasChild(n){let t=new ht(n);return!this._node.getChild(t).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}};function J(e,n){return e=wo(e),e._checkNotDeleted("ref"),n!==void 0?ja(e._root,n):e._root}function ja(e,n){return e=wo(e),We(e._path)===null?S5("child","path",n,!1):$D("child","path",n,!1),new Ci(e._repo,Ht(e._path,n))}function e2(e,n){e=wo(e),uw("push",e._path),GD("push",n,e._path,!0);let t=XD(e._repo),r=W5(t),i=ja(e,r),o=ja(e,r),c;return n!=null?c=So(o,n).then(()=>o):c=Promise.resolve(o),i.then=c.then.bind(c),i.catch=c.then.bind(c,void 0),i}function Sr(e){return uw("remove",e._path),So(e,null)}function So(e,n){e=wo(e),uw("set",e._path),GD("set",n,e._path,!1);let t=new zi;return P5(e._repo,e._path,n,null,t.wrapCallback(()=>{})),t.promise}function mt(e,n){I5("update",n,e._path,!1);let t=new zi;return k5(e._repo,e._path,n,t.wrapCallback(()=>{})),t.promise}function ye(e){e=wo(e);let n=new Sh(()=>{}),t=new Dh(n);return R5(e._repo,e,t).then(r=>new Gc(r,new Ci(e._repo,e._path),e._queryParams.getIndex()))}var Dh=class e{constructor(n){this.callbackContext=n}respondsTo(n){return n==="value"}createEvent(n,t){let r=t._queryParams.getIndex();return new Eh("value",this,new Gc(n.snapshotNode,new Ci(t._repo,t._path),r))}getEventRunner(n){return n.getEventType()==="cancel"?()=>this.callbackContext.onCancel(n.error):()=>this.callbackContext.onValue(n.snapshot,null)}createCancelEvent(n,t){return this.callbackContext.hasCancelCallback?new Ih(this,n,t):null}matches(n){return n instanceof e?!n.callbackContext||!this.callbackContext?!0:n.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}},Uy=class e{constructor(n,t){this.eventType=n,this.callbackContext=t}respondsTo(n){let t=n==="children_added"?"child_added":n;return t=t==="children_removed"?"child_removed":t,this.eventType===t}createCancelEvent(n,t){return this.callbackContext.hasCancelCallback?new Ih(this,n,t):null}createEvent(n,t){Q(n.childName!=null,"Child events should have a childName.");let r=ja(new Ci(t._repo,t._path),n.childName),i=t._queryParams.getIndex();return new Eh(n.type,this,new Gc(n.snapshotNode,r,i),n.prevName)}getEventRunner(n){return n.getEventType()==="cancel"?()=>this.callbackContext.onCancel(n.error):()=>this.callbackContext.onValue(n.snapshot,n.prevName)}matches(n){return n instanceof e?this.eventType===n.eventType&&(!this.callbackContext||!n.callbackContext||this.callbackContext.matches(n.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}};function G5(e,n,t,r,i){let o;if(typeof r=="object"&&(o=void 0,i=r),typeof r=="function"&&(o=r),i&&i.onlyOnce){let g=t,m=(v,x)=>{GS(e._repo,e,h),g(v,x)};m.userCallback=t.userCallback,m.context=t.context,t=m}let c=new Sh(t,o||void 0),h=n==="value"?new Dh(c):new Uy(n,c);return F5(e._repo,e,h),()=>GS(e._repo,e,h)}function t2(e,n,t,r){return G5(e,"value",n,t,r)}ZB(Ci);t5(Ci);var $5="FIREBASE_DATABASE_EMULATOR_HOST",jy={},q5=!1;function Y5(e,n,t,r){e.repoInfo_=new oh(`${n}:${t}`,!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0),r&&(e.authTokenProvider_=r)}function X5(e,n,t,r,i){let o=r||e.options.databaseURL;o===void 0&&(e.options.projectId||$i("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Mn("Using default host for project ",e.options.projectId),o=`${e.options.projectId}-default-rtdb.firebaseio.com`);let c=$S(o,i),h=c.repoInfo,g,m;typeof process<"u"&&process.env&&(m=process.env[$5]),m?(g=!0,o=`http://${m}?ns=${h.namespace}`,c=$S(o,i),h=c.repoInfo):g=!c.repoInfo.secure;let v=i&&g?new Rc(Rc.OWNER):new J1(e.name,e.options,n);D5("Invalid Firebase Database URL",c),qe(c.path)||$i("Database URL must point to the root of a Firebase Database (not including a child path).");let x=Q5(h,e,v,new K1(e.name,t));return new Hy(x,e)}function Z5(e,n){let t=jy[n];(!t||t[e.key]!==e)&&$i(`Database ${n}(${e.repoInfo_}) has already been deleted.`),B5(e),delete t[e.key]}function Q5(e,n,t,r){let i=jy[n.name];i||(i={},jy[n.name]=i);let o=i[e.toURLString()];return o&&$i("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new Fy(e,q5,t,r),i[e.toURLString()]=o,o}var Hy=class{constructor(n,t){this._repoInternal=n,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(N5(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Ci(this._repo,st())),this._rootInternal}_delete(){return this._rootInternal!==null&&(Z5(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(n){this._rootInternal===null&&$i("Cannot call "+n+" on a deleted database.")}};function ee(e=fS(),n){let t=uS(e,"database").getImmediate({identifier:n});if(!t._instanceStarted){let r=HI("database");r&&K5(t,...r)}return t}function K5(e,n,t,r={}){e=wo(e),e._checkNotDeleted("useEmulator"),e._instanceStarted&&$i("Cannot call useEmulator() after instance has already been initialized.");let i=e._repoInternal,o;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&$i('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new Rc(Rc.OWNER);else if(r.mockUserToken){let c=typeof r.mockUserToken=="string"?r.mockUserToken:zI(r.mockUserToken,e.app.options.projectId);o=new Rc(c)}Y5(i,n,t,o)}function J5(e){y6(dS),Ic(new Wi("database",(n,{instanceIdentifier:t})=>{let r=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),o=n.getProvider("app-check-internal");return X5(r,i,o,t)},"PUBLIC").setMultipleInstances(!0)),_o(gS,mS,e),_o(gS,mS,"esm2017")}Xy.prototype.simpleListen=function(e,n){this.sendRequest("q",{p:e},n)};Xy.prototype.echo=function(e,n){this.sendRequest("echo",{d:e},n)};J5();var De={production:!0,firebaseConfig:{apiKey:"AIzaSyC2ak3O4qovvrDLGJ-L3a6E1uLASES2xuU",authDomain:"tablefi-31087.firebaseapp.com",databaseURL:"https://tablefi-31087-default-rtdb.europe-west1.firebasedatabase.app",projectId:"tablefi-31087",storageBucket:"tablefi-31087.appspot.com",messagingSenderId:"821585389969",appId:"1:821585389969:web:9383409a2e5fbf601b5230",measurementId:"G-QXT5KZEKGZ"}};var n2=(()=>{class e{db;constructor(){let t=_e(De.firebaseConfig);this.db=ee(t)}login(t,r){return new Fe(i=>{let o=J(this.db,"Owners");ye(o).then(c=>{if(c.exists()){let h=c.val(),m=Object.values(h).find(v=>v.email===t);m?m.password===r?i.next(m):i.error("Invalid password"):i.error("No user found with this email")}else i.error("No owners found in the database")}).catch(c=>{console.error("Error fetching owners:",c),i.error("An error occurred while fetching owners")})}).pipe(yr(i=>(console.error("Error during login:",i),vt([null]))))}static \u0275fac=function(r){return new(r||e)};static \u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var be=(()=>{class e{router;constructor(t){this.router=t}NavigateTo(t){this.router.navigate([t])}static \u0275fac=function(r){return new(r||e)(He(pi))};static \u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var r2=(()=>{class e{loginService;navigationService;email="";password="";constructor(t,r){this.loginService=t,this.navigationService=r}onSubmit(t){t.preventDefault(),this.loginService.login(this.email,this.password).subscribe({next:r=>{r&&(sessionStorage.setItem("userId",r.id),sessionStorage.setItem("userEmail",r.email),sessionStorage.setItem("uniqueLinkToken",r.uniqueLinkToken),console.log("User logged in:",r),this.navigationService.NavigateTo("changerestaurant"))},error:r=>{alert(r),console.error("Login error:",r)}})}goToPage(t){this.navigationService.NavigateTo(t)}static \u0275fac=function(r){return new(r||e)(Z(n2),Z(be))};static \u0275cmp=ie({type:e,selectors:[["app-login"]],standalone:!0,features:[oe],decls:20,vars:2,consts:[[1,"layoutbox"],[1,"head"],[1,"logo"],["src","https://cdn1.mandarin.com.pl/eologo.png","alt","EasyOrder",1,"w-full"],[1,"backbtn",3,"click"],[1,"material-symbols-rounded"],[1,"loginform"],[3,"ngSubmit"],["type","email","id","email","name","email","required","",3,"ngModelChange","ngModel"],["type","password","id","password","name","password","required","",3,"ngModelChange","ngModel"],["type","submit",1,"login"],[1,"footstatic"]],template:function(r,i){r&1&&(M(0,"main")(1,"div",0)(2,"div",1)(3,"div",2),le(4,"img",3),N(),M(5,"div",4),Y("click",function(){return i.goToPage("landingpage")}),M(6,"span",5),P(7," arrow_back "),N()()(),M(8,"div",6)(9,"form",7),Y("ngSubmit",function(c){return i.onSubmit(c)}),M(10,"div"),P(11," Email "),M(12,"input",8),it("ngModelChange",function(c){return ot(i.email,c)||(i.email=c),c}),N()(),M(13,"div"),P(14," Has\u0142o "),M(15,"input",9),it("ngModelChange",function(c){return ot(i.password,c)||(i.password=c),c}),N()(),le(16,"div"),M(17,"button",10),P(18,"Zaloguj"),N()()(),le(19,"div",11),N()()),r&2&&(X(12),rt("ngModel",i.email),X(3),rt("ngModel",i.password))},dependencies:[jt,er,Zt,mn,Jn,Tn,sn,jn],styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;justify-content:space-between;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{width:100%;height:64px;padding:0 32px;border-bottom:3px solid #000;display:flex;justify-content:space-between;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{margin:8px 0;height:48px}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .backbtn[_ngcontent-%COMP%]{height:48px;font-size:48px;font-weight:700;display:flex;justify-content:center;align-items:center;margin:8px 0}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .backbtn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{height:48px;font-size:48px;font-weight:700}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]{width:75%;display:flex;flex-direction:column;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:100%}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-weight:bolder;font-size:110%;margin-bottom:16px}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;background:#fff;padding:16px;font-size:110%;border-radius:16px;color:#000;font-weight:600;letter-spacing:2px;border:3px solid #000;transition:all .5s;margin-bottom:24px}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#333}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;background:#000;padding:16px;font-size:110%;color:#fff;font-weight:600;letter-spacing:2px;border:none;transition:all .5s;border-radius:16px;cursor:pointer}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#333}"]})}return e})();var i2=(()=>{class e{db;constructor(){let t=_e(De.firebaseConfig);this.db=ee(t)}emailExists(t){let r=J(this.db,"Owners");return vt(ye(r)).pipe(Be(i=>{if(i.exists()){let o=i.val();return Object.values(o).map(h=>h.email).includes(t)}return!1}),yr(i=>(console.error("Error checking email existence:",i),vt([!1]))))}register(t){let r=J(this.db,"Owners"),i=e2(r);return new Fe(o=>{So(i,Le(ne({},t),{id:i.key})).then(()=>{o.next(i),o.complete()}).catch(c=>{o.error(c)})})}static \u0275fac=function(r){return new(r||e)};static \u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var o2=(()=>{class e{registrationService;navigationService;email="";password="";confirmPassword="";constructor(t,r){this.registrationService=t,this.navigationService=r}onSubmit(t){if(t.preventDefault(),this.password!==this.confirmPassword){alert("Has\u0142a nie pasuj\u0105 do siebie!");return}this.registrationService.emailExists(this.email).subscribe(r=>{if(r){alert("Email jest ju\u017C zarejestrowany!");return}let i={name:this.email.split("@")[0],email:this.email,password:this.password,uniqueLinkToken:this.generateUniqueLinkToken(16)};this.registrationService.register(i).subscribe({next:o=>{let c=o.key;c?(sessionStorage.setItem("userId",c),sessionStorage.setItem("userEmail",i.email),sessionStorage.setItem("uniqueLinkToken",i.uniqueLinkToken),this.navigationService.NavigateTo("newrestaurant")):console.error("Nie uda\u0142o si\u0119 uzyska\u0107 ownerId z Firebase.")},error:o=>{console.error("Registration failed:",o)}})})}generateUniqueLinkToken(t=16){let r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i="";for(let o=0;o<t;o++)i+=r.charAt(Math.floor(Math.random()*r.length));return i}goToPage(t){this.navigationService.NavigateTo(t)}static \u0275fac=function(r){return new(r||e)(Z(i2),Z(be))};static \u0275cmp=ie({type:e,selectors:[["app-register"]],standalone:!0,features:[oe],decls:22,vars:3,consts:[[1,"layoutbox"],[1,"head"],[1,"logo"],["src","https://cdn1.mandarin.com.pl/eologo.png","alt","EasyOrder",1,"w-full"],[1,"backbtn",3,"click"],[1,"material-symbols-rounded"],[1,"loginform"],[3,"ngSubmit"],["type","email","id","email","name","email","required","",3,"ngModelChange","ngModel"],["type","password","id","password","name","password","required","",3,"ngModelChange","ngModel"],["type","password","id","confirmPassword","name","confirmPassword","required","",3,"ngModelChange","ngModel"],["type","submit",1,"register"]],template:function(r,i){r&1&&(M(0,"main")(1,"div",0)(2,"div",1)(3,"div",2),le(4,"img",3),N(),M(5,"div",4),Y("click",function(){return i.goToPage("landingpage")}),M(6,"span",5),P(7," arrow_back "),N()()(),M(8,"div",6)(9,"form",7),Y("ngSubmit",function(c){return i.onSubmit(c)}),M(10,"div"),P(11," E-mail "),M(12,"input",8),it("ngModelChange",function(c){return ot(i.email,c)||(i.email=c),c}),N()(),M(13,"div"),P(14," Has\u0142o "),M(15,"input",9),it("ngModelChange",function(c){return ot(i.password,c)||(i.password=c),c}),N()(),M(16,"div"),P(17," Powt\xF3rz has\u0142o "),M(18,"input",10),it("ngModelChange",function(c){return ot(i.confirmPassword,c)||(i.confirmPassword=c),c}),N()(),M(19,"button",11),P(20,"Zarejestruj"),N()()(),le(21,"div"),N()()),r&2&&(X(12),rt("ngModel",i.email),X(3),rt("ngModel",i.password),X(3),rt("ngModel",i.confirmPassword))},dependencies:[jt,er,Zt,mn,Jn,Tn,sn,jn],styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;justify-content:space-between;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{width:100%;height:64px;padding:0 32px;border-bottom:3px solid #000;display:flex;justify-content:space-between;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{margin:8px 0;height:48px}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .backbtn[_ngcontent-%COMP%]{height:48px;font-size:48px;font-weight:700;display:flex;justify-content:center;align-items:center;margin:8px 0}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .backbtn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{height:48px;font-size:48px;font-weight:700}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]{width:75%;display:flex;flex-direction:column;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:100%}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-weight:bolder;font-size:110%;margin-bottom:16px}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;background:#fff;padding:16px;font-size:110%;border-radius:16px;color:#000;font-weight:600;letter-spacing:2px;border:3px solid #000;transition:all .5s;margin-bottom:24px}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#333}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;background:#000;padding:16px;font-size:110%;color:#fff;font-weight:600;letter-spacing:2px;border:none;transition:all .5s;border-radius:16px;cursor:pointer}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#333}"]})}return e})();var gw=(()=>{class e{navigationService;constructor(t){this.navigationService=t}goToPage(t){this.navigationService.NavigateTo(t)}static \u0275fac=function(r){return new(r||e)(Z(be))};static \u0275cmp=ie({type:e,selectors:[["app-landing-page"]],standalone:!0,features:[oe],decls:9,vars:0,consts:[[1,"w-full","h-full","m-0","p-8","flex","flex-row","flex-nowrap","justify-center","items-center"],[1,"w-3/5","h-full","flex","flex-col","flex-nowrap","justify-center","items-center","relative"],[1,"text-[110%]","w-full","flex","flex-col","flex-nowrap","justify-center","items-center","mb-12"],["src","https://cdn1.mandarin.com.pl/eologo.png","alt","EasyOrder",1,"w-full"],[1,"w-full","flex","flex-col","flex-nowrap","justify-center","items-center"],[1,"w-full","bg-black","p-4","text-[110%]","text-white","font-semibold","tracking-widest","border-none","rounded-lg","transition-all","duration-500","mb-4","hover:bg-[#292929]",3,"click"],[1,"w-full","bg-black","p-4","text-[110%]","text-white","font-semibold","tracking-widest","border-none","rounded-lg","transition-all","duration-500","hover:bg-[#292929]",3,"click"]],template:function(r,i){r&1&&(M(0,"main",0)(1,"div",1)(2,"div",2),le(3,"img",3),N(),M(4,"div",4)(5,"button",5),Y("click",function(){return i.goToPage("register")}),P(6," Zarejestruj si\u0119 "),N(),M(7,"button",6),Y("click",function(){return i.goToPage("login")}),P(8," Zaloguj si\u0119 "),N()()()())},encapsulation:2})}return e})();var s2=(()=>{class e{navigationService;name="";address="";constructor(t){this.navigationService=t;let r=_e(De.firebaseConfig)}onSubmit(t){t.preventDefault();let r=sessionStorage.getItem("uniqueLinkToken"),i=sessionStorage.getItem("userId");if(!i){alert("You must be logged in to create a restaurant.");return}let o={id:Date.now().toString(),name:this.name,address:this.address,uniqueLinkToken:r||"",settings:{table_change_allowed:!0,table_block_allowed:!0,order_number_typed_by_waiter_required:!0,waiter_access_pin:1234},TableGroups:[],Tables:[],Orders:[]};this.saveRestaurant(o,i)}saveRestaurant(t,r){let i=ee(),o=t.id,c=J(i,`Owners/${r}/Restaurants/${o}`);So(c,t).then(()=>{console.log("Restaurant added successfully:",t),this.navigationService.NavigateTo("changerestaurant"),this.resetForm()}).catch(h=>{console.error("Error adding restaurant:",h)})}resetForm(){this.name="",this.address=""}goToPage(t){this.navigationService.NavigateTo(t)}static \u0275fac=function(r){return new(r||e)(Z(be))};static \u0275cmp=ie({type:e,selectors:[["app-newrestaurant"]],standalone:!0,features:[oe],decls:20,vars:2,consts:[[1,"layoutbox"],[1,"head"],[1,"logo"],["src","https://cdn1.mandarin.com.pl/eologo.png","alt","EasyOrder",1,"w-full"],[1,"backbtn",3,"click"],[1,"material-symbols-rounded"],[1,"form"],[3,"ngSubmit"],["type","text","id","name","name","name","required","",3,"ngModelChange","ngModel"],["type","text","id","adress","name","adress","required","",3,"ngModelChange","ngModel"],["type","submit",1,"addrestaurant"],[1,"footstatic"]],template:function(r,i){r&1&&(M(0,"main")(1,"div",0)(2,"div",1)(3,"div",2),le(4,"img",3),N(),M(5,"div",4),Y("click",function(){return i.goToPage("landingpage")}),M(6,"span",5),P(7," arrow_back "),N()()(),M(8,"div",6)(9,"form",7),Y("ngSubmit",function(c){return i.onSubmit(c)}),M(10,"div"),P(11," Nazwa restauracji "),M(12,"input",8),it("ngModelChange",function(c){return ot(i.name,c)||(i.name=c),c}),N()(),M(13,"div"),P(14," Adres "),M(15,"input",9),it("ngModelChange",function(c){return ot(i.address,c)||(i.address=c),c}),N()(),le(16,"div"),M(17,"button",10),P(18,"Dodaj"),N()()(),le(19,"div",11),N()()),r&2&&(X(12),rt("ngModel",i.name),X(3),rt("ngModel",i.address))},dependencies:[jt,er,Zt,mn,Jn,Tn,sn,jn],styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;justify-content:space-between;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{width:100%;height:64px;padding:0 32px;border-bottom:3px solid #000;display:flex;justify-content:space-between;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{margin:8px 0;height:48px}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .backbtn[_ngcontent-%COMP%]{height:48px;font-size:48px;font-weight:700;display:flex;justify-content:center;align-items:center;margin:8px 0}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .backbtn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{height:48px;font-size:48px;font-weight:700}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]{width:75%;display:flex;flex-direction:column;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:100%}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-weight:bolder;font-size:110%;margin-bottom:16px}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;background:#fff;padding:16px;font-size:110%;border-radius:16px;color:#000;font-weight:600;letter-spacing:2px;border:3px solid #000;transition:all .5s;margin-bottom:24px}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#333}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;background:#000;padding:16px;font-size:110%;color:#fff;font-weight:600;letter-spacing:2px;border:none;transition:all .5s;border-radius:16px;cursor:pointer}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#333}"]})}return e})();var a2=(()=>{class e{navigationService;constructor(t){this.navigationService=t}goToPage(t){this.navigationService.NavigateTo(t)}static \u0275fac=function(r){return new(r||e)(Z(be))};static \u0275cmp=ie({type:e,selectors:[["app-restaurantmanage"]],standalone:!0,features:[oe],decls:16,vars:0,consts:[[1,"layoutbox"],[1,"logo"],["src","https://cdn1.mandarin.com.pl/eologo.png","alt","EasyOrder"],[1,"buttons"],[1,"tablemanage",3,"click"],[1,"settings",3,"click"],[1,"revievs",3,"click"],[1,"stats",3,"click"],[1,"bilings",3,"click"],[1,"footstatic"]],template:function(r,i){r&1&&(M(0,"main")(1,"div",0)(2,"div",1),le(3,"img",2),N(),M(4,"div",3)(5,"button",4),Y("click",function(){return i.goToPage("tablemanage")}),P(6,"Zarz\u0105dzanie stolikami"),N(),M(7,"button",5),Y("click",function(){return i.goToPage("restaurantsettings")}),P(8,"Ustawienia"),N(),M(9,"button",6),Y("click",function(){return i.goToPage("restaurantrevievs")}),P(10,"Opinie restauracji"),N(),M(11,"button",7),Y("click",function(){return i.goToPage("restaurantstats")}),P(12,"Statystyki"),N(),M(13,"button",8),Y("click",function(){return i.goToPage("restaurantbilings")}),P(14,"P\u0142atno\u015Bci"),N()(),le(15,"div",9),N()())},dependencies:[jt],styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;padding:0;position:relative}.layoutbox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:space-evenly;align-items:center;align-content:center;position:relative}.logo[_ngcontent-%COMP%]{display:flex;font-size:45%;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center}.logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:80px}.buttons[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center}.buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;background:#fff;padding:24px;font-size:110%;color:#000;font-weight:600;letter-spacing:2px;border-bottom:3px solid #000000;transition:all .5s;margin-bottom:0;font-weight:700}.buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-child{border-top:#000000 solid 3px}"]})}return e})();var Fh={production:!0,firebaseConfig:{apiKey:"AIzaSyC2ak3O4qovvrDLGJ-L3a6E1uLASES2xuU",authDomain:"tablefi-31087.firebaseapp.com",databaseURL:"https://tablefi-31087-default-rtdb.europe-west1.firebasedatabase.app",projectId:"tablefi-31087",storageBucket:"tablefi-31087.appspot.com",messagingSenderId:"821585389969",appId:"1:821585389969:web:9383409a2e5fbf601b5230",measurementId:"G-QXT5KZEKGZ"}};function n7(e,n){e&1&&(M(0,"p"),P(1,"Brak restauracji przypisanych do konta."),N())}function r7(e,n){if(e&1){let t=Gt();M(0,"button",9),Y("click",function(){let i=Rt(t).$implicit,o=Qe(2);return Pt(o.setRestaurant(i.id))}),M(1,"p",10),P(2),N(),M(3,"p",11),P(4),N()()}if(e&2){let t=n.$implicit;X(2),on(t.name),X(2),on(t.address)}}function i7(e,n){if(e&1&&pn(0,r7,5,2,"button",8,hn),e&2){let t=Qe();gn(t.restaurants)}}var l2=(()=>{class e{navigationService;restaurants=[];db;constructor(t){this.navigationService=t;let r=_e(Fh.firebaseConfig);this.db=ee(r)}ngOnInit(){this.loadRestaurants()}loadRestaurants(){let t=sessionStorage.getItem("userId"),r=J(this.db,`Owners/${t}/Restaurants`);ye(r).then(i=>{if(i.exists()){let o=i.val();this.restaurants=Object.values(o),this.restaurants.length===1&&(localStorage.setItem("currentRestaurant",this.restaurants[0].id.toString()),console.log(this.restaurants[0].id.toString()),this.navigationService.NavigateTo("managerestaurant"))}else console.log("No restaurants found for this owner.")}).catch(i=>{console.error("Error loading restaurants:",i)})}setRestaurant(t){localStorage.setItem("currentRestaurant",t),this.navigationService.NavigateTo("managerestaurant")}goToPage(t){this.navigationService.NavigateTo(t)}static \u0275fac=function(r){return new(r||e)(Z(be))};static \u0275cmp=ie({type:e,selectors:[["app-changerestaurant"]],standalone:!0,features:[oe],decls:12,vars:1,consts:[[1,"layoutbox"],[1,"head"],[1,"logo"],["src","https://cdn1.mandarin.com.pl/eologo.png","alt","EasyOrder",1,"w-full"],[1,"backbtn",3,"click"],[1,"material-symbols-rounded"],[1,"restaurants"],[1,"footstatic"],[1,"restaurant"],[1,"restaurant",3,"click"],["id","datavalve"],["id","datavalve2"]],template:function(r,i){r&1&&(M(0,"main")(1,"div",0)(2,"div",1)(3,"div",2),le(4,"img",3),N(),M(5,"div",4),Y("click",function(){return i.goToPage("managerestaurant")}),M(6,"span",5),P(7," arrow_back "),N()()(),M(8,"div",6),Ut(9,n7,2,0,"p")(10,i7,2,0),N(),le(11,"div",7),N()()),r&2&&(X(9),It(i.restaurants.length===0?9:10))},styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;justify-content:space-between;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{width:100%;height:64px;padding:0 32px;border-bottom:3px solid #000;display:flex;justify-content:space-between;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{margin:8px 0;height:48px}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .backbtn[_ngcontent-%COMP%]{height:48px;font-size:48px;font-weight:700;display:flex;justify-content:center;align-items:center;margin:8px 0}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .backbtn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{height:48px;font-size:48px;font-weight:700}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .restaurants[_ngcontent-%COMP%]{width:75%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .restaurants[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:flex-start;align-content:flex-start;border:3px black solid;border-radius:16px;padding:16px 16px 48px;margin-bottom:16px}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .restaurants[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   #datavalve[_ngcontent-%COMP%]{font-weight:700;font-size:200%}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .restaurants[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   #datavalve2[_ngcontent-%COMP%]{font-weight:700;font-size:110%}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .restaurants[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#dfdfdf}"]})}return e})();var c2=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275cmp=ie({type:e,selectors:[["app-restaurantbilings"]],standalone:!0,features:[oe],decls:9,vars:0,consts:[[1,"displaybox"],[1,"logo"],[1,"buttons"],[1,"footstatic"]],template:function(r,i){r&1&&(M(0,"main")(1,"div",0)(2,"div",1)(3,"h1"),P(4,"EasyOrder"),N()(),M(5,"div",2)(6,"h1"),P(7,"Brak Projektu!"),N()(),le(8,"div",3),N()())},styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;padding:32px;position:relative;background:#000!important;color:#ffa700}.displaybox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center;position:relative}.logo[_ngcontent-%COMP%]{display:flex;font-size:45%;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center;margin-bottom:48px}body[_ngcontent-%COMP%]{background:#000!important;color:#ffa700}h1[_ngcontent-%COMP%]{font-size:200%}"]})}return e})();var u2=(()=>{class e{navigationService;constructor(t){this.navigationService=t,_e(De.firebaseConfig)}goToPage(t){this.navigationService.NavigateTo(t)}deleteaccount(){let t=ee(),r=sessionStorage.getItem("userId"),i=J(t,`Owners/${r}`);Sr(i).then(()=>{console.log("owner deleted successfully"),this.navigationService.NavigateTo("landingpage")}).catch(o=>{console.error("Error deleting table:",o)})}static \u0275fac=function(r){return new(r||e)(Z(be))};static \u0275cmp=ie({type:e,selectors:[["app-restaurantsettings"]],standalone:!0,features:[oe],decls:21,vars:0,consts:[[1,"displaybox"],[1,"logo"],[1,"buttons"],[1,"alltablesqrcodes",3,"click"],[1,"myrestaaurants",3,"click"],[1,"tablesettings",3,"click"],[1,"waitersoptions",3,"click"],[1,"deleteaccount",3,"click"],[1,"footstatic"]],template:function(r,i){r&1&&(M(0,"main")(1,"div",0)(2,"div",1)(3,"h1"),P(4,"EasyOrder"),N()(),M(5,"div",2)(6,"button",3),Y("click",function(){return i.goToPage("alltablesqrcodes")}),P(7,"Pobierz kody QR Stolik\xF3w"),N(),M(8,"button",4),Y("click",function(){return i.goToPage("cashpointqrcode")}),P(9,"Wygeneruj kod QR obok kasy"),N(),M(10,"button",5),Y("click",function(){return i.goToPage("tablesettings")}),P(11,"Ustawienia Stolik\xF3w"),N(),M(12,"button",6),Y("click",function(){return i.goToPage("waitersettings")}),P(13,"Opcje dotycz\u0105ce kelner\xF3w"),N(),M(14,"button",4),Y("click",function(){return i.goToPage("changerestaurant")}),P(15,"Moje restauracje"),N(),M(16,"button",4),Y("click",function(){return i.goToPage("newrestaurant")}),P(17,"Dodaj restauracje"),N(),M(18,"button",7),Y("click",function(){return i.deleteaccount()}),P(19,"Usu\u0144 Konto"),N()(),le(20,"div",8),N()())},styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;padding:16px;position:relative}.displaybox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center;position:relative}.logo[_ngcontent-%COMP%]{display:flex;font-size:45%;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center;margin-bottom:48px}.buttons[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center}.buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;background:#fff;padding:24px;font-size:110%;color:#000;font-weight:600;letter-spacing:2px;border:1px solid #000000;transition:all .5s;margin-bottom:24px}"]})}return e})();var d2=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275cmp=ie({type:e,selectors:[["app-restaurantrevievs"]],standalone:!0,features:[oe],decls:2,vars:0,template:function(r,i){r&1&&(M(0,"p"),P(1,"restaurantrevievs works!"),N())}})}return e})();var f2=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275cmp=ie({type:e,selectors:[["app-restaurantstats"]],standalone:!0,features:[oe],decls:2,vars:0,template:function(r,i){r&1&&(M(0,"p"),P(1,"restaurantstats works!"),N())}})}return e})();var o7=(e,n,t)=>({"background-color":e,color:n,border:t});function s7(e,n){e&1&&(M(0,"p"),P(1,"Brak stolik\xF3w przypisanych do restauracji."),N())}function a7(e,n){if(e&1){let t=Gt();M(0,"button",13),Y("click",function(){let i=Rt(t).$implicit,o=Qe(2);return Pt(o.setTable(i.id))}),P(1),N()}if(e&2){let t=n.$implicit,r=Qe(2);kt("ngStyle",Yb(2,o7,t.group_id&&r.tableGroups[t.group_id]?r.tableGroups[t.group_id]:"white",t.group_id&&r.tableGroups[t.group_id]?r.getTextColor(r.tableGroups[t.group_id]):"black",t.group_id&&r.tableGroups[t.group_id]==="#ffffff"||!r.tableGroups[t.group_id]?"2px solid black":"none")),X(),Dn(" ",t.name," ")}}function l7(e,n){if(e&1&&pn(0,a7,2,6,"button",12,hn),e&2){let t=Qe();gn(t.tables)}}var h2=(()=>{class e{navigationService;tables=[];tableGroups={};isMenuOpen=!1;toggleMenu(){this.isMenuOpen=!this.isMenuOpen}constructor(t){this.navigationService=t;let r=_e(De.firebaseConfig)}ngOnInit(){this.loadTables()}loadTables(){let t=ee(),r=localStorage.getItem("currentRestaurant"),i=sessionStorage.getItem("userId");if(!r){console.error("No current restaurant found in local storage");return}let o=J(t,`Owners/${i}/Restaurants/${r}/Tables`);ye(o).then(c=>{if(c.exists()){let h=c.val();this.tables=Object.values(h),this.loadTableGroups()}else console.log("No tables found")}).catch(c=>{console.error("Error loading tables:",c)})}loadTableGroups(){let t=ee(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant");if(!r||!i){console.error("Missing owner or restaurant ID");return}let o=J(t,`Owners/${r}/Restaurants/${i}/TableGroups`);ye(o).then(c=>{if(c.exists()){let h=c.val();for(let g in h)this.tableGroups[g]=h[g].color}}).catch(c=>{console.error("Error loading table groups:",c)})}getTextColor(t){let r=t.replace("#",""),i=parseInt(r.substring(0,2),16),o=parseInt(r.substring(2,4),16),c=parseInt(r.substring(4,6),16);return(i*299+o*587+c*114)/1e3>125?"black":"white"}setTable(t){localStorage.setItem("currentTable",t),this.goToPage("tableedit")}goToPage(t){this.navigationService.NavigateTo(t)}static \u0275fac=function(r){return new(r||e)(Z(be))};static \u0275cmp=ie({type:e,selectors:[["app-tablemanage"]],standalone:!0,features:[oe],decls:32,vars:6,consts:[[1,"sidebar"],[1,"overlay"],[3,"click"],[1,"active",3,"click"],[1,"layoutbox"],[1,"head"],[1,"logo"],["src","https://cdn1.mandarin.com.pl/eologo.png","alt","EasyOrder",1,"w-full"],[1,"backbtn",3,"click"],[1,"material-symbols-rounded"],[1,"buttons"],[1,"footstatic"],[1,"table-button",3,"ngStyle"],[1,"table-button",3,"click","ngStyle"]],template:function(r,i){r&1&&(M(0,"main")(1,"div",0)(2,"div",1)(3,"ul")(4,"li")(5,"span",2),Y("click",function(){return i.toggleMenu()}),P(6,"X"),N()(),M(7,"li",3),Y("click",function(){return i.goToPage("tablemanage")}),P(8,"Zarz\u0105dzanie stolikami"),N(),M(9,"li",2),Y("click",function(){return i.goToPage("restaurantrevievs")}),P(10,"Opinie"),N(),M(11,"li",2),Y("click",function(){return i.goToPage("restaurantbilings")}),P(12,"P\u0142atno\u015Bci"),N(),M(13,"li",2),Y("click",function(){return i.goToPage("restaurantsettings")}),P(14,"Ustawienia"),N(),M(15,"li",2),Y("click",function(){return i.goToPage("managerestaurant")}),P(16,"Powr\xF3t"),N()()()(),M(17,"div",4)(18,"div",5)(19,"div",6),le(20,"img",7),N(),M(21,"div",8),Y("click",function(){return i.toggleMenu()}),M(22,"span",9),P(23,"menu"),N()()(),M(24,"div",10),Ut(25,s7,2,0,"p")(26,l7,2,0),N(),M(27,"div",11)(28,"button",2),Y("click",function(){return i.goToPage("tablecreate")}),P(29,"Dodaj stolik"),N(),M(30,"button",2),Y("click",function(){return i.goToPage("tablegroupmanage")}),P(31,"Edytuj grupy"),N()()()()),r&2&&(X(),Yr("active",i.isMenuOpen),X(),Yr("active",i.isMenuOpen),X(23),It(i.tables.length===0?25:-1),X(),It(i.tables.length>0?26:-1))},dependencies:[zl,cE],styles:['@font-face{font-family:Varela Round;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/varelaround/v20/w8gdH283Tvk__Lua32TysjIfpcuPP9g.woff2) format("woff2");unicode-range:U+0307-0308,U+0590-05FF,U+200C-2010,U+20AA,U+25CC,U+FB1D-FB4F}@font-face{font-family:Varela Round;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/varelaround/v20/w8gdH283Tvk__Lua32TysjIfqMuPP9g.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Varela Round;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/varelaround/v20/w8gdH283Tvk__Lua32TysjIfqcuPP9g.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Varela Round;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/varelaround/v20/w8gdH283Tvk__Lua32TysjIfp8uP.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;justify-content:space-between;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{width:100%;height:64px;padding:0 32px;border-bottom:3px solid #000;display:flex;justify-content:space-between;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{margin:8px 0;height:48px}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%;z-index:99999}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .backbtn[_ngcontent-%COMP%]{height:48px;font-size:48px;font-weight:700;display:flex;justify-content:center;align-items:center;margin:8px 0}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .backbtn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{height:48px;font-size:48px;font-weight:700}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{width:100%;height:100%;overflow-y:auto;overflow-x:hidden;display:flex;flex-direction:row;flex-wrap:wrap;justify-content:flex-start;align-items:flex-start;align-content:flex-start}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:114px;height:114px;border-radius:16px;margin:8px;font-size:200%;font-weight:bolder}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .footstatic[_ngcontent-%COMP%]{width:100%;border-top:black 3px solid;padding:8px;display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .footstatic[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:calc(50% - 8px);border:2px solid black;border-radius:16px;color:#000;background:#fff;padding:16px;font-size:110%;font-weight:bolder}.sidebar[_ngcontent-%COMP%]{position:fixed;top:0;right:-100%;width:100%;height:100%;background-color:#00000040;box-shadow:-2px 0 5px #00000080;-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px);transition:right .3s ease;z-index:999}.sidebar.active[_ngcontent-%COMP%]{right:0}.sidebar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin-top:0;list-style:none;padding:0}.sidebar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{border-bottom:3px solid black;padding:16px;font-weight:700;margin:0}.sidebar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:first-child{text-align:right;padding-top:0;padding-bottom:0;padding-right:32px;height:64px;display:flex;flex-direction:row;flex-wrap:wrap;justify-content:flex-end;align-items:center;align-content:center}.sidebar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:first-child   span[_ngcontent-%COMP%]{height:48px;width:48px;font-size:32px;font-weight:700;font-family:Varela Round,sans-serif}.sidebar[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]{background:#000;color:#fff}.overlay[_ngcontent-%COMP%]{position:fixed;top:0;right:-250px;width:250px;height:100%;background-color:#fff;box-shadow:-2px 0 5px #00000080;transition:right .3s ease}.overlay.active[_ngcontent-%COMP%]{right:0}']})}return e})();function c7(e,n){if(e&1&&(M(0,"option",9),P(1),N()),e&2){let t=Qe().$implicit;kt("value",t.id),X(),on(t.name)}}function u7(e,n){if(e&1&&(M(0,"option",10),P(1),N()),e&2){let t=Qe().$implicit;kt("value",t.id),X(),on(t.name)}}function d7(e,n){if(e&1&&Ut(0,c7,2,2,"option",9)(1,u7,2,2,"option",10),e&2){let t=n.$implicit,r=Qe();It(t.id==r.table.group_id?0:-1),X(),It(t.id!=r.table.group_id?1:-1)}}var p2=(()=>{class e{navigationService;name="";description="";table={id:"",name:"",group_id:"",description:"",is_blocked:!1};tableGroups=[];restaurantId="";constructor(t){this.navigationService=t,_e(De.firebaseConfig)}ngOnInit(){this.loadTableGroups()}loadTableGroups(){let t=sessionStorage.getItem("userId"),r=localStorage.getItem("currentRestaurant");if(!t||!r){console.error("Missing owner or restaurant ID");return}let i=ee(),o=J(i,`Owners/${t}/Restaurants/${r}/TableGroups`);ye(o).then(c=>{c.exists()?this.tableGroups=Object.values(c.val()):console.log("No table groups found")}).catch(c=>{console.error("Error loading table groups:",c)})}onSubmit(t){t.preventDefault();let r=Date.now().toString(),i=localStorage.getItem("currentRestaurant");if(!i){alert("Nie wybrano restauracji.");return}let o={id:r,group_id:this.table.group_id,name:this.name,is_blocked:!1,description:this.description?this.description:""};this.saveTable(o,i)}saveTable(t,r){let i=ee(),o=J(i,`Owners/${sessionStorage.getItem("userId")}/Restaurants/${r}/Tables`);mt(o,{[t.id]:t}).then(()=>{console.log("Stolik dodany pomy\u015Blnie:",t),this.navigationService.NavigateTo("tablemanage"),this.resetForm()}).catch(c=>{console.error("B\u0142\u0105d podczas dodawania stolika:",c)})}resetForm(){this.name="",this.description="",this.table.group_id=""}static \u0275fac=function(r){return new(r||e)(Z(be))};static \u0275cmp=ie({type:e,selectors:[["app-tablecreate"]],standalone:!0,features:[oe],decls:19,vars:3,consts:[[1,"displaybox"],[1,"logo"],[1,"buttons"],[3,"ngSubmit"],["type","text","id","name","name","name","placeholder","Nazwa Stolika","required","",3,"ngModelChange","ngModel"],["id","group","name","groupId",3,"ngModelChange","ngModel"],["type","text","id","description","name","description",3,"ngModelChange","ngModel"],["type","submit",1,"addtable"],[1,"footstatic"],["selected","",3,"value"],[3,"value"]],template:function(r,i){r&1&&(M(0,"main")(1,"div",0)(2,"div",1)(3,"h1"),P(4,"EasyOrder"),N()(),M(5,"div",2)(6,"form",3),Y("ngSubmit",function(c){return i.onSubmit(c)}),M(7,"div"),P(8," Nazwa stolika "),M(9,"input",4),it("ngModelChange",function(c){return ot(i.name,c)||(i.name=c),c}),N()(),M(10,"select",5),it("ngModelChange",function(c){return ot(i.table.group_id,c)||(i.table.group_id=c),c}),pn(11,d7,2,2,null,null,hn),N(),M(13,"div"),P(14," Opis Stolika "),M(15,"input",6),it("ngModelChange",function(c){return ot(i.description,c)||(i.description=c),c}),N()(),M(16,"button",7),P(17,"Dodaj stolik"),N()()(),le(18,"div",8),N()()),r&2&&(X(9),rt("ngModel",i.name),X(),rt("ngModel",i.table.group_id),X(),gn(i.tableGroups),X(4),rt("ngModel",i.description))},dependencies:[jt,er,Xf,Zf,Zt,Sa,mn,Jn,Tn,sn,jn],styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;padding:16px;position:relative}.displaybox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center;position:relative}.logo[_ngcontent-%COMP%]{display:flex;font-size:45%;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center;margin-bottom:48px}.buttons[_ngcontent-%COMP%]{width:100%;border:1px solid #000000;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:flex-start;align-items:center;align-content:center}.buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;background:#fff;padding:24px;font-size:110%;color:#000;font-weight:600;letter-spacing:2px;border:1px solid #000000;transition:all .5s;margin-bottom:24px}.footstatic[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center}.footstatic[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:calc(100% - 16px);background:#fff;padding:24px;font-size:110%;color:#000;font-weight:600;letter-spacing:2px;border:1px solid #000000;transition:all .5s;margin-bottom:24px;margin-right:8px}form[_ngcontent-%COMP%]{width:100%;padding:24px;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;border:1px solid #000000;height:24px;margin-bottom:16px}input[_ngcontent-%COMP%]:last-child{height:100px}"]})}return e})();function f7(e,n){if(e&1){let t=Gt();M(0,"button",9),Y("click",function(){Rt(t);let i=Qe(2);return Pt(i.blockTable())}),P(1,"Zablokuj"),N()}}function h7(e,n){if(e&1){let t=Gt();M(0,"button",9),Y("click",function(){Rt(t);let i=Qe(2);return Pt(i.unlockTable())}),P(1,"Odblokuj"),N()}}function p7(e,n){if(e&1&&Ut(0,f7,2,0,"button")(1,h7,2,0,"button"),e&2){let t=Qe();It((t.table==null?null:t.table.is_blocked)==!1?0:-1),X(),It((t.table==null?null:t.table.is_blocked)==!0?1:-1)}}var g2=(()=>{class e{navigationService;tableId=null;table=null;tableGroupName=null;groupColor=null;tableBlockAllowed=!0;restaurantId="";constructor(t){this.navigationService=t,_e(De.firebaseConfig)}ngOnInit(){this.loadTable(),this.loadSettings()}loadSettings(){let t=sessionStorage.getItem("userId");if(this.restaurantId=localStorage.getItem("currentRestaurant")??"",!t||!this.restaurantId){console.error("Missing owner or restaurant ID");return}let r=ee(),i=J(r,`Owners/${t}/Restaurants/${this.restaurantId}/settings`);ye(i).then(o=>{if(o.exists()){let c=o.val();this.tableBlockAllowed=c.table_block_allowed}else console.log("No settings found for this restaurant")}).catch(o=>{console.error("Error loading settings:",o)})}goToPage(t){this.navigationService.NavigateTo(t)}deleteTable(){let t=ee(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant");if(!this.tableId||!r||!i){console.error("Missing table, owner, or restaurant ID");return}let o=J(t,`Owners/${r}/Restaurants/${i}/Tables/${this.tableId}`);Sr(o).then(()=>{console.log("Table deleted successfully"),this.navigationService.NavigateTo("tablemanage")}).catch(c=>{console.error("Error deleting table:",c)})}blockTable(){let t=ee(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant");if(!this.tableId||!r||!i){console.error("Missing table, owner, or restaurant ID");return}let o=J(t,`Owners/${r}/Restaurants/${i}/Tables/${this.tableId}`);mt(o,{is_blocked:!0}).then(()=>{console.log("Table blocked successfully"),location.reload()}).catch(c=>{console.error("Error blocking table:",c)})}unlockTable(){let t=ee(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant");if(!this.tableId||!r||!i){console.error("Missing table, owner, or restaurant ID");return}let o=J(t,`Owners/${r}/Restaurants/${i}/Tables/${this.tableId}`);mt(o,{is_blocked:!1}).then(()=>{console.log("Table unlocked successfully"),location.reload()}).catch(c=>{console.error("Error blocking table:",c)})}saveTable(){}showQRCode(){this.navigationService.NavigateTo("showtableqr")}loadTable(){if(this.tableId=localStorage.getItem("currentTable"),!this.tableId){console.error("No current table found in local storage");return}let t=ee(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant"),o=J(t,`Owners/${r}/Restaurants/${i}/Tables/${this.tableId}`);ye(o).then(c=>{c.exists()?(this.table=c.val(),this.loadTableGroup()):console.log("No table found")}).catch(c=>{console.error("Error loading table:",c)})}loadTableGroup(){let t=ee(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant");if(!this.table?.group_id||this.table.group_id==="0g"){this.tableGroupName="Stoliki bez grupy",this.groupColor="#000000";return}let o=J(t,`Owners/${r}/Restaurants/${i}/TableGroups/${this.table.group_id}`);ye(o).then(c=>{if(c.exists()){let h=c.val();this.tableGroupName=h.name,this.groupColor=h.color}else console.log("No group found for this table")}).catch(c=>{console.error("Error loading group:",c)})}static \u0275fac=function(r){return new(r||e)(Z(be))};static \u0275cmp=ie({type:e,selectors:[["app-tableedit"]],standalone:!0,features:[oe],decls:25,vars:6,consts:[[1,"displaybox"],[1,"logo"],[1,"flexcontainer"],[1,"buttons"],[1,"colorbar"],[1,"head"],["name","description","id","description","placeholder","Description","readonly","",3,"value"],[1,"actionbtns"],[1,"arow"],[3,"click"],[1,"footstatic"]],template:function(r,i){r&1&&(M(0,"main")(1,"div",0)(2,"div",1)(3,"h1"),P(4,"EasyOrder"),N()(),M(5,"div",2)(6,"div",3),le(7,"div",4),M(8,"div",5)(9,"h3"),P(10),N(),M(11,"h3"),P(12),N()(),le(13,"textarea",6),M(14,"div",7)(15,"div",8)(16,"button",9),Y("click",function(){return i.deleteTable()}),P(17,"Usu\u0144 stolik"),N(),Ut(18,p7,2,2),N(),M(19,"div",8)(20,"button",9),Y("click",function(){return i.goToPage("tableeedit")}),P(21,"Edytuj stolik"),N(),M(22,"button",9),Y("click",function(){return i.showQRCode()}),P(23,"poka\u017C kod qr"),N()()()()(),le(24,"div",10),N()()),r&2&&(X(7),uf("background-color",i.groupColor),X(3),on(i.table==null?null:i.table.name),X(2),on(i.tableGroupName),X(),kt("value",i.table==null?null:i.table.description),X(5),It(i.tableBlockAllowed==!0?18:-1))},styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;padding:16px;position:relative}.displaybox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center;position:relative}.flexcontainer[_ngcontent-%COMP%]{width:100%}.logo[_ngcontent-%COMP%]{display:flex;font-size:45%;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center;margin-bottom:48px}.buttons[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center;border:1px solid #000000}.buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:calc(100% - 24px);background:#fff;padding:24px;font-size:110%;color:#000;font-weight:600;letter-spacing:2px;border:1px solid #000000;transition:all .5s}.footstatic[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center}.footstatic[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;background:#fff;padding:24px;font-size:110%;color:#000;font-weight:600;letter-spacing:2px;border:1px solid #000000;transition:all .5s;margin-bottom:24px;margin-right:8px}.arow[_ngcontent-%COMP%]{width:calc(100% - 24px);display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:space-evenly;align-items:center;align-content:center}.arow[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:95%;width:calc(100% - 24px);margin-bottom:16px}.arow[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-child{margin-right:8px}.arow[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-child{margin-left:8px}.actionbtns[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center}.colorbar[_ngcontent-%COMP%]{height:24px;width:100%}.savebtn[_ngcontent-%COMP%]{margin-top:16px;margin-bottom:16px}.head[_ngcontent-%COMP%]{width:100%;padding:8px;display:flex;flex-direction:row;justify-content:space-between;align-items:center;align-content:center}.head[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0}textarea[_ngcontent-%COMP%]{width:calc(100% - 24px);height:100px;margin-bottom:16px;resize:none;border:1px solid #000000}"]})}return e})();var m2=(()=>{class e{route;router;tableId=null;uniqueLinkToken=null;ownerId=null;restaurantid=null;constructor(t,r){this.route=t,this.router=r,_e(De.firebaseConfig)}ngOnInit(){this.route.queryParams.subscribe(t=>{this.tableId=t.t||null,this.uniqueLinkToken=t.u||null,this.ownerId=t.o||null,this.restaurantid=t.r||null})}setTable(t){let r=localStorage.getItem("currentRestaurant"),i=ee();if(!this.ownerId||!this.restaurantid||!this.tableId||!this.uniqueLinkToken){console.error("Missing required data");return}let o=J(i,`Owners/${this.ownerId}/Restaurants/${r}/settings`);ye(o).then(c=>{c.exists()?c.val().order_number_typed_by_waiter_required?this.verifyOrderNumber(t):this.saveTableAssignment(t):console.error("Settings not found")}).catch(c=>{console.error("Error loading settings:",c)})}verifyOrderNumber(t){let r=ee(),i=J(r,`Owners/${this.ownerId}/Restaurants/${this.restaurantid}/Orders`);ye(i).then(o=>{if(o.exists()){let c=o.val();Object.values(c).some(g=>g.name===t)?this.saveTableAssignment(t):console.error("Order not found")}else console.log("No orders found")}).catch(o=>{console.error("Error checking order number:",o)})}saveTableAssignment(t){localStorage.setItem("customercurrentTable",this.tableId),localStorage.setItem("uniqueLinkToken",this.uniqueLinkToken),localStorage.setItem("orderNumber",t),localStorage.setItem("restaurantid",this.restaurantid),localStorage.setItem("ownerid",this.ownerId),this.router.navigate(["/tableordered"])}static \u0275fac=function(r){return new(r||e)(Z(hi),Z(pi))};static \u0275cmp=ie({type:e,selectors:[["app-settable"]],standalone:!0,features:[oe],decls:13,vars:0,consts:[["orderNumberInput",""],[1,"displaybox"],[1,"logo"],[1,"buttons"],["type","number","placeholder","numer zam\xF3wienia"],[3,"click"],[1,"footstatic"]],template:function(r,i){if(r&1){let o=Gt();M(0,"main")(1,"div",1)(2,"div",2)(3,"h1"),P(4,"EasyOrder"),N()(),M(5,"div",3)(6,"label"),P(7,"Wprowad\u017A numer zam\xF3wienia"),N(),le(8,"input",4,0),M(10,"button",5),Y("click",function(){Rt(o);let h=ff(9);return Pt(i.setTable(h.value))}),P(11,"Przypisz stolik"),N()(),le(12,"div",6),N()()}}})}return e})();function g7(e,n){if(e&1){let t=Gt();M(0,"div",5),Y("click",function(){let i=Rt(t).$implicit,o=Qe();return Pt(o.setGroup(i.id))}),M(1,"h3"),P(2),N()()}if(e&2){let t=n.$implicit;X(2),on(t.name)}}var y2=(()=>{class e{navigationService;cd;tableGroups=[];tables=[];draggedTableId=null;ungroupedTables=[];constructor(t,r){this.navigationService=t,this.cd=r,_e(De.firebaseConfig)}ngOnInit(){this.loadGroupsAndTables()}loadGroupsAndTables(){let t=ee(),r=localStorage.getItem("currentRestaurant"),i=sessionStorage.getItem("userId");if(!r){console.error("No current restaurant found in local storage");return}let o=J(t,`Owners/${i}/Restaurants/${r}/Tables`),c=J(t,`Owners/${i}/Restaurants/${r}/TableGroups`);ye(o).then(h=>{h.exists()?(this.tables=Object.values(h.val()),this.ungroupedTables=this.tables.filter(g=>g.group_id==="0g")):console.log("No tables found")}).catch(h=>{console.error("Error loading tables:",h)}),ye(c).then(h=>{h.exists()?this.tableGroups=Object.values(h.val()):console.log("No table groups found")}).catch(h=>{console.error("Error loading table groups:",h)})}getTablesForGroup(t){return this.tables.filter(r=>r.group_id===t)}setGroup(t){localStorage.setItem("currentGroup",t),this.goToPage("groupedit")}updateTableGroup(t){let r=ee(),i=localStorage.getItem("currentRestaurant"),o=sessionStorage.getItem("userId");if(!i){console.error("No current restaurant found in local storage");return}let c=J(r,`Owners/${o}/Restaurants/${i}/Tables/${t.id}`);mt(c,{group_id:t.group_id}).then(()=>{console.log(`Table ${t.name} moved to group ${t.group_id}`)}).catch(h=>{console.error("Error updating table group:",h)})}setTable(t){localStorage.setItem("currentTable",t),this.goToPage("tableedit")}goToPage(t){this.navigationService.NavigateTo(t)}static \u0275fac=function(r){return new(r||e)(Z(be),Z(Fi))};static \u0275cmp=ie({type:e,selectors:[["app-tablegroupmanage"]],standalone:!0,features:[oe],decls:10,vars:0,consts:[[1,"displaybox"],[1,"logo"],[1,"table-group"],[1,"footstatic"],[3,"click"],[1,"table-group",3,"click"]],template:function(r,i){r&1&&(M(0,"main")(1,"div",0)(2,"div",1)(3,"h1"),P(4,"EasyOrder"),N()(),pn(5,g7,3,1,"div",2,hn),M(7,"div",3)(8,"button",4),Y("click",function(){return i.goToPage("tablegroupcreate")}),P(9,"Dodaj now\u0105 grup\u0119"),N()()()()),r&2&&(X(5),gn(i.tableGroups))},styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;padding:16px;position:relative}.displaybox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center;position:relative}.logo[_ngcontent-%COMP%]{display:flex;font-size:45%;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center;margin-bottom:48px}.buttons[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:flex-start;align-items:center;align-content:center}.buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{text-align:left;width:100%;background:#fff;padding:24px;font-size:110%;color:#000;font-weight:600;letter-spacing:2px;border:1px solid #000000;transition:all .5s;margin-bottom:24px}.footstatic[_ngcontent-%COMP%]{width:100%}.footstatic[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;background:#fff;padding:24px;font-size:110%;color:#000;font-weight:600;letter-spacing:2px;border:1px solid #000000;transition:all .5s;margin-bottom:24px;margin-right:8px}.table-group[_ngcontent-%COMP%]{text-align:left;width:100%;background:#fff;padding:24px;font-size:110%;color:#000;font-weight:600;letter-spacing:2px;border:1px solid #000000;transition:all .5s;margin-bottom:24px}.table-group[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:100%}.table-button[_ngcontent-%COMP%]{width:100%;border:1px solid #000000;height:60px;display:block;text-align:left;margin-bottom:0;padding:8px;font-weight:700}.table-group[_ngcontent-%COMP%]:hover{background-color:#f1f1f1}"]})}return e})();var w2=(()=>{class e{navigationService;name="";description="";color="";location="";constructor(t){this.navigationService=t,_e(De.firebaseConfig)}onSubmit(t){t.preventDefault();let r=Date.now().toString(),i=localStorage.getItem("currentRestaurant");if(!i){alert("Nie wybrano restauracji.");return}let o={id:r,name:this.name,color:this.color,description:this.description?this.description:"",location:this.location?this.location:""};this.saveTableGroup(o,i)}saveTableGroup(t,r){let i=ee(),o=J(i,`Owners/${sessionStorage.getItem("userId")}/Restaurants/${r}/TableGroups`);mt(o,{[t.id]:t}).then(()=>{console.log("Grupa stolik\xF3w dodana pomy\u015Blnie:",t),this.navigationService.NavigateTo("tablegroupmanage"),this.resetForm()}).catch(c=>{console.error("B\u0142\u0105d podczas dodawania grupy stolik\xF3w:",c)})}resetForm(){this.name="",this.description="",this.color="",this.location=""}static \u0275fac=function(r){return new(r||e)(Z(be))};static \u0275cmp=ie({type:e,selectors:[["app-tablegroupcreate"]],standalone:!0,features:[oe],decls:18,vars:4,consts:[[1,"displaybox"],[1,"logo"],[1,"buttons"],[3,"ngSubmit"],["type","text","id","name","name","name","placeholder","Nazwa Grupy Stolika","required","",3,"ngModelChange","ngModel"],["type","text","id","description","name","description","placeholder","Opis grupy . . . ",3,"ngModelChange","ngModel"],["type","color","id","color","name","color","placeholder","Kolor grupy",3,"ngModelChange","ngModel"],["type","text","id","location","name","location","placeholder","Lokalizacja grupy",3,"ngModelChange","ngModel"],["type","submit",1,"addtable"],[1,"footstatic"]],template:function(r,i){r&1&&(M(0,"main")(1,"div",0)(2,"div",1)(3,"h1"),P(4,"EasyOrder"),N()(),M(5,"div",2)(6,"form",3),Y("ngSubmit",function(c){return i.onSubmit(c)}),M(7,"div")(8,"input",4),it("ngModelChange",function(c){return ot(i.name,c)||(i.name=c),c}),N()(),M(9,"div")(10,"input",5),it("ngModelChange",function(c){return ot(i.description,c)||(i.description=c),c}),N()(),M(11,"div")(12,"input",6),it("ngModelChange",function(c){return ot(i.color,c)||(i.color=c),c}),N()(),M(13,"div")(14,"input",7),it("ngModelChange",function(c){return ot(i.location,c)||(i.location=c),c}),N()(),M(15,"button",8),P(16,"Dodaj grup\u0119 stolik\xF3w"),N()()(),le(17,"div",9),N()()),r&2&&(X(8),rt("ngModel",i.name),X(2),rt("ngModel",i.description),X(2),rt("ngModel",i.color),X(2),rt("ngModel",i.location))},dependencies:[jt,er,Zt,mn,Jn,Tn,sn,jn]})}return e})();var Za=EC(_A(),1);var u9=["qrcElement"],No=(()=>{class e{constructor(t,r){this.renderer=t,this.sanitizer=r,this.allowEmptyString=!1,this.colorDark="#000000ff",this.colorLight="#ffffffff",this.cssClass="qrcode",this.elementType="canvas",this.errorCorrectionLevel="M",this.margin=4,this.qrdata="",this.scale=4,this.width=10,this.qrCodeURL=new Ot,this.context=null}ngOnChanges(){return qt(this,null,function*(){yield this.createQRCode()})}isValidQrCodeText(t){return this.allowEmptyString===!1?!(typeof t>"u"||t===""||t==="null"||t===null):!(typeof t>"u")}toDataURL(t){return new Promise((r,i)=>{(0,Za.toDataURL)(this.qrdata,t,(o,c)=>{o?i(o):r(c)})})}toCanvas(t,r){return new Promise((i,o)=>{(0,Za.toCanvas)(t,this.qrdata,r,c=>{c?o(c):i("success")})})}toSVG(t){return new Promise((r,i)=>{(0,Za.toString)(this.qrdata,t,(o,c)=>{o?i(o):r(c)})})}renderElement(t){for(let r of this.qrcElement.nativeElement.childNodes)this.renderer.removeChild(this.qrcElement.nativeElement,r);this.renderer.appendChild(this.qrcElement.nativeElement,t)}createQRCode(){return qt(this,null,function*(){this.version&&this.version>40?(console.warn("[angularx-qrcode] max value for `version` is 40"),this.version=40):this.version&&this.version<1?(console.warn("[angularx-qrcode]`min value for `version` is 1"),this.version=1):this.version!==void 0&&isNaN(this.version)&&(console.warn("[angularx-qrcode] version should be a number, defaulting to auto."),this.version=void 0);try{if(!this.isValidQrCodeText(this.qrdata))throw new Error("[angularx-qrcode] Field `qrdata` is empty, set 'allowEmptyString=\"true\"' to overwrite this behaviour.");this.isValidQrCodeText(this.qrdata)&&this.qrdata===""&&(this.qrdata=" ");let t={color:{dark:this.colorDark,light:this.colorLight},errorCorrectionLevel:this.errorCorrectionLevel,margin:this.margin,scale:this.scale,version:this.version,width:this.width},r=this.imageSrc,i=this.imageHeight||40,o=this.imageWidth||40;switch(this.elementType){case"canvas":{let c=this.renderer.createElement("canvas");this.context=c.getContext("2d"),this.toCanvas(c,t).then(()=>{if(this.ariaLabel&&this.renderer.setAttribute(c,"aria-label",`${this.ariaLabel}`),this.title&&this.renderer.setAttribute(c,"title",`${this.title}`),r&&this.context){this.centerImage=new Image(o,i),r!==this.centerImage.src&&(this.centerImage.crossOrigin="anonymous",this.centerImage.src=r),i!==this.centerImage.height&&(this.centerImage.height=i),o!==this.centerImage.width&&(this.centerImage.width=o);let h=this.centerImage;h&&(h.onload=()=>{this.context?.drawImage(h,c.width/2-o/2,c.height/2-i/2,o,i)})}this.renderElement(c),this.emitQRCodeURL(c)}).catch(h=>{console.error("[angularx-qrcode] canvas error:",h)});break}case"svg":{let c=this.renderer.createElement("div");this.toSVG(t).then(h=>{this.renderer.setProperty(c,"innerHTML",h);let g=c.firstChild;this.renderer.setAttribute(g,"height",`${this.width}`),this.renderer.setAttribute(g,"width",`${this.width}`),this.renderElement(g),this.emitQRCodeURL(g)}).catch(h=>{console.error("[angularx-qrcode] svg error:",h)});break}case"url":case"img":default:{let c=this.renderer.createElement("img");this.toDataURL(t).then(h=>{this.alt&&c.setAttribute("alt",this.alt),this.ariaLabel&&c.setAttribute("aria-label",this.ariaLabel),c.setAttribute("src",h),this.title&&c.setAttribute("title",this.title),this.renderElement(c),this.emitQRCodeURL(c)}).catch(h=>{console.error("[angularx-qrcode] img/url error:",h)})}}}catch(t){console.error("[angularx-qrcode] Error generating QR Code:",t.message)}})}convertBase64ImageUrlToBlob(t){let r=t.split(";base64,"),i=r[0].split(":")[1],o=atob(r[1]),c=new Uint8Array(o.length);for(let h=0;h<o.length;++h)c[h]=o.charCodeAt(h);return new Blob([c],{type:i})}emitQRCodeURL(t){let r=t.constructor.name;if(r===SVGSVGElement.name){let g=t.outerHTML,m=new Blob([g],{type:"image/svg+xml"}),v=URL.createObjectURL(m),x=this.sanitizer.bypassSecurityTrustUrl(v);this.qrCodeURL.emit(x);return}let i="";r===HTMLCanvasElement.name&&(i=t.toDataURL("image/png")),r===HTMLImageElement.name&&(i=t.src);let o=this.convertBase64ImageUrlToBlob(i),c=URL.createObjectURL(o),h=this.sanitizer.bypassSecurityTrustUrl(c);this.qrCodeURL.emit(h)}static{this.\u0275fac=function(r){return new(r||e)(Z($r),Z(Am))}}static{this.\u0275cmp=ie({type:e,selectors:[["qrcode"]],viewQuery:function(r,i){if(r&1&&df(u9,7),r&2){let o;Bl(o=Vl())&&(i.qrcElement=o.first)}},inputs:{allowEmptyString:"allowEmptyString",colorDark:"colorDark",colorLight:"colorLight",cssClass:"cssClass",elementType:"elementType",errorCorrectionLevel:"errorCorrectionLevel",imageSrc:"imageSrc",imageHeight:"imageHeight",imageWidth:"imageWidth",margin:"margin",qrdata:"qrdata",scale:"scale",version:"version",width:"width",alt:"alt",ariaLabel:"ariaLabel",title:"title"},outputs:{qrCodeURL:"qrCodeURL"},features:[Ri],decls:2,vars:2,consts:[["qrcElement",""]],template:function(r,i){r&1&&le(0,"div",null,0),r&2&&Bb(i.cssClass)},encapsulation:2,changeDetection:0})}}return e})(),Oo=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=Oi({type:e})}static{this.\u0275inj=Ni({})}}return e})();var vA=(()=>{class e{navigationService;tableId=null;table=null;tableGroupName=null;groupColor=null;uniqueLinkToken=null;ownerId=null;restaurantId=null;constructor(t){this.navigationService=t,_e(De.firebaseConfig)}ngOnInit(){this.loadTable(),this.loadUniqueLinkToken()}printQRCodePage(){window.print()}loadUniqueLinkToken(){let t=ee();this.ownerId=sessionStorage.getItem("userId"),this.restaurantId=localStorage.getItem("currentRestaurant");let r=J(t,`Owners/${this.ownerId}/Restaurants/${this.restaurantId}/uniqueLinkToken`);ye(r).then(i=>{i.exists()?this.uniqueLinkToken=i.val():console.log("No unique link token found")}).catch(i=>{console.error("Error loading unique link token:",i)})}deleteTable(){let t=ee(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant");if(!this.tableId||!r||!i){console.error("Missing table, owner, or restaurant ID");return}let o=J(t,`Owners/${r}/Restaurants/${i}/Tables/${this.tableId}`);Sr(o).then(()=>{console.log("Table deleted successfully"),this.navigationService.NavigateTo("tablemanage")}).catch(c=>{console.error("Error deleting table:",c)})}blockTable(){let t=ee(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant");if(!this.tableId||!r||!i){console.error("Missing table, owner, or restaurant ID");return}let o=J(t,`Owners/${r}/Restaurants/${i}/Tables/${this.tableId}`);mt(o,{is_blocked:!0}).then(()=>{console.log("Table blocked successfully"),location.reload()}).catch(c=>{console.error("Error blocking table:",c)})}unlockTable(){let t=ee(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant");if(!this.tableId||!r||!i){console.error("Missing table, owner, or restaurant ID");return}let o=J(t,`Owners/${r}/Restaurants/${i}/Tables/${this.tableId}`);mt(o,{is_blocked:!1}).then(()=>{console.log("Table unlocked successfully"),location.reload()}).catch(c=>{console.error("Error unlocking table:",c)})}saveTable(){}loadTable(){if(this.tableId=localStorage.getItem("currentTable"),!this.tableId){console.error("No current table found in local storage");return}let t=ee(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant"),o=J(t,`Owners/${r}/Restaurants/${i}/Tables/${this.tableId}`);ye(o).then(c=>{c.exists()?(this.table=c.val(),this.loadTableGroup()):console.log("No table found")}).catch(c=>{console.error("Error loading table:",c)})}loadTableGroup(){let t=ee(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant");if(!this.table?.group_id||this.table.group_id==="0g"){this.tableGroupName="Stoliki bez grupy",this.groupColor="#000000";return}let o=J(t,`Owners/${r}/Restaurants/${i}/TableGroups/${this.table.group_id}`);ye(o).then(c=>{if(c.exists()){let h=c.val();this.tableGroupName=h.name,this.groupColor=h.color}else console.log("No group found for this table")}).catch(c=>{console.error("Error loading group:",c)})}getQRCodeData(){let t=this.table?.id||"",r=this.uniqueLinkToken||"",i=sessionStorage.getItem("userId"),o=localStorage.getItem("currentRestaurant");return`https://easyorder.mandarin.com.pl/settable?tableid=${t}&uniqueLinkToken=${r}&ownerid=${i}&restaurantid=${o}`}static \u0275fac=function(r){return new(r||e)(Z(be))};static \u0275cmp=ie({type:e,selectors:[["app-showtableqr"]],standalone:!0,features:[oe],decls:6,vars:13,consts:[[3,"click"],[1,"qr-container"],[3,"qrdata","allowEmptyString","alt","ariaLabel","cssClass","colorDark","colorLight","elementType","errorCorrectionLevel","margin","scale","title","width"]],template:function(r,i){r&1&&(M(0,"main")(1,"div")(2,"button",0),Y("click",function(){return i.printQRCodePage()}),P(3,"Print QR Code"),N()(),M(4,"div",1),le(5,"qrcode",2),N()()),r&2&&(X(5),kt("qrdata","https://easyorder.mandarin.com.pl/settable?t="+i.tableId+"&u="+i.uniqueLinkToken+"&o="+i.ownerId+"&r="+i.restaurantId)("allowEmptyString",!0)("alt","A custom alt attribute")("ariaLabel","QR Code image with the following content...")("cssClass","center")("colorDark","#000000ff")("colorLight","#ffffffff")("elementType","img")("errorCorrectionLevel","H")("margin",4)("scale",1)("title","A custom title attribute")("width",300))},dependencies:[Oo,No],styles:[".qr-code-container[_ngcontent-%COMP%]{width:100%;min-height:max-content;display:flex;flex-wrap:wrap;justify-content:center}.qr-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;flex-wrap:nowrap;width:375px;height:565px;background:url(https://cdn1.mandarin.com.pl/qrbg2.png) no-repeat center center;background-size:cover;margin:10px;padding:10px;text-align:center;border:1px dashed black}@media print{button[_ngcontent-%COMP%]{display:none}.qr-code-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-between;margin:0;padding:0}.qr-code-box[_ngcontent-%COMP%]{width:calc(50% - 10px);height:565px;margin:5px;text-align:center;page-break-inside:avoid}.qr-code-container[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:nth-child(2n){page-break-after:always}body[_ngcontent-%COMP%]{background-color:#fff;margin:0}}"]})}return e})();var xA=(()=>{class e{tableChangeAllowed=!1;tableBlockAllowed=!1;restaurantId=null;constructor(){_e(De.firebaseConfig)}ngOnInit(){this.loadSettings()}loadSettings(){let t=sessionStorage.getItem("userId");if(this.restaurantId=localStorage.getItem("currentRestaurant"),!t||!this.restaurantId){console.error("Missing owner or restaurant ID");return}let r=ee(),i=J(r,`Owners/${t}/Restaurants/${this.restaurantId}/settings`);ye(i).then(o=>{if(o.exists()){let c=o.val();this.tableChangeAllowed=c.table_change_allowed,this.tableBlockAllowed=c.table_block_allowed}else console.log("No settings found for this restaurant")}).catch(o=>{console.error("Error loading settings:",o)})}toggleTableChangeAllowed(){this.tableChangeAllowed=!this.tableChangeAllowed,this.saveSettings()}toggleTableBlockAllowed(){this.tableBlockAllowed=!this.tableBlockAllowed,this.saveSettings()}saveSettings(){let t=sessionStorage.getItem("userId");if(!t||!this.restaurantId){console.error("Missing owner or restaurant ID");return}let r=ee(),i=J(r,`Owners/${t}/Restaurants/${this.restaurantId}/settings`);mt(i,{table_change_allowed:this.tableChangeAllowed,table_block_allowed:this.tableBlockAllowed}).then(()=>{console.log("Settings updated successfully")}).catch(o=>{console.error("Error updating settings:",o)})}static \u0275fac=function(r){return new(r||e)};static \u0275cmp=ie({type:e,selectors:[["app-tablesettings"]],standalone:!0,features:[oe],decls:15,vars:2,consts:[[1,"displaybox"],[1,"logo"],[1,"buttons"],[3,"click"],[1,"footstatic"]],template:function(r,i){r&1&&(M(0,"main")(1,"div",0)(2,"div",1)(3,"h1"),P(4,"EasyOrder"),N()(),M(5,"div",2)(6,"label"),P(7,"Opcja Zmiany stolika:"),N(),M(8,"button",3),Y("click",function(){return i.toggleTableChangeAllowed()}),P(9),N(),M(10,"label"),P(11,"Opcja blokowania stolik\xF3w:"),N(),M(12,"button",3),Y("click",function(){return i.toggleTableBlockAllowed()}),P(13),N()(),le(14,"div",4),N()()),r&2&&(X(9),Dn(" ",i.tableChangeAllowed?"W\u0142\u0105czona":"Wy\u0142\u0105czona"," "),X(4),Dn(" ",i.tableBlockAllowed?"W\u0142\u0105czona":"Wy\u0142\u0105czona"," "))}})}return e})();var d9=["pin"],bA=(()=>{class e{navigationService;order_number_typed_by_waiter_required=!1;waiter_access_pin=1234;restaurantId=null;pinRef;constructor(t){this.navigationService=t,_e(De.firebaseConfig)}ngOnInit(){this.loadSettings()}ngAfterViewInit(){this.pinRef||console.error("PIN input element not found")}goToPage(t){this.navigationService.NavigateTo(t)}loadSettings(){let t=sessionStorage.getItem("userId");if(this.restaurantId=localStorage.getItem("currentRestaurant"),!t||!this.restaurantId){console.error("Missing owner or restaurant ID");return}let r=ee(),i=J(r,`Owners/${t}/Restaurants/${this.restaurantId}/settings`);ye(i).then(o=>{if(o.exists()){let c=o.val();this.order_number_typed_by_waiter_required=c.order_number_typed_by_waiter_required,this.waiter_access_pin=c.waiter_access_pin}else console.log("No settings found for this restaurant")}).catch(o=>{console.error("Error loading settings:",o)})}toggleTableChangeAllowed(){this.order_number_typed_by_waiter_required=!this.order_number_typed_by_waiter_required,this.saveSettings()}toggleTableBlockAllowed(){this.pinRef&&this.pinRef.nativeElement?(this.waiter_access_pin=this.pinRef.nativeElement.value,this.saveSettings()):console.error("PIN input element not available")}saveSettings(){let t=sessionStorage.getItem("userId");if(!t||!this.restaurantId){console.error("Missing owner or restaurant ID");return}let r=ee(),i=J(r,`Owners/${t}/Restaurants/${this.restaurantId}/settings`);mt(i,{order_number_typed_by_waiter_required:this.order_number_typed_by_waiter_required,waiter_access_pin:this.waiter_access_pin}).then(()=>{console.log("Settings updated successfully")}).catch(o=>{console.error("Error updating settings:",o)})}static \u0275fac=function(r){return new(r||e)(Z(be))};static \u0275cmp=ie({type:e,selectors:[["app-waitersettings"]],viewQuery:function(r,i){if(r&1&&df(d9,5),r&2){let o;Bl(o=Vl())&&(i.pinRef=o.first)}},standalone:!0,features:[oe],decls:19,vars:2,consts:[["pin",""],[1,"displaybox"],[1,"logo"],[1,"buttons"],[3,"click"],["type","number",3,"value"],[1,"myrestaaurants",3,"click"],[1,"footstatic"]],template:function(r,i){if(r&1){let o=Gt();M(0,"main")(1,"div",1)(2,"div",2)(3,"h1"),P(4,"EasyOrder"),N()(),M(5,"div",3)(6,"label"),P(7,"Opcja Zmiany stolika:"),N(),M(8,"button",4),Y("click",function(){return Rt(o),Pt(i.toggleTableChangeAllowed())}),P(9),N(),M(10,"label"),P(11,"Opcja blokowania stolik\xF3w:"),N(),le(12,"input",5,0),M(14,"button",4),Y("click",function(){return Rt(o),Pt(i.toggleTableBlockAllowed())}),P(15,"Update PIN"),N(),M(16,"button",6),Y("click",function(){return Rt(o),Pt(i.goToPage("waiterqrcode"))}),P(17,"Poka\u017C kod qr dla kelner\xF3w"),N()(),le(18,"div",7),N()()}r&2&&(X(9),Dn(" ",i.order_number_typed_by_waiter_required?"W\u0142\u0105czona":"Wy\u0142\u0105czona"," "),X(3),kt("value",i.waiter_access_pin))}})}return e})();function f9(e,n){if(e&1&&(M(0,"div",2),le(1,"qrcode",3),N()),e&2){let t=n.$implicit,r=Qe();X(),kt("qrdata",r.getQRCodeData(t.id))("allowEmptyString",!0)("alt","QR code for table "+t.name)("cssClass","center")("colorDark","#000000ff")("colorLight","#ffffffff")("elementType","img")("errorCorrectionLevel","H")("margin",4)("scale",1)("width",300)}}var EA=(()=>{class e{tables=[];uniqueLinkToken=null;constructor(){_e(De.firebaseConfig)}ngOnInit(){this.loadTables(),this.loadUniqueLinkToken()}loadTables(){let t=sessionStorage.getItem("userId"),r=localStorage.getItem("currentRestaurant");if(!t||!r){console.error("Missing owner or restaurant ID");return}let i=ee(),o=J(i,`Owners/${t}/Restaurants/${r}/Tables`);ye(o).then(c=>{c.exists()?this.tables=Object.values(c.val()):console.log("No tables found")}).catch(c=>{console.error("Error loading tables:",c)})}loadUniqueLinkToken(){let t=ee(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant"),o=J(t,`Owners/${r}/Restaurants/${i}/uniqueLinkToken`);ye(o).then(c=>{c.exists()?this.uniqueLinkToken=c.val():console.log("No unique link token found")}).catch(c=>{console.error("Error loading unique link token:",c)})}getQRCodeData(t){let r=this.uniqueLinkToken||"",i=sessionStorage.getItem("userId"),o=localStorage.getItem("currentRestaurant");return`https://easyorder.mandarin.com.pl/settable?t=${t}&u=${r}&o=${i}&r=${o}`}printQRCodePage(){window.print()}static \u0275fac=function(r){return new(r||e)};static \u0275cmp=ie({type:e,selectors:[["app-alltableqrcodes"]],standalone:!0,features:[oe],decls:6,vars:0,consts:[[3,"click"],[1,"qr-code-container"],[1,"qr-container"],[3,"qrdata","allowEmptyString","alt","cssClass","colorDark","colorLight","elementType","errorCorrectionLevel","margin","scale","width"]],template:function(r,i){r&1&&(M(0,"div")(1,"button",0),Y("click",function(){return i.printQRCodePage()}),P(2,"Print QR Codes"),N()(),M(3,"div",1),pn(4,f9,2,11,"div",2,hn),N()),r&2&&(X(4),gn(i.tables))},dependencies:[Oo,No],styles:[".qr-code-container[_ngcontent-%COMP%]{width:100%;min-height:max-content;display:flex;flex-wrap:wrap;justify-content:center}.qr-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;flex-wrap:nowrap;width:375px;height:565px;background:url(https://cdn1.mandarin.com.pl/qrbg2.png) no-repeat center center;background-size:cover;margin:10px;padding:10px;text-align:center;border:1px dashed black}@media print{button[_ngcontent-%COMP%]{display:none}.qr-code-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-between;margin:0;padding:0}.qr-code-box[_ngcontent-%COMP%]{width:calc(50% - 10px);height:565px;margin:5px;text-align:center;page-break-inside:avoid}.qr-code-container[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:nth-child(2n){page-break-after:always}body[_ngcontent-%COMP%]{background-color:#fff;margin:0}}"]})}return e})();var IA=(()=>{class e{constructor(){_e(Fh.firebaseConfig)}getOrderList(t){let r=ee(),i=J(r,`Owners/${sessionStorage.getItem("userId")}/Restaurants/${t}/Orders`);return new Fe(o=>(t2(i,c=>{if(c.exists()){let h=c.val();o.next(Object.values(h))}else o.next([])},c=>{o.error(c)}),()=>{}))}static \u0275fac=function(r){return new(r||e)};static \u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function p9(e,n){e&1&&(M(0,"h2"),P(1,"Loading order status..."),N())}function g9(e,n){if(e&1&&(M(0,"h2"),P(1),N()),e&2){let t=Qe(2);X(),Dn(" ",t.status||"Status not available","")}}function m9(e,n){if(e&1&&Ut(0,g9,2,1,"h2"),e&2){let t=n.$implicit,r=Qe();It(t.table_id==r.tableId?0:-1)}}function y9(e,n){e&1&&(M(0,"h2"),P(1,"No current order found."),N())}function w9(e,n){if(e&1){let t=Gt();M(0,"button",5),Y("click",function(){Rt(t);let i=Qe();return Pt(i.changetable())}),P(1,"Zmie\u0144 stolik"),N()}}var SA=(()=>{class e{databaseService;navigationService;tableId=null;uniqueLinkToken=null;orderNumber=null;ownerId=null;restaurantid=null;orderList=null;updateSubscription=null;status;constructor(t,r){this.databaseService=t,this.navigationService=r,_e(De.firebaseConfig)}ngOnInit(){this.tableId=localStorage.getItem("customercurrentTable"),this.uniqueLinkToken=localStorage.getItem("uniqueLinkToken"),this.orderNumber=localStorage.getItem("orderNumber"),this.restaurantid=localStorage.getItem("restaurantid"),this.ownerId=localStorage.getItem("ownerid"),this.orderNumber?this.processOrder(this.orderNumber):console.error("Order number is missing"),this.startOrderUpdates()}ngOnDestroy(){this.updateSubscription?.unsubscribe()}processOrder(t){if(!this.ownerId||!this.restaurantid||!this.tableId||!this.uniqueLinkToken){console.error("Missing required data");return}let r=ee(),i=J(r,`Owners/${this.ownerId}/Restaurants/${this.restaurantid}/Orders`);ye(i).then(o=>{if(o.exists()){let c=o.val(),h=Object.keys(c).find(g=>c[g].name===t);h?this.updateOrderWithTable(h):this.createNewOrder(t)}else console.log("No orders found, creating a new order"),this.createNewOrder(t)}).catch(o=>{console.error("Error checking orders:",o)})}updateOrderWithTable(t){let r=ee(),i=J(r,`Owners/${this.ownerId}/Restaurants/${this.restaurantid}/Orders/${t}`);mt(i,{table_id:this.tableId}).then(()=>{console.log("Order updated with table ID successfully")}).catch(o=>{console.error("Error updating order:",o)})}createNewOrder(t){let r=ee(),i={name:t,waiter_get_order_at_table:!1,created_at:Date.now(),canceled_at:null,completed_at:null,table_id:this.tableId,waiter_set_order_number:!0,table_id_entered_by_waiter:!0,completed_during_table_clean:!1},o=J(r,`Owners/${this.ownerId}/Restaurants/${this.restaurantid}/Orders`),c=Date.now().toString();mt(o,{[c]:i}).then(()=>{console.log("New order created successfully:",i)}).catch(h=>{console.error("Error creating new order:",h)})}startOrderUpdates(){if(!this.restaurantid){console.error("Restaurant ID is missing");return}this.updateSubscription=Yp(0,15e3).subscribe(()=>{this.databaseService.getOrderList(this.restaurantid).subscribe(t=>{this.orderList=t.map(r=>Le(ne({},r),{status:this.getOrderStatus(r)}))})})}changetable(){this.navigationService.NavigateTo("scanqrcode")}getOrderStatus(t){t.canceled_at?this.status="Anulowano":t.completed_at?this.status="Zrealizowane":t.created_at?this.status="W realizacji":this.status="Nieznany status"}static \u0275fac=function(r){return new(r||e)(Z(IA),Z(be))};static \u0275cmp=ie({type:e,selectors:[["app-tableordered"]],standalone:!0,features:[oe],decls:12,vars:3,consts:[[1,"displaybox"],[1,"logo"],[1,"buttons"],[1,"addtable"],[1,"footstatic"],[1,"addtable",3,"click"]],template:function(r,i){r&1&&(M(0,"main")(1,"div",0)(2,"div",1)(3,"h1"),P(4,"EasyOrder"),N()(),M(5,"div",2),Ut(6,p9,2,0,"h2"),pn(7,m9,1,1,null,null,hn),Ut(9,y9,2,0,"h2")(10,w9,2,0,"button",3),N(),le(11,"div",4),N()()),r&2&&(X(6),It(i.orderList===null?6:-1),X(),gn(i.orderList),X(2),It(i.orderList&&i.orderList.length===0?9:-1),X(),It(i.orderList&&i.orderList.length<=1?10:-1))},styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;padding:16px;position:relative}.displaybox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center;position:relative}.logo[_ngcontent-%COMP%]{display:flex;font-size:45%;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center;margin-bottom:48px}.buttons[_ngcontent-%COMP%]{width:100%;border:none;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:flex-start;align-items:center;align-content:center}.buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;background:#fff;padding:24px;font-size:110%;color:#000;font-weight:600;letter-spacing:2px;border:1px solid #000000;transition:all .5s;margin-bottom:24px}.footstatic[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center}.footstatic[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:calc(100% - 16px);background:#fff;padding:24px;font-size:110%;color:#000;font-weight:600;letter-spacing:2px;border:1px solid #000000;transition:all .5s;margin-bottom:24px;margin-right:8px}form[_ngcontent-%COMP%]{width:100%;padding:24px;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;border:1px solid #000000;height:24px;margin-bottom:16px}input[_ngcontent-%COMP%]:last-child{height:100px}"]})}return e})();var se=function(e){return e[e.QR_CODE=0]="QR_CODE",e[e.AZTEC=1]="AZTEC",e[e.CODABAR=2]="CODABAR",e[e.CODE_39=3]="CODE_39",e[e.CODE_93=4]="CODE_93",e[e.CODE_128=5]="CODE_128",e[e.DATA_MATRIX=6]="DATA_MATRIX",e[e.MAXICODE=7]="MAXICODE",e[e.ITF=8]="ITF",e[e.EAN_13=9]="EAN_13",e[e.EAN_8=10]="EAN_8",e[e.PDF_417=11]="PDF_417",e[e.RSS_14=12]="RSS_14",e[e.RSS_EXPANDED=13]="RSS_EXPANDED",e[e.UPC_A=14]="UPC_A",e[e.UPC_E=15]="UPC_E",e[e.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION",e}(se||{}),DA=new Map([[se.QR_CODE,"QR_CODE"],[se.AZTEC,"AZTEC"],[se.CODABAR,"CODABAR"],[se.CODE_39,"CODE_39"],[se.CODE_93,"CODE_93"],[se.CODE_128,"CODE_128"],[se.DATA_MATRIX,"DATA_MATRIX"],[se.MAXICODE,"MAXICODE"],[se.ITF,"ITF"],[se.EAN_13,"EAN_13"],[se.EAN_8,"EAN_8"],[se.PDF_417,"PDF_417"],[se.RSS_14,"RSS_14"],[se.RSS_EXPANDED,"RSS_EXPANDED"],[se.UPC_A,"UPC_A"],[se.UPC_E,"UPC_E"],[se.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]);function AA(e){return Object.values(se).includes(e)}var _i=function(e){return e[e.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",e[e.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE",e}(_i||{}),tr=function(){function e(){}return e.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",e.SCAN_DEFAULT_FPS=2,e.DEFAULT_DISABLE_FLIP=!1,e.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,e.DEFAULT_SUPPORTED_SCAN_TYPE=[_i.SCAN_TYPE_CAMERA,_i.SCAN_TYPE_FILE],e}();var Zh=function(){function e(n,t){this.format=n,this.formatName=t}return e.prototype.toString=function(){return this.formatName},e.create=function(n){if(!DA.has(n))throw"".concat(n," not in html5QrcodeSupportedFormatsTextMap");return new e(n,DA.get(n))},e}();var Vw=function(){function e(){}return e.createFromText=function(n){var t={text:n};return{decodedText:n,result:t}},e.createFromQrcodeResult=function(n){return{decodedText:n.text,result:n}},e}();var TA=function(e){return e[e.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",e[e.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",e[e.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR",e}(TA||{}),Qh=function(){function e(){}return e.createFrom=function(n){return{errorMessage:n,type:TA.UNKWOWN_ERROR}},e}();var Kh=function(){function e(n){this.verbose=n}return e.prototype.log=function(n){this.verbose&&console.log(n)},e.prototype.warn=function(n){this.verbose&&console.warn(n)},e.prototype.logError=function(n,t){(this.verbose||t===!0)&&console.error(n)},e.prototype.logErrors=function(n){if(n.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(n)},e}();function Ar(e){return typeof e>"u"||e===null}function MA(e,n,t){return e>t?t:e<n?n:e}var Ro=function(){function e(){}return e.codeParseError=function(n){return"QR code parse error, error = ".concat(n)},e.errorGettingUserMedia=function(n){return"Error getting userMedia, error = ".concat(n)},e.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},e.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},e.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},e.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},e.scannerPaused=function(){return"Scanner paused"},e}();var Je=function(){function e(){}return e.scanningStatus=function(){return"Scanning"},e.idleStatus=function(){return"Idle"},e.errorStatus=function(){return"Error"},e.permissionStatus=function(){return"Permission"},e.noCameraFoundErrorStatus=function(){return"No Cameras"},e.lastMatch=function(n){return"Last Match: ".concat(n)},e.codeScannerTitle=function(){return"Code Scanner"},e.cameraPermissionTitle=function(){return"Request Camera Permissions"},e.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},e.noCameraFound=function(){return"No camera found"},e.scanButtonStopScanningText=function(){return"Stop Scanning"},e.scanButtonStartScanningText=function(){return"Start Scanning"},e.torchOnButton=function(){return"Switch On Torch"},e.torchOffButton=function(){return"Switch Off Torch"},e.torchOnFailedMessage=function(){return"Failed to turn on torch"},e.torchOffFailedMessage=function(){return"Failed to turn off torch"},e.scanButtonScanningStarting=function(){return"Launching Camera..."},e.textIfCameraScanSelected=function(){return"Scan an Image File"},e.textIfFileScanSelected=function(){return"Scan using camera directly"},e.selectCamera=function(){return"Select Camera"},e.fileSelectionChooseImage=function(){return"Choose Image"},e.fileSelectionChooseAnother=function(){return"Choose Another"},e.fileSelectionNoImageSelected=function(){return"No image choosen"},e.anonymousCameraPrefix=function(){return"Anonymous Camera"},e.dragAndDropMessage=function(){return"Or drop an image to scan"},e.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},e.zoom=function(){return"zoom"},e.loadingImage=function(){return"Loading image..."},e.cameraScanAltText=function(){return"Camera based scan"},e.fileScanAltText=function(){return"Fule based scan"},e}();var Uw=function(){function e(){}return e.poweredBy=function(){return"Powered by "},e.reportIssues=function(){return"Report issues"},e}();var jw=function(){function e(){}return e.isMediaStreamConstraintsValid=function(n,t){if(typeof n!="object"){var r=typeof n;return t.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(r,"."),!0),!1}for(var i=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],o=new Set(i),c=Object.keys(n),h=0,g=c;h<g.length;h++){var m=g[h];if(o.has(m))return t.logError("".concat(m," is not supported videoConstaints."),!0),!1}return!0},e}();var gt=EC(OA());var Hw=function(){function e(n,t,r){if(this.formatMap=new Map([[se.QR_CODE,gt.BarcodeFormat.QR_CODE],[se.AZTEC,gt.BarcodeFormat.AZTEC],[se.CODABAR,gt.BarcodeFormat.CODABAR],[se.CODE_39,gt.BarcodeFormat.CODE_39],[se.CODE_93,gt.BarcodeFormat.CODE_93],[se.CODE_128,gt.BarcodeFormat.CODE_128],[se.DATA_MATRIX,gt.BarcodeFormat.DATA_MATRIX],[se.MAXICODE,gt.BarcodeFormat.MAXICODE],[se.ITF,gt.BarcodeFormat.ITF],[se.EAN_13,gt.BarcodeFormat.EAN_13],[se.EAN_8,gt.BarcodeFormat.EAN_8],[se.PDF_417,gt.BarcodeFormat.PDF_417],[se.RSS_14,gt.BarcodeFormat.RSS_14],[se.RSS_EXPANDED,gt.BarcodeFormat.RSS_EXPANDED],[se.UPC_A,gt.BarcodeFormat.UPC_A],[se.UPC_E,gt.BarcodeFormat.UPC_E],[se.UPC_EAN_EXTENSION,gt.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!gt)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=t,this.logger=r;var i=this.createZXingFormats(n),o=new Map;o.set(gt.DecodeHintType.POSSIBLE_FORMATS,i),o.set(gt.DecodeHintType.TRY_HARDER,!1),this.hints=o}return e.prototype.decodeAsync=function(n){var t=this;return new Promise(function(r,i){try{r(t.decode(n))}catch(o){i(o)}})},e.prototype.decode=function(n){var t=new gt.MultiFormatReader(this.verbose,this.hints),r=new gt.HTMLCanvasElementLuminanceSource(n),i=new gt.BinaryBitmap(new gt.HybridBinarizer(r)),o=t.decode(i);return{text:o.text,format:Zh.create(this.toHtml5QrcodeSupportedFormats(o.format)),debugData:this.createDebugData()}},e.prototype.createReverseFormatMap=function(){var n=new Map;return this.formatMap.forEach(function(t,r,i){n.set(t,r)}),n},e.prototype.toHtml5QrcodeSupportedFormats=function(n){if(!this.reverseFormatMap.has(n))throw"reverseFormatMap doesn't have ".concat(n);return this.reverseFormatMap.get(n)},e.prototype.createZXingFormats=function(n){for(var t=[],r=0,i=n;r<i.length;r++){var o=i[r];this.formatMap.has(o)?t.push(this.formatMap.get(o)):this.logger.logError("".concat(o," is not supported by")+"ZXingHtml5QrcodeShim")}return t},e.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},e}();var C9=function(e,n,t,r){function i(o){return o instanceof t?o:new t(function(c){c(o)})}return new(t||(t=Promise))(function(o,c){function h(v){try{m(r.next(v))}catch(x){c(x)}}function g(v){try{m(r.throw(v))}catch(x){c(x)}}function m(v){v.done?o(v.value):i(v.value).then(h,g)}m((r=r.apply(e,n||[])).next())})},_9=function(e,n){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,c;return c={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function h(m){return function(v){return g([m,v])}}function g(m){if(r)throw new TypeError("Generator is already executing.");for(;c&&(c=0,m[0]&&(t=0)),t;)try{if(r=1,i&&(o=m[0]&2?i.return:m[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,m[1])).done)return o;switch(i=0,o&&(m=[m[0]&2,o.value]),m[0]){case 0:case 1:o=m;break;case 4:return t.label++,{value:m[1],done:!1};case 5:t.label++,i=m[1],m=[0];continue;case 7:m=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(m[0]===6||m[0]===2)){t=0;continue}if(m[0]===3&&(!o||m[1]>o[0]&&m[1]<o[3])){t.label=m[1];break}if(m[0]===6&&t.label<o[1]){t.label=o[1],o=m;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(m);break}o[2]&&t.ops.pop(),t.trys.pop();continue}m=n.call(e,t)}catch(v){m=[6,v],i=0}finally{r=o=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},zw=function(){function e(n,t,r){if(this.formatMap=new Map([[se.QR_CODE,"qr_code"],[se.AZTEC,"aztec"],[se.CODABAR,"codabar"],[se.CODE_39,"code_39"],[se.CODE_93,"code_93"],[se.CODE_128,"code_128"],[se.DATA_MATRIX,"data_matrix"],[se.ITF,"itf"],[se.EAN_13,"ean_13"],[se.EAN_8,"ean_8"],[se.PDF_417,"pdf417"],[se.UPC_A,"upc_a"],[se.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!e.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=t,this.logger=r;var i=this.createBarcodeDetectorFormats(n);if(this.detector=new BarcodeDetector(i),!this.detector)throw"BarcodeDetector detector not supported"}return e.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var n=new BarcodeDetector({formats:["qr_code"]});return typeof n<"u"},e.prototype.decodeAsync=function(n){return C9(this,void 0,void 0,function(){var t,r;return _9(this,function(i){switch(i.label){case 0:return[4,this.detector.detect(n)];case 1:if(t=i.sent(),!t||t.length===0)throw"No barcode or QR code detected.";return r=this.selectLargestBarcode(t),[2,{text:r.rawValue,format:Zh.create(this.toHtml5QrcodeSupportedFormats(r.format)),debugData:this.createDebugData()}]}})})},e.prototype.selectLargestBarcode=function(n){for(var t=null,r=0,i=0,o=n;i<o.length;i++){var c=o[i],h=c.boundingBox.width*c.boundingBox.height;h>r&&(r=h,t=c)}if(!t)throw"No largest barcode found";return t},e.prototype.createBarcodeDetectorFormats=function(n){for(var t=[],r=0,i=n;r<i.length;r++){var o=i[r];this.formatMap.has(o)?t.push(this.formatMap.get(o)):this.logger.warn("".concat(o," is not supported by")+"BarcodeDetectorDelegate")}return{formats:t}},e.prototype.toHtml5QrcodeSupportedFormats=function(n){if(!this.reverseFormatMap.has(n))throw"reverseFormatMap doesn't have ".concat(n);return this.reverseFormatMap.get(n)},e.prototype.createReverseFormatMap=function(){var n=new Map;return this.formatMap.forEach(function(t,r,i){n.set(t,r)}),n},e.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},e}();var RA=function(e,n,t,r){function i(o){return o instanceof t?o:new t(function(c){c(o)})}return new(t||(t=Promise))(function(o,c){function h(v){try{m(r.next(v))}catch(x){c(x)}}function g(v){try{m(r.throw(v))}catch(x){c(x)}}function m(v){v.done?o(v.value):i(v.value).then(h,g)}m((r=r.apply(e,n||[])).next())})},PA=function(e,n){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,c;return c={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function h(m){return function(v){return g([m,v])}}function g(m){if(r)throw new TypeError("Generator is already executing.");for(;c&&(c=0,m[0]&&(t=0)),t;)try{if(r=1,i&&(o=m[0]&2?i.return:m[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,m[1])).done)return o;switch(i=0,o&&(m=[m[0]&2,o.value]),m[0]){case 0:case 1:o=m;break;case 4:return t.label++,{value:m[1],done:!1};case 5:t.label++,i=m[1],m=[0];continue;case 7:m=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(m[0]===6||m[0]===2)){t=0;continue}if(m[0]===3&&(!o||m[1]>o[0]&&m[1]<o[3])){t.label=m[1];break}if(m[0]===6&&t.label<o[1]){t.label=o[1],o=m;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(m);break}o[2]&&t.ops.pop(),t.trys.pop();continue}m=n.call(e,t)}catch(v){m=[6,v],i=0}finally{r=o=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},kA=function(){function e(n,t,r,i){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=r,t&&zw.isSupported()?(this.primaryDecoder=new zw(n,r,i),this.secondaryDecoder=new Hw(n,r,i)):this.primaryDecoder=new Hw(n,r,i)}return e.prototype.decodeAsync=function(n){return RA(this,void 0,void 0,function(){var t;return PA(this,function(r){switch(r.label){case 0:t=performance.now(),r.label=1;case 1:return r.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(n)];case 2:return[2,r.sent()];case 3:return this.possiblyLogPerformance(t),[7];case 4:return[2]}})})},e.prototype.decodeRobustlyAsync=function(n){return RA(this,void 0,void 0,function(){var t,r;return PA(this,function(i){switch(i.label){case 0:t=performance.now(),i.label=1;case 1:return i.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(n)];case 2:return[2,i.sent()];case 3:if(r=i.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(n)];throw r;case 4:return this.possiblyLogPerformance(t),[7];case 5:return[2]}})})},e.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},e.prototype.possiblyLogPerformance=function(n){if(this.verbose){var t=performance.now()-n;this.executionResults.push(t),this.executions++,this.possiblyFlushPerformanceReport()}},e.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var n=0,t=0,r=this.executionResults;t<r.length;t++){var i=r[t];n+=i}var o=n/this.executionResults.length;console.log("".concat(o," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},e}();var Ww=function(){var e=function(n,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(n,t);function r(){this.constructor=n}n.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ep=function(e,n,t,r){function i(o){return o instanceof t?o:new t(function(c){c(o)})}return new(t||(t=Promise))(function(o,c){function h(v){try{m(r.next(v))}catch(x){c(x)}}function g(v){try{m(r.throw(v))}catch(x){c(x)}}function m(v){v.done?o(v.value):i(v.value).then(h,g)}m((r=r.apply(e,n||[])).next())})},tp=function(e,n){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,c;return c={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function h(m){return function(v){return g([m,v])}}function g(m){if(r)throw new TypeError("Generator is already executing.");for(;c&&(c=0,m[0]&&(t=0)),t;)try{if(r=1,i&&(o=m[0]&2?i.return:m[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,m[1])).done)return o;switch(i=0,o&&(m=[m[0]&2,o.value]),m[0]){case 0:case 1:o=m;break;case 4:return t.label++,{value:m[1],done:!1};case 5:t.label++,i=m[1],m=[0];continue;case 7:m=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(m[0]===6||m[0]===2)){t=0;continue}if(m[0]===3&&(!o||m[1]>o[0]&&m[1]<o[3])){t.label=m[1];break}if(m[0]===6&&t.label<o[1]){t.label=o[1],o=m;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(m);break}o[2]&&t.ops.pop(),t.trys.pop();continue}m=n.call(e,t)}catch(v){m=[6,v],i=0}finally{r=o=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},LA=function(){function e(n,t){this.name=n,this.track=t}return e.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},e.prototype.apply=function(n){var t={};t[this.name]=n;var r={advanced:[t]};return this.track.applyConstraints(r)},e.prototype.value=function(){var n=this.track.getSettings();if(this.name in n){var t=n[this.name];return t}return null},e}(),v9=function(e){Ww(n,e);function n(t,r){return e.call(this,t,r)||this}return n.prototype.min=function(){return this.getCapabilities().min},n.prototype.max=function(){return this.getCapabilities().max},n.prototype.step=function(){return this.getCapabilities().step},n.prototype.apply=function(t){var r={};r[this.name]=t;var i={advanced:[r]};return this.track.applyConstraints(i)},n.prototype.getCapabilities=function(){this.failIfNotSupported();var t=this.track.getCapabilities(),r=t[this.name];return{min:r.min,max:r.max,step:r.step}},n.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},n}(LA),x9=function(e){Ww(n,e);function n(t){return e.call(this,"zoom",t)||this}return n}(v9),b9=function(e){Ww(n,e);function n(t){return e.call(this,"torch",t)||this}return n}(LA),E9=function(){function e(n){this.track=n}return e.prototype.zoomFeature=function(){return new x9(this.track)},e.prototype.torchFeature=function(){return new b9(this.track)},e}(),I9=function(){function e(n,t,r){this.isClosed=!1,this.parentElement=n,this.mediaStream=t,this.callbacks=r,this.surface=this.createVideoElement(this.parentElement.clientWidth),n.append(this.surface)}return e.prototype.createVideoElement=function(n){var t=document.createElement("video");return t.style.width="".concat(n,"px"),t.style.display="block",t.muted=!0,t.setAttribute("muted","true"),t.playsInline=!0,t},e.prototype.setupSurface=function(){var n=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var t=function(){var r=n.surface.clientWidth,i=n.surface.clientHeight;n.callbacks.onRenderSurfaceReady(r,i),n.surface.removeEventListener("playing",t)};this.surface.addEventListener("playing",t),this.surface.srcObject=this.mediaStream,this.surface.play()},e.create=function(n,t,r,i){return ep(this,void 0,void 0,function(){var o,c;return tp(this,function(h){switch(h.label){case 0:return o=new e(n,t,i),r.aspectRatio?(c={aspectRatio:r.aspectRatio},[4,o.getFirstTrackOrFail().applyConstraints(c)]):[3,2];case 1:h.sent(),h.label=2;case 2:return o.setupSurface(),[2,o]}})})},e.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},e.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},e.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},e.prototype.resume=function(n){this.failIfClosed();var t=this,r=function(){setTimeout(n,200),t.surface.removeEventListener("playing",r)};this.surface.addEventListener("playing",r),this.surface.play()},e.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},e.prototype.getSurface=function(){return this.failIfClosed(),this.surface},e.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},e.prototype.applyVideoConstraints=function(n){return ep(this,void 0,void 0,function(){return tp(this,function(t){if("aspectRatio"in n)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(n)]})})},e.prototype.close=function(){if(this.isClosed)return Promise.resolve();var n=this;return new Promise(function(t,r){var i=n.mediaStream.getVideoTracks(),o=i.length,c=0;n.mediaStream.getVideoTracks().forEach(function(h){n.mediaStream.removeTrack(h),h.stop(),++c,c>=o&&(n.isClosed=!0,n.parentElement.removeChild(n.surface),t())})})},e.prototype.getCapabilities=function(){return new E9(this.getFirstTrackOrFail())},e}(),FA=function(){function e(n){this.mediaStream=n}return e.prototype.render=function(n,t,r){return ep(this,void 0,void 0,function(){return tp(this,function(i){return[2,I9.create(n,this.mediaStream,t,r)]})})},e.create=function(n){return ep(this,void 0,void 0,function(){var t,r;return tp(this,function(i){switch(i.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return t={audio:!1,video:n},[4,navigator.mediaDevices.getUserMedia(t)];case 1:return r=i.sent(),[2,new e(r)]}})})},e}();var BA=function(e,n,t,r){function i(o){return o instanceof t?o:new t(function(c){c(o)})}return new(t||(t=Promise))(function(o,c){function h(v){try{m(r.next(v))}catch(x){c(x)}}function g(v){try{m(r.throw(v))}catch(x){c(x)}}function m(v){v.done?o(v.value):i(v.value).then(h,g)}m((r=r.apply(e,n||[])).next())})},VA=function(e,n){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,c;return c={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function h(m){return function(v){return g([m,v])}}function g(m){if(r)throw new TypeError("Generator is already executing.");for(;c&&(c=0,m[0]&&(t=0)),t;)try{if(r=1,i&&(o=m[0]&2?i.return:m[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,m[1])).done)return o;switch(i=0,o&&(m=[m[0]&2,o.value]),m[0]){case 0:case 1:o=m;break;case 4:return t.label++,{value:m[1],done:!1};case 5:t.label++,i=m[1],m=[0];continue;case 7:m=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(m[0]===6||m[0]===2)){t=0;continue}if(m[0]===3&&(!o||m[1]>o[0]&&m[1]<o[3])){t.label=m[1];break}if(m[0]===6&&t.label<o[1]){t.label=o[1],o=m;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(m);break}o[2]&&t.ops.pop(),t.trys.pop();continue}m=n.call(e,t)}catch(v){m=[6,v],i=0}finally{r=o=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},UA=function(){function e(){}return e.failIfNotSupported=function(){return BA(this,void 0,void 0,function(){return VA(this,function(n){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new e]})})},e.prototype.create=function(n){return BA(this,void 0,void 0,function(){return VA(this,function(t){return[2,FA.create(n)]})})},e}();var S9=function(e,n,t,r){function i(o){return o instanceof t?o:new t(function(c){c(o)})}return new(t||(t=Promise))(function(o,c){function h(v){try{m(r.next(v))}catch(x){c(x)}}function g(v){try{m(r.throw(v))}catch(x){c(x)}}function m(v){v.done?o(v.value):i(v.value).then(h,g)}m((r=r.apply(e,n||[])).next())})},D9=function(e,n){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,c;return c={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function h(m){return function(v){return g([m,v])}}function g(m){if(r)throw new TypeError("Generator is already executing.");for(;c&&(c=0,m[0]&&(t=0)),t;)try{if(r=1,i&&(o=m[0]&2?i.return:m[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,m[1])).done)return o;switch(i=0,o&&(m=[m[0]&2,o.value]),m[0]){case 0:case 1:o=m;break;case 4:return t.label++,{value:m[1],done:!1};case 5:t.label++,i=m[1],m=[0];continue;case 7:m=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(m[0]===6||m[0]===2)){t=0;continue}if(m[0]===3&&(!o||m[1]>o[0]&&m[1]<o[3])){t.label=m[1];break}if(m[0]===6&&t.label<o[1]){t.label=o[1],o=m;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(m);break}o[2]&&t.ops.pop(),t.trys.pop();continue}m=n.call(e,t)}catch(v){m=[6,v],i=0}finally{r=o=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},jA=function(){function e(){}return e.retrieve=function(){if(navigator.mediaDevices)return e.getCamerasFromMediaDevices();var n=MediaStreamTrack;return MediaStreamTrack&&n.getSources?e.getCamerasFromMediaStreamTrack():e.rejectWithError()},e.rejectWithError=function(){var n=Ro.unableToQuerySupportedDevices();return e.isHttpsOrLocalhost()||(n=Ro.insecureContextCameraQueryError()),Promise.reject(n)},e.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var n=location.host.split(":")[0];return n==="127.0.0.1"||n==="localhost"},e.getCamerasFromMediaDevices=function(){return S9(this,void 0,void 0,function(){var n,t,r,i,o,c,h;return D9(this,function(g){switch(g.label){case 0:return n=function(m){for(var v=m.getVideoTracks(),x=0,I=v;x<I.length;x++){var A=I[x];A.enabled=!1,A.stop(),m.removeTrack(A)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return t=g.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(r=g.sent(),i=[],o=0,c=r;o<c.length;o++)h=c[o],h.kind==="videoinput"&&i.push({id:h.deviceId,label:h.label});return n(t),[2,i]}})})},e.getCamerasFromMediaStreamTrack=function(){return new Promise(function(n,t){var r=function(o){for(var c=[],h=0,g=o;h<g.length;h++){var m=g[h];m.kind==="video"&&c.push({id:m.id,label:m.label})}n(c)},i=MediaStreamTrack;i.getSources(r)})},e}();var Lt=function(e){return e[e.UNKNOWN=0]="UNKNOWN",e[e.NOT_STARTED=1]="NOT_STARTED",e[e.SCANNING=2]="SCANNING",e[e.PAUSED=3]="PAUSED",e}(Lt||{}),A9=function(){function e(){this.state=Lt.NOT_STARTED,this.onGoingTransactionNewState=Lt.UNKNOWN}return e.prototype.directTransition=function(n){this.failIfTransitionOngoing(),this.validateTransition(n),this.state=n},e.prototype.startTransition=function(n){return this.failIfTransitionOngoing(),this.validateTransition(n),this.onGoingTransactionNewState=n,this},e.prototype.execute=function(){if(this.onGoingTransactionNewState===Lt.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var n=this.onGoingTransactionNewState;this.onGoingTransactionNewState=Lt.UNKNOWN,this.directTransition(n)},e.prototype.cancel=function(){if(this.onGoingTransactionNewState===Lt.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=Lt.UNKNOWN},e.prototype.getState=function(){return this.state},e.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==Lt.UNKNOWN)throw"Cannot transition to a new state, already under transition"},e.prototype.validateTransition=function(n){switch(this.state){case Lt.UNKNOWN:throw"Transition from unknown is not allowed";case Lt.NOT_STARTED:this.failIfNewStateIs(n,[Lt.PAUSED]);break;case Lt.SCANNING:break;case Lt.PAUSED:break}},e.prototype.failIfNewStateIs=function(n,t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(n===o)throw"Cannot transition from ".concat(this.state," to ").concat(n)}},e}(),T9=function(){function e(n){this.stateManager=n}return e.prototype.startTransition=function(n){return this.stateManager.startTransition(n)},e.prototype.directTransition=function(n){this.stateManager.directTransition(n)},e.prototype.getState=function(){return this.stateManager.getState()},e.prototype.canScanFile=function(){return this.stateManager.getState()===Lt.NOT_STARTED},e.prototype.isScanning=function(){return this.stateManager.getState()!==Lt.NOT_STARTED},e.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===Lt.SCANNING},e.prototype.isPaused=function(){return this.stateManager.getState()===Lt.PAUSED},e}();var HA=function(){function e(){}return e.create=function(){return new T9(new A9)},e}();var M9=function(){var e=function(n,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(n,t);function r(){this.constructor=n}n.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),hr=function(e){M9(n,e);function n(){return e!==null&&e.apply(this,arguments)||this}return n.DEFAULT_WIDTH=300,n.DEFAULT_WIDTH_OFFSET=2,n.FILE_SCAN_MIN_HEIGHT=300,n.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,n.MIN_QR_BOX_SIZE=50,n.SHADED_LEFT=1,n.SHADED_RIGHT=2,n.SHADED_TOP=3,n.SHADED_BOTTOM=4,n.SHADED_REGION_ELEMENT_ID="qr-shaded-region",n.VERBOSE=!1,n.BORDER_SHADER_DEFAULT_COLOR="#ffffff",n.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",n}(tr),N9=function(){function e(n,t){this.logger=t,this.fps=hr.SCAN_DEFAULT_FPS,n?(n.fps&&(this.fps=n.fps),this.disableFlip=n.disableFlip===!0,this.qrbox=n.qrbox,this.aspectRatio=n.aspectRatio,this.videoConstraints=n.videoConstraints):this.disableFlip=hr.DEFAULT_DISABLE_FLIP}return e.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?jw.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},e.prototype.isShadedBoxEnabled=function(){return!Ar(this.qrbox)},e.create=function(n,t){return new e(n,t)},e}(),np=function(){function e(n,t){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(n))throw"HTML Element with id=".concat(n," not found");this.elementId=n,this.verbose=!1;var r,i;typeof t=="boolean"?this.verbose=t===!0:t&&(i=t,this.verbose=i.verbose===!0,r=i.experimentalFeatures),this.logger=new Kh(this.verbose),this.qrcode=new kA(this.getSupportedFormats(t),this.getUseBarCodeDetectorIfSupported(i),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=HA.create()}return e.prototype.start=function(n,t,r,i){var o=this;if(!n)throw"cameraIdOrConfig is required";if(!r||typeof r!="function")throw"qrCodeSuccessCallback is required and should be a function.";var c;i?c=i:c=this.verbose?this.logger.log:function(){};var h=N9.create(t,this.logger);this.clearElement();var g=!1;h.videoConstraints&&(h.isMediaStreamConstraintsValid()?g=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var m=g,v=document.getElementById(this.elementId),x=v.clientWidth?v.clientWidth:hr.DEFAULT_WIDTH;v.style.position="relative",this.shouldScan=!0,this.element=v;var I=this,A=this.stateManagerProxy.startTransition(Lt.SCANNING);return new Promise(function(R,j){var $=m?h.videoConstraints:I.createVideoConstraints(n);if(!$){A.cancel(),j("videoConstraints should be defined");return}var W={};(!m||h.aspectRatio)&&(W.aspectRatio=h.aspectRatio);var ce={onRenderSurfaceReady:function(Xe,ge){I.setupUi(Xe,ge,h),I.isScanning=!0,I.foreverScan(h,r,c)}};UA.failIfNotSupported().then(function(Xe){Xe.create($).then(function(ge){return ge.render(o.element,W,ce).then(function(H){I.renderedCamera=H,A.execute(),R(null)}).catch(function(H){A.cancel(),j(H)})}).catch(function(ge){A.cancel(),j(Ro.errorGettingUserMedia(ge))})}).catch(function(Xe){A.cancel(),j(Ro.cameraStreamingNotSupported())})})},e.prototype.pause=function(n){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(Lt.PAUSED),this.showPausedState(),(Ar(n)||n!==!0)&&(n=!1),n&&this.renderedCamera&&this.renderedCamera.pause()},e.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var n=this,t=function(){n.stateManagerProxy.directTransition(Lt.SCANNING),n.hidePausedState()};if(!this.renderedCamera.isPaused()){t();return}this.renderedCamera.resume(function(){t()})},e.prototype.getState=function(){return this.stateManagerProxy.getState()},e.prototype.stop=function(){var n=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var t=this.stateManagerProxy.startTransition(Lt.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var r=function(){if(n.element){var o=document.getElementById(hr.SHADED_REGION_ELEMENT_ID);o&&n.element.removeChild(o)}},i=this;return this.renderedCamera.close().then(function(){return i.renderedCamera=null,i.element&&(i.element.removeChild(i.canvasElement),i.canvasElement=null),r(),i.qrRegion&&(i.qrRegion=null),i.context&&(i.context=null),t.execute(),i.hidePausedState(),i.isScanning=!1,Promise.resolve()})},e.prototype.scanFile=function(n,t){return this.scanFileV2(n,t).then(function(r){return r.decodedText})},e.prototype.scanFileV2=function(n,t){var r=this;if(!n||!(n instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(Ar(t)&&(t=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(i,o){r.possiblyCloseLastScanImageFile(),r.clearElement(),r.lastScanImageFile=URL.createObjectURL(n);var c=new Image;c.onload=function(){var h=c.width,g=c.height,m=document.getElementById(r.elementId),v=m.clientWidth?m.clientWidth:hr.DEFAULT_WIDTH,x=Math.max(m.clientHeight?m.clientHeight:g,hr.FILE_SCAN_MIN_HEIGHT),I=r.computeCanvasDrawConfig(h,g,v,x);if(t){var A=r.createCanvasElement(v,x,"qr-canvas-visible");A.style.display="inline-block",m.appendChild(A);var R=A.getContext("2d");if(!R)throw"Unable to get 2d context from canvas";R.canvas.width=v,R.canvas.height=x,R.drawImage(c,0,0,h,g,I.x,I.y,I.width,I.height)}var j=hr.FILE_SCAN_HIDDEN_CANVAS_PADDING,$=Math.max(c.width,I.width),W=Math.max(c.height,I.height),ce=$+2*j,Xe=W+2*j,ge=r.createCanvasElement(ce,Xe);m.appendChild(ge);var H=ge.getContext("2d");if(!H)throw"Unable to get 2d context from canvas";H.canvas.width=ce,H.canvas.height=Xe,H.drawImage(c,0,0,h,g,j,j,$,W);try{r.qrcode.decodeRobustlyAsync(ge).then(function(fe){i(Vw.createFromQrcodeResult(fe))}).catch(o)}catch(fe){o("QR code parse error, error = ".concat(fe))}},c.onerror=o,c.onabort=o,c.onstalled=o,c.onsuspend=o,c.src=URL.createObjectURL(n)})},e.prototype.clear=function(){this.clearElement()},e.getCameras=function(){return jA.retrieve()},e.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},e.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},e.prototype.applyVideoConstraints=function(n){if(n){if(!jw.isMediaStreamConstraintsValid(n,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(n)},e.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},e.prototype.getSupportedFormats=function(n){var t=[se.QR_CODE,se.AZTEC,se.CODABAR,se.CODE_39,se.CODE_93,se.CODE_128,se.DATA_MATRIX,se.MAXICODE,se.ITF,se.EAN_13,se.EAN_8,se.PDF_417,se.RSS_14,se.RSS_EXPANDED,se.UPC_A,se.UPC_E,se.UPC_EAN_EXTENSION];if(!n||typeof n=="boolean"||!n.formatsToSupport)return t;if(!Array.isArray(n.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(n.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var r=[],i=0,o=n.formatsToSupport;i<o.length;i++){var c=o[i];AA(c)?r.push(c):this.logger.warn("Invalid format: ".concat(c," passed in config, ignoring."))}if(r.length===0)throw"None of formatsToSupport match supported values.";return r},e.prototype.getUseBarCodeDetectorIfSupported=function(n){if(Ar(n))return!0;if(!Ar(n.useBarCodeDetectorIfSupported))return n.useBarCodeDetectorIfSupported!==!1;if(Ar(n.experimentalFeatures))return!0;var t=n.experimentalFeatures;return Ar(t.useBarCodeDetectorIfSupported)?!0:t.useBarCodeDetectorIfSupported!==!1},e.prototype.validateQrboxSize=function(n,t,r){var i=this,o=r.qrbox;this.validateQrboxConfig(o);var c=this.toQrdimensions(n,t,o),h=function(m){if(m<hr.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(hr.MIN_QR_BOX_SIZE,"px.")},g=function(m){return m>n&&(i.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),m=n),m};h(c.width),h(c.height),c.width=g(c.width)},e.prototype.validateQrboxConfig=function(n){if(typeof n!="number"&&typeof n!="function"&&(n.width===void 0||n.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},e.prototype.toQrdimensions=function(n,t,r){if(typeof r=="number")return{width:r,height:r};if(typeof r=="function")try{return r(n,t)}catch(i){throw new Error("qrbox config was passed as a function but it failed with unknown error"+i)}return r},e.prototype.setupUi=function(n,t,r){r.isShadedBoxEnabled()&&this.validateQrboxSize(n,t,r);var i=Ar(r.qrbox)?{width:n,height:t}:r.qrbox;this.validateQrboxConfig(i);var o=this.toQrdimensions(n,t,i);o.height>t&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var c=r.isShadedBoxEnabled()&&o.height<=t,h={x:0,y:0,width:n,height:t},g=c?this.getShadedRegionBounds(n,t,o):h,m=this.createCanvasElement(g.width,g.height),v={willReadFrequently:!0},x=m.getContext("2d",v);x.canvas.width=g.width,x.canvas.height=g.height,this.element.append(m),c&&this.possiblyInsertShadingElement(this.element,n,t,o),this.createScannerPausedUiElement(this.element),this.qrRegion=g,this.context=x,this.canvasElement=m},e.prototype.createScannerPausedUiElement=function(n){var t=document.createElement("div");t.innerText=Ro.scannerPaused(),t.style.display="none",t.style.position="absolute",t.style.top="0px",t.style.zIndex="1",t.style.background="rgba(9, 9, 9, 0.46)",t.style.color="#FFECEC",t.style.textAlign="center",t.style.width="100%",n.appendChild(t),this.scannerPausedUiElement=t},e.prototype.scanContext=function(n,t){var r=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(i){return n(i.text,Vw.createFromQrcodeResult(i)),r.possiblyUpdateShaders(!0),!0}).catch(function(i){r.possiblyUpdateShaders(!1);var o=Ro.codeParseError(i);return t(o,Qh.createFrom(o)),!1})},e.prototype.foreverScan=function(n,t,r){var i=this;if(this.shouldScan&&this.renderedCamera){var o=this.renderedCamera.getSurface(),c=o.videoWidth/o.clientWidth,h=o.videoHeight/o.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var g=this.qrRegion.width*c,m=this.qrRegion.height*h,v=this.qrRegion.x*c,x=this.qrRegion.y*h;this.context.drawImage(o,v,x,g,m,0,0,this.qrRegion.width,this.qrRegion.height);var I=function(){i.foreverScanTimeout=setTimeout(function(){i.foreverScan(n,t,r)},i.getTimeoutFps(n.fps))};this.scanContext(t,r).then(function(A){!A&&n.disableFlip!==!0?(i.context.translate(i.context.canvas.width,0),i.context.scale(-1,1),i.scanContext(t,r).finally(function(){I()})):I()}).catch(function(A){i.logger.logError("Error happend while scanning context",A),I()})}},e.prototype.createVideoConstraints=function(n){if(typeof n=="string")return{deviceId:{exact:n}};if(typeof n=="object"){var t="facingMode",r="deviceId",i={user:!0,environment:!0},o="exact",c=function(R){if(R in i)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(R,"'")},h=Object.keys(n);if(h.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(h.length," keys");var g=Object.keys(n)[0];if(g!==t&&g!==r)throw"Only '".concat(t,"' and '").concat(r,"' ")+" are supported for 'cameraIdOrConfig'";if(g===t){var m=n.facingMode;if(typeof m=="string"){if(c(m))return{facingMode:m}}else if(typeof m=="object")if(o in m){if(c(m["".concat(o)]))return{facingMode:{exact:m["".concat(o)]}}}else throw"'facingMode' should be string or object with"+" ".concat(o," as key.");else{var v=typeof m;throw"Invalid type of 'facingMode' = ".concat(v)}}else{var x=n.deviceId;if(typeof x=="string")return{deviceId:x};if(typeof x=="object"){if(o in x)return{deviceId:{exact:x["".concat(o)]}};throw"'deviceId' should be string or object with"+" ".concat(o," as key.")}else{var I=typeof x;throw"Invalid type of 'deviceId' = ".concat(I)}}}var A=typeof n;throw"Invalid type of 'cameraIdOrConfig' = ".concat(A)},e.prototype.computeCanvasDrawConfig=function(n,t,r,i){if(n<=r&&t<=i){var o=(r-n)/2,c=(i-t)/2;return{x:o,y:c,width:n,height:t}}else{var h=n,g=t;return n>r&&(t=r/n*t,n=r),t>i&&(n=i/t*n,t=i),this.logger.log("Image downsampled from "+"".concat(h,"X").concat(g)+" to ".concat(n,"X").concat(t,".")),this.computeCanvasDrawConfig(n,t,r,i)}},e.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var n=document.getElementById(this.elementId);n&&(n.innerHTML="")},e.prototype.possiblyUpdateShaders=function(n){this.qrMatch!==n&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(t){t.style.backgroundColor=n?hr.BORDER_SHADER_MATCH_COLOR:hr.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=n)},e.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},e.prototype.createCanvasElement=function(n,t,r){var i=n,o=t,c=document.createElement("canvas");return c.style.width="".concat(i,"px"),c.style.height="".concat(o,"px"),c.style.display="none",c.id=Ar(r)?"qr-canvas":r,c},e.prototype.getShadedRegionBounds=function(n,t,r){if(r.width>n||r.height>t)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(n-r.width)/2,y:(t-r.height)/2,width:r.width,height:r.height}},e.prototype.possiblyInsertShadingElement=function(n,t,r,i){if(!(t-i.width<1||r-i.height<1)){var o=document.createElement("div");o.style.position="absolute";var c=(t-i.width)/2,h=(r-i.height)/2;if(o.style.borderLeft="".concat(c,"px solid rgba(0, 0, 0, 0.48)"),o.style.borderRight="".concat(c,"px solid rgba(0, 0, 0, 0.48)"),o.style.borderTop="".concat(h,"px solid rgba(0, 0, 0, 0.48)"),o.style.borderBottom="".concat(h,"px solid rgba(0, 0, 0, 0.48)"),o.style.boxSizing="border-box",o.style.top="0px",o.style.bottom="0px",o.style.left="0px",o.style.right="0px",o.id="".concat(hr.SHADED_REGION_ELEMENT_ID),t-i.width<11||r-i.height<11)this.hasBorderShaders=!1;else{var g=5,m=40;this.insertShaderBorders(o,m,g,-g,null,0,!0),this.insertShaderBorders(o,m,g,-g,null,0,!1),this.insertShaderBorders(o,m,g,null,-g,0,!0),this.insertShaderBorders(o,m,g,null,-g,0,!1),this.insertShaderBorders(o,g,m+g,-g,null,-g,!0),this.insertShaderBorders(o,g,m+g,null,-g,-g,!0),this.insertShaderBorders(o,g,m+g,-g,null,-g,!1),this.insertShaderBorders(o,g,m+g,null,-g,-g,!1),this.hasBorderShaders=!0}n.append(o)}},e.prototype.insertShaderBorders=function(n,t,r,i,o,c,h){var g=document.createElement("div");g.style.position="absolute",g.style.backgroundColor=hr.BORDER_SHADER_DEFAULT_COLOR,g.style.width="".concat(t,"px"),g.style.height="".concat(r,"px"),i!==null&&(g.style.top="".concat(i,"px")),o!==null&&(g.style.bottom="".concat(o,"px")),h?g.style.left="".concat(c,"px"):g.style.right="".concat(c,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(g),n.appendChild(g)},e.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},e.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},e.prototype.getTimeoutFps=function(n){return 1e3/n},e}();var Gw="data:image/svg+xml;base64,",zA=Gw+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",WA=Gw+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",$w=Gw+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",GA="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=";var $A=function(){function e(){}return e.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},e}(),qA=function(){function e(){this.data=$A.createDefault();var n=localStorage.getItem(e.LOCAL_STORAGE_KEY);n?this.data=JSON.parse(n):this.reset()}return e.prototype.hasCameraPermissions=function(){return this.data.hasPermission},e.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},e.prototype.setHasPermission=function(n){this.data.hasPermission=n,this.flush()},e.prototype.setLastUsedCameraId=function(n){this.data.lastUsedCameraId=n,this.flush()},e.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},e.prototype.reset=function(){this.data=$A.createDefault(),this.flush()},e.prototype.flush=function(){localStorage.setItem(e.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},e.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",e}();var O9=function(){function e(){this.infoDiv=document.createElement("div")}return e.prototype.renderInto=function(n){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=Uw.poweredBy();var t=document.createElement("a");t.innerText="ScanApp",t.href="https://scanapp.org",t.target="new",t.style.color="white",this.infoDiv.appendChild(t);var r=document.createElement("br"),i=document.createElement("br");this.infoDiv.appendChild(r),this.infoDiv.appendChild(i);var o=document.createElement("a");o.innerText=Uw.reportIssues(),o.href="https://github.com/mebjas/html5-qrcode/issues",o.target="new",o.style.color="white",this.infoDiv.appendChild(o),n.appendChild(this.infoDiv)},e.prototype.show=function(){this.infoDiv.style.display="block"},e.prototype.hide=function(){this.infoDiv.style.display="none"},e}(),R9=function(){function e(n,t){this.isShowingInfoIcon=!0,this.onTapIn=n,this.onTapOut=t,this.infoIcon=document.createElement("img")}return e.prototype.renderInto=function(n){var t=this;this.infoIcon.alt="Info icon",this.infoIcon.src=$w,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(r){return t.onHoverIn()},this.infoIcon.onmouseout=function(r){return t.onHoverOut()},this.infoIcon.onclick=function(r){return t.onClick()},n.appendChild(this.infoIcon)},e.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},e.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},e.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src=GA,this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=$w,this.infoIcon.style.opacity="0.6")},e}(),YA=function(){function e(){var n=this;this.infoDiv=new O9,this.infoIcon=new R9(function(){n.infoDiv.show()},function(){n.infoDiv.hide()})}return e.prototype.renderInto=function(n){this.infoDiv.renderInto(n),this.infoIcon.renderInto(n)},e}();var P9=function(e,n,t,r){function i(o){return o instanceof t?o:new t(function(c){c(o)})}return new(t||(t=Promise))(function(o,c){function h(v){try{m(r.next(v))}catch(x){c(x)}}function g(v){try{m(r.throw(v))}catch(x){c(x)}}function m(v){v.done?o(v.value):i(v.value).then(h,g)}m((r=r.apply(e,n||[])).next())})},k9=function(e,n){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,c;return c={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function h(m){return function(v){return g([m,v])}}function g(m){if(r)throw new TypeError("Generator is already executing.");for(;c&&(c=0,m[0]&&(t=0)),t;)try{if(r=1,i&&(o=m[0]&2?i.return:m[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,m[1])).done)return o;switch(i=0,o&&(m=[m[0]&2,o.value]),m[0]){case 0:case 1:o=m;break;case 4:return t.label++,{value:m[1],done:!1};case 5:t.label++,i=m[1],m=[0];continue;case 7:m=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(m[0]===6||m[0]===2)){t=0;continue}if(m[0]===3&&(!o||m[1]>o[0]&&m[1]<o[3])){t.label=m[1];break}if(m[0]===6&&t.label<o[1]){t.label=o[1],o=m;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(m);break}o[2]&&t.ops.pop(),t.trys.pop();continue}m=n.call(e,t)}catch(v){m=[6,v],i=0}finally{r=o=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},qw=function(){function e(){}return e.hasPermissions=function(){return P9(this,void 0,void 0,function(){var n,t,r,i;return k9(this,function(o){switch(o.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(n=o.sent(),t=0,r=n;t<r.length;t++)if(i=r[t],i.kind==="videoinput"&&i.label)return[2,!0];return[2,!1]}})})},e}();var Yi=function(){function e(n){this.supportedScanTypes=this.validateAndReturnScanTypes(n)}return e.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},e.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},e.prototype.isCameraScanRequired=function(){for(var n=0,t=this.supportedScanTypes;n<t.length;n++){var r=t[n];if(e.isCameraScanType(r))return!0}return!1},e.isCameraScanType=function(n){return n===_i.SCAN_TYPE_CAMERA},e.isFileScanType=function(n){return n===_i.SCAN_TYPE_FILE},e.prototype.validateAndReturnScanTypes=function(n){if(!n||n.length===0)return tr.DEFAULT_SUPPORTED_SCAN_TYPE;var t=tr.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(n.length>t)throw"Max ".concat(t," values expected for ")+"supportedScanTypes";for(var r=0,i=n;r<i.length;r++){var o=i[r];if(!tr.DEFAULT_SUPPORTED_SCAN_TYPE.includes(o))throw"Unsupported scan type ".concat(o)}return n},e}();var yn=function(){function e(){}return e.ALL_ELEMENT_CLASS="html5-qrcode-element",e.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",e.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",e.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",e.TORCH_BUTTON_ID="html5-qrcode-button-torch",e.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",e.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",e.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",e.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",e.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",e.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",e}();var nr=function(){function e(){}return e.createElement=function(n,t){var r=document.createElement(n);return r.id=t,r.classList.add(yn.ALL_ELEMENT_CLASS),n==="button"&&r.setAttribute("type","button"),r},e}();var ZA=function(e,n,t,r){function i(o){return o instanceof t?o:new t(function(c){c(o)})}return new(t||(t=Promise))(function(o,c){function h(v){try{m(r.next(v))}catch(x){c(x)}}function g(v){try{m(r.throw(v))}catch(x){c(x)}}function m(v){v.done?o(v.value):i(v.value).then(h,g)}m((r=r.apply(e,n||[])).next())})},QA=function(e,n){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,c;return c={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function h(m){return function(v){return g([m,v])}}function g(m){if(r)throw new TypeError("Generator is already executing.");for(;c&&(c=0,m[0]&&(t=0)),t;)try{if(r=1,i&&(o=m[0]&2?i.return:m[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,m[1])).done)return o;switch(i=0,o&&(m=[m[0]&2,o.value]),m[0]){case 0:case 1:o=m;break;case 4:return t.label++,{value:m[1],done:!1};case 5:t.label++,i=m[1],m=[0];continue;case 7:m=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(m[0]===6||m[0]===2)){t=0;continue}if(m[0]===3&&(!o||m[1]>o[0]&&m[1]<o[3])){t.label=m[1];break}if(m[0]===6&&t.label<o[1]){t.label=o[1],o=m;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(m);break}o[2]&&t.ops.pop(),t.trys.pop();continue}m=n.call(e,t)}catch(v){m=[6,v],i=0}finally{r=o=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},XA=function(){function e(n,t,r){this.isTorchOn=!1,this.torchCapability=n,this.buttonController=t,this.onTorchActionFailureCallback=r}return e.prototype.isTorchEnabled=function(){return this.isTorchOn},e.prototype.flipState=function(){return ZA(this,void 0,void 0,function(){var n,t;return QA(this,function(r){switch(r.label){case 0:this.buttonController.disable(),n=!this.isTorchOn,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.torchCapability.apply(n)];case 2:return r.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),n),[3,4];case 3:return t=r.sent(),this.propagateFailure(n,t),this.buttonController.enable(),[3,4];case 4:return[2]}})})},e.prototype.updateUiBasedOnLatestSettings=function(n,t){n===t?(this.buttonController.setText(t?Je.torchOffButton():Je.torchOnButton()),this.isTorchOn=t):this.propagateFailure(t),this.buttonController.enable()},e.prototype.propagateFailure=function(n,t){var r=n?Je.torchOnFailedMessage():Je.torchOffFailedMessage();t&&(r+="; Error = "+t),this.onTorchActionFailureCallback(r)},e.prototype.reset=function(){this.isTorchOn=!1},e}(),KA=function(){function e(n,t){this.onTorchActionFailureCallback=t,this.torchButton=nr.createElement("button",yn.TORCH_BUTTON_ID),this.torchController=new XA(n,this,t)}return e.prototype.render=function(n,t){var r=this;this.torchButton.innerText=Je.torchOnButton(),this.torchButton.style.display=t.display,this.torchButton.style.marginLeft=t.marginLeft;var i=this;this.torchButton.addEventListener("click",function(o){return ZA(r,void 0,void 0,function(){return QA(this,function(c){switch(c.label){case 0:return[4,i.torchController.flipState()];case 1:return c.sent(),i.torchController.isTorchEnabled()?(i.torchButton.classList.remove(yn.TORCH_BUTTON_CLASS_TORCH_OFF),i.torchButton.classList.add(yn.TORCH_BUTTON_CLASS_TORCH_ON)):(i.torchButton.classList.remove(yn.TORCH_BUTTON_CLASS_TORCH_ON),i.torchButton.classList.add(yn.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}})})}),n.appendChild(this.torchButton)},e.prototype.updateTorchCapability=function(n){this.torchController=new XA(n,this,this.onTorchActionFailureCallback)},e.prototype.getTorchButton=function(){return this.torchButton},e.prototype.hide=function(){this.torchButton.style.display="none"},e.prototype.show=function(){this.torchButton.style.display="inline-block"},e.prototype.disable=function(){this.torchButton.disabled=!0},e.prototype.enable=function(){this.torchButton.disabled=!1},e.prototype.setText=function(n){this.torchButton.innerText=n},e.prototype.reset=function(){this.torchButton.innerText=Je.torchOnButton(),this.torchController.reset()},e.create=function(n,t,r,i){var o=new e(t,i);return o.render(n,r),o},e}();var JA=function(){function e(n,t,r){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=t?"block":"none",n.appendChild(this.fileBasedScanRegion);var i=document.createElement("label");i.setAttribute("for",this.getFileScanInputId()),i.style.display="inline-block",this.fileBasedScanRegion.appendChild(i),this.fileSelectionButton=nr.createElement("button",yn.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",function(h){i.click()}),i.append(this.fileSelectionButton),this.fileScanInput=nr.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",i.appendChild(this.fileScanInput);var o=this;this.fileScanInput.addEventListener("change",function(h){if(!(h==null||h.target==null)){var g=h.target;if(!(g.files&&g.files.length===0)){var m=g.files,v=m[0],x=v.name;o.setImageNameToButton(x),r(v)}}});var c=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(c),this.fileBasedScanRegion.addEventListener("dragenter",function(h){o.fileBasedScanRegion.style.border=o.fileBasedScanRegionActiveBorder(),h.stopPropagation(),h.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragleave",function(h){o.fileBasedScanRegion.style.border=o.fileBasedScanRegionDefaultBorder(),h.stopPropagation(),h.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragover",function(h){o.fileBasedScanRegion.style.border=o.fileBasedScanRegionActiveBorder(),h.stopPropagation(),h.preventDefault()}),this.fileBasedScanRegion.addEventListener("drop",function(h){h.stopPropagation(),h.preventDefault(),o.fileBasedScanRegion.style.border=o.fileBasedScanRegionDefaultBorder();var g=h.dataTransfer;if(g){var m=g.files;if(!m||m.length===0)return;for(var v=!1,x=0;x<m.length;++x){var I=m.item(x);if(I){var A=/image.*/;if(I.type.match(A)){v=!0;var R=I.name;o.setImageNameToButton(R),r(I),c.innerText=Je.dragAndDropMessage();break}}}v||(c.innerText=Je.dragAndDropMessageOnlyImages())}})}return e.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},e.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},e.prototype.isShowing=function(){return this.fileBasedScanRegion.style.display==="block"},e.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},e.prototype.createFileBasedScanRegion=function(){var n=document.createElement("div");return n.style.textAlign="center",n.style.margin="auto",n.style.width="80%",n.style.maxWidth="600px",n.style.border=this.fileBasedScanRegionDefaultBorder(),n.style.padding="10px",n.style.marginBottom="10px",n},e.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},e.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},e.prototype.createDragAndDropMessage=function(){var n=document.createElement("div");return n.innerText=Je.dragAndDropMessage(),n.style.fontWeight="400",n},e.prototype.setImageNameToButton=function(n){var t=20;if(n.length>t){var r=n.substring(0,8),i=n.length,o=n.substring(i-8,i);n="".concat(r,"....").concat(o)}var c=Je.fileSelectionChooseAnother()+" - "+n;this.fileSelectionButton.innerText=c},e.prototype.setInitialValueToButton=function(){var n=Je.fileSelectionChooseImage()+" - "+Je.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=n},e.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},e.create=function(n,t,r){var i=new e(n,t,r);return i},e}();var eT=function(){function e(n){this.selectElement=nr.createElement("select",yn.CAMERA_SELECTION_SELECT_ID),this.cameras=n,this.options=[]}return e.prototype.render=function(n){var t=document.createElement("span");t.style.marginRight="10px";var r=this.cameras.length;if(r===0)throw new Error("No cameras found");if(r===1)t.style.display="none";else{var i=Je.selectCamera();t.innerText="".concat(i," (").concat(this.cameras.length,")  ")}for(var o=1,c=0,h=this.cameras;c<h.length;c++){var g=h[c],m=g.id,v=g.label==null?m:g.label;(!v||v==="")&&(v=[Je.anonymousCameraPrefix(),o++].join(" "));var x=document.createElement("option");x.value=m,x.innerText=v,this.options.push(x),this.selectElement.appendChild(x)}t.appendChild(this.selectElement),n.appendChild(t)},e.prototype.disable=function(){this.selectElement.disabled=!0},e.prototype.isDisabled=function(){return this.selectElement.disabled===!0},e.prototype.enable=function(){this.selectElement.disabled=!1},e.prototype.getValue=function(){return this.selectElement.value},e.prototype.hasValue=function(n){for(var t=0,r=this.options;t<r.length;t++){var i=r[t];if(i.value===n)return!0}return!1},e.prototype.setValue=function(n){if(!this.hasValue(n))throw new Error("".concat(n," is not present in the camera list."));this.selectElement.value=n},e.prototype.hasSingleItem=function(){return this.cameras.length===1},e.prototype.numCameras=function(){return this.cameras.length},e.create=function(n,t){var r=new e(t);return r.render(n),r},e}();var tT=function(){function e(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=nr.createElement("input",yn.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return e.prototype.render=function(n,t){this.zoomElementContainer.style.display=t?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",n.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var r=Je.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(r),this.rangeText.style.marginRight="10px";var i=this;this.rangeInput.addEventListener("input",function(){return i.onValueChange()}),this.rangeInput.addEventListener("change",function(){return i.onValueChange()}),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},e.prototype.onValueChange=function(){var n=Je.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(n),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},e.prototype.setValues=function(n,t,r,i){this.rangeInput.min=n.toString(),this.rangeInput.max=t.toString(),this.rangeInput.step=i.toString(),this.rangeInput.value=r.toString(),this.onValueChange()},e.prototype.show=function(){this.zoomElementContainer.style.display="block"},e.prototype.hide=function(){this.zoomElementContainer.style.display="none"},e.prototype.setOnCameraZoomValueChangeCallback=function(n){this.onChangeCallback=n},e.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},e.create=function(n,t){var r=new e;return r.render(n,t),r},e}();var Tr=function(e){return e[e.STATUS_DEFAULT=0]="STATUS_DEFAULT",e[e.STATUS_SUCCESS=1]="STATUS_SUCCESS",e[e.STATUS_WARNING=2]="STATUS_WARNING",e[e.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION",e}(Tr||{});function L9(e){return{fps:e.fps,qrbox:e.qrbox,aspectRatio:e.aspectRatio,disableFlip:e.disableFlip,videoConstraints:e.videoConstraints}}function F9(e,n){return{formatsToSupport:e.formatsToSupport,useBarCodeDetectorIfSupported:e.useBarCodeDetectorIfSupported,experimentalFeatures:e.experimentalFeatures,verbose:n}}var su=function(){function e(n,t,r){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=n,this.config=this.createConfig(t),this.verbose=r===!0,!document.getElementById(n))throw"HTML Element with id=".concat(n," not found");this.scanTypeSelector=new Yi(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new Kh(this.verbose),this.persistedDataManager=new qA,t.rememberLastUsedCamera!==!0&&this.persistedDataManager.reset()}return e.prototype.render=function(n,t){var r=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(o,c){if(n)n(o,c);else{if(r.lastMatchFound===o)return;r.lastMatchFound=o,r.setHeaderMessage(Je.lastMatch(o),Tr.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(o,c){t&&t(o,c)};var i=document.getElementById(this.elementId);if(!i)throw"HTML Element with id=".concat(this.elementId," not found");i.innerHTML="",this.createBasicLayout(i),this.html5Qrcode=new np(this.getScanRegionId(),F9(this.config,this.verbose))},e.prototype.pause=function(n){(Ar(n)||n!==!0)&&(n=!1),this.getHtml5QrcodeOrFail().pause(n)},e.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},e.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},e.prototype.clear=function(){var n=this,t=function(){var r=document.getElementById(n.elementId);r&&(r.innerHTML="",n.resetBasicLayout(r))};return this.html5Qrcode?new Promise(function(r,i){if(!n.html5Qrcode){r();return}n.html5Qrcode.isScanning?n.html5Qrcode.stop().then(function(o){if(!n.html5Qrcode){r();return}n.html5Qrcode.clear(),t(),r()}).catch(function(o){n.verbose&&n.logger.logError("Unable to stop qrcode scanner",o),i(o)}):(n.html5Qrcode.clear(),t(),r())}):Promise.resolve()},e.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},e.prototype.applyVideoConstraints=function(n){return this.getHtml5QrcodeOrFail().applyVideoConstraints(n)},e.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},e.prototype.createConfig=function(n){return n?(n.fps||(n.fps=tr.SCAN_DEFAULT_FPS),n.rememberLastUsedCamera!==!tr.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(n.rememberLastUsedCamera=tr.DEFAULT_REMEMBER_LAST_CAMERA_USED),n.supportedScanTypes||(n.supportedScanTypes=tr.DEFAULT_SUPPORTED_SCAN_TYPE),n):{fps:tr.SCAN_DEFAULT_FPS,rememberLastUsedCamera:tr.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:tr.DEFAULT_SUPPORTED_SCAN_TYPE}},e.prototype.createBasicLayout=function(n){n.style.position="relative",n.style.padding="0px",n.style.border="1px solid silver",this.createHeader(n);var t=document.createElement("div"),r=this.getScanRegionId();t.id=r,t.style.width="100%",t.style.minHeight="100px",t.style.textAlign="center",n.appendChild(t),Yi.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var i=document.createElement("div"),o=this.getDashboardId();i.id=o,i.style.width="100%",n.appendChild(i),this.setupInitialDashboard(i)},e.prototype.resetBasicLayout=function(n){n.style.border="none"},e.prototype.setupInitialDashboard=function(n){this.createSection(n),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},e.prototype.createHeader=function(n){var t=document.createElement("div");t.style.textAlign="left",t.style.margin="0px",n.appendChild(t);var r=new YA;r.renderInto(t);var i=document.createElement("div");i.id=this.getHeaderMessageContainerId(),i.style.display="none",i.style.textAlign="center",i.style.fontSize="14px",i.style.padding="2px 10px",i.style.margin="4px",i.style.borderTop="1px solid #f6f6f6",t.appendChild(i)},e.prototype.createSection=function(n){var t=document.createElement("div");t.id=this.getDashboardSectionId(),t.style.width="100%",t.style.padding="10px 0px 10px 0px",t.style.textAlign="left",n.appendChild(t)},e.prototype.createCameraListUi=function(n,t,r){var i=this;i.showHideScanTypeSwapLink(!1),i.setHeaderMessage(Je.cameraPermissionRequesting());var o=function(){r||i.createPermissionButton(n,t)};np.getCameras().then(function(c){i.persistedDataManager.setHasPermission(!0),i.showHideScanTypeSwapLink(!0),i.resetHeaderMessage(),c&&c.length>0?(n.removeChild(t),i.renderCameraSelection(c)):(i.setHeaderMessage(Je.noCameraFound(),Tr.STATUS_WARNING),o())}).catch(function(c){i.persistedDataManager.setHasPermission(!1),r?r.disabled=!1:o(),i.setHeaderMessage(c,Tr.STATUS_WARNING),i.showHideScanTypeSwapLink(!0)})},e.prototype.createPermissionButton=function(n,t){var r=this,i=nr.createElement("button",this.getCameraPermissionButtonId());i.innerText=Je.cameraPermissionTitle(),i.addEventListener("click",function(){i.disabled=!0,r.createCameraListUi(n,t,i)}),t.appendChild(i)},e.prototype.createPermissionsUi=function(n,t){var r=this;if(Yi.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()){qw.hasPermissions().then(function(i){i?r.createCameraListUi(n,t):(r.persistedDataManager.setHasPermission(!1),r.createPermissionButton(n,t))}).catch(function(i){r.persistedDataManager.setHasPermission(!1),r.createPermissionButton(n,t)});return}this.createPermissionButton(n,t)},e.prototype.createSectionControlPanel=function(){var n=document.getElementById(this.getDashboardSectionId()),t=document.createElement("div");n.appendChild(t);var r=document.createElement("div");r.id=this.getDashboardSectionCameraScanRegionId(),r.style.display=Yi.isCameraScanType(this.currentScanType)?"block":"none",t.appendChild(r);var i=document.createElement("div");i.style.textAlign="center",r.appendChild(i),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(r,i),this.renderFileScanUi(t)},e.prototype.renderFileScanUi=function(n){var t=Yi.isFileScanType(this.currentScanType),r=this,i=function(o){if(!r.html5Qrcode)throw"html5Qrcode not defined";Yi.isFileScanType(r.currentScanType)&&(r.setHeaderMessage(Je.loadingImage()),r.html5Qrcode.scanFileV2(o,!0).then(function(c){r.resetHeaderMessage(),r.qrCodeSuccessCallback(c.decodedText,c)}).catch(function(c){r.setHeaderMessage(c,Tr.STATUS_WARNING),r.qrCodeErrorCallback(c,Qh.createFrom(c))}))};this.fileSelectionUi=JA.create(n,t,i)},e.prototype.renderCameraSelection=function(n){var t=this,r=this,i=document.getElementById(this.getDashboardSectionCameraScanRegionId());i.style.textAlign="center";var o=tT.create(i,!1),c=function(j){var $=j.zoomFeature();if($.isSupported()){o.setOnCameraZoomValueChangeCallback(function(ce){$.apply(ce)});var W=1;t.config.defaultZoomValueIfSupported&&(W=t.config.defaultZoomValueIfSupported),W=MA(W,$.min(),$.max()),o.setValues($.min(),$.max(),W,$.step()),o.show()}},h=eT.create(i,n),g=document.createElement("span"),m=nr.createElement("button",yn.CAMERA_START_BUTTON_ID);m.innerText=Je.scanButtonStartScanningText(),g.appendChild(m);var v=nr.createElement("button",yn.CAMERA_STOP_BUTTON_ID);v.innerText=Je.scanButtonStopScanningText(),v.style.display="none",v.disabled=!0,g.appendChild(v);var x,I=function(j){if(!j.torchFeature().isSupported()){x&&x.hide();return}x?x.updateTorchCapability(j.torchFeature()):x=KA.create(g,j.torchFeature(),{display:"none",marginLeft:"5px"},function($){r.setHeaderMessage($,Tr.STATUS_WARNING)}),x.show()};i.appendChild(g);var A=function(j){j||(m.style.display="none"),m.innerText=Je.scanButtonStartScanningText(),m.style.opacity="1",m.disabled=!1,j&&(m.style.display="inline-block")};if(m.addEventListener("click",function(j){m.innerText=Je.scanButtonScanningStarting(),h.disable(),m.disabled=!0,m.style.opacity="0.5",t.scanTypeSelector.hasMoreThanOneScanType()&&r.showHideScanTypeSwapLink(!1),r.resetHeaderMessage();var $=h.getValue();r.persistedDataManager.setLastUsedCameraId($),r.html5Qrcode.start($,L9(r.config),r.qrCodeSuccessCallback,r.qrCodeErrorCallback).then(function(W){v.disabled=!1,v.style.display="inline-block",A(!1);var ce=r.html5Qrcode.getRunningTrackCameraCapabilities();t.config.showTorchButtonIfSupported===!0&&I(ce),t.config.showZoomSliderIfSupported===!0&&c(ce)}).catch(function(W){r.showHideScanTypeSwapLink(!0),h.enable(),A(!0),r.setHeaderMessage(W,Tr.STATUS_WARNING)})}),h.hasSingleItem()&&m.click(),v.addEventListener("click",function(j){if(!r.html5Qrcode)throw"html5Qrcode not defined";v.disabled=!0,r.html5Qrcode.stop().then(function($){t.scanTypeSelector.hasMoreThanOneScanType()&&r.showHideScanTypeSwapLink(!0),h.enable(),m.disabled=!1,v.style.display="none",m.style.display="inline-block",x&&(x.reset(),x.hide()),o.removeOnCameraZoomValueChangeCallback(),o.hide(),r.insertCameraScanImageToScanRegion()}).catch(function($){v.disabled=!1,r.setHeaderMessage($,Tr.STATUS_WARNING)})}),r.persistedDataManager.getLastUsedCameraId()){var R=r.persistedDataManager.getLastUsedCameraId();h.hasValue(R)?(h.setValue(R),m.click()):r.persistedDataManager.resetLastUsedCameraId()}},e.prototype.createSectionSwap=function(){var n=this,t=Je.textIfCameraScanSelected(),r=Je.textIfFileScanSelected(),i=document.getElementById(this.getDashboardSectionId()),o=document.createElement("div");o.style.textAlign="center";var c=nr.createElement("span",this.getDashboardSectionSwapLinkId());c.style.textDecoration="underline",c.style.cursor="pointer",c.innerText=Yi.isCameraScanType(this.currentScanType)?t:r,c.addEventListener("click",function(){if(!n.sectionSwapAllowed){n.verbose&&n.logger.logError("Section swap called when not allowed");return}n.resetHeaderMessage(),n.fileSelectionUi.resetValue(),n.sectionSwapAllowed=!1,Yi.isCameraScanType(n.currentScanType)?(n.clearScanRegion(),n.getCameraScanRegion().style.display="none",n.fileSelectionUi.show(),c.innerText=r,n.currentScanType=_i.SCAN_TYPE_FILE,n.insertFileScanImageToScanRegion()):(n.clearScanRegion(),n.getCameraScanRegion().style.display="block",n.fileSelectionUi.hide(),c.innerText=t,n.currentScanType=_i.SCAN_TYPE_CAMERA,n.insertCameraScanImageToScanRegion(),n.startCameraScanIfPermissionExistsOnSwap()),n.sectionSwapAllowed=!0}),o.appendChild(c),i.appendChild(o)},e.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var n=this,t=this;if(this.persistedDataManager.hasCameraPermissions()){qw.hasPermissions().then(function(r){if(r){var i=document.getElementById(t.getCameraPermissionButtonId());if(!i)throw n.logger.logError("Permission button not found, fail;"),"Permission button not found";i.click()}else t.persistedDataManager.setHasPermission(!1)}).catch(function(r){t.persistedDataManager.setHasPermission(!1)});return}},e.prototype.resetHeaderMessage=function(){var n=document.getElementById(this.getHeaderMessageContainerId());n.style.display="none"},e.prototype.setHeaderMessage=function(n,t){t||(t=Tr.STATUS_DEFAULT);var r=this.getHeaderMessageDiv();switch(r.innerText=n,r.style.display="block",t){case Tr.STATUS_SUCCESS:r.style.background="rgba(106, 175, 80, 0.26)",r.style.color="#477735";break;case Tr.STATUS_WARNING:r.style.background="rgba(203, 36, 49, 0.14)",r.style.color="#cb2431";break;case Tr.STATUS_DEFAULT:default:r.style.background="rgba(0, 0, 0, 0)",r.style.color="rgb(17, 17, 17)";break}},e.prototype.showHideScanTypeSwapLink=function(n){this.scanTypeSelector.hasMoreThanOneScanType()&&(n!==!0&&(n=!1),this.sectionSwapAllowed=n,this.getDashboardSectionSwapLink().style.display=n?"inline-block":"none")},e.prototype.insertCameraScanImageToScanRegion=function(){var n=this,t=document.getElementById(this.getScanRegionId());if(this.cameraScanImage){t.innerHTML="<br>",t.appendChild(this.cameraScanImage);return}this.cameraScanImage=new Image,this.cameraScanImage.onload=function(r){t.innerHTML="<br>",t.appendChild(n.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=zA,this.cameraScanImage.alt=Je.cameraScanAltText()},e.prototype.insertFileScanImageToScanRegion=function(){var n=this,t=document.getElementById(this.getScanRegionId());if(this.fileScanImage){t.innerHTML="<br>",t.appendChild(this.fileScanImage);return}this.fileScanImage=new Image,this.fileScanImage.onload=function(r){t.innerHTML="<br>",t.appendChild(n.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=WA,this.fileScanImage.alt=Je.fileScanAltText()},e.prototype.clearScanRegion=function(){var n=document.getElementById(this.getScanRegionId());n.innerHTML=""},e.prototype.getDashboardSectionId=function(){return"".concat(this.elementId,"__dashboard_section")},e.prototype.getDashboardSectionCameraScanRegionId=function(){return"".concat(this.elementId,"__dashboard_section_csr")},e.prototype.getDashboardSectionSwapLinkId=function(){return yn.SCAN_TYPE_CHANGE_ANCHOR_ID},e.prototype.getScanRegionId=function(){return"".concat(this.elementId,"__scan_region")},e.prototype.getDashboardId=function(){return"".concat(this.elementId,"__dashboard")},e.prototype.getHeaderMessageContainerId=function(){return"".concat(this.elementId,"__header_message")},e.prototype.getCameraPermissionButtonId=function(){return yn.CAMERA_PERMISSION_BUTTON_ID},e.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},e.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},e.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())},e}();function B9(e,n){if(e&1&&(M(0,"p"),P(1),N()),e&2){let t=Qe();X(),Dn("Table ID: ",t.tableId,"")}}var nT=(()=>{class e{navigationService;tableId=null;uniqueLinkToken=null;ownerId=null;restaurantid=null;html5QrCodeScanner=null;constructor(t){this.navigationService=t}ngAfterViewInit(){this.html5QrCodeScanner=new su("reader",{fps:10,qrbox:{width:250,height:250}},!1),this.html5QrCodeScanner.render(this.onScanSuccess.bind(this),this.onScanFailure)}onScanSuccess(t){let r=new URL(t),i=r.searchParams.get("t"),o=r.searchParams.get("u"),c=r.searchParams.get("r"),h=r.searchParams.get("o");i?(this.tableId=i,this.uniqueLinkToken=o,this.restaurantid=c,this.ownerId=h,localStorage.setItem("customercurrentTable",this.tableId),localStorage.setItem("uniqueLinkToken",this.uniqueLinkToken),localStorage.setItem("restaurantid",this.restaurantid),localStorage.setItem("ownerid",this.ownerId),this.navigationService.NavigateTo("tableordered"),console.log("Table ID saved:",this.tableId)):console.error("Table ID not found in the scanned QR code."),this.html5QrCodeScanner?.clear()}onScanFailure(t){console.warn(`QR code scan error: ${t}`)}ngOnDestroy(){this.html5QrCodeScanner?.clear()}static \u0275fac=function(r){return new(r||e)(Z(be))};static \u0275cmp=ie({type:e,selectors:[["app-scanqrcode"]],standalone:!0,features:[oe],decls:4,vars:1,consts:[["id","reader",2,"width","300px"]],template:function(r,i){r&1&&(M(0,"p"),P(1,"scanqrcode works!"),N(),le(2,"div",0),Ut(3,B9,2,1,"p")),r&2&&(X(3),It(i.tableId?3:-1))}})}return e})();var rT=(()=>{class e{router;constructor(t){this.router=t}setOrder(t){localStorage.setItem("orderNumber",t),this.router.navigate(["/scanqrcode"])}static \u0275fac=function(r){return new(r||e)(Z(pi))};static \u0275cmp=ie({type:e,selectors:[["app-setorder"]],standalone:!0,features:[oe],decls:13,vars:0,consts:[["orderNumberInput",""],[1,"displaybox"],[1,"logo"],[1,"buttons"],["type","number","placeholder","numer zam\xF3wienia"],[3,"click"],[1,"footstatic"]],template:function(r,i){if(r&1){let o=Gt();M(0,"main")(1,"div",1)(2,"div",2)(3,"h1"),P(4,"EasyOrder"),N()(),M(5,"div",3)(6,"label"),P(7,"Wprowad\u017A numer zam\xF3wienia"),N(),le(8,"input",4,0),M(10,"button",5),Y("click",function(){Rt(o);let h=ff(9);return Pt(i.setOrder(h.value))}),P(11,"Przypisz stolik"),N()(),le(12,"div",6),N()()}}})}return e})();var iT=(()=>{class e{route;router;waiterId=null;uniqueLinkToken=null;ownerId=null;restaurantId=null;pin="";constructor(t,r){this.route=t,this.router=r,_e(De.firebaseConfig)}ngOnInit(){this.route.queryParams.subscribe(t=>{this.uniqueLinkToken=t.u||null,this.ownerId=t.o||null,this.restaurantId=t.r||null})}authenticateWaiter(){let t=ee();if(!this.restaurantId||!this.uniqueLinkToken||!this.ownerId){console.error("Missing required data");return}let r=J(t,`Owners/${this.ownerId}/Restaurants/${this.restaurantId}`);ye(r).then(i=>{if(i.exists()){let c=i.val().settings.waiter_access_pin;c&&c.toString()===this.pin?this.saveAuthData():console.error("Invalid PIN")}else console.error("Restaurant not found")}).catch(i=>{console.error("Error authenticating waiter:",i)})}saveAuthData(){localStorage.setItem("uniqueLinkToken",this.uniqueLinkToken),localStorage.setItem("restaurantid",this.restaurantId),localStorage.setItem("ownerid",this.ownerId),localStorage.setItem("waiterpin",this.pin),this.router.navigate(["/waitertablelist"])}static \u0275fac=function(r){return new(r||e)(Z(hi),Z(pi))};static \u0275cmp=ie({type:e,selectors:[["app-waiterauth"]],standalone:!0,features:[oe],decls:8,vars:1,consts:[[1,"auth-container"],["for","pin"],["id","pin","type","password","placeholder","Access Pin","required","",3,"ngModelChange","ngModel"],[3,"click"]],template:function(r,i){r&1&&(M(0,"div",0)(1,"h2"),P(2,"Waiter Authentication"),N(),M(3,"label",1),P(4,"Wprowad\u017A numer Pin:"),N(),M(5,"input",2),it("ngModelChange",function(c){return ot(i.pin,c)||(i.pin=c),c}),N(),M(6,"button",3),Y("click",function(){return i.authenticateWaiter()}),P(7,"Zaloguj"),N()()),r&2&&(X(5),rt("ngModel",i.pin))},dependencies:[jt,Zt,mn,Tn,sn]})}return e})();function V9(e,n){e&1&&(M(0,"p"),P(1,"Brak stolik\xF3w przypisanych do restauracji."),N())}function U9(e,n){if(e&1){let t=Gt();M(0,"button",13),Y("click",function(){let i=Rt(t).$implicit,o=Qe(2);return Pt(o.setTable(i.id))}),P(1),N()}if(e&2){let t=n.$implicit;X(),Dn(" ",t.name," ")}}function j9(e,n){if(e&1&&pn(0,U9,2,1,"button",12,hn),e&2){let t=Qe();gn(t.tables)}}var oT=(()=>{class e{navigationService;tables=[];isMenuOpen=!1;toggleMenu(){this.isMenuOpen=!this.isMenuOpen}constructor(t){this.navigationService=t;let r=_e(De.firebaseConfig)}ngOnInit(){this.loadTables()}loadTables(){let t=ee(),r=localStorage.getItem("currentRestaurant"),i=localStorage.getItem("ownerid");if(!r){console.error("No current restaurant found in local storage");return}let o=J(t,`Owners/${i}/Restaurants/${r}/Tables`);ye(o).then(c=>{if(c.exists()){let h=c.val();this.tables=Object.values(h)}else console.log("No tables found")}).catch(c=>{console.error("Error loading tables:",c)})}setTable(t){localStorage.setItem("currentTable",t),this.goToPage("waitertablelookup")}goToPage(t){this.navigationService.NavigateTo(t)}static \u0275fac=function(r){return new(r||e)(Z(be))};static \u0275cmp=ie({type:e,selectors:[["app-waitertablelist"]],standalone:!0,features:[oe],decls:40,vars:4,consts:[[1,"displaybox"],[1,"logo"],["id","head"],[1,"logotype"],["href","#"],[1,"burger",3,"click"],[1,"material-symbols-rounded"],[1,"menu"],["href","#",1,"menu-item"],[1,"buttons"],[1,"footstatic"],[3,"click"],[1,"table-button"],[1,"table-button",3,"click"]],template:function(r,i){r&1&&(M(0,"main")(1,"div",0)(2,"div",1)(3,"nav",2)(4,"ul")(5,"li",3)(6,"a",4),P(7,"EasyOrder"),N()(),M(8,"li",5),Y("click",function(){return i.toggleMenu()}),M(9,"span",6),P(10),N()(),M(11,"li",7)(12,"div"),P(13,"Moje zam\xF3wienia: "),M(14,"a",8),P(15,"Nowe"),N(),M(16,"a",8),P(17,"Wydane"),N()(),M(18,"div"),P(19,"Wszystkie zam\xF3wienia: "),M(20,"a",8),P(21,"Nowe"),N(),M(22,"a",8),P(23,"Wydane"),N()(),M(24,"div"),P(25,"Widok: "),M(26,"a",8),P(27,"Stoliki"),N(),M(28,"a",8),P(29,"Zam\xF3wienia"),N()()()()()(),M(30,"div",9),Ut(31,V9,2,0,"p")(32,j9,2,0),N(),M(33,"div",10)(34,"button",11),Y("click",function(){return i.goToPage("waiterscan")}),M(35,"span",6),P(36," photo_camera "),N()(),M(37,"button",11),Y("click",function(){return i.goToPage("addorder")}),M(38,"span",6),P(39," post_add "),N()()()()()),r&2&&(X(10),on(i.isMenuOpen?"X":"menu"),X(),Yr("is-open",i.isMenuOpen),X(20),It(i.tables.length===0?31:32))},styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;padding:16px;position:relative}.displaybox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center;position:relative}.logo[_ngcontent-%COMP%]{display:flex;font-size:45%;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center;margin-bottom:48px}.buttons[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:flex-start;align-items:center;align-content:center}.buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{text-align:left;width:100%;background:#fff;padding:24px;font-size:110%;color:#000;font-weight:600;letter-spacing:2px;border:1px solid #000000;transition:all .5s;margin-bottom:24px}.footstatic[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center}.footstatic[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:calc(100% - 16px);background:#fff;padding:24px;font-size:110%;color:#000;font-weight:600;letter-spacing:2px;border:1px solid #000000;transition:all .5s;margin-bottom:24px;margin-right:8px}#head[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:0;padding:0;display:flex;align-items:center;justify-content:space-between;background:#fff;box-shadow:0 2px 4px #0003}#head[_ngcontent-%COMP%]   .logotype[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding:0 8px;font-size:1.4rem;text-decoration:none;color:#000}#head[_ngcontent-%COMP%]   .burger[_ngcontent-%COMP%]{padding:0 10px;border-left:1px solid #eee;display:none;cursor:pointer}#head[_ngcontent-%COMP%]   .burger[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#999;line-height:60px}@media (max-width: 768px){#head[_ngcontent-%COMP%]   .burger[_ngcontent-%COMP%]{display:block}}#head[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]{display:flex;align-items:center}@media (max-width: 768px){#head[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]{display:none}#head[_ngcontent-%COMP%]   .menu.is-open[_ngcontent-%COMP%]{display:block;position:absolute;top:62px;background:#fff;width:100%}#head[_ngcontent-%COMP%]   .menu.is-open[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]{border-bottom:1px solid #cccccc}}#head[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]{padding:0 10px;height:60px;line-height:60px;text-decoration:none;display:block;text-transform:uppercase;font-size:.8rem;font-weight:600;color:#454545}.active[_ngcontent-%COMP%]{background:#000;color:#fff}"]})}return e})();var sT=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275cmp=ie({type:e,selectors:[["app-waitertablelookup"]],standalone:!0,features:[oe],decls:2,vars:0,template:function(r,i){r&1&&(M(0,"p"),P(1,"waitertablelookup works!"),N())}})}return e})();function H9(e,n){e&1&&(M(0,"p"),P(1,"Brak stolik\xF3w przypisanych do restauracji."),N())}function z9(e,n){if(e&1){let t=Gt();M(0,"button",14),Y("click",function(){let i=Rt(t).$implicit,o=Qe(2);return Pt(o.setTable(i.name))}),P(1),N()}if(e&2){let t=n.$implicit;X(),Dn(" ",t.name," ")}}function W9(e,n){if(e&1&&pn(0,z9,2,1,"button",13,hn),e&2){let t=Qe();gn(t.orders)}}var aT=(()=>{class e{navigationService;orders=[];constructor(t){this.navigationService=t;let r=_e(De.firebaseConfig)}isMenuOpen=!1;toggleMenu(){this.isMenuOpen=!this.isMenuOpen}ngOnInit(){this.loadOrders()}loadOrders(){let t=ee(),r=localStorage.getItem("currentRestaurant"),i=localStorage.getItem("ownerid");if(console.log("Current restaurant ID:",r),console.log("Current owner ID:",i),!r||!i){console.error("No current restaurant or owner found");return}let o=J(t,`Owners/${i}/Restaurants/${r}/Orders`);ye(o).then(c=>{if(console.log("Firebase Snapshot:",c),c.exists()){let h=c.val();console.log("Orders Data:",h),this.orders=Object.values(h),this.orders.sort((g,m)=>g.created_at<m.created_at?-1:g.created_at>m.created_at||g.completed_at&&!m.completed_at?1:!g.completed_at&&m.completed_at?-1:0),console.log("Sorted Orders:",this.orders)}else console.log("No orders found")}).catch(c=>{console.error("Error loading orders:",c)})}setTable(t){localStorage.setItem("currentTable",t),this.goToPage("waitertablelookup")}goToPage(t){this.navigationService.NavigateTo(t)}static \u0275fac=function(r){return new(r||e)(Z(be))};static \u0275cmp=ie({type:e,selectors:[["app-waiterorderlist"]],standalone:!0,features:[oe],decls:40,vars:4,consts:[[1,"displaybox"],[1,"logo"],["id","head"],[1,"logotype"],["href","#"],[1,"burger",3,"click"],[1,"material-symbols-rounded"],[1,"menu"],["href","#",1,"menu-item"],["href","#",1,"menu-item","active"],[1,"buttons"],[1,"footstatic"],[3,"click"],[1,"table-button"],[1,"table-button",3,"click"]],template:function(r,i){r&1&&(M(0,"main")(1,"div",0)(2,"div",1)(3,"nav",2)(4,"ul")(5,"li",3)(6,"a",4),P(7,"EasyOrder"),N()(),M(8,"li",5),Y("click",function(){return i.toggleMenu()}),M(9,"span",6),P(10),N()(),M(11,"li",7)(12,"div"),P(13,"Moje zam\xF3wienia: "),M(14,"a",8),P(15,"Nowe"),N(),M(16,"a",8),P(17,"Wydane"),N()(),M(18,"div"),P(19,"Wszystkie zam\xF3wienia: "),M(20,"a",8),P(21,"Nowe"),N(),M(22,"a",8),P(23,"Wydane"),N()(),M(24,"div"),P(25,"Widok: "),M(26,"a",8),P(27,"Stoliki"),N(),M(28,"a",9),P(29,"Zam\xF3wienia"),N()()()()()(),M(30,"div",10),Ut(31,H9,2,0,"p")(32,W9,2,0),N(),M(33,"div",11)(34,"button",12),Y("click",function(){return i.goToPage("waiterscan")}),M(35,"span",6),P(36," photo_camera "),N()(),M(37,"button",12),Y("click",function(){return i.goToPage("addorder")}),M(38,"span",6),P(39," post_add "),N()()()()()),r&2&&(X(10),on(i.isMenuOpen?"X":"menu"),X(),Yr("is-open",i.isMenuOpen),X(20),It(i.orders.length===0?31:32))},styles:["#head[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:0;padding:0;display:flex;align-items:center;justify-content:space-between;background:#fff;box-shadow:0 2px 4px #0003}#head[_ngcontent-%COMP%]   .logotype[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding:0 8px;font-size:1.4rem;text-decoration:none;color:#000}#head[_ngcontent-%COMP%]   .burger[_ngcontent-%COMP%]{padding:0 10px;border-left:1px solid #eee;display:none;cursor:pointer}#head[_ngcontent-%COMP%]   .burger[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#999;line-height:60px}@media (max-width: 768px){#head[_ngcontent-%COMP%]   .burger[_ngcontent-%COMP%]{display:block}}#head[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]{display:flex;align-items:center}@media (max-width: 768px){#head[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]{display:none}#head[_ngcontent-%COMP%]   .menu.is-open[_ngcontent-%COMP%]{display:block;position:absolute;top:62px;background:#fff;width:100%}#head[_ngcontent-%COMP%]   .menu.is-open[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]{border-bottom:1px solid #cccccc}}#head[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]{padding:0 10px;height:60px;line-height:60px;text-decoration:none;display:block;text-transform:uppercase;font-size:.8rem;font-weight:600;color:#454545}.active[_ngcontent-%COMP%]{background:#000;color:#fff!important}"]})}return e})();var lT=(()=>{class e{navigationService;tableId=null;uniqueLinkToken=null;ownerId=null;restaurantid=null;html5QrCodeScanner=null;constructor(t){this.navigationService=t}ngAfterViewInit(){this.html5QrCodeScanner=new su("reader",{fps:10,qrbox:{width:250,height:250}},!1),this.html5QrCodeScanner.render(this.onScanSuccess.bind(this),this.onScanFailure)}onScanSuccess(t){let r=new URL(t),i=r.searchParams.get("t"),o=r.searchParams.get("u"),c=r.searchParams.get("r"),h=r.searchParams.get("o");i?(this.tableId=i,this.uniqueLinkToken=o,this.restaurantid=c,this.ownerId=h,localStorage.setItem("customercurrentTable",this.tableId),localStorage.setItem("uniqueLinkToken",this.uniqueLinkToken),localStorage.setItem("restaurantid",this.restaurantid),localStorage.setItem("ownerid",this.ownerId),this.navigationService.NavigateTo("tableordered"),console.log("Table ID saved:",this.tableId)):console.error("Table ID not found in the scanned QR code."),this.html5QrCodeScanner?.clear()}onScanFailure(t){console.warn(`QR code scan error: ${t}`)}ngOnDestroy(){this.html5QrCodeScanner?.clear()}static \u0275fac=function(r){return new(r||e)(Z(be))};static \u0275cmp=ie({type:e,selectors:[["app-waiterscan"]],standalone:!0,features:[oe],decls:1,vars:0,consts:[["id","reader",2,"width","300px"]],template:function(r,i){r&1&&le(0,"div",0)}})}return e})();var cT=(()=>{class e{navigationService;tableId=null;table=null;tableGroupName=null;groupColor=null;uniqueLinkToken=null;ownerId=null;restaurantId=null;constructor(t){this.navigationService=t,_e(De.firebaseConfig)}ngOnInit(){this.loadTable(),this.loadUniqueLinkToken()}loadUniqueLinkToken(){let t=ee();this.ownerId=sessionStorage.getItem("userId"),this.restaurantId=localStorage.getItem("currentRestaurant");let r=J(t,`Owners/${this.ownerId}/Restaurants/${this.restaurantId}/uniqueLinkToken`);ye(r).then(i=>{i.exists()?this.uniqueLinkToken=i.val():console.log("No unique link token found")}).catch(i=>{console.error("Error loading unique link token:",i)})}deleteTable(){let t=ee(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant");if(!this.tableId||!r||!i){console.error("Missing table, owner, or restaurant ID");return}let o=J(t,`Owners/${r}/Restaurants/${i}/Tables/${this.tableId}`);Sr(o).then(()=>{console.log("Table deleted successfully"),this.navigationService.NavigateTo("tablemanage")}).catch(c=>{console.error("Error deleting table:",c)})}blockTable(){let t=ee(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant");if(!this.tableId||!r||!i){console.error("Missing table, owner, or restaurant ID");return}let o=J(t,`Owners/${r}/Restaurants/${i}/Tables/${this.tableId}`);mt(o,{is_blocked:!0}).then(()=>{console.log("Table blocked successfully"),location.reload()}).catch(c=>{console.error("Error blocking table:",c)})}unlockTable(){let t=ee(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant");if(!this.tableId||!r||!i){console.error("Missing table, owner, or restaurant ID");return}let o=J(t,`Owners/${r}/Restaurants/${i}/Tables/${this.tableId}`);mt(o,{is_blocked:!1}).then(()=>{console.log("Table unlocked successfully"),location.reload()}).catch(c=>{console.error("Error unlocking table:",c)})}saveTable(){}loadTable(){if(this.tableId=localStorage.getItem("currentTable"),!this.tableId){console.error("No current table found in local storage");return}let t=ee(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant"),o=J(t,`Owners/${r}/Restaurants/${i}/Tables/${this.tableId}`);ye(o).then(c=>{c.exists()?(this.table=c.val(),this.loadTableGroup()):console.log("No table found")}).catch(c=>{console.error("Error loading table:",c)})}loadTableGroup(){let t=ee(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant");if(!this.table?.group_id||this.table.group_id==="0g"){this.tableGroupName="Stoliki bez grupy",this.groupColor="#000000";return}let o=J(t,`Owners/${r}/Restaurants/${i}/TableGroups/${this.table.group_id}`);ye(o).then(c=>{if(c.exists()){let h=c.val();this.tableGroupName=h.name,this.groupColor=h.color}else console.log("No group found for this table")}).catch(c=>{console.error("Error loading group:",c)})}getQRCodeData(){let t=this.table?.id||"",r=this.uniqueLinkToken||"",i=sessionStorage.getItem("userId"),o=localStorage.getItem("currentRestaurant");return`https://easyorder.mandarin.com.pl/settable?tableid=${t}&uniqueLinkToken=${r}&ownerid=${i}&restaurantid=${o}`}static \u0275fac=function(r){return new(r||e)(Z(be))};static \u0275cmp=ie({type:e,selectors:[["app-waiterqrcode"]],standalone:!0,features:[oe],decls:3,vars:13,consts:[[1,"qrcodeImage"],[3,"qrdata","allowEmptyString","alt","ariaLabel","cssClass","colorDark","colorLight","elementType","errorCorrectionLevel","margin","scale","title","width"]],template:function(r,i){r&1&&(M(0,"main")(1,"div",0),le(2,"qrcode",1),N()()),r&2&&(X(2),kt("qrdata","https://easyorder.mandarin.com.pl/waiterauth?u="+i.uniqueLinkToken+"&o="+i.ownerId+"&r="+i.restaurantId)("allowEmptyString",!0)("alt","A custom alt attribute")("ariaLabel","QR Code image with the following content...")("cssClass","center")("colorDark","#000000ff")("colorLight","#ffffffff")("elementType","img")("errorCorrectionLevel","H")("margin",4)("scale",1)("title","A custom title attribute")("width",300))},dependencies:[Oo,No]})}return e})();var uT=(()=>{class e{navigationService;orderNumber="";constructor(t){this.navigationService=t,_e(De.firebaseConfig)}addOrder(){let t=ee(),r=localStorage.getItem("ownerid"),i=localStorage.getItem("currentRestaurant");if(!r||!i){console.error("Brak wymaganych danych");return}let o=Date.now().toString(),c={name:this.orderNumber,waiter_get_order_at_table:!0,created_at:Date.now(),canceled_at:null,completed_at:null,table_id:"",waiter_set_order_number:!0,table_id_entered_by_waiter:!1,completed_during_table_clean:!1},h=J(t,`Owners/${r}/Restaurants/${i}/Orders/${o}`);So(h,c).then(()=>{console.log("Zam\xF3wienie dodane pomy\u015Blnie"),this.orderNumber="",this.navigationService.NavigateTo("waiterorderlist")}).catch(g=>{console.error("B\u0142\u0105d podczas dodawania zam\xF3wienia:",g)})}static \u0275fac=function(r){return new(r||e)(Z(be))};static \u0275cmp=ie({type:e,selectors:[["app-addorder"]],standalone:!0,features:[oe],decls:8,vars:1,consts:[["for","orderNumber"],["type","text","id","orderNumber",3,"ngModelChange","ngModel"],[3,"click"]],template:function(r,i){r&1&&(M(0,"p"),P(1,"addorder works!"),N(),M(2,"div")(3,"label",0),P(4,"Numer zam\xF3wienia:"),N(),M(5,"input",1),it("ngModelChange",function(c){return ot(i.orderNumber,c)||(i.orderNumber=c),c}),N(),M(6,"button",2),Y("click",function(){return i.addOrder()}),P(7,"Dodaj zam\xF3wienie"),N()()),r&2&&(X(5),rt("ngModel",i.orderNumber))},dependencies:[jt,Zt,mn,sn]})}return e})();function G9(e,n){if(e&1&&(M(0,"option",9),P(1),N()),e&2){let t=Qe().$implicit;kt("value",t.id),X(),on(t.name)}}function $9(e,n){if(e&1&&(M(0,"option",10),P(1),N()),e&2){let t=Qe().$implicit;kt("value",t.id),X(),on(t.name)}}function q9(e,n){if(e&1&&Ut(0,G9,2,2,"option",9)(1,$9,2,2,"option",10),e&2){let t=n.$implicit,r=Qe();It(t.id==r.table.group_id?0:-1),X(),It(t.id!=r.table.group_id?1:-1)}}var dT=(()=>{class e{navigationService;table={id:"",name:"",group_id:"",description:"",is_blocked:!1};tableGroups=[];restaurantId="";constructor(t){this.navigationService=t,_e(De.firebaseConfig)}ngOnInit(){this.loadEditedTable(),this.loadTableGroups()}loadEditedTable(){let t=localStorage.getItem("currentTable"),r=sessionStorage.getItem("userId");if(this.restaurantId=localStorage.getItem("currentRestaurant")??"",!t||!r||!this.restaurantId){console.error("Missing table, owner, or restaurant ID");return}let i=ee(),o=J(i,`Owners/${r}/Restaurants/${this.restaurantId}/Tables/${t}`);ye(o).then(c=>{c.exists()?this.table=c.val():console.log("No table found")}).catch(c=>{console.error("Error loading table:",c)})}loadTableGroups(){let t=sessionStorage.getItem("userId"),r=localStorage.getItem("currentRestaurant");if(!t||!r){console.error("Missing owner or restaurant ID");return}let i=ee(),o=J(i,`Owners/${t}/Restaurants/${r}/TableGroups`);ye(o).then(c=>{c.exists()?this.tableGroups=Object.values(c.val()):console.log("No table groups found")}).catch(c=>{console.error("Error loading table groups:",c)})}saveChanges(){let t=sessionStorage.getItem("userId"),r=localStorage.getItem("currentRestaurant"),i=localStorage.getItem("currentTable");if(!t||!r||!i){console.error("Missing owner, restaurant, or table ID");return}let o=ee(),c=J(o,`Owners/${t}/Restaurants/${r}/Tables/${i}`);mt(c,{name:this.table.name,group_id:this.table.group_id,description:this.table.description,is_blocked:this.table.is_blocked}).then(()=>{console.log("Table updated successfully"),this.navigationService.NavigateTo("tablemanage")}).catch(h=>{console.error("Error updating table:",h)})}static \u0275fac=function(r){return new(r||e)(Z(be))};static \u0275cmp=ie({type:e,selectors:[["app-tableeditnew"]],standalone:!0,features:[oe],decls:15,vars:5,consts:[[1,"panel"],[3,"ngSubmit"],["for","table-name"],["id","table-name","type","text","name","tableName","required","",3,"ngModelChange","ngModel","value"],["for","group"],["id","group","name","groupId",3,"ngModelChange","ngModel"],["for","description"],["id","description","name","description","rows","4",3,"ngModelChange","ngModel","value"],["type","submit"],["selected","",3,"value"],[3,"value"]],template:function(r,i){r&1&&(M(0,"div",0)(1,"form",1),Y("ngSubmit",function(){return i.saveChanges()}),M(2,"label",2),P(3,"Nazwa stolika"),N(),M(4,"input",3),it("ngModelChange",function(c){return ot(i.table.name,c)||(i.table.name=c),c}),N(),M(5,"label",4),P(6,"Grupa"),N(),M(7,"select",5),it("ngModelChange",function(c){return ot(i.table.group_id,c)||(i.table.group_id=c),c}),pn(8,q9,2,2,null,null,hn),N(),M(10,"label",6),P(11,"Opis"),N(),M(12,"textarea",7),it("ngModelChange",function(c){return ot(i.table.description,c)||(i.table.description=c),c}),N(),M(13,"button",8),P(14,"Zapisz zmiany"),N()()()),r&2&&(X(4),rt("ngModel",i.table.name),kt("value",i.table.name),X(3),rt("ngModel",i.table.group_id),X(),gn(i.tableGroups),X(4),rt("ngModel",i.table.description),kt("value",i.table.description))},dependencies:[jt,er,Xf,Zf,Zt,Sa,mn,Jn,Tn,sn,jn],styles:[".panel[_ngcontent-%COMP%]{padding:16px;border:1px solid #000;width:300px;margin:0 auto}label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-weight:700}input[_ngcontent-%COMP%], select[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{width:100%;margin-bottom:16px;padding:8px;border:1px solid #ccc}button[_ngcontent-%COMP%]{width:100%;padding:10px;background-color:#000;color:#fff;border:none;cursor:pointer}"]})}return e})();var fT=(()=>{class e{navigationService;group={id:"",name:"",color:"",description:"",location:""};constructor(t){this.navigationService=t,_e(De.firebaseConfig)}ngOnInit(){this.loadGroupData()}loadGroupData(){let t=localStorage.getItem("currentGroup"),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant");if(!t||!r||!i){console.error("Missing group, owner, or restaurant ID");return}let o=ee(),c=J(o,`Owners/${r}/Restaurants/${i}/TableGroups/${t}`);ye(c).then(h=>{h.exists()?this.group=h.val():console.log("No group found")}).catch(h=>{console.error("Error loading group:",h)})}saveChanges(){let t=sessionStorage.getItem("userId"),r=localStorage.getItem("currentRestaurant"),i=localStorage.getItem("currentGroup");if(!t||!r||!i){console.error("Missing owner, restaurant, or group ID");return}let o=ee(),c=J(o,`Owners/${t}/Restaurants/${r}/TableGroups/${i}`);mt(c,{name:this.group.name,color:this.group.color,description:this.group.description,location:this.group.location}).then(()=>{console.log("Group updated successfully"),this.navigationService.NavigateTo("tablegroupmanage")}).catch(h=>{console.error("Error updating group:",h)})}deleteGroup(){let t=ee(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant"),o=localStorage.getItem("currentGroup");if(!o||!r||!i){console.error("Missing table, owner, or restaurant ID");return}let c=J(t,`Owners/${r}/Restaurants/${i}/TableGroups/${o}`);Sr(c).then(()=>{console.log("Table deleted successfully"),this.navigationService.NavigateTo("tablegroupmanage")}).catch(h=>{console.error("Error deleting table:",h)})}static \u0275fac=function(r){return new(r||e)(Z(be))};static \u0275cmp=ie({type:e,selectors:[["app-groupedit"]],standalone:!0,features:[oe],decls:21,vars:4,consts:[[3,"ngSubmit"],["for","name"],["id","name","name","name","required","",3,"ngModelChange","ngModel"],["for","color"],["id","color","name","color","required","",3,"ngModelChange","ngModel"],["for","description"],["id","description","name","description",3,"ngModelChange","ngModel"],["for","location"],["id","location","name","location",3,"ngModelChange","ngModel"],["type","submit"],[3,"click"]],template:function(r,i){r&1&&(M(0,"form",0),Y("ngSubmit",function(){return i.saveChanges()}),M(1,"div")(2,"label",1),P(3,"Nazwa:"),N(),M(4,"input",2),it("ngModelChange",function(c){return ot(i.group.name,c)||(i.group.name=c),c}),N()(),M(5,"div")(6,"label",3),P(7,"Kolor:"),N(),M(8,"input",4),it("ngModelChange",function(c){return ot(i.group.color,c)||(i.group.color=c),c}),N()(),M(9,"div")(10,"label",5),P(11,"Opis:"),N(),M(12,"textarea",6),it("ngModelChange",function(c){return ot(i.group.description,c)||(i.group.description=c),c}),N()(),M(13,"div")(14,"label",7),P(15,"Lokalizacja:"),N(),M(16,"input",8),it("ngModelChange",function(c){return ot(i.group.location,c)||(i.group.location=c),c}),N()(),M(17,"button",9),P(18,"Zapisz zmiany"),N()(),M(19,"button",10),Y("click",function(){return i.deleteGroup()}),P(20,"Usu\u0144 grup\u0119"),N()),r&2&&(X(4),rt("ngModel",i.group.name),X(4),rt("ngModel",i.group.color),X(4),rt("ngModel",i.group.description),X(4),rt("ngModel",i.group.location))},dependencies:[jt,er,Zt,mn,Jn,Tn,sn,jn]})}return e})();var hT=(()=>{class e{navigationService;tableId=null;table=null;tableGroupName=null;groupColor=null;uniqueLinkToken=null;ownerId=null;restaurantId=null;constructor(t){this.navigationService=t,_e(De.firebaseConfig)}printQRCodePage(){window.print()}ngOnInit(){this.loadTable(),this.loadUniqueLinkToken()}loadUniqueLinkToken(){let t=ee();this.ownerId=sessionStorage.getItem("userId"),this.restaurantId=localStorage.getItem("currentRestaurant");let r=J(t,`Owners/${this.ownerId}/Restaurants/${this.restaurantId}/uniqueLinkToken`);ye(r).then(i=>{i.exists()?this.uniqueLinkToken=i.val():console.log("No unique link token found")}).catch(i=>{console.error("Error loading unique link token:",i)})}deleteTable(){let t=ee(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant");if(!this.tableId||!r||!i){console.error("Missing table, owner, or restaurant ID");return}let o=J(t,`Owners/${r}/Restaurants/${i}/Tables/${this.tableId}`);Sr(o).then(()=>{console.log("Table deleted successfully"),this.navigationService.NavigateTo("tablemanage")}).catch(c=>{console.error("Error deleting table:",c)})}blockTable(){let t=ee(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant");if(!this.tableId||!r||!i){console.error("Missing table, owner, or restaurant ID");return}let o=J(t,`Owners/${r}/Restaurants/${i}/Tables/${this.tableId}`);mt(o,{is_blocked:!0}).then(()=>{console.log("Table blocked successfully"),location.reload()}).catch(c=>{console.error("Error blocking table:",c)})}unlockTable(){let t=ee(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant");if(!this.tableId||!r||!i){console.error("Missing table, owner, or restaurant ID");return}let o=J(t,`Owners/${r}/Restaurants/${i}/Tables/${this.tableId}`);mt(o,{is_blocked:!1}).then(()=>{console.log("Table unlocked successfully"),location.reload()}).catch(c=>{console.error("Error unlocking table:",c)})}saveTable(){}loadTable(){if(this.tableId=localStorage.getItem("currentTable"),!this.tableId){console.error("No current table found in local storage");return}let t=ee(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant"),o=J(t,`Owners/${r}/Restaurants/${i}/Tables/${this.tableId}`);ye(o).then(c=>{c.exists()?(this.table=c.val(),this.loadTableGroup()):console.log("No table found")}).catch(c=>{console.error("Error loading table:",c)})}loadTableGroup(){let t=ee(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant");if(!this.table?.group_id||this.table.group_id==="0g"){this.tableGroupName="Stoliki bez grupy",this.groupColor="#000000";return}let o=J(t,`Owners/${r}/Restaurants/${i}/TableGroups/${this.table.group_id}`);ye(o).then(c=>{if(c.exists()){let h=c.val();this.tableGroupName=h.name,this.groupColor=h.color}else console.log("No group found for this table")}).catch(c=>{console.error("Error loading group:",c)})}getQRCodeData(){let t=this.table?.id||"",r=this.uniqueLinkToken||"",i=sessionStorage.getItem("userId"),o=localStorage.getItem("currentRestaurant");return`https://easyorder.mandarin.com.pl/settable?tableid=${t}&uniqueLinkToken=${r}&ownerid=${i}&restaurantid=${o}`}static \u0275fac=function(r){return new(r||e)(Z(be))};static \u0275cmp=ie({type:e,selectors:[["app-cashpointqrcode"]],standalone:!0,features:[oe],decls:6,vars:13,consts:[[3,"click"],[1,"qrcodeImage"],[3,"qrdata","allowEmptyString","alt","ariaLabel","cssClass","colorDark","colorLight","elementType","errorCorrectionLevel","margin","scale","title","width"]],template:function(r,i){r&1&&(M(0,"main")(1,"div")(2,"button",0),Y("click",function(){return i.printQRCodePage()}),P(3,"Print QR Code"),N()(),M(4,"div",1),le(5,"qrcode",2),N()()),r&2&&(X(5),kt("qrdata","https://easyorder.mandarin.com.pl/setorder")("allowEmptyString",!0)("alt","A custom alt attribute")("ariaLabel","QR Code image with the following content...")("cssClass","center")("colorDark","#000000ff")("colorLight","#ffffffff")("elementType","img")("errorCorrectionLevel","H")("margin",4)("scale",1)("title","A custom title attribute")("width",300))},dependencies:[Oo,No],styles:["@media print{button[_ngcontent-%COMP%]{display:none}.qr-code-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-between;margin:0;padding:0}.qr-code-box[_ngcontent-%COMP%]{width:calc(50% - 10px);height:565px;margin:5px;text-align:center;page-break-inside:avoid}.qr-code-container[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:nth-child(2n){page-break-after:always}body[_ngcontent-%COMP%]{background-color:#fff;margin:0}}"]})}return e})();var pT=[{path:"",component:gw},{path:"landingpage",component:gw},{path:"register",component:o2},{path:"login",component:r2},{path:"newrestaurant",component:s2},{path:"managerestaurant",component:a2},{path:"changerestaurant",component:l2},{path:"restaurantbilings",component:c2},{path:"restaurantsettings",component:u2},{path:"tablemanage",component:h2},{path:"tablecreate",component:p2},{path:"tableedit",component:g2},{path:"restaurantstats",component:f2},{path:"restaurantrevievs",component:d2},{path:"settable",component:m2},{path:"tablegroupcreate",component:w2},{path:"tablegroupmanage",component:y2},{path:"showtableqr",component:vA},{path:"tablesettings",component:xA},{path:"waitersettings",component:bA},{path:"alltablesqrcodes",component:EA},{path:"tableordered",component:SA},{path:"scanqrcode",component:nT},{path:"setorder",component:rT},{path:"waiterauth",component:iT},{path:"waitertablelist",component:oT},{path:"waitertablelookup",component:sT},{path:"waiterorderlist",component:aT},{path:"waiterscan",component:lT},{path:"waiterqrcode",component:cT},{path:"addorder",component:uT},{path:"tableeedit",component:dT},{path:"groupedit",component:fT},{path:"cashpointqrcode",component:hT}];DE(hI,{providers:[fI(pT),{provide:jt},TE()]});
