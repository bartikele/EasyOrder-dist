var A2=Object.create;var Ip=Object.defineProperty,D2=Object.defineProperties,T2=Object.getOwnPropertyDescriptor,M2=Object.getOwnPropertyDescriptors,N2=Object.getOwnPropertyNames,Sv=Object.getOwnPropertySymbols,R2=Object.getPrototypeOf,Dv=Object.prototype.hasOwnProperty,O2=Object.prototype.propertyIsEnumerable;var Av=(e,t,n)=>t in e?Ip(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,K=(e,t)=>{for(var n in t||={})Dv.call(t,n)&&Av(e,n,t[n]);if(Sv)for(var n of Sv(t))O2.call(t,n)&&Av(e,n,t[n]);return e},Ve=(e,t)=>D2(e,M2(t));var ct=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var P2=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of N2(t))!Dv.call(e,i)&&i!==n&&Ip(e,i,{get:()=>t[i],enumerable:!(r=T2(t,i))||r.enumerable});return e};var Tv=(e,t,n)=>(n=e!=null?A2(R2(e)):{},P2(t||!e||!e.__esModule?Ip(n,"default",{value:e,enumerable:!0}):n,e));var X=(e,t,n)=>new Promise((r,i)=>{var s=g=>{try{h(n.next(g))}catch(m){i(m)}},l=g=>{try{h(n.throw(g))}catch(m){i(m)}},h=g=>g.done?r(g.value):Promise.resolve(g.value).then(s,l);h((n=n.apply(e,t)).next())});var tD=ct((ZZ,eD)=>{"use strict";eD.exports=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}});var bo=ct(ms=>{"use strict";var w_,yV=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];ms.getSymbolSize=function(t){if(!t)throw new Error('"version" cannot be null or undefined');if(t<1||t>40)throw new Error('"version" should be in range from 1 to 40');return t*4+17};ms.getSymbolTotalCodewords=function(t){return yV[t]};ms.getBCHDigit=function(e){let t=0;for(;e!==0;)t++,e>>>=1;return t};ms.setToSJISFunction=function(t){if(typeof t!="function")throw new Error('"toSJISFunc" is not a valid function.');w_=t};ms.isKanjiModeEnabled=function(){return typeof w_<"u"};ms.toSJIS=function(t){return w_(t)}});var Ph=ct(_r=>{"use strict";_r.L={bit:1};_r.M={bit:0};_r.Q={bit:3};_r.H={bit:2};function _V(e){if(typeof e!="string")throw new Error("Param is not a string");switch(e.toLowerCase()){case"l":case"low":return _r.L;case"m":case"medium":return _r.M;case"q":case"quartile":return _r.Q;case"h":case"high":return _r.H;default:throw new Error("Unknown EC Level: "+e)}}_r.isValid=function(t){return t&&typeof t.bit<"u"&&t.bit>=0&&t.bit<4};_r.from=function(t,n){if(_r.isValid(t))return t;try{return _V(t)}catch{return n}}});var iD=ct((KZ,rD)=>{"use strict";function nD(){this.buffer=[],this.length=0}nD.prototype={get:function(e){let t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)===1},put:function(e,t){for(let n=0;n<t;n++)this.putBit((e>>>t-n-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(e){let t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}};rD.exports=nD});var sD=ct((JZ,oD)=>{"use strict";function nu(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}nu.prototype.set=function(e,t,n,r){let i=e*this.size+t;this.data[i]=n,r&&(this.reservedBit[i]=!0)};nu.prototype.get=function(e,t){return this.data[e*this.size+t]};nu.prototype.xor=function(e,t,n){this.data[e*this.size+t]^=n};nu.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]};oD.exports=nu});var aD=ct(kh=>{"use strict";var vV=bo().getSymbolSize;kh.getRowColCoords=function(t){if(t===1)return[];let n=Math.floor(t/7)+2,r=vV(t),i=r===145?26:Math.ceil((r-13)/(2*n-2))*2,s=[r-7];for(let l=1;l<n-1;l++)s[l]=s[l-1]-i;return s.push(6),s.reverse()};kh.getPositions=function(t){let n=[],r=kh.getRowColCoords(t),i=r.length;for(let s=0;s<i;s++)for(let l=0;l<i;l++)s===0&&l===0||s===0&&l===i-1||s===i-1&&l===0||n.push([r[s],r[l]]);return n}});var uD=ct(lD=>{"use strict";var wV=bo().getSymbolSize,cD=7;lD.getPositions=function(t){let n=wV(t);return[[0,0],[n-cD,0],[0,n-cD]]}});var dD=ct(bt=>{"use strict";bt.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};var ys={N1:3,N2:3,N3:40,N4:10};bt.isValid=function(t){return t!=null&&t!==""&&!isNaN(t)&&t>=0&&t<=7};bt.from=function(t){return bt.isValid(t)?parseInt(t,10):void 0};bt.getPenaltyN1=function(t){let n=t.size,r=0,i=0,s=0,l=null,h=null;for(let g=0;g<n;g++){i=s=0,l=h=null;for(let m=0;m<n;m++){let C=t.get(g,m);C===l?i++:(i>=5&&(r+=ys.N1+(i-5)),l=C,i=1),C=t.get(m,g),C===h?s++:(s>=5&&(r+=ys.N1+(s-5)),h=C,s=1)}i>=5&&(r+=ys.N1+(i-5)),s>=5&&(r+=ys.N1+(s-5))}return r};bt.getPenaltyN2=function(t){let n=t.size,r=0;for(let i=0;i<n-1;i++)for(let s=0;s<n-1;s++){let l=t.get(i,s)+t.get(i,s+1)+t.get(i+1,s)+t.get(i+1,s+1);(l===4||l===0)&&r++}return r*ys.N2};bt.getPenaltyN3=function(t){let n=t.size,r=0,i=0,s=0;for(let l=0;l<n;l++){i=s=0;for(let h=0;h<n;h++)i=i<<1&2047|t.get(l,h),h>=10&&(i===1488||i===93)&&r++,s=s<<1&2047|t.get(h,l),h>=10&&(s===1488||s===93)&&r++}return r*ys.N3};bt.getPenaltyN4=function(t){let n=0,r=t.data.length;for(let s=0;s<r;s++)n+=t.data[s];return Math.abs(Math.ceil(n*100/r/5)-10)*ys.N4};function CV(e,t,n){switch(e){case bt.Patterns.PATTERN000:return(t+n)%2===0;case bt.Patterns.PATTERN001:return t%2===0;case bt.Patterns.PATTERN010:return n%3===0;case bt.Patterns.PATTERN011:return(t+n)%3===0;case bt.Patterns.PATTERN100:return(Math.floor(t/2)+Math.floor(n/3))%2===0;case bt.Patterns.PATTERN101:return t*n%2+t*n%3===0;case bt.Patterns.PATTERN110:return(t*n%2+t*n%3)%2===0;case bt.Patterns.PATTERN111:return(t*n%3+(t+n)%2)%2===0;default:throw new Error("bad maskPattern:"+e)}}bt.applyMask=function(t,n){let r=n.size;for(let i=0;i<r;i++)for(let s=0;s<r;s++)n.isReserved(s,i)||n.xor(s,i,CV(t,s,i))};bt.getBestMask=function(t,n){let r=Object.keys(bt.Patterns).length,i=0,s=1/0;for(let l=0;l<r;l++){n(l),bt.applyMask(l,t);let h=bt.getPenaltyN1(t)+bt.getPenaltyN2(t)+bt.getPenaltyN3(t)+bt.getPenaltyN4(t);bt.applyMask(l,t),h<s&&(s=h,i=l)}return i}});var E_=ct(C_=>{"use strict";var xo=Ph(),Lh=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],Fh=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];C_.getBlocksCount=function(t,n){switch(n){case xo.L:return Lh[(t-1)*4+0];case xo.M:return Lh[(t-1)*4+1];case xo.Q:return Lh[(t-1)*4+2];case xo.H:return Lh[(t-1)*4+3];default:return}};C_.getTotalCodewordsCount=function(t,n){switch(n){case xo.L:return Fh[(t-1)*4+0];case xo.M:return Fh[(t-1)*4+1];case xo.Q:return Fh[(t-1)*4+2];case xo.H:return Fh[(t-1)*4+3];default:return}}});var fD=ct(Vh=>{"use strict";var ru=new Uint8Array(512),Bh=new Uint8Array(256);(function(){let t=1;for(let n=0;n<255;n++)ru[n]=t,Bh[t]=n,t<<=1,t&256&&(t^=285);for(let n=255;n<512;n++)ru[n]=ru[n-255]})();Vh.log=function(t){if(t<1)throw new Error("log("+t+")");return Bh[t]};Vh.exp=function(t){return ru[t]};Vh.mul=function(t,n){return t===0||n===0?0:ru[Bh[t]+Bh[n]]}});var hD=ct(iu=>{"use strict";var I_=fD();iu.mul=function(t,n){let r=new Uint8Array(t.length+n.length-1);for(let i=0;i<t.length;i++)for(let s=0;s<n.length;s++)r[i+s]^=I_.mul(t[i],n[s]);return r};iu.mod=function(t,n){let r=new Uint8Array(t);for(;r.length-n.length>=0;){let i=r[0];for(let l=0;l<n.length;l++)r[l]^=I_.mul(n[l],i);let s=0;for(;s<r.length&&r[s]===0;)s++;r=r.slice(s)}return r};iu.generateECPolynomial=function(t){let n=new Uint8Array([1]);for(let r=0;r<t;r++)n=iu.mul(n,new Uint8Array([1,I_.exp(r)]));return n}});var mD=ct((sX,gD)=>{"use strict";var pD=hD();function b_(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}b_.prototype.initialize=function(t){this.degree=t,this.genPoly=pD.generateECPolynomial(this.degree)};b_.prototype.encode=function(t){if(!this.genPoly)throw new Error("Encoder not initialized");let n=new Uint8Array(t.length+this.degree);n.set(t);let r=pD.mod(n,this.genPoly),i=this.degree-r.length;if(i>0){let s=new Uint8Array(this.degree);return s.set(r,i),s}return r};gD.exports=b_});var x_=ct(yD=>{"use strict";yD.isValid=function(t){return!isNaN(t)&&t>=1&&t<=40}});var S_=ct(Vi=>{"use strict";var _D="[0-9]+",EV="[A-Z $%*+\\-./:]+",ou="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";ou=ou.replace(/u/g,"\\u");var IV="(?:(?![A-Z0-9 $%*+\\-./:]|"+ou+`)(?:.|[\r
]))+`;Vi.KANJI=new RegExp(ou,"g");Vi.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");Vi.BYTE=new RegExp(IV,"g");Vi.NUMERIC=new RegExp(_D,"g");Vi.ALPHANUMERIC=new RegExp(EV,"g");var bV=new RegExp("^"+ou+"$"),xV=new RegExp("^"+_D+"$"),SV=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");Vi.testKanji=function(t){return bV.test(t)};Vi.testNumeric=function(t){return xV.test(t)};Vi.testAlphanumeric=function(t){return SV.test(t)}});var So=ct(Ht=>{"use strict";var AV=x_(),A_=S_();Ht.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]};Ht.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]};Ht.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]};Ht.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]};Ht.MIXED={bit:-1};Ht.getCharCountIndicator=function(t,n){if(!t.ccBits)throw new Error("Invalid mode: "+t);if(!AV.isValid(n))throw new Error("Invalid version: "+n);return n>=1&&n<10?t.ccBits[0]:n<27?t.ccBits[1]:t.ccBits[2]};Ht.getBestModeForData=function(t){return A_.testNumeric(t)?Ht.NUMERIC:A_.testAlphanumeric(t)?Ht.ALPHANUMERIC:A_.testKanji(t)?Ht.KANJI:Ht.BYTE};Ht.toString=function(t){if(t&&t.id)return t.id;throw new Error("Invalid mode")};Ht.isValid=function(t){return t&&t.bit&&t.ccBits};function DV(e){if(typeof e!="string")throw new Error("Param is not a string");switch(e.toLowerCase()){case"numeric":return Ht.NUMERIC;case"alphanumeric":return Ht.ALPHANUMERIC;case"kanji":return Ht.KANJI;case"byte":return Ht.BYTE;default:throw new Error("Unknown mode: "+e)}}Ht.from=function(t,n){if(Ht.isValid(t))return t;try{return DV(t)}catch{return n}}});var ID=ct(_s=>{"use strict";var Uh=bo(),TV=E_(),vD=Ph(),Ao=So(),D_=x_(),CD=7973,wD=Uh.getBCHDigit(CD);function MV(e,t,n){for(let r=1;r<=40;r++)if(t<=_s.getCapacity(r,n,e))return r}function ED(e,t){return Ao.getCharCountIndicator(e,t)+4}function NV(e,t){let n=0;return e.forEach(function(r){let i=ED(r.mode,t);n+=i+r.getBitsLength()}),n}function RV(e,t){for(let n=1;n<=40;n++)if(NV(e,n)<=_s.getCapacity(n,t,Ao.MIXED))return n}_s.from=function(t,n){return D_.isValid(t)?parseInt(t,10):n};_s.getCapacity=function(t,n,r){if(!D_.isValid(t))throw new Error("Invalid QR Code version");typeof r>"u"&&(r=Ao.BYTE);let i=Uh.getSymbolTotalCodewords(t),s=TV.getTotalCodewordsCount(t,n),l=(i-s)*8;if(r===Ao.MIXED)return l;let h=l-ED(r,t);switch(r){case Ao.NUMERIC:return Math.floor(h/10*3);case Ao.ALPHANUMERIC:return Math.floor(h/11*2);case Ao.KANJI:return Math.floor(h/13);case Ao.BYTE:default:return Math.floor(h/8)}};_s.getBestVersionForData=function(t,n){let r,i=vD.from(n,vD.M);if(Array.isArray(t)){if(t.length>1)return RV(t,i);if(t.length===0)return 1;r=t[0]}else r=t;return MV(r.mode,r.getLength(),i)};_s.getEncodedBits=function(t){if(!D_.isValid(t)||t<7)throw new Error("Invalid QR Code version");let n=t<<12;for(;Uh.getBCHDigit(n)-wD>=0;)n^=CD<<Uh.getBCHDigit(n)-wD;return t<<12|n}});var AD=ct(SD=>{"use strict";var T_=bo(),xD=1335,OV=21522,bD=T_.getBCHDigit(xD);SD.getEncodedBits=function(t,n){let r=t.bit<<3|n,i=r<<10;for(;T_.getBCHDigit(i)-bD>=0;)i^=xD<<T_.getBCHDigit(i)-bD;return(r<<10|i)^OV}});var TD=ct((fX,DD)=>{"use strict";var PV=So();function Wa(e){this.mode=PV.NUMERIC,this.data=e.toString()}Wa.getBitsLength=function(t){return 10*Math.floor(t/3)+(t%3?t%3*3+1:0)};Wa.prototype.getLength=function(){return this.data.length};Wa.prototype.getBitsLength=function(){return Wa.getBitsLength(this.data.length)};Wa.prototype.write=function(t){let n,r,i;for(n=0;n+3<=this.data.length;n+=3)r=this.data.substr(n,3),i=parseInt(r,10),t.put(i,10);let s=this.data.length-n;s>0&&(r=this.data.substr(n),i=parseInt(r,10),t.put(i,s*3+1))};DD.exports=Wa});var ND=ct((hX,MD)=>{"use strict";var kV=So(),M_=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function Ga(e){this.mode=kV.ALPHANUMERIC,this.data=e}Ga.getBitsLength=function(t){return 11*Math.floor(t/2)+6*(t%2)};Ga.prototype.getLength=function(){return this.data.length};Ga.prototype.getBitsLength=function(){return Ga.getBitsLength(this.data.length)};Ga.prototype.write=function(t){let n;for(n=0;n+2<=this.data.length;n+=2){let r=M_.indexOf(this.data[n])*45;r+=M_.indexOf(this.data[n+1]),t.put(r,11)}this.data.length%2&&t.put(M_.indexOf(this.data[n]),6)};MD.exports=Ga});var OD=ct((pX,RD)=>{"use strict";RD.exports=function(t){for(var n=[],r=t.length,i=0;i<r;i++){var s=t.charCodeAt(i);if(s>=55296&&s<=56319&&r>i+1){var l=t.charCodeAt(i+1);l>=56320&&l<=57343&&(s=(s-55296)*1024+l-56320+65536,i+=1)}if(s<128){n.push(s);continue}if(s<2048){n.push(s>>6|192),n.push(s&63|128);continue}if(s<55296||s>=57344&&s<65536){n.push(s>>12|224),n.push(s>>6&63|128),n.push(s&63|128);continue}if(s>=65536&&s<=1114111){n.push(s>>18|240),n.push(s>>12&63|128),n.push(s>>6&63|128),n.push(s&63|128);continue}n.push(239,191,189)}return new Uint8Array(n).buffer}});var kD=ct((gX,PD)=>{"use strict";var LV=OD(),FV=So();function $a(e){this.mode=FV.BYTE,typeof e=="string"&&(e=LV(e)),this.data=new Uint8Array(e)}$a.getBitsLength=function(t){return t*8};$a.prototype.getLength=function(){return this.data.length};$a.prototype.getBitsLength=function(){return $a.getBitsLength(this.data.length)};$a.prototype.write=function(e){for(let t=0,n=this.data.length;t<n;t++)e.put(this.data[t],8)};PD.exports=$a});var FD=ct((mX,LD)=>{"use strict";var BV=So(),VV=bo();function qa(e){this.mode=BV.KANJI,this.data=e}qa.getBitsLength=function(t){return t*13};qa.prototype.getLength=function(){return this.data.length};qa.prototype.getBitsLength=function(){return qa.getBitsLength(this.data.length)};qa.prototype.write=function(e){let t;for(t=0;t<this.data.length;t++){let n=VV.toSJIS(this.data[t]);if(n>=33088&&n<=40956)n-=33088;else if(n>=57408&&n<=60351)n-=49472;else throw new Error("Invalid SJIS character: "+this.data[t]+`
Make sure your charset is UTF-8`);n=(n>>>8&255)*192+(n&255),e.put(n,13)}};LD.exports=qa});var BD=ct((yX,N_)=>{"use strict";var su={single_source_shortest_paths:function(e,t,n){var r={},i={};i[t]=0;var s=su.PriorityQueue.make();s.push(t,0);for(var l,h,g,m,C,E,x,D,N;!s.empty();){l=s.pop(),h=l.value,m=l.cost,C=e[h]||{};for(g in C)C.hasOwnProperty(g)&&(E=C[g],x=m+E,D=i[g],N=typeof i[g]>"u",(N||D>x)&&(i[g]=x,s.push(g,x),r[g]=h))}if(typeof n<"u"&&typeof i[n]>"u"){var U=["Could not find a path from ",t," to ",n,"."].join("");throw new Error(U)}return r},extract_shortest_path_from_predecessor_list:function(e,t){for(var n=[],r=t,i;r;)n.push(r),i=e[r],r=e[r];return n.reverse(),n},find_path:function(e,t,n){var r=su.single_source_shortest_paths(e,t,n);return su.extract_shortest_path_from_predecessor_list(r,n)},PriorityQueue:{make:function(e){var t=su.PriorityQueue,n={},r;e=e||{};for(r in t)t.hasOwnProperty(r)&&(n[r]=t[r]);return n.queue=[],n.sorter=e.sorter||t.default_sorter,n},default_sorter:function(e,t){return e.cost-t.cost},push:function(e,t){var n={value:e,cost:t};this.queue.push(n),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};typeof N_<"u"&&(N_.exports=su)});var $D=ct(Ya=>{"use strict";var ht=So(),jD=TD(),HD=ND(),zD=kD(),WD=FD(),au=S_(),jh=bo(),UV=BD();function VD(e){return unescape(encodeURIComponent(e)).length}function cu(e,t,n){let r=[],i;for(;(i=e.exec(n))!==null;)r.push({data:i[0],index:i.index,mode:t,length:i[0].length});return r}function GD(e){let t=cu(au.NUMERIC,ht.NUMERIC,e),n=cu(au.ALPHANUMERIC,ht.ALPHANUMERIC,e),r,i;return jh.isKanjiModeEnabled()?(r=cu(au.BYTE,ht.BYTE,e),i=cu(au.KANJI,ht.KANJI,e)):(r=cu(au.BYTE_KANJI,ht.BYTE,e),i=[]),t.concat(n,r,i).sort(function(l,h){return l.index-h.index}).map(function(l){return{data:l.data,mode:l.mode,length:l.length}})}function R_(e,t){switch(t){case ht.NUMERIC:return jD.getBitsLength(e);case ht.ALPHANUMERIC:return HD.getBitsLength(e);case ht.KANJI:return WD.getBitsLength(e);case ht.BYTE:return zD.getBitsLength(e)}}function jV(e){return e.reduce(function(t,n){let r=t.length-1>=0?t[t.length-1]:null;return r&&r.mode===n.mode?(t[t.length-1].data+=n.data,t):(t.push(n),t)},[])}function HV(e){let t=[];for(let n=0;n<e.length;n++){let r=e[n];switch(r.mode){case ht.NUMERIC:t.push([r,{data:r.data,mode:ht.ALPHANUMERIC,length:r.length},{data:r.data,mode:ht.BYTE,length:r.length}]);break;case ht.ALPHANUMERIC:t.push([r,{data:r.data,mode:ht.BYTE,length:r.length}]);break;case ht.KANJI:t.push([r,{data:r.data,mode:ht.BYTE,length:VD(r.data)}]);break;case ht.BYTE:t.push([{data:r.data,mode:ht.BYTE,length:VD(r.data)}])}}return t}function zV(e,t){let n={},r={start:{}},i=["start"];for(let s=0;s<e.length;s++){let l=e[s],h=[];for(let g=0;g<l.length;g++){let m=l[g],C=""+s+g;h.push(C),n[C]={node:m,lastCount:0},r[C]={};for(let E=0;E<i.length;E++){let x=i[E];n[x]&&n[x].node.mode===m.mode?(r[x][C]=R_(n[x].lastCount+m.length,m.mode)-R_(n[x].lastCount,m.mode),n[x].lastCount+=m.length):(n[x]&&(n[x].lastCount=m.length),r[x][C]=R_(m.length,m.mode)+4+ht.getCharCountIndicator(m.mode,t))}}i=h}for(let s=0;s<i.length;s++)r[i[s]].end=0;return{map:r,table:n}}function UD(e,t){let n,r=ht.getBestModeForData(e);if(n=ht.from(t,r),n!==ht.BYTE&&n.bit<r.bit)throw new Error('"'+e+'" cannot be encoded with mode '+ht.toString(n)+`.
 Suggested mode is: `+ht.toString(r));switch(n===ht.KANJI&&!jh.isKanjiModeEnabled()&&(n=ht.BYTE),n){case ht.NUMERIC:return new jD(e);case ht.ALPHANUMERIC:return new HD(e);case ht.KANJI:return new WD(e);case ht.BYTE:return new zD(e)}}Ya.fromArray=function(t){return t.reduce(function(n,r){return typeof r=="string"?n.push(UD(r,null)):r.data&&n.push(UD(r.data,r.mode)),n},[])};Ya.fromString=function(t,n){let r=GD(t,jh.isKanjiModeEnabled()),i=HV(r),s=zV(i,n),l=UV.find_path(s.map,"start","end"),h=[];for(let g=1;g<l.length-1;g++)h.push(s.table[l[g]].node);return Ya.fromArray(jV(h))};Ya.rawSplit=function(t){return Ya.fromArray(GD(t,jh.isKanjiModeEnabled()))}});var YD=ct(qD=>{"use strict";var zh=bo(),O_=Ph(),WV=iD(),GV=sD(),$V=aD(),qV=uD(),L_=dD(),F_=E_(),YV=mD(),Hh=ID(),ZV=AD(),XV=So(),P_=$D();function QV(e,t){let n=e.size,r=qV.getPositions(t);for(let i=0;i<r.length;i++){let s=r[i][0],l=r[i][1];for(let h=-1;h<=7;h++)if(!(s+h<=-1||n<=s+h))for(let g=-1;g<=7;g++)l+g<=-1||n<=l+g||(h>=0&&h<=6&&(g===0||g===6)||g>=0&&g<=6&&(h===0||h===6)||h>=2&&h<=4&&g>=2&&g<=4?e.set(s+h,l+g,!0,!0):e.set(s+h,l+g,!1,!0))}}function KV(e){let t=e.size;for(let n=8;n<t-8;n++){let r=n%2===0;e.set(n,6,r,!0),e.set(6,n,r,!0)}}function JV(e,t){let n=$V.getPositions(t);for(let r=0;r<n.length;r++){let i=n[r][0],s=n[r][1];for(let l=-2;l<=2;l++)for(let h=-2;h<=2;h++)l===-2||l===2||h===-2||h===2||l===0&&h===0?e.set(i+l,s+h,!0,!0):e.set(i+l,s+h,!1,!0)}}function eU(e,t){let n=e.size,r=Hh.getEncodedBits(t),i,s,l;for(let h=0;h<18;h++)i=Math.floor(h/3),s=h%3+n-8-3,l=(r>>h&1)===1,e.set(i,s,l,!0),e.set(s,i,l,!0)}function k_(e,t,n){let r=e.size,i=ZV.getEncodedBits(t,n),s,l;for(s=0;s<15;s++)l=(i>>s&1)===1,s<6?e.set(s,8,l,!0):s<8?e.set(s+1,8,l,!0):e.set(r-15+s,8,l,!0),s<8?e.set(8,r-s-1,l,!0):s<9?e.set(8,15-s-1+1,l,!0):e.set(8,15-s-1,l,!0);e.set(r-8,8,1,!0)}function tU(e,t){let n=e.size,r=-1,i=n-1,s=7,l=0;for(let h=n-1;h>0;h-=2)for(h===6&&h--;;){for(let g=0;g<2;g++)if(!e.isReserved(i,h-g)){let m=!1;l<t.length&&(m=(t[l]>>>s&1)===1),e.set(i,h-g,m),s--,s===-1&&(l++,s=7)}if(i+=r,i<0||n<=i){i-=r,r=-r;break}}}function nU(e,t,n){let r=new WV;n.forEach(function(g){r.put(g.mode.bit,4),r.put(g.getLength(),XV.getCharCountIndicator(g.mode,e)),g.write(r)});let i=zh.getSymbolTotalCodewords(e),s=F_.getTotalCodewordsCount(e,t),l=(i-s)*8;for(r.getLengthInBits()+4<=l&&r.put(0,4);r.getLengthInBits()%8!==0;)r.putBit(0);let h=(l-r.getLengthInBits())/8;for(let g=0;g<h;g++)r.put(g%2?17:236,8);return rU(r,e,t)}function rU(e,t,n){let r=zh.getSymbolTotalCodewords(t),i=F_.getTotalCodewordsCount(t,n),s=r-i,l=F_.getBlocksCount(t,n),h=r%l,g=l-h,m=Math.floor(r/l),C=Math.floor(s/l),E=C+1,x=m-C,D=new YV(x),N=0,U=new Array(l),G=new Array(l),z=0,ne=new Uint8Array(e.buffer);for(let W=0;W<l;W++){let En=W<g?C:E;U[W]=ne.slice(N,N+En),G[W]=D.encode(U[W]),N+=En,z=Math.max(z,En)}let He=new Uint8Array(r),le=0,j,se;for(j=0;j<z;j++)for(se=0;se<l;se++)j<U[se].length&&(He[le++]=U[se][j]);for(j=0;j<x;j++)for(se=0;se<l;se++)He[le++]=G[se][j];return He}function iU(e,t,n,r){let i;if(Array.isArray(e))i=P_.fromArray(e);else if(typeof e=="string"){let m=t;if(!m){let C=P_.rawSplit(e);m=Hh.getBestVersionForData(C,n)}i=P_.fromString(e,m||40)}else throw new Error("Invalid data");let s=Hh.getBestVersionForData(i,n);if(!s)throw new Error("The amount of data is too big to be stored in a QR Code");if(!t)t=s;else if(t<s)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+s+`.
`);let l=nU(t,n,i),h=zh.getSymbolSize(t),g=new GV(h);return QV(g,t),KV(g),JV(g,t),k_(g,n,0),t>=7&&eU(g,t),tU(g,l),isNaN(r)&&(r=L_.getBestMask(g,k_.bind(null,g,n))),L_.applyMask(r,g),k_(g,n,r),{modules:g,version:t,errorCorrectionLevel:n,maskPattern:r,segments:i}}qD.create=function(t,n){if(typeof t>"u"||t==="")throw new Error("No input text");let r=O_.M,i,s;return typeof n<"u"&&(r=O_.from(n.errorCorrectionLevel,O_.M),i=Hh.from(n.version),s=L_.from(n.maskPattern),n.toSJISFunc&&zh.setToSJISFunction(n.toSJISFunc)),iU(t,i,r,s)}});var B_=ct(vs=>{"use strict";function ZD(e){if(typeof e=="number"&&(e=e.toString()),typeof e!="string")throw new Error("Color should be defined as hex string");let t=e.slice().replace("#","").split("");if(t.length<3||t.length===5||t.length>8)throw new Error("Invalid hex color: "+e);(t.length===3||t.length===4)&&(t=Array.prototype.concat.apply([],t.map(function(r){return[r,r]}))),t.length===6&&t.push("F","F");let n=parseInt(t.join(""),16);return{r:n>>24&255,g:n>>16&255,b:n>>8&255,a:n&255,hex:"#"+t.slice(0,6).join("")}}vs.getOptions=function(t){t||(t={}),t.color||(t.color={});let n=typeof t.margin>"u"||t.margin===null||t.margin<0?4:t.margin,r=t.width&&t.width>=21?t.width:void 0,i=t.scale||4;return{width:r,scale:r?4:i,margin:n,color:{dark:ZD(t.color.dark||"#000000ff"),light:ZD(t.color.light||"#ffffffff")},type:t.type,rendererOpts:t.rendererOpts||{}}};vs.getScale=function(t,n){return n.width&&n.width>=t+n.margin*2?n.width/(t+n.margin*2):n.scale};vs.getImageWidth=function(t,n){let r=vs.getScale(t,n);return Math.floor((t+n.margin*2)*r)};vs.qrToImageData=function(t,n,r){let i=n.modules.size,s=n.modules.data,l=vs.getScale(i,r),h=Math.floor((i+r.margin*2)*l),g=r.margin*l,m=[r.color.light,r.color.dark];for(let C=0;C<h;C++)for(let E=0;E<h;E++){let x=(C*h+E)*4,D=r.color.light;if(C>=g&&E>=g&&C<h-g&&E<h-g){let N=Math.floor((C-g)/l),U=Math.floor((E-g)/l);D=m[s[N*i+U]?1:0]}t[x++]=D.r,t[x++]=D.g,t[x++]=D.b,t[x]=D.a}}});var XD=ct(Wh=>{"use strict";var V_=B_();function oU(e,t,n){e.clearRect(0,0,t.width,t.height),t.style||(t.style={}),t.height=n,t.width=n,t.style.height=n+"px",t.style.width=n+"px"}function sU(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}Wh.render=function(t,n,r){let i=r,s=n;typeof i>"u"&&(!n||!n.getContext)&&(i=n,n=void 0),n||(s=sU()),i=V_.getOptions(i);let l=V_.getImageWidth(t.modules.size,i),h=s.getContext("2d"),g=h.createImageData(l,l);return V_.qrToImageData(g.data,t,i),oU(h,s,l),h.putImageData(g,0,0),s};Wh.renderToDataURL=function(t,n,r){let i=r;typeof i>"u"&&(!n||!n.getContext)&&(i=n,n=void 0),i||(i={});let s=Wh.render(t,n,i),l=i.type||"image/png",h=i.rendererOpts||{};return s.toDataURL(l,h.quality)}});var JD=ct(KD=>{"use strict";var aU=B_();function QD(e,t){let n=e.a/255,r=t+'="'+e.hex+'"';return n<1?r+" "+t+'-opacity="'+n.toFixed(2).slice(1)+'"':r}function U_(e,t,n){let r=e+t;return typeof n<"u"&&(r+=" "+n),r}function cU(e,t,n){let r="",i=0,s=!1,l=0;for(let h=0;h<e.length;h++){let g=Math.floor(h%t),m=Math.floor(h/t);!g&&!s&&(s=!0),e[h]?(l++,h>0&&g>0&&e[h-1]||(r+=s?U_("M",g+n,.5+m+n):U_("m",i,0),i=0,s=!1),g+1<t&&e[h+1]||(r+=U_("h",l),l=0)):i++}return r}KD.render=function(t,n,r){let i=aU.getOptions(n),s=t.modules.size,l=t.modules.data,h=s+i.margin*2,g=i.color.light.a?"<path "+QD(i.color.light,"fill")+' d="M0 0h'+h+"v"+h+'H0z"/>':"",m="<path "+QD(i.color.dark,"stroke")+' d="'+cU(l,s,i.margin)+'"/>',C='viewBox="0 0 '+h+" "+h+'"',x='<svg xmlns="http://www.w3.org/2000/svg" '+(i.width?'width="'+i.width+'" height="'+i.width+'" ':"")+C+' shape-rendering="crispEdges">'+g+m+`</svg>
`;return typeof r=="function"&&r(null,x),x}});var tT=ct(lu=>{"use strict";var lU=tD(),j_=YD(),eT=XD(),uU=JD();function H_(e,t,n,r,i){let s=[].slice.call(arguments,1),l=s.length,h=typeof s[l-1]=="function";if(!h&&!lU())throw new Error("Callback required as last argument");if(h){if(l<2)throw new Error("Too few arguments provided");l===2?(i=n,n=t,t=r=void 0):l===3&&(t.getContext&&typeof i>"u"?(i=r,r=void 0):(i=r,r=n,n=t,t=void 0))}else{if(l<1)throw new Error("Too few arguments provided");return l===1?(n=t,t=r=void 0):l===2&&!t.getContext&&(r=n,n=t,t=void 0),new Promise(function(g,m){try{let C=j_.create(n,r);g(e(C,t,r))}catch(C){m(C)}})}try{let g=j_.create(n,r);i(null,e(g,t,r))}catch(g){i(g)}}lu.create=j_.create;lu.toCanvas=H_.bind(null,eT.render);lu.toDataURL=H_.bind(null,eT.renderToDataURL);lu.toString=H_.bind(null,function(e,t,n){return uU.render(e,n)})});var pT=ct((Xh,hT)=>{"use strict";(function(e,t){typeof Xh=="object"&&typeof hT<"u"?t(Xh):typeof define=="function"&&define.amd?define(["exports"],t):(e=typeof globalThis<"u"?globalThis:e||self,t(e.ZXing={}))})(Xh,function(e){"use strict";function t(v){return v==null}var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,o){v.__proto__=o}||function(v,o){for(var a in o)o.hasOwnProperty(a)&&(v[a]=o[a])};function r(v,o){n(v,o);function a(){this.constructor=v}v.prototype=o===null?Object.create(o):(a.prototype=o.prototype,new a)}function i(v,o){var a=Object.setPrototypeOf;a?a(v,o):v.__proto__=o}function s(v,o){o===void 0&&(o=v.constructor);var a=Error.captureStackTrace;a&&a(v,o)}var l=function(v){r(o,v);function o(a){var c=this.constructor,u=v.call(this,a)||this;return Object.defineProperty(u,"name",{value:c.name,enumerable:!1}),i(u,c.prototype),s(u),u}return o}(Error);let h=(()=>{class v extends l{constructor(a=void 0){super(a),this.message=a}getKind(){return this.constructor.kind}}return v.kind="Exception",v})(),g=(()=>{class v extends h{}return v.kind="ArgumentException",v})(),m=(()=>{class v extends h{}return v.kind="IllegalArgumentException",v})();class C{constructor(o){if(this.binarizer=o,o===null)throw new m("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(o,a){return this.binarizer.getBlackRow(o,a)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(o,a,c,u){let d=this.binarizer.getLuminanceSource().crop(o,a,c,u);return new C(this.binarizer.createBinarizer(d))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){let o=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new C(this.binarizer.createBinarizer(o))}rotateCounterClockwise45(){let o=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new C(this.binarizer.createBinarizer(o))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}let E=(()=>{class v extends h{static getChecksumInstance(){return new v}}return v.kind="ChecksumException",v})();class x{constructor(o){this.source=o}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class D{static arraycopy(o,a,c,u,d){for(;d--;)c[u++]=o[a++]}static currentTimeMillis(){return Date.now()}}let N=(()=>{class v extends h{}return v.kind="IndexOutOfBoundsException",v})(),U=(()=>{class v extends N{constructor(a=void 0,c=void 0){super(c),this.index=a,this.message=c}}return v.kind="ArrayIndexOutOfBoundsException",v})();class G{static fill(o,a){for(let c=0,u=o.length;c<u;c++)o[c]=a}static fillWithin(o,a,c,u){G.rangeCheck(o.length,a,c);for(let d=a;d<c;d++)o[d]=u}static rangeCheck(o,a,c){if(a>c)throw new m("fromIndex("+a+") > toIndex("+c+")");if(a<0)throw new U(a);if(c>o)throw new U(c)}static asList(...o){return o}static create(o,a,c){return Array.from({length:o}).map(d=>Array.from({length:a}).fill(c))}static createInt32Array(o,a,c){return Array.from({length:o}).map(d=>Int32Array.from({length:a}).fill(c))}static equals(o,a){if(!o||!a||!o.length||!a.length||o.length!==a.length)return!1;for(let c=0,u=o.length;c<u;c++)if(o[c]!==a[c])return!1;return!0}static hashCode(o){if(o===null)return 0;let a=1;for(let c of o)a=31*a+c;return a}static fillUint8Array(o,a){for(let c=0;c!==o.length;c++)o[c]=a}static copyOf(o,a){return o.slice(0,a)}static copyOfUint8Array(o,a){if(o.length<=a){let c=new Uint8Array(a);return c.set(o),c}return o.slice(0,a)}static copyOfRange(o,a,c){let u=c-a,d=new Int32Array(u);return D.arraycopy(o,a,d,0,u),d}static binarySearch(o,a,c){c===void 0&&(c=G.numberComparator);let u=0,d=o.length-1;for(;u<=d;){let f=d+u>>1,p=c(a,o[f]);if(p>0)u=f+1;else if(p<0)d=f-1;else return f}return-u-1}static numberComparator(o,a){return o-a}}class z{static numberOfTrailingZeros(o){let a;if(o===0)return 32;let c=31;return a=o<<16,a!==0&&(c-=16,o=a),a=o<<8,a!==0&&(c-=8,o=a),a=o<<4,a!==0&&(c-=4,o=a),a=o<<2,a!==0&&(c-=2,o=a),c-(o<<1>>>31)}static numberOfLeadingZeros(o){if(o===0)return 32;let a=1;return o>>>16||(a+=16,o<<=16),o>>>24||(a+=8,o<<=8),o>>>28||(a+=4,o<<=4),o>>>30||(a+=2,o<<=2),a-=o>>>31,a}static toHexString(o){return o.toString(16)}static toBinaryString(o){return String(parseInt(String(o),2))}static bitCount(o){return o=o-(o>>>1&1431655765),o=(o&858993459)+(o>>>2&858993459),o=o+(o>>>4)&252645135,o=o+(o>>>8),o=o+(o>>>16),o&63}static truncDivision(o,a){return Math.trunc(o/a)}static parseInt(o,a=void 0){return parseInt(o,a)}}z.MIN_VALUE_32_BITS=-2147483648,z.MAX_VALUE=Number.MAX_SAFE_INTEGER;class ne{constructor(o,a){o===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=o,a==null?this.bits=ne.makeArray(o):this.bits=a)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(o){if(o>this.bits.length*32){let a=ne.makeArray(o);D.arraycopy(this.bits,0,a,0,this.bits.length),this.bits=a}}get(o){return(this.bits[Math.floor(o/32)]&1<<(o&31))!==0}set(o){this.bits[Math.floor(o/32)]|=1<<(o&31)}flip(o){this.bits[Math.floor(o/32)]^=1<<(o&31)}getNextSet(o){let a=this.size;if(o>=a)return a;let c=this.bits,u=Math.floor(o/32),d=c[u];d&=~((1<<(o&31))-1);let f=c.length;for(;d===0;){if(++u===f)return a;d=c[u]}let p=u*32+z.numberOfTrailingZeros(d);return p>a?a:p}getNextUnset(o){let a=this.size;if(o>=a)return a;let c=this.bits,u=Math.floor(o/32),d=~c[u];d&=~((1<<(o&31))-1);let f=c.length;for(;d===0;){if(++u===f)return a;d=~c[u]}let p=u*32+z.numberOfTrailingZeros(d);return p>a?a:p}setBulk(o,a){this.bits[Math.floor(o/32)]=a}setRange(o,a){if(a<o||o<0||a>this.size)throw new m;if(a===o)return;a--;let c=Math.floor(o/32),u=Math.floor(a/32),d=this.bits;for(let f=c;f<=u;f++){let p=f>c?0:o&31,_=(2<<(f<u?31:a&31))-(1<<p);d[f]|=_}}clear(){let o=this.bits.length,a=this.bits;for(let c=0;c<o;c++)a[c]=0}isRange(o,a,c){if(a<o||o<0||a>this.size)throw new m;if(a===o)return!0;a--;let u=Math.floor(o/32),d=Math.floor(a/32),f=this.bits;for(let p=u;p<=d;p++){let y=p>u?0:o&31,w=(2<<(p<d?31:a&31))-(1<<y)&4294967295;if((f[p]&w)!==(c?w:0))return!1}return!0}appendBit(o){this.ensureCapacity(this.size+1),o&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(o,a){if(a<0||a>32)throw new m("Num bits must be between 0 and 32");this.ensureCapacity(this.size+a);for(let c=a;c>0;c--)this.appendBit((o>>c-1&1)===1)}appendBitArray(o){let a=o.size;this.ensureCapacity(this.size+a);for(let c=0;c<a;c++)this.appendBit(o.get(c))}xor(o){if(this.size!==o.size)throw new m("Sizes don't match");let a=this.bits;for(let c=0,u=a.length;c<u;c++)a[c]^=o.bits[c]}toBytes(o,a,c,u){for(let d=0;d<u;d++){let f=0;for(let p=0;p<8;p++)this.get(o)&&(f|=1<<7-p),o++;a[c+d]=f}}getBitArray(){return this.bits}reverse(){let o=new Int32Array(this.bits.length),a=Math.floor((this.size-1)/32),c=a+1,u=this.bits;for(let d=0;d<c;d++){let f=u[d];f=f>>1&1431655765|(f&1431655765)<<1,f=f>>2&858993459|(f&858993459)<<2,f=f>>4&252645135|(f&252645135)<<4,f=f>>8&16711935|(f&16711935)<<8,f=f>>16&65535|(f&65535)<<16,o[a-d]=f}if(this.size!==c*32){let d=c*32-this.size,f=o[0]>>>d;for(let p=1;p<c;p++){let y=o[p];f|=y<<32-d,o[p-1]=f,f=y>>>d}o[c-1]=f}this.bits=o}static makeArray(o){return new Int32Array(Math.floor((o+31)/32))}equals(o){if(!(o instanceof ne))return!1;let a=o;return this.size===a.size&&G.equals(this.bits,a.bits)}hashCode(){return 31*this.size+G.hashCode(this.bits)}toString(){let o="";for(let a=0,c=this.size;a<c;a++)a&7||(o+=" "),o+=this.get(a)?"X":".";return o}clone(){return new ne(this.size,this.bits.slice())}}var He=function(v){return v[v.OTHER=0]="OTHER",v[v.PURE_BARCODE=1]="PURE_BARCODE",v[v.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",v[v.TRY_HARDER=3]="TRY_HARDER",v[v.CHARACTER_SET=4]="CHARACTER_SET",v[v.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",v[v.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",v[v.ASSUME_GS1=7]="ASSUME_GS1",v[v.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",v[v.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",v[v.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS",v}(He||{}),le=He;let j=(()=>{class v extends h{static getFormatInstance(){return new v}}return v.kind="FormatException",v})();var se=function(v){return v[v.Cp437=0]="Cp437",v[v.ISO8859_1=1]="ISO8859_1",v[v.ISO8859_2=2]="ISO8859_2",v[v.ISO8859_3=3]="ISO8859_3",v[v.ISO8859_4=4]="ISO8859_4",v[v.ISO8859_5=5]="ISO8859_5",v[v.ISO8859_6=6]="ISO8859_6",v[v.ISO8859_7=7]="ISO8859_7",v[v.ISO8859_8=8]="ISO8859_8",v[v.ISO8859_9=9]="ISO8859_9",v[v.ISO8859_10=10]="ISO8859_10",v[v.ISO8859_11=11]="ISO8859_11",v[v.ISO8859_13=12]="ISO8859_13",v[v.ISO8859_14=13]="ISO8859_14",v[v.ISO8859_15=14]="ISO8859_15",v[v.ISO8859_16=15]="ISO8859_16",v[v.SJIS=16]="SJIS",v[v.Cp1250=17]="Cp1250",v[v.Cp1251=18]="Cp1251",v[v.Cp1252=19]="Cp1252",v[v.Cp1256=20]="Cp1256",v[v.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",v[v.UTF8=22]="UTF8",v[v.ASCII=23]="ASCII",v[v.Big5=24]="Big5",v[v.GB18030=25]="GB18030",v[v.EUC_KR=26]="EUC_KR",v}(se||{});class W{constructor(o,a,c,...u){this.valueIdentifier=o,this.name=c,typeof a=="number"?this.values=Int32Array.from([a]):this.values=a,this.otherEncodingNames=u,W.VALUE_IDENTIFIER_TO_ECI.set(o,this),W.NAME_TO_ECI.set(c,this);let d=this.values;for(let f=0,p=d.length;f!==p;f++){let y=d[f];W.VALUES_TO_ECI.set(y,this)}for(let f of u)W.NAME_TO_ECI.set(f,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(o){if(o<0||o>=900)throw new j("incorect value");let a=W.VALUES_TO_ECI.get(o);if(a===void 0)throw new j("incorect value");return a}static getCharacterSetECIByName(o){let a=W.NAME_TO_ECI.get(o);if(a===void 0)throw new j("incorect value");return a}equals(o){if(!(o instanceof W))return!1;let a=o;return this.getName()===a.getName()}}W.VALUE_IDENTIFIER_TO_ECI=new Map,W.VALUES_TO_ECI=new Map,W.NAME_TO_ECI=new Map,W.Cp437=new W(se.Cp437,Int32Array.from([0,2]),"Cp437"),W.ISO8859_1=new W(se.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),W.ISO8859_2=new W(se.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),W.ISO8859_3=new W(se.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),W.ISO8859_4=new W(se.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),W.ISO8859_5=new W(se.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),W.ISO8859_6=new W(se.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),W.ISO8859_7=new W(se.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),W.ISO8859_8=new W(se.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),W.ISO8859_9=new W(se.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),W.ISO8859_10=new W(se.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),W.ISO8859_11=new W(se.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),W.ISO8859_13=new W(se.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),W.ISO8859_14=new W(se.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),W.ISO8859_15=new W(se.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),W.ISO8859_16=new W(se.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),W.SJIS=new W(se.SJIS,20,"SJIS","Shift_JIS"),W.Cp1250=new W(se.Cp1250,21,"Cp1250","windows-1250"),W.Cp1251=new W(se.Cp1251,22,"Cp1251","windows-1251"),W.Cp1252=new W(se.Cp1252,23,"Cp1252","windows-1252"),W.Cp1256=new W(se.Cp1256,24,"Cp1256","windows-1256"),W.UnicodeBigUnmarked=new W(se.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),W.UTF8=new W(se.UTF8,26,"UTF8","UTF-8"),W.ASCII=new W(se.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),W.Big5=new W(se.Big5,28,"Big5"),W.GB18030=new W(se.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),W.EUC_KR=new W(se.EUC_KR,30,"EUC_KR","EUC-KR");let En=(()=>{class v extends h{}return v.kind="UnsupportedOperationException",v})();class Ft{static decode(o,a){let c=this.encodingName(a);return this.customDecoder?this.customDecoder(o,c):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(c)?this.decodeFallback(o,c):new TextDecoder(c).decode(o)}static shouldDecodeOnFallback(o){return!Ft.isBrowser()&&o==="ISO-8859-1"}static encode(o,a){let c=this.encodingName(a);return this.customEncoder?this.customEncoder(o,c):typeof TextEncoder>"u"?this.encodeFallback(o):new TextEncoder().encode(o)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(o){return typeof o=="string"?o:o.getName()}static encodingCharacterSet(o){return o instanceof W?o:W.getCharacterSetECIByName(o)}static decodeFallback(o,a){let c=this.encodingCharacterSet(a);if(Ft.isDecodeFallbackSupported(c)){let u="";for(let d=0,f=o.length;d<f;d++){let p=o[d].toString(16);p.length<2&&(p="0"+p),u+="%"+p}return decodeURIComponent(u)}if(c.equals(W.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(o.buffer));throw new En(`Encoding ${this.encodingName(a)} not supported by fallback.`)}static isDecodeFallbackSupported(o){return o.equals(W.UTF8)||o.equals(W.ISO8859_1)||o.equals(W.ASCII)}static encodeFallback(o){let c=btoa(unescape(encodeURIComponent(o))).split(""),u=[];for(let d=0;d<c.length;d++)u.push(c[d].charCodeAt(0));return new Uint8Array(u)}}class Ce{static castAsNonUtf8Char(o,a=null){let c=a?a.getName():this.ISO88591;return Ft.decode(new Uint8Array([o]),c)}static guessEncoding(o,a){if(a!=null&&a.get(le.CHARACTER_SET)!==void 0)return a.get(le.CHARACTER_SET).toString();let c=o.length,u=!0,d=!0,f=!0,p=0,y=0,_=0,w=0,I=0,b=0,A=0,T=0,M=0,R=0,P=0,q=o.length>3&&o[0]===239&&o[1]===187&&o[2]===191;for(let Q=0;Q<c&&(u||d||f);Q++){let B=o[Q]&255;f&&(p>0?B&128?p--:f=!1:B&128&&(B&64?(p++,B&32?(p++,B&16?(p++,B&8?f=!1:w++):_++):y++):f=!1)),u&&(B>127&&B<160?u=!1:B>159&&(B<192||B===215||B===247)&&P++),d&&(I>0?B<64||B===127||B>252?d=!1:I--:B===128||B===160||B>239?d=!1:B>160&&B<224?(b++,T=0,A++,A>M&&(M=A)):B>127?(I++,A=0,T++,T>R&&(R=T)):(A=0,T=0))}return f&&p>0&&(f=!1),d&&I>0&&(d=!1),f&&(q||y+_+w>0)?Ce.UTF8:d&&(Ce.ASSUME_SHIFT_JIS||M>=3||R>=3)?Ce.SHIFT_JIS:u&&d?M===2&&b===2||P*10>=c?Ce.SHIFT_JIS:Ce.ISO88591:u?Ce.ISO88591:d?Ce.SHIFT_JIS:f?Ce.UTF8:Ce.PLATFORM_DEFAULT_ENCODING}static format(o,...a){let c=-1;function u(f,p,y,_,w,I){if(f==="%%")return"%";if(a[++c]===void 0)return;f=_?parseInt(_.substr(1)):void 0;let b=w?parseInt(w.substr(1)):void 0,A;switch(I){case"s":A=a[c];break;case"c":A=a[c][0];break;case"f":A=parseFloat(a[c]).toFixed(f);break;case"p":A=parseFloat(a[c]).toPrecision(f);break;case"e":A=parseFloat(a[c]).toExponential(f);break;case"x":A=parseInt(a[c]).toString(b||16);break;case"d":A=parseFloat(parseInt(a[c],b||10).toPrecision(f)).toFixed(0);break}A=typeof A=="object"?JSON.stringify(A):(+A).toString(b);let T=parseInt(y),M=y&&y[0]+""=="0"?"0":" ";for(;A.length<T;)A=p!==void 0?A+M:M+A;return A}let d=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return o.replace(d,u)}static getBytes(o,a){return Ft.encode(o,a)}static getCharCode(o,a=0){return o.charCodeAt(a)}static getCharAt(o){return String.fromCharCode(o)}}Ce.SHIFT_JIS=W.SJIS.getName(),Ce.GB2312="GB2312",Ce.ISO88591=W.ISO8859_1.getName(),Ce.EUC_JP="EUC_JP",Ce.UTF8=W.UTF8.getName(),Ce.PLATFORM_DEFAULT_ENCODING=Ce.UTF8,Ce.ASSUME_SHIFT_JIS=!1;class mt{constructor(o=""){this.value=o}enableDecoding(o){return this.encoding=o,this}append(o){return typeof o=="string"?this.value+=o.toString():this.encoding?this.value+=Ce.castAsNonUtf8Char(o,this.encoding):this.value+=String.fromCharCode(o),this}appendChars(o,a,c){for(let u=a;a<a+c;u++)this.append(o[u]);return this}length(){return this.value.length}charAt(o){return this.value.charAt(o)}deleteCharAt(o){this.value=this.value.substr(0,o)+this.value.substring(o+1)}setCharAt(o,a){this.value=this.value.substr(0,o)+a+this.value.substr(o+1)}substring(o,a){return this.value.substring(o,a)}setLengthToZero(){this.value=""}toString(){return this.value}insert(o,a){this.value=this.value.substr(0,o)+a+this.value.substr(o+a.length)}}class Kt{constructor(o,a,c,u){if(this.width=o,this.height=a,this.rowSize=c,this.bits=u,a==null&&(a=o),this.height=a,o<1||a<1)throw new m("Both dimensions must be greater than 0");c==null&&(c=Math.floor((o+31)/32)),this.rowSize=c,u==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(o){let a=o.length,c=o[0].length,u=new Kt(c,a);for(let d=0;d<a;d++){let f=o[d];for(let p=0;p<c;p++)f[p]&&u.set(p,d)}return u}static parseFromString(o,a,c){if(o===null)throw new m("stringRepresentation cannot be null");let u=new Array(o.length),d=0,f=0,p=-1,y=0,_=0;for(;_<o.length;)if(o.charAt(_)===`
`||o.charAt(_)==="\r"){if(d>f){if(p===-1)p=d-f;else if(d-f!==p)throw new m("row lengths do not match");f=d,y++}_++}else if(o.substring(_,_+a.length)===a)_+=a.length,u[d]=!0,d++;else if(o.substring(_,_+c.length)===c)_+=c.length,u[d]=!1,d++;else throw new m("illegal character encountered: "+o.substring(_));if(d>f){if(p===-1)p=d-f;else if(d-f!==p)throw new m("row lengths do not match");y++}let w=new Kt(p,y);for(let I=0;I<d;I++)u[I]&&w.set(Math.floor(I%p),Math.floor(I/p));return w}get(o,a){let c=a*this.rowSize+Math.floor(o/32);return(this.bits[c]>>>(o&31)&1)!==0}set(o,a){let c=a*this.rowSize+Math.floor(o/32);this.bits[c]|=1<<(o&31)&4294967295}unset(o,a){let c=a*this.rowSize+Math.floor(o/32);this.bits[c]&=~(1<<(o&31)&4294967295)}flip(o,a){let c=a*this.rowSize+Math.floor(o/32);this.bits[c]^=1<<(o&31)&4294967295}xor(o){if(this.width!==o.getWidth()||this.height!==o.getHeight()||this.rowSize!==o.getRowSize())throw new m("input matrix dimensions do not match");let a=new ne(Math.floor(this.width/32)+1),c=this.rowSize,u=this.bits;for(let d=0,f=this.height;d<f;d++){let p=d*c,y=o.getRow(d,a).getBitArray();for(let _=0;_<c;_++)u[p+_]^=y[_]}}clear(){let o=this.bits,a=o.length;for(let c=0;c<a;c++)o[c]=0}setRegion(o,a,c,u){if(a<0||o<0)throw new m("Left and top must be nonnegative");if(u<1||c<1)throw new m("Height and width must be at least 1");let d=o+c,f=a+u;if(f>this.height||d>this.width)throw new m("The region must fit inside the matrix");let p=this.rowSize,y=this.bits;for(let _=a;_<f;_++){let w=_*p;for(let I=o;I<d;I++)y[w+Math.floor(I/32)]|=1<<(I&31)&4294967295}}getRow(o,a){a==null||a.getSize()<this.width?a=new ne(this.width):a.clear();let c=this.rowSize,u=this.bits,d=o*c;for(let f=0;f<c;f++)a.setBulk(f*32,u[d+f]);return a}setRow(o,a){D.arraycopy(a.getBitArray(),0,this.bits,o*this.rowSize,this.rowSize)}rotate180(){let o=this.getWidth(),a=this.getHeight(),c=new ne(o),u=new ne(o);for(let d=0,f=Math.floor((a+1)/2);d<f;d++)c=this.getRow(d,c),u=this.getRow(a-1-d,u),c.reverse(),u.reverse(),this.setRow(d,u),this.setRow(a-1-d,c)}getEnclosingRectangle(){let o=this.width,a=this.height,c=this.rowSize,u=this.bits,d=o,f=a,p=-1,y=-1;for(let _=0;_<a;_++)for(let w=0;w<c;w++){let I=u[_*c+w];if(I!==0){if(_<f&&(f=_),_>y&&(y=_),w*32<d){let b=0;for(;!(I<<31-b&4294967295);)b++;w*32+b<d&&(d=w*32+b)}if(w*32+31>p){let b=31;for(;!(I>>>b);)b--;w*32+b>p&&(p=w*32+b)}}}return p<d||y<f?null:Int32Array.from([d,f,p-d+1,y-f+1])}getTopLeftOnBit(){let o=this.rowSize,a=this.bits,c=0;for(;c<a.length&&a[c]===0;)c++;if(c===a.length)return null;let u=c/o,d=c%o*32,f=a[c],p=0;for(;!(f<<31-p&4294967295);)p++;return d+=p,Int32Array.from([d,u])}getBottomRightOnBit(){let o=this.rowSize,a=this.bits,c=a.length-1;for(;c>=0&&a[c]===0;)c--;if(c<0)return null;let u=Math.floor(c/o),d=Math.floor(c%o)*32,f=a[c],p=31;for(;!(f>>>p);)p--;return d+=p,Int32Array.from([d,u])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(o){if(!(o instanceof Kt))return!1;let a=o;return this.width===a.width&&this.height===a.height&&this.rowSize===a.rowSize&&G.equals(this.bits,a.bits)}hashCode(){let o=this.width;return o=31*o+this.width,o=31*o+this.height,o=31*o+this.rowSize,o=31*o+G.hashCode(this.bits),o}toString(o="X ",a="  ",c=`
`){return this.buildToString(o,a,c)}buildToString(o,a,c){let u=new mt;for(let d=0,f=this.height;d<f;d++){for(let p=0,y=this.width;p<y;p++)u.append(this.get(p,d)?o:a);u.append(c)}return u.toString()}clone(){return new Kt(this.width,this.height,this.rowSize,this.bits.slice())}}let V=(()=>{class v extends h{static getNotFoundInstance(){return new v}}return v.kind="NotFoundException",v})();class Jt extends x{constructor(o){super(o),this.luminances=Jt.EMPTY,this.buckets=new Int32Array(Jt.LUMINANCE_BUCKETS)}getBlackRow(o,a){let c=this.getLuminanceSource(),u=c.getWidth();a==null||a.getSize()<u?a=new ne(u):a.clear(),this.initArrays(u);let d=c.getRow(o,this.luminances),f=this.buckets;for(let y=0;y<u;y++)f[(d[y]&255)>>Jt.LUMINANCE_SHIFT]++;let p=Jt.estimateBlackPoint(f);if(u<3)for(let y=0;y<u;y++)(d[y]&255)<p&&a.set(y);else{let y=d[0]&255,_=d[1]&255;for(let w=1;w<u-1;w++){let I=d[w+1]&255;(_*4-y-I)/2<p&&a.set(w),y=_,_=I}}return a}getBlackMatrix(){let o=this.getLuminanceSource(),a=o.getWidth(),c=o.getHeight(),u=new Kt(a,c);this.initArrays(a);let d=this.buckets;for(let y=1;y<5;y++){let _=Math.floor(c*y/5),w=o.getRow(_,this.luminances),I=Math.floor(a*4/5);for(let b=Math.floor(a/5);b<I;b++){let A=w[b]&255;d[A>>Jt.LUMINANCE_SHIFT]++}}let f=Jt.estimateBlackPoint(d),p=o.getMatrix();for(let y=0;y<c;y++){let _=y*a;for(let w=0;w<a;w++)(p[_+w]&255)<f&&u.set(w,y)}return u}createBinarizer(o){return new Jt(o)}initArrays(o){this.luminances.length<o&&(this.luminances=new Uint8ClampedArray(o));let a=this.buckets;for(let c=0;c<Jt.LUMINANCE_BUCKETS;c++)a[c]=0}static estimateBlackPoint(o){let a=o.length,c=0,u=0,d=0;for(let w=0;w<a;w++)o[w]>d&&(u=w,d=o[w]),o[w]>c&&(c=o[w]);let f=0,p=0;for(let w=0;w<a;w++){let I=w-u,b=o[w]*I*I;b>p&&(f=w,p=b)}if(u>f){let w=u;u=f,f=w}if(f-u<=a/16)throw new V;let y=f-1,_=-1;for(let w=f-1;w>u;w--){let I=w-u,b=I*I*(f-w)*(c-o[w]);b>_&&(y=w,_=b)}return y<<Jt.LUMINANCE_SHIFT}}Jt.LUMINANCE_BITS=5,Jt.LUMINANCE_SHIFT=8-Jt.LUMINANCE_BITS,Jt.LUMINANCE_BUCKETS=1<<Jt.LUMINANCE_BITS,Jt.EMPTY=Uint8ClampedArray.from([0]);class Ne extends Jt{constructor(o){super(o),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;let o=this.getLuminanceSource(),a=o.getWidth(),c=o.getHeight();if(a>=Ne.MINIMUM_DIMENSION&&c>=Ne.MINIMUM_DIMENSION){let u=o.getMatrix(),d=a>>Ne.BLOCK_SIZE_POWER;a&Ne.BLOCK_SIZE_MASK&&d++;let f=c>>Ne.BLOCK_SIZE_POWER;c&Ne.BLOCK_SIZE_MASK&&f++;let p=Ne.calculateBlackPoints(u,d,f,a,c),y=new Kt(a,c);Ne.calculateThresholdForBlock(u,d,f,a,c,p,y),this.matrix=y}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(o){return new Ne(o)}static calculateThresholdForBlock(o,a,c,u,d,f,p){let y=d-Ne.BLOCK_SIZE,_=u-Ne.BLOCK_SIZE;for(let w=0;w<c;w++){let I=w<<Ne.BLOCK_SIZE_POWER;I>y&&(I=y);let b=Ne.cap(w,2,c-3);for(let A=0;A<a;A++){let T=A<<Ne.BLOCK_SIZE_POWER;T>_&&(T=_);let M=Ne.cap(A,2,a-3),R=0;for(let q=-2;q<=2;q++){let Q=f[b+q];R+=Q[M-2]+Q[M-1]+Q[M]+Q[M+1]+Q[M+2]}let P=R/25;Ne.thresholdBlock(o,T,I,P,u,p)}}}static cap(o,a,c){return o<a?a:o>c?c:o}static thresholdBlock(o,a,c,u,d,f){for(let p=0,y=c*d+a;p<Ne.BLOCK_SIZE;p++,y+=d)for(let _=0;_<Ne.BLOCK_SIZE;_++)(o[y+_]&255)<=u&&f.set(a+_,c+p)}static calculateBlackPoints(o,a,c,u,d){let f=d-Ne.BLOCK_SIZE,p=u-Ne.BLOCK_SIZE,y=new Array(c);for(let _=0;_<c;_++){y[_]=new Int32Array(a);let w=_<<Ne.BLOCK_SIZE_POWER;w>f&&(w=f);for(let I=0;I<a;I++){let b=I<<Ne.BLOCK_SIZE_POWER;b>p&&(b=p);let A=0,T=255,M=0;for(let P=0,q=w*u+b;P<Ne.BLOCK_SIZE;P++,q+=u){for(let Q=0;Q<Ne.BLOCK_SIZE;Q++){let B=o[q+Q]&255;A+=B,B<T&&(T=B),B>M&&(M=B)}if(M-T>Ne.MIN_DYNAMIC_RANGE)for(P++,q+=u;P<Ne.BLOCK_SIZE;P++,q+=u)for(let Q=0;Q<Ne.BLOCK_SIZE;Q++)A+=o[q+Q]&255}let R=A>>Ne.BLOCK_SIZE_POWER*2;if(M-T<=Ne.MIN_DYNAMIC_RANGE&&(R=T/2,_>0&&I>0)){let P=(y[_-1][I]+2*y[_][I-1]+y[_-1][I-1])/4;T<P&&(R=P)}y[_][I]=R}}return y}}Ne.BLOCK_SIZE_POWER=3,Ne.BLOCK_SIZE=1<<Ne.BLOCK_SIZE_POWER,Ne.BLOCK_SIZE_MASK=Ne.BLOCK_SIZE-1,Ne.MINIMUM_DIMENSION=Ne.BLOCK_SIZE*5,Ne.MIN_DYNAMIC_RANGE=24;class Xa{constructor(o,a){this.width=o,this.height=a}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(o,a,c,u){throw new En("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new En("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new En("This luminance source does not support rotation by 45 degrees.")}toString(){let o=new Uint8ClampedArray(this.width),a=new mt;for(let c=0;c<this.height;c++){let u=this.getRow(c,o);for(let d=0;d<this.width;d++){let f=u[d]&255,p;f<64?p="#":f<128?p="+":f<192?p=".":p=" ",a.append(p)}a.append(`
`)}return a.toString()}}class ji extends Xa{constructor(o){super(o.getWidth(),o.getHeight()),this.delegate=o}getRow(o,a){let c=this.delegate.getRow(o,a),u=this.getWidth();for(let d=0;d<u;d++)c[d]=255-(c[d]&255);return c}getMatrix(){let o=this.delegate.getMatrix(),a=this.getWidth()*this.getHeight(),c=new Uint8ClampedArray(a);for(let u=0;u<a;u++)c[u]=255-(o[u]&255);return c}isCropSupported(){return this.delegate.isCropSupported()}crop(o,a,c,u){return new ji(this.delegate.crop(o,a,c,u))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new ji(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new ji(this.delegate.rotateCounterClockwise45())}}class Hi extends Xa{constructor(o){super(o.width,o.height),this.canvas=o,this.tempCanvasElement=null,this.buffer=Hi.makeBufferFromCanvasImageData(o)}static makeBufferFromCanvasImageData(o){let a=o.getContext("2d").getImageData(0,0,o.width,o.height);return Hi.toGrayscaleBuffer(a.data,o.width,o.height)}static toGrayscaleBuffer(o,a,c){let u=new Uint8ClampedArray(a*c);for(let d=0,f=0,p=o.length;d<p;d+=4,f++){let y;if(o[d+3]===0)y=255;else{let w=o[d],I=o[d+1],b=o[d+2];y=306*w+601*I+117*b+512>>10}u[f]=y}return u}getRow(o,a){if(o<0||o>=this.getHeight())throw new m("Requested row is outside the image: "+o);let c=this.getWidth(),u=o*c;return a===null?a=this.buffer.slice(u,u+c):(a.length<c&&(a=new Uint8ClampedArray(c)),a.set(this.buffer.slice(u,u+c))),a}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(o,a,c,u){return super.crop(o,a,c,u),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){let o=this.canvas.ownerDocument.createElement("canvas");o.width=this.canvas.width,o.height=this.canvas.height,this.tempCanvasElement=o}return this.tempCanvasElement}rotate(o){let a=this.getTempCanvasElement(),c=a.getContext("2d"),u=o*Hi.DEGREE_TO_RADIANS,d=this.canvas.width,f=this.canvas.height,p=Math.ceil(Math.abs(Math.cos(u))*d+Math.abs(Math.sin(u))*f),y=Math.ceil(Math.abs(Math.sin(u))*d+Math.abs(Math.cos(u))*f);return a.width=p,a.height=y,c.translate(p/2,y/2),c.rotate(u),c.drawImage(this.canvas,d/-2,f/-2),this.buffer=Hi.makeBufferFromCanvasImageData(a),this}invert(){return new ji(this)}}Hi.DEGREE_TO_RADIANS=Math.PI/180;class J_{constructor(o,a,c){this.deviceId=o,this.label=a,this.kind="videoinput",this.groupId=c||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var In=(globalThis||global||self||window||void 0)&&(globalThis||global||self||window||void 0).__awaiter||function(v,o,a,c){function u(d){return d instanceof a?d:new a(function(f){f(d)})}return new(a||(a=Promise))(function(d,f){function p(w){try{_(c.next(w))}catch(I){f(I)}}function y(w){try{_(c.throw(w))}catch(I){f(I)}}function _(w){w.done?d(w.value):u(w.value).then(p,y)}_((c=c.apply(v,o||[])).next())})};class To{constructor(o,a=500,c){this.reader=o,this.timeBetweenScansMillis=a,this._hints=c,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(o){this._timeBetweenDecodingAttempts=o<0?0:o}set hints(o){this._hints=o||null}get hints(){return this._hints}listVideoInputDevices(){return In(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");let o=yield navigator.mediaDevices.enumerateDevices(),a=[];for(let c of o){let u=c.kind==="video"?"videoinput":c.kind;if(u!=="videoinput")continue;let d=c.deviceId||c.id,f=c.label||`Video device ${a.length+1}`,p=c.groupId,y={deviceId:d,label:f,kind:u,groupId:p};a.push(y)}return a})}getVideoInputDevices(){return In(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(a=>new J_(a.deviceId,a.label))})}findDeviceById(o){return In(this,void 0,void 0,function*(){let a=yield this.listVideoInputDevices();return a?a.find(c=>c.deviceId===o):null})}decodeFromInputVideoDevice(o,a){return In(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(o,a)})}decodeOnceFromVideoDevice(o,a){return In(this,void 0,void 0,function*(){this.reset();let c;o?c={deviceId:{exact:o}}:c={facingMode:"environment"};let u={video:c};return yield this.decodeOnceFromConstraints(u,a)})}decodeOnceFromConstraints(o,a){return In(this,void 0,void 0,function*(){let c=yield navigator.mediaDevices.getUserMedia(o);return yield this.decodeOnceFromStream(c,a)})}decodeOnceFromStream(o,a){return In(this,void 0,void 0,function*(){this.reset();let c=yield this.attachStreamToVideo(o,a);return yield this.decodeOnce(c)})}decodeFromInputVideoDeviceContinuously(o,a,c){return In(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(o,a,c)})}decodeFromVideoDevice(o,a,c){return In(this,void 0,void 0,function*(){let u;o?u={deviceId:{exact:o}}:u={facingMode:"environment"};let d={video:u};return yield this.decodeFromConstraints(d,a,c)})}decodeFromConstraints(o,a,c){return In(this,void 0,void 0,function*(){let u=yield navigator.mediaDevices.getUserMedia(o);return yield this.decodeFromStream(u,a,c)})}decodeFromStream(o,a,c){return In(this,void 0,void 0,function*(){this.reset();let u=yield this.attachStreamToVideo(o,a);return yield this.decodeContinuously(u,c)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(o,a){return In(this,void 0,void 0,function*(){let c=this.prepareVideoElement(a);return this.addVideoSource(c,o),this.videoElement=c,this.stream=o,yield this.playVideoOnLoadAsync(c),c})}playVideoOnLoadAsync(o){return new Promise((a,c)=>this.playVideoOnLoad(o,()=>a()))}playVideoOnLoad(o,a){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(o),o.addEventListener("ended",this.videoEndedListener),o.addEventListener("canplay",this.videoCanPlayListener),o.addEventListener("playing",a),this.tryPlayVideo(o)}isVideoPlaying(o){return o.currentTime>0&&!o.paused&&!o.ended&&o.readyState>2}tryPlayVideo(o){return In(this,void 0,void 0,function*(){if(this.isVideoPlaying(o)){console.warn("Trying to play video that is already playing.");return}try{yield o.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(o,a){let c=document.getElementById(o);if(!c)throw new g(`element with id '${o}' not found`);if(c.nodeName.toLowerCase()!==a.toLowerCase())throw new g(`element with id '${o}' must be an ${a} element`);return c}decodeFromImage(o,a){if(!o&&!a)throw new g("either imageElement with a src set or an url must be provided");return a&&!o?this.decodeFromImageUrl(a):this.decodeFromImageElement(o)}decodeFromVideo(o,a){if(!o&&!a)throw new g("Either an element with a src set or an URL must be provided");return a&&!o?this.decodeFromVideoUrl(a):this.decodeFromVideoElement(o)}decodeFromVideoContinuously(o,a,c){if(o===void 0&&a===void 0)throw new g("Either an element with a src set or an URL must be provided");return a&&!o?this.decodeFromVideoUrlContinuously(a,c):this.decodeFromVideoElementContinuously(o,c)}decodeFromImageElement(o){if(!o)throw new g("An image element must be provided.");this.reset();let a=this.prepareImageElement(o);this.imageElement=a;let c;return this.isImageLoaded(a)?c=this.decodeOnce(a,!1,!0):c=this._decodeOnLoadImage(a),c}decodeFromVideoElement(o){let a=this._decodeFromVideoElementSetup(o);return this._decodeOnLoadVideo(a)}decodeFromVideoElementContinuously(o,a){let c=this._decodeFromVideoElementSetup(o);return this._decodeOnLoadVideoContinuously(c,a)}_decodeFromVideoElementSetup(o){if(!o)throw new g("A video element must be provided.");this.reset();let a=this.prepareVideoElement(o);return this.videoElement=a,a}decodeFromImageUrl(o){if(!o)throw new g("An URL must be provided.");this.reset();let a=this.prepareImageElement();this.imageElement=a;let c=this._decodeOnLoadImage(a);return a.src=o,c}decodeFromVideoUrl(o){if(!o)throw new g("An URL must be provided.");this.reset();let a=this.prepareVideoElement(),c=this.decodeFromVideoElement(a);return a.src=o,c}decodeFromVideoUrlContinuously(o,a){if(!o)throw new g("An URL must be provided.");this.reset();let c=this.prepareVideoElement(),u=this.decodeFromVideoElementContinuously(c,a);return c.src=o,u}_decodeOnLoadImage(o){return new Promise((a,c)=>{this.imageLoadedListener=()=>this.decodeOnce(o,!1,!0).then(a,c),o.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(o){return In(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(o),yield this.decodeOnce(o)})}_decodeOnLoadVideoContinuously(o,a){return In(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(o),this.decodeContinuously(o,a)})}isImageLoaded(o){return!(!o.complete||o.naturalWidth===0)}prepareImageElement(o){let a;return typeof o>"u"&&(a=document.createElement("img"),a.width=200,a.height=200),typeof o=="string"&&(a=this.getMediaElement(o,"img")),o instanceof HTMLImageElement&&(a=o),a}prepareVideoElement(o){let a;return!o&&typeof document<"u"&&(a=document.createElement("video"),a.width=200,a.height=200),typeof o=="string"&&(a=this.getMediaElement(o,"video")),o instanceof HTMLVideoElement&&(a=o),a.setAttribute("autoplay","true"),a.setAttribute("muted","true"),a.setAttribute("playsinline","true"),a}decodeOnce(o,a=!0,c=!0){this._stopAsyncDecode=!1;let u=(d,f)=>{if(this._stopAsyncDecode){f(new V("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{let p=this.decode(o);d(p)}catch(p){let y=a&&p instanceof V,w=(p instanceof E||p instanceof j)&&c;if(y||w)return setTimeout(u,this._timeBetweenDecodingAttempts,d,f);f(p)}};return new Promise((d,f)=>u(d,f))}decodeContinuously(o,a){this._stopContinuousDecode=!1;let c=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{let u=this.decode(o);a(u,null),setTimeout(c,this.timeBetweenScansMillis)}catch(u){a(null,u);let d=u instanceof E||u instanceof j,f=u instanceof V;(d||f)&&setTimeout(c,this._timeBetweenDecodingAttempts)}};c()}decode(o){let a=this.createBinaryBitmap(o);return this.decodeBitmap(a)}_isHTMLVideoElement(o){return o.videoWidth!==0}drawFrameOnCanvas(o,a,c){a||(a={sx:0,sy:0,sWidth:o.videoWidth,sHeight:o.videoHeight,dx:0,dy:0,dWidth:o.videoWidth,dHeight:o.videoHeight}),c||(c=this.captureCanvasContext),c.drawImage(o,a.sx,a.sy,a.sWidth,a.sHeight,a.dx,a.dy,a.dWidth,a.dHeight)}drawImageOnCanvas(o,a,c=this.captureCanvasContext){a||(a={sx:0,sy:0,sWidth:o.naturalWidth,sHeight:o.naturalHeight,dx:0,dy:0,dWidth:o.naturalWidth,dHeight:o.naturalHeight}),c||(c=this.captureCanvasContext),c.drawImage(o,a.sx,a.sy,a.sWidth,a.sHeight,a.dx,a.dy,a.dWidth,a.dHeight)}createBinaryBitmap(o){let a=this.getCaptureCanvasContext(o);this._isHTMLVideoElement(o)?this.drawFrameOnCanvas(o):this.drawImageOnCanvas(o);let c=this.getCaptureCanvas(o),u=new Hi(c),d=new Ne(u);return new C(d)}getCaptureCanvasContext(o){if(!this.captureCanvasContext){let c=this.getCaptureCanvas(o).getContext("2d");this.captureCanvasContext=c}return this.captureCanvasContext}getCaptureCanvas(o){if(!this.captureCanvas){let a=this.createCaptureCanvas(o);this.captureCanvas=a}return this.captureCanvas}decodeBitmap(o){return this.reader.decode(o,this._hints)}createCaptureCanvas(o){if(typeof document>"u")return this._destroyCaptureCanvas(),null;let a=document.createElement("canvas"),c,u;return typeof o<"u"&&(o instanceof HTMLVideoElement?(c=o.videoWidth,u=o.videoHeight):o instanceof HTMLImageElement&&(c=o.naturalWidth||o.width,u=o.naturalHeight||o.height)),a.style.width=c+"px",a.style.height=u+"px",a.width=c,a.height=u,a}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(o=>o.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(o,a){try{o.srcObject=a}catch{o.src=URL.createObjectURL(a)}}cleanVideoSource(o){try{o.srcObject=null}catch{o.src=""}this.videoElement.removeAttribute("src")}}class bn{constructor(o,a,c=a==null?0:8*a.length,u,d,f=D.currentTimeMillis()){this.text=o,this.rawBytes=a,this.numBits=c,this.resultPoints=u,this.format=d,this.timestamp=f,this.text=o,this.rawBytes=a,c==null?this.numBits=a==null?0:8*a.length:this.numBits=c,this.resultPoints=u,this.format=d,this.resultMetadata=null,f==null?this.timestamp=D.currentTimeMillis():this.timestamp=f}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(o,a){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(o,a)}putAllMetadata(o){o!==null&&(this.resultMetadata===null?this.resultMetadata=o:this.resultMetadata=new Map(o))}addResultPoints(o){let a=this.resultPoints;if(a===null)this.resultPoints=o;else if(o!==null&&o.length>0){let c=new Array(a.length+o.length);D.arraycopy(a,0,c,0,a.length),D.arraycopy(o,0,c,a.length,o.length),this.resultPoints=c}}getTimestamp(){return this.timestamp}toString(){return this.text}}var ev=function(v){return v[v.AZTEC=0]="AZTEC",v[v.CODABAR=1]="CODABAR",v[v.CODE_39=2]="CODE_39",v[v.CODE_93=3]="CODE_93",v[v.CODE_128=4]="CODE_128",v[v.DATA_MATRIX=5]="DATA_MATRIX",v[v.EAN_8=6]="EAN_8",v[v.EAN_13=7]="EAN_13",v[v.ITF=8]="ITF",v[v.MAXICODE=9]="MAXICODE",v[v.PDF_417=10]="PDF_417",v[v.QR_CODE=11]="QR_CODE",v[v.RSS_14=12]="RSS_14",v[v.RSS_EXPANDED=13]="RSS_EXPANDED",v[v.UPC_A=14]="UPC_A",v[v.UPC_E=15]="UPC_E",v[v.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION",v}(ev||{}),ge=ev,tv=function(v){return v[v.OTHER=0]="OTHER",v[v.ORIENTATION=1]="ORIENTATION",v[v.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",v[v.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",v[v.ISSUE_NUMBER=4]="ISSUE_NUMBER",v[v.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",v[v.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",v[v.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",v[v.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",v[v.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",v[v.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY",v}(tv||{}),en=tv;class Qa{constructor(o,a,c,u,d=-1,f=-1){this.rawBytes=o,this.text=a,this.byteSegments=c,this.ecLevel=u,this.structuredAppendSequenceNumber=d,this.structuredAppendParity=f,this.numBits=o==null?0:8*o.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(o){this.numBits=o}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(o){this.errorsCorrected=o}getErasures(){return this.erasures}setErasures(o){this.erasures=o}getOther(){return this.other}setOther(o){this.other=o}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class Ka{exp(o){return this.expTable[o]}log(o){if(o===0)throw new m;return this.logTable[o]}static addOrSubtract(o,a){return o^a}}class Nn{constructor(o,a){if(a.length===0)throw new m;this.field=o;let c=a.length;if(c>1&&a[0]===0){let u=1;for(;u<c&&a[u]===0;)u++;u===c?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(c-u),D.arraycopy(a,u,this.coefficients,0,this.coefficients.length))}else this.coefficients=a}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(o){return this.coefficients[this.coefficients.length-1-o]}evaluateAt(o){if(o===0)return this.getCoefficient(0);let a=this.coefficients,c;if(o===1){c=0;for(let f=0,p=a.length;f!==p;f++){let y=a[f];c=Ka.addOrSubtract(c,y)}return c}c=a[0];let u=a.length,d=this.field;for(let f=1;f<u;f++)c=Ka.addOrSubtract(d.multiply(o,c),a[f]);return c}addOrSubtract(o){if(!this.field.equals(o.field))throw new m("GenericGFPolys do not have same GenericGF field");if(this.isZero())return o;if(o.isZero())return this;let a=this.coefficients,c=o.coefficients;if(a.length>c.length){let f=a;a=c,c=f}let u=new Int32Array(c.length),d=c.length-a.length;D.arraycopy(c,0,u,0,d);for(let f=d;f<c.length;f++)u[f]=Ka.addOrSubtract(a[f-d],c[f]);return new Nn(this.field,u)}multiply(o){if(!this.field.equals(o.field))throw new m("GenericGFPolys do not have same GenericGF field");if(this.isZero()||o.isZero())return this.field.getZero();let a=this.coefficients,c=a.length,u=o.coefficients,d=u.length,f=new Int32Array(c+d-1),p=this.field;for(let y=0;y<c;y++){let _=a[y];for(let w=0;w<d;w++)f[y+w]=Ka.addOrSubtract(f[y+w],p.multiply(_,u[w]))}return new Nn(p,f)}multiplyScalar(o){if(o===0)return this.field.getZero();if(o===1)return this;let a=this.coefficients.length,c=this.field,u=new Int32Array(a),d=this.coefficients;for(let f=0;f<a;f++)u[f]=c.multiply(d[f],o);return new Nn(c,u)}multiplyByMonomial(o,a){if(o<0)throw new m;if(a===0)return this.field.getZero();let c=this.coefficients,u=c.length,d=new Int32Array(u+o),f=this.field;for(let p=0;p<u;p++)d[p]=f.multiply(c[p],a);return new Nn(f,d)}divide(o){if(!this.field.equals(o.field))throw new m("GenericGFPolys do not have same GenericGF field");if(o.isZero())throw new m("Divide by 0");let a=this.field,c=a.getZero(),u=this,d=o.getCoefficient(o.getDegree()),f=a.inverse(d);for(;u.getDegree()>=o.getDegree()&&!u.isZero();){let p=u.getDegree()-o.getDegree(),y=a.multiply(u.getCoefficient(u.getDegree()),f),_=o.multiplyByMonomial(p,y),w=a.buildMonomial(p,y);c=c.addOrSubtract(w),u=u.addOrSubtract(_)}return[c,u]}toString(){let o="";for(let a=this.getDegree();a>=0;a--){let c=this.getCoefficient(a);if(c!==0){if(c<0?(o+=" - ",c=-c):o.length>0&&(o+=" + "),a===0||c!==1){let u=this.field.log(c);u===0?o+="1":u===1?o+="a":(o+="a^",o+=u)}a!==0&&(a===1?o+="x":(o+="x^",o+=a))}}return o}}let ep=(()=>{class v extends h{}return v.kind="ArithmeticException",v})();class nt extends Ka{constructor(o,a,c){super(),this.primitive=o,this.size=a,this.generatorBase=c;let u=new Int32Array(a),d=1;for(let p=0;p<a;p++)u[p]=d,d*=2,d>=a&&(d^=o,d&=a-1);this.expTable=u;let f=new Int32Array(a);for(let p=0;p<a-1;p++)f[u[p]]=p;this.logTable=f,this.zero=new Nn(this,Int32Array.from([0])),this.one=new Nn(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(o,a){if(o<0)throw new m;if(a===0)return this.zero;let c=new Int32Array(o+1);return c[0]=a,new Nn(this,c)}inverse(o){if(o===0)throw new ep;return this.expTable[this.size-this.logTable[o]-1]}multiply(o,a){return o===0||a===0?0:this.expTable[(this.logTable[o]+this.logTable[a])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+z.toHexString(this.primitive)+","+this.size+")"}equals(o){return o===this}}nt.AZTEC_DATA_12=new nt(4201,4096,1),nt.AZTEC_DATA_10=new nt(1033,1024,1),nt.AZTEC_DATA_6=new nt(67,64,1),nt.AZTEC_PARAM=new nt(19,16,1),nt.QR_CODE_FIELD_256=new nt(285,256,0),nt.DATA_MATRIX_FIELD_256=new nt(301,256,1),nt.AZTEC_DATA_8=nt.DATA_MATRIX_FIELD_256,nt.MAXICODE_FIELD_64=nt.AZTEC_DATA_6;let Ja=(()=>{class v extends h{}return v.kind="ReedSolomonException",v})(),ui=(()=>{class v extends h{}return v.kind="IllegalStateException",v})();class ec{constructor(o){this.field=o}decode(o,a){let c=this.field,u=new Nn(c,o),d=new Int32Array(a),f=!0;for(let A=0;A<a;A++){let T=u.evaluateAt(c.exp(A+c.getGeneratorBase()));d[d.length-1-A]=T,T!==0&&(f=!1)}if(f)return;let p=new Nn(c,d),y=this.runEuclideanAlgorithm(c.buildMonomial(a,1),p,a),_=y[0],w=y[1],I=this.findErrorLocations(_),b=this.findErrorMagnitudes(w,I);for(let A=0;A<I.length;A++){let T=o.length-1-c.log(I[A]);if(T<0)throw new Ja("Bad error location");o[T]=nt.addOrSubtract(o[T],b[A])}}runEuclideanAlgorithm(o,a,c){if(o.getDegree()<a.getDegree()){let A=o;o=a,a=A}let u=this.field,d=o,f=a,p=u.getZero(),y=u.getOne();for(;f.getDegree()>=(c/2|0);){let A=d,T=p;if(d=f,p=y,d.isZero())throw new Ja("r_{i-1} was zero");f=A;let M=u.getZero(),R=d.getCoefficient(d.getDegree()),P=u.inverse(R);for(;f.getDegree()>=d.getDegree()&&!f.isZero();){let q=f.getDegree()-d.getDegree(),Q=u.multiply(f.getCoefficient(f.getDegree()),P);M=M.addOrSubtract(u.buildMonomial(q,Q)),f=f.addOrSubtract(d.multiplyByMonomial(q,Q))}if(y=M.multiply(p).addOrSubtract(T),f.getDegree()>=d.getDegree())throw new ui("Division algorithm failed to reduce polynomial?")}let _=y.getCoefficient(0);if(_===0)throw new Ja("sigmaTilde(0) was zero");let w=u.inverse(_),I=y.multiplyScalar(w),b=f.multiplyScalar(w);return[I,b]}findErrorLocations(o){let a=o.getDegree();if(a===1)return Int32Array.from([o.getCoefficient(1)]);let c=new Int32Array(a),u=0,d=this.field;for(let f=1;f<d.getSize()&&u<a;f++)o.evaluateAt(f)===0&&(c[u]=d.inverse(f),u++);if(u!==a)throw new Ja("Error locator degree does not match number of roots");return c}findErrorMagnitudes(o,a){let c=a.length,u=new Int32Array(c),d=this.field;for(let f=0;f<c;f++){let p=d.inverse(a[f]),y=1;for(let _=0;_<c;_++)if(f!==_){let w=d.multiply(a[_],p),I=w&1?w&-2:w|1;y=d.multiply(y,I)}u[f]=d.multiply(o.evaluateAt(p),d.inverse(y)),d.getGeneratorBase()!==0&&(u[f]=d.multiply(u[f],p))}return u}}var mn=function(v){return v[v.UPPER=0]="UPPER",v[v.LOWER=1]="LOWER",v[v.MIXED=2]="MIXED",v[v.DIGIT=3]="DIGIT",v[v.PUNCT=4]="PUNCT",v[v.BINARY=5]="BINARY",v}(mn||{});let tp=(()=>{class v{decode(a){this.ddata=a;let c=a.getBits(),u=this.extractBits(c),d=this.correctBits(u),f=v.convertBoolArrayToByteArray(d),p=v.getEncodedData(d),y=new Qa(f,p,null,null);return y.setNumBits(d.length),y}static highLevelDecode(a){return this.getEncodedData(a)}static getEncodedData(a){let c=a.length,u=mn.UPPER,d=mn.UPPER,f="",p=0;for(;p<c;)if(d===mn.BINARY){if(c-p<5)break;let y=v.readCode(a,p,5);if(p+=5,y===0){if(c-p<11)break;y=v.readCode(a,p,11)+31,p+=11}for(let _=0;_<y;_++){if(c-p<8){p=c;break}let w=v.readCode(a,p,8);f+=Ce.castAsNonUtf8Char(w),p+=8}d=u}else{let y=d===mn.DIGIT?4:5;if(c-p<y)break;let _=v.readCode(a,p,y);p+=y;let w=v.getCharacter(d,_);w.startsWith("CTRL_")?(u=d,d=v.getTable(w.charAt(5)),w.charAt(6)==="L"&&(u=d)):(f+=w,d=u)}return f}static getTable(a){switch(a){case"L":return mn.LOWER;case"P":return mn.PUNCT;case"M":return mn.MIXED;case"D":return mn.DIGIT;case"B":return mn.BINARY;case"U":default:return mn.UPPER}}static getCharacter(a,c){switch(a){case mn.UPPER:return v.UPPER_TABLE[c];case mn.LOWER:return v.LOWER_TABLE[c];case mn.MIXED:return v.MIXED_TABLE[c];case mn.PUNCT:return v.PUNCT_TABLE[c];case mn.DIGIT:return v.DIGIT_TABLE[c];default:throw new ui("Bad table")}}correctBits(a){let c,u;this.ddata.getNbLayers()<=2?(u=6,c=nt.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(u=8,c=nt.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(u=10,c=nt.AZTEC_DATA_10):(u=12,c=nt.AZTEC_DATA_12);let d=this.ddata.getNbDatablocks(),f=a.length/u;if(f<d)throw new j;let p=a.length%u,y=new Int32Array(f);for(let A=0;A<f;A++,p+=u)y[A]=v.readCode(a,p,u);try{new ec(c).decode(y,f-d)}catch(A){throw new j(A)}let _=(1<<u)-1,w=0;for(let A=0;A<d;A++){let T=y[A];if(T===0||T===_)throw new j;(T===1||T===_-1)&&w++}let I=new Array(d*u-w),b=0;for(let A=0;A<d;A++){let T=y[A];if(T===1||T===_-1)I.fill(T>1,b,b+u-1),b+=u-1;else for(let M=u-1;M>=0;--M)I[b++]=(T&1<<M)!==0}return I}extractBits(a){let c=this.ddata.isCompact(),u=this.ddata.getNbLayers(),d=(c?11:14)+u*4,f=new Int32Array(d),p=new Array(this.totalBitsInLayer(u,c));if(c)for(let y=0;y<f.length;y++)f[y]=y;else{let y=d+1+2*z.truncDivision(z.truncDivision(d,2)-1,15),_=d/2,w=z.truncDivision(y,2);for(let I=0;I<_;I++){let b=I+z.truncDivision(I,15);f[_-I-1]=w-b-1,f[_+I]=w+b+1}}for(let y=0,_=0;y<u;y++){let w=(u-y)*4+(c?9:12),I=y*2,b=d-1-I;for(let A=0;A<w;A++){let T=A*2;for(let M=0;M<2;M++)p[_+T+M]=a.get(f[I+M],f[I+A]),p[_+2*w+T+M]=a.get(f[I+A],f[b-M]),p[_+4*w+T+M]=a.get(f[b-M],f[b-A]),p[_+6*w+T+M]=a.get(f[b-A],f[I+M])}_+=w*8}return p}static readCode(a,c,u){let d=0;for(let f=c;f<c+u;f++)d<<=1,a[f]&&(d|=1);return d}static readByte(a,c){let u=a.length-c;return u>=8?v.readCode(a,c,8):v.readCode(a,c,u)<<8-u}static convertBoolArrayToByteArray(a){let c=new Uint8Array((a.length+7)/8);for(let u=0;u<c.length;u++)c[u]=v.readByte(a,8*u);return c}totalBitsInLayer(a,c){return((c?88:112)+16*a)*a}}return v.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],v.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],v.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],v.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],v.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],v})();class Xe{constructor(){}static round(o){return o===NaN?0:o<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:o>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:o+(o<0?-.5:.5)|0}static distance(o,a,c,u){let d=o-c,f=a-u;return Math.sqrt(d*d+f*f)}static sum(o){let a=0;for(let c=0,u=o.length;c!==u;c++){let d=o[c];a+=d}return a}}class uu{static floatToIntBits(o){return o}}uu.MAX_VALUE=Number.MAX_SAFE_INTEGER;class oe{constructor(o,a){this.x=o,this.y=a}getX(){return this.x}getY(){return this.y}equals(o){if(o instanceof oe){let a=o;return this.x===a.x&&this.y===a.y}return!1}hashCode(){return 31*uu.floatToIntBits(this.x)+uu.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(o){let a=this.distance(o[0],o[1]),c=this.distance(o[1],o[2]),u=this.distance(o[0],o[2]),d,f,p;if(c>=a&&c>=u?(f=o[0],d=o[1],p=o[2]):u>=c&&u>=a?(f=o[1],d=o[0],p=o[2]):(f=o[2],d=o[0],p=o[1]),this.crossProductZ(d,f,p)<0){let y=d;d=p,p=y}o[0]=d,o[1]=f,o[2]=p}static distance(o,a){return Xe.distance(o.x,o.y,a.x,a.y)}static crossProductZ(o,a,c){let u=a.x,d=a.y;return(c.x-u)*(o.y-d)-(c.y-d)*(o.x-u)}}class du{constructor(o,a){this.bits=o,this.points=a}getBits(){return this.bits}getPoints(){return this.points}}class nv extends du{constructor(o,a,c,u,d){super(o,a),this.compact=c,this.nbDatablocks=u,this.nbLayers=d}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}let fu=(()=>{class v{constructor(a,c,u,d){this.image=a,this.height=a.getHeight(),this.width=a.getWidth(),c==null&&(c=v.INIT_SIZE),u==null&&(u=a.getWidth()/2|0),d==null&&(d=a.getHeight()/2|0);let f=c/2|0;if(this.leftInit=u-f,this.rightInit=u+f,this.upInit=d-f,this.downInit=d+f,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new V}detect(){let a=this.leftInit,c=this.rightInit,u=this.upInit,d=this.downInit,f=!1,p=!0,y=!1,_=!1,w=!1,I=!1,b=!1,A=this.width,T=this.height;for(;p;){p=!1;let M=!0;for(;(M||!_)&&c<A;)M=this.containsBlackPoint(u,d,c,!1),M?(c++,p=!0,_=!0):_||c++;if(c>=A){f=!0;break}let R=!0;for(;(R||!w)&&d<T;)R=this.containsBlackPoint(a,c,d,!0),R?(d++,p=!0,w=!0):w||d++;if(d>=T){f=!0;break}let P=!0;for(;(P||!I)&&a>=0;)P=this.containsBlackPoint(u,d,a,!1),P?(a--,p=!0,I=!0):I||a--;if(a<0){f=!0;break}let q=!0;for(;(q||!b)&&u>=0;)q=this.containsBlackPoint(a,c,u,!0),q?(u--,p=!0,b=!0):b||u--;if(u<0){f=!0;break}p&&(y=!0)}if(!f&&y){let M=c-a,R=null;for(let B=1;R===null&&B<M;B++)R=this.getBlackPointOnSegment(a,d-B,a+B,d);if(R==null)throw new V;let P=null;for(let B=1;P===null&&B<M;B++)P=this.getBlackPointOnSegment(a,u+B,a+B,u);if(P==null)throw new V;let q=null;for(let B=1;q===null&&B<M;B++)q=this.getBlackPointOnSegment(c,u+B,c-B,u);if(q==null)throw new V;let Q=null;for(let B=1;Q===null&&B<M;B++)Q=this.getBlackPointOnSegment(c,d-B,c-B,d);if(Q==null)throw new V;return this.centerEdges(Q,R,q,P)}else throw new V}getBlackPointOnSegment(a,c,u,d){let f=Xe.round(Xe.distance(a,c,u,d)),p=(u-a)/f,y=(d-c)/f,_=this.image;for(let w=0;w<f;w++){let I=Xe.round(a+w*p),b=Xe.round(c+w*y);if(_.get(I,b))return new oe(I,b)}return null}centerEdges(a,c,u,d){let f=a.getX(),p=a.getY(),y=c.getX(),_=c.getY(),w=u.getX(),I=u.getY(),b=d.getX(),A=d.getY(),T=v.CORR;return f<this.width/2?[new oe(b-T,A+T),new oe(y+T,_+T),new oe(w-T,I-T),new oe(f+T,p-T)]:[new oe(b+T,A+T),new oe(y+T,_-T),new oe(w-T,I+T),new oe(f-T,p-T)]}containsBlackPoint(a,c,u,d){let f=this.image;if(d){for(let p=a;p<=c;p++)if(f.get(p,u))return!0}else for(let p=a;p<=c;p++)if(f.get(u,p))return!0;return!1}}return v.INIT_SIZE=10,v.CORR=1,v})();class np{static checkAndNudgePoints(o,a){let c=o.getWidth(),u=o.getHeight(),d=!0;for(let f=0;f<a.length&&d;f+=2){let p=Math.floor(a[f]),y=Math.floor(a[f+1]);if(p<-1||p>c||y<-1||y>u)throw new V;d=!1,p===-1?(a[f]=0,d=!0):p===c&&(a[f]=c-1,d=!0),y===-1?(a[f+1]=0,d=!0):y===u&&(a[f+1]=u-1,d=!0)}d=!0;for(let f=a.length-2;f>=0&&d;f-=2){let p=Math.floor(a[f]),y=Math.floor(a[f+1]);if(p<-1||p>c||y<-1||y>u)throw new V;d=!1,p===-1?(a[f]=0,d=!0):p===c&&(a[f]=c-1,d=!0),y===-1?(a[f+1]=0,d=!0):y===u&&(a[f+1]=u-1,d=!0)}}}class Cr{constructor(o,a,c,u,d,f,p,y,_){this.a11=o,this.a21=a,this.a31=c,this.a12=u,this.a22=d,this.a32=f,this.a13=p,this.a23=y,this.a33=_}static quadrilateralToQuadrilateral(o,a,c,u,d,f,p,y,_,w,I,b,A,T,M,R){let P=Cr.quadrilateralToSquare(o,a,c,u,d,f,p,y);return Cr.squareToQuadrilateral(_,w,I,b,A,T,M,R).times(P)}transformPoints(o){let a=o.length,c=this.a11,u=this.a12,d=this.a13,f=this.a21,p=this.a22,y=this.a23,_=this.a31,w=this.a32,I=this.a33;for(let b=0;b<a;b+=2){let A=o[b],T=o[b+1],M=d*A+y*T+I;o[b]=(c*A+f*T+_)/M,o[b+1]=(u*A+p*T+w)/M}}transformPointsWithValues(o,a){let c=this.a11,u=this.a12,d=this.a13,f=this.a21,p=this.a22,y=this.a23,_=this.a31,w=this.a32,I=this.a33,b=o.length;for(let A=0;A<b;A++){let T=o[A],M=a[A],R=d*T+y*M+I;o[A]=(c*T+f*M+_)/R,a[A]=(u*T+p*M+w)/R}}static squareToQuadrilateral(o,a,c,u,d,f,p,y){let _=o-c+d-p,w=a-u+f-y;if(_===0&&w===0)return new Cr(c-o,d-c,o,u-a,f-u,a,0,0,1);{let I=c-d,b=p-d,A=u-f,T=y-f,M=I*T-b*A,R=(_*T-b*w)/M,P=(I*w-_*A)/M;return new Cr(c-o+R*c,p-o+P*p,o,u-a+R*u,y-a+P*y,a,R,P,1)}}static quadrilateralToSquare(o,a,c,u,d,f,p,y){return Cr.squareToQuadrilateral(o,a,c,u,d,f,p,y).buildAdjoint()}buildAdjoint(){return new Cr(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(o){return new Cr(this.a11*o.a11+this.a21*o.a12+this.a31*o.a13,this.a11*o.a21+this.a21*o.a22+this.a31*o.a23,this.a11*o.a31+this.a21*o.a32+this.a31*o.a33,this.a12*o.a11+this.a22*o.a12+this.a32*o.a13,this.a12*o.a21+this.a22*o.a22+this.a32*o.a23,this.a12*o.a31+this.a22*o.a32+this.a32*o.a33,this.a13*o.a11+this.a23*o.a12+this.a33*o.a13,this.a13*o.a21+this.a23*o.a22+this.a33*o.a23,this.a13*o.a31+this.a23*o.a32+this.a33*o.a33)}}class rv extends np{sampleGrid(o,a,c,u,d,f,p,y,_,w,I,b,A,T,M,R,P,q,Q){let B=Cr.quadrilateralToQuadrilateral(u,d,f,p,y,_,w,I,b,A,T,M,R,P,q,Q);return this.sampleGridWithTransform(o,a,c,B)}sampleGridWithTransform(o,a,c,u){if(a<=0||c<=0)throw new V;let d=new Kt(a,c),f=new Float32Array(2*a);for(let p=0;p<c;p++){let y=f.length,_=p+.5;for(let w=0;w<y;w+=2)f[w]=w/2+.5,f[w+1]=_;u.transformPoints(f),np.checkAndNudgePoints(o,f);try{for(let w=0;w<y;w+=2)o.get(Math.floor(f[w]),Math.floor(f[w+1]))&&d.set(w/2,p)}catch{throw new V}}return d}}class zi{static setGridSampler(o){zi.gridSampler=o}static getInstance(){return zi.gridSampler}}zi.gridSampler=new rv;class xn{constructor(o,a){this.x=o,this.y=a}toResultPoint(){return new oe(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class iv{constructor(o){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=o}detect(){return this.detectMirror(!1)}detectMirror(o){let a=this.getMatrixCenter(),c=this.getBullsEyeCorners(a);if(o){let f=c[0];c[0]=c[2],c[2]=f}this.extractParameters(c);let u=this.sampleGrid(this.image,c[this.shift%4],c[(this.shift+1)%4],c[(this.shift+2)%4],c[(this.shift+3)%4]),d=this.getMatrixCornerPoints(c);return new nv(u,d,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(o){if(!this.isValidPoint(o[0])||!this.isValidPoint(o[1])||!this.isValidPoint(o[2])||!this.isValidPoint(o[3]))throw new V;let a=2*this.nbCenterLayers,c=new Int32Array([this.sampleLine(o[0],o[1],a),this.sampleLine(o[1],o[2],a),this.sampleLine(o[2],o[3],a),this.sampleLine(o[3],o[0],a)]);this.shift=this.getRotation(c,a);let u=0;for(let f=0;f<4;f++){let p=c[(this.shift+f)%4];this.compact?(u<<=7,u+=p>>1&127):(u<<=10,u+=(p>>2&992)+(p>>1&31))}let d=this.getCorrectedParameterData(u,this.compact);this.compact?(this.nbLayers=(d>>6)+1,this.nbDataBlocks=(d&63)+1):(this.nbLayers=(d>>11)+1,this.nbDataBlocks=(d&2047)+1)}getRotation(o,a){let c=0;o.forEach((u,d,f)=>{let p=(u>>a-2<<1)+(u&1);c=(c<<3)+p}),c=((c&1)<<11)+(c>>1);for(let u=0;u<4;u++)if(z.bitCount(c^this.EXPECTED_CORNER_BITS[u])<=2)return u;throw new V}getCorrectedParameterData(o,a){let c,u;a?(c=7,u=2):(c=10,u=4);let d=c-u,f=new Int32Array(c);for(let y=c-1;y>=0;--y)f[y]=o&15,o>>=4;try{new ec(nt.AZTEC_PARAM).decode(f,d)}catch{throw new V}let p=0;for(let y=0;y<u;y++)p=(p<<4)+f[y];return p}getBullsEyeCorners(o){let a=o,c=o,u=o,d=o,f=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let I=this.getFirstDifferent(a,f,1,-1),b=this.getFirstDifferent(c,f,1,1),A=this.getFirstDifferent(u,f,-1,1),T=this.getFirstDifferent(d,f,-1,-1);if(this.nbCenterLayers>2){let M=this.distancePoint(T,I)*this.nbCenterLayers/(this.distancePoint(d,a)*(this.nbCenterLayers+2));if(M<.75||M>1.25||!this.isWhiteOrBlackRectangle(I,b,A,T))break}a=I,c=b,u=A,d=T,f=!f}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new V;this.compact=this.nbCenterLayers===5;let p=new oe(a.getX()+.5,a.getY()-.5),y=new oe(c.getX()+.5,c.getY()+.5),_=new oe(u.getX()-.5,u.getY()+.5),w=new oe(d.getX()-.5,d.getY()-.5);return this.expandSquare([p,y,_,w],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let o,a,c,u;try{let p=new fu(this.image).detect();o=p[0],a=p[1],c=p[2],u=p[3]}catch{let y=this.image.getWidth()/2,_=this.image.getHeight()/2;o=this.getFirstDifferent(new xn(y+7,_-7),!1,1,-1).toResultPoint(),a=this.getFirstDifferent(new xn(y+7,_+7),!1,1,1).toResultPoint(),c=this.getFirstDifferent(new xn(y-7,_+7),!1,-1,1).toResultPoint(),u=this.getFirstDifferent(new xn(y-7,_-7),!1,-1,-1).toResultPoint()}let d=Xe.round((o.getX()+u.getX()+a.getX()+c.getX())/4),f=Xe.round((o.getY()+u.getY()+a.getY()+c.getY())/4);try{let p=new fu(this.image,15,d,f).detect();o=p[0],a=p[1],c=p[2],u=p[3]}catch{o=this.getFirstDifferent(new xn(d+7,f-7),!1,1,-1).toResultPoint(),a=this.getFirstDifferent(new xn(d+7,f+7),!1,1,1).toResultPoint(),c=this.getFirstDifferent(new xn(d-7,f+7),!1,-1,1).toResultPoint(),u=this.getFirstDifferent(new xn(d-7,f-7),!1,-1,-1).toResultPoint()}return d=Xe.round((o.getX()+u.getX()+a.getX()+c.getX())/4),f=Xe.round((o.getY()+u.getY()+a.getY()+c.getY())/4),new xn(d,f)}getMatrixCornerPoints(o){return this.expandSquare(o,2*this.nbCenterLayers,this.getDimension())}sampleGrid(o,a,c,u,d){let f=zi.getInstance(),p=this.getDimension(),y=p/2-this.nbCenterLayers,_=p/2+this.nbCenterLayers;return f.sampleGrid(o,p,p,y,y,_,y,_,_,y,_,a.getX(),a.getY(),c.getX(),c.getY(),u.getX(),u.getY(),d.getX(),d.getY())}sampleLine(o,a,c){let u=0,d=this.distanceResultPoint(o,a),f=d/c,p=o.getX(),y=o.getY(),_=f*(a.getX()-o.getX())/d,w=f*(a.getY()-o.getY())/d;for(let I=0;I<c;I++)this.image.get(Xe.round(p+I*_),Xe.round(y+I*w))&&(u|=1<<c-I-1);return u}isWhiteOrBlackRectangle(o,a,c,u){let d=3;o=new xn(o.getX()-d,o.getY()+d),a=new xn(a.getX()-d,a.getY()-d),c=new xn(c.getX()+d,c.getY()-d),u=new xn(u.getX()+d,u.getY()+d);let f=this.getColor(u,o);if(f===0)return!1;let p=this.getColor(o,a);return p!==f||(p=this.getColor(a,c),p!==f)?!1:(p=this.getColor(c,u),p===f)}getColor(o,a){let c=this.distancePoint(o,a),u=(a.getX()-o.getX())/c,d=(a.getY()-o.getY())/c,f=0,p=o.getX(),y=o.getY(),_=this.image.get(o.getX(),o.getY()),w=Math.ceil(c);for(let b=0;b<w;b++)p+=u,y+=d,this.image.get(Xe.round(p),Xe.round(y))!==_&&f++;let I=f/c;return I>.1&&I<.9?0:I<=.1===_?1:-1}getFirstDifferent(o,a,c,u){let d=o.getX()+c,f=o.getY()+u;for(;this.isValid(d,f)&&this.image.get(d,f)===a;)d+=c,f+=u;for(d-=c,f-=u;this.isValid(d,f)&&this.image.get(d,f)===a;)d+=c;for(d-=c;this.isValid(d,f)&&this.image.get(d,f)===a;)f+=u;return f-=u,new xn(d,f)}expandSquare(o,a,c){let u=c/(2*a),d=o[0].getX()-o[2].getX(),f=o[0].getY()-o[2].getY(),p=(o[0].getX()+o[2].getX())/2,y=(o[0].getY()+o[2].getY())/2,_=new oe(p+u*d,y+u*f),w=new oe(p-u*d,y-u*f);d=o[1].getX()-o[3].getX(),f=o[1].getY()-o[3].getY(),p=(o[1].getX()+o[3].getX())/2,y=(o[1].getY()+o[3].getY())/2;let I=new oe(p+u*d,y+u*f),b=new oe(p-u*d,y-u*f);return[_,I,w,b]}isValid(o,a){return o>=0&&o<this.image.getWidth()&&a>0&&a<this.image.getHeight()}isValidPoint(o){let a=Xe.round(o.getX()),c=Xe.round(o.getY());return this.isValid(a,c)}distancePoint(o,a){return Xe.distance(o.getX(),o.getY(),a.getX(),a.getY())}distanceResultPoint(o,a){return Xe.distance(o.getX(),o.getY(),a.getX(),a.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(z.truncDivision(this.nbLayers-4,8)+1)+15}}class hu{decode(o,a=null){let c=null,u=new iv(o.getBlackMatrix()),d=null,f=null;try{let w=u.detectMirror(!1);d=w.getPoints(),this.reportFoundResultPoints(a,d),f=new tp().decode(w)}catch(w){c=w}if(f==null)try{let w=u.detectMirror(!0);d=w.getPoints(),this.reportFoundResultPoints(a,d),f=new tp().decode(w)}catch(w){throw c??w}let p=new bn(f.getText(),f.getRawBytes(),f.getNumBits(),d,ge.AZTEC,D.currentTimeMillis()),y=f.getByteSegments();y!=null&&p.putMetadata(en.BYTE_SEGMENTS,y);let _=f.getECLevel();return _!=null&&p.putMetadata(en.ERROR_CORRECTION_LEVEL,_),p}reportFoundResultPoints(o,a){if(o!=null){let c=o.get(le.NEED_RESULT_POINT_CALLBACK);c!=null&&a.forEach((u,d,f)=>{c.foundPossibleResultPoint(u)})}}reset(){}}class jT extends To{constructor(o=500){super(new hu,o)}}class Bt{decode(o,a){try{return this.doDecode(o,a)}catch{if(a&&a.get(le.TRY_HARDER)===!0&&o.isRotateSupported()){let d=o.rotateCounterClockwise(),f=this.doDecode(d,a),p=f.getResultMetadata(),y=270;p!==null&&p.get(en.ORIENTATION)===!0&&(y=y+p.get(en.ORIENTATION)%360),f.putMetadata(en.ORIENTATION,y);let _=f.getResultPoints();if(_!==null){let w=d.getHeight();for(let I=0;I<_.length;I++)_[I]=new oe(w-_[I].getY()-1,_[I].getX())}return f}else throw new V}}reset(){}doDecode(o,a){let c=o.getWidth(),u=o.getHeight(),d=new ne(c),f=a&&a.get(le.TRY_HARDER)===!0,p=Math.max(1,u>>(f?8:5)),y;f?y=u:y=15;let _=Math.trunc(u/2);for(let w=0;w<y;w++){let I=Math.trunc((w+1)/2),b=(w&1)===0,A=_+p*(b?I:-I);if(A<0||A>=u)break;try{d=o.getBlackRow(A,d)}catch{continue}for(let T=0;T<2;T++){if(T===1&&(d.reverse(),a&&a.get(le.NEED_RESULT_POINT_CALLBACK)===!0)){let M=new Map;a.forEach((R,P)=>M.set(P,R)),M.delete(le.NEED_RESULT_POINT_CALLBACK),a=M}try{let M=this.decodeRow(A,d,a);if(T===1){M.putMetadata(en.ORIENTATION,180);let R=M.getResultPoints();R!==null&&(R[0]=new oe(c-R[0].getX()-1,R[0].getY()),R[1]=new oe(c-R[1].getX()-1,R[1].getY()))}return M}catch{}}}throw new V}static recordPattern(o,a,c){let u=c.length;for(let _=0;_<u;_++)c[_]=0;let d=o.getSize();if(a>=d)throw new V;let f=!o.get(a),p=0,y=a;for(;y<d;){if(o.get(y)!==f)c[p]++;else{if(++p===u)break;c[p]=1,f=!f}y++}if(!(p===u||p===u-1&&y===d))throw new V}static recordPatternInReverse(o,a,c){let u=c.length,d=o.get(a);for(;a>0&&u>=0;)o.get(--a)!==d&&(u--,d=!d);if(u>=0)throw new V;Bt.recordPattern(o,a+1,c)}static patternMatchVariance(o,a,c){let u=o.length,d=0,f=0;for(let _=0;_<u;_++)d+=o[_],f+=a[_];if(d<f)return Number.POSITIVE_INFINITY;let p=d/f;c*=p;let y=0;for(let _=0;_<u;_++){let w=o[_],I=a[_]*p,b=w>I?w-I:I-w;if(b>c)return Number.POSITIVE_INFINITY;y+=b}return y/d}}class Z extends Bt{static findStartPattern(o){let a=o.getSize(),c=o.getNextSet(0),u=0,d=Int32Array.from([0,0,0,0,0,0]),f=c,p=!1,y=6;for(let _=c;_<a;_++)if(o.get(_)!==p)d[u]++;else{if(u===y-1){let w=Z.MAX_AVG_VARIANCE,I=-1;for(let b=Z.CODE_START_A;b<=Z.CODE_START_C;b++){let A=Bt.patternMatchVariance(d,Z.CODE_PATTERNS[b],Z.MAX_INDIVIDUAL_VARIANCE);A<w&&(w=A,I=b)}if(I>=0&&o.isRange(Math.max(0,f-(_-f)/2),f,!1))return Int32Array.from([f,_,I]);f+=d[0]+d[1],d=d.slice(2,d.length-1),d[u-1]=0,d[u]=0,u--}else u++;d[u]=1,p=!p}throw new V}static decodeCode(o,a,c){Bt.recordPattern(o,c,a);let u=Z.MAX_AVG_VARIANCE,d=-1;for(let f=0;f<Z.CODE_PATTERNS.length;f++){let p=Z.CODE_PATTERNS[f],y=this.patternMatchVariance(a,p,Z.MAX_INDIVIDUAL_VARIANCE);y<u&&(u=y,d=f)}if(d>=0)return d;throw new V}decodeRow(o,a,c){let u=c&&c.get(le.ASSUME_GS1)===!0,d=Z.findStartPattern(a),f=d[2],p=0,y=new Uint8Array(20);y[p++]=f;let _;switch(f){case Z.CODE_START_A:_=Z.CODE_CODE_A;break;case Z.CODE_START_B:_=Z.CODE_CODE_B;break;case Z.CODE_START_C:_=Z.CODE_CODE_C;break;default:throw new j}let w=!1,I=!1,b="",A=d[0],T=d[1],M=Int32Array.from([0,0,0,0,0,0]),R=0,P=0,q=f,Q=0,B=!0,Be=!1,De=!1;for(;!w;){let As=I;switch(I=!1,R=P,P=Z.decodeCode(a,M,T),y[p++]=P,P!==Z.CODE_STOP&&(B=!0),P!==Z.CODE_STOP&&(Q++,q+=Q*P),A=T,T+=M.reduce((x2,S2)=>x2+S2,0),P){case Z.CODE_START_A:case Z.CODE_START_B:case Z.CODE_START_C:throw new j}switch(_){case Z.CODE_CODE_A:if(P<64)De===Be?b+=String.fromCharCode(32+P):b+=String.fromCharCode(32+P+128),De=!1;else if(P<96)De===Be?b+=String.fromCharCode(P-64):b+=String.fromCharCode(P+64),De=!1;else switch(P!==Z.CODE_STOP&&(B=!1),P){case Z.CODE_FNC_1:u&&(b.length===0?b+="]C1":b+="");break;case Z.CODE_FNC_2:case Z.CODE_FNC_3:break;case Z.CODE_FNC_4_A:!Be&&De?(Be=!0,De=!1):Be&&De?(Be=!1,De=!1):De=!0;break;case Z.CODE_SHIFT:I=!0,_=Z.CODE_CODE_B;break;case Z.CODE_CODE_B:_=Z.CODE_CODE_B;break;case Z.CODE_CODE_C:_=Z.CODE_CODE_C;break;case Z.CODE_STOP:w=!0;break}break;case Z.CODE_CODE_B:if(P<96)De===Be?b+=String.fromCharCode(32+P):b+=String.fromCharCode(32+P+128),De=!1;else switch(P!==Z.CODE_STOP&&(B=!1),P){case Z.CODE_FNC_1:u&&(b.length===0?b+="]C1":b+="");break;case Z.CODE_FNC_2:case Z.CODE_FNC_3:break;case Z.CODE_FNC_4_B:!Be&&De?(Be=!0,De=!1):Be&&De?(Be=!1,De=!1):De=!0;break;case Z.CODE_SHIFT:I=!0,_=Z.CODE_CODE_A;break;case Z.CODE_CODE_A:_=Z.CODE_CODE_A;break;case Z.CODE_CODE_C:_=Z.CODE_CODE_C;break;case Z.CODE_STOP:w=!0;break}break;case Z.CODE_CODE_C:if(P<100)P<10&&(b+="0"),b+=P;else switch(P!==Z.CODE_STOP&&(B=!1),P){case Z.CODE_FNC_1:u&&(b.length===0?b+="]C1":b+="");break;case Z.CODE_CODE_A:_=Z.CODE_CODE_A;break;case Z.CODE_CODE_B:_=Z.CODE_CODE_B;break;case Z.CODE_STOP:w=!0;break}break}As&&(_=_===Z.CODE_CODE_A?Z.CODE_CODE_B:Z.CODE_CODE_A)}let On=T-A;if(T=a.getNextUnset(T),!a.isRange(T,Math.min(a.getSize(),T+(T-A)/2),!1))throw new V;if(q-=Q*R,q%103!==R)throw new E;let Sr=b.length;if(Sr===0)throw new V;Sr>0&&B&&(_===Z.CODE_CODE_C?b=b.substring(0,Sr-2):b=b.substring(0,Sr-1));let Pn=(d[1]+d[0])/2,vt=A+On/2,cn=y.length,qn=new Uint8Array(cn);for(let As=0;As<cn;As++)qn[As]=y[As];let Ss=[new oe(Pn,o),new oe(vt,o)];return new bn(b,qn,0,Ss,ge.CODE_128,new Date().getTime())}}Z.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],Z.MAX_AVG_VARIANCE=.25,Z.MAX_INDIVIDUAL_VARIANCE=.7,Z.CODE_SHIFT=98,Z.CODE_CODE_C=99,Z.CODE_CODE_B=100,Z.CODE_CODE_A=101,Z.CODE_FNC_1=102,Z.CODE_FNC_2=97,Z.CODE_FNC_3=96,Z.CODE_FNC_4_A=101,Z.CODE_FNC_4_B=100,Z.CODE_START_A=103,Z.CODE_START_B=104,Z.CODE_START_C=105,Z.CODE_STOP=106;let rp=(()=>{class v extends Bt{constructor(a=!1,c=!1){super(),this.usingCheckDigit=a,this.extendedMode=c,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(a,c,u){let d=this.counters;d.fill(0),this.decodeRowResult="";let f=v.findAsteriskPattern(c,d),p=c.getNextSet(f[1]),y=c.getSize(),_,w;do{v.recordPattern(c,p,d);let R=v.toNarrowWidePattern(d);if(R<0)throw new V;_=v.patternToChar(R),this.decodeRowResult+=_,w=p;for(let P of d)p+=P;p=c.getNextSet(p)}while(_!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let I=0;for(let R of d)I+=R;let b=p-w-I;if(p!==y&&b*2<I)throw new V;if(this.usingCheckDigit){let R=this.decodeRowResult.length-1,P=0;for(let q=0;q<R;q++)P+=v.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(q));if(this.decodeRowResult.charAt(R)!==v.ALPHABET_STRING.charAt(P%43))throw new E;this.decodeRowResult=this.decodeRowResult.substring(0,R)}if(this.decodeRowResult.length===0)throw new V;let A;this.extendedMode?A=v.decodeExtended(this.decodeRowResult):A=this.decodeRowResult;let T=(f[1]+f[0])/2,M=w+I/2;return new bn(A,null,0,[new oe(T,a),new oe(M,a)],ge.CODE_39,new Date().getTime())}static findAsteriskPattern(a,c){let u=a.getSize(),d=a.getNextSet(0),f=0,p=d,y=!1,_=c.length;for(let w=d;w<u;w++)if(a.get(w)!==y)c[f]++;else{if(f===_-1){if(this.toNarrowWidePattern(c)===v.ASTERISK_ENCODING&&a.isRange(Math.max(0,p-Math.floor((w-p)/2)),p,!1))return[p,w];p+=c[0]+c[1],c.copyWithin(0,2,2+f-1),c[f-1]=0,c[f]=0,f--}else f++;c[f]=1,y=!y}throw new V}static toNarrowWidePattern(a){let c=a.length,u=0,d;do{let f=2147483647;for(let _ of a)_<f&&_>u&&(f=_);u=f,d=0;let p=0,y=0;for(let _=0;_<c;_++){let w=a[_];w>u&&(y|=1<<c-1-_,d++,p+=w)}if(d===3){for(let _=0;_<c&&d>0;_++){let w=a[_];if(w>u&&(d--,w*2>=p))return-1}return y}}while(d>3);return-1}static patternToChar(a){for(let c=0;c<v.CHARACTER_ENCODINGS.length;c++)if(v.CHARACTER_ENCODINGS[c]===a)return v.ALPHABET_STRING.charAt(c);if(a===v.ASTERISK_ENCODING)return"*";throw new V}static decodeExtended(a){let c=a.length,u="";for(let d=0;d<c;d++){let f=a.charAt(d);if(f==="+"||f==="$"||f==="%"||f==="/"){let p=a.charAt(d+1),y="\0";switch(f){case"+":if(p>="A"&&p<="Z")y=String.fromCharCode(p.charCodeAt(0)+32);else throw new j;break;case"$":if(p>="A"&&p<="Z")y=String.fromCharCode(p.charCodeAt(0)-64);else throw new j;break;case"%":if(p>="A"&&p<="E")y=String.fromCharCode(p.charCodeAt(0)-38);else if(p>="F"&&p<="J")y=String.fromCharCode(p.charCodeAt(0)-11);else if(p>="K"&&p<="O")y=String.fromCharCode(p.charCodeAt(0)+16);else if(p>="P"&&p<="T")y=String.fromCharCode(p.charCodeAt(0)+43);else if(p==="U")y="\0";else if(p==="V")y="@";else if(p==="W")y="`";else if(p==="X"||p==="Y"||p==="Z")y="\x7F";else throw new j;break;case"/":if(p>="A"&&p<="O")y=String.fromCharCode(p.charCodeAt(0)-32);else if(p==="Z")y=":";else throw new j;break}u+=y,d++}else u+=f}return u}}return v.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",v.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],v.ASTERISK_ENCODING=148,v})();class yt extends Bt{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(o,a,c){let u=this.decodeStart(a),d=this.decodeEnd(a),f=new mt;yt.decodeMiddle(a,u[1],d[0],f);let p=f.toString(),y=null;c!=null&&(y=c.get(le.ALLOWED_LENGTHS)),y==null&&(y=yt.DEFAULT_ALLOWED_LENGTHS);let _=p.length,w=!1,I=0;for(let T of y){if(_===T){w=!0;break}T>I&&(I=T)}if(!w&&_>I&&(w=!0),!w)throw new j;let b=[new oe(u[1],o),new oe(d[0],o)];return new bn(p,null,0,b,ge.ITF,new Date().getTime())}static decodeMiddle(o,a,c,u){let d=new Int32Array(10),f=new Int32Array(5),p=new Int32Array(5);for(d.fill(0),f.fill(0),p.fill(0);a<c;){Bt.recordPattern(o,a,d);for(let _=0;_<5;_++){let w=2*_;f[_]=d[w],p[_]=d[w+1]}let y=yt.decodeDigit(f);u.append(y.toString()),y=this.decodeDigit(p),u.append(y.toString()),d.forEach(function(_){a+=_})}}decodeStart(o){let a=yt.skipWhiteSpace(o),c=yt.findGuardPattern(o,a,yt.START_PATTERN);return this.narrowLineWidth=(c[1]-c[0])/4,this.validateQuietZone(o,c[0]),c}validateQuietZone(o,a){let c=this.narrowLineWidth*10;c=c<a?c:a;for(let u=a-1;c>0&&u>=0&&!o.get(u);u--)c--;if(c!==0)throw new V}static skipWhiteSpace(o){let a=o.getSize(),c=o.getNextSet(0);if(c===a)throw new V;return c}decodeEnd(o){o.reverse();try{let a=yt.skipWhiteSpace(o),c;try{c=yt.findGuardPattern(o,a,yt.END_PATTERN_REVERSED[0])}catch(d){d instanceof V&&(c=yt.findGuardPattern(o,a,yt.END_PATTERN_REVERSED[1]))}this.validateQuietZone(o,c[0]);let u=c[0];return c[0]=o.getSize()-c[1],c[1]=o.getSize()-u,c}finally{o.reverse()}}static findGuardPattern(o,a,c){let u=c.length,d=new Int32Array(u),f=o.getSize(),p=!1,y=0,_=a;d.fill(0);for(let w=a;w<f;w++)if(o.get(w)!==p)d[y]++;else{if(y===u-1){if(Bt.patternMatchVariance(d,c,yt.MAX_INDIVIDUAL_VARIANCE)<yt.MAX_AVG_VARIANCE)return[_,w];_+=d[0]+d[1],D.arraycopy(d,2,d,0,y-1),d[y-1]=0,d[y]=0,y--}else y++;d[y]=1,p=!p}throw new V}static decodeDigit(o){let a=yt.MAX_AVG_VARIANCE,c=-1,u=yt.PATTERNS.length;for(let d=0;d<u;d++){let f=yt.PATTERNS[d],p=Bt.patternMatchVariance(o,f,yt.MAX_INDIVIDUAL_VARIANCE);p<a?(a=p,c=d):p===a&&(c=-1)}if(c>=0)return c%10;throw new V}}yt.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],yt.MAX_AVG_VARIANCE=.38,yt.MAX_INDIVIDUAL_VARIANCE=.5,yt.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],yt.START_PATTERN=Int32Array.from([1,1,1,1]),yt.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Tt extends Bt{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(o){let a=!1,c,u=0,d=Int32Array.from([0,0,0]);for(;!a;){d=Int32Array.from([0,0,0]),c=Tt.findGuardPattern(o,u,!1,this.START_END_PATTERN,d);let f=c[0];u=c[1];let p=f-(u-f);p>=0&&(a=o.isRange(p,f,!1))}return c}static checkChecksum(o){return Tt.checkStandardUPCEANChecksum(o)}static checkStandardUPCEANChecksum(o){let a=o.length;if(a===0)return!1;let c=parseInt(o.charAt(a-1),10);return Tt.getStandardUPCEANChecksum(o.substring(0,a-1))===c}static getStandardUPCEANChecksum(o){let a=o.length,c=0;for(let u=a-1;u>=0;u-=2){let d=o.charAt(u).charCodeAt(0)-48;if(d<0||d>9)throw new j;c+=d}c*=3;for(let u=a-2;u>=0;u-=2){let d=o.charAt(u).charCodeAt(0)-48;if(d<0||d>9)throw new j;c+=d}return(1e3-c)%10}static decodeEnd(o,a){return Tt.findGuardPattern(o,a,!1,Tt.START_END_PATTERN,new Int32Array(Tt.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(o,a,c,u){return this.findGuardPattern(o,a,c,u,new Int32Array(u.length))}static findGuardPattern(o,a,c,u,d){let f=o.getSize();a=c?o.getNextUnset(a):o.getNextSet(a);let p=0,y=a,_=u.length,w=c;for(let I=a;I<f;I++)if(o.get(I)!==w)d[p]++;else{if(p===_-1){if(Bt.patternMatchVariance(d,u,Tt.MAX_INDIVIDUAL_VARIANCE)<Tt.MAX_AVG_VARIANCE)return Int32Array.from([y,I]);y+=d[0]+d[1];let b=d.slice(2,d.length-1);for(let A=0;A<p-1;A++)d[A]=b[A];d[p-1]=0,d[p]=0,p--}else p++;d[p]=1,w=!w}throw new V}static decodeDigit(o,a,c,u){this.recordPattern(o,c,a);let d=this.MAX_AVG_VARIANCE,f=-1,p=u.length;for(let y=0;y<p;y++){let _=u[y],w=Bt.patternMatchVariance(a,_,Tt.MAX_INDIVIDUAL_VARIANCE);w<d&&(d=w,f=y)}if(f>=0)return f;throw new V}}Tt.MAX_AVG_VARIANCE=.48,Tt.MAX_INDIVIDUAL_VARIANCE=.7,Tt.START_END_PATTERN=Int32Array.from([1,1,1]),Tt.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Tt.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Tt.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class tc{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(o,a,c){let u=this.decodeRowStringBuffer,d=this.decodeMiddle(a,c,u),f=u.toString(),p=tc.parseExtensionString(f),y=[new oe((c[0]+c[1])/2,o),new oe(d,o)],_=new bn(f,null,0,y,ge.UPC_EAN_EXTENSION,new Date().getTime());return p!=null&&_.putAllMetadata(p),_}decodeMiddle(o,a,c){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let d=o.getSize(),f=a[1],p=0;for(let _=0;_<5&&f<d;_++){let w=Tt.decodeDigit(o,u,f,Tt.L_AND_G_PATTERNS);c+=String.fromCharCode(48+w%10);for(let I of u)f+=I;w>=10&&(p|=1<<4-_),_!==4&&(f=o.getNextSet(f),f=o.getNextUnset(f))}if(c.length!==5)throw new V;let y=this.determineCheckDigit(p);if(tc.extensionChecksum(c.toString())!==y)throw new V;return f}static extensionChecksum(o){let a=o.length,c=0;for(let u=a-2;u>=0;u-=2)c+=o.charAt(u).charCodeAt(0)-48;c*=3;for(let u=a-1;u>=0;u-=2)c+=o.charAt(u).charCodeAt(0)-48;return c*=3,c%10}determineCheckDigit(o){for(let a=0;a<10;a++)if(o===this.CHECK_DIGIT_ENCODINGS[a])return a;throw new V}static parseExtensionString(o){if(o.length!==5)return null;let a=tc.parseExtension5String(o);return a==null?null:new Map([[en.SUGGESTED_PRICE,a]])}static parseExtension5String(o){let a;switch(o.charAt(0)){case"0":a="\xA3";break;case"5":a="$";break;case"9":switch(o){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}a="";break;default:a="";break}let c=parseInt(o.substring(1)),u=(c/100).toString(),d=c%100,f=d<10?"0"+d:d.toString();return a+u+"."+f}}class ip{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(o,a,c){let u=this.decodeRowStringBuffer,d=this.decodeMiddle(a,c,u),f=u.toString(),p=ip.parseExtensionString(f),y=[new oe((c[0]+c[1])/2,o),new oe(d,o)],_=new bn(f,null,0,y,ge.UPC_EAN_EXTENSION,new Date().getTime());return p!=null&&_.putAllMetadata(p),_}decodeMiddle(o,a,c){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let d=o.getSize(),f=a[1],p=0;for(let y=0;y<2&&f<d;y++){let _=Tt.decodeDigit(o,u,f,Tt.L_AND_G_PATTERNS);c+=String.fromCharCode(48+_%10);for(let w of u)f+=w;_>=10&&(p|=1<<1-y),y!==1&&(f=o.getNextSet(f),f=o.getNextUnset(f))}if(c.length!==2)throw new V;if(parseInt(c.toString())%4!==p)throw new V;return f}static parseExtensionString(o){return o.length!==2?null:new Map([[en.ISSUE_NUMBER,parseInt(o)]])}}class ov{static decodeRow(o,a,c){let u=Tt.findGuardPattern(a,c,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new tc().decodeRow(o,a,u)}catch{return new ip().decodeRow(o,a,u)}}}ov.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class rt extends Tt{constructor(){super(),this.decodeRowStringBuffer="",rt.L_AND_G_PATTERNS=rt.L_PATTERNS.map(o=>Int32Array.from(o));for(let o=10;o<20;o++){let a=rt.L_PATTERNS[o-10],c=new Int32Array(a.length);for(let u=0;u<a.length;u++)c[u]=a[a.length-u-1];rt.L_AND_G_PATTERNS[o]=c}}decodeRow(o,a,c){let u=rt.findStartGuardPattern(a),d=c==null?null:c.get(le.NEED_RESULT_POINT_CALLBACK);if(d!=null){let B=new oe((u[0]+u[1])/2,o);d.foundPossibleResultPoint(B)}let f=this.decodeMiddle(a,u,this.decodeRowStringBuffer),p=f.rowOffset,y=f.resultString;if(d!=null){let B=new oe(p,o);d.foundPossibleResultPoint(B)}let _=this.decodeEnd(a,p);if(d!=null){let B=new oe((_[0]+_[1])/2,o);d.foundPossibleResultPoint(B)}let w=_[1],I=w+(w-_[0]);if(I>=a.getSize()||!a.isRange(w,I,!1))throw new V;let b=y.toString();if(b.length<8)throw new j;if(!rt.checkChecksum(b))throw new E;let A=(u[1]+u[0])/2,T=(_[1]+_[0])/2,M=this.getBarcodeFormat(),R=[new oe(A,o),new oe(T,o)],P=new bn(b,null,0,R,M,new Date().getTime()),q=0;try{let B=ov.decodeRow(o,a,_[1]);P.putMetadata(en.UPC_EAN_EXTENSION,B.getText()),P.putAllMetadata(B.getResultMetadata()),P.addResultPoints(B.getResultPoints()),q=B.getText().length}catch{}let Q=c==null?null:c.get(le.ALLOWED_EAN_EXTENSIONS);if(Q!=null){let B=!1;for(let Be in Q)if(q.toString()===Be){B=!0;break}if(!B)throw new V}return P}decodeEnd(o,a){return rt.findGuardPattern(o,a,!1,rt.START_END_PATTERN,new Int32Array(rt.START_END_PATTERN.length).fill(0))}static checkChecksum(o){return rt.checkStandardUPCEANChecksum(o)}static checkStandardUPCEANChecksum(o){let a=o.length;if(a===0)return!1;let c=parseInt(o.charAt(a-1),10);return rt.getStandardUPCEANChecksum(o.substring(0,a-1))===c}static getStandardUPCEANChecksum(o){let a=o.length,c=0;for(let u=a-1;u>=0;u-=2){let d=o.charAt(u).charCodeAt(0)-48;if(d<0||d>9)throw new j;c+=d}c*=3;for(let u=a-2;u>=0;u-=2){let d=o.charAt(u).charCodeAt(0)-48;if(d<0||d>9)throw new j;c+=d}return(1e3-c)%10}}let pu=(()=>{class v extends rt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(a,c,u){let d=this.decodeMiddleCounters;d[0]=0,d[1]=0,d[2]=0,d[3]=0;let f=a.getSize(),p=c[1],y=0;for(let w=0;w<6&&p<f;w++){let I=rt.decodeDigit(a,d,p,rt.L_AND_G_PATTERNS);u+=String.fromCharCode(48+I%10);for(let b of d)p+=b;I>=10&&(y|=1<<5-w)}u=v.determineFirstDigit(u,y),p=rt.findGuardPattern(a,p,!0,rt.MIDDLE_PATTERN,new Int32Array(rt.MIDDLE_PATTERN.length).fill(0))[1];for(let w=0;w<6&&p<f;w++){let I=rt.decodeDigit(a,d,p,rt.L_PATTERNS);u+=String.fromCharCode(48+I);for(let b of d)p+=b}return{rowOffset:p,resultString:u}}getBarcodeFormat(){return ge.EAN_13}static determineFirstDigit(a,c){for(let u=0;u<10;u++)if(c===this.FIRST_DIGIT_ENCODINGS[u])return a=String.fromCharCode(48+u)+a,a;throw new V}}return v.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],v})();class sv extends rt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(o,a,c){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let d=o.getSize(),f=a[1];for(let y=0;y<4&&f<d;y++){let _=rt.decodeDigit(o,u,f,rt.L_PATTERNS);c+=String.fromCharCode(48+_);for(let w of u)f+=w}f=rt.findGuardPattern(o,f,!0,rt.MIDDLE_PATTERN,new Int32Array(rt.MIDDLE_PATTERN.length).fill(0))[1];for(let y=0;y<4&&f<d;y++){let _=rt.decodeDigit(o,u,f,rt.L_PATTERNS);c+=String.fromCharCode(48+_);for(let w of u)f+=w}return{rowOffset:f,resultString:c}}getBarcodeFormat(){return ge.EAN_8}}class av extends rt{constructor(){super(...arguments),this.ean13Reader=new pu}getBarcodeFormat(){return ge.UPC_A}decode(o,a){return this.maybeReturnResult(this.ean13Reader.decode(o))}decodeRow(o,a,c){return this.maybeReturnResult(this.ean13Reader.decodeRow(o,a,c))}decodeMiddle(o,a,c){return this.ean13Reader.decodeMiddle(o,a,c)}maybeReturnResult(o){let a=o.getText();if(a.charAt(0)==="0"){let c=new bn(a.substring(1),null,null,o.getResultPoints(),ge.UPC_A);return o.getResultMetadata()!=null&&c.putAllMetadata(o.getResultMetadata()),c}else throw new V}reset(){this.ean13Reader.reset()}}class Er extends rt{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(o,a,c){let u=this.decodeMiddleCounters.map(_=>_);u[0]=0,u[1]=0,u[2]=0,u[3]=0;let d=o.getSize(),f=a[1],p=0;for(let _=0;_<6&&f<d;_++){let w=Er.decodeDigit(o,u,f,Er.L_AND_G_PATTERNS);c+=String.fromCharCode(48+w%10);for(let I of u)f+=I;w>=10&&(p|=1<<5-_)}let y=Er.determineNumSysAndCheckDigit(c,p);return{rowOffset:f,resultString:y}}decodeEnd(o,a){return Er.findGuardPatternWithoutCounters(o,a,!0,Er.MIDDLE_END_PATTERN)}checkChecksum(o){return rt.checkChecksum(Er.convertUPCEtoUPCA(o))}static determineNumSysAndCheckDigit(o,a){for(let c=0;c<=1;c++)for(let u=0;u<10;u++)if(a===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[c][u]){let d=String.fromCharCode(48+c),f=String.fromCharCode(48+u);return d+o+f}throw V.getNotFoundInstance()}getBarcodeFormat(){return ge.UPC_E}static convertUPCEtoUPCA(o){let a=o.slice(1,7).split("").map(d=>d.charCodeAt(0)),c=new mt;c.append(o.charAt(0));let u=a[5];switch(u){case 0:case 1:case 2:c.appendChars(a,0,2),c.append(u),c.append("0000"),c.appendChars(a,2,3);break;case 3:c.appendChars(a,0,3),c.append("00000"),c.appendChars(a,3,2);break;case 4:c.appendChars(a,0,4),c.append("00000"),c.append(a[4]);break;default:c.appendChars(a,0,5),c.append("0000"),c.append(u);break}return o.length>=8&&c.append(o.charAt(7)),c.toString()}}Er.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Er.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class op extends Bt{constructor(o){super();let a=o==null?null:o.get(le.POSSIBLE_FORMATS),c=[];t(a)?(c.push(new pu),c.push(new av),c.push(new sv),c.push(new Er)):(a.indexOf(ge.EAN_13)>-1&&c.push(new pu),a.indexOf(ge.UPC_A)>-1&&c.push(new av),a.indexOf(ge.EAN_8)>-1&&c.push(new sv),a.indexOf(ge.UPC_E)>-1&&c.push(new Er)),this.readers=c}decodeRow(o,a,c){for(let u of this.readers)try{let d=u.decodeRow(o,a,c),f=d.getBarcodeFormat()===ge.EAN_13&&d.getText().charAt(0)==="0",p=c==null?null:c.get(le.POSSIBLE_FORMATS),y=p==null||p.includes(ge.UPC_A);if(f&&y){let _=d.getRawBytes(),w=new bn(d.getText().substring(1),_,_?_.length:null,d.getResultPoints(),ge.UPC_A);return w.putAllMetadata(d.getResultMetadata()),w}return d}catch{}throw new V}reset(){for(let o of this.readers)o.reset()}}let Mo=(()=>{class v extends Bt{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(a,c){for(let u=0;u<c.length;u++)if(Bt.patternMatchVariance(a,c[u],v.MAX_INDIVIDUAL_VARIANCE)<v.MAX_AVG_VARIANCE)return u;throw new V}static count(a){return Xe.sum(new Int32Array(a))}static increment(a,c){let u=0,d=c[0];for(let f=1;f<a.length;f++)c[f]>d&&(d=c[f],u=f);a[u]++}static decrement(a,c){let u=0,d=c[0];for(let f=1;f<a.length;f++)c[f]<d&&(d=c[f],u=f);a[u]--}static isFinderPattern(a){let c=a[0]+a[1],u=c+a[2]+a[3],d=c/u;if(d>=v.MIN_FINDER_PATTERN_RATIO&&d<=v.MAX_FINDER_PATTERN_RATIO){let f=Number.MAX_SAFE_INTEGER,p=Number.MIN_SAFE_INTEGER;for(let y of a)y>p&&(p=y),y<f&&(f=y);return p<10*f}return!1}}return v.MAX_AVG_VARIANCE=.2,v.MAX_INDIVIDUAL_VARIANCE=.45,v.MIN_FINDER_PATTERN_RATIO=9.5/12,v.MAX_FINDER_PATTERN_RATIO=12.5/14,v})();class ws{constructor(o,a){this.value=o,this.checksumPortion=a}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(o){if(!(o instanceof ws))return!1;let a=o;return this.value===a.value&&this.checksumPortion===a.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class gu{constructor(o,a,c,u,d){this.value=o,this.startEnd=a,this.value=o,this.startEnd=a,this.resultPoints=new Array,this.resultPoints.push(new oe(c,d)),this.resultPoints.push(new oe(u,d))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(o){if(!(o instanceof gu))return!1;let a=o;return this.value===a.value}hashCode(){return this.value}}class zr{constructor(){}static getRSSvalue(o,a,c){let u=0;for(let y of o)u+=y;let d=0,f=0,p=o.length;for(let y=0;y<p-1;y++){let _;for(_=1,f|=1<<y;_<o[y];_++,f&=~(1<<y)){let w=zr.combins(u-_-1,p-y-2);if(c&&f===0&&u-_-(p-y-1)>=p-y-1&&(w-=zr.combins(u-_-(p-y),p-y-2)),p-y-1>1){let I=0;for(let b=u-_-(p-y-2);b>a;b--)I+=zr.combins(u-_-b-1,p-y-3);w-=I*(p-1-y)}else u-_>a&&w--;d+=w}u-=_}return d}static combins(o,a){let c,u;o-a>a?(u=a,c=o-a):(u=o-a,c=a);let d=1,f=1;for(let p=o;p>c;p--)d*=p,f<=u&&(d/=f,f++);for(;f<=u;)d/=f,f++;return d}}class HT{static buildBitArray(o){let a=o.length*2-1;o[o.length-1].getRightChar()==null&&(a-=1);let c=12*a,u=new ne(c),d=0,p=o[0].getRightChar().getValue();for(let y=11;y>=0;--y)p&1<<y&&u.set(d),d++;for(let y=1;y<o.length;++y){let _=o[y],w=_.getLeftChar().getValue();for(let I=11;I>=0;--I)w&1<<I&&u.set(d),d++;if(_.getRightChar()!=null){let I=_.getRightChar().getValue();for(let b=11;b>=0;--b)I&1<<b&&u.set(d),d++}}return u}}class No{constructor(o,a){a?this.decodedInformation=null:(this.finished=o,this.decodedInformation=a)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class sp{constructor(o){this.newPosition=o}getNewPosition(){return this.newPosition}}let Ir=(()=>{class v extends sp{constructor(a,c){super(a),this.value=c}getValue(){return this.value}isFNC1(){return this.value===v.FNC1}}return v.FNC1="$",v})();class Ro extends sp{constructor(o,a,c){super(o),c?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=a}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}let Cs=(()=>{class v extends sp{constructor(a,c,u){if(super(a),c<0||c>10||u<0||u>10)throw new j;this.firstDigit=c,this.secondDigit=u}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===v.FNC1}isSecondDigitFNC1(){return this.secondDigit===v.FNC1}isAnyFNC1(){return this.firstDigit===v.FNC1||this.secondDigit===v.FNC1}}return v.FNC1=10,v})();class te{constructor(){}static parseFieldsInGeneralPurpose(o){if(!o)return null;if(o.length<2)throw new V;let a=o.substring(0,2);for(let d of te.TWO_DIGIT_DATA_LENGTH)if(d[0]===a)return d[1]===te.VARIABLE_LENGTH?te.processVariableAI(2,d[2],o):te.processFixedAI(2,d[1],o);if(o.length<3)throw new V;let c=o.substring(0,3);for(let d of te.THREE_DIGIT_DATA_LENGTH)if(d[0]===c)return d[1]===te.VARIABLE_LENGTH?te.processVariableAI(3,d[2],o):te.processFixedAI(3,d[1],o);for(let d of te.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(d[0]===c)return d[1]===te.VARIABLE_LENGTH?te.processVariableAI(4,d[2],o):te.processFixedAI(4,d[1],o);if(o.length<4)throw new V;let u=o.substring(0,4);for(let d of te.FOUR_DIGIT_DATA_LENGTH)if(d[0]===u)return d[1]===te.VARIABLE_LENGTH?te.processVariableAI(4,d[2],o):te.processFixedAI(4,d[1],o);throw new V}static processFixedAI(o,a,c){if(c.length<o)throw new V;let u=c.substring(0,o);if(c.length<o+a)throw new V;let d=c.substring(o,o+a),f=c.substring(o+a),p="("+u+")"+d,y=te.parseFieldsInGeneralPurpose(f);return y==null?p:p+y}static processVariableAI(o,a,c){let u=c.substring(0,o),d;c.length<o+a?d=c.length:d=o+a;let f=c.substring(o,d),p=c.substring(d),y="("+u+")"+f,_=te.parseFieldsInGeneralPurpose(p);return _==null?y:y+_}}te.VARIABLE_LENGTH=[],te.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",te.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",te.VARIABLE_LENGTH,20],["22",te.VARIABLE_LENGTH,29],["30",te.VARIABLE_LENGTH,8],["37",te.VARIABLE_LENGTH,8],["90",te.VARIABLE_LENGTH,30],["91",te.VARIABLE_LENGTH,30],["92",te.VARIABLE_LENGTH,30],["93",te.VARIABLE_LENGTH,30],["94",te.VARIABLE_LENGTH,30],["95",te.VARIABLE_LENGTH,30],["96",te.VARIABLE_LENGTH,30],["97",te.VARIABLE_LENGTH,3],["98",te.VARIABLE_LENGTH,30],["99",te.VARIABLE_LENGTH,30]],te.THREE_DIGIT_DATA_LENGTH=[["240",te.VARIABLE_LENGTH,30],["241",te.VARIABLE_LENGTH,30],["242",te.VARIABLE_LENGTH,6],["250",te.VARIABLE_LENGTH,30],["251",te.VARIABLE_LENGTH,30],["253",te.VARIABLE_LENGTH,17],["254",te.VARIABLE_LENGTH,20],["400",te.VARIABLE_LENGTH,30],["401",te.VARIABLE_LENGTH,30],["402",17],["403",te.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",te.VARIABLE_LENGTH,20],["421",te.VARIABLE_LENGTH,15],["422",3],["423",te.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],te.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",te.VARIABLE_LENGTH,15],["391",te.VARIABLE_LENGTH,18],["392",te.VARIABLE_LENGTH,15],["393",te.VARIABLE_LENGTH,18],["703",te.VARIABLE_LENGTH,30]],te.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",te.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",te.VARIABLE_LENGTH,20],["8003",te.VARIABLE_LENGTH,30],["8004",te.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",te.VARIABLE_LENGTH,30],["8008",te.VARIABLE_LENGTH,12],["8018",18],["8020",te.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",te.VARIABLE_LENGTH,70],["8200",te.VARIABLE_LENGTH,70]];class Es{constructor(o){this.buffer=new mt,this.information=o}decodeAllCodes(o,a){let c=a,u=null;do{let d=this.decodeGeneralPurposeField(c,u),f=te.parseFieldsInGeneralPurpose(d.getNewString());if(f!=null&&o.append(f),d.isRemaining()?u=""+d.getRemainingValue():u=null,c===d.getNewPosition())break;c=d.getNewPosition()}while(!0);return o.toString()}isStillNumeric(o){if(o+7>this.information.getSize())return o+4<=this.information.getSize();for(let a=o;a<o+3;++a)if(this.information.get(a))return!0;return this.information.get(o+3)}decodeNumeric(o){if(o+7>this.information.getSize()){let d=this.extractNumericValueFromBitArray(o,4);return d===0?new Cs(this.information.getSize(),Cs.FNC1,Cs.FNC1):new Cs(this.information.getSize(),d-1,Cs.FNC1)}let a=this.extractNumericValueFromBitArray(o,7),c=(a-8)/11,u=(a-8)%11;return new Cs(o+7,c,u)}extractNumericValueFromBitArray(o,a){return Es.extractNumericValueFromBitArray(this.information,o,a)}static extractNumericValueFromBitArray(o,a,c){let u=0;for(let d=0;d<c;++d)o.get(a+d)&&(u|=1<<c-d-1);return u}decodeGeneralPurposeField(o,a){this.buffer.setLengthToZero(),a!=null&&this.buffer.append(a),this.current.setPosition(o);let c=this.parseBlocks();return c!=null&&c.isRemaining()?new Ro(this.current.getPosition(),this.buffer.toString(),c.getRemainingValue()):new Ro(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let o,a;do{let c=this.current.getPosition();if(this.current.isAlpha()?(a=this.parseAlphaBlock(),o=a.isFinished()):this.current.isIsoIec646()?(a=this.parseIsoIec646Block(),o=a.isFinished()):(a=this.parseNumericBlock(),o=a.isFinished()),!(c!==this.current.getPosition())&&!o)break}while(!o);return a.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let o=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(o.getNewPosition()),o.isFirstDigitFNC1()){let a;return o.isSecondDigitFNC1()?a=new Ro(this.current.getPosition(),this.buffer.toString()):a=new Ro(this.current.getPosition(),this.buffer.toString(),o.getSecondDigit()),new No(!0,a)}if(this.buffer.append(o.getFirstDigit()),o.isSecondDigitFNC1()){let a=new Ro(this.current.getPosition(),this.buffer.toString());return new No(!0,a)}this.buffer.append(o.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new No(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let o=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(o.getNewPosition()),o.isFNC1()){let a=new Ro(this.current.getPosition(),this.buffer.toString());return new No(!0,a)}this.buffer.append(o.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new No(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let o=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(o.getNewPosition()),o.isFNC1()){let a=new Ro(this.current.getPosition(),this.buffer.toString());return new No(!0,a)}this.buffer.append(o.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new No(!1)}isStillIsoIec646(o){if(o+5>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(o,5);if(a>=5&&a<16)return!0;if(o+7>this.information.getSize())return!1;let c=this.extractNumericValueFromBitArray(o,7);if(c>=64&&c<116)return!0;if(o+8>this.information.getSize())return!1;let u=this.extractNumericValueFromBitArray(o,8);return u>=232&&u<253}decodeIsoIec646(o){let a=this.extractNumericValueFromBitArray(o,5);if(a===15)return new Ir(o+5,Ir.FNC1);if(a>=5&&a<15)return new Ir(o+5,"0"+(a-5));let c=this.extractNumericValueFromBitArray(o,7);if(c>=64&&c<90)return new Ir(o+7,""+(c+1));if(c>=90&&c<116)return new Ir(o+7,""+(c+7));let u=this.extractNumericValueFromBitArray(o,8),d;switch(u){case 232:d="!";break;case 233:d='"';break;case 234:d="%";break;case 235:d="&";break;case 236:d="'";break;case 237:d="(";break;case 238:d=")";break;case 239:d="*";break;case 240:d="+";break;case 241:d=",";break;case 242:d="-";break;case 243:d=".";break;case 244:d="/";break;case 245:d=":";break;case 246:d=";";break;case 247:d="<";break;case 248:d="=";break;case 249:d=">";break;case 250:d="?";break;case 251:d="_";break;case 252:d=" ";break;default:throw new j}return new Ir(o+8,d)}isStillAlpha(o){if(o+5>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(o,5);if(a>=5&&a<16)return!0;if(o+6>this.information.getSize())return!1;let c=this.extractNumericValueFromBitArray(o,6);return c>=16&&c<63}decodeAlphanumeric(o){let a=this.extractNumericValueFromBitArray(o,5);if(a===15)return new Ir(o+5,Ir.FNC1);if(a>=5&&a<15)return new Ir(o+5,"0"+(a-5));let c=this.extractNumericValueFromBitArray(o,6);if(c>=32&&c<58)return new Ir(o+6,""+(c+33));let u;switch(c){case 58:u="*";break;case 59:u=",";break;case 60:u="-";break;case 61:u=".";break;case 62:u="/";break;default:throw new ui("Decoding invalid alphanumeric value: "+c)}return new Ir(o+6,u)}isAlphaTo646ToAlphaLatch(o){if(o+1>this.information.getSize())return!1;for(let a=0;a<5&&a+o<this.information.getSize();++a)if(a===2){if(!this.information.get(o+2))return!1}else if(this.information.get(o+a))return!1;return!0}isAlphaOr646ToNumericLatch(o){if(o+3>this.information.getSize())return!1;for(let a=o;a<o+3;++a)if(this.information.get(a))return!1;return!0}isNumericToAlphaNumericLatch(o){if(o+1>this.information.getSize())return!1;for(let a=0;a<4&&a+o<this.information.getSize();++a)if(this.information.get(o+a))return!1;return!0}}class ap{constructor(o){this.information=o,this.generalDecoder=new Es(o)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}let br=(()=>{class v extends ap{constructor(a){super(a)}encodeCompressedGtin(a,c){a.append("(01)");let u=a.length();a.append("9"),this.encodeCompressedGtinWithoutAI(a,c,u)}encodeCompressedGtinWithoutAI(a,c,u){for(let d=0;d<4;++d){let f=this.getGeneralDecoder().extractNumericValueFromBitArray(c+10*d,10);f/100===0&&a.append("0"),f/10===0&&a.append("0"),a.append(f)}v.appendCheckDigit(a,u)}static appendCheckDigit(a,c){let u=0;for(let d=0;d<13;d++){let f=a.charAt(d+c).charCodeAt(0)-48;u+=d&1?f:3*f}u=10-u%10,u===10&&(u=0),a.append(u)}}return v.GTIN_SIZE=40,v})(),zT=(()=>{class v extends br{constructor(a){super(a)}parseInformation(){let a=new mt;a.append("(01)");let c=a.length(),u=this.getGeneralDecoder().extractNumericValueFromBitArray(v.HEADER_SIZE,4);return a.append(u),this.encodeCompressedGtinWithoutAI(a,v.HEADER_SIZE+4,c),this.getGeneralDecoder().decodeAllCodes(a,v.HEADER_SIZE+44)}}return v.HEADER_SIZE=4,v})(),WT=(()=>{class v extends ap{constructor(a){super(a)}parseInformation(){let a=new mt;return this.getGeneralDecoder().decodeAllCodes(a,v.HEADER_SIZE)}}return v.HEADER_SIZE=5,v})();class mu extends br{constructor(o){super(o)}encodeCompressedWeight(o,a,c){let u=this.getGeneralDecoder().extractNumericValueFromBitArray(a,c);this.addWeightCode(o,u);let d=this.checkWeight(u),f=1e5;for(let p=0;p<5;++p)d/f===0&&o.append("0"),f/=10;o.append(d)}}let cv=(()=>{class v extends mu{constructor(a){super(a)}parseInformation(){if(this.getInformation().getSize()!=v.HEADER_SIZE+mu.GTIN_SIZE+v.WEIGHT_SIZE)throw new V;let a=new mt;return this.encodeCompressedGtin(a,v.HEADER_SIZE),this.encodeCompressedWeight(a,v.HEADER_SIZE+mu.GTIN_SIZE,v.WEIGHT_SIZE),a.toString()}}return v.HEADER_SIZE=5,v.WEIGHT_SIZE=15,v})();class GT extends cv{constructor(o){super(o)}addWeightCode(o,a){o.append("(3103)")}checkWeight(o){return o}}class $T extends cv{constructor(o){super(o)}addWeightCode(o,a){a<1e4?o.append("(3202)"):o.append("(3203)")}checkWeight(o){return o<1e4?o:o-1e4}}let qT=(()=>{class v extends br{constructor(a){super(a)}parseInformation(){if(this.getInformation().getSize()<v.HEADER_SIZE+br.GTIN_SIZE)throw new V;let a=new mt;this.encodeCompressedGtin(a,v.HEADER_SIZE);let c=this.getGeneralDecoder().extractNumericValueFromBitArray(v.HEADER_SIZE+br.GTIN_SIZE,v.LAST_DIGIT_SIZE);a.append("(392"),a.append(c),a.append(")");let u=this.getGeneralDecoder().decodeGeneralPurposeField(v.HEADER_SIZE+br.GTIN_SIZE+v.LAST_DIGIT_SIZE,null);return a.append(u.getNewString()),a.toString()}}return v.HEADER_SIZE=8,v.LAST_DIGIT_SIZE=2,v})(),YT=(()=>{class v extends br{constructor(a){super(a)}parseInformation(){if(this.getInformation().getSize()<v.HEADER_SIZE+br.GTIN_SIZE)throw new V;let a=new mt;this.encodeCompressedGtin(a,v.HEADER_SIZE);let c=this.getGeneralDecoder().extractNumericValueFromBitArray(v.HEADER_SIZE+br.GTIN_SIZE,v.LAST_DIGIT_SIZE);a.append("(393"),a.append(c),a.append(")");let u=this.getGeneralDecoder().extractNumericValueFromBitArray(v.HEADER_SIZE+br.GTIN_SIZE+v.LAST_DIGIT_SIZE,v.FIRST_THREE_DIGITS_SIZE);u/100==0&&a.append("0"),u/10==0&&a.append("0"),a.append(u);let d=this.getGeneralDecoder().decodeGeneralPurposeField(v.HEADER_SIZE+br.GTIN_SIZE+v.LAST_DIGIT_SIZE+v.FIRST_THREE_DIGITS_SIZE,null);return a.append(d.getNewString()),a.toString()}}return v.HEADER_SIZE=8,v.LAST_DIGIT_SIZE=2,v.FIRST_THREE_DIGITS_SIZE=10,v})(),Wi=(()=>{class v extends mu{constructor(a,c,u){super(a),this.dateCode=u,this.firstAIdigits=c}parseInformation(){if(this.getInformation().getSize()!=v.HEADER_SIZE+v.GTIN_SIZE+v.WEIGHT_SIZE+v.DATE_SIZE)throw new V;let a=new mt;return this.encodeCompressedGtin(a,v.HEADER_SIZE),this.encodeCompressedWeight(a,v.HEADER_SIZE+v.GTIN_SIZE,v.WEIGHT_SIZE),this.encodeCompressedDate(a,v.HEADER_SIZE+v.GTIN_SIZE+v.WEIGHT_SIZE),a.toString()}encodeCompressedDate(a,c){let u=this.getGeneralDecoder().extractNumericValueFromBitArray(c,v.DATE_SIZE);if(u==38400)return;a.append("("),a.append(this.dateCode),a.append(")");let d=u%32;u/=32;let f=u%12+1;u/=12;let p=u;p/10==0&&a.append("0"),a.append(p),f/10==0&&a.append("0"),a.append(f),d/10==0&&a.append("0"),a.append(d)}addWeightCode(a,c){a.append("("),a.append(this.firstAIdigits),a.append(c/1e5),a.append(")")}checkWeight(a){return a%1e5}}return v.HEADER_SIZE=8,v.WEIGHT_SIZE=20,v.DATE_SIZE=16,v})();function lv(v){try{if(v.get(1))return new zT(v);if(!v.get(2))return new WT(v);switch(Es.extractNumericValueFromBitArray(v,1,4)){case 4:return new GT(v);case 5:return new $T(v)}switch(Es.extractNumericValueFromBitArray(v,1,5)){case 12:return new qT(v);case 13:return new YT(v)}switch(Es.extractNumericValueFromBitArray(v,1,7)){case 56:return new Wi(v,"310","11");case 57:return new Wi(v,"320","11");case 58:return new Wi(v,"310","13");case 59:return new Wi(v,"320","13");case 60:return new Wi(v,"310","15");case 61:return new Wi(v,"320","15");case 62:return new Wi(v,"310","17");case 63:return new Wi(v,"320","17")}}catch(o){throw console.log(o),new ui("unknown decoder: "+v)}}class Gi{constructor(o,a,c,u){this.leftchar=o,this.rightchar=a,this.finderpattern=c,this.maybeLast=u}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(o,a){return o instanceof Gi?Gi.equalsOrNull(o.leftchar,a.leftchar)&&Gi.equalsOrNull(o.rightchar,a.rightchar)&&Gi.equalsOrNull(o.finderpattern,a.finderpattern):!1}static equalsOrNull(o,a){return o===null?a===null:Gi.equals(o,a)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class cp{constructor(o,a,c){this.pairs=o,this.rowNumber=a,this.wasReversed=c}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(o){return this.checkEqualitity(this,o)}toString(){return"{ "+this.pairs+" }"}equals(o,a){return o instanceof cp?this.checkEqualitity(o,a)&&o.wasReversed===a.wasReversed:!1}checkEqualitity(o,a){if(!o||!a)return;let c;return o.forEach((u,d)=>{a.forEach(f=>{u.getLeftChar().getValue()===f.getLeftChar().getValue()&&u.getRightChar().getValue()===f.getRightChar().getValue()&&u.getFinderPatter().getValue()===f.getFinderPatter().getValue()&&(c=!0)})}),c}}class H extends Mo{constructor(o){super(...arguments),this.pairs=new Array(H.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=o===!0}decodeRow(o,a,c){this.pairs.length=0,this.startFromEven=!1;try{return H.constructResult(this.decodeRow2pairs(o,a))}catch(u){this.verbose&&console.log(u)}return this.pairs.length=0,this.startFromEven=!0,H.constructResult(this.decodeRow2pairs(o,a))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(o,a){let c=!1;for(;!c;)try{this.pairs.push(this.retrieveNextPair(a,this.pairs,o))}catch(d){if(d instanceof V){if(!this.pairs.length)throw new V;c=!0}}if(this.checkChecksum())return this.pairs;let u;if(this.rows.length?u=!0:u=!1,this.storeRow(o,!1),u){let d=this.checkRowsBoolean(!1);if(d!=null||(d=this.checkRowsBoolean(!0),d!=null))return d}throw new V}checkRowsBoolean(o){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,o&&(this.rows=this.rows.reverse());let a=null;try{a=this.checkRows(new Array,0)}catch(c){this.verbose&&console.log(c)}return o&&(this.rows=this.rows.reverse()),a}checkRows(o,a){for(let c=a;c<this.rows.length;c++){let u=this.rows[c];this.pairs.length=0;for(let f of o)this.pairs.push(f.getPairs());if(this.pairs.push(u.getPairs()),!H.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let d=new Array(o);d.push(u);try{return this.checkRows(d,c+1)}catch(f){this.verbose&&console.log(f)}}throw new V}static isValidSequence(o){for(let a of H.FINDER_PATTERN_SEQUENCES){if(o.length>a.length)continue;let c=!0;for(let u=0;u<o.length;u++)if(o[u].getFinderPattern().getValue()!=a[u]){c=!1;break}if(c)return!0}return!1}storeRow(o,a){let c=0,u=!1,d=!1;for(;c<this.rows.length;){let f=this.rows[c];if(f.getRowNumber()>o){d=f.isEquivalent(this.pairs);break}u=f.isEquivalent(this.pairs),c++}d||u||H.isPartialRow(this.pairs,this.rows)||(this.rows.push(c,new cp(this.pairs,o,a)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(o,a){for(let c of a)if(c.getPairs().length!==o.length){for(let u of c.getPairs())for(let d of o)if(Gi.equals(u,d))break}}static isPartialRow(o,a){for(let c of a){let u=!0;for(let d of o){let f=!1;for(let p of c.getPairs())if(d.equals(p)){f=!0;break}if(!f){u=!1;break}}if(u)return!0}return!1}getRows(){return this.rows}static constructResult(o){let a=HT.buildBitArray(o),u=lv(a).parseInformation(),d=o[0].getFinderPattern().getResultPoints(),f=o[o.length-1].getFinderPattern().getResultPoints(),p=[d[0],d[1],f[0],f[1]];return new bn(u,null,null,p,ge.RSS_EXPANDED,null)}checkChecksum(){let o=this.pairs.get(0),a=o.getLeftChar(),c=o.getRightChar();if(c==null)return!1;let u=c.getChecksumPortion(),d=2;for(let p=1;p<this.pairs.size();++p){let y=this.pairs.get(p);u+=y.getLeftChar().getChecksumPortion(),d++;let _=y.getRightChar();_!=null&&(u+=_.getChecksumPortion(),d++)}return u%=211,211*(d-4)+u==a.getValue()}static getNextSecondBar(o,a){let c;return o.get(a)?(c=o.getNextUnset(a),c=o.getNextSet(c)):(c=o.getNextSet(a),c=o.getNextUnset(c)),c}retrieveNextPair(o,a,c){let u=a.length%2==0;this.startFromEven&&(u=!u);let d,f=!0,p=-1;do this.findNextPair(o,a,p),d=this.parseFoundFinderPattern(o,c,u),d==null?p=H.getNextSecondBar(o,this.startEnd[0]):f=!1;while(f);let y=this.decodeDataCharacter(o,d,u,!0);if(!this.isEmptyPair(a)&&a[a.length-1].mustBeLast())throw new V;let _;try{_=this.decodeDataCharacter(o,d,u,!1)}catch(w){_=null,this.verbose&&console.log(w)}return new Gi(y,_,d,!0)}isEmptyPair(o){return o.length===0}findNextPair(o,a,c){let u=this.getDecodeFinderCounters();u[0]=0,u[1]=0,u[2]=0,u[3]=0;let d=o.getSize(),f;c>=0?f=c:this.isEmptyPair(a)?f=0:f=a[a.length-1].getFinderPattern().getStartEnd()[1];let p=a.length%2!=0;this.startFromEven&&(p=!p);let y=!1;for(;f<d&&(y=!o.get(f),!!y);)f++;let _=0,w=f;for(let I=f;I<d;I++)if(o.get(I)!=y)u[_]++;else{if(_==3){if(p&&H.reverseCounters(u),H.isFinderPattern(u)){this.startEnd[0]=w,this.startEnd[1]=I;return}p&&H.reverseCounters(u),w+=u[0]+u[1],u[0]=u[2],u[1]=u[3],u[2]=0,u[3]=0,_--}else _++;u[_]=1,y=!y}throw new V}static reverseCounters(o){let a=o.length;for(let c=0;c<a/2;++c){let u=o[c];o[c]=o[a-c-1],o[a-c-1]=u}}parseFoundFinderPattern(o,a,c){let u,d,f;if(c){let _=this.startEnd[0]-1;for(;_>=0&&!o.get(_);)_--;_++,u=this.startEnd[0]-_,d=_,f=this.startEnd[1]}else d=this.startEnd[0],f=o.getNextUnset(this.startEnd[1]+1),u=f-this.startEnd[1];let p=this.getDecodeFinderCounters();D.arraycopy(p,0,p,1,p.length-1),p[0]=u;let y;try{y=this.parseFinderValue(p,H.FINDER_PATTERNS)}catch{return null}return new gu(y,[d,f],d,f,a)}decodeDataCharacter(o,a,c,u){let d=this.getDataCharacterCounters();for(let vt=0;vt<d.length;vt++)d[vt]=0;if(u)H.recordPatternInReverse(o,a.getStartEnd()[0],d);else{H.recordPattern(o,a.getStartEnd()[1],d);for(let vt=0,cn=d.length-1;vt<cn;vt++,cn--){let qn=d[vt];d[vt]=d[cn],d[cn]=qn}}let f=17,p=Xe.sum(new Int32Array(d))/f,y=(a.getStartEnd()[1]-a.getStartEnd()[0])/15;if(Math.abs(p-y)/y>.3)throw new V;let _=this.getOddCounts(),w=this.getEvenCounts(),I=this.getOddRoundingErrors(),b=this.getEvenRoundingErrors();for(let vt=0;vt<d.length;vt++){let cn=1*d[vt]/p,qn=cn+.5;if(qn<1){if(cn<.3)throw new V;qn=1}else if(qn>8){if(cn>8.7)throw new V;qn=8}let Ss=vt/2;vt&1?(w[Ss]=qn,b[Ss]=cn-qn):(_[Ss]=qn,I[Ss]=cn-qn)}this.adjustOddEvenCounts(f);let A=4*a.getValue()+(c?0:2)+(u?0:1)-1,T=0,M=0;for(let vt=_.length-1;vt>=0;vt--){if(H.isNotA1left(a,c,u)){let cn=H.WEIGHTS[A][2*vt];M+=_[vt]*cn}T+=_[vt]}let R=0;for(let vt=w.length-1;vt>=0;vt--)if(H.isNotA1left(a,c,u)){let cn=H.WEIGHTS[A][2*vt+1];R+=w[vt]*cn}let P=M+R;if(T&1||T>13||T<4)throw new V;let q=(13-T)/2,Q=H.SYMBOL_WIDEST[q],B=9-Q,Be=zr.getRSSvalue(_,Q,!0),De=zr.getRSSvalue(w,B,!1),On=H.EVEN_TOTAL_SUBSET[q],Sr=H.GSUM[q],Pn=Be*On+De+Sr;return new ws(Pn,P)}static isNotA1left(o,a,c){return!(o.getValue()==0&&a&&c)}adjustOddEvenCounts(o){let a=Xe.sum(new Int32Array(this.getOddCounts())),c=Xe.sum(new Int32Array(this.getEvenCounts())),u=!1,d=!1;a>13?d=!0:a<4&&(u=!0);let f=!1,p=!1;c>13?p=!0:c<4&&(f=!0);let y=a+c-o,_=(a&1)==1,w=(c&1)==0;if(y==1)if(_){if(w)throw new V;d=!0}else{if(!w)throw new V;p=!0}else if(y==-1)if(_){if(w)throw new V;u=!0}else{if(!w)throw new V;f=!0}else if(y==0){if(_){if(!w)throw new V;a<c?(u=!0,p=!0):(d=!0,f=!0)}else if(w)throw new V}else throw new V;if(u){if(d)throw new V;H.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(d&&H.decrement(this.getOddCounts(),this.getOddRoundingErrors()),f){if(p)throw new V;H.increment(this.getEvenCounts(),this.getOddRoundingErrors())}p&&H.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}H.SYMBOL_WIDEST=[7,5,4,3,1],H.EVEN_TOTAL_SUBSET=[4,20,52,104,204],H.GSUM=[0,348,1388,2948,3988],H.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],H.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],H.FINDER_PAT_A=0,H.FINDER_PAT_B=1,H.FINDER_PAT_C=2,H.FINDER_PAT_D=3,H.FINDER_PAT_E=4,H.FINDER_PAT_F=5,H.FINDER_PATTERN_SEQUENCES=[[H.FINDER_PAT_A,H.FINDER_PAT_A],[H.FINDER_PAT_A,H.FINDER_PAT_B,H.FINDER_PAT_B],[H.FINDER_PAT_A,H.FINDER_PAT_C,H.FINDER_PAT_B,H.FINDER_PAT_D],[H.FINDER_PAT_A,H.FINDER_PAT_E,H.FINDER_PAT_B,H.FINDER_PAT_D,H.FINDER_PAT_C],[H.FINDER_PAT_A,H.FINDER_PAT_E,H.FINDER_PAT_B,H.FINDER_PAT_D,H.FINDER_PAT_D,H.FINDER_PAT_F],[H.FINDER_PAT_A,H.FINDER_PAT_E,H.FINDER_PAT_B,H.FINDER_PAT_D,H.FINDER_PAT_E,H.FINDER_PAT_F,H.FINDER_PAT_F],[H.FINDER_PAT_A,H.FINDER_PAT_A,H.FINDER_PAT_B,H.FINDER_PAT_B,H.FINDER_PAT_C,H.FINDER_PAT_C,H.FINDER_PAT_D,H.FINDER_PAT_D],[H.FINDER_PAT_A,H.FINDER_PAT_A,H.FINDER_PAT_B,H.FINDER_PAT_B,H.FINDER_PAT_C,H.FINDER_PAT_C,H.FINDER_PAT_D,H.FINDER_PAT_E,H.FINDER_PAT_E],[H.FINDER_PAT_A,H.FINDER_PAT_A,H.FINDER_PAT_B,H.FINDER_PAT_B,H.FINDER_PAT_C,H.FINDER_PAT_C,H.FINDER_PAT_D,H.FINDER_PAT_E,H.FINDER_PAT_F,H.FINDER_PAT_F],[H.FINDER_PAT_A,H.FINDER_PAT_A,H.FINDER_PAT_B,H.FINDER_PAT_B,H.FINDER_PAT_C,H.FINDER_PAT_D,H.FINDER_PAT_D,H.FINDER_PAT_E,H.FINDER_PAT_E,H.FINDER_PAT_F,H.FINDER_PAT_F]],H.MAX_PAIRS=11;class ZT extends ws{constructor(o,a,c){super(o,a),this.count=0,this.finderPattern=c}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Mt extends Mo{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(o,a,c){let u=this.decodePair(a,!1,o,c);Mt.addOrTally(this.possibleLeftPairs,u),a.reverse();let d=this.decodePair(a,!0,o,c);Mt.addOrTally(this.possibleRightPairs,d),a.reverse();for(let f of this.possibleLeftPairs)if(f.getCount()>1){for(let p of this.possibleRightPairs)if(p.getCount()>1&&Mt.checkChecksum(f,p))return Mt.constructResult(f,p)}throw new V}static addOrTally(o,a){if(a==null)return;let c=!1;for(let u of o)if(u.getValue()===a.getValue()){u.incrementCount(),c=!0;break}c||o.push(a)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(o,a){let c=4537077*o.getValue()+a.getValue(),u=new String(c).toString(),d=new mt;for(let _=13-u.length;_>0;_--)d.append("0");d.append(u);let f=0;for(let _=0;_<13;_++){let w=d.charAt(_).charCodeAt(0)-48;f+=_&1?w:3*w}f=10-f%10,f===10&&(f=0),d.append(f.toString());let p=o.getFinderPattern().getResultPoints(),y=a.getFinderPattern().getResultPoints();return new bn(d.toString(),null,0,[p[0],p[1],y[0],y[1]],ge.RSS_14,new Date().getTime())}static checkChecksum(o,a){let c=(o.getChecksumPortion()+16*a.getChecksumPortion())%79,u=9*o.getFinderPattern().getValue()+a.getFinderPattern().getValue();return u>72&&u--,u>8&&u--,c===u}decodePair(o,a,c,u){try{let d=this.findFinderPattern(o,a),f=this.parseFoundFinderPattern(o,c,a,d),p=u==null?null:u.get(le.NEED_RESULT_POINT_CALLBACK);if(p!=null){let w=(d[0]+d[1])/2;a&&(w=o.getSize()-1-w),p.foundPossibleResultPoint(new oe(w,c))}let y=this.decodeDataCharacter(o,f,!0),_=this.decodeDataCharacter(o,f,!1);return new ZT(1597*y.getValue()+_.getValue(),y.getChecksumPortion()+4*_.getChecksumPortion(),f)}catch{return null}}decodeDataCharacter(o,a,c){let u=this.getDataCharacterCounters();for(let R=0;R<u.length;R++)u[R]=0;if(c)Bt.recordPatternInReverse(o,a.getStartEnd()[0],u);else{Bt.recordPattern(o,a.getStartEnd()[1]+1,u);for(let R=0,P=u.length-1;R<P;R++,P--){let q=u[R];u[R]=u[P],u[P]=q}}let d=c?16:15,f=Xe.sum(new Int32Array(u))/d,p=this.getOddCounts(),y=this.getEvenCounts(),_=this.getOddRoundingErrors(),w=this.getEvenRoundingErrors();for(let R=0;R<u.length;R++){let P=u[R]/f,q=Math.floor(P+.5);q<1?q=1:q>8&&(q=8);let Q=Math.floor(R/2);R&1?(y[Q]=q,w[Q]=P-q):(p[Q]=q,_[Q]=P-q)}this.adjustOddEvenCounts(c,d);let I=0,b=0;for(let R=p.length-1;R>=0;R--)b*=9,b+=p[R],I+=p[R];let A=0,T=0;for(let R=y.length-1;R>=0;R--)A*=9,A+=y[R],T+=y[R];let M=b+3*A;if(c){if(I&1||I>12||I<4)throw new V;let R=(12-I)/2,P=Mt.OUTSIDE_ODD_WIDEST[R],q=9-P,Q=zr.getRSSvalue(p,P,!1),B=zr.getRSSvalue(y,q,!0),Be=Mt.OUTSIDE_EVEN_TOTAL_SUBSET[R],De=Mt.OUTSIDE_GSUM[R];return new ws(Q*Be+B+De,M)}else{if(T&1||T>10||T<4)throw new V;let R=(10-T)/2,P=Mt.INSIDE_ODD_WIDEST[R],q=9-P,Q=zr.getRSSvalue(p,P,!0),B=zr.getRSSvalue(y,q,!1),Be=Mt.INSIDE_ODD_TOTAL_SUBSET[R],De=Mt.INSIDE_GSUM[R];return new ws(B*Be+Q+De,M)}}findFinderPattern(o,a){let c=this.getDecodeFinderCounters();c[0]=0,c[1]=0,c[2]=0,c[3]=0;let u=o.getSize(),d=!1,f=0;for(;f<u&&(d=!o.get(f),a!==d);)f++;let p=0,y=f;for(let _=f;_<u;_++)if(o.get(_)!==d)c[p]++;else{if(p===3){if(Mo.isFinderPattern(c))return[y,_];y+=c[0]+c[1],c[0]=c[2],c[1]=c[3],c[2]=0,c[3]=0,p--}else p++;c[p]=1,d=!d}throw new V}parseFoundFinderPattern(o,a,c,u){let d=o.get(u[0]),f=u[0]-1;for(;f>=0&&d!==o.get(f);)f--;f++;let p=u[0]-f,y=this.getDecodeFinderCounters(),_=new Int32Array(y.length);D.arraycopy(y,0,_,1,y.length-1),_[0]=p;let w=this.parseFinderValue(_,Mt.FINDER_PATTERNS),I=f,b=u[1];return c&&(I=o.getSize()-1-I,b=o.getSize()-1-b),new gu(w,[f,u[1]],I,b,a)}adjustOddEvenCounts(o,a){let c=Xe.sum(new Int32Array(this.getOddCounts())),u=Xe.sum(new Int32Array(this.getEvenCounts())),d=!1,f=!1,p=!1,y=!1;o?(c>12?f=!0:c<4&&(d=!0),u>12?y=!0:u<4&&(p=!0)):(c>11?f=!0:c<5&&(d=!0),u>10?y=!0:u<4&&(p=!0));let _=c+u-a,w=(c&1)===(o?1:0),I=(u&1)===1;if(_===1)if(w){if(I)throw new V;f=!0}else{if(!I)throw new V;y=!0}else if(_===-1)if(w){if(I)throw new V;d=!0}else{if(!I)throw new V;p=!0}else if(_===0){if(w){if(!I)throw new V;c<u?(d=!0,y=!0):(f=!0,p=!0)}else if(I)throw new V}else throw new V;if(d){if(f)throw new V;Mo.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(f&&Mo.decrement(this.getOddCounts(),this.getOddRoundingErrors()),p){if(y)throw new V;Mo.increment(this.getEvenCounts(),this.getOddRoundingErrors())}y&&Mo.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Mt.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Mt.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Mt.OUTSIDE_GSUM=[0,161,961,2015,2715],Mt.INSIDE_GSUM=[0,336,1036,1516],Mt.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Mt.INSIDE_ODD_WIDEST=[2,4,6,8],Mt.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Is extends Bt{constructor(o,a){super(),this.readers=[],this.verbose=a===!0;let c=o?o.get(le.POSSIBLE_FORMATS):null,u=o&&o.get(le.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;c?((c.includes(ge.EAN_13)||c.includes(ge.UPC_A)||c.includes(ge.EAN_8)||c.includes(ge.UPC_E))&&this.readers.push(new op(o)),c.includes(ge.CODE_39)&&this.readers.push(new rp(u)),c.includes(ge.CODE_128)&&this.readers.push(new Z),c.includes(ge.ITF)&&this.readers.push(new yt),c.includes(ge.RSS_14)&&this.readers.push(new Mt),c.includes(ge.RSS_EXPANDED)&&this.readers.push(new H(this.verbose))):(this.readers.push(new op(o)),this.readers.push(new rp),this.readers.push(new op(o)),this.readers.push(new Z),this.readers.push(new yt),this.readers.push(new Mt),this.readers.push(new H(this.verbose)))}decodeRow(o,a,c){for(let u=0;u<this.readers.length;u++)try{return this.readers[u].decodeRow(o,a,c)}catch{}throw new V}reset(){this.readers.forEach(o=>o.reset())}}class XT extends To{constructor(o=500,a){super(new Is(a),o,a)}}class at{constructor(o,a,c){this.ecCodewords=o,this.ecBlocks=[a],c&&this.ecBlocks.push(c)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class it{constructor(o,a){this.count=o,this.dataCodewords=a}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class $e{constructor(o,a,c,u,d,f){this.versionNumber=o,this.symbolSizeRows=a,this.symbolSizeColumns=c,this.dataRegionSizeRows=u,this.dataRegionSizeColumns=d,this.ecBlocks=f;let p=0,y=f.getECCodewords(),_=f.getECBlocks();for(let w of _)p+=w.getCount()*(w.getDataCodewords()+y);this.totalCodewords=p}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(o,a){if(o&1||a&1)throw new j;for(let c of $e.VERSIONS)if(c.symbolSizeRows===o&&c.symbolSizeColumns===a)return c;throw new j}toString(){return""+this.versionNumber}static buildVersions(){return[new $e(1,10,10,8,8,new at(5,new it(1,3))),new $e(2,12,12,10,10,new at(7,new it(1,5))),new $e(3,14,14,12,12,new at(10,new it(1,8))),new $e(4,16,16,14,14,new at(12,new it(1,12))),new $e(5,18,18,16,16,new at(14,new it(1,18))),new $e(6,20,20,18,18,new at(18,new it(1,22))),new $e(7,22,22,20,20,new at(20,new it(1,30))),new $e(8,24,24,22,22,new at(24,new it(1,36))),new $e(9,26,26,24,24,new at(28,new it(1,44))),new $e(10,32,32,14,14,new at(36,new it(1,62))),new $e(11,36,36,16,16,new at(42,new it(1,86))),new $e(12,40,40,18,18,new at(48,new it(1,114))),new $e(13,44,44,20,20,new at(56,new it(1,144))),new $e(14,48,48,22,22,new at(68,new it(1,174))),new $e(15,52,52,24,24,new at(42,new it(2,102))),new $e(16,64,64,14,14,new at(56,new it(2,140))),new $e(17,72,72,16,16,new at(36,new it(4,92))),new $e(18,80,80,18,18,new at(48,new it(4,114))),new $e(19,88,88,20,20,new at(56,new it(4,144))),new $e(20,96,96,22,22,new at(68,new it(4,174))),new $e(21,104,104,24,24,new at(56,new it(6,136))),new $e(22,120,120,18,18,new at(68,new it(6,175))),new $e(23,132,132,20,20,new at(62,new it(8,163))),new $e(24,144,144,22,22,new at(62,new it(8,156),new it(2,155))),new $e(25,8,18,6,16,new at(7,new it(1,5))),new $e(26,8,32,6,14,new at(11,new it(1,10))),new $e(27,12,26,10,24,new at(14,new it(1,16))),new $e(28,12,36,10,16,new at(18,new it(1,22))),new $e(29,16,36,14,16,new at(24,new it(1,32))),new $e(30,16,48,14,22,new at(28,new it(1,49)))]}}$e.VERSIONS=$e.buildVersions();class lp{constructor(o){let a=o.getHeight();if(a<8||a>144||a&1)throw new j;this.version=lp.readVersion(o),this.mappingBitMatrix=this.extractDataRegion(o),this.readMappingMatrix=new Kt(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(o){let a=o.getHeight(),c=o.getWidth();return $e.getVersionForDimensions(a,c)}readCodewords(){let o=new Int8Array(this.version.getTotalCodewords()),a=0,c=4,u=0,d=this.mappingBitMatrix.getHeight(),f=this.mappingBitMatrix.getWidth(),p=!1,y=!1,_=!1,w=!1;do if(c===d&&u===0&&!p)o[a++]=this.readCorner1(d,f)&255,c-=2,u+=2,p=!0;else if(c===d-2&&u===0&&f&3&&!y)o[a++]=this.readCorner2(d,f)&255,c-=2,u+=2,y=!0;else if(c===d+4&&u===2&&!(f&7)&&!_)o[a++]=this.readCorner3(d,f)&255,c-=2,u+=2,_=!0;else if(c===d-2&&u===0&&(f&7)===4&&!w)o[a++]=this.readCorner4(d,f)&255,c-=2,u+=2,w=!0;else{do c<d&&u>=0&&!this.readMappingMatrix.get(u,c)&&(o[a++]=this.readUtah(c,u,d,f)&255),c-=2,u+=2;while(c>=0&&u<f);c+=1,u+=3;do c>=0&&u<f&&!this.readMappingMatrix.get(u,c)&&(o[a++]=this.readUtah(c,u,d,f)&255),c+=2,u-=2;while(c<d&&u>=0);c+=3,u+=1}while(c<d||u<f);if(a!==this.version.getTotalCodewords())throw new j;return o}readModule(o,a,c,u){return o<0&&(o+=c,a+=4-(c+4&7)),a<0&&(a+=u,o+=4-(u+4&7)),this.readMappingMatrix.set(a,o),this.mappingBitMatrix.get(a,o)}readUtah(o,a,c,u){let d=0;return this.readModule(o-2,a-2,c,u)&&(d|=1),d<<=1,this.readModule(o-2,a-1,c,u)&&(d|=1),d<<=1,this.readModule(o-1,a-2,c,u)&&(d|=1),d<<=1,this.readModule(o-1,a-1,c,u)&&(d|=1),d<<=1,this.readModule(o-1,a,c,u)&&(d|=1),d<<=1,this.readModule(o,a-2,c,u)&&(d|=1),d<<=1,this.readModule(o,a-1,c,u)&&(d|=1),d<<=1,this.readModule(o,a,c,u)&&(d|=1),d}readCorner1(o,a){let c=0;return this.readModule(o-1,0,o,a)&&(c|=1),c<<=1,this.readModule(o-1,1,o,a)&&(c|=1),c<<=1,this.readModule(o-1,2,o,a)&&(c|=1),c<<=1,this.readModule(0,a-2,o,a)&&(c|=1),c<<=1,this.readModule(0,a-1,o,a)&&(c|=1),c<<=1,this.readModule(1,a-1,o,a)&&(c|=1),c<<=1,this.readModule(2,a-1,o,a)&&(c|=1),c<<=1,this.readModule(3,a-1,o,a)&&(c|=1),c}readCorner2(o,a){let c=0;return this.readModule(o-3,0,o,a)&&(c|=1),c<<=1,this.readModule(o-2,0,o,a)&&(c|=1),c<<=1,this.readModule(o-1,0,o,a)&&(c|=1),c<<=1,this.readModule(0,a-4,o,a)&&(c|=1),c<<=1,this.readModule(0,a-3,o,a)&&(c|=1),c<<=1,this.readModule(0,a-2,o,a)&&(c|=1),c<<=1,this.readModule(0,a-1,o,a)&&(c|=1),c<<=1,this.readModule(1,a-1,o,a)&&(c|=1),c}readCorner3(o,a){let c=0;return this.readModule(o-1,0,o,a)&&(c|=1),c<<=1,this.readModule(o-1,a-1,o,a)&&(c|=1),c<<=1,this.readModule(0,a-3,o,a)&&(c|=1),c<<=1,this.readModule(0,a-2,o,a)&&(c|=1),c<<=1,this.readModule(0,a-1,o,a)&&(c|=1),c<<=1,this.readModule(1,a-3,o,a)&&(c|=1),c<<=1,this.readModule(1,a-2,o,a)&&(c|=1),c<<=1,this.readModule(1,a-1,o,a)&&(c|=1),c}readCorner4(o,a){let c=0;return this.readModule(o-3,0,o,a)&&(c|=1),c<<=1,this.readModule(o-2,0,o,a)&&(c|=1),c<<=1,this.readModule(o-1,0,o,a)&&(c|=1),c<<=1,this.readModule(0,a-2,o,a)&&(c|=1),c<<=1,this.readModule(0,a-1,o,a)&&(c|=1),c<<=1,this.readModule(1,a-1,o,a)&&(c|=1),c<<=1,this.readModule(2,a-1,o,a)&&(c|=1),c<<=1,this.readModule(3,a-1,o,a)&&(c|=1),c}extractDataRegion(o){let a=this.version.getSymbolSizeRows(),c=this.version.getSymbolSizeColumns();if(o.getHeight()!==a)throw new m("Dimension of bitMatrix must match the version size");let u=this.version.getDataRegionSizeRows(),d=this.version.getDataRegionSizeColumns(),f=a/u|0,p=c/d|0,y=f*u,_=p*d,w=new Kt(_,y);for(let I=0;I<f;++I){let b=I*u;for(let A=0;A<p;++A){let T=A*d;for(let M=0;M<u;++M){let R=I*(u+2)+1+M,P=b+M;for(let q=0;q<d;++q){let Q=A*(d+2)+1+q;if(o.get(Q,R)){let B=T+q;w.set(B,P)}}}}}return w}}class up{constructor(o,a){this.numDataCodewords=o,this.codewords=a}static getDataBlocks(o,a){let c=a.getECBlocks(),u=0,d=c.getECBlocks();for(let M of d)u+=M.getCount();let f=new Array(u),p=0;for(let M of d)for(let R=0;R<M.getCount();R++){let P=M.getDataCodewords(),q=c.getECCodewords()+P;f[p++]=new up(P,new Uint8Array(q))}let _=f[0].codewords.length-c.getECCodewords(),w=_-1,I=0;for(let M=0;M<w;M++)for(let R=0;R<p;R++)f[R].codewords[M]=o[I++];let b=a.getVersionNumber()===24,A=b?8:p;for(let M=0;M<A;M++)f[M].codewords[_-1]=o[I++];let T=f[0].codewords.length;for(let M=_;M<T;M++)for(let R=0;R<p;R++){let P=b?(R+8)%p:R,q=b&&P>7?M-1:M;f[P].codewords[q]=o[I++]}if(I!==o.length)throw new m;return f}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class dp{constructor(o){this.bytes=o,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(o){if(o<1||o>32||o>this.available())throw new m(""+o);let a=0,c=this.bitOffset,u=this.byteOffset,d=this.bytes;if(c>0){let f=8-c,p=o<f?o:f,y=f-p,_=255>>8-p<<y;a=(d[u]&_)>>y,o-=p,c+=p,c===8&&(c=0,u++)}if(o>0){for(;o>=8;)a=a<<8|d[u]&255,u++,o-=8;if(o>0){let f=8-o,p=255>>f<<f;a=a<<o|(d[u]&p)>>f,c+=o}}return this.bitOffset=c,this.byteOffset=u,a}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var tn=function(v){return v[v.PAD_ENCODE=0]="PAD_ENCODE",v[v.ASCII_ENCODE=1]="ASCII_ENCODE",v[v.C40_ENCODE=2]="C40_ENCODE",v[v.TEXT_ENCODE=3]="TEXT_ENCODE",v[v.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",v[v.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",v[v.BASE256_ENCODE=6]="BASE256_ENCODE",v}(tn||{});class $i{static decode(o){let a=new dp(o),c=new mt,u=new mt,d=new Array,f=tn.ASCII_ENCODE;do if(f===tn.ASCII_ENCODE)f=this.decodeAsciiSegment(a,c,u);else{switch(f){case tn.C40_ENCODE:this.decodeC40Segment(a,c);break;case tn.TEXT_ENCODE:this.decodeTextSegment(a,c);break;case tn.ANSIX12_ENCODE:this.decodeAnsiX12Segment(a,c);break;case tn.EDIFACT_ENCODE:this.decodeEdifactSegment(a,c);break;case tn.BASE256_ENCODE:this.decodeBase256Segment(a,c,d);break;default:throw new j}f=tn.ASCII_ENCODE}while(f!==tn.PAD_ENCODE&&a.available()>0);return u.length()>0&&c.append(u.toString()),new Qa(o,c.toString(),d.length===0?null:d,null)}static decodeAsciiSegment(o,a,c){let u=!1;do{let d=o.readBits(8);if(d===0)throw new j;if(d<=128)return u&&(d+=128),a.append(String.fromCharCode(d-1)),tn.ASCII_ENCODE;if(d===129)return tn.PAD_ENCODE;if(d<=229){let f=d-130;f<10&&a.append("0"),a.append(""+f)}else switch(d){case 230:return tn.C40_ENCODE;case 231:return tn.BASE256_ENCODE;case 232:a.append("");break;case 233:case 234:break;case 235:u=!0;break;case 236:a.append("[)>05"),c.insert(0,"");break;case 237:a.append("[)>06"),c.insert(0,"");break;case 238:return tn.ANSIX12_ENCODE;case 239:return tn.TEXT_ENCODE;case 240:return tn.EDIFACT_ENCODE;case 241:break;default:if(d!==254||o.available()!==0)throw new j;break}}while(o.available()>0);return tn.ASCII_ENCODE}static decodeC40Segment(o,a){let c=!1,u=[],d=0;do{if(o.available()===8)return;let f=o.readBits(8);if(f===254)return;this.parseTwoBytes(f,o.readBits(8),u);for(let p=0;p<3;p++){let y=u[p];switch(d){case 0:if(y<3)d=y+1;else if(y<this.C40_BASIC_SET_CHARS.length){let _=this.C40_BASIC_SET_CHARS[y];c?(a.append(String.fromCharCode(_.charCodeAt(0)+128)),c=!1):a.append(_)}else throw new j;break;case 1:c?(a.append(String.fromCharCode(y+128)),c=!1):a.append(String.fromCharCode(y)),d=0;break;case 2:if(y<this.C40_SHIFT2_SET_CHARS.length){let _=this.C40_SHIFT2_SET_CHARS[y];c?(a.append(String.fromCharCode(_.charCodeAt(0)+128)),c=!1):a.append(_)}else switch(y){case 27:a.append("");break;case 30:c=!0;break;default:throw new j}d=0;break;case 3:c?(a.append(String.fromCharCode(y+224)),c=!1):a.append(String.fromCharCode(y+96)),d=0;break;default:throw new j}}}while(o.available()>0)}static decodeTextSegment(o,a){let c=!1,u=[],d=0;do{if(o.available()===8)return;let f=o.readBits(8);if(f===254)return;this.parseTwoBytes(f,o.readBits(8),u);for(let p=0;p<3;p++){let y=u[p];switch(d){case 0:if(y<3)d=y+1;else if(y<this.TEXT_BASIC_SET_CHARS.length){let _=this.TEXT_BASIC_SET_CHARS[y];c?(a.append(String.fromCharCode(_.charCodeAt(0)+128)),c=!1):a.append(_)}else throw new j;break;case 1:c?(a.append(String.fromCharCode(y+128)),c=!1):a.append(String.fromCharCode(y)),d=0;break;case 2:if(y<this.TEXT_SHIFT2_SET_CHARS.length){let _=this.TEXT_SHIFT2_SET_CHARS[y];c?(a.append(String.fromCharCode(_.charCodeAt(0)+128)),c=!1):a.append(_)}else switch(y){case 27:a.append("");break;case 30:c=!0;break;default:throw new j}d=0;break;case 3:if(y<this.TEXT_SHIFT3_SET_CHARS.length){let _=this.TEXT_SHIFT3_SET_CHARS[y];c?(a.append(String.fromCharCode(_.charCodeAt(0)+128)),c=!1):a.append(_),d=0}else throw new j;break;default:throw new j}}}while(o.available()>0)}static decodeAnsiX12Segment(o,a){let c=[];do{if(o.available()===8)return;let u=o.readBits(8);if(u===254)return;this.parseTwoBytes(u,o.readBits(8),c);for(let d=0;d<3;d++){let f=c[d];switch(f){case 0:a.append("\r");break;case 1:a.append("*");break;case 2:a.append(">");break;case 3:a.append(" ");break;default:if(f<14)a.append(String.fromCharCode(f+44));else if(f<40)a.append(String.fromCharCode(f+51));else throw new j;break}}}while(o.available()>0)}static parseTwoBytes(o,a,c){let u=(o<<8)+a-1,d=Math.floor(u/1600);c[0]=d,u-=d*1600,d=Math.floor(u/40),c[1]=d,c[2]=u-d*40}static decodeEdifactSegment(o,a){do{if(o.available()<=16)return;for(let c=0;c<4;c++){let u=o.readBits(6);if(u===31){let d=8-o.getBitOffset();d!==8&&o.readBits(d);return}u&32||(u|=64),a.append(String.fromCharCode(u))}}while(o.available()>0)}static decodeBase256Segment(o,a,c){let u=1+o.getByteOffset(),d=this.unrandomize255State(o.readBits(8),u++),f;if(d===0?f=o.available()/8|0:d<250?f=d:f=250*(d-249)+this.unrandomize255State(o.readBits(8),u++),f<0)throw new j;let p=new Uint8Array(f);for(let y=0;y<f;y++){if(o.available()<8)throw new j;p[y]=this.unrandomize255State(o.readBits(8),u++)}c.push(p);try{a.append(Ft.decode(p,Ce.ISO88591))}catch(y){throw new ui("Platform does not support required encoding: "+y.message)}}static unrandomize255State(o,a){let c=149*a%255+1,u=o-c;return u>=0?u:u+256}}$i.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],$i.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],$i.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],$i.TEXT_SHIFT2_SET_CHARS=$i.C40_SHIFT2_SET_CHARS,$i.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~","\x7F"];class QT{constructor(){this.rsDecoder=new ec(nt.DATA_MATRIX_FIELD_256)}decode(o){let a=new lp(o),c=a.getVersion(),u=a.readCodewords(),d=up.getDataBlocks(u,c),f=0;for(let _ of d)f+=_.getNumDataCodewords();let p=new Uint8Array(f),y=d.length;for(let _=0;_<y;_++){let w=d[_],I=w.getCodewords(),b=w.getNumDataCodewords();this.correctErrors(I,b);for(let A=0;A<b;A++)p[A*y+_]=I[A]}return $i.decode(p)}correctErrors(o,a){let c=new Int32Array(o);try{this.rsDecoder.decode(c,o.length-a)}catch{throw new E}for(let u=0;u<a;u++)o[u]=c[u]}}class Pt{constructor(o){this.image=o,this.rectangleDetector=new fu(this.image)}detect(){let o=this.rectangleDetector.detect(),a=this.detectSolid1(o);if(a=this.detectSolid2(a),a[3]=this.correctTopRight(a),!a[3])throw new V;a=this.shiftToModuleCenter(a);let c=a[0],u=a[1],d=a[2],f=a[3],p=this.transitionsBetween(c,f)+1,y=this.transitionsBetween(d,f)+1;(p&1)===1&&(p+=1),(y&1)===1&&(y+=1),4*p<7*y&&4*y<7*p&&(p=y=Math.max(p,y));let _=Pt.sampleGrid(this.image,c,u,d,f,p,y);return new du(_,[c,u,d,f])}static shiftPoint(o,a,c){let u=(a.getX()-o.getX())/(c+1),d=(a.getY()-o.getY())/(c+1);return new oe(o.getX()+u,o.getY()+d)}static moveAway(o,a,c){let u=o.getX(),d=o.getY();return u<a?u-=1:u+=1,d<c?d-=1:d+=1,new oe(u,d)}detectSolid1(o){let a=o[0],c=o[1],u=o[3],d=o[2],f=this.transitionsBetween(a,c),p=this.transitionsBetween(c,u),y=this.transitionsBetween(u,d),_=this.transitionsBetween(d,a),w=f,I=[d,a,c,u];return w>p&&(w=p,I[0]=a,I[1]=c,I[2]=u,I[3]=d),w>y&&(w=y,I[0]=c,I[1]=u,I[2]=d,I[3]=a),w>_&&(I[0]=u,I[1]=d,I[2]=a,I[3]=c),I}detectSolid2(o){let a=o[0],c=o[1],u=o[2],d=o[3],f=this.transitionsBetween(a,d),p=Pt.shiftPoint(c,u,(f+1)*4),y=Pt.shiftPoint(u,c,(f+1)*4),_=this.transitionsBetween(p,a),w=this.transitionsBetween(y,d);return _<w?(o[0]=a,o[1]=c,o[2]=u,o[3]=d):(o[0]=c,o[1]=u,o[2]=d,o[3]=a),o}correctTopRight(o){let a=o[0],c=o[1],u=o[2],d=o[3],f=this.transitionsBetween(a,d),p=this.transitionsBetween(c,d),y=Pt.shiftPoint(a,c,(p+1)*4),_=Pt.shiftPoint(u,c,(f+1)*4);f=this.transitionsBetween(y,d),p=this.transitionsBetween(_,d);let w=new oe(d.getX()+(u.getX()-c.getX())/(f+1),d.getY()+(u.getY()-c.getY())/(f+1)),I=new oe(d.getX()+(a.getX()-c.getX())/(p+1),d.getY()+(a.getY()-c.getY())/(p+1));if(!this.isValid(w))return this.isValid(I)?I:null;if(!this.isValid(I))return w;let b=this.transitionsBetween(y,w)+this.transitionsBetween(_,w),A=this.transitionsBetween(y,I)+this.transitionsBetween(_,I);return b>A?w:I}shiftToModuleCenter(o){let a=o[0],c=o[1],u=o[2],d=o[3],f=this.transitionsBetween(a,d)+1,p=this.transitionsBetween(u,d)+1,y=Pt.shiftPoint(a,c,p*4),_=Pt.shiftPoint(u,c,f*4);f=this.transitionsBetween(y,d)+1,p=this.transitionsBetween(_,d)+1,(f&1)===1&&(f+=1),(p&1)===1&&(p+=1);let w=(a.getX()+c.getX()+u.getX()+d.getX())/4,I=(a.getY()+c.getY()+u.getY()+d.getY())/4;a=Pt.moveAway(a,w,I),c=Pt.moveAway(c,w,I),u=Pt.moveAway(u,w,I),d=Pt.moveAway(d,w,I);let b,A;return y=Pt.shiftPoint(a,c,p*4),y=Pt.shiftPoint(y,d,f*4),b=Pt.shiftPoint(c,a,p*4),b=Pt.shiftPoint(b,u,f*4),_=Pt.shiftPoint(u,d,p*4),_=Pt.shiftPoint(_,c,f*4),A=Pt.shiftPoint(d,u,p*4),A=Pt.shiftPoint(A,a,f*4),[y,b,_,A]}isValid(o){return o.getX()>=0&&o.getX()<this.image.getWidth()&&o.getY()>0&&o.getY()<this.image.getHeight()}static sampleGrid(o,a,c,u,d,f,p){return zi.getInstance().sampleGrid(o,f,p,.5,.5,f-.5,.5,f-.5,p-.5,.5,p-.5,a.getX(),a.getY(),d.getX(),d.getY(),u.getX(),u.getY(),c.getX(),c.getY())}transitionsBetween(o,a){let c=Math.trunc(o.getX()),u=Math.trunc(o.getY()),d=Math.trunc(a.getX()),f=Math.trunc(a.getY()),p=Math.abs(f-u)>Math.abs(d-c);if(p){let M=c;c=u,u=M,M=d,d=f,f=M}let y=Math.abs(d-c),_=Math.abs(f-u),w=-y/2,I=u<f?1:-1,b=c<d?1:-1,A=0,T=this.image.get(p?u:c,p?c:u);for(let M=c,R=u;M!==d;M+=b){let P=this.image.get(p?R:M,p?M:R);if(P!==T&&(A++,T=P),w+=_,w>0){if(R===f)break;R+=I,w-=y}}return A}}let yu=(()=>{class v{constructor(){this.decoder=new QT}decode(a,c=null){let u,d;if(c!=null&&c.has(le.PURE_BARCODE)){let w=v.extractPureBits(a.getBlackMatrix());u=this.decoder.decode(w),d=v.NO_POINTS}else{let w=new Pt(a.getBlackMatrix()).detect();u=this.decoder.decode(w.getBits()),d=w.getPoints()}let f=u.getRawBytes(),p=new bn(u.getText(),f,8*f.length,d,ge.DATA_MATRIX,D.currentTimeMillis()),y=u.getByteSegments();y!=null&&p.putMetadata(en.BYTE_SEGMENTS,y);let _=u.getECLevel();return _!=null&&p.putMetadata(en.ERROR_CORRECTION_LEVEL,_),p}reset(){}static extractPureBits(a){let c=a.getTopLeftOnBit(),u=a.getBottomRightOnBit();if(c==null||u==null)throw new V;let d=this.moduleSize(c,a),f=c[1],p=u[1],y=c[0],w=(u[0]-y+1)/d,I=(p-f+1)/d;if(w<=0||I<=0)throw new V;let b=d/2;f+=b,y+=b;let A=new Kt(w,I);for(let T=0;T<I;T++){let M=f+T*d;for(let R=0;R<w;R++)a.get(y+R*d,M)&&A.set(R,T)}return A}static moduleSize(a,c){let u=c.getWidth(),d=a[0],f=a[1];for(;d<u&&c.get(d,f);)d++;if(d===u)throw new V;let p=d-a[0];if(p===0)throw new V;return p}}return v.NO_POINTS=[],v})();class KT extends To{constructor(o=500){super(new yu,o)}}var nc=function(v){return v[v.L=0]="L",v[v.M=1]="M",v[v.Q=2]="Q",v[v.H=3]="H",v}(nc||{});class Ct{constructor(o,a,c){this.value=o,this.stringValue=a,this.bits=c,Ct.FOR_BITS.set(c,this),Ct.FOR_VALUE.set(o,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(o){switch(o){case"L":return Ct.L;case"M":return Ct.M;case"Q":return Ct.Q;case"H":return Ct.H;default:throw new g(o+"not available")}}toString(){return this.stringValue}equals(o){if(!(o instanceof Ct))return!1;let a=o;return this.value===a.value}static forBits(o){if(o<0||o>=Ct.FOR_BITS.size)throw new m;return Ct.FOR_BITS.get(o)}}Ct.FOR_BITS=new Map,Ct.FOR_VALUE=new Map,Ct.L=new Ct(nc.L,"L",1),Ct.M=new Ct(nc.M,"M",0),Ct.Q=new Ct(nc.Q,"Q",3),Ct.H=new Ct(nc.H,"H",2);class yn{constructor(o){this.errorCorrectionLevel=Ct.forBits(o>>3&3),this.dataMask=o&7}static numBitsDiffering(o,a){return z.bitCount(o^a)}static decodeFormatInformation(o,a){let c=yn.doDecodeFormatInformation(o,a);return c!==null?c:yn.doDecodeFormatInformation(o^yn.FORMAT_INFO_MASK_QR,a^yn.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(o,a){let c=Number.MAX_SAFE_INTEGER,u=0;for(let d of yn.FORMAT_INFO_DECODE_LOOKUP){let f=d[0];if(f===o||f===a)return new yn(d[1]);let p=yn.numBitsDiffering(o,f);p<c&&(u=d[1],c=p),o!==a&&(p=yn.numBitsDiffering(a,f),p<c&&(u=d[1],c=p))}return c<=3?new yn(u):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(o){if(!(o instanceof yn))return!1;let a=o;return this.errorCorrectionLevel===a.errorCorrectionLevel&&this.dataMask===a.dataMask}}yn.FORMAT_INFO_MASK_QR=21522,yn.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class O{constructor(o,...a){this.ecCodewordsPerBlock=o,this.ecBlocks=a}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let o=0,a=this.ecBlocks;for(let c of a)o+=c.getCount();return o}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class S{constructor(o,a){this.count=o,this.dataCodewords=a}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class ce{constructor(o,a,...c){this.versionNumber=o,this.alignmentPatternCenters=a,this.ecBlocks=c;let u=0,d=c[0].getECCodewordsPerBlock(),f=c[0].getECBlocks();for(let p of f)u+=p.getCount()*(p.getDataCodewords()+d);this.totalCodewords=u}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(o){return this.ecBlocks[o.getValue()]}static getProvisionalVersionForDimension(o){if(o%4!==1)throw new j;try{return this.getVersionForNumber((o-17)/4)}catch{throw new j}}static getVersionForNumber(o){if(o<1||o>40)throw new m;return ce.VERSIONS[o-1]}static decodeVersionInformation(o){let a=Number.MAX_SAFE_INTEGER,c=0;for(let u=0;u<ce.VERSION_DECODE_INFO.length;u++){let d=ce.VERSION_DECODE_INFO[u];if(d===o)return ce.getVersionForNumber(u+7);let f=yn.numBitsDiffering(o,d);f<a&&(c=u+7,a=f)}return a<=3?ce.getVersionForNumber(c):null}buildFunctionPattern(){let o=this.getDimensionForVersion(),a=new Kt(o);a.setRegion(0,0,9,9),a.setRegion(o-8,0,8,9),a.setRegion(0,o-8,9,8);let c=this.alignmentPatternCenters.length;for(let u=0;u<c;u++){let d=this.alignmentPatternCenters[u]-2;for(let f=0;f<c;f++)u===0&&(f===0||f===c-1)||u===c-1&&f===0||a.setRegion(this.alignmentPatternCenters[f]-2,d,5,5)}return a.setRegion(6,9,1,o-17),a.setRegion(9,6,o-17,1),this.versionNumber>6&&(a.setRegion(o-11,0,3,6),a.setRegion(0,o-11,6,3)),a}toString(){return""+this.versionNumber}}ce.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),ce.VERSIONS=[new ce(1,new Int32Array(0),new O(7,new S(1,19)),new O(10,new S(1,16)),new O(13,new S(1,13)),new O(17,new S(1,9))),new ce(2,Int32Array.from([6,18]),new O(10,new S(1,34)),new O(16,new S(1,28)),new O(22,new S(1,22)),new O(28,new S(1,16))),new ce(3,Int32Array.from([6,22]),new O(15,new S(1,55)),new O(26,new S(1,44)),new O(18,new S(2,17)),new O(22,new S(2,13))),new ce(4,Int32Array.from([6,26]),new O(20,new S(1,80)),new O(18,new S(2,32)),new O(26,new S(2,24)),new O(16,new S(4,9))),new ce(5,Int32Array.from([6,30]),new O(26,new S(1,108)),new O(24,new S(2,43)),new O(18,new S(2,15),new S(2,16)),new O(22,new S(2,11),new S(2,12))),new ce(6,Int32Array.from([6,34]),new O(18,new S(2,68)),new O(16,new S(4,27)),new O(24,new S(4,19)),new O(28,new S(4,15))),new ce(7,Int32Array.from([6,22,38]),new O(20,new S(2,78)),new O(18,new S(4,31)),new O(18,new S(2,14),new S(4,15)),new O(26,new S(4,13),new S(1,14))),new ce(8,Int32Array.from([6,24,42]),new O(24,new S(2,97)),new O(22,new S(2,38),new S(2,39)),new O(22,new S(4,18),new S(2,19)),new O(26,new S(4,14),new S(2,15))),new ce(9,Int32Array.from([6,26,46]),new O(30,new S(2,116)),new O(22,new S(3,36),new S(2,37)),new O(20,new S(4,16),new S(4,17)),new O(24,new S(4,12),new S(4,13))),new ce(10,Int32Array.from([6,28,50]),new O(18,new S(2,68),new S(2,69)),new O(26,new S(4,43),new S(1,44)),new O(24,new S(6,19),new S(2,20)),new O(28,new S(6,15),new S(2,16))),new ce(11,Int32Array.from([6,30,54]),new O(20,new S(4,81)),new O(30,new S(1,50),new S(4,51)),new O(28,new S(4,22),new S(4,23)),new O(24,new S(3,12),new S(8,13))),new ce(12,Int32Array.from([6,32,58]),new O(24,new S(2,92),new S(2,93)),new O(22,new S(6,36),new S(2,37)),new O(26,new S(4,20),new S(6,21)),new O(28,new S(7,14),new S(4,15))),new ce(13,Int32Array.from([6,34,62]),new O(26,new S(4,107)),new O(22,new S(8,37),new S(1,38)),new O(24,new S(8,20),new S(4,21)),new O(22,new S(12,11),new S(4,12))),new ce(14,Int32Array.from([6,26,46,66]),new O(30,new S(3,115),new S(1,116)),new O(24,new S(4,40),new S(5,41)),new O(20,new S(11,16),new S(5,17)),new O(24,new S(11,12),new S(5,13))),new ce(15,Int32Array.from([6,26,48,70]),new O(22,new S(5,87),new S(1,88)),new O(24,new S(5,41),new S(5,42)),new O(30,new S(5,24),new S(7,25)),new O(24,new S(11,12),new S(7,13))),new ce(16,Int32Array.from([6,26,50,74]),new O(24,new S(5,98),new S(1,99)),new O(28,new S(7,45),new S(3,46)),new O(24,new S(15,19),new S(2,20)),new O(30,new S(3,15),new S(13,16))),new ce(17,Int32Array.from([6,30,54,78]),new O(28,new S(1,107),new S(5,108)),new O(28,new S(10,46),new S(1,47)),new O(28,new S(1,22),new S(15,23)),new O(28,new S(2,14),new S(17,15))),new ce(18,Int32Array.from([6,30,56,82]),new O(30,new S(5,120),new S(1,121)),new O(26,new S(9,43),new S(4,44)),new O(28,new S(17,22),new S(1,23)),new O(28,new S(2,14),new S(19,15))),new ce(19,Int32Array.from([6,30,58,86]),new O(28,new S(3,113),new S(4,114)),new O(26,new S(3,44),new S(11,45)),new O(26,new S(17,21),new S(4,22)),new O(26,new S(9,13),new S(16,14))),new ce(20,Int32Array.from([6,34,62,90]),new O(28,new S(3,107),new S(5,108)),new O(26,new S(3,41),new S(13,42)),new O(30,new S(15,24),new S(5,25)),new O(28,new S(15,15),new S(10,16))),new ce(21,Int32Array.from([6,28,50,72,94]),new O(28,new S(4,116),new S(4,117)),new O(26,new S(17,42)),new O(28,new S(17,22),new S(6,23)),new O(30,new S(19,16),new S(6,17))),new ce(22,Int32Array.from([6,26,50,74,98]),new O(28,new S(2,111),new S(7,112)),new O(28,new S(17,46)),new O(30,new S(7,24),new S(16,25)),new O(24,new S(34,13))),new ce(23,Int32Array.from([6,30,54,78,102]),new O(30,new S(4,121),new S(5,122)),new O(28,new S(4,47),new S(14,48)),new O(30,new S(11,24),new S(14,25)),new O(30,new S(16,15),new S(14,16))),new ce(24,Int32Array.from([6,28,54,80,106]),new O(30,new S(6,117),new S(4,118)),new O(28,new S(6,45),new S(14,46)),new O(30,new S(11,24),new S(16,25)),new O(30,new S(30,16),new S(2,17))),new ce(25,Int32Array.from([6,32,58,84,110]),new O(26,new S(8,106),new S(4,107)),new O(28,new S(8,47),new S(13,48)),new O(30,new S(7,24),new S(22,25)),new O(30,new S(22,15),new S(13,16))),new ce(26,Int32Array.from([6,30,58,86,114]),new O(28,new S(10,114),new S(2,115)),new O(28,new S(19,46),new S(4,47)),new O(28,new S(28,22),new S(6,23)),new O(30,new S(33,16),new S(4,17))),new ce(27,Int32Array.from([6,34,62,90,118]),new O(30,new S(8,122),new S(4,123)),new O(28,new S(22,45),new S(3,46)),new O(30,new S(8,23),new S(26,24)),new O(30,new S(12,15),new S(28,16))),new ce(28,Int32Array.from([6,26,50,74,98,122]),new O(30,new S(3,117),new S(10,118)),new O(28,new S(3,45),new S(23,46)),new O(30,new S(4,24),new S(31,25)),new O(30,new S(11,15),new S(31,16))),new ce(29,Int32Array.from([6,30,54,78,102,126]),new O(30,new S(7,116),new S(7,117)),new O(28,new S(21,45),new S(7,46)),new O(30,new S(1,23),new S(37,24)),new O(30,new S(19,15),new S(26,16))),new ce(30,Int32Array.from([6,26,52,78,104,130]),new O(30,new S(5,115),new S(10,116)),new O(28,new S(19,47),new S(10,48)),new O(30,new S(15,24),new S(25,25)),new O(30,new S(23,15),new S(25,16))),new ce(31,Int32Array.from([6,30,56,82,108,134]),new O(30,new S(13,115),new S(3,116)),new O(28,new S(2,46),new S(29,47)),new O(30,new S(42,24),new S(1,25)),new O(30,new S(23,15),new S(28,16))),new ce(32,Int32Array.from([6,34,60,86,112,138]),new O(30,new S(17,115)),new O(28,new S(10,46),new S(23,47)),new O(30,new S(10,24),new S(35,25)),new O(30,new S(19,15),new S(35,16))),new ce(33,Int32Array.from([6,30,58,86,114,142]),new O(30,new S(17,115),new S(1,116)),new O(28,new S(14,46),new S(21,47)),new O(30,new S(29,24),new S(19,25)),new O(30,new S(11,15),new S(46,16))),new ce(34,Int32Array.from([6,34,62,90,118,146]),new O(30,new S(13,115),new S(6,116)),new O(28,new S(14,46),new S(23,47)),new O(30,new S(44,24),new S(7,25)),new O(30,new S(59,16),new S(1,17))),new ce(35,Int32Array.from([6,30,54,78,102,126,150]),new O(30,new S(12,121),new S(7,122)),new O(28,new S(12,47),new S(26,48)),new O(30,new S(39,24),new S(14,25)),new O(30,new S(22,15),new S(41,16))),new ce(36,Int32Array.from([6,24,50,76,102,128,154]),new O(30,new S(6,121),new S(14,122)),new O(28,new S(6,47),new S(34,48)),new O(30,new S(46,24),new S(10,25)),new O(30,new S(2,15),new S(64,16))),new ce(37,Int32Array.from([6,28,54,80,106,132,158]),new O(30,new S(17,122),new S(4,123)),new O(28,new S(29,46),new S(14,47)),new O(30,new S(49,24),new S(10,25)),new O(30,new S(24,15),new S(46,16))),new ce(38,Int32Array.from([6,32,58,84,110,136,162]),new O(30,new S(4,122),new S(18,123)),new O(28,new S(13,46),new S(32,47)),new O(30,new S(48,24),new S(14,25)),new O(30,new S(42,15),new S(32,16))),new ce(39,Int32Array.from([6,26,54,82,110,138,166]),new O(30,new S(20,117),new S(4,118)),new O(28,new S(40,47),new S(7,48)),new O(30,new S(43,24),new S(22,25)),new O(30,new S(10,15),new S(67,16))),new ce(40,Int32Array.from([6,30,58,86,114,142,170]),new O(30,new S(19,118),new S(6,119)),new O(28,new S(18,47),new S(31,48)),new O(30,new S(34,24),new S(34,25)),new O(30,new S(20,15),new S(61,16)))];var on=function(v){return v[v.DATA_MASK_000=0]="DATA_MASK_000",v[v.DATA_MASK_001=1]="DATA_MASK_001",v[v.DATA_MASK_010=2]="DATA_MASK_010",v[v.DATA_MASK_011=3]="DATA_MASK_011",v[v.DATA_MASK_100=4]="DATA_MASK_100",v[v.DATA_MASK_101=5]="DATA_MASK_101",v[v.DATA_MASK_110=6]="DATA_MASK_110",v[v.DATA_MASK_111=7]="DATA_MASK_111",v}(on||{});class tr{constructor(o,a){this.value=o,this.isMasked=a}unmaskBitMatrix(o,a){for(let c=0;c<a;c++)for(let u=0;u<a;u++)this.isMasked(c,u)&&o.flip(u,c)}}tr.values=new Map([[on.DATA_MASK_000,new tr(on.DATA_MASK_000,(v,o)=>(v+o&1)===0)],[on.DATA_MASK_001,new tr(on.DATA_MASK_001,(v,o)=>(v&1)===0)],[on.DATA_MASK_010,new tr(on.DATA_MASK_010,(v,o)=>o%3===0)],[on.DATA_MASK_011,new tr(on.DATA_MASK_011,(v,o)=>(v+o)%3===0)],[on.DATA_MASK_100,new tr(on.DATA_MASK_100,(v,o)=>(Math.floor(v/2)+Math.floor(o/3)&1)===0)],[on.DATA_MASK_101,new tr(on.DATA_MASK_101,(v,o)=>v*o%6===0)],[on.DATA_MASK_110,new tr(on.DATA_MASK_110,(v,o)=>v*o%6<3)],[on.DATA_MASK_111,new tr(on.DATA_MASK_111,(v,o)=>(v+o+v*o%3&1)===0)]]);class JT{constructor(o){let a=o.getHeight();if(a<21||(a&3)!==1)throw new j;this.bitMatrix=o}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let o=0;for(let d=0;d<6;d++)o=this.copyBit(d,8,o);o=this.copyBit(7,8,o),o=this.copyBit(8,8,o),o=this.copyBit(8,7,o);for(let d=5;d>=0;d--)o=this.copyBit(8,d,o);let a=this.bitMatrix.getHeight(),c=0,u=a-7;for(let d=a-1;d>=u;d--)c=this.copyBit(8,d,c);for(let d=a-8;d<a;d++)c=this.copyBit(d,8,c);if(this.parsedFormatInfo=yn.decodeFormatInformation(o,c),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new j}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;let o=this.bitMatrix.getHeight(),a=Math.floor((o-17)/4);if(a<=6)return ce.getVersionForNumber(a);let c=0,u=o-11;for(let f=5;f>=0;f--)for(let p=o-9;p>=u;p--)c=this.copyBit(p,f,c);let d=ce.decodeVersionInformation(c);if(d!==null&&d.getDimensionForVersion()===o)return this.parsedVersion=d,d;c=0;for(let f=5;f>=0;f--)for(let p=o-9;p>=u;p--)c=this.copyBit(f,p,c);if(d=ce.decodeVersionInformation(c),d!==null&&d.getDimensionForVersion()===o)return this.parsedVersion=d,d;throw new j}copyBit(o,a,c){return(this.isMirror?this.bitMatrix.get(a,o):this.bitMatrix.get(o,a))?c<<1|1:c<<1}readCodewords(){let o=this.readFormatInformation(),a=this.readVersion(),c=tr.values.get(o.getDataMask()),u=this.bitMatrix.getHeight();c.unmaskBitMatrix(this.bitMatrix,u);let d=a.buildFunctionPattern(),f=!0,p=new Uint8Array(a.getTotalCodewords()),y=0,_=0,w=0;for(let I=u-1;I>0;I-=2){I===6&&I--;for(let b=0;b<u;b++){let A=f?u-1-b:b;for(let T=0;T<2;T++)d.get(I-T,A)||(w++,_<<=1,this.bitMatrix.get(I-T,A)&&(_|=1),w===8&&(p[y++]=_,w=0,_=0))}f=!f}if(y!==a.getTotalCodewords())throw new j;return p}remask(){if(this.parsedFormatInfo===null)return;let o=tr.values[this.parsedFormatInfo.getDataMask()],a=this.bitMatrix.getHeight();o.unmaskBitMatrix(this.bitMatrix,a)}setMirror(o){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=o}mirror(){let o=this.bitMatrix;for(let a=0,c=o.getWidth();a<c;a++)for(let u=a+1,d=o.getHeight();u<d;u++)o.get(a,u)!==o.get(u,a)&&(o.flip(u,a),o.flip(a,u))}}class fp{constructor(o,a){this.numDataCodewords=o,this.codewords=a}static getDataBlocks(o,a,c){if(o.length!==a.getTotalCodewords())throw new m;let u=a.getECBlocksForLevel(c),d=0,f=u.getECBlocks();for(let T of f)d+=T.getCount();let p=new Array(d),y=0;for(let T of f)for(let M=0;M<T.getCount();M++){let R=T.getDataCodewords(),P=u.getECCodewordsPerBlock()+R;p[y++]=new fp(R,new Uint8Array(P))}let _=p[0].codewords.length,w=p.length-1;for(;w>=0&&p[w].codewords.length!==_;)w--;w++;let I=_-u.getECCodewordsPerBlock(),b=0;for(let T=0;T<I;T++)for(let M=0;M<y;M++)p[M].codewords[T]=o[b++];for(let T=w;T<y;T++)p[T].codewords[I]=o[b++];let A=p[0].codewords.length;for(let T=I;T<A;T++)for(let M=0;M<y;M++){let R=M<w?T:T+1;p[M].codewords[R]=o[b++]}return p}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var xr=function(v){return v[v.TERMINATOR=0]="TERMINATOR",v[v.NUMERIC=1]="NUMERIC",v[v.ALPHANUMERIC=2]="ALPHANUMERIC",v[v.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",v[v.BYTE=4]="BYTE",v[v.ECI=5]="ECI",v[v.KANJI=6]="KANJI",v[v.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",v[v.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",v[v.HANZI=9]="HANZI",v}(xr||{});class he{constructor(o,a,c,u){this.value=o,this.stringValue=a,this.characterCountBitsForVersions=c,this.bits=u,he.FOR_BITS.set(u,this),he.FOR_VALUE.set(o,this)}static forBits(o){let a=he.FOR_BITS.get(o);if(a===void 0)throw new m;return a}getCharacterCountBits(o){let a=o.getVersionNumber(),c;return a<=9?c=0:a<=26?c=1:c=2,this.characterCountBitsForVersions[c]}getValue(){return this.value}getBits(){return this.bits}equals(o){if(!(o instanceof he))return!1;let a=o;return this.value===a.value}toString(){return this.stringValue}}he.FOR_BITS=new Map,he.FOR_VALUE=new Map,he.TERMINATOR=new he(xr.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),he.NUMERIC=new he(xr.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),he.ALPHANUMERIC=new he(xr.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),he.STRUCTURED_APPEND=new he(xr.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),he.BYTE=new he(xr.BYTE,"BYTE",Int32Array.from([8,16,16]),4),he.ECI=new he(xr.ECI,"ECI",Int32Array.from([0,0,0]),7),he.KANJI=new he(xr.KANJI,"KANJI",Int32Array.from([8,10,12]),8),he.FNC1_FIRST_POSITION=new he(xr.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),he.FNC1_SECOND_POSITION=new he(xr.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),he.HANZI=new he(xr.HANZI,"HANZI",Int32Array.from([8,10,12]),13);let uv=(()=>{class v{static decode(a,c,u,d){let f=new dp(a),p=new mt,y=new Array,_=-1,w=-1;try{let I=null,b=!1,A;do{if(f.available()<4)A=he.TERMINATOR;else{let T=f.readBits(4);A=he.forBits(T)}switch(A){case he.TERMINATOR:break;case he.FNC1_FIRST_POSITION:case he.FNC1_SECOND_POSITION:b=!0;break;case he.STRUCTURED_APPEND:if(f.available()<16)throw new j;_=f.readBits(8),w=f.readBits(8);break;case he.ECI:let T=v.parseECIValue(f);if(I=W.getCharacterSetECIByValue(T),I===null)throw new j;break;case he.HANZI:let M=f.readBits(4),R=f.readBits(A.getCharacterCountBits(c));M===v.GB2312_SUBSET&&v.decodeHanziSegment(f,p,R);break;default:let P=f.readBits(A.getCharacterCountBits(c));switch(A){case he.NUMERIC:v.decodeNumericSegment(f,p,P);break;case he.ALPHANUMERIC:v.decodeAlphanumericSegment(f,p,P,b);break;case he.BYTE:v.decodeByteSegment(f,p,P,I,y,d);break;case he.KANJI:v.decodeKanjiSegment(f,p,P);break;default:throw new j}break}}while(A!==he.TERMINATOR)}catch{throw new j}return new Qa(a,p.toString(),y.length===0?null:y,u===null?null:u.toString(),_,w)}static decodeHanziSegment(a,c,u){if(u*13>a.available())throw new j;let d=new Uint8Array(2*u),f=0;for(;u>0;){let p=a.readBits(13),y=p/96<<8&4294967295|p%96;y<959?y+=41377:y+=42657,d[f]=y>>8&255,d[f+1]=y&255,f+=2,u--}try{c.append(Ft.decode(d,Ce.GB2312))}catch(p){throw new j(p)}}static decodeKanjiSegment(a,c,u){if(u*13>a.available())throw new j;let d=new Uint8Array(2*u),f=0;for(;u>0;){let p=a.readBits(13),y=p/192<<8&4294967295|p%192;y<7936?y+=33088:y+=49472,d[f]=y>>8,d[f+1]=y,f+=2,u--}try{c.append(Ft.decode(d,Ce.SHIFT_JIS))}catch(p){throw new j(p)}}static decodeByteSegment(a,c,u,d,f,p){if(8*u>a.available())throw new j;let y=new Uint8Array(u);for(let w=0;w<u;w++)y[w]=a.readBits(8);let _;d===null?_=Ce.guessEncoding(y,p):_=d.getName();try{c.append(Ft.decode(y,_))}catch(w){throw new j(w)}f.push(y)}static toAlphaNumericChar(a){if(a>=v.ALPHANUMERIC_CHARS.length)throw new j;return v.ALPHANUMERIC_CHARS[a]}static decodeAlphanumericSegment(a,c,u,d){let f=c.length();for(;u>1;){if(a.available()<11)throw new j;let p=a.readBits(11);c.append(v.toAlphaNumericChar(Math.floor(p/45))),c.append(v.toAlphaNumericChar(p%45)),u-=2}if(u===1){if(a.available()<6)throw new j;c.append(v.toAlphaNumericChar(a.readBits(6)))}if(d)for(let p=f;p<c.length();p++)c.charAt(p)==="%"&&(p<c.length()-1&&c.charAt(p+1)==="%"?c.deleteCharAt(p+1):c.setCharAt(p,""))}static decodeNumericSegment(a,c,u){for(;u>=3;){if(a.available()<10)throw new j;let d=a.readBits(10);if(d>=1e3)throw new j;c.append(v.toAlphaNumericChar(Math.floor(d/100))),c.append(v.toAlphaNumericChar(Math.floor(d/10)%10)),c.append(v.toAlphaNumericChar(d%10)),u-=3}if(u===2){if(a.available()<7)throw new j;let d=a.readBits(7);if(d>=100)throw new j;c.append(v.toAlphaNumericChar(Math.floor(d/10))),c.append(v.toAlphaNumericChar(d%10))}else if(u===1){if(a.available()<4)throw new j;let d=a.readBits(4);if(d>=10)throw new j;c.append(v.toAlphaNumericChar(d))}}static parseECIValue(a){let c=a.readBits(8);if(!(c&128))return c&127;if((c&192)===128){let u=a.readBits(8);return(c&63)<<8&4294967295|u}if((c&224)===192){let u=a.readBits(16);return(c&31)<<16&4294967295|u}throw new j}}return v.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",v.GB2312_SUBSET=1,v})();class dv{constructor(o){this.mirrored=o}isMirrored(){return this.mirrored}applyMirroredCorrection(o){if(!this.mirrored||o===null||o.length<3)return;let a=o[0];o[0]=o[2],o[2]=a}}class e2{constructor(){this.rsDecoder=new ec(nt.QR_CODE_FIELD_256)}decodeBooleanArray(o,a){return this.decodeBitMatrix(Kt.parseFromBooleanArray(o),a)}decodeBitMatrix(o,a){let c=new JT(o),u=null;try{return this.decodeBitMatrixParser(c,a)}catch(d){u=d}try{c.remask(),c.setMirror(!0),c.readVersion(),c.readFormatInformation(),c.mirror();let d=this.decodeBitMatrixParser(c,a);return d.setOther(new dv(!0)),d}catch(d){throw u!==null?u:d}}decodeBitMatrixParser(o,a){let c=o.readVersion(),u=o.readFormatInformation().getErrorCorrectionLevel(),d=o.readCodewords(),f=fp.getDataBlocks(d,c,u),p=0;for(let w of f)p+=w.getNumDataCodewords();let y=new Uint8Array(p),_=0;for(let w of f){let I=w.getCodewords(),b=w.getNumDataCodewords();this.correctErrors(I,b);for(let A=0;A<b;A++)y[_++]=I[A]}return uv.decode(y,c,u,a)}correctErrors(o,a){let c=new Int32Array(o);try{this.rsDecoder.decode(c,o.length-a)}catch{throw new E}for(let u=0;u<a;u++)o[u]=c[u]}}class hp extends oe{constructor(o,a,c){super(o,a),this.estimatedModuleSize=c}aboutEquals(o,a,c){if(Math.abs(a-this.getY())<=o&&Math.abs(c-this.getX())<=o){let u=Math.abs(o-this.estimatedModuleSize);return u<=1||u<=this.estimatedModuleSize}return!1}combineEstimate(o,a,c){let u=(this.getX()+a)/2,d=(this.getY()+o)/2,f=(this.estimatedModuleSize+c)/2;return new hp(u,d,f)}}class _u{constructor(o,a,c,u,d,f,p){this.image=o,this.startX=a,this.startY=c,this.width=u,this.height=d,this.moduleSize=f,this.resultPointCallback=p,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){let o=this.startX,a=this.height,c=this.width,u=o+c,d=this.startY+a/2,f=new Int32Array(3),p=this.image;for(let y=0;y<a;y++){let _=d+(y&1?-Math.floor((y+1)/2):Math.floor((y+1)/2));f[0]=0,f[1]=0,f[2]=0;let w=o;for(;w<u&&!p.get(w,_);)w++;let I=0;for(;w<u;){if(p.get(w,_))if(I===1)f[1]++;else if(I===2){if(this.foundPatternCross(f)){let b=this.handlePossibleCenter(f,_,w);if(b!==null)return b}f[0]=f[2],f[1]=1,f[2]=0,I=1}else f[++I]++;else I===1&&I++,f[I]++;w++}if(this.foundPatternCross(f)){let b=this.handlePossibleCenter(f,_,u);if(b!==null)return b}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new V}static centerFromEnd(o,a){return a-o[2]-o[1]/2}foundPatternCross(o){let a=this.moduleSize,c=a/2;for(let u=0;u<3;u++)if(Math.abs(a-o[u])>=c)return!1;return!0}crossCheckVertical(o,a,c,u){let d=this.image,f=d.getHeight(),p=this.crossCheckStateCount;p[0]=0,p[1]=0,p[2]=0;let y=o;for(;y>=0&&d.get(a,y)&&p[1]<=c;)p[1]++,y--;if(y<0||p[1]>c)return NaN;for(;y>=0&&!d.get(a,y)&&p[0]<=c;)p[0]++,y--;if(p[0]>c)return NaN;for(y=o+1;y<f&&d.get(a,y)&&p[1]<=c;)p[1]++,y++;if(y===f||p[1]>c)return NaN;for(;y<f&&!d.get(a,y)&&p[2]<=c;)p[2]++,y++;if(p[2]>c)return NaN;let _=p[0]+p[1]+p[2];return 5*Math.abs(_-u)>=2*u?NaN:this.foundPatternCross(p)?_u.centerFromEnd(p,y):NaN}handlePossibleCenter(o,a,c){let u=o[0]+o[1]+o[2],d=_u.centerFromEnd(o,c),f=this.crossCheckVertical(a,d,2*o[1],u);if(!isNaN(f)){let p=(o[0]+o[1]+o[2])/3;for(let _ of this.possibleCenters)if(_.aboutEquals(p,f,d))return _.combineEstimate(f,d,p);let y=new hp(d,f,p);this.possibleCenters.push(y),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(y)}return null}}class pp extends oe{constructor(o,a,c,u){super(o,a),this.estimatedModuleSize=c,this.count=u,u===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(o,a,c){if(Math.abs(a-this.getY())<=o&&Math.abs(c-this.getX())<=o){let u=Math.abs(o-this.estimatedModuleSize);return u<=1||u<=this.estimatedModuleSize}return!1}combineEstimate(o,a,c){let u=this.count+1,d=(this.count*this.getX()+a)/u,f=(this.count*this.getY()+o)/u,p=(this.count*this.estimatedModuleSize+c)/u;return new pp(d,f,p,u)}}class t2{constructor(o){this.bottomLeft=o[0],this.topLeft=o[1],this.topRight=o[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}let n2=(()=>{class v{constructor(a,c){this.image=a,this.resultPointCallback=c,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=c}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(a){let c=a!=null&&a.get(le.TRY_HARDER)!==void 0,u=a!=null&&a.get(le.PURE_BARCODE)!==void 0,d=this.image,f=d.getHeight(),p=d.getWidth(),y=Math.floor(3*f/(4*v.MAX_MODULES));(y<v.MIN_SKIP||c)&&(y=v.MIN_SKIP);let _=!1,w=new Int32Array(5);for(let b=y-1;b<f&&!_;b+=y){w[0]=0,w[1]=0,w[2]=0,w[3]=0,w[4]=0;let A=0;for(let T=0;T<p;T++)if(d.get(T,b))(A&1)===1&&A++,w[A]++;else if(A&1)w[A]++;else if(A===4)if(v.foundPatternCross(w)){if(this.handlePossibleCenter(w,b,T,u)===!0)if(y=2,this.hasSkipped===!0)_=this.haveMultiplyConfirmedCenters();else{let R=this.findRowSkip();R>w[2]&&(b+=R-w[2]-y,T=p-1)}else{w[0]=w[2],w[1]=w[3],w[2]=w[4],w[3]=1,w[4]=0,A=3;continue}A=0,w[0]=0,w[1]=0,w[2]=0,w[3]=0,w[4]=0}else w[0]=w[2],w[1]=w[3],w[2]=w[4],w[3]=1,w[4]=0,A=3;else w[++A]++;v.foundPatternCross(w)&&this.handlePossibleCenter(w,b,p,u)===!0&&(y=w[0],this.hasSkipped&&(_=this.haveMultiplyConfirmedCenters()))}let I=this.selectBestPatterns();return oe.orderBestPatterns(I),new t2(I)}static centerFromEnd(a,c){return c-a[4]-a[3]-a[2]/2}static foundPatternCross(a){let c=0;for(let f=0;f<5;f++){let p=a[f];if(p===0)return!1;c+=p}if(c<7)return!1;let u=c/7,d=u/2;return Math.abs(u-a[0])<d&&Math.abs(u-a[1])<d&&Math.abs(3*u-a[2])<3*d&&Math.abs(u-a[3])<d&&Math.abs(u-a[4])<d}getCrossCheckStateCount(){let a=this.crossCheckStateCount;return a[0]=0,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a}crossCheckDiagonal(a,c,u,d){let f=this.getCrossCheckStateCount(),p=0,y=this.image;for(;a>=p&&c>=p&&y.get(c-p,a-p);)f[2]++,p++;if(a<p||c<p)return!1;for(;a>=p&&c>=p&&!y.get(c-p,a-p)&&f[1]<=u;)f[1]++,p++;if(a<p||c<p||f[1]>u)return!1;for(;a>=p&&c>=p&&y.get(c-p,a-p)&&f[0]<=u;)f[0]++,p++;if(f[0]>u)return!1;let _=y.getHeight(),w=y.getWidth();for(p=1;a+p<_&&c+p<w&&y.get(c+p,a+p);)f[2]++,p++;if(a+p>=_||c+p>=w)return!1;for(;a+p<_&&c+p<w&&!y.get(c+p,a+p)&&f[3]<u;)f[3]++,p++;if(a+p>=_||c+p>=w||f[3]>=u)return!1;for(;a+p<_&&c+p<w&&y.get(c+p,a+p)&&f[4]<u;)f[4]++,p++;if(f[4]>=u)return!1;let I=f[0]+f[1]+f[2]+f[3]+f[4];return Math.abs(I-d)<2*d&&v.foundPatternCross(f)}crossCheckVertical(a,c,u,d){let f=this.image,p=f.getHeight(),y=this.getCrossCheckStateCount(),_=a;for(;_>=0&&f.get(c,_);)y[2]++,_--;if(_<0)return NaN;for(;_>=0&&!f.get(c,_)&&y[1]<=u;)y[1]++,_--;if(_<0||y[1]>u)return NaN;for(;_>=0&&f.get(c,_)&&y[0]<=u;)y[0]++,_--;if(y[0]>u)return NaN;for(_=a+1;_<p&&f.get(c,_);)y[2]++,_++;if(_===p)return NaN;for(;_<p&&!f.get(c,_)&&y[3]<u;)y[3]++,_++;if(_===p||y[3]>=u)return NaN;for(;_<p&&f.get(c,_)&&y[4]<u;)y[4]++,_++;if(y[4]>=u)return NaN;let w=y[0]+y[1]+y[2]+y[3]+y[4];return 5*Math.abs(w-d)>=2*d?NaN:v.foundPatternCross(y)?v.centerFromEnd(y,_):NaN}crossCheckHorizontal(a,c,u,d){let f=this.image,p=f.getWidth(),y=this.getCrossCheckStateCount(),_=a;for(;_>=0&&f.get(_,c);)y[2]++,_--;if(_<0)return NaN;for(;_>=0&&!f.get(_,c)&&y[1]<=u;)y[1]++,_--;if(_<0||y[1]>u)return NaN;for(;_>=0&&f.get(_,c)&&y[0]<=u;)y[0]++,_--;if(y[0]>u)return NaN;for(_=a+1;_<p&&f.get(_,c);)y[2]++,_++;if(_===p)return NaN;for(;_<p&&!f.get(_,c)&&y[3]<u;)y[3]++,_++;if(_===p||y[3]>=u)return NaN;for(;_<p&&f.get(_,c)&&y[4]<u;)y[4]++,_++;if(y[4]>=u)return NaN;let w=y[0]+y[1]+y[2]+y[3]+y[4];return 5*Math.abs(w-d)>=d?NaN:v.foundPatternCross(y)?v.centerFromEnd(y,_):NaN}handlePossibleCenter(a,c,u,d){let f=a[0]+a[1]+a[2]+a[3]+a[4],p=v.centerFromEnd(a,u),y=this.crossCheckVertical(c,Math.floor(p),a[2],f);if(!isNaN(y)&&(p=this.crossCheckHorizontal(Math.floor(p),Math.floor(y),a[2],f),!isNaN(p)&&(!d||this.crossCheckDiagonal(Math.floor(y),Math.floor(p),a[2],f)))){let _=f/7,w=!1,I=this.possibleCenters;for(let b=0,A=I.length;b<A;b++){let T=I[b];if(T.aboutEquals(_,y,p)){I[b]=T.combineEstimate(y,p,_),w=!0;break}}if(!w){let b=new pp(p,y,_);I.push(b),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(b)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let c=null;for(let u of this.possibleCenters)if(u.getCount()>=v.CENTER_QUORUM)if(c==null)c=u;else return this.hasSkipped=!0,Math.floor((Math.abs(c.getX()-u.getX())-Math.abs(c.getY()-u.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let a=0,c=0,u=this.possibleCenters.length;for(let p of this.possibleCenters)p.getCount()>=v.CENTER_QUORUM&&(a++,c+=p.getEstimatedModuleSize());if(a<3)return!1;let d=c/u,f=0;for(let p of this.possibleCenters)f+=Math.abs(p.getEstimatedModuleSize()-d);return f<=.05*c}selectBestPatterns(){let a=this.possibleCenters.length;if(a<3)throw new V;let c=this.possibleCenters,u;if(a>3){let d=0,f=0;for(let _ of this.possibleCenters){let w=_.getEstimatedModuleSize();d+=w,f+=w*w}u=d/a;let p=Math.sqrt(f/a-u*u);c.sort((_,w)=>{let I=Math.abs(w.getEstimatedModuleSize()-u),b=Math.abs(_.getEstimatedModuleSize()-u);return I<b?-1:I>b?1:0});let y=Math.max(.2*u,p);for(let _=0;_<c.length&&c.length>3;_++){let w=c[_];Math.abs(w.getEstimatedModuleSize()-u)>y&&(c.splice(_,1),_--)}}if(c.length>3){let d=0;for(let f of c)d+=f.getEstimatedModuleSize();u=d/c.length,c.sort((f,p)=>{if(p.getCount()===f.getCount()){let y=Math.abs(p.getEstimatedModuleSize()-u),_=Math.abs(f.getEstimatedModuleSize()-u);return y<_?1:y>_?-1:0}else return p.getCount()-f.getCount()}),c.splice(3)}return[c[0],c[1],c[2]]}}return v.CENTER_QUORUM=2,v.MIN_SKIP=3,v.MAX_MODULES=57,v})();class rc{constructor(o){this.image=o}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(o){this.resultPointCallback=o==null?null:o.get(le.NEED_RESULT_POINT_CALLBACK);let c=new n2(this.image,this.resultPointCallback).find(o);return this.processFinderPatternInfo(c)}processFinderPatternInfo(o){let a=o.getTopLeft(),c=o.getTopRight(),u=o.getBottomLeft(),d=this.calculateModuleSize(a,c,u);if(d<1)throw new V("No pattern found in proccess finder.");let f=rc.computeDimension(a,c,u,d),p=ce.getProvisionalVersionForDimension(f),y=p.getDimensionForVersion()-7,_=null;if(p.getAlignmentPatternCenters().length>0){let A=c.getX()-a.getX()+u.getX(),T=c.getY()-a.getY()+u.getY(),M=1-3/y,R=Math.floor(a.getX()+M*(A-a.getX())),P=Math.floor(a.getY()+M*(T-a.getY()));for(let q=4;q<=16;q<<=1)try{_=this.findAlignmentInRegion(d,R,P,q);break}catch(Q){if(!(Q instanceof V))throw Q}}let w=rc.createTransform(a,c,u,_,f),I=rc.sampleGrid(this.image,w,f),b;return _===null?b=[u,a,c]:b=[u,a,c,_],new du(I,b)}static createTransform(o,a,c,u,d){let f=d-3.5,p,y,_,w;return u!==null?(p=u.getX(),y=u.getY(),_=f-3,w=_):(p=a.getX()-o.getX()+c.getX(),y=a.getY()-o.getY()+c.getY(),_=f,w=f),Cr.quadrilateralToQuadrilateral(3.5,3.5,f,3.5,_,w,3.5,f,o.getX(),o.getY(),a.getX(),a.getY(),p,y,c.getX(),c.getY())}static sampleGrid(o,a,c){return zi.getInstance().sampleGridWithTransform(o,c,c,a)}static computeDimension(o,a,c,u){let d=Xe.round(oe.distance(o,a)/u),f=Xe.round(oe.distance(o,c)/u),p=Math.floor((d+f)/2)+7;switch(p&3){case 0:p++;break;case 2:p--;break;case 3:throw new V("Dimensions could be not found.")}return p}calculateModuleSize(o,a,c){return(this.calculateModuleSizeOneWay(o,a)+this.calculateModuleSizeOneWay(o,c))/2}calculateModuleSizeOneWay(o,a){let c=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(o.getX()),Math.floor(o.getY()),Math.floor(a.getX()),Math.floor(a.getY())),u=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(a.getX()),Math.floor(a.getY()),Math.floor(o.getX()),Math.floor(o.getY()));return isNaN(c)?u/7:isNaN(u)?c/7:(c+u)/14}sizeOfBlackWhiteBlackRunBothWays(o,a,c,u){let d=this.sizeOfBlackWhiteBlackRun(o,a,c,u),f=1,p=o-(c-o);p<0?(f=o/(o-p),p=0):p>=this.image.getWidth()&&(f=(this.image.getWidth()-1-o)/(p-o),p=this.image.getWidth()-1);let y=Math.floor(a-(u-a)*f);return f=1,y<0?(f=a/(a-y),y=0):y>=this.image.getHeight()&&(f=(this.image.getHeight()-1-a)/(y-a),y=this.image.getHeight()-1),p=Math.floor(o+(p-o)*f),d+=this.sizeOfBlackWhiteBlackRun(o,a,p,y),d-1}sizeOfBlackWhiteBlackRun(o,a,c,u){let d=Math.abs(u-a)>Math.abs(c-o);if(d){let A=o;o=a,a=A,A=c,c=u,u=A}let f=Math.abs(c-o),p=Math.abs(u-a),y=-f/2,_=o<c?1:-1,w=a<u?1:-1,I=0,b=c+_;for(let A=o,T=a;A!==b;A+=_){let M=d?T:A,R=d?A:T;if(I===1===this.image.get(M,R)){if(I===2)return Xe.distance(A,T,o,a);I++}if(y+=p,y>0){if(T===u)break;T+=w,y-=f}}return I===2?Xe.distance(c+_,u,o,a):NaN}findAlignmentInRegion(o,a,c,u){let d=Math.floor(u*o),f=Math.max(0,a-d),p=Math.min(this.image.getWidth()-1,a+d);if(p-f<o*3)throw new V("Alignment top exceeds estimated module size.");let y=Math.max(0,c-d),_=Math.min(this.image.getHeight()-1,c+d);if(_-y<o*3)throw new V("Alignment bottom exceeds estimated module size.");return new _u(this.image,f,y,p-f,_-y,o,this.resultPointCallback).find()}}class qi{constructor(){this.decoder=new e2}getDecoder(){return this.decoder}decode(o,a){let c,u;if(a!=null&&a.get(le.PURE_BARCODE)!==void 0){let y=qi.extractPureBits(o.getBlackMatrix());c=this.decoder.decodeBitMatrix(y,a),u=qi.NO_POINTS}else{let y=new rc(o.getBlackMatrix()).detect(a);c=this.decoder.decodeBitMatrix(y.getBits(),a),u=y.getPoints()}c.getOther()instanceof dv&&c.getOther().applyMirroredCorrection(u);let d=new bn(c.getText(),c.getRawBytes(),void 0,u,ge.QR_CODE,void 0),f=c.getByteSegments();f!==null&&d.putMetadata(en.BYTE_SEGMENTS,f);let p=c.getECLevel();return p!==null&&d.putMetadata(en.ERROR_CORRECTION_LEVEL,p),c.hasStructuredAppend()&&(d.putMetadata(en.STRUCTURED_APPEND_SEQUENCE,c.getStructuredAppendSequenceNumber()),d.putMetadata(en.STRUCTURED_APPEND_PARITY,c.getStructuredAppendParity())),d}reset(){}static extractPureBits(o){let a=o.getTopLeftOnBit(),c=o.getBottomRightOnBit();if(a===null||c===null)throw new V;let u=this.moduleSize(a,o),d=a[1],f=c[1],p=a[0],y=c[0];if(p>=y||d>=f)throw new V;if(f-d!==y-p&&(y=p+(f-d),y>=o.getWidth()))throw new V;let _=Math.round((y-p+1)/u),w=Math.round((f-d+1)/u);if(_<=0||w<=0)throw new V;if(w!==_)throw new V;let I=Math.floor(u/2);d+=I,p+=I;let b=p+Math.floor((_-1)*u)-y;if(b>0){if(b>I)throw new V;p-=b}let A=d+Math.floor((w-1)*u)-f;if(A>0){if(A>I)throw new V;d-=A}let T=new Kt(_,w);for(let M=0;M<w;M++){let R=d+Math.floor(M*u);for(let P=0;P<_;P++)o.get(p+Math.floor(P*u),R)&&T.set(P,M)}return T}static moduleSize(o,a){let c=a.getHeight(),u=a.getWidth(),d=o[0],f=o[1],p=!0,y=0;for(;d<u&&f<c;){if(p!==a.get(d,f)){if(++y===5)break;p=!p}d++,f++}if(d===u||f===c)throw new V;return(d-o[0])/7}}qi.NO_POINTS=new Array;class we{PDF417Common(){}static getBitCountSum(o){return Xe.sum(o)}static toIntArray(o){if(o==null||!o.length)return we.EMPTY_INT_ARRAY;let a=new Int32Array(o.length),c=0;for(let u of o)a[c++]=u;return a}static getCodeword(o){let a=G.binarySearch(we.SYMBOL_TABLE,o&262143);return a<0?-1:(we.CODEWORD_TABLE[a]-1)%we.NUMBER_OF_CODEWORDS}}we.NUMBER_OF_CODEWORDS=929,we.MAX_CODEWORDS_IN_BARCODE=we.NUMBER_OF_CODEWORDS-1,we.MIN_ROWS_IN_BARCODE=3,we.MAX_ROWS_IN_BARCODE=90,we.MODULES_IN_CODEWORD=17,we.MODULES_IN_STOP_PATTERN=18,we.BARS_IN_MODULE=8,we.EMPTY_INT_ARRAY=new Int32Array([]),we.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),we.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class r2{constructor(o,a){this.bits=o,this.points=a}getBits(){return this.bits}getPoints(){return this.points}}class Re{static detectMultiple(o,a,c){let u=o.getBlackMatrix(),d=Re.detect(c,u);return d.length||(u=u.clone(),u.rotate180(),d=Re.detect(c,u)),new r2(u,d)}static detect(o,a){let c=new Array,u=0,d=0,f=!1;for(;u<a.getHeight();){let p=Re.findVertices(a,u,d);if(p[0]==null&&p[3]==null){if(!f)break;f=!1,d=0;for(let y of c)y[1]!=null&&(u=Math.trunc(Math.max(u,y[1].getY()))),y[3]!=null&&(u=Math.max(u,Math.trunc(y[3].getY())));u+=Re.ROW_STEP;continue}if(f=!0,c.push(p),!o)break;p[2]!=null?(d=Math.trunc(p[2].getX()),u=Math.trunc(p[2].getY())):(d=Math.trunc(p[4].getX()),u=Math.trunc(p[4].getY()))}return c}static findVertices(o,a,c){let u=o.getHeight(),d=o.getWidth(),f=new Array(8);return Re.copyToResult(f,Re.findRowsWithPattern(o,u,d,a,c,Re.START_PATTERN),Re.INDEXES_START_PATTERN),f[4]!=null&&(c=Math.trunc(f[4].getX()),a=Math.trunc(f[4].getY())),Re.copyToResult(f,Re.findRowsWithPattern(o,u,d,a,c,Re.STOP_PATTERN),Re.INDEXES_STOP_PATTERN),f}static copyToResult(o,a,c){for(let u=0;u<c.length;u++)o[c[u]]=a[u]}static findRowsWithPattern(o,a,c,u,d,f){let p=new Array(4),y=!1,_=new Int32Array(f.length);for(;u<a;u+=Re.ROW_STEP){let I=Re.findGuardPattern(o,d,u,c,!1,f,_);if(I!=null){for(;u>0;){let b=Re.findGuardPattern(o,d,--u,c,!1,f,_);if(b!=null)I=b;else{u++;break}}p[0]=new oe(I[0],u),p[1]=new oe(I[1],u),y=!0;break}}let w=u+1;if(y){let I=0,b=Int32Array.from([Math.trunc(p[0].getX()),Math.trunc(p[1].getX())]);for(;w<a;w++){let A=Re.findGuardPattern(o,b[0],w,c,!1,f,_);if(A!=null&&Math.abs(b[0]-A[0])<Re.MAX_PATTERN_DRIFT&&Math.abs(b[1]-A[1])<Re.MAX_PATTERN_DRIFT)b=A,I=0;else{if(I>Re.SKIPPED_ROW_COUNT_MAX)break;I++}}w-=I+1,p[2]=new oe(b[0],w),p[3]=new oe(b[1],w)}return w-u<Re.BARCODE_MIN_HEIGHT&&G.fill(p,null),p}static findGuardPattern(o,a,c,u,d,f,p){G.fillWithin(p,0,p.length,0);let y=a,_=0;for(;o.get(y,c)&&y>0&&_++<Re.MAX_PIXEL_DRIFT;)y--;let w=y,I=0,b=f.length;for(let A=d;w<u;w++)if(o.get(w,c)!==A)p[I]++;else{if(I===b-1){if(Re.patternMatchVariance(p,f,Re.MAX_INDIVIDUAL_VARIANCE)<Re.MAX_AVG_VARIANCE)return new Int32Array([y,w]);y+=p[0]+p[1],D.arraycopy(p,2,p,0,I-1),p[I-1]=0,p[I]=0,I--}else I++;p[I]=1,A=!A}return I===b-1&&Re.patternMatchVariance(p,f,Re.MAX_INDIVIDUAL_VARIANCE)<Re.MAX_AVG_VARIANCE?new Int32Array([y,w-1]):null}static patternMatchVariance(o,a,c){let u=o.length,d=0,f=0;for(let _=0;_<u;_++)d+=o[_],f+=a[_];if(d<f)return 1/0;let p=d/f;c*=p;let y=0;for(let _=0;_<u;_++){let w=o[_],I=a[_]*p,b=w>I?w-I:I-w;if(b>c)return 1/0;y+=b}return y/d}}Re.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),Re.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),Re.MAX_AVG_VARIANCE=.42,Re.MAX_INDIVIDUAL_VARIANCE=.8,Re.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),Re.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),Re.MAX_PIXEL_DRIFT=3,Re.MAX_PATTERN_DRIFT=5,Re.SKIPPED_ROW_COUNT_MAX=25,Re.ROW_STEP=5,Re.BARCODE_MIN_HEIGHT=10;class sn{constructor(o,a){if(a.length===0)throw new m;this.field=o;let c=a.length;if(c>1&&a[0]===0){let u=1;for(;u<c&&a[u]===0;)u++;u===c?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(c-u),D.arraycopy(a,u,this.coefficients,0,this.coefficients.length))}else this.coefficients=a}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(o){return this.coefficients[this.coefficients.length-1-o]}evaluateAt(o){if(o===0)return this.getCoefficient(0);if(o===1){let u=0;for(let d of this.coefficients)u=this.field.add(u,d);return u}let a=this.coefficients[0],c=this.coefficients.length;for(let u=1;u<c;u++)a=this.field.add(this.field.multiply(o,a),this.coefficients[u]);return a}add(o){if(!this.field.equals(o.field))throw new m("ModulusPolys do not have same ModulusGF field");if(this.isZero())return o;if(o.isZero())return this;let a=this.coefficients,c=o.coefficients;if(a.length>c.length){let f=a;a=c,c=f}let u=new Int32Array(c.length),d=c.length-a.length;D.arraycopy(c,0,u,0,d);for(let f=d;f<c.length;f++)u[f]=this.field.add(a[f-d],c[f]);return new sn(this.field,u)}subtract(o){if(!this.field.equals(o.field))throw new m("ModulusPolys do not have same ModulusGF field");return o.isZero()?this:this.add(o.negative())}multiply(o){return o instanceof sn?this.multiplyOther(o):this.multiplyScalar(o)}multiplyOther(o){if(!this.field.equals(o.field))throw new m("ModulusPolys do not have same ModulusGF field");if(this.isZero()||o.isZero())return new sn(this.field,new Int32Array([0]));let a=this.coefficients,c=a.length,u=o.coefficients,d=u.length,f=new Int32Array(c+d-1);for(let p=0;p<c;p++){let y=a[p];for(let _=0;_<d;_++)f[p+_]=this.field.add(f[p+_],this.field.multiply(y,u[_]))}return new sn(this.field,f)}negative(){let o=this.coefficients.length,a=new Int32Array(o);for(let c=0;c<o;c++)a[c]=this.field.subtract(0,this.coefficients[c]);return new sn(this.field,a)}multiplyScalar(o){if(o===0)return new sn(this.field,new Int32Array([0]));if(o===1)return this;let a=this.coefficients.length,c=new Int32Array(a);for(let u=0;u<a;u++)c[u]=this.field.multiply(this.coefficients[u],o);return new sn(this.field,c)}multiplyByMonomial(o,a){if(o<0)throw new m;if(a===0)return new sn(this.field,new Int32Array([0]));let c=this.coefficients.length,u=new Int32Array(c+o);for(let d=0;d<c;d++)u[d]=this.field.multiply(this.coefficients[d],a);return new sn(this.field,u)}toString(){let o=new mt;for(let a=this.getDegree();a>=0;a--){let c=this.getCoefficient(a);c!==0&&(c<0?(o.append(" - "),c=-c):o.length()>0&&o.append(" + "),(a===0||c!==1)&&o.append(c),a!==0&&(a===1?o.append("x"):(o.append("x^"),o.append(a))))}return o.toString()}}class i2{add(o,a){return(o+a)%this.modulus}subtract(o,a){return(this.modulus+o-a)%this.modulus}exp(o){return this.expTable[o]}log(o){if(o===0)throw new m;return this.logTable[o]}inverse(o){if(o===0)throw new ep;return this.expTable[this.modulus-this.logTable[o]-1]}multiply(o,a){return o===0||a===0?0:this.expTable[(this.logTable[o]+this.logTable[a])%(this.modulus-1)]}getSize(){return this.modulus}equals(o){return o===this}}class gp extends i2{constructor(o,a){super(),this.modulus=o,this.expTable=new Int32Array(o),this.logTable=new Int32Array(o);let c=1;for(let u=0;u<o;u++)this.expTable[u]=c,c=c*a%o;for(let u=0;u<o-1;u++)this.logTable[this.expTable[u]]=u;this.zero=new sn(this,new Int32Array([0])),this.one=new sn(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(o,a){if(o<0)throw new m;if(a===0)return this.zero;let c=new Int32Array(o+1);return c[0]=a,new sn(this,c)}}gp.PDF417_GF=new gp(we.NUMBER_OF_CODEWORDS,3);class fv{constructor(){this.field=gp.PDF417_GF}decode(o,a,c){let u=new sn(this.field,o),d=new Int32Array(a),f=!1;for(let T=a;T>0;T--){let M=u.evaluateAt(this.field.exp(T));d[a-T]=M,M!==0&&(f=!0)}if(!f)return 0;let p=this.field.getOne();if(c!=null)for(let T of c){let M=this.field.exp(o.length-1-T),R=new sn(this.field,new Int32Array([this.field.subtract(0,M),1]));p=p.multiply(R)}let y=new sn(this.field,d),_=this.runEuclideanAlgorithm(this.field.buildMonomial(a,1),y,a),w=_[0],I=_[1],b=this.findErrorLocations(w),A=this.findErrorMagnitudes(I,w,b);for(let T=0;T<b.length;T++){let M=o.length-1-this.field.log(b[T]);if(M<0)throw E.getChecksumInstance();o[M]=this.field.subtract(o[M],A[T])}return b.length}runEuclideanAlgorithm(o,a,c){if(o.getDegree()<a.getDegree()){let b=o;o=a,a=b}let u=o,d=a,f=this.field.getZero(),p=this.field.getOne();for(;d.getDegree()>=Math.round(c/2);){let b=u,A=f;if(u=d,f=p,u.isZero())throw E.getChecksumInstance();d=b;let T=this.field.getZero(),M=u.getCoefficient(u.getDegree()),R=this.field.inverse(M);for(;d.getDegree()>=u.getDegree()&&!d.isZero();){let P=d.getDegree()-u.getDegree(),q=this.field.multiply(d.getCoefficient(d.getDegree()),R);T=T.add(this.field.buildMonomial(P,q)),d=d.subtract(u.multiplyByMonomial(P,q))}p=T.multiply(f).subtract(A).negative()}let y=p.getCoefficient(0);if(y===0)throw E.getChecksumInstance();let _=this.field.inverse(y),w=p.multiply(_),I=d.multiply(_);return[w,I]}findErrorLocations(o){let a=o.getDegree(),c=new Int32Array(a),u=0;for(let d=1;d<this.field.getSize()&&u<a;d++)o.evaluateAt(d)===0&&(c[u]=this.field.inverse(d),u++);if(u!==a)throw E.getChecksumInstance();return c}findErrorMagnitudes(o,a,c){let u=a.getDegree(),d=new Int32Array(u);for(let _=1;_<=u;_++)d[u-_]=this.field.multiply(_,a.getCoefficient(_));let f=new sn(this.field,d),p=c.length,y=new Int32Array(p);for(let _=0;_<p;_++){let w=this.field.inverse(c[_]),I=this.field.subtract(0,o.evaluateAt(w)),b=this.field.inverse(f.evaluateAt(w));y[_]=this.field.multiply(I,b)}return y}}class Oo{constructor(o,a,c,u,d){o instanceof Oo?this.constructor_2(o):this.constructor_1(o,a,c,u,d)}constructor_1(o,a,c,u,d){let f=a==null||c==null,p=u==null||d==null;if(f&&p)throw new V;f?(a=new oe(0,u.getY()),c=new oe(0,d.getY())):p&&(u=new oe(o.getWidth()-1,a.getY()),d=new oe(o.getWidth()-1,c.getY())),this.image=o,this.topLeft=a,this.bottomLeft=c,this.topRight=u,this.bottomRight=d,this.minX=Math.trunc(Math.min(a.getX(),c.getX())),this.maxX=Math.trunc(Math.max(u.getX(),d.getX())),this.minY=Math.trunc(Math.min(a.getY(),u.getY())),this.maxY=Math.trunc(Math.max(c.getY(),d.getY()))}constructor_2(o){this.image=o.image,this.topLeft=o.getTopLeft(),this.bottomLeft=o.getBottomLeft(),this.topRight=o.getTopRight(),this.bottomRight=o.getBottomRight(),this.minX=o.getMinX(),this.maxX=o.getMaxX(),this.minY=o.getMinY(),this.maxY=o.getMaxY()}static merge(o,a){return o==null?a:a==null?o:new Oo(o.image,o.topLeft,o.bottomLeft,a.topRight,a.bottomRight)}addMissingRows(o,a,c){let u=this.topLeft,d=this.bottomLeft,f=this.topRight,p=this.bottomRight;if(o>0){let y=c?this.topLeft:this.topRight,_=Math.trunc(y.getY()-o);_<0&&(_=0);let w=new oe(y.getX(),_);c?u=w:f=w}if(a>0){let y=c?this.bottomLeft:this.bottomRight,_=Math.trunc(y.getY()+a);_>=this.image.getHeight()&&(_=this.image.getHeight()-1);let w=new oe(y.getX(),_);c?d=w:p=w}return new Oo(this.image,u,d,f,p)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class o2{constructor(o,a,c,u){this.columnCount=o,this.errorCorrectionLevel=u,this.rowCountUpperPart=a,this.rowCountLowerPart=c,this.rowCount=a+c}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class ic{constructor(){this.buffer=""}static form(o,a){let c=-1;function u(f,p,y,_,w,I){if(f==="%%")return"%";if(a[++c]===void 0)return;f=_?parseInt(_.substr(1)):void 0;let b=w?parseInt(w.substr(1)):void 0,A;switch(I){case"s":A=a[c];break;case"c":A=a[c][0];break;case"f":A=parseFloat(a[c]).toFixed(f);break;case"p":A=parseFloat(a[c]).toPrecision(f);break;case"e":A=parseFloat(a[c]).toExponential(f);break;case"x":A=parseInt(a[c]).toString(b||16);break;case"d":A=parseFloat(parseInt(a[c],b||10).toPrecision(f)).toFixed(0);break}A=typeof A=="object"?JSON.stringify(A):(+A).toString(b);let T=parseInt(y),M=y&&y[0]+""=="0"?"0":" ";for(;A.length<T;)A=p!==void 0?A+M:M+A;return A}let d=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return o.replace(d,u)}format(o,...a){this.buffer+=ic.form(o,a)}toString(){return this.buffer}}let hv=(()=>{class v{constructor(a){this.boundingBox=new Oo(a),this.codewords=new Array(a.getMaxY()-a.getMinY()+1)}getCodewordNearby(a){let c=this.getCodeword(a);if(c!=null)return c;for(let u=1;u<v.MAX_NEARBY_DISTANCE;u++){let d=this.imageRowToCodewordIndex(a)-u;if(d>=0&&(c=this.codewords[d],c!=null)||(d=this.imageRowToCodewordIndex(a)+u,d<this.codewords.length&&(c=this.codewords[d],c!=null)))return c}return null}imageRowToCodewordIndex(a){return a-this.boundingBox.getMinY()}setCodeword(a,c){this.codewords[this.imageRowToCodewordIndex(a)]=c}getCodeword(a){return this.codewords[this.imageRowToCodewordIndex(a)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){let a=new ic,c=0;for(let u of this.codewords){if(u==null){a.format("%3d:    |   %n",c++);continue}a.format("%3d: %3d|%3d%n",c++,u.getRowNumber(),u.getValue())}return a.toString()}}return v.MAX_NEARBY_DISTANCE=5,v})();class oc{constructor(){this.values=new Map}setValue(o){o=Math.trunc(o);let a=this.values.get(o);a==null&&(a=0),a++,this.values.set(o,a)}getValue(){let o=-1,a=new Array;for(let[c,u]of this.values.entries()){let d={getKey:()=>c,getValue:()=>u};d.getValue()>o?(o=d.getValue(),a=[],a.push(d.getKey())):d.getValue()===o&&a.push(d.getKey())}return we.toIntArray(a)}getConfidence(o){return this.values.get(o)}}class pv extends hv{constructor(o,a){super(o),this._isLeft=a}setRowNumbers(){for(let o of this.getCodewords())o?.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(o){let a=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(a,o);let c=this.getBoundingBox(),u=this._isLeft?c.getTopLeft():c.getTopRight(),d=this._isLeft?c.getBottomLeft():c.getBottomRight(),f=this.imageRowToCodewordIndex(Math.trunc(u.getY())),p=this.imageRowToCodewordIndex(Math.trunc(d.getY())),y=-1,_=1,w=0;for(let I=f;I<p;I++){if(a[I]==null)continue;let b=a[I],A=b.getRowNumber()-y;if(A===0)w++;else if(A===1)_=Math.max(_,w),w=1,y=b.getRowNumber();else if(A<0||b.getRowNumber()>=o.getRowCount()||A>I)a[I]=null;else{let T;_>2?T=(_-2)*A:T=A;let M=T>=I;for(let R=1;R<=T&&!M;R++)M=a[I-R]!=null;M?a[I]=null:(y=b.getRowNumber(),w=1)}}}getRowHeights(){let o=this.getBarcodeMetadata();if(o==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(o);let a=new Int32Array(o.getRowCount());for(let c of this.getCodewords())if(c!=null){let u=c.getRowNumber();if(u>=a.length)continue;a[u]++}return a}adjustIncompleteIndicatorColumnRowNumbers(o){let a=this.getBoundingBox(),c=this._isLeft?a.getTopLeft():a.getTopRight(),u=this._isLeft?a.getBottomLeft():a.getBottomRight(),d=this.imageRowToCodewordIndex(Math.trunc(c.getY())),f=this.imageRowToCodewordIndex(Math.trunc(u.getY())),p=this.getCodewords(),y=-1;for(let _=d;_<f;_++){if(p[_]==null)continue;let w=p[_];w.setRowNumberAsRowIndicatorColumn();let I=w.getRowNumber()-y;I===0||(I===1?y=w.getRowNumber():w.getRowNumber()>=o.getRowCount()?p[_]=null:y=w.getRowNumber())}}getBarcodeMetadata(){let o=this.getCodewords(),a=new oc,c=new oc,u=new oc,d=new oc;for(let p of o){if(p==null)continue;p.setRowNumberAsRowIndicatorColumn();let y=p.getValue()%30,_=p.getRowNumber();switch(this._isLeft||(_+=2),_%3){case 0:c.setValue(y*3+1);break;case 1:d.setValue(y/3),u.setValue(y%3);break;case 2:a.setValue(y+1);break}}if(a.getValue().length===0||c.getValue().length===0||u.getValue().length===0||d.getValue().length===0||a.getValue()[0]<1||c.getValue()[0]+u.getValue()[0]<we.MIN_ROWS_IN_BARCODE||c.getValue()[0]+u.getValue()[0]>we.MAX_ROWS_IN_BARCODE)return null;let f=new o2(a.getValue()[0],c.getValue()[0],u.getValue()[0],d.getValue()[0]);return this.removeIncorrectCodewords(o,f),f}removeIncorrectCodewords(o,a){for(let c=0;c<o.length;c++){let u=o[c];if(o[c]==null)continue;let d=u.getValue()%30,f=u.getRowNumber();if(f>a.getRowCount()){o[c]=null;continue}switch(this._isLeft||(f+=2),f%3){case 0:d*3+1!==a.getRowCountUpperPart()&&(o[c]=null);break;case 1:(Math.trunc(d/3)!==a.getErrorCorrectionLevel()||d%3!==a.getRowCountLowerPart())&&(o[c]=null);break;case 2:d+1!==a.getColumnCount()&&(o[c]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class sc{constructor(o,a){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=o,this.barcodeColumnCount=o.getColumnCount(),this.boundingBox=a,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let o=we.MAX_CODEWORDS_IN_BARCODE,a;do a=o,o=this.adjustRowNumbersAndGetCount();while(o>0&&o<a);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(o){o?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let o=this.adjustRowNumbersByRow();if(o===0)return 0;for(let a=1;a<this.barcodeColumnCount+1;a++){let c=this.detectionResultColumns[a].getCodewords();for(let u=0;u<c.length;u++)c[u]!=null&&(c[u].hasValidRowNumber()||this.adjustRowNumbers(a,u,c))}return o}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let o=this.detectionResultColumns[0].getCodewords(),a=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let c=0;c<o.length;c++)if(o[c]!=null&&a[c]!=null&&o[c].getRowNumber()===a[c].getRowNumber())for(let u=1;u<=this.barcodeColumnCount;u++){let d=this.detectionResultColumns[u].getCodewords()[c];d!=null&&(d.setRowNumber(o[c].getRowNumber()),d.hasValidRowNumber()||(this.detectionResultColumns[u].getCodewords()[c]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let o=0,a=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let c=0;c<a.length;c++){if(a[c]==null)continue;let u=a[c].getRowNumber(),d=0;for(let f=this.barcodeColumnCount+1;f>0&&d<this.ADJUST_ROW_NUMBER_SKIP;f--){let p=this.detectionResultColumns[f].getCodewords()[c];p!=null&&(d=sc.adjustRowNumberIfValid(u,d,p),p.hasValidRowNumber()||o++)}}return o}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let o=0,a=this.detectionResultColumns[0].getCodewords();for(let c=0;c<a.length;c++){if(a[c]==null)continue;let u=a[c].getRowNumber(),d=0;for(let f=1;f<this.barcodeColumnCount+1&&d<this.ADJUST_ROW_NUMBER_SKIP;f++){let p=this.detectionResultColumns[f].getCodewords()[c];p!=null&&(d=sc.adjustRowNumberIfValid(u,d,p),p.hasValidRowNumber()||o++)}}return o}static adjustRowNumberIfValid(o,a,c){return c==null||c.hasValidRowNumber()||(c.isValidRowNumber(o)?(c.setRowNumber(o),a=0):++a),a}adjustRowNumbers(o,a,c){if(!this.detectionResultColumns[o-1])return;let u=c[a],d=this.detectionResultColumns[o-1].getCodewords(),f=d;this.detectionResultColumns[o+1]!=null&&(f=this.detectionResultColumns[o+1].getCodewords());let p=new Array(14);p[2]=d[a],p[3]=f[a],a>0&&(p[0]=c[a-1],p[4]=d[a-1],p[5]=f[a-1]),a>1&&(p[8]=c[a-2],p[10]=d[a-2],p[11]=f[a-2]),a<c.length-1&&(p[1]=c[a+1],p[6]=d[a+1],p[7]=f[a+1]),a<c.length-2&&(p[9]=c[a+2],p[12]=d[a+2],p[13]=f[a+2]);for(let y of p)if(sc.adjustRowNumber(u,y))return}static adjustRowNumber(o,a){return a==null?!1:a.hasValidRowNumber()&&a.getBucket()===o.getBucket()?(o.setRowNumber(a.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(o){this.boundingBox=o}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(o,a){this.detectionResultColumns[o]=a}getDetectionResultColumn(o){return this.detectionResultColumns[o]}toString(){let o=this.detectionResultColumns[0];o==null&&(o=this.detectionResultColumns[this.barcodeColumnCount+1]);let a=new ic;for(let c=0;c<o.getCodewords().length;c++){a.format("CW %3d:",c);for(let u=0;u<this.barcodeColumnCount+2;u++){if(this.detectionResultColumns[u]==null){a.format("    |   ");continue}let d=this.detectionResultColumns[u].getCodewords()[c];if(d==null){a.format("    |   ");continue}a.format(" %3d|%3d",d.getRowNumber(),d.getValue())}a.format("%n")}return a.toString()}}let s2=(()=>{class v{constructor(a,c,u,d){this.rowNumber=v.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(a),this.endX=Math.trunc(c),this.bucket=Math.trunc(u),this.value=Math.trunc(d)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(a){return a!==v.BARCODE_ROW_UNKNOWN&&this.bucket===a%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(a){this.rowNumber=a}toString(){return this.rowNumber+"|"+this.value}}return v.BARCODE_ROW_UNKNOWN=-1,v})();class Rn{static initialize(){for(let o=0;o<we.SYMBOL_TABLE.length;o++){let a=we.SYMBOL_TABLE[o],c=a&1;for(let u=0;u<we.BARS_IN_MODULE;u++){let d=0;for(;(a&1)===c;)d+=1,a>>=1;c=a&1,Rn.RATIOS_TABLE[o]||(Rn.RATIOS_TABLE[o]=new Array(we.BARS_IN_MODULE)),Rn.RATIOS_TABLE[o][we.BARS_IN_MODULE-u-1]=Math.fround(d/we.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(o){let a=Rn.getDecodedCodewordValue(Rn.sampleBitCounts(o));return a!==-1?a:Rn.getClosestDecodedValue(o)}static sampleBitCounts(o){let a=Xe.sum(o),c=new Int32Array(we.BARS_IN_MODULE),u=0,d=0;for(let f=0;f<we.MODULES_IN_CODEWORD;f++){let p=a/(2*we.MODULES_IN_CODEWORD)+f*a/we.MODULES_IN_CODEWORD;d+o[u]<=p&&(d+=o[u],u++),c[u]++}return c}static getDecodedCodewordValue(o){let a=Rn.getBitValue(o);return we.getCodeword(a)===-1?-1:a}static getBitValue(o){let a=0;for(let c=0;c<o.length;c++)for(let u=0;u<o[c];u++)a=a<<1|(c%2===0?1:0);return Math.trunc(a)}static getClosestDecodedValue(o){let a=Xe.sum(o),c=new Array(we.BARS_IN_MODULE);if(a>1)for(let f=0;f<c.length;f++)c[f]=Math.fround(o[f]/a);let u=uu.MAX_VALUE,d=-1;this.bSymbolTableReady||Rn.initialize();for(let f=0;f<Rn.RATIOS_TABLE.length;f++){let p=0,y=Rn.RATIOS_TABLE[f];for(let _=0;_<we.BARS_IN_MODULE;_++){let w=Math.fround(y[_]-c[_]);if(p+=Math.fround(w*w),p>=u)break}p<u&&(u=p,d=we.SYMBOL_TABLE[f])}return d}}Rn.bSymbolTableReady=!1,Rn.RATIOS_TABLE=new Array(we.SYMBOL_TABLE.length).map(v=>v=new Array(we.BARS_IN_MODULE));class gv{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(o){this.segmentIndex=o}getFileId(){return this.fileId}setFileId(o){this.fileId=o}getOptionalData(){return this.optionalData}setOptionalData(o){this.optionalData=o}isLastSegment(){return this.lastSegment}setLastSegment(o){this.lastSegment=o}getSegmentCount(){return this.segmentCount}setSegmentCount(o){this.segmentCount=o}getSender(){return this.sender||null}setSender(o){this.sender=o}getAddressee(){return this.addressee||null}setAddressee(o){this.addressee=o}getFileName(){return this.fileName}setFileName(o){this.fileName=o}getFileSize(){return this.fileSize}setFileSize(o){this.fileSize=o}getChecksum(){return this.checksum}setChecksum(o){this.checksum=o}getTimestamp(){return this.timestamp}setTimestamp(o){this.timestamp=o}}class mv{static parseLong(o,a=void 0){return parseInt(o,a)}}let a2=(()=>{class v extends h{}return v.kind="NullPointerException",v})();class c2{writeBytes(o){this.writeBytesOffset(o,0,o.length)}writeBytesOffset(o,a,c){if(o==null)throw new a2;if(a<0||a>o.length||c<0||a+c>o.length||a+c<0)throw new N;if(c===0)return;for(let u=0;u<c;u++)this.write(o[a+u])}flush(){}close(){}}class l2 extends h{}class u2 extends c2{constructor(o=32){if(super(),this.count=0,o<0)throw new m("Negative initial size: "+o);this.buf=new Uint8Array(o)}ensureCapacity(o){o-this.buf.length>0&&this.grow(o)}grow(o){let c=this.buf.length<<1;if(c-o<0&&(c=o),c<0){if(o<0)throw new l2;c=z.MAX_VALUE}this.buf=G.copyOfUint8Array(this.buf,c)}write(o){this.ensureCapacity(this.count+1),this.buf[this.count]=o,this.count+=1}writeBytesOffset(o,a,c){if(a<0||a>o.length||c<0||a+c-o.length>0)throw new N;this.ensureCapacity(this.count+c),D.arraycopy(o,a,this.buf,this.count,c),this.count+=c}writeTo(o){o.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return G.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(o){return o?typeof o=="string"?this.toString_string(o):this.toString_number(o):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(o){return new String(this.buf).toString()}toString_number(o){return new String(this.buf).toString()}close(){}}var _t=function(v){return v[v.ALPHA=0]="ALPHA",v[v.LOWER=1]="LOWER",v[v.MIXED=2]="MIXED",v[v.PUNCT=3]="PUNCT",v[v.ALPHA_SHIFT=4]="ALPHA_SHIFT",v[v.PUNCT_SHIFT=5]="PUNCT_SHIFT",v}(_t||{});function yv(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let vu;function Yi(v){if(typeof vu>"u"&&(vu=yv()),vu===null)throw new Error("BigInt is not supported!");return vu(v)}function d2(){let v=[];v[0]=Yi(1);let o=Yi(900);v[1]=o;for(let a=2;a<16;a++)v[a]=v[a-1]*o;return v}class k{static decode(o,a){let c=new mt(""),u=W.ISO8859_1;c.enableDecoding(u);let d=1,f=o[d++],p=new gv;for(;d<o[0];){switch(f){case k.TEXT_COMPACTION_MODE_LATCH:d=k.textCompaction(o,d,c);break;case k.BYTE_COMPACTION_MODE_LATCH:case k.BYTE_COMPACTION_MODE_LATCH_6:d=k.byteCompaction(f,o,u,d,c);break;case k.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(o[d++]);break;case k.NUMERIC_COMPACTION_MODE_LATCH:d=k.numericCompaction(o,d,c);break;case k.ECI_CHARSET:let _=W.getCharacterSetECIByValue(o[d++]);break;case k.ECI_GENERAL_PURPOSE:d+=2;break;case k.ECI_USER_DEFINED:d++;break;case k.BEGIN_MACRO_PDF417_CONTROL_BLOCK:d=k.decodeMacroBlock(o,d,p);break;case k.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case k.MACRO_PDF417_TERMINATOR:throw new j;default:d--,d=k.textCompaction(o,d,c);break}if(d<o.length)f=o[d++];else throw j.getFormatInstance()}if(c.length()===0)throw j.getFormatInstance();let y=new Qa(null,c.toString(),null,a);return y.setOther(p),y}static decodeMacroBlock(o,a,c){if(a+k.NUMBER_OF_SEQUENCE_CODEWORDS>o[0])throw j.getFormatInstance();let u=new Int32Array(k.NUMBER_OF_SEQUENCE_CODEWORDS);for(let p=0;p<k.NUMBER_OF_SEQUENCE_CODEWORDS;p++,a++)u[p]=o[a];c.setSegmentIndex(z.parseInt(k.decodeBase900toBase10(u,k.NUMBER_OF_SEQUENCE_CODEWORDS)));let d=new mt;a=k.textCompaction(o,a,d),c.setFileId(d.toString());let f=-1;for(o[a]===k.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(f=a+1);a<o[0];)switch(o[a]){case k.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(a++,o[a]){case k.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let p=new mt;a=k.textCompaction(o,a+1,p),c.setFileName(p.toString());break;case k.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let y=new mt;a=k.textCompaction(o,a+1,y),c.setSender(y.toString());break;case k.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let _=new mt;a=k.textCompaction(o,a+1,_),c.setAddressee(_.toString());break;case k.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let w=new mt;a=k.numericCompaction(o,a+1,w),c.setSegmentCount(z.parseInt(w.toString()));break;case k.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let I=new mt;a=k.numericCompaction(o,a+1,I),c.setTimestamp(mv.parseLong(I.toString()));break;case k.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let b=new mt;a=k.numericCompaction(o,a+1,b),c.setChecksum(z.parseInt(b.toString()));break;case k.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let A=new mt;a=k.numericCompaction(o,a+1,A),c.setFileSize(mv.parseLong(A.toString()));break;default:throw j.getFormatInstance()}break;case k.MACRO_PDF417_TERMINATOR:a++,c.setLastSegment(!0);break;default:throw j.getFormatInstance()}if(f!==-1){let p=a-f;c.isLastSegment()&&p--,c.setOptionalData(G.copyOfRange(o,f,f+p))}return a}static textCompaction(o,a,c){let u=new Int32Array((o[0]-a)*2),d=new Int32Array((o[0]-a)*2),f=0,p=!1;for(;a<o[0]&&!p;){let y=o[a++];if(y<k.TEXT_COMPACTION_MODE_LATCH)u[f]=y/30,u[f+1]=y%30,f+=2;else switch(y){case k.TEXT_COMPACTION_MODE_LATCH:u[f++]=k.TEXT_COMPACTION_MODE_LATCH;break;case k.BYTE_COMPACTION_MODE_LATCH:case k.BYTE_COMPACTION_MODE_LATCH_6:case k.NUMERIC_COMPACTION_MODE_LATCH:case k.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case k.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case k.MACRO_PDF417_TERMINATOR:a--,p=!0;break;case k.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u[f]=k.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,y=o[a++],d[f]=y,f++;break}}return k.decodeTextCompaction(u,d,f,c),a}static decodeTextCompaction(o,a,c,u){let d=_t.ALPHA,f=_t.ALPHA,p=0;for(;p<c;){let y=o[p],_="";switch(d){case _t.ALPHA:if(y<26)_=String.fromCharCode(65+y);else switch(y){case 26:_=" ";break;case k.LL:d=_t.LOWER;break;case k.ML:d=_t.MIXED;break;case k.PS:f=d,d=_t.PUNCT_SHIFT;break;case k.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(a[p]);break;case k.TEXT_COMPACTION_MODE_LATCH:d=_t.ALPHA;break}break;case _t.LOWER:if(y<26)_=String.fromCharCode(97+y);else switch(y){case 26:_=" ";break;case k.AS:f=d,d=_t.ALPHA_SHIFT;break;case k.ML:d=_t.MIXED;break;case k.PS:f=d,d=_t.PUNCT_SHIFT;break;case k.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(a[p]);break;case k.TEXT_COMPACTION_MODE_LATCH:d=_t.ALPHA;break}break;case _t.MIXED:if(y<k.PL)_=k.MIXED_CHARS[y];else switch(y){case k.PL:d=_t.PUNCT;break;case 26:_=" ";break;case k.LL:d=_t.LOWER;break;case k.AL:d=_t.ALPHA;break;case k.PS:f=d,d=_t.PUNCT_SHIFT;break;case k.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(a[p]);break;case k.TEXT_COMPACTION_MODE_LATCH:d=_t.ALPHA;break}break;case _t.PUNCT:if(y<k.PAL)_=k.PUNCT_CHARS[y];else switch(y){case k.PAL:d=_t.ALPHA;break;case k.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(a[p]);break;case k.TEXT_COMPACTION_MODE_LATCH:d=_t.ALPHA;break}break;case _t.ALPHA_SHIFT:if(d=f,y<26)_=String.fromCharCode(65+y);else switch(y){case 26:_=" ";break;case k.TEXT_COMPACTION_MODE_LATCH:d=_t.ALPHA;break}break;case _t.PUNCT_SHIFT:if(d=f,y<k.PAL)_=k.PUNCT_CHARS[y];else switch(y){case k.PAL:d=_t.ALPHA;break;case k.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(a[p]);break;case k.TEXT_COMPACTION_MODE_LATCH:d=_t.ALPHA;break}break}_!==""&&u.append(_),p++}}static byteCompaction(o,a,c,u,d){let f=new u2,p=0,y=0,_=!1;switch(o){case k.BYTE_COMPACTION_MODE_LATCH:let w=new Int32Array(6),I=a[u++];for(;u<a[0]&&!_;)switch(w[p++]=I,y=900*y+I,I=a[u++],I){case k.TEXT_COMPACTION_MODE_LATCH:case k.BYTE_COMPACTION_MODE_LATCH:case k.NUMERIC_COMPACTION_MODE_LATCH:case k.BYTE_COMPACTION_MODE_LATCH_6:case k.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case k.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case k.MACRO_PDF417_TERMINATOR:u--,_=!0;break;default:if(p%5===0&&p>0){for(let b=0;b<6;++b)f.write(Number(Yi(y)>>Yi(8*(5-b))));y=0,p=0}break}u===a[0]&&I<k.TEXT_COMPACTION_MODE_LATCH&&(w[p++]=I);for(let b=0;b<p;b++)f.write(w[b]);break;case k.BYTE_COMPACTION_MODE_LATCH_6:for(;u<a[0]&&!_;){let b=a[u++];if(b<k.TEXT_COMPACTION_MODE_LATCH)p++,y=900*y+b;else switch(b){case k.TEXT_COMPACTION_MODE_LATCH:case k.BYTE_COMPACTION_MODE_LATCH:case k.NUMERIC_COMPACTION_MODE_LATCH:case k.BYTE_COMPACTION_MODE_LATCH_6:case k.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case k.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case k.MACRO_PDF417_TERMINATOR:u--,_=!0;break}if(p%5===0&&p>0){for(let A=0;A<6;++A)f.write(Number(Yi(y)>>Yi(8*(5-A))));y=0,p=0}}break}return d.append(Ft.decode(f.toByteArray(),c)),u}static numericCompaction(o,a,c){let u=0,d=!1,f=new Int32Array(k.MAX_NUMERIC_CODEWORDS);for(;a<o[0]&&!d;){let p=o[a++];if(a===o[0]&&(d=!0),p<k.TEXT_COMPACTION_MODE_LATCH)f[u]=p,u++;else switch(p){case k.TEXT_COMPACTION_MODE_LATCH:case k.BYTE_COMPACTION_MODE_LATCH:case k.BYTE_COMPACTION_MODE_LATCH_6:case k.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case k.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case k.MACRO_PDF417_TERMINATOR:a--,d=!0;break}(u%k.MAX_NUMERIC_CODEWORDS===0||p===k.NUMERIC_COMPACTION_MODE_LATCH||d)&&u>0&&(c.append(k.decodeBase900toBase10(f,u)),u=0)}return a}static decodeBase900toBase10(o,a){let c=Yi(0);for(let d=0;d<a;d++)c+=k.EXP900[a-d-1]*Yi(o[d]);let u=c.toString();if(u.charAt(0)!=="1")throw new j;return u.substring(1)}}k.TEXT_COMPACTION_MODE_LATCH=900,k.BYTE_COMPACTION_MODE_LATCH=901,k.NUMERIC_COMPACTION_MODE_LATCH=902,k.BYTE_COMPACTION_MODE_LATCH_6=924,k.ECI_USER_DEFINED=925,k.ECI_GENERAL_PURPOSE=926,k.ECI_CHARSET=927,k.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,k.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,k.MACRO_PDF417_TERMINATOR=922,k.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,k.MAX_NUMERIC_CODEWORDS=15,k.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,k.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,k.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,k.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,k.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,k.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,k.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,k.PL=25,k.LL=27,k.AS=27,k.ML=28,k.AL=28,k.PS=29,k.PAL=29,k.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,k.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",k.EXP900=yv()?d2():[],k.NUMBER_OF_SEQUENCE_CODEWORDS=2;class Pe{constructor(){}static decode(o,a,c,u,d,f,p){let y=new Oo(o,a,c,u,d),_=null,w=null,I;for(let T=!0;;T=!1){if(a!=null&&(_=Pe.getRowIndicatorColumn(o,y,a,!0,f,p)),u!=null&&(w=Pe.getRowIndicatorColumn(o,y,u,!1,f,p)),I=Pe.merge(_,w),I==null)throw V.getNotFoundInstance();let M=I.getBoundingBox();if(T&&M!=null&&(M.getMinY()<y.getMinY()||M.getMaxY()>y.getMaxY()))y=M;else break}I.setBoundingBox(y);let b=I.getBarcodeColumnCount()+1;I.setDetectionResultColumn(0,_),I.setDetectionResultColumn(b,w);let A=_!=null;for(let T=1;T<=b;T++){let M=A?T:b-T;if(I.getDetectionResultColumn(M)!==void 0)continue;let R;M===0||M===b?R=new pv(y,M===0):R=new hv(y),I.setDetectionResultColumn(M,R);let P=-1,q=P;for(let Q=y.getMinY();Q<=y.getMaxY();Q++){if(P=Pe.getStartColumn(I,M,Q,A),P<0||P>y.getMaxX()){if(q===-1)continue;P=q}let B=Pe.detectCodeword(o,y.getMinX(),y.getMaxX(),A,P,Q,f,p);B!=null&&(R.setCodeword(Q,B),q=P,f=Math.min(f,B.getWidth()),p=Math.max(p,B.getWidth()))}}return Pe.createDecoderResult(I)}static merge(o,a){if(o==null&&a==null)return null;let c=Pe.getBarcodeMetadata(o,a);if(c==null)return null;let u=Oo.merge(Pe.adjustBoundingBox(o),Pe.adjustBoundingBox(a));return new sc(c,u)}static adjustBoundingBox(o){if(o==null)return null;let a=o.getRowHeights();if(a==null)return null;let c=Pe.getMax(a),u=0;for(let p of a)if(u+=c-p,p>0)break;let d=o.getCodewords();for(let p=0;u>0&&d[p]==null;p++)u--;let f=0;for(let p=a.length-1;p>=0&&(f+=c-a[p],!(a[p]>0));p--);for(let p=d.length-1;f>0&&d[p]==null;p--)f--;return o.getBoundingBox().addMissingRows(u,f,o.isLeft())}static getMax(o){let a=-1;for(let c of o)a=Math.max(a,c);return a}static getBarcodeMetadata(o,a){let c;if(o==null||(c=o.getBarcodeMetadata())==null)return a==null?null:a.getBarcodeMetadata();let u;return a==null||(u=a.getBarcodeMetadata())==null?c:c.getColumnCount()!==u.getColumnCount()&&c.getErrorCorrectionLevel()!==u.getErrorCorrectionLevel()&&c.getRowCount()!==u.getRowCount()?null:c}static getRowIndicatorColumn(o,a,c,u,d,f){let p=new pv(a,u);for(let y=0;y<2;y++){let _=y===0?1:-1,w=Math.trunc(Math.trunc(c.getX()));for(let I=Math.trunc(Math.trunc(c.getY()));I<=a.getMaxY()&&I>=a.getMinY();I+=_){let b=Pe.detectCodeword(o,0,o.getWidth(),u,w,I,d,f);b!=null&&(p.setCodeword(I,b),u?w=b.getStartX():w=b.getEndX())}}return p}static adjustCodewordCount(o,a){let c=a[0][1],u=c.getValue(),d=o.getBarcodeColumnCount()*o.getBarcodeRowCount()-Pe.getNumberOfECCodeWords(o.getBarcodeECLevel());if(u.length===0){if(d<1||d>we.MAX_CODEWORDS_IN_BARCODE)throw V.getNotFoundInstance();c.setValue(d)}else u[0]!==d&&c.setValue(d)}static createDecoderResult(o){let a=Pe.createBarcodeMatrix(o);Pe.adjustCodewordCount(o,a);let c=new Array,u=new Int32Array(o.getBarcodeRowCount()*o.getBarcodeColumnCount()),d=[],f=new Array;for(let y=0;y<o.getBarcodeRowCount();y++)for(let _=0;_<o.getBarcodeColumnCount();_++){let w=a[y][_+1].getValue(),I=y*o.getBarcodeColumnCount()+_;w.length===0?c.push(I):w.length===1?u[I]=w[0]:(f.push(I),d.push(w))}let p=new Array(d.length);for(let y=0;y<p.length;y++)p[y]=d[y];return Pe.createDecoderResultFromAmbiguousValues(o.getBarcodeECLevel(),u,we.toIntArray(c),we.toIntArray(f),p)}static createDecoderResultFromAmbiguousValues(o,a,c,u,d){let f=new Int32Array(u.length),p=100;for(;p-- >0;){for(let y=0;y<f.length;y++)a[u[y]]=d[y][f[y]];try{return Pe.decodeCodewords(a,o,c)}catch(y){if(!(y instanceof E))throw y}if(f.length===0)throw E.getChecksumInstance();for(let y=0;y<f.length;y++)if(f[y]<d[y].length-1){f[y]++;break}else if(f[y]=0,y===f.length-1)throw E.getChecksumInstance()}throw E.getChecksumInstance()}static createBarcodeMatrix(o){let a=Array.from({length:o.getBarcodeRowCount()},()=>new Array(o.getBarcodeColumnCount()+2));for(let u=0;u<a.length;u++)for(let d=0;d<a[u].length;d++)a[u][d]=new oc;let c=0;for(let u of o.getDetectionResultColumns()){if(u!=null){for(let d of u.getCodewords())if(d!=null){let f=d.getRowNumber();if(f>=0){if(f>=a.length)continue;a[f][c].setValue(d.getValue())}}}c++}return a}static isValidBarcodeColumn(o,a){return a>=0&&a<=o.getBarcodeColumnCount()+1}static getStartColumn(o,a,c,u){let d=u?1:-1,f=null;if(Pe.isValidBarcodeColumn(o,a-d)&&(f=o.getDetectionResultColumn(a-d).getCodeword(c)),f!=null)return u?f.getEndX():f.getStartX();if(f=o.getDetectionResultColumn(a).getCodewordNearby(c),f!=null)return u?f.getStartX():f.getEndX();if(Pe.isValidBarcodeColumn(o,a-d)&&(f=o.getDetectionResultColumn(a-d).getCodewordNearby(c)),f!=null)return u?f.getEndX():f.getStartX();let p=0;for(;Pe.isValidBarcodeColumn(o,a-d);){a-=d;for(let y of o.getDetectionResultColumn(a).getCodewords())if(y!=null)return(u?y.getEndX():y.getStartX())+d*p*(y.getEndX()-y.getStartX());p++}return u?o.getBoundingBox().getMinX():o.getBoundingBox().getMaxX()}static detectCodeword(o,a,c,u,d,f,p,y){d=Pe.adjustCodewordStartColumn(o,a,c,u,d,f);let _=Pe.getModuleBitCount(o,a,c,u,d,f);if(_==null)return null;let w,I=Xe.sum(_);if(u)w=d+I;else{for(let T=0;T<_.length/2;T++){let M=_[T];_[T]=_[_.length-1-T],_[_.length-1-T]=M}w=d,d=w-I}if(!Pe.checkCodewordSkew(I,p,y))return null;let b=Rn.getDecodedValue(_),A=we.getCodeword(b);return A===-1?null:new s2(d,w,Pe.getCodewordBucketNumber(b),A)}static getModuleBitCount(o,a,c,u,d,f){let p=d,y=new Int32Array(8),_=0,w=u?1:-1,I=u;for(;(u?p<c:p>=a)&&_<y.length;)o.get(p,f)===I?(y[_]++,p+=w):(_++,I=!I);return _===y.length||p===(u?c:a)&&_===y.length-1?y:null}static getNumberOfECCodeWords(o){return 2<<o}static adjustCodewordStartColumn(o,a,c,u,d,f){let p=d,y=u?-1:1;for(let _=0;_<2;_++){for(;(u?p>=a:p<c)&&u===o.get(p,f);){if(Math.abs(d-p)>Pe.CODEWORD_SKEW_SIZE)return d;p+=y}y=-y,u=!u}return p}static checkCodewordSkew(o,a,c){return a-Pe.CODEWORD_SKEW_SIZE<=o&&o<=c+Pe.CODEWORD_SKEW_SIZE}static decodeCodewords(o,a,c){if(o.length===0)throw j.getFormatInstance();let u=1<<a+1,d=Pe.correctErrors(o,c,u);Pe.verifyCodewordCount(o,u);let f=k.decode(o,""+a);return f.setErrorsCorrected(d),f.setErasures(c.length),f}static correctErrors(o,a,c){if(a!=null&&a.length>c/2+Pe.MAX_ERRORS||c<0||c>Pe.MAX_EC_CODEWORDS)throw E.getChecksumInstance();return Pe.errorCorrection.decode(o,c,a)}static verifyCodewordCount(o,a){if(o.length<4)throw j.getFormatInstance();let c=o[0];if(c>o.length)throw j.getFormatInstance();if(c===0)if(a<o.length)o[0]=o.length-a;else throw j.getFormatInstance()}static getBitCountForCodeword(o){let a=new Int32Array(8),c=0,u=a.length-1;for(;!((o&1)!==c&&(c=o&1,u--,u<0));)a[u]++,o>>=1;return a}static getCodewordBucketNumber(o){return o instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(o):this.getCodewordBucketNumber_number(o)}static getCodewordBucketNumber_number(o){return Pe.getCodewordBucketNumber(Pe.getBitCountForCodeword(o))}static getCodewordBucketNumber_Int32Array(o){return(o[0]-o[2]+o[4]-o[6]+9)%9}static toString(o){let a=new ic;for(let c=0;c<o.length;c++){a.format("Row %2d: ",c);for(let u=0;u<o[c].length;u++){let d=o[c][u];d.getValue().length===0?a.format("        ",null):a.format("%4d(%2d)",d.getValue()[0],d.getConfidence(d.getValue()[0]))}a.format("%n")}return a.toString()}}Pe.CODEWORD_SKEW_SIZE=2,Pe.MAX_ERRORS=3,Pe.MAX_EC_CODEWORDS=512,Pe.errorCorrection=new fv;class an{decode(o,a=null){let c=an.decode(o,a,!1);if(c==null||c.length===0||c[0]==null)throw V.getNotFoundInstance();return c[0]}decodeMultiple(o,a=null){try{return an.decode(o,a,!0)}catch(c){throw c instanceof j||c instanceof E?V.getNotFoundInstance():c}}static decode(o,a,c){let u=new Array,d=Re.detectMultiple(o,a,c);for(let f of d.getPoints()){let p=Pe.decode(d.getBits(),f[4],f[5],f[6],f[7],an.getMinCodewordWidth(f),an.getMaxCodewordWidth(f)),y=new bn(p.getText(),p.getRawBytes(),void 0,f,ge.PDF_417);y.putMetadata(en.ERROR_CORRECTION_LEVEL,p.getECLevel());let _=p.getOther();_!=null&&y.putMetadata(en.PDF417_EXTRA_METADATA,_),u.push(y)}return u.map(f=>f)}static getMaxWidth(o,a){return o==null||a==null?0:Math.trunc(Math.abs(o.getX()-a.getX()))}static getMinWidth(o,a){return o==null||a==null?z.MAX_VALUE:Math.trunc(Math.abs(o.getX()-a.getX()))}static getMaxCodewordWidth(o){return Math.floor(Math.max(Math.max(an.getMaxWidth(o[0],o[4]),an.getMaxWidth(o[6],o[2])*we.MODULES_IN_CODEWORD/we.MODULES_IN_STOP_PATTERN),Math.max(an.getMaxWidth(o[1],o[5]),an.getMaxWidth(o[7],o[3])*we.MODULES_IN_CODEWORD/we.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(o){return Math.floor(Math.min(Math.min(an.getMinWidth(o[0],o[4]),an.getMinWidth(o[6],o[2])*we.MODULES_IN_CODEWORD/we.MODULES_IN_STOP_PATTERN),Math.min(an.getMinWidth(o[1],o[5]),an.getMinWidth(o[7],o[3])*we.MODULES_IN_CODEWORD/we.MODULES_IN_STOP_PATTERN)))}reset(){}}let mp=(()=>{class v extends h{}return v.kind="ReaderException",v})();class _v{constructor(o,a){this.verbose=o===!0,a&&this.setHints(a)}decode(o,a){return a&&this.setHints(a),this.decodeInternal(o)}decodeWithState(o){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(o)}setHints(o){this.hints=o;let a=!t(o)&&o.get(le.TRY_HARDER)===!0,c=t(o)?null:o.get(le.POSSIBLE_FORMATS),u=new Array;if(!t(c)){let d=c.some(f=>f===ge.UPC_A||f===ge.UPC_E||f===ge.EAN_13||f===ge.EAN_8||f===ge.CODABAR||f===ge.CODE_39||f===ge.CODE_93||f===ge.CODE_128||f===ge.ITF||f===ge.RSS_14||f===ge.RSS_EXPANDED);d&&!a&&u.push(new Is(o,this.verbose)),c.includes(ge.QR_CODE)&&u.push(new qi),c.includes(ge.DATA_MATRIX)&&u.push(new yu),c.includes(ge.AZTEC)&&u.push(new hu),c.includes(ge.PDF_417)&&u.push(new an),d&&a&&u.push(new Is(o,this.verbose))}u.length===0&&(a||u.push(new Is(o,this.verbose)),u.push(new qi),u.push(new yu),u.push(new hu),u.push(new an),a&&u.push(new Is(o,this.verbose))),this.readers=u}reset(){if(this.readers!==null)for(let o of this.readers)o.reset()}decodeInternal(o){if(this.readers===null)throw new mp("No readers where selected, nothing can be read.");for(let a of this.readers)try{return a.decode(o,this.hints)}catch(c){if(c instanceof mp)continue}throw new V("No MultiFormat Readers were able to detect the code.")}}class f2 extends To{constructor(o=null,a=500){let c=new _v;c.setHints(o),super(c,a)}decodeBitmap(o){return this.reader.decodeWithState(o)}}class h2 extends To{constructor(o=500){super(new an,o)}}class p2 extends To{constructor(o=500){super(new qi,o)}}var vv=function(v){return v[v.ERROR_CORRECTION=0]="ERROR_CORRECTION",v[v.CHARACTER_SET=1]="CHARACTER_SET",v[v.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",v[v.MIN_SIZE=3]="MIN_SIZE",v[v.MAX_SIZE=4]="MAX_SIZE",v[v.MARGIN=5]="MARGIN",v[v.PDF417_COMPACT=6]="PDF417_COMPACT",v[v.PDF417_COMPACTION=7]="PDF417_COMPACTION",v[v.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",v[v.AZTEC_LAYERS=9]="AZTEC_LAYERS",v[v.QR_VERSION=10]="QR_VERSION",v}(vv||{}),zt=vv;class yp{constructor(o){this.field=o,this.cachedGenerators=[],this.cachedGenerators.push(new Nn(o,Int32Array.from([1])))}buildGenerator(o){let a=this.cachedGenerators;if(o>=a.length){let c=a[a.length-1],u=this.field;for(let d=a.length;d<=o;d++){let f=c.multiply(new Nn(u,Int32Array.from([1,u.exp(d-1+u.getGeneratorBase())])));a.push(f),c=f}}return a[o]}encode(o,a){if(a===0)throw new m("No error correction bytes");let c=o.length-a;if(c<=0)throw new m("No data bytes provided");let u=this.buildGenerator(a),d=new Int32Array(c);D.arraycopy(o,0,d,0,c);let f=new Nn(this.field,d);f=f.multiplyByMonomial(a,1);let y=f.divide(u)[1].getCoefficients(),_=a-y.length;for(let w=0;w<_;w++)o[c+w]=0;D.arraycopy(y,0,o,c+_,y.length)}}let bs=(()=>{class v{constructor(){}static applyMaskPenaltyRule1(a){return v.applyMaskPenaltyRule1Internal(a,!0)+v.applyMaskPenaltyRule1Internal(a,!1)}static applyMaskPenaltyRule2(a){let c=0,u=a.getArray(),d=a.getWidth(),f=a.getHeight();for(let p=0;p<f-1;p++){let y=u[p];for(let _=0;_<d-1;_++){let w=y[_];w===y[_+1]&&w===u[p+1][_]&&w===u[p+1][_+1]&&c++}}return v.N2*c}static applyMaskPenaltyRule3(a){let c=0,u=a.getArray(),d=a.getWidth(),f=a.getHeight();for(let p=0;p<f;p++)for(let y=0;y<d;y++){let _=u[p];y+6<d&&_[y]===1&&_[y+1]===0&&_[y+2]===1&&_[y+3]===1&&_[y+4]===1&&_[y+5]===0&&_[y+6]===1&&(v.isWhiteHorizontal(_,y-4,y)||v.isWhiteHorizontal(_,y+7,y+11))&&c++,p+6<f&&u[p][y]===1&&u[p+1][y]===0&&u[p+2][y]===1&&u[p+3][y]===1&&u[p+4][y]===1&&u[p+5][y]===0&&u[p+6][y]===1&&(v.isWhiteVertical(u,y,p-4,p)||v.isWhiteVertical(u,y,p+7,p+11))&&c++}return c*v.N3}static isWhiteHorizontal(a,c,u){c=Math.max(c,0),u=Math.min(u,a.length);for(let d=c;d<u;d++)if(a[d]===1)return!1;return!0}static isWhiteVertical(a,c,u,d){u=Math.max(u,0),d=Math.min(d,a.length);for(let f=u;f<d;f++)if(a[f][c]===1)return!1;return!0}static applyMaskPenaltyRule4(a){let c=0,u=a.getArray(),d=a.getWidth(),f=a.getHeight();for(let _=0;_<f;_++){let w=u[_];for(let I=0;I<d;I++)w[I]===1&&c++}let p=a.getHeight()*a.getWidth();return Math.floor(Math.abs(c*2-p)*10/p)*v.N4}static getDataMaskBit(a,c,u){let d,f;switch(a){case 0:d=u+c&1;break;case 1:d=u&1;break;case 2:d=c%3;break;case 3:d=(u+c)%3;break;case 4:d=Math.floor(u/2)+Math.floor(c/3)&1;break;case 5:f=u*c,d=(f&1)+f%3;break;case 6:f=u*c,d=(f&1)+f%3&1;break;case 7:f=u*c,d=f%3+(u+c&1)&1;break;default:throw new m("Invalid mask pattern: "+a)}return d===0}static applyMaskPenaltyRule1Internal(a,c){let u=0,d=c?a.getHeight():a.getWidth(),f=c?a.getWidth():a.getHeight(),p=a.getArray();for(let y=0;y<d;y++){let _=0,w=-1;for(let I=0;I<f;I++){let b=c?p[y][I]:p[I][y];b===w?_++:(_>=5&&(u+=v.N1+(_-5)),_=1,w=b)}_>=5&&(u+=v.N1+(_-5))}return u}}return v.N1=3,v.N2=3,v.N3=40,v.N4=10,v})();class wu{constructor(o,a){this.width=o,this.height=a;let c=new Array(a);for(let u=0;u!==a;u++)c[u]=new Uint8Array(o);this.bytes=c}getHeight(){return this.height}getWidth(){return this.width}get(o,a){return this.bytes[a][o]}getArray(){return this.bytes}setNumber(o,a,c){this.bytes[a][o]=c}setBoolean(o,a,c){this.bytes[a][o]=c?1:0}clear(o){for(let a of this.bytes)G.fill(a,o)}equals(o){if(!(o instanceof wu))return!1;let a=o;if(this.width!==a.width||this.height!==a.height)return!1;for(let c=0,u=this.height;c<u;++c){let d=this.bytes[c],f=a.bytes[c];for(let p=0,y=this.width;p<y;++p)if(d[p]!==f[p])return!1}return!0}toString(){let o=new mt;for(let a=0,c=this.height;a<c;++a){let u=this.bytes[a];for(let d=0,f=this.width;d<f;++d)switch(u[d]){case 0:o.append(" 0");break;case 1:o.append(" 1");break;default:o.append("  ");break}o.append(`
`)}return o.toString()}}let Cu=(()=>{class v{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){let a=new mt;return a.append(`<<
`),a.append(" mode: "),a.append(this.mode?this.mode.toString():"null"),a.append(`
 ecLevel: `),a.append(this.ecLevel?this.ecLevel.toString():"null"),a.append(`
 version: `),a.append(this.version?this.version.toString():"null"),a.append(`
 maskPattern: `),a.append(this.maskPattern.toString()),this.matrix?(a.append(`
 matrix:
`),a.append(this.matrix.toString())):a.append(`
 matrix: null
`),a.append(`>>
`),a.toString()}setMode(a){this.mode=a}setECLevel(a){this.ecLevel=a}setVersion(a){this.version=a}setMaskPattern(a){this.maskPattern=a}setMatrix(a){this.matrix=a}static isValidMaskPattern(a){return a>=0&&a<v.NUM_MASK_PATTERNS}}return v.NUM_MASK_PATTERNS=8,v})(),Et=(()=>{class v extends h{}return v.kind="WriterException",v})();class me{constructor(){}static clearMatrix(o){o.clear(255)}static buildMatrix(o,a,c,u,d){me.clearMatrix(d),me.embedBasicPatterns(c,d),me.embedTypeInfo(a,u,d),me.maybeEmbedVersionInfo(c,d),me.embedDataBits(o,u,d)}static embedBasicPatterns(o,a){me.embedPositionDetectionPatternsAndSeparators(a),me.embedDarkDotAtLeftBottomCorner(a),me.maybeEmbedPositionAdjustmentPatterns(o,a),me.embedTimingPatterns(a)}static embedTypeInfo(o,a,c){let u=new ne;me.makeTypeInfoBits(o,a,u);for(let d=0,f=u.getSize();d<f;++d){let p=u.get(u.getSize()-1-d),y=me.TYPE_INFO_COORDINATES[d],_=y[0],w=y[1];if(c.setBoolean(_,w,p),d<8){let I=c.getWidth()-d-1;c.setBoolean(I,8,p)}else{let b=c.getHeight()-7+(d-8);c.setBoolean(8,b,p)}}}static maybeEmbedVersionInfo(o,a){if(o.getVersionNumber()<7)return;let c=new ne;me.makeVersionInfoBits(o,c);let u=6*3-1;for(let d=0;d<6;++d)for(let f=0;f<3;++f){let p=c.get(u);u--,a.setBoolean(d,a.getHeight()-11+f,p),a.setBoolean(a.getHeight()-11+f,d,p)}}static embedDataBits(o,a,c){let u=0,d=-1,f=c.getWidth()-1,p=c.getHeight()-1;for(;f>0;){for(f===6&&(f-=1);p>=0&&p<c.getHeight();){for(let y=0;y<2;++y){let _=f-y;if(!me.isEmpty(c.get(_,p)))continue;let w;u<o.getSize()?(w=o.get(u),++u):w=!1,a!==255&&bs.getDataMaskBit(a,_,p)&&(w=!w),c.setBoolean(_,p,w)}p+=d}d=-d,p+=d,f-=2}if(u!==o.getSize())throw new Et("Not all bits consumed: "+u+"/"+o.getSize())}static findMSBSet(o){return 32-z.numberOfLeadingZeros(o)}static calculateBCHCode(o,a){if(a===0)throw new m("0 polynomial");let c=me.findMSBSet(a);for(o<<=c-1;me.findMSBSet(o)>=c;)o^=a<<me.findMSBSet(o)-c;return o}static makeTypeInfoBits(o,a,c){if(!Cu.isValidMaskPattern(a))throw new Et("Invalid mask pattern");let u=o.getBits()<<3|a;c.appendBits(u,5);let d=me.calculateBCHCode(u,me.TYPE_INFO_POLY);c.appendBits(d,10);let f=new ne;if(f.appendBits(me.TYPE_INFO_MASK_PATTERN,15),c.xor(f),c.getSize()!==15)throw new Et("should not happen but we got: "+c.getSize())}static makeVersionInfoBits(o,a){a.appendBits(o.getVersionNumber(),6);let c=me.calculateBCHCode(o.getVersionNumber(),me.VERSION_INFO_POLY);if(a.appendBits(c,12),a.getSize()!==18)throw new Et("should not happen but we got: "+a.getSize())}static isEmpty(o){return o===255}static embedTimingPatterns(o){for(let a=8;a<o.getWidth()-8;++a){let c=(a+1)%2;me.isEmpty(o.get(a,6))&&o.setNumber(a,6,c),me.isEmpty(o.get(6,a))&&o.setNumber(6,a,c)}}static embedDarkDotAtLeftBottomCorner(o){if(o.get(8,o.getHeight()-8)===0)throw new Et;o.setNumber(8,o.getHeight()-8,1)}static embedHorizontalSeparationPattern(o,a,c){for(let u=0;u<8;++u){if(!me.isEmpty(c.get(o+u,a)))throw new Et;c.setNumber(o+u,a,0)}}static embedVerticalSeparationPattern(o,a,c){for(let u=0;u<7;++u){if(!me.isEmpty(c.get(o,a+u)))throw new Et;c.setNumber(o,a+u,0)}}static embedPositionAdjustmentPattern(o,a,c){for(let u=0;u<5;++u){let d=me.POSITION_ADJUSTMENT_PATTERN[u];for(let f=0;f<5;++f)c.setNumber(o+f,a+u,d[f])}}static embedPositionDetectionPattern(o,a,c){for(let u=0;u<7;++u){let d=me.POSITION_DETECTION_PATTERN[u];for(let f=0;f<7;++f)c.setNumber(o+f,a+u,d[f])}}static embedPositionDetectionPatternsAndSeparators(o){let a=me.POSITION_DETECTION_PATTERN[0].length;me.embedPositionDetectionPattern(0,0,o),me.embedPositionDetectionPattern(o.getWidth()-a,0,o),me.embedPositionDetectionPattern(0,o.getWidth()-a,o);let c=8;me.embedHorizontalSeparationPattern(0,c-1,o),me.embedHorizontalSeparationPattern(o.getWidth()-c,c-1,o),me.embedHorizontalSeparationPattern(0,o.getWidth()-c,o);let u=7;me.embedVerticalSeparationPattern(u,0,o),me.embedVerticalSeparationPattern(o.getHeight()-u-1,0,o),me.embedVerticalSeparationPattern(u,o.getHeight()-u,o)}static maybeEmbedPositionAdjustmentPatterns(o,a){if(o.getVersionNumber()<2)return;let c=o.getVersionNumber()-1,u=me.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[c];for(let d=0,f=u.length;d!==f;d++){let p=u[d];if(p>=0)for(let y=0;y!==f;y++){let _=u[y];_>=0&&me.isEmpty(a.get(_,p))&&me.embedPositionAdjustmentPattern(_-2,p-2,a)}}}}me.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),me.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),me.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),me.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),me.VERSION_INFO_POLY=7973,me.TYPE_INFO_POLY=1335,me.TYPE_INFO_MASK_PATTERN=21522;class g2{constructor(o,a){this.dataBytes=o,this.errorCorrectionBytes=a}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class xt{constructor(){}static calculateMaskPenalty(o){return bs.applyMaskPenaltyRule1(o)+bs.applyMaskPenaltyRule2(o)+bs.applyMaskPenaltyRule3(o)+bs.applyMaskPenaltyRule4(o)}static encode(o,a,c=null){let u=xt.DEFAULT_BYTE_MODE_ENCODING,d=c!==null&&c.get(zt.CHARACTER_SET)!==void 0;d&&(u=c.get(zt.CHARACTER_SET).toString());let f=this.chooseMode(o,u),p=new ne;if(f===he.BYTE&&(d||xt.DEFAULT_BYTE_MODE_ENCODING!==u)){let Q=W.getCharacterSetECIByName(u);Q!==void 0&&this.appendECI(Q,p)}this.appendModeInfo(f,p);let y=new ne;this.appendBytes(o,f,y,u);let _;if(c!==null&&c.get(zt.QR_VERSION)!==void 0){let Q=Number.parseInt(c.get(zt.QR_VERSION).toString(),10);_=ce.getVersionForNumber(Q);let B=this.calculateBitsNeeded(f,p,y,_);if(!this.willFit(B,_,a))throw new Et("Data too big for requested version")}else _=this.recommendVersion(a,f,p,y);let w=new ne;w.appendBitArray(p);let I=f===he.BYTE?y.getSizeInBytes():o.length;this.appendLengthInfo(I,_,f,w),w.appendBitArray(y);let b=_.getECBlocksForLevel(a),A=_.getTotalCodewords()-b.getTotalECCodewords();this.terminateBits(A,w);let T=this.interleaveWithECBytes(w,_.getTotalCodewords(),A,b.getNumBlocks()),M=new Cu;M.setECLevel(a),M.setMode(f),M.setVersion(_);let R=_.getDimensionForVersion(),P=new wu(R,R),q=this.chooseMaskPattern(T,a,_,P);return M.setMaskPattern(q),me.buildMatrix(T,a,_,q,P),M.setMatrix(P),M}static recommendVersion(o,a,c,u){let d=this.calculateBitsNeeded(a,c,u,ce.getVersionForNumber(1)),f=this.chooseVersion(d,o),p=this.calculateBitsNeeded(a,c,u,f);return this.chooseVersion(p,o)}static calculateBitsNeeded(o,a,c,u){return a.getSize()+o.getCharacterCountBits(u)+c.getSize()}static getAlphanumericCode(o){return o<xt.ALPHANUMERIC_TABLE.length?xt.ALPHANUMERIC_TABLE[o]:-1}static chooseMode(o,a=null){if(W.SJIS.getName()===a&&this.isOnlyDoubleByteKanji(o))return he.KANJI;let c=!1,u=!1;for(let d=0,f=o.length;d<f;++d){let p=o.charAt(d);if(xt.isDigit(p))c=!0;else if(this.getAlphanumericCode(p.charCodeAt(0))!==-1)u=!0;else return he.BYTE}return u?he.ALPHANUMERIC:c?he.NUMERIC:he.BYTE}static isOnlyDoubleByteKanji(o){let a;try{a=Ft.encode(o,W.SJIS)}catch{return!1}let c=a.length;if(c%2!==0)return!1;for(let u=0;u<c;u+=2){let d=a[u]&255;if((d<129||d>159)&&(d<224||d>235))return!1}return!0}static chooseMaskPattern(o,a,c,u){let d=Number.MAX_SAFE_INTEGER,f=-1;for(let p=0;p<Cu.NUM_MASK_PATTERNS;p++){me.buildMatrix(o,a,c,p,u);let y=this.calculateMaskPenalty(u);y<d&&(d=y,f=p)}return f}static chooseVersion(o,a){for(let c=1;c<=40;c++){let u=ce.getVersionForNumber(c);if(xt.willFit(o,u,a))return u}throw new Et("Data too big")}static willFit(o,a,c){let u=a.getTotalCodewords(),f=a.getECBlocksForLevel(c).getTotalECCodewords(),p=u-f,y=(o+7)/8;return p>=y}static terminateBits(o,a){let c=o*8;if(a.getSize()>c)throw new Et("data bits cannot fit in the QR Code"+a.getSize()+" > "+c);for(let f=0;f<4&&a.getSize()<c;++f)a.appendBit(!1);let u=a.getSize()&7;if(u>0)for(let f=u;f<8;f++)a.appendBit(!1);let d=o-a.getSizeInBytes();for(let f=0;f<d;++f)a.appendBits(f&1?17:236,8);if(a.getSize()!==c)throw new Et("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(o,a,c,u,d,f){if(u>=c)throw new Et("Block ID too large");let p=o%c,y=c-p,_=Math.floor(o/c),w=_+1,I=Math.floor(a/c),b=I+1,A=_-I,T=w-b;if(A!==T)throw new Et("EC bytes mismatch");if(c!==y+p)throw new Et("RS blocks mismatch");if(o!==(I+A)*y+(b+T)*p)throw new Et("Total bytes mismatch");u<y?(d[0]=I,f[0]=A):(d[0]=b,f[0]=T)}static interleaveWithECBytes(o,a,c,u){if(o.getSizeInBytes()!==c)throw new Et("Number of bits and data bytes does not match");let d=0,f=0,p=0,y=new Array;for(let w=0;w<u;++w){let I=new Int32Array(1),b=new Int32Array(1);xt.getNumDataBytesAndNumECBytesForBlockID(a,c,u,w,I,b);let A=I[0],T=new Uint8Array(A);o.toBytes(8*d,T,0,A);let M=xt.generateECBytes(T,b[0]);y.push(new g2(T,M)),f=Math.max(f,A),p=Math.max(p,M.length),d+=I[0]}if(c!==d)throw new Et("Data bytes does not match offset");let _=new ne;for(let w=0;w<f;++w)for(let I of y){let b=I.getDataBytes();w<b.length&&_.appendBits(b[w],8)}for(let w=0;w<p;++w)for(let I of y){let b=I.getErrorCorrectionBytes();w<b.length&&_.appendBits(b[w],8)}if(a!==_.getSizeInBytes())throw new Et("Interleaving error: "+a+" and "+_.getSizeInBytes()+" differ.");return _}static generateECBytes(o,a){let c=o.length,u=new Int32Array(c+a);for(let f=0;f<c;f++)u[f]=o[f]&255;new yp(nt.QR_CODE_FIELD_256).encode(u,a);let d=new Uint8Array(a);for(let f=0;f<a;f++)d[f]=u[c+f];return d}static appendModeInfo(o,a){a.appendBits(o.getBits(),4)}static appendLengthInfo(o,a,c,u){let d=c.getCharacterCountBits(a);if(o>=1<<d)throw new Et(o+" is bigger than "+((1<<d)-1));u.appendBits(o,d)}static appendBytes(o,a,c,u){switch(a){case he.NUMERIC:xt.appendNumericBytes(o,c);break;case he.ALPHANUMERIC:xt.appendAlphanumericBytes(o,c);break;case he.BYTE:xt.append8BitBytes(o,c,u);break;case he.KANJI:xt.appendKanjiBytes(o,c);break;default:throw new Et("Invalid mode: "+a)}}static getDigit(o){return o.charCodeAt(0)-48}static isDigit(o){let a=xt.getDigit(o);return a>=0&&a<=9}static appendNumericBytes(o,a){let c=o.length,u=0;for(;u<c;){let d=xt.getDigit(o.charAt(u));if(u+2<c){let f=xt.getDigit(o.charAt(u+1)),p=xt.getDigit(o.charAt(u+2));a.appendBits(d*100+f*10+p,10),u+=3}else if(u+1<c){let f=xt.getDigit(o.charAt(u+1));a.appendBits(d*10+f,7),u+=2}else a.appendBits(d,4),u++}}static appendAlphanumericBytes(o,a){let c=o.length,u=0;for(;u<c;){let d=xt.getAlphanumericCode(o.charCodeAt(u));if(d===-1)throw new Et;if(u+1<c){let f=xt.getAlphanumericCode(o.charCodeAt(u+1));if(f===-1)throw new Et;a.appendBits(d*45+f,11),u+=2}else a.appendBits(d,6),u++}}static append8BitBytes(o,a,c){let u;try{u=Ft.encode(o,c)}catch(d){throw new Et(d)}for(let d=0,f=u.length;d!==f;d++){let p=u[d];a.appendBits(p,8)}}static appendKanjiBytes(o,a){let c;try{c=Ft.encode(o,W.SJIS)}catch(d){throw new Et(d)}let u=c.length;for(let d=0;d<u;d+=2){let f=c[d]&255,p=c[d+1]&255,y=f<<8&4294967295|p,_=-1;if(y>=33088&&y<=40956?_=y-33088:y>=57408&&y<=60351&&(_=y-49472),_===-1)throw new Et("Invalid byte sequence");let w=(_>>8)*192+(_&255);a.appendBits(w,13)}}static appendECI(o,a){a.appendBits(he.ECI.getBits(),4),a.appendBits(o.getValue(),8)}}xt.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),xt.DEFAULT_BYTE_MODE_ENCODING=W.UTF8.getName();let m2=(()=>{class v{write(a,c,u,d=null){if(a.length===0)throw new m("Found empty contents");if(c<0||u<0)throw new m("Requested dimensions are too small: "+c+"x"+u);let f=Ct.L,p=v.QUIET_ZONE_SIZE;d!==null&&(d.get(zt.ERROR_CORRECTION)!==void 0&&(f=Ct.fromString(d.get(zt.ERROR_CORRECTION).toString())),d.get(zt.MARGIN)!==void 0&&(p=Number.parseInt(d.get(zt.MARGIN).toString(),10)));let y=xt.encode(a,f,d);return this.renderResult(y,c,u,p)}writeToDom(a,c,u,d,f=null){typeof a=="string"&&(a=document.querySelector(a));let p=this.write(c,u,d,f);a&&a.appendChild(p)}renderResult(a,c,u,d){let f=a.getMatrix();if(f===null)throw new ui;let p=f.getWidth(),y=f.getHeight(),_=p+d*2,w=y+d*2,I=Math.max(c,_),b=Math.max(u,w),A=Math.min(Math.floor(I/_),Math.floor(b/w)),T=Math.floor((I-p*A)/2),M=Math.floor((b-y*A)/2),R=this.createSVGElement(I,b);for(let P=0,q=M;P<y;P++,q+=A)for(let Q=0,B=T;Q<p;Q++,B+=A)if(f.get(Q,P)===1){let Be=this.createSvgRectElement(B,q,A,A);R.appendChild(Be)}return R}createSVGElement(a,c){let u=document.createElementNS(v.SVG_NS,"svg");return u.setAttributeNS(null,"height",a.toString()),u.setAttributeNS(null,"width",c.toString()),u}createSvgRectElement(a,c,u,d){let f=document.createElementNS(v.SVG_NS,"rect");return f.setAttributeNS(null,"x",a.toString()),f.setAttributeNS(null,"y",c.toString()),f.setAttributeNS(null,"height",u.toString()),f.setAttributeNS(null,"width",d.toString()),f.setAttributeNS(null,"fill","#000000"),f}}return v.QUIET_ZONE_SIZE=4,v.SVG_NS="http://www.w3.org/2000/svg",v})(),wv=(()=>{class v{encode(a,c,u,d,f){if(a.length===0)throw new m("Found empty contents");if(c!==ge.QR_CODE)throw new m("Can only encode QR_CODE, but got "+c);if(u<0||d<0)throw new m(`Requested dimensions are too small: ${u}x${d}`);let p=Ct.L,y=v.QUIET_ZONE_SIZE;f!==null&&(f.get(zt.ERROR_CORRECTION)!==void 0&&(p=Ct.fromString(f.get(zt.ERROR_CORRECTION).toString())),f.get(zt.MARGIN)!==void 0&&(y=Number.parseInt(f.get(zt.MARGIN).toString(),10)));let _=xt.encode(a,p,f);return v.renderResult(_,u,d,y)}static renderResult(a,c,u,d){let f=a.getMatrix();if(f===null)throw new ui;let p=f.getWidth(),y=f.getHeight(),_=p+d*2,w=y+d*2,I=Math.max(c,_),b=Math.max(u,w),A=Math.min(Math.floor(I/_),Math.floor(b/w)),T=Math.floor((I-p*A)/2),M=Math.floor((b-y*A)/2),R=new Kt(I,b);for(let P=0,q=M;P<y;P++,q+=A)for(let Q=0,B=T;Q<p;Q++,B+=A)f.get(Q,P)===1&&R.setRegion(B,q,A,A);return R}}return v.QUIET_ZONE_SIZE=4,v})();class y2{encode(o,a,c,u,d){let f;switch(a){case ge.QR_CODE:f=new wv;break;default:throw new m("No encoder available for format "+a)}return f.encode(o,a,c,u,d)}}let _2=(()=>{class v extends Xa{constructor(a,c,u,d,f,p,y,_){if(super(p,y),this.yuvData=a,this.dataWidth=c,this.dataHeight=u,this.left=d,this.top=f,d+p>c||f+y>u)throw new m("Crop rectangle does not fit within image data.");_&&this.reverseHorizontal(p,y)}getRow(a,c){if(a<0||a>=this.getHeight())throw new m("Requested row is outside the image: "+a);let u=this.getWidth();(c==null||c.length<u)&&(c=new Uint8ClampedArray(u));let d=(a+this.top)*this.dataWidth+this.left;return D.arraycopy(this.yuvData,d,c,0,u),c}getMatrix(){let a=this.getWidth(),c=this.getHeight();if(a===this.dataWidth&&c===this.dataHeight)return this.yuvData;let u=a*c,d=new Uint8ClampedArray(u),f=this.top*this.dataWidth+this.left;if(a===this.dataWidth)return D.arraycopy(this.yuvData,f,d,0,u),d;for(let p=0;p<c;p++){let y=p*a;D.arraycopy(this.yuvData,f,d,y,a),f+=this.dataWidth}return d}isCropSupported(){return!0}crop(a,c,u,d){return new v(this.yuvData,this.dataWidth,this.dataHeight,this.left+a,this.top+c,u,d,!1)}renderThumbnail(){let a=this.getWidth()/v.THUMBNAIL_SCALE_FACTOR,c=this.getHeight()/v.THUMBNAIL_SCALE_FACTOR,u=new Int32Array(a*c),d=this.yuvData,f=this.top*this.dataWidth+this.left;for(let p=0;p<c;p++){let y=p*a;for(let _=0;_<a;_++){let w=d[f+_*v.THUMBNAIL_SCALE_FACTOR]&255;u[y+_]=4278190080|w*65793}f+=this.dataWidth*v.THUMBNAIL_SCALE_FACTOR}return u}getThumbnailWidth(){return this.getWidth()/v.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/v.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(a,c){let u=this.yuvData;for(let d=0,f=this.top*this.dataWidth+this.left;d<c;d++,f+=this.dataWidth){let p=f+a/2;for(let y=f,_=f+a-1;y<p;y++,_--){let w=u[y];u[y]=u[_],u[_]=w}}}invert(){return new ji(this)}}return v.THUMBNAIL_SCALE_FACTOR=2,v})();class _p extends Xa{constructor(o,a,c,u,d,f,p){if(super(a,c),this.dataWidth=u,this.dataHeight=d,this.left=f,this.top=p,o.BYTES_PER_ELEMENT===4){let y=a*c,_=new Uint8ClampedArray(y);for(let w=0;w<y;w++){let I=o[w],b=I>>16&255,A=I>>7&510,T=I&255;_[w]=(b+A+T)/4&255}this.luminances=_}else this.luminances=o;if(u===void 0&&(this.dataWidth=a),d===void 0&&(this.dataHeight=c),f===void 0&&(this.left=0),p===void 0&&(this.top=0),this.left+a>this.dataWidth||this.top+c>this.dataHeight)throw new m("Crop rectangle does not fit within image data.")}getRow(o,a){if(o<0||o>=this.getHeight())throw new m("Requested row is outside the image: "+o);let c=this.getWidth();(a==null||a.length<c)&&(a=new Uint8ClampedArray(c));let u=(o+this.top)*this.dataWidth+this.left;return D.arraycopy(this.luminances,u,a,0,c),a}getMatrix(){let o=this.getWidth(),a=this.getHeight();if(o===this.dataWidth&&a===this.dataHeight)return this.luminances;let c=o*a,u=new Uint8ClampedArray(c),d=this.top*this.dataWidth+this.left;if(o===this.dataWidth)return D.arraycopy(this.luminances,d,u,0,c),u;for(let f=0;f<a;f++){let p=f*o;D.arraycopy(this.luminances,d,u,p,o),d+=this.dataWidth}return u}isCropSupported(){return!0}crop(o,a,c,u){return new _p(this.luminances,c,u,this.dataWidth,this.dataHeight,this.left+o,this.top+a)}invert(){return new ji(this)}}class Cv extends W{static forName(o){return this.getCharacterSetECIByName(o)}}class vp{}vp.ISO_8859_1=W.ISO8859_1;class Ev{isCompact(){return this.compact}setCompact(o){this.compact=o}getSize(){return this.size}setSize(o){this.size=o}getLayers(){return this.layers}setLayers(o){this.layers=o}getCodeWords(){return this.codeWords}setCodeWords(o){this.codeWords=o}getMatrix(){return this.matrix}setMatrix(o){this.matrix=o}}class Iv{static singletonList(o){return[o]}static min(o,a){return o.sort(a)[0]}}class v2{constructor(o){this.previous=o}getPrevious(){return this.previous}}class xs extends v2{constructor(o,a,c){super(o),this.value=a,this.bitCount=c}appendTo(o,a){o.appendBits(this.value,this.bitCount)}add(o,a){return new xs(this,o,a)}addBinaryShift(o,a){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new xs(this,o,a)}toString(){let o=this.value&(1<<this.bitCount)-1;return o|=1<<this.bitCount,"<"+z.toBinaryString(o|1<<this.bitCount).substring(1)+">"}}class wp extends xs{constructor(o,a,c){super(o,0,0),this.binaryShiftStart=a,this.binaryShiftByteCount=c}appendTo(o,a){for(let c=0;c<this.binaryShiftByteCount;c++)(c===0||c===31&&this.binaryShiftByteCount<=62)&&(o.appendBits(31,5),this.binaryShiftByteCount>62?o.appendBits(this.binaryShiftByteCount-31,16):c===0?o.appendBits(Math.min(this.binaryShiftByteCount,31),5):o.appendBits(this.binaryShiftByteCount-31,5)),o.appendBits(a[this.binaryShiftStart+c],8)}addBinaryShift(o,a){return new wp(this,o,a)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function w2(v,o,a){return new wp(v,o,a)}function ac(v,o,a){return new xs(v,o,a)}let C2=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Zi=0,Eu=1,nr=2,bv=3,Wr=4,E2=new xs(null,0,0),Cp=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function I2(v){for(let o of v)G.fill(o,-1);return v[Zi][Wr]=0,v[Eu][Wr]=0,v[Eu][Zi]=28,v[bv][Wr]=0,v[nr][Wr]=0,v[nr][Zi]=15,v}let xv=I2(G.createInt32Array(6,6));class Gr{constructor(o,a,c,u){this.token=o,this.mode=a,this.binaryShiftByteCount=c,this.bitCount=u}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(o,a){let c=this.bitCount,u=this.token;if(o!==this.mode){let f=Cp[this.mode][o];u=ac(u,f&65535,f>>16),c+=f>>16}let d=o===nr?4:5;return u=ac(u,a,d),new Gr(u,o,0,c+d)}shiftAndAppend(o,a){let c=this.token,u=this.mode===nr?4:5;return c=ac(c,xv[this.mode][o],u),c=ac(c,a,5),new Gr(c,this.mode,0,this.bitCount+u+5)}addBinaryShiftChar(o){let a=this.token,c=this.mode,u=this.bitCount;if(this.mode===Wr||this.mode===nr){let p=Cp[c][Zi];a=ac(a,p&65535,p>>16),u+=p>>16,c=Zi}let d=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,f=new Gr(a,c,this.binaryShiftByteCount+1,u+d);return f.binaryShiftByteCount===2078&&(f=f.endBinaryShift(o+1)),f}endBinaryShift(o){if(this.binaryShiftByteCount===0)return this;let a=this.token;return a=w2(a,o-this.binaryShiftByteCount,this.binaryShiftByteCount),new Gr(a,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(o){let a=this.bitCount+(Cp[this.mode][o.mode]>>16);return this.binaryShiftByteCount<o.binaryShiftByteCount?a+=Gr.calculateBinaryShiftCost(o)-Gr.calculateBinaryShiftCost(this):this.binaryShiftByteCount>o.binaryShiftByteCount&&o.binaryShiftByteCount>0&&(a+=10),a<=o.bitCount}toBitArray(o){let a=[];for(let u=this.endBinaryShift(o.length).token;u!==null;u=u.getPrevious())a.unshift(u);let c=new ne;for(let u of a)u.appendTo(c,o);return c}toString(){return Ce.format("%s bits=%d bytes=%d",C2[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(o){return o.binaryShiftByteCount>62?21:o.binaryShiftByteCount>31?20:o.binaryShiftByteCount>0?10:0}}Gr.INITIAL_STATE=new Gr(E2,Zi,0,0);function b2(v){let o=Ce.getCharCode(" "),a=Ce.getCharCode("."),c=Ce.getCharCode(",");v[Zi][o]=1;let u=Ce.getCharCode("Z"),d=Ce.getCharCode("A");for(let b=d;b<=u;b++)v[Zi][b]=b-d+2;v[Eu][o]=1;let f=Ce.getCharCode("z"),p=Ce.getCharCode("a");for(let b=p;b<=f;b++)v[Eu][b]=b-p+2;v[nr][o]=1;let y=Ce.getCharCode("9"),_=Ce.getCharCode("0");for(let b=_;b<=y;b++)v[nr][b]=b-_+2;v[nr][c]=12,v[nr][a]=13;let w=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~","\x7F"];for(let b=0;b<w.length;b++)v[bv][Ce.getCharCode(w[b])]=b;let I=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let b=0;b<I.length;b++)Ce.getCharCode(I[b])>0&&(v[Wr][Ce.getCharCode(I[b])]=b);return v}let Ep=b2(G.createInt32Array(5,256));class cc{constructor(o){this.text=o}encode(){let o=Ce.getCharCode(" "),a=Ce.getCharCode(`
`),c=Iv.singletonList(Gr.INITIAL_STATE);for(let d=0;d<this.text.length;d++){let f,p=d+1<this.text.length?this.text[d+1]:0;switch(this.text[d]){case Ce.getCharCode("\r"):f=p===a?2:0;break;case Ce.getCharCode("."):f=p===o?3:0;break;case Ce.getCharCode(","):f=p===o?4:0;break;case Ce.getCharCode(":"):f=p===o?5:0;break;default:f=0}f>0?(c=cc.updateStateListForPair(c,d,f),d++):c=this.updateStateListForChar(c,d)}return Iv.min(c,(d,f)=>d.getBitCount()-f.getBitCount()).toBitArray(this.text)}updateStateListForChar(o,a){let c=[];for(let u of o)this.updateStateForChar(u,a,c);return cc.simplifyStates(c)}updateStateForChar(o,a,c){let u=this.text[a]&255,d=Ep[o.getMode()][u]>0,f=null;for(let p=0;p<=Wr;p++){let y=Ep[p][u];if(y>0){if(f==null&&(f=o.endBinaryShift(a)),!d||p===o.getMode()||p===nr){let _=f.latchAndAppend(p,y);c.push(_)}if(!d&&xv[o.getMode()][p]>=0){let _=f.shiftAndAppend(p,y);c.push(_)}}}if(o.getBinaryShiftByteCount()>0||Ep[o.getMode()][u]===0){let p=o.addBinaryShiftChar(a);c.push(p)}}static updateStateListForPair(o,a,c){let u=[];for(let d of o)this.updateStateForPair(d,a,c,u);return this.simplifyStates(u)}static updateStateForPair(o,a,c,u){let d=o.endBinaryShift(a);if(u.push(d.latchAndAppend(Wr,c)),o.getMode()!==Wr&&u.push(d.shiftAndAppend(Wr,c)),c===3||c===4){let f=d.latchAndAppend(nr,16-c).latchAndAppend(nr,1);u.push(f)}if(o.getBinaryShiftByteCount()>0){let f=o.addBinaryShiftChar(a).addBinaryShiftChar(a+1);u.push(f)}}static simplifyStates(o){let a=[];for(let c of o){let u=!0;for(let d of a){if(d.isBetterThanOrEqualTo(c)){u=!1;break}c.isBetterThanOrEqualTo(d)&&(a=a.filter(f=>f!==d))}u&&a.push(c)}return a}}class Qe{constructor(){}static encodeBytes(o){return Qe.encode(o,Qe.DEFAULT_EC_PERCENT,Qe.DEFAULT_AZTEC_LAYERS)}static encode(o,a,c){let u=new cc(o).encode(),d=z.truncDivision(u.getSize()*a,100)+11,f=u.getSize()+d,p,y,_,w,I;if(c!==Qe.DEFAULT_AZTEC_LAYERS){if(p=c<0,y=Math.abs(c),y>(p?Qe.MAX_NB_BITS_COMPACT:Qe.MAX_NB_BITS))throw new m(Ce.format("Illegal value %s for layers",c));_=Qe.totalBitsInLayer(y,p),w=Qe.WORD_SIZE[y];let B=_-_%w;if(I=Qe.stuffBits(u,w),I.getSize()+d>B)throw new m("Data to large for user specified layer");if(p&&I.getSize()>w*64)throw new m("Data to large for user specified layer")}else{w=0,I=null;for(let B=0;;B++){if(B>Qe.MAX_NB_BITS)throw new m("Data too large for an Aztec code");if(p=B<=3,y=p?B+1:B,_=Qe.totalBitsInLayer(y,p),f>_)continue;(I==null||w!==Qe.WORD_SIZE[y])&&(w=Qe.WORD_SIZE[y],I=Qe.stuffBits(u,w));let Be=_-_%w;if(!(p&&I.getSize()>w*64)&&I.getSize()+d<=Be)break}}let b=Qe.generateCheckWords(I,_,w),A=I.getSize()/w,T=Qe.generateModeMessage(p,y,A),M=(p?11:14)+y*4,R=new Int32Array(M),P;if(p){P=M;for(let B=0;B<R.length;B++)R[B]=B}else{P=M+1+2*z.truncDivision(z.truncDivision(M,2)-1,15);let B=z.truncDivision(M,2),Be=z.truncDivision(P,2);for(let De=0;De<B;De++){let On=De+z.truncDivision(De,15);R[B-De-1]=Be-On-1,R[B+De]=Be+On+1}}let q=new Kt(P);for(let B=0,Be=0;B<y;B++){let De=(y-B)*4+(p?9:12);for(let On=0;On<De;On++){let Sr=On*2;for(let Pn=0;Pn<2;Pn++)b.get(Be+Sr+Pn)&&q.set(R[B*2+Pn],R[B*2+On]),b.get(Be+De*2+Sr+Pn)&&q.set(R[B*2+On],R[M-1-B*2-Pn]),b.get(Be+De*4+Sr+Pn)&&q.set(R[M-1-B*2-Pn],R[M-1-B*2-On]),b.get(Be+De*6+Sr+Pn)&&q.set(R[M-1-B*2-On],R[B*2+Pn])}Be+=De*8}if(Qe.drawModeMessage(q,p,P,T),p)Qe.drawBullsEye(q,z.truncDivision(P,2),5);else{Qe.drawBullsEye(q,z.truncDivision(P,2),7);for(let B=0,Be=0;B<z.truncDivision(M,2)-1;B+=15,Be+=16)for(let De=z.truncDivision(P,2)&1;De<P;De+=2)q.set(z.truncDivision(P,2)-Be,De),q.set(z.truncDivision(P,2)+Be,De),q.set(De,z.truncDivision(P,2)-Be),q.set(De,z.truncDivision(P,2)+Be)}let Q=new Ev;return Q.setCompact(p),Q.setSize(P),Q.setLayers(y),Q.setCodeWords(A),Q.setMatrix(q),Q}static drawBullsEye(o,a,c){for(let u=0;u<c;u+=2)for(let d=a-u;d<=a+u;d++)o.set(d,a-u),o.set(d,a+u),o.set(a-u,d),o.set(a+u,d);o.set(a-c,a-c),o.set(a-c+1,a-c),o.set(a-c,a-c+1),o.set(a+c,a-c),o.set(a+c,a-c+1),o.set(a+c,a+c-1)}static generateModeMessage(o,a,c){let u=new ne;return o?(u.appendBits(a-1,2),u.appendBits(c-1,6),u=Qe.generateCheckWords(u,28,4)):(u.appendBits(a-1,5),u.appendBits(c-1,11),u=Qe.generateCheckWords(u,40,4)),u}static drawModeMessage(o,a,c,u){let d=z.truncDivision(c,2);if(a)for(let f=0;f<7;f++){let p=d-3+f;u.get(f)&&o.set(p,d-5),u.get(f+7)&&o.set(d+5,p),u.get(20-f)&&o.set(p,d+5),u.get(27-f)&&o.set(d-5,p)}else for(let f=0;f<10;f++){let p=d-5+f+z.truncDivision(f,5);u.get(f)&&o.set(p,d-7),u.get(f+10)&&o.set(d+7,p),u.get(29-f)&&o.set(p,d+7),u.get(39-f)&&o.set(d-7,p)}}static generateCheckWords(o,a,c){let u=o.getSize()/c,d=new yp(Qe.getGF(c)),f=z.truncDivision(a,c),p=Qe.bitsToWords(o,c,f);d.encode(p,f-u);let y=a%c,_=new ne;_.appendBits(0,y);for(let w of Array.from(p))_.appendBits(w,c);return _}static bitsToWords(o,a,c){let u=new Int32Array(c),d,f;for(d=0,f=o.getSize()/a;d<f;d++){let p=0;for(let y=0;y<a;y++)p|=o.get(d*a+y)?1<<a-y-1:0;u[d]=p}return u}static getGF(o){switch(o){case 4:return nt.AZTEC_PARAM;case 6:return nt.AZTEC_DATA_6;case 8:return nt.AZTEC_DATA_8;case 10:return nt.AZTEC_DATA_10;case 12:return nt.AZTEC_DATA_12;default:throw new m("Unsupported word size "+o)}}static stuffBits(o,a){let c=new ne,u=o.getSize(),d=(1<<a)-2;for(let f=0;f<u;f+=a){let p=0;for(let y=0;y<a;y++)(f+y>=u||o.get(f+y))&&(p|=1<<a-1-y);(p&d)===d?(c.appendBits(p&d,a),f--):p&d?c.appendBits(p,a):(c.appendBits(p|1,a),f--)}return c}static totalBitsInLayer(o,a){return((a?88:112)+16*o)*o}}Qe.DEFAULT_EC_PERCENT=33,Qe.DEFAULT_AZTEC_LAYERS=0,Qe.MAX_NB_BITS=32,Qe.MAX_NB_BITS_COMPACT=4,Qe.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Iu{encode(o,a,c,u){return this.encodeWithHints(o,a,c,u,null)}encodeWithHints(o,a,c,u,d){let f=vp.ISO_8859_1,p=Qe.DEFAULT_EC_PERCENT,y=Qe.DEFAULT_AZTEC_LAYERS;return d!=null&&(d.has(zt.CHARACTER_SET)&&(f=Cv.forName(d.get(zt.CHARACTER_SET).toString())),d.has(zt.ERROR_CORRECTION)&&(p=z.parseInt(d.get(zt.ERROR_CORRECTION).toString())),d.has(zt.AZTEC_LAYERS)&&(y=z.parseInt(d.get(zt.AZTEC_LAYERS).toString()))),Iu.encodeLayers(o,a,c,u,f,p,y)}static encodeLayers(o,a,c,u,d,f,p){if(a!==ge.AZTEC)throw new m("Can only encode AZTEC, but got "+a);let y=Qe.encode(Ce.getBytes(o,d),f,p);return Iu.renderResult(y,c,u)}static renderResult(o,a,c){let u=o.getMatrix();if(u==null)throw new ui;let d=u.getWidth(),f=u.getHeight(),p=Math.max(a,d),y=Math.max(c,f),_=Math.min(p/d,y/f),w=(p-d*_)/2,I=(y-f*_)/2,b=new Kt(p,y);for(let A=0,T=I;A<f;A++,T+=_)for(let M=0,R=w;M<d;M++,R+=_)u.get(M,A)&&b.setRegion(R,T,_,_);return b}}e.AbstractExpandedDecoder=ap,e.ArgumentException=g,e.ArithmeticException=ep,e.AztecCode=Ev,e.AztecCodeReader=hu,e.AztecCodeWriter=Iu,e.AztecDecoder=tp,e.AztecDetector=iv,e.AztecDetectorResult=nv,e.AztecEncoder=Qe,e.AztecHighLevelEncoder=cc,e.AztecPoint=xn,e.BarcodeFormat=ge,e.Binarizer=x,e.BinaryBitmap=C,e.BitArray=ne,e.BitMatrix=Kt,e.BitSource=dp,e.BrowserAztecCodeReader=jT,e.BrowserBarcodeReader=XT,e.BrowserCodeReader=To,e.BrowserDatamatrixCodeReader=KT,e.BrowserMultiFormatReader=f2,e.BrowserPDF417Reader=h2,e.BrowserQRCodeReader=p2,e.BrowserQRCodeSvgWriter=m2,e.CharacterSetECI=W,e.ChecksumException=E,e.Code128Reader=Z,e.Code39Reader=rp,e.DataMatrixDecodedBitStreamParser=$i,e.DataMatrixReader=yu,e.DecodeHintType=le,e.DecoderResult=Qa,e.DefaultGridSampler=rv,e.DetectorResult=du,e.EAN13Reader=pu,e.EncodeHintType=zt,e.Exception=h,e.FormatException=j,e.GenericGF=nt,e.GenericGFPoly=Nn,e.GlobalHistogramBinarizer=Jt,e.GridSampler=np,e.GridSamplerInstance=zi,e.HTMLCanvasElementLuminanceSource=Hi,e.HybridBinarizer=Ne,e.ITFReader=yt,e.IllegalArgumentException=m,e.IllegalStateException=ui,e.InvertedLuminanceSource=ji,e.LuminanceSource=Xa,e.MathUtils=Xe,e.MultiFormatOneDReader=Is,e.MultiFormatReader=_v,e.MultiFormatWriter=y2,e.NotFoundException=V,e.OneDReader=Bt,e.PDF417DecodedBitStreamParser=k,e.PDF417DecoderErrorCorrection=fv,e.PDF417Reader=an,e.PDF417ResultMetadata=gv,e.PerspectiveTransform=Cr,e.PlanarYUVLuminanceSource=_2,e.QRCodeByteMatrix=wu,e.QRCodeDataMask=tr,e.QRCodeDecodedBitStreamParser=uv,e.QRCodeDecoderErrorCorrectionLevel=Ct,e.QRCodeDecoderFormatInformation=yn,e.QRCodeEncoder=xt,e.QRCodeEncoderQRCode=Cu,e.QRCodeMaskUtil=bs,e.QRCodeMatrixUtil=me,e.QRCodeMode=he,e.QRCodeReader=qi,e.QRCodeVersion=ce,e.QRCodeWriter=wv,e.RGBLuminanceSource=_p,e.RSS14Reader=Mt,e.RSSExpandedReader=H,e.ReaderException=mp,e.ReedSolomonDecoder=ec,e.ReedSolomonEncoder=yp,e.ReedSolomonException=Ja,e.Result=bn,e.ResultMetadataType=en,e.ResultPoint=oe,e.StringUtils=Ce,e.UnsupportedOperationException=En,e.VideoInputDevice=J_,e.WhiteRectangleDetector=fu,e.WriterException=Et,e.ZXingArrays=G,e.ZXingCharset=Cv,e.ZXingInteger=z,e.ZXingStandardCharsets=vp,e.ZXingStringBuilder=mt,e.ZXingStringEncoding=Ft,e.ZXingSystem=D,e.createAbstractExpandedDecoder=lv,Object.defineProperty(e,"__esModule",{value:!0})})});function Mv(e,t){return Object.is(e,t)}var Wt=null,bu=!1,xu=1,di=Symbol("SIGNAL");function ze(e){let t=Wt;return Wt=e,t}function Nv(){return Wt}var uc={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Sp(e){if(bu)throw new Error("");if(Wt===null)return;Wt.consumerOnSignalRead(e);let t=Wt.nextProducerIndex++;if(Tu(Wt),t<Wt.producerNode.length&&Wt.producerNode[t]!==e&&lc(Wt)){let n=Wt.producerNode[t];Du(n,Wt.producerIndexOfThis[t])}Wt.producerNode[t]!==e&&(Wt.producerNode[t]=e,Wt.producerIndexOfThis[t]=lc(Wt)?kv(e,Wt,t):0),Wt.producerLastReadVersion[t]=e.version}function k2(){xu++}function Rv(e){if(!(lc(e)&&!e.dirty)&&!(!e.dirty&&e.lastCleanEpoch===xu)){if(!e.producerMustRecompute(e)&&!Dp(e)){e.dirty=!1,e.lastCleanEpoch=xu;return}e.producerRecomputeValue(e),e.dirty=!1,e.lastCleanEpoch=xu}}function Ov(e){if(e.liveConsumerNode===void 0)return;let t=bu;bu=!0;try{for(let n of e.liveConsumerNode)n.dirty||L2(n)}finally{bu=t}}function Pv(){return Wt?.consumerAllowSignalWrites!==!1}function L2(e){e.dirty=!0,Ov(e),e.consumerMarkedDirty?.(e)}function Au(e){return e&&(e.nextProducerIndex=0),ze(e)}function Ap(e,t){if(ze(t),!(!e||e.producerNode===void 0||e.producerIndexOfThis===void 0||e.producerLastReadVersion===void 0)){if(lc(e))for(let n=e.nextProducerIndex;n<e.producerNode.length;n++)Du(e.producerNode[n],e.producerIndexOfThis[n]);for(;e.producerNode.length>e.nextProducerIndex;)e.producerNode.pop(),e.producerLastReadVersion.pop(),e.producerIndexOfThis.pop()}}function Dp(e){Tu(e);for(let t=0;t<e.producerNode.length;t++){let n=e.producerNode[t],r=e.producerLastReadVersion[t];if(r!==n.version||(Rv(n),r!==n.version))return!0}return!1}function Tp(e){if(Tu(e),lc(e))for(let t=0;t<e.producerNode.length;t++)Du(e.producerNode[t],e.producerIndexOfThis[t]);e.producerNode.length=e.producerLastReadVersion.length=e.producerIndexOfThis.length=0,e.liveConsumerNode&&(e.liveConsumerNode.length=e.liveConsumerIndexOfThis.length=0)}function kv(e,t,n){if(Lv(e),e.liveConsumerNode.length===0&&Fv(e))for(let r=0;r<e.producerNode.length;r++)e.producerIndexOfThis[r]=kv(e.producerNode[r],e,r);return e.liveConsumerIndexOfThis.push(n),e.liveConsumerNode.push(t)-1}function Du(e,t){if(Lv(e),e.liveConsumerNode.length===1&&Fv(e))for(let r=0;r<e.producerNode.length;r++)Du(e.producerNode[r],e.producerIndexOfThis[r]);let n=e.liveConsumerNode.length-1;if(e.liveConsumerNode[t]=e.liveConsumerNode[n],e.liveConsumerIndexOfThis[t]=e.liveConsumerIndexOfThis[n],e.liveConsumerNode.length--,e.liveConsumerIndexOfThis.length--,t<e.liveConsumerNode.length){let r=e.liveConsumerIndexOfThis[t],i=e.liveConsumerNode[t];Tu(i),i.producerIndexOfThis[r]=t}}function lc(e){return e.consumerIsAlwaysLive||(e?.liveConsumerNode?.length??0)>0}function Tu(e){e.producerNode??=[],e.producerIndexOfThis??=[],e.producerLastReadVersion??=[]}function Lv(e){e.liveConsumerNode??=[],e.liveConsumerIndexOfThis??=[]}function Fv(e){return e.producerNode!==void 0}function Bv(e){let t=Object.create(F2);t.computation=e;let n=()=>{if(Rv(t),Sp(t),t.value===Su)throw t.error;return t.value};return n[di]=t,n}var bp=Symbol("UNSET"),xp=Symbol("COMPUTING"),Su=Symbol("ERRORED"),F2=Ve(K({},uc),{value:bp,dirty:!0,error:null,equal:Mv,producerMustRecompute(e){return e.value===bp||e.value===xp},producerRecomputeValue(e){if(e.value===xp)throw new Error("Detected cycle in computations.");let t=e.value;e.value=xp;let n=Au(e),r;try{r=e.computation()}catch(i){r=Su,e.error=i}finally{Ap(e,n)}if(t!==bp&&t!==Su&&r!==Su&&e.equal(t,r)){e.value=t;return}e.value=r,e.version++}});function B2(){throw new Error}var Vv=B2;function Uv(){Vv()}function jv(e){Vv=e}var V2=null;function Hv(e){let t=Object.create(Wv);t.value=e;let n=()=>(Sp(t),t.value);return n[di]=t,n}function Mp(e,t){Pv()||Uv(),e.equal(e.value,t)||(e.value=t,U2(e))}function zv(e,t){Pv()||Uv(),Mp(e,t(e.value))}var Wv=Ve(K({},uc),{equal:Mv,value:void 0});function U2(e){e.version++,k2(),Ov(e),V2?.()}function Ae(e){return typeof e=="function"}function Ds(e){let n=e(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Mu=Ds(e=>function(n){e(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Po(e,t){if(e){let n=e.indexOf(t);0<=n&&e.splice(n,1)}}var Nt=class e{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let s of n)s.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(Ae(r))try{r()}catch(s){t=s instanceof Mu?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{Gv(s)}catch(l){t=t??[],l instanceof Mu?t=[...t,...l.errors]:t.push(l)}}if(t)throw new Mu(t)}}add(t){var n;if(t&&t!==this)if(this.closed)Gv(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(t)}}_hasParent(t){let{_parentage:n}=this;return n===t||Array.isArray(n)&&n.includes(t)}_addParent(t){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t}_removeParent(t){let{_parentage:n}=this;n===t?this._parentage=null:Array.isArray(n)&&Po(n,t)}remove(t){let{_finalizers:n}=this;n&&Po(n,t),t instanceof e&&t._removeParent(this)}};Nt.EMPTY=(()=>{let e=new Nt;return e.closed=!0,e})();var Np=Nt.EMPTY;function Nu(e){return e instanceof Nt||e&&"closed"in e&&Ae(e.remove)&&Ae(e.add)&&Ae(e.unsubscribe)}function Gv(e){Ae(e)?e():e.unsubscribe()}var Ar={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Ts={setTimeout(e,t,...n){let{delegate:r}=Ts;return r?.setTimeout?r.setTimeout(e,t,...n):setTimeout(e,t,...n)},clearTimeout(e){let{delegate:t}=Ts;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0};function Ru(e){Ts.setTimeout(()=>{let{onUnhandledError:t}=Ar;if(t)t(e);else throw e})}function dc(){}var $v=Rp("C",void 0,void 0);function qv(e){return Rp("E",void 0,e)}function Yv(e){return Rp("N",e,void 0)}function Rp(e,t,n){return{kind:e,value:t,error:n}}var ko=null;function Ms(e){if(Ar.useDeprecatedSynchronousErrorHandling){let t=!ko;if(t&&(ko={errorThrown:!1,error:null}),e(),t){let{errorThrown:n,error:r}=ko;if(ko=null,n)throw r}}else e()}function Zv(e){Ar.useDeprecatedSynchronousErrorHandling&&ko&&(ko.errorThrown=!0,ko.error=e)}var Lo=class extends Nt{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,Nu(t)&&t.add(this)):this.destination=z2}static create(t,n,r){return new Ns(t,n,r)}next(t){this.isStopped?Pp(Yv(t),this):this._next(t)}error(t){this.isStopped?Pp(qv(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?Pp($v,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},j2=Function.prototype.bind;function Op(e,t){return j2.call(e,t)}var kp=class{constructor(t){this.partialObserver=t}next(t){let{partialObserver:n}=this;if(n.next)try{n.next(t)}catch(r){Ou(r)}}error(t){let{partialObserver:n}=this;if(n.error)try{n.error(t)}catch(r){Ou(r)}else Ou(t)}complete(){let{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(n){Ou(n)}}},Ns=class extends Lo{constructor(t,n,r){super();let i;if(Ae(t)||!t)i={next:t??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&Ar.useDeprecatedNextContext?(s=Object.create(t),s.unsubscribe=()=>this.unsubscribe(),i={next:t.next&&Op(t.next,s),error:t.error&&Op(t.error,s),complete:t.complete&&Op(t.complete,s)}):i=t}this.destination=new kp(i)}};function Ou(e){Ar.useDeprecatedSynchronousErrorHandling?Zv(e):Ru(e)}function H2(e){throw e}function Pp(e,t){let{onStoppedNotification:n}=Ar;n&&Ts.setTimeout(()=>n(e,t))}var z2={closed:!0,next:dc,error:H2,complete:dc};var Rs=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Yn(e){return e}function Lp(...e){return Fp(e)}function Fp(e){return e.length===0?Yn:e.length===1?e[0]:function(n){return e.reduce((r,i)=>i(r),n)}}var be=(()=>{class e{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new e;return r.source=this,r.operator=n,r}subscribe(n,r,i){let s=G2(n)?n:new Ns(n,r,i);return Ms(()=>{let{operator:l,source:h}=this;s.add(l?l.call(s,h):h?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=Xv(r),new r((i,s)=>{let l=new Ns({next:h=>{try{n(h)}catch(g){s(g),l.unsubscribe()}},error:s,complete:i});this.subscribe(l)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Rs](){return this}pipe(...n){return Fp(n)(this)}toPromise(n){return n=Xv(n),new n((r,i)=>{let s;this.subscribe(l=>s=l,l=>i(l),()=>r(s))})}}return e.create=t=>new e(t),e})();function Xv(e){var t;return(t=e??Ar.Promise)!==null&&t!==void 0?t:Promise}function W2(e){return e&&Ae(e.next)&&Ae(e.error)&&Ae(e.complete)}function G2(e){return e&&e instanceof Lo||W2(e)&&Nu(e)}function Bp(e){return Ae(e?.lift)}function Ye(e){return t=>{if(Bp(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ge(e,t,n,r,i){return new Vp(e,t,n,r,i)}var Vp=class extends Lo{constructor(t,n,r,i,s,l){super(t),this.onFinalize=s,this.shouldUnsubscribe=l,this._next=n?function(h){try{n(h)}catch(g){t.error(g)}}:super._next,this._error=i?function(h){try{i(h)}catch(g){t.error(g)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(h){t.error(h)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((t=this.onFinalize)===null||t===void 0||t.call(this))}}};function Os(){return Ye((e,t)=>{let n=null;e._refCount++;let r=Ge(t,void 0,void 0,void 0,()=>{if(!e||e._refCount<=0||0<--e._refCount){n=null;return}let i=e._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),t.unsubscribe()});e.subscribe(r),r.closed||(n=e.connect())})}var Ps=class extends be{constructor(t,n){super(),this.source=t,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Bp(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){let t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new Nt;let n=this.getSubject();t.add(this.source.subscribe(Ge(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),t.closed&&(this._connection=null,t=Nt.EMPTY)}return t}refCount(){return Os()(this)}};var Qv=Ds(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ln=(()=>{class e extends be{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Pu(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new Qv}next(n){Ms(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Ms(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Ms(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:s}=this;return r||i?Np:(this.currentObservers=null,s.push(n),new Nt(()=>{this.currentObservers=null,Po(s,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){let n=new be;return n.source=this,n}}return e.create=(t,n)=>new Pu(t,n),e})(),Pu=class extends ln{constructor(t,n){super(),this.destination=t,this.source=n}next(t){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,t)}error(t){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,t)}complete(){var t,n;(n=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||n===void 0||n.call(t)}_subscribe(t){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(t))!==null&&r!==void 0?r:Np}};var un=class extends ln{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){let n=super._subscribe(t);return!n.closed&&t.next(this._value),n}getValue(){let{hasError:t,thrownError:n,_value:r}=this;if(t)throw n;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}};var Up={now(){return(Up.delegate||Date).now()},delegate:void 0};var ku=class extends Nt{constructor(t,n){super()}schedule(t,n=0){return this}};var fc={setInterval(e,t,...n){let{delegate:r}=fc;return r?.setInterval?r.setInterval(e,t,...n):setInterval(e,t,...n)},clearInterval(e){let{delegate:t}=fc;return(t?.clearInterval||clearInterval)(e)},delegate:void 0};var Lu=class extends ku{constructor(t,n){super(t,n),this.scheduler=t,this.work=n,this.pending=!1}schedule(t,n=0){var r;if(this.closed)return this;this.state=t;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,n),this}requestAsyncId(t,n,r=0){return fc.setInterval(t.flush.bind(t,this),r)}recycleAsyncId(t,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&fc.clearInterval(n)}execute(t,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(t,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,n){let r=!1,i;try{this.work(t)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:t,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Po(r,this),t!=null&&(this.id=this.recycleAsyncId(n,t,null)),this.delay=null,super.unsubscribe()}}};var ks=class e{constructor(t,n=e.now){this.schedulerActionCtor=t,this.now=n}schedule(t,n=0,r){return new this.schedulerActionCtor(this,t).schedule(r,n)}};ks.now=Up.now;var Fu=class extends ks{constructor(t,n=ks.now){super(t,n),this.actions=[],this._active=!1}flush(t){let{actions:n}=this;if(this._active){n.push(t);return}let r;this._active=!0;do if(r=t.execute(t.state,t.delay))break;while(t=n.shift());if(this._active=!1,r){for(;t=n.shift();)t.unsubscribe();throw r}}};var Kv=new Fu(Lu),Jv=Kv;var Zn=new be(e=>e.complete());function Bu(e){return e&&Ae(e.schedule)}function ew(e){return e[e.length-1]}function Vu(e){return Ae(ew(e))?e.pop():void 0}function Xi(e){return Bu(ew(e))?e.pop():void 0}function jp(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function nw(e,t,n,r){function i(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function h(C){try{m(r.next(C))}catch(E){l(E)}}function g(C){try{m(r.throw(C))}catch(E){l(E)}}function m(C){C.done?s(C.value):i(C.value).then(h,g)}m((r=r.apply(e,t||[])).next())})}function tw(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Fo(e){return this instanceof Fo?(this.v=e,this):new Fo(e)}function rw(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),h("next"),h("throw"),h("return",l),i[Symbol.asyncIterator]=function(){return this},i;function l(D){return function(N){return Promise.resolve(N).then(D,E)}}function h(D,N){r[D]&&(i[D]=function(U){return new Promise(function(G,z){s.push([D,U,G,z])>1||g(D,U)})},N&&(i[D]=N(i[D])))}function g(D,N){try{m(r[D](N))}catch(U){x(s[0][3],U)}}function m(D){D.value instanceof Fo?Promise.resolve(D.value.v).then(C,E):x(s[0][2],D)}function C(D){g("next",D)}function E(D){g("throw",D)}function x(D,N){D(N),s.shift(),s.length&&g(s[0][0],s[0][1])}}function iw(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof tw=="function"?tw(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=e[s]&&function(l){return new Promise(function(h,g){l=e[s](l),i(h,g,l.done,l.value)})}}function i(s,l,h,g){Promise.resolve(g).then(function(m){s({value:m,done:h})},l)}}var Uu=e=>e&&typeof e.length=="number"&&typeof e!="function";function ju(e){return Ae(e?.then)}function Hu(e){return Ae(e[Rs])}function zu(e){return Symbol.asyncIterator&&Ae(e?.[Symbol.asyncIterator])}function Wu(e){return new TypeError(`You provided ${e!==null&&typeof e=="object"?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function $2(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Gu=$2();function $u(e){return Ae(e?.[Gu])}function qu(e){return rw(this,arguments,function*(){let n=e.getReader();try{for(;;){let{value:r,done:i}=yield Fo(n.read());if(i)return yield Fo(void 0);yield yield Fo(r)}}finally{n.releaseLock()}})}function Yu(e){return Ae(e?.getReader)}function Vt(e){if(e instanceof be)return e;if(e!=null){if(Hu(e))return q2(e);if(Uu(e))return Y2(e);if(ju(e))return Z2(e);if(zu(e))return ow(e);if($u(e))return X2(e);if(Yu(e))return Q2(e)}throw Wu(e)}function q2(e){return new be(t=>{let n=e[Rs]();if(Ae(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Y2(e){return new be(t=>{for(let n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}function Z2(e){return new be(t=>{e.then(n=>{t.closed||(t.next(n),t.complete())},n=>t.error(n)).then(null,Ru)})}function X2(e){return new be(t=>{for(let n of e)if(t.next(n),t.closed)return;t.complete()})}function ow(e){return new be(t=>{K2(e,t).catch(n=>t.error(n))})}function Q2(e){return ow(qu(e))}function K2(e,t){var n,r,i,s;return nw(this,void 0,void 0,function*(){try{for(n=iw(e);r=yield n.next(),!r.done;){let l=r.value;if(t.next(l),t.closed)return}}catch(l){i={error:l}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}t.complete()})}function kn(e,t,n,r=0,i=!1){let s=t.schedule(function(){n(),i?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(s),!i)return s}function Qi(e,t=0){return Ye((n,r)=>{n.subscribe(Ge(r,i=>kn(r,e,()=>r.next(i),t),()=>kn(r,e,()=>r.complete(),t),i=>kn(r,e,()=>r.error(i),t)))})}function Ki(e,t=0){return Ye((n,r)=>{r.add(e.schedule(()=>n.subscribe(r),t))})}function sw(e,t){return Vt(e).pipe(Ki(t),Qi(t))}function aw(e,t){return Vt(e).pipe(Ki(t),Qi(t))}function cw(e,t){return new be(n=>{let r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}function lw(e,t){return new be(n=>{let r;return kn(n,t,()=>{r=e[Gu](),kn(n,t,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(l){n.error(l);return}s?n.complete():n.next(i)},0,!0)}),()=>Ae(r?.return)&&r.return()})}function Zu(e,t){if(!e)throw new Error("Iterable cannot be null");return new be(n=>{kn(n,t,()=>{let r=e[Symbol.asyncIterator]();kn(n,t,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function uw(e,t){return Zu(qu(e),t)}function dw(e,t){if(e!=null){if(Hu(e))return sw(e,t);if(Uu(e))return cw(e,t);if(ju(e))return aw(e,t);if(zu(e))return Zu(e,t);if($u(e))return lw(e,t);if(Yu(e))return uw(e,t)}throw Wu(e)}function ot(e,t){return t?dw(e,t):Vt(e)}function xe(...e){let t=Xi(e);return ot(e,t)}function Ls(e,t){let n=Ae(e)?e:()=>e,r=i=>i.error(n());return new be(t?i=>t.schedule(r,0,i):r)}function Hp(e){return!!e&&(e instanceof be||Ae(e.lift)&&Ae(e.subscribe))}var fi=Ds(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"});function fw(e){return e instanceof Date&&!isNaN(e)}function Oe(e,t){return Ye((n,r)=>{let i=0;n.subscribe(Ge(r,s=>{r.next(e.call(t,s,i++))}))})}var{isArray:J2}=Array;function eM(e,t){return J2(t)?e(...t):e(t)}function Xu(e){return Oe(t=>eM(e,t))}var{isArray:tM}=Array,{getPrototypeOf:nM,prototype:rM,keys:iM}=Object;function Qu(e){if(e.length===1){let t=e[0];if(tM(t))return{args:t,keys:null};if(oM(t)){let n=iM(t);return{args:n.map(r=>t[r]),keys:n}}}return{args:e,keys:null}}function oM(e){return e&&typeof e=="object"&&nM(e)===rM}function Ku(e,t){return e.reduce((n,r,i)=>(n[r]=t[i],n),{})}function Ju(...e){let t=Xi(e),n=Vu(e),{args:r,keys:i}=Qu(e);if(r.length===0)return ot([],t);let s=new be(sM(r,t,i?l=>Ku(i,l):Yn));return n?s.pipe(Xu(n)):s}function sM(e,t,n=Yn){return r=>{hw(t,()=>{let{length:i}=e,s=new Array(i),l=i,h=i;for(let g=0;g<i;g++)hw(t,()=>{let m=ot(e[g],t),C=!1;m.subscribe(Ge(r,E=>{s[g]=E,C||(C=!0,h--),h||r.next(n(s.slice()))},()=>{--l||r.complete()}))},r)},r)}}function hw(e,t,n){e?kn(n,e,t):t()}function pw(e,t,n,r,i,s,l,h){let g=[],m=0,C=0,E=!1,x=()=>{E&&!g.length&&!m&&t.complete()},D=U=>m<r?N(U):g.push(U),N=U=>{s&&t.next(U),m++;let G=!1;Vt(n(U,C++)).subscribe(Ge(t,z=>{i?.(z),s?D(z):t.next(z)},()=>{G=!0},void 0,()=>{if(G)try{for(m--;g.length&&m<r;){let z=g.shift();l?kn(t,l,()=>N(z)):N(z)}x()}catch(z){t.error(z)}}))};return e.subscribe(Ge(t,D,()=>{E=!0,x()})),()=>{h?.()}}function Gt(e,t,n=1/0){return Ae(t)?Gt((r,i)=>Oe((s,l)=>t(r,s,i,l))(Vt(e(r,i))),n):(typeof t=="number"&&(n=t),Ye((r,i)=>pw(r,i,e,n)))}function zp(e=1/0){return Gt(Yn,e)}function gw(){return zp(1)}function Fs(...e){return gw()(ot(e,Xi(e)))}function ed(e){return new be(t=>{Vt(e()).subscribe(t)})}function Wp(...e){let t=Vu(e),{args:n,keys:r}=Qu(e),i=new be(s=>{let{length:l}=n;if(!l){s.complete();return}let h=new Array(l),g=l,m=l;for(let C=0;C<l;C++){let E=!1;Vt(n[C]).subscribe(Ge(s,x=>{E||(E=!0,m--),h[C]=x},()=>g--,void 0,()=>{(!g||!E)&&(m||s.next(r?Ku(r,h):h),s.complete())}))}});return t?i.pipe(Xu(t)):i}function Gp(e=0,t,n=Jv){let r=-1;return t!=null&&(Bu(t)?n=t:r=t),new be(i=>{let s=fw(e)?+e-n.now():e;s<0&&(s=0);let l=0;return n.schedule(function(){i.closed||(i.next(l++),0<=r?this.schedule(void 0,r):i.complete())},s)})}function Dr(e,t){return Ye((n,r)=>{let i=0;n.subscribe(Ge(r,s=>e.call(t,s,i++)&&r.next(s)))})}function Ln(e){return Ye((t,n)=>{let r=null,i=!1,s;r=t.subscribe(Ge(n,void 0,void 0,l=>{s=Vt(e(l,Ln(e)(t))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function mw(e,t,n,r,i){return(s,l)=>{let h=n,g=t,m=0;s.subscribe(Ge(l,C=>{let E=m++;g=h?e(g,C,E):(h=!0,C),r&&l.next(g)},i&&(()=>{h&&l.next(g),l.complete()})))}}function Bs(e,t){return Ae(t)?Gt(e,t,1):Gt(e,1)}function Ji(e){return Ye((t,n)=>{let r=!1;t.subscribe(Ge(n,i=>{r=!0,n.next(i)},()=>{r||n.next(e),n.complete()}))})}function hi(e){return e<=0?()=>Zn:Ye((t,n)=>{let r=0;t.subscribe(Ge(n,i=>{++r<=e&&(n.next(i),e<=r&&n.complete())}))})}function $p(e){return Oe(()=>e)}function td(e=aM){return Ye((t,n)=>{let r=!1;t.subscribe(Ge(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(e())))})}function aM(){return new fi}function hc(e){return Ye((t,n)=>{try{t.subscribe(n)}finally{n.add(e)}})}function $r(e,t){let n=arguments.length>=2;return r=>r.pipe(e?Dr((i,s)=>e(i,s,r)):Yn,hi(1),n?Ji(t):td(()=>new fi))}function Vs(e){return e<=0?()=>Zn:Ye((t,n)=>{let r=[];t.subscribe(Ge(n,i=>{r.push(i),e<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function qp(e,t){let n=arguments.length>=2;return r=>r.pipe(e?Dr((i,s)=>e(i,s,r)):Yn,Vs(1),n?Ji(t):td(()=>new fi))}function Yp(e,t){return Ye(mw(e,t,arguments.length>=2,!0))}function Zp(...e){let t=Xi(e);return Ye((n,r)=>{(t?Fs(e,n,t):Fs(e,n)).subscribe(r)})}function Xn(e,t){return Ye((n,r)=>{let i=null,s=0,l=!1,h=()=>l&&!i&&r.complete();n.subscribe(Ge(r,g=>{i?.unsubscribe();let m=0,C=s++;Vt(e(g,C)).subscribe(i=Ge(r,E=>r.next(t?t(g,E,C,m++):E),()=>{i=null,h()}))},()=>{l=!0,h()}))})}function Xp(e){return Ye((t,n)=>{Vt(e).subscribe(Ge(n,()=>n.complete(),dc)),!n.closed&&t.subscribe(n)})}function $t(e,t,n){let r=Ae(e)||t||n?{next:e,error:t,complete:n}:e;return r?Ye((i,s)=>{var l;(l=r.subscribe)===null||l===void 0||l.call(r);let h=!0;i.subscribe(Ge(s,g=>{var m;(m=r.next)===null||m===void 0||m.call(r,g),s.next(g)},()=>{var g;h=!1,(g=r.complete)===null||g===void 0||g.call(r),s.complete()},g=>{var m;h=!1,(m=r.error)===null||m===void 0||m.call(r,g),s.error(g)},()=>{var g,m;h&&((g=r.unsubscribe)===null||g===void 0||g.call(r)),(m=r.finalize)===null||m===void 0||m.call(r)}))}):Yn}var nC="https://g.co/ng/security#xss",ue=class extends Error{constructor(t,n){super(ym(t,n)),this.code=t}};function ym(e,t){return`${`NG0${Math.abs(e)}`}${t?": "+t:""}`}function Pd(e){return{toString:e}.toString()}var dg=globalThis;function wt(e){for(let t in e)if(e[t]===wt)return t;throw Error("Could not find renamed property on target object.")}function cM(e,t){for(let n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function Bn(e){if(typeof e=="string")return e;if(Array.isArray(e))return"["+e.map(Bn).join(", ")+"]";if(e==null)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;let t=e.toString();if(t==null)return""+t;let n=t.indexOf(`
`);return n===-1?t:t.substring(0,n)}function fg(e,t){return e==null||e===""?t===null?"":t:t==null||t===""?e:e+" "+t}var lM=wt({__forward_ref__:wt});function Zo(e){return e.__forward_ref__=Zo,e.toString=function(){return Bn(this())},e}function Sn(e){return rC(e)?e():e}function rC(e){return typeof e=="function"&&e.hasOwnProperty(lM)&&e.__forward_ref__===Zo}function de(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function vi(e){return{providers:e.providers||[],imports:e.imports||[]}}function kd(e){return yw(e,oC)||yw(e,sC)}function iC(e){return kd(e)!==null}function yw(e,t){return e.hasOwnProperty(t)?e[t]:null}function uM(e){let t=e&&(e[oC]||e[sC]);return t||null}function _w(e){return e&&(e.hasOwnProperty(vw)||e.hasOwnProperty(dM))?e[vw]:null}var oC=wt({\u0275prov:wt}),vw=wt({\u0275inj:wt}),sC=wt({ngInjectableDef:wt}),dM=wt({ngInjectorDef:wt}),Ie=class{constructor(t,n){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=de({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function aC(e){return e&&!!e.\u0275providers}var fM=wt({\u0275cmp:wt}),hM=wt({\u0275dir:wt}),pM=wt({\u0275pipe:wt}),gM=wt({\u0275mod:wt}),hd=wt({\u0275fac:wt}),mc=wt({__NG_ELEMENT_ID__:wt}),ww=wt({__NG_ENV_ID__:wt});function yc(e){return typeof e=="string"?e:e==null?"":String(e)}function mM(e){return typeof e=="function"?e.name||e.toString():typeof e=="object"&&e!=null&&typeof e.type=="function"?e.type.name||e.type.toString():yc(e)}function yM(e,t){let n=t?`. Dependency path: ${t.join(" > ")} > ${e}`:"";throw new ue(-200,e)}function _m(e,t){throw new ue(-201,!1)}var ke=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}(ke||{}),hg;function cC(){return hg}function rr(e){let t=hg;return hg=e,t}function lC(e,t,n){let r=kd(e);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&ke.Optional)return null;if(t!==void 0)return t;_m(e,"Injector")}var _M={},_c=_M,vM="__NG_DI_FLAG__",pd="ngTempTokenPath",wM="ngTokenPath",CM=/\n/gm,EM="\u0275",Cw="__source",zs;function IM(){return zs}function eo(e){let t=zs;return zs=e,t}function bM(e,t=ke.Default){if(zs===void 0)throw new ue(-203,!1);return zs===null?lC(e,void 0,t):zs.get(e,t&ke.Optional?null:void 0,t)}function Le(e,t=ke.Default){return(cC()||bM)(Sn(e),t)}function J(e,t=ke.Default){return Le(e,Ld(t))}function Ld(e){return typeof e>"u"||typeof e=="number"?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function pg(e){let t=[];for(let n=0;n<e.length;n++){let r=Sn(e[n]);if(Array.isArray(r)){if(r.length===0)throw new ue(900,!1);let i,s=ke.Default;for(let l=0;l<r.length;l++){let h=r[l],g=xM(h);typeof g=="number"?g===-1?i=h.token:s|=g:i=h}t.push(Le(i,s))}else t.push(Le(r))}return t}function xM(e){return e[vM]}function SM(e,t,n,r){let i=e[pd];throw t[Cw]&&i.unshift(t[Cw]),e.message=AM(`
`+e.message,i,n,r),e[wM]=i,e[pd]=null,e}function AM(e,t,n,r=null){e=e&&e.charAt(0)===`
`&&e.charAt(1)==EM?e.slice(2):e;let i=Bn(t);if(Array.isArray(t))i=t.map(Bn).join(" -> ");else if(typeof t=="object"){let s=[];for(let l in t)if(t.hasOwnProperty(l)){let h=t[l];s.push(l+":"+(typeof h=="string"?JSON.stringify(h):Bn(h)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${e.replace(CM,`
  `)}`}function Gs(e,t){let n=e.hasOwnProperty(hd);return n?e[hd]:null}function DM(e,t,n){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],s=t[r];if(n&&(i=n(i),s=n(s)),s!==i)return!1}return!0}function TM(e){return e.flat(Number.POSITIVE_INFINITY)}function vm(e,t){e.forEach(n=>Array.isArray(n)?vm(n,t):t(n))}function uC(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function gd(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function MM(e,t,n,r){let i=e.length;if(i==t)e.push(n,r);else if(i===1)e.push(r,e[0]),e[0]=n;else{for(i--,e.push(e[i-1],e[i]);i>t;){let s=i-2;e[i]=e[s],i--}e[t]=n,e[t+1]=r}}function wm(e,t,n){let r=Mc(e,t);return r>=0?e[r|1]=n:(r=~r,MM(e,r,t,n)),r}function Qp(e,t){let n=Mc(e,t);if(n>=0)return e[n|1]}function Mc(e,t){return NM(e,t,1)}function NM(e,t,n){let r=0,i=e.length>>n;for(;i!==r;){let s=r+(i-r>>1),l=e[s<<n];if(t===l)return s<<n;l>t?i=s:r=s+1}return~(i<<n)}var $s={},Fn=[],qs=new Ie(""),dC=new Ie("",-1),fC=new Ie(""),md=class{get(t,n=_c){if(n===_c){let r=new Error(`NullInjectorError: No provider for ${Bn(t)}!`);throw r.name="NullInjectorError",r}return n}},hC=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}(hC||{}),Zr=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}(Zr||{}),ro=function(e){return e[e.None=0]="None",e[e.SignalBased=1]="SignalBased",e[e.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",e}(ro||{});function RM(e,t,n){let r=e.length;for(;;){let i=e.indexOf(t,n);if(i===-1)return i;if(i===0||e.charCodeAt(i-1)<=32){let s=t.length;if(i+s===r||e.charCodeAt(i+s)<=32)return i}n=i+1}}function gg(e,t,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let s=n[r++],l=n[r++],h=n[r++];e.setAttribute(t,l,h,s)}else{let s=i,l=n[++r];PM(s)?e.setProperty(t,s,l):e.setAttribute(t,s,l),r++}}return r}function OM(e){return e===3||e===4||e===6}function PM(e){return e.charCodeAt(0)===64}function vc(e,t){if(!(t===null||t.length===0))if(e===null||e.length===0)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){let i=t[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?Ew(e,n,i,null,t[++r]):Ew(e,n,i,null,null))}}return e}function Ew(e,t,n,r,i){let s=0,l=e.length;if(t===-1)l=-1;else for(;s<e.length;){let h=e[s++];if(typeof h=="number"){if(h===t){l=-1;break}else if(h>t){l=s-1;break}}}for(;s<e.length;){let h=e[s];if(typeof h=="number")break;if(h===n){if(r===null){i!==null&&(e[s+1]=i);return}else if(r===e[s+1]){e[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}l!==-1&&(e.splice(l,0,t),s=l+1),e.splice(s++,0,n),r!==null&&e.splice(s++,0,r),i!==null&&e.splice(s++,0,i)}var pC="ng-template";function kM(e,t,n,r){let i=0;if(r){for(;i<t.length&&typeof t[i]=="string";i+=2)if(t[i]==="class"&&RM(t[i+1].toLowerCase(),n,0)!==-1)return!0}else if(Cm(e))return!1;if(i=t.indexOf(1,i),i>-1){let s;for(;++i<t.length&&typeof(s=t[i])=="string";)if(s.toLowerCase()===n)return!0}return!1}function Cm(e){return e.type===4&&e.value!==pC}function LM(e,t,n){let r=e.type===4&&!n?pC:e.value;return t===r}function FM(e,t,n){let r=4,i=e.attrs,s=i!==null?UM(i):0,l=!1;for(let h=0;h<t.length;h++){let g=t[h];if(typeof g=="number"){if(!l&&!Tr(r)&&!Tr(g))return!1;if(l&&Tr(g))continue;l=!1,r=g|r&1;continue}if(!l)if(r&4){if(r=2|r&1,g!==""&&!LM(e,g,n)||g===""&&t.length===1){if(Tr(r))return!1;l=!0}}else if(r&8){if(i===null||!kM(e,i,g,n)){if(Tr(r))return!1;l=!0}}else{let m=t[++h],C=BM(g,i,Cm(e),n);if(C===-1){if(Tr(r))return!1;l=!0;continue}if(m!==""){let E;if(C>s?E="":E=i[C+1].toLowerCase(),r&2&&m!==E){if(Tr(r))return!1;l=!0}}}}return Tr(r)||l}function Tr(e){return(e&1)===0}function BM(e,t,n,r){if(t===null)return-1;let i=0;if(r||!n){let s=!1;for(;i<t.length;){let l=t[i];if(l===e)return i;if(l===3||l===6)s=!0;else if(l===1||l===2){let h=t[++i];for(;typeof h=="string";)h=t[++i];continue}else{if(l===4)break;if(l===0){i+=4;continue}}i+=s?1:2}return-1}else return jM(t,e)}function VM(e,t,n=!1){for(let r=0;r<t.length;r++)if(FM(e,t[r],n))return!0;return!1}function UM(e){for(let t=0;t<e.length;t++){let n=e[t];if(OM(n))return t}return e.length}function jM(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){let r=e[n];if(typeof r=="number")return-1;if(r===t)return n;n++}return-1}function Iw(e,t){return e?":not("+t.trim()+")":t}function HM(e){let t=e[0],n=1,r=2,i="",s=!1;for(;n<e.length;){let l=e[n];if(typeof l=="string")if(r&2){let h=e[++n];i+="["+l+(h.length>0?'="'+h+'"':"")+"]"}else r&8?i+="."+l:r&4&&(i+=" "+l);else i!==""&&!Tr(l)&&(t+=Iw(s,i),i=""),r=l,s=s||!Tr(r);n++}return i!==""&&(t+=Iw(s,i)),t}function zM(e){return e.map(HM).join(",")}function WM(e){let t=[],n=[],r=1,i=2;for(;r<e.length;){let s=e[r];if(typeof s=="string")i===2?s!==""&&t.push(s,e[++r]):i===8&&n.push(s);else{if(!Tr(i))break;i=s}r++}return{attrs:t,classes:n}}function pe(e){return Pd(()=>{let t=vC(e),n=Ve(K({},t),{decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===hC.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&e.dependencies||null,getStandaloneInjector:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||Zr.Emulated,styles:e.styles||Fn,_:null,schemas:e.schemas||null,tView:null,id:""});wC(n);let r=e.dependencies;return n.directiveDefs=xw(r,!1),n.pipeDefs=xw(r,!0),n.id=qM(n),n})}function GM(e){return Vo(e)||gC(e)}function $M(e){return e!==null}function wi(e){return Pd(()=>({type:e.type,bootstrap:e.bootstrap||Fn,declarations:e.declarations||Fn,imports:e.imports||Fn,exports:e.exports||Fn,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function bw(e,t){if(e==null)return $s;let n={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r],s,l,h=ro.None;Array.isArray(i)?(h=i[0],s=i[1],l=i[2]??s):(s=i,l=i),t?(n[s]=h!==ro.None?[r,h]:r,t[s]=l):n[s]=r}return n}function Vn(e){return Pd(()=>{let t=vC(e);return wC(t),t})}function Vo(e){return e[fM]||null}function gC(e){return e[hM]||null}function mC(e){return e[pM]||null}function yC(e){let t=Vo(e)||gC(e)||mC(e);return t!==null?t.standalone:!1}function _C(e,t){let n=e[gM]||null;if(!n&&t===!0)throw new Error(`Type ${Bn(e)} does not have '\u0275mod' property.`);return n}function vC(e){let t={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputTransforms:null,inputConfig:e.inputs||$s,exportAs:e.exportAs||null,standalone:e.standalone===!0,signals:e.signals===!0,selectors:e.selectors||Fn,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:bw(e.inputs,t),outputs:bw(e.outputs),debugInfo:null}}function wC(e){e.features?.forEach(t=>t(e))}function xw(e,t){if(!e)return null;let n=t?mC:GM;return()=>(typeof e=="function"?e():e).map(r=>n(r)).filter($M)}function qM(e){let t=0,n=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,e.consts,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery].join("|");for(let i of n)t=Math.imul(31,t)+i.charCodeAt(0)<<0;return t+=2147483648,"c"+t}function Em(e){return{\u0275providers:e}}function YM(...e){return{\u0275providers:CC(!0,e),\u0275fromNgModule:!0}}function CC(e,...t){let n=[],r=new Set,i,s=l=>{n.push(l)};return vm(t,l=>{let h=l;mg(h,s,[],r)&&(i||=[],i.push(h))}),i!==void 0&&EC(i,s),n}function EC(e,t){for(let n=0;n<e.length;n++){let{ngModule:r,providers:i}=e[n];Im(i,s=>{t(s,r)})}}function mg(e,t,n,r){if(e=Sn(e),!e)return!1;let i=null,s=_w(e),l=!s&&Vo(e);if(!s&&!l){let g=e.ngModule;if(s=_w(g),s)i=g;else return!1}else{if(l&&!l.standalone)return!1;i=e}let h=r.has(i);if(l){if(h)return!1;if(r.add(i),l.dependencies){let g=typeof l.dependencies=="function"?l.dependencies():l.dependencies;for(let m of g)mg(m,t,n,r)}}else if(s){if(s.imports!=null&&!h){r.add(i);let m;try{vm(s.imports,C=>{mg(C,t,n,r)&&(m||=[],m.push(C))})}finally{}m!==void 0&&EC(m,t)}if(!h){let m=Gs(i)||(()=>new i);t({provide:i,useFactory:m,deps:Fn},i),t({provide:fC,useValue:i,multi:!0},i),t({provide:qs,useValue:()=>Le(i),multi:!0},i)}let g=s.providers;if(g!=null&&!h){let m=e;Im(g,C=>{t(C,m)})}}else return!1;return i!==e&&e.providers!==void 0}function Im(e,t){for(let n of e)aC(n)&&(n=n.\u0275providers),Array.isArray(n)?Im(n,t):t(n)}var ZM=wt({provide:String,useValue:wt});function IC(e){return e!==null&&typeof e=="object"&&ZM in e}function XM(e){return!!(e&&e.useExisting)}function QM(e){return!!(e&&e.useFactory)}function Ys(e){return typeof e=="function"}function KM(e){return!!e.useClass}var Fd=new Ie(""),ad={},JM={},Kp;function bm(){return Kp===void 0&&(Kp=new md),Kp}var or=class{},wc=class extends or{get destroyed(){return this._destroyed}constructor(t,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,_g(t,l=>this.processProvider(l)),this.records.set(dC,Us(void 0,this)),i.has("environment")&&this.records.set(or,Us(void 0,this));let s=this.records.get(Fd);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(fC,Fn,ke.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let t=ze(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ze(t)}}onDestroy(t){return this.assertNotDestroyed(),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){this.assertNotDestroyed();let n=eo(this),r=rr(void 0),i;try{return t()}finally{eo(n),rr(r)}}get(t,n=_c,r=ke.Default){if(this.assertNotDestroyed(),t.hasOwnProperty(ww))return t[ww](this);r=Ld(r);let i,s=eo(this),l=rr(void 0);try{if(!(r&ke.SkipSelf)){let g=this.records.get(t);if(g===void 0){let m=iN(t)&&kd(t);m&&this.injectableDefInScope(m)?g=Us(yg(t),ad):g=null,this.records.set(t,g)}if(g!=null)return this.hydrate(t,g)}let h=r&ke.Self?bm():this.parent;return n=r&ke.Optional&&n===_c?null:n,h.get(t,n)}catch(h){if(h.name==="NullInjectorError"){if((h[pd]=h[pd]||[]).unshift(Bn(t)),s)throw h;return SM(h,t,"R3InjectorError",this.source)}else throw h}finally{rr(l),eo(s)}}resolveInjectorInitializers(){let t=ze(null),n=eo(this),r=rr(void 0),i;try{let s=this.get(qs,Fn,ke.Self);for(let l of s)l()}finally{eo(n),rr(r),ze(t)}}toString(){let t=[],n=this.records;for(let r of n.keys())t.push(Bn(r));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ue(205,!1)}processProvider(t){t=Sn(t);let n=Ys(t)?t:Sn(t&&t.provide),r=tN(t);if(!Ys(t)&&t.multi===!0){let i=this.records.get(n);i||(i=Us(void 0,ad,!0),i.factory=()=>pg(i.multi),this.records.set(n,i)),n=t,i.multi.push(t)}this.records.set(n,r)}hydrate(t,n){let r=ze(null);try{return n.value===ad&&(n.value=JM,n.value=n.factory()),typeof n.value=="object"&&n.value&&rN(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{ze(r)}}injectableDefInScope(t){if(!t.providedIn)return!1;let n=Sn(t.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(t){let n=this._onDestroyHooks.indexOf(t);n!==-1&&this._onDestroyHooks.splice(n,1)}};function yg(e){let t=kd(e),n=t!==null?t.factory:Gs(e);if(n!==null)return n;if(e instanceof Ie)throw new ue(204,!1);if(e instanceof Function)return eN(e);throw new ue(204,!1)}function eN(e){if(e.length>0)throw new ue(204,!1);let n=uM(e);return n!==null?()=>n.factory(e):()=>new e}function tN(e){if(IC(e))return Us(void 0,e.useValue);{let t=bC(e);return Us(t,ad)}}function bC(e,t,n){let r;if(Ys(e)){let i=Sn(e);return Gs(i)||yg(i)}else if(IC(e))r=()=>Sn(e.useValue);else if(QM(e))r=()=>e.useFactory(...pg(e.deps||[]));else if(XM(e))r=()=>Le(Sn(e.useExisting));else{let i=Sn(e&&(e.useClass||e.provide));if(nN(e))r=()=>new i(...pg(e.deps));else return Gs(i)||yg(i)}return r}function Us(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function nN(e){return!!e.deps}function rN(e){return e!==null&&typeof e=="object"&&typeof e.ngOnDestroy=="function"}function iN(e){return typeof e=="function"||typeof e=="object"&&e instanceof Ie}function _g(e,t){for(let n of e)Array.isArray(n)?_g(n,t):n&&aC(n)?_g(n.\u0275providers,t):t(n)}function Ci(e,t){e instanceof wc&&e.assertNotDestroyed();let n,r=eo(e),i=rr(void 0);try{return t()}finally{eo(r),rr(i)}}function oN(){return cC()!==void 0||IM()!=null}function sN(e){return typeof e=="function"}var Ei=0,Se=1,Ee=2,wn=3,Nr=4,Or=5,Cc=6,yd=7,_n=8,Zs=9,pi=10,Ut=11,Ec=12,Sw=13,na=14,Rr=15,Uo=16,js=17,gi=18,Bd=19,xC=20,to=21,Jp=22,ir=23,sr=25,SC=1;var jo=7,_d=8,Xs=9,vn=10,vd=function(e){return e[e.None=0]="None",e[e.HasTransplantedViews=2]="HasTransplantedViews",e}(vd||{});function no(e){return Array.isArray(e)&&typeof e[SC]=="object"}function Ii(e){return Array.isArray(e)&&e[SC]===!0}function AC(e){return(e.flags&4)!==0}function Vd(e){return e.componentOffset>-1}function xm(e){return(e.flags&1)===1}function io(e){return!!e.template}function vg(e){return(e[Ee]&512)!==0}var wg=class{constructor(t,n,r){this.previousValue=t,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function DC(e,t,n,r){t!==null?t.applyValueToInputSignal(t,r):e[n]=r}function bi(){return TC}function TC(e){return e.type.prototype.ngOnChanges&&(e.setInput=cN),aN}bi.ngInherit=!0;function aN(){let e=NC(this),t=e?.current;if(t){let n=e.previous;if(n===$s)e.previous=t;else for(let r in t)n[r]=t[r];e.current=null,this.ngOnChanges(t)}}function cN(e,t,n,r,i){let s=this.declaredInputs[r],l=NC(e)||lN(e,{previous:$s,current:null}),h=l.current||(l.current={}),g=l.previous,m=g[s];h[s]=new wg(m&&m.currentValue,n,g===$s),DC(e,t,i,n)}var MC="__ngSimpleChanges__";function NC(e){return e[MC]||null}function lN(e,t){return e[MC]=t}var Aw=null;var qr=function(e,t,n){Aw?.(e,t,n)},uN="svg",dN="math";function Xr(e){for(;Array.isArray(e);)e=e[Ei];return e}function RC(e,t){return Xr(t[e])}function ar(e,t){return Xr(t[e.index])}function Sm(e,t){return e.data[t]}function fN(e,t){return e[t]}function ao(e,t){let n=t[e];return no(n)?n:n[Ei]}function hN(e){return(e[Ee]&4)===4}function Am(e){return(e[Ee]&128)===128}function pN(e){return Ii(e[wn])}function Qs(e,t){return t==null?null:e[t]}function OC(e){e[js]=0}function PC(e){e[Ee]&1024||(e[Ee]|=1024,Am(e)&&jd(e))}function gN(e,t){for(;e>0;)t=t[na],e--;return t}function Ud(e){return!!(e[Ee]&9216||e[ir]?.dirty)}function Cg(e){e[pi].changeDetectionScheduler?.notify(8),e[Ee]&64&&(e[Ee]|=1024),Ud(e)&&jd(e)}function jd(e){e[pi].changeDetectionScheduler?.notify(0);let t=Ho(e);for(;t!==null&&!(t[Ee]&8192||(t[Ee]|=8192,!Am(t)));)t=Ho(t)}function kC(e,t){if((e[Ee]&256)===256)throw new ue(911,!1);e[to]===null&&(e[to]=[]),e[to].push(t)}function mN(e,t){if(e[to]===null)return;let n=e[to].indexOf(t);n!==-1&&e[to].splice(n,1)}function Ho(e){let t=e[wn];return Ii(t)?t[wn]:t}var Fe={lFrame:WC(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var LC=!1;function yN(){return Fe.lFrame.elementDepthCount}function _N(){Fe.lFrame.elementDepthCount++}function vN(){Fe.lFrame.elementDepthCount--}function FC(){return Fe.bindingsEnabled}function wN(){return Fe.skipHydrationRootTNode!==null}function CN(e){return Fe.skipHydrationRootTNode===e}function EN(){Fe.skipHydrationRootTNode=null}function Ke(){return Fe.lFrame.lView}function dn(){return Fe.lFrame.tView}function kt(e){return Fe.lFrame.contextLView=e,e[_n]}function Lt(e){return Fe.lFrame.contextLView=null,e}function Un(){let e=BC();for(;e!==null&&e.type===64;)e=e.parent;return e}function BC(){return Fe.lFrame.currentTNode}function IN(){let e=Fe.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}function Nc(e,t){let n=Fe.lFrame;n.currentTNode=e,n.isParent=t}function VC(){return Fe.lFrame.isParent}function bN(){Fe.lFrame.isParent=!1}function xN(){return Fe.lFrame.contextLView}function UC(){return LC}function Dw(e){LC=e}function SN(){return Fe.lFrame.bindingIndex}function AN(e){return Fe.lFrame.bindingIndex=e}function ra(){return Fe.lFrame.bindingIndex++}function Dm(e){let t=Fe.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}function DN(){return Fe.lFrame.inI18n}function TN(e,t){let n=Fe.lFrame;n.bindingIndex=n.bindingRootIndex=e,Eg(t)}function MN(){return Fe.lFrame.currentDirectiveIndex}function Eg(e){Fe.lFrame.currentDirectiveIndex=e}function NN(e){let t=Fe.lFrame.currentDirectiveIndex;return t===-1?null:e[t]}function jC(){return Fe.lFrame.currentQueryIndex}function Tm(e){Fe.lFrame.currentQueryIndex=e}function RN(e){let t=e[Se];return t.type===2?t.declTNode:t.type===1?e[Or]:null}function HC(e,t,n){if(n&ke.SkipSelf){let i=t,s=e;for(;i=i.parent,i===null&&!(n&ke.Host);)if(i=RN(s),i===null||(s=s[na],i.type&10))break;if(i===null)return!1;t=i,e=s}let r=Fe.lFrame=zC();return r.currentTNode=t,r.lView=e,!0}function Mm(e){let t=zC(),n=e[Se];Fe.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function zC(){let e=Fe.lFrame,t=e===null?null:e.child;return t===null?WC(e):t}function WC(e){let t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return e!==null&&(e.child=t),t}function GC(){let e=Fe.lFrame;return Fe.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}var $C=GC;function Nm(){let e=GC();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function ON(e){return(Fe.lFrame.contextLView=gN(e,Fe.lFrame.contextLView))[_n]}function xi(){return Fe.lFrame.selectedIndex}function zo(e){Fe.lFrame.selectedIndex=e}function Rm(){let e=Fe.lFrame;return Sm(e.tView,e.selectedIndex)}function PN(){return Fe.lFrame.currentNamespace}var qC=!0;function Om(){return qC}function Pm(e){qC=e}function kN(e,t,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=t.type.prototype;if(r){let l=TC(t);(n.preOrderHooks??=[]).push(e,l),(n.preOrderCheckHooks??=[]).push(e,l)}i&&(n.preOrderHooks??=[]).push(0-e,i),s&&((n.preOrderHooks??=[]).push(e,s),(n.preOrderCheckHooks??=[]).push(e,s))}function km(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){let s=e.data[n].type.prototype,{ngAfterContentInit:l,ngAfterContentChecked:h,ngAfterViewInit:g,ngAfterViewChecked:m,ngOnDestroy:C}=s;l&&(e.contentHooks??=[]).push(-n,l),h&&((e.contentHooks??=[]).push(n,h),(e.contentCheckHooks??=[]).push(n,h)),g&&(e.viewHooks??=[]).push(-n,g),m&&((e.viewHooks??=[]).push(n,m),(e.viewCheckHooks??=[]).push(n,m)),C!=null&&(e.destroyHooks??=[]).push(n,C)}}function cd(e,t,n){YC(e,t,3,n)}function ld(e,t,n,r){(e[Ee]&3)===n&&YC(e,t,n,r)}function eg(e,t){let n=e[Ee];(n&3)===t&&(n&=16383,n+=1,e[Ee]=n)}function YC(e,t,n,r){let i=r!==void 0?e[js]&65535:0,s=r??-1,l=t.length-1,h=0;for(let g=i;g<l;g++)if(typeof t[g+1]=="number"){if(h=t[g],r!=null&&h>=r)break}else t[g]<0&&(e[js]+=65536),(h<s||s==-1)&&(LN(e,n,t,g),e[js]=(e[js]&4294901760)+g+2),g++}function Tw(e,t){qr(4,e,t);let n=ze(null);try{t.call(e)}finally{ze(n),qr(5,e,t)}}function LN(e,t,n,r){let i=n[r]<0,s=n[r+1],l=i?-n[r]:n[r],h=e[l];i?e[Ee]>>14<e[js]>>16&&(e[Ee]&3)===t&&(e[Ee]+=16384,Tw(h,s)):Tw(h,s)}var Ws=-1,Wo=class{constructor(t,n,r){this.factory=t,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function FN(e){return e instanceof Wo}function BN(e){return(e.flags&8)!==0}function VN(e){return(e.flags&16)!==0}var tg={},Ig=class{constructor(t,n){this.injector=t,this.parentInjector=n}get(t,n,r){r=Ld(r);let i=this.injector.get(t,tg,r);return i!==tg||n===tg?i:this.parentInjector.get(t,n,r)}};function ZC(e){return e!==Ws}function wd(e){return e&32767}function UN(e){return e>>16}function Cd(e,t){let n=UN(e),r=t;for(;n>0;)r=r[na],n--;return r}var bg=!0;function Mw(e){let t=bg;return bg=e,t}var jN=256,XC=jN-1,QC=5,HN=0,Yr={};function zN(e,t,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(mc)&&(r=n[mc]),r==null&&(r=n[mc]=HN++);let i=r&XC,s=1<<i;t.data[e+(i>>QC)]|=s}function Ed(e,t){let n=KC(e,t);if(n!==-1)return n;let r=t[Se];r.firstCreatePass&&(e.injectorIndex=t.length,ng(r.data,e),ng(t,null),ng(r.blueprint,null));let i=Lm(e,t),s=e.injectorIndex;if(ZC(i)){let l=wd(i),h=Cd(i,t),g=h[Se].data;for(let m=0;m<8;m++)t[s+m]=h[l+m]|g[l+m]}return t[s+8]=i,s}function ng(e,t){e.push(0,0,0,0,0,0,0,0,t)}function KC(e,t){return e.injectorIndex===-1||e.parent&&e.parent.injectorIndex===e.injectorIndex||t[e.injectorIndex+8]===null?-1:e.injectorIndex}function Lm(e,t){if(e.parent&&e.parent.injectorIndex!==-1)return e.parent.injectorIndex;let n=0,r=null,i=t;for(;i!==null;){if(r=rE(i),r===null)return Ws;if(n++,i=i[na],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Ws}function xg(e,t,n){zN(e,t,n)}function JC(e,t,n){if(n&ke.Optional||e!==void 0)return e;_m(t,"NodeInjector")}function eE(e,t,n,r){if(n&ke.Optional&&r===void 0&&(r=null),!(n&(ke.Self|ke.Host))){let i=e[Zs],s=rr(void 0);try{return i?i.get(t,r,n&ke.Optional):lC(t,r,n&ke.Optional)}finally{rr(s)}}return JC(r,t,n)}function tE(e,t,n,r=ke.Default,i){if(e!==null){if(t[Ee]&2048&&!(r&ke.Self)){let l=qN(e,t,n,r,Yr);if(l!==Yr)return l}let s=nE(e,t,n,r,Yr);if(s!==Yr)return s}return eE(t,n,r,i)}function nE(e,t,n,r,i){let s=GN(n);if(typeof s=="function"){if(!HC(t,e,r))return r&ke.Host?JC(i,n,r):eE(t,n,r,i);try{let l;if(l=s(r),l==null&&!(r&ke.Optional))_m(n);else return l}finally{$C()}}else if(typeof s=="number"){let l=null,h=KC(e,t),g=Ws,m=r&ke.Host?t[Rr][Or]:null;for((h===-1||r&ke.SkipSelf)&&(g=h===-1?Lm(e,t):t[h+8],g===Ws||!Rw(r,!1)?h=-1:(l=t[Se],h=wd(g),t=Cd(g,t)));h!==-1;){let C=t[Se];if(Nw(s,h,C.data)){let E=WN(h,t,n,l,r,m);if(E!==Yr)return E}g=t[h+8],g!==Ws&&Rw(r,t[Se].data[h+8]===m)&&Nw(s,h,t)?(l=C,h=wd(g),t=Cd(g,t)):h=-1}}return i}function WN(e,t,n,r,i,s){let l=t[Se],h=l.data[e+8],g=r==null?Vd(h)&&bg:r!=l&&(h.type&3)!==0,m=i&ke.Host&&s===h,C=ud(h,l,n,g,m);return C!==null?Go(t,l,C,h):Yr}function ud(e,t,n,r,i){let s=e.providerIndexes,l=t.data,h=s&1048575,g=e.directiveStart,m=e.directiveEnd,C=s>>20,E=r?h:h+C,x=i?h+C:m;for(let D=E;D<x;D++){let N=l[D];if(D<g&&n===N||D>=g&&N.type===n)return D}if(i){let D=l[g];if(D&&io(D)&&D.type===n)return g}return null}function Go(e,t,n,r){let i=e[n],s=t.data;if(FN(i)){let l=i;l.resolving&&yM(mM(s[n]));let h=Mw(l.canSeeViewProviders);l.resolving=!0;let g,m=l.injectImpl?rr(l.injectImpl):null,C=HC(e,r,ke.Default);try{i=e[n]=l.factory(void 0,s,e,r),t.firstCreatePass&&n>=r.directiveStart&&kN(n,s[n],t)}finally{m!==null&&rr(m),Mw(h),l.resolving=!1,$C()}}return i}function GN(e){if(typeof e=="string")return e.charCodeAt(0)||0;let t=e.hasOwnProperty(mc)?e[mc]:void 0;return typeof t=="number"?t>=0?t&XC:$N:t}function Nw(e,t,n){let r=1<<e;return!!(n[t+(e>>QC)]&r)}function Rw(e,t){return!(e&ke.Self)&&!(e&ke.Host&&t)}var Bo=class{constructor(t,n){this._tNode=t,this._lView=n}get(t,n,r){return tE(this._tNode,this._lView,t,Ld(r),n)}};function $N(){return new Bo(Un(),Ke())}function ia(e){return Pd(()=>{let t=e.prototype.constructor,n=t[hd]||Sg(t),r=Object.prototype,i=Object.getPrototypeOf(e.prototype).constructor;for(;i&&i!==r;){let s=i[hd]||Sg(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function Sg(e){return rC(e)?()=>{let t=Sg(Sn(e));return t&&t()}:Gs(e)}function qN(e,t,n,r,i){let s=e,l=t;for(;s!==null&&l!==null&&l[Ee]&2048&&!(l[Ee]&512);){let h=nE(s,l,n,r|ke.Self,Yr);if(h!==Yr)return h;let g=s.parent;if(!g){let m=l[xC];if(m){let C=m.get(n,Yr,r);if(C!==Yr)return C}g=rE(l),l=l[na]}s=g}return i}function rE(e){let t=e[Se],n=t.type;return n===2?t.declTNode:n===1?e[Or]:null}function Ow(e,t=null,n=null,r){let i=iE(e,t,n,r);return i.resolveInjectorInitializers(),i}function iE(e,t=null,n=null,r,i=new Set){let s=[n||Fn,YM(e)];return r=r||(typeof e=="object"?void 0:Bn(e)),new wc(s,t||bm(),r||null,i)}var oo=class e{static{this.THROW_IF_NOT_FOUND=_c}static{this.NULL=new md}static create(t,n){if(Array.isArray(t))return Ow({name:""},n,t,"");{let r=t.name??"";return Ow({name:r},t.parent,t.providers,r)}}static{this.\u0275prov=de({token:e,providedIn:"any",factory:()=>Le(dC)})}static{this.__NG_ELEMENT_ID__=-1}};var YN=new Ie("");YN.__NG_ELEMENT_ID__=e=>{let t=Un();if(t===null)throw new ue(204,!1);if(t.type&2)return t.value;if(e&ke.Optional)return null;throw new ue(204,!1)};var ZN="ngOriginalError";function rg(e){return e[ZN]}var oE=!0,sE=(()=>{class e{static{this.__NG_ELEMENT_ID__=XN}static{this.__NG_ENV_ID__=n=>n}}return e})(),Ag=class extends sE{constructor(t){super(),this._lView=t}onDestroy(t){return kC(this._lView,t),()=>mN(this._lView,t)}};function XN(){return new Ag(Ke())}var oa=(()=>{class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new un(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=de({token:e,providedIn:"root",factory:()=>new e})}}return e})();var Dg=class extends ln{constructor(t=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=t,oN()&&(this.destroyRef=J(sE,{optional:!0})??void 0,this.pendingTasks=J(oa,{optional:!0})??void 0)}emit(t){let n=ze(null);try{super.next(t)}finally{ze(n)}}subscribe(t,n,r){let i=t,s=n||(()=>null),l=r;if(t&&typeof t=="object"){let g=t;i=g.next?.bind(g),s=g.error?.bind(g),l=g.complete?.bind(g)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),l&&(l=this.wrapInTimeout(l)));let h=super.subscribe({next:i,error:s,complete:l});return t instanceof Nt&&t.add(h),h}wrapInTimeout(t){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{t(n),r!==void 0&&this.pendingTasks?.remove(r)})}}},At=Dg;function Id(...e){}function aE(e){let t,n;function r(){e=Id;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),t!==void 0&&clearTimeout(t)}catch{}}return t=setTimeout(()=>{e(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{e(),r()})),()=>r()}function Pw(e){return queueMicrotask(()=>e()),()=>{e=Id}}var Fm="isAngularZone",bd=Fm+"_ID",QN=0,qt=class e{constructor(t){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new At(!1),this.onMicrotaskEmpty=new At(!1),this.onStable=new At(!1),this.onError=new At(!1);let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=oE}=t;if(typeof Zone>"u")throw new ue(908,!1);Zone.assertZonePatched();let l=this;l._nesting=0,l._outer=l._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(l._inner=l._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(l._inner=l._inner.fork(Zone.longStackTraceZoneSpec)),l.shouldCoalesceEventChangeDetection=!i&&r,l.shouldCoalesceRunChangeDetection=i,l.callbackScheduled=!1,l.scheduleInRootZone=s,eR(l)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Fm)===!0}static assertInAngularZone(){if(!e.isInAngularZone())throw new ue(909,!1)}static assertNotInAngularZone(){if(e.isInAngularZone())throw new ue(909,!1)}run(t,n,r){return this._inner.run(t,n,r)}runTask(t,n,r,i){let s=this._inner,l=s.scheduleEventTask("NgZoneEvent: "+i,t,KN,Id,Id);try{return s.runTask(l,n,r)}finally{s.cancelTask(l)}}runGuarded(t,n,r){return this._inner.runGuarded(t,n,r)}runOutsideAngular(t){return this._outer.run(t)}},KN={};function Bm(e){if(e._nesting==0&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function JN(e){if(e.isCheckStableRunning||e.callbackScheduled)return;e.callbackScheduled=!0;function t(){aE(()=>{e.callbackScheduled=!1,Tg(e),e.isCheckStableRunning=!0,Bm(e),e.isCheckStableRunning=!1})}e.scheduleInRootZone?Zone.root.run(()=>{t()}):e._outer.run(()=>{t()}),Tg(e)}function eR(e){let t=()=>{JN(e)},n=QN++;e._inner=e._inner.fork({name:"angular",properties:{[Fm]:!0,[bd]:n,[bd+n]:!0},onInvokeTask:(r,i,s,l,h,g)=>{if(tR(g))return r.invokeTask(s,l,h,g);try{return kw(e),r.invokeTask(s,l,h,g)}finally{(e.shouldCoalesceEventChangeDetection&&l.type==="eventTask"||e.shouldCoalesceRunChangeDetection)&&t(),Lw(e)}},onInvoke:(r,i,s,l,h,g,m)=>{try{return kw(e),r.invoke(s,l,h,g,m)}finally{e.shouldCoalesceRunChangeDetection&&!e.callbackScheduled&&!nR(g)&&t(),Lw(e)}},onHasTask:(r,i,s,l)=>{r.hasTask(s,l),i===s&&(l.change=="microTask"?(e._hasPendingMicrotasks=l.microTask,Tg(e),Bm(e)):l.change=="macroTask"&&(e.hasPendingMacrotasks=l.macroTask))},onHandleError:(r,i,s,l)=>(r.handleError(s,l),e.runOutsideAngular(()=>e.onError.emit(l)),!1)})}function Tg(e){e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&e.callbackScheduled===!0?e.hasPendingMicrotasks=!0:e.hasPendingMicrotasks=!1}function kw(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function Lw(e){e._nesting--,Bm(e)}var Mg=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new At,this.onMicrotaskEmpty=new At,this.onStable=new At,this.onError=new At}run(t,n,r){return t.apply(n,r)}runGuarded(t,n,r){return t.apply(n,r)}runOutsideAngular(t){return t()}runTask(t,n,r,i){return t.apply(n,r)}};function tR(e){return cE(e,"__ignore_ng_zone__")}function nR(e){return cE(e,"__scheduler_tick__")}function cE(e,t){return!Array.isArray(e)||e.length!==1?!1:e[0]?.data?.[t]===!0}var mi=class{constructor(){this._console=console}handleError(t){let n=this._findOriginalError(t);this._console.error("ERROR",t),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(t){let n=t&&rg(t);for(;n&&rg(n);)n=rg(n);return n||null}},rR=new Ie("",{providedIn:"root",factory:()=>{let e=J(qt),t=J(mi);return n=>e.runOutsideAngular(()=>t.handleError(n))}});function iR(){return sa(Un(),Ke())}function sa(e,t){return new Kr(ar(e,t))}var Kr=(()=>{class e{constructor(n){this.nativeElement=n}static{this.__NG_ELEMENT_ID__=iR}}return e})();function oR(e){return e instanceof Kr?e.nativeElement:e}function sR(){return this._results[Symbol.iterator]()}var Ng=class e{get changes(){return this._changes??=new At}constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let n=e.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=sR)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,n){return this._results.reduce(t,n)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,n){this.dirty=!1;let r=TM(t);(this._changesDetected=!DM(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(t){this._onDirty=t}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function lE(e){return(e.flags&128)===128}var uE=new Map,aR=0;function cR(){return aR++}function lR(e){uE.set(e[Bd],e)}function Rg(e){uE.delete(e[Bd])}var Fw="__ngContext__";function $o(e,t){no(t)?(e[Fw]=t[Bd],lR(t)):e[Fw]=t}function dE(e){return hE(e[Ec])}function fE(e){return hE(e[Nr])}function hE(e){for(;e!==null&&!Ii(e);)e=e[Nr];return e}var Og;function pE(e){Og=e}function uR(){if(Og!==void 0)return Og;if(typeof document<"u")return document;throw new ue(210,!1)}var Vm=new Ie("",{providedIn:"root",factory:()=>dR}),dR="ng",Um=new Ie(""),aa=new Ie("",{providedIn:"platform",factory:()=>"unknown"});var jm=new Ie("",{providedIn:"root",factory:()=>uR().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var fR="h",hR="b";var pR=()=>null;function Hm(e,t,n=!1){return pR(e,t,n)}var gE=!1,gR=new Ie("",{providedIn:"root",factory:()=>gE});var nd;function mR(){if(nd===void 0&&(nd=null,dg.trustedTypes))try{nd=dg.trustedTypes.createPolicy("angular",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch{}return nd}function Hd(e){return mR()?.createHTML(e)||e}var yi=class{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${nC})`}},Pg=class extends yi{getTypeName(){return"HTML"}},kg=class extends yi{getTypeName(){return"Style"}},Lg=class extends yi{getTypeName(){return"Script"}},Fg=class extends yi{getTypeName(){return"URL"}},Bg=class extends yi{getTypeName(){return"ResourceURL"}};function Si(e){return e instanceof yi?e.changingThisBreaksApplicationSecurity:e}function ca(e,t){let n=yR(e);if(n!=null&&n!==t){if(n==="ResourceURL"&&t==="URL")return!0;throw new Error(`Required a safe ${t}, got a ${n} (see ${nC})`)}return n===t}function yR(e){return e instanceof yi&&e.getTypeName()||null}function mE(e){return new Pg(e)}function yE(e){return new kg(e)}function _E(e){return new Lg(e)}function vE(e){return new Fg(e)}function wE(e){return new Bg(e)}function _R(e){let t=new Ug(e);return vR()?new Vg(t):t}var Vg=class{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{let n=new window.DOMParser().parseFromString(Hd(t),"text/html").body;return n===null?this.inertDocumentHelper.getInertBodyElement(t):(n.firstChild?.remove(),n)}catch{return null}}},Ug=class{constructor(t){this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(t){let n=this.inertDocument.createElement("template");return n.innerHTML=Hd(t),n}};function vR(){try{return!!new window.DOMParser().parseFromString(Hd(""),"text/html")}catch{return!1}}var wR=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function zm(e){return e=String(e),e.match(wR)?e:"unsafe:"+e}function Ai(e){let t={};for(let n of e.split(","))t[n]=!0;return t}function Rc(...e){let t={};for(let n of e)for(let r in n)n.hasOwnProperty(r)&&(t[r]=!0);return t}var CE=Ai("area,br,col,hr,img,wbr"),EE=Ai("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),IE=Ai("rp,rt"),CR=Rc(IE,EE),ER=Rc(EE,Ai("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),IR=Rc(IE,Ai("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Bw=Rc(CE,ER,IR,CR),bE=Ai("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),bR=Ai("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),xR=Ai("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),SR=Rc(bE,bR,xR),AR=Ai("script,style,template"),jg=class{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let n=t.firstChild,r=!0,i=[];for(;n;){if(n.nodeType===Node.ELEMENT_NODE?r=this.startElement(n):n.nodeType===Node.TEXT_NODE?this.chars(n.nodeValue):this.sanitizedSomething=!0,r&&n.firstChild){i.push(n),n=MR(n);continue}for(;n;){n.nodeType===Node.ELEMENT_NODE&&this.endElement(n);let s=TR(n);if(s){n=s;break}n=i.pop()}}return this.buf.join("")}startElement(t){let n=Vw(t).toLowerCase();if(!Bw.hasOwnProperty(n))return this.sanitizedSomething=!0,!AR.hasOwnProperty(n);this.buf.push("<"),this.buf.push(n);let r=t.attributes;for(let i=0;i<r.length;i++){let s=r.item(i),l=s.name,h=l.toLowerCase();if(!SR.hasOwnProperty(h)){this.sanitizedSomething=!0;continue}let g=s.value;bE[h]&&(g=zm(g)),this.buf.push(" ",l,'="',Uw(g),'"')}return this.buf.push(">"),!0}endElement(t){let n=Vw(t).toLowerCase();Bw.hasOwnProperty(n)&&!CE.hasOwnProperty(n)&&(this.buf.push("</"),this.buf.push(n),this.buf.push(">"))}chars(t){this.buf.push(Uw(t))}};function DR(e,t){return(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function TR(e){let t=e.nextSibling;if(t&&e!==t.previousSibling)throw xE(t);return t}function MR(e){let t=e.firstChild;if(t&&DR(e,t))throw xE(t);return t}function Vw(e){let t=e.nodeName;return typeof t=="string"?t:"FORM"}function xE(e){return new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`)}var NR=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,RR=/([^\#-~ |!])/g;function Uw(e){return e.replace(/&/g,"&amp;").replace(NR,function(t){let n=t.charCodeAt(0),r=t.charCodeAt(1);return"&#"+((n-55296)*1024+(r-56320)+65536)+";"}).replace(RR,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var rd;function SE(e,t){let n=null;try{rd=rd||_R(e);let r=t?String(t):"";n=rd.getInertBodyElement(r);let i=5,s=r;do{if(i===0)throw new Error("Failed to sanitize html because the input is unstable");i--,r=s,s=n.innerHTML,n=rd.getInertBodyElement(r)}while(r!==s);let h=new jg().sanitizeChildren(jw(n)||n);return Hd(h)}finally{if(n){let r=jw(n)||n;for(;r.firstChild;)r.firstChild.remove()}}}function jw(e){return"content"in e&&OR(e)?e.content:null}function OR(e){return e.nodeType===Node.ELEMENT_NODE&&e.nodeName==="TEMPLATE"}var co=function(e){return e[e.NONE=0]="NONE",e[e.HTML=1]="HTML",e[e.STYLE=2]="STYLE",e[e.SCRIPT=3]="SCRIPT",e[e.URL=4]="URL",e[e.RESOURCE_URL=5]="RESOURCE_URL",e}(co||{});function AE(e){return e instanceof Function?e():e}var _i=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}(_i||{}),PR;function Wm(e,t){return PR(e,t)}function Hs(e,t,n,r,i){if(r!=null){let s,l=!1;Ii(r)?s=r:no(r)&&(l=!0,r=r[Ei]);let h=Xr(r);e===0&&n!==null?i==null?NE(t,n,h):xd(t,n,h,i||null,!0):e===1&&n!==null?xd(t,n,h,i||null,!0):e===2?ZR(t,h,l):e===3&&t.destroyNode(h),s!=null&&QR(t,e,s,n,i)}}function kR(e,t){return e.createText(t)}function LR(e,t,n){e.setValue(t,n)}function DE(e,t,n){return e.createElement(t,n)}function FR(e,t){TE(e,t),t[Ei]=null,t[Or]=null}function BR(e,t,n,r,i,s){r[Ei]=i,r[Or]=t,Wd(e,r,n,1,i,s)}function TE(e,t){t[pi].changeDetectionScheduler?.notify(9),Wd(e,t,t[Ut],2,null,null)}function VR(e){let t=e[Ec];if(!t)return ig(e[Se],e);for(;t;){let n=null;if(no(t))n=t[Ec];else{let r=t[vn];r&&(n=r)}if(!n){for(;t&&!t[Nr]&&t!==e;)no(t)&&ig(t[Se],t),t=t[wn];t===null&&(t=e),no(t)&&ig(t[Se],t),n=t&&t[Nr]}t=n}}function UR(e,t,n,r){let i=vn+r,s=n.length;r>0&&(n[i-1][Nr]=t),r<s-vn?(t[Nr]=n[i],uC(n,vn+r,t)):(n.push(t),t[Nr]=null),t[wn]=n;let l=t[Uo];l!==null&&n!==l&&ME(l,t);let h=t[gi];h!==null&&h.insertView(e),Cg(t),t[Ee]|=128}function ME(e,t){let n=e[Xs],r=t[wn];if(no(r))e[Ee]|=vd.HasTransplantedViews;else{let i=r[wn][Rr];t[Rr]!==i&&(e[Ee]|=vd.HasTransplantedViews)}n===null?e[Xs]=[t]:n.push(t)}function Gm(e,t){let n=e[Xs],r=n.indexOf(t);n.splice(r,1)}function Ic(e,t){if(e.length<=vn)return;let n=vn+t,r=e[n];if(r){let i=r[Uo];i!==null&&i!==e&&Gm(i,r),t>0&&(e[n-1][Nr]=r[Nr]);let s=gd(e,vn+t);FR(r[Se],r);let l=s[gi];l!==null&&l.detachView(s[Se]),r[wn]=null,r[Nr]=null,r[Ee]&=-129}return r}function zd(e,t){if(!(t[Ee]&256)){let n=t[Ut];n.destroyNode&&Wd(e,t,n,3,null,null),VR(t)}}function ig(e,t){if(t[Ee]&256)return;let n=ze(null);try{t[Ee]&=-129,t[Ee]|=256,t[ir]&&Tp(t[ir]),HR(e,t),jR(e,t),t[Se].type===1&&t[Ut].destroy();let r=t[Uo];if(r!==null&&Ii(t[wn])){r!==t[wn]&&Gm(r,t);let i=t[gi];i!==null&&i.detachView(e)}Rg(t)}finally{ze(n)}}function jR(e,t){let n=e.cleanup,r=t[yd];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let l=n[s+3];l>=0?r[l]():r[-l].unsubscribe(),s+=2}else{let l=r[n[s+1]];n[s].call(l)}r!==null&&(t[yd]=null);let i=t[to];if(i!==null){t[to]=null;for(let s=0;s<i.length;s++){let l=i[s];l()}}}function HR(e,t){let n;if(e!=null&&(n=e.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=t[n[r]];if(!(i instanceof Wo)){let s=n[r+1];if(Array.isArray(s))for(let l=0;l<s.length;l+=2){let h=i[s[l]],g=s[l+1];qr(4,h,g);try{g.call(h)}finally{qr(5,h,g)}}else{qr(4,i,s);try{s.call(i)}finally{qr(5,i,s)}}}}}function zR(e,t,n){return WR(e,t.parent,n)}function WR(e,t,n){let r=t;for(;r!==null&&r.type&168;)t=r,r=t.parent;if(r===null)return n[Ei];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=e.data[r.directiveStart+i];if(s===Zr.None||s===Zr.Emulated)return null}return ar(r,n)}}function xd(e,t,n,r,i){e.insertBefore(t,n,r,i)}function NE(e,t,n){e.appendChild(t,n)}function Hw(e,t,n,r,i){r!==null?xd(e,t,n,r,i):NE(e,t,n)}function RE(e,t){return e.parentNode(t)}function GR(e,t){return e.nextSibling(t)}function $R(e,t,n){return YR(e,t,n)}function qR(e,t,n){return e.type&40?ar(e,n):null}var YR=qR,zw;function $m(e,t,n,r){let i=zR(e,r,t),s=t[Ut],l=r.parent||t[Or],h=$R(l,r,t);if(i!=null)if(Array.isArray(n))for(let g=0;g<n.length;g++)Hw(s,i,n[g],h,!1);else Hw(s,i,n,h,!1);zw!==void 0&&zw(s,r,t,n,i)}function pc(e,t){if(t!==null){let n=t.type;if(n&3)return ar(t,e);if(n&4)return Hg(-1,e[t.index]);if(n&8){let r=t.child;if(r!==null)return pc(e,r);{let i=e[t.index];return Ii(i)?Hg(-1,i):Xr(i)}}else{if(n&128)return pc(e,t.next);if(n&32)return Wm(t,e)()||Xr(e[t.index]);{let r=OE(e,t);if(r!==null){if(Array.isArray(r))return r[0];let i=Ho(e[Rr]);return pc(i,r)}else return pc(e,t.next)}}}return null}function OE(e,t){if(t!==null){let r=e[Rr][Or],i=t.projection;return r.projection[i]}return null}function Hg(e,t){let n=vn+e+1;if(n<t.length){let r=t[n],i=r[Se].firstChild;if(i!==null)return pc(r,i)}return t[jo]}function ZR(e,t,n){e.removeChild(null,t,n)}function qm(e,t,n,r,i,s,l){for(;n!=null;){if(n.type===128){n=n.next;continue}let h=r[n.index],g=n.type;if(l&&t===0&&(h&&$o(Xr(h),r),n.flags|=2),(n.flags&32)!==32)if(g&8)qm(e,t,n.child,r,i,s,!1),Hs(t,e,i,h,s);else if(g&32){let m=Wm(n,r),C;for(;C=m();)Hs(t,e,i,C,s);Hs(t,e,i,h,s)}else g&16?XR(e,t,r,n,i,s):Hs(t,e,i,h,s);n=l?n.projectionNext:n.next}}function Wd(e,t,n,r,i,s){qm(n,r,e.firstChild,t,i,s,!1)}function XR(e,t,n,r,i,s){let l=n[Rr],g=l[Or].projection[r.projection];if(Array.isArray(g))for(let m=0;m<g.length;m++){let C=g[m];Hs(t,e,i,C,s)}else{let m=g,C=l[wn];lE(r)&&(m.flags|=128),qm(e,t,m,C,i,s,!0)}}function QR(e,t,n,r,i){let s=n[jo],l=Xr(n);s!==l&&Hs(t,e,r,s,i);for(let h=vn;h<n.length;h++){let g=n[h];Wd(g[Se],g,e,t,r,s)}}function KR(e,t,n,r,i){if(t)i?e.addClass(n,r):e.removeClass(n,r);else{let s=r.indexOf("-")===-1?void 0:_i.DashCase;i==null?e.removeStyle(n,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=_i.Important),e.setStyle(n,r,i,s))}}function JR(e,t,n){e.setAttribute(t,"style",n)}function PE(e,t,n){n===""?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n)}function kE(e,t,n){let{mergedAttrs:r,classes:i,styles:s}=n;r!==null&&gg(e,t,r),i!==null&&PE(e,t,i),s!==null&&JR(e,t,s)}var Pr={};function ae(e=1){LE(dn(),Ke(),xi()+e,!1)}function LE(e,t,n,r){if(!r)if((t[Ee]&3)===3){let s=e.preOrderCheckHooks;s!==null&&cd(t,s,n)}else{let s=e.preOrderHooks;s!==null&&ld(t,s,0,n)}zo(n)}function re(e,t=ke.Default){let n=Ke();if(n===null)return Le(e,t);let r=Un();return tE(r,n,Sn(e),t)}function FE(e,t,n,r,i,s){let l=ze(null);try{let h=null;i&ro.SignalBased&&(h=t[r][di]),h!==null&&h.transformFn!==void 0&&(s=h.transformFn(s)),i&ro.HasDecoratorInputTransform&&(s=e.inputTransforms[r].call(t,s)),e.setInput!==null?e.setInput(t,h,s,n,r):DC(t,h,r,s)}finally{ze(l)}}function eO(e,t){let n=e.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)zo(~i);else{let s=i,l=n[++r],h=n[++r];TN(l,s);let g=t[s];h(2,g)}}}finally{zo(-1)}}function Gd(e,t,n,r,i,s,l,h,g,m,C){let E=t.blueprint.slice();return E[Ei]=i,E[Ee]=r|4|128|8|64,(m!==null||e&&e[Ee]&2048)&&(E[Ee]|=2048),OC(E),E[wn]=E[na]=e,E[_n]=n,E[pi]=l||e&&e[pi],E[Ut]=h||e&&e[Ut],E[Zs]=g||e&&e[Zs]||null,E[Or]=s,E[Bd]=cR(),E[Cc]=C,E[xC]=m,E[Rr]=t.type==2?e[Rr]:E,E}function $d(e,t,n,r,i){let s=e.data[t];if(s===null)s=tO(e,t,n,r,i),DN()&&(s.flags|=32);else if(s.type&64){s.type=n,s.value=r,s.attrs=i;let l=IN();s.injectorIndex=l===null?-1:l.injectorIndex}return Nc(s,!0),s}function tO(e,t,n,r,i){let s=BC(),l=VC(),h=l?s:s&&s.parent,g=e.data[t]=aO(e,h,n,t,r,i);return e.firstChild===null&&(e.firstChild=g),s!==null&&(l?s.child==null&&g.parent!==null&&(s.child=g):s.next===null&&(s.next=g,g.prev=s)),g}function BE(e,t,n,r){if(n===0)return-1;let i=t.length;for(let s=0;s<n;s++)t.push(r),e.blueprint.push(r),e.data.push(null);return i}function VE(e,t,n,r,i){let s=xi(),l=r&2;try{zo(-1),l&&t.length>sr&&LE(e,t,sr,!1),qr(l?2:0,i),n(r,i)}finally{zo(s),qr(l?3:1,i)}}function UE(e,t,n){if(AC(t)){let r=ze(null);try{let i=t.directiveStart,s=t.directiveEnd;for(let l=i;l<s;l++){let h=e.data[l];if(h.contentQueries){let g=n[l];h.contentQueries(1,g,l)}}}finally{ze(r)}}}function jE(e,t,n){FC()&&(hO(e,t,n,ar(n,t)),(n.flags&64)===64&&qE(e,t,n))}function HE(e,t,n=ar){let r=t.localNames;if(r!==null){let i=t.index+1;for(let s=0;s<r.length;s+=2){let l=r[s+1],h=l===-1?n(t,e):e[l];e[i++]=h}}}function zE(e){let t=e.tView;return t===null||t.incompleteFirstPass?e.tView=Ym(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):t}function Ym(e,t,n,r,i,s,l,h,g,m,C){let E=sr+r,x=E+i,D=nO(E,x),N=typeof m=="function"?m():m;return D[Se]={type:e,blueprint:D,template:n,queries:null,viewQuery:h,declTNode:t,data:D.slice().fill(null,E),bindingStartIndex:E,expandoStartIndex:x,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof l=="function"?l():l,firstChild:null,schemas:g,consts:N,incompleteFirstPass:!1,ssrId:C}}function nO(e,t){let n=[];for(let r=0;r<t;r++)n.push(r<e?null:Pr);return n}function rO(e,t,n,r){let s=r.get(gR,gE)||n===Zr.ShadowDom,l=e.selectRootElement(t,s);return iO(l),l}function iO(e){oO(e)}var oO=()=>null;function sO(e,t,n,r){let i=XE(t);i.push(n),e.firstCreatePass&&QE(e).push(r,i.length-1)}function aO(e,t,n,r,i,s){let l=t?t.injectorIndex:-1,h=0;return wN()&&(h|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:l,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:h,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function Ww(e,t,n,r,i){for(let s in t){if(!t.hasOwnProperty(s))continue;let l=t[s];if(l===void 0)continue;r??={};let h,g=ro.None;Array.isArray(l)?(h=l[0],g=l[1]):h=l;let m=s;if(i!==null){if(!i.hasOwnProperty(s))continue;m=i[s]}e===0?Gw(r,n,m,h,g):Gw(r,n,m,h)}return r}function Gw(e,t,n,r,i){let s;e.hasOwnProperty(n)?(s=e[n]).push(t,r):s=e[n]=[t,r],i!==void 0&&s.push(i)}function cO(e,t,n){let r=t.directiveStart,i=t.directiveEnd,s=e.data,l=t.attrs,h=[],g=null,m=null;for(let C=r;C<i;C++){let E=s[C],x=n?n.get(E):null,D=x?x.inputs:null,N=x?x.outputs:null;g=Ww(0,E.inputs,C,g,D),m=Ww(1,E.outputs,C,m,N);let U=g!==null&&l!==null&&!Cm(t)?bO(g,C,l):null;h.push(U)}g!==null&&(g.hasOwnProperty("class")&&(t.flags|=8),g.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=h,t.inputs=g,t.outputs=m}function lO(e){return e==="class"?"className":e==="for"?"htmlFor":e==="formaction"?"formAction":e==="innerHtml"?"innerHTML":e==="readonly"?"readOnly":e==="tabindex"?"tabIndex":e}function WE(e,t,n,r,i,s,l,h){let g=ar(t,n),m=t.inputs,C;!h&&m!=null&&(C=m[r])?(Zm(e,n,C,r,i),Vd(t)&&uO(n,t.index)):t.type&3?(r=lO(r),i=l!=null?l(i,t.value||"",r):i,s.setProperty(g,r,i)):t.type&12}function uO(e,t){let n=ao(t,e);n[Ee]&16||(n[Ee]|=64)}function GE(e,t,n,r){if(FC()){let i=r===null?null:{"":-1},s=gO(e,n),l,h;s===null?l=h=null:[l,h]=s,l!==null&&$E(e,t,n,l,i,h),i&&mO(n,r,i)}n.mergedAttrs=vc(n.mergedAttrs,n.attrs)}function $E(e,t,n,r,i,s){for(let m=0;m<r.length;m++)xg(Ed(n,t),e,r[m].type);_O(n,e.data.length,r.length);for(let m=0;m<r.length;m++){let C=r[m];C.providersResolver&&C.providersResolver(C)}let l=!1,h=!1,g=BE(e,t,r.length,null);for(let m=0;m<r.length;m++){let C=r[m];n.mergedAttrs=vc(n.mergedAttrs,C.hostAttrs),vO(e,n,t,g,C),yO(g,C,i),C.contentQueries!==null&&(n.flags|=4),(C.hostBindings!==null||C.hostAttrs!==null||C.hostVars!==0)&&(n.flags|=64);let E=C.type.prototype;!l&&(E.ngOnChanges||E.ngOnInit||E.ngDoCheck)&&((e.preOrderHooks??=[]).push(n.index),l=!0),!h&&(E.ngOnChanges||E.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(n.index),h=!0),g++}cO(e,n,s)}function dO(e,t,n,r,i){let s=i.hostBindings;if(s){let l=e.hostBindingOpCodes;l===null&&(l=e.hostBindingOpCodes=[]);let h=~t.index;fO(l)!=h&&l.push(h),l.push(n,r,s)}}function fO(e){let t=e.length;for(;t>0;){let n=e[--t];if(typeof n=="number"&&n<0)return n}return 0}function hO(e,t,n,r){let i=n.directiveStart,s=n.directiveEnd;Vd(n)&&wO(t,n,e.data[i+n.componentOffset]),e.firstCreatePass||Ed(n,t),$o(r,t);let l=n.initialInputs;for(let h=i;h<s;h++){let g=e.data[h],m=Go(t,e,h,n);if($o(m,t),l!==null&&IO(t,h-i,m,g,n,l),io(g)){let C=ao(n.index,t);C[_n]=Go(t,e,h,n)}}}function qE(e,t,n){let r=n.directiveStart,i=n.directiveEnd,s=n.index,l=MN();try{zo(s);for(let h=r;h<i;h++){let g=e.data[h],m=t[h];Eg(h),(g.hostBindings!==null||g.hostVars!==0||g.hostAttrs!==null)&&pO(g,m)}}finally{zo(-1),Eg(l)}}function pO(e,t){e.hostBindings!==null&&e.hostBindings(1,t)}function gO(e,t){let n=e.directiveRegistry,r=null,i=null;if(n)for(let s=0;s<n.length;s++){let l=n[s];if(VM(t,l.selectors,!1))if(r||(r=[]),io(l))if(l.findHostDirectiveDefs!==null){let h=[];i=i||new Map,l.findHostDirectiveDefs(l,h,i),r.unshift(...h,l);let g=h.length;zg(e,t,g)}else r.unshift(l),zg(e,t,0);else i=i||new Map,l.findHostDirectiveDefs?.(l,r,i),r.push(l)}return r===null?null:[r,i]}function zg(e,t,n){t.componentOffset=n,(e.components??=[]).push(t.index)}function mO(e,t,n){if(t){let r=e.localNames=[];for(let i=0;i<t.length;i+=2){let s=n[t[i+1]];if(s==null)throw new ue(-301,!1);r.push(t[i],s)}}}function yO(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;io(t)&&(n[""]=e)}}function _O(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function vO(e,t,n,r,i){e.data[r]=i;let s=i.factory||(i.factory=Gs(i.type,!0)),l=new Wo(s,io(i),re);e.blueprint[r]=l,n[r]=l,dO(e,t,r,BE(e,n,i.hostVars,Pr),i)}function wO(e,t,n){let r=ar(t,e),i=zE(n),s=e[pi].rendererFactory,l=16;n.signals?l=4096:n.onPush&&(l=64);let h=qd(e,Gd(e,i,null,l,r,t,null,s.createRenderer(r,n),null,null,null));e[t.index]=h}function CO(e,t,n,r,i,s){let l=ar(e,t);EO(t[Ut],l,s,e.value,n,r,i)}function EO(e,t,n,r,i,s,l){if(s==null)e.removeAttribute(t,i,n);else{let h=l==null?yc(s):l(s,r||"",i);e.setAttribute(t,i,h,n)}}function IO(e,t,n,r,i,s){let l=s[t];if(l!==null)for(let h=0;h<l.length;){let g=l[h++],m=l[h++],C=l[h++],E=l[h++];FE(r,n,g,m,C,E)}}function bO(e,t,n){let r=null,i=0;for(;i<n.length;){let s=n[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(e.hasOwnProperty(s)){r===null&&(r=[]);let l=e[s];for(let h=0;h<l.length;h+=3)if(l[h]===t){r.push(s,l[h+1],l[h+2],n[i+1]);break}}i+=2}return r}function YE(e,t,n,r){return[e,!0,0,t,null,r,null,n,null,null]}function ZE(e,t){let n=e.contentQueries;if(n!==null){let r=ze(null);try{for(let i=0;i<n.length;i+=2){let s=n[i],l=n[i+1];if(l!==-1){let h=e.data[l];Tm(s),h.contentQueries(2,t[l],l)}}}finally{ze(r)}}}function qd(e,t){return e[Ec]?e[Sw][Nr]=t:e[Ec]=t,e[Sw]=t,t}function Wg(e,t,n){Tm(0);let r=ze(null);try{t(e,n)}finally{ze(r)}}function XE(e){return e[yd]??=[]}function QE(e){return e.cleanup??=[]}function KE(e,t){let n=e[Zs],r=n?n.get(mi,null):null;r&&r.handleError(t)}function Zm(e,t,n,r,i){for(let s=0;s<n.length;){let l=n[s++],h=n[s++],g=n[s++],m=t[l],C=e.data[l];FE(C,m,r,h,g,i)}}function JE(e,t,n){let r=RC(t,e);LR(e[Ut],r,n)}function xO(e,t){let n=ao(t,e),r=n[Se];SO(r,n);let i=n[Ei];i!==null&&n[Cc]===null&&(n[Cc]=Hm(i,n[Zs])),Xm(r,n,n[_n])}function SO(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}function Xm(e,t,n){Mm(t);try{let r=e.viewQuery;r!==null&&Wg(1,r,n);let i=e.template;i!==null&&VE(e,t,i,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),t[gi]?.finishViewCreation(e),e.staticContentQueries&&ZE(e,t),e.staticViewQueries&&Wg(2,e.viewQuery,n);let s=e.components;s!==null&&AO(t,s)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{t[Ee]&=-5,Nm()}}function AO(e,t){for(let n=0;n<t.length;n++)xO(e,t[n])}function Yd(e,t,n,r){let i=ze(null);try{let s=t.tView,h=e[Ee]&4096?4096:16,g=Gd(e,s,n,h,null,t,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),m=e[t.index];g[Uo]=m;let C=e[gi];return C!==null&&(g[gi]=C.createEmbeddedView(s)),Xm(s,g,n),g}finally{ze(i)}}function eI(e,t){let n=vn+t;if(n<e.length)return e[n]}function bc(e,t){return!t||t.firstChild===null||lE(e)}function Zd(e,t,n,r=!0){let i=t[Se];if(UR(i,t,e,n),r){let l=Hg(n,e),h=t[Ut],g=RE(h,e[jo]);g!==null&&BR(i,e[Or],h,t,g,l)}let s=t[Cc];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function tI(e,t){let n=Ic(e,t);return n!==void 0&&zd(n[Se],n),n}function Sd(e,t,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let s=t[n.index];s!==null&&r.push(Xr(s)),Ii(s)&&DO(s,r);let l=n.type;if(l&8)Sd(e,t,n.child,r);else if(l&32){let h=Wm(n,t),g;for(;g=h();)r.push(g)}else if(l&16){let h=OE(t,n);if(Array.isArray(h))r.push(...h);else{let g=Ho(t[Rr]);Sd(g[Se],g,h,r,!0)}}n=i?n.projectionNext:n.next}return r}function DO(e,t){for(let n=vn;n<e.length;n++){let r=e[n],i=r[Se].firstChild;i!==null&&Sd(r[Se],r,i,t)}e[jo]!==e[Ei]&&t.push(e[jo])}var nI=[];function TO(e){return e[ir]??MO(e)}function MO(e){let t=nI.pop()??Object.create(RO);return t.lView=e,t}function NO(e){e.lView[ir]!==e&&(e.lView=null,nI.push(e))}var RO=Ve(K({},uc),{consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{jd(e.lView)},consumerOnSignalRead(){this.lView[ir]=this}});function OO(e){let t=e[ir]??Object.create(PO);return t.lView=e,t}var PO=Ve(K({},uc),{consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{let t=Ho(e.lView);for(;t&&!rI(t[Se]);)t=Ho(t);t&&PC(t)},consumerOnSignalRead(){this.lView[ir]=this}});function rI(e){return e.type!==2}var kO=100;function iI(e,t=!0,n=0){let r=e[pi],i=r.rendererFactory,s=!1;s||i.begin?.();try{LO(e,n)}catch(l){throw t&&KE(e,l),l}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function LO(e,t){let n=UC();try{Dw(!0),Gg(e,t);let r=0;for(;Ud(e);){if(r===kO)throw new ue(103,!1);r++,Gg(e,1)}}finally{Dw(n)}}function FO(e,t,n,r){let i=t[Ee];if((i&256)===256)return;let s=!1,l=!1;!s&&t[pi].inlineEffectRunner?.flush(),Mm(t);let h=!0,g=null,m=null;s||(rI(e)?(m=TO(t),g=Au(m)):Nv()===null?(h=!1,m=OO(t),g=Au(m)):t[ir]&&(Tp(t[ir]),t[ir]=null));try{OC(t),AN(e.bindingStartIndex),n!==null&&VE(e,t,n,2,r);let C=(i&3)===3;if(!s)if(C){let D=e.preOrderCheckHooks;D!==null&&cd(t,D,null)}else{let D=e.preOrderHooks;D!==null&&ld(t,D,0,null),eg(t,0)}if(l||BO(t),oI(t,0),e.contentQueries!==null&&ZE(e,t),!s)if(C){let D=e.contentCheckHooks;D!==null&&cd(t,D)}else{let D=e.contentHooks;D!==null&&ld(t,D,1),eg(t,1)}eO(e,t);let E=e.components;E!==null&&aI(t,E,0);let x=e.viewQuery;if(x!==null&&Wg(2,x,r),!s)if(C){let D=e.viewCheckHooks;D!==null&&cd(t,D)}else{let D=e.viewHooks;D!==null&&ld(t,D,2),eg(t,2)}if(e.firstUpdatePass===!0&&(e.firstUpdatePass=!1),t[Jp]){for(let D of t[Jp])D();t[Jp]=null}s||(t[Ee]&=-73)}catch(C){throw s||jd(t),C}finally{m!==null&&(Ap(m,g),h&&NO(m)),Nm()}}function oI(e,t){for(let n=dE(e);n!==null;n=fE(n))for(let r=vn;r<n.length;r++){let i=n[r];sI(i,t)}}function BO(e){for(let t=dE(e);t!==null;t=fE(t)){if(!(t[Ee]&vd.HasTransplantedViews))continue;let n=t[Xs];for(let r=0;r<n.length;r++){let i=n[r];PC(i)}}}function VO(e,t,n){let r=ao(t,e);sI(r,n)}function sI(e,t){Am(e)&&Gg(e,t)}function Gg(e,t){let r=e[Se],i=e[Ee],s=e[ir],l=!!(t===0&&i&16);if(l||=!!(i&64&&t===0),l||=!!(i&1024),l||=!!(s?.dirty&&Dp(s)),l||=!1,s&&(s.dirty=!1),e[Ee]&=-9217,l)FO(r,e,r.template,e[_n]);else if(i&8192){oI(e,1);let h=r.components;h!==null&&aI(e,h,1)}}function aI(e,t,n){for(let r=0;r<t.length;r++)VO(e,t[r],n)}function Qm(e,t){let n=UC()?64:1088;for(e[pi].changeDetectionScheduler?.notify(t);e;){e[Ee]|=n;let r=Ho(e);if(vg(e)&&!r)return e;e=r}return null}var qo=class{get rootNodes(){let t=this._lView,n=t[Se];return Sd(n,t,n.firstChild,[])}constructor(t,n,r=!0){this._lView=t,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[_n]}set context(t){this._lView[_n]=t}get destroyed(){return(this._lView[Ee]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let t=this._lView[wn];if(Ii(t)){let n=t[_d],r=n?n.indexOf(this):-1;r>-1&&(Ic(t,r),gd(n,r))}this._attachedToViewContainer=!1}zd(this._lView[Se],this._lView)}onDestroy(t){kC(this._lView,t)}markForCheck(){Qm(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Ee]&=-129}reattach(){Cg(this._lView),this._lView[Ee]|=128}detectChanges(){this._lView[Ee]|=1024,iI(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ue(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let t=vg(this._lView),n=this._lView[Uo];n!==null&&!t&&Gm(n,this._lView),TE(this._lView[Se],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new ue(902,!1);this._appRef=t;let n=vg(this._lView),r=this._lView[Uo];r!==null&&!n&&ME(r,this._lView),Cg(this._lView)}},xc=(()=>{class e{static{this.__NG_ELEMENT_ID__=HO}}return e})(),UO=xc,jO=class extends UO{constructor(t,n,r){super(),this._declarationLView=t,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,n){return this.createEmbeddedViewImpl(t,n)}createEmbeddedViewImpl(t,n,r){let i=Yd(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:n,dehydratedView:r});return new qo(i)}};function HO(){return Km(Un(),Ke())}function Km(e,t){return e.type&4?new jO(t,e,sa(e,t)):null}var KW=new RegExp(`^(\\d+)*(${hR}|${fR})*(.*)`);var zO=()=>null;function Sc(e,t){return zO(e,t)}var Ks=class{},Jm=new Ie("",{providedIn:"root",factory:()=>!1});var cI=new Ie(""),lI=new Ie(""),$g=class{},Ad=class{};function WO(e){let t=Error(`No component factory found for ${Bn(e)}.`);return t[GO]=e,t}var GO="ngComponent";var qg=class{resolveComponentFactory(t){throw WO(t)}},Js=class{static{this.NULL=new qg}},ea=class{},lo=(()=>{class e{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>$O()}}return e})();function $O(){let e=Ke(),t=Un(),n=ao(t.index,e);return(no(n)?n:e)[Ut]}var qO=(()=>{class e{static{this.\u0275prov=de({token:e,providedIn:"root",factory:()=>null})}}return e})();function Yg(e,t,n){let r=n?e.styles:null,i=n?e.classes:null,s=0;if(t!==null)for(let l=0;l<t.length;l++){let h=t[l];if(typeof h=="number")s=h;else if(s==1)i=fg(i,h);else if(s==2){let g=h,m=t[++l];r=fg(r,g+": "+m+";")}}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=i:e.classesWithoutHost=i}var Dd=class extends Js{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){let n=Vo(t);return new Ac(n,this.ngModule)}};function $w(e,t){let n=[];for(let r in e){if(!e.hasOwnProperty(r))continue;let i=e[r];if(i===void 0)continue;let s=Array.isArray(i),l=s?i[0]:i,h=s?i[1]:ro.None;t?n.push({propName:l,templateName:r,isSignal:(h&ro.SignalBased)!==0}):n.push({propName:l,templateName:r})}return n}function YO(e){let t=e.toLowerCase();return t==="svg"?uN:t==="math"?dN:null}var Ac=class extends Ad{get inputs(){let t=this.componentDef,n=t.inputTransforms,r=$w(t.inputs,!0);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return $w(this.componentDef.outputs,!1)}constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=zM(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!n}create(t,n,r,i){let s=ze(null);try{i=i||this.ngModule;let l=i instanceof or?i:i?.injector;l&&this.componentDef.getStandaloneInjector!==null&&(l=this.componentDef.getStandaloneInjector(l)||l);let h=l?new Ig(t,l):t,g=h.get(ea,null);if(g===null)throw new ue(407,!1);let m=h.get(qO,null),C=h.get(Ks,null),E={rendererFactory:g,sanitizer:m,inlineEffectRunner:null,changeDetectionScheduler:C},x=g.createRenderer(null,this.componentDef),D=this.componentDef.selectors[0][0]||"div",N=r?rO(x,r,this.componentDef.encapsulation,h):DE(x,D,YO(D)),U=512;this.componentDef.signals?U|=4096:this.componentDef.onPush||(U|=16);let G=null;N!==null&&(G=Hm(N,h,!0));let z=Ym(0,null,null,1,0,null,null,null,null,null,null),ne=Gd(null,z,null,U,null,null,E,x,h,null,G);Mm(ne);let He,le,j=null;try{let se=this.componentDef,W,En=null;se.findHostDirectiveDefs?(W=[],En=new Map,se.findHostDirectiveDefs(se,W,En),W.push(se)):W=[se];let Ft=ZO(ne,N);j=XO(Ft,N,se,W,ne,E,x),le=Sm(z,sr),N&&JO(x,se,N,r),n!==void 0&&eP(le,this.ngContentSelectors,n),He=KO(j,se,W,En,ne,[tP]),Xm(z,ne,null)}catch(se){throw j!==null&&Rg(j),Rg(ne),se}finally{Nm()}return new Zg(this.componentType,He,sa(le,ne),ne,le)}finally{ze(s)}}},Zg=class extends $g{constructor(t,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new qo(i,void 0,!1),this.componentType=t}setInput(t,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[t])){if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),n))return;let s=this._rootLView;Zm(s[Se],s,i,t,n),this.previousInputValues.set(t,n);let l=ao(this._tNode.index,s);Qm(l,1)}}get injector(){return new Bo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}};function ZO(e,t){let n=e[Se],r=sr;return e[r]=t,$d(n,r,2,"#host",null)}function XO(e,t,n,r,i,s,l){let h=i[Se];QO(r,e,t,l);let g=null;t!==null&&(g=Hm(t,i[Zs]));let m=s.rendererFactory.createRenderer(t,n),C=16;n.signals?C=4096:n.onPush&&(C=64);let E=Gd(i,zE(n),null,C,i[e.index],e,s,m,null,null,g);return h.firstCreatePass&&zg(h,e,r.length-1),qd(i,E),i[e.index]=E}function QO(e,t,n,r){for(let i of e)t.mergedAttrs=vc(t.mergedAttrs,i.hostAttrs);t.mergedAttrs!==null&&(Yg(t,t.mergedAttrs,!0),n!==null&&kE(r,n,t))}function KO(e,t,n,r,i,s){let l=Un(),h=i[Se],g=ar(l,i);$E(h,i,l,n,null,r);for(let C=0;C<n.length;C++){let E=l.directiveStart+C,x=Go(i,h,E,l);$o(x,i)}qE(h,i,l),g&&$o(g,i);let m=Go(i,h,l.directiveStart+l.componentOffset,l);if(e[_n]=i[_n]=m,s!==null)for(let C of s)C(m,t);return UE(h,l,i),m}function JO(e,t,n,r){if(r)gg(e,n,["ng-version","18.2.7"]);else{let{attrs:i,classes:s}=WM(t.selectors[0]);i&&gg(e,n,i),s&&s.length>0&&PE(e,n,s.join(" "))}}function eP(e,t,n){let r=e.projection=[];for(let i=0;i<t.length;i++){let s=n[i];r.push(s!=null?Array.from(s):null)}}function tP(){let e=Un();km(Ke()[Se],e)}var la=(()=>{class e{static{this.__NG_ELEMENT_ID__=nP}}return e})();function nP(){let e=Un();return dI(e,Ke())}var rP=la,uI=class extends rP{constructor(t,n,r){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=r}get element(){return sa(this._hostTNode,this._hostLView)}get injector(){return new Bo(this._hostTNode,this._hostLView)}get parentInjector(){let t=Lm(this._hostTNode,this._hostLView);if(ZC(t)){let n=Cd(t,this._hostLView),r=wd(t),i=n[Se].data[r+8];return new Bo(i,n)}else return new Bo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){let n=qw(this._lContainer);return n!==null&&n[t]||null}get length(){return this._lContainer.length-vn}createEmbeddedView(t,n,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let l=Sc(this._lContainer,t.ssrId),h=t.createEmbeddedViewImpl(n||{},s,l);return this.insertImpl(h,i,bc(this._hostTNode,l)),h}createComponent(t,n,r,i,s){let l=t&&!sN(t),h;if(l)h=n;else{let N=n||{};h=N.index,r=N.injector,i=N.projectableNodes,s=N.environmentInjector||N.ngModuleRef}let g=l?t:new Ac(Vo(t)),m=r||this.parentInjector;if(!s&&g.ngModule==null){let U=(l?m:this.parentInjector).get(or,null);U&&(s=U)}let C=Vo(g.componentType??{}),E=Sc(this._lContainer,C?.id??null),x=E?.firstChild??null,D=g.create(m,i,x,s);return this.insertImpl(D.hostView,h,bc(this._hostTNode,E)),D}insert(t,n){return this.insertImpl(t,n,!0)}insertImpl(t,n,r){let i=t._lView;if(pN(i)){let h=this.indexOf(t);if(h!==-1)this.detach(h);else{let g=i[wn],m=new uI(g,g[Or],g[wn]);m.detach(m.indexOf(t))}}let s=this._adjustIndex(n),l=this._lContainer;return Zd(l,i,s,r),t.attachToViewContainerRef(),uC(og(l),s,t),t}move(t,n){return this.insert(t,n)}indexOf(t){let n=qw(this._lContainer);return n!==null?n.indexOf(t):-1}remove(t){let n=this._adjustIndex(t,-1),r=Ic(this._lContainer,n);r&&(gd(og(this._lContainer),n),zd(r[Se],r))}detach(t){let n=this._adjustIndex(t,-1),r=Ic(this._lContainer,n);return r&&gd(og(this._lContainer),n)!=null?new qo(r):null}_adjustIndex(t,n=0){return t??this.length+n}};function qw(e){return e[_d]}function og(e){return e[_d]||(e[_d]=[])}function dI(e,t){let n,r=t[e.index];return Ii(r)?n=r:(n=YE(r,t,null,e),t[e.index]=n,qd(t,n)),oP(n,t,e,r),new uI(n,e,t)}function iP(e,t){let n=e[Ut],r=n.createComment(""),i=ar(t,e),s=RE(n,i);return xd(n,s,r,GR(n,i),!1),r}var oP=cP,sP=()=>!1;function aP(e,t,n){return sP(e,t,n)}function cP(e,t,n,r){if(e[jo])return;let i;n.type&8?i=Xr(r):i=iP(t,n),e[jo]=i}var Xg=class e{constructor(t){this.queryList=t,this.matches=null}clone(){return new e(this.queryList)}setDirty(){this.queryList.setDirty()}},Qg=class e{constructor(t=[]){this.queries=t}createEmbeddedView(t){let n=t.queries;if(n!==null){let r=t.contentQueries!==null?t.contentQueries[0]:n.length,i=[];for(let s=0;s<r;s++){let l=n.getByIndex(s),h=this.queries[l.indexInDeclarationView];i.push(h.clone())}return new e(i)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}finishViewCreation(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let n=0;n<this.queries.length;n++)e0(t,n).matches!==null&&this.queries[n].setDirty()}},Kg=class{constructor(t,n,r=null){this.flags=n,this.read=r,typeof t=="string"?this.predicate=mP(t):this.predicate=t}},Jg=class e{constructor(t=[]){this.queries=t}elementStart(t,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(t,n)}elementEnd(t){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(t)}embeddedTView(t){let n=null;for(let r=0;r<this.length;r++){let i=n!==null?n.length:0,s=this.getByIndex(r).embeddedTView(t,i);s&&(s.indexInDeclarationView=r,n!==null?n.push(s):n=[s])}return n!==null?new e(n):null}template(t,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(t,n)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}},em=class e{constructor(t,n=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(t,n){this.isApplyingToNode(n)&&this.matchTNode(t,n)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,n){this.elementStart(t,n)}embeddedTView(t,n){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,n),new e(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,r=t.parent;for(;r!==null&&r.type&8&&r.index!==n;)r=r.parent;return n===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(t,n){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let s=r[i];this.matchTNodeWithReadOption(t,n,lP(n,s)),this.matchTNodeWithReadOption(t,n,ud(n,t,s,!1,!1))}else r===xc?n.type&4&&this.matchTNodeWithReadOption(t,n,-1):this.matchTNodeWithReadOption(t,n,ud(n,t,r,!1,!1))}matchTNodeWithReadOption(t,n,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===Kr||i===la||i===xc&&n.type&4)this.addMatch(n.index,-2);else{let s=ud(n,t,i,!1,!1);s!==null&&this.addMatch(n.index,s)}else this.addMatch(n.index,r)}}addMatch(t,n){this.matches===null?this.matches=[t,n]:this.matches.push(t,n)}};function lP(e,t){let n=e.localNames;if(n!==null){for(let r=0;r<n.length;r+=2)if(n[r]===t)return n[r+1]}return null}function uP(e,t){return e.type&11?sa(e,t):e.type&4?Km(e,t):null}function dP(e,t,n,r){return n===-1?uP(t,e):n===-2?fP(e,t,r):Go(e,e[Se],n,t)}function fP(e,t,n){if(n===Kr)return sa(t,e);if(n===xc)return Km(t,e);if(n===la)return dI(t,e)}function fI(e,t,n,r){let i=t[gi].queries[r];if(i.matches===null){let s=e.data,l=n.matches,h=[];for(let g=0;l!==null&&g<l.length;g+=2){let m=l[g];if(m<0)h.push(null);else{let C=s[m];h.push(dP(t,C,l[g+1],n.metadata.read))}}i.matches=h}return i.matches}function tm(e,t,n,r){let i=e.queries.getByIndex(n),s=i.matches;if(s!==null){let l=fI(e,t,i,n);for(let h=0;h<s.length;h+=2){let g=s[h];if(g>0)r.push(l[h/2]);else{let m=s[h+1],C=t[-g];for(let E=vn;E<C.length;E++){let x=C[E];x[Uo]===x[wn]&&tm(x[Se],x,m,r)}if(C[Xs]!==null){let E=C[Xs];for(let x=0;x<E.length;x++){let D=E[x];tm(D[Se],D,m,r)}}}}}return r}function hP(e,t){return e[gi].queries[t].queryList}function pP(e,t,n){let r=new Ng((n&4)===4);return sO(e,t,r,r.destroy),(t[gi]??=new Qg).queries.push(new Xg(r))-1}function gP(e,t,n){let r=dn();return r.firstCreatePass&&(yP(r,new Kg(e,t,n),-1),(t&2)===2&&(r.staticViewQueries=!0)),pP(r,Ke(),t)}function mP(e){return e.split(",").map(t=>t.trim())}function yP(e,t,n){e.queries===null&&(e.queries=new Jg),e.queries.track(new em(t,n))}function e0(e,t){return e.queries.getByIndex(t)}function _P(e,t){let n=e[Se],r=e0(n,t);return r.crossesNgTemplate?tm(n,e,t,[]):fI(n,e,r,t)}var Yw=new Set;function ua(e){Yw.has(e)||(Yw.add(e),performance?.mark?.("mark_feature_usage",{detail:{feature:e}}))}function vP(e){return typeof e=="function"&&e[di]!==void 0}function Oc(e,t){ua("NgSignals");let n=Hv(e),r=n[di];return t?.equal&&(r.equal=t.equal),n.set=i=>Mp(r,i),n.update=i=>zv(r,i),n.asReadonly=wP.bind(n),n}function wP(){let e=this[di];if(e.readonlyFn===void 0){let t=()=>this();t[di]=e,e.readonlyFn=t}return e.readonlyFn}function hI(e){return vP(e)&&typeof e.set=="function"}function CP(e){return Object.getPrototypeOf(e.prototype).constructor}function Di(e){let t=CP(e.type),n=!0,r=[e];for(;t;){let i;if(io(e))i=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new ue(903,!1);i=t.\u0275dir}if(i){if(n){r.push(i);let l=e;l.inputs=id(e.inputs),l.inputTransforms=id(e.inputTransforms),l.declaredInputs=id(e.declaredInputs),l.outputs=id(e.outputs);let h=i.hostBindings;h&&SP(e,h);let g=i.viewQuery,m=i.contentQueries;if(g&&bP(e,g),m&&xP(e,m),EP(e,i),cM(e.outputs,i.outputs),io(i)&&i.data.animation){let C=e.data;C.animation=(C.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let l=0;l<s.length;l++){let h=s[l];h&&h.ngInherit&&h(e),h===Di&&(n=!1)}}t=Object.getPrototypeOf(t)}IP(r)}function EP(e,t){for(let n in t.inputs){if(!t.inputs.hasOwnProperty(n)||e.inputs.hasOwnProperty(n))continue;let r=t.inputs[n];if(r!==void 0&&(e.inputs[n]=r,e.declaredInputs[n]=t.declaredInputs[n],t.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!t.inputTransforms.hasOwnProperty(i))continue;e.inputTransforms??={},e.inputTransforms[i]=t.inputTransforms[i]}}}function IP(e){let t=0,n=null;for(let r=e.length-1;r>=0;r--){let i=e[r];i.hostVars=t+=i.hostVars,i.hostAttrs=vc(i.hostAttrs,n=vc(n,i.hostAttrs))}}function id(e){return e===$s?{}:e===Fn?[]:e}function bP(e,t){let n=e.viewQuery;n?e.viewQuery=(r,i)=>{t(r,i),n(r,i)}:e.viewQuery=t}function xP(e,t){let n=e.contentQueries;n?e.contentQueries=(r,i,s)=>{t(r,i,s),n(r,i,s)}:e.contentQueries=t}function SP(e,t){let n=e.hostBindings;n?e.hostBindings=(r,i)=>{t(r,i),n(r,i)}:e.hostBindings=t}var so=class{},Dc=class{};var nm=class extends so{constructor(t,n,r,i=!0){super(),this.ngModuleType=t,this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Dd(this);let s=_C(t);this._bootstrapComponents=AE(s.bootstrap),this._r3Injector=iE(t,n,[{provide:so,useValue:this},{provide:Js,useValue:this.componentFactoryResolver},...r],Bn(t),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}},rm=class extends Dc{constructor(t){super(),this.moduleType=t}create(t){return new nm(this.moduleType,t,[])}};var Td=class extends so{constructor(t){super(),this.componentFactoryResolver=new Dd(this),this.instance=null;let n=new wc([...t.providers,{provide:so,useValue:this},{provide:Js,useValue:this.componentFactoryResolver}],t.parent||bm(),t.debugName,new Set(["environment"]));this.injector=n,t.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}};function t0(e,t,n=null){return new Td({providers:e,parent:t,debugName:n,runEnvironmentInitializers:!0}).injector}function Qr(e,t,n){let r=e[t];return Object.is(r,n)?!1:(e[t]=n,!0)}function AP(e,t,n,r){let i=Qr(e,t,n);return Qr(e,t+1,r)||i}function DP(e){return(e.flags&32)===32}function TP(e,t,n,r,i,s,l,h,g){let m=t.consts,C=$d(t,e,4,l||null,h||null);GE(t,n,C,Qs(m,g)),km(t,C);let E=C.tView=Ym(2,C,r,i,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,m,null);return t.queries!==null&&(t.queries.template(t,C),E.queries=t.queries.embeddedTView(C)),C}function im(e,t,n,r,i,s,l,h,g,m){let C=n+sr,E=t.firstCreatePass?TP(C,t,e,r,i,s,l,h,g):t.data[C];Nc(E,!1);let x=MP(t,e,E,n);Om()&&$m(t,e,x,E),$o(x,e);let D=YE(x,e,x,E);return e[C]=D,qd(e,D),aP(D,E,e),xm(E)&&jE(t,e,E),g!=null&&HE(e,E,m),E}function jn(e,t,n,r,i,s,l,h){let g=Ke(),m=dn(),C=Qs(m.consts,s);return im(g,m,e,t,n,r,i,C,l,h),jn}var MP=NP;function NP(e,t,n,r){return Pm(!0),t[Ut].createComment("")}var gc=function(e){return e[e.EarlyRead=0]="EarlyRead",e[e.Write=1]="Write",e[e.MixedReadWrite=2]="MixedReadWrite",e[e.Read=3]="Read",e}(gc||{}),RP=(()=>{class e{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=de({token:e,providedIn:"root",factory:()=>new e})}}return e})(),Zw=class e{constructor(){this.ngZone=J(qt),this.scheduler=J(Ks),this.errorHandler=J(mi,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[gc.EarlyRead,gc.Write,gc.MixedReadWrite,gc.Read]}execute(){this.executing=!0;for(let t of e.PHASES)for(let n of this.sequences)if(!(n.erroredOrDestroyed||!n.hooks[t]))try{n.pipelinedValue=this.ngZone.runOutsideAngular(()=>n.hooks[t](n.pipelinedValue))}catch(r){n.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let t of this.sequences)t.afterRun(),t.once&&this.sequences.delete(t);for(let t of this.deferredRegistrations)this.sequences.add(t);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(t){this.executing?this.deferredRegistrations.add(t):(this.sequences.add(t),this.scheduler.notify(6))}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}static{this.\u0275prov=de({token:e,providedIn:"root",factory:()=>new e})}};function Xd(e,t,n,r){let i=Ke(),s=ra();if(Qr(i,s,t)){let l=dn(),h=Rm();CO(h,i,e,t,n,r)}return Xd}function OP(e,t,n,r){return Qr(e,ra(),n)?t+yc(n)+r:Pr}function PP(e,t,n,r,i,s){let l=SN(),h=AP(e,l,n,i);return Dm(2),h?t+yc(n)+r+yc(i)+s:Pr}function od(e,t){return e<<17|t<<2}function Yo(e){return e>>17&32767}function kP(e){return(e&2)==2}function LP(e,t){return e&131071|t<<17}function om(e){return e|2}function ta(e){return(e&131068)>>2}function sg(e,t){return e&-131069|t<<2}function FP(e){return(e&1)===1}function sm(e){return e|1}function BP(e,t,n,r,i,s){let l=s?t.classBindings:t.styleBindings,h=Yo(l),g=ta(l);e[r]=n;let m=!1,C;if(Array.isArray(n)){let E=n;C=E[1],(C===null||Mc(E,C)>0)&&(m=!0)}else C=n;if(i)if(g!==0){let x=Yo(e[h+1]);e[r+1]=od(x,h),x!==0&&(e[x+1]=sg(e[x+1],r)),e[h+1]=LP(e[h+1],r)}else e[r+1]=od(h,0),h!==0&&(e[h+1]=sg(e[h+1],r)),h=r;else e[r+1]=od(g,0),h===0?h=r:e[g+1]=sg(e[g+1],r),g=r;m&&(e[r+1]=om(e[r+1])),Xw(e,C,r,!0),Xw(e,C,r,!1),VP(t,C,e,r,s),l=od(h,g),s?t.classBindings=l:t.styleBindings=l}function VP(e,t,n,r,i){let s=i?e.residualClasses:e.residualStyles;s!=null&&typeof t=="string"&&Mc(s,t)>=0&&(n[r+1]=sm(n[r+1]))}function Xw(e,t,n,r){let i=e[n+1],s=t===null,l=r?Yo(i):ta(i),h=!1;for(;l!==0&&(h===!1||s);){let g=e[l],m=e[l+1];UP(g,t)&&(h=!0,e[l+1]=r?sm(m):om(m)),l=r?Yo(m):ta(m)}h&&(e[n+1]=r?om(i):sm(i))}function UP(e,t){return e===null||t==null||(Array.isArray(e)?e[1]:e)===t?!0:Array.isArray(e)&&typeof t=="string"?Mc(e,t)>=0:!1}var Mr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function jP(e){return e.substring(Mr.key,Mr.keyEnd)}function HP(e){return zP(e),pI(e,gI(e,0,Mr.textEnd))}function pI(e,t){let n=Mr.textEnd;return n===t?-1:(t=Mr.keyEnd=WP(e,Mr.key=t,n),gI(e,t,n))}function zP(e){Mr.key=0,Mr.keyEnd=0,Mr.value=0,Mr.valueEnd=0,Mr.textEnd=e.length}function gI(e,t,n){for(;t<n&&e.charCodeAt(t)<=32;)t++;return t}function WP(e,t,n){for(;t<n&&e.charCodeAt(t)>32;)t++;return t}function Ti(e,t,n){let r=Ke(),i=ra();if(Qr(r,i,t)){let s=dn(),l=Rm();WE(s,l,r,e,t,r[Ut],n,!1)}return Ti}function am(e,t,n,r,i){let s=t.inputs,l=i?"class":"style";Zm(e,n,s[l],l,r)}function Qd(e,t,n){return yI(e,t,n,!1),Qd}function Kd(e,t){return yI(e,t,null,!0),Kd}function mI(e){$P(KP,GP,e,!0)}function GP(e,t){for(let n=HP(t);n>=0;n=pI(t,n))wm(e,jP(t),!0)}function yI(e,t,n,r){let i=Ke(),s=dn(),l=Dm(2);if(s.firstUpdatePass&&vI(s,e,l,r),t!==Pr&&Qr(i,l,t)){let h=s.data[xi()];wI(s,h,i,i[Ut],e,i[l+1]=ek(t,n),r,l)}}function $P(e,t,n,r){let i=dn(),s=Dm(2);i.firstUpdatePass&&vI(i,null,s,r);let l=Ke();if(n!==Pr&&Qr(l,s,n)){let h=i.data[xi()];if(CI(h,r)&&!_I(i,s)){let g=r?h.classesWithoutHost:h.stylesWithoutHost;g!==null&&(n=fg(g,n||"")),am(i,h,l,n,r)}else JP(i,h,l,l[Ut],l[s+1],l[s+1]=QP(e,t,n),r,s)}}function _I(e,t){return t>=e.expandoStartIndex}function vI(e,t,n,r){let i=e.data;if(i[n+1]===null){let s=i[xi()],l=_I(e,n);CI(s,r)&&t===null&&!l&&(t=!1),t=qP(i,s,t,r),BP(i,s,t,n,l,r)}}function qP(e,t,n,r){let i=NN(e),s=r?t.residualClasses:t.residualStyles;if(i===null)(r?t.classBindings:t.styleBindings)===0&&(n=ag(null,e,t,n,r),n=Tc(n,t.attrs,r),s=null);else{let l=t.directiveStylingLast;if(l===-1||e[l]!==i)if(n=ag(i,e,t,n,r),s===null){let g=YP(e,t,r);g!==void 0&&Array.isArray(g)&&(g=ag(null,e,t,g[1],r),g=Tc(g,t.attrs,r),ZP(e,t,r,g))}else s=XP(e,t,r)}return s!==void 0&&(r?t.residualClasses=s:t.residualStyles=s),n}function YP(e,t,n){let r=n?t.classBindings:t.styleBindings;if(ta(r)!==0)return e[Yo(r)]}function ZP(e,t,n,r){let i=n?t.classBindings:t.styleBindings;e[Yo(i)]=r}function XP(e,t,n){let r,i=t.directiveEnd;for(let s=1+t.directiveStylingLast;s<i;s++){let l=e[s].hostAttrs;r=Tc(r,l,n)}return Tc(r,t.attrs,n)}function ag(e,t,n,r,i){let s=null,l=n.directiveEnd,h=n.directiveStylingLast;for(h===-1?h=n.directiveStart:h++;h<l&&(s=t[h],r=Tc(r,s.hostAttrs,i),s!==e);)h++;return e!==null&&(n.directiveStylingLast=h),r}function Tc(e,t,n){let r=n?1:2,i=-1;if(t!==null)for(let s=0;s<t.length;s++){let l=t[s];typeof l=="number"?i=l:i===r&&(Array.isArray(e)||(e=e===void 0?[]:["",e]),wm(e,l,n?!0:t[++s]))}return e===void 0?null:e}function QP(e,t,n){if(n==null||n==="")return Fn;let r=[],i=Si(n);if(Array.isArray(i))for(let s=0;s<i.length;s++)e(r,i[s],!0);else if(typeof i=="object")for(let s in i)i.hasOwnProperty(s)&&e(r,s,i[s]);else typeof i=="string"&&t(r,i);return r}function KP(e,t,n){let r=String(t);r!==""&&!r.includes(" ")&&wm(e,r,n)}function JP(e,t,n,r,i,s,l,h){i===Pr&&(i=Fn);let g=0,m=0,C=0<i.length?i[0]:null,E=0<s.length?s[0]:null;for(;C!==null||E!==null;){let x=g<i.length?i[g+1]:void 0,D=m<s.length?s[m+1]:void 0,N=null,U;C===E?(g+=2,m+=2,x!==D&&(N=E,U=D)):E===null||C!==null&&C<E?(g+=2,N=C):(m+=2,N=E,U=D),N!==null&&wI(e,t,n,r,N,U,l,h),C=g<i.length?i[g]:null,E=m<s.length?s[m]:null}}function wI(e,t,n,r,i,s,l,h){if(!(t.type&3))return;let g=e.data,m=g[h+1],C=FP(m)?Qw(g,t,n,i,ta(m),l):void 0;if(!Md(C)){Md(s)||kP(m)&&(s=Qw(g,null,n,i,h,l));let E=RC(xi(),n);KR(r,l,E,i,s)}}function Qw(e,t,n,r,i,s){let l=t===null,h;for(;i>0;){let g=e[i],m=Array.isArray(g),C=m?g[1]:g,E=C===null,x=n[i+1];x===Pr&&(x=E?Fn:void 0);let D=E?Qp(x,r):C===r?x:void 0;if(m&&!Md(D)&&(D=Qp(g,r)),Md(D)&&(h=D,l))return h;let N=e[i+1];i=l?Yo(N):ta(N)}if(t!==null){let g=s?t.residualClasses:t.residualStyles;g!=null&&(h=Qp(g,r))}return h}function Md(e){return e!==void 0}function ek(e,t){return e==null||e===""||(typeof t=="string"?e=e+t:typeof e=="object"&&(e=Bn(Si(e)))),e}function CI(e,t){return(e.flags&(t?8:16))!==0}var cm=class{destroy(t){}updateValue(t,n){}swap(t,n){let r=Math.min(t,n),i=Math.max(t,n),s=this.detach(i);if(i-r>1){let l=this.detach(r);this.attach(r,s),this.attach(i,l)}else this.attach(r,s)}move(t,n){this.attach(n,this.detach(t))}};function cg(e,t,n,r,i){return e===n&&Object.is(t,r)?1:Object.is(i(e,t),i(n,r))?-1:0}function tk(e,t,n){let r,i,s=0,l=e.length-1,h=void 0;if(Array.isArray(t)){let g=t.length-1;for(;s<=l&&s<=g;){let m=e.at(s),C=t[s],E=cg(s,m,s,C,n);if(E!==0){E<0&&e.updateValue(s,C),s++;continue}let x=e.at(l),D=t[g],N=cg(l,x,g,D,n);if(N!==0){N<0&&e.updateValue(l,D),l--,g--;continue}let U=n(s,m),G=n(l,x),z=n(s,C);if(Object.is(z,G)){let ne=n(g,D);Object.is(ne,U)?(e.swap(s,l),e.updateValue(l,D),g--,l--):e.move(l,s),e.updateValue(s,C),s++;continue}if(r??=new Nd,i??=Jw(e,s,l,n),lm(e,r,s,z))e.updateValue(s,C),s++,l++;else if(i.has(z))r.set(U,e.detach(s)),l--;else{let ne=e.create(s,t[s]);e.attach(s,ne),s++,l++}}for(;s<=g;)Kw(e,r,n,s,t[s]),s++}else if(t!=null){let g=t[Symbol.iterator](),m=g.next();for(;!m.done&&s<=l;){let C=e.at(s),E=m.value,x=cg(s,C,s,E,n);if(x!==0)x<0&&e.updateValue(s,E),s++,m=g.next();else{r??=new Nd,i??=Jw(e,s,l,n);let D=n(s,E);if(lm(e,r,s,D))e.updateValue(s,E),s++,l++,m=g.next();else if(!i.has(D))e.attach(s,e.create(s,E)),s++,l++,m=g.next();else{let N=n(s,C);r.set(N,e.detach(s)),l--}}}for(;!m.done;)Kw(e,r,n,e.length,m.value),m=g.next()}for(;s<=l;)e.destroy(e.detach(l--));r?.forEach(g=>{e.destroy(g)})}function lm(e,t,n,r){return t!==void 0&&t.has(r)?(e.attach(n,t.get(r)),t.delete(r),!0):!1}function Kw(e,t,n,r,i){if(lm(e,t,r,n(r,i)))e.updateValue(r,i);else{let s=e.create(r,i);e.attach(r,s)}}function Jw(e,t,n,r){let i=new Set;for(let s=t;s<=n;s++)i.add(r(s,e.at(s)));return i}var Nd=class{constructor(){this.kvMap=new Map,this._vMap=void 0}has(t){return this.kvMap.has(t)}delete(t){if(!this.has(t))return!1;let n=this.kvMap.get(t);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(t,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(t),!0}get(t){return this.kvMap.get(t)}set(t,n){if(this.kvMap.has(t)){let r=this.kvMap.get(t);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,n)}else this.kvMap.set(t,n)}forEach(t){for(let[n,r]of this.kvMap)if(t(r,n),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),t(r,n)}}};function Hn(e,t){ua("NgControlFlow");let n=Ke(),r=ra(),i=n[r]!==Pr?n[r]:-1,s=i!==-1?Rd(n,sr+i):void 0,l=0;if(Qr(n,r,e)){let h=ze(null);try{if(s!==void 0&&tI(s,l),e!==-1){let g=sr+e,m=Rd(n,g),C=hm(n[Se],g),E=Sc(m,C.tView.ssrId),x=Yd(n,C,t,{dehydratedView:E});Zd(m,x,l,bc(C,E))}}finally{ze(h)}}else if(s!==void 0){let h=eI(s,l);h!==void 0&&(h[_n]=t)}}var um=class{constructor(t,n,r){this.lContainer=t,this.$implicit=n,this.$index=r}get $count(){return this.lContainer.length-vn}};function cr(e,t){return t}var dm=class{constructor(t,n,r){this.hasEmptyBlock=t,this.trackByFn=n,this.liveCollection=r}};function lr(e,t,n,r,i,s,l,h,g,m,C,E,x){ua("NgControlFlow");let D=Ke(),N=dn(),U=g!==void 0,G=Ke(),z=h?l.bind(G[Rr][_n]):l,ne=new dm(U,z);G[sr+e]=ne,im(D,N,e+1,t,n,r,i,Qs(N.consts,s)),U&&im(D,N,e+2,g,m,C,E,Qs(N.consts,x))}var fm=class extends cm{constructor(t,n,r){super(),this.lContainer=t,this.hostLView=n,this.templateTNode=r,this.operationsCounter=void 0,this.needsIndexUpdate=!1}get length(){return this.lContainer.length-vn}at(t){return this.getLView(t)[_n].$implicit}attach(t,n){let r=n[Cc];this.needsIndexUpdate||=t!==this.length,Zd(this.lContainer,n,t,bc(this.templateTNode,r))}detach(t){return this.needsIndexUpdate||=t!==this.length-1,nk(this.lContainer,t)}create(t,n){let r=Sc(this.lContainer,this.templateTNode.tView.ssrId),i=Yd(this.hostLView,this.templateTNode,new um(this.lContainer,n,t),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(t){zd(t[Se],t),this.operationsCounter?.recordDestroy()}updateValue(t,n){this.getLView(t)[_n].$implicit=n}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let t=0;t<this.length;t++)this.getLView(t)[_n].$index=t}getLView(t){return rk(this.lContainer,t)}};function ur(e){let t=ze(null),n=xi();try{let r=Ke(),i=r[Se],s=r[n],l=n+1,h=Rd(r,l);if(s.liveCollection===void 0){let m=hm(i,l);s.liveCollection=new fm(h,r,m)}else s.liveCollection.reset();let g=s.liveCollection;if(tk(g,e,s.trackByFn),g.updateIndexes(),s.hasEmptyBlock){let m=ra(),C=g.length===0;if(Qr(r,m,C)){let E=n+2,x=Rd(r,E);if(C){let D=hm(i,E),N=Sc(x,D.tView.ssrId),U=Yd(r,D,void 0,{dehydratedView:N});Zd(x,U,0,bc(D,N))}else tI(x,0)}}}finally{ze(t)}}function Rd(e,t){return e[t]}function nk(e,t){return Ic(e,t)}function rk(e,t){return eI(e,t)}function hm(e,t){return Sm(e,t)}function ik(e,t,n,r,i,s){let l=t.consts,h=Qs(l,i),g=$d(t,e,2,r,h);return GE(t,n,g,Qs(l,s)),g.attrs!==null&&Yg(g,g.attrs,!1),g.mergedAttrs!==null&&Yg(g,g.mergedAttrs,!0),t.queries!==null&&t.queries.elementStart(t,g),g}function F(e,t,n,r){let i=Ke(),s=dn(),l=sr+e,h=i[Ut],g=s.firstCreatePass?ik(l,s,i,t,n,r):s.data[l],m=ok(s,i,g,h,t,e);i[l]=m;let C=xm(g);return Nc(g,!0),kE(h,m,g),!DP(g)&&Om()&&$m(s,i,m,g),yN()===0&&$o(m,i),_N(),C&&(jE(s,i,g),UE(s,g,i)),r!==null&&HE(i,g),F}function L(){let e=Un();VC()?bN():(e=e.parent,Nc(e,!1));let t=e;CN(t)&&EN(),vN();let n=dn();return n.firstCreatePass&&(km(n,e),AC(e)&&n.queries.elementEnd(e)),t.classesWithoutHost!=null&&BN(t)&&am(n,t,Ke(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&VN(t)&&am(n,t,Ke(),t.stylesWithoutHost,!1),L}function _e(e,t,n,r){return F(e,t,n,r),L(),_e}var ok=(e,t,n,r,i,s)=>(Pm(!0),DE(r,i,PN()));function fn(){return Ke()}var Od="en-US";var sk=Od;function ak(e){typeof e=="string"&&(sk=e.toLowerCase().replace(/_/g,"-"))}var ck=(e,t,n)=>{};function ie(e,t,n,r){let i=Ke(),s=dn(),l=Un();return EI(s,i,i[Ut],l,e,t,r),ie}function lk(e,t,n,r){let i=e.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let l=i[s];if(l===n&&i[s+1]===r){let h=t[yd],g=i[s+2];return h.length>g?h[g]:null}typeof l=="string"&&(s+=2)}return null}function EI(e,t,n,r,i,s,l){let h=xm(r),m=e.firstCreatePass&&QE(e),C=t[_n],E=XE(t),x=!0;if(r.type&3||l){let U=ar(r,t),G=l?l(U):U,z=E.length,ne=l?le=>l(Xr(le[r.index])):r.index,He=null;if(!l&&h&&(He=lk(e,t,i,r.index)),He!==null){let le=He.__ngLastListenerFn__||He;le.__ngNextListenerFn__=s,He.__ngLastListenerFn__=s,x=!1}else{s=tC(r,t,C,s),ck(U,i,s);let le=n.listen(G,i,s);E.push(s,le),m&&m.push(i,ne,z,z+1)}}else s=tC(r,t,C,s);let D=r.outputs,N;if(x&&D!==null&&(N=D[i])){let U=N.length;if(U)for(let G=0;G<U;G+=2){let z=N[G],ne=N[G+1],j=t[z][ne].subscribe(s),se=E.length;E.push(s,j),m&&m.push(i,r.index,se,-(se+1))}}}function eC(e,t,n,r){let i=ze(null);try{return qr(6,t,n),n(r)!==!1}catch(s){return KE(e,s),!1}finally{qr(7,t,n),ze(i)}}function tC(e,t,n,r){return function i(s){if(s===Function)return r;let l=e.componentOffset>-1?ao(e.index,t):t;Qm(l,5);let h=eC(t,n,r,s),g=i.__ngNextListenerFn__;for(;g;)h=eC(t,n,g,s)&&h,g=g.__ngNextListenerFn__;return h}}function St(e=1){return ON(e)}function Jd(e,t,n){gP(e,t,n)}function Pc(e){let t=Ke(),n=dn(),r=jC();Tm(r+1);let i=e0(n,r);if(e.dirty&&hN(t)===((i.metadata.flags&2)===2)){if(i.matches===null)e.reset([]);else{let s=_P(t,r);e.reset(s,oR),e.notifyOnChanges()}return!0}return!1}function kc(){return hP(Ke(),jC())}function ef(e){let t=xN();return fN(t,sr+e)}function $(e,t=""){let n=Ke(),r=dn(),i=e+sr,s=r.firstCreatePass?$d(r,i,1,t,null):r.data[i],l=uk(r,n,s,t,e);n[i]=l,Om()&&$m(r,n,l,s),Nc(s,!1)}var uk=(e,t,n,r,i)=>(Pm(!0),kR(t[Ut],r));function uo(e){return Cn("",e,""),uo}function Cn(e,t,n){let r=Ke(),i=OP(r,e,t,n);return i!==Pr&&JE(r,xi(),i),Cn}function n0(e,t,n,r,i){let s=Ke(),l=PP(s,e,t,n,r,i);return l!==Pr&&JE(s,xi(),l),n0}function Yt(e,t,n){hI(t)&&(t=t());let r=Ke(),i=ra();if(Qr(r,i,t)){let s=dn(),l=Rm();WE(s,l,r,e,t,r[Ut],n,!1)}return Yt}function nn(e,t){let n=hI(e);return n&&e.set(t),n}function Zt(e,t){let n=Ke(),r=dn(),i=Un();return EI(r,n,n[Ut],i,e,t),Zt}function dk(e,t,n){let r=dn();if(r.firstCreatePass){let i=io(e);pm(n,r.data,r.blueprint,i,!0),pm(t,r.data,r.blueprint,i,!1)}}function pm(e,t,n,r,i){if(e=Sn(e),Array.isArray(e))for(let s=0;s<e.length;s++)pm(e[s],t,n,r,i);else{let s=dn(),l=Ke(),h=Un(),g=Ys(e)?e:Sn(e.provide),m=bC(e),C=h.providerIndexes&1048575,E=h.directiveStart,x=h.providerIndexes>>20;if(Ys(e)||!e.multi){let D=new Wo(m,i,re),N=ug(g,t,i?C:C+x,E);N===-1?(xg(Ed(h,l),s,g),lg(s,e,t.length),t.push(g),h.directiveStart++,h.directiveEnd++,i&&(h.providerIndexes+=1048576),n.push(D),l.push(D)):(n[N]=D,l[N]=D)}else{let D=ug(g,t,C+x,E),N=ug(g,t,C,C+x),U=D>=0&&n[D],G=N>=0&&n[N];if(i&&!G||!i&&!U){xg(Ed(h,l),s,g);let z=pk(i?hk:fk,n.length,i,r,m);!i&&G&&(n[N].providerFactory=z),lg(s,e,t.length,0),t.push(g),h.directiveStart++,h.directiveEnd++,i&&(h.providerIndexes+=1048576),n.push(z),l.push(z)}else{let z=II(n[i?N:D],m,!i&&r);lg(s,e,D>-1?D:N,z)}!i&&r&&G&&n[N].componentProviders++}}}function lg(e,t,n,r){let i=Ys(t),s=KM(t);if(i||s){let g=(s?Sn(t.useClass):t).prototype.ngOnDestroy;if(g){let m=e.destroyHooks||(e.destroyHooks=[]);if(!i&&t.multi){let C=m.indexOf(n);C===-1?m.push(n,[r,g]):m[C+1].push(r,g)}else m.push(n,g)}}}function II(e,t,n){return n&&e.componentProviders++,e.multi.push(t)-1}function ug(e,t,n,r){for(let i=n;i<r;i++)if(t[i]===e)return i;return-1}function fk(e,t,n,r){return gm(this.multi,[])}function hk(e,t,n,r){let i=this.multi,s;if(this.providerFactory){let l=this.providerFactory.componentProviders,h=Go(n,n[Se],this.providerFactory.index,r);s=h.slice(0,l),gm(i,s);for(let g=l;g<h.length;g++)s.push(h[g])}else s=[],gm(i,s);return s}function gm(e,t){for(let n=0;n<e.length;n++){let r=e[n];t.push(r())}return t}function pk(e,t,n,r,i){let s=new Wo(e,n,re);return s.multi=[],s.index=t,s.componentProviders=0,II(s,i,r&&!n),s}function Lc(e,t=[]){return n=>{n.providersResolver=(r,i)=>dk(r,i?i(e):e,t)}}var gk=(()=>{class e{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=CC(!1,n.type),i=r.length>0?t0([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=de({token:e,providedIn:"environment",factory:()=>new e(Le(or))})}}return e})();function ve(e){ua("NgStandalone"),e.getStandaloneInjector=t=>t.get(gk).getOrCreateStandaloneInjector(e)}var tf=(()=>{class e{log(n){console.log(n)}warn(n){console.warn(n)}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"platform"})}}return e})();var bI=new Ie("");function Xo(e){return!!e&&typeof e.then=="function"}function xI(e){return!!e&&typeof e.subscribe=="function"}var SI=new Ie(""),AI=(()=>{class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r}),this.appInits=J(SI,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let s=i();if(Xo(s))n.push(s);else if(xI(s)){let l=new Promise((h,g)=>{s.subscribe({complete:h,error:g})});n.push(l)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),r0=new Ie("");function mk(){jv(()=>{throw new ue(600,!1)})}function yk(e){return e.isBoundToModule}var _k=10;function vk(e,t,n){try{let r=n();return Xo(r)?r.catch(i=>{throw t.runOutsideAngular(()=>e.handleError(i)),i}):r}catch(r){throw t.runOutsideAngular(()=>e.handleError(r)),r}}var Qo=(()=>{class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=J(rR),this.afterRenderManager=J(RP),this.zonelessEnabled=J(Jm),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new ln,this.afterTick=new ln,this.componentTypes=[],this.components=[],this.isStable=J(oa).hasPendingTasks.pipe(Oe(n=>!n)),this._injector=J(or)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}get injector(){return this._injector}bootstrap(n,r){let i=n instanceof Ad;if(!this._injector.get(AI).done){let x=!i&&yC(n),D=!1;throw new ue(405,D)}let l;i?l=n:l=this._injector.get(Js).resolveComponentFactory(n),this.componentTypes.push(l.componentType);let h=yk(l)?void 0:this._injector.get(so),g=r||l.selector,m=l.create(oo.NULL,[],g,h),C=m.location.nativeElement,E=m.injector.get(bI,null);return E?.registerApplication(C),m.onDestroy(()=>{this.detachView(m.hostView),dd(this.components,m),E?.unregisterApplication(C)}),this._loadComponent(m),m}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new ue(101,!1);let n=ze(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,ze(n),this.afterTick.next()}}synchronize(){let n=null;this._injector.destroyed||(n=this._injector.get(ea,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<_k;)this.synchronizeOnce(n)}synchronizeOnce(n){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:s}of this._views)wk(i,s,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else n?.begin?.(),n?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>Ud(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;dd(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);let r=this._injector.get(r0,[]);[...this._bootstrapListeners,...r].forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>dd(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new ue(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function dd(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}function wk(e,t,n,r){if(!n&&!Ud(e))return;iI(e,t,n&&!r?0:1)}var mm=class{constructor(t,n){this.ngModuleFactory=t,this.componentFactories=n}},i0=(()=>{class e{compileModuleSync(n){return new rm(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=_C(n),s=AE(i.declarations).reduce((l,h)=>{let g=Vo(h);return g&&l.push(new Ac(g)),l},[]);return new mm(r,s)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var Ck=(()=>{class e{constructor(){this.zone=J(qt),this.changeDetectionScheduler=J(Ks),this.applicationRef=J(Qo)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function Ek({ngZoneFactory:e,ignoreChangesOutsideZone:t,scheduleInRootZone:n}){return e??=()=>new qt(Ve(K({},Ik()),{scheduleInRootZone:n})),[{provide:qt,useFactory:e},{provide:qs,multi:!0,useFactory:()=>{let r=J(Ck,{optional:!0});return()=>r.initialize()}},{provide:qs,multi:!0,useFactory:()=>{let r=J(bk);return()=>{r.initialize()}}},t===!0?{provide:cI,useValue:!0}:[],{provide:lI,useValue:n??oE}]}function Ik(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}var bk=(()=>{class e{constructor(){this.subscription=new Nt,this.initialized=!1,this.zone=J(qt),this.pendingTasks=J(oa)}initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{qt.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{qt.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var xk=(()=>{class e{constructor(){this.appRef=J(Qo),this.taskService=J(oa),this.ngZone=J(qt),this.zonelessEnabled=J(Jm),this.disableScheduling=J(cI,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new Nt,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(bd):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(J(lI,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Mg||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?Pw:aE;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(bd+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(n),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,Pw(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function Sk(){return typeof $localize<"u"&&$localize.locale||Od}var o0=new Ie("",{providedIn:"root",factory:()=>J(o0,ke.Optional|ke.SkipSelf)||Sk()});var DI=new Ie("");function sd(e){return!!e.platformInjector}function Ak(e){let t=sd(e)?e.r3Injector:e.moduleRef.injector,n=t.get(qt);return n.run(()=>{sd(e)?e.r3Injector.resolveInjectorInitializers():e.moduleRef.resolveInjectorInitializers();let r=t.get(mi,null),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:s=>{r.handleError(s)}})}),sd(e)){let s=()=>t.destroy(),l=e.platformInjector.get(DI);l.add(s),t.onDestroy(()=>{i.unsubscribe(),l.delete(s)})}else e.moduleRef.onDestroy(()=>{dd(e.allPlatformModules,e.moduleRef),i.unsubscribe()});return vk(r,n,()=>{let s=t.get(AI);return s.runInitializers(),s.donePromise.then(()=>{let l=t.get(o0,Od);if(ak(l||Od),sd(e)){let h=t.get(Qo);return e.rootComponent!==void 0&&h.bootstrap(e.rootComponent),h}else return Dk(e.moduleRef,e.allPlatformModules),e.moduleRef})})})}function Dk(e,t){let n=e.injector.get(Qo);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(r=>n.bootstrap(r));else if(e.instance.ngDoBootstrap)e.instance.ngDoBootstrap(n);else throw new ue(-403,!1);t.push(e)}var fd=null;function Tk(e=[],t){return oo.create({name:t,providers:[{provide:Fd,useValue:"platform"},{provide:DI,useValue:new Set([()=>fd=null])},...e]})}function Mk(e=[]){if(fd)return fd;let t=Tk(e);return fd=t,mk(),Nk(t),t}function Nk(e){e.get(Um,null)?.forEach(n=>n())}var Mi=(()=>{class e{static{this.__NG_ELEMENT_ID__=Rk}}return e})();function Rk(e){return Ok(Un(),Ke(),(e&16)===16)}function Ok(e,t,n){if(Vd(e)&&!n){let r=ao(e.index,t);return new qo(r,r)}else if(e.type&175){let r=t[Rr];return new qo(r,t)}return null}function TI(e){try{let{rootComponent:t,appProviders:n,platformProviders:r}=e,i=Mk(r),s=[Ek({}),{provide:Ks,useExisting:xk},...n||[]],l=new Td({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1});return Ak({r3Injector:l.injector,platformInjector:i,rootComponent:t})}catch(t){return Promise.reject(t)}}function Fc(e){return typeof e=="boolean"?e:e!=null&&e!=="false"}function Bc(e,t){ua("NgSignals");let n=Bv(e);return t?.equal&&(n[di].equal=t.equal),n}function Ni(e){let t=ze(null);try{return e()}finally{ze(t)}}var RI=null;function Ri(){return RI}function OI(e){RI??=e}var nf=class{};var Qn=new Ie(""),PI=(()=>{class e{historyGo(n){throw new Error("")}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=de({token:e,factory:()=>J(Lk),providedIn:"platform"})}}return e})();var Lk=(()=>{class e extends PI{constructor(){super(),this._doc=J(Qn),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Ri().getBaseHref(this._doc)}onPopState(n){let r=Ri().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=Ri().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=de({token:e,factory:()=>new e,providedIn:"platform"})}}return e})();function kI(e,t){if(e.length==0)return t;if(t.length==0)return e;let n=0;return e.endsWith("/")&&n++,t.startsWith("/")&&n++,n==2?e+t.substring(1):n==1?e+t:e+"/"+t}function MI(e){let t=e.match(/#|\?|$/),n=t&&t.index||e.length,r=n-(e[n-1]==="/"?1:0);return e.slice(0,r)+e.slice(n)}function Ko(e){return e&&e[0]!=="?"?"?"+e:e}var of=(()=>{class e{historyGo(n){throw new Error("")}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=de({token:e,factory:()=>J(LI),providedIn:"root"})}}return e})(),Fk=new Ie(""),LI=(()=>{class e extends of{constructor(n,r){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??J(Qn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return kI(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+Ko(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,s){let l=this.prepareExternalUrl(i+Ko(s));this._platformLocation.pushState(n,r,l)}replaceState(n,r,i,s){let l=this.prepareExternalUrl(i+Ko(s));this._platformLocation.replaceState(n,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static{this.\u0275fac=function(r){return new(r||e)(Le(PI),Le(Fk,8))}}static{this.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var Vc=(()=>{class e{constructor(n){this._subject=new At,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=Uk(MI(NI(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+Ko(r))}normalize(n){return e.stripTrailingSlash(Vk(this._basePath,NI(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Ko(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Ko(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r,complete:i})}static{this.normalizeQueryParams=Ko}static{this.joinWithSlash=kI}static{this.stripTrailingSlash=MI}static{this.\u0275fac=function(r){return new(r||e)(Le(of))}}static{this.\u0275prov=de({token:e,factory:()=>Bk(),providedIn:"root"})}}return e})();function Bk(){return new Vc(Le(of))}function Vk(e,t){if(!e||!t.startsWith(e))return t;let n=t.substring(e.length);return n===""||["/",";","?","#"].includes(n[0])?n:t}function NI(e){return e.replace(/\/index.html$/,"")}function Uk(e){if(new RegExp("^(https?:)?//").test(e)){let[,n]=e.split(/\/\/[^\/]+/);return n}return e}function FI(e,t){t=encodeURIComponent(t);for(let n of e.split(";")){let r=n.indexOf("="),[i,s]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===t)return decodeURIComponent(s)}return null}var a0=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=wi({type:e})}static{this.\u0275inj=vi({})}}return e})(),BI="browser",jk="server";function c0(e){return e===jk}var rf=class{};var d0=class extends nf{constructor(){super(...arguments),this.supportsDOMEvents=!0}},f0=class e extends d0{static makeCurrent(){OI(new e)}onAndCancel(t,n,r){return t.addEventListener(n,r),()=>{t.removeEventListener(n,r)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.remove()}createElement(t,n){return n=n||this.getDefaultDocument(),n.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return n==="window"?window:n==="document"?t:n==="body"?t.body:null}getBaseHref(t){let n=zk();return n==null?null:Wk(n)}resetBaseElement(){Uc=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return FI(document.cookie,t)}},Uc=null;function zk(){return Uc=Uc||document.querySelector("base"),Uc?Uc.getAttribute("href"):null}function Wk(e){return new URL(e,document.baseURI).pathname}var Gk=(()=>{class e{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=de({token:e,factory:e.\u0275fac})}}return e})(),h0=new Ie(""),HI=(()=>{class e{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(s=>s.supports(n)),!r)throw new ue(5101,!1);return this._eventNameToPlugin.set(n,r),r}static{this.\u0275fac=function(r){return new(r||e)(Le(h0),Le(qt))}}static{this.\u0275prov=de({token:e,factory:e.\u0275fac})}}return e})(),sf=class{constructor(t){this._doc=t}},l0="ng-app-id",zI=(()=>{class e{constructor(n,r,i,s={}){this.doc=n,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=c0(s),this.resetHostNodes()}addStyles(n){for(let r of n)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(n){for(let r of n)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let n=this.styleNodesInDOM;n&&(n.forEach(r=>r.remove()),n.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(let r of this.getAllStyles())this.addStyleToHost(n,r)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(let r of this.hostNodes)this.addStyleToHost(r,n)}onStyleRemoved(n){let r=this.styleRef;r.get(n)?.elements?.forEach(i=>i.remove()),r.delete(n)}collectServerRenderedStyles(){let n=this.doc.head?.querySelectorAll(`style[${l0}="${this.appId}"]`);if(n?.length){let r=new Map;return n.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(n,r){let i=this.styleRef;if(i.has(n)){let s=i.get(n);return s.usage+=r,s.usage}return i.set(n,{usage:r,elements:[]}),r}getStyleElement(n,r){let i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===n)return i.delete(r),s.removeAttribute(l0),s;{let l=this.doc.createElement("style");return this.nonce&&l.setAttribute("nonce",this.nonce),l.textContent=r,this.platformIsServer&&l.setAttribute(l0,this.appId),n.appendChild(l),l}}addStyleToHost(n,r){let i=this.getStyleElement(n,r),s=this.styleRef,l=s.get(r)?.elements;l?l.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){let n=this.hostNodes;n.clear(),n.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||e)(Le(Qn),Le(Vm),Le(jm,8),Le(aa))}}static{this.\u0275prov=de({token:e,factory:e.\u0275fac})}}return e})(),u0={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},g0=/%COMP%/g,WI="%COMP%",$k=`_nghost-${WI}`,qk=`_ngcontent-${WI}`,Yk=!0,Zk=new Ie("",{providedIn:"root",factory:()=>Yk});function Xk(e){return qk.replace(g0,e)}function Qk(e){return $k.replace(g0,e)}function GI(e,t){return t.map(n=>n.replace(g0,e))}var VI=(()=>{class e{constructor(n,r,i,s,l,h,g,m=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=l,this.platformId=h,this.ngZone=g,this.nonce=m,this.rendererByCompId=new Map,this.platformIsServer=c0(h),this.defaultRenderer=new jc(n,l,g,this.platformIsServer)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Zr.ShadowDom&&(r=Ve(K({},r),{encapsulation:Zr.Emulated}));let i=this.getOrCreateRenderer(n,r);return i instanceof af?i.applyToHost(n):i instanceof Hc&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,s=i.get(r.id);if(!s){let l=this.doc,h=this.ngZone,g=this.eventManager,m=this.sharedStylesHost,C=this.removeStylesOnCompDestroy,E=this.platformIsServer;switch(r.encapsulation){case Zr.Emulated:s=new af(g,m,r,this.appId,C,l,h,E);break;case Zr.ShadowDom:return new p0(g,m,n,r,l,h,this.nonce,E);default:s=new Hc(g,m,r,C,l,h,E);break}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||e)(Le(HI),Le(zI),Le(Vm),Le(Zk),Le(Qn),Le(aa),Le(qt),Le(jm))}}static{this.\u0275prov=de({token:e,factory:e.\u0275fac})}}return e})(),jc=class{constructor(t,n,r,i){this.eventManager=t,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(t,n){return n?this.doc.createElementNS(u0[n]||n,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,n){(UI(t)?t.content:t).appendChild(n)}insertBefore(t,n,r){t&&(UI(t)?t.content:t).insertBefore(n,r)}removeChild(t,n){n.remove()}selectRootElement(t,n){let r=typeof t=="string"?this.doc.querySelector(t):t;if(!r)throw new ue(-5104,!1);return n||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,r,i){if(i){n=i+":"+n;let s=u0[i];s?t.setAttributeNS(s,n,r):t.setAttribute(n,r)}else t.setAttribute(n,r)}removeAttribute(t,n,r){if(r){let i=u0[r];i?t.removeAttributeNS(i,n):t.removeAttribute(`${r}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,r,i){i&(_i.DashCase|_i.Important)?t.style.setProperty(n,r,i&_i.Important?"important":""):t.style[n]=r}removeStyle(t,n,r){r&_i.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,r){t!=null&&(t[n]=r)}setValue(t,n){t.nodeValue=n}listen(t,n,r){if(typeof t=="string"&&(t=Ri().getGlobalEventTarget(this.doc,t),!t))throw new Error(`Unsupported event target ${t} for event ${n}`);return this.eventManager.addEventListener(t,n,this.decoratePreventDefault(r))}decoratePreventDefault(t){return n=>{if(n==="__ngUnwrap__")return t;(this.platformIsServer?this.ngZone.runGuarded(()=>t(n)):t(n))===!1&&n.preventDefault()}}};function UI(e){return e.tagName==="TEMPLATE"&&e.content!==void 0}var p0=class extends jc{constructor(t,n,r,i,s,l,h,g){super(t,s,l,g),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let m=GI(i.id,i.styles);for(let C of m){let E=document.createElement("style");h&&E.setAttribute("nonce",h),E.textContent=C,this.shadowRoot.appendChild(E)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,r){return super.insertBefore(this.nodeOrShadowRoot(t),n,r)}removeChild(t,n){return super.removeChild(null,n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Hc=class extends jc{constructor(t,n,r,i,s,l,h,g){super(t,s,l,h),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=g?GI(g,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},af=class extends Hc{constructor(t,n,r,i,s,l,h,g){let m=i+"-"+r.id;super(t,n,r,s,l,h,g,m),this.contentAttr=Xk(m),this.hostAttr=Qk(m)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,n){let r=super.createElement(t,n);return super.setAttribute(r,this.contentAttr,""),r}},Kk=(()=>{class e extends sf{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||e)(Le(Qn))}}static{this.\u0275prov=de({token:e,factory:e.\u0275fac})}}return e})(),jI=["alt","control","meta","shift"],Jk={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},e3={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey},t3=(()=>{class e extends sf{constructor(n){super(n)}supports(n){return e.parseEventName(n)!=null}addEventListener(n,r,i){let s=e.parseEventName(r),l=e.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ri().onAndCancel(n,s.domEventName,l))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let s=e._normalizeKey(r.pop()),l="",h=r.indexOf("code");if(h>-1&&(r.splice(h,1),l="code."),jI.forEach(m=>{let C=r.indexOf(m);C>-1&&(r.splice(C,1),l+=m+".")}),l+=s,r.length!=0||s.length===0)return null;let g={};return g.domEventName=i,g.fullKey=l,g}static matchEventFullKeyCode(n,r){let i=Jk[n.key]||n.key,s="";return r.indexOf("code.")>-1&&(i=n.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),jI.forEach(l=>{if(l!==i){let h=e3[l];h(n)&&(s+=l+".")}}),s+=i,s===r)}static eventCallback(n,r,i){return s=>{e.matchEventFullKeyCode(s,n)&&i.runGuarded(()=>r(s))}}static _normalizeKey(n){return n==="esc"?"escape":n}static{this.\u0275fac=function(r){return new(r||e)(Le(Qn))}}static{this.\u0275prov=de({token:e,factory:e.\u0275fac})}}return e})();function $I(e,t){return TI(K({rootComponent:e},n3(t)))}function n3(e){return{appProviders:[...a3,...e?.providers??[]],platformProviders:s3}}function r3(){f0.makeCurrent()}function i3(){return new mi}function o3(){return pE(document),document}var s3=[{provide:aa,useValue:BI},{provide:Um,useValue:r3,multi:!0},{provide:Qn,useFactory:o3,deps:[]}];var a3=[{provide:Fd,useValue:"root"},{provide:mi,useFactory:i3,deps:[]},{provide:h0,useClass:Kk,multi:!0,deps:[Qn,qt,aa]},{provide:h0,useClass:t3,multi:!0,deps:[Qn]},VI,zI,HI,{provide:ea,useExisting:VI},{provide:rf,useClass:Gk,deps:[]},[]];var qI=(()=>{class e{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static{this.\u0275fac=function(r){return new(r||e)(Le(Qn))}}static{this.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var m0=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=de({token:e,factory:function(r){let i=null;return r?i=new(r||e):i=Le(c3),i},providedIn:"root"})}}return e})(),c3=(()=>{class e extends m0{constructor(n){super(),this._doc=n}sanitize(n,r){if(r==null)return null;switch(n){case co.NONE:return r;case co.HTML:return ca(r,"HTML")?Si(r):SE(this._doc,String(r)).toString();case co.STYLE:return ca(r,"Style")?Si(r):r;case co.SCRIPT:if(ca(r,"Script"))return Si(r);throw new ue(5200,!1);case co.URL:return ca(r,"URL")?Si(r):zm(String(r));case co.RESOURCE_URL:if(ca(r,"ResourceURL"))return Si(r);throw new ue(5201,!1);default:throw new ue(5202,!1)}}bypassSecurityTrustHtml(n){return mE(n)}bypassSecurityTrustStyle(n){return yE(n)}bypassSecurityTrustScript(n){return _E(n)}bypassSecurityTrustUrl(n){return vE(n)}bypassSecurityTrustResourceUrl(n){return wE(n)}static{this.\u0275fac=function(r){return new(r||e)(Le(Qn))}}static{this.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var Me="primary",ol=Symbol("RouteTitle"),C0=class{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n[0]:n}return null}getAll(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function ma(e){return new C0(e)}function l3(e,t,n){let r=n.path.split("/");if(r.length>e.length||n.pathMatch==="full"&&(t.hasChildren()||r.length<e.length))return null;let i={};for(let s=0;s<r.length;s++){let l=r[s],h=e[s];if(l[0]===":")i[l.substring(1)]=h;else if(l!==h.path)return null}return{consumed:e.slice(0,r.length),posParams:i}}function u3(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!Jr(e[n],t[n]))return!1;return!0}function Jr(e,t){let n=e?E0(e):void 0,r=t?E0(t):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!nb(e[i],t[i]))return!1;return!0}function E0(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}function nb(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;let n=[...e].sort(),r=[...t].sort();return n.every((i,s)=>r[s]===i)}else return e===t}function rb(e){return e.length>0?e[e.length-1]:null}function ho(e){return Hp(e)?e:Xo(e)?ot(Promise.resolve(e)):xe(e)}var d3={exact:ob,subset:sb},ib={exact:f3,subset:h3,ignored:()=>!0};function ZI(e,t,n){return d3[n.paths](e.root,t.root,n.matrixParams)&&ib[n.queryParams](e.queryParams,t.queryParams)&&!(n.fragment==="exact"&&e.fragment!==t.fragment)}function f3(e,t){return Jr(e,t)}function ob(e,t,n){if(!es(e.segments,t.segments)||!uf(e.segments,t.segments,n)||e.numberOfChildren!==t.numberOfChildren)return!1;for(let r in t.children)if(!e.children[r]||!ob(e.children[r],t.children[r],n))return!1;return!0}function h3(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>nb(e[n],t[n]))}function sb(e,t,n){return ab(e,t,t.segments,n)}function ab(e,t,n,r){if(e.segments.length>n.length){let i=e.segments.slice(0,n.length);return!(!es(i,n)||t.hasChildren()||!uf(i,n,r))}else if(e.segments.length===n.length){if(!es(e.segments,n)||!uf(e.segments,n,r))return!1;for(let i in t.children)if(!e.children[i]||!sb(e.children[i],t.children[i],r))return!1;return!0}else{let i=n.slice(0,e.segments.length),s=n.slice(e.segments.length);return!es(e.segments,i)||!uf(e.segments,i,r)||!e.children[Me]?!1:ab(e.children[Me],t,s,r)}}function uf(e,t,n){return t.every((r,i)=>ib[n](e[i].parameters,r.parameters))}var Pi=class{constructor(t=new lt([],{}),n={},r=null){this.root=t,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=ma(this.queryParams),this._queryParamMap}toString(){return m3.serialize(this)}},lt=class{constructor(t,n){this.segments=t,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return df(this)}},Jo=class{constructor(t,n){this.path=t,this.parameters=n}get parameterMap(){return this._parameterMap??=ma(this.parameters),this._parameterMap}toString(){return lb(this)}};function p3(e,t){return es(e,t)&&e.every((n,r)=>Jr(n.parameters,t[r].parameters))}function es(e,t){return e.length!==t.length?!1:e.every((n,r)=>n.path===t[r].path)}function g3(e,t){let n=[];return Object.entries(e.children).forEach(([r,i])=>{r===Me&&(n=n.concat(t(i,r)))}),Object.entries(e.children).forEach(([r,i])=>{r!==Me&&(n=n.concat(t(i,r)))}),n}var Y0=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=de({token:e,factory:()=>new Zc,providedIn:"root"})}}return e})(),Zc=class{parse(t){let n=new b0(t);return new Pi(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(t){let n=`/${zc(t.root,!0)}`,r=v3(t.queryParams),i=typeof t.fragment=="string"?`#${y3(t.fragment)}`:"";return`${n}${r}${i}`}},m3=new Zc;function df(e){return e.segments.map(t=>lb(t)).join("/")}function zc(e,t){if(!e.hasChildren())return df(e);if(t){let n=e.children[Me]?zc(e.children[Me],!1):"",r=[];return Object.entries(e.children).forEach(([i,s])=>{i!==Me&&r.push(`${i}:${zc(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=g3(e,(r,i)=>i===Me?[zc(e.children[Me],!1)]:[`${i}:${zc(r,!1)}`]);return Object.keys(e.children).length===1&&e.children[Me]!=null?`${df(e)}/${n[0]}`:`${df(e)}/(${n.join("//")})`}}function cb(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function cf(e){return cb(e).replace(/%3B/gi,";")}function y3(e){return encodeURI(e)}function I0(e){return cb(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ff(e){return decodeURIComponent(e)}function XI(e){return ff(e.replace(/\+/g,"%20"))}function lb(e){return`${I0(e.path)}${_3(e.parameters)}`}function _3(e){return Object.entries(e).map(([t,n])=>`;${I0(t)}=${I0(n)}`).join("")}function v3(e){let t=Object.entries(e).map(([n,r])=>Array.isArray(r)?r.map(i=>`${cf(n)}=${cf(i)}`).join("&"):`${cf(n)}=${cf(r)}`).filter(n=>n);return t.length?`?${t.join("&")}`:""}var w3=/^[^\/()?;#]+/;function y0(e){let t=e.match(w3);return t?t[0]:""}var C3=/^[^\/()?;=#]+/;function E3(e){let t=e.match(C3);return t?t[0]:""}var I3=/^[^=?&#]+/;function b3(e){let t=e.match(I3);return t?t[0]:""}var x3=/^[^&#]+/;function S3(e){let t=e.match(x3);return t?t[0]:""}var b0=class{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new lt([],{}):new lt([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(n).length>0)&&(r[Me]=new lt(t,n)),r}parseSegment(){let t=y0(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new ue(4009,!1);return this.capture(t),new Jo(ff(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let n=E3(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=y0(this.remaining);i&&(r=i,this.capture(r))}t[ff(n)]=ff(r)}parseQueryParam(t){let n=b3(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let l=S3(this.remaining);l&&(r=l,this.capture(r))}let i=XI(n),s=XI(r);if(t.hasOwnProperty(i)){let l=t[i];Array.isArray(l)||(l=[l],t[i]=l),l.push(s)}else t[i]=s}parseParens(t){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=y0(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new ue(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):t&&(s=Me);let l=this.parseChildren();n[s]=Object.keys(l).length===1?l[Me]:new lt([],l),this.consumeOptional("//")}return n}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new ue(4011,!1)}};function ub(e){return e.segments.length>0?new lt([],{[Me]:e}):e}function db(e){let t={};for(let[r,i]of Object.entries(e.children)){let s=db(i);if(r===Me&&s.segments.length===0&&s.hasChildren())for(let[l,h]of Object.entries(s.children))t[l]=h;else(s.segments.length>0||s.hasChildren())&&(t[r]=s)}let n=new lt(e.segments,t);return A3(n)}function A3(e){if(e.numberOfChildren===1&&e.children[Me]){let t=e.children[Me];return new lt(e.segments.concat(t.segments),t.children)}return e}function Xc(e){return e instanceof Pi}function D3(e,t,n=null,r=null){let i=fb(e);return hb(i,t,n,r)}function fb(e){let t;function n(s){let l={};for(let g of s.children){let m=n(g);l[g.outlet]=m}let h=new lt(s.url,l);return s===e&&(t=h),h}let r=n(e.root),i=ub(r);return t??i}function hb(e,t,n,r){let i=e;for(;i.parent;)i=i.parent;if(t.length===0)return _0(i,i,i,n,r);let s=T3(t);if(s.toRoot())return _0(i,i,new lt([],{}),n,r);let l=M3(s,i,e),h=l.processChildren?$c(l.segmentGroup,l.index,s.commands):gb(l.segmentGroup,l.index,s.commands);return _0(i,l.segmentGroup,h,n,r)}function hf(e){return typeof e=="object"&&e!=null&&!e.outlets&&!e.segmentPath}function Qc(e){return typeof e=="object"&&e!=null&&e.outlets}function _0(e,t,n,r,i){let s={};r&&Object.entries(r).forEach(([g,m])=>{s[g]=Array.isArray(m)?m.map(C=>`${C}`):`${m}`});let l;e===t?l=n:l=pb(e,t,n);let h=ub(db(l));return new Pi(h,s,i)}function pb(e,t,n){let r={};return Object.entries(e.children).forEach(([i,s])=>{s===t?r[i]=n:r[i]=pb(s,t,n)}),new lt(e.segments,r)}var pf=class{constructor(t,n,r){if(this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=r,t&&r.length>0&&hf(r[0]))throw new ue(4003,!1);let i=r.find(Qc);if(i&&i!==rb(r))throw new ue(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function T3(e){if(typeof e[0]=="string"&&e.length===1&&e[0]==="/")return new pf(!0,0,e);let t=0,n=!1,r=e.reduce((i,s,l)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let h={};return Object.entries(s.outlets).forEach(([g,m])=>{h[g]=typeof m=="string"?m.split("/"):m}),[...i,{outlets:h}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:l===0?(s.split("/").forEach((h,g)=>{g==0&&h==="."||(g==0&&h===""?n=!0:h===".."?t++:h!=""&&i.push(h))}),i):[...i,s]},[]);return new pf(n,t,r)}var ha=class{constructor(t,n,r){this.segmentGroup=t,this.processChildren=n,this.index=r}};function M3(e,t,n){if(e.isAbsolute)return new ha(t,!0,0);if(!n)return new ha(t,!1,NaN);if(n.parent===null)return new ha(n,!0,0);let r=hf(e.commands[0])?0:1,i=n.segments.length-1+r;return N3(n,i,e.numberOfDoubleDots)}function N3(e,t,n){let r=e,i=t,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new ue(4005,!1);i=r.segments.length}return new ha(r,!1,i-s)}function R3(e){return Qc(e[0])?e[0].outlets:{[Me]:e}}function gb(e,t,n){if(e??=new lt([],{}),e.segments.length===0&&e.hasChildren())return $c(e,t,n);let r=O3(e,t,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){let s=new lt(e.segments.slice(0,r.pathIndex),{});return s.children[Me]=new lt(e.segments.slice(r.pathIndex),e.children),$c(s,0,i)}else return r.match&&i.length===0?new lt(e.segments,{}):r.match&&!e.hasChildren()?x0(e,t,n):r.match?$c(e,0,i):x0(e,t,n)}function $c(e,t,n){if(n.length===0)return new lt(e.segments,{});{let r=R3(n),i={};if(Object.keys(r).some(s=>s!==Me)&&e.children[Me]&&e.numberOfChildren===1&&e.children[Me].segments.length===0){let s=$c(e.children[Me],t,n);return new lt(e.segments,s.children)}return Object.entries(r).forEach(([s,l])=>{typeof l=="string"&&(l=[l]),l!==null&&(i[s]=gb(e.children[s],t,l))}),Object.entries(e.children).forEach(([s,l])=>{r[s]===void 0&&(i[s]=l)}),new lt(e.segments,i)}}function O3(e,t,n){let r=0,i=t,s={match:!1,pathIndex:0,commandIndex:0};for(;i<e.segments.length;){if(r>=n.length)return s;let l=e.segments[i],h=n[r];if(Qc(h))break;let g=`${h}`,m=r<n.length-1?n[r+1]:null;if(i>0&&g===void 0)break;if(g&&m&&typeof m=="object"&&m.outlets===void 0){if(!KI(g,m,l))return s;r+=2}else{if(!KI(g,{},l))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function x0(e,t,n){let r=e.segments.slice(0,t),i=0;for(;i<n.length;){let s=n[i];if(Qc(s)){let g=P3(s.outlets);return new lt(r,g)}if(i===0&&hf(n[0])){let g=e.segments[t];r.push(new Jo(g.path,QI(n[0]))),i++;continue}let l=Qc(s)?s.outlets[Me]:`${s}`,h=i<n.length-1?n[i+1]:null;l&&h&&hf(h)?(r.push(new Jo(l,QI(h))),i+=2):(r.push(new Jo(l,{})),i++)}return new lt(r,{})}function P3(e){let t={};return Object.entries(e).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(t[n]=x0(new lt([],{}),0,r))}),t}function QI(e){let t={};return Object.entries(e).forEach(([n,r])=>t[n]=`${r}`),t}function KI(e,t,n){return e==n.path&&Jr(t,n.parameters)}var qc="imperative",hn=function(e){return e[e.NavigationStart=0]="NavigationStart",e[e.NavigationEnd=1]="NavigationEnd",e[e.NavigationCancel=2]="NavigationCancel",e[e.NavigationError=3]="NavigationError",e[e.RoutesRecognized=4]="RoutesRecognized",e[e.ResolveStart=5]="ResolveStart",e[e.ResolveEnd=6]="ResolveEnd",e[e.GuardsCheckStart=7]="GuardsCheckStart",e[e.GuardsCheckEnd=8]="GuardsCheckEnd",e[e.RouteConfigLoadStart=9]="RouteConfigLoadStart",e[e.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",e[e.ChildActivationStart=11]="ChildActivationStart",e[e.ChildActivationEnd=12]="ChildActivationEnd",e[e.ActivationStart=13]="ActivationStart",e[e.ActivationEnd=14]="ActivationEnd",e[e.Scroll=15]="Scroll",e[e.NavigationSkipped=16]="NavigationSkipped",e}(hn||{}),dr=class{constructor(t,n){this.id=t,this.url=n}},Kc=class extends dr{constructor(t,n,r="imperative",i=null){super(t,n),this.type=hn.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},ts=class extends dr{constructor(t,n,r){super(t,n),this.urlAfterRedirects=r,this.type=hn.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Jn=function(e){return e[e.Redirect=0]="Redirect",e[e.SupersededByNewNavigation=1]="SupersededByNewNavigation",e[e.NoDataFromResolver=2]="NoDataFromResolver",e[e.GuardRejected=3]="GuardRejected",e}(Jn||{}),S0=function(e){return e[e.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",e[e.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",e}(S0||{}),Oi=class extends dr{constructor(t,n,r,i){super(t,n),this.reason=r,this.code=i,this.type=hn.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},ns=class extends dr{constructor(t,n,r,i){super(t,n),this.reason=r,this.code=i,this.type=hn.NavigationSkipped}},Jc=class extends dr{constructor(t,n,r,i){super(t,n),this.error=r,this.target=i,this.type=hn.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},gf=class extends dr{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=hn.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},A0=class extends dr{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=hn.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},D0=class extends dr{constructor(t,n,r,i,s){super(t,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=hn.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},T0=class extends dr{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=hn.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},M0=class extends dr{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=hn.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},N0=class{constructor(t){this.route=t,this.type=hn.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},R0=class{constructor(t){this.route=t,this.type=hn.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},O0=class{constructor(t){this.snapshot=t,this.type=hn.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},P0=class{constructor(t){this.snapshot=t,this.type=hn.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},k0=class{constructor(t){this.snapshot=t,this.type=hn.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},L0=class{constructor(t){this.snapshot=t,this.type=hn.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var el=class{},ya=class{constructor(t,n){this.url=t,this.navigationBehaviorOptions=n}};function k3(e,t){return e.providers&&!e._injector&&(e._injector=t0(e.providers,t,`Route: ${e.path}`)),e._injector??t}function kr(e){return e.outlet||Me}function L3(e,t){let n=e.filter(r=>kr(r)===t);return n.push(...e.filter(r=>kr(r)!==t)),n}function sl(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let t=e.parent;t;t=t.parent){let n=t.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var F0=class{get injector(){return sl(this.route?.snapshot)??this.rootInjector}set injector(t){}constructor(t){this.rootInjector=t,this.outlet=null,this.route=null,this.children=new Ef(this.rootInjector),this.attachRef=null}},Ef=(()=>{class e{constructor(n){this.rootInjector=n,this.contexts=new Map}onChildOutletCreated(n,r){let i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new F0(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static{this.\u0275fac=function(r){return new(r||e)(Le(or))}}static{this.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),mf=class{constructor(t){this._root=t}get root(){return this._root.value}parent(t){let n=this.pathFromRoot(t);return n.length>1?n[n.length-2]:null}children(t){let n=B0(t,this._root);return n?n.children.map(r=>r.value):[]}firstChild(t){let n=B0(t,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(t){let n=V0(t,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==t)}pathFromRoot(t){return V0(t,this._root).map(n=>n.value)}};function B0(e,t){if(e===t.value)return t;for(let n of t.children){let r=B0(e,n);if(r)return r}return null}function V0(e,t){if(e===t.value)return[t];for(let n of t.children){let r=V0(e,n);if(r.length)return r.unshift(t),r}return[]}var Kn=class{constructor(t,n){this.value=t,this.children=n}toString(){return`TreeNode(${this.value})`}};function fa(e){let t={};return e&&e.children.forEach(n=>t[n.value.outlet]=n),t}var yf=class extends mf{constructor(t,n){super(t),this.snapshot=n,Z0(this,t)}toString(){return this.snapshot.toString()}};function mb(e){let t=F3(e),n=new un([new Jo("",{})]),r=new un({}),i=new un({}),s=new un({}),l=new un(""),h=new fo(n,r,s,l,i,Me,e,t.root);return h.snapshot=t.root,new yf(new Kn(h,[]),t)}function F3(e){let t={},n={},r={},i="",s=new pa([],t,r,i,n,Me,e,null,{});return new vf("",new Kn(s,[]))}var fo=class{constructor(t,n,r,i,s,l,h,g){this.urlSubject=t,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=l,this.component=h,this._futureSnapshot=g,this.title=this.dataSubject?.pipe(Oe(m=>m[ol]))??xe(void 0),this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Oe(t=>ma(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Oe(t=>ma(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function _f(e,t,n="emptyOnly"){let r,{routeConfig:i}=e;return t!==null&&(n==="always"||i?.path===""||!t.component&&!t.routeConfig?.loadComponent)?r={params:K(K({},t.params),e.params),data:K(K({},t.data),e.data),resolve:K(K(K(K({},e.data),t.data),i?.data),e._resolvedData)}:r={params:K({},e.params),data:K({},e.data),resolve:K(K({},e.data),e._resolvedData??{})},i&&_b(i)&&(r.resolve[ol]=i.title),r}var pa=class{get title(){return this.data?.[ol]}constructor(t,n,r,i,s,l,h,g,m){this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=l,this.component=h,this.routeConfig=g,this._resolve=m}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=ma(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=ma(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${n}')`}},vf=class extends mf{constructor(t,n){super(n),this.url=t,Z0(this,n)}toString(){return yb(this._root)}};function Z0(e,t){t.value._routerState=e,t.children.forEach(n=>Z0(e,n))}function yb(e){let t=e.children.length>0?` { ${e.children.map(yb).join(", ")} } `:"";return`${e.value}${t}`}function v0(e){if(e.snapshot){let t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,Jr(t.queryParams,n.queryParams)||e.queryParamsSubject.next(n.queryParams),t.fragment!==n.fragment&&e.fragmentSubject.next(n.fragment),Jr(t.params,n.params)||e.paramsSubject.next(n.params),u3(t.url,n.url)||e.urlSubject.next(n.url),Jr(t.data,n.data)||e.dataSubject.next(n.data)}else e.snapshot=e._futureSnapshot,e.dataSubject.next(e._futureSnapshot.data)}function U0(e,t){let n=Jr(e.params,t.params)&&p3(e.url,t.url),r=!e.parent!=!t.parent;return n&&!r&&(!e.parent||U0(e.parent,t.parent))}function _b(e){return typeof e.title=="string"||e.title===null}var X0=(()=>{class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=Me,this.activateEvents=new At,this.deactivateEvents=new At,this.attachEvents=new At,this.detachEvents=new At,this.parentContexts=J(Ef),this.location=J(la),this.changeDetector=J(Mi),this.inputBinder=J(Q0,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new ue(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new ue(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new ue(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new ue(4013,!1);this._activatedRoute=n;let i=this.location,l=n.snapshot.component,h=this.parentContexts.getOrCreateContext(this.name).children,g=new j0(n,h,i.injector);this.activated=i.createComponent(l,{index:i.length,injector:g,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275dir=Vn({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[bi]})}}return e})(),j0=class e{__ngOutletInjector(t){return new e(this.route,this.childContexts,t)}constructor(t,n,r){this.route=t,this.childContexts=n,this.parent=r}get(t,n){return t===fo?this.route:t===Ef?this.childContexts:this.parent.get(t,n)}},Q0=new Ie("");function B3(e,t,n){let r=tl(e,t._root,n?n._root:void 0);return new yf(r,t)}function tl(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=t.value;let i=V3(e,t,n);return new Kn(r,i)}else{if(e.shouldAttach(t.value)){let s=e.retrieve(t.value);if(s!==null){let l=s.route;return l.value._futureSnapshot=t.value,l.children=t.children.map(h=>tl(e,h)),l}}let r=U3(t.value),i=t.children.map(s=>tl(e,s));return new Kn(r,i)}}function V3(e,t,n){return t.children.map(r=>{for(let i of n.children)if(e.shouldReuseRoute(r.value,i.value.snapshot))return tl(e,r,i);return tl(e,r)})}function U3(e){return new fo(new un(e.url),new un(e.params),new un(e.queryParams),new un(e.fragment),new un(e.data),e.outlet,e.component,e)}var nl=class{constructor(t,n){this.redirectTo=t,this.navigationBehaviorOptions=n}},vb="ngNavigationCancelingError";function wf(e,t){let{redirectTo:n,navigationBehaviorOptions:r}=Xc(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,i=wb(!1,Jn.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function wb(e,t){let n=new Error(`NavigationCancelingError: ${e||""}`);return n[vb]=!0,n.cancellationCode=t,n}function j3(e){return Cb(e)&&Xc(e.url)}function Cb(e){return!!e&&e[vb]}var H3=(e,t,n,r)=>Oe(i=>(new H0(t,i.targetRouterState,i.currentRouterState,n,r).activate(e),i)),H0=class{constructor(t,n,r,i,s){this.routeReuseStrategy=t,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(t){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,t),v0(this.futureState.root),this.activateChildRoutes(n,r,t)}deactivateChildRoutes(t,n,r){let i=fa(n);t.children.forEach(s=>{let l=s.value.outlet;this.deactivateRoutes(s,i[l],r),delete i[l]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(t,n,r){let i=t.value,s=n?n.value:null;if(i===s)if(i.component){let l=r.getContext(i.outlet);l&&this.deactivateChildRoutes(t,n,l.children)}else this.deactivateChildRoutes(t,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(t,n){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,n):this.deactivateRouteAndOutlet(t,n)}detachAndStoreRouteSubtree(t,n){let r=n.getContext(t.value.outlet),i=r&&t.value.component?r.children:n,s=fa(t);for(let l of Object.values(s))this.deactivateRouteAndItsChildren(l,i);if(r&&r.outlet){let l=r.outlet.detach(),h=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:l,route:t,contexts:h})}}deactivateRouteAndOutlet(t,n){let r=n.getContext(t.value.outlet),i=r&&t.value.component?r.children:n,s=fa(t);for(let l of Object.values(s))this.deactivateRouteAndItsChildren(l,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(t,n,r){let i=fa(n);t.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new L0(s.value.snapshot))}),t.children.length&&this.forwardEvent(new P0(t.value.snapshot))}activateRoutes(t,n,r){let i=t.value,s=n?n.value:null;if(v0(i),i===s)if(i.component){let l=r.getOrCreateContext(i.outlet);this.activateChildRoutes(t,n,l.children)}else this.activateChildRoutes(t,n,r);else if(i.component){let l=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let h=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),l.children.onOutletReAttached(h.contexts),l.attachRef=h.componentRef,l.route=h.route.value,l.outlet&&l.outlet.attach(h.componentRef,h.route.value),v0(h.route.value),this.activateChildRoutes(t,null,l.children)}else l.attachRef=null,l.route=i,l.outlet&&l.outlet.activateWith(i,l.injector),this.activateChildRoutes(t,null,l.children)}else this.activateChildRoutes(t,null,r)}},Cf=class{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},ga=class{constructor(t,n){this.component=t,this.route=n}};function z3(e,t,n){let r=e._root,i=t?t._root:null;return Wc(r,i,n,[r.value])}function W3(e){let t=e.routeConfig?e.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:e,guards:t}}function va(e,t){let n=Symbol(),r=t.get(e,n);return r===n?typeof e=="function"&&!iC(e)?e:t.get(e):r}function Wc(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=fa(t);return e.children.forEach(l=>{G3(l,s[l.value.outlet],n,r.concat([l.value]),i),delete s[l.value.outlet]}),Object.entries(s).forEach(([l,h])=>Yc(h,n.getContext(l),i)),i}function G3(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=e.value,l=t?t.value:null,h=n?n.getContext(e.value.outlet):null;if(l&&s.routeConfig===l.routeConfig){let g=$3(l,s,s.routeConfig.runGuardsAndResolvers);g?i.canActivateChecks.push(new Cf(r)):(s.data=l.data,s._resolvedData=l._resolvedData),s.component?Wc(e,t,h?h.children:null,r,i):Wc(e,t,n,r,i),g&&h&&h.outlet&&h.outlet.isActivated&&i.canDeactivateChecks.push(new ga(h.outlet.component,l))}else l&&Yc(t,h,i),i.canActivateChecks.push(new Cf(r)),s.component?Wc(e,null,h?h.children:null,r,i):Wc(e,null,n,r,i);return i}function $3(e,t,n){if(typeof n=="function")return n(e,t);switch(n){case"pathParamsChange":return!es(e.url,t.url);case"pathParamsOrQueryParamsChange":return!es(e.url,t.url)||!Jr(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!U0(e,t)||!Jr(e.queryParams,t.queryParams);case"paramsChange":default:return!U0(e,t)}}function Yc(e,t,n){let r=fa(e),i=e.value;Object.entries(r).forEach(([s,l])=>{i.component?t?Yc(l,t.children.getContext(s),n):Yc(l,null,n):Yc(l,t,n)}),i.component?t&&t.outlet&&t.outlet.isActivated?n.canDeactivateChecks.push(new ga(t.outlet.component,i)):n.canDeactivateChecks.push(new ga(null,i)):n.canDeactivateChecks.push(new ga(null,i))}function al(e){return typeof e=="function"}function q3(e){return typeof e=="boolean"}function Y3(e){return e&&al(e.canLoad)}function Z3(e){return e&&al(e.canActivate)}function X3(e){return e&&al(e.canActivateChild)}function Q3(e){return e&&al(e.canDeactivate)}function K3(e){return e&&al(e.canMatch)}function Eb(e){return e instanceof fi||e?.name==="EmptyError"}var lf=Symbol("INITIAL_VALUE");function _a(){return Xn(e=>Ju(e.map(t=>t.pipe(hi(1),Zp(lf)))).pipe(Oe(t=>{for(let n of t)if(n!==!0){if(n===lf)return lf;if(n===!1||J3(n))return n}return!0}),Dr(t=>t!==lf),hi(1)))}function J3(e){return Xc(e)||e instanceof nl}function eL(e,t){return Gt(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:l}}=n;return l.length===0&&s.length===0?xe(Ve(K({},n),{guardsResult:!0})):tL(l,r,i,e).pipe(Gt(h=>h&&q3(h)?nL(r,s,e,t):xe(h)),Oe(h=>Ve(K({},n),{guardsResult:h})))})}function tL(e,t,n,r){return ot(e).pipe(Gt(i=>aL(i.component,i.route,n,t,r)),$r(i=>i!==!0,!0))}function nL(e,t,n,r){return ot(t).pipe(Bs(i=>Fs(iL(i.route.parent,r),rL(i.route,r),sL(e,i.path,n),oL(e,i.route,n))),$r(i=>i!==!0,!0))}function rL(e,t){return e!==null&&t&&t(new k0(e)),xe(!0)}function iL(e,t){return e!==null&&t&&t(new O0(e)),xe(!0)}function oL(e,t,n){let r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||r.length===0)return xe(!0);let i=r.map(s=>ed(()=>{let l=sl(t)??n,h=va(s,l),g=Z3(h)?h.canActivate(t,e):Ci(l,()=>h(t,e));return ho(g).pipe($r())}));return xe(i).pipe(_a())}function sL(e,t,n){let r=t[t.length-1],s=t.slice(0,t.length-1).reverse().map(l=>W3(l)).filter(l=>l!==null).map(l=>ed(()=>{let h=l.guards.map(g=>{let m=sl(l.node)??n,C=va(g,m),E=X3(C)?C.canActivateChild(r,e):Ci(m,()=>C(r,e));return ho(E).pipe($r())});return xe(h).pipe(_a())}));return xe(s).pipe(_a())}function aL(e,t,n,r,i){let s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!s||s.length===0)return xe(!0);let l=s.map(h=>{let g=sl(t)??i,m=va(h,g),C=Q3(m)?m.canDeactivate(e,t,n,r):Ci(g,()=>m(e,t,n,r));return ho(C).pipe($r())});return xe(l).pipe(_a())}function cL(e,t,n,r){let i=t.canLoad;if(i===void 0||i.length===0)return xe(!0);let s=i.map(l=>{let h=va(l,e),g=Y3(h)?h.canLoad(t,n):Ci(e,()=>h(t,n));return ho(g)});return xe(s).pipe(_a(),Ib(r))}function Ib(e){return Lp($t(t=>{if(typeof t!="boolean")throw wf(e,t)}),Oe(t=>t===!0))}function lL(e,t,n,r){let i=t.canMatch;if(!i||i.length===0)return xe(!0);let s=i.map(l=>{let h=va(l,e),g=K3(h)?h.canMatch(t,n):Ci(e,()=>h(t,n));return ho(g)});return xe(s).pipe(_a(),Ib(r))}var rl=class{constructor(t){this.segmentGroup=t||null}},il=class extends Error{constructor(t){super(),this.urlTree=t}};function da(e){return Ls(new rl(e))}function uL(e){return Ls(new ue(4e3,!1))}function dL(e){return Ls(wb(!1,Jn.GuardRejected))}var z0=class{constructor(t,n){this.urlSerializer=t,this.urlTree=n}lineralizeSegments(t,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return xe(r);if(i.numberOfChildren>1||!i.children[Me])return uL(`${t.redirectTo}`);i=i.children[Me]}}applyRedirectCommands(t,n,r,i,s){if(typeof n!="string"){let h=n,{queryParams:g,fragment:m,routeConfig:C,url:E,outlet:x,params:D,data:N,title:U}=i,G=Ci(s,()=>h({params:D,data:N,queryParams:g,fragment:m,routeConfig:C,url:E,outlet:x,title:U}));if(G instanceof Pi)throw new il(G);n=G}let l=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),t,r);if(n[0]==="/")throw new il(l);return l}applyRedirectCreateUrlTree(t,n,r,i){let s=this.createSegmentGroup(t,n.root,r,i);return new Pi(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(t,n){let r={};return Object.entries(t).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let h=s.substring(1);r[i]=n[h]}else r[i]=s}),r}createSegmentGroup(t,n,r,i){let s=this.createSegments(t,n.segments,r,i),l={};return Object.entries(n.children).forEach(([h,g])=>{l[h]=this.createSegmentGroup(t,g,r,i)}),new lt(s,l)}createSegments(t,n,r,i){return n.map(s=>s.path[0]===":"?this.findPosParam(t,s,i):this.findOrReturn(s,r))}findPosParam(t,n,r){let i=r[n.path.substring(1)];if(!i)throw new ue(4001,!1);return i}findOrReturn(t,n){let r=0;for(let i of n){if(i.path===t.path)return n.splice(r),i;r++}return t}},W0={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function fL(e,t,n,r,i){let s=bb(e,t,n);return s.matched?(r=k3(t,r),lL(r,t,n,i).pipe(Oe(l=>l===!0?s:K({},W0)))):xe(s)}function bb(e,t,n){if(t.path==="**")return hL(n);if(t.path==="")return t.pathMatch==="full"&&(e.hasChildren()||n.length>0)?K({},W0):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(t.matcher||l3)(n,e,t);if(!i)return K({},W0);let s={};Object.entries(i.posParams??{}).forEach(([h,g])=>{s[h]=g.path});let l=i.consumed.length>0?K(K({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:l,positionalParamSegments:i.posParams??{}}}function hL(e){return{matched:!0,parameters:e.length>0?rb(e).parameters:{},consumedSegments:e,remainingSegments:[],positionalParamSegments:{}}}function JI(e,t,n,r){return n.length>0&&mL(e,n,r)?{segmentGroup:new lt(t,gL(r,new lt(n,e.children))),slicedSegments:[]}:n.length===0&&yL(e,n,r)?{segmentGroup:new lt(e.segments,pL(e,n,r,e.children)),slicedSegments:n}:{segmentGroup:new lt(e.segments,e.children),slicedSegments:n}}function pL(e,t,n,r){let i={};for(let s of n)if(If(e,t,s)&&!r[kr(s)]){let l=new lt([],{});i[kr(s)]=l}return K(K({},r),i)}function gL(e,t){let n={};n[Me]=t;for(let r of e)if(r.path===""&&kr(r)!==Me){let i=new lt([],{});n[kr(r)]=i}return n}function mL(e,t,n){return n.some(r=>If(e,t,r)&&kr(r)!==Me)}function yL(e,t,n){return n.some(r=>If(e,t,r))}function If(e,t,n){return(e.hasChildren()||t.length>0)&&n.pathMatch==="full"?!1:n.path===""}function _L(e,t,n){return t.length===0&&!e.children[n]}var G0=class{};function vL(e,t,n,r,i,s,l="emptyOnly"){return new $0(e,t,n,r,i,l,s).recognize()}var wL=31,$0=class{constructor(t,n,r,i,s,l,h){this.injector=t,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=l,this.urlSerializer=h,this.applyRedirects=new z0(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(t){return new ue(4002,`'${t.segmentGroup}'`)}recognize(){let t=JI(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(Oe(({children:n,rootSnapshot:r})=>{let i=new Kn(r,n),s=new vf("",i),l=D3(r,[],this.urlTree.queryParams,this.urlTree.fragment);return l.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(l),{state:s,tree:l}}))}match(t){let n=new pa([],Object.freeze({}),Object.freeze(K({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),Me,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,t,Me,n).pipe(Oe(r=>({children:r,rootSnapshot:n})),Ln(r=>{if(r instanceof il)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof rl?this.noMatchError(r):r}))}processSegmentGroup(t,n,r,i,s){return r.segments.length===0&&r.hasChildren()?this.processChildren(t,n,r,s):this.processSegment(t,n,r,r.segments,i,!0,s).pipe(Oe(l=>l instanceof Kn?[l]:[]))}processChildren(t,n,r,i){let s=[];for(let l of Object.keys(r.children))l==="primary"?s.unshift(l):s.push(l);return ot(s).pipe(Bs(l=>{let h=r.children[l],g=L3(n,l);return this.processSegmentGroup(t,g,h,l,i)}),Yp((l,h)=>(l.push(...h),l)),Ji(null),qp(),Gt(l=>{if(l===null)return da(r);let h=xb(l);return CL(h),xe(h)}))}processSegment(t,n,r,i,s,l,h){return ot(n).pipe(Bs(g=>this.processSegmentAgainstRoute(g._injector??t,n,g,r,i,s,l,h).pipe(Ln(m=>{if(m instanceof rl)return xe(null);throw m}))),$r(g=>!!g),Ln(g=>{if(Eb(g))return _L(r,i,s)?xe(new G0):da(r);throw g}))}processSegmentAgainstRoute(t,n,r,i,s,l,h,g){return kr(r)!==l&&(l===Me||!If(i,s,r))?da(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(t,i,r,s,l,g):this.allowRedirects&&h?this.expandSegmentAgainstRouteUsingRedirect(t,i,n,r,s,l,g):da(i)}expandSegmentAgainstRouteUsingRedirect(t,n,r,i,s,l,h){let{matched:g,parameters:m,consumedSegments:C,positionalParamSegments:E,remainingSegments:x}=bb(n,i,s);if(!g)return da(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>wL&&(this.allowRedirects=!1));let D=new pa(s,m,Object.freeze(K({},this.urlTree.queryParams)),this.urlTree.fragment,eb(i),kr(i),i.component??i._loadedComponent??null,i,tb(i)),N=_f(D,h,this.paramsInheritanceStrategy);D.params=Object.freeze(N.params),D.data=Object.freeze(N.data);let U=this.applyRedirects.applyRedirectCommands(C,i.redirectTo,E,D,t);return this.applyRedirects.lineralizeSegments(i,U).pipe(Gt(G=>this.processSegment(t,r,n,G.concat(x),l,!1,h)))}matchSegmentAgainstRoute(t,n,r,i,s,l){let h=fL(n,r,i,t,this.urlSerializer);return r.path==="**"&&(n.children={}),h.pipe(Xn(g=>g.matched?(t=r._injector??t,this.getChildConfig(t,r,i).pipe(Xn(({routes:m})=>{let C=r._loadedInjector??t,{parameters:E,consumedSegments:x,remainingSegments:D}=g,N=new pa(x,E,Object.freeze(K({},this.urlTree.queryParams)),this.urlTree.fragment,eb(r),kr(r),r.component??r._loadedComponent??null,r,tb(r)),U=_f(N,l,this.paramsInheritanceStrategy);N.params=Object.freeze(U.params),N.data=Object.freeze(U.data);let{segmentGroup:G,slicedSegments:z}=JI(n,x,D,m);if(z.length===0&&G.hasChildren())return this.processChildren(C,m,G,N).pipe(Oe(He=>new Kn(N,He)));if(m.length===0&&z.length===0)return xe(new Kn(N,[]));let ne=kr(r)===s;return this.processSegment(C,m,G,z,ne?Me:s,!0,N).pipe(Oe(He=>new Kn(N,He instanceof Kn?[He]:[])))}))):da(n)))}getChildConfig(t,n,r){return n.children?xe({routes:n.children,injector:t}):n.loadChildren?n._loadedRoutes!==void 0?xe({routes:n._loadedRoutes,injector:n._loadedInjector}):cL(t,n,r,this.urlSerializer).pipe(Gt(i=>i?this.configLoader.loadChildren(t,n).pipe($t(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):dL(n))):xe({routes:[],injector:t})}};function CL(e){e.sort((t,n)=>t.value.outlet===Me?-1:n.value.outlet===Me?1:t.value.outlet.localeCompare(n.value.outlet))}function EL(e){let t=e.value.routeConfig;return t&&t.path===""}function xb(e){let t=[],n=new Set;for(let r of e){if(!EL(r)){t.push(r);continue}let i=t.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):t.push(r)}for(let r of n){let i=xb(r.children);t.push(new Kn(r.value,i))}return t.filter(r=>!n.has(r))}function eb(e){return e.data||{}}function tb(e){return e.resolve||{}}function IL(e,t,n,r,i,s){return Gt(l=>vL(e,t,n,r,l.extractedUrl,i,s).pipe(Oe(({state:h,tree:g})=>Ve(K({},l),{targetSnapshot:h,urlAfterRedirects:g}))))}function bL(e,t){return Gt(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return xe(n);let s=new Set(i.map(g=>g.route)),l=new Set;for(let g of s)if(!l.has(g))for(let m of Sb(g))l.add(m);let h=0;return ot(l).pipe(Bs(g=>s.has(g)?xL(g,r,e,t):(g.data=_f(g,g.parent,e).resolve,xe(void 0))),$t(()=>h++),Vs(1),Gt(g=>h===l.size?xe(n):Zn))})}function Sb(e){let t=e.children.map(n=>Sb(n)).flat();return[e,...t]}function xL(e,t,n,r){let i=e.routeConfig,s=e._resolve;return i?.title!==void 0&&!_b(i)&&(s[ol]=i.title),SL(s,e,t,r).pipe(Oe(l=>(e._resolvedData=l,e.data=_f(e,e.parent,n).resolve,null)))}function SL(e,t,n,r){let i=E0(e);if(i.length===0)return xe({});let s={};return ot(i).pipe(Gt(l=>AL(e[l],t,n,r).pipe($r(),$t(h=>{if(h instanceof nl)throw wf(new Zc,h);s[l]=h}))),Vs(1),$p(s),Ln(l=>Eb(l)?Zn:Ls(l)))}function AL(e,t,n,r){let i=sl(t)??r,s=va(e,i),l=s.resolve?s.resolve(t,n):Ci(i,()=>s(t,n));return ho(l)}function w0(e){return Xn(t=>{let n=e(t);return n?ot(n).pipe(Oe(()=>t)):xe(t)})}var Ab=(()=>{class e{buildTitle(n){let r,i=n.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===Me);return r}getResolvedTitleForRoute(n){return n.data[ol]}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=de({token:e,factory:()=>J(DL),providedIn:"root"})}}return e})(),DL=(()=>{class e extends Ab{constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||e)(Le(qI))}}static{this.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),K0=new Ie("",{providedIn:"root",factory:()=>({})}),TL=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275cmp=pe({type:e,selectors:[["ng-component"]],standalone:!0,features:[ve],decls:1,vars:0,template:function(r,i){r&1&&_e(0,"router-outlet")},dependencies:[X0],encapsulation:2})}}return e})();function J0(e){let t=e.children&&e.children.map(J0),n=t?Ve(K({},e),{children:t}):K({},e);return!n.component&&!n.loadComponent&&(t||n.loadChildren)&&n.outlet&&n.outlet!==Me&&(n.component=TL),n}var e1=new Ie(""),ML=(()=>{class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=J(i0)}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return xe(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);let r=ho(n.loadComponent()).pipe(Oe(Db),$t(s=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=s}),hc(()=>{this.componentLoaders.delete(n)})),i=new Ps(r,()=>new ln).pipe(Os());return this.componentLoaders.set(n,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return xe({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let s=NL(r,this.compiler,n,this.onLoadEndListener).pipe(hc(()=>{this.childrenLoaders.delete(r)})),l=new Ps(s,()=>new ln).pipe(Os());return this.childrenLoaders.set(r,l),l}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function NL(e,t,n,r){return ho(e.loadChildren()).pipe(Oe(Db),Gt(i=>i instanceof Dc||Array.isArray(i)?xe(i):ot(t.compileModuleAsync(i))),Oe(i=>{r&&r(e);let s,l,h=!1;return Array.isArray(i)?(l=i,h=!0):(s=i.create(n).injector,l=s.get(e1,[],{optional:!0,self:!0}).flat()),{routes:l.map(J0),injector:s}}))}function RL(e){return e&&typeof e=="object"&&"default"in e}function Db(e){return RL(e)?e.default:e}var t1=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=de({token:e,factory:()=>J(OL),providedIn:"root"})}}return e})(),OL=(()=>{class e{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),PL=new Ie("");var kL=new Ie(""),LL=(()=>{class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new ln,this.transitionAbortSubject=new ln,this.configLoader=J(ML),this.environmentInjector=J(or),this.urlSerializer=J(Y0),this.rootContexts=J(Ef),this.location=J(Vc),this.inputBindingEnabled=J(Q0,{optional:!0})!==null,this.titleStrategy=J(Ab),this.options=J(K0,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=J(t1),this.createViewTransition=J(PL,{optional:!0}),this.navigationErrorHandler=J(kL,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>xe(void 0),this.rootComponentType=null;let n=i=>this.events.next(new N0(i)),r=i=>this.events.next(new R0(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;this.transitions?.next(Ve(K(K({},this.transitions.value),n),{id:r}))}setupNavigations(n,r,i){return this.transitions=new un({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:qc,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Dr(s=>s.id!==0),Oe(s=>Ve(K({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),Xn(s=>{let l=!1,h=!1;return xe(s).pipe(Xn(g=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",Jn.SupersededByNewNavigation),Zn;this.currentTransition=s,this.currentNavigation={id:g.id,initialUrl:g.rawUrl,extractedUrl:g.extractedUrl,targetBrowserUrl:typeof g.extras.browserUrl=="string"?this.urlSerializer.parse(g.extras.browserUrl):g.extras.browserUrl,trigger:g.source,extras:g.extras,previousNavigation:this.lastSuccessfulNavigation?Ve(K({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let m=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),C=g.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!m&&C!=="reload"){let E="";return this.events.next(new ns(g.id,this.urlSerializer.serialize(g.rawUrl),E,S0.IgnoredSameUrlNavigation)),g.resolve(!1),Zn}if(this.urlHandlingStrategy.shouldProcessUrl(g.rawUrl))return xe(g).pipe(Xn(E=>{let x=this.transitions?.getValue();return this.events.next(new Kc(E.id,this.urlSerializer.serialize(E.extractedUrl),E.source,E.restoredState)),x!==this.transitions?.getValue()?Zn:Promise.resolve(E)}),IL(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),$t(E=>{s.targetSnapshot=E.targetSnapshot,s.urlAfterRedirects=E.urlAfterRedirects,this.currentNavigation=Ve(K({},this.currentNavigation),{finalUrl:E.urlAfterRedirects});let x=new gf(E.id,this.urlSerializer.serialize(E.extractedUrl),this.urlSerializer.serialize(E.urlAfterRedirects),E.targetSnapshot);this.events.next(x)}));if(m&&this.urlHandlingStrategy.shouldProcessUrl(g.currentRawUrl)){let{id:E,extractedUrl:x,source:D,restoredState:N,extras:U}=g,G=new Kc(E,this.urlSerializer.serialize(x),D,N);this.events.next(G);let z=mb(this.rootComponentType).snapshot;return this.currentTransition=s=Ve(K({},g),{targetSnapshot:z,urlAfterRedirects:x,extras:Ve(K({},U),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=x,xe(s)}else{let E="";return this.events.next(new ns(g.id,this.urlSerializer.serialize(g.extractedUrl),E,S0.IgnoredByUrlHandlingStrategy)),g.resolve(!1),Zn}}),$t(g=>{let m=new A0(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(m)}),Oe(g=>(this.currentTransition=s=Ve(K({},g),{guards:z3(g.targetSnapshot,g.currentSnapshot,this.rootContexts)}),s)),eL(this.environmentInjector,g=>this.events.next(g)),$t(g=>{if(s.guardsResult=g.guardsResult,g.guardsResult&&typeof g.guardsResult!="boolean")throw wf(this.urlSerializer,g.guardsResult);let m=new D0(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot,!!g.guardsResult);this.events.next(m)}),Dr(g=>g.guardsResult?!0:(this.cancelNavigationTransition(g,"",Jn.GuardRejected),!1)),w0(g=>{if(g.guards.canActivateChecks.length)return xe(g).pipe($t(m=>{let C=new T0(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(C)}),Xn(m=>{let C=!1;return xe(m).pipe(bL(this.paramsInheritanceStrategy,this.environmentInjector),$t({next:()=>C=!0,complete:()=>{C||this.cancelNavigationTransition(m,"",Jn.NoDataFromResolver)}}))}),$t(m=>{let C=new M0(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(C)}))}),w0(g=>{let m=C=>{let E=[];C.routeConfig?.loadComponent&&!C.routeConfig._loadedComponent&&E.push(this.configLoader.loadComponent(C.routeConfig).pipe($t(x=>{C.component=x}),Oe(()=>{})));for(let x of C.children)E.push(...m(x));return E};return Ju(m(g.targetSnapshot.root)).pipe(Ji(null),hi(1))}),w0(()=>this.afterPreactivation()),Xn(()=>{let{currentSnapshot:g,targetSnapshot:m}=s,C=this.createViewTransition?.(this.environmentInjector,g.root,m.root);return C?ot(C).pipe(Oe(()=>s)):xe(s)}),Oe(g=>{let m=B3(n.routeReuseStrategy,g.targetSnapshot,g.currentRouterState);return this.currentTransition=s=Ve(K({},g),{targetRouterState:m}),this.currentNavigation.targetRouterState=m,s}),$t(()=>{this.events.next(new el)}),H3(this.rootContexts,n.routeReuseStrategy,g=>this.events.next(g),this.inputBindingEnabled),hi(1),$t({next:g=>{l=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new ts(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects))),this.titleStrategy?.updateTitle(g.targetRouterState.snapshot),g.resolve(!0)},complete:()=>{l=!0}}),Xp(this.transitionAbortSubject.pipe($t(g=>{throw g}))),hc(()=>{!l&&!h&&this.cancelNavigationTransition(s,"",Jn.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),Ln(g=>{if(h=!0,Cb(g))this.events.next(new Oi(s.id,this.urlSerializer.serialize(s.extractedUrl),g.message,g.cancellationCode)),j3(g)?this.events.next(new ya(g.url,g.navigationBehaviorOptions)):s.resolve(!1);else{let m=new Jc(s.id,this.urlSerializer.serialize(s.extractedUrl),g,s.targetSnapshot??void 0);try{let C=Ci(this.environmentInjector,()=>this.navigationErrorHandler?.(m));if(C instanceof nl){let{message:E,cancellationCode:x}=wf(this.urlSerializer,C);this.events.next(new Oi(s.id,this.urlSerializer.serialize(s.extractedUrl),E,x)),this.events.next(new ya(C.redirectTo,C.navigationBehaviorOptions))}else{this.events.next(m);let E=n.errorHandler(g);s.resolve(!!E)}}catch(C){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(C)}}return Zn}))}))}cancelNavigationTransition(n,r,i){let s=new Oi(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(s),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return n.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function FL(e){return e!==qc}var BL=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=de({token:e,factory:()=>J(VL),providedIn:"root"})}}return e})(),q0=class{shouldDetach(t){return!1}store(t,n){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,n){return t.routeConfig===n.routeConfig}},VL=(()=>{class e extends q0{static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=ia(e)))(i||e)}})()}static{this.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),Tb=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=de({token:e,factory:()=>J(UL),providedIn:"root"})}}return e})(),UL=(()=>{class e extends Tb{constructor(){super(...arguments),this.location=J(Vc),this.urlSerializer=J(Y0),this.options=J(K0,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=J(t1),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Pi,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=mb(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&n(r.url,r.state)})}handleRouterEvent(n,r){if(n instanceof Kc)this.stateMemento=this.createStateMemento();else if(n instanceof ns)this.rawUrlTree=r.initialUrl;else if(n instanceof gf){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else n instanceof el?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):n instanceof Oi&&(n.code===Jn.GuardRejected||n.code===Jn.NoDataFromResolver)?this.restoreHistory(r):n instanceof Jc?this.restoreHistory(r,!0):n instanceof ts&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,r){let i=n instanceof Pi?this.urlSerializer.serialize(n):n;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let s=this.browserPageId,l=K(K({},r.extras.state),this.generateNgRouterState(r.id,s));this.location.replaceState(i,"",l)}else{let s=K(K({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",s)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,s=this.currentPageId-i;s!==0?this.location.historyGo(s):this.currentUrlTree===n.finalUrl&&s===0&&(this.resetState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=ia(e)))(i||e)}})()}static{this.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),Gc=function(e){return e[e.COMPLETE=0]="COMPLETE",e[e.FAILED=1]="FAILED",e[e.REDIRECTING=2]="REDIRECTING",e}(Gc||{});function jL(e,t){e.events.pipe(Dr(n=>n instanceof ts||n instanceof Oi||n instanceof Jc||n instanceof ns),Oe(n=>n instanceof ts||n instanceof ns?Gc.COMPLETE:(n instanceof Oi?n.code===Jn.Redirect||n.code===Jn.SupersededByNewNavigation:!1)?Gc.REDIRECTING:Gc.FAILED),Dr(n=>n!==Gc.REDIRECTING),hi(1)).subscribe(()=>{t()})}function HL(e){throw e}var zL={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},WL={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},po=(()=>{class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=J(tf),this.stateManager=J(Tb),this.options=J(K0,{optional:!0})||{},this.pendingTasks=J(oa),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=J(LL),this.urlSerializer=J(Y0),this.location=J(Vc),this.urlHandlingStrategy=J(t1),this._events=new ln,this.errorHandler=this.options.errorHandler||HL,this.navigated=!1,this.routeReuseStrategy=J(BL),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=J(e1,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!J(Q0,{optional:!0}),this.eventsSubscription=new Nt,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(i!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof Oi&&r.code!==Jn.Redirect&&r.code!==Jn.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof ts)this.navigated=!0;else if(r instanceof ya){let l=r.navigationBehaviorOptions,h=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),g=K({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||FL(i.source)},l);this.scheduleNavigation(h,qc,null,g,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}$L(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),qc,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(n,"popstate",r)},0)})}navigateToSyncWithBrowser(n,r,i){let s={replaceUrl:!0},l=i?.navigationId?i:null;if(i){let g=K({},i);delete g.navigationId,delete g.\u0275routerPageId,Object.keys(g).length!==0&&(s.state=g)}let h=this.parseUrl(n);this.scheduleNavigation(h,r,l,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(J0),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:i,queryParams:s,fragment:l,queryParamsHandling:h,preserveFragment:g}=r,m=g?this.currentUrlTree.fragment:l,C=null;switch(h??this.options.defaultQueryParamsHandling){case"merge":C=K(K({},this.currentUrlTree.queryParams),s);break;case"preserve":C=this.currentUrlTree.queryParams;break;default:C=s||null}C!==null&&(C=this.removeEmptyProps(C));let E;try{let x=i?i.snapshot:this.routerState.snapshot.root;E=fb(x)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),E=this.currentUrlTree.root}return hb(E,n,C,m??null)}navigateByUrl(n,r={skipLocationChange:!1}){let i=Xc(n)?n:this.parseUrl(n),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,qc,null,r)}navigate(n,r={skipLocationChange:!1}){return GL(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.urlSerializer.parse("/")}}isActive(n,r){let i;if(r===!0?i=K({},zL):r===!1?i=K({},WL):i=r,Xc(n))return ZI(this.currentUrlTree,n,i);let s=this.parseUrl(n);return ZI(this.currentUrlTree,s,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,s])=>(s!=null&&(r[i]=s),r),{})}scheduleNavigation(n,r,i,s,l){if(this.disposed)return Promise.resolve(!1);let h,g,m;l?(h=l.resolve,g=l.reject,m=l.promise):m=new Promise((E,x)=>{h=E,g=x});let C=this.pendingTasks.add();return jL(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(C))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:s,resolve:h,reject:g,promise:m,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),m.catch(E=>Promise.reject(E))}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function GL(e){for(let t=0;t<e.length;t++)if(e[t]==null)throw new ue(4008,!1)}function $L(e){return!(e instanceof el)&&!(e instanceof ya)}var qL=new Ie("");function Mb(e,...t){return Em([{provide:e1,multi:!0,useValue:e},[],{provide:fo,useFactory:YL,deps:[po]},{provide:r0,multi:!0,useFactory:ZL},t.map(n=>n.\u0275providers)])}function YL(e){return e.routerState.root}function ZL(){let e=J(oo);return t=>{let n=e.get(Qo);if(t!==n.components[0])return;let r=e.get(po),i=e.get(XL);e.get(QL)===1&&r.initialNavigation(),e.get(KL,null,ke.Optional)?.setUpPreloading(),e.get(qL,null,ke.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var XL=new Ie("",{factory:()=>new ln}),QL=new Ie("",{providedIn:"root",factory:()=>1});var KL=new Ie("");var Nb=(()=>{class e{constructor(){}title="Tablefi";static \u0275fac=function(r){return new(r||e)};static \u0275cmp=pe({type:e,selectors:[["app-root"]],standalone:!0,features:[ve],decls:1,vars:0,template:function(r,i){r&1&&_e(0,"router-outlet")},dependencies:[X0,a0],styles:["router-outlet[_ngcontent-%COMP%]{height:100%;width:100%}"]})}return e})();var Ub=(()=>{class e{constructor(n,r){this._renderer=n,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static{this.\u0275fac=function(r){return new(r||e)(re(lo),re(Kr))}}static{this.\u0275dir=Vn({type:e})}}return e})(),JL=(()=>{class e extends Ub{static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=ia(e)))(i||e)}})()}static{this.\u0275dir=Vn({type:e,features:[Di]})}}return e})(),jb=new Ie("");var eF={provide:jb,useExisting:Zo(()=>fr),multi:!0};function tF(){let e=Ri()?Ri().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}var nF=new Ie(""),fr=(()=>{class e extends Ub{constructor(n,r,i){super(n,r),this._compositionMode=i,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!tF())}writeValue(n){let r=n??"";this.setProperty("value",r)}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static{this.\u0275fac=function(r){return new(r||e)(re(lo),re(Kr),re(nF,8))}}static{this.\u0275dir=Vn({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&ie("input",function(l){return i._handleInput(l.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(l){return i._compositionEnd(l.target.value)})},features:[Lc([eF]),Di]})}}return e})();function rF(e){return e==null||(typeof e=="string"||Array.isArray(e))&&e.length===0}var i1=new Ie(""),Hb=new Ie("");function iF(e){return rF(e.value)?{required:!0}:null}function Rb(e){return null}function zb(e){return e!=null}function Wb(e){return Xo(e)?ot(e):e}function Gb(e){let t={};return e.forEach(n=>{t=n!=null?K(K({},t),n):t}),Object.keys(t).length===0?null:t}function $b(e,t){return t.map(n=>n(e))}function oF(e){return!e.validate}function qb(e){return e.map(t=>oF(t)?t:n=>t.validate(n))}function sF(e){if(!e)return null;let t=e.filter(zb);return t.length==0?null:function(n){return Gb($b(n,t))}}function o1(e){return e!=null?sF(qb(e)):null}function aF(e){if(!e)return null;let t=e.filter(zb);return t.length==0?null:function(n){let r=$b(n,t).map(Wb);return Wp(r).pipe(Oe(Gb))}}function s1(e){return e!=null?aF(qb(e)):null}function Ob(e,t){return e===null?[t]:Array.isArray(e)?[...e,t]:[e,t]}function cF(e){return e._rawValidators}function lF(e){return e._rawAsyncValidators}function r1(e){return e?Array.isArray(e)?e:[e]:[]}function xf(e,t){return Array.isArray(e)?e.includes(t):e===t}function Pb(e,t){let n=r1(t);return r1(e).forEach(i=>{xf(n,i)||n.push(i)}),n}function kb(e,t){return r1(t).filter(n=>!xf(e,n))}var Sf=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=o1(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=s1(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,n){return this.control?this.control.hasError(t,n):!1}getError(t,n){return this.control?this.control.getError(t,n):null}},Ea=class extends Sf{get formDirective(){return null}get path(){return null}},hl=class extends Sf{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Af=class{constructor(t){this._cd=t}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},uF={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},L$=Ve(K({},uF),{"[class.ng-submitted]":"isSubmitted"}),ei=(()=>{class e extends Af{constructor(n){super(n)}static{this.\u0275fac=function(r){return new(r||e)(re(hl,2))}}static{this.\u0275dir=Vn({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Kd("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[Di]})}}return e})(),ti=(()=>{class e extends Af{constructor(n){super(n)}static{this.\u0275fac=function(r){return new(r||e)(re(Ea,10))}}static{this.\u0275dir=Vn({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&Kd("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[Di]})}}return e})();var cl="VALID",bf="INVALID",wa="PENDING",ll="DISABLED",Ia=class{},Df=class extends Ia{constructor(t,n){super(),this.value=t,this.source=n}},dl=class extends Ia{constructor(t,n){super(),this.pristine=t,this.source=n}},fl=class extends Ia{constructor(t,n){super(),this.touched=t,this.source=n}},Ca=class extends Ia{constructor(t,n){super(),this.status=t,this.source=n}};function Yb(e){return(Nf(e)?e.validators:e)||null}function dF(e){return Array.isArray(e)?o1(e):e||null}function Zb(e,t){return(Nf(t)?t.asyncValidators:e)||null}function fF(e){return Array.isArray(e)?s1(e):e||null}function Nf(e){return e!=null&&!Array.isArray(e)&&typeof e=="object"}function hF(e,t,n){let r=e.controls;if(!(t?Object.keys(r):r).length)throw new ue(1e3,"");if(!r[n])throw new ue(1001,"")}function pF(e,t,n){e._forEachChild((r,i)=>{if(n[i]===void 0)throw new ue(1002,"")})}var Tf=class{constructor(t,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=Bc(()=>this.statusReactive()),this.statusReactive=Oc(void 0),this._pristine=Bc(()=>this.pristineReactive()),this.pristineReactive=Oc(!0),this._touched=Bc(()=>this.touchedReactive()),this.touchedReactive=Oc(!1),this._events=new ln,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get status(){return Ni(this.statusReactive)}set status(t){Ni(()=>this.statusReactive.set(t))}get valid(){return this.status===cl}get invalid(){return this.status===bf}get pending(){return this.status==wa}get disabled(){return this.status===ll}get enabled(){return this.status!==ll}get pristine(){return Ni(this.pristineReactive)}set pristine(t){Ni(()=>this.pristineReactive.set(t))}get dirty(){return!this.pristine}get touched(){return Ni(this.touchedReactive)}set touched(t){Ni(()=>this.touchedReactive.set(t))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(Pb(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(Pb(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(kb(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(kb(t,this._rawAsyncValidators))}hasValidator(t){return xf(this._rawValidators,t)}hasAsyncValidator(t){return xf(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){let n=this.touched===!1;this.touched=!0;let r=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsTouched(Ve(K({},t),{sourceControl:r})),n&&t.emitEvent!==!1&&this._events.next(new fl(!0,r))}markAllAsTouched(t={}){this.markAsTouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(t))}markAsUntouched(t={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=t.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:r})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,r),n&&t.emitEvent!==!1&&this._events.next(new fl(!1,r))}markAsDirty(t={}){let n=this.pristine===!0;this.pristine=!1;let r=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsDirty(Ve(K({},t),{sourceControl:r})),n&&t.emitEvent!==!1&&this._events.next(new dl(!1,r))}markAsPristine(t={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=t.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:t.emitEvent})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t,r),n&&t.emitEvent!==!1&&this._events.next(new dl(!0,r))}markAsPending(t={}){this.status=wa;let n=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Ca(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.markAsPending(Ve(K({},t),{sourceControl:n}))}disable(t={}){let n=this._parentMarkedDirty(t.onlySelf);this.status=ll,this.errors=null,this._forEachChild(i=>{i.disable(Ve(K({},t),{onlySelf:!0}))}),this._updateValue();let r=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Df(this.value,r)),this._events.next(new Ca(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Ve(K({},t),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(t={}){let n=this._parentMarkedDirty(t.onlySelf);this.status=cl,this._forEachChild(r=>{r.enable(Ve(K({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Ve(K({},t),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(t,n){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===cl||this.status===wa)&&this._runAsyncValidator(r,t.emitEvent)}let n=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Df(this.value,n)),this._events.next(new Ca(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(Ve(K({},t),{sourceControl:n}))}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ll:cl}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t,n){if(this.asyncValidator){this.status=wa,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1};let r=Wb(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:n,shouldHaveEmitted:t})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let t=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,t}return!1}setErrors(t,n={}){this.errors=t,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(t){let n=t;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(t,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[t]:null}hasError(t,n){return!!this.getError(t,n)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t,n,r){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),(t||r)&&this._events.next(new Ca(this.status,n)),this._parent&&this._parent._updateControlsErrors(t,n,r)}_initObservables(){this.valueChanges=new At,this.statusChanges=new At}_calculateStatus(){return this._allControlsDisabled()?ll:this.errors?bf:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(wa)?wa:this._anyControlsHaveStatus(bf)?bf:cl}_anyControlsHaveStatus(t){return this._anyControls(n=>n.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t,n){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!t.onlySelf&&this._parent._updatePristine(t,n),i&&this._events.next(new dl(this.pristine,n))}_updateTouched(t={},n){this.touched=this._anyControlsTouched(),this._events.next(new fl(this.touched,n)),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,n)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Nf(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let n=this._parent&&this._parent.dirty;return!t&&!!n&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=dF(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=fF(this._rawAsyncValidators)}},Mf=class extends Tf{constructor(t,n,r){super(Yb(n),Zb(r,n)),this.controls=t,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,n){return this.controls[t]?this.controls[t]:(this.controls[t]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(t,n,r={}){this.registerControl(t,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(t,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(t,n,r={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],n&&this.registerControl(t,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,n={}){pF(this,!0,t),Object.keys(t).forEach(r=>{hF(this,!0,r),this.controls[r].setValue(t[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(t,n={}){t!=null&&(Object.keys(t).forEach(r=>{let i=this.controls[r];i&&i.patchValue(t[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(t={},n={}){this._forEachChild((r,i)=>{r.reset(t?t[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(t,n,r)=>(t[r]=n.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&t(r,n)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&t(r))return!0;return!1}_reduceValue(){let t={};return this._reduceChildren(t,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(t,n){let r=t;return this._forEachChild((i,s)=>{r=n(r,i,s)}),r}_allControlsDisabled(){for(let t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}};var a1=new Ie("CallSetDisabledState",{providedIn:"root",factory:()=>c1}),c1="always";function gF(e,t){return[...t.path,e]}function Xb(e,t,n=c1){Qb(e,t),t.valueAccessor.writeValue(e.value),(e.disabled||n==="always")&&t.valueAccessor.setDisabledState?.(e.disabled),yF(e,t),vF(e,t),_F(e,t),mF(e,t)}function Lb(e,t){e.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(t)})}function mF(e,t){if(t.valueAccessor.setDisabledState){let n=r=>{t.valueAccessor.setDisabledState(r)};e.registerOnDisabledChange(n),t._registerOnDestroy(()=>{e._unregisterOnDisabledChange(n)})}}function Qb(e,t){let n=cF(e);t.validator!==null?e.setValidators(Ob(n,t.validator)):typeof n=="function"&&e.setValidators([n]);let r=lF(e);t.asyncValidator!==null?e.setAsyncValidators(Ob(r,t.asyncValidator)):typeof r=="function"&&e.setAsyncValidators([r]);let i=()=>e.updateValueAndValidity();Lb(t._rawValidators,i),Lb(t._rawAsyncValidators,i)}function yF(e,t){t.valueAccessor.registerOnChange(n=>{e._pendingValue=n,e._pendingChange=!0,e._pendingDirty=!0,e.updateOn==="change"&&Kb(e,t)})}function _F(e,t){t.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,e.updateOn==="blur"&&e._pendingChange&&Kb(e,t),e.updateOn!=="submit"&&e.markAsTouched()})}function Kb(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function vF(e,t){let n=(r,i)=>{t.valueAccessor.writeValue(r),i&&t.viewToModelUpdate(r)};e.registerOnChange(n),t._registerOnDestroy(()=>{e._unregisterOnChange(n)})}function wF(e,t){e==null,Qb(e,t)}function CF(e,t){if(!e.hasOwnProperty("model"))return!1;let n=e.model;return n.isFirstChange()?!0:!Object.is(t,n.currentValue)}function EF(e){return Object.getPrototypeOf(e.constructor)===JL}function IF(e,t){e._syncPendingControls(),t.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function bF(e,t){if(!t)return null;Array.isArray(t);let n,r,i;return t.forEach(s=>{s.constructor===fr?n=s:EF(s)?r=s:i=s}),i||r||n||null}var xF={provide:Ea,useExisting:Zo(()=>Lr)},ul=Promise.resolve(),Lr=(()=>{class e extends Ea{get submitted(){return Ni(this.submittedReactive)}constructor(n,r,i){super(),this.callSetDisabledState=i,this._submitted=Bc(()=>this.submittedReactive()),this.submittedReactive=Oc(!1),this._directives=new Set,this.ngSubmit=new At,this.form=new Mf({},o1(n),s1(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(n){ul.then(()=>{let r=this._findContainer(n.path);n.control=r.registerControl(n.name,n.control),Xb(n.control,n,this.callSetDisabledState),n.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(n)})}getControl(n){return this.form.get(n.path)}removeControl(n){ul.then(()=>{let r=this._findContainer(n.path);r&&r.removeControl(n.name),this._directives.delete(n)})}addFormGroup(n){ul.then(()=>{let r=this._findContainer(n.path),i=new Mf({});wF(i,n),r.registerControl(n.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(n){ul.then(()=>{let r=this._findContainer(n.path);r&&r.removeControl(n.name)})}getFormGroup(n){return this.form.get(n.path)}updateModel(n,r){ul.then(()=>{this.form.get(n.path).setValue(r)})}setValue(n){this.control.setValue(n)}onSubmit(n){return this.submittedReactive.set(!0),IF(this.form,this._directives),this.ngSubmit.emit(n),n?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(n=void 0){this.form.reset(n),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(n){return n.pop(),n.length?this.form.get(n):this.form}static{this.\u0275fac=function(r){return new(r||e)(re(i1,10),re(Hb,10),re(a1,8))}}static{this.\u0275dir=Vn({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&ie("submit",function(l){return i.onSubmit(l)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Lc([xF]),Di]})}}return e})();function Fb(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}function Bb(e){return typeof e=="object"&&e!==null&&Object.keys(e).length===2&&"value"in e&&"disabled"in e}var SF=class extends Tf{constructor(t=null,n,r){super(Yb(n),Zb(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Nf(n)&&(n.nonNullable||n.initialValueIsDefault)&&(Bb(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,n={}){this.value=this._pendingValue=t,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(t,n={}){this.setValue(t,n)}reset(t=this.defaultValue,n={}){this._applyFormState(t),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){Fb(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){Fb(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){Bb(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var AF={provide:hl,useExisting:Zo(()=>Fr)},Vb=Promise.resolve(),Fr=(()=>{class e extends hl{constructor(n,r,i,s,l,h){super(),this._changeDetectorRef=l,this.callSetDisabledState=h,this.control=new SF,this._registered=!1,this.name="",this.update=new At,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=bF(this,s)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){let r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),CF(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Xb(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(n){Vb.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){let r=n.isDisabled.currentValue,i=r!==0&&Fc(r);Vb.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?gF(n,this._parent):[n]}static{this.\u0275fac=function(r){return new(r||e)(re(Ea,9),re(i1,10),re(Hb,10),re(jb,10),re(Mi,8),re(a1,8))}}static{this.\u0275dir=Vn({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Lc([AF]),Di,bi]})}}return e})(),ni=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275dir=Vn({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return e})();var DF=(()=>{class e{constructor(){this._validator=Rb}ngOnChanges(n){if(this.inputName in n){let r=this.normalizeInput(n[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):Rb,this._onChange&&this._onChange()}}validate(n){return this._validator(n)}registerOnValidatorChange(n){this._onChange=n}enabled(n){return n!=null}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275dir=Vn({type:e,features:[bi]})}}return e})();var TF={provide:i1,useExisting:Zo(()=>Br),multi:!0};var Br=(()=>{class e extends DF{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=Fc,this.createValidator=n=>iF}enabled(n){return n}static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=ia(e)))(i||e)}})()}static{this.\u0275dir=Vn({type:e,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&Xd("required",i._enabled?"":null)},inputs:{required:"required"},features:[Lc([TF]),Di]})}}return e})();var MF=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=wi({type:e})}static{this.\u0275inj=vi({})}}return e})();var zn=(()=>{class e{static withConfig(n){return{ngModule:e,providers:[{provide:a1,useValue:n.callSetDisabledState??c1}]}}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=wi({type:e})}static{this.\u0275inj=vi({imports:[MF]})}}return e})();var u1={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};var Y=function(e,t){if(!e)throw rs(t)},rs=function(e){return new Error("Firebase Database ("+u1.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)};var ex=function(e){let t=[],n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},NF=function(e){let t=[],n=0,r=0;for(;n<e.length;){let i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=e[n++];t[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=e[n++],l=e[n++],h=e[n++],g=((i&7)<<18|(s&63)<<12|(l&63)<<6|h&63)-65536;t[r++]=String.fromCharCode(55296+(g>>10)),t[r++]=String.fromCharCode(56320+(g&1023))}else{let s=e[n++],l=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|l&63)}}return t.join("")},Of={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){let s=e[i],l=i+1<e.length,h=l?e[i+1]:0,g=i+2<e.length,m=g?e[i+2]:0,C=s>>2,E=(s&3)<<4|h>>4,x=(h&15)<<2|m>>6,D=m&63;g||(D=64,l||(x=64)),r.push(n[C],n[E],n[x],n[D])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(ex(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):NF(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();let n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){let s=n[e.charAt(i++)],h=i<e.length?n[e.charAt(i)]:0;++i;let m=i<e.length?n[e.charAt(i)]:64;++i;let E=i<e.length?n[e.charAt(i)]:64;if(++i,s==null||h==null||m==null||E==null)throw new d1;let x=s<<2|h>>4;if(r.push(x),m!==64){let D=h<<4&240|m>>2;if(r.push(D),E!==64){let N=m<<6&192|E;r.push(N)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},d1=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},h1=function(e){let t=ex(e);return Of.encodeByteArray(t,!0)},gl=function(e){return h1(e).replace(/\./g,"")},ml=function(e){try{return Of.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function tx(e){return nx(void 0,e)}function nx(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:let n=t;return new Date(n.getTime());case Object:e===void 0&&(e={});break;case Array:e=[];break;default:return t}for(let n in t)!t.hasOwnProperty(n)||!RF(n)||(e[n]=nx(e[n],t[n]));return e}function RF(e){return e!=="__proto__"}function OF(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var PF=()=>OF().__FIREBASE_DEFAULTS__,kF=()=>{if(typeof process>"u"||typeof process.env>"u")return;let e=process.env.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},LF=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let t=e&&ml(e[1]);return t&&JSON.parse(t)},p1=()=>{try{return PF()||kF()||LF()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},rx=e=>{var t,n;return(n=(t=p1())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},ix=e=>{let t=rx(e);if(!t)return;let n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);let r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},g1=()=>{var e;return(e=p1())===null||e===void 0?void 0:e.config},ox=e=>{var t;return(t=p1())===null||t===void 0?void 0:t[`_${e}`]};var ki=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}};function sx(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=t||"demo-project",i=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let l=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[gl(JSON.stringify(n)),gl(JSON.stringify(l)),""].join(".")}function Vr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function yl(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Vr())}function ax(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function cx(){let e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function Pf(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function ii(){return u1.NODE_CLIENT===!0||u1.NODE_ADMIN===!0}function lx(){try{return typeof indexedDB=="object"}catch{return!1}}function ux(){return new Promise((e,t)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;t(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){t(n)}})}var FF="FirebaseError",ri=class e extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=FF,Object.setPrototypeOf(this,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Li.prototype.create)}},Li=class{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){let r=n[0]||{},i=`${this.service}/${t}`,s=this.errors[t],l=s?BF(s,r):"Error",h=`${this.serviceName}: ${l} (${i}).`;return new ri(i,h,r)}};function BF(e,t){return e.replace(VF,(n,r)=>{let i=t[r];return i!=null?String(i):`<${r}?>`})}var VF=/\{\$([^}]+)}/g;function ba(e){return JSON.parse(e)}function jt(e){return JSON.stringify(e)}var dx=function(e){let t={},n={},r={},i="";try{let s=e.split(".");t=ba(ml(s[0])||""),n=ba(ml(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:t,claims:n,data:r,signature:i}};var fx=function(e){let t=dx(e),n=t.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},hx=function(e){let t=dx(e).claims;return typeof t=="object"&&t.admin===!0};function Ur(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function is(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]}function kf(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function _l(e,t,n){let r={};for(let i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function vl(e,t){if(e===t)return!0;let n=Object.keys(e),r=Object.keys(t);for(let i of n){if(!r.includes(i))return!1;let s=e[i],l=t[i];if(Jb(s)&&Jb(l)){if(!vl(s,l))return!1}else if(s!==l)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function Jb(e){return e!==null&&typeof e=="object"}function wl(e){let t=[];for(let[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(i=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}var Rf=class{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(t,n){n||(n=0);let r=this.W_;if(typeof t=="string")for(let E=0;E<16;E++)r[E]=t.charCodeAt(n)<<24|t.charCodeAt(n+1)<<16|t.charCodeAt(n+2)<<8|t.charCodeAt(n+3),n+=4;else for(let E=0;E<16;E++)r[E]=t[n]<<24|t[n+1]<<16|t[n+2]<<8|t[n+3],n+=4;for(let E=16;E<80;E++){let x=r[E-3]^r[E-8]^r[E-14]^r[E-16];r[E]=(x<<1|x>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],l=this.chain_[2],h=this.chain_[3],g=this.chain_[4],m,C;for(let E=0;E<80;E++){E<40?E<20?(m=h^s&(l^h),C=1518500249):(m=s^l^h,C=1859775393):E<60?(m=s&l|h&(s|l),C=2400959708):(m=s^l^h,C=3395469782);let x=(i<<5|i>>>27)+m+g+C+r[E]&4294967295;g=h,h=l,l=(s<<30|s>>>2)&4294967295,s=i,i=x}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+l&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+g&4294967295}update(t,n){if(t==null)return;n===void 0&&(n=t.length);let r=n-this.blockSize,i=0,s=this.buf_,l=this.inbuf_;for(;i<n;){if(l===0)for(;i<=r;)this.compress_(t,i),i+=this.blockSize;if(typeof t=="string"){for(;i<n;)if(s[l]=t.charCodeAt(i),++l,++i,l===this.blockSize){this.compress_(s),l=0;break}}else for(;i<n;)if(s[l]=t[i],++l,++i,l===this.blockSize){this.compress_(s),l=0;break}}this.inbuf_=l,this.total_+=n}digest(){let t=[],n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)t[r]=this.chain_[i]>>s&255,++r;return t}};function px(e,t){let n=new f1(e,t);return n.subscribe.bind(n)}var f1=class{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,r){let i;if(t===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");UF(t,["next","error","complete"])?i=t:i={next:t,error:n,complete:r},i.next===void 0&&(i.next=l1),i.error===void 0&&(i.error=l1),i.complete===void 0&&(i.complete=l1);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function UF(e,t){if(typeof e!="object"||e===null)return!1;for(let n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function l1(){}function Cl(e,t){return`${e} failed: ${t} argument `}var gx=function(e){let t=[],n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);if(i>=55296&&i<=56319){let s=i-55296;r++,Y(r<e.length,"Surrogate pair missing trail surrogate.");let l=e.charCodeAt(r)-56320;i=65536+(s<<10)+l}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},El=function(e){let t=0;for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};var V$=4*60*60*1e3;function Wn(e){return e&&e._delegate?e._delegate:e}var hr=class{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}};var os="[DEFAULT]";var Lf=class{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){let n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){let r=new ki;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;let r=this.normalizeInstanceIdentifier(t?.identifier),i=(n=t?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(HF(t))try{this.getOrInitializeService({instanceIdentifier:os})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(t=os){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}delete(){return X(this,null,function*(){let t=Array.from(this.instances.values());yield Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(t=os){return this.instances.has(t)}getOptions(t=os){return this.instancesOptions.get(t)||{}}initialize(t={}){let{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[s,l]of this.instancesDeferred.entries()){let h=this.normalizeInstanceIdentifier(s);r===h&&l.resolve(i)}return i}onInit(t,n){var r;let i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(t),this.onInitCallbacks.set(i,s);let l=this.instances.get(i);return l&&t(l,i),()=>{s.delete(t)}}invokeOnInitCallbacks(t,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:jF(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=os){return this.component?this.component.multipleInstances?t:os:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function jF(e){return e===os?void 0:e}function HF(e){return e.instantiationMode==="EAGER"}var Il=class{constructor(t){this.name=t,this.providers=new Map}addComponent(t){let n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);let n=new Lf(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}};var zF=[],gt=function(e){return e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT",e}(gt||{}),WF={debug:gt.DEBUG,verbose:gt.VERBOSE,info:gt.INFO,warn:gt.WARN,error:gt.ERROR,silent:gt.SILENT},GF=gt.INFO,$F={[gt.DEBUG]:"log",[gt.VERBOSE]:"log",[gt.INFO]:"info",[gt.WARN]:"warn",[gt.ERROR]:"error"},qF=(e,t,...n)=>{if(t<e.logLevel)return;let r=new Date().toISOString(),i=$F[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)},go=class{constructor(t){this.name=t,this._logLevel=GF,this._logHandler=qF,this._userLogHandler=null,zF.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in gt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?WF[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,gt.DEBUG,...t),this._logHandler(this,gt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,gt.VERBOSE,...t),this._logHandler(this,gt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,gt.INFO,...t),this._logHandler(this,gt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,gt.WARN,...t),this._logHandler(this,gt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,gt.ERROR,...t),this._logHandler(this,gt.ERROR,...t)}};var YF=(e,t)=>t.some(n=>e instanceof n),mx,yx;function ZF(){return mx||(mx=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function XF(){return yx||(yx=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var _x=new WeakMap,y1=new WeakMap,vx=new WeakMap,m1=new WeakMap,v1=new WeakMap;function QF(e){let t=new Promise((n,r)=>{let i=()=>{e.removeEventListener("success",s),e.removeEventListener("error",l)},s=()=>{n(oi(e.result)),i()},l=()=>{r(e.error),i()};e.addEventListener("success",s),e.addEventListener("error",l)});return t.then(n=>{n instanceof IDBCursor&&_x.set(n,e)}).catch(()=>{}),v1.set(t,e),t}function KF(e){if(y1.has(e))return;let t=new Promise((n,r)=>{let i=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",l),e.removeEventListener("abort",l)},s=()=>{n(),i()},l=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",s),e.addEventListener("error",l),e.addEventListener("abort",l)});y1.set(e,t)}var _1={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return y1.get(e);if(t==="objectStoreNames")return e.objectStoreNames||vx.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return oi(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function wx(e){_1=e(_1)}function JF(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){let r=e.call(Ff(this),t,...n);return vx.set(r,t.sort?t.sort():[t]),oi(r)}:XF().includes(e)?function(...t){return e.apply(Ff(this),t),oi(_x.get(this))}:function(...t){return oi(e.apply(Ff(this),t))}}function e8(e){return typeof e=="function"?JF(e):(e instanceof IDBTransaction&&KF(e),YF(e,ZF())?new Proxy(e,_1):e)}function oi(e){if(e instanceof IDBRequest)return QF(e);if(m1.has(e))return m1.get(e);let t=e8(e);return t!==e&&(m1.set(e,t),v1.set(t,e)),t}var Ff=e=>v1.get(e);function Ex(e,t,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){let l=indexedDB.open(e,t),h=oi(l);return r&&l.addEventListener("upgradeneeded",g=>{r(oi(l.result),g.oldVersion,g.newVersion,oi(l.transaction),g)}),n&&l.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),h.then(g=>{s&&g.addEventListener("close",()=>s()),i&&g.addEventListener("versionchange",m=>i(m.oldVersion,m.newVersion,m))}).catch(()=>{}),h}var t8=["get","getKey","getAll","getAllKeys","count"],n8=["put","add","delete","clear"],w1=new Map;function Cx(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(w1.get(t))return w1.get(t);let n=t.replace(/FromIndex$/,""),r=t!==n,i=n8.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||t8.includes(n)))return;let s=function(l,...h){return X(this,null,function*(){let g=this.transaction(l,i?"readwrite":"readonly"),m=g.store;return r&&(m=m.index(h.shift())),(yield Promise.all([m[n](...h),i&&g.done]))[0]})};return w1.set(t,s),s}wx(e=>Ve(K({},e),{get:(t,n,r)=>Cx(t,n)||e.get(t,n,r),has:(t,n)=>!!Cx(t,n)||e.has(t,n)}));var E1=class{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(r8(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function r8(e){let t=e.getComponent();return t?.type==="VERSION"}var I1="@firebase/app",Ix="0.10.12";var Fi=new go("@firebase/app"),i8="@firebase/app-compat",o8="@firebase/analytics-compat",s8="@firebase/analytics",a8="@firebase/app-check-compat",c8="@firebase/app-check",l8="@firebase/auth",u8="@firebase/auth-compat",d8="@firebase/database",f8="@firebase/data-connect",h8="@firebase/database-compat",p8="@firebase/functions",g8="@firebase/functions-compat",m8="@firebase/installations",y8="@firebase/installations-compat",_8="@firebase/messaging",v8="@firebase/messaging-compat",w8="@firebase/performance",C8="@firebase/performance-compat",E8="@firebase/remote-config",I8="@firebase/remote-config-compat",b8="@firebase/storage",x8="@firebase/storage-compat",S8="@firebase/firestore",A8="@firebase/vertexai-preview",D8="@firebase/firestore-compat",T8="firebase",M8="10.14.0";var b1="[DEFAULT]",N8={[I1]:"fire-core",[i8]:"fire-core-compat",[s8]:"fire-analytics",[o8]:"fire-analytics-compat",[c8]:"fire-app-check",[a8]:"fire-app-check-compat",[l8]:"fire-auth",[u8]:"fire-auth-compat",[d8]:"fire-rtdb",[f8]:"fire-data-connect",[h8]:"fire-rtdb-compat",[p8]:"fire-fn",[g8]:"fire-fn-compat",[m8]:"fire-iid",[y8]:"fire-iid-compat",[_8]:"fire-fcm",[v8]:"fire-fcm-compat",[w8]:"fire-perf",[C8]:"fire-perf-compat",[E8]:"fire-rc",[I8]:"fire-rc-compat",[b8]:"fire-gcs",[x8]:"fire-gcs-compat",[S8]:"fire-fst",[D8]:"fire-fst-compat",[A8]:"fire-vertex","fire-js":"fire-js",[T8]:"fire-js-all"};var Bf=new Map,R8=new Map,x1=new Map;function bx(e,t){try{e.container.addComponent(t)}catch(n){Fi.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function yo(e){let t=e.name;if(x1.has(t))return Fi.debug(`There were multiple attempts to register component ${t}.`),!1;x1.set(t,e);for(let n of Bf.values())bx(n,e);for(let n of R8.values())bx(n,e);return!0}function T1(e,t){let n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function xa(e){return e.settings!==void 0}var O8={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},mo=new Li("app","Firebase",O8);var S1=class{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new hr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw mo.create("app-deleted",{appName:this._name})}};var Sa=M8;function qe(e,t={}){let n=e;typeof t!="object"&&(t={name:t});let r=Object.assign({name:b1,automaticDataCollectionEnabled:!1},t),i=r.name;if(typeof i!="string"||!i)throw mo.create("bad-app-name",{appName:String(i)});if(n||(n=g1()),!n)throw mo.create("no-options");let s=Bf.get(i);if(s){if(vl(n,s.options)&&vl(r,s.config))return s;throw mo.create("duplicate-app",{appName:i})}let l=new Il(i);for(let g of x1.values())l.addComponent(g);let h=new S1(n,r,l);return Bf.set(i,h),h}function M1(e=b1){let t=Bf.get(e);if(!t&&e===b1&&g1())return qe();if(!t)throw mo.create("no-app",{appName:e});return t}function pr(e,t,n){var r;let i=(r=N8[e])!==null&&r!==void 0?r:e;n&&(i+=`-${n}`);let s=i.match(/\s|\//),l=t.match(/\s|\//);if(s||l){let h=[`Unable to register library "${i}" with version "${t}":`];s&&h.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&l&&h.push("and"),l&&h.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Fi.warn(h.join(" "));return}yo(new hr(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}var P8="firebase-heartbeat-database",k8=1,bl="firebase-heartbeat-store",C1=null;function Dx(){return C1||(C1=Ex(P8,k8,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(bl)}catch(n){console.warn(n)}}}}).catch(e=>{throw mo.create("idb-open",{originalErrorMessage:e.message})})),C1}function L8(e){return X(this,null,function*(){try{let n=(yield Dx()).transaction(bl),r=yield n.objectStore(bl).get(Tx(e));return yield n.done,r}catch(t){if(t instanceof ri)Fi.warn(t.message);else{let n=mo.create("idb-get",{originalErrorMessage:t?.message});Fi.warn(n.message)}}})}function xx(e,t){return X(this,null,function*(){try{let r=(yield Dx()).transaction(bl,"readwrite");yield r.objectStore(bl).put(t,Tx(e)),yield r.done}catch(n){if(n instanceof ri)Fi.warn(n.message);else{let r=mo.create("idb-set",{originalErrorMessage:n?.message});Fi.warn(r.message)}}})}function Tx(e){return`${e.name}!${e.options.appId}`}var F8=1024,B8=30*24*60*60*1e3,A1=class{constructor(t){this.container=t,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new D1(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return X(this,null,function*(){var t,n;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Sx();return((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(l=>l.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(l=>{let h=new Date(l.date).valueOf();return Date.now()-h<=B8}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Fi.warn(r)}})}getHeartbeatsHeader(){return X(this,null,function*(){var t;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=Sx(),{heartbeatsToSend:r,unsentEntries:i}=V8(this._heartbeatsCache.heartbeats),s=gl(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Fi.warn(n),""}})}};function Sx(){return new Date().toISOString().substring(0,10)}function V8(e,t=F8){let n=[],r=e.slice();for(let i of e){let s=n.find(l=>l.agent===i.agent);if(s){if(s.dates.push(i.date),Ax(n)>t){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Ax(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var D1=class{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return X(this,null,function*(){return lx()?ux().then(()=>!0).catch(()=>!1):!1})}read(){return X(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield L8(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(t){return X(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return xx(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return})}add(t){return X(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return xx(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return})}};function Ax(e){return gl(JSON.stringify({version:2,heartbeats:e})).length}function U8(e){yo(new hr("platform-logger",t=>new E1(t),"PRIVATE")),yo(new hr("heartbeat",t=>new A1(t),"PRIVATE")),pr(I1,Ix,e),pr(I1,Ix,"esm2017"),pr("fire-js","")}U8("");var j8="firebase",H8="10.14.0";pr(j8,H8,"app");var Mx="@firebase/database",Nx="1.0.8";var Oy="";function z8(e){Oy=e}var B1=class{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,n){n==null?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),jt(n))}get(t){let n=this.domStorage_.getItem(this.prefixedName_(t));return n==null?null:ba(n)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}};var V1=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,n){n==null?delete this.cache_[t]:this.cache_[t]=n}get(t){return Ur(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}};var cS=function(e){try{if(typeof window<"u"&&typeof window[e]<"u"){let t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new B1(t)}}catch{}return new V1},as=cS("localStorage"),U1=cS("sessionStorage");var Ta=new go("@firebase/database"),W8=function(){let e=1;return function(){return e++}}(),lS=function(e){let t=gx(e),n=new Rf;n.update(t);let r=n.digest();return Of.encodeByteArray(r)},Wl=function(...e){let t="";for(let n=0;n<e.length;n++){let r=e[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?t+=Wl.apply(null,r):typeof r=="object"?t+=jt(r):t+=r,t+=" "}return t},cs=null,Rx=!0,G8=function(e,t){Y(!t||e===!0||e===!1,"Can't turn on custom loggers persistently."),e===!0?(Ta.logLevel=gt.VERBOSE,cs=Ta.log.bind(Ta),t&&U1.set("logging_enabled",!0)):typeof e=="function"?cs=e:(cs=null,U1.remove("logging_enabled"))},pn=function(...e){if(Rx===!0&&(Rx=!1,cs===null&&U1.get("logging_enabled")===!0&&G8(!0)),cs){let t=Wl.apply(null,e);cs(t)}},Gl=function(e){return function(...t){pn(e,...t)}},j1=function(...e){let t="FIREBASE INTERNAL ERROR: "+Wl(...e);Ta.error(t)},Bi=function(...e){let t=`FIREBASE FATAL ERROR: ${Wl(...e)}`;throw Ta.error(t),new Error(t)},Dn=function(...e){let t="FIREBASE WARNING: "+Wl(...e);Ta.warn(t)},$8=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Dn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Py=function(e){return typeof e=="number"&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},q8=function(e){if(ii()||document.readyState==="complete")e();else{let t=!1,n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}t||(t=!0,e())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Na="[MIN_NAME]",ls="[MAX_NAME]",ds=function(e,t){if(e===t)return 0;if(e===Na||t===ls)return-1;if(t===Na||e===ls)return 1;{let n=Ox(e),r=Ox(t);return n!==null?r!==null?n-r===0?e.length-t.length:n-r:-1:r!==null?1:e<t?-1:1}},Y8=function(e,t){return e===t?0:e<t?-1:1},xl=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+jt(t))},ky=function(e){if(typeof e!="object"||e===null)return jt(e);let t=[];for(let r in e)t.push(r);t.sort();let n="{";for(let r=0;r<t.length;r++)r!==0&&(n+=","),n+=jt(t[r]),n+=":",n+=ky(e[t[r]]);return n+="}",n},uS=function(e,t){let n=e.length;if(n<=t)return[e];let r=[];for(let i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function gn(e,t){for(let n in e)e.hasOwnProperty(n)&&t(n,e[n])}var dS=function(e){Y(!Py(e),"Invalid JSON number");let t=11,n=52,r=(1<<t-1)-1,i,s,l,h,g;e===0?(s=0,l=0,i=1/e===-1/0?1:0):(i=e<0,e=Math.abs(e),e>=Math.pow(2,1-r)?(h=Math.min(Math.floor(Math.log(e)/Math.LN2),r),s=h+r,l=Math.round(e*Math.pow(2,n-h)-Math.pow(2,n))):(s=0,l=Math.round(e/Math.pow(2,1-r-n))));let m=[];for(g=n;g;g-=1)m.push(l%2?1:0),l=Math.floor(l/2);for(g=t;g;g-=1)m.push(s%2?1:0),s=Math.floor(s/2);m.push(i?1:0),m.reverse();let C=m.join(""),E="";for(g=0;g<64;g+=8){let x=parseInt(C.substr(g,8),2).toString(16);x.length===1&&(x="0"+x),E=E+x}return E.toLowerCase()},Z8=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},X8=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function Q8(e,t){let n="Unknown Error";e==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":e==="permission_denied"?n="Client doesn't have permission to access the desired data.":e==="unavailable"&&(n="The service is unavailable");let r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}var K8=new RegExp("^-?(0*)\\d{1,10}$"),J8=-2147483648,e4=2147483647,Ox=function(e){if(K8.test(e)){let t=Number(e);if(t>=J8&&t<=e4)return t}return null},Va=function(e){try{e()}catch(t){setTimeout(()=>{let n=t.stack||"";throw Dn("Exception was thrown by user callback.",n),t},Math.floor(0))}},t4=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Ml=function(e,t){let n=setTimeout(e,t);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};var H1=class{constructor(t,n){this.appName_=t,this.appCheckProvider=n,this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(r=>this.appCheck=r)}getToken(t){return this.appCheck?this.appCheck.getToken(t):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(n,r):n(null)},0)})}addTokenChangeListener(t){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(t))}notifyForInvalidToken(){Dn(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var z1=class{constructor(t,n,r){this.appName_=t,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(n=>n&&n.code==="auth/token-not-initialized"?(pn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(n,r):n(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(n=>n.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(n=>n.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Dn(t)}},Nl=(()=>{class e{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}e.OWNER="owner";return e})(),Uf="5",fS="v",hS="s",pS="r",gS="f",mS=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,yS="ls",_S="p",W1="ac",vS="websocket",wS="long_polling";var jf=class{constructor(t,n,r,i,s=!1,l="",h=!1,g=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=l,this.includeNamespaceInQueryParams=h,this.isUsingEmulator=g,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=as.get("host:"+t)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&as.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){let t=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${t}${this.host}/${n}`}};function n4(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams}function CS(e,t,n){Y(typeof t=="string","typeof type must == string"),Y(typeof n=="object","typeof params must == object");let r;if(t===vS)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else if(t===wS)r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+t);n4(e)&&(n.ns=e.namespace);let i=[];return gn(n,(s,l)=>{i.push(s+"="+l)}),r+i.join("&")}var G1=class{constructor(){this.counters_={}}incrementCounter(t,n=1){Ur(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=n}get(){return tx(this.counters_)}};var N1={},R1={};function Ly(e){let t=e.toString();return N1[t]||(N1[t]=new G1),N1[t]}function r4(e,t){let n=e.toString();return R1[n]||(R1[n]=t()),R1[n]}var $1=class{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,n){this.closeAfterResponse=t,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,n){for(this.pendingResponses[t]=n;this.pendingResponses[this.currentResponseNum];){let r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Va(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var Px="start",i4="close",o4="pLPCommand",s4="pRTLPCB",ES="id",IS="pw",bS="ser",a4="cb",c4="seg",l4="ts",u4="d",d4="dframe",xS=1870,SS=30,f4=xS-SS,h4=25e3,p4=3e4,q1=class e{constructor(t,n,r,i,s,l,h){this.connId=t,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=l,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Gl(t),this.stats_=Ly(n),this.urlFn=g=>(this.appCheckToken&&(g[W1]=this.appCheckToken),CS(n,wS,g))}open(t,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new $1(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(p4)),q8(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Y1((...s)=>{let[l,h,g,m,C]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,l===Px)this.id=h,this.password=g;else if(l===i4)h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+l)},(...s)=>{let[l,h]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(l,h)},()=>{this.onClosed_()},this.urlFn);let r={};r[Px]="t",r[bS]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[a4]=this.scriptTagHolder.uniqueCallbackIdentifier),r[fS]=Uf,this.transportSessionId&&(r[hS]=this.transportSessionId),this.lastSessionId&&(r[yS]=this.lastSessionId),this.applicationId&&(r[_S]=this.applicationId),this.appCheckToken&&(r[W1]=this.appCheckToken),typeof location<"u"&&location.hostname&&mS.test(location.hostname)&&(r[pS]=gS);let i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){e.forceAllow_=!0}static forceDisallow(){e.forceDisallow_=!0}static isAvailable(){return ii()?!1:e.forceAllow_?!0:!e.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!Z8()&&!X8()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){let n=jt(t);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);let r=h1(n),i=uS(r,f4);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(t,n){if(ii())return;this.myDisconnFrame=document.createElement("iframe");let r={};r[d4]="t",r[ES]=t,r[IS]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){let n=jt(t).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}},Y1=class e{constructor(t,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,ii())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=W8(),window[o4+this.uniqueCallbackIdentifier]=t,window[s4+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');let l="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(h){pn("frame writing exception"),h.stack&&pn(h.stack),pn(h)}}}static createIFrame_(){let t=document.createElement("iframe");if(t.style.display="none",document.body){document.body.appendChild(t);try{t.contentWindow.document||pn("No IE domain setting required")}catch{let r=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,n){for(this.myID=t,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let t={};t[ES]=this.myID,t[IS]=this.myPW,t[bS]=this.currentSerial;let n=this.urlFn(t),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+SS+r.length<=xS;){let l=this.pendingSegs.shift();r=r+"&"+c4+i+"="+l.seg+"&"+l4+i+"="+l.ts+"&"+u4+i+"="+l.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(t,n,r){this.pendingSegs.push({seg:t,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(t,n){this.outstandingRequests.add(n);let r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(h4)),s=()=>{clearTimeout(i),r()};this.addTag(t,s)}addTag(t,n){ii()?this.doNodeLongPoll(t,n):setTimeout(()=>{try{if(!this.sendNewPolls)return;let r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){let i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{pn("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}};var g4=16384,m4=45e3,Hf=null;typeof MozWebSocket<"u"?Hf=MozWebSocket:typeof WebSocket<"u"&&(Hf=WebSocket);var Sl=(()=>{class e{constructor(n,r,i,s,l,h,g){this.connId=n,this.applicationId=i,this.appCheckToken=s,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Gl(this.connId),this.stats_=Ly(r),this.connURL=e.connectionURL_(r,h,g,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(n,r,i,s,l){let h={};return h[fS]=Uf,!ii()&&typeof location<"u"&&location.hostname&&mS.test(location.hostname)&&(h[pS]=gS),r&&(h[hS]=r),i&&(h[yS]=i),s&&(h[W1]=s),l&&(h[_S]=l),CS(n,vS,h)}open(n,r){this.onDisconnect=r,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,as.set("previous_websocket_failure",!0);try{let i;if(ii()){let s=this.nodeAdmin?"AdminNode":"Node";i={headers:{"User-Agent":`Firebase/${Uf}/${Oy}/${process.platform}/${s}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);let l=process.env,h=this.connURL.indexOf("wss://")===0?l.HTTPS_PROXY||l.https_proxy:l.HTTP_PROXY||l.http_proxy;h&&(i.proxy={origin:h})}this.mySock=new Hf(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){e.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){let r=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(r);i&&i.length>1&&parseFloat(i[1])<4.4&&(n=!0)}return!n&&Hf!==null&&!e.forceDisallow_}static previouslyFailed(){return as.isInMemoryStorage||as.get("previous_websocket_failure")===!0}markConnectionHealthy(){as.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){let r=this.frames.join("");this.frames=null;let i=ba(r);this.onMessage(i)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if(Y(this.frames===null,"We already have a frame buffer"),n.length<=6){let r=Number(n);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(this.mySock===null)return;let r=n.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{let i=this.extractFrameCount_(r);i!==null&&this.appendFrame_(i)}}send(n){this.resetKeepAlive();let r=jt(n);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);let i=uS(r,g4);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(m4))}sendString_(n){try{this.mySock.send(n)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}e.responsesRequiredToBeHealthy=2,e.healthyTimeout=3e4;return e})(),y4=(()=>{class e{constructor(n){this.initTransports_(n)}static get ALL_TRANSPORTS(){return[q1,Sl]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(n){let r=Sl&&Sl.isAvailable(),i=r&&!Sl.previouslyFailed();if(n.webSocketOnly&&(r||Dn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Sl];else{let s=this.transports_=[];for(let l of e.ALL_TRANSPORTS)l&&l.isAvailable()&&s.push(l);e.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}e.globalTransportInitialized_=!1;return e})(),_4=6e4,v4=5e3,w4=10*1024,C4=100*1024,O1="t",kx="d",E4="s",Lx="r",I4="e",Fx="o",Bx="a",Vx="n",Ux="p",b4="h",Z1=class{constructor(t,n,r,i,s,l,h,g,m,C){this.id=t,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=l,this.onReady_=h,this.onDisconnect_=g,this.onKill_=m,this.lastSessionId=C,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Gl("c:"+this.id+":"),this.transportManager_=new y4(n),this.log_("Connection created"),this.start_()}start_(){let t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));let i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=Ml(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>C4?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>w4?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return n=>{t===this.conn_?this.onConnectionLost_(n):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return n=>{this.state_!==2&&(t===this.rx_?this.onPrimaryMessageReceived_(n):t===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(t){let n={t:"d",d:t};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if(O1 in t){let n=t[O1];n===Bx?this.upgradeIfSecondaryHealthy_():n===Lx?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===Fx&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){let n=xl("t",t),r=xl("d",t);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Ux,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Bx,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Vx,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){let n=xl("t",t),r=xl("d",t);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){let n=xl(O1,t);if(kx in t){let r=t[kx];if(n===b4){let i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===Vx){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===E4?this.onConnectionShutdown_(r):n===Lx?this.onReset_(r):n===I4?j1("Server Error: "+r):n===Fx?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):j1("Unknown control packet command: "+n)}}onHandshake_(t){let n=t.ts,r=t.v,i=t.h;this.sessionId=t.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Uf!==r&&Dn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Ml(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(_4))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,n){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Ml(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(v4))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Ux,d:{}}}))}onSecondaryConnectionLost_(){let t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,!t&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(as.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(t)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var zf=class{put(t,n,r,i){}merge(t,n,r,i){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,n,r){}onDisconnectMerge(t,n,r){}onDisconnectCancel(t,n){}reportStats(t){}};var Wf=class{constructor(t){this.allowedEvents_=t,this.listeners_={},Y(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...n){if(Array.isArray(this.listeners_[t])){let r=[...this.listeners_[t]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(t,n,r){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:n,context:r});let i=this.getInitialEvent(t);i&&n.apply(r,i)}off(t,n,r){this.validateEventType_(t);let i=this.listeners_[t]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(t){Y(this.allowedEvents_.find(n=>n===t),"Unknown event: "+t)}};var Gf=class e extends Wf{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!yl()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new e}getInitialEvent(t){return Y(t==="online","Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}};var jx=32,Hx=768,ut=class{constructor(t,n){if(n===void 0){this.pieces_=t.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}toString(){let t="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(t+="/"+this.pieces_[n]);return t||"/"}};function et(){return new ut("")}function Ue(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function Co(e){return e.pieces_.length-e.pieceNum_}function It(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new ut(e.pieces_,t)}function Fy(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function x4(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)e.pieces_[n]!==""&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}function kl(e,t=0){return e.pieces_.slice(e.pieceNum_+t)}function AS(e){if(e.pieceNum_>=e.pieces_.length)return null;let t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new ut(t,0)}function Rt(e,t){let n=[];for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof ut)for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else{let r=t.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new ut(n,0)}function We(e){return e.pieceNum_>=e.pieces_.length}function An(e,t){let n=Ue(e),r=Ue(t);if(n===null)return t;if(n===r)return An(It(e),It(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function S4(e,t){let n=kl(e,0),r=kl(t,0);for(let i=0;i<n.length&&i<r.length;i++){let s=ds(n[i],r[i]);if(s!==0)return s}return n.length===r.length?0:n.length<r.length?-1:1}function By(e,t){if(Co(e)!==Co(t))return!1;for(let n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function gr(e,t){let n=e.pieceNum_,r=t.pieceNum_;if(Co(e)>Co(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}var X1=class{constructor(t,n){this.errorPrefix_=n,this.parts_=kl(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=El(this.parts_[r]);DS(this)}};function A4(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=El(t),DS(e)}function D4(e){let t=e.parts_.pop();e.byteLength_-=El(t),e.parts_.length>0&&(e.byteLength_-=1)}function DS(e){if(e.byteLength_>Hx)throw new Error(e.errorPrefix_+"has a key path longer than "+Hx+" bytes ("+e.byteLength_+").");if(e.parts_.length>jx)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+jx+") or object contains a cycle "+ss(e))}function ss(e){return e.parts_.length===0?"":"in property '"+e.parts_.join(".")+"'"}var Q1=class e extends Wf{constructor(){super(["visible"]);let t,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{let r=!document[t];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new e}getInitialEvent(t){return Y(t==="visible","Unknown event type: "+t),[this.visible_]}};var Al=1e3,T4=60*5*1e3,zx=30*1e3,M4=1.3,N4=3e4,R4="server_kill",Wx=3,Vy=(()=>{class e extends zf{constructor(n,r,i,s,l,h,g,m){if(super(),this.repoInfo_=n,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=l,this.authTokenProvider_=h,this.appCheckTokenProvider_=g,this.authOverride_=m,this.id=e.nextPersistentConnectionId_++,this.log_=Gl("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Al,this.maxReconnectDelay_=T4,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,m&&!ii())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Q1.getInstance().on("visible",this.onVisible_,this),n.host.indexOf("fblocal")===-1&&Gf.getInstance().on("online",this.onOnline_,this)}sendRequest(n,r,i){let s=++this.requestNumber_,l={r:s,a:n,b:r};this.log_(jt(l)),Y(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),i&&(this.requestCBHash_[s]=i)}get(n){this.initConnection_();let r=new ki,s={action:"g",request:{p:n._path.toString(),q:n._queryObject},onComplete:h=>{let g=h.d;h.s==="ok"?r.resolve(g):r.reject(g)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;let l=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(l),r.promise}listen(n,r,i,s){this.initConnection_();let l=n._queryIdentifier,h=n._path.toString();this.log_("Listen called for "+h+" "+l),this.listens.has(h)||this.listens.set(h,new Map),Y(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Y(!this.listens.get(h).has(l),"listen() called twice for same path/queryId.");let g={onComplete:s,hashFn:r,query:n,tag:i};this.listens.get(h).set(l,g),this.connected_&&this.sendListen_(g)}sendGet_(n){let r=this.outstandingGets_[n];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(n){let r=n.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);let l={p:i},h="q";n.tag&&(l.q=r._queryObject,l.t=n.tag),l.h=n.hashFn(),this.sendRequest(h,l,g=>{let m=g.d,C=g.s;e.warnOnListenWarnings_(m,r),(this.listens.get(i)&&this.listens.get(i).get(s))===n&&(this.log_("listen response",g),C!=="ok"&&this.removeListen_(i,s),n.onComplete&&n.onComplete(C,m))})}static warnOnListenWarnings_(n,r){if(n&&typeof n=="object"&&Ur(n,"w")){let i=is(n,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){let s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',l=r._path.toString();Dn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&n.length===40||hx(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=zx)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let n=this.authToken_,r=fx(n)?"auth":"gauth",i={cred:n};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{let l=s.s,h=s.d||"error";this.authToken_===n&&(l==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,h))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{let r=n.s,i=n.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(n,r){let i=n._path.toString(),s=n._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),Y(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,n._queryObject,r)}sendUnlisten_(n,r,i,s){this.log_("Unlisten on "+n+" for "+r);let l={p:n},h="n";s&&(l.q=i,l.t=s),this.sendRequest(h,l)}onDisconnectPut(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:r,onComplete:i})}onDisconnectMerge(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:r,onComplete:i})}onDisconnectCancel(n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(n,r,i,s){let l={p:r,d:i};this.log_("onDisconnect "+n,l),this.sendRequest(n,l,h=>{s&&setTimeout(()=>{s(h.s,h.d)},Math.floor(0))})}put(n,r,i,s){this.putInternal("p",n,r,i,s)}merge(n,r,i,s){this.putInternal("m",n,r,i,s)}putInternal(n,r,i,s,l){this.initConnection_();let h={p:r,d:i};l!==void 0&&(h.h=l),this.outstandingPuts_.push({action:n,request:h,onComplete:s}),this.outstandingPutCount_++;let g=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(g):this.log_("Buffering put: "+r)}sendPut_(n){let r=this.outstandingPuts_[n].action,i=this.outstandingPuts_[n].request,s=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(r,i,l=>{this.log_(r+" response",l),delete this.outstandingPuts_[n],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(l.s,l.d)})}reportStats(n){if(this.connected_){let r={c:n};this.log_("reportStats",r),this.sendRequest("s",r,i=>{if(i.s!=="ok"){let l=i.d;this.log_("reportStats","Error sending stats: "+l)}})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+jt(n));let r=n.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,r){this.log_("handleServerMessage",n,r),n==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):n==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):n==="c"?this.onListenRevoked_(r.p,r.q):n==="ac"?this.onAuthRevoked_(r.s,r.d):n==="apc"?this.onAppCheckRevoked_(r.s,r.d):n==="sd"?this.onSecurityDebugPacket_(r):j1("Unrecognized action received from server: "+jt(n)+`
Are you using the latest client?`)}onReady_(n,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(n),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){Y(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Al,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=Al,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>N4&&(this.reconnectDelay_=Al),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let n=new Date().getTime()-this.lastConnectionAttemptTime_,r=Math.max(0,this.reconnectDelay_-n);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*M4)}this.onConnectStatus_(!1)}establishConnection_(){return X(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+e.nextConnectionId_++,l=this.lastSessionId,h=!1,g=null,m=function(){g?g.close():(h=!0,i())},C=function(x){Y(g,"sendRequest call when we're not connected not allowed."),g.sendRequest(x)};this.realtime_={close:m,sendRequest:C};let E=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[x,D]=yield Promise.all([this.authTokenProvider_.getToken(E),this.appCheckTokenProvider_.getToken(E)]);h?pn("getToken() completed but was canceled"):(pn("getToken() completed. Creating connection."),this.authToken_=x&&x.accessToken,this.appCheckToken_=D&&D.token,g=new Z1(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,n,r,i,N=>{Dn(N+" ("+this.repoInfo_.toString()+")"),this.interrupt(R4)},l))}catch(x){this.log_("Failed to get token: "+x),h||(this.repoInfo_.nodeAdmin&&Dn(x),m())}}})}interrupt(n){pn("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){pn("Resuming connection for reason: "+n),delete this.interruptReasons_[n],kf(this.interruptReasons_)&&(this.reconnectDelay_=Al,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){let r=n-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){let r=this.outstandingPuts_[n];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(n,r){let i;r?i=r.map(l=>ky(l)).join("$"):i="default";let s=this.removeListen_(n,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(n,r){let i=new ut(n).toString(),s;if(this.listens.has(i)){let l=this.listens.get(i);s=l.get(r),l.delete(r),l.size===0&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(n,r){pn("Auth token revoked: "+n+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(n==="invalid_token"||n==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Wx&&(this.reconnectDelay_=zx,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,r){pn("App check token revoked: "+n+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(n==="invalid_token"||n==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Wx&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let n of this.listens.values())for(let r of n.values())this.sendListen_(r);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){let n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){let n={},r="js";ii()&&(this.repoInfo_.nodeAdmin?r="admin_node":r="node"),n["sdk."+r+"."+Oy.replace(/\./g,"-")]=1,yl()?n["framework.cordova"]=1:Pf()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){let n=Gf.getInstance().currentlyOnline();return kf(this.interruptReasons_)&&n}}e.nextPersistentConnectionId_=0,e.nextConnectionId_=0;return e})(),je=class e{constructor(t,n){this.name=t,this.node=n}static Wrap(t,n){return new e(t,n)}};var Ra=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,n){let r=new je(Na,t),i=new je(Na,n);return this.compare(r,i)!==0}minPost(){return je.MIN}};var Vf,$f=class extends Ra{static get __EMPTY_NODE(){return Vf}static set __EMPTY_NODE(t){Vf=t}compare(t,n){return ds(t.name,n.name)}isDefinedOn(t){throw rs("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,n){return!1}minPost(){return je.MIN}maxPost(){return new je(ls,Vf)}makePost(t,n){return Y(typeof t=="string","KeyIndex indexValue must always be a string."),new je(t,Vf)}toString(){return".key"}},Ma=new $f;var Da=class{constructor(t,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let l=1;for(;!t.isEmpty();)if(t=t,l=n?r(t.key,n):1,i&&(l*=-1),l<0)this.isReverse_?t=t.left:t=t.right;else if(l===0){this.nodeStack_.push(t);break}else this.nodeStack_.push(t),this.isReverse_?t=t.right:t=t.left}getNext(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(t.key,t.value):n={key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}},jr=(()=>{class e{constructor(n,r,i,s,l){this.key=n,this.value=r,this.color=i??e.RED,this.left=s??mr.EMPTY_NODE,this.right=l??mr.EMPTY_NODE}copy(n,r,i,s,l){return new e(n??this.key,r??this.value,i??this.color,s??this.left,l??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,r,i){let s=this,l=i(n,s.key);return l<0?s=s.copy(null,null,null,s.left.insert(n,r,i),null):l===0?s=s.copy(null,r,null,null,null):s=s.copy(null,null,null,null,s.right.insert(n,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return mr.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,r){let i,s;if(i=this,r(n,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(n,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),r(n,i.key)===0){if(i.right.isEmpty())return mr.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(n,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){let n=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){let n=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){let n=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,r)}checkMaxDepth_(){let n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}return e.RED=!0,e.BLACK=!1,e})(),K1=class{copy(t,n,r,i,s){return this}insert(t,n,r){return new jr(t,n,null)}remove(t,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},mr=class e{constructor(t,n=e.EMPTY_NODE){this.comparator_=t,this.root_=n}insert(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,jr.BLACK,null,null))}remove(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,jr.BLACK,null,null))}get(t){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(t,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(t){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(t,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new Da(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,n){return new Da(this.root_,t,this.comparator_,!1,n)}getReverseIteratorFrom(t,n){return new Da(this.root_,t,this.comparator_,!0,n)}getReverseIterator(t){return new Da(this.root_,null,this.comparator_,!0,t)}};mr.EMPTY_NODE=new K1;function O4(e,t){return ds(e.name,t.name)}function Uy(e,t){return ds(e,t)}var J1;function P4(e){J1=e}var TS=function(e){return typeof e=="number"?"number:"+dS(e):"string:"+e},MS=function(e){if(e.isLeafNode()){let t=e.val();Y(typeof t=="string"||typeof t=="number"||typeof t=="object"&&Ur(t,".sv"),"Priority must be a string or number.")}else Y(e===J1||e.isEmpty(),"priority of unexpected type.");Y(e===J1||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var Gx,Oa=(()=>{class e{constructor(n,r=e.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=r,this.lazyHash_=null,Y(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),MS(this.priorityNode_)}static set __childrenNodeConstructor(n){Gx=n}static get __childrenNodeConstructor(){return Gx}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new e(this.value_,n)}getImmediateChild(n){return n===".priority"?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return We(n)?this:Ue(n)===".priority"?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,r){return null}updateImmediateChild(n,r){return n===".priority"?this.updatePriority(r):r.isEmpty()&&n!==".priority"?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,r).updatePriority(this.priorityNode_)}updateChild(n,r){let i=Ue(n);return i===null?r:r.isEmpty()&&i!==".priority"?this:(Y(i!==".priority"||Co(n)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(It(n),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,r){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+TS(this.priorityNode_.val())+":");let r=typeof this.value_;n+=r+":",r==="number"?n+=dS(this.value_):n+=this.value_,this.lazyHash_=lS(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===e.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof e.__childrenNodeConstructor?-1:(Y(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){let r=typeof n.value_,i=typeof this.value_,s=e.VALUE_TYPE_ORDER.indexOf(r),l=e.VALUE_TYPE_ORDER.indexOf(i);return Y(s>=0,"Unknown leaf type: "+r),Y(l>=0,"Unknown leaf type: "+i),s===l?i==="object"?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:l-s}withIndex(){return this}isIndexed(){return!0}equals(n){if(n===this)return!0;if(n.isLeafNode()){let r=n;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}e.VALUE_TYPE_ORDER=["object","boolean","number","string"];return e})(),NS,RS;function k4(e){NS=e}function L4(e){RS=e}var ey=class extends Ra{compare(t,n){let r=t.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?ds(t.name,n.name):s}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,n){return!t.getPriority().equals(n.getPriority())}minPost(){return je.MIN}maxPost(){return new je(ls,new Oa("[PRIORITY-POST]",RS))}makePost(t,n){let r=NS(t);return new je(n,new Oa("[PRIORITY-POST]",r))}toString(){return".priority"}},Ot=new ey;var F4=Math.log(2),ty=class{constructor(t){let n=s=>parseInt(Math.log(s)/F4,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(t+1),this.current_=this.count-1;let i=r(this.count);this.bits_=t+1&i}nextBitIsOne(){let t=!(this.bits_&1<<this.current_);return this.current_--,t}},qf=function(e,t,n,r){e.sort(t);let i=function(g,m){let C=m-g,E,x;if(C===0)return null;if(C===1)return E=e[g],x=n?n(E):E,new jr(x,E.node,jr.BLACK,null,null);{let D=parseInt(C/2,10)+g,N=i(g,D),U=i(D+1,m);return E=e[D],x=n?n(E):E,new jr(x,E.node,jr.BLACK,N,U)}},s=function(g){let m=null,C=null,E=e.length,x=function(N,U){let G=E-N,z=E;E-=N;let ne=i(G+1,z),He=e[G],le=n?n(He):He;D(new jr(le,He.node,U,null,ne))},D=function(N){m?(m.left=N,m=N):(C=N,m=N)};for(let N=0;N<g.count;++N){let U=g.nextBitIsOne(),G=Math.pow(2,g.count-(N+1));U?x(G,jr.BLACK):(x(G,jr.BLACK),x(G,jr.RED))}return C},l=new ty(e.length),h=s(l);return new mr(r||t,h)};var P1,Aa={},Pa=class e{constructor(t,n){this.indexes_=t,this.indexSet_=n}static get Default(){return Y(Aa&&Ot,"ChildrenNode.ts has not been loaded"),P1=P1||new e({".priority":Aa},{".priority":Ot}),P1}get(t){let n=is(this.indexes_,t);if(!n)throw new Error("No index defined for "+t);return n instanceof mr?n:null}hasIndex(t){return Ur(this.indexSet_,t.toString())}addIndex(t,n){Y(t!==Ma,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let r=[],i=!1,s=n.getIterator(je.Wrap),l=s.getNext();for(;l;)i=i||t.isDefinedOn(l.node),r.push(l),l=s.getNext();let h;i?h=qf(r,t.getCompare()):h=Aa;let g=t.toString(),m=Object.assign({},this.indexSet_);m[g]=t;let C=Object.assign({},this.indexes_);return C[g]=h,new e(C,m)}addToIndexes(t,n){let r=_l(this.indexes_,(i,s)=>{let l=is(this.indexSet_,s);if(Y(l,"Missing index implementation for "+s),i===Aa)if(l.isDefinedOn(t.node)){let h=[],g=n.getIterator(je.Wrap),m=g.getNext();for(;m;)m.name!==t.name&&h.push(m),m=g.getNext();return h.push(t),qf(h,l.getCompare())}else return Aa;else{let h=n.get(t.name),g=i;return h&&(g=g.remove(new je(t.name,h))),g.insert(t,t.node)}});return new e(r,this.indexSet_)}removeFromIndexes(t,n){let r=_l(this.indexes_,i=>{if(i===Aa)return i;{let s=n.get(t.name);return s?i.remove(new je(t.name,s)):i}});return new e(r,this.indexSet_)}};var Dl,Te=(()=>{class e{constructor(n,r,i){this.children_=n,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&MS(this.priorityNode_),this.children_.isEmpty()&&Y(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Dl||(Dl=new e(new mr(Uy),null,Pa.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Dl}updatePriority(n){return this.children_.isEmpty()?this:new e(this.children_,n,this.indexMap_)}getImmediateChild(n){if(n===".priority")return this.getPriority();{let r=this.children_.get(n);return r===null?Dl:r}}getChild(n){let r=Ue(n);return r===null?this:this.getImmediateChild(r).getChild(It(n))}hasChild(n){return this.children_.get(n)!==null}updateImmediateChild(n,r){if(Y(r,"We should always be passing snapshot nodes"),n===".priority")return this.updatePriority(r);{let i=new je(n,r),s,l;r.isEmpty()?(s=this.children_.remove(n),l=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(n,r),l=this.indexMap_.addToIndexes(i,this.children_));let h=s.isEmpty()?Dl:this.priorityNode_;return new e(s,h,l)}}updateChild(n,r){let i=Ue(n);if(i===null)return r;{Y(Ue(n)!==".priority"||Co(n)===1,".priority must be the last token in a path");let s=this.getImmediateChild(i).updateChild(It(n),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;let r={},i=0,s=0,l=!0;if(this.forEachChild(Ot,(h,g)=>{r[h]=g.val(n),i++,l&&e.INTEGER_REGEXP_.test(h)?s=Math.max(s,Number(h)):l=!1}),!n&&l&&s<2*i){let h=[];for(let g in r)h[g]=r[g];return h}else return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let n="";this.getPriority().isEmpty()||(n+="priority:"+TS(this.getPriority().val())+":"),this.forEachChild(Ot,(r,i)=>{let s=i.hash();s!==""&&(n+=":"+r+":"+s)}),this.lazyHash_=n===""?"":lS(n)}return this.lazyHash_}getPredecessorChildName(n,r,i){let s=this.resolveIndex_(i);if(s){let l=s.getPredecessorKey(new je(n,r));return l?l.name:null}else return this.children_.getPredecessorKey(n)}getFirstChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(n){let r=this.getFirstChildName(n);return r?new je(r,this.children_.get(r)):null}getLastChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(n){let r=this.getLastChildName(n);return r?new je(r,this.children_.get(r)):null}forEachChild(n,r){let i=this.resolveIndex_(n);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(n,s=>s);{let s=this.children_.getIteratorFrom(n.name,je.Wrap),l=s.peek();for(;l!=null&&r.compare(l,n)<0;)s.getNext(),l=s.peek();return s}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(n,s=>s);{let s=this.children_.getReverseIteratorFrom(n.name,je.Wrap),l=s.peek();for(;l!=null&&r.compare(l,n)>0;)s.getNext(),l=s.peek();return s}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===$l?-1:0}withIndex(n){if(n===Ma||this.indexMap_.hasIndex(n))return this;{let r=this.indexMap_.addIndex(n,this.children_);return new e(this.children_,this.priorityNode_,r)}}isIndexed(n){return n===Ma||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{let r=n;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){let i=this.getIterator(Ot),s=r.getIterator(Ot),l=i.getNext(),h=s.getNext();for(;l&&h;){if(l.name!==h.name||!l.node.equals(h.node))return!1;l=i.getNext(),h=s.getNext()}return l===null&&h===null}else return!1;else return!1}}resolveIndex_(n){return n===Ma?null:this.indexMap_.get(n.toString())}}return e.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,e})(),ny=class extends Te{constructor(){super(new mr(Uy),Te.EMPTY_NODE,Pa.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return Te.EMPTY_NODE}isEmpty(){return!1}},$l=new ny;Object.defineProperties(je,{MIN:{value:new je(Na,Te.EMPTY_NODE)},MAX:{value:new je(ls,$l)}});$f.__EMPTY_NODE=Te.EMPTY_NODE;Oa.__childrenNodeConstructor=Te;P4($l);L4($l);var B4=!0;function Xt(e,t=null){if(e===null)return Te.EMPTY_NODE;if(typeof e=="object"&&".priority"in e&&(t=e[".priority"]),Y(t===null||typeof t=="string"||typeof t=="number"||typeof t=="object"&&".sv"in t,"Invalid priority type found: "+typeof t),typeof e=="object"&&".value"in e&&e[".value"]!==null&&(e=e[".value"]),typeof e!="object"||".sv"in e){let n=e;return new Oa(n,Xt(t))}if(!(e instanceof Array)&&B4){let n=[],r=!1;if(gn(e,(l,h)=>{if(l.substring(0,1)!=="."){let g=Xt(h);g.isEmpty()||(r=r||!g.getPriority().isEmpty(),n.push(new je(l,g)))}}),n.length===0)return Te.EMPTY_NODE;let s=qf(n,O4,l=>l.name,Uy);if(r){let l=qf(n,Ot.getCompare());return new Te(s,Xt(t),new Pa({".priority":l},{".priority":Ot}))}else return new Te(s,Xt(t),Pa.Default)}else{let n=Te.EMPTY_NODE;return gn(e,(r,i)=>{if(Ur(e,r)&&r.substring(0,1)!=="."){let s=Xt(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(Xt(t))}}k4(Xt);var ry=class extends Ra{constructor(t){super(),this.indexPath_=t,Y(!We(t)&&Ue(t)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,n){let r=this.extractChild(t.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?ds(t.name,n.name):s}makePost(t,n){let r=Xt(t),i=Te.EMPTY_NODE.updateChild(this.indexPath_,r);return new je(n,i)}maxPost(){let t=Te.EMPTY_NODE.updateChild(this.indexPath_,$l);return new je(ls,t)}toString(){return kl(this.indexPath_,0).join("/")}};var iy=class extends Ra{compare(t,n){let r=t.node.compareTo(n.node);return r===0?ds(t.name,n.name):r}isDefinedOn(t){return!0}indexedValueChanged(t,n){return!t.equals(n)}minPost(){return je.MIN}maxPost(){return je.MAX}makePost(t,n){let r=Xt(t);return new je(n,r)}toString(){return".value"}},V4=new iy;function OS(e){return{type:"value",snapshotNode:e}}function ka(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function Ll(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function Fl(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}function U4(e,t){return{type:"child_moved",snapshotNode:t,childName:e}}var Bl=class{constructor(t){this.index_=t}updateChild(t,n,r,i,s,l){Y(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");let h=t.getImmediateChild(n);return h.getChild(i).equals(r.getChild(i))&&h.isEmpty()===r.isEmpty()||(l!=null&&(r.isEmpty()?t.hasChild(n)?l.trackChildChange(Ll(n,h)):Y(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?l.trackChildChange(ka(n,r)):l.trackChildChange(Fl(n,r,h))),t.isLeafNode()&&r.isEmpty())?t:t.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(t,n,r){return r!=null&&(t.isLeafNode()||t.forEachChild(Ot,(i,s)=>{n.hasChild(i)||r.trackChildChange(Ll(i,s))}),n.isLeafNode()||n.forEachChild(Ot,(i,s)=>{if(t.hasChild(i)){let l=t.getImmediateChild(i);l.equals(s)||r.trackChildChange(Fl(i,s,l))}else r.trackChildChange(ka(i,s))})),n.withIndex(this.index_)}updatePriority(t,n){return t.isEmpty()?Te.EMPTY_NODE:t.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}};var Yf=class e{constructor(t){this.indexedFilter_=new Bl(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){let n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),t)<=0:this.index_.compare(this.getStartPost(),t)<0,r=this.endIsInclusive_?this.index_.compare(t,this.getEndPost())<=0:this.index_.compare(t,this.getEndPost())<0;return n&&r}updateChild(t,n,r,i,s,l){return this.matches(new je(n,r))||(r=Te.EMPTY_NODE),this.indexedFilter_.updateChild(t,n,r,i,s,l)}updateFullNode(t,n,r){n.isLeafNode()&&(n=Te.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(Te.EMPTY_NODE);let s=this;return n.forEachChild(Ot,(l,h)=>{s.matches(new je(l,h))||(i=i.updateImmediateChild(l,Te.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,i,r)}updatePriority(t,n){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){let n=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),n)}else return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){let n=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),n)}else return t.getIndex().maxPost()}};var oy=class{constructor(t){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{let r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{let r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new Yf(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft(),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}updateChild(t,n,r,i,s,l){return this.rangedFilter_.matches(new je(n,r))||(r=Te.EMPTY_NODE),t.getImmediateChild(n).equals(r)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,n,r,i,s,l):this.fullLimitUpdateChild_(t,n,r,s,l)}updateFullNode(t,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=Te.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=Te.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let l=0;for(;s.hasNext()&&l<this.limit_;){let h=s.getNext();if(this.withinDirectionalStart(h))if(this.withinDirectionalEnd(h))i=i.updateImmediateChild(h.name,h.node),l++;else break;else continue}}else{i=n.withIndex(this.index_),i=i.updatePriority(Te.EMPTY_NODE);let s;this.reverse_?s=i.getReverseIterator(this.index_):s=i.getIterator(this.index_);let l=0;for(;s.hasNext();){let h=s.getNext();l<this.limit_&&this.withinDirectionalStart(h)&&this.withinDirectionalEnd(h)?l++:i=i.updateImmediateChild(h.name,Te.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,i,r)}updatePriority(t,n){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,n,r,i,s){let l;if(this.reverse_){let E=this.index_.getCompare();l=(x,D)=>E(D,x)}else l=this.index_.getCompare();let h=t;Y(h.numChildren()===this.limit_,"");let g=new je(n,r),m=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),C=this.rangedFilter_.matches(g);if(h.hasChild(n)){let E=h.getImmediateChild(n),x=i.getChildAfterChild(this.index_,m,this.reverse_);for(;x!=null&&(x.name===n||h.hasChild(x.name));)x=i.getChildAfterChild(this.index_,x,this.reverse_);let D=x==null?1:l(x,g);if(C&&!r.isEmpty()&&D>=0)return s?.trackChildChange(Fl(n,r,E)),h.updateImmediateChild(n,r);{s?.trackChildChange(Ll(n,E));let U=h.updateImmediateChild(n,Te.EMPTY_NODE);return x!=null&&this.rangedFilter_.matches(x)?(s?.trackChildChange(ka(x.name,x.node)),U.updateImmediateChild(x.name,x.node)):U}}else return r.isEmpty()?t:C&&l(m,g)>=0?(s!=null&&(s.trackChildChange(Ll(m.name,m.node)),s.trackChildChange(ka(n,r))),h.updateImmediateChild(n,r).updateImmediateChild(m.name,Te.EMPTY_NODE)):t}};var sy=class e{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ot}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return Y(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Y(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Na}hasEnd(){return this.endSet_}getIndexEndValue(){return Y(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Y(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ls}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return Y(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Ot}copy(){let t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}};function j4(e){return e.loadsAllData()?new Bl(e.getIndex()):e.hasLimit()?new oy(e):new Yf(e)}function $x(e){let t={};if(e.isDefault())return t;let n;if(e.index_===Ot?n="$priority":e.index_===V4?n="$value":e.index_===Ma?n="$key":(Y(e.index_ instanceof ry,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=jt(n),e.startSet_){let r=e.startAfterSet_?"startAfter":"startAt";t[r]=jt(e.indexStartValue_),e.startNameSet_&&(t[r]+=","+jt(e.indexStartName_))}if(e.endSet_){let r=e.endBeforeSet_?"endBefore":"endAt";t[r]=jt(e.indexEndValue_),e.endNameSet_&&(t[r]+=","+jt(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function qx(e){let t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;n===""&&(e.isViewFromLeft()?n="l":n="r"),t.vf=n}return e.index_!==Ot&&(t.i=e.index_.toString()),t}var ay=class e extends zf{constructor(t,n,r,i){super(),this.repoInfo_=t,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Gl("p:rest:"),this.listens_={}}reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,n){return n!==void 0?"tag$"+n:(Y(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}listen(t,n,r,i){let s=t._path.toString();this.log_("Listen called for "+s+" "+t._queryIdentifier);let l=e.getListenId_(t,r),h={};this.listens_[l]=h;let g=$x(t._queryParams);this.restRequest_(s+".json",g,(m,C)=>{let E=C;if(m===404&&(E=null,m=null),m===null&&this.onDataUpdate_(s,E,!1,r),is(this.listens_,l)===h){let x;m?m===401?x="permission_denied":x="rest_error:"+m:x="ok",i(x,null)}})}unlisten(t,n){let r=e.getListenId_(t,n);delete this.listens_[r]}get(t){let n=$x(t._queryParams),r=t._path.toString(),i=new ki;return this.restRequest_(r+".json",n,(s,l)=>{let h=l;s===404&&(h=null,s=null),s===null?(this.onDataUpdate_(r,h,!1,null),i.resolve(h)):i.reject(new Error(h))}),i.promise}refreshAuthToken(t){}restRequest_(t,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);let l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+wl(n);this.log_("Sending REST request for "+l);let h=new XMLHttpRequest;h.onreadystatechange=()=>{if(r&&h.readyState===4){this.log_("REST Response for "+l+" received. status:",h.status,"response:",h.responseText);let g=null;if(h.status>=200&&h.status<300){try{g=ba(h.responseText)}catch{Dn("Failed to parse JSON response for "+l+": "+h.responseText)}r(null,g)}else h.status!==401&&h.status!==404&&Dn("Got unsuccessful REST response for "+l+" Status: "+h.status),r(h.status);r=null}},h.open("GET",l,!0),h.send()})}};var cy=class{constructor(){this.rootNode_=Te.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,n){this.rootNode_=this.rootNode_.updateChild(t,n)}};function Zf(){return{value:null,children:new Map}}function PS(e,t,n){if(We(t))e.value=n,e.children.clear();else if(e.value!==null)e.value=e.value.updateChild(t,n);else{let r=Ue(t);e.children.has(r)||e.children.set(r,Zf());let i=e.children.get(r);t=It(t),PS(i,t,n)}}function ly(e,t,n){e.value!==null?n(t,e.value):H4(e,(r,i)=>{let s=new ut(t.toString()+"/"+r);ly(i,s,n)})}function H4(e,t){e.children.forEach((n,r)=>{t(r,n)})}var uy=class{constructor(t){this.collection_=t,this.last_=null}get(){let t=this.collection_.get(),n=Object.assign({},t);return this.last_&&gn(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=t,n}};var Yx=10*1e3,z4=30*1e3,W4=5*60*1e3,dy=class{constructor(t,n){this.server_=n,this.statsToReport_={},this.statsListener_=new uy(t);let r=Yx+(z4-Yx)*Math.random();Ml(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){let t=this.statsListener_.get(),n={},r=!1;gn(t,(i,s)=>{s>0&&Ur(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),Ml(this.reportStats_.bind(this),Math.floor(Math.random()*2*W4))}};var si=function(e){return e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",e}(si||{});function jy(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Hy(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function zy(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}var fy=class e{constructor(t,n,r){this.path=t,this.affectedTree=n,this.revert=r,this.type=si.ACK_USER_WRITE,this.source=jy()}operationForChild(t){if(We(this.path)){if(this.affectedTree.value!=null)return Y(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let n=this.affectedTree.subtree(new ut(t));return new e(et(),n,this.revert)}}else return Y(Ue(this.path)===t,"operationForChild called for unrelated child."),new e(It(this.path),this.affectedTree,this.revert)}};var Xf=class e{constructor(t,n){this.source=t,this.path=n,this.type=si.LISTEN_COMPLETE}operationForChild(t){return We(this.path)?new e(this.source,et()):new e(this.source,It(this.path))}};var La=class e{constructor(t,n,r){this.source=t,this.path=n,this.snap=r,this.type=si.OVERWRITE}operationForChild(t){return We(this.path)?new e(this.source,et(),this.snap.getImmediateChild(t)):new e(this.source,It(this.path),this.snap)}};var Vl=class e{constructor(t,n,r){this.source=t,this.path=n,this.children=r,this.type=si.MERGE}operationForChild(t){if(We(this.path)){let n=this.children.subtree(new ut(t));return n.isEmpty()?null:n.value?new La(this.source,et(),n.value):new e(this.source,et(),n)}else return Y(Ue(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,It(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var ai=class{constructor(t,n,r){this.node_=t,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(We(t))return this.isFullyInitialized()&&!this.filtered_;let n=Ue(t);return this.isCompleteForChild(n)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}};var hy=class{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}};function G4(e,t,n,r){let i=[],s=[];return t.forEach(l=>{l.type==="child_changed"&&e.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&s.push(U4(l.childName,l.snapshotNode))}),Tl(e,i,"child_removed",t,r,n),Tl(e,i,"child_added",t,r,n),Tl(e,i,"child_moved",s,r,n),Tl(e,i,"child_changed",t,r,n),Tl(e,i,"value",t,r,n),i}function Tl(e,t,n,r,i,s){let l=r.filter(h=>h.type===n);l.sort((h,g)=>q4(e,h,g)),l.forEach(h=>{let g=$4(e,h,s);i.forEach(m=>{m.respondsTo(h.type)&&t.push(m.createEvent(g,e.query_))})})}function $4(e,t,n){return t.type==="value"||t.type==="child_removed"||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}function q4(e,t,n){if(t.childName==null||n.childName==null)throw rs("Should only compare child_ events.");let r=new je(t.childName,t.snapshotNode),i=new je(n.childName,n.snapshotNode);return e.index_.compare(r,i)}function dh(e,t){return{eventCache:e,serverCache:t}}function Rl(e,t,n,r){return dh(new ai(t,n,r),e.serverCache)}function kS(e,t,n,r){return dh(e.eventCache,new ai(t,n,r))}function Qf(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function us(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}var k1,Y4=()=>(k1||(k1=new mr(Y8)),k1),Tn=class e{constructor(t,n=Y4()){this.value=t,this.children=n}static fromObject(t){let n=new e(null);return gn(t,(r,i)=>{n=n.set(new ut(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,n){if(this.value!=null&&n(this.value))return{path:et(),value:this.value};if(We(t))return null;{let r=Ue(t),i=this.children.get(r);if(i!==null){let s=i.findRootMostMatchingPathAndValue(It(t),n);return s!=null?{path:Rt(new ut(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(We(t))return this;{let n=Ue(t),r=this.children.get(n);return r!==null?r.subtree(It(t)):new e(null)}}set(t,n){if(We(t))return new e(n,this.children);{let r=Ue(t),s=(this.children.get(r)||new e(null)).set(It(t),n),l=this.children.insert(r,s);return new e(this.value,l)}}remove(t){if(We(t))return this.children.isEmpty()?new e(null):new e(null,this.children);{let n=Ue(t),r=this.children.get(n);if(r){let i=r.remove(It(t)),s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new e(null):new e(this.value,s)}else return this}}get(t){if(We(t))return this.value;{let n=Ue(t),r=this.children.get(n);return r?r.get(It(t)):null}}setTree(t,n){if(We(t))return n;{let r=Ue(t),s=(this.children.get(r)||new e(null)).setTree(It(t),n),l;return s.isEmpty()?l=this.children.remove(r):l=this.children.insert(r,s),new e(this.value,l)}}fold(t){return this.fold_(et(),t)}fold_(t,n){let r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(Rt(t,i),n)}),n(t,this.value,r)}findOnPath(t,n){return this.findOnPath_(t,et(),n)}findOnPath_(t,n,r){let i=this.value?r(n,this.value):!1;if(i)return i;if(We(t))return null;{let s=Ue(t),l=this.children.get(s);return l?l.findOnPath_(It(t),Rt(n,s),r):null}}foreachOnPath(t,n){return this.foreachOnPath_(t,et(),n)}foreachOnPath_(t,n,r){if(We(t))return this;{this.value&&r(n,this.value);let i=Ue(t),s=this.children.get(i);return s?s.foreachOnPath_(It(t),Rt(n,i),r):new e(null)}}foreach(t){this.foreach_(et(),t)}foreach_(t,n){this.children.inorderTraversal((r,i)=>{i.foreach_(Rt(t,r),n)}),this.value&&n(t,this.value)}foreachChild(t){this.children.inorderTraversal((n,r)=>{r.value&&t(n,r.value)})}};var Hr=class e{constructor(t){this.writeTree_=t}static empty(){return new e(new Tn(null))}};function Ol(e,t,n){if(We(t))return new Hr(new Tn(n));{let r=e.writeTree_.findRootMostValueAndPath(t);if(r!=null){let i=r.path,s=r.value,l=An(i,t);return s=s.updateChild(l,n),new Hr(e.writeTree_.set(i,s))}else{let i=new Tn(n),s=e.writeTree_.setTree(t,i);return new Hr(s)}}}function py(e,t,n){let r=e;return gn(n,(i,s)=>{r=Ol(r,Rt(t,i),s)}),r}function Zx(e,t){if(We(t))return Hr.empty();{let n=e.writeTree_.setTree(t,new Tn(null));return new Hr(n)}}function gy(e,t){return fs(e,t)!=null}function fs(e,t){let n=e.writeTree_.findRootMostValueAndPath(t);return n!=null?e.writeTree_.get(n.path).getChild(An(n.path,t)):null}function Xx(e){let t=[],n=e.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Ot,(r,i)=>{t.push(new je(r,i))}):e.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&t.push(new je(r,i.value))}),t}function vo(e,t){if(We(t))return e;{let n=fs(e,t);return n!=null?new Hr(new Tn(n)):new Hr(e.writeTree_.subtree(t))}}function my(e){return e.writeTree_.isEmpty()}function Fa(e,t){return LS(et(),e.writeTree_,t)}function LS(e,t,n){if(t.value!=null)return n.updateChild(e,t.value);{let r=null;return t.children.inorderTraversal((i,s)=>{i===".priority"?(Y(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=LS(Rt(e,i),s,n)}),!n.getChild(e).isEmpty()&&r!==null&&(n=n.updateChild(Rt(e,".priority"),r)),n}}function fh(e,t){return US(t,e)}function Z4(e,t,n,r,i){Y(r>e.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=Ol(e.visibleWrites,t,n)),e.lastWriteId=r}function X4(e,t,n,r){Y(r>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:n,writeId:r,visible:!0}),e.visibleWrites=py(e.visibleWrites,t,n),e.lastWriteId=r}function Q4(e,t){for(let n=0;n<e.allWrites.length;n++){let r=e.allWrites[n];if(r.writeId===t)return r}return null}function K4(e,t){let n=e.allWrites.findIndex(h=>h.writeId===t);Y(n>=0,"removeWrite called with nonexistent writeId.");let r=e.allWrites[n];e.allWrites.splice(n,1);let i=r.visible,s=!1,l=e.allWrites.length-1;for(;i&&l>=0;){let h=e.allWrites[l];h.visible&&(l>=n&&J4(h,r.path)?i=!1:gr(r.path,h.path)&&(s=!0)),l--}if(i){if(s)return e6(e),!0;if(r.snap)e.visibleWrites=Zx(e.visibleWrites,r.path);else{let h=r.children;gn(h,g=>{e.visibleWrites=Zx(e.visibleWrites,Rt(r.path,g))})}return!0}else return!1}function J4(e,t){if(e.snap)return gr(e.path,t);for(let n in e.children)if(e.children.hasOwnProperty(n)&&gr(Rt(e.path,n),t))return!0;return!1}function e6(e){e.visibleWrites=FS(e.allWrites,t6,et()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}function t6(e){return e.visible}function FS(e,t,n){let r=Hr.empty();for(let i=0;i<e.length;++i){let s=e[i];if(t(s)){let l=s.path,h;if(s.snap)gr(n,l)?(h=An(n,l),r=Ol(r,h,s.snap)):gr(l,n)&&(h=An(l,n),r=Ol(r,et(),s.snap.getChild(h)));else if(s.children){if(gr(n,l))h=An(n,l),r=py(r,h,s.children);else if(gr(l,n))if(h=An(l,n),We(h))r=py(r,et(),s.children);else{let g=is(s.children,Ue(h));if(g){let m=g.getChild(It(h));r=Ol(r,et(),m)}}}else throw rs("WriteRecord should have .snap or .children")}}return r}function BS(e,t,n,r,i){if(!r&&!i){let s=fs(e.visibleWrites,t);if(s!=null)return s;{let l=vo(e.visibleWrites,t);if(my(l))return n;if(n==null&&!gy(l,et()))return null;{let h=n||Te.EMPTY_NODE;return Fa(l,h)}}}else{let s=vo(e.visibleWrites,t);if(!i&&my(s))return n;if(!i&&n==null&&!gy(s,et()))return null;{let l=function(m){return(m.visible||i)&&(!r||!~r.indexOf(m.writeId))&&(gr(m.path,t)||gr(t,m.path))},h=FS(e.allWrites,l,t),g=n||Te.EMPTY_NODE;return Fa(h,g)}}}function n6(e,t,n){let r=Te.EMPTY_NODE,i=fs(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(Ot,(s,l)=>{r=r.updateImmediateChild(s,l)}),r;if(n){let s=vo(e.visibleWrites,t);return n.forEachChild(Ot,(l,h)=>{let g=Fa(vo(s,new ut(l)),h);r=r.updateImmediateChild(l,g)}),Xx(s).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}else{let s=vo(e.visibleWrites,t);return Xx(s).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}}function r6(e,t,n,r,i){Y(r||i,"Either existingEventSnap or existingServerSnap must exist");let s=Rt(t,n);if(gy(e.visibleWrites,s))return null;{let l=vo(e.visibleWrites,s);return my(l)?i.getChild(n):Fa(l,i.getChild(n))}}function i6(e,t,n,r){let i=Rt(t,n),s=fs(e.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){let l=vo(e.visibleWrites,i);return Fa(l,r.getNode().getImmediateChild(n))}else return null}function o6(e,t){return fs(e.visibleWrites,t)}function s6(e,t,n,r,i,s,l){let h,g=vo(e.visibleWrites,t),m=fs(g,et());if(m!=null)h=m;else if(n!=null)h=Fa(g,n);else return[];if(h=h.withIndex(l),!h.isEmpty()&&!h.isLeafNode()){let C=[],E=l.getCompare(),x=s?h.getReverseIteratorFrom(r,l):h.getIteratorFrom(r,l),D=x.getNext();for(;D&&C.length<i;)E(D,r)!==0&&C.push(D),D=x.getNext();return C}else return[]}function a6(){return{visibleWrites:Hr.empty(),allWrites:[],lastWriteId:-1}}function Kf(e,t,n,r){return BS(e.writeTree,e.treePath,t,n,r)}function Wy(e,t){return n6(e.writeTree,e.treePath,t)}function Qx(e,t,n,r){return r6(e.writeTree,e.treePath,t,n,r)}function Jf(e,t){return o6(e.writeTree,Rt(e.treePath,t))}function c6(e,t,n,r,i,s){return s6(e.writeTree,e.treePath,t,n,r,i,s)}function Gy(e,t,n){return i6(e.writeTree,e.treePath,t,n)}function VS(e,t){return US(Rt(e.treePath,t),e.writeTree)}function US(e,t){return{treePath:e,writeTree:t}}var yy=class{constructor(){this.changeMap=new Map}trackChildChange(t){let n=t.type,r=t.childName;Y(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),Y(r!==".priority","Only non-priority child changes can be tracked.");let i=this.changeMap.get(r);if(i){let s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,Fl(r,t.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,Ll(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,ka(r,t.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,Fl(r,t.snapshotNode,i.oldSnap));else throw rs("Illegal combination of changes: "+t+" occurred after "+i)}else this.changeMap.set(r,t)}getChanges(){return Array.from(this.changeMap.values())}};var _y=class{getCompleteChild(t){return null}getChildAfterChild(t,n,r){return null}},jS=new _y,Ul=class{constructor(t,n,r=null){this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(t){let n=this.viewCache_.eventCache;if(n.isCompleteForChild(t))return n.getNode().getImmediateChild(t);{let r=this.optCompleteServerCache_!=null?new ai(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Gy(this.writes_,t,r)}}getChildAfterChild(t,n,r){let i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:us(this.viewCache_),s=c6(this.writes_,i,n,1,r,t);return s.length===0?null:s[0]}};function l6(e){return{filter:e}}function u6(e,t){Y(t.eventCache.getNode().isIndexed(e.filter.getIndex()),"Event snap not indexed"),Y(t.serverCache.getNode().isIndexed(e.filter.getIndex()),"Server snap not indexed")}function d6(e,t,n,r,i){let s=new yy,l,h;if(n.type===si.OVERWRITE){let m=n;m.source.fromUser?l=vy(e,t,m.path,m.snap,r,i,s):(Y(m.source.fromServer,"Unknown source."),h=m.source.tagged||t.serverCache.isFiltered()&&!We(m.path),l=eh(e,t,m.path,m.snap,r,i,h,s))}else if(n.type===si.MERGE){let m=n;m.source.fromUser?l=h6(e,t,m.path,m.children,r,i,s):(Y(m.source.fromServer,"Unknown source."),h=m.source.tagged||t.serverCache.isFiltered(),l=wy(e,t,m.path,m.children,r,i,h,s))}else if(n.type===si.ACK_USER_WRITE){let m=n;m.revert?l=m6(e,t,m.path,r,i,s):l=p6(e,t,m.path,m.affectedTree,r,i,s)}else if(n.type===si.LISTEN_COMPLETE)l=g6(e,t,n.path,r,s);else throw rs("Unknown operation type: "+n.type);let g=s.getChanges();return f6(t,l,g),{viewCache:l,changes:g}}function f6(e,t,n){let r=t.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=Qf(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(OS(Qf(t)))}}function HS(e,t,n,r,i,s){let l=t.eventCache;if(Jf(r,n)!=null)return t;{let h,g;if(We(n))if(Y(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){let m=us(t),C=m instanceof Te?m:Te.EMPTY_NODE,E=Wy(r,C);h=e.filter.updateFullNode(t.eventCache.getNode(),E,s)}else{let m=Kf(r,us(t));h=e.filter.updateFullNode(t.eventCache.getNode(),m,s)}else{let m=Ue(n);if(m===".priority"){Y(Co(n)===1,"Can't have a priority with additional path components");let C=l.getNode();g=t.serverCache.getNode();let E=Qx(r,n,C,g);E!=null?h=e.filter.updatePriority(C,E):h=l.getNode()}else{let C=It(n),E;if(l.isCompleteForChild(m)){g=t.serverCache.getNode();let x=Qx(r,n,l.getNode(),g);x!=null?E=l.getNode().getImmediateChild(m).updateChild(C,x):E=l.getNode().getImmediateChild(m)}else E=Gy(r,m,t.serverCache);E!=null?h=e.filter.updateChild(l.getNode(),m,E,C,i,s):h=l.getNode()}}return Rl(t,h,l.isFullyInitialized()||We(n),e.filter.filtersNodes())}}function eh(e,t,n,r,i,s,l,h){let g=t.serverCache,m,C=l?e.filter:e.filter.getIndexedFilter();if(We(n))m=C.updateFullNode(g.getNode(),r,null);else if(C.filtersNodes()&&!g.isFiltered()){let D=g.getNode().updateChild(n,r);m=C.updateFullNode(g.getNode(),D,null)}else{let D=Ue(n);if(!g.isCompleteForPath(n)&&Co(n)>1)return t;let N=It(n),G=g.getNode().getImmediateChild(D).updateChild(N,r);D===".priority"?m=C.updatePriority(g.getNode(),G):m=C.updateChild(g.getNode(),D,G,N,jS,null)}let E=kS(t,m,g.isFullyInitialized()||We(n),C.filtersNodes()),x=new Ul(i,E,s);return HS(e,E,n,i,x,h)}function vy(e,t,n,r,i,s,l){let h=t.eventCache,g,m,C=new Ul(i,t,s);if(We(n))m=e.filter.updateFullNode(t.eventCache.getNode(),r,l),g=Rl(t,m,!0,e.filter.filtersNodes());else{let E=Ue(n);if(E===".priority")m=e.filter.updatePriority(t.eventCache.getNode(),r),g=Rl(t,m,h.isFullyInitialized(),h.isFiltered());else{let x=It(n),D=h.getNode().getImmediateChild(E),N;if(We(x))N=r;else{let U=C.getCompleteChild(E);U!=null?Fy(x)===".priority"&&U.getChild(AS(x)).isEmpty()?N=U:N=U.updateChild(x,r):N=Te.EMPTY_NODE}if(D.equals(N))g=t;else{let U=e.filter.updateChild(h.getNode(),E,N,x,C,l);g=Rl(t,U,h.isFullyInitialized(),e.filter.filtersNodes())}}}return g}function Kx(e,t){return e.eventCache.isCompleteForChild(t)}function h6(e,t,n,r,i,s,l){let h=t;return r.foreach((g,m)=>{let C=Rt(n,g);Kx(t,Ue(C))&&(h=vy(e,h,C,m,i,s,l))}),r.foreach((g,m)=>{let C=Rt(n,g);Kx(t,Ue(C))||(h=vy(e,h,C,m,i,s,l))}),h}function Jx(e,t,n){return n.foreach((r,i)=>{t=t.updateChild(r,i)}),t}function wy(e,t,n,r,i,s,l,h){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let g=t,m;We(n)?m=r:m=new Tn(null).setTree(n,r);let C=t.serverCache.getNode();return m.children.inorderTraversal((E,x)=>{if(C.hasChild(E)){let D=t.serverCache.getNode().getImmediateChild(E),N=Jx(e,D,x);g=eh(e,g,new ut(E),N,i,s,l,h)}}),m.children.inorderTraversal((E,x)=>{let D=!t.serverCache.isCompleteForChild(E)&&x.value===null;if(!C.hasChild(E)&&!D){let N=t.serverCache.getNode().getImmediateChild(E),U=Jx(e,N,x);g=eh(e,g,new ut(E),U,i,s,l,h)}}),g}function p6(e,t,n,r,i,s,l){if(Jf(i,n)!=null)return t;let h=t.serverCache.isFiltered(),g=t.serverCache;if(r.value!=null){if(We(n)&&g.isFullyInitialized()||g.isCompleteForPath(n))return eh(e,t,n,g.getNode().getChild(n),i,s,h,l);if(We(n)){let m=new Tn(null);return g.getNode().forEachChild(Ma,(C,E)=>{m=m.set(new ut(C),E)}),wy(e,t,n,m,i,s,h,l)}else return t}else{let m=new Tn(null);return r.foreach((C,E)=>{let x=Rt(n,C);g.isCompleteForPath(x)&&(m=m.set(C,g.getNode().getChild(x)))}),wy(e,t,n,m,i,s,h,l)}}function g6(e,t,n,r,i){let s=t.serverCache,l=kS(t,s.getNode(),s.isFullyInitialized()||We(n),s.isFiltered());return HS(e,l,n,r,jS,i)}function m6(e,t,n,r,i,s){let l;if(Jf(r,n)!=null)return t;{let h=new Ul(r,t,i),g=t.eventCache.getNode(),m;if(We(n)||Ue(n)===".priority"){let C;if(t.serverCache.isFullyInitialized())C=Kf(r,us(t));else{let E=t.serverCache.getNode();Y(E instanceof Te,"serverChildren would be complete if leaf node"),C=Wy(r,E)}C=C,m=e.filter.updateFullNode(g,C,s)}else{let C=Ue(n),E=Gy(r,C,t.serverCache);E==null&&t.serverCache.isCompleteForChild(C)&&(E=g.getImmediateChild(C)),E!=null?m=e.filter.updateChild(g,C,E,It(n),h,s):t.eventCache.getNode().hasChild(C)?m=e.filter.updateChild(g,C,Te.EMPTY_NODE,It(n),h,s):m=g,m.isEmpty()&&t.serverCache.isFullyInitialized()&&(l=Kf(r,us(t)),l.isLeafNode()&&(m=e.filter.updateFullNode(m,l,s)))}return l=t.serverCache.isFullyInitialized()||Jf(r,et())!=null,Rl(t,m,l,e.filter.filtersNodes())}}var Cy=class{constructor(t,n){this.query_=t,this.eventRegistrations_=[];let r=this.query_._queryParams,i=new Bl(r.getIndex()),s=j4(r);this.processor_=l6(s);let l=n.serverCache,h=n.eventCache,g=i.updateFullNode(Te.EMPTY_NODE,l.getNode(),null),m=s.updateFullNode(Te.EMPTY_NODE,h.getNode(),null),C=new ai(g,l.isFullyInitialized(),i.filtersNodes()),E=new ai(m,h.isFullyInitialized(),s.filtersNodes());this.viewCache_=dh(E,C),this.eventGenerator_=new hy(this.query_)}get query(){return this.query_}};function y6(e){return e.viewCache_.serverCache.getNode()}function _6(e){return Qf(e.viewCache_)}function v6(e,t){let n=us(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!We(t)&&!n.getImmediateChild(Ue(t)).isEmpty())?n.getChild(t):null}function eS(e){return e.eventRegistrations_.length===0}function w6(e,t){e.eventRegistrations_.push(t)}function tS(e,t,n){let r=[];if(n){Y(t==null,"A cancel should cancel all event registrations.");let i=e.query._path;e.eventRegistrations_.forEach(s=>{let l=s.createCancelEvent(n,i);l&&r.push(l)})}if(t){let i=[];for(let s=0;s<e.eventRegistrations_.length;++s){let l=e.eventRegistrations_[s];if(!l.matches(t))i.push(l);else if(t.hasAnyCallback()){i=i.concat(e.eventRegistrations_.slice(s+1));break}}e.eventRegistrations_=i}else e.eventRegistrations_=[];return r}function nS(e,t,n,r){t.type===si.MERGE&&t.source.queryId!==null&&(Y(us(e.viewCache_),"We should always have a full cache before handling merges"),Y(Qf(e.viewCache_),"Missing event cache, even though we have a server cache"));let i=e.viewCache_,s=d6(e.processor_,i,t,n,r);return u6(e.processor_,s.viewCache),Y(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=s.viewCache,zS(e,s.changes,s.viewCache.eventCache.getNode(),null)}function C6(e,t){let n=e.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Ot,(s,l)=>{r.push(ka(s,l))}),n.isFullyInitialized()&&r.push(OS(n.getNode())),zS(e,r,n.getNode(),t)}function zS(e,t,n,r){let i=r?[r]:e.eventRegistrations_;return G4(e.eventGenerator_,t,n,i)}var th,nh=class{constructor(){this.views=new Map}};function E6(e){Y(!th,"__referenceConstructor has already been defined"),th=e}function I6(){return Y(th,"Reference.ts has not been loaded"),th}function b6(e){return e.views.size===0}function $y(e,t,n,r){let i=t.source.queryId;if(i!==null){let s=e.views.get(i);return Y(s!=null,"SyncTree gave us an op for an invalid query."),nS(s,t,n,r)}else{let s=[];for(let l of e.views.values())s=s.concat(nS(l,t,n,r));return s}}function WS(e,t,n,r,i){let s=t._queryIdentifier,l=e.views.get(s);if(!l){let h=Kf(n,i?r:null),g=!1;h?g=!0:r instanceof Te?(h=Wy(n,r),g=!1):(h=Te.EMPTY_NODE,g=!1);let m=dh(new ai(h,g,!1),new ai(r,i,!1));return new Cy(t,m)}return l}function x6(e,t,n,r,i,s){let l=WS(e,t,r,i,s);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,l),w6(l,n),C6(l,n)}function S6(e,t,n,r){let i=t._queryIdentifier,s=[],l=[],h=Eo(e);if(i==="default")for(let[g,m]of e.views.entries())l=l.concat(tS(m,n,r)),eS(m)&&(e.views.delete(g),m.query._queryParams.loadsAllData()||s.push(m.query));else{let g=e.views.get(i);g&&(l=l.concat(tS(g,n,r)),eS(g)&&(e.views.delete(i),g.query._queryParams.loadsAllData()||s.push(g.query)))}return h&&!Eo(e)&&s.push(new(I6())(t._repo,t._path)),{removed:s,events:l}}function GS(e){let t=[];for(let n of e.views.values())n.query._queryParams.loadsAllData()||t.push(n);return t}function wo(e,t){let n=null;for(let r of e.views.values())n=n||v6(r,t);return n}function $S(e,t){if(t._queryParams.loadsAllData())return hh(e);{let r=t._queryIdentifier;return e.views.get(r)}}function qS(e,t){return $S(e,t)!=null}function Eo(e){return hh(e)!=null}function hh(e){for(let t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}var rh;function A6(e){Y(!rh,"__referenceConstructor has already been defined"),rh=e}function D6(){return Y(rh,"Reference.ts has not been loaded"),rh}var T6=1,ih=class{constructor(t){this.listenProvider_=t,this.syncPointTree_=new Tn(null),this.pendingWriteTree_=a6(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function YS(e,t,n,r,i){return Z4(e.pendingWriteTree_,t,n,r,i),i?Ua(e,new La(jy(),t,n)):[]}function M6(e,t,n,r){X4(e.pendingWriteTree_,t,n,r);let i=Tn.fromObject(n);return Ua(e,new Vl(jy(),t,i))}function _o(e,t,n=!1){let r=Q4(e.pendingWriteTree_,t);if(K4(e.pendingWriteTree_,t)){let s=new Tn(null);return r.snap!=null?s=s.set(et(),!0):gn(r.children,l=>{s=s.set(new ut(l),!0)}),Ua(e,new fy(r.path,s,n))}else return[]}function ql(e,t,n){return Ua(e,new La(Hy(),t,n))}function N6(e,t,n){let r=Tn.fromObject(n);return Ua(e,new Vl(Hy(),t,r))}function R6(e,t){return Ua(e,new Xf(Hy(),t))}function O6(e,t,n){let r=Yy(e,n);if(r){let i=Zy(r),s=i.path,l=i.queryId,h=An(s,t),g=new Xf(zy(l),h);return Xy(e,s,g)}else return[]}function oh(e,t,n,r,i=!1){let s=t._path,l=e.syncPointTree_.get(s),h=[];if(l&&(t._queryIdentifier==="default"||qS(l,t))){let g=S6(l,t,n,r);b6(l)&&(e.syncPointTree_=e.syncPointTree_.remove(s));let m=g.removed;if(h=g.events,!i){let C=m.findIndex(x=>x._queryParams.loadsAllData())!==-1,E=e.syncPointTree_.findOnPath(s,(x,D)=>Eo(D));if(C&&!E){let x=e.syncPointTree_.subtree(s);if(!x.isEmpty()){let D=L6(x);for(let N=0;N<D.length;++N){let U=D[N],G=U.query,z=KS(e,U);e.listenProvider_.startListening(Pl(G),jl(e,G),z.hashFn,z.onComplete)}}}!E&&m.length>0&&!r&&(C?e.listenProvider_.stopListening(Pl(t),null):m.forEach(x=>{let D=e.queryToTagMap.get(ph(x));e.listenProvider_.stopListening(Pl(x),D)}))}F6(e,m)}return h}function ZS(e,t,n,r){let i=Yy(e,r);if(i!=null){let s=Zy(i),l=s.path,h=s.queryId,g=An(l,t),m=new La(zy(h),g,n);return Xy(e,l,m)}else return[]}function P6(e,t,n,r){let i=Yy(e,r);if(i){let s=Zy(i),l=s.path,h=s.queryId,g=An(l,t),m=Tn.fromObject(n),C=new Vl(zy(h),g,m);return Xy(e,l,C)}else return[]}function Ey(e,t,n,r=!1){let i=t._path,s=null,l=!1;e.syncPointTree_.foreachOnPath(i,(x,D)=>{let N=An(x,i);s=s||wo(D,N),l=l||Eo(D)});let h=e.syncPointTree_.get(i);h?(l=l||Eo(h),s=s||wo(h,et())):(h=new nh,e.syncPointTree_=e.syncPointTree_.set(i,h));let g;s!=null?g=!0:(g=!1,s=Te.EMPTY_NODE,e.syncPointTree_.subtree(i).foreachChild((D,N)=>{let U=wo(N,et());U&&(s=s.updateImmediateChild(D,U))}));let m=qS(h,t);if(!m&&!t._queryParams.loadsAllData()){let x=ph(t);Y(!e.queryToTagMap.has(x),"View does not exist, but we have a tag");let D=B6();e.queryToTagMap.set(x,D),e.tagToQueryMap.set(D,x)}let C=fh(e.pendingWriteTree_,i),E=x6(h,t,n,C,s,g);if(!m&&!l&&!r){let x=$S(h,t);E=E.concat(V6(e,t,x))}return E}function qy(e,t,n){let i=e.pendingWriteTree_,s=e.syncPointTree_.findOnPath(t,(l,h)=>{let g=An(l,t),m=wo(h,g);if(m)return m});return BS(i,t,s,n,!0)}function k6(e,t){let n=t._path,r=null;e.syncPointTree_.foreachOnPath(n,(m,C)=>{let E=An(m,n);r=r||wo(C,E)});let i=e.syncPointTree_.get(n);i?r=r||wo(i,et()):(i=new nh,e.syncPointTree_=e.syncPointTree_.set(n,i));let s=r!=null,l=s?new ai(r,!0,!1):null,h=fh(e.pendingWriteTree_,t._path),g=WS(i,t,h,s?l.getNode():Te.EMPTY_NODE,s);return _6(g)}function Ua(e,t){return XS(t,e.syncPointTree_,null,fh(e.pendingWriteTree_,et()))}function XS(e,t,n,r){if(We(e.path))return QS(e,t,n,r);{let i=t.get(et());n==null&&i!=null&&(n=wo(i,et()));let s=[],l=Ue(e.path),h=e.operationForChild(l),g=t.children.get(l);if(g&&h){let m=n?n.getImmediateChild(l):null,C=VS(r,l);s=s.concat(XS(h,g,m,C))}return i&&(s=s.concat($y(i,e,r,n))),s}}function QS(e,t,n,r){let i=t.get(et());n==null&&i!=null&&(n=wo(i,et()));let s=[];return t.children.inorderTraversal((l,h)=>{let g=n?n.getImmediateChild(l):null,m=VS(r,l),C=e.operationForChild(l);C&&(s=s.concat(QS(C,h,g,m)))}),i&&(s=s.concat($y(i,e,r,n))),s}function KS(e,t){let n=t.query,r=jl(e,n);return{hashFn:()=>(y6(t)||Te.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?O6(e,n._path,r):R6(e,n._path);{let s=Q8(i,n);return oh(e,n,null,s)}}}}function jl(e,t){let n=ph(t);return e.queryToTagMap.get(n)}function ph(e){return e._path.toString()+"$"+e._queryIdentifier}function Yy(e,t){return e.tagToQueryMap.get(t)}function Zy(e){let t=e.indexOf("$");return Y(t!==-1&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new ut(e.substr(0,t))}}function Xy(e,t,n){let r=e.syncPointTree_.get(t);Y(r,"Missing sync point for query tag that we're tracking");let i=fh(e.pendingWriteTree_,t);return $y(r,n,i,null)}function L6(e){return e.fold((t,n,r)=>{if(n&&Eo(n))return[hh(n)];{let i=[];return n&&(i=GS(n)),gn(r,(s,l)=>{i=i.concat(l)}),i}})}function Pl(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(D6())(e._repo,e._path):e}function F6(e,t){for(let n=0;n<t.length;++n){let r=t[n];if(!r._queryParams.loadsAllData()){let i=ph(r),s=e.queryToTagMap.get(i);e.queryToTagMap.delete(i),e.tagToQueryMap.delete(s)}}}function B6(){return T6++}function V6(e,t,n){let r=t._path,i=jl(e,t),s=KS(e,n),l=e.listenProvider_.startListening(Pl(t),i,s.hashFn,s.onComplete),h=e.syncPointTree_.subtree(r);if(i)Y(!Eo(h.value),"If we're adding a query, it shouldn't be shadowed");else{let g=h.fold((m,C,E)=>{if(!We(m)&&C&&Eo(C))return[hh(C).query];{let x=[];return C&&(x=x.concat(GS(C).map(D=>D.query))),gn(E,(D,N)=>{x=x.concat(N)}),x}});for(let m=0;m<g.length;++m){let C=g[m];e.listenProvider_.stopListening(Pl(C),jl(e,C))}}return l}var Iy=class e{constructor(t){this.node_=t}getImmediateChild(t){let n=this.node_.getImmediateChild(t);return new e(n)}node(){return this.node_}},by=class e{constructor(t,n){this.syncTree_=t,this.path_=n}getImmediateChild(t){let n=Rt(this.path_,t);return new e(this.syncTree_,n)}node(){return qy(this.syncTree_,this.path_)}},U6=function(e){return e=e||{},e.timestamp=e.timestamp||new Date().getTime(),e},rS=function(e,t,n){if(!e||typeof e!="object")return e;if(Y(".sv"in e,"Unexpected leaf node or priority contents"),typeof e[".sv"]=="string")return j6(e[".sv"],t,n);if(typeof e[".sv"]=="object")return H6(e[".sv"],t);Y(!1,"Unexpected server value: "+JSON.stringify(e,null,2))},j6=function(e,t,n){switch(e){case"timestamp":return n.timestamp;default:Y(!1,"Unexpected server value: "+e)}},H6=function(e,t,n){e.hasOwnProperty("increment")||Y(!1,"Unexpected server value: "+JSON.stringify(e,null,2));let r=e.increment;typeof r!="number"&&Y(!1,"Unexpected increment value: "+r);let i=t.node();if(Y(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;let l=i.getValue();return typeof l!="number"?r:l+r},JS=function(e,t,n,r){return Qy(t,new by(n,e),r)},eA=function(e,t,n){return Qy(e,new Iy(t),n)};function Qy(e,t,n){let r=e.getPriority().val(),i=rS(r,t.getImmediateChild(".priority"),n),s;if(e.isLeafNode()){let l=e,h=rS(l.getValue(),t,n);return h!==l.getValue()||i!==l.getPriority().val()?new Oa(h,Xt(i)):e}else{let l=e;return s=l,i!==l.getPriority().val()&&(s=s.updatePriority(new Oa(i))),l.forEachChild(Ot,(h,g)=>{let m=Qy(g,t.getImmediateChild(h),n);m!==g&&(s=s.updateImmediateChild(h,m))}),s}}var Hl=class{constructor(t="",n=null,r={children:{},childCount:0}){this.name=t,this.parent=n,this.node=r}};function Ky(e,t){let n=t instanceof ut?t:new ut(t),r=e,i=Ue(n);for(;i!==null;){let s=is(r.node.children,i)||{children:{},childCount:0};r=new Hl(i,r,s),n=It(n),i=Ue(n)}return r}function ja(e){return e.node.value}function tA(e,t){e.node.value=t,xy(e)}function nA(e){return e.node.childCount>0}function z6(e){return ja(e)===void 0&&!nA(e)}function gh(e,t){gn(e.node.children,(n,r)=>{t(new Hl(n,e,r))})}function rA(e,t,n,r){n&&!r&&t(e),gh(e,i=>{rA(i,t,!0,r)}),n&&r&&t(e)}function W6(e,t,n){let r=n?e:e.parent;for(;r!==null;){if(t(r))return!0;r=r.parent}return!1}function Yl(e){return new ut(e.parent===null?e.name:Yl(e.parent)+"/"+e.name)}function xy(e){e.parent!==null&&G6(e.parent,e.name,e)}function G6(e,t,n){let r=z6(n),i=Ur(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,xy(e)):!r&&!i&&(e.node.children[t]=n.node,e.node.childCount++,xy(e))}var $6=/[\[\].#$\/\u0000-\u001F\u007F]/,q6=/[\[\].#$\u0000-\u001F\u007F]/,L1=10*1024*1024,Jy=function(e){return typeof e=="string"&&e.length!==0&&!$6.test(e)},iA=function(e){return typeof e=="string"&&e.length!==0&&!q6.test(e)},Y6=function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),iA(e)},Z6=function(e){return e===null||typeof e=="string"||typeof e=="number"&&!Py(e)||e&&typeof e=="object"&&Ur(e,".sv")},X6=function(e,t,n,r){r&&t===void 0||mh(Cl(e,"value"),t,n)},mh=function(e,t,n){let r=n instanceof ut?new X1(n,e):n;if(t===void 0)throw new Error(e+"contains undefined "+ss(r));if(typeof t=="function")throw new Error(e+"contains a function "+ss(r)+" with contents = "+t.toString());if(Py(t))throw new Error(e+"contains "+t.toString()+" "+ss(r));if(typeof t=="string"&&t.length>L1/3&&El(t)>L1)throw new Error(e+"contains a string greater than "+L1+" utf8 bytes "+ss(r)+" ('"+t.substring(0,50)+"...')");if(t&&typeof t=="object"){let i=!1,s=!1;if(gn(t,(l,h)=>{if(l===".value")i=!0;else if(l!==".priority"&&l!==".sv"&&(s=!0,!Jy(l)))throw new Error(e+" contains an invalid key ("+l+") "+ss(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);A4(r,l),mh(e,h,r),D4(r)}),i&&s)throw new Error(e+' contains ".value" child '+ss(r)+" in addition to actual children.")}},Q6=function(e,t){let n,r;for(n=0;n<t.length;n++){r=t[n];let s=kl(r);for(let l=0;l<s.length;l++)if(!(s[l]===".priority"&&l===s.length-1)){if(!Jy(s[l]))throw new Error(e+"contains an invalid key ("+s[l]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}t.sort(S4);let i=null;for(n=0;n<t.length;n++){if(r=t[n],i!==null&&gr(i,r))throw new Error(e+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}},K6=function(e,t,n,r){if(r&&t===void 0)return;let i=Cl(e,"values");if(!(t&&typeof t=="object")||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");let s=[];gn(t,(l,h)=>{let g=new ut(l);if(mh(i,h,Rt(n,g)),Fy(g)===".priority"&&!Z6(h))throw new Error(i+"contains an invalid value for '"+g.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(g)}),Q6(i,s)};var oA=function(e,t,n,r){if(!(r&&n===void 0)&&!iA(n))throw new Error(Cl(e,t)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},J6=function(e,t,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),oA(e,t,n,r)},sA=function(e,t){if(Ue(t)===".info")throw new Error(e+" failed = Can't modify data under /.info/")},eB=function(e,t){let n=t.path.toString();if(typeof t.repoInfo.host!="string"||t.repoInfo.host.length===0||!Jy(t.repoInfo.namespace)&&t.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!Y6(n))throw new Error(Cl(e,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var Sy=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function yh(e,t){let n=null;for(let r=0;r<t.length;r++){let i=t[r],s=i.getPath();n!==null&&!By(s,n.path)&&(e.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&e.eventLists_.push(n)}function aA(e,t,n){yh(e,n),cA(e,r=>By(r,t))}function yr(e,t,n){yh(e,n),cA(e,r=>gr(r,t)||gr(t,r))}function cA(e,t){e.recursionDepth_++;let n=!0;for(let r=0;r<e.eventLists_.length;r++){let i=e.eventLists_[r];if(i){let s=i.path;t(s)?(tB(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}}n&&(e.eventLists_=[]),e.recursionDepth_--}function tB(e){for(let t=0;t<e.events.length;t++){let n=e.events[t];if(n!==null){e.events[t]=null;let r=n.getEventRunner();cs&&pn("event: "+n.toString()),Va(r)}}}var nB="repo_interrupt",rB=25,Ay=class{constructor(t,n,r,i){this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Sy,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Zf(),this.transactionQueueTree_=new Hl,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function iB(e,t,n){if(e.stats_=Ly(e.repoInfo_),e.forceRestClient_||t4())e.server_=new ay(e.repoInfo_,(r,i,s,l)=>{iS(e,r,i,s,l)},e.authTokenProvider_,e.appCheckProvider_),setTimeout(()=>oS(e,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{jt(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}e.persistentConnection_=new Vy(e.repoInfo_,t,(r,i,s,l)=>{iS(e,r,i,s,l)},r=>{oS(e,r)},r=>{sB(e,r)},e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener(r=>{e.server_.refreshAuthToken(r)}),e.appCheckProvider_.addTokenChangeListener(r=>{e.server_.refreshAppCheckToken(r.token)}),e.statsReporter_=r4(e.repoInfo_,()=>new dy(e.stats_,e.server_)),e.infoData_=new cy,e.infoSyncTree_=new ih({startListening:(r,i,s,l)=>{let h=[],g=e.infoData_.getNode(r._path);return g.isEmpty()||(h=ql(e.infoSyncTree_,r._path,g),setTimeout(()=>{l("ok")},0)),h},stopListening:()=>{}}),e_(e,"connected",!1),e.serverSyncTree_=new ih({startListening:(r,i,s,l)=>(e.server_.listen(r,s,i,(h,g)=>{let m=l(h,g);yr(e.eventQueue_,r._path,m)}),[]),stopListening:(r,i)=>{e.server_.unlisten(r,i)}})}function oB(e){let n=e.infoData_.getNode(new ut(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function _h(e){return U6({timestamp:oB(e)})}function iS(e,t,n,r,i){e.dataUpdateCount++;let s=new ut(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let l=[];if(i)if(r){let g=_l(n,m=>Xt(m));l=P6(e.serverSyncTree_,s,g,i)}else{let g=Xt(n);l=ZS(e.serverSyncTree_,s,g,i)}else if(r){let g=_l(n,m=>Xt(m));l=N6(e.serverSyncTree_,s,g)}else{let g=Xt(n);l=ql(e.serverSyncTree_,s,g)}let h=s;l.length>0&&(h=Ba(e,s)),yr(e.eventQueue_,h,l)}function oS(e,t){e_(e,"connected",t),t===!1&&uB(e)}function sB(e,t){gn(t,(n,r)=>{e_(e,n,r)})}function e_(e,t,n){let r=new ut("/.info/"+t),i=Xt(n);e.infoData_.updateSnapshot(r,i);let s=ql(e.infoSyncTree_,r,i);yr(e.eventQueue_,r,s)}function t_(e){return e.nextWriteId_++}function aB(e,t,n){let r=k6(e.serverSyncTree_,t);return r!=null?Promise.resolve(r):e.server_.get(t).then(i=>{let s=Xt(i).withIndex(t._queryParams.getIndex());Ey(e.serverSyncTree_,t,n,!0);let l;if(t._queryParams.loadsAllData())l=ql(e.serverSyncTree_,t._path,s);else{let h=jl(e.serverSyncTree_,t);l=ZS(e.serverSyncTree_,t._path,s,h)}return yr(e.eventQueue_,t._path,l),oh(e.serverSyncTree_,t,n,null,!0),s},i=>(Zl(e,"get for query "+jt(t)+" failed: "+i),Promise.reject(new Error(i))))}function cB(e,t,n,r,i){Zl(e,"set",{path:t.toString(),value:n,priority:r});let s=_h(e),l=Xt(n,r),h=qy(e.serverSyncTree_,t),g=eA(l,h,s),m=t_(e),C=YS(e.serverSyncTree_,t,g,m,!0);yh(e.eventQueue_,C),e.server_.put(t.toString(),l.val(!0),(x,D)=>{let N=x==="ok";N||Dn("set at "+t+" failed: "+x);let U=_o(e.serverSyncTree_,m,!N);yr(e.eventQueue_,t,U),Dy(e,i,x,D)});let E=r_(e,t);Ba(e,E),yr(e.eventQueue_,E,[])}function lB(e,t,n,r){Zl(e,"update",{path:t.toString(),value:n});let i=!0,s=_h(e),l={};if(gn(n,(h,g)=>{i=!1,l[h]=JS(Rt(t,h),Xt(g),e.serverSyncTree_,s)}),i)pn("update() called with empty data.  Don't do anything."),Dy(e,r,"ok",void 0);else{let h=t_(e),g=M6(e.serverSyncTree_,t,l,h);yh(e.eventQueue_,g),e.server_.merge(t.toString(),n,(m,C)=>{let E=m==="ok";E||Dn("update at "+t+" failed: "+m);let x=_o(e.serverSyncTree_,h,!E),D=x.length>0?Ba(e,t):t;yr(e.eventQueue_,D,x),Dy(e,r,m,C)}),gn(n,m=>{let C=r_(e,Rt(t,m));Ba(e,C)}),yr(e.eventQueue_,t,[])}}function uB(e){Zl(e,"onDisconnectEvents");let t=_h(e),n=Zf();ly(e.onDisconnect_,et(),(i,s)=>{let l=JS(i,s,e.serverSyncTree_,t);PS(n,i,l)});let r=[];ly(n,et(),(i,s)=>{r=r.concat(ql(e.serverSyncTree_,i,s));let l=r_(e,i);Ba(e,l)}),e.onDisconnect_=Zf(),yr(e.eventQueue_,et(),r)}function dB(e,t,n){let r;Ue(t._path)===".info"?r=Ey(e.infoSyncTree_,t,n):r=Ey(e.serverSyncTree_,t,n),aA(e.eventQueue_,t._path,r)}function sS(e,t,n){let r;Ue(t._path)===".info"?r=oh(e.infoSyncTree_,t,n):r=oh(e.serverSyncTree_,t,n),aA(e.eventQueue_,t._path,r)}function fB(e){e.persistentConnection_&&e.persistentConnection_.interrupt(nB)}function Zl(e,...t){let n="";e.persistentConnection_&&(n=e.persistentConnection_.id+":"),pn(n,...t)}function Dy(e,t,n,r){t&&Va(()=>{if(n==="ok")t(null);else{let i=(n||"error").toUpperCase(),s=i;r&&(s+=": "+r);let l=new Error(s);l.code=i,t(l)}})}function lA(e,t,n){return qy(e.serverSyncTree_,t,n)||Te.EMPTY_NODE}function n_(e,t=e.transactionQueueTree_){if(t||vh(e,t),ja(t)){let n=dA(e,t);Y(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&hB(e,Yl(t),n)}else nA(t)&&gh(t,n=>{n_(e,n)})}function hB(e,t,n){let r=n.map(m=>m.currentWriteId),i=lA(e,t,r),s=i,l=i.hash();for(let m=0;m<n.length;m++){let C=n[m];Y(C.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),C.status=1,C.retryCount++;let E=An(t,C.path);s=s.updateChild(E,C.currentOutputSnapshotRaw)}let h=s.val(!0),g=t;e.server_.put(g.toString(),h,m=>{Zl(e,"transaction put response",{path:g.toString(),status:m});let C=[];if(m==="ok"){let E=[];for(let x=0;x<n.length;x++)n[x].status=2,C=C.concat(_o(e.serverSyncTree_,n[x].currentWriteId)),n[x].onComplete&&E.push(()=>n[x].onComplete(null,!0,n[x].currentOutputSnapshotResolved)),n[x].unwatcher();vh(e,Ky(e.transactionQueueTree_,t)),n_(e,e.transactionQueueTree_),yr(e.eventQueue_,t,C);for(let x=0;x<E.length;x++)Va(E[x])}else{if(m==="datastale")for(let E=0;E<n.length;E++)n[E].status===3?n[E].status=4:n[E].status=0;else{Dn("transaction at "+g.toString()+" failed: "+m);for(let E=0;E<n.length;E++)n[E].status=4,n[E].abortReason=m}Ba(e,t)}},l)}function Ba(e,t){let n=uA(e,t),r=Yl(n),i=dA(e,n);return pB(e,i,r),r}function pB(e,t,n){if(t.length===0)return;let r=[],i=[],l=t.filter(h=>h.status===0).map(h=>h.currentWriteId);for(let h=0;h<t.length;h++){let g=t[h],m=An(n,g.path),C=!1,E;if(Y(m!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),g.status===4)C=!0,E=g.abortReason,i=i.concat(_o(e.serverSyncTree_,g.currentWriteId,!0));else if(g.status===0)if(g.retryCount>=rB)C=!0,E="maxretry",i=i.concat(_o(e.serverSyncTree_,g.currentWriteId,!0));else{let x=lA(e,g.path,l);g.currentInputSnapshot=x;let D=t[h].update(x.val());if(D!==void 0){mh("transaction failed: Data returned ",D,g.path);let N=Xt(D);typeof D=="object"&&D!=null&&Ur(D,".priority")||(N=N.updatePriority(x.getPriority()));let G=g.currentWriteId,z=_h(e),ne=eA(N,x,z);g.currentOutputSnapshotRaw=N,g.currentOutputSnapshotResolved=ne,g.currentWriteId=t_(e),l.splice(l.indexOf(G),1),i=i.concat(YS(e.serverSyncTree_,g.path,ne,g.currentWriteId,g.applyLocally)),i=i.concat(_o(e.serverSyncTree_,G,!0))}else C=!0,E="nodata",i=i.concat(_o(e.serverSyncTree_,g.currentWriteId,!0))}yr(e.eventQueue_,n,i),i=[],C&&(t[h].status=2,function(x){setTimeout(x,Math.floor(0))}(t[h].unwatcher),t[h].onComplete&&(E==="nodata"?r.push(()=>t[h].onComplete(null,!1,t[h].currentInputSnapshot)):r.push(()=>t[h].onComplete(new Error(E),!1,null))))}vh(e,e.transactionQueueTree_);for(let h=0;h<r.length;h++)Va(r[h]);n_(e,e.transactionQueueTree_)}function uA(e,t){let n,r=e.transactionQueueTree_;for(n=Ue(t);n!==null&&ja(r)===void 0;)r=Ky(r,n),t=It(t),n=Ue(t);return r}function dA(e,t){let n=[];return fA(e,t,n),n.sort((r,i)=>r.order-i.order),n}function fA(e,t,n){let r=ja(t);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);gh(t,i=>{fA(e,i,n)})}function vh(e,t){let n=ja(t);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,tA(t,n.length>0?n:void 0)}gh(t,r=>{vh(e,r)})}function r_(e,t){let n=Yl(uA(e,t)),r=Ky(e.transactionQueueTree_,t);return W6(r,i=>{F1(e,i)}),F1(e,r),rA(r,i=>{F1(e,i)}),n}function F1(e,t){let n=ja(t);if(n){let r=[],i=[],s=-1;for(let l=0;l<n.length;l++)n[l].status===3||(n[l].status===1?(Y(s===l-1,"All SENT items should be at beginning of queue."),s=l,n[l].status=3,n[l].abortReason="set"):(Y(n[l].status===0,"Unexpected transaction status in abort"),n[l].unwatcher(),i=i.concat(_o(e.serverSyncTree_,n[l].currentWriteId,!0)),n[l].onComplete&&r.push(n[l].onComplete.bind(null,new Error("set"),!1,null))));s===-1?tA(t,void 0):n.length=s+1,yr(e.eventQueue_,Yl(t),i);for(let l=0;l<r.length;l++)Va(r[l])}}function gB(e){let t="",n=e.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}t+="/"+i}return t}function mB(e){let t={};e.charAt(0)==="?"&&(e=e.substring(1));for(let n of e.split("&")){if(n.length===0)continue;let r=n.split("=");r.length===2?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Dn(`Invalid query segment '${n}' in query '${e}'`)}return t}var aS=function(e,t){let n=yB(e),r=n.namespace;n.domain==="firebase.com"&&Bi(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Bi("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||$8();let i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new jf(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new ut(n.pathString)}},yB=function(e){let t="",n="",r="",i="",s="",l=!0,h="https",g=443;if(typeof e=="string"){let m=e.indexOf("//");m>=0&&(h=e.substring(0,m-1),e=e.substring(m+2));let C=e.indexOf("/");C===-1&&(C=e.length);let E=e.indexOf("?");E===-1&&(E=e.length),t=e.substring(0,Math.min(C,E)),C<E&&(i=gB(e.substring(C,E)));let x=mB(e.substring(Math.min(e.length,E)));m=t.indexOf(":"),m>=0?(l=h==="https"||h==="wss",g=parseInt(t.substring(m+1),10)):m=t.length;let D=t.slice(0,m);if(D.toLowerCase()==="localhost")n="localhost";else if(D.split(".").length<=2)n=D;else{let N=t.indexOf(".");r=t.substring(0,N).toLowerCase(),n=t.substring(N+1),s=r}"ns"in x&&(s=x.ns)}return{host:t,port:g,domain:n,subdomain:r,secure:l,scheme:h,pathString:i,namespace:s}};var sh=class{constructor(t,n,r,i){this.eventType=t,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){let t=this.snapshot.ref;return this.eventType==="value"?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+jt(this.snapshot.exportVal())}},ah=class{constructor(t,n,r){this.eventRegistration=t,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}};var ch=class{constructor(t,n){this.snapshotCallback=t,this.cancelCallback=n}onValue(t,n){this.snapshotCallback.call(null,t,n)}onCancel(t){return Y(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}};var Ty=class e{constructor(t,n,r,i){this._repo=t,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return We(this._path)?null:Fy(this._path)}get ref(){return new ci(this._repo,this._path)}get _queryIdentifier(){let t=qx(this._queryParams),n=ky(t);return n==="{}"?"default":n}get _queryObject(){return qx(this._queryParams)}isEqual(t){if(t=Wn(t),!(t instanceof e))return!1;let n=this._repo===t._repo,r=By(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+x4(this._path)}};var ci=class e extends Ty{constructor(t,n){super(t,n,new sy,!1)}get parent(){let t=AS(this._path);return t===null?null:new e(this._repo,t)}get root(){let t=this;for(;t.parent!==null;)t=t.parent;return t}},zl=class e{constructor(t,n,r){this._node=t,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){let n=new ut(t),r=lh(this.ref,t);return new e(this._node.getChild(n),r,Ot)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>t(new e(i,lh(this.ref,r),Ot)))}hasChild(t){let n=new ut(t);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}};function fe(e,t){return e=Wn(e),e._checkNotDeleted("ref"),t!==void 0?lh(e._root,t):e._root}function lh(e,t){return e=Wn(e),Ue(e._path)===null?J6("child","path",t,!1):oA("child","path",t,!1),new ci(e._repo,Rt(e._path,t))}function Ha(e){return sA("remove",e._path),Xl(e,null)}function Xl(e,t){e=Wn(e),sA("set",e._path),X6("set",t,e._path,!1);let n=new ki;return cB(e._repo,e._path,t,null,n.wrapCallback(()=>{})),n.promise}function Qt(e,t){K6("update",t,e._path,!1);let n=new ki;return lB(e._repo,e._path,t,n.wrapCallback(()=>{})),n.promise}function tt(e){e=Wn(e);let t=new ch(()=>{}),n=new uh(t);return aB(e._repo,e,n).then(r=>new zl(r,new ci(e._repo,e._path),e._queryParams.getIndex()))}var uh=class e{constructor(t){this.callbackContext=t}respondsTo(t){return t==="value"}createEvent(t,n){let r=n._queryParams.getIndex();return new sh("value",this,new zl(t.snapshotNode,new ci(n._repo,n._path),r))}getEventRunner(t){return t.getEventType()==="cancel"?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,n){return this.callbackContext.hasCancelCallback?new ah(this,t,n):null}matches(t){return t instanceof e?!t.callbackContext||!this.callbackContext?!0:t.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}},My=class e{constructor(t,n){this.eventType=t,this.callbackContext=n}respondsTo(t){let n=t==="children_added"?"child_added":t;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(t,n){return this.callbackContext.hasCancelCallback?new ah(this,t,n):null}createEvent(t,n){Y(t.childName!=null,"Child events should have a childName.");let r=lh(new ci(n._repo,n._path),t.childName),i=n._queryParams.getIndex();return new sh(t.type,this,new zl(t.snapshotNode,r,i),t.prevName)}getEventRunner(t){return t.getEventType()==="cancel"?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,t.prevName)}matches(t){return t instanceof e?this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}};function _B(e,t,n,r,i){let s;if(typeof r=="object"&&(s=void 0,i=r),typeof r=="function"&&(s=r),i&&i.onlyOnce){let g=n,m=(C,E)=>{sS(e._repo,e,h),g(C,E)};m.userCallback=n.userCallback,m.context=n.context,n=m}let l=new ch(n,s||void 0),h=t==="value"?new uh(l):new My(t,l);return dB(e._repo,e,h),()=>sS(e._repo,e,h)}function hA(e,t,n,r){return _B(e,"value",t,n,r)}E6(ci);A6(ci);var vB="FIREBASE_DATABASE_EMULATOR_HOST",Ny={},wB=!1;function CB(e,t,n,r){e.repoInfo_=new jf(`${t}:${n}`,!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0),r&&(e.authTokenProvider_=r)}function EB(e,t,n,r,i){let s=r||e.options.databaseURL;s===void 0&&(e.options.projectId||Bi("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),pn("Using default host for project ",e.options.projectId),s=`${e.options.projectId}-default-rtdb.firebaseio.com`);let l=aS(s,i),h=l.repoInfo,g,m;typeof process<"u"&&process.env&&(m=process.env[vB]),m?(g=!0,s=`http://${m}?ns=${h.namespace}`,l=aS(s,i),h=l.repoInfo):g=!l.repoInfo.secure;let C=i&&g?new Nl(Nl.OWNER):new z1(e.name,e.options,t);eB("Invalid Firebase Database URL",l),We(l.path)||Bi("Database URL must point to the root of a Firebase Database (not including a child path).");let E=bB(h,e,C,new H1(e.name,n));return new Ry(E,e)}function IB(e,t){let n=Ny[t];(!n||n[e.key]!==e)&&Bi(`Database ${t}(${e.repoInfo_}) has already been deleted.`),fB(e),delete n[e.key]}function bB(e,t,n,r){let i=Ny[t.name];i||(i={},Ny[t.name]=i);let s=i[e.toURLString()];return s&&Bi("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new Ay(e,wB,n,r),i[e.toURLString()]=s,s}var Ry=class{constructor(t,n){this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(iB(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ci(this._repo,et())),this._rootInternal}_delete(){return this._rootInternal!==null&&(IB(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){this._rootInternal===null&&Bi("Cannot call "+t+" on a deleted database.")}};function ye(e=M1(),t){let n=T1(e,"database").getImmediate({identifier:t});if(!n._instanceStarted){let r=ix("database");r&&xB(n,...r)}return n}function xB(e,t,n,r={}){e=Wn(e),e._checkNotDeleted("useEmulator"),e._instanceStarted&&Bi("Cannot call useEmulator() after instance has already been initialized.");let i=e._repoInternal,s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Bi('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Nl(Nl.OWNER);else if(r.mockUserToken){let l=typeof r.mockUserToken=="string"?r.mockUserToken:sx(r.mockUserToken,e.app.options.projectId);s=new Nl(l)}CB(i,t,n,s)}function SB(e){z8(Sa),yo(new hr("database",(t,{instanceIdentifier:n})=>{let r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return EB(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),pr(Mx,Nx,e),pr(Mx,Nx,"esm2017")}Vy.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)};Vy.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};SB();var dt={production:!0,firebaseConfig:{apiKey:"AIzaSyC2ak3O4qovvrDLGJ-L3a6E1uLASES2xuU",authDomain:"tablefi-31087.firebaseapp.com",databaseURL:"https://tablefi-31087-default-rtdb.europe-west1.firebasedatabase.app",projectId:"tablefi-31087",storageBucket:"tablefi-31087.appspot.com",messagingSenderId:"821585389969",appId:"1:821585389969:web:9383409a2e5fbf601b5230",measurementId:"G-QXT5KZEKGZ"}};var pA=(()=>{class e{db;constructor(){let n=qe(dt.firebaseConfig);this.db=ye(n)}login(n,r){return new be(i=>{let s=fe(this.db,"Owners");tt(s).then(l=>{if(l.exists()){let h=l.val(),m=Object.values(h).find(C=>C.email===n);m?m.password===r?i.next(m):i.error("Invalid password"):i.error("No user found with this email")}else i.error("No owners found in the database")}).catch(l=>{console.error("Error fetching owners:",l),i.error("An error occurred while fetching owners")})}).pipe(Ln(i=>(console.error("Error during login:",i),ot([null]))))}static \u0275fac=function(r){return new(r||e)};static \u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var ft=(()=>{class e{router;constructor(n){this.router=n}NavigateTo(n){this.router.navigate([n])}static \u0275fac=function(r){return new(r||e)(Le(po))};static \u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var gA=(()=>{class e{loginService;navigationService;email="";password="";constructor(n,r){this.loginService=n,this.navigationService=r}onSubmit(n){n.preventDefault(),this.loginService.login(this.email,this.password).subscribe({next:r=>{r&&(sessionStorage.setItem("userId",r.id),sessionStorage.setItem("userEmail",r.email),sessionStorage.setItem("uniqueLinkToken",r.uniqueLinkToken),console.log("User logged in:",r),this.navigationService.NavigateTo("changerestaurant"))},error:r=>{alert(r),console.error("Login error:",r)}})}static \u0275fac=function(r){return new(r||e)(re(pA),re(ft))};static \u0275cmp=pe({type:e,selectors:[["app-login"]],standalone:!0,features:[ve],decls:15,vars:2,consts:[[1,"displaybox"],[1,"logo"],[1,"loginform"],[3,"ngSubmit"],["type","email","id","email","name","email","placeholder","E-mail","required","",3,"ngModelChange","ngModel"],["type","password","id","password","name","password","placeholder","Has\u0142o","required","",3,"ngModelChange","ngModel"],["type","submit",1,"login"],[1,"footstatic"]],template:function(r,i){r&1&&(F(0,"main")(1,"div",0)(2,"div",1)(3,"h1"),$(4,"EasyOrder"),L()(),F(5,"div",2)(6,"form",3),ie("ngSubmit",function(l){return i.onSubmit(l)}),F(7,"div")(8,"input",4),Zt("ngModelChange",function(l){return nn(i.email,l)||(i.email=l),l}),L()(),F(9,"div")(10,"input",5),Zt("ngModelChange",function(l){return nn(i.password,l)||(i.password=l),l}),L()(),_e(11,"div"),F(12,"button",6),$(13,"Zaloguj"),L()()(),_e(14,"div",7),L()()),r&2&&(ae(8),Yt("ngModel",i.email),ae(2),Yt("ngModel",i.password))},dependencies:[zn,ni,fr,ei,ti,Br,Fr,Lr],styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;padding:32px;position:relative}.displaybox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center;position:relative}.logo[_ngcontent-%COMP%]{display:flex;font-size:45%;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center;margin-bottom:48px}.loginform[_ngcontent-%COMP%]{width:100%;height:fit-content;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center;position:relative}.loginform[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:100%}.loginform[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;background:#fff;padding:16px;font-size:110%;color:#000;font-weight:600;letter-spacing:2px;border:1px solid #000000;transition:all .5s;margin-bottom:24px}.loginform[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;background:#000;padding:16px;font-size:110%;color:#fff;font-weight:600;letter-spacing:2px;border:none;transition:all .5s}"]})}return e})();function za(){}var i_=class{zone;task=null;constructor(t){this.zone=t}call(t,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",za,{},za,za)),n.pipe($t({next:r,complete:r,error:r})).subscribe(t).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}};function wh(){let e=globalThis.\u0275AngularFireScheduler;if(!e)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return e}function DB(e){return wh().ngZone.runOutsideAngular(()=>e())}function hs(e){return wh().ngZone.run(()=>e())}function TB(e){return MB(wh())(e)}function MB(e){return function(n){return n=n.lift(new i_(e.ngZone)),n.pipe(Ki(e.outsideAngular),Qi(e.insideAngular))}}var NB=(e,t)=>function(){let r=arguments;return t&&setTimeout(()=>{t.state==="scheduled"&&t.invoke()},10),hs(()=>e.apply(void 0,r))},mA=(e,t)=>function(){let n,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(t&&(n||=hs(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",za,{},za,za))),r[s]=NB(r[s],n));let i=DB(()=>e.apply(this,r));if(!t)if(i instanceof be){let s=wh();return i.pipe(Ki(s.outsideAngular),Qi(s.insideAngular))}else return hs(()=>i);return i instanceof be?i.pipe(TB):i instanceof Promise?hs(()=>new Promise((s,l)=>i.then(h=>hs(()=>s(h)),h=>hs(()=>l(h))))):typeof i=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),i.apply(this,arguments)}:hs(()=>i)};function bA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var xA=bA,SA=new Li("auth","Firebase",bA());var bh=new go("@firebase/auth");function RB(e,...t){bh.logLevel<=gt.WARN&&bh.warn(`Auth (${Sa}): ${e}`,...t)}function Eh(e,...t){bh.logLevel<=gt.ERROR&&bh.error(`Auth (${Sa}): ${e}`,...t)}function yA(e,...t){throw m_(e,...t)}function g_(e,...t){return m_(e,...t)}function AA(e,t,n){let r=Object.assign(Object.assign({},xA()),{[t]:n});return new Li("auth","Firebase",r).create(t,{appName:e.name})}function Ih(e){return AA(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function m_(e,...t){if(typeof e!="string"){let n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return SA.create(e,...t)}function st(e,t,...n){if(!e)throw m_(t,...n)}function Ql(e){let t="INTERNAL ASSERTION FAILED: "+e;throw Eh(t),new Error(t)}function xh(e,t){e||Ql(t)}function OB(){return _A()==="http:"||_A()==="https:"}function _A(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.protocol)||null}function PB(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(OB()||cx()||"connection"in navigator)?navigator.onLine:!0}function kB(){if(typeof navigator>"u")return null;let e=navigator;return e.languages&&e.languages[0]||e.language||null}var gs=class{constructor(t,n){this.shortDelay=t,this.longDelay=n,xh(n>t,"Short delay should be less than long delay!"),this.isMobile=yl()||Pf()}get(){return PB()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function LB(e,t){xh(e.emulator,"Emulator should always be set here");let{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}var Sh=class{static initialize(t,n,r){this.fetchImpl=t,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ql("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ql("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ql("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var FB={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var BB=new gs(3e4,6e4);function DA(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function Mh(s,l,h,g){return X(this,arguments,function*(e,t,n,r,i={}){return TA(e,i,()=>X(this,null,function*(){let m={},C={};r&&(t==="GET"?C=r:m={body:JSON.stringify(r)});let E=wl(Object.assign({key:e.config.apiKey},C)).slice(1),x=yield e._getAdditionalHeaders();x["Content-Type"]="application/json",e.languageCode&&(x["X-Firebase-Locale"]=e.languageCode);let D=Object.assign({method:t,headers:x},m);return ax()||(D.referrerPolicy="no-referrer"),Sh.fetch()(MA(e,e.config.apiHost,n,E),D)}))})}function TA(e,t,n){return X(this,null,function*(){e._canInitEmulator=!1;let r=Object.assign(Object.assign({},FB),t);try{let i=new a_(e),s=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let l=yield s.json();if("needConfirmation"in l)throw Ch(e,"account-exists-with-different-credential",l);if(s.ok&&!("errorMessage"in l))return l;{let h=s.ok?l.errorMessage:l.error.message,[g,m]=h.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ch(e,"credential-already-in-use",l);if(g==="EMAIL_EXISTS")throw Ch(e,"email-already-in-use",l);if(g==="USER_DISABLED")throw Ch(e,"user-disabled",l);let C=r[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw AA(e,C,m);yA(e,C)}}catch(i){if(i instanceof ri)throw i;yA(e,"network-request-failed",{message:String(i)})}})}function MA(e,t,n,r){let i=`${t}${n}?${r}`;return e.config.emulator?LB(e.config,i):`${e.config.apiScheme}://${i}`}var a_=class{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(g_(this.auth,"network-request-failed")),BB.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function Ch(e,t,n){let r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=g_(e,t,r);return i.customData._tokenResponse=n,i}function VB(e,t){return X(this,null,function*(){return Mh(e,"POST","/v1/accounts:delete",t)})}function NA(e,t){return X(this,null,function*(){return Mh(e,"POST","/v1/accounts:lookup",t)})}function Kl(e){if(e)try{let t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}function Nh(e,t=!1){return Wn(e).getIdToken(t)}function y_(e,t=!1){return X(this,null,function*(){let n=Wn(e),r=yield n.getIdToken(t),i=RA(r);st(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,l=s?.sign_in_provider;return{claims:i,token:r,authTime:Kl(o_(i.auth_time)),issuedAtTime:Kl(o_(i.iat)),expirationTime:Kl(o_(i.exp)),signInProvider:l||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function o_(e){return Number(e)*1e3}function RA(e){let[t,n,r]=e.split(".");if(t===void 0||n===void 0||r===void 0)return Eh("JWT malformed, contained fewer than 3 sections"),null;try{let i=ml(n);return i?JSON.parse(i):(Eh("Failed to decode base64 JWT payload"),null)}catch(i){return Eh("Caught error parsing JWT payload as JSON",i?.toString()),null}}function vA(e){let t=RA(e);return st(t,"internal-error"),st(typeof t.exp<"u","internal-error"),st(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}function c_(e,t,n=!1){return X(this,null,function*(){if(n)return t;try{return yield t}catch(r){throw r instanceof ri&&UB(r)&&e.auth.currentUser===e&&(yield e.auth.signOut()),r}})}function UB({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}var l_=class{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;let n=this.getInterval(t);this.timerId=setTimeout(()=>X(this,null,function*(){yield this.iteration()}),n)}iteration(){return X(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var eu=class{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Kl(this.lastLoginAt),this.creationTime=Kl(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Ah(e){return X(this,null,function*(){var t;let n=e.auth,r=yield e.getIdToken(),i=yield c_(e,NA(n,{idToken:r}));st(i?.users.length,n,"internal-error");let s=i.users[0];e._notifyReloadListener(s);let l=!((t=s.providerUserInfo)===null||t===void 0)&&t.length?OA(s.providerUserInfo):[],h=jB(e.providerData,l),g=e.isAnonymous,m=!(e.email&&s.passwordHash)&&!h?.length,C=g?m:!1,E={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:h,metadata:new eu(s.createdAt,s.lastLoginAt),isAnonymous:C};Object.assign(e,E)})}function __(e){return X(this,null,function*(){let t=Wn(e);yield Ah(t),yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)})}function jB(e,t){return[...e.filter(r=>!t.some(i=>i.providerId===r.providerId)),...t]}function OA(e){return e.map(t=>{var{providerId:n}=t,r=jp(t,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function HB(e,t){return X(this,null,function*(){let n=yield TA(e,{},()=>X(this,null,function*(){let r=wl({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:s}=e.config,l=MA(e,i,"/v1/token",`key=${s}`),h=yield e._getAdditionalHeaders();return h["Content-Type"]="application/x-www-form-urlencoded",Sh.fetch()(l,{method:"POST",headers:h,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function zB(e,t){return X(this,null,function*(){return Mh(e,"POST","/v2/accounts:revokeToken",DA(e,t))})}var Jl=class e{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){st(t.idToken,"internal-error"),st(typeof t.idToken<"u","internal-error"),st(typeof t.refreshToken<"u","internal-error");let n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):vA(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){st(t.length!==0,"internal-error");let n=vA(t);this.updateTokensAndExpiration(t,null,n)}getToken(t,n=!1){return X(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(st(this.refreshToken,t,"user-token-expired"),this.refreshToken?(yield this.refresh(t,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(t,n){return X(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield HB(t,n);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(t,n,r){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,n){let{refreshToken:r,accessToken:i,expirationTime:s}=n,l=new e;return r&&(st(typeof r=="string","internal-error",{appName:t}),l.refreshToken=r),i&&(st(typeof i=="string","internal-error",{appName:t}),l.accessToken=i),s&&(st(typeof s=="number","internal-error",{appName:t}),l.expirationTime=s),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new e,this.toJSON())}_performRefresh(){return Ql("not implemented")}};function Io(e,t){st(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}var tu=class e{constructor(t){var{uid:n,auth:r,stsTokenManager:i}=t,s=jp(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new l_(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new eu(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(t){return X(this,null,function*(){let n=yield c_(this,this.stsTokenManager.getToken(this.auth,t));return st(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(t){return y_(this,t)}reload(){return __(this)}_assign(t){this!==t&&(st(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){let n=new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){st(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(t,n=!1){return X(this,null,function*(){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),n&&(yield Ah(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return X(this,null,function*(){if(xa(this.auth.app))return Promise.reject(Ih(this.auth));let t=yield this.getIdToken();return yield c_(this,VB(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var r,i,s,l,h,g,m,C;let E=(r=n.displayName)!==null&&r!==void 0?r:void 0,x=(i=n.email)!==null&&i!==void 0?i:void 0,D=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,N=(l=n.photoURL)!==null&&l!==void 0?l:void 0,U=(h=n.tenantId)!==null&&h!==void 0?h:void 0,G=(g=n._redirectEventId)!==null&&g!==void 0?g:void 0,z=(m=n.createdAt)!==null&&m!==void 0?m:void 0,ne=(C=n.lastLoginAt)!==null&&C!==void 0?C:void 0,{uid:He,emailVerified:le,isAnonymous:j,providerData:se,stsTokenManager:W}=n;st(He&&W,t,"internal-error");let En=Jl.fromJSON(this.name,W);st(typeof He=="string",t,"internal-error"),Io(E,t.name),Io(x,t.name),st(typeof le=="boolean",t,"internal-error"),st(typeof j=="boolean",t,"internal-error"),Io(D,t.name),Io(N,t.name),Io(U,t.name),Io(G,t.name),Io(z,t.name),Io(ne,t.name);let Ft=new e({uid:He,auth:t,email:x,emailVerified:le,displayName:E,isAnonymous:j,photoURL:N,phoneNumber:D,tenantId:U,stsTokenManager:En,createdAt:z,lastLoginAt:ne});return se&&Array.isArray(se)&&(Ft.providerData=se.map(Ce=>Object.assign({},Ce))),G&&(Ft._redirectEventId=G),Ft}static _fromIdTokenResponse(t,n,r=!1){return X(this,null,function*(){let i=new Jl;i.updateFromServerResponse(n);let s=new e({uid:n.localId,auth:t,stsTokenManager:i,isAnonymous:r});return yield Ah(s),s})}static _fromGetAccountInfoResponse(t,n,r){return X(this,null,function*(){let i=n.users[0];st(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?OA(i.providerUserInfo):[],l=!(i.email&&i.passwordHash)&&!s?.length,h=new Jl;h.updateFromIdToken(r);let g=new e({uid:i.localId,auth:t,stsTokenManager:h,isAnonymous:l}),m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new eu(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(g,m),g})}};var wA=new Map;function ps(e){xh(e instanceof Function,"Expected a class definition");let t=wA.get(e);return t?(xh(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,wA.set(e,t),t)}var WB=(()=>{class e{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return X(this,null,function*(){return!0})}_set(n,r){return X(this,null,function*(){this.storage[n]=r})}_get(n){return X(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return X(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return e.type="NONE",e})(),u_=WB;function s_(e,t,n){return`firebase:${e}:${t}:${n}`}var Dh=class e{constructor(t,n,r){this.persistence=t,this.auth=n,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=s_(this.userKey,i.apiKey,s),this.fullPersistenceKey=s_("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}getCurrentUser(){return X(this,null,function*(){let t=yield this.persistence._get(this.fullUserKey);return t?tu._fromJSON(this.auth,t):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(t){return X(this,null,function*(){if(this.persistence===t)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(t,n,r="authUser"){return X(this,null,function*(){if(!n.length)return new e(ps(u_),t,r);let i=(yield Promise.all(n.map(m=>X(this,null,function*(){if(yield m._isAvailable())return m})))).filter(m=>m),s=i[0]||ps(u_),l=s_(r,t.config.apiKey,t.name),h=null;for(let m of n)try{let C=yield m._get(l);if(C){let E=tu._fromJSON(t,C);m!==s&&(h=E),s=m;break}}catch{}let g=i.filter(m=>m._shouldAllowMigration);return!s._shouldAllowMigration||!g.length?new e(s,t,r):(s=g[0],h&&(yield s._set(l,h.toJSON())),yield Promise.all(n.map(m=>X(this,null,function*(){if(m!==s)try{yield m._remove(l)}catch{}}))),new e(s,t,r))})}};function CA(e){let t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(YB(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(GB(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(XB(t))return"Blackberry";if(QB(t))return"Webos";if($B(t))return"Safari";if((t.includes("chrome/")||qB(t))&&!t.includes("edge/"))return"Chrome";if(ZB(t))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=e.match(n);if(r?.length===2)return r[1]}return"Other"}function GB(e=Vr()){return/firefox\//i.test(e)}function $B(e=Vr()){let t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function qB(e=Vr()){return/crios\//i.test(e)}function YB(e=Vr()){return/iemobile/i.test(e)}function ZB(e=Vr()){return/android/i.test(e)}function XB(e=Vr()){return/blackberry/i.test(e)}function QB(e=Vr()){return/webos/i.test(e)}function PA(e,t=[]){let n;switch(e){case"Browser":n=CA(Vr());break;case"Worker":n=`${CA(Vr())}-${e}`;break;default:n=e}let r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${Sa}/${r}`}var d_=class{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){let r=s=>new Promise((l,h)=>{try{let g=t(s);l(g)}catch(g){h(g)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(t){return X(this,null,function*(){if(this.auth.currentUser===t)return;let n=[];try{for(let r of this.queue)yield r(t),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function KB(n){return X(this,arguments,function*(e,t={}){return Mh(e,"GET","/v2/passwordPolicy",DA(e,t))})}var JB=6,f_=class{constructor(t){var n,r,i,s;let l=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=l.minPasswordLength)!==null&&n!==void 0?n:JB,l.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=l.maxPasswordLength),l.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=l.containsLowercaseCharacter),l.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=l.containsUppercaseCharacter),l.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=l.containsNumericCharacter),l.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=l.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=t.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=t.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var n,r,i,s,l,h;let g={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,g),this.validatePasswordCharacterOptions(t,g),g.isValid&&(g.isValid=(n=g.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),g.isValid&&(g.isValid=(r=g.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),g.isValid&&(g.isValid=(i=g.containsLowercaseLetter)!==null&&i!==void 0?i:!0),g.isValid&&(g.isValid=(s=g.containsUppercaseLetter)!==null&&s!==void 0?s:!0),g.isValid&&(g.isValid=(l=g.containsNumericCharacter)!==null&&l!==void 0?l:!0),g.isValid&&(g.isValid=(h=g.containsNonAlphanumericCharacter)!==null&&h!==void 0?h:!0),g}validatePasswordLengthOptions(t,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=t.length>=r),i&&(n.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<t.length;i++)r=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}};var h_=class{constructor(t,n,r,i){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Th(this),this.idTokenSubscription=new Th(this),this.beforeStateQueue=new d_(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=SA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=ps(n)),this._initializationPromise=this.queue(()=>X(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield Dh.create(this,t),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return X(this,null,function*(){if(this._deleted)return;let t=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(t,!0)}})}initializeCurrentUserFromIdToken(t){return X(this,null,function*(){try{let n=yield NA(this,{idToken:t}),r=yield tu._fromGetAccountInfoResponse(this,n,t);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(t){return X(this,null,function*(){var n;if(xa(this.app)){let l=this.app.settings.authIdToken;return l?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(h,h))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(t&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let l=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,h=i?._redirectEventId,g=yield this.tryRedirectSignIn(t);(!l||l===h)&&g?.user&&(i=g.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(l){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return st(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(t){return X(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(t){return X(this,null,function*(){try{yield Ah(t)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)})}useDeviceLanguage(){this.languageCode=kB()}_delete(){return X(this,null,function*(){this._deleted=!0})}updateCurrentUser(t){return X(this,null,function*(){if(xa(this.app))return Promise.reject(Ih(this));let n=t?Wn(t):null;return n&&st(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(t,n=!1){return X(this,null,function*(){if(!this._deleted)return t&&st(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(t)),this.queue(()=>X(this,null,function*(){yield this.directlySetCurrentUser(t),this.notifyAuthListeners()}))})}signOut(){return X(this,null,function*(){return xa(this.app)?Promise.reject(Ih(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(t){return xa(this.app)?Promise.reject(Ih(this)):this.queue(()=>X(this,null,function*(){yield this.assertedPersistence.setPersistence(ps(t))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(t){return X(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return X(this,null,function*(){let t=yield KB(this),n=new f_(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new Li("auth","Firebase",t())}onAuthStateChanged(t,n,r){return this.registerStateListener(this.authStateSubscription,t,n,r)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,r){return this.registerStateListener(this.idTokenSubscription,t,n,r)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{let r=this.onAuthStateChanged(()=>{r(),t()},n)}})}revokeAccessToken(t){return X(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield zB(this,r)}})}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}_setRedirectUser(t,n){return X(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return t===null?r.removeCurrentUser():r.setCurrentUser(t)})}getOrInitRedirectPersistenceManager(t){return X(this,null,function*(){if(!this.redirectPersistenceManager){let n=t&&ps(t)||this._popupRedirectResolver;st(n,this,"argument-error"),this.redirectPersistenceManager=yield Dh.create(this,[ps(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(t){return X(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>X(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===t?this.redirectUser:null})}_persistUserIfCurrent(t){return X(this,null,function*(){if(t===this.currentUser)return this.queue(()=>X(this,null,function*(){return this.directlySetCurrentUser(t)}))})}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,r,i){if(this._deleted)return()=>{};let s=typeof n=="function"?n:n.next.bind(n),l=!1,h=this._isInitialized?Promise.resolve():this._initializationPromise;if(st(h,this,"internal-error"),h.then(()=>{l||s(this.currentUser)}),typeof n=="function"){let g=t.addObserver(n,r,i);return()=>{l=!0,g()}}else{let g=t.addObserver(n);return()=>{l=!0,g()}}}directlySetCurrentUser(t){return X(this,null,function*(){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?yield this.assertedPersistence.setCurrentUser(t):yield this.assertedPersistence.removeCurrentUser()})}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return st(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=PA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return X(this,null,function*(){var t;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return X(this,null,function*(){var t;let n=yield(t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken();return n?.error&&RB(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function e5(e){return Wn(e)}var Th=class{constructor(t){this.auth=t,this.observer=null,this.addObserver=px(n=>this.observer=n)}get next(){return st(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var t5={loadJS(){return X(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function n5(e){t5=e}function r5(e){return`__${e}${Math.floor(Math.random()*1e6)}`}function i5(e,t){let n=t?.persistence||[],r=(Array.isArray(n)?n:[n]).map(ps);t?.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t?.popupRedirectResolver)}function Rh(e,t,n,r){return Wn(e).onIdTokenChanged(t,n,r)}var jq=r5("rcb"),Hq=new gs(3e4,6e4);var zq=new gs(2e3,1e4);var Wq=10*60*1e3;var Gq=new gs(3e4,6e4);var $q=new gs(5e3,15e3);var qq=encodeURIComponent("fac");var EA="@firebase/auth",IA="1.7.9";var p_=class{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}getToken(t){return X(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(t)}:null})}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;let n=this.auth.onIdTokenChanged(r=>{t(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();let n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){st(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function o5(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function s5(e){yo(new hr("auth",(t,{options:n})=>{let r=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:l,authDomain:h}=r.options;st(l&&!l.includes(":"),"invalid-api-key",{appName:r.name});let g={apiKey:l,authDomain:h,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:PA(e)},m=new h_(r,i,s,g);return i5(m,n),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,r)=>{t.getProvider("auth-internal").initialize()})),yo(new hr("auth-internal",t=>{let n=e5(t.getProvider("auth").getImmediate());return(r=>new p_(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),pr(EA,IA,o5(e)),pr(EA,IA,"esm2017")}var a5=5*60,Yq=ox("authIdTokenMaxAge")||a5;function c5(){var e,t;return(t=(e=document.getElementsByTagName("head"))===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:document}n5({loadJS(e){return new Promise((t,n)=>{let r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=i=>{let s=g_("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",c5().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});s5("Browser");function LA(e){return new be(function(t){var n=Rh(e,t.next.bind(t),t.error.bind(t),t.complete.bind(t));return{unsubscribe:n}})}function FA(e){return LA(e).pipe(Xn(function(t){return t?ot(Nh(t)):xe(null)}))}var BA=mA(FA,!0);var VA=(()=>{class e{db;constructor(){let n=qe(dt.firebaseConfig);this.db=ye(n)}emailExists(n){let r=fe(this.db,"Owners");return ot(tt(r)).pipe(Oe(i=>{if(i.exists()){let s=i.val();return Object.values(s).map(h=>h.email).includes(n)}return!1}),Ln(i=>(console.error("Error checking email existence:",i),ot([!1]))))}getNextOwnerId(){let n=fe(this.db,"Owners");return ot(tt(n)).pipe(Oe(r=>{if(r.exists()){let i=r.val(),s=Object.keys(i).map(h=>i[h].id);return Math.max(...s)+1}return 1}),Ln(r=>(console.error("Error fetching owners:",r),ot([1]))))}register(n){return new be(r=>{this.getNextOwnerId().subscribe(i=>{n.id=i;let s=fe(this.db,`Owners/${i}`);Xl(s,n).then(()=>{r.next(),r.complete()}).catch(l=>{r.error(l)})})}).pipe(Ln(r=>(console.error("An error occurred while registering the owner:",r),ot([]))))}static \u0275fac=function(r){return new(r||e)};static \u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var UA=(()=>{class e{registrationService;navigationService;email="";password="";confirmPassword="";constructor(n,r){this.registrationService=n,this.navigationService=r}onSubmit(n){if(n.preventDefault(),this.password!==this.confirmPassword){alert("Has\u0142a nie pasuj\u0105 do siebie!");return}this.registrationService.emailExists(this.email).subscribe(r=>{if(r){alert("Email jest ju\u017C zarejestrowany!");return}let i={id:BA,name:this.email.split("@")[0],email:this.email,password:this.password,uniqueLinkToken:this.generateUniqueLinkToken(128)};this.registrationService.register(i).subscribe({next:()=>{console.log("User registered successfully:",i),sessionStorage.setItem("userId",i.id),sessionStorage.setItem("userEmail",i.email),sessionStorage.setItem("uniqueLinkToken",i.uniqueLinkToken),this.navigationService.NavigateTo("newrestaurant")},error:s=>{console.error("Registration failed:",s)}})})}generateUniqueLinkToken(n=128){let r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i="";for(let s=0;s<n;s++)i+=r.charAt(Math.floor(Math.random()*r.length));return i}static \u0275fac=function(r){return new(r||e)(re(VA),re(ft))};static \u0275cmp=pe({type:e,selectors:[["app-register"]],standalone:!0,features:[ve],decls:16,vars:3,consts:[[1,"displaybox"],[1,"logo"],[1,"loginform"],[3,"ngSubmit"],["type","email","id","email","name","email","placeholder","E-mail","required","",3,"ngModelChange","ngModel"],["type","password","id","password","name","password","placeholder","Has\u0142o","required","",3,"ngModelChange","ngModel"],["type","password","id","confirmPassword","name","confirmPassword","placeholder","Powt\xF3rz has\u0142o","required","",3,"ngModelChange","ngModel"],["type","submit",1,"register"],[1,"footstatic"]],template:function(r,i){r&1&&(F(0,"main")(1,"div",0)(2,"div",1)(3,"h1"),$(4,"EasyOrder"),L()(),F(5,"div",2)(6,"form",3),ie("ngSubmit",function(l){return i.onSubmit(l)}),F(7,"div")(8,"input",4),Zt("ngModelChange",function(l){return nn(i.email,l)||(i.email=l),l}),L()(),F(9,"div")(10,"input",5),Zt("ngModelChange",function(l){return nn(i.password,l)||(i.password=l),l}),L()(),F(11,"div")(12,"input",6),Zt("ngModelChange",function(l){return nn(i.confirmPassword,l)||(i.confirmPassword=l),l}),L()(),F(13,"button",7),$(14,"Zarejestruj"),L()()(),_e(15,"div",8),L()()),r&2&&(ae(8),Yt("ngModel",i.email),ae(2),Yt("ngModel",i.password),ae(2),Yt("ngModel",i.confirmPassword))},dependencies:[zn,ni,fr,ei,ti,Br,Fr,Lr],styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;padding:32px;position:relative}.displaybox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center;position:relative}.logo[_ngcontent-%COMP%]{display:flex;font-size:45%;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center;margin-bottom:48px}.loginform[_ngcontent-%COMP%]{width:100%;height:fit-content;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center;position:relative}.loginform[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:100%}.loginform[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;background:#fff;padding:16px;font-size:110%;color:#000;font-weight:600;letter-spacing:2px;border:1px solid #000000;transition:all .5s;margin-bottom:24px}.loginform[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;background:#000;padding:16px;font-size:110%;color:#fff;font-weight:600;letter-spacing:2px;border:none;transition:all .5s}"]})}return e})();var v_=(()=>{class e{navigationService;constructor(n){this.navigationService=n}goToPage(n){this.navigationService.NavigateTo(n)}static \u0275fac=function(r){return new(r||e)(re(ft))};static \u0275cmp=pe({type:e,selectors:[["app-landing-page"]],standalone:!0,features:[ve],decls:10,vars:0,consts:[[1,"displaybox"],[1,"logo"],[1,"buttons"],[1,"register",3,"click"],[1,"login",3,"click"]],template:function(r,i){r&1&&(F(0,"main")(1,"div",0)(2,"div",1)(3,"h1"),$(4,"EasyOrder"),L()(),F(5,"div",2)(6,"button",3),ie("click",function(){return i.goToPage("register")}),$(7,"Zarejestruj si\u0119"),L(),F(8,"button",4),ie("click",function(){return i.goToPage("login")}),$(9,"Zaloguj si\u0119"),L()()()())},styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;padding:32px;position:relative}.displaybox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center;position:relative}.logo[_ngcontent-%COMP%]{display:flex;font-size:110%;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center;margin-bottom:48px}.buttons[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center}.buttons[_ngcontent-%COMP%]   .register[_ngcontent-%COMP%]{width:100%;background:#000;padding:16px;font-size:110%;color:#fff;font-weight:600;letter-spacing:2px;border:none;transition:all .5s}.buttons[_ngcontent-%COMP%]   .login[_ngcontent-%COMP%]{width:100%;background:#fff;padding:16px;font-size:110%;color:#000;font-weight:600;letter-spacing:2px;border:1px solid #000000;transition:all .5s}.buttons[_ngcontent-%COMP%]   .register[_ngcontent-%COMP%]:hover{background:#292929;transition:all .5s}.buttons[_ngcontent-%COMP%]   .login[_ngcontent-%COMP%]:hover{background:#cecece;transition:all .5s}"]})}return e})();var jA=(()=>{class e{navigationService;name="";address="";constructor(n){this.navigationService=n;let r=qe(dt.firebaseConfig)}onSubmit(n){n.preventDefault();let r=sessionStorage.getItem("uniqueLinkToken"),i=sessionStorage.getItem("userId");if(!i){alert("You must be logged in to create a restaurant.");return}let s={id:Date.now().toString(),name:this.name,address:this.address,uniqueLinkToken:r||"",settings:{table_change_allowed:!0,table_block_allowed:!0,order_number_typed_by_waiter_required:!0,waiter_access_pin:1234},TableGroups:[],Tables:[],Orders:[]};this.saveRestaurant(s,i)}saveRestaurant(n,r){let i=ye(),s=n.id,l=fe(i,`Owners/${r}/Restaurants/${s}`);Xl(l,n).then(()=>{console.log("Restaurant added successfully:",n),this.navigationService.NavigateTo("changerestaurant"),this.resetForm()}).catch(h=>{console.error("Error adding restaurant:",h)})}resetForm(){this.name="",this.address=""}static \u0275fac=function(r){return new(r||e)(re(ft))};static \u0275cmp=pe({type:e,selectors:[["app-newrestaurant"]],standalone:!0,features:[ve],decls:15,vars:2,consts:[[1,"displaybox"],[1,"logo"],[1,"newrestaurantform"],[3,"ngSubmit"],["type","text","id","name","name","name","placeholder","Nazwa restauracji","required","",3,"ngModelChange","ngModel"],["type","text","id","adress","name","adress","placeholder","Adres","required","",3,"ngModelChange","ngModel"],["type","submit",1,"addrestaurant"],[1,"footstatic"]],template:function(r,i){r&1&&(F(0,"main")(1,"div",0)(2,"div",1)(3,"h1"),$(4,"EasyOrder"),L()(),F(5,"div",2)(6,"form",3),ie("ngSubmit",function(l){return i.onSubmit(l)}),F(7,"div")(8,"input",4),Zt("ngModelChange",function(l){return nn(i.name,l)||(i.name=l),l}),L()(),F(9,"div")(10,"input",5),Zt("ngModelChange",function(l){return nn(i.address,l)||(i.address=l),l}),L()(),_e(11,"div"),F(12,"button",6),$(13,"Dodaj"),L()()(),_e(14,"div",7),L()()),r&2&&(ae(8),Yt("ngModel",i.name),ae(2),Yt("ngModel",i.address))},dependencies:[zn,ni,fr,ei,ti,Br,Fr,Lr],styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;padding:32px;position:relative}.displaybox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center;position:relative}.logo[_ngcontent-%COMP%]{display:flex;font-size:45%;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center;margin-bottom:48px}.newrestaurantform[_ngcontent-%COMP%]{width:100%;height:fit-content;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center;position:relative}.newrestaurantform[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:100%}.newrestaurantform[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;background:#fff;padding:16px;font-size:110%;color:#000;font-weight:600;letter-spacing:2px;border:1px solid #000000;transition:all .5s;margin-bottom:24px}.newrestaurantform[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;background:#000;padding:16px;font-size:110%;color:#fff;font-weight:600;letter-spacing:2px;border:none;transition:all .5s}"]})}return e})();var HA=(()=>{class e{navigationService;constructor(n){this.navigationService=n}goToPage(n){this.navigationService.NavigateTo(n)}static \u0275fac=function(r){return new(r||e)(re(ft))};static \u0275cmp=pe({type:e,selectors:[["app-restaurantmanage"]],standalone:!0,features:[ve],decls:17,vars:0,consts:[[1,"displaybox"],[1,"logo"],[1,"buttons"],[1,"tablemanage",3,"click"],[1,"settings",3,"click"],[1,"revievs",3,"click"],[1,"stats",3,"click"],[1,"bilings",3,"click"],[1,"footstatic"]],template:function(r,i){r&1&&(F(0,"main")(1,"div",0)(2,"div",1)(3,"h1"),$(4,"EasyOrder"),L()(),F(5,"div",2)(6,"button",3),ie("click",function(){return i.goToPage("tablemanage")}),$(7,"Zarz\u0105dzanie stolikami"),L(),F(8,"button",4),ie("click",function(){return i.goToPage("restaurantsettings")}),$(9,"Ustawienia"),L(),F(10,"button",5),ie("click",function(){return i.goToPage("restaurantrevievs")}),$(11,"Opinie restauracji"),L(),F(12,"button",6),ie("click",function(){return i.goToPage("restaurantstats")}),$(13,"Statystyki"),L(),F(14,"button",7),ie("click",function(){return i.goToPage("restaurantbilings")}),$(15,"P\u0142atno\u015Bci"),L()(),_e(16,"div",8),L()())},dependencies:[zn],styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;padding:16px;position:relative}.displaybox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center;position:relative}.logo[_ngcontent-%COMP%]{display:flex;font-size:45%;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center;margin-bottom:48px}.buttons[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center}.buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;background:#fff;padding:24px;font-size:110%;color:#000;font-weight:600;letter-spacing:2px;border:1px solid #000000;transition:all .5s;margin-bottom:24px}"]})}return e})();var Oh={production:!0,firebaseConfig:{apiKey:"AIzaSyC2ak3O4qovvrDLGJ-L3a6E1uLASES2xuU",authDomain:"tablefi-31087.firebaseapp.com",databaseURL:"https://tablefi-31087-default-rtdb.europe-west1.firebasedatabase.app",projectId:"tablefi-31087",storageBucket:"tablefi-31087.appspot.com",messagingSenderId:"821585389969",appId:"1:821585389969:web:9383409a2e5fbf601b5230",measurementId:"G-QXT5KZEKGZ"}};function oV(e,t){e&1&&(F(0,"p"),$(1,"Brak restauracji przypisanych do konta."),L())}function sV(e,t){if(e&1){let n=fn();F(0,"button",6),ie("click",function(){let i=kt(n).$implicit,s=St(2);return Lt(s.setRestaurant(i.id))}),F(1,"p",7),$(2),L(),F(3,"p",7),$(4),L()()}if(e&2){let n=t.$implicit;ae(2),n0("",n.name," ",n.id,""),ae(2),uo(n.address)}}function aV(e,t){if(e&1&&lr(0,sV,5,3,"button",5,cr),e&2){let n=St();ur(n.restaurants)}}var zA=(()=>{class e{navigationService;restaurants=[];db;constructor(n){this.navigationService=n;let r=qe(Oh.firebaseConfig);this.db=ye(r)}ngOnInit(){this.loadRestaurants()}loadRestaurants(){let n=sessionStorage.getItem("userId"),r=fe(this.db,`Owners/${n}/Restaurants`);tt(r).then(i=>{if(i.exists()){let s=i.val();this.restaurants=Object.values(s),this.restaurants.length===1&&(localStorage.setItem("currentRestaurant",this.restaurants[0].id.toString()),console.log(this.restaurants[0].id.toString()),this.navigationService.NavigateTo("managerestaurant"))}else console.log("No restaurants found for this owner.")}).catch(i=>{console.error("Error loading restaurants:",i)})}setRestaurant(n){localStorage.setItem("currentRestaurant",n),this.navigationService.NavigateTo("managerestaurant")}static \u0275fac=function(r){return new(r||e)(re(ft))};static \u0275cmp=pe({type:e,selectors:[["app-changerestaurant"]],standalone:!0,features:[ve],decls:12,vars:1,consts:[[1,"displaybox"],[1,"logo"],[1,"flexcontainer"],[1,"buttons"],[1,"footstatic"],[1,"restaurant"],[1,"restaurant",3,"click"],["id","datavalve"]],template:function(r,i){r&1&&(F(0,"main")(1,"div",0)(2,"div",1)(3,"h1"),$(4,"EasyOrder"),L()(),F(5,"div",2)(6,"h1"),$(7,"Wybierz restauracj\u0119"),L(),F(8,"div",3),jn(9,oV,2,0,"p")(10,aV,2,0),L()(),_e(11,"div",4),L()()),r&2&&(ae(9),Hn(i.restaurants.length===0?9:10))},styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;padding:16px;position:relative}.displaybox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center;position:relative}.logo[_ngcontent-%COMP%]{display:flex;font-size:45%;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center;margin-bottom:48px}.flexcontainer[_ngcontent-%COMP%]{display:flex;font-size:60%;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center}.flexcontainer[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center;font-size:110%;color:#000;font-weight:600}.flexcontainer[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   .restaurant[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center;background:#fff;padding:24px;font-size:110%;color:#000;font-weight:600;letter-spacing:2px;border:1px solid #000000;transition:all .5s;margin-bottom:24px}.flexcontainer[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   .restaurant[_ngcontent-%COMP%]   #datavalve[_ngcontent-%COMP%]{color:#000;font-weight:800;letter-spacing:2px}"]})}return e})();var WA=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275cmp=pe({type:e,selectors:[["app-restaurantbilings"]],standalone:!0,features:[ve],decls:9,vars:0,consts:[[1,"displaybox"],[1,"logo"],[1,"buttons"],[1,"footstatic"]],template:function(r,i){r&1&&(F(0,"main")(1,"div",0)(2,"div",1)(3,"h1"),$(4,"EasyOrder"),L()(),F(5,"div",2)(6,"h1"),$(7,"Brak Projektu!"),L()(),_e(8,"div",3),L()())},styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;padding:32px;position:relative;background:#000!important;color:#ffa700}.displaybox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center;position:relative}.logo[_ngcontent-%COMP%]{display:flex;font-size:45%;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center;margin-bottom:48px}body[_ngcontent-%COMP%]{background:#000!important;color:#ffa700}h1[_ngcontent-%COMP%]{font-size:200%}"]})}return e})();var GA=(()=>{class e{navigationService;constructor(n){this.navigationService=n,qe(dt.firebaseConfig)}goToPage(n){this.navigationService.NavigateTo(n)}deleteaccount(){let n=ye(),r=sessionStorage.getItem("userId"),i=fe(n,`Owners/${r}`);Ha(i).then(()=>{console.log("owner deleted successfully"),this.navigationService.NavigateTo("landingpage")}).catch(s=>{console.error("Error deleting table:",s)})}static \u0275fac=function(r){return new(r||e)(re(ft))};static \u0275cmp=pe({type:e,selectors:[["app-restaurantsettings"]],standalone:!0,features:[ve],decls:19,vars:0,consts:[[1,"displaybox"],[1,"logo"],[1,"buttons"],[1,"alltablesqrcodes",3,"click"],[1,"tablesettings",3,"click"],[1,"waitersoptions",3,"click"],[1,"myrestaaurants",3,"click"],[1,"deleteaccount",3,"click"],[1,"footstatic"]],template:function(r,i){r&1&&(F(0,"main")(1,"div",0)(2,"div",1)(3,"h1"),$(4,"EasyOrder"),L()(),F(5,"div",2)(6,"button",3),ie("click",function(){return i.goToPage("alltablesqrcodes")}),$(7,"Pobierz kody QR Stolik\xF3w"),L(),F(8,"button",4),ie("click",function(){return i.goToPage("tablesettings")}),$(9,"Ustawienia Stolik\xF3w"),L(),F(10,"button",5),ie("click",function(){return i.goToPage("waitersettings")}),$(11,"Opcje dotycz\u0105ce kelner\xF3w"),L(),F(12,"button",6),ie("click",function(){return i.goToPage("changerestaurant")}),$(13,"Moje restauracje"),L(),F(14,"button",6),ie("click",function(){return i.goToPage("newrestaurant")}),$(15,"Dodaj restauracje"),L(),F(16,"button",7),ie("click",function(){return i.deleteaccount()}),$(17,"Usu\u0144 Konto"),L()(),_e(18,"div",8),L()())},styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;padding:16px;position:relative}.displaybox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center;position:relative}.logo[_ngcontent-%COMP%]{display:flex;font-size:45%;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center;margin-bottom:48px}.buttons[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center}.buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;background:#fff;padding:24px;font-size:110%;color:#000;font-weight:600;letter-spacing:2px;border:1px solid #000000;transition:all .5s;margin-bottom:24px}"]})}return e})();var $A=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275cmp=pe({type:e,selectors:[["app-restaurantrevievs"]],standalone:!0,features:[ve],decls:2,vars:0,template:function(r,i){r&1&&(F(0,"p"),$(1,"restaurantrevievs works!"),L())}})}return e})();var qA=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275cmp=pe({type:e,selectors:[["app-restaurantstats"]],standalone:!0,features:[ve],decls:2,vars:0,template:function(r,i){r&1&&(F(0,"p"),$(1,"restaurantstats works!"),L())}})}return e})();function cV(e,t){e&1&&(F(0,"p"),$(1,"Brak stolik\xF3w przypisanych do restauracji."),L())}function lV(e,t){if(e&1){let n=fn();F(0,"button",6),ie("click",function(){let i=kt(n).$implicit,s=St(2);return Lt(s.setTable(i.id))}),$(1),L()}if(e&2){let n=t.$implicit;ae(),Cn(" ",n.name," ")}}function uV(e,t){if(e&1&&lr(0,lV,2,1,"button",5,cr),e&2){let n=St();ur(n.tables)}}var YA=(()=>{class e{navigationService;tables=[];constructor(n){this.navigationService=n;let r=qe(dt.firebaseConfig)}ngOnInit(){this.loadTables()}loadTables(){let n=ye(),r=localStorage.getItem("currentRestaurant"),i=sessionStorage.getItem("userId");if(!r){console.error("No current restaurant found in local storage");return}let s=fe(n,`Owners/${i}/Restaurants/${r}/Tables`);tt(s).then(l=>{if(l.exists()){let h=l.val();this.tables=Object.values(h)}else console.log("No tables found")}).catch(l=>{console.error("Error loading tables:",l)})}setTable(n){localStorage.setItem("currentTable",n),this.goToPage("tableedit")}goToPage(n){this.navigationService.NavigateTo(n)}static \u0275fac=function(r){return new(r||e)(re(ft))};static \u0275cmp=pe({type:e,selectors:[["app-tablemanage"]],standalone:!0,features:[ve],decls:13,vars:1,consts:[[1,"displaybox"],[1,"logo"],[1,"buttons"],[1,"footstatic"],[3,"click"],[1,"table-button"],[1,"table-button",3,"click"]],template:function(r,i){r&1&&(F(0,"main")(1,"div",0)(2,"div",1)(3,"h1"),$(4,"EasyOrder"),L()(),F(5,"div",2),jn(6,cV,2,0,"p")(7,uV,2,0),L(),F(8,"div",3)(9,"button",4),ie("click",function(){return i.goToPage("tablecreate")}),$(10,"Dodaj stolik"),L(),F(11,"button",4),ie("click",function(){return i.goToPage("tablegroupmanage")}),$(12,"Edytuj grupy"),L()()()()),r&2&&(ae(6),Hn(i.tables.length===0?6:7))},styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;padding:16px;position:relative}.displaybox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center;position:relative}.logo[_ngcontent-%COMP%]{display:flex;font-size:45%;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center;margin-bottom:48px}.buttons[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:flex-start;align-items:center;align-content:center}.buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{text-align:left;width:100%;background:#fff;padding:24px;font-size:110%;color:#000;font-weight:600;letter-spacing:2px;border:1px solid #000000;transition:all .5s;margin-bottom:24px}.footstatic[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center}.footstatic[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:calc(100% - 16px);background:#fff;padding:24px;font-size:110%;color:#000;font-weight:600;letter-spacing:2px;border:1px solid #000000;transition:all .5s;margin-bottom:24px;margin-right:8px}"]})}return e})();var ZA=(()=>{class e{navigationService;name="";description="";constructor(n){this.navigationService=n,qe(dt.firebaseConfig)}onSubmit(n){n.preventDefault();let r=Date.now().toString(),i="0g",s=localStorage.getItem("currentRestaurant");if(!s){alert("Nie wybrano restauracji.");return}let l={id:r,group_id:i,name:this.name,is_blocked:!1,description:this.description?this.description:""};this.saveTable(l,s)}saveTable(n,r){let i=ye(),s=fe(i,`Owners/${sessionStorage.getItem("userId")}/Restaurants/${r}/Tables`);Qt(s,{[n.id]:n}).then(()=>{console.log("Stolik dodany pomy\u015Blnie:",n),this.navigationService.NavigateTo("tablemanage"),this.resetForm()}).catch(l=>{console.error("B\u0142\u0105d podczas dodawania stolika:",l)})}resetForm(){this.name="",this.description=""}static \u0275fac=function(r){return new(r||e)(re(ft))};static \u0275cmp=pe({type:e,selectors:[["app-tablecreate"]],standalone:!0,features:[ve],decls:14,vars:2,consts:[[1,"displaybox"],[1,"logo"],[1,"buttons"],[3,"ngSubmit"],["type","text","id","name","name","name","placeholder","Nazwa Stolika","required","",3,"ngModelChange","ngModel"],["type","text","id","description","name","description","placeholder","Opis . . . ",3,"ngModelChange","ngModel"],["type","submit",1,"addtable"],[1,"footstatic"]],template:function(r,i){r&1&&(F(0,"main")(1,"div",0)(2,"div",1)(3,"h1"),$(4,"EasyOrder"),L()(),F(5,"div",2)(6,"form",3),ie("ngSubmit",function(l){return i.onSubmit(l)}),F(7,"div")(8,"input",4),Zt("ngModelChange",function(l){return nn(i.name,l)||(i.name=l),l}),L()(),F(9,"div")(10,"input",5),Zt("ngModelChange",function(l){return nn(i.description,l)||(i.description=l),l}),L()(),F(11,"button",6),$(12,"Dodaj stolik"),L()()(),_e(13,"div",7),L()()),r&2&&(ae(8),Yt("ngModel",i.name),ae(2),Yt("ngModel",i.description))},dependencies:[zn,ni,fr,ei,ti,Br,Fr,Lr],styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;padding:16px;position:relative}.displaybox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center;position:relative}.logo[_ngcontent-%COMP%]{display:flex;font-size:45%;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center;margin-bottom:48px}.buttons[_ngcontent-%COMP%]{width:100%;border:1px solid #000000;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:flex-start;align-items:center;align-content:center}.buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;background:#fff;padding:24px;font-size:110%;color:#000;font-weight:600;letter-spacing:2px;border:1px solid #000000;transition:all .5s;margin-bottom:24px}.footstatic[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center}.footstatic[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:calc(100% - 16px);background:#fff;padding:24px;font-size:110%;color:#000;font-weight:600;letter-spacing:2px;border:1px solid #000000;transition:all .5s;margin-bottom:24px;margin-right:8px}form[_ngcontent-%COMP%]{width:100%;padding:24px;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;border:1px solid #000000;height:24px;margin-bottom:16px}input[_ngcontent-%COMP%]:last-child{height:100px}"]})}return e})();function dV(e,t){if(e&1){let n=fn();F(0,"button",9),ie("click",function(){kt(n);let i=St(2);return Lt(i.blockTable())}),$(1,"Zablokuj"),L()}}function fV(e,t){if(e&1){let n=fn();F(0,"button",9),ie("click",function(){kt(n);let i=St(2);return Lt(i.unlockTable())}),$(1,"Odblokuj"),L()}}function hV(e,t){if(e&1&&jn(0,dV,2,0,"button")(1,fV,2,0,"button"),e&2){let n=St();Hn((n.table==null?null:n.table.is_blocked)==!1?0:-1),ae(),Hn((n.table==null?null:n.table.is_blocked)==!0?1:-1)}}var XA=(()=>{class e{navigationService;tableId=null;table=null;tableGroupName=null;groupColor=null;tableBlockAllowed=!0;restaurantId="";constructor(n){this.navigationService=n,qe(dt.firebaseConfig)}ngOnInit(){this.loadTable(),this.loadSettings()}loadSettings(){let n=sessionStorage.getItem("userId");if(this.restaurantId=localStorage.getItem("currentRestaurant")??"",!n||!this.restaurantId){console.error("Missing owner or restaurant ID");return}let r=ye(),i=fe(r,`Owners/${n}/Restaurants/${this.restaurantId}/settings`);tt(i).then(s=>{if(s.exists()){let l=s.val();this.tableBlockAllowed=l.table_block_allowed}else console.log("No settings found for this restaurant")}).catch(s=>{console.error("Error loading settings:",s)})}deleteTable(){let n=ye(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant");if(!this.tableId||!r||!i){console.error("Missing table, owner, or restaurant ID");return}let s=fe(n,`Owners/${r}/Restaurants/${i}/Tables/${this.tableId}`);Ha(s).then(()=>{console.log("Table deleted successfully"),this.navigationService.NavigateTo("tablemanage")}).catch(l=>{console.error("Error deleting table:",l)})}blockTable(){let n=ye(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant");if(!this.tableId||!r||!i){console.error("Missing table, owner, or restaurant ID");return}let s=fe(n,`Owners/${r}/Restaurants/${i}/Tables/${this.tableId}`);Qt(s,{is_blocked:!0}).then(()=>{console.log("Table blocked successfully"),location.reload()}).catch(l=>{console.error("Error blocking table:",l)})}unlockTable(){let n=ye(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant");if(!this.tableId||!r||!i){console.error("Missing table, owner, or restaurant ID");return}let s=fe(n,`Owners/${r}/Restaurants/${i}/Tables/${this.tableId}`);Qt(s,{is_blocked:!1}).then(()=>{console.log("Table unlocked successfully"),location.reload()}).catch(l=>{console.error("Error blocking table:",l)})}saveTable(){}showQRCode(){this.navigationService.NavigateTo("showtableqr")}loadTable(){if(this.tableId=localStorage.getItem("currentTable"),!this.tableId){console.error("No current table found in local storage");return}let n=ye(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant"),s=fe(n,`Owners/${r}/Restaurants/${i}/Tables/${this.tableId}`);tt(s).then(l=>{l.exists()?(this.table=l.val(),this.loadTableGroup()):console.log("No table found")}).catch(l=>{console.error("Error loading table:",l)})}loadTableGroup(){let n=ye(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant");if(!this.table?.group_id||this.table.group_id==="0g"){this.tableGroupName="Stoliki bez grupy",this.groupColor="#000000";return}let s=fe(n,`Owners/${r}/Restaurants/${i}/TableGroups/${this.table.group_id}`);tt(s).then(l=>{if(l.exists()){let h=l.val();this.tableGroupName=h.name,this.groupColor=h.color}else console.log("No group found for this table")}).catch(l=>{console.error("Error loading group:",l)})}static \u0275fac=function(r){return new(r||e)(re(ft))};static \u0275cmp=pe({type:e,selectors:[["app-tableedit"]],standalone:!0,features:[ve],decls:25,vars:6,consts:[[1,"displaybox"],[1,"logo"],[1,"flexcontainer"],[1,"buttons"],[1,"colorbar"],[1,"head"],["name","description","id","description","placeholder","Description","readonly","",3,"value"],[1,"actionbtns"],[1,"arow"],[3,"click"],[1,"footstatic"]],template:function(r,i){r&1&&(F(0,"main")(1,"div",0)(2,"div",1)(3,"h1"),$(4,"EasyOrder"),L()(),F(5,"div",2)(6,"div",3),_e(7,"div",4),F(8,"div",5)(9,"h3"),$(10),L(),F(11,"h3"),$(12),L()(),_e(13,"textarea",6),F(14,"div",7)(15,"div",8)(16,"button",9),ie("click",function(){return i.deleteTable()}),$(17,"Usu\u0144 stolik"),L(),jn(18,hV,2,2),L(),F(19,"div",8)(20,"button"),$(21,"Usu\u0144 zam\xF3wienie"),L(),F(22,"button",9),ie("click",function(){return i.showQRCode()}),$(23,"poka\u017C kod qr"),L()()()()(),_e(24,"div",10),L()()),r&2&&(ae(7),Qd("background-color",i.groupColor),ae(3),uo(i.table==null?null:i.table.name),ae(2),uo(i.tableGroupName),ae(),Ti("value",i.table==null?null:i.table.description),ae(5),Hn(i.tableBlockAllowed==!0?18:-1))},styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;padding:16px;position:relative}.displaybox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center;position:relative}.flexcontainer[_ngcontent-%COMP%]{width:100%}.logo[_ngcontent-%COMP%]{display:flex;font-size:45%;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center;margin-bottom:48px}.buttons[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center;border:1px solid #000000}.buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:calc(100% - 24px);background:#fff;padding:24px;font-size:110%;color:#000;font-weight:600;letter-spacing:2px;border:1px solid #000000;transition:all .5s}.footstatic[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center}.footstatic[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;background:#fff;padding:24px;font-size:110%;color:#000;font-weight:600;letter-spacing:2px;border:1px solid #000000;transition:all .5s;margin-bottom:24px;margin-right:8px}.arow[_ngcontent-%COMP%]{width:calc(100% - 24px);display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:space-evenly;align-items:center;align-content:center}.arow[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:95%;width:calc(100% - 24px);margin-bottom:16px}.arow[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-child{margin-right:8px}.arow[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-child{margin-left:8px}.actionbtns[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center}.colorbar[_ngcontent-%COMP%]{height:24px;width:100%}.savebtn[_ngcontent-%COMP%]{margin-top:16px;margin-bottom:16px}.head[_ngcontent-%COMP%]{width:100%;padding:8px;display:flex;flex-direction:row;justify-content:space-between;align-items:center;align-content:center}.head[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0}textarea[_ngcontent-%COMP%]{width:calc(100% - 24px);height:100px;margin-bottom:16px;resize:none;border:1px solid #000000}"]})}return e})();var QA=(()=>{class e{route;router;tableId=null;uniqueLinkToken=null;ownerId=null;restaurantid=null;constructor(n,r){this.route=n,this.router=r,qe(dt.firebaseConfig)}ngOnInit(){this.route.queryParams.subscribe(n=>{this.tableId=n.tableid||null,this.uniqueLinkToken=n.uniqueLinkToken||null,this.ownerId=n.ownerid||null,this.restaurantid=n.restaurantid||null})}setTable(n){let r=localStorage.getItem("currentRestaurant"),i=ye();if(!this.ownerId||!this.restaurantid||!this.tableId||!this.uniqueLinkToken){console.error("Missing required data");return}let s=fe(i,`Owners/${this.ownerId}/Restaurants/${r}/settings`);tt(s).then(l=>{l.exists()?l.val().order_number_typed_by_waiter_required?this.verifyOrderNumber(n):this.saveTableAssignment(n):console.error("Settings not found")}).catch(l=>{console.error("Error loading settings:",l)})}verifyOrderNumber(n){let r=ye(),i=fe(r,`Owners/${this.ownerId}/Restaurants/${this.restaurantid}/Orders`);tt(i).then(s=>{if(s.exists()){let l=s.val();Object.values(l).some(g=>g.name===n)?this.saveTableAssignment(n):console.error("Order not found")}else console.log("No orders found")}).catch(s=>{console.error("Error checking order number:",s)})}saveTableAssignment(n){localStorage.setItem("customercurrentTable",this.tableId),localStorage.setItem("uniqueLinkToken",this.uniqueLinkToken),localStorage.setItem("orderNumber",n),localStorage.setItem("restaurantid",this.restaurantid),localStorage.setItem("ownerid",this.ownerId),this.router.navigate(["/tableordered"])}static \u0275fac=function(r){return new(r||e)(re(fo),re(po))};static \u0275cmp=pe({type:e,selectors:[["app-settable"]],standalone:!0,features:[ve],decls:13,vars:0,consts:[["orderNumberInput",""],[1,"displaybox"],[1,"logo"],[1,"buttons"],["type","number","placeholder","numer zam\xF3wienia"],[3,"click"],[1,"footstatic"]],template:function(r,i){if(r&1){let s=fn();F(0,"main")(1,"div",1)(2,"div",2)(3,"h1"),$(4,"EasyOrder"),L()(),F(5,"div",3)(6,"label"),$(7,"Wprowad\u017A numer zam\xF3wienia"),L(),_e(8,"input",4,0),F(10,"button",5),ie("click",function(){kt(s);let h=ef(9);return Lt(i.setTable(h.value))}),$(11,"Przypisz stolik"),L()(),_e(12,"div",6),L()()}}})}return e})();function pV(e,t){if(e&1){let n=fn();F(0,"div",8),ie("dragstart",function(i){let s=kt(n).$implicit,l=St();return Lt(l.onDragStart(i,s))}),F(1,"button",9),ie("click",function(){let i=kt(n).$implicit,s=St();return Lt(s.setTable(i.id))}),$(2),L()()}if(e&2){let n=t.$implicit;ae(2),Cn(" ",n.name," ")}}function gV(e,t){if(e&1){let n=fn();F(0,"div",8),ie("dragstart",function(i){let s=kt(n).$implicit,l=St(2);return Lt(l.onDragStart(i,s))}),F(1,"button",9),ie("click",function(){let i=kt(n).$implicit,s=St(2);return Lt(s.setTable(i.id))}),$(2),L()()}if(e&2){let n=t.$implicit;ae(2),Cn(" ",n.name," ")}}function mV(e,t){if(e&1){let n=fn();F(0,"div",2),ie("dragover",function(i){kt(n);let s=St();return Lt(s.allowDrop(i))})("drop",function(i){let s=kt(n).$implicit,l=St();return Lt(l.onDrop(i,s.id))}),F(1,"div",3)(2,"h3"),$(3),L()(),lr(4,gV,3,1,"div",4,cr),L()}if(e&2){let n=t.$implicit,r=St();ae(3),uo(n.name),ae(),ur(r.getTablesForGroup(n.id))}}var KA=(()=>{class e{navigationService;cd;tableGroups=[];tables=[];draggedTableId=null;ungroupedTables=[];constructor(n,r){this.navigationService=n,this.cd=r,qe(dt.firebaseConfig)}ngOnInit(){this.loadGroupsAndTables()}loadGroupsAndTables(){let n=ye(),r=localStorage.getItem("currentRestaurant"),i=sessionStorage.getItem("userId");if(!r){console.error("No current restaurant found in local storage");return}let s=fe(n,`Owners/${i}/Restaurants/${r}/Tables`),l=fe(n,`Owners/${i}/Restaurants/${r}/TableGroups`);tt(s).then(h=>{h.exists()?(this.tables=Object.values(h.val()),this.ungroupedTables=this.tables.filter(g=>g.group_id==="0g")):console.log("No tables found")}).catch(h=>{console.error("Error loading tables:",h)}),tt(l).then(h=>{h.exists()?this.tableGroups=Object.values(h.val()):console.log("No table groups found")}).catch(h=>{console.error("Error loading table groups:",h)})}getTablesForGroup(n){return this.tables.filter(r=>r.group_id===n)}onDragStart(n,r){this.draggedTableId=r.id,n.dataTransfer?.setData("text",r.id)}onDrop(n,r){n.preventDefault();let i=this.draggedTableId||n.dataTransfer?.getData("text");if(i){let s=this.tables.find(l=>l.id===i);s&&(s.group_id==="0g"&&(this.ungroupedTables=this.ungroupedTables.filter(l=>l.id!==s.id)),s.group_id=r,r==="0g"&&this.ungroupedTables.push(s),this.updateTableGroup(s),this.cd.detectChanges(),this.draggedTableId=null)}}allowDrop(n){n.preventDefault()}updateTableGroup(n){let r=ye(),i=localStorage.getItem("currentRestaurant"),s=sessionStorage.getItem("userId");if(!i){console.error("No current restaurant found in local storage");return}let l=fe(r,`Owners/${s}/Restaurants/${i}/Tables/${n.id}`);Qt(l,{group_id:n.group_id}).then(()=>{console.log(`Table ${n.name} moved to group ${n.group_id}`)}).catch(h=>{console.error("Error updating table group:",h)})}setTable(n){localStorage.setItem("currentTable",n),this.goToPage("tableedit")}goToPage(n){this.navigationService.NavigateTo(n)}static \u0275fac=function(r){return new(r||e)(re(ft),re(Mi))};static \u0275cmp=pe({type:e,selectors:[["app-tablegroupmanage"]],standalone:!0,features:[ve],decls:16,vars:0,consts:[[1,"displaybox"],[1,"logo"],[1,"table-group",3,"dragover","drop"],[1,"head"],["draggable","true"],[1,"table-group"],[1,"footstatic"],[3,"click"],["draggable","true",3,"dragstart"],[1,"table-button",3,"click"]],template:function(r,i){r&1&&(F(0,"main")(1,"div",0)(2,"div",1)(3,"h1"),$(4,"EasyOrder"),L()(),F(5,"div",2),ie("dragover",function(l){return i.allowDrop(l)})("drop",function(l){return i.onDrop(l,"0g")}),F(6,"div",3)(7,"h3"),$(8,"Stoliki bez grupy"),L()(),lr(9,pV,3,1,"div",4,cr),L(),lr(11,mV,6,1,"div",5,cr),F(13,"div",6)(14,"button",7),ie("click",function(){return i.goToPage("tablegroupcreate")}),$(15,"Dodaj now\u0105 grup\u0119"),L()()()()),r&2&&(ae(9),ur(i.ungroupedTables),ae(2),ur(i.tableGroups))},styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;padding:16px;position:relative}.displaybox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center;position:relative}.logo[_ngcontent-%COMP%]{display:flex;font-size:45%;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center;margin-bottom:48px}.buttons[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:flex-start;align-items:center;align-content:center}.buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{text-align:left;width:100%;background:#fff;padding:24px;font-size:110%;color:#000;font-weight:600;letter-spacing:2px;border:1px solid #000000;transition:all .5s;margin-bottom:24px}.footstatic[_ngcontent-%COMP%]{width:100%}.footstatic[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;background:#fff;padding:24px;font-size:110%;color:#000;font-weight:600;letter-spacing:2px;border:1px solid #000000;transition:all .5s;margin-bottom:24px;margin-right:8px}.table-group[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:flex-start;align-items:flex-start;align-content:center;border:1px solid #000000;padding:0;margin-bottom:20px;min-height:100px}.table-group[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{width:100%;padding:8px;height:40px;font-size:100%;border:1px solid #000000}.table-group[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0}.table-group[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:100%}.table-button[_ngcontent-%COMP%]{width:100%;border:1px solid #000000;height:60px;display:block;text-align:left;margin-bottom:0;padding:8px;font-weight:700}.table-group[_ngcontent-%COMP%]:hover{background-color:#f1f1f1}"]})}return e})();var JA=(()=>{class e{navigationService;name="";description="";color="";location="";constructor(n){this.navigationService=n,qe(dt.firebaseConfig)}onSubmit(n){n.preventDefault();let r=Date.now().toString(),i=localStorage.getItem("currentRestaurant");if(!i){alert("Nie wybrano restauracji.");return}let s={id:r,name:this.name,color:this.color,description:this.description?this.description:"",location:this.location?this.location:""};this.saveTableGroup(s,i)}saveTableGroup(n,r){let i=ye(),s=fe(i,`Owners/${sessionStorage.getItem("userId")}/Restaurants/${r}/TableGroups`);Qt(s,{[n.id]:n}).then(()=>{console.log("Grupa stolik\xF3w dodana pomy\u015Blnie:",n),this.navigationService.NavigateTo("tablegroupmanage"),this.resetForm()}).catch(l=>{console.error("B\u0142\u0105d podczas dodawania grupy stolik\xF3w:",l)})}resetForm(){this.name="",this.description="",this.color="",this.location=""}static \u0275fac=function(r){return new(r||e)(re(ft))};static \u0275cmp=pe({type:e,selectors:[["app-tablegroupcreate"]],standalone:!0,features:[ve],decls:18,vars:4,consts:[[1,"displaybox"],[1,"logo"],[1,"buttons"],[3,"ngSubmit"],["type","text","id","name","name","name","placeholder","Nazwa Grupy Stolika","required","",3,"ngModelChange","ngModel"],["type","text","id","description","name","description","placeholder","Opis grupy . . . ",3,"ngModelChange","ngModel"],["type","color","id","color","name","color","placeholder","Kolor grupy",3,"ngModelChange","ngModel"],["type","text","id","location","name","location","placeholder","Lokalizacja grupy",3,"ngModelChange","ngModel"],["type","submit",1,"addtable"],[1,"footstatic"]],template:function(r,i){r&1&&(F(0,"main")(1,"div",0)(2,"div",1)(3,"h1"),$(4,"EasyOrder"),L()(),F(5,"div",2)(6,"form",3),ie("ngSubmit",function(l){return i.onSubmit(l)}),F(7,"div")(8,"input",4),Zt("ngModelChange",function(l){return nn(i.name,l)||(i.name=l),l}),L()(),F(9,"div")(10,"input",5),Zt("ngModelChange",function(l){return nn(i.description,l)||(i.description=l),l}),L()(),F(11,"div")(12,"input",6),Zt("ngModelChange",function(l){return nn(i.color,l)||(i.color=l),l}),L()(),F(13,"div")(14,"input",7),Zt("ngModelChange",function(l){return nn(i.location,l)||(i.location=l),l}),L()(),F(15,"button",8),$(16,"Dodaj grup\u0119 stolik\xF3w"),L()()(),_e(17,"div",9),L()()),r&2&&(ae(8),Yt("ngModel",i.name),ae(2),Yt("ngModel",i.description),ae(2),Yt("ngModel",i.color),ae(2),Yt("ngModel",i.location))},dependencies:[zn,ni,fr,ei,ti,Br,Fr,Lr]})}return e})();var Za=Tv(tT(),1);var dU=["qrcElement"],Gh=(()=>{class e{constructor(n,r){this.renderer=n,this.sanitizer=r,this.allowEmptyString=!1,this.colorDark="#000000ff",this.colorLight="#ffffffff",this.cssClass="qrcode",this.elementType="canvas",this.errorCorrectionLevel="M",this.margin=4,this.qrdata="",this.scale=4,this.width=10,this.qrCodeURL=new At,this.context=null}ngOnChanges(){return X(this,null,function*(){yield this.createQRCode()})}isValidQrCodeText(n){return this.allowEmptyString===!1?!(typeof n>"u"||n===""||n==="null"||n===null):!(typeof n>"u")}toDataURL(n){return new Promise((r,i)=>{(0,Za.toDataURL)(this.qrdata,n,(s,l)=>{s?i(s):r(l)})})}toCanvas(n,r){return new Promise((i,s)=>{(0,Za.toCanvas)(n,this.qrdata,r,l=>{l?s(l):i("success")})})}toSVG(n){return new Promise((r,i)=>{(0,Za.toString)(this.qrdata,n,(s,l)=>{s?i(s):r(l)})})}renderElement(n){for(let r of this.qrcElement.nativeElement.childNodes)this.renderer.removeChild(this.qrcElement.nativeElement,r);this.renderer.appendChild(this.qrcElement.nativeElement,n)}createQRCode(){return X(this,null,function*(){this.version&&this.version>40?(console.warn("[angularx-qrcode] max value for `version` is 40"),this.version=40):this.version&&this.version<1?(console.warn("[angularx-qrcode]`min value for `version` is 1"),this.version=1):this.version!==void 0&&isNaN(this.version)&&(console.warn("[angularx-qrcode] version should be a number, defaulting to auto."),this.version=void 0);try{if(!this.isValidQrCodeText(this.qrdata))throw new Error("[angularx-qrcode] Field `qrdata` is empty, set 'allowEmptyString=\"true\"' to overwrite this behaviour.");this.isValidQrCodeText(this.qrdata)&&this.qrdata===""&&(this.qrdata=" ");let n={color:{dark:this.colorDark,light:this.colorLight},errorCorrectionLevel:this.errorCorrectionLevel,margin:this.margin,scale:this.scale,version:this.version,width:this.width},r=this.imageSrc,i=this.imageHeight||40,s=this.imageWidth||40;switch(this.elementType){case"canvas":{let l=this.renderer.createElement("canvas");this.context=l.getContext("2d"),this.toCanvas(l,n).then(()=>{if(this.ariaLabel&&this.renderer.setAttribute(l,"aria-label",`${this.ariaLabel}`),this.title&&this.renderer.setAttribute(l,"title",`${this.title}`),r&&this.context){this.centerImage=new Image(s,i),r!==this.centerImage.src&&(this.centerImage.crossOrigin="anonymous",this.centerImage.src=r),i!==this.centerImage.height&&(this.centerImage.height=i),s!==this.centerImage.width&&(this.centerImage.width=s);let h=this.centerImage;h&&(h.onload=()=>{this.context?.drawImage(h,l.width/2-s/2,l.height/2-i/2,s,i)})}this.renderElement(l),this.emitQRCodeURL(l)}).catch(h=>{console.error("[angularx-qrcode] canvas error:",h)});break}case"svg":{let l=this.renderer.createElement("div");this.toSVG(n).then(h=>{this.renderer.setProperty(l,"innerHTML",h);let g=l.firstChild;this.renderer.setAttribute(g,"height",`${this.width}`),this.renderer.setAttribute(g,"width",`${this.width}`),this.renderElement(g),this.emitQRCodeURL(g)}).catch(h=>{console.error("[angularx-qrcode] svg error:",h)});break}case"url":case"img":default:{let l=this.renderer.createElement("img");this.toDataURL(n).then(h=>{this.alt&&l.setAttribute("alt",this.alt),this.ariaLabel&&l.setAttribute("aria-label",this.ariaLabel),l.setAttribute("src",h),this.title&&l.setAttribute("title",this.title),this.renderElement(l),this.emitQRCodeURL(l)}).catch(h=>{console.error("[angularx-qrcode] img/url error:",h)})}}}catch(n){console.error("[angularx-qrcode] Error generating QR Code:",n.message)}})}convertBase64ImageUrlToBlob(n){let r=n.split(";base64,"),i=r[0].split(":")[1],s=atob(r[1]),l=new Uint8Array(s.length);for(let h=0;h<s.length;++h)l[h]=s.charCodeAt(h);return new Blob([l],{type:i})}emitQRCodeURL(n){let r=n.constructor.name;if(r===SVGSVGElement.name){let g=n.outerHTML,m=new Blob([g],{type:"image/svg+xml"}),C=URL.createObjectURL(m),E=this.sanitizer.bypassSecurityTrustUrl(C);this.qrCodeURL.emit(E);return}let i="";r===HTMLCanvasElement.name&&(i=n.toDataURL("image/png")),r===HTMLImageElement.name&&(i=n.src);let s=this.convertBase64ImageUrlToBlob(i),l=URL.createObjectURL(s),h=this.sanitizer.bypassSecurityTrustUrl(l);this.qrCodeURL.emit(h)}static{this.\u0275fac=function(r){return new(r||e)(re(lo),re(m0))}}static{this.\u0275cmp=pe({type:e,selectors:[["qrcode"]],viewQuery:function(r,i){if(r&1&&Jd(dU,7),r&2){let s;Pc(s=kc())&&(i.qrcElement=s.first)}},inputs:{allowEmptyString:"allowEmptyString",colorDark:"colorDark",colorLight:"colorLight",cssClass:"cssClass",elementType:"elementType",errorCorrectionLevel:"errorCorrectionLevel",imageSrc:"imageSrc",imageHeight:"imageHeight",imageWidth:"imageWidth",margin:"margin",qrdata:"qrdata",scale:"scale",version:"version",width:"width",alt:"alt",ariaLabel:"ariaLabel",title:"title"},outputs:{qrCodeURL:"qrCodeURL"},features:[bi],decls:2,vars:2,consts:[["qrcElement",""]],template:function(r,i){r&1&&_e(0,"div",null,0),r&2&&mI(i.cssClass)},encapsulation:2,changeDetection:0})}}return e})(),$h=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=wi({type:e})}static{this.\u0275inj=vi({})}}return e})();var rT=(()=>{class e{navigationService;tableId=null;table=null;tableGroupName=null;groupColor=null;uniqueLinkToken=null;constructor(n){this.navigationService=n,qe(dt.firebaseConfig)}ngOnInit(){this.loadTable(),this.loadUniqueLinkToken()}loadUniqueLinkToken(){let n=ye(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant"),s=fe(n,`Owners/${r}/Restaurants/${i}/uniqueLinkToken`);tt(s).then(l=>{l.exists()?this.uniqueLinkToken=l.val():console.log("No unique link token found")}).catch(l=>{console.error("Error loading unique link token:",l)})}deleteTable(){let n=ye(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant");if(!this.tableId||!r||!i){console.error("Missing table, owner, or restaurant ID");return}let s=fe(n,`Owners/${r}/Restaurants/${i}/Tables/${this.tableId}`);Ha(s).then(()=>{console.log("Table deleted successfully"),this.navigationService.NavigateTo("tablemanage")}).catch(l=>{console.error("Error deleting table:",l)})}blockTable(){let n=ye(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant");if(!this.tableId||!r||!i){console.error("Missing table, owner, or restaurant ID");return}let s=fe(n,`Owners/${r}/Restaurants/${i}/Tables/${this.tableId}`);Qt(s,{is_blocked:!0}).then(()=>{console.log("Table blocked successfully"),location.reload()}).catch(l=>{console.error("Error blocking table:",l)})}unlockTable(){let n=ye(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant");if(!this.tableId||!r||!i){console.error("Missing table, owner, or restaurant ID");return}let s=fe(n,`Owners/${r}/Restaurants/${i}/Tables/${this.tableId}`);Qt(s,{is_blocked:!1}).then(()=>{console.log("Table unlocked successfully"),location.reload()}).catch(l=>{console.error("Error unlocking table:",l)})}saveTable(){}loadTable(){if(this.tableId=localStorage.getItem("currentTable"),!this.tableId){console.error("No current table found in local storage");return}let n=ye(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant"),s=fe(n,`Owners/${r}/Restaurants/${i}/Tables/${this.tableId}`);tt(s).then(l=>{l.exists()?(this.table=l.val(),this.loadTableGroup()):console.log("No table found")}).catch(l=>{console.error("Error loading table:",l)})}loadTableGroup(){let n=ye(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant");if(!this.table?.group_id||this.table.group_id==="0g"){this.tableGroupName="Stoliki bez grupy",this.groupColor="#000000";return}let s=fe(n,`Owners/${r}/Restaurants/${i}/TableGroups/${this.table.group_id}`);tt(s).then(l=>{if(l.exists()){let h=l.val();this.tableGroupName=h.name,this.groupColor=h.color}else console.log("No group found for this table")}).catch(l=>{console.error("Error loading group:",l)})}getQRCodeData(){let n=this.table?.id||"",r=this.uniqueLinkToken||"",i=sessionStorage.getItem("userId"),s=localStorage.getItem("currentRestaurant");return`https://easyorder.mandarin.com.pl/settable?tableid=${n}&uniqueLinkToken=${r}&ownerid=${i}&restaurantid=${s}`}static \u0275fac=function(r){return new(r||e)(re(ft))};static \u0275cmp=pe({type:e,selectors:[["app-showtableqr"]],standalone:!0,features:[ve],decls:3,vars:13,consts:[[1,"qrcodeImage"],[3,"qrdata","allowEmptyString","alt","ariaLabel","cssClass","colorDark","colorLight","elementType","errorCorrectionLevel","margin","scale","title","width"]],template:function(r,i){r&1&&(F(0,"main")(1,"div",0),_e(2,"qrcode",1),L()()),r&2&&(ae(2),Ti("qrdata","https://easyorder.mandarin.com.pl/settable?tableid="+((i.table==null?null:i.table.id)||"")+"&uniqueLinkToken="+(i.uniqueLinkToken||""))("allowEmptyString",!0)("alt","A custom alt attribute")("ariaLabel","QR Code image with the following content...")("cssClass","center")("colorDark","#000000ff")("colorLight","#ffffffff")("elementType","img")("errorCorrectionLevel","H")("margin",4)("scale",1)("title","A custom title attribute")("width",300))},dependencies:[$h,Gh]})}return e})();var iT=(()=>{class e{tableChangeAllowed=!1;tableBlockAllowed=!1;restaurantId=null;constructor(){qe(dt.firebaseConfig)}ngOnInit(){this.loadSettings()}loadSettings(){let n=sessionStorage.getItem("userId");if(this.restaurantId=localStorage.getItem("currentRestaurant"),!n||!this.restaurantId){console.error("Missing owner or restaurant ID");return}let r=ye(),i=fe(r,`Owners/${n}/Restaurants/${this.restaurantId}/settings`);tt(i).then(s=>{if(s.exists()){let l=s.val();this.tableChangeAllowed=l.table_change_allowed,this.tableBlockAllowed=l.table_block_allowed}else console.log("No settings found for this restaurant")}).catch(s=>{console.error("Error loading settings:",s)})}toggleTableChangeAllowed(){this.tableChangeAllowed=!this.tableChangeAllowed,this.saveSettings()}toggleTableBlockAllowed(){this.tableBlockAllowed=!this.tableBlockAllowed,this.saveSettings()}saveSettings(){let n=sessionStorage.getItem("userId");if(!n||!this.restaurantId){console.error("Missing owner or restaurant ID");return}let r=ye(),i=fe(r,`Owners/${n}/Restaurants/${this.restaurantId}/settings`);Qt(i,{table_change_allowed:this.tableChangeAllowed,table_block_allowed:this.tableBlockAllowed}).then(()=>{console.log("Settings updated successfully")}).catch(s=>{console.error("Error updating settings:",s)})}static \u0275fac=function(r){return new(r||e)};static \u0275cmp=pe({type:e,selectors:[["app-tablesettings"]],standalone:!0,features:[ve],decls:15,vars:2,consts:[[1,"displaybox"],[1,"logo"],[1,"buttons"],[3,"click"],[1,"footstatic"]],template:function(r,i){r&1&&(F(0,"main")(1,"div",0)(2,"div",1)(3,"h1"),$(4,"EasyOrder"),L()(),F(5,"div",2)(6,"label"),$(7,"Opcja Zmiany stolika:"),L(),F(8,"button",3),ie("click",function(){return i.toggleTableChangeAllowed()}),$(9),L(),F(10,"label"),$(11,"Opcja blokowania stolik\xF3w:"),L(),F(12,"button",3),ie("click",function(){return i.toggleTableBlockAllowed()}),$(13),L()(),_e(14,"div",4),L()()),r&2&&(ae(9),Cn(" ",i.tableChangeAllowed?"W\u0142\u0105czona":"Wy\u0142\u0105czona"," "),ae(4),Cn(" ",i.tableBlockAllowed?"W\u0142\u0105czona":"Wy\u0142\u0105czona"," "))}})}return e})();var fU=["pin"],oT=(()=>{class e{order_number_typed_by_waiter_required=!1;waiter_access_pin=1234;restaurantId=null;pinRef;constructor(){qe(dt.firebaseConfig)}ngOnInit(){this.loadSettings()}ngAfterViewInit(){this.pinRef||console.error("PIN input element not found")}loadSettings(){let n=sessionStorage.getItem("userId");if(this.restaurantId=localStorage.getItem("currentRestaurant"),!n||!this.restaurantId){console.error("Missing owner or restaurant ID");return}let r=ye(),i=fe(r,`Owners/${n}/Restaurants/${this.restaurantId}/settings`);tt(i).then(s=>{if(s.exists()){let l=s.val();this.order_number_typed_by_waiter_required=l.order_number_typed_by_waiter_required,this.waiter_access_pin=l.waiter_access_pin}else console.log("No settings found for this restaurant")}).catch(s=>{console.error("Error loading settings:",s)})}toggleTableChangeAllowed(){this.order_number_typed_by_waiter_required=!this.order_number_typed_by_waiter_required,this.saveSettings()}toggleTableBlockAllowed(){this.pinRef&&this.pinRef.nativeElement?(this.waiter_access_pin=this.pinRef.nativeElement.value,this.saveSettings()):console.error("PIN input element not available")}saveSettings(){let n=sessionStorage.getItem("userId");if(!n||!this.restaurantId){console.error("Missing owner or restaurant ID");return}let r=ye(),i=fe(r,`Owners/${n}/Restaurants/${this.restaurantId}/settings`);Qt(i,{order_number_typed_by_waiter_required:this.order_number_typed_by_waiter_required,waiter_access_pin:this.waiter_access_pin}).then(()=>{console.log("Settings updated successfully")}).catch(s=>{console.error("Error updating settings:",s)})}static \u0275fac=function(r){return new(r||e)};static \u0275cmp=pe({type:e,selectors:[["app-waitersettings"]],viewQuery:function(r,i){if(r&1&&Jd(fU,5),r&2){let s;Pc(s=kc())&&(i.pinRef=s.first)}},standalone:!0,features:[ve],decls:17,vars:2,consts:[["pin",""],[1,"displaybox"],[1,"logo"],[1,"buttons"],[3,"click"],["type","number",3,"value"],[1,"footstatic"]],template:function(r,i){if(r&1){let s=fn();F(0,"main")(1,"div",1)(2,"div",2)(3,"h1"),$(4,"EasyOrder"),L()(),F(5,"div",3)(6,"label"),$(7,"Opcja Zmiany stolika:"),L(),F(8,"button",4),ie("click",function(){return kt(s),Lt(i.toggleTableChangeAllowed())}),$(9),L(),F(10,"label"),$(11,"Opcja blokowania stolik\xF3w:"),L(),_e(12,"input",5,0),F(14,"button",4),ie("click",function(){return kt(s),Lt(i.toggleTableBlockAllowed())}),$(15,"Update PIN"),L()(),_e(16,"div",6),L()()}r&2&&(ae(9),Cn(" ",i.order_number_typed_by_waiter_required?"W\u0142\u0105czona":"Wy\u0142\u0105czona"," "),ae(3),Ti("value",i.waiter_access_pin))}})}return e})();function hU(e,t){if(e&1&&(F(0,"div",2),_e(1,"qrcode",3),L()),e&2){let n=t.$implicit,r=St();ae(),Ti("qrdata",r.getQRCodeData(n.id))("allowEmptyString",!0)("alt","QR code for table "+n.name)("cssClass","center")("colorDark","#000000ff")("colorLight","#ffffffff")("elementType","img")("errorCorrectionLevel","H")("margin",4)("scale",1)("width",300)}}var sT=(()=>{class e{tables=[];uniqueLinkToken=null;constructor(){qe(dt.firebaseConfig)}ngOnInit(){this.loadTables(),this.loadUniqueLinkToken()}loadTables(){let n=sessionStorage.getItem("userId"),r=localStorage.getItem("currentRestaurant");if(!n||!r){console.error("Missing owner or restaurant ID");return}let i=ye(),s=fe(i,`Owners/${n}/Restaurants/${r}/Tables`);tt(s).then(l=>{l.exists()?this.tables=Object.values(l.val()):console.log("No tables found")}).catch(l=>{console.error("Error loading tables:",l)})}loadUniqueLinkToken(){let n=ye(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant"),s=fe(n,`Owners/${r}/Restaurants/${i}/uniqueLinkToken`);tt(s).then(l=>{l.exists()?this.uniqueLinkToken=l.val():console.log("No unique link token found")}).catch(l=>{console.error("Error loading unique link token:",l)})}getQRCodeData(n){let r=this.uniqueLinkToken||"",i=sessionStorage.getItem("userId"),s=localStorage.getItem("currentRestaurant");return`https://easyorder.mandarin.com.pl/settable?tableid=${n}&uniqueLinkToken=${r}&ownerid=${i}&restaurantid=${s}`}printQRCodePage(){window.print()}static \u0275fac=function(r){return new(r||e)};static \u0275cmp=pe({type:e,selectors:[["app-alltableqrcodes"]],standalone:!0,features:[ve],decls:6,vars:0,consts:[[3,"click"],[1,"qr-code-container"],[1,"qr-container"],[3,"qrdata","allowEmptyString","alt","cssClass","colorDark","colorLight","elementType","errorCorrectionLevel","margin","scale","width"]],template:function(r,i){r&1&&(F(0,"div")(1,"button",0),ie("click",function(){return i.printQRCodePage()}),$(2,"Print QR Codes"),L()(),F(3,"div",1),lr(4,hU,2,11,"div",2,cr),L()),r&2&&(ae(4),ur(i.tables))},dependencies:[$h,Gh],styles:[".qr-code-container[_ngcontent-%COMP%]{width:100%;min-height:max-content;display:flex;flex-wrap:wrap;justify-content:center}.qr-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;flex-wrap:nowrap;width:375px;height:565px;background:url(https://cdn1.mandarin.com.pl/qrbg2.png) no-repeat center center;background-size:cover;margin:10px;padding:10px;text-align:center;border:1px dashed black}@media print{button[_ngcontent-%COMP%]{display:none}.qr-code-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-between;margin:0;padding:0}.qr-code-box[_ngcontent-%COMP%]{width:calc(50% - 10px);height:565px;margin:5px;text-align:center;page-break-inside:avoid}.qr-code-container[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:nth-child(2n){page-break-after:always}body[_ngcontent-%COMP%]{background-color:#fff;margin:0}}"]})}return e})();var aT=(()=>{class e{constructor(){qe(Oh.firebaseConfig)}getOrderList(n){let r=ye(),i=fe(r,`Owners/${sessionStorage.getItem("userId")}/Restaurants/${n}/Orders`);return new be(s=>(hA(i,l=>{if(l.exists()){let h=l.val();s.next(Object.values(h))}else s.next([])},l=>{s.error(l)}),()=>{}))}static \u0275fac=function(r){return new(r||e)};static \u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function gU(e,t){e&1&&(F(0,"h2"),$(1,"Loading order status..."),L())}function mU(e,t){if(e&1&&(F(0,"h2"),$(1),L()),e&2){let n=St(2);ae(),Cn(" ",n.status||"Status not available","")}}function yU(e,t){if(e&1&&jn(0,mU,2,1,"h2"),e&2){let n=t.$implicit,r=St();Hn(n.table_id==r.tableId?0:-1)}}function _U(e,t){e&1&&(F(0,"h2"),$(1,"No current order found."),L())}var cT=(()=>{class e{databaseService;navigationService;tableId=null;uniqueLinkToken=null;orderNumber=null;ownerId=null;restaurantid=null;orderList=null;updateSubscription=null;status;constructor(n,r){this.databaseService=n,this.navigationService=r,qe(dt.firebaseConfig)}ngOnInit(){this.tableId=localStorage.getItem("customercurrentTable"),this.uniqueLinkToken=localStorage.getItem("uniqueLinkToken"),this.orderNumber=localStorage.getItem("orderNumber"),this.restaurantid=localStorage.getItem("restaurantid"),this.ownerId=localStorage.getItem("ownerid"),this.orderNumber?this.processOrder(this.orderNumber):console.error("Order number is missing"),this.startOrderUpdates()}ngOnDestroy(){this.updateSubscription?.unsubscribe()}processOrder(n){if(!this.ownerId||!this.restaurantid||!this.tableId||!this.uniqueLinkToken){console.error("Missing required data");return}let r=ye(),i=fe(r,`Owners/${this.ownerId}/Restaurants/${this.restaurantid}/Orders`);tt(i).then(s=>{if(s.exists()){let l=s.val(),h=Object.keys(l).find(g=>l[g].name===n);h?this.updateOrderWithTable(h):this.createNewOrder(n)}else console.log("No orders found, creating a new order"),this.createNewOrder(n)}).catch(s=>{console.error("Error checking orders:",s)})}updateOrderWithTable(n){let r=ye(),i=fe(r,`Owners/${this.ownerId}/Restaurants/${this.restaurantid}/Orders/${n}`);Qt(i,{table_id:this.tableId}).then(()=>{console.log("Order updated with table ID successfully")}).catch(s=>{console.error("Error updating order:",s)})}createNewOrder(n){let r=ye(),i={name:n,waiter_get_order_at_table:!1,created_at:Date.now(),canceled_at:null,completed_at:null,table_id:this.tableId,waiter_set_order_number:!0,table_id_entered_by_waiter:!0,completed_during_table_clean:!1},s=fe(r,`Owners/${this.ownerId}/Restaurants/${this.restaurantid}/Orders`),l=Date.now().toString();Qt(s,{[l]:i}).then(()=>{console.log("New order created successfully:",i)}).catch(h=>{console.error("Error creating new order:",h)})}startOrderUpdates(){if(!this.restaurantid){console.error("Restaurant ID is missing");return}this.updateSubscription=Gp(0,15e3).subscribe(()=>{this.databaseService.getOrderList(this.restaurantid).subscribe(n=>{this.orderList=n.map(r=>Ve(K({},r),{status:this.getOrderStatus(r)}))})})}changetable(){this.navigationService.NavigateTo("scanqrcode")}getOrderStatus(n){n.canceled_at?this.status="Anulowano":n.completed_at?this.status="Zrealizowane":n.created_at?this.status="W realizacji":this.status="Nieznany status"}static \u0275fac=function(r){return new(r||e)(re(aT),re(ft))};static \u0275cmp=pe({type:e,selectors:[["app-tableordered"]],standalone:!0,features:[ve],decls:13,vars:2,consts:[[1,"displaybox"],[1,"logo"],[1,"buttons"],[1,"addtable",3,"click"],[1,"footstatic"]],template:function(r,i){r&1&&(F(0,"main")(1,"div",0)(2,"div",1)(3,"h1"),$(4,"EasyOrder"),L()(),F(5,"div",2),jn(6,gU,2,0,"h2"),lr(7,yU,1,1,null,null,cr),jn(9,_U,2,0,"h2"),F(10,"button",3),ie("click",function(){return i.changetable()}),$(11,"Zmie\u0144 stolik"),L()(),_e(12,"div",4),L()()),r&2&&(ae(6),Hn(i.orderList===null?6:-1),ae(),ur(i.orderList),ae(2),Hn(i.orderList&&i.orderList.length===0?9:-1))},styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;padding:16px;position:relative}.displaybox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center;position:relative}.logo[_ngcontent-%COMP%]{display:flex;font-size:45%;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center;margin-bottom:48px}.buttons[_ngcontent-%COMP%]{width:100%;border:none;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:flex-start;align-items:center;align-content:center}.buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;background:#fff;padding:24px;font-size:110%;color:#000;font-weight:600;letter-spacing:2px;border:1px solid #000000;transition:all .5s;margin-bottom:24px}.footstatic[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center}.footstatic[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:calc(100% - 16px);background:#fff;padding:24px;font-size:110%;color:#000;font-weight:600;letter-spacing:2px;border:1px solid #000000;transition:all .5s;margin-bottom:24px;margin-right:8px}form[_ngcontent-%COMP%]{width:100%;padding:24px;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;border:1px solid #000000;height:24px;margin-bottom:16px}input[_ngcontent-%COMP%]:last-child{height:100px}"]})}return e})();var ee=function(e){return e[e.QR_CODE=0]="QR_CODE",e[e.AZTEC=1]="AZTEC",e[e.CODABAR=2]="CODABAR",e[e.CODE_39=3]="CODE_39",e[e.CODE_93=4]="CODE_93",e[e.CODE_128=5]="CODE_128",e[e.DATA_MATRIX=6]="DATA_MATRIX",e[e.MAXICODE=7]="MAXICODE",e[e.ITF=8]="ITF",e[e.EAN_13=9]="EAN_13",e[e.EAN_8=10]="EAN_8",e[e.PDF_417=11]="PDF_417",e[e.RSS_14=12]="RSS_14",e[e.RSS_EXPANDED=13]="RSS_EXPANDED",e[e.UPC_A=14]="UPC_A",e[e.UPC_E=15]="UPC_E",e[e.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION",e}(ee||{}),lT=new Map([[ee.QR_CODE,"QR_CODE"],[ee.AZTEC,"AZTEC"],[ee.CODABAR,"CODABAR"],[ee.CODE_39,"CODE_39"],[ee.CODE_93,"CODE_93"],[ee.CODE_128,"CODE_128"],[ee.DATA_MATRIX,"DATA_MATRIX"],[ee.MAXICODE,"MAXICODE"],[ee.ITF,"ITF"],[ee.EAN_13,"EAN_13"],[ee.EAN_8,"EAN_8"],[ee.PDF_417,"PDF_417"],[ee.RSS_14,"RSS_14"],[ee.RSS_EXPANDED,"RSS_EXPANDED"],[ee.UPC_A,"UPC_A"],[ee.UPC_E,"UPC_E"],[ee.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]);function uT(e){return Object.values(ee).includes(e)}var li=function(e){return e[e.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",e[e.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE",e}(li||{}),Gn=function(){function e(){}return e.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",e.SCAN_DEFAULT_FPS=2,e.DEFAULT_DISABLE_FLIP=!1,e.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,e.DEFAULT_SUPPORTED_SCAN_TYPE=[li.SCAN_TYPE_CAMERA,li.SCAN_TYPE_FILE],e}();var qh=function(){function e(t,n){this.format=t,this.formatName=n}return e.prototype.toString=function(){return this.formatName},e.create=function(t){if(!lT.has(t))throw"".concat(t," not in html5QrcodeSupportedFormatsTextMap");return new e(t,lT.get(t))},e}();var z_=function(){function e(){}return e.createFromText=function(t){var n={text:t};return{decodedText:t,result:n}},e.createFromQrcodeResult=function(t){return{decodedText:t.text,result:t}},e}();var dT=function(e){return e[e.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",e[e.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",e[e.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR",e}(dT||{}),Yh=function(){function e(){}return e.createFrom=function(t){return{errorMessage:t,type:dT.UNKWOWN_ERROR}},e}();var Zh=function(){function e(t){this.verbose=t}return e.prototype.log=function(t){this.verbose&&console.log(t)},e.prototype.warn=function(t){this.verbose&&console.warn(t)},e.prototype.logError=function(t,n){(this.verbose||n===!0)&&console.error(t)},e.prototype.logErrors=function(t){if(t.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(t)},e}();function vr(e){return typeof e>"u"||e===null}function fT(e,t,n){return e>n?n:e<t?t:e}var Do=function(){function e(){}return e.codeParseError=function(t){return"QR code parse error, error = ".concat(t)},e.errorGettingUserMedia=function(t){return"Error getting userMedia, error = ".concat(t)},e.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},e.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},e.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},e.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},e.scannerPaused=function(){return"Scanner paused"},e}();var Ze=function(){function e(){}return e.scanningStatus=function(){return"Scanning"},e.idleStatus=function(){return"Idle"},e.errorStatus=function(){return"Error"},e.permissionStatus=function(){return"Permission"},e.noCameraFoundErrorStatus=function(){return"No Cameras"},e.lastMatch=function(t){return"Last Match: ".concat(t)},e.codeScannerTitle=function(){return"Code Scanner"},e.cameraPermissionTitle=function(){return"Request Camera Permissions"},e.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},e.noCameraFound=function(){return"No camera found"},e.scanButtonStopScanningText=function(){return"Stop Scanning"},e.scanButtonStartScanningText=function(){return"Start Scanning"},e.torchOnButton=function(){return"Switch On Torch"},e.torchOffButton=function(){return"Switch Off Torch"},e.torchOnFailedMessage=function(){return"Failed to turn on torch"},e.torchOffFailedMessage=function(){return"Failed to turn off torch"},e.scanButtonScanningStarting=function(){return"Launching Camera..."},e.textIfCameraScanSelected=function(){return"Scan an Image File"},e.textIfFileScanSelected=function(){return"Scan using camera directly"},e.selectCamera=function(){return"Select Camera"},e.fileSelectionChooseImage=function(){return"Choose Image"},e.fileSelectionChooseAnother=function(){return"Choose Another"},e.fileSelectionNoImageSelected=function(){return"No image choosen"},e.anonymousCameraPrefix=function(){return"Anonymous Camera"},e.dragAndDropMessage=function(){return"Or drop an image to scan"},e.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},e.zoom=function(){return"zoom"},e.loadingImage=function(){return"Loading image..."},e.cameraScanAltText=function(){return"Camera based scan"},e.fileScanAltText=function(){return"Fule based scan"},e}();var W_=function(){function e(){}return e.poweredBy=function(){return"Powered by "},e.reportIssues=function(){return"Report issues"},e}();var G_=function(){function e(){}return e.isMediaStreamConstraintsValid=function(t,n){if(typeof t!="object"){var r=typeof t;return n.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(r,"."),!0),!1}for(var i=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],s=new Set(i),l=Object.keys(t),h=0,g=l;h<g.length;h++){var m=g[h];if(s.has(m))return n.logError("".concat(m," is not supported videoConstaints."),!0),!1}return!0},e}();var pt=Tv(pT());var $_=function(){function e(t,n,r){if(this.formatMap=new Map([[ee.QR_CODE,pt.BarcodeFormat.QR_CODE],[ee.AZTEC,pt.BarcodeFormat.AZTEC],[ee.CODABAR,pt.BarcodeFormat.CODABAR],[ee.CODE_39,pt.BarcodeFormat.CODE_39],[ee.CODE_93,pt.BarcodeFormat.CODE_93],[ee.CODE_128,pt.BarcodeFormat.CODE_128],[ee.DATA_MATRIX,pt.BarcodeFormat.DATA_MATRIX],[ee.MAXICODE,pt.BarcodeFormat.MAXICODE],[ee.ITF,pt.BarcodeFormat.ITF],[ee.EAN_13,pt.BarcodeFormat.EAN_13],[ee.EAN_8,pt.BarcodeFormat.EAN_8],[ee.PDF_417,pt.BarcodeFormat.PDF_417],[ee.RSS_14,pt.BarcodeFormat.RSS_14],[ee.RSS_EXPANDED,pt.BarcodeFormat.RSS_EXPANDED],[ee.UPC_A,pt.BarcodeFormat.UPC_A],[ee.UPC_E,pt.BarcodeFormat.UPC_E],[ee.UPC_EAN_EXTENSION,pt.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!pt)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=n,this.logger=r;var i=this.createZXingFormats(t),s=new Map;s.set(pt.DecodeHintType.POSSIBLE_FORMATS,i),s.set(pt.DecodeHintType.TRY_HARDER,!1),this.hints=s}return e.prototype.decodeAsync=function(t){var n=this;return new Promise(function(r,i){try{r(n.decode(t))}catch(s){i(s)}})},e.prototype.decode=function(t){var n=new pt.MultiFormatReader(this.verbose,this.hints),r=new pt.HTMLCanvasElementLuminanceSource(t),i=new pt.BinaryBitmap(new pt.HybridBinarizer(r)),s=n.decode(i);return{text:s.text,format:qh.create(this.toHtml5QrcodeSupportedFormats(s.format)),debugData:this.createDebugData()}},e.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(n,r,i){t.set(n,r)}),t},e.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},e.prototype.createZXingFormats=function(t){for(var n=[],r=0,i=t;r<i.length;r++){var s=i[r];this.formatMap.has(s)?n.push(this.formatMap.get(s)):this.logger.logError("".concat(s," is not supported by")+"ZXingHtml5QrcodeShim")}return n},e.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},e}();var vU=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function h(C){try{m(r.next(C))}catch(E){l(E)}}function g(C){try{m(r.throw(C))}catch(E){l(E)}}function m(C){C.done?s(C.value):i(C.value).then(h,g)}m((r=r.apply(e,t||[])).next())})},wU=function(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,l;return l={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function h(m){return function(C){return g([m,C])}}function g(m){if(r)throw new TypeError("Generator is already executing.");for(;l&&(l=0,m[0]&&(n=0)),n;)try{if(r=1,i&&(s=m[0]&2?i.return:m[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,m[1])).done)return s;switch(i=0,s&&(m=[m[0]&2,s.value]),m[0]){case 0:case 1:s=m;break;case 4:return n.label++,{value:m[1],done:!1};case 5:n.label++,i=m[1],m=[0];continue;case 7:m=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(m[0]===6||m[0]===2)){n=0;continue}if(m[0]===3&&(!s||m[1]>s[0]&&m[1]<s[3])){n.label=m[1];break}if(m[0]===6&&n.label<s[1]){n.label=s[1],s=m;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(m);break}s[2]&&n.ops.pop(),n.trys.pop();continue}m=t.call(e,n)}catch(C){m=[6,C],i=0}finally{r=s=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},q_=function(){function e(t,n,r){if(this.formatMap=new Map([[ee.QR_CODE,"qr_code"],[ee.AZTEC,"aztec"],[ee.CODABAR,"codabar"],[ee.CODE_39,"code_39"],[ee.CODE_93,"code_93"],[ee.CODE_128,"code_128"],[ee.DATA_MATRIX,"data_matrix"],[ee.ITF,"itf"],[ee.EAN_13,"ean_13"],[ee.EAN_8,"ean_8"],[ee.PDF_417,"pdf417"],[ee.UPC_A,"upc_a"],[ee.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!e.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=n,this.logger=r;var i=this.createBarcodeDetectorFormats(t);if(this.detector=new BarcodeDetector(i),!this.detector)throw"BarcodeDetector detector not supported"}return e.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var t=new BarcodeDetector({formats:["qr_code"]});return typeof t<"u"},e.prototype.decodeAsync=function(t){return vU(this,void 0,void 0,function(){var n,r;return wU(this,function(i){switch(i.label){case 0:return[4,this.detector.detect(t)];case 1:if(n=i.sent(),!n||n.length===0)throw"No barcode or QR code detected.";return r=this.selectLargestBarcode(n),[2,{text:r.rawValue,format:qh.create(this.toHtml5QrcodeSupportedFormats(r.format)),debugData:this.createDebugData()}]}})})},e.prototype.selectLargestBarcode=function(t){for(var n=null,r=0,i=0,s=t;i<s.length;i++){var l=s[i],h=l.boundingBox.width*l.boundingBox.height;h>r&&(r=h,n=l)}if(!n)throw"No largest barcode found";return n},e.prototype.createBarcodeDetectorFormats=function(t){for(var n=[],r=0,i=t;r<i.length;r++){var s=i[r];this.formatMap.has(s)?n.push(this.formatMap.get(s)):this.logger.warn("".concat(s," is not supported by")+"BarcodeDetectorDelegate")}return{formats:n}},e.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},e.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(n,r,i){t.set(n,r)}),t},e.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},e}();var gT=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function h(C){try{m(r.next(C))}catch(E){l(E)}}function g(C){try{m(r.throw(C))}catch(E){l(E)}}function m(C){C.done?s(C.value):i(C.value).then(h,g)}m((r=r.apply(e,t||[])).next())})},mT=function(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,l;return l={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function h(m){return function(C){return g([m,C])}}function g(m){if(r)throw new TypeError("Generator is already executing.");for(;l&&(l=0,m[0]&&(n=0)),n;)try{if(r=1,i&&(s=m[0]&2?i.return:m[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,m[1])).done)return s;switch(i=0,s&&(m=[m[0]&2,s.value]),m[0]){case 0:case 1:s=m;break;case 4:return n.label++,{value:m[1],done:!1};case 5:n.label++,i=m[1],m=[0];continue;case 7:m=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(m[0]===6||m[0]===2)){n=0;continue}if(m[0]===3&&(!s||m[1]>s[0]&&m[1]<s[3])){n.label=m[1];break}if(m[0]===6&&n.label<s[1]){n.label=s[1],s=m;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(m);break}s[2]&&n.ops.pop(),n.trys.pop();continue}m=t.call(e,n)}catch(C){m=[6,C],i=0}finally{r=s=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},yT=function(){function e(t,n,r,i){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=r,n&&q_.isSupported()?(this.primaryDecoder=new q_(t,r,i),this.secondaryDecoder=new $_(t,r,i)):this.primaryDecoder=new $_(t,r,i)}return e.prototype.decodeAsync=function(t){return gT(this,void 0,void 0,function(){var n;return mT(this,function(r){switch(r.label){case 0:n=performance.now(),r.label=1;case 1:return r.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(t)];case 2:return[2,r.sent()];case 3:return this.possiblyLogPerformance(n),[7];case 4:return[2]}})})},e.prototype.decodeRobustlyAsync=function(t){return gT(this,void 0,void 0,function(){var n,r;return mT(this,function(i){switch(i.label){case 0:n=performance.now(),i.label=1;case 1:return i.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(t)];case 2:return[2,i.sent()];case 3:if(r=i.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(t)];throw r;case 4:return this.possiblyLogPerformance(n),[7];case 5:return[2]}})})},e.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},e.prototype.possiblyLogPerformance=function(t){if(this.verbose){var n=performance.now()-t;this.executionResults.push(n),this.executions++,this.possiblyFlushPerformanceReport()}},e.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var t=0,n=0,r=this.executionResults;n<r.length;n++){var i=r[n];t+=i}var s=t/this.executionResults.length;console.log("".concat(s," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},e}();var Y_=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Qh=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function h(C){try{m(r.next(C))}catch(E){l(E)}}function g(C){try{m(r.throw(C))}catch(E){l(E)}}function m(C){C.done?s(C.value):i(C.value).then(h,g)}m((r=r.apply(e,t||[])).next())})},Kh=function(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,l;return l={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function h(m){return function(C){return g([m,C])}}function g(m){if(r)throw new TypeError("Generator is already executing.");for(;l&&(l=0,m[0]&&(n=0)),n;)try{if(r=1,i&&(s=m[0]&2?i.return:m[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,m[1])).done)return s;switch(i=0,s&&(m=[m[0]&2,s.value]),m[0]){case 0:case 1:s=m;break;case 4:return n.label++,{value:m[1],done:!1};case 5:n.label++,i=m[1],m=[0];continue;case 7:m=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(m[0]===6||m[0]===2)){n=0;continue}if(m[0]===3&&(!s||m[1]>s[0]&&m[1]<s[3])){n.label=m[1];break}if(m[0]===6&&n.label<s[1]){n.label=s[1],s=m;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(m);break}s[2]&&n.ops.pop(),n.trys.pop();continue}m=t.call(e,n)}catch(C){m=[6,C],i=0}finally{r=s=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},_T=function(){function e(t,n){this.name=t,this.track=n}return e.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},e.prototype.apply=function(t){var n={};n[this.name]=t;var r={advanced:[n]};return this.track.applyConstraints(r)},e.prototype.value=function(){var t=this.track.getSettings();if(this.name in t){var n=t[this.name];return n}return null},e}(),CU=function(e){Y_(t,e);function t(n,r){return e.call(this,n,r)||this}return t.prototype.min=function(){return this.getCapabilities().min},t.prototype.max=function(){return this.getCapabilities().max},t.prototype.step=function(){return this.getCapabilities().step},t.prototype.apply=function(n){var r={};r[this.name]=n;var i={advanced:[r]};return this.track.applyConstraints(i)},t.prototype.getCapabilities=function(){this.failIfNotSupported();var n=this.track.getCapabilities(),r=n[this.name];return{min:r.min,max:r.max,step:r.step}},t.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},t}(_T),EU=function(e){Y_(t,e);function t(n){return e.call(this,"zoom",n)||this}return t}(CU),IU=function(e){Y_(t,e);function t(n){return e.call(this,"torch",n)||this}return t}(_T),bU=function(){function e(t){this.track=t}return e.prototype.zoomFeature=function(){return new EU(this.track)},e.prototype.torchFeature=function(){return new IU(this.track)},e}(),xU=function(){function e(t,n,r){this.isClosed=!1,this.parentElement=t,this.mediaStream=n,this.callbacks=r,this.surface=this.createVideoElement(this.parentElement.clientWidth),t.append(this.surface)}return e.prototype.createVideoElement=function(t){var n=document.createElement("video");return n.style.width="".concat(t,"px"),n.style.display="block",n.muted=!0,n.setAttribute("muted","true"),n.playsInline=!0,n},e.prototype.setupSurface=function(){var t=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var n=function(){var r=t.surface.clientWidth,i=t.surface.clientHeight;t.callbacks.onRenderSurfaceReady(r,i),t.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.srcObject=this.mediaStream,this.surface.play()},e.create=function(t,n,r,i){return Qh(this,void 0,void 0,function(){var s,l;return Kh(this,function(h){switch(h.label){case 0:return s=new e(t,n,i),r.aspectRatio?(l={aspectRatio:r.aspectRatio},[4,s.getFirstTrackOrFail().applyConstraints(l)]):[3,2];case 1:h.sent(),h.label=2;case 2:return s.setupSurface(),[2,s]}})})},e.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},e.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},e.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},e.prototype.resume=function(t){this.failIfClosed();var n=this,r=function(){setTimeout(t,200),n.surface.removeEventListener("playing",r)};this.surface.addEventListener("playing",r),this.surface.play()},e.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},e.prototype.getSurface=function(){return this.failIfClosed(),this.surface},e.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},e.prototype.applyVideoConstraints=function(t){return Qh(this,void 0,void 0,function(){return Kh(this,function(n){if("aspectRatio"in t)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(t)]})})},e.prototype.close=function(){if(this.isClosed)return Promise.resolve();var t=this;return new Promise(function(n,r){var i=t.mediaStream.getVideoTracks(),s=i.length,l=0;t.mediaStream.getVideoTracks().forEach(function(h){t.mediaStream.removeTrack(h),h.stop(),++l,l>=s&&(t.isClosed=!0,t.parentElement.removeChild(t.surface),n())})})},e.prototype.getCapabilities=function(){return new bU(this.getFirstTrackOrFail())},e}(),vT=function(){function e(t){this.mediaStream=t}return e.prototype.render=function(t,n,r){return Qh(this,void 0,void 0,function(){return Kh(this,function(i){return[2,xU.create(t,this.mediaStream,n,r)]})})},e.create=function(t){return Qh(this,void 0,void 0,function(){var n,r;return Kh(this,function(i){switch(i.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return n={audio:!1,video:t},[4,navigator.mediaDevices.getUserMedia(n)];case 1:return r=i.sent(),[2,new e(r)]}})})},e}();var wT=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function h(C){try{m(r.next(C))}catch(E){l(E)}}function g(C){try{m(r.throw(C))}catch(E){l(E)}}function m(C){C.done?s(C.value):i(C.value).then(h,g)}m((r=r.apply(e,t||[])).next())})},CT=function(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,l;return l={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function h(m){return function(C){return g([m,C])}}function g(m){if(r)throw new TypeError("Generator is already executing.");for(;l&&(l=0,m[0]&&(n=0)),n;)try{if(r=1,i&&(s=m[0]&2?i.return:m[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,m[1])).done)return s;switch(i=0,s&&(m=[m[0]&2,s.value]),m[0]){case 0:case 1:s=m;break;case 4:return n.label++,{value:m[1],done:!1};case 5:n.label++,i=m[1],m=[0];continue;case 7:m=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(m[0]===6||m[0]===2)){n=0;continue}if(m[0]===3&&(!s||m[1]>s[0]&&m[1]<s[3])){n.label=m[1];break}if(m[0]===6&&n.label<s[1]){n.label=s[1],s=m;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(m);break}s[2]&&n.ops.pop(),n.trys.pop();continue}m=t.call(e,n)}catch(C){m=[6,C],i=0}finally{r=s=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},ET=function(){function e(){}return e.failIfNotSupported=function(){return wT(this,void 0,void 0,function(){return CT(this,function(t){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new e]})})},e.prototype.create=function(t){return wT(this,void 0,void 0,function(){return CT(this,function(n){return[2,vT.create(t)]})})},e}();var SU=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function h(C){try{m(r.next(C))}catch(E){l(E)}}function g(C){try{m(r.throw(C))}catch(E){l(E)}}function m(C){C.done?s(C.value):i(C.value).then(h,g)}m((r=r.apply(e,t||[])).next())})},AU=function(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,l;return l={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function h(m){return function(C){return g([m,C])}}function g(m){if(r)throw new TypeError("Generator is already executing.");for(;l&&(l=0,m[0]&&(n=0)),n;)try{if(r=1,i&&(s=m[0]&2?i.return:m[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,m[1])).done)return s;switch(i=0,s&&(m=[m[0]&2,s.value]),m[0]){case 0:case 1:s=m;break;case 4:return n.label++,{value:m[1],done:!1};case 5:n.label++,i=m[1],m=[0];continue;case 7:m=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(m[0]===6||m[0]===2)){n=0;continue}if(m[0]===3&&(!s||m[1]>s[0]&&m[1]<s[3])){n.label=m[1];break}if(m[0]===6&&n.label<s[1]){n.label=s[1],s=m;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(m);break}s[2]&&n.ops.pop(),n.trys.pop();continue}m=t.call(e,n)}catch(C){m=[6,C],i=0}finally{r=s=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},IT=function(){function e(){}return e.retrieve=function(){if(navigator.mediaDevices)return e.getCamerasFromMediaDevices();var t=MediaStreamTrack;return MediaStreamTrack&&t.getSources?e.getCamerasFromMediaStreamTrack():e.rejectWithError()},e.rejectWithError=function(){var t=Do.unableToQuerySupportedDevices();return e.isHttpsOrLocalhost()||(t=Do.insecureContextCameraQueryError()),Promise.reject(t)},e.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var t=location.host.split(":")[0];return t==="127.0.0.1"||t==="localhost"},e.getCamerasFromMediaDevices=function(){return SU(this,void 0,void 0,function(){var t,n,r,i,s,l,h;return AU(this,function(g){switch(g.label){case 0:return t=function(m){for(var C=m.getVideoTracks(),E=0,x=C;E<x.length;E++){var D=x[E];D.enabled=!1,D.stop(),m.removeTrack(D)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return n=g.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(r=g.sent(),i=[],s=0,l=r;s<l.length;s++)h=l[s],h.kind==="videoinput"&&i.push({id:h.deviceId,label:h.label});return t(n),[2,i]}})})},e.getCamerasFromMediaStreamTrack=function(){return new Promise(function(t,n){var r=function(s){for(var l=[],h=0,g=s;h<g.length;h++){var m=g[h];m.kind==="video"&&l.push({id:m.id,label:m.label})}t(l)},i=MediaStreamTrack;i.getSources(r)})},e}();var Dt=function(e){return e[e.UNKNOWN=0]="UNKNOWN",e[e.NOT_STARTED=1]="NOT_STARTED",e[e.SCANNING=2]="SCANNING",e[e.PAUSED=3]="PAUSED",e}(Dt||{}),DU=function(){function e(){this.state=Dt.NOT_STARTED,this.onGoingTransactionNewState=Dt.UNKNOWN}return e.prototype.directTransition=function(t){this.failIfTransitionOngoing(),this.validateTransition(t),this.state=t},e.prototype.startTransition=function(t){return this.failIfTransitionOngoing(),this.validateTransition(t),this.onGoingTransactionNewState=t,this},e.prototype.execute=function(){if(this.onGoingTransactionNewState===Dt.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var t=this.onGoingTransactionNewState;this.onGoingTransactionNewState=Dt.UNKNOWN,this.directTransition(t)},e.prototype.cancel=function(){if(this.onGoingTransactionNewState===Dt.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=Dt.UNKNOWN},e.prototype.getState=function(){return this.state},e.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==Dt.UNKNOWN)throw"Cannot transition to a new state, already under transition"},e.prototype.validateTransition=function(t){switch(this.state){case Dt.UNKNOWN:throw"Transition from unknown is not allowed";case Dt.NOT_STARTED:this.failIfNewStateIs(t,[Dt.PAUSED]);break;case Dt.SCANNING:break;case Dt.PAUSED:break}},e.prototype.failIfNewStateIs=function(t,n){for(var r=0,i=n;r<i.length;r++){var s=i[r];if(t===s)throw"Cannot transition from ".concat(this.state," to ").concat(t)}},e}(),TU=function(){function e(t){this.stateManager=t}return e.prototype.startTransition=function(t){return this.stateManager.startTransition(t)},e.prototype.directTransition=function(t){this.stateManager.directTransition(t)},e.prototype.getState=function(){return this.stateManager.getState()},e.prototype.canScanFile=function(){return this.stateManager.getState()===Dt.NOT_STARTED},e.prototype.isScanning=function(){return this.stateManager.getState()!==Dt.NOT_STARTED},e.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===Dt.SCANNING},e.prototype.isPaused=function(){return this.stateManager.getState()===Dt.PAUSED},e}();var bT=function(){function e(){}return e.create=function(){return new TU(new DU)},e}();var MU=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),er=function(e){MU(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.DEFAULT_WIDTH=300,t.DEFAULT_WIDTH_OFFSET=2,t.FILE_SCAN_MIN_HEIGHT=300,t.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,t.MIN_QR_BOX_SIZE=50,t.SHADED_LEFT=1,t.SHADED_RIGHT=2,t.SHADED_TOP=3,t.SHADED_BOTTOM=4,t.SHADED_REGION_ELEMENT_ID="qr-shaded-region",t.VERBOSE=!1,t.BORDER_SHADER_DEFAULT_COLOR="#ffffff",t.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",t}(Gn),NU=function(){function e(t,n){this.logger=n,this.fps=er.SCAN_DEFAULT_FPS,t?(t.fps&&(this.fps=t.fps),this.disableFlip=t.disableFlip===!0,this.qrbox=t.qrbox,this.aspectRatio=t.aspectRatio,this.videoConstraints=t.videoConstraints):this.disableFlip=er.DEFAULT_DISABLE_FLIP}return e.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?G_.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},e.prototype.isShadedBoxEnabled=function(){return!vr(this.qrbox)},e.create=function(t,n){return new e(t,n)},e}(),Jh=function(){function e(t,n){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(t))throw"HTML Element with id=".concat(t," not found");this.elementId=t,this.verbose=!1;var r,i;typeof n=="boolean"?this.verbose=n===!0:n&&(i=n,this.verbose=i.verbose===!0,r=i.experimentalFeatures),this.logger=new Zh(this.verbose),this.qrcode=new yT(this.getSupportedFormats(n),this.getUseBarCodeDetectorIfSupported(i),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=bT.create()}return e.prototype.start=function(t,n,r,i){var s=this;if(!t)throw"cameraIdOrConfig is required";if(!r||typeof r!="function")throw"qrCodeSuccessCallback is required and should be a function.";var l;i?l=i:l=this.verbose?this.logger.log:function(){};var h=NU.create(n,this.logger);this.clearElement();var g=!1;h.videoConstraints&&(h.isMediaStreamConstraintsValid()?g=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var m=g,C=document.getElementById(this.elementId),E=C.clientWidth?C.clientWidth:er.DEFAULT_WIDTH;C.style.position="relative",this.shouldScan=!0,this.element=C;var x=this,D=this.stateManagerProxy.startTransition(Dt.SCANNING);return new Promise(function(N,U){var G=m?h.videoConstraints:x.createVideoConstraints(t);if(!G){D.cancel(),U("videoConstraints should be defined");return}var z={};(!m||h.aspectRatio)&&(z.aspectRatio=h.aspectRatio);var ne={onRenderSurfaceReady:function(He,le){x.setupUi(He,le,h),x.isScanning=!0,x.foreverScan(h,r,l)}};ET.failIfNotSupported().then(function(He){He.create(G).then(function(le){return le.render(s.element,z,ne).then(function(j){x.renderedCamera=j,D.execute(),N(null)}).catch(function(j){D.cancel(),U(j)})}).catch(function(le){D.cancel(),U(Do.errorGettingUserMedia(le))})}).catch(function(He){D.cancel(),U(Do.cameraStreamingNotSupported())})})},e.prototype.pause=function(t){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(Dt.PAUSED),this.showPausedState(),(vr(t)||t!==!0)&&(t=!1),t&&this.renderedCamera&&this.renderedCamera.pause()},e.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var t=this,n=function(){t.stateManagerProxy.directTransition(Dt.SCANNING),t.hidePausedState()};if(!this.renderedCamera.isPaused()){n();return}this.renderedCamera.resume(function(){n()})},e.prototype.getState=function(){return this.stateManagerProxy.getState()},e.prototype.stop=function(){var t=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var n=this.stateManagerProxy.startTransition(Dt.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var r=function(){if(t.element){var s=document.getElementById(er.SHADED_REGION_ELEMENT_ID);s&&t.element.removeChild(s)}},i=this;return this.renderedCamera.close().then(function(){return i.renderedCamera=null,i.element&&(i.element.removeChild(i.canvasElement),i.canvasElement=null),r(),i.qrRegion&&(i.qrRegion=null),i.context&&(i.context=null),n.execute(),i.hidePausedState(),i.isScanning=!1,Promise.resolve()})},e.prototype.scanFile=function(t,n){return this.scanFileV2(t,n).then(function(r){return r.decodedText})},e.prototype.scanFileV2=function(t,n){var r=this;if(!t||!(t instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(vr(n)&&(n=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(i,s){r.possiblyCloseLastScanImageFile(),r.clearElement(),r.lastScanImageFile=URL.createObjectURL(t);var l=new Image;l.onload=function(){var h=l.width,g=l.height,m=document.getElementById(r.elementId),C=m.clientWidth?m.clientWidth:er.DEFAULT_WIDTH,E=Math.max(m.clientHeight?m.clientHeight:g,er.FILE_SCAN_MIN_HEIGHT),x=r.computeCanvasDrawConfig(h,g,C,E);if(n){var D=r.createCanvasElement(C,E,"qr-canvas-visible");D.style.display="inline-block",m.appendChild(D);var N=D.getContext("2d");if(!N)throw"Unable to get 2d context from canvas";N.canvas.width=C,N.canvas.height=E,N.drawImage(l,0,0,h,g,x.x,x.y,x.width,x.height)}var U=er.FILE_SCAN_HIDDEN_CANVAS_PADDING,G=Math.max(l.width,x.width),z=Math.max(l.height,x.height),ne=G+2*U,He=z+2*U,le=r.createCanvasElement(ne,He);m.appendChild(le);var j=le.getContext("2d");if(!j)throw"Unable to get 2d context from canvas";j.canvas.width=ne,j.canvas.height=He,j.drawImage(l,0,0,h,g,U,U,G,z);try{r.qrcode.decodeRobustlyAsync(le).then(function(se){i(z_.createFromQrcodeResult(se))}).catch(s)}catch(se){s("QR code parse error, error = ".concat(se))}},l.onerror=s,l.onabort=s,l.onstalled=s,l.onsuspend=s,l.src=URL.createObjectURL(t)})},e.prototype.clear=function(){this.clearElement()},e.getCameras=function(){return IT.retrieve()},e.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},e.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},e.prototype.applyVideoConstraints=function(t){if(t){if(!G_.isMediaStreamConstraintsValid(t,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(t)},e.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},e.prototype.getSupportedFormats=function(t){var n=[ee.QR_CODE,ee.AZTEC,ee.CODABAR,ee.CODE_39,ee.CODE_93,ee.CODE_128,ee.DATA_MATRIX,ee.MAXICODE,ee.ITF,ee.EAN_13,ee.EAN_8,ee.PDF_417,ee.RSS_14,ee.RSS_EXPANDED,ee.UPC_A,ee.UPC_E,ee.UPC_EAN_EXTENSION];if(!t||typeof t=="boolean"||!t.formatsToSupport)return n;if(!Array.isArray(t.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(t.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var r=[],i=0,s=t.formatsToSupport;i<s.length;i++){var l=s[i];uT(l)?r.push(l):this.logger.warn("Invalid format: ".concat(l," passed in config, ignoring."))}if(r.length===0)throw"None of formatsToSupport match supported values.";return r},e.prototype.getUseBarCodeDetectorIfSupported=function(t){if(vr(t))return!0;if(!vr(t.useBarCodeDetectorIfSupported))return t.useBarCodeDetectorIfSupported!==!1;if(vr(t.experimentalFeatures))return!0;var n=t.experimentalFeatures;return vr(n.useBarCodeDetectorIfSupported)?!0:n.useBarCodeDetectorIfSupported!==!1},e.prototype.validateQrboxSize=function(t,n,r){var i=this,s=r.qrbox;this.validateQrboxConfig(s);var l=this.toQrdimensions(t,n,s),h=function(m){if(m<er.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(er.MIN_QR_BOX_SIZE,"px.")},g=function(m){return m>t&&(i.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),m=t),m};h(l.width),h(l.height),l.width=g(l.width)},e.prototype.validateQrboxConfig=function(t){if(typeof t!="number"&&typeof t!="function"&&(t.width===void 0||t.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},e.prototype.toQrdimensions=function(t,n,r){if(typeof r=="number")return{width:r,height:r};if(typeof r=="function")try{return r(t,n)}catch(i){throw new Error("qrbox config was passed as a function but it failed with unknown error"+i)}return r},e.prototype.setupUi=function(t,n,r){r.isShadedBoxEnabled()&&this.validateQrboxSize(t,n,r);var i=vr(r.qrbox)?{width:t,height:n}:r.qrbox;this.validateQrboxConfig(i);var s=this.toQrdimensions(t,n,i);s.height>n&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var l=r.isShadedBoxEnabled()&&s.height<=n,h={x:0,y:0,width:t,height:n},g=l?this.getShadedRegionBounds(t,n,s):h,m=this.createCanvasElement(g.width,g.height),C={willReadFrequently:!0},E=m.getContext("2d",C);E.canvas.width=g.width,E.canvas.height=g.height,this.element.append(m),l&&this.possiblyInsertShadingElement(this.element,t,n,s),this.createScannerPausedUiElement(this.element),this.qrRegion=g,this.context=E,this.canvasElement=m},e.prototype.createScannerPausedUiElement=function(t){var n=document.createElement("div");n.innerText=Do.scannerPaused(),n.style.display="none",n.style.position="absolute",n.style.top="0px",n.style.zIndex="1",n.style.background="rgba(9, 9, 9, 0.46)",n.style.color="#FFECEC",n.style.textAlign="center",n.style.width="100%",t.appendChild(n),this.scannerPausedUiElement=n},e.prototype.scanContext=function(t,n){var r=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(i){return t(i.text,z_.createFromQrcodeResult(i)),r.possiblyUpdateShaders(!0),!0}).catch(function(i){r.possiblyUpdateShaders(!1);var s=Do.codeParseError(i);return n(s,Yh.createFrom(s)),!1})},e.prototype.foreverScan=function(t,n,r){var i=this;if(this.shouldScan&&this.renderedCamera){var s=this.renderedCamera.getSurface(),l=s.videoWidth/s.clientWidth,h=s.videoHeight/s.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var g=this.qrRegion.width*l,m=this.qrRegion.height*h,C=this.qrRegion.x*l,E=this.qrRegion.y*h;this.context.drawImage(s,C,E,g,m,0,0,this.qrRegion.width,this.qrRegion.height);var x=function(){i.foreverScanTimeout=setTimeout(function(){i.foreverScan(t,n,r)},i.getTimeoutFps(t.fps))};this.scanContext(n,r).then(function(D){!D&&t.disableFlip!==!0?(i.context.translate(i.context.canvas.width,0),i.context.scale(-1,1),i.scanContext(n,r).finally(function(){x()})):x()}).catch(function(D){i.logger.logError("Error happend while scanning context",D),x()})}},e.prototype.createVideoConstraints=function(t){if(typeof t=="string")return{deviceId:{exact:t}};if(typeof t=="object"){var n="facingMode",r="deviceId",i={user:!0,environment:!0},s="exact",l=function(N){if(N in i)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(N,"'")},h=Object.keys(t);if(h.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(h.length," keys");var g=Object.keys(t)[0];if(g!==n&&g!==r)throw"Only '".concat(n,"' and '").concat(r,"' ")+" are supported for 'cameraIdOrConfig'";if(g===n){var m=t.facingMode;if(typeof m=="string"){if(l(m))return{facingMode:m}}else if(typeof m=="object")if(s in m){if(l(m["".concat(s)]))return{facingMode:{exact:m["".concat(s)]}}}else throw"'facingMode' should be string or object with"+" ".concat(s," as key.");else{var C=typeof m;throw"Invalid type of 'facingMode' = ".concat(C)}}else{var E=t.deviceId;if(typeof E=="string")return{deviceId:E};if(typeof E=="object"){if(s in E)return{deviceId:{exact:E["".concat(s)]}};throw"'deviceId' should be string or object with"+" ".concat(s," as key.")}else{var x=typeof E;throw"Invalid type of 'deviceId' = ".concat(x)}}}var D=typeof t;throw"Invalid type of 'cameraIdOrConfig' = ".concat(D)},e.prototype.computeCanvasDrawConfig=function(t,n,r,i){if(t<=r&&n<=i){var s=(r-t)/2,l=(i-n)/2;return{x:s,y:l,width:t,height:n}}else{var h=t,g=n;return t>r&&(n=r/t*n,t=r),n>i&&(t=i/n*t,n=i),this.logger.log("Image downsampled from "+"".concat(h,"X").concat(g)+" to ".concat(t,"X").concat(n,".")),this.computeCanvasDrawConfig(t,n,r,i)}},e.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var t=document.getElementById(this.elementId);t&&(t.innerHTML="")},e.prototype.possiblyUpdateShaders=function(t){this.qrMatch!==t&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(n){n.style.backgroundColor=t?er.BORDER_SHADER_MATCH_COLOR:er.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=t)},e.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},e.prototype.createCanvasElement=function(t,n,r){var i=t,s=n,l=document.createElement("canvas");return l.style.width="".concat(i,"px"),l.style.height="".concat(s,"px"),l.style.display="none",l.id=vr(r)?"qr-canvas":r,l},e.prototype.getShadedRegionBounds=function(t,n,r){if(r.width>t||r.height>n)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(t-r.width)/2,y:(n-r.height)/2,width:r.width,height:r.height}},e.prototype.possiblyInsertShadingElement=function(t,n,r,i){if(!(n-i.width<1||r-i.height<1)){var s=document.createElement("div");s.style.position="absolute";var l=(n-i.width)/2,h=(r-i.height)/2;if(s.style.borderLeft="".concat(l,"px solid rgba(0, 0, 0, 0.48)"),s.style.borderRight="".concat(l,"px solid rgba(0, 0, 0, 0.48)"),s.style.borderTop="".concat(h,"px solid rgba(0, 0, 0, 0.48)"),s.style.borderBottom="".concat(h,"px solid rgba(0, 0, 0, 0.48)"),s.style.boxSizing="border-box",s.style.top="0px",s.style.bottom="0px",s.style.left="0px",s.style.right="0px",s.id="".concat(er.SHADED_REGION_ELEMENT_ID),n-i.width<11||r-i.height<11)this.hasBorderShaders=!1;else{var g=5,m=40;this.insertShaderBorders(s,m,g,-g,null,0,!0),this.insertShaderBorders(s,m,g,-g,null,0,!1),this.insertShaderBorders(s,m,g,null,-g,0,!0),this.insertShaderBorders(s,m,g,null,-g,0,!1),this.insertShaderBorders(s,g,m+g,-g,null,-g,!0),this.insertShaderBorders(s,g,m+g,null,-g,-g,!0),this.insertShaderBorders(s,g,m+g,-g,null,-g,!1),this.insertShaderBorders(s,g,m+g,null,-g,-g,!1),this.hasBorderShaders=!0}t.append(s)}},e.prototype.insertShaderBorders=function(t,n,r,i,s,l,h){var g=document.createElement("div");g.style.position="absolute",g.style.backgroundColor=er.BORDER_SHADER_DEFAULT_COLOR,g.style.width="".concat(n,"px"),g.style.height="".concat(r,"px"),i!==null&&(g.style.top="".concat(i,"px")),s!==null&&(g.style.bottom="".concat(s,"px")),h?g.style.left="".concat(l,"px"):g.style.right="".concat(l,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(g),t.appendChild(g)},e.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},e.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},e.prototype.getTimeoutFps=function(t){return 1e3/t},e}();var Z_="data:image/svg+xml;base64,",xT=Z_+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",ST=Z_+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",X_=Z_+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",AT="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=";var DT=function(){function e(){}return e.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},e}(),TT=function(){function e(){this.data=DT.createDefault();var t=localStorage.getItem(e.LOCAL_STORAGE_KEY);t?this.data=JSON.parse(t):this.reset()}return e.prototype.hasCameraPermissions=function(){return this.data.hasPermission},e.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},e.prototype.setHasPermission=function(t){this.data.hasPermission=t,this.flush()},e.prototype.setLastUsedCameraId=function(t){this.data.lastUsedCameraId=t,this.flush()},e.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},e.prototype.reset=function(){this.data=DT.createDefault(),this.flush()},e.prototype.flush=function(){localStorage.setItem(e.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},e.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",e}();var RU=function(){function e(){this.infoDiv=document.createElement("div")}return e.prototype.renderInto=function(t){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=W_.poweredBy();var n=document.createElement("a");n.innerText="ScanApp",n.href="https://scanapp.org",n.target="new",n.style.color="white",this.infoDiv.appendChild(n);var r=document.createElement("br"),i=document.createElement("br");this.infoDiv.appendChild(r),this.infoDiv.appendChild(i);var s=document.createElement("a");s.innerText=W_.reportIssues(),s.href="https://github.com/mebjas/html5-qrcode/issues",s.target="new",s.style.color="white",this.infoDiv.appendChild(s),t.appendChild(this.infoDiv)},e.prototype.show=function(){this.infoDiv.style.display="block"},e.prototype.hide=function(){this.infoDiv.style.display="none"},e}(),OU=function(){function e(t,n){this.isShowingInfoIcon=!0,this.onTapIn=t,this.onTapOut=n,this.infoIcon=document.createElement("img")}return e.prototype.renderInto=function(t){var n=this;this.infoIcon.alt="Info icon",this.infoIcon.src=X_,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(r){return n.onHoverIn()},this.infoIcon.onmouseout=function(r){return n.onHoverOut()},this.infoIcon.onclick=function(r){return n.onClick()},t.appendChild(this.infoIcon)},e.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},e.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},e.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src=AT,this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=X_,this.infoIcon.style.opacity="0.6")},e}(),MT=function(){function e(){var t=this;this.infoDiv=new RU,this.infoIcon=new OU(function(){t.infoDiv.show()},function(){t.infoDiv.hide()})}return e.prototype.renderInto=function(t){this.infoDiv.renderInto(t),this.infoIcon.renderInto(t)},e}();var PU=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function h(C){try{m(r.next(C))}catch(E){l(E)}}function g(C){try{m(r.throw(C))}catch(E){l(E)}}function m(C){C.done?s(C.value):i(C.value).then(h,g)}m((r=r.apply(e,t||[])).next())})},kU=function(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,l;return l={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function h(m){return function(C){return g([m,C])}}function g(m){if(r)throw new TypeError("Generator is already executing.");for(;l&&(l=0,m[0]&&(n=0)),n;)try{if(r=1,i&&(s=m[0]&2?i.return:m[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,m[1])).done)return s;switch(i=0,s&&(m=[m[0]&2,s.value]),m[0]){case 0:case 1:s=m;break;case 4:return n.label++,{value:m[1],done:!1};case 5:n.label++,i=m[1],m=[0];continue;case 7:m=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(m[0]===6||m[0]===2)){n=0;continue}if(m[0]===3&&(!s||m[1]>s[0]&&m[1]<s[3])){n.label=m[1];break}if(m[0]===6&&n.label<s[1]){n.label=s[1],s=m;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(m);break}s[2]&&n.ops.pop(),n.trys.pop();continue}m=t.call(e,n)}catch(C){m=[6,C],i=0}finally{r=s=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},Q_=function(){function e(){}return e.hasPermissions=function(){return PU(this,void 0,void 0,function(){var t,n,r,i;return kU(this,function(s){switch(s.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(t=s.sent(),n=0,r=t;n<r.length;n++)if(i=r[n],i.kind==="videoinput"&&i.label)return[2,!0];return[2,!1]}})})},e}();var Ui=function(){function e(t){this.supportedScanTypes=this.validateAndReturnScanTypes(t)}return e.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},e.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},e.prototype.isCameraScanRequired=function(){for(var t=0,n=this.supportedScanTypes;t<n.length;t++){var r=n[t];if(e.isCameraScanType(r))return!0}return!1},e.isCameraScanType=function(t){return t===li.SCAN_TYPE_CAMERA},e.isFileScanType=function(t){return t===li.SCAN_TYPE_FILE},e.prototype.validateAndReturnScanTypes=function(t){if(!t||t.length===0)return Gn.DEFAULT_SUPPORTED_SCAN_TYPE;var n=Gn.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(t.length>n)throw"Max ".concat(n," values expected for ")+"supportedScanTypes";for(var r=0,i=t;r<i.length;r++){var s=i[r];if(!Gn.DEFAULT_SUPPORTED_SCAN_TYPE.includes(s))throw"Unsupported scan type ".concat(s)}return t},e}();var rn=function(){function e(){}return e.ALL_ELEMENT_CLASS="html5-qrcode-element",e.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",e.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",e.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",e.TORCH_BUTTON_ID="html5-qrcode-button-torch",e.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",e.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",e.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",e.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",e.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",e.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",e}();var $n=function(){function e(){}return e.createElement=function(t,n){var r=document.createElement(t);return r.id=n,r.classList.add(rn.ALL_ELEMENT_CLASS),t==="button"&&r.setAttribute("type","button"),r},e}();var RT=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function h(C){try{m(r.next(C))}catch(E){l(E)}}function g(C){try{m(r.throw(C))}catch(E){l(E)}}function m(C){C.done?s(C.value):i(C.value).then(h,g)}m((r=r.apply(e,t||[])).next())})},OT=function(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,l;return l={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function h(m){return function(C){return g([m,C])}}function g(m){if(r)throw new TypeError("Generator is already executing.");for(;l&&(l=0,m[0]&&(n=0)),n;)try{if(r=1,i&&(s=m[0]&2?i.return:m[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,m[1])).done)return s;switch(i=0,s&&(m=[m[0]&2,s.value]),m[0]){case 0:case 1:s=m;break;case 4:return n.label++,{value:m[1],done:!1};case 5:n.label++,i=m[1],m=[0];continue;case 7:m=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(m[0]===6||m[0]===2)){n=0;continue}if(m[0]===3&&(!s||m[1]>s[0]&&m[1]<s[3])){n.label=m[1];break}if(m[0]===6&&n.label<s[1]){n.label=s[1],s=m;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(m);break}s[2]&&n.ops.pop(),n.trys.pop();continue}m=t.call(e,n)}catch(C){m=[6,C],i=0}finally{r=s=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},NT=function(){function e(t,n,r){this.isTorchOn=!1,this.torchCapability=t,this.buttonController=n,this.onTorchActionFailureCallback=r}return e.prototype.isTorchEnabled=function(){return this.isTorchOn},e.prototype.flipState=function(){return RT(this,void 0,void 0,function(){var t,n;return OT(this,function(r){switch(r.label){case 0:this.buttonController.disable(),t=!this.isTorchOn,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.torchCapability.apply(t)];case 2:return r.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),t),[3,4];case 3:return n=r.sent(),this.propagateFailure(t,n),this.buttonController.enable(),[3,4];case 4:return[2]}})})},e.prototype.updateUiBasedOnLatestSettings=function(t,n){t===n?(this.buttonController.setText(n?Ze.torchOffButton():Ze.torchOnButton()),this.isTorchOn=n):this.propagateFailure(n),this.buttonController.enable()},e.prototype.propagateFailure=function(t,n){var r=t?Ze.torchOnFailedMessage():Ze.torchOffFailedMessage();n&&(r+="; Error = "+n),this.onTorchActionFailureCallback(r)},e.prototype.reset=function(){this.isTorchOn=!1},e}(),PT=function(){function e(t,n){this.onTorchActionFailureCallback=n,this.torchButton=$n.createElement("button",rn.TORCH_BUTTON_ID),this.torchController=new NT(t,this,n)}return e.prototype.render=function(t,n){var r=this;this.torchButton.innerText=Ze.torchOnButton(),this.torchButton.style.display=n.display,this.torchButton.style.marginLeft=n.marginLeft;var i=this;this.torchButton.addEventListener("click",function(s){return RT(r,void 0,void 0,function(){return OT(this,function(l){switch(l.label){case 0:return[4,i.torchController.flipState()];case 1:return l.sent(),i.torchController.isTorchEnabled()?(i.torchButton.classList.remove(rn.TORCH_BUTTON_CLASS_TORCH_OFF),i.torchButton.classList.add(rn.TORCH_BUTTON_CLASS_TORCH_ON)):(i.torchButton.classList.remove(rn.TORCH_BUTTON_CLASS_TORCH_ON),i.torchButton.classList.add(rn.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}})})}),t.appendChild(this.torchButton)},e.prototype.updateTorchCapability=function(t){this.torchController=new NT(t,this,this.onTorchActionFailureCallback)},e.prototype.getTorchButton=function(){return this.torchButton},e.prototype.hide=function(){this.torchButton.style.display="none"},e.prototype.show=function(){this.torchButton.style.display="inline-block"},e.prototype.disable=function(){this.torchButton.disabled=!0},e.prototype.enable=function(){this.torchButton.disabled=!1},e.prototype.setText=function(t){this.torchButton.innerText=t},e.prototype.reset=function(){this.torchButton.innerText=Ze.torchOnButton(),this.torchController.reset()},e.create=function(t,n,r,i){var s=new e(n,i);return s.render(t,r),s},e}();var kT=function(){function e(t,n,r){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=n?"block":"none",t.appendChild(this.fileBasedScanRegion);var i=document.createElement("label");i.setAttribute("for",this.getFileScanInputId()),i.style.display="inline-block",this.fileBasedScanRegion.appendChild(i),this.fileSelectionButton=$n.createElement("button",rn.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",function(h){i.click()}),i.append(this.fileSelectionButton),this.fileScanInput=$n.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",i.appendChild(this.fileScanInput);var s=this;this.fileScanInput.addEventListener("change",function(h){if(!(h==null||h.target==null)){var g=h.target;if(!(g.files&&g.files.length===0)){var m=g.files,C=m[0],E=C.name;s.setImageNameToButton(E),r(C)}}});var l=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(l),this.fileBasedScanRegion.addEventListener("dragenter",function(h){s.fileBasedScanRegion.style.border=s.fileBasedScanRegionActiveBorder(),h.stopPropagation(),h.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragleave",function(h){s.fileBasedScanRegion.style.border=s.fileBasedScanRegionDefaultBorder(),h.stopPropagation(),h.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragover",function(h){s.fileBasedScanRegion.style.border=s.fileBasedScanRegionActiveBorder(),h.stopPropagation(),h.preventDefault()}),this.fileBasedScanRegion.addEventListener("drop",function(h){h.stopPropagation(),h.preventDefault(),s.fileBasedScanRegion.style.border=s.fileBasedScanRegionDefaultBorder();var g=h.dataTransfer;if(g){var m=g.files;if(!m||m.length===0)return;for(var C=!1,E=0;E<m.length;++E){var x=m.item(E);if(x){var D=/image.*/;if(x.type.match(D)){C=!0;var N=x.name;s.setImageNameToButton(N),r(x),l.innerText=Ze.dragAndDropMessage();break}}}C||(l.innerText=Ze.dragAndDropMessageOnlyImages())}})}return e.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},e.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},e.prototype.isShowing=function(){return this.fileBasedScanRegion.style.display==="block"},e.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},e.prototype.createFileBasedScanRegion=function(){var t=document.createElement("div");return t.style.textAlign="center",t.style.margin="auto",t.style.width="80%",t.style.maxWidth="600px",t.style.border=this.fileBasedScanRegionDefaultBorder(),t.style.padding="10px",t.style.marginBottom="10px",t},e.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},e.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},e.prototype.createDragAndDropMessage=function(){var t=document.createElement("div");return t.innerText=Ze.dragAndDropMessage(),t.style.fontWeight="400",t},e.prototype.setImageNameToButton=function(t){var n=20;if(t.length>n){var r=t.substring(0,8),i=t.length,s=t.substring(i-8,i);t="".concat(r,"....").concat(s)}var l=Ze.fileSelectionChooseAnother()+" - "+t;this.fileSelectionButton.innerText=l},e.prototype.setInitialValueToButton=function(){var t=Ze.fileSelectionChooseImage()+" - "+Ze.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=t},e.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},e.create=function(t,n,r){var i=new e(t,n,r);return i},e}();var LT=function(){function e(t){this.selectElement=$n.createElement("select",rn.CAMERA_SELECTION_SELECT_ID),this.cameras=t,this.options=[]}return e.prototype.render=function(t){var n=document.createElement("span");n.style.marginRight="10px";var r=this.cameras.length;if(r===0)throw new Error("No cameras found");if(r===1)n.style.display="none";else{var i=Ze.selectCamera();n.innerText="".concat(i," (").concat(this.cameras.length,")  ")}for(var s=1,l=0,h=this.cameras;l<h.length;l++){var g=h[l],m=g.id,C=g.label==null?m:g.label;(!C||C==="")&&(C=[Ze.anonymousCameraPrefix(),s++].join(" "));var E=document.createElement("option");E.value=m,E.innerText=C,this.options.push(E),this.selectElement.appendChild(E)}n.appendChild(this.selectElement),t.appendChild(n)},e.prototype.disable=function(){this.selectElement.disabled=!0},e.prototype.isDisabled=function(){return this.selectElement.disabled===!0},e.prototype.enable=function(){this.selectElement.disabled=!1},e.prototype.getValue=function(){return this.selectElement.value},e.prototype.hasValue=function(t){for(var n=0,r=this.options;n<r.length;n++){var i=r[n];if(i.value===t)return!0}return!1},e.prototype.setValue=function(t){if(!this.hasValue(t))throw new Error("".concat(t," is not present in the camera list."));this.selectElement.value=t},e.prototype.hasSingleItem=function(){return this.cameras.length===1},e.prototype.numCameras=function(){return this.cameras.length},e.create=function(t,n){var r=new e(n);return r.render(t),r},e}();var FT=function(){function e(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=$n.createElement("input",rn.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return e.prototype.render=function(t,n){this.zoomElementContainer.style.display=n?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",t.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var r=Ze.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(r),this.rangeText.style.marginRight="10px";var i=this;this.rangeInput.addEventListener("input",function(){return i.onValueChange()}),this.rangeInput.addEventListener("change",function(){return i.onValueChange()}),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},e.prototype.onValueChange=function(){var t=Ze.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(t),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},e.prototype.setValues=function(t,n,r,i){this.rangeInput.min=t.toString(),this.rangeInput.max=n.toString(),this.rangeInput.step=i.toString(),this.rangeInput.value=r.toString(),this.onValueChange()},e.prototype.show=function(){this.zoomElementContainer.style.display="block"},e.prototype.hide=function(){this.zoomElementContainer.style.display="none"},e.prototype.setOnCameraZoomValueChangeCallback=function(t){this.onChangeCallback=t},e.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},e.create=function(t,n){var r=new e;return r.render(t,n),r},e}();var wr=function(e){return e[e.STATUS_DEFAULT=0]="STATUS_DEFAULT",e[e.STATUS_SUCCESS=1]="STATUS_SUCCESS",e[e.STATUS_WARNING=2]="STATUS_WARNING",e[e.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION",e}(wr||{});function LU(e){return{fps:e.fps,qrbox:e.qrbox,aspectRatio:e.aspectRatio,disableFlip:e.disableFlip,videoConstraints:e.videoConstraints}}function FU(e,t){return{formatsToSupport:e.formatsToSupport,useBarCodeDetectorIfSupported:e.useBarCodeDetectorIfSupported,experimentalFeatures:e.experimentalFeatures,verbose:t}}var K_=function(){function e(t,n,r){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=t,this.config=this.createConfig(n),this.verbose=r===!0,!document.getElementById(t))throw"HTML Element with id=".concat(t," not found");this.scanTypeSelector=new Ui(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new Zh(this.verbose),this.persistedDataManager=new TT,n.rememberLastUsedCamera!==!0&&this.persistedDataManager.reset()}return e.prototype.render=function(t,n){var r=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(s,l){if(t)t(s,l);else{if(r.lastMatchFound===s)return;r.lastMatchFound=s,r.setHeaderMessage(Ze.lastMatch(s),wr.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(s,l){n&&n(s,l)};var i=document.getElementById(this.elementId);if(!i)throw"HTML Element with id=".concat(this.elementId," not found");i.innerHTML="",this.createBasicLayout(i),this.html5Qrcode=new Jh(this.getScanRegionId(),FU(this.config,this.verbose))},e.prototype.pause=function(t){(vr(t)||t!==!0)&&(t=!1),this.getHtml5QrcodeOrFail().pause(t)},e.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},e.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},e.prototype.clear=function(){var t=this,n=function(){var r=document.getElementById(t.elementId);r&&(r.innerHTML="",t.resetBasicLayout(r))};return this.html5Qrcode?new Promise(function(r,i){if(!t.html5Qrcode){r();return}t.html5Qrcode.isScanning?t.html5Qrcode.stop().then(function(s){if(!t.html5Qrcode){r();return}t.html5Qrcode.clear(),n(),r()}).catch(function(s){t.verbose&&t.logger.logError("Unable to stop qrcode scanner",s),i(s)}):(t.html5Qrcode.clear(),n(),r())}):Promise.resolve()},e.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},e.prototype.applyVideoConstraints=function(t){return this.getHtml5QrcodeOrFail().applyVideoConstraints(t)},e.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},e.prototype.createConfig=function(t){return t?(t.fps||(t.fps=Gn.SCAN_DEFAULT_FPS),t.rememberLastUsedCamera!==!Gn.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(t.rememberLastUsedCamera=Gn.DEFAULT_REMEMBER_LAST_CAMERA_USED),t.supportedScanTypes||(t.supportedScanTypes=Gn.DEFAULT_SUPPORTED_SCAN_TYPE),t):{fps:Gn.SCAN_DEFAULT_FPS,rememberLastUsedCamera:Gn.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:Gn.DEFAULT_SUPPORTED_SCAN_TYPE}},e.prototype.createBasicLayout=function(t){t.style.position="relative",t.style.padding="0px",t.style.border="1px solid silver",this.createHeader(t);var n=document.createElement("div"),r=this.getScanRegionId();n.id=r,n.style.width="100%",n.style.minHeight="100px",n.style.textAlign="center",t.appendChild(n),Ui.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var i=document.createElement("div"),s=this.getDashboardId();i.id=s,i.style.width="100%",t.appendChild(i),this.setupInitialDashboard(i)},e.prototype.resetBasicLayout=function(t){t.style.border="none"},e.prototype.setupInitialDashboard=function(t){this.createSection(t),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},e.prototype.createHeader=function(t){var n=document.createElement("div");n.style.textAlign="left",n.style.margin="0px",t.appendChild(n);var r=new MT;r.renderInto(n);var i=document.createElement("div");i.id=this.getHeaderMessageContainerId(),i.style.display="none",i.style.textAlign="center",i.style.fontSize="14px",i.style.padding="2px 10px",i.style.margin="4px",i.style.borderTop="1px solid #f6f6f6",n.appendChild(i)},e.prototype.createSection=function(t){var n=document.createElement("div");n.id=this.getDashboardSectionId(),n.style.width="100%",n.style.padding="10px 0px 10px 0px",n.style.textAlign="left",t.appendChild(n)},e.prototype.createCameraListUi=function(t,n,r){var i=this;i.showHideScanTypeSwapLink(!1),i.setHeaderMessage(Ze.cameraPermissionRequesting());var s=function(){r||i.createPermissionButton(t,n)};Jh.getCameras().then(function(l){i.persistedDataManager.setHasPermission(!0),i.showHideScanTypeSwapLink(!0),i.resetHeaderMessage(),l&&l.length>0?(t.removeChild(n),i.renderCameraSelection(l)):(i.setHeaderMessage(Ze.noCameraFound(),wr.STATUS_WARNING),s())}).catch(function(l){i.persistedDataManager.setHasPermission(!1),r?r.disabled=!1:s(),i.setHeaderMessage(l,wr.STATUS_WARNING),i.showHideScanTypeSwapLink(!0)})},e.prototype.createPermissionButton=function(t,n){var r=this,i=$n.createElement("button",this.getCameraPermissionButtonId());i.innerText=Ze.cameraPermissionTitle(),i.addEventListener("click",function(){i.disabled=!0,r.createCameraListUi(t,n,i)}),n.appendChild(i)},e.prototype.createPermissionsUi=function(t,n){var r=this;if(Ui.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()){Q_.hasPermissions().then(function(i){i?r.createCameraListUi(t,n):(r.persistedDataManager.setHasPermission(!1),r.createPermissionButton(t,n))}).catch(function(i){r.persistedDataManager.setHasPermission(!1),r.createPermissionButton(t,n)});return}this.createPermissionButton(t,n)},e.prototype.createSectionControlPanel=function(){var t=document.getElementById(this.getDashboardSectionId()),n=document.createElement("div");t.appendChild(n);var r=document.createElement("div");r.id=this.getDashboardSectionCameraScanRegionId(),r.style.display=Ui.isCameraScanType(this.currentScanType)?"block":"none",n.appendChild(r);var i=document.createElement("div");i.style.textAlign="center",r.appendChild(i),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(r,i),this.renderFileScanUi(n)},e.prototype.renderFileScanUi=function(t){var n=Ui.isFileScanType(this.currentScanType),r=this,i=function(s){if(!r.html5Qrcode)throw"html5Qrcode not defined";Ui.isFileScanType(r.currentScanType)&&(r.setHeaderMessage(Ze.loadingImage()),r.html5Qrcode.scanFileV2(s,!0).then(function(l){r.resetHeaderMessage(),r.qrCodeSuccessCallback(l.decodedText,l)}).catch(function(l){r.setHeaderMessage(l,wr.STATUS_WARNING),r.qrCodeErrorCallback(l,Yh.createFrom(l))}))};this.fileSelectionUi=kT.create(t,n,i)},e.prototype.renderCameraSelection=function(t){var n=this,r=this,i=document.getElementById(this.getDashboardSectionCameraScanRegionId());i.style.textAlign="center";var s=FT.create(i,!1),l=function(U){var G=U.zoomFeature();if(G.isSupported()){s.setOnCameraZoomValueChangeCallback(function(ne){G.apply(ne)});var z=1;n.config.defaultZoomValueIfSupported&&(z=n.config.defaultZoomValueIfSupported),z=fT(z,G.min(),G.max()),s.setValues(G.min(),G.max(),z,G.step()),s.show()}},h=LT.create(i,t),g=document.createElement("span"),m=$n.createElement("button",rn.CAMERA_START_BUTTON_ID);m.innerText=Ze.scanButtonStartScanningText(),g.appendChild(m);var C=$n.createElement("button",rn.CAMERA_STOP_BUTTON_ID);C.innerText=Ze.scanButtonStopScanningText(),C.style.display="none",C.disabled=!0,g.appendChild(C);var E,x=function(U){if(!U.torchFeature().isSupported()){E&&E.hide();return}E?E.updateTorchCapability(U.torchFeature()):E=PT.create(g,U.torchFeature(),{display:"none",marginLeft:"5px"},function(G){r.setHeaderMessage(G,wr.STATUS_WARNING)}),E.show()};i.appendChild(g);var D=function(U){U||(m.style.display="none"),m.innerText=Ze.scanButtonStartScanningText(),m.style.opacity="1",m.disabled=!1,U&&(m.style.display="inline-block")};if(m.addEventListener("click",function(U){m.innerText=Ze.scanButtonScanningStarting(),h.disable(),m.disabled=!0,m.style.opacity="0.5",n.scanTypeSelector.hasMoreThanOneScanType()&&r.showHideScanTypeSwapLink(!1),r.resetHeaderMessage();var G=h.getValue();r.persistedDataManager.setLastUsedCameraId(G),r.html5Qrcode.start(G,LU(r.config),r.qrCodeSuccessCallback,r.qrCodeErrorCallback).then(function(z){C.disabled=!1,C.style.display="inline-block",D(!1);var ne=r.html5Qrcode.getRunningTrackCameraCapabilities();n.config.showTorchButtonIfSupported===!0&&x(ne),n.config.showZoomSliderIfSupported===!0&&l(ne)}).catch(function(z){r.showHideScanTypeSwapLink(!0),h.enable(),D(!0),r.setHeaderMessage(z,wr.STATUS_WARNING)})}),h.hasSingleItem()&&m.click(),C.addEventListener("click",function(U){if(!r.html5Qrcode)throw"html5Qrcode not defined";C.disabled=!0,r.html5Qrcode.stop().then(function(G){n.scanTypeSelector.hasMoreThanOneScanType()&&r.showHideScanTypeSwapLink(!0),h.enable(),m.disabled=!1,C.style.display="none",m.style.display="inline-block",E&&(E.reset(),E.hide()),s.removeOnCameraZoomValueChangeCallback(),s.hide(),r.insertCameraScanImageToScanRegion()}).catch(function(G){C.disabled=!1,r.setHeaderMessage(G,wr.STATUS_WARNING)})}),r.persistedDataManager.getLastUsedCameraId()){var N=r.persistedDataManager.getLastUsedCameraId();h.hasValue(N)?(h.setValue(N),m.click()):r.persistedDataManager.resetLastUsedCameraId()}},e.prototype.createSectionSwap=function(){var t=this,n=Ze.textIfCameraScanSelected(),r=Ze.textIfFileScanSelected(),i=document.getElementById(this.getDashboardSectionId()),s=document.createElement("div");s.style.textAlign="center";var l=$n.createElement("span",this.getDashboardSectionSwapLinkId());l.style.textDecoration="underline",l.style.cursor="pointer",l.innerText=Ui.isCameraScanType(this.currentScanType)?n:r,l.addEventListener("click",function(){if(!t.sectionSwapAllowed){t.verbose&&t.logger.logError("Section swap called when not allowed");return}t.resetHeaderMessage(),t.fileSelectionUi.resetValue(),t.sectionSwapAllowed=!1,Ui.isCameraScanType(t.currentScanType)?(t.clearScanRegion(),t.getCameraScanRegion().style.display="none",t.fileSelectionUi.show(),l.innerText=r,t.currentScanType=li.SCAN_TYPE_FILE,t.insertFileScanImageToScanRegion()):(t.clearScanRegion(),t.getCameraScanRegion().style.display="block",t.fileSelectionUi.hide(),l.innerText=n,t.currentScanType=li.SCAN_TYPE_CAMERA,t.insertCameraScanImageToScanRegion(),t.startCameraScanIfPermissionExistsOnSwap()),t.sectionSwapAllowed=!0}),s.appendChild(l),i.appendChild(s)},e.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var t=this,n=this;if(this.persistedDataManager.hasCameraPermissions()){Q_.hasPermissions().then(function(r){if(r){var i=document.getElementById(n.getCameraPermissionButtonId());if(!i)throw t.logger.logError("Permission button not found, fail;"),"Permission button not found";i.click()}else n.persistedDataManager.setHasPermission(!1)}).catch(function(r){n.persistedDataManager.setHasPermission(!1)});return}},e.prototype.resetHeaderMessage=function(){var t=document.getElementById(this.getHeaderMessageContainerId());t.style.display="none"},e.prototype.setHeaderMessage=function(t,n){n||(n=wr.STATUS_DEFAULT);var r=this.getHeaderMessageDiv();switch(r.innerText=t,r.style.display="block",n){case wr.STATUS_SUCCESS:r.style.background="rgba(106, 175, 80, 0.26)",r.style.color="#477735";break;case wr.STATUS_WARNING:r.style.background="rgba(203, 36, 49, 0.14)",r.style.color="#cb2431";break;case wr.STATUS_DEFAULT:default:r.style.background="rgba(0, 0, 0, 0)",r.style.color="rgb(17, 17, 17)";break}},e.prototype.showHideScanTypeSwapLink=function(t){this.scanTypeSelector.hasMoreThanOneScanType()&&(t!==!0&&(t=!1),this.sectionSwapAllowed=t,this.getDashboardSectionSwapLink().style.display=t?"inline-block":"none")},e.prototype.insertCameraScanImageToScanRegion=function(){var t=this,n=document.getElementById(this.getScanRegionId());if(this.cameraScanImage){n.innerHTML="<br>",n.appendChild(this.cameraScanImage);return}this.cameraScanImage=new Image,this.cameraScanImage.onload=function(r){n.innerHTML="<br>",n.appendChild(t.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=xT,this.cameraScanImage.alt=Ze.cameraScanAltText()},e.prototype.insertFileScanImageToScanRegion=function(){var t=this,n=document.getElementById(this.getScanRegionId());if(this.fileScanImage){n.innerHTML="<br>",n.appendChild(this.fileScanImage);return}this.fileScanImage=new Image,this.fileScanImage.onload=function(r){n.innerHTML="<br>",n.appendChild(t.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=ST,this.fileScanImage.alt=Ze.fileScanAltText()},e.prototype.clearScanRegion=function(){var t=document.getElementById(this.getScanRegionId());t.innerHTML=""},e.prototype.getDashboardSectionId=function(){return"".concat(this.elementId,"__dashboard_section")},e.prototype.getDashboardSectionCameraScanRegionId=function(){return"".concat(this.elementId,"__dashboard_section_csr")},e.prototype.getDashboardSectionSwapLinkId=function(){return rn.SCAN_TYPE_CHANGE_ANCHOR_ID},e.prototype.getScanRegionId=function(){return"".concat(this.elementId,"__scan_region")},e.prototype.getDashboardId=function(){return"".concat(this.elementId,"__dashboard")},e.prototype.getHeaderMessageContainerId=function(){return"".concat(this.elementId,"__header_message")},e.prototype.getCameraPermissionButtonId=function(){return rn.CAMERA_PERMISSION_BUTTON_ID},e.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},e.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},e.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())},e}();function BU(e,t){if(e&1&&(F(0,"p"),$(1),L()),e&2){let n=St();ae(),Cn("Table ID: ",n.tableId,"")}}var BT=(()=>{class e{navigationService;tableId=null;uniqueLinkToken=null;ownerId=null;restaurantid=null;html5QrCodeScanner=null;constructor(n){this.navigationService=n}ngAfterViewInit(){this.html5QrCodeScanner=new K_("reader",{fps:10,qrbox:{width:250,height:250}},!1),this.html5QrCodeScanner.render(this.onScanSuccess.bind(this),this.onScanFailure)}onScanSuccess(n){let r=new URL(n),i=r.searchParams.get("tableid"),s=r.searchParams.get("uniqueLinkToken"),l=r.searchParams.get("restaurantid"),h=r.searchParams.get("ownerid");i?(this.tableId=i,this.uniqueLinkToken=s,this.restaurantid=l,this.ownerId=h,localStorage.setItem("customercurrentTable",this.tableId),localStorage.setItem("uniqueLinkToken",this.uniqueLinkToken),localStorage.setItem("restaurantid",this.restaurantid),localStorage.setItem("ownerid",this.ownerId),this.navigationService.NavigateTo("tableordered"),console.log("Table ID saved:",this.tableId)):console.error("Table ID not found in the scanned QR code."),this.html5QrCodeScanner?.clear()}onScanFailure(n){console.warn(`QR code scan error: ${n}`)}ngOnDestroy(){this.html5QrCodeScanner?.clear()}static \u0275fac=function(r){return new(r||e)(re(ft))};static \u0275cmp=pe({type:e,selectors:[["app-scanqrcode"]],standalone:!0,features:[ve],decls:4,vars:1,consts:[["id","reader",2,"width","300px"]],template:function(r,i){r&1&&(F(0,"p"),$(1,"scanqrcode works!"),L(),_e(2,"div",0),jn(3,BU,2,1,"p")),r&2&&(ae(3),Hn(i.tableId?3:-1))}})}return e})();var VT=(()=>{class e{router;constructor(n){this.router=n}setOrder(n){localStorage.setItem("orderNumber",n),this.router.navigate(["/scanqrcode"])}static \u0275fac=function(r){return new(r||e)(re(po))};static \u0275cmp=pe({type:e,selectors:[["app-setorder"]],standalone:!0,features:[ve],decls:13,vars:0,consts:[["orderNumberInput",""],[1,"displaybox"],[1,"logo"],[1,"buttons"],["type","number","placeholder","numer zam\xF3wienia"],[3,"click"],[1,"footstatic"]],template:function(r,i){if(r&1){let s=fn();F(0,"main")(1,"div",1)(2,"div",2)(3,"h1"),$(4,"EasyOrder"),L()(),F(5,"div",3)(6,"label"),$(7,"Wprowad\u017A numer zam\xF3wienia"),L(),_e(8,"input",4,0),F(10,"button",5),ie("click",function(){kt(s);let h=ef(9);return Lt(i.setOrder(h.value))}),$(11,"Przypisz stolik"),L()(),_e(12,"div",6),L()()}}})}return e})();var UT=[{path:"",component:v_},{path:"landingpage",component:v_},{path:"register",component:UA},{path:"login",component:gA},{path:"newrestaurant",component:jA},{path:"managerestaurant",component:HA},{path:"changerestaurant",component:zA},{path:"restaurantbilings",component:WA},{path:"restaurantsettings",component:GA},{path:"tablemanage",component:YA},{path:"tablecreate",component:ZA},{path:"tableedit",component:XA},{path:"restaurantstats",component:qA},{path:"restaurantrevievs",component:$A},{path:"settable",component:QA},{path:"tablegroupcreate",component:JA},{path:"tablegroupmanage",component:KA},{path:"showtableqr",component:rT},{path:"tablesettings",component:iT},{path:"waitersettings",component:oT},{path:"alltablesqrcodes",component:sT},{path:"tableordered",component:cT},{path:"scanqrcode",component:BT},{path:"setorder",component:VT}];$I(Nb,{providers:[Mb(UT),{provide:zn}]});
