var kA=Object.create;var Xp=Object.defineProperty,FA=Object.defineProperties,LA=Object.getOwnPropertyDescriptor,BA=Object.getOwnPropertyDescriptors,UA=Object.getOwnPropertyNames,Bu=Object.getOwnPropertySymbols,VA=Object.getPrototypeOf,Qp=Object.prototype.hasOwnProperty,tw=Object.prototype.propertyIsEnumerable;var ew=(e,n,t)=>n in e?Xp(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,re=(e,n)=>{for(var t in n||={})Qp.call(n,t)&&ew(e,t,n[t]);if(Bu)for(var t of Bu(n))tw.call(n,t)&&ew(e,t,n[t]);return e},Ue=(e,n)=>FA(e,BA(n));var nw=(e,n)=>{var t={};for(var r in e)Qp.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(e!=null&&Bu)for(var r of Bu(e))n.indexOf(r)<0&&tw.call(e,r)&&(t[r]=e[r]);return t};var gt=(e,n)=>()=>(n||e((n={exports:{}}).exports,n),n.exports);var jA=(e,n,t,r)=>{if(n&&typeof n=="object"||typeof n=="function")for(let i of UA(n))!Qp.call(e,i)&&i!==t&&Xp(e,i,{get:()=>n[i],enumerable:!(r=LA(n,i))||r.enumerable});return e};var rw=(e,n,t)=>(t=e!=null?kA(VA(e)):{},jA(n||!e||!e.__esModule?Xp(t,"default",{value:e,enumerable:!0}):t,e));var Zt=(e,n,t)=>new Promise((r,i)=>{var o=g=>{try{h(t.next(g))}catch(m){i(m)}},l=g=>{try{h(t.throw(g))}catch(m){i(m)}},h=g=>g.done?r(g.value):Promise.resolve(g.value).then(o,l);h((t=t.apply(e,n)).next())});var eM=gt((XZ,JD)=>{"use strict";JD.exports=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}});var Lo=gt(ks=>{"use strict";var Z_,J7=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];ks.getSymbolSize=function(n){if(!n)throw new Error('"version" cannot be null or undefined');if(n<1||n>40)throw new Error('"version" should be in range from 1 to 40');return n*4+17};ks.getSymbolTotalCodewords=function(n){return J7[n]};ks.getBCHDigit=function(e){let n=0;for(;e!==0;)n++,e>>>=1;return n};ks.setToSJISFunction=function(n){if(typeof n!="function")throw new Error('"toSJISFunc" is not a valid function.');Z_=n};ks.isKanjiModeEnabled=function(){return typeof Z_<"u"};ks.toSJIS=function(n){return Z_(n)}});var lp=gt(Or=>{"use strict";Or.L={bit:1};Or.M={bit:0};Or.Q={bit:3};Or.H={bit:2};function e9(e){if(typeof e!="string")throw new Error("Param is not a string");switch(e.toLowerCase()){case"l":case"low":return Or.L;case"m":case"medium":return Or.M;case"q":case"quartile":return Or.Q;case"h":case"high":return Or.H;default:throw new Error("Unknown EC Level: "+e)}}Or.isValid=function(n){return n&&typeof n.bit<"u"&&n.bit>=0&&n.bit<4};Or.from=function(n,t){if(Or.isValid(n))return n;try{return e9(n)}catch{return t}}});var rM=gt((JZ,nM)=>{"use strict";function tM(){this.buffer=[],this.length=0}tM.prototype={get:function(e){let n=Math.floor(e/8);return(this.buffer[n]>>>7-e%8&1)===1},put:function(e,n){for(let t=0;t<n;t++)this.putBit((e>>>n-t-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(e){let n=Math.floor(this.length/8);this.buffer.length<=n&&this.buffer.push(0),e&&(this.buffer[n]|=128>>>this.length%8),this.length++}};nM.exports=tM});var oM=gt((eX,iM)=>{"use strict";function gu(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}gu.prototype.set=function(e,n,t,r){let i=e*this.size+n;this.data[i]=t,r&&(this.reservedBit[i]=!0)};gu.prototype.get=function(e,n){return this.data[e*this.size+n]};gu.prototype.xor=function(e,n,t){this.data[e*this.size+n]^=t};gu.prototype.isReserved=function(e,n){return this.reservedBit[e*this.size+n]};iM.exports=gu});var sM=gt(cp=>{"use strict";var t9=Lo().getSymbolSize;cp.getRowColCoords=function(n){if(n===1)return[];let t=Math.floor(n/7)+2,r=t9(n),i=r===145?26:Math.ceil((r-13)/(2*t-2))*2,o=[r-7];for(let l=1;l<t-1;l++)o[l]=o[l-1]-i;return o.push(6),o.reverse()};cp.getPositions=function(n){let t=[],r=cp.getRowColCoords(n),i=r.length;for(let o=0;o<i;o++)for(let l=0;l<i;l++)o===0&&l===0||o===0&&l===i-1||o===i-1&&l===0||t.push([r[o],r[l]]);return t}});var cM=gt(lM=>{"use strict";var n9=Lo().getSymbolSize,aM=7;lM.getPositions=function(n){let t=n9(n);return[[0,0],[t-aM,0],[0,t-aM]]}});var uM=gt(Pt=>{"use strict";Pt.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};var Fs={N1:3,N2:3,N3:40,N4:10};Pt.isValid=function(n){return n!=null&&n!==""&&!isNaN(n)&&n>=0&&n<=7};Pt.from=function(n){return Pt.isValid(n)?parseInt(n,10):void 0};Pt.getPenaltyN1=function(n){let t=n.size,r=0,i=0,o=0,l=null,h=null;for(let g=0;g<t;g++){i=o=0,l=h=null;for(let m=0;m<t;m++){let v=n.get(g,m);v===l?i++:(i>=5&&(r+=Fs.N1+(i-5)),l=v,i=1),v=n.get(m,g),v===h?o++:(o>=5&&(r+=Fs.N1+(o-5)),h=v,o=1)}i>=5&&(r+=Fs.N1+(i-5)),o>=5&&(r+=Fs.N1+(o-5))}return r};Pt.getPenaltyN2=function(n){let t=n.size,r=0;for(let i=0;i<t-1;i++)for(let o=0;o<t-1;o++){let l=n.get(i,o)+n.get(i,o+1)+n.get(i+1,o)+n.get(i+1,o+1);(l===4||l===0)&&r++}return r*Fs.N2};Pt.getPenaltyN3=function(n){let t=n.size,r=0,i=0,o=0;for(let l=0;l<t;l++){i=o=0;for(let h=0;h<t;h++)i=i<<1&2047|n.get(l,h),h>=10&&(i===1488||i===93)&&r++,o=o<<1&2047|n.get(h,l),h>=10&&(o===1488||o===93)&&r++}return r*Fs.N3};Pt.getPenaltyN4=function(n){let t=0,r=n.data.length;for(let o=0;o<r;o++)t+=n.data[o];return Math.abs(Math.ceil(t*100/r/5)-10)*Fs.N4};function r9(e,n,t){switch(e){case Pt.Patterns.PATTERN000:return(n+t)%2===0;case Pt.Patterns.PATTERN001:return n%2===0;case Pt.Patterns.PATTERN010:return t%3===0;case Pt.Patterns.PATTERN011:return(n+t)%3===0;case Pt.Patterns.PATTERN100:return(Math.floor(n/2)+Math.floor(t/3))%2===0;case Pt.Patterns.PATTERN101:return n*t%2+n*t%3===0;case Pt.Patterns.PATTERN110:return(n*t%2+n*t%3)%2===0;case Pt.Patterns.PATTERN111:return(n*t%3+(n+t)%2)%2===0;default:throw new Error("bad maskPattern:"+e)}}Pt.applyMask=function(n,t){let r=t.size;for(let i=0;i<r;i++)for(let o=0;o<r;o++)t.isReserved(o,i)||t.xor(o,i,r9(n,o,i))};Pt.getBestMask=function(n,t){let r=Object.keys(Pt.Patterns).length,i=0,o=1/0;for(let l=0;l<r;l++){t(l),Pt.applyMask(l,n);let h=Pt.getPenaltyN1(n)+Pt.getPenaltyN2(n)+Pt.getPenaltyN3(n)+Pt.getPenaltyN4(n);Pt.applyMask(l,n),h<o&&(o=h,i=l)}return i}});var Q_=gt(X_=>{"use strict";var Bo=lp(),up=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],dp=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];X_.getBlocksCount=function(n,t){switch(t){case Bo.L:return up[(n-1)*4+0];case Bo.M:return up[(n-1)*4+1];case Bo.Q:return up[(n-1)*4+2];case Bo.H:return up[(n-1)*4+3];default:return}};X_.getTotalCodewordsCount=function(n,t){switch(t){case Bo.L:return dp[(n-1)*4+0];case Bo.M:return dp[(n-1)*4+1];case Bo.Q:return dp[(n-1)*4+2];case Bo.H:return dp[(n-1)*4+3];default:return}}});var dM=gt(hp=>{"use strict";var mu=new Uint8Array(512),fp=new Uint8Array(256);(function(){let n=1;for(let t=0;t<255;t++)mu[t]=n,fp[n]=t,n<<=1,n&256&&(n^=285);for(let t=255;t<512;t++)mu[t]=mu[t-255]})();hp.log=function(n){if(n<1)throw new Error("log("+n+")");return fp[n]};hp.exp=function(n){return mu[n]};hp.mul=function(n,t){return n===0||t===0?0:mu[fp[n]+fp[t]]}});var fM=gt(yu=>{"use strict";var K_=dM();yu.mul=function(n,t){let r=new Uint8Array(n.length+t.length-1);for(let i=0;i<n.length;i++)for(let o=0;o<t.length;o++)r[i+o]^=K_.mul(n[i],t[o]);return r};yu.mod=function(n,t){let r=new Uint8Array(n);for(;r.length-t.length>=0;){let i=r[0];for(let l=0;l<t.length;l++)r[l]^=K_.mul(t[l],i);let o=0;for(;o<r.length&&r[o]===0;)o++;r=r.slice(o)}return r};yu.generateECPolynomial=function(n){let t=new Uint8Array([1]);for(let r=0;r<n;r++)t=yu.mul(t,new Uint8Array([1,K_.exp(r)]));return t}});var gM=gt((aX,pM)=>{"use strict";var hM=fM();function J_(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}J_.prototype.initialize=function(n){this.degree=n,this.genPoly=hM.generateECPolynomial(this.degree)};J_.prototype.encode=function(n){if(!this.genPoly)throw new Error("Encoder not initialized");let t=new Uint8Array(n.length+this.degree);t.set(n);let r=hM.mod(t,this.genPoly),i=this.degree-r.length;if(i>0){let o=new Uint8Array(this.degree);return o.set(r,i),o}return r};pM.exports=J_});var eC=gt(mM=>{"use strict";mM.isValid=function(n){return!isNaN(n)&&n>=1&&n<=40}});var tC=gt(Qi=>{"use strict";var yM="[0-9]+",i9="[A-Z $%*+\\-./:]+",_u="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";_u=_u.replace(/u/g,"\\u");var o9="(?:(?![A-Z0-9 $%*+\\-./:]|"+_u+`)(?:.|[\r
]))+`;Qi.KANJI=new RegExp(_u,"g");Qi.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");Qi.BYTE=new RegExp(o9,"g");Qi.NUMERIC=new RegExp(yM,"g");Qi.ALPHANUMERIC=new RegExp(i9,"g");var s9=new RegExp("^"+_u+"$"),a9=new RegExp("^"+yM+"$"),l9=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");Qi.testKanji=function(n){return s9.test(n)};Qi.testNumeric=function(n){return a9.test(n)};Qi.testAlphanumeric=function(n){return l9.test(n)}});var Uo=gt(en=>{"use strict";var c9=eC(),nC=tC();en.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]};en.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]};en.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]};en.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]};en.MIXED={bit:-1};en.getCharCountIndicator=function(n,t){if(!n.ccBits)throw new Error("Invalid mode: "+n);if(!c9.isValid(t))throw new Error("Invalid version: "+t);return t>=1&&t<10?n.ccBits[0]:t<27?n.ccBits[1]:n.ccBits[2]};en.getBestModeForData=function(n){return nC.testNumeric(n)?en.NUMERIC:nC.testAlphanumeric(n)?en.ALPHANUMERIC:nC.testKanji(n)?en.KANJI:en.BYTE};en.toString=function(n){if(n&&n.id)return n.id;throw new Error("Invalid mode")};en.isValid=function(n){return n&&n.bit&&n.ccBits};function u9(e){if(typeof e!="string")throw new Error("Param is not a string");switch(e.toLowerCase()){case"numeric":return en.NUMERIC;case"alphanumeric":return en.ALPHANUMERIC;case"kanji":return en.KANJI;case"byte":return en.BYTE;default:throw new Error("Unknown mode: "+e)}}en.from=function(n,t){if(en.isValid(n))return n;try{return u9(n)}catch{return t}}});var bM=gt(Ls=>{"use strict";var pp=Lo(),d9=Q_(),_M=lp(),Vo=Uo(),rC=eC(),wM=7973,CM=pp.getBCHDigit(wM);function f9(e,n,t){for(let r=1;r<=40;r++)if(n<=Ls.getCapacity(r,t,e))return r}function vM(e,n){return Vo.getCharCountIndicator(e,n)+4}function h9(e,n){let t=0;return e.forEach(function(r){let i=vM(r.mode,n);t+=i+r.getBitsLength()}),t}function p9(e,n){for(let t=1;t<=40;t++)if(h9(e,t)<=Ls.getCapacity(t,n,Vo.MIXED))return t}Ls.from=function(n,t){return rC.isValid(n)?parseInt(n,10):t};Ls.getCapacity=function(n,t,r){if(!rC.isValid(n))throw new Error("Invalid QR Code version");typeof r>"u"&&(r=Vo.BYTE);let i=pp.getSymbolTotalCodewords(n),o=d9.getTotalCodewordsCount(n,t),l=(i-o)*8;if(r===Vo.MIXED)return l;let h=l-vM(r,n);switch(r){case Vo.NUMERIC:return Math.floor(h/10*3);case Vo.ALPHANUMERIC:return Math.floor(h/11*2);case Vo.KANJI:return Math.floor(h/13);case Vo.BYTE:default:return Math.floor(h/8)}};Ls.getBestVersionForData=function(n,t){let r,i=_M.from(t,_M.M);if(Array.isArray(n)){if(n.length>1)return p9(n,i);if(n.length===0)return 1;r=n[0]}else r=n;return f9(r.mode,r.getLength(),i)};Ls.getEncodedBits=function(n){if(!rC.isValid(n)||n<7)throw new Error("Invalid QR Code version");let t=n<<12;for(;pp.getBCHDigit(t)-CM>=0;)t^=wM<<pp.getBCHDigit(t)-CM;return n<<12|t}});var SM=gt(IM=>{"use strict";var iC=Lo(),EM=1335,g9=21522,xM=iC.getBCHDigit(EM);IM.getEncodedBits=function(n,t){let r=n.bit<<3|t,i=r<<10;for(;iC.getBCHDigit(i)-xM>=0;)i^=EM<<iC.getBCHDigit(i)-xM;return(r<<10|i)^g9}});var MM=gt((hX,DM)=>{"use strict";var m9=Uo();function sl(e){this.mode=m9.NUMERIC,this.data=e.toString()}sl.getBitsLength=function(n){return 10*Math.floor(n/3)+(n%3?n%3*3+1:0)};sl.prototype.getLength=function(){return this.data.length};sl.prototype.getBitsLength=function(){return sl.getBitsLength(this.data.length)};sl.prototype.write=function(n){let t,r,i;for(t=0;t+3<=this.data.length;t+=3)r=this.data.substr(t,3),i=parseInt(r,10),n.put(i,10);let o=this.data.length-t;o>0&&(r=this.data.substr(t),i=parseInt(r,10),n.put(i,o*3+1))};DM.exports=sl});var AM=gt((pX,TM)=>{"use strict";var y9=Uo(),oC=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function al(e){this.mode=y9.ALPHANUMERIC,this.data=e}al.getBitsLength=function(n){return 11*Math.floor(n/2)+6*(n%2)};al.prototype.getLength=function(){return this.data.length};al.prototype.getBitsLength=function(){return al.getBitsLength(this.data.length)};al.prototype.write=function(n){let t;for(t=0;t+2<=this.data.length;t+=2){let r=oC.indexOf(this.data[t])*45;r+=oC.indexOf(this.data[t+1]),n.put(r,11)}this.data.length%2&&n.put(oC.indexOf(this.data[t]),6)};TM.exports=al});var NM=gt((gX,OM)=>{"use strict";OM.exports=function(n){for(var t=[],r=n.length,i=0;i<r;i++){var o=n.charCodeAt(i);if(o>=55296&&o<=56319&&r>i+1){var l=n.charCodeAt(i+1);l>=56320&&l<=57343&&(o=(o-55296)*1024+l-56320+65536,i+=1)}if(o<128){t.push(o);continue}if(o<2048){t.push(o>>6|192),t.push(o&63|128);continue}if(o<55296||o>=57344&&o<65536){t.push(o>>12|224),t.push(o>>6&63|128),t.push(o&63|128);continue}if(o>=65536&&o<=1114111){t.push(o>>18|240),t.push(o>>12&63|128),t.push(o>>6&63|128),t.push(o&63|128);continue}t.push(239,191,189)}return new Uint8Array(t).buffer}});var PM=gt((mX,RM)=>{"use strict";var _9=NM(),C9=Uo();function ll(e){this.mode=C9.BYTE,typeof e=="string"&&(e=_9(e)),this.data=new Uint8Array(e)}ll.getBitsLength=function(n){return n*8};ll.prototype.getLength=function(){return this.data.length};ll.prototype.getBitsLength=function(){return ll.getBitsLength(this.data.length)};ll.prototype.write=function(e){for(let n=0,t=this.data.length;n<t;n++)e.put(this.data[n],8)};RM.exports=ll});var FM=gt((yX,kM)=>{"use strict";var w9=Uo(),v9=Lo();function cl(e){this.mode=w9.KANJI,this.data=e}cl.getBitsLength=function(n){return n*13};cl.prototype.getLength=function(){return this.data.length};cl.prototype.getBitsLength=function(){return cl.getBitsLength(this.data.length)};cl.prototype.write=function(e){let n;for(n=0;n<this.data.length;n++){let t=v9.toSJIS(this.data[n]);if(t>=33088&&t<=40956)t-=33088;else if(t>=57408&&t<=60351)t-=49472;else throw new Error("Invalid SJIS character: "+this.data[n]+`
Make sure your charset is UTF-8`);t=(t>>>8&255)*192+(t&255),e.put(t,13)}};kM.exports=cl});var LM=gt((_X,sC)=>{"use strict";var Cu={single_source_shortest_paths:function(e,n,t){var r={},i={};i[n]=0;var o=Cu.PriorityQueue.make();o.push(n,0);for(var l,h,g,m,v,b,I,T,P;!o.empty();){l=o.pop(),h=l.value,m=l.cost,v=e[h]||{};for(g in v)v.hasOwnProperty(g)&&(b=v[g],I=m+b,T=i[g],P=typeof i[g]>"u",(P||T>I)&&(i[g]=I,o.push(g,I),r[g]=h))}if(typeof t<"u"&&typeof i[t]>"u"){var z=["Could not find a path from ",n," to ",t,"."].join("");throw new Error(z)}return r},extract_shortest_path_from_predecessor_list:function(e,n){for(var t=[],r=n,i;r;)t.push(r),i=e[r],r=e[r];return t.reverse(),t},find_path:function(e,n,t){var r=Cu.single_source_shortest_paths(e,n,t);return Cu.extract_shortest_path_from_predecessor_list(r,t)},PriorityQueue:{make:function(e){var n=Cu.PriorityQueue,t={},r;e=e||{};for(r in n)n.hasOwnProperty(r)&&(t[r]=n[r]);return t.queue=[],t.sorter=e.sorter||n.default_sorter,t},default_sorter:function(e,n){return e.cost-n.cost},push:function(e,n){var t={value:e,cost:n};this.queue.push(t),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};typeof sC<"u"&&(sC.exports=Cu)});var GM=gt(ul=>{"use strict";var Ct=Uo(),VM=MM(),jM=AM(),HM=PM(),zM=FM(),wu=tC(),gp=Lo(),b9=LM();function BM(e){return unescape(encodeURIComponent(e)).length}function vu(e,n,t){let r=[],i;for(;(i=e.exec(t))!==null;)r.push({data:i[0],index:i.index,mode:n,length:i[0].length});return r}function WM(e){let n=vu(wu.NUMERIC,Ct.NUMERIC,e),t=vu(wu.ALPHANUMERIC,Ct.ALPHANUMERIC,e),r,i;return gp.isKanjiModeEnabled()?(r=vu(wu.BYTE,Ct.BYTE,e),i=vu(wu.KANJI,Ct.KANJI,e)):(r=vu(wu.BYTE_KANJI,Ct.BYTE,e),i=[]),n.concat(t,r,i).sort(function(l,h){return l.index-h.index}).map(function(l){return{data:l.data,mode:l.mode,length:l.length}})}function aC(e,n){switch(n){case Ct.NUMERIC:return VM.getBitsLength(e);case Ct.ALPHANUMERIC:return jM.getBitsLength(e);case Ct.KANJI:return zM.getBitsLength(e);case Ct.BYTE:return HM.getBitsLength(e)}}function x9(e){return e.reduce(function(n,t){let r=n.length-1>=0?n[n.length-1]:null;return r&&r.mode===t.mode?(n[n.length-1].data+=t.data,n):(n.push(t),n)},[])}function E9(e){let n=[];for(let t=0;t<e.length;t++){let r=e[t];switch(r.mode){case Ct.NUMERIC:n.push([r,{data:r.data,mode:Ct.ALPHANUMERIC,length:r.length},{data:r.data,mode:Ct.BYTE,length:r.length}]);break;case Ct.ALPHANUMERIC:n.push([r,{data:r.data,mode:Ct.BYTE,length:r.length}]);break;case Ct.KANJI:n.push([r,{data:r.data,mode:Ct.BYTE,length:BM(r.data)}]);break;case Ct.BYTE:n.push([{data:r.data,mode:Ct.BYTE,length:BM(r.data)}])}}return n}function I9(e,n){let t={},r={start:{}},i=["start"];for(let o=0;o<e.length;o++){let l=e[o],h=[];for(let g=0;g<l.length;g++){let m=l[g],v=""+o+g;h.push(v),t[v]={node:m,lastCount:0},r[v]={};for(let b=0;b<i.length;b++){let I=i[b];t[I]&&t[I].node.mode===m.mode?(r[I][v]=aC(t[I].lastCount+m.length,m.mode)-aC(t[I].lastCount,m.mode),t[I].lastCount+=m.length):(t[I]&&(t[I].lastCount=m.length),r[I][v]=aC(m.length,m.mode)+4+Ct.getCharCountIndicator(m.mode,n))}}i=h}for(let o=0;o<i.length;o++)r[i[o]].end=0;return{map:r,table:t}}function UM(e,n){let t,r=Ct.getBestModeForData(e);if(t=Ct.from(n,r),t!==Ct.BYTE&&t.bit<r.bit)throw new Error('"'+e+'" cannot be encoded with mode '+Ct.toString(t)+`.
 Suggested mode is: `+Ct.toString(r));switch(t===Ct.KANJI&&!gp.isKanjiModeEnabled()&&(t=Ct.BYTE),t){case Ct.NUMERIC:return new VM(e);case Ct.ALPHANUMERIC:return new jM(e);case Ct.KANJI:return new zM(e);case Ct.BYTE:return new HM(e)}}ul.fromArray=function(n){return n.reduce(function(t,r){return typeof r=="string"?t.push(UM(r,null)):r.data&&t.push(UM(r.data,r.mode)),t},[])};ul.fromString=function(n,t){let r=WM(n,gp.isKanjiModeEnabled()),i=E9(r),o=I9(i,t),l=b9.find_path(o.map,"start","end"),h=[];for(let g=1;g<l.length-1;g++)h.push(o.table[l[g]].node);return ul.fromArray(x9(h))};ul.rawSplit=function(n){return ul.fromArray(WM(n,gp.isKanjiModeEnabled()))}});var qM=gt($M=>{"use strict";var yp=Lo(),lC=lp(),S9=rM(),D9=oM(),M9=sM(),T9=cM(),dC=uM(),fC=Q_(),A9=gM(),mp=bM(),O9=SM(),N9=Uo(),cC=GM();function R9(e,n){let t=e.size,r=T9.getPositions(n);for(let i=0;i<r.length;i++){let o=r[i][0],l=r[i][1];for(let h=-1;h<=7;h++)if(!(o+h<=-1||t<=o+h))for(let g=-1;g<=7;g++)l+g<=-1||t<=l+g||(h>=0&&h<=6&&(g===0||g===6)||g>=0&&g<=6&&(h===0||h===6)||h>=2&&h<=4&&g>=2&&g<=4?e.set(o+h,l+g,!0,!0):e.set(o+h,l+g,!1,!0))}}function P9(e){let n=e.size;for(let t=8;t<n-8;t++){let r=t%2===0;e.set(t,6,r,!0),e.set(6,t,r,!0)}}function k9(e,n){let t=M9.getPositions(n);for(let r=0;r<t.length;r++){let i=t[r][0],o=t[r][1];for(let l=-2;l<=2;l++)for(let h=-2;h<=2;h++)l===-2||l===2||h===-2||h===2||l===0&&h===0?e.set(i+l,o+h,!0,!0):e.set(i+l,o+h,!1,!0)}}function F9(e,n){let t=e.size,r=mp.getEncodedBits(n),i,o,l;for(let h=0;h<18;h++)i=Math.floor(h/3),o=h%3+t-8-3,l=(r>>h&1)===1,e.set(i,o,l,!0),e.set(o,i,l,!0)}function uC(e,n,t){let r=e.size,i=O9.getEncodedBits(n,t),o,l;for(o=0;o<15;o++)l=(i>>o&1)===1,o<6?e.set(o,8,l,!0):o<8?e.set(o+1,8,l,!0):e.set(r-15+o,8,l,!0),o<8?e.set(8,r-o-1,l,!0):o<9?e.set(8,15-o-1+1,l,!0):e.set(8,15-o-1,l,!0);e.set(r-8,8,1,!0)}function L9(e,n){let t=e.size,r=-1,i=t-1,o=7,l=0;for(let h=t-1;h>0;h-=2)for(h===6&&h--;;){for(let g=0;g<2;g++)if(!e.isReserved(i,h-g)){let m=!1;l<n.length&&(m=(n[l]>>>o&1)===1),e.set(i,h-g,m),o--,o===-1&&(l++,o=7)}if(i+=r,i<0||t<=i){i-=r,r=-r;break}}}function B9(e,n,t){let r=new S9;t.forEach(function(g){r.put(g.mode.bit,4),r.put(g.getLength(),N9.getCharCountIndicator(g.mode,e)),g.write(r)});let i=yp.getSymbolTotalCodewords(e),o=fC.getTotalCodewordsCount(e,n),l=(i-o)*8;for(r.getLengthInBits()+4<=l&&r.put(0,4);r.getLengthInBits()%8!==0;)r.putBit(0);let h=(l-r.getLengthInBits())/8;for(let g=0;g<h;g++)r.put(g%2?17:236,8);return U9(r,e,n)}function U9(e,n,t){let r=yp.getSymbolTotalCodewords(n),i=fC.getTotalCodewordsCount(n,t),o=r-i,l=fC.getBlocksCount(n,t),h=r%l,g=l-h,m=Math.floor(r/l),v=Math.floor(o/l),b=v+1,I=m-v,T=new A9(I),P=0,z=new Array(l),Z=new Array(l),q=0,ce=new Uint8Array(e.buffer);for(let Y=0;Y<l;Y++){let or=Y<g?v:b;z[Y]=ce.slice(P,P+or),Z[Y]=T.encode(z[Y]),P+=or,q=Math.max(q,or)}let Ke=new Uint8Array(r),ye=0,G,ge;for(G=0;G<q;G++)for(ge=0;ge<l;ge++)G<z[ge].length&&(Ke[ye++]=z[ge][G]);for(G=0;G<I;G++)for(ge=0;ge<l;ge++)Ke[ye++]=Z[ge][G];return Ke}function V9(e,n,t,r){let i;if(Array.isArray(e))i=cC.fromArray(e);else if(typeof e=="string"){let m=n;if(!m){let v=cC.rawSplit(e);m=mp.getBestVersionForData(v,t)}i=cC.fromString(e,m||40)}else throw new Error("Invalid data");let o=mp.getBestVersionForData(i,t);if(!o)throw new Error("The amount of data is too big to be stored in a QR Code");if(!n)n=o;else if(n<o)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+o+`.
`);let l=B9(n,t,i),h=yp.getSymbolSize(n),g=new D9(h);return R9(g,n),P9(g),k9(g,n),uC(g,t,0),n>=7&&F9(g,n),L9(g,l),isNaN(r)&&(r=dC.getBestMask(g,uC.bind(null,g,t))),dC.applyMask(r,g),uC(g,t,r),{modules:g,version:n,errorCorrectionLevel:t,maskPattern:r,segments:i}}$M.create=function(n,t){if(typeof n>"u"||n==="")throw new Error("No input text");let r=lC.M,i,o;return typeof t<"u"&&(r=lC.from(t.errorCorrectionLevel,lC.M),i=mp.from(t.version),o=dC.from(t.maskPattern),t.toSJISFunc&&yp.setToSJISFunction(t.toSJISFunc)),V9(n,i,r,o)}});var hC=gt(Bs=>{"use strict";function YM(e){if(typeof e=="number"&&(e=e.toString()),typeof e!="string")throw new Error("Color should be defined as hex string");let n=e.slice().replace("#","").split("");if(n.length<3||n.length===5||n.length>8)throw new Error("Invalid hex color: "+e);(n.length===3||n.length===4)&&(n=Array.prototype.concat.apply([],n.map(function(r){return[r,r]}))),n.length===6&&n.push("F","F");let t=parseInt(n.join(""),16);return{r:t>>24&255,g:t>>16&255,b:t>>8&255,a:t&255,hex:"#"+n.slice(0,6).join("")}}Bs.getOptions=function(n){n||(n={}),n.color||(n.color={});let t=typeof n.margin>"u"||n.margin===null||n.margin<0?4:n.margin,r=n.width&&n.width>=21?n.width:void 0,i=n.scale||4;return{width:r,scale:r?4:i,margin:t,color:{dark:YM(n.color.dark||"#000000ff"),light:YM(n.color.light||"#ffffffff")},type:n.type,rendererOpts:n.rendererOpts||{}}};Bs.getScale=function(n,t){return t.width&&t.width>=n+t.margin*2?t.width/(n+t.margin*2):t.scale};Bs.getImageWidth=function(n,t){let r=Bs.getScale(n,t);return Math.floor((n+t.margin*2)*r)};Bs.qrToImageData=function(n,t,r){let i=t.modules.size,o=t.modules.data,l=Bs.getScale(i,r),h=Math.floor((i+r.margin*2)*l),g=r.margin*l,m=[r.color.light,r.color.dark];for(let v=0;v<h;v++)for(let b=0;b<h;b++){let I=(v*h+b)*4,T=r.color.light;if(v>=g&&b>=g&&v<h-g&&b<h-g){let P=Math.floor((v-g)/l),z=Math.floor((b-g)/l);T=m[o[P*i+z]?1:0]}n[I++]=T.r,n[I++]=T.g,n[I++]=T.b,n[I]=T.a}}});var ZM=gt(_p=>{"use strict";var pC=hC();function j9(e,n,t){e.clearRect(0,0,n.width,n.height),n.style||(n.style={}),n.height=t,n.width=t,n.style.height=t+"px",n.style.width=t+"px"}function H9(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}_p.render=function(n,t,r){let i=r,o=t;typeof i>"u"&&(!t||!t.getContext)&&(i=t,t=void 0),t||(o=H9()),i=pC.getOptions(i);let l=pC.getImageWidth(n.modules.size,i),h=o.getContext("2d"),g=h.createImageData(l,l);return pC.qrToImageData(g.data,n,i),j9(h,o,l),h.putImageData(g,0,0),o};_p.renderToDataURL=function(n,t,r){let i=r;typeof i>"u"&&(!t||!t.getContext)&&(i=t,t=void 0),i||(i={});let o=_p.render(n,t,i),l=i.type||"image/png",h=i.rendererOpts||{};return o.toDataURL(l,h.quality)}});var KM=gt(QM=>{"use strict";var z9=hC();function XM(e,n){let t=e.a/255,r=n+'="'+e.hex+'"';return t<1?r+" "+n+'-opacity="'+t.toFixed(2).slice(1)+'"':r}function gC(e,n,t){let r=e+n;return typeof t<"u"&&(r+=" "+t),r}function W9(e,n,t){let r="",i=0,o=!1,l=0;for(let h=0;h<e.length;h++){let g=Math.floor(h%n),m=Math.floor(h/n);!g&&!o&&(o=!0),e[h]?(l++,h>0&&g>0&&e[h-1]||(r+=o?gC("M",g+t,.5+m+t):gC("m",i,0),i=0,o=!1),g+1<n&&e[h+1]||(r+=gC("h",l),l=0)):i++}return r}QM.render=function(n,t,r){let i=z9.getOptions(t),o=n.modules.size,l=n.modules.data,h=o+i.margin*2,g=i.color.light.a?"<path "+XM(i.color.light,"fill")+' d="M0 0h'+h+"v"+h+'H0z"/>':"",m="<path "+XM(i.color.dark,"stroke")+' d="'+W9(l,o,i.margin)+'"/>',v='viewBox="0 0 '+h+" "+h+'"',I='<svg xmlns="http://www.w3.org/2000/svg" '+(i.width?'width="'+i.width+'" height="'+i.width+'" ':"")+v+' shape-rendering="crispEdges">'+g+m+`</svg>
`;return typeof r=="function"&&r(null,I),I}});var eT=gt(bu=>{"use strict";var G9=eM(),mC=qM(),JM=ZM(),$9=KM();function yC(e,n,t,r,i){let o=[].slice.call(arguments,1),l=o.length,h=typeof o[l-1]=="function";if(!h&&!G9())throw new Error("Callback required as last argument");if(h){if(l<2)throw new Error("Too few arguments provided");l===2?(i=t,t=n,n=r=void 0):l===3&&(n.getContext&&typeof i>"u"?(i=r,r=void 0):(i=r,r=t,t=n,n=void 0))}else{if(l<1)throw new Error("Too few arguments provided");return l===1?(t=n,n=r=void 0):l===2&&!n.getContext&&(r=t,t=n,n=void 0),new Promise(function(g,m){try{let v=mC.create(t,r);g(e(v,n,r))}catch(v){m(v)}})}try{let g=mC.create(t,r);i(null,e(g,n,r))}catch(g){i(g)}}bu.create=mC.create;bu.toCanvas=yC.bind(null,JM.render);bu.toDataURL=yC.bind(null,JM.renderToDataURL);bu.toString=yC.bind(null,function(e,n,t){return $9.render(e,t)})});var fT=gt((xp,dT)=>{"use strict";(function(e,n){typeof xp=="object"&&typeof dT<"u"?n(xp):typeof define=="function"&&define.amd?define(["exports"],n):(e=typeof globalThis<"u"?globalThis:e||self,n(e.ZXing={}))})(xp,function(e){"use strict";function n(C){return C==null}var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,s){C.__proto__=s}||function(C,s){for(var a in s)s.hasOwnProperty(a)&&(C[a]=s[a])};function r(C,s){t(C,s);function a(){this.constructor=C}C.prototype=s===null?Object.create(s):(a.prototype=s.prototype,new a)}function i(C,s){var a=Object.setPrototypeOf;a?a(C,s):C.__proto__=s}function o(C,s){s===void 0&&(s=C.constructor);var a=Error.captureStackTrace;a&&a(C,s)}var l=function(C){r(s,C);function s(a){var c=this.constructor,u=C.call(this,a)||this;return Object.defineProperty(u,"name",{value:c.name,enumerable:!1}),i(u,c.prototype),o(u),u}return s}(Error);let h=(()=>{class C extends l{constructor(a=void 0){super(a),this.message=a}getKind(){return this.constructor.kind}}return C.kind="Exception",C})(),g=(()=>{class C extends h{}return C.kind="ArgumentException",C})(),m=(()=>{class C extends h{}return C.kind="IllegalArgumentException",C})();class v{constructor(s){if(this.binarizer=s,s===null)throw new m("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(s,a){return this.binarizer.getBlackRow(s,a)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(s,a,c,u){let d=this.binarizer.getLuminanceSource().crop(s,a,c,u);return new v(this.binarizer.createBinarizer(d))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){let s=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new v(this.binarizer.createBinarizer(s))}rotateCounterClockwise45(){let s=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new v(this.binarizer.createBinarizer(s))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}let b=(()=>{class C extends h{static getChecksumInstance(){return new C}}return C.kind="ChecksumException",C})();class I{constructor(s){this.source=s}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class T{static arraycopy(s,a,c,u,d){for(;d--;)c[u++]=s[a++]}static currentTimeMillis(){return Date.now()}}let P=(()=>{class C extends h{}return C.kind="IndexOutOfBoundsException",C})(),z=(()=>{class C extends P{constructor(a=void 0,c=void 0){super(c),this.index=a,this.message=c}}return C.kind="ArrayIndexOutOfBoundsException",C})();class Z{static fill(s,a){for(let c=0,u=s.length;c<u;c++)s[c]=a}static fillWithin(s,a,c,u){Z.rangeCheck(s.length,a,c);for(let d=a;d<c;d++)s[d]=u}static rangeCheck(s,a,c){if(a>c)throw new m("fromIndex("+a+") > toIndex("+c+")");if(a<0)throw new z(a);if(c>s)throw new z(c)}static asList(...s){return s}static create(s,a,c){return Array.from({length:s}).map(d=>Array.from({length:a}).fill(c))}static createInt32Array(s,a,c){return Array.from({length:s}).map(d=>Int32Array.from({length:a}).fill(c))}static equals(s,a){if(!s||!a||!s.length||!a.length||s.length!==a.length)return!1;for(let c=0,u=s.length;c<u;c++)if(s[c]!==a[c])return!1;return!0}static hashCode(s){if(s===null)return 0;let a=1;for(let c of s)a=31*a+c;return a}static fillUint8Array(s,a){for(let c=0;c!==s.length;c++)s[c]=a}static copyOf(s,a){return s.slice(0,a)}static copyOfUint8Array(s,a){if(s.length<=a){let c=new Uint8Array(a);return c.set(s),c}return s.slice(0,a)}static copyOfRange(s,a,c){let u=c-a,d=new Int32Array(u);return T.arraycopy(s,a,d,0,u),d}static binarySearch(s,a,c){c===void 0&&(c=Z.numberComparator);let u=0,d=s.length-1;for(;u<=d;){let f=d+u>>1,p=c(a,s[f]);if(p>0)u=f+1;else if(p<0)d=f-1;else return f}return-u-1}static numberComparator(s,a){return s-a}}class q{static numberOfTrailingZeros(s){let a;if(s===0)return 32;let c=31;return a=s<<16,a!==0&&(c-=16,s=a),a=s<<8,a!==0&&(c-=8,s=a),a=s<<4,a!==0&&(c-=4,s=a),a=s<<2,a!==0&&(c-=2,s=a),c-(s<<1>>>31)}static numberOfLeadingZeros(s){if(s===0)return 32;let a=1;return s>>>16||(a+=16,s<<=16),s>>>24||(a+=8,s<<=8),s>>>28||(a+=4,s<<=4),s>>>30||(a+=2,s<<=2),a-=s>>>31,a}static toHexString(s){return s.toString(16)}static toBinaryString(s){return String(parseInt(String(s),2))}static bitCount(s){return s=s-(s>>>1&1431655765),s=(s&858993459)+(s>>>2&858993459),s=s+(s>>>4)&252645135,s=s+(s>>>8),s=s+(s>>>16),s&63}static truncDivision(s,a){return Math.trunc(s/a)}static parseInt(s,a=void 0){return parseInt(s,a)}}q.MIN_VALUE_32_BITS=-2147483648,q.MAX_VALUE=Number.MAX_SAFE_INTEGER;class ce{constructor(s,a){s===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=s,a==null?this.bits=ce.makeArray(s):this.bits=a)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(s){if(s>this.bits.length*32){let a=ce.makeArray(s);T.arraycopy(this.bits,0,a,0,this.bits.length),this.bits=a}}get(s){return(this.bits[Math.floor(s/32)]&1<<(s&31))!==0}set(s){this.bits[Math.floor(s/32)]|=1<<(s&31)}flip(s){this.bits[Math.floor(s/32)]^=1<<(s&31)}getNextSet(s){let a=this.size;if(s>=a)return a;let c=this.bits,u=Math.floor(s/32),d=c[u];d&=~((1<<(s&31))-1);let f=c.length;for(;d===0;){if(++u===f)return a;d=c[u]}let p=u*32+q.numberOfTrailingZeros(d);return p>a?a:p}getNextUnset(s){let a=this.size;if(s>=a)return a;let c=this.bits,u=Math.floor(s/32),d=~c[u];d&=~((1<<(s&31))-1);let f=c.length;for(;d===0;){if(++u===f)return a;d=~c[u]}let p=u*32+q.numberOfTrailingZeros(d);return p>a?a:p}setBulk(s,a){this.bits[Math.floor(s/32)]=a}setRange(s,a){if(a<s||s<0||a>this.size)throw new m;if(a===s)return;a--;let c=Math.floor(s/32),u=Math.floor(a/32),d=this.bits;for(let f=c;f<=u;f++){let p=f>c?0:s&31,_=(2<<(f<u?31:a&31))-(1<<p);d[f]|=_}}clear(){let s=this.bits.length,a=this.bits;for(let c=0;c<s;c++)a[c]=0}isRange(s,a,c){if(a<s||s<0||a>this.size)throw new m;if(a===s)return!0;a--;let u=Math.floor(s/32),d=Math.floor(a/32),f=this.bits;for(let p=u;p<=d;p++){let y=p>u?0:s&31,w=(2<<(p<d?31:a&31))-(1<<y)&4294967295;if((f[p]&w)!==(c?w:0))return!1}return!0}appendBit(s){this.ensureCapacity(this.size+1),s&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(s,a){if(a<0||a>32)throw new m("Num bits must be between 0 and 32");this.ensureCapacity(this.size+a);for(let c=a;c>0;c--)this.appendBit((s>>c-1&1)===1)}appendBitArray(s){let a=s.size;this.ensureCapacity(this.size+a);for(let c=0;c<a;c++)this.appendBit(s.get(c))}xor(s){if(this.size!==s.size)throw new m("Sizes don't match");let a=this.bits;for(let c=0,u=a.length;c<u;c++)a[c]^=s.bits[c]}toBytes(s,a,c,u){for(let d=0;d<u;d++){let f=0;for(let p=0;p<8;p++)this.get(s)&&(f|=1<<7-p),s++;a[c+d]=f}}getBitArray(){return this.bits}reverse(){let s=new Int32Array(this.bits.length),a=Math.floor((this.size-1)/32),c=a+1,u=this.bits;for(let d=0;d<c;d++){let f=u[d];f=f>>1&1431655765|(f&1431655765)<<1,f=f>>2&858993459|(f&858993459)<<2,f=f>>4&252645135|(f&252645135)<<4,f=f>>8&16711935|(f&16711935)<<8,f=f>>16&65535|(f&65535)<<16,s[a-d]=f}if(this.size!==c*32){let d=c*32-this.size,f=s[0]>>>d;for(let p=1;p<c;p++){let y=s[p];f|=y<<32-d,s[p-1]=f,f=y>>>d}s[c-1]=f}this.bits=s}static makeArray(s){return new Int32Array(Math.floor((s+31)/32))}equals(s){if(!(s instanceof ce))return!1;let a=s;return this.size===a.size&&Z.equals(this.bits,a.bits)}hashCode(){return 31*this.size+Z.hashCode(this.bits)}toString(){let s="";for(let a=0,c=this.size;a<c;a++)a&7||(s+=" "),s+=this.get(a)?"X":".";return s}clone(){return new ce(this.size,this.bits.slice())}}var Ke=function(C){return C[C.OTHER=0]="OTHER",C[C.PURE_BARCODE=1]="PURE_BARCODE",C[C.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",C[C.TRY_HARDER=3]="TRY_HARDER",C[C.CHARACTER_SET=4]="CHARACTER_SET",C[C.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",C[C.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",C[C.ASSUME_GS1=7]="ASSUME_GS1",C[C.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",C[C.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",C[C.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS",C}(Ke||{}),ye=Ke;let G=(()=>{class C extends h{static getFormatInstance(){return new C}}return C.kind="FormatException",C})();var ge=function(C){return C[C.Cp437=0]="Cp437",C[C.ISO8859_1=1]="ISO8859_1",C[C.ISO8859_2=2]="ISO8859_2",C[C.ISO8859_3=3]="ISO8859_3",C[C.ISO8859_4=4]="ISO8859_4",C[C.ISO8859_5=5]="ISO8859_5",C[C.ISO8859_6=6]="ISO8859_6",C[C.ISO8859_7=7]="ISO8859_7",C[C.ISO8859_8=8]="ISO8859_8",C[C.ISO8859_9=9]="ISO8859_9",C[C.ISO8859_10=10]="ISO8859_10",C[C.ISO8859_11=11]="ISO8859_11",C[C.ISO8859_13=12]="ISO8859_13",C[C.ISO8859_14=13]="ISO8859_14",C[C.ISO8859_15=14]="ISO8859_15",C[C.ISO8859_16=15]="ISO8859_16",C[C.SJIS=16]="SJIS",C[C.Cp1250=17]="Cp1250",C[C.Cp1251=18]="Cp1251",C[C.Cp1252=19]="Cp1252",C[C.Cp1256=20]="Cp1256",C[C.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",C[C.UTF8=22]="UTF8",C[C.ASCII=23]="ASCII",C[C.Big5=24]="Big5",C[C.GB18030=25]="GB18030",C[C.EUC_KR=26]="EUC_KR",C}(ge||{});class Y{constructor(s,a,c,...u){this.valueIdentifier=s,this.name=c,typeof a=="number"?this.values=Int32Array.from([a]):this.values=a,this.otherEncodingNames=u,Y.VALUE_IDENTIFIER_TO_ECI.set(s,this),Y.NAME_TO_ECI.set(c,this);let d=this.values;for(let f=0,p=d.length;f!==p;f++){let y=d[f];Y.VALUES_TO_ECI.set(y,this)}for(let f of u)Y.NAME_TO_ECI.set(f,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(s){if(s<0||s>=900)throw new G("incorect value");let a=Y.VALUES_TO_ECI.get(s);if(a===void 0)throw new G("incorect value");return a}static getCharacterSetECIByName(s){let a=Y.NAME_TO_ECI.get(s);if(a===void 0)throw new G("incorect value");return a}equals(s){if(!(s instanceof Y))return!1;let a=s;return this.getName()===a.getName()}}Y.VALUE_IDENTIFIER_TO_ECI=new Map,Y.VALUES_TO_ECI=new Map,Y.NAME_TO_ECI=new Map,Y.Cp437=new Y(ge.Cp437,Int32Array.from([0,2]),"Cp437"),Y.ISO8859_1=new Y(ge.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),Y.ISO8859_2=new Y(ge.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),Y.ISO8859_3=new Y(ge.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),Y.ISO8859_4=new Y(ge.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),Y.ISO8859_5=new Y(ge.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),Y.ISO8859_6=new Y(ge.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),Y.ISO8859_7=new Y(ge.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),Y.ISO8859_8=new Y(ge.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),Y.ISO8859_9=new Y(ge.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),Y.ISO8859_10=new Y(ge.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),Y.ISO8859_11=new Y(ge.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),Y.ISO8859_13=new Y(ge.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),Y.ISO8859_14=new Y(ge.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),Y.ISO8859_15=new Y(ge.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),Y.ISO8859_16=new Y(ge.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),Y.SJIS=new Y(ge.SJIS,20,"SJIS","Shift_JIS"),Y.Cp1250=new Y(ge.Cp1250,21,"Cp1250","windows-1250"),Y.Cp1251=new Y(ge.Cp1251,22,"Cp1251","windows-1251"),Y.Cp1252=new Y(ge.Cp1252,23,"Cp1252","windows-1252"),Y.Cp1256=new Y(ge.Cp1256,24,"Cp1256","windows-1256"),Y.UnicodeBigUnmarked=new Y(ge.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),Y.UTF8=new Y(ge.UTF8,26,"UTF8","UTF-8"),Y.ASCII=new Y(ge.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),Y.Big5=new Y(ge.Big5,28,"Big5"),Y.GB18030=new Y(ge.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),Y.EUC_KR=new Y(ge.EUC_KR,30,"EUC_KR","EUC-KR");let or=(()=>{class C extends h{}return C.kind="UnsupportedOperationException",C})();class Tn{static decode(s,a){let c=this.encodingName(a);return this.customDecoder?this.customDecoder(s,c):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(c)?this.decodeFallback(s,c):new TextDecoder(c).decode(s)}static shouldDecodeOnFallback(s){return!Tn.isBrowser()&&s==="ISO-8859-1"}static encode(s,a){let c=this.encodingName(a);return this.customEncoder?this.customEncoder(s,c):typeof TextEncoder>"u"?this.encodeFallback(s):new TextEncoder().encode(s)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(s){return typeof s=="string"?s:s.getName()}static encodingCharacterSet(s){return s instanceof Y?s:Y.getCharacterSetECIByName(s)}static decodeFallback(s,a){let c=this.encodingCharacterSet(a);if(Tn.isDecodeFallbackSupported(c)){let u="";for(let d=0,f=s.length;d<f;d++){let p=s[d].toString(16);p.length<2&&(p="0"+p),u+="%"+p}return decodeURIComponent(u)}if(c.equals(Y.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(s.buffer));throw new or(`Encoding ${this.encodingName(a)} not supported by fallback.`)}static isDecodeFallbackSupported(s){return s.equals(Y.UTF8)||s.equals(Y.ISO8859_1)||s.equals(Y.ASCII)}static encodeFallback(s){let c=btoa(unescape(encodeURIComponent(s))).split(""),u=[];for(let d=0;d<c.length;d++)u.push(c[d].charCodeAt(0));return new Uint8Array(u)}}class Me{static castAsNonUtf8Char(s,a=null){let c=a?a.getName():this.ISO88591;return Tn.decode(new Uint8Array([s]),c)}static guessEncoding(s,a){if(a!=null&&a.get(ye.CHARACTER_SET)!==void 0)return a.get(ye.CHARACTER_SET).toString();let c=s.length,u=!0,d=!0,f=!0,p=0,y=0,_=0,w=0,x=0,E=0,D=0,O=0,N=0,k=0,L=0,X=s.length>3&&s[0]===239&&s[1]===187&&s[2]===191;for(let ie=0;ie<c&&(u||d||f);ie++){let U=s[ie]&255;f&&(p>0?U&128?p--:f=!1:U&128&&(U&64?(p++,U&32?(p++,U&16?(p++,U&8?f=!1:w++):_++):y++):f=!1)),u&&(U>127&&U<160?u=!1:U>159&&(U<192||U===215||U===247)&&L++),d&&(x>0?U<64||U===127||U>252?d=!1:x--:U===128||U===160||U>239?d=!1:U>160&&U<224?(E++,O=0,D++,D>N&&(N=D)):U>127?(x++,D=0,O++,O>k&&(k=O)):(D=0,O=0))}return f&&p>0&&(f=!1),d&&x>0&&(d=!1),f&&(X||y+_+w>0)?Me.UTF8:d&&(Me.ASSUME_SHIFT_JIS||N>=3||k>=3)?Me.SHIFT_JIS:u&&d?N===2&&E===2||L*10>=c?Me.SHIFT_JIS:Me.ISO88591:u?Me.ISO88591:d?Me.SHIFT_JIS:f?Me.UTF8:Me.PLATFORM_DEFAULT_ENCODING}static format(s,...a){let c=-1;function u(f,p,y,_,w,x){if(f==="%%")return"%";if(a[++c]===void 0)return;f=_?parseInt(_.substr(1)):void 0;let E=w?parseInt(w.substr(1)):void 0,D;switch(x){case"s":D=a[c];break;case"c":D=a[c][0];break;case"f":D=parseFloat(a[c]).toFixed(f);break;case"p":D=parseFloat(a[c]).toPrecision(f);break;case"e":D=parseFloat(a[c]).toExponential(f);break;case"x":D=parseInt(a[c]).toString(E||16);break;case"d":D=parseFloat(parseInt(a[c],E||10).toPrecision(f)).toFixed(0);break}D=typeof D=="object"?JSON.stringify(D):(+D).toString(E);let O=parseInt(y),N=y&&y[0]+""=="0"?"0":" ";for(;D.length<O;)D=p!==void 0?D+N:N+D;return D}let d=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return s.replace(d,u)}static getBytes(s,a){return Tn.encode(s,a)}static getCharCode(s,a=0){return s.charCodeAt(a)}static getCharAt(s){return String.fromCharCode(s)}}Me.SHIFT_JIS=Y.SJIS.getName(),Me.GB2312="GB2312",Me.ISO88591=Y.ISO8859_1.getName(),Me.EUC_JP="EUC_JP",Me.UTF8=Y.UTF8.getName(),Me.PLATFORM_DEFAULT_ENCODING=Me.UTF8,Me.ASSUME_SHIFT_JIS=!1;class vt{constructor(s=""){this.value=s}enableDecoding(s){return this.encoding=s,this}append(s){return typeof s=="string"?this.value+=s.toString():this.encoding?this.value+=Me.castAsNonUtf8Char(s,this.encoding):this.value+=String.fromCharCode(s),this}appendChars(s,a,c){for(let u=a;a<a+c;u++)this.append(s[u]);return this}length(){return this.value.length}charAt(s){return this.value.charAt(s)}deleteCharAt(s){this.value=this.value.substr(0,s)+this.value.substring(s+1)}setCharAt(s,a){this.value=this.value.substr(0,s)+a+this.value.substr(s+1)}substring(s,a){return this.value.substring(s,a)}setLengthToZero(){this.value=""}toString(){return this.value}insert(s,a){this.value=this.value.substr(0,s)+a+this.value.substr(s+a.length)}}class dn{constructor(s,a,c,u){if(this.width=s,this.height=a,this.rowSize=c,this.bits=u,a==null&&(a=s),this.height=a,s<1||a<1)throw new m("Both dimensions must be greater than 0");c==null&&(c=Math.floor((s+31)/32)),this.rowSize=c,u==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(s){let a=s.length,c=s[0].length,u=new dn(c,a);for(let d=0;d<a;d++){let f=s[d];for(let p=0;p<c;p++)f[p]&&u.set(p,d)}return u}static parseFromString(s,a,c){if(s===null)throw new m("stringRepresentation cannot be null");let u=new Array(s.length),d=0,f=0,p=-1,y=0,_=0;for(;_<s.length;)if(s.charAt(_)===`
`||s.charAt(_)==="\r"){if(d>f){if(p===-1)p=d-f;else if(d-f!==p)throw new m("row lengths do not match");f=d,y++}_++}else if(s.substring(_,_+a.length)===a)_+=a.length,u[d]=!0,d++;else if(s.substring(_,_+c.length)===c)_+=c.length,u[d]=!1,d++;else throw new m("illegal character encountered: "+s.substring(_));if(d>f){if(p===-1)p=d-f;else if(d-f!==p)throw new m("row lengths do not match");y++}let w=new dn(p,y);for(let x=0;x<d;x++)u[x]&&w.set(Math.floor(x%p),Math.floor(x/p));return w}get(s,a){let c=a*this.rowSize+Math.floor(s/32);return(this.bits[c]>>>(s&31)&1)!==0}set(s,a){let c=a*this.rowSize+Math.floor(s/32);this.bits[c]|=1<<(s&31)&4294967295}unset(s,a){let c=a*this.rowSize+Math.floor(s/32);this.bits[c]&=~(1<<(s&31)&4294967295)}flip(s,a){let c=a*this.rowSize+Math.floor(s/32);this.bits[c]^=1<<(s&31)&4294967295}xor(s){if(this.width!==s.getWidth()||this.height!==s.getHeight()||this.rowSize!==s.getRowSize())throw new m("input matrix dimensions do not match");let a=new ce(Math.floor(this.width/32)+1),c=this.rowSize,u=this.bits;for(let d=0,f=this.height;d<f;d++){let p=d*c,y=s.getRow(d,a).getBitArray();for(let _=0;_<c;_++)u[p+_]^=y[_]}}clear(){let s=this.bits,a=s.length;for(let c=0;c<a;c++)s[c]=0}setRegion(s,a,c,u){if(a<0||s<0)throw new m("Left and top must be nonnegative");if(u<1||c<1)throw new m("Height and width must be at least 1");let d=s+c,f=a+u;if(f>this.height||d>this.width)throw new m("The region must fit inside the matrix");let p=this.rowSize,y=this.bits;for(let _=a;_<f;_++){let w=_*p;for(let x=s;x<d;x++)y[w+Math.floor(x/32)]|=1<<(x&31)&4294967295}}getRow(s,a){a==null||a.getSize()<this.width?a=new ce(this.width):a.clear();let c=this.rowSize,u=this.bits,d=s*c;for(let f=0;f<c;f++)a.setBulk(f*32,u[d+f]);return a}setRow(s,a){T.arraycopy(a.getBitArray(),0,this.bits,s*this.rowSize,this.rowSize)}rotate180(){let s=this.getWidth(),a=this.getHeight(),c=new ce(s),u=new ce(s);for(let d=0,f=Math.floor((a+1)/2);d<f;d++)c=this.getRow(d,c),u=this.getRow(a-1-d,u),c.reverse(),u.reverse(),this.setRow(d,u),this.setRow(a-1-d,c)}getEnclosingRectangle(){let s=this.width,a=this.height,c=this.rowSize,u=this.bits,d=s,f=a,p=-1,y=-1;for(let _=0;_<a;_++)for(let w=0;w<c;w++){let x=u[_*c+w];if(x!==0){if(_<f&&(f=_),_>y&&(y=_),w*32<d){let E=0;for(;!(x<<31-E&4294967295);)E++;w*32+E<d&&(d=w*32+E)}if(w*32+31>p){let E=31;for(;!(x>>>E);)E--;w*32+E>p&&(p=w*32+E)}}}return p<d||y<f?null:Int32Array.from([d,f,p-d+1,y-f+1])}getTopLeftOnBit(){let s=this.rowSize,a=this.bits,c=0;for(;c<a.length&&a[c]===0;)c++;if(c===a.length)return null;let u=c/s,d=c%s*32,f=a[c],p=0;for(;!(f<<31-p&4294967295);)p++;return d+=p,Int32Array.from([d,u])}getBottomRightOnBit(){let s=this.rowSize,a=this.bits,c=a.length-1;for(;c>=0&&a[c]===0;)c--;if(c<0)return null;let u=Math.floor(c/s),d=Math.floor(c%s)*32,f=a[c],p=31;for(;!(f>>>p);)p--;return d+=p,Int32Array.from([d,u])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(s){if(!(s instanceof dn))return!1;let a=s;return this.width===a.width&&this.height===a.height&&this.rowSize===a.rowSize&&Z.equals(this.bits,a.bits)}hashCode(){let s=this.width;return s=31*s+this.width,s=31*s+this.height,s=31*s+this.rowSize,s=31*s+Z.hashCode(this.bits),s}toString(s="X ",a="  ",c=`
`){return this.buildToString(s,a,c)}buildToString(s,a,c){let u=new vt;for(let d=0,f=this.height;d<f;d++){for(let p=0,y=this.width;p<y;p++)u.append(this.get(p,d)?s:a);u.append(c)}return u.toString()}clone(){return new dn(this.width,this.height,this.rowSize,this.bits.slice())}}let H=(()=>{class C extends h{static getNotFoundInstance(){return new C}}return C.kind="NotFoundException",C})();class fn extends I{constructor(s){super(s),this.luminances=fn.EMPTY,this.buckets=new Int32Array(fn.LUMINANCE_BUCKETS)}getBlackRow(s,a){let c=this.getLuminanceSource(),u=c.getWidth();a==null||a.getSize()<u?a=new ce(u):a.clear(),this.initArrays(u);let d=c.getRow(s,this.luminances),f=this.buckets;for(let y=0;y<u;y++)f[(d[y]&255)>>fn.LUMINANCE_SHIFT]++;let p=fn.estimateBlackPoint(f);if(u<3)for(let y=0;y<u;y++)(d[y]&255)<p&&a.set(y);else{let y=d[0]&255,_=d[1]&255;for(let w=1;w<u-1;w++){let x=d[w+1]&255;(_*4-y-x)/2<p&&a.set(w),y=_,_=x}}return a}getBlackMatrix(){let s=this.getLuminanceSource(),a=s.getWidth(),c=s.getHeight(),u=new dn(a,c);this.initArrays(a);let d=this.buckets;for(let y=1;y<5;y++){let _=Math.floor(c*y/5),w=s.getRow(_,this.luminances),x=Math.floor(a*4/5);for(let E=Math.floor(a/5);E<x;E++){let D=w[E]&255;d[D>>fn.LUMINANCE_SHIFT]++}}let f=fn.estimateBlackPoint(d),p=s.getMatrix();for(let y=0;y<c;y++){let _=y*a;for(let w=0;w<a;w++)(p[_+w]&255)<f&&u.set(w,y)}return u}createBinarizer(s){return new fn(s)}initArrays(s){this.luminances.length<s&&(this.luminances=new Uint8ClampedArray(s));let a=this.buckets;for(let c=0;c<fn.LUMINANCE_BUCKETS;c++)a[c]=0}static estimateBlackPoint(s){let a=s.length,c=0,u=0,d=0;for(let w=0;w<a;w++)s[w]>d&&(u=w,d=s[w]),s[w]>c&&(c=s[w]);let f=0,p=0;for(let w=0;w<a;w++){let x=w-u,E=s[w]*x*x;E>p&&(f=w,p=E)}if(u>f){let w=u;u=f,f=w}if(f-u<=a/16)throw new H;let y=f-1,_=-1;for(let w=f-1;w>u;w--){let x=w-u,E=x*x*(f-w)*(c-s[w]);E>_&&(y=w,_=E)}return y<<fn.LUMINANCE_SHIFT}}fn.LUMINANCE_BITS=5,fn.LUMINANCE_SHIFT=8-fn.LUMINANCE_BITS,fn.LUMINANCE_BUCKETS=1<<fn.LUMINANCE_BITS,fn.EMPTY=Uint8ClampedArray.from([0]);class Le extends fn{constructor(s){super(s),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;let s=this.getLuminanceSource(),a=s.getWidth(),c=s.getHeight();if(a>=Le.MINIMUM_DIMENSION&&c>=Le.MINIMUM_DIMENSION){let u=s.getMatrix(),d=a>>Le.BLOCK_SIZE_POWER;a&Le.BLOCK_SIZE_MASK&&d++;let f=c>>Le.BLOCK_SIZE_POWER;c&Le.BLOCK_SIZE_MASK&&f++;let p=Le.calculateBlackPoints(u,d,f,a,c),y=new dn(a,c);Le.calculateThresholdForBlock(u,d,f,a,c,p,y),this.matrix=y}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(s){return new Le(s)}static calculateThresholdForBlock(s,a,c,u,d,f,p){let y=d-Le.BLOCK_SIZE,_=u-Le.BLOCK_SIZE;for(let w=0;w<c;w++){let x=w<<Le.BLOCK_SIZE_POWER;x>y&&(x=y);let E=Le.cap(w,2,c-3);for(let D=0;D<a;D++){let O=D<<Le.BLOCK_SIZE_POWER;O>_&&(O=_);let N=Le.cap(D,2,a-3),k=0;for(let X=-2;X<=2;X++){let ie=f[E+X];k+=ie[N-2]+ie[N-1]+ie[N]+ie[N+1]+ie[N+2]}let L=k/25;Le.thresholdBlock(s,O,x,L,u,p)}}}static cap(s,a,c){return s<a?a:s>c?c:s}static thresholdBlock(s,a,c,u,d,f){for(let p=0,y=c*d+a;p<Le.BLOCK_SIZE;p++,y+=d)for(let _=0;_<Le.BLOCK_SIZE;_++)(s[y+_]&255)<=u&&f.set(a+_,c+p)}static calculateBlackPoints(s,a,c,u,d){let f=d-Le.BLOCK_SIZE,p=u-Le.BLOCK_SIZE,y=new Array(c);for(let _=0;_<c;_++){y[_]=new Int32Array(a);let w=_<<Le.BLOCK_SIZE_POWER;w>f&&(w=f);for(let x=0;x<a;x++){let E=x<<Le.BLOCK_SIZE_POWER;E>p&&(E=p);let D=0,O=255,N=0;for(let L=0,X=w*u+E;L<Le.BLOCK_SIZE;L++,X+=u){for(let ie=0;ie<Le.BLOCK_SIZE;ie++){let U=s[X+ie]&255;D+=U,U<O&&(O=U),U>N&&(N=U)}if(N-O>Le.MIN_DYNAMIC_RANGE)for(L++,X+=u;L<Le.BLOCK_SIZE;L++,X+=u)for(let ie=0;ie<Le.BLOCK_SIZE;ie++)D+=s[X+ie]&255}let k=D>>Le.BLOCK_SIZE_POWER*2;if(N-O<=Le.MIN_DYNAMIC_RANGE&&(k=O/2,_>0&&x>0)){let L=(y[_-1][x]+2*y[_][x-1]+y[_-1][x-1])/4;O<L&&(k=L)}y[_][x]=k}}return y}}Le.BLOCK_SIZE_POWER=3,Le.BLOCK_SIZE=1<<Le.BLOCK_SIZE_POWER,Le.BLOCK_SIZE_MASK=Le.BLOCK_SIZE-1,Le.MINIMUM_DIMENSION=Le.BLOCK_SIZE*5,Le.MIN_DYNAMIC_RANGE=24;class fl{constructor(s,a){this.width=s,this.height=a}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(s,a,c,u){throw new or("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new or("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new or("This luminance source does not support rotation by 45 degrees.")}toString(){let s=new Uint8ClampedArray(this.width),a=new vt;for(let c=0;c<this.height;c++){let u=this.getRow(c,s);for(let d=0;d<this.width;d++){let f=u[d]&255,p;f<64?p="#":f<128?p="+":f<192?p=".":p=" ",a.append(p)}a.append(`
`)}return a.toString()}}class Ji extends fl{constructor(s){super(s.getWidth(),s.getHeight()),this.delegate=s}getRow(s,a){let c=this.delegate.getRow(s,a),u=this.getWidth();for(let d=0;d<u;d++)c[d]=255-(c[d]&255);return c}getMatrix(){let s=this.delegate.getMatrix(),a=this.getWidth()*this.getHeight(),c=new Uint8ClampedArray(a);for(let u=0;u<a;u++)c[u]=255-(s[u]&255);return c}isCropSupported(){return this.delegate.isCropSupported()}crop(s,a,c,u){return new Ji(this.delegate.crop(s,a,c,u))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new Ji(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new Ji(this.delegate.rotateCounterClockwise45())}}class eo extends fl{constructor(s){super(s.width,s.height),this.canvas=s,this.tempCanvasElement=null,this.buffer=eo.makeBufferFromCanvasImageData(s)}static makeBufferFromCanvasImageData(s){let a=s.getContext("2d").getImageData(0,0,s.width,s.height);return eo.toGrayscaleBuffer(a.data,s.width,s.height)}static toGrayscaleBuffer(s,a,c){let u=new Uint8ClampedArray(a*c);for(let d=0,f=0,p=s.length;d<p;d+=4,f++){let y;if(s[d+3]===0)y=255;else{let w=s[d],x=s[d+1],E=s[d+2];y=306*w+601*x+117*E+512>>10}u[f]=y}return u}getRow(s,a){if(s<0||s>=this.getHeight())throw new m("Requested row is outside the image: "+s);let c=this.getWidth(),u=s*c;return a===null?a=this.buffer.slice(u,u+c):(a.length<c&&(a=new Uint8ClampedArray(c)),a.set(this.buffer.slice(u,u+c))),a}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(s,a,c,u){return super.crop(s,a,c,u),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){let s=this.canvas.ownerDocument.createElement("canvas");s.width=this.canvas.width,s.height=this.canvas.height,this.tempCanvasElement=s}return this.tempCanvasElement}rotate(s){let a=this.getTempCanvasElement(),c=a.getContext("2d"),u=s*eo.DEGREE_TO_RADIANS,d=this.canvas.width,f=this.canvas.height,p=Math.ceil(Math.abs(Math.cos(u))*d+Math.abs(Math.sin(u))*f),y=Math.ceil(Math.abs(Math.sin(u))*d+Math.abs(Math.cos(u))*f);return a.width=p,a.height=y,c.translate(p/2,y/2),c.rotate(u),c.drawImage(this.canvas,d/-2,f/-2),this.buffer=eo.makeBufferFromCanvasImageData(a),this}invert(){return new Ji(this)}}eo.DEGREE_TO_RADIANS=Math.PI/180;class DC{constructor(s,a,c){this.deviceId=s,this.label=a,this.kind="videoinput",this.groupId=c||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var Fn=(globalThis||global||self||window||void 0)&&(globalThis||global||self||window||void 0).__awaiter||function(C,s,a,c){function u(d){return d instanceof a?d:new a(function(f){f(d)})}return new(a||(a=Promise))(function(d,f){function p(w){try{_(c.next(w))}catch(x){f(x)}}function y(w){try{_(c.throw(w))}catch(x){f(x)}}function _(w){w.done?d(w.value):u(w.value).then(p,y)}_((c=c.apply(C,s||[])).next())})};class Wo{constructor(s,a=500,c){this.reader=s,this.timeBetweenScansMillis=a,this._hints=c,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(s){this._timeBetweenDecodingAttempts=s<0?0:s}set hints(s){this._hints=s||null}get hints(){return this._hints}listVideoInputDevices(){return Fn(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");let s=yield navigator.mediaDevices.enumerateDevices(),a=[];for(let c of s){let u=c.kind==="video"?"videoinput":c.kind;if(u!=="videoinput")continue;let d=c.deviceId||c.id,f=c.label||`Video device ${a.length+1}`,p=c.groupId,y={deviceId:d,label:f,kind:u,groupId:p};a.push(y)}return a})}getVideoInputDevices(){return Fn(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(a=>new DC(a.deviceId,a.label))})}findDeviceById(s){return Fn(this,void 0,void 0,function*(){let a=yield this.listVideoInputDevices();return a?a.find(c=>c.deviceId===s):null})}decodeFromInputVideoDevice(s,a){return Fn(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(s,a)})}decodeOnceFromVideoDevice(s,a){return Fn(this,void 0,void 0,function*(){this.reset();let c;s?c={deviceId:{exact:s}}:c={facingMode:"environment"};let u={video:c};return yield this.decodeOnceFromConstraints(u,a)})}decodeOnceFromConstraints(s,a){return Fn(this,void 0,void 0,function*(){let c=yield navigator.mediaDevices.getUserMedia(s);return yield this.decodeOnceFromStream(c,a)})}decodeOnceFromStream(s,a){return Fn(this,void 0,void 0,function*(){this.reset();let c=yield this.attachStreamToVideo(s,a);return yield this.decodeOnce(c)})}decodeFromInputVideoDeviceContinuously(s,a,c){return Fn(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(s,a,c)})}decodeFromVideoDevice(s,a,c){return Fn(this,void 0,void 0,function*(){let u;s?u={deviceId:{exact:s}}:u={facingMode:"environment"};let d={video:u};return yield this.decodeFromConstraints(d,a,c)})}decodeFromConstraints(s,a,c){return Fn(this,void 0,void 0,function*(){let u=yield navigator.mediaDevices.getUserMedia(s);return yield this.decodeFromStream(u,a,c)})}decodeFromStream(s,a,c){return Fn(this,void 0,void 0,function*(){this.reset();let u=yield this.attachStreamToVideo(s,a);return yield this.decodeContinuously(u,c)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(s,a){return Fn(this,void 0,void 0,function*(){let c=this.prepareVideoElement(a);return this.addVideoSource(c,s),this.videoElement=c,this.stream=s,yield this.playVideoOnLoadAsync(c),c})}playVideoOnLoadAsync(s){return new Promise((a,c)=>this.playVideoOnLoad(s,()=>a()))}playVideoOnLoad(s,a){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(s),s.addEventListener("ended",this.videoEndedListener),s.addEventListener("canplay",this.videoCanPlayListener),s.addEventListener("playing",a),this.tryPlayVideo(s)}isVideoPlaying(s){return s.currentTime>0&&!s.paused&&!s.ended&&s.readyState>2}tryPlayVideo(s){return Fn(this,void 0,void 0,function*(){if(this.isVideoPlaying(s)){console.warn("Trying to play video that is already playing.");return}try{yield s.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(s,a){let c=document.getElementById(s);if(!c)throw new g(`element with id '${s}' not found`);if(c.nodeName.toLowerCase()!==a.toLowerCase())throw new g(`element with id '${s}' must be an ${a} element`);return c}decodeFromImage(s,a){if(!s&&!a)throw new g("either imageElement with a src set or an url must be provided");return a&&!s?this.decodeFromImageUrl(a):this.decodeFromImageElement(s)}decodeFromVideo(s,a){if(!s&&!a)throw new g("Either an element with a src set or an URL must be provided");return a&&!s?this.decodeFromVideoUrl(a):this.decodeFromVideoElement(s)}decodeFromVideoContinuously(s,a,c){if(s===void 0&&a===void 0)throw new g("Either an element with a src set or an URL must be provided");return a&&!s?this.decodeFromVideoUrlContinuously(a,c):this.decodeFromVideoElementContinuously(s,c)}decodeFromImageElement(s){if(!s)throw new g("An image element must be provided.");this.reset();let a=this.prepareImageElement(s);this.imageElement=a;let c;return this.isImageLoaded(a)?c=this.decodeOnce(a,!1,!0):c=this._decodeOnLoadImage(a),c}decodeFromVideoElement(s){let a=this._decodeFromVideoElementSetup(s);return this._decodeOnLoadVideo(a)}decodeFromVideoElementContinuously(s,a){let c=this._decodeFromVideoElementSetup(s);return this._decodeOnLoadVideoContinuously(c,a)}_decodeFromVideoElementSetup(s){if(!s)throw new g("A video element must be provided.");this.reset();let a=this.prepareVideoElement(s);return this.videoElement=a,a}decodeFromImageUrl(s){if(!s)throw new g("An URL must be provided.");this.reset();let a=this.prepareImageElement();this.imageElement=a;let c=this._decodeOnLoadImage(a);return a.src=s,c}decodeFromVideoUrl(s){if(!s)throw new g("An URL must be provided.");this.reset();let a=this.prepareVideoElement(),c=this.decodeFromVideoElement(a);return a.src=s,c}decodeFromVideoUrlContinuously(s,a){if(!s)throw new g("An URL must be provided.");this.reset();let c=this.prepareVideoElement(),u=this.decodeFromVideoElementContinuously(c,a);return c.src=s,u}_decodeOnLoadImage(s){return new Promise((a,c)=>{this.imageLoadedListener=()=>this.decodeOnce(s,!1,!0).then(a,c),s.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(s){return Fn(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(s),yield this.decodeOnce(s)})}_decodeOnLoadVideoContinuously(s,a){return Fn(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(s),this.decodeContinuously(s,a)})}isImageLoaded(s){return!(!s.complete||s.naturalWidth===0)}prepareImageElement(s){let a;return typeof s>"u"&&(a=document.createElement("img"),a.width=200,a.height=200),typeof s=="string"&&(a=this.getMediaElement(s,"img")),s instanceof HTMLImageElement&&(a=s),a}prepareVideoElement(s){let a;return!s&&typeof document<"u"&&(a=document.createElement("video"),a.width=200,a.height=200),typeof s=="string"&&(a=this.getMediaElement(s,"video")),s instanceof HTMLVideoElement&&(a=s),a.setAttribute("autoplay","true"),a.setAttribute("muted","true"),a.setAttribute("playsinline","true"),a}decodeOnce(s,a=!0,c=!0){this._stopAsyncDecode=!1;let u=(d,f)=>{if(this._stopAsyncDecode){f(new H("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{let p=this.decode(s);d(p)}catch(p){let y=a&&p instanceof H,w=(p instanceof b||p instanceof G)&&c;if(y||w)return setTimeout(u,this._timeBetweenDecodingAttempts,d,f);f(p)}};return new Promise((d,f)=>u(d,f))}decodeContinuously(s,a){this._stopContinuousDecode=!1;let c=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{let u=this.decode(s);a(u,null),setTimeout(c,this.timeBetweenScansMillis)}catch(u){a(null,u);let d=u instanceof b||u instanceof G,f=u instanceof H;(d||f)&&setTimeout(c,this._timeBetweenDecodingAttempts)}};c()}decode(s){let a=this.createBinaryBitmap(s);return this.decodeBitmap(a)}_isHTMLVideoElement(s){return s.videoWidth!==0}drawFrameOnCanvas(s,a,c){a||(a={sx:0,sy:0,sWidth:s.videoWidth,sHeight:s.videoHeight,dx:0,dy:0,dWidth:s.videoWidth,dHeight:s.videoHeight}),c||(c=this.captureCanvasContext),c.drawImage(s,a.sx,a.sy,a.sWidth,a.sHeight,a.dx,a.dy,a.dWidth,a.dHeight)}drawImageOnCanvas(s,a,c=this.captureCanvasContext){a||(a={sx:0,sy:0,sWidth:s.naturalWidth,sHeight:s.naturalHeight,dx:0,dy:0,dWidth:s.naturalWidth,dHeight:s.naturalHeight}),c||(c=this.captureCanvasContext),c.drawImage(s,a.sx,a.sy,a.sWidth,a.sHeight,a.dx,a.dy,a.dWidth,a.dHeight)}createBinaryBitmap(s){let a=this.getCaptureCanvasContext(s);this._isHTMLVideoElement(s)?this.drawFrameOnCanvas(s):this.drawImageOnCanvas(s);let c=this.getCaptureCanvas(s),u=new eo(c),d=new Le(u);return new v(d)}getCaptureCanvasContext(s){if(!this.captureCanvasContext){let c=this.getCaptureCanvas(s).getContext("2d");this.captureCanvasContext=c}return this.captureCanvasContext}getCaptureCanvas(s){if(!this.captureCanvas){let a=this.createCaptureCanvas(s);this.captureCanvas=a}return this.captureCanvas}decodeBitmap(s){return this.reader.decode(s,this._hints)}createCaptureCanvas(s){if(typeof document>"u")return this._destroyCaptureCanvas(),null;let a=document.createElement("canvas"),c,u;return typeof s<"u"&&(s instanceof HTMLVideoElement?(c=s.videoWidth,u=s.videoHeight):s instanceof HTMLImageElement&&(c=s.naturalWidth||s.width,u=s.naturalHeight||s.height)),a.style.width=c+"px",a.style.height=u+"px",a.width=c,a.height=u,a}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(s=>s.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(s,a){try{s.srcObject=a}catch{s.src=URL.createObjectURL(a)}}cleanVideoSource(s){try{s.srcObject=null}catch{s.src=""}this.videoElement.removeAttribute("src")}}class Ln{constructor(s,a,c=a==null?0:8*a.length,u,d,f=T.currentTimeMillis()){this.text=s,this.rawBytes=a,this.numBits=c,this.resultPoints=u,this.format=d,this.timestamp=f,this.text=s,this.rawBytes=a,c==null?this.numBits=a==null?0:8*a.length:this.numBits=c,this.resultPoints=u,this.format=d,this.resultMetadata=null,f==null?this.timestamp=T.currentTimeMillis():this.timestamp=f}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(s,a){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(s,a)}putAllMetadata(s){s!==null&&(this.resultMetadata===null?this.resultMetadata=s:this.resultMetadata=new Map(s))}addResultPoints(s){let a=this.resultPoints;if(a===null)this.resultPoints=s;else if(s!==null&&s.length>0){let c=new Array(a.length+s.length);T.arraycopy(a,0,c,0,a.length),T.arraycopy(s,0,c,a.length,s.length),this.resultPoints=c}}getTimestamp(){return this.timestamp}toString(){return this.text}}var MC=function(C){return C[C.AZTEC=0]="AZTEC",C[C.CODABAR=1]="CODABAR",C[C.CODE_39=2]="CODE_39",C[C.CODE_93=3]="CODE_93",C[C.CODE_128=4]="CODE_128",C[C.DATA_MATRIX=5]="DATA_MATRIX",C[C.EAN_8=6]="EAN_8",C[C.EAN_13=7]="EAN_13",C[C.ITF=8]="ITF",C[C.MAXICODE=9]="MAXICODE",C[C.PDF_417=10]="PDF_417",C[C.QR_CODE=11]="QR_CODE",C[C.RSS_14=12]="RSS_14",C[C.RSS_EXPANDED=13]="RSS_EXPANDED",C[C.UPC_A=14]="UPC_A",C[C.UPC_E=15]="UPC_E",C[C.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION",C}(MC||{}),we=MC,TC=function(C){return C[C.OTHER=0]="OTHER",C[C.ORIENTATION=1]="ORIENTATION",C[C.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",C[C.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",C[C.ISSUE_NUMBER=4]="ISSUE_NUMBER",C[C.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",C[C.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",C[C.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",C[C.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",C[C.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",C[C.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY",C}(TC||{}),hn=TC;class hl{constructor(s,a,c,u,d=-1,f=-1){this.rawBytes=s,this.text=a,this.byteSegments=c,this.ecLevel=u,this.structuredAppendSequenceNumber=d,this.structuredAppendParity=f,this.numBits=s==null?0:8*s.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(s){this.numBits=s}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(s){this.errorsCorrected=s}getErasures(){return this.erasures}setErasures(s){this.erasures=s}getOther(){return this.other}setOther(s){this.other=s}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class pl{exp(s){return this.expTable[s]}log(s){if(s===0)throw new m;return this.logTable[s]}static addOrSubtract(s,a){return s^a}}class Yn{constructor(s,a){if(a.length===0)throw new m;this.field=s;let c=a.length;if(c>1&&a[0]===0){let u=1;for(;u<c&&a[u]===0;)u++;u===c?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(c-u),T.arraycopy(a,u,this.coefficients,0,this.coefficients.length))}else this.coefficients=a}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(s){return this.coefficients[this.coefficients.length-1-s]}evaluateAt(s){if(s===0)return this.getCoefficient(0);let a=this.coefficients,c;if(s===1){c=0;for(let f=0,p=a.length;f!==p;f++){let y=a[f];c=pl.addOrSubtract(c,y)}return c}c=a[0];let u=a.length,d=this.field;for(let f=1;f<u;f++)c=pl.addOrSubtract(d.multiply(s,c),a[f]);return c}addOrSubtract(s){if(!this.field.equals(s.field))throw new m("GenericGFPolys do not have same GenericGF field");if(this.isZero())return s;if(s.isZero())return this;let a=this.coefficients,c=s.coefficients;if(a.length>c.length){let f=a;a=c,c=f}let u=new Int32Array(c.length),d=c.length-a.length;T.arraycopy(c,0,u,0,d);for(let f=d;f<c.length;f++)u[f]=pl.addOrSubtract(a[f-d],c[f]);return new Yn(this.field,u)}multiply(s){if(!this.field.equals(s.field))throw new m("GenericGFPolys do not have same GenericGF field");if(this.isZero()||s.isZero())return this.field.getZero();let a=this.coefficients,c=a.length,u=s.coefficients,d=u.length,f=new Int32Array(c+d-1),p=this.field;for(let y=0;y<c;y++){let _=a[y];for(let w=0;w<d;w++)f[y+w]=pl.addOrSubtract(f[y+w],p.multiply(_,u[w]))}return new Yn(p,f)}multiplyScalar(s){if(s===0)return this.field.getZero();if(s===1)return this;let a=this.coefficients.length,c=this.field,u=new Int32Array(a),d=this.coefficients;for(let f=0;f<a;f++)u[f]=c.multiply(d[f],s);return new Yn(c,u)}multiplyByMonomial(s,a){if(s<0)throw new m;if(a===0)return this.field.getZero();let c=this.coefficients,u=c.length,d=new Int32Array(u+s),f=this.field;for(let p=0;p<u;p++)d[p]=f.multiply(c[p],a);return new Yn(f,d)}divide(s){if(!this.field.equals(s.field))throw new m("GenericGFPolys do not have same GenericGF field");if(s.isZero())throw new m("Divide by 0");let a=this.field,c=a.getZero(),u=this,d=s.getCoefficient(s.getDegree()),f=a.inverse(d);for(;u.getDegree()>=s.getDegree()&&!u.isZero();){let p=u.getDegree()-s.getDegree(),y=a.multiply(u.getCoefficient(u.getDegree()),f),_=s.multiplyByMonomial(p,y),w=a.buildMonomial(p,y);c=c.addOrSubtract(w),u=u.addOrSubtract(_)}return[c,u]}toString(){let s="";for(let a=this.getDegree();a>=0;a--){let c=this.getCoefficient(a);if(c!==0){if(c<0?(s+=" - ",c=-c):s.length>0&&(s+=" + "),a===0||c!==1){let u=this.field.log(c);u===0?s+="1":u===1?s+="a":(s+="a^",s+=u)}a!==0&&(a===1?s+="x":(s+="x^",s+=a))}}return s}}let Dp=(()=>{class C extends h{}return C.kind="ArithmeticException",C})();class dt extends pl{constructor(s,a,c){super(),this.primitive=s,this.size=a,this.generatorBase=c;let u=new Int32Array(a),d=1;for(let p=0;p<a;p++)u[p]=d,d*=2,d>=a&&(d^=s,d&=a-1);this.expTable=u;let f=new Int32Array(a);for(let p=0;p<a-1;p++)f[u[p]]=p;this.logTable=f,this.zero=new Yn(this,Int32Array.from([0])),this.one=new Yn(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(s,a){if(s<0)throw new m;if(a===0)return this.zero;let c=new Int32Array(s+1);return c[0]=a,new Yn(this,c)}inverse(s){if(s===0)throw new Dp;return this.expTable[this.size-this.logTable[s]-1]}multiply(s,a){return s===0||a===0?0:this.expTable[(this.logTable[s]+this.logTable[a])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+q.toHexString(this.primitive)+","+this.size+")"}equals(s){return s===this}}dt.AZTEC_DATA_12=new dt(4201,4096,1),dt.AZTEC_DATA_10=new dt(1033,1024,1),dt.AZTEC_DATA_6=new dt(67,64,1),dt.AZTEC_PARAM=new dt(19,16,1),dt.QR_CODE_FIELD_256=new dt(285,256,0),dt.DATA_MATRIX_FIELD_256=new dt(301,256,1),dt.AZTEC_DATA_8=dt.DATA_MATRIX_FIELD_256,dt.MAXICODE_FIELD_64=dt.AZTEC_DATA_6;let gl=(()=>{class C extends h{}return C.kind="ReedSolomonException",C})(),Ei=(()=>{class C extends h{}return C.kind="IllegalStateException",C})();class ml{constructor(s){this.field=s}decode(s,a){let c=this.field,u=new Yn(c,s),d=new Int32Array(a),f=!0;for(let D=0;D<a;D++){let O=u.evaluateAt(c.exp(D+c.getGeneratorBase()));d[d.length-1-D]=O,O!==0&&(f=!1)}if(f)return;let p=new Yn(c,d),y=this.runEuclideanAlgorithm(c.buildMonomial(a,1),p,a),_=y[0],w=y[1],x=this.findErrorLocations(_),E=this.findErrorMagnitudes(w,x);for(let D=0;D<x.length;D++){let O=s.length-1-c.log(x[D]);if(O<0)throw new gl("Bad error location");s[O]=dt.addOrSubtract(s[O],E[D])}}runEuclideanAlgorithm(s,a,c){if(s.getDegree()<a.getDegree()){let D=s;s=a,a=D}let u=this.field,d=s,f=a,p=u.getZero(),y=u.getOne();for(;f.getDegree()>=(c/2|0);){let D=d,O=p;if(d=f,p=y,d.isZero())throw new gl("r_{i-1} was zero");f=D;let N=u.getZero(),k=d.getCoefficient(d.getDegree()),L=u.inverse(k);for(;f.getDegree()>=d.getDegree()&&!f.isZero();){let X=f.getDegree()-d.getDegree(),ie=u.multiply(f.getCoefficient(f.getDegree()),L);N=N.addOrSubtract(u.buildMonomial(X,ie)),f=f.addOrSubtract(d.multiplyByMonomial(X,ie))}if(y=N.multiply(p).addOrSubtract(O),f.getDegree()>=d.getDegree())throw new Ei("Division algorithm failed to reduce polynomial?")}let _=y.getCoefficient(0);if(_===0)throw new gl("sigmaTilde(0) was zero");let w=u.inverse(_),x=y.multiplyScalar(w),E=f.multiplyScalar(w);return[x,E]}findErrorLocations(s){let a=s.getDegree();if(a===1)return Int32Array.from([s.getCoefficient(1)]);let c=new Int32Array(a),u=0,d=this.field;for(let f=1;f<d.getSize()&&u<a;f++)s.evaluateAt(f)===0&&(c[u]=d.inverse(f),u++);if(u!==a)throw new gl("Error locator degree does not match number of roots");return c}findErrorMagnitudes(s,a){let c=a.length,u=new Int32Array(c),d=this.field;for(let f=0;f<c;f++){let p=d.inverse(a[f]),y=1;for(let _=0;_<c;_++)if(f!==_){let w=d.multiply(a[_],p),x=w&1?w&-2:w|1;y=d.multiply(y,x)}u[f]=d.multiply(s.evaluateAt(p),d.inverse(y)),d.getGeneratorBase()!==0&&(u[f]=d.multiply(u[f],p))}return u}}var An=function(C){return C[C.UPPER=0]="UPPER",C[C.LOWER=1]="LOWER",C[C.MIXED=2]="MIXED",C[C.DIGIT=3]="DIGIT",C[C.PUNCT=4]="PUNCT",C[C.BINARY=5]="BINARY",C}(An||{});let Mp=(()=>{class C{decode(a){this.ddata=a;let c=a.getBits(),u=this.extractBits(c),d=this.correctBits(u),f=C.convertBoolArrayToByteArray(d),p=C.getEncodedData(d),y=new hl(f,p,null,null);return y.setNumBits(d.length),y}static highLevelDecode(a){return this.getEncodedData(a)}static getEncodedData(a){let c=a.length,u=An.UPPER,d=An.UPPER,f="",p=0;for(;p<c;)if(d===An.BINARY){if(c-p<5)break;let y=C.readCode(a,p,5);if(p+=5,y===0){if(c-p<11)break;y=C.readCode(a,p,11)+31,p+=11}for(let _=0;_<y;_++){if(c-p<8){p=c;break}let w=C.readCode(a,p,8);f+=Me.castAsNonUtf8Char(w),p+=8}d=u}else{let y=d===An.DIGIT?4:5;if(c-p<y)break;let _=C.readCode(a,p,y);p+=y;let w=C.getCharacter(d,_);w.startsWith("CTRL_")?(u=d,d=C.getTable(w.charAt(5)),w.charAt(6)==="L"&&(u=d)):(f+=w,d=u)}return f}static getTable(a){switch(a){case"L":return An.LOWER;case"P":return An.PUNCT;case"M":return An.MIXED;case"D":return An.DIGIT;case"B":return An.BINARY;case"U":default:return An.UPPER}}static getCharacter(a,c){switch(a){case An.UPPER:return C.UPPER_TABLE[c];case An.LOWER:return C.LOWER_TABLE[c];case An.MIXED:return C.MIXED_TABLE[c];case An.PUNCT:return C.PUNCT_TABLE[c];case An.DIGIT:return C.DIGIT_TABLE[c];default:throw new Ei("Bad table")}}correctBits(a){let c,u;this.ddata.getNbLayers()<=2?(u=6,c=dt.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(u=8,c=dt.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(u=10,c=dt.AZTEC_DATA_10):(u=12,c=dt.AZTEC_DATA_12);let d=this.ddata.getNbDatablocks(),f=a.length/u;if(f<d)throw new G;let p=a.length%u,y=new Int32Array(f);for(let D=0;D<f;D++,p+=u)y[D]=C.readCode(a,p,u);try{new ml(c).decode(y,f-d)}catch(D){throw new G(D)}let _=(1<<u)-1,w=0;for(let D=0;D<d;D++){let O=y[D];if(O===0||O===_)throw new G;(O===1||O===_-1)&&w++}let x=new Array(d*u-w),E=0;for(let D=0;D<d;D++){let O=y[D];if(O===1||O===_-1)x.fill(O>1,E,E+u-1),E+=u-1;else for(let N=u-1;N>=0;--N)x[E++]=(O&1<<N)!==0}return x}extractBits(a){let c=this.ddata.isCompact(),u=this.ddata.getNbLayers(),d=(c?11:14)+u*4,f=new Int32Array(d),p=new Array(this.totalBitsInLayer(u,c));if(c)for(let y=0;y<f.length;y++)f[y]=y;else{let y=d+1+2*q.truncDivision(q.truncDivision(d,2)-1,15),_=d/2,w=q.truncDivision(y,2);for(let x=0;x<_;x++){let E=x+q.truncDivision(x,15);f[_-x-1]=w-E-1,f[_+x]=w+E+1}}for(let y=0,_=0;y<u;y++){let w=(u-y)*4+(c?9:12),x=y*2,E=d-1-x;for(let D=0;D<w;D++){let O=D*2;for(let N=0;N<2;N++)p[_+O+N]=a.get(f[x+N],f[x+D]),p[_+2*w+O+N]=a.get(f[x+D],f[E-N]),p[_+4*w+O+N]=a.get(f[E-N],f[E-D]),p[_+6*w+O+N]=a.get(f[E-D],f[x+N])}_+=w*8}return p}static readCode(a,c,u){let d=0;for(let f=c;f<c+u;f++)d<<=1,a[f]&&(d|=1);return d}static readByte(a,c){let u=a.length-c;return u>=8?C.readCode(a,c,8):C.readCode(a,c,u)<<8-u}static convertBoolArrayToByteArray(a){let c=new Uint8Array((a.length+7)/8);for(let u=0;u<c.length;u++)c[u]=C.readByte(a,8*u);return c}totalBitsInLayer(a,c){return((c?88:112)+16*a)*a}}return C.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],C.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],C.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],C.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],C.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],C})();class nt{constructor(){}static round(s){return s===NaN?0:s<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:s>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:s+(s<0?-.5:.5)|0}static distance(s,a,c,u){let d=s-c,f=a-u;return Math.sqrt(d*d+f*f)}static sum(s){let a=0;for(let c=0,u=s.length;c!==u;c++){let d=s[c];a+=d}return a}}class Eu{static floatToIntBits(s){return s}}Eu.MAX_VALUE=Number.MAX_SAFE_INTEGER;class de{constructor(s,a){this.x=s,this.y=a}getX(){return this.x}getY(){return this.y}equals(s){if(s instanceof de){let a=s;return this.x===a.x&&this.y===a.y}return!1}hashCode(){return 31*Eu.floatToIntBits(this.x)+Eu.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(s){let a=this.distance(s[0],s[1]),c=this.distance(s[1],s[2]),u=this.distance(s[0],s[2]),d,f,p;if(c>=a&&c>=u?(f=s[0],d=s[1],p=s[2]):u>=c&&u>=a?(f=s[1],d=s[0],p=s[2]):(f=s[2],d=s[0],p=s[1]),this.crossProductZ(d,f,p)<0){let y=d;d=p,p=y}s[0]=d,s[1]=f,s[2]=p}static distance(s,a){return nt.distance(s.x,s.y,a.x,a.y)}static crossProductZ(s,a,c){let u=a.x,d=a.y;return(c.x-u)*(s.y-d)-(c.y-d)*(s.x-u)}}class Iu{constructor(s,a){this.bits=s,this.points=a}getBits(){return this.bits}getPoints(){return this.points}}class AC extends Iu{constructor(s,a,c,u,d){super(s,a),this.compact=c,this.nbDatablocks=u,this.nbLayers=d}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}let Su=(()=>{class C{constructor(a,c,u,d){this.image=a,this.height=a.getHeight(),this.width=a.getWidth(),c==null&&(c=C.INIT_SIZE),u==null&&(u=a.getWidth()/2|0),d==null&&(d=a.getHeight()/2|0);let f=c/2|0;if(this.leftInit=u-f,this.rightInit=u+f,this.upInit=d-f,this.downInit=d+f,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new H}detect(){let a=this.leftInit,c=this.rightInit,u=this.upInit,d=this.downInit,f=!1,p=!0,y=!1,_=!1,w=!1,x=!1,E=!1,D=this.width,O=this.height;for(;p;){p=!1;let N=!0;for(;(N||!_)&&c<D;)N=this.containsBlackPoint(u,d,c,!1),N?(c++,p=!0,_=!0):_||c++;if(c>=D){f=!0;break}let k=!0;for(;(k||!w)&&d<O;)k=this.containsBlackPoint(a,c,d,!0),k?(d++,p=!0,w=!0):w||d++;if(d>=O){f=!0;break}let L=!0;for(;(L||!x)&&a>=0;)L=this.containsBlackPoint(u,d,a,!1),L?(a--,p=!0,x=!0):x||a--;if(a<0){f=!0;break}let X=!0;for(;(X||!E)&&u>=0;)X=this.containsBlackPoint(a,c,u,!0),X?(u--,p=!0,E=!0):E||u--;if(u<0){f=!0;break}p&&(y=!0)}if(!f&&y){let N=c-a,k=null;for(let U=1;k===null&&U<N;U++)k=this.getBlackPointOnSegment(a,d-U,a+U,d);if(k==null)throw new H;let L=null;for(let U=1;L===null&&U<N;U++)L=this.getBlackPointOnSegment(a,u+U,a+U,u);if(L==null)throw new H;let X=null;for(let U=1;X===null&&U<N;U++)X=this.getBlackPointOnSegment(c,u+U,c-U,u);if(X==null)throw new H;let ie=null;for(let U=1;ie===null&&U<N;U++)ie=this.getBlackPointOnSegment(c,d-U,c-U,d);if(ie==null)throw new H;return this.centerEdges(ie,k,X,L)}else throw new H}getBlackPointOnSegment(a,c,u,d){let f=nt.round(nt.distance(a,c,u,d)),p=(u-a)/f,y=(d-c)/f,_=this.image;for(let w=0;w<f;w++){let x=nt.round(a+w*p),E=nt.round(c+w*y);if(_.get(x,E))return new de(x,E)}return null}centerEdges(a,c,u,d){let f=a.getX(),p=a.getY(),y=c.getX(),_=c.getY(),w=u.getX(),x=u.getY(),E=d.getX(),D=d.getY(),O=C.CORR;return f<this.width/2?[new de(E-O,D+O),new de(y+O,_+O),new de(w-O,x-O),new de(f+O,p-O)]:[new de(E+O,D+O),new de(y+O,_-O),new de(w-O,x+O),new de(f-O,p-O)]}containsBlackPoint(a,c,u,d){let f=this.image;if(d){for(let p=a;p<=c;p++)if(f.get(p,u))return!0}else for(let p=a;p<=c;p++)if(f.get(u,p))return!0;return!1}}return C.INIT_SIZE=10,C.CORR=1,C})();class Tp{static checkAndNudgePoints(s,a){let c=s.getWidth(),u=s.getHeight(),d=!0;for(let f=0;f<a.length&&d;f+=2){let p=Math.floor(a[f]),y=Math.floor(a[f+1]);if(p<-1||p>c||y<-1||y>u)throw new H;d=!1,p===-1?(a[f]=0,d=!0):p===c&&(a[f]=c-1,d=!0),y===-1?(a[f+1]=0,d=!0):y===u&&(a[f+1]=u-1,d=!0)}d=!0;for(let f=a.length-2;f>=0&&d;f-=2){let p=Math.floor(a[f]),y=Math.floor(a[f+1]);if(p<-1||p>c||y<-1||y>u)throw new H;d=!1,p===-1?(a[f]=0,d=!0):p===c&&(a[f]=c-1,d=!0),y===-1?(a[f+1]=0,d=!0):y===u&&(a[f+1]=u-1,d=!0)}}}class Pr{constructor(s,a,c,u,d,f,p,y,_){this.a11=s,this.a21=a,this.a31=c,this.a12=u,this.a22=d,this.a32=f,this.a13=p,this.a23=y,this.a33=_}static quadrilateralToQuadrilateral(s,a,c,u,d,f,p,y,_,w,x,E,D,O,N,k){let L=Pr.quadrilateralToSquare(s,a,c,u,d,f,p,y);return Pr.squareToQuadrilateral(_,w,x,E,D,O,N,k).times(L)}transformPoints(s){let a=s.length,c=this.a11,u=this.a12,d=this.a13,f=this.a21,p=this.a22,y=this.a23,_=this.a31,w=this.a32,x=this.a33;for(let E=0;E<a;E+=2){let D=s[E],O=s[E+1],N=d*D+y*O+x;s[E]=(c*D+f*O+_)/N,s[E+1]=(u*D+p*O+w)/N}}transformPointsWithValues(s,a){let c=this.a11,u=this.a12,d=this.a13,f=this.a21,p=this.a22,y=this.a23,_=this.a31,w=this.a32,x=this.a33,E=s.length;for(let D=0;D<E;D++){let O=s[D],N=a[D],k=d*O+y*N+x;s[D]=(c*O+f*N+_)/k,a[D]=(u*O+p*N+w)/k}}static squareToQuadrilateral(s,a,c,u,d,f,p,y){let _=s-c+d-p,w=a-u+f-y;if(_===0&&w===0)return new Pr(c-s,d-c,s,u-a,f-u,a,0,0,1);{let x=c-d,E=p-d,D=u-f,O=y-f,N=x*O-E*D,k=(_*O-E*w)/N,L=(x*w-_*D)/N;return new Pr(c-s+k*c,p-s+L*p,s,u-a+k*u,y-a+L*y,a,k,L,1)}}static quadrilateralToSquare(s,a,c,u,d,f,p,y){return Pr.squareToQuadrilateral(s,a,c,u,d,f,p,y).buildAdjoint()}buildAdjoint(){return new Pr(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(s){return new Pr(this.a11*s.a11+this.a21*s.a12+this.a31*s.a13,this.a11*s.a21+this.a21*s.a22+this.a31*s.a23,this.a11*s.a31+this.a21*s.a32+this.a31*s.a33,this.a12*s.a11+this.a22*s.a12+this.a32*s.a13,this.a12*s.a21+this.a22*s.a22+this.a32*s.a23,this.a12*s.a31+this.a22*s.a32+this.a32*s.a33,this.a13*s.a11+this.a23*s.a12+this.a33*s.a13,this.a13*s.a21+this.a23*s.a22+this.a33*s.a23,this.a13*s.a31+this.a23*s.a32+this.a33*s.a33)}}class OC extends Tp{sampleGrid(s,a,c,u,d,f,p,y,_,w,x,E,D,O,N,k,L,X,ie){let U=Pr.quadrilateralToQuadrilateral(u,d,f,p,y,_,w,x,E,D,O,N,k,L,X,ie);return this.sampleGridWithTransform(s,a,c,U)}sampleGridWithTransform(s,a,c,u){if(a<=0||c<=0)throw new H;let d=new dn(a,c),f=new Float32Array(2*a);for(let p=0;p<c;p++){let y=f.length,_=p+.5;for(let w=0;w<y;w+=2)f[w]=w/2+.5,f[w+1]=_;u.transformPoints(f),Tp.checkAndNudgePoints(s,f);try{for(let w=0;w<y;w+=2)s.get(Math.floor(f[w]),Math.floor(f[w+1]))&&d.set(w/2,p)}catch{throw new H}}return d}}class to{static setGridSampler(s){to.gridSampler=s}static getInstance(){return to.gridSampler}}to.gridSampler=new OC;class Bn{constructor(s,a){this.x=s,this.y=a}toResultPoint(){return new de(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class NC{constructor(s){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=s}detect(){return this.detectMirror(!1)}detectMirror(s){let a=this.getMatrixCenter(),c=this.getBullsEyeCorners(a);if(s){let f=c[0];c[0]=c[2],c[2]=f}this.extractParameters(c);let u=this.sampleGrid(this.image,c[this.shift%4],c[(this.shift+1)%4],c[(this.shift+2)%4],c[(this.shift+3)%4]),d=this.getMatrixCornerPoints(c);return new AC(u,d,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(s){if(!this.isValidPoint(s[0])||!this.isValidPoint(s[1])||!this.isValidPoint(s[2])||!this.isValidPoint(s[3]))throw new H;let a=2*this.nbCenterLayers,c=new Int32Array([this.sampleLine(s[0],s[1],a),this.sampleLine(s[1],s[2],a),this.sampleLine(s[2],s[3],a),this.sampleLine(s[3],s[0],a)]);this.shift=this.getRotation(c,a);let u=0;for(let f=0;f<4;f++){let p=c[(this.shift+f)%4];this.compact?(u<<=7,u+=p>>1&127):(u<<=10,u+=(p>>2&992)+(p>>1&31))}let d=this.getCorrectedParameterData(u,this.compact);this.compact?(this.nbLayers=(d>>6)+1,this.nbDataBlocks=(d&63)+1):(this.nbLayers=(d>>11)+1,this.nbDataBlocks=(d&2047)+1)}getRotation(s,a){let c=0;s.forEach((u,d,f)=>{let p=(u>>a-2<<1)+(u&1);c=(c<<3)+p}),c=((c&1)<<11)+(c>>1);for(let u=0;u<4;u++)if(q.bitCount(c^this.EXPECTED_CORNER_BITS[u])<=2)return u;throw new H}getCorrectedParameterData(s,a){let c,u;a?(c=7,u=2):(c=10,u=4);let d=c-u,f=new Int32Array(c);for(let y=c-1;y>=0;--y)f[y]=s&15,s>>=4;try{new ml(dt.AZTEC_PARAM).decode(f,d)}catch{throw new H}let p=0;for(let y=0;y<u;y++)p=(p<<4)+f[y];return p}getBullsEyeCorners(s){let a=s,c=s,u=s,d=s,f=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let x=this.getFirstDifferent(a,f,1,-1),E=this.getFirstDifferent(c,f,1,1),D=this.getFirstDifferent(u,f,-1,1),O=this.getFirstDifferent(d,f,-1,-1);if(this.nbCenterLayers>2){let N=this.distancePoint(O,x)*this.nbCenterLayers/(this.distancePoint(d,a)*(this.nbCenterLayers+2));if(N<.75||N>1.25||!this.isWhiteOrBlackRectangle(x,E,D,O))break}a=x,c=E,u=D,d=O,f=!f}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new H;this.compact=this.nbCenterLayers===5;let p=new de(a.getX()+.5,a.getY()-.5),y=new de(c.getX()+.5,c.getY()+.5),_=new de(u.getX()-.5,u.getY()+.5),w=new de(d.getX()-.5,d.getY()-.5);return this.expandSquare([p,y,_,w],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let s,a,c,u;try{let p=new Su(this.image).detect();s=p[0],a=p[1],c=p[2],u=p[3]}catch{let y=this.image.getWidth()/2,_=this.image.getHeight()/2;s=this.getFirstDifferent(new Bn(y+7,_-7),!1,1,-1).toResultPoint(),a=this.getFirstDifferent(new Bn(y+7,_+7),!1,1,1).toResultPoint(),c=this.getFirstDifferent(new Bn(y-7,_+7),!1,-1,1).toResultPoint(),u=this.getFirstDifferent(new Bn(y-7,_-7),!1,-1,-1).toResultPoint()}let d=nt.round((s.getX()+u.getX()+a.getX()+c.getX())/4),f=nt.round((s.getY()+u.getY()+a.getY()+c.getY())/4);try{let p=new Su(this.image,15,d,f).detect();s=p[0],a=p[1],c=p[2],u=p[3]}catch{s=this.getFirstDifferent(new Bn(d+7,f-7),!1,1,-1).toResultPoint(),a=this.getFirstDifferent(new Bn(d+7,f+7),!1,1,1).toResultPoint(),c=this.getFirstDifferent(new Bn(d-7,f+7),!1,-1,1).toResultPoint(),u=this.getFirstDifferent(new Bn(d-7,f-7),!1,-1,-1).toResultPoint()}return d=nt.round((s.getX()+u.getX()+a.getX()+c.getX())/4),f=nt.round((s.getY()+u.getY()+a.getY()+c.getY())/4),new Bn(d,f)}getMatrixCornerPoints(s){return this.expandSquare(s,2*this.nbCenterLayers,this.getDimension())}sampleGrid(s,a,c,u,d){let f=to.getInstance(),p=this.getDimension(),y=p/2-this.nbCenterLayers,_=p/2+this.nbCenterLayers;return f.sampleGrid(s,p,p,y,y,_,y,_,_,y,_,a.getX(),a.getY(),c.getX(),c.getY(),u.getX(),u.getY(),d.getX(),d.getY())}sampleLine(s,a,c){let u=0,d=this.distanceResultPoint(s,a),f=d/c,p=s.getX(),y=s.getY(),_=f*(a.getX()-s.getX())/d,w=f*(a.getY()-s.getY())/d;for(let x=0;x<c;x++)this.image.get(nt.round(p+x*_),nt.round(y+x*w))&&(u|=1<<c-x-1);return u}isWhiteOrBlackRectangle(s,a,c,u){let d=3;s=new Bn(s.getX()-d,s.getY()+d),a=new Bn(a.getX()-d,a.getY()-d),c=new Bn(c.getX()+d,c.getY()-d),u=new Bn(u.getX()+d,u.getY()+d);let f=this.getColor(u,s);if(f===0)return!1;let p=this.getColor(s,a);return p!==f||(p=this.getColor(a,c),p!==f)?!1:(p=this.getColor(c,u),p===f)}getColor(s,a){let c=this.distancePoint(s,a),u=(a.getX()-s.getX())/c,d=(a.getY()-s.getY())/c,f=0,p=s.getX(),y=s.getY(),_=this.image.get(s.getX(),s.getY()),w=Math.ceil(c);for(let E=0;E<w;E++)p+=u,y+=d,this.image.get(nt.round(p),nt.round(y))!==_&&f++;let x=f/c;return x>.1&&x<.9?0:x<=.1===_?1:-1}getFirstDifferent(s,a,c,u){let d=s.getX()+c,f=s.getY()+u;for(;this.isValid(d,f)&&this.image.get(d,f)===a;)d+=c,f+=u;for(d-=c,f-=u;this.isValid(d,f)&&this.image.get(d,f)===a;)d+=c;for(d-=c;this.isValid(d,f)&&this.image.get(d,f)===a;)f+=u;return f-=u,new Bn(d,f)}expandSquare(s,a,c){let u=c/(2*a),d=s[0].getX()-s[2].getX(),f=s[0].getY()-s[2].getY(),p=(s[0].getX()+s[2].getX())/2,y=(s[0].getY()+s[2].getY())/2,_=new de(p+u*d,y+u*f),w=new de(p-u*d,y-u*f);d=s[1].getX()-s[3].getX(),f=s[1].getY()-s[3].getY(),p=(s[1].getX()+s[3].getX())/2,y=(s[1].getY()+s[3].getY())/2;let x=new de(p+u*d,y+u*f),E=new de(p-u*d,y-u*f);return[_,x,w,E]}isValid(s,a){return s>=0&&s<this.image.getWidth()&&a>0&&a<this.image.getHeight()}isValidPoint(s){let a=nt.round(s.getX()),c=nt.round(s.getY());return this.isValid(a,c)}distancePoint(s,a){return nt.distance(s.getX(),s.getY(),a.getX(),a.getY())}distanceResultPoint(s,a){return nt.distance(s.getX(),s.getY(),a.getX(),a.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(q.truncDivision(this.nbLayers-4,8)+1)+15}}class Du{decode(s,a=null){let c=null,u=new NC(s.getBlackMatrix()),d=null,f=null;try{let w=u.detectMirror(!1);d=w.getPoints(),this.reportFoundResultPoints(a,d),f=new Mp().decode(w)}catch(w){c=w}if(f==null)try{let w=u.detectMirror(!0);d=w.getPoints(),this.reportFoundResultPoints(a,d),f=new Mp().decode(w)}catch(w){throw c??w}let p=new Ln(f.getText(),f.getRawBytes(),f.getNumBits(),d,we.AZTEC,T.currentTimeMillis()),y=f.getByteSegments();y!=null&&p.putMetadata(hn.BYTE_SEGMENTS,y);let _=f.getECLevel();return _!=null&&p.putMetadata(hn.ERROR_CORRECTION_LEVEL,_),p}reportFoundResultPoints(s,a){if(s!=null){let c=s.get(ye.NEED_RESULT_POINT_CALLBACK);c!=null&&a.forEach((u,d,f)=>{c.foundPossibleResultPoint(u)})}}reset(){}}class ZT extends Wo{constructor(s=500){super(new Du,s)}}class Yt{decode(s,a){try{return this.doDecode(s,a)}catch{if(a&&a.get(ye.TRY_HARDER)===!0&&s.isRotateSupported()){let d=s.rotateCounterClockwise(),f=this.doDecode(d,a),p=f.getResultMetadata(),y=270;p!==null&&p.get(hn.ORIENTATION)===!0&&(y=y+p.get(hn.ORIENTATION)%360),f.putMetadata(hn.ORIENTATION,y);let _=f.getResultPoints();if(_!==null){let w=d.getHeight();for(let x=0;x<_.length;x++)_[x]=new de(w-_[x].getY()-1,_[x].getX())}return f}else throw new H}}reset(){}doDecode(s,a){let c=s.getWidth(),u=s.getHeight(),d=new ce(c),f=a&&a.get(ye.TRY_HARDER)===!0,p=Math.max(1,u>>(f?8:5)),y;f?y=u:y=15;let _=Math.trunc(u/2);for(let w=0;w<y;w++){let x=Math.trunc((w+1)/2),E=(w&1)===0,D=_+p*(E?x:-x);if(D<0||D>=u)break;try{d=s.getBlackRow(D,d)}catch{continue}for(let O=0;O<2;O++){if(O===1&&(d.reverse(),a&&a.get(ye.NEED_RESULT_POINT_CALLBACK)===!0)){let N=new Map;a.forEach((k,L)=>N.set(L,k)),N.delete(ye.NEED_RESULT_POINT_CALLBACK),a=N}try{let N=this.decodeRow(D,d,a);if(O===1){N.putMetadata(hn.ORIENTATION,180);let k=N.getResultPoints();k!==null&&(k[0]=new de(c-k[0].getX()-1,k[0].getY()),k[1]=new de(c-k[1].getX()-1,k[1].getY()))}return N}catch{}}}throw new H}static recordPattern(s,a,c){let u=c.length;for(let _=0;_<u;_++)c[_]=0;let d=s.getSize();if(a>=d)throw new H;let f=!s.get(a),p=0,y=a;for(;y<d;){if(s.get(y)!==f)c[p]++;else{if(++p===u)break;c[p]=1,f=!f}y++}if(!(p===u||p===u-1&&y===d))throw new H}static recordPatternInReverse(s,a,c){let u=c.length,d=s.get(a);for(;a>0&&u>=0;)s.get(--a)!==d&&(u--,d=!d);if(u>=0)throw new H;Yt.recordPattern(s,a+1,c)}static patternMatchVariance(s,a,c){let u=s.length,d=0,f=0;for(let _=0;_<u;_++)d+=s[_],f+=a[_];if(d<f)return Number.POSITIVE_INFINITY;let p=d/f;c*=p;let y=0;for(let _=0;_<u;_++){let w=s[_],x=a[_]*p,E=w>x?w-x:x-w;if(E>c)return Number.POSITIVE_INFINITY;y+=E}return y/d}}class ne extends Yt{static findStartPattern(s){let a=s.getSize(),c=s.getNextSet(0),u=0,d=Int32Array.from([0,0,0,0,0,0]),f=c,p=!1,y=6;for(let _=c;_<a;_++)if(s.get(_)!==p)d[u]++;else{if(u===y-1){let w=ne.MAX_AVG_VARIANCE,x=-1;for(let E=ne.CODE_START_A;E<=ne.CODE_START_C;E++){let D=Yt.patternMatchVariance(d,ne.CODE_PATTERNS[E],ne.MAX_INDIVIDUAL_VARIANCE);D<w&&(w=D,x=E)}if(x>=0&&s.isRange(Math.max(0,f-(_-f)/2),f,!1))return Int32Array.from([f,_,x]);f+=d[0]+d[1],d=d.slice(2,d.length-1),d[u-1]=0,d[u]=0,u--}else u++;d[u]=1,p=!p}throw new H}static decodeCode(s,a,c){Yt.recordPattern(s,c,a);let u=ne.MAX_AVG_VARIANCE,d=-1;for(let f=0;f<ne.CODE_PATTERNS.length;f++){let p=ne.CODE_PATTERNS[f],y=this.patternMatchVariance(a,p,ne.MAX_INDIVIDUAL_VARIANCE);y<u&&(u=y,d=f)}if(d>=0)return d;throw new H}decodeRow(s,a,c){let u=c&&c.get(ye.ASSUME_GS1)===!0,d=ne.findStartPattern(a),f=d[2],p=0,y=new Uint8Array(20);y[p++]=f;let _;switch(f){case ne.CODE_START_A:_=ne.CODE_CODE_A;break;case ne.CODE_START_B:_=ne.CODE_CODE_B;break;case ne.CODE_START_C:_=ne.CODE_CODE_C;break;default:throw new G}let w=!1,x=!1,E="",D=d[0],O=d[1],N=Int32Array.from([0,0,0,0,0,0]),k=0,L=0,X=f,ie=0,U=!0,Ge=!1,Re=!1;for(;!w;){let $s=x;switch(x=!1,k=L,L=ne.decodeCode(a,N,O),y[p++]=L,L!==ne.CODE_STOP&&(U=!0),L!==ne.CODE_STOP&&(ie++,X+=ie*L),D=O,O+=N.reduce((RA,PA)=>RA+PA,0),L){case ne.CODE_START_A:case ne.CODE_START_B:case ne.CODE_START_C:throw new G}switch(_){case ne.CODE_CODE_A:if(L<64)Re===Ge?E+=String.fromCharCode(32+L):E+=String.fromCharCode(32+L+128),Re=!1;else if(L<96)Re===Ge?E+=String.fromCharCode(L-64):E+=String.fromCharCode(L+64),Re=!1;else switch(L!==ne.CODE_STOP&&(U=!1),L){case ne.CODE_FNC_1:u&&(E.length===0?E+="]C1":E+="");break;case ne.CODE_FNC_2:case ne.CODE_FNC_3:break;case ne.CODE_FNC_4_A:!Ge&&Re?(Ge=!0,Re=!1):Ge&&Re?(Ge=!1,Re=!1):Re=!0;break;case ne.CODE_SHIFT:x=!0,_=ne.CODE_CODE_B;break;case ne.CODE_CODE_B:_=ne.CODE_CODE_B;break;case ne.CODE_CODE_C:_=ne.CODE_CODE_C;break;case ne.CODE_STOP:w=!0;break}break;case ne.CODE_CODE_B:if(L<96)Re===Ge?E+=String.fromCharCode(32+L):E+=String.fromCharCode(32+L+128),Re=!1;else switch(L!==ne.CODE_STOP&&(U=!1),L){case ne.CODE_FNC_1:u&&(E.length===0?E+="]C1":E+="");break;case ne.CODE_FNC_2:case ne.CODE_FNC_3:break;case ne.CODE_FNC_4_B:!Ge&&Re?(Ge=!0,Re=!1):Ge&&Re?(Ge=!1,Re=!1):Re=!0;break;case ne.CODE_SHIFT:x=!0,_=ne.CODE_CODE_A;break;case ne.CODE_CODE_A:_=ne.CODE_CODE_A;break;case ne.CODE_CODE_C:_=ne.CODE_CODE_C;break;case ne.CODE_STOP:w=!0;break}break;case ne.CODE_CODE_C:if(L<100)L<10&&(E+="0"),E+=L;else switch(L!==ne.CODE_STOP&&(U=!1),L){case ne.CODE_FNC_1:u&&(E.length===0?E+="]C1":E+="");break;case ne.CODE_CODE_A:_=ne.CODE_CODE_A;break;case ne.CODE_CODE_B:_=ne.CODE_CODE_B;break;case ne.CODE_STOP:w=!0;break}break}$s&&(_=_===ne.CODE_CODE_A?ne.CODE_CODE_B:ne.CODE_CODE_A)}let Xn=O-D;if(O=a.getNextUnset(O),!a.isRange(O,Math.min(a.getSize(),O+(O-D)/2),!1))throw new H;if(X-=ie*k,X%103!==k)throw new b;let Ur=E.length;if(Ur===0)throw new H;Ur>0&&U&&(_===ne.CODE_CODE_C?E=E.substring(0,Ur-2):E=E.substring(0,Ur-1));let Qn=(d[1]+d[0])/2,St=D+Xn/2,wn=y.length,sr=new Uint8Array(wn);for(let $s=0;$s<wn;$s++)sr[$s]=y[$s];let Gs=[new de(Qn,s),new de(St,s)];return new Ln(E,sr,0,Gs,we.CODE_128,new Date().getTime())}}ne.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],ne.MAX_AVG_VARIANCE=.25,ne.MAX_INDIVIDUAL_VARIANCE=.7,ne.CODE_SHIFT=98,ne.CODE_CODE_C=99,ne.CODE_CODE_B=100,ne.CODE_CODE_A=101,ne.CODE_FNC_1=102,ne.CODE_FNC_2=97,ne.CODE_FNC_3=96,ne.CODE_FNC_4_A=101,ne.CODE_FNC_4_B=100,ne.CODE_START_A=103,ne.CODE_START_B=104,ne.CODE_START_C=105,ne.CODE_STOP=106;let Ap=(()=>{class C extends Yt{constructor(a=!1,c=!1){super(),this.usingCheckDigit=a,this.extendedMode=c,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(a,c,u){let d=this.counters;d.fill(0),this.decodeRowResult="";let f=C.findAsteriskPattern(c,d),p=c.getNextSet(f[1]),y=c.getSize(),_,w;do{C.recordPattern(c,p,d);let k=C.toNarrowWidePattern(d);if(k<0)throw new H;_=C.patternToChar(k),this.decodeRowResult+=_,w=p;for(let L of d)p+=L;p=c.getNextSet(p)}while(_!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let x=0;for(let k of d)x+=k;let E=p-w-x;if(p!==y&&E*2<x)throw new H;if(this.usingCheckDigit){let k=this.decodeRowResult.length-1,L=0;for(let X=0;X<k;X++)L+=C.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(X));if(this.decodeRowResult.charAt(k)!==C.ALPHABET_STRING.charAt(L%43))throw new b;this.decodeRowResult=this.decodeRowResult.substring(0,k)}if(this.decodeRowResult.length===0)throw new H;let D;this.extendedMode?D=C.decodeExtended(this.decodeRowResult):D=this.decodeRowResult;let O=(f[1]+f[0])/2,N=w+x/2;return new Ln(D,null,0,[new de(O,a),new de(N,a)],we.CODE_39,new Date().getTime())}static findAsteriskPattern(a,c){let u=a.getSize(),d=a.getNextSet(0),f=0,p=d,y=!1,_=c.length;for(let w=d;w<u;w++)if(a.get(w)!==y)c[f]++;else{if(f===_-1){if(this.toNarrowWidePattern(c)===C.ASTERISK_ENCODING&&a.isRange(Math.max(0,p-Math.floor((w-p)/2)),p,!1))return[p,w];p+=c[0]+c[1],c.copyWithin(0,2,2+f-1),c[f-1]=0,c[f]=0,f--}else f++;c[f]=1,y=!y}throw new H}static toNarrowWidePattern(a){let c=a.length,u=0,d;do{let f=2147483647;for(let _ of a)_<f&&_>u&&(f=_);u=f,d=0;let p=0,y=0;for(let _=0;_<c;_++){let w=a[_];w>u&&(y|=1<<c-1-_,d++,p+=w)}if(d===3){for(let _=0;_<c&&d>0;_++){let w=a[_];if(w>u&&(d--,w*2>=p))return-1}return y}}while(d>3);return-1}static patternToChar(a){for(let c=0;c<C.CHARACTER_ENCODINGS.length;c++)if(C.CHARACTER_ENCODINGS[c]===a)return C.ALPHABET_STRING.charAt(c);if(a===C.ASTERISK_ENCODING)return"*";throw new H}static decodeExtended(a){let c=a.length,u="";for(let d=0;d<c;d++){let f=a.charAt(d);if(f==="+"||f==="$"||f==="%"||f==="/"){let p=a.charAt(d+1),y="\0";switch(f){case"+":if(p>="A"&&p<="Z")y=String.fromCharCode(p.charCodeAt(0)+32);else throw new G;break;case"$":if(p>="A"&&p<="Z")y=String.fromCharCode(p.charCodeAt(0)-64);else throw new G;break;case"%":if(p>="A"&&p<="E")y=String.fromCharCode(p.charCodeAt(0)-38);else if(p>="F"&&p<="J")y=String.fromCharCode(p.charCodeAt(0)-11);else if(p>="K"&&p<="O")y=String.fromCharCode(p.charCodeAt(0)+16);else if(p>="P"&&p<="T")y=String.fromCharCode(p.charCodeAt(0)+43);else if(p==="U")y="\0";else if(p==="V")y="@";else if(p==="W")y="`";else if(p==="X"||p==="Y"||p==="Z")y="\x7F";else throw new G;break;case"/":if(p>="A"&&p<="O")y=String.fromCharCode(p.charCodeAt(0)-32);else if(p==="Z")y=":";else throw new G;break}u+=y,d++}else u+=f}return u}}return C.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",C.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],C.ASTERISK_ENCODING=148,C})();class Et extends Yt{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(s,a,c){let u=this.decodeStart(a),d=this.decodeEnd(a),f=new vt;Et.decodeMiddle(a,u[1],d[0],f);let p=f.toString(),y=null;c!=null&&(y=c.get(ye.ALLOWED_LENGTHS)),y==null&&(y=Et.DEFAULT_ALLOWED_LENGTHS);let _=p.length,w=!1,x=0;for(let O of y){if(_===O){w=!0;break}O>x&&(x=O)}if(!w&&_>x&&(w=!0),!w)throw new G;let E=[new de(u[1],s),new de(d[0],s)];return new Ln(p,null,0,E,we.ITF,new Date().getTime())}static decodeMiddle(s,a,c,u){let d=new Int32Array(10),f=new Int32Array(5),p=new Int32Array(5);for(d.fill(0),f.fill(0),p.fill(0);a<c;){Yt.recordPattern(s,a,d);for(let _=0;_<5;_++){let w=2*_;f[_]=d[w],p[_]=d[w+1]}let y=Et.decodeDigit(f);u.append(y.toString()),y=this.decodeDigit(p),u.append(y.toString()),d.forEach(function(_){a+=_})}}decodeStart(s){let a=Et.skipWhiteSpace(s),c=Et.findGuardPattern(s,a,Et.START_PATTERN);return this.narrowLineWidth=(c[1]-c[0])/4,this.validateQuietZone(s,c[0]),c}validateQuietZone(s,a){let c=this.narrowLineWidth*10;c=c<a?c:a;for(let u=a-1;c>0&&u>=0&&!s.get(u);u--)c--;if(c!==0)throw new H}static skipWhiteSpace(s){let a=s.getSize(),c=s.getNextSet(0);if(c===a)throw new H;return c}decodeEnd(s){s.reverse();try{let a=Et.skipWhiteSpace(s),c;try{c=Et.findGuardPattern(s,a,Et.END_PATTERN_REVERSED[0])}catch(d){d instanceof H&&(c=Et.findGuardPattern(s,a,Et.END_PATTERN_REVERSED[1]))}this.validateQuietZone(s,c[0]);let u=c[0];return c[0]=s.getSize()-c[1],c[1]=s.getSize()-u,c}finally{s.reverse()}}static findGuardPattern(s,a,c){let u=c.length,d=new Int32Array(u),f=s.getSize(),p=!1,y=0,_=a;d.fill(0);for(let w=a;w<f;w++)if(s.get(w)!==p)d[y]++;else{if(y===u-1){if(Yt.patternMatchVariance(d,c,Et.MAX_INDIVIDUAL_VARIANCE)<Et.MAX_AVG_VARIANCE)return[_,w];_+=d[0]+d[1],T.arraycopy(d,2,d,0,y-1),d[y-1]=0,d[y]=0,y--}else y++;d[y]=1,p=!p}throw new H}static decodeDigit(s){let a=Et.MAX_AVG_VARIANCE,c=-1,u=Et.PATTERNS.length;for(let d=0;d<u;d++){let f=Et.PATTERNS[d],p=Yt.patternMatchVariance(s,f,Et.MAX_INDIVIDUAL_VARIANCE);p<a?(a=p,c=d):p===a&&(c=-1)}if(c>=0)return c%10;throw new H}}Et.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],Et.MAX_AVG_VARIANCE=.38,Et.MAX_INDIVIDUAL_VARIANCE=.5,Et.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],Et.START_PATTERN=Int32Array.from([1,1,1,1]),Et.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Vt extends Yt{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(s){let a=!1,c,u=0,d=Int32Array.from([0,0,0]);for(;!a;){d=Int32Array.from([0,0,0]),c=Vt.findGuardPattern(s,u,!1,this.START_END_PATTERN,d);let f=c[0];u=c[1];let p=f-(u-f);p>=0&&(a=s.isRange(p,f,!1))}return c}static checkChecksum(s){return Vt.checkStandardUPCEANChecksum(s)}static checkStandardUPCEANChecksum(s){let a=s.length;if(a===0)return!1;let c=parseInt(s.charAt(a-1),10);return Vt.getStandardUPCEANChecksum(s.substring(0,a-1))===c}static getStandardUPCEANChecksum(s){let a=s.length,c=0;for(let u=a-1;u>=0;u-=2){let d=s.charAt(u).charCodeAt(0)-48;if(d<0||d>9)throw new G;c+=d}c*=3;for(let u=a-2;u>=0;u-=2){let d=s.charAt(u).charCodeAt(0)-48;if(d<0||d>9)throw new G;c+=d}return(1e3-c)%10}static decodeEnd(s,a){return Vt.findGuardPattern(s,a,!1,Vt.START_END_PATTERN,new Int32Array(Vt.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(s,a,c,u){return this.findGuardPattern(s,a,c,u,new Int32Array(u.length))}static findGuardPattern(s,a,c,u,d){let f=s.getSize();a=c?s.getNextUnset(a):s.getNextSet(a);let p=0,y=a,_=u.length,w=c;for(let x=a;x<f;x++)if(s.get(x)!==w)d[p]++;else{if(p===_-1){if(Yt.patternMatchVariance(d,u,Vt.MAX_INDIVIDUAL_VARIANCE)<Vt.MAX_AVG_VARIANCE)return Int32Array.from([y,x]);y+=d[0]+d[1];let E=d.slice(2,d.length-1);for(let D=0;D<p-1;D++)d[D]=E[D];d[p-1]=0,d[p]=0,p--}else p++;d[p]=1,w=!w}throw new H}static decodeDigit(s,a,c,u){this.recordPattern(s,c,a);let d=this.MAX_AVG_VARIANCE,f=-1,p=u.length;for(let y=0;y<p;y++){let _=u[y],w=Yt.patternMatchVariance(a,_,Vt.MAX_INDIVIDUAL_VARIANCE);w<d&&(d=w,f=y)}if(f>=0)return f;throw new H}}Vt.MAX_AVG_VARIANCE=.48,Vt.MAX_INDIVIDUAL_VARIANCE=.7,Vt.START_END_PATTERN=Int32Array.from([1,1,1]),Vt.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Vt.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Vt.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class yl{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(s,a,c){let u=this.decodeRowStringBuffer,d=this.decodeMiddle(a,c,u),f=u.toString(),p=yl.parseExtensionString(f),y=[new de((c[0]+c[1])/2,s),new de(d,s)],_=new Ln(f,null,0,y,we.UPC_EAN_EXTENSION,new Date().getTime());return p!=null&&_.putAllMetadata(p),_}decodeMiddle(s,a,c){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let d=s.getSize(),f=a[1],p=0;for(let _=0;_<5&&f<d;_++){let w=Vt.decodeDigit(s,u,f,Vt.L_AND_G_PATTERNS);c+=String.fromCharCode(48+w%10);for(let x of u)f+=x;w>=10&&(p|=1<<4-_),_!==4&&(f=s.getNextSet(f),f=s.getNextUnset(f))}if(c.length!==5)throw new H;let y=this.determineCheckDigit(p);if(yl.extensionChecksum(c.toString())!==y)throw new H;return f}static extensionChecksum(s){let a=s.length,c=0;for(let u=a-2;u>=0;u-=2)c+=s.charAt(u).charCodeAt(0)-48;c*=3;for(let u=a-1;u>=0;u-=2)c+=s.charAt(u).charCodeAt(0)-48;return c*=3,c%10}determineCheckDigit(s){for(let a=0;a<10;a++)if(s===this.CHECK_DIGIT_ENCODINGS[a])return a;throw new H}static parseExtensionString(s){if(s.length!==5)return null;let a=yl.parseExtension5String(s);return a==null?null:new Map([[hn.SUGGESTED_PRICE,a]])}static parseExtension5String(s){let a;switch(s.charAt(0)){case"0":a="\xA3";break;case"5":a="$";break;case"9":switch(s){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}a="";break;default:a="";break}let c=parseInt(s.substring(1)),u=(c/100).toString(),d=c%100,f=d<10?"0"+d:d.toString();return a+u+"."+f}}class Op{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(s,a,c){let u=this.decodeRowStringBuffer,d=this.decodeMiddle(a,c,u),f=u.toString(),p=Op.parseExtensionString(f),y=[new de((c[0]+c[1])/2,s),new de(d,s)],_=new Ln(f,null,0,y,we.UPC_EAN_EXTENSION,new Date().getTime());return p!=null&&_.putAllMetadata(p),_}decodeMiddle(s,a,c){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let d=s.getSize(),f=a[1],p=0;for(let y=0;y<2&&f<d;y++){let _=Vt.decodeDigit(s,u,f,Vt.L_AND_G_PATTERNS);c+=String.fromCharCode(48+_%10);for(let w of u)f+=w;_>=10&&(p|=1<<1-y),y!==1&&(f=s.getNextSet(f),f=s.getNextUnset(f))}if(c.length!==2)throw new H;if(parseInt(c.toString())%4!==p)throw new H;return f}static parseExtensionString(s){return s.length!==2?null:new Map([[hn.ISSUE_NUMBER,parseInt(s)]])}}class RC{static decodeRow(s,a,c){let u=Vt.findGuardPattern(a,c,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new yl().decodeRow(s,a,u)}catch{return new Op().decodeRow(s,a,u)}}}RC.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class ft extends Vt{constructor(){super(),this.decodeRowStringBuffer="",ft.L_AND_G_PATTERNS=ft.L_PATTERNS.map(s=>Int32Array.from(s));for(let s=10;s<20;s++){let a=ft.L_PATTERNS[s-10],c=new Int32Array(a.length);for(let u=0;u<a.length;u++)c[u]=a[a.length-u-1];ft.L_AND_G_PATTERNS[s]=c}}decodeRow(s,a,c){let u=ft.findStartGuardPattern(a),d=c==null?null:c.get(ye.NEED_RESULT_POINT_CALLBACK);if(d!=null){let U=new de((u[0]+u[1])/2,s);d.foundPossibleResultPoint(U)}let f=this.decodeMiddle(a,u,this.decodeRowStringBuffer),p=f.rowOffset,y=f.resultString;if(d!=null){let U=new de(p,s);d.foundPossibleResultPoint(U)}let _=this.decodeEnd(a,p);if(d!=null){let U=new de((_[0]+_[1])/2,s);d.foundPossibleResultPoint(U)}let w=_[1],x=w+(w-_[0]);if(x>=a.getSize()||!a.isRange(w,x,!1))throw new H;let E=y.toString();if(E.length<8)throw new G;if(!ft.checkChecksum(E))throw new b;let D=(u[1]+u[0])/2,O=(_[1]+_[0])/2,N=this.getBarcodeFormat(),k=[new de(D,s),new de(O,s)],L=new Ln(E,null,0,k,N,new Date().getTime()),X=0;try{let U=RC.decodeRow(s,a,_[1]);L.putMetadata(hn.UPC_EAN_EXTENSION,U.getText()),L.putAllMetadata(U.getResultMetadata()),L.addResultPoints(U.getResultPoints()),X=U.getText().length}catch{}let ie=c==null?null:c.get(ye.ALLOWED_EAN_EXTENSIONS);if(ie!=null){let U=!1;for(let Ge in ie)if(X.toString()===Ge){U=!0;break}if(!U)throw new H}return L}decodeEnd(s,a){return ft.findGuardPattern(s,a,!1,ft.START_END_PATTERN,new Int32Array(ft.START_END_PATTERN.length).fill(0))}static checkChecksum(s){return ft.checkStandardUPCEANChecksum(s)}static checkStandardUPCEANChecksum(s){let a=s.length;if(a===0)return!1;let c=parseInt(s.charAt(a-1),10);return ft.getStandardUPCEANChecksum(s.substring(0,a-1))===c}static getStandardUPCEANChecksum(s){let a=s.length,c=0;for(let u=a-1;u>=0;u-=2){let d=s.charAt(u).charCodeAt(0)-48;if(d<0||d>9)throw new G;c+=d}c*=3;for(let u=a-2;u>=0;u-=2){let d=s.charAt(u).charCodeAt(0)-48;if(d<0||d>9)throw new G;c+=d}return(1e3-c)%10}}let Mu=(()=>{class C extends ft{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(a,c,u){let d=this.decodeMiddleCounters;d[0]=0,d[1]=0,d[2]=0,d[3]=0;let f=a.getSize(),p=c[1],y=0;for(let w=0;w<6&&p<f;w++){let x=ft.decodeDigit(a,d,p,ft.L_AND_G_PATTERNS);u+=String.fromCharCode(48+x%10);for(let E of d)p+=E;x>=10&&(y|=1<<5-w)}u=C.determineFirstDigit(u,y),p=ft.findGuardPattern(a,p,!0,ft.MIDDLE_PATTERN,new Int32Array(ft.MIDDLE_PATTERN.length).fill(0))[1];for(let w=0;w<6&&p<f;w++){let x=ft.decodeDigit(a,d,p,ft.L_PATTERNS);u+=String.fromCharCode(48+x);for(let E of d)p+=E}return{rowOffset:p,resultString:u}}getBarcodeFormat(){return we.EAN_13}static determineFirstDigit(a,c){for(let u=0;u<10;u++)if(c===this.FIRST_DIGIT_ENCODINGS[u])return a=String.fromCharCode(48+u)+a,a;throw new H}}return C.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],C})();class PC extends ft{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(s,a,c){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let d=s.getSize(),f=a[1];for(let y=0;y<4&&f<d;y++){let _=ft.decodeDigit(s,u,f,ft.L_PATTERNS);c+=String.fromCharCode(48+_);for(let w of u)f+=w}f=ft.findGuardPattern(s,f,!0,ft.MIDDLE_PATTERN,new Int32Array(ft.MIDDLE_PATTERN.length).fill(0))[1];for(let y=0;y<4&&f<d;y++){let _=ft.decodeDigit(s,u,f,ft.L_PATTERNS);c+=String.fromCharCode(48+_);for(let w of u)f+=w}return{rowOffset:f,resultString:c}}getBarcodeFormat(){return we.EAN_8}}class kC extends ft{constructor(){super(...arguments),this.ean13Reader=new Mu}getBarcodeFormat(){return we.UPC_A}decode(s,a){return this.maybeReturnResult(this.ean13Reader.decode(s))}decodeRow(s,a,c){return this.maybeReturnResult(this.ean13Reader.decodeRow(s,a,c))}decodeMiddle(s,a,c){return this.ean13Reader.decodeMiddle(s,a,c)}maybeReturnResult(s){let a=s.getText();if(a.charAt(0)==="0"){let c=new Ln(a.substring(1),null,null,s.getResultPoints(),we.UPC_A);return s.getResultMetadata()!=null&&c.putAllMetadata(s.getResultMetadata()),c}else throw new H}reset(){this.ean13Reader.reset()}}class kr extends ft{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(s,a,c){let u=this.decodeMiddleCounters.map(_=>_);u[0]=0,u[1]=0,u[2]=0,u[3]=0;let d=s.getSize(),f=a[1],p=0;for(let _=0;_<6&&f<d;_++){let w=kr.decodeDigit(s,u,f,kr.L_AND_G_PATTERNS);c+=String.fromCharCode(48+w%10);for(let x of u)f+=x;w>=10&&(p|=1<<5-_)}let y=kr.determineNumSysAndCheckDigit(c,p);return{rowOffset:f,resultString:y}}decodeEnd(s,a){return kr.findGuardPatternWithoutCounters(s,a,!0,kr.MIDDLE_END_PATTERN)}checkChecksum(s){return ft.checkChecksum(kr.convertUPCEtoUPCA(s))}static determineNumSysAndCheckDigit(s,a){for(let c=0;c<=1;c++)for(let u=0;u<10;u++)if(a===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[c][u]){let d=String.fromCharCode(48+c),f=String.fromCharCode(48+u);return d+s+f}throw H.getNotFoundInstance()}getBarcodeFormat(){return we.UPC_E}static convertUPCEtoUPCA(s){let a=s.slice(1,7).split("").map(d=>d.charCodeAt(0)),c=new vt;c.append(s.charAt(0));let u=a[5];switch(u){case 0:case 1:case 2:c.appendChars(a,0,2),c.append(u),c.append("0000"),c.appendChars(a,2,3);break;case 3:c.appendChars(a,0,3),c.append("00000"),c.appendChars(a,3,2);break;case 4:c.appendChars(a,0,4),c.append("00000"),c.append(a[4]);break;default:c.appendChars(a,0,5),c.append("0000"),c.append(u);break}return s.length>=8&&c.append(s.charAt(7)),c.toString()}}kr.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),kr.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Np extends Yt{constructor(s){super();let a=s==null?null:s.get(ye.POSSIBLE_FORMATS),c=[];n(a)?(c.push(new Mu),c.push(new kC),c.push(new PC),c.push(new kr)):(a.indexOf(we.EAN_13)>-1&&c.push(new Mu),a.indexOf(we.UPC_A)>-1&&c.push(new kC),a.indexOf(we.EAN_8)>-1&&c.push(new PC),a.indexOf(we.UPC_E)>-1&&c.push(new kr)),this.readers=c}decodeRow(s,a,c){for(let u of this.readers)try{let d=u.decodeRow(s,a,c),f=d.getBarcodeFormat()===we.EAN_13&&d.getText().charAt(0)==="0",p=c==null?null:c.get(ye.POSSIBLE_FORMATS),y=p==null||p.includes(we.UPC_A);if(f&&y){let _=d.getRawBytes(),w=new Ln(d.getText().substring(1),_,_?_.length:null,d.getResultPoints(),we.UPC_A);return w.putAllMetadata(d.getResultMetadata()),w}return d}catch{}throw new H}reset(){for(let s of this.readers)s.reset()}}let Go=(()=>{class C extends Yt{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(a,c){for(let u=0;u<c.length;u++)if(Yt.patternMatchVariance(a,c[u],C.MAX_INDIVIDUAL_VARIANCE)<C.MAX_AVG_VARIANCE)return u;throw new H}static count(a){return nt.sum(new Int32Array(a))}static increment(a,c){let u=0,d=c[0];for(let f=1;f<a.length;f++)c[f]>d&&(d=c[f],u=f);a[u]++}static decrement(a,c){let u=0,d=c[0];for(let f=1;f<a.length;f++)c[f]<d&&(d=c[f],u=f);a[u]--}static isFinderPattern(a){let c=a[0]+a[1],u=c+a[2]+a[3],d=c/u;if(d>=C.MIN_FINDER_PATTERN_RATIO&&d<=C.MAX_FINDER_PATTERN_RATIO){let f=Number.MAX_SAFE_INTEGER,p=Number.MIN_SAFE_INTEGER;for(let y of a)y>p&&(p=y),y<f&&(f=y);return p<10*f}return!1}}return C.MAX_AVG_VARIANCE=.2,C.MAX_INDIVIDUAL_VARIANCE=.45,C.MIN_FINDER_PATTERN_RATIO=9.5/12,C.MAX_FINDER_PATTERN_RATIO=12.5/14,C})();class Us{constructor(s,a){this.value=s,this.checksumPortion=a}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(s){if(!(s instanceof Us))return!1;let a=s;return this.value===a.value&&this.checksumPortion===a.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Tu{constructor(s,a,c,u,d){this.value=s,this.startEnd=a,this.value=s,this.startEnd=a,this.resultPoints=new Array,this.resultPoints.push(new de(c,d)),this.resultPoints.push(new de(u,d))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(s){if(!(s instanceof Tu))return!1;let a=s;return this.value===a.value}hashCode(){return this.value}}class ti{constructor(){}static getRSSvalue(s,a,c){let u=0;for(let y of s)u+=y;let d=0,f=0,p=s.length;for(let y=0;y<p-1;y++){let _;for(_=1,f|=1<<y;_<s[y];_++,f&=~(1<<y)){let w=ti.combins(u-_-1,p-y-2);if(c&&f===0&&u-_-(p-y-1)>=p-y-1&&(w-=ti.combins(u-_-(p-y),p-y-2)),p-y-1>1){let x=0;for(let E=u-_-(p-y-2);E>a;E--)x+=ti.combins(u-_-E-1,p-y-3);w-=x*(p-1-y)}else u-_>a&&w--;d+=w}u-=_}return d}static combins(s,a){let c,u;s-a>a?(u=a,c=s-a):(u=s-a,c=a);let d=1,f=1;for(let p=s;p>c;p--)d*=p,f<=u&&(d/=f,f++);for(;f<=u;)d/=f,f++;return d}}class XT{static buildBitArray(s){let a=s.length*2-1;s[s.length-1].getRightChar()==null&&(a-=1);let c=12*a,u=new ce(c),d=0,p=s[0].getRightChar().getValue();for(let y=11;y>=0;--y)p&1<<y&&u.set(d),d++;for(let y=1;y<s.length;++y){let _=s[y],w=_.getLeftChar().getValue();for(let x=11;x>=0;--x)w&1<<x&&u.set(d),d++;if(_.getRightChar()!=null){let x=_.getRightChar().getValue();for(let E=11;E>=0;--E)x&1<<E&&u.set(d),d++}}return u}}class $o{constructor(s,a){a?this.decodedInformation=null:(this.finished=s,this.decodedInformation=a)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class Rp{constructor(s){this.newPosition=s}getNewPosition(){return this.newPosition}}let Fr=(()=>{class C extends Rp{constructor(a,c){super(a),this.value=c}getValue(){return this.value}isFNC1(){return this.value===C.FNC1}}return C.FNC1="$",C})();class qo extends Rp{constructor(s,a,c){super(s),c?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=a}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}let Vs=(()=>{class C extends Rp{constructor(a,c,u){if(super(a),c<0||c>10||u<0||u>10)throw new G;this.firstDigit=c,this.secondDigit=u}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===C.FNC1}isSecondDigitFNC1(){return this.secondDigit===C.FNC1}isAnyFNC1(){return this.firstDigit===C.FNC1||this.secondDigit===C.FNC1}}return C.FNC1=10,C})();class le{constructor(){}static parseFieldsInGeneralPurpose(s){if(!s)return null;if(s.length<2)throw new H;let a=s.substring(0,2);for(let d of le.TWO_DIGIT_DATA_LENGTH)if(d[0]===a)return d[1]===le.VARIABLE_LENGTH?le.processVariableAI(2,d[2],s):le.processFixedAI(2,d[1],s);if(s.length<3)throw new H;let c=s.substring(0,3);for(let d of le.THREE_DIGIT_DATA_LENGTH)if(d[0]===c)return d[1]===le.VARIABLE_LENGTH?le.processVariableAI(3,d[2],s):le.processFixedAI(3,d[1],s);for(let d of le.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(d[0]===c)return d[1]===le.VARIABLE_LENGTH?le.processVariableAI(4,d[2],s):le.processFixedAI(4,d[1],s);if(s.length<4)throw new H;let u=s.substring(0,4);for(let d of le.FOUR_DIGIT_DATA_LENGTH)if(d[0]===u)return d[1]===le.VARIABLE_LENGTH?le.processVariableAI(4,d[2],s):le.processFixedAI(4,d[1],s);throw new H}static processFixedAI(s,a,c){if(c.length<s)throw new H;let u=c.substring(0,s);if(c.length<s+a)throw new H;let d=c.substring(s,s+a),f=c.substring(s+a),p="("+u+")"+d,y=le.parseFieldsInGeneralPurpose(f);return y==null?p:p+y}static processVariableAI(s,a,c){let u=c.substring(0,s),d;c.length<s+a?d=c.length:d=s+a;let f=c.substring(s,d),p=c.substring(d),y="("+u+")"+f,_=le.parseFieldsInGeneralPurpose(p);return _==null?y:y+_}}le.VARIABLE_LENGTH=[],le.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",le.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",le.VARIABLE_LENGTH,20],["22",le.VARIABLE_LENGTH,29],["30",le.VARIABLE_LENGTH,8],["37",le.VARIABLE_LENGTH,8],["90",le.VARIABLE_LENGTH,30],["91",le.VARIABLE_LENGTH,30],["92",le.VARIABLE_LENGTH,30],["93",le.VARIABLE_LENGTH,30],["94",le.VARIABLE_LENGTH,30],["95",le.VARIABLE_LENGTH,30],["96",le.VARIABLE_LENGTH,30],["97",le.VARIABLE_LENGTH,3],["98",le.VARIABLE_LENGTH,30],["99",le.VARIABLE_LENGTH,30]],le.THREE_DIGIT_DATA_LENGTH=[["240",le.VARIABLE_LENGTH,30],["241",le.VARIABLE_LENGTH,30],["242",le.VARIABLE_LENGTH,6],["250",le.VARIABLE_LENGTH,30],["251",le.VARIABLE_LENGTH,30],["253",le.VARIABLE_LENGTH,17],["254",le.VARIABLE_LENGTH,20],["400",le.VARIABLE_LENGTH,30],["401",le.VARIABLE_LENGTH,30],["402",17],["403",le.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",le.VARIABLE_LENGTH,20],["421",le.VARIABLE_LENGTH,15],["422",3],["423",le.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],le.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",le.VARIABLE_LENGTH,15],["391",le.VARIABLE_LENGTH,18],["392",le.VARIABLE_LENGTH,15],["393",le.VARIABLE_LENGTH,18],["703",le.VARIABLE_LENGTH,30]],le.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",le.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",le.VARIABLE_LENGTH,20],["8003",le.VARIABLE_LENGTH,30],["8004",le.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",le.VARIABLE_LENGTH,30],["8008",le.VARIABLE_LENGTH,12],["8018",18],["8020",le.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",le.VARIABLE_LENGTH,70],["8200",le.VARIABLE_LENGTH,70]];class js{constructor(s){this.buffer=new vt,this.information=s}decodeAllCodes(s,a){let c=a,u=null;do{let d=this.decodeGeneralPurposeField(c,u),f=le.parseFieldsInGeneralPurpose(d.getNewString());if(f!=null&&s.append(f),d.isRemaining()?u=""+d.getRemainingValue():u=null,c===d.getNewPosition())break;c=d.getNewPosition()}while(!0);return s.toString()}isStillNumeric(s){if(s+7>this.information.getSize())return s+4<=this.information.getSize();for(let a=s;a<s+3;++a)if(this.information.get(a))return!0;return this.information.get(s+3)}decodeNumeric(s){if(s+7>this.information.getSize()){let d=this.extractNumericValueFromBitArray(s,4);return d===0?new Vs(this.information.getSize(),Vs.FNC1,Vs.FNC1):new Vs(this.information.getSize(),d-1,Vs.FNC1)}let a=this.extractNumericValueFromBitArray(s,7),c=(a-8)/11,u=(a-8)%11;return new Vs(s+7,c,u)}extractNumericValueFromBitArray(s,a){return js.extractNumericValueFromBitArray(this.information,s,a)}static extractNumericValueFromBitArray(s,a,c){let u=0;for(let d=0;d<c;++d)s.get(a+d)&&(u|=1<<c-d-1);return u}decodeGeneralPurposeField(s,a){this.buffer.setLengthToZero(),a!=null&&this.buffer.append(a),this.current.setPosition(s);let c=this.parseBlocks();return c!=null&&c.isRemaining()?new qo(this.current.getPosition(),this.buffer.toString(),c.getRemainingValue()):new qo(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let s,a;do{let c=this.current.getPosition();if(this.current.isAlpha()?(a=this.parseAlphaBlock(),s=a.isFinished()):this.current.isIsoIec646()?(a=this.parseIsoIec646Block(),s=a.isFinished()):(a=this.parseNumericBlock(),s=a.isFinished()),!(c!==this.current.getPosition())&&!s)break}while(!s);return a.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let s=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(s.getNewPosition()),s.isFirstDigitFNC1()){let a;return s.isSecondDigitFNC1()?a=new qo(this.current.getPosition(),this.buffer.toString()):a=new qo(this.current.getPosition(),this.buffer.toString(),s.getSecondDigit()),new $o(!0,a)}if(this.buffer.append(s.getFirstDigit()),s.isSecondDigitFNC1()){let a=new qo(this.current.getPosition(),this.buffer.toString());return new $o(!0,a)}this.buffer.append(s.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new $o(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let s=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(s.getNewPosition()),s.isFNC1()){let a=new qo(this.current.getPosition(),this.buffer.toString());return new $o(!0,a)}this.buffer.append(s.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new $o(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let s=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(s.getNewPosition()),s.isFNC1()){let a=new qo(this.current.getPosition(),this.buffer.toString());return new $o(!0,a)}this.buffer.append(s.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new $o(!1)}isStillIsoIec646(s){if(s+5>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(s,5);if(a>=5&&a<16)return!0;if(s+7>this.information.getSize())return!1;let c=this.extractNumericValueFromBitArray(s,7);if(c>=64&&c<116)return!0;if(s+8>this.information.getSize())return!1;let u=this.extractNumericValueFromBitArray(s,8);return u>=232&&u<253}decodeIsoIec646(s){let a=this.extractNumericValueFromBitArray(s,5);if(a===15)return new Fr(s+5,Fr.FNC1);if(a>=5&&a<15)return new Fr(s+5,"0"+(a-5));let c=this.extractNumericValueFromBitArray(s,7);if(c>=64&&c<90)return new Fr(s+7,""+(c+1));if(c>=90&&c<116)return new Fr(s+7,""+(c+7));let u=this.extractNumericValueFromBitArray(s,8),d;switch(u){case 232:d="!";break;case 233:d='"';break;case 234:d="%";break;case 235:d="&";break;case 236:d="'";break;case 237:d="(";break;case 238:d=")";break;case 239:d="*";break;case 240:d="+";break;case 241:d=",";break;case 242:d="-";break;case 243:d=".";break;case 244:d="/";break;case 245:d=":";break;case 246:d=";";break;case 247:d="<";break;case 248:d="=";break;case 249:d=">";break;case 250:d="?";break;case 251:d="_";break;case 252:d=" ";break;default:throw new G}return new Fr(s+8,d)}isStillAlpha(s){if(s+5>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(s,5);if(a>=5&&a<16)return!0;if(s+6>this.information.getSize())return!1;let c=this.extractNumericValueFromBitArray(s,6);return c>=16&&c<63}decodeAlphanumeric(s){let a=this.extractNumericValueFromBitArray(s,5);if(a===15)return new Fr(s+5,Fr.FNC1);if(a>=5&&a<15)return new Fr(s+5,"0"+(a-5));let c=this.extractNumericValueFromBitArray(s,6);if(c>=32&&c<58)return new Fr(s+6,""+(c+33));let u;switch(c){case 58:u="*";break;case 59:u=",";break;case 60:u="-";break;case 61:u=".";break;case 62:u="/";break;default:throw new Ei("Decoding invalid alphanumeric value: "+c)}return new Fr(s+6,u)}isAlphaTo646ToAlphaLatch(s){if(s+1>this.information.getSize())return!1;for(let a=0;a<5&&a+s<this.information.getSize();++a)if(a===2){if(!this.information.get(s+2))return!1}else if(this.information.get(s+a))return!1;return!0}isAlphaOr646ToNumericLatch(s){if(s+3>this.information.getSize())return!1;for(let a=s;a<s+3;++a)if(this.information.get(a))return!1;return!0}isNumericToAlphaNumericLatch(s){if(s+1>this.information.getSize())return!1;for(let a=0;a<4&&a+s<this.information.getSize();++a)if(this.information.get(s+a))return!1;return!0}}class Pp{constructor(s){this.information=s,this.generalDecoder=new js(s)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}let Lr=(()=>{class C extends Pp{constructor(a){super(a)}encodeCompressedGtin(a,c){a.append("(01)");let u=a.length();a.append("9"),this.encodeCompressedGtinWithoutAI(a,c,u)}encodeCompressedGtinWithoutAI(a,c,u){for(let d=0;d<4;++d){let f=this.getGeneralDecoder().extractNumericValueFromBitArray(c+10*d,10);f/100===0&&a.append("0"),f/10===0&&a.append("0"),a.append(f)}C.appendCheckDigit(a,u)}static appendCheckDigit(a,c){let u=0;for(let d=0;d<13;d++){let f=a.charAt(d+c).charCodeAt(0)-48;u+=d&1?f:3*f}u=10-u%10,u===10&&(u=0),a.append(u)}}return C.GTIN_SIZE=40,C})(),QT=(()=>{class C extends Lr{constructor(a){super(a)}parseInformation(){let a=new vt;a.append("(01)");let c=a.length(),u=this.getGeneralDecoder().extractNumericValueFromBitArray(C.HEADER_SIZE,4);return a.append(u),this.encodeCompressedGtinWithoutAI(a,C.HEADER_SIZE+4,c),this.getGeneralDecoder().decodeAllCodes(a,C.HEADER_SIZE+44)}}return C.HEADER_SIZE=4,C})(),KT=(()=>{class C extends Pp{constructor(a){super(a)}parseInformation(){let a=new vt;return this.getGeneralDecoder().decodeAllCodes(a,C.HEADER_SIZE)}}return C.HEADER_SIZE=5,C})();class Au extends Lr{constructor(s){super(s)}encodeCompressedWeight(s,a,c){let u=this.getGeneralDecoder().extractNumericValueFromBitArray(a,c);this.addWeightCode(s,u);let d=this.checkWeight(u),f=1e5;for(let p=0;p<5;++p)d/f===0&&s.append("0"),f/=10;s.append(d)}}let FC=(()=>{class C extends Au{constructor(a){super(a)}parseInformation(){if(this.getInformation().getSize()!=C.HEADER_SIZE+Au.GTIN_SIZE+C.WEIGHT_SIZE)throw new H;let a=new vt;return this.encodeCompressedGtin(a,C.HEADER_SIZE),this.encodeCompressedWeight(a,C.HEADER_SIZE+Au.GTIN_SIZE,C.WEIGHT_SIZE),a.toString()}}return C.HEADER_SIZE=5,C.WEIGHT_SIZE=15,C})();class JT extends FC{constructor(s){super(s)}addWeightCode(s,a){s.append("(3103)")}checkWeight(s){return s}}class eA extends FC{constructor(s){super(s)}addWeightCode(s,a){a<1e4?s.append("(3202)"):s.append("(3203)")}checkWeight(s){return s<1e4?s:s-1e4}}let tA=(()=>{class C extends Lr{constructor(a){super(a)}parseInformation(){if(this.getInformation().getSize()<C.HEADER_SIZE+Lr.GTIN_SIZE)throw new H;let a=new vt;this.encodeCompressedGtin(a,C.HEADER_SIZE);let c=this.getGeneralDecoder().extractNumericValueFromBitArray(C.HEADER_SIZE+Lr.GTIN_SIZE,C.LAST_DIGIT_SIZE);a.append("(392"),a.append(c),a.append(")");let u=this.getGeneralDecoder().decodeGeneralPurposeField(C.HEADER_SIZE+Lr.GTIN_SIZE+C.LAST_DIGIT_SIZE,null);return a.append(u.getNewString()),a.toString()}}return C.HEADER_SIZE=8,C.LAST_DIGIT_SIZE=2,C})(),nA=(()=>{class C extends Lr{constructor(a){super(a)}parseInformation(){if(this.getInformation().getSize()<C.HEADER_SIZE+Lr.GTIN_SIZE)throw new H;let a=new vt;this.encodeCompressedGtin(a,C.HEADER_SIZE);let c=this.getGeneralDecoder().extractNumericValueFromBitArray(C.HEADER_SIZE+Lr.GTIN_SIZE,C.LAST_DIGIT_SIZE);a.append("(393"),a.append(c),a.append(")");let u=this.getGeneralDecoder().extractNumericValueFromBitArray(C.HEADER_SIZE+Lr.GTIN_SIZE+C.LAST_DIGIT_SIZE,C.FIRST_THREE_DIGITS_SIZE);u/100==0&&a.append("0"),u/10==0&&a.append("0"),a.append(u);let d=this.getGeneralDecoder().decodeGeneralPurposeField(C.HEADER_SIZE+Lr.GTIN_SIZE+C.LAST_DIGIT_SIZE+C.FIRST_THREE_DIGITS_SIZE,null);return a.append(d.getNewString()),a.toString()}}return C.HEADER_SIZE=8,C.LAST_DIGIT_SIZE=2,C.FIRST_THREE_DIGITS_SIZE=10,C})(),no=(()=>{class C extends Au{constructor(a,c,u){super(a),this.dateCode=u,this.firstAIdigits=c}parseInformation(){if(this.getInformation().getSize()!=C.HEADER_SIZE+C.GTIN_SIZE+C.WEIGHT_SIZE+C.DATE_SIZE)throw new H;let a=new vt;return this.encodeCompressedGtin(a,C.HEADER_SIZE),this.encodeCompressedWeight(a,C.HEADER_SIZE+C.GTIN_SIZE,C.WEIGHT_SIZE),this.encodeCompressedDate(a,C.HEADER_SIZE+C.GTIN_SIZE+C.WEIGHT_SIZE),a.toString()}encodeCompressedDate(a,c){let u=this.getGeneralDecoder().extractNumericValueFromBitArray(c,C.DATE_SIZE);if(u==38400)return;a.append("("),a.append(this.dateCode),a.append(")");let d=u%32;u/=32;let f=u%12+1;u/=12;let p=u;p/10==0&&a.append("0"),a.append(p),f/10==0&&a.append("0"),a.append(f),d/10==0&&a.append("0"),a.append(d)}addWeightCode(a,c){a.append("("),a.append(this.firstAIdigits),a.append(c/1e5),a.append(")")}checkWeight(a){return a%1e5}}return C.HEADER_SIZE=8,C.WEIGHT_SIZE=20,C.DATE_SIZE=16,C})();function LC(C){try{if(C.get(1))return new QT(C);if(!C.get(2))return new KT(C);switch(js.extractNumericValueFromBitArray(C,1,4)){case 4:return new JT(C);case 5:return new eA(C)}switch(js.extractNumericValueFromBitArray(C,1,5)){case 12:return new tA(C);case 13:return new nA(C)}switch(js.extractNumericValueFromBitArray(C,1,7)){case 56:return new no(C,"310","11");case 57:return new no(C,"320","11");case 58:return new no(C,"310","13");case 59:return new no(C,"320","13");case 60:return new no(C,"310","15");case 61:return new no(C,"320","15");case 62:return new no(C,"310","17");case 63:return new no(C,"320","17")}}catch(s){throw console.log(s),new Ei("unknown decoder: "+C)}}class ro{constructor(s,a,c,u){this.leftchar=s,this.rightchar=a,this.finderpattern=c,this.maybeLast=u}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(s,a){return s instanceof ro?ro.equalsOrNull(s.leftchar,a.leftchar)&&ro.equalsOrNull(s.rightchar,a.rightchar)&&ro.equalsOrNull(s.finderpattern,a.finderpattern):!1}static equalsOrNull(s,a){return s===null?a===null:ro.equals(s,a)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class kp{constructor(s,a,c){this.pairs=s,this.rowNumber=a,this.wasReversed=c}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(s){return this.checkEqualitity(this,s)}toString(){return"{ "+this.pairs+" }"}equals(s,a){return s instanceof kp?this.checkEqualitity(s,a)&&s.wasReversed===a.wasReversed:!1}checkEqualitity(s,a){if(!s||!a)return;let c;return s.forEach((u,d)=>{a.forEach(f=>{u.getLeftChar().getValue()===f.getLeftChar().getValue()&&u.getRightChar().getValue()===f.getRightChar().getValue()&&u.getFinderPatter().getValue()===f.getFinderPatter().getValue()&&(c=!0)})}),c}}class $ extends Go{constructor(s){super(...arguments),this.pairs=new Array($.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=s===!0}decodeRow(s,a,c){this.pairs.length=0,this.startFromEven=!1;try{return $.constructResult(this.decodeRow2pairs(s,a))}catch(u){this.verbose&&console.log(u)}return this.pairs.length=0,this.startFromEven=!0,$.constructResult(this.decodeRow2pairs(s,a))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(s,a){let c=!1;for(;!c;)try{this.pairs.push(this.retrieveNextPair(a,this.pairs,s))}catch(d){if(d instanceof H){if(!this.pairs.length)throw new H;c=!0}}if(this.checkChecksum())return this.pairs;let u;if(this.rows.length?u=!0:u=!1,this.storeRow(s,!1),u){let d=this.checkRowsBoolean(!1);if(d!=null||(d=this.checkRowsBoolean(!0),d!=null))return d}throw new H}checkRowsBoolean(s){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,s&&(this.rows=this.rows.reverse());let a=null;try{a=this.checkRows(new Array,0)}catch(c){this.verbose&&console.log(c)}return s&&(this.rows=this.rows.reverse()),a}checkRows(s,a){for(let c=a;c<this.rows.length;c++){let u=this.rows[c];this.pairs.length=0;for(let f of s)this.pairs.push(f.getPairs());if(this.pairs.push(u.getPairs()),!$.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let d=new Array(s);d.push(u);try{return this.checkRows(d,c+1)}catch(f){this.verbose&&console.log(f)}}throw new H}static isValidSequence(s){for(let a of $.FINDER_PATTERN_SEQUENCES){if(s.length>a.length)continue;let c=!0;for(let u=0;u<s.length;u++)if(s[u].getFinderPattern().getValue()!=a[u]){c=!1;break}if(c)return!0}return!1}storeRow(s,a){let c=0,u=!1,d=!1;for(;c<this.rows.length;){let f=this.rows[c];if(f.getRowNumber()>s){d=f.isEquivalent(this.pairs);break}u=f.isEquivalent(this.pairs),c++}d||u||$.isPartialRow(this.pairs,this.rows)||(this.rows.push(c,new kp(this.pairs,s,a)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(s,a){for(let c of a)if(c.getPairs().length!==s.length){for(let u of c.getPairs())for(let d of s)if(ro.equals(u,d))break}}static isPartialRow(s,a){for(let c of a){let u=!0;for(let d of s){let f=!1;for(let p of c.getPairs())if(d.equals(p)){f=!0;break}if(!f){u=!1;break}}if(u)return!0}return!1}getRows(){return this.rows}static constructResult(s){let a=XT.buildBitArray(s),u=LC(a).parseInformation(),d=s[0].getFinderPattern().getResultPoints(),f=s[s.length-1].getFinderPattern().getResultPoints(),p=[d[0],d[1],f[0],f[1]];return new Ln(u,null,null,p,we.RSS_EXPANDED,null)}checkChecksum(){let s=this.pairs.get(0),a=s.getLeftChar(),c=s.getRightChar();if(c==null)return!1;let u=c.getChecksumPortion(),d=2;for(let p=1;p<this.pairs.size();++p){let y=this.pairs.get(p);u+=y.getLeftChar().getChecksumPortion(),d++;let _=y.getRightChar();_!=null&&(u+=_.getChecksumPortion(),d++)}return u%=211,211*(d-4)+u==a.getValue()}static getNextSecondBar(s,a){let c;return s.get(a)?(c=s.getNextUnset(a),c=s.getNextSet(c)):(c=s.getNextSet(a),c=s.getNextUnset(c)),c}retrieveNextPair(s,a,c){let u=a.length%2==0;this.startFromEven&&(u=!u);let d,f=!0,p=-1;do this.findNextPair(s,a,p),d=this.parseFoundFinderPattern(s,c,u),d==null?p=$.getNextSecondBar(s,this.startEnd[0]):f=!1;while(f);let y=this.decodeDataCharacter(s,d,u,!0);if(!this.isEmptyPair(a)&&a[a.length-1].mustBeLast())throw new H;let _;try{_=this.decodeDataCharacter(s,d,u,!1)}catch(w){_=null,this.verbose&&console.log(w)}return new ro(y,_,d,!0)}isEmptyPair(s){return s.length===0}findNextPair(s,a,c){let u=this.getDecodeFinderCounters();u[0]=0,u[1]=0,u[2]=0,u[3]=0;let d=s.getSize(),f;c>=0?f=c:this.isEmptyPair(a)?f=0:f=a[a.length-1].getFinderPattern().getStartEnd()[1];let p=a.length%2!=0;this.startFromEven&&(p=!p);let y=!1;for(;f<d&&(y=!s.get(f),!!y);)f++;let _=0,w=f;for(let x=f;x<d;x++)if(s.get(x)!=y)u[_]++;else{if(_==3){if(p&&$.reverseCounters(u),$.isFinderPattern(u)){this.startEnd[0]=w,this.startEnd[1]=x;return}p&&$.reverseCounters(u),w+=u[0]+u[1],u[0]=u[2],u[1]=u[3],u[2]=0,u[3]=0,_--}else _++;u[_]=1,y=!y}throw new H}static reverseCounters(s){let a=s.length;for(let c=0;c<a/2;++c){let u=s[c];s[c]=s[a-c-1],s[a-c-1]=u}}parseFoundFinderPattern(s,a,c){let u,d,f;if(c){let _=this.startEnd[0]-1;for(;_>=0&&!s.get(_);)_--;_++,u=this.startEnd[0]-_,d=_,f=this.startEnd[1]}else d=this.startEnd[0],f=s.getNextUnset(this.startEnd[1]+1),u=f-this.startEnd[1];let p=this.getDecodeFinderCounters();T.arraycopy(p,0,p,1,p.length-1),p[0]=u;let y;try{y=this.parseFinderValue(p,$.FINDER_PATTERNS)}catch{return null}return new Tu(y,[d,f],d,f,a)}decodeDataCharacter(s,a,c,u){let d=this.getDataCharacterCounters();for(let St=0;St<d.length;St++)d[St]=0;if(u)$.recordPatternInReverse(s,a.getStartEnd()[0],d);else{$.recordPattern(s,a.getStartEnd()[1],d);for(let St=0,wn=d.length-1;St<wn;St++,wn--){let sr=d[St];d[St]=d[wn],d[wn]=sr}}let f=17,p=nt.sum(new Int32Array(d))/f,y=(a.getStartEnd()[1]-a.getStartEnd()[0])/15;if(Math.abs(p-y)/y>.3)throw new H;let _=this.getOddCounts(),w=this.getEvenCounts(),x=this.getOddRoundingErrors(),E=this.getEvenRoundingErrors();for(let St=0;St<d.length;St++){let wn=1*d[St]/p,sr=wn+.5;if(sr<1){if(wn<.3)throw new H;sr=1}else if(sr>8){if(wn>8.7)throw new H;sr=8}let Gs=St/2;St&1?(w[Gs]=sr,E[Gs]=wn-sr):(_[Gs]=sr,x[Gs]=wn-sr)}this.adjustOddEvenCounts(f);let D=4*a.getValue()+(c?0:2)+(u?0:1)-1,O=0,N=0;for(let St=_.length-1;St>=0;St--){if($.isNotA1left(a,c,u)){let wn=$.WEIGHTS[D][2*St];N+=_[St]*wn}O+=_[St]}let k=0;for(let St=w.length-1;St>=0;St--)if($.isNotA1left(a,c,u)){let wn=$.WEIGHTS[D][2*St+1];k+=w[St]*wn}let L=N+k;if(O&1||O>13||O<4)throw new H;let X=(13-O)/2,ie=$.SYMBOL_WIDEST[X],U=9-ie,Ge=ti.getRSSvalue(_,ie,!0),Re=ti.getRSSvalue(w,U,!1),Xn=$.EVEN_TOTAL_SUBSET[X],Ur=$.GSUM[X],Qn=Ge*Xn+Re+Ur;return new Us(Qn,L)}static isNotA1left(s,a,c){return!(s.getValue()==0&&a&&c)}adjustOddEvenCounts(s){let a=nt.sum(new Int32Array(this.getOddCounts())),c=nt.sum(new Int32Array(this.getEvenCounts())),u=!1,d=!1;a>13?d=!0:a<4&&(u=!0);let f=!1,p=!1;c>13?p=!0:c<4&&(f=!0);let y=a+c-s,_=(a&1)==1,w=(c&1)==0;if(y==1)if(_){if(w)throw new H;d=!0}else{if(!w)throw new H;p=!0}else if(y==-1)if(_){if(w)throw new H;u=!0}else{if(!w)throw new H;f=!0}else if(y==0){if(_){if(!w)throw new H;a<c?(u=!0,p=!0):(d=!0,f=!0)}else if(w)throw new H}else throw new H;if(u){if(d)throw new H;$.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(d&&$.decrement(this.getOddCounts(),this.getOddRoundingErrors()),f){if(p)throw new H;$.increment(this.getEvenCounts(),this.getOddRoundingErrors())}p&&$.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}$.SYMBOL_WIDEST=[7,5,4,3,1],$.EVEN_TOTAL_SUBSET=[4,20,52,104,204],$.GSUM=[0,348,1388,2948,3988],$.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],$.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],$.FINDER_PAT_A=0,$.FINDER_PAT_B=1,$.FINDER_PAT_C=2,$.FINDER_PAT_D=3,$.FINDER_PAT_E=4,$.FINDER_PAT_F=5,$.FINDER_PATTERN_SEQUENCES=[[$.FINDER_PAT_A,$.FINDER_PAT_A],[$.FINDER_PAT_A,$.FINDER_PAT_B,$.FINDER_PAT_B],[$.FINDER_PAT_A,$.FINDER_PAT_C,$.FINDER_PAT_B,$.FINDER_PAT_D],[$.FINDER_PAT_A,$.FINDER_PAT_E,$.FINDER_PAT_B,$.FINDER_PAT_D,$.FINDER_PAT_C],[$.FINDER_PAT_A,$.FINDER_PAT_E,$.FINDER_PAT_B,$.FINDER_PAT_D,$.FINDER_PAT_D,$.FINDER_PAT_F],[$.FINDER_PAT_A,$.FINDER_PAT_E,$.FINDER_PAT_B,$.FINDER_PAT_D,$.FINDER_PAT_E,$.FINDER_PAT_F,$.FINDER_PAT_F],[$.FINDER_PAT_A,$.FINDER_PAT_A,$.FINDER_PAT_B,$.FINDER_PAT_B,$.FINDER_PAT_C,$.FINDER_PAT_C,$.FINDER_PAT_D,$.FINDER_PAT_D],[$.FINDER_PAT_A,$.FINDER_PAT_A,$.FINDER_PAT_B,$.FINDER_PAT_B,$.FINDER_PAT_C,$.FINDER_PAT_C,$.FINDER_PAT_D,$.FINDER_PAT_E,$.FINDER_PAT_E],[$.FINDER_PAT_A,$.FINDER_PAT_A,$.FINDER_PAT_B,$.FINDER_PAT_B,$.FINDER_PAT_C,$.FINDER_PAT_C,$.FINDER_PAT_D,$.FINDER_PAT_E,$.FINDER_PAT_F,$.FINDER_PAT_F],[$.FINDER_PAT_A,$.FINDER_PAT_A,$.FINDER_PAT_B,$.FINDER_PAT_B,$.FINDER_PAT_C,$.FINDER_PAT_D,$.FINDER_PAT_D,$.FINDER_PAT_E,$.FINDER_PAT_E,$.FINDER_PAT_F,$.FINDER_PAT_F]],$.MAX_PAIRS=11;class rA extends Us{constructor(s,a,c){super(s,a),this.count=0,this.finderPattern=c}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class jt extends Go{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(s,a,c){let u=this.decodePair(a,!1,s,c);jt.addOrTally(this.possibleLeftPairs,u),a.reverse();let d=this.decodePair(a,!0,s,c);jt.addOrTally(this.possibleRightPairs,d),a.reverse();for(let f of this.possibleLeftPairs)if(f.getCount()>1){for(let p of this.possibleRightPairs)if(p.getCount()>1&&jt.checkChecksum(f,p))return jt.constructResult(f,p)}throw new H}static addOrTally(s,a){if(a==null)return;let c=!1;for(let u of s)if(u.getValue()===a.getValue()){u.incrementCount(),c=!0;break}c||s.push(a)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(s,a){let c=4537077*s.getValue()+a.getValue(),u=new String(c).toString(),d=new vt;for(let _=13-u.length;_>0;_--)d.append("0");d.append(u);let f=0;for(let _=0;_<13;_++){let w=d.charAt(_).charCodeAt(0)-48;f+=_&1?w:3*w}f=10-f%10,f===10&&(f=0),d.append(f.toString());let p=s.getFinderPattern().getResultPoints(),y=a.getFinderPattern().getResultPoints();return new Ln(d.toString(),null,0,[p[0],p[1],y[0],y[1]],we.RSS_14,new Date().getTime())}static checkChecksum(s,a){let c=(s.getChecksumPortion()+16*a.getChecksumPortion())%79,u=9*s.getFinderPattern().getValue()+a.getFinderPattern().getValue();return u>72&&u--,u>8&&u--,c===u}decodePair(s,a,c,u){try{let d=this.findFinderPattern(s,a),f=this.parseFoundFinderPattern(s,c,a,d),p=u==null?null:u.get(ye.NEED_RESULT_POINT_CALLBACK);if(p!=null){let w=(d[0]+d[1])/2;a&&(w=s.getSize()-1-w),p.foundPossibleResultPoint(new de(w,c))}let y=this.decodeDataCharacter(s,f,!0),_=this.decodeDataCharacter(s,f,!1);return new rA(1597*y.getValue()+_.getValue(),y.getChecksumPortion()+4*_.getChecksumPortion(),f)}catch{return null}}decodeDataCharacter(s,a,c){let u=this.getDataCharacterCounters();for(let k=0;k<u.length;k++)u[k]=0;if(c)Yt.recordPatternInReverse(s,a.getStartEnd()[0],u);else{Yt.recordPattern(s,a.getStartEnd()[1]+1,u);for(let k=0,L=u.length-1;k<L;k++,L--){let X=u[k];u[k]=u[L],u[L]=X}}let d=c?16:15,f=nt.sum(new Int32Array(u))/d,p=this.getOddCounts(),y=this.getEvenCounts(),_=this.getOddRoundingErrors(),w=this.getEvenRoundingErrors();for(let k=0;k<u.length;k++){let L=u[k]/f,X=Math.floor(L+.5);X<1?X=1:X>8&&(X=8);let ie=Math.floor(k/2);k&1?(y[ie]=X,w[ie]=L-X):(p[ie]=X,_[ie]=L-X)}this.adjustOddEvenCounts(c,d);let x=0,E=0;for(let k=p.length-1;k>=0;k--)E*=9,E+=p[k],x+=p[k];let D=0,O=0;for(let k=y.length-1;k>=0;k--)D*=9,D+=y[k],O+=y[k];let N=E+3*D;if(c){if(x&1||x>12||x<4)throw new H;let k=(12-x)/2,L=jt.OUTSIDE_ODD_WIDEST[k],X=9-L,ie=ti.getRSSvalue(p,L,!1),U=ti.getRSSvalue(y,X,!0),Ge=jt.OUTSIDE_EVEN_TOTAL_SUBSET[k],Re=jt.OUTSIDE_GSUM[k];return new Us(ie*Ge+U+Re,N)}else{if(O&1||O>10||O<4)throw new H;let k=(10-O)/2,L=jt.INSIDE_ODD_WIDEST[k],X=9-L,ie=ti.getRSSvalue(p,L,!0),U=ti.getRSSvalue(y,X,!1),Ge=jt.INSIDE_ODD_TOTAL_SUBSET[k],Re=jt.INSIDE_GSUM[k];return new Us(U*Ge+ie+Re,N)}}findFinderPattern(s,a){let c=this.getDecodeFinderCounters();c[0]=0,c[1]=0,c[2]=0,c[3]=0;let u=s.getSize(),d=!1,f=0;for(;f<u&&(d=!s.get(f),a!==d);)f++;let p=0,y=f;for(let _=f;_<u;_++)if(s.get(_)!==d)c[p]++;else{if(p===3){if(Go.isFinderPattern(c))return[y,_];y+=c[0]+c[1],c[0]=c[2],c[1]=c[3],c[2]=0,c[3]=0,p--}else p++;c[p]=1,d=!d}throw new H}parseFoundFinderPattern(s,a,c,u){let d=s.get(u[0]),f=u[0]-1;for(;f>=0&&d!==s.get(f);)f--;f++;let p=u[0]-f,y=this.getDecodeFinderCounters(),_=new Int32Array(y.length);T.arraycopy(y,0,_,1,y.length-1),_[0]=p;let w=this.parseFinderValue(_,jt.FINDER_PATTERNS),x=f,E=u[1];return c&&(x=s.getSize()-1-x,E=s.getSize()-1-E),new Tu(w,[f,u[1]],x,E,a)}adjustOddEvenCounts(s,a){let c=nt.sum(new Int32Array(this.getOddCounts())),u=nt.sum(new Int32Array(this.getEvenCounts())),d=!1,f=!1,p=!1,y=!1;s?(c>12?f=!0:c<4&&(d=!0),u>12?y=!0:u<4&&(p=!0)):(c>11?f=!0:c<5&&(d=!0),u>10?y=!0:u<4&&(p=!0));let _=c+u-a,w=(c&1)===(s?1:0),x=(u&1)===1;if(_===1)if(w){if(x)throw new H;f=!0}else{if(!x)throw new H;y=!0}else if(_===-1)if(w){if(x)throw new H;d=!0}else{if(!x)throw new H;p=!0}else if(_===0){if(w){if(!x)throw new H;c<u?(d=!0,y=!0):(f=!0,p=!0)}else if(x)throw new H}else throw new H;if(d){if(f)throw new H;Go.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(f&&Go.decrement(this.getOddCounts(),this.getOddRoundingErrors()),p){if(y)throw new H;Go.increment(this.getEvenCounts(),this.getOddRoundingErrors())}y&&Go.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}jt.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],jt.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],jt.OUTSIDE_GSUM=[0,161,961,2015,2715],jt.INSIDE_GSUM=[0,336,1036,1516],jt.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],jt.INSIDE_ODD_WIDEST=[2,4,6,8],jt.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Hs extends Yt{constructor(s,a){super(),this.readers=[],this.verbose=a===!0;let c=s?s.get(ye.POSSIBLE_FORMATS):null,u=s&&s.get(ye.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;c?((c.includes(we.EAN_13)||c.includes(we.UPC_A)||c.includes(we.EAN_8)||c.includes(we.UPC_E))&&this.readers.push(new Np(s)),c.includes(we.CODE_39)&&this.readers.push(new Ap(u)),c.includes(we.CODE_128)&&this.readers.push(new ne),c.includes(we.ITF)&&this.readers.push(new Et),c.includes(we.RSS_14)&&this.readers.push(new jt),c.includes(we.RSS_EXPANDED)&&this.readers.push(new $(this.verbose))):(this.readers.push(new Np(s)),this.readers.push(new Ap),this.readers.push(new Np(s)),this.readers.push(new ne),this.readers.push(new Et),this.readers.push(new jt),this.readers.push(new $(this.verbose)))}decodeRow(s,a,c){for(let u=0;u<this.readers.length;u++)try{return this.readers[u].decodeRow(s,a,c)}catch{}throw new H}reset(){this.readers.forEach(s=>s.reset())}}class iA extends Wo{constructor(s=500,a){super(new Hs(a),s,a)}}class pt{constructor(s,a,c){this.ecCodewords=s,this.ecBlocks=[a],c&&this.ecBlocks.push(c)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class ht{constructor(s,a){this.count=s,this.dataCodewords=a}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Je{constructor(s,a,c,u,d,f){this.versionNumber=s,this.symbolSizeRows=a,this.symbolSizeColumns=c,this.dataRegionSizeRows=u,this.dataRegionSizeColumns=d,this.ecBlocks=f;let p=0,y=f.getECCodewords(),_=f.getECBlocks();for(let w of _)p+=w.getCount()*(w.getDataCodewords()+y);this.totalCodewords=p}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(s,a){if(s&1||a&1)throw new G;for(let c of Je.VERSIONS)if(c.symbolSizeRows===s&&c.symbolSizeColumns===a)return c;throw new G}toString(){return""+this.versionNumber}static buildVersions(){return[new Je(1,10,10,8,8,new pt(5,new ht(1,3))),new Je(2,12,12,10,10,new pt(7,new ht(1,5))),new Je(3,14,14,12,12,new pt(10,new ht(1,8))),new Je(4,16,16,14,14,new pt(12,new ht(1,12))),new Je(5,18,18,16,16,new pt(14,new ht(1,18))),new Je(6,20,20,18,18,new pt(18,new ht(1,22))),new Je(7,22,22,20,20,new pt(20,new ht(1,30))),new Je(8,24,24,22,22,new pt(24,new ht(1,36))),new Je(9,26,26,24,24,new pt(28,new ht(1,44))),new Je(10,32,32,14,14,new pt(36,new ht(1,62))),new Je(11,36,36,16,16,new pt(42,new ht(1,86))),new Je(12,40,40,18,18,new pt(48,new ht(1,114))),new Je(13,44,44,20,20,new pt(56,new ht(1,144))),new Je(14,48,48,22,22,new pt(68,new ht(1,174))),new Je(15,52,52,24,24,new pt(42,new ht(2,102))),new Je(16,64,64,14,14,new pt(56,new ht(2,140))),new Je(17,72,72,16,16,new pt(36,new ht(4,92))),new Je(18,80,80,18,18,new pt(48,new ht(4,114))),new Je(19,88,88,20,20,new pt(56,new ht(4,144))),new Je(20,96,96,22,22,new pt(68,new ht(4,174))),new Je(21,104,104,24,24,new pt(56,new ht(6,136))),new Je(22,120,120,18,18,new pt(68,new ht(6,175))),new Je(23,132,132,20,20,new pt(62,new ht(8,163))),new Je(24,144,144,22,22,new pt(62,new ht(8,156),new ht(2,155))),new Je(25,8,18,6,16,new pt(7,new ht(1,5))),new Je(26,8,32,6,14,new pt(11,new ht(1,10))),new Je(27,12,26,10,24,new pt(14,new ht(1,16))),new Je(28,12,36,10,16,new pt(18,new ht(1,22))),new Je(29,16,36,14,16,new pt(24,new ht(1,32))),new Je(30,16,48,14,22,new pt(28,new ht(1,49)))]}}Je.VERSIONS=Je.buildVersions();class Fp{constructor(s){let a=s.getHeight();if(a<8||a>144||a&1)throw new G;this.version=Fp.readVersion(s),this.mappingBitMatrix=this.extractDataRegion(s),this.readMappingMatrix=new dn(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(s){let a=s.getHeight(),c=s.getWidth();return Je.getVersionForDimensions(a,c)}readCodewords(){let s=new Int8Array(this.version.getTotalCodewords()),a=0,c=4,u=0,d=this.mappingBitMatrix.getHeight(),f=this.mappingBitMatrix.getWidth(),p=!1,y=!1,_=!1,w=!1;do if(c===d&&u===0&&!p)s[a++]=this.readCorner1(d,f)&255,c-=2,u+=2,p=!0;else if(c===d-2&&u===0&&f&3&&!y)s[a++]=this.readCorner2(d,f)&255,c-=2,u+=2,y=!0;else if(c===d+4&&u===2&&!(f&7)&&!_)s[a++]=this.readCorner3(d,f)&255,c-=2,u+=2,_=!0;else if(c===d-2&&u===0&&(f&7)===4&&!w)s[a++]=this.readCorner4(d,f)&255,c-=2,u+=2,w=!0;else{do c<d&&u>=0&&!this.readMappingMatrix.get(u,c)&&(s[a++]=this.readUtah(c,u,d,f)&255),c-=2,u+=2;while(c>=0&&u<f);c+=1,u+=3;do c>=0&&u<f&&!this.readMappingMatrix.get(u,c)&&(s[a++]=this.readUtah(c,u,d,f)&255),c+=2,u-=2;while(c<d&&u>=0);c+=3,u+=1}while(c<d||u<f);if(a!==this.version.getTotalCodewords())throw new G;return s}readModule(s,a,c,u){return s<0&&(s+=c,a+=4-(c+4&7)),a<0&&(a+=u,s+=4-(u+4&7)),this.readMappingMatrix.set(a,s),this.mappingBitMatrix.get(a,s)}readUtah(s,a,c,u){let d=0;return this.readModule(s-2,a-2,c,u)&&(d|=1),d<<=1,this.readModule(s-2,a-1,c,u)&&(d|=1),d<<=1,this.readModule(s-1,a-2,c,u)&&(d|=1),d<<=1,this.readModule(s-1,a-1,c,u)&&(d|=1),d<<=1,this.readModule(s-1,a,c,u)&&(d|=1),d<<=1,this.readModule(s,a-2,c,u)&&(d|=1),d<<=1,this.readModule(s,a-1,c,u)&&(d|=1),d<<=1,this.readModule(s,a,c,u)&&(d|=1),d}readCorner1(s,a){let c=0;return this.readModule(s-1,0,s,a)&&(c|=1),c<<=1,this.readModule(s-1,1,s,a)&&(c|=1),c<<=1,this.readModule(s-1,2,s,a)&&(c|=1),c<<=1,this.readModule(0,a-2,s,a)&&(c|=1),c<<=1,this.readModule(0,a-1,s,a)&&(c|=1),c<<=1,this.readModule(1,a-1,s,a)&&(c|=1),c<<=1,this.readModule(2,a-1,s,a)&&(c|=1),c<<=1,this.readModule(3,a-1,s,a)&&(c|=1),c}readCorner2(s,a){let c=0;return this.readModule(s-3,0,s,a)&&(c|=1),c<<=1,this.readModule(s-2,0,s,a)&&(c|=1),c<<=1,this.readModule(s-1,0,s,a)&&(c|=1),c<<=1,this.readModule(0,a-4,s,a)&&(c|=1),c<<=1,this.readModule(0,a-3,s,a)&&(c|=1),c<<=1,this.readModule(0,a-2,s,a)&&(c|=1),c<<=1,this.readModule(0,a-1,s,a)&&(c|=1),c<<=1,this.readModule(1,a-1,s,a)&&(c|=1),c}readCorner3(s,a){let c=0;return this.readModule(s-1,0,s,a)&&(c|=1),c<<=1,this.readModule(s-1,a-1,s,a)&&(c|=1),c<<=1,this.readModule(0,a-3,s,a)&&(c|=1),c<<=1,this.readModule(0,a-2,s,a)&&(c|=1),c<<=1,this.readModule(0,a-1,s,a)&&(c|=1),c<<=1,this.readModule(1,a-3,s,a)&&(c|=1),c<<=1,this.readModule(1,a-2,s,a)&&(c|=1),c<<=1,this.readModule(1,a-1,s,a)&&(c|=1),c}readCorner4(s,a){let c=0;return this.readModule(s-3,0,s,a)&&(c|=1),c<<=1,this.readModule(s-2,0,s,a)&&(c|=1),c<<=1,this.readModule(s-1,0,s,a)&&(c|=1),c<<=1,this.readModule(0,a-2,s,a)&&(c|=1),c<<=1,this.readModule(0,a-1,s,a)&&(c|=1),c<<=1,this.readModule(1,a-1,s,a)&&(c|=1),c<<=1,this.readModule(2,a-1,s,a)&&(c|=1),c<<=1,this.readModule(3,a-1,s,a)&&(c|=1),c}extractDataRegion(s){let a=this.version.getSymbolSizeRows(),c=this.version.getSymbolSizeColumns();if(s.getHeight()!==a)throw new m("Dimension of bitMatrix must match the version size");let u=this.version.getDataRegionSizeRows(),d=this.version.getDataRegionSizeColumns(),f=a/u|0,p=c/d|0,y=f*u,_=p*d,w=new dn(_,y);for(let x=0;x<f;++x){let E=x*u;for(let D=0;D<p;++D){let O=D*d;for(let N=0;N<u;++N){let k=x*(u+2)+1+N,L=E+N;for(let X=0;X<d;++X){let ie=D*(d+2)+1+X;if(s.get(ie,k)){let U=O+X;w.set(U,L)}}}}}return w}}class Lp{constructor(s,a){this.numDataCodewords=s,this.codewords=a}static getDataBlocks(s,a){let c=a.getECBlocks(),u=0,d=c.getECBlocks();for(let N of d)u+=N.getCount();let f=new Array(u),p=0;for(let N of d)for(let k=0;k<N.getCount();k++){let L=N.getDataCodewords(),X=c.getECCodewords()+L;f[p++]=new Lp(L,new Uint8Array(X))}let _=f[0].codewords.length-c.getECCodewords(),w=_-1,x=0;for(let N=0;N<w;N++)for(let k=0;k<p;k++)f[k].codewords[N]=s[x++];let E=a.getVersionNumber()===24,D=E?8:p;for(let N=0;N<D;N++)f[N].codewords[_-1]=s[x++];let O=f[0].codewords.length;for(let N=_;N<O;N++)for(let k=0;k<p;k++){let L=E?(k+8)%p:k,X=E&&L>7?N-1:N;f[L].codewords[X]=s[x++]}if(x!==s.length)throw new m;return f}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class Bp{constructor(s){this.bytes=s,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(s){if(s<1||s>32||s>this.available())throw new m(""+s);let a=0,c=this.bitOffset,u=this.byteOffset,d=this.bytes;if(c>0){let f=8-c,p=s<f?s:f,y=f-p,_=255>>8-p<<y;a=(d[u]&_)>>y,s-=p,c+=p,c===8&&(c=0,u++)}if(s>0){for(;s>=8;)a=a<<8|d[u]&255,u++,s-=8;if(s>0){let f=8-s,p=255>>f<<f;a=a<<s|(d[u]&p)>>f,c+=s}}return this.bitOffset=c,this.byteOffset=u,a}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var pn=function(C){return C[C.PAD_ENCODE=0]="PAD_ENCODE",C[C.ASCII_ENCODE=1]="ASCII_ENCODE",C[C.C40_ENCODE=2]="C40_ENCODE",C[C.TEXT_ENCODE=3]="TEXT_ENCODE",C[C.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",C[C.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",C[C.BASE256_ENCODE=6]="BASE256_ENCODE",C}(pn||{});class io{static decode(s){let a=new Bp(s),c=new vt,u=new vt,d=new Array,f=pn.ASCII_ENCODE;do if(f===pn.ASCII_ENCODE)f=this.decodeAsciiSegment(a,c,u);else{switch(f){case pn.C40_ENCODE:this.decodeC40Segment(a,c);break;case pn.TEXT_ENCODE:this.decodeTextSegment(a,c);break;case pn.ANSIX12_ENCODE:this.decodeAnsiX12Segment(a,c);break;case pn.EDIFACT_ENCODE:this.decodeEdifactSegment(a,c);break;case pn.BASE256_ENCODE:this.decodeBase256Segment(a,c,d);break;default:throw new G}f=pn.ASCII_ENCODE}while(f!==pn.PAD_ENCODE&&a.available()>0);return u.length()>0&&c.append(u.toString()),new hl(s,c.toString(),d.length===0?null:d,null)}static decodeAsciiSegment(s,a,c){let u=!1;do{let d=s.readBits(8);if(d===0)throw new G;if(d<=128)return u&&(d+=128),a.append(String.fromCharCode(d-1)),pn.ASCII_ENCODE;if(d===129)return pn.PAD_ENCODE;if(d<=229){let f=d-130;f<10&&a.append("0"),a.append(""+f)}else switch(d){case 230:return pn.C40_ENCODE;case 231:return pn.BASE256_ENCODE;case 232:a.append("");break;case 233:case 234:break;case 235:u=!0;break;case 236:a.append("[)>05"),c.insert(0,"");break;case 237:a.append("[)>06"),c.insert(0,"");break;case 238:return pn.ANSIX12_ENCODE;case 239:return pn.TEXT_ENCODE;case 240:return pn.EDIFACT_ENCODE;case 241:break;default:if(d!==254||s.available()!==0)throw new G;break}}while(s.available()>0);return pn.ASCII_ENCODE}static decodeC40Segment(s,a){let c=!1,u=[],d=0;do{if(s.available()===8)return;let f=s.readBits(8);if(f===254)return;this.parseTwoBytes(f,s.readBits(8),u);for(let p=0;p<3;p++){let y=u[p];switch(d){case 0:if(y<3)d=y+1;else if(y<this.C40_BASIC_SET_CHARS.length){let _=this.C40_BASIC_SET_CHARS[y];c?(a.append(String.fromCharCode(_.charCodeAt(0)+128)),c=!1):a.append(_)}else throw new G;break;case 1:c?(a.append(String.fromCharCode(y+128)),c=!1):a.append(String.fromCharCode(y)),d=0;break;case 2:if(y<this.C40_SHIFT2_SET_CHARS.length){let _=this.C40_SHIFT2_SET_CHARS[y];c?(a.append(String.fromCharCode(_.charCodeAt(0)+128)),c=!1):a.append(_)}else switch(y){case 27:a.append("");break;case 30:c=!0;break;default:throw new G}d=0;break;case 3:c?(a.append(String.fromCharCode(y+224)),c=!1):a.append(String.fromCharCode(y+96)),d=0;break;default:throw new G}}}while(s.available()>0)}static decodeTextSegment(s,a){let c=!1,u=[],d=0;do{if(s.available()===8)return;let f=s.readBits(8);if(f===254)return;this.parseTwoBytes(f,s.readBits(8),u);for(let p=0;p<3;p++){let y=u[p];switch(d){case 0:if(y<3)d=y+1;else if(y<this.TEXT_BASIC_SET_CHARS.length){let _=this.TEXT_BASIC_SET_CHARS[y];c?(a.append(String.fromCharCode(_.charCodeAt(0)+128)),c=!1):a.append(_)}else throw new G;break;case 1:c?(a.append(String.fromCharCode(y+128)),c=!1):a.append(String.fromCharCode(y)),d=0;break;case 2:if(y<this.TEXT_SHIFT2_SET_CHARS.length){let _=this.TEXT_SHIFT2_SET_CHARS[y];c?(a.append(String.fromCharCode(_.charCodeAt(0)+128)),c=!1):a.append(_)}else switch(y){case 27:a.append("");break;case 30:c=!0;break;default:throw new G}d=0;break;case 3:if(y<this.TEXT_SHIFT3_SET_CHARS.length){let _=this.TEXT_SHIFT3_SET_CHARS[y];c?(a.append(String.fromCharCode(_.charCodeAt(0)+128)),c=!1):a.append(_),d=0}else throw new G;break;default:throw new G}}}while(s.available()>0)}static decodeAnsiX12Segment(s,a){let c=[];do{if(s.available()===8)return;let u=s.readBits(8);if(u===254)return;this.parseTwoBytes(u,s.readBits(8),c);for(let d=0;d<3;d++){let f=c[d];switch(f){case 0:a.append("\r");break;case 1:a.append("*");break;case 2:a.append(">");break;case 3:a.append(" ");break;default:if(f<14)a.append(String.fromCharCode(f+44));else if(f<40)a.append(String.fromCharCode(f+51));else throw new G;break}}}while(s.available()>0)}static parseTwoBytes(s,a,c){let u=(s<<8)+a-1,d=Math.floor(u/1600);c[0]=d,u-=d*1600,d=Math.floor(u/40),c[1]=d,c[2]=u-d*40}static decodeEdifactSegment(s,a){do{if(s.available()<=16)return;for(let c=0;c<4;c++){let u=s.readBits(6);if(u===31){let d=8-s.getBitOffset();d!==8&&s.readBits(d);return}u&32||(u|=64),a.append(String.fromCharCode(u))}}while(s.available()>0)}static decodeBase256Segment(s,a,c){let u=1+s.getByteOffset(),d=this.unrandomize255State(s.readBits(8),u++),f;if(d===0?f=s.available()/8|0:d<250?f=d:f=250*(d-249)+this.unrandomize255State(s.readBits(8),u++),f<0)throw new G;let p=new Uint8Array(f);for(let y=0;y<f;y++){if(s.available()<8)throw new G;p[y]=this.unrandomize255State(s.readBits(8),u++)}c.push(p);try{a.append(Tn.decode(p,Me.ISO88591))}catch(y){throw new Ei("Platform does not support required encoding: "+y.message)}}static unrandomize255State(s,a){let c=149*a%255+1,u=s-c;return u>=0?u:u+256}}io.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],io.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],io.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],io.TEXT_SHIFT2_SET_CHARS=io.C40_SHIFT2_SET_CHARS,io.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~","\x7F"];class oA{constructor(){this.rsDecoder=new ml(dt.DATA_MATRIX_FIELD_256)}decode(s){let a=new Fp(s),c=a.getVersion(),u=a.readCodewords(),d=Lp.getDataBlocks(u,c),f=0;for(let _ of d)f+=_.getNumDataCodewords();let p=new Uint8Array(f),y=d.length;for(let _=0;_<y;_++){let w=d[_],x=w.getCodewords(),E=w.getNumDataCodewords();this.correctErrors(x,E);for(let D=0;D<E;D++)p[D*y+_]=x[D]}return io.decode(p)}correctErrors(s,a){let c=new Int32Array(s);try{this.rsDecoder.decode(c,s.length-a)}catch{throw new b}for(let u=0;u<a;u++)s[u]=c[u]}}class qt{constructor(s){this.image=s,this.rectangleDetector=new Su(this.image)}detect(){let s=this.rectangleDetector.detect(),a=this.detectSolid1(s);if(a=this.detectSolid2(a),a[3]=this.correctTopRight(a),!a[3])throw new H;a=this.shiftToModuleCenter(a);let c=a[0],u=a[1],d=a[2],f=a[3],p=this.transitionsBetween(c,f)+1,y=this.transitionsBetween(d,f)+1;(p&1)===1&&(p+=1),(y&1)===1&&(y+=1),4*p<7*y&&4*y<7*p&&(p=y=Math.max(p,y));let _=qt.sampleGrid(this.image,c,u,d,f,p,y);return new Iu(_,[c,u,d,f])}static shiftPoint(s,a,c){let u=(a.getX()-s.getX())/(c+1),d=(a.getY()-s.getY())/(c+1);return new de(s.getX()+u,s.getY()+d)}static moveAway(s,a,c){let u=s.getX(),d=s.getY();return u<a?u-=1:u+=1,d<c?d-=1:d+=1,new de(u,d)}detectSolid1(s){let a=s[0],c=s[1],u=s[3],d=s[2],f=this.transitionsBetween(a,c),p=this.transitionsBetween(c,u),y=this.transitionsBetween(u,d),_=this.transitionsBetween(d,a),w=f,x=[d,a,c,u];return w>p&&(w=p,x[0]=a,x[1]=c,x[2]=u,x[3]=d),w>y&&(w=y,x[0]=c,x[1]=u,x[2]=d,x[3]=a),w>_&&(x[0]=u,x[1]=d,x[2]=a,x[3]=c),x}detectSolid2(s){let a=s[0],c=s[1],u=s[2],d=s[3],f=this.transitionsBetween(a,d),p=qt.shiftPoint(c,u,(f+1)*4),y=qt.shiftPoint(u,c,(f+1)*4),_=this.transitionsBetween(p,a),w=this.transitionsBetween(y,d);return _<w?(s[0]=a,s[1]=c,s[2]=u,s[3]=d):(s[0]=c,s[1]=u,s[2]=d,s[3]=a),s}correctTopRight(s){let a=s[0],c=s[1],u=s[2],d=s[3],f=this.transitionsBetween(a,d),p=this.transitionsBetween(c,d),y=qt.shiftPoint(a,c,(p+1)*4),_=qt.shiftPoint(u,c,(f+1)*4);f=this.transitionsBetween(y,d),p=this.transitionsBetween(_,d);let w=new de(d.getX()+(u.getX()-c.getX())/(f+1),d.getY()+(u.getY()-c.getY())/(f+1)),x=new de(d.getX()+(a.getX()-c.getX())/(p+1),d.getY()+(a.getY()-c.getY())/(p+1));if(!this.isValid(w))return this.isValid(x)?x:null;if(!this.isValid(x))return w;let E=this.transitionsBetween(y,w)+this.transitionsBetween(_,w),D=this.transitionsBetween(y,x)+this.transitionsBetween(_,x);return E>D?w:x}shiftToModuleCenter(s){let a=s[0],c=s[1],u=s[2],d=s[3],f=this.transitionsBetween(a,d)+1,p=this.transitionsBetween(u,d)+1,y=qt.shiftPoint(a,c,p*4),_=qt.shiftPoint(u,c,f*4);f=this.transitionsBetween(y,d)+1,p=this.transitionsBetween(_,d)+1,(f&1)===1&&(f+=1),(p&1)===1&&(p+=1);let w=(a.getX()+c.getX()+u.getX()+d.getX())/4,x=(a.getY()+c.getY()+u.getY()+d.getY())/4;a=qt.moveAway(a,w,x),c=qt.moveAway(c,w,x),u=qt.moveAway(u,w,x),d=qt.moveAway(d,w,x);let E,D;return y=qt.shiftPoint(a,c,p*4),y=qt.shiftPoint(y,d,f*4),E=qt.shiftPoint(c,a,p*4),E=qt.shiftPoint(E,u,f*4),_=qt.shiftPoint(u,d,p*4),_=qt.shiftPoint(_,c,f*4),D=qt.shiftPoint(d,u,p*4),D=qt.shiftPoint(D,a,f*4),[y,E,_,D]}isValid(s){return s.getX()>=0&&s.getX()<this.image.getWidth()&&s.getY()>0&&s.getY()<this.image.getHeight()}static sampleGrid(s,a,c,u,d,f,p){return to.getInstance().sampleGrid(s,f,p,.5,.5,f-.5,.5,f-.5,p-.5,.5,p-.5,a.getX(),a.getY(),d.getX(),d.getY(),u.getX(),u.getY(),c.getX(),c.getY())}transitionsBetween(s,a){let c=Math.trunc(s.getX()),u=Math.trunc(s.getY()),d=Math.trunc(a.getX()),f=Math.trunc(a.getY()),p=Math.abs(f-u)>Math.abs(d-c);if(p){let N=c;c=u,u=N,N=d,d=f,f=N}let y=Math.abs(d-c),_=Math.abs(f-u),w=-y/2,x=u<f?1:-1,E=c<d?1:-1,D=0,O=this.image.get(p?u:c,p?c:u);for(let N=c,k=u;N!==d;N+=E){let L=this.image.get(p?k:N,p?N:k);if(L!==O&&(D++,O=L),w+=_,w>0){if(k===f)break;k+=x,w-=y}}return D}}let Ou=(()=>{class C{constructor(){this.decoder=new oA}decode(a,c=null){let u,d;if(c!=null&&c.has(ye.PURE_BARCODE)){let w=C.extractPureBits(a.getBlackMatrix());u=this.decoder.decode(w),d=C.NO_POINTS}else{let w=new qt(a.getBlackMatrix()).detect();u=this.decoder.decode(w.getBits()),d=w.getPoints()}let f=u.getRawBytes(),p=new Ln(u.getText(),f,8*f.length,d,we.DATA_MATRIX,T.currentTimeMillis()),y=u.getByteSegments();y!=null&&p.putMetadata(hn.BYTE_SEGMENTS,y);let _=u.getECLevel();return _!=null&&p.putMetadata(hn.ERROR_CORRECTION_LEVEL,_),p}reset(){}static extractPureBits(a){let c=a.getTopLeftOnBit(),u=a.getBottomRightOnBit();if(c==null||u==null)throw new H;let d=this.moduleSize(c,a),f=c[1],p=u[1],y=c[0],w=(u[0]-y+1)/d,x=(p-f+1)/d;if(w<=0||x<=0)throw new H;let E=d/2;f+=E,y+=E;let D=new dn(w,x);for(let O=0;O<x;O++){let N=f+O*d;for(let k=0;k<w;k++)a.get(y+k*d,N)&&D.set(k,O)}return D}static moduleSize(a,c){let u=c.getWidth(),d=a[0],f=a[1];for(;d<u&&c.get(d,f);)d++;if(d===u)throw new H;let p=d-a[0];if(p===0)throw new H;return p}}return C.NO_POINTS=[],C})();class sA extends Wo{constructor(s=500){super(new Ou,s)}}var _l=function(C){return C[C.L=0]="L",C[C.M=1]="M",C[C.Q=2]="Q",C[C.H=3]="H",C}(_l||{});class At{constructor(s,a,c){this.value=s,this.stringValue=a,this.bits=c,At.FOR_BITS.set(c,this),At.FOR_VALUE.set(s,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(s){switch(s){case"L":return At.L;case"M":return At.M;case"Q":return At.Q;case"H":return At.H;default:throw new g(s+"not available")}}toString(){return this.stringValue}equals(s){if(!(s instanceof At))return!1;let a=s;return this.value===a.value}static forBits(s){if(s<0||s>=At.FOR_BITS.size)throw new m;return At.FOR_BITS.get(s)}}At.FOR_BITS=new Map,At.FOR_VALUE=new Map,At.L=new At(_l.L,"L",1),At.M=new At(_l.M,"M",0),At.Q=new At(_l.Q,"Q",3),At.H=new At(_l.H,"H",2);class On{constructor(s){this.errorCorrectionLevel=At.forBits(s>>3&3),this.dataMask=s&7}static numBitsDiffering(s,a){return q.bitCount(s^a)}static decodeFormatInformation(s,a){let c=On.doDecodeFormatInformation(s,a);return c!==null?c:On.doDecodeFormatInformation(s^On.FORMAT_INFO_MASK_QR,a^On.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(s,a){let c=Number.MAX_SAFE_INTEGER,u=0;for(let d of On.FORMAT_INFO_DECODE_LOOKUP){let f=d[0];if(f===s||f===a)return new On(d[1]);let p=On.numBitsDiffering(s,f);p<c&&(u=d[1],c=p),s!==a&&(p=On.numBitsDiffering(a,f),p<c&&(u=d[1],c=p))}return c<=3?new On(u):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(s){if(!(s instanceof On))return!1;let a=s;return this.errorCorrectionLevel===a.errorCorrectionLevel&&this.dataMask===a.dataMask}}On.FORMAT_INFO_MASK_QR=21522,On.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class F{constructor(s,...a){this.ecCodewordsPerBlock=s,this.ecBlocks=a}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let s=0,a=this.ecBlocks;for(let c of a)s+=c.getCount();return s}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class S{constructor(s,a){this.count=s,this.dataCodewords=a}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class me{constructor(s,a,...c){this.versionNumber=s,this.alignmentPatternCenters=a,this.ecBlocks=c;let u=0,d=c[0].getECCodewordsPerBlock(),f=c[0].getECBlocks();for(let p of f)u+=p.getCount()*(p.getDataCodewords()+d);this.totalCodewords=u}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(s){return this.ecBlocks[s.getValue()]}static getProvisionalVersionForDimension(s){if(s%4!==1)throw new G;try{return this.getVersionForNumber((s-17)/4)}catch{throw new G}}static getVersionForNumber(s){if(s<1||s>40)throw new m;return me.VERSIONS[s-1]}static decodeVersionInformation(s){let a=Number.MAX_SAFE_INTEGER,c=0;for(let u=0;u<me.VERSION_DECODE_INFO.length;u++){let d=me.VERSION_DECODE_INFO[u];if(d===s)return me.getVersionForNumber(u+7);let f=On.numBitsDiffering(s,d);f<a&&(c=u+7,a=f)}return a<=3?me.getVersionForNumber(c):null}buildFunctionPattern(){let s=this.getDimensionForVersion(),a=new dn(s);a.setRegion(0,0,9,9),a.setRegion(s-8,0,8,9),a.setRegion(0,s-8,9,8);let c=this.alignmentPatternCenters.length;for(let u=0;u<c;u++){let d=this.alignmentPatternCenters[u]-2;for(let f=0;f<c;f++)u===0&&(f===0||f===c-1)||u===c-1&&f===0||a.setRegion(this.alignmentPatternCenters[f]-2,d,5,5)}return a.setRegion(6,9,1,s-17),a.setRegion(9,6,s-17,1),this.versionNumber>6&&(a.setRegion(s-11,0,3,6),a.setRegion(0,s-11,6,3)),a}toString(){return""+this.versionNumber}}me.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),me.VERSIONS=[new me(1,new Int32Array(0),new F(7,new S(1,19)),new F(10,new S(1,16)),new F(13,new S(1,13)),new F(17,new S(1,9))),new me(2,Int32Array.from([6,18]),new F(10,new S(1,34)),new F(16,new S(1,28)),new F(22,new S(1,22)),new F(28,new S(1,16))),new me(3,Int32Array.from([6,22]),new F(15,new S(1,55)),new F(26,new S(1,44)),new F(18,new S(2,17)),new F(22,new S(2,13))),new me(4,Int32Array.from([6,26]),new F(20,new S(1,80)),new F(18,new S(2,32)),new F(26,new S(2,24)),new F(16,new S(4,9))),new me(5,Int32Array.from([6,30]),new F(26,new S(1,108)),new F(24,new S(2,43)),new F(18,new S(2,15),new S(2,16)),new F(22,new S(2,11),new S(2,12))),new me(6,Int32Array.from([6,34]),new F(18,new S(2,68)),new F(16,new S(4,27)),new F(24,new S(4,19)),new F(28,new S(4,15))),new me(7,Int32Array.from([6,22,38]),new F(20,new S(2,78)),new F(18,new S(4,31)),new F(18,new S(2,14),new S(4,15)),new F(26,new S(4,13),new S(1,14))),new me(8,Int32Array.from([6,24,42]),new F(24,new S(2,97)),new F(22,new S(2,38),new S(2,39)),new F(22,new S(4,18),new S(2,19)),new F(26,new S(4,14),new S(2,15))),new me(9,Int32Array.from([6,26,46]),new F(30,new S(2,116)),new F(22,new S(3,36),new S(2,37)),new F(20,new S(4,16),new S(4,17)),new F(24,new S(4,12),new S(4,13))),new me(10,Int32Array.from([6,28,50]),new F(18,new S(2,68),new S(2,69)),new F(26,new S(4,43),new S(1,44)),new F(24,new S(6,19),new S(2,20)),new F(28,new S(6,15),new S(2,16))),new me(11,Int32Array.from([6,30,54]),new F(20,new S(4,81)),new F(30,new S(1,50),new S(4,51)),new F(28,new S(4,22),new S(4,23)),new F(24,new S(3,12),new S(8,13))),new me(12,Int32Array.from([6,32,58]),new F(24,new S(2,92),new S(2,93)),new F(22,new S(6,36),new S(2,37)),new F(26,new S(4,20),new S(6,21)),new F(28,new S(7,14),new S(4,15))),new me(13,Int32Array.from([6,34,62]),new F(26,new S(4,107)),new F(22,new S(8,37),new S(1,38)),new F(24,new S(8,20),new S(4,21)),new F(22,new S(12,11),new S(4,12))),new me(14,Int32Array.from([6,26,46,66]),new F(30,new S(3,115),new S(1,116)),new F(24,new S(4,40),new S(5,41)),new F(20,new S(11,16),new S(5,17)),new F(24,new S(11,12),new S(5,13))),new me(15,Int32Array.from([6,26,48,70]),new F(22,new S(5,87),new S(1,88)),new F(24,new S(5,41),new S(5,42)),new F(30,new S(5,24),new S(7,25)),new F(24,new S(11,12),new S(7,13))),new me(16,Int32Array.from([6,26,50,74]),new F(24,new S(5,98),new S(1,99)),new F(28,new S(7,45),new S(3,46)),new F(24,new S(15,19),new S(2,20)),new F(30,new S(3,15),new S(13,16))),new me(17,Int32Array.from([6,30,54,78]),new F(28,new S(1,107),new S(5,108)),new F(28,new S(10,46),new S(1,47)),new F(28,new S(1,22),new S(15,23)),new F(28,new S(2,14),new S(17,15))),new me(18,Int32Array.from([6,30,56,82]),new F(30,new S(5,120),new S(1,121)),new F(26,new S(9,43),new S(4,44)),new F(28,new S(17,22),new S(1,23)),new F(28,new S(2,14),new S(19,15))),new me(19,Int32Array.from([6,30,58,86]),new F(28,new S(3,113),new S(4,114)),new F(26,new S(3,44),new S(11,45)),new F(26,new S(17,21),new S(4,22)),new F(26,new S(9,13),new S(16,14))),new me(20,Int32Array.from([6,34,62,90]),new F(28,new S(3,107),new S(5,108)),new F(26,new S(3,41),new S(13,42)),new F(30,new S(15,24),new S(5,25)),new F(28,new S(15,15),new S(10,16))),new me(21,Int32Array.from([6,28,50,72,94]),new F(28,new S(4,116),new S(4,117)),new F(26,new S(17,42)),new F(28,new S(17,22),new S(6,23)),new F(30,new S(19,16),new S(6,17))),new me(22,Int32Array.from([6,26,50,74,98]),new F(28,new S(2,111),new S(7,112)),new F(28,new S(17,46)),new F(30,new S(7,24),new S(16,25)),new F(24,new S(34,13))),new me(23,Int32Array.from([6,30,54,78,102]),new F(30,new S(4,121),new S(5,122)),new F(28,new S(4,47),new S(14,48)),new F(30,new S(11,24),new S(14,25)),new F(30,new S(16,15),new S(14,16))),new me(24,Int32Array.from([6,28,54,80,106]),new F(30,new S(6,117),new S(4,118)),new F(28,new S(6,45),new S(14,46)),new F(30,new S(11,24),new S(16,25)),new F(30,new S(30,16),new S(2,17))),new me(25,Int32Array.from([6,32,58,84,110]),new F(26,new S(8,106),new S(4,107)),new F(28,new S(8,47),new S(13,48)),new F(30,new S(7,24),new S(22,25)),new F(30,new S(22,15),new S(13,16))),new me(26,Int32Array.from([6,30,58,86,114]),new F(28,new S(10,114),new S(2,115)),new F(28,new S(19,46),new S(4,47)),new F(28,new S(28,22),new S(6,23)),new F(30,new S(33,16),new S(4,17))),new me(27,Int32Array.from([6,34,62,90,118]),new F(30,new S(8,122),new S(4,123)),new F(28,new S(22,45),new S(3,46)),new F(30,new S(8,23),new S(26,24)),new F(30,new S(12,15),new S(28,16))),new me(28,Int32Array.from([6,26,50,74,98,122]),new F(30,new S(3,117),new S(10,118)),new F(28,new S(3,45),new S(23,46)),new F(30,new S(4,24),new S(31,25)),new F(30,new S(11,15),new S(31,16))),new me(29,Int32Array.from([6,30,54,78,102,126]),new F(30,new S(7,116),new S(7,117)),new F(28,new S(21,45),new S(7,46)),new F(30,new S(1,23),new S(37,24)),new F(30,new S(19,15),new S(26,16))),new me(30,Int32Array.from([6,26,52,78,104,130]),new F(30,new S(5,115),new S(10,116)),new F(28,new S(19,47),new S(10,48)),new F(30,new S(15,24),new S(25,25)),new F(30,new S(23,15),new S(25,16))),new me(31,Int32Array.from([6,30,56,82,108,134]),new F(30,new S(13,115),new S(3,116)),new F(28,new S(2,46),new S(29,47)),new F(30,new S(42,24),new S(1,25)),new F(30,new S(23,15),new S(28,16))),new me(32,Int32Array.from([6,34,60,86,112,138]),new F(30,new S(17,115)),new F(28,new S(10,46),new S(23,47)),new F(30,new S(10,24),new S(35,25)),new F(30,new S(19,15),new S(35,16))),new me(33,Int32Array.from([6,30,58,86,114,142]),new F(30,new S(17,115),new S(1,116)),new F(28,new S(14,46),new S(21,47)),new F(30,new S(29,24),new S(19,25)),new F(30,new S(11,15),new S(46,16))),new me(34,Int32Array.from([6,34,62,90,118,146]),new F(30,new S(13,115),new S(6,116)),new F(28,new S(14,46),new S(23,47)),new F(30,new S(44,24),new S(7,25)),new F(30,new S(59,16),new S(1,17))),new me(35,Int32Array.from([6,30,54,78,102,126,150]),new F(30,new S(12,121),new S(7,122)),new F(28,new S(12,47),new S(26,48)),new F(30,new S(39,24),new S(14,25)),new F(30,new S(22,15),new S(41,16))),new me(36,Int32Array.from([6,24,50,76,102,128,154]),new F(30,new S(6,121),new S(14,122)),new F(28,new S(6,47),new S(34,48)),new F(30,new S(46,24),new S(10,25)),new F(30,new S(2,15),new S(64,16))),new me(37,Int32Array.from([6,28,54,80,106,132,158]),new F(30,new S(17,122),new S(4,123)),new F(28,new S(29,46),new S(14,47)),new F(30,new S(49,24),new S(10,25)),new F(30,new S(24,15),new S(46,16))),new me(38,Int32Array.from([6,32,58,84,110,136,162]),new F(30,new S(4,122),new S(18,123)),new F(28,new S(13,46),new S(32,47)),new F(30,new S(48,24),new S(14,25)),new F(30,new S(42,15),new S(32,16))),new me(39,Int32Array.from([6,26,54,82,110,138,166]),new F(30,new S(20,117),new S(4,118)),new F(28,new S(40,47),new S(7,48)),new F(30,new S(43,24),new S(22,25)),new F(30,new S(10,15),new S(67,16))),new me(40,Int32Array.from([6,30,58,86,114,142,170]),new F(30,new S(19,118),new S(6,119)),new F(28,new S(18,47),new S(31,48)),new F(30,new S(34,24),new S(34,25)),new F(30,new S(20,15),new S(61,16)))];var yn=function(C){return C[C.DATA_MASK_000=0]="DATA_MASK_000",C[C.DATA_MASK_001=1]="DATA_MASK_001",C[C.DATA_MASK_010=2]="DATA_MASK_010",C[C.DATA_MASK_011=3]="DATA_MASK_011",C[C.DATA_MASK_100=4]="DATA_MASK_100",C[C.DATA_MASK_101=5]="DATA_MASK_101",C[C.DATA_MASK_110=6]="DATA_MASK_110",C[C.DATA_MASK_111=7]="DATA_MASK_111",C}(yn||{});class _r{constructor(s,a){this.value=s,this.isMasked=a}unmaskBitMatrix(s,a){for(let c=0;c<a;c++)for(let u=0;u<a;u++)this.isMasked(c,u)&&s.flip(u,c)}}_r.values=new Map([[yn.DATA_MASK_000,new _r(yn.DATA_MASK_000,(C,s)=>(C+s&1)===0)],[yn.DATA_MASK_001,new _r(yn.DATA_MASK_001,(C,s)=>(C&1)===0)],[yn.DATA_MASK_010,new _r(yn.DATA_MASK_010,(C,s)=>s%3===0)],[yn.DATA_MASK_011,new _r(yn.DATA_MASK_011,(C,s)=>(C+s)%3===0)],[yn.DATA_MASK_100,new _r(yn.DATA_MASK_100,(C,s)=>(Math.floor(C/2)+Math.floor(s/3)&1)===0)],[yn.DATA_MASK_101,new _r(yn.DATA_MASK_101,(C,s)=>C*s%6===0)],[yn.DATA_MASK_110,new _r(yn.DATA_MASK_110,(C,s)=>C*s%6<3)],[yn.DATA_MASK_111,new _r(yn.DATA_MASK_111,(C,s)=>(C+s+C*s%3&1)===0)]]);class aA{constructor(s){let a=s.getHeight();if(a<21||(a&3)!==1)throw new G;this.bitMatrix=s}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let s=0;for(let d=0;d<6;d++)s=this.copyBit(d,8,s);s=this.copyBit(7,8,s),s=this.copyBit(8,8,s),s=this.copyBit(8,7,s);for(let d=5;d>=0;d--)s=this.copyBit(8,d,s);let a=this.bitMatrix.getHeight(),c=0,u=a-7;for(let d=a-1;d>=u;d--)c=this.copyBit(8,d,c);for(let d=a-8;d<a;d++)c=this.copyBit(d,8,c);if(this.parsedFormatInfo=On.decodeFormatInformation(s,c),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new G}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;let s=this.bitMatrix.getHeight(),a=Math.floor((s-17)/4);if(a<=6)return me.getVersionForNumber(a);let c=0,u=s-11;for(let f=5;f>=0;f--)for(let p=s-9;p>=u;p--)c=this.copyBit(p,f,c);let d=me.decodeVersionInformation(c);if(d!==null&&d.getDimensionForVersion()===s)return this.parsedVersion=d,d;c=0;for(let f=5;f>=0;f--)for(let p=s-9;p>=u;p--)c=this.copyBit(f,p,c);if(d=me.decodeVersionInformation(c),d!==null&&d.getDimensionForVersion()===s)return this.parsedVersion=d,d;throw new G}copyBit(s,a,c){return(this.isMirror?this.bitMatrix.get(a,s):this.bitMatrix.get(s,a))?c<<1|1:c<<1}readCodewords(){let s=this.readFormatInformation(),a=this.readVersion(),c=_r.values.get(s.getDataMask()),u=this.bitMatrix.getHeight();c.unmaskBitMatrix(this.bitMatrix,u);let d=a.buildFunctionPattern(),f=!0,p=new Uint8Array(a.getTotalCodewords()),y=0,_=0,w=0;for(let x=u-1;x>0;x-=2){x===6&&x--;for(let E=0;E<u;E++){let D=f?u-1-E:E;for(let O=0;O<2;O++)d.get(x-O,D)||(w++,_<<=1,this.bitMatrix.get(x-O,D)&&(_|=1),w===8&&(p[y++]=_,w=0,_=0))}f=!f}if(y!==a.getTotalCodewords())throw new G;return p}remask(){if(this.parsedFormatInfo===null)return;let s=_r.values[this.parsedFormatInfo.getDataMask()],a=this.bitMatrix.getHeight();s.unmaskBitMatrix(this.bitMatrix,a)}setMirror(s){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=s}mirror(){let s=this.bitMatrix;for(let a=0,c=s.getWidth();a<c;a++)for(let u=a+1,d=s.getHeight();u<d;u++)s.get(a,u)!==s.get(u,a)&&(s.flip(u,a),s.flip(a,u))}}class Up{constructor(s,a){this.numDataCodewords=s,this.codewords=a}static getDataBlocks(s,a,c){if(s.length!==a.getTotalCodewords())throw new m;let u=a.getECBlocksForLevel(c),d=0,f=u.getECBlocks();for(let O of f)d+=O.getCount();let p=new Array(d),y=0;for(let O of f)for(let N=0;N<O.getCount();N++){let k=O.getDataCodewords(),L=u.getECCodewordsPerBlock()+k;p[y++]=new Up(k,new Uint8Array(L))}let _=p[0].codewords.length,w=p.length-1;for(;w>=0&&p[w].codewords.length!==_;)w--;w++;let x=_-u.getECCodewordsPerBlock(),E=0;for(let O=0;O<x;O++)for(let N=0;N<y;N++)p[N].codewords[O]=s[E++];for(let O=w;O<y;O++)p[O].codewords[x]=s[E++];let D=p[0].codewords.length;for(let O=x;O<D;O++)for(let N=0;N<y;N++){let k=N<w?O:O+1;p[N].codewords[k]=s[E++]}return p}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Br=function(C){return C[C.TERMINATOR=0]="TERMINATOR",C[C.NUMERIC=1]="NUMERIC",C[C.ALPHANUMERIC=2]="ALPHANUMERIC",C[C.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",C[C.BYTE=4]="BYTE",C[C.ECI=5]="ECI",C[C.KANJI=6]="KANJI",C[C.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",C[C.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",C[C.HANZI=9]="HANZI",C}(Br||{});class _e{constructor(s,a,c,u){this.value=s,this.stringValue=a,this.characterCountBitsForVersions=c,this.bits=u,_e.FOR_BITS.set(u,this),_e.FOR_VALUE.set(s,this)}static forBits(s){let a=_e.FOR_BITS.get(s);if(a===void 0)throw new m;return a}getCharacterCountBits(s){let a=s.getVersionNumber(),c;return a<=9?c=0:a<=26?c=1:c=2,this.characterCountBitsForVersions[c]}getValue(){return this.value}getBits(){return this.bits}equals(s){if(!(s instanceof _e))return!1;let a=s;return this.value===a.value}toString(){return this.stringValue}}_e.FOR_BITS=new Map,_e.FOR_VALUE=new Map,_e.TERMINATOR=new _e(Br.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),_e.NUMERIC=new _e(Br.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),_e.ALPHANUMERIC=new _e(Br.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),_e.STRUCTURED_APPEND=new _e(Br.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),_e.BYTE=new _e(Br.BYTE,"BYTE",Int32Array.from([8,16,16]),4),_e.ECI=new _e(Br.ECI,"ECI",Int32Array.from([0,0,0]),7),_e.KANJI=new _e(Br.KANJI,"KANJI",Int32Array.from([8,10,12]),8),_e.FNC1_FIRST_POSITION=new _e(Br.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),_e.FNC1_SECOND_POSITION=new _e(Br.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),_e.HANZI=new _e(Br.HANZI,"HANZI",Int32Array.from([8,10,12]),13);let BC=(()=>{class C{static decode(a,c,u,d){let f=new Bp(a),p=new vt,y=new Array,_=-1,w=-1;try{let x=null,E=!1,D;do{if(f.available()<4)D=_e.TERMINATOR;else{let O=f.readBits(4);D=_e.forBits(O)}switch(D){case _e.TERMINATOR:break;case _e.FNC1_FIRST_POSITION:case _e.FNC1_SECOND_POSITION:E=!0;break;case _e.STRUCTURED_APPEND:if(f.available()<16)throw new G;_=f.readBits(8),w=f.readBits(8);break;case _e.ECI:let O=C.parseECIValue(f);if(x=Y.getCharacterSetECIByValue(O),x===null)throw new G;break;case _e.HANZI:let N=f.readBits(4),k=f.readBits(D.getCharacterCountBits(c));N===C.GB2312_SUBSET&&C.decodeHanziSegment(f,p,k);break;default:let L=f.readBits(D.getCharacterCountBits(c));switch(D){case _e.NUMERIC:C.decodeNumericSegment(f,p,L);break;case _e.ALPHANUMERIC:C.decodeAlphanumericSegment(f,p,L,E);break;case _e.BYTE:C.decodeByteSegment(f,p,L,x,y,d);break;case _e.KANJI:C.decodeKanjiSegment(f,p,L);break;default:throw new G}break}}while(D!==_e.TERMINATOR)}catch{throw new G}return new hl(a,p.toString(),y.length===0?null:y,u===null?null:u.toString(),_,w)}static decodeHanziSegment(a,c,u){if(u*13>a.available())throw new G;let d=new Uint8Array(2*u),f=0;for(;u>0;){let p=a.readBits(13),y=p/96<<8&4294967295|p%96;y<959?y+=41377:y+=42657,d[f]=y>>8&255,d[f+1]=y&255,f+=2,u--}try{c.append(Tn.decode(d,Me.GB2312))}catch(p){throw new G(p)}}static decodeKanjiSegment(a,c,u){if(u*13>a.available())throw new G;let d=new Uint8Array(2*u),f=0;for(;u>0;){let p=a.readBits(13),y=p/192<<8&4294967295|p%192;y<7936?y+=33088:y+=49472,d[f]=y>>8,d[f+1]=y,f+=2,u--}try{c.append(Tn.decode(d,Me.SHIFT_JIS))}catch(p){throw new G(p)}}static decodeByteSegment(a,c,u,d,f,p){if(8*u>a.available())throw new G;let y=new Uint8Array(u);for(let w=0;w<u;w++)y[w]=a.readBits(8);let _;d===null?_=Me.guessEncoding(y,p):_=d.getName();try{c.append(Tn.decode(y,_))}catch(w){throw new G(w)}f.push(y)}static toAlphaNumericChar(a){if(a>=C.ALPHANUMERIC_CHARS.length)throw new G;return C.ALPHANUMERIC_CHARS[a]}static decodeAlphanumericSegment(a,c,u,d){let f=c.length();for(;u>1;){if(a.available()<11)throw new G;let p=a.readBits(11);c.append(C.toAlphaNumericChar(Math.floor(p/45))),c.append(C.toAlphaNumericChar(p%45)),u-=2}if(u===1){if(a.available()<6)throw new G;c.append(C.toAlphaNumericChar(a.readBits(6)))}if(d)for(let p=f;p<c.length();p++)c.charAt(p)==="%"&&(p<c.length()-1&&c.charAt(p+1)==="%"?c.deleteCharAt(p+1):c.setCharAt(p,""))}static decodeNumericSegment(a,c,u){for(;u>=3;){if(a.available()<10)throw new G;let d=a.readBits(10);if(d>=1e3)throw new G;c.append(C.toAlphaNumericChar(Math.floor(d/100))),c.append(C.toAlphaNumericChar(Math.floor(d/10)%10)),c.append(C.toAlphaNumericChar(d%10)),u-=3}if(u===2){if(a.available()<7)throw new G;let d=a.readBits(7);if(d>=100)throw new G;c.append(C.toAlphaNumericChar(Math.floor(d/10))),c.append(C.toAlphaNumericChar(d%10))}else if(u===1){if(a.available()<4)throw new G;let d=a.readBits(4);if(d>=10)throw new G;c.append(C.toAlphaNumericChar(d))}}static parseECIValue(a){let c=a.readBits(8);if(!(c&128))return c&127;if((c&192)===128){let u=a.readBits(8);return(c&63)<<8&4294967295|u}if((c&224)===192){let u=a.readBits(16);return(c&31)<<16&4294967295|u}throw new G}}return C.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",C.GB2312_SUBSET=1,C})();class UC{constructor(s){this.mirrored=s}isMirrored(){return this.mirrored}applyMirroredCorrection(s){if(!this.mirrored||s===null||s.length<3)return;let a=s[0];s[0]=s[2],s[2]=a}}class lA{constructor(){this.rsDecoder=new ml(dt.QR_CODE_FIELD_256)}decodeBooleanArray(s,a){return this.decodeBitMatrix(dn.parseFromBooleanArray(s),a)}decodeBitMatrix(s,a){let c=new aA(s),u=null;try{return this.decodeBitMatrixParser(c,a)}catch(d){u=d}try{c.remask(),c.setMirror(!0),c.readVersion(),c.readFormatInformation(),c.mirror();let d=this.decodeBitMatrixParser(c,a);return d.setOther(new UC(!0)),d}catch(d){throw u!==null?u:d}}decodeBitMatrixParser(s,a){let c=s.readVersion(),u=s.readFormatInformation().getErrorCorrectionLevel(),d=s.readCodewords(),f=Up.getDataBlocks(d,c,u),p=0;for(let w of f)p+=w.getNumDataCodewords();let y=new Uint8Array(p),_=0;for(let w of f){let x=w.getCodewords(),E=w.getNumDataCodewords();this.correctErrors(x,E);for(let D=0;D<E;D++)y[_++]=x[D]}return BC.decode(y,c,u,a)}correctErrors(s,a){let c=new Int32Array(s);try{this.rsDecoder.decode(c,s.length-a)}catch{throw new b}for(let u=0;u<a;u++)s[u]=c[u]}}class Vp extends de{constructor(s,a,c){super(s,a),this.estimatedModuleSize=c}aboutEquals(s,a,c){if(Math.abs(a-this.getY())<=s&&Math.abs(c-this.getX())<=s){let u=Math.abs(s-this.estimatedModuleSize);return u<=1||u<=this.estimatedModuleSize}return!1}combineEstimate(s,a,c){let u=(this.getX()+a)/2,d=(this.getY()+s)/2,f=(this.estimatedModuleSize+c)/2;return new Vp(u,d,f)}}class Nu{constructor(s,a,c,u,d,f,p){this.image=s,this.startX=a,this.startY=c,this.width=u,this.height=d,this.moduleSize=f,this.resultPointCallback=p,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){let s=this.startX,a=this.height,c=this.width,u=s+c,d=this.startY+a/2,f=new Int32Array(3),p=this.image;for(let y=0;y<a;y++){let _=d+(y&1?-Math.floor((y+1)/2):Math.floor((y+1)/2));f[0]=0,f[1]=0,f[2]=0;let w=s;for(;w<u&&!p.get(w,_);)w++;let x=0;for(;w<u;){if(p.get(w,_))if(x===1)f[1]++;else if(x===2){if(this.foundPatternCross(f)){let E=this.handlePossibleCenter(f,_,w);if(E!==null)return E}f[0]=f[2],f[1]=1,f[2]=0,x=1}else f[++x]++;else x===1&&x++,f[x]++;w++}if(this.foundPatternCross(f)){let E=this.handlePossibleCenter(f,_,u);if(E!==null)return E}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new H}static centerFromEnd(s,a){return a-s[2]-s[1]/2}foundPatternCross(s){let a=this.moduleSize,c=a/2;for(let u=0;u<3;u++)if(Math.abs(a-s[u])>=c)return!1;return!0}crossCheckVertical(s,a,c,u){let d=this.image,f=d.getHeight(),p=this.crossCheckStateCount;p[0]=0,p[1]=0,p[2]=0;let y=s;for(;y>=0&&d.get(a,y)&&p[1]<=c;)p[1]++,y--;if(y<0||p[1]>c)return NaN;for(;y>=0&&!d.get(a,y)&&p[0]<=c;)p[0]++,y--;if(p[0]>c)return NaN;for(y=s+1;y<f&&d.get(a,y)&&p[1]<=c;)p[1]++,y++;if(y===f||p[1]>c)return NaN;for(;y<f&&!d.get(a,y)&&p[2]<=c;)p[2]++,y++;if(p[2]>c)return NaN;let _=p[0]+p[1]+p[2];return 5*Math.abs(_-u)>=2*u?NaN:this.foundPatternCross(p)?Nu.centerFromEnd(p,y):NaN}handlePossibleCenter(s,a,c){let u=s[0]+s[1]+s[2],d=Nu.centerFromEnd(s,c),f=this.crossCheckVertical(a,d,2*s[1],u);if(!isNaN(f)){let p=(s[0]+s[1]+s[2])/3;for(let _ of this.possibleCenters)if(_.aboutEquals(p,f,d))return _.combineEstimate(f,d,p);let y=new Vp(d,f,p);this.possibleCenters.push(y),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(y)}return null}}class jp extends de{constructor(s,a,c,u){super(s,a),this.estimatedModuleSize=c,this.count=u,u===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(s,a,c){if(Math.abs(a-this.getY())<=s&&Math.abs(c-this.getX())<=s){let u=Math.abs(s-this.estimatedModuleSize);return u<=1||u<=this.estimatedModuleSize}return!1}combineEstimate(s,a,c){let u=this.count+1,d=(this.count*this.getX()+a)/u,f=(this.count*this.getY()+s)/u,p=(this.count*this.estimatedModuleSize+c)/u;return new jp(d,f,p,u)}}class cA{constructor(s){this.bottomLeft=s[0],this.topLeft=s[1],this.topRight=s[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}let uA=(()=>{class C{constructor(a,c){this.image=a,this.resultPointCallback=c,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=c}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(a){let c=a!=null&&a.get(ye.TRY_HARDER)!==void 0,u=a!=null&&a.get(ye.PURE_BARCODE)!==void 0,d=this.image,f=d.getHeight(),p=d.getWidth(),y=Math.floor(3*f/(4*C.MAX_MODULES));(y<C.MIN_SKIP||c)&&(y=C.MIN_SKIP);let _=!1,w=new Int32Array(5);for(let E=y-1;E<f&&!_;E+=y){w[0]=0,w[1]=0,w[2]=0,w[3]=0,w[4]=0;let D=0;for(let O=0;O<p;O++)if(d.get(O,E))(D&1)===1&&D++,w[D]++;else if(D&1)w[D]++;else if(D===4)if(C.foundPatternCross(w)){if(this.handlePossibleCenter(w,E,O,u)===!0)if(y=2,this.hasSkipped===!0)_=this.haveMultiplyConfirmedCenters();else{let k=this.findRowSkip();k>w[2]&&(E+=k-w[2]-y,O=p-1)}else{w[0]=w[2],w[1]=w[3],w[2]=w[4],w[3]=1,w[4]=0,D=3;continue}D=0,w[0]=0,w[1]=0,w[2]=0,w[3]=0,w[4]=0}else w[0]=w[2],w[1]=w[3],w[2]=w[4],w[3]=1,w[4]=0,D=3;else w[++D]++;C.foundPatternCross(w)&&this.handlePossibleCenter(w,E,p,u)===!0&&(y=w[0],this.hasSkipped&&(_=this.haveMultiplyConfirmedCenters()))}let x=this.selectBestPatterns();return de.orderBestPatterns(x),new cA(x)}static centerFromEnd(a,c){return c-a[4]-a[3]-a[2]/2}static foundPatternCross(a){let c=0;for(let f=0;f<5;f++){let p=a[f];if(p===0)return!1;c+=p}if(c<7)return!1;let u=c/7,d=u/2;return Math.abs(u-a[0])<d&&Math.abs(u-a[1])<d&&Math.abs(3*u-a[2])<3*d&&Math.abs(u-a[3])<d&&Math.abs(u-a[4])<d}getCrossCheckStateCount(){let a=this.crossCheckStateCount;return a[0]=0,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a}crossCheckDiagonal(a,c,u,d){let f=this.getCrossCheckStateCount(),p=0,y=this.image;for(;a>=p&&c>=p&&y.get(c-p,a-p);)f[2]++,p++;if(a<p||c<p)return!1;for(;a>=p&&c>=p&&!y.get(c-p,a-p)&&f[1]<=u;)f[1]++,p++;if(a<p||c<p||f[1]>u)return!1;for(;a>=p&&c>=p&&y.get(c-p,a-p)&&f[0]<=u;)f[0]++,p++;if(f[0]>u)return!1;let _=y.getHeight(),w=y.getWidth();for(p=1;a+p<_&&c+p<w&&y.get(c+p,a+p);)f[2]++,p++;if(a+p>=_||c+p>=w)return!1;for(;a+p<_&&c+p<w&&!y.get(c+p,a+p)&&f[3]<u;)f[3]++,p++;if(a+p>=_||c+p>=w||f[3]>=u)return!1;for(;a+p<_&&c+p<w&&y.get(c+p,a+p)&&f[4]<u;)f[4]++,p++;if(f[4]>=u)return!1;let x=f[0]+f[1]+f[2]+f[3]+f[4];return Math.abs(x-d)<2*d&&C.foundPatternCross(f)}crossCheckVertical(a,c,u,d){let f=this.image,p=f.getHeight(),y=this.getCrossCheckStateCount(),_=a;for(;_>=0&&f.get(c,_);)y[2]++,_--;if(_<0)return NaN;for(;_>=0&&!f.get(c,_)&&y[1]<=u;)y[1]++,_--;if(_<0||y[1]>u)return NaN;for(;_>=0&&f.get(c,_)&&y[0]<=u;)y[0]++,_--;if(y[0]>u)return NaN;for(_=a+1;_<p&&f.get(c,_);)y[2]++,_++;if(_===p)return NaN;for(;_<p&&!f.get(c,_)&&y[3]<u;)y[3]++,_++;if(_===p||y[3]>=u)return NaN;for(;_<p&&f.get(c,_)&&y[4]<u;)y[4]++,_++;if(y[4]>=u)return NaN;let w=y[0]+y[1]+y[2]+y[3]+y[4];return 5*Math.abs(w-d)>=2*d?NaN:C.foundPatternCross(y)?C.centerFromEnd(y,_):NaN}crossCheckHorizontal(a,c,u,d){let f=this.image,p=f.getWidth(),y=this.getCrossCheckStateCount(),_=a;for(;_>=0&&f.get(_,c);)y[2]++,_--;if(_<0)return NaN;for(;_>=0&&!f.get(_,c)&&y[1]<=u;)y[1]++,_--;if(_<0||y[1]>u)return NaN;for(;_>=0&&f.get(_,c)&&y[0]<=u;)y[0]++,_--;if(y[0]>u)return NaN;for(_=a+1;_<p&&f.get(_,c);)y[2]++,_++;if(_===p)return NaN;for(;_<p&&!f.get(_,c)&&y[3]<u;)y[3]++,_++;if(_===p||y[3]>=u)return NaN;for(;_<p&&f.get(_,c)&&y[4]<u;)y[4]++,_++;if(y[4]>=u)return NaN;let w=y[0]+y[1]+y[2]+y[3]+y[4];return 5*Math.abs(w-d)>=d?NaN:C.foundPatternCross(y)?C.centerFromEnd(y,_):NaN}handlePossibleCenter(a,c,u,d){let f=a[0]+a[1]+a[2]+a[3]+a[4],p=C.centerFromEnd(a,u),y=this.crossCheckVertical(c,Math.floor(p),a[2],f);if(!isNaN(y)&&(p=this.crossCheckHorizontal(Math.floor(p),Math.floor(y),a[2],f),!isNaN(p)&&(!d||this.crossCheckDiagonal(Math.floor(y),Math.floor(p),a[2],f)))){let _=f/7,w=!1,x=this.possibleCenters;for(let E=0,D=x.length;E<D;E++){let O=x[E];if(O.aboutEquals(_,y,p)){x[E]=O.combineEstimate(y,p,_),w=!0;break}}if(!w){let E=new jp(p,y,_);x.push(E),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(E)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let c=null;for(let u of this.possibleCenters)if(u.getCount()>=C.CENTER_QUORUM)if(c==null)c=u;else return this.hasSkipped=!0,Math.floor((Math.abs(c.getX()-u.getX())-Math.abs(c.getY()-u.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let a=0,c=0,u=this.possibleCenters.length;for(let p of this.possibleCenters)p.getCount()>=C.CENTER_QUORUM&&(a++,c+=p.getEstimatedModuleSize());if(a<3)return!1;let d=c/u,f=0;for(let p of this.possibleCenters)f+=Math.abs(p.getEstimatedModuleSize()-d);return f<=.05*c}selectBestPatterns(){let a=this.possibleCenters.length;if(a<3)throw new H;let c=this.possibleCenters,u;if(a>3){let d=0,f=0;for(let _ of this.possibleCenters){let w=_.getEstimatedModuleSize();d+=w,f+=w*w}u=d/a;let p=Math.sqrt(f/a-u*u);c.sort((_,w)=>{let x=Math.abs(w.getEstimatedModuleSize()-u),E=Math.abs(_.getEstimatedModuleSize()-u);return x<E?-1:x>E?1:0});let y=Math.max(.2*u,p);for(let _=0;_<c.length&&c.length>3;_++){let w=c[_];Math.abs(w.getEstimatedModuleSize()-u)>y&&(c.splice(_,1),_--)}}if(c.length>3){let d=0;for(let f of c)d+=f.getEstimatedModuleSize();u=d/c.length,c.sort((f,p)=>{if(p.getCount()===f.getCount()){let y=Math.abs(p.getEstimatedModuleSize()-u),_=Math.abs(f.getEstimatedModuleSize()-u);return y<_?1:y>_?-1:0}else return p.getCount()-f.getCount()}),c.splice(3)}return[c[0],c[1],c[2]]}}return C.CENTER_QUORUM=2,C.MIN_SKIP=3,C.MAX_MODULES=57,C})();class Cl{constructor(s){this.image=s}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(s){this.resultPointCallback=s==null?null:s.get(ye.NEED_RESULT_POINT_CALLBACK);let c=new uA(this.image,this.resultPointCallback).find(s);return this.processFinderPatternInfo(c)}processFinderPatternInfo(s){let a=s.getTopLeft(),c=s.getTopRight(),u=s.getBottomLeft(),d=this.calculateModuleSize(a,c,u);if(d<1)throw new H("No pattern found in proccess finder.");let f=Cl.computeDimension(a,c,u,d),p=me.getProvisionalVersionForDimension(f),y=p.getDimensionForVersion()-7,_=null;if(p.getAlignmentPatternCenters().length>0){let D=c.getX()-a.getX()+u.getX(),O=c.getY()-a.getY()+u.getY(),N=1-3/y,k=Math.floor(a.getX()+N*(D-a.getX())),L=Math.floor(a.getY()+N*(O-a.getY()));for(let X=4;X<=16;X<<=1)try{_=this.findAlignmentInRegion(d,k,L,X);break}catch(ie){if(!(ie instanceof H))throw ie}}let w=Cl.createTransform(a,c,u,_,f),x=Cl.sampleGrid(this.image,w,f),E;return _===null?E=[u,a,c]:E=[u,a,c,_],new Iu(x,E)}static createTransform(s,a,c,u,d){let f=d-3.5,p,y,_,w;return u!==null?(p=u.getX(),y=u.getY(),_=f-3,w=_):(p=a.getX()-s.getX()+c.getX(),y=a.getY()-s.getY()+c.getY(),_=f,w=f),Pr.quadrilateralToQuadrilateral(3.5,3.5,f,3.5,_,w,3.5,f,s.getX(),s.getY(),a.getX(),a.getY(),p,y,c.getX(),c.getY())}static sampleGrid(s,a,c){return to.getInstance().sampleGridWithTransform(s,c,c,a)}static computeDimension(s,a,c,u){let d=nt.round(de.distance(s,a)/u),f=nt.round(de.distance(s,c)/u),p=Math.floor((d+f)/2)+7;switch(p&3){case 0:p++;break;case 2:p--;break;case 3:throw new H("Dimensions could be not found.")}return p}calculateModuleSize(s,a,c){return(this.calculateModuleSizeOneWay(s,a)+this.calculateModuleSizeOneWay(s,c))/2}calculateModuleSizeOneWay(s,a){let c=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(s.getX()),Math.floor(s.getY()),Math.floor(a.getX()),Math.floor(a.getY())),u=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(a.getX()),Math.floor(a.getY()),Math.floor(s.getX()),Math.floor(s.getY()));return isNaN(c)?u/7:isNaN(u)?c/7:(c+u)/14}sizeOfBlackWhiteBlackRunBothWays(s,a,c,u){let d=this.sizeOfBlackWhiteBlackRun(s,a,c,u),f=1,p=s-(c-s);p<0?(f=s/(s-p),p=0):p>=this.image.getWidth()&&(f=(this.image.getWidth()-1-s)/(p-s),p=this.image.getWidth()-1);let y=Math.floor(a-(u-a)*f);return f=1,y<0?(f=a/(a-y),y=0):y>=this.image.getHeight()&&(f=(this.image.getHeight()-1-a)/(y-a),y=this.image.getHeight()-1),p=Math.floor(s+(p-s)*f),d+=this.sizeOfBlackWhiteBlackRun(s,a,p,y),d-1}sizeOfBlackWhiteBlackRun(s,a,c,u){let d=Math.abs(u-a)>Math.abs(c-s);if(d){let D=s;s=a,a=D,D=c,c=u,u=D}let f=Math.abs(c-s),p=Math.abs(u-a),y=-f/2,_=s<c?1:-1,w=a<u?1:-1,x=0,E=c+_;for(let D=s,O=a;D!==E;D+=_){let N=d?O:D,k=d?D:O;if(x===1===this.image.get(N,k)){if(x===2)return nt.distance(D,O,s,a);x++}if(y+=p,y>0){if(O===u)break;O+=w,y-=f}}return x===2?nt.distance(c+_,u,s,a):NaN}findAlignmentInRegion(s,a,c,u){let d=Math.floor(u*s),f=Math.max(0,a-d),p=Math.min(this.image.getWidth()-1,a+d);if(p-f<s*3)throw new H("Alignment top exceeds estimated module size.");let y=Math.max(0,c-d),_=Math.min(this.image.getHeight()-1,c+d);if(_-y<s*3)throw new H("Alignment bottom exceeds estimated module size.");return new Nu(this.image,f,y,p-f,_-y,s,this.resultPointCallback).find()}}class oo{constructor(){this.decoder=new lA}getDecoder(){return this.decoder}decode(s,a){let c,u;if(a!=null&&a.get(ye.PURE_BARCODE)!==void 0){let y=oo.extractPureBits(s.getBlackMatrix());c=this.decoder.decodeBitMatrix(y,a),u=oo.NO_POINTS}else{let y=new Cl(s.getBlackMatrix()).detect(a);c=this.decoder.decodeBitMatrix(y.getBits(),a),u=y.getPoints()}c.getOther()instanceof UC&&c.getOther().applyMirroredCorrection(u);let d=new Ln(c.getText(),c.getRawBytes(),void 0,u,we.QR_CODE,void 0),f=c.getByteSegments();f!==null&&d.putMetadata(hn.BYTE_SEGMENTS,f);let p=c.getECLevel();return p!==null&&d.putMetadata(hn.ERROR_CORRECTION_LEVEL,p),c.hasStructuredAppend()&&(d.putMetadata(hn.STRUCTURED_APPEND_SEQUENCE,c.getStructuredAppendSequenceNumber()),d.putMetadata(hn.STRUCTURED_APPEND_PARITY,c.getStructuredAppendParity())),d}reset(){}static extractPureBits(s){let a=s.getTopLeftOnBit(),c=s.getBottomRightOnBit();if(a===null||c===null)throw new H;let u=this.moduleSize(a,s),d=a[1],f=c[1],p=a[0],y=c[0];if(p>=y||d>=f)throw new H;if(f-d!==y-p&&(y=p+(f-d),y>=s.getWidth()))throw new H;let _=Math.round((y-p+1)/u),w=Math.round((f-d+1)/u);if(_<=0||w<=0)throw new H;if(w!==_)throw new H;let x=Math.floor(u/2);d+=x,p+=x;let E=p+Math.floor((_-1)*u)-y;if(E>0){if(E>x)throw new H;p-=E}let D=d+Math.floor((w-1)*u)-f;if(D>0){if(D>x)throw new H;d-=D}let O=new dn(_,w);for(let N=0;N<w;N++){let k=d+Math.floor(N*u);for(let L=0;L<_;L++)s.get(p+Math.floor(L*u),k)&&O.set(L,N)}return O}static moduleSize(s,a){let c=a.getHeight(),u=a.getWidth(),d=s[0],f=s[1],p=!0,y=0;for(;d<u&&f<c;){if(p!==a.get(d,f)){if(++y===5)break;p=!p}d++,f++}if(d===u||f===c)throw new H;return(d-s[0])/7}}oo.NO_POINTS=new Array;class xe{PDF417Common(){}static getBitCountSum(s){return nt.sum(s)}static toIntArray(s){if(s==null||!s.length)return xe.EMPTY_INT_ARRAY;let a=new Int32Array(s.length),c=0;for(let u of s)a[c++]=u;return a}static getCodeword(s){let a=Z.binarySearch(xe.SYMBOL_TABLE,s&262143);return a<0?-1:(xe.CODEWORD_TABLE[a]-1)%xe.NUMBER_OF_CODEWORDS}}xe.NUMBER_OF_CODEWORDS=929,xe.MAX_CODEWORDS_IN_BARCODE=xe.NUMBER_OF_CODEWORDS-1,xe.MIN_ROWS_IN_BARCODE=3,xe.MAX_ROWS_IN_BARCODE=90,xe.MODULES_IN_CODEWORD=17,xe.MODULES_IN_STOP_PATTERN=18,xe.BARS_IN_MODULE=8,xe.EMPTY_INT_ARRAY=new Int32Array([]),xe.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),xe.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class dA{constructor(s,a){this.bits=s,this.points=a}getBits(){return this.bits}getPoints(){return this.points}}class Be{static detectMultiple(s,a,c){let u=s.getBlackMatrix(),d=Be.detect(c,u);return d.length||(u=u.clone(),u.rotate180(),d=Be.detect(c,u)),new dA(u,d)}static detect(s,a){let c=new Array,u=0,d=0,f=!1;for(;u<a.getHeight();){let p=Be.findVertices(a,u,d);if(p[0]==null&&p[3]==null){if(!f)break;f=!1,d=0;for(let y of c)y[1]!=null&&(u=Math.trunc(Math.max(u,y[1].getY()))),y[3]!=null&&(u=Math.max(u,Math.trunc(y[3].getY())));u+=Be.ROW_STEP;continue}if(f=!0,c.push(p),!s)break;p[2]!=null?(d=Math.trunc(p[2].getX()),u=Math.trunc(p[2].getY())):(d=Math.trunc(p[4].getX()),u=Math.trunc(p[4].getY()))}return c}static findVertices(s,a,c){let u=s.getHeight(),d=s.getWidth(),f=new Array(8);return Be.copyToResult(f,Be.findRowsWithPattern(s,u,d,a,c,Be.START_PATTERN),Be.INDEXES_START_PATTERN),f[4]!=null&&(c=Math.trunc(f[4].getX()),a=Math.trunc(f[4].getY())),Be.copyToResult(f,Be.findRowsWithPattern(s,u,d,a,c,Be.STOP_PATTERN),Be.INDEXES_STOP_PATTERN),f}static copyToResult(s,a,c){for(let u=0;u<c.length;u++)s[c[u]]=a[u]}static findRowsWithPattern(s,a,c,u,d,f){let p=new Array(4),y=!1,_=new Int32Array(f.length);for(;u<a;u+=Be.ROW_STEP){let x=Be.findGuardPattern(s,d,u,c,!1,f,_);if(x!=null){for(;u>0;){let E=Be.findGuardPattern(s,d,--u,c,!1,f,_);if(E!=null)x=E;else{u++;break}}p[0]=new de(x[0],u),p[1]=new de(x[1],u),y=!0;break}}let w=u+1;if(y){let x=0,E=Int32Array.from([Math.trunc(p[0].getX()),Math.trunc(p[1].getX())]);for(;w<a;w++){let D=Be.findGuardPattern(s,E[0],w,c,!1,f,_);if(D!=null&&Math.abs(E[0]-D[0])<Be.MAX_PATTERN_DRIFT&&Math.abs(E[1]-D[1])<Be.MAX_PATTERN_DRIFT)E=D,x=0;else{if(x>Be.SKIPPED_ROW_COUNT_MAX)break;x++}}w-=x+1,p[2]=new de(E[0],w),p[3]=new de(E[1],w)}return w-u<Be.BARCODE_MIN_HEIGHT&&Z.fill(p,null),p}static findGuardPattern(s,a,c,u,d,f,p){Z.fillWithin(p,0,p.length,0);let y=a,_=0;for(;s.get(y,c)&&y>0&&_++<Be.MAX_PIXEL_DRIFT;)y--;let w=y,x=0,E=f.length;for(let D=d;w<u;w++)if(s.get(w,c)!==D)p[x]++;else{if(x===E-1){if(Be.patternMatchVariance(p,f,Be.MAX_INDIVIDUAL_VARIANCE)<Be.MAX_AVG_VARIANCE)return new Int32Array([y,w]);y+=p[0]+p[1],T.arraycopy(p,2,p,0,x-1),p[x-1]=0,p[x]=0,x--}else x++;p[x]=1,D=!D}return x===E-1&&Be.patternMatchVariance(p,f,Be.MAX_INDIVIDUAL_VARIANCE)<Be.MAX_AVG_VARIANCE?new Int32Array([y,w-1]):null}static patternMatchVariance(s,a,c){let u=s.length,d=0,f=0;for(let _=0;_<u;_++)d+=s[_],f+=a[_];if(d<f)return 1/0;let p=d/f;c*=p;let y=0;for(let _=0;_<u;_++){let w=s[_],x=a[_]*p,E=w>x?w-x:x-w;if(E>c)return 1/0;y+=E}return y/d}}Be.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),Be.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),Be.MAX_AVG_VARIANCE=.42,Be.MAX_INDIVIDUAL_VARIANCE=.8,Be.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),Be.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),Be.MAX_PIXEL_DRIFT=3,Be.MAX_PATTERN_DRIFT=5,Be.SKIPPED_ROW_COUNT_MAX=25,Be.ROW_STEP=5,Be.BARCODE_MIN_HEIGHT=10;class _n{constructor(s,a){if(a.length===0)throw new m;this.field=s;let c=a.length;if(c>1&&a[0]===0){let u=1;for(;u<c&&a[u]===0;)u++;u===c?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(c-u),T.arraycopy(a,u,this.coefficients,0,this.coefficients.length))}else this.coefficients=a}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(s){return this.coefficients[this.coefficients.length-1-s]}evaluateAt(s){if(s===0)return this.getCoefficient(0);if(s===1){let u=0;for(let d of this.coefficients)u=this.field.add(u,d);return u}let a=this.coefficients[0],c=this.coefficients.length;for(let u=1;u<c;u++)a=this.field.add(this.field.multiply(s,a),this.coefficients[u]);return a}add(s){if(!this.field.equals(s.field))throw new m("ModulusPolys do not have same ModulusGF field");if(this.isZero())return s;if(s.isZero())return this;let a=this.coefficients,c=s.coefficients;if(a.length>c.length){let f=a;a=c,c=f}let u=new Int32Array(c.length),d=c.length-a.length;T.arraycopy(c,0,u,0,d);for(let f=d;f<c.length;f++)u[f]=this.field.add(a[f-d],c[f]);return new _n(this.field,u)}subtract(s){if(!this.field.equals(s.field))throw new m("ModulusPolys do not have same ModulusGF field");return s.isZero()?this:this.add(s.negative())}multiply(s){return s instanceof _n?this.multiplyOther(s):this.multiplyScalar(s)}multiplyOther(s){if(!this.field.equals(s.field))throw new m("ModulusPolys do not have same ModulusGF field");if(this.isZero()||s.isZero())return new _n(this.field,new Int32Array([0]));let a=this.coefficients,c=a.length,u=s.coefficients,d=u.length,f=new Int32Array(c+d-1);for(let p=0;p<c;p++){let y=a[p];for(let _=0;_<d;_++)f[p+_]=this.field.add(f[p+_],this.field.multiply(y,u[_]))}return new _n(this.field,f)}negative(){let s=this.coefficients.length,a=new Int32Array(s);for(let c=0;c<s;c++)a[c]=this.field.subtract(0,this.coefficients[c]);return new _n(this.field,a)}multiplyScalar(s){if(s===0)return new _n(this.field,new Int32Array([0]));if(s===1)return this;let a=this.coefficients.length,c=new Int32Array(a);for(let u=0;u<a;u++)c[u]=this.field.multiply(this.coefficients[u],s);return new _n(this.field,c)}multiplyByMonomial(s,a){if(s<0)throw new m;if(a===0)return new _n(this.field,new Int32Array([0]));let c=this.coefficients.length,u=new Int32Array(c+s);for(let d=0;d<c;d++)u[d]=this.field.multiply(this.coefficients[d],a);return new _n(this.field,u)}toString(){let s=new vt;for(let a=this.getDegree();a>=0;a--){let c=this.getCoefficient(a);c!==0&&(c<0?(s.append(" - "),c=-c):s.length()>0&&s.append(" + "),(a===0||c!==1)&&s.append(c),a!==0&&(a===1?s.append("x"):(s.append("x^"),s.append(a))))}return s.toString()}}class fA{add(s,a){return(s+a)%this.modulus}subtract(s,a){return(this.modulus+s-a)%this.modulus}exp(s){return this.expTable[s]}log(s){if(s===0)throw new m;return this.logTable[s]}inverse(s){if(s===0)throw new Dp;return this.expTable[this.modulus-this.logTable[s]-1]}multiply(s,a){return s===0||a===0?0:this.expTable[(this.logTable[s]+this.logTable[a])%(this.modulus-1)]}getSize(){return this.modulus}equals(s){return s===this}}class Hp extends fA{constructor(s,a){super(),this.modulus=s,this.expTable=new Int32Array(s),this.logTable=new Int32Array(s);let c=1;for(let u=0;u<s;u++)this.expTable[u]=c,c=c*a%s;for(let u=0;u<s-1;u++)this.logTable[this.expTable[u]]=u;this.zero=new _n(this,new Int32Array([0])),this.one=new _n(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(s,a){if(s<0)throw new m;if(a===0)return this.zero;let c=new Int32Array(s+1);return c[0]=a,new _n(this,c)}}Hp.PDF417_GF=new Hp(xe.NUMBER_OF_CODEWORDS,3);class VC{constructor(){this.field=Hp.PDF417_GF}decode(s,a,c){let u=new _n(this.field,s),d=new Int32Array(a),f=!1;for(let O=a;O>0;O--){let N=u.evaluateAt(this.field.exp(O));d[a-O]=N,N!==0&&(f=!0)}if(!f)return 0;let p=this.field.getOne();if(c!=null)for(let O of c){let N=this.field.exp(s.length-1-O),k=new _n(this.field,new Int32Array([this.field.subtract(0,N),1]));p=p.multiply(k)}let y=new _n(this.field,d),_=this.runEuclideanAlgorithm(this.field.buildMonomial(a,1),y,a),w=_[0],x=_[1],E=this.findErrorLocations(w),D=this.findErrorMagnitudes(x,w,E);for(let O=0;O<E.length;O++){let N=s.length-1-this.field.log(E[O]);if(N<0)throw b.getChecksumInstance();s[N]=this.field.subtract(s[N],D[O])}return E.length}runEuclideanAlgorithm(s,a,c){if(s.getDegree()<a.getDegree()){let E=s;s=a,a=E}let u=s,d=a,f=this.field.getZero(),p=this.field.getOne();for(;d.getDegree()>=Math.round(c/2);){let E=u,D=f;if(u=d,f=p,u.isZero())throw b.getChecksumInstance();d=E;let O=this.field.getZero(),N=u.getCoefficient(u.getDegree()),k=this.field.inverse(N);for(;d.getDegree()>=u.getDegree()&&!d.isZero();){let L=d.getDegree()-u.getDegree(),X=this.field.multiply(d.getCoefficient(d.getDegree()),k);O=O.add(this.field.buildMonomial(L,X)),d=d.subtract(u.multiplyByMonomial(L,X))}p=O.multiply(f).subtract(D).negative()}let y=p.getCoefficient(0);if(y===0)throw b.getChecksumInstance();let _=this.field.inverse(y),w=p.multiply(_),x=d.multiply(_);return[w,x]}findErrorLocations(s){let a=s.getDegree(),c=new Int32Array(a),u=0;for(let d=1;d<this.field.getSize()&&u<a;d++)s.evaluateAt(d)===0&&(c[u]=this.field.inverse(d),u++);if(u!==a)throw b.getChecksumInstance();return c}findErrorMagnitudes(s,a,c){let u=a.getDegree(),d=new Int32Array(u);for(let _=1;_<=u;_++)d[u-_]=this.field.multiply(_,a.getCoefficient(_));let f=new _n(this.field,d),p=c.length,y=new Int32Array(p);for(let _=0;_<p;_++){let w=this.field.inverse(c[_]),x=this.field.subtract(0,s.evaluateAt(w)),E=this.field.inverse(f.evaluateAt(w));y[_]=this.field.multiply(x,E)}return y}}class Yo{constructor(s,a,c,u,d){s instanceof Yo?this.constructor_2(s):this.constructor_1(s,a,c,u,d)}constructor_1(s,a,c,u,d){let f=a==null||c==null,p=u==null||d==null;if(f&&p)throw new H;f?(a=new de(0,u.getY()),c=new de(0,d.getY())):p&&(u=new de(s.getWidth()-1,a.getY()),d=new de(s.getWidth()-1,c.getY())),this.image=s,this.topLeft=a,this.bottomLeft=c,this.topRight=u,this.bottomRight=d,this.minX=Math.trunc(Math.min(a.getX(),c.getX())),this.maxX=Math.trunc(Math.max(u.getX(),d.getX())),this.minY=Math.trunc(Math.min(a.getY(),u.getY())),this.maxY=Math.trunc(Math.max(c.getY(),d.getY()))}constructor_2(s){this.image=s.image,this.topLeft=s.getTopLeft(),this.bottomLeft=s.getBottomLeft(),this.topRight=s.getTopRight(),this.bottomRight=s.getBottomRight(),this.minX=s.getMinX(),this.maxX=s.getMaxX(),this.minY=s.getMinY(),this.maxY=s.getMaxY()}static merge(s,a){return s==null?a:a==null?s:new Yo(s.image,s.topLeft,s.bottomLeft,a.topRight,a.bottomRight)}addMissingRows(s,a,c){let u=this.topLeft,d=this.bottomLeft,f=this.topRight,p=this.bottomRight;if(s>0){let y=c?this.topLeft:this.topRight,_=Math.trunc(y.getY()-s);_<0&&(_=0);let w=new de(y.getX(),_);c?u=w:f=w}if(a>0){let y=c?this.bottomLeft:this.bottomRight,_=Math.trunc(y.getY()+a);_>=this.image.getHeight()&&(_=this.image.getHeight()-1);let w=new de(y.getX(),_);c?d=w:p=w}return new Yo(this.image,u,d,f,p)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class hA{constructor(s,a,c,u){this.columnCount=s,this.errorCorrectionLevel=u,this.rowCountUpperPart=a,this.rowCountLowerPart=c,this.rowCount=a+c}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class wl{constructor(){this.buffer=""}static form(s,a){let c=-1;function u(f,p,y,_,w,x){if(f==="%%")return"%";if(a[++c]===void 0)return;f=_?parseInt(_.substr(1)):void 0;let E=w?parseInt(w.substr(1)):void 0,D;switch(x){case"s":D=a[c];break;case"c":D=a[c][0];break;case"f":D=parseFloat(a[c]).toFixed(f);break;case"p":D=parseFloat(a[c]).toPrecision(f);break;case"e":D=parseFloat(a[c]).toExponential(f);break;case"x":D=parseInt(a[c]).toString(E||16);break;case"d":D=parseFloat(parseInt(a[c],E||10).toPrecision(f)).toFixed(0);break}D=typeof D=="object"?JSON.stringify(D):(+D).toString(E);let O=parseInt(y),N=y&&y[0]+""=="0"?"0":" ";for(;D.length<O;)D=p!==void 0?D+N:N+D;return D}let d=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return s.replace(d,u)}format(s,...a){this.buffer+=wl.form(s,a)}toString(){return this.buffer}}let jC=(()=>{class C{constructor(a){this.boundingBox=new Yo(a),this.codewords=new Array(a.getMaxY()-a.getMinY()+1)}getCodewordNearby(a){let c=this.getCodeword(a);if(c!=null)return c;for(let u=1;u<C.MAX_NEARBY_DISTANCE;u++){let d=this.imageRowToCodewordIndex(a)-u;if(d>=0&&(c=this.codewords[d],c!=null)||(d=this.imageRowToCodewordIndex(a)+u,d<this.codewords.length&&(c=this.codewords[d],c!=null)))return c}return null}imageRowToCodewordIndex(a){return a-this.boundingBox.getMinY()}setCodeword(a,c){this.codewords[this.imageRowToCodewordIndex(a)]=c}getCodeword(a){return this.codewords[this.imageRowToCodewordIndex(a)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){let a=new wl,c=0;for(let u of this.codewords){if(u==null){a.format("%3d:    |   %n",c++);continue}a.format("%3d: %3d|%3d%n",c++,u.getRowNumber(),u.getValue())}return a.toString()}}return C.MAX_NEARBY_DISTANCE=5,C})();class vl{constructor(){this.values=new Map}setValue(s){s=Math.trunc(s);let a=this.values.get(s);a==null&&(a=0),a++,this.values.set(s,a)}getValue(){let s=-1,a=new Array;for(let[c,u]of this.values.entries()){let d={getKey:()=>c,getValue:()=>u};d.getValue()>s?(s=d.getValue(),a=[],a.push(d.getKey())):d.getValue()===s&&a.push(d.getKey())}return xe.toIntArray(a)}getConfidence(s){return this.values.get(s)}}class HC extends jC{constructor(s,a){super(s),this._isLeft=a}setRowNumbers(){for(let s of this.getCodewords())s?.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(s){let a=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(a,s);let c=this.getBoundingBox(),u=this._isLeft?c.getTopLeft():c.getTopRight(),d=this._isLeft?c.getBottomLeft():c.getBottomRight(),f=this.imageRowToCodewordIndex(Math.trunc(u.getY())),p=this.imageRowToCodewordIndex(Math.trunc(d.getY())),y=-1,_=1,w=0;for(let x=f;x<p;x++){if(a[x]==null)continue;let E=a[x],D=E.getRowNumber()-y;if(D===0)w++;else if(D===1)_=Math.max(_,w),w=1,y=E.getRowNumber();else if(D<0||E.getRowNumber()>=s.getRowCount()||D>x)a[x]=null;else{let O;_>2?O=(_-2)*D:O=D;let N=O>=x;for(let k=1;k<=O&&!N;k++)N=a[x-k]!=null;N?a[x]=null:(y=E.getRowNumber(),w=1)}}}getRowHeights(){let s=this.getBarcodeMetadata();if(s==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(s);let a=new Int32Array(s.getRowCount());for(let c of this.getCodewords())if(c!=null){let u=c.getRowNumber();if(u>=a.length)continue;a[u]++}return a}adjustIncompleteIndicatorColumnRowNumbers(s){let a=this.getBoundingBox(),c=this._isLeft?a.getTopLeft():a.getTopRight(),u=this._isLeft?a.getBottomLeft():a.getBottomRight(),d=this.imageRowToCodewordIndex(Math.trunc(c.getY())),f=this.imageRowToCodewordIndex(Math.trunc(u.getY())),p=this.getCodewords(),y=-1;for(let _=d;_<f;_++){if(p[_]==null)continue;let w=p[_];w.setRowNumberAsRowIndicatorColumn();let x=w.getRowNumber()-y;x===0||(x===1?y=w.getRowNumber():w.getRowNumber()>=s.getRowCount()?p[_]=null:y=w.getRowNumber())}}getBarcodeMetadata(){let s=this.getCodewords(),a=new vl,c=new vl,u=new vl,d=new vl;for(let p of s){if(p==null)continue;p.setRowNumberAsRowIndicatorColumn();let y=p.getValue()%30,_=p.getRowNumber();switch(this._isLeft||(_+=2),_%3){case 0:c.setValue(y*3+1);break;case 1:d.setValue(y/3),u.setValue(y%3);break;case 2:a.setValue(y+1);break}}if(a.getValue().length===0||c.getValue().length===0||u.getValue().length===0||d.getValue().length===0||a.getValue()[0]<1||c.getValue()[0]+u.getValue()[0]<xe.MIN_ROWS_IN_BARCODE||c.getValue()[0]+u.getValue()[0]>xe.MAX_ROWS_IN_BARCODE)return null;let f=new hA(a.getValue()[0],c.getValue()[0],u.getValue()[0],d.getValue()[0]);return this.removeIncorrectCodewords(s,f),f}removeIncorrectCodewords(s,a){for(let c=0;c<s.length;c++){let u=s[c];if(s[c]==null)continue;let d=u.getValue()%30,f=u.getRowNumber();if(f>a.getRowCount()){s[c]=null;continue}switch(this._isLeft||(f+=2),f%3){case 0:d*3+1!==a.getRowCountUpperPart()&&(s[c]=null);break;case 1:(Math.trunc(d/3)!==a.getErrorCorrectionLevel()||d%3!==a.getRowCountLowerPart())&&(s[c]=null);break;case 2:d+1!==a.getColumnCount()&&(s[c]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class bl{constructor(s,a){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=s,this.barcodeColumnCount=s.getColumnCount(),this.boundingBox=a,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let s=xe.MAX_CODEWORDS_IN_BARCODE,a;do a=s,s=this.adjustRowNumbersAndGetCount();while(s>0&&s<a);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(s){s?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let s=this.adjustRowNumbersByRow();if(s===0)return 0;for(let a=1;a<this.barcodeColumnCount+1;a++){let c=this.detectionResultColumns[a].getCodewords();for(let u=0;u<c.length;u++)c[u]!=null&&(c[u].hasValidRowNumber()||this.adjustRowNumbers(a,u,c))}return s}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let s=this.detectionResultColumns[0].getCodewords(),a=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let c=0;c<s.length;c++)if(s[c]!=null&&a[c]!=null&&s[c].getRowNumber()===a[c].getRowNumber())for(let u=1;u<=this.barcodeColumnCount;u++){let d=this.detectionResultColumns[u].getCodewords()[c];d!=null&&(d.setRowNumber(s[c].getRowNumber()),d.hasValidRowNumber()||(this.detectionResultColumns[u].getCodewords()[c]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let s=0,a=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let c=0;c<a.length;c++){if(a[c]==null)continue;let u=a[c].getRowNumber(),d=0;for(let f=this.barcodeColumnCount+1;f>0&&d<this.ADJUST_ROW_NUMBER_SKIP;f--){let p=this.detectionResultColumns[f].getCodewords()[c];p!=null&&(d=bl.adjustRowNumberIfValid(u,d,p),p.hasValidRowNumber()||s++)}}return s}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let s=0,a=this.detectionResultColumns[0].getCodewords();for(let c=0;c<a.length;c++){if(a[c]==null)continue;let u=a[c].getRowNumber(),d=0;for(let f=1;f<this.barcodeColumnCount+1&&d<this.ADJUST_ROW_NUMBER_SKIP;f++){let p=this.detectionResultColumns[f].getCodewords()[c];p!=null&&(d=bl.adjustRowNumberIfValid(u,d,p),p.hasValidRowNumber()||s++)}}return s}static adjustRowNumberIfValid(s,a,c){return c==null||c.hasValidRowNumber()||(c.isValidRowNumber(s)?(c.setRowNumber(s),a=0):++a),a}adjustRowNumbers(s,a,c){if(!this.detectionResultColumns[s-1])return;let u=c[a],d=this.detectionResultColumns[s-1].getCodewords(),f=d;this.detectionResultColumns[s+1]!=null&&(f=this.detectionResultColumns[s+1].getCodewords());let p=new Array(14);p[2]=d[a],p[3]=f[a],a>0&&(p[0]=c[a-1],p[4]=d[a-1],p[5]=f[a-1]),a>1&&(p[8]=c[a-2],p[10]=d[a-2],p[11]=f[a-2]),a<c.length-1&&(p[1]=c[a+1],p[6]=d[a+1],p[7]=f[a+1]),a<c.length-2&&(p[9]=c[a+2],p[12]=d[a+2],p[13]=f[a+2]);for(let y of p)if(bl.adjustRowNumber(u,y))return}static adjustRowNumber(s,a){return a==null?!1:a.hasValidRowNumber()&&a.getBucket()===s.getBucket()?(s.setRowNumber(a.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(s){this.boundingBox=s}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(s,a){this.detectionResultColumns[s]=a}getDetectionResultColumn(s){return this.detectionResultColumns[s]}toString(){let s=this.detectionResultColumns[0];s==null&&(s=this.detectionResultColumns[this.barcodeColumnCount+1]);let a=new wl;for(let c=0;c<s.getCodewords().length;c++){a.format("CW %3d:",c);for(let u=0;u<this.barcodeColumnCount+2;u++){if(this.detectionResultColumns[u]==null){a.format("    |   ");continue}let d=this.detectionResultColumns[u].getCodewords()[c];if(d==null){a.format("    |   ");continue}a.format(" %3d|%3d",d.getRowNumber(),d.getValue())}a.format("%n")}return a.toString()}}let pA=(()=>{class C{constructor(a,c,u,d){this.rowNumber=C.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(a),this.endX=Math.trunc(c),this.bucket=Math.trunc(u),this.value=Math.trunc(d)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(a){return a!==C.BARCODE_ROW_UNKNOWN&&this.bucket===a%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(a){this.rowNumber=a}toString(){return this.rowNumber+"|"+this.value}}return C.BARCODE_ROW_UNKNOWN=-1,C})();class Zn{static initialize(){for(let s=0;s<xe.SYMBOL_TABLE.length;s++){let a=xe.SYMBOL_TABLE[s],c=a&1;for(let u=0;u<xe.BARS_IN_MODULE;u++){let d=0;for(;(a&1)===c;)d+=1,a>>=1;c=a&1,Zn.RATIOS_TABLE[s]||(Zn.RATIOS_TABLE[s]=new Array(xe.BARS_IN_MODULE)),Zn.RATIOS_TABLE[s][xe.BARS_IN_MODULE-u-1]=Math.fround(d/xe.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(s){let a=Zn.getDecodedCodewordValue(Zn.sampleBitCounts(s));return a!==-1?a:Zn.getClosestDecodedValue(s)}static sampleBitCounts(s){let a=nt.sum(s),c=new Int32Array(xe.BARS_IN_MODULE),u=0,d=0;for(let f=0;f<xe.MODULES_IN_CODEWORD;f++){let p=a/(2*xe.MODULES_IN_CODEWORD)+f*a/xe.MODULES_IN_CODEWORD;d+s[u]<=p&&(d+=s[u],u++),c[u]++}return c}static getDecodedCodewordValue(s){let a=Zn.getBitValue(s);return xe.getCodeword(a)===-1?-1:a}static getBitValue(s){let a=0;for(let c=0;c<s.length;c++)for(let u=0;u<s[c];u++)a=a<<1|(c%2===0?1:0);return Math.trunc(a)}static getClosestDecodedValue(s){let a=nt.sum(s),c=new Array(xe.BARS_IN_MODULE);if(a>1)for(let f=0;f<c.length;f++)c[f]=Math.fround(s[f]/a);let u=Eu.MAX_VALUE,d=-1;this.bSymbolTableReady||Zn.initialize();for(let f=0;f<Zn.RATIOS_TABLE.length;f++){let p=0,y=Zn.RATIOS_TABLE[f];for(let _=0;_<xe.BARS_IN_MODULE;_++){let w=Math.fround(y[_]-c[_]);if(p+=Math.fround(w*w),p>=u)break}p<u&&(u=p,d=xe.SYMBOL_TABLE[f])}return d}}Zn.bSymbolTableReady=!1,Zn.RATIOS_TABLE=new Array(xe.SYMBOL_TABLE.length).map(C=>C=new Array(xe.BARS_IN_MODULE));class zC{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(s){this.segmentIndex=s}getFileId(){return this.fileId}setFileId(s){this.fileId=s}getOptionalData(){return this.optionalData}setOptionalData(s){this.optionalData=s}isLastSegment(){return this.lastSegment}setLastSegment(s){this.lastSegment=s}getSegmentCount(){return this.segmentCount}setSegmentCount(s){this.segmentCount=s}getSender(){return this.sender||null}setSender(s){this.sender=s}getAddressee(){return this.addressee||null}setAddressee(s){this.addressee=s}getFileName(){return this.fileName}setFileName(s){this.fileName=s}getFileSize(){return this.fileSize}setFileSize(s){this.fileSize=s}getChecksum(){return this.checksum}setChecksum(s){this.checksum=s}getTimestamp(){return this.timestamp}setTimestamp(s){this.timestamp=s}}class WC{static parseLong(s,a=void 0){return parseInt(s,a)}}let gA=(()=>{class C extends h{}return C.kind="NullPointerException",C})();class mA{writeBytes(s){this.writeBytesOffset(s,0,s.length)}writeBytesOffset(s,a,c){if(s==null)throw new gA;if(a<0||a>s.length||c<0||a+c>s.length||a+c<0)throw new P;if(c===0)return;for(let u=0;u<c;u++)this.write(s[a+u])}flush(){}close(){}}class yA extends h{}class _A extends mA{constructor(s=32){if(super(),this.count=0,s<0)throw new m("Negative initial size: "+s);this.buf=new Uint8Array(s)}ensureCapacity(s){s-this.buf.length>0&&this.grow(s)}grow(s){let c=this.buf.length<<1;if(c-s<0&&(c=s),c<0){if(s<0)throw new yA;c=q.MAX_VALUE}this.buf=Z.copyOfUint8Array(this.buf,c)}write(s){this.ensureCapacity(this.count+1),this.buf[this.count]=s,this.count+=1}writeBytesOffset(s,a,c){if(a<0||a>s.length||c<0||a+c-s.length>0)throw new P;this.ensureCapacity(this.count+c),T.arraycopy(s,a,this.buf,this.count,c),this.count+=c}writeTo(s){s.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return Z.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(s){return s?typeof s=="string"?this.toString_string(s):this.toString_number(s):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(s){return new String(this.buf).toString()}toString_number(s){return new String(this.buf).toString()}close(){}}var It=function(C){return C[C.ALPHA=0]="ALPHA",C[C.LOWER=1]="LOWER",C[C.MIXED=2]="MIXED",C[C.PUNCT=3]="PUNCT",C[C.ALPHA_SHIFT=4]="ALPHA_SHIFT",C[C.PUNCT_SHIFT=5]="PUNCT_SHIFT",C}(It||{});function GC(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let Ru;function so(C){if(typeof Ru>"u"&&(Ru=GC()),Ru===null)throw new Error("BigInt is not supported!");return Ru(C)}function CA(){let C=[];C[0]=so(1);let s=so(900);C[1]=s;for(let a=2;a<16;a++)C[a]=C[a-1]*s;return C}class B{static decode(s,a){let c=new vt(""),u=Y.ISO8859_1;c.enableDecoding(u);let d=1,f=s[d++],p=new zC;for(;d<s[0];){switch(f){case B.TEXT_COMPACTION_MODE_LATCH:d=B.textCompaction(s,d,c);break;case B.BYTE_COMPACTION_MODE_LATCH:case B.BYTE_COMPACTION_MODE_LATCH_6:d=B.byteCompaction(f,s,u,d,c);break;case B.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(s[d++]);break;case B.NUMERIC_COMPACTION_MODE_LATCH:d=B.numericCompaction(s,d,c);break;case B.ECI_CHARSET:let _=Y.getCharacterSetECIByValue(s[d++]);break;case B.ECI_GENERAL_PURPOSE:d+=2;break;case B.ECI_USER_DEFINED:d++;break;case B.BEGIN_MACRO_PDF417_CONTROL_BLOCK:d=B.decodeMacroBlock(s,d,p);break;case B.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case B.MACRO_PDF417_TERMINATOR:throw new G;default:d--,d=B.textCompaction(s,d,c);break}if(d<s.length)f=s[d++];else throw G.getFormatInstance()}if(c.length()===0)throw G.getFormatInstance();let y=new hl(null,c.toString(),null,a);return y.setOther(p),y}static decodeMacroBlock(s,a,c){if(a+B.NUMBER_OF_SEQUENCE_CODEWORDS>s[0])throw G.getFormatInstance();let u=new Int32Array(B.NUMBER_OF_SEQUENCE_CODEWORDS);for(let p=0;p<B.NUMBER_OF_SEQUENCE_CODEWORDS;p++,a++)u[p]=s[a];c.setSegmentIndex(q.parseInt(B.decodeBase900toBase10(u,B.NUMBER_OF_SEQUENCE_CODEWORDS)));let d=new vt;a=B.textCompaction(s,a,d),c.setFileId(d.toString());let f=-1;for(s[a]===B.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(f=a+1);a<s[0];)switch(s[a]){case B.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(a++,s[a]){case B.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let p=new vt;a=B.textCompaction(s,a+1,p),c.setFileName(p.toString());break;case B.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let y=new vt;a=B.textCompaction(s,a+1,y),c.setSender(y.toString());break;case B.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let _=new vt;a=B.textCompaction(s,a+1,_),c.setAddressee(_.toString());break;case B.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let w=new vt;a=B.numericCompaction(s,a+1,w),c.setSegmentCount(q.parseInt(w.toString()));break;case B.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let x=new vt;a=B.numericCompaction(s,a+1,x),c.setTimestamp(WC.parseLong(x.toString()));break;case B.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let E=new vt;a=B.numericCompaction(s,a+1,E),c.setChecksum(q.parseInt(E.toString()));break;case B.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let D=new vt;a=B.numericCompaction(s,a+1,D),c.setFileSize(WC.parseLong(D.toString()));break;default:throw G.getFormatInstance()}break;case B.MACRO_PDF417_TERMINATOR:a++,c.setLastSegment(!0);break;default:throw G.getFormatInstance()}if(f!==-1){let p=a-f;c.isLastSegment()&&p--,c.setOptionalData(Z.copyOfRange(s,f,f+p))}return a}static textCompaction(s,a,c){let u=new Int32Array((s[0]-a)*2),d=new Int32Array((s[0]-a)*2),f=0,p=!1;for(;a<s[0]&&!p;){let y=s[a++];if(y<B.TEXT_COMPACTION_MODE_LATCH)u[f]=y/30,u[f+1]=y%30,f+=2;else switch(y){case B.TEXT_COMPACTION_MODE_LATCH:u[f++]=B.TEXT_COMPACTION_MODE_LATCH;break;case B.BYTE_COMPACTION_MODE_LATCH:case B.BYTE_COMPACTION_MODE_LATCH_6:case B.NUMERIC_COMPACTION_MODE_LATCH:case B.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case B.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case B.MACRO_PDF417_TERMINATOR:a--,p=!0;break;case B.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u[f]=B.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,y=s[a++],d[f]=y,f++;break}}return B.decodeTextCompaction(u,d,f,c),a}static decodeTextCompaction(s,a,c,u){let d=It.ALPHA,f=It.ALPHA,p=0;for(;p<c;){let y=s[p],_="";switch(d){case It.ALPHA:if(y<26)_=String.fromCharCode(65+y);else switch(y){case 26:_=" ";break;case B.LL:d=It.LOWER;break;case B.ML:d=It.MIXED;break;case B.PS:f=d,d=It.PUNCT_SHIFT;break;case B.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(a[p]);break;case B.TEXT_COMPACTION_MODE_LATCH:d=It.ALPHA;break}break;case It.LOWER:if(y<26)_=String.fromCharCode(97+y);else switch(y){case 26:_=" ";break;case B.AS:f=d,d=It.ALPHA_SHIFT;break;case B.ML:d=It.MIXED;break;case B.PS:f=d,d=It.PUNCT_SHIFT;break;case B.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(a[p]);break;case B.TEXT_COMPACTION_MODE_LATCH:d=It.ALPHA;break}break;case It.MIXED:if(y<B.PL)_=B.MIXED_CHARS[y];else switch(y){case B.PL:d=It.PUNCT;break;case 26:_=" ";break;case B.LL:d=It.LOWER;break;case B.AL:d=It.ALPHA;break;case B.PS:f=d,d=It.PUNCT_SHIFT;break;case B.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(a[p]);break;case B.TEXT_COMPACTION_MODE_LATCH:d=It.ALPHA;break}break;case It.PUNCT:if(y<B.PAL)_=B.PUNCT_CHARS[y];else switch(y){case B.PAL:d=It.ALPHA;break;case B.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(a[p]);break;case B.TEXT_COMPACTION_MODE_LATCH:d=It.ALPHA;break}break;case It.ALPHA_SHIFT:if(d=f,y<26)_=String.fromCharCode(65+y);else switch(y){case 26:_=" ";break;case B.TEXT_COMPACTION_MODE_LATCH:d=It.ALPHA;break}break;case It.PUNCT_SHIFT:if(d=f,y<B.PAL)_=B.PUNCT_CHARS[y];else switch(y){case B.PAL:d=It.ALPHA;break;case B.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(a[p]);break;case B.TEXT_COMPACTION_MODE_LATCH:d=It.ALPHA;break}break}_!==""&&u.append(_),p++}}static byteCompaction(s,a,c,u,d){let f=new _A,p=0,y=0,_=!1;switch(s){case B.BYTE_COMPACTION_MODE_LATCH:let w=new Int32Array(6),x=a[u++];for(;u<a[0]&&!_;)switch(w[p++]=x,y=900*y+x,x=a[u++],x){case B.TEXT_COMPACTION_MODE_LATCH:case B.BYTE_COMPACTION_MODE_LATCH:case B.NUMERIC_COMPACTION_MODE_LATCH:case B.BYTE_COMPACTION_MODE_LATCH_6:case B.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case B.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case B.MACRO_PDF417_TERMINATOR:u--,_=!0;break;default:if(p%5===0&&p>0){for(let E=0;E<6;++E)f.write(Number(so(y)>>so(8*(5-E))));y=0,p=0}break}u===a[0]&&x<B.TEXT_COMPACTION_MODE_LATCH&&(w[p++]=x);for(let E=0;E<p;E++)f.write(w[E]);break;case B.BYTE_COMPACTION_MODE_LATCH_6:for(;u<a[0]&&!_;){let E=a[u++];if(E<B.TEXT_COMPACTION_MODE_LATCH)p++,y=900*y+E;else switch(E){case B.TEXT_COMPACTION_MODE_LATCH:case B.BYTE_COMPACTION_MODE_LATCH:case B.NUMERIC_COMPACTION_MODE_LATCH:case B.BYTE_COMPACTION_MODE_LATCH_6:case B.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case B.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case B.MACRO_PDF417_TERMINATOR:u--,_=!0;break}if(p%5===0&&p>0){for(let D=0;D<6;++D)f.write(Number(so(y)>>so(8*(5-D))));y=0,p=0}}break}return d.append(Tn.decode(f.toByteArray(),c)),u}static numericCompaction(s,a,c){let u=0,d=!1,f=new Int32Array(B.MAX_NUMERIC_CODEWORDS);for(;a<s[0]&&!d;){let p=s[a++];if(a===s[0]&&(d=!0),p<B.TEXT_COMPACTION_MODE_LATCH)f[u]=p,u++;else switch(p){case B.TEXT_COMPACTION_MODE_LATCH:case B.BYTE_COMPACTION_MODE_LATCH:case B.BYTE_COMPACTION_MODE_LATCH_6:case B.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case B.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case B.MACRO_PDF417_TERMINATOR:a--,d=!0;break}(u%B.MAX_NUMERIC_CODEWORDS===0||p===B.NUMERIC_COMPACTION_MODE_LATCH||d)&&u>0&&(c.append(B.decodeBase900toBase10(f,u)),u=0)}return a}static decodeBase900toBase10(s,a){let c=so(0);for(let d=0;d<a;d++)c+=B.EXP900[a-d-1]*so(s[d]);let u=c.toString();if(u.charAt(0)!=="1")throw new G;return u.substring(1)}}B.TEXT_COMPACTION_MODE_LATCH=900,B.BYTE_COMPACTION_MODE_LATCH=901,B.NUMERIC_COMPACTION_MODE_LATCH=902,B.BYTE_COMPACTION_MODE_LATCH_6=924,B.ECI_USER_DEFINED=925,B.ECI_GENERAL_PURPOSE=926,B.ECI_CHARSET=927,B.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,B.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,B.MACRO_PDF417_TERMINATOR=922,B.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,B.MAX_NUMERIC_CODEWORDS=15,B.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,B.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,B.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,B.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,B.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,B.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,B.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,B.PL=25,B.LL=27,B.AS=27,B.ML=28,B.AL=28,B.PS=29,B.PAL=29,B.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,B.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",B.EXP900=GC()?CA():[],B.NUMBER_OF_SEQUENCE_CODEWORDS=2;class He{constructor(){}static decode(s,a,c,u,d,f,p){let y=new Yo(s,a,c,u,d),_=null,w=null,x;for(let O=!0;;O=!1){if(a!=null&&(_=He.getRowIndicatorColumn(s,y,a,!0,f,p)),u!=null&&(w=He.getRowIndicatorColumn(s,y,u,!1,f,p)),x=He.merge(_,w),x==null)throw H.getNotFoundInstance();let N=x.getBoundingBox();if(O&&N!=null&&(N.getMinY()<y.getMinY()||N.getMaxY()>y.getMaxY()))y=N;else break}x.setBoundingBox(y);let E=x.getBarcodeColumnCount()+1;x.setDetectionResultColumn(0,_),x.setDetectionResultColumn(E,w);let D=_!=null;for(let O=1;O<=E;O++){let N=D?O:E-O;if(x.getDetectionResultColumn(N)!==void 0)continue;let k;N===0||N===E?k=new HC(y,N===0):k=new jC(y),x.setDetectionResultColumn(N,k);let L=-1,X=L;for(let ie=y.getMinY();ie<=y.getMaxY();ie++){if(L=He.getStartColumn(x,N,ie,D),L<0||L>y.getMaxX()){if(X===-1)continue;L=X}let U=He.detectCodeword(s,y.getMinX(),y.getMaxX(),D,L,ie,f,p);U!=null&&(k.setCodeword(ie,U),X=L,f=Math.min(f,U.getWidth()),p=Math.max(p,U.getWidth()))}}return He.createDecoderResult(x)}static merge(s,a){if(s==null&&a==null)return null;let c=He.getBarcodeMetadata(s,a);if(c==null)return null;let u=Yo.merge(He.adjustBoundingBox(s),He.adjustBoundingBox(a));return new bl(c,u)}static adjustBoundingBox(s){if(s==null)return null;let a=s.getRowHeights();if(a==null)return null;let c=He.getMax(a),u=0;for(let p of a)if(u+=c-p,p>0)break;let d=s.getCodewords();for(let p=0;u>0&&d[p]==null;p++)u--;let f=0;for(let p=a.length-1;p>=0&&(f+=c-a[p],!(a[p]>0));p--);for(let p=d.length-1;f>0&&d[p]==null;p--)f--;return s.getBoundingBox().addMissingRows(u,f,s.isLeft())}static getMax(s){let a=-1;for(let c of s)a=Math.max(a,c);return a}static getBarcodeMetadata(s,a){let c;if(s==null||(c=s.getBarcodeMetadata())==null)return a==null?null:a.getBarcodeMetadata();let u;return a==null||(u=a.getBarcodeMetadata())==null?c:c.getColumnCount()!==u.getColumnCount()&&c.getErrorCorrectionLevel()!==u.getErrorCorrectionLevel()&&c.getRowCount()!==u.getRowCount()?null:c}static getRowIndicatorColumn(s,a,c,u,d,f){let p=new HC(a,u);for(let y=0;y<2;y++){let _=y===0?1:-1,w=Math.trunc(Math.trunc(c.getX()));for(let x=Math.trunc(Math.trunc(c.getY()));x<=a.getMaxY()&&x>=a.getMinY();x+=_){let E=He.detectCodeword(s,0,s.getWidth(),u,w,x,d,f);E!=null&&(p.setCodeword(x,E),u?w=E.getStartX():w=E.getEndX())}}return p}static adjustCodewordCount(s,a){let c=a[0][1],u=c.getValue(),d=s.getBarcodeColumnCount()*s.getBarcodeRowCount()-He.getNumberOfECCodeWords(s.getBarcodeECLevel());if(u.length===0){if(d<1||d>xe.MAX_CODEWORDS_IN_BARCODE)throw H.getNotFoundInstance();c.setValue(d)}else u[0]!==d&&c.setValue(d)}static createDecoderResult(s){let a=He.createBarcodeMatrix(s);He.adjustCodewordCount(s,a);let c=new Array,u=new Int32Array(s.getBarcodeRowCount()*s.getBarcodeColumnCount()),d=[],f=new Array;for(let y=0;y<s.getBarcodeRowCount();y++)for(let _=0;_<s.getBarcodeColumnCount();_++){let w=a[y][_+1].getValue(),x=y*s.getBarcodeColumnCount()+_;w.length===0?c.push(x):w.length===1?u[x]=w[0]:(f.push(x),d.push(w))}let p=new Array(d.length);for(let y=0;y<p.length;y++)p[y]=d[y];return He.createDecoderResultFromAmbiguousValues(s.getBarcodeECLevel(),u,xe.toIntArray(c),xe.toIntArray(f),p)}static createDecoderResultFromAmbiguousValues(s,a,c,u,d){let f=new Int32Array(u.length),p=100;for(;p-- >0;){for(let y=0;y<f.length;y++)a[u[y]]=d[y][f[y]];try{return He.decodeCodewords(a,s,c)}catch(y){if(!(y instanceof b))throw y}if(f.length===0)throw b.getChecksumInstance();for(let y=0;y<f.length;y++)if(f[y]<d[y].length-1){f[y]++;break}else if(f[y]=0,y===f.length-1)throw b.getChecksumInstance()}throw b.getChecksumInstance()}static createBarcodeMatrix(s){let a=Array.from({length:s.getBarcodeRowCount()},()=>new Array(s.getBarcodeColumnCount()+2));for(let u=0;u<a.length;u++)for(let d=0;d<a[u].length;d++)a[u][d]=new vl;let c=0;for(let u of s.getDetectionResultColumns()){if(u!=null){for(let d of u.getCodewords())if(d!=null){let f=d.getRowNumber();if(f>=0){if(f>=a.length)continue;a[f][c].setValue(d.getValue())}}}c++}return a}static isValidBarcodeColumn(s,a){return a>=0&&a<=s.getBarcodeColumnCount()+1}static getStartColumn(s,a,c,u){let d=u?1:-1,f=null;if(He.isValidBarcodeColumn(s,a-d)&&(f=s.getDetectionResultColumn(a-d).getCodeword(c)),f!=null)return u?f.getEndX():f.getStartX();if(f=s.getDetectionResultColumn(a).getCodewordNearby(c),f!=null)return u?f.getStartX():f.getEndX();if(He.isValidBarcodeColumn(s,a-d)&&(f=s.getDetectionResultColumn(a-d).getCodewordNearby(c)),f!=null)return u?f.getEndX():f.getStartX();let p=0;for(;He.isValidBarcodeColumn(s,a-d);){a-=d;for(let y of s.getDetectionResultColumn(a).getCodewords())if(y!=null)return(u?y.getEndX():y.getStartX())+d*p*(y.getEndX()-y.getStartX());p++}return u?s.getBoundingBox().getMinX():s.getBoundingBox().getMaxX()}static detectCodeword(s,a,c,u,d,f,p,y){d=He.adjustCodewordStartColumn(s,a,c,u,d,f);let _=He.getModuleBitCount(s,a,c,u,d,f);if(_==null)return null;let w,x=nt.sum(_);if(u)w=d+x;else{for(let O=0;O<_.length/2;O++){let N=_[O];_[O]=_[_.length-1-O],_[_.length-1-O]=N}w=d,d=w-x}if(!He.checkCodewordSkew(x,p,y))return null;let E=Zn.getDecodedValue(_),D=xe.getCodeword(E);return D===-1?null:new pA(d,w,He.getCodewordBucketNumber(E),D)}static getModuleBitCount(s,a,c,u,d,f){let p=d,y=new Int32Array(8),_=0,w=u?1:-1,x=u;for(;(u?p<c:p>=a)&&_<y.length;)s.get(p,f)===x?(y[_]++,p+=w):(_++,x=!x);return _===y.length||p===(u?c:a)&&_===y.length-1?y:null}static getNumberOfECCodeWords(s){return 2<<s}static adjustCodewordStartColumn(s,a,c,u,d,f){let p=d,y=u?-1:1;for(let _=0;_<2;_++){for(;(u?p>=a:p<c)&&u===s.get(p,f);){if(Math.abs(d-p)>He.CODEWORD_SKEW_SIZE)return d;p+=y}y=-y,u=!u}return p}static checkCodewordSkew(s,a,c){return a-He.CODEWORD_SKEW_SIZE<=s&&s<=c+He.CODEWORD_SKEW_SIZE}static decodeCodewords(s,a,c){if(s.length===0)throw G.getFormatInstance();let u=1<<a+1,d=He.correctErrors(s,c,u);He.verifyCodewordCount(s,u);let f=B.decode(s,""+a);return f.setErrorsCorrected(d),f.setErasures(c.length),f}static correctErrors(s,a,c){if(a!=null&&a.length>c/2+He.MAX_ERRORS||c<0||c>He.MAX_EC_CODEWORDS)throw b.getChecksumInstance();return He.errorCorrection.decode(s,c,a)}static verifyCodewordCount(s,a){if(s.length<4)throw G.getFormatInstance();let c=s[0];if(c>s.length)throw G.getFormatInstance();if(c===0)if(a<s.length)s[0]=s.length-a;else throw G.getFormatInstance()}static getBitCountForCodeword(s){let a=new Int32Array(8),c=0,u=a.length-1;for(;!((s&1)!==c&&(c=s&1,u--,u<0));)a[u]++,s>>=1;return a}static getCodewordBucketNumber(s){return s instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(s):this.getCodewordBucketNumber_number(s)}static getCodewordBucketNumber_number(s){return He.getCodewordBucketNumber(He.getBitCountForCodeword(s))}static getCodewordBucketNumber_Int32Array(s){return(s[0]-s[2]+s[4]-s[6]+9)%9}static toString(s){let a=new wl;for(let c=0;c<s.length;c++){a.format("Row %2d: ",c);for(let u=0;u<s[c].length;u++){let d=s[c][u];d.getValue().length===0?a.format("        ",null):a.format("%4d(%2d)",d.getValue()[0],d.getConfidence(d.getValue()[0]))}a.format("%n")}return a.toString()}}He.CODEWORD_SKEW_SIZE=2,He.MAX_ERRORS=3,He.MAX_EC_CODEWORDS=512,He.errorCorrection=new VC;class Cn{decode(s,a=null){let c=Cn.decode(s,a,!1);if(c==null||c.length===0||c[0]==null)throw H.getNotFoundInstance();return c[0]}decodeMultiple(s,a=null){try{return Cn.decode(s,a,!0)}catch(c){throw c instanceof G||c instanceof b?H.getNotFoundInstance():c}}static decode(s,a,c){let u=new Array,d=Be.detectMultiple(s,a,c);for(let f of d.getPoints()){let p=He.decode(d.getBits(),f[4],f[5],f[6],f[7],Cn.getMinCodewordWidth(f),Cn.getMaxCodewordWidth(f)),y=new Ln(p.getText(),p.getRawBytes(),void 0,f,we.PDF_417);y.putMetadata(hn.ERROR_CORRECTION_LEVEL,p.getECLevel());let _=p.getOther();_!=null&&y.putMetadata(hn.PDF417_EXTRA_METADATA,_),u.push(y)}return u.map(f=>f)}static getMaxWidth(s,a){return s==null||a==null?0:Math.trunc(Math.abs(s.getX()-a.getX()))}static getMinWidth(s,a){return s==null||a==null?q.MAX_VALUE:Math.trunc(Math.abs(s.getX()-a.getX()))}static getMaxCodewordWidth(s){return Math.floor(Math.max(Math.max(Cn.getMaxWidth(s[0],s[4]),Cn.getMaxWidth(s[6],s[2])*xe.MODULES_IN_CODEWORD/xe.MODULES_IN_STOP_PATTERN),Math.max(Cn.getMaxWidth(s[1],s[5]),Cn.getMaxWidth(s[7],s[3])*xe.MODULES_IN_CODEWORD/xe.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(s){return Math.floor(Math.min(Math.min(Cn.getMinWidth(s[0],s[4]),Cn.getMinWidth(s[6],s[2])*xe.MODULES_IN_CODEWORD/xe.MODULES_IN_STOP_PATTERN),Math.min(Cn.getMinWidth(s[1],s[5]),Cn.getMinWidth(s[7],s[3])*xe.MODULES_IN_CODEWORD/xe.MODULES_IN_STOP_PATTERN)))}reset(){}}let zp=(()=>{class C extends h{}return C.kind="ReaderException",C})();class $C{constructor(s,a){this.verbose=s===!0,a&&this.setHints(a)}decode(s,a){return a&&this.setHints(a),this.decodeInternal(s)}decodeWithState(s){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(s)}setHints(s){this.hints=s;let a=!n(s)&&s.get(ye.TRY_HARDER)===!0,c=n(s)?null:s.get(ye.POSSIBLE_FORMATS),u=new Array;if(!n(c)){let d=c.some(f=>f===we.UPC_A||f===we.UPC_E||f===we.EAN_13||f===we.EAN_8||f===we.CODABAR||f===we.CODE_39||f===we.CODE_93||f===we.CODE_128||f===we.ITF||f===we.RSS_14||f===we.RSS_EXPANDED);d&&!a&&u.push(new Hs(s,this.verbose)),c.includes(we.QR_CODE)&&u.push(new oo),c.includes(we.DATA_MATRIX)&&u.push(new Ou),c.includes(we.AZTEC)&&u.push(new Du),c.includes(we.PDF_417)&&u.push(new Cn),d&&a&&u.push(new Hs(s,this.verbose))}u.length===0&&(a||u.push(new Hs(s,this.verbose)),u.push(new oo),u.push(new Ou),u.push(new Du),u.push(new Cn),a&&u.push(new Hs(s,this.verbose))),this.readers=u}reset(){if(this.readers!==null)for(let s of this.readers)s.reset()}decodeInternal(s){if(this.readers===null)throw new zp("No readers where selected, nothing can be read.");for(let a of this.readers)try{return a.decode(s,this.hints)}catch(c){if(c instanceof zp)continue}throw new H("No MultiFormat Readers were able to detect the code.")}}class wA extends Wo{constructor(s=null,a=500){let c=new $C;c.setHints(s),super(c,a)}decodeBitmap(s){return this.reader.decodeWithState(s)}}class vA extends Wo{constructor(s=500){super(new Cn,s)}}class bA extends Wo{constructor(s=500){super(new oo,s)}}var qC=function(C){return C[C.ERROR_CORRECTION=0]="ERROR_CORRECTION",C[C.CHARACTER_SET=1]="CHARACTER_SET",C[C.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",C[C.MIN_SIZE=3]="MIN_SIZE",C[C.MAX_SIZE=4]="MAX_SIZE",C[C.MARGIN=5]="MARGIN",C[C.PDF417_COMPACT=6]="PDF417_COMPACT",C[C.PDF417_COMPACTION=7]="PDF417_COMPACTION",C[C.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",C[C.AZTEC_LAYERS=9]="AZTEC_LAYERS",C[C.QR_VERSION=10]="QR_VERSION",C}(qC||{}),tn=qC;class Wp{constructor(s){this.field=s,this.cachedGenerators=[],this.cachedGenerators.push(new Yn(s,Int32Array.from([1])))}buildGenerator(s){let a=this.cachedGenerators;if(s>=a.length){let c=a[a.length-1],u=this.field;for(let d=a.length;d<=s;d++){let f=c.multiply(new Yn(u,Int32Array.from([1,u.exp(d-1+u.getGeneratorBase())])));a.push(f),c=f}}return a[s]}encode(s,a){if(a===0)throw new m("No error correction bytes");let c=s.length-a;if(c<=0)throw new m("No data bytes provided");let u=this.buildGenerator(a),d=new Int32Array(c);T.arraycopy(s,0,d,0,c);let f=new Yn(this.field,d);f=f.multiplyByMonomial(a,1);let y=f.divide(u)[1].getCoefficients(),_=a-y.length;for(let w=0;w<_;w++)s[c+w]=0;T.arraycopy(y,0,s,c+_,y.length)}}let zs=(()=>{class C{constructor(){}static applyMaskPenaltyRule1(a){return C.applyMaskPenaltyRule1Internal(a,!0)+C.applyMaskPenaltyRule1Internal(a,!1)}static applyMaskPenaltyRule2(a){let c=0,u=a.getArray(),d=a.getWidth(),f=a.getHeight();for(let p=0;p<f-1;p++){let y=u[p];for(let _=0;_<d-1;_++){let w=y[_];w===y[_+1]&&w===u[p+1][_]&&w===u[p+1][_+1]&&c++}}return C.N2*c}static applyMaskPenaltyRule3(a){let c=0,u=a.getArray(),d=a.getWidth(),f=a.getHeight();for(let p=0;p<f;p++)for(let y=0;y<d;y++){let _=u[p];y+6<d&&_[y]===1&&_[y+1]===0&&_[y+2]===1&&_[y+3]===1&&_[y+4]===1&&_[y+5]===0&&_[y+6]===1&&(C.isWhiteHorizontal(_,y-4,y)||C.isWhiteHorizontal(_,y+7,y+11))&&c++,p+6<f&&u[p][y]===1&&u[p+1][y]===0&&u[p+2][y]===1&&u[p+3][y]===1&&u[p+4][y]===1&&u[p+5][y]===0&&u[p+6][y]===1&&(C.isWhiteVertical(u,y,p-4,p)||C.isWhiteVertical(u,y,p+7,p+11))&&c++}return c*C.N3}static isWhiteHorizontal(a,c,u){c=Math.max(c,0),u=Math.min(u,a.length);for(let d=c;d<u;d++)if(a[d]===1)return!1;return!0}static isWhiteVertical(a,c,u,d){u=Math.max(u,0),d=Math.min(d,a.length);for(let f=u;f<d;f++)if(a[f][c]===1)return!1;return!0}static applyMaskPenaltyRule4(a){let c=0,u=a.getArray(),d=a.getWidth(),f=a.getHeight();for(let _=0;_<f;_++){let w=u[_];for(let x=0;x<d;x++)w[x]===1&&c++}let p=a.getHeight()*a.getWidth();return Math.floor(Math.abs(c*2-p)*10/p)*C.N4}static getDataMaskBit(a,c,u){let d,f;switch(a){case 0:d=u+c&1;break;case 1:d=u&1;break;case 2:d=c%3;break;case 3:d=(u+c)%3;break;case 4:d=Math.floor(u/2)+Math.floor(c/3)&1;break;case 5:f=u*c,d=(f&1)+f%3;break;case 6:f=u*c,d=(f&1)+f%3&1;break;case 7:f=u*c,d=f%3+(u+c&1)&1;break;default:throw new m("Invalid mask pattern: "+a)}return d===0}static applyMaskPenaltyRule1Internal(a,c){let u=0,d=c?a.getHeight():a.getWidth(),f=c?a.getWidth():a.getHeight(),p=a.getArray();for(let y=0;y<d;y++){let _=0,w=-1;for(let x=0;x<f;x++){let E=c?p[y][x]:p[x][y];E===w?_++:(_>=5&&(u+=C.N1+(_-5)),_=1,w=E)}_>=5&&(u+=C.N1+(_-5))}return u}}return C.N1=3,C.N2=3,C.N3=40,C.N4=10,C})();class Pu{constructor(s,a){this.width=s,this.height=a;let c=new Array(a);for(let u=0;u!==a;u++)c[u]=new Uint8Array(s);this.bytes=c}getHeight(){return this.height}getWidth(){return this.width}get(s,a){return this.bytes[a][s]}getArray(){return this.bytes}setNumber(s,a,c){this.bytes[a][s]=c}setBoolean(s,a,c){this.bytes[a][s]=c?1:0}clear(s){for(let a of this.bytes)Z.fill(a,s)}equals(s){if(!(s instanceof Pu))return!1;let a=s;if(this.width!==a.width||this.height!==a.height)return!1;for(let c=0,u=this.height;c<u;++c){let d=this.bytes[c],f=a.bytes[c];for(let p=0,y=this.width;p<y;++p)if(d[p]!==f[p])return!1}return!0}toString(){let s=new vt;for(let a=0,c=this.height;a<c;++a){let u=this.bytes[a];for(let d=0,f=this.width;d<f;++d)switch(u[d]){case 0:s.append(" 0");break;case 1:s.append(" 1");break;default:s.append("  ");break}s.append(`
`)}return s.toString()}}let ku=(()=>{class C{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){let a=new vt;return a.append(`<<
`),a.append(" mode: "),a.append(this.mode?this.mode.toString():"null"),a.append(`
 ecLevel: `),a.append(this.ecLevel?this.ecLevel.toString():"null"),a.append(`
 version: `),a.append(this.version?this.version.toString():"null"),a.append(`
 maskPattern: `),a.append(this.maskPattern.toString()),this.matrix?(a.append(`
 matrix:
`),a.append(this.matrix.toString())):a.append(`
 matrix: null
`),a.append(`>>
`),a.toString()}setMode(a){this.mode=a}setECLevel(a){this.ecLevel=a}setVersion(a){this.version=a}setMaskPattern(a){this.maskPattern=a}setMatrix(a){this.matrix=a}static isValidMaskPattern(a){return a>=0&&a<C.NUM_MASK_PATTERNS}}return C.NUM_MASK_PATTERNS=8,C})(),Ot=(()=>{class C extends h{}return C.kind="WriterException",C})();class ve{constructor(){}static clearMatrix(s){s.clear(255)}static buildMatrix(s,a,c,u,d){ve.clearMatrix(d),ve.embedBasicPatterns(c,d),ve.embedTypeInfo(a,u,d),ve.maybeEmbedVersionInfo(c,d),ve.embedDataBits(s,u,d)}static embedBasicPatterns(s,a){ve.embedPositionDetectionPatternsAndSeparators(a),ve.embedDarkDotAtLeftBottomCorner(a),ve.maybeEmbedPositionAdjustmentPatterns(s,a),ve.embedTimingPatterns(a)}static embedTypeInfo(s,a,c){let u=new ce;ve.makeTypeInfoBits(s,a,u);for(let d=0,f=u.getSize();d<f;++d){let p=u.get(u.getSize()-1-d),y=ve.TYPE_INFO_COORDINATES[d],_=y[0],w=y[1];if(c.setBoolean(_,w,p),d<8){let x=c.getWidth()-d-1;c.setBoolean(x,8,p)}else{let E=c.getHeight()-7+(d-8);c.setBoolean(8,E,p)}}}static maybeEmbedVersionInfo(s,a){if(s.getVersionNumber()<7)return;let c=new ce;ve.makeVersionInfoBits(s,c);let u=6*3-1;for(let d=0;d<6;++d)for(let f=0;f<3;++f){let p=c.get(u);u--,a.setBoolean(d,a.getHeight()-11+f,p),a.setBoolean(a.getHeight()-11+f,d,p)}}static embedDataBits(s,a,c){let u=0,d=-1,f=c.getWidth()-1,p=c.getHeight()-1;for(;f>0;){for(f===6&&(f-=1);p>=0&&p<c.getHeight();){for(let y=0;y<2;++y){let _=f-y;if(!ve.isEmpty(c.get(_,p)))continue;let w;u<s.getSize()?(w=s.get(u),++u):w=!1,a!==255&&zs.getDataMaskBit(a,_,p)&&(w=!w),c.setBoolean(_,p,w)}p+=d}d=-d,p+=d,f-=2}if(u!==s.getSize())throw new Ot("Not all bits consumed: "+u+"/"+s.getSize())}static findMSBSet(s){return 32-q.numberOfLeadingZeros(s)}static calculateBCHCode(s,a){if(a===0)throw new m("0 polynomial");let c=ve.findMSBSet(a);for(s<<=c-1;ve.findMSBSet(s)>=c;)s^=a<<ve.findMSBSet(s)-c;return s}static makeTypeInfoBits(s,a,c){if(!ku.isValidMaskPattern(a))throw new Ot("Invalid mask pattern");let u=s.getBits()<<3|a;c.appendBits(u,5);let d=ve.calculateBCHCode(u,ve.TYPE_INFO_POLY);c.appendBits(d,10);let f=new ce;if(f.appendBits(ve.TYPE_INFO_MASK_PATTERN,15),c.xor(f),c.getSize()!==15)throw new Ot("should not happen but we got: "+c.getSize())}static makeVersionInfoBits(s,a){a.appendBits(s.getVersionNumber(),6);let c=ve.calculateBCHCode(s.getVersionNumber(),ve.VERSION_INFO_POLY);if(a.appendBits(c,12),a.getSize()!==18)throw new Ot("should not happen but we got: "+a.getSize())}static isEmpty(s){return s===255}static embedTimingPatterns(s){for(let a=8;a<s.getWidth()-8;++a){let c=(a+1)%2;ve.isEmpty(s.get(a,6))&&s.setNumber(a,6,c),ve.isEmpty(s.get(6,a))&&s.setNumber(6,a,c)}}static embedDarkDotAtLeftBottomCorner(s){if(s.get(8,s.getHeight()-8)===0)throw new Ot;s.setNumber(8,s.getHeight()-8,1)}static embedHorizontalSeparationPattern(s,a,c){for(let u=0;u<8;++u){if(!ve.isEmpty(c.get(s+u,a)))throw new Ot;c.setNumber(s+u,a,0)}}static embedVerticalSeparationPattern(s,a,c){for(let u=0;u<7;++u){if(!ve.isEmpty(c.get(s,a+u)))throw new Ot;c.setNumber(s,a+u,0)}}static embedPositionAdjustmentPattern(s,a,c){for(let u=0;u<5;++u){let d=ve.POSITION_ADJUSTMENT_PATTERN[u];for(let f=0;f<5;++f)c.setNumber(s+f,a+u,d[f])}}static embedPositionDetectionPattern(s,a,c){for(let u=0;u<7;++u){let d=ve.POSITION_DETECTION_PATTERN[u];for(let f=0;f<7;++f)c.setNumber(s+f,a+u,d[f])}}static embedPositionDetectionPatternsAndSeparators(s){let a=ve.POSITION_DETECTION_PATTERN[0].length;ve.embedPositionDetectionPattern(0,0,s),ve.embedPositionDetectionPattern(s.getWidth()-a,0,s),ve.embedPositionDetectionPattern(0,s.getWidth()-a,s);let c=8;ve.embedHorizontalSeparationPattern(0,c-1,s),ve.embedHorizontalSeparationPattern(s.getWidth()-c,c-1,s),ve.embedHorizontalSeparationPattern(0,s.getWidth()-c,s);let u=7;ve.embedVerticalSeparationPattern(u,0,s),ve.embedVerticalSeparationPattern(s.getHeight()-u-1,0,s),ve.embedVerticalSeparationPattern(u,s.getHeight()-u,s)}static maybeEmbedPositionAdjustmentPatterns(s,a){if(s.getVersionNumber()<2)return;let c=s.getVersionNumber()-1,u=ve.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[c];for(let d=0,f=u.length;d!==f;d++){let p=u[d];if(p>=0)for(let y=0;y!==f;y++){let _=u[y];_>=0&&ve.isEmpty(a.get(_,p))&&ve.embedPositionAdjustmentPattern(_-2,p-2,a)}}}}ve.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),ve.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),ve.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),ve.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),ve.VERSION_INFO_POLY=7973,ve.TYPE_INFO_POLY=1335,ve.TYPE_INFO_MASK_PATTERN=21522;class xA{constructor(s,a){this.dataBytes=s,this.errorCorrectionBytes=a}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class kt{constructor(){}static calculateMaskPenalty(s){return zs.applyMaskPenaltyRule1(s)+zs.applyMaskPenaltyRule2(s)+zs.applyMaskPenaltyRule3(s)+zs.applyMaskPenaltyRule4(s)}static encode(s,a,c=null){let u=kt.DEFAULT_BYTE_MODE_ENCODING,d=c!==null&&c.get(tn.CHARACTER_SET)!==void 0;d&&(u=c.get(tn.CHARACTER_SET).toString());let f=this.chooseMode(s,u),p=new ce;if(f===_e.BYTE&&(d||kt.DEFAULT_BYTE_MODE_ENCODING!==u)){let ie=Y.getCharacterSetECIByName(u);ie!==void 0&&this.appendECI(ie,p)}this.appendModeInfo(f,p);let y=new ce;this.appendBytes(s,f,y,u);let _;if(c!==null&&c.get(tn.QR_VERSION)!==void 0){let ie=Number.parseInt(c.get(tn.QR_VERSION).toString(),10);_=me.getVersionForNumber(ie);let U=this.calculateBitsNeeded(f,p,y,_);if(!this.willFit(U,_,a))throw new Ot("Data too big for requested version")}else _=this.recommendVersion(a,f,p,y);let w=new ce;w.appendBitArray(p);let x=f===_e.BYTE?y.getSizeInBytes():s.length;this.appendLengthInfo(x,_,f,w),w.appendBitArray(y);let E=_.getECBlocksForLevel(a),D=_.getTotalCodewords()-E.getTotalECCodewords();this.terminateBits(D,w);let O=this.interleaveWithECBytes(w,_.getTotalCodewords(),D,E.getNumBlocks()),N=new ku;N.setECLevel(a),N.setMode(f),N.setVersion(_);let k=_.getDimensionForVersion(),L=new Pu(k,k),X=this.chooseMaskPattern(O,a,_,L);return N.setMaskPattern(X),ve.buildMatrix(O,a,_,X,L),N.setMatrix(L),N}static recommendVersion(s,a,c,u){let d=this.calculateBitsNeeded(a,c,u,me.getVersionForNumber(1)),f=this.chooseVersion(d,s),p=this.calculateBitsNeeded(a,c,u,f);return this.chooseVersion(p,s)}static calculateBitsNeeded(s,a,c,u){return a.getSize()+s.getCharacterCountBits(u)+c.getSize()}static getAlphanumericCode(s){return s<kt.ALPHANUMERIC_TABLE.length?kt.ALPHANUMERIC_TABLE[s]:-1}static chooseMode(s,a=null){if(Y.SJIS.getName()===a&&this.isOnlyDoubleByteKanji(s))return _e.KANJI;let c=!1,u=!1;for(let d=0,f=s.length;d<f;++d){let p=s.charAt(d);if(kt.isDigit(p))c=!0;else if(this.getAlphanumericCode(p.charCodeAt(0))!==-1)u=!0;else return _e.BYTE}return u?_e.ALPHANUMERIC:c?_e.NUMERIC:_e.BYTE}static isOnlyDoubleByteKanji(s){let a;try{a=Tn.encode(s,Y.SJIS)}catch{return!1}let c=a.length;if(c%2!==0)return!1;for(let u=0;u<c;u+=2){let d=a[u]&255;if((d<129||d>159)&&(d<224||d>235))return!1}return!0}static chooseMaskPattern(s,a,c,u){let d=Number.MAX_SAFE_INTEGER,f=-1;for(let p=0;p<ku.NUM_MASK_PATTERNS;p++){ve.buildMatrix(s,a,c,p,u);let y=this.calculateMaskPenalty(u);y<d&&(d=y,f=p)}return f}static chooseVersion(s,a){for(let c=1;c<=40;c++){let u=me.getVersionForNumber(c);if(kt.willFit(s,u,a))return u}throw new Ot("Data too big")}static willFit(s,a,c){let u=a.getTotalCodewords(),f=a.getECBlocksForLevel(c).getTotalECCodewords(),p=u-f,y=(s+7)/8;return p>=y}static terminateBits(s,a){let c=s*8;if(a.getSize()>c)throw new Ot("data bits cannot fit in the QR Code"+a.getSize()+" > "+c);for(let f=0;f<4&&a.getSize()<c;++f)a.appendBit(!1);let u=a.getSize()&7;if(u>0)for(let f=u;f<8;f++)a.appendBit(!1);let d=s-a.getSizeInBytes();for(let f=0;f<d;++f)a.appendBits(f&1?17:236,8);if(a.getSize()!==c)throw new Ot("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(s,a,c,u,d,f){if(u>=c)throw new Ot("Block ID too large");let p=s%c,y=c-p,_=Math.floor(s/c),w=_+1,x=Math.floor(a/c),E=x+1,D=_-x,O=w-E;if(D!==O)throw new Ot("EC bytes mismatch");if(c!==y+p)throw new Ot("RS blocks mismatch");if(s!==(x+D)*y+(E+O)*p)throw new Ot("Total bytes mismatch");u<y?(d[0]=x,f[0]=D):(d[0]=E,f[0]=O)}static interleaveWithECBytes(s,a,c,u){if(s.getSizeInBytes()!==c)throw new Ot("Number of bits and data bytes does not match");let d=0,f=0,p=0,y=new Array;for(let w=0;w<u;++w){let x=new Int32Array(1),E=new Int32Array(1);kt.getNumDataBytesAndNumECBytesForBlockID(a,c,u,w,x,E);let D=x[0],O=new Uint8Array(D);s.toBytes(8*d,O,0,D);let N=kt.generateECBytes(O,E[0]);y.push(new xA(O,N)),f=Math.max(f,D),p=Math.max(p,N.length),d+=x[0]}if(c!==d)throw new Ot("Data bytes does not match offset");let _=new ce;for(let w=0;w<f;++w)for(let x of y){let E=x.getDataBytes();w<E.length&&_.appendBits(E[w],8)}for(let w=0;w<p;++w)for(let x of y){let E=x.getErrorCorrectionBytes();w<E.length&&_.appendBits(E[w],8)}if(a!==_.getSizeInBytes())throw new Ot("Interleaving error: "+a+" and "+_.getSizeInBytes()+" differ.");return _}static generateECBytes(s,a){let c=s.length,u=new Int32Array(c+a);for(let f=0;f<c;f++)u[f]=s[f]&255;new Wp(dt.QR_CODE_FIELD_256).encode(u,a);let d=new Uint8Array(a);for(let f=0;f<a;f++)d[f]=u[c+f];return d}static appendModeInfo(s,a){a.appendBits(s.getBits(),4)}static appendLengthInfo(s,a,c,u){let d=c.getCharacterCountBits(a);if(s>=1<<d)throw new Ot(s+" is bigger than "+((1<<d)-1));u.appendBits(s,d)}static appendBytes(s,a,c,u){switch(a){case _e.NUMERIC:kt.appendNumericBytes(s,c);break;case _e.ALPHANUMERIC:kt.appendAlphanumericBytes(s,c);break;case _e.BYTE:kt.append8BitBytes(s,c,u);break;case _e.KANJI:kt.appendKanjiBytes(s,c);break;default:throw new Ot("Invalid mode: "+a)}}static getDigit(s){return s.charCodeAt(0)-48}static isDigit(s){let a=kt.getDigit(s);return a>=0&&a<=9}static appendNumericBytes(s,a){let c=s.length,u=0;for(;u<c;){let d=kt.getDigit(s.charAt(u));if(u+2<c){let f=kt.getDigit(s.charAt(u+1)),p=kt.getDigit(s.charAt(u+2));a.appendBits(d*100+f*10+p,10),u+=3}else if(u+1<c){let f=kt.getDigit(s.charAt(u+1));a.appendBits(d*10+f,7),u+=2}else a.appendBits(d,4),u++}}static appendAlphanumericBytes(s,a){let c=s.length,u=0;for(;u<c;){let d=kt.getAlphanumericCode(s.charCodeAt(u));if(d===-1)throw new Ot;if(u+1<c){let f=kt.getAlphanumericCode(s.charCodeAt(u+1));if(f===-1)throw new Ot;a.appendBits(d*45+f,11),u+=2}else a.appendBits(d,6),u++}}static append8BitBytes(s,a,c){let u;try{u=Tn.encode(s,c)}catch(d){throw new Ot(d)}for(let d=0,f=u.length;d!==f;d++){let p=u[d];a.appendBits(p,8)}}static appendKanjiBytes(s,a){let c;try{c=Tn.encode(s,Y.SJIS)}catch(d){throw new Ot(d)}let u=c.length;for(let d=0;d<u;d+=2){let f=c[d]&255,p=c[d+1]&255,y=f<<8&4294967295|p,_=-1;if(y>=33088&&y<=40956?_=y-33088:y>=57408&&y<=60351&&(_=y-49472),_===-1)throw new Ot("Invalid byte sequence");let w=(_>>8)*192+(_&255);a.appendBits(w,13)}}static appendECI(s,a){a.appendBits(_e.ECI.getBits(),4),a.appendBits(s.getValue(),8)}}kt.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),kt.DEFAULT_BYTE_MODE_ENCODING=Y.UTF8.getName();let EA=(()=>{class C{write(a,c,u,d=null){if(a.length===0)throw new m("Found empty contents");if(c<0||u<0)throw new m("Requested dimensions are too small: "+c+"x"+u);let f=At.L,p=C.QUIET_ZONE_SIZE;d!==null&&(d.get(tn.ERROR_CORRECTION)!==void 0&&(f=At.fromString(d.get(tn.ERROR_CORRECTION).toString())),d.get(tn.MARGIN)!==void 0&&(p=Number.parseInt(d.get(tn.MARGIN).toString(),10)));let y=kt.encode(a,f,d);return this.renderResult(y,c,u,p)}writeToDom(a,c,u,d,f=null){typeof a=="string"&&(a=document.querySelector(a));let p=this.write(c,u,d,f);a&&a.appendChild(p)}renderResult(a,c,u,d){let f=a.getMatrix();if(f===null)throw new Ei;let p=f.getWidth(),y=f.getHeight(),_=p+d*2,w=y+d*2,x=Math.max(c,_),E=Math.max(u,w),D=Math.min(Math.floor(x/_),Math.floor(E/w)),O=Math.floor((x-p*D)/2),N=Math.floor((E-y*D)/2),k=this.createSVGElement(x,E);for(let L=0,X=N;L<y;L++,X+=D)for(let ie=0,U=O;ie<p;ie++,U+=D)if(f.get(ie,L)===1){let Ge=this.createSvgRectElement(U,X,D,D);k.appendChild(Ge)}return k}createSVGElement(a,c){let u=document.createElementNS(C.SVG_NS,"svg");return u.setAttributeNS(null,"height",a.toString()),u.setAttributeNS(null,"width",c.toString()),u}createSvgRectElement(a,c,u,d){let f=document.createElementNS(C.SVG_NS,"rect");return f.setAttributeNS(null,"x",a.toString()),f.setAttributeNS(null,"y",c.toString()),f.setAttributeNS(null,"height",u.toString()),f.setAttributeNS(null,"width",d.toString()),f.setAttributeNS(null,"fill","#000000"),f}}return C.QUIET_ZONE_SIZE=4,C.SVG_NS="http://www.w3.org/2000/svg",C})(),YC=(()=>{class C{encode(a,c,u,d,f){if(a.length===0)throw new m("Found empty contents");if(c!==we.QR_CODE)throw new m("Can only encode QR_CODE, but got "+c);if(u<0||d<0)throw new m(`Requested dimensions are too small: ${u}x${d}`);let p=At.L,y=C.QUIET_ZONE_SIZE;f!==null&&(f.get(tn.ERROR_CORRECTION)!==void 0&&(p=At.fromString(f.get(tn.ERROR_CORRECTION).toString())),f.get(tn.MARGIN)!==void 0&&(y=Number.parseInt(f.get(tn.MARGIN).toString(),10)));let _=kt.encode(a,p,f);return C.renderResult(_,u,d,y)}static renderResult(a,c,u,d){let f=a.getMatrix();if(f===null)throw new Ei;let p=f.getWidth(),y=f.getHeight(),_=p+d*2,w=y+d*2,x=Math.max(c,_),E=Math.max(u,w),D=Math.min(Math.floor(x/_),Math.floor(E/w)),O=Math.floor((x-p*D)/2),N=Math.floor((E-y*D)/2),k=new dn(x,E);for(let L=0,X=N;L<y;L++,X+=D)for(let ie=0,U=O;ie<p;ie++,U+=D)f.get(ie,L)===1&&k.setRegion(U,X,D,D);return k}}return C.QUIET_ZONE_SIZE=4,C})();class IA{encode(s,a,c,u,d){let f;switch(a){case we.QR_CODE:f=new YC;break;default:throw new m("No encoder available for format "+a)}return f.encode(s,a,c,u,d)}}let SA=(()=>{class C extends fl{constructor(a,c,u,d,f,p,y,_){if(super(p,y),this.yuvData=a,this.dataWidth=c,this.dataHeight=u,this.left=d,this.top=f,d+p>c||f+y>u)throw new m("Crop rectangle does not fit within image data.");_&&this.reverseHorizontal(p,y)}getRow(a,c){if(a<0||a>=this.getHeight())throw new m("Requested row is outside the image: "+a);let u=this.getWidth();(c==null||c.length<u)&&(c=new Uint8ClampedArray(u));let d=(a+this.top)*this.dataWidth+this.left;return T.arraycopy(this.yuvData,d,c,0,u),c}getMatrix(){let a=this.getWidth(),c=this.getHeight();if(a===this.dataWidth&&c===this.dataHeight)return this.yuvData;let u=a*c,d=new Uint8ClampedArray(u),f=this.top*this.dataWidth+this.left;if(a===this.dataWidth)return T.arraycopy(this.yuvData,f,d,0,u),d;for(let p=0;p<c;p++){let y=p*a;T.arraycopy(this.yuvData,f,d,y,a),f+=this.dataWidth}return d}isCropSupported(){return!0}crop(a,c,u,d){return new C(this.yuvData,this.dataWidth,this.dataHeight,this.left+a,this.top+c,u,d,!1)}renderThumbnail(){let a=this.getWidth()/C.THUMBNAIL_SCALE_FACTOR,c=this.getHeight()/C.THUMBNAIL_SCALE_FACTOR,u=new Int32Array(a*c),d=this.yuvData,f=this.top*this.dataWidth+this.left;for(let p=0;p<c;p++){let y=p*a;for(let _=0;_<a;_++){let w=d[f+_*C.THUMBNAIL_SCALE_FACTOR]&255;u[y+_]=4278190080|w*65793}f+=this.dataWidth*C.THUMBNAIL_SCALE_FACTOR}return u}getThumbnailWidth(){return this.getWidth()/C.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/C.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(a,c){let u=this.yuvData;for(let d=0,f=this.top*this.dataWidth+this.left;d<c;d++,f+=this.dataWidth){let p=f+a/2;for(let y=f,_=f+a-1;y<p;y++,_--){let w=u[y];u[y]=u[_],u[_]=w}}}invert(){return new Ji(this)}}return C.THUMBNAIL_SCALE_FACTOR=2,C})();class Gp extends fl{constructor(s,a,c,u,d,f,p){if(super(a,c),this.dataWidth=u,this.dataHeight=d,this.left=f,this.top=p,s.BYTES_PER_ELEMENT===4){let y=a*c,_=new Uint8ClampedArray(y);for(let w=0;w<y;w++){let x=s[w],E=x>>16&255,D=x>>7&510,O=x&255;_[w]=(E+D+O)/4&255}this.luminances=_}else this.luminances=s;if(u===void 0&&(this.dataWidth=a),d===void 0&&(this.dataHeight=c),f===void 0&&(this.left=0),p===void 0&&(this.top=0),this.left+a>this.dataWidth||this.top+c>this.dataHeight)throw new m("Crop rectangle does not fit within image data.")}getRow(s,a){if(s<0||s>=this.getHeight())throw new m("Requested row is outside the image: "+s);let c=this.getWidth();(a==null||a.length<c)&&(a=new Uint8ClampedArray(c));let u=(s+this.top)*this.dataWidth+this.left;return T.arraycopy(this.luminances,u,a,0,c),a}getMatrix(){let s=this.getWidth(),a=this.getHeight();if(s===this.dataWidth&&a===this.dataHeight)return this.luminances;let c=s*a,u=new Uint8ClampedArray(c),d=this.top*this.dataWidth+this.left;if(s===this.dataWidth)return T.arraycopy(this.luminances,d,u,0,c),u;for(let f=0;f<a;f++){let p=f*s;T.arraycopy(this.luminances,d,u,p,s),d+=this.dataWidth}return u}isCropSupported(){return!0}crop(s,a,c,u){return new Gp(this.luminances,c,u,this.dataWidth,this.dataHeight,this.left+s,this.top+a)}invert(){return new Ji(this)}}class ZC extends Y{static forName(s){return this.getCharacterSetECIByName(s)}}class $p{}$p.ISO_8859_1=Y.ISO8859_1;class XC{isCompact(){return this.compact}setCompact(s){this.compact=s}getSize(){return this.size}setSize(s){this.size=s}getLayers(){return this.layers}setLayers(s){this.layers=s}getCodeWords(){return this.codeWords}setCodeWords(s){this.codeWords=s}getMatrix(){return this.matrix}setMatrix(s){this.matrix=s}}class QC{static singletonList(s){return[s]}static min(s,a){return s.sort(a)[0]}}class DA{constructor(s){this.previous=s}getPrevious(){return this.previous}}class Ws extends DA{constructor(s,a,c){super(s),this.value=a,this.bitCount=c}appendTo(s,a){s.appendBits(this.value,this.bitCount)}add(s,a){return new Ws(this,s,a)}addBinaryShift(s,a){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Ws(this,s,a)}toString(){let s=this.value&(1<<this.bitCount)-1;return s|=1<<this.bitCount,"<"+q.toBinaryString(s|1<<this.bitCount).substring(1)+">"}}class qp extends Ws{constructor(s,a,c){super(s,0,0),this.binaryShiftStart=a,this.binaryShiftByteCount=c}appendTo(s,a){for(let c=0;c<this.binaryShiftByteCount;c++)(c===0||c===31&&this.binaryShiftByteCount<=62)&&(s.appendBits(31,5),this.binaryShiftByteCount>62?s.appendBits(this.binaryShiftByteCount-31,16):c===0?s.appendBits(Math.min(this.binaryShiftByteCount,31),5):s.appendBits(this.binaryShiftByteCount-31,5)),s.appendBits(a[this.binaryShiftStart+c],8)}addBinaryShift(s,a){return new qp(this,s,a)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function MA(C,s,a){return new qp(C,s,a)}function xl(C,s,a){return new Ws(C,s,a)}let TA=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],ao=0,Fu=1,Cr=2,KC=3,ni=4,AA=new Ws(null,0,0),Yp=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function OA(C){for(let s of C)Z.fill(s,-1);return C[ao][ni]=0,C[Fu][ni]=0,C[Fu][ao]=28,C[KC][ni]=0,C[Cr][ni]=0,C[Cr][ao]=15,C}let JC=OA(Z.createInt32Array(6,6));class ri{constructor(s,a,c,u){this.token=s,this.mode=a,this.binaryShiftByteCount=c,this.bitCount=u}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(s,a){let c=this.bitCount,u=this.token;if(s!==this.mode){let f=Yp[this.mode][s];u=xl(u,f&65535,f>>16),c+=f>>16}let d=s===Cr?4:5;return u=xl(u,a,d),new ri(u,s,0,c+d)}shiftAndAppend(s,a){let c=this.token,u=this.mode===Cr?4:5;return c=xl(c,JC[this.mode][s],u),c=xl(c,a,5),new ri(c,this.mode,0,this.bitCount+u+5)}addBinaryShiftChar(s){let a=this.token,c=this.mode,u=this.bitCount;if(this.mode===ni||this.mode===Cr){let p=Yp[c][ao];a=xl(a,p&65535,p>>16),u+=p>>16,c=ao}let d=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,f=new ri(a,c,this.binaryShiftByteCount+1,u+d);return f.binaryShiftByteCount===2078&&(f=f.endBinaryShift(s+1)),f}endBinaryShift(s){if(this.binaryShiftByteCount===0)return this;let a=this.token;return a=MA(a,s-this.binaryShiftByteCount,this.binaryShiftByteCount),new ri(a,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(s){let a=this.bitCount+(Yp[this.mode][s.mode]>>16);return this.binaryShiftByteCount<s.binaryShiftByteCount?a+=ri.calculateBinaryShiftCost(s)-ri.calculateBinaryShiftCost(this):this.binaryShiftByteCount>s.binaryShiftByteCount&&s.binaryShiftByteCount>0&&(a+=10),a<=s.bitCount}toBitArray(s){let a=[];for(let u=this.endBinaryShift(s.length).token;u!==null;u=u.getPrevious())a.unshift(u);let c=new ce;for(let u of a)u.appendTo(c,s);return c}toString(){return Me.format("%s bits=%d bytes=%d",TA[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(s){return s.binaryShiftByteCount>62?21:s.binaryShiftByteCount>31?20:s.binaryShiftByteCount>0?10:0}}ri.INITIAL_STATE=new ri(AA,ao,0,0);function NA(C){let s=Me.getCharCode(" "),a=Me.getCharCode("."),c=Me.getCharCode(",");C[ao][s]=1;let u=Me.getCharCode("Z"),d=Me.getCharCode("A");for(let E=d;E<=u;E++)C[ao][E]=E-d+2;C[Fu][s]=1;let f=Me.getCharCode("z"),p=Me.getCharCode("a");for(let E=p;E<=f;E++)C[Fu][E]=E-p+2;C[Cr][s]=1;let y=Me.getCharCode("9"),_=Me.getCharCode("0");for(let E=_;E<=y;E++)C[Cr][E]=E-_+2;C[Cr][c]=12,C[Cr][a]=13;let w=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~","\x7F"];for(let E=0;E<w.length;E++)C[KC][Me.getCharCode(w[E])]=E;let x=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let E=0;E<x.length;E++)Me.getCharCode(x[E])>0&&(C[ni][Me.getCharCode(x[E])]=E);return C}let Zp=NA(Z.createInt32Array(5,256));class El{constructor(s){this.text=s}encode(){let s=Me.getCharCode(" "),a=Me.getCharCode(`
`),c=QC.singletonList(ri.INITIAL_STATE);for(let d=0;d<this.text.length;d++){let f,p=d+1<this.text.length?this.text[d+1]:0;switch(this.text[d]){case Me.getCharCode("\r"):f=p===a?2:0;break;case Me.getCharCode("."):f=p===s?3:0;break;case Me.getCharCode(","):f=p===s?4:0;break;case Me.getCharCode(":"):f=p===s?5:0;break;default:f=0}f>0?(c=El.updateStateListForPair(c,d,f),d++):c=this.updateStateListForChar(c,d)}return QC.min(c,(d,f)=>d.getBitCount()-f.getBitCount()).toBitArray(this.text)}updateStateListForChar(s,a){let c=[];for(let u of s)this.updateStateForChar(u,a,c);return El.simplifyStates(c)}updateStateForChar(s,a,c){let u=this.text[a]&255,d=Zp[s.getMode()][u]>0,f=null;for(let p=0;p<=ni;p++){let y=Zp[p][u];if(y>0){if(f==null&&(f=s.endBinaryShift(a)),!d||p===s.getMode()||p===Cr){let _=f.latchAndAppend(p,y);c.push(_)}if(!d&&JC[s.getMode()][p]>=0){let _=f.shiftAndAppend(p,y);c.push(_)}}}if(s.getBinaryShiftByteCount()>0||Zp[s.getMode()][u]===0){let p=s.addBinaryShiftChar(a);c.push(p)}}static updateStateListForPair(s,a,c){let u=[];for(let d of s)this.updateStateForPair(d,a,c,u);return this.simplifyStates(u)}static updateStateForPair(s,a,c,u){let d=s.endBinaryShift(a);if(u.push(d.latchAndAppend(ni,c)),s.getMode()!==ni&&u.push(d.shiftAndAppend(ni,c)),c===3||c===4){let f=d.latchAndAppend(Cr,16-c).latchAndAppend(Cr,1);u.push(f)}if(s.getBinaryShiftByteCount()>0){let f=s.addBinaryShiftChar(a).addBinaryShiftChar(a+1);u.push(f)}}static simplifyStates(s){let a=[];for(let c of s){let u=!0;for(let d of a){if(d.isBetterThanOrEqualTo(c)){u=!1;break}c.isBetterThanOrEqualTo(d)&&(a=a.filter(f=>f!==d))}u&&a.push(c)}return a}}class rt{constructor(){}static encodeBytes(s){return rt.encode(s,rt.DEFAULT_EC_PERCENT,rt.DEFAULT_AZTEC_LAYERS)}static encode(s,a,c){let u=new El(s).encode(),d=q.truncDivision(u.getSize()*a,100)+11,f=u.getSize()+d,p,y,_,w,x;if(c!==rt.DEFAULT_AZTEC_LAYERS){if(p=c<0,y=Math.abs(c),y>(p?rt.MAX_NB_BITS_COMPACT:rt.MAX_NB_BITS))throw new m(Me.format("Illegal value %s for layers",c));_=rt.totalBitsInLayer(y,p),w=rt.WORD_SIZE[y];let U=_-_%w;if(x=rt.stuffBits(u,w),x.getSize()+d>U)throw new m("Data to large for user specified layer");if(p&&x.getSize()>w*64)throw new m("Data to large for user specified layer")}else{w=0,x=null;for(let U=0;;U++){if(U>rt.MAX_NB_BITS)throw new m("Data too large for an Aztec code");if(p=U<=3,y=p?U+1:U,_=rt.totalBitsInLayer(y,p),f>_)continue;(x==null||w!==rt.WORD_SIZE[y])&&(w=rt.WORD_SIZE[y],x=rt.stuffBits(u,w));let Ge=_-_%w;if(!(p&&x.getSize()>w*64)&&x.getSize()+d<=Ge)break}}let E=rt.generateCheckWords(x,_,w),D=x.getSize()/w,O=rt.generateModeMessage(p,y,D),N=(p?11:14)+y*4,k=new Int32Array(N),L;if(p){L=N;for(let U=0;U<k.length;U++)k[U]=U}else{L=N+1+2*q.truncDivision(q.truncDivision(N,2)-1,15);let U=q.truncDivision(N,2),Ge=q.truncDivision(L,2);for(let Re=0;Re<U;Re++){let Xn=Re+q.truncDivision(Re,15);k[U-Re-1]=Ge-Xn-1,k[U+Re]=Ge+Xn+1}}let X=new dn(L);for(let U=0,Ge=0;U<y;U++){let Re=(y-U)*4+(p?9:12);for(let Xn=0;Xn<Re;Xn++){let Ur=Xn*2;for(let Qn=0;Qn<2;Qn++)E.get(Ge+Ur+Qn)&&X.set(k[U*2+Qn],k[U*2+Xn]),E.get(Ge+Re*2+Ur+Qn)&&X.set(k[U*2+Xn],k[N-1-U*2-Qn]),E.get(Ge+Re*4+Ur+Qn)&&X.set(k[N-1-U*2-Qn],k[N-1-U*2-Xn]),E.get(Ge+Re*6+Ur+Qn)&&X.set(k[N-1-U*2-Xn],k[U*2+Qn])}Ge+=Re*8}if(rt.drawModeMessage(X,p,L,O),p)rt.drawBullsEye(X,q.truncDivision(L,2),5);else{rt.drawBullsEye(X,q.truncDivision(L,2),7);for(let U=0,Ge=0;U<q.truncDivision(N,2)-1;U+=15,Ge+=16)for(let Re=q.truncDivision(L,2)&1;Re<L;Re+=2)X.set(q.truncDivision(L,2)-Ge,Re),X.set(q.truncDivision(L,2)+Ge,Re),X.set(Re,q.truncDivision(L,2)-Ge),X.set(Re,q.truncDivision(L,2)+Ge)}let ie=new XC;return ie.setCompact(p),ie.setSize(L),ie.setLayers(y),ie.setCodeWords(D),ie.setMatrix(X),ie}static drawBullsEye(s,a,c){for(let u=0;u<c;u+=2)for(let d=a-u;d<=a+u;d++)s.set(d,a-u),s.set(d,a+u),s.set(a-u,d),s.set(a+u,d);s.set(a-c,a-c),s.set(a-c+1,a-c),s.set(a-c,a-c+1),s.set(a+c,a-c),s.set(a+c,a-c+1),s.set(a+c,a+c-1)}static generateModeMessage(s,a,c){let u=new ce;return s?(u.appendBits(a-1,2),u.appendBits(c-1,6),u=rt.generateCheckWords(u,28,4)):(u.appendBits(a-1,5),u.appendBits(c-1,11),u=rt.generateCheckWords(u,40,4)),u}static drawModeMessage(s,a,c,u){let d=q.truncDivision(c,2);if(a)for(let f=0;f<7;f++){let p=d-3+f;u.get(f)&&s.set(p,d-5),u.get(f+7)&&s.set(d+5,p),u.get(20-f)&&s.set(p,d+5),u.get(27-f)&&s.set(d-5,p)}else for(let f=0;f<10;f++){let p=d-5+f+q.truncDivision(f,5);u.get(f)&&s.set(p,d-7),u.get(f+10)&&s.set(d+7,p),u.get(29-f)&&s.set(p,d+7),u.get(39-f)&&s.set(d-7,p)}}static generateCheckWords(s,a,c){let u=s.getSize()/c,d=new Wp(rt.getGF(c)),f=q.truncDivision(a,c),p=rt.bitsToWords(s,c,f);d.encode(p,f-u);let y=a%c,_=new ce;_.appendBits(0,y);for(let w of Array.from(p))_.appendBits(w,c);return _}static bitsToWords(s,a,c){let u=new Int32Array(c),d,f;for(d=0,f=s.getSize()/a;d<f;d++){let p=0;for(let y=0;y<a;y++)p|=s.get(d*a+y)?1<<a-y-1:0;u[d]=p}return u}static getGF(s){switch(s){case 4:return dt.AZTEC_PARAM;case 6:return dt.AZTEC_DATA_6;case 8:return dt.AZTEC_DATA_8;case 10:return dt.AZTEC_DATA_10;case 12:return dt.AZTEC_DATA_12;default:throw new m("Unsupported word size "+s)}}static stuffBits(s,a){let c=new ce,u=s.getSize(),d=(1<<a)-2;for(let f=0;f<u;f+=a){let p=0;for(let y=0;y<a;y++)(f+y>=u||s.get(f+y))&&(p|=1<<a-1-y);(p&d)===d?(c.appendBits(p&d,a),f--):p&d?c.appendBits(p,a):(c.appendBits(p|1,a),f--)}return c}static totalBitsInLayer(s,a){return((a?88:112)+16*s)*s}}rt.DEFAULT_EC_PERCENT=33,rt.DEFAULT_AZTEC_LAYERS=0,rt.MAX_NB_BITS=32,rt.MAX_NB_BITS_COMPACT=4,rt.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Lu{encode(s,a,c,u){return this.encodeWithHints(s,a,c,u,null)}encodeWithHints(s,a,c,u,d){let f=$p.ISO_8859_1,p=rt.DEFAULT_EC_PERCENT,y=rt.DEFAULT_AZTEC_LAYERS;return d!=null&&(d.has(tn.CHARACTER_SET)&&(f=ZC.forName(d.get(tn.CHARACTER_SET).toString())),d.has(tn.ERROR_CORRECTION)&&(p=q.parseInt(d.get(tn.ERROR_CORRECTION).toString())),d.has(tn.AZTEC_LAYERS)&&(y=q.parseInt(d.get(tn.AZTEC_LAYERS).toString()))),Lu.encodeLayers(s,a,c,u,f,p,y)}static encodeLayers(s,a,c,u,d,f,p){if(a!==we.AZTEC)throw new m("Can only encode AZTEC, but got "+a);let y=rt.encode(Me.getBytes(s,d),f,p);return Lu.renderResult(y,c,u)}static renderResult(s,a,c){let u=s.getMatrix();if(u==null)throw new Ei;let d=u.getWidth(),f=u.getHeight(),p=Math.max(a,d),y=Math.max(c,f),_=Math.min(p/d,y/f),w=(p-d*_)/2,x=(y-f*_)/2,E=new dn(p,y);for(let D=0,O=x;D<f;D++,O+=_)for(let N=0,k=w;N<d;N++,k+=_)u.get(N,D)&&E.setRegion(k,O,_,_);return E}}e.AbstractExpandedDecoder=Pp,e.ArgumentException=g,e.ArithmeticException=Dp,e.AztecCode=XC,e.AztecCodeReader=Du,e.AztecCodeWriter=Lu,e.AztecDecoder=Mp,e.AztecDetector=NC,e.AztecDetectorResult=AC,e.AztecEncoder=rt,e.AztecHighLevelEncoder=El,e.AztecPoint=Bn,e.BarcodeFormat=we,e.Binarizer=I,e.BinaryBitmap=v,e.BitArray=ce,e.BitMatrix=dn,e.BitSource=Bp,e.BrowserAztecCodeReader=ZT,e.BrowserBarcodeReader=iA,e.BrowserCodeReader=Wo,e.BrowserDatamatrixCodeReader=sA,e.BrowserMultiFormatReader=wA,e.BrowserPDF417Reader=vA,e.BrowserQRCodeReader=bA,e.BrowserQRCodeSvgWriter=EA,e.CharacterSetECI=Y,e.ChecksumException=b,e.Code128Reader=ne,e.Code39Reader=Ap,e.DataMatrixDecodedBitStreamParser=io,e.DataMatrixReader=Ou,e.DecodeHintType=ye,e.DecoderResult=hl,e.DefaultGridSampler=OC,e.DetectorResult=Iu,e.EAN13Reader=Mu,e.EncodeHintType=tn,e.Exception=h,e.FormatException=G,e.GenericGF=dt,e.GenericGFPoly=Yn,e.GlobalHistogramBinarizer=fn,e.GridSampler=Tp,e.GridSamplerInstance=to,e.HTMLCanvasElementLuminanceSource=eo,e.HybridBinarizer=Le,e.ITFReader=Et,e.IllegalArgumentException=m,e.IllegalStateException=Ei,e.InvertedLuminanceSource=Ji,e.LuminanceSource=fl,e.MathUtils=nt,e.MultiFormatOneDReader=Hs,e.MultiFormatReader=$C,e.MultiFormatWriter=IA,e.NotFoundException=H,e.OneDReader=Yt,e.PDF417DecodedBitStreamParser=B,e.PDF417DecoderErrorCorrection=VC,e.PDF417Reader=Cn,e.PDF417ResultMetadata=zC,e.PerspectiveTransform=Pr,e.PlanarYUVLuminanceSource=SA,e.QRCodeByteMatrix=Pu,e.QRCodeDataMask=_r,e.QRCodeDecodedBitStreamParser=BC,e.QRCodeDecoderErrorCorrectionLevel=At,e.QRCodeDecoderFormatInformation=On,e.QRCodeEncoder=kt,e.QRCodeEncoderQRCode=ku,e.QRCodeMaskUtil=zs,e.QRCodeMatrixUtil=ve,e.QRCodeMode=_e,e.QRCodeReader=oo,e.QRCodeVersion=me,e.QRCodeWriter=YC,e.RGBLuminanceSource=Gp,e.RSS14Reader=jt,e.RSSExpandedReader=$,e.ReaderException=zp,e.ReedSolomonDecoder=ml,e.ReedSolomonEncoder=Wp,e.ReedSolomonException=gl,e.Result=Ln,e.ResultMetadataType=hn,e.ResultPoint=de,e.StringUtils=Me,e.UnsupportedOperationException=or,e.VideoInputDevice=DC,e.WhiteRectangleDetector=Su,e.WriterException=Ot,e.ZXingArrays=Z,e.ZXingCharset=ZC,e.ZXingInteger=q,e.ZXingStandardCharsets=$p,e.ZXingStringBuilder=vt,e.ZXingStringEncoding=Tn,e.ZXingSystem=T,e.createAbstractExpandedDecoder=LC,Object.defineProperty(e,"__esModule",{value:!0})})});function iw(e,n){return Object.is(e,n)}var nn=null,Uu=!1,Vu=1,Ii=Symbol("SIGNAL");function Ye(e){let n=nn;return nn=e,n}function ow(){return nn}var Sl={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function eg(e){if(Uu)throw new Error("");if(nn===null)return;nn.consumerOnSignalRead(e);let n=nn.nextProducerIndex++;if(Wu(nn),n<nn.producerNode.length&&nn.producerNode[n]!==e&&Il(nn)){let t=nn.producerNode[n];zu(t,nn.producerIndexOfThis[n])}nn.producerNode[n]!==e&&(nn.producerNode[n]=e,nn.producerIndexOfThis[n]=Il(nn)?cw(e,nn,n):0),nn.producerLastReadVersion[n]=e.version}function HA(){Vu++}function sw(e){if(!(Il(e)&&!e.dirty)&&!(!e.dirty&&e.lastCleanEpoch===Vu)){if(!e.producerMustRecompute(e)&&!ng(e)){e.dirty=!1,e.lastCleanEpoch=Vu;return}e.producerRecomputeValue(e),e.dirty=!1,e.lastCleanEpoch=Vu}}function aw(e){if(e.liveConsumerNode===void 0)return;let n=Uu;Uu=!0;try{for(let t of e.liveConsumerNode)t.dirty||zA(t)}finally{Uu=n}}function lw(){return nn?.consumerAllowSignalWrites!==!1}function zA(e){e.dirty=!0,aw(e),e.consumerMarkedDirty?.(e)}function Hu(e){return e&&(e.nextProducerIndex=0),Ye(e)}function tg(e,n){if(Ye(n),!(!e||e.producerNode===void 0||e.producerIndexOfThis===void 0||e.producerLastReadVersion===void 0)){if(Il(e))for(let t=e.nextProducerIndex;t<e.producerNode.length;t++)zu(e.producerNode[t],e.producerIndexOfThis[t]);for(;e.producerNode.length>e.nextProducerIndex;)e.producerNode.pop(),e.producerLastReadVersion.pop(),e.producerIndexOfThis.pop()}}function ng(e){Wu(e);for(let n=0;n<e.producerNode.length;n++){let t=e.producerNode[n],r=e.producerLastReadVersion[n];if(r!==t.version||(sw(t),r!==t.version))return!0}return!1}function rg(e){if(Wu(e),Il(e))for(let n=0;n<e.producerNode.length;n++)zu(e.producerNode[n],e.producerIndexOfThis[n]);e.producerNode.length=e.producerLastReadVersion.length=e.producerIndexOfThis.length=0,e.liveConsumerNode&&(e.liveConsumerNode.length=e.liveConsumerIndexOfThis.length=0)}function cw(e,n,t){if(uw(e),e.liveConsumerNode.length===0&&dw(e))for(let r=0;r<e.producerNode.length;r++)e.producerIndexOfThis[r]=cw(e.producerNode[r],e,r);return e.liveConsumerIndexOfThis.push(t),e.liveConsumerNode.push(n)-1}function zu(e,n){if(uw(e),e.liveConsumerNode.length===1&&dw(e))for(let r=0;r<e.producerNode.length;r++)zu(e.producerNode[r],e.producerIndexOfThis[r]);let t=e.liveConsumerNode.length-1;if(e.liveConsumerNode[n]=e.liveConsumerNode[t],e.liveConsumerIndexOfThis[n]=e.liveConsumerIndexOfThis[t],e.liveConsumerNode.length--,e.liveConsumerIndexOfThis.length--,n<e.liveConsumerNode.length){let r=e.liveConsumerIndexOfThis[n],i=e.liveConsumerNode[n];Wu(i),i.producerIndexOfThis[r]=n}}function Il(e){return e.consumerIsAlwaysLive||(e?.liveConsumerNode?.length??0)>0}function Wu(e){e.producerNode??=[],e.producerIndexOfThis??=[],e.producerLastReadVersion??=[]}function uw(e){e.liveConsumerNode??=[],e.liveConsumerIndexOfThis??=[]}function dw(e){return e.producerNode!==void 0}function fw(e){let n=Object.create(WA);n.computation=e;let t=()=>{if(sw(n),eg(n),n.value===ju)throw n.error;return n.value};return t[Ii]=n,t}var Kp=Symbol("UNSET"),Jp=Symbol("COMPUTING"),ju=Symbol("ERRORED"),WA=Ue(re({},Sl),{value:Kp,dirty:!0,error:null,equal:iw,producerMustRecompute(e){return e.value===Kp||e.value===Jp},producerRecomputeValue(e){if(e.value===Jp)throw new Error("Detected cycle in computations.");let n=e.value;e.value=Jp;let t=Hu(e),r;try{r=e.computation()}catch(i){r=ju,e.error=i}finally{tg(e,t)}if(n!==Kp&&n!==ju&&r!==ju&&e.equal(n,r)){e.value=n;return}e.value=r,e.version++}});function GA(){throw new Error}var hw=GA;function pw(){hw()}function gw(e){hw=e}var $A=null;function mw(e){let n=Object.create(_w);n.value=e;let t=()=>(eg(n),n.value);return t[Ii]=n,t}function ig(e,n){lw()||pw(),e.equal(e.value,n)||(e.value=n,qA(e))}function yw(e,n){lw()||pw(),ig(e,n(e.value))}var _w=Ue(re({},Sl),{equal:iw,value:void 0});function qA(e){e.version++,HA(),aw(e),$A?.()}function Ne(e){return typeof e=="function"}function qs(e){let t=e(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Gu=qs(e=>function(t){e(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Zo(e,n){if(e){let t=e.indexOf(n);0<=t&&e.splice(t,1)}}var Ht=class e{constructor(n){this.initialTeardown=n,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let n;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(Ne(r))try{r()}catch(o){n=o instanceof Gu?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{Cw(o)}catch(l){n=n??[],l instanceof Gu?n=[...n,...l.errors]:n.push(l)}}if(n)throw new Gu(n)}}add(n){var t;if(n&&n!==this)if(this.closed)Cw(n);else{if(n instanceof e){if(n.closed||n._hasParent(this))return;n._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(n)}}_hasParent(n){let{_parentage:t}=this;return t===n||Array.isArray(t)&&t.includes(n)}_addParent(n){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(n),t):t?[t,n]:n}_removeParent(n){let{_parentage:t}=this;t===n?this._parentage=null:Array.isArray(t)&&Zo(t,n)}remove(n){let{_finalizers:t}=this;t&&Zo(t,n),n instanceof e&&n._removeParent(this)}};Ht.EMPTY=(()=>{let e=new Ht;return e.closed=!0,e})();var og=Ht.EMPTY;function $u(e){return e instanceof Ht||e&&"closed"in e&&Ne(e.remove)&&Ne(e.add)&&Ne(e.unsubscribe)}function Cw(e){Ne(e)?e():e.unsubscribe()}var Vr={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Ys={setTimeout(e,n,...t){let{delegate:r}=Ys;return r?.setTimeout?r.setTimeout(e,n,...t):setTimeout(e,n,...t)},clearTimeout(e){let{delegate:n}=Ys;return(n?.clearTimeout||clearTimeout)(e)},delegate:void 0};function qu(e){Ys.setTimeout(()=>{let{onUnhandledError:n}=Vr;if(n)n(e);else throw e})}function Dl(){}var ww=sg("C",void 0,void 0);function vw(e){return sg("E",void 0,e)}function bw(e){return sg("N",e,void 0)}function sg(e,n,t){return{kind:e,value:n,error:t}}var Xo=null;function Zs(e){if(Vr.useDeprecatedSynchronousErrorHandling){let n=!Xo;if(n&&(Xo={errorThrown:!1,error:null}),e(),n){let{errorThrown:t,error:r}=Xo;if(Xo=null,t)throw r}}else e()}function xw(e){Vr.useDeprecatedSynchronousErrorHandling&&Xo&&(Xo.errorThrown=!0,Xo.error=e)}var Qo=class extends Ht{constructor(n){super(),this.isStopped=!1,n?(this.destination=n,$u(n)&&n.add(this)):this.destination=XA}static create(n,t,r){return new Xs(n,t,r)}next(n){this.isStopped?lg(bw(n),this):this._next(n)}error(n){this.isStopped?lg(vw(n),this):(this.isStopped=!0,this._error(n))}complete(){this.isStopped?lg(ww,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(n){this.destination.next(n)}_error(n){try{this.destination.error(n)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},YA=Function.prototype.bind;function ag(e,n){return YA.call(e,n)}var cg=class{constructor(n){this.partialObserver=n}next(n){let{partialObserver:t}=this;if(t.next)try{t.next(n)}catch(r){Yu(r)}}error(n){let{partialObserver:t}=this;if(t.error)try{t.error(n)}catch(r){Yu(r)}else Yu(n)}complete(){let{partialObserver:n}=this;if(n.complete)try{n.complete()}catch(t){Yu(t)}}},Xs=class extends Qo{constructor(n,t,r){super();let i;if(Ne(n)||!n)i={next:n??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&Vr.useDeprecatedNextContext?(o=Object.create(n),o.unsubscribe=()=>this.unsubscribe(),i={next:n.next&&ag(n.next,o),error:n.error&&ag(n.error,o),complete:n.complete&&ag(n.complete,o)}):i=n}this.destination=new cg(i)}};function Yu(e){Vr.useDeprecatedSynchronousErrorHandling?xw(e):qu(e)}function ZA(e){throw e}function lg(e,n){let{onStoppedNotification:t}=Vr;t&&Ys.setTimeout(()=>t(e,n))}var XA={closed:!0,next:Dl,error:ZA,complete:Dl};var Qs=typeof Symbol=="function"&&Symbol.observable||"@@observable";function ar(e){return e}function ug(...e){return dg(e)}function dg(e){return e.length===0?ar:e.length===1?e[0]:function(t){return e.reduce((r,i)=>i(r),t)}}var Ve=(()=>{class e{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new e;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=KA(t)?t:new Xs(t,r,i);return Zs(()=>{let{operator:l,source:h}=this;o.add(l?l.call(o,h):h?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=Ew(r),new r((i,o)=>{let l=new Xs({next:h=>{try{t(h)}catch(g){o(g),l.unsubscribe()}},error:o,complete:i});this.subscribe(l)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Qs](){return this}pipe(...t){return dg(t)(this)}toPromise(t){return t=Ew(t),new t((r,i)=>{let o;this.subscribe(l=>o=l,l=>i(l),()=>r(o))})}}return e.create=n=>new e(n),e})();function Ew(e){var n;return(n=e??Vr.Promise)!==null&&n!==void 0?n:Promise}function QA(e){return e&&Ne(e.next)&&Ne(e.error)&&Ne(e.complete)}function KA(e){return e&&e instanceof Qo||QA(e)&&$u(e)}function fg(e){return Ne(e?.lift)}function et(e){return n=>{if(fg(n))return n.lift(function(t){try{return e(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Xe(e,n,t,r,i){return new hg(e,n,t,r,i)}var hg=class extends Qo{constructor(n,t,r,i,o,l){super(n),this.onFinalize=o,this.shouldUnsubscribe=l,this._next=t?function(h){try{t(h)}catch(g){n.error(g)}}:super._next,this._error=i?function(h){try{i(h)}catch(g){n.error(g)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(h){n.error(h)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((n=this.onFinalize)===null||n===void 0||n.call(this))}}};function Ks(){return et((e,n)=>{let t=null;e._refCount++;let r=Xe(n,void 0,void 0,void 0,()=>{if(!e||e._refCount<=0||0<--e._refCount){t=null;return}let i=e._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),n.unsubscribe()});e.subscribe(r),r.closed||(t=e.connect())})}var Js=class extends Ve{constructor(n,t){super(),this.source=n,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,fg(n)&&(this.lift=n.lift)}_subscribe(n){return this.getSubject().subscribe(n)}getSubject(){let n=this._subject;return(!n||n.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:n}=this;this._subject=this._connection=null,n?.unsubscribe()}connect(){let n=this._connection;if(!n){n=this._connection=new Ht;let t=this.getSubject();n.add(this.source.subscribe(Xe(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),n.closed&&(this._connection=null,n=Ht.EMPTY)}return n}refCount(){return Ks()(this)}};var Iw=qs(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var rn=(()=>{class e extends Ve{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Zu(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new Iw}next(t){Zs(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Zs(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Zs(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?og:(this.currentObservers=null,o.push(t),new Ht(()=>{this.currentObservers=null,Zo(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new Ve;return t.source=this,t}}return e.create=(n,t)=>new Zu(n,t),e})(),Zu=class extends rn{constructor(n,t){super(),this.destination=n,this.source=t}next(n){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,n)}error(n){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,n)}complete(){var n,t;(t=(n=this.destination)===null||n===void 0?void 0:n.complete)===null||t===void 0||t.call(n)}_subscribe(n){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(n))!==null&&r!==void 0?r:og}};var vn=class extends rn{constructor(n){super(),this._value=n}get value(){return this.getValue()}_subscribe(n){let t=super._subscribe(n);return!t.closed&&n.next(this._value),t}getValue(){let{hasError:n,thrownError:t,_value:r}=this;if(n)throw t;return this._throwIfClosed(),r}next(n){super.next(this._value=n)}};var Ml={now(){return(Ml.delegate||Date).now()},delegate:void 0};var Ko=class extends rn{constructor(n=1/0,t=1/0,r=Ml){super(),this._bufferSize=n,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,n),this._windowTime=Math.max(1,t)}next(n){let{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:l}=this;t||(r.push(n),!i&&r.push(o.now()+l)),this._trimBuffer(),super.next(n)}_subscribe(n){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(n),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let l=0;l<o.length&&!n.closed;l+=r?1:2)n.next(o[l]);return this._checkFinalizedStatuses(n),t}_trimBuffer(){let{_bufferSize:n,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*n;if(n<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let l=t.now(),h=0;for(let g=1;g<r.length&&r[g]<=l;g+=2)h=g;h&&r.splice(0,h+1)}}};var Xu=class extends Ht{constructor(n,t){super()}schedule(n,t=0){return this}};var Tl={setInterval(e,n,...t){let{delegate:r}=Tl;return r?.setInterval?r.setInterval(e,n,...t):setInterval(e,n,...t)},clearInterval(e){let{delegate:n}=Tl;return(n?.clearInterval||clearInterval)(e)},delegate:void 0};var Qu=class extends Xu{constructor(n,t){super(n,t),this.scheduler=n,this.work=t,this.pending=!1}schedule(n,t=0){var r;if(this.closed)return this;this.state=n;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(n,t,r=0){return Tl.setInterval(n.flush.bind(n,this),r)}recycleAsyncId(n,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&Tl.clearInterval(t)}execute(n,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(n,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(n,t){let r=!1,i;try{this.work(n)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:n,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Zo(r,this),n!=null&&(this.id=this.recycleAsyncId(t,n,null)),this.delay=null,super.unsubscribe()}}};var ea=class e{constructor(n,t=e.now){this.schedulerActionCtor=n,this.now=t}schedule(n,t=0,r){return new this.schedulerActionCtor(this,n).schedule(r,t)}};ea.now=Ml.now;var Ku=class extends ea{constructor(n,t=ea.now){super(n,t),this.actions=[],this._active=!1}flush(n){let{actions:t}=this;if(this._active){t.push(n);return}let r;this._active=!0;do if(r=n.execute(n.state,n.delay))break;while(n=t.shift());if(this._active=!1,r){for(;n=t.shift();)n.unsubscribe();throw r}}};var JA=new Ku(Qu),Sw=JA;var lr=new Ve(e=>e.complete());function Ju(e){return e&&Ne(e.schedule)}function Dw(e){return e[e.length-1]}function ed(e){return Ne(Dw(e))?e.pop():void 0}function lo(e){return Ju(Dw(e))?e.pop():void 0}function Tw(e,n,t,r){function i(o){return o instanceof t?o:new t(function(l){l(o)})}return new(t||(t=Promise))(function(o,l){function h(v){try{m(r.next(v))}catch(b){l(b)}}function g(v){try{m(r.throw(v))}catch(b){l(b)}}function m(v){v.done?o(v.value):i(v.value).then(h,g)}m((r=r.apply(e,n||[])).next())})}function Mw(e){var n=typeof Symbol=="function"&&Symbol.iterator,t=n&&e[n],r=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}function Jo(e){return this instanceof Jo?(this.v=e,this):new Jo(e)}function Aw(e,n,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(e,n||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),h("next"),h("throw"),h("return",l),i[Symbol.asyncIterator]=function(){return this},i;function l(T){return function(P){return Promise.resolve(P).then(T,b)}}function h(T,P){r[T]&&(i[T]=function(z){return new Promise(function(Z,q){o.push([T,z,Z,q])>1||g(T,z)})},P&&(i[T]=P(i[T])))}function g(T,P){try{m(r[T](P))}catch(z){I(o[0][3],z)}}function m(T){T.value instanceof Jo?Promise.resolve(T.value.v).then(v,b):I(o[0][2],T)}function v(T){g("next",T)}function b(T){g("throw",T)}function I(T,P){T(P),o.shift(),o.length&&g(o[0][0],o[0][1])}}function Ow(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=e[Symbol.asyncIterator],t;return n?n.call(e):(e=typeof Mw=="function"?Mw(e):e[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=e[o]&&function(l){return new Promise(function(h,g){l=e[o](l),i(h,g,l.done,l.value)})}}function i(o,l,h,g){Promise.resolve(g).then(function(m){o({value:m,done:h})},l)}}var td=e=>e&&typeof e.length=="number"&&typeof e!="function";function nd(e){return Ne(e?.then)}function rd(e){return Ne(e[Qs])}function id(e){return Symbol.asyncIterator&&Ne(e?.[Symbol.asyncIterator])}function od(e){return new TypeError(`You provided ${e!==null&&typeof e=="object"?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function eO(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var sd=eO();function ad(e){return Ne(e?.[sd])}function ld(e){return Aw(this,arguments,function*(){let t=e.getReader();try{for(;;){let{value:r,done:i}=yield Jo(t.read());if(i)return yield Jo(void 0);yield yield Jo(r)}}finally{t.releaseLock()}})}function cd(e){return Ne(e?.getReader)}function Xt(e){if(e instanceof Ve)return e;if(e!=null){if(rd(e))return tO(e);if(td(e))return nO(e);if(nd(e))return rO(e);if(id(e))return Nw(e);if(ad(e))return iO(e);if(cd(e))return oO(e)}throw od(e)}function tO(e){return new Ve(n=>{let t=e[Qs]();if(Ne(t.subscribe))return t.subscribe(n);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function nO(e){return new Ve(n=>{for(let t=0;t<e.length&&!n.closed;t++)n.next(e[t]);n.complete()})}function rO(e){return new Ve(n=>{e.then(t=>{n.closed||(n.next(t),n.complete())},t=>n.error(t)).then(null,qu)})}function iO(e){return new Ve(n=>{for(let t of e)if(n.next(t),n.closed)return;n.complete()})}function Nw(e){return new Ve(n=>{sO(e,n).catch(t=>n.error(t))})}function oO(e){return Nw(ld(e))}function sO(e,n){var t,r,i,o;return Tw(this,void 0,void 0,function*(){try{for(t=Ow(e);r=yield t.next(),!r.done;){let l=r.value;if(n.next(l),n.closed)return}}catch(l){i={error:l}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}n.complete()})}function Kn(e,n,t,r=0,i=!1){let o=n.schedule(function(){t(),i?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(o),!i)return o}function ud(e,n=0){return et((t,r)=>{t.subscribe(Xe(r,i=>Kn(r,e,()=>r.next(i),n),()=>Kn(r,e,()=>r.complete(),n),i=>Kn(r,e,()=>r.error(i),n)))})}function dd(e,n=0){return et((t,r)=>{r.add(e.schedule(()=>t.subscribe(r),n))})}function Rw(e,n){return Xt(e).pipe(dd(n),ud(n))}function Pw(e,n){return Xt(e).pipe(dd(n),ud(n))}function kw(e,n){return new Ve(t=>{let r=0;return n.schedule(function(){r===e.length?t.complete():(t.next(e[r++]),t.closed||this.schedule())})})}function Fw(e,n){return new Ve(t=>{let r;return Kn(t,n,()=>{r=e[sd](),Kn(t,n,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(l){t.error(l);return}o?t.complete():t.next(i)},0,!0)}),()=>Ne(r?.return)&&r.return()})}function fd(e,n){if(!e)throw new Error("Iterable cannot be null");return new Ve(t=>{Kn(t,n,()=>{let r=e[Symbol.asyncIterator]();Kn(t,n,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function Lw(e,n){return fd(ld(e),n)}function Bw(e,n){if(e!=null){if(rd(e))return Rw(e,n);if(td(e))return kw(e,n);if(nd(e))return Pw(e,n);if(id(e))return fd(e,n);if(ad(e))return Fw(e,n);if(cd(e))return Lw(e,n)}throw od(e)}function Dt(e,n){return n?Bw(e,n):Xt(e)}function Oe(...e){let n=lo(e);return Dt(e,n)}function ta(e,n){let t=Ne(e)?e:()=>e,r=i=>i.error(t());return new Ve(n?i=>n.schedule(r,0,i):r)}function pg(e){return!!e&&(e instanceof Ve||Ne(e.lift)&&Ne(e.subscribe))}var Si=qs(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"});function Uw(e){return e instanceof Date&&!isNaN(e)}function je(e,n){return et((t,r)=>{let i=0;t.subscribe(Xe(r,o=>{r.next(e.call(n,o,i++))}))})}var{isArray:aO}=Array;function lO(e,n){return aO(n)?e(...n):e(n)}function hd(e){return je(n=>lO(e,n))}var{isArray:cO}=Array,{getPrototypeOf:uO,prototype:dO,keys:fO}=Object;function pd(e){if(e.length===1){let n=e[0];if(cO(n))return{args:n,keys:null};if(hO(n)){let t=fO(n);return{args:t.map(r=>n[r]),keys:t}}}return{args:e,keys:null}}function hO(e){return e&&typeof e=="object"&&uO(e)===dO}function gd(e,n){return e.reduce((t,r,i)=>(t[r]=n[i],t),{})}function md(...e){let n=lo(e),t=ed(e),{args:r,keys:i}=pd(e);if(r.length===0)return Dt([],n);let o=new Ve(pO(r,n,i?l=>gd(i,l):ar));return t?o.pipe(hd(t)):o}function pO(e,n,t=ar){return r=>{Vw(n,()=>{let{length:i}=e,o=new Array(i),l=i,h=i;for(let g=0;g<i;g++)Vw(n,()=>{let m=Dt(e[g],n),v=!1;m.subscribe(Xe(r,b=>{o[g]=b,v||(v=!0,h--),h||r.next(t(o.slice()))},()=>{--l||r.complete()}))},r)},r)}}function Vw(e,n,t){e?Kn(t,e,n):n()}function jw(e,n,t,r,i,o,l,h){let g=[],m=0,v=0,b=!1,I=()=>{b&&!g.length&&!m&&n.complete()},T=z=>m<r?P(z):g.push(z),P=z=>{o&&n.next(z),m++;let Z=!1;Xt(t(z,v++)).subscribe(Xe(n,q=>{i?.(q),o?T(q):n.next(q)},()=>{Z=!0},void 0,()=>{if(Z)try{for(m--;g.length&&m<r;){let q=g.shift();l?Kn(n,l,()=>P(q)):P(q)}I()}catch(q){n.error(q)}}))};return e.subscribe(Xe(n,T,()=>{b=!0,I()})),()=>{h?.()}}function on(e,n,t=1/0){return Ne(n)?on((r,i)=>je((o,l)=>n(r,o,i,l))(Xt(e(r,i))),t):(typeof n=="number"&&(t=n),et((r,i)=>jw(r,i,e,t)))}function gg(e=1/0){return on(ar,e)}function Hw(){return gg(1)}function na(...e){return Hw()(Dt(e,lo(e)))}function yd(e){return new Ve(n=>{Xt(e()).subscribe(n)})}function mg(...e){let n=ed(e),{args:t,keys:r}=pd(e),i=new Ve(o=>{let{length:l}=t;if(!l){o.complete();return}let h=new Array(l),g=l,m=l;for(let v=0;v<l;v++){let b=!1;Xt(t[v]).subscribe(Xe(o,I=>{b||(b=!0,m--),h[v]=I},()=>g--,void 0,()=>{(!g||!b)&&(m||o.next(r?gd(r,h):h),o.complete())}))}});return n?i.pipe(hd(n)):i}function yg(e=0,n,t=Sw){let r=-1;return n!=null&&(Ju(n)?t=n:r=n),new Ve(i=>{let o=Uw(e)?+e-t.now():e;o<0&&(o=0);let l=0;return t.schedule(function(){i.closed||(i.next(l++),0<=r?this.schedule(void 0,r):i.complete())},o)})}function wr(e,n){return et((t,r)=>{let i=0;t.subscribe(Xe(r,o=>e.call(n,o,i++)&&r.next(o)))})}function vr(e){return et((n,t)=>{let r=null,i=!1,o;r=n.subscribe(Xe(t,void 0,void 0,l=>{o=Xt(e(l,vr(e)(n))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function zw(e,n,t,r,i){return(o,l)=>{let h=t,g=n,m=0;o.subscribe(Xe(l,v=>{let b=m++;g=h?e(g,v,b):(h=!0,v),r&&l.next(g)},i&&(()=>{h&&l.next(g),l.complete()})))}}function es(e,n){return Ne(n)?on(e,n,1):on(e,1)}function co(e){return et((n,t)=>{let r=!1;n.subscribe(Xe(t,i=>{r=!0,t.next(i)},()=>{r||t.next(e),t.complete()}))})}function Di(e){return e<=0?()=>lr:et((n,t)=>{let r=0;n.subscribe(Xe(t,i=>{++r<=e&&(t.next(i),e<=r&&t.complete())}))})}function _g(e){return je(()=>e)}function _d(e=gO){return et((n,t)=>{let r=!1;n.subscribe(Xe(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(e())))})}function gO(){return new Si}function ra(e){return et((n,t)=>{try{n.subscribe(t)}finally{t.add(e)}})}function jr(e,n){let t=arguments.length>=2;return r=>r.pipe(e?wr((i,o)=>e(i,o,r)):ar,Di(1),t?co(n):_d(()=>new Si))}function ia(e){return e<=0?()=>lr:et((n,t)=>{let r=[];n.subscribe(Xe(t,i=>{r.push(i),e<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Cg(e,n){let t=arguments.length>=2;return r=>r.pipe(e?wr((i,o)=>e(i,o,r)):ar,ia(1),t?co(n):_d(()=>new Si))}function wg(e,n){return et(zw(e,n,arguments.length>=2,!0))}function vg(...e){let n=lo(e);return et((t,r)=>{(n?na(e,t,n):na(e,t)).subscribe(r)})}function br(e,n){return et((t,r)=>{let i=null,o=0,l=!1,h=()=>l&&!i&&r.complete();t.subscribe(Xe(r,g=>{i?.unsubscribe();let m=0,v=o++;Xt(e(g,v)).subscribe(i=Xe(r,b=>r.next(n?n(g,b,v,m++):b),()=>{i=null,h()}))},()=>{l=!0,h()}))})}function bg(e){return et((n,t)=>{Xt(e).subscribe(Xe(t,()=>t.complete(),Dl)),!t.closed&&n.subscribe(t)})}function sn(e,n,t){let r=Ne(e)||n||t?{next:e,error:n,complete:t}:e;return r?et((i,o)=>{var l;(l=r.subscribe)===null||l===void 0||l.call(r);let h=!0;i.subscribe(Xe(o,g=>{var m;(m=r.next)===null||m===void 0||m.call(r,g),o.next(g)},()=>{var g;h=!1,(g=r.complete)===null||g===void 0||g.call(r),o.complete()},g=>{var m;h=!1,(m=r.error)===null||m===void 0||m.call(r,g),o.error(g)},()=>{var g,m;h&&((g=r.unsubscribe)===null||g===void 0||g.call(r)),(m=r.finalize)===null||m===void 0||m.call(r)}))}):ar}var Rv="https://g.co/ng/security#xss",fe=class extends Error{constructor(n,t){super(lf(n,t)),this.code=n}};function lf(e,n){return`${`NG0${Math.abs(e)}`}${n?": "+n:""}`}function Wl(e){return{toString:e}.toString()}var Cd="__parameters__";function mO(e){return function(...t){if(e){let r=e(...t);for(let i in r)this[i]=r[i]}}}function Pv(e,n,t){return Wl(()=>{let r=mO(n);function i(...o){if(this instanceof i)return r.apply(this,o),this;let l=new i(...o);return h.annotation=l,h;function h(g,m,v){let b=g.hasOwnProperty(Cd)?g[Cd]:Object.defineProperty(g,Cd,{value:[]})[Cd];for(;b.length<=v;)b.push(null);return(b[v]=b[v]||[]).push(l),g}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=e,i.annotationCls=i,i})}var Ug=globalThis;function Mt(e){for(let n in e)if(e[n]===Mt)return n;throw Error("Could not find renamed property on target object.")}function yO(e,n){for(let t in n)n.hasOwnProperty(t)&&!e.hasOwnProperty(t)&&(e[t]=n[t])}function jn(e){if(typeof e=="string")return e;if(Array.isArray(e))return"["+e.map(jn).join(", ")+"]";if(e==null)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;let n=e.toString();if(n==null)return""+n;let t=n.indexOf(`
`);return t===-1?n:n.substring(0,t)}function Vg(e,n){return e==null||e===""?n===null?"":n:n==null||n===""?e:e+" "+n}var _O=Mt({__forward_ref__:Mt});function ci(e){return e.__forward_ref__=ci,e.toString=function(){return jn(this())},e}function Un(e){return kv(e)?e():e}function kv(e){return typeof e=="function"&&e.hasOwnProperty(_O)&&e.__forward_ref__===ci}function he(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function Ri(e){return{providers:e.providers||[],imports:e.imports||[]}}function cf(e){return Ww(e,Lv)||Ww(e,Bv)}function Fv(e){return cf(e)!==null}function Ww(e,n){return e.hasOwnProperty(n)?e[n]:null}function CO(e){let n=e&&(e[Lv]||e[Bv]);return n||null}function Gw(e){return e&&(e.hasOwnProperty($w)||e.hasOwnProperty(wO))?e[$w]:null}var Lv=Mt({\u0275prov:Mt}),$w=Mt({\u0275inj:Mt}),Bv=Mt({ngInjectableDef:Mt}),wO=Mt({ngInjectorDef:Mt}),be=class{constructor(n,t){this._desc=n,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=he({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Uv(e){return e&&!!e.\u0275providers}var vO=Mt({\u0275cmp:Mt}),bO=Mt({\u0275dir:Mt}),xO=Mt({\u0275pipe:Mt}),EO=Mt({\u0275mod:Mt}),Pd=Mt({\u0275fac:Mt}),Nl=Mt({__NG_ELEMENT_ID__:Mt}),qw=Mt({__NG_ENV_ID__:Mt});function ts(e){return typeof e=="string"?e:e==null?"":String(e)}function IO(e){return typeof e=="function"?e.name||e.toString():typeof e=="object"&&e!=null&&typeof e.type=="function"?e.type.name||e.type.toString():ts(e)}function SO(e,n){let t=n?`. Dependency path: ${n.join(" > ")} > ${e}`:"";throw new fe(-200,e)}function em(e,n){throw new fe(-201,!1)}var ze=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}(ze||{}),jg;function Vv(){return jg}function xr(e){let n=jg;return jg=e,n}function jv(e,n,t){let r=cf(e);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&ze.Optional)return null;if(n!==void 0)return n;em(e,"Injector")}var DO={},Rl=DO,Hg="__NG_DI_FLAG__",kd="ngTempTokenPath",MO="ngTokenPath",TO=/\n/gm,AO="\u0275",Yw="__source",la;function OO(){return la}function uo(e){let n=la;return la=e,n}function NO(e,n=ze.Default){if(la===void 0)throw new fe(-203,!1);return la===null?jv(e,void 0,n):la.get(e,n&ze.Optional?null:void 0,n)}function We(e,n=ze.Default){return(Vv()||NO)(Un(e),n)}function te(e,n=ze.Default){return We(e,uf(n))}function uf(e){return typeof e>"u"||typeof e=="number"?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function zg(e){let n=[];for(let t=0;t<e.length;t++){let r=Un(e[t]);if(Array.isArray(r)){if(r.length===0)throw new fe(900,!1);let i,o=ze.Default;for(let l=0;l<r.length;l++){let h=r[l],g=RO(h);typeof g=="number"?g===-1?i=h.token:o|=g:i=h}n.push(We(i,o))}else n.push(We(r))}return n}function Hv(e,n){return e[Hg]=n,e.prototype[Hg]=n,e}function RO(e){return e[Hg]}function PO(e,n,t,r){let i=e[kd];throw n[Yw]&&i.unshift(n[Yw]),e.message=kO(`
`+e.message,i,t,r),e[MO]=i,e[kd]=null,e}function kO(e,n,t,r=null){e=e&&e.charAt(0)===`
`&&e.charAt(1)==AO?e.slice(2):e;let i=jn(n);if(Array.isArray(n))i=n.map(jn).join(" -> ");else if(typeof n=="object"){let o=[];for(let l in n)if(n.hasOwnProperty(l)){let h=n[l];o.push(l+":"+(typeof h=="string"?JSON.stringify(h):jn(h)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${e.replace(TO,`
  `)}`}var df=Hv(Pv("Optional"),8);var tm=Hv(Pv("SkipSelf"),4);function ua(e,n){let t=e.hasOwnProperty(Pd);return t?e[Pd]:null}function FO(e,n,t){if(e.length!==n.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],o=n[r];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}function LO(e){return e.flat(Number.POSITIVE_INFINITY)}function nm(e,n){e.forEach(t=>Array.isArray(t)?nm(t,n):n(t))}function zv(e,n,t){n>=e.length?e.push(t):e.splice(n,0,t)}function Fd(e,n){return n>=e.length-1?e.pop():e.splice(n,1)[0]}function BO(e,n,t,r){let i=e.length;if(i==n)e.push(t,r);else if(i===1)e.push(r,e[0]),e[0]=t;else{for(i--,e.push(e[i-1],e[i]);i>n;){let o=i-2;e[i]=e[o],i--}e[n]=t,e[n+1]=r}}function rm(e,n,t){let r=Gl(e,n);return r>=0?e[r|1]=t:(r=~r,BO(e,r,n,t)),r}function xg(e,n){let t=Gl(e,n);if(t>=0)return e[t|1]}function Gl(e,n){return UO(e,n,1)}function UO(e,n,t){let r=0,i=e.length>>t;for(;i!==r;){let o=r+(i-r>>1),l=e[o<<t];if(n===l)return o<<t;l>n?i=o:r=o+1}return~(i<<t)}var da={},Vn=[],rs=new be(""),Wv=new be("",-1),Gv=new be(""),Ld=class{get(n,t=Rl){if(t===Rl){let r=new Error(`NullInjectorError: No provider for ${jn(n)}!`);throw r.name="NullInjectorError",r}return t}},$v=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}($v||{}),si=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}(si||{}),ho=function(e){return e[e.None=0]="None",e[e.SignalBased=1]="SignalBased",e[e.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",e}(ho||{});function VO(e,n,t){let r=e.length;for(;;){let i=e.indexOf(n,t);if(i===-1)return i;if(i===0||e.charCodeAt(i-1)<=32){let o=n.length;if(i+o===r||e.charCodeAt(i+o)<=32)return i}t=i+1}}function Wg(e,n,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],l=t[r++],h=t[r++];e.setAttribute(n,l,h,o)}else{let o=i,l=t[++r];HO(o)?e.setProperty(n,o,l):e.setAttribute(n,o,l),r++}}return r}function jO(e){return e===3||e===4||e===6}function HO(e){return e.charCodeAt(0)===64}function Pl(e,n){if(!(n===null||n.length===0))if(e===null||e.length===0)e=n.slice();else{let t=-1;for(let r=0;r<n.length;r++){let i=n[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?Zw(e,t,i,null,n[++r]):Zw(e,t,i,null,null))}}return e}function Zw(e,n,t,r,i){let o=0,l=e.length;if(n===-1)l=-1;else for(;o<e.length;){let h=e[o++];if(typeof h=="number"){if(h===n){l=-1;break}else if(h>n){l=o-1;break}}}for(;o<e.length;){let h=e[o];if(typeof h=="number")break;if(h===t){if(r===null){i!==null&&(e[o+1]=i);return}else if(r===e[o+1]){e[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}l!==-1&&(e.splice(l,0,n),o=l+1),e.splice(o++,0,t),r!==null&&e.splice(o++,0,r),i!==null&&e.splice(o++,0,i)}var qv="ng-template";function zO(e,n,t,r){let i=0;if(r){for(;i<n.length&&typeof n[i]=="string";i+=2)if(n[i]==="class"&&VO(n[i+1].toLowerCase(),t,0)!==-1)return!0}else if(im(e))return!1;if(i=n.indexOf(1,i),i>-1){let o;for(;++i<n.length&&typeof(o=n[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function im(e){return e.type===4&&e.value!==qv}function WO(e,n,t){let r=e.type===4&&!t?qv:e.value;return n===r}function GO(e,n,t){let r=4,i=e.attrs,o=i!==null?YO(i):0,l=!1;for(let h=0;h<n.length;h++){let g=n[h];if(typeof g=="number"){if(!l&&!Hr(r)&&!Hr(g))return!1;if(l&&Hr(g))continue;l=!1,r=g|r&1;continue}if(!l)if(r&4){if(r=2|r&1,g!==""&&!WO(e,g,t)||g===""&&n.length===1){if(Hr(r))return!1;l=!0}}else if(r&8){if(i===null||!zO(e,i,g,t)){if(Hr(r))return!1;l=!0}}else{let m=n[++h],v=$O(g,i,im(e),t);if(v===-1){if(Hr(r))return!1;l=!0;continue}if(m!==""){let b;if(v>o?b="":b=i[v+1].toLowerCase(),r&2&&m!==b){if(Hr(r))return!1;l=!0}}}}return Hr(r)||l}function Hr(e){return(e&1)===0}function $O(e,n,t,r){if(n===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<n.length;){let l=n[i];if(l===e)return i;if(l===3||l===6)o=!0;else if(l===1||l===2){let h=n[++i];for(;typeof h=="string";)h=n[++i];continue}else{if(l===4)break;if(l===0){i+=4;continue}}i+=o?1:2}return-1}else return ZO(n,e)}function qO(e,n,t=!1){for(let r=0;r<n.length;r++)if(GO(e,n[r],t))return!0;return!1}function YO(e){for(let n=0;n<e.length;n++){let t=e[n];if(jO(t))return n}return e.length}function ZO(e,n){let t=e.indexOf(4);if(t>-1)for(t++;t<e.length;){let r=e[t];if(typeof r=="number")return-1;if(r===n)return t;t++}return-1}function Xw(e,n){return e?":not("+n.trim()+")":n}function XO(e){let n=e[0],t=1,r=2,i="",o=!1;for(;t<e.length;){let l=e[t];if(typeof l=="string")if(r&2){let h=e[++t];i+="["+l+(h.length>0?'="'+h+'"':"")+"]"}else r&8?i+="."+l:r&4&&(i+=" "+l);else i!==""&&!Hr(l)&&(n+=Xw(o,i),i=""),r=l,o=o||!Hr(r);t++}return i!==""&&(n+=Xw(o,i)),n}function QO(e){return e.map(XO).join(",")}function KO(e){let n=[],t=[],r=1,i=2;for(;r<e.length;){let o=e[r];if(typeof o=="string")i===2?o!==""&&n.push(o,e[++r]):i===8&&t.push(o);else{if(!Hr(i))break;i=o}r++}return{attrs:n,classes:t}}function oe(e){return Wl(()=>{let n=Kv(e),t=Ue(re({},n),{decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===$v.OnPush,directiveDefs:null,pipeDefs:null,dependencies:n.standalone&&e.dependencies||null,getStandaloneInjector:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||si.Emulated,styles:e.styles||Vn,_:null,schemas:e.schemas||null,tView:null,id:""});Jv(t);let r=e.dependencies;return t.directiveDefs=Kw(r,!1),t.pipeDefs=Kw(r,!0),t.id=tN(t),t})}function JO(e){return is(e)||Yv(e)}function eN(e){return e!==null}function Pi(e){return Wl(()=>({type:e.type,bootstrap:e.bootstrap||Vn,declarations:e.declarations||Vn,imports:e.imports||Vn,exports:e.exports||Vn,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function Qw(e,n){if(e==null)return da;let t={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r],o,l,h=ho.None;Array.isArray(i)?(h=i[0],o=i[1],l=i[2]??o):(o=i,l=i),n?(t[o]=h!==ho.None?[r,h]:r,n[o]=l):t[o]=r}return t}function zt(e){return Wl(()=>{let n=Kv(e);return Jv(n),n})}function is(e){return e[vO]||null}function Yv(e){return e[bO]||null}function Zv(e){return e[xO]||null}function Xv(e){let n=is(e)||Yv(e)||Zv(e);return n!==null?n.standalone:!1}function Qv(e,n){let t=e[EO]||null;if(!t&&n===!0)throw new Error(`Type ${jn(e)} does not have '\u0275mod' property.`);return t}function Kv(e){let n={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:n,inputTransforms:null,inputConfig:e.inputs||da,exportAs:e.exportAs||null,standalone:e.standalone===!0,signals:e.signals===!0,selectors:e.selectors||Vn,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Qw(e.inputs,n),outputs:Qw(e.outputs),debugInfo:null}}function Jv(e){e.features?.forEach(n=>n(e))}function Kw(e,n){if(!e)return null;let t=n?Zv:JO;return()=>(typeof e=="function"?e():e).map(r=>t(r)).filter(eN)}function tN(e){let n=0,t=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,e.consts,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery].join("|");for(let i of t)n=Math.imul(31,n)+i.charCodeAt(0)<<0;return n+=2147483648,"c"+n}function Ca(e){return{\u0275providers:e}}function nN(...e){return{\u0275providers:eb(!0,e),\u0275fromNgModule:!0}}function eb(e,...n){let t=[],r=new Set,i,o=l=>{t.push(l)};return nm(n,l=>{let h=l;Gg(h,o,[],r)&&(i||=[],i.push(h))}),i!==void 0&&tb(i,o),t}function tb(e,n){for(let t=0;t<e.length;t++){let{ngModule:r,providers:i}=e[t];om(i,o=>{n(o,r)})}}function Gg(e,n,t,r){if(e=Un(e),!e)return!1;let i=null,o=Gw(e),l=!o&&is(e);if(!o&&!l){let g=e.ngModule;if(o=Gw(g),o)i=g;else return!1}else{if(l&&!l.standalone)return!1;i=e}let h=r.has(i);if(l){if(h)return!1;if(r.add(i),l.dependencies){let g=typeof l.dependencies=="function"?l.dependencies():l.dependencies;for(let m of g)Gg(m,n,t,r)}}else if(o){if(o.imports!=null&&!h){r.add(i);let m;try{nm(o.imports,v=>{Gg(v,n,t,r)&&(m||=[],m.push(v))})}finally{}m!==void 0&&tb(m,n)}if(!h){let m=ua(i)||(()=>new i);n({provide:i,useFactory:m,deps:Vn},i),n({provide:Gv,useValue:i,multi:!0},i),n({provide:rs,useValue:()=>We(i),multi:!0},i)}let g=o.providers;if(g!=null&&!h){let m=e;om(g,v=>{n(v,m)})}}else return!1;return i!==e&&e.providers!==void 0}function om(e,n){for(let t of e)Uv(t)&&(t=t.\u0275providers),Array.isArray(t)?om(t,n):n(t)}var rN=Mt({provide:String,useValue:Mt});function nb(e){return e!==null&&typeof e=="object"&&rN in e}function iN(e){return!!(e&&e.useExisting)}function oN(e){return!!(e&&e.useFactory)}function fa(e){return typeof e=="function"}function sN(e){return!!e.useClass}var ff=new be(""),Md={},aN={},Eg;function sm(){return Eg===void 0&&(Eg=new Ld),Eg}var Ir=class{},kl=class extends Ir{get destroyed(){return this._destroyed}constructor(n,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,qg(n,l=>this.processProvider(l)),this.records.set(Wv,oa(void 0,this)),i.has("environment")&&this.records.set(Ir,oa(void 0,this));let o=this.records.get(ff);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Gv,Vn,ze.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let n=Ye(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Ye(n)}}onDestroy(n){return this.assertNotDestroyed(),this._onDestroyHooks.push(n),()=>this.removeOnDestroy(n)}runInContext(n){this.assertNotDestroyed();let t=uo(this),r=xr(void 0),i;try{return n()}finally{uo(t),xr(r)}}get(n,t=Rl,r=ze.Default){if(this.assertNotDestroyed(),n.hasOwnProperty(qw))return n[qw](this);r=uf(r);let i,o=uo(this),l=xr(void 0);try{if(!(r&ze.SkipSelf)){let g=this.records.get(n);if(g===void 0){let m=fN(n)&&cf(n);m&&this.injectableDefInScope(m)?g=oa($g(n),Md):g=null,this.records.set(n,g)}if(g!=null)return this.hydrate(n,g)}let h=r&ze.Self?sm():this.parent;return t=r&ze.Optional&&t===Rl?null:t,h.get(n,t)}catch(h){if(h.name==="NullInjectorError"){if((h[kd]=h[kd]||[]).unshift(jn(n)),o)throw h;return PO(h,n,"R3InjectorError",this.source)}else throw h}finally{xr(l),uo(o)}}resolveInjectorInitializers(){let n=Ye(null),t=uo(this),r=xr(void 0),i;try{let o=this.get(rs,Vn,ze.Self);for(let l of o)l()}finally{uo(t),xr(r),Ye(n)}}toString(){let n=[],t=this.records;for(let r of t.keys())n.push(jn(r));return`R3Injector[${n.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new fe(205,!1)}processProvider(n){n=Un(n);let t=fa(n)?n:Un(n&&n.provide),r=cN(n);if(!fa(n)&&n.multi===!0){let i=this.records.get(t);i||(i=oa(void 0,Md,!0),i.factory=()=>zg(i.multi),this.records.set(t,i)),t=n,i.multi.push(n)}this.records.set(t,r)}hydrate(n,t){let r=Ye(null);try{return t.value===Md&&(t.value=aN,t.value=t.factory()),typeof t.value=="object"&&t.value&&dN(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{Ye(r)}}injectableDefInScope(n){if(!n.providedIn)return!1;let t=Un(n.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(n){let t=this._onDestroyHooks.indexOf(n);t!==-1&&this._onDestroyHooks.splice(t,1)}};function $g(e){let n=cf(e),t=n!==null?n.factory:ua(e);if(t!==null)return t;if(e instanceof be)throw new fe(204,!1);if(e instanceof Function)return lN(e);throw new fe(204,!1)}function lN(e){if(e.length>0)throw new fe(204,!1);let t=CO(e);return t!==null?()=>t.factory(e):()=>new e}function cN(e){if(nb(e))return oa(void 0,e.useValue);{let n=rb(e);return oa(n,Md)}}function rb(e,n,t){let r;if(fa(e)){let i=Un(e);return ua(i)||$g(i)}else if(nb(e))r=()=>Un(e.useValue);else if(oN(e))r=()=>e.useFactory(...zg(e.deps||[]));else if(iN(e))r=()=>We(Un(e.useExisting));else{let i=Un(e&&(e.useClass||e.provide));if(uN(e))r=()=>new i(...zg(e.deps));else return ua(i)||$g(i)}return r}function oa(e,n,t=!1){return{factory:e,value:n,multi:t?[]:void 0}}function uN(e){return!!e.deps}function dN(e){return e!==null&&typeof e=="object"&&typeof e.ngOnDestroy=="function"}function fN(e){return typeof e=="function"||typeof e=="object"&&e instanceof be}function qg(e,n){for(let t of e)Array.isArray(t)?qg(t,n):t&&Uv(t)?qg(t.\u0275providers,n):n(t)}function ui(e,n){e instanceof kl&&e.assertNotDestroyed();let t,r=uo(e),i=xr(void 0);try{return n()}finally{uo(r),xr(i)}}function hN(){return Vv()!==void 0||OO()!=null}function pN(e){return typeof e=="function"}var cr=0,Ae=1,Te=2,xn=3,Wr=4,Zr=5,$r=6,Bd=7,Nn=8,ha=9,Mi=10,Ft=11,Fl=12,Jw=13,wa=14,ur=15,os=16,sa=17,Ti=18,hf=19,ib=20,fo=21,Ig=22,Er=23,an=25,ob=1,Ll=6,Ai=7,Ud=8,pa=9,bn=10,Vd=function(e){return e[e.None=0]="None",e[e.HasTransplantedViews=2]="HasTransplantedViews",e}(Vd||{});function Gr(e){return Array.isArray(e)&&typeof e[ob]=="object"}function di(e){return Array.isArray(e)&&e[ob]===!0}function am(e){return(e.flags&4)!==0}function $l(e){return e.componentOffset>-1}function pf(e){return(e.flags&1)===1}function po(e){return!!e.template}function jd(e){return(e[Te]&512)!==0}var Yg=class{constructor(n,t,r){this.previousValue=n,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function sb(e,n,t,r){n!==null?n.applyValueToInputSignal(n,r):e[t]=r}function ki(){return ab}function ab(e){return e.type.prototype.ngOnChanges&&(e.setInput=mN),gN}ki.ngInherit=!0;function gN(){let e=cb(this),n=e?.current;if(n){let t=e.previous;if(t===da)e.previous=n;else for(let r in n)t[r]=n[r];e.current=null,this.ngOnChanges(n)}}function mN(e,n,t,r,i){let o=this.declaredInputs[r],l=cb(e)||yN(e,{previous:da,current:null}),h=l.current||(l.current={}),g=l.previous,m=g[o];h[o]=new Yg(m&&m.currentValue,t,g===da),sb(e,n,i,t)}var lb="__ngSimpleChanges__";function cb(e){return e[lb]||null}function yN(e,n){return e[lb]=n}var ev=null;var ii=function(e,n,t){ev?.(e,n,t)},_N="svg",CN="math";function qr(e){for(;Array.isArray(e);)e=e[cr];return e}function ub(e,n){return qr(n[e])}function dr(e,n){return qr(n[e.index])}function lm(e,n){return e.data[n]}function wN(e,n){return e[n]}function _o(e,n){let t=n[e];return Gr(t)?t:t[cr]}function vN(e){return(e[Te]&4)===4}function cm(e){return(e[Te]&128)===128}function bN(e){return di(e[xn])}function go(e,n){return n==null?null:e[n]}function db(e){e[sa]=0}function fb(e){e[Te]&1024||(e[Te]|=1024,cm(e)&&mf(e))}function xN(e,n){for(;e>0;)n=n[wa],e--;return n}function gf(e){return!!(e[Te]&9216||e[Er]?.dirty)}function Zg(e){e[Mi].changeDetectionScheduler?.notify(8),e[Te]&64&&(e[Te]|=1024),gf(e)&&mf(e)}function mf(e){e[Mi].changeDetectionScheduler?.notify(0);let n=ss(e);for(;n!==null&&!(n[Te]&8192||(n[Te]|=8192,!cm(n)));)n=ss(n)}function hb(e,n){if((e[Te]&256)===256)throw new fe(911,!1);e[fo]===null&&(e[fo]=[]),e[fo].push(n)}function EN(e,n){if(e[fo]===null)return;let t=e[fo].indexOf(n);t!==-1&&e[fo].splice(t,1)}function ss(e){let n=e[xn];return di(n)?n[xn]:n}var ke={lFrame:xb(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var pb=!1;function IN(){return ke.lFrame.elementDepthCount}function SN(){ke.lFrame.elementDepthCount++}function DN(){ke.lFrame.elementDepthCount--}function gb(){return ke.bindingsEnabled}function ql(){return ke.skipHydrationRootTNode!==null}function MN(e){return ke.skipHydrationRootTNode===e}function TN(e){ke.skipHydrationRootTNode=e}function AN(){ke.skipHydrationRootTNode=null}function Qe(){return ke.lFrame.lView}function ln(){return ke.lFrame.tView}function it(e){return ke.lFrame.contextLView=e,e[Nn]}function ot(e){return ke.lFrame.contextLView=null,e}function Hn(){let e=mb();for(;e!==null&&e.type===64;)e=e.parent;return e}function mb(){return ke.lFrame.currentTNode}function ON(){let e=ke.lFrame,n=e.currentTNode;return e.isParent?n:n.parent}function hs(e,n){let t=ke.lFrame;t.currentTNode=e,t.isParent=n}function um(){return ke.lFrame.isParent}function yb(){ke.lFrame.isParent=!1}function NN(){return ke.lFrame.contextLView}function _b(){return pb}function tv(e){pb=e}function Cb(){let e=ke.lFrame,n=e.bindingRootIndex;return n===-1&&(n=e.bindingRootIndex=e.tView.bindingStartIndex),n}function RN(){return ke.lFrame.bindingIndex}function PN(e){return ke.lFrame.bindingIndex=e}function va(){return ke.lFrame.bindingIndex++}function dm(e){let n=ke.lFrame,t=n.bindingIndex;return n.bindingIndex=n.bindingIndex+e,t}function kN(){return ke.lFrame.inI18n}function FN(e,n){let t=ke.lFrame;t.bindingIndex=t.bindingRootIndex=e,Xg(n)}function LN(){return ke.lFrame.currentDirectiveIndex}function Xg(e){ke.lFrame.currentDirectiveIndex=e}function BN(e){let n=ke.lFrame.currentDirectiveIndex;return n===-1?null:e[n]}function wb(){return ke.lFrame.currentQueryIndex}function fm(e){ke.lFrame.currentQueryIndex=e}function UN(e){let n=e[Ae];return n.type===2?n.declTNode:n.type===1?e[Zr]:null}function vb(e,n,t){if(t&ze.SkipSelf){let i=n,o=e;for(;i=i.parent,i===null&&!(t&ze.Host);)if(i=UN(o),i===null||(o=o[wa],i.type&10))break;if(i===null)return!1;n=i,e=o}let r=ke.lFrame=bb();return r.currentTNode=n,r.lView=e,!0}function hm(e){let n=bb(),t=e[Ae];ke.lFrame=n,n.currentTNode=t.firstChild,n.lView=e,n.tView=t,n.contextLView=e,n.bindingIndex=t.bindingStartIndex,n.inI18n=!1}function bb(){let e=ke.lFrame,n=e===null?null:e.child;return n===null?xb(e):n}function xb(e){let n={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return e!==null&&(e.child=n),n}function Eb(){let e=ke.lFrame;return ke.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}var Ib=Eb;function pm(){let e=Eb();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function VN(e){return(ke.lFrame.contextLView=xN(e,ke.lFrame.contextLView))[Nn]}function Fi(){return ke.lFrame.selectedIndex}function as(e){ke.lFrame.selectedIndex=e}function gm(){let e=ke.lFrame;return lm(e.tView,e.selectedIndex)}function Sb(){return ke.lFrame.currentNamespace}var Db=!0;function yf(){return Db}function Co(e){Db=e}function jN(e,n,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=n.type.prototype;if(r){let l=ab(n);(t.preOrderHooks??=[]).push(e,l),(t.preOrderCheckHooks??=[]).push(e,l)}i&&(t.preOrderHooks??=[]).push(0-e,i),o&&((t.preOrderHooks??=[]).push(e,o),(t.preOrderCheckHooks??=[]).push(e,o))}function _f(e,n){for(let t=n.directiveStart,r=n.directiveEnd;t<r;t++){let o=e.data[t].type.prototype,{ngAfterContentInit:l,ngAfterContentChecked:h,ngAfterViewInit:g,ngAfterViewChecked:m,ngOnDestroy:v}=o;l&&(e.contentHooks??=[]).push(-t,l),h&&((e.contentHooks??=[]).push(t,h),(e.contentCheckHooks??=[]).push(t,h)),g&&(e.viewHooks??=[]).push(-t,g),m&&((e.viewHooks??=[]).push(t,m),(e.viewCheckHooks??=[]).push(t,m)),v!=null&&(e.destroyHooks??=[]).push(t,v)}}function Td(e,n,t){Mb(e,n,3,t)}function Ad(e,n,t,r){(e[Te]&3)===t&&Mb(e,n,t,r)}function Sg(e,n){let t=e[Te];(t&3)===n&&(t&=16383,t+=1,e[Te]=t)}function Mb(e,n,t,r){let i=r!==void 0?e[sa]&65535:0,o=r??-1,l=n.length-1,h=0;for(let g=i;g<l;g++)if(typeof n[g+1]=="number"){if(h=n[g],r!=null&&h>=r)break}else n[g]<0&&(e[sa]+=65536),(h<o||o==-1)&&(HN(e,t,n,g),e[sa]=(e[sa]&4294901760)+g+2),g++}function nv(e,n){ii(4,e,n);let t=Ye(null);try{n.call(e)}finally{Ye(t),ii(5,e,n)}}function HN(e,n,t,r){let i=t[r]<0,o=t[r+1],l=i?-t[r]:t[r],h=e[l];i?e[Te]>>14<e[sa]>>16&&(e[Te]&3)===n&&(e[Te]+=16384,nv(h,o)):nv(h,o)}var ca=-1,ls=class{constructor(n,t,r){this.factory=n,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function zN(e){return e instanceof ls}function WN(e){return(e.flags&8)!==0}function GN(e){return(e.flags&16)!==0}var Dg={},Qg=class{constructor(n,t){this.injector=n,this.parentInjector=t}get(n,t,r){r=uf(r);let i=this.injector.get(n,Dg,r);return i!==Dg||t===Dg?i:this.parentInjector.get(n,t,r)}};function Tb(e){return e!==ca}function Hd(e){return e&32767}function $N(e){return e>>16}function zd(e,n){let t=$N(e),r=n;for(;t>0;)r=r[wa],t--;return r}var Kg=!0;function rv(e){let n=Kg;return Kg=e,n}var qN=256,Ab=qN-1,Ob=5,YN=0,oi={};function ZN(e,n,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(Nl)&&(r=t[Nl]),r==null&&(r=t[Nl]=YN++);let i=r&Ab,o=1<<i;n.data[e+(i>>Ob)]|=o}function Wd(e,n){let t=Nb(e,n);if(t!==-1)return t;let r=n[Ae];r.firstCreatePass&&(e.injectorIndex=n.length,Mg(r.data,e),Mg(n,null),Mg(r.blueprint,null));let i=mm(e,n),o=e.injectorIndex;if(Tb(i)){let l=Hd(i),h=zd(i,n),g=h[Ae].data;for(let m=0;m<8;m++)n[o+m]=h[l+m]|g[l+m]}return n[o+8]=i,o}function Mg(e,n){e.push(0,0,0,0,0,0,0,0,n)}function Nb(e,n){return e.injectorIndex===-1||e.parent&&e.parent.injectorIndex===e.injectorIndex||n[e.injectorIndex+8]===null?-1:e.injectorIndex}function mm(e,n){if(e.parent&&e.parent.injectorIndex!==-1)return e.parent.injectorIndex;let t=0,r=null,i=n;for(;i!==null;){if(r=Lb(i),r===null)return ca;if(t++,i=i[wa],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return ca}function Jg(e,n,t){ZN(e,n,t)}function Rb(e,n,t){if(t&ze.Optional||e!==void 0)return e;em(n,"NodeInjector")}function Pb(e,n,t,r){if(t&ze.Optional&&r===void 0&&(r=null),!(t&(ze.Self|ze.Host))){let i=e[ha],o=xr(void 0);try{return i?i.get(n,r,t&ze.Optional):jv(n,r,t&ze.Optional)}finally{xr(o)}}return Rb(r,n,t)}function kb(e,n,t,r=ze.Default,i){if(e!==null){if(n[Te]&2048&&!(r&ze.Self)){let l=JN(e,n,t,r,oi);if(l!==oi)return l}let o=Fb(e,n,t,r,oi);if(o!==oi)return o}return Pb(n,t,r,i)}function Fb(e,n,t,r,i){let o=QN(t);if(typeof o=="function"){if(!vb(n,e,r))return r&ze.Host?Rb(i,t,r):Pb(n,t,r,i);try{let l;if(l=o(r),l==null&&!(r&ze.Optional))em(t);else return l}finally{Ib()}}else if(typeof o=="number"){let l=null,h=Nb(e,n),g=ca,m=r&ze.Host?n[ur][Zr]:null;for((h===-1||r&ze.SkipSelf)&&(g=h===-1?mm(e,n):n[h+8],g===ca||!ov(r,!1)?h=-1:(l=n[Ae],h=Hd(g),n=zd(g,n)));h!==-1;){let v=n[Ae];if(iv(o,h,v.data)){let b=XN(h,n,t,l,r,m);if(b!==oi)return b}g=n[h+8],g!==ca&&ov(r,n[Ae].data[h+8]===m)&&iv(o,h,n)?(l=v,h=Hd(g),n=zd(g,n)):h=-1}}return i}function XN(e,n,t,r,i,o){let l=n[Ae],h=l.data[e+8],g=r==null?$l(h)&&Kg:r!=l&&(h.type&3)!==0,m=i&ze.Host&&o===h,v=Od(h,l,t,g,m);return v!==null?cs(n,l,v,h):oi}function Od(e,n,t,r,i){let o=e.providerIndexes,l=n.data,h=o&1048575,g=e.directiveStart,m=e.directiveEnd,v=o>>20,b=r?h:h+v,I=i?h+v:m;for(let T=b;T<I;T++){let P=l[T];if(T<g&&t===P||T>=g&&P.type===t)return T}if(i){let T=l[g];if(T&&po(T)&&T.type===t)return g}return null}function cs(e,n,t,r){let i=e[t],o=n.data;if(zN(i)){let l=i;l.resolving&&SO(IO(o[t]));let h=rv(l.canSeeViewProviders);l.resolving=!0;let g,m=l.injectImpl?xr(l.injectImpl):null,v=vb(e,r,ze.Default);try{i=e[t]=l.factory(void 0,o,e,r),n.firstCreatePass&&t>=r.directiveStart&&jN(t,o[t],n)}finally{m!==null&&xr(m),rv(h),l.resolving=!1,Ib()}}return i}function QN(e){if(typeof e=="string")return e.charCodeAt(0)||0;let n=e.hasOwnProperty(Nl)?e[Nl]:void 0;return typeof n=="number"?n>=0?n&Ab:KN:n}function iv(e,n,t){let r=1<<e;return!!(t[n+(e>>Ob)]&r)}function ov(e,n){return!(e&ze.Self)&&!(e&ze.Host&&n)}var ns=class{constructor(n,t){this._tNode=n,this._lView=t}get(n,t,r){return kb(this._tNode,this._lView,n,uf(r),t)}};function KN(){return new ns(Hn(),Qe())}function Li(e){return Wl(()=>{let n=e.prototype.constructor,t=n[Pd]||e0(n),r=Object.prototype,i=Object.getPrototypeOf(e.prototype).constructor;for(;i&&i!==r;){let o=i[Pd]||e0(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function e0(e){return kv(e)?()=>{let n=e0(Un(e));return n&&n()}:ua(e)}function JN(e,n,t,r,i){let o=e,l=n;for(;o!==null&&l!==null&&l[Te]&2048&&!(l[Te]&512);){let h=Fb(o,l,t,r|ze.Self,oi);if(h!==oi)return h;let g=o.parent;if(!g){let m=l[ib];if(m){let v=m.get(t,oi,r);if(v!==oi)return v}g=Lb(l),l=l[wa]}o=g}return i}function Lb(e){let n=e[Ae],t=n.type;return t===2?n.declTNode:t===1?e[Zr]:null}function sv(e,n=null,t=null,r){let i=Bb(e,n,t,r);return i.resolveInjectorInitializers(),i}function Bb(e,n=null,t=null,r,i=new Set){let o=[t||Vn,nN(e)];return r=r||(typeof e=="object"?void 0:jn(e)),new kl(o,n||sm(),r||null,i)}var ai=class e{static{this.THROW_IF_NOT_FOUND=Rl}static{this.NULL=new Ld}static create(n,t){if(Array.isArray(n))return sv({name:""},t,n,"");{let r=n.name??"";return sv({name:r},n.parent,n.providers,r)}}static{this.\u0275prov=he({token:e,providedIn:"any",factory:()=>We(Wv)})}static{this.__NG_ELEMENT_ID__=-1}};var eR=new be("");eR.__NG_ELEMENT_ID__=e=>{let n=Hn();if(n===null)throw new fe(204,!1);if(n.type&2)return n.value;if(e&ze.Optional)return null;throw new fe(204,!1)};var tR="ngOriginalError";function Tg(e){return e[tR]}var Ub=!0,Vb=(()=>{class e{static{this.__NG_ELEMENT_ID__=nR}static{this.__NG_ENV_ID__=t=>t}}return e})(),t0=class extends Vb{constructor(n){super(),this._lView=n}onDestroy(n){return hb(this._lView,n),()=>EN(this._lView,n)}};function nR(){return new t0(Qe())}var ps=(()=>{class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new vn(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=he({token:e,providedIn:"root",factory:()=>new e})}}return e})();var n0=class extends rn{constructor(n=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=n,hN()&&(this.destroyRef=te(Vb,{optional:!0})??void 0,this.pendingTasks=te(ps,{optional:!0})??void 0)}emit(n){let t=Ye(null);try{super.next(n)}finally{Ye(t)}}subscribe(n,t,r){let i=n,o=t||(()=>null),l=r;if(n&&typeof n=="object"){let g=n;i=g.next?.bind(g),o=g.error?.bind(g),l=g.complete?.bind(g)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),l&&(l=this.wrapInTimeout(l)));let h=super.subscribe({next:i,error:o,complete:l});return n instanceof Ht&&n.add(h),h}wrapInTimeout(n){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{n(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},Bt=n0;function Gd(...e){}function jb(e){let n,t;function r(){e=Gd;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),n!==void 0&&clearTimeout(n)}catch{}}return n=setTimeout(()=>{e(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{e(),r()})),()=>r()}function av(e){return queueMicrotask(()=>e()),()=>{e=Gd}}var ym="isAngularZone",$d=ym+"_ID",rR=0,Qt=class e{constructor(n){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Bt(!1),this.onMicrotaskEmpty=new Bt(!1),this.onStable=new Bt(!1),this.onError=new Bt(!1);let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=Ub}=n;if(typeof Zone>"u")throw new fe(908,!1);Zone.assertZonePatched();let l=this;l._nesting=0,l._outer=l._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(l._inner=l._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(l._inner=l._inner.fork(Zone.longStackTraceZoneSpec)),l.shouldCoalesceEventChangeDetection=!i&&r,l.shouldCoalesceRunChangeDetection=i,l.callbackScheduled=!1,l.scheduleInRootZone=o,sR(l)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(ym)===!0}static assertInAngularZone(){if(!e.isInAngularZone())throw new fe(909,!1)}static assertNotInAngularZone(){if(e.isInAngularZone())throw new fe(909,!1)}run(n,t,r){return this._inner.run(n,t,r)}runTask(n,t,r,i){let o=this._inner,l=o.scheduleEventTask("NgZoneEvent: "+i,n,iR,Gd,Gd);try{return o.runTask(l,t,r)}finally{o.cancelTask(l)}}runGuarded(n,t,r){return this._inner.runGuarded(n,t,r)}runOutsideAngular(n){return this._outer.run(n)}},iR={};function _m(e){if(e._nesting==0&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function oR(e){if(e.isCheckStableRunning||e.callbackScheduled)return;e.callbackScheduled=!0;function n(){jb(()=>{e.callbackScheduled=!1,r0(e),e.isCheckStableRunning=!0,_m(e),e.isCheckStableRunning=!1})}e.scheduleInRootZone?Zone.root.run(()=>{n()}):e._outer.run(()=>{n()}),r0(e)}function sR(e){let n=()=>{oR(e)},t=rR++;e._inner=e._inner.fork({name:"angular",properties:{[ym]:!0,[$d]:t,[$d+t]:!0},onInvokeTask:(r,i,o,l,h,g)=>{if(aR(g))return r.invokeTask(o,l,h,g);try{return lv(e),r.invokeTask(o,l,h,g)}finally{(e.shouldCoalesceEventChangeDetection&&l.type==="eventTask"||e.shouldCoalesceRunChangeDetection)&&n(),cv(e)}},onInvoke:(r,i,o,l,h,g,m)=>{try{return lv(e),r.invoke(o,l,h,g,m)}finally{e.shouldCoalesceRunChangeDetection&&!e.callbackScheduled&&!lR(g)&&n(),cv(e)}},onHasTask:(r,i,o,l)=>{r.hasTask(o,l),i===o&&(l.change=="microTask"?(e._hasPendingMicrotasks=l.microTask,r0(e),_m(e)):l.change=="macroTask"&&(e.hasPendingMacrotasks=l.macroTask))},onHandleError:(r,i,o,l)=>(r.handleError(o,l),e.runOutsideAngular(()=>e.onError.emit(l)),!1)})}function r0(e){e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&e.callbackScheduled===!0?e.hasPendingMicrotasks=!0:e.hasPendingMicrotasks=!1}function lv(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function cv(e){e._nesting--,_m(e)}var i0=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Bt,this.onMicrotaskEmpty=new Bt,this.onStable=new Bt,this.onError=new Bt}run(n,t,r){return n.apply(t,r)}runGuarded(n,t,r){return n.apply(t,r)}runOutsideAngular(n){return n()}runTask(n,t,r,i){return n.apply(t,r)}};function aR(e){return Hb(e,"__ignore_ng_zone__")}function lR(e){return Hb(e,"__scheduler_tick__")}function Hb(e,n){return!Array.isArray(e)||e.length!==1?!1:e[0]?.data?.[n]===!0}var Oi=class{constructor(){this._console=console}handleError(n){let t=this._findOriginalError(n);this._console.error("ERROR",n),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(n){let t=n&&Tg(n);for(;t&&Tg(t);)t=Tg(t);return t||null}},cR=new be("",{providedIn:"root",factory:()=>{let e=te(Qt),n=te(Oi);return t=>e.runOutsideAngular(()=>n.handleError(t))}});function uR(){return ba(Hn(),Qe())}function ba(e,n){return new fr(dr(e,n))}var fr=(()=>{class e{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=uR}}return e})();function dR(e){return e instanceof fr?e.nativeElement:e}function fR(){return this._results[Symbol.iterator]()}var o0=class e{get changes(){return this._changes??=new Bt}constructor(n=!1){this._emitDistinctChangesOnly=n,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let t=e.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=fR)}get(n){return this._results[n]}map(n){return this._results.map(n)}filter(n){return this._results.filter(n)}find(n){return this._results.find(n)}reduce(n,t){return this._results.reduce(n,t)}forEach(n){this._results.forEach(n)}some(n){return this._results.some(n)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(n,t){this.dirty=!1;let r=LO(n);(this._changesDetected=!FO(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(n){this._onDirty=n}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}},hR="ngSkipHydration",pR="ngskiphydration";function zb(e){let n=e.mergedAttrs;if(n===null)return!1;for(let t=0;t<n.length;t+=2){let r=n[t];if(typeof r=="number")return!1;if(typeof r=="string"&&r.toLowerCase()===pR)return!0}return!1}function Wb(e){return e.hasAttribute(hR)}function qd(e){return(e.flags&128)===128}function gR(e){if(qd(e))return!0;let n=e.parent;for(;n;){if(qd(e)||zb(n))return!0;n=n.parent}return!1}var Gb=new Map,mR=0;function yR(){return mR++}function _R(e){Gb.set(e[hf],e)}function s0(e){Gb.delete(e[hf])}var uv="__ngContext__";function mo(e,n){Gr(n)?(e[uv]=n[hf],_R(n)):e[uv]=n}function $b(e){return Yb(e[Fl])}function qb(e){return Yb(e[Wr])}function Yb(e){for(;e!==null&&!di(e);)e=e[Wr];return e}var a0;function Zb(e){a0=e}function Cf(){if(a0!==void 0)return a0;if(typeof document<"u")return document;throw new fe(210,!1)}var wf=new be("",{providedIn:"root",factory:()=>CR}),CR="ng",Cm=new be(""),fi=new be("",{providedIn:"platform",factory:()=>"unknown"});var wm=new be("",{providedIn:"root",factory:()=>Cf().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function wR(){let e=new xa;return te(fi)==="browser"&&(e.store=vR(Cf(),te(wf))),e}var xa=(()=>{class e{constructor(){this.store={},this.onSerializeCallbacks={}}static{this.\u0275prov=he({token:e,providedIn:"root",factory:wR})}get(t,r){return this.store[t]!==void 0?this.store[t]:r}set(t,r){this.store[t]=r}remove(t){delete this.store[t]}hasKey(t){return this.store.hasOwnProperty(t)}get isEmpty(){return Object.keys(this.store).length===0}onSerialize(t,r){this.onSerializeCallbacks[t]=r}toJson(){for(let t in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(t))try{this.store[t]=this.onSerializeCallbacks[t]()}catch(r){console.warn("Exception in onSerialize callback: ",r)}return JSON.stringify(this.store).replace(/</g,"\\u003C")}}return e})();function vR(e,n){let t=e.getElementById(n+"-state");if(t?.textContent)try{return JSON.parse(t.textContent)}catch(r){console.warn("Exception while restoring TransferState for app "+n,r)}return{}}var Xb="h",Qb="b",l0=function(e){return e.FirstChild="f",e.NextSibling="n",e}(l0||{}),bR="e",xR="t",vm="c",Kb="x",Yd="r",ER="i",IR="n",Jb="d";var SR="__nghData__",ex=SR,Ag="ngh",DR="nghm",tx=()=>null;function MR(e,n,t=!1){let r=e.getAttribute(Ag);if(r==null)return null;let[i,o]=r.split("|");if(r=t?o:i,!r)return null;let l=o?`|${o}`:"",h=t?i:l,g={};if(r!==""){let v=n.get(xa,null,{optional:!0});v!==null&&(g=v.get(ex,[])[Number(r)])}let m={data:g,firstChild:e.firstChild??null};return t&&(m.firstChild=e,vf(m,0,e.nextSibling)),h?e.setAttribute(Ag,h):e.removeAttribute(Ag),m}function TR(){tx=MR}function bm(e,n,t=!1){return tx(e,n,t)}function AR(e){let n=e._lView;return n[Ae].type===2?null:(jd(n)&&(n=n[an]),n)}function OR(e){return e.textContent?.replace(/\s/gm,"")}function NR(e){let n=Cf(),t=n.createNodeIterator(e,NodeFilter.SHOW_COMMENT,{acceptNode(o){let l=OR(o);return l==="ngetn"||l==="ngtns"?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}}),r,i=[];for(;r=t.nextNode();)i.push(r);for(let o of i)o.textContent==="ngetn"?o.replaceWith(n.createTextNode("")):o.remove()}function vf(e,n,t){e.segmentHeads??={},e.segmentHeads[n]=t}function c0(e,n){return e.segmentHeads?.[n]??null}function RR(e,n){let t=e.data,r=t[bR]?.[n]??null;return r===null&&t[vm]?.[n]&&(r=xm(e,n)),r}function nx(e,n){return e.data[vm]?.[n]??null}function xm(e,n){let t=nx(e,n)??[],r=0;for(let i of t)r+=i[Yd]*(i[Kb]??1);return r}function PR(e){if(typeof e.disconnectedNodes>"u"){let n=e.data[Jb];e.disconnectedNodes=n?new Set(n):null}return e.disconnectedNodes}function Yl(e,n){if(typeof e.disconnectedNodes>"u"){let t=e.data[Jb];e.disconnectedNodes=t?new Set(t):null}return!!PR(e)?.has(n)}var wd=new be(""),rx=!1,ix=new be("",{providedIn:"root",factory:()=>rx});var vd;function ox(){if(vd===void 0&&(vd=null,Ug.trustedTypes))try{vd=Ug.trustedTypes.createPolicy("angular",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch{}return vd}function bf(e){return ox()?.createHTML(e)||e}function kR(e){return ox()?.createScriptURL(e)||e}var Ni=class{constructor(n){this.changingThisBreaksApplicationSecurity=n}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Rv})`}},u0=class extends Ni{getTypeName(){return"HTML"}},d0=class extends Ni{getTypeName(){return"Style"}},f0=class extends Ni{getTypeName(){return"Script"}},h0=class extends Ni{getTypeName(){return"URL"}},p0=class extends Ni{getTypeName(){return"ResourceURL"}};function Bi(e){return e instanceof Ni?e.changingThisBreaksApplicationSecurity:e}function Ea(e,n){let t=FR(e);if(t!=null&&t!==n){if(t==="ResourceURL"&&n==="URL")return!0;throw new Error(`Required a safe ${n}, got a ${t} (see ${Rv})`)}return t===n}function FR(e){return e instanceof Ni&&e.getTypeName()||null}function sx(e){return new u0(e)}function ax(e){return new d0(e)}function lx(e){return new f0(e)}function cx(e){return new h0(e)}function ux(e){return new p0(e)}function LR(e){let n=new m0(e);return BR()?new g0(n):n}var g0=class{constructor(n){this.inertDocumentHelper=n}getInertBodyElement(n){n="<body><remove></remove>"+n;try{let t=new window.DOMParser().parseFromString(bf(n),"text/html").body;return t===null?this.inertDocumentHelper.getInertBodyElement(n):(t.firstChild?.remove(),t)}catch{return null}}},m0=class{constructor(n){this.defaultDoc=n,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(n){let t=this.inertDocument.createElement("template");return t.innerHTML=bf(n),t}};function BR(){try{return!!new window.DOMParser().parseFromString(bf(""),"text/html")}catch{return!1}}var UR=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Em(e){return e=String(e),e.match(UR)?e:"unsafe:"+e}function Ui(e){let n={};for(let t of e.split(","))n[t]=!0;return n}function Zl(...e){let n={};for(let t of e)for(let r in t)t.hasOwnProperty(r)&&(n[r]=!0);return n}var dx=Ui("area,br,col,hr,img,wbr"),fx=Ui("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),hx=Ui("rp,rt"),VR=Zl(hx,fx),jR=Zl(fx,Ui("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),HR=Zl(hx,Ui("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),dv=Zl(dx,jR,HR,VR),px=Ui("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),zR=Ui("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),WR=Ui("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),GR=Zl(px,zR,WR),$R=Ui("script,style,template"),y0=class{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(n){let t=n.firstChild,r=!0,i=[];for(;t;){if(t.nodeType===Node.ELEMENT_NODE?r=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,r&&t.firstChild){i.push(t),t=ZR(t);continue}for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let o=YR(t);if(o){t=o;break}t=i.pop()}}return this.buf.join("")}startElement(n){let t=fv(n).toLowerCase();if(!dv.hasOwnProperty(t))return this.sanitizedSomething=!0,!$R.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);let r=n.attributes;for(let i=0;i<r.length;i++){let o=r.item(i),l=o.name,h=l.toLowerCase();if(!GR.hasOwnProperty(h)){this.sanitizedSomething=!0;continue}let g=o.value;px[h]&&(g=Em(g)),this.buf.push(" ",l,'="',hv(g),'"')}return this.buf.push(">"),!0}endElement(n){let t=fv(n).toLowerCase();dv.hasOwnProperty(t)&&!dx.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(n){this.buf.push(hv(n))}};function qR(e,n){return(e.compareDocumentPosition(n)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function YR(e){let n=e.nextSibling;if(n&&e!==n.previousSibling)throw gx(n);return n}function ZR(e){let n=e.firstChild;if(n&&qR(e,n))throw gx(n);return n}function fv(e){let n=e.nodeName;return typeof n=="string"?n:"FORM"}function gx(e){return new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`)}var XR=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,QR=/([^\#-~ |!])/g;function hv(e){return e.replace(/&/g,"&amp;").replace(XR,function(n){let t=n.charCodeAt(0),r=n.charCodeAt(1);return"&#"+((t-55296)*1024+(r-56320)+65536)+";"}).replace(QR,function(n){return"&#"+n.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var bd;function mx(e,n){let t=null;try{bd=bd||LR(e);let r=n?String(n):"";t=bd.getInertBodyElement(r);let i=5,o=r;do{if(i===0)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=t.innerHTML,t=bd.getInertBodyElement(r)}while(r!==o);let h=new y0().sanitizeChildren(pv(t)||t);return bf(h)}finally{if(t){let r=pv(t)||t;for(;r.firstChild;)r.firstChild.remove()}}}function pv(e){return"content"in e&&KR(e)?e.content:null}function KR(e){return e.nodeType===Node.ELEMENT_NODE&&e.nodeName==="TEMPLATE"}var wo=function(e){return e[e.NONE=0]="NONE",e[e.HTML=1]="HTML",e[e.STYLE=2]="STYLE",e[e.SCRIPT=3]="SCRIPT",e[e.URL=4]="URL",e[e.RESOURCE_URL=5]="RESOURCE_URL",e}(wo||{});function yx(e){return kR(e[0])}var JR=/^>|^->|<!--|-->|--!>|<!-$/g,eP=/(<|>)/g,tP="\u200B$1\u200B";function nP(e){return e.replace(JR,n=>n.replace(eP,tP))}function rP(e){return e.ownerDocument.body}function _x(e){return e instanceof Function?e():e}function xd(e){return(e??te(ai)).get(fi)==="browser"}var li=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}(li||{}),iP;function Im(e,n){return iP(e,n)}function aa(e,n,t,r,i){if(r!=null){let o,l=!1;di(r)?o=r:Gr(r)&&(l=!0,r=r[cr]);let h=qr(r);e===0&&t!==null?i==null?xx(n,t,h):Zd(n,t,h,i||null,!0):e===1&&t!==null?Zd(n,t,h,i||null,!0):e===2?Mm(n,h,l):e===3&&n.destroyNode(h),o!=null&&CP(n,e,o,t,i)}}function Cx(e,n){return e.createText(n)}function oP(e,n,t){e.setValue(n,t)}function wx(e,n){return e.createComment(nP(n))}function Sm(e,n,t){return e.createElement(n,t)}function sP(e,n){vx(e,n),n[cr]=null,n[Zr]=null}function aP(e,n,t,r,i,o){r[cr]=i,r[Zr]=n,If(e,r,t,1,i,o)}function vx(e,n){n[Mi].changeDetectionScheduler?.notify(9),If(e,n,n[Ft],2,null,null)}function lP(e){let n=e[Fl];if(!n)return Og(e[Ae],e);for(;n;){let t=null;if(Gr(n))t=n[Fl];else{let r=n[bn];r&&(t=r)}if(!t){for(;n&&!n[Wr]&&n!==e;)Gr(n)&&Og(n[Ae],n),n=n[xn];n===null&&(n=e),Gr(n)&&Og(n[Ae],n),t=n&&n[Wr]}n=t}}function cP(e,n,t,r){let i=bn+r,o=t.length;r>0&&(t[i-1][Wr]=n),r<o-bn?(n[Wr]=t[i],zv(t,bn+r,n)):(t.push(n),n[Wr]=null),n[xn]=t;let l=n[os];l!==null&&t!==l&&bx(l,n);let h=n[Ti];h!==null&&h.insertView(e),Zg(n),n[Te]|=128}function bx(e,n){let t=e[pa],r=n[xn];if(Gr(r))e[Te]|=Vd.HasTransplantedViews;else{let i=r[xn][ur];n[ur]!==i&&(e[Te]|=Vd.HasTransplantedViews)}t===null?e[pa]=[n]:t.push(n)}function Dm(e,n){let t=e[pa],r=t.indexOf(n);t.splice(r,1)}function Bl(e,n){if(e.length<=bn)return;let t=bn+n,r=e[t];if(r){let i=r[os];i!==null&&i!==e&&Dm(i,r),n>0&&(e[t-1][Wr]=r[Wr]);let o=Fd(e,bn+n);sP(r[Ae],r);let l=o[Ti];l!==null&&l.detachView(o[Ae]),r[xn]=null,r[Wr]=null,r[Te]&=-129}return r}function xf(e,n){if(!(n[Te]&256)){let t=n[Ft];t.destroyNode&&If(e,n,t,3,null,null),lP(n)}}function Og(e,n){if(n[Te]&256)return;let t=Ye(null);try{n[Te]&=-129,n[Te]|=256,n[Er]&&rg(n[Er]),dP(e,n),uP(e,n),n[Ae].type===1&&n[Ft].destroy();let r=n[os];if(r!==null&&di(n[xn])){r!==n[xn]&&Dm(r,n);let i=n[Ti];i!==null&&i.detachView(e)}s0(n)}finally{Ye(t)}}function uP(e,n){let t=e.cleanup,r=n[Bd];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let l=t[o+3];l>=0?r[l]():r[-l].unsubscribe(),o+=2}else{let l=r[t[o+1]];t[o].call(l)}r!==null&&(n[Bd]=null);let i=n[fo];if(i!==null){n[fo]=null;for(let o=0;o<i.length;o++){let l=i[o];l()}}}function dP(e,n){let t;if(e!=null&&(t=e.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=n[t[r]];if(!(i instanceof ls)){let o=t[r+1];if(Array.isArray(o))for(let l=0;l<o.length;l+=2){let h=i[o[l]],g=o[l+1];ii(4,h,g);try{g.call(h)}finally{ii(5,h,g)}}else{ii(4,i,o);try{o.call(i)}finally{ii(5,i,o)}}}}}function fP(e,n,t){return hP(e,n.parent,t)}function hP(e,n,t){let r=n;for(;r!==null&&r.type&168;)n=r,r=n.parent;if(r===null)return t[cr];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=e.data[r.directiveStart+i];if(o===si.None||o===si.Emulated)return null}return dr(r,t)}}function Zd(e,n,t,r,i){e.insertBefore(n,t,r,i)}function xx(e,n,t){e.appendChild(n,t)}function gv(e,n,t,r,i){r!==null?Zd(e,n,t,r,i):xx(e,n,t)}function Ex(e,n){return e.parentNode(n)}function pP(e,n){return e.nextSibling(n)}function gP(e,n,t){return yP(e,n,t)}function mP(e,n,t){return e.type&40?dr(e,t):null}var yP=mP,mv;function Ef(e,n,t,r){let i=fP(e,r,n),o=n[Ft],l=r.parent||n[Zr],h=gP(l,r,n);if(i!=null)if(Array.isArray(t))for(let g=0;g<t.length;g++)gv(o,i,t[g],h,!1);else gv(o,i,t,h,!1);mv!==void 0&&mv(o,r,n,t,i)}function Al(e,n){if(n!==null){let t=n.type;if(t&3)return dr(n,e);if(t&4)return _0(-1,e[n.index]);if(t&8){let r=n.child;if(r!==null)return Al(e,r);{let i=e[n.index];return di(i)?_0(-1,i):qr(i)}}else{if(t&128)return Al(e,n.next);if(t&32)return Im(n,e)()||qr(e[n.index]);{let r=Ix(e,n);if(r!==null){if(Array.isArray(r))return r[0];let i=ss(e[ur]);return Al(i,r)}else return Al(e,n.next)}}}return null}function Ix(e,n){if(n!==null){let r=e[ur][Zr],i=n.projection;return r.projection[i]}return null}function _0(e,n){let t=bn+e+1;if(t<n.length){let r=n[t],i=r[Ae].firstChild;if(i!==null)return Al(r,i)}return n[Ai]}function Mm(e,n,t){e.removeChild(null,n,t)}function Sx(e){e.textContent=""}function Tm(e,n,t,r,i,o,l){for(;t!=null;){if(t.type===128){t=t.next;continue}let h=r[t.index],g=t.type;if(l&&n===0&&(h&&mo(qr(h),r),t.flags|=2),(t.flags&32)!==32)if(g&8)Tm(e,n,t.child,r,i,o,!1),aa(n,e,i,h,o);else if(g&32){let m=Im(t,r),v;for(;v=m();)aa(n,e,i,v,o);aa(n,e,i,h,o)}else g&16?_P(e,n,r,t,i,o):aa(n,e,i,h,o);t=l?t.projectionNext:t.next}}function If(e,n,t,r,i,o){Tm(t,r,e.firstChild,n,i,o,!1)}function _P(e,n,t,r,i,o){let l=t[ur],g=l[Zr].projection[r.projection];if(Array.isArray(g))for(let m=0;m<g.length;m++){let v=g[m];aa(n,e,i,v,o)}else{let m=g,v=l[xn];qd(r)&&(m.flags|=128),Tm(e,n,m,v,i,o,!0)}}function CP(e,n,t,r,i){let o=t[Ai],l=qr(t);o!==l&&aa(n,e,r,o,i);for(let h=bn;h<t.length;h++){let g=t[h];If(g[Ae],g,e,n,r,o)}}function wP(e,n,t,r,i){if(n)i?e.addClass(t,r):e.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:li.DashCase;i==null?e.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=li.Important),e.setStyle(t,r,i,o))}}function vP(e,n,t){e.setAttribute(n,"style",t)}function Dx(e,n,t){t===""?e.removeAttribute(n,"class"):e.setAttribute(n,"class",t)}function Mx(e,n,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&Wg(e,n,r),i!==null&&Dx(e,n,i),o!==null&&vP(e,n,o)}var hr={};function V(e=1){Tx(ln(),Qe(),Fi()+e,!1)}function Tx(e,n,t,r){if(!r)if((n[Te]&3)===3){let o=e.preOrderCheckHooks;o!==null&&Td(n,o,t)}else{let o=e.preOrderHooks;o!==null&&Ad(n,o,0,t)}as(t)}function W(e,n=ze.Default){let t=Qe();if(t===null)return We(e,n);let r=Hn();return kb(r,t,Un(e),n)}function Ax(e,n,t,r,i,o){let l=Ye(null);try{let h=null;i&ho.SignalBased&&(h=n[r][Ii]),h!==null&&h.transformFn!==void 0&&(o=h.transformFn(o)),i&ho.HasDecoratorInputTransform&&(o=e.inputTransforms[r].call(n,o)),e.setInput!==null?e.setInput(n,h,o,t,r):sb(n,h,r,o)}finally{Ye(l)}}function bP(e,n){let t=e.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)as(~i);else{let o=i,l=t[++r],h=t[++r];FN(l,o);let g=n[o];h(2,g)}}}finally{as(-1)}}function Sf(e,n,t,r,i,o,l,h,g,m,v){let b=n.blueprint.slice();return b[cr]=i,b[Te]=r|4|128|8|64,(m!==null||e&&e[Te]&2048)&&(b[Te]|=2048),db(b),b[xn]=b[wa]=e,b[Nn]=t,b[Mi]=l||e&&e[Mi],b[Ft]=h||e&&e[Ft],b[ha]=g||e&&e[ha]||null,b[Zr]=o,b[hf]=yR(),b[$r]=v,b[ib]=m,b[ur]=n.type==2?e[ur]:b,b}function Xl(e,n,t,r,i){let o=e.data[n];if(o===null)o=xP(e,n,t,r,i),kN()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let l=ON();o.injectorIndex=l===null?-1:l.injectorIndex}return hs(o,!0),o}function xP(e,n,t,r,i){let o=mb(),l=um(),h=l?o:o&&o.parent,g=e.data[n]=AP(e,h,t,n,r,i);return e.firstChild===null&&(e.firstChild=g),o!==null&&(l?o.child==null&&g.parent!==null&&(o.child=g):o.next===null&&(o.next=g,g.prev=o)),g}function Ox(e,n,t,r){if(t===0)return-1;let i=n.length;for(let o=0;o<t;o++)n.push(r),e.blueprint.push(r),e.data.push(null);return i}function Nx(e,n,t,r,i){let o=Fi(),l=r&2;try{as(-1),l&&n.length>an&&Tx(e,n,an,!1),ii(l?2:0,i),t(r,i)}finally{as(o),ii(l?3:1,i)}}function Am(e,n,t){if(am(n)){let r=Ye(null);try{let i=n.directiveStart,o=n.directiveEnd;for(let l=i;l<o;l++){let h=e.data[l];if(h.contentQueries){let g=t[l];h.contentQueries(1,g,l)}}}finally{Ye(r)}}}function Om(e,n,t){gb()&&(FP(e,n,t,dr(t,n)),(t.flags&64)===64&&Lx(e,n,t))}function Nm(e,n,t=dr){let r=n.localNames;if(r!==null){let i=n.index+1;for(let o=0;o<r.length;o+=2){let l=r[o+1],h=l===-1?t(n,e):e[l];e[i++]=h}}}function Rx(e){let n=e.tView;return n===null||n.incompleteFirstPass?e.tView=Rm(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):n}function Rm(e,n,t,r,i,o,l,h,g,m,v){let b=an+r,I=b+i,T=EP(b,I),P=typeof m=="function"?m():m;return T[Ae]={type:e,blueprint:T,template:t,queries:null,viewQuery:h,declTNode:n,data:T.slice().fill(null,b),bindingStartIndex:b,expandoStartIndex:I,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof l=="function"?l():l,firstChild:null,schemas:g,consts:P,incompleteFirstPass:!1,ssrId:v}}function EP(e,n){let t=[];for(let r=0;r<n;r++)t.push(r<e?null:hr);return t}function IP(e,n,t,r){let o=r.get(ix,rx)||t===si.ShadowDom,l=e.selectRootElement(n,o);return SP(l),l}function SP(e){Px(e)}var Px=()=>null;function DP(e){Wb(e)?Sx(e):NR(e)}function MP(){Px=DP}function TP(e,n,t,r){let i=Vx(n);i.push(t),e.firstCreatePass&&jx(e).push(r,i.length-1)}function AP(e,n,t,r,i,o){let l=n?n.injectorIndex:-1,h=0;return ql()&&(h|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:l,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:h,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:n,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function yv(e,n,t,r,i){for(let o in n){if(!n.hasOwnProperty(o))continue;let l=n[o];if(l===void 0)continue;r??={};let h,g=ho.None;Array.isArray(l)?(h=l[0],g=l[1]):h=l;let m=o;if(i!==null){if(!i.hasOwnProperty(o))continue;m=i[o]}e===0?_v(r,t,m,h,g):_v(r,t,m,h)}return r}function _v(e,n,t,r,i){let o;e.hasOwnProperty(t)?(o=e[t]).push(n,r):o=e[t]=[n,r],i!==void 0&&o.push(i)}function OP(e,n,t){let r=n.directiveStart,i=n.directiveEnd,o=e.data,l=n.attrs,h=[],g=null,m=null;for(let v=r;v<i;v++){let b=o[v],I=t?t.get(b):null,T=I?I.inputs:null,P=I?I.outputs:null;g=yv(0,b.inputs,v,g,T),m=yv(1,b.outputs,v,m,P);let z=g!==null&&l!==null&&!im(n)?qP(g,v,l):null;h.push(z)}g!==null&&(g.hasOwnProperty("class")&&(n.flags|=8),g.hasOwnProperty("style")&&(n.flags|=16)),n.initialInputs=h,n.inputs=g,n.outputs=m}function NP(e){return e==="class"?"className":e==="for"?"htmlFor":e==="formaction"?"formAction":e==="innerHtml"?"innerHTML":e==="readonly"?"readOnly":e==="tabindex"?"tabIndex":e}function kx(e,n,t,r,i,o,l,h){let g=dr(n,t),m=n.inputs,v;!h&&m!=null&&(v=m[r])?(km(e,t,v,r,i),$l(n)&&RP(t,n.index)):n.type&3?(r=NP(r),i=l!=null?l(i,n.value||"",r):i,o.setProperty(g,r,i)):n.type&12}function RP(e,n){let t=_o(n,e);t[Te]&16||(t[Te]|=64)}function Pm(e,n,t,r){if(gb()){let i=r===null?null:{"":-1},o=BP(e,t),l,h;o===null?l=h=null:[l,h]=o,l!==null&&Fx(e,n,t,l,i,h),i&&UP(t,r,i)}t.mergedAttrs=Pl(t.mergedAttrs,t.attrs)}function Fx(e,n,t,r,i,o){for(let m=0;m<r.length;m++)Jg(Wd(t,n),e,r[m].type);jP(t,e.data.length,r.length);for(let m=0;m<r.length;m++){let v=r[m];v.providersResolver&&v.providersResolver(v)}let l=!1,h=!1,g=Ox(e,n,r.length,null);for(let m=0;m<r.length;m++){let v=r[m];t.mergedAttrs=Pl(t.mergedAttrs,v.hostAttrs),HP(e,t,n,g,v),VP(g,v,i),v.contentQueries!==null&&(t.flags|=4),(v.hostBindings!==null||v.hostAttrs!==null||v.hostVars!==0)&&(t.flags|=64);let b=v.type.prototype;!l&&(b.ngOnChanges||b.ngOnInit||b.ngDoCheck)&&((e.preOrderHooks??=[]).push(t.index),l=!0),!h&&(b.ngOnChanges||b.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(t.index),h=!0),g++}OP(e,t,o)}function PP(e,n,t,r,i){let o=i.hostBindings;if(o){let l=e.hostBindingOpCodes;l===null&&(l=e.hostBindingOpCodes=[]);let h=~n.index;kP(l)!=h&&l.push(h),l.push(t,r,o)}}function kP(e){let n=e.length;for(;n>0;){let t=e[--n];if(typeof t=="number"&&t<0)return t}return 0}function FP(e,n,t,r){let i=t.directiveStart,o=t.directiveEnd;$l(t)&&zP(n,t,e.data[i+t.componentOffset]),e.firstCreatePass||Wd(t,n),mo(r,n);let l=t.initialInputs;for(let h=i;h<o;h++){let g=e.data[h],m=cs(n,e,h,t);if(mo(m,n),l!==null&&$P(n,h-i,m,g,t,l),po(g)){let v=_o(t.index,n);v[Nn]=cs(n,e,h,t)}}}function Lx(e,n,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,l=LN();try{as(o);for(let h=r;h<i;h++){let g=e.data[h],m=n[h];Xg(h),(g.hostBindings!==null||g.hostVars!==0||g.hostAttrs!==null)&&LP(g,m)}}finally{as(-1),Xg(l)}}function LP(e,n){e.hostBindings!==null&&e.hostBindings(1,n)}function BP(e,n){let t=e.directiveRegistry,r=null,i=null;if(t)for(let o=0;o<t.length;o++){let l=t[o];if(qO(n,l.selectors,!1))if(r||(r=[]),po(l))if(l.findHostDirectiveDefs!==null){let h=[];i=i||new Map,l.findHostDirectiveDefs(l,h,i),r.unshift(...h,l);let g=h.length;C0(e,n,g)}else r.unshift(l),C0(e,n,0);else i=i||new Map,l.findHostDirectiveDefs?.(l,r,i),r.push(l)}return r===null?null:[r,i]}function C0(e,n,t){n.componentOffset=t,(e.components??=[]).push(n.index)}function UP(e,n,t){if(n){let r=e.localNames=[];for(let i=0;i<n.length;i+=2){let o=t[n[i+1]];if(o==null)throw new fe(-301,!1);r.push(n[i],o)}}}function VP(e,n,t){if(t){if(n.exportAs)for(let r=0;r<n.exportAs.length;r++)t[n.exportAs[r]]=e;po(n)&&(t[""]=e)}}function jP(e,n,t){e.flags|=1,e.directiveStart=n,e.directiveEnd=n+t,e.providerIndexes=n}function HP(e,n,t,r,i){e.data[r]=i;let o=i.factory||(i.factory=ua(i.type,!0)),l=new ls(o,po(i),W);e.blueprint[r]=l,t[r]=l,PP(e,n,r,Ox(e,t,i.hostVars,hr),i)}function zP(e,n,t){let r=dr(n,e),i=Rx(t),o=e[Mi].rendererFactory,l=16;t.signals?l=4096:t.onPush&&(l=64);let h=Df(e,Sf(e,i,null,l,r,n,null,o.createRenderer(r,t),null,null,null));e[n.index]=h}function WP(e,n,t,r,i,o){let l=dr(e,n);GP(n[Ft],l,o,e.value,t,r,i)}function GP(e,n,t,r,i,o,l){if(o==null)e.removeAttribute(n,i,t);else{let h=l==null?ts(o):l(o,r||"",i);e.setAttribute(n,i,h,t)}}function $P(e,n,t,r,i,o){let l=o[n];if(l!==null)for(let h=0;h<l.length;){let g=l[h++],m=l[h++],v=l[h++],b=l[h++];Ax(r,t,g,m,v,b)}}function qP(e,n,t){let r=null,i=0;for(;i<t.length;){let o=t[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(e.hasOwnProperty(o)){r===null&&(r=[]);let l=e[o];for(let h=0;h<l.length;h+=3)if(l[h]===n){r.push(o,l[h+1],l[h+2],t[i+1]);break}}i+=2}return r}function Bx(e,n,t,r){return[e,!0,0,n,null,r,null,t,null,null]}function Ux(e,n){let t=e.contentQueries;if(t!==null){let r=Ye(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],l=t[i+1];if(l!==-1){let h=e.data[l];fm(o),h.contentQueries(2,n[l],l)}}}finally{Ye(r)}}}function Df(e,n){return e[Fl]?e[Jw][Wr]=n:e[Fl]=n,e[Jw]=n,n}function w0(e,n,t){fm(0);let r=Ye(null);try{n(e,t)}finally{Ye(r)}}function Vx(e){return e[Bd]??=[]}function jx(e){return e.cleanup??=[]}function Hx(e,n){let t=e[ha],r=t?t.get(Oi,null):null;r&&r.handleError(n)}function km(e,n,t,r,i){for(let o=0;o<t.length;){let l=t[o++],h=t[o++],g=t[o++],m=n[l],v=e.data[l];Ax(v,m,r,h,g,i)}}function zx(e,n,t){let r=ub(n,e);oP(e[Ft],r,t)}function YP(e,n){let t=_o(n,e),r=t[Ae];ZP(r,t);let i=t[cr];i!==null&&t[$r]===null&&(t[$r]=bm(i,t[ha])),Fm(r,t,t[Nn])}function ZP(e,n){for(let t=n.length;t<e.blueprint.length;t++)n.push(e.blueprint[t])}function Fm(e,n,t){hm(n);try{let r=e.viewQuery;r!==null&&w0(1,r,t);let i=e.template;i!==null&&Nx(e,n,i,1,t),e.firstCreatePass&&(e.firstCreatePass=!1),n[Ti]?.finishViewCreation(e),e.staticContentQueries&&Ux(e,n),e.staticViewQueries&&w0(2,e.viewQuery,t);let o=e.components;o!==null&&XP(n,o)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{n[Te]&=-5,pm()}}function XP(e,n){for(let t=0;t<n.length;t++)YP(e,n[t])}function Mf(e,n,t,r){let i=Ye(null);try{let o=n.tView,h=e[Te]&4096?4096:16,g=Sf(e,o,t,h,null,n,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),m=e[n.index];g[os]=m;let v=e[Ti];return v!==null&&(g[Ti]=v.createEmbeddedView(o)),Fm(o,g,t),g}finally{Ye(i)}}function Wx(e,n){let t=bn+n;if(t<e.length)return e[t]}function Ul(e,n){return!n||n.firstChild===null||qd(e)}function Tf(e,n,t,r=!0){let i=n[Ae];if(cP(i,n,e,t),r){let l=_0(t,e),h=n[Ft],g=Ex(h,e[Ai]);g!==null&&aP(i,e[Zr],h,n,g,l)}let o=n[$r];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Gx(e,n){let t=Bl(e,n);return t!==void 0&&xf(t[Ae],t),t}function Xd(e,n,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=n[t.index];o!==null&&r.push(qr(o)),di(o)&&QP(o,r);let l=t.type;if(l&8)Xd(e,n,t.child,r);else if(l&32){let h=Im(t,n),g;for(;g=h();)r.push(g)}else if(l&16){let h=Ix(n,t);if(Array.isArray(h))r.push(...h);else{let g=ss(n[ur]);Xd(g[Ae],g,h,r,!0)}}t=i?t.projectionNext:t.next}return r}function QP(e,n){for(let t=bn;t<e.length;t++){let r=e[t],i=r[Ae].firstChild;i!==null&&Xd(r[Ae],r,i,n)}e[Ai]!==e[cr]&&n.push(e[Ai])}var $x=[];function KP(e){return e[Er]??JP(e)}function JP(e){let n=$x.pop()??Object.create(t3);return n.lView=e,n}function e3(e){e.lView[Er]!==e&&(e.lView=null,$x.push(e))}var t3=Ue(re({},Sl),{consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{mf(e.lView)},consumerOnSignalRead(){this.lView[Er]=this}});function n3(e){let n=e[Er]??Object.create(r3);return n.lView=e,n}var r3=Ue(re({},Sl),{consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{let n=ss(e.lView);for(;n&&!qx(n[Ae]);)n=ss(n);n&&fb(n)},consumerOnSignalRead(){this.lView[Er]=this}});function qx(e){return e.type!==2}var i3=100;function Yx(e,n=!0,t=0){let r=e[Mi],i=r.rendererFactory,o=!1;o||i.begin?.();try{o3(e,t)}catch(l){throw n&&Hx(e,l),l}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function o3(e,n){let t=_b();try{tv(!0),v0(e,n);let r=0;for(;gf(e);){if(r===i3)throw new fe(103,!1);r++,v0(e,1)}}finally{tv(t)}}function s3(e,n,t,r){let i=n[Te];if((i&256)===256)return;let o=!1,l=!1;!o&&n[Mi].inlineEffectRunner?.flush(),hm(n);let h=!0,g=null,m=null;o||(qx(e)?(m=KP(n),g=Hu(m)):ow()===null?(h=!1,m=n3(n),g=Hu(m)):n[Er]&&(rg(n[Er]),n[Er]=null));try{db(n),PN(e.bindingStartIndex),t!==null&&Nx(e,n,t,2,r);let v=(i&3)===3;if(!o)if(v){let T=e.preOrderCheckHooks;T!==null&&Td(n,T,null)}else{let T=e.preOrderHooks;T!==null&&Ad(n,T,0,null),Sg(n,0)}if(l||a3(n),Zx(n,0),e.contentQueries!==null&&Ux(e,n),!o)if(v){let T=e.contentCheckHooks;T!==null&&Td(n,T)}else{let T=e.contentHooks;T!==null&&Ad(n,T,1),Sg(n,1)}bP(e,n);let b=e.components;b!==null&&Qx(n,b,0);let I=e.viewQuery;if(I!==null&&w0(2,I,r),!o)if(v){let T=e.viewCheckHooks;T!==null&&Td(n,T)}else{let T=e.viewHooks;T!==null&&Ad(n,T,2),Sg(n,2)}if(e.firstUpdatePass===!0&&(e.firstUpdatePass=!1),n[Ig]){for(let T of n[Ig])T();n[Ig]=null}o||(n[Te]&=-73)}catch(v){throw o||mf(n),v}finally{m!==null&&(tg(m,g),h&&e3(m)),pm()}}function Zx(e,n){for(let t=$b(e);t!==null;t=qb(t))for(let r=bn;r<t.length;r++){let i=t[r];Xx(i,n)}}function a3(e){for(let n=$b(e);n!==null;n=qb(n)){if(!(n[Te]&Vd.HasTransplantedViews))continue;let t=n[pa];for(let r=0;r<t.length;r++){let i=t[r];fb(i)}}}function l3(e,n,t){let r=_o(n,e);Xx(r,t)}function Xx(e,n){cm(e)&&v0(e,n)}function v0(e,n){let r=e[Ae],i=e[Te],o=e[Er],l=!!(n===0&&i&16);if(l||=!!(i&64&&n===0),l||=!!(i&1024),l||=!!(o?.dirty&&ng(o)),l||=!1,o&&(o.dirty=!1),e[Te]&=-9217,l)s3(r,e,r.template,e[Nn]);else if(i&8192){Zx(e,1);let h=r.components;h!==null&&Qx(e,h,1)}}function Qx(e,n,t){for(let r=0;r<n.length;r++)l3(e,n[r],t)}function Lm(e,n){let t=_b()?64:1088;for(e[Mi].changeDetectionScheduler?.notify(n);e;){e[Te]|=t;let r=ss(e);if(jd(e)&&!r)return e;e=r}return null}var us=class{get rootNodes(){let n=this._lView,t=n[Ae];return Xd(t,n,t.firstChild,[])}constructor(n,t,r=!0){this._lView=n,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Nn]}set context(n){this._lView[Nn]=n}get destroyed(){return(this._lView[Te]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let n=this._lView[xn];if(di(n)){let t=n[Ud],r=t?t.indexOf(this):-1;r>-1&&(Bl(n,r),Fd(t,r))}this._attachedToViewContainer=!1}xf(this._lView[Ae],this._lView)}onDestroy(n){hb(this._lView,n)}markForCheck(){Lm(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Te]&=-129}reattach(){Zg(this._lView),this._lView[Te]|=128}detectChanges(){this._lView[Te]|=1024,Yx(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new fe(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let n=jd(this._lView),t=this._lView[os];t!==null&&!n&&Dm(t,this._lView),vx(this._lView[Ae],this._lView)}attachToAppRef(n){if(this._attachedToViewContainer)throw new fe(902,!1);this._appRef=n;let t=jd(this._lView),r=this._lView[os];r!==null&&!t&&bx(r,this._lView),Zg(this._lView)}},ds=(()=>{class e{static{this.__NG_ELEMENT_ID__=d3}}return e})(),c3=ds,u3=class extends c3{constructor(n,t,r){super(),this._declarationLView=n,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,t){return this.createEmbeddedViewImpl(n,t)}createEmbeddedViewImpl(n,t,r){let i=Mf(this._declarationLView,this._declarationTContainer,n,{embeddedViewInjector:t,dehydratedView:r});return new us(i)}};function d3(){return Af(Hn(),Qe())}function Af(e,n){return e.type&4?new u3(n,e,ba(e,n)):null}var f3=new RegExp(`^(\\d+)*(${Qb}|${Xb})*(.*)`);function h3(e){let n=e.match(f3),[t,r,i,o]=n,l=r?parseInt(r,10):i,h=[];for(let[g,m,v]of o.matchAll(/(f|n)(\d*)/g)){let b=parseInt(v,10)||1;h.push(m,b)}return[l,...h]}function p3(e){return!e.prev&&e.parent?.type===8}function Ng(e){return e.index-an}function g3(e,n){let t=e.i18nNodes;if(t)return t.get(n)}function Of(e,n,t,r){let i=Ng(r),o=g3(e,i);if(o===void 0){let l=e.data[IR];if(l?.[i])o=y3(l[i],t);else if(n.firstChild===r)o=e.firstChild;else{let h=r.prev===null,g=r.prev??r.parent;if(p3(r)){let m=Ng(r.parent);o=c0(e,m)}else{let m=dr(g,t);if(h)o=m.firstChild;else{let v=Ng(g),b=c0(e,v);if(g.type===2&&b){let T=xm(e,v)+1;o=Nf(T,b)}else o=m.nextSibling}}}}return o}function Nf(e,n){let t=n;for(let r=0;r<e;r++)t=t.nextSibling;return t}function m3(e,n){let t=e;for(let r=0;r<n.length;r+=2){let i=n[r],o=n[r+1];for(let l=0;l<o;l++)switch(i){case l0.FirstChild:t=t.firstChild;break;case l0.NextSibling:t=t.nextSibling;break}}return t}function y3(e,n){let[t,...r]=h3(e),i;if(t===Xb)i=n[ur][cr];else if(t===Qb)i=rP(n[ur][cr]);else{let o=Number(t);i=qr(n[o+an])}return m3(i,r)}var _3=!1;function C3(e){_3=e}function w3(e){let n=e[$r];if(n){let{i18nNodes:t,dehydratedIcuData:r}=n;if(t&&r){let i=e[Ft];for(let o of r.values())v3(i,t,o)}n.i18nNodes=void 0,n.dehydratedIcuData=void 0}}function v3(e,n,t){for(let r of t.node.cases[t.case]){let i=n.get(r.index-an);i&&Mm(e,i,!1)}}function Kx(e){let n=e[Ll]??[],r=e[xn][Ft];for(let i of n)b3(i,r);e[Ll]=Vn}function b3(e,n){let t=0,r=e.firstChild;if(r){let i=e.data[Yd];for(;t<i;){let o=r.nextSibling;Mm(n,r,!1),r=o,t++}}}function Jx(e){Kx(e);let n=e[cr];Gr(n)&&Qd(n);for(let t=bn;t<e.length;t++)Qd(e[t])}function Qd(e){w3(e);let n=e[Ae];for(let t=an;t<n.bindingStartIndex;t++)if(di(e[t])){let r=e[t];Jx(r)}else Gr(e[t])&&Qd(e[t])}function x3(e){let n=e._views;for(let t of n){let r=AR(t);r!==null&&r[cr]!==null&&(Gr(r)?Qd(r):Jx(r))}}function E3(e,n){let t=[];for(let r of n)for(let i=0;i<(r[Kb]??1);i++){let o={data:r,firstChild:null};r[Yd]>0&&(o.firstChild=e,e=Nf(r[Yd],e)),t.push(o)}return[e,t]}var eE=()=>null;function I3(e,n){let t=e[Ll];return!n||t===null||t.length===0?null:t[0].data[ER]===n?t.shift():(Kx(e),null)}function S3(){eE=I3}function Vl(e,n){return eE(e,n)}var ga=class{},Bm=new be("",{providedIn:"root",factory:()=>!1});var tE=new be(""),nE=new be(""),b0=class{},Kd=class{};function D3(e){let n=Error(`No component factory found for ${jn(e)}.`);return n[M3]=e,n}var M3="ngComponent";var x0=class{resolveComponentFactory(n){throw D3(n)}},ma=class{static{this.NULL=new x0}},ya=class{},Xr=(()=>{class e{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>T3()}}return e})();function T3(){let e=Qe(),n=Hn(),t=_o(n.index,e);return(Gr(t)?t:e)[Ft]}var A3=(()=>{class e{static{this.\u0275prov=he({token:e,providedIn:"root",factory:()=>null})}}return e})();function Jd(e,n,t){let r=t?e.styles:null,i=t?e.classes:null,o=0;if(n!==null)for(let l=0;l<n.length;l++){let h=n[l];if(typeof h=="number")o=h;else if(o==1)i=Vg(i,h);else if(o==2){let g=h,m=n[++l];r=Vg(r,g+": "+m+";")}}t?e.styles=r:e.stylesWithoutHost=r,t?e.classes=i:e.classesWithoutHost=i}var ef=class extends ma{constructor(n){super(),this.ngModule=n}resolveComponentFactory(n){let t=is(n);return new jl(t,this.ngModule)}};function Cv(e,n){let t=[];for(let r in e){if(!e.hasOwnProperty(r))continue;let i=e[r];if(i===void 0)continue;let o=Array.isArray(i),l=o?i[0]:i,h=o?i[1]:ho.None;n?t.push({propName:l,templateName:r,isSignal:(h&ho.SignalBased)!==0}):t.push({propName:l,templateName:r})}return t}function O3(e){let n=e.toLowerCase();return n==="svg"?_N:n==="math"?CN:null}var jl=class extends Kd{get inputs(){let n=this.componentDef,t=n.inputTransforms,r=Cv(n.inputs,!0);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return Cv(this.componentDef.outputs,!1)}constructor(n,t){super(),this.componentDef=n,this.ngModule=t,this.componentType=n.type,this.selector=QO(n.selectors),this.ngContentSelectors=n.ngContentSelectors?n.ngContentSelectors:[],this.isBoundToModule=!!t}create(n,t,r,i){let o=Ye(null);try{i=i||this.ngModule;let l=i instanceof Ir?i:i?.injector;l&&this.componentDef.getStandaloneInjector!==null&&(l=this.componentDef.getStandaloneInjector(l)||l);let h=l?new Qg(n,l):n,g=h.get(ya,null);if(g===null)throw new fe(407,!1);let m=h.get(A3,null),v=h.get(ga,null),b={rendererFactory:g,sanitizer:m,inlineEffectRunner:null,changeDetectionScheduler:v},I=g.createRenderer(null,this.componentDef),T=this.componentDef.selectors[0][0]||"div",P=r?IP(I,r,this.componentDef.encapsulation,h):Sm(I,T,O3(T)),z=512;this.componentDef.signals?z|=4096:this.componentDef.onPush||(z|=16);let Z=null;P!==null&&(Z=bm(P,h,!0));let q=Rm(0,null,null,1,0,null,null,null,null,null,null),ce=Sf(null,q,null,z,null,null,b,I,h,null,Z);hm(ce);let Ke,ye,G=null;try{let ge=this.componentDef,Y,or=null;ge.findHostDirectiveDefs?(Y=[],or=new Map,ge.findHostDirectiveDefs(ge,Y,or),Y.push(ge)):Y=[ge];let Tn=N3(ce,P);G=R3(Tn,P,ge,Y,ce,b,I),ye=lm(q,an),P&&F3(I,ge,P,r),t!==void 0&&L3(ye,this.ngContentSelectors,t),Ke=k3(G,ge,Y,or,ce,[B3]),Fm(q,ce,null)}catch(ge){throw G!==null&&s0(G),s0(ce),ge}finally{pm()}return new E0(this.componentType,Ke,ba(ye,ce),ce,ye)}finally{Ye(o)}}},E0=class extends b0{constructor(n,t,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new us(i,void 0,!1),this.componentType=n}setInput(n,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[n])){if(this.previousInputValues??=new Map,this.previousInputValues.has(n)&&Object.is(this.previousInputValues.get(n),t))return;let o=this._rootLView;km(o[Ae],o,i,n,t),this.previousInputValues.set(n,t);let l=_o(this._tNode.index,o);Lm(l,1)}}get injector(){return new ns(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(n){this.hostView.onDestroy(n)}};function N3(e,n){let t=e[Ae],r=an;return e[r]=n,Xl(t,r,2,"#host",null)}function R3(e,n,t,r,i,o,l){let h=i[Ae];P3(r,e,n,l);let g=null;n!==null&&(g=bm(n,i[ha]));let m=o.rendererFactory.createRenderer(n,t),v=16;t.signals?v=4096:t.onPush&&(v=64);let b=Sf(i,Rx(t),null,v,i[e.index],e,o,m,null,null,g);return h.firstCreatePass&&C0(h,e,r.length-1),Df(i,b),i[e.index]=b}function P3(e,n,t,r){for(let i of e)n.mergedAttrs=Pl(n.mergedAttrs,i.hostAttrs);n.mergedAttrs!==null&&(Jd(n,n.mergedAttrs,!0),t!==null&&Mx(r,t,n))}function k3(e,n,t,r,i,o){let l=Hn(),h=i[Ae],g=dr(l,i);Fx(h,i,l,t,null,r);for(let v=0;v<t.length;v++){let b=l.directiveStart+v,I=cs(i,h,b,l);mo(I,i)}Lx(h,i,l),g&&mo(g,i);let m=cs(i,h,l.directiveStart+l.componentOffset,l);if(e[Nn]=i[Nn]=m,o!==null)for(let v of o)v(m,n);return Am(h,l,i),m}function F3(e,n,t,r){if(r)Wg(e,t,["ng-version","18.2.7"]);else{let{attrs:i,classes:o}=KO(n.selectors[0]);i&&Wg(e,t,i),o&&o.length>0&&Dx(e,t,o.join(" "))}}function L3(e,n,t){let r=e.projection=[];for(let i=0;i<n.length;i++){let o=t[i];r.push(o!=null?Array.from(o):null)}}function B3(){let e=Hn();_f(Qe()[Ae],e)}var vo=(()=>{class e{static{this.__NG_ELEMENT_ID__=U3}}return e})();function U3(){let e=Hn();return iE(e,Qe())}var V3=vo,rE=class extends V3{constructor(n,t,r){super(),this._lContainer=n,this._hostTNode=t,this._hostLView=r}get element(){return ba(this._hostTNode,this._hostLView)}get injector(){return new ns(this._hostTNode,this._hostLView)}get parentInjector(){let n=mm(this._hostTNode,this._hostLView);if(Tb(n)){let t=zd(n,this._hostLView),r=Hd(n),i=t[Ae].data[r+8];return new ns(i,t)}else return new ns(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(n){let t=wv(this._lContainer);return t!==null&&t[n]||null}get length(){return this._lContainer.length-bn}createEmbeddedView(n,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let l=Vl(this._lContainer,n.ssrId),h=n.createEmbeddedViewImpl(t||{},o,l);return this.insertImpl(h,i,Ul(this._hostTNode,l)),h}createComponent(n,t,r,i,o){let l=n&&!pN(n),h;if(l)h=t;else{let P=t||{};h=P.index,r=P.injector,i=P.projectableNodes,o=P.environmentInjector||P.ngModuleRef}let g=l?n:new jl(is(n)),m=r||this.parentInjector;if(!o&&g.ngModule==null){let z=(l?m:this.parentInjector).get(Ir,null);z&&(o=z)}let v=is(g.componentType??{}),b=Vl(this._lContainer,v?.id??null),I=b?.firstChild??null,T=g.create(m,i,I,o);return this.insertImpl(T.hostView,h,Ul(this._hostTNode,b)),T}insert(n,t){return this.insertImpl(n,t,!0)}insertImpl(n,t,r){let i=n._lView;if(bN(i)){let h=this.indexOf(n);if(h!==-1)this.detach(h);else{let g=i[xn],m=new rE(g,g[Zr],g[xn]);m.detach(m.indexOf(n))}}let o=this._adjustIndex(t),l=this._lContainer;return Tf(l,i,o,r),n.attachToViewContainerRef(),zv(Rg(l),o,n),n}move(n,t){return this.insert(n,t)}indexOf(n){let t=wv(this._lContainer);return t!==null?t.indexOf(n):-1}remove(n){let t=this._adjustIndex(n,-1),r=Bl(this._lContainer,t);r&&(Fd(Rg(this._lContainer),t),xf(r[Ae],r))}detach(n){let t=this._adjustIndex(n,-1),r=Bl(this._lContainer,t);return r&&Fd(Rg(this._lContainer),t)!=null?new us(r):null}_adjustIndex(n,t=0){return n??this.length+t}};function wv(e){return e[Ud]}function Rg(e){return e[Ud]||(e[Ud]=[])}function iE(e,n){let t,r=n[e.index];return di(r)?t=r:(t=Bx(r,n,null,e),n[e.index]=t,Df(n,t)),oE(t,n,e,r),new rE(t,e,n)}function j3(e,n){let t=e[Ft],r=t.createComment(""),i=dr(n,e),o=Ex(t,i);return Zd(t,o,r,pP(t,i),!1),r}var oE=sE,Um=()=>!1;function H3(e,n,t){return Um(e,n,t)}function sE(e,n,t,r){if(e[Ai])return;let i;t.type&8?i=qr(r):i=j3(n,t),e[Ai]=i}function z3(e,n,t){if(e[Ai]&&e[Ll])return!0;let r=t[$r],i=n.index-an;if(!r||gR(n)||Yl(r,i))return!1;let l=c0(r,i),h=r.data[vm]?.[i],[g,m]=E3(l,h);return e[Ai]=g,e[Ll]=m,!0}function W3(e,n,t,r){Um(e,t,n)||sE(e,n,t,r)}function G3(){oE=W3,Um=z3}var I0=class e{constructor(n){this.queryList=n,this.matches=null}clone(){return new e(this.queryList)}setDirty(){this.queryList.setDirty()}},S0=class e{constructor(n=[]){this.queries=n}createEmbeddedView(n){let t=n.queries;if(t!==null){let r=n.contentQueries!==null?n.contentQueries[0]:t.length,i=[];for(let o=0;o<r;o++){let l=t.getByIndex(o),h=this.queries[l.indexInDeclarationView];i.push(h.clone())}return new e(i)}return null}insertView(n){this.dirtyQueriesWithMatches(n)}detachView(n){this.dirtyQueriesWithMatches(n)}finishViewCreation(n){this.dirtyQueriesWithMatches(n)}dirtyQueriesWithMatches(n){for(let t=0;t<this.queries.length;t++)Vm(n,t).matches!==null&&this.queries[t].setDirty()}},D0=class{constructor(n,t,r=null){this.flags=t,this.read=r,typeof n=="string"?this.predicate=J3(n):this.predicate=n}},M0=class e{constructor(n=[]){this.queries=n}elementStart(n,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(n,t)}elementEnd(n){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(n)}embeddedTView(n){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,o=this.getByIndex(r).embeddedTView(n,i);o&&(o.indexInDeclarationView=r,t!==null?t.push(o):t=[o])}return t!==null?new e(t):null}template(n,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(n,t)}getByIndex(n){return this.queries[n]}get length(){return this.queries.length}track(n){this.queries.push(n)}},T0=class e{constructor(n,t=-1){this.metadata=n,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(n,t){this.isApplyingToNode(t)&&this.matchTNode(n,t)}elementEnd(n){this._declarationNodeIndex===n.index&&(this._appliesToNextNode=!1)}template(n,t){this.elementStart(n,t)}embeddedTView(n,t){return this.isApplyingToNode(n)?(this.crossesNgTemplate=!0,this.addMatch(-n.index,t),new e(this.metadata)):null}isApplyingToNode(n){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=n.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(n,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(n,t,$3(t,o)),this.matchTNodeWithReadOption(n,t,Od(t,n,o,!1,!1))}else r===ds?t.type&4&&this.matchTNodeWithReadOption(n,t,-1):this.matchTNodeWithReadOption(n,t,Od(t,n,r,!1,!1))}matchTNodeWithReadOption(n,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===fr||i===vo||i===ds&&t.type&4)this.addMatch(t.index,-2);else{let o=Od(t,n,i,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(n,t){this.matches===null?this.matches=[n,t]:this.matches.push(n,t)}};function $3(e,n){let t=e.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===n)return t[r+1]}return null}function q3(e,n){return e.type&11?ba(e,n):e.type&4?Af(e,n):null}function Y3(e,n,t,r){return t===-1?q3(n,e):t===-2?Z3(e,n,r):cs(e,e[Ae],t,n)}function Z3(e,n,t){if(t===fr)return ba(n,e);if(t===ds)return Af(n,e);if(t===vo)return iE(n,e)}function aE(e,n,t,r){let i=n[Ti].queries[r];if(i.matches===null){let o=e.data,l=t.matches,h=[];for(let g=0;l!==null&&g<l.length;g+=2){let m=l[g];if(m<0)h.push(null);else{let v=o[m];h.push(Y3(n,v,l[g+1],t.metadata.read))}}i.matches=h}return i.matches}function A0(e,n,t,r){let i=e.queries.getByIndex(t),o=i.matches;if(o!==null){let l=aE(e,n,i,t);for(let h=0;h<o.length;h+=2){let g=o[h];if(g>0)r.push(l[h/2]);else{let m=o[h+1],v=n[-g];for(let b=bn;b<v.length;b++){let I=v[b];I[os]===I[xn]&&A0(I[Ae],I,m,r)}if(v[pa]!==null){let b=v[pa];for(let I=0;I<b.length;I++){let T=b[I];A0(T[Ae],T,m,r)}}}}}return r}function X3(e,n){return e[Ti].queries[n].queryList}function Q3(e,n,t){let r=new o0((t&4)===4);return TP(e,n,r,r.destroy),(n[Ti]??=new S0).queries.push(new I0(r))-1}function K3(e,n,t){let r=ln();return r.firstCreatePass&&(ek(r,new D0(e,n,t),-1),(n&2)===2&&(r.staticViewQueries=!0)),Q3(r,Qe(),n)}function J3(e){return e.split(",").map(n=>n.trim())}function ek(e,n,t){e.queries===null&&(e.queries=new M0),e.queries.track(new T0(n,t))}function Vm(e,n){return e.queries.getByIndex(n)}function tk(e,n){let t=e[Ae],r=Vm(t,n);return r.crossesNgTemplate?A0(t,e,n,[]):aE(t,e,r,n)}var vv=new Set;function Vi(e){vv.has(e)||(vv.add(e),performance?.mark?.("mark_feature_usage",{detail:{feature:e}}))}function nk(e){return typeof e=="function"&&e[Ii]!==void 0}function Ql(e,n){Vi("NgSignals");let t=mw(e),r=t[Ii];return n?.equal&&(r.equal=n.equal),t.set=i=>ig(r,i),t.update=i=>yw(r,i),t.asReadonly=rk.bind(t),t}function rk(){let e=this[Ii];if(e.readonlyFn===void 0){let n=()=>this();n[Ii]=e,e.readonlyFn=n}return e.readonlyFn}function lE(e){return nk(e)&&typeof e.set=="function"}function ik(e){return Object.getPrototypeOf(e.prototype).constructor}function Sr(e){let n=ik(e.type),t=!0,r=[e];for(;n;){let i;if(po(e))i=n.\u0275cmp||n.\u0275dir;else{if(n.\u0275cmp)throw new fe(903,!1);i=n.\u0275dir}if(i){if(t){r.push(i);let l=e;l.inputs=Ed(e.inputs),l.inputTransforms=Ed(e.inputTransforms),l.declaredInputs=Ed(e.declaredInputs),l.outputs=Ed(e.outputs);let h=i.hostBindings;h&&ck(e,h);let g=i.viewQuery,m=i.contentQueries;if(g&&ak(e,g),m&&lk(e,m),ok(e,i),yO(e.outputs,i.outputs),po(i)&&i.data.animation){let v=e.data;v.animation=(v.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let l=0;l<o.length;l++){let h=o[l];h&&h.ngInherit&&h(e),h===Sr&&(t=!1)}}n=Object.getPrototypeOf(n)}sk(r)}function ok(e,n){for(let t in n.inputs){if(!n.inputs.hasOwnProperty(t)||e.inputs.hasOwnProperty(t))continue;let r=n.inputs[t];if(r!==void 0&&(e.inputs[t]=r,e.declaredInputs[t]=n.declaredInputs[t],n.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!n.inputTransforms.hasOwnProperty(i))continue;e.inputTransforms??={},e.inputTransforms[i]=n.inputTransforms[i]}}}function sk(e){let n=0,t=null;for(let r=e.length-1;r>=0;r--){let i=e[r];i.hostVars=n+=i.hostVars,i.hostAttrs=Pl(i.hostAttrs,t=Pl(t,i.hostAttrs))}}function Ed(e){return e===da?{}:e===Vn?[]:e}function ak(e,n){let t=e.viewQuery;t?e.viewQuery=(r,i)=>{n(r,i),t(r,i)}:e.viewQuery=n}function lk(e,n){let t=e.contentQueries;t?e.contentQueries=(r,i,o)=>{n(r,i,o),t(r,i,o)}:e.contentQueries=n}function ck(e,n){let t=e.hostBindings;t?e.hostBindings=(r,i)=>{n(r,i),t(r,i)}:e.hostBindings=n}var yo=class{},Hl=class{};var O0=class extends yo{constructor(n,t,r,i=!0){super(),this.ngModuleType=n,this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new ef(this);let o=Qv(n);this._bootstrapComponents=_x(o.bootstrap),this._r3Injector=Bb(n,t,[{provide:yo,useValue:this},{provide:ma,useValue:this.componentFactoryResolver},...r],jn(n),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let n=this._r3Injector;!n.destroyed&&n.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(n){this.destroyCbs.push(n)}},N0=class extends Hl{constructor(n){super(),this.moduleType=n}create(n){return new O0(this.moduleType,n,[])}};var tf=class extends yo{constructor(n){super(),this.componentFactoryResolver=new ef(this),this.instance=null;let t=new kl([...n.providers,{provide:yo,useValue:this},{provide:ma,useValue:this.componentFactoryResolver}],n.parent||sm(),n.debugName,new Set(["environment"]));this.injector=t,n.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(n){this.injector.onDestroy(n)}};function jm(e,n,t=null){return new tf({providers:e,parent:n,debugName:t,runEnvironmentInitializers:!0}).injector}function cE(e){return Hm(e)?Array.isArray(e)||!(e instanceof Map)&&Symbol.iterator in e:!1}function uk(e,n){if(Array.isArray(e))for(let t=0;t<e.length;t++)n(e[t]);else{let t=e[Symbol.iterator](),r;for(;!(r=t.next()).done;)n(r.value)}}function Hm(e){return e!==null&&(typeof e=="function"||typeof e=="object")}function uE(e,n,t){return e[n]=t}function dk(e,n){return e[n]}function Yr(e,n,t){let r=e[n];return Object.is(r,t)?!1:(e[n]=t,!0)}function R0(e,n,t,r){let i=Yr(e,n,t);return Yr(e,n+1,r)||i}function fk(e,n,t,r,i){let o=R0(e,n,t,r);return Yr(e,n+2,i)||o}function hk(e,n,t,r,i,o){let l=R0(e,n,t,r);return R0(e,n+2,i,o)||l}function Kl(e){return(e.flags&32)===32}function pk(e,n,t,r,i,o,l,h,g){let m=n.consts,v=Xl(n,e,4,l||null,h||null);Pm(n,t,v,go(m,g)),_f(n,v);let b=v.tView=Rm(2,v,r,i,o,n.directiveRegistry,n.pipeRegistry,null,n.schemas,m,null);return n.queries!==null&&(n.queries.template(n,v),b.queries=n.queries.embeddedTView(v)),v}function P0(e,n,t,r,i,o,l,h,g,m){let v=t+an,b=n.firstCreatePass?pk(v,n,e,r,i,o,l,h,g):n.data[v];hs(b,!1);let I=dE(n,e,b,t);yf()&&Ef(n,e,I,b),mo(I,e);let T=Bx(I,e,I,b);return e[v]=T,Df(e,T),H3(T,b,e),pf(b)&&Om(n,e,b),g!=null&&Nm(e,b,m),b}function mt(e,n,t,r,i,o,l,h){let g=Qe(),m=ln(),v=go(m.consts,o);return P0(g,m,e,n,t,r,i,v,l,h),mt}var dE=fE;function fE(e,n,t,r){return Co(!0),n[Ft].createComment("")}function gk(e,n,t,r){let i=n[$r],o=!i||ql()||Kl(t)||Yl(i,r);if(Co(o),o)return fE(e,n,t,r);let l=i.data[xR]?.[r]??null;l!==null&&t.tView!==null&&t.tView.ssrId===null&&(t.tView.ssrId=l);let h=Of(i,e,n,t);vf(i,r,h);let g=xm(i,r);return Nf(g,h)}function mk(){dE=gk}var Ol=function(e){return e[e.EarlyRead=0]="EarlyRead",e[e.Write=1]="Write",e[e.MixedReadWrite=2]="MixedReadWrite",e[e.Read=3]="Read",e}(Ol||{}),yk=(()=>{class e{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=he({token:e,providedIn:"root",factory:()=>new e})}}return e})(),bv=class e{constructor(){this.ngZone=te(Qt),this.scheduler=te(ga),this.errorHandler=te(Oi,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[Ol.EarlyRead,Ol.Write,Ol.MixedReadWrite,Ol.Read]}execute(){this.executing=!0;for(let n of e.PHASES)for(let t of this.sequences)if(!(t.erroredOrDestroyed||!t.hooks[n]))try{t.pipelinedValue=this.ngZone.runOutsideAngular(()=>t.hooks[n](t.pipelinedValue))}catch(r){t.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let n of this.sequences)n.afterRun(),n.once&&this.sequences.delete(n);for(let n of this.deferredRegistrations)this.sequences.add(n);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(n){this.executing?this.deferredRegistrations.add(n):(this.sequences.add(n),this.scheduler.notify(6))}unregister(n){this.executing&&this.sequences.has(n)?(n.erroredOrDestroyed=!0,n.pipelinedValue=void 0,n.once=!0):(this.sequences.delete(n),this.deferredRegistrations.delete(n))}static{this.\u0275prov=he({token:e,providedIn:"root",factory:()=>new e})}};function Jl(e,n,t,r){let i=Qe(),o=va();if(Yr(i,o,n)){let l=ln(),h=gm();WP(h,i,e,n,t,r)}return Jl}function _k(e,n,t,r){return Yr(e,va(),t)?n+ts(t)+r:hr}function Ck(e,n,t,r,i,o,l,h,g,m){let v=RN(),b=hk(e,v,t,i,l,g);return dm(4),b?n+ts(t)+r+ts(i)+o+ts(l)+h+ts(g)+m:hr}function Id(e,n){return e<<17|n<<2}function fs(e){return e>>17&32767}function wk(e){return(e&2)==2}function vk(e,n){return e&131071|n<<17}function k0(e){return e|2}function _a(e){return(e&131068)>>2}function Pg(e,n){return e&-131069|n<<2}function bk(e){return(e&1)===1}function F0(e){return e|1}function xk(e,n,t,r,i,o){let l=o?n.classBindings:n.styleBindings,h=fs(l),g=_a(l);e[r]=t;let m=!1,v;if(Array.isArray(t)){let b=t;v=b[1],(v===null||Gl(b,v)>0)&&(m=!0)}else v=t;if(i)if(g!==0){let I=fs(e[h+1]);e[r+1]=Id(I,h),I!==0&&(e[I+1]=Pg(e[I+1],r)),e[h+1]=vk(e[h+1],r)}else e[r+1]=Id(h,0),h!==0&&(e[h+1]=Pg(e[h+1],r)),h=r;else e[r+1]=Id(g,0),h===0?h=r:e[g+1]=Pg(e[g+1],r),g=r;m&&(e[r+1]=k0(e[r+1])),xv(e,v,r,!0),xv(e,v,r,!1),Ek(n,v,e,r,o),l=Id(h,g),o?n.classBindings=l:n.styleBindings=l}function Ek(e,n,t,r,i){let o=i?e.residualClasses:e.residualStyles;o!=null&&typeof n=="string"&&Gl(o,n)>=0&&(t[r+1]=F0(t[r+1]))}function xv(e,n,t,r){let i=e[t+1],o=n===null,l=r?fs(i):_a(i),h=!1;for(;l!==0&&(h===!1||o);){let g=e[l],m=e[l+1];Ik(g,n)&&(h=!0,e[l+1]=r?F0(m):k0(m)),l=r?fs(m):_a(m)}h&&(e[t+1]=r?k0(i):F0(i))}function Ik(e,n){return e===null||n==null||(Array.isArray(e)?e[1]:e)===n?!0:Array.isArray(e)&&typeof n=="string"?Gl(e,n)>=0:!1}var zr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Sk(e){return e.substring(zr.key,zr.keyEnd)}function Dk(e){return Mk(e),hE(e,pE(e,0,zr.textEnd))}function hE(e,n){let t=zr.textEnd;return t===n?-1:(n=zr.keyEnd=Tk(e,zr.key=n,t),pE(e,n,t))}function Mk(e){zr.key=0,zr.keyEnd=0,zr.value=0,zr.valueEnd=0,zr.textEnd=e.length}function pE(e,n,t){for(;n<t&&e.charCodeAt(n)<=32;)n++;return n}function Tk(e,n,t){for(;n<t&&e.charCodeAt(n)>32;)n++;return n}function Ee(e,n,t){let r=Qe(),i=va();if(Yr(r,i,n)){let o=ln(),l=gm();kx(o,l,r,e,n,r[Ft],t,!1)}return Ee}function L0(e,n,t,r,i){let o=n.inputs,l=i?"class":"style";km(e,t,o[l],l,r)}function pr(e,n){return Ok(e,n,null,!0),pr}function gE(e){Nk(Bk,Ak,e,!0)}function Ak(e,n){for(let t=Dk(n);t>=0;t=hE(n,t))rm(e,Sk(n),!0)}function Ok(e,n,t,r){let i=Qe(),o=ln(),l=dm(2);if(o.firstUpdatePass&&yE(o,e,l,r),n!==hr&&Yr(i,l,n)){let h=o.data[Fi()];_E(o,h,i,i[Ft],e,i[l+1]=Vk(n,t),r,l)}}function Nk(e,n,t,r){let i=ln(),o=dm(2);i.firstUpdatePass&&yE(i,null,o,r);let l=Qe();if(t!==hr&&Yr(l,o,t)){let h=i.data[Fi()];if(CE(h,r)&&!mE(i,o)){let g=r?h.classesWithoutHost:h.stylesWithoutHost;g!==null&&(t=Vg(g,t||"")),L0(i,h,l,t,r)}else Uk(i,h,l,l[Ft],l[o+1],l[o+1]=Lk(e,n,t),r,o)}}function mE(e,n){return n>=e.expandoStartIndex}function yE(e,n,t,r){let i=e.data;if(i[t+1]===null){let o=i[Fi()],l=mE(e,t);CE(o,r)&&n===null&&!l&&(n=!1),n=Rk(i,o,n,r),xk(i,o,n,t,l,r)}}function Rk(e,n,t,r){let i=BN(e),o=r?n.residualClasses:n.residualStyles;if(i===null)(r?n.classBindings:n.styleBindings)===0&&(t=kg(null,e,n,t,r),t=zl(t,n.attrs,r),o=null);else{let l=n.directiveStylingLast;if(l===-1||e[l]!==i)if(t=kg(i,e,n,t,r),o===null){let g=Pk(e,n,r);g!==void 0&&Array.isArray(g)&&(g=kg(null,e,n,g[1],r),g=zl(g,n.attrs,r),kk(e,n,r,g))}else o=Fk(e,n,r)}return o!==void 0&&(r?n.residualClasses=o:n.residualStyles=o),t}function Pk(e,n,t){let r=t?n.classBindings:n.styleBindings;if(_a(r)!==0)return e[fs(r)]}function kk(e,n,t,r){let i=t?n.classBindings:n.styleBindings;e[fs(i)]=r}function Fk(e,n,t){let r,i=n.directiveEnd;for(let o=1+n.directiveStylingLast;o<i;o++){let l=e[o].hostAttrs;r=zl(r,l,t)}return zl(r,n.attrs,t)}function kg(e,n,t,r,i){let o=null,l=t.directiveEnd,h=t.directiveStylingLast;for(h===-1?h=t.directiveStart:h++;h<l&&(o=n[h],r=zl(r,o.hostAttrs,i),o!==e);)h++;return e!==null&&(t.directiveStylingLast=h),r}function zl(e,n,t){let r=t?1:2,i=-1;if(n!==null)for(let o=0;o<n.length;o++){let l=n[o];typeof l=="number"?i=l:i===r&&(Array.isArray(e)||(e=e===void 0?[]:["",e]),rm(e,l,t?!0:n[++o]))}return e===void 0?null:e}function Lk(e,n,t){if(t==null||t==="")return Vn;let r=[],i=Bi(t);if(Array.isArray(i))for(let o=0;o<i.length;o++)e(r,i[o],!0);else if(typeof i=="object")for(let o in i)i.hasOwnProperty(o)&&e(r,o,i[o]);else typeof i=="string"&&n(r,i);return r}function Bk(e,n,t){let r=String(n);r!==""&&!r.includes(" ")&&rm(e,r,t)}function Uk(e,n,t,r,i,o,l,h){i===hr&&(i=Vn);let g=0,m=0,v=0<i.length?i[0]:null,b=0<o.length?o[0]:null;for(;v!==null||b!==null;){let I=g<i.length?i[g+1]:void 0,T=m<o.length?o[m+1]:void 0,P=null,z;v===b?(g+=2,m+=2,I!==T&&(P=b,z=T)):b===null||v!==null&&v<b?(g+=2,P=v):(m+=2,P=b,z=T),P!==null&&_E(e,n,t,r,P,z,l,h),v=g<i.length?i[g]:null,b=m<o.length?o[m]:null}}function _E(e,n,t,r,i,o,l,h){if(!(n.type&3))return;let g=e.data,m=g[h+1],v=bk(m)?Ev(g,n,t,i,_a(m),l):void 0;if(!nf(v)){nf(o)||wk(m)&&(o=Ev(g,null,t,i,h,l));let b=ub(Fi(),t);wP(r,l,b,i,o)}}function Ev(e,n,t,r,i,o){let l=n===null,h;for(;i>0;){let g=e[i],m=Array.isArray(g),v=m?g[1]:g,b=v===null,I=t[i+1];I===hr&&(I=b?Vn:void 0);let T=b?xg(I,r):v===r?I:void 0;if(m&&!nf(T)&&(T=xg(g,r)),nf(T)&&(h=T,l))return h;let P=e[i+1];i=l?fs(P):_a(P)}if(n!==null){let g=o?n.residualClasses:n.residualStyles;g!=null&&(h=xg(g,r))}return h}function nf(e){return e!==void 0}function Vk(e,n){return e==null||e===""||(typeof n=="string"?e=e+n:typeof e=="object"&&(e=jn(Bi(e)))),e}function CE(e,n){return(e.flags&(n?8:16))!==0}var B0=class{destroy(n){}updateValue(n,t){}swap(n,t){let r=Math.min(n,t),i=Math.max(n,t),o=this.detach(i);if(i-r>1){let l=this.detach(r);this.attach(r,o),this.attach(i,l)}else this.attach(r,o)}move(n,t){this.attach(t,this.detach(n))}};function Fg(e,n,t,r,i){return e===t&&Object.is(n,r)?1:Object.is(i(e,n),i(t,r))?-1:0}function jk(e,n,t){let r,i,o=0,l=e.length-1,h=void 0;if(Array.isArray(n)){let g=n.length-1;for(;o<=l&&o<=g;){let m=e.at(o),v=n[o],b=Fg(o,m,o,v,t);if(b!==0){b<0&&e.updateValue(o,v),o++;continue}let I=e.at(l),T=n[g],P=Fg(l,I,g,T,t);if(P!==0){P<0&&e.updateValue(l,T),l--,g--;continue}let z=t(o,m),Z=t(l,I),q=t(o,v);if(Object.is(q,Z)){let ce=t(g,T);Object.is(ce,z)?(e.swap(o,l),e.updateValue(l,T),g--,l--):e.move(l,o),e.updateValue(o,v),o++;continue}if(r??=new rf,i??=Sv(e,o,l,t),U0(e,r,o,q))e.updateValue(o,v),o++,l++;else if(i.has(q))r.set(z,e.detach(o)),l--;else{let ce=e.create(o,n[o]);e.attach(o,ce),o++,l++}}for(;o<=g;)Iv(e,r,t,o,n[o]),o++}else if(n!=null){let g=n[Symbol.iterator](),m=g.next();for(;!m.done&&o<=l;){let v=e.at(o),b=m.value,I=Fg(o,v,o,b,t);if(I!==0)I<0&&e.updateValue(o,b),o++,m=g.next();else{r??=new rf,i??=Sv(e,o,l,t);let T=t(o,b);if(U0(e,r,o,T))e.updateValue(o,b),o++,l++,m=g.next();else if(!i.has(T))e.attach(o,e.create(o,b)),o++,l++,m=g.next();else{let P=t(o,v);r.set(P,e.detach(o)),l--}}}for(;!m.done;)Iv(e,r,t,e.length,m.value),m=g.next()}for(;o<=l;)e.destroy(e.detach(l--));r?.forEach(g=>{e.destroy(g)})}function U0(e,n,t,r){return n!==void 0&&n.has(r)?(e.attach(t,n.get(r)),n.delete(r),!0):!1}function Iv(e,n,t,r,i){if(U0(e,n,r,t(r,i)))e.updateValue(r,i);else{let o=e.create(r,i);e.attach(r,o)}}function Sv(e,n,t,r){let i=new Set;for(let o=n;o<=t;o++)i.add(r(o,e.at(o)));return i}var rf=class{constructor(){this.kvMap=new Map,this._vMap=void 0}has(n){return this.kvMap.has(n)}delete(n){if(!this.has(n))return!1;let t=this.kvMap.get(n);return this._vMap!==void 0&&this._vMap.has(t)?(this.kvMap.set(n,this._vMap.get(t)),this._vMap.delete(t)):this.kvMap.delete(n),!0}get(n){return this.kvMap.get(n)}set(n,t){if(this.kvMap.has(n)){let r=this.kvMap.get(n);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,t)}else this.kvMap.set(n,t)}forEach(n){for(let[t,r]of this.kvMap)if(n(r,t),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),n(r,t)}}};function zn(e,n){Vi("NgControlFlow");let t=Qe(),r=va(),i=t[r]!==hr?t[r]:-1,o=i!==-1?of(t,an+i):void 0,l=0;if(Yr(t,r,e)){let h=Ye(null);try{if(o!==void 0&&Gx(o,l),e!==-1){let g=an+e,m=of(t,g),v=z0(t[Ae],g),b=Vl(m,v.tView.ssrId),I=Mf(t,v,n,{dehydratedView:b});Tf(m,I,l,Ul(v,b))}}finally{Ye(h)}}else if(o!==void 0){let h=Wx(o,l);h!==void 0&&(h[Nn]=n)}}var V0=class{constructor(n,t,r){this.lContainer=n,this.$implicit=t,this.$index=r}get $count(){return this.lContainer.length-bn}};function Rn(e,n){return n}var j0=class{constructor(n,t,r){this.hasEmptyBlock=n,this.trackByFn=t,this.liveCollection=r}};function Pn(e,n,t,r,i,o,l,h,g,m,v,b,I){Vi("NgControlFlow");let T=Qe(),P=ln(),z=g!==void 0,Z=Qe(),q=h?l.bind(Z[ur][Nn]):l,ce=new j0(z,q);Z[an+e]=ce,P0(T,P,e+1,n,t,r,i,go(P.consts,o)),z&&P0(T,P,e+2,g,m,v,b,go(P.consts,I))}var H0=class extends B0{constructor(n,t,r){super(),this.lContainer=n,this.hostLView=t,this.templateTNode=r,this.operationsCounter=void 0,this.needsIndexUpdate=!1}get length(){return this.lContainer.length-bn}at(n){return this.getLView(n)[Nn].$implicit}attach(n,t){let r=t[$r];this.needsIndexUpdate||=n!==this.length,Tf(this.lContainer,t,n,Ul(this.templateTNode,r))}detach(n){return this.needsIndexUpdate||=n!==this.length-1,Hk(this.lContainer,n)}create(n,t){let r=Vl(this.lContainer,this.templateTNode.tView.ssrId),i=Mf(this.hostLView,this.templateTNode,new V0(this.lContainer,t,n),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(n){xf(n[Ae],n),this.operationsCounter?.recordDestroy()}updateValue(n,t){this.getLView(n)[Nn].$implicit=t}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let n=0;n<this.length;n++)this.getLView(n)[Nn].$index=n}getLView(n){return zk(this.lContainer,n)}};function kn(e){let n=Ye(null),t=Fi();try{let r=Qe(),i=r[Ae],o=r[t],l=t+1,h=of(r,l);if(o.liveCollection===void 0){let m=z0(i,l);o.liveCollection=new H0(h,r,m)}else o.liveCollection.reset();let g=o.liveCollection;if(jk(g,e,o.trackByFn),g.updateIndexes(),o.hasEmptyBlock){let m=va(),v=g.length===0;if(Yr(r,m,v)){let b=t+2,I=of(r,b);if(v){let T=z0(i,b),P=Vl(I,T.tView.ssrId),z=Mf(r,T,void 0,{dehydratedView:P});Tf(I,z,0,Ul(T,P))}else Gx(I,0)}}}finally{Ye(n)}}function of(e,n){return e[n]}function Hk(e,n){return Bl(e,n)}function zk(e,n){return Wx(e,n)}function z0(e,n){return lm(e,n)}function Wk(e,n,t,r,i,o){let l=n.consts,h=go(l,i),g=Xl(n,e,2,r,h);return Pm(n,t,g,go(l,o)),g.attrs!==null&&Jd(g,g.attrs,!1),g.mergedAttrs!==null&&Jd(g,g.mergedAttrs,!0),n.queries!==null&&n.queries.elementStart(n,g),g}function M(e,n,t,r){let i=Qe(),o=ln(),l=an+e,h=i[Ft],g=o.firstCreatePass?Wk(l,o,i,n,t,r):o.data[l],m=wE(o,i,g,h,n,e);i[l]=m;let v=pf(g);return hs(g,!0),Mx(h,m,g),!Kl(g)&&yf()&&Ef(o,i,m,g),IN()===0&&mo(m,i),SN(),v&&(Om(o,i,g),Am(o,g,i)),r!==null&&Nm(i,g),M}function A(){let e=Hn();um()?yb():(e=e.parent,hs(e,!1));let n=e;MN(n)&&AN(),DN();let t=ln();return t.firstCreatePass&&(_f(t,e),am(e)&&t.queries.elementEnd(e)),n.classesWithoutHost!=null&&WN(n)&&L0(t,n,Qe(),n.classesWithoutHost,!0),n.stylesWithoutHost!=null&&GN(n)&&L0(t,n,Qe(),n.stylesWithoutHost,!1),A}function J(e,n,t,r){return M(e,n,t,r),A(),J}var wE=(e,n,t,r,i,o)=>(Co(!0),Sm(r,i,Sb()));function Gk(e,n,t,r,i,o){let l=n[$r],h=!l||ql()||Kl(t)||Yl(l,o);if(Co(h),h)return Sm(r,i,Sb());let g=Of(l,e,n,t);return nx(l,o)&&vf(l,o,g.nextSibling),l&&(zb(t)||Wb(g))&&$l(t)&&(TN(t),Sx(g)),g}function $k(){wE=Gk}function qk(e,n,t,r,i){let o=n.consts,l=go(o,r),h=Xl(n,e,8,"ng-container",l);l!==null&&Jd(h,l,!0);let g=go(o,i);return Pm(n,t,h,g),n.queries!==null&&n.queries.elementStart(n,h),h}function gs(e,n,t){let r=Qe(),i=ln(),o=e+an,l=i.firstCreatePass?qk(o,i,r,n,t):i.data[o];hs(l,!0);let h=vE(i,r,l,e);return r[o]=h,yf()&&Ef(i,r,h,l),mo(h,r),pf(l)&&(Om(i,r,l),Am(i,l,r)),t!=null&&Nm(r,l),gs}function ms(){let e=Hn(),n=ln();return um()?yb():(e=e.parent,hs(e,!1)),n.firstCreatePass&&(_f(n,e),am(e)&&n.queries.elementEnd(e)),ms}var vE=(e,n,t,r)=>(Co(!0),wx(n[Ft],""));function Yk(e,n,t,r){let i,o=n[$r],l=!o||ql()||Yl(o,r)||Kl(t);if(Co(l),l)return wx(n[Ft],"");let h=Of(o,e,n,t),g=RR(o,r);return vf(o,r,h),i=Nf(g,h),i}function Zk(){vE=Yk}function Tt(){return Qe()}var sf="en-US";var Xk=sf;function Qk(e){typeof e=="string"&&(Xk=e.toLowerCase().replace(/_/g,"-"))}var Kk=(e,n,t)=>{};function j(e,n,t,r){let i=Qe(),o=ln(),l=Hn();return bE(o,i,i[Ft],l,e,n,r),j}function Jk(e,n,t,r){let i=e.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let l=i[o];if(l===t&&i[o+1]===r){let h=n[Bd],g=i[o+2];return h.length>g?h[g]:null}typeof l=="string"&&(o+=2)}return null}function bE(e,n,t,r,i,o,l){let h=pf(r),m=e.firstCreatePass&&jx(e),v=n[Nn],b=Vx(n),I=!0;if(r.type&3||l){let z=dr(r,n),Z=l?l(z):z,q=b.length,ce=l?ye=>l(qr(ye[r.index])):r.index,Ke=null;if(!l&&h&&(Ke=Jk(e,n,i,r.index)),Ke!==null){let ye=Ke.__ngLastListenerFn__||Ke;ye.__ngNextListenerFn__=o,Ke.__ngLastListenerFn__=o,I=!1}else{o=Mv(r,n,v,o),Kk(z,i,o);let ye=t.listen(Z,i,o);b.push(o,ye),m&&m.push(i,ce,q,q+1)}}else o=Mv(r,n,v,o);let T=r.outputs,P;if(I&&T!==null&&(P=T[i])){let z=P.length;if(z)for(let Z=0;Z<z;Z+=2){let q=P[Z],ce=P[Z+1],G=n[q][ce].subscribe(o),ge=b.length;b.push(o,G),m&&m.push(i,r.index,ge,-(ge+1))}}}function Dv(e,n,t,r){let i=Ye(null);try{return ii(6,n,t),t(r)!==!1}catch(o){return Hx(e,o),!1}finally{ii(7,n,t),Ye(i)}}function Mv(e,n,t,r){return function i(o){if(o===Function)return r;let l=e.componentOffset>-1?_o(e.index,n):n;Lm(l,5);let h=Dv(n,t,r,o),g=i.__ngNextListenerFn__;for(;g;)h=Dv(n,t,g,o)&&h,g=g.__ngNextListenerFn__;return h}}function pe(e=1){return VN(e)}function Rf(e,n,t){K3(e,n,t)}function ec(e){let n=Qe(),t=ln(),r=wb();fm(r+1);let i=Vm(t,r);if(e.dirty&&vN(n)===((i.metadata.flags&2)===2)){if(i.matches===null)e.reset([]);else{let o=tk(n,r);e.reset(o,dR),e.notifyOnChanges()}return!0}return!1}function tc(){return X3(Qe(),wb())}function bo(e){let n=NN();return wN(n,an+e)}function R(e,n=""){let t=Qe(),r=ln(),i=e+an,o=r.firstCreatePass?Xl(r,i,1,n,null):r.data[i],l=xE(r,t,o,n,e);t[i]=l,yf()&&Ef(r,t,l,o),hs(o,!1)}var xE=(e,n,t,r,i)=>(Co(!0),Cx(n[Ft],r));function e4(e,n,t,r,i){let o=n[$r],l=!o||ql()||Kl(t)||Yl(o,i);return Co(l),l?Cx(n[Ft],r):Of(o,e,n,t)}function t4(){xE=e4}function bt(e){return xt("",e,""),bt}function xt(e,n,t){let r=Qe(),i=_k(r,e,n,t);return i!==hr&&zx(r,Fi(),i),xt}function zm(e,n,t,r,i,o,l,h,g){let m=Qe(),v=Ck(m,e,n,t,r,i,o,l,h,g);return v!==hr&&zx(m,Fi(),v),zm}function st(e,n,t){lE(n)&&(n=n());let r=Qe(),i=va();if(Yr(r,i,n)){let o=ln(),l=gm();kx(o,l,r,e,n,r[Ft],t,!1)}return st}function lt(e,n){let t=lE(e);return t&&e.set(n),t}function at(e,n){let t=Qe(),r=ln(),i=Hn();return bE(r,t,t[Ft],i,e,n),at}function n4(e,n,t){let r=ln();if(r.firstCreatePass){let i=po(e);W0(t,r.data,r.blueprint,i,!0),W0(n,r.data,r.blueprint,i,!1)}}function W0(e,n,t,r,i){if(e=Un(e),Array.isArray(e))for(let o=0;o<e.length;o++)W0(e[o],n,t,r,i);else{let o=ln(),l=Qe(),h=Hn(),g=fa(e)?e:Un(e.provide),m=rb(e),v=h.providerIndexes&1048575,b=h.directiveStart,I=h.providerIndexes>>20;if(fa(e)||!e.multi){let T=new ls(m,i,W),P=Bg(g,n,i?v:v+I,b);P===-1?(Jg(Wd(h,l),o,g),Lg(o,e,n.length),n.push(g),h.directiveStart++,h.directiveEnd++,i&&(h.providerIndexes+=1048576),t.push(T),l.push(T)):(t[P]=T,l[P]=T)}else{let T=Bg(g,n,v+I,b),P=Bg(g,n,v,v+I),z=T>=0&&t[T],Z=P>=0&&t[P];if(i&&!Z||!i&&!z){Jg(Wd(h,l),o,g);let q=o4(i?i4:r4,t.length,i,r,m);!i&&Z&&(t[P].providerFactory=q),Lg(o,e,n.length,0),n.push(g),h.directiveStart++,h.directiveEnd++,i&&(h.providerIndexes+=1048576),t.push(q),l.push(q)}else{let q=EE(t[i?P:T],m,!i&&r);Lg(o,e,T>-1?T:P,q)}!i&&r&&Z&&t[P].componentProviders++}}}function Lg(e,n,t,r){let i=fa(n),o=sN(n);if(i||o){let g=(o?Un(n.useClass):n).prototype.ngOnDestroy;if(g){let m=e.destroyHooks||(e.destroyHooks=[]);if(!i&&n.multi){let v=m.indexOf(t);v===-1?m.push(t,[r,g]):m[v+1].push(r,g)}else m.push(t,g)}}}function EE(e,n,t){return t&&e.componentProviders++,e.multi.push(n)-1}function Bg(e,n,t,r){for(let i=t;i<r;i++)if(n[i]===e)return i;return-1}function r4(e,n,t,r){return G0(this.multi,[])}function i4(e,n,t,r){let i=this.multi,o;if(this.providerFactory){let l=this.providerFactory.componentProviders,h=cs(t,t[Ae],this.providerFactory.index,r);o=h.slice(0,l),G0(i,o);for(let g=l;g<h.length;g++)o.push(h[g])}else o=[],G0(i,o);return o}function G0(e,n){for(let t=0;t<e.length;t++){let r=e[t];n.push(r())}return n}function o4(e,n,t,r,i){let o=new ls(e,t,W);return o.multi=[],o.index=n,o.componentProviders=0,EE(o,i,r&&!t),o}function xo(e,n=[]){return t=>{t.providersResolver=(r,i)=>n4(r,i?i(e):e,n)}}var s4=(()=>{class e{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=eb(!1,t.type),i=r.length>0?jm([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=he({token:e,providedIn:"environment",factory:()=>new e(We(Ir))})}}return e})();function se(e){Vi("NgStandalone"),e.getStandaloneInjector=n=>n.get(s4).getOrCreateStandaloneInjector(e)}function nc(e,n,t){let r=Cb()+e,i=Qe();return i[r]===hr?uE(i,r,t?n.call(t):n()):dk(i,r)}function Ia(e,n,t,r,i,o){return l4(Qe(),Cb(),e,n,t,r,i,o)}function a4(e,n){let t=e[n];return t===hr?void 0:t}function l4(e,n,t,r,i,o,l,h){let g=n+t;return fk(e,g,i,o,l)?uE(e,g+3,h?r.call(h,i,o,l):r(i,o,l)):a4(e,g+3)}function IE(e,n){return Af(e,n)}var Pf=(()=>{class e{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"platform"})}}return e})();var SE=new be("");function ys(e){return!!e&&typeof e.then=="function"}function DE(e){return!!e&&typeof e.subscribe=="function"}var ME=new be(""),TE=(()=>{class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=te(ME,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=i();if(ys(o))t.push(o);else if(DE(o)){let l=new Promise((h,g)=>{o.subscribe({complete:h,error:g})});t.push(l)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),Sa=new be("");function c4(){gw(()=>{throw new fe(600,!1)})}function u4(e){return e.isBoundToModule}var d4=10;function f4(e,n,t){try{let r=t();return ys(r)?r.catch(i=>{throw n.runOutsideAngular(()=>e.handleError(i)),i}):r}catch(r){throw n.runOutsideAngular(()=>e.handleError(r)),r}}var hi=(()=>{class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=te(cR),this.afterRenderManager=te(yk),this.zonelessEnabled=te(Bm),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new rn,this.afterTick=new rn,this.componentTypes=[],this.components=[],this.isStable=te(ps).hasPendingTasks.pipe(je(t=>!t)),this._injector=te(Ir)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}get injector(){return this._injector}bootstrap(t,r){let i=t instanceof Kd;if(!this._injector.get(TE).done){let I=!i&&Xv(t),T=!1;throw new fe(405,T)}let l;i?l=t:l=this._injector.get(ma).resolveComponentFactory(t),this.componentTypes.push(l.componentType);let h=u4(l)?void 0:this._injector.get(yo),g=r||l.selector,m=l.create(ai.NULL,[],g,h),v=m.location.nativeElement,b=m.injector.get(SE,null);return b?.registerApplication(v),m.onDestroy(()=>{this.detachView(m.hostView),Nd(this.components,m),b?.unregisterApplication(v)}),this._loadComponent(m),m}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new fe(101,!1);let t=Ye(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,Ye(t),this.afterTick.next()}}synchronize(){let t=null;this._injector.destroyed||(t=this._injector.get(ya,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<d4;)this.synchronizeOnce(t)}synchronizeOnce(t){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:o}of this._views)h4(i,o,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else t?.begin?.(),t?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>gf(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;Nd(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let r=this._injector.get(Sa,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Nd(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new fe(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function Nd(e,n){let t=e.indexOf(n);t>-1&&e.splice(t,1)}var Sd;function kf(e){Sd??=new WeakMap;let n=Sd.get(e);if(n)return n;let t=e.isStable.pipe(jr(r=>r)).toPromise().then(()=>{});return Sd.set(e,t),e.onDestroy(()=>Sd?.delete(e)),t}function h4(e,n,t,r){if(!t&&!gf(e))return;Yx(e,n,t&&!r?0:1)}var $0=class{constructor(n,t){this.ngModuleFactory=n,this.componentFactories=t}},Wm=(()=>{class e{compileModuleSync(t){return new N0(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=Qv(t),o=_x(i.declarations).reduce((l,h)=>{let g=is(h);return g&&l.push(new jl(g)),l},[]);return new $0(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var p4=(()=>{class e{constructor(){this.zone=te(Qt),this.changeDetectionScheduler=te(ga),this.applicationRef=te(hi)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function g4({ngZoneFactory:e,ignoreChangesOutsideZone:n,scheduleInRootZone:t}){return e??=()=>new Qt(Ue(re({},m4()),{scheduleInRootZone:t})),[{provide:Qt,useFactory:e},{provide:rs,multi:!0,useFactory:()=>{let r=te(p4,{optional:!0});return()=>r.initialize()}},{provide:rs,multi:!0,useFactory:()=>{let r=te(y4);return()=>{r.initialize()}}},n===!0?{provide:tE,useValue:!0}:[],{provide:nE,useValue:t??Ub}]}function m4(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}var y4=(()=>{class e{constructor(){this.subscription=new Ht,this.initialized=!1,this.zone=te(Qt),this.pendingTasks=te(ps)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Qt.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Qt.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var _4=(()=>{class e{constructor(){this.appRef=te(hi),this.taskService=te(ps),this.ngZone=te(Qt),this.zonelessEnabled=te(Bm),this.disableScheduling=te(tE,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new Ht,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get($d):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(te(nE,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof i0||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?av:jb;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get($d+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,av(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function C4(){return typeof $localize<"u"&&$localize.locale||sf}var Gm=new be("",{providedIn:"root",factory:()=>te(Gm,ze.Optional|ze.SkipSelf)||C4()});var AE=new be("");function Dd(e){return!!e.platformInjector}function w4(e){let n=Dd(e)?e.r3Injector:e.moduleRef.injector,t=n.get(Qt);return t.run(()=>{Dd(e)?e.r3Injector.resolveInjectorInitializers():e.moduleRef.resolveInjectorInitializers();let r=n.get(Oi,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:o=>{r.handleError(o)}})}),Dd(e)){let o=()=>n.destroy(),l=e.platformInjector.get(AE);l.add(o),n.onDestroy(()=>{i.unsubscribe(),l.delete(o)})}else e.moduleRef.onDestroy(()=>{Nd(e.allPlatformModules,e.moduleRef),i.unsubscribe()});return f4(r,t,()=>{let o=n.get(TE);return o.runInitializers(),o.donePromise.then(()=>{let l=n.get(Gm,sf);if(Qk(l||sf),Dd(e)){let h=n.get(hi);return e.rootComponent!==void 0&&h.bootstrap(e.rootComponent),h}else return v4(e.moduleRef,e.allPlatformModules),e.moduleRef})})})}function v4(e,n){let t=e.injector.get(hi);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(e.instance.ngDoBootstrap)e.instance.ngDoBootstrap(t);else throw new fe(-403,!1);n.push(e)}var Rd=null;function b4(e=[],n){return ai.create({name:n,providers:[{provide:ff,useValue:"platform"},{provide:AE,useValue:new Set([()=>Rd=null])},...e]})}function x4(e=[]){if(Rd)return Rd;let n=b4(e);return Rd=n,c4(),E4(n),n}function E4(e){e.get(Cm,null)?.forEach(t=>t())}var ji=(()=>{class e{static{this.__NG_ELEMENT_ID__=I4}}return e})();function I4(e){return S4(Hn(),Qe(),(e&16)===16)}function S4(e,n,t){if($l(e)&&!t){let r=_o(e.index,n);return new us(r,r)}else if(e.type&175){let r=n[ur];return new us(r,n)}return null}var q0=class{constructor(){}supports(n){return cE(n)}create(n){return new Y0(n)}},D4=(e,n)=>n,Y0=class{constructor(n){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=n||D4}forEachItem(n){let t;for(t=this._itHead;t!==null;t=t._next)n(t)}forEachOperation(n){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let l=!r||t&&t.currentIndex<Tv(r,i,o)?t:r,h=Tv(l,i,o),g=l.currentIndex;if(l===r)i--,r=r._nextRemoved;else if(t=t._next,l.previousIndex==null)i++;else{o||(o=[]);let m=h-i,v=g-i;if(m!=v){for(let I=0;I<m;I++){let T=I<o.length?o[I]:o[I]=0,P=T+I;v<=P&&P<m&&(o[I]=T+1)}let b=l.previousIndex;o[b]=v-m}}h!==g&&n(l,h,g)}}forEachPreviousItem(n){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)n(t)}forEachAddedItem(n){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)n(t)}forEachMovedItem(n){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)n(t)}forEachRemovedItem(n){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)n(t)}forEachIdentityChange(n){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)n(t)}diff(n){if(n==null&&(n=[]),!cE(n))throw new fe(900,!1);return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let t=this._itHead,r=!1,i,o,l;if(Array.isArray(n)){this.length=n.length;for(let h=0;h<this.length;h++)o=n[h],l=this._trackByFn(h,o),t===null||!Object.is(t.trackById,l)?(t=this._mismatch(t,o,l,h),r=!0):(r&&(t=this._verifyReinsertion(t,o,l,h)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,uk(n,h=>{l=this._trackByFn(i,h),t===null||!Object.is(t.trackById,l)?(t=this._mismatch(t,h,l,i),r=!0):(r&&(t=this._verifyReinsertion(t,h,l,i)),Object.is(t.item,h)||this._addIdentityChange(t,h)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=n,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let n;for(n=this._previousItHead=this._itHead;n!==null;n=n._next)n._nextPrevious=n._next;for(n=this._additionsHead;n!==null;n=n._nextAdded)n.previousIndex=n.currentIndex;for(this._additionsHead=this._additionsTail=null,n=this._movesHead;n!==null;n=n._nextMoved)n.previousIndex=n.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(n,t,r,i){let o;return n===null?o=this._itTail:(o=n._prev,this._remove(n)),n=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),n!==null?(Object.is(n.item,t)||this._addIdentityChange(n,t),this._reinsertAfter(n,o,i)):(n=this._linkedRecords===null?null:this._linkedRecords.get(r,i),n!==null?(Object.is(n.item,t)||this._addIdentityChange(n,t),this._moveAfter(n,o,i)):n=this._addAfter(new Z0(t,r),o,i)),n}_verifyReinsertion(n,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?n=this._reinsertAfter(o,n._prev,i):n.currentIndex!=i&&(n.currentIndex=i,this._addToMoves(n,i)),n}_truncate(n){for(;n!==null;){let t=n._next;this._addToRemovals(this._unlink(n)),n=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(n,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(n);let i=n._prevRemoved,o=n._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(n,t,r),this._addToMoves(n,r),n}_moveAfter(n,t,r){return this._unlink(n),this._insertAfter(n,t,r),this._addToMoves(n,r),n}_addAfter(n,t,r){return this._insertAfter(n,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=n:this._additionsTail=this._additionsTail._nextAdded=n,n}_insertAfter(n,t,r){let i=t===null?this._itHead:t._next;return n._next=i,n._prev=t,i===null?this._itTail=n:i._prev=n,t===null?this._itHead=n:t._next=n,this._linkedRecords===null&&(this._linkedRecords=new af),this._linkedRecords.put(n),n.currentIndex=r,n}_remove(n){return this._addToRemovals(this._unlink(n))}_unlink(n){this._linkedRecords!==null&&this._linkedRecords.remove(n);let t=n._prev,r=n._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,n}_addToMoves(n,t){return n.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=n:this._movesTail=this._movesTail._nextMoved=n),n}_addToRemovals(n){return this._unlinkedRecords===null&&(this._unlinkedRecords=new af),this._unlinkedRecords.put(n),n.currentIndex=null,n._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=n,n._prevRemoved=null):(n._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=n),n}_addIdentityChange(n,t){return n.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=n:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=n,n}},Z0=class{constructor(n,t){this.item=n,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},X0=class{constructor(){this._head=null,this._tail=null}add(n){this._head===null?(this._head=this._tail=n,n._nextDup=null,n._prevDup=null):(this._tail._nextDup=n,n._prevDup=this._tail,n._nextDup=null,this._tail=n)}get(n,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,n))return r;return null}remove(n){let t=n._prevDup,r=n._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},af=class{constructor(){this.map=new Map}put(n){let t=n.trackById,r=this.map.get(t);r||(r=new X0,this.map.set(t,r)),r.add(n)}get(n,t){let r=n,i=this.map.get(r);return i?i.get(n,t):null}remove(n){let t=n.trackById;return this.map.get(t).remove(n)&&this.map.delete(t),n}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function Tv(e,n,t){let r=e.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+n+i}var Q0=class{constructor(){}supports(n){return n instanceof Map||Hm(n)}create(){return new K0}},K0=class{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return this._additionsHead!==null||this._changesHead!==null||this._removalsHead!==null}forEachItem(n){let t;for(t=this._mapHead;t!==null;t=t._next)n(t)}forEachPreviousItem(n){let t;for(t=this._previousMapHead;t!==null;t=t._nextPrevious)n(t)}forEachChangedItem(n){let t;for(t=this._changesHead;t!==null;t=t._nextChanged)n(t)}forEachAddedItem(n){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)n(t)}forEachRemovedItem(n){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)n(t)}diff(n){if(!n)n=new Map;else if(!(n instanceof Map||Hm(n)))throw new fe(900,!1);return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(n,(r,i)=>{if(t&&t.key===i)this._maybeAddToChanges(t,r),this._appendAfter=t,t=t._next;else{let o=this._getOrCreateRecordForKey(i,r);t=this._insertBeforeOrAppend(t,o)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let r=t;r!==null;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(n,t){if(n){let r=n._prev;return t._next=n,t._prev=r,n._prev=t,r&&(r._next=t),n===this._mapHead&&(this._mapHead=t),this._appendAfter=n,n}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(n,t){if(this._records.has(n)){let i=this._records.get(n);this._maybeAddToChanges(i,t);let o=i._prev,l=i._next;return o&&(o._next=l),l&&(l._prev=o),i._next=null,i._prev=null,i}let r=new J0(n);return this._records.set(n,r),r.currentValue=t,this._addToAdditions(r),r}_reset(){if(this.isDirty){let n;for(this._previousMapHead=this._mapHead,n=this._previousMapHead;n!==null;n=n._next)n._nextPrevious=n._next;for(n=this._changesHead;n!==null;n=n._nextChanged)n.previousValue=n.currentValue;for(n=this._additionsHead;n!=null;n=n._nextAdded)n.previousValue=n.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(n,t){Object.is(t,n.currentValue)||(n.previousValue=n.currentValue,n.currentValue=t,this._addToChanges(n))}_addToAdditions(n){this._additionsHead===null?this._additionsHead=this._additionsTail=n:(this._additionsTail._nextAdded=n,this._additionsTail=n)}_addToChanges(n){this._changesHead===null?this._changesHead=this._changesTail=n:(this._changesTail._nextChanged=n,this._changesTail=n)}_forEach(n,t){n instanceof Map?n.forEach(t):Object.keys(n).forEach(r=>t(n[r],r))}},J0=class{constructor(n){this.key=n,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}};function Av(){return new $m([new q0])}var $m=(()=>{class e{static{this.\u0275prov=he({token:e,providedIn:"root",factory:Av})}constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new e(t)}static extend(t){return{provide:e,useFactory:r=>e.create(t,r||Av()),deps:[[e,new tm,new df]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new fe(901,!1)}}return e})();function Ov(){return new qm([new Q0])}var qm=(()=>{class e{static{this.\u0275prov=he({token:e,providedIn:"root",factory:Ov})}constructor(t){this.factories=t}static create(t,r){if(r){let i=r.factories.slice();t=t.concat(i)}return new e(t)}static extend(t){return{provide:e,useFactory:r=>e.create(t,r||Ov()),deps:[[e,new tm,new df]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r)return r;throw new fe(901,!1)}}return e})();function OE(e){try{let{rootComponent:n,appProviders:t,platformProviders:r}=e,i=x4(r),o=[g4({}),{provide:ga,useExisting:_4},...t||[]],l=new tf({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1});return w4({r3Injector:l.injector,platformInjector:i,rootComponent:n})}catch(n){return Promise.reject(n)}}var Nv=!1;function M4(){Nv||(Nv=!0,TR(),$k(),t4(),Zk(),mk(),G3(),S3(),MP())}function T4(e,n){return kf(e)}function NE(){return Ca([{provide:wd,useFactory:()=>{let e=!0;return xd()&&(e=!!te(xa,{optional:!0})?.get(ex,null)),e&&Vi("NgHydration"),e}},{provide:rs,useValue:()=>{C3(!1),xd()&&te(wd)&&(A4(),M4())},multi:!0},{provide:ix,useFactory:()=>xd()&&te(wd)},{provide:Sa,useFactory:()=>{if(xd()&&te(wd)){let e=te(hi),n=te(ai);return()=>{T4(e,n).then(()=>{x3(e)})}}return()=>{}},multi:!0}])}function A4(){let e=Cf(),n;for(let t of e.body.childNodes)if(t.nodeType===Node.COMMENT_NODE&&t.textContent?.trim()===DR){n=t;break}if(!n)throw new fe(-507,!1)}function rc(e){return typeof e=="boolean"?e:e!=null&&e!=="false"}function ic(e,n){Vi("NgSignals");let t=fw(e);return n?.equal&&(t[Ii].equal=n.equal),t}function Hi(e){let n=Ye(null);try{return e()}finally{Ye(n)}}var LE=null;function zi(){return LE}function BE(e){LE??=e}var Ff=class{};var Jn=new be(""),UE=(()=>{class e{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=he({token:e,factory:()=>te(R4),providedIn:"platform"})}}return e})();var R4=(()=>{class e extends UE{constructor(){super(),this._doc=te(Jn),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return zi().getBaseHref(this._doc)}onPopState(t){let r=zi().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=zi().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=he({token:e,factory:()=>new e,providedIn:"platform"})}}return e})();function VE(e,n){if(e.length==0)return n;if(n.length==0)return e;let t=0;return e.endsWith("/")&&t++,n.startsWith("/")&&t++,t==2?e+n.substring(1):t==1?e+n:e+"/"+n}function RE(e){let n=e.match(/#|\?|$/),t=n&&n.index||e.length,r=t-(e[t-1]==="/"?1:0);return e.slice(0,r)+e.slice(t)}function _s(e){return e&&e[0]!=="?"?"?"+e:e}var Bf=(()=>{class e{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=he({token:e,factory:()=>te(jE),providedIn:"root"})}}return e})(),P4=new be(""),jE=(()=>{class e extends Bf{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??te(Jn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return VE(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+_s(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let l=this.prepareExternalUrl(i+_s(o));this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,o){let l=this.prepareExternalUrl(i+_s(o));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||e)(We(UE),We(P4,8))}}static{this.\u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var oc=(()=>{class e{constructor(t){this._subject=new Bt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=L4(RE(PE(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+_s(r))}normalize(t){return e.stripTrailingSlash(F4(this._basePath,PE(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+_s(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+_s(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=_s}static{this.joinWithSlash=VE}static{this.stripTrailingSlash=RE}static{this.\u0275fac=function(r){return new(r||e)(We(Bf))}}static{this.\u0275prov=he({token:e,factory:()=>k4(),providedIn:"root"})}}return e})();function k4(){return new oc(We(Bf))}function F4(e,n){if(!e||!n.startsWith(e))return n;let t=n.substring(e.length);return t===""||["/",";","?","#"].includes(t[0])?t:n}function PE(e){return e.replace(/\/index.html$/,"")}function L4(e){if(new RegExp("^(https?:)?//").test(e)){let[,t]=e.split(/\/\/[^\/]+/);return t}return e}function Qm(e,n){n=encodeURIComponent(n);for(let t of e.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===n)return decodeURIComponent(o)}return null}var Ym=class{constructor(n,t,r,i){this.$implicit=n,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Da=(()=>{class e{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;if(!this._differ&&t)if(0)try{}catch{}else this._differ=this._differs.find(t).create(this.ngForTrackBy)}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,l)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Ym(i.item,this._ngForOf,-1,-1),l===null?void 0:l);else if(l==null)r.remove(o===null?void 0:o);else if(o!==null){let h=r.get(o);r.move(h,l),kE(h,i)}});for(let i=0,o=r.length;i<o;i++){let h=r.get(i).context;h.index=i,h.count=o,h.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);kE(o,i)})}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||e)(W(vo),W(ds),W($m))}}static{this.\u0275dir=zt({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return e})();function kE(e,n){e.context.$implicit=n.item}var pi=(()=>{class e{constructor(t,r){this._viewContainer=t,this._context=new Zm,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){FE("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){FE("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||e)(W(vo),W(ds))}}static{this.\u0275dir=zt({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return e})(),Zm=class{constructor(){this.$implicit=null,this.ngIf=null}};function FE(e,n){if(!!!(!n||n.createEmbeddedView))throw new Error(`${e} must be a TemplateRef, but received '${jn(n)}'.`)}var Eo=(()=>{class e{constructor(t,r,i){this._ngEl=t,this._differs=r,this._renderer=i,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){let t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,r){let[i,o]=t.split("."),l=i.indexOf("-")===-1?void 0:li.DashCase;r!=null?this._renderer.setStyle(this._ngEl.nativeElement,i,o?`${r}${o}`:r,l):this._renderer.removeStyle(this._ngEl.nativeElement,i,l)}_applyChanges(t){t.forEachRemovedItem(r=>this._setStyle(r.key,null)),t.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}static{this.\u0275fac=function(r){return new(r||e)(W(fr),W(qm),W(Xr))}}static{this.\u0275dir=zt({type:e,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0})}}return e})();var En=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=Pi({type:e})}static{this.\u0275inj=Ri({})}}return e})(),HE="browser",B4="server";function sc(e){return e===B4}var Lf=class{};var Vf=class e{constructor(n){this.normalizedNames=new Map,this.lazyUpdate=null,n?typeof n=="string"?this.lazyInit=()=>{this.headers=new Map,n.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),o=i.toLowerCase(),l=t.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(l):this.headers.set(o,[l])}})}:typeof Headers<"u"&&n instanceof Headers?(this.headers=new Map,n.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(n).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(n){return this.init(),this.headers.has(n.toLowerCase())}get(n){this.init();let t=this.headers.get(n.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(n){return this.init(),this.headers.get(n.toLowerCase())||null}append(n,t){return this.clone({name:n,value:t,op:"a"})}set(n,t){return this.clone({name:n,value:t,op:"s"})}delete(n,t){return this.clone({name:n,value:t,op:"d"})}maybeSetNormalizedName(n,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,n)}init(){this.lazyInit&&(this.lazyInit instanceof e?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(n=>this.applyUpdate(n)),this.lazyUpdate=null))}copyFrom(n){n.init(),Array.from(n.headers.keys()).forEach(t=>{this.headers.set(t,n.headers.get(t)),this.normalizedNames.set(t,n.normalizedNames.get(t))})}clone(n){let t=new e;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof e?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([n]),t}applyUpdate(n){let t=n.name.toLowerCase();switch(n.op){case"a":case"s":let r=n.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(n.name,t);let i=(n.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let o=n.value;if(!o)this.headers.delete(t),this.normalizedNames.delete(t);else{let l=this.headers.get(t);if(!l)return;l=l.filter(h=>o.indexOf(h)===-1),l.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,l)}break}}setHeaderEntries(n,t){let r=(Array.isArray(t)?t:[t]).map(o=>o.toString()),i=n.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(n,i)}forEach(n){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>n(this.normalizedNames.get(t),this.headers.get(t)))}};var XE=function(e){return e[e.Sent=0]="Sent",e[e.UploadProgress=1]="UploadProgress",e[e.ResponseHeader=2]="ResponseHeader",e[e.DownloadProgress=3]="DownloadProgress",e[e.Response=4]="Response",e[e.User=5]="User",e}(XE||{}),Km=class{constructor(n,t=200,r="OK"){this.headers=n.headers||new Vf,this.status=n.status!==void 0?n.status:t,this.statusText=n.statusText||r,this.url=n.url||null,this.ok=this.status>=200&&this.status<300}};var jf=class e extends Km{constructor(n={}){super(n),this.type=XE.Response,this.body=n.body!==void 0?n.body:null}clone(n={}){return new e({body:n.body!==void 0?n.body:this.body,headers:n.headers||this.headers,status:n.status!==void 0?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}};var U4=new be("");var V4=new be(""),zE="b",WE="h",GE="s",$E="st",qE="u",YE="rt",Uf=new be(""),j4=["GET","HEAD"];function H4(e,n){let T=te(Uf),{isCacheActive:t}=T,r=nw(T,["isCacheActive"]),{transferCache:i,method:o}=e;if(!t||i===!1||o==="POST"&&!r.includePostRequests&&!i||o!=="POST"&&!j4.includes(o)||!r.includeRequestsWithAuthHeaders&&z4(e)||r.filter?.(e)===!1)return n(e);let l=te(xa),h=te(V4,{optional:!0}),g=sc(te(fi));if(h&&!g)throw new fe(2803,!1);let m=g&&h?q4(e.url,h):e.url,v=G4(e,m),b=l.get(v,null),I=r.includeHeaders;if(typeof i=="object"&&i.includeHeaders&&(I=i.includeHeaders),b){let{[zE]:P,[YE]:z,[WE]:Z,[GE]:q,[$E]:ce,[qE]:Ke}=b,ye=P;switch(z){case"arraybuffer":ye=new TextEncoder().encode(P).buffer;break;case"blob":ye=new Blob([P]);break}let G=new Vf(Z);return Oe(new jf({body:ye,headers:G,status:q,statusText:ce,url:Ke}))}return n(e).pipe(sn(P=>{P instanceof jf&&g&&l.set(v,{[zE]:P.body,[WE]:W4(P.headers,I),[GE]:P.status,[$E]:P.statusText,[qE]:m,[YE]:e.responseType})}))}function z4(e){return e.headers.has("authorization")||e.headers.has("proxy-authorization")}function W4(e,n){if(!n)return{};let t={};for(let r of n){let i=e.getAll(r);i!==null&&(t[r]=i)}return t}function ZE(e){return[...e.keys()].sort().map(n=>`${n}=${e.getAll(n)}`).join("&")}function G4(e,n){let{params:t,method:r,responseType:i}=e,o=ZE(t),l=e.serializeBody();l instanceof URLSearchParams?l=ZE(l):typeof l!="string"&&(l="");let h=[r,i,n,l,o].join("|"),g=$4(h);return g}function $4(e){let n=0;for(let t of e)n=Math.imul(31,n)+t.charCodeAt(0)<<0;return n+=2147483648,n.toString()}function QE(e){return[{provide:Uf,useFactory:()=>(Vi("NgHttpTransferCache"),re({isCacheActive:!0},e))},{provide:U4,useValue:H4,multi:!0,deps:[xa,Uf]},{provide:Sa,multi:!0,useFactory:()=>{let n=te(hi),t=te(Uf);return()=>{kf(n).then(()=>{t.isCacheActive=!1})}}}]}function q4(e,n){let t=new URL(e,"resolve://").origin,r=n[t];return r?e.replace(t,r):e}var t1=class extends Ff{constructor(){super(...arguments),this.supportsDOMEvents=!0}},n1=class e extends t1{static makeCurrent(){BE(new e)}onAndCancel(n,t,r){return n.addEventListener(t,r),()=>{n.removeEventListener(t,r)}}dispatchEvent(n,t){n.dispatchEvent(t)}remove(n){n.remove()}createElement(n,t){return t=t||this.getDefaultDocument(),t.createElement(n)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(n){return n.nodeType===Node.ELEMENT_NODE}isShadowRoot(n){return n instanceof DocumentFragment}getGlobalEventTarget(n,t){return t==="window"?window:t==="document"?n:t==="body"?n.body:null}getBaseHref(n){let t=Y4();return t==null?null:Z4(t)}resetBaseElement(){ac=null}getUserAgent(){return window.navigator.userAgent}getCookie(n){return Qm(document.cookie,n)}},ac=null;function Y4(){return ac=ac||document.querySelector("base"),ac?ac.getAttribute("href"):null}function Z4(e){return new URL(e,document.baseURI).pathname}var X4=(()=>{class e{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=he({token:e,factory:e.\u0275fac})}}return e})(),r1=new be(""),tI=(()=>{class e{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new fe(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||e)(We(r1),We(Qt))}}static{this.\u0275prov=he({token:e,factory:e.\u0275fac})}}return e})(),Hf=class{constructor(n){this._doc=n}},Jm="ng-app-id",nI=(()=>{class e{constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=sc(o),this.resetHostNodes()}addStyles(t){for(let r of t)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(t){for(let r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){let r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${Jm}="${this.appId}"]`);if(t?.length){let r=new Map;return t.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){let i=this.styleRef;if(i.has(t)){let o=i.get(t);return o.usage+=r,o.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){let i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===t)return i.delete(r),o.removeAttribute(Jm),o;{let l=this.doc.createElement("style");return this.nonce&&l.setAttribute("nonce",this.nonce),l.textContent=r,this.platformIsServer&&l.setAttribute(Jm,this.appId),t.appendChild(l),l}}addStyleToHost(t,r){let i=this.getStyleElement(t,r),o=this.styleRef,l=o.get(r)?.elements;l?l.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||e)(We(Jn),We(wf),We(wm,8),We(fi))}}static{this.\u0275prov=he({token:e,factory:e.\u0275fac})}}return e})(),e1={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},s1=/%COMP%/g,rI="%COMP%",Q4=`_nghost-${rI}`,K4=`_ngcontent-${rI}`,J4=!0,e8=new be("",{providedIn:"root",factory:()=>J4});function t8(e){return K4.replace(s1,e)}function n8(e){return Q4.replace(s1,e)}function iI(e,n){return n.map(t=>t.replace(s1,e))}var KE=(()=>{class e{constructor(t,r,i,o,l,h,g,m=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=l,this.platformId=h,this.ngZone=g,this.nonce=m,this.rendererByCompId=new Map,this.platformIsServer=sc(h),this.defaultRenderer=new lc(t,l,g,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===si.ShadowDom&&(r=Ue(re({},r),{encapsulation:si.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof zf?i.applyToHost(t):i instanceof cc&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let l=this.doc,h=this.ngZone,g=this.eventManager,m=this.sharedStylesHost,v=this.removeStylesOnCompDestroy,b=this.platformIsServer;switch(r.encapsulation){case si.Emulated:o=new zf(g,m,r,this.appId,v,l,h,b);break;case si.ShadowDom:return new i1(g,m,t,r,l,h,this.nonce,b);default:o=new cc(g,m,r,v,l,h,b);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||e)(We(tI),We(nI),We(wf),We(e8),We(Jn),We(fi),We(Qt),We(wm))}}static{this.\u0275prov=he({token:e,factory:e.\u0275fac})}}return e})(),lc=class{constructor(n,t,r,i){this.eventManager=n,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(n,t){return t?this.doc.createElementNS(e1[t]||t,n):this.doc.createElement(n)}createComment(n){return this.doc.createComment(n)}createText(n){return this.doc.createTextNode(n)}appendChild(n,t){(JE(n)?n.content:n).appendChild(t)}insertBefore(n,t,r){n&&(JE(n)?n.content:n).insertBefore(t,r)}removeChild(n,t){t.remove()}selectRootElement(n,t){let r=typeof n=="string"?this.doc.querySelector(n):n;if(!r)throw new fe(-5104,!1);return t||(r.textContent=""),r}parentNode(n){return n.parentNode}nextSibling(n){return n.nextSibling}setAttribute(n,t,r,i){if(i){t=i+":"+t;let o=e1[i];o?n.setAttributeNS(o,t,r):n.setAttribute(t,r)}else n.setAttribute(t,r)}removeAttribute(n,t,r){if(r){let i=e1[r];i?n.removeAttributeNS(i,t):n.removeAttribute(`${r}:${t}`)}else n.removeAttribute(t)}addClass(n,t){n.classList.add(t)}removeClass(n,t){n.classList.remove(t)}setStyle(n,t,r,i){i&(li.DashCase|li.Important)?n.style.setProperty(t,r,i&li.Important?"important":""):n.style[t]=r}removeStyle(n,t,r){r&li.DashCase?n.style.removeProperty(t):n.style[t]=""}setProperty(n,t,r){n!=null&&(n[t]=r)}setValue(n,t){n.nodeValue=t}listen(n,t,r){if(typeof n=="string"&&(n=zi().getGlobalEventTarget(this.doc,n),!n))throw new Error(`Unsupported event target ${n} for event ${t}`);return this.eventManager.addEventListener(n,t,this.decoratePreventDefault(r))}decoratePreventDefault(n){return t=>{if(t==="__ngUnwrap__")return n;(this.platformIsServer?this.ngZone.runGuarded(()=>n(t)):n(t))===!1&&t.preventDefault()}}};function JE(e){return e.tagName==="TEMPLATE"&&e.content!==void 0}var i1=class extends lc{constructor(n,t,r,i,o,l,h,g){super(n,o,l,g),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let m=iI(i.id,i.styles);for(let v of m){let b=document.createElement("style");h&&b.setAttribute("nonce",h),b.textContent=v,this.shadowRoot.appendChild(b)}}nodeOrShadowRoot(n){return n===this.hostEl?this.shadowRoot:n}appendChild(n,t){return super.appendChild(this.nodeOrShadowRoot(n),t)}insertBefore(n,t,r){return super.insertBefore(this.nodeOrShadowRoot(n),t,r)}removeChild(n,t){return super.removeChild(null,t)}parentNode(n){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(n)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},cc=class extends lc{constructor(n,t,r,i,o,l,h,g){super(n,o,l,h),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=g?iI(g,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},zf=class extends cc{constructor(n,t,r,i,o,l,h,g){let m=i+"-"+r.id;super(n,t,r,o,l,h,g,m),this.contentAttr=t8(m),this.hostAttr=n8(m)}applyToHost(n){this.applyStyles(),this.setAttribute(n,this.hostAttr,"")}createElement(n,t){let r=super.createElement(n,t);return super.setAttribute(r,this.contentAttr,""),r}},r8=(()=>{class e extends Hf{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||e)(We(Jn))}}static{this.\u0275prov=he({token:e,factory:e.\u0275fac})}}return e})(),eI=["alt","control","meta","shift"],i8={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},o8={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey},s8=(()=>{class e extends Hf{constructor(t){super(t)}supports(t){return e.parseEventName(t)!=null}addEventListener(t,r,i){let o=e.parseEventName(r),l=e.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>zi().onAndCancel(t,o.domEventName,l))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=e._normalizeKey(r.pop()),l="",h=r.indexOf("code");if(h>-1&&(r.splice(h,1),l="code."),eI.forEach(m=>{let v=r.indexOf(m);v>-1&&(r.splice(v,1),l+=m+".")}),l+=o,r.length!=0||o.length===0)return null;let g={};return g.domEventName=i,g.fullKey=l,g}static matchEventFullKeyCode(t,r){let i=i8[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),eI.forEach(l=>{if(l!==i){let h=o8[l];h(t)&&(o+=l+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{e.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(r){return new(r||e)(We(Jn))}}static{this.\u0275prov=he({token:e,factory:e.\u0275fac})}}return e})();function oI(e,n){return OE(re({rootComponent:e},a8(n)))}function a8(e){return{appProviders:[...f8,...e?.providers??[]],platformProviders:d8}}function l8(){n1.makeCurrent()}function c8(){return new Oi}function u8(){return Zb(document),document}var d8=[{provide:fi,useValue:HE},{provide:Cm,useValue:l8,multi:!0},{provide:Jn,useFactory:u8,deps:[]}];var f8=[{provide:ff,useValue:"root"},{provide:Oi,useFactory:c8,deps:[]},{provide:r1,useClass:r8,multi:!0,deps:[Jn,Qt,fi]},{provide:r1,useClass:s8,multi:!0,deps:[Jn]},KE,nI,tI,{provide:ya,useExisting:KE},{provide:Lf,useClass:X4,deps:[]},[]];var sI=(()=>{class e{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||e)(We(Jn))}}static{this.\u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var a1=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=he({token:e,factory:function(r){let i=null;return r?i=new(r||e):i=We(h8),i},providedIn:"root"})}}return e})(),h8=(()=>{class e extends a1{constructor(t){super(),this._doc=t}sanitize(t,r){if(r==null)return null;switch(t){case wo.NONE:return r;case wo.HTML:return Ea(r,"HTML")?Bi(r):mx(this._doc,String(r)).toString();case wo.STYLE:return Ea(r,"Style")?Bi(r):r;case wo.SCRIPT:if(Ea(r,"Script"))return Bi(r);throw new fe(5200,!1);case wo.URL:return Ea(r,"URL")?Bi(r):Em(String(r));case wo.RESOURCE_URL:if(Ea(r,"ResourceURL"))return Bi(r);throw new fe(5201,!1);default:throw new fe(5202,!1)}}bypassSecurityTrustHtml(t){return sx(t)}bypassSecurityTrustStyle(t){return ax(t)}bypassSecurityTrustScript(t){return lx(t)}bypassSecurityTrustUrl(t){return cx(t)}bypassSecurityTrustResourceUrl(t){return ux(t)}static{this.\u0275fac=function(r){return new(r||e)(We(Jn))}}static{this.\u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),o1=function(e){return e[e.NoHttpTransferCache=0]="NoHttpTransferCache",e[e.HttpTransferCacheOptions=1]="HttpTransferCacheOptions",e[e.I18nSupport=2]="I18nSupport",e[e.EventReplay=3]="EventReplay",e}(o1||{});function aI(...e){let n=[],t=new Set,r=t.has(o1.HttpTransferCacheOptions);for(let{\u0275providers:i,\u0275kind:o}of e)t.add(o),i.length&&n.push(i);return Ca([[],NE(),t.has(o1.NoHttpTransferCache)||r?[]:QE({}),n])}var Fe="primary",Sc=Symbol("RouteTitle"),f1=class{constructor(n){this.params=n||{}}has(n){return Object.prototype.hasOwnProperty.call(this.params,n)}get(n){if(this.has(n)){let t=this.params[n];return Array.isArray(t)?t[0]:t}return null}getAll(n){if(this.has(n)){let t=this.params[n];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Ra(e){return new f1(e)}function p8(e,n,t){let r=t.path.split("/");if(r.length>e.length||t.pathMatch==="full"&&(n.hasChildren()||r.length<e.length))return null;let i={};for(let o=0;o<r.length;o++){let l=r[o],h=e[o];if(l[0]===":")i[l.substring(1)]=h;else if(l!==h.path)return null}return{consumed:e.slice(0,r.length),posParams:i}}function g8(e,n){if(e.length!==n.length)return!1;for(let t=0;t<e.length;++t)if(!gi(e[t],n[t]))return!1;return!0}function gi(e,n){let t=e?h1(e):void 0,r=n?h1(n):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!mI(e[i],n[i]))return!1;return!0}function h1(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}function mI(e,n){if(Array.isArray(e)&&Array.isArray(n)){if(e.length!==n.length)return!1;let t=[...e].sort(),r=[...n].sort();return t.every((i,o)=>r[o]===i)}else return e===n}function yI(e){return e.length>0?e[e.length-1]:null}function Io(e){return pg(e)?e:ys(e)?Dt(Promise.resolve(e)):Oe(e)}var m8={exact:CI,subset:wI},_I={exact:y8,subset:_8,ignored:()=>!0};function cI(e,n,t){return m8[t.paths](e.root,n.root,t.matrixParams)&&_I[t.queryParams](e.queryParams,n.queryParams)&&!(t.fragment==="exact"&&e.fragment!==n.fragment)}function y8(e,n){return gi(e,n)}function CI(e,n,t){if(!vs(e.segments,n.segments)||!$f(e.segments,n.segments,t)||e.numberOfChildren!==n.numberOfChildren)return!1;for(let r in n.children)if(!e.children[r]||!CI(e.children[r],n.children[r],t))return!1;return!0}function _8(e,n){return Object.keys(n).length<=Object.keys(e).length&&Object.keys(n).every(t=>mI(e[t],n[t]))}function wI(e,n,t){return vI(e,n,n.segments,t)}function vI(e,n,t,r){if(e.segments.length>t.length){let i=e.segments.slice(0,t.length);return!(!vs(i,t)||n.hasChildren()||!$f(i,t,r))}else if(e.segments.length===t.length){if(!vs(e.segments,t)||!$f(e.segments,t,r))return!1;for(let i in n.children)if(!e.children[i]||!wI(e.children[i],n.children[i],r))return!1;return!0}else{let i=t.slice(0,e.segments.length),o=t.slice(e.segments.length);return!vs(e.segments,i)||!$f(e.segments,i,r)||!e.children[Fe]?!1:vI(e.children[Fe],n,o,r)}}function $f(e,n,t){return n.every((r,i)=>_I[t](e[i].parameters,r.parameters))}var Gi=class{constructor(n=new yt([],{}),t={},r=null){this.root=n,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Ra(this.queryParams),this._queryParamMap}toString(){return v8.serialize(this)}},yt=class{constructor(n,t){this.segments=n,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return qf(this)}},ws=class{constructor(n,t){this.path=n,this.parameters=t}get parameterMap(){return this._parameterMap??=Ra(this.parameters),this._parameterMap}toString(){return xI(this)}};function C8(e,n){return vs(e,n)&&e.every((t,r)=>gi(t.parameters,n[r].parameters))}function vs(e,n){return e.length!==n.length?!1:e.every((t,r)=>t.path===n[r].path)}function w8(e,n){let t=[];return Object.entries(e.children).forEach(([r,i])=>{r===Fe&&(t=t.concat(n(i,r)))}),Object.entries(e.children).forEach(([r,i])=>{r!==Fe&&(t=t.concat(n(i,r)))}),t}var U1=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=he({token:e,factory:()=>new mc,providedIn:"root"})}}return e})(),mc=class{parse(n){let t=new g1(n);return new Gi(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(n){let t=`/${uc(n.root,!0)}`,r=E8(n.queryParams),i=typeof n.fragment=="string"?`#${b8(n.fragment)}`:"";return`${t}${r}${i}`}},v8=new mc;function qf(e){return e.segments.map(n=>xI(n)).join("/")}function uc(e,n){if(!e.hasChildren())return qf(e);if(n){let t=e.children[Fe]?uc(e.children[Fe],!1):"",r=[];return Object.entries(e.children).forEach(([i,o])=>{i!==Fe&&r.push(`${i}:${uc(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=w8(e,(r,i)=>i===Fe?[uc(e.children[Fe],!1)]:[`${i}:${uc(r,!1)}`]);return Object.keys(e.children).length===1&&e.children[Fe]!=null?`${qf(e)}/${t[0]}`:`${qf(e)}/(${t.join("//")})`}}function bI(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Wf(e){return bI(e).replace(/%3B/gi,";")}function b8(e){return encodeURI(e)}function p1(e){return bI(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Yf(e){return decodeURIComponent(e)}function uI(e){return Yf(e.replace(/\+/g,"%20"))}function xI(e){return`${p1(e.path)}${x8(e.parameters)}`}function x8(e){return Object.entries(e).map(([n,t])=>`;${p1(n)}=${p1(t)}`).join("")}function E8(e){let n=Object.entries(e).map(([t,r])=>Array.isArray(r)?r.map(i=>`${Wf(t)}=${Wf(i)}`).join("&"):`${Wf(t)}=${Wf(r)}`).filter(t=>t);return n.length?`?${n.join("&")}`:""}var I8=/^[^\/()?;#]+/;function l1(e){let n=e.match(I8);return n?n[0]:""}var S8=/^[^\/()?;=#]+/;function D8(e){let n=e.match(S8);return n?n[0]:""}var M8=/^[^=?&#]+/;function T8(e){let n=e.match(M8);return n?n[0]:""}var A8=/^[^&#]+/;function O8(e){let n=e.match(A8);return n?n[0]:""}var g1=class{constructor(n){this.url=n,this.remaining=n}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new yt([],{}):new yt([],this.parseChildren())}parseQueryParams(){let n={};if(this.consumeOptional("?"))do this.parseQueryParam(n);while(this.consumeOptional("&"));return n}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let n=[];for(this.peekStartsWith("(")||n.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),n.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(n.length>0||Object.keys(t).length>0)&&(r[Fe]=new yt(n,t)),r}parseSegment(){let n=l1(this.remaining);if(n===""&&this.peekStartsWith(";"))throw new fe(4009,!1);return this.capture(n),new ws(Yf(n),this.parseMatrixParams())}parseMatrixParams(){let n={};for(;this.consumeOptional(";");)this.parseParam(n);return n}parseParam(n){let t=D8(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=l1(this.remaining);i&&(r=i,this.capture(r))}n[Yf(t)]=Yf(r)}parseQueryParam(n){let t=T8(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let l=O8(this.remaining);l&&(r=l,this.capture(r))}let i=uI(t),o=uI(r);if(n.hasOwnProperty(i)){let l=n[i];Array.isArray(l)||(l=[l],n[i]=l),l.push(o)}else n[i]=o}parseParens(n){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=l1(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new fe(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):n&&(o=Fe);let l=this.parseChildren();t[o]=Object.keys(l).length===1?l[Fe]:new yt([],l),this.consumeOptional("//")}return t}peekStartsWith(n){return this.remaining.startsWith(n)}consumeOptional(n){return this.peekStartsWith(n)?(this.remaining=this.remaining.substring(n.length),!0):!1}capture(n){if(!this.consumeOptional(n))throw new fe(4011,!1)}};function EI(e){return e.segments.length>0?new yt([],{[Fe]:e}):e}function II(e){let n={};for(let[r,i]of Object.entries(e.children)){let o=II(i);if(r===Fe&&o.segments.length===0&&o.hasChildren())for(let[l,h]of Object.entries(o.children))n[l]=h;else(o.segments.length>0||o.hasChildren())&&(n[r]=o)}let t=new yt(e.segments,n);return N8(t)}function N8(e){if(e.numberOfChildren===1&&e.children[Fe]){let n=e.children[Fe];return new yt(e.segments.concat(n.segments),n.children)}return e}function yc(e){return e instanceof Gi}function R8(e,n,t=null,r=null){let i=SI(e);return DI(i,n,t,r)}function SI(e){let n;function t(o){let l={};for(let g of o.children){let m=t(g);l[g.outlet]=m}let h=new yt(o.url,l);return o===e&&(n=h),h}let r=t(e.root),i=EI(r);return n??i}function DI(e,n,t,r){let i=e;for(;i.parent;)i=i.parent;if(n.length===0)return c1(i,i,i,t,r);let o=P8(n);if(o.toRoot())return c1(i,i,new yt([],{}),t,r);let l=k8(o,i,e),h=l.processChildren?hc(l.segmentGroup,l.index,o.commands):TI(l.segmentGroup,l.index,o.commands);return c1(i,l.segmentGroup,h,t,r)}function Zf(e){return typeof e=="object"&&e!=null&&!e.outlets&&!e.segmentPath}function _c(e){return typeof e=="object"&&e!=null&&e.outlets}function c1(e,n,t,r,i){let o={};r&&Object.entries(r).forEach(([g,m])=>{o[g]=Array.isArray(m)?m.map(v=>`${v}`):`${m}`});let l;e===n?l=t:l=MI(e,n,t);let h=EI(II(l));return new Gi(h,o,i)}function MI(e,n,t){let r={};return Object.entries(e.children).forEach(([i,o])=>{o===n?r[i]=t:r[i]=MI(o,n,t)}),new yt(e.segments,r)}var Xf=class{constructor(n,t,r){if(this.isAbsolute=n,this.numberOfDoubleDots=t,this.commands=r,n&&r.length>0&&Zf(r[0]))throw new fe(4003,!1);let i=r.find(_c);if(i&&i!==yI(r))throw new fe(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function P8(e){if(typeof e[0]=="string"&&e.length===1&&e[0]==="/")return new Xf(!0,0,e);let n=0,t=!1,r=e.reduce((i,o,l)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let h={};return Object.entries(o.outlets).forEach(([g,m])=>{h[g]=typeof m=="string"?m.split("/"):m}),[...i,{outlets:h}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:l===0?(o.split("/").forEach((h,g)=>{g==0&&h==="."||(g==0&&h===""?t=!0:h===".."?n++:h!=""&&i.push(h))}),i):[...i,o]},[]);return new Xf(t,n,r)}var Aa=class{constructor(n,t,r){this.segmentGroup=n,this.processChildren=t,this.index=r}};function k8(e,n,t){if(e.isAbsolute)return new Aa(n,!0,0);if(!t)return new Aa(n,!1,NaN);if(t.parent===null)return new Aa(t,!0,0);let r=Zf(e.commands[0])?0:1,i=t.segments.length-1+r;return F8(t,i,e.numberOfDoubleDots)}function F8(e,n,t){let r=e,i=n,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new fe(4005,!1);i=r.segments.length}return new Aa(r,!1,i-o)}function L8(e){return _c(e[0])?e[0].outlets:{[Fe]:e}}function TI(e,n,t){if(e??=new yt([],{}),e.segments.length===0&&e.hasChildren())return hc(e,n,t);let r=B8(e,n,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){let o=new yt(e.segments.slice(0,r.pathIndex),{});return o.children[Fe]=new yt(e.segments.slice(r.pathIndex),e.children),hc(o,0,i)}else return r.match&&i.length===0?new yt(e.segments,{}):r.match&&!e.hasChildren()?m1(e,n,t):r.match?hc(e,0,i):m1(e,n,t)}function hc(e,n,t){if(t.length===0)return new yt(e.segments,{});{let r=L8(t),i={};if(Object.keys(r).some(o=>o!==Fe)&&e.children[Fe]&&e.numberOfChildren===1&&e.children[Fe].segments.length===0){let o=hc(e.children[Fe],n,t);return new yt(e.segments,o.children)}return Object.entries(r).forEach(([o,l])=>{typeof l=="string"&&(l=[l]),l!==null&&(i[o]=TI(e.children[o],n,l))}),Object.entries(e.children).forEach(([o,l])=>{r[o]===void 0&&(i[o]=l)}),new yt(e.segments,i)}}function B8(e,n,t){let r=0,i=n,o={match:!1,pathIndex:0,commandIndex:0};for(;i<e.segments.length;){if(r>=t.length)return o;let l=e.segments[i],h=t[r];if(_c(h))break;let g=`${h}`,m=r<t.length-1?t[r+1]:null;if(i>0&&g===void 0)break;if(g&&m&&typeof m=="object"&&m.outlets===void 0){if(!fI(g,m,l))return o;r+=2}else{if(!fI(g,{},l))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function m1(e,n,t){let r=e.segments.slice(0,n),i=0;for(;i<t.length;){let o=t[i];if(_c(o)){let g=U8(o.outlets);return new yt(r,g)}if(i===0&&Zf(t[0])){let g=e.segments[n];r.push(new ws(g.path,dI(t[0]))),i++;continue}let l=_c(o)?o.outlets[Fe]:`${o}`,h=i<t.length-1?t[i+1]:null;l&&h&&Zf(h)?(r.push(new ws(l,dI(h))),i+=2):(r.push(new ws(l,{})),i++)}return new yt(r,{})}function U8(e){let n={};return Object.entries(e).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(n[t]=m1(new yt([],{}),0,r))}),n}function dI(e){let n={};return Object.entries(e).forEach(([t,r])=>n[t]=`${r}`),n}function fI(e,n,t){return e==t.path&&gi(n,t.parameters)}var pc="imperative",In=function(e){return e[e.NavigationStart=0]="NavigationStart",e[e.NavigationEnd=1]="NavigationEnd",e[e.NavigationCancel=2]="NavigationCancel",e[e.NavigationError=3]="NavigationError",e[e.RoutesRecognized=4]="RoutesRecognized",e[e.ResolveStart=5]="ResolveStart",e[e.ResolveEnd=6]="ResolveEnd",e[e.GuardsCheckStart=7]="GuardsCheckStart",e[e.GuardsCheckEnd=8]="GuardsCheckEnd",e[e.RouteConfigLoadStart=9]="RouteConfigLoadStart",e[e.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",e[e.ChildActivationStart=11]="ChildActivationStart",e[e.ChildActivationEnd=12]="ChildActivationEnd",e[e.ActivationStart=13]="ActivationStart",e[e.ActivationEnd=14]="ActivationEnd",e[e.Scroll=15]="Scroll",e[e.NavigationSkipped=16]="NavigationSkipped",e}(In||{}),Dr=class{constructor(n,t){this.id=n,this.url=t}},Cc=class extends Dr{constructor(n,t,r="imperative",i=null){super(n,t),this.type=In.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},bs=class extends Dr{constructor(n,t,r){super(n,t),this.urlAfterRedirects=r,this.type=In.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},mr=function(e){return e[e.Redirect=0]="Redirect",e[e.SupersededByNewNavigation=1]="SupersededByNewNavigation",e[e.NoDataFromResolver=2]="NoDataFromResolver",e[e.GuardRejected=3]="GuardRejected",e}(mr||{}),y1=function(e){return e[e.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",e[e.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",e}(y1||{}),Wi=class extends Dr{constructor(n,t,r,i){super(n,t),this.reason=r,this.code=i,this.type=In.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},xs=class extends Dr{constructor(n,t,r,i){super(n,t),this.reason=r,this.code=i,this.type=In.NavigationSkipped}},wc=class extends Dr{constructor(n,t,r,i){super(n,t),this.error=r,this.target=i,this.type=In.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Qf=class extends Dr{constructor(n,t,r,i){super(n,t),this.urlAfterRedirects=r,this.state=i,this.type=In.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},_1=class extends Dr{constructor(n,t,r,i){super(n,t),this.urlAfterRedirects=r,this.state=i,this.type=In.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},C1=class extends Dr{constructor(n,t,r,i,o){super(n,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=In.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},w1=class extends Dr{constructor(n,t,r,i){super(n,t),this.urlAfterRedirects=r,this.state=i,this.type=In.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},v1=class extends Dr{constructor(n,t,r,i){super(n,t),this.urlAfterRedirects=r,this.state=i,this.type=In.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},b1=class{constructor(n){this.route=n,this.type=In.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},x1=class{constructor(n){this.route=n,this.type=In.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},E1=class{constructor(n){this.snapshot=n,this.type=In.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},I1=class{constructor(n){this.snapshot=n,this.type=In.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},S1=class{constructor(n){this.snapshot=n,this.type=In.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},D1=class{constructor(n){this.snapshot=n,this.type=In.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var vc=class{},Pa=class{constructor(n,t){this.url=n,this.navigationBehaviorOptions=t}};function V8(e,n){return e.providers&&!e._injector&&(e._injector=jm(e.providers,n,`Route: ${e.path}`)),e._injector??n}function Qr(e){return e.outlet||Fe}function j8(e,n){let t=e.filter(r=>Qr(r)===n);return t.push(...e.filter(r=>Qr(r)!==n)),t}function Dc(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let n=e.parent;n;n=n.parent){let t=n.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var M1=class{get injector(){return Dc(this.route?.snapshot)??this.rootInjector}set injector(n){}constructor(n){this.rootInjector=n,this.outlet=null,this.route=null,this.children=new ih(this.rootInjector),this.attachRef=null}},ih=(()=>{class e{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new M1(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||e)(We(Ir))}}static{this.\u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),Kf=class{constructor(n){this._root=n}get root(){return this._root.value}parent(n){let t=this.pathFromRoot(n);return t.length>1?t[t.length-2]:null}children(n){let t=T1(n,this._root);return t?t.children.map(r=>r.value):[]}firstChild(n){let t=T1(n,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(n){let t=A1(n,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==n)}pathFromRoot(n){return A1(n,this._root).map(t=>t.value)}};function T1(e,n){if(e===n.value)return n;for(let t of n.children){let r=T1(e,t);if(r)return r}return null}function A1(e,n){if(e===n.value)return[n];for(let t of n.children){let r=A1(e,t);if(r.length)return r.unshift(n),r}return[]}var gr=class{constructor(n,t){this.value=n,this.children=t}toString(){return`TreeNode(${this.value})`}};function Ta(e){let n={};return e&&e.children.forEach(t=>n[t.value.outlet]=t),n}var Jf=class extends Kf{constructor(n,t){super(n),this.snapshot=t,V1(this,n)}toString(){return this.snapshot.toString()}};function AI(e){let n=H8(e),t=new vn([new ws("",{})]),r=new vn({}),i=new vn({}),o=new vn({}),l=new vn(""),h=new mi(t,r,o,l,i,Fe,e,n.root);return h.snapshot=n.root,new Jf(new gr(h,[]),n)}function H8(e){let n={},t={},r={},i="",o=new Oa([],n,r,i,t,Fe,e,null,{});return new th("",new gr(o,[]))}var mi=class{constructor(n,t,r,i,o,l,h,g){this.urlSubject=n,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=l,this.component=h,this._futureSnapshot=g,this.title=this.dataSubject?.pipe(je(m=>m[Sc]))??Oe(void 0),this.url=n,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(je(n=>Ra(n))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(je(n=>Ra(n))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function eh(e,n,t="emptyOnly"){let r,{routeConfig:i}=e;return n!==null&&(t==="always"||i?.path===""||!n.component&&!n.routeConfig?.loadComponent)?r={params:re(re({},n.params),e.params),data:re(re({},n.data),e.data),resolve:re(re(re(re({},e.data),n.data),i?.data),e._resolvedData)}:r={params:re({},e.params),data:re({},e.data),resolve:re(re({},e.data),e._resolvedData??{})},i&&NI(i)&&(r.resolve[Sc]=i.title),r}var Oa=class{get title(){return this.data?.[Sc]}constructor(n,t,r,i,o,l,h,g,m){this.url=n,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=l,this.component=h,this.routeConfig=g,this._resolve=m}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Ra(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Ra(this.queryParams),this._queryParamMap}toString(){let n=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${n}', path:'${t}')`}},th=class extends Kf{constructor(n,t){super(t),this.url=n,V1(this,t)}toString(){return OI(this._root)}};function V1(e,n){n.value._routerState=e,n.children.forEach(t=>V1(e,t))}function OI(e){let n=e.children.length>0?` { ${e.children.map(OI).join(", ")} } `:"";return`${e.value}${n}`}function u1(e){if(e.snapshot){let n=e.snapshot,t=e._futureSnapshot;e.snapshot=t,gi(n.queryParams,t.queryParams)||e.queryParamsSubject.next(t.queryParams),n.fragment!==t.fragment&&e.fragmentSubject.next(t.fragment),gi(n.params,t.params)||e.paramsSubject.next(t.params),g8(n.url,t.url)||e.urlSubject.next(t.url),gi(n.data,t.data)||e.dataSubject.next(t.data)}else e.snapshot=e._futureSnapshot,e.dataSubject.next(e._futureSnapshot.data)}function O1(e,n){let t=gi(e.params,n.params)&&C8(e.url,n.url),r=!e.parent!=!n.parent;return t&&!r&&(!e.parent||O1(e.parent,n.parent))}function NI(e){return typeof e.title=="string"||e.title===null}var j1=(()=>{class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=Fe,this.activateEvents=new Bt,this.deactivateEvents=new Bt,this.attachEvents=new Bt,this.detachEvents=new Bt,this.parentContexts=te(ih),this.location=te(vo),this.changeDetector=te(ji),this.inputBinder=te(H1,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new fe(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new fe(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new fe(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new fe(4013,!1);this._activatedRoute=t;let i=this.location,l=t.snapshot.component,h=this.parentContexts.getOrCreateContext(this.name).children,g=new N1(t,h,i.injector);this.activated=i.createComponent(l,{index:i.length,injector:g,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275dir=zt({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[ki]})}}return e})(),N1=class e{__ngOutletInjector(n){return new e(this.route,this.childContexts,n)}constructor(n,t,r){this.route=n,this.childContexts=t,this.parent=r}get(n,t){return n===mi?this.route:n===ih?this.childContexts:this.parent.get(n,t)}},H1=new be("");function z8(e,n,t){let r=bc(e,n._root,t?t._root:void 0);return new Jf(r,n)}function bc(e,n,t){if(t&&e.shouldReuseRoute(n.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=n.value;let i=W8(e,n,t);return new gr(r,i)}else{if(e.shouldAttach(n.value)){let o=e.retrieve(n.value);if(o!==null){let l=o.route;return l.value._futureSnapshot=n.value,l.children=n.children.map(h=>bc(e,h)),l}}let r=G8(n.value),i=n.children.map(o=>bc(e,o));return new gr(r,i)}}function W8(e,n,t){return n.children.map(r=>{for(let i of t.children)if(e.shouldReuseRoute(r.value,i.value.snapshot))return bc(e,r,i);return bc(e,r)})}function G8(e){return new mi(new vn(e.url),new vn(e.params),new vn(e.queryParams),new vn(e.fragment),new vn(e.data),e.outlet,e.component,e)}var xc=class{constructor(n,t){this.redirectTo=n,this.navigationBehaviorOptions=t}},RI="ngNavigationCancelingError";function nh(e,n){let{redirectTo:t,navigationBehaviorOptions:r}=yc(n)?{redirectTo:n,navigationBehaviorOptions:void 0}:n,i=PI(!1,mr.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function PI(e,n){let t=new Error(`NavigationCancelingError: ${e||""}`);return t[RI]=!0,t.cancellationCode=n,t}function $8(e){return kI(e)&&yc(e.url)}function kI(e){return!!e&&e[RI]}var q8=(e,n,t,r)=>je(i=>(new R1(n,i.targetRouterState,i.currentRouterState,t,r).activate(e),i)),R1=class{constructor(n,t,r,i,o){this.routeReuseStrategy=n,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(n){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,n),u1(this.futureState.root),this.activateChildRoutes(t,r,n)}deactivateChildRoutes(n,t,r){let i=Ta(t);n.children.forEach(o=>{let l=o.value.outlet;this.deactivateRoutes(o,i[l],r),delete i[l]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(n,t,r){let i=n.value,o=t?t.value:null;if(i===o)if(i.component){let l=r.getContext(i.outlet);l&&this.deactivateChildRoutes(n,t,l.children)}else this.deactivateChildRoutes(n,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(n,t){n.value.component&&this.routeReuseStrategy.shouldDetach(n.value.snapshot)?this.detachAndStoreRouteSubtree(n,t):this.deactivateRouteAndOutlet(n,t)}detachAndStoreRouteSubtree(n,t){let r=t.getContext(n.value.outlet),i=r&&n.value.component?r.children:t,o=Ta(n);for(let l of Object.values(o))this.deactivateRouteAndItsChildren(l,i);if(r&&r.outlet){let l=r.outlet.detach(),h=r.children.onOutletDeactivated();this.routeReuseStrategy.store(n.value.snapshot,{componentRef:l,route:n,contexts:h})}}deactivateRouteAndOutlet(n,t){let r=t.getContext(n.value.outlet),i=r&&n.value.component?r.children:t,o=Ta(n);for(let l of Object.values(o))this.deactivateRouteAndItsChildren(l,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(n,t,r){let i=Ta(t);n.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new D1(o.value.snapshot))}),n.children.length&&this.forwardEvent(new I1(n.value.snapshot))}activateRoutes(n,t,r){let i=n.value,o=t?t.value:null;if(u1(i),i===o)if(i.component){let l=r.getOrCreateContext(i.outlet);this.activateChildRoutes(n,t,l.children)}else this.activateChildRoutes(n,t,r);else if(i.component){let l=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let h=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),l.children.onOutletReAttached(h.contexts),l.attachRef=h.componentRef,l.route=h.route.value,l.outlet&&l.outlet.attach(h.componentRef,h.route.value),u1(h.route.value),this.activateChildRoutes(n,null,l.children)}else l.attachRef=null,l.route=i,l.outlet&&l.outlet.activateWith(i,l.injector),this.activateChildRoutes(n,null,l.children)}else this.activateChildRoutes(n,null,r)}},rh=class{constructor(n){this.path=n,this.route=this.path[this.path.length-1]}},Na=class{constructor(n,t){this.component=n,this.route=t}};function Y8(e,n,t){let r=e._root,i=n?n._root:null;return dc(r,i,t,[r.value])}function Z8(e){let n=e.routeConfig?e.routeConfig.canActivateChild:null;return!n||n.length===0?null:{node:e,guards:n}}function Fa(e,n){let t=Symbol(),r=n.get(e,t);return r===t?typeof e=="function"&&!Fv(e)?e:n.get(e):r}function dc(e,n,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Ta(n);return e.children.forEach(l=>{X8(l,o[l.value.outlet],t,r.concat([l.value]),i),delete o[l.value.outlet]}),Object.entries(o).forEach(([l,h])=>gc(h,t.getContext(l),i)),i}function X8(e,n,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=e.value,l=n?n.value:null,h=t?t.getContext(e.value.outlet):null;if(l&&o.routeConfig===l.routeConfig){let g=Q8(l,o,o.routeConfig.runGuardsAndResolvers);g?i.canActivateChecks.push(new rh(r)):(o.data=l.data,o._resolvedData=l._resolvedData),o.component?dc(e,n,h?h.children:null,r,i):dc(e,n,t,r,i),g&&h&&h.outlet&&h.outlet.isActivated&&i.canDeactivateChecks.push(new Na(h.outlet.component,l))}else l&&gc(n,h,i),i.canActivateChecks.push(new rh(r)),o.component?dc(e,null,h?h.children:null,r,i):dc(e,null,t,r,i);return i}function Q8(e,n,t){if(typeof t=="function")return t(e,n);switch(t){case"pathParamsChange":return!vs(e.url,n.url);case"pathParamsOrQueryParamsChange":return!vs(e.url,n.url)||!gi(e.queryParams,n.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!O1(e,n)||!gi(e.queryParams,n.queryParams);case"paramsChange":default:return!O1(e,n)}}function gc(e,n,t){let r=Ta(e),i=e.value;Object.entries(r).forEach(([o,l])=>{i.component?n?gc(l,n.children.getContext(o),t):gc(l,null,t):gc(l,n,t)}),i.component?n&&n.outlet&&n.outlet.isActivated?t.canDeactivateChecks.push(new Na(n.outlet.component,i)):t.canDeactivateChecks.push(new Na(null,i)):t.canDeactivateChecks.push(new Na(null,i))}function Mc(e){return typeof e=="function"}function K8(e){return typeof e=="boolean"}function J8(e){return e&&Mc(e.canLoad)}function eF(e){return e&&Mc(e.canActivate)}function tF(e){return e&&Mc(e.canActivateChild)}function nF(e){return e&&Mc(e.canDeactivate)}function rF(e){return e&&Mc(e.canMatch)}function FI(e){return e instanceof Si||e?.name==="EmptyError"}var Gf=Symbol("INITIAL_VALUE");function ka(){return br(e=>md(e.map(n=>n.pipe(Di(1),vg(Gf)))).pipe(je(n=>{for(let t of n)if(t!==!0){if(t===Gf)return Gf;if(t===!1||iF(t))return t}return!0}),wr(n=>n!==Gf),Di(1)))}function iF(e){return yc(e)||e instanceof xc}function oF(e,n){return on(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:l}}=t;return l.length===0&&o.length===0?Oe(Ue(re({},t),{guardsResult:!0})):sF(l,r,i,e).pipe(on(h=>h&&K8(h)?aF(r,o,e,n):Oe(h)),je(h=>Ue(re({},t),{guardsResult:h})))})}function sF(e,n,t,r){return Dt(e).pipe(on(i=>fF(i.component,i.route,t,n,r)),jr(i=>i!==!0,!0))}function aF(e,n,t,r){return Dt(n).pipe(es(i=>na(cF(i.route.parent,r),lF(i.route,r),dF(e,i.path,t),uF(e,i.route,t))),jr(i=>i!==!0,!0))}function lF(e,n){return e!==null&&n&&n(new S1(e)),Oe(!0)}function cF(e,n){return e!==null&&n&&n(new E1(e)),Oe(!0)}function uF(e,n,t){let r=n.routeConfig?n.routeConfig.canActivate:null;if(!r||r.length===0)return Oe(!0);let i=r.map(o=>yd(()=>{let l=Dc(n)??t,h=Fa(o,l),g=eF(h)?h.canActivate(n,e):ui(l,()=>h(n,e));return Io(g).pipe(jr())}));return Oe(i).pipe(ka())}function dF(e,n,t){let r=n[n.length-1],o=n.slice(0,n.length-1).reverse().map(l=>Z8(l)).filter(l=>l!==null).map(l=>yd(()=>{let h=l.guards.map(g=>{let m=Dc(l.node)??t,v=Fa(g,m),b=tF(v)?v.canActivateChild(r,e):ui(m,()=>v(r,e));return Io(b).pipe(jr())});return Oe(h).pipe(ka())}));return Oe(o).pipe(ka())}function fF(e,n,t,r,i){let o=n&&n.routeConfig?n.routeConfig.canDeactivate:null;if(!o||o.length===0)return Oe(!0);let l=o.map(h=>{let g=Dc(n)??i,m=Fa(h,g),v=nF(m)?m.canDeactivate(e,n,t,r):ui(g,()=>m(e,n,t,r));return Io(v).pipe(jr())});return Oe(l).pipe(ka())}function hF(e,n,t,r){let i=n.canLoad;if(i===void 0||i.length===0)return Oe(!0);let o=i.map(l=>{let h=Fa(l,e),g=J8(h)?h.canLoad(n,t):ui(e,()=>h(n,t));return Io(g)});return Oe(o).pipe(ka(),LI(r))}function LI(e){return ug(sn(n=>{if(typeof n!="boolean")throw nh(e,n)}),je(n=>n===!0))}function pF(e,n,t,r){let i=n.canMatch;if(!i||i.length===0)return Oe(!0);let o=i.map(l=>{let h=Fa(l,e),g=rF(h)?h.canMatch(n,t):ui(e,()=>h(n,t));return Io(g)});return Oe(o).pipe(ka(),LI(r))}var Ec=class{constructor(n){this.segmentGroup=n||null}},Ic=class extends Error{constructor(n){super(),this.urlTree=n}};function Ma(e){return ta(new Ec(e))}function gF(e){return ta(new fe(4e3,!1))}function mF(e){return ta(PI(!1,mr.GuardRejected))}var P1=class{constructor(n,t){this.urlSerializer=n,this.urlTree=t}lineralizeSegments(n,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return Oe(r);if(i.numberOfChildren>1||!i.children[Fe])return gF(`${n.redirectTo}`);i=i.children[Fe]}}applyRedirectCommands(n,t,r,i,o){if(typeof t!="string"){let h=t,{queryParams:g,fragment:m,routeConfig:v,url:b,outlet:I,params:T,data:P,title:z}=i,Z=ui(o,()=>h({params:T,data:P,queryParams:g,fragment:m,routeConfig:v,url:b,outlet:I,title:z}));if(Z instanceof Gi)throw new Ic(Z);t=Z}let l=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),n,r);if(t[0]==="/")throw new Ic(l);return l}applyRedirectCreateUrlTree(n,t,r,i){let o=this.createSegmentGroup(n,t.root,r,i);return new Gi(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(n,t){let r={};return Object.entries(n).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let h=o.substring(1);r[i]=t[h]}else r[i]=o}),r}createSegmentGroup(n,t,r,i){let o=this.createSegments(n,t.segments,r,i),l={};return Object.entries(t.children).forEach(([h,g])=>{l[h]=this.createSegmentGroup(n,g,r,i)}),new yt(o,l)}createSegments(n,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(n,o,i):this.findOrReturn(o,r))}findPosParam(n,t,r){let i=r[t.path.substring(1)];if(!i)throw new fe(4001,!1);return i}findOrReturn(n,t){let r=0;for(let i of t){if(i.path===n.path)return t.splice(r),i;r++}return n}},k1={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function yF(e,n,t,r,i){let o=BI(e,n,t);return o.matched?(r=V8(n,r),pF(r,n,t,i).pipe(je(l=>l===!0?o:re({},k1)))):Oe(o)}function BI(e,n,t){if(n.path==="**")return _F(t);if(n.path==="")return n.pathMatch==="full"&&(e.hasChildren()||t.length>0)?re({},k1):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(n.matcher||p8)(t,e,n);if(!i)return re({},k1);let o={};Object.entries(i.posParams??{}).forEach(([h,g])=>{o[h]=g.path});let l=i.consumed.length>0?re(re({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:l,positionalParamSegments:i.posParams??{}}}function _F(e){return{matched:!0,parameters:e.length>0?yI(e).parameters:{},consumedSegments:e,remainingSegments:[],positionalParamSegments:{}}}function hI(e,n,t,r){return t.length>0&&vF(e,t,r)?{segmentGroup:new yt(n,wF(r,new yt(t,e.children))),slicedSegments:[]}:t.length===0&&bF(e,t,r)?{segmentGroup:new yt(e.segments,CF(e,t,r,e.children)),slicedSegments:t}:{segmentGroup:new yt(e.segments,e.children),slicedSegments:t}}function CF(e,n,t,r){let i={};for(let o of t)if(oh(e,n,o)&&!r[Qr(o)]){let l=new yt([],{});i[Qr(o)]=l}return re(re({},r),i)}function wF(e,n){let t={};t[Fe]=n;for(let r of e)if(r.path===""&&Qr(r)!==Fe){let i=new yt([],{});t[Qr(r)]=i}return t}function vF(e,n,t){return t.some(r=>oh(e,n,r)&&Qr(r)!==Fe)}function bF(e,n,t){return t.some(r=>oh(e,n,r))}function oh(e,n,t){return(e.hasChildren()||n.length>0)&&t.pathMatch==="full"?!1:t.path===""}function xF(e,n,t){return n.length===0&&!e.children[t]}var F1=class{};function EF(e,n,t,r,i,o,l="emptyOnly"){return new L1(e,n,t,r,i,l,o).recognize()}var IF=31,L1=class{constructor(n,t,r,i,o,l,h){this.injector=n,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=l,this.urlSerializer=h,this.applyRedirects=new P1(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(n){return new fe(4002,`'${n.segmentGroup}'`)}recognize(){let n=hI(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(n).pipe(je(({children:t,rootSnapshot:r})=>{let i=new gr(r,t),o=new th("",i),l=R8(r,[],this.urlTree.queryParams,this.urlTree.fragment);return l.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(l),{state:o,tree:l}}))}match(n){let t=new Oa([],Object.freeze({}),Object.freeze(re({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),Fe,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,n,Fe,t).pipe(je(r=>({children:r,rootSnapshot:t})),vr(r=>{if(r instanceof Ic)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Ec?this.noMatchError(r):r}))}processSegmentGroup(n,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(n,t,r,o):this.processSegment(n,t,r,r.segments,i,!0,o).pipe(je(l=>l instanceof gr?[l]:[]))}processChildren(n,t,r,i){let o=[];for(let l of Object.keys(r.children))l==="primary"?o.unshift(l):o.push(l);return Dt(o).pipe(es(l=>{let h=r.children[l],g=j8(t,l);return this.processSegmentGroup(n,g,h,l,i)}),wg((l,h)=>(l.push(...h),l)),co(null),Cg(),on(l=>{if(l===null)return Ma(r);let h=UI(l);return SF(h),Oe(h)}))}processSegment(n,t,r,i,o,l,h){return Dt(t).pipe(es(g=>this.processSegmentAgainstRoute(g._injector??n,t,g,r,i,o,l,h).pipe(vr(m=>{if(m instanceof Ec)return Oe(null);throw m}))),jr(g=>!!g),vr(g=>{if(FI(g))return xF(r,i,o)?Oe(new F1):Ma(r);throw g}))}processSegmentAgainstRoute(n,t,r,i,o,l,h,g){return Qr(r)!==l&&(l===Fe||!oh(i,o,r))?Ma(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(n,i,r,o,l,g):this.allowRedirects&&h?this.expandSegmentAgainstRouteUsingRedirect(n,i,t,r,o,l,g):Ma(i)}expandSegmentAgainstRouteUsingRedirect(n,t,r,i,o,l,h){let{matched:g,parameters:m,consumedSegments:v,positionalParamSegments:b,remainingSegments:I}=BI(t,i,o);if(!g)return Ma(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>IF&&(this.allowRedirects=!1));let T=new Oa(o,m,Object.freeze(re({},this.urlTree.queryParams)),this.urlTree.fragment,pI(i),Qr(i),i.component??i._loadedComponent??null,i,gI(i)),P=eh(T,h,this.paramsInheritanceStrategy);T.params=Object.freeze(P.params),T.data=Object.freeze(P.data);let z=this.applyRedirects.applyRedirectCommands(v,i.redirectTo,b,T,n);return this.applyRedirects.lineralizeSegments(i,z).pipe(on(Z=>this.processSegment(n,r,t,Z.concat(I),l,!1,h)))}matchSegmentAgainstRoute(n,t,r,i,o,l){let h=yF(t,r,i,n,this.urlSerializer);return r.path==="**"&&(t.children={}),h.pipe(br(g=>g.matched?(n=r._injector??n,this.getChildConfig(n,r,i).pipe(br(({routes:m})=>{let v=r._loadedInjector??n,{parameters:b,consumedSegments:I,remainingSegments:T}=g,P=new Oa(I,b,Object.freeze(re({},this.urlTree.queryParams)),this.urlTree.fragment,pI(r),Qr(r),r.component??r._loadedComponent??null,r,gI(r)),z=eh(P,l,this.paramsInheritanceStrategy);P.params=Object.freeze(z.params),P.data=Object.freeze(z.data);let{segmentGroup:Z,slicedSegments:q}=hI(t,I,T,m);if(q.length===0&&Z.hasChildren())return this.processChildren(v,m,Z,P).pipe(je(Ke=>new gr(P,Ke)));if(m.length===0&&q.length===0)return Oe(new gr(P,[]));let ce=Qr(r)===o;return this.processSegment(v,m,Z,q,ce?Fe:o,!0,P).pipe(je(Ke=>new gr(P,Ke instanceof gr?[Ke]:[])))}))):Ma(t)))}getChildConfig(n,t,r){return t.children?Oe({routes:t.children,injector:n}):t.loadChildren?t._loadedRoutes!==void 0?Oe({routes:t._loadedRoutes,injector:t._loadedInjector}):hF(n,t,r,this.urlSerializer).pipe(on(i=>i?this.configLoader.loadChildren(n,t).pipe(sn(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):mF(t))):Oe({routes:[],injector:n})}};function SF(e){e.sort((n,t)=>n.value.outlet===Fe?-1:t.value.outlet===Fe?1:n.value.outlet.localeCompare(t.value.outlet))}function DF(e){let n=e.value.routeConfig;return n&&n.path===""}function UI(e){let n=[],t=new Set;for(let r of e){if(!DF(r)){n.push(r);continue}let i=n.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):n.push(r)}for(let r of t){let i=UI(r.children);n.push(new gr(r.value,i))}return n.filter(r=>!t.has(r))}function pI(e){return e.data||{}}function gI(e){return e.resolve||{}}function MF(e,n,t,r,i,o){return on(l=>EF(e,n,t,r,l.extractedUrl,i,o).pipe(je(({state:h,tree:g})=>Ue(re({},l),{targetSnapshot:h,urlAfterRedirects:g}))))}function TF(e,n){return on(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Oe(t);let o=new Set(i.map(g=>g.route)),l=new Set;for(let g of o)if(!l.has(g))for(let m of VI(g))l.add(m);let h=0;return Dt(l).pipe(es(g=>o.has(g)?AF(g,r,e,n):(g.data=eh(g,g.parent,e).resolve,Oe(void 0))),sn(()=>h++),ia(1),on(g=>h===l.size?Oe(t):lr))})}function VI(e){let n=e.children.map(t=>VI(t)).flat();return[e,...n]}function AF(e,n,t,r){let i=e.routeConfig,o=e._resolve;return i?.title!==void 0&&!NI(i)&&(o[Sc]=i.title),OF(o,e,n,r).pipe(je(l=>(e._resolvedData=l,e.data=eh(e,e.parent,t).resolve,null)))}function OF(e,n,t,r){let i=h1(e);if(i.length===0)return Oe({});let o={};return Dt(i).pipe(on(l=>NF(e[l],n,t,r).pipe(jr(),sn(h=>{if(h instanceof xc)throw nh(new mc,h);o[l]=h}))),ia(1),_g(o),vr(l=>FI(l)?lr:ta(l)))}function NF(e,n,t,r){let i=Dc(n)??r,o=Fa(e,i),l=o.resolve?o.resolve(n,t):ui(i,()=>o(n,t));return Io(l)}function d1(e){return br(n=>{let t=e(n);return t?Dt(t).pipe(je(()=>n)):Oe(n)})}var jI=(()=>{class e{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===Fe);return r}getResolvedTitleForRoute(t){return t.data[Sc]}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=he({token:e,factory:()=>te(RF),providedIn:"root"})}}return e})(),RF=(()=>{class e extends jI{constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||e)(We(sI))}}static{this.\u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),z1=new be("",{providedIn:"root",factory:()=>({})}),PF=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275cmp=oe({type:e,selectors:[["ng-component"]],standalone:!0,features:[se],decls:1,vars:0,template:function(r,i){r&1&&J(0,"router-outlet")},dependencies:[j1],encapsulation:2})}}return e})();function W1(e){let n=e.children&&e.children.map(W1),t=n?Ue(re({},e),{children:n}):re({},e);return!t.component&&!t.loadComponent&&(n||t.loadChildren)&&t.outlet&&t.outlet!==Fe&&(t.component=PF),t}var G1=new be(""),kF=(()=>{class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=te(Wm)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Oe(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=Io(t.loadComponent()).pipe(je(HI),sn(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),ra(()=>{this.componentLoaders.delete(t)})),i=new Js(r,()=>new rn).pipe(Ks());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Oe({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=FF(r,this.compiler,t,this.onLoadEndListener).pipe(ra(()=>{this.childrenLoaders.delete(r)})),l=new Js(o,()=>new rn).pipe(Ks());return this.childrenLoaders.set(r,l),l}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function FF(e,n,t,r){return Io(e.loadChildren()).pipe(je(HI),on(i=>i instanceof Hl||Array.isArray(i)?Oe(i):Dt(n.compileModuleAsync(i))),je(i=>{r&&r(e);let o,l,h=!1;return Array.isArray(i)?(l=i,h=!0):(o=i.create(t).injector,l=o.get(G1,[],{optional:!0,self:!0}).flat()),{routes:l.map(W1),injector:o}}))}function LF(e){return e&&typeof e=="object"&&"default"in e}function HI(e){return LF(e)?e.default:e}var $1=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=he({token:e,factory:()=>te(BF),providedIn:"root"})}}return e})(),BF=(()=>{class e{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),UF=new be("");var VF=new be(""),jF=(()=>{class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new rn,this.transitionAbortSubject=new rn,this.configLoader=te(kF),this.environmentInjector=te(Ir),this.urlSerializer=te(U1),this.rootContexts=te(ih),this.location=te(oc),this.inputBindingEnabled=te(H1,{optional:!0})!==null,this.titleStrategy=te(jI),this.options=te(z1,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=te($1),this.createViewTransition=te(UF,{optional:!0}),this.navigationErrorHandler=te(VF,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Oe(void 0),this.rootComponentType=null;let t=i=>this.events.next(new b1(i)),r=i=>this.events.next(new x1(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(Ue(re(re({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,i){return this.transitions=new vn({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:pc,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(wr(o=>o.id!==0),je(o=>Ue(re({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),br(o=>{let l=!1,h=!1;return Oe(o).pipe(br(g=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",mr.SupersededByNewNavigation),lr;this.currentTransition=o,this.currentNavigation={id:g.id,initialUrl:g.rawUrl,extractedUrl:g.extractedUrl,targetBrowserUrl:typeof g.extras.browserUrl=="string"?this.urlSerializer.parse(g.extras.browserUrl):g.extras.browserUrl,trigger:g.source,extras:g.extras,previousNavigation:this.lastSuccessfulNavigation?Ue(re({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let m=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),v=g.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!m&&v!=="reload"){let b="";return this.events.next(new xs(g.id,this.urlSerializer.serialize(g.rawUrl),b,y1.IgnoredSameUrlNavigation)),g.resolve(!1),lr}if(this.urlHandlingStrategy.shouldProcessUrl(g.rawUrl))return Oe(g).pipe(br(b=>{let I=this.transitions?.getValue();return this.events.next(new Cc(b.id,this.urlSerializer.serialize(b.extractedUrl),b.source,b.restoredState)),I!==this.transitions?.getValue()?lr:Promise.resolve(b)}),MF(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),sn(b=>{o.targetSnapshot=b.targetSnapshot,o.urlAfterRedirects=b.urlAfterRedirects,this.currentNavigation=Ue(re({},this.currentNavigation),{finalUrl:b.urlAfterRedirects});let I=new Qf(b.id,this.urlSerializer.serialize(b.extractedUrl),this.urlSerializer.serialize(b.urlAfterRedirects),b.targetSnapshot);this.events.next(I)}));if(m&&this.urlHandlingStrategy.shouldProcessUrl(g.currentRawUrl)){let{id:b,extractedUrl:I,source:T,restoredState:P,extras:z}=g,Z=new Cc(b,this.urlSerializer.serialize(I),T,P);this.events.next(Z);let q=AI(this.rootComponentType).snapshot;return this.currentTransition=o=Ue(re({},g),{targetSnapshot:q,urlAfterRedirects:I,extras:Ue(re({},z),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=I,Oe(o)}else{let b="";return this.events.next(new xs(g.id,this.urlSerializer.serialize(g.extractedUrl),b,y1.IgnoredByUrlHandlingStrategy)),g.resolve(!1),lr}}),sn(g=>{let m=new _1(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(m)}),je(g=>(this.currentTransition=o=Ue(re({},g),{guards:Y8(g.targetSnapshot,g.currentSnapshot,this.rootContexts)}),o)),oF(this.environmentInjector,g=>this.events.next(g)),sn(g=>{if(o.guardsResult=g.guardsResult,g.guardsResult&&typeof g.guardsResult!="boolean")throw nh(this.urlSerializer,g.guardsResult);let m=new C1(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot,!!g.guardsResult);this.events.next(m)}),wr(g=>g.guardsResult?!0:(this.cancelNavigationTransition(g,"",mr.GuardRejected),!1)),d1(g=>{if(g.guards.canActivateChecks.length)return Oe(g).pipe(sn(m=>{let v=new w1(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(v)}),br(m=>{let v=!1;return Oe(m).pipe(TF(this.paramsInheritanceStrategy,this.environmentInjector),sn({next:()=>v=!0,complete:()=>{v||this.cancelNavigationTransition(m,"",mr.NoDataFromResolver)}}))}),sn(m=>{let v=new v1(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(v)}))}),d1(g=>{let m=v=>{let b=[];v.routeConfig?.loadComponent&&!v.routeConfig._loadedComponent&&b.push(this.configLoader.loadComponent(v.routeConfig).pipe(sn(I=>{v.component=I}),je(()=>{})));for(let I of v.children)b.push(...m(I));return b};return md(m(g.targetSnapshot.root)).pipe(co(null),Di(1))}),d1(()=>this.afterPreactivation()),br(()=>{let{currentSnapshot:g,targetSnapshot:m}=o,v=this.createViewTransition?.(this.environmentInjector,g.root,m.root);return v?Dt(v).pipe(je(()=>o)):Oe(o)}),je(g=>{let m=z8(t.routeReuseStrategy,g.targetSnapshot,g.currentRouterState);return this.currentTransition=o=Ue(re({},g),{targetRouterState:m}),this.currentNavigation.targetRouterState=m,o}),sn(()=>{this.events.next(new vc)}),q8(this.rootContexts,t.routeReuseStrategy,g=>this.events.next(g),this.inputBindingEnabled),Di(1),sn({next:g=>{l=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new bs(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects))),this.titleStrategy?.updateTitle(g.targetRouterState.snapshot),g.resolve(!0)},complete:()=>{l=!0}}),bg(this.transitionAbortSubject.pipe(sn(g=>{throw g}))),ra(()=>{!l&&!h&&this.cancelNavigationTransition(o,"",mr.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),vr(g=>{if(h=!0,kI(g))this.events.next(new Wi(o.id,this.urlSerializer.serialize(o.extractedUrl),g.message,g.cancellationCode)),$8(g)?this.events.next(new Pa(g.url,g.navigationBehaviorOptions)):o.resolve(!1);else{let m=new wc(o.id,this.urlSerializer.serialize(o.extractedUrl),g,o.targetSnapshot??void 0);try{let v=ui(this.environmentInjector,()=>this.navigationErrorHandler?.(m));if(v instanceof xc){let{message:b,cancellationCode:I}=nh(this.urlSerializer,v);this.events.next(new Wi(o.id,this.urlSerializer.serialize(o.extractedUrl),b,I)),this.events.next(new Pa(v.redirectTo,v.navigationBehaviorOptions))}else{this.events.next(m);let b=t.errorHandler(g);o.resolve(!!b)}}catch(v){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(v)}}return lr}))}))}cancelNavigationTransition(t,r,i){let o=new Wi(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function HF(e){return e!==pc}var zF=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=he({token:e,factory:()=>te(WF),providedIn:"root"})}}return e})(),B1=class{shouldDetach(n){return!1}store(n,t){}shouldAttach(n){return!1}retrieve(n){return null}shouldReuseRoute(n,t){return n.routeConfig===t.routeConfig}},WF=(()=>{class e extends B1{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Li(e)))(i||e)}})()}static{this.\u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),zI=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=he({token:e,factory:()=>te(GF),providedIn:"root"})}}return e})(),GF=(()=>{class e extends zI{constructor(){super(...arguments),this.location=te(oc),this.urlSerializer=te(U1),this.options=te(z1,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=te($1),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Gi,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=AI(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof Cc)this.stateMemento=this.createStateMemento();else if(t instanceof xs)this.rawUrlTree=r.initialUrl;else if(t instanceof Qf){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else t instanceof vc?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof Wi&&(t.code===mr.GuardRejected||t.code===mr.NoDataFromResolver)?this.restoreHistory(r):t instanceof wc?this.restoreHistory(r,!0):t instanceof bs&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let i=t instanceof Gi?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let o=this.browserPageId,l=re(re({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(i,"",l)}else{let o=re(re({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",o)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.currentUrlTree===t.finalUrl&&o===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Li(e)))(i||e)}})()}static{this.\u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),fc=function(e){return e[e.COMPLETE=0]="COMPLETE",e[e.FAILED=1]="FAILED",e[e.REDIRECTING=2]="REDIRECTING",e}(fc||{});function $F(e,n){e.events.pipe(wr(t=>t instanceof bs||t instanceof Wi||t instanceof wc||t instanceof xs),je(t=>t instanceof bs||t instanceof xs?fc.COMPLETE:(t instanceof Wi?t.code===mr.Redirect||t.code===mr.SupersededByNewNavigation:!1)?fc.REDIRECTING:fc.FAILED),wr(t=>t!==fc.REDIRECTING),Di(1)).subscribe(()=>{n()})}function qF(e){throw e}var YF={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},ZF={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},yi=(()=>{class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=te(Pf),this.stateManager=te(zI),this.options=te(z1,{optional:!0})||{},this.pendingTasks=te(ps),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=te(jF),this.urlSerializer=te(U1),this.location=te(oc),this.urlHandlingStrategy=te($1),this._events=new rn,this.errorHandler=this.options.errorHandler||qF,this.navigated=!1,this.routeReuseStrategy=te(zF),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=te(G1,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!te(H1,{optional:!0}),this.eventsSubscription=new Ht,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Wi&&r.code!==mr.Redirect&&r.code!==mr.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof bs)this.navigated=!0;else if(r instanceof Pa){let l=r.navigationBehaviorOptions,h=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),g=re({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||HF(i.source)},l);this.scheduleNavigation(h,pc,null,g,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}QF(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),pc,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},l=i?.navigationId?i:null;if(i){let g=re({},i);delete g.navigationId,delete g.\u0275routerPageId,Object.keys(g).length!==0&&(o.state=g)}let h=this.parseUrl(t);this.scheduleNavigation(h,r,l,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(W1),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:l,queryParamsHandling:h,preserveFragment:g}=r,m=g?this.currentUrlTree.fragment:l,v=null;switch(h??this.options.defaultQueryParamsHandling){case"merge":v=re(re({},this.currentUrlTree.queryParams),o);break;case"preserve":v=this.currentUrlTree.queryParams;break;default:v=o||null}v!==null&&(v=this.removeEmptyProps(v));let b;try{let I=i?i.snapshot:this.routerState.snapshot.root;b=SI(I)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),b=this.currentUrlTree.root}return DI(b,t,v,m??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=yc(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,pc,null,r)}navigate(t,r={skipLocationChange:!1}){return XF(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=re({},YF):r===!1?i=re({},ZF):i=r,yc(t))return cI(this.currentUrlTree,t,i);let o=this.parseUrl(t);return cI(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,l){if(this.disposed)return Promise.resolve(!1);let h,g,m;l?(h=l.resolve,g=l.reject,m=l.promise):m=new Promise((b,I)=>{h=b,g=I});let v=this.pendingTasks.add();return $F(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(v))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:h,reject:g,promise:m,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),m.catch(b=>Promise.reject(b))}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function XF(e){for(let n=0;n<e.length;n++)if(e[n]==null)throw new fe(4008,!1)}function QF(e){return!(e instanceof vc)&&!(e instanceof Pa)}var KF=new be("");function WI(e,...n){return Ca([{provide:G1,multi:!0,useValue:e},[],{provide:mi,useFactory:JF,deps:[yi]},{provide:Sa,multi:!0,useFactory:eL},n.map(t=>t.\u0275providers)])}function JF(e){return e.routerState.root}function eL(){let e=te(ai);return n=>{let t=e.get(hi);if(n!==t.components[0])return;let r=e.get(yi),i=e.get(tL);e.get(nL)===1&&r.initialNavigation(),e.get(rL,null,ze.Optional)?.setUpPreloading(),e.get(KF,null,ze.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var tL=new be("",{factory:()=>new rn}),nL=new be("",{providedIn:"root",factory:()=>1});var rL=new be("");var So=(()=>{class e{messageSubject=new Ko(1);message$=this.messageSubject.asObservable();askUser(t,r,i){this.messageSubject.next({message:t,yesHandler:r,noHandler:i})}static \u0275fac=function(r){return new(r||e)};static \u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function iL(e,n){if(e&1){let t=Tt();M(0,"div",1)(1,"div",2)(2,"p"),R(3),A(),M(4,"div",3)(5,"button",4),j("click",function(){it(t);let i=pe();return ot(i.onYes())}),R(6,"Tak"),A(),M(7,"button",4),j("click",function(){it(t);let i=pe();return ot(i.onNo())}),R(8,"Nie"),A()()()()}if(e&2){let t=pe();V(3),bt(t.message)}}var GI=(()=>{class e{messagesService;message=null;yesHandler=null;noHandler=null;constructor(t){this.messagesService=t,this.messagesService.message$.subscribe(r=>{this.message=r.message,this.yesHandler=r.yesHandler,this.noHandler=r.noHandler||null})}onYes(){this.yesHandler&&this.yesHandler(),this.clearDialog()}onNo(){this.noHandler&&this.noHandler(),this.clearDialog()}clearDialog(){this.message=null,this.yesHandler=null,this.noHandler=null}static \u0275fac=function(r){return new(r||e)(W(So))};static \u0275cmp=oe({type:e,selectors:[["app-confirm-dialog"]],standalone:!0,features:[se],decls:1,vars:1,consts:[["class","overlay",4,"ngIf"],[1,"overlay"],[1,"acceptbox"],[1,"btns"],[3,"click"]],template:function(r,i){r&1&&mt(0,iL,9,1,"div",0),r&2&&Ee("ngIf",i.message)},dependencies:[En,pi],styles:[".overlay[_ngcontent-%COMP%]{width:100vw;height:100vh;background:#00000059;-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px);position:fixed;z-index:9999;display:flex;flex-direction:column;justify-content:center;align-items:center}.acceptbox[_ngcontent-%COMP%]{height:200px;width:calc(100% - 64px);background:#fff;border-radius:16px;border:2px solid #000000;color:#000;padding:24px;display:flex;flex-direction:column;justify-content:space-around;align-items:center}p[_ngcontent-%COMP%]{font-weight:700;font-size:120%}.btns[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:space-around;align-items:center;align-content:center}button[_ngcontent-%COMP%]{width:calc(50% - 16px);background:#000;padding:16px;font-size:1.1em;color:#fff;font-weight:600;letter-spacing:2px;border:none;transition:background .5s ease;border-radius:16px;cursor:pointer;margin-top:8px}button[_ngcontent-%COMP%]:hover{background:#333}"]})}return e})();var Do=(()=>{class e{messageSubject=new Ko(1);message$=this.messageSubject.asObservable();askUser(t,r){this.messageSubject.next({message:t,yesHandler:r})}static \u0275fac=function(r){return new(r||e)};static \u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function oL(e,n){if(e&1){let t=Tt();M(0,"div")(1,"div",1)(2,"p"),R(3),A(),M(4,"button",2),j("click",function(){it(t);let i=pe();return ot(i.onYes())}),R(5,"Ok"),A()()()}if(e&2){let t=pe();V(3),bt(t.message)}}var $I=(()=>{class e{messagesokService;message=null;yesHandler=null;noHandler=null;constructor(t){this.messagesokService=t,this.messagesokService.message$.subscribe(r=>{this.message=r.message,this.yesHandler=r.yesHandler||null})}onYes(){this.yesHandler&&this.yesHandler(),this.clearDialog()}clearDialog(){this.message=null,this.yesHandler=null,this.noHandler=null}static \u0275fac=function(r){return new(r||e)(W(Do))};static \u0275cmp=oe({type:e,selectors:[["app-ok-dialog"]],standalone:!0,features:[se],decls:1,vars:1,consts:[[4,"ngIf"],[1,"acceptbox"],[3,"click"]],template:function(r,i){r&1&&mt(0,oL,6,1,"div",0),r&2&&Ee("ngIf",i.message)},dependencies:[En,pi],styles:["div[_ngcontent-%COMP%]{width:100vw;height:100vh;background:#00000059;-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px);position:fixed;z-index:9999;display:flex;flex-direction:column;justify-content:center;align-items:center}.acceptbox[_ngcontent-%COMP%]{height:200px;width:calc(100% - 64px);background:#fff;border-radius:16px;border:2px solid #000000;color:#000;padding:24px;display:flex;flex-direction:column;justify-content:space-around;align-items:center}p[_ngcontent-%COMP%]{font-weight:700;font-size:120%}button[_ngcontent-%COMP%]{width:100%;background:#000;padding:16px;font-size:1.1em;color:#fff;font-weight:600;letter-spacing:2px;border:none;transition:background .5s ease;border-radius:16px;cursor:pointer;margin-top:8px}button[_ngcontent-%COMP%]:hover{background:#333}"]})}return e})();var qI=(()=>{class e{constructor(){}title="Tablefi";static \u0275fac=function(r){return new(r||e)};static \u0275cmp=oe({type:e,selectors:[["app-root"]],standalone:!0,features:[se],decls:4,vars:0,consts:[["rel","stylesheet","href",yx`https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200&icon_names=arrow_back`]],template:function(r,i){r&1&&J(0,"link",0)(1,"app-confirm-dialog")(2,"app-ok-dialog")(3,"router-outlet")},dependencies:[j1,En,GI,$I],styles:['@font-face{font-family:Lexend;font-style:normal;font-weight:100 900;font-display:swap;src:url(https://fonts.gstatic.com/s/lexend/v23/wlpwgwvFAVdoq2_v9KQU4Wc.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Lexend;font-style:normal;font-weight:100 900;font-display:swap;src:url(https://fonts.gstatic.com/s/lexend/v23/wlpwgwvFAVdoq2_v9aQU4Wc.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Lexend;font-style:normal;font-weight:100 900;font-display:swap;src:url(https://fonts.gstatic.com/s/lexend/v23/wlpwgwvFAVdoq2_v-6QU.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}router-outlet[_ngcontent-%COMP%]{font-family:Lexend,sans-serif;font-optical-sizing:auto;height:100%;width:100%}']})}return e})();var r2=(()=>{class e{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(r){return new(r||e)(W(Xr),W(fr))}}static{this.\u0275dir=zt({type:e})}}return e})(),Y1=(()=>{class e extends r2{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Li(e)))(i||e)}})()}static{this.\u0275dir=zt({type:e,features:[Sr]})}}return e})(),mh=new be("");var sL={provide:mh,useExisting:ci(()=>Kt),multi:!0};function aL(){let e=zi()?zi().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}var lL=new be(""),Kt=(()=>{class e extends r2{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!aL())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(r){return new(r||e)(W(Xr),W(fr),W(lL,8))}}static{this.\u0275dir=zt({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&j("input",function(l){return i._handleInput(l.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(l){return i._compositionEnd(l.target.value)})},features:[xo([sL]),Sr]})}}return e})();function cL(e){return e==null||(typeof e=="string"||Array.isArray(e))&&e.length===0}function uL(e){return e!=null&&typeof e.length=="number"}var yh=new be(""),i2=new be("");function dL(e){return cL(e.value)?{required:!0}:null}function fL(e){return n=>uL(n.value)&&n.value.length>e?{maxlength:{requiredLength:e,actualLength:n.value.length}}:null}function YI(e){return null}function o2(e){return e!=null}function s2(e){return ys(e)?Dt(e):e}function a2(e){let n={};return e.forEach(t=>{n=t!=null?re(re({},n),t):n}),Object.keys(n).length===0?null:n}function l2(e,n){return n.map(t=>t(e))}function hL(e){return!e.validate}function c2(e){return e.map(n=>hL(n)?n:t=>n.validate(t))}function pL(e){if(!e)return null;let n=e.filter(o2);return n.length==0?null:function(t){return a2(l2(t,n))}}function Z1(e){return e!=null?pL(c2(e)):null}function gL(e){if(!e)return null;let n=e.filter(o2);return n.length==0?null:function(t){let r=l2(t,n).map(s2);return mg(r).pipe(je(a2))}}function X1(e){return e!=null?gL(c2(e)):null}function ZI(e,n){return e===null?[n]:Array.isArray(e)?[...e,n]:[e,n]}function mL(e){return e._rawValidators}function yL(e){return e._rawAsyncValidators}function q1(e){return e?Array.isArray(e)?e:[e]:[]}function uh(e,n){return Array.isArray(e)?e.includes(n):e===n}function XI(e,n){let t=q1(n);return q1(e).forEach(i=>{uh(t,i)||t.push(i)}),t}function QI(e,n){return q1(n).filter(t=>!uh(e,t))}var dh=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(n){this._rawValidators=n||[],this._composedValidatorFn=Z1(this._rawValidators)}_setAsyncValidators(n){this._rawAsyncValidators=n||[],this._composedAsyncValidatorFn=X1(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(n){this._onDestroyCallbacks.push(n)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(n=>n()),this._onDestroyCallbacks=[]}reset(n=void 0){this.control&&this.control.reset(n)}hasError(n,t){return this.control?this.control.hasError(n,t):!1}getError(n,t){return this.control?this.control.getError(n,t):null}},Ua=class extends dh{get formDirective(){return null}get path(){return null}},Pc=class extends dh{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},fh=class{constructor(n){this._cd=n}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},_L={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},iY=Ue(re({},_L),{"[class.ng-submitted]":"isSubmitted"}),gn=(()=>{class e extends fh{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||e)(W(Pc,2))}}static{this.\u0275dir=zt({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&pr("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[Sr]})}}return e})(),er=(()=>{class e extends fh{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||e)(W(Ua,10))}}static{this.\u0275dir=zt({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&pr("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[Sr]})}}return e})();var Tc="VALID",ch="INVALID",La="PENDING",Ac="DISABLED",Va=class{},hh=class extends Va{constructor(n,t){super(),this.value=n,this.source=t}},Nc=class extends Va{constructor(n,t){super(),this.pristine=n,this.source=t}},Rc=class extends Va{constructor(n,t){super(),this.touched=n,this.source=t}},Ba=class extends Va{constructor(n,t){super(),this.status=n,this.source=t}};function u2(e){return(_h(e)?e.validators:e)||null}function CL(e){return Array.isArray(e)?Z1(e):e||null}function d2(e,n){return(_h(n)?n.asyncValidators:e)||null}function wL(e){return Array.isArray(e)?X1(e):e||null}function _h(e){return e!=null&&!Array.isArray(e)&&typeof e=="object"}function vL(e,n,t){let r=e.controls;if(!(n?Object.keys(r):r).length)throw new fe(1e3,"");if(!r[t])throw new fe(1001,"")}function bL(e,n,t){e._forEachChild((r,i)=>{if(t[i]===void 0)throw new fe(1002,"")})}var ph=class{constructor(n,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=ic(()=>this.statusReactive()),this.statusReactive=Ql(void 0),this._pristine=ic(()=>this.pristineReactive()),this.pristineReactive=Ql(!0),this._touched=ic(()=>this.touchedReactive()),this.touchedReactive=Ql(!1),this._events=new rn,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(n),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(n){this._rawValidators=this._composedValidatorFn=n}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(n){this._rawAsyncValidators=this._composedAsyncValidatorFn=n}get parent(){return this._parent}get status(){return Hi(this.statusReactive)}set status(n){Hi(()=>this.statusReactive.set(n))}get valid(){return this.status===Tc}get invalid(){return this.status===ch}get pending(){return this.status==La}get disabled(){return this.status===Ac}get enabled(){return this.status!==Ac}get pristine(){return Hi(this.pristineReactive)}set pristine(n){Hi(()=>this.pristineReactive.set(n))}get dirty(){return!this.pristine}get touched(){return Hi(this.touchedReactive)}set touched(n){Hi(()=>this.touchedReactive.set(n))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(n){this._assignValidators(n)}setAsyncValidators(n){this._assignAsyncValidators(n)}addValidators(n){this.setValidators(XI(n,this._rawValidators))}addAsyncValidators(n){this.setAsyncValidators(XI(n,this._rawAsyncValidators))}removeValidators(n){this.setValidators(QI(n,this._rawValidators))}removeAsyncValidators(n){this.setAsyncValidators(QI(n,this._rawAsyncValidators))}hasValidator(n){return uh(this._rawValidators,n)}hasAsyncValidator(n){return uh(this._rawAsyncValidators,n)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(n={}){let t=this.touched===!1;this.touched=!0;let r=n.sourceControl??this;this._parent&&!n.onlySelf&&this._parent.markAsTouched(Ue(re({},n),{sourceControl:r})),t&&n.emitEvent!==!1&&this._events.next(new Rc(!0,r))}markAllAsTouched(n={}){this.markAsTouched({onlySelf:!0,emitEvent:n.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(n))}markAsUntouched(n={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=n.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:n.emitEvent,sourceControl:r})}),this._parent&&!n.onlySelf&&this._parent._updateTouched(n,r),t&&n.emitEvent!==!1&&this._events.next(new Rc(!1,r))}markAsDirty(n={}){let t=this.pristine===!0;this.pristine=!1;let r=n.sourceControl??this;this._parent&&!n.onlySelf&&this._parent.markAsDirty(Ue(re({},n),{sourceControl:r})),t&&n.emitEvent!==!1&&this._events.next(new Nc(!1,r))}markAsPristine(n={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=n.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:n.emitEvent})}),this._parent&&!n.onlySelf&&this._parent._updatePristine(n,r),t&&n.emitEvent!==!1&&this._events.next(new Nc(!0,r))}markAsPending(n={}){this.status=La;let t=n.sourceControl??this;n.emitEvent!==!1&&(this._events.next(new Ba(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!n.onlySelf&&this._parent.markAsPending(Ue(re({},n),{sourceControl:t}))}disable(n={}){let t=this._parentMarkedDirty(n.onlySelf);this.status=Ac,this.errors=null,this._forEachChild(i=>{i.disable(Ue(re({},n),{onlySelf:!0}))}),this._updateValue();let r=n.sourceControl??this;n.emitEvent!==!1&&(this._events.next(new hh(this.value,r)),this._events.next(new Ba(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Ue(re({},n),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(n={}){let t=this._parentMarkedDirty(n.onlySelf);this.status=Tc,this._forEachChild(r=>{r.enable(Ue(re({},n),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent}),this._updateAncestors(Ue(re({},n),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(n,t){this._parent&&!n.onlySelf&&(this._parent.updateValueAndValidity(n),n.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(n){this._parent=n}getRawValue(){return this.value}updateValueAndValidity(n={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Tc||this.status===La)&&this._runAsyncValidator(r,n.emitEvent)}let t=n.sourceControl??this;n.emitEvent!==!1&&(this._events.next(new hh(this.value,t)),this._events.next(new Ba(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!n.onlySelf&&this._parent.updateValueAndValidity(Ue(re({},n),{sourceControl:t}))}_updateTreeValidity(n={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(n)),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ac:Tc}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(n,t){if(this.asyncValidator){this.status=La,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let r=s2(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:n})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let n=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,n}return!1}setErrors(n,t={}){this.errors=n,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(n){let t=n;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(n,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[n]:null}hasError(n,t){return!!this.getError(n,t)}get root(){let n=this;for(;n._parent;)n=n._parent;return n}_updateControlsErrors(n,t,r){this.status=this._calculateStatus(),n&&this.statusChanges.emit(this.status),(n||r)&&this._events.next(new Ba(this.status,t)),this._parent&&this._parent._updateControlsErrors(n,t,r)}_initObservables(){this.valueChanges=new Bt,this.statusChanges=new Bt}_calculateStatus(){return this._allControlsDisabled()?Ac:this.errors?ch:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(La)?La:this._anyControlsHaveStatus(ch)?ch:Tc}_anyControlsHaveStatus(n){return this._anyControls(t=>t.status===n)}_anyControlsDirty(){return this._anyControls(n=>n.dirty)}_anyControlsTouched(){return this._anyControls(n=>n.touched)}_updatePristine(n,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!n.onlySelf&&this._parent._updatePristine(n,t),i&&this._events.next(new Nc(this.pristine,t))}_updateTouched(n={},t){this.touched=this._anyControlsTouched(),this._events.next(new Rc(this.touched,t)),this._parent&&!n.onlySelf&&this._parent._updateTouched(n,t)}_registerOnCollectionChange(n){this._onCollectionChange=n}_setUpdateStrategy(n){_h(n)&&n.updateOn!=null&&(this._updateOn=n.updateOn)}_parentMarkedDirty(n){let t=this._parent&&this._parent.dirty;return!n&&!!t&&!this._parent._anyControlsDirty()}_find(n){return null}_assignValidators(n){this._rawValidators=Array.isArray(n)?n.slice():n,this._composedValidatorFn=CL(this._rawValidators)}_assignAsyncValidators(n){this._rawAsyncValidators=Array.isArray(n)?n.slice():n,this._composedAsyncValidatorFn=wL(this._rawAsyncValidators)}},gh=class extends ph{constructor(n,t,r){super(u2(t),d2(r,t)),this.controls=n,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(n,t){return this.controls[n]?this.controls[n]:(this.controls[n]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(n,t,r={}){this.registerControl(n,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(n,t={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(n,t,r={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],t&&this.registerControl(n,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(n){return this.controls.hasOwnProperty(n)&&this.controls[n].enabled}setValue(n,t={}){bL(this,!0,n),Object.keys(n).forEach(r=>{vL(this,!0,r),this.controls[r].setValue(n[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(n,t={}){n!=null&&(Object.keys(n).forEach(r=>{let i=this.controls[r];i&&i.patchValue(n[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(n={},t={}){this._forEachChild((r,i)=>{r.reset(n?n[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(n,t,r)=>(n[r]=t.getRawValue(),n))}_syncPendingControls(){let n=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return n&&this.updateValueAndValidity({onlySelf:!0}),n}_forEachChild(n){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&n(r,t)})}_setUpControls(){this._forEachChild(n=>{n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(n){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&n(r))return!0;return!1}_reduceValue(){let n={};return this._reduceChildren(n,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(n,t){let r=n;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let n of Object.keys(this.controls))if(this.controls[n].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(n){return this.controls.hasOwnProperty(n)?this.controls[n]:null}};var Q1=new be("CallSetDisabledState",{providedIn:"root",factory:()=>K1}),K1="always";function xL(e,n){return[...n.path,e]}function f2(e,n,t=K1){h2(e,n),n.valueAccessor.writeValue(e.value),(e.disabled||t==="always")&&n.valueAccessor.setDisabledState?.(e.disabled),IL(e,n),DL(e,n),SL(e,n),EL(e,n)}function KI(e,n){e.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(n)})}function EL(e,n){if(n.valueAccessor.setDisabledState){let t=r=>{n.valueAccessor.setDisabledState(r)};e.registerOnDisabledChange(t),n._registerOnDestroy(()=>{e._unregisterOnDisabledChange(t)})}}function h2(e,n){let t=mL(e);n.validator!==null?e.setValidators(ZI(t,n.validator)):typeof t=="function"&&e.setValidators([t]);let r=yL(e);n.asyncValidator!==null?e.setAsyncValidators(ZI(r,n.asyncValidator)):typeof r=="function"&&e.setAsyncValidators([r]);let i=()=>e.updateValueAndValidity();KI(n._rawValidators,i),KI(n._rawAsyncValidators,i)}function IL(e,n){n.valueAccessor.registerOnChange(t=>{e._pendingValue=t,e._pendingChange=!0,e._pendingDirty=!0,e.updateOn==="change"&&p2(e,n)})}function SL(e,n){n.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,e.updateOn==="blur"&&e._pendingChange&&p2(e,n),e.updateOn!=="submit"&&e.markAsTouched()})}function p2(e,n){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),n.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function DL(e,n){let t=(r,i)=>{n.valueAccessor.writeValue(r),i&&n.viewToModelUpdate(r)};e.registerOnChange(t),n._registerOnDestroy(()=>{e._unregisterOnChange(t)})}function ML(e,n){e==null,h2(e,n)}function TL(e,n){if(!e.hasOwnProperty("model"))return!1;let t=e.model;return t.isFirstChange()?!0:!Object.is(n,t.currentValue)}function AL(e){return Object.getPrototypeOf(e.constructor)===Y1}function OL(e,n){e._syncPendingControls(),n.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function NL(e,n){if(!n)return null;Array.isArray(n);let t,r,i;return n.forEach(o=>{o.constructor===Kt?t=o:AL(o)?r=o:i=o}),i||r||t||null}var RL={provide:Ua,useExisting:ci(()=>Wn)},Oc=Promise.resolve(),Wn=(()=>{class e extends Ua{get submitted(){return Hi(this.submittedReactive)}constructor(t,r,i){super(),this.callSetDisabledState=i,this._submitted=ic(()=>this.submittedReactive()),this.submittedReactive=Ql(!1),this._directives=new Set,this.ngSubmit=new Bt,this.form=new gh({},Z1(t),X1(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Oc.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),f2(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Oc.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Oc.then(()=>{let r=this._findContainer(t.path),i=new gh({});ML(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Oc.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Oc.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),OL(this.form,this._directives),this.ngSubmit.emit(t),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static{this.\u0275fac=function(r){return new(r||e)(W(yh,10),W(i2,10),W(Q1,8))}}static{this.\u0275dir=zt({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&j("submit",function(l){return i.onSubmit(l)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[xo([RL]),Sr]})}}return e})();function JI(e,n){let t=e.indexOf(n);t>-1&&e.splice(t,1)}function e2(e){return typeof e=="object"&&e!==null&&Object.keys(e).length===2&&"value"in e&&"disabled"in e}var PL=class extends ph{constructor(n=null,t,r){super(u2(t),d2(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(n),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),_h(t)&&(t.nonNullable||t.initialValueIsDefault)&&(e2(n)?this.defaultValue=n.value:this.defaultValue=n)}setValue(n,t={}){this.value=this._pendingValue=n,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(n,t={}){this.setValue(n,t)}reset(n=this.defaultValue,t={}){this._applyFormState(n),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(n){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(n){this._onChange.push(n)}_unregisterOnChange(n){JI(this._onChange,n)}registerOnDisabledChange(n){this._onDisabledChange.push(n)}_unregisterOnDisabledChange(n){JI(this._onDisabledChange,n)}_forEachChild(n){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(n){e2(n)?(this.value=this._pendingValue=n.value,n.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=n}};var kL={provide:Pc,useExisting:ci(()=>cn)},t2=Promise.resolve(),cn=(()=>{class e extends Pc{constructor(t,r,i,o,l,h){super(),this._changeDetectorRef=l,this.callSetDisabledState=h,this.control=new PL,this._registered=!1,this.name="",this.update=new Bt,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=NL(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),TL(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){f2(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){t2.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&rc(r);t2.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?xL(t,this._parent):[t]}static{this.\u0275fac=function(r){return new(r||e)(W(Ua,9),W(yh,10),W(i2,10),W(mh,10),W(ji,8),W(Q1,8))}}static{this.\u0275dir=zt({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[xo([kL]),Sr,ki]})}}return e})(),tr=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275dir=zt({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return e})();var FL={provide:mh,useExisting:ci(()=>ja),multi:!0};function g2(e,n){return e==null?`${n}`:(n&&typeof n=="object"&&(n="Object"),`${e}: ${n}`.slice(0,50))}function LL(e){return e.split(":")[0]}var ja=(()=>{class e extends Y1{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let r=this._getOptionId(t),i=g2(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=LL(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Li(e)))(i||e)}})()}static{this.\u0275dir=zt({type:e,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&j("change",function(l){return i.onChange(l.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[xo([FL]),Sr]})}}return e})(),Ch=(()=>{class e{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(g2(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||e)(W(fr),W(Xr),W(ja,9))}}static{this.\u0275dir=zt({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return e})(),BL={provide:mh,useExisting:ci(()=>m2),multi:!0};function n2(e,n){return e==null?`${n}`:(typeof n=="string"&&(n=`'${n}'`),n&&typeof n=="object"&&(n="Object"),`${e}: ${n}`.slice(0,50))}function UL(e){return e.split(":")[0]}var m2=(()=>{class e extends Y1{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(o=>this._getOptionId(o));r=(o,l)=>{o._setSelected(i.indexOf(l.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let l=o;for(let h=0;h<l.length;h++){let g=l[h],m=this._getOptionValue(g.value);i.push(m)}}else{let l=r.options;for(let h=0;h<l.length;h++){let g=l[h];if(g.selected){let m=this._getOptionValue(g.value);i.push(m)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=UL(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Li(e)))(i||e)}})()}static{this.\u0275dir=zt({type:e,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&j("change",function(l){return i.onChange(l.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[xo([BL]),Sr]})}}return e})(),wh=(()=>{class e{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(n2(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(n2(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||e)(W(fr),W(Xr),W(m2,9))}}static{this.\u0275dir=zt({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return e})();function VL(e){return typeof e=="number"?e:parseInt(e,10)}var y2=(()=>{class e{constructor(){this._validator=YI}ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):YI,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275dir=zt({type:e,features:[ki]})}}return e})();var jL={provide:yh,useExisting:ci(()=>Sn),multi:!0};var Sn=(()=>{class e extends y2{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=rc,this.createValidator=t=>dL}enabled(t){return t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Li(e)))(i||e)}})()}static{this.\u0275dir=zt({type:e,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&Jl("required",i._enabled?"":null)},inputs:{required:"required"},features:[xo([jL]),Sr]})}}return e})();var HL={provide:yh,useExisting:ci(()=>J1),multi:!0},J1=(()=>{class e extends y2{constructor(){super(...arguments),this.inputName="maxlength",this.normalizeInput=t=>VL(t),this.createValidator=t=>fL(t)}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Li(e)))(i||e)}})()}static{this.\u0275dir=zt({type:e,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&Jl("maxlength",i._enabled?i.maxlength:null)},inputs:{maxlength:"maxlength"},features:[xo([HL]),Sr]})}}return e})();var zL=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=Pi({type:e})}static{this.\u0275inj=Ri({})}}return e})();var Wt=(()=>{class e{static withConfig(t){return{ngModule:e,providers:[{provide:Q1,useValue:t.callSetDisabledState??K1}]}}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=Pi({type:e})}static{this.\u0275inj=Ri({imports:[zL]})}}return e})();var ey={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};var ee=function(e,n){if(!e)throw Is(n)},Is=function(e){return new Error("Firebase Database ("+ey.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)};var C2=function(e){let n=[],t=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?n[t++]=i:i<2048?(n[t++]=i>>6|192,n[t++]=i&63|128):(i&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),n[t++]=i>>18|240,n[t++]=i>>12&63|128,n[t++]=i>>6&63|128,n[t++]=i&63|128):(n[t++]=i>>12|224,n[t++]=i>>6&63|128,n[t++]=i&63|128)}return n},WL=function(e){let n=[],t=0,r=0;for(;t<e.length;){let i=e[t++];if(i<128)n[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=e[t++];n[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=e[t++],l=e[t++],h=e[t++],g=((i&7)<<18|(o&63)<<12|(l&63)<<6|h&63)-65536;n[r++]=String.fromCharCode(55296+(g>>10)),n[r++]=String.fromCharCode(56320+(g&1023))}else{let o=e[t++],l=e[t++];n[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|l&63)}}return n.join("")},bh={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,n){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=n?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){let o=e[i],l=i+1<e.length,h=l?e[i+1]:0,g=i+2<e.length,m=g?e[i+2]:0,v=o>>2,b=(o&3)<<4|h>>4,I=(h&15)<<2|m>>6,T=m&63;g||(T=64,l||(I=64)),r.push(t[v],t[b],t[I],t[T])}return r.join("")},encodeString(e,n){return this.HAS_NATIVE_SUPPORT&&!n?btoa(e):this.encodeByteArray(C2(e),n)},decodeString(e,n){return this.HAS_NATIVE_SUPPORT&&!n?atob(e):WL(this.decodeStringToByteArray(e,n))},decodeStringToByteArray(e,n){this.init_();let t=n?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){let o=t[e.charAt(i++)],h=i<e.length?t[e.charAt(i)]:0;++i;let m=i<e.length?t[e.charAt(i)]:64;++i;let b=i<e.length?t[e.charAt(i)]:64;if(++i,o==null||h==null||m==null||b==null)throw new ty;let I=o<<2|h>>4;if(r.push(I),m!==64){let T=h<<4&240|m>>2;if(r.push(T),b!==64){let P=m<<6&192|b;r.push(P)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},ty=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},ry=function(e){let n=C2(e);return bh.encodeByteArray(n,!0)},kc=function(e){return ry(e).replace(/\./g,"")},ny=function(e){try{return bh.decodeString(e,!0)}catch(n){console.error("base64Decode failed: ",n)}return null};function w2(e){return v2(void 0,e)}function v2(e,n){if(!(n instanceof Object))return n;switch(n.constructor){case Date:let t=n;return new Date(t.getTime());case Object:e===void 0&&(e={});break;case Array:e=[];break;default:return n}for(let t in n)!n.hasOwnProperty(t)||!GL(t)||(e[t]=v2(e[t],n[t]));return e}function GL(e){return e!=="__proto__"}function $L(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var qL=()=>$L().__FIREBASE_DEFAULTS__,YL=()=>{if(typeof process>"u"||typeof process.env>"u")return;let e=process.env.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},ZL=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let n=e&&ny(e[1]);return n&&JSON.parse(n)},b2=()=>{try{return qL()||YL()||ZL()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},XL=e=>{var n,t;return(t=(n=b2())===null||n===void 0?void 0:n.emulatorHosts)===null||t===void 0?void 0:t[e]},x2=e=>{let n=XL(e);if(!n)return;let t=n.lastIndexOf(":");if(t<=0||t+1===n.length)throw new Error(`Invalid host ${n} with no separate hostname and port!`);let r=parseInt(n.substring(t+1),10);return n[0]==="["?[n.substring(1,t-1),r]:[n.substring(0,t),r]},iy=()=>{var e;return(e=b2())===null||e===void 0?void 0:e.config};var qi=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((n,t)=>{this.resolve=n,this.reject=t})}wrapCallback(n){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof n=="function"&&(this.promise.catch(()=>{}),n.length===1?n(t):n(t,r))}}};function E2(e,n){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=n||"demo-project",i=e.iat||0,o=e.sub||e.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let l=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},e);return[kc(JSON.stringify(t)),kc(JSON.stringify(l)),""].join(".")}function QL(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function oy(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(QL())}function I2(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function _i(){return ey.NODE_CLIENT===!0||ey.NODE_ADMIN===!0}function S2(){try{return typeof indexedDB=="object"}catch{return!1}}function D2(){return new Promise((e,n)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;n(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){n(t)}})}var KL="FirebaseError",Es=class e extends Error{constructor(n,t,r){super(t),this.code=n,this.customData=r,this.name=KL,Object.setPrototypeOf(this,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Fc.prototype.create)}},Fc=class{constructor(n,t,r){this.service=n,this.serviceName=t,this.errors=r}create(n,...t){let r=t[0]||{},i=`${this.service}/${n}`,o=this.errors[n],l=o?JL(o,r):"Error",h=`${this.serviceName}: ${l} (${i}).`;return new Es(i,h,r)}};function JL(e,n){return e.replace(e6,(t,r)=>{let i=n[r];return i!=null?String(i):`<${r}?>`})}var e6=/\{\$([^}]+)}/g;function Ha(e){return JSON.parse(e)}function Jt(e){return JSON.stringify(e)}var M2=function(e){let n={},t={},r={},i="";try{let o=e.split(".");n=Ha(ny(o[0])||""),t=Ha(ny(o[1])||""),i=o[2],r=t.d||{},delete t.d}catch{}return{header:n,claims:t,data:r,signature:i}};var T2=function(e){let n=M2(e),t=n.claims;return!!t&&typeof t=="object"&&t.hasOwnProperty("iat")},A2=function(e){let n=M2(e).claims;return typeof n=="object"&&n.admin===!0};function Kr(e,n){return Object.prototype.hasOwnProperty.call(e,n)}function Ss(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]}function sy(e){for(let n in e)if(Object.prototype.hasOwnProperty.call(e,n))return!1;return!0}function Lc(e,n,t){let r={};for(let i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=n.call(t,e[i],i,e));return r}function xh(e,n){if(e===n)return!0;let t=Object.keys(e),r=Object.keys(n);for(let i of t){if(!r.includes(i))return!1;let o=e[i],l=n[i];if(_2(o)&&_2(l)){if(!xh(o,l))return!1}else if(o!==l)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function _2(e){return e!==null&&typeof e=="object"}function O2(e){let n=[];for(let[t,r]of Object.entries(e))Array.isArray(r)?r.forEach(i=>{n.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):n.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return n.length?"&"+n.join("&"):""}var vh=class{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let n=1;n<this.blockSize;++n)this.pad_[n]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(n,t){t||(t=0);let r=this.W_;if(typeof n=="string")for(let b=0;b<16;b++)r[b]=n.charCodeAt(t)<<24|n.charCodeAt(t+1)<<16|n.charCodeAt(t+2)<<8|n.charCodeAt(t+3),t+=4;else for(let b=0;b<16;b++)r[b]=n[t]<<24|n[t+1]<<16|n[t+2]<<8|n[t+3],t+=4;for(let b=16;b<80;b++){let I=r[b-3]^r[b-8]^r[b-14]^r[b-16];r[b]=(I<<1|I>>>31)&4294967295}let i=this.chain_[0],o=this.chain_[1],l=this.chain_[2],h=this.chain_[3],g=this.chain_[4],m,v;for(let b=0;b<80;b++){b<40?b<20?(m=h^o&(l^h),v=1518500249):(m=o^l^h,v=1859775393):b<60?(m=o&l|h&(o|l),v=2400959708):(m=o^l^h,v=3395469782);let I=(i<<5|i>>>27)+m+g+v+r[b]&4294967295;g=h,h=l,l=(o<<30|o>>>2)&4294967295,o=i,i=I}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+l&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+g&4294967295}update(n,t){if(n==null)return;t===void 0&&(t=n.length);let r=t-this.blockSize,i=0,o=this.buf_,l=this.inbuf_;for(;i<t;){if(l===0)for(;i<=r;)this.compress_(n,i),i+=this.blockSize;if(typeof n=="string"){for(;i<t;)if(o[l]=n.charCodeAt(i),++l,++i,l===this.blockSize){this.compress_(o),l=0;break}}else for(;i<t;)if(o[l]=n[i],++l,++i,l===this.blockSize){this.compress_(o),l=0;break}}this.inbuf_=l,this.total_+=t}digest(){let n=[],t=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=t&255,t/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let o=24;o>=0;o-=8)n[r]=this.chain_[i]>>o&255,++r;return n}};function Bc(e,n){return`${e} failed: ${n} argument `}var N2=function(e){let n=[],t=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);if(i>=55296&&i<=56319){let o=i-55296;r++,ee(r<e.length,"Surrogate pair missing trail surrogate.");let l=e.charCodeAt(r)-56320;i=65536+(o<<10)+l}i<128?n[t++]=i:i<2048?(n[t++]=i>>6|192,n[t++]=i&63|128):i<65536?(n[t++]=i>>12|224,n[t++]=i>>6&63|128,n[t++]=i&63|128):(n[t++]=i>>18|240,n[t++]=i>>12&63|128,n[t++]=i>>6&63|128,n[t++]=i&63|128)}return n},Uc=function(e){let n=0;for(let t=0;t<e.length;t++){let r=e.charCodeAt(t);r<128?n++:r<2048?n+=2:r>=55296&&r<=56319?(n+=4,t++):n+=3}return n};var aY=4*60*60*1e3;function Mo(e){return e&&e._delegate?e._delegate:e}var Yi=class{constructor(n,t,r){this.name=n,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(n){return this.instantiationMode=n,this}setMultipleInstances(n){return this.multipleInstances=n,this}setServiceProps(n){return this.serviceProps=n,this}setInstanceCreatedCallback(n){return this.onInstanceCreated=n,this}};var Ds="[DEFAULT]";var Eh=class{constructor(n,t){this.name=n,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(n){let t=this.normalizeInstanceIdentifier(n);if(!this.instancesDeferred.has(t)){let r=new qi;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(n){var t;let r=this.normalizeInstanceIdentifier(n?.identifier),i=(t=n?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(n){if(n.name!==this.name)throw Error(`Mismatching Component ${n.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=n,!!this.shouldAutoInitialize()){if(n6(n))try{this.getOrInitializeService({instanceIdentifier:Ds})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(n=Ds){this.instancesDeferred.delete(n),this.instancesOptions.delete(n),this.instances.delete(n)}delete(){return Zt(this,null,function*(){let n=Array.from(this.instances.values());yield Promise.all([...n.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...n.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(n=Ds){return this.instances.has(n)}getOptions(n=Ds){return this.instancesOptions.get(n)||{}}initialize(n={}){let{options:t={}}=n,r=this.normalizeInstanceIdentifier(n.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,l]of this.instancesDeferred.entries()){let h=this.normalizeInstanceIdentifier(o);r===h&&l.resolve(i)}return i}onInit(n,t){var r;let i=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(n),this.onInitCallbacks.set(i,o);let l=this.instances.get(i);return l&&n(l,i),()=>{o.delete(n)}}invokeOnInitCallbacks(n,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(n,t)}catch{}}getOrInitializeService({instanceIdentifier:n,options:t={}}){let r=this.instances.get(n);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:t6(n),options:t}),this.instances.set(n,r),this.instancesOptions.set(n,t),this.invokeOnInitCallbacks(r,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,r)}catch{}return r||null}normalizeInstanceIdentifier(n=Ds){return this.component?this.component.multipleInstances?n:Ds:n}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function t6(e){return e===Ds?void 0:e}function n6(e){return e.instantiationMode==="EAGER"}var Vc=class{constructor(n){this.name=n,this.providers=new Map}addComponent(n){let t=this.getProvider(n.name);if(t.isComponentSet())throw new Error(`Component ${n.name} has already been registered with ${this.name}`);t.setComponent(n)}addOrOverwriteComponent(n){this.getProvider(n.name).isComponentSet()&&this.providers.delete(n.name),this.addComponent(n)}getProvider(n){if(this.providers.has(n))return this.providers.get(n);let t=new Eh(n,this);return this.providers.set(n,t),t}getProviders(){return Array.from(this.providers.values())}};var r6=[],Nt=function(e){return e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT",e}(Nt||{}),i6={debug:Nt.DEBUG,verbose:Nt.VERBOSE,info:Nt.INFO,warn:Nt.WARN,error:Nt.ERROR,silent:Nt.SILENT},o6=Nt.INFO,s6={[Nt.DEBUG]:"log",[Nt.VERBOSE]:"log",[Nt.INFO]:"info",[Nt.WARN]:"warn",[Nt.ERROR]:"error"},a6=(e,n,...t)=>{if(n<e.logLevel)return;let r=new Date().toISOString(),i=s6[n];if(i)console[i](`[${r}]  ${e.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${n})`)},za=class{constructor(n){this.name=n,this._logLevel=o6,this._logHandler=a6,this._userLogHandler=null,r6.push(this)}get logLevel(){return this._logLevel}set logLevel(n){if(!(n in Nt))throw new TypeError(`Invalid value "${n}" assigned to \`logLevel\``);this._logLevel=n}setLogLevel(n){this._logLevel=typeof n=="string"?i6[n]:n}get logHandler(){return this._logHandler}set logHandler(n){if(typeof n!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=n}get userLogHandler(){return this._userLogHandler}set userLogHandler(n){this._userLogHandler=n}debug(...n){this._userLogHandler&&this._userLogHandler(this,Nt.DEBUG,...n),this._logHandler(this,Nt.DEBUG,...n)}log(...n){this._userLogHandler&&this._userLogHandler(this,Nt.VERBOSE,...n),this._logHandler(this,Nt.VERBOSE,...n)}info(...n){this._userLogHandler&&this._userLogHandler(this,Nt.INFO,...n),this._logHandler(this,Nt.INFO,...n)}warn(...n){this._userLogHandler&&this._userLogHandler(this,Nt.WARN,...n),this._logHandler(this,Nt.WARN,...n)}error(...n){this._userLogHandler&&this._userLogHandler(this,Nt.ERROR,...n),this._logHandler(this,Nt.ERROR,...n)}};var l6=(e,n)=>n.some(t=>e instanceof t),R2,P2;function c6(){return R2||(R2=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function u6(){return P2||(P2=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var k2=new WeakMap,ly=new WeakMap,F2=new WeakMap,ay=new WeakMap,uy=new WeakMap;function d6(e){let n=new Promise((t,r)=>{let i=()=>{e.removeEventListener("success",o),e.removeEventListener("error",l)},o=()=>{t(Ci(e.result)),i()},l=()=>{r(e.error),i()};e.addEventListener("success",o),e.addEventListener("error",l)});return n.then(t=>{t instanceof IDBCursor&&k2.set(t,e)}).catch(()=>{}),uy.set(n,e),n}function f6(e){if(ly.has(e))return;let n=new Promise((t,r)=>{let i=()=>{e.removeEventListener("complete",o),e.removeEventListener("error",l),e.removeEventListener("abort",l)},o=()=>{t(),i()},l=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",o),e.addEventListener("error",l),e.addEventListener("abort",l)});ly.set(e,n)}var cy={get(e,n,t){if(e instanceof IDBTransaction){if(n==="done")return ly.get(e);if(n==="objectStoreNames")return e.objectStoreNames||F2.get(e);if(n==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ci(e[n])},set(e,n,t){return e[n]=t,!0},has(e,n){return e instanceof IDBTransaction&&(n==="done"||n==="store")?!0:n in e}};function L2(e){cy=e(cy)}function h6(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(n,...t){let r=e.call(Ih(this),n,...t);return F2.set(r,n.sort?n.sort():[n]),Ci(r)}:u6().includes(e)?function(...n){return e.apply(Ih(this),n),Ci(k2.get(this))}:function(...n){return Ci(e.apply(Ih(this),n))}}function p6(e){return typeof e=="function"?h6(e):(e instanceof IDBTransaction&&f6(e),l6(e,c6())?new Proxy(e,cy):e)}function Ci(e){if(e instanceof IDBRequest)return d6(e);if(ay.has(e))return ay.get(e);let n=p6(e);return n!==e&&(ay.set(e,n),uy.set(n,e)),n}var Ih=e=>uy.get(e);function U2(e,n,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let l=indexedDB.open(e,n),h=Ci(l);return r&&l.addEventListener("upgradeneeded",g=>{r(Ci(l.result),g.oldVersion,g.newVersion,Ci(l.transaction),g)}),t&&l.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),h.then(g=>{o&&g.addEventListener("close",()=>o()),i&&g.addEventListener("versionchange",m=>i(m.oldVersion,m.newVersion,m))}).catch(()=>{}),h}var g6=["get","getKey","getAll","getAllKeys","count"],m6=["put","add","delete","clear"],dy=new Map;function B2(e,n){if(!(e instanceof IDBDatabase&&!(n in e)&&typeof n=="string"))return;if(dy.get(n))return dy.get(n);let t=n.replace(/FromIndex$/,""),r=n!==t,i=m6.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||g6.includes(t)))return;let o=function(l,...h){return Zt(this,null,function*(){let g=this.transaction(l,i?"readwrite":"readonly"),m=g.store;return r&&(m=m.index(h.shift())),(yield Promise.all([m[t](...h),i&&g.done]))[0]})};return dy.set(n,o),o}L2(e=>Ue(re({},e),{get:(n,t,r)=>B2(n,t)||e.get(n,t,r),has:(n,t)=>!!B2(n,t)||e.has(n,t)}));var hy=class{constructor(n){this.container=n}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(y6(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function y6(e){let n=e.getComponent();return n?.type==="VERSION"}var py="@firebase/app",V2="0.10.12";var Zi=new za("@firebase/app"),_6="@firebase/app-compat",C6="@firebase/analytics-compat",w6="@firebase/analytics",v6="@firebase/app-check-compat",b6="@firebase/app-check",x6="@firebase/auth",E6="@firebase/auth-compat",I6="@firebase/database",S6="@firebase/data-connect",D6="@firebase/database-compat",M6="@firebase/functions",T6="@firebase/functions-compat",A6="@firebase/installations",O6="@firebase/installations-compat",N6="@firebase/messaging",R6="@firebase/messaging-compat",P6="@firebase/performance",k6="@firebase/performance-compat",F6="@firebase/remote-config",L6="@firebase/remote-config-compat",B6="@firebase/storage",U6="@firebase/storage-compat",V6="@firebase/firestore",j6="@firebase/vertexai-preview",H6="@firebase/firestore-compat",z6="firebase",W6="10.14.0";var gy="[DEFAULT]",G6={[py]:"fire-core",[_6]:"fire-core-compat",[w6]:"fire-analytics",[C6]:"fire-analytics-compat",[b6]:"fire-app-check",[v6]:"fire-app-check-compat",[x6]:"fire-auth",[E6]:"fire-auth-compat",[I6]:"fire-rtdb",[S6]:"fire-data-connect",[D6]:"fire-rtdb-compat",[M6]:"fire-fn",[T6]:"fire-fn-compat",[A6]:"fire-iid",[O6]:"fire-iid-compat",[N6]:"fire-fcm",[R6]:"fire-fcm-compat",[P6]:"fire-perf",[k6]:"fire-perf-compat",[F6]:"fire-rc",[L6]:"fire-rc-compat",[B6]:"fire-gcs",[U6]:"fire-gcs-compat",[V6]:"fire-fst",[H6]:"fire-fst-compat",[j6]:"fire-vertex","fire-js":"fire-js",[z6]:"fire-js-all"};var Sh=new Map,$6=new Map,my=new Map;function j2(e,n){try{e.container.addComponent(n)}catch(t){Zi.debug(`Component ${n.name} failed to register with FirebaseApp ${e.name}`,t)}}function jc(e){let n=e.name;if(my.has(n))return Zi.debug(`There were multiple attempts to register component ${n}.`),!1;my.set(n,e);for(let t of Sh.values())j2(t,e);for(let t of $6.values())j2(t,e);return!0}function G2(e,n){let t=e.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),e.container.getProvider(n)}var q6={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},To=new Fc("app","Firebase",q6);var yy=class{constructor(n,t,r){this._isDeleted=!1,this._options=Object.assign({},n),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Yi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(n){this.checkDestroyed(),this._automaticDataCollectionEnabled=n}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(n){this._isDeleted=n}checkDestroyed(){if(this.isDeleted)throw To.create("app-deleted",{appName:this._name})}};var $2=W6;function Ce(e,n={}){let t=e;typeof n!="object"&&(n={name:n});let r=Object.assign({name:gy,automaticDataCollectionEnabled:!1},n),i=r.name;if(typeof i!="string"||!i)throw To.create("bad-app-name",{appName:String(i)});if(t||(t=iy()),!t)throw To.create("no-options");let o=Sh.get(i);if(o){if(xh(t,o.options)&&xh(r,o.config))return o;throw To.create("duplicate-app",{appName:i})}let l=new Vc(i);for(let g of my.values())l.addComponent(g);let h=new yy(t,r,l);return Sh.set(i,h),h}function q2(e=gy){let n=Sh.get(e);if(!n&&e===gy&&iy())return Ce();if(!n)throw To.create("no-app",{appName:e});return n}function Ao(e,n,t){var r;let i=(r=G6[e])!==null&&r!==void 0?r:e;t&&(i+=`-${t}`);let o=i.match(/\s|\//),l=n.match(/\s|\//);if(o||l){let h=[`Unable to register library "${i}" with version "${n}":`];o&&h.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&l&&h.push("and"),l&&h.push(`version name "${n}" contains illegal characters (whitespace or "/")`),Zi.warn(h.join(" "));return}jc(new Yi(`${i}-version`,()=>({library:i,version:n}),"VERSION"))}var Y6="firebase-heartbeat-database",Z6=1,Hc="firebase-heartbeat-store",fy=null;function Y2(){return fy||(fy=U2(Y6,Z6,{upgrade:(e,n)=>{switch(n){case 0:try{e.createObjectStore(Hc)}catch(t){console.warn(t)}}}}).catch(e=>{throw To.create("idb-open",{originalErrorMessage:e.message})})),fy}function X6(e){return Zt(this,null,function*(){try{let t=(yield Y2()).transaction(Hc),r=yield t.objectStore(Hc).get(Z2(e));return yield t.done,r}catch(n){if(n instanceof Es)Zi.warn(n.message);else{let t=To.create("idb-get",{originalErrorMessage:n?.message});Zi.warn(t.message)}}})}function H2(e,n){return Zt(this,null,function*(){try{let r=(yield Y2()).transaction(Hc,"readwrite");yield r.objectStore(Hc).put(n,Z2(e)),yield r.done}catch(t){if(t instanceof Es)Zi.warn(t.message);else{let r=To.create("idb-set",{originalErrorMessage:t?.message});Zi.warn(r.message)}}})}function Z2(e){return`${e.name}!${e.options.appId}`}var Q6=1024,K6=30*24*60*60*1e3,_y=class{constructor(n){this.container=n,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new Cy(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return Zt(this,null,function*(){var n,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=z2();return((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(l=>l.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(l=>{let h=new Date(l.date).valueOf();return Date.now()-h<=K6}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Zi.warn(r)}})}getHeartbeatsHeader(){return Zt(this,null,function*(){var n;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=z2(),{heartbeatsToSend:r,unsentEntries:i}=J6(this._heartbeatsCache.heartbeats),o=kc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return Zi.warn(t),""}})}};function z2(){return new Date().toISOString().substring(0,10)}function J6(e,n=Q6){let t=[],r=e.slice();for(let i of e){let o=t.find(l=>l.agent===i.agent);if(o){if(o.dates.push(i.date),W2(t)>n){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),W2(t)>n){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var Cy=class{constructor(n){this.app=n,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return Zt(this,null,function*(){return S2()?D2().then(()=>!0).catch(()=>!1):!1})}read(){return Zt(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield X6(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(n){return Zt(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return H2(this.app,{lastSentHeartbeatDate:(t=n.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:n.heartbeats})}else return})}add(n){return Zt(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return H2(this.app,{lastSentHeartbeatDate:(t=n.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...n.heartbeats]})}else return})}};function W2(e){return kc(JSON.stringify({version:2,heartbeats:e})).length}function e5(e){jc(new Yi("platform-logger",n=>new hy(n),"PRIVATE")),jc(new Yi("heartbeat",n=>new _y(n),"PRIVATE")),Ao(py,V2,e),Ao(py,V2,"esm2017"),Ao("fire-js","")}e5("");var t5="firebase",n5="10.14.0";Ao(t5,n5,"app");var X2="@firebase/database",Q2="1.0.8";var b_="";function r5(e){b_=e}var Dy=class{constructor(n){this.domStorage_=n,this.prefix_="firebase:"}set(n,t){t==null?this.domStorage_.removeItem(this.prefixedName_(n)):this.domStorage_.setItem(this.prefixedName_(n),Jt(t))}get(n){let t=this.domStorage_.getItem(this.prefixedName_(n));return t==null?null:Ha(t)}remove(n){this.domStorage_.removeItem(this.prefixedName_(n))}prefixedName_(n){return this.prefix_+n}toString(){return this.domStorage_.toString()}};var My=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(n,t){t==null?delete this.cache_[n]:this.cache_[n]=t}get(n){return Kr(this.cache_,n)?this.cache_[n]:null}remove(n){delete this.cache_[n]}};var TS=function(e){try{if(typeof window<"u"&&typeof window[e]<"u"){let n=window[e];return n.setItem("firebase:sentinel","cache"),n.removeItem("firebase:sentinel"),new Dy(n)}}catch{}return new My},Ts=TS("localStorage"),Ty=TS("sessionStorage");var $a=new za("@firebase/database"),i5=function(){let e=1;return function(){return e++}}(),AS=function(e){let n=N2(e),t=new vh;t.update(n);let r=t.digest();return bh.encodeByteArray(r)},lu=function(...e){let n="";for(let t=0;t<e.length;t++){let r=e[t];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?n+=lu.apply(null,r):typeof r=="object"?n+=Jt(r):n+=r,n+=" "}return n},As=null,K2=!0,o5=function(e,n){ee(!n||e===!0||e===!1,"Can't turn on custom loggers persistently."),e===!0?($a.logLevel=Nt.VERBOSE,As=$a.log.bind($a),n&&Ty.set("logging_enabled",!0)):typeof e=="function"?As=e:(As=null,Ty.remove("logging_enabled"))},Dn=function(...e){if(K2===!0&&(K2=!1,As===null&&Ty.get("logging_enabled")===!0&&o5(!0)),As){let n=lu.apply(null,e);As(n)}},cu=function(e){return function(...n){Dn(e,...n)}},Ay=function(...e){let n="FIREBASE INTERNAL ERROR: "+lu(...e);$a.error(n)},Xi=function(...e){let n=`FIREBASE FATAL ERROR: ${lu(...e)}`;throw $a.error(n),new Error(n)},$n=function(...e){let n="FIREBASE WARNING: "+lu(...e);$a.warn(n)},s5=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&$n("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},x_=function(e){return typeof e=="number"&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},a5=function(e){if(_i()||document.readyState==="complete")e();else{let n=!1,t=function(){if(!document.body){setTimeout(t,Math.floor(10));return}n||(n=!0,e())};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&t()}),window.attachEvent("onload",t))}},Ya="[MIN_NAME]",Os="[MAX_NAME]",Rs=function(e,n){if(e===n)return 0;if(e===Ya||n===Os)return-1;if(n===Ya||e===Os)return 1;{let t=J2(e),r=J2(n);return t!==null?r!==null?t-r===0?e.length-n.length:t-r:-1:r!==null?1:e<n?-1:1}},l5=function(e,n){return e===n?0:e<n?-1:1},zc=function(e,n){if(n&&e in n)return n[e];throw new Error("Missing required key ("+e+") in object: "+Jt(n))},E_=function(e){if(typeof e!="object"||e===null)return Jt(e);let n=[];for(let r in e)n.push(r);n.sort();let t="{";for(let r=0;r<n.length;r++)r!==0&&(t+=","),t+=Jt(n[r]),t+=":",t+=E_(e[n[r]]);return t+="}",t},OS=function(e,n){let t=e.length;if(t<=n)return[e];let r=[];for(let i=0;i<t;i+=n)i+n>t?r.push(e.substring(i,t)):r.push(e.substring(i,i+n));return r};function Mn(e,n){for(let t in e)e.hasOwnProperty(t)&&n(t,e[t])}var NS=function(e){ee(!x_(e),"Invalid JSON number");let n=11,t=52,r=(1<<n-1)-1,i,o,l,h,g;e===0?(o=0,l=0,i=1/e===-1/0?1:0):(i=e<0,e=Math.abs(e),e>=Math.pow(2,1-r)?(h=Math.min(Math.floor(Math.log(e)/Math.LN2),r),o=h+r,l=Math.round(e*Math.pow(2,t-h)-Math.pow(2,t))):(o=0,l=Math.round(e/Math.pow(2,1-r-t))));let m=[];for(g=t;g;g-=1)m.push(l%2?1:0),l=Math.floor(l/2);for(g=n;g;g-=1)m.push(o%2?1:0),o=Math.floor(o/2);m.push(i?1:0),m.reverse();let v=m.join(""),b="";for(g=0;g<64;g+=8){let I=parseInt(v.substr(g,8),2).toString(16);I.length===1&&(I="0"+I),b=b+I}return b.toLowerCase()},c5=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},u5=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function d5(e,n){let t="Unknown Error";e==="too_big"?t="The data requested exceeds the maximum size that can be accessed with a single request.":e==="permission_denied"?t="Client doesn't have permission to access the desired data.":e==="unavailable"&&(t="The service is unavailable");let r=new Error(e+" at "+n._path.toString()+": "+t);return r.code=e.toUpperCase(),r}var f5=new RegExp("^-?(0*)\\d{1,10}$"),h5=-2147483648,p5=2147483647,J2=function(e){if(f5.test(e)){let n=Number(e);if(n>=h5&&n<=p5)return n}return null},rl=function(e){try{e()}catch(n){setTimeout(()=>{let t=n.stack||"";throw $n("Exception was thrown by user callback.",t),n},Math.floor(0))}},g5=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Yc=function(e,n){let t=setTimeout(e,n);return typeof t=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):typeof t=="object"&&t.unref&&t.unref(),t};var Oy=class{constructor(n,t){this.appName_=n,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(n){return this.appCheck?this.appCheck.getToken(n):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(n).then(t,r):t(null)},0)})}addTokenChangeListener(n){var t;(t=this.appCheckProvider)===null||t===void 0||t.get().then(r=>r.addTokenListener(n))}notifyForInvalidToken(){$n(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var Ny=class{constructor(n,t,r){this.appName_=n,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(n){return this.auth_?this.auth_.getToken(n).catch(t=>t&&t.code==="auth/token-not-initialized"?(Dn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(n).then(t,r):t(null)},0)})}addTokenChangeListener(n){this.auth_?this.auth_.addAuthTokenListener(n):this.authProvider_.get().then(t=>t.addAuthTokenListener(n))}removeTokenChangeListener(n){this.authProvider_.get().then(t=>t.removeAuthTokenListener(n))}notifyForInvalidToken(){let n='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?n+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?n+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':n+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',$n(n)}},Zc=(()=>{class e{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}e.OWNER="owner";return e})(),Mh="5",RS="v",PS="s",kS="r",FS="f",LS=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,BS="ls",US="p",Ry="ac",VS="websocket",jS="long_polling";var Th=class{constructor(n,t,r,i,o=!1,l="",h=!1,g=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=o,this.persistenceKey=l,this.includeNamespaceInQueryParams=h,this.isUsingEmulator=g,this._host=n.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Ts.get("host:"+n)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(n){n!==this.internalHost&&(this.internalHost=n,this.isCacheableHost()&&Ts.set("host:"+this._host,this.internalHost))}toString(){let n=this.toURLString();return this.persistenceKey&&(n+="<"+this.persistenceKey+">"),n}toURLString(){let n=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${n}${this.host}/${t}`}};function m5(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams}function HS(e,n,t){ee(typeof n=="string","typeof type must == string"),ee(typeof t=="object","typeof params must == object");let r;if(n===VS)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else if(n===jS)r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+n);m5(e)&&(t.ns=e.namespace);let i=[];return Mn(t,(o,l)=>{i.push(o+"="+l)}),r+i.join("&")}var Py=class{constructor(){this.counters_={}}incrementCounter(n,t=1){Kr(this.counters_,n)||(this.counters_[n]=0),this.counters_[n]+=t}get(){return w2(this.counters_)}};var wy={},vy={};function I_(e){let n=e.toString();return wy[n]||(wy[n]=new Py),wy[n]}function y5(e,n){let t=e.toString();return vy[t]||(vy[t]=n()),vy[t]}var ky=class{constructor(n){this.onMessage_=n,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(n,t){this.closeAfterResponse=n,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(n,t){for(this.pendingResponses[n]=t;this.pendingResponses[this.currentResponseNum];){let r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&rl(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var eS="start",_5="close",C5="pLPCommand",w5="pRTLPCB",zS="id",WS="pw",GS="ser",v5="cb",b5="seg",x5="ts",E5="d",I5="dframe",$S=1870,qS=30,S5=$S-qS,D5=25e3,M5=3e4,Fy=class e{constructor(n,t,r,i,o,l,h){this.connId=n,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.transportSessionId=l,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=cu(n),this.stats_=I_(t),this.urlFn=g=>(this.appCheckToken&&(g[Ry]=this.appCheckToken),HS(t,jS,g))}open(n,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new ky(n),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(M5)),a5(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Ly((...o)=>{let[l,h,g,m,v]=o;if(this.incrementIncomingBytes_(o),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,l===eS)this.id=h,this.password=g;else if(l===_5)h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+l)},(...o)=>{let[l,h]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(l,h)},()=>{this.onClosed_()},this.urlFn);let r={};r[eS]="t",r[GS]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[v5]=this.scriptTagHolder.uniqueCallbackIdentifier),r[RS]=Mh,this.transportSessionId&&(r[PS]=this.transportSessionId),this.lastSessionId&&(r[BS]=this.lastSessionId),this.applicationId&&(r[US]=this.applicationId),this.appCheckToken&&(r[Ry]=this.appCheckToken),typeof location<"u"&&location.hostname&&LS.test(location.hostname)&&(r[kS]=FS);let i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){e.forceAllow_=!0}static forceDisallow(){e.forceDisallow_=!0}static isAvailable(){return _i()?!1:e.forceAllow_?!0:!e.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!c5()&&!u5()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(n){let t=Jt(n);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);let r=ry(t),i=OS(r,S5);for(let o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++}addDisconnectPingFrame(n,t){if(_i())return;this.myDisconnFrame=document.createElement("iframe");let r={};r[I5]="t",r[zS]=n,r[WS]=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(n){let t=Jt(n).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}},Ly=class e{constructor(n,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,_i())this.commandCB=n,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=i5(),window[C5+this.uniqueCallbackIdentifier]=n,window[w5+this.uniqueCallbackIdentifier]=t,this.myIFrame=e.createIFrame_();let o="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(o='<script>document.domain="'+document.domain+'";<\/script>');let l="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(h){Dn("frame writing exception"),h.stack&&Dn(h.stack),Dn(h)}}}static createIFrame_(){let n=document.createElement("iframe");if(n.style.display="none",document.body){document.body.appendChild(n);try{n.contentWindow.document||Dn("No IE domain setting required")}catch{let r=document.domain;n.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return n.contentDocument?n.doc=n.contentDocument:n.contentWindow?n.doc=n.contentWindow.document:n.document&&(n.doc=n.document),n}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let n=this.onDisconnect;n&&(this.onDisconnect=null,n())}startLongPoll(n,t){for(this.myID=n,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let n={};n[zS]=this.myID,n[WS]=this.myPW,n[GS]=this.currentSerial;let t=this.urlFn(n),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+qS+r.length<=$S;){let l=this.pendingSegs.shift();r=r+"&"+b5+i+"="+l.seg+"&"+x5+i+"="+l.ts+"&"+E5+i+"="+l.d,i++}return t=t+r,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(n,t,r){this.pendingSegs.push({seg:n,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(n,t){this.outstandingRequests.add(t);let r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(D5)),o=()=>{clearTimeout(i),r()};this.addTag(n,o)}addTag(n,t){_i()?this.doNodeLongPoll(n,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;let r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=n,r.onload=r.onreadystatechange=function(){let i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Dn("Long-poll script failed to load: "+n),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}};var T5=16384,A5=45e3,Ah=null;typeof MozWebSocket<"u"?Ah=MozWebSocket:typeof WebSocket<"u"&&(Ah=WebSocket);var Wc=(()=>{class e{constructor(t,r,i,o,l,h,g){this.connId=t,this.applicationId=i,this.appCheckToken=o,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=cu(this.connId),this.stats_=I_(r),this.connURL=e.connectionURL_(r,h,g,o,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,o,l){let h={};return h[RS]=Mh,!_i()&&typeof location<"u"&&location.hostname&&LS.test(location.hostname)&&(h[kS]=FS),r&&(h[PS]=r),i&&(h[BS]=i),o&&(h[Ry]=o),l&&(h[US]=l),HS(t,VS,h)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Ts.set("previous_websocket_failure",!0);try{let i;if(_i()){let o=this.nodeAdmin?"AdminNode":"Node";i={headers:{"User-Agent":`Firebase/${Mh}/${b_}/${process.platform}/${o}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);let l=process.env,h=this.connURL.indexOf("wss://")===0?l.HTTPS_PROXY||l.https_proxy:l.HTTP_PROXY||l.http_proxy;h&&(i.proxy={origin:h})}this.mySock=new Ah(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");let o=i.message||i.data;o&&this.log_(o),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");let o=i.message||i.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){e.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){let r=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(r);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&Ah!==null&&!e.forceDisallow_}static previouslyFailed(){return Ts.isInMemoryStorage||Ts.get("previous_websocket_failure")===!0}markConnectionHealthy(){Ts.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){let r=this.frames.join("");this.frames=null;let i=Ha(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(ee(this.frames===null,"We already have a frame buffer"),t.length<=6){let r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(this.mySock===null)return;let r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{let i=this.extractFrameCount_(r);i!==null&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();let r=Jt(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);let i=OS(r,T5);i.length>1&&this.sendString_(String(i.length));for(let o=0;o<i.length;o++)this.sendString_(i[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(A5))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}e.responsesRequiredToBeHealthy=2,e.healthyTimeout=3e4;return e})(),O5=(()=>{class e{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Fy,Wc]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){let r=Wc&&Wc.isAvailable(),i=r&&!Wc.previouslyFailed();if(t.webSocketOnly&&(r||$n("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Wc];else{let o=this.transports_=[];for(let l of e.ALL_TRANSPORTS)l&&l.isAvailable()&&o.push(l);e.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}e.globalTransportInitialized_=!1;return e})(),N5=6e4,R5=5e3,P5=10*1024,k5=100*1024,by="t",tS="d",F5="s",nS="r",L5="e",rS="o",iS="a",oS="n",sS="p",B5="h",By=class{constructor(n,t,r,i,o,l,h,g,m,v){this.id=n,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=o,this.onMessage_=l,this.onReady_=h,this.onDisconnect_=g,this.onKill_=m,this.lastSessionId=v,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=cu("c:"+this.id+":"),this.transportManager_=new O5(t),this.log_("Connection created"),this.start_()}start_(){let n=this.transportManager_.initialTransport();this.conn_=new n(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=n.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));let i=n.healthyTimeout||0;i>0&&(this.healthyTimeout_=Yc(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>k5?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>P5?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(n){return t=>{n===this.conn_?this.onConnectionLost_(t):n===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(n){return t=>{this.state_!==2&&(n===this.rx_?this.onPrimaryMessageReceived_(t):n===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(n){let t={t:"d",d:n};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(n){if(by in n){let t=n[by];t===iS?this.upgradeIfSecondaryHealthy_():t===nS?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===rS&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(n){let t=zc("t",n),r=zc("d",n);if(t==="c")this.onSecondaryControl_(r);else if(t==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:sS,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:iS,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:oS,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(n){let t=zc("t",n),r=zc("d",n);t==="c"?this.onControl_(r):t==="d"&&this.onDataMessage_(r)}onDataMessage_(n){this.onPrimaryResponse_(),this.onMessage_(n)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(n){let t=zc(by,n);if(tS in n){let r=n[tS];if(t===B5){let i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(t===oS){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===F5?this.onConnectionShutdown_(r):t===nS?this.onReset_(r):t===L5?Ay("Server Error: "+r):t===rS?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Ay("Unknown control packet command: "+t)}}onHandshake_(n){let t=n.ts,r=n.v,i=n.h;this.sessionId=n.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),Mh!==r&&$n("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let n=this.transportManager_.upgradeTransport();n&&this.startUpgrade_(n)}startUpgrade_(n){this.secondaryConn_=new n(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=n.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),Yc(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(N5))}onReset_(n){this.log_("Reset packet received.  New host: "+n),this.repoInfo_.host=n,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(n,t){this.log_("Realtime connection established."),this.conn_=n,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Yc(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(R5))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:sS,d:{}}}))}onSecondaryConnectionLost_(){let n=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===n||this.rx_===n)&&this.close()}onConnectionLost_(n){this.conn_=null,!n&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Ts.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(n){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(n),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(n){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(n)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var Oh=class{put(n,t,r,i){}merge(n,t,r,i){}refreshAuthToken(n){}refreshAppCheckToken(n){}onDisconnectPut(n,t,r){}onDisconnectMerge(n,t,r){}onDisconnectCancel(n,t){}reportStats(n){}};var Nh=class{constructor(n){this.allowedEvents_=n,this.listeners_={},ee(Array.isArray(n)&&n.length>0,"Requires a non-empty array")}trigger(n,...t){if(Array.isArray(this.listeners_[n])){let r=[...this.listeners_[n]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(n,t,r){this.validateEventType_(n),this.listeners_[n]=this.listeners_[n]||[],this.listeners_[n].push({callback:t,context:r});let i=this.getInitialEvent(n);i&&t.apply(r,i)}off(n,t,r){this.validateEventType_(n);let i=this.listeners_[n]||[];for(let o=0;o<i.length;o++)if(i[o].callback===t&&(!r||r===i[o].context)){i.splice(o,1);return}}validateEventType_(n){ee(this.allowedEvents_.find(t=>t===n),"Unknown event: "+n)}};var Rh=class e extends Nh{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!oy()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new e}getInitialEvent(n){return ee(n==="online","Unknown event type: "+n),[this.online_]}currentlyOnline(){return this.online_}};var aS=32,lS=768,_t=class{constructor(n,t){if(t===void 0){this.pieces_=n.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=n,this.pieceNum_=t}toString(){let n="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==""&&(n+="/"+this.pieces_[t]);return n||"/"}};function ct(){return new _t("")}function $e(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function Po(e){return e.pieces_.length-e.pieceNum_}function Rt(e){let n=e.pieceNum_;return n<e.pieces_.length&&n++,new _t(e.pieces_,n)}function S_(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function U5(e){let n="";for(let t=e.pieceNum_;t<e.pieces_.length;t++)e.pieces_[t]!==""&&(n+="/"+encodeURIComponent(String(e.pieces_[t])));return n||"/"}function Jc(e,n=0){return e.pieces_.slice(e.pieceNum_+n)}function YS(e){if(e.pieceNum_>=e.pieces_.length)return null;let n=[];for(let t=e.pieceNum_;t<e.pieces_.length-1;t++)n.push(e.pieces_[t]);return new _t(n,0)}function Gt(e,n){let t=[];for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);if(n instanceof _t)for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);else{let r=n.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new _t(t,0)}function Ze(e){return e.pieceNum_>=e.pieces_.length}function Gn(e,n){let t=$e(e),r=$e(n);if(t===null)return n;if(t===r)return Gn(Rt(e),Rt(n));throw new Error("INTERNAL ERROR: innerPath ("+n+") is not within outerPath ("+e+")")}function V5(e,n){let t=Jc(e,0),r=Jc(n,0);for(let i=0;i<t.length&&i<r.length;i++){let o=Rs(t[i],r[i]);if(o!==0)return o}return t.length===r.length?0:t.length<r.length?-1:1}function D_(e,n){if(Po(e)!==Po(n))return!1;for(let t=e.pieceNum_,r=n.pieceNum_;t<=e.pieces_.length;t++,r++)if(e.pieces_[t]!==n.pieces_[r])return!1;return!0}function Mr(e,n){let t=e.pieceNum_,r=n.pieceNum_;if(Po(e)>Po(n))return!1;for(;t<e.pieces_.length;){if(e.pieces_[t]!==n.pieces_[r])return!1;++t,++r}return!0}var Uy=class{constructor(n,t){this.errorPrefix_=t,this.parts_=Jc(n,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Uc(this.parts_[r]);ZS(this)}};function j5(e,n){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(n),e.byteLength_+=Uc(n),ZS(e)}function H5(e){let n=e.parts_.pop();e.byteLength_-=Uc(n),e.parts_.length>0&&(e.byteLength_-=1)}function ZS(e){if(e.byteLength_>lS)throw new Error(e.errorPrefix_+"has a key path longer than "+lS+" bytes ("+e.byteLength_+").");if(e.parts_.length>aS)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+aS+") or object contains a cycle "+Ms(e))}function Ms(e){return e.parts_.length===0?"":"in property '"+e.parts_.join(".")+"'"}var Vy=class e extends Nh{constructor(){super(["visible"]);let n,t;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",n="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",n="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",n="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",n="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{let r=!document[n];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new e}getInitialEvent(n){return ee(n==="visible","Unknown event type: "+n),[this.visible_]}};var Gc=1e3,z5=60*5*1e3,cS=30*1e3,W5=1.3,G5=3e4,$5="server_kill",uS=3,M_=(()=>{class e extends Oh{constructor(t,r,i,o,l,h,g,m){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=o,this.onServerInfoUpdate_=l,this.authTokenProvider_=h,this.appCheckTokenProvider_=g,this.authOverride_=m,this.id=e.nextPersistentConnectionId_++,this.log_=cu("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Gc,this.maxReconnectDelay_=z5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,m&&!_i())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Vy.getInstance().on("visible",this.onVisible_,this),t.host.indexOf("fblocal")===-1&&Rh.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){let o=++this.requestNumber_,l={r:o,a:t,b:r};this.log_(Jt(l)),ee(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),i&&(this.requestCBHash_[o]=i)}get(t){this.initConnection_();let r=new qi,o={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:h=>{let g=h.d;h.s==="ok"?r.resolve(g):r.reject(g)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;let l=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(l),r.promise}listen(t,r,i,o){this.initConnection_();let l=t._queryIdentifier,h=t._path.toString();this.log_("Listen called for "+h+" "+l),this.listens.has(h)||this.listens.set(h,new Map),ee(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),ee(!this.listens.get(h).has(l),"listen() called twice for same path/queryId.");let g={onComplete:o,hashFn:r,query:t,tag:i};this.listens.get(h).set(l,g),this.connected_&&this.sendListen_(g)}sendGet_(t){let r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){let r=t.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);let l={p:i},h="q";t.tag&&(l.q=r._queryObject,l.t=t.tag),l.h=t.hashFn(),this.sendRequest(h,l,g=>{let m=g.d,v=g.s;e.warnOnListenWarnings_(m,r),(this.listens.get(i)&&this.listens.get(i).get(o))===t&&(this.log_("listen response",g),v!=="ok"&&this.removeListen_(i,o),t.onComplete&&t.onComplete(v,m))})}static warnOnListenWarnings_(t,r){if(t&&typeof t=="object"&&Kr(t,"w")){let i=Ss(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){let o='".indexOn": "'+r._queryParams.getIndex().toString()+'"',l=r._path.toString();$n(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&t.length===40||A2(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=cS)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let t=this.authToken_,r=T2(t)?"auth":"gauth",i={cred:t};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(r,i,o=>{let l=o.s,h=o.d||"error";this.authToken_===t&&(l==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,h))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{let r=t.s,i=t.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){let i=t._path.toString(),o=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+o),ee(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,o)&&this.connected_&&this.sendUnlisten_(i,o,t._queryObject,r)}sendUnlisten_(t,r,i,o){this.log_("Unlisten on "+t+" for "+r);let l={p:t},h="n";o&&(l.q=i,l.t=o),this.sendRequest(h,l)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,o){let l={p:r,d:i};this.log_("onDisconnect "+t,l),this.sendRequest(t,l,h=>{o&&setTimeout(()=>{o(h.s,h.d)},Math.floor(0))})}put(t,r,i,o){this.putInternal("p",t,r,i,o)}merge(t,r,i,o){this.putInternal("m",t,r,i,o)}putInternal(t,r,i,o,l){this.initConnection_();let h={p:r,d:i};l!==void 0&&(h.h=l),this.outstandingPuts_.push({action:t,request:h,onComplete:o}),this.outstandingPutCount_++;let g=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(g):this.log_("Buffering put: "+r)}sendPut_(t){let r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,o=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,l=>{this.log_(r+" response",l),delete this.outstandingPuts_[t],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),o&&o(l.s,l.d)})}reportStats(t){if(this.connected_){let r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{if(i.s!=="ok"){let l=i.d;this.log_("reportStats","Error sending stats: "+l)}})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+Jt(t));let r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),t==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):t==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):t==="c"?this.onListenRevoked_(r.p,r.q):t==="ac"?this.onAuthRevoked_(r.s,r.d):t==="apc"?this.onAppCheckRevoked_(r.s,r.d):t==="sd"?this.onSecurityDebugPacket_(r):Ay("Unrecognized action received from server: "+Jt(t)+`
Are you using the latest client?`)}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){ee(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Gc,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Gc,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>G5&&(this.reconnectDelay_=Gc),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let t=new Date().getTime()-this.lastConnectionAttemptTime_,r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*W5)}this.onConnectStatus_(!1)}establishConnection_(){return Zt(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let t=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+e.nextConnectionId_++,l=this.lastSessionId,h=!1,g=null,m=function(){g?g.close():(h=!0,i())},v=function(I){ee(g,"sendRequest call when we're not connected not allowed."),g.sendRequest(I)};this.realtime_={close:m,sendRequest:v};let b=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[I,T]=yield Promise.all([this.authTokenProvider_.getToken(b),this.appCheckTokenProvider_.getToken(b)]);h?Dn("getToken() completed but was canceled"):(Dn("getToken() completed. Creating connection."),this.authToken_=I&&I.accessToken,this.appCheckToken_=T&&T.token,g=new By(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,r,i,P=>{$n(P+" ("+this.repoInfo_.toString()+")"),this.interrupt($5)},l))}catch(I){this.log_("Failed to get token: "+I),h||(this.repoInfo_.nodeAdmin&&$n(I),m())}}})}interrupt(t){Dn("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Dn("Resuming connection for reason: "+t),delete this.interruptReasons_[t],sy(this.interruptReasons_)&&(this.reconnectDelay_=Gc,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){let r=t-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){let r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;r?i=r.map(l=>E_(l)).join("$"):i="default";let o=this.removeListen_(t,i);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(t,r){let i=new _t(t).toString(),o;if(this.listens.has(i)){let l=this.listens.get(i);o=l.get(r),l.delete(r),l.size===0&&this.listens.delete(i)}else o=void 0;return o}onAuthRevoked_(t,r){Dn("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(t==="invalid_token"||t==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=uS&&(this.reconnectDelay_=cS,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Dn("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(t==="invalid_token"||t==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=uS&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let t of this.listens.values())for(let r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){let t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){let t={},r="js";_i()&&(this.repoInfo_.nodeAdmin?r="admin_node":r="node"),t["sdk."+r+"."+b_.replace(/\./g,"-")]=1,oy()?t["framework.cordova"]=1:I2()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){let t=Rh.getInstance().currentlyOnline();return sy(this.interruptReasons_)&&t}}e.nextPersistentConnectionId_=0,e.nextConnectionId_=0;return e})(),qe=class e{constructor(n,t){this.name=n,this.node=t}static Wrap(n,t){return new e(n,t)}};var Za=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(n,t){let r=new qe(Ya,n),i=new qe(Ya,t);return this.compare(r,i)!==0}minPost(){return qe.MIN}};var Dh,Ph=class extends Za{static get __EMPTY_NODE(){return Dh}static set __EMPTY_NODE(n){Dh=n}compare(n,t){return Rs(n.name,t.name)}isDefinedOn(n){throw Is("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(n,t){return!1}minPost(){return qe.MIN}maxPost(){return new qe(Os,Dh)}makePost(n,t){return ee(typeof n=="string","KeyIndex indexValue must always be a string."),new qe(n,Dh)}toString(){return".key"}},qa=new Ph;var Ga=class{constructor(n,t,r,i,o=null){this.isReverse_=i,this.resultGenerator_=o,this.nodeStack_=[];let l=1;for(;!n.isEmpty();)if(n=n,l=t?r(n.key,t):1,i&&(l*=-1),l<0)this.isReverse_?n=n.left:n=n.right;else if(l===0){this.nodeStack_.push(n);break}else this.nodeStack_.push(n),this.isReverse_?n=n.right:n=n.left}getNext(){if(this.nodeStack_.length===0)return null;let n=this.nodeStack_.pop(),t;if(this.resultGenerator_?t=this.resultGenerator_(n.key,n.value):t={key:n.key,value:n.value},this.isReverse_)for(n=n.left;!n.isEmpty();)this.nodeStack_.push(n),n=n.right;else for(n=n.right;!n.isEmpty();)this.nodeStack_.push(n),n=n.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let n=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(n.key,n.value):{key:n.key,value:n.value}}},Jr=(()=>{class e{constructor(t,r,i,o,l){this.key=t,this.value=r,this.color=i??e.RED,this.left=o??Tr.EMPTY_NODE,this.right=l??Tr.EMPTY_NODE}copy(t,r,i,o,l){return new e(t??this.key,r??this.value,i??this.color,o??this.left,l??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let o=this,l=i(t,o.key);return l<0?o=o.copy(null,null,null,o.left.insert(t,r,i),null):l===0?o=o.copy(null,r,null,null,null):o=o.copy(null,null,null,null,o.right.insert(t,r,i)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return Tr.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,o;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),r(t,i.key)===0){if(i.right.isEmpty())return Tr.EMPTY_NODE;o=i.right.min_(),i=i.copy(o.key,o.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){let t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){let t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){let t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){let t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return e.RED=!0,e.BLACK=!1,e})(),jy=class{copy(n,t,r,i,o){return this}insert(n,t,r){return new Jr(n,t,null)}remove(n,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},Tr=class e{constructor(n,t=e.EMPTY_NODE){this.comparator_=n,this.root_=t}insert(n,t){return new e(this.comparator_,this.root_.insert(n,t,this.comparator_).copy(null,null,Jr.BLACK,null,null))}remove(n){return new e(this.comparator_,this.root_.remove(n,this.comparator_).copy(null,null,Jr.BLACK,null,null))}get(n){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(n,r.key),t===0)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(n){let t,r=this.root_,i=null;for(;!r.isEmpty();)if(t=this.comparator_(n,r.key),t===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else t<0?r=r.left:t>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(n){return this.root_.inorderTraversal(n)}reverseTraversal(n){return this.root_.reverseTraversal(n)}getIterator(n){return new Ga(this.root_,null,this.comparator_,!1,n)}getIteratorFrom(n,t){return new Ga(this.root_,n,this.comparator_,!1,t)}getReverseIteratorFrom(n,t){return new Ga(this.root_,n,this.comparator_,!0,t)}getReverseIterator(n){return new Ga(this.root_,null,this.comparator_,!0,n)}};Tr.EMPTY_NODE=new jy;function q5(e,n){return Rs(e.name,n.name)}function T_(e,n){return Rs(e,n)}var Hy;function Y5(e){Hy=e}var XS=function(e){return typeof e=="number"?"number:"+NS(e):"string:"+e},QS=function(e){if(e.isLeafNode()){let n=e.val();ee(typeof n=="string"||typeof n=="number"||typeof n=="object"&&Kr(n,".sv"),"Priority must be a string or number.")}else ee(e===Hy||e.isEmpty(),"priority of unexpected type.");ee(e===Hy||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var dS,Xa=(()=>{class e{constructor(t,r=e.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,ee(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),QS(this.priorityNode_)}static set __childrenNodeConstructor(t){dS=t}static get __childrenNodeConstructor(){return dS}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new e(this.value_,t)}getImmediateChild(t){return t===".priority"?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Ze(t)?this:$e(t)===".priority"?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return t===".priority"?this.updatePriority(r):r.isEmpty()&&t!==".priority"?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){let i=$e(t);return i===null?r:r.isEmpty()&&i!==".priority"?this:(ee(i!==".priority"||Po(t)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(Rt(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+XS(this.priorityNode_.val())+":");let r=typeof this.value_;t+=r+":",r==="number"?t+=NS(this.value_):t+=this.value_,this.lazyHash_=AS(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:(ee(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){let r=typeof t.value_,i=typeof this.value_,o=e.VALUE_TYPE_ORDER.indexOf(r),l=e.VALUE_TYPE_ORDER.indexOf(i);return ee(o>=0,"Unknown leaf type: "+r),ee(l>=0,"Unknown leaf type: "+i),o===l?i==="object"?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:l-o}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){let r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}e.VALUE_TYPE_ORDER=["object","boolean","number","string"];return e})(),KS,JS;function Z5(e){KS=e}function X5(e){JS=e}var zy=class extends Za{compare(n,t){let r=n.node.getPriority(),i=t.node.getPriority(),o=r.compareTo(i);return o===0?Rs(n.name,t.name):o}isDefinedOn(n){return!n.getPriority().isEmpty()}indexedValueChanged(n,t){return!n.getPriority().equals(t.getPriority())}minPost(){return qe.MIN}maxPost(){return new qe(Os,new Xa("[PRIORITY-POST]",JS))}makePost(n,t){let r=KS(n);return new qe(t,new Xa("[PRIORITY-POST]",r))}toString(){return".priority"}},$t=new zy;var Q5=Math.log(2),Wy=class{constructor(n){let t=o=>parseInt(Math.log(o)/Q5,10),r=o=>parseInt(Array(o+1).join("1"),2);this.count=t(n+1),this.current_=this.count-1;let i=r(this.count);this.bits_=n+1&i}nextBitIsOne(){let n=!(this.bits_&1<<this.current_);return this.current_--,n}},kh=function(e,n,t,r){e.sort(n);let i=function(g,m){let v=m-g,b,I;if(v===0)return null;if(v===1)return b=e[g],I=t?t(b):b,new Jr(I,b.node,Jr.BLACK,null,null);{let T=parseInt(v/2,10)+g,P=i(g,T),z=i(T+1,m);return b=e[T],I=t?t(b):b,new Jr(I,b.node,Jr.BLACK,P,z)}},o=function(g){let m=null,v=null,b=e.length,I=function(P,z){let Z=b-P,q=b;b-=P;let ce=i(Z+1,q),Ke=e[Z],ye=t?t(Ke):Ke;T(new Jr(ye,Ke.node,z,null,ce))},T=function(P){m?(m.left=P,m=P):(v=P,m=P)};for(let P=0;P<g.count;++P){let z=g.nextBitIsOne(),Z=Math.pow(2,g.count-(P+1));z?I(Z,Jr.BLACK):(I(Z,Jr.BLACK),I(Z,Jr.RED))}return v},l=new Wy(e.length),h=o(l);return new Tr(r||n,h)};var xy,Wa={},Qa=class e{constructor(n,t){this.indexes_=n,this.indexSet_=t}static get Default(){return ee(Wa&&$t,"ChildrenNode.ts has not been loaded"),xy=xy||new e({".priority":Wa},{".priority":$t}),xy}get(n){let t=Ss(this.indexes_,n);if(!t)throw new Error("No index defined for "+n);return t instanceof Tr?t:null}hasIndex(n){return Kr(this.indexSet_,n.toString())}addIndex(n,t){ee(n!==qa,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let r=[],i=!1,o=t.getIterator(qe.Wrap),l=o.getNext();for(;l;)i=i||n.isDefinedOn(l.node),r.push(l),l=o.getNext();let h;i?h=kh(r,n.getCompare()):h=Wa;let g=n.toString(),m=Object.assign({},this.indexSet_);m[g]=n;let v=Object.assign({},this.indexes_);return v[g]=h,new e(v,m)}addToIndexes(n,t){let r=Lc(this.indexes_,(i,o)=>{let l=Ss(this.indexSet_,o);if(ee(l,"Missing index implementation for "+o),i===Wa)if(l.isDefinedOn(n.node)){let h=[],g=t.getIterator(qe.Wrap),m=g.getNext();for(;m;)m.name!==n.name&&h.push(m),m=g.getNext();return h.push(n),kh(h,l.getCompare())}else return Wa;else{let h=t.get(n.name),g=i;return h&&(g=g.remove(new qe(n.name,h))),g.insert(n,n.node)}});return new e(r,this.indexSet_)}removeFromIndexes(n,t){let r=Lc(this.indexes_,i=>{if(i===Wa)return i;{let o=t.get(n.name);return o?i.remove(new qe(n.name,o)):i}});return new e(r,this.indexSet_)}};var $c,Pe=(()=>{class e{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&QS(this.priorityNode_),this.children_.isEmpty()&&ee(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return $c||($c=new e(new Tr(T_),null,Qa.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||$c}updatePriority(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)}getImmediateChild(t){if(t===".priority")return this.getPriority();{let r=this.children_.get(t);return r===null?$c:r}}getChild(t){let r=$e(t);return r===null?this:this.getImmediateChild(r).getChild(Rt(t))}hasChild(t){return this.children_.get(t)!==null}updateImmediateChild(t,r){if(ee(r,"We should always be passing snapshot nodes"),t===".priority")return this.updatePriority(r);{let i=new qe(t,r),o,l;r.isEmpty()?(o=this.children_.remove(t),l=this.indexMap_.removeFromIndexes(i,this.children_)):(o=this.children_.insert(t,r),l=this.indexMap_.addToIndexes(i,this.children_));let h=o.isEmpty()?$c:this.priorityNode_;return new e(o,h,l)}}updateChild(t,r){let i=$e(t);if(i===null)return r;{ee($e(t)!==".priority"||Po(t)===1,".priority must be the last token in a path");let o=this.getImmediateChild(i).updateChild(Rt(t),r);return this.updateImmediateChild(i,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;let r={},i=0,o=0,l=!0;if(this.forEachChild($t,(h,g)=>{r[h]=g.val(t),i++,l&&e.INTEGER_REGEXP_.test(h)?o=Math.max(o,Number(h)):l=!1}),!t&&l&&o<2*i){let h=[];for(let g in r)h[g]=r[g];return h}else return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let t="";this.getPriority().isEmpty()||(t+="priority:"+XS(this.getPriority().val())+":"),this.forEachChild($t,(r,i)=>{let o=i.hash();o!==""&&(t+=":"+r+":"+o)}),this.lazyHash_=t===""?"":AS(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){let o=this.resolveIndex_(i);if(o){let l=o.getPredecessorKey(new qe(t,r));return l?l.name:null}else return this.children_.getPredecessorKey(t)}getFirstChildName(t){let r=this.resolveIndex_(t);if(r){let i=r.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(t){let r=this.getFirstChildName(t);return r?new qe(r,this.children_.get(r)):null}getLastChildName(t){let r=this.resolveIndex_(t);if(r){let i=r.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(t){let r=this.getLastChildName(t);return r?new qe(r,this.children_.get(r)):null}forEachChild(t,r){let i=this.resolveIndex_(t);return i?i.inorderTraversal(o=>r(o.name,o.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){let i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,o=>o);{let o=this.children_.getIteratorFrom(t.name,qe.Wrap),l=o.peek();for(;l!=null&&r.compare(l,t)<0;)o.getNext(),l=o.peek();return o}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){let i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,o=>o);{let o=this.children_.getReverseIteratorFrom(t.name,qe.Wrap),l=o.peek();for(;l!=null&&r.compare(l,t)>0;)o.getNext(),l=o.peek();return o}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===uu?-1:0}withIndex(t){if(t===qa||this.indexMap_.hasIndex(t))return this;{let r=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===qa||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{let r=t;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){let i=this.getIterator($t),o=r.getIterator($t),l=i.getNext(),h=o.getNext();for(;l&&h;){if(l.name!==h.name||!l.node.equals(h.node))return!1;l=i.getNext(),h=o.getNext()}return l===null&&h===null}else return!1;else return!1}}resolveIndex_(t){return t===qa?null:this.indexMap_.get(t.toString())}}return e.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,e})(),Gy=class extends Pe{constructor(){super(new Tr(T_),Pe.EMPTY_NODE,Qa.Default)}compareTo(n){return n===this?0:1}equals(n){return n===this}getPriority(){return this}getImmediateChild(n){return Pe.EMPTY_NODE}isEmpty(){return!1}},uu=new Gy;Object.defineProperties(qe,{MIN:{value:new qe(Ya,Pe.EMPTY_NODE)},MAX:{value:new qe(Os,uu)}});Ph.__EMPTY_NODE=Pe.EMPTY_NODE;Xa.__childrenNodeConstructor=Pe;Y5(uu);X5(uu);var K5=!0;function un(e,n=null){if(e===null)return Pe.EMPTY_NODE;if(typeof e=="object"&&".priority"in e&&(n=e[".priority"]),ee(n===null||typeof n=="string"||typeof n=="number"||typeof n=="object"&&".sv"in n,"Invalid priority type found: "+typeof n),typeof e=="object"&&".value"in e&&e[".value"]!==null&&(e=e[".value"]),typeof e!="object"||".sv"in e){let t=e;return new Xa(t,un(n))}if(!(e instanceof Array)&&K5){let t=[],r=!1;if(Mn(e,(l,h)=>{if(l.substring(0,1)!=="."){let g=un(h);g.isEmpty()||(r=r||!g.getPriority().isEmpty(),t.push(new qe(l,g)))}}),t.length===0)return Pe.EMPTY_NODE;let o=kh(t,q5,l=>l.name,T_);if(r){let l=kh(t,$t.getCompare());return new Pe(o,un(n),new Qa({".priority":l},{".priority":$t}))}else return new Pe(o,un(n),Qa.Default)}else{let t=Pe.EMPTY_NODE;return Mn(e,(r,i)=>{if(Kr(e,r)&&r.substring(0,1)!=="."){let o=un(i);(o.isLeafNode()||!o.isEmpty())&&(t=t.updateImmediateChild(r,o))}}),t.updatePriority(un(n))}}Z5(un);var $y=class extends Za{constructor(n){super(),this.indexPath_=n,ee(!Ze(n)&&$e(n)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(n){return n.getChild(this.indexPath_)}isDefinedOn(n){return!n.getChild(this.indexPath_).isEmpty()}compare(n,t){let r=this.extractChild(n.node),i=this.extractChild(t.node),o=r.compareTo(i);return o===0?Rs(n.name,t.name):o}makePost(n,t){let r=un(n),i=Pe.EMPTY_NODE.updateChild(this.indexPath_,r);return new qe(t,i)}maxPost(){let n=Pe.EMPTY_NODE.updateChild(this.indexPath_,uu);return new qe(Os,n)}toString(){return Jc(this.indexPath_,0).join("/")}};var qy=class extends Za{compare(n,t){let r=n.node.compareTo(t.node);return r===0?Rs(n.name,t.name):r}isDefinedOn(n){return!0}indexedValueChanged(n,t){return!n.equals(t)}minPost(){return qe.MIN}maxPost(){return qe.MAX}makePost(n,t){let r=un(n);return new qe(t,r)}toString(){return".value"}},J5=new qy;function eD(e){return{type:"value",snapshotNode:e}}function Ka(e,n){return{type:"child_added",snapshotNode:n,childName:e}}function eu(e,n){return{type:"child_removed",snapshotNode:n,childName:e}}function tu(e,n,t){return{type:"child_changed",snapshotNode:n,childName:e,oldSnap:t}}function eB(e,n){return{type:"child_moved",snapshotNode:n,childName:e}}var nu=class{constructor(n){this.index_=n}updateChild(n,t,r,i,o,l){ee(n.isIndexed(this.index_),"A node must be indexed if only a child is updated");let h=n.getImmediateChild(t);return h.getChild(i).equals(r.getChild(i))&&h.isEmpty()===r.isEmpty()||(l!=null&&(r.isEmpty()?n.hasChild(t)?l.trackChildChange(eu(t,h)):ee(n.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?l.trackChildChange(Ka(t,r)):l.trackChildChange(tu(t,r,h))),n.isLeafNode()&&r.isEmpty())?n:n.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(n,t,r){return r!=null&&(n.isLeafNode()||n.forEachChild($t,(i,o)=>{t.hasChild(i)||r.trackChildChange(eu(i,o))}),t.isLeafNode()||t.forEachChild($t,(i,o)=>{if(n.hasChild(i)){let l=n.getImmediateChild(i);l.equals(o)||r.trackChildChange(tu(i,o,l))}else r.trackChildChange(Ka(i,o))})),t.withIndex(this.index_)}updatePriority(n,t){return n.isEmpty()?Pe.EMPTY_NODE:n.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}};var Fh=class e{constructor(n){this.indexedFilter_=new nu(n.getIndex()),this.index_=n.getIndex(),this.startPost_=e.getStartPost_(n),this.endPost_=e.getEndPost_(n),this.startIsInclusive_=!n.startAfterSet_,this.endIsInclusive_=!n.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(n){let t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),n)<=0:this.index_.compare(this.getStartPost(),n)<0,r=this.endIsInclusive_?this.index_.compare(n,this.getEndPost())<=0:this.index_.compare(n,this.getEndPost())<0;return t&&r}updateChild(n,t,r,i,o,l){return this.matches(new qe(t,r))||(r=Pe.EMPTY_NODE),this.indexedFilter_.updateChild(n,t,r,i,o,l)}updateFullNode(n,t,r){t.isLeafNode()&&(t=Pe.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(Pe.EMPTY_NODE);let o=this;return t.forEachChild($t,(l,h)=>{o.matches(new qe(l,h))||(i=i.updateImmediateChild(l,Pe.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(n,i,r)}updatePriority(n,t){return n}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(n){if(n.hasStart()){let t=n.getIndexStartName();return n.getIndex().makePost(n.getIndexStartValue(),t)}else return n.getIndex().minPost()}static getEndPost_(n){if(n.hasEnd()){let t=n.getIndexEndName();return n.getIndex().makePost(n.getIndexEndValue(),t)}else return n.getIndex().maxPost()}};var Yy=class{constructor(n){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{let r=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=t=>{let r=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new Fh(n),this.index_=n.getIndex(),this.limit_=n.getLimit(),this.reverse_=!n.isViewFromLeft(),this.startIsInclusive_=!n.startAfterSet_,this.endIsInclusive_=!n.endBeforeSet_}updateChild(n,t,r,i,o,l){return this.rangedFilter_.matches(new qe(t,r))||(r=Pe.EMPTY_NODE),n.getImmediateChild(t).equals(r)?n:n.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(n,t,r,i,o,l):this.fullLimitUpdateChild_(n,t,r,o,l)}updateFullNode(n,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=Pe.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<t.numChildren()&&t.isIndexed(this.index_)){i=Pe.EMPTY_NODE.withIndex(this.index_);let o;this.reverse_?o=t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):o=t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let l=0;for(;o.hasNext()&&l<this.limit_;){let h=o.getNext();if(this.withinDirectionalStart(h))if(this.withinDirectionalEnd(h))i=i.updateImmediateChild(h.name,h.node),l++;else break;else continue}}else{i=t.withIndex(this.index_),i=i.updatePriority(Pe.EMPTY_NODE);let o;this.reverse_?o=i.getReverseIterator(this.index_):o=i.getIterator(this.index_);let l=0;for(;o.hasNext();){let h=o.getNext();l<this.limit_&&this.withinDirectionalStart(h)&&this.withinDirectionalEnd(h)?l++:i=i.updateImmediateChild(h.name,Pe.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(n,i,r)}updatePriority(n,t){return n}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(n,t,r,i,o){let l;if(this.reverse_){let b=this.index_.getCompare();l=(I,T)=>b(T,I)}else l=this.index_.getCompare();let h=n;ee(h.numChildren()===this.limit_,"");let g=new qe(t,r),m=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),v=this.rangedFilter_.matches(g);if(h.hasChild(t)){let b=h.getImmediateChild(t),I=i.getChildAfterChild(this.index_,m,this.reverse_);for(;I!=null&&(I.name===t||h.hasChild(I.name));)I=i.getChildAfterChild(this.index_,I,this.reverse_);let T=I==null?1:l(I,g);if(v&&!r.isEmpty()&&T>=0)return o?.trackChildChange(tu(t,r,b)),h.updateImmediateChild(t,r);{o?.trackChildChange(eu(t,b));let z=h.updateImmediateChild(t,Pe.EMPTY_NODE);return I!=null&&this.rangedFilter_.matches(I)?(o?.trackChildChange(Ka(I.name,I.node)),z.updateImmediateChild(I.name,I.node)):z}}else return r.isEmpty()?n:v&&l(m,g)>=0?(o!=null&&(o.trackChildChange(eu(m.name,m.node)),o.trackChildChange(Ka(t,r))),h.updateImmediateChild(t,r).updateImmediateChild(m.name,Pe.EMPTY_NODE)):n}};var Zy=class e{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=$t}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return ee(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return ee(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ya}hasEnd(){return this.endSet_}getIndexEndValue(){return ee(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return ee(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Os}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return ee(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===$t}copy(){let n=new e;return n.limitSet_=this.limitSet_,n.limit_=this.limit_,n.startSet_=this.startSet_,n.startAfterSet_=this.startAfterSet_,n.indexStartValue_=this.indexStartValue_,n.startNameSet_=this.startNameSet_,n.indexStartName_=this.indexStartName_,n.endSet_=this.endSet_,n.endBeforeSet_=this.endBeforeSet_,n.indexEndValue_=this.indexEndValue_,n.endNameSet_=this.endNameSet_,n.indexEndName_=this.indexEndName_,n.index_=this.index_,n.viewFrom_=this.viewFrom_,n}};function tB(e){return e.loadsAllData()?new nu(e.getIndex()):e.hasLimit()?new Yy(e):new Fh(e)}function fS(e){let n={};if(e.isDefault())return n;let t;if(e.index_===$t?t="$priority":e.index_===J5?t="$value":e.index_===qa?t="$key":(ee(e.index_ instanceof $y,"Unrecognized index type!"),t=e.index_.toString()),n.orderBy=Jt(t),e.startSet_){let r=e.startAfterSet_?"startAfter":"startAt";n[r]=Jt(e.indexStartValue_),e.startNameSet_&&(n[r]+=","+Jt(e.indexStartName_))}if(e.endSet_){let r=e.endBeforeSet_?"endBefore":"endAt";n[r]=Jt(e.indexEndValue_),e.endNameSet_&&(n[r]+=","+Jt(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?n.limitToFirst=e.limit_:n.limitToLast=e.limit_),n}function hS(e){let n={};if(e.startSet_&&(n.sp=e.indexStartValue_,e.startNameSet_&&(n.sn=e.indexStartName_),n.sin=!e.startAfterSet_),e.endSet_&&(n.ep=e.indexEndValue_,e.endNameSet_&&(n.en=e.indexEndName_),n.ein=!e.endBeforeSet_),e.limitSet_){n.l=e.limit_;let t=e.viewFrom_;t===""&&(e.isViewFromLeft()?t="l":t="r"),n.vf=t}return e.index_!==$t&&(n.i=e.index_.toString()),n}var Xy=class e extends Oh{constructor(n,t,r,i){super(),this.repoInfo_=n,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=cu("p:rest:"),this.listens_={}}reportStats(n){throw new Error("Method not implemented.")}static getListenId_(n,t){return t!==void 0?"tag$"+t:(ee(n._queryParams.isDefault(),"should have a tag if it's not a default query."),n._path.toString())}listen(n,t,r,i){let o=n._path.toString();this.log_("Listen called for "+o+" "+n._queryIdentifier);let l=e.getListenId_(n,r),h={};this.listens_[l]=h;let g=fS(n._queryParams);this.restRequest_(o+".json",g,(m,v)=>{let b=v;if(m===404&&(b=null,m=null),m===null&&this.onDataUpdate_(o,b,!1,r),Ss(this.listens_,l)===h){let I;m?m===401?I="permission_denied":I="rest_error:"+m:I="ok",i(I,null)}})}unlisten(n,t){let r=e.getListenId_(n,t);delete this.listens_[r]}get(n){let t=fS(n._queryParams),r=n._path.toString(),i=new qi;return this.restRequest_(r+".json",t,(o,l)=>{let h=l;o===404&&(h=null,o=null),o===null?(this.onDataUpdate_(r,h,!1,null),i.resolve(h)):i.reject(new Error(h))}),i.promise}refreshAuthToken(n){}restRequest_(n,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,o])=>{i&&i.accessToken&&(t.auth=i.accessToken),o&&o.token&&(t.ac=o.token);let l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+n+"?ns="+this.repoInfo_.namespace+O2(t);this.log_("Sending REST request for "+l);let h=new XMLHttpRequest;h.onreadystatechange=()=>{if(r&&h.readyState===4){this.log_("REST Response for "+l+" received. status:",h.status,"response:",h.responseText);let g=null;if(h.status>=200&&h.status<300){try{g=Ha(h.responseText)}catch{$n("Failed to parse JSON response for "+l+": "+h.responseText)}r(null,g)}else h.status!==401&&h.status!==404&&$n("Got unsuccessful REST response for "+l+" Status: "+h.status),r(h.status);r=null}},h.open("GET",l,!0),h.send()})}};var Qy=class{constructor(){this.rootNode_=Pe.EMPTY_NODE}getNode(n){return this.rootNode_.getChild(n)}updateSnapshot(n,t){this.rootNode_=this.rootNode_.updateChild(n,t)}};function Lh(){return{value:null,children:new Map}}function tD(e,n,t){if(Ze(n))e.value=t,e.children.clear();else if(e.value!==null)e.value=e.value.updateChild(n,t);else{let r=$e(n);e.children.has(r)||e.children.set(r,Lh());let i=e.children.get(r);n=Rt(n),tD(i,n,t)}}function Ky(e,n,t){e.value!==null?t(n,e.value):nB(e,(r,i)=>{let o=new _t(n.toString()+"/"+r);Ky(i,o,t)})}function nB(e,n){e.children.forEach((t,r)=>{n(r,t)})}var Jy=class{constructor(n){this.collection_=n,this.last_=null}get(){let n=this.collection_.get(),t=Object.assign({},n);return this.last_&&Mn(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=n,t}};var pS=10*1e3,rB=30*1e3,iB=5*60*1e3,e_=class{constructor(n,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Jy(n);let r=pS+(rB-pS)*Math.random();Yc(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){let n=this.statsListener_.get(),t={},r=!1;Mn(n,(i,o)=>{o>0&&Kr(this.statsToReport_,i)&&(t[i]=o,r=!0)}),r&&this.server_.reportStats(t),Yc(this.reportStats_.bind(this),Math.floor(Math.random()*2*iB))}};var wi=function(e){return e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",e}(wi||{});function A_(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function O_(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function N_(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}var t_=class e{constructor(n,t,r){this.path=n,this.affectedTree=t,this.revert=r,this.type=wi.ACK_USER_WRITE,this.source=A_()}operationForChild(n){if(Ze(this.path)){if(this.affectedTree.value!=null)return ee(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let t=this.affectedTree.subtree(new _t(n));return new e(ct(),t,this.revert)}}else return ee($e(this.path)===n,"operationForChild called for unrelated child."),new e(Rt(this.path),this.affectedTree,this.revert)}};var Bh=class e{constructor(n,t){this.source=n,this.path=t,this.type=wi.LISTEN_COMPLETE}operationForChild(n){return Ze(this.path)?new e(this.source,ct()):new e(this.source,Rt(this.path))}};var Ja=class e{constructor(n,t,r){this.source=n,this.path=t,this.snap=r,this.type=wi.OVERWRITE}operationForChild(n){return Ze(this.path)?new e(this.source,ct(),this.snap.getImmediateChild(n)):new e(this.source,Rt(this.path),this.snap)}};var ru=class e{constructor(n,t,r){this.source=n,this.path=t,this.children=r,this.type=wi.MERGE}operationForChild(n){if(Ze(this.path)){let t=this.children.subtree(new _t(n));return t.isEmpty()?null:t.value?new Ja(this.source,ct(),t.value):new e(this.source,ct(),t)}else return ee($e(this.path)===n,"Can't get a merge for a child not on the path of the operation"),new e(this.source,Rt(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var vi=class{constructor(n,t,r){this.node_=n,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(n){if(Ze(n))return this.isFullyInitialized()&&!this.filtered_;let t=$e(n);return this.isCompleteForChild(t)}isCompleteForChild(n){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(n)}getNode(){return this.node_}};var n_=class{constructor(n){this.query_=n,this.index_=this.query_._queryParams.getIndex()}};function oB(e,n,t,r){let i=[],o=[];return n.forEach(l=>{l.type==="child_changed"&&e.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&o.push(eB(l.childName,l.snapshotNode))}),qc(e,i,"child_removed",n,r,t),qc(e,i,"child_added",n,r,t),qc(e,i,"child_moved",o,r,t),qc(e,i,"child_changed",n,r,t),qc(e,i,"value",n,r,t),i}function qc(e,n,t,r,i,o){let l=r.filter(h=>h.type===t);l.sort((h,g)=>aB(e,h,g)),l.forEach(h=>{let g=sB(e,h,o);i.forEach(m=>{m.respondsTo(h.type)&&n.push(m.createEvent(g,e.query_))})})}function sB(e,n,t){return n.type==="value"||n.type==="child_removed"||(n.prevName=t.getPredecessorChildName(n.childName,n.snapshotNode,e.index_)),n}function aB(e,n,t){if(n.childName==null||t.childName==null)throw Is("Should only compare child_ events.");let r=new qe(n.childName,n.snapshotNode),i=new qe(t.childName,t.snapshotNode);return e.index_.compare(r,i)}function Kh(e,n){return{eventCache:e,serverCache:n}}function Xc(e,n,t,r){return Kh(new vi(n,t,r),e.serverCache)}function nD(e,n,t,r){return Kh(e.eventCache,new vi(n,t,r))}function Uh(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function Ns(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}var Ey,lB=()=>(Ey||(Ey=new Tr(l5)),Ey),qn=class e{constructor(n,t=lB()){this.value=n,this.children=t}static fromObject(n){let t=new e(null);return Mn(n,(r,i)=>{t=t.set(new _t(r),i)}),t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(n,t){if(this.value!=null&&t(this.value))return{path:ct(),value:this.value};if(Ze(n))return null;{let r=$e(n),i=this.children.get(r);if(i!==null){let o=i.findRootMostMatchingPathAndValue(Rt(n),t);return o!=null?{path:Gt(new _t(r),o.path),value:o.value}:null}else return null}}findRootMostValueAndPath(n){return this.findRootMostMatchingPathAndValue(n,()=>!0)}subtree(n){if(Ze(n))return this;{let t=$e(n),r=this.children.get(t);return r!==null?r.subtree(Rt(n)):new e(null)}}set(n,t){if(Ze(n))return new e(t,this.children);{let r=$e(n),o=(this.children.get(r)||new e(null)).set(Rt(n),t),l=this.children.insert(r,o);return new e(this.value,l)}}remove(n){if(Ze(n))return this.children.isEmpty()?new e(null):new e(null,this.children);{let t=$e(n),r=this.children.get(t);if(r){let i=r.remove(Rt(n)),o;return i.isEmpty()?o=this.children.remove(t):o=this.children.insert(t,i),this.value===null&&o.isEmpty()?new e(null):new e(this.value,o)}else return this}}get(n){if(Ze(n))return this.value;{let t=$e(n),r=this.children.get(t);return r?r.get(Rt(n)):null}}setTree(n,t){if(Ze(n))return t;{let r=$e(n),o=(this.children.get(r)||new e(null)).setTree(Rt(n),t),l;return o.isEmpty()?l=this.children.remove(r):l=this.children.insert(r,o),new e(this.value,l)}}fold(n){return this.fold_(ct(),n)}fold_(n,t){let r={};return this.children.inorderTraversal((i,o)=>{r[i]=o.fold_(Gt(n,i),t)}),t(n,this.value,r)}findOnPath(n,t){return this.findOnPath_(n,ct(),t)}findOnPath_(n,t,r){let i=this.value?r(t,this.value):!1;if(i)return i;if(Ze(n))return null;{let o=$e(n),l=this.children.get(o);return l?l.findOnPath_(Rt(n),Gt(t,o),r):null}}foreachOnPath(n,t){return this.foreachOnPath_(n,ct(),t)}foreachOnPath_(n,t,r){if(Ze(n))return this;{this.value&&r(t,this.value);let i=$e(n),o=this.children.get(i);return o?o.foreachOnPath_(Rt(n),Gt(t,i),r):new e(null)}}foreach(n){this.foreach_(ct(),n)}foreach_(n,t){this.children.inorderTraversal((r,i)=>{i.foreach_(Gt(n,r),t)}),this.value&&t(n,this.value)}foreachChild(n){this.children.inorderTraversal((t,r)=>{r.value&&n(t,r.value)})}};var ei=class e{constructor(n){this.writeTree_=n}static empty(){return new e(new qn(null))}};function Qc(e,n,t){if(Ze(n))return new ei(new qn(t));{let r=e.writeTree_.findRootMostValueAndPath(n);if(r!=null){let i=r.path,o=r.value,l=Gn(i,n);return o=o.updateChild(l,t),new ei(e.writeTree_.set(i,o))}else{let i=new qn(t),o=e.writeTree_.setTree(n,i);return new ei(o)}}}function r_(e,n,t){let r=e;return Mn(t,(i,o)=>{r=Qc(r,Gt(n,i),o)}),r}function gS(e,n){if(Ze(n))return ei.empty();{let t=e.writeTree_.setTree(n,new qn(null));return new ei(t)}}function i_(e,n){return Ps(e,n)!=null}function Ps(e,n){let t=e.writeTree_.findRootMostValueAndPath(n);return t!=null?e.writeTree_.get(t.path).getChild(Gn(t.path,n)):null}function mS(e){let n=[],t=e.writeTree_.value;return t!=null?t.isLeafNode()||t.forEachChild($t,(r,i)=>{n.push(new qe(r,i))}):e.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&n.push(new qe(r,i.value))}),n}function No(e,n){if(Ze(n))return e;{let t=Ps(e,n);return t!=null?new ei(new qn(t)):new ei(e.writeTree_.subtree(n))}}function o_(e){return e.writeTree_.isEmpty()}function el(e,n){return rD(ct(),e.writeTree_,n)}function rD(e,n,t){if(n.value!=null)return t.updateChild(e,n.value);{let r=null;return n.children.inorderTraversal((i,o)=>{i===".priority"?(ee(o.value!==null,"Priority writes must always be leaf nodes"),r=o.value):t=rD(Gt(e,i),o,t)}),!t.getChild(e).isEmpty()&&r!==null&&(t=t.updateChild(Gt(e,".priority"),r)),t}}function Jh(e,n){return aD(n,e)}function cB(e,n,t,r,i){ee(r>e.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),e.allWrites.push({path:n,snap:t,writeId:r,visible:i}),i&&(e.visibleWrites=Qc(e.visibleWrites,n,t)),e.lastWriteId=r}function uB(e,n,t,r){ee(r>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:n,children:t,writeId:r,visible:!0}),e.visibleWrites=r_(e.visibleWrites,n,t),e.lastWriteId=r}function dB(e,n){for(let t=0;t<e.allWrites.length;t++){let r=e.allWrites[t];if(r.writeId===n)return r}return null}function fB(e,n){let t=e.allWrites.findIndex(h=>h.writeId===n);ee(t>=0,"removeWrite called with nonexistent writeId.");let r=e.allWrites[t];e.allWrites.splice(t,1);let i=r.visible,o=!1,l=e.allWrites.length-1;for(;i&&l>=0;){let h=e.allWrites[l];h.visible&&(l>=t&&hB(h,r.path)?i=!1:Mr(r.path,h.path)&&(o=!0)),l--}if(i){if(o)return pB(e),!0;if(r.snap)e.visibleWrites=gS(e.visibleWrites,r.path);else{let h=r.children;Mn(h,g=>{e.visibleWrites=gS(e.visibleWrites,Gt(r.path,g))})}return!0}else return!1}function hB(e,n){if(e.snap)return Mr(e.path,n);for(let t in e.children)if(e.children.hasOwnProperty(t)&&Mr(Gt(e.path,t),n))return!0;return!1}function pB(e){e.visibleWrites=iD(e.allWrites,gB,ct()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}function gB(e){return e.visible}function iD(e,n,t){let r=ei.empty();for(let i=0;i<e.length;++i){let o=e[i];if(n(o)){let l=o.path,h;if(o.snap)Mr(t,l)?(h=Gn(t,l),r=Qc(r,h,o.snap)):Mr(l,t)&&(h=Gn(l,t),r=Qc(r,ct(),o.snap.getChild(h)));else if(o.children){if(Mr(t,l))h=Gn(t,l),r=r_(r,h,o.children);else if(Mr(l,t))if(h=Gn(l,t),Ze(h))r=r_(r,ct(),o.children);else{let g=Ss(o.children,$e(h));if(g){let m=g.getChild(Rt(h));r=Qc(r,ct(),m)}}}else throw Is("WriteRecord should have .snap or .children")}}return r}function oD(e,n,t,r,i){if(!r&&!i){let o=Ps(e.visibleWrites,n);if(o!=null)return o;{let l=No(e.visibleWrites,n);if(o_(l))return t;if(t==null&&!i_(l,ct()))return null;{let h=t||Pe.EMPTY_NODE;return el(l,h)}}}else{let o=No(e.visibleWrites,n);if(!i&&o_(o))return t;if(!i&&t==null&&!i_(o,ct()))return null;{let l=function(m){return(m.visible||i)&&(!r||!~r.indexOf(m.writeId))&&(Mr(m.path,n)||Mr(n,m.path))},h=iD(e.allWrites,l,n),g=t||Pe.EMPTY_NODE;return el(h,g)}}}function mB(e,n,t){let r=Pe.EMPTY_NODE,i=Ps(e.visibleWrites,n);if(i)return i.isLeafNode()||i.forEachChild($t,(o,l)=>{r=r.updateImmediateChild(o,l)}),r;if(t){let o=No(e.visibleWrites,n);return t.forEachChild($t,(l,h)=>{let g=el(No(o,new _t(l)),h);r=r.updateImmediateChild(l,g)}),mS(o).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}else{let o=No(e.visibleWrites,n);return mS(o).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}}function yB(e,n,t,r,i){ee(r||i,"Either existingEventSnap or existingServerSnap must exist");let o=Gt(n,t);if(i_(e.visibleWrites,o))return null;{let l=No(e.visibleWrites,o);return o_(l)?i.getChild(t):el(l,i.getChild(t))}}function _B(e,n,t,r){let i=Gt(n,t),o=Ps(e.visibleWrites,i);if(o!=null)return o;if(r.isCompleteForChild(t)){let l=No(e.visibleWrites,i);return el(l,r.getNode().getImmediateChild(t))}else return null}function CB(e,n){return Ps(e.visibleWrites,n)}function wB(e,n,t,r,i,o,l){let h,g=No(e.visibleWrites,n),m=Ps(g,ct());if(m!=null)h=m;else if(t!=null)h=el(g,t);else return[];if(h=h.withIndex(l),!h.isEmpty()&&!h.isLeafNode()){let v=[],b=l.getCompare(),I=o?h.getReverseIteratorFrom(r,l):h.getIteratorFrom(r,l),T=I.getNext();for(;T&&v.length<i;)b(T,r)!==0&&v.push(T),T=I.getNext();return v}else return[]}function vB(){return{visibleWrites:ei.empty(),allWrites:[],lastWriteId:-1}}function Vh(e,n,t,r){return oD(e.writeTree,e.treePath,n,t,r)}function R_(e,n){return mB(e.writeTree,e.treePath,n)}function yS(e,n,t,r){return yB(e.writeTree,e.treePath,n,t,r)}function jh(e,n){return CB(e.writeTree,Gt(e.treePath,n))}function bB(e,n,t,r,i,o){return wB(e.writeTree,e.treePath,n,t,r,i,o)}function P_(e,n,t){return _B(e.writeTree,e.treePath,n,t)}function sD(e,n){return aD(Gt(e.treePath,n),e.writeTree)}function aD(e,n){return{treePath:e,writeTree:n}}var s_=class{constructor(){this.changeMap=new Map}trackChildChange(n){let t=n.type,r=n.childName;ee(t==="child_added"||t==="child_changed"||t==="child_removed","Only child changes supported for tracking"),ee(r!==".priority","Only non-priority child changes can be tracked.");let i=this.changeMap.get(r);if(i){let o=i.type;if(t==="child_added"&&o==="child_removed")this.changeMap.set(r,tu(r,n.snapshotNode,i.snapshotNode));else if(t==="child_removed"&&o==="child_added")this.changeMap.delete(r);else if(t==="child_removed"&&o==="child_changed")this.changeMap.set(r,eu(r,i.oldSnap));else if(t==="child_changed"&&o==="child_added")this.changeMap.set(r,Ka(r,n.snapshotNode));else if(t==="child_changed"&&o==="child_changed")this.changeMap.set(r,tu(r,n.snapshotNode,i.oldSnap));else throw Is("Illegal combination of changes: "+n+" occurred after "+i)}else this.changeMap.set(r,n)}getChanges(){return Array.from(this.changeMap.values())}};var a_=class{getCompleteChild(n){return null}getChildAfterChild(n,t,r){return null}},lD=new a_,iu=class{constructor(n,t,r=null){this.writes_=n,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(n){let t=this.viewCache_.eventCache;if(t.isCompleteForChild(n))return t.getNode().getImmediateChild(n);{let r=this.optCompleteServerCache_!=null?new vi(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return P_(this.writes_,n,r)}}getChildAfterChild(n,t,r){let i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Ns(this.viewCache_),o=bB(this.writes_,i,t,1,r,n);return o.length===0?null:o[0]}};function xB(e){return{filter:e}}function EB(e,n){ee(n.eventCache.getNode().isIndexed(e.filter.getIndex()),"Event snap not indexed"),ee(n.serverCache.getNode().isIndexed(e.filter.getIndex()),"Server snap not indexed")}function IB(e,n,t,r,i){let o=new s_,l,h;if(t.type===wi.OVERWRITE){let m=t;m.source.fromUser?l=l_(e,n,m.path,m.snap,r,i,o):(ee(m.source.fromServer,"Unknown source."),h=m.source.tagged||n.serverCache.isFiltered()&&!Ze(m.path),l=Hh(e,n,m.path,m.snap,r,i,h,o))}else if(t.type===wi.MERGE){let m=t;m.source.fromUser?l=DB(e,n,m.path,m.children,r,i,o):(ee(m.source.fromServer,"Unknown source."),h=m.source.tagged||n.serverCache.isFiltered(),l=c_(e,n,m.path,m.children,r,i,h,o))}else if(t.type===wi.ACK_USER_WRITE){let m=t;m.revert?l=AB(e,n,m.path,r,i,o):l=MB(e,n,m.path,m.affectedTree,r,i,o)}else if(t.type===wi.LISTEN_COMPLETE)l=TB(e,n,t.path,r,o);else throw Is("Unknown operation type: "+t.type);let g=o.getChanges();return SB(n,l,g),{viewCache:l,changes:g}}function SB(e,n,t){let r=n.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=Uh(e);(t.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&t.push(eD(Uh(n)))}}function cD(e,n,t,r,i,o){let l=n.eventCache;if(jh(r,t)!=null)return n;{let h,g;if(Ze(t))if(ee(n.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),n.serverCache.isFiltered()){let m=Ns(n),v=m instanceof Pe?m:Pe.EMPTY_NODE,b=R_(r,v);h=e.filter.updateFullNode(n.eventCache.getNode(),b,o)}else{let m=Vh(r,Ns(n));h=e.filter.updateFullNode(n.eventCache.getNode(),m,o)}else{let m=$e(t);if(m===".priority"){ee(Po(t)===1,"Can't have a priority with additional path components");let v=l.getNode();g=n.serverCache.getNode();let b=yS(r,t,v,g);b!=null?h=e.filter.updatePriority(v,b):h=l.getNode()}else{let v=Rt(t),b;if(l.isCompleteForChild(m)){g=n.serverCache.getNode();let I=yS(r,t,l.getNode(),g);I!=null?b=l.getNode().getImmediateChild(m).updateChild(v,I):b=l.getNode().getImmediateChild(m)}else b=P_(r,m,n.serverCache);b!=null?h=e.filter.updateChild(l.getNode(),m,b,v,i,o):h=l.getNode()}}return Xc(n,h,l.isFullyInitialized()||Ze(t),e.filter.filtersNodes())}}function Hh(e,n,t,r,i,o,l,h){let g=n.serverCache,m,v=l?e.filter:e.filter.getIndexedFilter();if(Ze(t))m=v.updateFullNode(g.getNode(),r,null);else if(v.filtersNodes()&&!g.isFiltered()){let T=g.getNode().updateChild(t,r);m=v.updateFullNode(g.getNode(),T,null)}else{let T=$e(t);if(!g.isCompleteForPath(t)&&Po(t)>1)return n;let P=Rt(t),Z=g.getNode().getImmediateChild(T).updateChild(P,r);T===".priority"?m=v.updatePriority(g.getNode(),Z):m=v.updateChild(g.getNode(),T,Z,P,lD,null)}let b=nD(n,m,g.isFullyInitialized()||Ze(t),v.filtersNodes()),I=new iu(i,b,o);return cD(e,b,t,i,I,h)}function l_(e,n,t,r,i,o,l){let h=n.eventCache,g,m,v=new iu(i,n,o);if(Ze(t))m=e.filter.updateFullNode(n.eventCache.getNode(),r,l),g=Xc(n,m,!0,e.filter.filtersNodes());else{let b=$e(t);if(b===".priority")m=e.filter.updatePriority(n.eventCache.getNode(),r),g=Xc(n,m,h.isFullyInitialized(),h.isFiltered());else{let I=Rt(t),T=h.getNode().getImmediateChild(b),P;if(Ze(I))P=r;else{let z=v.getCompleteChild(b);z!=null?S_(I)===".priority"&&z.getChild(YS(I)).isEmpty()?P=z:P=z.updateChild(I,r):P=Pe.EMPTY_NODE}if(T.equals(P))g=n;else{let z=e.filter.updateChild(h.getNode(),b,P,I,v,l);g=Xc(n,z,h.isFullyInitialized(),e.filter.filtersNodes())}}}return g}function _S(e,n){return e.eventCache.isCompleteForChild(n)}function DB(e,n,t,r,i,o,l){let h=n;return r.foreach((g,m)=>{let v=Gt(t,g);_S(n,$e(v))&&(h=l_(e,h,v,m,i,o,l))}),r.foreach((g,m)=>{let v=Gt(t,g);_S(n,$e(v))||(h=l_(e,h,v,m,i,o,l))}),h}function CS(e,n,t){return t.foreach((r,i)=>{n=n.updateChild(r,i)}),n}function c_(e,n,t,r,i,o,l,h){if(n.serverCache.getNode().isEmpty()&&!n.serverCache.isFullyInitialized())return n;let g=n,m;Ze(t)?m=r:m=new qn(null).setTree(t,r);let v=n.serverCache.getNode();return m.children.inorderTraversal((b,I)=>{if(v.hasChild(b)){let T=n.serverCache.getNode().getImmediateChild(b),P=CS(e,T,I);g=Hh(e,g,new _t(b),P,i,o,l,h)}}),m.children.inorderTraversal((b,I)=>{let T=!n.serverCache.isCompleteForChild(b)&&I.value===null;if(!v.hasChild(b)&&!T){let P=n.serverCache.getNode().getImmediateChild(b),z=CS(e,P,I);g=Hh(e,g,new _t(b),z,i,o,l,h)}}),g}function MB(e,n,t,r,i,o,l){if(jh(i,t)!=null)return n;let h=n.serverCache.isFiltered(),g=n.serverCache;if(r.value!=null){if(Ze(t)&&g.isFullyInitialized()||g.isCompleteForPath(t))return Hh(e,n,t,g.getNode().getChild(t),i,o,h,l);if(Ze(t)){let m=new qn(null);return g.getNode().forEachChild(qa,(v,b)=>{m=m.set(new _t(v),b)}),c_(e,n,t,m,i,o,h,l)}else return n}else{let m=new qn(null);return r.foreach((v,b)=>{let I=Gt(t,v);g.isCompleteForPath(I)&&(m=m.set(v,g.getNode().getChild(I)))}),c_(e,n,t,m,i,o,h,l)}}function TB(e,n,t,r,i){let o=n.serverCache,l=nD(n,o.getNode(),o.isFullyInitialized()||Ze(t),o.isFiltered());return cD(e,l,t,r,lD,i)}function AB(e,n,t,r,i,o){let l;if(jh(r,t)!=null)return n;{let h=new iu(r,n,i),g=n.eventCache.getNode(),m;if(Ze(t)||$e(t)===".priority"){let v;if(n.serverCache.isFullyInitialized())v=Vh(r,Ns(n));else{let b=n.serverCache.getNode();ee(b instanceof Pe,"serverChildren would be complete if leaf node"),v=R_(r,b)}v=v,m=e.filter.updateFullNode(g,v,o)}else{let v=$e(t),b=P_(r,v,n.serverCache);b==null&&n.serverCache.isCompleteForChild(v)&&(b=g.getImmediateChild(v)),b!=null?m=e.filter.updateChild(g,v,b,Rt(t),h,o):n.eventCache.getNode().hasChild(v)?m=e.filter.updateChild(g,v,Pe.EMPTY_NODE,Rt(t),h,o):m=g,m.isEmpty()&&n.serverCache.isFullyInitialized()&&(l=Vh(r,Ns(n)),l.isLeafNode()&&(m=e.filter.updateFullNode(m,l,o)))}return l=n.serverCache.isFullyInitialized()||jh(r,ct())!=null,Xc(n,m,l,e.filter.filtersNodes())}}var u_=class{constructor(n,t){this.query_=n,this.eventRegistrations_=[];let r=this.query_._queryParams,i=new nu(r.getIndex()),o=tB(r);this.processor_=xB(o);let l=t.serverCache,h=t.eventCache,g=i.updateFullNode(Pe.EMPTY_NODE,l.getNode(),null),m=o.updateFullNode(Pe.EMPTY_NODE,h.getNode(),null),v=new vi(g,l.isFullyInitialized(),i.filtersNodes()),b=new vi(m,h.isFullyInitialized(),o.filtersNodes());this.viewCache_=Kh(b,v),this.eventGenerator_=new n_(this.query_)}get query(){return this.query_}};function OB(e){return e.viewCache_.serverCache.getNode()}function NB(e){return Uh(e.viewCache_)}function RB(e,n){let t=Ns(e.viewCache_);return t&&(e.query._queryParams.loadsAllData()||!Ze(n)&&!t.getImmediateChild($e(n)).isEmpty())?t.getChild(n):null}function wS(e){return e.eventRegistrations_.length===0}function PB(e,n){e.eventRegistrations_.push(n)}function vS(e,n,t){let r=[];if(t){ee(n==null,"A cancel should cancel all event registrations.");let i=e.query._path;e.eventRegistrations_.forEach(o=>{let l=o.createCancelEvent(t,i);l&&r.push(l)})}if(n){let i=[];for(let o=0;o<e.eventRegistrations_.length;++o){let l=e.eventRegistrations_[o];if(!l.matches(n))i.push(l);else if(n.hasAnyCallback()){i=i.concat(e.eventRegistrations_.slice(o+1));break}}e.eventRegistrations_=i}else e.eventRegistrations_=[];return r}function bS(e,n,t,r){n.type===wi.MERGE&&n.source.queryId!==null&&(ee(Ns(e.viewCache_),"We should always have a full cache before handling merges"),ee(Uh(e.viewCache_),"Missing event cache, even though we have a server cache"));let i=e.viewCache_,o=IB(e.processor_,i,n,t,r);return EB(e.processor_,o.viewCache),ee(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=o.viewCache,uD(e,o.changes,o.viewCache.eventCache.getNode(),null)}function kB(e,n){let t=e.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild($t,(o,l)=>{r.push(Ka(o,l))}),t.isFullyInitialized()&&r.push(eD(t.getNode())),uD(e,r,t.getNode(),n)}function uD(e,n,t,r){let i=r?[r]:e.eventRegistrations_;return oB(e.eventGenerator_,n,t,i)}var zh,Wh=class{constructor(){this.views=new Map}};function FB(e){ee(!zh,"__referenceConstructor has already been defined"),zh=e}function LB(){return ee(zh,"Reference.ts has not been loaded"),zh}function BB(e){return e.views.size===0}function k_(e,n,t,r){let i=n.source.queryId;if(i!==null){let o=e.views.get(i);return ee(o!=null,"SyncTree gave us an op for an invalid query."),bS(o,n,t,r)}else{let o=[];for(let l of e.views.values())o=o.concat(bS(l,n,t,r));return o}}function dD(e,n,t,r,i){let o=n._queryIdentifier,l=e.views.get(o);if(!l){let h=Vh(t,i?r:null),g=!1;h?g=!0:r instanceof Pe?(h=R_(t,r),g=!1):(h=Pe.EMPTY_NODE,g=!1);let m=Kh(new vi(h,g,!1),new vi(r,i,!1));return new u_(n,m)}return l}function UB(e,n,t,r,i,o){let l=dD(e,n,r,i,o);return e.views.has(n._queryIdentifier)||e.views.set(n._queryIdentifier,l),PB(l,t),kB(l,t)}function VB(e,n,t,r){let i=n._queryIdentifier,o=[],l=[],h=ko(e);if(i==="default")for(let[g,m]of e.views.entries())l=l.concat(vS(m,t,r)),wS(m)&&(e.views.delete(g),m.query._queryParams.loadsAllData()||o.push(m.query));else{let g=e.views.get(i);g&&(l=l.concat(vS(g,t,r)),wS(g)&&(e.views.delete(i),g.query._queryParams.loadsAllData()||o.push(g.query)))}return h&&!ko(e)&&o.push(new(LB())(n._repo,n._path)),{removed:o,events:l}}function fD(e){let n=[];for(let t of e.views.values())t.query._queryParams.loadsAllData()||n.push(t);return n}function Ro(e,n){let t=null;for(let r of e.views.values())t=t||RB(r,n);return t}function hD(e,n){if(n._queryParams.loadsAllData())return ep(e);{let r=n._queryIdentifier;return e.views.get(r)}}function pD(e,n){return hD(e,n)!=null}function ko(e){return ep(e)!=null}function ep(e){for(let n of e.views.values())if(n.query._queryParams.loadsAllData())return n;return null}var Gh;function jB(e){ee(!Gh,"__referenceConstructor has already been defined"),Gh=e}function HB(){return ee(Gh,"Reference.ts has not been loaded"),Gh}var zB=1,$h=class{constructor(n){this.listenProvider_=n,this.syncPointTree_=new qn(null),this.pendingWriteTree_=vB(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function gD(e,n,t,r,i){return cB(e.pendingWriteTree_,n,t,r,i),i?il(e,new Ja(A_(),n,t)):[]}function WB(e,n,t,r){uB(e.pendingWriteTree_,n,t,r);let i=qn.fromObject(t);return il(e,new ru(A_(),n,i))}function Oo(e,n,t=!1){let r=dB(e.pendingWriteTree_,n);if(fB(e.pendingWriteTree_,n)){let o=new qn(null);return r.snap!=null?o=o.set(ct(),!0):Mn(r.children,l=>{o=o.set(new _t(l),!0)}),il(e,new t_(r.path,o,t))}else return[]}function du(e,n,t){return il(e,new Ja(O_(),n,t))}function GB(e,n,t){let r=qn.fromObject(t);return il(e,new ru(O_(),n,r))}function $B(e,n){return il(e,new Bh(O_(),n))}function qB(e,n,t){let r=L_(e,t);if(r){let i=B_(r),o=i.path,l=i.queryId,h=Gn(o,n),g=new Bh(N_(l),h);return U_(e,o,g)}else return[]}function qh(e,n,t,r,i=!1){let o=n._path,l=e.syncPointTree_.get(o),h=[];if(l&&(n._queryIdentifier==="default"||pD(l,n))){let g=VB(l,n,t,r);BB(l)&&(e.syncPointTree_=e.syncPointTree_.remove(o));let m=g.removed;if(h=g.events,!i){let v=m.findIndex(I=>I._queryParams.loadsAllData())!==-1,b=e.syncPointTree_.findOnPath(o,(I,T)=>ko(T));if(v&&!b){let I=e.syncPointTree_.subtree(o);if(!I.isEmpty()){let T=XB(I);for(let P=0;P<T.length;++P){let z=T[P],Z=z.query,q=CD(e,z);e.listenProvider_.startListening(Kc(Z),ou(e,Z),q.hashFn,q.onComplete)}}}!b&&m.length>0&&!r&&(v?e.listenProvider_.stopListening(Kc(n),null):m.forEach(I=>{let T=e.queryToTagMap.get(tp(I));e.listenProvider_.stopListening(Kc(I),T)}))}QB(e,m)}return h}function mD(e,n,t,r){let i=L_(e,r);if(i!=null){let o=B_(i),l=o.path,h=o.queryId,g=Gn(l,n),m=new Ja(N_(h),g,t);return U_(e,l,m)}else return[]}function YB(e,n,t,r){let i=L_(e,r);if(i){let o=B_(i),l=o.path,h=o.queryId,g=Gn(l,n),m=qn.fromObject(t),v=new ru(N_(h),g,m);return U_(e,l,v)}else return[]}function d_(e,n,t,r=!1){let i=n._path,o=null,l=!1;e.syncPointTree_.foreachOnPath(i,(I,T)=>{let P=Gn(I,i);o=o||Ro(T,P),l=l||ko(T)});let h=e.syncPointTree_.get(i);h?(l=l||ko(h),o=o||Ro(h,ct())):(h=new Wh,e.syncPointTree_=e.syncPointTree_.set(i,h));let g;o!=null?g=!0:(g=!1,o=Pe.EMPTY_NODE,e.syncPointTree_.subtree(i).foreachChild((T,P)=>{let z=Ro(P,ct());z&&(o=o.updateImmediateChild(T,z))}));let m=pD(h,n);if(!m&&!n._queryParams.loadsAllData()){let I=tp(n);ee(!e.queryToTagMap.has(I),"View does not exist, but we have a tag");let T=KB();e.queryToTagMap.set(I,T),e.tagToQueryMap.set(T,I)}let v=Jh(e.pendingWriteTree_,i),b=UB(h,n,t,v,o,g);if(!m&&!l&&!r){let I=hD(h,n);b=b.concat(JB(e,n,I))}return b}function F_(e,n,t){let i=e.pendingWriteTree_,o=e.syncPointTree_.findOnPath(n,(l,h)=>{let g=Gn(l,n),m=Ro(h,g);if(m)return m});return oD(i,n,o,t,!0)}function ZB(e,n){let t=n._path,r=null;e.syncPointTree_.foreachOnPath(t,(m,v)=>{let b=Gn(m,t);r=r||Ro(v,b)});let i=e.syncPointTree_.get(t);i?r=r||Ro(i,ct()):(i=new Wh,e.syncPointTree_=e.syncPointTree_.set(t,i));let o=r!=null,l=o?new vi(r,!0,!1):null,h=Jh(e.pendingWriteTree_,n._path),g=dD(i,n,h,o?l.getNode():Pe.EMPTY_NODE,o);return NB(g)}function il(e,n){return yD(n,e.syncPointTree_,null,Jh(e.pendingWriteTree_,ct()))}function yD(e,n,t,r){if(Ze(e.path))return _D(e,n,t,r);{let i=n.get(ct());t==null&&i!=null&&(t=Ro(i,ct()));let o=[],l=$e(e.path),h=e.operationForChild(l),g=n.children.get(l);if(g&&h){let m=t?t.getImmediateChild(l):null,v=sD(r,l);o=o.concat(yD(h,g,m,v))}return i&&(o=o.concat(k_(i,e,r,t))),o}}function _D(e,n,t,r){let i=n.get(ct());t==null&&i!=null&&(t=Ro(i,ct()));let o=[];return n.children.inorderTraversal((l,h)=>{let g=t?t.getImmediateChild(l):null,m=sD(r,l),v=e.operationForChild(l);v&&(o=o.concat(_D(v,h,g,m)))}),i&&(o=o.concat(k_(i,e,r,t))),o}function CD(e,n){let t=n.query,r=ou(e,t);return{hashFn:()=>(OB(n)||Pe.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?qB(e,t._path,r):$B(e,t._path);{let o=d5(i,t);return qh(e,t,null,o)}}}}function ou(e,n){let t=tp(n);return e.queryToTagMap.get(t)}function tp(e){return e._path.toString()+"$"+e._queryIdentifier}function L_(e,n){return e.tagToQueryMap.get(n)}function B_(e){let n=e.indexOf("$");return ee(n!==-1&&n<e.length-1,"Bad queryKey."),{queryId:e.substr(n+1),path:new _t(e.substr(0,n))}}function U_(e,n,t){let r=e.syncPointTree_.get(n);ee(r,"Missing sync point for query tag that we're tracking");let i=Jh(e.pendingWriteTree_,n);return k_(r,t,i,null)}function XB(e){return e.fold((n,t,r)=>{if(t&&ko(t))return[ep(t)];{let i=[];return t&&(i=fD(t)),Mn(r,(o,l)=>{i=i.concat(l)}),i}})}function Kc(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(HB())(e._repo,e._path):e}function QB(e,n){for(let t=0;t<n.length;++t){let r=n[t];if(!r._queryParams.loadsAllData()){let i=tp(r),o=e.queryToTagMap.get(i);e.queryToTagMap.delete(i),e.tagToQueryMap.delete(o)}}}function KB(){return zB++}function JB(e,n,t){let r=n._path,i=ou(e,n),o=CD(e,t),l=e.listenProvider_.startListening(Kc(n),i,o.hashFn,o.onComplete),h=e.syncPointTree_.subtree(r);if(i)ee(!ko(h.value),"If we're adding a query, it shouldn't be shadowed");else{let g=h.fold((m,v,b)=>{if(!Ze(m)&&v&&ko(v))return[ep(v).query];{let I=[];return v&&(I=I.concat(fD(v).map(T=>T.query))),Mn(b,(T,P)=>{I=I.concat(P)}),I}});for(let m=0;m<g.length;++m){let v=g[m];e.listenProvider_.stopListening(Kc(v),ou(e,v))}}return l}var f_=class e{constructor(n){this.node_=n}getImmediateChild(n){let t=this.node_.getImmediateChild(n);return new e(t)}node(){return this.node_}},h_=class e{constructor(n,t){this.syncTree_=n,this.path_=t}getImmediateChild(n){let t=Gt(this.path_,n);return new e(this.syncTree_,t)}node(){return F_(this.syncTree_,this.path_)}},e7=function(e){return e=e||{},e.timestamp=e.timestamp||new Date().getTime(),e},xS=function(e,n,t){if(!e||typeof e!="object")return e;if(ee(".sv"in e,"Unexpected leaf node or priority contents"),typeof e[".sv"]=="string")return t7(e[".sv"],n,t);if(typeof e[".sv"]=="object")return n7(e[".sv"],n);ee(!1,"Unexpected server value: "+JSON.stringify(e,null,2))},t7=function(e,n,t){switch(e){case"timestamp":return t.timestamp;default:ee(!1,"Unexpected server value: "+e)}},n7=function(e,n,t){e.hasOwnProperty("increment")||ee(!1,"Unexpected server value: "+JSON.stringify(e,null,2));let r=e.increment;typeof r!="number"&&ee(!1,"Unexpected increment value: "+r);let i=n.node();if(ee(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;let l=i.getValue();return typeof l!="number"?r:l+r},wD=function(e,n,t,r){return V_(n,new h_(t,e),r)},vD=function(e,n,t){return V_(e,new f_(n),t)};function V_(e,n,t){let r=e.getPriority().val(),i=xS(r,n.getImmediateChild(".priority"),t),o;if(e.isLeafNode()){let l=e,h=xS(l.getValue(),n,t);return h!==l.getValue()||i!==l.getPriority().val()?new Xa(h,un(i)):e}else{let l=e;return o=l,i!==l.getPriority().val()&&(o=o.updatePriority(new Xa(i))),l.forEachChild($t,(h,g)=>{let m=V_(g,n.getImmediateChild(h),t);m!==g&&(o=o.updateImmediateChild(h,m))}),o}}var su=class{constructor(n="",t=null,r={children:{},childCount:0}){this.name=n,this.parent=t,this.node=r}};function j_(e,n){let t=n instanceof _t?n:new _t(n),r=e,i=$e(t);for(;i!==null;){let o=Ss(r.node.children,i)||{children:{},childCount:0};r=new su(i,r,o),t=Rt(t),i=$e(t)}return r}function ol(e){return e.node.value}function bD(e,n){e.node.value=n,p_(e)}function xD(e){return e.node.childCount>0}function r7(e){return ol(e)===void 0&&!xD(e)}function np(e,n){Mn(e.node.children,(t,r)=>{n(new su(t,e,r))})}function ED(e,n,t,r){t&&!r&&n(e),np(e,i=>{ED(i,n,!0,r)}),t&&r&&n(e)}function i7(e,n,t){let r=t?e:e.parent;for(;r!==null;){if(n(r))return!0;r=r.parent}return!1}function fu(e){return new _t(e.parent===null?e.name:fu(e.parent)+"/"+e.name)}function p_(e){e.parent!==null&&o7(e.parent,e.name,e)}function o7(e,n,t){let r=r7(t),i=Kr(e.node.children,n);r&&i?(delete e.node.children[n],e.node.childCount--,p_(e)):!r&&!i&&(e.node.children[n]=t.node,e.node.childCount++,p_(e))}var s7=/[\[\].#$\/\u0000-\u001F\u007F]/,a7=/[\[\].#$\u0000-\u001F\u007F]/,Iy=10*1024*1024,H_=function(e){return typeof e=="string"&&e.length!==0&&!s7.test(e)},ID=function(e){return typeof e=="string"&&e.length!==0&&!a7.test(e)},l7=function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),ID(e)},c7=function(e){return e===null||typeof e=="string"||typeof e=="number"&&!x_(e)||e&&typeof e=="object"&&Kr(e,".sv")},SD=function(e,n,t,r){r&&n===void 0||rp(Bc(e,"value"),n,t)},rp=function(e,n,t){let r=t instanceof _t?new Uy(t,e):t;if(n===void 0)throw new Error(e+"contains undefined "+Ms(r));if(typeof n=="function")throw new Error(e+"contains a function "+Ms(r)+" with contents = "+n.toString());if(x_(n))throw new Error(e+"contains "+n.toString()+" "+Ms(r));if(typeof n=="string"&&n.length>Iy/3&&Uc(n)>Iy)throw new Error(e+"contains a string greater than "+Iy+" utf8 bytes "+Ms(r)+" ('"+n.substring(0,50)+"...')");if(n&&typeof n=="object"){let i=!1,o=!1;if(Mn(n,(l,h)=>{if(l===".value")i=!0;else if(l!==".priority"&&l!==".sv"&&(o=!0,!H_(l)))throw new Error(e+" contains an invalid key ("+l+") "+Ms(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);j5(r,l),rp(e,h,r),H5(r)}),i&&o)throw new Error(e+' contains ".value" child '+Ms(r)+" in addition to actual children.")}},u7=function(e,n){let t,r;for(t=0;t<n.length;t++){r=n[t];let o=Jc(r);for(let l=0;l<o.length;l++)if(!(o[l]===".priority"&&l===o.length-1)){if(!H_(o[l]))throw new Error(e+"contains an invalid key ("+o[l]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}n.sort(V5);let i=null;for(t=0;t<n.length;t++){if(r=n[t],i!==null&&Mr(i,r))throw new Error(e+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}},d7=function(e,n,t,r){if(r&&n===void 0)return;let i=Bc(e,"values");if(!(n&&typeof n=="object")||Array.isArray(n))throw new Error(i+" must be an object containing the children to replace.");let o=[];Mn(n,(l,h)=>{let g=new _t(l);if(rp(i,h,Gt(t,g)),S_(g)===".priority"&&!c7(h))throw new Error(i+"contains an invalid value for '"+g.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(g)}),u7(i,o)};var DD=function(e,n,t,r){if(!(r&&t===void 0)&&!ID(t))throw new Error(Bc(e,n)+'was an invalid path = "'+t+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},f7=function(e,n,t,r){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),DD(e,n,t,r)},z_=function(e,n){if($e(n)===".info")throw new Error(e+" failed = Can't modify data under /.info/")},h7=function(e,n){let t=n.path.toString();if(typeof n.repoInfo.host!="string"||n.repoInfo.host.length===0||!H_(n.repoInfo.namespace)&&n.repoInfo.host.split(":")[0]!=="localhost"||t.length!==0&&!l7(t))throw new Error(Bc(e,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var g_=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function ip(e,n){let t=null;for(let r=0;r<n.length;r++){let i=n[r],o=i.getPath();t!==null&&!D_(o,t.path)&&(e.eventLists_.push(t),t=null),t===null&&(t={events:[],path:o}),t.events.push(i)}t&&e.eventLists_.push(t)}function MD(e,n,t){ip(e,t),TD(e,r=>D_(r,n))}function Ar(e,n,t){ip(e,t),TD(e,r=>Mr(r,n)||Mr(n,r))}function TD(e,n){e.recursionDepth_++;let t=!0;for(let r=0;r<e.eventLists_.length;r++){let i=e.eventLists_[r];if(i){let o=i.path;n(o)?(p7(e.eventLists_[r]),e.eventLists_[r]=null):t=!1}}t&&(e.eventLists_=[]),e.recursionDepth_--}function p7(e){for(let n=0;n<e.events.length;n++){let t=e.events[n];if(t!==null){e.events[n]=null;let r=t.getEventRunner();As&&Dn("event: "+t.toString()),rl(r)}}}var g7="repo_interrupt",m7=25,m_=class{constructor(n,t,r,i){this.repoInfo_=n,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new g_,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Lh(),this.transactionQueueTree_=new su,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function y7(e,n,t){if(e.stats_=I_(e.repoInfo_),e.forceRestClient_||g5())e.server_=new Xy(e.repoInfo_,(r,i,o,l)=>{ES(e,r,i,o,l)},e.authTokenProvider_,e.appCheckProvider_),setTimeout(()=>IS(e,!0),0);else{if(typeof t<"u"&&t!==null){if(typeof t!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Jt(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}e.persistentConnection_=new M_(e.repoInfo_,n,(r,i,o,l)=>{ES(e,r,i,o,l)},r=>{IS(e,r)},r=>{_7(e,r)},e.authTokenProvider_,e.appCheckProvider_,t),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener(r=>{e.server_.refreshAuthToken(r)}),e.appCheckProvider_.addTokenChangeListener(r=>{e.server_.refreshAppCheckToken(r.token)}),e.statsReporter_=y5(e.repoInfo_,()=>new e_(e.stats_,e.server_)),e.infoData_=new Qy,e.infoSyncTree_=new $h({startListening:(r,i,o,l)=>{let h=[],g=e.infoData_.getNode(r._path);return g.isEmpty()||(h=du(e.infoSyncTree_,r._path,g),setTimeout(()=>{l("ok")},0)),h},stopListening:()=>{}}),W_(e,"connected",!1),e.serverSyncTree_=new $h({startListening:(r,i,o,l)=>(e.server_.listen(r,o,i,(h,g)=>{let m=l(h,g);Ar(e.eventQueue_,r._path,m)}),[]),stopListening:(r,i)=>{e.server_.unlisten(r,i)}})}function AD(e){let t=e.infoData_.getNode(new _t(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function op(e){return e7({timestamp:AD(e)})}function ES(e,n,t,r,i){e.dataUpdateCount++;let o=new _t(n);t=e.interceptServerDataCallback_?e.interceptServerDataCallback_(n,t):t;let l=[];if(i)if(r){let g=Lc(t,m=>un(m));l=YB(e.serverSyncTree_,o,g,i)}else{let g=un(t);l=mD(e.serverSyncTree_,o,g,i)}else if(r){let g=Lc(t,m=>un(m));l=GB(e.serverSyncTree_,o,g)}else{let g=un(t);l=du(e.serverSyncTree_,o,g)}let h=o;l.length>0&&(h=tl(e,o)),Ar(e.eventQueue_,h,l)}function IS(e,n){W_(e,"connected",n),n===!1&&b7(e)}function _7(e,n){Mn(n,(t,r)=>{W_(e,t,r)})}function W_(e,n,t){let r=new _t("/.info/"+n),i=un(t);e.infoData_.updateSnapshot(r,i);let o=du(e.infoSyncTree_,r,i);Ar(e.eventQueue_,r,o)}function G_(e){return e.nextWriteId_++}function C7(e,n,t){let r=ZB(e.serverSyncTree_,n);return r!=null?Promise.resolve(r):e.server_.get(n).then(i=>{let o=un(i).withIndex(n._queryParams.getIndex());d_(e.serverSyncTree_,n,t,!0);let l;if(n._queryParams.loadsAllData())l=du(e.serverSyncTree_,n._path,o);else{let h=ou(e.serverSyncTree_,n);l=mD(e.serverSyncTree_,n._path,o,h)}return Ar(e.eventQueue_,n._path,l),qh(e.serverSyncTree_,n,t,null,!0),o},i=>(hu(e,"get for query "+Jt(n)+" failed: "+i),Promise.reject(new Error(i))))}function w7(e,n,t,r,i){hu(e,"set",{path:n.toString(),value:t,priority:r});let o=op(e),l=un(t,r),h=F_(e.serverSyncTree_,n),g=vD(l,h,o),m=G_(e),v=gD(e.serverSyncTree_,n,g,m,!0);ip(e.eventQueue_,v),e.server_.put(n.toString(),l.val(!0),(I,T)=>{let P=I==="ok";P||$n("set at "+n+" failed: "+I);let z=Oo(e.serverSyncTree_,m,!P);Ar(e.eventQueue_,n,z),y_(e,i,I,T)});let b=q_(e,n);tl(e,b),Ar(e.eventQueue_,b,[])}function v7(e,n,t,r){hu(e,"update",{path:n.toString(),value:t});let i=!0,o=op(e),l={};if(Mn(t,(h,g)=>{i=!1,l[h]=wD(Gt(n,h),un(g),e.serverSyncTree_,o)}),i)Dn("update() called with empty data.  Don't do anything."),y_(e,r,"ok",void 0);else{let h=G_(e),g=WB(e.serverSyncTree_,n,l,h);ip(e.eventQueue_,g),e.server_.merge(n.toString(),t,(m,v)=>{let b=m==="ok";b||$n("update at "+n+" failed: "+m);let I=Oo(e.serverSyncTree_,h,!b),T=I.length>0?tl(e,n):n;Ar(e.eventQueue_,T,I),y_(e,r,m,v)}),Mn(t,m=>{let v=q_(e,Gt(n,m));tl(e,v)}),Ar(e.eventQueue_,n,[])}}function b7(e){hu(e,"onDisconnectEvents");let n=op(e),t=Lh();Ky(e.onDisconnect_,ct(),(i,o)=>{let l=wD(i,o,e.serverSyncTree_,n);tD(t,i,l)});let r=[];Ky(t,ct(),(i,o)=>{r=r.concat(du(e.serverSyncTree_,i,o));let l=q_(e,i);tl(e,l)}),e.onDisconnect_=Lh(),Ar(e.eventQueue_,ct(),r)}function x7(e,n,t){let r;$e(n._path)===".info"?r=d_(e.infoSyncTree_,n,t):r=d_(e.serverSyncTree_,n,t),MD(e.eventQueue_,n._path,r)}function SS(e,n,t){let r;$e(n._path)===".info"?r=qh(e.infoSyncTree_,n,t):r=qh(e.serverSyncTree_,n,t),MD(e.eventQueue_,n._path,r)}function E7(e){e.persistentConnection_&&e.persistentConnection_.interrupt(g7)}function hu(e,...n){let t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":"),Dn(t,...n)}function y_(e,n,t,r){n&&rl(()=>{if(t==="ok")n(null);else{let i=(t||"error").toUpperCase(),o=i;r&&(o+=": "+r);let l=new Error(o);l.code=i,n(l)}})}function OD(e,n,t){return F_(e.serverSyncTree_,n,t)||Pe.EMPTY_NODE}function $_(e,n=e.transactionQueueTree_){if(n||sp(e,n),ol(n)){let t=RD(e,n);ee(t.length>0,"Sending zero length transaction queue"),t.every(i=>i.status===0)&&I7(e,fu(n),t)}else xD(n)&&np(n,t=>{$_(e,t)})}function I7(e,n,t){let r=t.map(m=>m.currentWriteId),i=OD(e,n,r),o=i,l=i.hash();for(let m=0;m<t.length;m++){let v=t[m];ee(v.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),v.status=1,v.retryCount++;let b=Gn(n,v.path);o=o.updateChild(b,v.currentOutputSnapshotRaw)}let h=o.val(!0),g=n;e.server_.put(g.toString(),h,m=>{hu(e,"transaction put response",{path:g.toString(),status:m});let v=[];if(m==="ok"){let b=[];for(let I=0;I<t.length;I++)t[I].status=2,v=v.concat(Oo(e.serverSyncTree_,t[I].currentWriteId)),t[I].onComplete&&b.push(()=>t[I].onComplete(null,!0,t[I].currentOutputSnapshotResolved)),t[I].unwatcher();sp(e,j_(e.transactionQueueTree_,n)),$_(e,e.transactionQueueTree_),Ar(e.eventQueue_,n,v);for(let I=0;I<b.length;I++)rl(b[I])}else{if(m==="datastale")for(let b=0;b<t.length;b++)t[b].status===3?t[b].status=4:t[b].status=0;else{$n("transaction at "+g.toString()+" failed: "+m);for(let b=0;b<t.length;b++)t[b].status=4,t[b].abortReason=m}tl(e,n)}},l)}function tl(e,n){let t=ND(e,n),r=fu(t),i=RD(e,t);return S7(e,i,r),r}function S7(e,n,t){if(n.length===0)return;let r=[],i=[],l=n.filter(h=>h.status===0).map(h=>h.currentWriteId);for(let h=0;h<n.length;h++){let g=n[h],m=Gn(t,g.path),v=!1,b;if(ee(m!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),g.status===4)v=!0,b=g.abortReason,i=i.concat(Oo(e.serverSyncTree_,g.currentWriteId,!0));else if(g.status===0)if(g.retryCount>=m7)v=!0,b="maxretry",i=i.concat(Oo(e.serverSyncTree_,g.currentWriteId,!0));else{let I=OD(e,g.path,l);g.currentInputSnapshot=I;let T=n[h].update(I.val());if(T!==void 0){rp("transaction failed: Data returned ",T,g.path);let P=un(T);typeof T=="object"&&T!=null&&Kr(T,".priority")||(P=P.updatePriority(I.getPriority()));let Z=g.currentWriteId,q=op(e),ce=vD(P,I,q);g.currentOutputSnapshotRaw=P,g.currentOutputSnapshotResolved=ce,g.currentWriteId=G_(e),l.splice(l.indexOf(Z),1),i=i.concat(gD(e.serverSyncTree_,g.path,ce,g.currentWriteId,g.applyLocally)),i=i.concat(Oo(e.serverSyncTree_,Z,!0))}else v=!0,b="nodata",i=i.concat(Oo(e.serverSyncTree_,g.currentWriteId,!0))}Ar(e.eventQueue_,t,i),i=[],v&&(n[h].status=2,function(I){setTimeout(I,Math.floor(0))}(n[h].unwatcher),n[h].onComplete&&(b==="nodata"?r.push(()=>n[h].onComplete(null,!1,n[h].currentInputSnapshot)):r.push(()=>n[h].onComplete(new Error(b),!1,null))))}sp(e,e.transactionQueueTree_);for(let h=0;h<r.length;h++)rl(r[h]);$_(e,e.transactionQueueTree_)}function ND(e,n){let t,r=e.transactionQueueTree_;for(t=$e(n);t!==null&&ol(r)===void 0;)r=j_(r,t),n=Rt(n),t=$e(n);return r}function RD(e,n){let t=[];return PD(e,n,t),t.sort((r,i)=>r.order-i.order),t}function PD(e,n,t){let r=ol(n);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);np(n,i=>{PD(e,i,t)})}function sp(e,n){let t=ol(n);if(t){let r=0;for(let i=0;i<t.length;i++)t[i].status!==2&&(t[r]=t[i],r++);t.length=r,bD(n,t.length>0?t:void 0)}np(n,r=>{sp(e,r)})}function q_(e,n){let t=fu(ND(e,n)),r=j_(e.transactionQueueTree_,n);return i7(r,i=>{Sy(e,i)}),Sy(e,r),ED(r,i=>{Sy(e,i)}),t}function Sy(e,n){let t=ol(n);if(t){let r=[],i=[],o=-1;for(let l=0;l<t.length;l++)t[l].status===3||(t[l].status===1?(ee(o===l-1,"All SENT items should be at beginning of queue."),o=l,t[l].status=3,t[l].abortReason="set"):(ee(t[l].status===0,"Unexpected transaction status in abort"),t[l].unwatcher(),i=i.concat(Oo(e.serverSyncTree_,t[l].currentWriteId,!0)),t[l].onComplete&&r.push(t[l].onComplete.bind(null,new Error("set"),!1,null))));o===-1?bD(n,void 0):t.length=o+1,Ar(e.eventQueue_,fu(n),i);for(let l=0;l<r.length;l++)rl(r[l])}}function D7(e){let n="",t=e.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}n+="/"+i}return n}function M7(e){let n={};e.charAt(0)==="?"&&(e=e.substring(1));for(let t of e.split("&")){if(t.length===0)continue;let r=t.split("=");r.length===2?n[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):$n(`Invalid query segment '${t}' in query '${e}'`)}return n}var DS=function(e,n){let t=T7(e),r=t.namespace;t.domain==="firebase.com"&&Xi(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&t.domain!=="localhost"&&Xi("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||s5();let i=t.scheme==="ws"||t.scheme==="wss";return{repoInfo:new Th(t.host,t.secure,r,i,n,"",r!==t.subdomain),path:new _t(t.pathString)}},T7=function(e){let n="",t="",r="",i="",o="",l=!0,h="https",g=443;if(typeof e=="string"){let m=e.indexOf("//");m>=0&&(h=e.substring(0,m-1),e=e.substring(m+2));let v=e.indexOf("/");v===-1&&(v=e.length);let b=e.indexOf("?");b===-1&&(b=e.length),n=e.substring(0,Math.min(v,b)),v<b&&(i=D7(e.substring(v,b)));let I=M7(e.substring(Math.min(e.length,b)));m=n.indexOf(":"),m>=0?(l=h==="https"||h==="wss",g=parseInt(n.substring(m+1),10)):m=n.length;let T=n.slice(0,m);if(T.toLowerCase()==="localhost")t="localhost";else if(T.split(".").length<=2)t=T;else{let P=n.indexOf(".");r=n.substring(0,P).toLowerCase(),t=n.substring(P+1),o=r}"ns"in I&&(o=I.ns)}return{host:n,port:g,domain:t,subdomain:r,secure:l,scheme:h,pathString:i,namespace:o}};var MS="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",A7=function(){let e=0,n=[];return function(t){let r=t===e;e=t;let i,o=new Array(8);for(i=7;i>=0;i--)o[i]=MS.charAt(t%64),t=Math.floor(t/64);ee(t===0,"Cannot push at time == 0");let l=o.join("");if(r){for(i=11;i>=0&&n[i]===63;i--)n[i]=0;n[i]++}else for(i=0;i<12;i++)n[i]=Math.floor(Math.random()*64);for(i=0;i<12;i++)l+=MS.charAt(n[i]);return ee(l.length===20,"nextPushId: Length should be 20."),l}}();var Yh=class{constructor(n,t,r,i){this.eventType=n,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){let n=this.snapshot.ref;return this.eventType==="value"?n._path:n.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Jt(this.snapshot.exportVal())}},Zh=class{constructor(n,t,r){this.eventRegistration=n,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}};var Xh=class{constructor(n,t){this.snapshotCallback=n,this.cancelCallback=t}onValue(n,t){this.snapshotCallback.call(null,n,t)}onCancel(n){return ee(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,n)}get hasCancelCallback(){return!!this.cancelCallback}matches(n){return this.snapshotCallback===n.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===n.snapshotCallback.userCallback&&this.snapshotCallback.context===n.snapshotCallback.context}};var __=class e{constructor(n,t,r,i){this._repo=n,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return Ze(this._path)?null:S_(this._path)}get ref(){return new bi(this._repo,this._path)}get _queryIdentifier(){let n=hS(this._queryParams),t=E_(n);return t==="{}"?"default":t}get _queryObject(){return hS(this._queryParams)}isEqual(n){if(n=Mo(n),!(n instanceof e))return!1;let t=this._repo===n._repo,r=D_(this._path,n._path),i=this._queryIdentifier===n._queryIdentifier;return t&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+U5(this._path)}};var bi=class e extends __{constructor(n,t){super(n,t,new Zy,!1)}get parent(){let n=YS(this._path);return n===null?null:new e(this._repo,n)}get root(){let n=this;for(;n.parent!==null;)n=n.parent;return n}},au=class e{constructor(n,t,r){this._node=n,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(n){let t=new _t(n),r=nl(this.ref,n);return new e(this._node.getChild(t),r,$t)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(n){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>n(new e(i,nl(this.ref,r),$t)))}hasChild(n){let t=new _t(n);return!this._node.getChild(t).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}};function Q(e,n){return e=Mo(e),e._checkNotDeleted("ref"),n!==void 0?nl(e._root,n):e._root}function nl(e,n){return e=Mo(e),$e(e._path)===null?f7("child","path",n,!1):DD("child","path",n,!1),new bi(e._repo,Gt(e._path,n))}function pu(e,n){e=Mo(e),z_("push",e._path),SD("push",n,e._path,!0);let t=AD(e._repo),r=A7(t),i=nl(e,r),o=nl(e,r),l;return n!=null?l=Fo(o,n).then(()=>o):l=Promise.resolve(o),i.then=l.then.bind(l),i.catch=l.then.bind(l,void 0),i}function nr(e){return z_("remove",e._path),Fo(e,null)}function Fo(e,n){e=Mo(e),z_("set",e._path),SD("set",n,e._path,!1);let t=new qi;return w7(e._repo,e._path,n,null,t.wrapCallback(()=>{})),t.promise}function ut(e,n){d7("update",n,e._path,!1);let t=new qi;return v7(e._repo,e._path,n,t.wrapCallback(()=>{})),t.promise}function ue(e){e=Mo(e);let n=new Xh(()=>{}),t=new Qh(n);return C7(e._repo,e,t).then(r=>new au(r,new bi(e._repo,e._path),e._queryParams.getIndex()))}var Qh=class e{constructor(n){this.callbackContext=n}respondsTo(n){return n==="value"}createEvent(n,t){let r=t._queryParams.getIndex();return new Yh("value",this,new au(n.snapshotNode,new bi(t._repo,t._path),r))}getEventRunner(n){return n.getEventType()==="cancel"?()=>this.callbackContext.onCancel(n.error):()=>this.callbackContext.onValue(n.snapshot,null)}createCancelEvent(n,t){return this.callbackContext.hasCancelCallback?new Zh(this,n,t):null}matches(n){return n instanceof e?!n.callbackContext||!this.callbackContext?!0:n.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}},C_=class e{constructor(n,t){this.eventType=n,this.callbackContext=t}respondsTo(n){let t=n==="children_added"?"child_added":n;return t=t==="children_removed"?"child_removed":t,this.eventType===t}createCancelEvent(n,t){return this.callbackContext.hasCancelCallback?new Zh(this,n,t):null}createEvent(n,t){ee(n.childName!=null,"Child events should have a childName.");let r=nl(new bi(t._repo,t._path),n.childName),i=t._queryParams.getIndex();return new Yh(n.type,this,new au(n.snapshotNode,r,i),n.prevName)}getEventRunner(n){return n.getEventType()==="cancel"?()=>this.callbackContext.onCancel(n.error):()=>this.callbackContext.onValue(n.snapshot,n.prevName)}matches(n){return n instanceof e?this.eventType===n.eventType&&(!this.callbackContext||!n.callbackContext||this.callbackContext.matches(n.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}};function O7(e,n,t,r,i){let o;if(typeof r=="object"&&(o=void 0,i=r),typeof r=="function"&&(o=r),i&&i.onlyOnce){let g=t,m=(v,b)=>{SS(e._repo,e,h),g(v,b)};m.userCallback=t.userCallback,m.context=t.context,t=m}let l=new Xh(t,o||void 0),h=n==="value"?new Qh(l):new C_(n,l);return x7(e._repo,e,h),()=>SS(e._repo,e,h)}function kD(e,n,t,r){return O7(e,"value",n,t,r)}FB(bi);jB(bi);var N7="FIREBASE_DATABASE_EMULATOR_HOST",w_={},R7=!1;function P7(e,n,t,r){e.repoInfo_=new Th(`${n}:${t}`,!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0),r&&(e.authTokenProvider_=r)}function k7(e,n,t,r,i){let o=r||e.options.databaseURL;o===void 0&&(e.options.projectId||Xi("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Dn("Using default host for project ",e.options.projectId),o=`${e.options.projectId}-default-rtdb.firebaseio.com`);let l=DS(o,i),h=l.repoInfo,g,m;typeof process<"u"&&process.env&&(m=process.env[N7]),m?(g=!0,o=`http://${m}?ns=${h.namespace}`,l=DS(o,i),h=l.repoInfo):g=!l.repoInfo.secure;let v=i&&g?new Zc(Zc.OWNER):new Ny(e.name,e.options,n);h7("Invalid Firebase Database URL",l),Ze(l.path)||Xi("Database URL must point to the root of a Firebase Database (not including a child path).");let b=L7(h,e,v,new Oy(e.name,t));return new v_(b,e)}function F7(e,n){let t=w_[n];(!t||t[e.key]!==e)&&Xi(`Database ${n}(${e.repoInfo_}) has already been deleted.`),E7(e),delete t[e.key]}function L7(e,n,t,r){let i=w_[n.name];i||(i={},w_[n.name]=i);let o=i[e.toURLString()];return o&&Xi("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new m_(e,R7,t,r),i[e.toURLString()]=o,o}var v_=class{constructor(n,t){this._repoInternal=n,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(y7(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new bi(this._repo,ct())),this._rootInternal}_delete(){return this._rootInternal!==null&&(F7(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(n){this._rootInternal===null&&Xi("Cannot call "+n+" on a deleted database.")}};function K(e=q2(),n){let t=G2(e,"database").getImmediate({identifier:n});if(!t._instanceStarted){let r=x2("database");r&&B7(t,...r)}return t}function B7(e,n,t,r={}){e=Mo(e),e._checkNotDeleted("useEmulator"),e._instanceStarted&&Xi("Cannot call useEmulator() after instance has already been initialized.");let i=e._repoInternal,o;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Xi('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new Zc(Zc.OWNER);else if(r.mockUserToken){let l=typeof r.mockUserToken=="string"?r.mockUserToken:E2(r.mockUserToken,e.app.options.projectId);o=new Zc(l)}P7(i,n,t,o)}function U7(e){r5($2),jc(new Yi("database",(n,{instanceIdentifier:t})=>{let r=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),o=n.getProvider("app-check-internal");return k7(r,i,o,t)},"PUBLIC").setMultipleInstances(!0)),Ao(X2,Q2,e),Ao(X2,Q2,"esm2017")}M_.prototype.simpleListen=function(e,n){this.sendRequest("q",{p:e},n)};M_.prototype.echo=function(e,n){this.sendRequest("echo",{d:e},n)};U7();var Ie={production:!0,firebaseConfig:{apiKey:"AIzaSyC2ak3O4qovvrDLGJ-L3a6E1uLASES2xuU",authDomain:"tablefi-31087.firebaseapp.com",databaseURL:"https://tablefi-31087-default-rtdb.europe-west1.firebasedatabase.app",projectId:"tablefi-31087",storageBucket:"tablefi-31087.appspot.com",messagingSenderId:"821585389969",appId:"1:821585389969:web:9383409a2e5fbf601b5230",measurementId:"G-QXT5KZEKGZ"}};var FD=(()=>{class e{db;constructor(){let t=Ce(Ie.firebaseConfig);this.db=K(t)}login(t,r){return new Ve(i=>{let o=Q(this.db,"Owners");ue(o).then(l=>{if(l.exists()){let h=l.val(),m=Object.values(h).find(v=>v.email===t);m?m.password===r?i.next(m):i.error("Invalid password"):i.error("No user found with this email")}else i.error("No owners found in the database")}).catch(l=>{console.error("Error fetching owners:",l),i.error("An error occurred while fetching owners")})}).pipe(vr(i=>(console.error("Error during login:",i),Dt([null]))))}static \u0275fac=function(r){return new(r||e)};static \u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var Se=(()=>{class e{router;constructor(t){this.router=t}NavigateTo(t){this.router.navigate([t])}static \u0275fac=function(r){return new(r||e)(We(yi))};static \u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var LD=(()=>{class e{loginService;navigationService;email="";password="";constructor(t,r){this.loginService=t,this.navigationService=r}onSubmit(t){t.preventDefault(),this.loginService.login(this.email,this.password).subscribe({next:r=>{r&&(sessionStorage.setItem("userId",r.id),sessionStorage.setItem("userEmail",r.email),sessionStorage.setItem("uniqueLinkToken",r.uniqueLinkToken),console.log("User logged in:",r),this.navigationService.NavigateTo("changerestaurant"))},error:r=>{alert(r),console.error("Login error:",r)}})}goToPage(t){this.navigationService.NavigateTo(t)}static \u0275fac=function(r){return new(r||e)(W(FD),W(Se))};static \u0275cmp=oe({type:e,selectors:[["app-login"]],standalone:!0,features:[se],decls:20,vars:2,consts:[[1,"layoutbox"],[1,"head"],[1,"logo"],["src","https://cdn1.mandarin.com.pl/eologo.png","alt","EasyOrder",1,"w-full"],[1,"backbtn",3,"click"],[1,"material-symbols-rounded"],[1,"loginform"],[3,"ngSubmit"],["type","email","id","email","name","email","required","",3,"ngModelChange","ngModel"],["type","password","id","password","name","password","required","",3,"ngModelChange","ngModel"],["type","submit",1,"login"],[1,"footstatic"]],template:function(r,i){r&1&&(M(0,"main")(1,"div",0)(2,"div",1)(3,"div",2),J(4,"img",3),A(),M(5,"div",4),j("click",function(){return i.goToPage("landingpage")}),M(6,"span",5),R(7," arrow_back "),A()()(),M(8,"div",6)(9,"form",7),j("ngSubmit",function(l){return i.onSubmit(l)}),M(10,"div"),R(11," Email "),M(12,"input",8),at("ngModelChange",function(l){return lt(i.email,l)||(i.email=l),l}),A()(),M(13,"div"),R(14," Has\u0142o "),M(15,"input",9),at("ngModelChange",function(l){return lt(i.password,l)||(i.password=l),l}),A()(),J(16,"div"),M(17,"button",10),R(18,"Zaloguj"),A()()(),J(19,"div",11),A()()),r&2&&(V(12),st("ngModel",i.email),V(3),st("ngModel",i.password))},dependencies:[Wt,tr,Kt,gn,er,Sn,cn,Wn],styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;justify-content:space-between;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{width:100%;height:64px;padding:0 32px;border-bottom:3px solid #000;display:flex;justify-content:space-between;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{margin:8px 0;height:48px}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .backbtn[_ngcontent-%COMP%]{height:48px;font-size:48px;font-weight:700;display:flex;justify-content:center;align-items:center;margin:8px 0}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .backbtn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{height:48px;font-size:48px;font-weight:700}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]{width:75%;display:flex;flex-direction:column;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:100%}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-weight:bolder;font-size:110%;margin-bottom:16px}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;background:#fff;padding:16px;font-size:110%;border-radius:16px;color:#000;font-weight:600;letter-spacing:2px;border:3px solid #000;transition:all .5s;margin-bottom:24px}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#333}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;background:#000;padding:16px;font-size:110%;color:#fff;font-weight:600;letter-spacing:2px;border:none;transition:all .5s;border-radius:16px;cursor:pointer}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#333}"]})}return e})();var BD=(()=>{class e{db;constructor(){let t=Ce(Ie.firebaseConfig);this.db=K(t)}emailExists(t){let r=Q(this.db,"Owners");return Dt(ue(r)).pipe(je(i=>{if(i.exists()){let o=i.val();return Object.values(o).map(h=>h.email).includes(t)}return!1}),vr(i=>(console.error("Error checking email existence:",i),Dt([!1]))))}register(t){let r=Q(this.db,"Owners"),i=pu(r);return new Ve(o=>{Fo(i,Ue(re({},t),{id:i.key})).then(()=>{o.next(i),o.complete()}).catch(l=>{o.error(l)})})}static \u0275fac=function(r){return new(r||e)};static \u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var UD=(()=>{class e{registrationService;navigationService;email="";password="";confirmPassword="";constructor(t,r){this.registrationService=t,this.navigationService=r}onSubmit(t){if(t.preventDefault(),this.password!==this.confirmPassword){alert("Has\u0142a nie pasuj\u0105 do siebie!");return}this.registrationService.emailExists(this.email).subscribe(r=>{if(r){alert("Email jest ju\u017C zarejestrowany!");return}let i={name:this.email.split("@")[0],email:this.email,password:this.password,uniqueLinkToken:this.generateUniqueLinkToken(16)};this.registrationService.register(i).subscribe({next:o=>{let l=o.key;l?(sessionStorage.setItem("userId",l),sessionStorage.setItem("userEmail",i.email),sessionStorage.setItem("uniqueLinkToken",i.uniqueLinkToken),this.navigationService.NavigateTo("newrestaurant")):console.error("Nie uda\u0142o si\u0119 uzyska\u0107 ownerId z Firebase.")},error:o=>{console.error("Registration failed:",o)}})})}generateUniqueLinkToken(t=16){let r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i="";for(let o=0;o<t;o++)i+=r.charAt(Math.floor(Math.random()*r.length));return i}goToPage(t){this.navigationService.NavigateTo(t)}static \u0275fac=function(r){return new(r||e)(W(BD),W(Se))};static \u0275cmp=oe({type:e,selectors:[["app-register"]],standalone:!0,features:[se],decls:22,vars:3,consts:[[1,"layoutbox"],[1,"head"],[1,"logo"],["src","https://cdn1.mandarin.com.pl/eologo.png","alt","EasyOrder",1,"w-full"],[1,"backbtn",3,"click"],[1,"material-symbols-rounded"],[1,"loginform"],[3,"ngSubmit"],["type","email","id","email","name","email","required","",3,"ngModelChange","ngModel"],["type","password","id","password","name","password","required","",3,"ngModelChange","ngModel"],["type","password","id","confirmPassword","name","confirmPassword","required","",3,"ngModelChange","ngModel"],["type","submit",1,"register"]],template:function(r,i){r&1&&(M(0,"main")(1,"div",0)(2,"div",1)(3,"div",2),J(4,"img",3),A(),M(5,"div",4),j("click",function(){return i.goToPage("landingpage")}),M(6,"span",5),R(7," arrow_back "),A()()(),M(8,"div",6)(9,"form",7),j("ngSubmit",function(l){return i.onSubmit(l)}),M(10,"div"),R(11," E-mail "),M(12,"input",8),at("ngModelChange",function(l){return lt(i.email,l)||(i.email=l),l}),A()(),M(13,"div"),R(14," Has\u0142o "),M(15,"input",9),at("ngModelChange",function(l){return lt(i.password,l)||(i.password=l),l}),A()(),M(16,"div"),R(17," Powt\xF3rz has\u0142o "),M(18,"input",10),at("ngModelChange",function(l){return lt(i.confirmPassword,l)||(i.confirmPassword=l),l}),A()(),M(19,"button",11),R(20,"Zarejestruj"),A()()(),J(21,"div"),A()()),r&2&&(V(12),st("ngModel",i.email),V(3),st("ngModel",i.password),V(3),st("ngModel",i.confirmPassword))},dependencies:[Wt,tr,Kt,gn,er,Sn,cn,Wn],styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;justify-content:space-between;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{width:100%;height:64px;padding:0 32px;border-bottom:3px solid #000;display:flex;justify-content:space-between;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{margin:8px 0;height:48px}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .backbtn[_ngcontent-%COMP%]{height:48px;font-size:48px;font-weight:700;display:flex;justify-content:center;align-items:center;margin:8px 0}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .backbtn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{height:48px;font-size:48px;font-weight:700}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]{width:75%;display:flex;flex-direction:column;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:100%}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-weight:bolder;font-size:110%;margin-bottom:16px}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;background:#fff;padding:16px;font-size:110%;border-radius:16px;color:#000;font-weight:600;letter-spacing:2px;border:3px solid #000;transition:all .5s;margin-bottom:24px}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#333}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;background:#000;padding:16px;font-size:110%;color:#fff;font-weight:600;letter-spacing:2px;border:none;transition:all .5s;border-radius:16px;cursor:pointer}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#333}"]})}return e})();var Y_=(()=>{class e{navigationService;constructor(t){this.navigationService=t}goToPage(t){this.navigationService.NavigateTo(t)}static \u0275fac=function(r){return new(r||e)(W(Se))};static \u0275cmp=oe({type:e,selectors:[["app-landing-page"]],standalone:!0,features:[se],decls:9,vars:0,consts:[[1,"w-full","h-full","m-0","p-8","flex","flex-row","flex-nowrap","justify-center","items-center"],[1,"w-3/5","h-full","flex","flex-col","flex-nowrap","justify-center","items-center","relative"],[1,"text-[110%]","w-full","flex","flex-col","flex-nowrap","justify-center","items-center","mb-12"],["src","https://cdn1.mandarin.com.pl/eologo.png","alt","EasyOrder",1,"w-full"],[1,"w-full","flex","flex-col","flex-nowrap","justify-center","items-center"],[1,"w-full","bg-black","p-4","text-[110%]","text-white","font-semibold","tracking-widest","border-none","rounded-lg","transition-all","duration-500","mb-4","hover:bg-[#292929]",3,"click"],[1,"w-full","bg-black","p-4","text-[110%]","text-white","font-semibold","tracking-widest","border-none","rounded-lg","transition-all","duration-500","hover:bg-[#292929]",3,"click"]],template:function(r,i){r&1&&(M(0,"main",0)(1,"div",1)(2,"div",2),J(3,"img",3),A(),M(4,"div",4)(5,"button",5),j("click",function(){return i.goToPage("register")}),R(6," Zarejestruj si\u0119 "),A(),M(7,"button",6),j("click",function(){return i.goToPage("login")}),R(8," Zaloguj si\u0119 "),A()()()())},encapsulation:2})}return e})();var VD=(()=>{class e{navigationService;name="";address="";constructor(t){this.navigationService=t;let r=Ce(Ie.firebaseConfig)}onSubmit(t){t.preventDefault();let r=sessionStorage.getItem("uniqueLinkToken"),i=sessionStorage.getItem("userId");if(!i){alert("You must be logged in to create a restaurant.");return}let o={id:Date.now().toString(),name:this.name,address:this.address,uniqueLinkToken:r||"",settings:{table_change_allowed:!0,table_block_allowed:!0,order_number_typed_by_waiter_required:!0,waiter_access_pin:1234},TableGroups:[],Tables:[],Orders:[],Waiters:[{id:"0",name:"System",is_active:!0,is_default:!0}]};this.saveRestaurant(o,i)}saveRestaurant(t,r){let i=K(),o=t.id,l=Q(i,`Owners/${r}/Restaurants/${o}`);Fo(l,t).then(()=>{console.log("Restaurant added successfully:",t),this.navigationService.NavigateTo("changerestaurant"),this.resetForm()}).catch(h=>{console.error("Error adding restaurant:",h)})}resetForm(){this.name="",this.address=""}goToPage(t){this.navigationService.NavigateTo(t)}static \u0275fac=function(r){return new(r||e)(W(Se))};static \u0275cmp=oe({type:e,selectors:[["app-newrestaurant"]],standalone:!0,features:[se],decls:20,vars:2,consts:[[1,"layoutbox"],[1,"head"],[1,"logo"],["src","https://cdn1.mandarin.com.pl/eologo.png","alt","EasyOrder",1,"w-full"],[1,"backbtn",3,"click"],[1,"material-symbols-rounded"],[1,"form"],[3,"ngSubmit"],["type","text","id","name","name","name","required","",3,"ngModelChange","ngModel"],["type","text","id","adress","name","adress","required","",3,"ngModelChange","ngModel"],["type","submit",1,"addrestaurant"],[1,"footstatic"]],template:function(r,i){r&1&&(M(0,"main")(1,"div",0)(2,"div",1)(3,"div",2),J(4,"img",3),A(),M(5,"div",4),j("click",function(){return i.goToPage("landingpage")}),M(6,"span",5),R(7," arrow_back "),A()()(),M(8,"div",6)(9,"form",7),j("ngSubmit",function(l){return i.onSubmit(l)}),M(10,"div"),R(11," Nazwa restauracji "),M(12,"input",8),at("ngModelChange",function(l){return lt(i.name,l)||(i.name=l),l}),A()(),M(13,"div"),R(14," Adres "),M(15,"input",9),at("ngModelChange",function(l){return lt(i.address,l)||(i.address=l),l}),A()(),J(16,"div"),M(17,"button",10),R(18,"Dodaj"),A()()(),J(19,"div",11),A()()),r&2&&(V(12),st("ngModel",i.name),V(3),st("ngModel",i.address))},dependencies:[Wt,tr,Kt,gn,er,Sn,cn,Wn],styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;justify-content:space-between;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{width:100%;height:64px;padding:0 32px;border-bottom:3px solid #000;display:flex;justify-content:space-between;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{margin:8px 0;height:48px}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .backbtn[_ngcontent-%COMP%]{height:48px;font-size:48px;font-weight:700;display:flex;justify-content:center;align-items:center;margin:8px 0}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .backbtn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{height:48px;font-size:48px;font-weight:700}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]{width:75%;display:flex;flex-direction:column;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:100%}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-weight:bolder;font-size:110%;margin-bottom:16px}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;background:#fff;padding:16px;font-size:110%;border-radius:16px;color:#000;font-weight:600;letter-spacing:2px;border:3px solid #000;transition:all .5s;margin-bottom:24px}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#333}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;background:#000;padding:16px;font-size:110%;color:#fff;font-weight:600;letter-spacing:2px;border:none;transition:all .5s;border-radius:16px;cursor:pointer}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#333}"]})}return e})();var jD=(()=>{class e{navigationService;constructor(t){this.navigationService=t}goToPage(t){this.navigationService.NavigateTo(t)}static \u0275fac=function(r){return new(r||e)(W(Se))};static \u0275cmp=oe({type:e,selectors:[["app-restaurantmanage"]],standalone:!0,features:[se],decls:16,vars:0,consts:[[1,"layoutbox"],[1,"logo"],["src","https://cdn1.mandarin.com.pl/eologo.png","alt","EasyOrder"],[1,"buttons"],[1,"tablemanage",3,"click"],[1,"settings",3,"click"],[1,"revievs",3,"click"],[1,"stats",3,"click"],[1,"bilings",3,"click"],[1,"footstatic"]],template:function(r,i){r&1&&(M(0,"main")(1,"div",0)(2,"div",1),J(3,"img",2),A(),M(4,"div",3)(5,"button",4),j("click",function(){return i.goToPage("tablemanage")}),R(6,"Zarz\u0105dzanie stolikami"),A(),M(7,"button",5),j("click",function(){return i.goToPage("restaurantsettings")}),R(8,"Ustawienia"),A(),M(9,"button",6),j("click",function(){return i.goToPage("restaurantrevievs")}),R(10,"Opinie restauracji"),A(),M(11,"button",7),j("click",function(){return i.goToPage("restaurantstats")}),R(12,"Statystyki"),A(),M(13,"button",8),j("click",function(){return i.goToPage("restaurantbilings")}),R(14,"P\u0142atno\u015Bci"),A()(),J(15,"div",9),A()())},dependencies:[Wt],styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;padding:0;position:relative}.layoutbox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:space-evenly;align-items:center;align-content:center;position:relative}.logo[_ngcontent-%COMP%]{display:flex;font-size:45%;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center}.logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:80px}.buttons[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center}.buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;background:#fff;padding:24px;font-size:110%;color:#000;font-weight:600;letter-spacing:2px;border-bottom:3px solid #000000;transition:all .5s;margin-bottom:0;font-weight:700}.buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-child{border-top:#000000 solid 3px}"]})}return e})();var ap={production:!0,firebaseConfig:{apiKey:"AIzaSyC2ak3O4qovvrDLGJ-L3a6E1uLASES2xuU",authDomain:"tablefi-31087.firebaseapp.com",databaseURL:"https://tablefi-31087-default-rtdb.europe-west1.firebasedatabase.app",projectId:"tablefi-31087",storageBucket:"tablefi-31087.appspot.com",messagingSenderId:"821585389969",appId:"1:821585389969:web:9383409a2e5fbf601b5230",measurementId:"G-QXT5KZEKGZ"}};function H7(e,n){e&1&&(M(0,"p"),R(1,"Brak restauracji przypisanych do konta."),A())}function z7(e,n){if(e&1){let t=Tt();M(0,"button",10),j("click",function(){let i=it(t).$implicit,o=pe(2);return ot(o.setRestaurant(i.id))}),M(1,"p",11),R(2),A(),M(3,"p",12),R(4),A()()}if(e&2){let t=n.$implicit;V(2),bt(t.name),V(2),bt(t.address)}}function W7(e,n){if(e&1&&Pn(0,z7,5,2,"button",9,Rn),e&2){let t=pe();kn(t.restaurants)}}var HD=(()=>{class e{navigationService;restaurants=[];db;constructor(t){this.navigationService=t;let r=Ce(ap.firebaseConfig);this.db=K(r)}ngOnInit(){this.loadRestaurants()}loadRestaurants(){let t=sessionStorage.getItem("userId"),r=Q(this.db,`Owners/${t}/Restaurants`);ue(r).then(i=>{if(i.exists()){let o=i.val();this.restaurants=Object.values(o),this.restaurants.length===1&&(localStorage.setItem("currentRestaurant",this.restaurants[0].id.toString()),console.log(this.restaurants[0].id.toString()),this.navigationService.NavigateTo("managerestaurant"))}else console.log("No restaurants found for this owner.")}).catch(i=>{console.error("Error loading restaurants:",i)})}setRestaurant(t){localStorage.setItem("currentRestaurant",t),this.navigationService.NavigateTo("managerestaurant")}goToPage(t){this.navigationService.NavigateTo(t)}static \u0275fac=function(r){return new(r||e)(W(Se))};static \u0275cmp=oe({type:e,selectors:[["app-changerestaurant"]],standalone:!0,features:[se],decls:14,vars:1,consts:[[1,"layoutbox"],[1,"head"],[1,"logo"],["src","https://cdn1.mandarin.com.pl/eologo.png","alt","EasyOrder",1,"w-full"],[1,"backbtn",3,"click"],[1,"material-symbols-rounded"],[1,"restaurants"],[1,"footstatic"],[3,"click"],[1,"restaurant"],[1,"restaurant",3,"click"],["id","datavalve"],["id","datavalve2"]],template:function(r,i){r&1&&(M(0,"main")(1,"div",0)(2,"div",1)(3,"div",2),J(4,"img",3),A(),M(5,"div",4),j("click",function(){return i.goToPage("managerestaurant")}),M(6,"span",5),R(7," arrow_back "),A()()(),M(8,"div",6),mt(9,H7,2,0,"p")(10,W7,2,0),A(),M(11,"div",7)(12,"button",8),j("click",function(){return i.goToPage("newrestaurant")}),R(13," Dodaj "),A()()()()),r&2&&(V(9),zn(i.restaurants.length===0?9:10))},styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;justify-content:space-between;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{width:100%;height:64px;padding:0 32px;border-bottom:3px solid #000;display:flex;justify-content:space-between;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{margin:8px 0;height:48px}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .backbtn[_ngcontent-%COMP%]{height:48px;font-size:48px;font-weight:700;display:flex;justify-content:center;align-items:center;margin:8px 0}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .backbtn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{height:48px;font-size:48px;font-weight:700}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .restaurants[_ngcontent-%COMP%]{width:75%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .restaurants[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:flex-start;align-content:flex-start;border:3px black solid;border-radius:16px;padding:16px 16px 48px;margin-bottom:16px}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .restaurants[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   #datavalve[_ngcontent-%COMP%]{font-weight:700;font-size:200%}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .restaurants[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   #datavalve2[_ngcontent-%COMP%]{font-weight:700;font-size:110%}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .restaurants[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#dfdfdf}main[_ngcontent-%COMP%]   .footstatic[_ngcontent-%COMP%]{width:100%;padding:16px}main[_ngcontent-%COMP%]   .footstatic[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;background:#000;padding:16px;font-size:110%;color:#fff;font-weight:600;letter-spacing:2px;border:none;transition:all .5s;border-radius:16px;cursor:pointer}main[_ngcontent-%COMP%]   .footstatic[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#333}"]})}return e})();var zD=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275cmp=oe({type:e,selectors:[["app-restaurantbilings"]],standalone:!0,features:[se],decls:9,vars:0,consts:[[1,"displaybox"],[1,"logo"],[1,"buttons"],[1,"footstatic"]],template:function(r,i){r&1&&(M(0,"main")(1,"div",0)(2,"div",1)(3,"h1"),R(4,"EasyOrder"),A()(),M(5,"div",2)(6,"h1"),R(7,"Brak Projektu!"),A()(),J(8,"div",3),A()())},styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;padding:32px;position:relative;background:#000!important;color:#ffa700}.displaybox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center;position:relative}.logo[_ngcontent-%COMP%]{display:flex;font-size:45%;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center;margin-bottom:48px}body[_ngcontent-%COMP%]{background:#000!important;color:#ffa700}h1[_ngcontent-%COMP%]{font-size:200%}"]})}return e})();var WD=(()=>{class e{navigationService;constructor(t){this.navigationService=t,Ce(Ie.firebaseConfig)}goToPage(t){this.navigationService.NavigateTo(t)}deleteaccount(){let t=K(),r=sessionStorage.getItem("userId"),i=Q(t,`Owners/${r}`);nr(i).then(()=>{console.log("owner deleted successfully"),this.navigationService.NavigateTo("landingpage")}).catch(o=>{console.error("Error deleting table:",o)})}static \u0275fac=function(r){return new(r||e)(W(Se))};static \u0275cmp=oe({type:e,selectors:[["app-restaurantsettings"]],standalone:!0,features:[se],decls:21,vars:0,consts:[[1,"displaybox"],[1,"logo"],[1,"buttons"],[1,"alltablesqrcodes",3,"click"],[1,"myrestaaurants",3,"click"],[1,"tablesettings",3,"click"],[1,"waitersoptions",3,"click"],[1,"deleteaccount",3,"click"],[1,"footstatic"]],template:function(r,i){r&1&&(M(0,"main")(1,"div",0)(2,"div",1)(3,"h1"),R(4,"EasyOrder"),A()(),M(5,"div",2)(6,"button",3),j("click",function(){return i.goToPage("alltablesqrcodes")}),R(7,"Pobierz kody QR Stolik\xF3w"),A(),M(8,"button",4),j("click",function(){return i.goToPage("cashpointqrcode")}),R(9,"Wygeneruj kod QR obok kasy"),A(),M(10,"button",5),j("click",function(){return i.goToPage("tablesettings")}),R(11,"Ustawienia Stolik\xF3w"),A(),M(12,"button",6),j("click",function(){return i.goToPage("waitersettings")}),R(13,"Opcje dotycz\u0105ce kelner\xF3w"),A(),M(14,"button",4),j("click",function(){return i.goToPage("changerestaurant")}),R(15,"Moje restauracje"),A(),M(16,"button",4),j("click",function(){return i.goToPage("newrestaurant")}),R(17,"Dodaj restauracje"),A(),M(18,"button",7),j("click",function(){return i.deleteaccount()}),R(19,"Usu\u0144 Konto"),A()(),J(20,"div",8),A()())},styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;padding:16px;position:relative}.displaybox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center;position:relative}.logo[_ngcontent-%COMP%]{display:flex;font-size:45%;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center;margin-bottom:48px}.buttons[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center}.buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;background:#fff;padding:24px;font-size:110%;color:#000;font-weight:600;letter-spacing:2px;border:1px solid #000000;transition:all .5s;margin-bottom:24px}"]})}return e})();var GD=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275cmp=oe({type:e,selectors:[["app-restaurantrevievs"]],standalone:!0,features:[se],decls:2,vars:0,template:function(r,i){r&1&&(M(0,"p"),R(1,"restaurantrevievs works!"),A())}})}return e})();var $D=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275cmp=oe({type:e,selectors:[["app-restaurantstats"]],standalone:!0,features:[se],decls:2,vars:0,template:function(r,i){r&1&&(M(0,"p"),R(1,"restaurantstats works!"),A())}})}return e})();var G7=(e,n,t)=>({"background-color":e,color:n,border:t});function $7(e,n){e&1&&(M(0,"p"),R(1,"Brak stolik\xF3w przypisanych do restauracji."),A())}function q7(e,n){if(e&1){let t=Tt();M(0,"button",13),j("click",function(){let i=it(t).$implicit,o=pe(2);return ot(o.setTable(i.id))}),R(1),A()}if(e&2){let t=n.$implicit,r=pe(2);Ee("ngStyle",Ia(2,G7,t.group_id&&r.tableGroups[t.group_id]?r.tableGroups[t.group_id]:"white",t.group_id&&r.tableGroups[t.group_id]?r.getTextColor(r.tableGroups[t.group_id]):"black",t.group_id&&r.tableGroups[t.group_id]==="#ffffff"||!r.tableGroups[t.group_id]?"2px solid black":"none")),V(),xt(" ",t.name," ")}}function Y7(e,n){if(e&1&&Pn(0,q7,2,6,"button",12,Rn),e&2){let t=pe();kn(t.tables)}}var qD=(()=>{class e{navigationService;tables=[];tableGroups={};isMenuOpen=!1;toggleMenu(){this.isMenuOpen=!this.isMenuOpen}constructor(t){this.navigationService=t;let r=Ce(Ie.firebaseConfig)}ngOnInit(){this.loadTables()}loadTables(){let t=K(),r=localStorage.getItem("currentRestaurant"),i=sessionStorage.getItem("userId");if(!r){console.error("No current restaurant found in local storage");return}let o=Q(t,`Owners/${i}/Restaurants/${r}/Tables`);ue(o).then(l=>{if(l.exists()){let h=l.val();this.tables=Object.values(h),this.loadTableGroups()}else console.log("No tables found")}).catch(l=>{console.error("Error loading tables:",l)})}loadTableGroups(){let t=K(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant");if(!r||!i){console.error("Missing owner or restaurant ID");return}let o=Q(t,`Owners/${r}/Restaurants/${i}/TableGroups`);ue(o).then(l=>{if(l.exists()){let h=l.val();for(let g in h)this.tableGroups[g]=h[g].color}}).catch(l=>{console.error("Error loading table groups:",l)})}getTextColor(t){let r=t.replace("#",""),i=parseInt(r.substring(0,2),16),o=parseInt(r.substring(2,4),16),l=parseInt(r.substring(4,6),16);return(i*299+o*587+l*114)/1e3>125?"black":"white"}setTable(t){localStorage.setItem("currentTable",t),this.goToPage("tableedit")}goToPage(t){this.navigationService.NavigateTo(t)}static \u0275fac=function(r){return new(r||e)(W(Se))};static \u0275cmp=oe({type:e,selectors:[["app-tablemanage"]],standalone:!0,features:[se],decls:32,vars:6,consts:[[1,"sidebar"],[1,"overlay"],[3,"click"],[1,"active",3,"click"],[1,"layoutbox"],[1,"head"],[1,"logo"],["src","https://cdn1.mandarin.com.pl/eologo.png","alt","EasyOrder",1,"w-full"],[1,"backbtn",3,"click"],[1,"material-symbols-rounded"],[1,"buttons"],[1,"footstatic"],[1,"table-button",3,"ngStyle"],[1,"table-button",3,"click","ngStyle"]],template:function(r,i){r&1&&(M(0,"main")(1,"div",0)(2,"div",1)(3,"ul")(4,"li")(5,"span",2),j("click",function(){return i.toggleMenu()}),R(6,"X"),A()(),M(7,"li",3),j("click",function(){return i.goToPage("tablemanage")}),R(8,"Zarz\u0105dzanie stolikami"),A(),M(9,"li",2),j("click",function(){return i.goToPage("restaurantrevievs")}),R(10,"Opinie"),A(),M(11,"li",2),j("click",function(){return i.goToPage("restaurantbilings")}),R(12,"P\u0142atno\u015Bci"),A(),M(13,"li",2),j("click",function(){return i.goToPage("restaurantsettings")}),R(14,"Ustawienia"),A(),M(15,"li",2),j("click",function(){return i.goToPage("managerestaurant")}),R(16,"Powr\xF3t"),A()()()(),M(17,"div",4)(18,"div",5)(19,"div",6),J(20,"img",7),A(),M(21,"div",8),j("click",function(){return i.toggleMenu()}),M(22,"span",9),R(23,"menu"),A()()(),M(24,"div",10),mt(25,$7,2,0,"p")(26,Y7,2,0),A(),M(27,"div",11)(28,"button",2),j("click",function(){return i.goToPage("tablecreate")}),R(29,"Dodaj stolik"),A(),M(30,"button",2),j("click",function(){return i.goToPage("tablegroupmanage")}),R(31,"Edytuj grupy"),A()()()()),r&2&&(V(),pr("active",i.isMenuOpen),V(),pr("active",i.isMenuOpen),V(23),zn(i.tables.length===0?25:-1),V(),zn(i.tables.length>0?26:-1))},dependencies:[En,Eo],styles:['@font-face{font-family:Varela Round;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/varelaround/v20/w8gdH283Tvk__Lua32TysjIfpcuPP9g.woff2) format("woff2");unicode-range:U+0307-0308,U+0590-05FF,U+200C-2010,U+20AA,U+25CC,U+FB1D-FB4F}@font-face{font-family:Varela Round;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/varelaround/v20/w8gdH283Tvk__Lua32TysjIfqMuPP9g.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Varela Round;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/varelaround/v20/w8gdH283Tvk__Lua32TysjIfqcuPP9g.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Varela Round;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/varelaround/v20/w8gdH283Tvk__Lua32TysjIfp8uP.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;justify-content:space-between;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{width:100%;height:64px;padding:0 32px;border-bottom:3px solid #000;display:flex;justify-content:space-between;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{margin:8px 0;height:48px}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%;z-index:99999}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .backbtn[_ngcontent-%COMP%]{height:48px;font-size:48px;font-weight:700;display:flex;justify-content:center;align-items:center;margin:8px 0}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .backbtn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{height:48px;font-size:48px;font-weight:700}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{width:100%;height:100%;overflow-y:auto;overflow-x:hidden;display:flex;flex-direction:row;flex-wrap:wrap;justify-content:flex-start;align-items:flex-start;align-content:flex-start}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:114px;height:114px;border-radius:16px;margin:8px;font-size:200%;font-weight:bolder}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .footstatic[_ngcontent-%COMP%]{width:100%;border-top:black 3px solid;padding:8px;display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .footstatic[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:calc(50% - 8px);border:2px solid black;border-radius:16px;color:#000;background:#fff;padding:16px;font-size:110%;font-weight:bolder}.sidebar[_ngcontent-%COMP%]{position:fixed;top:0;right:-100%;width:100%;height:100%;background-color:#00000040;box-shadow:-2px 0 5px #00000080;-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px);transition:right .3s ease;z-index:999}.sidebar.active[_ngcontent-%COMP%]{right:0}.sidebar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin-top:0;list-style:none;padding:0}.sidebar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{border-bottom:3px solid black;padding:16px;font-weight:700;margin:0}.sidebar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:first-child{text-align:right;padding-top:0;padding-bottom:0;padding-right:32px;height:64px;display:flex;flex-direction:row;flex-wrap:wrap;justify-content:flex-end;align-items:center;align-content:center}.sidebar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:first-child   span[_ngcontent-%COMP%]{height:48px;width:48px;font-size:32px;font-weight:700;font-family:Varela Round,sans-serif}.sidebar[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]{background:#000;color:#fff}.overlay[_ngcontent-%COMP%]{position:fixed;top:0;right:-250px;width:250px;height:100%;background-color:#fff;box-shadow:-2px 0 5px #00000080;transition:right .3s ease}.overlay.active[_ngcontent-%COMP%]{right:0}']})}return e})();function Z7(e,n){if(e&1&&(M(0,"option",15),R(1),A()),e&2){let t=pe().$implicit;Ee("value",t.id),V(),bt(t.name)}}function X7(e,n){if(e&1&&mt(0,Z7,2,2,"option",15),e&2){let t=n.$implicit,r=pe();zn(t.id!=r.table.group_id?0:-1)}}var YD=(()=>{class e{navigationService;messagesokService;name="";description="";table={id:"",name:"",group_id:"",description:"",is_blocked:!1};tableGroups=[];restaurantId="";constructor(t,r){this.navigationService=t,this.messagesokService=r,Ce(Ie.firebaseConfig)}ngOnInit(){this.loadTableGroups()}loadTableGroups(){let t=sessionStorage.getItem("userId"),r=localStorage.getItem("currentRestaurant");if(!t||!r){console.error("Missing owner or restaurant ID");return}let i=K(),o=Q(i,`Owners/${t}/Restaurants/${r}/TableGroups`);ue(o).then(l=>{l.exists()?this.tableGroups=Object.values(l.val()):console.log("No table groups found")}).catch(l=>{console.error("Error loading table groups:",l)})}goToPage(t){this.navigationService.NavigateTo(t)}onSubmit(t){t.preventDefault();let r=Date.now().toString(),i=localStorage.getItem("currentRestaurant");if(!i){alert("Nie wybrano restauracji.");return}let o={id:r,group_id:this.table.group_id,name:this.name,is_blocked:!1,description:this.description?this.description:""};this.saveTable(o,i)}saveTable(t,r){let i=K(),o=Q(i,`Owners/${sessionStorage.getItem("userId")}/Restaurants/${r}/Tables`);ut(o,{[t.id]:t}).then(()=>{this.messagesokService.askUser("Stolik zosta\u0142 dodany",()=>{this.navigationService.NavigateTo("tablemanage")}),this.resetForm()}).catch(l=>{console.error("B\u0142\u0105d podczas dodawania stolika:",l)})}resetForm(){this.name="",this.description="",this.table.group_id=""}static \u0275fac=function(r){return new(r||e)(W(Se),W(Do))};static \u0275cmp=oe({type:e,selectors:[["app-tablecreate"]],standalone:!0,features:[se],decls:27,vars:3,consts:[[1,"layoutbox"],[1,"head"],[1,"logo"],["src","https://cdn1.mandarin.com.pl/eologo.png","alt","EasyOrder"],[1,"backbtn",3,"click"],[1,"material-symbols-rounded"],[1,"buttons"],[3,"ngSubmit"],[1,"box"],["type","text","id","name","name","name","required","",3,"ngModelChange","ngModel"],["id","group","name","groupId",3,"ngModelChange","ngModel"],["selected","",3,"value"],["type","text","id","description","name","description",1,"description",3,"ngModelChange","ngModel"],["type","submit",1,"addtable"],[1,"footstatic"],[3,"value"]],template:function(r,i){r&1&&(M(0,"main")(1,"div",0)(2,"div",1)(3,"div",2),J(4,"img",3),A(),M(5,"div",4),j("click",function(){return i.goToPage("tablemanage")}),M(6,"span",5),R(7," arrow_back "),A()()(),M(8,"div",6)(9,"form",7),j("ngSubmit",function(l){return i.onSubmit(l)}),M(10,"div",8)(11,"div"),R(12," Nazwa stolika "),M(13,"input",9),at("ngModelChange",function(l){return lt(i.name,l)||(i.name=l),l}),A()(),M(14,"div"),R(15," Grupa "),M(16,"select",10),at("ngModelChange",function(l){return lt(i.table.group_id,l)||(i.table.group_id=l),l}),M(17,"option",11),R(18,"Wybierz Grup\u0119"),A(),Pn(19,X7,1,1,null,null,Rn),A()(),M(21,"div"),R(22," Opis Stolika "),M(23,"input",12),at("ngModelChange",function(l){return lt(i.description,l)||(i.description=l),l}),A()()(),M(24,"button",13),R(25,"Dodaj stolik"),A()()(),J(26,"div",14),A()()),r&2&&(V(13),st("ngModel",i.name),V(3),st("ngModel",i.table.group_id),V(3),kn(i.tableGroups),V(4),st("ngModel",i.description))},dependencies:[Wt,tr,Ch,wh,Kt,ja,gn,er,Sn,cn,Wn],styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;justify-content:space-between;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{width:100%;height:64px;padding:0 32px;border-bottom:3px solid #000;display:flex;justify-content:space-between;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{margin:8px 0;height:48px}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .backbtn[_ngcontent-%COMP%]{height:48px;width:48px;font-size:48px;font-weight:700;display:flex;justify-content:center;align-items:center;margin:8px 0}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .backbtn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{height:48px;font-size:48px;font-weight:700}.buttons[_ngcontent-%COMP%]{width:calc(100% - 48px)}.buttons[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]{width:100%;border:3px solid #000000;border-radius:16px;display:flex;padding:24px;flex-direction:column;flex-wrap:nowrap;justify-content:flex-start;align-items:center;align-content:center}.buttons[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-weight:bolder}.buttons[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;background:#fff;padding:8px;font-size:110%;border-radius:16px;color:#000;font-weight:600;letter-spacing:2px;border:3px solid #000;transition:all .5s;margin-bottom:24px}.buttons[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#333}.buttons[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center}div[_ngcontent-%COMP%]{width:100%}div[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;background:#fff;padding:8px;font-size:110%;border-radius:16px;color:#000;font-weight:600;letter-spacing:2px;border:3px solid #000;transition:all .5s;margin-bottom:24px}.addtable[_ngcontent-%COMP%]{margin-top:24px;width:100%;background:#000;padding:16px;font-size:110%;color:#fff;font-weight:600;letter-spacing:2px;border:none;transition:all .5s;border-radius:16px;cursor:pointer}.addtable[_ngcontent-%COMP%]:hover{background:#333}.description[_ngcontent-%COMP%]{height:100px}"]})}return e})();var Q7=(e,n,t)=>({"background-color":e,color:n,border:t}),ZD=(()=>{class e{navigationService;messagesService;tableId=null;table=null;tableGroupName=null;groupColor=null;tableBlockAllowed=!0;restaurantId="";tables=[];tableGroups={};isMenuOpen=!1;constructor(t,r){this.navigationService=t,this.messagesService=r,Ce(Ie.firebaseConfig)}ngOnInit(){this.loadTable(),this.loadSettings()}getTextColor(t){let r=t.replace("#",""),i=parseInt(r.substring(0,2),16),o=parseInt(r.substring(2,4),16),l=parseInt(r.substring(4,6),16);return(i*299+o*587+l*114)/1e3>125?"black":"white"}loadTableGroups(){let t=K(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant");if(!r||!i){console.error("Missing owner or restaurant ID");return}let o=Q(t,`Owners/${r}/Restaurants/${i}/TableGroups`);ue(o).then(l=>{if(l.exists()){let h=l.val();for(let g in h)this.tableGroups[g]=h[g].color}}).catch(l=>{console.error("Error loading table groups:",l)})}loadSettings(){let t=sessionStorage.getItem("userId");if(this.restaurantId=localStorage.getItem("currentRestaurant")??"",!t||!this.restaurantId){console.error("Missing owner or restaurant ID");return}let r=K(),i=Q(r,`Owners/${t}/Restaurants/${this.restaurantId}/settings`);ue(i).then(o=>{if(o.exists()){let l=o.val();this.tableBlockAllowed=l.table_block_allowed}else console.log("No settings found for this restaurant")}).catch(o=>{console.error("Error loading settings:",o)})}goToPage(t){this.navigationService.NavigateTo(t)}deleteTable(){this.messagesService.askUser("Czy napewno usun\u0105\u0107 stolik?",()=>{this.deleteTable2()},()=>{console.log("Deletion canceled")})}deleteTable2(){let t=K(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant");if(!this.tableId||!r||!i){console.error("Missing table, owner, or restaurant ID");return}let o=Q(t,`Owners/${r}/Restaurants/${i}/Tables/${this.tableId}`);nr(o).then(()=>{console.log("Table deleted successfully"),this.navigationService.NavigateTo("tablemanage")}).catch(l=>{console.error("Error deleting table:",l)})}blockTable(){let t=K(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant");if(!this.tableId||!r||!i){console.error("Missing table, owner, or restaurant ID");return}let o=Q(t,`Owners/${r}/Restaurants/${i}/Tables/${this.tableId}`);ut(o,{is_blocked:!0}).then(()=>{console.log("Table blocked successfully"),location.reload()}).catch(l=>{console.error("Error blocking table:",l)})}unlockTable(){let t=K(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant");if(!this.tableId||!r||!i){console.error("Missing table, owner, or restaurant ID");return}let o=Q(t,`Owners/${r}/Restaurants/${i}/Tables/${this.tableId}`);ut(o,{is_blocked:!1}).then(()=>{console.log("Table unlocked successfully"),location.reload()}).catch(l=>{console.error("Error blocking table:",l)})}saveTable(){}showQRCode(){this.navigationService.NavigateTo("showtableqr")}loadTable(){if(this.tableId=localStorage.getItem("currentTable"),!this.tableId){console.error("No current table found in local storage");return}let t=K(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant"),o=Q(t,`Owners/${r}/Restaurants/${i}/Tables/${this.tableId}`);ue(o).then(l=>{l.exists()?(this.table=l.val(),this.loadTableGroup()):console.log("No table found")}).catch(l=>{console.error("Error loading table:",l)})}loadTableGroup(){let t=K(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant");if(!this.table?.group_id||this.table.group_id==="0g"){this.tableGroupName="Stoliki bez grupy",this.groupColor="#000000";return}let o=Q(t,`Owners/${r}/Restaurants/${i}/TableGroups/${this.table.group_id}`);ue(o).then(l=>{if(l.exists()){let h=l.val();this.tableGroupName=h.name,this.groupColor=h.color}else console.log("No group found for this table")}).catch(l=>{console.error("Error loading group:",l)})}static \u0275fac=function(r){return new(r||e)(W(Se),W(So))};static \u0275cmp=oe({type:e,selectors:[["app-tableedit"]],standalone:!0,features:[se],decls:27,vars:8,consts:[[1,"layoutbox"],[1,"head"],[1,"logo"],["src","https://cdn1.mandarin.com.pl/eologo.png","alt","EasyOrder"],[1,"backbtn",3,"click"],[1,"material-symbols-rounded"],[1,"flexcontainer"],[1,"buttons"],[1,"colorbar",3,"ngStyle"],[1,"titles"],["name","description","id","description"],[1,"actionbtns"],[1,"arow"],[3,"click"],[1,"footstatic"]],template:function(r,i){r&1&&(M(0,"main")(1,"div",0)(2,"div",1)(3,"div",2),J(4,"img",3),A(),M(5,"div",4),j("click",function(){return i.goToPage("tablemanage")}),M(6,"span",5),R(7," arrow_back "),A()()(),M(8,"div",6)(9,"div",7)(10,"div",8)(11,"div",9)(12,"h1"),R(13),A(),M(14,"h3"),R(15),A()(),M(16,"h3",10),R(17),A()(),M(18,"div",11)(19,"div",12)(20,"button",13),j("click",function(){return i.deleteTable()}),R(21,"Usu\u0144 stolik"),A(),M(22,"button",13),j("click",function(){return i.goToPage("tableeedit")}),R(23,"Edytuj stolik"),A(),M(24,"button",13),j("click",function(){return i.showQRCode()}),R(25,"poka\u017C kod qr"),A()()()()(),J(26,"div",14),A()()),r&2&&(V(10),Ee("ngStyle",Ia(4,Q7,i.groupColor?i.groupColor:"white",i.groupColor?i.getTextColor(i.groupColor):"black",i.groupColor==="#ffffff"||!i.groupColor?"2px solid black":"none")),V(3),xt("Stolik ",i.table==null?null:i.table.name,""),V(2),xt("Grupa: ",i.tableGroupName,""),V(2),bt(i.table==null?null:i.table.description))},dependencies:[En,Eo],styles:[".layoutbox[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;min-height:100vh}.flexcontainer[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding:20px}.buttons[_ngcontent-%COMP%]{width:100%;max-width:400px;text-align:center}.head[_ngcontent-%COMP%]{width:100%;height:64px;padding:0 32px;border-bottom:3px solid #000;display:flex;justify-content:space-between;align-items:center;position:relative}.head[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{margin:8px 0;height:48px}.head[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%}.head[_ngcontent-%COMP%]   .backbtn[_ngcontent-%COMP%]{height:48px;width:48px;font-size:48px;font-weight:700;display:flex;justify-content:center;align-items:center;margin:8px 0}.head[_ngcontent-%COMP%]   .backbtn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{height:48px;font-size:48px;font-weight:700}.colorbar[_ngcontent-%COMP%]{height:200px;width:100%;border-radius:20px;margin-bottom:20px;color:#fff;font-weight:700;padding:16px;font-size:110%}h1[_ngcontent-%COMP%]{font-size:200%}.titles[_ngcontent-%COMP%]{margin-bottom:32px}.actionbtns[_ngcontent-%COMP%]   .arow[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;margin:10px 0;font-weight:700}.actionbtns[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;font-weight:700;background-color:#fff;border:3px solid black;border-radius:30px;padding:10px;margin:5px;text-align:left;font-size:16px;cursor:pointer;transition:background-color .3s ease,color .3s ease}.actionbtns[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#000;color:#fff}.footstatic[_ngcontent-%COMP%]{height:50px}@media only screen and (max-width: 600px){.buttons[_ngcontent-%COMP%]{max-width:100%;padding:0 20px}.head[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .head[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:20px}.actionbtns[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:14px}}"]})}return e})();var XD=(()=>{class e{route;router;tableId=null;uniqueLinkToken=null;ownerId=null;restaurantid=null;constructor(t,r){this.route=t,this.router=r,Ce(Ie.firebaseConfig)}ngOnInit(){this.route.queryParams.subscribe(t=>{this.tableId=t.t||null,this.uniqueLinkToken=t.u||null,this.ownerId=t.o||null,this.restaurantid=t.r||null})}setTable(t){let r=localStorage.getItem("currentRestaurant"),i=K();if(!this.ownerId||!this.restaurantid||!this.tableId||!this.uniqueLinkToken){console.error("Missing required data");return}let o=Q(i,`Owners/${this.ownerId}/Restaurants/${r}/settings`);ue(o).then(l=>{l.exists()?l.val().order_number_typed_by_waiter_required?this.verifyOrderNumber(t):this.saveTableAssignment(t):console.error("Settings not found")}).catch(l=>{console.error("Error loading settings:",l)})}verifyOrderNumber(t){let r=K(),i=Q(r,`Owners/${this.ownerId}/Restaurants/${this.restaurantid}/Orders`);console.log("Fetching orders from database..."),ue(i).then(o=>{if(o.exists()){let l=o.val();console.log("Orders found:",l),Object.values(l).some(g=>(console.log("Checking order:",g.name),g.name===t))?(console.log(`Order found: ${t}`),this.saveTableAssignment(t)):console.error("Order not found for:",t)}else console.log("No orders found in the database.")}).catch(o=>{console.error("Error checking order number:",o)})}saveTableAssignment(t){localStorage.setItem("customercurrentTable",this.tableId),localStorage.setItem("uniqueLinkToken",this.uniqueLinkToken),localStorage.setItem("orderNumber",t),localStorage.setItem("restaurantid",this.restaurantid),localStorage.setItem("ownerid",this.ownerId),this.router.navigate(["/tableordered"])}static \u0275fac=function(r){return new(r||e)(W(mi),W(yi))};static \u0275cmp=oe({type:e,selectors:[["app-settable"]],standalone:!0,features:[se],decls:14,vars:0,consts:[["orderNumberInput",""],[1,"layoutbox"],[1,"head"],[1,"logo"],["src","https://cdn1.mandarin.com.pl/eologo.png","alt","EasyOrder"],[1,"backbtn"],[1,"loginform"],["type","text"],[3,"click"],[1,"footstatic"]],template:function(r,i){if(r&1){let o=Tt();M(0,"main")(1,"div",1)(2,"div",2)(3,"div",3),J(4,"img",4),A(),J(5,"div",5),A(),M(6,"div",6)(7,"label"),R(8,"Wprowad\u017A numer zam\xF3wienia"),A(),J(9,"input",7,0),M(11,"button",8),j("click",function(){it(o);let h=bo(10);return ot(i.setTable(h.value))}),R(12,"Przypisz stolik"),A()(),J(13,"div",9),A()()}},styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;justify-content:space-between;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{width:100%;height:64px;padding:0 32px;border-bottom:3px solid #000;display:flex;justify-content:space-between;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{margin:8px 0;height:48px}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .backbtn[_ngcontent-%COMP%]{height:48px;font-size:48px;font-weight:700;display:flex;justify-content:center;align-items:center;margin:8px 0}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .backbtn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{height:48px;font-size:48px;font-weight:700}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]{width:75%;display:flex;flex-direction:column;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:bolder;font-size:200%;margin-bottom:24px}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;background:#fff;padding:16px;font-size:110%;border-radius:16px;color:#000;font-weight:600;letter-spacing:2px;border:3px solid #000;transition:all .5s;margin-bottom:24px}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#333}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;background:#000;padding:16px;font-size:110%;color:#fff;font-weight:600;letter-spacing:2px;border:none;transition:all .5s;border-radius:16px;cursor:pointer}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#333}"]})}return e})();function K7(e,n){if(e&1){let t=Tt();M(0,"div",5),j("click",function(){let i=it(t).$implicit,o=pe();return ot(o.setGroup(i.id))}),M(1,"h3"),R(2),A()()}if(e&2){let t=n.$implicit;V(2),bt(t.name)}}var QD=(()=>{class e{navigationService;cd;tableGroups=[];tables=[];draggedTableId=null;ungroupedTables=[];constructor(t,r){this.navigationService=t,this.cd=r,Ce(Ie.firebaseConfig)}ngOnInit(){this.loadGroupsAndTables()}loadGroupsAndTables(){let t=K(),r=localStorage.getItem("currentRestaurant"),i=sessionStorage.getItem("userId");if(!r){console.error("No current restaurant found in local storage");return}let o=Q(t,`Owners/${i}/Restaurants/${r}/Tables`),l=Q(t,`Owners/${i}/Restaurants/${r}/TableGroups`);ue(o).then(h=>{h.exists()?(this.tables=Object.values(h.val()),this.ungroupedTables=this.tables.filter(g=>g.group_id==="0g")):console.log("No tables found")}).catch(h=>{console.error("Error loading tables:",h)}),ue(l).then(h=>{h.exists()?this.tableGroups=Object.values(h.val()):console.log("No table groups found")}).catch(h=>{console.error("Error loading table groups:",h)})}getTablesForGroup(t){return this.tables.filter(r=>r.group_id===t)}setGroup(t){localStorage.setItem("currentGroup",t),this.goToPage("groupedit")}updateTableGroup(t){let r=K(),i=localStorage.getItem("currentRestaurant"),o=sessionStorage.getItem("userId");if(!i){console.error("No current restaurant found in local storage");return}let l=Q(r,`Owners/${o}/Restaurants/${i}/Tables/${t.id}`);ut(l,{group_id:t.group_id}).then(()=>{console.log(`Table ${t.name} moved to group ${t.group_id}`)}).catch(h=>{console.error("Error updating table group:",h)})}setTable(t){localStorage.setItem("currentTable",t),this.goToPage("tableedit")}goToPage(t){this.navigationService.NavigateTo(t)}static \u0275fac=function(r){return new(r||e)(W(Se),W(ji))};static \u0275cmp=oe({type:e,selectors:[["app-tablegroupmanage"]],standalone:!0,features:[se],decls:10,vars:0,consts:[[1,"displaybox"],[1,"logo"],[1,"table-group"],[1,"footstatic"],[3,"click"],[1,"table-group",3,"click"]],template:function(r,i){r&1&&(M(0,"main")(1,"div",0)(2,"div",1)(3,"h1"),R(4,"EasyOrder"),A()(),Pn(5,K7,3,1,"div",2,Rn),M(7,"div",3)(8,"button",4),j("click",function(){return i.goToPage("tablegroupcreate")}),R(9,"Dodaj now\u0105 grup\u0119"),A()()()()),r&2&&(V(5),kn(i.tableGroups))},styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;padding:16px;position:relative}.displaybox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center;position:relative}.logo[_ngcontent-%COMP%]{display:flex;font-size:45%;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center;margin-bottom:48px}.buttons[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:flex-start;align-items:center;align-content:center}.buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{text-align:left;width:100%;background:#fff;padding:24px;font-size:110%;color:#000;font-weight:600;letter-spacing:2px;border:1px solid #000000;transition:all .5s;margin-bottom:24px}.footstatic[_ngcontent-%COMP%]{width:100%}.footstatic[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;background:#fff;padding:24px;font-size:110%;color:#000;font-weight:600;letter-spacing:2px;border:1px solid #000000;transition:all .5s;margin-bottom:24px;margin-right:8px}.table-group[_ngcontent-%COMP%]{text-align:left;width:100%;background:#fff;padding:24px;font-size:110%;color:#000;font-weight:600;letter-spacing:2px;border:1px solid #000000;transition:all .5s;margin-bottom:24px}.table-group[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:100%}.table-button[_ngcontent-%COMP%]{width:100%;border:1px solid #000000;height:60px;display:block;text-align:left;margin-bottom:0;padding:8px;font-weight:700}.table-group[_ngcontent-%COMP%]:hover{background-color:#f1f1f1}"]})}return e})();var KD=(()=>{class e{navigationService;messagesokService;name="";description="";color="";location="";constructor(t,r){this.navigationService=t,this.messagesokService=r,Ce(Ie.firebaseConfig)}goToPage(t){this.navigationService.NavigateTo(t)}onSubmit(t){t.preventDefault();let r=Date.now().toString(),i=localStorage.getItem("currentRestaurant");if(!i){alert("Nie wybrano restauracji.");return}let o={id:r,name:this.name,color:this.color,description:this.description?this.description:"",location:this.location?this.location:""};this.saveTableGroup(o,i)}saveTableGroup(t,r){let i=K(),o=Q(i,`Owners/${sessionStorage.getItem("userId")}/Restaurants/${r}/TableGroups`);ut(o,{[t.id]:t}).then(()=>{this.messagesokService.askUser("Grupa zosta\u0142a dodana.",()=>{this.navigationService.NavigateTo("tablegroupmanage")}),this.resetForm()}).catch(l=>{console.error("B\u0142\u0105d podczas dodawania grupy stolik\xF3w:",l)})}resetForm(){this.name="",this.description="",this.color="",this.location=""}static \u0275fac=function(r){return new(r||e)(W(Se),W(Do))};static \u0275cmp=oe({type:e,selectors:[["app-tablegroupcreate"]],standalone:!0,features:[se],decls:26,vars:4,consts:[[1,"layoutbox"],[1,"head"],[1,"logo"],["src","https://cdn1.mandarin.com.pl/eologo.png","alt","EasyOrder"],[1,"backbtn",3,"click"],[1,"material-symbols-rounded"],[1,"buttons"],[3,"ngSubmit"],[1,"box"],["type","text","id","name","name","name","required","",3,"ngModelChange","ngModel"],["type","text","id","description","name","description",1,"description",3,"ngModelChange","ngModel"],["type","color","id","color","name","color",3,"ngModelChange","ngModel"],["type","text","id","location","name","location",3,"ngModelChange","ngModel"],["type","submit",1,"addtable"],[1,"footstatic"]],template:function(r,i){r&1&&(M(0,"main")(1,"div",0)(2,"div",1)(3,"div",2),J(4,"img",3),A(),M(5,"div",4),j("click",function(){return i.goToPage("tablegroupmanage")}),M(6,"span",5),R(7," arrow_back "),A()()(),M(8,"div",6)(9,"form",7),j("ngSubmit",function(l){return i.onSubmit(l)}),M(10,"div",8)(11,"div"),R(12," Nazwa grupy "),M(13,"input",9),at("ngModelChange",function(l){return lt(i.name,l)||(i.name=l),l}),A()(),M(14,"div"),R(15," Opis "),M(16,"input",10),at("ngModelChange",function(l){return lt(i.description,l)||(i.description=l),l}),A()(),M(17,"div"),R(18," Kolor "),M(19,"input",11),at("ngModelChange",function(l){return lt(i.color,l)||(i.color=l),l}),A()(),M(20,"div"),R(21," Lokalizacja "),M(22,"input",12),at("ngModelChange",function(l){return lt(i.location,l)||(i.location=l),l}),A()()(),M(23,"button",13),R(24,"Dodaj grup\u0119 stolik\xF3w"),A()()(),J(25,"div",14),A()()),r&2&&(V(13),st("ngModel",i.name),V(3),st("ngModel",i.description),V(3),st("ngModel",i.color),V(3),st("ngModel",i.location))},dependencies:[Wt,tr,Kt,gn,er,Sn,cn,Wn],styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;justify-content:space-between;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{width:100%;height:64px;padding:0 32px;border-bottom:3px solid #000;display:flex;justify-content:space-between;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{margin:8px 0;height:48px}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .backbtn[_ngcontent-%COMP%]{height:48px;width:48px;font-size:48px;font-weight:700;display:flex;justify-content:center;align-items:center;margin:8px 0}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .backbtn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{height:48px;font-size:48px;font-weight:700}.buttons[_ngcontent-%COMP%]{width:calc(100% - 48px)}.buttons[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]{width:100%;border:3px solid #000000;border-radius:16px;display:flex;padding:24px;flex-direction:column;flex-wrap:nowrap;justify-content:flex-start;align-items:center;align-content:center}.buttons[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-weight:bolder}.buttons[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;background:#fff;padding:8px;font-size:110%;border-radius:16px;color:#000;font-weight:600;letter-spacing:2px;border:3px solid #000;transition:all .5s;margin-bottom:24px}.buttons[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#333}.buttons[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center}div[_ngcontent-%COMP%]{width:100%}div[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;background:#fff;padding:8px;font-size:110%;border-radius:16px;color:#000;font-weight:600;letter-spacing:2px;border:3px solid #000;transition:all .5s;margin-bottom:24px}.addtable[_ngcontent-%COMP%]{margin-top:24px;width:100%;background:#000;padding:16px;font-size:110%;color:#fff;font-weight:600;letter-spacing:2px;border:none;transition:all .5s;border-radius:16px;cursor:pointer}.addtable[_ngcontent-%COMP%]:hover{background:#333}.description[_ngcontent-%COMP%]{height:100px}#color[_ngcontent-%COMP%]{padding:0;appearance:none;background:none;border-radius:8px;overflow:hidden;height:48px}"]})}return e})();var dl=rw(eT(),1);var q9=["qrcElement"],jo=(()=>{class e{constructor(t,r){this.renderer=t,this.sanitizer=r,this.allowEmptyString=!1,this.colorDark="#000000ff",this.colorLight="#ffffffff",this.cssClass="qrcode",this.elementType="canvas",this.errorCorrectionLevel="M",this.margin=4,this.qrdata="",this.scale=4,this.width=10,this.qrCodeURL=new Bt,this.context=null}ngOnChanges(){return Zt(this,null,function*(){yield this.createQRCode()})}isValidQrCodeText(t){return this.allowEmptyString===!1?!(typeof t>"u"||t===""||t==="null"||t===null):!(typeof t>"u")}toDataURL(t){return new Promise((r,i)=>{(0,dl.toDataURL)(this.qrdata,t,(o,l)=>{o?i(o):r(l)})})}toCanvas(t,r){return new Promise((i,o)=>{(0,dl.toCanvas)(t,this.qrdata,r,l=>{l?o(l):i("success")})})}toSVG(t){return new Promise((r,i)=>{(0,dl.toString)(this.qrdata,t,(o,l)=>{o?i(o):r(l)})})}renderElement(t){for(let r of this.qrcElement.nativeElement.childNodes)this.renderer.removeChild(this.qrcElement.nativeElement,r);this.renderer.appendChild(this.qrcElement.nativeElement,t)}createQRCode(){return Zt(this,null,function*(){this.version&&this.version>40?(console.warn("[angularx-qrcode] max value for `version` is 40"),this.version=40):this.version&&this.version<1?(console.warn("[angularx-qrcode]`min value for `version` is 1"),this.version=1):this.version!==void 0&&isNaN(this.version)&&(console.warn("[angularx-qrcode] version should be a number, defaulting to auto."),this.version=void 0);try{if(!this.isValidQrCodeText(this.qrdata))throw new Error("[angularx-qrcode] Field `qrdata` is empty, set 'allowEmptyString=\"true\"' to overwrite this behaviour.");this.isValidQrCodeText(this.qrdata)&&this.qrdata===""&&(this.qrdata=" ");let t={color:{dark:this.colorDark,light:this.colorLight},errorCorrectionLevel:this.errorCorrectionLevel,margin:this.margin,scale:this.scale,version:this.version,width:this.width},r=this.imageSrc,i=this.imageHeight||40,o=this.imageWidth||40;switch(this.elementType){case"canvas":{let l=this.renderer.createElement("canvas");this.context=l.getContext("2d"),this.toCanvas(l,t).then(()=>{if(this.ariaLabel&&this.renderer.setAttribute(l,"aria-label",`${this.ariaLabel}`),this.title&&this.renderer.setAttribute(l,"title",`${this.title}`),r&&this.context){this.centerImage=new Image(o,i),r!==this.centerImage.src&&(this.centerImage.crossOrigin="anonymous",this.centerImage.src=r),i!==this.centerImage.height&&(this.centerImage.height=i),o!==this.centerImage.width&&(this.centerImage.width=o);let h=this.centerImage;h&&(h.onload=()=>{this.context?.drawImage(h,l.width/2-o/2,l.height/2-i/2,o,i)})}this.renderElement(l),this.emitQRCodeURL(l)}).catch(h=>{console.error("[angularx-qrcode] canvas error:",h)});break}case"svg":{let l=this.renderer.createElement("div");this.toSVG(t).then(h=>{this.renderer.setProperty(l,"innerHTML",h);let g=l.firstChild;this.renderer.setAttribute(g,"height",`${this.width}`),this.renderer.setAttribute(g,"width",`${this.width}`),this.renderElement(g),this.emitQRCodeURL(g)}).catch(h=>{console.error("[angularx-qrcode] svg error:",h)});break}case"url":case"img":default:{let l=this.renderer.createElement("img");this.toDataURL(t).then(h=>{this.alt&&l.setAttribute("alt",this.alt),this.ariaLabel&&l.setAttribute("aria-label",this.ariaLabel),l.setAttribute("src",h),this.title&&l.setAttribute("title",this.title),this.renderElement(l),this.emitQRCodeURL(l)}).catch(h=>{console.error("[angularx-qrcode] img/url error:",h)})}}}catch(t){console.error("[angularx-qrcode] Error generating QR Code:",t.message)}})}convertBase64ImageUrlToBlob(t){let r=t.split(";base64,"),i=r[0].split(":")[1],o=atob(r[1]),l=new Uint8Array(o.length);for(let h=0;h<o.length;++h)l[h]=o.charCodeAt(h);return new Blob([l],{type:i})}emitQRCodeURL(t){let r=t.constructor.name;if(r===SVGSVGElement.name){let g=t.outerHTML,m=new Blob([g],{type:"image/svg+xml"}),v=URL.createObjectURL(m),b=this.sanitizer.bypassSecurityTrustUrl(v);this.qrCodeURL.emit(b);return}let i="";r===HTMLCanvasElement.name&&(i=t.toDataURL("image/png")),r===HTMLImageElement.name&&(i=t.src);let o=this.convertBase64ImageUrlToBlob(i),l=URL.createObjectURL(o),h=this.sanitizer.bypassSecurityTrustUrl(l);this.qrCodeURL.emit(h)}static{this.\u0275fac=function(r){return new(r||e)(W(Xr),W(a1))}}static{this.\u0275cmp=oe({type:e,selectors:[["qrcode"]],viewQuery:function(r,i){if(r&1&&Rf(q9,7),r&2){let o;ec(o=tc())&&(i.qrcElement=o.first)}},inputs:{allowEmptyString:"allowEmptyString",colorDark:"colorDark",colorLight:"colorLight",cssClass:"cssClass",elementType:"elementType",errorCorrectionLevel:"errorCorrectionLevel",imageSrc:"imageSrc",imageHeight:"imageHeight",imageWidth:"imageWidth",margin:"margin",qrdata:"qrdata",scale:"scale",version:"version",width:"width",alt:"alt",ariaLabel:"ariaLabel",title:"title"},outputs:{qrCodeURL:"qrCodeURL"},features:[ki],decls:2,vars:2,consts:[["qrcElement",""]],template:function(r,i){r&1&&J(0,"div",null,0),r&2&&gE(i.cssClass)},encapsulation:2,changeDetection:0})}}return e})(),Ho=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=Pi({type:e})}static{this.\u0275inj=Ri({})}}return e})();var tT=(()=>{class e{navigationService;tableId=null;table=null;tableGroupName=null;groupColor=null;uniqueLinkToken=null;ownerId=null;restaurantId=null;constructor(t){this.navigationService=t,Ce(Ie.firebaseConfig)}ngOnInit(){this.loadTable(),this.loadUniqueLinkToken()}printQRCodePage(){window.print()}loadUniqueLinkToken(){let t=K();this.ownerId=sessionStorage.getItem("userId"),this.restaurantId=localStorage.getItem("currentRestaurant");let r=Q(t,`Owners/${this.ownerId}/Restaurants/${this.restaurantId}/uniqueLinkToken`);ue(r).then(i=>{i.exists()?this.uniqueLinkToken=i.val():console.log("No unique link token found")}).catch(i=>{console.error("Error loading unique link token:",i)})}deleteTable(){let t=K(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant");if(!this.tableId||!r||!i){console.error("Missing table, owner, or restaurant ID");return}let o=Q(t,`Owners/${r}/Restaurants/${i}/Tables/${this.tableId}`);nr(o).then(()=>{console.log("Table deleted successfully"),this.navigationService.NavigateTo("tablemanage")}).catch(l=>{console.error("Error deleting table:",l)})}blockTable(){let t=K(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant");if(!this.tableId||!r||!i){console.error("Missing table, owner, or restaurant ID");return}let o=Q(t,`Owners/${r}/Restaurants/${i}/Tables/${this.tableId}`);ut(o,{is_blocked:!0}).then(()=>{console.log("Table blocked successfully"),location.reload()}).catch(l=>{console.error("Error blocking table:",l)})}unlockTable(){let t=K(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant");if(!this.tableId||!r||!i){console.error("Missing table, owner, or restaurant ID");return}let o=Q(t,`Owners/${r}/Restaurants/${i}/Tables/${this.tableId}`);ut(o,{is_blocked:!1}).then(()=>{console.log("Table unlocked successfully"),location.reload()}).catch(l=>{console.error("Error unlocking table:",l)})}saveTable(){}loadTable(){if(this.tableId=localStorage.getItem("currentTable"),!this.tableId){console.error("No current table found in local storage");return}let t=K(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant"),o=Q(t,`Owners/${r}/Restaurants/${i}/Tables/${this.tableId}`);ue(o).then(l=>{l.exists()?(this.table=l.val(),this.loadTableGroup()):console.log("No table found")}).catch(l=>{console.error("Error loading table:",l)})}loadTableGroup(){let t=K(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant");if(!this.table?.group_id||this.table.group_id==="0g"){this.tableGroupName="Stoliki bez grupy",this.groupColor="#000000";return}let o=Q(t,`Owners/${r}/Restaurants/${i}/TableGroups/${this.table.group_id}`);ue(o).then(l=>{if(l.exists()){let h=l.val();this.tableGroupName=h.name,this.groupColor=h.color}else console.log("No group found for this table")}).catch(l=>{console.error("Error loading group:",l)})}getQRCodeData(){let t=this.table?.id||"",r=this.uniqueLinkToken||"",i=sessionStorage.getItem("userId"),o=localStorage.getItem("currentRestaurant");return`https://easyorder.mandarin.com.pl/settable?tableid=${t}&uniqueLinkToken=${r}&ownerid=${i}&restaurantid=${o}`}static \u0275fac=function(r){return new(r||e)(W(Se))};static \u0275cmp=oe({type:e,selectors:[["app-showtableqr"]],standalone:!0,features:[se],decls:6,vars:13,consts:[[3,"click"],[1,"qr-container"],[3,"qrdata","allowEmptyString","alt","ariaLabel","cssClass","colorDark","colorLight","elementType","errorCorrectionLevel","margin","scale","title","width"]],template:function(r,i){r&1&&(M(0,"main")(1,"div")(2,"button",0),j("click",function(){return i.printQRCodePage()}),R(3,"Print QR Code"),A()(),M(4,"div",1),J(5,"qrcode",2),A()()),r&2&&(V(5),Ee("qrdata","https://easyorder.mandarin.com.pl/settable?t="+i.tableId+"&u="+i.uniqueLinkToken+"&o="+i.ownerId+"&r="+i.restaurantId)("allowEmptyString",!0)("alt","A custom alt attribute")("ariaLabel","QR Code image with the following content...")("cssClass","center")("colorDark","#000000ff")("colorLight","#ffffffff")("elementType","img")("errorCorrectionLevel","H")("margin",4)("scale",1)("title","A custom title attribute")("width",300))},dependencies:[Ho,jo],styles:[".qr-code-container[_ngcontent-%COMP%]{width:100%;min-height:max-content;display:flex;flex-wrap:wrap;justify-content:center}.qr-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;flex-wrap:nowrap;width:375px;height:565px;background:url(https://cdn1.mandarin.com.pl/qrbg2.png) no-repeat center center;background-size:cover;margin:10px;padding:10px;text-align:center;border:1px dashed black}@media print{button[_ngcontent-%COMP%]{display:none}.qr-code-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-between;margin:0;padding:0}.qr-code-box[_ngcontent-%COMP%]{width:calc(50% - 10px);height:565px;margin:5px;text-align:center;page-break-inside:avoid}.qr-code-container[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:nth-child(2n){page-break-after:always}body[_ngcontent-%COMP%]{background-color:#fff;margin:0}}"]})}return e})();var nT=(()=>{class e{tableChangeAllowed=!1;tableBlockAllowed=!1;restaurantId=null;constructor(){Ce(Ie.firebaseConfig)}ngOnInit(){this.loadSettings()}loadSettings(){let t=sessionStorage.getItem("userId");if(this.restaurantId=localStorage.getItem("currentRestaurant"),!t||!this.restaurantId){console.error("Missing owner or restaurant ID");return}let r=K(),i=Q(r,`Owners/${t}/Restaurants/${this.restaurantId}/settings`);ue(i).then(o=>{if(o.exists()){let l=o.val();this.tableChangeAllowed=l.table_change_allowed,this.tableBlockAllowed=l.table_block_allowed}else console.log("No settings found for this restaurant")}).catch(o=>{console.error("Error loading settings:",o)})}toggleTableChangeAllowed(){this.tableChangeAllowed=!this.tableChangeAllowed,this.saveSettings()}toggleTableBlockAllowed(){this.tableBlockAllowed=!this.tableBlockAllowed,this.saveSettings()}saveSettings(){let t=sessionStorage.getItem("userId");if(!t||!this.restaurantId){console.error("Missing owner or restaurant ID");return}let r=K(),i=Q(r,`Owners/${t}/Restaurants/${this.restaurantId}/settings`);ut(i,{table_change_allowed:this.tableChangeAllowed,table_block_allowed:this.tableBlockAllowed}).then(()=>{console.log("Settings updated successfully")}).catch(o=>{console.error("Error updating settings:",o)})}static \u0275fac=function(r){return new(r||e)};static \u0275cmp=oe({type:e,selectors:[["app-tablesettings"]],standalone:!0,features:[se],decls:15,vars:2,consts:[[1,"displaybox"],[1,"logo"],[1,"buttons"],[3,"click"],[1,"footstatic"]],template:function(r,i){r&1&&(M(0,"main")(1,"div",0)(2,"div",1)(3,"h1"),R(4,"EasyOrder"),A()(),M(5,"div",2)(6,"label"),R(7,"Opcja Zmiany stolika:"),A(),M(8,"button",3),j("click",function(){return i.toggleTableChangeAllowed()}),R(9),A(),M(10,"label"),R(11,"Opcja blokowania stolik\xF3w:"),A(),M(12,"button",3),j("click",function(){return i.toggleTableBlockAllowed()}),R(13),A()(),J(14,"div",4),A()()),r&2&&(V(9),xt(" ",i.tableChangeAllowed?"W\u0142\u0105czona":"Wy\u0142\u0105czona"," "),V(4),xt(" ",i.tableBlockAllowed?"W\u0142\u0105czona":"Wy\u0142\u0105czona"," "))}})}return e})();var Y9=["pin"];function Z9(e,n){if(e&1){let t=Tt();M(0,"tr")(1,"td"),R(2),A(),M(3,"td"),R(4),A(),M(5,"td")(6,"button",5),j("click",function(){let i=it(t).$implicit,o=pe();return ot(o.toggleWaiterActive(i))}),R(7),A(),M(8,"button",5),j("click",function(){let i=it(t).$implicit,o=pe();return ot(o.showWaiterQRCode(i.id))}),R(9,"Poka\u017C kod QR"),A(),M(10,"button",10),j("click",function(){let i=it(t).$implicit,o=pe();return ot(o.removeWaiter(i.id))}),R(11," Usu\u0144 "),A()()()}if(e&2){let t=n.$implicit;V(2),bt(t.name),V(2),bt(t.is_active?"Tak":"Nie"),V(3),xt(" ",t.is_active?"Dezaktywuj":"Aktywuj"," "),V(3),Ee("disabled",t.is_default)}}var rT=(()=>{class e{navigationService;order_number_typed_by_waiter_required=!1;waiter_access_pin=1234;restaurantId=null;waiters=[];pinRef;constructor(t){this.navigationService=t,Ce(Ie.firebaseConfig)}ngOnInit(){this.loadSettings(),this.loadWaiters()}ngAfterViewInit(){this.pinRef||console.error("PIN input element not found")}goToPage(t){this.navigationService.NavigateTo(t)}loadSettings(){let t=sessionStorage.getItem("userId");if(this.restaurantId=localStorage.getItem("currentRestaurant"),!t||!this.restaurantId){console.error("Missing owner or restaurant ID");return}let r=K(),i=Q(r,`Owners/${t}/Restaurants/${this.restaurantId}/settings`);ue(i).then(o=>{if(o.exists()){let l=o.val();this.order_number_typed_by_waiter_required=l.order_number_typed_by_waiter_required,this.waiter_access_pin=l.waiter_access_pin}else console.log("No settings found for this restaurant")}).catch(o=>{console.error("Error loading settings:",o)})}toggleTableChangeAllowed(){this.order_number_typed_by_waiter_required=!this.order_number_typed_by_waiter_required,this.saveSettings()}toggleTableBlockAllowed(){this.pinRef&&this.pinRef.nativeElement?(this.waiter_access_pin=this.pinRef.nativeElement.value,this.saveSettings()):console.error("PIN input element not available")}saveSettings(){let t=sessionStorage.getItem("userId");if(!t||!this.restaurantId){console.error("Missing owner or restaurant ID");return}let r=K(),i=Q(r,`Owners/${t}/Restaurants/${this.restaurantId}/settings`);ut(i,{order_number_typed_by_waiter_required:this.order_number_typed_by_waiter_required,waiter_access_pin:this.waiter_access_pin}).then(()=>{console.log("Settings updated successfully")}).catch(o=>{console.error("Error updating settings:",o)})}loadWaiters(){let t=sessionStorage.getItem("userId");if(this.restaurantId=localStorage.getItem("currentRestaurant"),!t||!this.restaurantId){console.error("Missing owner or restaurant ID");return}let r=K(),i=Q(r,`Owners/${t}/Restaurants/${this.restaurantId}/Waiters`);ue(i).then(o=>{o.exists()?this.waiters=Object.values(o.val()):console.log("No waiters found for this restaurant")}).catch(o=>{console.error("Error loading waiters:",o)})}toggleWaiterActive(t){let r=sessionStorage.getItem("userId"),i=K();if(!r||!this.restaurantId){console.error("Missing owner or restaurant ID");return}let o=Q(i,`Owners/${r}/Restaurants/${this.restaurantId}/Waiters/${t.id}`);t.is_active=!t.is_active,ut(o,{is_active:t.is_active}).then(()=>{console.log("Waiter status updated successfully")}).catch(l=>{console.error("Error updating waiter status:",l)})}showWaiterQRCode(t){localStorage.setItem("waiterId",t),localStorage.setItem("restaurantId",this.restaurantId),this.goToPage("waiterqrcode")}addWaiter(t){let r=sessionStorage.getItem("userId"),i=K();if(!r||!this.restaurantId){console.error("Missing owner or restaurant ID");return}let o=Q(i,`Owners/${r}/Restaurants/${this.restaurantId}/Waiters`),l={id:pu(o).key||"",name:t,is_active:!0,is_default:!1};pu(o,l).then(()=>{console.log("New waiter added successfully"),this.loadWaiters()}).catch(h=>{console.error("Error adding new waiter:",h)})}removeWaiter(t){let r=sessionStorage.getItem("userId"),i=K();if(console.log(t),!r||!this.restaurantId){console.error("Missing owner or restaurant ID");return}let o=Q(i,`Owners/${r}/Restaurants/${this.restaurantId}/waiters/${t}`);nr(o).then(()=>{console.log("Waiter removed successfully"),this.waiters=this.waiters.filter(l=>l.id!==t)}).catch(l=>{console.error("Error removing waiter:",l)})}static \u0275fac=function(r){return new(r||e)(W(Se))};static \u0275cmp=oe({type:e,selectors:[["app-waitersettings"]],viewQuery:function(r,i){if(r&1&&Rf(Y9,5),r&2){let o;ec(o=tc())&&(i.pinRef=o.first)}},standalone:!0,features:[se],decls:40,vars:2,consts:[["pin",""],["waiterName",""],[1,"displaybox"],[1,"logo"],[1,"buttons"],[3,"click"],["type","number",3,"value"],[1,"myrestaaurants",3,"click"],["type","text","placeholder","Imi\u0119 nowego kelnera"],[1,"footstatic"],[3,"click","disabled"]],template:function(r,i){if(r&1){let o=Tt();M(0,"main")(1,"div",2)(2,"div",3)(3,"h1"),R(4,"EasyOrder"),A()(),M(5,"div",4)(6,"label"),R(7,"Opcja Zmiany stolika:"),A(),M(8,"button",5),j("click",function(){return it(o),ot(i.toggleTableChangeAllowed())}),R(9),A(),M(10,"label"),R(11,"Opcja blokowania stolik\xF3w:"),A(),J(12,"input",6,0),M(14,"button",5),j("click",function(){return it(o),ot(i.toggleTableBlockAllowed())}),R(15,"Update PIN"),A(),M(16,"button",7),j("click",function(){return it(o),ot(i.goToPage("waiterqrcode"))}),R(17,"Poka\u017C kod qr dla kelner\xF3w"),A()(),M(18,"h3"),R(19,"Kelnerzy"),A(),M(20,"table")(21,"thead")(22,"tr")(23,"th"),R(24,"Imi\u0119"),A(),M(25,"th"),R(26,"Aktywny"),A(),M(27,"th"),R(28,"Akcje"),A()()(),M(29,"tbody"),Pn(30,Z9,12,4,"tr",null,Rn),A()(),M(32,"div")(33,"h4"),R(34,"Dodaj nowego kelnera"),A(),J(35,"input",8,1),M(37,"button",5),j("click",function(){it(o);let h=bo(36);return ot(i.addWaiter(h.value))}),R(38,"Dodaj Kelnera"),A()(),J(39,"div",9),A()()}r&2&&(V(9),xt(" ",i.order_number_typed_by_waiter_required?"W\u0142\u0105czona":"Wy\u0142\u0105czona"," "),V(3),Ee("value",i.waiter_access_pin),V(18),kn(i.waiters))}})}return e})();function X9(e,n){if(e&1&&(M(0,"div",2),J(1,"qrcode",3),A()),e&2){let t=n.$implicit,r=pe();V(),Ee("qrdata",r.getQRCodeData(t.id))("allowEmptyString",!0)("alt","QR code for table "+t.name)("cssClass","center")("colorDark","#000000ff")("colorLight","#ffffffff")("elementType","img")("errorCorrectionLevel","H")("margin",4)("scale",1)("width",300)}}var iT=(()=>{class e{tables=[];uniqueLinkToken=null;constructor(){Ce(Ie.firebaseConfig)}ngOnInit(){this.loadTables(),this.loadUniqueLinkToken()}loadTables(){let t=sessionStorage.getItem("userId"),r=localStorage.getItem("currentRestaurant");if(!t||!r){console.error("Missing owner or restaurant ID");return}let i=K(),o=Q(i,`Owners/${t}/Restaurants/${r}/Tables`);ue(o).then(l=>{l.exists()?this.tables=Object.values(l.val()):console.log("No tables found")}).catch(l=>{console.error("Error loading tables:",l)})}loadUniqueLinkToken(){let t=K(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant"),o=Q(t,`Owners/${r}/Restaurants/${i}/uniqueLinkToken`);ue(o).then(l=>{l.exists()?this.uniqueLinkToken=l.val():console.log("No unique link token found")}).catch(l=>{console.error("Error loading unique link token:",l)})}getQRCodeData(t){let r=this.uniqueLinkToken||"",i=sessionStorage.getItem("userId"),o=localStorage.getItem("currentRestaurant");return`https://easyorder.mandarin.com.pl/settable?t=${t}&u=${r}&o=${i}&r=${o}`}printQRCodePage(){window.print()}static \u0275fac=function(r){return new(r||e)};static \u0275cmp=oe({type:e,selectors:[["app-alltableqrcodes"]],standalone:!0,features:[se],decls:6,vars:0,consts:[[3,"click"],[1,"qr-code-container"],[1,"qr-container"],[3,"qrdata","allowEmptyString","alt","cssClass","colorDark","colorLight","elementType","errorCorrectionLevel","margin","scale","width"]],template:function(r,i){r&1&&(M(0,"div")(1,"button",0),j("click",function(){return i.printQRCodePage()}),R(2,"Print QR Codes"),A()(),M(3,"div",1),Pn(4,X9,2,11,"div",2,Rn),A()),r&2&&(V(4),kn(i.tables))},dependencies:[Ho,jo],styles:[".qr-code-container[_ngcontent-%COMP%]{width:100%;min-height:max-content;display:flex;flex-wrap:wrap;justify-content:center}.qr-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;flex-wrap:nowrap;width:375px;height:565px;background:url(https://cdn1.mandarin.com.pl/qrbg2.png) no-repeat center center;background-size:cover;margin:10px;padding:10px;text-align:center;border:1px dashed black}@media print{button[_ngcontent-%COMP%]{display:none}.qr-code-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-between;margin:0;padding:0}.qr-code-box[_ngcontent-%COMP%]{width:calc(50% - 10px);height:565px;margin:5px;text-align:center;page-break-inside:avoid}.qr-code-container[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:nth-child(2n){page-break-after:always}body[_ngcontent-%COMP%]{background-color:#fff;margin:0}}"]})}return e})();var oT=(()=>{class e{constructor(){Ce(ap.firebaseConfig)}getOrderList(t){let r=K(),i=Q(r,`Owners/${sessionStorage.getItem("userId")}/Restaurants/${t}/Orders`);return new Ve(o=>(kD(i,l=>{if(l.exists()){let h=l.val();o.next(Object.values(h))}else o.next([])},l=>{o.error(l)}),()=>{}))}static \u0275fac=function(r){return new(r||e)};static \u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function K9(e,n){e&1&&(M(0,"h2"),R(1,"\u0141adowanie statusu zam\xF3wienia..."),A())}function J9(e,n){if(e&1&&(R(0),M(1,"h2"),R(2),A()),e&2){let t=pe().$implicit,r=pe();xt(" ",t.table_id," "),V(2),xt(" ",r.status||"Status nie jest dost\u0119pny","")}}function eU(e,n){if(e&1&&mt(0,J9,3,2,"h2"),e&2){let t=n.$implicit,r=pe();zn(t.table_id==r.tableId?0:-1)}}function tU(e,n){e&1&&(M(0,"h2"),R(1,"Nie znaleziono zam\xF3wienia"),A())}function nU(e,n){if(e&1){let t=Tt();M(0,"button",8),j("click",function(){it(t);let i=pe();return ot(i.changetable())}),R(1,"Zmie\u0144 stolik"),A()}}var sT=(()=>{class e{messageokService;databaseService;navigationService;tableId=null;uniqueLinkToken=null;orderNumber=null;ownerId=null;restaurantid=null;orderList=null;updateSubscription=null;status;constructor(t,r,i){this.messageokService=t,this.databaseService=r,this.navigationService=i,Ce(Ie.firebaseConfig)}ngOnInit(){this.tableId=localStorage.getItem("customercurrentTable"),this.uniqueLinkToken=localStorage.getItem("uniqueLinkToken"),this.orderNumber=localStorage.getItem("orderNumber"),this.restaurantid=localStorage.getItem("restaurantid"),this.ownerId=localStorage.getItem("ownerid"),this.orderNumber?this.processOrder(this.orderNumber):console.error("Order number is missing"),this.startOrderUpdates()}ngOnDestroy(){this.updateSubscription?.unsubscribe()}processOrder(t){if(!this.ownerId||!this.restaurantid||!this.tableId||!this.uniqueLinkToken){console.error("Missing required data");return}let r=K();console.log(this.ownerId,this.restaurantid);let i=Q(r,`Owners/${this.ownerId}/Restaurants/${this.restaurantid}/Orders`);ue(i).then(o=>{if(o.exists()){let l=o.val(),h=Object.keys(l).find(g=>l[g].name===t);h?this.updateOrderWithTable(h):this.createNewOrder(t)}else console.log("No orders found, creating a new order"),this.createNewOrder(t)}).catch(o=>{console.error("Error checking orders:",o)})}updateOrderWithTable(t){let r=K(),i=Q(r,`Owners/${this.ownerId}/Restaurants/${this.restaurantid}/Orders/${t}`);ut(i,{table_id:this.tableId}).then(()=>{console.log("Order updated with table ID successfully")}).catch(o=>{console.error("Error updating order:",o)})}createNewOrder(t){let r=K(),i={name:t,waiter_get_order_at_table:!1,created_at:Date.now(),canceled_at:null,completed_at:null,waiter_id:"0",table_id:this.tableId,waiter_set_order_number:!0,table_id_entered_by_waiter:!0,completed_during_table_clean:!1},o=Q(r,`Owners/${this.ownerId}/Restaurants/${this.restaurantid}/Orders`);ut(o,{[t]:i}).then(()=>{console.log("New order created successfully:",i)}).catch(h=>{console.error("Error creating new order:",h)})}startOrderUpdates(){if(!this.restaurantid){console.error("Restaurant ID is missing");return}this.updateSubscription=yg(0,15e3).subscribe(()=>{this.databaseService.getOrderList(this.restaurantid).subscribe(t=>{this.orderList=t.map(r=>Ue(re({},r),{status:this.getOrderStatus(r)}))})})}changetable(){this.messageokService.askUser("Zeskanuj kod QR stolika",()=>{this.navigationService.NavigateTo("scanqrcode")})}getOrderStatus(t){t.canceled_at?this.status="Anulowano":t.completed_at?this.status="Zrealizowane":t.created_at?this.status="W realizacji":this.status="Nieznany status"}static \u0275fac=function(r){return new(r||e)(W(Do),W(oT),W(Se))};static \u0275cmp=oe({type:e,selectors:[["app-tableordered"]],standalone:!0,features:[se],decls:13,vars:3,consts:[[1,"layoutbox"],[1,"head"],[1,"logo"],["src","https://cdn1.mandarin.com.pl/eologo.png","alt","EasyOrder"],[1,"backbtn"],[1,"buttons"],[1,"addtable"],[1,"footstatic"],[1,"addtable",3,"click"]],template:function(r,i){r&1&&(M(0,"main")(1,"div",0)(2,"div",1)(3,"div",2),J(4,"img",3),A(),J(5,"div",4),A(),M(6,"div",5),mt(7,K9,2,0,"h2"),Pn(8,eU,1,1,null,null,Rn),mt(10,tU,2,0,"h2")(11,nU,2,0,"button",6),A(),J(12,"div",7),A()()),r&2&&(V(7),zn(i.orderList===null?7:-1),V(),kn(i.orderList),V(2),zn(i.orderList&&i.orderList.length===0?10:-1),V(),zn(i.orderList&&i.orderList.length<=1?11:-1))},styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;justify-content:space-between;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{width:100%;height:64px;padding:0 32px;border-bottom:3px solid #000;display:flex;justify-content:space-between;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{margin:8px 0;height:48px}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .backbtn[_ngcontent-%COMP%]{height:48px;font-size:48px;font-weight:700;display:flex;justify-content:center;align-items:center;margin:8px 0}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .backbtn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{height:48px;font-size:48px;font-weight:700}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{width:75%;display:flex;flex-direction:column;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-weight:bolder;font-size:140%;margin-bottom:24px}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;background:#fff;padding:16px;font-size:110%;border-radius:16px;color:#000;font-weight:600;letter-spacing:2px;border:3px solid #000;transition:all .5s;margin-bottom:24px}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#333}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;background:#000;padding:16px;font-size:110%;color:#fff;font-weight:600;letter-spacing:2px;border:none;transition:all .5s;border-radius:16px;cursor:pointer}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#333}"]})}return e})();var ae=function(e){return e[e.QR_CODE=0]="QR_CODE",e[e.AZTEC=1]="AZTEC",e[e.CODABAR=2]="CODABAR",e[e.CODE_39=3]="CODE_39",e[e.CODE_93=4]="CODE_93",e[e.CODE_128=5]="CODE_128",e[e.DATA_MATRIX=6]="DATA_MATRIX",e[e.MAXICODE=7]="MAXICODE",e[e.ITF=8]="ITF",e[e.EAN_13=9]="EAN_13",e[e.EAN_8=10]="EAN_8",e[e.PDF_417=11]="PDF_417",e[e.RSS_14=12]="RSS_14",e[e.RSS_EXPANDED=13]="RSS_EXPANDED",e[e.UPC_A=14]="UPC_A",e[e.UPC_E=15]="UPC_E",e[e.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION",e}(ae||{}),aT=new Map([[ae.QR_CODE,"QR_CODE"],[ae.AZTEC,"AZTEC"],[ae.CODABAR,"CODABAR"],[ae.CODE_39,"CODE_39"],[ae.CODE_93,"CODE_93"],[ae.CODE_128,"CODE_128"],[ae.DATA_MATRIX,"DATA_MATRIX"],[ae.MAXICODE,"MAXICODE"],[ae.ITF,"ITF"],[ae.EAN_13,"EAN_13"],[ae.EAN_8,"EAN_8"],[ae.PDF_417,"PDF_417"],[ae.RSS_14,"RSS_14"],[ae.RSS_EXPANDED,"RSS_EXPANDED"],[ae.UPC_A,"UPC_A"],[ae.UPC_E,"UPC_E"],[ae.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]);function lT(e){return Object.values(ae).includes(e)}var xi=function(e){return e[e.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",e[e.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE",e}(xi||{}),rr=function(){function e(){}return e.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",e.SCAN_DEFAULT_FPS=2,e.DEFAULT_DISABLE_FLIP=!1,e.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,e.DEFAULT_SUPPORTED_SCAN_TYPE=[xi.SCAN_TYPE_CAMERA,xi.SCAN_TYPE_FILE],e}();var wp=function(){function e(n,t){this.format=n,this.formatName=t}return e.prototype.toString=function(){return this.formatName},e.create=function(n){if(!aT.has(n))throw"".concat(n," not in html5QrcodeSupportedFormatsTextMap");return new e(n,aT.get(n))},e}();var _C=function(){function e(){}return e.createFromText=function(n){var t={text:n};return{decodedText:n,result:t}},e.createFromQrcodeResult=function(n){return{decodedText:n.text,result:n}},e}();var cT=function(e){return e[e.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",e[e.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",e[e.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR",e}(cT||{}),vp=function(){function e(){}return e.createFrom=function(n){return{errorMessage:n,type:cT.UNKWOWN_ERROR}},e}();var bp=function(){function e(n){this.verbose=n}return e.prototype.log=function(n){this.verbose&&console.log(n)},e.prototype.warn=function(n){this.verbose&&console.warn(n)},e.prototype.logError=function(n,t){(this.verbose||t===!0)&&console.error(n)},e.prototype.logErrors=function(n){if(n.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(n)},e}();function Nr(e){return typeof e>"u"||e===null}function uT(e,n,t){return e>t?t:e<n?n:e}var zo=function(){function e(){}return e.codeParseError=function(n){return"QR code parse error, error = ".concat(n)},e.errorGettingUserMedia=function(n){return"Error getting userMedia, error = ".concat(n)},e.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},e.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},e.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},e.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},e.scannerPaused=function(){return"Scanner paused"},e}();var tt=function(){function e(){}return e.scanningStatus=function(){return"Scanning"},e.idleStatus=function(){return"Idle"},e.errorStatus=function(){return"Error"},e.permissionStatus=function(){return"Permission"},e.noCameraFoundErrorStatus=function(){return"No Cameras"},e.lastMatch=function(n){return"Last Match: ".concat(n)},e.codeScannerTitle=function(){return"Code Scanner"},e.cameraPermissionTitle=function(){return"Request Camera Permissions"},e.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},e.noCameraFound=function(){return"No camera found"},e.scanButtonStopScanningText=function(){return"Stop Scanning"},e.scanButtonStartScanningText=function(){return"Start Scanning"},e.torchOnButton=function(){return"Switch On Torch"},e.torchOffButton=function(){return"Switch Off Torch"},e.torchOnFailedMessage=function(){return"Failed to turn on torch"},e.torchOffFailedMessage=function(){return"Failed to turn off torch"},e.scanButtonScanningStarting=function(){return"Launching Camera..."},e.textIfCameraScanSelected=function(){return"Scan an Image File"},e.textIfFileScanSelected=function(){return"Scan using camera directly"},e.selectCamera=function(){return"Select Camera"},e.fileSelectionChooseImage=function(){return"Choose Image"},e.fileSelectionChooseAnother=function(){return"Choose Another"},e.fileSelectionNoImageSelected=function(){return"No image choosen"},e.anonymousCameraPrefix=function(){return"Anonymous Camera"},e.dragAndDropMessage=function(){return"Or drop an image to scan"},e.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},e.zoom=function(){return"zoom"},e.loadingImage=function(){return"Loading image..."},e.cameraScanAltText=function(){return"Camera based scan"},e.fileScanAltText=function(){return"Fule based scan"},e}();var CC=function(){function e(){}return e.poweredBy=function(){return"Powered by "},e.reportIssues=function(){return"Report issues"},e}();var wC=function(){function e(){}return e.isMediaStreamConstraintsValid=function(n,t){if(typeof n!="object"){var r=typeof n;return t.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(r,"."),!0),!1}for(var i=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],o=new Set(i),l=Object.keys(n),h=0,g=l;h<g.length;h++){var m=g[h];if(o.has(m))return t.logError("".concat(m," is not supported videoConstaints."),!0),!1}return!0},e}();var wt=rw(fT());var vC=function(){function e(n,t,r){if(this.formatMap=new Map([[ae.QR_CODE,wt.BarcodeFormat.QR_CODE],[ae.AZTEC,wt.BarcodeFormat.AZTEC],[ae.CODABAR,wt.BarcodeFormat.CODABAR],[ae.CODE_39,wt.BarcodeFormat.CODE_39],[ae.CODE_93,wt.BarcodeFormat.CODE_93],[ae.CODE_128,wt.BarcodeFormat.CODE_128],[ae.DATA_MATRIX,wt.BarcodeFormat.DATA_MATRIX],[ae.MAXICODE,wt.BarcodeFormat.MAXICODE],[ae.ITF,wt.BarcodeFormat.ITF],[ae.EAN_13,wt.BarcodeFormat.EAN_13],[ae.EAN_8,wt.BarcodeFormat.EAN_8],[ae.PDF_417,wt.BarcodeFormat.PDF_417],[ae.RSS_14,wt.BarcodeFormat.RSS_14],[ae.RSS_EXPANDED,wt.BarcodeFormat.RSS_EXPANDED],[ae.UPC_A,wt.BarcodeFormat.UPC_A],[ae.UPC_E,wt.BarcodeFormat.UPC_E],[ae.UPC_EAN_EXTENSION,wt.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!wt)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=t,this.logger=r;var i=this.createZXingFormats(n),o=new Map;o.set(wt.DecodeHintType.POSSIBLE_FORMATS,i),o.set(wt.DecodeHintType.TRY_HARDER,!1),this.hints=o}return e.prototype.decodeAsync=function(n){var t=this;return new Promise(function(r,i){try{r(t.decode(n))}catch(o){i(o)}})},e.prototype.decode=function(n){var t=new wt.MultiFormatReader(this.verbose,this.hints),r=new wt.HTMLCanvasElementLuminanceSource(n),i=new wt.BinaryBitmap(new wt.HybridBinarizer(r)),o=t.decode(i);return{text:o.text,format:wp.create(this.toHtml5QrcodeSupportedFormats(o.format)),debugData:this.createDebugData()}},e.prototype.createReverseFormatMap=function(){var n=new Map;return this.formatMap.forEach(function(t,r,i){n.set(t,r)}),n},e.prototype.toHtml5QrcodeSupportedFormats=function(n){if(!this.reverseFormatMap.has(n))throw"reverseFormatMap doesn't have ".concat(n);return this.reverseFormatMap.get(n)},e.prototype.createZXingFormats=function(n){for(var t=[],r=0,i=n;r<i.length;r++){var o=i[r];this.formatMap.has(o)?t.push(this.formatMap.get(o)):this.logger.logError("".concat(o," is not supported by")+"ZXingHtml5QrcodeShim")}return t},e.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},e}();var rU=function(e,n,t,r){function i(o){return o instanceof t?o:new t(function(l){l(o)})}return new(t||(t=Promise))(function(o,l){function h(v){try{m(r.next(v))}catch(b){l(b)}}function g(v){try{m(r.throw(v))}catch(b){l(b)}}function m(v){v.done?o(v.value):i(v.value).then(h,g)}m((r=r.apply(e,n||[])).next())})},iU=function(e,n){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,l;return l={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function h(m){return function(v){return g([m,v])}}function g(m){if(r)throw new TypeError("Generator is already executing.");for(;l&&(l=0,m[0]&&(t=0)),t;)try{if(r=1,i&&(o=m[0]&2?i.return:m[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,m[1])).done)return o;switch(i=0,o&&(m=[m[0]&2,o.value]),m[0]){case 0:case 1:o=m;break;case 4:return t.label++,{value:m[1],done:!1};case 5:t.label++,i=m[1],m=[0];continue;case 7:m=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(m[0]===6||m[0]===2)){t=0;continue}if(m[0]===3&&(!o||m[1]>o[0]&&m[1]<o[3])){t.label=m[1];break}if(m[0]===6&&t.label<o[1]){t.label=o[1],o=m;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(m);break}o[2]&&t.ops.pop(),t.trys.pop();continue}m=n.call(e,t)}catch(v){m=[6,v],i=0}finally{r=o=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},bC=function(){function e(n,t,r){if(this.formatMap=new Map([[ae.QR_CODE,"qr_code"],[ae.AZTEC,"aztec"],[ae.CODABAR,"codabar"],[ae.CODE_39,"code_39"],[ae.CODE_93,"code_93"],[ae.CODE_128,"code_128"],[ae.DATA_MATRIX,"data_matrix"],[ae.ITF,"itf"],[ae.EAN_13,"ean_13"],[ae.EAN_8,"ean_8"],[ae.PDF_417,"pdf417"],[ae.UPC_A,"upc_a"],[ae.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!e.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=t,this.logger=r;var i=this.createBarcodeDetectorFormats(n);if(this.detector=new BarcodeDetector(i),!this.detector)throw"BarcodeDetector detector not supported"}return e.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var n=new BarcodeDetector({formats:["qr_code"]});return typeof n<"u"},e.prototype.decodeAsync=function(n){return rU(this,void 0,void 0,function(){var t,r;return iU(this,function(i){switch(i.label){case 0:return[4,this.detector.detect(n)];case 1:if(t=i.sent(),!t||t.length===0)throw"No barcode or QR code detected.";return r=this.selectLargestBarcode(t),[2,{text:r.rawValue,format:wp.create(this.toHtml5QrcodeSupportedFormats(r.format)),debugData:this.createDebugData()}]}})})},e.prototype.selectLargestBarcode=function(n){for(var t=null,r=0,i=0,o=n;i<o.length;i++){var l=o[i],h=l.boundingBox.width*l.boundingBox.height;h>r&&(r=h,t=l)}if(!t)throw"No largest barcode found";return t},e.prototype.createBarcodeDetectorFormats=function(n){for(var t=[],r=0,i=n;r<i.length;r++){var o=i[r];this.formatMap.has(o)?t.push(this.formatMap.get(o)):this.logger.warn("".concat(o," is not supported by")+"BarcodeDetectorDelegate")}return{formats:t}},e.prototype.toHtml5QrcodeSupportedFormats=function(n){if(!this.reverseFormatMap.has(n))throw"reverseFormatMap doesn't have ".concat(n);return this.reverseFormatMap.get(n)},e.prototype.createReverseFormatMap=function(){var n=new Map;return this.formatMap.forEach(function(t,r,i){n.set(t,r)}),n},e.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},e}();var hT=function(e,n,t,r){function i(o){return o instanceof t?o:new t(function(l){l(o)})}return new(t||(t=Promise))(function(o,l){function h(v){try{m(r.next(v))}catch(b){l(b)}}function g(v){try{m(r.throw(v))}catch(b){l(b)}}function m(v){v.done?o(v.value):i(v.value).then(h,g)}m((r=r.apply(e,n||[])).next())})},pT=function(e,n){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,l;return l={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function h(m){return function(v){return g([m,v])}}function g(m){if(r)throw new TypeError("Generator is already executing.");for(;l&&(l=0,m[0]&&(t=0)),t;)try{if(r=1,i&&(o=m[0]&2?i.return:m[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,m[1])).done)return o;switch(i=0,o&&(m=[m[0]&2,o.value]),m[0]){case 0:case 1:o=m;break;case 4:return t.label++,{value:m[1],done:!1};case 5:t.label++,i=m[1],m=[0];continue;case 7:m=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(m[0]===6||m[0]===2)){t=0;continue}if(m[0]===3&&(!o||m[1]>o[0]&&m[1]<o[3])){t.label=m[1];break}if(m[0]===6&&t.label<o[1]){t.label=o[1],o=m;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(m);break}o[2]&&t.ops.pop(),t.trys.pop();continue}m=n.call(e,t)}catch(v){m=[6,v],i=0}finally{r=o=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},gT=function(){function e(n,t,r,i){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=r,t&&bC.isSupported()?(this.primaryDecoder=new bC(n,r,i),this.secondaryDecoder=new vC(n,r,i)):this.primaryDecoder=new vC(n,r,i)}return e.prototype.decodeAsync=function(n){return hT(this,void 0,void 0,function(){var t;return pT(this,function(r){switch(r.label){case 0:t=performance.now(),r.label=1;case 1:return r.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(n)];case 2:return[2,r.sent()];case 3:return this.possiblyLogPerformance(t),[7];case 4:return[2]}})})},e.prototype.decodeRobustlyAsync=function(n){return hT(this,void 0,void 0,function(){var t,r;return pT(this,function(i){switch(i.label){case 0:t=performance.now(),i.label=1;case 1:return i.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(n)];case 2:return[2,i.sent()];case 3:if(r=i.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(n)];throw r;case 4:return this.possiblyLogPerformance(t),[7];case 5:return[2]}})})},e.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},e.prototype.possiblyLogPerformance=function(n){if(this.verbose){var t=performance.now()-n;this.executionResults.push(t),this.executions++,this.possiblyFlushPerformanceReport()}},e.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var n=0,t=0,r=this.executionResults;t<r.length;t++){var i=r[t];n+=i}var o=n/this.executionResults.length;console.log("".concat(o," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},e}();var xC=function(){var e=function(n,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(n,t);function r(){this.constructor=n}n.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Ep=function(e,n,t,r){function i(o){return o instanceof t?o:new t(function(l){l(o)})}return new(t||(t=Promise))(function(o,l){function h(v){try{m(r.next(v))}catch(b){l(b)}}function g(v){try{m(r.throw(v))}catch(b){l(b)}}function m(v){v.done?o(v.value):i(v.value).then(h,g)}m((r=r.apply(e,n||[])).next())})},Ip=function(e,n){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,l;return l={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function h(m){return function(v){return g([m,v])}}function g(m){if(r)throw new TypeError("Generator is already executing.");for(;l&&(l=0,m[0]&&(t=0)),t;)try{if(r=1,i&&(o=m[0]&2?i.return:m[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,m[1])).done)return o;switch(i=0,o&&(m=[m[0]&2,o.value]),m[0]){case 0:case 1:o=m;break;case 4:return t.label++,{value:m[1],done:!1};case 5:t.label++,i=m[1],m=[0];continue;case 7:m=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(m[0]===6||m[0]===2)){t=0;continue}if(m[0]===3&&(!o||m[1]>o[0]&&m[1]<o[3])){t.label=m[1];break}if(m[0]===6&&t.label<o[1]){t.label=o[1],o=m;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(m);break}o[2]&&t.ops.pop(),t.trys.pop();continue}m=n.call(e,t)}catch(v){m=[6,v],i=0}finally{r=o=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},mT=function(){function e(n,t){this.name=n,this.track=t}return e.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},e.prototype.apply=function(n){var t={};t[this.name]=n;var r={advanced:[t]};return this.track.applyConstraints(r)},e.prototype.value=function(){var n=this.track.getSettings();if(this.name in n){var t=n[this.name];return t}return null},e}(),oU=function(e){xC(n,e);function n(t,r){return e.call(this,t,r)||this}return n.prototype.min=function(){return this.getCapabilities().min},n.prototype.max=function(){return this.getCapabilities().max},n.prototype.step=function(){return this.getCapabilities().step},n.prototype.apply=function(t){var r={};r[this.name]=t;var i={advanced:[r]};return this.track.applyConstraints(i)},n.prototype.getCapabilities=function(){this.failIfNotSupported();var t=this.track.getCapabilities(),r=t[this.name];return{min:r.min,max:r.max,step:r.step}},n.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},n}(mT),sU=function(e){xC(n,e);function n(t){return e.call(this,"zoom",t)||this}return n}(oU),aU=function(e){xC(n,e);function n(t){return e.call(this,"torch",t)||this}return n}(mT),lU=function(){function e(n){this.track=n}return e.prototype.zoomFeature=function(){return new sU(this.track)},e.prototype.torchFeature=function(){return new aU(this.track)},e}(),cU=function(){function e(n,t,r){this.isClosed=!1,this.parentElement=n,this.mediaStream=t,this.callbacks=r,this.surface=this.createVideoElement(this.parentElement.clientWidth),n.append(this.surface)}return e.prototype.createVideoElement=function(n){var t=document.createElement("video");return t.style.width="".concat(n,"px"),t.style.display="block",t.muted=!0,t.setAttribute("muted","true"),t.playsInline=!0,t},e.prototype.setupSurface=function(){var n=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var t=function(){var r=n.surface.clientWidth,i=n.surface.clientHeight;n.callbacks.onRenderSurfaceReady(r,i),n.surface.removeEventListener("playing",t)};this.surface.addEventListener("playing",t),this.surface.srcObject=this.mediaStream,this.surface.play()},e.create=function(n,t,r,i){return Ep(this,void 0,void 0,function(){var o,l;return Ip(this,function(h){switch(h.label){case 0:return o=new e(n,t,i),r.aspectRatio?(l={aspectRatio:r.aspectRatio},[4,o.getFirstTrackOrFail().applyConstraints(l)]):[3,2];case 1:h.sent(),h.label=2;case 2:return o.setupSurface(),[2,o]}})})},e.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},e.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},e.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},e.prototype.resume=function(n){this.failIfClosed();var t=this,r=function(){setTimeout(n,200),t.surface.removeEventListener("playing",r)};this.surface.addEventListener("playing",r),this.surface.play()},e.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},e.prototype.getSurface=function(){return this.failIfClosed(),this.surface},e.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},e.prototype.applyVideoConstraints=function(n){return Ep(this,void 0,void 0,function(){return Ip(this,function(t){if("aspectRatio"in n)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(n)]})})},e.prototype.close=function(){if(this.isClosed)return Promise.resolve();var n=this;return new Promise(function(t,r){var i=n.mediaStream.getVideoTracks(),o=i.length,l=0;n.mediaStream.getVideoTracks().forEach(function(h){n.mediaStream.removeTrack(h),h.stop(),++l,l>=o&&(n.isClosed=!0,n.parentElement.removeChild(n.surface),t())})})},e.prototype.getCapabilities=function(){return new lU(this.getFirstTrackOrFail())},e}(),yT=function(){function e(n){this.mediaStream=n}return e.prototype.render=function(n,t,r){return Ep(this,void 0,void 0,function(){return Ip(this,function(i){return[2,cU.create(n,this.mediaStream,t,r)]})})},e.create=function(n){return Ep(this,void 0,void 0,function(){var t,r;return Ip(this,function(i){switch(i.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return t={audio:!1,video:n},[4,navigator.mediaDevices.getUserMedia(t)];case 1:return r=i.sent(),[2,new e(r)]}})})},e}();var _T=function(e,n,t,r){function i(o){return o instanceof t?o:new t(function(l){l(o)})}return new(t||(t=Promise))(function(o,l){function h(v){try{m(r.next(v))}catch(b){l(b)}}function g(v){try{m(r.throw(v))}catch(b){l(b)}}function m(v){v.done?o(v.value):i(v.value).then(h,g)}m((r=r.apply(e,n||[])).next())})},CT=function(e,n){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,l;return l={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function h(m){return function(v){return g([m,v])}}function g(m){if(r)throw new TypeError("Generator is already executing.");for(;l&&(l=0,m[0]&&(t=0)),t;)try{if(r=1,i&&(o=m[0]&2?i.return:m[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,m[1])).done)return o;switch(i=0,o&&(m=[m[0]&2,o.value]),m[0]){case 0:case 1:o=m;break;case 4:return t.label++,{value:m[1],done:!1};case 5:t.label++,i=m[1],m=[0];continue;case 7:m=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(m[0]===6||m[0]===2)){t=0;continue}if(m[0]===3&&(!o||m[1]>o[0]&&m[1]<o[3])){t.label=m[1];break}if(m[0]===6&&t.label<o[1]){t.label=o[1],o=m;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(m);break}o[2]&&t.ops.pop(),t.trys.pop();continue}m=n.call(e,t)}catch(v){m=[6,v],i=0}finally{r=o=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},wT=function(){function e(){}return e.failIfNotSupported=function(){return _T(this,void 0,void 0,function(){return CT(this,function(n){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new e]})})},e.prototype.create=function(n){return _T(this,void 0,void 0,function(){return CT(this,function(t){return[2,yT.create(n)]})})},e}();var uU=function(e,n,t,r){function i(o){return o instanceof t?o:new t(function(l){l(o)})}return new(t||(t=Promise))(function(o,l){function h(v){try{m(r.next(v))}catch(b){l(b)}}function g(v){try{m(r.throw(v))}catch(b){l(b)}}function m(v){v.done?o(v.value):i(v.value).then(h,g)}m((r=r.apply(e,n||[])).next())})},dU=function(e,n){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,l;return l={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function h(m){return function(v){return g([m,v])}}function g(m){if(r)throw new TypeError("Generator is already executing.");for(;l&&(l=0,m[0]&&(t=0)),t;)try{if(r=1,i&&(o=m[0]&2?i.return:m[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,m[1])).done)return o;switch(i=0,o&&(m=[m[0]&2,o.value]),m[0]){case 0:case 1:o=m;break;case 4:return t.label++,{value:m[1],done:!1};case 5:t.label++,i=m[1],m=[0];continue;case 7:m=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(m[0]===6||m[0]===2)){t=0;continue}if(m[0]===3&&(!o||m[1]>o[0]&&m[1]<o[3])){t.label=m[1];break}if(m[0]===6&&t.label<o[1]){t.label=o[1],o=m;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(m);break}o[2]&&t.ops.pop(),t.trys.pop();continue}m=n.call(e,t)}catch(v){m=[6,v],i=0}finally{r=o=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},vT=function(){function e(){}return e.retrieve=function(){if(navigator.mediaDevices)return e.getCamerasFromMediaDevices();var n=MediaStreamTrack;return MediaStreamTrack&&n.getSources?e.getCamerasFromMediaStreamTrack():e.rejectWithError()},e.rejectWithError=function(){var n=zo.unableToQuerySupportedDevices();return e.isHttpsOrLocalhost()||(n=zo.insecureContextCameraQueryError()),Promise.reject(n)},e.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var n=location.host.split(":")[0];return n==="127.0.0.1"||n==="localhost"},e.getCamerasFromMediaDevices=function(){return uU(this,void 0,void 0,function(){var n,t,r,i,o,l,h;return dU(this,function(g){switch(g.label){case 0:return n=function(m){for(var v=m.getVideoTracks(),b=0,I=v;b<I.length;b++){var T=I[b];T.enabled=!1,T.stop(),m.removeTrack(T)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return t=g.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(r=g.sent(),i=[],o=0,l=r;o<l.length;o++)h=l[o],h.kind==="videoinput"&&i.push({id:h.deviceId,label:h.label});return n(t),[2,i]}})})},e.getCamerasFromMediaStreamTrack=function(){return new Promise(function(n,t){var r=function(o){for(var l=[],h=0,g=o;h<g.length;h++){var m=g[h];m.kind==="video"&&l.push({id:m.id,label:m.label})}n(l)},i=MediaStreamTrack;i.getSources(r)})},e}();var Ut=function(e){return e[e.UNKNOWN=0]="UNKNOWN",e[e.NOT_STARTED=1]="NOT_STARTED",e[e.SCANNING=2]="SCANNING",e[e.PAUSED=3]="PAUSED",e}(Ut||{}),fU=function(){function e(){this.state=Ut.NOT_STARTED,this.onGoingTransactionNewState=Ut.UNKNOWN}return e.prototype.directTransition=function(n){this.failIfTransitionOngoing(),this.validateTransition(n),this.state=n},e.prototype.startTransition=function(n){return this.failIfTransitionOngoing(),this.validateTransition(n),this.onGoingTransactionNewState=n,this},e.prototype.execute=function(){if(this.onGoingTransactionNewState===Ut.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var n=this.onGoingTransactionNewState;this.onGoingTransactionNewState=Ut.UNKNOWN,this.directTransition(n)},e.prototype.cancel=function(){if(this.onGoingTransactionNewState===Ut.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=Ut.UNKNOWN},e.prototype.getState=function(){return this.state},e.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==Ut.UNKNOWN)throw"Cannot transition to a new state, already under transition"},e.prototype.validateTransition=function(n){switch(this.state){case Ut.UNKNOWN:throw"Transition from unknown is not allowed";case Ut.NOT_STARTED:this.failIfNewStateIs(n,[Ut.PAUSED]);break;case Ut.SCANNING:break;case Ut.PAUSED:break}},e.prototype.failIfNewStateIs=function(n,t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(n===o)throw"Cannot transition from ".concat(this.state," to ").concat(n)}},e}(),hU=function(){function e(n){this.stateManager=n}return e.prototype.startTransition=function(n){return this.stateManager.startTransition(n)},e.prototype.directTransition=function(n){this.stateManager.directTransition(n)},e.prototype.getState=function(){return this.stateManager.getState()},e.prototype.canScanFile=function(){return this.stateManager.getState()===Ut.NOT_STARTED},e.prototype.isScanning=function(){return this.stateManager.getState()!==Ut.NOT_STARTED},e.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===Ut.SCANNING},e.prototype.isPaused=function(){return this.stateManager.getState()===Ut.PAUSED},e}();var bT=function(){function e(){}return e.create=function(){return new hU(new fU)},e}();var pU=function(){var e=function(n,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(n,t);function r(){this.constructor=n}n.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),yr=function(e){pU(n,e);function n(){return e!==null&&e.apply(this,arguments)||this}return n.DEFAULT_WIDTH=300,n.DEFAULT_WIDTH_OFFSET=2,n.FILE_SCAN_MIN_HEIGHT=300,n.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,n.MIN_QR_BOX_SIZE=50,n.SHADED_LEFT=1,n.SHADED_RIGHT=2,n.SHADED_TOP=3,n.SHADED_BOTTOM=4,n.SHADED_REGION_ELEMENT_ID="qr-shaded-region",n.VERBOSE=!1,n.BORDER_SHADER_DEFAULT_COLOR="#ffffff",n.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",n}(rr),gU=function(){function e(n,t){this.logger=t,this.fps=yr.SCAN_DEFAULT_FPS,n?(n.fps&&(this.fps=n.fps),this.disableFlip=n.disableFlip===!0,this.qrbox=n.qrbox,this.aspectRatio=n.aspectRatio,this.videoConstraints=n.videoConstraints):this.disableFlip=yr.DEFAULT_DISABLE_FLIP}return e.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?wC.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},e.prototype.isShadedBoxEnabled=function(){return!Nr(this.qrbox)},e.create=function(n,t){return new e(n,t)},e}(),Sp=function(){function e(n,t){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(n))throw"HTML Element with id=".concat(n," not found");this.elementId=n,this.verbose=!1;var r,i;typeof t=="boolean"?this.verbose=t===!0:t&&(i=t,this.verbose=i.verbose===!0,r=i.experimentalFeatures),this.logger=new bp(this.verbose),this.qrcode=new gT(this.getSupportedFormats(t),this.getUseBarCodeDetectorIfSupported(i),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=bT.create()}return e.prototype.start=function(n,t,r,i){var o=this;if(!n)throw"cameraIdOrConfig is required";if(!r||typeof r!="function")throw"qrCodeSuccessCallback is required and should be a function.";var l;i?l=i:l=this.verbose?this.logger.log:function(){};var h=gU.create(t,this.logger);this.clearElement();var g=!1;h.videoConstraints&&(h.isMediaStreamConstraintsValid()?g=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var m=g,v=document.getElementById(this.elementId),b=v.clientWidth?v.clientWidth:yr.DEFAULT_WIDTH;v.style.position="relative",this.shouldScan=!0,this.element=v;var I=this,T=this.stateManagerProxy.startTransition(Ut.SCANNING);return new Promise(function(P,z){var Z=m?h.videoConstraints:I.createVideoConstraints(n);if(!Z){T.cancel(),z("videoConstraints should be defined");return}var q={};(!m||h.aspectRatio)&&(q.aspectRatio=h.aspectRatio);var ce={onRenderSurfaceReady:function(Ke,ye){I.setupUi(Ke,ye,h),I.isScanning=!0,I.foreverScan(h,r,l)}};wT.failIfNotSupported().then(function(Ke){Ke.create(Z).then(function(ye){return ye.render(o.element,q,ce).then(function(G){I.renderedCamera=G,T.execute(),P(null)}).catch(function(G){T.cancel(),z(G)})}).catch(function(ye){T.cancel(),z(zo.errorGettingUserMedia(ye))})}).catch(function(Ke){T.cancel(),z(zo.cameraStreamingNotSupported())})})},e.prototype.pause=function(n){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(Ut.PAUSED),this.showPausedState(),(Nr(n)||n!==!0)&&(n=!1),n&&this.renderedCamera&&this.renderedCamera.pause()},e.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var n=this,t=function(){n.stateManagerProxy.directTransition(Ut.SCANNING),n.hidePausedState()};if(!this.renderedCamera.isPaused()){t();return}this.renderedCamera.resume(function(){t()})},e.prototype.getState=function(){return this.stateManagerProxy.getState()},e.prototype.stop=function(){var n=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var t=this.stateManagerProxy.startTransition(Ut.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var r=function(){if(n.element){var o=document.getElementById(yr.SHADED_REGION_ELEMENT_ID);o&&n.element.removeChild(o)}},i=this;return this.renderedCamera.close().then(function(){return i.renderedCamera=null,i.element&&(i.element.removeChild(i.canvasElement),i.canvasElement=null),r(),i.qrRegion&&(i.qrRegion=null),i.context&&(i.context=null),t.execute(),i.hidePausedState(),i.isScanning=!1,Promise.resolve()})},e.prototype.scanFile=function(n,t){return this.scanFileV2(n,t).then(function(r){return r.decodedText})},e.prototype.scanFileV2=function(n,t){var r=this;if(!n||!(n instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(Nr(t)&&(t=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(i,o){r.possiblyCloseLastScanImageFile(),r.clearElement(),r.lastScanImageFile=URL.createObjectURL(n);var l=new Image;l.onload=function(){var h=l.width,g=l.height,m=document.getElementById(r.elementId),v=m.clientWidth?m.clientWidth:yr.DEFAULT_WIDTH,b=Math.max(m.clientHeight?m.clientHeight:g,yr.FILE_SCAN_MIN_HEIGHT),I=r.computeCanvasDrawConfig(h,g,v,b);if(t){var T=r.createCanvasElement(v,b,"qr-canvas-visible");T.style.display="inline-block",m.appendChild(T);var P=T.getContext("2d");if(!P)throw"Unable to get 2d context from canvas";P.canvas.width=v,P.canvas.height=b,P.drawImage(l,0,0,h,g,I.x,I.y,I.width,I.height)}var z=yr.FILE_SCAN_HIDDEN_CANVAS_PADDING,Z=Math.max(l.width,I.width),q=Math.max(l.height,I.height),ce=Z+2*z,Ke=q+2*z,ye=r.createCanvasElement(ce,Ke);m.appendChild(ye);var G=ye.getContext("2d");if(!G)throw"Unable to get 2d context from canvas";G.canvas.width=ce,G.canvas.height=Ke,G.drawImage(l,0,0,h,g,z,z,Z,q);try{r.qrcode.decodeRobustlyAsync(ye).then(function(ge){i(_C.createFromQrcodeResult(ge))}).catch(o)}catch(ge){o("QR code parse error, error = ".concat(ge))}},l.onerror=o,l.onabort=o,l.onstalled=o,l.onsuspend=o,l.src=URL.createObjectURL(n)})},e.prototype.clear=function(){this.clearElement()},e.getCameras=function(){return vT.retrieve()},e.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},e.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},e.prototype.applyVideoConstraints=function(n){if(n){if(!wC.isMediaStreamConstraintsValid(n,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(n)},e.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},e.prototype.getSupportedFormats=function(n){var t=[ae.QR_CODE,ae.AZTEC,ae.CODABAR,ae.CODE_39,ae.CODE_93,ae.CODE_128,ae.DATA_MATRIX,ae.MAXICODE,ae.ITF,ae.EAN_13,ae.EAN_8,ae.PDF_417,ae.RSS_14,ae.RSS_EXPANDED,ae.UPC_A,ae.UPC_E,ae.UPC_EAN_EXTENSION];if(!n||typeof n=="boolean"||!n.formatsToSupport)return t;if(!Array.isArray(n.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(n.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var r=[],i=0,o=n.formatsToSupport;i<o.length;i++){var l=o[i];lT(l)?r.push(l):this.logger.warn("Invalid format: ".concat(l," passed in config, ignoring."))}if(r.length===0)throw"None of formatsToSupport match supported values.";return r},e.prototype.getUseBarCodeDetectorIfSupported=function(n){if(Nr(n))return!0;if(!Nr(n.useBarCodeDetectorIfSupported))return n.useBarCodeDetectorIfSupported!==!1;if(Nr(n.experimentalFeatures))return!0;var t=n.experimentalFeatures;return Nr(t.useBarCodeDetectorIfSupported)?!0:t.useBarCodeDetectorIfSupported!==!1},e.prototype.validateQrboxSize=function(n,t,r){var i=this,o=r.qrbox;this.validateQrboxConfig(o);var l=this.toQrdimensions(n,t,o),h=function(m){if(m<yr.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(yr.MIN_QR_BOX_SIZE,"px.")},g=function(m){return m>n&&(i.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),m=n),m};h(l.width),h(l.height),l.width=g(l.width)},e.prototype.validateQrboxConfig=function(n){if(typeof n!="number"&&typeof n!="function"&&(n.width===void 0||n.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},e.prototype.toQrdimensions=function(n,t,r){if(typeof r=="number")return{width:r,height:r};if(typeof r=="function")try{return r(n,t)}catch(i){throw new Error("qrbox config was passed as a function but it failed with unknown error"+i)}return r},e.prototype.setupUi=function(n,t,r){r.isShadedBoxEnabled()&&this.validateQrboxSize(n,t,r);var i=Nr(r.qrbox)?{width:n,height:t}:r.qrbox;this.validateQrboxConfig(i);var o=this.toQrdimensions(n,t,i);o.height>t&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var l=r.isShadedBoxEnabled()&&o.height<=t,h={x:0,y:0,width:n,height:t},g=l?this.getShadedRegionBounds(n,t,o):h,m=this.createCanvasElement(g.width,g.height),v={willReadFrequently:!0},b=m.getContext("2d",v);b.canvas.width=g.width,b.canvas.height=g.height,this.element.append(m),l&&this.possiblyInsertShadingElement(this.element,n,t,o),this.createScannerPausedUiElement(this.element),this.qrRegion=g,this.context=b,this.canvasElement=m},e.prototype.createScannerPausedUiElement=function(n){var t=document.createElement("div");t.innerText=zo.scannerPaused(),t.style.display="none",t.style.position="absolute",t.style.top="0px",t.style.zIndex="1",t.style.background="rgba(9, 9, 9, 0.46)",t.style.color="#FFECEC",t.style.textAlign="center",t.style.width="100%",n.appendChild(t),this.scannerPausedUiElement=t},e.prototype.scanContext=function(n,t){var r=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(i){return n(i.text,_C.createFromQrcodeResult(i)),r.possiblyUpdateShaders(!0),!0}).catch(function(i){r.possiblyUpdateShaders(!1);var o=zo.codeParseError(i);return t(o,vp.createFrom(o)),!1})},e.prototype.foreverScan=function(n,t,r){var i=this;if(this.shouldScan&&this.renderedCamera){var o=this.renderedCamera.getSurface(),l=o.videoWidth/o.clientWidth,h=o.videoHeight/o.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var g=this.qrRegion.width*l,m=this.qrRegion.height*h,v=this.qrRegion.x*l,b=this.qrRegion.y*h;this.context.drawImage(o,v,b,g,m,0,0,this.qrRegion.width,this.qrRegion.height);var I=function(){i.foreverScanTimeout=setTimeout(function(){i.foreverScan(n,t,r)},i.getTimeoutFps(n.fps))};this.scanContext(t,r).then(function(T){!T&&n.disableFlip!==!0?(i.context.translate(i.context.canvas.width,0),i.context.scale(-1,1),i.scanContext(t,r).finally(function(){I()})):I()}).catch(function(T){i.logger.logError("Error happend while scanning context",T),I()})}},e.prototype.createVideoConstraints=function(n){if(typeof n=="string")return{deviceId:{exact:n}};if(typeof n=="object"){var t="facingMode",r="deviceId",i={user:!0,environment:!0},o="exact",l=function(P){if(P in i)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(P,"'")},h=Object.keys(n);if(h.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(h.length," keys");var g=Object.keys(n)[0];if(g!==t&&g!==r)throw"Only '".concat(t,"' and '").concat(r,"' ")+" are supported for 'cameraIdOrConfig'";if(g===t){var m=n.facingMode;if(typeof m=="string"){if(l(m))return{facingMode:m}}else if(typeof m=="object")if(o in m){if(l(m["".concat(o)]))return{facingMode:{exact:m["".concat(o)]}}}else throw"'facingMode' should be string or object with"+" ".concat(o," as key.");else{var v=typeof m;throw"Invalid type of 'facingMode' = ".concat(v)}}else{var b=n.deviceId;if(typeof b=="string")return{deviceId:b};if(typeof b=="object"){if(o in b)return{deviceId:{exact:b["".concat(o)]}};throw"'deviceId' should be string or object with"+" ".concat(o," as key.")}else{var I=typeof b;throw"Invalid type of 'deviceId' = ".concat(I)}}}var T=typeof n;throw"Invalid type of 'cameraIdOrConfig' = ".concat(T)},e.prototype.computeCanvasDrawConfig=function(n,t,r,i){if(n<=r&&t<=i){var o=(r-n)/2,l=(i-t)/2;return{x:o,y:l,width:n,height:t}}else{var h=n,g=t;return n>r&&(t=r/n*t,n=r),t>i&&(n=i/t*n,t=i),this.logger.log("Image downsampled from "+"".concat(h,"X").concat(g)+" to ".concat(n,"X").concat(t,".")),this.computeCanvasDrawConfig(n,t,r,i)}},e.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var n=document.getElementById(this.elementId);n&&(n.innerHTML="")},e.prototype.possiblyUpdateShaders=function(n){this.qrMatch!==n&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(t){t.style.backgroundColor=n?yr.BORDER_SHADER_MATCH_COLOR:yr.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=n)},e.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},e.prototype.createCanvasElement=function(n,t,r){var i=n,o=t,l=document.createElement("canvas");return l.style.width="".concat(i,"px"),l.style.height="".concat(o,"px"),l.style.display="none",l.id=Nr(r)?"qr-canvas":r,l},e.prototype.getShadedRegionBounds=function(n,t,r){if(r.width>n||r.height>t)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(n-r.width)/2,y:(t-r.height)/2,width:r.width,height:r.height}},e.prototype.possiblyInsertShadingElement=function(n,t,r,i){if(!(t-i.width<1||r-i.height<1)){var o=document.createElement("div");o.style.position="absolute";var l=(t-i.width)/2,h=(r-i.height)/2;if(o.style.borderLeft="".concat(l,"px solid rgba(0, 0, 0, 0.48)"),o.style.borderRight="".concat(l,"px solid rgba(0, 0, 0, 0.48)"),o.style.borderTop="".concat(h,"px solid rgba(0, 0, 0, 0.48)"),o.style.borderBottom="".concat(h,"px solid rgba(0, 0, 0, 0.48)"),o.style.boxSizing="border-box",o.style.top="0px",o.style.bottom="0px",o.style.left="0px",o.style.right="0px",o.id="".concat(yr.SHADED_REGION_ELEMENT_ID),t-i.width<11||r-i.height<11)this.hasBorderShaders=!1;else{var g=5,m=40;this.insertShaderBorders(o,m,g,-g,null,0,!0),this.insertShaderBorders(o,m,g,-g,null,0,!1),this.insertShaderBorders(o,m,g,null,-g,0,!0),this.insertShaderBorders(o,m,g,null,-g,0,!1),this.insertShaderBorders(o,g,m+g,-g,null,-g,!0),this.insertShaderBorders(o,g,m+g,null,-g,-g,!0),this.insertShaderBorders(o,g,m+g,-g,null,-g,!1),this.insertShaderBorders(o,g,m+g,null,-g,-g,!1),this.hasBorderShaders=!0}n.append(o)}},e.prototype.insertShaderBorders=function(n,t,r,i,o,l,h){var g=document.createElement("div");g.style.position="absolute",g.style.backgroundColor=yr.BORDER_SHADER_DEFAULT_COLOR,g.style.width="".concat(t,"px"),g.style.height="".concat(r,"px"),i!==null&&(g.style.top="".concat(i,"px")),o!==null&&(g.style.bottom="".concat(o,"px")),h?g.style.left="".concat(l,"px"):g.style.right="".concat(l,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(g),n.appendChild(g)},e.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},e.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},e.prototype.getTimeoutFps=function(n){return 1e3/n},e}();var EC="data:image/svg+xml;base64,",xT=EC+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",ET=EC+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",IC=EC+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",IT="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=";var ST=function(){function e(){}return e.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},e}(),DT=function(){function e(){this.data=ST.createDefault();var n=localStorage.getItem(e.LOCAL_STORAGE_KEY);n?this.data=JSON.parse(n):this.reset()}return e.prototype.hasCameraPermissions=function(){return this.data.hasPermission},e.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},e.prototype.setHasPermission=function(n){this.data.hasPermission=n,this.flush()},e.prototype.setLastUsedCameraId=function(n){this.data.lastUsedCameraId=n,this.flush()},e.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},e.prototype.reset=function(){this.data=ST.createDefault(),this.flush()},e.prototype.flush=function(){localStorage.setItem(e.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},e.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",e}();var mU=function(){function e(){this.infoDiv=document.createElement("div")}return e.prototype.renderInto=function(n){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=CC.poweredBy();var t=document.createElement("a");t.innerText="ScanApp",t.href="https://scanapp.org",t.target="new",t.style.color="white",this.infoDiv.appendChild(t);var r=document.createElement("br"),i=document.createElement("br");this.infoDiv.appendChild(r),this.infoDiv.appendChild(i);var o=document.createElement("a");o.innerText=CC.reportIssues(),o.href="https://github.com/mebjas/html5-qrcode/issues",o.target="new",o.style.color="white",this.infoDiv.appendChild(o),n.appendChild(this.infoDiv)},e.prototype.show=function(){this.infoDiv.style.display="block"},e.prototype.hide=function(){this.infoDiv.style.display="none"},e}(),yU=function(){function e(n,t){this.isShowingInfoIcon=!0,this.onTapIn=n,this.onTapOut=t,this.infoIcon=document.createElement("img")}return e.prototype.renderInto=function(n){var t=this;this.infoIcon.alt="Info icon",this.infoIcon.src=IC,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(r){return t.onHoverIn()},this.infoIcon.onmouseout=function(r){return t.onHoverOut()},this.infoIcon.onclick=function(r){return t.onClick()},n.appendChild(this.infoIcon)},e.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},e.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},e.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src=IT,this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=IC,this.infoIcon.style.opacity="0.6")},e}(),MT=function(){function e(){var n=this;this.infoDiv=new mU,this.infoIcon=new yU(function(){n.infoDiv.show()},function(){n.infoDiv.hide()})}return e.prototype.renderInto=function(n){this.infoDiv.renderInto(n),this.infoIcon.renderInto(n)},e}();var _U=function(e,n,t,r){function i(o){return o instanceof t?o:new t(function(l){l(o)})}return new(t||(t=Promise))(function(o,l){function h(v){try{m(r.next(v))}catch(b){l(b)}}function g(v){try{m(r.throw(v))}catch(b){l(b)}}function m(v){v.done?o(v.value):i(v.value).then(h,g)}m((r=r.apply(e,n||[])).next())})},CU=function(e,n){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,l;return l={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function h(m){return function(v){return g([m,v])}}function g(m){if(r)throw new TypeError("Generator is already executing.");for(;l&&(l=0,m[0]&&(t=0)),t;)try{if(r=1,i&&(o=m[0]&2?i.return:m[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,m[1])).done)return o;switch(i=0,o&&(m=[m[0]&2,o.value]),m[0]){case 0:case 1:o=m;break;case 4:return t.label++,{value:m[1],done:!1};case 5:t.label++,i=m[1],m=[0];continue;case 7:m=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(m[0]===6||m[0]===2)){t=0;continue}if(m[0]===3&&(!o||m[1]>o[0]&&m[1]<o[3])){t.label=m[1];break}if(m[0]===6&&t.label<o[1]){t.label=o[1],o=m;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(m);break}o[2]&&t.ops.pop(),t.trys.pop();continue}m=n.call(e,t)}catch(v){m=[6,v],i=0}finally{r=o=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},SC=function(){function e(){}return e.hasPermissions=function(){return _U(this,void 0,void 0,function(){var n,t,r,i;return CU(this,function(o){switch(o.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(n=o.sent(),t=0,r=n;t<r.length;t++)if(i=r[t],i.kind==="videoinput"&&i.label)return[2,!0];return[2,!1]}})})},e}();var Ki=function(){function e(n){this.supportedScanTypes=this.validateAndReturnScanTypes(n)}return e.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},e.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},e.prototype.isCameraScanRequired=function(){for(var n=0,t=this.supportedScanTypes;n<t.length;n++){var r=t[n];if(e.isCameraScanType(r))return!0}return!1},e.isCameraScanType=function(n){return n===xi.SCAN_TYPE_CAMERA},e.isFileScanType=function(n){return n===xi.SCAN_TYPE_FILE},e.prototype.validateAndReturnScanTypes=function(n){if(!n||n.length===0)return rr.DEFAULT_SUPPORTED_SCAN_TYPE;var t=rr.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(n.length>t)throw"Max ".concat(t," values expected for ")+"supportedScanTypes";for(var r=0,i=n;r<i.length;r++){var o=i[r];if(!rr.DEFAULT_SUPPORTED_SCAN_TYPE.includes(o))throw"Unsupported scan type ".concat(o)}return n},e}();var mn=function(){function e(){}return e.ALL_ELEMENT_CLASS="html5-qrcode-element",e.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",e.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",e.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",e.TORCH_BUTTON_ID="html5-qrcode-button-torch",e.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",e.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",e.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",e.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",e.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",e.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",e}();var ir=function(){function e(){}return e.createElement=function(n,t){var r=document.createElement(n);return r.id=t,r.classList.add(mn.ALL_ELEMENT_CLASS),n==="button"&&r.setAttribute("type","button"),r},e}();var AT=function(e,n,t,r){function i(o){return o instanceof t?o:new t(function(l){l(o)})}return new(t||(t=Promise))(function(o,l){function h(v){try{m(r.next(v))}catch(b){l(b)}}function g(v){try{m(r.throw(v))}catch(b){l(b)}}function m(v){v.done?o(v.value):i(v.value).then(h,g)}m((r=r.apply(e,n||[])).next())})},OT=function(e,n){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,l;return l={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function h(m){return function(v){return g([m,v])}}function g(m){if(r)throw new TypeError("Generator is already executing.");for(;l&&(l=0,m[0]&&(t=0)),t;)try{if(r=1,i&&(o=m[0]&2?i.return:m[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,m[1])).done)return o;switch(i=0,o&&(m=[m[0]&2,o.value]),m[0]){case 0:case 1:o=m;break;case 4:return t.label++,{value:m[1],done:!1};case 5:t.label++,i=m[1],m=[0];continue;case 7:m=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(m[0]===6||m[0]===2)){t=0;continue}if(m[0]===3&&(!o||m[1]>o[0]&&m[1]<o[3])){t.label=m[1];break}if(m[0]===6&&t.label<o[1]){t.label=o[1],o=m;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(m);break}o[2]&&t.ops.pop(),t.trys.pop();continue}m=n.call(e,t)}catch(v){m=[6,v],i=0}finally{r=o=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},TT=function(){function e(n,t,r){this.isTorchOn=!1,this.torchCapability=n,this.buttonController=t,this.onTorchActionFailureCallback=r}return e.prototype.isTorchEnabled=function(){return this.isTorchOn},e.prototype.flipState=function(){return AT(this,void 0,void 0,function(){var n,t;return OT(this,function(r){switch(r.label){case 0:this.buttonController.disable(),n=!this.isTorchOn,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.torchCapability.apply(n)];case 2:return r.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),n),[3,4];case 3:return t=r.sent(),this.propagateFailure(n,t),this.buttonController.enable(),[3,4];case 4:return[2]}})})},e.prototype.updateUiBasedOnLatestSettings=function(n,t){n===t?(this.buttonController.setText(t?tt.torchOffButton():tt.torchOnButton()),this.isTorchOn=t):this.propagateFailure(t),this.buttonController.enable()},e.prototype.propagateFailure=function(n,t){var r=n?tt.torchOnFailedMessage():tt.torchOffFailedMessage();t&&(r+="; Error = "+t),this.onTorchActionFailureCallback(r)},e.prototype.reset=function(){this.isTorchOn=!1},e}(),NT=function(){function e(n,t){this.onTorchActionFailureCallback=t,this.torchButton=ir.createElement("button",mn.TORCH_BUTTON_ID),this.torchController=new TT(n,this,t)}return e.prototype.render=function(n,t){var r=this;this.torchButton.innerText=tt.torchOnButton(),this.torchButton.style.display=t.display,this.torchButton.style.marginLeft=t.marginLeft;var i=this;this.torchButton.addEventListener("click",function(o){return AT(r,void 0,void 0,function(){return OT(this,function(l){switch(l.label){case 0:return[4,i.torchController.flipState()];case 1:return l.sent(),i.torchController.isTorchEnabled()?(i.torchButton.classList.remove(mn.TORCH_BUTTON_CLASS_TORCH_OFF),i.torchButton.classList.add(mn.TORCH_BUTTON_CLASS_TORCH_ON)):(i.torchButton.classList.remove(mn.TORCH_BUTTON_CLASS_TORCH_ON),i.torchButton.classList.add(mn.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}})})}),n.appendChild(this.torchButton)},e.prototype.updateTorchCapability=function(n){this.torchController=new TT(n,this,this.onTorchActionFailureCallback)},e.prototype.getTorchButton=function(){return this.torchButton},e.prototype.hide=function(){this.torchButton.style.display="none"},e.prototype.show=function(){this.torchButton.style.display="inline-block"},e.prototype.disable=function(){this.torchButton.disabled=!0},e.prototype.enable=function(){this.torchButton.disabled=!1},e.prototype.setText=function(n){this.torchButton.innerText=n},e.prototype.reset=function(){this.torchButton.innerText=tt.torchOnButton(),this.torchController.reset()},e.create=function(n,t,r,i){var o=new e(t,i);return o.render(n,r),o},e}();var RT=function(){function e(n,t,r){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=t?"block":"none",n.appendChild(this.fileBasedScanRegion);var i=document.createElement("label");i.setAttribute("for",this.getFileScanInputId()),i.style.display="inline-block",this.fileBasedScanRegion.appendChild(i),this.fileSelectionButton=ir.createElement("button",mn.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",function(h){i.click()}),i.append(this.fileSelectionButton),this.fileScanInput=ir.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",i.appendChild(this.fileScanInput);var o=this;this.fileScanInput.addEventListener("change",function(h){if(!(h==null||h.target==null)){var g=h.target;if(!(g.files&&g.files.length===0)){var m=g.files,v=m[0],b=v.name;o.setImageNameToButton(b),r(v)}}});var l=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(l),this.fileBasedScanRegion.addEventListener("dragenter",function(h){o.fileBasedScanRegion.style.border=o.fileBasedScanRegionActiveBorder(),h.stopPropagation(),h.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragleave",function(h){o.fileBasedScanRegion.style.border=o.fileBasedScanRegionDefaultBorder(),h.stopPropagation(),h.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragover",function(h){o.fileBasedScanRegion.style.border=o.fileBasedScanRegionActiveBorder(),h.stopPropagation(),h.preventDefault()}),this.fileBasedScanRegion.addEventListener("drop",function(h){h.stopPropagation(),h.preventDefault(),o.fileBasedScanRegion.style.border=o.fileBasedScanRegionDefaultBorder();var g=h.dataTransfer;if(g){var m=g.files;if(!m||m.length===0)return;for(var v=!1,b=0;b<m.length;++b){var I=m.item(b);if(I){var T=/image.*/;if(I.type.match(T)){v=!0;var P=I.name;o.setImageNameToButton(P),r(I),l.innerText=tt.dragAndDropMessage();break}}}v||(l.innerText=tt.dragAndDropMessageOnlyImages())}})}return e.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},e.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},e.prototype.isShowing=function(){return this.fileBasedScanRegion.style.display==="block"},e.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},e.prototype.createFileBasedScanRegion=function(){var n=document.createElement("div");return n.style.textAlign="center",n.style.margin="auto",n.style.width="80%",n.style.maxWidth="600px",n.style.border=this.fileBasedScanRegionDefaultBorder(),n.style.padding="10px",n.style.marginBottom="10px",n},e.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},e.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},e.prototype.createDragAndDropMessage=function(){var n=document.createElement("div");return n.innerText=tt.dragAndDropMessage(),n.style.fontWeight="400",n},e.prototype.setImageNameToButton=function(n){var t=20;if(n.length>t){var r=n.substring(0,8),i=n.length,o=n.substring(i-8,i);n="".concat(r,"....").concat(o)}var l=tt.fileSelectionChooseAnother()+" - "+n;this.fileSelectionButton.innerText=l},e.prototype.setInitialValueToButton=function(){var n=tt.fileSelectionChooseImage()+" - "+tt.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=n},e.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},e.create=function(n,t,r){var i=new e(n,t,r);return i},e}();var PT=function(){function e(n){this.selectElement=ir.createElement("select",mn.CAMERA_SELECTION_SELECT_ID),this.cameras=n,this.options=[]}return e.prototype.render=function(n){var t=document.createElement("span");t.style.marginRight="10px";var r=this.cameras.length;if(r===0)throw new Error("No cameras found");if(r===1)t.style.display="none";else{var i=tt.selectCamera();t.innerText="".concat(i," (").concat(this.cameras.length,")  ")}for(var o=1,l=0,h=this.cameras;l<h.length;l++){var g=h[l],m=g.id,v=g.label==null?m:g.label;(!v||v==="")&&(v=[tt.anonymousCameraPrefix(),o++].join(" "));var b=document.createElement("option");b.value=m,b.innerText=v,this.options.push(b),this.selectElement.appendChild(b)}t.appendChild(this.selectElement),n.appendChild(t)},e.prototype.disable=function(){this.selectElement.disabled=!0},e.prototype.isDisabled=function(){return this.selectElement.disabled===!0},e.prototype.enable=function(){this.selectElement.disabled=!1},e.prototype.getValue=function(){return this.selectElement.value},e.prototype.hasValue=function(n){for(var t=0,r=this.options;t<r.length;t++){var i=r[t];if(i.value===n)return!0}return!1},e.prototype.setValue=function(n){if(!this.hasValue(n))throw new Error("".concat(n," is not present in the camera list."));this.selectElement.value=n},e.prototype.hasSingleItem=function(){return this.cameras.length===1},e.prototype.numCameras=function(){return this.cameras.length},e.create=function(n,t){var r=new e(t);return r.render(n),r},e}();var kT=function(){function e(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=ir.createElement("input",mn.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return e.prototype.render=function(n,t){this.zoomElementContainer.style.display=t?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",n.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var r=tt.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(r),this.rangeText.style.marginRight="10px";var i=this;this.rangeInput.addEventListener("input",function(){return i.onValueChange()}),this.rangeInput.addEventListener("change",function(){return i.onValueChange()}),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},e.prototype.onValueChange=function(){var n=tt.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(n),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},e.prototype.setValues=function(n,t,r,i){this.rangeInput.min=n.toString(),this.rangeInput.max=t.toString(),this.rangeInput.step=i.toString(),this.rangeInput.value=r.toString(),this.onValueChange()},e.prototype.show=function(){this.zoomElementContainer.style.display="block"},e.prototype.hide=function(){this.zoomElementContainer.style.display="none"},e.prototype.setOnCameraZoomValueChangeCallback=function(n){this.onChangeCallback=n},e.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},e.create=function(n,t){var r=new e;return r.render(n,t),r},e}();var Rr=function(e){return e[e.STATUS_DEFAULT=0]="STATUS_DEFAULT",e[e.STATUS_SUCCESS=1]="STATUS_SUCCESS",e[e.STATUS_WARNING=2]="STATUS_WARNING",e[e.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION",e}(Rr||{});function wU(e){return{fps:e.fps,qrbox:e.qrbox,aspectRatio:e.aspectRatio,disableFlip:e.disableFlip,videoConstraints:e.videoConstraints}}function vU(e,n){return{formatsToSupport:e.formatsToSupport,useBarCodeDetectorIfSupported:e.useBarCodeDetectorIfSupported,experimentalFeatures:e.experimentalFeatures,verbose:n}}var xu=function(){function e(n,t,r){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=n,this.config=this.createConfig(t),this.verbose=r===!0,!document.getElementById(n))throw"HTML Element with id=".concat(n," not found");this.scanTypeSelector=new Ki(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new bp(this.verbose),this.persistedDataManager=new DT,t.rememberLastUsedCamera!==!0&&this.persistedDataManager.reset()}return e.prototype.render=function(n,t){var r=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(o,l){if(n)n(o,l);else{if(r.lastMatchFound===o)return;r.lastMatchFound=o,r.setHeaderMessage(tt.lastMatch(o),Rr.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(o,l){t&&t(o,l)};var i=document.getElementById(this.elementId);if(!i)throw"HTML Element with id=".concat(this.elementId," not found");i.innerHTML="",this.createBasicLayout(i),this.html5Qrcode=new Sp(this.getScanRegionId(),vU(this.config,this.verbose))},e.prototype.pause=function(n){(Nr(n)||n!==!0)&&(n=!1),this.getHtml5QrcodeOrFail().pause(n)},e.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},e.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},e.prototype.clear=function(){var n=this,t=function(){var r=document.getElementById(n.elementId);r&&(r.innerHTML="",n.resetBasicLayout(r))};return this.html5Qrcode?new Promise(function(r,i){if(!n.html5Qrcode){r();return}n.html5Qrcode.isScanning?n.html5Qrcode.stop().then(function(o){if(!n.html5Qrcode){r();return}n.html5Qrcode.clear(),t(),r()}).catch(function(o){n.verbose&&n.logger.logError("Unable to stop qrcode scanner",o),i(o)}):(n.html5Qrcode.clear(),t(),r())}):Promise.resolve()},e.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},e.prototype.applyVideoConstraints=function(n){return this.getHtml5QrcodeOrFail().applyVideoConstraints(n)},e.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},e.prototype.createConfig=function(n){return n?(n.fps||(n.fps=rr.SCAN_DEFAULT_FPS),n.rememberLastUsedCamera!==!rr.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(n.rememberLastUsedCamera=rr.DEFAULT_REMEMBER_LAST_CAMERA_USED),n.supportedScanTypes||(n.supportedScanTypes=rr.DEFAULT_SUPPORTED_SCAN_TYPE),n):{fps:rr.SCAN_DEFAULT_FPS,rememberLastUsedCamera:rr.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:rr.DEFAULT_SUPPORTED_SCAN_TYPE}},e.prototype.createBasicLayout=function(n){n.style.position="relative",n.style.padding="0px",n.style.border="1px solid silver",this.createHeader(n);var t=document.createElement("div"),r=this.getScanRegionId();t.id=r,t.style.width="100%",t.style.minHeight="100px",t.style.textAlign="center",n.appendChild(t),Ki.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var i=document.createElement("div"),o=this.getDashboardId();i.id=o,i.style.width="100%",n.appendChild(i),this.setupInitialDashboard(i)},e.prototype.resetBasicLayout=function(n){n.style.border="none"},e.prototype.setupInitialDashboard=function(n){this.createSection(n),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},e.prototype.createHeader=function(n){var t=document.createElement("div");t.style.textAlign="left",t.style.margin="0px",n.appendChild(t);var r=new MT;r.renderInto(t);var i=document.createElement("div");i.id=this.getHeaderMessageContainerId(),i.style.display="none",i.style.textAlign="center",i.style.fontSize="14px",i.style.padding="2px 10px",i.style.margin="4px",i.style.borderTop="1px solid #f6f6f6",t.appendChild(i)},e.prototype.createSection=function(n){var t=document.createElement("div");t.id=this.getDashboardSectionId(),t.style.width="100%",t.style.padding="10px 0px 10px 0px",t.style.textAlign="left",n.appendChild(t)},e.prototype.createCameraListUi=function(n,t,r){var i=this;i.showHideScanTypeSwapLink(!1),i.setHeaderMessage(tt.cameraPermissionRequesting());var o=function(){r||i.createPermissionButton(n,t)};Sp.getCameras().then(function(l){i.persistedDataManager.setHasPermission(!0),i.showHideScanTypeSwapLink(!0),i.resetHeaderMessage(),l&&l.length>0?(n.removeChild(t),i.renderCameraSelection(l)):(i.setHeaderMessage(tt.noCameraFound(),Rr.STATUS_WARNING),o())}).catch(function(l){i.persistedDataManager.setHasPermission(!1),r?r.disabled=!1:o(),i.setHeaderMessage(l,Rr.STATUS_WARNING),i.showHideScanTypeSwapLink(!0)})},e.prototype.createPermissionButton=function(n,t){var r=this,i=ir.createElement("button",this.getCameraPermissionButtonId());i.innerText=tt.cameraPermissionTitle(),i.addEventListener("click",function(){i.disabled=!0,r.createCameraListUi(n,t,i)}),t.appendChild(i)},e.prototype.createPermissionsUi=function(n,t){var r=this;if(Ki.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()){SC.hasPermissions().then(function(i){i?r.createCameraListUi(n,t):(r.persistedDataManager.setHasPermission(!1),r.createPermissionButton(n,t))}).catch(function(i){r.persistedDataManager.setHasPermission(!1),r.createPermissionButton(n,t)});return}this.createPermissionButton(n,t)},e.prototype.createSectionControlPanel=function(){var n=document.getElementById(this.getDashboardSectionId()),t=document.createElement("div");n.appendChild(t);var r=document.createElement("div");r.id=this.getDashboardSectionCameraScanRegionId(),r.style.display=Ki.isCameraScanType(this.currentScanType)?"block":"none",t.appendChild(r);var i=document.createElement("div");i.style.textAlign="center",r.appendChild(i),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(r,i),this.renderFileScanUi(t)},e.prototype.renderFileScanUi=function(n){var t=Ki.isFileScanType(this.currentScanType),r=this,i=function(o){if(!r.html5Qrcode)throw"html5Qrcode not defined";Ki.isFileScanType(r.currentScanType)&&(r.setHeaderMessage(tt.loadingImage()),r.html5Qrcode.scanFileV2(o,!0).then(function(l){r.resetHeaderMessage(),r.qrCodeSuccessCallback(l.decodedText,l)}).catch(function(l){r.setHeaderMessage(l,Rr.STATUS_WARNING),r.qrCodeErrorCallback(l,vp.createFrom(l))}))};this.fileSelectionUi=RT.create(n,t,i)},e.prototype.renderCameraSelection=function(n){var t=this,r=this,i=document.getElementById(this.getDashboardSectionCameraScanRegionId());i.style.textAlign="center";var o=kT.create(i,!1),l=function(z){var Z=z.zoomFeature();if(Z.isSupported()){o.setOnCameraZoomValueChangeCallback(function(ce){Z.apply(ce)});var q=1;t.config.defaultZoomValueIfSupported&&(q=t.config.defaultZoomValueIfSupported),q=uT(q,Z.min(),Z.max()),o.setValues(Z.min(),Z.max(),q,Z.step()),o.show()}},h=PT.create(i,n),g=document.createElement("span"),m=ir.createElement("button",mn.CAMERA_START_BUTTON_ID);m.innerText=tt.scanButtonStartScanningText(),g.appendChild(m);var v=ir.createElement("button",mn.CAMERA_STOP_BUTTON_ID);v.innerText=tt.scanButtonStopScanningText(),v.style.display="none",v.disabled=!0,g.appendChild(v);var b,I=function(z){if(!z.torchFeature().isSupported()){b&&b.hide();return}b?b.updateTorchCapability(z.torchFeature()):b=NT.create(g,z.torchFeature(),{display:"none",marginLeft:"5px"},function(Z){r.setHeaderMessage(Z,Rr.STATUS_WARNING)}),b.show()};i.appendChild(g);var T=function(z){z||(m.style.display="none"),m.innerText=tt.scanButtonStartScanningText(),m.style.opacity="1",m.disabled=!1,z&&(m.style.display="inline-block")};if(m.addEventListener("click",function(z){m.innerText=tt.scanButtonScanningStarting(),h.disable(),m.disabled=!0,m.style.opacity="0.5",t.scanTypeSelector.hasMoreThanOneScanType()&&r.showHideScanTypeSwapLink(!1),r.resetHeaderMessage();var Z=h.getValue();r.persistedDataManager.setLastUsedCameraId(Z),r.html5Qrcode.start(Z,wU(r.config),r.qrCodeSuccessCallback,r.qrCodeErrorCallback).then(function(q){v.disabled=!1,v.style.display="inline-block",T(!1);var ce=r.html5Qrcode.getRunningTrackCameraCapabilities();t.config.showTorchButtonIfSupported===!0&&I(ce),t.config.showZoomSliderIfSupported===!0&&l(ce)}).catch(function(q){r.showHideScanTypeSwapLink(!0),h.enable(),T(!0),r.setHeaderMessage(q,Rr.STATUS_WARNING)})}),h.hasSingleItem()&&m.click(),v.addEventListener("click",function(z){if(!r.html5Qrcode)throw"html5Qrcode not defined";v.disabled=!0,r.html5Qrcode.stop().then(function(Z){t.scanTypeSelector.hasMoreThanOneScanType()&&r.showHideScanTypeSwapLink(!0),h.enable(),m.disabled=!1,v.style.display="none",m.style.display="inline-block",b&&(b.reset(),b.hide()),o.removeOnCameraZoomValueChangeCallback(),o.hide(),r.insertCameraScanImageToScanRegion()}).catch(function(Z){v.disabled=!1,r.setHeaderMessage(Z,Rr.STATUS_WARNING)})}),r.persistedDataManager.getLastUsedCameraId()){var P=r.persistedDataManager.getLastUsedCameraId();h.hasValue(P)?(h.setValue(P),m.click()):r.persistedDataManager.resetLastUsedCameraId()}},e.prototype.createSectionSwap=function(){var n=this,t=tt.textIfCameraScanSelected(),r=tt.textIfFileScanSelected(),i=document.getElementById(this.getDashboardSectionId()),o=document.createElement("div");o.style.textAlign="center";var l=ir.createElement("span",this.getDashboardSectionSwapLinkId());l.style.textDecoration="underline",l.style.cursor="pointer",l.innerText=Ki.isCameraScanType(this.currentScanType)?t:r,l.addEventListener("click",function(){if(!n.sectionSwapAllowed){n.verbose&&n.logger.logError("Section swap called when not allowed");return}n.resetHeaderMessage(),n.fileSelectionUi.resetValue(),n.sectionSwapAllowed=!1,Ki.isCameraScanType(n.currentScanType)?(n.clearScanRegion(),n.getCameraScanRegion().style.display="none",n.fileSelectionUi.show(),l.innerText=r,n.currentScanType=xi.SCAN_TYPE_FILE,n.insertFileScanImageToScanRegion()):(n.clearScanRegion(),n.getCameraScanRegion().style.display="block",n.fileSelectionUi.hide(),l.innerText=t,n.currentScanType=xi.SCAN_TYPE_CAMERA,n.insertCameraScanImageToScanRegion(),n.startCameraScanIfPermissionExistsOnSwap()),n.sectionSwapAllowed=!0}),o.appendChild(l),i.appendChild(o)},e.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var n=this,t=this;if(this.persistedDataManager.hasCameraPermissions()){SC.hasPermissions().then(function(r){if(r){var i=document.getElementById(t.getCameraPermissionButtonId());if(!i)throw n.logger.logError("Permission button not found, fail;"),"Permission button not found";i.click()}else t.persistedDataManager.setHasPermission(!1)}).catch(function(r){t.persistedDataManager.setHasPermission(!1)});return}},e.prototype.resetHeaderMessage=function(){var n=document.getElementById(this.getHeaderMessageContainerId());n.style.display="none"},e.prototype.setHeaderMessage=function(n,t){t||(t=Rr.STATUS_DEFAULT);var r=this.getHeaderMessageDiv();switch(r.innerText=n,r.style.display="block",t){case Rr.STATUS_SUCCESS:r.style.background="rgba(106, 175, 80, 0.26)",r.style.color="#477735";break;case Rr.STATUS_WARNING:r.style.background="rgba(203, 36, 49, 0.14)",r.style.color="#cb2431";break;case Rr.STATUS_DEFAULT:default:r.style.background="rgba(0, 0, 0, 0)",r.style.color="rgb(17, 17, 17)";break}},e.prototype.showHideScanTypeSwapLink=function(n){this.scanTypeSelector.hasMoreThanOneScanType()&&(n!==!0&&(n=!1),this.sectionSwapAllowed=n,this.getDashboardSectionSwapLink().style.display=n?"inline-block":"none")},e.prototype.insertCameraScanImageToScanRegion=function(){var n=this,t=document.getElementById(this.getScanRegionId());if(this.cameraScanImage){t.innerHTML="<br>",t.appendChild(this.cameraScanImage);return}this.cameraScanImage=new Image,this.cameraScanImage.onload=function(r){t.innerHTML="<br>",t.appendChild(n.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=xT,this.cameraScanImage.alt=tt.cameraScanAltText()},e.prototype.insertFileScanImageToScanRegion=function(){var n=this,t=document.getElementById(this.getScanRegionId());if(this.fileScanImage){t.innerHTML="<br>",t.appendChild(this.fileScanImage);return}this.fileScanImage=new Image,this.fileScanImage.onload=function(r){t.innerHTML="<br>",t.appendChild(n.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=ET,this.fileScanImage.alt=tt.fileScanAltText()},e.prototype.clearScanRegion=function(){var n=document.getElementById(this.getScanRegionId());n.innerHTML=""},e.prototype.getDashboardSectionId=function(){return"".concat(this.elementId,"__dashboard_section")},e.prototype.getDashboardSectionCameraScanRegionId=function(){return"".concat(this.elementId,"__dashboard_section_csr")},e.prototype.getDashboardSectionSwapLinkId=function(){return mn.SCAN_TYPE_CHANGE_ANCHOR_ID},e.prototype.getScanRegionId=function(){return"".concat(this.elementId,"__scan_region")},e.prototype.getDashboardId=function(){return"".concat(this.elementId,"__dashboard")},e.prototype.getHeaderMessageContainerId=function(){return"".concat(this.elementId,"__header_message")},e.prototype.getCameraPermissionButtonId=function(){return mn.CAMERA_PERMISSION_BUTTON_ID},e.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},e.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},e.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())},e}();var FT=(()=>{class e{navigationService;messagesService;tableId=null;uniqueLinkToken=null;ownerId=null;restaurantid=null;html5QrCodeScanner=null;constructor(t,r){this.navigationService=t,this.messagesService=r}ngAfterViewInit(){this.html5QrCodeScanner=new xu("reader",{fps:10,qrbox:{width:250,height:250}},!1),this.html5QrCodeScanner.render(this.onScanSuccess.bind(this),this.onScanFailure)}onScanSuccess(t){let r=new URL(t),i=r.searchParams.get("t"),o=r.searchParams.get("u"),l=r.searchParams.get("r"),h=r.searchParams.get("o");this.messagesService.askUser("Czy na pewno chcesz zmienic stolik?",()=>{i?(this.tableId=i,this.uniqueLinkToken=o,this.restaurantid=l,this.ownerId=h,localStorage.setItem("customercurrentTable",this.tableId),localStorage.setItem("uniqueLinkToken",this.uniqueLinkToken),localStorage.setItem("restaurantid",this.restaurantid),localStorage.setItem("ownerid",this.ownerId),this.navigationService.NavigateTo("tableordered"),console.log("Table ID saved:",this.tableId)):console.error("Table ID not found in the scanned QR code.")},()=>{this.navigationService.NavigateTo("tableordered")}),this.html5QrCodeScanner?.clear()}onScanFailure(t){console.warn(`QR code scan error: ${t}`)}ngOnDestroy(){this.html5QrCodeScanner?.clear()}static \u0275fac=function(r){return new(r||e)(W(Se),W(So))};static \u0275cmp=oe({type:e,selectors:[["app-scanqrcode"]],standalone:!0,features:[se],decls:7,vars:0,consts:[[1,"layoutbox"],[1,"head"],[1,"logo"],["src","https://cdn1.mandarin.com.pl/eologo.png","alt","EasyOrder"],["id","reader",2,"width","300px"],[1,"footstatic"]],template:function(r,i){r&1&&(M(0,"main")(1,"div",0)(2,"div",1)(3,"div",2),J(4,"img",3),A()(),J(5,"div",4)(6,"div",5),A()())},styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;justify-content:space-between;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{width:100%;height:64px;padding:0 32px;border-bottom:3px solid #000;display:flex;justify-content:space-between;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{margin:8px 0;height:48px}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .backbtn[_ngcontent-%COMP%]{height:48px;font-size:48px;font-weight:700;display:flex;justify-content:center;align-items:center;margin:8px 0}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .backbtn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{height:48px;font-size:48px;font-weight:700}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{width:75%;display:flex;flex-direction:column;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-weight:bolder;font-size:140%;margin-bottom:24px}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;background:#fff;padding:16px;font-size:110%;border-radius:16px;color:#000;font-weight:600;letter-spacing:2px;border:3px solid #000;transition:all .5s;margin-bottom:24px}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#333}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;background:#000;padding:16px;font-size:110%;color:#fff;font-weight:600;letter-spacing:2px;border:none;transition:all .5s;border-radius:16px;cursor:pointer}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#333}#reader[_ngcontent-%COMP%]{width:300px;height:300px;border-radius:16px;border:3px black solid;display:flex;flex-direction:column;flex-wrap:wrap;justify-content:center;align-items:center;align-content:center}#reader[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:none!important}#reader__scan_region[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-wrap:wrap;justify-content:center;align-items:center;align-content:center}"]})}return e})();var LT=(()=>{class e{router;constructor(t){this.router=t}setOrder(t){localStorage.setItem("orderNumber",t),this.router.navigate(["/scanqrcode"])}static \u0275fac=function(r){return new(r||e)(W(yi))};static \u0275cmp=oe({type:e,selectors:[["app-setorder"]],standalone:!0,features:[se],decls:14,vars:0,consts:[["orderNumberInput",""],[1,"layoutbox"],[1,"head"],[1,"logo"],["src","https://cdn1.mandarin.com.pl/eologo.png","alt","EasyOrder"],[1,"backbtn"],[1,"loginform"],["type","text"],[3,"click"],[1,"footstatic"]],template:function(r,i){if(r&1){let o=Tt();M(0,"main")(1,"div",1)(2,"div",2)(3,"div",3),J(4,"img",4),A(),J(5,"div",5),A(),M(6,"div",6)(7,"label"),R(8,"Wprowad\u017A numer zam\xF3wienia"),A(),J(9,"input",7,0),M(11,"button",8),j("click",function(){it(o);let h=bo(10);return ot(i.setOrder(h.value))}),R(12,"Przypisz stolik"),A()(),J(13,"div",9),A()()}},styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;justify-content:space-between;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{width:100%;height:64px;padding:0 32px;border-bottom:3px solid #000;display:flex;justify-content:space-between;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{margin:8px 0;height:48px}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .backbtn[_ngcontent-%COMP%]{height:48px;font-size:48px;font-weight:700;display:flex;justify-content:center;align-items:center;margin:8px 0}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .backbtn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{height:48px;font-size:48px;font-weight:700}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]{width:75%;display:flex;flex-direction:column;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:bolder;font-size:200%;margin-bottom:24px}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;background:#fff;padding:16px;font-size:110%;border-radius:16px;color:#000;font-weight:600;letter-spacing:2px;border:3px solid #000;transition:all .5s;margin-bottom:24px}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#333}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;background:#000;padding:16px;font-size:110%;color:#fff;font-weight:600;letter-spacing:2px;border:none;transition:all .5s;border-radius:16px;cursor:pointer}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#333}"]})}return e})();var BT=(()=>{class e{route;router;waiterId=null;uniqueLinkToken=null;ownerId=null;restaurantId=null;pin="";constructor(t,r){this.route=t,this.router=r,Ce(Ie.firebaseConfig)}ngOnInit(){this.route.queryParams.subscribe(t=>{this.uniqueLinkToken=t.u||null,this.ownerId=t.o||null,this.restaurantId=t.r||null,this.waiterId=t.w||null})}authenticateWaiter(){let t=K();if(!this.restaurantId||!this.uniqueLinkToken||!this.ownerId){console.error("Missing required data");return}let r=Q(t,`Owners/${this.ownerId}/Restaurants/${this.restaurantId}`);ue(r).then(i=>{if(i.exists()){let l=i.val().settings.waiter_access_pin;l&&l.toString()===this.pin?this.saveAuthData():console.error("Invalid PIN")}else console.error("Restaurant not found")}).catch(i=>{console.error("Error authenticating waiter:",i)})}saveAuthData(){localStorage.setItem("uniqueLinkToken",this.uniqueLinkToken),localStorage.setItem("restaurantid",this.restaurantId),localStorage.setItem("ownerid",this.ownerId),localStorage.setItem("waiterpin",this.pin),localStorage.setItem("waiterid",this.waiterId),this.router.navigate(["/waiterorderlist"])}static \u0275fac=function(r){return new(r||e)(W(mi),W(yi))};static \u0275cmp=oe({type:e,selectors:[["app-waiterauth"]],standalone:!0,features:[se],decls:13,vars:1,consts:[[1,"layoutbox"],[1,"head"],[1,"logo"],["src","https://cdn1.mandarin.com.pl/eologo.png","alt","EasyOrder"],[1,"backbtn"],[1,"loginform"],["for","pin"],["id","pin","type","password","required","",3,"ngModelChange","ngModel"],[3,"click"],[1,"footstatic"]],template:function(r,i){r&1&&(M(0,"main")(1,"div",0)(2,"div",1)(3,"div",2),J(4,"img",3),A(),J(5,"div",4),A(),M(6,"div",5)(7,"label",6),R(8,"Wprowad\u017A numer PIN"),A(),M(9,"input",7),at("ngModelChange",function(l){return lt(i.pin,l)||(i.pin=l),l}),A(),M(10,"button",8),j("click",function(){return i.authenticateWaiter()}),R(11,"Zaloguj"),A()(),J(12,"div",9),A()()),r&2&&(V(9),st("ngModel",i.pin))},dependencies:[Wt,Kt,gn,Sn,cn],styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;justify-content:space-between;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{width:100%;height:64px;padding:0 32px;border-bottom:3px solid #000;display:flex;justify-content:space-between;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{margin:8px 0;height:48px}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .backbtn[_ngcontent-%COMP%]{height:48px;font-size:48px;font-weight:700;display:flex;justify-content:center;align-items:center;margin:8px 0}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .backbtn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{height:48px;font-size:48px;font-weight:700}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]{width:75%;display:flex;flex-direction:column;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:bolder;font-size:150%;margin-bottom:24px}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;background:#fff;padding:16px;font-size:110%;border-radius:16px;color:#000;font-weight:600;letter-spacing:2px;border:3px solid #000;transition:all .5s;margin-bottom:24px}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#333}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;background:#000;padding:16px;font-size:110%;color:#fff;font-weight:600;letter-spacing:2px;border:none;transition:all .5s;border-radius:16px;cursor:pointer}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#333}"]})}return e})();var bU=()=>({"background-color":"#000000",color:"#ffffff",border:"2px solid black"}),xU=()=>({"background-color":"#ffffff",color:"#000000",border:"2px solid black"});function EU(e,n){e&1&&(M(0,"p"),R(1,"Brak zam\xF3wie\u0144 przypisanych do restauracji."),A())}function IU(e,n){if(e&1&&(M(0,"span",24),R(1),A()),e&2){let t=pe(3).$implicit,r=pe();V(),xt(" ",r.getTableName(t.table_id),"")}}function SU(e,n){if(e&1){let t=Tt();M(0,"button",19),j("click",function(){it(t);let i=pe(2).$implicit,o=pe();return ot(o.setTable(i.name))}),J(1,"div",20),R(2),M(3,"div",21)(4,"span",22),R(5),A(),mt(6,IU,2,1,"span",23),A()()}if(e&2){let t=pe(2).$implicit,r=pe();Ee("ngStyle",nc(4,bU)),V(2),xt(" ",t.name," "),V(3),bt(r.getOrderAge(t.created_at)),V(),Ee("ngIf",r.getTableName(t.table_id))}}function DU(e,n){if(e&1){let t=Tt();M(0,"button",19),j("click",function(){it(t);let i=pe(2).$implicit,o=pe();return ot(o.setTable(i.name))}),J(1,"div",20),R(2),M(3,"div",21)(4,"span",22),R(5),A()()()}if(e&2){let t=pe(2).$implicit,r=pe();Ee("ngStyle",nc(3,xU)),V(2),xt(" ",t.name," "),V(3),bt(r.getOrderAge(t.created_at))}}function MU(e,n){if(e&1&&(gs(0),mt(1,SU,7,5,"button",18)(2,DU,6,4,"button",18),ms()),e&2){let t=pe().$implicit;V(),Ee("ngIf",t.table_id),V(),Ee("ngIf",!t.table_id)}}function TU(e,n){if(e&1&&(gs(0),mt(1,MU,3,2,"ng-container",13),ms()),e&2){let t=n.$implicit;V(),Ee("ngIf",t.completed_at||t.canceled_at)}}var UT=(()=>{class e{navigationService;orders=[];tables=[];tableGroups={};refreshInterval;isMenuOpen=!1;constructor(t){this.navigationService=t;let r=Ce(Ie.firebaseConfig)}toggleMenu(){this.isMenuOpen=!this.isMenuOpen}ngOnInit(){this.loadOrders(),this.loadTables(),this.loadTableGroups(),this.refreshInterval=setInterval(()=>{this.loadOrders()},15e3)}ngOnDestroy(){this.refreshInterval&&clearInterval(this.refreshInterval)}loadOrders(){let t=K(),r=localStorage.getItem("currentRestaurant"),i=localStorage.getItem("ownerid");if(!r||!i){console.error("No current restaurant or owner found");return}let o=Q(t,`Owners/${i}/Restaurants/${r}/Orders`);ue(o).then(l=>{if(l.exists()){let h=l.val();this.orders=Object.values(h),this.orders.sort((g,m)=>g.created_at<m.created_at?-1:g.created_at>m.created_at||g.completed_at&&!m.completed_at?1:!g.completed_at&&m.completed_at?-1:0)}else console.log("No orders found")}).catch(l=>{console.error("Error loading orders:",l)})}loadTables(){let t=K(),r=localStorage.getItem("currentRestaurant"),i=localStorage.getItem("ownerid");if(!r||!i){console.error("No current restaurant or owner found");return}let o=Q(t,`Owners/${i}/Restaurants/${r}/Tables`);ue(o).then(l=>{if(l.exists()){let h=l.val();this.tables=Object.values(h)}else console.log("No tables found")}).catch(l=>{console.error("Error loading tables:",l)})}loadTableGroups(){let t=K(),r=localStorage.getItem("currentRestaurant"),i=localStorage.getItem("ownerid");if(!r||!i){console.error("No current restaurant or owner found");return}let o=Q(t,`Owners/${i}/Restaurants/${r}/TableGroups`);ue(o).then(l=>{if(l.exists()){let h=l.val();this.tableGroups=h}else console.log("No table groups found")}).catch(l=>{console.error("Error loading table groups:",l)})}getOrderAge(t){let i=Date.now()-t,o=Math.floor(i/1e3),l=Math.floor(o/60),h=Math.floor(l/60),g=Math.floor(h/24);return g>0?g===1?"1 d.":`${g} d.`:h>0?h===1?"1 godz.":`${h} godz.`:l>0?l===1?"1 min.":`${l} min.`:o===1?"1 s.":`${o} s.`}getTableName(t){let r=this.tables.find(i=>i.id===t);return r?r.name:null}setTable(t){localStorage.setItem("currentTable",t),this.goToPage("waitertablelookup")}goToPage(t){this.navigationService.NavigateTo(t)}trackOrder(t,r){return r.name}getTableGroupColor(t){let r=this.tables.find(i=>i.id===t);return r&&r.group_id&&this.tableGroups[r.group_id]?this.tableGroups[r.group_id].color:"white"}getTextColor(t){let r=t.replace("#",""),i=parseInt(r.substring(0,2),16),o=parseInt(r.substring(2,4),16),l=parseInt(r.substring(4,6),16);return(i*299+o*587+l*114)/1e3>125?"black":"white"}static \u0275fac=function(r){return new(r||e)(W(Se))};static \u0275cmp=oe({type:e,selectors:[["app-waitertablelist"]],standalone:!0,features:[se],decls:34,vars:7,consts:[[1,"sidebar"],[1,"overlay"],[1,"first"],[3,"click"],[1,"selem",3,"click"],[1,"active",3,"click"],[1,"layoutbox"],[1,"head"],[1,"logo"],["src","https://cdn1.mandarin.com.pl/eologo.png","alt","EasyOrder",1,"w-full"],[1,"backbtn",3,"click"],[1,"material-symbols-rounded"],[1,"buttons"],[4,"ngIf"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"footstatic"],["src","https://cdn1.mandarin.com.pl/eocamera.svg","alt",""],["src","https://cdn1.mandarin.com.pl/eoaddorder.svg","alt",""],["class","table-button",3,"ngStyle","click",4,"ngIf"],[1,"table-button",3,"click","ngStyle"],[1,"flexhead"],[1,"flexfoot"],[1,"order-time"],["class","order-table",4,"ngIf"],[1,"order-table"]],template:function(r,i){r&1&&(M(0,"main")(1,"div",0)(2,"div",1)(3,"ul")(4,"li",2)(5,"span",3),j("click",function(){return i.toggleMenu()}),R(6,"X"),A()(),M(7,"div"),R(8,"Moje zam\xF3wienia: "),M(9,"li",4),j("click",function(){return i.goToPage("tablemanage")}),R(10,"Nowe"),A(),M(11,"li",3),j("click",function(){return i.goToPage("restaurantrevievs")}),R(12,"Wydane"),A()(),M(13,"div"),R(14,"Wszystkie Zam\xF3wienia: "),M(15,"li",3),j("click",function(){return i.goToPage("waiterorderlist")}),R(16,"Nowe"),A(),M(17,"li",5),j("click",function(){return i.goToPage("waitertablelist")}),R(18,"Wydane"),A()()()()(),M(19,"div",6)(20,"div",7)(21,"div",8),J(22,"img",9),A(),M(23,"div",10),j("click",function(){return i.toggleMenu()}),M(24,"span",11),R(25,"menu"),A()()(),M(26,"div",12),mt(27,EU,2,0,"p",13)(28,TU,2,1,"ng-container",14),A(),M(29,"div",15)(30,"button",3),j("click",function(){return i.goToPage("waiterscan")}),J(31,"img",16),A(),M(32,"button",3),j("click",function(){return i.goToPage("addorder")}),J(33,"img",17),A()()()()),r&2&&(V(),pr("active",i.isMenuOpen),V(),pr("active",i.isMenuOpen),V(25),Ee("ngIf",i.orders.length===0),V(),Ee("ngForOf",i.orders)("ngForTrackBy",i.trackOrder))},dependencies:[En,Da,pi,Eo],styles:['@font-face{font-family:Varela Round;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/varelaround/v20/w8gdH283Tvk__Lua32TysjIfpcuPP9g.woff2) format("woff2");unicode-range:U+0307-0308,U+0590-05FF,U+200C-2010,U+20AA,U+25CC,U+FB1D-FB4F}@font-face{font-family:Varela Round;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/varelaround/v20/w8gdH283Tvk__Lua32TysjIfqMuPP9g.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Varela Round;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/varelaround/v20/w8gdH283Tvk__Lua32TysjIfqcuPP9g.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Varela Round;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/varelaround/v20/w8gdH283Tvk__Lua32TysjIfp8uP.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;justify-content:space-between;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{width:100%;height:64px;padding:0 32px;border-bottom:3px solid #000;display:flex;justify-content:space-between;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{margin:8px 0;height:48px}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%;z-index:99999}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .backbtn[_ngcontent-%COMP%]{height:48px;font-size:48px;font-weight:700;display:flex;justify-content:center;align-items:center;margin:8px 0}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .backbtn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{height:48px;font-size:48px;font-weight:700}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{width:100%;height:100%;overflow-y:auto;overflow-x:hidden;display:flex;flex-direction:row;flex-wrap:wrap;justify-content:flex-start;align-items:flex-start;align-content:flex-start}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:114px;height:114px;border-radius:16px;margin:8px;font-size:200%;font-weight:bolder}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .footstatic[_ngcontent-%COMP%]{width:100%;border-top:black 3px solid;padding:8px;display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .footstatic[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:calc(50% - 8px);border:2px solid black;border-radius:16px;color:#000;background:#fff;padding:16px;font-size:110%;font-weight:bolder;display:flex;justify-content:center;align-items:center;align-content:center}.sidebar[_ngcontent-%COMP%]{position:fixed;top:0;right:-100%;width:100%;height:100%;background-color:#00000040;box-shadow:-2px 0 5px #00000080;-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px);transition:right .3s ease;z-index:999}.sidebar.active[_ngcontent-%COMP%]{right:0}.sidebar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin-top:0;list-style:none;padding:0}.sidebar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{border-top:3px solid black;border-bottom:3px solid black;padding:16px;font-weight:700;margin:0}.sidebar[_ngcontent-%COMP%]   li.first[_ngcontent-%COMP%]{text-align:right;padding-top:0;padding-bottom:0;border-top:0;padding-right:32px;height:64px;display:flex;flex-direction:row;flex-wrap:wrap;justify-content:flex-end;align-items:center;align-content:center}.sidebar[_ngcontent-%COMP%]   li.first[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{height:48px;width:48px;font-size:32px;font-weight:700;font-family:Varela Round,sans-serif}.sidebar[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]{background:#000;color:#fff}.overlay[_ngcontent-%COMP%]{position:fixed;top:0;right:-250px;width:250px;height:100%;background-color:#fff;box-shadow:-2px 0 5px #00000080;transition:right .3s ease}.overlay.active[_ngcontent-%COMP%]{right:0}.flexfoot[_ngcontent-%COMP%]{padding-left:4px;padding-right:4px;width:100%;font-size:45%;display:flex;flex-direction:row;flex-wrap:wrap;justify-content:space-between;align-items:center;align-content:flex-end}.table-button[_ngcontent-%COMP%]{font-size:75%!important;padding:4px;display:flex;flex-direction:column;flex-wrap:wrap;justify-content:space-between;align-items:center;align-content:flex-end}.sidebar[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{margin-top:48px;font-size:110%;font-weight:bolder}.selem[_ngcontent-%COMP%]{border-bottom:0px!important}']})}return e})();function AU(e,n){if(e&1){let t=Tt();M(0,"div",4)(1,"span",5),R(2),A(),M(3,"button",6),j("click",function(){let i=it(t).$implicit,o=pe(2);return ot(o.markOrderAsCompleted(i))}),R(4),A()()}if(e&2){let t=n.$implicit;V(2),bt(t.name),V(),Ee("disabled",!!t.completed_at),V(),xt(" ",t.completed_at?"Zako\u0144czone":"Zako\u0144cz"," ")}}function OU(e,n){if(e&1&&(M(0,"div"),mt(1,AU,5,3,"div",3),A()),e&2){let t=pe();V(),Ee("ngForOf",t.orders)("ngForTrackBy",t.trackOrder)}}function NU(e,n){e&1&&(M(0,"p"),R(1,"Brak zam\xF3wie\u0144 dla wybranego stolika."),A())}var VT=(()=>{class e{orders=[];currentTableId=null;tableName=null;tableDescription=null;constructor(){Ce(Ie.firebaseConfig)}ngOnInit(){this.loadCurrentTable(),this.currentTableId?this.loadOrdersForTable():console.error("No current table found in local storage")}loadCurrentTable(){this.currentTableId=localStorage.getItem("currentTable"),console.log(this.currentTableId),this.currentTableId&&this.loadTableName()}loadTableName(){let t=K(),r=localStorage.getItem("restaurantid"),i=localStorage.getItem("ownerid");if(r&&i&&this.currentTableId){let o=Q(t,`Owners/${i}/Restaurants/${r}/Tables/${this.currentTableId}`);ue(o).then(l=>{if(l.exists()){let h=l.val();this.tableName=h.name,this.tableDescription=h.description}else console.log("No table found for the current ID")}).catch(l=>{console.error("Error loading table name:",l)})}}loadOrdersForTable(){let t=K(),r=localStorage.getItem("restaurantid"),i=localStorage.getItem("ownerid");if(r&&i&&this.currentTableId){let o=Q(t,`Owners/${i}/Restaurants/${r}/Orders`);ue(o).then(l=>{if(l.exists()){let h=l.val(),g=Object.values(h);this.orders=g.filter(m=>m.table_id===this.currentTableId),this.orders.sort((m,v)=>m.created_at<v.created_at?-1:m.created_at>v.created_at||m.completed_at&&!v.completed_at?1:!m.completed_at&&v.completed_at?-1:0)}else console.log("No orders found")}).catch(l=>{console.error("Error loading orders:",l)})}}markOrderAsCompleted(t){let r=K(),i=localStorage.getItem("restaurantid"),o=localStorage.getItem("ownerid");if(i&&o&&this.currentTableId){let l=Q(r,`Owners/${o}/Restaurants/${i}/Orders/${t.name}`);ut(l,{completed_at:Date.now()}).then(()=>{console.log(`Order ${t.name} marked as completed`),this.loadOrdersForTable()}).catch(h=>{console.error("Error marking order as completed:",h)})}}trackOrder(t,r){return r.name}static \u0275fac=function(r){return new(r||e)};static \u0275cmp=oe({type:e,selectors:[["app-waitertablelookup"]],standalone:!0,features:[se],decls:15,vars:4,consts:[["noOrders",""],[1,"order-list"],[4,"ngIf","ngIfElse"],["class","order-item",4,"ngFor","ngForOf","ngForTrackBy"],[1,"order-item"],[1,"order-name"],[3,"click","disabled"]],template:function(r,i){if(r&1&&(M(0,"div",1)(1,"h3"),R(2),A(),mt(3,OU,2,2,"div",2)(4,NU,2,0,"ng-template",null,0,IE),M(6,"button"),R(7,"Poka\u017C zrealizowane"),A(),R(8),M(9,"button"),R(10,"Oznacz wszystko jako zrealizowane"),A(),M(11,"button"),R(12,"dodaj zam\xF3wienie"),A(),M(13,"button"),R(14,"Zablokuj stolik"),A()()),r&2){let o=bo(5);V(2),xt("Stolik: ",i.tableName?i.tableName:"Nieznany stolik",""),V(),Ee("ngIf",i.orders.length>0)("ngIfElse",o),V(5),xt(" ",i.tableDescription?i.tableDescription:"Brak Opisu"," ")}},dependencies:[En,Da,pi],styles:[".table-container[_ngcontent-%COMP%]{padding:10px;border-radius:8px}.order-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:10px;margin:5px 0;background:#fff;border:1px solid #ccc;border-radius:5px}.order-item[_ngcontent-%COMP%]   img.active[_ngcontent-%COMP%]{filter:brightness(1.5)}"]})}return e})();var RU=(e,n,t)=>({"background-color":e,color:n,border:t}),PU=()=>({"background-color":"#ffffff",color:"#000000",border:"2px solid black"});function kU(e,n){e&1&&(M(0,"p"),R(1,"Brak zam\xF3wie\u0144 przypisanych do restauracji."),A())}function FU(e,n){if(e&1&&(M(0,"span",24),R(1),A()),e&2){let t=pe(3).$implicit,r=pe();V(),xt(" ",r.getTableName(t.table_id),"")}}function LU(e,n){if(e&1){let t=Tt();M(0,"button",19),j("click",function(){it(t);let i=pe(2).$implicit,o=pe();return ot(o.setTable(i.table_id))}),J(1,"div",20),R(2),M(3,"div",21)(4,"span",22),R(5),A(),mt(6,FU,2,1,"span",23),A()()}if(e&2){let t=pe(2).$implicit,r=pe();Ee("ngStyle",Ia(4,RU,r.getTableGroupColor(t.table_id),r.getTextColor(r.getTableGroupColor(t.table_id)),r.getTableGroupColor(t.table_id)==="#ffffff"||!r.getTableGroupColor(t.table_id)?"2px solid black":"none")),V(2),xt(" ",t.name," "),V(3),bt(r.getOrderAge(t.created_at)),V(),Ee("ngIf",r.getTableName(t.table_id))}}function BU(e,n){if(e&1){let t=Tt();M(0,"button",19),j("click",function(){it(t);let i=pe(2).$implicit,o=pe();return ot(o.setTable(i.table_id))}),J(1,"div",20),R(2),M(3,"div",21)(4,"span",22),R(5),A()()()}if(e&2){let t=pe(2).$implicit,r=pe();Ee("ngStyle",nc(3,PU)),V(2),xt(" ",t.name," "),V(3),bt(r.getOrderAge(t.created_at))}}function UU(e,n){if(e&1&&(gs(0),mt(1,LU,7,8,"button",18)(2,BU,6,4,"button",18),ms()),e&2){let t=pe().$implicit;V(),Ee("ngIf",t.table_id),V(),Ee("ngIf",!t.table_id)}}function VU(e,n){if(e&1&&(gs(0),mt(1,UU,3,2,"ng-container",13),ms()),e&2){let t=n.$implicit;V(),Ee("ngIf",!t.completed_at||!t.canceled_at)}}var jT=(()=>{class e{navigationService;orders=[];tables=[];tableGroups={};refreshInterval;isMenuOpen=!1;constructor(t){this.navigationService=t;let r=Ce(Ie.firebaseConfig)}toggleMenu(){this.isMenuOpen=!this.isMenuOpen}ngOnInit(){this.loadOrders(),this.loadTables(),this.loadTableGroups(),this.refreshInterval=setInterval(()=>{this.loadOrders()},15e3)}ngOnDestroy(){this.refreshInterval&&clearInterval(this.refreshInterval)}loadOrders(){let t=K(),r=localStorage.getItem("restaurantid"),i=localStorage.getItem("ownerid");if(!r||!i){console.error("No current restaurant or owner found");return}let o=Q(t,`Owners/${i}/Restaurants/${r}/Orders`);ue(o).then(l=>{if(l.exists()){let h=l.val();this.orders=Object.values(h),this.orders.sort((g,m)=>g.created_at<m.created_at?-1:g.created_at>m.created_at||g.completed_at&&!m.completed_at?1:!g.completed_at&&m.completed_at?-1:0)}else console.log("No orders found")}).catch(l=>{console.error("Error loading orders:",l)})}loadTables(){let t=K(),r=localStorage.getItem("restaurantid"),i=localStorage.getItem("ownerid");if(!r||!i){console.error("No current restaurant or owner found");return}let o=Q(t,`Owners/${i}/Restaurants/${r}/Tables`);ue(o).then(l=>{if(l.exists()){let h=l.val();this.tables=Object.values(h)}else console.log("No tables found")}).catch(l=>{console.error("Error loading tables:",l)})}loadTableGroups(){let t=K(),r=localStorage.getItem("restaurantid"),i=localStorage.getItem("ownerid");if(!r||!i){console.error("No current restaurant or owner found");return}let o=Q(t,`Owners/${i}/Restaurants/${r}/TableGroups`);ue(o).then(l=>{if(l.exists()){let h=l.val();this.tableGroups=h}else console.log("No table groups found")}).catch(l=>{console.error("Error loading table groups:",l)})}getOrderAge(t){let i=Date.now()-t,o=Math.floor(i/1e3),l=Math.floor(o/60),h=Math.floor(l/60),g=Math.floor(h/24);return g>0?g===1?"1 d.":`${g} d.`:h>0?h===1?"1 godz.":`${h} godz.`:l>0?l===1?"1 min.":`${l} min.`:o===1?"1 s.":`${o} s.`}getTableName(t){let r=this.tables.find(i=>i.id===t);return r?r.name:null}setTable(t){localStorage.setItem("currentTable",t),this.goToPage("waitertablelookup")}goToPage(t){this.navigationService.NavigateTo(t)}trackOrder(t,r){return r.name}getTableGroupColor(t){let r=this.tables.find(i=>i.id===t);return r&&r.group_id&&this.tableGroups[r.group_id]?this.tableGroups[r.group_id].color:"white"}getTextColor(t){let r=t.replace("#",""),i=parseInt(r.substring(0,2),16),o=parseInt(r.substring(2,4),16),l=parseInt(r.substring(4,6),16);return(i*299+o*587+l*114)/1e3>125?"black":"white"}static \u0275fac=function(r){return new(r||e)(W(Se))};static \u0275cmp=oe({type:e,selectors:[["app-waiterorderlist"]],standalone:!0,features:[se],decls:34,vars:7,consts:[[1,"sidebar"],[1,"overlay"],[1,"first"],[3,"click"],[1,"selem",3,"click"],[1,"active",3,"click"],[1,"layoutbox"],[1,"head"],[1,"logo"],["src","https://cdn1.mandarin.com.pl/eologo.png","alt","EasyOrder",1,"w-full"],[1,"backbtn",3,"click"],[1,"material-symbols-rounded"],[1,"buttons"],[4,"ngIf"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"footstatic"],["src","https://cdn1.mandarin.com.pl/eocamera.svg","alt",""],["src","https://cdn1.mandarin.com.pl/eoaddorder.svg","alt",""],["class","table-button",3,"ngStyle","click",4,"ngIf"],[1,"table-button",3,"click","ngStyle"],[1,"flexhead"],[1,"flexfoot"],[1,"order-time"],["class","order-table",4,"ngIf"],[1,"order-table"]],template:function(r,i){r&1&&(M(0,"main")(1,"div",0)(2,"div",1)(3,"ul")(4,"li",2)(5,"span",3),j("click",function(){return i.toggleMenu()}),R(6,"X"),A()(),M(7,"div"),R(8,"Moje zam\xF3wienia: "),M(9,"li",4),j("click",function(){return i.goToPage("tablemanage")}),R(10,"Nowe"),A(),M(11,"li",3),j("click",function(){return i.goToPage("restaurantrevievs")}),R(12,"Wydane"),A()(),M(13,"div"),R(14,"Wszystkie Zam\xF3wienia: "),M(15,"li",5),j("click",function(){return i.goToPage("waiterorderlist")}),R(16,"Nowe"),A(),M(17,"li",3),j("click",function(){return i.goToPage("waitertablelist")}),R(18,"Wydane"),A()()()()(),M(19,"div",6)(20,"div",7)(21,"div",8),J(22,"img",9),A(),M(23,"div",10),j("click",function(){return i.toggleMenu()}),M(24,"span",11),R(25,"menu"),A()()(),M(26,"div",12),mt(27,kU,2,0,"p",13)(28,VU,2,1,"ng-container",14),A(),M(29,"div",15)(30,"button",3),j("click",function(){return i.goToPage("waiterscan")}),J(31,"img",16),A(),M(32,"button",3),j("click",function(){return i.goToPage("addorder")}),J(33,"img",17),A()()()()),r&2&&(V(),pr("active",i.isMenuOpen),V(),pr("active",i.isMenuOpen),V(25),Ee("ngIf",i.orders.length===0),V(),Ee("ngForOf",i.orders)("ngForTrackBy",i.trackOrder))},dependencies:[En,Da,pi,Eo],styles:['@font-face{font-family:Varela Round;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/varelaround/v20/w8gdH283Tvk__Lua32TysjIfpcuPP9g.woff2) format("woff2");unicode-range:U+0307-0308,U+0590-05FF,U+200C-2010,U+20AA,U+25CC,U+FB1D-FB4F}@font-face{font-family:Varela Round;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/varelaround/v20/w8gdH283Tvk__Lua32TysjIfqMuPP9g.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Varela Round;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/varelaround/v20/w8gdH283Tvk__Lua32TysjIfqcuPP9g.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Varela Round;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/varelaround/v20/w8gdH283Tvk__Lua32TysjIfp8uP.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;justify-content:space-between;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{width:100%;height:64px;padding:0 32px;border-bottom:3px solid #000;display:flex;justify-content:space-between;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{margin:8px 0;height:48px}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%;z-index:99999}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .backbtn[_ngcontent-%COMP%]{height:48px;font-size:48px;font-weight:700;display:flex;justify-content:center;align-items:center;margin:8px 0}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .backbtn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{height:48px;font-size:48px;font-weight:700}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{width:100%;height:100%;overflow-y:auto;overflow-x:hidden;display:flex;flex-direction:row;flex-wrap:wrap;justify-content:flex-start;align-items:flex-start;align-content:flex-start}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:114px;height:114px;border-radius:16px;margin:8px;font-size:200%;font-weight:bolder}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .footstatic[_ngcontent-%COMP%]{width:100%;border-top:black 3px solid;padding:8px;display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .footstatic[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:calc(50% - 8px);border:2px solid black;border-radius:16px;color:#000;background:#fff;padding:16px;font-size:110%;font-weight:bolder;display:flex;justify-content:center;align-items:center;align-content:center}.sidebar[_ngcontent-%COMP%]{position:fixed;top:0;right:-100%;width:100%;height:100%;background-color:#00000040;box-shadow:-2px 0 5px #00000080;-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px);transition:right .3s ease;z-index:999}.sidebar.active[_ngcontent-%COMP%]{right:0}.sidebar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin-top:0;list-style:none;padding:0}.sidebar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{border-top:3px solid black;border-bottom:3px solid black;padding:16px;font-weight:700;margin:0}.sidebar[_ngcontent-%COMP%]   li.first[_ngcontent-%COMP%]{text-align:right;padding-top:0;padding-bottom:0;border-top:0;padding-right:32px;height:64px;display:flex;flex-direction:row;flex-wrap:wrap;justify-content:flex-end;align-items:center;align-content:center}.sidebar[_ngcontent-%COMP%]   li.first[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{height:48px;width:48px;font-size:32px;font-weight:700;font-family:Varela Round,sans-serif}.sidebar[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]{background:#000;color:#fff}.overlay[_ngcontent-%COMP%]{position:fixed;top:0;right:-250px;width:250px;height:100%;background-color:#fff;box-shadow:-2px 0 5px #00000080;transition:right .3s ease}.overlay.active[_ngcontent-%COMP%]{right:0}.flexfoot[_ngcontent-%COMP%]{padding-left:4px;padding-right:4px;width:100%;font-size:45%;display:flex;flex-direction:row;flex-wrap:wrap;justify-content:space-between;align-items:center;align-content:flex-end}.table-button[_ngcontent-%COMP%]{font-size:125%!important;padding:4px;display:flex;flex-direction:column;flex-wrap:wrap;justify-content:space-between;align-items:center;align-content:flex-end}.sidebar[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{margin-top:48px;font-size:110%;font-weight:bolder}.selem[_ngcontent-%COMP%]{border-bottom:0px!important}']})}return e})();var HT=(()=>{class e{navigationService;tableId=null;uniqueLinkToken=null;ownerId=null;restaurantid=null;html5QrCodeScanner=null;constructor(t){this.navigationService=t}ngAfterViewInit(){this.html5QrCodeScanner=new xu("reader",{fps:10,qrbox:{width:250,height:250}},!1),this.html5QrCodeScanner.render(this.onScanSuccess.bind(this),this.onScanFailure)}onScanSuccess(t){let r=new URL(t),i=r.searchParams.get("t"),o=r.searchParams.get("u"),l=r.searchParams.get("r"),h=r.searchParams.get("o");i?(this.tableId=i,this.uniqueLinkToken=o,this.restaurantid=l,this.ownerId=h,localStorage.setItem("customercurrentTable",this.tableId),localStorage.setItem("uniqueLinkToken",this.uniqueLinkToken),localStorage.setItem("restaurantid",this.restaurantid),localStorage.setItem("ownerid",this.ownerId),this.navigationService.NavigateTo("tableordered"),console.log("Table ID saved:",this.tableId)):console.error("Table ID not found in the scanned QR code."),this.html5QrCodeScanner?.clear()}onScanFailure(t){console.warn(`QR code scan error: ${t}`)}ngOnDestroy(){this.html5QrCodeScanner?.clear()}static \u0275fac=function(r){return new(r||e)(W(Se))};static \u0275cmp=oe({type:e,selectors:[["app-waiterscan"]],standalone:!0,features:[se],decls:7,vars:0,consts:[[1,"layoutbox"],[1,"head"],[1,"logo"],["src","https://cdn1.mandarin.com.pl/eologo.png","alt","EasyOrder"],["id","reader",2,"width","300px"],[1,"footstatic"]],template:function(r,i){r&1&&(M(0,"main")(1,"div",0)(2,"div",1)(3,"div",2),J(4,"img",3),A()(),J(5,"div",4)(6,"div",5),A()())},styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;justify-content:space-between;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{width:100%;height:64px;padding:0 32px;border-bottom:3px solid #000;display:flex;justify-content:space-between;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{margin:8px 0;height:48px}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .backbtn[_ngcontent-%COMP%]{height:48px;font-size:48px;font-weight:700;display:flex;justify-content:center;align-items:center;margin:8px 0}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .backbtn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{height:48px;font-size:48px;font-weight:700}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{width:75%;display:flex;flex-direction:column;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-weight:bolder;font-size:140%;margin-bottom:24px}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;background:#fff;padding:16px;font-size:110%;border-radius:16px;color:#000;font-weight:600;letter-spacing:2px;border:3px solid #000;transition:all .5s;margin-bottom:24px}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#333}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;background:#000;padding:16px;font-size:110%;color:#fff;font-weight:600;letter-spacing:2px;border:none;transition:all .5s;border-radius:16px;cursor:pointer}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#333}#reader[_ngcontent-%COMP%]{width:300px;height:300px;border-radius:16px;border:3px black solid;display:flex;flex-direction:column;flex-wrap:wrap;justify-content:center;align-items:center;align-content:center}#reader[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:none!important}#reader__scan_region[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-wrap:wrap;justify-content:center;align-items:center;align-content:center}"]})}return e})();var zT=(()=>{class e{navigationService;tableId=null;table=null;tableGroupName=null;groupColor=null;uniqueLinkToken=null;waiterId=null;ownerId=null;restaurantId=null;constructor(t){this.navigationService=t,Ce(Ie.firebaseConfig)}ngOnInit(){this.loadTable(),this.loadUniqueLinkToken()}loadUniqueLinkToken(){let t=K();this.ownerId=sessionStorage.getItem("userId"),this.restaurantId=localStorage.getItem("currentRestaurant"),this.waiterId=localStorage.getItem("waiterId");let r=Q(t,`Owners/${this.ownerId}/Restaurants/${this.restaurantId}/uniqueLinkToken`);ue(r).then(i=>{i.exists()?this.uniqueLinkToken=i.val():console.log("No unique link token found")}).catch(i=>{console.error("Error loading unique link token:",i)})}deleteTable(){let t=K(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant");if(!this.tableId||!r||!i){console.error("Missing table, owner, or restaurant ID");return}let o=Q(t,`Owners/${r}/Restaurants/${i}/Tables/${this.tableId}`);nr(o).then(()=>{console.log("Table deleted successfully"),this.navigationService.NavigateTo("tablemanage")}).catch(l=>{console.error("Error deleting table:",l)})}blockTable(){let t=K(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant");if(!this.tableId||!r||!i){console.error("Missing table, owner, or restaurant ID");return}let o=Q(t,`Owners/${r}/Restaurants/${i}/Tables/${this.tableId}`);ut(o,{is_blocked:!0}).then(()=>{console.log("Table blocked successfully"),location.reload()}).catch(l=>{console.error("Error blocking table:",l)})}unlockTable(){let t=K(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant");if(!this.tableId||!r||!i){console.error("Missing table, owner, or restaurant ID");return}let o=Q(t,`Owners/${r}/Restaurants/${i}/Tables/${this.tableId}`);ut(o,{is_blocked:!1}).then(()=>{console.log("Table unlocked successfully"),location.reload()}).catch(l=>{console.error("Error unlocking table:",l)})}saveTable(){}loadTable(){if(this.tableId=localStorage.getItem("currentTable"),!this.tableId){console.error("No current table found in local storage");return}let t=K(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant"),o=Q(t,`Owners/${r}/Restaurants/${i}/Tables/${this.tableId}`);ue(o).then(l=>{l.exists()?(this.table=l.val(),this.loadTableGroup()):console.log("No table found")}).catch(l=>{console.error("Error loading table:",l)})}loadTableGroup(){let t=K(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant");if(!this.table?.group_id||this.table.group_id==="0g"){this.tableGroupName="Stoliki bez grupy",this.groupColor="#000000";return}let o=Q(t,`Owners/${r}/Restaurants/${i}/TableGroups/${this.table.group_id}`);ue(o).then(l=>{if(l.exists()){let h=l.val();this.tableGroupName=h.name,this.groupColor=h.color}else console.log("No group found for this table")}).catch(l=>{console.error("Error loading group:",l)})}getQRCodeData(){let t=this.table?.id||"",r=this.uniqueLinkToken||"",i=sessionStorage.getItem("userId"),o=localStorage.getItem("currentRestaurant");return`https://easyorder.mandarin.com.pl/settable?tableid=${t}&uniqueLinkToken=${r}&ownerid=${i}&restaurantid=${o}`}static \u0275fac=function(r){return new(r||e)(W(Se))};static \u0275cmp=oe({type:e,selectors:[["app-waiterqrcode"]],standalone:!0,features:[se],decls:4,vars:17,consts:[[1,"qrcodeImage"],[3,"qrdata","allowEmptyString","alt","ariaLabel","cssClass","colorDark","colorLight","elementType","errorCorrectionLevel","margin","scale","title","width"]],template:function(r,i){r&1&&(M(0,"main")(1,"div",0),J(2,"qrcode",1),R(3),A()()),r&2&&(V(2),Ee("qrdata","https://easyorder.mandarin.com.pl/waiterauth?u="+i.uniqueLinkToken+"&o="+i.ownerId+"&r="+i.restaurantId+"&w="+i.waiterId)("allowEmptyString",!0)("alt","A custom alt attribute")("ariaLabel","QR Code image with the following content...")("cssClass","center")("colorDark","#000000ff")("colorLight","#ffffffff")("elementType","img")("errorCorrectionLevel","H")("margin",4)("scale",1)("title","A custom title attribute")("width",300),V(),zm(" https://easyorder.mandarin.com.pl/waiterauth?u=",i.uniqueLinkToken,"&o=",i.ownerId,"&r=",i.restaurantId,"&w=",i.waiterId," "))},dependencies:[Ho,jo]})}return e})();var WT=(()=>{class e{navigationService;orderNumber="";constructor(t){this.navigationService=t,Ce(Ie.firebaseConfig)}addOrder(){let t=K(),r=localStorage.getItem("ownerid"),i=localStorage.getItem("restaurantid");if(!r||!i){console.error("Brak wymaganych danych");return}let o=Date.now().toString(),l={name:this.orderNumber,waiter_get_order_at_table:!0,created_at:Date.now(),canceled_at:null,completed_at:null,table_id:"",waiter_set_order_number:!0,table_id_entered_by_waiter:!1,completed_during_table_clean:!1},h=Q(t,`Owners/${r}/Restaurants/${i}/Orders/${this.orderNumber}`);Fo(h,l).then(()=>{console.log("Zam\xF3wienie dodane pomy\u015Blnie"),this.orderNumber="",this.navigationService.NavigateTo("waiterorderlist")}).catch(g=>{console.error("B\u0142\u0105d podczas dodawania zam\xF3wienia:",g)})}static \u0275fac=function(r){return new(r||e)(W(Se))};static \u0275cmp=oe({type:e,selectors:[["app-addorder"]],standalone:!0,features:[se],decls:13,vars:1,consts:[[1,"layoutbox"],[1,"head"],[1,"logo"],["src","https://cdn1.mandarin.com.pl/eologo.png","alt","EasyOrder"],[1,"backbtn"],[1,"loginform"],["type","text","maxlength","6","id","orderNumber",3,"ngModelChange","ngModel"],[3,"click"],[1,"footstatic"]],template:function(r,i){r&1&&(M(0,"main")(1,"div",0)(2,"div",1)(3,"div",2),J(4,"img",3),A(),J(5,"div",4),A(),M(6,"div",5)(7,"label"),R(8,"Wprowad\u017A numer zam\xF3wienia"),A(),M(9,"input",6),at("ngModelChange",function(l){return lt(i.orderNumber,l)||(i.orderNumber=l),l}),A(),M(10,"button",7),j("click",function(){return i.addOrder()}),R(11,"Dodaj zam\xF3wienie"),A()(),J(12,"div",8),A()()),r&2&&(V(9),st("ngModel",i.orderNumber))},dependencies:[Wt,Kt,gn,J1,cn],styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;justify-content:space-between;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{width:100%;height:64px;padding:0 32px;border-bottom:3px solid #000;display:flex;justify-content:space-between;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{margin:8px 0;height:48px}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .backbtn[_ngcontent-%COMP%]{height:48px;font-size:48px;font-weight:700;display:flex;justify-content:center;align-items:center;margin:8px 0}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .backbtn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{height:48px;font-size:48px;font-weight:700}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]{width:75%;display:flex;flex-direction:column;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:bolder;font-size:200%;margin-bottom:24px}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;background:#fff;padding:16px;font-size:110%;border-radius:16px;color:#000;font-weight:600;letter-spacing:2px;border:3px solid #000;transition:all .5s;margin-bottom:24px}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#333}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;background:#000;padding:16px;font-size:110%;color:#fff;font-weight:600;letter-spacing:2px;border:none;transition:all .5s;border-radius:16px;cursor:pointer}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#333}"]})}return e})();function jU(e,n){if(e&1&&(M(0,"option",9),R(1),A()),e&2){let t=pe().$implicit;Ee("value",t.id),V(),bt(t.name)}}function HU(e,n){if(e&1&&(M(0,"option",10),R(1),A()),e&2){let t=pe().$implicit;Ee("value",t.id),V(),bt(t.name)}}function zU(e,n){if(e&1&&mt(0,jU,2,2,"option",9)(1,HU,2,2,"option",10),e&2){let t=n.$implicit,r=pe();zn(t.id==r.table.group_id?0:-1),V(),zn(t.id!=r.table.group_id?1:-1)}}var GT=(()=>{class e{navigationService;table={id:"",name:"",group_id:"",description:"",is_blocked:!1};tableGroups=[];restaurantId="";constructor(t){this.navigationService=t,Ce(Ie.firebaseConfig)}ngOnInit(){this.loadEditedTable(),this.loadTableGroups()}loadEditedTable(){let t=localStorage.getItem("currentTable"),r=sessionStorage.getItem("userId");if(this.restaurantId=localStorage.getItem("currentRestaurant")??"",!t||!r||!this.restaurantId){console.error("Missing table, owner, or restaurant ID");return}let i=K(),o=Q(i,`Owners/${r}/Restaurants/${this.restaurantId}/Tables/${t}`);ue(o).then(l=>{l.exists()?this.table=l.val():console.log("No table found")}).catch(l=>{console.error("Error loading table:",l)})}loadTableGroups(){let t=sessionStorage.getItem("userId"),r=localStorage.getItem("currentRestaurant");if(!t||!r){console.error("Missing owner or restaurant ID");return}let i=K(),o=Q(i,`Owners/${t}/Restaurants/${r}/TableGroups`);ue(o).then(l=>{l.exists()?this.tableGroups=Object.values(l.val()):console.log("No table groups found")}).catch(l=>{console.error("Error loading table groups:",l)})}saveChanges(){let t=sessionStorage.getItem("userId"),r=localStorage.getItem("currentRestaurant"),i=localStorage.getItem("currentTable");if(!t||!r||!i){console.error("Missing owner, restaurant, or table ID");return}let o=K(),l=Q(o,`Owners/${t}/Restaurants/${r}/Tables/${i}`);ut(l,{name:this.table.name,group_id:this.table.group_id,description:this.table.description,is_blocked:this.table.is_blocked}).then(()=>{console.log("Table updated successfully"),this.navigationService.NavigateTo("tablemanage")}).catch(h=>{console.error("Error updating table:",h)})}static \u0275fac=function(r){return new(r||e)(W(Se))};static \u0275cmp=oe({type:e,selectors:[["app-tableeditnew"]],standalone:!0,features:[se],decls:15,vars:5,consts:[[1,"panel"],[3,"ngSubmit"],["for","table-name"],["id","table-name","type","text","name","tableName","required","",3,"ngModelChange","ngModel","value"],["for","group"],["id","group","name","groupId",3,"ngModelChange","ngModel"],["for","description"],["id","description","name","description","rows","4",3,"ngModelChange","ngModel","value"],["type","submit"],["selected","",3,"value"],[3,"value"]],template:function(r,i){r&1&&(M(0,"div",0)(1,"form",1),j("ngSubmit",function(){return i.saveChanges()}),M(2,"label",2),R(3,"Nazwa stolika"),A(),M(4,"input",3),at("ngModelChange",function(l){return lt(i.table.name,l)||(i.table.name=l),l}),A(),M(5,"label",4),R(6,"Grupa"),A(),M(7,"select",5),at("ngModelChange",function(l){return lt(i.table.group_id,l)||(i.table.group_id=l),l}),Pn(8,zU,2,2,null,null,Rn),A(),M(10,"label",6),R(11,"Opis"),A(),M(12,"textarea",7),at("ngModelChange",function(l){return lt(i.table.description,l)||(i.table.description=l),l}),A(),M(13,"button",8),R(14,"Zapisz zmiany"),A()()()),r&2&&(V(4),st("ngModel",i.table.name),Ee("value",i.table.name),V(3),st("ngModel",i.table.group_id),V(),kn(i.tableGroups),V(4),st("ngModel",i.table.description),Ee("value",i.table.description))},dependencies:[Wt,tr,Ch,wh,Kt,ja,gn,er,Sn,cn,Wn],styles:[".panel[_ngcontent-%COMP%]{padding:16px;border:1px solid #000;width:300px;margin:0 auto}label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-weight:700}input[_ngcontent-%COMP%], select[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{width:100%;margin-bottom:16px;padding:8px;border:1px solid #ccc}button[_ngcontent-%COMP%]{width:100%;padding:10px;background-color:#000;color:#fff;border:none;cursor:pointer}"]})}return e})();var $T=(()=>{class e{navigationService;messagesService;group={id:"",name:"",color:"",description:"",location:""};constructor(t,r){this.navigationService=t,this.messagesService=r,Ce(Ie.firebaseConfig)}ngOnInit(){this.loadGroupData()}loadGroupData(){let t=localStorage.getItem("currentGroup"),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant");if(!t||!r||!i){console.error("Missing group, owner, or restaurant ID");return}let o=K(),l=Q(o,`Owners/${r}/Restaurants/${i}/TableGroups/${t}`);ue(l).then(h=>{h.exists()?this.group=h.val():console.log("No group found")}).catch(h=>{console.error("Error loading group:",h)})}saveChanges(){let t=sessionStorage.getItem("userId"),r=localStorage.getItem("currentRestaurant"),i=localStorage.getItem("currentGroup");if(!t||!r||!i){console.error("Missing owner, restaurant, or group ID");return}let o=K(),l=Q(o,`Owners/${t}/Restaurants/${r}/TableGroups/${i}`);ut(l,{name:this.group.name,color:this.group.color,description:this.group.description,location:this.group.location}).then(()=>{console.log("Group updated successfully"),this.navigationService.NavigateTo("tablegroupmanage")}).catch(h=>{console.error("Error updating group:",h)})}deleteGroup(){this.messagesService.askUser("Czy napewno usun\u0105\u0107 restauracj\u0119?",()=>{this.deleteGroup2()},()=>{console.log("Deletion canceled")})}deleteGroup2(){let t=K(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant"),o=localStorage.getItem("currentGroup");if(!o||!r||!i){console.error("Missing table, owner, or restaurant ID");return}let l=Q(t,`Owners/${r}/Restaurants/${i}/TableGroups/${o}`);nr(l).then(()=>{console.log("Table deleted successfully"),this.navigationService.NavigateTo("tablegroupmanage")}).catch(h=>{console.error("Error deleting table:",h)})}static \u0275fac=function(r){return new(r||e)(W(Se),W(So))};static \u0275cmp=oe({type:e,selectors:[["app-groupedit"]],standalone:!0,features:[se],decls:21,vars:4,consts:[[3,"ngSubmit"],["for","name"],["id","name","name","name","required","",3,"ngModelChange","ngModel"],["for","color"],["id","color","name","color","required","",3,"ngModelChange","ngModel"],["for","description"],["id","description","name","description",3,"ngModelChange","ngModel"],["for","location"],["id","location","name","location",3,"ngModelChange","ngModel"],["type","submit"],[3,"click"]],template:function(r,i){r&1&&(M(0,"form",0),j("ngSubmit",function(){return i.saveChanges()}),M(1,"div")(2,"label",1),R(3,"Nazwa:"),A(),M(4,"input",2),at("ngModelChange",function(l){return lt(i.group.name,l)||(i.group.name=l),l}),A()(),M(5,"div")(6,"label",3),R(7,"Kolor:"),A(),M(8,"input",4),at("ngModelChange",function(l){return lt(i.group.color,l)||(i.group.color=l),l}),A()(),M(9,"div")(10,"label",5),R(11,"Opis:"),A(),M(12,"textarea",6),at("ngModelChange",function(l){return lt(i.group.description,l)||(i.group.description=l),l}),A()(),M(13,"div")(14,"label",7),R(15,"Lokalizacja:"),A(),M(16,"input",8),at("ngModelChange",function(l){return lt(i.group.location,l)||(i.group.location=l),l}),A()(),M(17,"button",9),R(18,"Zapisz zmiany"),A()(),M(19,"button",10),j("click",function(){return i.deleteGroup()}),R(20,"Usu\u0144 grup\u0119"),A()),r&2&&(V(4),st("ngModel",i.group.name),V(4),st("ngModel",i.group.color),V(4),st("ngModel",i.group.description),V(4),st("ngModel",i.group.location))},dependencies:[Wt,tr,Kt,gn,er,Sn,cn,Wn]})}return e})();var qT=(()=>{class e{navigationService;tableId=null;table=null;tableGroupName=null;groupColor=null;uniqueLinkToken=null;ownerId=null;restaurantId=null;constructor(t){this.navigationService=t,Ce(Ie.firebaseConfig)}printQRCodePage(){window.print()}ngOnInit(){this.loadTable(),this.loadUniqueLinkToken()}loadUniqueLinkToken(){let t=K();this.ownerId=sessionStorage.getItem("userId"),this.restaurantId=localStorage.getItem("currentRestaurant");let r=Q(t,`Owners/${this.ownerId}/Restaurants/${this.restaurantId}/uniqueLinkToken`);ue(r).then(i=>{i.exists()?this.uniqueLinkToken=i.val():console.log("No unique link token found")}).catch(i=>{console.error("Error loading unique link token:",i)})}deleteTable(){let t=K(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant");if(!this.tableId||!r||!i){console.error("Missing table, owner, or restaurant ID");return}let o=Q(t,`Owners/${r}/Restaurants/${i}/Tables/${this.tableId}`);nr(o).then(()=>{console.log("Table deleted successfully"),this.navigationService.NavigateTo("tablemanage")}).catch(l=>{console.error("Error deleting table:",l)})}blockTable(){let t=K(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant");if(!this.tableId||!r||!i){console.error("Missing table, owner, or restaurant ID");return}let o=Q(t,`Owners/${r}/Restaurants/${i}/Tables/${this.tableId}`);ut(o,{is_blocked:!0}).then(()=>{console.log("Table blocked successfully"),location.reload()}).catch(l=>{console.error("Error blocking table:",l)})}unlockTable(){let t=K(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant");if(!this.tableId||!r||!i){console.error("Missing table, owner, or restaurant ID");return}let o=Q(t,`Owners/${r}/Restaurants/${i}/Tables/${this.tableId}`);ut(o,{is_blocked:!1}).then(()=>{console.log("Table unlocked successfully"),location.reload()}).catch(l=>{console.error("Error unlocking table:",l)})}saveTable(){}loadTable(){if(this.tableId=localStorage.getItem("currentTable"),!this.tableId){console.error("No current table found in local storage");return}let t=K(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant"),o=Q(t,`Owners/${r}/Restaurants/${i}/Tables/${this.tableId}`);ue(o).then(l=>{l.exists()?(this.table=l.val(),this.loadTableGroup()):console.log("No table found")}).catch(l=>{console.error("Error loading table:",l)})}loadTableGroup(){let t=K(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant");if(!this.table?.group_id||this.table.group_id==="0g"){this.tableGroupName="Stoliki bez grupy",this.groupColor="#000000";return}let o=Q(t,`Owners/${r}/Restaurants/${i}/TableGroups/${this.table.group_id}`);ue(o).then(l=>{if(l.exists()){let h=l.val();this.tableGroupName=h.name,this.groupColor=h.color}else console.log("No group found for this table")}).catch(l=>{console.error("Error loading group:",l)})}getQRCodeData(){let t=this.table?.id||"",r=this.uniqueLinkToken||"",i=sessionStorage.getItem("userId"),o=localStorage.getItem("currentRestaurant");return`https://easyorder.mandarin.com.pl/settable?tableid=${t}&uniqueLinkToken=${r}&ownerid=${i}&restaurantid=${o}`}static \u0275fac=function(r){return new(r||e)(W(Se))};static \u0275cmp=oe({type:e,selectors:[["app-cashpointqrcode"]],standalone:!0,features:[se],decls:6,vars:13,consts:[[3,"click"],[1,"qrcodeImage"],[3,"qrdata","allowEmptyString","alt","ariaLabel","cssClass","colorDark","colorLight","elementType","errorCorrectionLevel","margin","scale","title","width"]],template:function(r,i){r&1&&(M(0,"main")(1,"div")(2,"button",0),j("click",function(){return i.printQRCodePage()}),R(3,"Print QR Code"),A()(),M(4,"div",1),J(5,"qrcode",2),A()()),r&2&&(V(5),Ee("qrdata","https://easyorder.mandarin.com.pl/setorder")("allowEmptyString",!0)("alt","A custom alt attribute")("ariaLabel","QR Code image with the following content...")("cssClass","center")("colorDark","#000000ff")("colorLight","#ffffffff")("elementType","img")("errorCorrectionLevel","H")("margin",4)("scale",1)("title","A custom title attribute")("width",300))},dependencies:[Ho,jo],styles:["@media print{button[_ngcontent-%COMP%]{display:none}.qr-code-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-between;margin:0;padding:0}.qr-code-box[_ngcontent-%COMP%]{width:calc(50% - 10px);height:565px;margin:5px;text-align:center;page-break-inside:avoid}.qr-code-container[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:nth-child(2n){page-break-after:always}body[_ngcontent-%COMP%]{background-color:#fff;margin:0}}"]})}return e})();var YT=[{path:"",component:Y_},{path:"landingpage",component:Y_},{path:"register",component:UD},{path:"login",component:LD},{path:"newrestaurant",component:VD},{path:"managerestaurant",component:jD},{path:"changerestaurant",component:HD},{path:"restaurantbilings",component:zD},{path:"restaurantsettings",component:WD},{path:"tablemanage",component:qD},{path:"tablecreate",component:YD},{path:"tableedit",component:ZD},{path:"restaurantstats",component:$D},{path:"restaurantrevievs",component:GD},{path:"settable",component:XD},{path:"tablegroupcreate",component:KD},{path:"tablegroupmanage",component:QD},{path:"showtableqr",component:tT},{path:"tablesettings",component:nT},{path:"waitersettings",component:rT},{path:"alltablesqrcodes",component:iT},{path:"tableordered",component:sT},{path:"scanqrcode",component:FT},{path:"setorder",component:LT},{path:"waiterauth",component:BT},{path:"waitertablelist",component:UT},{path:"waitertablelookup",component:VT},{path:"waiterorderlist",component:jT},{path:"waiterscan",component:HT},{path:"waiterqrcode",component:zT},{path:"addorder",component:WT},{path:"tableeedit",component:GT},{path:"groupedit",component:$T},{path:"cashpointqrcode",component:qT}];oI(qI,{providers:[WI(YT),{provide:Wt},aI()]});
