var AT=Object.create;var Wp=Object.defineProperty,TT=Object.defineProperties,OT=Object.getOwnPropertyDescriptor,NT=Object.getOwnPropertyDescriptors,RT=Object.getOwnPropertyNames,Ru=Object.getOwnPropertySymbols,PT=Object.getPrototypeOf,Gp=Object.prototype.hasOwnProperty,K_=Object.prototype.propertyIsEnumerable;var Q_=(e,n,t)=>n in e?Wp(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,re=(e,n)=>{for(var t in n||={})Gp.call(n,t)&&Q_(e,t,n[t]);if(Ru)for(var t of Ru(n))K_.call(n,t)&&Q_(e,t,n[t]);return e},Be=(e,n)=>TT(e,NT(n));var J_=(e,n)=>{var t={};for(var r in e)Gp.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(e!=null&&Ru)for(var r of Ru(e))n.indexOf(r)<0&&K_.call(e,r)&&(t[r]=e[r]);return t};var ft=(e,n)=>()=>(n||e((n={exports:{}}).exports,n),n.exports);var kT=(e,n,t,r)=>{if(n&&typeof n=="object"||typeof n=="function")for(let i of RT(n))!Gp.call(e,i)&&i!==t&&Wp(e,i,{get:()=>n[i],enumerable:!(r=OT(n,i))||r.enumerable});return e};var ew=(e,n,t)=>(t=e!=null?AT(PT(e)):{},kT(n||!e||!e.__esModule?Wp(t,"default",{value:e,enumerable:!0}):t,e));var Yt=(e,n,t)=>new Promise((r,i)=>{var o=g=>{try{h(t.next(g))}catch(m){i(m)}},c=g=>{try{h(t.throw(g))}catch(m){i(m)}},h=g=>g.done?r(g.value):Promise.resolve(g.value).then(o,c);h((t=t.apply(e,n)).next())});var YD=ft((TX,qD)=>{"use strict";qD.exports=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}});var Ro=ft(As=>{"use strict";var $C,G7=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];As.getSymbolSize=function(n){if(!n)throw new Error('"version" cannot be null or undefined');if(n<1||n>40)throw new Error('"version" should be in range from 1 to 40');return n*4+17};As.getSymbolTotalCodewords=function(n){return G7[n]};As.getBCHDigit=function(e){let n=0;for(;e!==0;)n++,e>>>=1;return n};As.setToSJISFunction=function(n){if(typeof n!="function")throw new Error('"toSJISFunc" is not a valid function.');$C=n};As.isKanjiModeEnabled=function(){return typeof $C<"u"};As.toSJIS=function(n){return $C(n)}});var np=ft(Tr=>{"use strict";Tr.L={bit:1};Tr.M={bit:0};Tr.Q={bit:3};Tr.H={bit:2};function $7(e){if(typeof e!="string")throw new Error("Param is not a string");switch(e.toLowerCase()){case"l":case"low":return Tr.L;case"m":case"medium":return Tr.M;case"q":case"quartile":return Tr.Q;case"h":case"high":return Tr.H;default:throw new Error("Unknown EC Level: "+e)}}Tr.isValid=function(n){return n&&typeof n.bit<"u"&&n.bit>=0&&n.bit<4};Tr.from=function(n,t){if(Tr.isValid(n))return n;try{return $7(n)}catch{return t}}});var QD=ft((RX,ZD)=>{"use strict";function XD(){this.buffer=[],this.length=0}XD.prototype={get:function(e){let n=Math.floor(e/8);return(this.buffer[n]>>>7-e%8&1)===1},put:function(e,n){for(let t=0;t<n;t++)this.putBit((e>>>n-t-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(e){let n=Math.floor(this.length/8);this.buffer.length<=n&&this.buffer.push(0),e&&(this.buffer[n]|=128>>>this.length%8),this.length++}};ZD.exports=XD});var JD=ft((PX,KD)=>{"use strict";function uu(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}uu.prototype.set=function(e,n,t,r){let i=e*this.size+n;this.data[i]=t,r&&(this.reservedBit[i]=!0)};uu.prototype.get=function(e,n){return this.data[e*this.size+n]};uu.prototype.xor=function(e,n,t){this.data[e*this.size+n]^=t};uu.prototype.isReserved=function(e,n){return this.reservedBit[e*this.size+n]};KD.exports=uu});var eM=ft(rp=>{"use strict";var q7=Ro().getSymbolSize;rp.getRowColCoords=function(n){if(n===1)return[];let t=Math.floor(n/7)+2,r=q7(n),i=r===145?26:Math.ceil((r-13)/(2*t-2))*2,o=[r-7];for(let c=1;c<t-1;c++)o[c]=o[c-1]-i;return o.push(6),o.reverse()};rp.getPositions=function(n){let t=[],r=rp.getRowColCoords(n),i=r.length;for(let o=0;o<i;o++)for(let c=0;c<i;c++)o===0&&c===0||o===0&&c===i-1||o===i-1&&c===0||t.push([r[o],r[c]]);return t}});var rM=ft(nM=>{"use strict";var Y7=Ro().getSymbolSize,tM=7;nM.getPositions=function(n){let t=Y7(n);return[[0,0],[t-tM,0],[0,t-tM]]}});var iM=ft(Tt=>{"use strict";Tt.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};var Ts={N1:3,N2:3,N3:40,N4:10};Tt.isValid=function(n){return n!=null&&n!==""&&!isNaN(n)&&n>=0&&n<=7};Tt.from=function(n){return Tt.isValid(n)?parseInt(n,10):void 0};Tt.getPenaltyN1=function(n){let t=n.size,r=0,i=0,o=0,c=null,h=null;for(let g=0;g<t;g++){i=o=0,c=h=null;for(let m=0;m<t;m++){let v=n.get(g,m);v===c?i++:(i>=5&&(r+=Ts.N1+(i-5)),c=v,i=1),v=n.get(m,g),v===h?o++:(o>=5&&(r+=Ts.N1+(o-5)),h=v,o=1)}i>=5&&(r+=Ts.N1+(i-5)),o>=5&&(r+=Ts.N1+(o-5))}return r};Tt.getPenaltyN2=function(n){let t=n.size,r=0;for(let i=0;i<t-1;i++)for(let o=0;o<t-1;o++){let c=n.get(i,o)+n.get(i,o+1)+n.get(i+1,o)+n.get(i+1,o+1);(c===4||c===0)&&r++}return r*Ts.N2};Tt.getPenaltyN3=function(n){let t=n.size,r=0,i=0,o=0;for(let c=0;c<t;c++){i=o=0;for(let h=0;h<t;h++)i=i<<1&2047|n.get(c,h),h>=10&&(i===1488||i===93)&&r++,o=o<<1&2047|n.get(h,c),h>=10&&(o===1488||o===93)&&r++}return r*Ts.N3};Tt.getPenaltyN4=function(n){let t=0,r=n.data.length;for(let o=0;o<r;o++)t+=n.data[o];return Math.abs(Math.ceil(t*100/r/5)-10)*Ts.N4};function X7(e,n,t){switch(e){case Tt.Patterns.PATTERN000:return(n+t)%2===0;case Tt.Patterns.PATTERN001:return n%2===0;case Tt.Patterns.PATTERN010:return t%3===0;case Tt.Patterns.PATTERN011:return(n+t)%3===0;case Tt.Patterns.PATTERN100:return(Math.floor(n/2)+Math.floor(t/3))%2===0;case Tt.Patterns.PATTERN101:return n*t%2+n*t%3===0;case Tt.Patterns.PATTERN110:return(n*t%2+n*t%3)%2===0;case Tt.Patterns.PATTERN111:return(n*t%3+(n+t)%2)%2===0;default:throw new Error("bad maskPattern:"+e)}}Tt.applyMask=function(n,t){let r=t.size;for(let i=0;i<r;i++)for(let o=0;o<r;o++)t.isReserved(o,i)||t.xor(o,i,X7(n,o,i))};Tt.getBestMask=function(n,t){let r=Object.keys(Tt.Patterns).length,i=0,o=1/0;for(let c=0;c<r;c++){t(c),Tt.applyMask(c,n);let h=Tt.getPenaltyN1(n)+Tt.getPenaltyN2(n)+Tt.getPenaltyN3(n)+Tt.getPenaltyN4(n);Tt.applyMask(c,n),h<o&&(o=h,i=c)}return i}});var YC=ft(qC=>{"use strict";var Po=np(),ip=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],op=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];qC.getBlocksCount=function(n,t){switch(t){case Po.L:return ip[(n-1)*4+0];case Po.M:return ip[(n-1)*4+1];case Po.Q:return ip[(n-1)*4+2];case Po.H:return ip[(n-1)*4+3];default:return}};qC.getTotalCodewordsCount=function(n,t){switch(t){case Po.L:return op[(n-1)*4+0];case Po.M:return op[(n-1)*4+1];case Po.Q:return op[(n-1)*4+2];case Po.H:return op[(n-1)*4+3];default:return}}});var oM=ft(ap=>{"use strict";var du=new Uint8Array(512),sp=new Uint8Array(256);(function(){let n=1;for(let t=0;t<255;t++)du[t]=n,sp[n]=t,n<<=1,n&256&&(n^=285);for(let t=255;t<512;t++)du[t]=du[t-255]})();ap.log=function(n){if(n<1)throw new Error("log("+n+")");return sp[n]};ap.exp=function(n){return du[n]};ap.mul=function(n,t){return n===0||t===0?0:du[sp[n]+sp[t]]}});var sM=ft(fu=>{"use strict";var XC=oM();fu.mul=function(n,t){let r=new Uint8Array(n.length+t.length-1);for(let i=0;i<n.length;i++)for(let o=0;o<t.length;o++)r[i+o]^=XC.mul(n[i],t[o]);return r};fu.mod=function(n,t){let r=new Uint8Array(n);for(;r.length-t.length>=0;){let i=r[0];for(let c=0;c<t.length;c++)r[c]^=XC.mul(t[c],i);let o=0;for(;o<r.length&&r[o]===0;)o++;r=r.slice(o)}return r};fu.generateECPolynomial=function(n){let t=new Uint8Array([1]);for(let r=0;r<n;r++)t=fu.mul(t,new Uint8Array([1,XC.exp(r)]));return t}});var cM=ft((jX,lM)=>{"use strict";var aM=sM();function ZC(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}ZC.prototype.initialize=function(n){this.degree=n,this.genPoly=aM.generateECPolynomial(this.degree)};ZC.prototype.encode=function(n){if(!this.genPoly)throw new Error("Encoder not initialized");let t=new Uint8Array(n.length+this.degree);t.set(n);let r=aM.mod(t,this.genPoly),i=this.degree-r.length;if(i>0){let o=new Uint8Array(this.degree);return o.set(r,i),o}return r};lM.exports=ZC});var QC=ft(uM=>{"use strict";uM.isValid=function(n){return!isNaN(n)&&n>=1&&n<=40}});var KC=ft(Xi=>{"use strict";var dM="[0-9]+",Z7="[A-Z $%*+\\-./:]+",hu="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";hu=hu.replace(/u/g,"\\u");var Q7="(?:(?![A-Z0-9 $%*+\\-./:]|"+hu+`)(?:.|[\r
]))+`;Xi.KANJI=new RegExp(hu,"g");Xi.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");Xi.BYTE=new RegExp(Q7,"g");Xi.NUMERIC=new RegExp(dM,"g");Xi.ALPHANUMERIC=new RegExp(Z7,"g");var K7=new RegExp("^"+hu+"$"),J7=new RegExp("^"+dM+"$"),e9=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");Xi.testKanji=function(n){return K7.test(n)};Xi.testNumeric=function(n){return J7.test(n)};Xi.testAlphanumeric=function(n){return e9.test(n)}});var ko=ft(en=>{"use strict";var t9=QC(),JC=KC();en.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]};en.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]};en.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]};en.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]};en.MIXED={bit:-1};en.getCharCountIndicator=function(n,t){if(!n.ccBits)throw new Error("Invalid mode: "+n);if(!t9.isValid(t))throw new Error("Invalid version: "+t);return t>=1&&t<10?n.ccBits[0]:t<27?n.ccBits[1]:n.ccBits[2]};en.getBestModeForData=function(n){return JC.testNumeric(n)?en.NUMERIC:JC.testAlphanumeric(n)?en.ALPHANUMERIC:JC.testKanji(n)?en.KANJI:en.BYTE};en.toString=function(n){if(n&&n.id)return n.id;throw new Error("Invalid mode")};en.isValid=function(n){return n&&n.bit&&n.ccBits};function n9(e){if(typeof e!="string")throw new Error("Param is not a string");switch(e.toLowerCase()){case"numeric":return en.NUMERIC;case"alphanumeric":return en.ALPHANUMERIC;case"kanji":return en.KANJI;case"byte":return en.BYTE;default:throw new Error("Unknown mode: "+e)}}en.from=function(n,t){if(en.isValid(n))return n;try{return n9(n)}catch{return t}}});var mM=ft(Os=>{"use strict";var lp=Ro(),r9=YC(),fM=np(),Fo=ko(),e_=QC(),pM=7973,hM=lp.getBCHDigit(pM);function i9(e,n,t){for(let r=1;r<=40;r++)if(n<=Os.getCapacity(r,t,e))return r}function gM(e,n){return Fo.getCharCountIndicator(e,n)+4}function o9(e,n){let t=0;return e.forEach(function(r){let i=gM(r.mode,n);t+=i+r.getBitsLength()}),t}function s9(e,n){for(let t=1;t<=40;t++)if(o9(e,t)<=Os.getCapacity(t,n,Fo.MIXED))return t}Os.from=function(n,t){return e_.isValid(n)?parseInt(n,10):t};Os.getCapacity=function(n,t,r){if(!e_.isValid(n))throw new Error("Invalid QR Code version");typeof r>"u"&&(r=Fo.BYTE);let i=lp.getSymbolTotalCodewords(n),o=r9.getTotalCodewordsCount(n,t),c=(i-o)*8;if(r===Fo.MIXED)return c;let h=c-gM(r,n);switch(r){case Fo.NUMERIC:return Math.floor(h/10*3);case Fo.ALPHANUMERIC:return Math.floor(h/11*2);case Fo.KANJI:return Math.floor(h/13);case Fo.BYTE:default:return Math.floor(h/8)}};Os.getBestVersionForData=function(n,t){let r,i=fM.from(t,fM.M);if(Array.isArray(n)){if(n.length>1)return s9(n,i);if(n.length===0)return 1;r=n[0]}else r=n;return i9(r.mode,r.getLength(),i)};Os.getEncodedBits=function(n){if(!e_.isValid(n)||n<7)throw new Error("Invalid QR Code version");let t=n<<12;for(;lp.getBCHDigit(t)-hM>=0;)t^=pM<<lp.getBCHDigit(t)-hM;return n<<12|t}});var wM=ft(_M=>{"use strict";var t_=Ro(),CM=1335,a9=21522,yM=t_.getBCHDigit(CM);_M.getEncodedBits=function(n,t){let r=n.bit<<3|t,i=r<<10;for(;t_.getBCHDigit(i)-yM>=0;)i^=CM<<t_.getBCHDigit(i)-yM;return(r<<10|i)^a9}});var bM=ft((qX,vM)=>{"use strict";var l9=ko();function rl(e){this.mode=l9.NUMERIC,this.data=e.toString()}rl.getBitsLength=function(n){return 10*Math.floor(n/3)+(n%3?n%3*3+1:0)};rl.prototype.getLength=function(){return this.data.length};rl.prototype.getBitsLength=function(){return rl.getBitsLength(this.data.length)};rl.prototype.write=function(n){let t,r,i;for(t=0;t+3<=this.data.length;t+=3)r=this.data.substr(t,3),i=parseInt(r,10),n.put(i,10);let o=this.data.length-t;o>0&&(r=this.data.substr(t),i=parseInt(r,10),n.put(i,o*3+1))};vM.exports=rl});var EM=ft((YX,xM)=>{"use strict";var c9=ko(),n_=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function il(e){this.mode=c9.ALPHANUMERIC,this.data=e}il.getBitsLength=function(n){return 11*Math.floor(n/2)+6*(n%2)};il.prototype.getLength=function(){return this.data.length};il.prototype.getBitsLength=function(){return il.getBitsLength(this.data.length)};il.prototype.write=function(n){let t;for(t=0;t+2<=this.data.length;t+=2){let r=n_.indexOf(this.data[t])*45;r+=n_.indexOf(this.data[t+1]),n.put(r,11)}this.data.length%2&&n.put(n_.indexOf(this.data[t]),6)};xM.exports=il});var SM=ft((XX,IM)=>{"use strict";IM.exports=function(n){for(var t=[],r=n.length,i=0;i<r;i++){var o=n.charCodeAt(i);if(o>=55296&&o<=56319&&r>i+1){var c=n.charCodeAt(i+1);c>=56320&&c<=57343&&(o=(o-55296)*1024+c-56320+65536,i+=1)}if(o<128){t.push(o);continue}if(o<2048){t.push(o>>6|192),t.push(o&63|128);continue}if(o<55296||o>=57344&&o<65536){t.push(o>>12|224),t.push(o>>6&63|128),t.push(o&63|128);continue}if(o>=65536&&o<=1114111){t.push(o>>18|240),t.push(o>>12&63|128),t.push(o>>6&63|128),t.push(o&63|128);continue}t.push(239,191,189)}return new Uint8Array(t).buffer}});var MM=ft((ZX,DM)=>{"use strict";var u9=SM(),d9=ko();function ol(e){this.mode=d9.BYTE,typeof e=="string"&&(e=u9(e)),this.data=new Uint8Array(e)}ol.getBitsLength=function(n){return n*8};ol.prototype.getLength=function(){return this.data.length};ol.prototype.getBitsLength=function(){return ol.getBitsLength(this.data.length)};ol.prototype.write=function(e){for(let n=0,t=this.data.length;n<t;n++)e.put(this.data[n],8)};DM.exports=ol});var TM=ft((QX,AM)=>{"use strict";var f9=ko(),h9=Ro();function sl(e){this.mode=f9.KANJI,this.data=e}sl.getBitsLength=function(n){return n*13};sl.prototype.getLength=function(){return this.data.length};sl.prototype.getBitsLength=function(){return sl.getBitsLength(this.data.length)};sl.prototype.write=function(e){let n;for(n=0;n<this.data.length;n++){let t=h9.toSJIS(this.data[n]);if(t>=33088&&t<=40956)t-=33088;else if(t>=57408&&t<=60351)t-=49472;else throw new Error("Invalid SJIS character: "+this.data[n]+`
Make sure your charset is UTF-8`);t=(t>>>8&255)*192+(t&255),e.put(t,13)}};AM.exports=sl});var OM=ft((KX,r_)=>{"use strict";var pu={single_source_shortest_paths:function(e,n,t){var r={},i={};i[n]=0;var o=pu.PriorityQueue.make();o.push(n,0);for(var c,h,g,m,v,b,I,M,R;!o.empty();){c=o.pop(),h=c.value,m=c.cost,v=e[h]||{};for(g in v)v.hasOwnProperty(g)&&(b=v[g],I=m+b,M=i[g],R=typeof i[g]>"u",(R||M>I)&&(i[g]=I,o.push(g,I),r[g]=h))}if(typeof t<"u"&&typeof i[t]>"u"){var H=["Could not find a path from ",n," to ",t,"."].join("");throw new Error(H)}return r},extract_shortest_path_from_predecessor_list:function(e,n){for(var t=[],r=n,i;r;)t.push(r),i=e[r],r=e[r];return t.reverse(),t},find_path:function(e,n,t){var r=pu.single_source_shortest_paths(e,n,t);return pu.extract_shortest_path_from_predecessor_list(r,t)},PriorityQueue:{make:function(e){var n=pu.PriorityQueue,t={},r;e=e||{};for(r in n)n.hasOwnProperty(r)&&(t[r]=n[r]);return t.queue=[],t.sorter=e.sorter||n.default_sorter,t},default_sorter:function(e,n){return e.cost-n.cost},push:function(e,n){var t={value:e,cost:n};this.queue.push(t),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};typeof r_<"u"&&(r_.exports=pu)});var UM=ft(al=>{"use strict";var mt=ko(),PM=bM(),kM=EM(),FM=MM(),LM=TM(),gu=KC(),cp=Ro(),p9=OM();function NM(e){return unescape(encodeURIComponent(e)).length}function mu(e,n,t){let r=[],i;for(;(i=e.exec(t))!==null;)r.push({data:i[0],index:i.index,mode:n,length:i[0].length});return r}function BM(e){let n=mu(gu.NUMERIC,mt.NUMERIC,e),t=mu(gu.ALPHANUMERIC,mt.ALPHANUMERIC,e),r,i;return cp.isKanjiModeEnabled()?(r=mu(gu.BYTE,mt.BYTE,e),i=mu(gu.KANJI,mt.KANJI,e)):(r=mu(gu.BYTE_KANJI,mt.BYTE,e),i=[]),n.concat(t,r,i).sort(function(c,h){return c.index-h.index}).map(function(c){return{data:c.data,mode:c.mode,length:c.length}})}function i_(e,n){switch(n){case mt.NUMERIC:return PM.getBitsLength(e);case mt.ALPHANUMERIC:return kM.getBitsLength(e);case mt.KANJI:return LM.getBitsLength(e);case mt.BYTE:return FM.getBitsLength(e)}}function g9(e){return e.reduce(function(n,t){let r=n.length-1>=0?n[n.length-1]:null;return r&&r.mode===t.mode?(n[n.length-1].data+=t.data,n):(n.push(t),n)},[])}function m9(e){let n=[];for(let t=0;t<e.length;t++){let r=e[t];switch(r.mode){case mt.NUMERIC:n.push([r,{data:r.data,mode:mt.ALPHANUMERIC,length:r.length},{data:r.data,mode:mt.BYTE,length:r.length}]);break;case mt.ALPHANUMERIC:n.push([r,{data:r.data,mode:mt.BYTE,length:r.length}]);break;case mt.KANJI:n.push([r,{data:r.data,mode:mt.BYTE,length:NM(r.data)}]);break;case mt.BYTE:n.push([{data:r.data,mode:mt.BYTE,length:NM(r.data)}])}}return n}function y9(e,n){let t={},r={start:{}},i=["start"];for(let o=0;o<e.length;o++){let c=e[o],h=[];for(let g=0;g<c.length;g++){let m=c[g],v=""+o+g;h.push(v),t[v]={node:m,lastCount:0},r[v]={};for(let b=0;b<i.length;b++){let I=i[b];t[I]&&t[I].node.mode===m.mode?(r[I][v]=i_(t[I].lastCount+m.length,m.mode)-i_(t[I].lastCount,m.mode),t[I].lastCount+=m.length):(t[I]&&(t[I].lastCount=m.length),r[I][v]=i_(m.length,m.mode)+4+mt.getCharCountIndicator(m.mode,n))}}i=h}for(let o=0;o<i.length;o++)r[i[o]].end=0;return{map:r,table:t}}function RM(e,n){let t,r=mt.getBestModeForData(e);if(t=mt.from(n,r),t!==mt.BYTE&&t.bit<r.bit)throw new Error('"'+e+'" cannot be encoded with mode '+mt.toString(t)+`.
 Suggested mode is: `+mt.toString(r));switch(t===mt.KANJI&&!cp.isKanjiModeEnabled()&&(t=mt.BYTE),t){case mt.NUMERIC:return new PM(e);case mt.ALPHANUMERIC:return new kM(e);case mt.KANJI:return new LM(e);case mt.BYTE:return new FM(e)}}al.fromArray=function(n){return n.reduce(function(t,r){return typeof r=="string"?t.push(RM(r,null)):r.data&&t.push(RM(r.data,r.mode)),t},[])};al.fromString=function(n,t){let r=BM(n,cp.isKanjiModeEnabled()),i=m9(r),o=y9(i,t),c=p9.find_path(o.map,"start","end"),h=[];for(let g=1;g<c.length-1;g++)h.push(o.table[c[g]].node);return al.fromArray(g9(h))};al.rawSplit=function(n){return al.fromArray(BM(n,cp.isKanjiModeEnabled()))}});var jM=ft(VM=>{"use strict";var dp=Ro(),o_=np(),C9=QD(),_9=JD(),w9=eM(),v9=rM(),l_=iM(),c_=YC(),b9=cM(),up=mM(),x9=wM(),E9=ko(),s_=UM();function I9(e,n){let t=e.size,r=v9.getPositions(n);for(let i=0;i<r.length;i++){let o=r[i][0],c=r[i][1];for(let h=-1;h<=7;h++)if(!(o+h<=-1||t<=o+h))for(let g=-1;g<=7;g++)c+g<=-1||t<=c+g||(h>=0&&h<=6&&(g===0||g===6)||g>=0&&g<=6&&(h===0||h===6)||h>=2&&h<=4&&g>=2&&g<=4?e.set(o+h,c+g,!0,!0):e.set(o+h,c+g,!1,!0))}}function S9(e){let n=e.size;for(let t=8;t<n-8;t++){let r=t%2===0;e.set(t,6,r,!0),e.set(6,t,r,!0)}}function D9(e,n){let t=w9.getPositions(n);for(let r=0;r<t.length;r++){let i=t[r][0],o=t[r][1];for(let c=-2;c<=2;c++)for(let h=-2;h<=2;h++)c===-2||c===2||h===-2||h===2||c===0&&h===0?e.set(i+c,o+h,!0,!0):e.set(i+c,o+h,!1,!0)}}function M9(e,n){let t=e.size,r=up.getEncodedBits(n),i,o,c;for(let h=0;h<18;h++)i=Math.floor(h/3),o=h%3+t-8-3,c=(r>>h&1)===1,e.set(i,o,c,!0),e.set(o,i,c,!0)}function a_(e,n,t){let r=e.size,i=x9.getEncodedBits(n,t),o,c;for(o=0;o<15;o++)c=(i>>o&1)===1,o<6?e.set(o,8,c,!0):o<8?e.set(o+1,8,c,!0):e.set(r-15+o,8,c,!0),o<8?e.set(8,r-o-1,c,!0):o<9?e.set(8,15-o-1+1,c,!0):e.set(8,15-o-1,c,!0);e.set(r-8,8,1,!0)}function A9(e,n){let t=e.size,r=-1,i=t-1,o=7,c=0;for(let h=t-1;h>0;h-=2)for(h===6&&h--;;){for(let g=0;g<2;g++)if(!e.isReserved(i,h-g)){let m=!1;c<n.length&&(m=(n[c]>>>o&1)===1),e.set(i,h-g,m),o--,o===-1&&(c++,o=7)}if(i+=r,i<0||t<=i){i-=r,r=-r;break}}}function T9(e,n,t){let r=new C9;t.forEach(function(g){r.put(g.mode.bit,4),r.put(g.getLength(),E9.getCharCountIndicator(g.mode,e)),g.write(r)});let i=dp.getSymbolTotalCodewords(e),o=c_.getTotalCodewordsCount(e,n),c=(i-o)*8;for(r.getLengthInBits()+4<=c&&r.put(0,4);r.getLengthInBits()%8!==0;)r.putBit(0);let h=(c-r.getLengthInBits())/8;for(let g=0;g<h;g++)r.put(g%2?17:236,8);return O9(r,e,n)}function O9(e,n,t){let r=dp.getSymbolTotalCodewords(n),i=c_.getTotalCodewordsCount(n,t),o=r-i,c=c_.getBlocksCount(n,t),h=r%c,g=c-h,m=Math.floor(r/c),v=Math.floor(o/c),b=v+1,I=m-v,M=new b9(I),R=0,H=new Array(c),X=new Array(c),$=0,ce=new Uint8Array(e.buffer);for(let Y=0;Y<c;Y++){let or=Y<g?v:b;H[Y]=ce.slice(R,R+or),X[Y]=M.encode(H[Y]),R+=or,$=Math.max($,or)}let Ze=new Uint8Array(r),me=0,W,pe;for(W=0;W<$;W++)for(pe=0;pe<c;pe++)W<H[pe].length&&(Ze[me++]=H[pe][W]);for(W=0;W<I;W++)for(pe=0;pe<c;pe++)Ze[me++]=X[pe][W];return Ze}function N9(e,n,t,r){let i;if(Array.isArray(e))i=s_.fromArray(e);else if(typeof e=="string"){let m=n;if(!m){let v=s_.rawSplit(e);m=up.getBestVersionForData(v,t)}i=s_.fromString(e,m||40)}else throw new Error("Invalid data");let o=up.getBestVersionForData(i,t);if(!o)throw new Error("The amount of data is too big to be stored in a QR Code");if(!n)n=o;else if(n<o)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+o+`.
`);let c=T9(n,t,i),h=dp.getSymbolSize(n),g=new _9(h);return I9(g,n),S9(g),D9(g,n),a_(g,t,0),n>=7&&M9(g,n),A9(g,c),isNaN(r)&&(r=l_.getBestMask(g,a_.bind(null,g,t))),l_.applyMask(r,g),a_(g,t,r),{modules:g,version:n,errorCorrectionLevel:t,maskPattern:r,segments:i}}VM.create=function(n,t){if(typeof n>"u"||n==="")throw new Error("No input text");let r=o_.M,i,o;return typeof t<"u"&&(r=o_.from(t.errorCorrectionLevel,o_.M),i=up.from(t.version),o=l_.from(t.maskPattern),t.toSJISFunc&&dp.setToSJISFunction(t.toSJISFunc)),N9(n,i,r,o)}});var u_=ft(Ns=>{"use strict";function HM(e){if(typeof e=="number"&&(e=e.toString()),typeof e!="string")throw new Error("Color should be defined as hex string");let n=e.slice().replace("#","").split("");if(n.length<3||n.length===5||n.length>8)throw new Error("Invalid hex color: "+e);(n.length===3||n.length===4)&&(n=Array.prototype.concat.apply([],n.map(function(r){return[r,r]}))),n.length===6&&n.push("F","F");let t=parseInt(n.join(""),16);return{r:t>>24&255,g:t>>16&255,b:t>>8&255,a:t&255,hex:"#"+n.slice(0,6).join("")}}Ns.getOptions=function(n){n||(n={}),n.color||(n.color={});let t=typeof n.margin>"u"||n.margin===null||n.margin<0?4:n.margin,r=n.width&&n.width>=21?n.width:void 0,i=n.scale||4;return{width:r,scale:r?4:i,margin:t,color:{dark:HM(n.color.dark||"#000000ff"),light:HM(n.color.light||"#ffffffff")},type:n.type,rendererOpts:n.rendererOpts||{}}};Ns.getScale=function(n,t){return t.width&&t.width>=n+t.margin*2?t.width/(n+t.margin*2):t.scale};Ns.getImageWidth=function(n,t){let r=Ns.getScale(n,t);return Math.floor((n+t.margin*2)*r)};Ns.qrToImageData=function(n,t,r){let i=t.modules.size,o=t.modules.data,c=Ns.getScale(i,r),h=Math.floor((i+r.margin*2)*c),g=r.margin*c,m=[r.color.light,r.color.dark];for(let v=0;v<h;v++)for(let b=0;b<h;b++){let I=(v*h+b)*4,M=r.color.light;if(v>=g&&b>=g&&v<h-g&&b<h-g){let R=Math.floor((v-g)/c),H=Math.floor((b-g)/c);M=m[o[R*i+H]?1:0]}n[I++]=M.r,n[I++]=M.g,n[I++]=M.b,n[I]=M.a}}});var zM=ft(fp=>{"use strict";var d_=u_();function R9(e,n,t){e.clearRect(0,0,n.width,n.height),n.style||(n.style={}),n.height=t,n.width=t,n.style.height=t+"px",n.style.width=t+"px"}function P9(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}fp.render=function(n,t,r){let i=r,o=t;typeof i>"u"&&(!t||!t.getContext)&&(i=t,t=void 0),t||(o=P9()),i=d_.getOptions(i);let c=d_.getImageWidth(n.modules.size,i),h=o.getContext("2d"),g=h.createImageData(c,c);return d_.qrToImageData(g.data,n,i),R9(h,o,c),h.putImageData(g,0,0),o};fp.renderToDataURL=function(n,t,r){let i=r;typeof i>"u"&&(!t||!t.getContext)&&(i=t,t=void 0),i||(i={});let o=fp.render(n,t,i),c=i.type||"image/png",h=i.rendererOpts||{};return o.toDataURL(c,h.quality)}});var $M=ft(GM=>{"use strict";var k9=u_();function WM(e,n){let t=e.a/255,r=n+'="'+e.hex+'"';return t<1?r+" "+n+'-opacity="'+t.toFixed(2).slice(1)+'"':r}function f_(e,n,t){let r=e+n;return typeof t<"u"&&(r+=" "+t),r}function F9(e,n,t){let r="",i=0,o=!1,c=0;for(let h=0;h<e.length;h++){let g=Math.floor(h%n),m=Math.floor(h/n);!g&&!o&&(o=!0),e[h]?(c++,h>0&&g>0&&e[h-1]||(r+=o?f_("M",g+t,.5+m+t):f_("m",i,0),i=0,o=!1),g+1<n&&e[h+1]||(r+=f_("h",c),c=0)):i++}return r}GM.render=function(n,t,r){let i=k9.getOptions(t),o=n.modules.size,c=n.modules.data,h=o+i.margin*2,g=i.color.light.a?"<path "+WM(i.color.light,"fill")+' d="M0 0h'+h+"v"+h+'H0z"/>':"",m="<path "+WM(i.color.dark,"stroke")+' d="'+F9(c,o,i.margin)+'"/>',v='viewBox="0 0 '+h+" "+h+'"',I='<svg xmlns="http://www.w3.org/2000/svg" '+(i.width?'width="'+i.width+'" height="'+i.width+'" ':"")+v+' shape-rendering="crispEdges">'+g+m+`</svg>
`;return typeof r=="function"&&r(null,I),I}});var YM=ft(yu=>{"use strict";var L9=YD(),h_=jM(),qM=zM(),B9=$M();function p_(e,n,t,r,i){let o=[].slice.call(arguments,1),c=o.length,h=typeof o[c-1]=="function";if(!h&&!L9())throw new Error("Callback required as last argument");if(h){if(c<2)throw new Error("Too few arguments provided");c===2?(i=t,t=n,n=r=void 0):c===3&&(n.getContext&&typeof i>"u"?(i=r,r=void 0):(i=r,r=t,t=n,n=void 0))}else{if(c<1)throw new Error("Too few arguments provided");return c===1?(t=n,n=r=void 0):c===2&&!n.getContext&&(r=t,t=n,n=void 0),new Promise(function(g,m){try{let v=h_.create(t,r);g(e(v,n,r))}catch(v){m(v)}})}try{let g=h_.create(t,r);i(null,e(g,n,r))}catch(g){i(g)}}yu.create=h_.create;yu.toCanvas=p_.bind(null,qM.render);yu.toDataURL=p_.bind(null,qM.renderToDataURL);yu.toString=p_.bind(null,function(e,n,t){return B9.render(e,t)})});var sA=ft((yp,oA)=>{"use strict";(function(e,n){typeof yp=="object"&&typeof oA<"u"?n(yp):typeof define=="function"&&define.amd?define(["exports"],n):(e=typeof globalThis<"u"?globalThis:e||self,n(e.ZXing={}))})(yp,function(e){"use strict";function n(_){return _==null}var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,s){_.__proto__=s}||function(_,s){for(var a in s)s.hasOwnProperty(a)&&(_[a]=s[a])};function r(_,s){t(_,s);function a(){this.constructor=_}_.prototype=s===null?Object.create(s):(a.prototype=s.prototype,new a)}function i(_,s){var a=Object.setPrototypeOf;a?a(_,s):_.__proto__=s}function o(_,s){s===void 0&&(s=_.constructor);var a=Error.captureStackTrace;a&&a(_,s)}var c=function(_){r(s,_);function s(a){var l=this.constructor,u=_.call(this,a)||this;return Object.defineProperty(u,"name",{value:l.name,enumerable:!1}),i(u,l.prototype),o(u),u}return s}(Error);let h=(()=>{class _ extends c{constructor(a=void 0){super(a),this.message=a}getKind(){return this.constructor.kind}}return _.kind="Exception",_})(),g=(()=>{class _ extends h{}return _.kind="ArgumentException",_})(),m=(()=>{class _ extends h{}return _.kind="IllegalArgumentException",_})();class v{constructor(s){if(this.binarizer=s,s===null)throw new m("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(s,a){return this.binarizer.getBlackRow(s,a)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(s,a,l,u){let d=this.binarizer.getLuminanceSource().crop(s,a,l,u);return new v(this.binarizer.createBinarizer(d))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){let s=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new v(this.binarizer.createBinarizer(s))}rotateCounterClockwise45(){let s=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new v(this.binarizer.createBinarizer(s))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}let b=(()=>{class _ extends h{static getChecksumInstance(){return new _}}return _.kind="ChecksumException",_})();class I{constructor(s){this.source=s}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class M{static arraycopy(s,a,l,u,d){for(;d--;)l[u++]=s[a++]}static currentTimeMillis(){return Date.now()}}let R=(()=>{class _ extends h{}return _.kind="IndexOutOfBoundsException",_})(),H=(()=>{class _ extends R{constructor(a=void 0,l=void 0){super(l),this.index=a,this.message=l}}return _.kind="ArrayIndexOutOfBoundsException",_})();class X{static fill(s,a){for(let l=0,u=s.length;l<u;l++)s[l]=a}static fillWithin(s,a,l,u){X.rangeCheck(s.length,a,l);for(let d=a;d<l;d++)s[d]=u}static rangeCheck(s,a,l){if(a>l)throw new m("fromIndex("+a+") > toIndex("+l+")");if(a<0)throw new H(a);if(l>s)throw new H(l)}static asList(...s){return s}static create(s,a,l){return Array.from({length:s}).map(d=>Array.from({length:a}).fill(l))}static createInt32Array(s,a,l){return Array.from({length:s}).map(d=>Int32Array.from({length:a}).fill(l))}static equals(s,a){if(!s||!a||!s.length||!a.length||s.length!==a.length)return!1;for(let l=0,u=s.length;l<u;l++)if(s[l]!==a[l])return!1;return!0}static hashCode(s){if(s===null)return 0;let a=1;for(let l of s)a=31*a+l;return a}static fillUint8Array(s,a){for(let l=0;l!==s.length;l++)s[l]=a}static copyOf(s,a){return s.slice(0,a)}static copyOfUint8Array(s,a){if(s.length<=a){let l=new Uint8Array(a);return l.set(s),l}return s.slice(0,a)}static copyOfRange(s,a,l){let u=l-a,d=new Int32Array(u);return M.arraycopy(s,a,d,0,u),d}static binarySearch(s,a,l){l===void 0&&(l=X.numberComparator);let u=0,d=s.length-1;for(;u<=d;){let f=d+u>>1,p=l(a,s[f]);if(p>0)u=f+1;else if(p<0)d=f-1;else return f}return-u-1}static numberComparator(s,a){return s-a}}class ${static numberOfTrailingZeros(s){let a;if(s===0)return 32;let l=31;return a=s<<16,a!==0&&(l-=16,s=a),a=s<<8,a!==0&&(l-=8,s=a),a=s<<4,a!==0&&(l-=4,s=a),a=s<<2,a!==0&&(l-=2,s=a),l-(s<<1>>>31)}static numberOfLeadingZeros(s){if(s===0)return 32;let a=1;return s>>>16||(a+=16,s<<=16),s>>>24||(a+=8,s<<=8),s>>>28||(a+=4,s<<=4),s>>>30||(a+=2,s<<=2),a-=s>>>31,a}static toHexString(s){return s.toString(16)}static toBinaryString(s){return String(parseInt(String(s),2))}static bitCount(s){return s=s-(s>>>1&1431655765),s=(s&858993459)+(s>>>2&858993459),s=s+(s>>>4)&252645135,s=s+(s>>>8),s=s+(s>>>16),s&63}static truncDivision(s,a){return Math.trunc(s/a)}static parseInt(s,a=void 0){return parseInt(s,a)}}$.MIN_VALUE_32_BITS=-2147483648,$.MAX_VALUE=Number.MAX_SAFE_INTEGER;class ce{constructor(s,a){s===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=s,a==null?this.bits=ce.makeArray(s):this.bits=a)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(s){if(s>this.bits.length*32){let a=ce.makeArray(s);M.arraycopy(this.bits,0,a,0,this.bits.length),this.bits=a}}get(s){return(this.bits[Math.floor(s/32)]&1<<(s&31))!==0}set(s){this.bits[Math.floor(s/32)]|=1<<(s&31)}flip(s){this.bits[Math.floor(s/32)]^=1<<(s&31)}getNextSet(s){let a=this.size;if(s>=a)return a;let l=this.bits,u=Math.floor(s/32),d=l[u];d&=~((1<<(s&31))-1);let f=l.length;for(;d===0;){if(++u===f)return a;d=l[u]}let p=u*32+$.numberOfTrailingZeros(d);return p>a?a:p}getNextUnset(s){let a=this.size;if(s>=a)return a;let l=this.bits,u=Math.floor(s/32),d=~l[u];d&=~((1<<(s&31))-1);let f=l.length;for(;d===0;){if(++u===f)return a;d=~l[u]}let p=u*32+$.numberOfTrailingZeros(d);return p>a?a:p}setBulk(s,a){this.bits[Math.floor(s/32)]=a}setRange(s,a){if(a<s||s<0||a>this.size)throw new m;if(a===s)return;a--;let l=Math.floor(s/32),u=Math.floor(a/32),d=this.bits;for(let f=l;f<=u;f++){let p=f>l?0:s&31,C=(2<<(f<u?31:a&31))-(1<<p);d[f]|=C}}clear(){let s=this.bits.length,a=this.bits;for(let l=0;l<s;l++)a[l]=0}isRange(s,a,l){if(a<s||s<0||a>this.size)throw new m;if(a===s)return!0;a--;let u=Math.floor(s/32),d=Math.floor(a/32),f=this.bits;for(let p=u;p<=d;p++){let y=p>u?0:s&31,w=(2<<(p<d?31:a&31))-(1<<y)&4294967295;if((f[p]&w)!==(l?w:0))return!1}return!0}appendBit(s){this.ensureCapacity(this.size+1),s&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(s,a){if(a<0||a>32)throw new m("Num bits must be between 0 and 32");this.ensureCapacity(this.size+a);for(let l=a;l>0;l--)this.appendBit((s>>l-1&1)===1)}appendBitArray(s){let a=s.size;this.ensureCapacity(this.size+a);for(let l=0;l<a;l++)this.appendBit(s.get(l))}xor(s){if(this.size!==s.size)throw new m("Sizes don't match");let a=this.bits;for(let l=0,u=a.length;l<u;l++)a[l]^=s.bits[l]}toBytes(s,a,l,u){for(let d=0;d<u;d++){let f=0;for(let p=0;p<8;p++)this.get(s)&&(f|=1<<7-p),s++;a[l+d]=f}}getBitArray(){return this.bits}reverse(){let s=new Int32Array(this.bits.length),a=Math.floor((this.size-1)/32),l=a+1,u=this.bits;for(let d=0;d<l;d++){let f=u[d];f=f>>1&1431655765|(f&1431655765)<<1,f=f>>2&858993459|(f&858993459)<<2,f=f>>4&252645135|(f&252645135)<<4,f=f>>8&16711935|(f&16711935)<<8,f=f>>16&65535|(f&65535)<<16,s[a-d]=f}if(this.size!==l*32){let d=l*32-this.size,f=s[0]>>>d;for(let p=1;p<l;p++){let y=s[p];f|=y<<32-d,s[p-1]=f,f=y>>>d}s[l-1]=f}this.bits=s}static makeArray(s){return new Int32Array(Math.floor((s+31)/32))}equals(s){if(!(s instanceof ce))return!1;let a=s;return this.size===a.size&&X.equals(this.bits,a.bits)}hashCode(){return 31*this.size+X.hashCode(this.bits)}toString(){let s="";for(let a=0,l=this.size;a<l;a++)a&7||(s+=" "),s+=this.get(a)?"X":".";return s}clone(){return new ce(this.size,this.bits.slice())}}var Ze=function(_){return _[_.OTHER=0]="OTHER",_[_.PURE_BARCODE=1]="PURE_BARCODE",_[_.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",_[_.TRY_HARDER=3]="TRY_HARDER",_[_.CHARACTER_SET=4]="CHARACTER_SET",_[_.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",_[_.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",_[_.ASSUME_GS1=7]="ASSUME_GS1",_[_.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",_[_.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",_[_.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS",_}(Ze||{}),me=Ze;let W=(()=>{class _ extends h{static getFormatInstance(){return new _}}return _.kind="FormatException",_})();var pe=function(_){return _[_.Cp437=0]="Cp437",_[_.ISO8859_1=1]="ISO8859_1",_[_.ISO8859_2=2]="ISO8859_2",_[_.ISO8859_3=3]="ISO8859_3",_[_.ISO8859_4=4]="ISO8859_4",_[_.ISO8859_5=5]="ISO8859_5",_[_.ISO8859_6=6]="ISO8859_6",_[_.ISO8859_7=7]="ISO8859_7",_[_.ISO8859_8=8]="ISO8859_8",_[_.ISO8859_9=9]="ISO8859_9",_[_.ISO8859_10=10]="ISO8859_10",_[_.ISO8859_11=11]="ISO8859_11",_[_.ISO8859_13=12]="ISO8859_13",_[_.ISO8859_14=13]="ISO8859_14",_[_.ISO8859_15=14]="ISO8859_15",_[_.ISO8859_16=15]="ISO8859_16",_[_.SJIS=16]="SJIS",_[_.Cp1250=17]="Cp1250",_[_.Cp1251=18]="Cp1251",_[_.Cp1252=19]="Cp1252",_[_.Cp1256=20]="Cp1256",_[_.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",_[_.UTF8=22]="UTF8",_[_.ASCII=23]="ASCII",_[_.Big5=24]="Big5",_[_.GB18030=25]="GB18030",_[_.EUC_KR=26]="EUC_KR",_}(pe||{});class Y{constructor(s,a,l,...u){this.valueIdentifier=s,this.name=l,typeof a=="number"?this.values=Int32Array.from([a]):this.values=a,this.otherEncodingNames=u,Y.VALUE_IDENTIFIER_TO_ECI.set(s,this),Y.NAME_TO_ECI.set(l,this);let d=this.values;for(let f=0,p=d.length;f!==p;f++){let y=d[f];Y.VALUES_TO_ECI.set(y,this)}for(let f of u)Y.NAME_TO_ECI.set(f,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(s){if(s<0||s>=900)throw new W("incorect value");let a=Y.VALUES_TO_ECI.get(s);if(a===void 0)throw new W("incorect value");return a}static getCharacterSetECIByName(s){let a=Y.NAME_TO_ECI.get(s);if(a===void 0)throw new W("incorect value");return a}equals(s){if(!(s instanceof Y))return!1;let a=s;return this.getName()===a.getName()}}Y.VALUE_IDENTIFIER_TO_ECI=new Map,Y.VALUES_TO_ECI=new Map,Y.NAME_TO_ECI=new Map,Y.Cp437=new Y(pe.Cp437,Int32Array.from([0,2]),"Cp437"),Y.ISO8859_1=new Y(pe.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),Y.ISO8859_2=new Y(pe.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),Y.ISO8859_3=new Y(pe.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),Y.ISO8859_4=new Y(pe.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),Y.ISO8859_5=new Y(pe.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),Y.ISO8859_6=new Y(pe.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),Y.ISO8859_7=new Y(pe.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),Y.ISO8859_8=new Y(pe.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),Y.ISO8859_9=new Y(pe.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),Y.ISO8859_10=new Y(pe.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),Y.ISO8859_11=new Y(pe.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),Y.ISO8859_13=new Y(pe.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),Y.ISO8859_14=new Y(pe.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),Y.ISO8859_15=new Y(pe.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),Y.ISO8859_16=new Y(pe.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),Y.SJIS=new Y(pe.SJIS,20,"SJIS","Shift_JIS"),Y.Cp1250=new Y(pe.Cp1250,21,"Cp1250","windows-1250"),Y.Cp1251=new Y(pe.Cp1251,22,"Cp1251","windows-1251"),Y.Cp1252=new Y(pe.Cp1252,23,"Cp1252","windows-1252"),Y.Cp1256=new Y(pe.Cp1256,24,"Cp1256","windows-1256"),Y.UnicodeBigUnmarked=new Y(pe.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),Y.UTF8=new Y(pe.UTF8,26,"UTF8","UTF-8"),Y.ASCII=new Y(pe.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),Y.Big5=new Y(pe.Big5,28,"Big5"),Y.GB18030=new Y(pe.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),Y.EUC_KR=new Y(pe.EUC_KR,30,"EUC_KR","EUC-KR");let or=(()=>{class _ extends h{}return _.kind="UnsupportedOperationException",_})();class Nn{static decode(s,a){let l=this.encodingName(a);return this.customDecoder?this.customDecoder(s,l):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(l)?this.decodeFallback(s,l):new TextDecoder(l).decode(s)}static shouldDecodeOnFallback(s){return!Nn.isBrowser()&&s==="ISO-8859-1"}static encode(s,a){let l=this.encodingName(a);return this.customEncoder?this.customEncoder(s,l):typeof TextEncoder>"u"?this.encodeFallback(s):new TextEncoder().encode(s)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(s){return typeof s=="string"?s:s.getName()}static encodingCharacterSet(s){return s instanceof Y?s:Y.getCharacterSetECIByName(s)}static decodeFallback(s,a){let l=this.encodingCharacterSet(a);if(Nn.isDecodeFallbackSupported(l)){let u="";for(let d=0,f=s.length;d<f;d++){let p=s[d].toString(16);p.length<2&&(p="0"+p),u+="%"+p}return decodeURIComponent(u)}if(l.equals(Y.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(s.buffer));throw new or(`Encoding ${this.encodingName(a)} not supported by fallback.`)}static isDecodeFallbackSupported(s){return s.equals(Y.UTF8)||s.equals(Y.ISO8859_1)||s.equals(Y.ASCII)}static encodeFallback(s){let l=btoa(unescape(encodeURIComponent(s))).split(""),u=[];for(let d=0;d<l.length;d++)u.push(l[d].charCodeAt(0));return new Uint8Array(u)}}class Ie{static castAsNonUtf8Char(s,a=null){let l=a?a.getName():this.ISO88591;return Nn.decode(new Uint8Array([s]),l)}static guessEncoding(s,a){if(a!=null&&a.get(me.CHARACTER_SET)!==void 0)return a.get(me.CHARACTER_SET).toString();let l=s.length,u=!0,d=!0,f=!0,p=0,y=0,C=0,w=0,x=0,E=0,D=0,O=0,N=0,k=0,L=0,Z=s.length>3&&s[0]===239&&s[1]===187&&s[2]===191;for(let ie=0;ie<l&&(u||d||f);ie++){let U=s[ie]&255;f&&(p>0?U&128?p--:f=!1:U&128&&(U&64?(p++,U&32?(p++,U&16?(p++,U&8?f=!1:w++):C++):y++):f=!1)),u&&(U>127&&U<160?u=!1:U>159&&(U<192||U===215||U===247)&&L++),d&&(x>0?U<64||U===127||U>252?d=!1:x--:U===128||U===160||U>239?d=!1:U>160&&U<224?(E++,O=0,D++,D>N&&(N=D)):U>127?(x++,D=0,O++,O>k&&(k=O)):(D=0,O=0))}return f&&p>0&&(f=!1),d&&x>0&&(d=!1),f&&(Z||y+C+w>0)?Ie.UTF8:d&&(Ie.ASSUME_SHIFT_JIS||N>=3||k>=3)?Ie.SHIFT_JIS:u&&d?N===2&&E===2||L*10>=l?Ie.SHIFT_JIS:Ie.ISO88591:u?Ie.ISO88591:d?Ie.SHIFT_JIS:f?Ie.UTF8:Ie.PLATFORM_DEFAULT_ENCODING}static format(s,...a){let l=-1;function u(f,p,y,C,w,x){if(f==="%%")return"%";if(a[++l]===void 0)return;f=C?parseInt(C.substr(1)):void 0;let E=w?parseInt(w.substr(1)):void 0,D;switch(x){case"s":D=a[l];break;case"c":D=a[l][0];break;case"f":D=parseFloat(a[l]).toFixed(f);break;case"p":D=parseFloat(a[l]).toPrecision(f);break;case"e":D=parseFloat(a[l]).toExponential(f);break;case"x":D=parseInt(a[l]).toString(E||16);break;case"d":D=parseFloat(parseInt(a[l],E||10).toPrecision(f)).toFixed(0);break}D=typeof D=="object"?JSON.stringify(D):(+D).toString(E);let O=parseInt(y),N=y&&y[0]+""=="0"?"0":" ";for(;D.length<O;)D=p!==void 0?D+N:N+D;return D}let d=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return s.replace(d,u)}static getBytes(s,a){return Nn.encode(s,a)}static getCharCode(s,a=0){return s.charCodeAt(a)}static getCharAt(s){return String.fromCharCode(s)}}Ie.SHIFT_JIS=Y.SJIS.getName(),Ie.GB2312="GB2312",Ie.ISO88591=Y.ISO8859_1.getName(),Ie.EUC_JP="EUC_JP",Ie.UTF8=Y.UTF8.getName(),Ie.PLATFORM_DEFAULT_ENCODING=Ie.UTF8,Ie.ASSUME_SHIFT_JIS=!1;class wt{constructor(s=""){this.value=s}enableDecoding(s){return this.encoding=s,this}append(s){return typeof s=="string"?this.value+=s.toString():this.encoding?this.value+=Ie.castAsNonUtf8Char(s,this.encoding):this.value+=String.fromCharCode(s),this}appendChars(s,a,l){for(let u=a;a<a+l;u++)this.append(s[u]);return this}length(){return this.value.length}charAt(s){return this.value.charAt(s)}deleteCharAt(s){this.value=this.value.substr(0,s)+this.value.substring(s+1)}setCharAt(s,a){this.value=this.value.substr(0,s)+a+this.value.substr(s+1)}substring(s,a){return this.value.substring(s,a)}setLengthToZero(){this.value=""}toString(){return this.value}insert(s,a){this.value=this.value.substr(0,s)+a+this.value.substr(s+a.length)}}class dn{constructor(s,a,l,u){if(this.width=s,this.height=a,this.rowSize=l,this.bits=u,a==null&&(a=s),this.height=a,s<1||a<1)throw new m("Both dimensions must be greater than 0");l==null&&(l=Math.floor((s+31)/32)),this.rowSize=l,u==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(s){let a=s.length,l=s[0].length,u=new dn(l,a);for(let d=0;d<a;d++){let f=s[d];for(let p=0;p<l;p++)f[p]&&u.set(p,d)}return u}static parseFromString(s,a,l){if(s===null)throw new m("stringRepresentation cannot be null");let u=new Array(s.length),d=0,f=0,p=-1,y=0,C=0;for(;C<s.length;)if(s.charAt(C)===`
`||s.charAt(C)==="\r"){if(d>f){if(p===-1)p=d-f;else if(d-f!==p)throw new m("row lengths do not match");f=d,y++}C++}else if(s.substring(C,C+a.length)===a)C+=a.length,u[d]=!0,d++;else if(s.substring(C,C+l.length)===l)C+=l.length,u[d]=!1,d++;else throw new m("illegal character encountered: "+s.substring(C));if(d>f){if(p===-1)p=d-f;else if(d-f!==p)throw new m("row lengths do not match");y++}let w=new dn(p,y);for(let x=0;x<d;x++)u[x]&&w.set(Math.floor(x%p),Math.floor(x/p));return w}get(s,a){let l=a*this.rowSize+Math.floor(s/32);return(this.bits[l]>>>(s&31)&1)!==0}set(s,a){let l=a*this.rowSize+Math.floor(s/32);this.bits[l]|=1<<(s&31)&4294967295}unset(s,a){let l=a*this.rowSize+Math.floor(s/32);this.bits[l]&=~(1<<(s&31)&4294967295)}flip(s,a){let l=a*this.rowSize+Math.floor(s/32);this.bits[l]^=1<<(s&31)&4294967295}xor(s){if(this.width!==s.getWidth()||this.height!==s.getHeight()||this.rowSize!==s.getRowSize())throw new m("input matrix dimensions do not match");let a=new ce(Math.floor(this.width/32)+1),l=this.rowSize,u=this.bits;for(let d=0,f=this.height;d<f;d++){let p=d*l,y=s.getRow(d,a).getBitArray();for(let C=0;C<l;C++)u[p+C]^=y[C]}}clear(){let s=this.bits,a=s.length;for(let l=0;l<a;l++)s[l]=0}setRegion(s,a,l,u){if(a<0||s<0)throw new m("Left and top must be nonnegative");if(u<1||l<1)throw new m("Height and width must be at least 1");let d=s+l,f=a+u;if(f>this.height||d>this.width)throw new m("The region must fit inside the matrix");let p=this.rowSize,y=this.bits;for(let C=a;C<f;C++){let w=C*p;for(let x=s;x<d;x++)y[w+Math.floor(x/32)]|=1<<(x&31)&4294967295}}getRow(s,a){a==null||a.getSize()<this.width?a=new ce(this.width):a.clear();let l=this.rowSize,u=this.bits,d=s*l;for(let f=0;f<l;f++)a.setBulk(f*32,u[d+f]);return a}setRow(s,a){M.arraycopy(a.getBitArray(),0,this.bits,s*this.rowSize,this.rowSize)}rotate180(){let s=this.getWidth(),a=this.getHeight(),l=new ce(s),u=new ce(s);for(let d=0,f=Math.floor((a+1)/2);d<f;d++)l=this.getRow(d,l),u=this.getRow(a-1-d,u),l.reverse(),u.reverse(),this.setRow(d,u),this.setRow(a-1-d,l)}getEnclosingRectangle(){let s=this.width,a=this.height,l=this.rowSize,u=this.bits,d=s,f=a,p=-1,y=-1;for(let C=0;C<a;C++)for(let w=0;w<l;w++){let x=u[C*l+w];if(x!==0){if(C<f&&(f=C),C>y&&(y=C),w*32<d){let E=0;for(;!(x<<31-E&4294967295);)E++;w*32+E<d&&(d=w*32+E)}if(w*32+31>p){let E=31;for(;!(x>>>E);)E--;w*32+E>p&&(p=w*32+E)}}}return p<d||y<f?null:Int32Array.from([d,f,p-d+1,y-f+1])}getTopLeftOnBit(){let s=this.rowSize,a=this.bits,l=0;for(;l<a.length&&a[l]===0;)l++;if(l===a.length)return null;let u=l/s,d=l%s*32,f=a[l],p=0;for(;!(f<<31-p&4294967295);)p++;return d+=p,Int32Array.from([d,u])}getBottomRightOnBit(){let s=this.rowSize,a=this.bits,l=a.length-1;for(;l>=0&&a[l]===0;)l--;if(l<0)return null;let u=Math.floor(l/s),d=Math.floor(l%s)*32,f=a[l],p=31;for(;!(f>>>p);)p--;return d+=p,Int32Array.from([d,u])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(s){if(!(s instanceof dn))return!1;let a=s;return this.width===a.width&&this.height===a.height&&this.rowSize===a.rowSize&&X.equals(this.bits,a.bits)}hashCode(){let s=this.width;return s=31*s+this.width,s=31*s+this.height,s=31*s+this.rowSize,s=31*s+X.hashCode(this.bits),s}toString(s="X ",a="  ",l=`
`){return this.buildToString(s,a,l)}buildToString(s,a,l){let u=new wt;for(let d=0,f=this.height;d<f;d++){for(let p=0,y=this.width;p<y;p++)u.append(this.get(p,d)?s:a);u.append(l)}return u.toString()}clone(){return new dn(this.width,this.height,this.rowSize,this.bits.slice())}}let V=(()=>{class _ extends h{static getNotFoundInstance(){return new _}}return _.kind="NotFoundException",_})();class fn extends I{constructor(s){super(s),this.luminances=fn.EMPTY,this.buckets=new Int32Array(fn.LUMINANCE_BUCKETS)}getBlackRow(s,a){let l=this.getLuminanceSource(),u=l.getWidth();a==null||a.getSize()<u?a=new ce(u):a.clear(),this.initArrays(u);let d=l.getRow(s,this.luminances),f=this.buckets;for(let y=0;y<u;y++)f[(d[y]&255)>>fn.LUMINANCE_SHIFT]++;let p=fn.estimateBlackPoint(f);if(u<3)for(let y=0;y<u;y++)(d[y]&255)<p&&a.set(y);else{let y=d[0]&255,C=d[1]&255;for(let w=1;w<u-1;w++){let x=d[w+1]&255;(C*4-y-x)/2<p&&a.set(w),y=C,C=x}}return a}getBlackMatrix(){let s=this.getLuminanceSource(),a=s.getWidth(),l=s.getHeight(),u=new dn(a,l);this.initArrays(a);let d=this.buckets;for(let y=1;y<5;y++){let C=Math.floor(l*y/5),w=s.getRow(C,this.luminances),x=Math.floor(a*4/5);for(let E=Math.floor(a/5);E<x;E++){let D=w[E]&255;d[D>>fn.LUMINANCE_SHIFT]++}}let f=fn.estimateBlackPoint(d),p=s.getMatrix();for(let y=0;y<l;y++){let C=y*a;for(let w=0;w<a;w++)(p[C+w]&255)<f&&u.set(w,y)}return u}createBinarizer(s){return new fn(s)}initArrays(s){this.luminances.length<s&&(this.luminances=new Uint8ClampedArray(s));let a=this.buckets;for(let l=0;l<fn.LUMINANCE_BUCKETS;l++)a[l]=0}static estimateBlackPoint(s){let a=s.length,l=0,u=0,d=0;for(let w=0;w<a;w++)s[w]>d&&(u=w,d=s[w]),s[w]>l&&(l=s[w]);let f=0,p=0;for(let w=0;w<a;w++){let x=w-u,E=s[w]*x*x;E>p&&(f=w,p=E)}if(u>f){let w=u;u=f,f=w}if(f-u<=a/16)throw new V;let y=f-1,C=-1;for(let w=f-1;w>u;w--){let x=w-u,E=x*x*(f-w)*(l-s[w]);E>C&&(y=w,C=E)}return y<<fn.LUMINANCE_SHIFT}}fn.LUMINANCE_BITS=5,fn.LUMINANCE_SHIFT=8-fn.LUMINANCE_BITS,fn.LUMINANCE_BUCKETS=1<<fn.LUMINANCE_BITS,fn.EMPTY=Uint8ClampedArray.from([0]);class Fe extends fn{constructor(s){super(s),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;let s=this.getLuminanceSource(),a=s.getWidth(),l=s.getHeight();if(a>=Fe.MINIMUM_DIMENSION&&l>=Fe.MINIMUM_DIMENSION){let u=s.getMatrix(),d=a>>Fe.BLOCK_SIZE_POWER;a&Fe.BLOCK_SIZE_MASK&&d++;let f=l>>Fe.BLOCK_SIZE_POWER;l&Fe.BLOCK_SIZE_MASK&&f++;let p=Fe.calculateBlackPoints(u,d,f,a,l),y=new dn(a,l);Fe.calculateThresholdForBlock(u,d,f,a,l,p,y),this.matrix=y}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(s){return new Fe(s)}static calculateThresholdForBlock(s,a,l,u,d,f,p){let y=d-Fe.BLOCK_SIZE,C=u-Fe.BLOCK_SIZE;for(let w=0;w<l;w++){let x=w<<Fe.BLOCK_SIZE_POWER;x>y&&(x=y);let E=Fe.cap(w,2,l-3);for(let D=0;D<a;D++){let O=D<<Fe.BLOCK_SIZE_POWER;O>C&&(O=C);let N=Fe.cap(D,2,a-3),k=0;for(let Z=-2;Z<=2;Z++){let ie=f[E+Z];k+=ie[N-2]+ie[N-1]+ie[N]+ie[N+1]+ie[N+2]}let L=k/25;Fe.thresholdBlock(s,O,x,L,u,p)}}}static cap(s,a,l){return s<a?a:s>l?l:s}static thresholdBlock(s,a,l,u,d,f){for(let p=0,y=l*d+a;p<Fe.BLOCK_SIZE;p++,y+=d)for(let C=0;C<Fe.BLOCK_SIZE;C++)(s[y+C]&255)<=u&&f.set(a+C,l+p)}static calculateBlackPoints(s,a,l,u,d){let f=d-Fe.BLOCK_SIZE,p=u-Fe.BLOCK_SIZE,y=new Array(l);for(let C=0;C<l;C++){y[C]=new Int32Array(a);let w=C<<Fe.BLOCK_SIZE_POWER;w>f&&(w=f);for(let x=0;x<a;x++){let E=x<<Fe.BLOCK_SIZE_POWER;E>p&&(E=p);let D=0,O=255,N=0;for(let L=0,Z=w*u+E;L<Fe.BLOCK_SIZE;L++,Z+=u){for(let ie=0;ie<Fe.BLOCK_SIZE;ie++){let U=s[Z+ie]&255;D+=U,U<O&&(O=U),U>N&&(N=U)}if(N-O>Fe.MIN_DYNAMIC_RANGE)for(L++,Z+=u;L<Fe.BLOCK_SIZE;L++,Z+=u)for(let ie=0;ie<Fe.BLOCK_SIZE;ie++)D+=s[Z+ie]&255}let k=D>>Fe.BLOCK_SIZE_POWER*2;if(N-O<=Fe.MIN_DYNAMIC_RANGE&&(k=O/2,C>0&&x>0)){let L=(y[C-1][x]+2*y[C][x-1]+y[C-1][x-1])/4;O<L&&(k=L)}y[C][x]=k}}return y}}Fe.BLOCK_SIZE_POWER=3,Fe.BLOCK_SIZE=1<<Fe.BLOCK_SIZE_POWER,Fe.BLOCK_SIZE_MASK=Fe.BLOCK_SIZE-1,Fe.MINIMUM_DIMENSION=Fe.BLOCK_SIZE*5,Fe.MIN_DYNAMIC_RANGE=24;class cl{constructor(s,a){this.width=s,this.height=a}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(s,a,l,u){throw new or("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new or("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new or("This luminance source does not support rotation by 45 degrees.")}toString(){let s=new Uint8ClampedArray(this.width),a=new wt;for(let l=0;l<this.height;l++){let u=this.getRow(l,s);for(let d=0;d<this.width;d++){let f=u[d]&255,p;f<64?p="#":f<128?p="+":f<192?p=".":p=" ",a.append(p)}a.append(`
`)}return a.toString()}}class Qi extends cl{constructor(s){super(s.getWidth(),s.getHeight()),this.delegate=s}getRow(s,a){let l=this.delegate.getRow(s,a),u=this.getWidth();for(let d=0;d<u;d++)l[d]=255-(l[d]&255);return l}getMatrix(){let s=this.delegate.getMatrix(),a=this.getWidth()*this.getHeight(),l=new Uint8ClampedArray(a);for(let u=0;u<a;u++)l[u]=255-(s[u]&255);return l}isCropSupported(){return this.delegate.isCropSupported()}crop(s,a,l,u){return new Qi(this.delegate.crop(s,a,l,u))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new Qi(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new Qi(this.delegate.rotateCounterClockwise45())}}class Ki extends cl{constructor(s){super(s.width,s.height),this.canvas=s,this.tempCanvasElement=null,this.buffer=Ki.makeBufferFromCanvasImageData(s)}static makeBufferFromCanvasImageData(s){let a=s.getContext("2d").getImageData(0,0,s.width,s.height);return Ki.toGrayscaleBuffer(a.data,s.width,s.height)}static toGrayscaleBuffer(s,a,l){let u=new Uint8ClampedArray(a*l);for(let d=0,f=0,p=s.length;d<p;d+=4,f++){let y;if(s[d+3]===0)y=255;else{let w=s[d],x=s[d+1],E=s[d+2];y=306*w+601*x+117*E+512>>10}u[f]=y}return u}getRow(s,a){if(s<0||s>=this.getHeight())throw new m("Requested row is outside the image: "+s);let l=this.getWidth(),u=s*l;return a===null?a=this.buffer.slice(u,u+l):(a.length<l&&(a=new Uint8ClampedArray(l)),a.set(this.buffer.slice(u,u+l))),a}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(s,a,l,u){return super.crop(s,a,l,u),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){let s=this.canvas.ownerDocument.createElement("canvas");s.width=this.canvas.width,s.height=this.canvas.height,this.tempCanvasElement=s}return this.tempCanvasElement}rotate(s){let a=this.getTempCanvasElement(),l=a.getContext("2d"),u=s*Ki.DEGREE_TO_RADIANS,d=this.canvas.width,f=this.canvas.height,p=Math.ceil(Math.abs(Math.cos(u))*d+Math.abs(Math.sin(u))*f),y=Math.ceil(Math.abs(Math.sin(u))*d+Math.abs(Math.cos(u))*f);return a.width=p,a.height=y,l.translate(p/2,y/2),l.rotate(u),l.drawImage(this.canvas,d/-2,f/-2),this.buffer=Ki.makeBufferFromCanvasImageData(a),this}invert(){return new Qi(this)}}Ki.DEGREE_TO_RADIANS=Math.PI/180;class E_{constructor(s,a,l){this.deviceId=s,this.label=a,this.kind="videoinput",this.groupId=l||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var Fn=(globalThis||global||self||window||void 0)&&(globalThis||global||self||window||void 0).__awaiter||function(_,s,a,l){function u(d){return d instanceof a?d:new a(function(f){f(d)})}return new(a||(a=Promise))(function(d,f){function p(w){try{C(l.next(w))}catch(x){f(x)}}function y(w){try{C(l.throw(w))}catch(x){f(x)}}function C(w){w.done?d(w.value):u(w.value).then(p,y)}C((l=l.apply(_,s||[])).next())})};class Vo{constructor(s,a=500,l){this.reader=s,this.timeBetweenScansMillis=a,this._hints=l,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(s){this._timeBetweenDecodingAttempts=s<0?0:s}set hints(s){this._hints=s||null}get hints(){return this._hints}listVideoInputDevices(){return Fn(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");let s=yield navigator.mediaDevices.enumerateDevices(),a=[];for(let l of s){let u=l.kind==="video"?"videoinput":l.kind;if(u!=="videoinput")continue;let d=l.deviceId||l.id,f=l.label||`Video device ${a.length+1}`,p=l.groupId,y={deviceId:d,label:f,kind:u,groupId:p};a.push(y)}return a})}getVideoInputDevices(){return Fn(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(a=>new E_(a.deviceId,a.label))})}findDeviceById(s){return Fn(this,void 0,void 0,function*(){let a=yield this.listVideoInputDevices();return a?a.find(l=>l.deviceId===s):null})}decodeFromInputVideoDevice(s,a){return Fn(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(s,a)})}decodeOnceFromVideoDevice(s,a){return Fn(this,void 0,void 0,function*(){this.reset();let l;s?l={deviceId:{exact:s}}:l={facingMode:"environment"};let u={video:l};return yield this.decodeOnceFromConstraints(u,a)})}decodeOnceFromConstraints(s,a){return Fn(this,void 0,void 0,function*(){let l=yield navigator.mediaDevices.getUserMedia(s);return yield this.decodeOnceFromStream(l,a)})}decodeOnceFromStream(s,a){return Fn(this,void 0,void 0,function*(){this.reset();let l=yield this.attachStreamToVideo(s,a);return yield this.decodeOnce(l)})}decodeFromInputVideoDeviceContinuously(s,a,l){return Fn(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(s,a,l)})}decodeFromVideoDevice(s,a,l){return Fn(this,void 0,void 0,function*(){let u;s?u={deviceId:{exact:s}}:u={facingMode:"environment"};let d={video:u};return yield this.decodeFromConstraints(d,a,l)})}decodeFromConstraints(s,a,l){return Fn(this,void 0,void 0,function*(){let u=yield navigator.mediaDevices.getUserMedia(s);return yield this.decodeFromStream(u,a,l)})}decodeFromStream(s,a,l){return Fn(this,void 0,void 0,function*(){this.reset();let u=yield this.attachStreamToVideo(s,a);return yield this.decodeContinuously(u,l)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(s,a){return Fn(this,void 0,void 0,function*(){let l=this.prepareVideoElement(a);return this.addVideoSource(l,s),this.videoElement=l,this.stream=s,yield this.playVideoOnLoadAsync(l),l})}playVideoOnLoadAsync(s){return new Promise((a,l)=>this.playVideoOnLoad(s,()=>a()))}playVideoOnLoad(s,a){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(s),s.addEventListener("ended",this.videoEndedListener),s.addEventListener("canplay",this.videoCanPlayListener),s.addEventListener("playing",a),this.tryPlayVideo(s)}isVideoPlaying(s){return s.currentTime>0&&!s.paused&&!s.ended&&s.readyState>2}tryPlayVideo(s){return Fn(this,void 0,void 0,function*(){if(this.isVideoPlaying(s)){console.warn("Trying to play video that is already playing.");return}try{yield s.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(s,a){let l=document.getElementById(s);if(!l)throw new g(`element with id '${s}' not found`);if(l.nodeName.toLowerCase()!==a.toLowerCase())throw new g(`element with id '${s}' must be an ${a} element`);return l}decodeFromImage(s,a){if(!s&&!a)throw new g("either imageElement with a src set or an url must be provided");return a&&!s?this.decodeFromImageUrl(a):this.decodeFromImageElement(s)}decodeFromVideo(s,a){if(!s&&!a)throw new g("Either an element with a src set or an URL must be provided");return a&&!s?this.decodeFromVideoUrl(a):this.decodeFromVideoElement(s)}decodeFromVideoContinuously(s,a,l){if(s===void 0&&a===void 0)throw new g("Either an element with a src set or an URL must be provided");return a&&!s?this.decodeFromVideoUrlContinuously(a,l):this.decodeFromVideoElementContinuously(s,l)}decodeFromImageElement(s){if(!s)throw new g("An image element must be provided.");this.reset();let a=this.prepareImageElement(s);this.imageElement=a;let l;return this.isImageLoaded(a)?l=this.decodeOnce(a,!1,!0):l=this._decodeOnLoadImage(a),l}decodeFromVideoElement(s){let a=this._decodeFromVideoElementSetup(s);return this._decodeOnLoadVideo(a)}decodeFromVideoElementContinuously(s,a){let l=this._decodeFromVideoElementSetup(s);return this._decodeOnLoadVideoContinuously(l,a)}_decodeFromVideoElementSetup(s){if(!s)throw new g("A video element must be provided.");this.reset();let a=this.prepareVideoElement(s);return this.videoElement=a,a}decodeFromImageUrl(s){if(!s)throw new g("An URL must be provided.");this.reset();let a=this.prepareImageElement();this.imageElement=a;let l=this._decodeOnLoadImage(a);return a.src=s,l}decodeFromVideoUrl(s){if(!s)throw new g("An URL must be provided.");this.reset();let a=this.prepareVideoElement(),l=this.decodeFromVideoElement(a);return a.src=s,l}decodeFromVideoUrlContinuously(s,a){if(!s)throw new g("An URL must be provided.");this.reset();let l=this.prepareVideoElement(),u=this.decodeFromVideoElementContinuously(l,a);return l.src=s,u}_decodeOnLoadImage(s){return new Promise((a,l)=>{this.imageLoadedListener=()=>this.decodeOnce(s,!1,!0).then(a,l),s.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(s){return Fn(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(s),yield this.decodeOnce(s)})}_decodeOnLoadVideoContinuously(s,a){return Fn(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(s),this.decodeContinuously(s,a)})}isImageLoaded(s){return!(!s.complete||s.naturalWidth===0)}prepareImageElement(s){let a;return typeof s>"u"&&(a=document.createElement("img"),a.width=200,a.height=200),typeof s=="string"&&(a=this.getMediaElement(s,"img")),s instanceof HTMLImageElement&&(a=s),a}prepareVideoElement(s){let a;return!s&&typeof document<"u"&&(a=document.createElement("video"),a.width=200,a.height=200),typeof s=="string"&&(a=this.getMediaElement(s,"video")),s instanceof HTMLVideoElement&&(a=s),a.setAttribute("autoplay","true"),a.setAttribute("muted","true"),a.setAttribute("playsinline","true"),a}decodeOnce(s,a=!0,l=!0){this._stopAsyncDecode=!1;let u=(d,f)=>{if(this._stopAsyncDecode){f(new V("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{let p=this.decode(s);d(p)}catch(p){let y=a&&p instanceof V,w=(p instanceof b||p instanceof W)&&l;if(y||w)return setTimeout(u,this._timeBetweenDecodingAttempts,d,f);f(p)}};return new Promise((d,f)=>u(d,f))}decodeContinuously(s,a){this._stopContinuousDecode=!1;let l=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{let u=this.decode(s);a(u,null),setTimeout(l,this.timeBetweenScansMillis)}catch(u){a(null,u);let d=u instanceof b||u instanceof W,f=u instanceof V;(d||f)&&setTimeout(l,this._timeBetweenDecodingAttempts)}};l()}decode(s){let a=this.createBinaryBitmap(s);return this.decodeBitmap(a)}_isHTMLVideoElement(s){return s.videoWidth!==0}drawFrameOnCanvas(s,a,l){a||(a={sx:0,sy:0,sWidth:s.videoWidth,sHeight:s.videoHeight,dx:0,dy:0,dWidth:s.videoWidth,dHeight:s.videoHeight}),l||(l=this.captureCanvasContext),l.drawImage(s,a.sx,a.sy,a.sWidth,a.sHeight,a.dx,a.dy,a.dWidth,a.dHeight)}drawImageOnCanvas(s,a,l=this.captureCanvasContext){a||(a={sx:0,sy:0,sWidth:s.naturalWidth,sHeight:s.naturalHeight,dx:0,dy:0,dWidth:s.naturalWidth,dHeight:s.naturalHeight}),l||(l=this.captureCanvasContext),l.drawImage(s,a.sx,a.sy,a.sWidth,a.sHeight,a.dx,a.dy,a.dWidth,a.dHeight)}createBinaryBitmap(s){let a=this.getCaptureCanvasContext(s);this._isHTMLVideoElement(s)?this.drawFrameOnCanvas(s):this.drawImageOnCanvas(s);let l=this.getCaptureCanvas(s),u=new Ki(l),d=new Fe(u);return new v(d)}getCaptureCanvasContext(s){if(!this.captureCanvasContext){let l=this.getCaptureCanvas(s).getContext("2d");this.captureCanvasContext=l}return this.captureCanvasContext}getCaptureCanvas(s){if(!this.captureCanvas){let a=this.createCaptureCanvas(s);this.captureCanvas=a}return this.captureCanvas}decodeBitmap(s){return this.reader.decode(s,this._hints)}createCaptureCanvas(s){if(typeof document>"u")return this._destroyCaptureCanvas(),null;let a=document.createElement("canvas"),l,u;return typeof s<"u"&&(s instanceof HTMLVideoElement?(l=s.videoWidth,u=s.videoHeight):s instanceof HTMLImageElement&&(l=s.naturalWidth||s.width,u=s.naturalHeight||s.height)),a.style.width=l+"px",a.style.height=u+"px",a.width=l,a.height=u,a}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(s=>s.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(s,a){try{s.srcObject=a}catch{s.src=URL.createObjectURL(a)}}cleanVideoSource(s){try{s.srcObject=null}catch{s.src=""}this.videoElement.removeAttribute("src")}}class Ln{constructor(s,a,l=a==null?0:8*a.length,u,d,f=M.currentTimeMillis()){this.text=s,this.rawBytes=a,this.numBits=l,this.resultPoints=u,this.format=d,this.timestamp=f,this.text=s,this.rawBytes=a,l==null?this.numBits=a==null?0:8*a.length:this.numBits=l,this.resultPoints=u,this.format=d,this.resultMetadata=null,f==null?this.timestamp=M.currentTimeMillis():this.timestamp=f}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(s,a){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(s,a)}putAllMetadata(s){s!==null&&(this.resultMetadata===null?this.resultMetadata=s:this.resultMetadata=new Map(s))}addResultPoints(s){let a=this.resultPoints;if(a===null)this.resultPoints=s;else if(s!==null&&s.length>0){let l=new Array(a.length+s.length);M.arraycopy(a,0,l,0,a.length),M.arraycopy(s,0,l,a.length,s.length),this.resultPoints=l}}getTimestamp(){return this.timestamp}toString(){return this.text}}var I_=function(_){return _[_.AZTEC=0]="AZTEC",_[_.CODABAR=1]="CODABAR",_[_.CODE_39=2]="CODE_39",_[_.CODE_93=3]="CODE_93",_[_.CODE_128=4]="CODE_128",_[_.DATA_MATRIX=5]="DATA_MATRIX",_[_.EAN_8=6]="EAN_8",_[_.EAN_13=7]="EAN_13",_[_.ITF=8]="ITF",_[_.MAXICODE=9]="MAXICODE",_[_.PDF_417=10]="PDF_417",_[_.QR_CODE=11]="QR_CODE",_[_.RSS_14=12]="RSS_14",_[_.RSS_EXPANDED=13]="RSS_EXPANDED",_[_.UPC_A=14]="UPC_A",_[_.UPC_E=15]="UPC_E",_[_.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION",_}(I_||{}),Ce=I_,S_=function(_){return _[_.OTHER=0]="OTHER",_[_.ORIENTATION=1]="ORIENTATION",_[_.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",_[_.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",_[_.ISSUE_NUMBER=4]="ISSUE_NUMBER",_[_.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",_[_.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",_[_.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",_[_.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",_[_.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",_[_.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY",_}(S_||{}),hn=S_;class ul{constructor(s,a,l,u,d=-1,f=-1){this.rawBytes=s,this.text=a,this.byteSegments=l,this.ecLevel=u,this.structuredAppendSequenceNumber=d,this.structuredAppendParity=f,this.numBits=s==null?0:8*s.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(s){this.numBits=s}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(s){this.errorsCorrected=s}getErasures(){return this.erasures}setErasures(s){this.erasures=s}getOther(){return this.other}setOther(s){this.other=s}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class dl{exp(s){return this.expTable[s]}log(s){if(s===0)throw new m;return this.logTable[s]}static addOrSubtract(s,a){return s^a}}class Yn{constructor(s,a){if(a.length===0)throw new m;this.field=s;let l=a.length;if(l>1&&a[0]===0){let u=1;for(;u<l&&a[u]===0;)u++;u===l?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(l-u),M.arraycopy(a,u,this.coefficients,0,this.coefficients.length))}else this.coefficients=a}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(s){return this.coefficients[this.coefficients.length-1-s]}evaluateAt(s){if(s===0)return this.getCoefficient(0);let a=this.coefficients,l;if(s===1){l=0;for(let f=0,p=a.length;f!==p;f++){let y=a[f];l=dl.addOrSubtract(l,y)}return l}l=a[0];let u=a.length,d=this.field;for(let f=1;f<u;f++)l=dl.addOrSubtract(d.multiply(s,l),a[f]);return l}addOrSubtract(s){if(!this.field.equals(s.field))throw new m("GenericGFPolys do not have same GenericGF field");if(this.isZero())return s;if(s.isZero())return this;let a=this.coefficients,l=s.coefficients;if(a.length>l.length){let f=a;a=l,l=f}let u=new Int32Array(l.length),d=l.length-a.length;M.arraycopy(l,0,u,0,d);for(let f=d;f<l.length;f++)u[f]=dl.addOrSubtract(a[f-d],l[f]);return new Yn(this.field,u)}multiply(s){if(!this.field.equals(s.field))throw new m("GenericGFPolys do not have same GenericGF field");if(this.isZero()||s.isZero())return this.field.getZero();let a=this.coefficients,l=a.length,u=s.coefficients,d=u.length,f=new Int32Array(l+d-1),p=this.field;for(let y=0;y<l;y++){let C=a[y];for(let w=0;w<d;w++)f[y+w]=dl.addOrSubtract(f[y+w],p.multiply(C,u[w]))}return new Yn(p,f)}multiplyScalar(s){if(s===0)return this.field.getZero();if(s===1)return this;let a=this.coefficients.length,l=this.field,u=new Int32Array(a),d=this.coefficients;for(let f=0;f<a;f++)u[f]=l.multiply(d[f],s);return new Yn(l,u)}multiplyByMonomial(s,a){if(s<0)throw new m;if(a===0)return this.field.getZero();let l=this.coefficients,u=l.length,d=new Int32Array(u+s),f=this.field;for(let p=0;p<u;p++)d[p]=f.multiply(l[p],a);return new Yn(f,d)}divide(s){if(!this.field.equals(s.field))throw new m("GenericGFPolys do not have same GenericGF field");if(s.isZero())throw new m("Divide by 0");let a=this.field,l=a.getZero(),u=this,d=s.getCoefficient(s.getDegree()),f=a.inverse(d);for(;u.getDegree()>=s.getDegree()&&!u.isZero();){let p=u.getDegree()-s.getDegree(),y=a.multiply(u.getCoefficient(u.getDegree()),f),C=s.multiplyByMonomial(p,y),w=a.buildMonomial(p,y);l=l.addOrSubtract(w),u=u.addOrSubtract(C)}return[l,u]}toString(){let s="";for(let a=this.getDegree();a>=0;a--){let l=this.getCoefficient(a);if(l!==0){if(l<0?(s+=" - ",l=-l):s.length>0&&(s+=" + "),a===0||l!==1){let u=this.field.log(l);u===0?s+="1":u===1?s+="a":(s+="a^",s+=u)}a!==0&&(a===1?s+="x":(s+="x^",s+=a))}}return s}}let vp=(()=>{class _ extends h{}return _.kind="ArithmeticException",_})();class lt extends dl{constructor(s,a,l){super(),this.primitive=s,this.size=a,this.generatorBase=l;let u=new Int32Array(a),d=1;for(let p=0;p<a;p++)u[p]=d,d*=2,d>=a&&(d^=s,d&=a-1);this.expTable=u;let f=new Int32Array(a);for(let p=0;p<a-1;p++)f[u[p]]=p;this.logTable=f,this.zero=new Yn(this,Int32Array.from([0])),this.one=new Yn(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(s,a){if(s<0)throw new m;if(a===0)return this.zero;let l=new Int32Array(s+1);return l[0]=a,new Yn(this,l)}inverse(s){if(s===0)throw new vp;return this.expTable[this.size-this.logTable[s]-1]}multiply(s,a){return s===0||a===0?0:this.expTable[(this.logTable[s]+this.logTable[a])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+$.toHexString(this.primitive)+","+this.size+")"}equals(s){return s===this}}lt.AZTEC_DATA_12=new lt(4201,4096,1),lt.AZTEC_DATA_10=new lt(1033,1024,1),lt.AZTEC_DATA_6=new lt(67,64,1),lt.AZTEC_PARAM=new lt(19,16,1),lt.QR_CODE_FIELD_256=new lt(285,256,0),lt.DATA_MATRIX_FIELD_256=new lt(301,256,1),lt.AZTEC_DATA_8=lt.DATA_MATRIX_FIELD_256,lt.MAXICODE_FIELD_64=lt.AZTEC_DATA_6;let fl=(()=>{class _ extends h{}return _.kind="ReedSolomonException",_})(),bi=(()=>{class _ extends h{}return _.kind="IllegalStateException",_})();class hl{constructor(s){this.field=s}decode(s,a){let l=this.field,u=new Yn(l,s),d=new Int32Array(a),f=!0;for(let D=0;D<a;D++){let O=u.evaluateAt(l.exp(D+l.getGeneratorBase()));d[d.length-1-D]=O,O!==0&&(f=!1)}if(f)return;let p=new Yn(l,d),y=this.runEuclideanAlgorithm(l.buildMonomial(a,1),p,a),C=y[0],w=y[1],x=this.findErrorLocations(C),E=this.findErrorMagnitudes(w,x);for(let D=0;D<x.length;D++){let O=s.length-1-l.log(x[D]);if(O<0)throw new fl("Bad error location");s[O]=lt.addOrSubtract(s[O],E[D])}}runEuclideanAlgorithm(s,a,l){if(s.getDegree()<a.getDegree()){let D=s;s=a,a=D}let u=this.field,d=s,f=a,p=u.getZero(),y=u.getOne();for(;f.getDegree()>=(l/2|0);){let D=d,O=p;if(d=f,p=y,d.isZero())throw new fl("r_{i-1} was zero");f=D;let N=u.getZero(),k=d.getCoefficient(d.getDegree()),L=u.inverse(k);for(;f.getDegree()>=d.getDegree()&&!f.isZero();){let Z=f.getDegree()-d.getDegree(),ie=u.multiply(f.getCoefficient(f.getDegree()),L);N=N.addOrSubtract(u.buildMonomial(Z,ie)),f=f.addOrSubtract(d.multiplyByMonomial(Z,ie))}if(y=N.multiply(p).addOrSubtract(O),f.getDegree()>=d.getDegree())throw new bi("Division algorithm failed to reduce polynomial?")}let C=y.getCoefficient(0);if(C===0)throw new fl("sigmaTilde(0) was zero");let w=u.inverse(C),x=y.multiplyScalar(w),E=f.multiplyScalar(w);return[x,E]}findErrorLocations(s){let a=s.getDegree();if(a===1)return Int32Array.from([s.getCoefficient(1)]);let l=new Int32Array(a),u=0,d=this.field;for(let f=1;f<d.getSize()&&u<a;f++)s.evaluateAt(f)===0&&(l[u]=d.inverse(f),u++);if(u!==a)throw new fl("Error locator degree does not match number of roots");return l}findErrorMagnitudes(s,a){let l=a.length,u=new Int32Array(l),d=this.field;for(let f=0;f<l;f++){let p=d.inverse(a[f]),y=1;for(let C=0;C<l;C++)if(f!==C){let w=d.multiply(a[C],p),x=w&1?w&-2:w|1;y=d.multiply(y,x)}u[f]=d.multiply(s.evaluateAt(p),d.inverse(y)),d.getGeneratorBase()!==0&&(u[f]=d.multiply(u[f],p))}return u}}var Rn=function(_){return _[_.UPPER=0]="UPPER",_[_.LOWER=1]="LOWER",_[_.MIXED=2]="MIXED",_[_.DIGIT=3]="DIGIT",_[_.PUNCT=4]="PUNCT",_[_.BINARY=5]="BINARY",_}(Rn||{});let bp=(()=>{class _{decode(a){this.ddata=a;let l=a.getBits(),u=this.extractBits(l),d=this.correctBits(u),f=_.convertBoolArrayToByteArray(d),p=_.getEncodedData(d),y=new ul(f,p,null,null);return y.setNumBits(d.length),y}static highLevelDecode(a){return this.getEncodedData(a)}static getEncodedData(a){let l=a.length,u=Rn.UPPER,d=Rn.UPPER,f="",p=0;for(;p<l;)if(d===Rn.BINARY){if(l-p<5)break;let y=_.readCode(a,p,5);if(p+=5,y===0){if(l-p<11)break;y=_.readCode(a,p,11)+31,p+=11}for(let C=0;C<y;C++){if(l-p<8){p=l;break}let w=_.readCode(a,p,8);f+=Ie.castAsNonUtf8Char(w),p+=8}d=u}else{let y=d===Rn.DIGIT?4:5;if(l-p<y)break;let C=_.readCode(a,p,y);p+=y;let w=_.getCharacter(d,C);w.startsWith("CTRL_")?(u=d,d=_.getTable(w.charAt(5)),w.charAt(6)==="L"&&(u=d)):(f+=w,d=u)}return f}static getTable(a){switch(a){case"L":return Rn.LOWER;case"P":return Rn.PUNCT;case"M":return Rn.MIXED;case"D":return Rn.DIGIT;case"B":return Rn.BINARY;case"U":default:return Rn.UPPER}}static getCharacter(a,l){switch(a){case Rn.UPPER:return _.UPPER_TABLE[l];case Rn.LOWER:return _.LOWER_TABLE[l];case Rn.MIXED:return _.MIXED_TABLE[l];case Rn.PUNCT:return _.PUNCT_TABLE[l];case Rn.DIGIT:return _.DIGIT_TABLE[l];default:throw new bi("Bad table")}}correctBits(a){let l,u;this.ddata.getNbLayers()<=2?(u=6,l=lt.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(u=8,l=lt.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(u=10,l=lt.AZTEC_DATA_10):(u=12,l=lt.AZTEC_DATA_12);let d=this.ddata.getNbDatablocks(),f=a.length/u;if(f<d)throw new W;let p=a.length%u,y=new Int32Array(f);for(let D=0;D<f;D++,p+=u)y[D]=_.readCode(a,p,u);try{new hl(l).decode(y,f-d)}catch(D){throw new W(D)}let C=(1<<u)-1,w=0;for(let D=0;D<d;D++){let O=y[D];if(O===0||O===C)throw new W;(O===1||O===C-1)&&w++}let x=new Array(d*u-w),E=0;for(let D=0;D<d;D++){let O=y[D];if(O===1||O===C-1)x.fill(O>1,E,E+u-1),E+=u-1;else for(let N=u-1;N>=0;--N)x[E++]=(O&1<<N)!==0}return x}extractBits(a){let l=this.ddata.isCompact(),u=this.ddata.getNbLayers(),d=(l?11:14)+u*4,f=new Int32Array(d),p=new Array(this.totalBitsInLayer(u,l));if(l)for(let y=0;y<f.length;y++)f[y]=y;else{let y=d+1+2*$.truncDivision($.truncDivision(d,2)-1,15),C=d/2,w=$.truncDivision(y,2);for(let x=0;x<C;x++){let E=x+$.truncDivision(x,15);f[C-x-1]=w-E-1,f[C+x]=w+E+1}}for(let y=0,C=0;y<u;y++){let w=(u-y)*4+(l?9:12),x=y*2,E=d-1-x;for(let D=0;D<w;D++){let O=D*2;for(let N=0;N<2;N++)p[C+O+N]=a.get(f[x+N],f[x+D]),p[C+2*w+O+N]=a.get(f[x+D],f[E-N]),p[C+4*w+O+N]=a.get(f[E-N],f[E-D]),p[C+6*w+O+N]=a.get(f[E-D],f[x+N])}C+=w*8}return p}static readCode(a,l,u){let d=0;for(let f=l;f<l+u;f++)d<<=1,a[f]&&(d|=1);return d}static readByte(a,l){let u=a.length-l;return u>=8?_.readCode(a,l,8):_.readCode(a,l,u)<<8-u}static convertBoolArrayToByteArray(a){let l=new Uint8Array((a.length+7)/8);for(let u=0;u<l.length;u++)l[u]=_.readByte(a,8*u);return l}totalBitsInLayer(a,l){return((l?88:112)+16*a)*a}}return _.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],_.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],_.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],_.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],_.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],_})();class tt{constructor(){}static round(s){return s===NaN?0:s<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:s>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:s+(s<0?-.5:.5)|0}static distance(s,a,l,u){let d=s-l,f=a-u;return Math.sqrt(d*d+f*f)}static sum(s){let a=0;for(let l=0,u=s.length;l!==u;l++){let d=s[l];a+=d}return a}}class _u{static floatToIntBits(s){return s}}_u.MAX_VALUE=Number.MAX_SAFE_INTEGER;class ue{constructor(s,a){this.x=s,this.y=a}getX(){return this.x}getY(){return this.y}equals(s){if(s instanceof ue){let a=s;return this.x===a.x&&this.y===a.y}return!1}hashCode(){return 31*_u.floatToIntBits(this.x)+_u.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(s){let a=this.distance(s[0],s[1]),l=this.distance(s[1],s[2]),u=this.distance(s[0],s[2]),d,f,p;if(l>=a&&l>=u?(f=s[0],d=s[1],p=s[2]):u>=l&&u>=a?(f=s[1],d=s[0],p=s[2]):(f=s[2],d=s[0],p=s[1]),this.crossProductZ(d,f,p)<0){let y=d;d=p,p=y}s[0]=d,s[1]=f,s[2]=p}static distance(s,a){return tt.distance(s.x,s.y,a.x,a.y)}static crossProductZ(s,a,l){let u=a.x,d=a.y;return(l.x-u)*(s.y-d)-(l.y-d)*(s.x-u)}}class wu{constructor(s,a){this.bits=s,this.points=a}getBits(){return this.bits}getPoints(){return this.points}}class D_ extends wu{constructor(s,a,l,u,d){super(s,a),this.compact=l,this.nbDatablocks=u,this.nbLayers=d}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}let vu=(()=>{class _{constructor(a,l,u,d){this.image=a,this.height=a.getHeight(),this.width=a.getWidth(),l==null&&(l=_.INIT_SIZE),u==null&&(u=a.getWidth()/2|0),d==null&&(d=a.getHeight()/2|0);let f=l/2|0;if(this.leftInit=u-f,this.rightInit=u+f,this.upInit=d-f,this.downInit=d+f,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new V}detect(){let a=this.leftInit,l=this.rightInit,u=this.upInit,d=this.downInit,f=!1,p=!0,y=!1,C=!1,w=!1,x=!1,E=!1,D=this.width,O=this.height;for(;p;){p=!1;let N=!0;for(;(N||!C)&&l<D;)N=this.containsBlackPoint(u,d,l,!1),N?(l++,p=!0,C=!0):C||l++;if(l>=D){f=!0;break}let k=!0;for(;(k||!w)&&d<O;)k=this.containsBlackPoint(a,l,d,!0),k?(d++,p=!0,w=!0):w||d++;if(d>=O){f=!0;break}let L=!0;for(;(L||!x)&&a>=0;)L=this.containsBlackPoint(u,d,a,!1),L?(a--,p=!0,x=!0):x||a--;if(a<0){f=!0;break}let Z=!0;for(;(Z||!E)&&u>=0;)Z=this.containsBlackPoint(a,l,u,!0),Z?(u--,p=!0,E=!0):E||u--;if(u<0){f=!0;break}p&&(y=!0)}if(!f&&y){let N=l-a,k=null;for(let U=1;k===null&&U<N;U++)k=this.getBlackPointOnSegment(a,d-U,a+U,d);if(k==null)throw new V;let L=null;for(let U=1;L===null&&U<N;U++)L=this.getBlackPointOnSegment(a,u+U,a+U,u);if(L==null)throw new V;let Z=null;for(let U=1;Z===null&&U<N;U++)Z=this.getBlackPointOnSegment(l,u+U,l-U,u);if(Z==null)throw new V;let ie=null;for(let U=1;ie===null&&U<N;U++)ie=this.getBlackPointOnSegment(l,d-U,l-U,d);if(ie==null)throw new V;return this.centerEdges(ie,k,Z,L)}else throw new V}getBlackPointOnSegment(a,l,u,d){let f=tt.round(tt.distance(a,l,u,d)),p=(u-a)/f,y=(d-l)/f,C=this.image;for(let w=0;w<f;w++){let x=tt.round(a+w*p),E=tt.round(l+w*y);if(C.get(x,E))return new ue(x,E)}return null}centerEdges(a,l,u,d){let f=a.getX(),p=a.getY(),y=l.getX(),C=l.getY(),w=u.getX(),x=u.getY(),E=d.getX(),D=d.getY(),O=_.CORR;return f<this.width/2?[new ue(E-O,D+O),new ue(y+O,C+O),new ue(w-O,x-O),new ue(f+O,p-O)]:[new ue(E+O,D+O),new ue(y+O,C-O),new ue(w-O,x+O),new ue(f-O,p-O)]}containsBlackPoint(a,l,u,d){let f=this.image;if(d){for(let p=a;p<=l;p++)if(f.get(p,u))return!0}else for(let p=a;p<=l;p++)if(f.get(u,p))return!0;return!1}}return _.INIT_SIZE=10,_.CORR=1,_})();class xp{static checkAndNudgePoints(s,a){let l=s.getWidth(),u=s.getHeight(),d=!0;for(let f=0;f<a.length&&d;f+=2){let p=Math.floor(a[f]),y=Math.floor(a[f+1]);if(p<-1||p>l||y<-1||y>u)throw new V;d=!1,p===-1?(a[f]=0,d=!0):p===l&&(a[f]=l-1,d=!0),y===-1?(a[f+1]=0,d=!0):y===u&&(a[f+1]=u-1,d=!0)}d=!0;for(let f=a.length-2;f>=0&&d;f-=2){let p=Math.floor(a[f]),y=Math.floor(a[f+1]);if(p<-1||p>l||y<-1||y>u)throw new V;d=!1,p===-1?(a[f]=0,d=!0):p===l&&(a[f]=l-1,d=!0),y===-1?(a[f+1]=0,d=!0):y===u&&(a[f+1]=u-1,d=!0)}}}class Rr{constructor(s,a,l,u,d,f,p,y,C){this.a11=s,this.a21=a,this.a31=l,this.a12=u,this.a22=d,this.a32=f,this.a13=p,this.a23=y,this.a33=C}static quadrilateralToQuadrilateral(s,a,l,u,d,f,p,y,C,w,x,E,D,O,N,k){let L=Rr.quadrilateralToSquare(s,a,l,u,d,f,p,y);return Rr.squareToQuadrilateral(C,w,x,E,D,O,N,k).times(L)}transformPoints(s){let a=s.length,l=this.a11,u=this.a12,d=this.a13,f=this.a21,p=this.a22,y=this.a23,C=this.a31,w=this.a32,x=this.a33;for(let E=0;E<a;E+=2){let D=s[E],O=s[E+1],N=d*D+y*O+x;s[E]=(l*D+f*O+C)/N,s[E+1]=(u*D+p*O+w)/N}}transformPointsWithValues(s,a){let l=this.a11,u=this.a12,d=this.a13,f=this.a21,p=this.a22,y=this.a23,C=this.a31,w=this.a32,x=this.a33,E=s.length;for(let D=0;D<E;D++){let O=s[D],N=a[D],k=d*O+y*N+x;s[D]=(l*O+f*N+C)/k,a[D]=(u*O+p*N+w)/k}}static squareToQuadrilateral(s,a,l,u,d,f,p,y){let C=s-l+d-p,w=a-u+f-y;if(C===0&&w===0)return new Rr(l-s,d-l,s,u-a,f-u,a,0,0,1);{let x=l-d,E=p-d,D=u-f,O=y-f,N=x*O-E*D,k=(C*O-E*w)/N,L=(x*w-C*D)/N;return new Rr(l-s+k*l,p-s+L*p,s,u-a+k*u,y-a+L*y,a,k,L,1)}}static quadrilateralToSquare(s,a,l,u,d,f,p,y){return Rr.squareToQuadrilateral(s,a,l,u,d,f,p,y).buildAdjoint()}buildAdjoint(){return new Rr(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(s){return new Rr(this.a11*s.a11+this.a21*s.a12+this.a31*s.a13,this.a11*s.a21+this.a21*s.a22+this.a31*s.a23,this.a11*s.a31+this.a21*s.a32+this.a31*s.a33,this.a12*s.a11+this.a22*s.a12+this.a32*s.a13,this.a12*s.a21+this.a22*s.a22+this.a32*s.a23,this.a12*s.a31+this.a22*s.a32+this.a32*s.a33,this.a13*s.a11+this.a23*s.a12+this.a33*s.a13,this.a13*s.a21+this.a23*s.a22+this.a33*s.a23,this.a13*s.a31+this.a23*s.a32+this.a33*s.a33)}}class M_ extends xp{sampleGrid(s,a,l,u,d,f,p,y,C,w,x,E,D,O,N,k,L,Z,ie){let U=Rr.quadrilateralToQuadrilateral(u,d,f,p,y,C,w,x,E,D,O,N,k,L,Z,ie);return this.sampleGridWithTransform(s,a,l,U)}sampleGridWithTransform(s,a,l,u){if(a<=0||l<=0)throw new V;let d=new dn(a,l),f=new Float32Array(2*a);for(let p=0;p<l;p++){let y=f.length,C=p+.5;for(let w=0;w<y;w+=2)f[w]=w/2+.5,f[w+1]=C;u.transformPoints(f),xp.checkAndNudgePoints(s,f);try{for(let w=0;w<y;w+=2)s.get(Math.floor(f[w]),Math.floor(f[w+1]))&&d.set(w/2,p)}catch{throw new V}}return d}}class Ji{static setGridSampler(s){Ji.gridSampler=s}static getInstance(){return Ji.gridSampler}}Ji.gridSampler=new M_;class Bn{constructor(s,a){this.x=s,this.y=a}toResultPoint(){return new ue(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class A_{constructor(s){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=s}detect(){return this.detectMirror(!1)}detectMirror(s){let a=this.getMatrixCenter(),l=this.getBullsEyeCorners(a);if(s){let f=l[0];l[0]=l[2],l[2]=f}this.extractParameters(l);let u=this.sampleGrid(this.image,l[this.shift%4],l[(this.shift+1)%4],l[(this.shift+2)%4],l[(this.shift+3)%4]),d=this.getMatrixCornerPoints(l);return new D_(u,d,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(s){if(!this.isValidPoint(s[0])||!this.isValidPoint(s[1])||!this.isValidPoint(s[2])||!this.isValidPoint(s[3]))throw new V;let a=2*this.nbCenterLayers,l=new Int32Array([this.sampleLine(s[0],s[1],a),this.sampleLine(s[1],s[2],a),this.sampleLine(s[2],s[3],a),this.sampleLine(s[3],s[0],a)]);this.shift=this.getRotation(l,a);let u=0;for(let f=0;f<4;f++){let p=l[(this.shift+f)%4];this.compact?(u<<=7,u+=p>>1&127):(u<<=10,u+=(p>>2&992)+(p>>1&31))}let d=this.getCorrectedParameterData(u,this.compact);this.compact?(this.nbLayers=(d>>6)+1,this.nbDataBlocks=(d&63)+1):(this.nbLayers=(d>>11)+1,this.nbDataBlocks=(d&2047)+1)}getRotation(s,a){let l=0;s.forEach((u,d,f)=>{let p=(u>>a-2<<1)+(u&1);l=(l<<3)+p}),l=((l&1)<<11)+(l>>1);for(let u=0;u<4;u++)if($.bitCount(l^this.EXPECTED_CORNER_BITS[u])<=2)return u;throw new V}getCorrectedParameterData(s,a){let l,u;a?(l=7,u=2):(l=10,u=4);let d=l-u,f=new Int32Array(l);for(let y=l-1;y>=0;--y)f[y]=s&15,s>>=4;try{new hl(lt.AZTEC_PARAM).decode(f,d)}catch{throw new V}let p=0;for(let y=0;y<u;y++)p=(p<<4)+f[y];return p}getBullsEyeCorners(s){let a=s,l=s,u=s,d=s,f=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let x=this.getFirstDifferent(a,f,1,-1),E=this.getFirstDifferent(l,f,1,1),D=this.getFirstDifferent(u,f,-1,1),O=this.getFirstDifferent(d,f,-1,-1);if(this.nbCenterLayers>2){let N=this.distancePoint(O,x)*this.nbCenterLayers/(this.distancePoint(d,a)*(this.nbCenterLayers+2));if(N<.75||N>1.25||!this.isWhiteOrBlackRectangle(x,E,D,O))break}a=x,l=E,u=D,d=O,f=!f}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new V;this.compact=this.nbCenterLayers===5;let p=new ue(a.getX()+.5,a.getY()-.5),y=new ue(l.getX()+.5,l.getY()+.5),C=new ue(u.getX()-.5,u.getY()+.5),w=new ue(d.getX()-.5,d.getY()-.5);return this.expandSquare([p,y,C,w],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let s,a,l,u;try{let p=new vu(this.image).detect();s=p[0],a=p[1],l=p[2],u=p[3]}catch{let y=this.image.getWidth()/2,C=this.image.getHeight()/2;s=this.getFirstDifferent(new Bn(y+7,C-7),!1,1,-1).toResultPoint(),a=this.getFirstDifferent(new Bn(y+7,C+7),!1,1,1).toResultPoint(),l=this.getFirstDifferent(new Bn(y-7,C+7),!1,-1,1).toResultPoint(),u=this.getFirstDifferent(new Bn(y-7,C-7),!1,-1,-1).toResultPoint()}let d=tt.round((s.getX()+u.getX()+a.getX()+l.getX())/4),f=tt.round((s.getY()+u.getY()+a.getY()+l.getY())/4);try{let p=new vu(this.image,15,d,f).detect();s=p[0],a=p[1],l=p[2],u=p[3]}catch{s=this.getFirstDifferent(new Bn(d+7,f-7),!1,1,-1).toResultPoint(),a=this.getFirstDifferent(new Bn(d+7,f+7),!1,1,1).toResultPoint(),l=this.getFirstDifferent(new Bn(d-7,f+7),!1,-1,1).toResultPoint(),u=this.getFirstDifferent(new Bn(d-7,f-7),!1,-1,-1).toResultPoint()}return d=tt.round((s.getX()+u.getX()+a.getX()+l.getX())/4),f=tt.round((s.getY()+u.getY()+a.getY()+l.getY())/4),new Bn(d,f)}getMatrixCornerPoints(s){return this.expandSquare(s,2*this.nbCenterLayers,this.getDimension())}sampleGrid(s,a,l,u,d){let f=Ji.getInstance(),p=this.getDimension(),y=p/2-this.nbCenterLayers,C=p/2+this.nbCenterLayers;return f.sampleGrid(s,p,p,y,y,C,y,C,C,y,C,a.getX(),a.getY(),l.getX(),l.getY(),u.getX(),u.getY(),d.getX(),d.getY())}sampleLine(s,a,l){let u=0,d=this.distanceResultPoint(s,a),f=d/l,p=s.getX(),y=s.getY(),C=f*(a.getX()-s.getX())/d,w=f*(a.getY()-s.getY())/d;for(let x=0;x<l;x++)this.image.get(tt.round(p+x*C),tt.round(y+x*w))&&(u|=1<<l-x-1);return u}isWhiteOrBlackRectangle(s,a,l,u){let d=3;s=new Bn(s.getX()-d,s.getY()+d),a=new Bn(a.getX()-d,a.getY()-d),l=new Bn(l.getX()+d,l.getY()-d),u=new Bn(u.getX()+d,u.getY()+d);let f=this.getColor(u,s);if(f===0)return!1;let p=this.getColor(s,a);return p!==f||(p=this.getColor(a,l),p!==f)?!1:(p=this.getColor(l,u),p===f)}getColor(s,a){let l=this.distancePoint(s,a),u=(a.getX()-s.getX())/l,d=(a.getY()-s.getY())/l,f=0,p=s.getX(),y=s.getY(),C=this.image.get(s.getX(),s.getY()),w=Math.ceil(l);for(let E=0;E<w;E++)p+=u,y+=d,this.image.get(tt.round(p),tt.round(y))!==C&&f++;let x=f/l;return x>.1&&x<.9?0:x<=.1===C?1:-1}getFirstDifferent(s,a,l,u){let d=s.getX()+l,f=s.getY()+u;for(;this.isValid(d,f)&&this.image.get(d,f)===a;)d+=l,f+=u;for(d-=l,f-=u;this.isValid(d,f)&&this.image.get(d,f)===a;)d+=l;for(d-=l;this.isValid(d,f)&&this.image.get(d,f)===a;)f+=u;return f-=u,new Bn(d,f)}expandSquare(s,a,l){let u=l/(2*a),d=s[0].getX()-s[2].getX(),f=s[0].getY()-s[2].getY(),p=(s[0].getX()+s[2].getX())/2,y=(s[0].getY()+s[2].getY())/2,C=new ue(p+u*d,y+u*f),w=new ue(p-u*d,y-u*f);d=s[1].getX()-s[3].getX(),f=s[1].getY()-s[3].getY(),p=(s[1].getX()+s[3].getX())/2,y=(s[1].getY()+s[3].getY())/2;let x=new ue(p+u*d,y+u*f),E=new ue(p-u*d,y-u*f);return[C,x,w,E]}isValid(s,a){return s>=0&&s<this.image.getWidth()&&a>0&&a<this.image.getHeight()}isValidPoint(s){let a=tt.round(s.getX()),l=tt.round(s.getY());return this.isValid(a,l)}distancePoint(s,a){return tt.distance(s.getX(),s.getY(),a.getX(),a.getY())}distanceResultPoint(s,a){return tt.distance(s.getX(),s.getY(),a.getX(),a.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*($.truncDivision(this.nbLayers-4,8)+1)+15}}class bu{decode(s,a=null){let l=null,u=new A_(s.getBlackMatrix()),d=null,f=null;try{let w=u.detectMirror(!1);d=w.getPoints(),this.reportFoundResultPoints(a,d),f=new bp().decode(w)}catch(w){l=w}if(f==null)try{let w=u.detectMirror(!0);d=w.getPoints(),this.reportFoundResultPoints(a,d),f=new bp().decode(w)}catch(w){throw l??w}let p=new Ln(f.getText(),f.getRawBytes(),f.getNumBits(),d,Ce.AZTEC,M.currentTimeMillis()),y=f.getByteSegments();y!=null&&p.putMetadata(hn.BYTE_SEGMENTS,y);let C=f.getECLevel();return C!=null&&p.putMetadata(hn.ERROR_CORRECTION_LEVEL,C),p}reportFoundResultPoints(s,a){if(s!=null){let l=s.get(me.NEED_RESULT_POINT_CALLBACK);l!=null&&a.forEach((u,d,f)=>{l.foundPossibleResultPoint(u)})}}reset(){}}class zA extends Vo{constructor(s=500){super(new bu,s)}}class qt{decode(s,a){try{return this.doDecode(s,a)}catch{if(a&&a.get(me.TRY_HARDER)===!0&&s.isRotateSupported()){let d=s.rotateCounterClockwise(),f=this.doDecode(d,a),p=f.getResultMetadata(),y=270;p!==null&&p.get(hn.ORIENTATION)===!0&&(y=y+p.get(hn.ORIENTATION)%360),f.putMetadata(hn.ORIENTATION,y);let C=f.getResultPoints();if(C!==null){let w=d.getHeight();for(let x=0;x<C.length;x++)C[x]=new ue(w-C[x].getY()-1,C[x].getX())}return f}else throw new V}}reset(){}doDecode(s,a){let l=s.getWidth(),u=s.getHeight(),d=new ce(l),f=a&&a.get(me.TRY_HARDER)===!0,p=Math.max(1,u>>(f?8:5)),y;f?y=u:y=15;let C=Math.trunc(u/2);for(let w=0;w<y;w++){let x=Math.trunc((w+1)/2),E=(w&1)===0,D=C+p*(E?x:-x);if(D<0||D>=u)break;try{d=s.getBlackRow(D,d)}catch{continue}for(let O=0;O<2;O++){if(O===1&&(d.reverse(),a&&a.get(me.NEED_RESULT_POINT_CALLBACK)===!0)){let N=new Map;a.forEach((k,L)=>N.set(L,k)),N.delete(me.NEED_RESULT_POINT_CALLBACK),a=N}try{let N=this.decodeRow(D,d,a);if(O===1){N.putMetadata(hn.ORIENTATION,180);let k=N.getResultPoints();k!==null&&(k[0]=new ue(l-k[0].getX()-1,k[0].getY()),k[1]=new ue(l-k[1].getX()-1,k[1].getY()))}return N}catch{}}}throw new V}static recordPattern(s,a,l){let u=l.length;for(let C=0;C<u;C++)l[C]=0;let d=s.getSize();if(a>=d)throw new V;let f=!s.get(a),p=0,y=a;for(;y<d;){if(s.get(y)!==f)l[p]++;else{if(++p===u)break;l[p]=1,f=!f}y++}if(!(p===u||p===u-1&&y===d))throw new V}static recordPatternInReverse(s,a,l){let u=l.length,d=s.get(a);for(;a>0&&u>=0;)s.get(--a)!==d&&(u--,d=!d);if(u>=0)throw new V;qt.recordPattern(s,a+1,l)}static patternMatchVariance(s,a,l){let u=s.length,d=0,f=0;for(let C=0;C<u;C++)d+=s[C],f+=a[C];if(d<f)return Number.POSITIVE_INFINITY;let p=d/f;l*=p;let y=0;for(let C=0;C<u;C++){let w=s[C],x=a[C]*p,E=w>x?w-x:x-w;if(E>l)return Number.POSITIVE_INFINITY;y+=E}return y/d}}class ne extends qt{static findStartPattern(s){let a=s.getSize(),l=s.getNextSet(0),u=0,d=Int32Array.from([0,0,0,0,0,0]),f=l,p=!1,y=6;for(let C=l;C<a;C++)if(s.get(C)!==p)d[u]++;else{if(u===y-1){let w=ne.MAX_AVG_VARIANCE,x=-1;for(let E=ne.CODE_START_A;E<=ne.CODE_START_C;E++){let D=qt.patternMatchVariance(d,ne.CODE_PATTERNS[E],ne.MAX_INDIVIDUAL_VARIANCE);D<w&&(w=D,x=E)}if(x>=0&&s.isRange(Math.max(0,f-(C-f)/2),f,!1))return Int32Array.from([f,C,x]);f+=d[0]+d[1],d=d.slice(2,d.length-1),d[u-1]=0,d[u]=0,u--}else u++;d[u]=1,p=!p}throw new V}static decodeCode(s,a,l){qt.recordPattern(s,l,a);let u=ne.MAX_AVG_VARIANCE,d=-1;for(let f=0;f<ne.CODE_PATTERNS.length;f++){let p=ne.CODE_PATTERNS[f],y=this.patternMatchVariance(a,p,ne.MAX_INDIVIDUAL_VARIANCE);y<u&&(u=y,d=f)}if(d>=0)return d;throw new V}decodeRow(s,a,l){let u=l&&l.get(me.ASSUME_GS1)===!0,d=ne.findStartPattern(a),f=d[2],p=0,y=new Uint8Array(20);y[p++]=f;let C;switch(f){case ne.CODE_START_A:C=ne.CODE_CODE_A;break;case ne.CODE_START_B:C=ne.CODE_CODE_B;break;case ne.CODE_START_C:C=ne.CODE_CODE_C;break;default:throw new W}let w=!1,x=!1,E="",D=d[0],O=d[1],N=Int32Array.from([0,0,0,0,0,0]),k=0,L=0,Z=f,ie=0,U=!0,We=!1,Oe=!1;for(;!w;){let Vs=x;switch(x=!1,k=L,L=ne.decodeCode(a,N,O),y[p++]=L,L!==ne.CODE_STOP&&(U=!0),L!==ne.CODE_STOP&&(ie++,Z+=ie*L),D=O,O+=N.reduce((DT,MT)=>DT+MT,0),L){case ne.CODE_START_A:case ne.CODE_START_B:case ne.CODE_START_C:throw new W}switch(C){case ne.CODE_CODE_A:if(L<64)Oe===We?E+=String.fromCharCode(32+L):E+=String.fromCharCode(32+L+128),Oe=!1;else if(L<96)Oe===We?E+=String.fromCharCode(L-64):E+=String.fromCharCode(L+64),Oe=!1;else switch(L!==ne.CODE_STOP&&(U=!1),L){case ne.CODE_FNC_1:u&&(E.length===0?E+="]C1":E+="");break;case ne.CODE_FNC_2:case ne.CODE_FNC_3:break;case ne.CODE_FNC_4_A:!We&&Oe?(We=!0,Oe=!1):We&&Oe?(We=!1,Oe=!1):Oe=!0;break;case ne.CODE_SHIFT:x=!0,C=ne.CODE_CODE_B;break;case ne.CODE_CODE_B:C=ne.CODE_CODE_B;break;case ne.CODE_CODE_C:C=ne.CODE_CODE_C;break;case ne.CODE_STOP:w=!0;break}break;case ne.CODE_CODE_B:if(L<96)Oe===We?E+=String.fromCharCode(32+L):E+=String.fromCharCode(32+L+128),Oe=!1;else switch(L!==ne.CODE_STOP&&(U=!1),L){case ne.CODE_FNC_1:u&&(E.length===0?E+="]C1":E+="");break;case ne.CODE_FNC_2:case ne.CODE_FNC_3:break;case ne.CODE_FNC_4_B:!We&&Oe?(We=!0,Oe=!1):We&&Oe?(We=!1,Oe=!1):Oe=!0;break;case ne.CODE_SHIFT:x=!0,C=ne.CODE_CODE_A;break;case ne.CODE_CODE_A:C=ne.CODE_CODE_A;break;case ne.CODE_CODE_C:C=ne.CODE_CODE_C;break;case ne.CODE_STOP:w=!0;break}break;case ne.CODE_CODE_C:if(L<100)L<10&&(E+="0"),E+=L;else switch(L!==ne.CODE_STOP&&(U=!1),L){case ne.CODE_FNC_1:u&&(E.length===0?E+="]C1":E+="");break;case ne.CODE_CODE_A:C=ne.CODE_CODE_A;break;case ne.CODE_CODE_B:C=ne.CODE_CODE_B;break;case ne.CODE_STOP:w=!0;break}break}Vs&&(C=C===ne.CODE_CODE_A?ne.CODE_CODE_B:ne.CODE_CODE_A)}let Zn=O-D;if(O=a.getNextUnset(O),!a.isRange(O,Math.min(a.getSize(),O+(O-D)/2),!1))throw new V;if(Z-=ie*k,Z%103!==k)throw new b;let Br=E.length;if(Br===0)throw new V;Br>0&&U&&(C===ne.CODE_CODE_C?E=E.substring(0,Br-2):E=E.substring(0,Br-1));let Qn=(d[1]+d[0])/2,xt=D+Zn/2,En=y.length,sr=new Uint8Array(En);for(let Vs=0;Vs<En;Vs++)sr[Vs]=y[Vs];let Us=[new ue(Qn,s),new ue(xt,s)];return new Ln(E,sr,0,Us,Ce.CODE_128,new Date().getTime())}}ne.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],ne.MAX_AVG_VARIANCE=.25,ne.MAX_INDIVIDUAL_VARIANCE=.7,ne.CODE_SHIFT=98,ne.CODE_CODE_C=99,ne.CODE_CODE_B=100,ne.CODE_CODE_A=101,ne.CODE_FNC_1=102,ne.CODE_FNC_2=97,ne.CODE_FNC_3=96,ne.CODE_FNC_4_A=101,ne.CODE_FNC_4_B=100,ne.CODE_START_A=103,ne.CODE_START_B=104,ne.CODE_START_C=105,ne.CODE_STOP=106;let Ep=(()=>{class _ extends qt{constructor(a=!1,l=!1){super(),this.usingCheckDigit=a,this.extendedMode=l,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(a,l,u){let d=this.counters;d.fill(0),this.decodeRowResult="";let f=_.findAsteriskPattern(l,d),p=l.getNextSet(f[1]),y=l.getSize(),C,w;do{_.recordPattern(l,p,d);let k=_.toNarrowWidePattern(d);if(k<0)throw new V;C=_.patternToChar(k),this.decodeRowResult+=C,w=p;for(let L of d)p+=L;p=l.getNextSet(p)}while(C!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let x=0;for(let k of d)x+=k;let E=p-w-x;if(p!==y&&E*2<x)throw new V;if(this.usingCheckDigit){let k=this.decodeRowResult.length-1,L=0;for(let Z=0;Z<k;Z++)L+=_.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(Z));if(this.decodeRowResult.charAt(k)!==_.ALPHABET_STRING.charAt(L%43))throw new b;this.decodeRowResult=this.decodeRowResult.substring(0,k)}if(this.decodeRowResult.length===0)throw new V;let D;this.extendedMode?D=_.decodeExtended(this.decodeRowResult):D=this.decodeRowResult;let O=(f[1]+f[0])/2,N=w+x/2;return new Ln(D,null,0,[new ue(O,a),new ue(N,a)],Ce.CODE_39,new Date().getTime())}static findAsteriskPattern(a,l){let u=a.getSize(),d=a.getNextSet(0),f=0,p=d,y=!1,C=l.length;for(let w=d;w<u;w++)if(a.get(w)!==y)l[f]++;else{if(f===C-1){if(this.toNarrowWidePattern(l)===_.ASTERISK_ENCODING&&a.isRange(Math.max(0,p-Math.floor((w-p)/2)),p,!1))return[p,w];p+=l[0]+l[1],l.copyWithin(0,2,2+f-1),l[f-1]=0,l[f]=0,f--}else f++;l[f]=1,y=!y}throw new V}static toNarrowWidePattern(a){let l=a.length,u=0,d;do{let f=2147483647;for(let C of a)C<f&&C>u&&(f=C);u=f,d=0;let p=0,y=0;for(let C=0;C<l;C++){let w=a[C];w>u&&(y|=1<<l-1-C,d++,p+=w)}if(d===3){for(let C=0;C<l&&d>0;C++){let w=a[C];if(w>u&&(d--,w*2>=p))return-1}return y}}while(d>3);return-1}static patternToChar(a){for(let l=0;l<_.CHARACTER_ENCODINGS.length;l++)if(_.CHARACTER_ENCODINGS[l]===a)return _.ALPHABET_STRING.charAt(l);if(a===_.ASTERISK_ENCODING)return"*";throw new V}static decodeExtended(a){let l=a.length,u="";for(let d=0;d<l;d++){let f=a.charAt(d);if(f==="+"||f==="$"||f==="%"||f==="/"){let p=a.charAt(d+1),y="\0";switch(f){case"+":if(p>="A"&&p<="Z")y=String.fromCharCode(p.charCodeAt(0)+32);else throw new W;break;case"$":if(p>="A"&&p<="Z")y=String.fromCharCode(p.charCodeAt(0)-64);else throw new W;break;case"%":if(p>="A"&&p<="E")y=String.fromCharCode(p.charCodeAt(0)-38);else if(p>="F"&&p<="J")y=String.fromCharCode(p.charCodeAt(0)-11);else if(p>="K"&&p<="O")y=String.fromCharCode(p.charCodeAt(0)+16);else if(p>="P"&&p<="T")y=String.fromCharCode(p.charCodeAt(0)+43);else if(p==="U")y="\0";else if(p==="V")y="@";else if(p==="W")y="`";else if(p==="X"||p==="Y"||p==="Z")y="\x7F";else throw new W;break;case"/":if(p>="A"&&p<="O")y=String.fromCharCode(p.charCodeAt(0)-32);else if(p==="Z")y=":";else throw new W;break}u+=y,d++}else u+=f}return u}}return _.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",_.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],_.ASTERISK_ENCODING=148,_})();class vt extends qt{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(s,a,l){let u=this.decodeStart(a),d=this.decodeEnd(a),f=new wt;vt.decodeMiddle(a,u[1],d[0],f);let p=f.toString(),y=null;l!=null&&(y=l.get(me.ALLOWED_LENGTHS)),y==null&&(y=vt.DEFAULT_ALLOWED_LENGTHS);let C=p.length,w=!1,x=0;for(let O of y){if(C===O){w=!0;break}O>x&&(x=O)}if(!w&&C>x&&(w=!0),!w)throw new W;let E=[new ue(u[1],s),new ue(d[0],s)];return new Ln(p,null,0,E,Ce.ITF,new Date().getTime())}static decodeMiddle(s,a,l,u){let d=new Int32Array(10),f=new Int32Array(5),p=new Int32Array(5);for(d.fill(0),f.fill(0),p.fill(0);a<l;){qt.recordPattern(s,a,d);for(let C=0;C<5;C++){let w=2*C;f[C]=d[w],p[C]=d[w+1]}let y=vt.decodeDigit(f);u.append(y.toString()),y=this.decodeDigit(p),u.append(y.toString()),d.forEach(function(C){a+=C})}}decodeStart(s){let a=vt.skipWhiteSpace(s),l=vt.findGuardPattern(s,a,vt.START_PATTERN);return this.narrowLineWidth=(l[1]-l[0])/4,this.validateQuietZone(s,l[0]),l}validateQuietZone(s,a){let l=this.narrowLineWidth*10;l=l<a?l:a;for(let u=a-1;l>0&&u>=0&&!s.get(u);u--)l--;if(l!==0)throw new V}static skipWhiteSpace(s){let a=s.getSize(),l=s.getNextSet(0);if(l===a)throw new V;return l}decodeEnd(s){s.reverse();try{let a=vt.skipWhiteSpace(s),l;try{l=vt.findGuardPattern(s,a,vt.END_PATTERN_REVERSED[0])}catch(d){d instanceof V&&(l=vt.findGuardPattern(s,a,vt.END_PATTERN_REVERSED[1]))}this.validateQuietZone(s,l[0]);let u=l[0];return l[0]=s.getSize()-l[1],l[1]=s.getSize()-u,l}finally{s.reverse()}}static findGuardPattern(s,a,l){let u=l.length,d=new Int32Array(u),f=s.getSize(),p=!1,y=0,C=a;d.fill(0);for(let w=a;w<f;w++)if(s.get(w)!==p)d[y]++;else{if(y===u-1){if(qt.patternMatchVariance(d,l,vt.MAX_INDIVIDUAL_VARIANCE)<vt.MAX_AVG_VARIANCE)return[C,w];C+=d[0]+d[1],M.arraycopy(d,2,d,0,y-1),d[y-1]=0,d[y]=0,y--}else y++;d[y]=1,p=!p}throw new V}static decodeDigit(s){let a=vt.MAX_AVG_VARIANCE,l=-1,u=vt.PATTERNS.length;for(let d=0;d<u;d++){let f=vt.PATTERNS[d],p=qt.patternMatchVariance(s,f,vt.MAX_INDIVIDUAL_VARIANCE);p<a?(a=p,l=d):p===a&&(l=-1)}if(l>=0)return l%10;throw new V}}vt.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],vt.MAX_AVG_VARIANCE=.38,vt.MAX_INDIVIDUAL_VARIANCE=.5,vt.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],vt.START_PATTERN=Int32Array.from([1,1,1,1]),vt.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Lt extends qt{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(s){let a=!1,l,u=0,d=Int32Array.from([0,0,0]);for(;!a;){d=Int32Array.from([0,0,0]),l=Lt.findGuardPattern(s,u,!1,this.START_END_PATTERN,d);let f=l[0];u=l[1];let p=f-(u-f);p>=0&&(a=s.isRange(p,f,!1))}return l}static checkChecksum(s){return Lt.checkStandardUPCEANChecksum(s)}static checkStandardUPCEANChecksum(s){let a=s.length;if(a===0)return!1;let l=parseInt(s.charAt(a-1),10);return Lt.getStandardUPCEANChecksum(s.substring(0,a-1))===l}static getStandardUPCEANChecksum(s){let a=s.length,l=0;for(let u=a-1;u>=0;u-=2){let d=s.charAt(u).charCodeAt(0)-48;if(d<0||d>9)throw new W;l+=d}l*=3;for(let u=a-2;u>=0;u-=2){let d=s.charAt(u).charCodeAt(0)-48;if(d<0||d>9)throw new W;l+=d}return(1e3-l)%10}static decodeEnd(s,a){return Lt.findGuardPattern(s,a,!1,Lt.START_END_PATTERN,new Int32Array(Lt.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(s,a,l,u){return this.findGuardPattern(s,a,l,u,new Int32Array(u.length))}static findGuardPattern(s,a,l,u,d){let f=s.getSize();a=l?s.getNextUnset(a):s.getNextSet(a);let p=0,y=a,C=u.length,w=l;for(let x=a;x<f;x++)if(s.get(x)!==w)d[p]++;else{if(p===C-1){if(qt.patternMatchVariance(d,u,Lt.MAX_INDIVIDUAL_VARIANCE)<Lt.MAX_AVG_VARIANCE)return Int32Array.from([y,x]);y+=d[0]+d[1];let E=d.slice(2,d.length-1);for(let D=0;D<p-1;D++)d[D]=E[D];d[p-1]=0,d[p]=0,p--}else p++;d[p]=1,w=!w}throw new V}static decodeDigit(s,a,l,u){this.recordPattern(s,l,a);let d=this.MAX_AVG_VARIANCE,f=-1,p=u.length;for(let y=0;y<p;y++){let C=u[y],w=qt.patternMatchVariance(a,C,Lt.MAX_INDIVIDUAL_VARIANCE);w<d&&(d=w,f=y)}if(f>=0)return f;throw new V}}Lt.MAX_AVG_VARIANCE=.48,Lt.MAX_INDIVIDUAL_VARIANCE=.7,Lt.START_END_PATTERN=Int32Array.from([1,1,1]),Lt.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Lt.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Lt.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class pl{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(s,a,l){let u=this.decodeRowStringBuffer,d=this.decodeMiddle(a,l,u),f=u.toString(),p=pl.parseExtensionString(f),y=[new ue((l[0]+l[1])/2,s),new ue(d,s)],C=new Ln(f,null,0,y,Ce.UPC_EAN_EXTENSION,new Date().getTime());return p!=null&&C.putAllMetadata(p),C}decodeMiddle(s,a,l){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let d=s.getSize(),f=a[1],p=0;for(let C=0;C<5&&f<d;C++){let w=Lt.decodeDigit(s,u,f,Lt.L_AND_G_PATTERNS);l+=String.fromCharCode(48+w%10);for(let x of u)f+=x;w>=10&&(p|=1<<4-C),C!==4&&(f=s.getNextSet(f),f=s.getNextUnset(f))}if(l.length!==5)throw new V;let y=this.determineCheckDigit(p);if(pl.extensionChecksum(l.toString())!==y)throw new V;return f}static extensionChecksum(s){let a=s.length,l=0;for(let u=a-2;u>=0;u-=2)l+=s.charAt(u).charCodeAt(0)-48;l*=3;for(let u=a-1;u>=0;u-=2)l+=s.charAt(u).charCodeAt(0)-48;return l*=3,l%10}determineCheckDigit(s){for(let a=0;a<10;a++)if(s===this.CHECK_DIGIT_ENCODINGS[a])return a;throw new V}static parseExtensionString(s){if(s.length!==5)return null;let a=pl.parseExtension5String(s);return a==null?null:new Map([[hn.SUGGESTED_PRICE,a]])}static parseExtension5String(s){let a;switch(s.charAt(0)){case"0":a="\xA3";break;case"5":a="$";break;case"9":switch(s){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}a="";break;default:a="";break}let l=parseInt(s.substring(1)),u=(l/100).toString(),d=l%100,f=d<10?"0"+d:d.toString();return a+u+"."+f}}class Ip{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(s,a,l){let u=this.decodeRowStringBuffer,d=this.decodeMiddle(a,l,u),f=u.toString(),p=Ip.parseExtensionString(f),y=[new ue((l[0]+l[1])/2,s),new ue(d,s)],C=new Ln(f,null,0,y,Ce.UPC_EAN_EXTENSION,new Date().getTime());return p!=null&&C.putAllMetadata(p),C}decodeMiddle(s,a,l){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let d=s.getSize(),f=a[1],p=0;for(let y=0;y<2&&f<d;y++){let C=Lt.decodeDigit(s,u,f,Lt.L_AND_G_PATTERNS);l+=String.fromCharCode(48+C%10);for(let w of u)f+=w;C>=10&&(p|=1<<1-y),y!==1&&(f=s.getNextSet(f),f=s.getNextUnset(f))}if(l.length!==2)throw new V;if(parseInt(l.toString())%4!==p)throw new V;return f}static parseExtensionString(s){return s.length!==2?null:new Map([[hn.ISSUE_NUMBER,parseInt(s)]])}}class T_{static decodeRow(s,a,l){let u=Lt.findGuardPattern(a,l,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new pl().decodeRow(s,a,u)}catch{return new Ip().decodeRow(s,a,u)}}}T_.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class ct extends Lt{constructor(){super(),this.decodeRowStringBuffer="",ct.L_AND_G_PATTERNS=ct.L_PATTERNS.map(s=>Int32Array.from(s));for(let s=10;s<20;s++){let a=ct.L_PATTERNS[s-10],l=new Int32Array(a.length);for(let u=0;u<a.length;u++)l[u]=a[a.length-u-1];ct.L_AND_G_PATTERNS[s]=l}}decodeRow(s,a,l){let u=ct.findStartGuardPattern(a),d=l==null?null:l.get(me.NEED_RESULT_POINT_CALLBACK);if(d!=null){let U=new ue((u[0]+u[1])/2,s);d.foundPossibleResultPoint(U)}let f=this.decodeMiddle(a,u,this.decodeRowStringBuffer),p=f.rowOffset,y=f.resultString;if(d!=null){let U=new ue(p,s);d.foundPossibleResultPoint(U)}let C=this.decodeEnd(a,p);if(d!=null){let U=new ue((C[0]+C[1])/2,s);d.foundPossibleResultPoint(U)}let w=C[1],x=w+(w-C[0]);if(x>=a.getSize()||!a.isRange(w,x,!1))throw new V;let E=y.toString();if(E.length<8)throw new W;if(!ct.checkChecksum(E))throw new b;let D=(u[1]+u[0])/2,O=(C[1]+C[0])/2,N=this.getBarcodeFormat(),k=[new ue(D,s),new ue(O,s)],L=new Ln(E,null,0,k,N,new Date().getTime()),Z=0;try{let U=T_.decodeRow(s,a,C[1]);L.putMetadata(hn.UPC_EAN_EXTENSION,U.getText()),L.putAllMetadata(U.getResultMetadata()),L.addResultPoints(U.getResultPoints()),Z=U.getText().length}catch{}let ie=l==null?null:l.get(me.ALLOWED_EAN_EXTENSIONS);if(ie!=null){let U=!1;for(let We in ie)if(Z.toString()===We){U=!0;break}if(!U)throw new V}return L}decodeEnd(s,a){return ct.findGuardPattern(s,a,!1,ct.START_END_PATTERN,new Int32Array(ct.START_END_PATTERN.length).fill(0))}static checkChecksum(s){return ct.checkStandardUPCEANChecksum(s)}static checkStandardUPCEANChecksum(s){let a=s.length;if(a===0)return!1;let l=parseInt(s.charAt(a-1),10);return ct.getStandardUPCEANChecksum(s.substring(0,a-1))===l}static getStandardUPCEANChecksum(s){let a=s.length,l=0;for(let u=a-1;u>=0;u-=2){let d=s.charAt(u).charCodeAt(0)-48;if(d<0||d>9)throw new W;l+=d}l*=3;for(let u=a-2;u>=0;u-=2){let d=s.charAt(u).charCodeAt(0)-48;if(d<0||d>9)throw new W;l+=d}return(1e3-l)%10}}let xu=(()=>{class _ extends ct{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(a,l,u){let d=this.decodeMiddleCounters;d[0]=0,d[1]=0,d[2]=0,d[3]=0;let f=a.getSize(),p=l[1],y=0;for(let w=0;w<6&&p<f;w++){let x=ct.decodeDigit(a,d,p,ct.L_AND_G_PATTERNS);u+=String.fromCharCode(48+x%10);for(let E of d)p+=E;x>=10&&(y|=1<<5-w)}u=_.determineFirstDigit(u,y),p=ct.findGuardPattern(a,p,!0,ct.MIDDLE_PATTERN,new Int32Array(ct.MIDDLE_PATTERN.length).fill(0))[1];for(let w=0;w<6&&p<f;w++){let x=ct.decodeDigit(a,d,p,ct.L_PATTERNS);u+=String.fromCharCode(48+x);for(let E of d)p+=E}return{rowOffset:p,resultString:u}}getBarcodeFormat(){return Ce.EAN_13}static determineFirstDigit(a,l){for(let u=0;u<10;u++)if(l===this.FIRST_DIGIT_ENCODINGS[u])return a=String.fromCharCode(48+u)+a,a;throw new V}}return _.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],_})();class O_ extends ct{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(s,a,l){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let d=s.getSize(),f=a[1];for(let y=0;y<4&&f<d;y++){let C=ct.decodeDigit(s,u,f,ct.L_PATTERNS);l+=String.fromCharCode(48+C);for(let w of u)f+=w}f=ct.findGuardPattern(s,f,!0,ct.MIDDLE_PATTERN,new Int32Array(ct.MIDDLE_PATTERN.length).fill(0))[1];for(let y=0;y<4&&f<d;y++){let C=ct.decodeDigit(s,u,f,ct.L_PATTERNS);l+=String.fromCharCode(48+C);for(let w of u)f+=w}return{rowOffset:f,resultString:l}}getBarcodeFormat(){return Ce.EAN_8}}class N_ extends ct{constructor(){super(...arguments),this.ean13Reader=new xu}getBarcodeFormat(){return Ce.UPC_A}decode(s,a){return this.maybeReturnResult(this.ean13Reader.decode(s))}decodeRow(s,a,l){return this.maybeReturnResult(this.ean13Reader.decodeRow(s,a,l))}decodeMiddle(s,a,l){return this.ean13Reader.decodeMiddle(s,a,l)}maybeReturnResult(s){let a=s.getText();if(a.charAt(0)==="0"){let l=new Ln(a.substring(1),null,null,s.getResultPoints(),Ce.UPC_A);return s.getResultMetadata()!=null&&l.putAllMetadata(s.getResultMetadata()),l}else throw new V}reset(){this.ean13Reader.reset()}}class Pr extends ct{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(s,a,l){let u=this.decodeMiddleCounters.map(C=>C);u[0]=0,u[1]=0,u[2]=0,u[3]=0;let d=s.getSize(),f=a[1],p=0;for(let C=0;C<6&&f<d;C++){let w=Pr.decodeDigit(s,u,f,Pr.L_AND_G_PATTERNS);l+=String.fromCharCode(48+w%10);for(let x of u)f+=x;w>=10&&(p|=1<<5-C)}let y=Pr.determineNumSysAndCheckDigit(l,p);return{rowOffset:f,resultString:y}}decodeEnd(s,a){return Pr.findGuardPatternWithoutCounters(s,a,!0,Pr.MIDDLE_END_PATTERN)}checkChecksum(s){return ct.checkChecksum(Pr.convertUPCEtoUPCA(s))}static determineNumSysAndCheckDigit(s,a){for(let l=0;l<=1;l++)for(let u=0;u<10;u++)if(a===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[l][u]){let d=String.fromCharCode(48+l),f=String.fromCharCode(48+u);return d+s+f}throw V.getNotFoundInstance()}getBarcodeFormat(){return Ce.UPC_E}static convertUPCEtoUPCA(s){let a=s.slice(1,7).split("").map(d=>d.charCodeAt(0)),l=new wt;l.append(s.charAt(0));let u=a[5];switch(u){case 0:case 1:case 2:l.appendChars(a,0,2),l.append(u),l.append("0000"),l.appendChars(a,2,3);break;case 3:l.appendChars(a,0,3),l.append("00000"),l.appendChars(a,3,2);break;case 4:l.appendChars(a,0,4),l.append("00000"),l.append(a[4]);break;default:l.appendChars(a,0,5),l.append("0000"),l.append(u);break}return s.length>=8&&l.append(s.charAt(7)),l.toString()}}Pr.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Pr.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Sp extends qt{constructor(s){super();let a=s==null?null:s.get(me.POSSIBLE_FORMATS),l=[];n(a)?(l.push(new xu),l.push(new N_),l.push(new O_),l.push(new Pr)):(a.indexOf(Ce.EAN_13)>-1&&l.push(new xu),a.indexOf(Ce.UPC_A)>-1&&l.push(new N_),a.indexOf(Ce.EAN_8)>-1&&l.push(new O_),a.indexOf(Ce.UPC_E)>-1&&l.push(new Pr)),this.readers=l}decodeRow(s,a,l){for(let u of this.readers)try{let d=u.decodeRow(s,a,l),f=d.getBarcodeFormat()===Ce.EAN_13&&d.getText().charAt(0)==="0",p=l==null?null:l.get(me.POSSIBLE_FORMATS),y=p==null||p.includes(Ce.UPC_A);if(f&&y){let C=d.getRawBytes(),w=new Ln(d.getText().substring(1),C,C?C.length:null,d.getResultPoints(),Ce.UPC_A);return w.putAllMetadata(d.getResultMetadata()),w}return d}catch{}throw new V}reset(){for(let s of this.readers)s.reset()}}let jo=(()=>{class _ extends qt{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(a,l){for(let u=0;u<l.length;u++)if(qt.patternMatchVariance(a,l[u],_.MAX_INDIVIDUAL_VARIANCE)<_.MAX_AVG_VARIANCE)return u;throw new V}static count(a){return tt.sum(new Int32Array(a))}static increment(a,l){let u=0,d=l[0];for(let f=1;f<a.length;f++)l[f]>d&&(d=l[f],u=f);a[u]++}static decrement(a,l){let u=0,d=l[0];for(let f=1;f<a.length;f++)l[f]<d&&(d=l[f],u=f);a[u]--}static isFinderPattern(a){let l=a[0]+a[1],u=l+a[2]+a[3],d=l/u;if(d>=_.MIN_FINDER_PATTERN_RATIO&&d<=_.MAX_FINDER_PATTERN_RATIO){let f=Number.MAX_SAFE_INTEGER,p=Number.MIN_SAFE_INTEGER;for(let y of a)y>p&&(p=y),y<f&&(f=y);return p<10*f}return!1}}return _.MAX_AVG_VARIANCE=.2,_.MAX_INDIVIDUAL_VARIANCE=.45,_.MIN_FINDER_PATTERN_RATIO=9.5/12,_.MAX_FINDER_PATTERN_RATIO=12.5/14,_})();class Rs{constructor(s,a){this.value=s,this.checksumPortion=a}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(s){if(!(s instanceof Rs))return!1;let a=s;return this.value===a.value&&this.checksumPortion===a.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Eu{constructor(s,a,l,u,d){this.value=s,this.startEnd=a,this.value=s,this.startEnd=a,this.resultPoints=new Array,this.resultPoints.push(new ue(l,d)),this.resultPoints.push(new ue(u,d))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(s){if(!(s instanceof Eu))return!1;let a=s;return this.value===a.value}hashCode(){return this.value}}class ti{constructor(){}static getRSSvalue(s,a,l){let u=0;for(let y of s)u+=y;let d=0,f=0,p=s.length;for(let y=0;y<p-1;y++){let C;for(C=1,f|=1<<y;C<s[y];C++,f&=~(1<<y)){let w=ti.combins(u-C-1,p-y-2);if(l&&f===0&&u-C-(p-y-1)>=p-y-1&&(w-=ti.combins(u-C-(p-y),p-y-2)),p-y-1>1){let x=0;for(let E=u-C-(p-y-2);E>a;E--)x+=ti.combins(u-C-E-1,p-y-3);w-=x*(p-1-y)}else u-C>a&&w--;d+=w}u-=C}return d}static combins(s,a){let l,u;s-a>a?(u=a,l=s-a):(u=s-a,l=a);let d=1,f=1;for(let p=s;p>l;p--)d*=p,f<=u&&(d/=f,f++);for(;f<=u;)d/=f,f++;return d}}class WA{static buildBitArray(s){let a=s.length*2-1;s[s.length-1].getRightChar()==null&&(a-=1);let l=12*a,u=new ce(l),d=0,p=s[0].getRightChar().getValue();for(let y=11;y>=0;--y)p&1<<y&&u.set(d),d++;for(let y=1;y<s.length;++y){let C=s[y],w=C.getLeftChar().getValue();for(let x=11;x>=0;--x)w&1<<x&&u.set(d),d++;if(C.getRightChar()!=null){let x=C.getRightChar().getValue();for(let E=11;E>=0;--E)x&1<<E&&u.set(d),d++}}return u}}class Ho{constructor(s,a){a?this.decodedInformation=null:(this.finished=s,this.decodedInformation=a)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class Dp{constructor(s){this.newPosition=s}getNewPosition(){return this.newPosition}}let kr=(()=>{class _ extends Dp{constructor(a,l){super(a),this.value=l}getValue(){return this.value}isFNC1(){return this.value===_.FNC1}}return _.FNC1="$",_})();class zo extends Dp{constructor(s,a,l){super(s),l?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=a}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}let Ps=(()=>{class _ extends Dp{constructor(a,l,u){if(super(a),l<0||l>10||u<0||u>10)throw new W;this.firstDigit=l,this.secondDigit=u}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===_.FNC1}isSecondDigitFNC1(){return this.secondDigit===_.FNC1}isAnyFNC1(){return this.firstDigit===_.FNC1||this.secondDigit===_.FNC1}}return _.FNC1=10,_})();class le{constructor(){}static parseFieldsInGeneralPurpose(s){if(!s)return null;if(s.length<2)throw new V;let a=s.substring(0,2);for(let d of le.TWO_DIGIT_DATA_LENGTH)if(d[0]===a)return d[1]===le.VARIABLE_LENGTH?le.processVariableAI(2,d[2],s):le.processFixedAI(2,d[1],s);if(s.length<3)throw new V;let l=s.substring(0,3);for(let d of le.THREE_DIGIT_DATA_LENGTH)if(d[0]===l)return d[1]===le.VARIABLE_LENGTH?le.processVariableAI(3,d[2],s):le.processFixedAI(3,d[1],s);for(let d of le.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(d[0]===l)return d[1]===le.VARIABLE_LENGTH?le.processVariableAI(4,d[2],s):le.processFixedAI(4,d[1],s);if(s.length<4)throw new V;let u=s.substring(0,4);for(let d of le.FOUR_DIGIT_DATA_LENGTH)if(d[0]===u)return d[1]===le.VARIABLE_LENGTH?le.processVariableAI(4,d[2],s):le.processFixedAI(4,d[1],s);throw new V}static processFixedAI(s,a,l){if(l.length<s)throw new V;let u=l.substring(0,s);if(l.length<s+a)throw new V;let d=l.substring(s,s+a),f=l.substring(s+a),p="("+u+")"+d,y=le.parseFieldsInGeneralPurpose(f);return y==null?p:p+y}static processVariableAI(s,a,l){let u=l.substring(0,s),d;l.length<s+a?d=l.length:d=s+a;let f=l.substring(s,d),p=l.substring(d),y="("+u+")"+f,C=le.parseFieldsInGeneralPurpose(p);return C==null?y:y+C}}le.VARIABLE_LENGTH=[],le.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",le.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",le.VARIABLE_LENGTH,20],["22",le.VARIABLE_LENGTH,29],["30",le.VARIABLE_LENGTH,8],["37",le.VARIABLE_LENGTH,8],["90",le.VARIABLE_LENGTH,30],["91",le.VARIABLE_LENGTH,30],["92",le.VARIABLE_LENGTH,30],["93",le.VARIABLE_LENGTH,30],["94",le.VARIABLE_LENGTH,30],["95",le.VARIABLE_LENGTH,30],["96",le.VARIABLE_LENGTH,30],["97",le.VARIABLE_LENGTH,3],["98",le.VARIABLE_LENGTH,30],["99",le.VARIABLE_LENGTH,30]],le.THREE_DIGIT_DATA_LENGTH=[["240",le.VARIABLE_LENGTH,30],["241",le.VARIABLE_LENGTH,30],["242",le.VARIABLE_LENGTH,6],["250",le.VARIABLE_LENGTH,30],["251",le.VARIABLE_LENGTH,30],["253",le.VARIABLE_LENGTH,17],["254",le.VARIABLE_LENGTH,20],["400",le.VARIABLE_LENGTH,30],["401",le.VARIABLE_LENGTH,30],["402",17],["403",le.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",le.VARIABLE_LENGTH,20],["421",le.VARIABLE_LENGTH,15],["422",3],["423",le.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],le.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",le.VARIABLE_LENGTH,15],["391",le.VARIABLE_LENGTH,18],["392",le.VARIABLE_LENGTH,15],["393",le.VARIABLE_LENGTH,18],["703",le.VARIABLE_LENGTH,30]],le.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",le.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",le.VARIABLE_LENGTH,20],["8003",le.VARIABLE_LENGTH,30],["8004",le.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",le.VARIABLE_LENGTH,30],["8008",le.VARIABLE_LENGTH,12],["8018",18],["8020",le.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",le.VARIABLE_LENGTH,70],["8200",le.VARIABLE_LENGTH,70]];class ks{constructor(s){this.buffer=new wt,this.information=s}decodeAllCodes(s,a){let l=a,u=null;do{let d=this.decodeGeneralPurposeField(l,u),f=le.parseFieldsInGeneralPurpose(d.getNewString());if(f!=null&&s.append(f),d.isRemaining()?u=""+d.getRemainingValue():u=null,l===d.getNewPosition())break;l=d.getNewPosition()}while(!0);return s.toString()}isStillNumeric(s){if(s+7>this.information.getSize())return s+4<=this.information.getSize();for(let a=s;a<s+3;++a)if(this.information.get(a))return!0;return this.information.get(s+3)}decodeNumeric(s){if(s+7>this.information.getSize()){let d=this.extractNumericValueFromBitArray(s,4);return d===0?new Ps(this.information.getSize(),Ps.FNC1,Ps.FNC1):new Ps(this.information.getSize(),d-1,Ps.FNC1)}let a=this.extractNumericValueFromBitArray(s,7),l=(a-8)/11,u=(a-8)%11;return new Ps(s+7,l,u)}extractNumericValueFromBitArray(s,a){return ks.extractNumericValueFromBitArray(this.information,s,a)}static extractNumericValueFromBitArray(s,a,l){let u=0;for(let d=0;d<l;++d)s.get(a+d)&&(u|=1<<l-d-1);return u}decodeGeneralPurposeField(s,a){this.buffer.setLengthToZero(),a!=null&&this.buffer.append(a),this.current.setPosition(s);let l=this.parseBlocks();return l!=null&&l.isRemaining()?new zo(this.current.getPosition(),this.buffer.toString(),l.getRemainingValue()):new zo(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let s,a;do{let l=this.current.getPosition();if(this.current.isAlpha()?(a=this.parseAlphaBlock(),s=a.isFinished()):this.current.isIsoIec646()?(a=this.parseIsoIec646Block(),s=a.isFinished()):(a=this.parseNumericBlock(),s=a.isFinished()),!(l!==this.current.getPosition())&&!s)break}while(!s);return a.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let s=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(s.getNewPosition()),s.isFirstDigitFNC1()){let a;return s.isSecondDigitFNC1()?a=new zo(this.current.getPosition(),this.buffer.toString()):a=new zo(this.current.getPosition(),this.buffer.toString(),s.getSecondDigit()),new Ho(!0,a)}if(this.buffer.append(s.getFirstDigit()),s.isSecondDigitFNC1()){let a=new zo(this.current.getPosition(),this.buffer.toString());return new Ho(!0,a)}this.buffer.append(s.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Ho(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let s=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(s.getNewPosition()),s.isFNC1()){let a=new zo(this.current.getPosition(),this.buffer.toString());return new Ho(!0,a)}this.buffer.append(s.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Ho(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let s=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(s.getNewPosition()),s.isFNC1()){let a=new zo(this.current.getPosition(),this.buffer.toString());return new Ho(!0,a)}this.buffer.append(s.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Ho(!1)}isStillIsoIec646(s){if(s+5>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(s,5);if(a>=5&&a<16)return!0;if(s+7>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(s,7);if(l>=64&&l<116)return!0;if(s+8>this.information.getSize())return!1;let u=this.extractNumericValueFromBitArray(s,8);return u>=232&&u<253}decodeIsoIec646(s){let a=this.extractNumericValueFromBitArray(s,5);if(a===15)return new kr(s+5,kr.FNC1);if(a>=5&&a<15)return new kr(s+5,"0"+(a-5));let l=this.extractNumericValueFromBitArray(s,7);if(l>=64&&l<90)return new kr(s+7,""+(l+1));if(l>=90&&l<116)return new kr(s+7,""+(l+7));let u=this.extractNumericValueFromBitArray(s,8),d;switch(u){case 232:d="!";break;case 233:d='"';break;case 234:d="%";break;case 235:d="&";break;case 236:d="'";break;case 237:d="(";break;case 238:d=")";break;case 239:d="*";break;case 240:d="+";break;case 241:d=",";break;case 242:d="-";break;case 243:d=".";break;case 244:d="/";break;case 245:d=":";break;case 246:d=";";break;case 247:d="<";break;case 248:d="=";break;case 249:d=">";break;case 250:d="?";break;case 251:d="_";break;case 252:d=" ";break;default:throw new W}return new kr(s+8,d)}isStillAlpha(s){if(s+5>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(s,5);if(a>=5&&a<16)return!0;if(s+6>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(s,6);return l>=16&&l<63}decodeAlphanumeric(s){let a=this.extractNumericValueFromBitArray(s,5);if(a===15)return new kr(s+5,kr.FNC1);if(a>=5&&a<15)return new kr(s+5,"0"+(a-5));let l=this.extractNumericValueFromBitArray(s,6);if(l>=32&&l<58)return new kr(s+6,""+(l+33));let u;switch(l){case 58:u="*";break;case 59:u=",";break;case 60:u="-";break;case 61:u=".";break;case 62:u="/";break;default:throw new bi("Decoding invalid alphanumeric value: "+l)}return new kr(s+6,u)}isAlphaTo646ToAlphaLatch(s){if(s+1>this.information.getSize())return!1;for(let a=0;a<5&&a+s<this.information.getSize();++a)if(a===2){if(!this.information.get(s+2))return!1}else if(this.information.get(s+a))return!1;return!0}isAlphaOr646ToNumericLatch(s){if(s+3>this.information.getSize())return!1;for(let a=s;a<s+3;++a)if(this.information.get(a))return!1;return!0}isNumericToAlphaNumericLatch(s){if(s+1>this.information.getSize())return!1;for(let a=0;a<4&&a+s<this.information.getSize();++a)if(this.information.get(s+a))return!1;return!0}}class Mp{constructor(s){this.information=s,this.generalDecoder=new ks(s)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}let Fr=(()=>{class _ extends Mp{constructor(a){super(a)}encodeCompressedGtin(a,l){a.append("(01)");let u=a.length();a.append("9"),this.encodeCompressedGtinWithoutAI(a,l,u)}encodeCompressedGtinWithoutAI(a,l,u){for(let d=0;d<4;++d){let f=this.getGeneralDecoder().extractNumericValueFromBitArray(l+10*d,10);f/100===0&&a.append("0"),f/10===0&&a.append("0"),a.append(f)}_.appendCheckDigit(a,u)}static appendCheckDigit(a,l){let u=0;for(let d=0;d<13;d++){let f=a.charAt(d+l).charCodeAt(0)-48;u+=d&1?f:3*f}u=10-u%10,u===10&&(u=0),a.append(u)}}return _.GTIN_SIZE=40,_})(),GA=(()=>{class _ extends Fr{constructor(a){super(a)}parseInformation(){let a=new wt;a.append("(01)");let l=a.length(),u=this.getGeneralDecoder().extractNumericValueFromBitArray(_.HEADER_SIZE,4);return a.append(u),this.encodeCompressedGtinWithoutAI(a,_.HEADER_SIZE+4,l),this.getGeneralDecoder().decodeAllCodes(a,_.HEADER_SIZE+44)}}return _.HEADER_SIZE=4,_})(),$A=(()=>{class _ extends Mp{constructor(a){super(a)}parseInformation(){let a=new wt;return this.getGeneralDecoder().decodeAllCodes(a,_.HEADER_SIZE)}}return _.HEADER_SIZE=5,_})();class Iu extends Fr{constructor(s){super(s)}encodeCompressedWeight(s,a,l){let u=this.getGeneralDecoder().extractNumericValueFromBitArray(a,l);this.addWeightCode(s,u);let d=this.checkWeight(u),f=1e5;for(let p=0;p<5;++p)d/f===0&&s.append("0"),f/=10;s.append(d)}}let R_=(()=>{class _ extends Iu{constructor(a){super(a)}parseInformation(){if(this.getInformation().getSize()!=_.HEADER_SIZE+Iu.GTIN_SIZE+_.WEIGHT_SIZE)throw new V;let a=new wt;return this.encodeCompressedGtin(a,_.HEADER_SIZE),this.encodeCompressedWeight(a,_.HEADER_SIZE+Iu.GTIN_SIZE,_.WEIGHT_SIZE),a.toString()}}return _.HEADER_SIZE=5,_.WEIGHT_SIZE=15,_})();class qA extends R_{constructor(s){super(s)}addWeightCode(s,a){s.append("(3103)")}checkWeight(s){return s}}class YA extends R_{constructor(s){super(s)}addWeightCode(s,a){a<1e4?s.append("(3202)"):s.append("(3203)")}checkWeight(s){return s<1e4?s:s-1e4}}let XA=(()=>{class _ extends Fr{constructor(a){super(a)}parseInformation(){if(this.getInformation().getSize()<_.HEADER_SIZE+Fr.GTIN_SIZE)throw new V;let a=new wt;this.encodeCompressedGtin(a,_.HEADER_SIZE);let l=this.getGeneralDecoder().extractNumericValueFromBitArray(_.HEADER_SIZE+Fr.GTIN_SIZE,_.LAST_DIGIT_SIZE);a.append("(392"),a.append(l),a.append(")");let u=this.getGeneralDecoder().decodeGeneralPurposeField(_.HEADER_SIZE+Fr.GTIN_SIZE+_.LAST_DIGIT_SIZE,null);return a.append(u.getNewString()),a.toString()}}return _.HEADER_SIZE=8,_.LAST_DIGIT_SIZE=2,_})(),ZA=(()=>{class _ extends Fr{constructor(a){super(a)}parseInformation(){if(this.getInformation().getSize()<_.HEADER_SIZE+Fr.GTIN_SIZE)throw new V;let a=new wt;this.encodeCompressedGtin(a,_.HEADER_SIZE);let l=this.getGeneralDecoder().extractNumericValueFromBitArray(_.HEADER_SIZE+Fr.GTIN_SIZE,_.LAST_DIGIT_SIZE);a.append("(393"),a.append(l),a.append(")");let u=this.getGeneralDecoder().extractNumericValueFromBitArray(_.HEADER_SIZE+Fr.GTIN_SIZE+_.LAST_DIGIT_SIZE,_.FIRST_THREE_DIGITS_SIZE);u/100==0&&a.append("0"),u/10==0&&a.append("0"),a.append(u);let d=this.getGeneralDecoder().decodeGeneralPurposeField(_.HEADER_SIZE+Fr.GTIN_SIZE+_.LAST_DIGIT_SIZE+_.FIRST_THREE_DIGITS_SIZE,null);return a.append(d.getNewString()),a.toString()}}return _.HEADER_SIZE=8,_.LAST_DIGIT_SIZE=2,_.FIRST_THREE_DIGITS_SIZE=10,_})(),eo=(()=>{class _ extends Iu{constructor(a,l,u){super(a),this.dateCode=u,this.firstAIdigits=l}parseInformation(){if(this.getInformation().getSize()!=_.HEADER_SIZE+_.GTIN_SIZE+_.WEIGHT_SIZE+_.DATE_SIZE)throw new V;let a=new wt;return this.encodeCompressedGtin(a,_.HEADER_SIZE),this.encodeCompressedWeight(a,_.HEADER_SIZE+_.GTIN_SIZE,_.WEIGHT_SIZE),this.encodeCompressedDate(a,_.HEADER_SIZE+_.GTIN_SIZE+_.WEIGHT_SIZE),a.toString()}encodeCompressedDate(a,l){let u=this.getGeneralDecoder().extractNumericValueFromBitArray(l,_.DATE_SIZE);if(u==38400)return;a.append("("),a.append(this.dateCode),a.append(")");let d=u%32;u/=32;let f=u%12+1;u/=12;let p=u;p/10==0&&a.append("0"),a.append(p),f/10==0&&a.append("0"),a.append(f),d/10==0&&a.append("0"),a.append(d)}addWeightCode(a,l){a.append("("),a.append(this.firstAIdigits),a.append(l/1e5),a.append(")")}checkWeight(a){return a%1e5}}return _.HEADER_SIZE=8,_.WEIGHT_SIZE=20,_.DATE_SIZE=16,_})();function P_(_){try{if(_.get(1))return new GA(_);if(!_.get(2))return new $A(_);switch(ks.extractNumericValueFromBitArray(_,1,4)){case 4:return new qA(_);case 5:return new YA(_)}switch(ks.extractNumericValueFromBitArray(_,1,5)){case 12:return new XA(_);case 13:return new ZA(_)}switch(ks.extractNumericValueFromBitArray(_,1,7)){case 56:return new eo(_,"310","11");case 57:return new eo(_,"320","11");case 58:return new eo(_,"310","13");case 59:return new eo(_,"320","13");case 60:return new eo(_,"310","15");case 61:return new eo(_,"320","15");case 62:return new eo(_,"310","17");case 63:return new eo(_,"320","17")}}catch(s){throw console.log(s),new bi("unknown decoder: "+_)}}class to{constructor(s,a,l,u){this.leftchar=s,this.rightchar=a,this.finderpattern=l,this.maybeLast=u}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(s,a){return s instanceof to?to.equalsOrNull(s.leftchar,a.leftchar)&&to.equalsOrNull(s.rightchar,a.rightchar)&&to.equalsOrNull(s.finderpattern,a.finderpattern):!1}static equalsOrNull(s,a){return s===null?a===null:to.equals(s,a)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Ap{constructor(s,a,l){this.pairs=s,this.rowNumber=a,this.wasReversed=l}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(s){return this.checkEqualitity(this,s)}toString(){return"{ "+this.pairs+" }"}equals(s,a){return s instanceof Ap?this.checkEqualitity(s,a)&&s.wasReversed===a.wasReversed:!1}checkEqualitity(s,a){if(!s||!a)return;let l;return s.forEach((u,d)=>{a.forEach(f=>{u.getLeftChar().getValue()===f.getLeftChar().getValue()&&u.getRightChar().getValue()===f.getRightChar().getValue()&&u.getFinderPatter().getValue()===f.getFinderPatter().getValue()&&(l=!0)})}),l}}class G extends jo{constructor(s){super(...arguments),this.pairs=new Array(G.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=s===!0}decodeRow(s,a,l){this.pairs.length=0,this.startFromEven=!1;try{return G.constructResult(this.decodeRow2pairs(s,a))}catch(u){this.verbose&&console.log(u)}return this.pairs.length=0,this.startFromEven=!0,G.constructResult(this.decodeRow2pairs(s,a))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(s,a){let l=!1;for(;!l;)try{this.pairs.push(this.retrieveNextPair(a,this.pairs,s))}catch(d){if(d instanceof V){if(!this.pairs.length)throw new V;l=!0}}if(this.checkChecksum())return this.pairs;let u;if(this.rows.length?u=!0:u=!1,this.storeRow(s,!1),u){let d=this.checkRowsBoolean(!1);if(d!=null||(d=this.checkRowsBoolean(!0),d!=null))return d}throw new V}checkRowsBoolean(s){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,s&&(this.rows=this.rows.reverse());let a=null;try{a=this.checkRows(new Array,0)}catch(l){this.verbose&&console.log(l)}return s&&(this.rows=this.rows.reverse()),a}checkRows(s,a){for(let l=a;l<this.rows.length;l++){let u=this.rows[l];this.pairs.length=0;for(let f of s)this.pairs.push(f.getPairs());if(this.pairs.push(u.getPairs()),!G.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let d=new Array(s);d.push(u);try{return this.checkRows(d,l+1)}catch(f){this.verbose&&console.log(f)}}throw new V}static isValidSequence(s){for(let a of G.FINDER_PATTERN_SEQUENCES){if(s.length>a.length)continue;let l=!0;for(let u=0;u<s.length;u++)if(s[u].getFinderPattern().getValue()!=a[u]){l=!1;break}if(l)return!0}return!1}storeRow(s,a){let l=0,u=!1,d=!1;for(;l<this.rows.length;){let f=this.rows[l];if(f.getRowNumber()>s){d=f.isEquivalent(this.pairs);break}u=f.isEquivalent(this.pairs),l++}d||u||G.isPartialRow(this.pairs,this.rows)||(this.rows.push(l,new Ap(this.pairs,s,a)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(s,a){for(let l of a)if(l.getPairs().length!==s.length){for(let u of l.getPairs())for(let d of s)if(to.equals(u,d))break}}static isPartialRow(s,a){for(let l of a){let u=!0;for(let d of s){let f=!1;for(let p of l.getPairs())if(d.equals(p)){f=!0;break}if(!f){u=!1;break}}if(u)return!0}return!1}getRows(){return this.rows}static constructResult(s){let a=WA.buildBitArray(s),u=P_(a).parseInformation(),d=s[0].getFinderPattern().getResultPoints(),f=s[s.length-1].getFinderPattern().getResultPoints(),p=[d[0],d[1],f[0],f[1]];return new Ln(u,null,null,p,Ce.RSS_EXPANDED,null)}checkChecksum(){let s=this.pairs.get(0),a=s.getLeftChar(),l=s.getRightChar();if(l==null)return!1;let u=l.getChecksumPortion(),d=2;for(let p=1;p<this.pairs.size();++p){let y=this.pairs.get(p);u+=y.getLeftChar().getChecksumPortion(),d++;let C=y.getRightChar();C!=null&&(u+=C.getChecksumPortion(),d++)}return u%=211,211*(d-4)+u==a.getValue()}static getNextSecondBar(s,a){let l;return s.get(a)?(l=s.getNextUnset(a),l=s.getNextSet(l)):(l=s.getNextSet(a),l=s.getNextUnset(l)),l}retrieveNextPair(s,a,l){let u=a.length%2==0;this.startFromEven&&(u=!u);let d,f=!0,p=-1;do this.findNextPair(s,a,p),d=this.parseFoundFinderPattern(s,l,u),d==null?p=G.getNextSecondBar(s,this.startEnd[0]):f=!1;while(f);let y=this.decodeDataCharacter(s,d,u,!0);if(!this.isEmptyPair(a)&&a[a.length-1].mustBeLast())throw new V;let C;try{C=this.decodeDataCharacter(s,d,u,!1)}catch(w){C=null,this.verbose&&console.log(w)}return new to(y,C,d,!0)}isEmptyPair(s){return s.length===0}findNextPair(s,a,l){let u=this.getDecodeFinderCounters();u[0]=0,u[1]=0,u[2]=0,u[3]=0;let d=s.getSize(),f;l>=0?f=l:this.isEmptyPair(a)?f=0:f=a[a.length-1].getFinderPattern().getStartEnd()[1];let p=a.length%2!=0;this.startFromEven&&(p=!p);let y=!1;for(;f<d&&(y=!s.get(f),!!y);)f++;let C=0,w=f;for(let x=f;x<d;x++)if(s.get(x)!=y)u[C]++;else{if(C==3){if(p&&G.reverseCounters(u),G.isFinderPattern(u)){this.startEnd[0]=w,this.startEnd[1]=x;return}p&&G.reverseCounters(u),w+=u[0]+u[1],u[0]=u[2],u[1]=u[3],u[2]=0,u[3]=0,C--}else C++;u[C]=1,y=!y}throw new V}static reverseCounters(s){let a=s.length;for(let l=0;l<a/2;++l){let u=s[l];s[l]=s[a-l-1],s[a-l-1]=u}}parseFoundFinderPattern(s,a,l){let u,d,f;if(l){let C=this.startEnd[0]-1;for(;C>=0&&!s.get(C);)C--;C++,u=this.startEnd[0]-C,d=C,f=this.startEnd[1]}else d=this.startEnd[0],f=s.getNextUnset(this.startEnd[1]+1),u=f-this.startEnd[1];let p=this.getDecodeFinderCounters();M.arraycopy(p,0,p,1,p.length-1),p[0]=u;let y;try{y=this.parseFinderValue(p,G.FINDER_PATTERNS)}catch{return null}return new Eu(y,[d,f],d,f,a)}decodeDataCharacter(s,a,l,u){let d=this.getDataCharacterCounters();for(let xt=0;xt<d.length;xt++)d[xt]=0;if(u)G.recordPatternInReverse(s,a.getStartEnd()[0],d);else{G.recordPattern(s,a.getStartEnd()[1],d);for(let xt=0,En=d.length-1;xt<En;xt++,En--){let sr=d[xt];d[xt]=d[En],d[En]=sr}}let f=17,p=tt.sum(new Int32Array(d))/f,y=(a.getStartEnd()[1]-a.getStartEnd()[0])/15;if(Math.abs(p-y)/y>.3)throw new V;let C=this.getOddCounts(),w=this.getEvenCounts(),x=this.getOddRoundingErrors(),E=this.getEvenRoundingErrors();for(let xt=0;xt<d.length;xt++){let En=1*d[xt]/p,sr=En+.5;if(sr<1){if(En<.3)throw new V;sr=1}else if(sr>8){if(En>8.7)throw new V;sr=8}let Us=xt/2;xt&1?(w[Us]=sr,E[Us]=En-sr):(C[Us]=sr,x[Us]=En-sr)}this.adjustOddEvenCounts(f);let D=4*a.getValue()+(l?0:2)+(u?0:1)-1,O=0,N=0;for(let xt=C.length-1;xt>=0;xt--){if(G.isNotA1left(a,l,u)){let En=G.WEIGHTS[D][2*xt];N+=C[xt]*En}O+=C[xt]}let k=0;for(let xt=w.length-1;xt>=0;xt--)if(G.isNotA1left(a,l,u)){let En=G.WEIGHTS[D][2*xt+1];k+=w[xt]*En}let L=N+k;if(O&1||O>13||O<4)throw new V;let Z=(13-O)/2,ie=G.SYMBOL_WIDEST[Z],U=9-ie,We=ti.getRSSvalue(C,ie,!0),Oe=ti.getRSSvalue(w,U,!1),Zn=G.EVEN_TOTAL_SUBSET[Z],Br=G.GSUM[Z],Qn=We*Zn+Oe+Br;return new Rs(Qn,L)}static isNotA1left(s,a,l){return!(s.getValue()==0&&a&&l)}adjustOddEvenCounts(s){let a=tt.sum(new Int32Array(this.getOddCounts())),l=tt.sum(new Int32Array(this.getEvenCounts())),u=!1,d=!1;a>13?d=!0:a<4&&(u=!0);let f=!1,p=!1;l>13?p=!0:l<4&&(f=!0);let y=a+l-s,C=(a&1)==1,w=(l&1)==0;if(y==1)if(C){if(w)throw new V;d=!0}else{if(!w)throw new V;p=!0}else if(y==-1)if(C){if(w)throw new V;u=!0}else{if(!w)throw new V;f=!0}else if(y==0){if(C){if(!w)throw new V;a<l?(u=!0,p=!0):(d=!0,f=!0)}else if(w)throw new V}else throw new V;if(u){if(d)throw new V;G.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(d&&G.decrement(this.getOddCounts(),this.getOddRoundingErrors()),f){if(p)throw new V;G.increment(this.getEvenCounts(),this.getOddRoundingErrors())}p&&G.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}G.SYMBOL_WIDEST=[7,5,4,3,1],G.EVEN_TOTAL_SUBSET=[4,20,52,104,204],G.GSUM=[0,348,1388,2948,3988],G.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],G.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],G.FINDER_PAT_A=0,G.FINDER_PAT_B=1,G.FINDER_PAT_C=2,G.FINDER_PAT_D=3,G.FINDER_PAT_E=4,G.FINDER_PAT_F=5,G.FINDER_PATTERN_SEQUENCES=[[G.FINDER_PAT_A,G.FINDER_PAT_A],[G.FINDER_PAT_A,G.FINDER_PAT_B,G.FINDER_PAT_B],[G.FINDER_PAT_A,G.FINDER_PAT_C,G.FINDER_PAT_B,G.FINDER_PAT_D],[G.FINDER_PAT_A,G.FINDER_PAT_E,G.FINDER_PAT_B,G.FINDER_PAT_D,G.FINDER_PAT_C],[G.FINDER_PAT_A,G.FINDER_PAT_E,G.FINDER_PAT_B,G.FINDER_PAT_D,G.FINDER_PAT_D,G.FINDER_PAT_F],[G.FINDER_PAT_A,G.FINDER_PAT_E,G.FINDER_PAT_B,G.FINDER_PAT_D,G.FINDER_PAT_E,G.FINDER_PAT_F,G.FINDER_PAT_F],[G.FINDER_PAT_A,G.FINDER_PAT_A,G.FINDER_PAT_B,G.FINDER_PAT_B,G.FINDER_PAT_C,G.FINDER_PAT_C,G.FINDER_PAT_D,G.FINDER_PAT_D],[G.FINDER_PAT_A,G.FINDER_PAT_A,G.FINDER_PAT_B,G.FINDER_PAT_B,G.FINDER_PAT_C,G.FINDER_PAT_C,G.FINDER_PAT_D,G.FINDER_PAT_E,G.FINDER_PAT_E],[G.FINDER_PAT_A,G.FINDER_PAT_A,G.FINDER_PAT_B,G.FINDER_PAT_B,G.FINDER_PAT_C,G.FINDER_PAT_C,G.FINDER_PAT_D,G.FINDER_PAT_E,G.FINDER_PAT_F,G.FINDER_PAT_F],[G.FINDER_PAT_A,G.FINDER_PAT_A,G.FINDER_PAT_B,G.FINDER_PAT_B,G.FINDER_PAT_C,G.FINDER_PAT_D,G.FINDER_PAT_D,G.FINDER_PAT_E,G.FINDER_PAT_E,G.FINDER_PAT_F,G.FINDER_PAT_F]],G.MAX_PAIRS=11;class QA extends Rs{constructor(s,a,l){super(s,a),this.count=0,this.finderPattern=l}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Bt extends jo{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(s,a,l){let u=this.decodePair(a,!1,s,l);Bt.addOrTally(this.possibleLeftPairs,u),a.reverse();let d=this.decodePair(a,!0,s,l);Bt.addOrTally(this.possibleRightPairs,d),a.reverse();for(let f of this.possibleLeftPairs)if(f.getCount()>1){for(let p of this.possibleRightPairs)if(p.getCount()>1&&Bt.checkChecksum(f,p))return Bt.constructResult(f,p)}throw new V}static addOrTally(s,a){if(a==null)return;let l=!1;for(let u of s)if(u.getValue()===a.getValue()){u.incrementCount(),l=!0;break}l||s.push(a)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(s,a){let l=4537077*s.getValue()+a.getValue(),u=new String(l).toString(),d=new wt;for(let C=13-u.length;C>0;C--)d.append("0");d.append(u);let f=0;for(let C=0;C<13;C++){let w=d.charAt(C).charCodeAt(0)-48;f+=C&1?w:3*w}f=10-f%10,f===10&&(f=0),d.append(f.toString());let p=s.getFinderPattern().getResultPoints(),y=a.getFinderPattern().getResultPoints();return new Ln(d.toString(),null,0,[p[0],p[1],y[0],y[1]],Ce.RSS_14,new Date().getTime())}static checkChecksum(s,a){let l=(s.getChecksumPortion()+16*a.getChecksumPortion())%79,u=9*s.getFinderPattern().getValue()+a.getFinderPattern().getValue();return u>72&&u--,u>8&&u--,l===u}decodePair(s,a,l,u){try{let d=this.findFinderPattern(s,a),f=this.parseFoundFinderPattern(s,l,a,d),p=u==null?null:u.get(me.NEED_RESULT_POINT_CALLBACK);if(p!=null){let w=(d[0]+d[1])/2;a&&(w=s.getSize()-1-w),p.foundPossibleResultPoint(new ue(w,l))}let y=this.decodeDataCharacter(s,f,!0),C=this.decodeDataCharacter(s,f,!1);return new QA(1597*y.getValue()+C.getValue(),y.getChecksumPortion()+4*C.getChecksumPortion(),f)}catch{return null}}decodeDataCharacter(s,a,l){let u=this.getDataCharacterCounters();for(let k=0;k<u.length;k++)u[k]=0;if(l)qt.recordPatternInReverse(s,a.getStartEnd()[0],u);else{qt.recordPattern(s,a.getStartEnd()[1]+1,u);for(let k=0,L=u.length-1;k<L;k++,L--){let Z=u[k];u[k]=u[L],u[L]=Z}}let d=l?16:15,f=tt.sum(new Int32Array(u))/d,p=this.getOddCounts(),y=this.getEvenCounts(),C=this.getOddRoundingErrors(),w=this.getEvenRoundingErrors();for(let k=0;k<u.length;k++){let L=u[k]/f,Z=Math.floor(L+.5);Z<1?Z=1:Z>8&&(Z=8);let ie=Math.floor(k/2);k&1?(y[ie]=Z,w[ie]=L-Z):(p[ie]=Z,C[ie]=L-Z)}this.adjustOddEvenCounts(l,d);let x=0,E=0;for(let k=p.length-1;k>=0;k--)E*=9,E+=p[k],x+=p[k];let D=0,O=0;for(let k=y.length-1;k>=0;k--)D*=9,D+=y[k],O+=y[k];let N=E+3*D;if(l){if(x&1||x>12||x<4)throw new V;let k=(12-x)/2,L=Bt.OUTSIDE_ODD_WIDEST[k],Z=9-L,ie=ti.getRSSvalue(p,L,!1),U=ti.getRSSvalue(y,Z,!0),We=Bt.OUTSIDE_EVEN_TOTAL_SUBSET[k],Oe=Bt.OUTSIDE_GSUM[k];return new Rs(ie*We+U+Oe,N)}else{if(O&1||O>10||O<4)throw new V;let k=(10-O)/2,L=Bt.INSIDE_ODD_WIDEST[k],Z=9-L,ie=ti.getRSSvalue(p,L,!0),U=ti.getRSSvalue(y,Z,!1),We=Bt.INSIDE_ODD_TOTAL_SUBSET[k],Oe=Bt.INSIDE_GSUM[k];return new Rs(U*We+ie+Oe,N)}}findFinderPattern(s,a){let l=this.getDecodeFinderCounters();l[0]=0,l[1]=0,l[2]=0,l[3]=0;let u=s.getSize(),d=!1,f=0;for(;f<u&&(d=!s.get(f),a!==d);)f++;let p=0,y=f;for(let C=f;C<u;C++)if(s.get(C)!==d)l[p]++;else{if(p===3){if(jo.isFinderPattern(l))return[y,C];y+=l[0]+l[1],l[0]=l[2],l[1]=l[3],l[2]=0,l[3]=0,p--}else p++;l[p]=1,d=!d}throw new V}parseFoundFinderPattern(s,a,l,u){let d=s.get(u[0]),f=u[0]-1;for(;f>=0&&d!==s.get(f);)f--;f++;let p=u[0]-f,y=this.getDecodeFinderCounters(),C=new Int32Array(y.length);M.arraycopy(y,0,C,1,y.length-1),C[0]=p;let w=this.parseFinderValue(C,Bt.FINDER_PATTERNS),x=f,E=u[1];return l&&(x=s.getSize()-1-x,E=s.getSize()-1-E),new Eu(w,[f,u[1]],x,E,a)}adjustOddEvenCounts(s,a){let l=tt.sum(new Int32Array(this.getOddCounts())),u=tt.sum(new Int32Array(this.getEvenCounts())),d=!1,f=!1,p=!1,y=!1;s?(l>12?f=!0:l<4&&(d=!0),u>12?y=!0:u<4&&(p=!0)):(l>11?f=!0:l<5&&(d=!0),u>10?y=!0:u<4&&(p=!0));let C=l+u-a,w=(l&1)===(s?1:0),x=(u&1)===1;if(C===1)if(w){if(x)throw new V;f=!0}else{if(!x)throw new V;y=!0}else if(C===-1)if(w){if(x)throw new V;d=!0}else{if(!x)throw new V;p=!0}else if(C===0){if(w){if(!x)throw new V;l<u?(d=!0,y=!0):(f=!0,p=!0)}else if(x)throw new V}else throw new V;if(d){if(f)throw new V;jo.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(f&&jo.decrement(this.getOddCounts(),this.getOddRoundingErrors()),p){if(y)throw new V;jo.increment(this.getEvenCounts(),this.getOddRoundingErrors())}y&&jo.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Bt.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Bt.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Bt.OUTSIDE_GSUM=[0,161,961,2015,2715],Bt.INSIDE_GSUM=[0,336,1036,1516],Bt.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Bt.INSIDE_ODD_WIDEST=[2,4,6,8],Bt.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Fs extends qt{constructor(s,a){super(),this.readers=[],this.verbose=a===!0;let l=s?s.get(me.POSSIBLE_FORMATS):null,u=s&&s.get(me.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;l?((l.includes(Ce.EAN_13)||l.includes(Ce.UPC_A)||l.includes(Ce.EAN_8)||l.includes(Ce.UPC_E))&&this.readers.push(new Sp(s)),l.includes(Ce.CODE_39)&&this.readers.push(new Ep(u)),l.includes(Ce.CODE_128)&&this.readers.push(new ne),l.includes(Ce.ITF)&&this.readers.push(new vt),l.includes(Ce.RSS_14)&&this.readers.push(new Bt),l.includes(Ce.RSS_EXPANDED)&&this.readers.push(new G(this.verbose))):(this.readers.push(new Sp(s)),this.readers.push(new Ep),this.readers.push(new Sp(s)),this.readers.push(new ne),this.readers.push(new vt),this.readers.push(new Bt),this.readers.push(new G(this.verbose)))}decodeRow(s,a,l){for(let u=0;u<this.readers.length;u++)try{return this.readers[u].decodeRow(s,a,l)}catch{}throw new V}reset(){this.readers.forEach(s=>s.reset())}}class KA extends Vo{constructor(s=500,a){super(new Fs(a),s,a)}}class dt{constructor(s,a,l){this.ecCodewords=s,this.ecBlocks=[a],l&&this.ecBlocks.push(l)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class ut{constructor(s,a){this.count=s,this.dataCodewords=a}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Qe{constructor(s,a,l,u,d,f){this.versionNumber=s,this.symbolSizeRows=a,this.symbolSizeColumns=l,this.dataRegionSizeRows=u,this.dataRegionSizeColumns=d,this.ecBlocks=f;let p=0,y=f.getECCodewords(),C=f.getECBlocks();for(let w of C)p+=w.getCount()*(w.getDataCodewords()+y);this.totalCodewords=p}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(s,a){if(s&1||a&1)throw new W;for(let l of Qe.VERSIONS)if(l.symbolSizeRows===s&&l.symbolSizeColumns===a)return l;throw new W}toString(){return""+this.versionNumber}static buildVersions(){return[new Qe(1,10,10,8,8,new dt(5,new ut(1,3))),new Qe(2,12,12,10,10,new dt(7,new ut(1,5))),new Qe(3,14,14,12,12,new dt(10,new ut(1,8))),new Qe(4,16,16,14,14,new dt(12,new ut(1,12))),new Qe(5,18,18,16,16,new dt(14,new ut(1,18))),new Qe(6,20,20,18,18,new dt(18,new ut(1,22))),new Qe(7,22,22,20,20,new dt(20,new ut(1,30))),new Qe(8,24,24,22,22,new dt(24,new ut(1,36))),new Qe(9,26,26,24,24,new dt(28,new ut(1,44))),new Qe(10,32,32,14,14,new dt(36,new ut(1,62))),new Qe(11,36,36,16,16,new dt(42,new ut(1,86))),new Qe(12,40,40,18,18,new dt(48,new ut(1,114))),new Qe(13,44,44,20,20,new dt(56,new ut(1,144))),new Qe(14,48,48,22,22,new dt(68,new ut(1,174))),new Qe(15,52,52,24,24,new dt(42,new ut(2,102))),new Qe(16,64,64,14,14,new dt(56,new ut(2,140))),new Qe(17,72,72,16,16,new dt(36,new ut(4,92))),new Qe(18,80,80,18,18,new dt(48,new ut(4,114))),new Qe(19,88,88,20,20,new dt(56,new ut(4,144))),new Qe(20,96,96,22,22,new dt(68,new ut(4,174))),new Qe(21,104,104,24,24,new dt(56,new ut(6,136))),new Qe(22,120,120,18,18,new dt(68,new ut(6,175))),new Qe(23,132,132,20,20,new dt(62,new ut(8,163))),new Qe(24,144,144,22,22,new dt(62,new ut(8,156),new ut(2,155))),new Qe(25,8,18,6,16,new dt(7,new ut(1,5))),new Qe(26,8,32,6,14,new dt(11,new ut(1,10))),new Qe(27,12,26,10,24,new dt(14,new ut(1,16))),new Qe(28,12,36,10,16,new dt(18,new ut(1,22))),new Qe(29,16,36,14,16,new dt(24,new ut(1,32))),new Qe(30,16,48,14,22,new dt(28,new ut(1,49)))]}}Qe.VERSIONS=Qe.buildVersions();class Tp{constructor(s){let a=s.getHeight();if(a<8||a>144||a&1)throw new W;this.version=Tp.readVersion(s),this.mappingBitMatrix=this.extractDataRegion(s),this.readMappingMatrix=new dn(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(s){let a=s.getHeight(),l=s.getWidth();return Qe.getVersionForDimensions(a,l)}readCodewords(){let s=new Int8Array(this.version.getTotalCodewords()),a=0,l=4,u=0,d=this.mappingBitMatrix.getHeight(),f=this.mappingBitMatrix.getWidth(),p=!1,y=!1,C=!1,w=!1;do if(l===d&&u===0&&!p)s[a++]=this.readCorner1(d,f)&255,l-=2,u+=2,p=!0;else if(l===d-2&&u===0&&f&3&&!y)s[a++]=this.readCorner2(d,f)&255,l-=2,u+=2,y=!0;else if(l===d+4&&u===2&&!(f&7)&&!C)s[a++]=this.readCorner3(d,f)&255,l-=2,u+=2,C=!0;else if(l===d-2&&u===0&&(f&7)===4&&!w)s[a++]=this.readCorner4(d,f)&255,l-=2,u+=2,w=!0;else{do l<d&&u>=0&&!this.readMappingMatrix.get(u,l)&&(s[a++]=this.readUtah(l,u,d,f)&255),l-=2,u+=2;while(l>=0&&u<f);l+=1,u+=3;do l>=0&&u<f&&!this.readMappingMatrix.get(u,l)&&(s[a++]=this.readUtah(l,u,d,f)&255),l+=2,u-=2;while(l<d&&u>=0);l+=3,u+=1}while(l<d||u<f);if(a!==this.version.getTotalCodewords())throw new W;return s}readModule(s,a,l,u){return s<0&&(s+=l,a+=4-(l+4&7)),a<0&&(a+=u,s+=4-(u+4&7)),this.readMappingMatrix.set(a,s),this.mappingBitMatrix.get(a,s)}readUtah(s,a,l,u){let d=0;return this.readModule(s-2,a-2,l,u)&&(d|=1),d<<=1,this.readModule(s-2,a-1,l,u)&&(d|=1),d<<=1,this.readModule(s-1,a-2,l,u)&&(d|=1),d<<=1,this.readModule(s-1,a-1,l,u)&&(d|=1),d<<=1,this.readModule(s-1,a,l,u)&&(d|=1),d<<=1,this.readModule(s,a-2,l,u)&&(d|=1),d<<=1,this.readModule(s,a-1,l,u)&&(d|=1),d<<=1,this.readModule(s,a,l,u)&&(d|=1),d}readCorner1(s,a){let l=0;return this.readModule(s-1,0,s,a)&&(l|=1),l<<=1,this.readModule(s-1,1,s,a)&&(l|=1),l<<=1,this.readModule(s-1,2,s,a)&&(l|=1),l<<=1,this.readModule(0,a-2,s,a)&&(l|=1),l<<=1,this.readModule(0,a-1,s,a)&&(l|=1),l<<=1,this.readModule(1,a-1,s,a)&&(l|=1),l<<=1,this.readModule(2,a-1,s,a)&&(l|=1),l<<=1,this.readModule(3,a-1,s,a)&&(l|=1),l}readCorner2(s,a){let l=0;return this.readModule(s-3,0,s,a)&&(l|=1),l<<=1,this.readModule(s-2,0,s,a)&&(l|=1),l<<=1,this.readModule(s-1,0,s,a)&&(l|=1),l<<=1,this.readModule(0,a-4,s,a)&&(l|=1),l<<=1,this.readModule(0,a-3,s,a)&&(l|=1),l<<=1,this.readModule(0,a-2,s,a)&&(l|=1),l<<=1,this.readModule(0,a-1,s,a)&&(l|=1),l<<=1,this.readModule(1,a-1,s,a)&&(l|=1),l}readCorner3(s,a){let l=0;return this.readModule(s-1,0,s,a)&&(l|=1),l<<=1,this.readModule(s-1,a-1,s,a)&&(l|=1),l<<=1,this.readModule(0,a-3,s,a)&&(l|=1),l<<=1,this.readModule(0,a-2,s,a)&&(l|=1),l<<=1,this.readModule(0,a-1,s,a)&&(l|=1),l<<=1,this.readModule(1,a-3,s,a)&&(l|=1),l<<=1,this.readModule(1,a-2,s,a)&&(l|=1),l<<=1,this.readModule(1,a-1,s,a)&&(l|=1),l}readCorner4(s,a){let l=0;return this.readModule(s-3,0,s,a)&&(l|=1),l<<=1,this.readModule(s-2,0,s,a)&&(l|=1),l<<=1,this.readModule(s-1,0,s,a)&&(l|=1),l<<=1,this.readModule(0,a-2,s,a)&&(l|=1),l<<=1,this.readModule(0,a-1,s,a)&&(l|=1),l<<=1,this.readModule(1,a-1,s,a)&&(l|=1),l<<=1,this.readModule(2,a-1,s,a)&&(l|=1),l<<=1,this.readModule(3,a-1,s,a)&&(l|=1),l}extractDataRegion(s){let a=this.version.getSymbolSizeRows(),l=this.version.getSymbolSizeColumns();if(s.getHeight()!==a)throw new m("Dimension of bitMatrix must match the version size");let u=this.version.getDataRegionSizeRows(),d=this.version.getDataRegionSizeColumns(),f=a/u|0,p=l/d|0,y=f*u,C=p*d,w=new dn(C,y);for(let x=0;x<f;++x){let E=x*u;for(let D=0;D<p;++D){let O=D*d;for(let N=0;N<u;++N){let k=x*(u+2)+1+N,L=E+N;for(let Z=0;Z<d;++Z){let ie=D*(d+2)+1+Z;if(s.get(ie,k)){let U=O+Z;w.set(U,L)}}}}}return w}}class Op{constructor(s,a){this.numDataCodewords=s,this.codewords=a}static getDataBlocks(s,a){let l=a.getECBlocks(),u=0,d=l.getECBlocks();for(let N of d)u+=N.getCount();let f=new Array(u),p=0;for(let N of d)for(let k=0;k<N.getCount();k++){let L=N.getDataCodewords(),Z=l.getECCodewords()+L;f[p++]=new Op(L,new Uint8Array(Z))}let C=f[0].codewords.length-l.getECCodewords(),w=C-1,x=0;for(let N=0;N<w;N++)for(let k=0;k<p;k++)f[k].codewords[N]=s[x++];let E=a.getVersionNumber()===24,D=E?8:p;for(let N=0;N<D;N++)f[N].codewords[C-1]=s[x++];let O=f[0].codewords.length;for(let N=C;N<O;N++)for(let k=0;k<p;k++){let L=E?(k+8)%p:k,Z=E&&L>7?N-1:N;f[L].codewords[Z]=s[x++]}if(x!==s.length)throw new m;return f}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class Np{constructor(s){this.bytes=s,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(s){if(s<1||s>32||s>this.available())throw new m(""+s);let a=0,l=this.bitOffset,u=this.byteOffset,d=this.bytes;if(l>0){let f=8-l,p=s<f?s:f,y=f-p,C=255>>8-p<<y;a=(d[u]&C)>>y,s-=p,l+=p,l===8&&(l=0,u++)}if(s>0){for(;s>=8;)a=a<<8|d[u]&255,u++,s-=8;if(s>0){let f=8-s,p=255>>f<<f;a=a<<s|(d[u]&p)>>f,l+=s}}return this.bitOffset=l,this.byteOffset=u,a}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var pn=function(_){return _[_.PAD_ENCODE=0]="PAD_ENCODE",_[_.ASCII_ENCODE=1]="ASCII_ENCODE",_[_.C40_ENCODE=2]="C40_ENCODE",_[_.TEXT_ENCODE=3]="TEXT_ENCODE",_[_.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",_[_.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",_[_.BASE256_ENCODE=6]="BASE256_ENCODE",_}(pn||{});class no{static decode(s){let a=new Np(s),l=new wt,u=new wt,d=new Array,f=pn.ASCII_ENCODE;do if(f===pn.ASCII_ENCODE)f=this.decodeAsciiSegment(a,l,u);else{switch(f){case pn.C40_ENCODE:this.decodeC40Segment(a,l);break;case pn.TEXT_ENCODE:this.decodeTextSegment(a,l);break;case pn.ANSIX12_ENCODE:this.decodeAnsiX12Segment(a,l);break;case pn.EDIFACT_ENCODE:this.decodeEdifactSegment(a,l);break;case pn.BASE256_ENCODE:this.decodeBase256Segment(a,l,d);break;default:throw new W}f=pn.ASCII_ENCODE}while(f!==pn.PAD_ENCODE&&a.available()>0);return u.length()>0&&l.append(u.toString()),new ul(s,l.toString(),d.length===0?null:d,null)}static decodeAsciiSegment(s,a,l){let u=!1;do{let d=s.readBits(8);if(d===0)throw new W;if(d<=128)return u&&(d+=128),a.append(String.fromCharCode(d-1)),pn.ASCII_ENCODE;if(d===129)return pn.PAD_ENCODE;if(d<=229){let f=d-130;f<10&&a.append("0"),a.append(""+f)}else switch(d){case 230:return pn.C40_ENCODE;case 231:return pn.BASE256_ENCODE;case 232:a.append("");break;case 233:case 234:break;case 235:u=!0;break;case 236:a.append("[)>05"),l.insert(0,"");break;case 237:a.append("[)>06"),l.insert(0,"");break;case 238:return pn.ANSIX12_ENCODE;case 239:return pn.TEXT_ENCODE;case 240:return pn.EDIFACT_ENCODE;case 241:break;default:if(d!==254||s.available()!==0)throw new W;break}}while(s.available()>0);return pn.ASCII_ENCODE}static decodeC40Segment(s,a){let l=!1,u=[],d=0;do{if(s.available()===8)return;let f=s.readBits(8);if(f===254)return;this.parseTwoBytes(f,s.readBits(8),u);for(let p=0;p<3;p++){let y=u[p];switch(d){case 0:if(y<3)d=y+1;else if(y<this.C40_BASIC_SET_CHARS.length){let C=this.C40_BASIC_SET_CHARS[y];l?(a.append(String.fromCharCode(C.charCodeAt(0)+128)),l=!1):a.append(C)}else throw new W;break;case 1:l?(a.append(String.fromCharCode(y+128)),l=!1):a.append(String.fromCharCode(y)),d=0;break;case 2:if(y<this.C40_SHIFT2_SET_CHARS.length){let C=this.C40_SHIFT2_SET_CHARS[y];l?(a.append(String.fromCharCode(C.charCodeAt(0)+128)),l=!1):a.append(C)}else switch(y){case 27:a.append("");break;case 30:l=!0;break;default:throw new W}d=0;break;case 3:l?(a.append(String.fromCharCode(y+224)),l=!1):a.append(String.fromCharCode(y+96)),d=0;break;default:throw new W}}}while(s.available()>0)}static decodeTextSegment(s,a){let l=!1,u=[],d=0;do{if(s.available()===8)return;let f=s.readBits(8);if(f===254)return;this.parseTwoBytes(f,s.readBits(8),u);for(let p=0;p<3;p++){let y=u[p];switch(d){case 0:if(y<3)d=y+1;else if(y<this.TEXT_BASIC_SET_CHARS.length){let C=this.TEXT_BASIC_SET_CHARS[y];l?(a.append(String.fromCharCode(C.charCodeAt(0)+128)),l=!1):a.append(C)}else throw new W;break;case 1:l?(a.append(String.fromCharCode(y+128)),l=!1):a.append(String.fromCharCode(y)),d=0;break;case 2:if(y<this.TEXT_SHIFT2_SET_CHARS.length){let C=this.TEXT_SHIFT2_SET_CHARS[y];l?(a.append(String.fromCharCode(C.charCodeAt(0)+128)),l=!1):a.append(C)}else switch(y){case 27:a.append("");break;case 30:l=!0;break;default:throw new W}d=0;break;case 3:if(y<this.TEXT_SHIFT3_SET_CHARS.length){let C=this.TEXT_SHIFT3_SET_CHARS[y];l?(a.append(String.fromCharCode(C.charCodeAt(0)+128)),l=!1):a.append(C),d=0}else throw new W;break;default:throw new W}}}while(s.available()>0)}static decodeAnsiX12Segment(s,a){let l=[];do{if(s.available()===8)return;let u=s.readBits(8);if(u===254)return;this.parseTwoBytes(u,s.readBits(8),l);for(let d=0;d<3;d++){let f=l[d];switch(f){case 0:a.append("\r");break;case 1:a.append("*");break;case 2:a.append(">");break;case 3:a.append(" ");break;default:if(f<14)a.append(String.fromCharCode(f+44));else if(f<40)a.append(String.fromCharCode(f+51));else throw new W;break}}}while(s.available()>0)}static parseTwoBytes(s,a,l){let u=(s<<8)+a-1,d=Math.floor(u/1600);l[0]=d,u-=d*1600,d=Math.floor(u/40),l[1]=d,l[2]=u-d*40}static decodeEdifactSegment(s,a){do{if(s.available()<=16)return;for(let l=0;l<4;l++){let u=s.readBits(6);if(u===31){let d=8-s.getBitOffset();d!==8&&s.readBits(d);return}u&32||(u|=64),a.append(String.fromCharCode(u))}}while(s.available()>0)}static decodeBase256Segment(s,a,l){let u=1+s.getByteOffset(),d=this.unrandomize255State(s.readBits(8),u++),f;if(d===0?f=s.available()/8|0:d<250?f=d:f=250*(d-249)+this.unrandomize255State(s.readBits(8),u++),f<0)throw new W;let p=new Uint8Array(f);for(let y=0;y<f;y++){if(s.available()<8)throw new W;p[y]=this.unrandomize255State(s.readBits(8),u++)}l.push(p);try{a.append(Nn.decode(p,Ie.ISO88591))}catch(y){throw new bi("Platform does not support required encoding: "+y.message)}}static unrandomize255State(s,a){let l=149*a%255+1,u=s-l;return u>=0?u:u+256}}no.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],no.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],no.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],no.TEXT_SHIFT2_SET_CHARS=no.C40_SHIFT2_SET_CHARS,no.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~","\x7F"];class JA{constructor(){this.rsDecoder=new hl(lt.DATA_MATRIX_FIELD_256)}decode(s){let a=new Tp(s),l=a.getVersion(),u=a.readCodewords(),d=Op.getDataBlocks(u,l),f=0;for(let C of d)f+=C.getNumDataCodewords();let p=new Uint8Array(f),y=d.length;for(let C=0;C<y;C++){let w=d[C],x=w.getCodewords(),E=w.getNumDataCodewords();this.correctErrors(x,E);for(let D=0;D<E;D++)p[D*y+C]=x[D]}return no.decode(p)}correctErrors(s,a){let l=new Int32Array(s);try{this.rsDecoder.decode(l,s.length-a)}catch{throw new b}for(let u=0;u<a;u++)s[u]=l[u]}}class Gt{constructor(s){this.image=s,this.rectangleDetector=new vu(this.image)}detect(){let s=this.rectangleDetector.detect(),a=this.detectSolid1(s);if(a=this.detectSolid2(a),a[3]=this.correctTopRight(a),!a[3])throw new V;a=this.shiftToModuleCenter(a);let l=a[0],u=a[1],d=a[2],f=a[3],p=this.transitionsBetween(l,f)+1,y=this.transitionsBetween(d,f)+1;(p&1)===1&&(p+=1),(y&1)===1&&(y+=1),4*p<7*y&&4*y<7*p&&(p=y=Math.max(p,y));let C=Gt.sampleGrid(this.image,l,u,d,f,p,y);return new wu(C,[l,u,d,f])}static shiftPoint(s,a,l){let u=(a.getX()-s.getX())/(l+1),d=(a.getY()-s.getY())/(l+1);return new ue(s.getX()+u,s.getY()+d)}static moveAway(s,a,l){let u=s.getX(),d=s.getY();return u<a?u-=1:u+=1,d<l?d-=1:d+=1,new ue(u,d)}detectSolid1(s){let a=s[0],l=s[1],u=s[3],d=s[2],f=this.transitionsBetween(a,l),p=this.transitionsBetween(l,u),y=this.transitionsBetween(u,d),C=this.transitionsBetween(d,a),w=f,x=[d,a,l,u];return w>p&&(w=p,x[0]=a,x[1]=l,x[2]=u,x[3]=d),w>y&&(w=y,x[0]=l,x[1]=u,x[2]=d,x[3]=a),w>C&&(x[0]=u,x[1]=d,x[2]=a,x[3]=l),x}detectSolid2(s){let a=s[0],l=s[1],u=s[2],d=s[3],f=this.transitionsBetween(a,d),p=Gt.shiftPoint(l,u,(f+1)*4),y=Gt.shiftPoint(u,l,(f+1)*4),C=this.transitionsBetween(p,a),w=this.transitionsBetween(y,d);return C<w?(s[0]=a,s[1]=l,s[2]=u,s[3]=d):(s[0]=l,s[1]=u,s[2]=d,s[3]=a),s}correctTopRight(s){let a=s[0],l=s[1],u=s[2],d=s[3],f=this.transitionsBetween(a,d),p=this.transitionsBetween(l,d),y=Gt.shiftPoint(a,l,(p+1)*4),C=Gt.shiftPoint(u,l,(f+1)*4);f=this.transitionsBetween(y,d),p=this.transitionsBetween(C,d);let w=new ue(d.getX()+(u.getX()-l.getX())/(f+1),d.getY()+(u.getY()-l.getY())/(f+1)),x=new ue(d.getX()+(a.getX()-l.getX())/(p+1),d.getY()+(a.getY()-l.getY())/(p+1));if(!this.isValid(w))return this.isValid(x)?x:null;if(!this.isValid(x))return w;let E=this.transitionsBetween(y,w)+this.transitionsBetween(C,w),D=this.transitionsBetween(y,x)+this.transitionsBetween(C,x);return E>D?w:x}shiftToModuleCenter(s){let a=s[0],l=s[1],u=s[2],d=s[3],f=this.transitionsBetween(a,d)+1,p=this.transitionsBetween(u,d)+1,y=Gt.shiftPoint(a,l,p*4),C=Gt.shiftPoint(u,l,f*4);f=this.transitionsBetween(y,d)+1,p=this.transitionsBetween(C,d)+1,(f&1)===1&&(f+=1),(p&1)===1&&(p+=1);let w=(a.getX()+l.getX()+u.getX()+d.getX())/4,x=(a.getY()+l.getY()+u.getY()+d.getY())/4;a=Gt.moveAway(a,w,x),l=Gt.moveAway(l,w,x),u=Gt.moveAway(u,w,x),d=Gt.moveAway(d,w,x);let E,D;return y=Gt.shiftPoint(a,l,p*4),y=Gt.shiftPoint(y,d,f*4),E=Gt.shiftPoint(l,a,p*4),E=Gt.shiftPoint(E,u,f*4),C=Gt.shiftPoint(u,d,p*4),C=Gt.shiftPoint(C,l,f*4),D=Gt.shiftPoint(d,u,p*4),D=Gt.shiftPoint(D,a,f*4),[y,E,C,D]}isValid(s){return s.getX()>=0&&s.getX()<this.image.getWidth()&&s.getY()>0&&s.getY()<this.image.getHeight()}static sampleGrid(s,a,l,u,d,f,p){return Ji.getInstance().sampleGrid(s,f,p,.5,.5,f-.5,.5,f-.5,p-.5,.5,p-.5,a.getX(),a.getY(),d.getX(),d.getY(),u.getX(),u.getY(),l.getX(),l.getY())}transitionsBetween(s,a){let l=Math.trunc(s.getX()),u=Math.trunc(s.getY()),d=Math.trunc(a.getX()),f=Math.trunc(a.getY()),p=Math.abs(f-u)>Math.abs(d-l);if(p){let N=l;l=u,u=N,N=d,d=f,f=N}let y=Math.abs(d-l),C=Math.abs(f-u),w=-y/2,x=u<f?1:-1,E=l<d?1:-1,D=0,O=this.image.get(p?u:l,p?l:u);for(let N=l,k=u;N!==d;N+=E){let L=this.image.get(p?k:N,p?N:k);if(L!==O&&(D++,O=L),w+=C,w>0){if(k===f)break;k+=x,w-=y}}return D}}let Su=(()=>{class _{constructor(){this.decoder=new JA}decode(a,l=null){let u,d;if(l!=null&&l.has(me.PURE_BARCODE)){let w=_.extractPureBits(a.getBlackMatrix());u=this.decoder.decode(w),d=_.NO_POINTS}else{let w=new Gt(a.getBlackMatrix()).detect();u=this.decoder.decode(w.getBits()),d=w.getPoints()}let f=u.getRawBytes(),p=new Ln(u.getText(),f,8*f.length,d,Ce.DATA_MATRIX,M.currentTimeMillis()),y=u.getByteSegments();y!=null&&p.putMetadata(hn.BYTE_SEGMENTS,y);let C=u.getECLevel();return C!=null&&p.putMetadata(hn.ERROR_CORRECTION_LEVEL,C),p}reset(){}static extractPureBits(a){let l=a.getTopLeftOnBit(),u=a.getBottomRightOnBit();if(l==null||u==null)throw new V;let d=this.moduleSize(l,a),f=l[1],p=u[1],y=l[0],w=(u[0]-y+1)/d,x=(p-f+1)/d;if(w<=0||x<=0)throw new V;let E=d/2;f+=E,y+=E;let D=new dn(w,x);for(let O=0;O<x;O++){let N=f+O*d;for(let k=0;k<w;k++)a.get(y+k*d,N)&&D.set(k,O)}return D}static moduleSize(a,l){let u=l.getWidth(),d=a[0],f=a[1];for(;d<u&&l.get(d,f);)d++;if(d===u)throw new V;let p=d-a[0];if(p===0)throw new V;return p}}return _.NO_POINTS=[],_})();class eT extends Vo{constructor(s=500){super(new Su,s)}}var gl=function(_){return _[_.L=0]="L",_[_.M=1]="M",_[_.Q=2]="Q",_[_.H=3]="H",_}(gl||{});class St{constructor(s,a,l){this.value=s,this.stringValue=a,this.bits=l,St.FOR_BITS.set(l,this),St.FOR_VALUE.set(s,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(s){switch(s){case"L":return St.L;case"M":return St.M;case"Q":return St.Q;case"H":return St.H;default:throw new g(s+"not available")}}toString(){return this.stringValue}equals(s){if(!(s instanceof St))return!1;let a=s;return this.value===a.value}static forBits(s){if(s<0||s>=St.FOR_BITS.size)throw new m;return St.FOR_BITS.get(s)}}St.FOR_BITS=new Map,St.FOR_VALUE=new Map,St.L=new St(gl.L,"L",1),St.M=new St(gl.M,"M",0),St.Q=new St(gl.Q,"Q",3),St.H=new St(gl.H,"H",2);class Pn{constructor(s){this.errorCorrectionLevel=St.forBits(s>>3&3),this.dataMask=s&7}static numBitsDiffering(s,a){return $.bitCount(s^a)}static decodeFormatInformation(s,a){let l=Pn.doDecodeFormatInformation(s,a);return l!==null?l:Pn.doDecodeFormatInformation(s^Pn.FORMAT_INFO_MASK_QR,a^Pn.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(s,a){let l=Number.MAX_SAFE_INTEGER,u=0;for(let d of Pn.FORMAT_INFO_DECODE_LOOKUP){let f=d[0];if(f===s||f===a)return new Pn(d[1]);let p=Pn.numBitsDiffering(s,f);p<l&&(u=d[1],l=p),s!==a&&(p=Pn.numBitsDiffering(a,f),p<l&&(u=d[1],l=p))}return l<=3?new Pn(u):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(s){if(!(s instanceof Pn))return!1;let a=s;return this.errorCorrectionLevel===a.errorCorrectionLevel&&this.dataMask===a.dataMask}}Pn.FORMAT_INFO_MASK_QR=21522,Pn.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class F{constructor(s,...a){this.ecCodewordsPerBlock=s,this.ecBlocks=a}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let s=0,a=this.ecBlocks;for(let l of a)s+=l.getCount();return s}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class S{constructor(s,a){this.count=s,this.dataCodewords=a}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class ge{constructor(s,a,...l){this.versionNumber=s,this.alignmentPatternCenters=a,this.ecBlocks=l;let u=0,d=l[0].getECCodewordsPerBlock(),f=l[0].getECBlocks();for(let p of f)u+=p.getCount()*(p.getDataCodewords()+d);this.totalCodewords=u}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(s){return this.ecBlocks[s.getValue()]}static getProvisionalVersionForDimension(s){if(s%4!==1)throw new W;try{return this.getVersionForNumber((s-17)/4)}catch{throw new W}}static getVersionForNumber(s){if(s<1||s>40)throw new m;return ge.VERSIONS[s-1]}static decodeVersionInformation(s){let a=Number.MAX_SAFE_INTEGER,l=0;for(let u=0;u<ge.VERSION_DECODE_INFO.length;u++){let d=ge.VERSION_DECODE_INFO[u];if(d===s)return ge.getVersionForNumber(u+7);let f=Pn.numBitsDiffering(s,d);f<a&&(l=u+7,a=f)}return a<=3?ge.getVersionForNumber(l):null}buildFunctionPattern(){let s=this.getDimensionForVersion(),a=new dn(s);a.setRegion(0,0,9,9),a.setRegion(s-8,0,8,9),a.setRegion(0,s-8,9,8);let l=this.alignmentPatternCenters.length;for(let u=0;u<l;u++){let d=this.alignmentPatternCenters[u]-2;for(let f=0;f<l;f++)u===0&&(f===0||f===l-1)||u===l-1&&f===0||a.setRegion(this.alignmentPatternCenters[f]-2,d,5,5)}return a.setRegion(6,9,1,s-17),a.setRegion(9,6,s-17,1),this.versionNumber>6&&(a.setRegion(s-11,0,3,6),a.setRegion(0,s-11,6,3)),a}toString(){return""+this.versionNumber}}ge.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),ge.VERSIONS=[new ge(1,new Int32Array(0),new F(7,new S(1,19)),new F(10,new S(1,16)),new F(13,new S(1,13)),new F(17,new S(1,9))),new ge(2,Int32Array.from([6,18]),new F(10,new S(1,34)),new F(16,new S(1,28)),new F(22,new S(1,22)),new F(28,new S(1,16))),new ge(3,Int32Array.from([6,22]),new F(15,new S(1,55)),new F(26,new S(1,44)),new F(18,new S(2,17)),new F(22,new S(2,13))),new ge(4,Int32Array.from([6,26]),new F(20,new S(1,80)),new F(18,new S(2,32)),new F(26,new S(2,24)),new F(16,new S(4,9))),new ge(5,Int32Array.from([6,30]),new F(26,new S(1,108)),new F(24,new S(2,43)),new F(18,new S(2,15),new S(2,16)),new F(22,new S(2,11),new S(2,12))),new ge(6,Int32Array.from([6,34]),new F(18,new S(2,68)),new F(16,new S(4,27)),new F(24,new S(4,19)),new F(28,new S(4,15))),new ge(7,Int32Array.from([6,22,38]),new F(20,new S(2,78)),new F(18,new S(4,31)),new F(18,new S(2,14),new S(4,15)),new F(26,new S(4,13),new S(1,14))),new ge(8,Int32Array.from([6,24,42]),new F(24,new S(2,97)),new F(22,new S(2,38),new S(2,39)),new F(22,new S(4,18),new S(2,19)),new F(26,new S(4,14),new S(2,15))),new ge(9,Int32Array.from([6,26,46]),new F(30,new S(2,116)),new F(22,new S(3,36),new S(2,37)),new F(20,new S(4,16),new S(4,17)),new F(24,new S(4,12),new S(4,13))),new ge(10,Int32Array.from([6,28,50]),new F(18,new S(2,68),new S(2,69)),new F(26,new S(4,43),new S(1,44)),new F(24,new S(6,19),new S(2,20)),new F(28,new S(6,15),new S(2,16))),new ge(11,Int32Array.from([6,30,54]),new F(20,new S(4,81)),new F(30,new S(1,50),new S(4,51)),new F(28,new S(4,22),new S(4,23)),new F(24,new S(3,12),new S(8,13))),new ge(12,Int32Array.from([6,32,58]),new F(24,new S(2,92),new S(2,93)),new F(22,new S(6,36),new S(2,37)),new F(26,new S(4,20),new S(6,21)),new F(28,new S(7,14),new S(4,15))),new ge(13,Int32Array.from([6,34,62]),new F(26,new S(4,107)),new F(22,new S(8,37),new S(1,38)),new F(24,new S(8,20),new S(4,21)),new F(22,new S(12,11),new S(4,12))),new ge(14,Int32Array.from([6,26,46,66]),new F(30,new S(3,115),new S(1,116)),new F(24,new S(4,40),new S(5,41)),new F(20,new S(11,16),new S(5,17)),new F(24,new S(11,12),new S(5,13))),new ge(15,Int32Array.from([6,26,48,70]),new F(22,new S(5,87),new S(1,88)),new F(24,new S(5,41),new S(5,42)),new F(30,new S(5,24),new S(7,25)),new F(24,new S(11,12),new S(7,13))),new ge(16,Int32Array.from([6,26,50,74]),new F(24,new S(5,98),new S(1,99)),new F(28,new S(7,45),new S(3,46)),new F(24,new S(15,19),new S(2,20)),new F(30,new S(3,15),new S(13,16))),new ge(17,Int32Array.from([6,30,54,78]),new F(28,new S(1,107),new S(5,108)),new F(28,new S(10,46),new S(1,47)),new F(28,new S(1,22),new S(15,23)),new F(28,new S(2,14),new S(17,15))),new ge(18,Int32Array.from([6,30,56,82]),new F(30,new S(5,120),new S(1,121)),new F(26,new S(9,43),new S(4,44)),new F(28,new S(17,22),new S(1,23)),new F(28,new S(2,14),new S(19,15))),new ge(19,Int32Array.from([6,30,58,86]),new F(28,new S(3,113),new S(4,114)),new F(26,new S(3,44),new S(11,45)),new F(26,new S(17,21),new S(4,22)),new F(26,new S(9,13),new S(16,14))),new ge(20,Int32Array.from([6,34,62,90]),new F(28,new S(3,107),new S(5,108)),new F(26,new S(3,41),new S(13,42)),new F(30,new S(15,24),new S(5,25)),new F(28,new S(15,15),new S(10,16))),new ge(21,Int32Array.from([6,28,50,72,94]),new F(28,new S(4,116),new S(4,117)),new F(26,new S(17,42)),new F(28,new S(17,22),new S(6,23)),new F(30,new S(19,16),new S(6,17))),new ge(22,Int32Array.from([6,26,50,74,98]),new F(28,new S(2,111),new S(7,112)),new F(28,new S(17,46)),new F(30,new S(7,24),new S(16,25)),new F(24,new S(34,13))),new ge(23,Int32Array.from([6,30,54,78,102]),new F(30,new S(4,121),new S(5,122)),new F(28,new S(4,47),new S(14,48)),new F(30,new S(11,24),new S(14,25)),new F(30,new S(16,15),new S(14,16))),new ge(24,Int32Array.from([6,28,54,80,106]),new F(30,new S(6,117),new S(4,118)),new F(28,new S(6,45),new S(14,46)),new F(30,new S(11,24),new S(16,25)),new F(30,new S(30,16),new S(2,17))),new ge(25,Int32Array.from([6,32,58,84,110]),new F(26,new S(8,106),new S(4,107)),new F(28,new S(8,47),new S(13,48)),new F(30,new S(7,24),new S(22,25)),new F(30,new S(22,15),new S(13,16))),new ge(26,Int32Array.from([6,30,58,86,114]),new F(28,new S(10,114),new S(2,115)),new F(28,new S(19,46),new S(4,47)),new F(28,new S(28,22),new S(6,23)),new F(30,new S(33,16),new S(4,17))),new ge(27,Int32Array.from([6,34,62,90,118]),new F(30,new S(8,122),new S(4,123)),new F(28,new S(22,45),new S(3,46)),new F(30,new S(8,23),new S(26,24)),new F(30,new S(12,15),new S(28,16))),new ge(28,Int32Array.from([6,26,50,74,98,122]),new F(30,new S(3,117),new S(10,118)),new F(28,new S(3,45),new S(23,46)),new F(30,new S(4,24),new S(31,25)),new F(30,new S(11,15),new S(31,16))),new ge(29,Int32Array.from([6,30,54,78,102,126]),new F(30,new S(7,116),new S(7,117)),new F(28,new S(21,45),new S(7,46)),new F(30,new S(1,23),new S(37,24)),new F(30,new S(19,15),new S(26,16))),new ge(30,Int32Array.from([6,26,52,78,104,130]),new F(30,new S(5,115),new S(10,116)),new F(28,new S(19,47),new S(10,48)),new F(30,new S(15,24),new S(25,25)),new F(30,new S(23,15),new S(25,16))),new ge(31,Int32Array.from([6,30,56,82,108,134]),new F(30,new S(13,115),new S(3,116)),new F(28,new S(2,46),new S(29,47)),new F(30,new S(42,24),new S(1,25)),new F(30,new S(23,15),new S(28,16))),new ge(32,Int32Array.from([6,34,60,86,112,138]),new F(30,new S(17,115)),new F(28,new S(10,46),new S(23,47)),new F(30,new S(10,24),new S(35,25)),new F(30,new S(19,15),new S(35,16))),new ge(33,Int32Array.from([6,30,58,86,114,142]),new F(30,new S(17,115),new S(1,116)),new F(28,new S(14,46),new S(21,47)),new F(30,new S(29,24),new S(19,25)),new F(30,new S(11,15),new S(46,16))),new ge(34,Int32Array.from([6,34,62,90,118,146]),new F(30,new S(13,115),new S(6,116)),new F(28,new S(14,46),new S(23,47)),new F(30,new S(44,24),new S(7,25)),new F(30,new S(59,16),new S(1,17))),new ge(35,Int32Array.from([6,30,54,78,102,126,150]),new F(30,new S(12,121),new S(7,122)),new F(28,new S(12,47),new S(26,48)),new F(30,new S(39,24),new S(14,25)),new F(30,new S(22,15),new S(41,16))),new ge(36,Int32Array.from([6,24,50,76,102,128,154]),new F(30,new S(6,121),new S(14,122)),new F(28,new S(6,47),new S(34,48)),new F(30,new S(46,24),new S(10,25)),new F(30,new S(2,15),new S(64,16))),new ge(37,Int32Array.from([6,28,54,80,106,132,158]),new F(30,new S(17,122),new S(4,123)),new F(28,new S(29,46),new S(14,47)),new F(30,new S(49,24),new S(10,25)),new F(30,new S(24,15),new S(46,16))),new ge(38,Int32Array.from([6,32,58,84,110,136,162]),new F(30,new S(4,122),new S(18,123)),new F(28,new S(13,46),new S(32,47)),new F(30,new S(48,24),new S(14,25)),new F(30,new S(42,15),new S(32,16))),new ge(39,Int32Array.from([6,26,54,82,110,138,166]),new F(30,new S(20,117),new S(4,118)),new F(28,new S(40,47),new S(7,48)),new F(30,new S(43,24),new S(22,25)),new F(30,new S(10,15),new S(67,16))),new ge(40,Int32Array.from([6,30,58,86,114,142,170]),new F(30,new S(19,118),new S(6,119)),new F(28,new S(18,47),new S(31,48)),new F(30,new S(34,24),new S(34,25)),new F(30,new S(20,15),new S(61,16)))];var vn=function(_){return _[_.DATA_MASK_000=0]="DATA_MASK_000",_[_.DATA_MASK_001=1]="DATA_MASK_001",_[_.DATA_MASK_010=2]="DATA_MASK_010",_[_.DATA_MASK_011=3]="DATA_MASK_011",_[_.DATA_MASK_100=4]="DATA_MASK_100",_[_.DATA_MASK_101=5]="DATA_MASK_101",_[_.DATA_MASK_110=6]="DATA_MASK_110",_[_.DATA_MASK_111=7]="DATA_MASK_111",_}(vn||{});class yr{constructor(s,a){this.value=s,this.isMasked=a}unmaskBitMatrix(s,a){for(let l=0;l<a;l++)for(let u=0;u<a;u++)this.isMasked(l,u)&&s.flip(u,l)}}yr.values=new Map([[vn.DATA_MASK_000,new yr(vn.DATA_MASK_000,(_,s)=>(_+s&1)===0)],[vn.DATA_MASK_001,new yr(vn.DATA_MASK_001,(_,s)=>(_&1)===0)],[vn.DATA_MASK_010,new yr(vn.DATA_MASK_010,(_,s)=>s%3===0)],[vn.DATA_MASK_011,new yr(vn.DATA_MASK_011,(_,s)=>(_+s)%3===0)],[vn.DATA_MASK_100,new yr(vn.DATA_MASK_100,(_,s)=>(Math.floor(_/2)+Math.floor(s/3)&1)===0)],[vn.DATA_MASK_101,new yr(vn.DATA_MASK_101,(_,s)=>_*s%6===0)],[vn.DATA_MASK_110,new yr(vn.DATA_MASK_110,(_,s)=>_*s%6<3)],[vn.DATA_MASK_111,new yr(vn.DATA_MASK_111,(_,s)=>(_+s+_*s%3&1)===0)]]);class tT{constructor(s){let a=s.getHeight();if(a<21||(a&3)!==1)throw new W;this.bitMatrix=s}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let s=0;for(let d=0;d<6;d++)s=this.copyBit(d,8,s);s=this.copyBit(7,8,s),s=this.copyBit(8,8,s),s=this.copyBit(8,7,s);for(let d=5;d>=0;d--)s=this.copyBit(8,d,s);let a=this.bitMatrix.getHeight(),l=0,u=a-7;for(let d=a-1;d>=u;d--)l=this.copyBit(8,d,l);for(let d=a-8;d<a;d++)l=this.copyBit(d,8,l);if(this.parsedFormatInfo=Pn.decodeFormatInformation(s,l),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new W}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;let s=this.bitMatrix.getHeight(),a=Math.floor((s-17)/4);if(a<=6)return ge.getVersionForNumber(a);let l=0,u=s-11;for(let f=5;f>=0;f--)for(let p=s-9;p>=u;p--)l=this.copyBit(p,f,l);let d=ge.decodeVersionInformation(l);if(d!==null&&d.getDimensionForVersion()===s)return this.parsedVersion=d,d;l=0;for(let f=5;f>=0;f--)for(let p=s-9;p>=u;p--)l=this.copyBit(f,p,l);if(d=ge.decodeVersionInformation(l),d!==null&&d.getDimensionForVersion()===s)return this.parsedVersion=d,d;throw new W}copyBit(s,a,l){return(this.isMirror?this.bitMatrix.get(a,s):this.bitMatrix.get(s,a))?l<<1|1:l<<1}readCodewords(){let s=this.readFormatInformation(),a=this.readVersion(),l=yr.values.get(s.getDataMask()),u=this.bitMatrix.getHeight();l.unmaskBitMatrix(this.bitMatrix,u);let d=a.buildFunctionPattern(),f=!0,p=new Uint8Array(a.getTotalCodewords()),y=0,C=0,w=0;for(let x=u-1;x>0;x-=2){x===6&&x--;for(let E=0;E<u;E++){let D=f?u-1-E:E;for(let O=0;O<2;O++)d.get(x-O,D)||(w++,C<<=1,this.bitMatrix.get(x-O,D)&&(C|=1),w===8&&(p[y++]=C,w=0,C=0))}f=!f}if(y!==a.getTotalCodewords())throw new W;return p}remask(){if(this.parsedFormatInfo===null)return;let s=yr.values[this.parsedFormatInfo.getDataMask()],a=this.bitMatrix.getHeight();s.unmaskBitMatrix(this.bitMatrix,a)}setMirror(s){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=s}mirror(){let s=this.bitMatrix;for(let a=0,l=s.getWidth();a<l;a++)for(let u=a+1,d=s.getHeight();u<d;u++)s.get(a,u)!==s.get(u,a)&&(s.flip(u,a),s.flip(a,u))}}class Rp{constructor(s,a){this.numDataCodewords=s,this.codewords=a}static getDataBlocks(s,a,l){if(s.length!==a.getTotalCodewords())throw new m;let u=a.getECBlocksForLevel(l),d=0,f=u.getECBlocks();for(let O of f)d+=O.getCount();let p=new Array(d),y=0;for(let O of f)for(let N=0;N<O.getCount();N++){let k=O.getDataCodewords(),L=u.getECCodewordsPerBlock()+k;p[y++]=new Rp(k,new Uint8Array(L))}let C=p[0].codewords.length,w=p.length-1;for(;w>=0&&p[w].codewords.length!==C;)w--;w++;let x=C-u.getECCodewordsPerBlock(),E=0;for(let O=0;O<x;O++)for(let N=0;N<y;N++)p[N].codewords[O]=s[E++];for(let O=w;O<y;O++)p[O].codewords[x]=s[E++];let D=p[0].codewords.length;for(let O=x;O<D;O++)for(let N=0;N<y;N++){let k=N<w?O:O+1;p[N].codewords[k]=s[E++]}return p}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Lr=function(_){return _[_.TERMINATOR=0]="TERMINATOR",_[_.NUMERIC=1]="NUMERIC",_[_.ALPHANUMERIC=2]="ALPHANUMERIC",_[_.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",_[_.BYTE=4]="BYTE",_[_.ECI=5]="ECI",_[_.KANJI=6]="KANJI",_[_.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",_[_.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",_[_.HANZI=9]="HANZI",_}(Lr||{});class ye{constructor(s,a,l,u){this.value=s,this.stringValue=a,this.characterCountBitsForVersions=l,this.bits=u,ye.FOR_BITS.set(u,this),ye.FOR_VALUE.set(s,this)}static forBits(s){let a=ye.FOR_BITS.get(s);if(a===void 0)throw new m;return a}getCharacterCountBits(s){let a=s.getVersionNumber(),l;return a<=9?l=0:a<=26?l=1:l=2,this.characterCountBitsForVersions[l]}getValue(){return this.value}getBits(){return this.bits}equals(s){if(!(s instanceof ye))return!1;let a=s;return this.value===a.value}toString(){return this.stringValue}}ye.FOR_BITS=new Map,ye.FOR_VALUE=new Map,ye.TERMINATOR=new ye(Lr.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),ye.NUMERIC=new ye(Lr.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),ye.ALPHANUMERIC=new ye(Lr.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),ye.STRUCTURED_APPEND=new ye(Lr.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),ye.BYTE=new ye(Lr.BYTE,"BYTE",Int32Array.from([8,16,16]),4),ye.ECI=new ye(Lr.ECI,"ECI",Int32Array.from([0,0,0]),7),ye.KANJI=new ye(Lr.KANJI,"KANJI",Int32Array.from([8,10,12]),8),ye.FNC1_FIRST_POSITION=new ye(Lr.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),ye.FNC1_SECOND_POSITION=new ye(Lr.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),ye.HANZI=new ye(Lr.HANZI,"HANZI",Int32Array.from([8,10,12]),13);let k_=(()=>{class _{static decode(a,l,u,d){let f=new Np(a),p=new wt,y=new Array,C=-1,w=-1;try{let x=null,E=!1,D;do{if(f.available()<4)D=ye.TERMINATOR;else{let O=f.readBits(4);D=ye.forBits(O)}switch(D){case ye.TERMINATOR:break;case ye.FNC1_FIRST_POSITION:case ye.FNC1_SECOND_POSITION:E=!0;break;case ye.STRUCTURED_APPEND:if(f.available()<16)throw new W;C=f.readBits(8),w=f.readBits(8);break;case ye.ECI:let O=_.parseECIValue(f);if(x=Y.getCharacterSetECIByValue(O),x===null)throw new W;break;case ye.HANZI:let N=f.readBits(4),k=f.readBits(D.getCharacterCountBits(l));N===_.GB2312_SUBSET&&_.decodeHanziSegment(f,p,k);break;default:let L=f.readBits(D.getCharacterCountBits(l));switch(D){case ye.NUMERIC:_.decodeNumericSegment(f,p,L);break;case ye.ALPHANUMERIC:_.decodeAlphanumericSegment(f,p,L,E);break;case ye.BYTE:_.decodeByteSegment(f,p,L,x,y,d);break;case ye.KANJI:_.decodeKanjiSegment(f,p,L);break;default:throw new W}break}}while(D!==ye.TERMINATOR)}catch{throw new W}return new ul(a,p.toString(),y.length===0?null:y,u===null?null:u.toString(),C,w)}static decodeHanziSegment(a,l,u){if(u*13>a.available())throw new W;let d=new Uint8Array(2*u),f=0;for(;u>0;){let p=a.readBits(13),y=p/96<<8&4294967295|p%96;y<959?y+=41377:y+=42657,d[f]=y>>8&255,d[f+1]=y&255,f+=2,u--}try{l.append(Nn.decode(d,Ie.GB2312))}catch(p){throw new W(p)}}static decodeKanjiSegment(a,l,u){if(u*13>a.available())throw new W;let d=new Uint8Array(2*u),f=0;for(;u>0;){let p=a.readBits(13),y=p/192<<8&4294967295|p%192;y<7936?y+=33088:y+=49472,d[f]=y>>8,d[f+1]=y,f+=2,u--}try{l.append(Nn.decode(d,Ie.SHIFT_JIS))}catch(p){throw new W(p)}}static decodeByteSegment(a,l,u,d,f,p){if(8*u>a.available())throw new W;let y=new Uint8Array(u);for(let w=0;w<u;w++)y[w]=a.readBits(8);let C;d===null?C=Ie.guessEncoding(y,p):C=d.getName();try{l.append(Nn.decode(y,C))}catch(w){throw new W(w)}f.push(y)}static toAlphaNumericChar(a){if(a>=_.ALPHANUMERIC_CHARS.length)throw new W;return _.ALPHANUMERIC_CHARS[a]}static decodeAlphanumericSegment(a,l,u,d){let f=l.length();for(;u>1;){if(a.available()<11)throw new W;let p=a.readBits(11);l.append(_.toAlphaNumericChar(Math.floor(p/45))),l.append(_.toAlphaNumericChar(p%45)),u-=2}if(u===1){if(a.available()<6)throw new W;l.append(_.toAlphaNumericChar(a.readBits(6)))}if(d)for(let p=f;p<l.length();p++)l.charAt(p)==="%"&&(p<l.length()-1&&l.charAt(p+1)==="%"?l.deleteCharAt(p+1):l.setCharAt(p,""))}static decodeNumericSegment(a,l,u){for(;u>=3;){if(a.available()<10)throw new W;let d=a.readBits(10);if(d>=1e3)throw new W;l.append(_.toAlphaNumericChar(Math.floor(d/100))),l.append(_.toAlphaNumericChar(Math.floor(d/10)%10)),l.append(_.toAlphaNumericChar(d%10)),u-=3}if(u===2){if(a.available()<7)throw new W;let d=a.readBits(7);if(d>=100)throw new W;l.append(_.toAlphaNumericChar(Math.floor(d/10))),l.append(_.toAlphaNumericChar(d%10))}else if(u===1){if(a.available()<4)throw new W;let d=a.readBits(4);if(d>=10)throw new W;l.append(_.toAlphaNumericChar(d))}}static parseECIValue(a){let l=a.readBits(8);if(!(l&128))return l&127;if((l&192)===128){let u=a.readBits(8);return(l&63)<<8&4294967295|u}if((l&224)===192){let u=a.readBits(16);return(l&31)<<16&4294967295|u}throw new W}}return _.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",_.GB2312_SUBSET=1,_})();class F_{constructor(s){this.mirrored=s}isMirrored(){return this.mirrored}applyMirroredCorrection(s){if(!this.mirrored||s===null||s.length<3)return;let a=s[0];s[0]=s[2],s[2]=a}}class nT{constructor(){this.rsDecoder=new hl(lt.QR_CODE_FIELD_256)}decodeBooleanArray(s,a){return this.decodeBitMatrix(dn.parseFromBooleanArray(s),a)}decodeBitMatrix(s,a){let l=new tT(s),u=null;try{return this.decodeBitMatrixParser(l,a)}catch(d){u=d}try{l.remask(),l.setMirror(!0),l.readVersion(),l.readFormatInformation(),l.mirror();let d=this.decodeBitMatrixParser(l,a);return d.setOther(new F_(!0)),d}catch(d){throw u!==null?u:d}}decodeBitMatrixParser(s,a){let l=s.readVersion(),u=s.readFormatInformation().getErrorCorrectionLevel(),d=s.readCodewords(),f=Rp.getDataBlocks(d,l,u),p=0;for(let w of f)p+=w.getNumDataCodewords();let y=new Uint8Array(p),C=0;for(let w of f){let x=w.getCodewords(),E=w.getNumDataCodewords();this.correctErrors(x,E);for(let D=0;D<E;D++)y[C++]=x[D]}return k_.decode(y,l,u,a)}correctErrors(s,a){let l=new Int32Array(s);try{this.rsDecoder.decode(l,s.length-a)}catch{throw new b}for(let u=0;u<a;u++)s[u]=l[u]}}class Pp extends ue{constructor(s,a,l){super(s,a),this.estimatedModuleSize=l}aboutEquals(s,a,l){if(Math.abs(a-this.getY())<=s&&Math.abs(l-this.getX())<=s){let u=Math.abs(s-this.estimatedModuleSize);return u<=1||u<=this.estimatedModuleSize}return!1}combineEstimate(s,a,l){let u=(this.getX()+a)/2,d=(this.getY()+s)/2,f=(this.estimatedModuleSize+l)/2;return new Pp(u,d,f)}}class Du{constructor(s,a,l,u,d,f,p){this.image=s,this.startX=a,this.startY=l,this.width=u,this.height=d,this.moduleSize=f,this.resultPointCallback=p,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){let s=this.startX,a=this.height,l=this.width,u=s+l,d=this.startY+a/2,f=new Int32Array(3),p=this.image;for(let y=0;y<a;y++){let C=d+(y&1?-Math.floor((y+1)/2):Math.floor((y+1)/2));f[0]=0,f[1]=0,f[2]=0;let w=s;for(;w<u&&!p.get(w,C);)w++;let x=0;for(;w<u;){if(p.get(w,C))if(x===1)f[1]++;else if(x===2){if(this.foundPatternCross(f)){let E=this.handlePossibleCenter(f,C,w);if(E!==null)return E}f[0]=f[2],f[1]=1,f[2]=0,x=1}else f[++x]++;else x===1&&x++,f[x]++;w++}if(this.foundPatternCross(f)){let E=this.handlePossibleCenter(f,C,u);if(E!==null)return E}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new V}static centerFromEnd(s,a){return a-s[2]-s[1]/2}foundPatternCross(s){let a=this.moduleSize,l=a/2;for(let u=0;u<3;u++)if(Math.abs(a-s[u])>=l)return!1;return!0}crossCheckVertical(s,a,l,u){let d=this.image,f=d.getHeight(),p=this.crossCheckStateCount;p[0]=0,p[1]=0,p[2]=0;let y=s;for(;y>=0&&d.get(a,y)&&p[1]<=l;)p[1]++,y--;if(y<0||p[1]>l)return NaN;for(;y>=0&&!d.get(a,y)&&p[0]<=l;)p[0]++,y--;if(p[0]>l)return NaN;for(y=s+1;y<f&&d.get(a,y)&&p[1]<=l;)p[1]++,y++;if(y===f||p[1]>l)return NaN;for(;y<f&&!d.get(a,y)&&p[2]<=l;)p[2]++,y++;if(p[2]>l)return NaN;let C=p[0]+p[1]+p[2];return 5*Math.abs(C-u)>=2*u?NaN:this.foundPatternCross(p)?Du.centerFromEnd(p,y):NaN}handlePossibleCenter(s,a,l){let u=s[0]+s[1]+s[2],d=Du.centerFromEnd(s,l),f=this.crossCheckVertical(a,d,2*s[1],u);if(!isNaN(f)){let p=(s[0]+s[1]+s[2])/3;for(let C of this.possibleCenters)if(C.aboutEquals(p,f,d))return C.combineEstimate(f,d,p);let y=new Pp(d,f,p);this.possibleCenters.push(y),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(y)}return null}}class kp extends ue{constructor(s,a,l,u){super(s,a),this.estimatedModuleSize=l,this.count=u,u===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(s,a,l){if(Math.abs(a-this.getY())<=s&&Math.abs(l-this.getX())<=s){let u=Math.abs(s-this.estimatedModuleSize);return u<=1||u<=this.estimatedModuleSize}return!1}combineEstimate(s,a,l){let u=this.count+1,d=(this.count*this.getX()+a)/u,f=(this.count*this.getY()+s)/u,p=(this.count*this.estimatedModuleSize+l)/u;return new kp(d,f,p,u)}}class rT{constructor(s){this.bottomLeft=s[0],this.topLeft=s[1],this.topRight=s[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}let iT=(()=>{class _{constructor(a,l){this.image=a,this.resultPointCallback=l,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=l}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(a){let l=a!=null&&a.get(me.TRY_HARDER)!==void 0,u=a!=null&&a.get(me.PURE_BARCODE)!==void 0,d=this.image,f=d.getHeight(),p=d.getWidth(),y=Math.floor(3*f/(4*_.MAX_MODULES));(y<_.MIN_SKIP||l)&&(y=_.MIN_SKIP);let C=!1,w=new Int32Array(5);for(let E=y-1;E<f&&!C;E+=y){w[0]=0,w[1]=0,w[2]=0,w[3]=0,w[4]=0;let D=0;for(let O=0;O<p;O++)if(d.get(O,E))(D&1)===1&&D++,w[D]++;else if(D&1)w[D]++;else if(D===4)if(_.foundPatternCross(w)){if(this.handlePossibleCenter(w,E,O,u)===!0)if(y=2,this.hasSkipped===!0)C=this.haveMultiplyConfirmedCenters();else{let k=this.findRowSkip();k>w[2]&&(E+=k-w[2]-y,O=p-1)}else{w[0]=w[2],w[1]=w[3],w[2]=w[4],w[3]=1,w[4]=0,D=3;continue}D=0,w[0]=0,w[1]=0,w[2]=0,w[3]=0,w[4]=0}else w[0]=w[2],w[1]=w[3],w[2]=w[4],w[3]=1,w[4]=0,D=3;else w[++D]++;_.foundPatternCross(w)&&this.handlePossibleCenter(w,E,p,u)===!0&&(y=w[0],this.hasSkipped&&(C=this.haveMultiplyConfirmedCenters()))}let x=this.selectBestPatterns();return ue.orderBestPatterns(x),new rT(x)}static centerFromEnd(a,l){return l-a[4]-a[3]-a[2]/2}static foundPatternCross(a){let l=0;for(let f=0;f<5;f++){let p=a[f];if(p===0)return!1;l+=p}if(l<7)return!1;let u=l/7,d=u/2;return Math.abs(u-a[0])<d&&Math.abs(u-a[1])<d&&Math.abs(3*u-a[2])<3*d&&Math.abs(u-a[3])<d&&Math.abs(u-a[4])<d}getCrossCheckStateCount(){let a=this.crossCheckStateCount;return a[0]=0,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a}crossCheckDiagonal(a,l,u,d){let f=this.getCrossCheckStateCount(),p=0,y=this.image;for(;a>=p&&l>=p&&y.get(l-p,a-p);)f[2]++,p++;if(a<p||l<p)return!1;for(;a>=p&&l>=p&&!y.get(l-p,a-p)&&f[1]<=u;)f[1]++,p++;if(a<p||l<p||f[1]>u)return!1;for(;a>=p&&l>=p&&y.get(l-p,a-p)&&f[0]<=u;)f[0]++,p++;if(f[0]>u)return!1;let C=y.getHeight(),w=y.getWidth();for(p=1;a+p<C&&l+p<w&&y.get(l+p,a+p);)f[2]++,p++;if(a+p>=C||l+p>=w)return!1;for(;a+p<C&&l+p<w&&!y.get(l+p,a+p)&&f[3]<u;)f[3]++,p++;if(a+p>=C||l+p>=w||f[3]>=u)return!1;for(;a+p<C&&l+p<w&&y.get(l+p,a+p)&&f[4]<u;)f[4]++,p++;if(f[4]>=u)return!1;let x=f[0]+f[1]+f[2]+f[3]+f[4];return Math.abs(x-d)<2*d&&_.foundPatternCross(f)}crossCheckVertical(a,l,u,d){let f=this.image,p=f.getHeight(),y=this.getCrossCheckStateCount(),C=a;for(;C>=0&&f.get(l,C);)y[2]++,C--;if(C<0)return NaN;for(;C>=0&&!f.get(l,C)&&y[1]<=u;)y[1]++,C--;if(C<0||y[1]>u)return NaN;for(;C>=0&&f.get(l,C)&&y[0]<=u;)y[0]++,C--;if(y[0]>u)return NaN;for(C=a+1;C<p&&f.get(l,C);)y[2]++,C++;if(C===p)return NaN;for(;C<p&&!f.get(l,C)&&y[3]<u;)y[3]++,C++;if(C===p||y[3]>=u)return NaN;for(;C<p&&f.get(l,C)&&y[4]<u;)y[4]++,C++;if(y[4]>=u)return NaN;let w=y[0]+y[1]+y[2]+y[3]+y[4];return 5*Math.abs(w-d)>=2*d?NaN:_.foundPatternCross(y)?_.centerFromEnd(y,C):NaN}crossCheckHorizontal(a,l,u,d){let f=this.image,p=f.getWidth(),y=this.getCrossCheckStateCount(),C=a;for(;C>=0&&f.get(C,l);)y[2]++,C--;if(C<0)return NaN;for(;C>=0&&!f.get(C,l)&&y[1]<=u;)y[1]++,C--;if(C<0||y[1]>u)return NaN;for(;C>=0&&f.get(C,l)&&y[0]<=u;)y[0]++,C--;if(y[0]>u)return NaN;for(C=a+1;C<p&&f.get(C,l);)y[2]++,C++;if(C===p)return NaN;for(;C<p&&!f.get(C,l)&&y[3]<u;)y[3]++,C++;if(C===p||y[3]>=u)return NaN;for(;C<p&&f.get(C,l)&&y[4]<u;)y[4]++,C++;if(y[4]>=u)return NaN;let w=y[0]+y[1]+y[2]+y[3]+y[4];return 5*Math.abs(w-d)>=d?NaN:_.foundPatternCross(y)?_.centerFromEnd(y,C):NaN}handlePossibleCenter(a,l,u,d){let f=a[0]+a[1]+a[2]+a[3]+a[4],p=_.centerFromEnd(a,u),y=this.crossCheckVertical(l,Math.floor(p),a[2],f);if(!isNaN(y)&&(p=this.crossCheckHorizontal(Math.floor(p),Math.floor(y),a[2],f),!isNaN(p)&&(!d||this.crossCheckDiagonal(Math.floor(y),Math.floor(p),a[2],f)))){let C=f/7,w=!1,x=this.possibleCenters;for(let E=0,D=x.length;E<D;E++){let O=x[E];if(O.aboutEquals(C,y,p)){x[E]=O.combineEstimate(y,p,C),w=!0;break}}if(!w){let E=new kp(p,y,C);x.push(E),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(E)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let l=null;for(let u of this.possibleCenters)if(u.getCount()>=_.CENTER_QUORUM)if(l==null)l=u;else return this.hasSkipped=!0,Math.floor((Math.abs(l.getX()-u.getX())-Math.abs(l.getY()-u.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let a=0,l=0,u=this.possibleCenters.length;for(let p of this.possibleCenters)p.getCount()>=_.CENTER_QUORUM&&(a++,l+=p.getEstimatedModuleSize());if(a<3)return!1;let d=l/u,f=0;for(let p of this.possibleCenters)f+=Math.abs(p.getEstimatedModuleSize()-d);return f<=.05*l}selectBestPatterns(){let a=this.possibleCenters.length;if(a<3)throw new V;let l=this.possibleCenters,u;if(a>3){let d=0,f=0;for(let C of this.possibleCenters){let w=C.getEstimatedModuleSize();d+=w,f+=w*w}u=d/a;let p=Math.sqrt(f/a-u*u);l.sort((C,w)=>{let x=Math.abs(w.getEstimatedModuleSize()-u),E=Math.abs(C.getEstimatedModuleSize()-u);return x<E?-1:x>E?1:0});let y=Math.max(.2*u,p);for(let C=0;C<l.length&&l.length>3;C++){let w=l[C];Math.abs(w.getEstimatedModuleSize()-u)>y&&(l.splice(C,1),C--)}}if(l.length>3){let d=0;for(let f of l)d+=f.getEstimatedModuleSize();u=d/l.length,l.sort((f,p)=>{if(p.getCount()===f.getCount()){let y=Math.abs(p.getEstimatedModuleSize()-u),C=Math.abs(f.getEstimatedModuleSize()-u);return y<C?1:y>C?-1:0}else return p.getCount()-f.getCount()}),l.splice(3)}return[l[0],l[1],l[2]]}}return _.CENTER_QUORUM=2,_.MIN_SKIP=3,_.MAX_MODULES=57,_})();class ml{constructor(s){this.image=s}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(s){this.resultPointCallback=s==null?null:s.get(me.NEED_RESULT_POINT_CALLBACK);let l=new iT(this.image,this.resultPointCallback).find(s);return this.processFinderPatternInfo(l)}processFinderPatternInfo(s){let a=s.getTopLeft(),l=s.getTopRight(),u=s.getBottomLeft(),d=this.calculateModuleSize(a,l,u);if(d<1)throw new V("No pattern found in proccess finder.");let f=ml.computeDimension(a,l,u,d),p=ge.getProvisionalVersionForDimension(f),y=p.getDimensionForVersion()-7,C=null;if(p.getAlignmentPatternCenters().length>0){let D=l.getX()-a.getX()+u.getX(),O=l.getY()-a.getY()+u.getY(),N=1-3/y,k=Math.floor(a.getX()+N*(D-a.getX())),L=Math.floor(a.getY()+N*(O-a.getY()));for(let Z=4;Z<=16;Z<<=1)try{C=this.findAlignmentInRegion(d,k,L,Z);break}catch(ie){if(!(ie instanceof V))throw ie}}let w=ml.createTransform(a,l,u,C,f),x=ml.sampleGrid(this.image,w,f),E;return C===null?E=[u,a,l]:E=[u,a,l,C],new wu(x,E)}static createTransform(s,a,l,u,d){let f=d-3.5,p,y,C,w;return u!==null?(p=u.getX(),y=u.getY(),C=f-3,w=C):(p=a.getX()-s.getX()+l.getX(),y=a.getY()-s.getY()+l.getY(),C=f,w=f),Rr.quadrilateralToQuadrilateral(3.5,3.5,f,3.5,C,w,3.5,f,s.getX(),s.getY(),a.getX(),a.getY(),p,y,l.getX(),l.getY())}static sampleGrid(s,a,l){return Ji.getInstance().sampleGridWithTransform(s,l,l,a)}static computeDimension(s,a,l,u){let d=tt.round(ue.distance(s,a)/u),f=tt.round(ue.distance(s,l)/u),p=Math.floor((d+f)/2)+7;switch(p&3){case 0:p++;break;case 2:p--;break;case 3:throw new V("Dimensions could be not found.")}return p}calculateModuleSize(s,a,l){return(this.calculateModuleSizeOneWay(s,a)+this.calculateModuleSizeOneWay(s,l))/2}calculateModuleSizeOneWay(s,a){let l=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(s.getX()),Math.floor(s.getY()),Math.floor(a.getX()),Math.floor(a.getY())),u=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(a.getX()),Math.floor(a.getY()),Math.floor(s.getX()),Math.floor(s.getY()));return isNaN(l)?u/7:isNaN(u)?l/7:(l+u)/14}sizeOfBlackWhiteBlackRunBothWays(s,a,l,u){let d=this.sizeOfBlackWhiteBlackRun(s,a,l,u),f=1,p=s-(l-s);p<0?(f=s/(s-p),p=0):p>=this.image.getWidth()&&(f=(this.image.getWidth()-1-s)/(p-s),p=this.image.getWidth()-1);let y=Math.floor(a-(u-a)*f);return f=1,y<0?(f=a/(a-y),y=0):y>=this.image.getHeight()&&(f=(this.image.getHeight()-1-a)/(y-a),y=this.image.getHeight()-1),p=Math.floor(s+(p-s)*f),d+=this.sizeOfBlackWhiteBlackRun(s,a,p,y),d-1}sizeOfBlackWhiteBlackRun(s,a,l,u){let d=Math.abs(u-a)>Math.abs(l-s);if(d){let D=s;s=a,a=D,D=l,l=u,u=D}let f=Math.abs(l-s),p=Math.abs(u-a),y=-f/2,C=s<l?1:-1,w=a<u?1:-1,x=0,E=l+C;for(let D=s,O=a;D!==E;D+=C){let N=d?O:D,k=d?D:O;if(x===1===this.image.get(N,k)){if(x===2)return tt.distance(D,O,s,a);x++}if(y+=p,y>0){if(O===u)break;O+=w,y-=f}}return x===2?tt.distance(l+C,u,s,a):NaN}findAlignmentInRegion(s,a,l,u){let d=Math.floor(u*s),f=Math.max(0,a-d),p=Math.min(this.image.getWidth()-1,a+d);if(p-f<s*3)throw new V("Alignment top exceeds estimated module size.");let y=Math.max(0,l-d),C=Math.min(this.image.getHeight()-1,l+d);if(C-y<s*3)throw new V("Alignment bottom exceeds estimated module size.");return new Du(this.image,f,y,p-f,C-y,s,this.resultPointCallback).find()}}class ro{constructor(){this.decoder=new nT}getDecoder(){return this.decoder}decode(s,a){let l,u;if(a!=null&&a.get(me.PURE_BARCODE)!==void 0){let y=ro.extractPureBits(s.getBlackMatrix());l=this.decoder.decodeBitMatrix(y,a),u=ro.NO_POINTS}else{let y=new ml(s.getBlackMatrix()).detect(a);l=this.decoder.decodeBitMatrix(y.getBits(),a),u=y.getPoints()}l.getOther()instanceof F_&&l.getOther().applyMirroredCorrection(u);let d=new Ln(l.getText(),l.getRawBytes(),void 0,u,Ce.QR_CODE,void 0),f=l.getByteSegments();f!==null&&d.putMetadata(hn.BYTE_SEGMENTS,f);let p=l.getECLevel();return p!==null&&d.putMetadata(hn.ERROR_CORRECTION_LEVEL,p),l.hasStructuredAppend()&&(d.putMetadata(hn.STRUCTURED_APPEND_SEQUENCE,l.getStructuredAppendSequenceNumber()),d.putMetadata(hn.STRUCTURED_APPEND_PARITY,l.getStructuredAppendParity())),d}reset(){}static extractPureBits(s){let a=s.getTopLeftOnBit(),l=s.getBottomRightOnBit();if(a===null||l===null)throw new V;let u=this.moduleSize(a,s),d=a[1],f=l[1],p=a[0],y=l[0];if(p>=y||d>=f)throw new V;if(f-d!==y-p&&(y=p+(f-d),y>=s.getWidth()))throw new V;let C=Math.round((y-p+1)/u),w=Math.round((f-d+1)/u);if(C<=0||w<=0)throw new V;if(w!==C)throw new V;let x=Math.floor(u/2);d+=x,p+=x;let E=p+Math.floor((C-1)*u)-y;if(E>0){if(E>x)throw new V;p-=E}let D=d+Math.floor((w-1)*u)-f;if(D>0){if(D>x)throw new V;d-=D}let O=new dn(C,w);for(let N=0;N<w;N++){let k=d+Math.floor(N*u);for(let L=0;L<C;L++)s.get(p+Math.floor(L*u),k)&&O.set(L,N)}return O}static moduleSize(s,a){let l=a.getHeight(),u=a.getWidth(),d=s[0],f=s[1],p=!0,y=0;for(;d<u&&f<l;){if(p!==a.get(d,f)){if(++y===5)break;p=!p}d++,f++}if(d===u||f===l)throw new V;return(d-s[0])/7}}ro.NO_POINTS=new Array;class be{PDF417Common(){}static getBitCountSum(s){return tt.sum(s)}static toIntArray(s){if(s==null||!s.length)return be.EMPTY_INT_ARRAY;let a=new Int32Array(s.length),l=0;for(let u of s)a[l++]=u;return a}static getCodeword(s){let a=X.binarySearch(be.SYMBOL_TABLE,s&262143);return a<0?-1:(be.CODEWORD_TABLE[a]-1)%be.NUMBER_OF_CODEWORDS}}be.NUMBER_OF_CODEWORDS=929,be.MAX_CODEWORDS_IN_BARCODE=be.NUMBER_OF_CODEWORDS-1,be.MIN_ROWS_IN_BARCODE=3,be.MAX_ROWS_IN_BARCODE=90,be.MODULES_IN_CODEWORD=17,be.MODULES_IN_STOP_PATTERN=18,be.BARS_IN_MODULE=8,be.EMPTY_INT_ARRAY=new Int32Array([]),be.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),be.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class oT{constructor(s,a){this.bits=s,this.points=a}getBits(){return this.bits}getPoints(){return this.points}}class Le{static detectMultiple(s,a,l){let u=s.getBlackMatrix(),d=Le.detect(l,u);return d.length||(u=u.clone(),u.rotate180(),d=Le.detect(l,u)),new oT(u,d)}static detect(s,a){let l=new Array,u=0,d=0,f=!1;for(;u<a.getHeight();){let p=Le.findVertices(a,u,d);if(p[0]==null&&p[3]==null){if(!f)break;f=!1,d=0;for(let y of l)y[1]!=null&&(u=Math.trunc(Math.max(u,y[1].getY()))),y[3]!=null&&(u=Math.max(u,Math.trunc(y[3].getY())));u+=Le.ROW_STEP;continue}if(f=!0,l.push(p),!s)break;p[2]!=null?(d=Math.trunc(p[2].getX()),u=Math.trunc(p[2].getY())):(d=Math.trunc(p[4].getX()),u=Math.trunc(p[4].getY()))}return l}static findVertices(s,a,l){let u=s.getHeight(),d=s.getWidth(),f=new Array(8);return Le.copyToResult(f,Le.findRowsWithPattern(s,u,d,a,l,Le.START_PATTERN),Le.INDEXES_START_PATTERN),f[4]!=null&&(l=Math.trunc(f[4].getX()),a=Math.trunc(f[4].getY())),Le.copyToResult(f,Le.findRowsWithPattern(s,u,d,a,l,Le.STOP_PATTERN),Le.INDEXES_STOP_PATTERN),f}static copyToResult(s,a,l){for(let u=0;u<l.length;u++)s[l[u]]=a[u]}static findRowsWithPattern(s,a,l,u,d,f){let p=new Array(4),y=!1,C=new Int32Array(f.length);for(;u<a;u+=Le.ROW_STEP){let x=Le.findGuardPattern(s,d,u,l,!1,f,C);if(x!=null){for(;u>0;){let E=Le.findGuardPattern(s,d,--u,l,!1,f,C);if(E!=null)x=E;else{u++;break}}p[0]=new ue(x[0],u),p[1]=new ue(x[1],u),y=!0;break}}let w=u+1;if(y){let x=0,E=Int32Array.from([Math.trunc(p[0].getX()),Math.trunc(p[1].getX())]);for(;w<a;w++){let D=Le.findGuardPattern(s,E[0],w,l,!1,f,C);if(D!=null&&Math.abs(E[0]-D[0])<Le.MAX_PATTERN_DRIFT&&Math.abs(E[1]-D[1])<Le.MAX_PATTERN_DRIFT)E=D,x=0;else{if(x>Le.SKIPPED_ROW_COUNT_MAX)break;x++}}w-=x+1,p[2]=new ue(E[0],w),p[3]=new ue(E[1],w)}return w-u<Le.BARCODE_MIN_HEIGHT&&X.fill(p,null),p}static findGuardPattern(s,a,l,u,d,f,p){X.fillWithin(p,0,p.length,0);let y=a,C=0;for(;s.get(y,l)&&y>0&&C++<Le.MAX_PIXEL_DRIFT;)y--;let w=y,x=0,E=f.length;for(let D=d;w<u;w++)if(s.get(w,l)!==D)p[x]++;else{if(x===E-1){if(Le.patternMatchVariance(p,f,Le.MAX_INDIVIDUAL_VARIANCE)<Le.MAX_AVG_VARIANCE)return new Int32Array([y,w]);y+=p[0]+p[1],M.arraycopy(p,2,p,0,x-1),p[x-1]=0,p[x]=0,x--}else x++;p[x]=1,D=!D}return x===E-1&&Le.patternMatchVariance(p,f,Le.MAX_INDIVIDUAL_VARIANCE)<Le.MAX_AVG_VARIANCE?new Int32Array([y,w-1]):null}static patternMatchVariance(s,a,l){let u=s.length,d=0,f=0;for(let C=0;C<u;C++)d+=s[C],f+=a[C];if(d<f)return 1/0;let p=d/f;l*=p;let y=0;for(let C=0;C<u;C++){let w=s[C],x=a[C]*p,E=w>x?w-x:x-w;if(E>l)return 1/0;y+=E}return y/d}}Le.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),Le.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),Le.MAX_AVG_VARIANCE=.42,Le.MAX_INDIVIDUAL_VARIANCE=.8,Le.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),Le.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),Le.MAX_PIXEL_DRIFT=3,Le.MAX_PATTERN_DRIFT=5,Le.SKIPPED_ROW_COUNT_MAX=25,Le.ROW_STEP=5,Le.BARCODE_MIN_HEIGHT=10;class bn{constructor(s,a){if(a.length===0)throw new m;this.field=s;let l=a.length;if(l>1&&a[0]===0){let u=1;for(;u<l&&a[u]===0;)u++;u===l?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(l-u),M.arraycopy(a,u,this.coefficients,0,this.coefficients.length))}else this.coefficients=a}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(s){return this.coefficients[this.coefficients.length-1-s]}evaluateAt(s){if(s===0)return this.getCoefficient(0);if(s===1){let u=0;for(let d of this.coefficients)u=this.field.add(u,d);return u}let a=this.coefficients[0],l=this.coefficients.length;for(let u=1;u<l;u++)a=this.field.add(this.field.multiply(s,a),this.coefficients[u]);return a}add(s){if(!this.field.equals(s.field))throw new m("ModulusPolys do not have same ModulusGF field");if(this.isZero())return s;if(s.isZero())return this;let a=this.coefficients,l=s.coefficients;if(a.length>l.length){let f=a;a=l,l=f}let u=new Int32Array(l.length),d=l.length-a.length;M.arraycopy(l,0,u,0,d);for(let f=d;f<l.length;f++)u[f]=this.field.add(a[f-d],l[f]);return new bn(this.field,u)}subtract(s){if(!this.field.equals(s.field))throw new m("ModulusPolys do not have same ModulusGF field");return s.isZero()?this:this.add(s.negative())}multiply(s){return s instanceof bn?this.multiplyOther(s):this.multiplyScalar(s)}multiplyOther(s){if(!this.field.equals(s.field))throw new m("ModulusPolys do not have same ModulusGF field");if(this.isZero()||s.isZero())return new bn(this.field,new Int32Array([0]));let a=this.coefficients,l=a.length,u=s.coefficients,d=u.length,f=new Int32Array(l+d-1);for(let p=0;p<l;p++){let y=a[p];for(let C=0;C<d;C++)f[p+C]=this.field.add(f[p+C],this.field.multiply(y,u[C]))}return new bn(this.field,f)}negative(){let s=this.coefficients.length,a=new Int32Array(s);for(let l=0;l<s;l++)a[l]=this.field.subtract(0,this.coefficients[l]);return new bn(this.field,a)}multiplyScalar(s){if(s===0)return new bn(this.field,new Int32Array([0]));if(s===1)return this;let a=this.coefficients.length,l=new Int32Array(a);for(let u=0;u<a;u++)l[u]=this.field.multiply(this.coefficients[u],s);return new bn(this.field,l)}multiplyByMonomial(s,a){if(s<0)throw new m;if(a===0)return new bn(this.field,new Int32Array([0]));let l=this.coefficients.length,u=new Int32Array(l+s);for(let d=0;d<l;d++)u[d]=this.field.multiply(this.coefficients[d],a);return new bn(this.field,u)}toString(){let s=new wt;for(let a=this.getDegree();a>=0;a--){let l=this.getCoefficient(a);l!==0&&(l<0?(s.append(" - "),l=-l):s.length()>0&&s.append(" + "),(a===0||l!==1)&&s.append(l),a!==0&&(a===1?s.append("x"):(s.append("x^"),s.append(a))))}return s.toString()}}class sT{add(s,a){return(s+a)%this.modulus}subtract(s,a){return(this.modulus+s-a)%this.modulus}exp(s){return this.expTable[s]}log(s){if(s===0)throw new m;return this.logTable[s]}inverse(s){if(s===0)throw new vp;return this.expTable[this.modulus-this.logTable[s]-1]}multiply(s,a){return s===0||a===0?0:this.expTable[(this.logTable[s]+this.logTable[a])%(this.modulus-1)]}getSize(){return this.modulus}equals(s){return s===this}}class Fp extends sT{constructor(s,a){super(),this.modulus=s,this.expTable=new Int32Array(s),this.logTable=new Int32Array(s);let l=1;for(let u=0;u<s;u++)this.expTable[u]=l,l=l*a%s;for(let u=0;u<s-1;u++)this.logTable[this.expTable[u]]=u;this.zero=new bn(this,new Int32Array([0])),this.one=new bn(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(s,a){if(s<0)throw new m;if(a===0)return this.zero;let l=new Int32Array(s+1);return l[0]=a,new bn(this,l)}}Fp.PDF417_GF=new Fp(be.NUMBER_OF_CODEWORDS,3);class L_{constructor(){this.field=Fp.PDF417_GF}decode(s,a,l){let u=new bn(this.field,s),d=new Int32Array(a),f=!1;for(let O=a;O>0;O--){let N=u.evaluateAt(this.field.exp(O));d[a-O]=N,N!==0&&(f=!0)}if(!f)return 0;let p=this.field.getOne();if(l!=null)for(let O of l){let N=this.field.exp(s.length-1-O),k=new bn(this.field,new Int32Array([this.field.subtract(0,N),1]));p=p.multiply(k)}let y=new bn(this.field,d),C=this.runEuclideanAlgorithm(this.field.buildMonomial(a,1),y,a),w=C[0],x=C[1],E=this.findErrorLocations(w),D=this.findErrorMagnitudes(x,w,E);for(let O=0;O<E.length;O++){let N=s.length-1-this.field.log(E[O]);if(N<0)throw b.getChecksumInstance();s[N]=this.field.subtract(s[N],D[O])}return E.length}runEuclideanAlgorithm(s,a,l){if(s.getDegree()<a.getDegree()){let E=s;s=a,a=E}let u=s,d=a,f=this.field.getZero(),p=this.field.getOne();for(;d.getDegree()>=Math.round(l/2);){let E=u,D=f;if(u=d,f=p,u.isZero())throw b.getChecksumInstance();d=E;let O=this.field.getZero(),N=u.getCoefficient(u.getDegree()),k=this.field.inverse(N);for(;d.getDegree()>=u.getDegree()&&!d.isZero();){let L=d.getDegree()-u.getDegree(),Z=this.field.multiply(d.getCoefficient(d.getDegree()),k);O=O.add(this.field.buildMonomial(L,Z)),d=d.subtract(u.multiplyByMonomial(L,Z))}p=O.multiply(f).subtract(D).negative()}let y=p.getCoefficient(0);if(y===0)throw b.getChecksumInstance();let C=this.field.inverse(y),w=p.multiply(C),x=d.multiply(C);return[w,x]}findErrorLocations(s){let a=s.getDegree(),l=new Int32Array(a),u=0;for(let d=1;d<this.field.getSize()&&u<a;d++)s.evaluateAt(d)===0&&(l[u]=this.field.inverse(d),u++);if(u!==a)throw b.getChecksumInstance();return l}findErrorMagnitudes(s,a,l){let u=a.getDegree(),d=new Int32Array(u);for(let C=1;C<=u;C++)d[u-C]=this.field.multiply(C,a.getCoefficient(C));let f=new bn(this.field,d),p=l.length,y=new Int32Array(p);for(let C=0;C<p;C++){let w=this.field.inverse(l[C]),x=this.field.subtract(0,s.evaluateAt(w)),E=this.field.inverse(f.evaluateAt(w));y[C]=this.field.multiply(x,E)}return y}}class Wo{constructor(s,a,l,u,d){s instanceof Wo?this.constructor_2(s):this.constructor_1(s,a,l,u,d)}constructor_1(s,a,l,u,d){let f=a==null||l==null,p=u==null||d==null;if(f&&p)throw new V;f?(a=new ue(0,u.getY()),l=new ue(0,d.getY())):p&&(u=new ue(s.getWidth()-1,a.getY()),d=new ue(s.getWidth()-1,l.getY())),this.image=s,this.topLeft=a,this.bottomLeft=l,this.topRight=u,this.bottomRight=d,this.minX=Math.trunc(Math.min(a.getX(),l.getX())),this.maxX=Math.trunc(Math.max(u.getX(),d.getX())),this.minY=Math.trunc(Math.min(a.getY(),u.getY())),this.maxY=Math.trunc(Math.max(l.getY(),d.getY()))}constructor_2(s){this.image=s.image,this.topLeft=s.getTopLeft(),this.bottomLeft=s.getBottomLeft(),this.topRight=s.getTopRight(),this.bottomRight=s.getBottomRight(),this.minX=s.getMinX(),this.maxX=s.getMaxX(),this.minY=s.getMinY(),this.maxY=s.getMaxY()}static merge(s,a){return s==null?a:a==null?s:new Wo(s.image,s.topLeft,s.bottomLeft,a.topRight,a.bottomRight)}addMissingRows(s,a,l){let u=this.topLeft,d=this.bottomLeft,f=this.topRight,p=this.bottomRight;if(s>0){let y=l?this.topLeft:this.topRight,C=Math.trunc(y.getY()-s);C<0&&(C=0);let w=new ue(y.getX(),C);l?u=w:f=w}if(a>0){let y=l?this.bottomLeft:this.bottomRight,C=Math.trunc(y.getY()+a);C>=this.image.getHeight()&&(C=this.image.getHeight()-1);let w=new ue(y.getX(),C);l?d=w:p=w}return new Wo(this.image,u,d,f,p)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class aT{constructor(s,a,l,u){this.columnCount=s,this.errorCorrectionLevel=u,this.rowCountUpperPart=a,this.rowCountLowerPart=l,this.rowCount=a+l}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class yl{constructor(){this.buffer=""}static form(s,a){let l=-1;function u(f,p,y,C,w,x){if(f==="%%")return"%";if(a[++l]===void 0)return;f=C?parseInt(C.substr(1)):void 0;let E=w?parseInt(w.substr(1)):void 0,D;switch(x){case"s":D=a[l];break;case"c":D=a[l][0];break;case"f":D=parseFloat(a[l]).toFixed(f);break;case"p":D=parseFloat(a[l]).toPrecision(f);break;case"e":D=parseFloat(a[l]).toExponential(f);break;case"x":D=parseInt(a[l]).toString(E||16);break;case"d":D=parseFloat(parseInt(a[l],E||10).toPrecision(f)).toFixed(0);break}D=typeof D=="object"?JSON.stringify(D):(+D).toString(E);let O=parseInt(y),N=y&&y[0]+""=="0"?"0":" ";for(;D.length<O;)D=p!==void 0?D+N:N+D;return D}let d=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return s.replace(d,u)}format(s,...a){this.buffer+=yl.form(s,a)}toString(){return this.buffer}}let B_=(()=>{class _{constructor(a){this.boundingBox=new Wo(a),this.codewords=new Array(a.getMaxY()-a.getMinY()+1)}getCodewordNearby(a){let l=this.getCodeword(a);if(l!=null)return l;for(let u=1;u<_.MAX_NEARBY_DISTANCE;u++){let d=this.imageRowToCodewordIndex(a)-u;if(d>=0&&(l=this.codewords[d],l!=null)||(d=this.imageRowToCodewordIndex(a)+u,d<this.codewords.length&&(l=this.codewords[d],l!=null)))return l}return null}imageRowToCodewordIndex(a){return a-this.boundingBox.getMinY()}setCodeword(a,l){this.codewords[this.imageRowToCodewordIndex(a)]=l}getCodeword(a){return this.codewords[this.imageRowToCodewordIndex(a)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){let a=new yl,l=0;for(let u of this.codewords){if(u==null){a.format("%3d:    |   %n",l++);continue}a.format("%3d: %3d|%3d%n",l++,u.getRowNumber(),u.getValue())}return a.toString()}}return _.MAX_NEARBY_DISTANCE=5,_})();class Cl{constructor(){this.values=new Map}setValue(s){s=Math.trunc(s);let a=this.values.get(s);a==null&&(a=0),a++,this.values.set(s,a)}getValue(){let s=-1,a=new Array;for(let[l,u]of this.values.entries()){let d={getKey:()=>l,getValue:()=>u};d.getValue()>s?(s=d.getValue(),a=[],a.push(d.getKey())):d.getValue()===s&&a.push(d.getKey())}return be.toIntArray(a)}getConfidence(s){return this.values.get(s)}}class U_ extends B_{constructor(s,a){super(s),this._isLeft=a}setRowNumbers(){for(let s of this.getCodewords())s?.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(s){let a=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(a,s);let l=this.getBoundingBox(),u=this._isLeft?l.getTopLeft():l.getTopRight(),d=this._isLeft?l.getBottomLeft():l.getBottomRight(),f=this.imageRowToCodewordIndex(Math.trunc(u.getY())),p=this.imageRowToCodewordIndex(Math.trunc(d.getY())),y=-1,C=1,w=0;for(let x=f;x<p;x++){if(a[x]==null)continue;let E=a[x],D=E.getRowNumber()-y;if(D===0)w++;else if(D===1)C=Math.max(C,w),w=1,y=E.getRowNumber();else if(D<0||E.getRowNumber()>=s.getRowCount()||D>x)a[x]=null;else{let O;C>2?O=(C-2)*D:O=D;let N=O>=x;for(let k=1;k<=O&&!N;k++)N=a[x-k]!=null;N?a[x]=null:(y=E.getRowNumber(),w=1)}}}getRowHeights(){let s=this.getBarcodeMetadata();if(s==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(s);let a=new Int32Array(s.getRowCount());for(let l of this.getCodewords())if(l!=null){let u=l.getRowNumber();if(u>=a.length)continue;a[u]++}return a}adjustIncompleteIndicatorColumnRowNumbers(s){let a=this.getBoundingBox(),l=this._isLeft?a.getTopLeft():a.getTopRight(),u=this._isLeft?a.getBottomLeft():a.getBottomRight(),d=this.imageRowToCodewordIndex(Math.trunc(l.getY())),f=this.imageRowToCodewordIndex(Math.trunc(u.getY())),p=this.getCodewords(),y=-1;for(let C=d;C<f;C++){if(p[C]==null)continue;let w=p[C];w.setRowNumberAsRowIndicatorColumn();let x=w.getRowNumber()-y;x===0||(x===1?y=w.getRowNumber():w.getRowNumber()>=s.getRowCount()?p[C]=null:y=w.getRowNumber())}}getBarcodeMetadata(){let s=this.getCodewords(),a=new Cl,l=new Cl,u=new Cl,d=new Cl;for(let p of s){if(p==null)continue;p.setRowNumberAsRowIndicatorColumn();let y=p.getValue()%30,C=p.getRowNumber();switch(this._isLeft||(C+=2),C%3){case 0:l.setValue(y*3+1);break;case 1:d.setValue(y/3),u.setValue(y%3);break;case 2:a.setValue(y+1);break}}if(a.getValue().length===0||l.getValue().length===0||u.getValue().length===0||d.getValue().length===0||a.getValue()[0]<1||l.getValue()[0]+u.getValue()[0]<be.MIN_ROWS_IN_BARCODE||l.getValue()[0]+u.getValue()[0]>be.MAX_ROWS_IN_BARCODE)return null;let f=new aT(a.getValue()[0],l.getValue()[0],u.getValue()[0],d.getValue()[0]);return this.removeIncorrectCodewords(s,f),f}removeIncorrectCodewords(s,a){for(let l=0;l<s.length;l++){let u=s[l];if(s[l]==null)continue;let d=u.getValue()%30,f=u.getRowNumber();if(f>a.getRowCount()){s[l]=null;continue}switch(this._isLeft||(f+=2),f%3){case 0:d*3+1!==a.getRowCountUpperPart()&&(s[l]=null);break;case 1:(Math.trunc(d/3)!==a.getErrorCorrectionLevel()||d%3!==a.getRowCountLowerPart())&&(s[l]=null);break;case 2:d+1!==a.getColumnCount()&&(s[l]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class _l{constructor(s,a){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=s,this.barcodeColumnCount=s.getColumnCount(),this.boundingBox=a,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let s=be.MAX_CODEWORDS_IN_BARCODE,a;do a=s,s=this.adjustRowNumbersAndGetCount();while(s>0&&s<a);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(s){s?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let s=this.adjustRowNumbersByRow();if(s===0)return 0;for(let a=1;a<this.barcodeColumnCount+1;a++){let l=this.detectionResultColumns[a].getCodewords();for(let u=0;u<l.length;u++)l[u]!=null&&(l[u].hasValidRowNumber()||this.adjustRowNumbers(a,u,l))}return s}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let s=this.detectionResultColumns[0].getCodewords(),a=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let l=0;l<s.length;l++)if(s[l]!=null&&a[l]!=null&&s[l].getRowNumber()===a[l].getRowNumber())for(let u=1;u<=this.barcodeColumnCount;u++){let d=this.detectionResultColumns[u].getCodewords()[l];d!=null&&(d.setRowNumber(s[l].getRowNumber()),d.hasValidRowNumber()||(this.detectionResultColumns[u].getCodewords()[l]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let s=0,a=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let l=0;l<a.length;l++){if(a[l]==null)continue;let u=a[l].getRowNumber(),d=0;for(let f=this.barcodeColumnCount+1;f>0&&d<this.ADJUST_ROW_NUMBER_SKIP;f--){let p=this.detectionResultColumns[f].getCodewords()[l];p!=null&&(d=_l.adjustRowNumberIfValid(u,d,p),p.hasValidRowNumber()||s++)}}return s}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let s=0,a=this.detectionResultColumns[0].getCodewords();for(let l=0;l<a.length;l++){if(a[l]==null)continue;let u=a[l].getRowNumber(),d=0;for(let f=1;f<this.barcodeColumnCount+1&&d<this.ADJUST_ROW_NUMBER_SKIP;f++){let p=this.detectionResultColumns[f].getCodewords()[l];p!=null&&(d=_l.adjustRowNumberIfValid(u,d,p),p.hasValidRowNumber()||s++)}}return s}static adjustRowNumberIfValid(s,a,l){return l==null||l.hasValidRowNumber()||(l.isValidRowNumber(s)?(l.setRowNumber(s),a=0):++a),a}adjustRowNumbers(s,a,l){if(!this.detectionResultColumns[s-1])return;let u=l[a],d=this.detectionResultColumns[s-1].getCodewords(),f=d;this.detectionResultColumns[s+1]!=null&&(f=this.detectionResultColumns[s+1].getCodewords());let p=new Array(14);p[2]=d[a],p[3]=f[a],a>0&&(p[0]=l[a-1],p[4]=d[a-1],p[5]=f[a-1]),a>1&&(p[8]=l[a-2],p[10]=d[a-2],p[11]=f[a-2]),a<l.length-1&&(p[1]=l[a+1],p[6]=d[a+1],p[7]=f[a+1]),a<l.length-2&&(p[9]=l[a+2],p[12]=d[a+2],p[13]=f[a+2]);for(let y of p)if(_l.adjustRowNumber(u,y))return}static adjustRowNumber(s,a){return a==null?!1:a.hasValidRowNumber()&&a.getBucket()===s.getBucket()?(s.setRowNumber(a.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(s){this.boundingBox=s}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(s,a){this.detectionResultColumns[s]=a}getDetectionResultColumn(s){return this.detectionResultColumns[s]}toString(){let s=this.detectionResultColumns[0];s==null&&(s=this.detectionResultColumns[this.barcodeColumnCount+1]);let a=new yl;for(let l=0;l<s.getCodewords().length;l++){a.format("CW %3d:",l);for(let u=0;u<this.barcodeColumnCount+2;u++){if(this.detectionResultColumns[u]==null){a.format("    |   ");continue}let d=this.detectionResultColumns[u].getCodewords()[l];if(d==null){a.format("    |   ");continue}a.format(" %3d|%3d",d.getRowNumber(),d.getValue())}a.format("%n")}return a.toString()}}let lT=(()=>{class _{constructor(a,l,u,d){this.rowNumber=_.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(a),this.endX=Math.trunc(l),this.bucket=Math.trunc(u),this.value=Math.trunc(d)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(a){return a!==_.BARCODE_ROW_UNKNOWN&&this.bucket===a%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(a){this.rowNumber=a}toString(){return this.rowNumber+"|"+this.value}}return _.BARCODE_ROW_UNKNOWN=-1,_})();class Xn{static initialize(){for(let s=0;s<be.SYMBOL_TABLE.length;s++){let a=be.SYMBOL_TABLE[s],l=a&1;for(let u=0;u<be.BARS_IN_MODULE;u++){let d=0;for(;(a&1)===l;)d+=1,a>>=1;l=a&1,Xn.RATIOS_TABLE[s]||(Xn.RATIOS_TABLE[s]=new Array(be.BARS_IN_MODULE)),Xn.RATIOS_TABLE[s][be.BARS_IN_MODULE-u-1]=Math.fround(d/be.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(s){let a=Xn.getDecodedCodewordValue(Xn.sampleBitCounts(s));return a!==-1?a:Xn.getClosestDecodedValue(s)}static sampleBitCounts(s){let a=tt.sum(s),l=new Int32Array(be.BARS_IN_MODULE),u=0,d=0;for(let f=0;f<be.MODULES_IN_CODEWORD;f++){let p=a/(2*be.MODULES_IN_CODEWORD)+f*a/be.MODULES_IN_CODEWORD;d+s[u]<=p&&(d+=s[u],u++),l[u]++}return l}static getDecodedCodewordValue(s){let a=Xn.getBitValue(s);return be.getCodeword(a)===-1?-1:a}static getBitValue(s){let a=0;for(let l=0;l<s.length;l++)for(let u=0;u<s[l];u++)a=a<<1|(l%2===0?1:0);return Math.trunc(a)}static getClosestDecodedValue(s){let a=tt.sum(s),l=new Array(be.BARS_IN_MODULE);if(a>1)for(let f=0;f<l.length;f++)l[f]=Math.fround(s[f]/a);let u=_u.MAX_VALUE,d=-1;this.bSymbolTableReady||Xn.initialize();for(let f=0;f<Xn.RATIOS_TABLE.length;f++){let p=0,y=Xn.RATIOS_TABLE[f];for(let C=0;C<be.BARS_IN_MODULE;C++){let w=Math.fround(y[C]-l[C]);if(p+=Math.fround(w*w),p>=u)break}p<u&&(u=p,d=be.SYMBOL_TABLE[f])}return d}}Xn.bSymbolTableReady=!1,Xn.RATIOS_TABLE=new Array(be.SYMBOL_TABLE.length).map(_=>_=new Array(be.BARS_IN_MODULE));class V_{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(s){this.segmentIndex=s}getFileId(){return this.fileId}setFileId(s){this.fileId=s}getOptionalData(){return this.optionalData}setOptionalData(s){this.optionalData=s}isLastSegment(){return this.lastSegment}setLastSegment(s){this.lastSegment=s}getSegmentCount(){return this.segmentCount}setSegmentCount(s){this.segmentCount=s}getSender(){return this.sender||null}setSender(s){this.sender=s}getAddressee(){return this.addressee||null}setAddressee(s){this.addressee=s}getFileName(){return this.fileName}setFileName(s){this.fileName=s}getFileSize(){return this.fileSize}setFileSize(s){this.fileSize=s}getChecksum(){return this.checksum}setChecksum(s){this.checksum=s}getTimestamp(){return this.timestamp}setTimestamp(s){this.timestamp=s}}class j_{static parseLong(s,a=void 0){return parseInt(s,a)}}let cT=(()=>{class _ extends h{}return _.kind="NullPointerException",_})();class uT{writeBytes(s){this.writeBytesOffset(s,0,s.length)}writeBytesOffset(s,a,l){if(s==null)throw new cT;if(a<0||a>s.length||l<0||a+l>s.length||a+l<0)throw new R;if(l===0)return;for(let u=0;u<l;u++)this.write(s[a+u])}flush(){}close(){}}class dT extends h{}class fT extends uT{constructor(s=32){if(super(),this.count=0,s<0)throw new m("Negative initial size: "+s);this.buf=new Uint8Array(s)}ensureCapacity(s){s-this.buf.length>0&&this.grow(s)}grow(s){let l=this.buf.length<<1;if(l-s<0&&(l=s),l<0){if(s<0)throw new dT;l=$.MAX_VALUE}this.buf=X.copyOfUint8Array(this.buf,l)}write(s){this.ensureCapacity(this.count+1),this.buf[this.count]=s,this.count+=1}writeBytesOffset(s,a,l){if(a<0||a>s.length||l<0||a+l-s.length>0)throw new R;this.ensureCapacity(this.count+l),M.arraycopy(s,a,this.buf,this.count,l),this.count+=l}writeTo(s){s.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return X.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(s){return s?typeof s=="string"?this.toString_string(s):this.toString_number(s):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(s){return new String(this.buf).toString()}toString_number(s){return new String(this.buf).toString()}close(){}}var bt=function(_){return _[_.ALPHA=0]="ALPHA",_[_.LOWER=1]="LOWER",_[_.MIXED=2]="MIXED",_[_.PUNCT=3]="PUNCT",_[_.ALPHA_SHIFT=4]="ALPHA_SHIFT",_[_.PUNCT_SHIFT=5]="PUNCT_SHIFT",_}(bt||{});function H_(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let Mu;function io(_){if(typeof Mu>"u"&&(Mu=H_()),Mu===null)throw new Error("BigInt is not supported!");return Mu(_)}function hT(){let _=[];_[0]=io(1);let s=io(900);_[1]=s;for(let a=2;a<16;a++)_[a]=_[a-1]*s;return _}class B{static decode(s,a){let l=new wt(""),u=Y.ISO8859_1;l.enableDecoding(u);let d=1,f=s[d++],p=new V_;for(;d<s[0];){switch(f){case B.TEXT_COMPACTION_MODE_LATCH:d=B.textCompaction(s,d,l);break;case B.BYTE_COMPACTION_MODE_LATCH:case B.BYTE_COMPACTION_MODE_LATCH_6:d=B.byteCompaction(f,s,u,d,l);break;case B.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(s[d++]);break;case B.NUMERIC_COMPACTION_MODE_LATCH:d=B.numericCompaction(s,d,l);break;case B.ECI_CHARSET:let C=Y.getCharacterSetECIByValue(s[d++]);break;case B.ECI_GENERAL_PURPOSE:d+=2;break;case B.ECI_USER_DEFINED:d++;break;case B.BEGIN_MACRO_PDF417_CONTROL_BLOCK:d=B.decodeMacroBlock(s,d,p);break;case B.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case B.MACRO_PDF417_TERMINATOR:throw new W;default:d--,d=B.textCompaction(s,d,l);break}if(d<s.length)f=s[d++];else throw W.getFormatInstance()}if(l.length()===0)throw W.getFormatInstance();let y=new ul(null,l.toString(),null,a);return y.setOther(p),y}static decodeMacroBlock(s,a,l){if(a+B.NUMBER_OF_SEQUENCE_CODEWORDS>s[0])throw W.getFormatInstance();let u=new Int32Array(B.NUMBER_OF_SEQUENCE_CODEWORDS);for(let p=0;p<B.NUMBER_OF_SEQUENCE_CODEWORDS;p++,a++)u[p]=s[a];l.setSegmentIndex($.parseInt(B.decodeBase900toBase10(u,B.NUMBER_OF_SEQUENCE_CODEWORDS)));let d=new wt;a=B.textCompaction(s,a,d),l.setFileId(d.toString());let f=-1;for(s[a]===B.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(f=a+1);a<s[0];)switch(s[a]){case B.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(a++,s[a]){case B.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let p=new wt;a=B.textCompaction(s,a+1,p),l.setFileName(p.toString());break;case B.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let y=new wt;a=B.textCompaction(s,a+1,y),l.setSender(y.toString());break;case B.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let C=new wt;a=B.textCompaction(s,a+1,C),l.setAddressee(C.toString());break;case B.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let w=new wt;a=B.numericCompaction(s,a+1,w),l.setSegmentCount($.parseInt(w.toString()));break;case B.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let x=new wt;a=B.numericCompaction(s,a+1,x),l.setTimestamp(j_.parseLong(x.toString()));break;case B.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let E=new wt;a=B.numericCompaction(s,a+1,E),l.setChecksum($.parseInt(E.toString()));break;case B.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let D=new wt;a=B.numericCompaction(s,a+1,D),l.setFileSize(j_.parseLong(D.toString()));break;default:throw W.getFormatInstance()}break;case B.MACRO_PDF417_TERMINATOR:a++,l.setLastSegment(!0);break;default:throw W.getFormatInstance()}if(f!==-1){let p=a-f;l.isLastSegment()&&p--,l.setOptionalData(X.copyOfRange(s,f,f+p))}return a}static textCompaction(s,a,l){let u=new Int32Array((s[0]-a)*2),d=new Int32Array((s[0]-a)*2),f=0,p=!1;for(;a<s[0]&&!p;){let y=s[a++];if(y<B.TEXT_COMPACTION_MODE_LATCH)u[f]=y/30,u[f+1]=y%30,f+=2;else switch(y){case B.TEXT_COMPACTION_MODE_LATCH:u[f++]=B.TEXT_COMPACTION_MODE_LATCH;break;case B.BYTE_COMPACTION_MODE_LATCH:case B.BYTE_COMPACTION_MODE_LATCH_6:case B.NUMERIC_COMPACTION_MODE_LATCH:case B.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case B.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case B.MACRO_PDF417_TERMINATOR:a--,p=!0;break;case B.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u[f]=B.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,y=s[a++],d[f]=y,f++;break}}return B.decodeTextCompaction(u,d,f,l),a}static decodeTextCompaction(s,a,l,u){let d=bt.ALPHA,f=bt.ALPHA,p=0;for(;p<l;){let y=s[p],C="";switch(d){case bt.ALPHA:if(y<26)C=String.fromCharCode(65+y);else switch(y){case 26:C=" ";break;case B.LL:d=bt.LOWER;break;case B.ML:d=bt.MIXED;break;case B.PS:f=d,d=bt.PUNCT_SHIFT;break;case B.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(a[p]);break;case B.TEXT_COMPACTION_MODE_LATCH:d=bt.ALPHA;break}break;case bt.LOWER:if(y<26)C=String.fromCharCode(97+y);else switch(y){case 26:C=" ";break;case B.AS:f=d,d=bt.ALPHA_SHIFT;break;case B.ML:d=bt.MIXED;break;case B.PS:f=d,d=bt.PUNCT_SHIFT;break;case B.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(a[p]);break;case B.TEXT_COMPACTION_MODE_LATCH:d=bt.ALPHA;break}break;case bt.MIXED:if(y<B.PL)C=B.MIXED_CHARS[y];else switch(y){case B.PL:d=bt.PUNCT;break;case 26:C=" ";break;case B.LL:d=bt.LOWER;break;case B.AL:d=bt.ALPHA;break;case B.PS:f=d,d=bt.PUNCT_SHIFT;break;case B.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(a[p]);break;case B.TEXT_COMPACTION_MODE_LATCH:d=bt.ALPHA;break}break;case bt.PUNCT:if(y<B.PAL)C=B.PUNCT_CHARS[y];else switch(y){case B.PAL:d=bt.ALPHA;break;case B.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(a[p]);break;case B.TEXT_COMPACTION_MODE_LATCH:d=bt.ALPHA;break}break;case bt.ALPHA_SHIFT:if(d=f,y<26)C=String.fromCharCode(65+y);else switch(y){case 26:C=" ";break;case B.TEXT_COMPACTION_MODE_LATCH:d=bt.ALPHA;break}break;case bt.PUNCT_SHIFT:if(d=f,y<B.PAL)C=B.PUNCT_CHARS[y];else switch(y){case B.PAL:d=bt.ALPHA;break;case B.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(a[p]);break;case B.TEXT_COMPACTION_MODE_LATCH:d=bt.ALPHA;break}break}C!==""&&u.append(C),p++}}static byteCompaction(s,a,l,u,d){let f=new fT,p=0,y=0,C=!1;switch(s){case B.BYTE_COMPACTION_MODE_LATCH:let w=new Int32Array(6),x=a[u++];for(;u<a[0]&&!C;)switch(w[p++]=x,y=900*y+x,x=a[u++],x){case B.TEXT_COMPACTION_MODE_LATCH:case B.BYTE_COMPACTION_MODE_LATCH:case B.NUMERIC_COMPACTION_MODE_LATCH:case B.BYTE_COMPACTION_MODE_LATCH_6:case B.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case B.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case B.MACRO_PDF417_TERMINATOR:u--,C=!0;break;default:if(p%5===0&&p>0){for(let E=0;E<6;++E)f.write(Number(io(y)>>io(8*(5-E))));y=0,p=0}break}u===a[0]&&x<B.TEXT_COMPACTION_MODE_LATCH&&(w[p++]=x);for(let E=0;E<p;E++)f.write(w[E]);break;case B.BYTE_COMPACTION_MODE_LATCH_6:for(;u<a[0]&&!C;){let E=a[u++];if(E<B.TEXT_COMPACTION_MODE_LATCH)p++,y=900*y+E;else switch(E){case B.TEXT_COMPACTION_MODE_LATCH:case B.BYTE_COMPACTION_MODE_LATCH:case B.NUMERIC_COMPACTION_MODE_LATCH:case B.BYTE_COMPACTION_MODE_LATCH_6:case B.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case B.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case B.MACRO_PDF417_TERMINATOR:u--,C=!0;break}if(p%5===0&&p>0){for(let D=0;D<6;++D)f.write(Number(io(y)>>io(8*(5-D))));y=0,p=0}}break}return d.append(Nn.decode(f.toByteArray(),l)),u}static numericCompaction(s,a,l){let u=0,d=!1,f=new Int32Array(B.MAX_NUMERIC_CODEWORDS);for(;a<s[0]&&!d;){let p=s[a++];if(a===s[0]&&(d=!0),p<B.TEXT_COMPACTION_MODE_LATCH)f[u]=p,u++;else switch(p){case B.TEXT_COMPACTION_MODE_LATCH:case B.BYTE_COMPACTION_MODE_LATCH:case B.BYTE_COMPACTION_MODE_LATCH_6:case B.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case B.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case B.MACRO_PDF417_TERMINATOR:a--,d=!0;break}(u%B.MAX_NUMERIC_CODEWORDS===0||p===B.NUMERIC_COMPACTION_MODE_LATCH||d)&&u>0&&(l.append(B.decodeBase900toBase10(f,u)),u=0)}return a}static decodeBase900toBase10(s,a){let l=io(0);for(let d=0;d<a;d++)l+=B.EXP900[a-d-1]*io(s[d]);let u=l.toString();if(u.charAt(0)!=="1")throw new W;return u.substring(1)}}B.TEXT_COMPACTION_MODE_LATCH=900,B.BYTE_COMPACTION_MODE_LATCH=901,B.NUMERIC_COMPACTION_MODE_LATCH=902,B.BYTE_COMPACTION_MODE_LATCH_6=924,B.ECI_USER_DEFINED=925,B.ECI_GENERAL_PURPOSE=926,B.ECI_CHARSET=927,B.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,B.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,B.MACRO_PDF417_TERMINATOR=922,B.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,B.MAX_NUMERIC_CODEWORDS=15,B.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,B.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,B.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,B.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,B.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,B.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,B.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,B.PL=25,B.LL=27,B.AS=27,B.ML=28,B.AL=28,B.PS=29,B.PAL=29,B.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,B.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",B.EXP900=H_()?hT():[],B.NUMBER_OF_SEQUENCE_CODEWORDS=2;class je{constructor(){}static decode(s,a,l,u,d,f,p){let y=new Wo(s,a,l,u,d),C=null,w=null,x;for(let O=!0;;O=!1){if(a!=null&&(C=je.getRowIndicatorColumn(s,y,a,!0,f,p)),u!=null&&(w=je.getRowIndicatorColumn(s,y,u,!1,f,p)),x=je.merge(C,w),x==null)throw V.getNotFoundInstance();let N=x.getBoundingBox();if(O&&N!=null&&(N.getMinY()<y.getMinY()||N.getMaxY()>y.getMaxY()))y=N;else break}x.setBoundingBox(y);let E=x.getBarcodeColumnCount()+1;x.setDetectionResultColumn(0,C),x.setDetectionResultColumn(E,w);let D=C!=null;for(let O=1;O<=E;O++){let N=D?O:E-O;if(x.getDetectionResultColumn(N)!==void 0)continue;let k;N===0||N===E?k=new U_(y,N===0):k=new B_(y),x.setDetectionResultColumn(N,k);let L=-1,Z=L;for(let ie=y.getMinY();ie<=y.getMaxY();ie++){if(L=je.getStartColumn(x,N,ie,D),L<0||L>y.getMaxX()){if(Z===-1)continue;L=Z}let U=je.detectCodeword(s,y.getMinX(),y.getMaxX(),D,L,ie,f,p);U!=null&&(k.setCodeword(ie,U),Z=L,f=Math.min(f,U.getWidth()),p=Math.max(p,U.getWidth()))}}return je.createDecoderResult(x)}static merge(s,a){if(s==null&&a==null)return null;let l=je.getBarcodeMetadata(s,a);if(l==null)return null;let u=Wo.merge(je.adjustBoundingBox(s),je.adjustBoundingBox(a));return new _l(l,u)}static adjustBoundingBox(s){if(s==null)return null;let a=s.getRowHeights();if(a==null)return null;let l=je.getMax(a),u=0;for(let p of a)if(u+=l-p,p>0)break;let d=s.getCodewords();for(let p=0;u>0&&d[p]==null;p++)u--;let f=0;for(let p=a.length-1;p>=0&&(f+=l-a[p],!(a[p]>0));p--);for(let p=d.length-1;f>0&&d[p]==null;p--)f--;return s.getBoundingBox().addMissingRows(u,f,s.isLeft())}static getMax(s){let a=-1;for(let l of s)a=Math.max(a,l);return a}static getBarcodeMetadata(s,a){let l;if(s==null||(l=s.getBarcodeMetadata())==null)return a==null?null:a.getBarcodeMetadata();let u;return a==null||(u=a.getBarcodeMetadata())==null?l:l.getColumnCount()!==u.getColumnCount()&&l.getErrorCorrectionLevel()!==u.getErrorCorrectionLevel()&&l.getRowCount()!==u.getRowCount()?null:l}static getRowIndicatorColumn(s,a,l,u,d,f){let p=new U_(a,u);for(let y=0;y<2;y++){let C=y===0?1:-1,w=Math.trunc(Math.trunc(l.getX()));for(let x=Math.trunc(Math.trunc(l.getY()));x<=a.getMaxY()&&x>=a.getMinY();x+=C){let E=je.detectCodeword(s,0,s.getWidth(),u,w,x,d,f);E!=null&&(p.setCodeword(x,E),u?w=E.getStartX():w=E.getEndX())}}return p}static adjustCodewordCount(s,a){let l=a[0][1],u=l.getValue(),d=s.getBarcodeColumnCount()*s.getBarcodeRowCount()-je.getNumberOfECCodeWords(s.getBarcodeECLevel());if(u.length===0){if(d<1||d>be.MAX_CODEWORDS_IN_BARCODE)throw V.getNotFoundInstance();l.setValue(d)}else u[0]!==d&&l.setValue(d)}static createDecoderResult(s){let a=je.createBarcodeMatrix(s);je.adjustCodewordCount(s,a);let l=new Array,u=new Int32Array(s.getBarcodeRowCount()*s.getBarcodeColumnCount()),d=[],f=new Array;for(let y=0;y<s.getBarcodeRowCount();y++)for(let C=0;C<s.getBarcodeColumnCount();C++){let w=a[y][C+1].getValue(),x=y*s.getBarcodeColumnCount()+C;w.length===0?l.push(x):w.length===1?u[x]=w[0]:(f.push(x),d.push(w))}let p=new Array(d.length);for(let y=0;y<p.length;y++)p[y]=d[y];return je.createDecoderResultFromAmbiguousValues(s.getBarcodeECLevel(),u,be.toIntArray(l),be.toIntArray(f),p)}static createDecoderResultFromAmbiguousValues(s,a,l,u,d){let f=new Int32Array(u.length),p=100;for(;p-- >0;){for(let y=0;y<f.length;y++)a[u[y]]=d[y][f[y]];try{return je.decodeCodewords(a,s,l)}catch(y){if(!(y instanceof b))throw y}if(f.length===0)throw b.getChecksumInstance();for(let y=0;y<f.length;y++)if(f[y]<d[y].length-1){f[y]++;break}else if(f[y]=0,y===f.length-1)throw b.getChecksumInstance()}throw b.getChecksumInstance()}static createBarcodeMatrix(s){let a=Array.from({length:s.getBarcodeRowCount()},()=>new Array(s.getBarcodeColumnCount()+2));for(let u=0;u<a.length;u++)for(let d=0;d<a[u].length;d++)a[u][d]=new Cl;let l=0;for(let u of s.getDetectionResultColumns()){if(u!=null){for(let d of u.getCodewords())if(d!=null){let f=d.getRowNumber();if(f>=0){if(f>=a.length)continue;a[f][l].setValue(d.getValue())}}}l++}return a}static isValidBarcodeColumn(s,a){return a>=0&&a<=s.getBarcodeColumnCount()+1}static getStartColumn(s,a,l,u){let d=u?1:-1,f=null;if(je.isValidBarcodeColumn(s,a-d)&&(f=s.getDetectionResultColumn(a-d).getCodeword(l)),f!=null)return u?f.getEndX():f.getStartX();if(f=s.getDetectionResultColumn(a).getCodewordNearby(l),f!=null)return u?f.getStartX():f.getEndX();if(je.isValidBarcodeColumn(s,a-d)&&(f=s.getDetectionResultColumn(a-d).getCodewordNearby(l)),f!=null)return u?f.getEndX():f.getStartX();let p=0;for(;je.isValidBarcodeColumn(s,a-d);){a-=d;for(let y of s.getDetectionResultColumn(a).getCodewords())if(y!=null)return(u?y.getEndX():y.getStartX())+d*p*(y.getEndX()-y.getStartX());p++}return u?s.getBoundingBox().getMinX():s.getBoundingBox().getMaxX()}static detectCodeword(s,a,l,u,d,f,p,y){d=je.adjustCodewordStartColumn(s,a,l,u,d,f);let C=je.getModuleBitCount(s,a,l,u,d,f);if(C==null)return null;let w,x=tt.sum(C);if(u)w=d+x;else{for(let O=0;O<C.length/2;O++){let N=C[O];C[O]=C[C.length-1-O],C[C.length-1-O]=N}w=d,d=w-x}if(!je.checkCodewordSkew(x,p,y))return null;let E=Xn.getDecodedValue(C),D=be.getCodeword(E);return D===-1?null:new lT(d,w,je.getCodewordBucketNumber(E),D)}static getModuleBitCount(s,a,l,u,d,f){let p=d,y=new Int32Array(8),C=0,w=u?1:-1,x=u;for(;(u?p<l:p>=a)&&C<y.length;)s.get(p,f)===x?(y[C]++,p+=w):(C++,x=!x);return C===y.length||p===(u?l:a)&&C===y.length-1?y:null}static getNumberOfECCodeWords(s){return 2<<s}static adjustCodewordStartColumn(s,a,l,u,d,f){let p=d,y=u?-1:1;for(let C=0;C<2;C++){for(;(u?p>=a:p<l)&&u===s.get(p,f);){if(Math.abs(d-p)>je.CODEWORD_SKEW_SIZE)return d;p+=y}y=-y,u=!u}return p}static checkCodewordSkew(s,a,l){return a-je.CODEWORD_SKEW_SIZE<=s&&s<=l+je.CODEWORD_SKEW_SIZE}static decodeCodewords(s,a,l){if(s.length===0)throw W.getFormatInstance();let u=1<<a+1,d=je.correctErrors(s,l,u);je.verifyCodewordCount(s,u);let f=B.decode(s,""+a);return f.setErrorsCorrected(d),f.setErasures(l.length),f}static correctErrors(s,a,l){if(a!=null&&a.length>l/2+je.MAX_ERRORS||l<0||l>je.MAX_EC_CODEWORDS)throw b.getChecksumInstance();return je.errorCorrection.decode(s,l,a)}static verifyCodewordCount(s,a){if(s.length<4)throw W.getFormatInstance();let l=s[0];if(l>s.length)throw W.getFormatInstance();if(l===0)if(a<s.length)s[0]=s.length-a;else throw W.getFormatInstance()}static getBitCountForCodeword(s){let a=new Int32Array(8),l=0,u=a.length-1;for(;!((s&1)!==l&&(l=s&1,u--,u<0));)a[u]++,s>>=1;return a}static getCodewordBucketNumber(s){return s instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(s):this.getCodewordBucketNumber_number(s)}static getCodewordBucketNumber_number(s){return je.getCodewordBucketNumber(je.getBitCountForCodeword(s))}static getCodewordBucketNumber_Int32Array(s){return(s[0]-s[2]+s[4]-s[6]+9)%9}static toString(s){let a=new yl;for(let l=0;l<s.length;l++){a.format("Row %2d: ",l);for(let u=0;u<s[l].length;u++){let d=s[l][u];d.getValue().length===0?a.format("        ",null):a.format("%4d(%2d)",d.getValue()[0],d.getConfidence(d.getValue()[0]))}a.format("%n")}return a.toString()}}je.CODEWORD_SKEW_SIZE=2,je.MAX_ERRORS=3,je.MAX_EC_CODEWORDS=512,je.errorCorrection=new L_;class xn{decode(s,a=null){let l=xn.decode(s,a,!1);if(l==null||l.length===0||l[0]==null)throw V.getNotFoundInstance();return l[0]}decodeMultiple(s,a=null){try{return xn.decode(s,a,!0)}catch(l){throw l instanceof W||l instanceof b?V.getNotFoundInstance():l}}static decode(s,a,l){let u=new Array,d=Le.detectMultiple(s,a,l);for(let f of d.getPoints()){let p=je.decode(d.getBits(),f[4],f[5],f[6],f[7],xn.getMinCodewordWidth(f),xn.getMaxCodewordWidth(f)),y=new Ln(p.getText(),p.getRawBytes(),void 0,f,Ce.PDF_417);y.putMetadata(hn.ERROR_CORRECTION_LEVEL,p.getECLevel());let C=p.getOther();C!=null&&y.putMetadata(hn.PDF417_EXTRA_METADATA,C),u.push(y)}return u.map(f=>f)}static getMaxWidth(s,a){return s==null||a==null?0:Math.trunc(Math.abs(s.getX()-a.getX()))}static getMinWidth(s,a){return s==null||a==null?$.MAX_VALUE:Math.trunc(Math.abs(s.getX()-a.getX()))}static getMaxCodewordWidth(s){return Math.floor(Math.max(Math.max(xn.getMaxWidth(s[0],s[4]),xn.getMaxWidth(s[6],s[2])*be.MODULES_IN_CODEWORD/be.MODULES_IN_STOP_PATTERN),Math.max(xn.getMaxWidth(s[1],s[5]),xn.getMaxWidth(s[7],s[3])*be.MODULES_IN_CODEWORD/be.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(s){return Math.floor(Math.min(Math.min(xn.getMinWidth(s[0],s[4]),xn.getMinWidth(s[6],s[2])*be.MODULES_IN_CODEWORD/be.MODULES_IN_STOP_PATTERN),Math.min(xn.getMinWidth(s[1],s[5]),xn.getMinWidth(s[7],s[3])*be.MODULES_IN_CODEWORD/be.MODULES_IN_STOP_PATTERN)))}reset(){}}let Lp=(()=>{class _ extends h{}return _.kind="ReaderException",_})();class z_{constructor(s,a){this.verbose=s===!0,a&&this.setHints(a)}decode(s,a){return a&&this.setHints(a),this.decodeInternal(s)}decodeWithState(s){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(s)}setHints(s){this.hints=s;let a=!n(s)&&s.get(me.TRY_HARDER)===!0,l=n(s)?null:s.get(me.POSSIBLE_FORMATS),u=new Array;if(!n(l)){let d=l.some(f=>f===Ce.UPC_A||f===Ce.UPC_E||f===Ce.EAN_13||f===Ce.EAN_8||f===Ce.CODABAR||f===Ce.CODE_39||f===Ce.CODE_93||f===Ce.CODE_128||f===Ce.ITF||f===Ce.RSS_14||f===Ce.RSS_EXPANDED);d&&!a&&u.push(new Fs(s,this.verbose)),l.includes(Ce.QR_CODE)&&u.push(new ro),l.includes(Ce.DATA_MATRIX)&&u.push(new Su),l.includes(Ce.AZTEC)&&u.push(new bu),l.includes(Ce.PDF_417)&&u.push(new xn),d&&a&&u.push(new Fs(s,this.verbose))}u.length===0&&(a||u.push(new Fs(s,this.verbose)),u.push(new ro),u.push(new Su),u.push(new bu),u.push(new xn),a&&u.push(new Fs(s,this.verbose))),this.readers=u}reset(){if(this.readers!==null)for(let s of this.readers)s.reset()}decodeInternal(s){if(this.readers===null)throw new Lp("No readers where selected, nothing can be read.");for(let a of this.readers)try{return a.decode(s,this.hints)}catch(l){if(l instanceof Lp)continue}throw new V("No MultiFormat Readers were able to detect the code.")}}class pT extends Vo{constructor(s=null,a=500){let l=new z_;l.setHints(s),super(l,a)}decodeBitmap(s){return this.reader.decodeWithState(s)}}class gT extends Vo{constructor(s=500){super(new xn,s)}}class mT extends Vo{constructor(s=500){super(new ro,s)}}var W_=function(_){return _[_.ERROR_CORRECTION=0]="ERROR_CORRECTION",_[_.CHARACTER_SET=1]="CHARACTER_SET",_[_.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",_[_.MIN_SIZE=3]="MIN_SIZE",_[_.MAX_SIZE=4]="MAX_SIZE",_[_.MARGIN=5]="MARGIN",_[_.PDF417_COMPACT=6]="PDF417_COMPACT",_[_.PDF417_COMPACTION=7]="PDF417_COMPACTION",_[_.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",_[_.AZTEC_LAYERS=9]="AZTEC_LAYERS",_[_.QR_VERSION=10]="QR_VERSION",_}(W_||{}),tn=W_;class Bp{constructor(s){this.field=s,this.cachedGenerators=[],this.cachedGenerators.push(new Yn(s,Int32Array.from([1])))}buildGenerator(s){let a=this.cachedGenerators;if(s>=a.length){let l=a[a.length-1],u=this.field;for(let d=a.length;d<=s;d++){let f=l.multiply(new Yn(u,Int32Array.from([1,u.exp(d-1+u.getGeneratorBase())])));a.push(f),l=f}}return a[s]}encode(s,a){if(a===0)throw new m("No error correction bytes");let l=s.length-a;if(l<=0)throw new m("No data bytes provided");let u=this.buildGenerator(a),d=new Int32Array(l);M.arraycopy(s,0,d,0,l);let f=new Yn(this.field,d);f=f.multiplyByMonomial(a,1);let y=f.divide(u)[1].getCoefficients(),C=a-y.length;for(let w=0;w<C;w++)s[l+w]=0;M.arraycopy(y,0,s,l+C,y.length)}}let Ls=(()=>{class _{constructor(){}static applyMaskPenaltyRule1(a){return _.applyMaskPenaltyRule1Internal(a,!0)+_.applyMaskPenaltyRule1Internal(a,!1)}static applyMaskPenaltyRule2(a){let l=0,u=a.getArray(),d=a.getWidth(),f=a.getHeight();for(let p=0;p<f-1;p++){let y=u[p];for(let C=0;C<d-1;C++){let w=y[C];w===y[C+1]&&w===u[p+1][C]&&w===u[p+1][C+1]&&l++}}return _.N2*l}static applyMaskPenaltyRule3(a){let l=0,u=a.getArray(),d=a.getWidth(),f=a.getHeight();for(let p=0;p<f;p++)for(let y=0;y<d;y++){let C=u[p];y+6<d&&C[y]===1&&C[y+1]===0&&C[y+2]===1&&C[y+3]===1&&C[y+4]===1&&C[y+5]===0&&C[y+6]===1&&(_.isWhiteHorizontal(C,y-4,y)||_.isWhiteHorizontal(C,y+7,y+11))&&l++,p+6<f&&u[p][y]===1&&u[p+1][y]===0&&u[p+2][y]===1&&u[p+3][y]===1&&u[p+4][y]===1&&u[p+5][y]===0&&u[p+6][y]===1&&(_.isWhiteVertical(u,y,p-4,p)||_.isWhiteVertical(u,y,p+7,p+11))&&l++}return l*_.N3}static isWhiteHorizontal(a,l,u){l=Math.max(l,0),u=Math.min(u,a.length);for(let d=l;d<u;d++)if(a[d]===1)return!1;return!0}static isWhiteVertical(a,l,u,d){u=Math.max(u,0),d=Math.min(d,a.length);for(let f=u;f<d;f++)if(a[f][l]===1)return!1;return!0}static applyMaskPenaltyRule4(a){let l=0,u=a.getArray(),d=a.getWidth(),f=a.getHeight();for(let C=0;C<f;C++){let w=u[C];for(let x=0;x<d;x++)w[x]===1&&l++}let p=a.getHeight()*a.getWidth();return Math.floor(Math.abs(l*2-p)*10/p)*_.N4}static getDataMaskBit(a,l,u){let d,f;switch(a){case 0:d=u+l&1;break;case 1:d=u&1;break;case 2:d=l%3;break;case 3:d=(u+l)%3;break;case 4:d=Math.floor(u/2)+Math.floor(l/3)&1;break;case 5:f=u*l,d=(f&1)+f%3;break;case 6:f=u*l,d=(f&1)+f%3&1;break;case 7:f=u*l,d=f%3+(u+l&1)&1;break;default:throw new m("Invalid mask pattern: "+a)}return d===0}static applyMaskPenaltyRule1Internal(a,l){let u=0,d=l?a.getHeight():a.getWidth(),f=l?a.getWidth():a.getHeight(),p=a.getArray();for(let y=0;y<d;y++){let C=0,w=-1;for(let x=0;x<f;x++){let E=l?p[y][x]:p[x][y];E===w?C++:(C>=5&&(u+=_.N1+(C-5)),C=1,w=E)}C>=5&&(u+=_.N1+(C-5))}return u}}return _.N1=3,_.N2=3,_.N3=40,_.N4=10,_})();class Au{constructor(s,a){this.width=s,this.height=a;let l=new Array(a);for(let u=0;u!==a;u++)l[u]=new Uint8Array(s);this.bytes=l}getHeight(){return this.height}getWidth(){return this.width}get(s,a){return this.bytes[a][s]}getArray(){return this.bytes}setNumber(s,a,l){this.bytes[a][s]=l}setBoolean(s,a,l){this.bytes[a][s]=l?1:0}clear(s){for(let a of this.bytes)X.fill(a,s)}equals(s){if(!(s instanceof Au))return!1;let a=s;if(this.width!==a.width||this.height!==a.height)return!1;for(let l=0,u=this.height;l<u;++l){let d=this.bytes[l],f=a.bytes[l];for(let p=0,y=this.width;p<y;++p)if(d[p]!==f[p])return!1}return!0}toString(){let s=new wt;for(let a=0,l=this.height;a<l;++a){let u=this.bytes[a];for(let d=0,f=this.width;d<f;++d)switch(u[d]){case 0:s.append(" 0");break;case 1:s.append(" 1");break;default:s.append("  ");break}s.append(`
`)}return s.toString()}}let Tu=(()=>{class _{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){let a=new wt;return a.append(`<<
`),a.append(" mode: "),a.append(this.mode?this.mode.toString():"null"),a.append(`
 ecLevel: `),a.append(this.ecLevel?this.ecLevel.toString():"null"),a.append(`
 version: `),a.append(this.version?this.version.toString():"null"),a.append(`
 maskPattern: `),a.append(this.maskPattern.toString()),this.matrix?(a.append(`
 matrix:
`),a.append(this.matrix.toString())):a.append(`
 matrix: null
`),a.append(`>>
`),a.toString()}setMode(a){this.mode=a}setECLevel(a){this.ecLevel=a}setVersion(a){this.version=a}setMaskPattern(a){this.maskPattern=a}setMatrix(a){this.matrix=a}static isValidMaskPattern(a){return a>=0&&a<_.NUM_MASK_PATTERNS}}return _.NUM_MASK_PATTERNS=8,_})(),Dt=(()=>{class _ extends h{}return _.kind="WriterException",_})();class _e{constructor(){}static clearMatrix(s){s.clear(255)}static buildMatrix(s,a,l,u,d){_e.clearMatrix(d),_e.embedBasicPatterns(l,d),_e.embedTypeInfo(a,u,d),_e.maybeEmbedVersionInfo(l,d),_e.embedDataBits(s,u,d)}static embedBasicPatterns(s,a){_e.embedPositionDetectionPatternsAndSeparators(a),_e.embedDarkDotAtLeftBottomCorner(a),_e.maybeEmbedPositionAdjustmentPatterns(s,a),_e.embedTimingPatterns(a)}static embedTypeInfo(s,a,l){let u=new ce;_e.makeTypeInfoBits(s,a,u);for(let d=0,f=u.getSize();d<f;++d){let p=u.get(u.getSize()-1-d),y=_e.TYPE_INFO_COORDINATES[d],C=y[0],w=y[1];if(l.setBoolean(C,w,p),d<8){let x=l.getWidth()-d-1;l.setBoolean(x,8,p)}else{let E=l.getHeight()-7+(d-8);l.setBoolean(8,E,p)}}}static maybeEmbedVersionInfo(s,a){if(s.getVersionNumber()<7)return;let l=new ce;_e.makeVersionInfoBits(s,l);let u=6*3-1;for(let d=0;d<6;++d)for(let f=0;f<3;++f){let p=l.get(u);u--,a.setBoolean(d,a.getHeight()-11+f,p),a.setBoolean(a.getHeight()-11+f,d,p)}}static embedDataBits(s,a,l){let u=0,d=-1,f=l.getWidth()-1,p=l.getHeight()-1;for(;f>0;){for(f===6&&(f-=1);p>=0&&p<l.getHeight();){for(let y=0;y<2;++y){let C=f-y;if(!_e.isEmpty(l.get(C,p)))continue;let w;u<s.getSize()?(w=s.get(u),++u):w=!1,a!==255&&Ls.getDataMaskBit(a,C,p)&&(w=!w),l.setBoolean(C,p,w)}p+=d}d=-d,p+=d,f-=2}if(u!==s.getSize())throw new Dt("Not all bits consumed: "+u+"/"+s.getSize())}static findMSBSet(s){return 32-$.numberOfLeadingZeros(s)}static calculateBCHCode(s,a){if(a===0)throw new m("0 polynomial");let l=_e.findMSBSet(a);for(s<<=l-1;_e.findMSBSet(s)>=l;)s^=a<<_e.findMSBSet(s)-l;return s}static makeTypeInfoBits(s,a,l){if(!Tu.isValidMaskPattern(a))throw new Dt("Invalid mask pattern");let u=s.getBits()<<3|a;l.appendBits(u,5);let d=_e.calculateBCHCode(u,_e.TYPE_INFO_POLY);l.appendBits(d,10);let f=new ce;if(f.appendBits(_e.TYPE_INFO_MASK_PATTERN,15),l.xor(f),l.getSize()!==15)throw new Dt("should not happen but we got: "+l.getSize())}static makeVersionInfoBits(s,a){a.appendBits(s.getVersionNumber(),6);let l=_e.calculateBCHCode(s.getVersionNumber(),_e.VERSION_INFO_POLY);if(a.appendBits(l,12),a.getSize()!==18)throw new Dt("should not happen but we got: "+a.getSize())}static isEmpty(s){return s===255}static embedTimingPatterns(s){for(let a=8;a<s.getWidth()-8;++a){let l=(a+1)%2;_e.isEmpty(s.get(a,6))&&s.setNumber(a,6,l),_e.isEmpty(s.get(6,a))&&s.setNumber(6,a,l)}}static embedDarkDotAtLeftBottomCorner(s){if(s.get(8,s.getHeight()-8)===0)throw new Dt;s.setNumber(8,s.getHeight()-8,1)}static embedHorizontalSeparationPattern(s,a,l){for(let u=0;u<8;++u){if(!_e.isEmpty(l.get(s+u,a)))throw new Dt;l.setNumber(s+u,a,0)}}static embedVerticalSeparationPattern(s,a,l){for(let u=0;u<7;++u){if(!_e.isEmpty(l.get(s,a+u)))throw new Dt;l.setNumber(s,a+u,0)}}static embedPositionAdjustmentPattern(s,a,l){for(let u=0;u<5;++u){let d=_e.POSITION_ADJUSTMENT_PATTERN[u];for(let f=0;f<5;++f)l.setNumber(s+f,a+u,d[f])}}static embedPositionDetectionPattern(s,a,l){for(let u=0;u<7;++u){let d=_e.POSITION_DETECTION_PATTERN[u];for(let f=0;f<7;++f)l.setNumber(s+f,a+u,d[f])}}static embedPositionDetectionPatternsAndSeparators(s){let a=_e.POSITION_DETECTION_PATTERN[0].length;_e.embedPositionDetectionPattern(0,0,s),_e.embedPositionDetectionPattern(s.getWidth()-a,0,s),_e.embedPositionDetectionPattern(0,s.getWidth()-a,s);let l=8;_e.embedHorizontalSeparationPattern(0,l-1,s),_e.embedHorizontalSeparationPattern(s.getWidth()-l,l-1,s),_e.embedHorizontalSeparationPattern(0,s.getWidth()-l,s);let u=7;_e.embedVerticalSeparationPattern(u,0,s),_e.embedVerticalSeparationPattern(s.getHeight()-u-1,0,s),_e.embedVerticalSeparationPattern(u,s.getHeight()-u,s)}static maybeEmbedPositionAdjustmentPatterns(s,a){if(s.getVersionNumber()<2)return;let l=s.getVersionNumber()-1,u=_e.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[l];for(let d=0,f=u.length;d!==f;d++){let p=u[d];if(p>=0)for(let y=0;y!==f;y++){let C=u[y];C>=0&&_e.isEmpty(a.get(C,p))&&_e.embedPositionAdjustmentPattern(C-2,p-2,a)}}}}_e.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),_e.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),_e.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),_e.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),_e.VERSION_INFO_POLY=7973,_e.TYPE_INFO_POLY=1335,_e.TYPE_INFO_MASK_PATTERN=21522;class yT{constructor(s,a){this.dataBytes=s,this.errorCorrectionBytes=a}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class Ot{constructor(){}static calculateMaskPenalty(s){return Ls.applyMaskPenaltyRule1(s)+Ls.applyMaskPenaltyRule2(s)+Ls.applyMaskPenaltyRule3(s)+Ls.applyMaskPenaltyRule4(s)}static encode(s,a,l=null){let u=Ot.DEFAULT_BYTE_MODE_ENCODING,d=l!==null&&l.get(tn.CHARACTER_SET)!==void 0;d&&(u=l.get(tn.CHARACTER_SET).toString());let f=this.chooseMode(s,u),p=new ce;if(f===ye.BYTE&&(d||Ot.DEFAULT_BYTE_MODE_ENCODING!==u)){let ie=Y.getCharacterSetECIByName(u);ie!==void 0&&this.appendECI(ie,p)}this.appendModeInfo(f,p);let y=new ce;this.appendBytes(s,f,y,u);let C;if(l!==null&&l.get(tn.QR_VERSION)!==void 0){let ie=Number.parseInt(l.get(tn.QR_VERSION).toString(),10);C=ge.getVersionForNumber(ie);let U=this.calculateBitsNeeded(f,p,y,C);if(!this.willFit(U,C,a))throw new Dt("Data too big for requested version")}else C=this.recommendVersion(a,f,p,y);let w=new ce;w.appendBitArray(p);let x=f===ye.BYTE?y.getSizeInBytes():s.length;this.appendLengthInfo(x,C,f,w),w.appendBitArray(y);let E=C.getECBlocksForLevel(a),D=C.getTotalCodewords()-E.getTotalECCodewords();this.terminateBits(D,w);let O=this.interleaveWithECBytes(w,C.getTotalCodewords(),D,E.getNumBlocks()),N=new Tu;N.setECLevel(a),N.setMode(f),N.setVersion(C);let k=C.getDimensionForVersion(),L=new Au(k,k),Z=this.chooseMaskPattern(O,a,C,L);return N.setMaskPattern(Z),_e.buildMatrix(O,a,C,Z,L),N.setMatrix(L),N}static recommendVersion(s,a,l,u){let d=this.calculateBitsNeeded(a,l,u,ge.getVersionForNumber(1)),f=this.chooseVersion(d,s),p=this.calculateBitsNeeded(a,l,u,f);return this.chooseVersion(p,s)}static calculateBitsNeeded(s,a,l,u){return a.getSize()+s.getCharacterCountBits(u)+l.getSize()}static getAlphanumericCode(s){return s<Ot.ALPHANUMERIC_TABLE.length?Ot.ALPHANUMERIC_TABLE[s]:-1}static chooseMode(s,a=null){if(Y.SJIS.getName()===a&&this.isOnlyDoubleByteKanji(s))return ye.KANJI;let l=!1,u=!1;for(let d=0,f=s.length;d<f;++d){let p=s.charAt(d);if(Ot.isDigit(p))l=!0;else if(this.getAlphanumericCode(p.charCodeAt(0))!==-1)u=!0;else return ye.BYTE}return u?ye.ALPHANUMERIC:l?ye.NUMERIC:ye.BYTE}static isOnlyDoubleByteKanji(s){let a;try{a=Nn.encode(s,Y.SJIS)}catch{return!1}let l=a.length;if(l%2!==0)return!1;for(let u=0;u<l;u+=2){let d=a[u]&255;if((d<129||d>159)&&(d<224||d>235))return!1}return!0}static chooseMaskPattern(s,a,l,u){let d=Number.MAX_SAFE_INTEGER,f=-1;for(let p=0;p<Tu.NUM_MASK_PATTERNS;p++){_e.buildMatrix(s,a,l,p,u);let y=this.calculateMaskPenalty(u);y<d&&(d=y,f=p)}return f}static chooseVersion(s,a){for(let l=1;l<=40;l++){let u=ge.getVersionForNumber(l);if(Ot.willFit(s,u,a))return u}throw new Dt("Data too big")}static willFit(s,a,l){let u=a.getTotalCodewords(),f=a.getECBlocksForLevel(l).getTotalECCodewords(),p=u-f,y=(s+7)/8;return p>=y}static terminateBits(s,a){let l=s*8;if(a.getSize()>l)throw new Dt("data bits cannot fit in the QR Code"+a.getSize()+" > "+l);for(let f=0;f<4&&a.getSize()<l;++f)a.appendBit(!1);let u=a.getSize()&7;if(u>0)for(let f=u;f<8;f++)a.appendBit(!1);let d=s-a.getSizeInBytes();for(let f=0;f<d;++f)a.appendBits(f&1?17:236,8);if(a.getSize()!==l)throw new Dt("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(s,a,l,u,d,f){if(u>=l)throw new Dt("Block ID too large");let p=s%l,y=l-p,C=Math.floor(s/l),w=C+1,x=Math.floor(a/l),E=x+1,D=C-x,O=w-E;if(D!==O)throw new Dt("EC bytes mismatch");if(l!==y+p)throw new Dt("RS blocks mismatch");if(s!==(x+D)*y+(E+O)*p)throw new Dt("Total bytes mismatch");u<y?(d[0]=x,f[0]=D):(d[0]=E,f[0]=O)}static interleaveWithECBytes(s,a,l,u){if(s.getSizeInBytes()!==l)throw new Dt("Number of bits and data bytes does not match");let d=0,f=0,p=0,y=new Array;for(let w=0;w<u;++w){let x=new Int32Array(1),E=new Int32Array(1);Ot.getNumDataBytesAndNumECBytesForBlockID(a,l,u,w,x,E);let D=x[0],O=new Uint8Array(D);s.toBytes(8*d,O,0,D);let N=Ot.generateECBytes(O,E[0]);y.push(new yT(O,N)),f=Math.max(f,D),p=Math.max(p,N.length),d+=x[0]}if(l!==d)throw new Dt("Data bytes does not match offset");let C=new ce;for(let w=0;w<f;++w)for(let x of y){let E=x.getDataBytes();w<E.length&&C.appendBits(E[w],8)}for(let w=0;w<p;++w)for(let x of y){let E=x.getErrorCorrectionBytes();w<E.length&&C.appendBits(E[w],8)}if(a!==C.getSizeInBytes())throw new Dt("Interleaving error: "+a+" and "+C.getSizeInBytes()+" differ.");return C}static generateECBytes(s,a){let l=s.length,u=new Int32Array(l+a);for(let f=0;f<l;f++)u[f]=s[f]&255;new Bp(lt.QR_CODE_FIELD_256).encode(u,a);let d=new Uint8Array(a);for(let f=0;f<a;f++)d[f]=u[l+f];return d}static appendModeInfo(s,a){a.appendBits(s.getBits(),4)}static appendLengthInfo(s,a,l,u){let d=l.getCharacterCountBits(a);if(s>=1<<d)throw new Dt(s+" is bigger than "+((1<<d)-1));u.appendBits(s,d)}static appendBytes(s,a,l,u){switch(a){case ye.NUMERIC:Ot.appendNumericBytes(s,l);break;case ye.ALPHANUMERIC:Ot.appendAlphanumericBytes(s,l);break;case ye.BYTE:Ot.append8BitBytes(s,l,u);break;case ye.KANJI:Ot.appendKanjiBytes(s,l);break;default:throw new Dt("Invalid mode: "+a)}}static getDigit(s){return s.charCodeAt(0)-48}static isDigit(s){let a=Ot.getDigit(s);return a>=0&&a<=9}static appendNumericBytes(s,a){let l=s.length,u=0;for(;u<l;){let d=Ot.getDigit(s.charAt(u));if(u+2<l){let f=Ot.getDigit(s.charAt(u+1)),p=Ot.getDigit(s.charAt(u+2));a.appendBits(d*100+f*10+p,10),u+=3}else if(u+1<l){let f=Ot.getDigit(s.charAt(u+1));a.appendBits(d*10+f,7),u+=2}else a.appendBits(d,4),u++}}static appendAlphanumericBytes(s,a){let l=s.length,u=0;for(;u<l;){let d=Ot.getAlphanumericCode(s.charCodeAt(u));if(d===-1)throw new Dt;if(u+1<l){let f=Ot.getAlphanumericCode(s.charCodeAt(u+1));if(f===-1)throw new Dt;a.appendBits(d*45+f,11),u+=2}else a.appendBits(d,6),u++}}static append8BitBytes(s,a,l){let u;try{u=Nn.encode(s,l)}catch(d){throw new Dt(d)}for(let d=0,f=u.length;d!==f;d++){let p=u[d];a.appendBits(p,8)}}static appendKanjiBytes(s,a){let l;try{l=Nn.encode(s,Y.SJIS)}catch(d){throw new Dt(d)}let u=l.length;for(let d=0;d<u;d+=2){let f=l[d]&255,p=l[d+1]&255,y=f<<8&4294967295|p,C=-1;if(y>=33088&&y<=40956?C=y-33088:y>=57408&&y<=60351&&(C=y-49472),C===-1)throw new Dt("Invalid byte sequence");let w=(C>>8)*192+(C&255);a.appendBits(w,13)}}static appendECI(s,a){a.appendBits(ye.ECI.getBits(),4),a.appendBits(s.getValue(),8)}}Ot.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),Ot.DEFAULT_BYTE_MODE_ENCODING=Y.UTF8.getName();let CT=(()=>{class _{write(a,l,u,d=null){if(a.length===0)throw new m("Found empty contents");if(l<0||u<0)throw new m("Requested dimensions are too small: "+l+"x"+u);let f=St.L,p=_.QUIET_ZONE_SIZE;d!==null&&(d.get(tn.ERROR_CORRECTION)!==void 0&&(f=St.fromString(d.get(tn.ERROR_CORRECTION).toString())),d.get(tn.MARGIN)!==void 0&&(p=Number.parseInt(d.get(tn.MARGIN).toString(),10)));let y=Ot.encode(a,f,d);return this.renderResult(y,l,u,p)}writeToDom(a,l,u,d,f=null){typeof a=="string"&&(a=document.querySelector(a));let p=this.write(l,u,d,f);a&&a.appendChild(p)}renderResult(a,l,u,d){let f=a.getMatrix();if(f===null)throw new bi;let p=f.getWidth(),y=f.getHeight(),C=p+d*2,w=y+d*2,x=Math.max(l,C),E=Math.max(u,w),D=Math.min(Math.floor(x/C),Math.floor(E/w)),O=Math.floor((x-p*D)/2),N=Math.floor((E-y*D)/2),k=this.createSVGElement(x,E);for(let L=0,Z=N;L<y;L++,Z+=D)for(let ie=0,U=O;ie<p;ie++,U+=D)if(f.get(ie,L)===1){let We=this.createSvgRectElement(U,Z,D,D);k.appendChild(We)}return k}createSVGElement(a,l){let u=document.createElementNS(_.SVG_NS,"svg");return u.setAttributeNS(null,"height",a.toString()),u.setAttributeNS(null,"width",l.toString()),u}createSvgRectElement(a,l,u,d){let f=document.createElementNS(_.SVG_NS,"rect");return f.setAttributeNS(null,"x",a.toString()),f.setAttributeNS(null,"y",l.toString()),f.setAttributeNS(null,"height",u.toString()),f.setAttributeNS(null,"width",d.toString()),f.setAttributeNS(null,"fill","#000000"),f}}return _.QUIET_ZONE_SIZE=4,_.SVG_NS="http://www.w3.org/2000/svg",_})(),G_=(()=>{class _{encode(a,l,u,d,f){if(a.length===0)throw new m("Found empty contents");if(l!==Ce.QR_CODE)throw new m("Can only encode QR_CODE, but got "+l);if(u<0||d<0)throw new m(`Requested dimensions are too small: ${u}x${d}`);let p=St.L,y=_.QUIET_ZONE_SIZE;f!==null&&(f.get(tn.ERROR_CORRECTION)!==void 0&&(p=St.fromString(f.get(tn.ERROR_CORRECTION).toString())),f.get(tn.MARGIN)!==void 0&&(y=Number.parseInt(f.get(tn.MARGIN).toString(),10)));let C=Ot.encode(a,p,f);return _.renderResult(C,u,d,y)}static renderResult(a,l,u,d){let f=a.getMatrix();if(f===null)throw new bi;let p=f.getWidth(),y=f.getHeight(),C=p+d*2,w=y+d*2,x=Math.max(l,C),E=Math.max(u,w),D=Math.min(Math.floor(x/C),Math.floor(E/w)),O=Math.floor((x-p*D)/2),N=Math.floor((E-y*D)/2),k=new dn(x,E);for(let L=0,Z=N;L<y;L++,Z+=D)for(let ie=0,U=O;ie<p;ie++,U+=D)f.get(ie,L)===1&&k.setRegion(U,Z,D,D);return k}}return _.QUIET_ZONE_SIZE=4,_})();class _T{encode(s,a,l,u,d){let f;switch(a){case Ce.QR_CODE:f=new G_;break;default:throw new m("No encoder available for format "+a)}return f.encode(s,a,l,u,d)}}let wT=(()=>{class _ extends cl{constructor(a,l,u,d,f,p,y,C){if(super(p,y),this.yuvData=a,this.dataWidth=l,this.dataHeight=u,this.left=d,this.top=f,d+p>l||f+y>u)throw new m("Crop rectangle does not fit within image data.");C&&this.reverseHorizontal(p,y)}getRow(a,l){if(a<0||a>=this.getHeight())throw new m("Requested row is outside the image: "+a);let u=this.getWidth();(l==null||l.length<u)&&(l=new Uint8ClampedArray(u));let d=(a+this.top)*this.dataWidth+this.left;return M.arraycopy(this.yuvData,d,l,0,u),l}getMatrix(){let a=this.getWidth(),l=this.getHeight();if(a===this.dataWidth&&l===this.dataHeight)return this.yuvData;let u=a*l,d=new Uint8ClampedArray(u),f=this.top*this.dataWidth+this.left;if(a===this.dataWidth)return M.arraycopy(this.yuvData,f,d,0,u),d;for(let p=0;p<l;p++){let y=p*a;M.arraycopy(this.yuvData,f,d,y,a),f+=this.dataWidth}return d}isCropSupported(){return!0}crop(a,l,u,d){return new _(this.yuvData,this.dataWidth,this.dataHeight,this.left+a,this.top+l,u,d,!1)}renderThumbnail(){let a=this.getWidth()/_.THUMBNAIL_SCALE_FACTOR,l=this.getHeight()/_.THUMBNAIL_SCALE_FACTOR,u=new Int32Array(a*l),d=this.yuvData,f=this.top*this.dataWidth+this.left;for(let p=0;p<l;p++){let y=p*a;for(let C=0;C<a;C++){let w=d[f+C*_.THUMBNAIL_SCALE_FACTOR]&255;u[y+C]=4278190080|w*65793}f+=this.dataWidth*_.THUMBNAIL_SCALE_FACTOR}return u}getThumbnailWidth(){return this.getWidth()/_.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/_.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(a,l){let u=this.yuvData;for(let d=0,f=this.top*this.dataWidth+this.left;d<l;d++,f+=this.dataWidth){let p=f+a/2;for(let y=f,C=f+a-1;y<p;y++,C--){let w=u[y];u[y]=u[C],u[C]=w}}}invert(){return new Qi(this)}}return _.THUMBNAIL_SCALE_FACTOR=2,_})();class Up extends cl{constructor(s,a,l,u,d,f,p){if(super(a,l),this.dataWidth=u,this.dataHeight=d,this.left=f,this.top=p,s.BYTES_PER_ELEMENT===4){let y=a*l,C=new Uint8ClampedArray(y);for(let w=0;w<y;w++){let x=s[w],E=x>>16&255,D=x>>7&510,O=x&255;C[w]=(E+D+O)/4&255}this.luminances=C}else this.luminances=s;if(u===void 0&&(this.dataWidth=a),d===void 0&&(this.dataHeight=l),f===void 0&&(this.left=0),p===void 0&&(this.top=0),this.left+a>this.dataWidth||this.top+l>this.dataHeight)throw new m("Crop rectangle does not fit within image data.")}getRow(s,a){if(s<0||s>=this.getHeight())throw new m("Requested row is outside the image: "+s);let l=this.getWidth();(a==null||a.length<l)&&(a=new Uint8ClampedArray(l));let u=(s+this.top)*this.dataWidth+this.left;return M.arraycopy(this.luminances,u,a,0,l),a}getMatrix(){let s=this.getWidth(),a=this.getHeight();if(s===this.dataWidth&&a===this.dataHeight)return this.luminances;let l=s*a,u=new Uint8ClampedArray(l),d=this.top*this.dataWidth+this.left;if(s===this.dataWidth)return M.arraycopy(this.luminances,d,u,0,l),u;for(let f=0;f<a;f++){let p=f*s;M.arraycopy(this.luminances,d,u,p,s),d+=this.dataWidth}return u}isCropSupported(){return!0}crop(s,a,l,u){return new Up(this.luminances,l,u,this.dataWidth,this.dataHeight,this.left+s,this.top+a)}invert(){return new Qi(this)}}class $_ extends Y{static forName(s){return this.getCharacterSetECIByName(s)}}class Vp{}Vp.ISO_8859_1=Y.ISO8859_1;class q_{isCompact(){return this.compact}setCompact(s){this.compact=s}getSize(){return this.size}setSize(s){this.size=s}getLayers(){return this.layers}setLayers(s){this.layers=s}getCodeWords(){return this.codeWords}setCodeWords(s){this.codeWords=s}getMatrix(){return this.matrix}setMatrix(s){this.matrix=s}}class Y_{static singletonList(s){return[s]}static min(s,a){return s.sort(a)[0]}}class vT{constructor(s){this.previous=s}getPrevious(){return this.previous}}class Bs extends vT{constructor(s,a,l){super(s),this.value=a,this.bitCount=l}appendTo(s,a){s.appendBits(this.value,this.bitCount)}add(s,a){return new Bs(this,s,a)}addBinaryShift(s,a){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Bs(this,s,a)}toString(){let s=this.value&(1<<this.bitCount)-1;return s|=1<<this.bitCount,"<"+$.toBinaryString(s|1<<this.bitCount).substring(1)+">"}}class jp extends Bs{constructor(s,a,l){super(s,0,0),this.binaryShiftStart=a,this.binaryShiftByteCount=l}appendTo(s,a){for(let l=0;l<this.binaryShiftByteCount;l++)(l===0||l===31&&this.binaryShiftByteCount<=62)&&(s.appendBits(31,5),this.binaryShiftByteCount>62?s.appendBits(this.binaryShiftByteCount-31,16):l===0?s.appendBits(Math.min(this.binaryShiftByteCount,31),5):s.appendBits(this.binaryShiftByteCount-31,5)),s.appendBits(a[this.binaryShiftStart+l],8)}addBinaryShift(s,a){return new jp(this,s,a)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function bT(_,s,a){return new jp(_,s,a)}function wl(_,s,a){return new Bs(_,s,a)}let xT=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],oo=0,Ou=1,Cr=2,X_=3,ni=4,ET=new Bs(null,0,0),Hp=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function IT(_){for(let s of _)X.fill(s,-1);return _[oo][ni]=0,_[Ou][ni]=0,_[Ou][oo]=28,_[X_][ni]=0,_[Cr][ni]=0,_[Cr][oo]=15,_}let Z_=IT(X.createInt32Array(6,6));class ri{constructor(s,a,l,u){this.token=s,this.mode=a,this.binaryShiftByteCount=l,this.bitCount=u}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(s,a){let l=this.bitCount,u=this.token;if(s!==this.mode){let f=Hp[this.mode][s];u=wl(u,f&65535,f>>16),l+=f>>16}let d=s===Cr?4:5;return u=wl(u,a,d),new ri(u,s,0,l+d)}shiftAndAppend(s,a){let l=this.token,u=this.mode===Cr?4:5;return l=wl(l,Z_[this.mode][s],u),l=wl(l,a,5),new ri(l,this.mode,0,this.bitCount+u+5)}addBinaryShiftChar(s){let a=this.token,l=this.mode,u=this.bitCount;if(this.mode===ni||this.mode===Cr){let p=Hp[l][oo];a=wl(a,p&65535,p>>16),u+=p>>16,l=oo}let d=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,f=new ri(a,l,this.binaryShiftByteCount+1,u+d);return f.binaryShiftByteCount===2078&&(f=f.endBinaryShift(s+1)),f}endBinaryShift(s){if(this.binaryShiftByteCount===0)return this;let a=this.token;return a=bT(a,s-this.binaryShiftByteCount,this.binaryShiftByteCount),new ri(a,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(s){let a=this.bitCount+(Hp[this.mode][s.mode]>>16);return this.binaryShiftByteCount<s.binaryShiftByteCount?a+=ri.calculateBinaryShiftCost(s)-ri.calculateBinaryShiftCost(this):this.binaryShiftByteCount>s.binaryShiftByteCount&&s.binaryShiftByteCount>0&&(a+=10),a<=s.bitCount}toBitArray(s){let a=[];for(let u=this.endBinaryShift(s.length).token;u!==null;u=u.getPrevious())a.unshift(u);let l=new ce;for(let u of a)u.appendTo(l,s);return l}toString(){return Ie.format("%s bits=%d bytes=%d",xT[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(s){return s.binaryShiftByteCount>62?21:s.binaryShiftByteCount>31?20:s.binaryShiftByteCount>0?10:0}}ri.INITIAL_STATE=new ri(ET,oo,0,0);function ST(_){let s=Ie.getCharCode(" "),a=Ie.getCharCode("."),l=Ie.getCharCode(",");_[oo][s]=1;let u=Ie.getCharCode("Z"),d=Ie.getCharCode("A");for(let E=d;E<=u;E++)_[oo][E]=E-d+2;_[Ou][s]=1;let f=Ie.getCharCode("z"),p=Ie.getCharCode("a");for(let E=p;E<=f;E++)_[Ou][E]=E-p+2;_[Cr][s]=1;let y=Ie.getCharCode("9"),C=Ie.getCharCode("0");for(let E=C;E<=y;E++)_[Cr][E]=E-C+2;_[Cr][l]=12,_[Cr][a]=13;let w=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~","\x7F"];for(let E=0;E<w.length;E++)_[X_][Ie.getCharCode(w[E])]=E;let x=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let E=0;E<x.length;E++)Ie.getCharCode(x[E])>0&&(_[ni][Ie.getCharCode(x[E])]=E);return _}let zp=ST(X.createInt32Array(5,256));class vl{constructor(s){this.text=s}encode(){let s=Ie.getCharCode(" "),a=Ie.getCharCode(`
`),l=Y_.singletonList(ri.INITIAL_STATE);for(let d=0;d<this.text.length;d++){let f,p=d+1<this.text.length?this.text[d+1]:0;switch(this.text[d]){case Ie.getCharCode("\r"):f=p===a?2:0;break;case Ie.getCharCode("."):f=p===s?3:0;break;case Ie.getCharCode(","):f=p===s?4:0;break;case Ie.getCharCode(":"):f=p===s?5:0;break;default:f=0}f>0?(l=vl.updateStateListForPair(l,d,f),d++):l=this.updateStateListForChar(l,d)}return Y_.min(l,(d,f)=>d.getBitCount()-f.getBitCount()).toBitArray(this.text)}updateStateListForChar(s,a){let l=[];for(let u of s)this.updateStateForChar(u,a,l);return vl.simplifyStates(l)}updateStateForChar(s,a,l){let u=this.text[a]&255,d=zp[s.getMode()][u]>0,f=null;for(let p=0;p<=ni;p++){let y=zp[p][u];if(y>0){if(f==null&&(f=s.endBinaryShift(a)),!d||p===s.getMode()||p===Cr){let C=f.latchAndAppend(p,y);l.push(C)}if(!d&&Z_[s.getMode()][p]>=0){let C=f.shiftAndAppend(p,y);l.push(C)}}}if(s.getBinaryShiftByteCount()>0||zp[s.getMode()][u]===0){let p=s.addBinaryShiftChar(a);l.push(p)}}static updateStateListForPair(s,a,l){let u=[];for(let d of s)this.updateStateForPair(d,a,l,u);return this.simplifyStates(u)}static updateStateForPair(s,a,l,u){let d=s.endBinaryShift(a);if(u.push(d.latchAndAppend(ni,l)),s.getMode()!==ni&&u.push(d.shiftAndAppend(ni,l)),l===3||l===4){let f=d.latchAndAppend(Cr,16-l).latchAndAppend(Cr,1);u.push(f)}if(s.getBinaryShiftByteCount()>0){let f=s.addBinaryShiftChar(a).addBinaryShiftChar(a+1);u.push(f)}}static simplifyStates(s){let a=[];for(let l of s){let u=!0;for(let d of a){if(d.isBetterThanOrEqualTo(l)){u=!1;break}l.isBetterThanOrEqualTo(d)&&(a=a.filter(f=>f!==d))}u&&a.push(l)}return a}}class nt{constructor(){}static encodeBytes(s){return nt.encode(s,nt.DEFAULT_EC_PERCENT,nt.DEFAULT_AZTEC_LAYERS)}static encode(s,a,l){let u=new vl(s).encode(),d=$.truncDivision(u.getSize()*a,100)+11,f=u.getSize()+d,p,y,C,w,x;if(l!==nt.DEFAULT_AZTEC_LAYERS){if(p=l<0,y=Math.abs(l),y>(p?nt.MAX_NB_BITS_COMPACT:nt.MAX_NB_BITS))throw new m(Ie.format("Illegal value %s for layers",l));C=nt.totalBitsInLayer(y,p),w=nt.WORD_SIZE[y];let U=C-C%w;if(x=nt.stuffBits(u,w),x.getSize()+d>U)throw new m("Data to large for user specified layer");if(p&&x.getSize()>w*64)throw new m("Data to large for user specified layer")}else{w=0,x=null;for(let U=0;;U++){if(U>nt.MAX_NB_BITS)throw new m("Data too large for an Aztec code");if(p=U<=3,y=p?U+1:U,C=nt.totalBitsInLayer(y,p),f>C)continue;(x==null||w!==nt.WORD_SIZE[y])&&(w=nt.WORD_SIZE[y],x=nt.stuffBits(u,w));let We=C-C%w;if(!(p&&x.getSize()>w*64)&&x.getSize()+d<=We)break}}let E=nt.generateCheckWords(x,C,w),D=x.getSize()/w,O=nt.generateModeMessage(p,y,D),N=(p?11:14)+y*4,k=new Int32Array(N),L;if(p){L=N;for(let U=0;U<k.length;U++)k[U]=U}else{L=N+1+2*$.truncDivision($.truncDivision(N,2)-1,15);let U=$.truncDivision(N,2),We=$.truncDivision(L,2);for(let Oe=0;Oe<U;Oe++){let Zn=Oe+$.truncDivision(Oe,15);k[U-Oe-1]=We-Zn-1,k[U+Oe]=We+Zn+1}}let Z=new dn(L);for(let U=0,We=0;U<y;U++){let Oe=(y-U)*4+(p?9:12);for(let Zn=0;Zn<Oe;Zn++){let Br=Zn*2;for(let Qn=0;Qn<2;Qn++)E.get(We+Br+Qn)&&Z.set(k[U*2+Qn],k[U*2+Zn]),E.get(We+Oe*2+Br+Qn)&&Z.set(k[U*2+Zn],k[N-1-U*2-Qn]),E.get(We+Oe*4+Br+Qn)&&Z.set(k[N-1-U*2-Qn],k[N-1-U*2-Zn]),E.get(We+Oe*6+Br+Qn)&&Z.set(k[N-1-U*2-Zn],k[U*2+Qn])}We+=Oe*8}if(nt.drawModeMessage(Z,p,L,O),p)nt.drawBullsEye(Z,$.truncDivision(L,2),5);else{nt.drawBullsEye(Z,$.truncDivision(L,2),7);for(let U=0,We=0;U<$.truncDivision(N,2)-1;U+=15,We+=16)for(let Oe=$.truncDivision(L,2)&1;Oe<L;Oe+=2)Z.set($.truncDivision(L,2)-We,Oe),Z.set($.truncDivision(L,2)+We,Oe),Z.set(Oe,$.truncDivision(L,2)-We),Z.set(Oe,$.truncDivision(L,2)+We)}let ie=new q_;return ie.setCompact(p),ie.setSize(L),ie.setLayers(y),ie.setCodeWords(D),ie.setMatrix(Z),ie}static drawBullsEye(s,a,l){for(let u=0;u<l;u+=2)for(let d=a-u;d<=a+u;d++)s.set(d,a-u),s.set(d,a+u),s.set(a-u,d),s.set(a+u,d);s.set(a-l,a-l),s.set(a-l+1,a-l),s.set(a-l,a-l+1),s.set(a+l,a-l),s.set(a+l,a-l+1),s.set(a+l,a+l-1)}static generateModeMessage(s,a,l){let u=new ce;return s?(u.appendBits(a-1,2),u.appendBits(l-1,6),u=nt.generateCheckWords(u,28,4)):(u.appendBits(a-1,5),u.appendBits(l-1,11),u=nt.generateCheckWords(u,40,4)),u}static drawModeMessage(s,a,l,u){let d=$.truncDivision(l,2);if(a)for(let f=0;f<7;f++){let p=d-3+f;u.get(f)&&s.set(p,d-5),u.get(f+7)&&s.set(d+5,p),u.get(20-f)&&s.set(p,d+5),u.get(27-f)&&s.set(d-5,p)}else for(let f=0;f<10;f++){let p=d-5+f+$.truncDivision(f,5);u.get(f)&&s.set(p,d-7),u.get(f+10)&&s.set(d+7,p),u.get(29-f)&&s.set(p,d+7),u.get(39-f)&&s.set(d-7,p)}}static generateCheckWords(s,a,l){let u=s.getSize()/l,d=new Bp(nt.getGF(l)),f=$.truncDivision(a,l),p=nt.bitsToWords(s,l,f);d.encode(p,f-u);let y=a%l,C=new ce;C.appendBits(0,y);for(let w of Array.from(p))C.appendBits(w,l);return C}static bitsToWords(s,a,l){let u=new Int32Array(l),d,f;for(d=0,f=s.getSize()/a;d<f;d++){let p=0;for(let y=0;y<a;y++)p|=s.get(d*a+y)?1<<a-y-1:0;u[d]=p}return u}static getGF(s){switch(s){case 4:return lt.AZTEC_PARAM;case 6:return lt.AZTEC_DATA_6;case 8:return lt.AZTEC_DATA_8;case 10:return lt.AZTEC_DATA_10;case 12:return lt.AZTEC_DATA_12;default:throw new m("Unsupported word size "+s)}}static stuffBits(s,a){let l=new ce,u=s.getSize(),d=(1<<a)-2;for(let f=0;f<u;f+=a){let p=0;for(let y=0;y<a;y++)(f+y>=u||s.get(f+y))&&(p|=1<<a-1-y);(p&d)===d?(l.appendBits(p&d,a),f--):p&d?l.appendBits(p,a):(l.appendBits(p|1,a),f--)}return l}static totalBitsInLayer(s,a){return((a?88:112)+16*s)*s}}nt.DEFAULT_EC_PERCENT=33,nt.DEFAULT_AZTEC_LAYERS=0,nt.MAX_NB_BITS=32,nt.MAX_NB_BITS_COMPACT=4,nt.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Nu{encode(s,a,l,u){return this.encodeWithHints(s,a,l,u,null)}encodeWithHints(s,a,l,u,d){let f=Vp.ISO_8859_1,p=nt.DEFAULT_EC_PERCENT,y=nt.DEFAULT_AZTEC_LAYERS;return d!=null&&(d.has(tn.CHARACTER_SET)&&(f=$_.forName(d.get(tn.CHARACTER_SET).toString())),d.has(tn.ERROR_CORRECTION)&&(p=$.parseInt(d.get(tn.ERROR_CORRECTION).toString())),d.has(tn.AZTEC_LAYERS)&&(y=$.parseInt(d.get(tn.AZTEC_LAYERS).toString()))),Nu.encodeLayers(s,a,l,u,f,p,y)}static encodeLayers(s,a,l,u,d,f,p){if(a!==Ce.AZTEC)throw new m("Can only encode AZTEC, but got "+a);let y=nt.encode(Ie.getBytes(s,d),f,p);return Nu.renderResult(y,l,u)}static renderResult(s,a,l){let u=s.getMatrix();if(u==null)throw new bi;let d=u.getWidth(),f=u.getHeight(),p=Math.max(a,d),y=Math.max(l,f),C=Math.min(p/d,y/f),w=(p-d*C)/2,x=(y-f*C)/2,E=new dn(p,y);for(let D=0,O=x;D<f;D++,O+=C)for(let N=0,k=w;N<d;N++,k+=C)u.get(N,D)&&E.setRegion(k,O,C,C);return E}}e.AbstractExpandedDecoder=Mp,e.ArgumentException=g,e.ArithmeticException=vp,e.AztecCode=q_,e.AztecCodeReader=bu,e.AztecCodeWriter=Nu,e.AztecDecoder=bp,e.AztecDetector=A_,e.AztecDetectorResult=D_,e.AztecEncoder=nt,e.AztecHighLevelEncoder=vl,e.AztecPoint=Bn,e.BarcodeFormat=Ce,e.Binarizer=I,e.BinaryBitmap=v,e.BitArray=ce,e.BitMatrix=dn,e.BitSource=Np,e.BrowserAztecCodeReader=zA,e.BrowserBarcodeReader=KA,e.BrowserCodeReader=Vo,e.BrowserDatamatrixCodeReader=eT,e.BrowserMultiFormatReader=pT,e.BrowserPDF417Reader=gT,e.BrowserQRCodeReader=mT,e.BrowserQRCodeSvgWriter=CT,e.CharacterSetECI=Y,e.ChecksumException=b,e.Code128Reader=ne,e.Code39Reader=Ep,e.DataMatrixDecodedBitStreamParser=no,e.DataMatrixReader=Su,e.DecodeHintType=me,e.DecoderResult=ul,e.DefaultGridSampler=M_,e.DetectorResult=wu,e.EAN13Reader=xu,e.EncodeHintType=tn,e.Exception=h,e.FormatException=W,e.GenericGF=lt,e.GenericGFPoly=Yn,e.GlobalHistogramBinarizer=fn,e.GridSampler=xp,e.GridSamplerInstance=Ji,e.HTMLCanvasElementLuminanceSource=Ki,e.HybridBinarizer=Fe,e.ITFReader=vt,e.IllegalArgumentException=m,e.IllegalStateException=bi,e.InvertedLuminanceSource=Qi,e.LuminanceSource=cl,e.MathUtils=tt,e.MultiFormatOneDReader=Fs,e.MultiFormatReader=z_,e.MultiFormatWriter=_T,e.NotFoundException=V,e.OneDReader=qt,e.PDF417DecodedBitStreamParser=B,e.PDF417DecoderErrorCorrection=L_,e.PDF417Reader=xn,e.PDF417ResultMetadata=V_,e.PerspectiveTransform=Rr,e.PlanarYUVLuminanceSource=wT,e.QRCodeByteMatrix=Au,e.QRCodeDataMask=yr,e.QRCodeDecodedBitStreamParser=k_,e.QRCodeDecoderErrorCorrectionLevel=St,e.QRCodeDecoderFormatInformation=Pn,e.QRCodeEncoder=Ot,e.QRCodeEncoderQRCode=Tu,e.QRCodeMaskUtil=Ls,e.QRCodeMatrixUtil=_e,e.QRCodeMode=ye,e.QRCodeReader=ro,e.QRCodeVersion=ge,e.QRCodeWriter=G_,e.RGBLuminanceSource=Up,e.RSS14Reader=Bt,e.RSSExpandedReader=G,e.ReaderException=Lp,e.ReedSolomonDecoder=hl,e.ReedSolomonEncoder=Bp,e.ReedSolomonException=fl,e.Result=Ln,e.ResultMetadataType=hn,e.ResultPoint=ue,e.StringUtils=Ie,e.UnsupportedOperationException=or,e.VideoInputDevice=E_,e.WhiteRectangleDetector=vu,e.WriterException=Dt,e.ZXingArrays=X,e.ZXingCharset=$_,e.ZXingInteger=$,e.ZXingStandardCharsets=Vp,e.ZXingStringBuilder=wt,e.ZXingStringEncoding=Nn,e.ZXingSystem=M,e.createAbstractExpandedDecoder=P_,Object.defineProperty(e,"__esModule",{value:!0})})});function tw(e,n){return Object.is(e,n)}var nn=null,Pu=!1,ku=1,xi=Symbol("SIGNAL");function qe(e){let n=nn;return nn=e,n}function nw(){return nn}var xl={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Yp(e){if(Pu)throw new Error("");if(nn===null)return;nn.consumerOnSignalRead(e);let n=nn.nextProducerIndex++;if(Uu(nn),n<nn.producerNode.length&&nn.producerNode[n]!==e&&bl(nn)){let t=nn.producerNode[n];Bu(t,nn.producerIndexOfThis[n])}nn.producerNode[n]!==e&&(nn.producerNode[n]=e,nn.producerIndexOfThis[n]=bl(nn)?sw(e,nn,n):0),nn.producerLastReadVersion[n]=e.version}function FT(){ku++}function rw(e){if(!(bl(e)&&!e.dirty)&&!(!e.dirty&&e.lastCleanEpoch===ku)){if(!e.producerMustRecompute(e)&&!Zp(e)){e.dirty=!1,e.lastCleanEpoch=ku;return}e.producerRecomputeValue(e),e.dirty=!1,e.lastCleanEpoch=ku}}function iw(e){if(e.liveConsumerNode===void 0)return;let n=Pu;Pu=!0;try{for(let t of e.liveConsumerNode)t.dirty||LT(t)}finally{Pu=n}}function ow(){return nn?.consumerAllowSignalWrites!==!1}function LT(e){e.dirty=!0,iw(e),e.consumerMarkedDirty?.(e)}function Lu(e){return e&&(e.nextProducerIndex=0),qe(e)}function Xp(e,n){if(qe(n),!(!e||e.producerNode===void 0||e.producerIndexOfThis===void 0||e.producerLastReadVersion===void 0)){if(bl(e))for(let t=e.nextProducerIndex;t<e.producerNode.length;t++)Bu(e.producerNode[t],e.producerIndexOfThis[t]);for(;e.producerNode.length>e.nextProducerIndex;)e.producerNode.pop(),e.producerLastReadVersion.pop(),e.producerIndexOfThis.pop()}}function Zp(e){Uu(e);for(let n=0;n<e.producerNode.length;n++){let t=e.producerNode[n],r=e.producerLastReadVersion[n];if(r!==t.version||(rw(t),r!==t.version))return!0}return!1}function Qp(e){if(Uu(e),bl(e))for(let n=0;n<e.producerNode.length;n++)Bu(e.producerNode[n],e.producerIndexOfThis[n]);e.producerNode.length=e.producerLastReadVersion.length=e.producerIndexOfThis.length=0,e.liveConsumerNode&&(e.liveConsumerNode.length=e.liveConsumerIndexOfThis.length=0)}function sw(e,n,t){if(aw(e),e.liveConsumerNode.length===0&&lw(e))for(let r=0;r<e.producerNode.length;r++)e.producerIndexOfThis[r]=sw(e.producerNode[r],e,r);return e.liveConsumerIndexOfThis.push(t),e.liveConsumerNode.push(n)-1}function Bu(e,n){if(aw(e),e.liveConsumerNode.length===1&&lw(e))for(let r=0;r<e.producerNode.length;r++)Bu(e.producerNode[r],e.producerIndexOfThis[r]);let t=e.liveConsumerNode.length-1;if(e.liveConsumerNode[n]=e.liveConsumerNode[t],e.liveConsumerIndexOfThis[n]=e.liveConsumerIndexOfThis[t],e.liveConsumerNode.length--,e.liveConsumerIndexOfThis.length--,n<e.liveConsumerNode.length){let r=e.liveConsumerIndexOfThis[n],i=e.liveConsumerNode[n];Uu(i),i.producerIndexOfThis[r]=n}}function bl(e){return e.consumerIsAlwaysLive||(e?.liveConsumerNode?.length??0)>0}function Uu(e){e.producerNode??=[],e.producerIndexOfThis??=[],e.producerLastReadVersion??=[]}function aw(e){e.liveConsumerNode??=[],e.liveConsumerIndexOfThis??=[]}function lw(e){return e.producerNode!==void 0}function cw(e){let n=Object.create(BT);n.computation=e;let t=()=>{if(rw(n),Yp(n),n.value===Fu)throw n.error;return n.value};return t[xi]=n,t}var $p=Symbol("UNSET"),qp=Symbol("COMPUTING"),Fu=Symbol("ERRORED"),BT=Be(re({},xl),{value:$p,dirty:!0,error:null,equal:tw,producerMustRecompute(e){return e.value===$p||e.value===qp},producerRecomputeValue(e){if(e.value===qp)throw new Error("Detected cycle in computations.");let n=e.value;e.value=qp;let t=Lu(e),r;try{r=e.computation()}catch(i){r=Fu,e.error=i}finally{Xp(e,t)}if(n!==$p&&n!==Fu&&r!==Fu&&e.equal(n,r)){e.value=n;return}e.value=r,e.version++}});function UT(){throw new Error}var uw=UT;function dw(){uw()}function fw(e){uw=e}var VT=null;function hw(e){let n=Object.create(gw);n.value=e;let t=()=>(Yp(n),n.value);return t[xi]=n,t}function Kp(e,n){ow()||dw(),e.equal(e.value,n)||(e.value=n,jT(e))}function pw(e,n){ow()||dw(),Kp(e,n(e.value))}var gw=Be(re({},xl),{equal:tw,value:void 0});function jT(e){e.version++,FT(),iw(e),VT?.()}function Te(e){return typeof e=="function"}function js(e){let t=e(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Vu=js(e=>function(t){e(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Go(e,n){if(e){let t=e.indexOf(n);0<=t&&e.splice(t,1)}}var Ut=class e{constructor(n){this.initialTeardown=n,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let n;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(Te(r))try{r()}catch(o){n=o instanceof Vu?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{mw(o)}catch(c){n=n??[],c instanceof Vu?n=[...n,...c.errors]:n.push(c)}}if(n)throw new Vu(n)}}add(n){var t;if(n&&n!==this)if(this.closed)mw(n);else{if(n instanceof e){if(n.closed||n._hasParent(this))return;n._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(n)}}_hasParent(n){let{_parentage:t}=this;return t===n||Array.isArray(t)&&t.includes(n)}_addParent(n){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(n),t):t?[t,n]:n}_removeParent(n){let{_parentage:t}=this;t===n?this._parentage=null:Array.isArray(t)&&Go(t,n)}remove(n){let{_finalizers:t}=this;t&&Go(t,n),n instanceof e&&n._removeParent(this)}};Ut.EMPTY=(()=>{let e=new Ut;return e.closed=!0,e})();var Jp=Ut.EMPTY;function ju(e){return e instanceof Ut||e&&"closed"in e&&Te(e.remove)&&Te(e.add)&&Te(e.unsubscribe)}function mw(e){Te(e)?e():e.unsubscribe()}var Ur={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Hs={setTimeout(e,n,...t){let{delegate:r}=Hs;return r?.setTimeout?r.setTimeout(e,n,...t):setTimeout(e,n,...t)},clearTimeout(e){let{delegate:n}=Hs;return(n?.clearTimeout||clearTimeout)(e)},delegate:void 0};function Hu(e){Hs.setTimeout(()=>{let{onUnhandledError:n}=Ur;if(n)n(e);else throw e})}function El(){}var yw=eg("C",void 0,void 0);function Cw(e){return eg("E",void 0,e)}function _w(e){return eg("N",e,void 0)}function eg(e,n,t){return{kind:e,value:n,error:t}}var $o=null;function zs(e){if(Ur.useDeprecatedSynchronousErrorHandling){let n=!$o;if(n&&($o={errorThrown:!1,error:null}),e(),n){let{errorThrown:t,error:r}=$o;if($o=null,t)throw r}}else e()}function ww(e){Ur.useDeprecatedSynchronousErrorHandling&&$o&&($o.errorThrown=!0,$o.error=e)}var qo=class extends Ut{constructor(n){super(),this.isStopped=!1,n?(this.destination=n,ju(n)&&n.add(this)):this.destination=WT}static create(n,t,r){return new Ws(n,t,r)}next(n){this.isStopped?ng(_w(n),this):this._next(n)}error(n){this.isStopped?ng(Cw(n),this):(this.isStopped=!0,this._error(n))}complete(){this.isStopped?ng(yw,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(n){this.destination.next(n)}_error(n){try{this.destination.error(n)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},HT=Function.prototype.bind;function tg(e,n){return HT.call(e,n)}var rg=class{constructor(n){this.partialObserver=n}next(n){let{partialObserver:t}=this;if(t.next)try{t.next(n)}catch(r){zu(r)}}error(n){let{partialObserver:t}=this;if(t.error)try{t.error(n)}catch(r){zu(r)}else zu(n)}complete(){let{partialObserver:n}=this;if(n.complete)try{n.complete()}catch(t){zu(t)}}},Ws=class extends qo{constructor(n,t,r){super();let i;if(Te(n)||!n)i={next:n??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&Ur.useDeprecatedNextContext?(o=Object.create(n),o.unsubscribe=()=>this.unsubscribe(),i={next:n.next&&tg(n.next,o),error:n.error&&tg(n.error,o),complete:n.complete&&tg(n.complete,o)}):i=n}this.destination=new rg(i)}};function zu(e){Ur.useDeprecatedSynchronousErrorHandling?ww(e):Hu(e)}function zT(e){throw e}function ng(e,n){let{onStoppedNotification:t}=Ur;t&&Hs.setTimeout(()=>t(e,n))}var WT={closed:!0,next:El,error:zT,complete:El};var Gs=typeof Symbol=="function"&&Symbol.observable||"@@observable";function ar(e){return e}function ig(...e){return og(e)}function og(e){return e.length===0?ar:e.length===1?e[0]:function(t){return e.reduce((r,i)=>i(r),t)}}var Ue=(()=>{class e{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new e;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=$T(t)?t:new Ws(t,r,i);return zs(()=>{let{operator:c,source:h}=this;o.add(c?c.call(o,h):h?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=vw(r),new r((i,o)=>{let c=new Ws({next:h=>{try{t(h)}catch(g){o(g),c.unsubscribe()}},error:o,complete:i});this.subscribe(c)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Gs](){return this}pipe(...t){return og(t)(this)}toPromise(t){return t=vw(t),new t((r,i)=>{let o;this.subscribe(c=>o=c,c=>i(c),()=>r(o))})}}return e.create=n=>new e(n),e})();function vw(e){var n;return(n=e??Ur.Promise)!==null&&n!==void 0?n:Promise}function GT(e){return e&&Te(e.next)&&Te(e.error)&&Te(e.complete)}function $T(e){return e&&e instanceof qo||GT(e)&&ju(e)}function sg(e){return Te(e?.lift)}function Je(e){return n=>{if(sg(n))return n.lift(function(t){try{return e(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Xe(e,n,t,r,i){return new ag(e,n,t,r,i)}var ag=class extends qo{constructor(n,t,r,i,o,c){super(n),this.onFinalize=o,this.shouldUnsubscribe=c,this._next=t?function(h){try{t(h)}catch(g){n.error(g)}}:super._next,this._error=i?function(h){try{i(h)}catch(g){n.error(g)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(h){n.error(h)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((n=this.onFinalize)===null||n===void 0||n.call(this))}}};function $s(){return Je((e,n)=>{let t=null;e._refCount++;let r=Xe(n,void 0,void 0,void 0,()=>{if(!e||e._refCount<=0||0<--e._refCount){t=null;return}let i=e._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),n.unsubscribe()});e.subscribe(r),r.closed||(t=e.connect())})}var qs=class extends Ue{constructor(n,t){super(),this.source=n,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,sg(n)&&(this.lift=n.lift)}_subscribe(n){return this.getSubject().subscribe(n)}getSubject(){let n=this._subject;return(!n||n.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:n}=this;this._subject=this._connection=null,n?.unsubscribe()}connect(){let n=this._connection;if(!n){n=this._connection=new Ut;let t=this.getSubject();n.add(this.source.subscribe(Xe(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),n.closed&&(this._connection=null,n=Ut.EMPTY)}return n}refCount(){return $s()(this)}};var bw=js(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var rn=(()=>{class e extends Ue{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Wu(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new bw}next(t){zs(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){zs(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){zs(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Jp:(this.currentObservers=null,o.push(t),new Ut(()=>{this.currentObservers=null,Go(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new Ue;return t.source=this,t}}return e.create=(n,t)=>new Wu(n,t),e})(),Wu=class extends rn{constructor(n,t){super(),this.destination=n,this.source=t}next(n){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,n)}error(n){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,n)}complete(){var n,t;(t=(n=this.destination)===null||n===void 0?void 0:n.complete)===null||t===void 0||t.call(n)}_subscribe(n){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(n))!==null&&r!==void 0?r:Jp}};var In=class extends rn{constructor(n){super(),this._value=n}get value(){return this.getValue()}_subscribe(n){let t=super._subscribe(n);return!t.closed&&n.next(this._value),t}getValue(){let{hasError:n,thrownError:t,_value:r}=this;if(n)throw t;return this._throwIfClosed(),r}next(n){super.next(this._value=n)}};var Il={now(){return(Il.delegate||Date).now()},delegate:void 0};var Yo=class extends rn{constructor(n=1/0,t=1/0,r=Il){super(),this._bufferSize=n,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,n),this._windowTime=Math.max(1,t)}next(n){let{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:c}=this;t||(r.push(n),!i&&r.push(o.now()+c)),this._trimBuffer(),super.next(n)}_subscribe(n){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(n),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let c=0;c<o.length&&!n.closed;c+=r?1:2)n.next(o[c]);return this._checkFinalizedStatuses(n),t}_trimBuffer(){let{_bufferSize:n,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*n;if(n<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let c=t.now(),h=0;for(let g=1;g<r.length&&r[g]<=c;g+=2)h=g;h&&r.splice(0,h+1)}}};var Gu=class extends Ut{constructor(n,t){super()}schedule(n,t=0){return this}};var Sl={setInterval(e,n,...t){let{delegate:r}=Sl;return r?.setInterval?r.setInterval(e,n,...t):setInterval(e,n,...t)},clearInterval(e){let{delegate:n}=Sl;return(n?.clearInterval||clearInterval)(e)},delegate:void 0};var $u=class extends Gu{constructor(n,t){super(n,t),this.scheduler=n,this.work=t,this.pending=!1}schedule(n,t=0){var r;if(this.closed)return this;this.state=n;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(n,t,r=0){return Sl.setInterval(n.flush.bind(n,this),r)}recycleAsyncId(n,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&Sl.clearInterval(t)}execute(n,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(n,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(n,t){let r=!1,i;try{this.work(n)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:n,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Go(r,this),n!=null&&(this.id=this.recycleAsyncId(t,n,null)),this.delay=null,super.unsubscribe()}}};var Ys=class e{constructor(n,t=e.now){this.schedulerActionCtor=n,this.now=t}schedule(n,t=0,r){return new this.schedulerActionCtor(this,n).schedule(r,t)}};Ys.now=Il.now;var qu=class extends Ys{constructor(n,t=Ys.now){super(n,t),this.actions=[],this._active=!1}flush(n){let{actions:t}=this;if(this._active){t.push(n);return}let r;this._active=!0;do if(r=n.execute(n.state,n.delay))break;while(n=t.shift());if(this._active=!1,r){for(;n=t.shift();)n.unsubscribe();throw r}}};var qT=new qu($u),xw=qT;var lr=new Ue(e=>e.complete());function Yu(e){return e&&Te(e.schedule)}function Ew(e){return e[e.length-1]}function Xu(e){return Te(Ew(e))?e.pop():void 0}function so(e){return Yu(Ew(e))?e.pop():void 0}function Sw(e,n,t,r){function i(o){return o instanceof t?o:new t(function(c){c(o)})}return new(t||(t=Promise))(function(o,c){function h(v){try{m(r.next(v))}catch(b){c(b)}}function g(v){try{m(r.throw(v))}catch(b){c(b)}}function m(v){v.done?o(v.value):i(v.value).then(h,g)}m((r=r.apply(e,n||[])).next())})}function Iw(e){var n=typeof Symbol=="function"&&Symbol.iterator,t=n&&e[n],r=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}function Xo(e){return this instanceof Xo?(this.v=e,this):new Xo(e)}function Dw(e,n,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(e,n||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),h("next"),h("throw"),h("return",c),i[Symbol.asyncIterator]=function(){return this},i;function c(M){return function(R){return Promise.resolve(R).then(M,b)}}function h(M,R){r[M]&&(i[M]=function(H){return new Promise(function(X,$){o.push([M,H,X,$])>1||g(M,H)})},R&&(i[M]=R(i[M])))}function g(M,R){try{m(r[M](R))}catch(H){I(o[0][3],H)}}function m(M){M.value instanceof Xo?Promise.resolve(M.value.v).then(v,b):I(o[0][2],M)}function v(M){g("next",M)}function b(M){g("throw",M)}function I(M,R){M(R),o.shift(),o.length&&g(o[0][0],o[0][1])}}function Mw(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=e[Symbol.asyncIterator],t;return n?n.call(e):(e=typeof Iw=="function"?Iw(e):e[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=e[o]&&function(c){return new Promise(function(h,g){c=e[o](c),i(h,g,c.done,c.value)})}}function i(o,c,h,g){Promise.resolve(g).then(function(m){o({value:m,done:h})},c)}}var Zu=e=>e&&typeof e.length=="number"&&typeof e!="function";function Qu(e){return Te(e?.then)}function Ku(e){return Te(e[Gs])}function Ju(e){return Symbol.asyncIterator&&Te(e?.[Symbol.asyncIterator])}function ed(e){return new TypeError(`You provided ${e!==null&&typeof e=="object"?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function YT(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var td=YT();function nd(e){return Te(e?.[td])}function rd(e){return Dw(this,arguments,function*(){let t=e.getReader();try{for(;;){let{value:r,done:i}=yield Xo(t.read());if(i)return yield Xo(void 0);yield yield Xo(r)}}finally{t.releaseLock()}})}function id(e){return Te(e?.getReader)}function Xt(e){if(e instanceof Ue)return e;if(e!=null){if(Ku(e))return XT(e);if(Zu(e))return ZT(e);if(Qu(e))return QT(e);if(Ju(e))return Aw(e);if(nd(e))return KT(e);if(id(e))return JT(e)}throw ed(e)}function XT(e){return new Ue(n=>{let t=e[Gs]();if(Te(t.subscribe))return t.subscribe(n);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function ZT(e){return new Ue(n=>{for(let t=0;t<e.length&&!n.closed;t++)n.next(e[t]);n.complete()})}function QT(e){return new Ue(n=>{e.then(t=>{n.closed||(n.next(t),n.complete())},t=>n.error(t)).then(null,Hu)})}function KT(e){return new Ue(n=>{for(let t of e)if(n.next(t),n.closed)return;n.complete()})}function Aw(e){return new Ue(n=>{eO(e,n).catch(t=>n.error(t))})}function JT(e){return Aw(rd(e))}function eO(e,n){var t,r,i,o;return Sw(this,void 0,void 0,function*(){try{for(t=Mw(e);r=yield t.next(),!r.done;){let c=r.value;if(n.next(c),n.closed)return}}catch(c){i={error:c}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}n.complete()})}function Kn(e,n,t,r=0,i=!1){let o=n.schedule(function(){t(),i?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(o),!i)return o}function od(e,n=0){return Je((t,r)=>{t.subscribe(Xe(r,i=>Kn(r,e,()=>r.next(i),n),()=>Kn(r,e,()=>r.complete(),n),i=>Kn(r,e,()=>r.error(i),n)))})}function sd(e,n=0){return Je((t,r)=>{r.add(e.schedule(()=>t.subscribe(r),n))})}function Tw(e,n){return Xt(e).pipe(sd(n),od(n))}function Ow(e,n){return Xt(e).pipe(sd(n),od(n))}function Nw(e,n){return new Ue(t=>{let r=0;return n.schedule(function(){r===e.length?t.complete():(t.next(e[r++]),t.closed||this.schedule())})})}function Rw(e,n){return new Ue(t=>{let r;return Kn(t,n,()=>{r=e[td](),Kn(t,n,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(c){t.error(c);return}o?t.complete():t.next(i)},0,!0)}),()=>Te(r?.return)&&r.return()})}function ad(e,n){if(!e)throw new Error("Iterable cannot be null");return new Ue(t=>{Kn(t,n,()=>{let r=e[Symbol.asyncIterator]();Kn(t,n,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function Pw(e,n){return ad(rd(e),n)}function kw(e,n){if(e!=null){if(Ku(e))return Tw(e,n);if(Zu(e))return Nw(e,n);if(Qu(e))return Ow(e,n);if(Ju(e))return ad(e,n);if(nd(e))return Rw(e,n);if(id(e))return Pw(e,n)}throw ed(e)}function Et(e,n){return n?kw(e,n):Xt(e)}function Ae(...e){let n=so(e);return Et(e,n)}function Xs(e,n){let t=Te(e)?e:()=>e,r=i=>i.error(t());return new Ue(n?i=>n.schedule(r,0,i):r)}function lg(e){return!!e&&(e instanceof Ue||Te(e.lift)&&Te(e.subscribe))}var Ei=js(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"});function Fw(e){return e instanceof Date&&!isNaN(e)}function Ve(e,n){return Je((t,r)=>{let i=0;t.subscribe(Xe(r,o=>{r.next(e.call(n,o,i++))}))})}var{isArray:tO}=Array;function nO(e,n){return tO(n)?e(...n):e(n)}function ld(e){return Ve(n=>nO(e,n))}var{isArray:rO}=Array,{getPrototypeOf:iO,prototype:oO,keys:sO}=Object;function cd(e){if(e.length===1){let n=e[0];if(rO(n))return{args:n,keys:null};if(aO(n)){let t=sO(n);return{args:t.map(r=>n[r]),keys:t}}}return{args:e,keys:null}}function aO(e){return e&&typeof e=="object"&&iO(e)===oO}function ud(e,n){return e.reduce((t,r,i)=>(t[r]=n[i],t),{})}function dd(...e){let n=so(e),t=Xu(e),{args:r,keys:i}=cd(e);if(r.length===0)return Et([],n);let o=new Ue(lO(r,n,i?c=>ud(i,c):ar));return t?o.pipe(ld(t)):o}function lO(e,n,t=ar){return r=>{Lw(n,()=>{let{length:i}=e,o=new Array(i),c=i,h=i;for(let g=0;g<i;g++)Lw(n,()=>{let m=Et(e[g],n),v=!1;m.subscribe(Xe(r,b=>{o[g]=b,v||(v=!0,h--),h||r.next(t(o.slice()))},()=>{--c||r.complete()}))},r)},r)}}function Lw(e,n,t){e?Kn(t,e,n):n()}function Bw(e,n,t,r,i,o,c,h){let g=[],m=0,v=0,b=!1,I=()=>{b&&!g.length&&!m&&n.complete()},M=H=>m<r?R(H):g.push(H),R=H=>{o&&n.next(H),m++;let X=!1;Xt(t(H,v++)).subscribe(Xe(n,$=>{i?.($),o?M($):n.next($)},()=>{X=!0},void 0,()=>{if(X)try{for(m--;g.length&&m<r;){let $=g.shift();c?Kn(n,c,()=>R($)):R($)}I()}catch($){n.error($)}}))};return e.subscribe(Xe(n,M,()=>{b=!0,I()})),()=>{h?.()}}function on(e,n,t=1/0){return Te(n)?on((r,i)=>Ve((o,c)=>n(r,o,i,c))(Xt(e(r,i))),t):(typeof n=="number"&&(t=n),Je((r,i)=>Bw(r,i,e,t)))}function cg(e=1/0){return on(ar,e)}function Uw(){return cg(1)}function Zs(...e){return Uw()(Et(e,so(e)))}function fd(e){return new Ue(n=>{Xt(e()).subscribe(n)})}function ug(...e){let n=Xu(e),{args:t,keys:r}=cd(e),i=new Ue(o=>{let{length:c}=t;if(!c){o.complete();return}let h=new Array(c),g=c,m=c;for(let v=0;v<c;v++){let b=!1;Xt(t[v]).subscribe(Xe(o,I=>{b||(b=!0,m--),h[v]=I},()=>g--,void 0,()=>{(!g||!b)&&(m||o.next(r?ud(r,h):h),o.complete())}))}});return n?i.pipe(ld(n)):i}function dg(e=0,n,t=xw){let r=-1;return n!=null&&(Yu(n)?t=n:r=n),new Ue(i=>{let o=Fw(e)?+e-t.now():e;o<0&&(o=0);let c=0;return t.schedule(function(){i.closed||(i.next(c++),0<=r?this.schedule(void 0,r):i.complete())},o)})}function _r(e,n){return Je((t,r)=>{let i=0;t.subscribe(Xe(r,o=>e.call(n,o,i++)&&r.next(o)))})}function wr(e){return Je((n,t)=>{let r=null,i=!1,o;r=n.subscribe(Xe(t,void 0,void 0,c=>{o=Xt(e(c,wr(e)(n))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function Vw(e,n,t,r,i){return(o,c)=>{let h=t,g=n,m=0;o.subscribe(Xe(c,v=>{let b=m++;g=h?e(g,v,b):(h=!0,v),r&&c.next(g)},i&&(()=>{h&&c.next(g),c.complete()})))}}function Zo(e,n){return Te(n)?on(e,n,1):on(e,1)}function ao(e){return Je((n,t)=>{let r=!1;n.subscribe(Xe(t,i=>{r=!0,t.next(i)},()=>{r||t.next(e),t.complete()}))})}function Ii(e){return e<=0?()=>lr:Je((n,t)=>{let r=0;n.subscribe(Xe(t,i=>{++r<=e&&(t.next(i),e<=r&&t.complete())}))})}function fg(e){return Ve(()=>e)}function hd(e=cO){return Je((n,t)=>{let r=!1;n.subscribe(Xe(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(e())))})}function cO(){return new Ei}function Qs(e){return Je((n,t)=>{try{n.subscribe(t)}finally{t.add(e)}})}function Vr(e,n){let t=arguments.length>=2;return r=>r.pipe(e?_r((i,o)=>e(i,o,r)):ar,Ii(1),t?ao(n):hd(()=>new Ei))}function Ks(e){return e<=0?()=>lr:Je((n,t)=>{let r=[];n.subscribe(Xe(t,i=>{r.push(i),e<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function hg(e,n){let t=arguments.length>=2;return r=>r.pipe(e?_r((i,o)=>e(i,o,r)):ar,Ks(1),t?ao(n):hd(()=>new Ei))}function pg(e,n){return Je(Vw(e,n,arguments.length>=2,!0))}function gg(...e){let n=so(e);return Je((t,r)=>{(n?Zs(e,t,n):Zs(e,t)).subscribe(r)})}function vr(e,n){return Je((t,r)=>{let i=null,o=0,c=!1,h=()=>c&&!i&&r.complete();t.subscribe(Xe(r,g=>{i?.unsubscribe();let m=0,v=o++;Xt(e(g,v)).subscribe(i=Xe(r,b=>r.next(n?n(g,b,v,m++):b),()=>{i=null,h()}))},()=>{c=!0,h()}))})}function mg(e){return Je((n,t)=>{Xt(e).subscribe(Xe(t,()=>t.complete(),El)),!t.closed&&n.subscribe(t)})}function sn(e,n,t){let r=Te(e)||n||t?{next:e,error:n,complete:t}:e;return r?Je((i,o)=>{var c;(c=r.subscribe)===null||c===void 0||c.call(r);let h=!0;i.subscribe(Xe(o,g=>{var m;(m=r.next)===null||m===void 0||m.call(r,g),o.next(g)},()=>{var g;h=!1,(g=r.complete)===null||g===void 0||g.call(r),o.complete()},g=>{var m;h=!1,(m=r.error)===null||m===void 0||m.call(r,g),o.error(g)},()=>{var g,m;h&&((g=r.unsubscribe)===null||g===void 0||g.call(r)),(m=r.finalize)===null||m===void 0||m.call(r)}))}):ar}var Tv="https://g.co/ng/security#xss",de=class extends Error{constructor(n,t){super(nf(n,t)),this.code=n}};function nf(e,n){return`${`NG0${Math.abs(e)}`}${n?": "+n:""}`}function jl(e){return{toString:e}.toString()}var pd="__parameters__";function uO(e){return function(...t){if(e){let r=e(...t);for(let i in r)this[i]=r[i]}}}function Ov(e,n,t){return jl(()=>{let r=uO(n);function i(...o){if(this instanceof i)return r.apply(this,o),this;let c=new i(...o);return h.annotation=c,h;function h(g,m,v){let b=g.hasOwnProperty(pd)?g[pd]:Object.defineProperty(g,pd,{value:[]})[pd];for(;b.length<=v;)b.push(null);return(b[v]=b[v]||[]).push(c),g}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=e,i.annotationCls=i,i})}var Rg=globalThis;function It(e){for(let n in e)if(e[n]===It)return n;throw Error("Could not find renamed property on target object.")}function dO(e,n){for(let t in n)n.hasOwnProperty(t)&&!e.hasOwnProperty(t)&&(e[t]=n[t])}function jn(e){if(typeof e=="string")return e;if(Array.isArray(e))return"["+e.map(jn).join(", ")+"]";if(e==null)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;let n=e.toString();if(n==null)return""+n;let t=n.indexOf(`
`);return t===-1?n:n.substring(0,t)}function Pg(e,n){return e==null||e===""?n===null?"":n:n==null||n===""?e:e+" "+n}var fO=It({__forward_ref__:It});function Oi(e){return e.__forward_ref__=Oi,e.toString=function(){return jn(this())},e}function Un(e){return Nv(e)?e():e}function Nv(e){return typeof e=="function"&&e.hasOwnProperty(fO)&&e.__forward_ref__===Oi}function fe(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function Ni(e){return{providers:e.providers||[],imports:e.imports||[]}}function rf(e){return jw(e,Pv)||jw(e,kv)}function Rv(e){return rf(e)!==null}function jw(e,n){return e.hasOwnProperty(n)?e[n]:null}function hO(e){let n=e&&(e[Pv]||e[kv]);return n||null}function Hw(e){return e&&(e.hasOwnProperty(zw)||e.hasOwnProperty(pO))?e[zw]:null}var Pv=It({\u0275prov:It}),zw=It({\u0275inj:It}),kv=It({ngInjectableDef:It}),pO=It({ngInjectorDef:It}),ve=class{constructor(n,t){this._desc=n,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=fe({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Fv(e){return e&&!!e.\u0275providers}var gO=It({\u0275cmp:It}),mO=It({\u0275dir:It}),yO=It({\u0275pipe:It}),CO=It({\u0275mod:It}),Ad=It({\u0275fac:It}),Al=It({__NG_ELEMENT_ID__:It}),Ww=It({__NG_ENV_ID__:It});function Qo(e){return typeof e=="string"?e:e==null?"":String(e)}function _O(e){return typeof e=="function"?e.name||e.toString():typeof e=="object"&&e!=null&&typeof e.type=="function"?e.type.name||e.type.toString():Qo(e)}function wO(e,n){let t=n?`. Dependency path: ${n.join(" > ")} > ${e}`:"";throw new de(-200,e)}function Y0(e,n){throw new de(-201,!1)}var He=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}(He||{}),kg;function Lv(){return kg}function br(e){let n=kg;return kg=e,n}function Bv(e,n,t){let r=rf(e);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&He.Optional)return null;if(n!==void 0)return n;Y0(e,"Injector")}var vO={},Tl=vO,Fg="__NG_DI_FLAG__",Td="ngTempTokenPath",bO="ngTokenPath",xO=/\n/gm,EO="\u0275",Gw="__source",na;function IO(){return na}function lo(e){let n=na;return na=e,n}function SO(e,n=He.Default){if(na===void 0)throw new de(-203,!1);return na===null?Bv(e,void 0,n):na.get(e,n&He.Optional?null:void 0,n)}function ze(e,n=He.Default){return(Lv()||SO)(Un(e),n)}function te(e,n=He.Default){return ze(e,of(n))}function of(e){return typeof e>"u"||typeof e=="number"?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function Lg(e){let n=[];for(let t=0;t<e.length;t++){let r=Un(e[t]);if(Array.isArray(r)){if(r.length===0)throw new de(900,!1);let i,o=He.Default;for(let c=0;c<r.length;c++){let h=r[c],g=DO(h);typeof g=="number"?g===-1?i=h.token:o|=g:i=h}n.push(ze(i,o))}else n.push(ze(r))}return n}function Uv(e,n){return e[Fg]=n,e.prototype[Fg]=n,e}function DO(e){return e[Fg]}function MO(e,n,t,r){let i=e[Td];throw n[Gw]&&i.unshift(n[Gw]),e.message=AO(`
`+e.message,i,t,r),e[bO]=i,e[Td]=null,e}function AO(e,n,t,r=null){e=e&&e.charAt(0)===`
`&&e.charAt(1)==EO?e.slice(2):e;let i=jn(n);if(Array.isArray(n))i=n.map(jn).join(" -> ");else if(typeof n=="object"){let o=[];for(let c in n)if(n.hasOwnProperty(c)){let h=n[c];o.push(c+":"+(typeof h=="string"?JSON.stringify(h):jn(h)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${e.replace(xO,`
  `)}`}var sf=Uv(Ov("Optional"),8);var X0=Uv(Ov("SkipSelf"),4);function ia(e,n){let t=e.hasOwnProperty(Ad);return t?e[Ad]:null}function TO(e,n,t){if(e.length!==n.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],o=n[r];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}function OO(e){return e.flat(Number.POSITIVE_INFINITY)}function Z0(e,n){e.forEach(t=>Array.isArray(t)?Z0(t,n):n(t))}function Vv(e,n,t){n>=e.length?e.push(t):e.splice(n,0,t)}function Od(e,n){return n>=e.length-1?e.pop():e.splice(n,1)[0]}function NO(e,n,t,r){let i=e.length;if(i==n)e.push(t,r);else if(i===1)e.push(r,e[0]),e[0]=t;else{for(i--,e.push(e[i-1],e[i]);i>n;){let o=i-2;e[i]=e[o],i--}e[n]=t,e[n+1]=r}}function Q0(e,n,t){let r=Hl(e,n);return r>=0?e[r|1]=t:(r=~r,NO(e,r,n,t)),r}function yg(e,n){let t=Hl(e,n);if(t>=0)return e[t|1]}function Hl(e,n){return RO(e,n,1)}function RO(e,n,t){let r=0,i=e.length>>t;for(;i!==r;){let o=r+(i-r>>1),c=e[o<<t];if(n===c)return o<<t;c>n?i=o:r=o+1}return~(i<<t)}var oa={},Vn=[],Jo=new ve(""),jv=new ve("",-1),Hv=new ve(""),Nd=class{get(n,t=Tl){if(t===Tl){let r=new Error(`NullInjectorError: No provider for ${jn(n)}!`);throw r.name="NullInjectorError",r}return t}},zv=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}(zv||{}),si=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}(si||{}),uo=function(e){return e[e.None=0]="None",e[e.SignalBased=1]="SignalBased",e[e.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",e}(uo||{});function PO(e,n,t){let r=e.length;for(;;){let i=e.indexOf(n,t);if(i===-1)return i;if(i===0||e.charCodeAt(i-1)<=32){let o=n.length;if(i+o===r||e.charCodeAt(i+o)<=32)return i}t=i+1}}function Bg(e,n,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],c=t[r++],h=t[r++];e.setAttribute(n,c,h,o)}else{let o=i,c=t[++r];FO(o)?e.setProperty(n,o,c):e.setAttribute(n,o,c),r++}}return r}function kO(e){return e===3||e===4||e===6}function FO(e){return e.charCodeAt(0)===64}function Ol(e,n){if(!(n===null||n.length===0))if(e===null||e.length===0)e=n.slice();else{let t=-1;for(let r=0;r<n.length;r++){let i=n[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?$w(e,t,i,null,n[++r]):$w(e,t,i,null,null))}}return e}function $w(e,n,t,r,i){let o=0,c=e.length;if(n===-1)c=-1;else for(;o<e.length;){let h=e[o++];if(typeof h=="number"){if(h===n){c=-1;break}else if(h>n){c=o-1;break}}}for(;o<e.length;){let h=e[o];if(typeof h=="number")break;if(h===t){if(r===null){i!==null&&(e[o+1]=i);return}else if(r===e[o+1]){e[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}c!==-1&&(e.splice(c,0,n),o=c+1),e.splice(o++,0,t),r!==null&&e.splice(o++,0,r),i!==null&&e.splice(o++,0,i)}var Wv="ng-template";function LO(e,n,t,r){let i=0;if(r){for(;i<n.length&&typeof n[i]=="string";i+=2)if(n[i]==="class"&&PO(n[i+1].toLowerCase(),t,0)!==-1)return!0}else if(K0(e))return!1;if(i=n.indexOf(1,i),i>-1){let o;for(;++i<n.length&&typeof(o=n[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function K0(e){return e.type===4&&e.value!==Wv}function BO(e,n,t){let r=e.type===4&&!t?Wv:e.value;return n===r}function UO(e,n,t){let r=4,i=e.attrs,o=i!==null?HO(i):0,c=!1;for(let h=0;h<n.length;h++){let g=n[h];if(typeof g=="number"){if(!c&&!jr(r)&&!jr(g))return!1;if(c&&jr(g))continue;c=!1,r=g|r&1;continue}if(!c)if(r&4){if(r=2|r&1,g!==""&&!BO(e,g,t)||g===""&&n.length===1){if(jr(r))return!1;c=!0}}else if(r&8){if(i===null||!LO(e,i,g,t)){if(jr(r))return!1;c=!0}}else{let m=n[++h],v=VO(g,i,K0(e),t);if(v===-1){if(jr(r))return!1;c=!0;continue}if(m!==""){let b;if(v>o?b="":b=i[v+1].toLowerCase(),r&2&&m!==b){if(jr(r))return!1;c=!0}}}}return jr(r)||c}function jr(e){return(e&1)===0}function VO(e,n,t,r){if(n===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<n.length;){let c=n[i];if(c===e)return i;if(c===3||c===6)o=!0;else if(c===1||c===2){let h=n[++i];for(;typeof h=="string";)h=n[++i];continue}else{if(c===4)break;if(c===0){i+=4;continue}}i+=o?1:2}return-1}else return zO(n,e)}function jO(e,n,t=!1){for(let r=0;r<n.length;r++)if(UO(e,n[r],t))return!0;return!1}function HO(e){for(let n=0;n<e.length;n++){let t=e[n];if(kO(t))return n}return e.length}function zO(e,n){let t=e.indexOf(4);if(t>-1)for(t++;t<e.length;){let r=e[t];if(typeof r=="number")return-1;if(r===n)return t;t++}return-1}function qw(e,n){return e?":not("+n.trim()+")":n}function WO(e){let n=e[0],t=1,r=2,i="",o=!1;for(;t<e.length;){let c=e[t];if(typeof c=="string")if(r&2){let h=e[++t];i+="["+c+(h.length>0?'="'+h+'"':"")+"]"}else r&8?i+="."+c:r&4&&(i+=" "+c);else i!==""&&!jr(c)&&(n+=qw(o,i),i=""),r=c,o=o||!jr(r);t++}return i!==""&&(n+=qw(o,i)),n}function GO(e){return e.map(WO).join(",")}function $O(e){let n=[],t=[],r=1,i=2;for(;r<e.length;){let o=e[r];if(typeof o=="string")i===2?o!==""&&n.push(o,e[++r]):i===8&&t.push(o);else{if(!jr(i))break;i=o}r++}return{attrs:n,classes:t}}function oe(e){return jl(()=>{let n=Xv(e),t=Be(re({},n),{decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===zv.OnPush,directiveDefs:null,pipeDefs:null,dependencies:n.standalone&&e.dependencies||null,getStandaloneInjector:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||si.Emulated,styles:e.styles||Vn,_:null,schemas:e.schemas||null,tView:null,id:""});Zv(t);let r=e.dependencies;return t.directiveDefs=Xw(r,!1),t.pipeDefs=Xw(r,!0),t.id=XO(t),t})}function qO(e){return es(e)||Gv(e)}function YO(e){return e!==null}function Ri(e){return jl(()=>({type:e.type,bootstrap:e.bootstrap||Vn,declarations:e.declarations||Vn,imports:e.imports||Vn,exports:e.exports||Vn,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function Yw(e,n){if(e==null)return oa;let t={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r],o,c,h=uo.None;Array.isArray(i)?(h=i[0],o=i[1],c=i[2]??o):(o=i,c=i),n?(t[o]=h!==uo.None?[r,h]:r,n[o]=c):t[o]=r}return t}function $t(e){return jl(()=>{let n=Xv(e);return Zv(n),n})}function es(e){return e[gO]||null}function Gv(e){return e[mO]||null}function $v(e){return e[yO]||null}function qv(e){let n=es(e)||Gv(e)||$v(e);return n!==null?n.standalone:!1}function Yv(e,n){let t=e[CO]||null;if(!t&&n===!0)throw new Error(`Type ${jn(e)} does not have '\u0275mod' property.`);return t}function Xv(e){let n={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:n,inputTransforms:null,inputConfig:e.inputs||oa,exportAs:e.exportAs||null,standalone:e.standalone===!0,signals:e.signals===!0,selectors:e.selectors||Vn,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Yw(e.inputs,n),outputs:Yw(e.outputs),debugInfo:null}}function Zv(e){e.features?.forEach(n=>n(e))}function Xw(e,n){if(!e)return null;let t=n?$v:qO;return()=>(typeof e=="function"?e():e).map(r=>t(r)).filter(YO)}function XO(e){let n=0,t=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,e.consts,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery].join("|");for(let i of t)n=Math.imul(31,n)+i.charCodeAt(0)<<0;return n+=2147483648,"c"+n}function ha(e){return{\u0275providers:e}}function ZO(...e){return{\u0275providers:Qv(!0,e),\u0275fromNgModule:!0}}function Qv(e,...n){let t=[],r=new Set,i,o=c=>{t.push(c)};return Z0(n,c=>{let h=c;Ug(h,o,[],r)&&(i||=[],i.push(h))}),i!==void 0&&Kv(i,o),t}function Kv(e,n){for(let t=0;t<e.length;t++){let{ngModule:r,providers:i}=e[t];J0(i,o=>{n(o,r)})}}function Ug(e,n,t,r){if(e=Un(e),!e)return!1;let i=null,o=Hw(e),c=!o&&es(e);if(!o&&!c){let g=e.ngModule;if(o=Hw(g),o)i=g;else return!1}else{if(c&&!c.standalone)return!1;i=e}let h=r.has(i);if(c){if(h)return!1;if(r.add(i),c.dependencies){let g=typeof c.dependencies=="function"?c.dependencies():c.dependencies;for(let m of g)Ug(m,n,t,r)}}else if(o){if(o.imports!=null&&!h){r.add(i);let m;try{Z0(o.imports,v=>{Ug(v,n,t,r)&&(m||=[],m.push(v))})}finally{}m!==void 0&&Kv(m,n)}if(!h){let m=ia(i)||(()=>new i);n({provide:i,useFactory:m,deps:Vn},i),n({provide:Hv,useValue:i,multi:!0},i),n({provide:Jo,useValue:()=>ze(i),multi:!0},i)}let g=o.providers;if(g!=null&&!h){let m=e;J0(g,v=>{n(v,m)})}}else return!1;return i!==e&&e.providers!==void 0}function J0(e,n){for(let t of e)Fv(t)&&(t=t.\u0275providers),Array.isArray(t)?J0(t,n):n(t)}var QO=It({provide:String,useValue:It});function Jv(e){return e!==null&&typeof e=="object"&&QO in e}function KO(e){return!!(e&&e.useExisting)}function JO(e){return!!(e&&e.useFactory)}function sa(e){return typeof e=="function"}function eN(e){return!!e.useClass}var af=new ve(""),xd={},tN={},Cg;function em(){return Cg===void 0&&(Cg=new Nd),Cg}var Er=class{},Nl=class extends Er{get destroyed(){return this._destroyed}constructor(n,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,jg(n,c=>this.processProvider(c)),this.records.set(jv,Js(void 0,this)),i.has("environment")&&this.records.set(Er,Js(void 0,this));let o=this.records.get(af);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Hv,Vn,He.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let n=qe(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),qe(n)}}onDestroy(n){return this.assertNotDestroyed(),this._onDestroyHooks.push(n),()=>this.removeOnDestroy(n)}runInContext(n){this.assertNotDestroyed();let t=lo(this),r=br(void 0),i;try{return n()}finally{lo(t),br(r)}}get(n,t=Tl,r=He.Default){if(this.assertNotDestroyed(),n.hasOwnProperty(Ww))return n[Ww](this);r=of(r);let i,o=lo(this),c=br(void 0);try{if(!(r&He.SkipSelf)){let g=this.records.get(n);if(g===void 0){let m=sN(n)&&rf(n);m&&this.injectableDefInScope(m)?g=Js(Vg(n),xd):g=null,this.records.set(n,g)}if(g!=null)return this.hydrate(n,g)}let h=r&He.Self?em():this.parent;return t=r&He.Optional&&t===Tl?null:t,h.get(n,t)}catch(h){if(h.name==="NullInjectorError"){if((h[Td]=h[Td]||[]).unshift(jn(n)),o)throw h;return MO(h,n,"R3InjectorError",this.source)}else throw h}finally{br(c),lo(o)}}resolveInjectorInitializers(){let n=qe(null),t=lo(this),r=br(void 0),i;try{let o=this.get(Jo,Vn,He.Self);for(let c of o)c()}finally{lo(t),br(r),qe(n)}}toString(){let n=[],t=this.records;for(let r of t.keys())n.push(jn(r));return`R3Injector[${n.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new de(205,!1)}processProvider(n){n=Un(n);let t=sa(n)?n:Un(n&&n.provide),r=rN(n);if(!sa(n)&&n.multi===!0){let i=this.records.get(t);i||(i=Js(void 0,xd,!0),i.factory=()=>Lg(i.multi),this.records.set(t,i)),t=n,i.multi.push(n)}this.records.set(t,r)}hydrate(n,t){let r=qe(null);try{return t.value===xd&&(t.value=tN,t.value=t.factory()),typeof t.value=="object"&&t.value&&oN(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{qe(r)}}injectableDefInScope(n){if(!n.providedIn)return!1;let t=Un(n.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(n){let t=this._onDestroyHooks.indexOf(n);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Vg(e){let n=rf(e),t=n!==null?n.factory:ia(e);if(t!==null)return t;if(e instanceof ve)throw new de(204,!1);if(e instanceof Function)return nN(e);throw new de(204,!1)}function nN(e){if(e.length>0)throw new de(204,!1);let t=hO(e);return t!==null?()=>t.factory(e):()=>new e}function rN(e){if(Jv(e))return Js(void 0,e.useValue);{let n=eb(e);return Js(n,xd)}}function eb(e,n,t){let r;if(sa(e)){let i=Un(e);return ia(i)||Vg(i)}else if(Jv(e))r=()=>Un(e.useValue);else if(JO(e))r=()=>e.useFactory(...Lg(e.deps||[]));else if(KO(e))r=()=>ze(Un(e.useExisting));else{let i=Un(e&&(e.useClass||e.provide));if(iN(e))r=()=>new i(...Lg(e.deps));else return ia(i)||Vg(i)}return r}function Js(e,n,t=!1){return{factory:e,value:n,multi:t?[]:void 0}}function iN(e){return!!e.deps}function oN(e){return e!==null&&typeof e=="object"&&typeof e.ngOnDestroy=="function"}function sN(e){return typeof e=="function"||typeof e=="object"&&e instanceof ve}function jg(e,n){for(let t of e)Array.isArray(t)?jg(t,n):t&&Fv(t)?jg(t.\u0275providers,n):n(t)}function ci(e,n){e instanceof Nl&&e.assertNotDestroyed();let t,r=lo(e),i=br(void 0);try{return n()}finally{lo(r),br(i)}}function aN(){return Lv()!==void 0||IO()!=null}function lN(e){return typeof e=="function"}var cr=0,De=1,Se=2,Dn=3,zr=4,Yr=5,Gr=6,Rd=7,kn=8,aa=9,Si=10,Nt=11,Rl=12,Zw=13,pa=14,ur=15,ts=16,ea=17,Di=18,lf=19,tb=20,co=21,_g=22,xr=23,an=25,nb=1,Pl=6,Mi=7,Pd=8,la=9,Sn=10,kd=function(e){return e[e.None=0]="None",e[e.HasTransplantedViews=2]="HasTransplantedViews",e}(kd||{});function Wr(e){return Array.isArray(e)&&typeof e[nb]=="object"}function ui(e){return Array.isArray(e)&&e[nb]===!0}function tm(e){return(e.flags&4)!==0}function zl(e){return e.componentOffset>-1}function cf(e){return(e.flags&1)===1}function fo(e){return!!e.template}function Fd(e){return(e[Se]&512)!==0}var Hg=class{constructor(n,t,r){this.previousValue=n,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function rb(e,n,t,r){n!==null?n.applyValueToInputSignal(n,r):e[t]=r}function Pi(){return ib}function ib(e){return e.type.prototype.ngOnChanges&&(e.setInput=uN),cN}Pi.ngInherit=!0;function cN(){let e=sb(this),n=e?.current;if(n){let t=e.previous;if(t===oa)e.previous=n;else for(let r in n)t[r]=n[r];e.current=null,this.ngOnChanges(n)}}function uN(e,n,t,r,i){let o=this.declaredInputs[r],c=sb(e)||dN(e,{previous:oa,current:null}),h=c.current||(c.current={}),g=c.previous,m=g[o];h[o]=new Hg(m&&m.currentValue,t,g===oa),rb(e,n,i,t)}var ob="__ngSimpleChanges__";function sb(e){return e[ob]||null}function dN(e,n){return e[ob]=n}var Qw=null;var ii=function(e,n,t){Qw?.(e,n,t)},fN="svg",hN="math";function $r(e){for(;Array.isArray(e);)e=e[cr];return e}function ab(e,n){return $r(n[e])}function dr(e,n){return $r(n[e.index])}function nm(e,n){return e.data[n]}function pN(e,n){return e[n]}function mo(e,n){let t=n[e];return Wr(t)?t:t[cr]}function gN(e){return(e[Se]&4)===4}function rm(e){return(e[Se]&128)===128}function mN(e){return ui(e[Dn])}function ho(e,n){return n==null?null:e[n]}function lb(e){e[ea]=0}function cb(e){e[Se]&1024||(e[Se]|=1024,rm(e)&&df(e))}function yN(e,n){for(;e>0;)n=n[pa],e--;return n}function uf(e){return!!(e[Se]&9216||e[xr]?.dirty)}function zg(e){e[Si].changeDetectionScheduler?.notify(8),e[Se]&64&&(e[Se]|=1024),uf(e)&&df(e)}function df(e){e[Si].changeDetectionScheduler?.notify(0);let n=ns(e);for(;n!==null&&!(n[Se]&8192||(n[Se]|=8192,!rm(n)));)n=ns(n)}function ub(e,n){if((e[Se]&256)===256)throw new de(911,!1);e[co]===null&&(e[co]=[]),e[co].push(n)}function CN(e,n){if(e[co]===null)return;let t=e[co].indexOf(n);t!==-1&&e[co].splice(t,1)}function ns(e){let n=e[Dn];return ui(n)?n[Dn]:n}var Pe={lFrame:_b(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var db=!1;function _N(){return Pe.lFrame.elementDepthCount}function wN(){Pe.lFrame.elementDepthCount++}function vN(){Pe.lFrame.elementDepthCount--}function fb(){return Pe.bindingsEnabled}function Wl(){return Pe.skipHydrationRootTNode!==null}function bN(e){return Pe.skipHydrationRootTNode===e}function xN(e){Pe.skipHydrationRootTNode=e}function EN(){Pe.skipHydrationRootTNode=null}function Ke(){return Pe.lFrame.lView}function ln(){return Pe.lFrame.tView}function Ct(e){return Pe.lFrame.contextLView=e,e[kn]}function _t(e){return Pe.lFrame.contextLView=null,e}function Hn(){let e=hb();for(;e!==null&&e.type===64;)e=e.parent;return e}function hb(){return Pe.lFrame.currentTNode}function IN(){let e=Pe.lFrame,n=e.currentTNode;return e.isParent?n:n.parent}function cs(e,n){let t=Pe.lFrame;t.currentTNode=e,t.isParent=n}function im(){return Pe.lFrame.isParent}function pb(){Pe.lFrame.isParent=!1}function SN(){return Pe.lFrame.contextLView}function gb(){return db}function Kw(e){db=e}function DN(){let e=Pe.lFrame,n=e.bindingRootIndex;return n===-1&&(n=e.bindingRootIndex=e.tView.bindingStartIndex),n}function MN(){return Pe.lFrame.bindingIndex}function AN(e){return Pe.lFrame.bindingIndex=e}function ga(){return Pe.lFrame.bindingIndex++}function om(e){let n=Pe.lFrame,t=n.bindingIndex;return n.bindingIndex=n.bindingIndex+e,t}function TN(){return Pe.lFrame.inI18n}function ON(e,n){let t=Pe.lFrame;t.bindingIndex=t.bindingRootIndex=e,Wg(n)}function NN(){return Pe.lFrame.currentDirectiveIndex}function Wg(e){Pe.lFrame.currentDirectiveIndex=e}function RN(e){let n=Pe.lFrame.currentDirectiveIndex;return n===-1?null:e[n]}function mb(){return Pe.lFrame.currentQueryIndex}function sm(e){Pe.lFrame.currentQueryIndex=e}function PN(e){let n=e[De];return n.type===2?n.declTNode:n.type===1?e[Yr]:null}function yb(e,n,t){if(t&He.SkipSelf){let i=n,o=e;for(;i=i.parent,i===null&&!(t&He.Host);)if(i=PN(o),i===null||(o=o[pa],i.type&10))break;if(i===null)return!1;n=i,e=o}let r=Pe.lFrame=Cb();return r.currentTNode=n,r.lView=e,!0}function am(e){let n=Cb(),t=e[De];Pe.lFrame=n,n.currentTNode=t.firstChild,n.lView=e,n.tView=t,n.contextLView=e,n.bindingIndex=t.bindingStartIndex,n.inI18n=!1}function Cb(){let e=Pe.lFrame,n=e===null?null:e.child;return n===null?_b(e):n}function _b(e){let n={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return e!==null&&(e.child=n),n}function wb(){let e=Pe.lFrame;return Pe.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}var vb=wb;function lm(){let e=wb();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function kN(e){return(Pe.lFrame.contextLView=yN(e,Pe.lFrame.contextLView))[kn]}function ki(){return Pe.lFrame.selectedIndex}function rs(e){Pe.lFrame.selectedIndex=e}function cm(){let e=Pe.lFrame;return nm(e.tView,e.selectedIndex)}function bb(){return Pe.lFrame.currentNamespace}var xb=!0;function ff(){return xb}function yo(e){xb=e}function FN(e,n,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=n.type.prototype;if(r){let c=ib(n);(t.preOrderHooks??=[]).push(e,c),(t.preOrderCheckHooks??=[]).push(e,c)}i&&(t.preOrderHooks??=[]).push(0-e,i),o&&((t.preOrderHooks??=[]).push(e,o),(t.preOrderCheckHooks??=[]).push(e,o))}function hf(e,n){for(let t=n.directiveStart,r=n.directiveEnd;t<r;t++){let o=e.data[t].type.prototype,{ngAfterContentInit:c,ngAfterContentChecked:h,ngAfterViewInit:g,ngAfterViewChecked:m,ngOnDestroy:v}=o;c&&(e.contentHooks??=[]).push(-t,c),h&&((e.contentHooks??=[]).push(t,h),(e.contentCheckHooks??=[]).push(t,h)),g&&(e.viewHooks??=[]).push(-t,g),m&&((e.viewHooks??=[]).push(t,m),(e.viewCheckHooks??=[]).push(t,m)),v!=null&&(e.destroyHooks??=[]).push(t,v)}}function Ed(e,n,t){Eb(e,n,3,t)}function Id(e,n,t,r){(e[Se]&3)===t&&Eb(e,n,t,r)}function wg(e,n){let t=e[Se];(t&3)===n&&(t&=16383,t+=1,e[Se]=t)}function Eb(e,n,t,r){let i=r!==void 0?e[ea]&65535:0,o=r??-1,c=n.length-1,h=0;for(let g=i;g<c;g++)if(typeof n[g+1]=="number"){if(h=n[g],r!=null&&h>=r)break}else n[g]<0&&(e[ea]+=65536),(h<o||o==-1)&&(LN(e,t,n,g),e[ea]=(e[ea]&4294901760)+g+2),g++}function Jw(e,n){ii(4,e,n);let t=qe(null);try{n.call(e)}finally{qe(t),ii(5,e,n)}}function LN(e,n,t,r){let i=t[r]<0,o=t[r+1],c=i?-t[r]:t[r],h=e[c];i?e[Se]>>14<e[ea]>>16&&(e[Se]&3)===n&&(e[Se]+=16384,Jw(h,o)):Jw(h,o)}var ra=-1,is=class{constructor(n,t,r){this.factory=n,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function BN(e){return e instanceof is}function UN(e){return(e.flags&8)!==0}function VN(e){return(e.flags&16)!==0}var vg={},Gg=class{constructor(n,t){this.injector=n,this.parentInjector=t}get(n,t,r){r=of(r);let i=this.injector.get(n,vg,r);return i!==vg||t===vg?i:this.parentInjector.get(n,t,r)}};function Ib(e){return e!==ra}function Ld(e){return e&32767}function jN(e){return e>>16}function Bd(e,n){let t=jN(e),r=n;for(;t>0;)r=r[pa],t--;return r}var $g=!0;function ev(e){let n=$g;return $g=e,n}var HN=256,Sb=HN-1,Db=5,zN=0,oi={};function WN(e,n,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(Al)&&(r=t[Al]),r==null&&(r=t[Al]=zN++);let i=r&Sb,o=1<<i;n.data[e+(i>>Db)]|=o}function Ud(e,n){let t=Mb(e,n);if(t!==-1)return t;let r=n[De];r.firstCreatePass&&(e.injectorIndex=n.length,bg(r.data,e),bg(n,null),bg(r.blueprint,null));let i=um(e,n),o=e.injectorIndex;if(Ib(i)){let c=Ld(i),h=Bd(i,n),g=h[De].data;for(let m=0;m<8;m++)n[o+m]=h[c+m]|g[c+m]}return n[o+8]=i,o}function bg(e,n){e.push(0,0,0,0,0,0,0,0,n)}function Mb(e,n){return e.injectorIndex===-1||e.parent&&e.parent.injectorIndex===e.injectorIndex||n[e.injectorIndex+8]===null?-1:e.injectorIndex}function um(e,n){if(e.parent&&e.parent.injectorIndex!==-1)return e.parent.injectorIndex;let t=0,r=null,i=n;for(;i!==null;){if(r=Rb(i),r===null)return ra;if(t++,i=i[pa],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return ra}function qg(e,n,t){WN(e,n,t)}function Ab(e,n,t){if(t&He.Optional||e!==void 0)return e;Y0(n,"NodeInjector")}function Tb(e,n,t,r){if(t&He.Optional&&r===void 0&&(r=null),!(t&(He.Self|He.Host))){let i=e[aa],o=br(void 0);try{return i?i.get(n,r,t&He.Optional):Bv(n,r,t&He.Optional)}finally{br(o)}}return Ab(r,n,t)}function Ob(e,n,t,r=He.Default,i){if(e!==null){if(n[Se]&2048&&!(r&He.Self)){let c=YN(e,n,t,r,oi);if(c!==oi)return c}let o=Nb(e,n,t,r,oi);if(o!==oi)return o}return Tb(n,t,r,i)}function Nb(e,n,t,r,i){let o=$N(t);if(typeof o=="function"){if(!yb(n,e,r))return r&He.Host?Ab(i,t,r):Tb(n,t,r,i);try{let c;if(c=o(r),c==null&&!(r&He.Optional))Y0(t);else return c}finally{vb()}}else if(typeof o=="number"){let c=null,h=Mb(e,n),g=ra,m=r&He.Host?n[ur][Yr]:null;for((h===-1||r&He.SkipSelf)&&(g=h===-1?um(e,n):n[h+8],g===ra||!nv(r,!1)?h=-1:(c=n[De],h=Ld(g),n=Bd(g,n)));h!==-1;){let v=n[De];if(tv(o,h,v.data)){let b=GN(h,n,t,c,r,m);if(b!==oi)return b}g=n[h+8],g!==ra&&nv(r,n[De].data[h+8]===m)&&tv(o,h,n)?(c=v,h=Ld(g),n=Bd(g,n)):h=-1}}return i}function GN(e,n,t,r,i,o){let c=n[De],h=c.data[e+8],g=r==null?zl(h)&&$g:r!=c&&(h.type&3)!==0,m=i&He.Host&&o===h,v=Sd(h,c,t,g,m);return v!==null?os(n,c,v,h):oi}function Sd(e,n,t,r,i){let o=e.providerIndexes,c=n.data,h=o&1048575,g=e.directiveStart,m=e.directiveEnd,v=o>>20,b=r?h:h+v,I=i?h+v:m;for(let M=b;M<I;M++){let R=c[M];if(M<g&&t===R||M>=g&&R.type===t)return M}if(i){let M=c[g];if(M&&fo(M)&&M.type===t)return g}return null}function os(e,n,t,r){let i=e[t],o=n.data;if(BN(i)){let c=i;c.resolving&&wO(_O(o[t]));let h=ev(c.canSeeViewProviders);c.resolving=!0;let g,m=c.injectImpl?br(c.injectImpl):null,v=yb(e,r,He.Default);try{i=e[t]=c.factory(void 0,o,e,r),n.firstCreatePass&&t>=r.directiveStart&&FN(t,o[t],n)}finally{m!==null&&br(m),ev(h),c.resolving=!1,vb()}}return i}function $N(e){if(typeof e=="string")return e.charCodeAt(0)||0;let n=e.hasOwnProperty(Al)?e[Al]:void 0;return typeof n=="number"?n>=0?n&Sb:qN:n}function tv(e,n,t){let r=1<<e;return!!(t[n+(e>>Db)]&r)}function nv(e,n){return!(e&He.Self)&&!(e&He.Host&&n)}var Ko=class{constructor(n,t){this._tNode=n,this._lView=t}get(n,t,r){return Ob(this._tNode,this._lView,n,of(r),t)}};function qN(){return new Ko(Hn(),Ke())}function Co(e){return jl(()=>{let n=e.prototype.constructor,t=n[Ad]||Yg(n),r=Object.prototype,i=Object.getPrototypeOf(e.prototype).constructor;for(;i&&i!==r;){let o=i[Ad]||Yg(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Yg(e){return Nv(e)?()=>{let n=Yg(Un(e));return n&&n()}:ia(e)}function YN(e,n,t,r,i){let o=e,c=n;for(;o!==null&&c!==null&&c[Se]&2048&&!(c[Se]&512);){let h=Nb(o,c,t,r|He.Self,oi);if(h!==oi)return h;let g=o.parent;if(!g){let m=c[tb];if(m){let v=m.get(t,oi,r);if(v!==oi)return v}g=Rb(c),c=c[pa]}o=g}return i}function Rb(e){let n=e[De],t=n.type;return t===2?n.declTNode:t===1?e[Yr]:null}function rv(e,n=null,t=null,r){let i=Pb(e,n,t,r);return i.resolveInjectorInitializers(),i}function Pb(e,n=null,t=null,r,i=new Set){let o=[t||Vn,ZO(e)];return r=r||(typeof e=="object"?void 0:jn(e)),new Nl(o,n||em(),r||null,i)}var ai=class e{static{this.THROW_IF_NOT_FOUND=Tl}static{this.NULL=new Nd}static create(n,t){if(Array.isArray(n))return rv({name:""},t,n,"");{let r=n.name??"";return rv({name:r},n.parent,n.providers,r)}}static{this.\u0275prov=fe({token:e,providedIn:"any",factory:()=>ze(jv)})}static{this.__NG_ELEMENT_ID__=-1}};var XN=new ve("");XN.__NG_ELEMENT_ID__=e=>{let n=Hn();if(n===null)throw new de(204,!1);if(n.type&2)return n.value;if(e&He.Optional)return null;throw new de(204,!1)};var ZN="ngOriginalError";function xg(e){return e[ZN]}var kb=!0,Fb=(()=>{class e{static{this.__NG_ELEMENT_ID__=QN}static{this.__NG_ENV_ID__=t=>t}}return e})(),Xg=class extends Fb{constructor(n){super(),this._lView=n}onDestroy(n){return ub(this._lView,n),()=>CN(this._lView,n)}};function QN(){return new Xg(Ke())}var us=(()=>{class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new In(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=fe({token:e,providedIn:"root",factory:()=>new e})}}return e})();var Zg=class extends rn{constructor(n=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=n,aN()&&(this.destroyRef=te(Fb,{optional:!0})??void 0,this.pendingTasks=te(us,{optional:!0})??void 0)}emit(n){let t=qe(null);try{super.next(n)}finally{qe(t)}}subscribe(n,t,r){let i=n,o=t||(()=>null),c=r;if(n&&typeof n=="object"){let g=n;i=g.next?.bind(g),o=g.error?.bind(g),c=g.complete?.bind(g)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),c&&(c=this.wrapInTimeout(c)));let h=super.subscribe({next:i,error:o,complete:c});return n instanceof Ut&&n.add(h),h}wrapInTimeout(n){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{n(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},Pt=Zg;function Vd(...e){}function Lb(e){let n,t;function r(){e=Vd;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),n!==void 0&&clearTimeout(n)}catch{}}return n=setTimeout(()=>{e(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{e(),r()})),()=>r()}function iv(e){return queueMicrotask(()=>e()),()=>{e=Vd}}var dm="isAngularZone",jd=dm+"_ID",KN=0,Zt=class e{constructor(n){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Pt(!1),this.onMicrotaskEmpty=new Pt(!1),this.onStable=new Pt(!1),this.onError=new Pt(!1);let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=kb}=n;if(typeof Zone>"u")throw new de(908,!1);Zone.assertZonePatched();let c=this;c._nesting=0,c._outer=c._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(c._inner=c._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(c._inner=c._inner.fork(Zone.longStackTraceZoneSpec)),c.shouldCoalesceEventChangeDetection=!i&&r,c.shouldCoalesceRunChangeDetection=i,c.callbackScheduled=!1,c.scheduleInRootZone=o,tR(c)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(dm)===!0}static assertInAngularZone(){if(!e.isInAngularZone())throw new de(909,!1)}static assertNotInAngularZone(){if(e.isInAngularZone())throw new de(909,!1)}run(n,t,r){return this._inner.run(n,t,r)}runTask(n,t,r,i){let o=this._inner,c=o.scheduleEventTask("NgZoneEvent: "+i,n,JN,Vd,Vd);try{return o.runTask(c,t,r)}finally{o.cancelTask(c)}}runGuarded(n,t,r){return this._inner.runGuarded(n,t,r)}runOutsideAngular(n){return this._outer.run(n)}},JN={};function fm(e){if(e._nesting==0&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function eR(e){if(e.isCheckStableRunning||e.callbackScheduled)return;e.callbackScheduled=!0;function n(){Lb(()=>{e.callbackScheduled=!1,Qg(e),e.isCheckStableRunning=!0,fm(e),e.isCheckStableRunning=!1})}e.scheduleInRootZone?Zone.root.run(()=>{n()}):e._outer.run(()=>{n()}),Qg(e)}function tR(e){let n=()=>{eR(e)},t=KN++;e._inner=e._inner.fork({name:"angular",properties:{[dm]:!0,[jd]:t,[jd+t]:!0},onInvokeTask:(r,i,o,c,h,g)=>{if(nR(g))return r.invokeTask(o,c,h,g);try{return ov(e),r.invokeTask(o,c,h,g)}finally{(e.shouldCoalesceEventChangeDetection&&c.type==="eventTask"||e.shouldCoalesceRunChangeDetection)&&n(),sv(e)}},onInvoke:(r,i,o,c,h,g,m)=>{try{return ov(e),r.invoke(o,c,h,g,m)}finally{e.shouldCoalesceRunChangeDetection&&!e.callbackScheduled&&!rR(g)&&n(),sv(e)}},onHasTask:(r,i,o,c)=>{r.hasTask(o,c),i===o&&(c.change=="microTask"?(e._hasPendingMicrotasks=c.microTask,Qg(e),fm(e)):c.change=="macroTask"&&(e.hasPendingMacrotasks=c.macroTask))},onHandleError:(r,i,o,c)=>(r.handleError(o,c),e.runOutsideAngular(()=>e.onError.emit(c)),!1)})}function Qg(e){e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&e.callbackScheduled===!0?e.hasPendingMicrotasks=!0:e.hasPendingMicrotasks=!1}function ov(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function sv(e){e._nesting--,fm(e)}var Kg=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Pt,this.onMicrotaskEmpty=new Pt,this.onStable=new Pt,this.onError=new Pt}run(n,t,r){return n.apply(t,r)}runGuarded(n,t,r){return n.apply(t,r)}runOutsideAngular(n){return n()}runTask(n,t,r,i){return n.apply(t,r)}};function nR(e){return Bb(e,"__ignore_ng_zone__")}function rR(e){return Bb(e,"__scheduler_tick__")}function Bb(e,n){return!Array.isArray(e)||e.length!==1?!1:e[0]?.data?.[n]===!0}var Ai=class{constructor(){this._console=console}handleError(n){let t=this._findOriginalError(n);this._console.error("ERROR",n),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(n){let t=n&&xg(n);for(;t&&xg(t);)t=xg(t);return t||null}},iR=new ve("",{providedIn:"root",factory:()=>{let e=te(Zt),n=te(Ai);return t=>e.runOutsideAngular(()=>n.handleError(t))}});function oR(){return ma(Hn(),Ke())}function ma(e,n){return new fr(dr(e,n))}var fr=(()=>{class e{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=oR}}return e})();function sR(e){return e instanceof fr?e.nativeElement:e}function aR(){return this._results[Symbol.iterator]()}var Jg=class e{get changes(){return this._changes??=new Pt}constructor(n=!1){this._emitDistinctChangesOnly=n,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let t=e.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=aR)}get(n){return this._results[n]}map(n){return this._results.map(n)}filter(n){return this._results.filter(n)}find(n){return this._results.find(n)}reduce(n,t){return this._results.reduce(n,t)}forEach(n){this._results.forEach(n)}some(n){return this._results.some(n)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(n,t){this.dirty=!1;let r=OO(n);(this._changesDetected=!TO(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(n){this._onDirty=n}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}},lR="ngSkipHydration",cR="ngskiphydration";function Ub(e){let n=e.mergedAttrs;if(n===null)return!1;for(let t=0;t<n.length;t+=2){let r=n[t];if(typeof r=="number")return!1;if(typeof r=="string"&&r.toLowerCase()===cR)return!0}return!1}function Vb(e){return e.hasAttribute(lR)}function Hd(e){return(e.flags&128)===128}function uR(e){if(Hd(e))return!0;let n=e.parent;for(;n;){if(Hd(e)||Ub(n))return!0;n=n.parent}return!1}var jb=new Map,dR=0;function fR(){return dR++}function hR(e){jb.set(e[lf],e)}function e0(e){jb.delete(e[lf])}var av="__ngContext__";function po(e,n){Wr(n)?(e[av]=n[lf],hR(n)):e[av]=n}function Hb(e){return Wb(e[Rl])}function zb(e){return Wb(e[zr])}function Wb(e){for(;e!==null&&!ui(e);)e=e[zr];return e}var t0;function Gb(e){t0=e}function pf(){if(t0!==void 0)return t0;if(typeof document<"u")return document;throw new de(210,!1)}var gf=new ve("",{providedIn:"root",factory:()=>pR}),pR="ng",hm=new ve(""),di=new ve("",{providedIn:"platform",factory:()=>"unknown"});var pm=new ve("",{providedIn:"root",factory:()=>pf().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function gR(){let e=new ya;return te(di)==="browser"&&(e.store=mR(pf(),te(gf))),e}var ya=(()=>{class e{constructor(){this.store={},this.onSerializeCallbacks={}}static{this.\u0275prov=fe({token:e,providedIn:"root",factory:gR})}get(t,r){return this.store[t]!==void 0?this.store[t]:r}set(t,r){this.store[t]=r}remove(t){delete this.store[t]}hasKey(t){return this.store.hasOwnProperty(t)}get isEmpty(){return Object.keys(this.store).length===0}onSerialize(t,r){this.onSerializeCallbacks[t]=r}toJson(){for(let t in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(t))try{this.store[t]=this.onSerializeCallbacks[t]()}catch(r){console.warn("Exception in onSerialize callback: ",r)}return JSON.stringify(this.store).replace(/</g,"\\u003C")}}return e})();function mR(e,n){let t=e.getElementById(n+"-state");if(t?.textContent)try{return JSON.parse(t.textContent)}catch(r){console.warn("Exception while restoring TransferState for app "+n,r)}return{}}var $b="h",qb="b",n0=function(e){return e.FirstChild="f",e.NextSibling="n",e}(n0||{}),yR="e",CR="t",gm="c",Yb="x",zd="r",_R="i",wR="n",Xb="d";var vR="__nghData__",Zb=vR,Eg="ngh",bR="nghm",Qb=()=>null;function xR(e,n,t=!1){let r=e.getAttribute(Eg);if(r==null)return null;let[i,o]=r.split("|");if(r=t?o:i,!r)return null;let c=o?`|${o}`:"",h=t?i:c,g={};if(r!==""){let v=n.get(ya,null,{optional:!0});v!==null&&(g=v.get(Zb,[])[Number(r)])}let m={data:g,firstChild:e.firstChild??null};return t&&(m.firstChild=e,mf(m,0,e.nextSibling)),h?e.setAttribute(Eg,h):e.removeAttribute(Eg),m}function ER(){Qb=xR}function mm(e,n,t=!1){return Qb(e,n,t)}function IR(e){let n=e._lView;return n[De].type===2?null:(Fd(n)&&(n=n[an]),n)}function SR(e){return e.textContent?.replace(/\s/gm,"")}function DR(e){let n=pf(),t=n.createNodeIterator(e,NodeFilter.SHOW_COMMENT,{acceptNode(o){let c=SR(o);return c==="ngetn"||c==="ngtns"?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}}),r,i=[];for(;r=t.nextNode();)i.push(r);for(let o of i)o.textContent==="ngetn"?o.replaceWith(n.createTextNode("")):o.remove()}function mf(e,n,t){e.segmentHeads??={},e.segmentHeads[n]=t}function r0(e,n){return e.segmentHeads?.[n]??null}function MR(e,n){let t=e.data,r=t[yR]?.[n]??null;return r===null&&t[gm]?.[n]&&(r=ym(e,n)),r}function Kb(e,n){return e.data[gm]?.[n]??null}function ym(e,n){let t=Kb(e,n)??[],r=0;for(let i of t)r+=i[zd]*(i[Yb]??1);return r}function AR(e){if(typeof e.disconnectedNodes>"u"){let n=e.data[Xb];e.disconnectedNodes=n?new Set(n):null}return e.disconnectedNodes}function Gl(e,n){if(typeof e.disconnectedNodes>"u"){let t=e.data[Xb];e.disconnectedNodes=t?new Set(t):null}return!!AR(e)?.has(n)}var gd=new ve(""),Jb=!1,ex=new ve("",{providedIn:"root",factory:()=>Jb});var md;function tx(){if(md===void 0&&(md=null,Rg.trustedTypes))try{md=Rg.trustedTypes.createPolicy("angular",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch{}return md}function yf(e){return tx()?.createHTML(e)||e}function TR(e){return tx()?.createScriptURL(e)||e}var Ti=class{constructor(n){this.changingThisBreaksApplicationSecurity=n}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Tv})`}},i0=class extends Ti{getTypeName(){return"HTML"}},o0=class extends Ti{getTypeName(){return"Style"}},s0=class extends Ti{getTypeName(){return"Script"}},a0=class extends Ti{getTypeName(){return"URL"}},l0=class extends Ti{getTypeName(){return"ResourceURL"}};function Fi(e){return e instanceof Ti?e.changingThisBreaksApplicationSecurity:e}function Ca(e,n){let t=OR(e);if(t!=null&&t!==n){if(t==="ResourceURL"&&n==="URL")return!0;throw new Error(`Required a safe ${n}, got a ${t} (see ${Tv})`)}return t===n}function OR(e){return e instanceof Ti&&e.getTypeName()||null}function nx(e){return new i0(e)}function rx(e){return new o0(e)}function ix(e){return new s0(e)}function ox(e){return new a0(e)}function sx(e){return new l0(e)}function NR(e){let n=new u0(e);return RR()?new c0(n):n}var c0=class{constructor(n){this.inertDocumentHelper=n}getInertBodyElement(n){n="<body><remove></remove>"+n;try{let t=new window.DOMParser().parseFromString(yf(n),"text/html").body;return t===null?this.inertDocumentHelper.getInertBodyElement(n):(t.firstChild?.remove(),t)}catch{return null}}},u0=class{constructor(n){this.defaultDoc=n,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(n){let t=this.inertDocument.createElement("template");return t.innerHTML=yf(n),t}};function RR(){try{return!!new window.DOMParser().parseFromString(yf(""),"text/html")}catch{return!1}}var PR=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Cm(e){return e=String(e),e.match(PR)?e:"unsafe:"+e}function Li(e){let n={};for(let t of e.split(","))n[t]=!0;return n}function $l(...e){let n={};for(let t of e)for(let r in t)t.hasOwnProperty(r)&&(n[r]=!0);return n}var ax=Li("area,br,col,hr,img,wbr"),lx=Li("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),cx=Li("rp,rt"),kR=$l(cx,lx),FR=$l(lx,Li("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),LR=$l(cx,Li("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),lv=$l(ax,FR,LR,kR),ux=Li("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),BR=Li("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),UR=Li("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),VR=$l(ux,BR,UR),jR=Li("script,style,template"),d0=class{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(n){let t=n.firstChild,r=!0,i=[];for(;t;){if(t.nodeType===Node.ELEMENT_NODE?r=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,r&&t.firstChild){i.push(t),t=WR(t);continue}for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let o=zR(t);if(o){t=o;break}t=i.pop()}}return this.buf.join("")}startElement(n){let t=cv(n).toLowerCase();if(!lv.hasOwnProperty(t))return this.sanitizedSomething=!0,!jR.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);let r=n.attributes;for(let i=0;i<r.length;i++){let o=r.item(i),c=o.name,h=c.toLowerCase();if(!VR.hasOwnProperty(h)){this.sanitizedSomething=!0;continue}let g=o.value;ux[h]&&(g=Cm(g)),this.buf.push(" ",c,'="',uv(g),'"')}return this.buf.push(">"),!0}endElement(n){let t=cv(n).toLowerCase();lv.hasOwnProperty(t)&&!ax.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(n){this.buf.push(uv(n))}};function HR(e,n){return(e.compareDocumentPosition(n)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function zR(e){let n=e.nextSibling;if(n&&e!==n.previousSibling)throw dx(n);return n}function WR(e){let n=e.firstChild;if(n&&HR(e,n))throw dx(n);return n}function cv(e){let n=e.nodeName;return typeof n=="string"?n:"FORM"}function dx(e){return new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`)}var GR=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,$R=/([^\#-~ |!])/g;function uv(e){return e.replace(/&/g,"&amp;").replace(GR,function(n){let t=n.charCodeAt(0),r=n.charCodeAt(1);return"&#"+((t-55296)*1024+(r-56320)+65536)+";"}).replace($R,function(n){return"&#"+n.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var yd;function fx(e,n){let t=null;try{yd=yd||NR(e);let r=n?String(n):"";t=yd.getInertBodyElement(r);let i=5,o=r;do{if(i===0)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=t.innerHTML,t=yd.getInertBodyElement(r)}while(r!==o);let h=new d0().sanitizeChildren(dv(t)||t);return yf(h)}finally{if(t){let r=dv(t)||t;for(;r.firstChild;)r.firstChild.remove()}}}function dv(e){return"content"in e&&qR(e)?e.content:null}function qR(e){return e.nodeType===Node.ELEMENT_NODE&&e.nodeName==="TEMPLATE"}var _o=function(e){return e[e.NONE=0]="NONE",e[e.HTML=1]="HTML",e[e.STYLE=2]="STYLE",e[e.SCRIPT=3]="SCRIPT",e[e.URL=4]="URL",e[e.RESOURCE_URL=5]="RESOURCE_URL",e}(_o||{});function hx(e){return TR(e[0])}var YR=/^>|^->|<!--|-->|--!>|<!-$/g,XR=/(<|>)/g,ZR="\u200B$1\u200B";function QR(e){return e.replace(YR,n=>n.replace(XR,ZR))}function KR(e){return e.ownerDocument.body}function px(e){return e instanceof Function?e():e}function Cd(e){return(e??te(ai)).get(di)==="browser"}var li=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}(li||{}),JR;function _m(e,n){return JR(e,n)}function ta(e,n,t,r,i){if(r!=null){let o,c=!1;ui(r)?o=r:Wr(r)&&(c=!0,r=r[cr]);let h=$r(r);e===0&&t!==null?i==null?_x(n,t,h):Wd(n,t,h,i||null,!0):e===1&&t!==null?Wd(n,t,h,i||null,!0):e===2?bm(n,h,c):e===3&&n.destroyNode(h),o!=null&&pP(n,e,o,t,i)}}function gx(e,n){return e.createText(n)}function eP(e,n,t){e.setValue(n,t)}function mx(e,n){return e.createComment(QR(n))}function wm(e,n,t){return e.createElement(n,t)}function tP(e,n){yx(e,n),n[cr]=null,n[Yr]=null}function nP(e,n,t,r,i,o){r[cr]=i,r[Yr]=n,wf(e,r,t,1,i,o)}function yx(e,n){n[Si].changeDetectionScheduler?.notify(9),wf(e,n,n[Nt],2,null,null)}function rP(e){let n=e[Rl];if(!n)return Ig(e[De],e);for(;n;){let t=null;if(Wr(n))t=n[Rl];else{let r=n[Sn];r&&(t=r)}if(!t){for(;n&&!n[zr]&&n!==e;)Wr(n)&&Ig(n[De],n),n=n[Dn];n===null&&(n=e),Wr(n)&&Ig(n[De],n),t=n&&n[zr]}n=t}}function iP(e,n,t,r){let i=Sn+r,o=t.length;r>0&&(t[i-1][zr]=n),r<o-Sn?(n[zr]=t[i],Vv(t,Sn+r,n)):(t.push(n),n[zr]=null),n[Dn]=t;let c=n[ts];c!==null&&t!==c&&Cx(c,n);let h=n[Di];h!==null&&h.insertView(e),zg(n),n[Se]|=128}function Cx(e,n){let t=e[la],r=n[Dn];if(Wr(r))e[Se]|=kd.HasTransplantedViews;else{let i=r[Dn][ur];n[ur]!==i&&(e[Se]|=kd.HasTransplantedViews)}t===null?e[la]=[n]:t.push(n)}function vm(e,n){let t=e[la],r=t.indexOf(n);t.splice(r,1)}function kl(e,n){if(e.length<=Sn)return;let t=Sn+n,r=e[t];if(r){let i=r[ts];i!==null&&i!==e&&vm(i,r),n>0&&(e[t-1][zr]=r[zr]);let o=Od(e,Sn+n);tP(r[De],r);let c=o[Di];c!==null&&c.detachView(o[De]),r[Dn]=null,r[zr]=null,r[Se]&=-129}return r}function Cf(e,n){if(!(n[Se]&256)){let t=n[Nt];t.destroyNode&&wf(e,n,t,3,null,null),rP(n)}}function Ig(e,n){if(n[Se]&256)return;let t=qe(null);try{n[Se]&=-129,n[Se]|=256,n[xr]&&Qp(n[xr]),sP(e,n),oP(e,n),n[De].type===1&&n[Nt].destroy();let r=n[ts];if(r!==null&&ui(n[Dn])){r!==n[Dn]&&vm(r,n);let i=n[Di];i!==null&&i.detachView(e)}e0(n)}finally{qe(t)}}function oP(e,n){let t=e.cleanup,r=n[Rd];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let c=t[o+3];c>=0?r[c]():r[-c].unsubscribe(),o+=2}else{let c=r[t[o+1]];t[o].call(c)}r!==null&&(n[Rd]=null);let i=n[co];if(i!==null){n[co]=null;for(let o=0;o<i.length;o++){let c=i[o];c()}}}function sP(e,n){let t;if(e!=null&&(t=e.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=n[t[r]];if(!(i instanceof is)){let o=t[r+1];if(Array.isArray(o))for(let c=0;c<o.length;c+=2){let h=i[o[c]],g=o[c+1];ii(4,h,g);try{g.call(h)}finally{ii(5,h,g)}}else{ii(4,i,o);try{o.call(i)}finally{ii(5,i,o)}}}}}function aP(e,n,t){return lP(e,n.parent,t)}function lP(e,n,t){let r=n;for(;r!==null&&r.type&168;)n=r,r=n.parent;if(r===null)return t[cr];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=e.data[r.directiveStart+i];if(o===si.None||o===si.Emulated)return null}return dr(r,t)}}function Wd(e,n,t,r,i){e.insertBefore(n,t,r,i)}function _x(e,n,t){e.appendChild(n,t)}function fv(e,n,t,r,i){r!==null?Wd(e,n,t,r,i):_x(e,n,t)}function wx(e,n){return e.parentNode(n)}function cP(e,n){return e.nextSibling(n)}function uP(e,n,t){return fP(e,n,t)}function dP(e,n,t){return e.type&40?dr(e,t):null}var fP=dP,hv;function _f(e,n,t,r){let i=aP(e,r,n),o=n[Nt],c=r.parent||n[Yr],h=uP(c,r,n);if(i!=null)if(Array.isArray(t))for(let g=0;g<t.length;g++)fv(o,i,t[g],h,!1);else fv(o,i,t,h,!1);hv!==void 0&&hv(o,r,n,t,i)}function Dl(e,n){if(n!==null){let t=n.type;if(t&3)return dr(n,e);if(t&4)return f0(-1,e[n.index]);if(t&8){let r=n.child;if(r!==null)return Dl(e,r);{let i=e[n.index];return ui(i)?f0(-1,i):$r(i)}}else{if(t&128)return Dl(e,n.next);if(t&32)return _m(n,e)()||$r(e[n.index]);{let r=vx(e,n);if(r!==null){if(Array.isArray(r))return r[0];let i=ns(e[ur]);return Dl(i,r)}else return Dl(e,n.next)}}}return null}function vx(e,n){if(n!==null){let r=e[ur][Yr],i=n.projection;return r.projection[i]}return null}function f0(e,n){let t=Sn+e+1;if(t<n.length){let r=n[t],i=r[De].firstChild;if(i!==null)return Dl(r,i)}return n[Mi]}function bm(e,n,t){e.removeChild(null,n,t)}function bx(e){e.textContent=""}function xm(e,n,t,r,i,o,c){for(;t!=null;){if(t.type===128){t=t.next;continue}let h=r[t.index],g=t.type;if(c&&n===0&&(h&&po($r(h),r),t.flags|=2),(t.flags&32)!==32)if(g&8)xm(e,n,t.child,r,i,o,!1),ta(n,e,i,h,o);else if(g&32){let m=_m(t,r),v;for(;v=m();)ta(n,e,i,v,o);ta(n,e,i,h,o)}else g&16?hP(e,n,r,t,i,o):ta(n,e,i,h,o);t=c?t.projectionNext:t.next}}function wf(e,n,t,r,i,o){xm(t,r,e.firstChild,n,i,o,!1)}function hP(e,n,t,r,i,o){let c=t[ur],g=c[Yr].projection[r.projection];if(Array.isArray(g))for(let m=0;m<g.length;m++){let v=g[m];ta(n,e,i,v,o)}else{let m=g,v=c[Dn];Hd(r)&&(m.flags|=128),xm(e,n,m,v,i,o,!0)}}function pP(e,n,t,r,i){let o=t[Mi],c=$r(t);o!==c&&ta(n,e,r,o,i);for(let h=Sn;h<t.length;h++){let g=t[h];wf(g[De],g,e,n,r,o)}}function gP(e,n,t,r,i){if(n)i?e.addClass(t,r):e.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:li.DashCase;i==null?e.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=li.Important),e.setStyle(t,r,i,o))}}function mP(e,n,t){e.setAttribute(n,"style",t)}function xx(e,n,t){t===""?e.removeAttribute(n,"class"):e.setAttribute(n,"class",t)}function Ex(e,n,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&Bg(e,n,r),i!==null&&xx(e,n,i),o!==null&&mP(e,n,o)}var Ir={};function q(e=1){Ix(ln(),Ke(),ki()+e,!1)}function Ix(e,n,t,r){if(!r)if((n[Se]&3)===3){let o=e.preOrderCheckHooks;o!==null&&Ed(n,o,t)}else{let o=e.preOrderHooks;o!==null&&Id(n,o,0,t)}rs(t)}function z(e,n=He.Default){let t=Ke();if(t===null)return ze(e,n);let r=Hn();return Ob(r,t,Un(e),n)}function Sx(e,n,t,r,i,o){let c=qe(null);try{let h=null;i&uo.SignalBased&&(h=n[r][xi]),h!==null&&h.transformFn!==void 0&&(o=h.transformFn(o)),i&uo.HasDecoratorInputTransform&&(o=e.inputTransforms[r].call(n,o)),e.setInput!==null?e.setInput(n,h,o,t,r):rb(n,h,r,o)}finally{qe(c)}}function yP(e,n){let t=e.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)rs(~i);else{let o=i,c=t[++r],h=t[++r];ON(c,o);let g=n[o];h(2,g)}}}finally{rs(-1)}}function vf(e,n,t,r,i,o,c,h,g,m,v){let b=n.blueprint.slice();return b[cr]=i,b[Se]=r|4|128|8|64,(m!==null||e&&e[Se]&2048)&&(b[Se]|=2048),lb(b),b[Dn]=b[pa]=e,b[kn]=t,b[Si]=c||e&&e[Si],b[Nt]=h||e&&e[Nt],b[aa]=g||e&&e[aa]||null,b[Yr]=o,b[lf]=fR(),b[Gr]=v,b[tb]=m,b[ur]=n.type==2?e[ur]:b,b}function ql(e,n,t,r,i){let o=e.data[n];if(o===null)o=CP(e,n,t,r,i),TN()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let c=IN();o.injectorIndex=c===null?-1:c.injectorIndex}return cs(o,!0),o}function CP(e,n,t,r,i){let o=hb(),c=im(),h=c?o:o&&o.parent,g=e.data[n]=IP(e,h,t,n,r,i);return e.firstChild===null&&(e.firstChild=g),o!==null&&(c?o.child==null&&g.parent!==null&&(o.child=g):o.next===null&&(o.next=g,g.prev=o)),g}function Dx(e,n,t,r){if(t===0)return-1;let i=n.length;for(let o=0;o<t;o++)n.push(r),e.blueprint.push(r),e.data.push(null);return i}function Mx(e,n,t,r,i){let o=ki(),c=r&2;try{rs(-1),c&&n.length>an&&Ix(e,n,an,!1),ii(c?2:0,i),t(r,i)}finally{rs(o),ii(c?3:1,i)}}function Em(e,n,t){if(tm(n)){let r=qe(null);try{let i=n.directiveStart,o=n.directiveEnd;for(let c=i;c<o;c++){let h=e.data[c];if(h.contentQueries){let g=t[c];h.contentQueries(1,g,c)}}}finally{qe(r)}}}function Im(e,n,t){fb()&&(OP(e,n,t,dr(t,n)),(t.flags&64)===64&&Rx(e,n,t))}function Sm(e,n,t=dr){let r=n.localNames;if(r!==null){let i=n.index+1;for(let o=0;o<r.length;o+=2){let c=r[o+1],h=c===-1?t(n,e):e[c];e[i++]=h}}}function Ax(e){let n=e.tView;return n===null||n.incompleteFirstPass?e.tView=Dm(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):n}function Dm(e,n,t,r,i,o,c,h,g,m,v){let b=an+r,I=b+i,M=_P(b,I),R=typeof m=="function"?m():m;return M[De]={type:e,blueprint:M,template:t,queries:null,viewQuery:h,declTNode:n,data:M.slice().fill(null,b),bindingStartIndex:b,expandoStartIndex:I,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof c=="function"?c():c,firstChild:null,schemas:g,consts:R,incompleteFirstPass:!1,ssrId:v}}function _P(e,n){let t=[];for(let r=0;r<n;r++)t.push(r<e?null:Ir);return t}function wP(e,n,t,r){let o=r.get(ex,Jb)||t===si.ShadowDom,c=e.selectRootElement(n,o);return vP(c),c}function vP(e){Tx(e)}var Tx=()=>null;function bP(e){Vb(e)?bx(e):DR(e)}function xP(){Tx=bP}function EP(e,n,t,r){let i=Fx(n);i.push(t),e.firstCreatePass&&Lx(e).push(r,i.length-1)}function IP(e,n,t,r,i,o){let c=n?n.injectorIndex:-1,h=0;return Wl()&&(h|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:c,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:h,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:n,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function pv(e,n,t,r,i){for(let o in n){if(!n.hasOwnProperty(o))continue;let c=n[o];if(c===void 0)continue;r??={};let h,g=uo.None;Array.isArray(c)?(h=c[0],g=c[1]):h=c;let m=o;if(i!==null){if(!i.hasOwnProperty(o))continue;m=i[o]}e===0?gv(r,t,m,h,g):gv(r,t,m,h)}return r}function gv(e,n,t,r,i){let o;e.hasOwnProperty(t)?(o=e[t]).push(n,r):o=e[t]=[n,r],i!==void 0&&o.push(i)}function SP(e,n,t){let r=n.directiveStart,i=n.directiveEnd,o=e.data,c=n.attrs,h=[],g=null,m=null;for(let v=r;v<i;v++){let b=o[v],I=t?t.get(b):null,M=I?I.inputs:null,R=I?I.outputs:null;g=pv(0,b.inputs,v,g,M),m=pv(1,b.outputs,v,m,R);let H=g!==null&&c!==null&&!K0(n)?HP(g,v,c):null;h.push(H)}g!==null&&(g.hasOwnProperty("class")&&(n.flags|=8),g.hasOwnProperty("style")&&(n.flags|=16)),n.initialInputs=h,n.inputs=g,n.outputs=m}function DP(e){return e==="class"?"className":e==="for"?"htmlFor":e==="formaction"?"formAction":e==="innerHtml"?"innerHTML":e==="readonly"?"readOnly":e==="tabindex"?"tabIndex":e}function Ox(e,n,t,r,i,o,c,h){let g=dr(n,t),m=n.inputs,v;!h&&m!=null&&(v=m[r])?(Am(e,t,v,r,i),zl(n)&&MP(t,n.index)):n.type&3?(r=DP(r),i=c!=null?c(i,n.value||"",r):i,o.setProperty(g,r,i)):n.type&12}function MP(e,n){let t=mo(n,e);t[Se]&16||(t[Se]|=64)}function Mm(e,n,t,r){if(fb()){let i=r===null?null:{"":-1},o=RP(e,t),c,h;o===null?c=h=null:[c,h]=o,c!==null&&Nx(e,n,t,c,i,h),i&&PP(t,r,i)}t.mergedAttrs=Ol(t.mergedAttrs,t.attrs)}function Nx(e,n,t,r,i,o){for(let m=0;m<r.length;m++)qg(Ud(t,n),e,r[m].type);FP(t,e.data.length,r.length);for(let m=0;m<r.length;m++){let v=r[m];v.providersResolver&&v.providersResolver(v)}let c=!1,h=!1,g=Dx(e,n,r.length,null);for(let m=0;m<r.length;m++){let v=r[m];t.mergedAttrs=Ol(t.mergedAttrs,v.hostAttrs),LP(e,t,n,g,v),kP(g,v,i),v.contentQueries!==null&&(t.flags|=4),(v.hostBindings!==null||v.hostAttrs!==null||v.hostVars!==0)&&(t.flags|=64);let b=v.type.prototype;!c&&(b.ngOnChanges||b.ngOnInit||b.ngDoCheck)&&((e.preOrderHooks??=[]).push(t.index),c=!0),!h&&(b.ngOnChanges||b.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(t.index),h=!0),g++}SP(e,t,o)}function AP(e,n,t,r,i){let o=i.hostBindings;if(o){let c=e.hostBindingOpCodes;c===null&&(c=e.hostBindingOpCodes=[]);let h=~n.index;TP(c)!=h&&c.push(h),c.push(t,r,o)}}function TP(e){let n=e.length;for(;n>0;){let t=e[--n];if(typeof t=="number"&&t<0)return t}return 0}function OP(e,n,t,r){let i=t.directiveStart,o=t.directiveEnd;zl(t)&&BP(n,t,e.data[i+t.componentOffset]),e.firstCreatePass||Ud(t,n),po(r,n);let c=t.initialInputs;for(let h=i;h<o;h++){let g=e.data[h],m=os(n,e,h,t);if(po(m,n),c!==null&&jP(n,h-i,m,g,t,c),fo(g)){let v=mo(t.index,n);v[kn]=os(n,e,h,t)}}}function Rx(e,n,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,c=NN();try{rs(o);for(let h=r;h<i;h++){let g=e.data[h],m=n[h];Wg(h),(g.hostBindings!==null||g.hostVars!==0||g.hostAttrs!==null)&&NP(g,m)}}finally{rs(-1),Wg(c)}}function NP(e,n){e.hostBindings!==null&&e.hostBindings(1,n)}function RP(e,n){let t=e.directiveRegistry,r=null,i=null;if(t)for(let o=0;o<t.length;o++){let c=t[o];if(jO(n,c.selectors,!1))if(r||(r=[]),fo(c))if(c.findHostDirectiveDefs!==null){let h=[];i=i||new Map,c.findHostDirectiveDefs(c,h,i),r.unshift(...h,c);let g=h.length;h0(e,n,g)}else r.unshift(c),h0(e,n,0);else i=i||new Map,c.findHostDirectiveDefs?.(c,r,i),r.push(c)}return r===null?null:[r,i]}function h0(e,n,t){n.componentOffset=t,(e.components??=[]).push(n.index)}function PP(e,n,t){if(n){let r=e.localNames=[];for(let i=0;i<n.length;i+=2){let o=t[n[i+1]];if(o==null)throw new de(-301,!1);r.push(n[i],o)}}}function kP(e,n,t){if(t){if(n.exportAs)for(let r=0;r<n.exportAs.length;r++)t[n.exportAs[r]]=e;fo(n)&&(t[""]=e)}}function FP(e,n,t){e.flags|=1,e.directiveStart=n,e.directiveEnd=n+t,e.providerIndexes=n}function LP(e,n,t,r,i){e.data[r]=i;let o=i.factory||(i.factory=ia(i.type,!0)),c=new is(o,fo(i),z);e.blueprint[r]=c,t[r]=c,AP(e,n,r,Dx(e,t,i.hostVars,Ir),i)}function BP(e,n,t){let r=dr(n,e),i=Ax(t),o=e[Si].rendererFactory,c=16;t.signals?c=4096:t.onPush&&(c=64);let h=bf(e,vf(e,i,null,c,r,n,null,o.createRenderer(r,t),null,null,null));e[n.index]=h}function UP(e,n,t,r,i,o){let c=dr(e,n);VP(n[Nt],c,o,e.value,t,r,i)}function VP(e,n,t,r,i,o,c){if(o==null)e.removeAttribute(n,i,t);else{let h=c==null?Qo(o):c(o,r||"",i);e.setAttribute(n,i,h,t)}}function jP(e,n,t,r,i,o){let c=o[n];if(c!==null)for(let h=0;h<c.length;){let g=c[h++],m=c[h++],v=c[h++],b=c[h++];Sx(r,t,g,m,v,b)}}function HP(e,n,t){let r=null,i=0;for(;i<t.length;){let o=t[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(e.hasOwnProperty(o)){r===null&&(r=[]);let c=e[o];for(let h=0;h<c.length;h+=3)if(c[h]===n){r.push(o,c[h+1],c[h+2],t[i+1]);break}}i+=2}return r}function Px(e,n,t,r){return[e,!0,0,n,null,r,null,t,null,null]}function kx(e,n){let t=e.contentQueries;if(t!==null){let r=qe(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],c=t[i+1];if(c!==-1){let h=e.data[c];sm(o),h.contentQueries(2,n[c],c)}}}finally{qe(r)}}}function bf(e,n){return e[Rl]?e[Zw][zr]=n:e[Rl]=n,e[Zw]=n,n}function p0(e,n,t){sm(0);let r=qe(null);try{n(e,t)}finally{qe(r)}}function Fx(e){return e[Rd]??=[]}function Lx(e){return e.cleanup??=[]}function Bx(e,n){let t=e[aa],r=t?t.get(Ai,null):null;r&&r.handleError(n)}function Am(e,n,t,r,i){for(let o=0;o<t.length;){let c=t[o++],h=t[o++],g=t[o++],m=n[c],v=e.data[c];Sx(v,m,r,h,g,i)}}function Ux(e,n,t){let r=ab(n,e);eP(e[Nt],r,t)}function zP(e,n){let t=mo(n,e),r=t[De];WP(r,t);let i=t[cr];i!==null&&t[Gr]===null&&(t[Gr]=mm(i,t[aa])),Tm(r,t,t[kn])}function WP(e,n){for(let t=n.length;t<e.blueprint.length;t++)n.push(e.blueprint[t])}function Tm(e,n,t){am(n);try{let r=e.viewQuery;r!==null&&p0(1,r,t);let i=e.template;i!==null&&Mx(e,n,i,1,t),e.firstCreatePass&&(e.firstCreatePass=!1),n[Di]?.finishViewCreation(e),e.staticContentQueries&&kx(e,n),e.staticViewQueries&&p0(2,e.viewQuery,t);let o=e.components;o!==null&&GP(n,o)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{n[Se]&=-5,lm()}}function GP(e,n){for(let t=0;t<n.length;t++)zP(e,n[t])}function xf(e,n,t,r){let i=qe(null);try{let o=n.tView,h=e[Se]&4096?4096:16,g=vf(e,o,t,h,null,n,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),m=e[n.index];g[ts]=m;let v=e[Di];return v!==null&&(g[Di]=v.createEmbeddedView(o)),Tm(o,g,t),g}finally{qe(i)}}function Vx(e,n){let t=Sn+n;if(t<e.length)return e[t]}function Fl(e,n){return!n||n.firstChild===null||Hd(e)}function Ef(e,n,t,r=!0){let i=n[De];if(iP(i,n,e,t),r){let c=f0(t,e),h=n[Nt],g=wx(h,e[Mi]);g!==null&&nP(i,e[Yr],h,n,g,c)}let o=n[Gr];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function jx(e,n){let t=kl(e,n);return t!==void 0&&Cf(t[De],t),t}function Gd(e,n,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=n[t.index];o!==null&&r.push($r(o)),ui(o)&&$P(o,r);let c=t.type;if(c&8)Gd(e,n,t.child,r);else if(c&32){let h=_m(t,n),g;for(;g=h();)r.push(g)}else if(c&16){let h=vx(n,t);if(Array.isArray(h))r.push(...h);else{let g=ns(n[ur]);Gd(g[De],g,h,r,!0)}}t=i?t.projectionNext:t.next}return r}function $P(e,n){for(let t=Sn;t<e.length;t++){let r=e[t],i=r[De].firstChild;i!==null&&Gd(r[De],r,i,n)}e[Mi]!==e[cr]&&n.push(e[Mi])}var Hx=[];function qP(e){return e[xr]??YP(e)}function YP(e){let n=Hx.pop()??Object.create(ZP);return n.lView=e,n}function XP(e){e.lView[xr]!==e&&(e.lView=null,Hx.push(e))}var ZP=Be(re({},xl),{consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{df(e.lView)},consumerOnSignalRead(){this.lView[xr]=this}});function QP(e){let n=e[xr]??Object.create(KP);return n.lView=e,n}var KP=Be(re({},xl),{consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{let n=ns(e.lView);for(;n&&!zx(n[De]);)n=ns(n);n&&cb(n)},consumerOnSignalRead(){this.lView[xr]=this}});function zx(e){return e.type!==2}var JP=100;function Wx(e,n=!0,t=0){let r=e[Si],i=r.rendererFactory,o=!1;o||i.begin?.();try{e3(e,t)}catch(c){throw n&&Bx(e,c),c}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function e3(e,n){let t=gb();try{Kw(!0),g0(e,n);let r=0;for(;uf(e);){if(r===JP)throw new de(103,!1);r++,g0(e,1)}}finally{Kw(t)}}function t3(e,n,t,r){let i=n[Se];if((i&256)===256)return;let o=!1,c=!1;!o&&n[Si].inlineEffectRunner?.flush(),am(n);let h=!0,g=null,m=null;o||(zx(e)?(m=qP(n),g=Lu(m)):nw()===null?(h=!1,m=QP(n),g=Lu(m)):n[xr]&&(Qp(n[xr]),n[xr]=null));try{lb(n),AN(e.bindingStartIndex),t!==null&&Mx(e,n,t,2,r);let v=(i&3)===3;if(!o)if(v){let M=e.preOrderCheckHooks;M!==null&&Ed(n,M,null)}else{let M=e.preOrderHooks;M!==null&&Id(n,M,0,null),wg(n,0)}if(c||n3(n),Gx(n,0),e.contentQueries!==null&&kx(e,n),!o)if(v){let M=e.contentCheckHooks;M!==null&&Ed(n,M)}else{let M=e.contentHooks;M!==null&&Id(n,M,1),wg(n,1)}yP(e,n);let b=e.components;b!==null&&qx(n,b,0);let I=e.viewQuery;if(I!==null&&p0(2,I,r),!o)if(v){let M=e.viewCheckHooks;M!==null&&Ed(n,M)}else{let M=e.viewHooks;M!==null&&Id(n,M,2),wg(n,2)}if(e.firstUpdatePass===!0&&(e.firstUpdatePass=!1),n[_g]){for(let M of n[_g])M();n[_g]=null}o||(n[Se]&=-73)}catch(v){throw o||df(n),v}finally{m!==null&&(Xp(m,g),h&&XP(m)),lm()}}function Gx(e,n){for(let t=Hb(e);t!==null;t=zb(t))for(let r=Sn;r<t.length;r++){let i=t[r];$x(i,n)}}function n3(e){for(let n=Hb(e);n!==null;n=zb(n)){if(!(n[Se]&kd.HasTransplantedViews))continue;let t=n[la];for(let r=0;r<t.length;r++){let i=t[r];cb(i)}}}function r3(e,n,t){let r=mo(n,e);$x(r,t)}function $x(e,n){rm(e)&&g0(e,n)}function g0(e,n){let r=e[De],i=e[Se],o=e[xr],c=!!(n===0&&i&16);if(c||=!!(i&64&&n===0),c||=!!(i&1024),c||=!!(o?.dirty&&Zp(o)),c||=!1,o&&(o.dirty=!1),e[Se]&=-9217,c)t3(r,e,r.template,e[kn]);else if(i&8192){Gx(e,1);let h=r.components;h!==null&&qx(e,h,1)}}function qx(e,n,t){for(let r=0;r<n.length;r++)r3(e,n[r],t)}function Om(e,n){let t=gb()?64:1088;for(e[Si].changeDetectionScheduler?.notify(n);e;){e[Se]|=t;let r=ns(e);if(Fd(e)&&!r)return e;e=r}return null}var ss=class{get rootNodes(){let n=this._lView,t=n[De];return Gd(t,n,t.firstChild,[])}constructor(n,t,r=!0){this._lView=n,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[kn]}set context(n){this._lView[kn]=n}get destroyed(){return(this._lView[Se]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let n=this._lView[Dn];if(ui(n)){let t=n[Pd],r=t?t.indexOf(this):-1;r>-1&&(kl(n,r),Od(t,r))}this._attachedToViewContainer=!1}Cf(this._lView[De],this._lView)}onDestroy(n){ub(this._lView,n)}markForCheck(){Om(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Se]&=-129}reattach(){zg(this._lView),this._lView[Se]|=128}detectChanges(){this._lView[Se]|=1024,Wx(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new de(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let n=Fd(this._lView),t=this._lView[ts];t!==null&&!n&&vm(t,this._lView),yx(this._lView[De],this._lView)}attachToAppRef(n){if(this._attachedToViewContainer)throw new de(902,!1);this._appRef=n;let t=Fd(this._lView),r=this._lView[ts];r!==null&&!t&&Cx(r,this._lView),zg(this._lView)}},as=(()=>{class e{static{this.__NG_ELEMENT_ID__=s3}}return e})(),i3=as,o3=class extends i3{constructor(n,t,r){super(),this._declarationLView=n,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,t){return this.createEmbeddedViewImpl(n,t)}createEmbeddedViewImpl(n,t,r){let i=xf(this._declarationLView,this._declarationTContainer,n,{embeddedViewInjector:t,dehydratedView:r});return new ss(i)}};function s3(){return Nm(Hn(),Ke())}function Nm(e,n){return e.type&4?new o3(n,e,ma(e,n)):null}var a3=new RegExp(`^(\\d+)*(${qb}|${$b})*(.*)`);function l3(e){let n=e.match(a3),[t,r,i,o]=n,c=r?parseInt(r,10):i,h=[];for(let[g,m,v]of o.matchAll(/(f|n)(\d*)/g)){let b=parseInt(v,10)||1;h.push(m,b)}return[c,...h]}function c3(e){return!e.prev&&e.parent?.type===8}function Sg(e){return e.index-an}function u3(e,n){let t=e.i18nNodes;if(t)return t.get(n)}function If(e,n,t,r){let i=Sg(r),o=u3(e,i);if(o===void 0){let c=e.data[wR];if(c?.[i])o=f3(c[i],t);else if(n.firstChild===r)o=e.firstChild;else{let h=r.prev===null,g=r.prev??r.parent;if(c3(r)){let m=Sg(r.parent);o=r0(e,m)}else{let m=dr(g,t);if(h)o=m.firstChild;else{let v=Sg(g),b=r0(e,v);if(g.type===2&&b){let M=ym(e,v)+1;o=Sf(M,b)}else o=m.nextSibling}}}}return o}function Sf(e,n){let t=n;for(let r=0;r<e;r++)t=t.nextSibling;return t}function d3(e,n){let t=e;for(let r=0;r<n.length;r+=2){let i=n[r],o=n[r+1];for(let c=0;c<o;c++)switch(i){case n0.FirstChild:t=t.firstChild;break;case n0.NextSibling:t=t.nextSibling;break}}return t}function f3(e,n){let[t,...r]=l3(e),i;if(t===$b)i=n[ur][cr];else if(t===qb)i=KR(n[ur][cr]);else{let o=Number(t);i=$r(n[o+an])}return d3(i,r)}var h3=!1;function p3(e){h3=e}function g3(e){let n=e[Gr];if(n){let{i18nNodes:t,dehydratedIcuData:r}=n;if(t&&r){let i=e[Nt];for(let o of r.values())m3(i,t,o)}n.i18nNodes=void 0,n.dehydratedIcuData=void 0}}function m3(e,n,t){for(let r of t.node.cases[t.case]){let i=n.get(r.index-an);i&&bm(e,i,!1)}}function Yx(e){let n=e[Pl]??[],r=e[Dn][Nt];for(let i of n)y3(i,r);e[Pl]=Vn}function y3(e,n){let t=0,r=e.firstChild;if(r){let i=e.data[zd];for(;t<i;){let o=r.nextSibling;bm(n,r,!1),r=o,t++}}}function Xx(e){Yx(e);let n=e[cr];Wr(n)&&$d(n);for(let t=Sn;t<e.length;t++)$d(e[t])}function $d(e){g3(e);let n=e[De];for(let t=an;t<n.bindingStartIndex;t++)if(ui(e[t])){let r=e[t];Xx(r)}else Wr(e[t])&&$d(e[t])}function C3(e){let n=e._views;for(let t of n){let r=IR(t);r!==null&&r[cr]!==null&&(Wr(r)?$d(r):Xx(r))}}function _3(e,n){let t=[];for(let r of n)for(let i=0;i<(r[Yb]??1);i++){let o={data:r,firstChild:null};r[zd]>0&&(o.firstChild=e,e=Sf(r[zd],e)),t.push(o)}return[e,t]}var Zx=()=>null;function w3(e,n){let t=e[Pl];return!n||t===null||t.length===0?null:t[0].data[_R]===n?t.shift():(Yx(e),null)}function v3(){Zx=w3}function Ll(e,n){return Zx(e,n)}var ca=class{},Rm=new ve("",{providedIn:"root",factory:()=>!1});var Qx=new ve(""),Kx=new ve(""),m0=class{},qd=class{};function b3(e){let n=Error(`No component factory found for ${jn(e)}.`);return n[x3]=e,n}var x3="ngComponent";var y0=class{resolveComponentFactory(n){throw b3(n)}},ua=class{static{this.NULL=new y0}},da=class{},Xr=(()=>{class e{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>E3()}}return e})();function E3(){let e=Ke(),n=Hn(),t=mo(n.index,e);return(Wr(t)?t:e)[Nt]}var I3=(()=>{class e{static{this.\u0275prov=fe({token:e,providedIn:"root",factory:()=>null})}}return e})();function Yd(e,n,t){let r=t?e.styles:null,i=t?e.classes:null,o=0;if(n!==null)for(let c=0;c<n.length;c++){let h=n[c];if(typeof h=="number")o=h;else if(o==1)i=Pg(i,h);else if(o==2){let g=h,m=n[++c];r=Pg(r,g+": "+m+";")}}t?e.styles=r:e.stylesWithoutHost=r,t?e.classes=i:e.classesWithoutHost=i}var Xd=class extends ua{constructor(n){super(),this.ngModule=n}resolveComponentFactory(n){let t=es(n);return new Bl(t,this.ngModule)}};function mv(e,n){let t=[];for(let r in e){if(!e.hasOwnProperty(r))continue;let i=e[r];if(i===void 0)continue;let o=Array.isArray(i),c=o?i[0]:i,h=o?i[1]:uo.None;n?t.push({propName:c,templateName:r,isSignal:(h&uo.SignalBased)!==0}):t.push({propName:c,templateName:r})}return t}function S3(e){let n=e.toLowerCase();return n==="svg"?fN:n==="math"?hN:null}var Bl=class extends qd{get inputs(){let n=this.componentDef,t=n.inputTransforms,r=mv(n.inputs,!0);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return mv(this.componentDef.outputs,!1)}constructor(n,t){super(),this.componentDef=n,this.ngModule=t,this.componentType=n.type,this.selector=GO(n.selectors),this.ngContentSelectors=n.ngContentSelectors?n.ngContentSelectors:[],this.isBoundToModule=!!t}create(n,t,r,i){let o=qe(null);try{i=i||this.ngModule;let c=i instanceof Er?i:i?.injector;c&&this.componentDef.getStandaloneInjector!==null&&(c=this.componentDef.getStandaloneInjector(c)||c);let h=c?new Gg(n,c):n,g=h.get(da,null);if(g===null)throw new de(407,!1);let m=h.get(I3,null),v=h.get(ca,null),b={rendererFactory:g,sanitizer:m,inlineEffectRunner:null,changeDetectionScheduler:v},I=g.createRenderer(null,this.componentDef),M=this.componentDef.selectors[0][0]||"div",R=r?wP(I,r,this.componentDef.encapsulation,h):wm(I,M,S3(M)),H=512;this.componentDef.signals?H|=4096:this.componentDef.onPush||(H|=16);let X=null;R!==null&&(X=mm(R,h,!0));let $=Dm(0,null,null,1,0,null,null,null,null,null,null),ce=vf(null,$,null,H,null,null,b,I,h,null,X);am(ce);let Ze,me,W=null;try{let pe=this.componentDef,Y,or=null;pe.findHostDirectiveDefs?(Y=[],or=new Map,pe.findHostDirectiveDefs(pe,Y,or),Y.push(pe)):Y=[pe];let Nn=D3(ce,R);W=M3(Nn,R,pe,Y,ce,b,I),me=nm($,an),R&&O3(I,pe,R,r),t!==void 0&&N3(me,this.ngContentSelectors,t),Ze=T3(W,pe,Y,or,ce,[R3]),Tm($,ce,null)}catch(pe){throw W!==null&&e0(W),e0(ce),pe}finally{lm()}return new C0(this.componentType,Ze,ma(me,ce),ce,me)}finally{qe(o)}}},C0=class extends m0{constructor(n,t,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new ss(i,void 0,!1),this.componentType=n}setInput(n,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[n])){if(this.previousInputValues??=new Map,this.previousInputValues.has(n)&&Object.is(this.previousInputValues.get(n),t))return;let o=this._rootLView;Am(o[De],o,i,n,t),this.previousInputValues.set(n,t);let c=mo(this._tNode.index,o);Om(c,1)}}get injector(){return new Ko(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(n){this.hostView.onDestroy(n)}};function D3(e,n){let t=e[De],r=an;return e[r]=n,ql(t,r,2,"#host",null)}function M3(e,n,t,r,i,o,c){let h=i[De];A3(r,e,n,c);let g=null;n!==null&&(g=mm(n,i[aa]));let m=o.rendererFactory.createRenderer(n,t),v=16;t.signals?v=4096:t.onPush&&(v=64);let b=vf(i,Ax(t),null,v,i[e.index],e,o,m,null,null,g);return h.firstCreatePass&&h0(h,e,r.length-1),bf(i,b),i[e.index]=b}function A3(e,n,t,r){for(let i of e)n.mergedAttrs=Ol(n.mergedAttrs,i.hostAttrs);n.mergedAttrs!==null&&(Yd(n,n.mergedAttrs,!0),t!==null&&Ex(r,t,n))}function T3(e,n,t,r,i,o){let c=Hn(),h=i[De],g=dr(c,i);Nx(h,i,c,t,null,r);for(let v=0;v<t.length;v++){let b=c.directiveStart+v,I=os(i,h,b,c);po(I,i)}Rx(h,i,c),g&&po(g,i);let m=os(i,h,c.directiveStart+c.componentOffset,c);if(e[kn]=i[kn]=m,o!==null)for(let v of o)v(m,n);return Em(h,c,i),m}function O3(e,n,t,r){if(r)Bg(e,t,["ng-version","18.2.7"]);else{let{attrs:i,classes:o}=$O(n.selectors[0]);i&&Bg(e,t,i),o&&o.length>0&&xx(e,t,o.join(" "))}}function N3(e,n,t){let r=e.projection=[];for(let i=0;i<n.length;i++){let o=t[i];r.push(o!=null?Array.from(o):null)}}function R3(){let e=Hn();hf(Ke()[De],e)}var wo=(()=>{class e{static{this.__NG_ELEMENT_ID__=P3}}return e})();function P3(){let e=Hn();return eE(e,Ke())}var k3=wo,Jx=class extends k3{constructor(n,t,r){super(),this._lContainer=n,this._hostTNode=t,this._hostLView=r}get element(){return ma(this._hostTNode,this._hostLView)}get injector(){return new Ko(this._hostTNode,this._hostLView)}get parentInjector(){let n=um(this._hostTNode,this._hostLView);if(Ib(n)){let t=Bd(n,this._hostLView),r=Ld(n),i=t[De].data[r+8];return new Ko(i,t)}else return new Ko(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(n){let t=yv(this._lContainer);return t!==null&&t[n]||null}get length(){return this._lContainer.length-Sn}createEmbeddedView(n,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let c=Ll(this._lContainer,n.ssrId),h=n.createEmbeddedViewImpl(t||{},o,c);return this.insertImpl(h,i,Fl(this._hostTNode,c)),h}createComponent(n,t,r,i,o){let c=n&&!lN(n),h;if(c)h=t;else{let R=t||{};h=R.index,r=R.injector,i=R.projectableNodes,o=R.environmentInjector||R.ngModuleRef}let g=c?n:new Bl(es(n)),m=r||this.parentInjector;if(!o&&g.ngModule==null){let H=(c?m:this.parentInjector).get(Er,null);H&&(o=H)}let v=es(g.componentType??{}),b=Ll(this._lContainer,v?.id??null),I=b?.firstChild??null,M=g.create(m,i,I,o);return this.insertImpl(M.hostView,h,Fl(this._hostTNode,b)),M}insert(n,t){return this.insertImpl(n,t,!0)}insertImpl(n,t,r){let i=n._lView;if(mN(i)){let h=this.indexOf(n);if(h!==-1)this.detach(h);else{let g=i[Dn],m=new Jx(g,g[Yr],g[Dn]);m.detach(m.indexOf(n))}}let o=this._adjustIndex(t),c=this._lContainer;return Ef(c,i,o,r),n.attachToViewContainerRef(),Vv(Dg(c),o,n),n}move(n,t){return this.insert(n,t)}indexOf(n){let t=yv(this._lContainer);return t!==null?t.indexOf(n):-1}remove(n){let t=this._adjustIndex(n,-1),r=kl(this._lContainer,t);r&&(Od(Dg(this._lContainer),t),Cf(r[De],r))}detach(n){let t=this._adjustIndex(n,-1),r=kl(this._lContainer,t);return r&&Od(Dg(this._lContainer),t)!=null?new ss(r):null}_adjustIndex(n,t=0){return n??this.length+t}};function yv(e){return e[Pd]}function Dg(e){return e[Pd]||(e[Pd]=[])}function eE(e,n){let t,r=n[e.index];return ui(r)?t=r:(t=Px(r,n,null,e),n[e.index]=t,bf(n,t)),tE(t,n,e,r),new Jx(t,e,n)}function F3(e,n){let t=e[Nt],r=t.createComment(""),i=dr(n,e),o=wx(t,i);return Wd(t,o,r,cP(t,i),!1),r}var tE=nE,Pm=()=>!1;function L3(e,n,t){return Pm(e,n,t)}function nE(e,n,t,r){if(e[Mi])return;let i;t.type&8?i=$r(r):i=F3(n,t),e[Mi]=i}function B3(e,n,t){if(e[Mi]&&e[Pl])return!0;let r=t[Gr],i=n.index-an;if(!r||uR(n)||Gl(r,i))return!1;let c=r0(r,i),h=r.data[gm]?.[i],[g,m]=_3(c,h);return e[Mi]=g,e[Pl]=m,!0}function U3(e,n,t,r){Pm(e,t,n)||nE(e,n,t,r)}function V3(){tE=U3,Pm=B3}var _0=class e{constructor(n){this.queryList=n,this.matches=null}clone(){return new e(this.queryList)}setDirty(){this.queryList.setDirty()}},w0=class e{constructor(n=[]){this.queries=n}createEmbeddedView(n){let t=n.queries;if(t!==null){let r=n.contentQueries!==null?n.contentQueries[0]:t.length,i=[];for(let o=0;o<r;o++){let c=t.getByIndex(o),h=this.queries[c.indexInDeclarationView];i.push(h.clone())}return new e(i)}return null}insertView(n){this.dirtyQueriesWithMatches(n)}detachView(n){this.dirtyQueriesWithMatches(n)}finishViewCreation(n){this.dirtyQueriesWithMatches(n)}dirtyQueriesWithMatches(n){for(let t=0;t<this.queries.length;t++)km(n,t).matches!==null&&this.queries[t].setDirty()}},v0=class{constructor(n,t,r=null){this.flags=t,this.read=r,typeof n=="string"?this.predicate=Y3(n):this.predicate=n}},b0=class e{constructor(n=[]){this.queries=n}elementStart(n,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(n,t)}elementEnd(n){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(n)}embeddedTView(n){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,o=this.getByIndex(r).embeddedTView(n,i);o&&(o.indexInDeclarationView=r,t!==null?t.push(o):t=[o])}return t!==null?new e(t):null}template(n,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(n,t)}getByIndex(n){return this.queries[n]}get length(){return this.queries.length}track(n){this.queries.push(n)}},x0=class e{constructor(n,t=-1){this.metadata=n,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(n,t){this.isApplyingToNode(t)&&this.matchTNode(n,t)}elementEnd(n){this._declarationNodeIndex===n.index&&(this._appliesToNextNode=!1)}template(n,t){this.elementStart(n,t)}embeddedTView(n,t){return this.isApplyingToNode(n)?(this.crossesNgTemplate=!0,this.addMatch(-n.index,t),new e(this.metadata)):null}isApplyingToNode(n){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=n.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(n,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(n,t,j3(t,o)),this.matchTNodeWithReadOption(n,t,Sd(t,n,o,!1,!1))}else r===as?t.type&4&&this.matchTNodeWithReadOption(n,t,-1):this.matchTNodeWithReadOption(n,t,Sd(t,n,r,!1,!1))}matchTNodeWithReadOption(n,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===fr||i===wo||i===as&&t.type&4)this.addMatch(t.index,-2);else{let o=Sd(t,n,i,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(n,t){this.matches===null?this.matches=[n,t]:this.matches.push(n,t)}};function j3(e,n){let t=e.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===n)return t[r+1]}return null}function H3(e,n){return e.type&11?ma(e,n):e.type&4?Nm(e,n):null}function z3(e,n,t,r){return t===-1?H3(n,e):t===-2?W3(e,n,r):os(e,e[De],t,n)}function W3(e,n,t){if(t===fr)return ma(n,e);if(t===as)return Nm(n,e);if(t===wo)return eE(n,e)}function rE(e,n,t,r){let i=n[Di].queries[r];if(i.matches===null){let o=e.data,c=t.matches,h=[];for(let g=0;c!==null&&g<c.length;g+=2){let m=c[g];if(m<0)h.push(null);else{let v=o[m];h.push(z3(n,v,c[g+1],t.metadata.read))}}i.matches=h}return i.matches}function E0(e,n,t,r){let i=e.queries.getByIndex(t),o=i.matches;if(o!==null){let c=rE(e,n,i,t);for(let h=0;h<o.length;h+=2){let g=o[h];if(g>0)r.push(c[h/2]);else{let m=o[h+1],v=n[-g];for(let b=Sn;b<v.length;b++){let I=v[b];I[ts]===I[Dn]&&E0(I[De],I,m,r)}if(v[la]!==null){let b=v[la];for(let I=0;I<b.length;I++){let M=b[I];E0(M[De],M,m,r)}}}}}return r}function G3(e,n){return e[Di].queries[n].queryList}function $3(e,n,t){let r=new Jg((t&4)===4);return EP(e,n,r,r.destroy),(n[Di]??=new w0).queries.push(new _0(r))-1}function q3(e,n,t){let r=ln();return r.firstCreatePass&&(X3(r,new v0(e,n,t),-1),(n&2)===2&&(r.staticViewQueries=!0)),$3(r,Ke(),n)}function Y3(e){return e.split(",").map(n=>n.trim())}function X3(e,n,t){e.queries===null&&(e.queries=new b0),e.queries.track(new x0(n,t))}function km(e,n){return e.queries.getByIndex(n)}function Z3(e,n){let t=e[De],r=km(t,n);return r.crossesNgTemplate?E0(t,e,n,[]):rE(t,e,r,n)}var Cv=new Set;function Bi(e){Cv.has(e)||(Cv.add(e),performance?.mark?.("mark_feature_usage",{detail:{feature:e}}))}function Q3(e){return typeof e=="function"&&e[xi]!==void 0}function Yl(e,n){Bi("NgSignals");let t=hw(e),r=t[xi];return n?.equal&&(r.equal=n.equal),t.set=i=>Kp(r,i),t.update=i=>pw(r,i),t.asReadonly=K3.bind(t),t}function K3(){let e=this[xi];if(e.readonlyFn===void 0){let n=()=>this();n[xi]=e,e.readonlyFn=n}return e.readonlyFn}function iE(e){return Q3(e)&&typeof e.set=="function"}function J3(e){return Object.getPrototypeOf(e.prototype).constructor}function Zr(e){let n=J3(e.type),t=!0,r=[e];for(;n;){let i;if(fo(e))i=n.\u0275cmp||n.\u0275dir;else{if(n.\u0275cmp)throw new de(903,!1);i=n.\u0275dir}if(i){if(t){r.push(i);let c=e;c.inputs=_d(e.inputs),c.inputTransforms=_d(e.inputTransforms),c.declaredInputs=_d(e.declaredInputs),c.outputs=_d(e.outputs);let h=i.hostBindings;h&&ik(e,h);let g=i.viewQuery,m=i.contentQueries;if(g&&nk(e,g),m&&rk(e,m),ek(e,i),dO(e.outputs,i.outputs),fo(i)&&i.data.animation){let v=e.data;v.animation=(v.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let c=0;c<o.length;c++){let h=o[c];h&&h.ngInherit&&h(e),h===Zr&&(t=!1)}}n=Object.getPrototypeOf(n)}tk(r)}function ek(e,n){for(let t in n.inputs){if(!n.inputs.hasOwnProperty(t)||e.inputs.hasOwnProperty(t))continue;let r=n.inputs[t];if(r!==void 0&&(e.inputs[t]=r,e.declaredInputs[t]=n.declaredInputs[t],n.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!n.inputTransforms.hasOwnProperty(i))continue;e.inputTransforms??={},e.inputTransforms[i]=n.inputTransforms[i]}}}function tk(e){let n=0,t=null;for(let r=e.length-1;r>=0;r--){let i=e[r];i.hostVars=n+=i.hostVars,i.hostAttrs=Ol(i.hostAttrs,t=Ol(t,i.hostAttrs))}}function _d(e){return e===oa?{}:e===Vn?[]:e}function nk(e,n){let t=e.viewQuery;t?e.viewQuery=(r,i)=>{n(r,i),t(r,i)}:e.viewQuery=n}function rk(e,n){let t=e.contentQueries;t?e.contentQueries=(r,i,o)=>{n(r,i,o),t(r,i,o)}:e.contentQueries=n}function ik(e,n){let t=e.hostBindings;t?e.hostBindings=(r,i)=>{n(r,i),t(r,i)}:e.hostBindings=n}var go=class{},Ul=class{};var I0=class extends go{constructor(n,t,r,i=!0){super(),this.ngModuleType=n,this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Xd(this);let o=Yv(n);this._bootstrapComponents=px(o.bootstrap),this._r3Injector=Pb(n,t,[{provide:go,useValue:this},{provide:ua,useValue:this.componentFactoryResolver},...r],jn(n),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let n=this._r3Injector;!n.destroyed&&n.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(n){this.destroyCbs.push(n)}},S0=class extends Ul{constructor(n){super(),this.moduleType=n}create(n){return new I0(this.moduleType,n,[])}};var Zd=class extends go{constructor(n){super(),this.componentFactoryResolver=new Xd(this),this.instance=null;let t=new Nl([...n.providers,{provide:go,useValue:this},{provide:ua,useValue:this.componentFactoryResolver}],n.parent||em(),n.debugName,new Set(["environment"]));this.injector=t,n.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(n){this.injector.onDestroy(n)}};function Fm(e,n,t=null){return new Zd({providers:e,parent:n,debugName:t,runEnvironmentInitializers:!0}).injector}function oE(e){return Lm(e)?Array.isArray(e)||!(e instanceof Map)&&Symbol.iterator in e:!1}function ok(e,n){if(Array.isArray(e))for(let t=0;t<e.length;t++)n(e[t]);else{let t=e[Symbol.iterator](),r;for(;!(r=t.next()).done;)n(r.value)}}function Lm(e){return e!==null&&(typeof e=="function"||typeof e=="object")}function sk(e,n,t){return e[n]=t}function qr(e,n,t){let r=e[n];return Object.is(r,t)?!1:(e[n]=t,!0)}function D0(e,n,t,r){let i=qr(e,n,t);return qr(e,n+1,r)||i}function ak(e,n,t,r,i){let o=D0(e,n,t,r);return qr(e,n+2,i)||o}function lk(e,n,t,r,i,o){let c=D0(e,n,t,r);return D0(e,n+2,i,o)||c}function Xl(e){return(e.flags&32)===32}function ck(e,n,t,r,i,o,c,h,g){let m=n.consts,v=ql(n,e,4,c||null,h||null);Mm(n,t,v,ho(m,g)),hf(n,v);let b=v.tView=Dm(2,v,r,i,o,n.directiveRegistry,n.pipeRegistry,null,n.schemas,m,null);return n.queries!==null&&(n.queries.template(n,v),b.queries=n.queries.embeddedTView(v)),v}function M0(e,n,t,r,i,o,c,h,g,m){let v=t+an,b=n.firstCreatePass?ck(v,n,e,r,i,o,c,h,g):n.data[v];cs(b,!1);let I=sE(n,e,b,t);ff()&&_f(n,e,I,b),po(I,e);let M=Px(I,e,I,b);return e[v]=M,bf(e,M),L3(M,b,e),cf(b)&&Im(n,e,b),g!=null&&Sm(e,b,m),b}function Vt(e,n,t,r,i,o,c,h){let g=Ke(),m=ln(),v=ho(m.consts,o);return M0(g,m,e,n,t,r,i,v,c,h),Vt}var sE=aE;function aE(e,n,t,r){return yo(!0),n[Nt].createComment("")}function uk(e,n,t,r){let i=n[Gr],o=!i||Wl()||Xl(t)||Gl(i,r);if(yo(o),o)return aE(e,n,t,r);let c=i.data[CR]?.[r]??null;c!==null&&t.tView!==null&&t.tView.ssrId===null&&(t.tView.ssrId=c);let h=If(i,e,n,t);mf(i,r,h);let g=ym(i,r);return Sf(g,h)}function dk(){sE=uk}var Ml=function(e){return e[e.EarlyRead=0]="EarlyRead",e[e.Write=1]="Write",e[e.MixedReadWrite=2]="MixedReadWrite",e[e.Read=3]="Read",e}(Ml||{}),fk=(()=>{class e{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=fe({token:e,providedIn:"root",factory:()=>new e})}}return e})(),_v=class e{constructor(){this.ngZone=te(Zt),this.scheduler=te(ca),this.errorHandler=te(Ai,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[Ml.EarlyRead,Ml.Write,Ml.MixedReadWrite,Ml.Read]}execute(){this.executing=!0;for(let n of e.PHASES)for(let t of this.sequences)if(!(t.erroredOrDestroyed||!t.hooks[n]))try{t.pipelinedValue=this.ngZone.runOutsideAngular(()=>t.hooks[n](t.pipelinedValue))}catch(r){t.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let n of this.sequences)n.afterRun(),n.once&&this.sequences.delete(n);for(let n of this.deferredRegistrations)this.sequences.add(n);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(n){this.executing?this.deferredRegistrations.add(n):(this.sequences.add(n),this.scheduler.notify(6))}unregister(n){this.executing&&this.sequences.has(n)?(n.erroredOrDestroyed=!0,n.pipelinedValue=void 0,n.once=!0):(this.sequences.delete(n),this.deferredRegistrations.delete(n))}static{this.\u0275prov=fe({token:e,providedIn:"root",factory:()=>new e})}};function Df(e,n,t,r){let i=Ke(),o=ga();if(qr(i,o,n)){let c=ln(),h=cm();UP(h,i,e,n,t,r)}return Df}function hk(e,n,t,r){return qr(e,ga(),t)?n+Qo(t)+r:Ir}function pk(e,n,t,r,i,o,c,h,g,m){let v=MN(),b=lk(e,v,t,i,c,g);return om(4),b?n+Qo(t)+r+Qo(i)+o+Qo(c)+h+Qo(g)+m:Ir}function wd(e,n){return e<<17|n<<2}function ls(e){return e>>17&32767}function gk(e){return(e&2)==2}function mk(e,n){return e&131071|n<<17}function A0(e){return e|2}function fa(e){return(e&131068)>>2}function Mg(e,n){return e&-131069|n<<2}function yk(e){return(e&1)===1}function T0(e){return e|1}function Ck(e,n,t,r,i,o){let c=o?n.classBindings:n.styleBindings,h=ls(c),g=fa(c);e[r]=t;let m=!1,v;if(Array.isArray(t)){let b=t;v=b[1],(v===null||Hl(b,v)>0)&&(m=!0)}else v=t;if(i)if(g!==0){let I=ls(e[h+1]);e[r+1]=wd(I,h),I!==0&&(e[I+1]=Mg(e[I+1],r)),e[h+1]=mk(e[h+1],r)}else e[r+1]=wd(h,0),h!==0&&(e[h+1]=Mg(e[h+1],r)),h=r;else e[r+1]=wd(g,0),h===0?h=r:e[g+1]=Mg(e[g+1],r),g=r;m&&(e[r+1]=A0(e[r+1])),wv(e,v,r,!0),wv(e,v,r,!1),_k(n,v,e,r,o),c=wd(h,g),o?n.classBindings=c:n.styleBindings=c}function _k(e,n,t,r,i){let o=i?e.residualClasses:e.residualStyles;o!=null&&typeof n=="string"&&Hl(o,n)>=0&&(t[r+1]=T0(t[r+1]))}function wv(e,n,t,r){let i=e[t+1],o=n===null,c=r?ls(i):fa(i),h=!1;for(;c!==0&&(h===!1||o);){let g=e[c],m=e[c+1];wk(g,n)&&(h=!0,e[c+1]=r?T0(m):A0(m)),c=r?ls(m):fa(m)}h&&(e[t+1]=r?A0(i):T0(i))}function wk(e,n){return e===null||n==null||(Array.isArray(e)?e[1]:e)===n?!0:Array.isArray(e)&&typeof n=="string"?Hl(e,n)>=0:!1}var Hr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function vk(e){return e.substring(Hr.key,Hr.keyEnd)}function bk(e){return xk(e),lE(e,cE(e,0,Hr.textEnd))}function lE(e,n){let t=Hr.textEnd;return t===n?-1:(n=Hr.keyEnd=Ek(e,Hr.key=n,t),cE(e,n,t))}function xk(e){Hr.key=0,Hr.keyEnd=0,Hr.value=0,Hr.valueEnd=0,Hr.textEnd=e.length}function cE(e,n,t){for(;n<t&&e.charCodeAt(n)<=32;)n++;return n}function Ek(e,n,t){for(;n<t&&e.charCodeAt(n)>32;)n++;return n}function rt(e,n,t){let r=Ke(),i=ga();if(qr(r,i,n)){let o=ln(),c=cm();Ox(o,c,r,e,n,r[Nt],t,!1)}return rt}function O0(e,n,t,r,i){let o=n.inputs,c=i?"class":"style";Am(e,t,o[c],c,r)}function hr(e,n){return Sk(e,n,null,!0),hr}function uE(e){Dk(Rk,Ik,e,!0)}function Ik(e,n){for(let t=bk(n);t>=0;t=lE(n,t))Q0(e,vk(n),!0)}function Sk(e,n,t,r){let i=Ke(),o=ln(),c=om(2);if(o.firstUpdatePass&&fE(o,e,c,r),n!==Ir&&qr(i,c,n)){let h=o.data[ki()];hE(o,h,i,i[Nt],e,i[c+1]=kk(n,t),r,c)}}function Dk(e,n,t,r){let i=ln(),o=om(2);i.firstUpdatePass&&fE(i,null,o,r);let c=Ke();if(t!==Ir&&qr(c,o,t)){let h=i.data[ki()];if(pE(h,r)&&!dE(i,o)){let g=r?h.classesWithoutHost:h.stylesWithoutHost;g!==null&&(t=Pg(g,t||"")),O0(i,h,c,t,r)}else Pk(i,h,c,c[Nt],c[o+1],c[o+1]=Nk(e,n,t),r,o)}}function dE(e,n){return n>=e.expandoStartIndex}function fE(e,n,t,r){let i=e.data;if(i[t+1]===null){let o=i[ki()],c=dE(e,t);pE(o,r)&&n===null&&!c&&(n=!1),n=Mk(i,o,n,r),Ck(i,o,n,t,c,r)}}function Mk(e,n,t,r){let i=RN(e),o=r?n.residualClasses:n.residualStyles;if(i===null)(r?n.classBindings:n.styleBindings)===0&&(t=Ag(null,e,n,t,r),t=Vl(t,n.attrs,r),o=null);else{let c=n.directiveStylingLast;if(c===-1||e[c]!==i)if(t=Ag(i,e,n,t,r),o===null){let g=Ak(e,n,r);g!==void 0&&Array.isArray(g)&&(g=Ag(null,e,n,g[1],r),g=Vl(g,n.attrs,r),Tk(e,n,r,g))}else o=Ok(e,n,r)}return o!==void 0&&(r?n.residualClasses=o:n.residualStyles=o),t}function Ak(e,n,t){let r=t?n.classBindings:n.styleBindings;if(fa(r)!==0)return e[ls(r)]}function Tk(e,n,t,r){let i=t?n.classBindings:n.styleBindings;e[ls(i)]=r}function Ok(e,n,t){let r,i=n.directiveEnd;for(let o=1+n.directiveStylingLast;o<i;o++){let c=e[o].hostAttrs;r=Vl(r,c,t)}return Vl(r,n.attrs,t)}function Ag(e,n,t,r,i){let o=null,c=t.directiveEnd,h=t.directiveStylingLast;for(h===-1?h=t.directiveStart:h++;h<c&&(o=n[h],r=Vl(r,o.hostAttrs,i),o!==e);)h++;return e!==null&&(t.directiveStylingLast=h),r}function Vl(e,n,t){let r=t?1:2,i=-1;if(n!==null)for(let o=0;o<n.length;o++){let c=n[o];typeof c=="number"?i=c:i===r&&(Array.isArray(e)||(e=e===void 0?[]:["",e]),Q0(e,c,t?!0:n[++o]))}return e===void 0?null:e}function Nk(e,n,t){if(t==null||t==="")return Vn;let r=[],i=Fi(t);if(Array.isArray(i))for(let o=0;o<i.length;o++)e(r,i[o],!0);else if(typeof i=="object")for(let o in i)i.hasOwnProperty(o)&&e(r,o,i[o]);else typeof i=="string"&&n(r,i);return r}function Rk(e,n,t){let r=String(n);r!==""&&!r.includes(" ")&&Q0(e,r,t)}function Pk(e,n,t,r,i,o,c,h){i===Ir&&(i=Vn);let g=0,m=0,v=0<i.length?i[0]:null,b=0<o.length?o[0]:null;for(;v!==null||b!==null;){let I=g<i.length?i[g+1]:void 0,M=m<o.length?o[m+1]:void 0,R=null,H;v===b?(g+=2,m+=2,I!==M&&(R=b,H=M)):b===null||v!==null&&v<b?(g+=2,R=v):(m+=2,R=b,H=M),R!==null&&hE(e,n,t,r,R,H,c,h),v=g<i.length?i[g]:null,b=m<o.length?o[m]:null}}function hE(e,n,t,r,i,o,c,h){if(!(n.type&3))return;let g=e.data,m=g[h+1],v=yk(m)?vv(g,n,t,i,fa(m),c):void 0;if(!Qd(v)){Qd(o)||gk(m)&&(o=vv(g,null,t,i,h,c));let b=ab(ki(),t);gP(r,c,b,i,o)}}function vv(e,n,t,r,i,o){let c=n===null,h;for(;i>0;){let g=e[i],m=Array.isArray(g),v=m?g[1]:g,b=v===null,I=t[i+1];I===Ir&&(I=b?Vn:void 0);let M=b?yg(I,r):v===r?I:void 0;if(m&&!Qd(M)&&(M=yg(g,r)),Qd(M)&&(h=M,c))return h;let R=e[i+1];i=c?ls(R):fa(R)}if(n!==null){let g=o?n.residualClasses:n.residualStyles;g!=null&&(h=yg(g,r))}return h}function Qd(e){return e!==void 0}function kk(e,n){return e==null||e===""||(typeof n=="string"?e=e+n:typeof e=="object"&&(e=jn(Fi(e)))),e}function pE(e,n){return(e.flags&(n?8:16))!==0}var N0=class{destroy(n){}updateValue(n,t){}swap(n,t){let r=Math.min(n,t),i=Math.max(n,t),o=this.detach(i);if(i-r>1){let c=this.detach(r);this.attach(r,o),this.attach(i,c)}else this.attach(r,o)}move(n,t){this.attach(t,this.detach(n))}};function Tg(e,n,t,r,i){return e===t&&Object.is(n,r)?1:Object.is(i(e,n),i(t,r))?-1:0}function Fk(e,n,t){let r,i,o=0,c=e.length-1,h=void 0;if(Array.isArray(n)){let g=n.length-1;for(;o<=c&&o<=g;){let m=e.at(o),v=n[o],b=Tg(o,m,o,v,t);if(b!==0){b<0&&e.updateValue(o,v),o++;continue}let I=e.at(c),M=n[g],R=Tg(c,I,g,M,t);if(R!==0){R<0&&e.updateValue(c,M),c--,g--;continue}let H=t(o,m),X=t(c,I),$=t(o,v);if(Object.is($,X)){let ce=t(g,M);Object.is(ce,H)?(e.swap(o,c),e.updateValue(c,M),g--,c--):e.move(c,o),e.updateValue(o,v),o++;continue}if(r??=new Kd,i??=xv(e,o,c,t),R0(e,r,o,$))e.updateValue(o,v),o++,c++;else if(i.has($))r.set(H,e.detach(o)),c--;else{let ce=e.create(o,n[o]);e.attach(o,ce),o++,c++}}for(;o<=g;)bv(e,r,t,o,n[o]),o++}else if(n!=null){let g=n[Symbol.iterator](),m=g.next();for(;!m.done&&o<=c;){let v=e.at(o),b=m.value,I=Tg(o,v,o,b,t);if(I!==0)I<0&&e.updateValue(o,b),o++,m=g.next();else{r??=new Kd,i??=xv(e,o,c,t);let M=t(o,b);if(R0(e,r,o,M))e.updateValue(o,b),o++,c++,m=g.next();else if(!i.has(M))e.attach(o,e.create(o,b)),o++,c++,m=g.next();else{let R=t(o,v);r.set(R,e.detach(o)),c--}}}for(;!m.done;)bv(e,r,t,e.length,m.value),m=g.next()}for(;o<=c;)e.destroy(e.detach(c--));r?.forEach(g=>{e.destroy(g)})}function R0(e,n,t,r){return n!==void 0&&n.has(r)?(e.attach(t,n.get(r)),n.delete(r),!0):!1}function bv(e,n,t,r,i){if(R0(e,n,r,t(r,i)))e.updateValue(r,i);else{let o=e.create(r,i);e.attach(r,o)}}function xv(e,n,t,r){let i=new Set;for(let o=n;o<=t;o++)i.add(r(o,e.at(o)));return i}var Kd=class{constructor(){this.kvMap=new Map,this._vMap=void 0}has(n){return this.kvMap.has(n)}delete(n){if(!this.has(n))return!1;let t=this.kvMap.get(n);return this._vMap!==void 0&&this._vMap.has(t)?(this.kvMap.set(n,this._vMap.get(t)),this._vMap.delete(t)):this.kvMap.delete(n),!0}get(n){return this.kvMap.get(n)}set(n,t){if(this.kvMap.has(n)){let r=this.kvMap.get(n);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,t)}else this.kvMap.set(n,t)}forEach(n){for(let[t,r]of this.kvMap)if(n(r,t),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),n(r,t)}}};function gn(e,n){Bi("NgControlFlow");let t=Ke(),r=ga(),i=t[r]!==Ir?t[r]:-1,o=i!==-1?Jd(t,an+i):void 0,c=0;if(qr(t,r,e)){let h=qe(null);try{if(o!==void 0&&jx(o,c),e!==-1){let g=an+e,m=Jd(t,g),v=L0(t[De],g),b=Ll(m,v.tView.ssrId),I=xf(t,v,n,{dehydratedView:b});Ef(m,I,c,Fl(v,b))}}finally{qe(h)}}else if(o!==void 0){let h=Vx(o,c);h!==void 0&&(h[kn]=n)}}var P0=class{constructor(n,t,r){this.lContainer=n,this.$implicit=t,this.$index=r}get $count(){return this.lContainer.length-Sn}};function mn(e,n){return n}var k0=class{constructor(n,t,r){this.hasEmptyBlock=n,this.trackByFn=t,this.liveCollection=r}};function yn(e,n,t,r,i,o,c,h,g,m,v,b,I){Bi("NgControlFlow");let M=Ke(),R=ln(),H=g!==void 0,X=Ke(),$=h?c.bind(X[ur][kn]):c,ce=new k0(H,$);X[an+e]=ce,M0(M,R,e+1,n,t,r,i,ho(R.consts,o)),H&&M0(M,R,e+2,g,m,v,b,ho(R.consts,I))}var F0=class extends N0{constructor(n,t,r){super(),this.lContainer=n,this.hostLView=t,this.templateTNode=r,this.operationsCounter=void 0,this.needsIndexUpdate=!1}get length(){return this.lContainer.length-Sn}at(n){return this.getLView(n)[kn].$implicit}attach(n,t){let r=t[Gr];this.needsIndexUpdate||=n!==this.length,Ef(this.lContainer,t,n,Fl(this.templateTNode,r))}detach(n){return this.needsIndexUpdate||=n!==this.length-1,Lk(this.lContainer,n)}create(n,t){let r=Ll(this.lContainer,this.templateTNode.tView.ssrId),i=xf(this.hostLView,this.templateTNode,new P0(this.lContainer,t,n),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(n){Cf(n[De],n),this.operationsCounter?.recordDestroy()}updateValue(n,t){this.getLView(n)[kn].$implicit=t}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let n=0;n<this.length;n++)this.getLView(n)[kn].$index=n}getLView(n){return Bk(this.lContainer,n)}};function Cn(e){let n=qe(null),t=ki();try{let r=Ke(),i=r[De],o=r[t],c=t+1,h=Jd(r,c);if(o.liveCollection===void 0){let m=L0(i,c);o.liveCollection=new F0(h,r,m)}else o.liveCollection.reset();let g=o.liveCollection;if(Fk(g,e,o.trackByFn),g.updateIndexes(),o.hasEmptyBlock){let m=ga(),v=g.length===0;if(qr(r,m,v)){let b=t+2,I=Jd(r,b);if(v){let M=L0(i,b),R=Ll(I,M.tView.ssrId),H=xf(r,M,void 0,{dehydratedView:R});Ef(I,H,0,Fl(M,R))}else jx(I,0)}}}finally{qe(n)}}function Jd(e,n){return e[n]}function Lk(e,n){return kl(e,n)}function Bk(e,n){return Vx(e,n)}function L0(e,n){return nm(e,n)}function Uk(e,n,t,r,i,o){let c=n.consts,h=ho(c,i),g=ql(n,e,2,r,h);return Mm(n,t,g,ho(c,o)),g.attrs!==null&&Yd(g,g.attrs,!1),g.mergedAttrs!==null&&Yd(g,g.mergedAttrs,!0),n.queries!==null&&n.queries.elementStart(n,g),g}function A(e,n,t,r){let i=Ke(),o=ln(),c=an+e,h=i[Nt],g=o.firstCreatePass?Uk(c,o,i,n,t,r):o.data[c],m=gE(o,i,g,h,n,e);i[c]=m;let v=cf(g);return cs(g,!0),Ex(h,m,g),!Xl(g)&&ff()&&_f(o,i,m,g),_N()===0&&po(m,i),wN(),v&&(Im(o,i,g),Em(o,g,i)),r!==null&&Sm(i,g),A}function T(){let e=Hn();im()?pb():(e=e.parent,cs(e,!1));let n=e;bN(n)&&EN(),vN();let t=ln();return t.firstCreatePass&&(hf(t,e),tm(e)&&t.queries.elementEnd(e)),n.classesWithoutHost!=null&&UN(n)&&O0(t,n,Ke(),n.classesWithoutHost,!0),n.stylesWithoutHost!=null&&VN(n)&&O0(t,n,Ke(),n.stylesWithoutHost,!1),T}function K(e,n,t,r){return A(e,n,t,r),T(),K}var gE=(e,n,t,r,i,o)=>(yo(!0),wm(r,i,bb()));function Vk(e,n,t,r,i,o){let c=n[Gr],h=!c||Wl()||Xl(t)||Gl(c,o);if(yo(h),h)return wm(r,i,bb());let g=If(c,e,n,t);return Kb(c,o)&&mf(c,o,g.nextSibling),c&&(Ub(t)||Vb(g))&&zl(t)&&(xN(t),bx(g)),g}function jk(){gE=Vk}function Hk(e,n,t,r,i){let o=n.consts,c=ho(o,r),h=ql(n,e,8,"ng-container",c);c!==null&&Yd(h,c,!0);let g=ho(o,i);return Mm(n,t,h,g),n.queries!==null&&n.queries.elementStart(n,h),h}function Bm(e,n,t){let r=Ke(),i=ln(),o=e+an,c=i.firstCreatePass?Hk(o,i,r,n,t):i.data[o];cs(c,!0);let h=mE(i,r,c,e);return r[o]=h,ff()&&_f(i,r,h,c),po(h,r),cf(c)&&(Im(i,r,c),Em(i,c,r)),t!=null&&Sm(r,c),Bm}function Um(){let e=Hn(),n=ln();return im()?pb():(e=e.parent,cs(e,!1)),n.firstCreatePass&&(hf(n,e),tm(e)&&n.queries.elementEnd(e)),Um}var mE=(e,n,t,r)=>(yo(!0),mx(n[Nt],""));function zk(e,n,t,r){let i,o=n[Gr],c=!o||Wl()||Gl(o,r)||Xl(t);if(yo(c),c)return mx(n[Nt],"");let h=If(o,e,n,t),g=MR(o,r);return mf(o,r,h),i=Sf(g,h),i}function Wk(){mE=zk}function kt(){return Ke()}var ef="en-US";var Gk=ef;function $k(e){typeof e=="string"&&(Gk=e.toLowerCase().replace(/_/g,"-"))}var qk=(e,n,t)=>{};function j(e,n,t,r){let i=Ke(),o=ln(),c=Hn();return yE(o,i,i[Nt],c,e,n,r),j}function Yk(e,n,t,r){let i=e.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let c=i[o];if(c===t&&i[o+1]===r){let h=n[Rd],g=i[o+2];return h.length>g?h[g]:null}typeof c=="string"&&(o+=2)}return null}function yE(e,n,t,r,i,o,c){let h=cf(r),m=e.firstCreatePass&&Lx(e),v=n[kn],b=Fx(n),I=!0;if(r.type&3||c){let H=dr(r,n),X=c?c(H):H,$=b.length,ce=c?me=>c($r(me[r.index])):r.index,Ze=null;if(!c&&h&&(Ze=Yk(e,n,i,r.index)),Ze!==null){let me=Ze.__ngLastListenerFn__||Ze;me.__ngNextListenerFn__=o,Ze.__ngLastListenerFn__=o,I=!1}else{o=Iv(r,n,v,o),qk(H,i,o);let me=t.listen(X,i,o);b.push(o,me),m&&m.push(i,ce,$,$+1)}}else o=Iv(r,n,v,o);let M=r.outputs,R;if(I&&M!==null&&(R=M[i])){let H=R.length;if(H)for(let X=0;X<H;X+=2){let $=R[X],ce=R[X+1],W=n[$][ce].subscribe(o),pe=b.length;b.push(o,W),m&&m.push(i,r.index,pe,-(pe+1))}}}function Ev(e,n,t,r){let i=qe(null);try{return ii(6,n,t),t(r)!==!1}catch(o){return Bx(e,o),!1}finally{ii(7,n,t),qe(i)}}function Iv(e,n,t,r){return function i(o){if(o===Function)return r;let c=e.componentOffset>-1?mo(e.index,n):n;Om(c,5);let h=Ev(n,t,r,o),g=i.__ngNextListenerFn__;for(;g;)h=Ev(n,t,g,o)&&h,g=g.__ngNextListenerFn__;return h}}function Ne(e=1){return kN(e)}function Mf(e,n,t){q3(e,n,t)}function Zl(e){let n=Ke(),t=ln(),r=mb();sm(r+1);let i=km(t,r);if(e.dirty&&gN(n)===((i.metadata.flags&2)===2)){if(i.matches===null)e.reset([]);else{let o=Z3(n,r);e.reset(o,sR),e.notifyOnChanges()}return!0}return!1}function Ql(){return G3(Ke(),mb())}function _a(e){let n=SN();return pN(n,an+e)}function P(e,n=""){let t=Ke(),r=ln(),i=e+an,o=r.firstCreatePass?ql(r,i,1,n,null):r.data[i],c=CE(r,t,o,n,e);t[i]=c,ff()&&_f(r,t,c,o),cs(o,!1)}var CE=(e,n,t,r,i)=>(yo(!0),gx(n[Nt],r));function Xk(e,n,t,r,i){let o=n[Gr],c=!o||Wl()||Xl(t)||Gl(o,i);return yo(c),c?gx(n[Nt],r):If(o,e,n,t)}function Zk(){CE=Xk}function jt(e){return Qt("",e,""),jt}function Qt(e,n,t){let r=Ke(),i=hk(r,e,n,t);return i!==Ir&&Ux(r,ki(),i),Qt}function Vm(e,n,t,r,i,o,c,h,g){let m=Ke(),v=pk(m,e,n,t,r,i,o,c,h,g);return v!==Ir&&Ux(m,ki(),v),Vm}function it(e,n,t){iE(n)&&(n=n());let r=Ke(),i=ga();if(qr(r,i,n)){let o=ln(),c=cm();Ox(o,c,r,e,n,r[Nt],t,!1)}return it}function st(e,n){let t=iE(e);return t&&e.set(n),t}function ot(e,n){let t=Ke(),r=ln(),i=Hn();return yE(r,t,t[Nt],i,e,n),ot}function Qk(e,n,t){let r=ln();if(r.firstCreatePass){let i=fo(e);B0(t,r.data,r.blueprint,i,!0),B0(n,r.data,r.blueprint,i,!1)}}function B0(e,n,t,r,i){if(e=Un(e),Array.isArray(e))for(let o=0;o<e.length;o++)B0(e[o],n,t,r,i);else{let o=ln(),c=Ke(),h=Hn(),g=sa(e)?e:Un(e.provide),m=eb(e),v=h.providerIndexes&1048575,b=h.directiveStart,I=h.providerIndexes>>20;if(sa(e)||!e.multi){let M=new is(m,i,z),R=Ng(g,n,i?v:v+I,b);R===-1?(qg(Ud(h,c),o,g),Og(o,e,n.length),n.push(g),h.directiveStart++,h.directiveEnd++,i&&(h.providerIndexes+=1048576),t.push(M),c.push(M)):(t[R]=M,c[R]=M)}else{let M=Ng(g,n,v+I,b),R=Ng(g,n,v,v+I),H=M>=0&&t[M],X=R>=0&&t[R];if(i&&!X||!i&&!H){qg(Ud(h,c),o,g);let $=e4(i?Jk:Kk,t.length,i,r,m);!i&&X&&(t[R].providerFactory=$),Og(o,e,n.length,0),n.push(g),h.directiveStart++,h.directiveEnd++,i&&(h.providerIndexes+=1048576),t.push($),c.push($)}else{let $=_E(t[i?R:M],m,!i&&r);Og(o,e,M>-1?M:R,$)}!i&&r&&X&&t[R].componentProviders++}}}function Og(e,n,t,r){let i=sa(n),o=eN(n);if(i||o){let g=(o?Un(n.useClass):n).prototype.ngOnDestroy;if(g){let m=e.destroyHooks||(e.destroyHooks=[]);if(!i&&n.multi){let v=m.indexOf(t);v===-1?m.push(t,[r,g]):m[v+1].push(r,g)}else m.push(t,g)}}}function _E(e,n,t){return t&&e.componentProviders++,e.multi.push(n)-1}function Ng(e,n,t,r){for(let i=t;i<r;i++)if(n[i]===e)return i;return-1}function Kk(e,n,t,r){return U0(this.multi,[])}function Jk(e,n,t,r){let i=this.multi,o;if(this.providerFactory){let c=this.providerFactory.componentProviders,h=os(t,t[De],this.providerFactory.index,r);o=h.slice(0,c),U0(i,o);for(let g=c;g<h.length;g++)o.push(h[g])}else o=[],U0(i,o);return o}function U0(e,n){for(let t=0;t<e.length;t++){let r=e[t];n.push(r())}return n}function e4(e,n,t,r,i){let o=new is(e,t,z);return o.multi=[],o.index=n,o.componentProviders=0,_E(o,i,r&&!t),o}function ds(e,n=[]){return t=>{t.providersResolver=(r,i)=>Qk(r,i?i(e):e,n)}}var t4=(()=>{class e{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=Qv(!1,t.type),i=r.length>0?Fm([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=fe({token:e,providedIn:"environment",factory:()=>new e(ze(Er))})}}return e})();function se(e){Bi("NgStandalone"),e.getStandaloneInjector=n=>n.get(t4).getOrCreateStandaloneInjector(e)}function wa(e,n,t,r,i,o){return r4(Ke(),DN(),e,n,t,r,i,o)}function n4(e,n){let t=e[n];return t===Ir?void 0:t}function r4(e,n,t,r,i,o,c,h){let g=n+t;return ak(e,g,i,o,c)?sk(e,g+3,h?r.call(h,i,o,c):r(i,o,c)):n4(e,g+3)}var Af=(()=>{class e{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=fe({token:e,factory:e.\u0275fac,providedIn:"platform"})}}return e})();var wE=new ve("");function fs(e){return!!e&&typeof e.then=="function"}function vE(e){return!!e&&typeof e.subscribe=="function"}var bE=new ve(""),xE=(()=>{class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=te(bE,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=i();if(fs(o))t.push(o);else if(vE(o)){let c=new Promise((h,g)=>{o.subscribe({complete:h,error:g})});t.push(c)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=fe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),va=new ve("");function i4(){fw(()=>{throw new de(600,!1)})}function o4(e){return e.isBoundToModule}var s4=10;function a4(e,n,t){try{let r=t();return fs(r)?r.catch(i=>{throw n.runOutsideAngular(()=>e.handleError(i)),i}):r}catch(r){throw n.runOutsideAngular(()=>e.handleError(r)),r}}var fi=(()=>{class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=te(iR),this.afterRenderManager=te(fk),this.zonelessEnabled=te(Rm),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new rn,this.afterTick=new rn,this.componentTypes=[],this.components=[],this.isStable=te(us).hasPendingTasks.pipe(Ve(t=>!t)),this._injector=te(Er)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}get injector(){return this._injector}bootstrap(t,r){let i=t instanceof qd;if(!this._injector.get(xE).done){let I=!i&&qv(t),M=!1;throw new de(405,M)}let c;i?c=t:c=this._injector.get(ua).resolveComponentFactory(t),this.componentTypes.push(c.componentType);let h=o4(c)?void 0:this._injector.get(go),g=r||c.selector,m=c.create(ai.NULL,[],g,h),v=m.location.nativeElement,b=m.injector.get(wE,null);return b?.registerApplication(v),m.onDestroy(()=>{this.detachView(m.hostView),Dd(this.components,m),b?.unregisterApplication(v)}),this._loadComponent(m),m}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new de(101,!1);let t=qe(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,qe(t),this.afterTick.next()}}synchronize(){let t=null;this._injector.destroyed||(t=this._injector.get(da,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<s4;)this.synchronizeOnce(t)}synchronizeOnce(t){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:o}of this._views)l4(i,o,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else t?.begin?.(),t?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>uf(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;Dd(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let r=this._injector.get(va,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Dd(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new de(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=fe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function Dd(e,n){let t=e.indexOf(n);t>-1&&e.splice(t,1)}var vd;function Tf(e){vd??=new WeakMap;let n=vd.get(e);if(n)return n;let t=e.isStable.pipe(Vr(r=>r)).toPromise().then(()=>{});return vd.set(e,t),e.onDestroy(()=>vd?.delete(e)),t}function l4(e,n,t,r){if(!t&&!uf(e))return;Wx(e,n,t&&!r?0:1)}var V0=class{constructor(n,t){this.ngModuleFactory=n,this.componentFactories=t}},jm=(()=>{class e{compileModuleSync(t){return new S0(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=Yv(t),o=px(i.declarations).reduce((c,h)=>{let g=es(h);return g&&c.push(new Bl(g)),c},[]);return new V0(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=fe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var c4=(()=>{class e{constructor(){this.zone=te(Zt),this.changeDetectionScheduler=te(ca),this.applicationRef=te(fi)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=fe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function u4({ngZoneFactory:e,ignoreChangesOutsideZone:n,scheduleInRootZone:t}){return e??=()=>new Zt(Be(re({},d4()),{scheduleInRootZone:t})),[{provide:Zt,useFactory:e},{provide:Jo,multi:!0,useFactory:()=>{let r=te(c4,{optional:!0});return()=>r.initialize()}},{provide:Jo,multi:!0,useFactory:()=>{let r=te(f4);return()=>{r.initialize()}}},n===!0?{provide:Qx,useValue:!0}:[],{provide:Kx,useValue:t??kb}]}function d4(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}var f4=(()=>{class e{constructor(){this.subscription=new Ut,this.initialized=!1,this.zone=te(Zt),this.pendingTasks=te(us)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Zt.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Zt.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=fe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var h4=(()=>{class e{constructor(){this.appRef=te(fi),this.taskService=te(us),this.ngZone=te(Zt),this.zonelessEnabled=te(Rm),this.disableScheduling=te(Qx,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new Ut,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(jd):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(te(Kx,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Kg||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?iv:Lb;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(jd+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,iv(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=fe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function p4(){return typeof $localize<"u"&&$localize.locale||ef}var Hm=new ve("",{providedIn:"root",factory:()=>te(Hm,He.Optional|He.SkipSelf)||p4()});var EE=new ve("");function bd(e){return!!e.platformInjector}function g4(e){let n=bd(e)?e.r3Injector:e.moduleRef.injector,t=n.get(Zt);return t.run(()=>{bd(e)?e.r3Injector.resolveInjectorInitializers():e.moduleRef.resolveInjectorInitializers();let r=n.get(Ai,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:o=>{r.handleError(o)}})}),bd(e)){let o=()=>n.destroy(),c=e.platformInjector.get(EE);c.add(o),n.onDestroy(()=>{i.unsubscribe(),c.delete(o)})}else e.moduleRef.onDestroy(()=>{Dd(e.allPlatformModules,e.moduleRef),i.unsubscribe()});return a4(r,t,()=>{let o=n.get(xE);return o.runInitializers(),o.donePromise.then(()=>{let c=n.get(Hm,ef);if($k(c||ef),bd(e)){let h=n.get(fi);return e.rootComponent!==void 0&&h.bootstrap(e.rootComponent),h}else return m4(e.moduleRef,e.allPlatformModules),e.moduleRef})})})}function m4(e,n){let t=e.injector.get(fi);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(e.instance.ngDoBootstrap)e.instance.ngDoBootstrap(t);else throw new de(-403,!1);n.push(e)}var Md=null;function y4(e=[],n){return ai.create({name:n,providers:[{provide:af,useValue:"platform"},{provide:EE,useValue:new Set([()=>Md=null])},...e]})}function C4(e=[]){if(Md)return Md;let n=y4(e);return Md=n,i4(),_4(n),n}function _4(e){e.get(hm,null)?.forEach(t=>t())}var Ui=(()=>{class e{static{this.__NG_ELEMENT_ID__=w4}}return e})();function w4(e){return v4(Hn(),Ke(),(e&16)===16)}function v4(e,n,t){if(zl(e)&&!t){let r=mo(e.index,n);return new ss(r,r)}else if(e.type&175){let r=n[ur];return new ss(r,n)}return null}var j0=class{constructor(){}supports(n){return oE(n)}create(n){return new H0(n)}},b4=(e,n)=>n,H0=class{constructor(n){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=n||b4}forEachItem(n){let t;for(t=this._itHead;t!==null;t=t._next)n(t)}forEachOperation(n){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let c=!r||t&&t.currentIndex<Sv(r,i,o)?t:r,h=Sv(c,i,o),g=c.currentIndex;if(c===r)i--,r=r._nextRemoved;else if(t=t._next,c.previousIndex==null)i++;else{o||(o=[]);let m=h-i,v=g-i;if(m!=v){for(let I=0;I<m;I++){let M=I<o.length?o[I]:o[I]=0,R=M+I;v<=R&&R<m&&(o[I]=M+1)}let b=c.previousIndex;o[b]=v-m}}h!==g&&n(c,h,g)}}forEachPreviousItem(n){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)n(t)}forEachAddedItem(n){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)n(t)}forEachMovedItem(n){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)n(t)}forEachRemovedItem(n){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)n(t)}forEachIdentityChange(n){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)n(t)}diff(n){if(n==null&&(n=[]),!oE(n))throw new de(900,!1);return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let t=this._itHead,r=!1,i,o,c;if(Array.isArray(n)){this.length=n.length;for(let h=0;h<this.length;h++)o=n[h],c=this._trackByFn(h,o),t===null||!Object.is(t.trackById,c)?(t=this._mismatch(t,o,c,h),r=!0):(r&&(t=this._verifyReinsertion(t,o,c,h)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,ok(n,h=>{c=this._trackByFn(i,h),t===null||!Object.is(t.trackById,c)?(t=this._mismatch(t,h,c,i),r=!0):(r&&(t=this._verifyReinsertion(t,h,c,i)),Object.is(t.item,h)||this._addIdentityChange(t,h)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=n,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let n;for(n=this._previousItHead=this._itHead;n!==null;n=n._next)n._nextPrevious=n._next;for(n=this._additionsHead;n!==null;n=n._nextAdded)n.previousIndex=n.currentIndex;for(this._additionsHead=this._additionsTail=null,n=this._movesHead;n!==null;n=n._nextMoved)n.previousIndex=n.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(n,t,r,i){let o;return n===null?o=this._itTail:(o=n._prev,this._remove(n)),n=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),n!==null?(Object.is(n.item,t)||this._addIdentityChange(n,t),this._reinsertAfter(n,o,i)):(n=this._linkedRecords===null?null:this._linkedRecords.get(r,i),n!==null?(Object.is(n.item,t)||this._addIdentityChange(n,t),this._moveAfter(n,o,i)):n=this._addAfter(new z0(t,r),o,i)),n}_verifyReinsertion(n,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?n=this._reinsertAfter(o,n._prev,i):n.currentIndex!=i&&(n.currentIndex=i,this._addToMoves(n,i)),n}_truncate(n){for(;n!==null;){let t=n._next;this._addToRemovals(this._unlink(n)),n=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(n,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(n);let i=n._prevRemoved,o=n._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(n,t,r),this._addToMoves(n,r),n}_moveAfter(n,t,r){return this._unlink(n),this._insertAfter(n,t,r),this._addToMoves(n,r),n}_addAfter(n,t,r){return this._insertAfter(n,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=n:this._additionsTail=this._additionsTail._nextAdded=n,n}_insertAfter(n,t,r){let i=t===null?this._itHead:t._next;return n._next=i,n._prev=t,i===null?this._itTail=n:i._prev=n,t===null?this._itHead=n:t._next=n,this._linkedRecords===null&&(this._linkedRecords=new tf),this._linkedRecords.put(n),n.currentIndex=r,n}_remove(n){return this._addToRemovals(this._unlink(n))}_unlink(n){this._linkedRecords!==null&&this._linkedRecords.remove(n);let t=n._prev,r=n._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,n}_addToMoves(n,t){return n.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=n:this._movesTail=this._movesTail._nextMoved=n),n}_addToRemovals(n){return this._unlinkedRecords===null&&(this._unlinkedRecords=new tf),this._unlinkedRecords.put(n),n.currentIndex=null,n._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=n,n._prevRemoved=null):(n._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=n),n}_addIdentityChange(n,t){return n.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=n:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=n,n}},z0=class{constructor(n,t){this.item=n,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},W0=class{constructor(){this._head=null,this._tail=null}add(n){this._head===null?(this._head=this._tail=n,n._nextDup=null,n._prevDup=null):(this._tail._nextDup=n,n._prevDup=this._tail,n._nextDup=null,this._tail=n)}get(n,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,n))return r;return null}remove(n){let t=n._prevDup,r=n._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},tf=class{constructor(){this.map=new Map}put(n){let t=n.trackById,r=this.map.get(t);r||(r=new W0,this.map.set(t,r)),r.add(n)}get(n,t){let r=n,i=this.map.get(r);return i?i.get(n,t):null}remove(n){let t=n.trackById;return this.map.get(t).remove(n)&&this.map.delete(t),n}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function Sv(e,n,t){let r=e.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+n+i}var G0=class{constructor(){}supports(n){return n instanceof Map||Lm(n)}create(){return new $0}},$0=class{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return this._additionsHead!==null||this._changesHead!==null||this._removalsHead!==null}forEachItem(n){let t;for(t=this._mapHead;t!==null;t=t._next)n(t)}forEachPreviousItem(n){let t;for(t=this._previousMapHead;t!==null;t=t._nextPrevious)n(t)}forEachChangedItem(n){let t;for(t=this._changesHead;t!==null;t=t._nextChanged)n(t)}forEachAddedItem(n){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)n(t)}forEachRemovedItem(n){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)n(t)}diff(n){if(!n)n=new Map;else if(!(n instanceof Map||Lm(n)))throw new de(900,!1);return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(n,(r,i)=>{if(t&&t.key===i)this._maybeAddToChanges(t,r),this._appendAfter=t,t=t._next;else{let o=this._getOrCreateRecordForKey(i,r);t=this._insertBeforeOrAppend(t,o)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let r=t;r!==null;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(n,t){if(n){let r=n._prev;return t._next=n,t._prev=r,n._prev=t,r&&(r._next=t),n===this._mapHead&&(this._mapHead=t),this._appendAfter=n,n}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(n,t){if(this._records.has(n)){let i=this._records.get(n);this._maybeAddToChanges(i,t);let o=i._prev,c=i._next;return o&&(o._next=c),c&&(c._prev=o),i._next=null,i._prev=null,i}let r=new q0(n);return this._records.set(n,r),r.currentValue=t,this._addToAdditions(r),r}_reset(){if(this.isDirty){let n;for(this._previousMapHead=this._mapHead,n=this._previousMapHead;n!==null;n=n._next)n._nextPrevious=n._next;for(n=this._changesHead;n!==null;n=n._nextChanged)n.previousValue=n.currentValue;for(n=this._additionsHead;n!=null;n=n._nextAdded)n.previousValue=n.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(n,t){Object.is(t,n.currentValue)||(n.previousValue=n.currentValue,n.currentValue=t,this._addToChanges(n))}_addToAdditions(n){this._additionsHead===null?this._additionsHead=this._additionsTail=n:(this._additionsTail._nextAdded=n,this._additionsTail=n)}_addToChanges(n){this._changesHead===null?this._changesHead=this._changesTail=n:(this._changesTail._nextChanged=n,this._changesTail=n)}_forEach(n,t){n instanceof Map?n.forEach(t):Object.keys(n).forEach(r=>t(n[r],r))}},q0=class{constructor(n){this.key=n,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}};function Dv(){return new zm([new j0])}var zm=(()=>{class e{static{this.\u0275prov=fe({token:e,providedIn:"root",factory:Dv})}constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new e(t)}static extend(t){return{provide:e,useFactory:r=>e.create(t,r||Dv()),deps:[[e,new X0,new sf]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new de(901,!1)}}return e})();function Mv(){return new Wm([new G0])}var Wm=(()=>{class e{static{this.\u0275prov=fe({token:e,providedIn:"root",factory:Mv})}constructor(t){this.factories=t}static create(t,r){if(r){let i=r.factories.slice();t=t.concat(i)}return new e(t)}static extend(t){return{provide:e,useFactory:r=>e.create(t,r||Mv()),deps:[[e,new X0,new sf]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r)return r;throw new de(901,!1)}}return e})();function IE(e){try{let{rootComponent:n,appProviders:t,platformProviders:r}=e,i=C4(r),o=[u4({}),{provide:ca,useExisting:h4},...t||[]],c=new Zd({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1});return g4({r3Injector:c.injector,platformInjector:i,rootComponent:n})}catch(n){return Promise.reject(n)}}var Av=!1;function x4(){Av||(Av=!0,ER(),jk(),Zk(),Wk(),dk(),V3(),v3(),xP())}function E4(e,n){return Tf(e)}function SE(){return ha([{provide:gd,useFactory:()=>{let e=!0;return Cd()&&(e=!!te(ya,{optional:!0})?.get(Zb,null)),e&&Bi("NgHydration"),e}},{provide:Jo,useValue:()=>{p3(!1),Cd()&&te(gd)&&(I4(),x4())},multi:!0},{provide:ex,useFactory:()=>Cd()&&te(gd)},{provide:va,useFactory:()=>{if(Cd()&&te(gd)){let e=te(fi),n=te(ai);return()=>{E4(e,n).then(()=>{C3(e)})}}return()=>{}},multi:!0}])}function I4(){let e=pf(),n;for(let t of e.body.childNodes)if(t.nodeType===Node.COMMENT_NODE&&t.textContent?.trim()===bR){n=t;break}if(!n)throw new de(-507,!1)}function Kl(e){return typeof e=="boolean"?e:e!=null&&e!=="false"}function Jl(e,n){Bi("NgSignals");let t=cw(e);return n?.equal&&(t[xi].equal=n.equal),t}function Vi(e){let n=qe(null);try{return e()}finally{qe(n)}}var OE=null;function ji(){return OE}function NE(e){OE??=e}var Of=class{};var Jn=new ve(""),RE=(()=>{class e{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=fe({token:e,factory:()=>te(M4),providedIn:"platform"})}}return e})();var M4=(()=>{class e extends RE{constructor(){super(),this._doc=te(Jn),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ji().getBaseHref(this._doc)}onPopState(t){let r=ji().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=ji().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=fe({token:e,factory:()=>new e,providedIn:"platform"})}}return e})();function PE(e,n){if(e.length==0)return n;if(n.length==0)return e;let t=0;return e.endsWith("/")&&t++,n.startsWith("/")&&t++,t==2?e+n.substring(1):t==1?e+n:e+"/"+n}function DE(e){let n=e.match(/#|\?|$/),t=n&&n.index||e.length,r=t-(e[t-1]==="/"?1:0);return e.slice(0,r)+e.slice(t)}function hs(e){return e&&e[0]!=="?"?"?"+e:e}var Rf=(()=>{class e{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=fe({token:e,factory:()=>te(kE),providedIn:"root"})}}return e})(),A4=new ve(""),kE=(()=>{class e extends Rf{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??te(Jn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return PE(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+hs(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let c=this.prepareExternalUrl(i+hs(o));this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,o){let c=this.prepareExternalUrl(i+hs(o));this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||e)(ze(RE),ze(A4,8))}}static{this.\u0275prov=fe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var ec=(()=>{class e{constructor(t){this._subject=new Pt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=N4(DE(ME(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+hs(r))}normalize(t){return e.stripTrailingSlash(O4(this._basePath,ME(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+hs(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+hs(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=hs}static{this.joinWithSlash=PE}static{this.stripTrailingSlash=DE}static{this.\u0275fac=function(r){return new(r||e)(ze(Rf))}}static{this.\u0275prov=fe({token:e,factory:()=>T4(),providedIn:"root"})}}return e})();function T4(){return new ec(ze(Rf))}function O4(e,n){if(!e||!n.startsWith(e))return n;let t=n.substring(e.length);return t===""||["/",";","?","#"].includes(t[0])?t:n}function ME(e){return e.replace(/\/index.html$/,"")}function N4(e){if(new RegExp("^(https?:)?//").test(e)){let[,t]=e.split(/\/\/[^\/]+/);return t}return e}function Ym(e,n){n=encodeURIComponent(n);for(let t of e.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===n)return decodeURIComponent(o)}return null}var Gm=class{constructor(n,t,r,i){this.$implicit=n,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},FE=(()=>{class e{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;if(!this._differ&&t)if(0)try{}catch{}else this._differ=this._differs.find(t).create(this.ngForTrackBy)}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,c)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Gm(i.item,this._ngForOf,-1,-1),c===null?void 0:c);else if(c==null)r.remove(o===null?void 0:o);else if(o!==null){let h=r.get(o);r.move(h,c),AE(h,i)}});for(let i=0,o=r.length;i<o;i++){let h=r.get(i).context;h.index=i,h.count=o,h.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);AE(o,i)})}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||e)(z(wo),z(as),z(zm))}}static{this.\u0275dir=$t({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return e})();function AE(e,n){e.context.$implicit=n.item}var ba=(()=>{class e{constructor(t,r){this._viewContainer=t,this._context=new $m,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){TE("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){TE("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||e)(z(wo),z(as))}}static{this.\u0275dir=$t({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return e})(),$m=class{constructor(){this.$implicit=null,this.ngIf=null}};function TE(e,n){if(!!!(!n||n.createEmbeddedView))throw new Error(`${e} must be a TemplateRef, but received '${jn(n)}'.`)}var xa=(()=>{class e{constructor(t,r,i){this._ngEl=t,this._differs=r,this._renderer=i,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){let t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,r){let[i,o]=t.split("."),c=i.indexOf("-")===-1?void 0:li.DashCase;r!=null?this._renderer.setStyle(this._ngEl.nativeElement,i,o?`${r}${o}`:r,c):this._renderer.removeStyle(this._ngEl.nativeElement,i,c)}_applyChanges(t){t.forEachRemovedItem(r=>this._setStyle(r.key,null)),t.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}static{this.\u0275fac=function(r){return new(r||e)(z(fr),z(Wm),z(Xr))}}static{this.\u0275dir=$t({type:e,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0})}}return e})();var zn=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=Ri({type:e})}static{this.\u0275inj=Ni({})}}return e})(),LE="browser",R4="server";function tc(e){return e===R4}var Nf=class{};var kf=class e{constructor(n){this.normalizedNames=new Map,this.lazyUpdate=null,n?typeof n=="string"?this.lazyInit=()=>{this.headers=new Map,n.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),o=i.toLowerCase(),c=t.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(c):this.headers.set(o,[c])}})}:typeof Headers<"u"&&n instanceof Headers?(this.headers=new Map,n.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(n).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(n){return this.init(),this.headers.has(n.toLowerCase())}get(n){this.init();let t=this.headers.get(n.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(n){return this.init(),this.headers.get(n.toLowerCase())||null}append(n,t){return this.clone({name:n,value:t,op:"a"})}set(n,t){return this.clone({name:n,value:t,op:"s"})}delete(n,t){return this.clone({name:n,value:t,op:"d"})}maybeSetNormalizedName(n,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,n)}init(){this.lazyInit&&(this.lazyInit instanceof e?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(n=>this.applyUpdate(n)),this.lazyUpdate=null))}copyFrom(n){n.init(),Array.from(n.headers.keys()).forEach(t=>{this.headers.set(t,n.headers.get(t)),this.normalizedNames.set(t,n.normalizedNames.get(t))})}clone(n){let t=new e;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof e?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([n]),t}applyUpdate(n){let t=n.name.toLowerCase();switch(n.op){case"a":case"s":let r=n.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(n.name,t);let i=(n.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let o=n.value;if(!o)this.headers.delete(t),this.normalizedNames.delete(t);else{let c=this.headers.get(t);if(!c)return;c=c.filter(h=>o.indexOf(h)===-1),c.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,c)}break}}setHeaderEntries(n,t){let r=(Array.isArray(t)?t:[t]).map(o=>o.toString()),i=n.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(n,i)}forEach(n){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>n(this.normalizedNames.get(t),this.headers.get(t)))}};var GE=function(e){return e[e.Sent=0]="Sent",e[e.UploadProgress=1]="UploadProgress",e[e.ResponseHeader=2]="ResponseHeader",e[e.DownloadProgress=3]="DownloadProgress",e[e.Response=4]="Response",e[e.User=5]="User",e}(GE||{}),Xm=class{constructor(n,t=200,r="OK"){this.headers=n.headers||new kf,this.status=n.status!==void 0?n.status:t,this.statusText=n.statusText||r,this.url=n.url||null,this.ok=this.status>=200&&this.status<300}};var Ff=class e extends Xm{constructor(n={}){super(n),this.type=GE.Response,this.body=n.body!==void 0?n.body:null}clone(n={}){return new e({body:n.body!==void 0?n.body:this.body,headers:n.headers||this.headers,status:n.status!==void 0?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}};var P4=new ve("");var k4=new ve(""),BE="b",UE="h",VE="s",jE="st",HE="u",zE="rt",Pf=new ve(""),F4=["GET","HEAD"];function L4(e,n){let M=te(Pf),{isCacheActive:t}=M,r=J_(M,["isCacheActive"]),{transferCache:i,method:o}=e;if(!t||i===!1||o==="POST"&&!r.includePostRequests&&!i||o!=="POST"&&!F4.includes(o)||!r.includeRequestsWithAuthHeaders&&B4(e)||r.filter?.(e)===!1)return n(e);let c=te(ya),h=te(k4,{optional:!0}),g=tc(te(di));if(h&&!g)throw new de(2803,!1);let m=g&&h?H4(e.url,h):e.url,v=V4(e,m),b=c.get(v,null),I=r.includeHeaders;if(typeof i=="object"&&i.includeHeaders&&(I=i.includeHeaders),b){let{[BE]:R,[zE]:H,[UE]:X,[VE]:$,[jE]:ce,[HE]:Ze}=b,me=R;switch(H){case"arraybuffer":me=new TextEncoder().encode(R).buffer;break;case"blob":me=new Blob([R]);break}let W=new kf(X);return Ae(new Ff({body:me,headers:W,status:$,statusText:ce,url:Ze}))}return n(e).pipe(sn(R=>{R instanceof Ff&&g&&c.set(v,{[BE]:R.body,[UE]:U4(R.headers,I),[VE]:R.status,[jE]:R.statusText,[HE]:m,[zE]:e.responseType})}))}function B4(e){return e.headers.has("authorization")||e.headers.has("proxy-authorization")}function U4(e,n){if(!n)return{};let t={};for(let r of n){let i=e.getAll(r);i!==null&&(t[r]=i)}return t}function WE(e){return[...e.keys()].sort().map(n=>`${n}=${e.getAll(n)}`).join("&")}function V4(e,n){let{params:t,method:r,responseType:i}=e,o=WE(t),c=e.serializeBody();c instanceof URLSearchParams?c=WE(c):typeof c!="string"&&(c="");let h=[r,i,n,c,o].join("|"),g=j4(h);return g}function j4(e){let n=0;for(let t of e)n=Math.imul(31,n)+t.charCodeAt(0)<<0;return n+=2147483648,n.toString()}function $E(e){return[{provide:Pf,useFactory:()=>(Bi("NgHttpTransferCache"),re({isCacheActive:!0},e))},{provide:P4,useValue:L4,multi:!0,deps:[ya,Pf]},{provide:va,multi:!0,useFactory:()=>{let n=te(fi),t=te(Pf);return()=>{Tf(n).then(()=>{t.isCacheActive=!1})}}}]}function H4(e,n){let t=new URL(e,"resolve://").origin,r=n[t];return r?e.replace(t,r):e}var Km=class extends Of{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Jm=class e extends Km{static makeCurrent(){NE(new e)}onAndCancel(n,t,r){return n.addEventListener(t,r),()=>{n.removeEventListener(t,r)}}dispatchEvent(n,t){n.dispatchEvent(t)}remove(n){n.remove()}createElement(n,t){return t=t||this.getDefaultDocument(),t.createElement(n)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(n){return n.nodeType===Node.ELEMENT_NODE}isShadowRoot(n){return n instanceof DocumentFragment}getGlobalEventTarget(n,t){return t==="window"?window:t==="document"?n:t==="body"?n.body:null}getBaseHref(n){let t=z4();return t==null?null:W4(t)}resetBaseElement(){nc=null}getUserAgent(){return window.navigator.userAgent}getCookie(n){return Ym(document.cookie,n)}},nc=null;function z4(){return nc=nc||document.querySelector("base"),nc?nc.getAttribute("href"):null}function W4(e){return new URL(e,document.baseURI).pathname}var G4=(()=>{class e{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=fe({token:e,factory:e.\u0275fac})}}return e})(),e1=new ve(""),ZE=(()=>{class e{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new de(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||e)(ze(e1),ze(Zt))}}static{this.\u0275prov=fe({token:e,factory:e.\u0275fac})}}return e})(),Lf=class{constructor(n){this._doc=n}},Zm="ng-app-id",QE=(()=>{class e{constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=tc(o),this.resetHostNodes()}addStyles(t){for(let r of t)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(t){for(let r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){let r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${Zm}="${this.appId}"]`);if(t?.length){let r=new Map;return t.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){let i=this.styleRef;if(i.has(t)){let o=i.get(t);return o.usage+=r,o.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){let i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===t)return i.delete(r),o.removeAttribute(Zm),o;{let c=this.doc.createElement("style");return this.nonce&&c.setAttribute("nonce",this.nonce),c.textContent=r,this.platformIsServer&&c.setAttribute(Zm,this.appId),t.appendChild(c),c}}addStyleToHost(t,r){let i=this.getStyleElement(t,r),o=this.styleRef,c=o.get(r)?.elements;c?c.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||e)(ze(Jn),ze(gf),ze(pm,8),ze(di))}}static{this.\u0275prov=fe({token:e,factory:e.\u0275fac})}}return e})(),Qm={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},r1=/%COMP%/g,KE="%COMP%",$4=`_nghost-${KE}`,q4=`_ngcontent-${KE}`,Y4=!0,X4=new ve("",{providedIn:"root",factory:()=>Y4});function Z4(e){return q4.replace(r1,e)}function Q4(e){return $4.replace(r1,e)}function JE(e,n){return n.map(t=>t.replace(r1,e))}var qE=(()=>{class e{constructor(t,r,i,o,c,h,g,m=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=c,this.platformId=h,this.ngZone=g,this.nonce=m,this.rendererByCompId=new Map,this.platformIsServer=tc(h),this.defaultRenderer=new rc(t,c,g,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===si.ShadowDom&&(r=Be(re({},r),{encapsulation:si.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof Bf?i.applyToHost(t):i instanceof ic&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let c=this.doc,h=this.ngZone,g=this.eventManager,m=this.sharedStylesHost,v=this.removeStylesOnCompDestroy,b=this.platformIsServer;switch(r.encapsulation){case si.Emulated:o=new Bf(g,m,r,this.appId,v,c,h,b);break;case si.ShadowDom:return new t1(g,m,t,r,c,h,this.nonce,b);default:o=new ic(g,m,r,v,c,h,b);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||e)(ze(ZE),ze(QE),ze(gf),ze(X4),ze(Jn),ze(di),ze(Zt),ze(pm))}}static{this.\u0275prov=fe({token:e,factory:e.\u0275fac})}}return e})(),rc=class{constructor(n,t,r,i){this.eventManager=n,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(n,t){return t?this.doc.createElementNS(Qm[t]||t,n):this.doc.createElement(n)}createComment(n){return this.doc.createComment(n)}createText(n){return this.doc.createTextNode(n)}appendChild(n,t){(YE(n)?n.content:n).appendChild(t)}insertBefore(n,t,r){n&&(YE(n)?n.content:n).insertBefore(t,r)}removeChild(n,t){t.remove()}selectRootElement(n,t){let r=typeof n=="string"?this.doc.querySelector(n):n;if(!r)throw new de(-5104,!1);return t||(r.textContent=""),r}parentNode(n){return n.parentNode}nextSibling(n){return n.nextSibling}setAttribute(n,t,r,i){if(i){t=i+":"+t;let o=Qm[i];o?n.setAttributeNS(o,t,r):n.setAttribute(t,r)}else n.setAttribute(t,r)}removeAttribute(n,t,r){if(r){let i=Qm[r];i?n.removeAttributeNS(i,t):n.removeAttribute(`${r}:${t}`)}else n.removeAttribute(t)}addClass(n,t){n.classList.add(t)}removeClass(n,t){n.classList.remove(t)}setStyle(n,t,r,i){i&(li.DashCase|li.Important)?n.style.setProperty(t,r,i&li.Important?"important":""):n.style[t]=r}removeStyle(n,t,r){r&li.DashCase?n.style.removeProperty(t):n.style[t]=""}setProperty(n,t,r){n!=null&&(n[t]=r)}setValue(n,t){n.nodeValue=t}listen(n,t,r){if(typeof n=="string"&&(n=ji().getGlobalEventTarget(this.doc,n),!n))throw new Error(`Unsupported event target ${n} for event ${t}`);return this.eventManager.addEventListener(n,t,this.decoratePreventDefault(r))}decoratePreventDefault(n){return t=>{if(t==="__ngUnwrap__")return n;(this.platformIsServer?this.ngZone.runGuarded(()=>n(t)):n(t))===!1&&t.preventDefault()}}};function YE(e){return e.tagName==="TEMPLATE"&&e.content!==void 0}var t1=class extends rc{constructor(n,t,r,i,o,c,h,g){super(n,o,c,g),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let m=JE(i.id,i.styles);for(let v of m){let b=document.createElement("style");h&&b.setAttribute("nonce",h),b.textContent=v,this.shadowRoot.appendChild(b)}}nodeOrShadowRoot(n){return n===this.hostEl?this.shadowRoot:n}appendChild(n,t){return super.appendChild(this.nodeOrShadowRoot(n),t)}insertBefore(n,t,r){return super.insertBefore(this.nodeOrShadowRoot(n),t,r)}removeChild(n,t){return super.removeChild(null,t)}parentNode(n){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(n)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},ic=class extends rc{constructor(n,t,r,i,o,c,h,g){super(n,o,c,h),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=g?JE(g,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Bf=class extends ic{constructor(n,t,r,i,o,c,h,g){let m=i+"-"+r.id;super(n,t,r,o,c,h,g,m),this.contentAttr=Z4(m),this.hostAttr=Q4(m)}applyToHost(n){this.applyStyles(),this.setAttribute(n,this.hostAttr,"")}createElement(n,t){let r=super.createElement(n,t);return super.setAttribute(r,this.contentAttr,""),r}},K4=(()=>{class e extends Lf{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||e)(ze(Jn))}}static{this.\u0275prov=fe({token:e,factory:e.\u0275fac})}}return e})(),XE=["alt","control","meta","shift"],J4={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},e8={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey},t8=(()=>{class e extends Lf{constructor(t){super(t)}supports(t){return e.parseEventName(t)!=null}addEventListener(t,r,i){let o=e.parseEventName(r),c=e.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ji().onAndCancel(t,o.domEventName,c))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=e._normalizeKey(r.pop()),c="",h=r.indexOf("code");if(h>-1&&(r.splice(h,1),c="code."),XE.forEach(m=>{let v=r.indexOf(m);v>-1&&(r.splice(v,1),c+=m+".")}),c+=o,r.length!=0||o.length===0)return null;let g={};return g.domEventName=i,g.fullKey=c,g}static matchEventFullKeyCode(t,r){let i=J4[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),XE.forEach(c=>{if(c!==i){let h=e8[c];h(t)&&(o+=c+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{e.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(r){return new(r||e)(ze(Jn))}}static{this.\u0275prov=fe({token:e,factory:e.\u0275fac})}}return e})();function eI(e,n){return IE(re({rootComponent:e},n8(n)))}function n8(e){return{appProviders:[...a8,...e?.providers??[]],platformProviders:s8}}function r8(){Jm.makeCurrent()}function i8(){return new Ai}function o8(){return Gb(document),document}var s8=[{provide:di,useValue:LE},{provide:hm,useValue:r8,multi:!0},{provide:Jn,useFactory:o8,deps:[]}];var a8=[{provide:af,useValue:"root"},{provide:Ai,useFactory:i8,deps:[]},{provide:e1,useClass:K4,multi:!0,deps:[Jn,Zt,di]},{provide:e1,useClass:t8,multi:!0,deps:[Jn]},qE,QE,ZE,{provide:da,useExisting:qE},{provide:Nf,useClass:G4,deps:[]},[]];var tI=(()=>{class e{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||e)(ze(Jn))}}static{this.\u0275prov=fe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var i1=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=fe({token:e,factory:function(r){let i=null;return r?i=new(r||e):i=ze(l8),i},providedIn:"root"})}}return e})(),l8=(()=>{class e extends i1{constructor(t){super(),this._doc=t}sanitize(t,r){if(r==null)return null;switch(t){case _o.NONE:return r;case _o.HTML:return Ca(r,"HTML")?Fi(r):fx(this._doc,String(r)).toString();case _o.STYLE:return Ca(r,"Style")?Fi(r):r;case _o.SCRIPT:if(Ca(r,"Script"))return Fi(r);throw new de(5200,!1);case _o.URL:return Ca(r,"URL")?Fi(r):Cm(String(r));case _o.RESOURCE_URL:if(Ca(r,"ResourceURL"))return Fi(r);throw new de(5201,!1);default:throw new de(5202,!1)}}bypassSecurityTrustHtml(t){return nx(t)}bypassSecurityTrustStyle(t){return rx(t)}bypassSecurityTrustScript(t){return ix(t)}bypassSecurityTrustUrl(t){return ox(t)}bypassSecurityTrustResourceUrl(t){return sx(t)}static{this.\u0275fac=function(r){return new(r||e)(ze(Jn))}}static{this.\u0275prov=fe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),n1=function(e){return e[e.NoHttpTransferCache=0]="NoHttpTransferCache",e[e.HttpTransferCacheOptions=1]="HttpTransferCacheOptions",e[e.I18nSupport=2]="I18nSupport",e[e.EventReplay=3]="EventReplay",e}(n1||{});function nI(...e){let n=[],t=new Set,r=t.has(n1.HttpTransferCacheOptions);for(let{\u0275providers:i,\u0275kind:o}of e)t.add(o),i.length&&n.push(i);return ha([[],SE(),t.has(n1.NoHttpTransferCache)||r?[]:$E({}),n])}var ke="primary",vc=Symbol("RouteTitle"),c1=class{constructor(n){this.params=n||{}}has(n){return Object.prototype.hasOwnProperty.call(this.params,n)}get(n){if(this.has(n)){let t=this.params[n];return Array.isArray(t)?t[0]:t}return null}getAll(n){if(this.has(n)){let t=this.params[n];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Ta(e){return new c1(e)}function c8(e,n,t){let r=t.path.split("/");if(r.length>e.length||t.pathMatch==="full"&&(n.hasChildren()||r.length<e.length))return null;let i={};for(let o=0;o<r.length;o++){let c=r[o],h=e[o];if(c[0]===":")i[c.substring(1)]=h;else if(c!==h.path)return null}return{consumed:e.slice(0,r.length),posParams:i}}function u8(e,n){if(e.length!==n.length)return!1;for(let t=0;t<e.length;++t)if(!hi(e[t],n[t]))return!1;return!0}function hi(e,n){let t=e?u1(e):void 0,r=n?u1(n):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!dI(e[i],n[i]))return!1;return!0}function u1(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}function dI(e,n){if(Array.isArray(e)&&Array.isArray(n)){if(e.length!==n.length)return!1;let t=[...e].sort(),r=[...n].sort();return t.every((i,o)=>r[o]===i)}else return e===n}function fI(e){return e.length>0?e[e.length-1]:null}function vo(e){return lg(e)?e:fs(e)?Et(Promise.resolve(e)):Ae(e)}var d8={exact:pI,subset:gI},hI={exact:f8,subset:h8,ignored:()=>!0};function iI(e,n,t){return d8[t.paths](e.root,n.root,t.matrixParams)&&hI[t.queryParams](e.queryParams,n.queryParams)&&!(t.fragment==="exact"&&e.fragment!==n.fragment)}function f8(e,n){return hi(e,n)}function pI(e,n,t){if(!gs(e.segments,n.segments)||!jf(e.segments,n.segments,t)||e.numberOfChildren!==n.numberOfChildren)return!1;for(let r in n.children)if(!e.children[r]||!pI(e.children[r],n.children[r],t))return!1;return!0}function h8(e,n){return Object.keys(n).length<=Object.keys(e).length&&Object.keys(n).every(t=>dI(e[t],n[t]))}function gI(e,n,t){return mI(e,n,n.segments,t)}function mI(e,n,t,r){if(e.segments.length>t.length){let i=e.segments.slice(0,t.length);return!(!gs(i,t)||n.hasChildren()||!jf(i,t,r))}else if(e.segments.length===t.length){if(!gs(e.segments,t)||!jf(e.segments,t,r))return!1;for(let i in n.children)if(!e.children[i]||!gI(e.children[i],n.children[i],r))return!1;return!0}else{let i=t.slice(0,e.segments.length),o=t.slice(e.segments.length);return!gs(e.segments,i)||!jf(e.segments,i,r)||!e.children[ke]?!1:mI(e.children[ke],n,o,r)}}function jf(e,n,t){return n.every((r,i)=>hI[t](e[i].parameters,r.parameters))}var zi=class{constructor(n=new ht([],{}),t={},r=null){this.root=n,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Ta(this.queryParams),this._queryParamMap}toString(){return m8.serialize(this)}},ht=class{constructor(n,t){this.segments=n,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Hf(this)}},ps=class{constructor(n,t){this.path=n,this.parameters=t}get parameterMap(){return this._parameterMap??=Ta(this.parameters),this._parameterMap}toString(){return CI(this)}};function p8(e,n){return gs(e,n)&&e.every((t,r)=>hi(t.parameters,n[r].parameters))}function gs(e,n){return e.length!==n.length?!1:e.every((t,r)=>t.path===n[r].path)}function g8(e,n){let t=[];return Object.entries(e.children).forEach(([r,i])=>{r===ke&&(t=t.concat(n(i,r)))}),Object.entries(e.children).forEach(([r,i])=>{r!==ke&&(t=t.concat(n(i,r)))}),t}var F1=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=fe({token:e,factory:()=>new dc,providedIn:"root"})}}return e})(),dc=class{parse(n){let t=new f1(n);return new zi(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(n){let t=`/${oc(n.root,!0)}`,r=_8(n.queryParams),i=typeof n.fragment=="string"?`#${y8(n.fragment)}`:"";return`${t}${r}${i}`}},m8=new dc;function Hf(e){return e.segments.map(n=>CI(n)).join("/")}function oc(e,n){if(!e.hasChildren())return Hf(e);if(n){let t=e.children[ke]?oc(e.children[ke],!1):"",r=[];return Object.entries(e.children).forEach(([i,o])=>{i!==ke&&r.push(`${i}:${oc(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=g8(e,(r,i)=>i===ke?[oc(e.children[ke],!1)]:[`${i}:${oc(r,!1)}`]);return Object.keys(e.children).length===1&&e.children[ke]!=null?`${Hf(e)}/${t[0]}`:`${Hf(e)}/(${t.join("//")})`}}function yI(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Uf(e){return yI(e).replace(/%3B/gi,";")}function y8(e){return encodeURI(e)}function d1(e){return yI(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function zf(e){return decodeURIComponent(e)}function oI(e){return zf(e.replace(/\+/g,"%20"))}function CI(e){return`${d1(e.path)}${C8(e.parameters)}`}function C8(e){return Object.entries(e).map(([n,t])=>`;${d1(n)}=${d1(t)}`).join("")}function _8(e){let n=Object.entries(e).map(([t,r])=>Array.isArray(r)?r.map(i=>`${Uf(t)}=${Uf(i)}`).join("&"):`${Uf(t)}=${Uf(r)}`).filter(t=>t);return n.length?`?${n.join("&")}`:""}var w8=/^[^\/()?;#]+/;function o1(e){let n=e.match(w8);return n?n[0]:""}var v8=/^[^\/()?;=#]+/;function b8(e){let n=e.match(v8);return n?n[0]:""}var x8=/^[^=?&#]+/;function E8(e){let n=e.match(x8);return n?n[0]:""}var I8=/^[^&#]+/;function S8(e){let n=e.match(I8);return n?n[0]:""}var f1=class{constructor(n){this.url=n,this.remaining=n}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ht([],{}):new ht([],this.parseChildren())}parseQueryParams(){let n={};if(this.consumeOptional("?"))do this.parseQueryParam(n);while(this.consumeOptional("&"));return n}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let n=[];for(this.peekStartsWith("(")||n.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),n.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(n.length>0||Object.keys(t).length>0)&&(r[ke]=new ht(n,t)),r}parseSegment(){let n=o1(this.remaining);if(n===""&&this.peekStartsWith(";"))throw new de(4009,!1);return this.capture(n),new ps(zf(n),this.parseMatrixParams())}parseMatrixParams(){let n={};for(;this.consumeOptional(";");)this.parseParam(n);return n}parseParam(n){let t=b8(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=o1(this.remaining);i&&(r=i,this.capture(r))}n[zf(t)]=zf(r)}parseQueryParam(n){let t=E8(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let c=S8(this.remaining);c&&(r=c,this.capture(r))}let i=oI(t),o=oI(r);if(n.hasOwnProperty(i)){let c=n[i];Array.isArray(c)||(c=[c],n[i]=c),c.push(o)}else n[i]=o}parseParens(n){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=o1(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new de(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):n&&(o=ke);let c=this.parseChildren();t[o]=Object.keys(c).length===1?c[ke]:new ht([],c),this.consumeOptional("//")}return t}peekStartsWith(n){return this.remaining.startsWith(n)}consumeOptional(n){return this.peekStartsWith(n)?(this.remaining=this.remaining.substring(n.length),!0):!1}capture(n){if(!this.consumeOptional(n))throw new de(4011,!1)}};function _I(e){return e.segments.length>0?new ht([],{[ke]:e}):e}function wI(e){let n={};for(let[r,i]of Object.entries(e.children)){let o=wI(i);if(r===ke&&o.segments.length===0&&o.hasChildren())for(let[c,h]of Object.entries(o.children))n[c]=h;else(o.segments.length>0||o.hasChildren())&&(n[r]=o)}let t=new ht(e.segments,n);return D8(t)}function D8(e){if(e.numberOfChildren===1&&e.children[ke]){let n=e.children[ke];return new ht(e.segments.concat(n.segments),n.children)}return e}function fc(e){return e instanceof zi}function M8(e,n,t=null,r=null){let i=vI(e);return bI(i,n,t,r)}function vI(e){let n;function t(o){let c={};for(let g of o.children){let m=t(g);c[g.outlet]=m}let h=new ht(o.url,c);return o===e&&(n=h),h}let r=t(e.root),i=_I(r);return n??i}function bI(e,n,t,r){let i=e;for(;i.parent;)i=i.parent;if(n.length===0)return s1(i,i,i,t,r);let o=A8(n);if(o.toRoot())return s1(i,i,new ht([],{}),t,r);let c=T8(o,i,e),h=c.processChildren?lc(c.segmentGroup,c.index,o.commands):EI(c.segmentGroup,c.index,o.commands);return s1(i,c.segmentGroup,h,t,r)}function Wf(e){return typeof e=="object"&&e!=null&&!e.outlets&&!e.segmentPath}function hc(e){return typeof e=="object"&&e!=null&&e.outlets}function s1(e,n,t,r,i){let o={};r&&Object.entries(r).forEach(([g,m])=>{o[g]=Array.isArray(m)?m.map(v=>`${v}`):`${m}`});let c;e===n?c=t:c=xI(e,n,t);let h=_I(wI(c));return new zi(h,o,i)}function xI(e,n,t){let r={};return Object.entries(e.children).forEach(([i,o])=>{o===n?r[i]=t:r[i]=xI(o,n,t)}),new ht(e.segments,r)}var Gf=class{constructor(n,t,r){if(this.isAbsolute=n,this.numberOfDoubleDots=t,this.commands=r,n&&r.length>0&&Wf(r[0]))throw new de(4003,!1);let i=r.find(hc);if(i&&i!==fI(r))throw new de(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function A8(e){if(typeof e[0]=="string"&&e.length===1&&e[0]==="/")return new Gf(!0,0,e);let n=0,t=!1,r=e.reduce((i,o,c)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let h={};return Object.entries(o.outlets).forEach(([g,m])=>{h[g]=typeof m=="string"?m.split("/"):m}),[...i,{outlets:h}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:c===0?(o.split("/").forEach((h,g)=>{g==0&&h==="."||(g==0&&h===""?t=!0:h===".."?n++:h!=""&&i.push(h))}),i):[...i,o]},[]);return new Gf(t,n,r)}var Da=class{constructor(n,t,r){this.segmentGroup=n,this.processChildren=t,this.index=r}};function T8(e,n,t){if(e.isAbsolute)return new Da(n,!0,0);if(!t)return new Da(n,!1,NaN);if(t.parent===null)return new Da(t,!0,0);let r=Wf(e.commands[0])?0:1,i=t.segments.length-1+r;return O8(t,i,e.numberOfDoubleDots)}function O8(e,n,t){let r=e,i=n,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new de(4005,!1);i=r.segments.length}return new Da(r,!1,i-o)}function N8(e){return hc(e[0])?e[0].outlets:{[ke]:e}}function EI(e,n,t){if(e??=new ht([],{}),e.segments.length===0&&e.hasChildren())return lc(e,n,t);let r=R8(e,n,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){let o=new ht(e.segments.slice(0,r.pathIndex),{});return o.children[ke]=new ht(e.segments.slice(r.pathIndex),e.children),lc(o,0,i)}else return r.match&&i.length===0?new ht(e.segments,{}):r.match&&!e.hasChildren()?h1(e,n,t):r.match?lc(e,0,i):h1(e,n,t)}function lc(e,n,t){if(t.length===0)return new ht(e.segments,{});{let r=N8(t),i={};if(Object.keys(r).some(o=>o!==ke)&&e.children[ke]&&e.numberOfChildren===1&&e.children[ke].segments.length===0){let o=lc(e.children[ke],n,t);return new ht(e.segments,o.children)}return Object.entries(r).forEach(([o,c])=>{typeof c=="string"&&(c=[c]),c!==null&&(i[o]=EI(e.children[o],n,c))}),Object.entries(e.children).forEach(([o,c])=>{r[o]===void 0&&(i[o]=c)}),new ht(e.segments,i)}}function R8(e,n,t){let r=0,i=n,o={match:!1,pathIndex:0,commandIndex:0};for(;i<e.segments.length;){if(r>=t.length)return o;let c=e.segments[i],h=t[r];if(hc(h))break;let g=`${h}`,m=r<t.length-1?t[r+1]:null;if(i>0&&g===void 0)break;if(g&&m&&typeof m=="object"&&m.outlets===void 0){if(!aI(g,m,c))return o;r+=2}else{if(!aI(g,{},c))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function h1(e,n,t){let r=e.segments.slice(0,n),i=0;for(;i<t.length;){let o=t[i];if(hc(o)){let g=P8(o.outlets);return new ht(r,g)}if(i===0&&Wf(t[0])){let g=e.segments[n];r.push(new ps(g.path,sI(t[0]))),i++;continue}let c=hc(o)?o.outlets[ke]:`${o}`,h=i<t.length-1?t[i+1]:null;c&&h&&Wf(h)?(r.push(new ps(c,sI(h))),i+=2):(r.push(new ps(c,{})),i++)}return new ht(r,{})}function P8(e){let n={};return Object.entries(e).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(n[t]=h1(new ht([],{}),0,r))}),n}function sI(e){let n={};return Object.entries(e).forEach(([t,r])=>n[t]=`${r}`),n}function aI(e,n,t){return e==t.path&&hi(n,t.parameters)}var cc="imperative",Mn=function(e){return e[e.NavigationStart=0]="NavigationStart",e[e.NavigationEnd=1]="NavigationEnd",e[e.NavigationCancel=2]="NavigationCancel",e[e.NavigationError=3]="NavigationError",e[e.RoutesRecognized=4]="RoutesRecognized",e[e.ResolveStart=5]="ResolveStart",e[e.ResolveEnd=6]="ResolveEnd",e[e.GuardsCheckStart=7]="GuardsCheckStart",e[e.GuardsCheckEnd=8]="GuardsCheckEnd",e[e.RouteConfigLoadStart=9]="RouteConfigLoadStart",e[e.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",e[e.ChildActivationStart=11]="ChildActivationStart",e[e.ChildActivationEnd=12]="ChildActivationEnd",e[e.ActivationStart=13]="ActivationStart",e[e.ActivationEnd=14]="ActivationEnd",e[e.Scroll=15]="Scroll",e[e.NavigationSkipped=16]="NavigationSkipped",e}(Mn||{}),Sr=class{constructor(n,t){this.id=n,this.url=t}},pc=class extends Sr{constructor(n,t,r="imperative",i=null){super(n,t),this.type=Mn.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},ms=class extends Sr{constructor(n,t,r){super(n,t),this.urlAfterRedirects=r,this.type=Mn.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},gr=function(e){return e[e.Redirect=0]="Redirect",e[e.SupersededByNewNavigation=1]="SupersededByNewNavigation",e[e.NoDataFromResolver=2]="NoDataFromResolver",e[e.GuardRejected=3]="GuardRejected",e}(gr||{}),p1=function(e){return e[e.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",e[e.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",e}(p1||{}),Hi=class extends Sr{constructor(n,t,r,i){super(n,t),this.reason=r,this.code=i,this.type=Mn.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},ys=class extends Sr{constructor(n,t,r,i){super(n,t),this.reason=r,this.code=i,this.type=Mn.NavigationSkipped}},gc=class extends Sr{constructor(n,t,r,i){super(n,t),this.error=r,this.target=i,this.type=Mn.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},$f=class extends Sr{constructor(n,t,r,i){super(n,t),this.urlAfterRedirects=r,this.state=i,this.type=Mn.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},g1=class extends Sr{constructor(n,t,r,i){super(n,t),this.urlAfterRedirects=r,this.state=i,this.type=Mn.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},m1=class extends Sr{constructor(n,t,r,i,o){super(n,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=Mn.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},y1=class extends Sr{constructor(n,t,r,i){super(n,t),this.urlAfterRedirects=r,this.state=i,this.type=Mn.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},C1=class extends Sr{constructor(n,t,r,i){super(n,t),this.urlAfterRedirects=r,this.state=i,this.type=Mn.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},_1=class{constructor(n){this.route=n,this.type=Mn.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},w1=class{constructor(n){this.route=n,this.type=Mn.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},v1=class{constructor(n){this.snapshot=n,this.type=Mn.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},b1=class{constructor(n){this.snapshot=n,this.type=Mn.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},x1=class{constructor(n){this.snapshot=n,this.type=Mn.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},E1=class{constructor(n){this.snapshot=n,this.type=Mn.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var mc=class{},Oa=class{constructor(n,t){this.url=n,this.navigationBehaviorOptions=t}};function k8(e,n){return e.providers&&!e._injector&&(e._injector=Fm(e.providers,n,`Route: ${e.path}`)),e._injector??n}function Qr(e){return e.outlet||ke}function F8(e,n){let t=e.filter(r=>Qr(r)===n);return t.push(...e.filter(r=>Qr(r)!==n)),t}function bc(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let n=e.parent;n;n=n.parent){let t=n.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var I1=class{get injector(){return bc(this.route?.snapshot)??this.rootInjector}set injector(n){}constructor(n){this.rootInjector=n,this.outlet=null,this.route=null,this.children=new Jf(this.rootInjector),this.attachRef=null}},Jf=(()=>{class e{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new I1(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||e)(ze(Er))}}static{this.\u0275prov=fe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),qf=class{constructor(n){this._root=n}get root(){return this._root.value}parent(n){let t=this.pathFromRoot(n);return t.length>1?t[t.length-2]:null}children(n){let t=S1(n,this._root);return t?t.children.map(r=>r.value):[]}firstChild(n){let t=S1(n,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(n){let t=D1(n,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==n)}pathFromRoot(n){return D1(n,this._root).map(t=>t.value)}};function S1(e,n){if(e===n.value)return n;for(let t of n.children){let r=S1(e,t);if(r)return r}return null}function D1(e,n){if(e===n.value)return[n];for(let t of n.children){let r=D1(e,t);if(r.length)return r.unshift(n),r}return[]}var pr=class{constructor(n,t){this.value=n,this.children=t}toString(){return`TreeNode(${this.value})`}};function Sa(e){let n={};return e&&e.children.forEach(t=>n[t.value.outlet]=t),n}var Yf=class extends qf{constructor(n,t){super(n),this.snapshot=t,L1(this,n)}toString(){return this.snapshot.toString()}};function II(e){let n=L8(e),t=new In([new ps("",{})]),r=new In({}),i=new In({}),o=new In({}),c=new In(""),h=new pi(t,r,o,c,i,ke,e,n.root);return h.snapshot=n.root,new Yf(new pr(h,[]),n)}function L8(e){let n={},t={},r={},i="",o=new Ma([],n,r,i,t,ke,e,null,{});return new Zf("",new pr(o,[]))}var pi=class{constructor(n,t,r,i,o,c,h,g){this.urlSubject=n,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=c,this.component=h,this._futureSnapshot=g,this.title=this.dataSubject?.pipe(Ve(m=>m[vc]))??Ae(void 0),this.url=n,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Ve(n=>Ta(n))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Ve(n=>Ta(n))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Xf(e,n,t="emptyOnly"){let r,{routeConfig:i}=e;return n!==null&&(t==="always"||i?.path===""||!n.component&&!n.routeConfig?.loadComponent)?r={params:re(re({},n.params),e.params),data:re(re({},n.data),e.data),resolve:re(re(re(re({},e.data),n.data),i?.data),e._resolvedData)}:r={params:re({},e.params),data:re({},e.data),resolve:re(re({},e.data),e._resolvedData??{})},i&&DI(i)&&(r.resolve[vc]=i.title),r}var Ma=class{get title(){return this.data?.[vc]}constructor(n,t,r,i,o,c,h,g,m){this.url=n,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=c,this.component=h,this.routeConfig=g,this._resolve=m}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Ta(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Ta(this.queryParams),this._queryParamMap}toString(){let n=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${n}', path:'${t}')`}},Zf=class extends qf{constructor(n,t){super(t),this.url=n,L1(this,t)}toString(){return SI(this._root)}};function L1(e,n){n.value._routerState=e,n.children.forEach(t=>L1(e,t))}function SI(e){let n=e.children.length>0?` { ${e.children.map(SI).join(", ")} } `:"";return`${e.value}${n}`}function a1(e){if(e.snapshot){let n=e.snapshot,t=e._futureSnapshot;e.snapshot=t,hi(n.queryParams,t.queryParams)||e.queryParamsSubject.next(t.queryParams),n.fragment!==t.fragment&&e.fragmentSubject.next(t.fragment),hi(n.params,t.params)||e.paramsSubject.next(t.params),u8(n.url,t.url)||e.urlSubject.next(t.url),hi(n.data,t.data)||e.dataSubject.next(t.data)}else e.snapshot=e._futureSnapshot,e.dataSubject.next(e._futureSnapshot.data)}function M1(e,n){let t=hi(e.params,n.params)&&p8(e.url,n.url),r=!e.parent!=!n.parent;return t&&!r&&(!e.parent||M1(e.parent,n.parent))}function DI(e){return typeof e.title=="string"||e.title===null}var B1=(()=>{class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=ke,this.activateEvents=new Pt,this.deactivateEvents=new Pt,this.attachEvents=new Pt,this.detachEvents=new Pt,this.parentContexts=te(Jf),this.location=te(wo),this.changeDetector=te(Ui),this.inputBinder=te(U1,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new de(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new de(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new de(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new de(4013,!1);this._activatedRoute=t;let i=this.location,c=t.snapshot.component,h=this.parentContexts.getOrCreateContext(this.name).children,g=new A1(t,h,i.injector);this.activated=i.createComponent(c,{index:i.length,injector:g,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275dir=$t({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Pi]})}}return e})(),A1=class e{__ngOutletInjector(n){return new e(this.route,this.childContexts,n)}constructor(n,t,r){this.route=n,this.childContexts=t,this.parent=r}get(n,t){return n===pi?this.route:n===Jf?this.childContexts:this.parent.get(n,t)}},U1=new ve("");function B8(e,n,t){let r=yc(e,n._root,t?t._root:void 0);return new Yf(r,n)}function yc(e,n,t){if(t&&e.shouldReuseRoute(n.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=n.value;let i=U8(e,n,t);return new pr(r,i)}else{if(e.shouldAttach(n.value)){let o=e.retrieve(n.value);if(o!==null){let c=o.route;return c.value._futureSnapshot=n.value,c.children=n.children.map(h=>yc(e,h)),c}}let r=V8(n.value),i=n.children.map(o=>yc(e,o));return new pr(r,i)}}function U8(e,n,t){return n.children.map(r=>{for(let i of t.children)if(e.shouldReuseRoute(r.value,i.value.snapshot))return yc(e,r,i);return yc(e,r)})}function V8(e){return new pi(new In(e.url),new In(e.params),new In(e.queryParams),new In(e.fragment),new In(e.data),e.outlet,e.component,e)}var Cc=class{constructor(n,t){this.redirectTo=n,this.navigationBehaviorOptions=t}},MI="ngNavigationCancelingError";function Qf(e,n){let{redirectTo:t,navigationBehaviorOptions:r}=fc(n)?{redirectTo:n,navigationBehaviorOptions:void 0}:n,i=AI(!1,gr.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function AI(e,n){let t=new Error(`NavigationCancelingError: ${e||""}`);return t[MI]=!0,t.cancellationCode=n,t}function j8(e){return TI(e)&&fc(e.url)}function TI(e){return!!e&&e[MI]}var H8=(e,n,t,r)=>Ve(i=>(new T1(n,i.targetRouterState,i.currentRouterState,t,r).activate(e),i)),T1=class{constructor(n,t,r,i,o){this.routeReuseStrategy=n,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(n){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,n),a1(this.futureState.root),this.activateChildRoutes(t,r,n)}deactivateChildRoutes(n,t,r){let i=Sa(t);n.children.forEach(o=>{let c=o.value.outlet;this.deactivateRoutes(o,i[c],r),delete i[c]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(n,t,r){let i=n.value,o=t?t.value:null;if(i===o)if(i.component){let c=r.getContext(i.outlet);c&&this.deactivateChildRoutes(n,t,c.children)}else this.deactivateChildRoutes(n,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(n,t){n.value.component&&this.routeReuseStrategy.shouldDetach(n.value.snapshot)?this.detachAndStoreRouteSubtree(n,t):this.deactivateRouteAndOutlet(n,t)}detachAndStoreRouteSubtree(n,t){let r=t.getContext(n.value.outlet),i=r&&n.value.component?r.children:t,o=Sa(n);for(let c of Object.values(o))this.deactivateRouteAndItsChildren(c,i);if(r&&r.outlet){let c=r.outlet.detach(),h=r.children.onOutletDeactivated();this.routeReuseStrategy.store(n.value.snapshot,{componentRef:c,route:n,contexts:h})}}deactivateRouteAndOutlet(n,t){let r=t.getContext(n.value.outlet),i=r&&n.value.component?r.children:t,o=Sa(n);for(let c of Object.values(o))this.deactivateRouteAndItsChildren(c,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(n,t,r){let i=Sa(t);n.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new E1(o.value.snapshot))}),n.children.length&&this.forwardEvent(new b1(n.value.snapshot))}activateRoutes(n,t,r){let i=n.value,o=t?t.value:null;if(a1(i),i===o)if(i.component){let c=r.getOrCreateContext(i.outlet);this.activateChildRoutes(n,t,c.children)}else this.activateChildRoutes(n,t,r);else if(i.component){let c=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let h=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),c.children.onOutletReAttached(h.contexts),c.attachRef=h.componentRef,c.route=h.route.value,c.outlet&&c.outlet.attach(h.componentRef,h.route.value),a1(h.route.value),this.activateChildRoutes(n,null,c.children)}else c.attachRef=null,c.route=i,c.outlet&&c.outlet.activateWith(i,c.injector),this.activateChildRoutes(n,null,c.children)}else this.activateChildRoutes(n,null,r)}},Kf=class{constructor(n){this.path=n,this.route=this.path[this.path.length-1]}},Aa=class{constructor(n,t){this.component=n,this.route=t}};function z8(e,n,t){let r=e._root,i=n?n._root:null;return sc(r,i,t,[r.value])}function W8(e){let n=e.routeConfig?e.routeConfig.canActivateChild:null;return!n||n.length===0?null:{node:e,guards:n}}function Ra(e,n){let t=Symbol(),r=n.get(e,t);return r===t?typeof e=="function"&&!Rv(e)?e:n.get(e):r}function sc(e,n,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Sa(n);return e.children.forEach(c=>{G8(c,o[c.value.outlet],t,r.concat([c.value]),i),delete o[c.value.outlet]}),Object.entries(o).forEach(([c,h])=>uc(h,t.getContext(c),i)),i}function G8(e,n,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=e.value,c=n?n.value:null,h=t?t.getContext(e.value.outlet):null;if(c&&o.routeConfig===c.routeConfig){let g=$8(c,o,o.routeConfig.runGuardsAndResolvers);g?i.canActivateChecks.push(new Kf(r)):(o.data=c.data,o._resolvedData=c._resolvedData),o.component?sc(e,n,h?h.children:null,r,i):sc(e,n,t,r,i),g&&h&&h.outlet&&h.outlet.isActivated&&i.canDeactivateChecks.push(new Aa(h.outlet.component,c))}else c&&uc(n,h,i),i.canActivateChecks.push(new Kf(r)),o.component?sc(e,null,h?h.children:null,r,i):sc(e,null,t,r,i);return i}function $8(e,n,t){if(typeof t=="function")return t(e,n);switch(t){case"pathParamsChange":return!gs(e.url,n.url);case"pathParamsOrQueryParamsChange":return!gs(e.url,n.url)||!hi(e.queryParams,n.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!M1(e,n)||!hi(e.queryParams,n.queryParams);case"paramsChange":default:return!M1(e,n)}}function uc(e,n,t){let r=Sa(e),i=e.value;Object.entries(r).forEach(([o,c])=>{i.component?n?uc(c,n.children.getContext(o),t):uc(c,null,t):uc(c,n,t)}),i.component?n&&n.outlet&&n.outlet.isActivated?t.canDeactivateChecks.push(new Aa(n.outlet.component,i)):t.canDeactivateChecks.push(new Aa(null,i)):t.canDeactivateChecks.push(new Aa(null,i))}function xc(e){return typeof e=="function"}function q8(e){return typeof e=="boolean"}function Y8(e){return e&&xc(e.canLoad)}function X8(e){return e&&xc(e.canActivate)}function Z8(e){return e&&xc(e.canActivateChild)}function Q8(e){return e&&xc(e.canDeactivate)}function K8(e){return e&&xc(e.canMatch)}function OI(e){return e instanceof Ei||e?.name==="EmptyError"}var Vf=Symbol("INITIAL_VALUE");function Na(){return vr(e=>dd(e.map(n=>n.pipe(Ii(1),gg(Vf)))).pipe(Ve(n=>{for(let t of n)if(t!==!0){if(t===Vf)return Vf;if(t===!1||J8(t))return t}return!0}),_r(n=>n!==Vf),Ii(1)))}function J8(e){return fc(e)||e instanceof Cc}function eF(e,n){return on(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:c}}=t;return c.length===0&&o.length===0?Ae(Be(re({},t),{guardsResult:!0})):tF(c,r,i,e).pipe(on(h=>h&&q8(h)?nF(r,o,e,n):Ae(h)),Ve(h=>Be(re({},t),{guardsResult:h})))})}function tF(e,n,t,r){return Et(e).pipe(on(i=>aF(i.component,i.route,t,n,r)),Vr(i=>i!==!0,!0))}function nF(e,n,t,r){return Et(n).pipe(Zo(i=>Zs(iF(i.route.parent,r),rF(i.route,r),sF(e,i.path,t),oF(e,i.route,t))),Vr(i=>i!==!0,!0))}function rF(e,n){return e!==null&&n&&n(new x1(e)),Ae(!0)}function iF(e,n){return e!==null&&n&&n(new v1(e)),Ae(!0)}function oF(e,n,t){let r=n.routeConfig?n.routeConfig.canActivate:null;if(!r||r.length===0)return Ae(!0);let i=r.map(o=>fd(()=>{let c=bc(n)??t,h=Ra(o,c),g=X8(h)?h.canActivate(n,e):ci(c,()=>h(n,e));return vo(g).pipe(Vr())}));return Ae(i).pipe(Na())}function sF(e,n,t){let r=n[n.length-1],o=n.slice(0,n.length-1).reverse().map(c=>W8(c)).filter(c=>c!==null).map(c=>fd(()=>{let h=c.guards.map(g=>{let m=bc(c.node)??t,v=Ra(g,m),b=Z8(v)?v.canActivateChild(r,e):ci(m,()=>v(r,e));return vo(b).pipe(Vr())});return Ae(h).pipe(Na())}));return Ae(o).pipe(Na())}function aF(e,n,t,r,i){let o=n&&n.routeConfig?n.routeConfig.canDeactivate:null;if(!o||o.length===0)return Ae(!0);let c=o.map(h=>{let g=bc(n)??i,m=Ra(h,g),v=Q8(m)?m.canDeactivate(e,n,t,r):ci(g,()=>m(e,n,t,r));return vo(v).pipe(Vr())});return Ae(c).pipe(Na())}function lF(e,n,t,r){let i=n.canLoad;if(i===void 0||i.length===0)return Ae(!0);let o=i.map(c=>{let h=Ra(c,e),g=Y8(h)?h.canLoad(n,t):ci(e,()=>h(n,t));return vo(g)});return Ae(o).pipe(Na(),NI(r))}function NI(e){return ig(sn(n=>{if(typeof n!="boolean")throw Qf(e,n)}),Ve(n=>n===!0))}function cF(e,n,t,r){let i=n.canMatch;if(!i||i.length===0)return Ae(!0);let o=i.map(c=>{let h=Ra(c,e),g=K8(h)?h.canMatch(n,t):ci(e,()=>h(n,t));return vo(g)});return Ae(o).pipe(Na(),NI(r))}var _c=class{constructor(n){this.segmentGroup=n||null}},wc=class extends Error{constructor(n){super(),this.urlTree=n}};function Ia(e){return Xs(new _c(e))}function uF(e){return Xs(new de(4e3,!1))}function dF(e){return Xs(AI(!1,gr.GuardRejected))}var O1=class{constructor(n,t){this.urlSerializer=n,this.urlTree=t}lineralizeSegments(n,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return Ae(r);if(i.numberOfChildren>1||!i.children[ke])return uF(`${n.redirectTo}`);i=i.children[ke]}}applyRedirectCommands(n,t,r,i,o){if(typeof t!="string"){let h=t,{queryParams:g,fragment:m,routeConfig:v,url:b,outlet:I,params:M,data:R,title:H}=i,X=ci(o,()=>h({params:M,data:R,queryParams:g,fragment:m,routeConfig:v,url:b,outlet:I,title:H}));if(X instanceof zi)throw new wc(X);t=X}let c=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),n,r);if(t[0]==="/")throw new wc(c);return c}applyRedirectCreateUrlTree(n,t,r,i){let o=this.createSegmentGroup(n,t.root,r,i);return new zi(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(n,t){let r={};return Object.entries(n).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let h=o.substring(1);r[i]=t[h]}else r[i]=o}),r}createSegmentGroup(n,t,r,i){let o=this.createSegments(n,t.segments,r,i),c={};return Object.entries(t.children).forEach(([h,g])=>{c[h]=this.createSegmentGroup(n,g,r,i)}),new ht(o,c)}createSegments(n,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(n,o,i):this.findOrReturn(o,r))}findPosParam(n,t,r){let i=r[t.path.substring(1)];if(!i)throw new de(4001,!1);return i}findOrReturn(n,t){let r=0;for(let i of t){if(i.path===n.path)return t.splice(r),i;r++}return n}},N1={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function fF(e,n,t,r,i){let o=RI(e,n,t);return o.matched?(r=k8(n,r),cF(r,n,t,i).pipe(Ve(c=>c===!0?o:re({},N1)))):Ae(o)}function RI(e,n,t){if(n.path==="**")return hF(t);if(n.path==="")return n.pathMatch==="full"&&(e.hasChildren()||t.length>0)?re({},N1):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(n.matcher||c8)(t,e,n);if(!i)return re({},N1);let o={};Object.entries(i.posParams??{}).forEach(([h,g])=>{o[h]=g.path});let c=i.consumed.length>0?re(re({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:c,positionalParamSegments:i.posParams??{}}}function hF(e){return{matched:!0,parameters:e.length>0?fI(e).parameters:{},consumedSegments:e,remainingSegments:[],positionalParamSegments:{}}}function lI(e,n,t,r){return t.length>0&&mF(e,t,r)?{segmentGroup:new ht(n,gF(r,new ht(t,e.children))),slicedSegments:[]}:t.length===0&&yF(e,t,r)?{segmentGroup:new ht(e.segments,pF(e,t,r,e.children)),slicedSegments:t}:{segmentGroup:new ht(e.segments,e.children),slicedSegments:t}}function pF(e,n,t,r){let i={};for(let o of t)if(eh(e,n,o)&&!r[Qr(o)]){let c=new ht([],{});i[Qr(o)]=c}return re(re({},r),i)}function gF(e,n){let t={};t[ke]=n;for(let r of e)if(r.path===""&&Qr(r)!==ke){let i=new ht([],{});t[Qr(r)]=i}return t}function mF(e,n,t){return t.some(r=>eh(e,n,r)&&Qr(r)!==ke)}function yF(e,n,t){return t.some(r=>eh(e,n,r))}function eh(e,n,t){return(e.hasChildren()||n.length>0)&&t.pathMatch==="full"?!1:t.path===""}function CF(e,n,t){return n.length===0&&!e.children[t]}var R1=class{};function _F(e,n,t,r,i,o,c="emptyOnly"){return new P1(e,n,t,r,i,c,o).recognize()}var wF=31,P1=class{constructor(n,t,r,i,o,c,h){this.injector=n,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=c,this.urlSerializer=h,this.applyRedirects=new O1(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(n){return new de(4002,`'${n.segmentGroup}'`)}recognize(){let n=lI(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(n).pipe(Ve(({children:t,rootSnapshot:r})=>{let i=new pr(r,t),o=new Zf("",i),c=M8(r,[],this.urlTree.queryParams,this.urlTree.fragment);return c.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(c),{state:o,tree:c}}))}match(n){let t=new Ma([],Object.freeze({}),Object.freeze(re({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),ke,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,n,ke,t).pipe(Ve(r=>({children:r,rootSnapshot:t})),wr(r=>{if(r instanceof wc)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof _c?this.noMatchError(r):r}))}processSegmentGroup(n,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(n,t,r,o):this.processSegment(n,t,r,r.segments,i,!0,o).pipe(Ve(c=>c instanceof pr?[c]:[]))}processChildren(n,t,r,i){let o=[];for(let c of Object.keys(r.children))c==="primary"?o.unshift(c):o.push(c);return Et(o).pipe(Zo(c=>{let h=r.children[c],g=F8(t,c);return this.processSegmentGroup(n,g,h,c,i)}),pg((c,h)=>(c.push(...h),c)),ao(null),hg(),on(c=>{if(c===null)return Ia(r);let h=PI(c);return vF(h),Ae(h)}))}processSegment(n,t,r,i,o,c,h){return Et(t).pipe(Zo(g=>this.processSegmentAgainstRoute(g._injector??n,t,g,r,i,o,c,h).pipe(wr(m=>{if(m instanceof _c)return Ae(null);throw m}))),Vr(g=>!!g),wr(g=>{if(OI(g))return CF(r,i,o)?Ae(new R1):Ia(r);throw g}))}processSegmentAgainstRoute(n,t,r,i,o,c,h,g){return Qr(r)!==c&&(c===ke||!eh(i,o,r))?Ia(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(n,i,r,o,c,g):this.allowRedirects&&h?this.expandSegmentAgainstRouteUsingRedirect(n,i,t,r,o,c,g):Ia(i)}expandSegmentAgainstRouteUsingRedirect(n,t,r,i,o,c,h){let{matched:g,parameters:m,consumedSegments:v,positionalParamSegments:b,remainingSegments:I}=RI(t,i,o);if(!g)return Ia(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>wF&&(this.allowRedirects=!1));let M=new Ma(o,m,Object.freeze(re({},this.urlTree.queryParams)),this.urlTree.fragment,cI(i),Qr(i),i.component??i._loadedComponent??null,i,uI(i)),R=Xf(M,h,this.paramsInheritanceStrategy);M.params=Object.freeze(R.params),M.data=Object.freeze(R.data);let H=this.applyRedirects.applyRedirectCommands(v,i.redirectTo,b,M,n);return this.applyRedirects.lineralizeSegments(i,H).pipe(on(X=>this.processSegment(n,r,t,X.concat(I),c,!1,h)))}matchSegmentAgainstRoute(n,t,r,i,o,c){let h=fF(t,r,i,n,this.urlSerializer);return r.path==="**"&&(t.children={}),h.pipe(vr(g=>g.matched?(n=r._injector??n,this.getChildConfig(n,r,i).pipe(vr(({routes:m})=>{let v=r._loadedInjector??n,{parameters:b,consumedSegments:I,remainingSegments:M}=g,R=new Ma(I,b,Object.freeze(re({},this.urlTree.queryParams)),this.urlTree.fragment,cI(r),Qr(r),r.component??r._loadedComponent??null,r,uI(r)),H=Xf(R,c,this.paramsInheritanceStrategy);R.params=Object.freeze(H.params),R.data=Object.freeze(H.data);let{segmentGroup:X,slicedSegments:$}=lI(t,I,M,m);if($.length===0&&X.hasChildren())return this.processChildren(v,m,X,R).pipe(Ve(Ze=>new pr(R,Ze)));if(m.length===0&&$.length===0)return Ae(new pr(R,[]));let ce=Qr(r)===o;return this.processSegment(v,m,X,$,ce?ke:o,!0,R).pipe(Ve(Ze=>new pr(R,Ze instanceof pr?[Ze]:[])))}))):Ia(t)))}getChildConfig(n,t,r){return t.children?Ae({routes:t.children,injector:n}):t.loadChildren?t._loadedRoutes!==void 0?Ae({routes:t._loadedRoutes,injector:t._loadedInjector}):lF(n,t,r,this.urlSerializer).pipe(on(i=>i?this.configLoader.loadChildren(n,t).pipe(sn(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):dF(t))):Ae({routes:[],injector:n})}};function vF(e){e.sort((n,t)=>n.value.outlet===ke?-1:t.value.outlet===ke?1:n.value.outlet.localeCompare(t.value.outlet))}function bF(e){let n=e.value.routeConfig;return n&&n.path===""}function PI(e){let n=[],t=new Set;for(let r of e){if(!bF(r)){n.push(r);continue}let i=n.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):n.push(r)}for(let r of t){let i=PI(r.children);n.push(new pr(r.value,i))}return n.filter(r=>!t.has(r))}function cI(e){return e.data||{}}function uI(e){return e.resolve||{}}function xF(e,n,t,r,i,o){return on(c=>_F(e,n,t,r,c.extractedUrl,i,o).pipe(Ve(({state:h,tree:g})=>Be(re({},c),{targetSnapshot:h,urlAfterRedirects:g}))))}function EF(e,n){return on(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Ae(t);let o=new Set(i.map(g=>g.route)),c=new Set;for(let g of o)if(!c.has(g))for(let m of kI(g))c.add(m);let h=0;return Et(c).pipe(Zo(g=>o.has(g)?IF(g,r,e,n):(g.data=Xf(g,g.parent,e).resolve,Ae(void 0))),sn(()=>h++),Ks(1),on(g=>h===c.size?Ae(t):lr))})}function kI(e){let n=e.children.map(t=>kI(t)).flat();return[e,...n]}function IF(e,n,t,r){let i=e.routeConfig,o=e._resolve;return i?.title!==void 0&&!DI(i)&&(o[vc]=i.title),SF(o,e,n,r).pipe(Ve(c=>(e._resolvedData=c,e.data=Xf(e,e.parent,t).resolve,null)))}function SF(e,n,t,r){let i=u1(e);if(i.length===0)return Ae({});let o={};return Et(i).pipe(on(c=>DF(e[c],n,t,r).pipe(Vr(),sn(h=>{if(h instanceof Cc)throw Qf(new dc,h);o[c]=h}))),Ks(1),fg(o),wr(c=>OI(c)?lr:Xs(c)))}function DF(e,n,t,r){let i=bc(n)??r,o=Ra(e,i),c=o.resolve?o.resolve(n,t):ci(i,()=>o(n,t));return vo(c)}function l1(e){return vr(n=>{let t=e(n);return t?Et(t).pipe(Ve(()=>n)):Ae(n)})}var FI=(()=>{class e{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===ke);return r}getResolvedTitleForRoute(t){return t.data[vc]}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=fe({token:e,factory:()=>te(MF),providedIn:"root"})}}return e})(),MF=(()=>{class e extends FI{constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||e)(ze(tI))}}static{this.\u0275prov=fe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),V1=new ve("",{providedIn:"root",factory:()=>({})}),AF=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275cmp=oe({type:e,selectors:[["ng-component"]],standalone:!0,features:[se],decls:1,vars:0,template:function(r,i){r&1&&K(0,"router-outlet")},dependencies:[B1],encapsulation:2})}}return e})();function j1(e){let n=e.children&&e.children.map(j1),t=n?Be(re({},e),{children:n}):re({},e);return!t.component&&!t.loadComponent&&(n||t.loadChildren)&&t.outlet&&t.outlet!==ke&&(t.component=AF),t}var H1=new ve(""),TF=(()=>{class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=te(jm)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Ae(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=vo(t.loadComponent()).pipe(Ve(LI),sn(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),Qs(()=>{this.componentLoaders.delete(t)})),i=new qs(r,()=>new rn).pipe($s());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Ae({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=OF(r,this.compiler,t,this.onLoadEndListener).pipe(Qs(()=>{this.childrenLoaders.delete(r)})),c=new qs(o,()=>new rn).pipe($s());return this.childrenLoaders.set(r,c),c}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=fe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function OF(e,n,t,r){return vo(e.loadChildren()).pipe(Ve(LI),on(i=>i instanceof Ul||Array.isArray(i)?Ae(i):Et(n.compileModuleAsync(i))),Ve(i=>{r&&r(e);let o,c,h=!1;return Array.isArray(i)?(c=i,h=!0):(o=i.create(t).injector,c=o.get(H1,[],{optional:!0,self:!0}).flat()),{routes:c.map(j1),injector:o}}))}function NF(e){return e&&typeof e=="object"&&"default"in e}function LI(e){return NF(e)?e.default:e}var z1=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=fe({token:e,factory:()=>te(RF),providedIn:"root"})}}return e})(),RF=(()=>{class e{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=fe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),PF=new ve("");var kF=new ve(""),FF=(()=>{class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new rn,this.transitionAbortSubject=new rn,this.configLoader=te(TF),this.environmentInjector=te(Er),this.urlSerializer=te(F1),this.rootContexts=te(Jf),this.location=te(ec),this.inputBindingEnabled=te(U1,{optional:!0})!==null,this.titleStrategy=te(FI),this.options=te(V1,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=te(z1),this.createViewTransition=te(PF,{optional:!0}),this.navigationErrorHandler=te(kF,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Ae(void 0),this.rootComponentType=null;let t=i=>this.events.next(new _1(i)),r=i=>this.events.next(new w1(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(Be(re(re({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,i){return this.transitions=new In({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:cc,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(_r(o=>o.id!==0),Ve(o=>Be(re({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),vr(o=>{let c=!1,h=!1;return Ae(o).pipe(vr(g=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",gr.SupersededByNewNavigation),lr;this.currentTransition=o,this.currentNavigation={id:g.id,initialUrl:g.rawUrl,extractedUrl:g.extractedUrl,targetBrowserUrl:typeof g.extras.browserUrl=="string"?this.urlSerializer.parse(g.extras.browserUrl):g.extras.browserUrl,trigger:g.source,extras:g.extras,previousNavigation:this.lastSuccessfulNavigation?Be(re({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let m=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),v=g.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!m&&v!=="reload"){let b="";return this.events.next(new ys(g.id,this.urlSerializer.serialize(g.rawUrl),b,p1.IgnoredSameUrlNavigation)),g.resolve(!1),lr}if(this.urlHandlingStrategy.shouldProcessUrl(g.rawUrl))return Ae(g).pipe(vr(b=>{let I=this.transitions?.getValue();return this.events.next(new pc(b.id,this.urlSerializer.serialize(b.extractedUrl),b.source,b.restoredState)),I!==this.transitions?.getValue()?lr:Promise.resolve(b)}),xF(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),sn(b=>{o.targetSnapshot=b.targetSnapshot,o.urlAfterRedirects=b.urlAfterRedirects,this.currentNavigation=Be(re({},this.currentNavigation),{finalUrl:b.urlAfterRedirects});let I=new $f(b.id,this.urlSerializer.serialize(b.extractedUrl),this.urlSerializer.serialize(b.urlAfterRedirects),b.targetSnapshot);this.events.next(I)}));if(m&&this.urlHandlingStrategy.shouldProcessUrl(g.currentRawUrl)){let{id:b,extractedUrl:I,source:M,restoredState:R,extras:H}=g,X=new pc(b,this.urlSerializer.serialize(I),M,R);this.events.next(X);let $=II(this.rootComponentType).snapshot;return this.currentTransition=o=Be(re({},g),{targetSnapshot:$,urlAfterRedirects:I,extras:Be(re({},H),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=I,Ae(o)}else{let b="";return this.events.next(new ys(g.id,this.urlSerializer.serialize(g.extractedUrl),b,p1.IgnoredByUrlHandlingStrategy)),g.resolve(!1),lr}}),sn(g=>{let m=new g1(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(m)}),Ve(g=>(this.currentTransition=o=Be(re({},g),{guards:z8(g.targetSnapshot,g.currentSnapshot,this.rootContexts)}),o)),eF(this.environmentInjector,g=>this.events.next(g)),sn(g=>{if(o.guardsResult=g.guardsResult,g.guardsResult&&typeof g.guardsResult!="boolean")throw Qf(this.urlSerializer,g.guardsResult);let m=new m1(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot,!!g.guardsResult);this.events.next(m)}),_r(g=>g.guardsResult?!0:(this.cancelNavigationTransition(g,"",gr.GuardRejected),!1)),l1(g=>{if(g.guards.canActivateChecks.length)return Ae(g).pipe(sn(m=>{let v=new y1(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(v)}),vr(m=>{let v=!1;return Ae(m).pipe(EF(this.paramsInheritanceStrategy,this.environmentInjector),sn({next:()=>v=!0,complete:()=>{v||this.cancelNavigationTransition(m,"",gr.NoDataFromResolver)}}))}),sn(m=>{let v=new C1(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(v)}))}),l1(g=>{let m=v=>{let b=[];v.routeConfig?.loadComponent&&!v.routeConfig._loadedComponent&&b.push(this.configLoader.loadComponent(v.routeConfig).pipe(sn(I=>{v.component=I}),Ve(()=>{})));for(let I of v.children)b.push(...m(I));return b};return dd(m(g.targetSnapshot.root)).pipe(ao(null),Ii(1))}),l1(()=>this.afterPreactivation()),vr(()=>{let{currentSnapshot:g,targetSnapshot:m}=o,v=this.createViewTransition?.(this.environmentInjector,g.root,m.root);return v?Et(v).pipe(Ve(()=>o)):Ae(o)}),Ve(g=>{let m=B8(t.routeReuseStrategy,g.targetSnapshot,g.currentRouterState);return this.currentTransition=o=Be(re({},g),{targetRouterState:m}),this.currentNavigation.targetRouterState=m,o}),sn(()=>{this.events.next(new mc)}),H8(this.rootContexts,t.routeReuseStrategy,g=>this.events.next(g),this.inputBindingEnabled),Ii(1),sn({next:g=>{c=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new ms(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects))),this.titleStrategy?.updateTitle(g.targetRouterState.snapshot),g.resolve(!0)},complete:()=>{c=!0}}),mg(this.transitionAbortSubject.pipe(sn(g=>{throw g}))),Qs(()=>{!c&&!h&&this.cancelNavigationTransition(o,"",gr.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),wr(g=>{if(h=!0,TI(g))this.events.next(new Hi(o.id,this.urlSerializer.serialize(o.extractedUrl),g.message,g.cancellationCode)),j8(g)?this.events.next(new Oa(g.url,g.navigationBehaviorOptions)):o.resolve(!1);else{let m=new gc(o.id,this.urlSerializer.serialize(o.extractedUrl),g,o.targetSnapshot??void 0);try{let v=ci(this.environmentInjector,()=>this.navigationErrorHandler?.(m));if(v instanceof Cc){let{message:b,cancellationCode:I}=Qf(this.urlSerializer,v);this.events.next(new Hi(o.id,this.urlSerializer.serialize(o.extractedUrl),b,I)),this.events.next(new Oa(v.redirectTo,v.navigationBehaviorOptions))}else{this.events.next(m);let b=t.errorHandler(g);o.resolve(!!b)}}catch(v){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(v)}}return lr}))}))}cancelNavigationTransition(t,r,i){let o=new Hi(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=fe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function LF(e){return e!==cc}var BF=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=fe({token:e,factory:()=>te(UF),providedIn:"root"})}}return e})(),k1=class{shouldDetach(n){return!1}store(n,t){}shouldAttach(n){return!1}retrieve(n){return null}shouldReuseRoute(n,t){return n.routeConfig===t.routeConfig}},UF=(()=>{class e extends k1{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Co(e)))(i||e)}})()}static{this.\u0275prov=fe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),BI=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=fe({token:e,factory:()=>te(VF),providedIn:"root"})}}return e})(),VF=(()=>{class e extends BI{constructor(){super(...arguments),this.location=te(ec),this.urlSerializer=te(F1),this.options=te(V1,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=te(z1),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new zi,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=II(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof pc)this.stateMemento=this.createStateMemento();else if(t instanceof ys)this.rawUrlTree=r.initialUrl;else if(t instanceof $f){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else t instanceof mc?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof Hi&&(t.code===gr.GuardRejected||t.code===gr.NoDataFromResolver)?this.restoreHistory(r):t instanceof gc?this.restoreHistory(r,!0):t instanceof ms&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let i=t instanceof zi?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let o=this.browserPageId,c=re(re({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(i,"",c)}else{let o=re(re({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",o)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.currentUrlTree===t.finalUrl&&o===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Co(e)))(i||e)}})()}static{this.\u0275prov=fe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),ac=function(e){return e[e.COMPLETE=0]="COMPLETE",e[e.FAILED=1]="FAILED",e[e.REDIRECTING=2]="REDIRECTING",e}(ac||{});function jF(e,n){e.events.pipe(_r(t=>t instanceof ms||t instanceof Hi||t instanceof gc||t instanceof ys),Ve(t=>t instanceof ms||t instanceof ys?ac.COMPLETE:(t instanceof Hi?t.code===gr.Redirect||t.code===gr.SupersededByNewNavigation:!1)?ac.REDIRECTING:ac.FAILED),_r(t=>t!==ac.REDIRECTING),Ii(1)).subscribe(()=>{n()})}function HF(e){throw e}var zF={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},WF={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},gi=(()=>{class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=te(Af),this.stateManager=te(BI),this.options=te(V1,{optional:!0})||{},this.pendingTasks=te(us),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=te(FF),this.urlSerializer=te(F1),this.location=te(ec),this.urlHandlingStrategy=te(z1),this._events=new rn,this.errorHandler=this.options.errorHandler||HF,this.navigated=!1,this.routeReuseStrategy=te(BF),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=te(H1,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!te(U1,{optional:!0}),this.eventsSubscription=new Ut,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Hi&&r.code!==gr.Redirect&&r.code!==gr.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof ms)this.navigated=!0;else if(r instanceof Oa){let c=r.navigationBehaviorOptions,h=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),g=re({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||LF(i.source)},c);this.scheduleNavigation(h,cc,null,g,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}$F(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),cc,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},c=i?.navigationId?i:null;if(i){let g=re({},i);delete g.navigationId,delete g.\u0275routerPageId,Object.keys(g).length!==0&&(o.state=g)}let h=this.parseUrl(t);this.scheduleNavigation(h,r,c,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(j1),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:c,queryParamsHandling:h,preserveFragment:g}=r,m=g?this.currentUrlTree.fragment:c,v=null;switch(h??this.options.defaultQueryParamsHandling){case"merge":v=re(re({},this.currentUrlTree.queryParams),o);break;case"preserve":v=this.currentUrlTree.queryParams;break;default:v=o||null}v!==null&&(v=this.removeEmptyProps(v));let b;try{let I=i?i.snapshot:this.routerState.snapshot.root;b=vI(I)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),b=this.currentUrlTree.root}return bI(b,t,v,m??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=fc(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,cc,null,r)}navigate(t,r={skipLocationChange:!1}){return GF(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=re({},zF):r===!1?i=re({},WF):i=r,fc(t))return iI(this.currentUrlTree,t,i);let o=this.parseUrl(t);return iI(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,c){if(this.disposed)return Promise.resolve(!1);let h,g,m;c?(h=c.resolve,g=c.reject,m=c.promise):m=new Promise((b,I)=>{h=b,g=I});let v=this.pendingTasks.add();return jF(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(v))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:h,reject:g,promise:m,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),m.catch(b=>Promise.reject(b))}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=fe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function GF(e){for(let n=0;n<e.length;n++)if(e[n]==null)throw new de(4008,!1)}function $F(e){return!(e instanceof mc)&&!(e instanceof Oa)}var qF=new ve("");function UI(e,...n){return ha([{provide:H1,multi:!0,useValue:e},[],{provide:pi,useFactory:YF,deps:[gi]},{provide:va,multi:!0,useFactory:XF},n.map(t=>t.\u0275providers)])}function YF(e){return e.routerState.root}function XF(){let e=te(ai);return n=>{let t=e.get(fi);if(n!==t.components[0])return;let r=e.get(gi),i=e.get(ZF);e.get(QF)===1&&r.initialNavigation(),e.get(KF,null,He.Optional)?.setUpPreloading(),e.get(qF,null,He.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var ZF=new ve("",{factory:()=>new rn}),QF=new ve("",{providedIn:"root",factory:()=>1});var KF=new ve("");var bo=(()=>{class e{messageSubject=new Yo(1);message$=this.messageSubject.asObservable();askUser(t,r,i){this.messageSubject.next({message:t,yesHandler:r,noHandler:i})}static \u0275fac=function(r){return new(r||e)};static \u0275prov=fe({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function JF(e,n){if(e&1){let t=kt();A(0,"div",1)(1,"div",2)(2,"p"),P(3),T(),A(4,"div",3)(5,"button",4),j("click",function(){Ct(t);let i=Ne();return _t(i.onYes())}),P(6,"Tak"),T(),A(7,"button",4),j("click",function(){Ct(t);let i=Ne();return _t(i.onNo())}),P(8,"Nie"),T()()()()}if(e&2){let t=Ne();q(3),jt(t.message)}}var VI=(()=>{class e{messagesService;message=null;yesHandler=null;noHandler=null;constructor(t){this.messagesService=t,this.messagesService.message$.subscribe(r=>{this.message=r.message,this.yesHandler=r.yesHandler,this.noHandler=r.noHandler||null})}onYes(){this.yesHandler&&this.yesHandler(),this.clearDialog()}onNo(){this.noHandler&&this.noHandler(),this.clearDialog()}clearDialog(){this.message=null,this.yesHandler=null,this.noHandler=null}static \u0275fac=function(r){return new(r||e)(z(bo))};static \u0275cmp=oe({type:e,selectors:[["app-confirm-dialog"]],standalone:!0,features:[se],decls:1,vars:1,consts:[["class","overlay",4,"ngIf"],[1,"overlay"],[1,"acceptbox"],[1,"btns"],[3,"click"]],template:function(r,i){r&1&&Vt(0,JF,9,1,"div",0),r&2&&rt("ngIf",i.message)},dependencies:[zn,ba],styles:[".overlay[_ngcontent-%COMP%]{width:100vw;height:100vh;background:#00000059;-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px);position:fixed;z-index:9999;display:flex;flex-direction:column;justify-content:center;align-items:center}.acceptbox[_ngcontent-%COMP%]{height:200px;width:calc(100% - 64px);background:#fff;border-radius:16px;border:2px solid #000000;color:#000;padding:24px;display:flex;flex-direction:column;justify-content:space-around;align-items:center}p[_ngcontent-%COMP%]{font-weight:700;font-size:120%}.btns[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:space-around;align-items:center;align-content:center}button[_ngcontent-%COMP%]{width:calc(50% - 16px);background:#000;padding:16px;font-size:1.1em;color:#fff;font-weight:600;letter-spacing:2px;border:none;transition:background .5s ease;border-radius:16px;cursor:pointer;margin-top:8px}button[_ngcontent-%COMP%]:hover{background:#333}"]})}return e})();var xo=(()=>{class e{messageSubject=new Yo(1);message$=this.messageSubject.asObservable();askUser(t,r){this.messageSubject.next({message:t,yesHandler:r})}static \u0275fac=function(r){return new(r||e)};static \u0275prov=fe({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function eL(e,n){if(e&1){let t=kt();A(0,"div")(1,"div",1)(2,"p"),P(3),T(),A(4,"button",2),j("click",function(){Ct(t);let i=Ne();return _t(i.onYes())}),P(5,"Ok"),T()()()}if(e&2){let t=Ne();q(3),jt(t.message)}}var jI=(()=>{class e{messagesokService;message=null;yesHandler=null;noHandler=null;constructor(t){this.messagesokService=t,this.messagesokService.message$.subscribe(r=>{this.message=r.message,this.yesHandler=r.yesHandler||null})}onYes(){this.yesHandler&&this.yesHandler(),this.clearDialog()}clearDialog(){this.message=null,this.yesHandler=null,this.noHandler=null}static \u0275fac=function(r){return new(r||e)(z(xo))};static \u0275cmp=oe({type:e,selectors:[["app-ok-dialog"]],standalone:!0,features:[se],decls:1,vars:1,consts:[[4,"ngIf"],[1,"acceptbox"],[3,"click"]],template:function(r,i){r&1&&Vt(0,eL,6,1,"div",0),r&2&&rt("ngIf",i.message)},dependencies:[zn,ba],styles:["div[_ngcontent-%COMP%]{width:100vw;height:100vh;background:#00000059;-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px);position:fixed;z-index:9999;display:flex;flex-direction:column;justify-content:center;align-items:center}.acceptbox[_ngcontent-%COMP%]{height:200px;width:calc(100% - 64px);background:#fff;border-radius:16px;border:2px solid #000000;color:#000;padding:24px;display:flex;flex-direction:column;justify-content:space-around;align-items:center}p[_ngcontent-%COMP%]{font-weight:700;font-size:120%}button[_ngcontent-%COMP%]{width:100%;background:#000;padding:16px;font-size:1.1em;color:#fff;font-weight:600;letter-spacing:2px;border:none;transition:background .5s ease;border-radius:16px;cursor:pointer;margin-top:8px}button[_ngcontent-%COMP%]:hover{background:#333}"]})}return e})();var HI=(()=>{class e{constructor(){}title="Tablefi";static \u0275fac=function(r){return new(r||e)};static \u0275cmp=oe({type:e,selectors:[["app-root"]],standalone:!0,features:[se],decls:4,vars:0,consts:[["rel","stylesheet","href",hx`https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200&icon_names=arrow_back`]],template:function(r,i){r&1&&K(0,"link",0)(1,"app-confirm-dialog")(2,"app-ok-dialog")(3,"router-outlet")},dependencies:[B1,zn,VI,jI],styles:['@font-face{font-family:Lexend;font-style:normal;font-weight:100 900;font-display:swap;src:url(https://fonts.gstatic.com/s/lexend/v23/wlpwgwvFAVdoq2_v9KQU4Wc.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Lexend;font-style:normal;font-weight:100 900;font-display:swap;src:url(https://fonts.gstatic.com/s/lexend/v23/wlpwgwvFAVdoq2_v9aQU4Wc.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Lexend;font-style:normal;font-weight:100 900;font-display:swap;src:url(https://fonts.gstatic.com/s/lexend/v23/wlpwgwvFAVdoq2_v-6QU.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}router-outlet[_ngcontent-%COMP%]{font-family:Lexend,sans-serif;font-optical-sizing:auto;height:100%;width:100%}']})}return e})();var KI=(()=>{class e{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(r){return new(r||e)(z(Xr),z(fr))}}static{this.\u0275dir=$t({type:e})}}return e})(),G1=(()=>{class e extends KI{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Co(e)))(i||e)}})()}static{this.\u0275dir=$t({type:e,features:[Zr]})}}return e})(),dh=new ve("");var tL={provide:dh,useExisting:Oi(()=>Kt),multi:!0};function nL(){let e=ji()?ji().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}var rL=new ve(""),Kt=(()=>{class e extends KI{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!nL())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(r){return new(r||e)(z(Xr),z(fr),z(rL,8))}}static{this.\u0275dir=$t({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&j("input",function(c){return i._handleInput(c.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(c){return i._compositionEnd(c.target.value)})},features:[ds([tL]),Zr]})}}return e})();function iL(e){return e==null||(typeof e=="string"||Array.isArray(e))&&e.length===0}var $1=new ve(""),JI=new ve("");function oL(e){return iL(e.value)?{required:!0}:null}function zI(e){return null}function e2(e){return e!=null}function t2(e){return fs(e)?Et(e):e}function n2(e){let n={};return e.forEach(t=>{n=t!=null?re(re({},n),t):n}),Object.keys(n).length===0?null:n}function r2(e,n){return n.map(t=>t(e))}function sL(e){return!e.validate}function i2(e){return e.map(n=>sL(n)?n:t=>n.validate(t))}function aL(e){if(!e)return null;let n=e.filter(e2);return n.length==0?null:function(t){return n2(r2(t,n))}}function q1(e){return e!=null?aL(i2(e)):null}function lL(e){if(!e)return null;let n=e.filter(e2);return n.length==0?null:function(t){let r=r2(t,n).map(t2);return ug(r).pipe(Ve(n2))}}function Y1(e){return e!=null?lL(i2(e)):null}function WI(e,n){return e===null?[n]:Array.isArray(e)?[...e,n]:[e,n]}function cL(e){return e._rawValidators}function uL(e){return e._rawAsyncValidators}function W1(e){return e?Array.isArray(e)?e:[e]:[]}function oh(e,n){return Array.isArray(e)?e.includes(n):e===n}function GI(e,n){let t=W1(n);return W1(e).forEach(i=>{oh(t,i)||t.push(i)}),t}function $I(e,n){return W1(n).filter(t=>!oh(e,t))}var sh=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(n){this._rawValidators=n||[],this._composedValidatorFn=q1(this._rawValidators)}_setAsyncValidators(n){this._rawAsyncValidators=n||[],this._composedAsyncValidatorFn=Y1(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(n){this._onDestroyCallbacks.push(n)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(n=>n()),this._onDestroyCallbacks=[]}reset(n=void 0){this.control&&this.control.reset(n)}hasError(n,t){return this.control?this.control.hasError(n,t):!1}getError(n,t){return this.control?this.control.getError(n,t):null}},Fa=class extends sh{get formDirective(){return null}get path(){return null}},Ac=class extends sh{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},ah=class{constructor(n){this._cd=n}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},dL={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Bq=Be(re({},dL),{"[class.ng-submitted]":"isSubmitted"}),_n=(()=>{class e extends ah{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||e)(z(Ac,2))}}static{this.\u0275dir=$t({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&hr("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[Zr]})}}return e})(),er=(()=>{class e extends ah{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||e)(z(Fa,10))}}static{this.\u0275dir=$t({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&hr("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[Zr]})}}return e})();var Ec="VALID",ih="INVALID",Pa="PENDING",Ic="DISABLED",La=class{},lh=class extends La{constructor(n,t){super(),this.value=n,this.source=t}},Dc=class extends La{constructor(n,t){super(),this.pristine=n,this.source=t}},Mc=class extends La{constructor(n,t){super(),this.touched=n,this.source=t}},ka=class extends La{constructor(n,t){super(),this.status=n,this.source=t}};function o2(e){return(fh(e)?e.validators:e)||null}function fL(e){return Array.isArray(e)?q1(e):e||null}function s2(e,n){return(fh(n)?n.asyncValidators:e)||null}function hL(e){return Array.isArray(e)?Y1(e):e||null}function fh(e){return e!=null&&!Array.isArray(e)&&typeof e=="object"}function pL(e,n,t){let r=e.controls;if(!(n?Object.keys(r):r).length)throw new de(1e3,"");if(!r[t])throw new de(1001,"")}function gL(e,n,t){e._forEachChild((r,i)=>{if(t[i]===void 0)throw new de(1002,"")})}var ch=class{constructor(n,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=Jl(()=>this.statusReactive()),this.statusReactive=Yl(void 0),this._pristine=Jl(()=>this.pristineReactive()),this.pristineReactive=Yl(!0),this._touched=Jl(()=>this.touchedReactive()),this.touchedReactive=Yl(!1),this._events=new rn,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(n),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(n){this._rawValidators=this._composedValidatorFn=n}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(n){this._rawAsyncValidators=this._composedAsyncValidatorFn=n}get parent(){return this._parent}get status(){return Vi(this.statusReactive)}set status(n){Vi(()=>this.statusReactive.set(n))}get valid(){return this.status===Ec}get invalid(){return this.status===ih}get pending(){return this.status==Pa}get disabled(){return this.status===Ic}get enabled(){return this.status!==Ic}get pristine(){return Vi(this.pristineReactive)}set pristine(n){Vi(()=>this.pristineReactive.set(n))}get dirty(){return!this.pristine}get touched(){return Vi(this.touchedReactive)}set touched(n){Vi(()=>this.touchedReactive.set(n))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(n){this._assignValidators(n)}setAsyncValidators(n){this._assignAsyncValidators(n)}addValidators(n){this.setValidators(GI(n,this._rawValidators))}addAsyncValidators(n){this.setAsyncValidators(GI(n,this._rawAsyncValidators))}removeValidators(n){this.setValidators($I(n,this._rawValidators))}removeAsyncValidators(n){this.setAsyncValidators($I(n,this._rawAsyncValidators))}hasValidator(n){return oh(this._rawValidators,n)}hasAsyncValidator(n){return oh(this._rawAsyncValidators,n)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(n={}){let t=this.touched===!1;this.touched=!0;let r=n.sourceControl??this;this._parent&&!n.onlySelf&&this._parent.markAsTouched(Be(re({},n),{sourceControl:r})),t&&n.emitEvent!==!1&&this._events.next(new Mc(!0,r))}markAllAsTouched(n={}){this.markAsTouched({onlySelf:!0,emitEvent:n.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(n))}markAsUntouched(n={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=n.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:n.emitEvent,sourceControl:r})}),this._parent&&!n.onlySelf&&this._parent._updateTouched(n,r),t&&n.emitEvent!==!1&&this._events.next(new Mc(!1,r))}markAsDirty(n={}){let t=this.pristine===!0;this.pristine=!1;let r=n.sourceControl??this;this._parent&&!n.onlySelf&&this._parent.markAsDirty(Be(re({},n),{sourceControl:r})),t&&n.emitEvent!==!1&&this._events.next(new Dc(!1,r))}markAsPristine(n={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=n.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:n.emitEvent})}),this._parent&&!n.onlySelf&&this._parent._updatePristine(n,r),t&&n.emitEvent!==!1&&this._events.next(new Dc(!0,r))}markAsPending(n={}){this.status=Pa;let t=n.sourceControl??this;n.emitEvent!==!1&&(this._events.next(new ka(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!n.onlySelf&&this._parent.markAsPending(Be(re({},n),{sourceControl:t}))}disable(n={}){let t=this._parentMarkedDirty(n.onlySelf);this.status=Ic,this.errors=null,this._forEachChild(i=>{i.disable(Be(re({},n),{onlySelf:!0}))}),this._updateValue();let r=n.sourceControl??this;n.emitEvent!==!1&&(this._events.next(new lh(this.value,r)),this._events.next(new ka(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Be(re({},n),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(n={}){let t=this._parentMarkedDirty(n.onlySelf);this.status=Ec,this._forEachChild(r=>{r.enable(Be(re({},n),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent}),this._updateAncestors(Be(re({},n),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(n,t){this._parent&&!n.onlySelf&&(this._parent.updateValueAndValidity(n),n.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(n){this._parent=n}getRawValue(){return this.value}updateValueAndValidity(n={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ec||this.status===Pa)&&this._runAsyncValidator(r,n.emitEvent)}let t=n.sourceControl??this;n.emitEvent!==!1&&(this._events.next(new lh(this.value,t)),this._events.next(new ka(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!n.onlySelf&&this._parent.updateValueAndValidity(Be(re({},n),{sourceControl:t}))}_updateTreeValidity(n={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(n)),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ic:Ec}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(n,t){if(this.asyncValidator){this.status=Pa,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let r=t2(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:n})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let n=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,n}return!1}setErrors(n,t={}){this.errors=n,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(n){let t=n;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(n,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[n]:null}hasError(n,t){return!!this.getError(n,t)}get root(){let n=this;for(;n._parent;)n=n._parent;return n}_updateControlsErrors(n,t,r){this.status=this._calculateStatus(),n&&this.statusChanges.emit(this.status),(n||r)&&this._events.next(new ka(this.status,t)),this._parent&&this._parent._updateControlsErrors(n,t,r)}_initObservables(){this.valueChanges=new Pt,this.statusChanges=new Pt}_calculateStatus(){return this._allControlsDisabled()?Ic:this.errors?ih:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Pa)?Pa:this._anyControlsHaveStatus(ih)?ih:Ec}_anyControlsHaveStatus(n){return this._anyControls(t=>t.status===n)}_anyControlsDirty(){return this._anyControls(n=>n.dirty)}_anyControlsTouched(){return this._anyControls(n=>n.touched)}_updatePristine(n,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!n.onlySelf&&this._parent._updatePristine(n,t),i&&this._events.next(new Dc(this.pristine,t))}_updateTouched(n={},t){this.touched=this._anyControlsTouched(),this._events.next(new Mc(this.touched,t)),this._parent&&!n.onlySelf&&this._parent._updateTouched(n,t)}_registerOnCollectionChange(n){this._onCollectionChange=n}_setUpdateStrategy(n){fh(n)&&n.updateOn!=null&&(this._updateOn=n.updateOn)}_parentMarkedDirty(n){let t=this._parent&&this._parent.dirty;return!n&&!!t&&!this._parent._anyControlsDirty()}_find(n){return null}_assignValidators(n){this._rawValidators=Array.isArray(n)?n.slice():n,this._composedValidatorFn=fL(this._rawValidators)}_assignAsyncValidators(n){this._rawAsyncValidators=Array.isArray(n)?n.slice():n,this._composedAsyncValidatorFn=hL(this._rawAsyncValidators)}},uh=class extends ch{constructor(n,t,r){super(o2(t),s2(r,t)),this.controls=n,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(n,t){return this.controls[n]?this.controls[n]:(this.controls[n]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(n,t,r={}){this.registerControl(n,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(n,t={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(n,t,r={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],t&&this.registerControl(n,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(n){return this.controls.hasOwnProperty(n)&&this.controls[n].enabled}setValue(n,t={}){gL(this,!0,n),Object.keys(n).forEach(r=>{pL(this,!0,r),this.controls[r].setValue(n[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(n,t={}){n!=null&&(Object.keys(n).forEach(r=>{let i=this.controls[r];i&&i.patchValue(n[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(n={},t={}){this._forEachChild((r,i)=>{r.reset(n?n[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(n,t,r)=>(n[r]=t.getRawValue(),n))}_syncPendingControls(){let n=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return n&&this.updateValueAndValidity({onlySelf:!0}),n}_forEachChild(n){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&n(r,t)})}_setUpControls(){this._forEachChild(n=>{n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(n){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&n(r))return!0;return!1}_reduceValue(){let n={};return this._reduceChildren(n,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(n,t){let r=n;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let n of Object.keys(this.controls))if(this.controls[n].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(n){return this.controls.hasOwnProperty(n)?this.controls[n]:null}};var X1=new ve("CallSetDisabledState",{providedIn:"root",factory:()=>Z1}),Z1="always";function mL(e,n){return[...n.path,e]}function a2(e,n,t=Z1){l2(e,n),n.valueAccessor.writeValue(e.value),(e.disabled||t==="always")&&n.valueAccessor.setDisabledState?.(e.disabled),CL(e,n),wL(e,n),_L(e,n),yL(e,n)}function qI(e,n){e.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(n)})}function yL(e,n){if(n.valueAccessor.setDisabledState){let t=r=>{n.valueAccessor.setDisabledState(r)};e.registerOnDisabledChange(t),n._registerOnDestroy(()=>{e._unregisterOnDisabledChange(t)})}}function l2(e,n){let t=cL(e);n.validator!==null?e.setValidators(WI(t,n.validator)):typeof t=="function"&&e.setValidators([t]);let r=uL(e);n.asyncValidator!==null?e.setAsyncValidators(WI(r,n.asyncValidator)):typeof r=="function"&&e.setAsyncValidators([r]);let i=()=>e.updateValueAndValidity();qI(n._rawValidators,i),qI(n._rawAsyncValidators,i)}function CL(e,n){n.valueAccessor.registerOnChange(t=>{e._pendingValue=t,e._pendingChange=!0,e._pendingDirty=!0,e.updateOn==="change"&&c2(e,n)})}function _L(e,n){n.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,e.updateOn==="blur"&&e._pendingChange&&c2(e,n),e.updateOn!=="submit"&&e.markAsTouched()})}function c2(e,n){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),n.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function wL(e,n){let t=(r,i)=>{n.valueAccessor.writeValue(r),i&&n.viewToModelUpdate(r)};e.registerOnChange(t),n._registerOnDestroy(()=>{e._unregisterOnChange(t)})}function vL(e,n){e==null,l2(e,n)}function bL(e,n){if(!e.hasOwnProperty("model"))return!1;let t=e.model;return t.isFirstChange()?!0:!Object.is(n,t.currentValue)}function xL(e){return Object.getPrototypeOf(e.constructor)===G1}function EL(e,n){e._syncPendingControls(),n.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function IL(e,n){if(!n)return null;Array.isArray(n);let t,r,i;return n.forEach(o=>{o.constructor===Kt?t=o:xL(o)?r=o:i=o}),i||r||t||null}var SL={provide:Fa,useExisting:Oi(()=>Wn)},Sc=Promise.resolve(),Wn=(()=>{class e extends Fa{get submitted(){return Vi(this.submittedReactive)}constructor(t,r,i){super(),this.callSetDisabledState=i,this._submitted=Jl(()=>this.submittedReactive()),this.submittedReactive=Yl(!1),this._directives=new Set,this.ngSubmit=new Pt,this.form=new uh({},q1(t),Y1(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Sc.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),a2(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Sc.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Sc.then(()=>{let r=this._findContainer(t.path),i=new uh({});vL(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Sc.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Sc.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),EL(this.form,this._directives),this.ngSubmit.emit(t),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static{this.\u0275fac=function(r){return new(r||e)(z($1,10),z(JI,10),z(X1,8))}}static{this.\u0275dir=$t({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&j("submit",function(c){return i.onSubmit(c)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[ds([SL]),Zr]})}}return e})();function YI(e,n){let t=e.indexOf(n);t>-1&&e.splice(t,1)}function XI(e){return typeof e=="object"&&e!==null&&Object.keys(e).length===2&&"value"in e&&"disabled"in e}var DL=class extends ch{constructor(n=null,t,r){super(o2(t),s2(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(n),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),fh(t)&&(t.nonNullable||t.initialValueIsDefault)&&(XI(n)?this.defaultValue=n.value:this.defaultValue=n)}setValue(n,t={}){this.value=this._pendingValue=n,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(n,t={}){this.setValue(n,t)}reset(n=this.defaultValue,t={}){this._applyFormState(n),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(n){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(n){this._onChange.push(n)}_unregisterOnChange(n){YI(this._onChange,n)}registerOnDisabledChange(n){this._onDisabledChange.push(n)}_unregisterOnDisabledChange(n){YI(this._onDisabledChange,n)}_forEachChild(n){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(n){XI(n)?(this.value=this._pendingValue=n.value,n.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=n}};var ML={provide:Ac,useExisting:Oi(()=>cn)},ZI=Promise.resolve(),cn=(()=>{class e extends Ac{constructor(t,r,i,o,c,h){super(),this._changeDetectorRef=c,this.callSetDisabledState=h,this.control=new DL,this._registered=!1,this.name="",this.update=new Pt,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=IL(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),bL(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){a2(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){ZI.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&Kl(r);ZI.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?mL(t,this._parent):[t]}static{this.\u0275fac=function(r){return new(r||e)(z(Fa,9),z($1,10),z(JI,10),z(dh,10),z(Ui,8),z(X1,8))}}static{this.\u0275dir=$t({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[ds([ML]),Zr,Pi]})}}return e})(),tr=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275dir=$t({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return e})();var AL={provide:dh,useExisting:Oi(()=>Ba),multi:!0};function u2(e,n){return e==null?`${n}`:(n&&typeof n=="object"&&(n="Object"),`${e}: ${n}`.slice(0,50))}function TL(e){return e.split(":")[0]}var Ba=(()=>{class e extends G1{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let r=this._getOptionId(t),i=u2(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=TL(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Co(e)))(i||e)}})()}static{this.\u0275dir=$t({type:e,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&j("change",function(c){return i.onChange(c.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[ds([AL]),Zr]})}}return e})(),hh=(()=>{class e{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(u2(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||e)(z(fr),z(Xr),z(Ba,9))}}static{this.\u0275dir=$t({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return e})(),OL={provide:dh,useExisting:Oi(()=>d2),multi:!0};function QI(e,n){return e==null?`${n}`:(typeof n=="string"&&(n=`'${n}'`),n&&typeof n=="object"&&(n="Object"),`${e}: ${n}`.slice(0,50))}function NL(e){return e.split(":")[0]}var d2=(()=>{class e extends G1{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(o=>this._getOptionId(o));r=(o,c)=>{o._setSelected(i.indexOf(c.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let c=o;for(let h=0;h<c.length;h++){let g=c[h],m=this._getOptionValue(g.value);i.push(m)}}else{let c=r.options;for(let h=0;h<c.length;h++){let g=c[h];if(g.selected){let m=this._getOptionValue(g.value);i.push(m)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=NL(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Co(e)))(i||e)}})()}static{this.\u0275dir=$t({type:e,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&j("change",function(c){return i.onChange(c.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[ds([OL]),Zr]})}}return e})(),ph=(()=>{class e{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(QI(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(QI(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||e)(z(fr),z(Xr),z(d2,9))}}static{this.\u0275dir=$t({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return e})();var RL=(()=>{class e{constructor(){this._validator=zI}ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):zI,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275dir=$t({type:e,features:[Pi]})}}return e})();var PL={provide:$1,useExisting:Oi(()=>An),multi:!0};var An=(()=>{class e extends RL{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=Kl,this.createValidator=t=>oL}enabled(t){return t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Co(e)))(i||e)}})()}static{this.\u0275dir=$t({type:e,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&Df("required",i._enabled?"":null)},inputs:{required:"required"},features:[ds([PL]),Zr]})}}return e})();var kL=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=Ri({type:e})}static{this.\u0275inj=Ni({})}}return e})();var Ht=(()=>{class e{static withConfig(t){return{ngModule:e,providers:[{provide:X1,useValue:t.callSetDisabledState??Z1}]}}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=Ri({type:e})}static{this.\u0275inj=Ni({imports:[kL]})}}return e})();var Q1={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};var ee=function(e,n){if(!e)throw _s(n)},_s=function(e){return new Error("Firebase Database ("+Q1.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)};var h2=function(e){let n=[],t=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?n[t++]=i:i<2048?(n[t++]=i>>6|192,n[t++]=i&63|128):(i&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),n[t++]=i>>18|240,n[t++]=i>>12&63|128,n[t++]=i>>6&63|128,n[t++]=i&63|128):(n[t++]=i>>12|224,n[t++]=i>>6&63|128,n[t++]=i&63|128)}return n},FL=function(e){let n=[],t=0,r=0;for(;t<e.length;){let i=e[t++];if(i<128)n[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=e[t++];n[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=e[t++],c=e[t++],h=e[t++],g=((i&7)<<18|(o&63)<<12|(c&63)<<6|h&63)-65536;n[r++]=String.fromCharCode(55296+(g>>10)),n[r++]=String.fromCharCode(56320+(g&1023))}else{let o=e[t++],c=e[t++];n[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|c&63)}}return n.join("")},mh={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,n){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=n?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){let o=e[i],c=i+1<e.length,h=c?e[i+1]:0,g=i+2<e.length,m=g?e[i+2]:0,v=o>>2,b=(o&3)<<4|h>>4,I=(h&15)<<2|m>>6,M=m&63;g||(M=64,c||(I=64)),r.push(t[v],t[b],t[I],t[M])}return r.join("")},encodeString(e,n){return this.HAS_NATIVE_SUPPORT&&!n?btoa(e):this.encodeByteArray(h2(e),n)},decodeString(e,n){return this.HAS_NATIVE_SUPPORT&&!n?atob(e):FL(this.decodeStringToByteArray(e,n))},decodeStringToByteArray(e,n){this.init_();let t=n?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){let o=t[e.charAt(i++)],h=i<e.length?t[e.charAt(i)]:0;++i;let m=i<e.length?t[e.charAt(i)]:64;++i;let b=i<e.length?t[e.charAt(i)]:64;if(++i,o==null||h==null||m==null||b==null)throw new K1;let I=o<<2|h>>4;if(r.push(I),m!==64){let M=h<<4&240|m>>2;if(r.push(M),b!==64){let R=m<<6&192|b;r.push(R)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},K1=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},ey=function(e){let n=h2(e);return mh.encodeByteArray(n,!0)},Tc=function(e){return ey(e).replace(/\./g,"")},J1=function(e){try{return mh.decodeString(e,!0)}catch(n){console.error("base64Decode failed: ",n)}return null};function p2(e){return g2(void 0,e)}function g2(e,n){if(!(n instanceof Object))return n;switch(n.constructor){case Date:let t=n;return new Date(t.getTime());case Object:e===void 0&&(e={});break;case Array:e=[];break;default:return n}for(let t in n)!n.hasOwnProperty(t)||!LL(t)||(e[t]=g2(e[t],n[t]));return e}function LL(e){return e!=="__proto__"}function BL(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var UL=()=>BL().__FIREBASE_DEFAULTS__,VL=()=>{if(typeof process>"u"||typeof process.env>"u")return;let e=process.env.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},jL=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let n=e&&J1(e[1]);return n&&JSON.parse(n)},m2=()=>{try{return UL()||VL()||jL()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},HL=e=>{var n,t;return(t=(n=m2())===null||n===void 0?void 0:n.emulatorHosts)===null||t===void 0?void 0:t[e]},y2=e=>{let n=HL(e);if(!n)return;let t=n.lastIndexOf(":");if(t<=0||t+1===n.length)throw new Error(`Invalid host ${n} with no separate hostname and port!`);let r=parseInt(n.substring(t+1),10);return n[0]==="["?[n.substring(1,t-1),r]:[n.substring(0,t),r]},ty=()=>{var e;return(e=m2())===null||e===void 0?void 0:e.config};var Gi=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((n,t)=>{this.resolve=n,this.reject=t})}wrapCallback(n){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof n=="function"&&(this.promise.catch(()=>{}),n.length===1?n(t):n(t,r))}}};function C2(e,n){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=n||"demo-project",i=e.iat||0,o=e.sub||e.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let c=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Tc(JSON.stringify(t)),Tc(JSON.stringify(c)),""].join(".")}function zL(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ny(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(zL())}function _2(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function mi(){return Q1.NODE_CLIENT===!0||Q1.NODE_ADMIN===!0}function w2(){try{return typeof indexedDB=="object"}catch{return!1}}function v2(){return new Promise((e,n)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;n(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){n(t)}})}var WL="FirebaseError",Cs=class e extends Error{constructor(n,t,r){super(t),this.code=n,this.customData=r,this.name=WL,Object.setPrototypeOf(this,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Oc.prototype.create)}},Oc=class{constructor(n,t,r){this.service=n,this.serviceName=t,this.errors=r}create(n,...t){let r=t[0]||{},i=`${this.service}/${n}`,o=this.errors[n],c=o?GL(o,r):"Error",h=`${this.serviceName}: ${c} (${i}).`;return new Cs(i,h,r)}};function GL(e,n){return e.replace($L,(t,r)=>{let i=n[r];return i!=null?String(i):`<${r}?>`})}var $L=/\{\$([^}]+)}/g;function Ua(e){return JSON.parse(e)}function Jt(e){return JSON.stringify(e)}var b2=function(e){let n={},t={},r={},i="";try{let o=e.split(".");n=Ua(J1(o[0])||""),t=Ua(J1(o[1])||""),i=o[2],r=t.d||{},delete t.d}catch{}return{header:n,claims:t,data:r,signature:i}};var x2=function(e){let n=b2(e),t=n.claims;return!!t&&typeof t=="object"&&t.hasOwnProperty("iat")},E2=function(e){let n=b2(e).claims;return typeof n=="object"&&n.admin===!0};function Kr(e,n){return Object.prototype.hasOwnProperty.call(e,n)}function ws(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]}function ry(e){for(let n in e)if(Object.prototype.hasOwnProperty.call(e,n))return!1;return!0}function Nc(e,n,t){let r={};for(let i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=n.call(t,e[i],i,e));return r}function yh(e,n){if(e===n)return!0;let t=Object.keys(e),r=Object.keys(n);for(let i of t){if(!r.includes(i))return!1;let o=e[i],c=n[i];if(f2(o)&&f2(c)){if(!yh(o,c))return!1}else if(o!==c)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function f2(e){return e!==null&&typeof e=="object"}function I2(e){let n=[];for(let[t,r]of Object.entries(e))Array.isArray(r)?r.forEach(i=>{n.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):n.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return n.length?"&"+n.join("&"):""}var gh=class{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let n=1;n<this.blockSize;++n)this.pad_[n]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(n,t){t||(t=0);let r=this.W_;if(typeof n=="string")for(let b=0;b<16;b++)r[b]=n.charCodeAt(t)<<24|n.charCodeAt(t+1)<<16|n.charCodeAt(t+2)<<8|n.charCodeAt(t+3),t+=4;else for(let b=0;b<16;b++)r[b]=n[t]<<24|n[t+1]<<16|n[t+2]<<8|n[t+3],t+=4;for(let b=16;b<80;b++){let I=r[b-3]^r[b-8]^r[b-14]^r[b-16];r[b]=(I<<1|I>>>31)&4294967295}let i=this.chain_[0],o=this.chain_[1],c=this.chain_[2],h=this.chain_[3],g=this.chain_[4],m,v;for(let b=0;b<80;b++){b<40?b<20?(m=h^o&(c^h),v=1518500249):(m=o^c^h,v=1859775393):b<60?(m=o&c|h&(o|c),v=2400959708):(m=o^c^h,v=3395469782);let I=(i<<5|i>>>27)+m+g+v+r[b]&4294967295;g=h,h=c,c=(o<<30|o>>>2)&4294967295,o=i,i=I}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+g&4294967295}update(n,t){if(n==null)return;t===void 0&&(t=n.length);let r=t-this.blockSize,i=0,o=this.buf_,c=this.inbuf_;for(;i<t;){if(c===0)for(;i<=r;)this.compress_(n,i),i+=this.blockSize;if(typeof n=="string"){for(;i<t;)if(o[c]=n.charCodeAt(i),++c,++i,c===this.blockSize){this.compress_(o),c=0;break}}else for(;i<t;)if(o[c]=n[i],++c,++i,c===this.blockSize){this.compress_(o),c=0;break}}this.inbuf_=c,this.total_+=t}digest(){let n=[],t=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=t&255,t/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let o=24;o>=0;o-=8)n[r]=this.chain_[i]>>o&255,++r;return n}};function Rc(e,n){return`${e} failed: ${n} argument `}var S2=function(e){let n=[],t=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);if(i>=55296&&i<=56319){let o=i-55296;r++,ee(r<e.length,"Surrogate pair missing trail surrogate.");let c=e.charCodeAt(r)-56320;i=65536+(o<<10)+c}i<128?n[t++]=i:i<2048?(n[t++]=i>>6|192,n[t++]=i&63|128):i<65536?(n[t++]=i>>12|224,n[t++]=i>>6&63|128,n[t++]=i&63|128):(n[t++]=i>>18|240,n[t++]=i>>12&63|128,n[t++]=i>>6&63|128,n[t++]=i&63|128)}return n},Pc=function(e){let n=0;for(let t=0;t<e.length;t++){let r=e.charCodeAt(t);r<128?n++:r<2048?n+=2:r>=55296&&r<=56319?(n+=4,t++):n+=3}return n};var jq=4*60*60*1e3;function Eo(e){return e&&e._delegate?e._delegate:e}var $i=class{constructor(n,t,r){this.name=n,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(n){return this.instantiationMode=n,this}setMultipleInstances(n){return this.multipleInstances=n,this}setServiceProps(n){return this.serviceProps=n,this}setInstanceCreatedCallback(n){return this.onInstanceCreated=n,this}};var vs="[DEFAULT]";var Ch=class{constructor(n,t){this.name=n,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(n){let t=this.normalizeInstanceIdentifier(n);if(!this.instancesDeferred.has(t)){let r=new Gi;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(n){var t;let r=this.normalizeInstanceIdentifier(n?.identifier),i=(t=n?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(n){if(n.name!==this.name)throw Error(`Mismatching Component ${n.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=n,!!this.shouldAutoInitialize()){if(YL(n))try{this.getOrInitializeService({instanceIdentifier:vs})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(n=vs){this.instancesDeferred.delete(n),this.instancesOptions.delete(n),this.instances.delete(n)}delete(){return Yt(this,null,function*(){let n=Array.from(this.instances.values());yield Promise.all([...n.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...n.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(n=vs){return this.instances.has(n)}getOptions(n=vs){return this.instancesOptions.get(n)||{}}initialize(n={}){let{options:t={}}=n,r=this.normalizeInstanceIdentifier(n.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,c]of this.instancesDeferred.entries()){let h=this.normalizeInstanceIdentifier(o);r===h&&c.resolve(i)}return i}onInit(n,t){var r;let i=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(n),this.onInitCallbacks.set(i,o);let c=this.instances.get(i);return c&&n(c,i),()=>{o.delete(n)}}invokeOnInitCallbacks(n,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(n,t)}catch{}}getOrInitializeService({instanceIdentifier:n,options:t={}}){let r=this.instances.get(n);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:qL(n),options:t}),this.instances.set(n,r),this.instancesOptions.set(n,t),this.invokeOnInitCallbacks(r,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,r)}catch{}return r||null}normalizeInstanceIdentifier(n=vs){return this.component?this.component.multipleInstances?n:vs:n}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function qL(e){return e===vs?void 0:e}function YL(e){return e.instantiationMode==="EAGER"}var kc=class{constructor(n){this.name=n,this.providers=new Map}addComponent(n){let t=this.getProvider(n.name);if(t.isComponentSet())throw new Error(`Component ${n.name} has already been registered with ${this.name}`);t.setComponent(n)}addOrOverwriteComponent(n){this.getProvider(n.name).isComponentSet()&&this.providers.delete(n.name),this.addComponent(n)}getProvider(n){if(this.providers.has(n))return this.providers.get(n);let t=new Ch(n,this);return this.providers.set(n,t),t}getProviders(){return Array.from(this.providers.values())}};var XL=[],Mt=function(e){return e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT",e}(Mt||{}),ZL={debug:Mt.DEBUG,verbose:Mt.VERBOSE,info:Mt.INFO,warn:Mt.WARN,error:Mt.ERROR,silent:Mt.SILENT},QL=Mt.INFO,KL={[Mt.DEBUG]:"log",[Mt.VERBOSE]:"log",[Mt.INFO]:"info",[Mt.WARN]:"warn",[Mt.ERROR]:"error"},JL=(e,n,...t)=>{if(n<e.logLevel)return;let r=new Date().toISOString(),i=KL[n];if(i)console[i](`[${r}]  ${e.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${n})`)},Va=class{constructor(n){this.name=n,this._logLevel=QL,this._logHandler=JL,this._userLogHandler=null,XL.push(this)}get logLevel(){return this._logLevel}set logLevel(n){if(!(n in Mt))throw new TypeError(`Invalid value "${n}" assigned to \`logLevel\``);this._logLevel=n}setLogLevel(n){this._logLevel=typeof n=="string"?ZL[n]:n}get logHandler(){return this._logHandler}set logHandler(n){if(typeof n!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=n}get userLogHandler(){return this._userLogHandler}set userLogHandler(n){this._userLogHandler=n}debug(...n){this._userLogHandler&&this._userLogHandler(this,Mt.DEBUG,...n),this._logHandler(this,Mt.DEBUG,...n)}log(...n){this._userLogHandler&&this._userLogHandler(this,Mt.VERBOSE,...n),this._logHandler(this,Mt.VERBOSE,...n)}info(...n){this._userLogHandler&&this._userLogHandler(this,Mt.INFO,...n),this._logHandler(this,Mt.INFO,...n)}warn(...n){this._userLogHandler&&this._userLogHandler(this,Mt.WARN,...n),this._logHandler(this,Mt.WARN,...n)}error(...n){this._userLogHandler&&this._userLogHandler(this,Mt.ERROR,...n),this._logHandler(this,Mt.ERROR,...n)}};var e6=(e,n)=>n.some(t=>e instanceof t),D2,M2;function t6(){return D2||(D2=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function n6(){return M2||(M2=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var A2=new WeakMap,oy=new WeakMap,T2=new WeakMap,iy=new WeakMap,ay=new WeakMap;function r6(e){let n=new Promise((t,r)=>{let i=()=>{e.removeEventListener("success",o),e.removeEventListener("error",c)},o=()=>{t(yi(e.result)),i()},c=()=>{r(e.error),i()};e.addEventListener("success",o),e.addEventListener("error",c)});return n.then(t=>{t instanceof IDBCursor&&A2.set(t,e)}).catch(()=>{}),ay.set(n,e),n}function i6(e){if(oy.has(e))return;let n=new Promise((t,r)=>{let i=()=>{e.removeEventListener("complete",o),e.removeEventListener("error",c),e.removeEventListener("abort",c)},o=()=>{t(),i()},c=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",o),e.addEventListener("error",c),e.addEventListener("abort",c)});oy.set(e,n)}var sy={get(e,n,t){if(e instanceof IDBTransaction){if(n==="done")return oy.get(e);if(n==="objectStoreNames")return e.objectStoreNames||T2.get(e);if(n==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return yi(e[n])},set(e,n,t){return e[n]=t,!0},has(e,n){return e instanceof IDBTransaction&&(n==="done"||n==="store")?!0:n in e}};function O2(e){sy=e(sy)}function o6(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(n,...t){let r=e.call(_h(this),n,...t);return T2.set(r,n.sort?n.sort():[n]),yi(r)}:n6().includes(e)?function(...n){return e.apply(_h(this),n),yi(A2.get(this))}:function(...n){return yi(e.apply(_h(this),n))}}function s6(e){return typeof e=="function"?o6(e):(e instanceof IDBTransaction&&i6(e),e6(e,t6())?new Proxy(e,sy):e)}function yi(e){if(e instanceof IDBRequest)return r6(e);if(iy.has(e))return iy.get(e);let n=s6(e);return n!==e&&(iy.set(e,n),ay.set(n,e)),n}var _h=e=>ay.get(e);function R2(e,n,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let c=indexedDB.open(e,n),h=yi(c);return r&&c.addEventListener("upgradeneeded",g=>{r(yi(c.result),g.oldVersion,g.newVersion,yi(c.transaction),g)}),t&&c.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),h.then(g=>{o&&g.addEventListener("close",()=>o()),i&&g.addEventListener("versionchange",m=>i(m.oldVersion,m.newVersion,m))}).catch(()=>{}),h}var a6=["get","getKey","getAll","getAllKeys","count"],l6=["put","add","delete","clear"],ly=new Map;function N2(e,n){if(!(e instanceof IDBDatabase&&!(n in e)&&typeof n=="string"))return;if(ly.get(n))return ly.get(n);let t=n.replace(/FromIndex$/,""),r=n!==t,i=l6.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||a6.includes(t)))return;let o=function(c,...h){return Yt(this,null,function*(){let g=this.transaction(c,i?"readwrite":"readonly"),m=g.store;return r&&(m=m.index(h.shift())),(yield Promise.all([m[t](...h),i&&g.done]))[0]})};return ly.set(n,o),o}O2(e=>Be(re({},e),{get:(n,t,r)=>N2(n,t)||e.get(n,t,r),has:(n,t)=>!!N2(n,t)||e.has(n,t)}));var uy=class{constructor(n){this.container=n}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(c6(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function c6(e){let n=e.getComponent();return n?.type==="VERSION"}var dy="@firebase/app",P2="0.10.12";var qi=new Va("@firebase/app"),u6="@firebase/app-compat",d6="@firebase/analytics-compat",f6="@firebase/analytics",h6="@firebase/app-check-compat",p6="@firebase/app-check",g6="@firebase/auth",m6="@firebase/auth-compat",y6="@firebase/database",C6="@firebase/data-connect",_6="@firebase/database-compat",w6="@firebase/functions",v6="@firebase/functions-compat",b6="@firebase/installations",x6="@firebase/installations-compat",E6="@firebase/messaging",I6="@firebase/messaging-compat",S6="@firebase/performance",D6="@firebase/performance-compat",M6="@firebase/remote-config",A6="@firebase/remote-config-compat",T6="@firebase/storage",O6="@firebase/storage-compat",N6="@firebase/firestore",R6="@firebase/vertexai-preview",P6="@firebase/firestore-compat",k6="firebase",F6="10.14.0";var fy="[DEFAULT]",L6={[dy]:"fire-core",[u6]:"fire-core-compat",[f6]:"fire-analytics",[d6]:"fire-analytics-compat",[p6]:"fire-app-check",[h6]:"fire-app-check-compat",[g6]:"fire-auth",[m6]:"fire-auth-compat",[y6]:"fire-rtdb",[C6]:"fire-data-connect",[_6]:"fire-rtdb-compat",[w6]:"fire-fn",[v6]:"fire-fn-compat",[b6]:"fire-iid",[x6]:"fire-iid-compat",[E6]:"fire-fcm",[I6]:"fire-fcm-compat",[S6]:"fire-perf",[D6]:"fire-perf-compat",[M6]:"fire-rc",[A6]:"fire-rc-compat",[T6]:"fire-gcs",[O6]:"fire-gcs-compat",[N6]:"fire-fst",[P6]:"fire-fst-compat",[R6]:"fire-vertex","fire-js":"fire-js",[k6]:"fire-js-all"};var wh=new Map,B6=new Map,hy=new Map;function k2(e,n){try{e.container.addComponent(n)}catch(t){qi.debug(`Component ${n.name} failed to register with FirebaseApp ${e.name}`,t)}}function Fc(e){let n=e.name;if(hy.has(n))return qi.debug(`There were multiple attempts to register component ${n}.`),!1;hy.set(n,e);for(let t of wh.values())k2(t,e);for(let t of B6.values())k2(t,e);return!0}function U2(e,n){let t=e.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),e.container.getProvider(n)}var U6={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Io=new Oc("app","Firebase",U6);var py=class{constructor(n,t,r){this._isDeleted=!1,this._options=Object.assign({},n),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new $i("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(n){this.checkDestroyed(),this._automaticDataCollectionEnabled=n}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(n){this._isDeleted=n}checkDestroyed(){if(this.isDeleted)throw Io.create("app-deleted",{appName:this._name})}};var V2=F6;function we(e,n={}){let t=e;typeof n!="object"&&(n={name:n});let r=Object.assign({name:fy,automaticDataCollectionEnabled:!1},n),i=r.name;if(typeof i!="string"||!i)throw Io.create("bad-app-name",{appName:String(i)});if(t||(t=ty()),!t)throw Io.create("no-options");let o=wh.get(i);if(o){if(yh(t,o.options)&&yh(r,o.config))return o;throw Io.create("duplicate-app",{appName:i})}let c=new kc(i);for(let g of hy.values())c.addComponent(g);let h=new py(t,r,c);return wh.set(i,h),h}function j2(e=fy){let n=wh.get(e);if(!n&&e===fy&&ty())return we();if(!n)throw Io.create("no-app",{appName:e});return n}function So(e,n,t){var r;let i=(r=L6[e])!==null&&r!==void 0?r:e;t&&(i+=`-${t}`);let o=i.match(/\s|\//),c=n.match(/\s|\//);if(o||c){let h=[`Unable to register library "${i}" with version "${n}":`];o&&h.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&c&&h.push("and"),c&&h.push(`version name "${n}" contains illegal characters (whitespace or "/")`),qi.warn(h.join(" "));return}Fc(new $i(`${i}-version`,()=>({library:i,version:n}),"VERSION"))}var V6="firebase-heartbeat-database",j6=1,Lc="firebase-heartbeat-store",cy=null;function H2(){return cy||(cy=R2(V6,j6,{upgrade:(e,n)=>{switch(n){case 0:try{e.createObjectStore(Lc)}catch(t){console.warn(t)}}}}).catch(e=>{throw Io.create("idb-open",{originalErrorMessage:e.message})})),cy}function H6(e){return Yt(this,null,function*(){try{let t=(yield H2()).transaction(Lc),r=yield t.objectStore(Lc).get(z2(e));return yield t.done,r}catch(n){if(n instanceof Cs)qi.warn(n.message);else{let t=Io.create("idb-get",{originalErrorMessage:n?.message});qi.warn(t.message)}}})}function F2(e,n){return Yt(this,null,function*(){try{let r=(yield H2()).transaction(Lc,"readwrite");yield r.objectStore(Lc).put(n,z2(e)),yield r.done}catch(t){if(t instanceof Cs)qi.warn(t.message);else{let r=Io.create("idb-set",{originalErrorMessage:t?.message});qi.warn(r.message)}}})}function z2(e){return`${e.name}!${e.options.appId}`}var z6=1024,W6=30*24*60*60*1e3,gy=class{constructor(n){this.container=n,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new my(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return Yt(this,null,function*(){var n,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=L2();return((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(c=>c.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(c=>{let h=new Date(c.date).valueOf();return Date.now()-h<=W6}),this._storage.overwrite(this._heartbeatsCache))}catch(r){qi.warn(r)}})}getHeartbeatsHeader(){return Yt(this,null,function*(){var n;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=L2(),{heartbeatsToSend:r,unsentEntries:i}=G6(this._heartbeatsCache.heartbeats),o=Tc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return qi.warn(t),""}})}};function L2(){return new Date().toISOString().substring(0,10)}function G6(e,n=z6){let t=[],r=e.slice();for(let i of e){let o=t.find(c=>c.agent===i.agent);if(o){if(o.dates.push(i.date),B2(t)>n){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),B2(t)>n){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var my=class{constructor(n){this.app=n,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return Yt(this,null,function*(){return w2()?v2().then(()=>!0).catch(()=>!1):!1})}read(){return Yt(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield H6(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(n){return Yt(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return F2(this.app,{lastSentHeartbeatDate:(t=n.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:n.heartbeats})}else return})}add(n){return Yt(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return F2(this.app,{lastSentHeartbeatDate:(t=n.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...n.heartbeats]})}else return})}};function B2(e){return Tc(JSON.stringify({version:2,heartbeats:e})).length}function $6(e){Fc(new $i("platform-logger",n=>new uy(n),"PRIVATE")),Fc(new $i("heartbeat",n=>new gy(n),"PRIVATE")),So(dy,P2,e),So(dy,P2,"esm2017"),So("fire-js","")}$6("");var q6="firebase",Y6="10.14.0";So(q6,Y6,"app");var W2="@firebase/database",G2="1.0.8";var _C="";function X6(e){_C=e}var Ey=class{constructor(n){this.domStorage_=n,this.prefix_="firebase:"}set(n,t){t==null?this.domStorage_.removeItem(this.prefixedName_(n)):this.domStorage_.setItem(this.prefixedName_(n),Jt(t))}get(n){let t=this.domStorage_.getItem(this.prefixedName_(n));return t==null?null:Ua(t)}remove(n){this.domStorage_.removeItem(this.prefixedName_(n))}prefixedName_(n){return this.prefix_+n}toString(){return this.domStorage_.toString()}};var Iy=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(n,t){t==null?delete this.cache_[n]:this.cache_[n]=t}get(n){return Kr(this.cache_,n)?this.cache_[n]:null}remove(n){delete this.cache_[n]}};var xS=function(e){try{if(typeof window<"u"&&typeof window[e]<"u"){let n=window[e];return n.setItem("firebase:sentinel","cache"),n.removeItem("firebase:sentinel"),new Ey(n)}}catch{}return new Iy},xs=xS("localStorage"),Sy=xS("sessionStorage");var za=new Va("@firebase/database"),Z6=function(){let e=1;return function(){return e++}}(),ES=function(e){let n=S2(e),t=new gh;t.update(n);let r=t.digest();return mh.encodeByteArray(r)},ru=function(...e){let n="";for(let t=0;t<e.length;t++){let r=e[t];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?n+=ru.apply(null,r):typeof r=="object"?n+=Jt(r):n+=r,n+=" "}return n},Es=null,$2=!0,Q6=function(e,n){ee(!n||e===!0||e===!1,"Can't turn on custom loggers persistently."),e===!0?(za.logLevel=Mt.VERBOSE,Es=za.log.bind(za),n&&Sy.set("logging_enabled",!0)):typeof e=="function"?Es=e:(Es=null,Sy.remove("logging_enabled"))},Tn=function(...e){if($2===!0&&($2=!1,Es===null&&Sy.get("logging_enabled")===!0&&Q6(!0)),Es){let n=ru.apply(null,e);Es(n)}},iu=function(e){return function(...n){Tn(e,...n)}},Dy=function(...e){let n="FIREBASE INTERNAL ERROR: "+ru(...e);za.error(n)},Yi=function(...e){let n=`FIREBASE FATAL ERROR: ${ru(...e)}`;throw za.error(n),new Error(n)},$n=function(...e){let n="FIREBASE WARNING: "+ru(...e);za.warn(n)},K6=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&$n("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},wC=function(e){return typeof e=="number"&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},J6=function(e){if(mi()||document.readyState==="complete")e();else{let n=!1,t=function(){if(!document.body){setTimeout(t,Math.floor(10));return}n||(n=!0,e())};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&t()}),window.attachEvent("onload",t))}},Ga="[MIN_NAME]",Is="[MAX_NAME]",Ds=function(e,n){if(e===n)return 0;if(e===Ga||n===Is)return-1;if(n===Ga||e===Is)return 1;{let t=q2(e),r=q2(n);return t!==null?r!==null?t-r===0?e.length-n.length:t-r:-1:r!==null?1:e<n?-1:1}},e5=function(e,n){return e===n?0:e<n?-1:1},Bc=function(e,n){if(n&&e in n)return n[e];throw new Error("Missing required key ("+e+") in object: "+Jt(n))},vC=function(e){if(typeof e!="object"||e===null)return Jt(e);let n=[];for(let r in e)n.push(r);n.sort();let t="{";for(let r=0;r<n.length;r++)r!==0&&(t+=","),t+=Jt(n[r]),t+=":",t+=vC(e[n[r]]);return t+="}",t},IS=function(e,n){let t=e.length;if(t<=n)return[e];let r=[];for(let i=0;i<t;i+=n)i+n>t?r.push(e.substring(i,t)):r.push(e.substring(i,i+n));return r};function On(e,n){for(let t in e)e.hasOwnProperty(t)&&n(t,e[t])}var SS=function(e){ee(!wC(e),"Invalid JSON number");let n=11,t=52,r=(1<<n-1)-1,i,o,c,h,g;e===0?(o=0,c=0,i=1/e===-1/0?1:0):(i=e<0,e=Math.abs(e),e>=Math.pow(2,1-r)?(h=Math.min(Math.floor(Math.log(e)/Math.LN2),r),o=h+r,c=Math.round(e*Math.pow(2,t-h)-Math.pow(2,t))):(o=0,c=Math.round(e/Math.pow(2,1-r-t))));let m=[];for(g=t;g;g-=1)m.push(c%2?1:0),c=Math.floor(c/2);for(g=n;g;g-=1)m.push(o%2?1:0),o=Math.floor(o/2);m.push(i?1:0),m.reverse();let v=m.join(""),b="";for(g=0;g<64;g+=8){let I=parseInt(v.substr(g,8),2).toString(16);I.length===1&&(I="0"+I),b=b+I}return b.toLowerCase()},t5=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},n5=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function r5(e,n){let t="Unknown Error";e==="too_big"?t="The data requested exceeds the maximum size that can be accessed with a single request.":e==="permission_denied"?t="Client doesn't have permission to access the desired data.":e==="unavailable"&&(t="The service is unavailable");let r=new Error(e+" at "+n._path.toString()+": "+t);return r.code=e.toUpperCase(),r}var i5=new RegExp("^-?(0*)\\d{1,10}$"),o5=-2147483648,s5=2147483647,q2=function(e){if(i5.test(e)){let n=Number(e);if(n>=o5&&n<=s5)return n}return null},el=function(e){try{e()}catch(n){setTimeout(()=>{let t=n.stack||"";throw $n("Exception was thrown by user callback.",t),n},Math.floor(0))}},a5=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},zc=function(e,n){let t=setTimeout(e,n);return typeof t=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):typeof t=="object"&&t.unref&&t.unref(),t};var My=class{constructor(n,t){this.appName_=n,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(n){return this.appCheck?this.appCheck.getToken(n):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(n).then(t,r):t(null)},0)})}addTokenChangeListener(n){var t;(t=this.appCheckProvider)===null||t===void 0||t.get().then(r=>r.addTokenListener(n))}notifyForInvalidToken(){$n(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var Ay=class{constructor(n,t,r){this.appName_=n,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(n){return this.auth_?this.auth_.getToken(n).catch(t=>t&&t.code==="auth/token-not-initialized"?(Tn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(n).then(t,r):t(null)},0)})}addTokenChangeListener(n){this.auth_?this.auth_.addAuthTokenListener(n):this.authProvider_.get().then(t=>t.addAuthTokenListener(n))}removeTokenChangeListener(n){this.authProvider_.get().then(t=>t.removeAuthTokenListener(n))}notifyForInvalidToken(){let n='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?n+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?n+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':n+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',$n(n)}},Wc=(()=>{class e{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}e.OWNER="owner";return e})(),bh="5",DS="v",MS="s",AS="r",TS="f",OS=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,NS="ls",RS="p",Ty="ac",PS="websocket",kS="long_polling";var xh=class{constructor(n,t,r,i,o=!1,c="",h=!1,g=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=o,this.persistenceKey=c,this.includeNamespaceInQueryParams=h,this.isUsingEmulator=g,this._host=n.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=xs.get("host:"+n)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(n){n!==this.internalHost&&(this.internalHost=n,this.isCacheableHost()&&xs.set("host:"+this._host,this.internalHost))}toString(){let n=this.toURLString();return this.persistenceKey&&(n+="<"+this.persistenceKey+">"),n}toURLString(){let n=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${n}${this.host}/${t}`}};function l5(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams}function FS(e,n,t){ee(typeof n=="string","typeof type must == string"),ee(typeof t=="object","typeof params must == object");let r;if(n===PS)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else if(n===kS)r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+n);l5(e)&&(t.ns=e.namespace);let i=[];return On(t,(o,c)=>{i.push(o+"="+c)}),r+i.join("&")}var Oy=class{constructor(){this.counters_={}}incrementCounter(n,t=1){Kr(this.counters_,n)||(this.counters_[n]=0),this.counters_[n]+=t}get(){return p2(this.counters_)}};var yy={},Cy={};function bC(e){let n=e.toString();return yy[n]||(yy[n]=new Oy),yy[n]}function c5(e,n){let t=e.toString();return Cy[t]||(Cy[t]=n()),Cy[t]}var Ny=class{constructor(n){this.onMessage_=n,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(n,t){this.closeAfterResponse=n,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(n,t){for(this.pendingResponses[n]=t;this.pendingResponses[this.currentResponseNum];){let r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&el(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var Y2="start",u5="close",d5="pLPCommand",f5="pRTLPCB",LS="id",BS="pw",US="ser",h5="cb",p5="seg",g5="ts",m5="d",y5="dframe",VS=1870,jS=30,C5=VS-jS,_5=25e3,w5=3e4,Ry=class e{constructor(n,t,r,i,o,c,h){this.connId=n,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.transportSessionId=c,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=iu(n),this.stats_=bC(t),this.urlFn=g=>(this.appCheckToken&&(g[Ty]=this.appCheckToken),FS(t,kS,g))}open(n,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Ny(n),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(w5)),J6(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Py((...o)=>{let[c,h,g,m,v]=o;if(this.incrementIncomingBytes_(o),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,c===Y2)this.id=h,this.password=g;else if(c===u5)h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+c)},(...o)=>{let[c,h]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(c,h)},()=>{this.onClosed_()},this.urlFn);let r={};r[Y2]="t",r[US]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[h5]=this.scriptTagHolder.uniqueCallbackIdentifier),r[DS]=bh,this.transportSessionId&&(r[MS]=this.transportSessionId),this.lastSessionId&&(r[NS]=this.lastSessionId),this.applicationId&&(r[RS]=this.applicationId),this.appCheckToken&&(r[Ty]=this.appCheckToken),typeof location<"u"&&location.hostname&&OS.test(location.hostname)&&(r[AS]=TS);let i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){e.forceAllow_=!0}static forceDisallow(){e.forceDisallow_=!0}static isAvailable(){return mi()?!1:e.forceAllow_?!0:!e.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!t5()&&!n5()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(n){let t=Jt(n);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);let r=ey(t),i=IS(r,C5);for(let o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++}addDisconnectPingFrame(n,t){if(mi())return;this.myDisconnFrame=document.createElement("iframe");let r={};r[y5]="t",r[LS]=n,r[BS]=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(n){let t=Jt(n).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}},Py=class e{constructor(n,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,mi())this.commandCB=n,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=Z6(),window[d5+this.uniqueCallbackIdentifier]=n,window[f5+this.uniqueCallbackIdentifier]=t,this.myIFrame=e.createIFrame_();let o="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(o='<script>document.domain="'+document.domain+'";<\/script>');let c="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(h){Tn("frame writing exception"),h.stack&&Tn(h.stack),Tn(h)}}}static createIFrame_(){let n=document.createElement("iframe");if(n.style.display="none",document.body){document.body.appendChild(n);try{n.contentWindow.document||Tn("No IE domain setting required")}catch{let r=document.domain;n.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return n.contentDocument?n.doc=n.contentDocument:n.contentWindow?n.doc=n.contentWindow.document:n.document&&(n.doc=n.document),n}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let n=this.onDisconnect;n&&(this.onDisconnect=null,n())}startLongPoll(n,t){for(this.myID=n,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let n={};n[LS]=this.myID,n[BS]=this.myPW,n[US]=this.currentSerial;let t=this.urlFn(n),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+jS+r.length<=VS;){let c=this.pendingSegs.shift();r=r+"&"+p5+i+"="+c.seg+"&"+g5+i+"="+c.ts+"&"+m5+i+"="+c.d,i++}return t=t+r,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(n,t,r){this.pendingSegs.push({seg:n,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(n,t){this.outstandingRequests.add(t);let r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(_5)),o=()=>{clearTimeout(i),r()};this.addTag(n,o)}addTag(n,t){mi()?this.doNodeLongPoll(n,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;let r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=n,r.onload=r.onreadystatechange=function(){let i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Tn("Long-poll script failed to load: "+n),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}};var v5=16384,b5=45e3,Eh=null;typeof MozWebSocket<"u"?Eh=MozWebSocket:typeof WebSocket<"u"&&(Eh=WebSocket);var Uc=(()=>{class e{constructor(t,r,i,o,c,h,g){this.connId=t,this.applicationId=i,this.appCheckToken=o,this.authToken=c,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=iu(this.connId),this.stats_=bC(r),this.connURL=e.connectionURL_(r,h,g,o,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,o,c){let h={};return h[DS]=bh,!mi()&&typeof location<"u"&&location.hostname&&OS.test(location.hostname)&&(h[AS]=TS),r&&(h[MS]=r),i&&(h[NS]=i),o&&(h[Ty]=o),c&&(h[RS]=c),FS(t,PS,h)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,xs.set("previous_websocket_failure",!0);try{let i;if(mi()){let o=this.nodeAdmin?"AdminNode":"Node";i={headers:{"User-Agent":`Firebase/${bh}/${_C}/${process.platform}/${o}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);let c=process.env,h=this.connURL.indexOf("wss://")===0?c.HTTPS_PROXY||c.https_proxy:c.HTTP_PROXY||c.http_proxy;h&&(i.proxy={origin:h})}this.mySock=new Eh(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");let o=i.message||i.data;o&&this.log_(o),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");let o=i.message||i.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){e.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){let r=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(r);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&Eh!==null&&!e.forceDisallow_}static previouslyFailed(){return xs.isInMemoryStorage||xs.get("previous_websocket_failure")===!0}markConnectionHealthy(){xs.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){let r=this.frames.join("");this.frames=null;let i=Ua(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(ee(this.frames===null,"We already have a frame buffer"),t.length<=6){let r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(this.mySock===null)return;let r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{let i=this.extractFrameCount_(r);i!==null&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();let r=Jt(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);let i=IS(r,v5);i.length>1&&this.sendString_(String(i.length));for(let o=0;o<i.length;o++)this.sendString_(i[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(b5))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}e.responsesRequiredToBeHealthy=2,e.healthyTimeout=3e4;return e})(),x5=(()=>{class e{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Ry,Uc]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){let r=Uc&&Uc.isAvailable(),i=r&&!Uc.previouslyFailed();if(t.webSocketOnly&&(r||$n("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Uc];else{let o=this.transports_=[];for(let c of e.ALL_TRANSPORTS)c&&c.isAvailable()&&o.push(c);e.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}e.globalTransportInitialized_=!1;return e})(),E5=6e4,I5=5e3,S5=10*1024,D5=100*1024,_y="t",X2="d",M5="s",Z2="r",A5="e",Q2="o",K2="a",J2="n",eS="p",T5="h",ky=class{constructor(n,t,r,i,o,c,h,g,m,v){this.id=n,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=o,this.onMessage_=c,this.onReady_=h,this.onDisconnect_=g,this.onKill_=m,this.lastSessionId=v,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=iu("c:"+this.id+":"),this.transportManager_=new x5(t),this.log_("Connection created"),this.start_()}start_(){let n=this.transportManager_.initialTransport();this.conn_=new n(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=n.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));let i=n.healthyTimeout||0;i>0&&(this.healthyTimeout_=zc(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>D5?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>S5?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(n){return t=>{n===this.conn_?this.onConnectionLost_(t):n===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(n){return t=>{this.state_!==2&&(n===this.rx_?this.onPrimaryMessageReceived_(t):n===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(n){let t={t:"d",d:n};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(n){if(_y in n){let t=n[_y];t===K2?this.upgradeIfSecondaryHealthy_():t===Z2?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===Q2&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(n){let t=Bc("t",n),r=Bc("d",n);if(t==="c")this.onSecondaryControl_(r);else if(t==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:eS,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:K2,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:J2,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(n){let t=Bc("t",n),r=Bc("d",n);t==="c"?this.onControl_(r):t==="d"&&this.onDataMessage_(r)}onDataMessage_(n){this.onPrimaryResponse_(),this.onMessage_(n)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(n){let t=Bc(_y,n);if(X2 in n){let r=n[X2];if(t===T5){let i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(t===J2){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===M5?this.onConnectionShutdown_(r):t===Z2?this.onReset_(r):t===A5?Dy("Server Error: "+r):t===Q2?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Dy("Unknown control packet command: "+t)}}onHandshake_(n){let t=n.ts,r=n.v,i=n.h;this.sessionId=n.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),bh!==r&&$n("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let n=this.transportManager_.upgradeTransport();n&&this.startUpgrade_(n)}startUpgrade_(n){this.secondaryConn_=new n(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=n.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),zc(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(E5))}onReset_(n){this.log_("Reset packet received.  New host: "+n),this.repoInfo_.host=n,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(n,t){this.log_("Realtime connection established."),this.conn_=n,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):zc(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(I5))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:eS,d:{}}}))}onSecondaryConnectionLost_(){let n=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===n||this.rx_===n)&&this.close()}onConnectionLost_(n){this.conn_=null,!n&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(xs.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(n){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(n),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(n){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(n)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var Ih=class{put(n,t,r,i){}merge(n,t,r,i){}refreshAuthToken(n){}refreshAppCheckToken(n){}onDisconnectPut(n,t,r){}onDisconnectMerge(n,t,r){}onDisconnectCancel(n,t){}reportStats(n){}};var Sh=class{constructor(n){this.allowedEvents_=n,this.listeners_={},ee(Array.isArray(n)&&n.length>0,"Requires a non-empty array")}trigger(n,...t){if(Array.isArray(this.listeners_[n])){let r=[...this.listeners_[n]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(n,t,r){this.validateEventType_(n),this.listeners_[n]=this.listeners_[n]||[],this.listeners_[n].push({callback:t,context:r});let i=this.getInitialEvent(n);i&&t.apply(r,i)}off(n,t,r){this.validateEventType_(n);let i=this.listeners_[n]||[];for(let o=0;o<i.length;o++)if(i[o].callback===t&&(!r||r===i[o].context)){i.splice(o,1);return}}validateEventType_(n){ee(this.allowedEvents_.find(t=>t===n),"Unknown event: "+n)}};var Dh=class e extends Sh{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!ny()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new e}getInitialEvent(n){return ee(n==="online","Unknown event type: "+n),[this.online_]}currentlyOnline(){return this.online_}};var tS=32,nS=768,pt=class{constructor(n,t){if(t===void 0){this.pieces_=n.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=n,this.pieceNum_=t}toString(){let n="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==""&&(n+="/"+this.pieces_[t]);return n||"/"}};function at(){return new pt("")}function Ge(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function To(e){return e.pieces_.length-e.pieceNum_}function At(e){let n=e.pieceNum_;return n<e.pieces_.length&&n++,new pt(e.pieces_,n)}function xC(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function O5(e){let n="";for(let t=e.pieceNum_;t<e.pieces_.length;t++)e.pieces_[t]!==""&&(n+="/"+encodeURIComponent(String(e.pieces_[t])));return n||"/"}function Yc(e,n=0){return e.pieces_.slice(e.pieceNum_+n)}function HS(e){if(e.pieceNum_>=e.pieces_.length)return null;let n=[];for(let t=e.pieceNum_;t<e.pieces_.length-1;t++)n.push(e.pieces_[t]);return new pt(n,0)}function zt(e,n){let t=[];for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);if(n instanceof pt)for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);else{let r=n.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new pt(t,0)}function Ye(e){return e.pieceNum_>=e.pieces_.length}function Gn(e,n){let t=Ge(e),r=Ge(n);if(t===null)return n;if(t===r)return Gn(At(e),At(n));throw new Error("INTERNAL ERROR: innerPath ("+n+") is not within outerPath ("+e+")")}function N5(e,n){let t=Yc(e,0),r=Yc(n,0);for(let i=0;i<t.length&&i<r.length;i++){let o=Ds(t[i],r[i]);if(o!==0)return o}return t.length===r.length?0:t.length<r.length?-1:1}function EC(e,n){if(To(e)!==To(n))return!1;for(let t=e.pieceNum_,r=n.pieceNum_;t<=e.pieces_.length;t++,r++)if(e.pieces_[t]!==n.pieces_[r])return!1;return!0}function Dr(e,n){let t=e.pieceNum_,r=n.pieceNum_;if(To(e)>To(n))return!1;for(;t<e.pieces_.length;){if(e.pieces_[t]!==n.pieces_[r])return!1;++t,++r}return!0}var Fy=class{constructor(n,t){this.errorPrefix_=t,this.parts_=Yc(n,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Pc(this.parts_[r]);zS(this)}};function R5(e,n){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(n),e.byteLength_+=Pc(n),zS(e)}function P5(e){let n=e.parts_.pop();e.byteLength_-=Pc(n),e.parts_.length>0&&(e.byteLength_-=1)}function zS(e){if(e.byteLength_>nS)throw new Error(e.errorPrefix_+"has a key path longer than "+nS+" bytes ("+e.byteLength_+").");if(e.parts_.length>tS)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+tS+") or object contains a cycle "+bs(e))}function bs(e){return e.parts_.length===0?"":"in property '"+e.parts_.join(".")+"'"}var Ly=class e extends Sh{constructor(){super(["visible"]);let n,t;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",n="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",n="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",n="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",n="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{let r=!document[n];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new e}getInitialEvent(n){return ee(n==="visible","Unknown event type: "+n),[this.visible_]}};var Vc=1e3,k5=60*5*1e3,rS=30*1e3,F5=1.3,L5=3e4,B5="server_kill",iS=3,IC=(()=>{class e extends Ih{constructor(t,r,i,o,c,h,g,m){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=o,this.onServerInfoUpdate_=c,this.authTokenProvider_=h,this.appCheckTokenProvider_=g,this.authOverride_=m,this.id=e.nextPersistentConnectionId_++,this.log_=iu("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Vc,this.maxReconnectDelay_=k5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,m&&!mi())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Ly.getInstance().on("visible",this.onVisible_,this),t.host.indexOf("fblocal")===-1&&Dh.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){let o=++this.requestNumber_,c={r:o,a:t,b:r};this.log_(Jt(c)),ee(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(c),i&&(this.requestCBHash_[o]=i)}get(t){this.initConnection_();let r=new Gi,o={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:h=>{let g=h.d;h.s==="ok"?r.resolve(g):r.reject(g)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;let c=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(c),r.promise}listen(t,r,i,o){this.initConnection_();let c=t._queryIdentifier,h=t._path.toString();this.log_("Listen called for "+h+" "+c),this.listens.has(h)||this.listens.set(h,new Map),ee(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),ee(!this.listens.get(h).has(c),"listen() called twice for same path/queryId.");let g={onComplete:o,hashFn:r,query:t,tag:i};this.listens.get(h).set(c,g),this.connected_&&this.sendListen_(g)}sendGet_(t){let r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){let r=t.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);let c={p:i},h="q";t.tag&&(c.q=r._queryObject,c.t=t.tag),c.h=t.hashFn(),this.sendRequest(h,c,g=>{let m=g.d,v=g.s;e.warnOnListenWarnings_(m,r),(this.listens.get(i)&&this.listens.get(i).get(o))===t&&(this.log_("listen response",g),v!=="ok"&&this.removeListen_(i,o),t.onComplete&&t.onComplete(v,m))})}static warnOnListenWarnings_(t,r){if(t&&typeof t=="object"&&Kr(t,"w")){let i=ws(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){let o='".indexOn": "'+r._queryParams.getIndex().toString()+'"',c=r._path.toString();$n(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${c} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&t.length===40||E2(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=rS)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let t=this.authToken_,r=x2(t)?"auth":"gauth",i={cred:t};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(r,i,o=>{let c=o.s,h=o.d||"error";this.authToken_===t&&(c==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(c,h))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{let r=t.s,i=t.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){let i=t._path.toString(),o=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+o),ee(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,o)&&this.connected_&&this.sendUnlisten_(i,o,t._queryObject,r)}sendUnlisten_(t,r,i,o){this.log_("Unlisten on "+t+" for "+r);let c={p:t},h="n";o&&(c.q=i,c.t=o),this.sendRequest(h,c)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,o){let c={p:r,d:i};this.log_("onDisconnect "+t,c),this.sendRequest(t,c,h=>{o&&setTimeout(()=>{o(h.s,h.d)},Math.floor(0))})}put(t,r,i,o){this.putInternal("p",t,r,i,o)}merge(t,r,i,o){this.putInternal("m",t,r,i,o)}putInternal(t,r,i,o,c){this.initConnection_();let h={p:r,d:i};c!==void 0&&(h.h=c),this.outstandingPuts_.push({action:t,request:h,onComplete:o}),this.outstandingPutCount_++;let g=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(g):this.log_("Buffering put: "+r)}sendPut_(t){let r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,o=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,c=>{this.log_(r+" response",c),delete this.outstandingPuts_[t],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),o&&o(c.s,c.d)})}reportStats(t){if(this.connected_){let r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{if(i.s!=="ok"){let c=i.d;this.log_("reportStats","Error sending stats: "+c)}})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+Jt(t));let r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),t==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):t==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):t==="c"?this.onListenRevoked_(r.p,r.q):t==="ac"?this.onAuthRevoked_(r.s,r.d):t==="apc"?this.onAppCheckRevoked_(r.s,r.d):t==="sd"?this.onSecurityDebugPacket_(r):Dy("Unrecognized action received from server: "+Jt(t)+`
Are you using the latest client?`)}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){ee(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Vc,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Vc,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>L5&&(this.reconnectDelay_=Vc),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let t=new Date().getTime()-this.lastConnectionAttemptTime_,r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*F5)}this.onConnectStatus_(!1)}establishConnection_(){return Yt(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let t=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+e.nextConnectionId_++,c=this.lastSessionId,h=!1,g=null,m=function(){g?g.close():(h=!0,i())},v=function(I){ee(g,"sendRequest call when we're not connected not allowed."),g.sendRequest(I)};this.realtime_={close:m,sendRequest:v};let b=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[I,M]=yield Promise.all([this.authTokenProvider_.getToken(b),this.appCheckTokenProvider_.getToken(b)]);h?Tn("getToken() completed but was canceled"):(Tn("getToken() completed. Creating connection."),this.authToken_=I&&I.accessToken,this.appCheckToken_=M&&M.token,g=new ky(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,r,i,R=>{$n(R+" ("+this.repoInfo_.toString()+")"),this.interrupt(B5)},c))}catch(I){this.log_("Failed to get token: "+I),h||(this.repoInfo_.nodeAdmin&&$n(I),m())}}})}interrupt(t){Tn("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Tn("Resuming connection for reason: "+t),delete this.interruptReasons_[t],ry(this.interruptReasons_)&&(this.reconnectDelay_=Vc,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){let r=t-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){let r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;r?i=r.map(c=>vC(c)).join("$"):i="default";let o=this.removeListen_(t,i);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(t,r){let i=new pt(t).toString(),o;if(this.listens.has(i)){let c=this.listens.get(i);o=c.get(r),c.delete(r),c.size===0&&this.listens.delete(i)}else o=void 0;return o}onAuthRevoked_(t,r){Tn("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(t==="invalid_token"||t==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=iS&&(this.reconnectDelay_=rS,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Tn("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(t==="invalid_token"||t==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=iS&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let t of this.listens.values())for(let r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){let t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){let t={},r="js";mi()&&(this.repoInfo_.nodeAdmin?r="admin_node":r="node"),t["sdk."+r+"."+_C.replace(/\./g,"-")]=1,ny()?t["framework.cordova"]=1:_2()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){let t=Dh.getInstance().currentlyOnline();return ry(this.interruptReasons_)&&t}}e.nextPersistentConnectionId_=0,e.nextConnectionId_=0;return e})(),$e=class e{constructor(n,t){this.name=n,this.node=t}static Wrap(n,t){return new e(n,t)}};var $a=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(n,t){let r=new $e(Ga,n),i=new $e(Ga,t);return this.compare(r,i)!==0}minPost(){return $e.MIN}};var vh,Mh=class extends $a{static get __EMPTY_NODE(){return vh}static set __EMPTY_NODE(n){vh=n}compare(n,t){return Ds(n.name,t.name)}isDefinedOn(n){throw _s("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(n,t){return!1}minPost(){return $e.MIN}maxPost(){return new $e(Is,vh)}makePost(n,t){return ee(typeof n=="string","KeyIndex indexValue must always be a string."),new $e(n,vh)}toString(){return".key"}},Wa=new Mh;var Ha=class{constructor(n,t,r,i,o=null){this.isReverse_=i,this.resultGenerator_=o,this.nodeStack_=[];let c=1;for(;!n.isEmpty();)if(n=n,c=t?r(n.key,t):1,i&&(c*=-1),c<0)this.isReverse_?n=n.left:n=n.right;else if(c===0){this.nodeStack_.push(n);break}else this.nodeStack_.push(n),this.isReverse_?n=n.right:n=n.left}getNext(){if(this.nodeStack_.length===0)return null;let n=this.nodeStack_.pop(),t;if(this.resultGenerator_?t=this.resultGenerator_(n.key,n.value):t={key:n.key,value:n.value},this.isReverse_)for(n=n.left;!n.isEmpty();)this.nodeStack_.push(n),n=n.right;else for(n=n.right;!n.isEmpty();)this.nodeStack_.push(n),n=n.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let n=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(n.key,n.value):{key:n.key,value:n.value}}},Jr=(()=>{class e{constructor(t,r,i,o,c){this.key=t,this.value=r,this.color=i??e.RED,this.left=o??Mr.EMPTY_NODE,this.right=c??Mr.EMPTY_NODE}copy(t,r,i,o,c){return new e(t??this.key,r??this.value,i??this.color,o??this.left,c??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let o=this,c=i(t,o.key);return c<0?o=o.copy(null,null,null,o.left.insert(t,r,i),null):c===0?o=o.copy(null,r,null,null,null):o=o.copy(null,null,null,null,o.right.insert(t,r,i)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return Mr.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,o;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),r(t,i.key)===0){if(i.right.isEmpty())return Mr.EMPTY_NODE;o=i.right.min_(),i=i.copy(o.key,o.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){let t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){let t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){let t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){let t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return e.RED=!0,e.BLACK=!1,e})(),By=class{copy(n,t,r,i,o){return this}insert(n,t,r){return new Jr(n,t,null)}remove(n,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},Mr=class e{constructor(n,t=e.EMPTY_NODE){this.comparator_=n,this.root_=t}insert(n,t){return new e(this.comparator_,this.root_.insert(n,t,this.comparator_).copy(null,null,Jr.BLACK,null,null))}remove(n){return new e(this.comparator_,this.root_.remove(n,this.comparator_).copy(null,null,Jr.BLACK,null,null))}get(n){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(n,r.key),t===0)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(n){let t,r=this.root_,i=null;for(;!r.isEmpty();)if(t=this.comparator_(n,r.key),t===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else t<0?r=r.left:t>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(n){return this.root_.inorderTraversal(n)}reverseTraversal(n){return this.root_.reverseTraversal(n)}getIterator(n){return new Ha(this.root_,null,this.comparator_,!1,n)}getIteratorFrom(n,t){return new Ha(this.root_,n,this.comparator_,!1,t)}getReverseIteratorFrom(n,t){return new Ha(this.root_,n,this.comparator_,!0,t)}getReverseIterator(n){return new Ha(this.root_,null,this.comparator_,!0,n)}};Mr.EMPTY_NODE=new By;function U5(e,n){return Ds(e.name,n.name)}function SC(e,n){return Ds(e,n)}var Uy;function V5(e){Uy=e}var WS=function(e){return typeof e=="number"?"number:"+SS(e):"string:"+e},GS=function(e){if(e.isLeafNode()){let n=e.val();ee(typeof n=="string"||typeof n=="number"||typeof n=="object"&&Kr(n,".sv"),"Priority must be a string or number.")}else ee(e===Uy||e.isEmpty(),"priority of unexpected type.");ee(e===Uy||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var oS,qa=(()=>{class e{constructor(t,r=e.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,ee(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),GS(this.priorityNode_)}static set __childrenNodeConstructor(t){oS=t}static get __childrenNodeConstructor(){return oS}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new e(this.value_,t)}getImmediateChild(t){return t===".priority"?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Ye(t)?this:Ge(t)===".priority"?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return t===".priority"?this.updatePriority(r):r.isEmpty()&&t!==".priority"?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){let i=Ge(t);return i===null?r:r.isEmpty()&&i!==".priority"?this:(ee(i!==".priority"||To(t)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(At(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+WS(this.priorityNode_.val())+":");let r=typeof this.value_;t+=r+":",r==="number"?t+=SS(this.value_):t+=this.value_,this.lazyHash_=ES(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:(ee(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){let r=typeof t.value_,i=typeof this.value_,o=e.VALUE_TYPE_ORDER.indexOf(r),c=e.VALUE_TYPE_ORDER.indexOf(i);return ee(o>=0,"Unknown leaf type: "+r),ee(c>=0,"Unknown leaf type: "+i),o===c?i==="object"?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:c-o}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){let r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}e.VALUE_TYPE_ORDER=["object","boolean","number","string"];return e})(),$S,qS;function j5(e){$S=e}function H5(e){qS=e}var Vy=class extends $a{compare(n,t){let r=n.node.getPriority(),i=t.node.getPriority(),o=r.compareTo(i);return o===0?Ds(n.name,t.name):o}isDefinedOn(n){return!n.getPriority().isEmpty()}indexedValueChanged(n,t){return!n.getPriority().equals(t.getPriority())}minPost(){return $e.MIN}maxPost(){return new $e(Is,new qa("[PRIORITY-POST]",qS))}makePost(n,t){let r=$S(n);return new $e(t,new qa("[PRIORITY-POST]",r))}toString(){return".priority"}},Wt=new Vy;var z5=Math.log(2),jy=class{constructor(n){let t=o=>parseInt(Math.log(o)/z5,10),r=o=>parseInt(Array(o+1).join("1"),2);this.count=t(n+1),this.current_=this.count-1;let i=r(this.count);this.bits_=n+1&i}nextBitIsOne(){let n=!(this.bits_&1<<this.current_);return this.current_--,n}},Ah=function(e,n,t,r){e.sort(n);let i=function(g,m){let v=m-g,b,I;if(v===0)return null;if(v===1)return b=e[g],I=t?t(b):b,new Jr(I,b.node,Jr.BLACK,null,null);{let M=parseInt(v/2,10)+g,R=i(g,M),H=i(M+1,m);return b=e[M],I=t?t(b):b,new Jr(I,b.node,Jr.BLACK,R,H)}},o=function(g){let m=null,v=null,b=e.length,I=function(R,H){let X=b-R,$=b;b-=R;let ce=i(X+1,$),Ze=e[X],me=t?t(Ze):Ze;M(new Jr(me,Ze.node,H,null,ce))},M=function(R){m?(m.left=R,m=R):(v=R,m=R)};for(let R=0;R<g.count;++R){let H=g.nextBitIsOne(),X=Math.pow(2,g.count-(R+1));H?I(X,Jr.BLACK):(I(X,Jr.BLACK),I(X,Jr.RED))}return v},c=new jy(e.length),h=o(c);return new Mr(r||n,h)};var wy,ja={},Ya=class e{constructor(n,t){this.indexes_=n,this.indexSet_=t}static get Default(){return ee(ja&&Wt,"ChildrenNode.ts has not been loaded"),wy=wy||new e({".priority":ja},{".priority":Wt}),wy}get(n){let t=ws(this.indexes_,n);if(!t)throw new Error("No index defined for "+n);return t instanceof Mr?t:null}hasIndex(n){return Kr(this.indexSet_,n.toString())}addIndex(n,t){ee(n!==Wa,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let r=[],i=!1,o=t.getIterator($e.Wrap),c=o.getNext();for(;c;)i=i||n.isDefinedOn(c.node),r.push(c),c=o.getNext();let h;i?h=Ah(r,n.getCompare()):h=ja;let g=n.toString(),m=Object.assign({},this.indexSet_);m[g]=n;let v=Object.assign({},this.indexes_);return v[g]=h,new e(v,m)}addToIndexes(n,t){let r=Nc(this.indexes_,(i,o)=>{let c=ws(this.indexSet_,o);if(ee(c,"Missing index implementation for "+o),i===ja)if(c.isDefinedOn(n.node)){let h=[],g=t.getIterator($e.Wrap),m=g.getNext();for(;m;)m.name!==n.name&&h.push(m),m=g.getNext();return h.push(n),Ah(h,c.getCompare())}else return ja;else{let h=t.get(n.name),g=i;return h&&(g=g.remove(new $e(n.name,h))),g.insert(n,n.node)}});return new e(r,this.indexSet_)}removeFromIndexes(n,t){let r=Nc(this.indexes_,i=>{if(i===ja)return i;{let o=t.get(n.name);return o?i.remove(new $e(n.name,o)):i}});return new e(r,this.indexSet_)}};var jc,Re=(()=>{class e{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&GS(this.priorityNode_),this.children_.isEmpty()&&ee(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return jc||(jc=new e(new Mr(SC),null,Ya.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||jc}updatePriority(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)}getImmediateChild(t){if(t===".priority")return this.getPriority();{let r=this.children_.get(t);return r===null?jc:r}}getChild(t){let r=Ge(t);return r===null?this:this.getImmediateChild(r).getChild(At(t))}hasChild(t){return this.children_.get(t)!==null}updateImmediateChild(t,r){if(ee(r,"We should always be passing snapshot nodes"),t===".priority")return this.updatePriority(r);{let i=new $e(t,r),o,c;r.isEmpty()?(o=this.children_.remove(t),c=this.indexMap_.removeFromIndexes(i,this.children_)):(o=this.children_.insert(t,r),c=this.indexMap_.addToIndexes(i,this.children_));let h=o.isEmpty()?jc:this.priorityNode_;return new e(o,h,c)}}updateChild(t,r){let i=Ge(t);if(i===null)return r;{ee(Ge(t)!==".priority"||To(t)===1,".priority must be the last token in a path");let o=this.getImmediateChild(i).updateChild(At(t),r);return this.updateImmediateChild(i,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;let r={},i=0,o=0,c=!0;if(this.forEachChild(Wt,(h,g)=>{r[h]=g.val(t),i++,c&&e.INTEGER_REGEXP_.test(h)?o=Math.max(o,Number(h)):c=!1}),!t&&c&&o<2*i){let h=[];for(let g in r)h[g]=r[g];return h}else return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let t="";this.getPriority().isEmpty()||(t+="priority:"+WS(this.getPriority().val())+":"),this.forEachChild(Wt,(r,i)=>{let o=i.hash();o!==""&&(t+=":"+r+":"+o)}),this.lazyHash_=t===""?"":ES(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){let o=this.resolveIndex_(i);if(o){let c=o.getPredecessorKey(new $e(t,r));return c?c.name:null}else return this.children_.getPredecessorKey(t)}getFirstChildName(t){let r=this.resolveIndex_(t);if(r){let i=r.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(t){let r=this.getFirstChildName(t);return r?new $e(r,this.children_.get(r)):null}getLastChildName(t){let r=this.resolveIndex_(t);if(r){let i=r.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(t){let r=this.getLastChildName(t);return r?new $e(r,this.children_.get(r)):null}forEachChild(t,r){let i=this.resolveIndex_(t);return i?i.inorderTraversal(o=>r(o.name,o.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){let i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,o=>o);{let o=this.children_.getIteratorFrom(t.name,$e.Wrap),c=o.peek();for(;c!=null&&r.compare(c,t)<0;)o.getNext(),c=o.peek();return o}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){let i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,o=>o);{let o=this.children_.getReverseIteratorFrom(t.name,$e.Wrap),c=o.peek();for(;c!=null&&r.compare(c,t)>0;)o.getNext(),c=o.peek();return o}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===ou?-1:0}withIndex(t){if(t===Wa||this.indexMap_.hasIndex(t))return this;{let r=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Wa||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{let r=t;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){let i=this.getIterator(Wt),o=r.getIterator(Wt),c=i.getNext(),h=o.getNext();for(;c&&h;){if(c.name!==h.name||!c.node.equals(h.node))return!1;c=i.getNext(),h=o.getNext()}return c===null&&h===null}else return!1;else return!1}}resolveIndex_(t){return t===Wa?null:this.indexMap_.get(t.toString())}}return e.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,e})(),Hy=class extends Re{constructor(){super(new Mr(SC),Re.EMPTY_NODE,Ya.Default)}compareTo(n){return n===this?0:1}equals(n){return n===this}getPriority(){return this}getImmediateChild(n){return Re.EMPTY_NODE}isEmpty(){return!1}},ou=new Hy;Object.defineProperties($e,{MIN:{value:new $e(Ga,Re.EMPTY_NODE)},MAX:{value:new $e(Is,ou)}});Mh.__EMPTY_NODE=Re.EMPTY_NODE;qa.__childrenNodeConstructor=Re;V5(ou);H5(ou);var W5=!0;function un(e,n=null){if(e===null)return Re.EMPTY_NODE;if(typeof e=="object"&&".priority"in e&&(n=e[".priority"]),ee(n===null||typeof n=="string"||typeof n=="number"||typeof n=="object"&&".sv"in n,"Invalid priority type found: "+typeof n),typeof e=="object"&&".value"in e&&e[".value"]!==null&&(e=e[".value"]),typeof e!="object"||".sv"in e){let t=e;return new qa(t,un(n))}if(!(e instanceof Array)&&W5){let t=[],r=!1;if(On(e,(c,h)=>{if(c.substring(0,1)!=="."){let g=un(h);g.isEmpty()||(r=r||!g.getPriority().isEmpty(),t.push(new $e(c,g)))}}),t.length===0)return Re.EMPTY_NODE;let o=Ah(t,U5,c=>c.name,SC);if(r){let c=Ah(t,Wt.getCompare());return new Re(o,un(n),new Ya({".priority":c},{".priority":Wt}))}else return new Re(o,un(n),Ya.Default)}else{let t=Re.EMPTY_NODE;return On(e,(r,i)=>{if(Kr(e,r)&&r.substring(0,1)!=="."){let o=un(i);(o.isLeafNode()||!o.isEmpty())&&(t=t.updateImmediateChild(r,o))}}),t.updatePriority(un(n))}}j5(un);var zy=class extends $a{constructor(n){super(),this.indexPath_=n,ee(!Ye(n)&&Ge(n)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(n){return n.getChild(this.indexPath_)}isDefinedOn(n){return!n.getChild(this.indexPath_).isEmpty()}compare(n,t){let r=this.extractChild(n.node),i=this.extractChild(t.node),o=r.compareTo(i);return o===0?Ds(n.name,t.name):o}makePost(n,t){let r=un(n),i=Re.EMPTY_NODE.updateChild(this.indexPath_,r);return new $e(t,i)}maxPost(){let n=Re.EMPTY_NODE.updateChild(this.indexPath_,ou);return new $e(Is,n)}toString(){return Yc(this.indexPath_,0).join("/")}};var Wy=class extends $a{compare(n,t){let r=n.node.compareTo(t.node);return r===0?Ds(n.name,t.name):r}isDefinedOn(n){return!0}indexedValueChanged(n,t){return!n.equals(t)}minPost(){return $e.MIN}maxPost(){return $e.MAX}makePost(n,t){let r=un(n);return new $e(t,r)}toString(){return".value"}},G5=new Wy;function YS(e){return{type:"value",snapshotNode:e}}function Xa(e,n){return{type:"child_added",snapshotNode:n,childName:e}}function Xc(e,n){return{type:"child_removed",snapshotNode:n,childName:e}}function Zc(e,n,t){return{type:"child_changed",snapshotNode:n,childName:e,oldSnap:t}}function $5(e,n){return{type:"child_moved",snapshotNode:n,childName:e}}var Qc=class{constructor(n){this.index_=n}updateChild(n,t,r,i,o,c){ee(n.isIndexed(this.index_),"A node must be indexed if only a child is updated");let h=n.getImmediateChild(t);return h.getChild(i).equals(r.getChild(i))&&h.isEmpty()===r.isEmpty()||(c!=null&&(r.isEmpty()?n.hasChild(t)?c.trackChildChange(Xc(t,h)):ee(n.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?c.trackChildChange(Xa(t,r)):c.trackChildChange(Zc(t,r,h))),n.isLeafNode()&&r.isEmpty())?n:n.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(n,t,r){return r!=null&&(n.isLeafNode()||n.forEachChild(Wt,(i,o)=>{t.hasChild(i)||r.trackChildChange(Xc(i,o))}),t.isLeafNode()||t.forEachChild(Wt,(i,o)=>{if(n.hasChild(i)){let c=n.getImmediateChild(i);c.equals(o)||r.trackChildChange(Zc(i,o,c))}else r.trackChildChange(Xa(i,o))})),t.withIndex(this.index_)}updatePriority(n,t){return n.isEmpty()?Re.EMPTY_NODE:n.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}};var Th=class e{constructor(n){this.indexedFilter_=new Qc(n.getIndex()),this.index_=n.getIndex(),this.startPost_=e.getStartPost_(n),this.endPost_=e.getEndPost_(n),this.startIsInclusive_=!n.startAfterSet_,this.endIsInclusive_=!n.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(n){let t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),n)<=0:this.index_.compare(this.getStartPost(),n)<0,r=this.endIsInclusive_?this.index_.compare(n,this.getEndPost())<=0:this.index_.compare(n,this.getEndPost())<0;return t&&r}updateChild(n,t,r,i,o,c){return this.matches(new $e(t,r))||(r=Re.EMPTY_NODE),this.indexedFilter_.updateChild(n,t,r,i,o,c)}updateFullNode(n,t,r){t.isLeafNode()&&(t=Re.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(Re.EMPTY_NODE);let o=this;return t.forEachChild(Wt,(c,h)=>{o.matches(new $e(c,h))||(i=i.updateImmediateChild(c,Re.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(n,i,r)}updatePriority(n,t){return n}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(n){if(n.hasStart()){let t=n.getIndexStartName();return n.getIndex().makePost(n.getIndexStartValue(),t)}else return n.getIndex().minPost()}static getEndPost_(n){if(n.hasEnd()){let t=n.getIndexEndName();return n.getIndex().makePost(n.getIndexEndValue(),t)}else return n.getIndex().maxPost()}};var Gy=class{constructor(n){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{let r=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=t=>{let r=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new Th(n),this.index_=n.getIndex(),this.limit_=n.getLimit(),this.reverse_=!n.isViewFromLeft(),this.startIsInclusive_=!n.startAfterSet_,this.endIsInclusive_=!n.endBeforeSet_}updateChild(n,t,r,i,o,c){return this.rangedFilter_.matches(new $e(t,r))||(r=Re.EMPTY_NODE),n.getImmediateChild(t).equals(r)?n:n.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(n,t,r,i,o,c):this.fullLimitUpdateChild_(n,t,r,o,c)}updateFullNode(n,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=Re.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<t.numChildren()&&t.isIndexed(this.index_)){i=Re.EMPTY_NODE.withIndex(this.index_);let o;this.reverse_?o=t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):o=t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let c=0;for(;o.hasNext()&&c<this.limit_;){let h=o.getNext();if(this.withinDirectionalStart(h))if(this.withinDirectionalEnd(h))i=i.updateImmediateChild(h.name,h.node),c++;else break;else continue}}else{i=t.withIndex(this.index_),i=i.updatePriority(Re.EMPTY_NODE);let o;this.reverse_?o=i.getReverseIterator(this.index_):o=i.getIterator(this.index_);let c=0;for(;o.hasNext();){let h=o.getNext();c<this.limit_&&this.withinDirectionalStart(h)&&this.withinDirectionalEnd(h)?c++:i=i.updateImmediateChild(h.name,Re.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(n,i,r)}updatePriority(n,t){return n}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(n,t,r,i,o){let c;if(this.reverse_){let b=this.index_.getCompare();c=(I,M)=>b(M,I)}else c=this.index_.getCompare();let h=n;ee(h.numChildren()===this.limit_,"");let g=new $e(t,r),m=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),v=this.rangedFilter_.matches(g);if(h.hasChild(t)){let b=h.getImmediateChild(t),I=i.getChildAfterChild(this.index_,m,this.reverse_);for(;I!=null&&(I.name===t||h.hasChild(I.name));)I=i.getChildAfterChild(this.index_,I,this.reverse_);let M=I==null?1:c(I,g);if(v&&!r.isEmpty()&&M>=0)return o?.trackChildChange(Zc(t,r,b)),h.updateImmediateChild(t,r);{o?.trackChildChange(Xc(t,b));let H=h.updateImmediateChild(t,Re.EMPTY_NODE);return I!=null&&this.rangedFilter_.matches(I)?(o?.trackChildChange(Xa(I.name,I.node)),H.updateImmediateChild(I.name,I.node)):H}}else return r.isEmpty()?n:v&&c(m,g)>=0?(o!=null&&(o.trackChildChange(Xc(m.name,m.node)),o.trackChildChange(Xa(t,r))),h.updateImmediateChild(t,r).updateImmediateChild(m.name,Re.EMPTY_NODE)):n}};var $y=class e{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Wt}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return ee(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return ee(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ga}hasEnd(){return this.endSet_}getIndexEndValue(){return ee(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return ee(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Is}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return ee(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Wt}copy(){let n=new e;return n.limitSet_=this.limitSet_,n.limit_=this.limit_,n.startSet_=this.startSet_,n.startAfterSet_=this.startAfterSet_,n.indexStartValue_=this.indexStartValue_,n.startNameSet_=this.startNameSet_,n.indexStartName_=this.indexStartName_,n.endSet_=this.endSet_,n.endBeforeSet_=this.endBeforeSet_,n.indexEndValue_=this.indexEndValue_,n.endNameSet_=this.endNameSet_,n.indexEndName_=this.indexEndName_,n.index_=this.index_,n.viewFrom_=this.viewFrom_,n}};function q5(e){return e.loadsAllData()?new Qc(e.getIndex()):e.hasLimit()?new Gy(e):new Th(e)}function sS(e){let n={};if(e.isDefault())return n;let t;if(e.index_===Wt?t="$priority":e.index_===G5?t="$value":e.index_===Wa?t="$key":(ee(e.index_ instanceof zy,"Unrecognized index type!"),t=e.index_.toString()),n.orderBy=Jt(t),e.startSet_){let r=e.startAfterSet_?"startAfter":"startAt";n[r]=Jt(e.indexStartValue_),e.startNameSet_&&(n[r]+=","+Jt(e.indexStartName_))}if(e.endSet_){let r=e.endBeforeSet_?"endBefore":"endAt";n[r]=Jt(e.indexEndValue_),e.endNameSet_&&(n[r]+=","+Jt(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?n.limitToFirst=e.limit_:n.limitToLast=e.limit_),n}function aS(e){let n={};if(e.startSet_&&(n.sp=e.indexStartValue_,e.startNameSet_&&(n.sn=e.indexStartName_),n.sin=!e.startAfterSet_),e.endSet_&&(n.ep=e.indexEndValue_,e.endNameSet_&&(n.en=e.indexEndName_),n.ein=!e.endBeforeSet_),e.limitSet_){n.l=e.limit_;let t=e.viewFrom_;t===""&&(e.isViewFromLeft()?t="l":t="r"),n.vf=t}return e.index_!==Wt&&(n.i=e.index_.toString()),n}var qy=class e extends Ih{constructor(n,t,r,i){super(),this.repoInfo_=n,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=iu("p:rest:"),this.listens_={}}reportStats(n){throw new Error("Method not implemented.")}static getListenId_(n,t){return t!==void 0?"tag$"+t:(ee(n._queryParams.isDefault(),"should have a tag if it's not a default query."),n._path.toString())}listen(n,t,r,i){let o=n._path.toString();this.log_("Listen called for "+o+" "+n._queryIdentifier);let c=e.getListenId_(n,r),h={};this.listens_[c]=h;let g=sS(n._queryParams);this.restRequest_(o+".json",g,(m,v)=>{let b=v;if(m===404&&(b=null,m=null),m===null&&this.onDataUpdate_(o,b,!1,r),ws(this.listens_,c)===h){let I;m?m===401?I="permission_denied":I="rest_error:"+m:I="ok",i(I,null)}})}unlisten(n,t){let r=e.getListenId_(n,t);delete this.listens_[r]}get(n){let t=sS(n._queryParams),r=n._path.toString(),i=new Gi;return this.restRequest_(r+".json",t,(o,c)=>{let h=c;o===404&&(h=null,o=null),o===null?(this.onDataUpdate_(r,h,!1,null),i.resolve(h)):i.reject(new Error(h))}),i.promise}refreshAuthToken(n){}restRequest_(n,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,o])=>{i&&i.accessToken&&(t.auth=i.accessToken),o&&o.token&&(t.ac=o.token);let c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+n+"?ns="+this.repoInfo_.namespace+I2(t);this.log_("Sending REST request for "+c);let h=new XMLHttpRequest;h.onreadystatechange=()=>{if(r&&h.readyState===4){this.log_("REST Response for "+c+" received. status:",h.status,"response:",h.responseText);let g=null;if(h.status>=200&&h.status<300){try{g=Ua(h.responseText)}catch{$n("Failed to parse JSON response for "+c+": "+h.responseText)}r(null,g)}else h.status!==401&&h.status!==404&&$n("Got unsuccessful REST response for "+c+" Status: "+h.status),r(h.status);r=null}},h.open("GET",c,!0),h.send()})}};var Yy=class{constructor(){this.rootNode_=Re.EMPTY_NODE}getNode(n){return this.rootNode_.getChild(n)}updateSnapshot(n,t){this.rootNode_=this.rootNode_.updateChild(n,t)}};function Oh(){return{value:null,children:new Map}}function XS(e,n,t){if(Ye(n))e.value=t,e.children.clear();else if(e.value!==null)e.value=e.value.updateChild(n,t);else{let r=Ge(n);e.children.has(r)||e.children.set(r,Oh());let i=e.children.get(r);n=At(n),XS(i,n,t)}}function Xy(e,n,t){e.value!==null?t(n,e.value):Y5(e,(r,i)=>{let o=new pt(n.toString()+"/"+r);Xy(i,o,t)})}function Y5(e,n){e.children.forEach((t,r)=>{n(r,t)})}var Zy=class{constructor(n){this.collection_=n,this.last_=null}get(){let n=this.collection_.get(),t=Object.assign({},n);return this.last_&&On(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=n,t}};var lS=10*1e3,X5=30*1e3,Z5=5*60*1e3,Qy=class{constructor(n,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Zy(n);let r=lS+(X5-lS)*Math.random();zc(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){let n=this.statsListener_.get(),t={},r=!1;On(n,(i,o)=>{o>0&&Kr(this.statsToReport_,i)&&(t[i]=o,r=!0)}),r&&this.server_.reportStats(t),zc(this.reportStats_.bind(this),Math.floor(Math.random()*2*Z5))}};var Ci=function(e){return e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",e}(Ci||{});function DC(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function MC(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function AC(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}var Ky=class e{constructor(n,t,r){this.path=n,this.affectedTree=t,this.revert=r,this.type=Ci.ACK_USER_WRITE,this.source=DC()}operationForChild(n){if(Ye(this.path)){if(this.affectedTree.value!=null)return ee(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let t=this.affectedTree.subtree(new pt(n));return new e(at(),t,this.revert)}}else return ee(Ge(this.path)===n,"operationForChild called for unrelated child."),new e(At(this.path),this.affectedTree,this.revert)}};var Nh=class e{constructor(n,t){this.source=n,this.path=t,this.type=Ci.LISTEN_COMPLETE}operationForChild(n){return Ye(this.path)?new e(this.source,at()):new e(this.source,At(this.path))}};var Za=class e{constructor(n,t,r){this.source=n,this.path=t,this.snap=r,this.type=Ci.OVERWRITE}operationForChild(n){return Ye(this.path)?new e(this.source,at(),this.snap.getImmediateChild(n)):new e(this.source,At(this.path),this.snap)}};var Kc=class e{constructor(n,t,r){this.source=n,this.path=t,this.children=r,this.type=Ci.MERGE}operationForChild(n){if(Ye(this.path)){let t=this.children.subtree(new pt(n));return t.isEmpty()?null:t.value?new Za(this.source,at(),t.value):new e(this.source,at(),t)}else return ee(Ge(this.path)===n,"Can't get a merge for a child not on the path of the operation"),new e(this.source,At(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var _i=class{constructor(n,t,r){this.node_=n,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(n){if(Ye(n))return this.isFullyInitialized()&&!this.filtered_;let t=Ge(n);return this.isCompleteForChild(t)}isCompleteForChild(n){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(n)}getNode(){return this.node_}};var Jy=class{constructor(n){this.query_=n,this.index_=this.query_._queryParams.getIndex()}};function Q5(e,n,t,r){let i=[],o=[];return n.forEach(c=>{c.type==="child_changed"&&e.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&o.push($5(c.childName,c.snapshotNode))}),Hc(e,i,"child_removed",n,r,t),Hc(e,i,"child_added",n,r,t),Hc(e,i,"child_moved",o,r,t),Hc(e,i,"child_changed",n,r,t),Hc(e,i,"value",n,r,t),i}function Hc(e,n,t,r,i,o){let c=r.filter(h=>h.type===t);c.sort((h,g)=>J5(e,h,g)),c.forEach(h=>{let g=K5(e,h,o);i.forEach(m=>{m.respondsTo(h.type)&&n.push(m.createEvent(g,e.query_))})})}function K5(e,n,t){return n.type==="value"||n.type==="child_removed"||(n.prevName=t.getPredecessorChildName(n.childName,n.snapshotNode,e.index_)),n}function J5(e,n,t){if(n.childName==null||t.childName==null)throw _s("Should only compare child_ events.");let r=new $e(n.childName,n.snapshotNode),i=new $e(t.childName,t.snapshotNode);return e.index_.compare(r,i)}function $h(e,n){return{eventCache:e,serverCache:n}}function Gc(e,n,t,r){return $h(new _i(n,t,r),e.serverCache)}function ZS(e,n,t,r){return $h(e.eventCache,new _i(n,t,r))}function Rh(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function Ss(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}var vy,eB=()=>(vy||(vy=new Mr(e5)),vy),qn=class e{constructor(n,t=eB()){this.value=n,this.children=t}static fromObject(n){let t=new e(null);return On(n,(r,i)=>{t=t.set(new pt(r),i)}),t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(n,t){if(this.value!=null&&t(this.value))return{path:at(),value:this.value};if(Ye(n))return null;{let r=Ge(n),i=this.children.get(r);if(i!==null){let o=i.findRootMostMatchingPathAndValue(At(n),t);return o!=null?{path:zt(new pt(r),o.path),value:o.value}:null}else return null}}findRootMostValueAndPath(n){return this.findRootMostMatchingPathAndValue(n,()=>!0)}subtree(n){if(Ye(n))return this;{let t=Ge(n),r=this.children.get(t);return r!==null?r.subtree(At(n)):new e(null)}}set(n,t){if(Ye(n))return new e(t,this.children);{let r=Ge(n),o=(this.children.get(r)||new e(null)).set(At(n),t),c=this.children.insert(r,o);return new e(this.value,c)}}remove(n){if(Ye(n))return this.children.isEmpty()?new e(null):new e(null,this.children);{let t=Ge(n),r=this.children.get(t);if(r){let i=r.remove(At(n)),o;return i.isEmpty()?o=this.children.remove(t):o=this.children.insert(t,i),this.value===null&&o.isEmpty()?new e(null):new e(this.value,o)}else return this}}get(n){if(Ye(n))return this.value;{let t=Ge(n),r=this.children.get(t);return r?r.get(At(n)):null}}setTree(n,t){if(Ye(n))return t;{let r=Ge(n),o=(this.children.get(r)||new e(null)).setTree(At(n),t),c;return o.isEmpty()?c=this.children.remove(r):c=this.children.insert(r,o),new e(this.value,c)}}fold(n){return this.fold_(at(),n)}fold_(n,t){let r={};return this.children.inorderTraversal((i,o)=>{r[i]=o.fold_(zt(n,i),t)}),t(n,this.value,r)}findOnPath(n,t){return this.findOnPath_(n,at(),t)}findOnPath_(n,t,r){let i=this.value?r(t,this.value):!1;if(i)return i;if(Ye(n))return null;{let o=Ge(n),c=this.children.get(o);return c?c.findOnPath_(At(n),zt(t,o),r):null}}foreachOnPath(n,t){return this.foreachOnPath_(n,at(),t)}foreachOnPath_(n,t,r){if(Ye(n))return this;{this.value&&r(t,this.value);let i=Ge(n),o=this.children.get(i);return o?o.foreachOnPath_(At(n),zt(t,i),r):new e(null)}}foreach(n){this.foreach_(at(),n)}foreach_(n,t){this.children.inorderTraversal((r,i)=>{i.foreach_(zt(n,r),t)}),this.value&&t(n,this.value)}foreachChild(n){this.children.inorderTraversal((t,r)=>{r.value&&n(t,r.value)})}};var ei=class e{constructor(n){this.writeTree_=n}static empty(){return new e(new qn(null))}};function $c(e,n,t){if(Ye(n))return new ei(new qn(t));{let r=e.writeTree_.findRootMostValueAndPath(n);if(r!=null){let i=r.path,o=r.value,c=Gn(i,n);return o=o.updateChild(c,t),new ei(e.writeTree_.set(i,o))}else{let i=new qn(t),o=e.writeTree_.setTree(n,i);return new ei(o)}}}function eC(e,n,t){let r=e;return On(t,(i,o)=>{r=$c(r,zt(n,i),o)}),r}function cS(e,n){if(Ye(n))return ei.empty();{let t=e.writeTree_.setTree(n,new qn(null));return new ei(t)}}function tC(e,n){return Ms(e,n)!=null}function Ms(e,n){let t=e.writeTree_.findRootMostValueAndPath(n);return t!=null?e.writeTree_.get(t.path).getChild(Gn(t.path,n)):null}function uS(e){let n=[],t=e.writeTree_.value;return t!=null?t.isLeafNode()||t.forEachChild(Wt,(r,i)=>{n.push(new $e(r,i))}):e.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&n.push(new $e(r,i.value))}),n}function Mo(e,n){if(Ye(n))return e;{let t=Ms(e,n);return t!=null?new ei(new qn(t)):new ei(e.writeTree_.subtree(n))}}function nC(e){return e.writeTree_.isEmpty()}function Qa(e,n){return QS(at(),e.writeTree_,n)}function QS(e,n,t){if(n.value!=null)return t.updateChild(e,n.value);{let r=null;return n.children.inorderTraversal((i,o)=>{i===".priority"?(ee(o.value!==null,"Priority writes must always be leaf nodes"),r=o.value):t=QS(zt(e,i),o,t)}),!t.getChild(e).isEmpty()&&r!==null&&(t=t.updateChild(zt(e,".priority"),r)),t}}function qh(e,n){return tD(n,e)}function tB(e,n,t,r,i){ee(r>e.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),e.allWrites.push({path:n,snap:t,writeId:r,visible:i}),i&&(e.visibleWrites=$c(e.visibleWrites,n,t)),e.lastWriteId=r}function nB(e,n,t,r){ee(r>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:n,children:t,writeId:r,visible:!0}),e.visibleWrites=eC(e.visibleWrites,n,t),e.lastWriteId=r}function rB(e,n){for(let t=0;t<e.allWrites.length;t++){let r=e.allWrites[t];if(r.writeId===n)return r}return null}function iB(e,n){let t=e.allWrites.findIndex(h=>h.writeId===n);ee(t>=0,"removeWrite called with nonexistent writeId.");let r=e.allWrites[t];e.allWrites.splice(t,1);let i=r.visible,o=!1,c=e.allWrites.length-1;for(;i&&c>=0;){let h=e.allWrites[c];h.visible&&(c>=t&&oB(h,r.path)?i=!1:Dr(r.path,h.path)&&(o=!0)),c--}if(i){if(o)return sB(e),!0;if(r.snap)e.visibleWrites=cS(e.visibleWrites,r.path);else{let h=r.children;On(h,g=>{e.visibleWrites=cS(e.visibleWrites,zt(r.path,g))})}return!0}else return!1}function oB(e,n){if(e.snap)return Dr(e.path,n);for(let t in e.children)if(e.children.hasOwnProperty(t)&&Dr(zt(e.path,t),n))return!0;return!1}function sB(e){e.visibleWrites=KS(e.allWrites,aB,at()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}function aB(e){return e.visible}function KS(e,n,t){let r=ei.empty();for(let i=0;i<e.length;++i){let o=e[i];if(n(o)){let c=o.path,h;if(o.snap)Dr(t,c)?(h=Gn(t,c),r=$c(r,h,o.snap)):Dr(c,t)&&(h=Gn(c,t),r=$c(r,at(),o.snap.getChild(h)));else if(o.children){if(Dr(t,c))h=Gn(t,c),r=eC(r,h,o.children);else if(Dr(c,t))if(h=Gn(c,t),Ye(h))r=eC(r,at(),o.children);else{let g=ws(o.children,Ge(h));if(g){let m=g.getChild(At(h));r=$c(r,at(),m)}}}else throw _s("WriteRecord should have .snap or .children")}}return r}function JS(e,n,t,r,i){if(!r&&!i){let o=Ms(e.visibleWrites,n);if(o!=null)return o;{let c=Mo(e.visibleWrites,n);if(nC(c))return t;if(t==null&&!tC(c,at()))return null;{let h=t||Re.EMPTY_NODE;return Qa(c,h)}}}else{let o=Mo(e.visibleWrites,n);if(!i&&nC(o))return t;if(!i&&t==null&&!tC(o,at()))return null;{let c=function(m){return(m.visible||i)&&(!r||!~r.indexOf(m.writeId))&&(Dr(m.path,n)||Dr(n,m.path))},h=KS(e.allWrites,c,n),g=t||Re.EMPTY_NODE;return Qa(h,g)}}}function lB(e,n,t){let r=Re.EMPTY_NODE,i=Ms(e.visibleWrites,n);if(i)return i.isLeafNode()||i.forEachChild(Wt,(o,c)=>{r=r.updateImmediateChild(o,c)}),r;if(t){let o=Mo(e.visibleWrites,n);return t.forEachChild(Wt,(c,h)=>{let g=Qa(Mo(o,new pt(c)),h);r=r.updateImmediateChild(c,g)}),uS(o).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}else{let o=Mo(e.visibleWrites,n);return uS(o).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}}function cB(e,n,t,r,i){ee(r||i,"Either existingEventSnap or existingServerSnap must exist");let o=zt(n,t);if(tC(e.visibleWrites,o))return null;{let c=Mo(e.visibleWrites,o);return nC(c)?i.getChild(t):Qa(c,i.getChild(t))}}function uB(e,n,t,r){let i=zt(n,t),o=Ms(e.visibleWrites,i);if(o!=null)return o;if(r.isCompleteForChild(t)){let c=Mo(e.visibleWrites,i);return Qa(c,r.getNode().getImmediateChild(t))}else return null}function dB(e,n){return Ms(e.visibleWrites,n)}function fB(e,n,t,r,i,o,c){let h,g=Mo(e.visibleWrites,n),m=Ms(g,at());if(m!=null)h=m;else if(t!=null)h=Qa(g,t);else return[];if(h=h.withIndex(c),!h.isEmpty()&&!h.isLeafNode()){let v=[],b=c.getCompare(),I=o?h.getReverseIteratorFrom(r,c):h.getIteratorFrom(r,c),M=I.getNext();for(;M&&v.length<i;)b(M,r)!==0&&v.push(M),M=I.getNext();return v}else return[]}function hB(){return{visibleWrites:ei.empty(),allWrites:[],lastWriteId:-1}}function Ph(e,n,t,r){return JS(e.writeTree,e.treePath,n,t,r)}function TC(e,n){return lB(e.writeTree,e.treePath,n)}function dS(e,n,t,r){return cB(e.writeTree,e.treePath,n,t,r)}function kh(e,n){return dB(e.writeTree,zt(e.treePath,n))}function pB(e,n,t,r,i,o){return fB(e.writeTree,e.treePath,n,t,r,i,o)}function OC(e,n,t){return uB(e.writeTree,e.treePath,n,t)}function eD(e,n){return tD(zt(e.treePath,n),e.writeTree)}function tD(e,n){return{treePath:e,writeTree:n}}var rC=class{constructor(){this.changeMap=new Map}trackChildChange(n){let t=n.type,r=n.childName;ee(t==="child_added"||t==="child_changed"||t==="child_removed","Only child changes supported for tracking"),ee(r!==".priority","Only non-priority child changes can be tracked.");let i=this.changeMap.get(r);if(i){let o=i.type;if(t==="child_added"&&o==="child_removed")this.changeMap.set(r,Zc(r,n.snapshotNode,i.snapshotNode));else if(t==="child_removed"&&o==="child_added")this.changeMap.delete(r);else if(t==="child_removed"&&o==="child_changed")this.changeMap.set(r,Xc(r,i.oldSnap));else if(t==="child_changed"&&o==="child_added")this.changeMap.set(r,Xa(r,n.snapshotNode));else if(t==="child_changed"&&o==="child_changed")this.changeMap.set(r,Zc(r,n.snapshotNode,i.oldSnap));else throw _s("Illegal combination of changes: "+n+" occurred after "+i)}else this.changeMap.set(r,n)}getChanges(){return Array.from(this.changeMap.values())}};var iC=class{getCompleteChild(n){return null}getChildAfterChild(n,t,r){return null}},nD=new iC,Jc=class{constructor(n,t,r=null){this.writes_=n,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(n){let t=this.viewCache_.eventCache;if(t.isCompleteForChild(n))return t.getNode().getImmediateChild(n);{let r=this.optCompleteServerCache_!=null?new _i(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return OC(this.writes_,n,r)}}getChildAfterChild(n,t,r){let i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Ss(this.viewCache_),o=pB(this.writes_,i,t,1,r,n);return o.length===0?null:o[0]}};function gB(e){return{filter:e}}function mB(e,n){ee(n.eventCache.getNode().isIndexed(e.filter.getIndex()),"Event snap not indexed"),ee(n.serverCache.getNode().isIndexed(e.filter.getIndex()),"Server snap not indexed")}function yB(e,n,t,r,i){let o=new rC,c,h;if(t.type===Ci.OVERWRITE){let m=t;m.source.fromUser?c=oC(e,n,m.path,m.snap,r,i,o):(ee(m.source.fromServer,"Unknown source."),h=m.source.tagged||n.serverCache.isFiltered()&&!Ye(m.path),c=Fh(e,n,m.path,m.snap,r,i,h,o))}else if(t.type===Ci.MERGE){let m=t;m.source.fromUser?c=_B(e,n,m.path,m.children,r,i,o):(ee(m.source.fromServer,"Unknown source."),h=m.source.tagged||n.serverCache.isFiltered(),c=sC(e,n,m.path,m.children,r,i,h,o))}else if(t.type===Ci.ACK_USER_WRITE){let m=t;m.revert?c=bB(e,n,m.path,r,i,o):c=wB(e,n,m.path,m.affectedTree,r,i,o)}else if(t.type===Ci.LISTEN_COMPLETE)c=vB(e,n,t.path,r,o);else throw _s("Unknown operation type: "+t.type);let g=o.getChanges();return CB(n,c,g),{viewCache:c,changes:g}}function CB(e,n,t){let r=n.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=Rh(e);(t.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&t.push(YS(Rh(n)))}}function rD(e,n,t,r,i,o){let c=n.eventCache;if(kh(r,t)!=null)return n;{let h,g;if(Ye(t))if(ee(n.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),n.serverCache.isFiltered()){let m=Ss(n),v=m instanceof Re?m:Re.EMPTY_NODE,b=TC(r,v);h=e.filter.updateFullNode(n.eventCache.getNode(),b,o)}else{let m=Ph(r,Ss(n));h=e.filter.updateFullNode(n.eventCache.getNode(),m,o)}else{let m=Ge(t);if(m===".priority"){ee(To(t)===1,"Can't have a priority with additional path components");let v=c.getNode();g=n.serverCache.getNode();let b=dS(r,t,v,g);b!=null?h=e.filter.updatePriority(v,b):h=c.getNode()}else{let v=At(t),b;if(c.isCompleteForChild(m)){g=n.serverCache.getNode();let I=dS(r,t,c.getNode(),g);I!=null?b=c.getNode().getImmediateChild(m).updateChild(v,I):b=c.getNode().getImmediateChild(m)}else b=OC(r,m,n.serverCache);b!=null?h=e.filter.updateChild(c.getNode(),m,b,v,i,o):h=c.getNode()}}return Gc(n,h,c.isFullyInitialized()||Ye(t),e.filter.filtersNodes())}}function Fh(e,n,t,r,i,o,c,h){let g=n.serverCache,m,v=c?e.filter:e.filter.getIndexedFilter();if(Ye(t))m=v.updateFullNode(g.getNode(),r,null);else if(v.filtersNodes()&&!g.isFiltered()){let M=g.getNode().updateChild(t,r);m=v.updateFullNode(g.getNode(),M,null)}else{let M=Ge(t);if(!g.isCompleteForPath(t)&&To(t)>1)return n;let R=At(t),X=g.getNode().getImmediateChild(M).updateChild(R,r);M===".priority"?m=v.updatePriority(g.getNode(),X):m=v.updateChild(g.getNode(),M,X,R,nD,null)}let b=ZS(n,m,g.isFullyInitialized()||Ye(t),v.filtersNodes()),I=new Jc(i,b,o);return rD(e,b,t,i,I,h)}function oC(e,n,t,r,i,o,c){let h=n.eventCache,g,m,v=new Jc(i,n,o);if(Ye(t))m=e.filter.updateFullNode(n.eventCache.getNode(),r,c),g=Gc(n,m,!0,e.filter.filtersNodes());else{let b=Ge(t);if(b===".priority")m=e.filter.updatePriority(n.eventCache.getNode(),r),g=Gc(n,m,h.isFullyInitialized(),h.isFiltered());else{let I=At(t),M=h.getNode().getImmediateChild(b),R;if(Ye(I))R=r;else{let H=v.getCompleteChild(b);H!=null?xC(I)===".priority"&&H.getChild(HS(I)).isEmpty()?R=H:R=H.updateChild(I,r):R=Re.EMPTY_NODE}if(M.equals(R))g=n;else{let H=e.filter.updateChild(h.getNode(),b,R,I,v,c);g=Gc(n,H,h.isFullyInitialized(),e.filter.filtersNodes())}}}return g}function fS(e,n){return e.eventCache.isCompleteForChild(n)}function _B(e,n,t,r,i,o,c){let h=n;return r.foreach((g,m)=>{let v=zt(t,g);fS(n,Ge(v))&&(h=oC(e,h,v,m,i,o,c))}),r.foreach((g,m)=>{let v=zt(t,g);fS(n,Ge(v))||(h=oC(e,h,v,m,i,o,c))}),h}function hS(e,n,t){return t.foreach((r,i)=>{n=n.updateChild(r,i)}),n}function sC(e,n,t,r,i,o,c,h){if(n.serverCache.getNode().isEmpty()&&!n.serverCache.isFullyInitialized())return n;let g=n,m;Ye(t)?m=r:m=new qn(null).setTree(t,r);let v=n.serverCache.getNode();return m.children.inorderTraversal((b,I)=>{if(v.hasChild(b)){let M=n.serverCache.getNode().getImmediateChild(b),R=hS(e,M,I);g=Fh(e,g,new pt(b),R,i,o,c,h)}}),m.children.inorderTraversal((b,I)=>{let M=!n.serverCache.isCompleteForChild(b)&&I.value===null;if(!v.hasChild(b)&&!M){let R=n.serverCache.getNode().getImmediateChild(b),H=hS(e,R,I);g=Fh(e,g,new pt(b),H,i,o,c,h)}}),g}function wB(e,n,t,r,i,o,c){if(kh(i,t)!=null)return n;let h=n.serverCache.isFiltered(),g=n.serverCache;if(r.value!=null){if(Ye(t)&&g.isFullyInitialized()||g.isCompleteForPath(t))return Fh(e,n,t,g.getNode().getChild(t),i,o,h,c);if(Ye(t)){let m=new qn(null);return g.getNode().forEachChild(Wa,(v,b)=>{m=m.set(new pt(v),b)}),sC(e,n,t,m,i,o,h,c)}else return n}else{let m=new qn(null);return r.foreach((v,b)=>{let I=zt(t,v);g.isCompleteForPath(I)&&(m=m.set(v,g.getNode().getChild(I)))}),sC(e,n,t,m,i,o,h,c)}}function vB(e,n,t,r,i){let o=n.serverCache,c=ZS(n,o.getNode(),o.isFullyInitialized()||Ye(t),o.isFiltered());return rD(e,c,t,r,nD,i)}function bB(e,n,t,r,i,o){let c;if(kh(r,t)!=null)return n;{let h=new Jc(r,n,i),g=n.eventCache.getNode(),m;if(Ye(t)||Ge(t)===".priority"){let v;if(n.serverCache.isFullyInitialized())v=Ph(r,Ss(n));else{let b=n.serverCache.getNode();ee(b instanceof Re,"serverChildren would be complete if leaf node"),v=TC(r,b)}v=v,m=e.filter.updateFullNode(g,v,o)}else{let v=Ge(t),b=OC(r,v,n.serverCache);b==null&&n.serverCache.isCompleteForChild(v)&&(b=g.getImmediateChild(v)),b!=null?m=e.filter.updateChild(g,v,b,At(t),h,o):n.eventCache.getNode().hasChild(v)?m=e.filter.updateChild(g,v,Re.EMPTY_NODE,At(t),h,o):m=g,m.isEmpty()&&n.serverCache.isFullyInitialized()&&(c=Ph(r,Ss(n)),c.isLeafNode()&&(m=e.filter.updateFullNode(m,c,o)))}return c=n.serverCache.isFullyInitialized()||kh(r,at())!=null,Gc(n,m,c,e.filter.filtersNodes())}}var aC=class{constructor(n,t){this.query_=n,this.eventRegistrations_=[];let r=this.query_._queryParams,i=new Qc(r.getIndex()),o=q5(r);this.processor_=gB(o);let c=t.serverCache,h=t.eventCache,g=i.updateFullNode(Re.EMPTY_NODE,c.getNode(),null),m=o.updateFullNode(Re.EMPTY_NODE,h.getNode(),null),v=new _i(g,c.isFullyInitialized(),i.filtersNodes()),b=new _i(m,h.isFullyInitialized(),o.filtersNodes());this.viewCache_=$h(b,v),this.eventGenerator_=new Jy(this.query_)}get query(){return this.query_}};function xB(e){return e.viewCache_.serverCache.getNode()}function EB(e){return Rh(e.viewCache_)}function IB(e,n){let t=Ss(e.viewCache_);return t&&(e.query._queryParams.loadsAllData()||!Ye(n)&&!t.getImmediateChild(Ge(n)).isEmpty())?t.getChild(n):null}function pS(e){return e.eventRegistrations_.length===0}function SB(e,n){e.eventRegistrations_.push(n)}function gS(e,n,t){let r=[];if(t){ee(n==null,"A cancel should cancel all event registrations.");let i=e.query._path;e.eventRegistrations_.forEach(o=>{let c=o.createCancelEvent(t,i);c&&r.push(c)})}if(n){let i=[];for(let o=0;o<e.eventRegistrations_.length;++o){let c=e.eventRegistrations_[o];if(!c.matches(n))i.push(c);else if(n.hasAnyCallback()){i=i.concat(e.eventRegistrations_.slice(o+1));break}}e.eventRegistrations_=i}else e.eventRegistrations_=[];return r}function mS(e,n,t,r){n.type===Ci.MERGE&&n.source.queryId!==null&&(ee(Ss(e.viewCache_),"We should always have a full cache before handling merges"),ee(Rh(e.viewCache_),"Missing event cache, even though we have a server cache"));let i=e.viewCache_,o=yB(e.processor_,i,n,t,r);return mB(e.processor_,o.viewCache),ee(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=o.viewCache,iD(e,o.changes,o.viewCache.eventCache.getNode(),null)}function DB(e,n){let t=e.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Wt,(o,c)=>{r.push(Xa(o,c))}),t.isFullyInitialized()&&r.push(YS(t.getNode())),iD(e,r,t.getNode(),n)}function iD(e,n,t,r){let i=r?[r]:e.eventRegistrations_;return Q5(e.eventGenerator_,n,t,i)}var Lh,Bh=class{constructor(){this.views=new Map}};function MB(e){ee(!Lh,"__referenceConstructor has already been defined"),Lh=e}function AB(){return ee(Lh,"Reference.ts has not been loaded"),Lh}function TB(e){return e.views.size===0}function NC(e,n,t,r){let i=n.source.queryId;if(i!==null){let o=e.views.get(i);return ee(o!=null,"SyncTree gave us an op for an invalid query."),mS(o,n,t,r)}else{let o=[];for(let c of e.views.values())o=o.concat(mS(c,n,t,r));return o}}function oD(e,n,t,r,i){let o=n._queryIdentifier,c=e.views.get(o);if(!c){let h=Ph(t,i?r:null),g=!1;h?g=!0:r instanceof Re?(h=TC(t,r),g=!1):(h=Re.EMPTY_NODE,g=!1);let m=$h(new _i(h,g,!1),new _i(r,i,!1));return new aC(n,m)}return c}function OB(e,n,t,r,i,o){let c=oD(e,n,r,i,o);return e.views.has(n._queryIdentifier)||e.views.set(n._queryIdentifier,c),SB(c,t),DB(c,t)}function NB(e,n,t,r){let i=n._queryIdentifier,o=[],c=[],h=Oo(e);if(i==="default")for(let[g,m]of e.views.entries())c=c.concat(gS(m,t,r)),pS(m)&&(e.views.delete(g),m.query._queryParams.loadsAllData()||o.push(m.query));else{let g=e.views.get(i);g&&(c=c.concat(gS(g,t,r)),pS(g)&&(e.views.delete(i),g.query._queryParams.loadsAllData()||o.push(g.query)))}return h&&!Oo(e)&&o.push(new(AB())(n._repo,n._path)),{removed:o,events:c}}function sD(e){let n=[];for(let t of e.views.values())t.query._queryParams.loadsAllData()||n.push(t);return n}function Ao(e,n){let t=null;for(let r of e.views.values())t=t||IB(r,n);return t}function aD(e,n){if(n._queryParams.loadsAllData())return Yh(e);{let r=n._queryIdentifier;return e.views.get(r)}}function lD(e,n){return aD(e,n)!=null}function Oo(e){return Yh(e)!=null}function Yh(e){for(let n of e.views.values())if(n.query._queryParams.loadsAllData())return n;return null}var Uh;function RB(e){ee(!Uh,"__referenceConstructor has already been defined"),Uh=e}function PB(){return ee(Uh,"Reference.ts has not been loaded"),Uh}var kB=1,Vh=class{constructor(n){this.listenProvider_=n,this.syncPointTree_=new qn(null),this.pendingWriteTree_=hB(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function cD(e,n,t,r,i){return tB(e.pendingWriteTree_,n,t,r,i),i?tl(e,new Za(DC(),n,t)):[]}function FB(e,n,t,r){nB(e.pendingWriteTree_,n,t,r);let i=qn.fromObject(t);return tl(e,new Kc(DC(),n,i))}function Do(e,n,t=!1){let r=rB(e.pendingWriteTree_,n);if(iB(e.pendingWriteTree_,n)){let o=new qn(null);return r.snap!=null?o=o.set(at(),!0):On(r.children,c=>{o=o.set(new pt(c),!0)}),tl(e,new Ky(r.path,o,t))}else return[]}function su(e,n,t){return tl(e,new Za(MC(),n,t))}function LB(e,n,t){let r=qn.fromObject(t);return tl(e,new Kc(MC(),n,r))}function BB(e,n){return tl(e,new Nh(MC(),n))}function UB(e,n,t){let r=PC(e,t);if(r){let i=kC(r),o=i.path,c=i.queryId,h=Gn(o,n),g=new Nh(AC(c),h);return FC(e,o,g)}else return[]}function jh(e,n,t,r,i=!1){let o=n._path,c=e.syncPointTree_.get(o),h=[];if(c&&(n._queryIdentifier==="default"||lD(c,n))){let g=NB(c,n,t,r);TB(c)&&(e.syncPointTree_=e.syncPointTree_.remove(o));let m=g.removed;if(h=g.events,!i){let v=m.findIndex(I=>I._queryParams.loadsAllData())!==-1,b=e.syncPointTree_.findOnPath(o,(I,M)=>Oo(M));if(v&&!b){let I=e.syncPointTree_.subtree(o);if(!I.isEmpty()){let M=HB(I);for(let R=0;R<M.length;++R){let H=M[R],X=H.query,$=hD(e,H);e.listenProvider_.startListening(qc(X),eu(e,X),$.hashFn,$.onComplete)}}}!b&&m.length>0&&!r&&(v?e.listenProvider_.stopListening(qc(n),null):m.forEach(I=>{let M=e.queryToTagMap.get(Xh(I));e.listenProvider_.stopListening(qc(I),M)}))}zB(e,m)}return h}function uD(e,n,t,r){let i=PC(e,r);if(i!=null){let o=kC(i),c=o.path,h=o.queryId,g=Gn(c,n),m=new Za(AC(h),g,t);return FC(e,c,m)}else return[]}function VB(e,n,t,r){let i=PC(e,r);if(i){let o=kC(i),c=o.path,h=o.queryId,g=Gn(c,n),m=qn.fromObject(t),v=new Kc(AC(h),g,m);return FC(e,c,v)}else return[]}function lC(e,n,t,r=!1){let i=n._path,o=null,c=!1;e.syncPointTree_.foreachOnPath(i,(I,M)=>{let R=Gn(I,i);o=o||Ao(M,R),c=c||Oo(M)});let h=e.syncPointTree_.get(i);h?(c=c||Oo(h),o=o||Ao(h,at())):(h=new Bh,e.syncPointTree_=e.syncPointTree_.set(i,h));let g;o!=null?g=!0:(g=!1,o=Re.EMPTY_NODE,e.syncPointTree_.subtree(i).foreachChild((M,R)=>{let H=Ao(R,at());H&&(o=o.updateImmediateChild(M,H))}));let m=lD(h,n);if(!m&&!n._queryParams.loadsAllData()){let I=Xh(n);ee(!e.queryToTagMap.has(I),"View does not exist, but we have a tag");let M=WB();e.queryToTagMap.set(I,M),e.tagToQueryMap.set(M,I)}let v=qh(e.pendingWriteTree_,i),b=OB(h,n,t,v,o,g);if(!m&&!c&&!r){let I=aD(h,n);b=b.concat(GB(e,n,I))}return b}function RC(e,n,t){let i=e.pendingWriteTree_,o=e.syncPointTree_.findOnPath(n,(c,h)=>{let g=Gn(c,n),m=Ao(h,g);if(m)return m});return JS(i,n,o,t,!0)}function jB(e,n){let t=n._path,r=null;e.syncPointTree_.foreachOnPath(t,(m,v)=>{let b=Gn(m,t);r=r||Ao(v,b)});let i=e.syncPointTree_.get(t);i?r=r||Ao(i,at()):(i=new Bh,e.syncPointTree_=e.syncPointTree_.set(t,i));let o=r!=null,c=o?new _i(r,!0,!1):null,h=qh(e.pendingWriteTree_,n._path),g=oD(i,n,h,o?c.getNode():Re.EMPTY_NODE,o);return EB(g)}function tl(e,n){return dD(n,e.syncPointTree_,null,qh(e.pendingWriteTree_,at()))}function dD(e,n,t,r){if(Ye(e.path))return fD(e,n,t,r);{let i=n.get(at());t==null&&i!=null&&(t=Ao(i,at()));let o=[],c=Ge(e.path),h=e.operationForChild(c),g=n.children.get(c);if(g&&h){let m=t?t.getImmediateChild(c):null,v=eD(r,c);o=o.concat(dD(h,g,m,v))}return i&&(o=o.concat(NC(i,e,r,t))),o}}function fD(e,n,t,r){let i=n.get(at());t==null&&i!=null&&(t=Ao(i,at()));let o=[];return n.children.inorderTraversal((c,h)=>{let g=t?t.getImmediateChild(c):null,m=eD(r,c),v=e.operationForChild(c);v&&(o=o.concat(fD(v,h,g,m)))}),i&&(o=o.concat(NC(i,e,r,t))),o}function hD(e,n){let t=n.query,r=eu(e,t);return{hashFn:()=>(xB(n)||Re.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?UB(e,t._path,r):BB(e,t._path);{let o=r5(i,t);return jh(e,t,null,o)}}}}function eu(e,n){let t=Xh(n);return e.queryToTagMap.get(t)}function Xh(e){return e._path.toString()+"$"+e._queryIdentifier}function PC(e,n){return e.tagToQueryMap.get(n)}function kC(e){let n=e.indexOf("$");return ee(n!==-1&&n<e.length-1,"Bad queryKey."),{queryId:e.substr(n+1),path:new pt(e.substr(0,n))}}function FC(e,n,t){let r=e.syncPointTree_.get(n);ee(r,"Missing sync point for query tag that we're tracking");let i=qh(e.pendingWriteTree_,n);return NC(r,t,i,null)}function HB(e){return e.fold((n,t,r)=>{if(t&&Oo(t))return[Yh(t)];{let i=[];return t&&(i=sD(t)),On(r,(o,c)=>{i=i.concat(c)}),i}})}function qc(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(PB())(e._repo,e._path):e}function zB(e,n){for(let t=0;t<n.length;++t){let r=n[t];if(!r._queryParams.loadsAllData()){let i=Xh(r),o=e.queryToTagMap.get(i);e.queryToTagMap.delete(i),e.tagToQueryMap.delete(o)}}}function WB(){return kB++}function GB(e,n,t){let r=n._path,i=eu(e,n),o=hD(e,t),c=e.listenProvider_.startListening(qc(n),i,o.hashFn,o.onComplete),h=e.syncPointTree_.subtree(r);if(i)ee(!Oo(h.value),"If we're adding a query, it shouldn't be shadowed");else{let g=h.fold((m,v,b)=>{if(!Ye(m)&&v&&Oo(v))return[Yh(v).query];{let I=[];return v&&(I=I.concat(sD(v).map(M=>M.query))),On(b,(M,R)=>{I=I.concat(R)}),I}});for(let m=0;m<g.length;++m){let v=g[m];e.listenProvider_.stopListening(qc(v),eu(e,v))}}return c}var cC=class e{constructor(n){this.node_=n}getImmediateChild(n){let t=this.node_.getImmediateChild(n);return new e(t)}node(){return this.node_}},uC=class e{constructor(n,t){this.syncTree_=n,this.path_=t}getImmediateChild(n){let t=zt(this.path_,n);return new e(this.syncTree_,t)}node(){return RC(this.syncTree_,this.path_)}},$B=function(e){return e=e||{},e.timestamp=e.timestamp||new Date().getTime(),e},yS=function(e,n,t){if(!e||typeof e!="object")return e;if(ee(".sv"in e,"Unexpected leaf node or priority contents"),typeof e[".sv"]=="string")return qB(e[".sv"],n,t);if(typeof e[".sv"]=="object")return YB(e[".sv"],n);ee(!1,"Unexpected server value: "+JSON.stringify(e,null,2))},qB=function(e,n,t){switch(e){case"timestamp":return t.timestamp;default:ee(!1,"Unexpected server value: "+e)}},YB=function(e,n,t){e.hasOwnProperty("increment")||ee(!1,"Unexpected server value: "+JSON.stringify(e,null,2));let r=e.increment;typeof r!="number"&&ee(!1,"Unexpected increment value: "+r);let i=n.node();if(ee(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;let c=i.getValue();return typeof c!="number"?r:c+r},pD=function(e,n,t,r){return LC(n,new uC(t,e),r)},gD=function(e,n,t){return LC(e,new cC(n),t)};function LC(e,n,t){let r=e.getPriority().val(),i=yS(r,n.getImmediateChild(".priority"),t),o;if(e.isLeafNode()){let c=e,h=yS(c.getValue(),n,t);return h!==c.getValue()||i!==c.getPriority().val()?new qa(h,un(i)):e}else{let c=e;return o=c,i!==c.getPriority().val()&&(o=o.updatePriority(new qa(i))),c.forEachChild(Wt,(h,g)=>{let m=LC(g,n.getImmediateChild(h),t);m!==g&&(o=o.updateImmediateChild(h,m))}),o}}var tu=class{constructor(n="",t=null,r={children:{},childCount:0}){this.name=n,this.parent=t,this.node=r}};function BC(e,n){let t=n instanceof pt?n:new pt(n),r=e,i=Ge(t);for(;i!==null;){let o=ws(r.node.children,i)||{children:{},childCount:0};r=new tu(i,r,o),t=At(t),i=Ge(t)}return r}function nl(e){return e.node.value}function mD(e,n){e.node.value=n,dC(e)}function yD(e){return e.node.childCount>0}function XB(e){return nl(e)===void 0&&!yD(e)}function Zh(e,n){On(e.node.children,(t,r)=>{n(new tu(t,e,r))})}function CD(e,n,t,r){t&&!r&&n(e),Zh(e,i=>{CD(i,n,!0,r)}),t&&r&&n(e)}function ZB(e,n,t){let r=t?e:e.parent;for(;r!==null;){if(n(r))return!0;r=r.parent}return!1}function au(e){return new pt(e.parent===null?e.name:au(e.parent)+"/"+e.name)}function dC(e){e.parent!==null&&QB(e.parent,e.name,e)}function QB(e,n,t){let r=XB(t),i=Kr(e.node.children,n);r&&i?(delete e.node.children[n],e.node.childCount--,dC(e)):!r&&!i&&(e.node.children[n]=t.node,e.node.childCount++,dC(e))}var KB=/[\[\].#$\/\u0000-\u001F\u007F]/,JB=/[\[\].#$\u0000-\u001F\u007F]/,by=10*1024*1024,UC=function(e){return typeof e=="string"&&e.length!==0&&!KB.test(e)},_D=function(e){return typeof e=="string"&&e.length!==0&&!JB.test(e)},e7=function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),_D(e)},t7=function(e){return e===null||typeof e=="string"||typeof e=="number"&&!wC(e)||e&&typeof e=="object"&&Kr(e,".sv")},wD=function(e,n,t,r){r&&n===void 0||Qh(Rc(e,"value"),n,t)},Qh=function(e,n,t){let r=t instanceof pt?new Fy(t,e):t;if(n===void 0)throw new Error(e+"contains undefined "+bs(r));if(typeof n=="function")throw new Error(e+"contains a function "+bs(r)+" with contents = "+n.toString());if(wC(n))throw new Error(e+"contains "+n.toString()+" "+bs(r));if(typeof n=="string"&&n.length>by/3&&Pc(n)>by)throw new Error(e+"contains a string greater than "+by+" utf8 bytes "+bs(r)+" ('"+n.substring(0,50)+"...')");if(n&&typeof n=="object"){let i=!1,o=!1;if(On(n,(c,h)=>{if(c===".value")i=!0;else if(c!==".priority"&&c!==".sv"&&(o=!0,!UC(c)))throw new Error(e+" contains an invalid key ("+c+") "+bs(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);R5(r,c),Qh(e,h,r),P5(r)}),i&&o)throw new Error(e+' contains ".value" child '+bs(r)+" in addition to actual children.")}},n7=function(e,n){let t,r;for(t=0;t<n.length;t++){r=n[t];let o=Yc(r);for(let c=0;c<o.length;c++)if(!(o[c]===".priority"&&c===o.length-1)){if(!UC(o[c]))throw new Error(e+"contains an invalid key ("+o[c]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}n.sort(N5);let i=null;for(t=0;t<n.length;t++){if(r=n[t],i!==null&&Dr(i,r))throw new Error(e+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}},r7=function(e,n,t,r){if(r&&n===void 0)return;let i=Rc(e,"values");if(!(n&&typeof n=="object")||Array.isArray(n))throw new Error(i+" must be an object containing the children to replace.");let o=[];On(n,(c,h)=>{let g=new pt(c);if(Qh(i,h,zt(t,g)),xC(g)===".priority"&&!t7(h))throw new Error(i+"contains an invalid value for '"+g.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(g)}),n7(i,o)};var vD=function(e,n,t,r){if(!(r&&t===void 0)&&!_D(t))throw new Error(Rc(e,n)+'was an invalid path = "'+t+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},i7=function(e,n,t,r){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),vD(e,n,t,r)},VC=function(e,n){if(Ge(n)===".info")throw new Error(e+" failed = Can't modify data under /.info/")},o7=function(e,n){let t=n.path.toString();if(typeof n.repoInfo.host!="string"||n.repoInfo.host.length===0||!UC(n.repoInfo.namespace)&&n.repoInfo.host.split(":")[0]!=="localhost"||t.length!==0&&!e7(t))throw new Error(Rc(e,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var fC=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function Kh(e,n){let t=null;for(let r=0;r<n.length;r++){let i=n[r],o=i.getPath();t!==null&&!EC(o,t.path)&&(e.eventLists_.push(t),t=null),t===null&&(t={events:[],path:o}),t.events.push(i)}t&&e.eventLists_.push(t)}function bD(e,n,t){Kh(e,t),xD(e,r=>EC(r,n))}function Ar(e,n,t){Kh(e,t),xD(e,r=>Dr(r,n)||Dr(n,r))}function xD(e,n){e.recursionDepth_++;let t=!0;for(let r=0;r<e.eventLists_.length;r++){let i=e.eventLists_[r];if(i){let o=i.path;n(o)?(s7(e.eventLists_[r]),e.eventLists_[r]=null):t=!1}}t&&(e.eventLists_=[]),e.recursionDepth_--}function s7(e){for(let n=0;n<e.events.length;n++){let t=e.events[n];if(t!==null){e.events[n]=null;let r=t.getEventRunner();Es&&Tn("event: "+t.toString()),el(r)}}}var a7="repo_interrupt",l7=25,hC=class{constructor(n,t,r,i){this.repoInfo_=n,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new fC,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Oh(),this.transactionQueueTree_=new tu,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function c7(e,n,t){if(e.stats_=bC(e.repoInfo_),e.forceRestClient_||a5())e.server_=new qy(e.repoInfo_,(r,i,o,c)=>{CS(e,r,i,o,c)},e.authTokenProvider_,e.appCheckProvider_),setTimeout(()=>_S(e,!0),0);else{if(typeof t<"u"&&t!==null){if(typeof t!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Jt(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}e.persistentConnection_=new IC(e.repoInfo_,n,(r,i,o,c)=>{CS(e,r,i,o,c)},r=>{_S(e,r)},r=>{u7(e,r)},e.authTokenProvider_,e.appCheckProvider_,t),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener(r=>{e.server_.refreshAuthToken(r)}),e.appCheckProvider_.addTokenChangeListener(r=>{e.server_.refreshAppCheckToken(r.token)}),e.statsReporter_=c5(e.repoInfo_,()=>new Qy(e.stats_,e.server_)),e.infoData_=new Yy,e.infoSyncTree_=new Vh({startListening:(r,i,o,c)=>{let h=[],g=e.infoData_.getNode(r._path);return g.isEmpty()||(h=su(e.infoSyncTree_,r._path,g),setTimeout(()=>{c("ok")},0)),h},stopListening:()=>{}}),jC(e,"connected",!1),e.serverSyncTree_=new Vh({startListening:(r,i,o,c)=>(e.server_.listen(r,o,i,(h,g)=>{let m=c(h,g);Ar(e.eventQueue_,r._path,m)}),[]),stopListening:(r,i)=>{e.server_.unlisten(r,i)}})}function ED(e){let t=e.infoData_.getNode(new pt(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function Jh(e){return $B({timestamp:ED(e)})}function CS(e,n,t,r,i){e.dataUpdateCount++;let o=new pt(n);t=e.interceptServerDataCallback_?e.interceptServerDataCallback_(n,t):t;let c=[];if(i)if(r){let g=Nc(t,m=>un(m));c=VB(e.serverSyncTree_,o,g,i)}else{let g=un(t);c=uD(e.serverSyncTree_,o,g,i)}else if(r){let g=Nc(t,m=>un(m));c=LB(e.serverSyncTree_,o,g)}else{let g=un(t);c=su(e.serverSyncTree_,o,g)}let h=o;c.length>0&&(h=Ka(e,o)),Ar(e.eventQueue_,h,c)}function _S(e,n){jC(e,"connected",n),n===!1&&p7(e)}function u7(e,n){On(n,(t,r)=>{jC(e,t,r)})}function jC(e,n,t){let r=new pt("/.info/"+n),i=un(t);e.infoData_.updateSnapshot(r,i);let o=su(e.infoSyncTree_,r,i);Ar(e.eventQueue_,r,o)}function HC(e){return e.nextWriteId_++}function d7(e,n,t){let r=jB(e.serverSyncTree_,n);return r!=null?Promise.resolve(r):e.server_.get(n).then(i=>{let o=un(i).withIndex(n._queryParams.getIndex());lC(e.serverSyncTree_,n,t,!0);let c;if(n._queryParams.loadsAllData())c=su(e.serverSyncTree_,n._path,o);else{let h=eu(e.serverSyncTree_,n);c=uD(e.serverSyncTree_,n._path,o,h)}return Ar(e.eventQueue_,n._path,c),jh(e.serverSyncTree_,n,t,null,!0),o},i=>(lu(e,"get for query "+Jt(n)+" failed: "+i),Promise.reject(new Error(i))))}function f7(e,n,t,r,i){lu(e,"set",{path:n.toString(),value:t,priority:r});let o=Jh(e),c=un(t,r),h=RC(e.serverSyncTree_,n),g=gD(c,h,o),m=HC(e),v=cD(e.serverSyncTree_,n,g,m,!0);Kh(e.eventQueue_,v),e.server_.put(n.toString(),c.val(!0),(I,M)=>{let R=I==="ok";R||$n("set at "+n+" failed: "+I);let H=Do(e.serverSyncTree_,m,!R);Ar(e.eventQueue_,n,H),pC(e,i,I,M)});let b=WC(e,n);Ka(e,b),Ar(e.eventQueue_,b,[])}function h7(e,n,t,r){lu(e,"update",{path:n.toString(),value:t});let i=!0,o=Jh(e),c={};if(On(t,(h,g)=>{i=!1,c[h]=pD(zt(n,h),un(g),e.serverSyncTree_,o)}),i)Tn("update() called with empty data.  Don't do anything."),pC(e,r,"ok",void 0);else{let h=HC(e),g=FB(e.serverSyncTree_,n,c,h);Kh(e.eventQueue_,g),e.server_.merge(n.toString(),t,(m,v)=>{let b=m==="ok";b||$n("update at "+n+" failed: "+m);let I=Do(e.serverSyncTree_,h,!b),M=I.length>0?Ka(e,n):n;Ar(e.eventQueue_,M,I),pC(e,r,m,v)}),On(t,m=>{let v=WC(e,zt(n,m));Ka(e,v)}),Ar(e.eventQueue_,n,[])}}function p7(e){lu(e,"onDisconnectEvents");let n=Jh(e),t=Oh();Xy(e.onDisconnect_,at(),(i,o)=>{let c=pD(i,o,e.serverSyncTree_,n);XS(t,i,c)});let r=[];Xy(t,at(),(i,o)=>{r=r.concat(su(e.serverSyncTree_,i,o));let c=WC(e,i);Ka(e,c)}),e.onDisconnect_=Oh(),Ar(e.eventQueue_,at(),r)}function g7(e,n,t){let r;Ge(n._path)===".info"?r=lC(e.infoSyncTree_,n,t):r=lC(e.serverSyncTree_,n,t),bD(e.eventQueue_,n._path,r)}function wS(e,n,t){let r;Ge(n._path)===".info"?r=jh(e.infoSyncTree_,n,t):r=jh(e.serverSyncTree_,n,t),bD(e.eventQueue_,n._path,r)}function m7(e){e.persistentConnection_&&e.persistentConnection_.interrupt(a7)}function lu(e,...n){let t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":"),Tn(t,...n)}function pC(e,n,t,r){n&&el(()=>{if(t==="ok")n(null);else{let i=(t||"error").toUpperCase(),o=i;r&&(o+=": "+r);let c=new Error(o);c.code=i,n(c)}})}function ID(e,n,t){return RC(e.serverSyncTree_,n,t)||Re.EMPTY_NODE}function zC(e,n=e.transactionQueueTree_){if(n||ep(e,n),nl(n)){let t=DD(e,n);ee(t.length>0,"Sending zero length transaction queue"),t.every(i=>i.status===0)&&y7(e,au(n),t)}else yD(n)&&Zh(n,t=>{zC(e,t)})}function y7(e,n,t){let r=t.map(m=>m.currentWriteId),i=ID(e,n,r),o=i,c=i.hash();for(let m=0;m<t.length;m++){let v=t[m];ee(v.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),v.status=1,v.retryCount++;let b=Gn(n,v.path);o=o.updateChild(b,v.currentOutputSnapshotRaw)}let h=o.val(!0),g=n;e.server_.put(g.toString(),h,m=>{lu(e,"transaction put response",{path:g.toString(),status:m});let v=[];if(m==="ok"){let b=[];for(let I=0;I<t.length;I++)t[I].status=2,v=v.concat(Do(e.serverSyncTree_,t[I].currentWriteId)),t[I].onComplete&&b.push(()=>t[I].onComplete(null,!0,t[I].currentOutputSnapshotResolved)),t[I].unwatcher();ep(e,BC(e.transactionQueueTree_,n)),zC(e,e.transactionQueueTree_),Ar(e.eventQueue_,n,v);for(let I=0;I<b.length;I++)el(b[I])}else{if(m==="datastale")for(let b=0;b<t.length;b++)t[b].status===3?t[b].status=4:t[b].status=0;else{$n("transaction at "+g.toString()+" failed: "+m);for(let b=0;b<t.length;b++)t[b].status=4,t[b].abortReason=m}Ka(e,n)}},c)}function Ka(e,n){let t=SD(e,n),r=au(t),i=DD(e,t);return C7(e,i,r),r}function C7(e,n,t){if(n.length===0)return;let r=[],i=[],c=n.filter(h=>h.status===0).map(h=>h.currentWriteId);for(let h=0;h<n.length;h++){let g=n[h],m=Gn(t,g.path),v=!1,b;if(ee(m!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),g.status===4)v=!0,b=g.abortReason,i=i.concat(Do(e.serverSyncTree_,g.currentWriteId,!0));else if(g.status===0)if(g.retryCount>=l7)v=!0,b="maxretry",i=i.concat(Do(e.serverSyncTree_,g.currentWriteId,!0));else{let I=ID(e,g.path,c);g.currentInputSnapshot=I;let M=n[h].update(I.val());if(M!==void 0){Qh("transaction failed: Data returned ",M,g.path);let R=un(M);typeof M=="object"&&M!=null&&Kr(M,".priority")||(R=R.updatePriority(I.getPriority()));let X=g.currentWriteId,$=Jh(e),ce=gD(R,I,$);g.currentOutputSnapshotRaw=R,g.currentOutputSnapshotResolved=ce,g.currentWriteId=HC(e),c.splice(c.indexOf(X),1),i=i.concat(cD(e.serverSyncTree_,g.path,ce,g.currentWriteId,g.applyLocally)),i=i.concat(Do(e.serverSyncTree_,X,!0))}else v=!0,b="nodata",i=i.concat(Do(e.serverSyncTree_,g.currentWriteId,!0))}Ar(e.eventQueue_,t,i),i=[],v&&(n[h].status=2,function(I){setTimeout(I,Math.floor(0))}(n[h].unwatcher),n[h].onComplete&&(b==="nodata"?r.push(()=>n[h].onComplete(null,!1,n[h].currentInputSnapshot)):r.push(()=>n[h].onComplete(new Error(b),!1,null))))}ep(e,e.transactionQueueTree_);for(let h=0;h<r.length;h++)el(r[h]);zC(e,e.transactionQueueTree_)}function SD(e,n){let t,r=e.transactionQueueTree_;for(t=Ge(n);t!==null&&nl(r)===void 0;)r=BC(r,t),n=At(n),t=Ge(n);return r}function DD(e,n){let t=[];return MD(e,n,t),t.sort((r,i)=>r.order-i.order),t}function MD(e,n,t){let r=nl(n);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);Zh(n,i=>{MD(e,i,t)})}function ep(e,n){let t=nl(n);if(t){let r=0;for(let i=0;i<t.length;i++)t[i].status!==2&&(t[r]=t[i],r++);t.length=r,mD(n,t.length>0?t:void 0)}Zh(n,r=>{ep(e,r)})}function WC(e,n){let t=au(SD(e,n)),r=BC(e.transactionQueueTree_,n);return ZB(r,i=>{xy(e,i)}),xy(e,r),CD(r,i=>{xy(e,i)}),t}function xy(e,n){let t=nl(n);if(t){let r=[],i=[],o=-1;for(let c=0;c<t.length;c++)t[c].status===3||(t[c].status===1?(ee(o===c-1,"All SENT items should be at beginning of queue."),o=c,t[c].status=3,t[c].abortReason="set"):(ee(t[c].status===0,"Unexpected transaction status in abort"),t[c].unwatcher(),i=i.concat(Do(e.serverSyncTree_,t[c].currentWriteId,!0)),t[c].onComplete&&r.push(t[c].onComplete.bind(null,new Error("set"),!1,null))));o===-1?mD(n,void 0):t.length=o+1,Ar(e.eventQueue_,au(n),i);for(let c=0;c<r.length;c++)el(r[c])}}function _7(e){let n="",t=e.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}n+="/"+i}return n}function w7(e){let n={};e.charAt(0)==="?"&&(e=e.substring(1));for(let t of e.split("&")){if(t.length===0)continue;let r=t.split("=");r.length===2?n[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):$n(`Invalid query segment '${t}' in query '${e}'`)}return n}var vS=function(e,n){let t=v7(e),r=t.namespace;t.domain==="firebase.com"&&Yi(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&t.domain!=="localhost"&&Yi("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||K6();let i=t.scheme==="ws"||t.scheme==="wss";return{repoInfo:new xh(t.host,t.secure,r,i,n,"",r!==t.subdomain),path:new pt(t.pathString)}},v7=function(e){let n="",t="",r="",i="",o="",c=!0,h="https",g=443;if(typeof e=="string"){let m=e.indexOf("//");m>=0&&(h=e.substring(0,m-1),e=e.substring(m+2));let v=e.indexOf("/");v===-1&&(v=e.length);let b=e.indexOf("?");b===-1&&(b=e.length),n=e.substring(0,Math.min(v,b)),v<b&&(i=_7(e.substring(v,b)));let I=w7(e.substring(Math.min(e.length,b)));m=n.indexOf(":"),m>=0?(c=h==="https"||h==="wss",g=parseInt(n.substring(m+1),10)):m=n.length;let M=n.slice(0,m);if(M.toLowerCase()==="localhost")t="localhost";else if(M.split(".").length<=2)t=M;else{let R=n.indexOf(".");r=n.substring(0,R).toLowerCase(),t=n.substring(R+1),o=r}"ns"in I&&(o=I.ns)}return{host:n,port:g,domain:t,subdomain:r,secure:c,scheme:h,pathString:i,namespace:o}};var bS="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",b7=function(){let e=0,n=[];return function(t){let r=t===e;e=t;let i,o=new Array(8);for(i=7;i>=0;i--)o[i]=bS.charAt(t%64),t=Math.floor(t/64);ee(t===0,"Cannot push at time == 0");let c=o.join("");if(r){for(i=11;i>=0&&n[i]===63;i--)n[i]=0;n[i]++}else for(i=0;i<12;i++)n[i]=Math.floor(Math.random()*64);for(i=0;i<12;i++)c+=bS.charAt(n[i]);return ee(c.length===20,"nextPushId: Length should be 20."),c}}();var Hh=class{constructor(n,t,r,i){this.eventType=n,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){let n=this.snapshot.ref;return this.eventType==="value"?n._path:n.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Jt(this.snapshot.exportVal())}},zh=class{constructor(n,t,r){this.eventRegistration=n,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}};var Wh=class{constructor(n,t){this.snapshotCallback=n,this.cancelCallback=t}onValue(n,t){this.snapshotCallback.call(null,n,t)}onCancel(n){return ee(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,n)}get hasCancelCallback(){return!!this.cancelCallback}matches(n){return this.snapshotCallback===n.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===n.snapshotCallback.userCallback&&this.snapshotCallback.context===n.snapshotCallback.context}};var gC=class e{constructor(n,t,r,i){this._repo=n,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return Ye(this._path)?null:xC(this._path)}get ref(){return new wi(this._repo,this._path)}get _queryIdentifier(){let n=aS(this._queryParams),t=vC(n);return t==="{}"?"default":t}get _queryObject(){return aS(this._queryParams)}isEqual(n){if(n=Eo(n),!(n instanceof e))return!1;let t=this._repo===n._repo,r=EC(this._path,n._path),i=this._queryIdentifier===n._queryIdentifier;return t&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+O5(this._path)}};var wi=class e extends gC{constructor(n,t){super(n,t,new $y,!1)}get parent(){let n=HS(this._path);return n===null?null:new e(this._repo,n)}get root(){let n=this;for(;n.parent!==null;)n=n.parent;return n}},nu=class e{constructor(n,t,r){this._node=n,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(n){let t=new pt(n),r=Ja(this.ref,n);return new e(this._node.getChild(t),r,Wt)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(n){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>n(new e(i,Ja(this.ref,r),Wt)))}hasChild(n){let t=new pt(n);return!this._node.getChild(t).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}};function Q(e,n){return e=Eo(e),e._checkNotDeleted("ref"),n!==void 0?Ja(e._root,n):e._root}function Ja(e,n){return e=Eo(e),Ge(e._path)===null?i7("child","path",n,!1):vD("child","path",n,!1),new wi(e._repo,zt(e._path,n))}function cu(e,n){e=Eo(e),VC("push",e._path),wD("push",n,e._path,!0);let t=ED(e._repo),r=b7(t),i=Ja(e,r),o=Ja(e,r),c;return n!=null?c=No(o,n).then(()=>o):c=Promise.resolve(o),i.then=c.then.bind(c),i.catch=c.then.bind(c,void 0),i}function nr(e){return VC("remove",e._path),No(e,null)}function No(e,n){e=Eo(e),VC("set",e._path),wD("set",n,e._path,!1);let t=new Gi;return f7(e._repo,e._path,n,null,t.wrapCallback(()=>{})),t.promise}function gt(e,n){r7("update",n,e._path,!1);let t=new Gi;return h7(e._repo,e._path,n,t.wrapCallback(()=>{})),t.promise}function he(e){e=Eo(e);let n=new Wh(()=>{}),t=new Gh(n);return d7(e._repo,e,t).then(r=>new nu(r,new wi(e._repo,e._path),e._queryParams.getIndex()))}var Gh=class e{constructor(n){this.callbackContext=n}respondsTo(n){return n==="value"}createEvent(n,t){let r=t._queryParams.getIndex();return new Hh("value",this,new nu(n.snapshotNode,new wi(t._repo,t._path),r))}getEventRunner(n){return n.getEventType()==="cancel"?()=>this.callbackContext.onCancel(n.error):()=>this.callbackContext.onValue(n.snapshot,null)}createCancelEvent(n,t){return this.callbackContext.hasCancelCallback?new zh(this,n,t):null}matches(n){return n instanceof e?!n.callbackContext||!this.callbackContext?!0:n.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}},mC=class e{constructor(n,t){this.eventType=n,this.callbackContext=t}respondsTo(n){let t=n==="children_added"?"child_added":n;return t=t==="children_removed"?"child_removed":t,this.eventType===t}createCancelEvent(n,t){return this.callbackContext.hasCancelCallback?new zh(this,n,t):null}createEvent(n,t){ee(n.childName!=null,"Child events should have a childName.");let r=Ja(new wi(t._repo,t._path),n.childName),i=t._queryParams.getIndex();return new Hh(n.type,this,new nu(n.snapshotNode,r,i),n.prevName)}getEventRunner(n){return n.getEventType()==="cancel"?()=>this.callbackContext.onCancel(n.error):()=>this.callbackContext.onValue(n.snapshot,n.prevName)}matches(n){return n instanceof e?this.eventType===n.eventType&&(!this.callbackContext||!n.callbackContext||this.callbackContext.matches(n.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}};function x7(e,n,t,r,i){let o;if(typeof r=="object"&&(o=void 0,i=r),typeof r=="function"&&(o=r),i&&i.onlyOnce){let g=t,m=(v,b)=>{wS(e._repo,e,h),g(v,b)};m.userCallback=t.userCallback,m.context=t.context,t=m}let c=new Wh(t,o||void 0),h=n==="value"?new Gh(c):new mC(n,c);return g7(e._repo,e,h),()=>wS(e._repo,e,h)}function AD(e,n,t,r){return x7(e,"value",n,t,r)}MB(wi);RB(wi);var E7="FIREBASE_DATABASE_EMULATOR_HOST",yC={},I7=!1;function S7(e,n,t,r){e.repoInfo_=new xh(`${n}:${t}`,!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0),r&&(e.authTokenProvider_=r)}function D7(e,n,t,r,i){let o=r||e.options.databaseURL;o===void 0&&(e.options.projectId||Yi("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Tn("Using default host for project ",e.options.projectId),o=`${e.options.projectId}-default-rtdb.firebaseio.com`);let c=vS(o,i),h=c.repoInfo,g,m;typeof process<"u"&&process.env&&(m=process.env[E7]),m?(g=!0,o=`http://${m}?ns=${h.namespace}`,c=vS(o,i),h=c.repoInfo):g=!c.repoInfo.secure;let v=i&&g?new Wc(Wc.OWNER):new Ay(e.name,e.options,n);o7("Invalid Firebase Database URL",c),Ye(c.path)||Yi("Database URL must point to the root of a Firebase Database (not including a child path).");let b=A7(h,e,v,new My(e.name,t));return new CC(b,e)}function M7(e,n){let t=yC[n];(!t||t[e.key]!==e)&&Yi(`Database ${n}(${e.repoInfo_}) has already been deleted.`),m7(e),delete t[e.key]}function A7(e,n,t,r){let i=yC[n.name];i||(i={},yC[n.name]=i);let o=i[e.toURLString()];return o&&Yi("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new hC(e,I7,t,r),i[e.toURLString()]=o,o}var CC=class{constructor(n,t){this._repoInternal=n,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(c7(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new wi(this._repo,at())),this._rootInternal}_delete(){return this._rootInternal!==null&&(M7(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(n){this._rootInternal===null&&Yi("Cannot call "+n+" on a deleted database.")}};function J(e=j2(),n){let t=U2(e,"database").getImmediate({identifier:n});if(!t._instanceStarted){let r=y2("database");r&&T7(t,...r)}return t}function T7(e,n,t,r={}){e=Eo(e),e._checkNotDeleted("useEmulator"),e._instanceStarted&&Yi("Cannot call useEmulator() after instance has already been initialized.");let i=e._repoInternal,o;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Yi('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new Wc(Wc.OWNER);else if(r.mockUserToken){let c=typeof r.mockUserToken=="string"?r.mockUserToken:C2(r.mockUserToken,e.app.options.projectId);o=new Wc(c)}S7(i,n,t,o)}function O7(e){X6(V2),Fc(new $i("database",(n,{instanceIdentifier:t})=>{let r=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),o=n.getProvider("app-check-internal");return D7(r,i,o,t)},"PUBLIC").setMultipleInstances(!0)),So(W2,G2,e),So(W2,G2,"esm2017")}IC.prototype.simpleListen=function(e,n){this.sendRequest("q",{p:e},n)};IC.prototype.echo=function(e,n){this.sendRequest("echo",{d:e},n)};O7();var Me={production:!0,firebaseConfig:{apiKey:"AIzaSyC2ak3O4qovvrDLGJ-L3a6E1uLASES2xuU",authDomain:"tablefi-31087.firebaseapp.com",databaseURL:"https://tablefi-31087-default-rtdb.europe-west1.firebasedatabase.app",projectId:"tablefi-31087",storageBucket:"tablefi-31087.appspot.com",messagingSenderId:"821585389969",appId:"1:821585389969:web:9383409a2e5fbf601b5230",measurementId:"G-QXT5KZEKGZ"}};var TD=(()=>{class e{db;constructor(){let t=we(Me.firebaseConfig);this.db=J(t)}login(t,r){return new Ue(i=>{let o=Q(this.db,"Owners");he(o).then(c=>{if(c.exists()){let h=c.val(),m=Object.values(h).find(v=>v.email===t);m?m.password===r?i.next(m):i.error("Invalid password"):i.error("No user found with this email")}else i.error("No owners found in the database")}).catch(c=>{console.error("Error fetching owners:",c),i.error("An error occurred while fetching owners")})}).pipe(wr(i=>(console.error("Error during login:",i),Et([null]))))}static \u0275fac=function(r){return new(r||e)};static \u0275prov=fe({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var xe=(()=>{class e{router;constructor(t){this.router=t}NavigateTo(t){this.router.navigate([t])}static \u0275fac=function(r){return new(r||e)(ze(gi))};static \u0275prov=fe({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var OD=(()=>{class e{loginService;navigationService;email="";password="";constructor(t,r){this.loginService=t,this.navigationService=r}onSubmit(t){t.preventDefault(),this.loginService.login(this.email,this.password).subscribe({next:r=>{r&&(sessionStorage.setItem("userId",r.id),sessionStorage.setItem("userEmail",r.email),sessionStorage.setItem("uniqueLinkToken",r.uniqueLinkToken),console.log("User logged in:",r),this.navigationService.NavigateTo("changerestaurant"))},error:r=>{alert(r),console.error("Login error:",r)}})}goToPage(t){this.navigationService.NavigateTo(t)}static \u0275fac=function(r){return new(r||e)(z(TD),z(xe))};static \u0275cmp=oe({type:e,selectors:[["app-login"]],standalone:!0,features:[se],decls:20,vars:2,consts:[[1,"layoutbox"],[1,"head"],[1,"logo"],["src","https://cdn1.mandarin.com.pl/eologo.png","alt","EasyOrder",1,"w-full"],[1,"backbtn",3,"click"],[1,"material-symbols-rounded"],[1,"loginform"],[3,"ngSubmit"],["type","email","id","email","name","email","required","",3,"ngModelChange","ngModel"],["type","password","id","password","name","password","required","",3,"ngModelChange","ngModel"],["type","submit",1,"login"],[1,"footstatic"]],template:function(r,i){r&1&&(A(0,"main")(1,"div",0)(2,"div",1)(3,"div",2),K(4,"img",3),T(),A(5,"div",4),j("click",function(){return i.goToPage("landingpage")}),A(6,"span",5),P(7," arrow_back "),T()()(),A(8,"div",6)(9,"form",7),j("ngSubmit",function(c){return i.onSubmit(c)}),A(10,"div"),P(11," Email "),A(12,"input",8),ot("ngModelChange",function(c){return st(i.email,c)||(i.email=c),c}),T()(),A(13,"div"),P(14," Has\u0142o "),A(15,"input",9),ot("ngModelChange",function(c){return st(i.password,c)||(i.password=c),c}),T()(),K(16,"div"),A(17,"button",10),P(18,"Zaloguj"),T()()(),K(19,"div",11),T()()),r&2&&(q(12),it("ngModel",i.email),q(3),it("ngModel",i.password))},dependencies:[Ht,tr,Kt,_n,er,An,cn,Wn],styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;justify-content:space-between;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{width:100%;height:64px;padding:0 32px;border-bottom:3px solid #000;display:flex;justify-content:space-between;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{margin:8px 0;height:48px}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .backbtn[_ngcontent-%COMP%]{height:48px;font-size:48px;font-weight:700;display:flex;justify-content:center;align-items:center;margin:8px 0}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .backbtn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{height:48px;font-size:48px;font-weight:700}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]{width:75%;display:flex;flex-direction:column;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:100%}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-weight:bolder;font-size:110%;margin-bottom:16px}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;background:#fff;padding:16px;font-size:110%;border-radius:16px;color:#000;font-weight:600;letter-spacing:2px;border:3px solid #000;transition:all .5s;margin-bottom:24px}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#333}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;background:#000;padding:16px;font-size:110%;color:#fff;font-weight:600;letter-spacing:2px;border:none;transition:all .5s;border-radius:16px;cursor:pointer}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#333}"]})}return e})();var ND=(()=>{class e{db;constructor(){let t=we(Me.firebaseConfig);this.db=J(t)}emailExists(t){let r=Q(this.db,"Owners");return Et(he(r)).pipe(Ve(i=>{if(i.exists()){let o=i.val();return Object.values(o).map(h=>h.email).includes(t)}return!1}),wr(i=>(console.error("Error checking email existence:",i),Et([!1]))))}register(t){let r=Q(this.db,"Owners"),i=cu(r);return new Ue(o=>{No(i,Be(re({},t),{id:i.key})).then(()=>{o.next(i),o.complete()}).catch(c=>{o.error(c)})})}static \u0275fac=function(r){return new(r||e)};static \u0275prov=fe({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var RD=(()=>{class e{registrationService;navigationService;email="";password="";confirmPassword="";constructor(t,r){this.registrationService=t,this.navigationService=r}onSubmit(t){if(t.preventDefault(),this.password!==this.confirmPassword){alert("Has\u0142a nie pasuj\u0105 do siebie!");return}this.registrationService.emailExists(this.email).subscribe(r=>{if(r){alert("Email jest ju\u017C zarejestrowany!");return}let i={name:this.email.split("@")[0],email:this.email,password:this.password,uniqueLinkToken:this.generateUniqueLinkToken(16)};this.registrationService.register(i).subscribe({next:o=>{let c=o.key;c?(sessionStorage.setItem("userId",c),sessionStorage.setItem("userEmail",i.email),sessionStorage.setItem("uniqueLinkToken",i.uniqueLinkToken),this.navigationService.NavigateTo("newrestaurant")):console.error("Nie uda\u0142o si\u0119 uzyska\u0107 ownerId z Firebase.")},error:o=>{console.error("Registration failed:",o)}})})}generateUniqueLinkToken(t=16){let r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i="";for(let o=0;o<t;o++)i+=r.charAt(Math.floor(Math.random()*r.length));return i}goToPage(t){this.navigationService.NavigateTo(t)}static \u0275fac=function(r){return new(r||e)(z(ND),z(xe))};static \u0275cmp=oe({type:e,selectors:[["app-register"]],standalone:!0,features:[se],decls:22,vars:3,consts:[[1,"layoutbox"],[1,"head"],[1,"logo"],["src","https://cdn1.mandarin.com.pl/eologo.png","alt","EasyOrder",1,"w-full"],[1,"backbtn",3,"click"],[1,"material-symbols-rounded"],[1,"loginform"],[3,"ngSubmit"],["type","email","id","email","name","email","required","",3,"ngModelChange","ngModel"],["type","password","id","password","name","password","required","",3,"ngModelChange","ngModel"],["type","password","id","confirmPassword","name","confirmPassword","required","",3,"ngModelChange","ngModel"],["type","submit",1,"register"]],template:function(r,i){r&1&&(A(0,"main")(1,"div",0)(2,"div",1)(3,"div",2),K(4,"img",3),T(),A(5,"div",4),j("click",function(){return i.goToPage("landingpage")}),A(6,"span",5),P(7," arrow_back "),T()()(),A(8,"div",6)(9,"form",7),j("ngSubmit",function(c){return i.onSubmit(c)}),A(10,"div"),P(11," E-mail "),A(12,"input",8),ot("ngModelChange",function(c){return st(i.email,c)||(i.email=c),c}),T()(),A(13,"div"),P(14," Has\u0142o "),A(15,"input",9),ot("ngModelChange",function(c){return st(i.password,c)||(i.password=c),c}),T()(),A(16,"div"),P(17," Powt\xF3rz has\u0142o "),A(18,"input",10),ot("ngModelChange",function(c){return st(i.confirmPassword,c)||(i.confirmPassword=c),c}),T()(),A(19,"button",11),P(20,"Zarejestruj"),T()()(),K(21,"div"),T()()),r&2&&(q(12),it("ngModel",i.email),q(3),it("ngModel",i.password),q(3),it("ngModel",i.confirmPassword))},dependencies:[Ht,tr,Kt,_n,er,An,cn,Wn],styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;justify-content:space-between;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{width:100%;height:64px;padding:0 32px;border-bottom:3px solid #000;display:flex;justify-content:space-between;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{margin:8px 0;height:48px}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .backbtn[_ngcontent-%COMP%]{height:48px;font-size:48px;font-weight:700;display:flex;justify-content:center;align-items:center;margin:8px 0}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .backbtn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{height:48px;font-size:48px;font-weight:700}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]{width:75%;display:flex;flex-direction:column;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:100%}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-weight:bolder;font-size:110%;margin-bottom:16px}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;background:#fff;padding:16px;font-size:110%;border-radius:16px;color:#000;font-weight:600;letter-spacing:2px;border:3px solid #000;transition:all .5s;margin-bottom:24px}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#333}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;background:#000;padding:16px;font-size:110%;color:#fff;font-weight:600;letter-spacing:2px;border:none;transition:all .5s;border-radius:16px;cursor:pointer}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#333}"]})}return e})();var GC=(()=>{class e{navigationService;constructor(t){this.navigationService=t}goToPage(t){this.navigationService.NavigateTo(t)}static \u0275fac=function(r){return new(r||e)(z(xe))};static \u0275cmp=oe({type:e,selectors:[["app-landing-page"]],standalone:!0,features:[se],decls:9,vars:0,consts:[[1,"w-full","h-full","m-0","p-8","flex","flex-row","flex-nowrap","justify-center","items-center"],[1,"w-3/5","h-full","flex","flex-col","flex-nowrap","justify-center","items-center","relative"],[1,"text-[110%]","w-full","flex","flex-col","flex-nowrap","justify-center","items-center","mb-12"],["src","https://cdn1.mandarin.com.pl/eologo.png","alt","EasyOrder",1,"w-full"],[1,"w-full","flex","flex-col","flex-nowrap","justify-center","items-center"],[1,"w-full","bg-black","p-4","text-[110%]","text-white","font-semibold","tracking-widest","border-none","rounded-lg","transition-all","duration-500","mb-4","hover:bg-[#292929]",3,"click"],[1,"w-full","bg-black","p-4","text-[110%]","text-white","font-semibold","tracking-widest","border-none","rounded-lg","transition-all","duration-500","hover:bg-[#292929]",3,"click"]],template:function(r,i){r&1&&(A(0,"main",0)(1,"div",1)(2,"div",2),K(3,"img",3),T(),A(4,"div",4)(5,"button",5),j("click",function(){return i.goToPage("register")}),P(6," Zarejestruj si\u0119 "),T(),A(7,"button",6),j("click",function(){return i.goToPage("login")}),P(8," Zaloguj si\u0119 "),T()()()())},encapsulation:2})}return e})();var PD=(()=>{class e{navigationService;name="";address="";constructor(t){this.navigationService=t;let r=we(Me.firebaseConfig)}onSubmit(t){t.preventDefault();let r=sessionStorage.getItem("uniqueLinkToken"),i=sessionStorage.getItem("userId");if(!i){alert("You must be logged in to create a restaurant.");return}let o={id:Date.now().toString(),name:this.name,address:this.address,uniqueLinkToken:r||"",settings:{table_change_allowed:!0,table_block_allowed:!0,order_number_typed_by_waiter_required:!0,waiter_access_pin:1234},TableGroups:[],Tables:[],Orders:[],Waiters:[{id:"0",name:"System",is_active:!0,is_default:!0}]};this.saveRestaurant(o,i)}saveRestaurant(t,r){let i=J(),o=t.id,c=Q(i,`Owners/${r}/Restaurants/${o}`);No(c,t).then(()=>{console.log("Restaurant added successfully:",t),this.navigationService.NavigateTo("changerestaurant"),this.resetForm()}).catch(h=>{console.error("Error adding restaurant:",h)})}resetForm(){this.name="",this.address=""}goToPage(t){this.navigationService.NavigateTo(t)}static \u0275fac=function(r){return new(r||e)(z(xe))};static \u0275cmp=oe({type:e,selectors:[["app-newrestaurant"]],standalone:!0,features:[se],decls:20,vars:2,consts:[[1,"layoutbox"],[1,"head"],[1,"logo"],["src","https://cdn1.mandarin.com.pl/eologo.png","alt","EasyOrder",1,"w-full"],[1,"backbtn",3,"click"],[1,"material-symbols-rounded"],[1,"form"],[3,"ngSubmit"],["type","text","id","name","name","name","required","",3,"ngModelChange","ngModel"],["type","text","id","adress","name","adress","required","",3,"ngModelChange","ngModel"],["type","submit",1,"addrestaurant"],[1,"footstatic"]],template:function(r,i){r&1&&(A(0,"main")(1,"div",0)(2,"div",1)(3,"div",2),K(4,"img",3),T(),A(5,"div",4),j("click",function(){return i.goToPage("landingpage")}),A(6,"span",5),P(7," arrow_back "),T()()(),A(8,"div",6)(9,"form",7),j("ngSubmit",function(c){return i.onSubmit(c)}),A(10,"div"),P(11," Nazwa restauracji "),A(12,"input",8),ot("ngModelChange",function(c){return st(i.name,c)||(i.name=c),c}),T()(),A(13,"div"),P(14," Adres "),A(15,"input",9),ot("ngModelChange",function(c){return st(i.address,c)||(i.address=c),c}),T()(),K(16,"div"),A(17,"button",10),P(18,"Dodaj"),T()()(),K(19,"div",11),T()()),r&2&&(q(12),it("ngModel",i.name),q(3),it("ngModel",i.address))},dependencies:[Ht,tr,Kt,_n,er,An,cn,Wn],styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;justify-content:space-between;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{width:100%;height:64px;padding:0 32px;border-bottom:3px solid #000;display:flex;justify-content:space-between;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{margin:8px 0;height:48px}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .backbtn[_ngcontent-%COMP%]{height:48px;font-size:48px;font-weight:700;display:flex;justify-content:center;align-items:center;margin:8px 0}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .backbtn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{height:48px;font-size:48px;font-weight:700}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]{width:75%;display:flex;flex-direction:column;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:100%}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-weight:bolder;font-size:110%;margin-bottom:16px}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;background:#fff;padding:16px;font-size:110%;border-radius:16px;color:#000;font-weight:600;letter-spacing:2px;border:3px solid #000;transition:all .5s;margin-bottom:24px}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#333}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;background:#000;padding:16px;font-size:110%;color:#fff;font-weight:600;letter-spacing:2px;border:none;transition:all .5s;border-radius:16px;cursor:pointer}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#333}"]})}return e})();var kD=(()=>{class e{navigationService;constructor(t){this.navigationService=t}goToPage(t){this.navigationService.NavigateTo(t)}static \u0275fac=function(r){return new(r||e)(z(xe))};static \u0275cmp=oe({type:e,selectors:[["app-restaurantmanage"]],standalone:!0,features:[se],decls:16,vars:0,consts:[[1,"layoutbox"],[1,"logo"],["src","https://cdn1.mandarin.com.pl/eologo.png","alt","EasyOrder"],[1,"buttons"],[1,"tablemanage",3,"click"],[1,"settings",3,"click"],[1,"revievs",3,"click"],[1,"stats",3,"click"],[1,"bilings",3,"click"],[1,"footstatic"]],template:function(r,i){r&1&&(A(0,"main")(1,"div",0)(2,"div",1),K(3,"img",2),T(),A(4,"div",3)(5,"button",4),j("click",function(){return i.goToPage("tablemanage")}),P(6,"Zarz\u0105dzanie stolikami"),T(),A(7,"button",5),j("click",function(){return i.goToPage("restaurantsettings")}),P(8,"Ustawienia"),T(),A(9,"button",6),j("click",function(){return i.goToPage("restaurantrevievs")}),P(10,"Opinie restauracji"),T(),A(11,"button",7),j("click",function(){return i.goToPage("restaurantstats")}),P(12,"Statystyki"),T(),A(13,"button",8),j("click",function(){return i.goToPage("restaurantbilings")}),P(14,"P\u0142atno\u015Bci"),T()(),K(15,"div",9),T()())},dependencies:[Ht],styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;padding:0;position:relative}.layoutbox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:space-evenly;align-items:center;align-content:center;position:relative}.logo[_ngcontent-%COMP%]{display:flex;font-size:45%;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center}.logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:80px}.buttons[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center}.buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;background:#fff;padding:24px;font-size:110%;color:#000;font-weight:600;letter-spacing:2px;border-bottom:3px solid #000000;transition:all .5s;margin-bottom:0;font-weight:700}.buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-child{border-top:#000000 solid 3px}"]})}return e})();var tp={production:!0,firebaseConfig:{apiKey:"AIzaSyC2ak3O4qovvrDLGJ-L3a6E1uLASES2xuU",authDomain:"tablefi-31087.firebaseapp.com",databaseURL:"https://tablefi-31087-default-rtdb.europe-west1.firebasedatabase.app",projectId:"tablefi-31087",storageBucket:"tablefi-31087.appspot.com",messagingSenderId:"821585389969",appId:"1:821585389969:web:9383409a2e5fbf601b5230",measurementId:"G-QXT5KZEKGZ"}};function P7(e,n){e&1&&(A(0,"p"),P(1,"Brak restauracji przypisanych do konta."),T())}function k7(e,n){if(e&1){let t=kt();A(0,"button",10),j("click",function(){let i=Ct(t).$implicit,o=Ne(2);return _t(o.setRestaurant(i.id))}),A(1,"p",11),P(2),T(),A(3,"p",12),P(4),T()()}if(e&2){let t=n.$implicit;q(2),jt(t.name),q(2),jt(t.address)}}function F7(e,n){if(e&1&&yn(0,k7,5,2,"button",9,mn),e&2){let t=Ne();Cn(t.restaurants)}}var FD=(()=>{class e{navigationService;restaurants=[];db;constructor(t){this.navigationService=t;let r=we(tp.firebaseConfig);this.db=J(r)}ngOnInit(){this.loadRestaurants()}loadRestaurants(){let t=sessionStorage.getItem("userId"),r=Q(this.db,`Owners/${t}/Restaurants`);he(r).then(i=>{if(i.exists()){let o=i.val();this.restaurants=Object.values(o),this.restaurants.length===1&&(localStorage.setItem("currentRestaurant",this.restaurants[0].id.toString()),console.log(this.restaurants[0].id.toString()),this.navigationService.NavigateTo("managerestaurant"))}else console.log("No restaurants found for this owner.")}).catch(i=>{console.error("Error loading restaurants:",i)})}setRestaurant(t){localStorage.setItem("currentRestaurant",t),this.navigationService.NavigateTo("managerestaurant")}goToPage(t){this.navigationService.NavigateTo(t)}static \u0275fac=function(r){return new(r||e)(z(xe))};static \u0275cmp=oe({type:e,selectors:[["app-changerestaurant"]],standalone:!0,features:[se],decls:14,vars:1,consts:[[1,"layoutbox"],[1,"head"],[1,"logo"],["src","https://cdn1.mandarin.com.pl/eologo.png","alt","EasyOrder",1,"w-full"],[1,"backbtn",3,"click"],[1,"material-symbols-rounded"],[1,"restaurants"],[1,"footstatic"],[3,"click"],[1,"restaurant"],[1,"restaurant",3,"click"],["id","datavalve"],["id","datavalve2"]],template:function(r,i){r&1&&(A(0,"main")(1,"div",0)(2,"div",1)(3,"div",2),K(4,"img",3),T(),A(5,"div",4),j("click",function(){return i.goToPage("managerestaurant")}),A(6,"span",5),P(7," arrow_back "),T()()(),A(8,"div",6),Vt(9,P7,2,0,"p")(10,F7,2,0),T(),A(11,"div",7)(12,"button",8),j("click",function(){return i.goToPage("newrestaurant")}),P(13," Dodaj "),T()()()()),r&2&&(q(9),gn(i.restaurants.length===0?9:10))},styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;justify-content:space-between;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{width:100%;height:64px;padding:0 32px;border-bottom:3px solid #000;display:flex;justify-content:space-between;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{margin:8px 0;height:48px}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .backbtn[_ngcontent-%COMP%]{height:48px;font-size:48px;font-weight:700;display:flex;justify-content:center;align-items:center;margin:8px 0}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .backbtn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{height:48px;font-size:48px;font-weight:700}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .restaurants[_ngcontent-%COMP%]{width:75%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .restaurants[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:flex-start;align-content:flex-start;border:3px black solid;border-radius:16px;padding:16px 16px 48px;margin-bottom:16px}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .restaurants[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   #datavalve[_ngcontent-%COMP%]{font-weight:700;font-size:200%}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .restaurants[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   #datavalve2[_ngcontent-%COMP%]{font-weight:700;font-size:110%}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .restaurants[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#dfdfdf}main[_ngcontent-%COMP%]   .footstatic[_ngcontent-%COMP%]{width:100%;padding:16px}main[_ngcontent-%COMP%]   .footstatic[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;background:#000;padding:16px;font-size:110%;color:#fff;font-weight:600;letter-spacing:2px;border:none;transition:all .5s;border-radius:16px;cursor:pointer}main[_ngcontent-%COMP%]   .footstatic[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#333}"]})}return e})();var LD=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275cmp=oe({type:e,selectors:[["app-restaurantbilings"]],standalone:!0,features:[se],decls:9,vars:0,consts:[[1,"displaybox"],[1,"logo"],[1,"buttons"],[1,"footstatic"]],template:function(r,i){r&1&&(A(0,"main")(1,"div",0)(2,"div",1)(3,"h1"),P(4,"EasyOrder"),T()(),A(5,"div",2)(6,"h1"),P(7,"Brak Projektu!"),T()(),K(8,"div",3),T()())},styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;padding:32px;position:relative;background:#000!important;color:#ffa700}.displaybox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center;position:relative}.logo[_ngcontent-%COMP%]{display:flex;font-size:45%;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center;margin-bottom:48px}body[_ngcontent-%COMP%]{background:#000!important;color:#ffa700}h1[_ngcontent-%COMP%]{font-size:200%}"]})}return e})();var BD=(()=>{class e{navigationService;constructor(t){this.navigationService=t,we(Me.firebaseConfig)}goToPage(t){this.navigationService.NavigateTo(t)}deleteaccount(){let t=J(),r=sessionStorage.getItem("userId"),i=Q(t,`Owners/${r}`);nr(i).then(()=>{console.log("owner deleted successfully"),this.navigationService.NavigateTo("landingpage")}).catch(o=>{console.error("Error deleting table:",o)})}static \u0275fac=function(r){return new(r||e)(z(xe))};static \u0275cmp=oe({type:e,selectors:[["app-restaurantsettings"]],standalone:!0,features:[se],decls:21,vars:0,consts:[[1,"displaybox"],[1,"logo"],[1,"buttons"],[1,"alltablesqrcodes",3,"click"],[1,"myrestaaurants",3,"click"],[1,"tablesettings",3,"click"],[1,"waitersoptions",3,"click"],[1,"deleteaccount",3,"click"],[1,"footstatic"]],template:function(r,i){r&1&&(A(0,"main")(1,"div",0)(2,"div",1)(3,"h1"),P(4,"EasyOrder"),T()(),A(5,"div",2)(6,"button",3),j("click",function(){return i.goToPage("alltablesqrcodes")}),P(7,"Pobierz kody QR Stolik\xF3w"),T(),A(8,"button",4),j("click",function(){return i.goToPage("cashpointqrcode")}),P(9,"Wygeneruj kod QR obok kasy"),T(),A(10,"button",5),j("click",function(){return i.goToPage("tablesettings")}),P(11,"Ustawienia Stolik\xF3w"),T(),A(12,"button",6),j("click",function(){return i.goToPage("waitersettings")}),P(13,"Opcje dotycz\u0105ce kelner\xF3w"),T(),A(14,"button",4),j("click",function(){return i.goToPage("changerestaurant")}),P(15,"Moje restauracje"),T(),A(16,"button",4),j("click",function(){return i.goToPage("newrestaurant")}),P(17,"Dodaj restauracje"),T(),A(18,"button",7),j("click",function(){return i.deleteaccount()}),P(19,"Usu\u0144 Konto"),T()(),K(20,"div",8),T()())},styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;padding:16px;position:relative}.displaybox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center;position:relative}.logo[_ngcontent-%COMP%]{display:flex;font-size:45%;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center;margin-bottom:48px}.buttons[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center}.buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;background:#fff;padding:24px;font-size:110%;color:#000;font-weight:600;letter-spacing:2px;border:1px solid #000000;transition:all .5s;margin-bottom:24px}"]})}return e})();var UD=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275cmp=oe({type:e,selectors:[["app-restaurantrevievs"]],standalone:!0,features:[se],decls:2,vars:0,template:function(r,i){r&1&&(A(0,"p"),P(1,"restaurantrevievs works!"),T())}})}return e})();var VD=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275cmp=oe({type:e,selectors:[["app-restaurantstats"]],standalone:!0,features:[se],decls:2,vars:0,template:function(r,i){r&1&&(A(0,"p"),P(1,"restaurantstats works!"),T())}})}return e})();var L7=(e,n,t)=>({"background-color":e,color:n,border:t});function B7(e,n){e&1&&(A(0,"p"),P(1,"Brak stolik\xF3w przypisanych do restauracji."),T())}function U7(e,n){if(e&1){let t=kt();A(0,"button",13),j("click",function(){let i=Ct(t).$implicit,o=Ne(2);return _t(o.setTable(i.id))}),P(1),T()}if(e&2){let t=n.$implicit,r=Ne(2);rt("ngStyle",wa(2,L7,t.group_id&&r.tableGroups[t.group_id]?r.tableGroups[t.group_id]:"white",t.group_id&&r.tableGroups[t.group_id]?r.getTextColor(r.tableGroups[t.group_id]):"black",t.group_id&&r.tableGroups[t.group_id]==="#ffffff"||!r.tableGroups[t.group_id]?"2px solid black":"none")),q(),Qt(" ",t.name," ")}}function V7(e,n){if(e&1&&yn(0,U7,2,6,"button",12,mn),e&2){let t=Ne();Cn(t.tables)}}var jD=(()=>{class e{navigationService;tables=[];tableGroups={};isMenuOpen=!1;toggleMenu(){this.isMenuOpen=!this.isMenuOpen}constructor(t){this.navigationService=t;let r=we(Me.firebaseConfig)}ngOnInit(){this.loadTables()}loadTables(){let t=J(),r=localStorage.getItem("currentRestaurant"),i=sessionStorage.getItem("userId");if(!r){console.error("No current restaurant found in local storage");return}let o=Q(t,`Owners/${i}/Restaurants/${r}/Tables`);he(o).then(c=>{if(c.exists()){let h=c.val();this.tables=Object.values(h),this.loadTableGroups()}else console.log("No tables found")}).catch(c=>{console.error("Error loading tables:",c)})}loadTableGroups(){let t=J(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant");if(!r||!i){console.error("Missing owner or restaurant ID");return}let o=Q(t,`Owners/${r}/Restaurants/${i}/TableGroups`);he(o).then(c=>{if(c.exists()){let h=c.val();for(let g in h)this.tableGroups[g]=h[g].color}}).catch(c=>{console.error("Error loading table groups:",c)})}getTextColor(t){let r=t.replace("#",""),i=parseInt(r.substring(0,2),16),o=parseInt(r.substring(2,4),16),c=parseInt(r.substring(4,6),16);return(i*299+o*587+c*114)/1e3>125?"black":"white"}setTable(t){localStorage.setItem("currentTable",t),this.goToPage("tableedit")}goToPage(t){this.navigationService.NavigateTo(t)}static \u0275fac=function(r){return new(r||e)(z(xe))};static \u0275cmp=oe({type:e,selectors:[["app-tablemanage"]],standalone:!0,features:[se],decls:32,vars:6,consts:[[1,"sidebar"],[1,"overlay"],[3,"click"],[1,"active",3,"click"],[1,"layoutbox"],[1,"head"],[1,"logo"],["src","https://cdn1.mandarin.com.pl/eologo.png","alt","EasyOrder",1,"w-full"],[1,"backbtn",3,"click"],[1,"material-symbols-rounded"],[1,"buttons"],[1,"footstatic"],[1,"table-button",3,"ngStyle"],[1,"table-button",3,"click","ngStyle"]],template:function(r,i){r&1&&(A(0,"main")(1,"div",0)(2,"div",1)(3,"ul")(4,"li")(5,"span",2),j("click",function(){return i.toggleMenu()}),P(6,"X"),T()(),A(7,"li",3),j("click",function(){return i.goToPage("tablemanage")}),P(8,"Zarz\u0105dzanie stolikami"),T(),A(9,"li",2),j("click",function(){return i.goToPage("restaurantrevievs")}),P(10,"Opinie"),T(),A(11,"li",2),j("click",function(){return i.goToPage("restaurantbilings")}),P(12,"P\u0142atno\u015Bci"),T(),A(13,"li",2),j("click",function(){return i.goToPage("restaurantsettings")}),P(14,"Ustawienia"),T(),A(15,"li",2),j("click",function(){return i.goToPage("managerestaurant")}),P(16,"Powr\xF3t"),T()()()(),A(17,"div",4)(18,"div",5)(19,"div",6),K(20,"img",7),T(),A(21,"div",8),j("click",function(){return i.toggleMenu()}),A(22,"span",9),P(23,"menu"),T()()(),A(24,"div",10),Vt(25,B7,2,0,"p")(26,V7,2,0),T(),A(27,"div",11)(28,"button",2),j("click",function(){return i.goToPage("tablecreate")}),P(29,"Dodaj stolik"),T(),A(30,"button",2),j("click",function(){return i.goToPage("tablegroupmanage")}),P(31,"Edytuj grupy"),T()()()()),r&2&&(q(),hr("active",i.isMenuOpen),q(),hr("active",i.isMenuOpen),q(23),gn(i.tables.length===0?25:-1),q(),gn(i.tables.length>0?26:-1))},dependencies:[zn,xa],styles:['@font-face{font-family:Varela Round;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/varelaround/v20/w8gdH283Tvk__Lua32TysjIfpcuPP9g.woff2) format("woff2");unicode-range:U+0307-0308,U+0590-05FF,U+200C-2010,U+20AA,U+25CC,U+FB1D-FB4F}@font-face{font-family:Varela Round;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/varelaround/v20/w8gdH283Tvk__Lua32TysjIfqMuPP9g.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Varela Round;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/varelaround/v20/w8gdH283Tvk__Lua32TysjIfqcuPP9g.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Varela Round;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/varelaround/v20/w8gdH283Tvk__Lua32TysjIfp8uP.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;justify-content:space-between;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{width:100%;height:64px;padding:0 32px;border-bottom:3px solid #000;display:flex;justify-content:space-between;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{margin:8px 0;height:48px}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%;z-index:99999}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .backbtn[_ngcontent-%COMP%]{height:48px;font-size:48px;font-weight:700;display:flex;justify-content:center;align-items:center;margin:8px 0}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .backbtn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{height:48px;font-size:48px;font-weight:700}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{width:100%;height:100%;overflow-y:auto;overflow-x:hidden;display:flex;flex-direction:row;flex-wrap:wrap;justify-content:flex-start;align-items:flex-start;align-content:flex-start}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:114px;height:114px;border-radius:16px;margin:8px;font-size:200%;font-weight:bolder}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .footstatic[_ngcontent-%COMP%]{width:100%;border-top:black 3px solid;padding:8px;display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .footstatic[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:calc(50% - 8px);border:2px solid black;border-radius:16px;color:#000;background:#fff;padding:16px;font-size:110%;font-weight:bolder}.sidebar[_ngcontent-%COMP%]{position:fixed;top:0;right:-100%;width:100%;height:100%;background-color:#00000040;box-shadow:-2px 0 5px #00000080;-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px);transition:right .3s ease;z-index:999}.sidebar.active[_ngcontent-%COMP%]{right:0}.sidebar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin-top:0;list-style:none;padding:0}.sidebar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{border-bottom:3px solid black;padding:16px;font-weight:700;margin:0}.sidebar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:first-child{text-align:right;padding-top:0;padding-bottom:0;padding-right:32px;height:64px;display:flex;flex-direction:row;flex-wrap:wrap;justify-content:flex-end;align-items:center;align-content:center}.sidebar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:first-child   span[_ngcontent-%COMP%]{height:48px;width:48px;font-size:32px;font-weight:700;font-family:Varela Round,sans-serif}.sidebar[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]{background:#000;color:#fff}.overlay[_ngcontent-%COMP%]{position:fixed;top:0;right:-250px;width:250px;height:100%;background-color:#fff;box-shadow:-2px 0 5px #00000080;transition:right .3s ease}.overlay.active[_ngcontent-%COMP%]{right:0}']})}return e})();function j7(e,n){if(e&1&&(A(0,"option",15),P(1),T()),e&2){let t=Ne().$implicit;rt("value",t.id),q(),jt(t.name)}}function H7(e,n){if(e&1&&Vt(0,j7,2,2,"option",15),e&2){let t=n.$implicit,r=Ne();gn(t.id!=r.table.group_id?0:-1)}}var HD=(()=>{class e{navigationService;messagesokService;name="";description="";table={id:"",name:"",group_id:"",description:"",is_blocked:!1};tableGroups=[];restaurantId="";constructor(t,r){this.navigationService=t,this.messagesokService=r,we(Me.firebaseConfig)}ngOnInit(){this.loadTableGroups()}loadTableGroups(){let t=sessionStorage.getItem("userId"),r=localStorage.getItem("currentRestaurant");if(!t||!r){console.error("Missing owner or restaurant ID");return}let i=J(),o=Q(i,`Owners/${t}/Restaurants/${r}/TableGroups`);he(o).then(c=>{c.exists()?this.tableGroups=Object.values(c.val()):console.log("No table groups found")}).catch(c=>{console.error("Error loading table groups:",c)})}goToPage(t){this.navigationService.NavigateTo(t)}onSubmit(t){t.preventDefault();let r=Date.now().toString(),i=localStorage.getItem("currentRestaurant");if(!i){alert("Nie wybrano restauracji.");return}let o={id:r,group_id:this.table.group_id,name:this.name,is_blocked:!1,description:this.description?this.description:""};this.saveTable(o,i)}saveTable(t,r){let i=J(),o=Q(i,`Owners/${sessionStorage.getItem("userId")}/Restaurants/${r}/Tables`);gt(o,{[t.id]:t}).then(()=>{this.messagesokService.askUser("Stolik zosta\u0142 dodany",()=>{this.navigationService.NavigateTo("tablemanage")}),this.resetForm()}).catch(c=>{console.error("B\u0142\u0105d podczas dodawania stolika:",c)})}resetForm(){this.name="",this.description="",this.table.group_id=""}static \u0275fac=function(r){return new(r||e)(z(xe),z(xo))};static \u0275cmp=oe({type:e,selectors:[["app-tablecreate"]],standalone:!0,features:[se],decls:27,vars:3,consts:[[1,"layoutbox"],[1,"head"],[1,"logo"],["src","https://cdn1.mandarin.com.pl/eologo.png","alt","EasyOrder"],[1,"backbtn",3,"click"],[1,"material-symbols-rounded"],[1,"buttons"],[3,"ngSubmit"],[1,"box"],["type","text","id","name","name","name","required","",3,"ngModelChange","ngModel"],["id","group","name","groupId",3,"ngModelChange","ngModel"],["selected","",3,"value"],["type","text","id","description","name","description",1,"description",3,"ngModelChange","ngModel"],["type","submit",1,"addtable"],[1,"footstatic"],[3,"value"]],template:function(r,i){r&1&&(A(0,"main")(1,"div",0)(2,"div",1)(3,"div",2),K(4,"img",3),T(),A(5,"div",4),j("click",function(){return i.goToPage("tablemanage")}),A(6,"span",5),P(7," arrow_back "),T()()(),A(8,"div",6)(9,"form",7),j("ngSubmit",function(c){return i.onSubmit(c)}),A(10,"div",8)(11,"div"),P(12," Nazwa stolika "),A(13,"input",9),ot("ngModelChange",function(c){return st(i.name,c)||(i.name=c),c}),T()(),A(14,"div"),P(15," Grupa "),A(16,"select",10),ot("ngModelChange",function(c){return st(i.table.group_id,c)||(i.table.group_id=c),c}),A(17,"option",11),P(18,"Wybierz Grup\u0119"),T(),yn(19,H7,1,1,null,null,mn),T()(),A(21,"div"),P(22," Opis Stolika "),A(23,"input",12),ot("ngModelChange",function(c){return st(i.description,c)||(i.description=c),c}),T()()(),A(24,"button",13),P(25,"Dodaj stolik"),T()()(),K(26,"div",14),T()()),r&2&&(q(13),it("ngModel",i.name),q(3),it("ngModel",i.table.group_id),q(3),Cn(i.tableGroups),q(4),it("ngModel",i.description))},dependencies:[Ht,tr,hh,ph,Kt,Ba,_n,er,An,cn,Wn],styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;justify-content:space-between;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{width:100%;height:64px;padding:0 32px;border-bottom:3px solid #000;display:flex;justify-content:space-between;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{margin:8px 0;height:48px}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .backbtn[_ngcontent-%COMP%]{height:48px;width:48px;font-size:48px;font-weight:700;display:flex;justify-content:center;align-items:center;margin:8px 0}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .backbtn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{height:48px;font-size:48px;font-weight:700}.buttons[_ngcontent-%COMP%]{width:calc(100% - 48px)}.buttons[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]{width:100%;border:3px solid #000000;border-radius:16px;display:flex;padding:24px;flex-direction:column;flex-wrap:nowrap;justify-content:flex-start;align-items:center;align-content:center}.buttons[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-weight:bolder}.buttons[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;background:#fff;padding:8px;font-size:110%;border-radius:16px;color:#000;font-weight:600;letter-spacing:2px;border:3px solid #000;transition:all .5s;margin-bottom:24px}.buttons[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#333}.buttons[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center}div[_ngcontent-%COMP%]{width:100%}div[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;background:#fff;padding:8px;font-size:110%;border-radius:16px;color:#000;font-weight:600;letter-spacing:2px;border:3px solid #000;transition:all .5s;margin-bottom:24px}.addtable[_ngcontent-%COMP%]{margin-top:24px;width:100%;background:#000;padding:16px;font-size:110%;color:#fff;font-weight:600;letter-spacing:2px;border:none;transition:all .5s;border-radius:16px;cursor:pointer}.addtable[_ngcontent-%COMP%]:hover{background:#333}.description[_ngcontent-%COMP%]{height:100px}"]})}return e})();var z7=(e,n,t)=>({"background-color":e,color:n,border:t}),zD=(()=>{class e{navigationService;messagesService;tableId=null;table=null;tableGroupName=null;groupColor=null;tableBlockAllowed=!0;restaurantId="";tables=[];tableGroups={};isMenuOpen=!1;constructor(t,r){this.navigationService=t,this.messagesService=r,we(Me.firebaseConfig)}ngOnInit(){this.loadTable(),this.loadSettings()}getTextColor(t){let r=t.replace("#",""),i=parseInt(r.substring(0,2),16),o=parseInt(r.substring(2,4),16),c=parseInt(r.substring(4,6),16);return(i*299+o*587+c*114)/1e3>125?"black":"white"}loadTableGroups(){let t=J(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant");if(!r||!i){console.error("Missing owner or restaurant ID");return}let o=Q(t,`Owners/${r}/Restaurants/${i}/TableGroups`);he(o).then(c=>{if(c.exists()){let h=c.val();for(let g in h)this.tableGroups[g]=h[g].color}}).catch(c=>{console.error("Error loading table groups:",c)})}loadSettings(){let t=sessionStorage.getItem("userId");if(this.restaurantId=localStorage.getItem("currentRestaurant")??"",!t||!this.restaurantId){console.error("Missing owner or restaurant ID");return}let r=J(),i=Q(r,`Owners/${t}/Restaurants/${this.restaurantId}/settings`);he(i).then(o=>{if(o.exists()){let c=o.val();this.tableBlockAllowed=c.table_block_allowed}else console.log("No settings found for this restaurant")}).catch(o=>{console.error("Error loading settings:",o)})}goToPage(t){this.navigationService.NavigateTo(t)}deleteTable(){this.messagesService.askUser("Czy napewno usun\u0105\u0107 stolik?",()=>{this.deleteTable2()},()=>{console.log("Deletion canceled")})}deleteTable2(){let t=J(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant");if(!this.tableId||!r||!i){console.error("Missing table, owner, or restaurant ID");return}let o=Q(t,`Owners/${r}/Restaurants/${i}/Tables/${this.tableId}`);nr(o).then(()=>{console.log("Table deleted successfully"),this.navigationService.NavigateTo("tablemanage")}).catch(c=>{console.error("Error deleting table:",c)})}blockTable(){let t=J(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant");if(!this.tableId||!r||!i){console.error("Missing table, owner, or restaurant ID");return}let o=Q(t,`Owners/${r}/Restaurants/${i}/Tables/${this.tableId}`);gt(o,{is_blocked:!0}).then(()=>{console.log("Table blocked successfully"),location.reload()}).catch(c=>{console.error("Error blocking table:",c)})}unlockTable(){let t=J(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant");if(!this.tableId||!r||!i){console.error("Missing table, owner, or restaurant ID");return}let o=Q(t,`Owners/${r}/Restaurants/${i}/Tables/${this.tableId}`);gt(o,{is_blocked:!1}).then(()=>{console.log("Table unlocked successfully"),location.reload()}).catch(c=>{console.error("Error blocking table:",c)})}saveTable(){}showQRCode(){this.navigationService.NavigateTo("showtableqr")}loadTable(){if(this.tableId=localStorage.getItem("currentTable"),!this.tableId){console.error("No current table found in local storage");return}let t=J(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant"),o=Q(t,`Owners/${r}/Restaurants/${i}/Tables/${this.tableId}`);he(o).then(c=>{c.exists()?(this.table=c.val(),this.loadTableGroup()):console.log("No table found")}).catch(c=>{console.error("Error loading table:",c)})}loadTableGroup(){let t=J(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant");if(!this.table?.group_id||this.table.group_id==="0g"){this.tableGroupName="Stoliki bez grupy",this.groupColor="#000000";return}let o=Q(t,`Owners/${r}/Restaurants/${i}/TableGroups/${this.table.group_id}`);he(o).then(c=>{if(c.exists()){let h=c.val();this.tableGroupName=h.name,this.groupColor=h.color}else console.log("No group found for this table")}).catch(c=>{console.error("Error loading group:",c)})}static \u0275fac=function(r){return new(r||e)(z(xe),z(bo))};static \u0275cmp=oe({type:e,selectors:[["app-tableedit"]],standalone:!0,features:[se],decls:27,vars:8,consts:[[1,"layoutbox"],[1,"head"],[1,"logo"],["src","https://cdn1.mandarin.com.pl/eologo.png","alt","EasyOrder"],[1,"backbtn",3,"click"],[1,"material-symbols-rounded"],[1,"flexcontainer"],[1,"buttons"],[1,"colorbar",3,"ngStyle"],[1,"titles"],["name","description","id","description"],[1,"actionbtns"],[1,"arow"],[3,"click"],[1,"footstatic"]],template:function(r,i){r&1&&(A(0,"main")(1,"div",0)(2,"div",1)(3,"div",2),K(4,"img",3),T(),A(5,"div",4),j("click",function(){return i.goToPage("tablemanage")}),A(6,"span",5),P(7," arrow_back "),T()()(),A(8,"div",6)(9,"div",7)(10,"div",8)(11,"div",9)(12,"h1"),P(13),T(),A(14,"h3"),P(15),T()(),A(16,"h3",10),P(17),T()(),A(18,"div",11)(19,"div",12)(20,"button",13),j("click",function(){return i.deleteTable()}),P(21,"Usu\u0144 stolik"),T(),A(22,"button",13),j("click",function(){return i.goToPage("tableeedit")}),P(23,"Edytuj stolik"),T(),A(24,"button",13),j("click",function(){return i.showQRCode()}),P(25,"poka\u017C kod qr"),T()()()()(),K(26,"div",14),T()()),r&2&&(q(10),rt("ngStyle",wa(4,z7,i.groupColor?i.groupColor:"white",i.groupColor?i.getTextColor(i.groupColor):"black",i.groupColor==="#ffffff"||!i.groupColor?"2px solid black":"none")),q(3),Qt("Stolik ",i.table==null?null:i.table.name,""),q(2),Qt("Grupa: ",i.tableGroupName,""),q(2),jt(i.table==null?null:i.table.description))},dependencies:[zn,xa],styles:[".layoutbox[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;min-height:100vh}.flexcontainer[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding:20px}.buttons[_ngcontent-%COMP%]{width:100%;max-width:400px;text-align:center}.head[_ngcontent-%COMP%]{width:100%;height:64px;padding:0 32px;border-bottom:3px solid #000;display:flex;justify-content:space-between;align-items:center;position:relative}.head[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{margin:8px 0;height:48px}.head[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%}.head[_ngcontent-%COMP%]   .backbtn[_ngcontent-%COMP%]{height:48px;width:48px;font-size:48px;font-weight:700;display:flex;justify-content:center;align-items:center;margin:8px 0}.head[_ngcontent-%COMP%]   .backbtn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{height:48px;font-size:48px;font-weight:700}.colorbar[_ngcontent-%COMP%]{height:200px;width:100%;border-radius:20px;margin-bottom:20px;color:#fff;font-weight:700;padding:16px;font-size:110%}h1[_ngcontent-%COMP%]{font-size:200%}.titles[_ngcontent-%COMP%]{margin-bottom:32px}.actionbtns[_ngcontent-%COMP%]   .arow[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;margin:10px 0;font-weight:700}.actionbtns[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;font-weight:700;background-color:#fff;border:3px solid black;border-radius:30px;padding:10px;margin:5px;text-align:left;font-size:16px;cursor:pointer;transition:background-color .3s ease,color .3s ease}.actionbtns[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#000;color:#fff}.footstatic[_ngcontent-%COMP%]{height:50px}@media only screen and (max-width: 600px){.buttons[_ngcontent-%COMP%]{max-width:100%;padding:0 20px}.head[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .head[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:20px}.actionbtns[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:14px}}"]})}return e})();var WD=(()=>{class e{route;router;tableId=null;uniqueLinkToken=null;ownerId=null;restaurantid=null;constructor(t,r){this.route=t,this.router=r,we(Me.firebaseConfig)}ngOnInit(){this.route.queryParams.subscribe(t=>{this.tableId=t.t||null,this.uniqueLinkToken=t.u||null,this.ownerId=t.o||null,this.restaurantid=t.r||null})}setTable(t){let r=localStorage.getItem("currentRestaurant"),i=J();if(!this.ownerId||!this.restaurantid||!this.tableId||!this.uniqueLinkToken){console.error("Missing required data");return}let o=Q(i,`Owners/${this.ownerId}/Restaurants/${r}/settings`);he(o).then(c=>{c.exists()?c.val().order_number_typed_by_waiter_required?this.verifyOrderNumber(t):this.saveTableAssignment(t):console.error("Settings not found")}).catch(c=>{console.error("Error loading settings:",c)})}verifyOrderNumber(t){let r=J(),i=Q(r,`Owners/${this.ownerId}/Restaurants/${this.restaurantid}/Orders`);he(i).then(o=>{if(o.exists()){let c=o.val();Object.values(c).some(g=>g.name===t)?this.saveTableAssignment(t):console.error("Order not found")}else console.log("No orders found")}).catch(o=>{console.error("Error checking order number:",o)})}saveTableAssignment(t){localStorage.setItem("customercurrentTable",this.tableId),localStorage.setItem("uniqueLinkToken",this.uniqueLinkToken),localStorage.setItem("orderNumber",t),localStorage.setItem("restaurantid",this.restaurantid),localStorage.setItem("ownerid",this.ownerId),this.router.navigate(["/tableordered"])}static \u0275fac=function(r){return new(r||e)(z(pi),z(gi))};static \u0275cmp=oe({type:e,selectors:[["app-settable"]],standalone:!0,features:[se],decls:14,vars:0,consts:[["orderNumberInput",""],[1,"layoutbox"],[1,"head"],[1,"logo"],["src","https://cdn1.mandarin.com.pl/eologo.png","alt","EasyOrder"],[1,"backbtn"],[1,"loginform"],["type","text"],[3,"click"],[1,"footstatic"]],template:function(r,i){if(r&1){let o=kt();A(0,"main")(1,"div",1)(2,"div",2)(3,"div",3),K(4,"img",4),T(),K(5,"div",5),T(),A(6,"div",6)(7,"label"),P(8,"Wprowad\u017A numer zam\xF3wienia"),T(),K(9,"input",7,0),A(11,"button",8),j("click",function(){Ct(o);let h=_a(10);return _t(i.setTable(h.value))}),P(12,"Przypisz stolik"),T()(),K(13,"div",9),T()()}},styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;justify-content:space-between;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{width:100%;height:64px;padding:0 32px;border-bottom:3px solid #000;display:flex;justify-content:space-between;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{margin:8px 0;height:48px}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .backbtn[_ngcontent-%COMP%]{height:48px;font-size:48px;font-weight:700;display:flex;justify-content:center;align-items:center;margin:8px 0}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .backbtn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{height:48px;font-size:48px;font-weight:700}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]{width:75%;display:flex;flex-direction:column;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:bolder;font-size:200%;margin-bottom:24px}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;background:#fff;padding:16px;font-size:110%;border-radius:16px;color:#000;font-weight:600;letter-spacing:2px;border:3px solid #000;transition:all .5s;margin-bottom:24px}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#333}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;background:#000;padding:16px;font-size:110%;color:#fff;font-weight:600;letter-spacing:2px;border:none;transition:all .5s;border-radius:16px;cursor:pointer}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#333}"]})}return e})();function W7(e,n){if(e&1){let t=kt();A(0,"div",5),j("click",function(){let i=Ct(t).$implicit,o=Ne();return _t(o.setGroup(i.id))}),A(1,"h3"),P(2),T()()}if(e&2){let t=n.$implicit;q(2),jt(t.name)}}var GD=(()=>{class e{navigationService;cd;tableGroups=[];tables=[];draggedTableId=null;ungroupedTables=[];constructor(t,r){this.navigationService=t,this.cd=r,we(Me.firebaseConfig)}ngOnInit(){this.loadGroupsAndTables()}loadGroupsAndTables(){let t=J(),r=localStorage.getItem("currentRestaurant"),i=sessionStorage.getItem("userId");if(!r){console.error("No current restaurant found in local storage");return}let o=Q(t,`Owners/${i}/Restaurants/${r}/Tables`),c=Q(t,`Owners/${i}/Restaurants/${r}/TableGroups`);he(o).then(h=>{h.exists()?(this.tables=Object.values(h.val()),this.ungroupedTables=this.tables.filter(g=>g.group_id==="0g")):console.log("No tables found")}).catch(h=>{console.error("Error loading tables:",h)}),he(c).then(h=>{h.exists()?this.tableGroups=Object.values(h.val()):console.log("No table groups found")}).catch(h=>{console.error("Error loading table groups:",h)})}getTablesForGroup(t){return this.tables.filter(r=>r.group_id===t)}setGroup(t){localStorage.setItem("currentGroup",t),this.goToPage("groupedit")}updateTableGroup(t){let r=J(),i=localStorage.getItem("currentRestaurant"),o=sessionStorage.getItem("userId");if(!i){console.error("No current restaurant found in local storage");return}let c=Q(r,`Owners/${o}/Restaurants/${i}/Tables/${t.id}`);gt(c,{group_id:t.group_id}).then(()=>{console.log(`Table ${t.name} moved to group ${t.group_id}`)}).catch(h=>{console.error("Error updating table group:",h)})}setTable(t){localStorage.setItem("currentTable",t),this.goToPage("tableedit")}goToPage(t){this.navigationService.NavigateTo(t)}static \u0275fac=function(r){return new(r||e)(z(xe),z(Ui))};static \u0275cmp=oe({type:e,selectors:[["app-tablegroupmanage"]],standalone:!0,features:[se],decls:10,vars:0,consts:[[1,"displaybox"],[1,"logo"],[1,"table-group"],[1,"footstatic"],[3,"click"],[1,"table-group",3,"click"]],template:function(r,i){r&1&&(A(0,"main")(1,"div",0)(2,"div",1)(3,"h1"),P(4,"EasyOrder"),T()(),yn(5,W7,3,1,"div",2,mn),A(7,"div",3)(8,"button",4),j("click",function(){return i.goToPage("tablegroupcreate")}),P(9,"Dodaj now\u0105 grup\u0119"),T()()()()),r&2&&(q(5),Cn(i.tableGroups))},styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;padding:16px;position:relative}.displaybox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center;position:relative}.logo[_ngcontent-%COMP%]{display:flex;font-size:45%;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center;margin-bottom:48px}.buttons[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:flex-start;align-items:center;align-content:center}.buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{text-align:left;width:100%;background:#fff;padding:24px;font-size:110%;color:#000;font-weight:600;letter-spacing:2px;border:1px solid #000000;transition:all .5s;margin-bottom:24px}.footstatic[_ngcontent-%COMP%]{width:100%}.footstatic[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;background:#fff;padding:24px;font-size:110%;color:#000;font-weight:600;letter-spacing:2px;border:1px solid #000000;transition:all .5s;margin-bottom:24px;margin-right:8px}.table-group[_ngcontent-%COMP%]{text-align:left;width:100%;background:#fff;padding:24px;font-size:110%;color:#000;font-weight:600;letter-spacing:2px;border:1px solid #000000;transition:all .5s;margin-bottom:24px}.table-group[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:100%}.table-button[_ngcontent-%COMP%]{width:100%;border:1px solid #000000;height:60px;display:block;text-align:left;margin-bottom:0;padding:8px;font-weight:700}.table-group[_ngcontent-%COMP%]:hover{background-color:#f1f1f1}"]})}return e})();var $D=(()=>{class e{navigationService;messagesokService;name="";description="";color="";location="";constructor(t,r){this.navigationService=t,this.messagesokService=r,we(Me.firebaseConfig)}goToPage(t){this.navigationService.NavigateTo(t)}onSubmit(t){t.preventDefault();let r=Date.now().toString(),i=localStorage.getItem("currentRestaurant");if(!i){alert("Nie wybrano restauracji.");return}let o={id:r,name:this.name,color:this.color,description:this.description?this.description:"",location:this.location?this.location:""};this.saveTableGroup(o,i)}saveTableGroup(t,r){let i=J(),o=Q(i,`Owners/${sessionStorage.getItem("userId")}/Restaurants/${r}/TableGroups`);gt(o,{[t.id]:t}).then(()=>{this.messagesokService.askUser("Grupa zosta\u0142a dodana.",()=>{this.navigationService.NavigateTo("tablegroupmanage")}),this.resetForm()}).catch(c=>{console.error("B\u0142\u0105d podczas dodawania grupy stolik\xF3w:",c)})}resetForm(){this.name="",this.description="",this.color="",this.location=""}static \u0275fac=function(r){return new(r||e)(z(xe),z(xo))};static \u0275cmp=oe({type:e,selectors:[["app-tablegroupcreate"]],standalone:!0,features:[se],decls:26,vars:4,consts:[[1,"layoutbox"],[1,"head"],[1,"logo"],["src","https://cdn1.mandarin.com.pl/eologo.png","alt","EasyOrder"],[1,"backbtn",3,"click"],[1,"material-symbols-rounded"],[1,"buttons"],[3,"ngSubmit"],[1,"box"],["type","text","id","name","name","name","required","",3,"ngModelChange","ngModel"],["type","text","id","description","name","description",1,"description",3,"ngModelChange","ngModel"],["type","color","id","color","name","color",3,"ngModelChange","ngModel"],["type","text","id","location","name","location",3,"ngModelChange","ngModel"],["type","submit",1,"addtable"],[1,"footstatic"]],template:function(r,i){r&1&&(A(0,"main")(1,"div",0)(2,"div",1)(3,"div",2),K(4,"img",3),T(),A(5,"div",4),j("click",function(){return i.goToPage("tablegroupmanage")}),A(6,"span",5),P(7," arrow_back "),T()()(),A(8,"div",6)(9,"form",7),j("ngSubmit",function(c){return i.onSubmit(c)}),A(10,"div",8)(11,"div"),P(12," Nazwa grupy "),A(13,"input",9),ot("ngModelChange",function(c){return st(i.name,c)||(i.name=c),c}),T()(),A(14,"div"),P(15," Opis "),A(16,"input",10),ot("ngModelChange",function(c){return st(i.description,c)||(i.description=c),c}),T()(),A(17,"div"),P(18," Kolor "),A(19,"input",11),ot("ngModelChange",function(c){return st(i.color,c)||(i.color=c),c}),T()(),A(20,"div"),P(21," Lokalizacja "),A(22,"input",12),ot("ngModelChange",function(c){return st(i.location,c)||(i.location=c),c}),T()()(),A(23,"button",13),P(24,"Dodaj grup\u0119 stolik\xF3w"),T()()(),K(25,"div",14),T()()),r&2&&(q(13),it("ngModel",i.name),q(3),it("ngModel",i.description),q(3),it("ngModel",i.color),q(3),it("ngModel",i.location))},dependencies:[Ht,tr,Kt,_n,er,An,cn,Wn],styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;justify-content:space-between;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{width:100%;height:64px;padding:0 32px;border-bottom:3px solid #000;display:flex;justify-content:space-between;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{margin:8px 0;height:48px}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .backbtn[_ngcontent-%COMP%]{height:48px;width:48px;font-size:48px;font-weight:700;display:flex;justify-content:center;align-items:center;margin:8px 0}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .backbtn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{height:48px;font-size:48px;font-weight:700}.buttons[_ngcontent-%COMP%]{width:calc(100% - 48px)}.buttons[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]{width:100%;border:3px solid #000000;border-radius:16px;display:flex;padding:24px;flex-direction:column;flex-wrap:nowrap;justify-content:flex-start;align-items:center;align-content:center}.buttons[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-weight:bolder}.buttons[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;background:#fff;padding:8px;font-size:110%;border-radius:16px;color:#000;font-weight:600;letter-spacing:2px;border:3px solid #000;transition:all .5s;margin-bottom:24px}.buttons[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#333}.buttons[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center}div[_ngcontent-%COMP%]{width:100%}div[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;background:#fff;padding:8px;font-size:110%;border-radius:16px;color:#000;font-weight:600;letter-spacing:2px;border:3px solid #000;transition:all .5s;margin-bottom:24px}.addtable[_ngcontent-%COMP%]{margin-top:24px;width:100%;background:#000;padding:16px;font-size:110%;color:#fff;font-weight:600;letter-spacing:2px;border:none;transition:all .5s;border-radius:16px;cursor:pointer}.addtable[_ngcontent-%COMP%]:hover{background:#333}.description[_ngcontent-%COMP%]{height:100px}#color[_ngcontent-%COMP%]{padding:0;appearance:none;background:none;border-radius:8px;overflow:hidden;height:48px}"]})}return e})();var ll=ew(YM(),1);var U9=["qrcElement"],Lo=(()=>{class e{constructor(t,r){this.renderer=t,this.sanitizer=r,this.allowEmptyString=!1,this.colorDark="#000000ff",this.colorLight="#ffffffff",this.cssClass="qrcode",this.elementType="canvas",this.errorCorrectionLevel="M",this.margin=4,this.qrdata="",this.scale=4,this.width=10,this.qrCodeURL=new Pt,this.context=null}ngOnChanges(){return Yt(this,null,function*(){yield this.createQRCode()})}isValidQrCodeText(t){return this.allowEmptyString===!1?!(typeof t>"u"||t===""||t==="null"||t===null):!(typeof t>"u")}toDataURL(t){return new Promise((r,i)=>{(0,ll.toDataURL)(this.qrdata,t,(o,c)=>{o?i(o):r(c)})})}toCanvas(t,r){return new Promise((i,o)=>{(0,ll.toCanvas)(t,this.qrdata,r,c=>{c?o(c):i("success")})})}toSVG(t){return new Promise((r,i)=>{(0,ll.toString)(this.qrdata,t,(o,c)=>{o?i(o):r(c)})})}renderElement(t){for(let r of this.qrcElement.nativeElement.childNodes)this.renderer.removeChild(this.qrcElement.nativeElement,r);this.renderer.appendChild(this.qrcElement.nativeElement,t)}createQRCode(){return Yt(this,null,function*(){this.version&&this.version>40?(console.warn("[angularx-qrcode] max value for `version` is 40"),this.version=40):this.version&&this.version<1?(console.warn("[angularx-qrcode]`min value for `version` is 1"),this.version=1):this.version!==void 0&&isNaN(this.version)&&(console.warn("[angularx-qrcode] version should be a number, defaulting to auto."),this.version=void 0);try{if(!this.isValidQrCodeText(this.qrdata))throw new Error("[angularx-qrcode] Field `qrdata` is empty, set 'allowEmptyString=\"true\"' to overwrite this behaviour.");this.isValidQrCodeText(this.qrdata)&&this.qrdata===""&&(this.qrdata=" ");let t={color:{dark:this.colorDark,light:this.colorLight},errorCorrectionLevel:this.errorCorrectionLevel,margin:this.margin,scale:this.scale,version:this.version,width:this.width},r=this.imageSrc,i=this.imageHeight||40,o=this.imageWidth||40;switch(this.elementType){case"canvas":{let c=this.renderer.createElement("canvas");this.context=c.getContext("2d"),this.toCanvas(c,t).then(()=>{if(this.ariaLabel&&this.renderer.setAttribute(c,"aria-label",`${this.ariaLabel}`),this.title&&this.renderer.setAttribute(c,"title",`${this.title}`),r&&this.context){this.centerImage=new Image(o,i),r!==this.centerImage.src&&(this.centerImage.crossOrigin="anonymous",this.centerImage.src=r),i!==this.centerImage.height&&(this.centerImage.height=i),o!==this.centerImage.width&&(this.centerImage.width=o);let h=this.centerImage;h&&(h.onload=()=>{this.context?.drawImage(h,c.width/2-o/2,c.height/2-i/2,o,i)})}this.renderElement(c),this.emitQRCodeURL(c)}).catch(h=>{console.error("[angularx-qrcode] canvas error:",h)});break}case"svg":{let c=this.renderer.createElement("div");this.toSVG(t).then(h=>{this.renderer.setProperty(c,"innerHTML",h);let g=c.firstChild;this.renderer.setAttribute(g,"height",`${this.width}`),this.renderer.setAttribute(g,"width",`${this.width}`),this.renderElement(g),this.emitQRCodeURL(g)}).catch(h=>{console.error("[angularx-qrcode] svg error:",h)});break}case"url":case"img":default:{let c=this.renderer.createElement("img");this.toDataURL(t).then(h=>{this.alt&&c.setAttribute("alt",this.alt),this.ariaLabel&&c.setAttribute("aria-label",this.ariaLabel),c.setAttribute("src",h),this.title&&c.setAttribute("title",this.title),this.renderElement(c),this.emitQRCodeURL(c)}).catch(h=>{console.error("[angularx-qrcode] img/url error:",h)})}}}catch(t){console.error("[angularx-qrcode] Error generating QR Code:",t.message)}})}convertBase64ImageUrlToBlob(t){let r=t.split(";base64,"),i=r[0].split(":")[1],o=atob(r[1]),c=new Uint8Array(o.length);for(let h=0;h<o.length;++h)c[h]=o.charCodeAt(h);return new Blob([c],{type:i})}emitQRCodeURL(t){let r=t.constructor.name;if(r===SVGSVGElement.name){let g=t.outerHTML,m=new Blob([g],{type:"image/svg+xml"}),v=URL.createObjectURL(m),b=this.sanitizer.bypassSecurityTrustUrl(v);this.qrCodeURL.emit(b);return}let i="";r===HTMLCanvasElement.name&&(i=t.toDataURL("image/png")),r===HTMLImageElement.name&&(i=t.src);let o=this.convertBase64ImageUrlToBlob(i),c=URL.createObjectURL(o),h=this.sanitizer.bypassSecurityTrustUrl(c);this.qrCodeURL.emit(h)}static{this.\u0275fac=function(r){return new(r||e)(z(Xr),z(i1))}}static{this.\u0275cmp=oe({type:e,selectors:[["qrcode"]],viewQuery:function(r,i){if(r&1&&Mf(U9,7),r&2){let o;Zl(o=Ql())&&(i.qrcElement=o.first)}},inputs:{allowEmptyString:"allowEmptyString",colorDark:"colorDark",colorLight:"colorLight",cssClass:"cssClass",elementType:"elementType",errorCorrectionLevel:"errorCorrectionLevel",imageSrc:"imageSrc",imageHeight:"imageHeight",imageWidth:"imageWidth",margin:"margin",qrdata:"qrdata",scale:"scale",version:"version",width:"width",alt:"alt",ariaLabel:"ariaLabel",title:"title"},outputs:{qrCodeURL:"qrCodeURL"},features:[Pi],decls:2,vars:2,consts:[["qrcElement",""]],template:function(r,i){r&1&&K(0,"div",null,0),r&2&&uE(i.cssClass)},encapsulation:2,changeDetection:0})}}return e})(),Bo=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=Ri({type:e})}static{this.\u0275inj=Ni({})}}return e})();var XM=(()=>{class e{navigationService;tableId=null;table=null;tableGroupName=null;groupColor=null;uniqueLinkToken=null;ownerId=null;restaurantId=null;constructor(t){this.navigationService=t,we(Me.firebaseConfig)}ngOnInit(){this.loadTable(),this.loadUniqueLinkToken()}printQRCodePage(){window.print()}loadUniqueLinkToken(){let t=J();this.ownerId=sessionStorage.getItem("userId"),this.restaurantId=localStorage.getItem("currentRestaurant");let r=Q(t,`Owners/${this.ownerId}/Restaurants/${this.restaurantId}/uniqueLinkToken`);he(r).then(i=>{i.exists()?this.uniqueLinkToken=i.val():console.log("No unique link token found")}).catch(i=>{console.error("Error loading unique link token:",i)})}deleteTable(){let t=J(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant");if(!this.tableId||!r||!i){console.error("Missing table, owner, or restaurant ID");return}let o=Q(t,`Owners/${r}/Restaurants/${i}/Tables/${this.tableId}`);nr(o).then(()=>{console.log("Table deleted successfully"),this.navigationService.NavigateTo("tablemanage")}).catch(c=>{console.error("Error deleting table:",c)})}blockTable(){let t=J(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant");if(!this.tableId||!r||!i){console.error("Missing table, owner, or restaurant ID");return}let o=Q(t,`Owners/${r}/Restaurants/${i}/Tables/${this.tableId}`);gt(o,{is_blocked:!0}).then(()=>{console.log("Table blocked successfully"),location.reload()}).catch(c=>{console.error("Error blocking table:",c)})}unlockTable(){let t=J(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant");if(!this.tableId||!r||!i){console.error("Missing table, owner, or restaurant ID");return}let o=Q(t,`Owners/${r}/Restaurants/${i}/Tables/${this.tableId}`);gt(o,{is_blocked:!1}).then(()=>{console.log("Table unlocked successfully"),location.reload()}).catch(c=>{console.error("Error unlocking table:",c)})}saveTable(){}loadTable(){if(this.tableId=localStorage.getItem("currentTable"),!this.tableId){console.error("No current table found in local storage");return}let t=J(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant"),o=Q(t,`Owners/${r}/Restaurants/${i}/Tables/${this.tableId}`);he(o).then(c=>{c.exists()?(this.table=c.val(),this.loadTableGroup()):console.log("No table found")}).catch(c=>{console.error("Error loading table:",c)})}loadTableGroup(){let t=J(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant");if(!this.table?.group_id||this.table.group_id==="0g"){this.tableGroupName="Stoliki bez grupy",this.groupColor="#000000";return}let o=Q(t,`Owners/${r}/Restaurants/${i}/TableGroups/${this.table.group_id}`);he(o).then(c=>{if(c.exists()){let h=c.val();this.tableGroupName=h.name,this.groupColor=h.color}else console.log("No group found for this table")}).catch(c=>{console.error("Error loading group:",c)})}getQRCodeData(){let t=this.table?.id||"",r=this.uniqueLinkToken||"",i=sessionStorage.getItem("userId"),o=localStorage.getItem("currentRestaurant");return`https://easyorder.mandarin.com.pl/settable?tableid=${t}&uniqueLinkToken=${r}&ownerid=${i}&restaurantid=${o}`}static \u0275fac=function(r){return new(r||e)(z(xe))};static \u0275cmp=oe({type:e,selectors:[["app-showtableqr"]],standalone:!0,features:[se],decls:6,vars:13,consts:[[3,"click"],[1,"qr-container"],[3,"qrdata","allowEmptyString","alt","ariaLabel","cssClass","colorDark","colorLight","elementType","errorCorrectionLevel","margin","scale","title","width"]],template:function(r,i){r&1&&(A(0,"main")(1,"div")(2,"button",0),j("click",function(){return i.printQRCodePage()}),P(3,"Print QR Code"),T()(),A(4,"div",1),K(5,"qrcode",2),T()()),r&2&&(q(5),rt("qrdata","https://easyorder.mandarin.com.pl/settable?t="+i.tableId+"&u="+i.uniqueLinkToken+"&o="+i.ownerId+"&r="+i.restaurantId)("allowEmptyString",!0)("alt","A custom alt attribute")("ariaLabel","QR Code image with the following content...")("cssClass","center")("colorDark","#000000ff")("colorLight","#ffffffff")("elementType","img")("errorCorrectionLevel","H")("margin",4)("scale",1)("title","A custom title attribute")("width",300))},dependencies:[Bo,Lo],styles:[".qr-code-container[_ngcontent-%COMP%]{width:100%;min-height:max-content;display:flex;flex-wrap:wrap;justify-content:center}.qr-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;flex-wrap:nowrap;width:375px;height:565px;background:url(https://cdn1.mandarin.com.pl/qrbg2.png) no-repeat center center;background-size:cover;margin:10px;padding:10px;text-align:center;border:1px dashed black}@media print{button[_ngcontent-%COMP%]{display:none}.qr-code-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-between;margin:0;padding:0}.qr-code-box[_ngcontent-%COMP%]{width:calc(50% - 10px);height:565px;margin:5px;text-align:center;page-break-inside:avoid}.qr-code-container[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:nth-child(2n){page-break-after:always}body[_ngcontent-%COMP%]{background-color:#fff;margin:0}}"]})}return e})();var ZM=(()=>{class e{tableChangeAllowed=!1;tableBlockAllowed=!1;restaurantId=null;constructor(){we(Me.firebaseConfig)}ngOnInit(){this.loadSettings()}loadSettings(){let t=sessionStorage.getItem("userId");if(this.restaurantId=localStorage.getItem("currentRestaurant"),!t||!this.restaurantId){console.error("Missing owner or restaurant ID");return}let r=J(),i=Q(r,`Owners/${t}/Restaurants/${this.restaurantId}/settings`);he(i).then(o=>{if(o.exists()){let c=o.val();this.tableChangeAllowed=c.table_change_allowed,this.tableBlockAllowed=c.table_block_allowed}else console.log("No settings found for this restaurant")}).catch(o=>{console.error("Error loading settings:",o)})}toggleTableChangeAllowed(){this.tableChangeAllowed=!this.tableChangeAllowed,this.saveSettings()}toggleTableBlockAllowed(){this.tableBlockAllowed=!this.tableBlockAllowed,this.saveSettings()}saveSettings(){let t=sessionStorage.getItem("userId");if(!t||!this.restaurantId){console.error("Missing owner or restaurant ID");return}let r=J(),i=Q(r,`Owners/${t}/Restaurants/${this.restaurantId}/settings`);gt(i,{table_change_allowed:this.tableChangeAllowed,table_block_allowed:this.tableBlockAllowed}).then(()=>{console.log("Settings updated successfully")}).catch(o=>{console.error("Error updating settings:",o)})}static \u0275fac=function(r){return new(r||e)};static \u0275cmp=oe({type:e,selectors:[["app-tablesettings"]],standalone:!0,features:[se],decls:15,vars:2,consts:[[1,"displaybox"],[1,"logo"],[1,"buttons"],[3,"click"],[1,"footstatic"]],template:function(r,i){r&1&&(A(0,"main")(1,"div",0)(2,"div",1)(3,"h1"),P(4,"EasyOrder"),T()(),A(5,"div",2)(6,"label"),P(7,"Opcja Zmiany stolika:"),T(),A(8,"button",3),j("click",function(){return i.toggleTableChangeAllowed()}),P(9),T(),A(10,"label"),P(11,"Opcja blokowania stolik\xF3w:"),T(),A(12,"button",3),j("click",function(){return i.toggleTableBlockAllowed()}),P(13),T()(),K(14,"div",4),T()()),r&2&&(q(9),Qt(" ",i.tableChangeAllowed?"W\u0142\u0105czona":"Wy\u0142\u0105czona"," "),q(4),Qt(" ",i.tableBlockAllowed?"W\u0142\u0105czona":"Wy\u0142\u0105czona"," "))}})}return e})();var V9=["pin"];function j9(e,n){if(e&1){let t=kt();A(0,"tr")(1,"td"),P(2),T(),A(3,"td"),P(4),T(),A(5,"td")(6,"button",5),j("click",function(){let i=Ct(t).$implicit,o=Ne();return _t(o.toggleWaiterActive(i))}),P(7),T(),A(8,"button",5),j("click",function(){let i=Ct(t).$implicit,o=Ne();return _t(o.showWaiterQRCode(i.id))}),P(9,"Poka\u017C kod QR"),T(),A(10,"button",10),j("click",function(){let i=Ct(t).$implicit,o=Ne();return _t(o.removeWaiter(i.id))}),P(11," Usu\u0144 "),T()()()}if(e&2){let t=n.$implicit;q(2),jt(t.name),q(2),jt(t.is_active?"Tak":"Nie"),q(3),Qt(" ",t.is_active?"Dezaktywuj":"Aktywuj"," "),q(3),rt("disabled",t.is_default)}}var QM=(()=>{class e{navigationService;order_number_typed_by_waiter_required=!1;waiter_access_pin=1234;restaurantId=null;waiters=[];pinRef;constructor(t){this.navigationService=t,we(Me.firebaseConfig)}ngOnInit(){this.loadSettings(),this.loadWaiters()}ngAfterViewInit(){this.pinRef||console.error("PIN input element not found")}goToPage(t){this.navigationService.NavigateTo(t)}loadSettings(){let t=sessionStorage.getItem("userId");if(this.restaurantId=localStorage.getItem("currentRestaurant"),!t||!this.restaurantId){console.error("Missing owner or restaurant ID");return}let r=J(),i=Q(r,`Owners/${t}/Restaurants/${this.restaurantId}/settings`);he(i).then(o=>{if(o.exists()){let c=o.val();this.order_number_typed_by_waiter_required=c.order_number_typed_by_waiter_required,this.waiter_access_pin=c.waiter_access_pin}else console.log("No settings found for this restaurant")}).catch(o=>{console.error("Error loading settings:",o)})}toggleTableChangeAllowed(){this.order_number_typed_by_waiter_required=!this.order_number_typed_by_waiter_required,this.saveSettings()}toggleTableBlockAllowed(){this.pinRef&&this.pinRef.nativeElement?(this.waiter_access_pin=this.pinRef.nativeElement.value,this.saveSettings()):console.error("PIN input element not available")}saveSettings(){let t=sessionStorage.getItem("userId");if(!t||!this.restaurantId){console.error("Missing owner or restaurant ID");return}let r=J(),i=Q(r,`Owners/${t}/Restaurants/${this.restaurantId}/settings`);gt(i,{order_number_typed_by_waiter_required:this.order_number_typed_by_waiter_required,waiter_access_pin:this.waiter_access_pin}).then(()=>{console.log("Settings updated successfully")}).catch(o=>{console.error("Error updating settings:",o)})}loadWaiters(){let t=sessionStorage.getItem("userId");if(this.restaurantId=localStorage.getItem("currentRestaurant"),!t||!this.restaurantId){console.error("Missing owner or restaurant ID");return}let r=J(),i=Q(r,`Owners/${t}/Restaurants/${this.restaurantId}/Waiters`);he(i).then(o=>{o.exists()?this.waiters=Object.values(o.val()):console.log("No waiters found for this restaurant")}).catch(o=>{console.error("Error loading waiters:",o)})}toggleWaiterActive(t){let r=sessionStorage.getItem("userId"),i=J();if(!r||!this.restaurantId){console.error("Missing owner or restaurant ID");return}let o=Q(i,`Owners/${r}/Restaurants/${this.restaurantId}/Waiters/${t.id}`);t.is_active=!t.is_active,gt(o,{is_active:t.is_active}).then(()=>{console.log("Waiter status updated successfully")}).catch(c=>{console.error("Error updating waiter status:",c)})}showWaiterQRCode(t){localStorage.setItem("waiterId",t),localStorage.setItem("restaurantId",this.restaurantId),this.goToPage("waiterqrcode")}addWaiter(t){let r=sessionStorage.getItem("userId"),i=J();if(!r||!this.restaurantId){console.error("Missing owner or restaurant ID");return}let o=Q(i,`Owners/${r}/Restaurants/${this.restaurantId}/Waiters`),c={id:cu(o).key||"",name:t,is_active:!0,is_default:!1};cu(o,c).then(()=>{console.log("New waiter added successfully"),this.loadWaiters()}).catch(h=>{console.error("Error adding new waiter:",h)})}removeWaiter(t){let r=sessionStorage.getItem("userId"),i=J();if(console.log(t),!r||!this.restaurantId){console.error("Missing owner or restaurant ID");return}let o=Q(i,`Owners/${r}/Restaurants/${this.restaurantId}/waiters/${t}`);nr(o).then(()=>{console.log("Waiter removed successfully"),this.waiters=this.waiters.filter(c=>c.id!==t)}).catch(c=>{console.error("Error removing waiter:",c)})}static \u0275fac=function(r){return new(r||e)(z(xe))};static \u0275cmp=oe({type:e,selectors:[["app-waitersettings"]],viewQuery:function(r,i){if(r&1&&Mf(V9,5),r&2){let o;Zl(o=Ql())&&(i.pinRef=o.first)}},standalone:!0,features:[se],decls:40,vars:2,consts:[["pin",""],["waiterName",""],[1,"displaybox"],[1,"logo"],[1,"buttons"],[3,"click"],["type","number",3,"value"],[1,"myrestaaurants",3,"click"],["type","text","placeholder","Imi\u0119 nowego kelnera"],[1,"footstatic"],[3,"click","disabled"]],template:function(r,i){if(r&1){let o=kt();A(0,"main")(1,"div",2)(2,"div",3)(3,"h1"),P(4,"EasyOrder"),T()(),A(5,"div",4)(6,"label"),P(7,"Opcja Zmiany stolika:"),T(),A(8,"button",5),j("click",function(){return Ct(o),_t(i.toggleTableChangeAllowed())}),P(9),T(),A(10,"label"),P(11,"Opcja blokowania stolik\xF3w:"),T(),K(12,"input",6,0),A(14,"button",5),j("click",function(){return Ct(o),_t(i.toggleTableBlockAllowed())}),P(15,"Update PIN"),T(),A(16,"button",7),j("click",function(){return Ct(o),_t(i.goToPage("waiterqrcode"))}),P(17,"Poka\u017C kod qr dla kelner\xF3w"),T()(),A(18,"h3"),P(19,"Kelnerzy"),T(),A(20,"table")(21,"thead")(22,"tr")(23,"th"),P(24,"Imi\u0119"),T(),A(25,"th"),P(26,"Aktywny"),T(),A(27,"th"),P(28,"Akcje"),T()()(),A(29,"tbody"),yn(30,j9,12,4,"tr",null,mn),T()(),A(32,"div")(33,"h4"),P(34,"Dodaj nowego kelnera"),T(),K(35,"input",8,1),A(37,"button",5),j("click",function(){Ct(o);let h=_a(36);return _t(i.addWaiter(h.value))}),P(38,"Dodaj Kelnera"),T()(),K(39,"div",9),T()()}r&2&&(q(9),Qt(" ",i.order_number_typed_by_waiter_required?"W\u0142\u0105czona":"Wy\u0142\u0105czona"," "),q(3),rt("value",i.waiter_access_pin),q(18),Cn(i.waiters))}})}return e})();function H9(e,n){if(e&1&&(A(0,"div",2),K(1,"qrcode",3),T()),e&2){let t=n.$implicit,r=Ne();q(),rt("qrdata",r.getQRCodeData(t.id))("allowEmptyString",!0)("alt","QR code for table "+t.name)("cssClass","center")("colorDark","#000000ff")("colorLight","#ffffffff")("elementType","img")("errorCorrectionLevel","H")("margin",4)("scale",1)("width",300)}}var KM=(()=>{class e{tables=[];uniqueLinkToken=null;constructor(){we(Me.firebaseConfig)}ngOnInit(){this.loadTables(),this.loadUniqueLinkToken()}loadTables(){let t=sessionStorage.getItem("userId"),r=localStorage.getItem("currentRestaurant");if(!t||!r){console.error("Missing owner or restaurant ID");return}let i=J(),o=Q(i,`Owners/${t}/Restaurants/${r}/Tables`);he(o).then(c=>{c.exists()?this.tables=Object.values(c.val()):console.log("No tables found")}).catch(c=>{console.error("Error loading tables:",c)})}loadUniqueLinkToken(){let t=J(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant"),o=Q(t,`Owners/${r}/Restaurants/${i}/uniqueLinkToken`);he(o).then(c=>{c.exists()?this.uniqueLinkToken=c.val():console.log("No unique link token found")}).catch(c=>{console.error("Error loading unique link token:",c)})}getQRCodeData(t){let r=this.uniqueLinkToken||"",i=sessionStorage.getItem("userId"),o=localStorage.getItem("currentRestaurant");return`https://easyorder.mandarin.com.pl/settable?t=${t}&u=${r}&o=${i}&r=${o}`}printQRCodePage(){window.print()}static \u0275fac=function(r){return new(r||e)};static \u0275cmp=oe({type:e,selectors:[["app-alltableqrcodes"]],standalone:!0,features:[se],decls:6,vars:0,consts:[[3,"click"],[1,"qr-code-container"],[1,"qr-container"],[3,"qrdata","allowEmptyString","alt","cssClass","colorDark","colorLight","elementType","errorCorrectionLevel","margin","scale","width"]],template:function(r,i){r&1&&(A(0,"div")(1,"button",0),j("click",function(){return i.printQRCodePage()}),P(2,"Print QR Codes"),T()(),A(3,"div",1),yn(4,H9,2,11,"div",2,mn),T()),r&2&&(q(4),Cn(i.tables))},dependencies:[Bo,Lo],styles:[".qr-code-container[_ngcontent-%COMP%]{width:100%;min-height:max-content;display:flex;flex-wrap:wrap;justify-content:center}.qr-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;flex-wrap:nowrap;width:375px;height:565px;background:url(https://cdn1.mandarin.com.pl/qrbg2.png) no-repeat center center;background-size:cover;margin:10px;padding:10px;text-align:center;border:1px dashed black}@media print{button[_ngcontent-%COMP%]{display:none}.qr-code-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-between;margin:0;padding:0}.qr-code-box[_ngcontent-%COMP%]{width:calc(50% - 10px);height:565px;margin:5px;text-align:center;page-break-inside:avoid}.qr-code-container[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:nth-child(2n){page-break-after:always}body[_ngcontent-%COMP%]{background-color:#fff;margin:0}}"]})}return e})();var JM=(()=>{class e{constructor(){we(tp.firebaseConfig)}getOrderList(t){let r=J(),i=Q(r,`Owners/${sessionStorage.getItem("userId")}/Restaurants/${t}/Orders`);return new Ue(o=>(AD(i,c=>{if(c.exists()){let h=c.val();o.next(Object.values(h))}else o.next([])},c=>{o.error(c)}),()=>{}))}static \u0275fac=function(r){return new(r||e)};static \u0275prov=fe({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function W9(e,n){e&1&&(A(0,"h2"),P(1,"\u0141adowanie statusu zam\xF3wienia..."),T())}function G9(e,n){if(e&1&&(A(0,"h2"),P(1),T()),e&2){let t=Ne(2);q(),Qt(" ",t.status||"Status nie jest dost\u0119pny","")}}function $9(e,n){if(e&1&&Vt(0,G9,2,1,"h2"),e&2){let t=n.$implicit,r=Ne();gn(t.table_id==r.tableId?0:-1)}}function q9(e,n){e&1&&(A(0,"h2"),P(1,"Nie znaleziono zam\xF3wienia"),T())}function Y9(e,n){if(e&1){let t=kt();A(0,"button",8),j("click",function(){Ct(t);let i=Ne();return _t(i.changetable())}),P(1,"Zmie\u0144 stolik"),T()}}var eA=(()=>{class e{messageokService;databaseService;navigationService;tableId=null;uniqueLinkToken=null;orderNumber=null;ownerId=null;restaurantid=null;orderList=null;updateSubscription=null;status;constructor(t,r,i){this.messageokService=t,this.databaseService=r,this.navigationService=i,we(Me.firebaseConfig)}ngOnInit(){this.tableId=localStorage.getItem("customercurrentTable"),this.uniqueLinkToken=localStorage.getItem("uniqueLinkToken"),this.orderNumber=localStorage.getItem("orderNumber"),this.restaurantid=localStorage.getItem("restaurantid"),this.ownerId=localStorage.getItem("ownerid"),this.orderNumber?this.processOrder(this.orderNumber):console.error("Order number is missing"),this.startOrderUpdates()}ngOnDestroy(){this.updateSubscription?.unsubscribe()}processOrder(t){if(!this.ownerId||!this.restaurantid||!this.tableId||!this.uniqueLinkToken){console.error("Missing required data");return}let r=J(),i=Q(r,`Owners/${this.ownerId}/Restaurants/${this.restaurantid}/Orders`);he(i).then(o=>{if(o.exists()){let c=o.val(),h=Object.keys(c).find(g=>c[g].name===t);h?this.updateOrderWithTable(h):this.createNewOrder(t)}else console.log("No orders found, creating a new order"),this.createNewOrder(t)}).catch(o=>{console.error("Error checking orders:",o)})}updateOrderWithTable(t){let r=J(),i=Q(r,`Owners/${this.ownerId}/Restaurants/${this.restaurantid}/Orders/${t}`);gt(i,{table_id:this.tableId}).then(()=>{console.log("Order updated with table ID successfully")}).catch(o=>{console.error("Error updating order:",o)})}createNewOrder(t){let r=J(),i={name:t,waiter_get_order_at_table:!1,created_at:Date.now(),canceled_at:null,completed_at:null,waiter_id:"0",table_id:this.tableId,waiter_set_order_number:!0,table_id_entered_by_waiter:!0,completed_during_table_clean:!1},o=Q(r,`Owners/${this.ownerId}/Restaurants/${this.restaurantid}/Orders`),c=Date.now().toString();gt(o,{[c]:i}).then(()=>{console.log("New order created successfully:",i)}).catch(h=>{console.error("Error creating new order:",h)})}startOrderUpdates(){if(!this.restaurantid){console.error("Restaurant ID is missing");return}this.updateSubscription=dg(0,15e3).subscribe(()=>{this.databaseService.getOrderList(this.restaurantid).subscribe(t=>{this.orderList=t.map(r=>Be(re({},r),{status:this.getOrderStatus(r)}))})})}changetable(){this.messageokService.askUser("Zeskanuj kod QR stolika",()=>{this.navigationService.NavigateTo("scanqrcode")})}getOrderStatus(t){t.canceled_at?this.status="Anulowano":t.completed_at?this.status="Zrealizowane":t.created_at?this.status="W realizacji":this.status="Nieznany status"}static \u0275fac=function(r){return new(r||e)(z(xo),z(JM),z(xe))};static \u0275cmp=oe({type:e,selectors:[["app-tableordered"]],standalone:!0,features:[se],decls:13,vars:3,consts:[[1,"layoutbox"],[1,"head"],[1,"logo"],["src","https://cdn1.mandarin.com.pl/eologo.png","alt","EasyOrder"],[1,"backbtn"],[1,"buttons"],[1,"addtable"],[1,"footstatic"],[1,"addtable",3,"click"]],template:function(r,i){r&1&&(A(0,"main")(1,"div",0)(2,"div",1)(3,"div",2),K(4,"img",3),T(),K(5,"div",4),T(),A(6,"div",5),Vt(7,W9,2,0,"h2"),yn(8,$9,1,1,null,null,mn),Vt(10,q9,2,0,"h2")(11,Y9,2,0,"button",6),T(),K(12,"div",7),T()()),r&2&&(q(7),gn(i.orderList===null?7:-1),q(),Cn(i.orderList),q(2),gn(i.orderList&&i.orderList.length===0?10:-1),q(),gn(i.orderList&&i.orderList.length<=1?11:-1))},styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;justify-content:space-between;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{width:100%;height:64px;padding:0 32px;border-bottom:3px solid #000;display:flex;justify-content:space-between;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{margin:8px 0;height:48px}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .backbtn[_ngcontent-%COMP%]{height:48px;font-size:48px;font-weight:700;display:flex;justify-content:center;align-items:center;margin:8px 0}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .backbtn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{height:48px;font-size:48px;font-weight:700}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{width:75%;display:flex;flex-direction:column;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-weight:bolder;font-size:140%;margin-bottom:24px}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;background:#fff;padding:16px;font-size:110%;border-radius:16px;color:#000;font-weight:600;letter-spacing:2px;border:3px solid #000;transition:all .5s;margin-bottom:24px}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#333}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;background:#000;padding:16px;font-size:110%;color:#fff;font-weight:600;letter-spacing:2px;border:none;transition:all .5s;border-radius:16px;cursor:pointer}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#333}"]})}return e})();var ae=function(e){return e[e.QR_CODE=0]="QR_CODE",e[e.AZTEC=1]="AZTEC",e[e.CODABAR=2]="CODABAR",e[e.CODE_39=3]="CODE_39",e[e.CODE_93=4]="CODE_93",e[e.CODE_128=5]="CODE_128",e[e.DATA_MATRIX=6]="DATA_MATRIX",e[e.MAXICODE=7]="MAXICODE",e[e.ITF=8]="ITF",e[e.EAN_13=9]="EAN_13",e[e.EAN_8=10]="EAN_8",e[e.PDF_417=11]="PDF_417",e[e.RSS_14=12]="RSS_14",e[e.RSS_EXPANDED=13]="RSS_EXPANDED",e[e.UPC_A=14]="UPC_A",e[e.UPC_E=15]="UPC_E",e[e.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION",e}(ae||{}),tA=new Map([[ae.QR_CODE,"QR_CODE"],[ae.AZTEC,"AZTEC"],[ae.CODABAR,"CODABAR"],[ae.CODE_39,"CODE_39"],[ae.CODE_93,"CODE_93"],[ae.CODE_128,"CODE_128"],[ae.DATA_MATRIX,"DATA_MATRIX"],[ae.MAXICODE,"MAXICODE"],[ae.ITF,"ITF"],[ae.EAN_13,"EAN_13"],[ae.EAN_8,"EAN_8"],[ae.PDF_417,"PDF_417"],[ae.RSS_14,"RSS_14"],[ae.RSS_EXPANDED,"RSS_EXPANDED"],[ae.UPC_A,"UPC_A"],[ae.UPC_E,"UPC_E"],[ae.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]);function nA(e){return Object.values(ae).includes(e)}var vi=function(e){return e[e.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",e[e.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE",e}(vi||{}),rr=function(){function e(){}return e.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",e.SCAN_DEFAULT_FPS=2,e.DEFAULT_DISABLE_FLIP=!1,e.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,e.DEFAULT_SUPPORTED_SCAN_TYPE=[vi.SCAN_TYPE_CAMERA,vi.SCAN_TYPE_FILE],e}();var pp=function(){function e(n,t){this.format=n,this.formatName=t}return e.prototype.toString=function(){return this.formatName},e.create=function(n){if(!tA.has(n))throw"".concat(n," not in html5QrcodeSupportedFormatsTextMap");return new e(n,tA.get(n))},e}();var g_=function(){function e(){}return e.createFromText=function(n){var t={text:n};return{decodedText:n,result:t}},e.createFromQrcodeResult=function(n){return{decodedText:n.text,result:n}},e}();var rA=function(e){return e[e.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",e[e.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",e[e.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR",e}(rA||{}),gp=function(){function e(){}return e.createFrom=function(n){return{errorMessage:n,type:rA.UNKWOWN_ERROR}},e}();var mp=function(){function e(n){this.verbose=n}return e.prototype.log=function(n){this.verbose&&console.log(n)},e.prototype.warn=function(n){this.verbose&&console.warn(n)},e.prototype.logError=function(n,t){(this.verbose||t===!0)&&console.error(n)},e.prototype.logErrors=function(n){if(n.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(n)},e}();function Or(e){return typeof e>"u"||e===null}function iA(e,n,t){return e>t?t:e<n?n:e}var Uo=function(){function e(){}return e.codeParseError=function(n){return"QR code parse error, error = ".concat(n)},e.errorGettingUserMedia=function(n){return"Error getting userMedia, error = ".concat(n)},e.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},e.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},e.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},e.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},e.scannerPaused=function(){return"Scanner paused"},e}();var et=function(){function e(){}return e.scanningStatus=function(){return"Scanning"},e.idleStatus=function(){return"Idle"},e.errorStatus=function(){return"Error"},e.permissionStatus=function(){return"Permission"},e.noCameraFoundErrorStatus=function(){return"No Cameras"},e.lastMatch=function(n){return"Last Match: ".concat(n)},e.codeScannerTitle=function(){return"Code Scanner"},e.cameraPermissionTitle=function(){return"Request Camera Permissions"},e.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},e.noCameraFound=function(){return"No camera found"},e.scanButtonStopScanningText=function(){return"Stop Scanning"},e.scanButtonStartScanningText=function(){return"Start Scanning"},e.torchOnButton=function(){return"Switch On Torch"},e.torchOffButton=function(){return"Switch Off Torch"},e.torchOnFailedMessage=function(){return"Failed to turn on torch"},e.torchOffFailedMessage=function(){return"Failed to turn off torch"},e.scanButtonScanningStarting=function(){return"Launching Camera..."},e.textIfCameraScanSelected=function(){return"Scan an Image File"},e.textIfFileScanSelected=function(){return"Scan using camera directly"},e.selectCamera=function(){return"Select Camera"},e.fileSelectionChooseImage=function(){return"Choose Image"},e.fileSelectionChooseAnother=function(){return"Choose Another"},e.fileSelectionNoImageSelected=function(){return"No image choosen"},e.anonymousCameraPrefix=function(){return"Anonymous Camera"},e.dragAndDropMessage=function(){return"Or drop an image to scan"},e.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},e.zoom=function(){return"zoom"},e.loadingImage=function(){return"Loading image..."},e.cameraScanAltText=function(){return"Camera based scan"},e.fileScanAltText=function(){return"Fule based scan"},e}();var m_=function(){function e(){}return e.poweredBy=function(){return"Powered by "},e.reportIssues=function(){return"Report issues"},e}();var y_=function(){function e(){}return e.isMediaStreamConstraintsValid=function(n,t){if(typeof n!="object"){var r=typeof n;return t.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(r,"."),!0),!1}for(var i=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],o=new Set(i),c=Object.keys(n),h=0,g=c;h<g.length;h++){var m=g[h];if(o.has(m))return t.logError("".concat(m," is not supported videoConstaints."),!0),!1}return!0},e}();var yt=ew(sA());var C_=function(){function e(n,t,r){if(this.formatMap=new Map([[ae.QR_CODE,yt.BarcodeFormat.QR_CODE],[ae.AZTEC,yt.BarcodeFormat.AZTEC],[ae.CODABAR,yt.BarcodeFormat.CODABAR],[ae.CODE_39,yt.BarcodeFormat.CODE_39],[ae.CODE_93,yt.BarcodeFormat.CODE_93],[ae.CODE_128,yt.BarcodeFormat.CODE_128],[ae.DATA_MATRIX,yt.BarcodeFormat.DATA_MATRIX],[ae.MAXICODE,yt.BarcodeFormat.MAXICODE],[ae.ITF,yt.BarcodeFormat.ITF],[ae.EAN_13,yt.BarcodeFormat.EAN_13],[ae.EAN_8,yt.BarcodeFormat.EAN_8],[ae.PDF_417,yt.BarcodeFormat.PDF_417],[ae.RSS_14,yt.BarcodeFormat.RSS_14],[ae.RSS_EXPANDED,yt.BarcodeFormat.RSS_EXPANDED],[ae.UPC_A,yt.BarcodeFormat.UPC_A],[ae.UPC_E,yt.BarcodeFormat.UPC_E],[ae.UPC_EAN_EXTENSION,yt.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!yt)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=t,this.logger=r;var i=this.createZXingFormats(n),o=new Map;o.set(yt.DecodeHintType.POSSIBLE_FORMATS,i),o.set(yt.DecodeHintType.TRY_HARDER,!1),this.hints=o}return e.prototype.decodeAsync=function(n){var t=this;return new Promise(function(r,i){try{r(t.decode(n))}catch(o){i(o)}})},e.prototype.decode=function(n){var t=new yt.MultiFormatReader(this.verbose,this.hints),r=new yt.HTMLCanvasElementLuminanceSource(n),i=new yt.BinaryBitmap(new yt.HybridBinarizer(r)),o=t.decode(i);return{text:o.text,format:pp.create(this.toHtml5QrcodeSupportedFormats(o.format)),debugData:this.createDebugData()}},e.prototype.createReverseFormatMap=function(){var n=new Map;return this.formatMap.forEach(function(t,r,i){n.set(t,r)}),n},e.prototype.toHtml5QrcodeSupportedFormats=function(n){if(!this.reverseFormatMap.has(n))throw"reverseFormatMap doesn't have ".concat(n);return this.reverseFormatMap.get(n)},e.prototype.createZXingFormats=function(n){for(var t=[],r=0,i=n;r<i.length;r++){var o=i[r];this.formatMap.has(o)?t.push(this.formatMap.get(o)):this.logger.logError("".concat(o," is not supported by")+"ZXingHtml5QrcodeShim")}return t},e.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},e}();var X9=function(e,n,t,r){function i(o){return o instanceof t?o:new t(function(c){c(o)})}return new(t||(t=Promise))(function(o,c){function h(v){try{m(r.next(v))}catch(b){c(b)}}function g(v){try{m(r.throw(v))}catch(b){c(b)}}function m(v){v.done?o(v.value):i(v.value).then(h,g)}m((r=r.apply(e,n||[])).next())})},Z9=function(e,n){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,c;return c={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function h(m){return function(v){return g([m,v])}}function g(m){if(r)throw new TypeError("Generator is already executing.");for(;c&&(c=0,m[0]&&(t=0)),t;)try{if(r=1,i&&(o=m[0]&2?i.return:m[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,m[1])).done)return o;switch(i=0,o&&(m=[m[0]&2,o.value]),m[0]){case 0:case 1:o=m;break;case 4:return t.label++,{value:m[1],done:!1};case 5:t.label++,i=m[1],m=[0];continue;case 7:m=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(m[0]===6||m[0]===2)){t=0;continue}if(m[0]===3&&(!o||m[1]>o[0]&&m[1]<o[3])){t.label=m[1];break}if(m[0]===6&&t.label<o[1]){t.label=o[1],o=m;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(m);break}o[2]&&t.ops.pop(),t.trys.pop();continue}m=n.call(e,t)}catch(v){m=[6,v],i=0}finally{r=o=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},__=function(){function e(n,t,r){if(this.formatMap=new Map([[ae.QR_CODE,"qr_code"],[ae.AZTEC,"aztec"],[ae.CODABAR,"codabar"],[ae.CODE_39,"code_39"],[ae.CODE_93,"code_93"],[ae.CODE_128,"code_128"],[ae.DATA_MATRIX,"data_matrix"],[ae.ITF,"itf"],[ae.EAN_13,"ean_13"],[ae.EAN_8,"ean_8"],[ae.PDF_417,"pdf417"],[ae.UPC_A,"upc_a"],[ae.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!e.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=t,this.logger=r;var i=this.createBarcodeDetectorFormats(n);if(this.detector=new BarcodeDetector(i),!this.detector)throw"BarcodeDetector detector not supported"}return e.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var n=new BarcodeDetector({formats:["qr_code"]});return typeof n<"u"},e.prototype.decodeAsync=function(n){return X9(this,void 0,void 0,function(){var t,r;return Z9(this,function(i){switch(i.label){case 0:return[4,this.detector.detect(n)];case 1:if(t=i.sent(),!t||t.length===0)throw"No barcode or QR code detected.";return r=this.selectLargestBarcode(t),[2,{text:r.rawValue,format:pp.create(this.toHtml5QrcodeSupportedFormats(r.format)),debugData:this.createDebugData()}]}})})},e.prototype.selectLargestBarcode=function(n){for(var t=null,r=0,i=0,o=n;i<o.length;i++){var c=o[i],h=c.boundingBox.width*c.boundingBox.height;h>r&&(r=h,t=c)}if(!t)throw"No largest barcode found";return t},e.prototype.createBarcodeDetectorFormats=function(n){for(var t=[],r=0,i=n;r<i.length;r++){var o=i[r];this.formatMap.has(o)?t.push(this.formatMap.get(o)):this.logger.warn("".concat(o," is not supported by")+"BarcodeDetectorDelegate")}return{formats:t}},e.prototype.toHtml5QrcodeSupportedFormats=function(n){if(!this.reverseFormatMap.has(n))throw"reverseFormatMap doesn't have ".concat(n);return this.reverseFormatMap.get(n)},e.prototype.createReverseFormatMap=function(){var n=new Map;return this.formatMap.forEach(function(t,r,i){n.set(t,r)}),n},e.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},e}();var aA=function(e,n,t,r){function i(o){return o instanceof t?o:new t(function(c){c(o)})}return new(t||(t=Promise))(function(o,c){function h(v){try{m(r.next(v))}catch(b){c(b)}}function g(v){try{m(r.throw(v))}catch(b){c(b)}}function m(v){v.done?o(v.value):i(v.value).then(h,g)}m((r=r.apply(e,n||[])).next())})},lA=function(e,n){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,c;return c={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function h(m){return function(v){return g([m,v])}}function g(m){if(r)throw new TypeError("Generator is already executing.");for(;c&&(c=0,m[0]&&(t=0)),t;)try{if(r=1,i&&(o=m[0]&2?i.return:m[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,m[1])).done)return o;switch(i=0,o&&(m=[m[0]&2,o.value]),m[0]){case 0:case 1:o=m;break;case 4:return t.label++,{value:m[1],done:!1};case 5:t.label++,i=m[1],m=[0];continue;case 7:m=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(m[0]===6||m[0]===2)){t=0;continue}if(m[0]===3&&(!o||m[1]>o[0]&&m[1]<o[3])){t.label=m[1];break}if(m[0]===6&&t.label<o[1]){t.label=o[1],o=m;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(m);break}o[2]&&t.ops.pop(),t.trys.pop();continue}m=n.call(e,t)}catch(v){m=[6,v],i=0}finally{r=o=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},cA=function(){function e(n,t,r,i){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=r,t&&__.isSupported()?(this.primaryDecoder=new __(n,r,i),this.secondaryDecoder=new C_(n,r,i)):this.primaryDecoder=new C_(n,r,i)}return e.prototype.decodeAsync=function(n){return aA(this,void 0,void 0,function(){var t;return lA(this,function(r){switch(r.label){case 0:t=performance.now(),r.label=1;case 1:return r.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(n)];case 2:return[2,r.sent()];case 3:return this.possiblyLogPerformance(t),[7];case 4:return[2]}})})},e.prototype.decodeRobustlyAsync=function(n){return aA(this,void 0,void 0,function(){var t,r;return lA(this,function(i){switch(i.label){case 0:t=performance.now(),i.label=1;case 1:return i.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(n)];case 2:return[2,i.sent()];case 3:if(r=i.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(n)];throw r;case 4:return this.possiblyLogPerformance(t),[7];case 5:return[2]}})})},e.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},e.prototype.possiblyLogPerformance=function(n){if(this.verbose){var t=performance.now()-n;this.executionResults.push(t),this.executions++,this.possiblyFlushPerformanceReport()}},e.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var n=0,t=0,r=this.executionResults;t<r.length;t++){var i=r[t];n+=i}var o=n/this.executionResults.length;console.log("".concat(o," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},e}();var w_=function(){var e=function(n,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(n,t);function r(){this.constructor=n}n.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Cp=function(e,n,t,r){function i(o){return o instanceof t?o:new t(function(c){c(o)})}return new(t||(t=Promise))(function(o,c){function h(v){try{m(r.next(v))}catch(b){c(b)}}function g(v){try{m(r.throw(v))}catch(b){c(b)}}function m(v){v.done?o(v.value):i(v.value).then(h,g)}m((r=r.apply(e,n||[])).next())})},_p=function(e,n){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,c;return c={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function h(m){return function(v){return g([m,v])}}function g(m){if(r)throw new TypeError("Generator is already executing.");for(;c&&(c=0,m[0]&&(t=0)),t;)try{if(r=1,i&&(o=m[0]&2?i.return:m[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,m[1])).done)return o;switch(i=0,o&&(m=[m[0]&2,o.value]),m[0]){case 0:case 1:o=m;break;case 4:return t.label++,{value:m[1],done:!1};case 5:t.label++,i=m[1],m=[0];continue;case 7:m=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(m[0]===6||m[0]===2)){t=0;continue}if(m[0]===3&&(!o||m[1]>o[0]&&m[1]<o[3])){t.label=m[1];break}if(m[0]===6&&t.label<o[1]){t.label=o[1],o=m;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(m);break}o[2]&&t.ops.pop(),t.trys.pop();continue}m=n.call(e,t)}catch(v){m=[6,v],i=0}finally{r=o=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},uA=function(){function e(n,t){this.name=n,this.track=t}return e.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},e.prototype.apply=function(n){var t={};t[this.name]=n;var r={advanced:[t]};return this.track.applyConstraints(r)},e.prototype.value=function(){var n=this.track.getSettings();if(this.name in n){var t=n[this.name];return t}return null},e}(),Q9=function(e){w_(n,e);function n(t,r){return e.call(this,t,r)||this}return n.prototype.min=function(){return this.getCapabilities().min},n.prototype.max=function(){return this.getCapabilities().max},n.prototype.step=function(){return this.getCapabilities().step},n.prototype.apply=function(t){var r={};r[this.name]=t;var i={advanced:[r]};return this.track.applyConstraints(i)},n.prototype.getCapabilities=function(){this.failIfNotSupported();var t=this.track.getCapabilities(),r=t[this.name];return{min:r.min,max:r.max,step:r.step}},n.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},n}(uA),K9=function(e){w_(n,e);function n(t){return e.call(this,"zoom",t)||this}return n}(Q9),J9=function(e){w_(n,e);function n(t){return e.call(this,"torch",t)||this}return n}(uA),eU=function(){function e(n){this.track=n}return e.prototype.zoomFeature=function(){return new K9(this.track)},e.prototype.torchFeature=function(){return new J9(this.track)},e}(),tU=function(){function e(n,t,r){this.isClosed=!1,this.parentElement=n,this.mediaStream=t,this.callbacks=r,this.surface=this.createVideoElement(this.parentElement.clientWidth),n.append(this.surface)}return e.prototype.createVideoElement=function(n){var t=document.createElement("video");return t.style.width="".concat(n,"px"),t.style.display="block",t.muted=!0,t.setAttribute("muted","true"),t.playsInline=!0,t},e.prototype.setupSurface=function(){var n=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var t=function(){var r=n.surface.clientWidth,i=n.surface.clientHeight;n.callbacks.onRenderSurfaceReady(r,i),n.surface.removeEventListener("playing",t)};this.surface.addEventListener("playing",t),this.surface.srcObject=this.mediaStream,this.surface.play()},e.create=function(n,t,r,i){return Cp(this,void 0,void 0,function(){var o,c;return _p(this,function(h){switch(h.label){case 0:return o=new e(n,t,i),r.aspectRatio?(c={aspectRatio:r.aspectRatio},[4,o.getFirstTrackOrFail().applyConstraints(c)]):[3,2];case 1:h.sent(),h.label=2;case 2:return o.setupSurface(),[2,o]}})})},e.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},e.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},e.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},e.prototype.resume=function(n){this.failIfClosed();var t=this,r=function(){setTimeout(n,200),t.surface.removeEventListener("playing",r)};this.surface.addEventListener("playing",r),this.surface.play()},e.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},e.prototype.getSurface=function(){return this.failIfClosed(),this.surface},e.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},e.prototype.applyVideoConstraints=function(n){return Cp(this,void 0,void 0,function(){return _p(this,function(t){if("aspectRatio"in n)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(n)]})})},e.prototype.close=function(){if(this.isClosed)return Promise.resolve();var n=this;return new Promise(function(t,r){var i=n.mediaStream.getVideoTracks(),o=i.length,c=0;n.mediaStream.getVideoTracks().forEach(function(h){n.mediaStream.removeTrack(h),h.stop(),++c,c>=o&&(n.isClosed=!0,n.parentElement.removeChild(n.surface),t())})})},e.prototype.getCapabilities=function(){return new eU(this.getFirstTrackOrFail())},e}(),dA=function(){function e(n){this.mediaStream=n}return e.prototype.render=function(n,t,r){return Cp(this,void 0,void 0,function(){return _p(this,function(i){return[2,tU.create(n,this.mediaStream,t,r)]})})},e.create=function(n){return Cp(this,void 0,void 0,function(){var t,r;return _p(this,function(i){switch(i.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return t={audio:!1,video:n},[4,navigator.mediaDevices.getUserMedia(t)];case 1:return r=i.sent(),[2,new e(r)]}})})},e}();var fA=function(e,n,t,r){function i(o){return o instanceof t?o:new t(function(c){c(o)})}return new(t||(t=Promise))(function(o,c){function h(v){try{m(r.next(v))}catch(b){c(b)}}function g(v){try{m(r.throw(v))}catch(b){c(b)}}function m(v){v.done?o(v.value):i(v.value).then(h,g)}m((r=r.apply(e,n||[])).next())})},hA=function(e,n){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,c;return c={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function h(m){return function(v){return g([m,v])}}function g(m){if(r)throw new TypeError("Generator is already executing.");for(;c&&(c=0,m[0]&&(t=0)),t;)try{if(r=1,i&&(o=m[0]&2?i.return:m[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,m[1])).done)return o;switch(i=0,o&&(m=[m[0]&2,o.value]),m[0]){case 0:case 1:o=m;break;case 4:return t.label++,{value:m[1],done:!1};case 5:t.label++,i=m[1],m=[0];continue;case 7:m=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(m[0]===6||m[0]===2)){t=0;continue}if(m[0]===3&&(!o||m[1]>o[0]&&m[1]<o[3])){t.label=m[1];break}if(m[0]===6&&t.label<o[1]){t.label=o[1],o=m;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(m);break}o[2]&&t.ops.pop(),t.trys.pop();continue}m=n.call(e,t)}catch(v){m=[6,v],i=0}finally{r=o=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},pA=function(){function e(){}return e.failIfNotSupported=function(){return fA(this,void 0,void 0,function(){return hA(this,function(n){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new e]})})},e.prototype.create=function(n){return fA(this,void 0,void 0,function(){return hA(this,function(t){return[2,dA.create(n)]})})},e}();var nU=function(e,n,t,r){function i(o){return o instanceof t?o:new t(function(c){c(o)})}return new(t||(t=Promise))(function(o,c){function h(v){try{m(r.next(v))}catch(b){c(b)}}function g(v){try{m(r.throw(v))}catch(b){c(b)}}function m(v){v.done?o(v.value):i(v.value).then(h,g)}m((r=r.apply(e,n||[])).next())})},rU=function(e,n){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,c;return c={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function h(m){return function(v){return g([m,v])}}function g(m){if(r)throw new TypeError("Generator is already executing.");for(;c&&(c=0,m[0]&&(t=0)),t;)try{if(r=1,i&&(o=m[0]&2?i.return:m[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,m[1])).done)return o;switch(i=0,o&&(m=[m[0]&2,o.value]),m[0]){case 0:case 1:o=m;break;case 4:return t.label++,{value:m[1],done:!1};case 5:t.label++,i=m[1],m=[0];continue;case 7:m=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(m[0]===6||m[0]===2)){t=0;continue}if(m[0]===3&&(!o||m[1]>o[0]&&m[1]<o[3])){t.label=m[1];break}if(m[0]===6&&t.label<o[1]){t.label=o[1],o=m;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(m);break}o[2]&&t.ops.pop(),t.trys.pop();continue}m=n.call(e,t)}catch(v){m=[6,v],i=0}finally{r=o=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},gA=function(){function e(){}return e.retrieve=function(){if(navigator.mediaDevices)return e.getCamerasFromMediaDevices();var n=MediaStreamTrack;return MediaStreamTrack&&n.getSources?e.getCamerasFromMediaStreamTrack():e.rejectWithError()},e.rejectWithError=function(){var n=Uo.unableToQuerySupportedDevices();return e.isHttpsOrLocalhost()||(n=Uo.insecureContextCameraQueryError()),Promise.reject(n)},e.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var n=location.host.split(":")[0];return n==="127.0.0.1"||n==="localhost"},e.getCamerasFromMediaDevices=function(){return nU(this,void 0,void 0,function(){var n,t,r,i,o,c,h;return rU(this,function(g){switch(g.label){case 0:return n=function(m){for(var v=m.getVideoTracks(),b=0,I=v;b<I.length;b++){var M=I[b];M.enabled=!1,M.stop(),m.removeTrack(M)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return t=g.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(r=g.sent(),i=[],o=0,c=r;o<c.length;o++)h=c[o],h.kind==="videoinput"&&i.push({id:h.deviceId,label:h.label});return n(t),[2,i]}})})},e.getCamerasFromMediaStreamTrack=function(){return new Promise(function(n,t){var r=function(o){for(var c=[],h=0,g=o;h<g.length;h++){var m=g[h];m.kind==="video"&&c.push({id:m.id,label:m.label})}n(c)},i=MediaStreamTrack;i.getSources(r)})},e}();var Ft=function(e){return e[e.UNKNOWN=0]="UNKNOWN",e[e.NOT_STARTED=1]="NOT_STARTED",e[e.SCANNING=2]="SCANNING",e[e.PAUSED=3]="PAUSED",e}(Ft||{}),iU=function(){function e(){this.state=Ft.NOT_STARTED,this.onGoingTransactionNewState=Ft.UNKNOWN}return e.prototype.directTransition=function(n){this.failIfTransitionOngoing(),this.validateTransition(n),this.state=n},e.prototype.startTransition=function(n){return this.failIfTransitionOngoing(),this.validateTransition(n),this.onGoingTransactionNewState=n,this},e.prototype.execute=function(){if(this.onGoingTransactionNewState===Ft.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var n=this.onGoingTransactionNewState;this.onGoingTransactionNewState=Ft.UNKNOWN,this.directTransition(n)},e.prototype.cancel=function(){if(this.onGoingTransactionNewState===Ft.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=Ft.UNKNOWN},e.prototype.getState=function(){return this.state},e.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==Ft.UNKNOWN)throw"Cannot transition to a new state, already under transition"},e.prototype.validateTransition=function(n){switch(this.state){case Ft.UNKNOWN:throw"Transition from unknown is not allowed";case Ft.NOT_STARTED:this.failIfNewStateIs(n,[Ft.PAUSED]);break;case Ft.SCANNING:break;case Ft.PAUSED:break}},e.prototype.failIfNewStateIs=function(n,t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(n===o)throw"Cannot transition from ".concat(this.state," to ").concat(n)}},e}(),oU=function(){function e(n){this.stateManager=n}return e.prototype.startTransition=function(n){return this.stateManager.startTransition(n)},e.prototype.directTransition=function(n){this.stateManager.directTransition(n)},e.prototype.getState=function(){return this.stateManager.getState()},e.prototype.canScanFile=function(){return this.stateManager.getState()===Ft.NOT_STARTED},e.prototype.isScanning=function(){return this.stateManager.getState()!==Ft.NOT_STARTED},e.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===Ft.SCANNING},e.prototype.isPaused=function(){return this.stateManager.getState()===Ft.PAUSED},e}();var mA=function(){function e(){}return e.create=function(){return new oU(new iU)},e}();var sU=function(){var e=function(n,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(n,t);function r(){this.constructor=n}n.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),mr=function(e){sU(n,e);function n(){return e!==null&&e.apply(this,arguments)||this}return n.DEFAULT_WIDTH=300,n.DEFAULT_WIDTH_OFFSET=2,n.FILE_SCAN_MIN_HEIGHT=300,n.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,n.MIN_QR_BOX_SIZE=50,n.SHADED_LEFT=1,n.SHADED_RIGHT=2,n.SHADED_TOP=3,n.SHADED_BOTTOM=4,n.SHADED_REGION_ELEMENT_ID="qr-shaded-region",n.VERBOSE=!1,n.BORDER_SHADER_DEFAULT_COLOR="#ffffff",n.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",n}(rr),aU=function(){function e(n,t){this.logger=t,this.fps=mr.SCAN_DEFAULT_FPS,n?(n.fps&&(this.fps=n.fps),this.disableFlip=n.disableFlip===!0,this.qrbox=n.qrbox,this.aspectRatio=n.aspectRatio,this.videoConstraints=n.videoConstraints):this.disableFlip=mr.DEFAULT_DISABLE_FLIP}return e.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?y_.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},e.prototype.isShadedBoxEnabled=function(){return!Or(this.qrbox)},e.create=function(n,t){return new e(n,t)},e}(),wp=function(){function e(n,t){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(n))throw"HTML Element with id=".concat(n," not found");this.elementId=n,this.verbose=!1;var r,i;typeof t=="boolean"?this.verbose=t===!0:t&&(i=t,this.verbose=i.verbose===!0,r=i.experimentalFeatures),this.logger=new mp(this.verbose),this.qrcode=new cA(this.getSupportedFormats(t),this.getUseBarCodeDetectorIfSupported(i),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=mA.create()}return e.prototype.start=function(n,t,r,i){var o=this;if(!n)throw"cameraIdOrConfig is required";if(!r||typeof r!="function")throw"qrCodeSuccessCallback is required and should be a function.";var c;i?c=i:c=this.verbose?this.logger.log:function(){};var h=aU.create(t,this.logger);this.clearElement();var g=!1;h.videoConstraints&&(h.isMediaStreamConstraintsValid()?g=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var m=g,v=document.getElementById(this.elementId),b=v.clientWidth?v.clientWidth:mr.DEFAULT_WIDTH;v.style.position="relative",this.shouldScan=!0,this.element=v;var I=this,M=this.stateManagerProxy.startTransition(Ft.SCANNING);return new Promise(function(R,H){var X=m?h.videoConstraints:I.createVideoConstraints(n);if(!X){M.cancel(),H("videoConstraints should be defined");return}var $={};(!m||h.aspectRatio)&&($.aspectRatio=h.aspectRatio);var ce={onRenderSurfaceReady:function(Ze,me){I.setupUi(Ze,me,h),I.isScanning=!0,I.foreverScan(h,r,c)}};pA.failIfNotSupported().then(function(Ze){Ze.create(X).then(function(me){return me.render(o.element,$,ce).then(function(W){I.renderedCamera=W,M.execute(),R(null)}).catch(function(W){M.cancel(),H(W)})}).catch(function(me){M.cancel(),H(Uo.errorGettingUserMedia(me))})}).catch(function(Ze){M.cancel(),H(Uo.cameraStreamingNotSupported())})})},e.prototype.pause=function(n){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(Ft.PAUSED),this.showPausedState(),(Or(n)||n!==!0)&&(n=!1),n&&this.renderedCamera&&this.renderedCamera.pause()},e.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var n=this,t=function(){n.stateManagerProxy.directTransition(Ft.SCANNING),n.hidePausedState()};if(!this.renderedCamera.isPaused()){t();return}this.renderedCamera.resume(function(){t()})},e.prototype.getState=function(){return this.stateManagerProxy.getState()},e.prototype.stop=function(){var n=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var t=this.stateManagerProxy.startTransition(Ft.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var r=function(){if(n.element){var o=document.getElementById(mr.SHADED_REGION_ELEMENT_ID);o&&n.element.removeChild(o)}},i=this;return this.renderedCamera.close().then(function(){return i.renderedCamera=null,i.element&&(i.element.removeChild(i.canvasElement),i.canvasElement=null),r(),i.qrRegion&&(i.qrRegion=null),i.context&&(i.context=null),t.execute(),i.hidePausedState(),i.isScanning=!1,Promise.resolve()})},e.prototype.scanFile=function(n,t){return this.scanFileV2(n,t).then(function(r){return r.decodedText})},e.prototype.scanFileV2=function(n,t){var r=this;if(!n||!(n instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(Or(t)&&(t=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(i,o){r.possiblyCloseLastScanImageFile(),r.clearElement(),r.lastScanImageFile=URL.createObjectURL(n);var c=new Image;c.onload=function(){var h=c.width,g=c.height,m=document.getElementById(r.elementId),v=m.clientWidth?m.clientWidth:mr.DEFAULT_WIDTH,b=Math.max(m.clientHeight?m.clientHeight:g,mr.FILE_SCAN_MIN_HEIGHT),I=r.computeCanvasDrawConfig(h,g,v,b);if(t){var M=r.createCanvasElement(v,b,"qr-canvas-visible");M.style.display="inline-block",m.appendChild(M);var R=M.getContext("2d");if(!R)throw"Unable to get 2d context from canvas";R.canvas.width=v,R.canvas.height=b,R.drawImage(c,0,0,h,g,I.x,I.y,I.width,I.height)}var H=mr.FILE_SCAN_HIDDEN_CANVAS_PADDING,X=Math.max(c.width,I.width),$=Math.max(c.height,I.height),ce=X+2*H,Ze=$+2*H,me=r.createCanvasElement(ce,Ze);m.appendChild(me);var W=me.getContext("2d");if(!W)throw"Unable to get 2d context from canvas";W.canvas.width=ce,W.canvas.height=Ze,W.drawImage(c,0,0,h,g,H,H,X,$);try{r.qrcode.decodeRobustlyAsync(me).then(function(pe){i(g_.createFromQrcodeResult(pe))}).catch(o)}catch(pe){o("QR code parse error, error = ".concat(pe))}},c.onerror=o,c.onabort=o,c.onstalled=o,c.onsuspend=o,c.src=URL.createObjectURL(n)})},e.prototype.clear=function(){this.clearElement()},e.getCameras=function(){return gA.retrieve()},e.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},e.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},e.prototype.applyVideoConstraints=function(n){if(n){if(!y_.isMediaStreamConstraintsValid(n,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(n)},e.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},e.prototype.getSupportedFormats=function(n){var t=[ae.QR_CODE,ae.AZTEC,ae.CODABAR,ae.CODE_39,ae.CODE_93,ae.CODE_128,ae.DATA_MATRIX,ae.MAXICODE,ae.ITF,ae.EAN_13,ae.EAN_8,ae.PDF_417,ae.RSS_14,ae.RSS_EXPANDED,ae.UPC_A,ae.UPC_E,ae.UPC_EAN_EXTENSION];if(!n||typeof n=="boolean"||!n.formatsToSupport)return t;if(!Array.isArray(n.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(n.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var r=[],i=0,o=n.formatsToSupport;i<o.length;i++){var c=o[i];nA(c)?r.push(c):this.logger.warn("Invalid format: ".concat(c," passed in config, ignoring."))}if(r.length===0)throw"None of formatsToSupport match supported values.";return r},e.prototype.getUseBarCodeDetectorIfSupported=function(n){if(Or(n))return!0;if(!Or(n.useBarCodeDetectorIfSupported))return n.useBarCodeDetectorIfSupported!==!1;if(Or(n.experimentalFeatures))return!0;var t=n.experimentalFeatures;return Or(t.useBarCodeDetectorIfSupported)?!0:t.useBarCodeDetectorIfSupported!==!1},e.prototype.validateQrboxSize=function(n,t,r){var i=this,o=r.qrbox;this.validateQrboxConfig(o);var c=this.toQrdimensions(n,t,o),h=function(m){if(m<mr.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(mr.MIN_QR_BOX_SIZE,"px.")},g=function(m){return m>n&&(i.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),m=n),m};h(c.width),h(c.height),c.width=g(c.width)},e.prototype.validateQrboxConfig=function(n){if(typeof n!="number"&&typeof n!="function"&&(n.width===void 0||n.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},e.prototype.toQrdimensions=function(n,t,r){if(typeof r=="number")return{width:r,height:r};if(typeof r=="function")try{return r(n,t)}catch(i){throw new Error("qrbox config was passed as a function but it failed with unknown error"+i)}return r},e.prototype.setupUi=function(n,t,r){r.isShadedBoxEnabled()&&this.validateQrboxSize(n,t,r);var i=Or(r.qrbox)?{width:n,height:t}:r.qrbox;this.validateQrboxConfig(i);var o=this.toQrdimensions(n,t,i);o.height>t&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var c=r.isShadedBoxEnabled()&&o.height<=t,h={x:0,y:0,width:n,height:t},g=c?this.getShadedRegionBounds(n,t,o):h,m=this.createCanvasElement(g.width,g.height),v={willReadFrequently:!0},b=m.getContext("2d",v);b.canvas.width=g.width,b.canvas.height=g.height,this.element.append(m),c&&this.possiblyInsertShadingElement(this.element,n,t,o),this.createScannerPausedUiElement(this.element),this.qrRegion=g,this.context=b,this.canvasElement=m},e.prototype.createScannerPausedUiElement=function(n){var t=document.createElement("div");t.innerText=Uo.scannerPaused(),t.style.display="none",t.style.position="absolute",t.style.top="0px",t.style.zIndex="1",t.style.background="rgba(9, 9, 9, 0.46)",t.style.color="#FFECEC",t.style.textAlign="center",t.style.width="100%",n.appendChild(t),this.scannerPausedUiElement=t},e.prototype.scanContext=function(n,t){var r=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(i){return n(i.text,g_.createFromQrcodeResult(i)),r.possiblyUpdateShaders(!0),!0}).catch(function(i){r.possiblyUpdateShaders(!1);var o=Uo.codeParseError(i);return t(o,gp.createFrom(o)),!1})},e.prototype.foreverScan=function(n,t,r){var i=this;if(this.shouldScan&&this.renderedCamera){var o=this.renderedCamera.getSurface(),c=o.videoWidth/o.clientWidth,h=o.videoHeight/o.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var g=this.qrRegion.width*c,m=this.qrRegion.height*h,v=this.qrRegion.x*c,b=this.qrRegion.y*h;this.context.drawImage(o,v,b,g,m,0,0,this.qrRegion.width,this.qrRegion.height);var I=function(){i.foreverScanTimeout=setTimeout(function(){i.foreverScan(n,t,r)},i.getTimeoutFps(n.fps))};this.scanContext(t,r).then(function(M){!M&&n.disableFlip!==!0?(i.context.translate(i.context.canvas.width,0),i.context.scale(-1,1),i.scanContext(t,r).finally(function(){I()})):I()}).catch(function(M){i.logger.logError("Error happend while scanning context",M),I()})}},e.prototype.createVideoConstraints=function(n){if(typeof n=="string")return{deviceId:{exact:n}};if(typeof n=="object"){var t="facingMode",r="deviceId",i={user:!0,environment:!0},o="exact",c=function(R){if(R in i)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(R,"'")},h=Object.keys(n);if(h.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(h.length," keys");var g=Object.keys(n)[0];if(g!==t&&g!==r)throw"Only '".concat(t,"' and '").concat(r,"' ")+" are supported for 'cameraIdOrConfig'";if(g===t){var m=n.facingMode;if(typeof m=="string"){if(c(m))return{facingMode:m}}else if(typeof m=="object")if(o in m){if(c(m["".concat(o)]))return{facingMode:{exact:m["".concat(o)]}}}else throw"'facingMode' should be string or object with"+" ".concat(o," as key.");else{var v=typeof m;throw"Invalid type of 'facingMode' = ".concat(v)}}else{var b=n.deviceId;if(typeof b=="string")return{deviceId:b};if(typeof b=="object"){if(o in b)return{deviceId:{exact:b["".concat(o)]}};throw"'deviceId' should be string or object with"+" ".concat(o," as key.")}else{var I=typeof b;throw"Invalid type of 'deviceId' = ".concat(I)}}}var M=typeof n;throw"Invalid type of 'cameraIdOrConfig' = ".concat(M)},e.prototype.computeCanvasDrawConfig=function(n,t,r,i){if(n<=r&&t<=i){var o=(r-n)/2,c=(i-t)/2;return{x:o,y:c,width:n,height:t}}else{var h=n,g=t;return n>r&&(t=r/n*t,n=r),t>i&&(n=i/t*n,t=i),this.logger.log("Image downsampled from "+"".concat(h,"X").concat(g)+" to ".concat(n,"X").concat(t,".")),this.computeCanvasDrawConfig(n,t,r,i)}},e.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var n=document.getElementById(this.elementId);n&&(n.innerHTML="")},e.prototype.possiblyUpdateShaders=function(n){this.qrMatch!==n&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(t){t.style.backgroundColor=n?mr.BORDER_SHADER_MATCH_COLOR:mr.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=n)},e.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},e.prototype.createCanvasElement=function(n,t,r){var i=n,o=t,c=document.createElement("canvas");return c.style.width="".concat(i,"px"),c.style.height="".concat(o,"px"),c.style.display="none",c.id=Or(r)?"qr-canvas":r,c},e.prototype.getShadedRegionBounds=function(n,t,r){if(r.width>n||r.height>t)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(n-r.width)/2,y:(t-r.height)/2,width:r.width,height:r.height}},e.prototype.possiblyInsertShadingElement=function(n,t,r,i){if(!(t-i.width<1||r-i.height<1)){var o=document.createElement("div");o.style.position="absolute";var c=(t-i.width)/2,h=(r-i.height)/2;if(o.style.borderLeft="".concat(c,"px solid rgba(0, 0, 0, 0.48)"),o.style.borderRight="".concat(c,"px solid rgba(0, 0, 0, 0.48)"),o.style.borderTop="".concat(h,"px solid rgba(0, 0, 0, 0.48)"),o.style.borderBottom="".concat(h,"px solid rgba(0, 0, 0, 0.48)"),o.style.boxSizing="border-box",o.style.top="0px",o.style.bottom="0px",o.style.left="0px",o.style.right="0px",o.id="".concat(mr.SHADED_REGION_ELEMENT_ID),t-i.width<11||r-i.height<11)this.hasBorderShaders=!1;else{var g=5,m=40;this.insertShaderBorders(o,m,g,-g,null,0,!0),this.insertShaderBorders(o,m,g,-g,null,0,!1),this.insertShaderBorders(o,m,g,null,-g,0,!0),this.insertShaderBorders(o,m,g,null,-g,0,!1),this.insertShaderBorders(o,g,m+g,-g,null,-g,!0),this.insertShaderBorders(o,g,m+g,null,-g,-g,!0),this.insertShaderBorders(o,g,m+g,-g,null,-g,!1),this.insertShaderBorders(o,g,m+g,null,-g,-g,!1),this.hasBorderShaders=!0}n.append(o)}},e.prototype.insertShaderBorders=function(n,t,r,i,o,c,h){var g=document.createElement("div");g.style.position="absolute",g.style.backgroundColor=mr.BORDER_SHADER_DEFAULT_COLOR,g.style.width="".concat(t,"px"),g.style.height="".concat(r,"px"),i!==null&&(g.style.top="".concat(i,"px")),o!==null&&(g.style.bottom="".concat(o,"px")),h?g.style.left="".concat(c,"px"):g.style.right="".concat(c,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(g),n.appendChild(g)},e.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},e.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},e.prototype.getTimeoutFps=function(n){return 1e3/n},e}();var v_="data:image/svg+xml;base64,",yA=v_+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",CA=v_+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",b_=v_+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",_A="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=";var wA=function(){function e(){}return e.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},e}(),vA=function(){function e(){this.data=wA.createDefault();var n=localStorage.getItem(e.LOCAL_STORAGE_KEY);n?this.data=JSON.parse(n):this.reset()}return e.prototype.hasCameraPermissions=function(){return this.data.hasPermission},e.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},e.prototype.setHasPermission=function(n){this.data.hasPermission=n,this.flush()},e.prototype.setLastUsedCameraId=function(n){this.data.lastUsedCameraId=n,this.flush()},e.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},e.prototype.reset=function(){this.data=wA.createDefault(),this.flush()},e.prototype.flush=function(){localStorage.setItem(e.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},e.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",e}();var lU=function(){function e(){this.infoDiv=document.createElement("div")}return e.prototype.renderInto=function(n){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=m_.poweredBy();var t=document.createElement("a");t.innerText="ScanApp",t.href="https://scanapp.org",t.target="new",t.style.color="white",this.infoDiv.appendChild(t);var r=document.createElement("br"),i=document.createElement("br");this.infoDiv.appendChild(r),this.infoDiv.appendChild(i);var o=document.createElement("a");o.innerText=m_.reportIssues(),o.href="https://github.com/mebjas/html5-qrcode/issues",o.target="new",o.style.color="white",this.infoDiv.appendChild(o),n.appendChild(this.infoDiv)},e.prototype.show=function(){this.infoDiv.style.display="block"},e.prototype.hide=function(){this.infoDiv.style.display="none"},e}(),cU=function(){function e(n,t){this.isShowingInfoIcon=!0,this.onTapIn=n,this.onTapOut=t,this.infoIcon=document.createElement("img")}return e.prototype.renderInto=function(n){var t=this;this.infoIcon.alt="Info icon",this.infoIcon.src=b_,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(r){return t.onHoverIn()},this.infoIcon.onmouseout=function(r){return t.onHoverOut()},this.infoIcon.onclick=function(r){return t.onClick()},n.appendChild(this.infoIcon)},e.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},e.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},e.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src=_A,this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=b_,this.infoIcon.style.opacity="0.6")},e}(),bA=function(){function e(){var n=this;this.infoDiv=new lU,this.infoIcon=new cU(function(){n.infoDiv.show()},function(){n.infoDiv.hide()})}return e.prototype.renderInto=function(n){this.infoDiv.renderInto(n),this.infoIcon.renderInto(n)},e}();var uU=function(e,n,t,r){function i(o){return o instanceof t?o:new t(function(c){c(o)})}return new(t||(t=Promise))(function(o,c){function h(v){try{m(r.next(v))}catch(b){c(b)}}function g(v){try{m(r.throw(v))}catch(b){c(b)}}function m(v){v.done?o(v.value):i(v.value).then(h,g)}m((r=r.apply(e,n||[])).next())})},dU=function(e,n){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,c;return c={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function h(m){return function(v){return g([m,v])}}function g(m){if(r)throw new TypeError("Generator is already executing.");for(;c&&(c=0,m[0]&&(t=0)),t;)try{if(r=1,i&&(o=m[0]&2?i.return:m[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,m[1])).done)return o;switch(i=0,o&&(m=[m[0]&2,o.value]),m[0]){case 0:case 1:o=m;break;case 4:return t.label++,{value:m[1],done:!1};case 5:t.label++,i=m[1],m=[0];continue;case 7:m=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(m[0]===6||m[0]===2)){t=0;continue}if(m[0]===3&&(!o||m[1]>o[0]&&m[1]<o[3])){t.label=m[1];break}if(m[0]===6&&t.label<o[1]){t.label=o[1],o=m;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(m);break}o[2]&&t.ops.pop(),t.trys.pop();continue}m=n.call(e,t)}catch(v){m=[6,v],i=0}finally{r=o=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},x_=function(){function e(){}return e.hasPermissions=function(){return uU(this,void 0,void 0,function(){var n,t,r,i;return dU(this,function(o){switch(o.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(n=o.sent(),t=0,r=n;t<r.length;t++)if(i=r[t],i.kind==="videoinput"&&i.label)return[2,!0];return[2,!1]}})})},e}();var Zi=function(){function e(n){this.supportedScanTypes=this.validateAndReturnScanTypes(n)}return e.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},e.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},e.prototype.isCameraScanRequired=function(){for(var n=0,t=this.supportedScanTypes;n<t.length;n++){var r=t[n];if(e.isCameraScanType(r))return!0}return!1},e.isCameraScanType=function(n){return n===vi.SCAN_TYPE_CAMERA},e.isFileScanType=function(n){return n===vi.SCAN_TYPE_FILE},e.prototype.validateAndReturnScanTypes=function(n){if(!n||n.length===0)return rr.DEFAULT_SUPPORTED_SCAN_TYPE;var t=rr.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(n.length>t)throw"Max ".concat(t," values expected for ")+"supportedScanTypes";for(var r=0,i=n;r<i.length;r++){var o=i[r];if(!rr.DEFAULT_SUPPORTED_SCAN_TYPE.includes(o))throw"Unsupported scan type ".concat(o)}return n},e}();var wn=function(){function e(){}return e.ALL_ELEMENT_CLASS="html5-qrcode-element",e.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",e.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",e.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",e.TORCH_BUTTON_ID="html5-qrcode-button-torch",e.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",e.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",e.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",e.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",e.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",e.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",e}();var ir=function(){function e(){}return e.createElement=function(n,t){var r=document.createElement(n);return r.id=t,r.classList.add(wn.ALL_ELEMENT_CLASS),n==="button"&&r.setAttribute("type","button"),r},e}();var EA=function(e,n,t,r){function i(o){return o instanceof t?o:new t(function(c){c(o)})}return new(t||(t=Promise))(function(o,c){function h(v){try{m(r.next(v))}catch(b){c(b)}}function g(v){try{m(r.throw(v))}catch(b){c(b)}}function m(v){v.done?o(v.value):i(v.value).then(h,g)}m((r=r.apply(e,n||[])).next())})},IA=function(e,n){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,c;return c={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function h(m){return function(v){return g([m,v])}}function g(m){if(r)throw new TypeError("Generator is already executing.");for(;c&&(c=0,m[0]&&(t=0)),t;)try{if(r=1,i&&(o=m[0]&2?i.return:m[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,m[1])).done)return o;switch(i=0,o&&(m=[m[0]&2,o.value]),m[0]){case 0:case 1:o=m;break;case 4:return t.label++,{value:m[1],done:!1};case 5:t.label++,i=m[1],m=[0];continue;case 7:m=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(m[0]===6||m[0]===2)){t=0;continue}if(m[0]===3&&(!o||m[1]>o[0]&&m[1]<o[3])){t.label=m[1];break}if(m[0]===6&&t.label<o[1]){t.label=o[1],o=m;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(m);break}o[2]&&t.ops.pop(),t.trys.pop();continue}m=n.call(e,t)}catch(v){m=[6,v],i=0}finally{r=o=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},xA=function(){function e(n,t,r){this.isTorchOn=!1,this.torchCapability=n,this.buttonController=t,this.onTorchActionFailureCallback=r}return e.prototype.isTorchEnabled=function(){return this.isTorchOn},e.prototype.flipState=function(){return EA(this,void 0,void 0,function(){var n,t;return IA(this,function(r){switch(r.label){case 0:this.buttonController.disable(),n=!this.isTorchOn,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.torchCapability.apply(n)];case 2:return r.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),n),[3,4];case 3:return t=r.sent(),this.propagateFailure(n,t),this.buttonController.enable(),[3,4];case 4:return[2]}})})},e.prototype.updateUiBasedOnLatestSettings=function(n,t){n===t?(this.buttonController.setText(t?et.torchOffButton():et.torchOnButton()),this.isTorchOn=t):this.propagateFailure(t),this.buttonController.enable()},e.prototype.propagateFailure=function(n,t){var r=n?et.torchOnFailedMessage():et.torchOffFailedMessage();t&&(r+="; Error = "+t),this.onTorchActionFailureCallback(r)},e.prototype.reset=function(){this.isTorchOn=!1},e}(),SA=function(){function e(n,t){this.onTorchActionFailureCallback=t,this.torchButton=ir.createElement("button",wn.TORCH_BUTTON_ID),this.torchController=new xA(n,this,t)}return e.prototype.render=function(n,t){var r=this;this.torchButton.innerText=et.torchOnButton(),this.torchButton.style.display=t.display,this.torchButton.style.marginLeft=t.marginLeft;var i=this;this.torchButton.addEventListener("click",function(o){return EA(r,void 0,void 0,function(){return IA(this,function(c){switch(c.label){case 0:return[4,i.torchController.flipState()];case 1:return c.sent(),i.torchController.isTorchEnabled()?(i.torchButton.classList.remove(wn.TORCH_BUTTON_CLASS_TORCH_OFF),i.torchButton.classList.add(wn.TORCH_BUTTON_CLASS_TORCH_ON)):(i.torchButton.classList.remove(wn.TORCH_BUTTON_CLASS_TORCH_ON),i.torchButton.classList.add(wn.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}})})}),n.appendChild(this.torchButton)},e.prototype.updateTorchCapability=function(n){this.torchController=new xA(n,this,this.onTorchActionFailureCallback)},e.prototype.getTorchButton=function(){return this.torchButton},e.prototype.hide=function(){this.torchButton.style.display="none"},e.prototype.show=function(){this.torchButton.style.display="inline-block"},e.prototype.disable=function(){this.torchButton.disabled=!0},e.prototype.enable=function(){this.torchButton.disabled=!1},e.prototype.setText=function(n){this.torchButton.innerText=n},e.prototype.reset=function(){this.torchButton.innerText=et.torchOnButton(),this.torchController.reset()},e.create=function(n,t,r,i){var o=new e(t,i);return o.render(n,r),o},e}();var DA=function(){function e(n,t,r){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=t?"block":"none",n.appendChild(this.fileBasedScanRegion);var i=document.createElement("label");i.setAttribute("for",this.getFileScanInputId()),i.style.display="inline-block",this.fileBasedScanRegion.appendChild(i),this.fileSelectionButton=ir.createElement("button",wn.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",function(h){i.click()}),i.append(this.fileSelectionButton),this.fileScanInput=ir.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",i.appendChild(this.fileScanInput);var o=this;this.fileScanInput.addEventListener("change",function(h){if(!(h==null||h.target==null)){var g=h.target;if(!(g.files&&g.files.length===0)){var m=g.files,v=m[0],b=v.name;o.setImageNameToButton(b),r(v)}}});var c=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(c),this.fileBasedScanRegion.addEventListener("dragenter",function(h){o.fileBasedScanRegion.style.border=o.fileBasedScanRegionActiveBorder(),h.stopPropagation(),h.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragleave",function(h){o.fileBasedScanRegion.style.border=o.fileBasedScanRegionDefaultBorder(),h.stopPropagation(),h.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragover",function(h){o.fileBasedScanRegion.style.border=o.fileBasedScanRegionActiveBorder(),h.stopPropagation(),h.preventDefault()}),this.fileBasedScanRegion.addEventListener("drop",function(h){h.stopPropagation(),h.preventDefault(),o.fileBasedScanRegion.style.border=o.fileBasedScanRegionDefaultBorder();var g=h.dataTransfer;if(g){var m=g.files;if(!m||m.length===0)return;for(var v=!1,b=0;b<m.length;++b){var I=m.item(b);if(I){var M=/image.*/;if(I.type.match(M)){v=!0;var R=I.name;o.setImageNameToButton(R),r(I),c.innerText=et.dragAndDropMessage();break}}}v||(c.innerText=et.dragAndDropMessageOnlyImages())}})}return e.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},e.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},e.prototype.isShowing=function(){return this.fileBasedScanRegion.style.display==="block"},e.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},e.prototype.createFileBasedScanRegion=function(){var n=document.createElement("div");return n.style.textAlign="center",n.style.margin="auto",n.style.width="80%",n.style.maxWidth="600px",n.style.border=this.fileBasedScanRegionDefaultBorder(),n.style.padding="10px",n.style.marginBottom="10px",n},e.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},e.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},e.prototype.createDragAndDropMessage=function(){var n=document.createElement("div");return n.innerText=et.dragAndDropMessage(),n.style.fontWeight="400",n},e.prototype.setImageNameToButton=function(n){var t=20;if(n.length>t){var r=n.substring(0,8),i=n.length,o=n.substring(i-8,i);n="".concat(r,"....").concat(o)}var c=et.fileSelectionChooseAnother()+" - "+n;this.fileSelectionButton.innerText=c},e.prototype.setInitialValueToButton=function(){var n=et.fileSelectionChooseImage()+" - "+et.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=n},e.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},e.create=function(n,t,r){var i=new e(n,t,r);return i},e}();var MA=function(){function e(n){this.selectElement=ir.createElement("select",wn.CAMERA_SELECTION_SELECT_ID),this.cameras=n,this.options=[]}return e.prototype.render=function(n){var t=document.createElement("span");t.style.marginRight="10px";var r=this.cameras.length;if(r===0)throw new Error("No cameras found");if(r===1)t.style.display="none";else{var i=et.selectCamera();t.innerText="".concat(i," (").concat(this.cameras.length,")  ")}for(var o=1,c=0,h=this.cameras;c<h.length;c++){var g=h[c],m=g.id,v=g.label==null?m:g.label;(!v||v==="")&&(v=[et.anonymousCameraPrefix(),o++].join(" "));var b=document.createElement("option");b.value=m,b.innerText=v,this.options.push(b),this.selectElement.appendChild(b)}t.appendChild(this.selectElement),n.appendChild(t)},e.prototype.disable=function(){this.selectElement.disabled=!0},e.prototype.isDisabled=function(){return this.selectElement.disabled===!0},e.prototype.enable=function(){this.selectElement.disabled=!1},e.prototype.getValue=function(){return this.selectElement.value},e.prototype.hasValue=function(n){for(var t=0,r=this.options;t<r.length;t++){var i=r[t];if(i.value===n)return!0}return!1},e.prototype.setValue=function(n){if(!this.hasValue(n))throw new Error("".concat(n," is not present in the camera list."));this.selectElement.value=n},e.prototype.hasSingleItem=function(){return this.cameras.length===1},e.prototype.numCameras=function(){return this.cameras.length},e.create=function(n,t){var r=new e(t);return r.render(n),r},e}();var AA=function(){function e(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=ir.createElement("input",wn.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return e.prototype.render=function(n,t){this.zoomElementContainer.style.display=t?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",n.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var r=et.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(r),this.rangeText.style.marginRight="10px";var i=this;this.rangeInput.addEventListener("input",function(){return i.onValueChange()}),this.rangeInput.addEventListener("change",function(){return i.onValueChange()}),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},e.prototype.onValueChange=function(){var n=et.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(n),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},e.prototype.setValues=function(n,t,r,i){this.rangeInput.min=n.toString(),this.rangeInput.max=t.toString(),this.rangeInput.step=i.toString(),this.rangeInput.value=r.toString(),this.onValueChange()},e.prototype.show=function(){this.zoomElementContainer.style.display="block"},e.prototype.hide=function(){this.zoomElementContainer.style.display="none"},e.prototype.setOnCameraZoomValueChangeCallback=function(n){this.onChangeCallback=n},e.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},e.create=function(n,t){var r=new e;return r.render(n,t),r},e}();var Nr=function(e){return e[e.STATUS_DEFAULT=0]="STATUS_DEFAULT",e[e.STATUS_SUCCESS=1]="STATUS_SUCCESS",e[e.STATUS_WARNING=2]="STATUS_WARNING",e[e.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION",e}(Nr||{});function fU(e){return{fps:e.fps,qrbox:e.qrbox,aspectRatio:e.aspectRatio,disableFlip:e.disableFlip,videoConstraints:e.videoConstraints}}function hU(e,n){return{formatsToSupport:e.formatsToSupport,useBarCodeDetectorIfSupported:e.useBarCodeDetectorIfSupported,experimentalFeatures:e.experimentalFeatures,verbose:n}}var Cu=function(){function e(n,t,r){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=n,this.config=this.createConfig(t),this.verbose=r===!0,!document.getElementById(n))throw"HTML Element with id=".concat(n," not found");this.scanTypeSelector=new Zi(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new mp(this.verbose),this.persistedDataManager=new vA,t.rememberLastUsedCamera!==!0&&this.persistedDataManager.reset()}return e.prototype.render=function(n,t){var r=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(o,c){if(n)n(o,c);else{if(r.lastMatchFound===o)return;r.lastMatchFound=o,r.setHeaderMessage(et.lastMatch(o),Nr.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(o,c){t&&t(o,c)};var i=document.getElementById(this.elementId);if(!i)throw"HTML Element with id=".concat(this.elementId," not found");i.innerHTML="",this.createBasicLayout(i),this.html5Qrcode=new wp(this.getScanRegionId(),hU(this.config,this.verbose))},e.prototype.pause=function(n){(Or(n)||n!==!0)&&(n=!1),this.getHtml5QrcodeOrFail().pause(n)},e.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},e.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},e.prototype.clear=function(){var n=this,t=function(){var r=document.getElementById(n.elementId);r&&(r.innerHTML="",n.resetBasicLayout(r))};return this.html5Qrcode?new Promise(function(r,i){if(!n.html5Qrcode){r();return}n.html5Qrcode.isScanning?n.html5Qrcode.stop().then(function(o){if(!n.html5Qrcode){r();return}n.html5Qrcode.clear(),t(),r()}).catch(function(o){n.verbose&&n.logger.logError("Unable to stop qrcode scanner",o),i(o)}):(n.html5Qrcode.clear(),t(),r())}):Promise.resolve()},e.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},e.prototype.applyVideoConstraints=function(n){return this.getHtml5QrcodeOrFail().applyVideoConstraints(n)},e.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},e.prototype.createConfig=function(n){return n?(n.fps||(n.fps=rr.SCAN_DEFAULT_FPS),n.rememberLastUsedCamera!==!rr.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(n.rememberLastUsedCamera=rr.DEFAULT_REMEMBER_LAST_CAMERA_USED),n.supportedScanTypes||(n.supportedScanTypes=rr.DEFAULT_SUPPORTED_SCAN_TYPE),n):{fps:rr.SCAN_DEFAULT_FPS,rememberLastUsedCamera:rr.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:rr.DEFAULT_SUPPORTED_SCAN_TYPE}},e.prototype.createBasicLayout=function(n){n.style.position="relative",n.style.padding="0px",n.style.border="1px solid silver",this.createHeader(n);var t=document.createElement("div"),r=this.getScanRegionId();t.id=r,t.style.width="100%",t.style.minHeight="100px",t.style.textAlign="center",n.appendChild(t),Zi.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var i=document.createElement("div"),o=this.getDashboardId();i.id=o,i.style.width="100%",n.appendChild(i),this.setupInitialDashboard(i)},e.prototype.resetBasicLayout=function(n){n.style.border="none"},e.prototype.setupInitialDashboard=function(n){this.createSection(n),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},e.prototype.createHeader=function(n){var t=document.createElement("div");t.style.textAlign="left",t.style.margin="0px",n.appendChild(t);var r=new bA;r.renderInto(t);var i=document.createElement("div");i.id=this.getHeaderMessageContainerId(),i.style.display="none",i.style.textAlign="center",i.style.fontSize="14px",i.style.padding="2px 10px",i.style.margin="4px",i.style.borderTop="1px solid #f6f6f6",t.appendChild(i)},e.prototype.createSection=function(n){var t=document.createElement("div");t.id=this.getDashboardSectionId(),t.style.width="100%",t.style.padding="10px 0px 10px 0px",t.style.textAlign="left",n.appendChild(t)},e.prototype.createCameraListUi=function(n,t,r){var i=this;i.showHideScanTypeSwapLink(!1),i.setHeaderMessage(et.cameraPermissionRequesting());var o=function(){r||i.createPermissionButton(n,t)};wp.getCameras().then(function(c){i.persistedDataManager.setHasPermission(!0),i.showHideScanTypeSwapLink(!0),i.resetHeaderMessage(),c&&c.length>0?(n.removeChild(t),i.renderCameraSelection(c)):(i.setHeaderMessage(et.noCameraFound(),Nr.STATUS_WARNING),o())}).catch(function(c){i.persistedDataManager.setHasPermission(!1),r?r.disabled=!1:o(),i.setHeaderMessage(c,Nr.STATUS_WARNING),i.showHideScanTypeSwapLink(!0)})},e.prototype.createPermissionButton=function(n,t){var r=this,i=ir.createElement("button",this.getCameraPermissionButtonId());i.innerText=et.cameraPermissionTitle(),i.addEventListener("click",function(){i.disabled=!0,r.createCameraListUi(n,t,i)}),t.appendChild(i)},e.prototype.createPermissionsUi=function(n,t){var r=this;if(Zi.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()){x_.hasPermissions().then(function(i){i?r.createCameraListUi(n,t):(r.persistedDataManager.setHasPermission(!1),r.createPermissionButton(n,t))}).catch(function(i){r.persistedDataManager.setHasPermission(!1),r.createPermissionButton(n,t)});return}this.createPermissionButton(n,t)},e.prototype.createSectionControlPanel=function(){var n=document.getElementById(this.getDashboardSectionId()),t=document.createElement("div");n.appendChild(t);var r=document.createElement("div");r.id=this.getDashboardSectionCameraScanRegionId(),r.style.display=Zi.isCameraScanType(this.currentScanType)?"block":"none",t.appendChild(r);var i=document.createElement("div");i.style.textAlign="center",r.appendChild(i),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(r,i),this.renderFileScanUi(t)},e.prototype.renderFileScanUi=function(n){var t=Zi.isFileScanType(this.currentScanType),r=this,i=function(o){if(!r.html5Qrcode)throw"html5Qrcode not defined";Zi.isFileScanType(r.currentScanType)&&(r.setHeaderMessage(et.loadingImage()),r.html5Qrcode.scanFileV2(o,!0).then(function(c){r.resetHeaderMessage(),r.qrCodeSuccessCallback(c.decodedText,c)}).catch(function(c){r.setHeaderMessage(c,Nr.STATUS_WARNING),r.qrCodeErrorCallback(c,gp.createFrom(c))}))};this.fileSelectionUi=DA.create(n,t,i)},e.prototype.renderCameraSelection=function(n){var t=this,r=this,i=document.getElementById(this.getDashboardSectionCameraScanRegionId());i.style.textAlign="center";var o=AA.create(i,!1),c=function(H){var X=H.zoomFeature();if(X.isSupported()){o.setOnCameraZoomValueChangeCallback(function(ce){X.apply(ce)});var $=1;t.config.defaultZoomValueIfSupported&&($=t.config.defaultZoomValueIfSupported),$=iA($,X.min(),X.max()),o.setValues(X.min(),X.max(),$,X.step()),o.show()}},h=MA.create(i,n),g=document.createElement("span"),m=ir.createElement("button",wn.CAMERA_START_BUTTON_ID);m.innerText=et.scanButtonStartScanningText(),g.appendChild(m);var v=ir.createElement("button",wn.CAMERA_STOP_BUTTON_ID);v.innerText=et.scanButtonStopScanningText(),v.style.display="none",v.disabled=!0,g.appendChild(v);var b,I=function(H){if(!H.torchFeature().isSupported()){b&&b.hide();return}b?b.updateTorchCapability(H.torchFeature()):b=SA.create(g,H.torchFeature(),{display:"none",marginLeft:"5px"},function(X){r.setHeaderMessage(X,Nr.STATUS_WARNING)}),b.show()};i.appendChild(g);var M=function(H){H||(m.style.display="none"),m.innerText=et.scanButtonStartScanningText(),m.style.opacity="1",m.disabled=!1,H&&(m.style.display="inline-block")};if(m.addEventListener("click",function(H){m.innerText=et.scanButtonScanningStarting(),h.disable(),m.disabled=!0,m.style.opacity="0.5",t.scanTypeSelector.hasMoreThanOneScanType()&&r.showHideScanTypeSwapLink(!1),r.resetHeaderMessage();var X=h.getValue();r.persistedDataManager.setLastUsedCameraId(X),r.html5Qrcode.start(X,fU(r.config),r.qrCodeSuccessCallback,r.qrCodeErrorCallback).then(function($){v.disabled=!1,v.style.display="inline-block",M(!1);var ce=r.html5Qrcode.getRunningTrackCameraCapabilities();t.config.showTorchButtonIfSupported===!0&&I(ce),t.config.showZoomSliderIfSupported===!0&&c(ce)}).catch(function($){r.showHideScanTypeSwapLink(!0),h.enable(),M(!0),r.setHeaderMessage($,Nr.STATUS_WARNING)})}),h.hasSingleItem()&&m.click(),v.addEventListener("click",function(H){if(!r.html5Qrcode)throw"html5Qrcode not defined";v.disabled=!0,r.html5Qrcode.stop().then(function(X){t.scanTypeSelector.hasMoreThanOneScanType()&&r.showHideScanTypeSwapLink(!0),h.enable(),m.disabled=!1,v.style.display="none",m.style.display="inline-block",b&&(b.reset(),b.hide()),o.removeOnCameraZoomValueChangeCallback(),o.hide(),r.insertCameraScanImageToScanRegion()}).catch(function(X){v.disabled=!1,r.setHeaderMessage(X,Nr.STATUS_WARNING)})}),r.persistedDataManager.getLastUsedCameraId()){var R=r.persistedDataManager.getLastUsedCameraId();h.hasValue(R)?(h.setValue(R),m.click()):r.persistedDataManager.resetLastUsedCameraId()}},e.prototype.createSectionSwap=function(){var n=this,t=et.textIfCameraScanSelected(),r=et.textIfFileScanSelected(),i=document.getElementById(this.getDashboardSectionId()),o=document.createElement("div");o.style.textAlign="center";var c=ir.createElement("span",this.getDashboardSectionSwapLinkId());c.style.textDecoration="underline",c.style.cursor="pointer",c.innerText=Zi.isCameraScanType(this.currentScanType)?t:r,c.addEventListener("click",function(){if(!n.sectionSwapAllowed){n.verbose&&n.logger.logError("Section swap called when not allowed");return}n.resetHeaderMessage(),n.fileSelectionUi.resetValue(),n.sectionSwapAllowed=!1,Zi.isCameraScanType(n.currentScanType)?(n.clearScanRegion(),n.getCameraScanRegion().style.display="none",n.fileSelectionUi.show(),c.innerText=r,n.currentScanType=vi.SCAN_TYPE_FILE,n.insertFileScanImageToScanRegion()):(n.clearScanRegion(),n.getCameraScanRegion().style.display="block",n.fileSelectionUi.hide(),c.innerText=t,n.currentScanType=vi.SCAN_TYPE_CAMERA,n.insertCameraScanImageToScanRegion(),n.startCameraScanIfPermissionExistsOnSwap()),n.sectionSwapAllowed=!0}),o.appendChild(c),i.appendChild(o)},e.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var n=this,t=this;if(this.persistedDataManager.hasCameraPermissions()){x_.hasPermissions().then(function(r){if(r){var i=document.getElementById(t.getCameraPermissionButtonId());if(!i)throw n.logger.logError("Permission button not found, fail;"),"Permission button not found";i.click()}else t.persistedDataManager.setHasPermission(!1)}).catch(function(r){t.persistedDataManager.setHasPermission(!1)});return}},e.prototype.resetHeaderMessage=function(){var n=document.getElementById(this.getHeaderMessageContainerId());n.style.display="none"},e.prototype.setHeaderMessage=function(n,t){t||(t=Nr.STATUS_DEFAULT);var r=this.getHeaderMessageDiv();switch(r.innerText=n,r.style.display="block",t){case Nr.STATUS_SUCCESS:r.style.background="rgba(106, 175, 80, 0.26)",r.style.color="#477735";break;case Nr.STATUS_WARNING:r.style.background="rgba(203, 36, 49, 0.14)",r.style.color="#cb2431";break;case Nr.STATUS_DEFAULT:default:r.style.background="rgba(0, 0, 0, 0)",r.style.color="rgb(17, 17, 17)";break}},e.prototype.showHideScanTypeSwapLink=function(n){this.scanTypeSelector.hasMoreThanOneScanType()&&(n!==!0&&(n=!1),this.sectionSwapAllowed=n,this.getDashboardSectionSwapLink().style.display=n?"inline-block":"none")},e.prototype.insertCameraScanImageToScanRegion=function(){var n=this,t=document.getElementById(this.getScanRegionId());if(this.cameraScanImage){t.innerHTML="<br>",t.appendChild(this.cameraScanImage);return}this.cameraScanImage=new Image,this.cameraScanImage.onload=function(r){t.innerHTML="<br>",t.appendChild(n.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=yA,this.cameraScanImage.alt=et.cameraScanAltText()},e.prototype.insertFileScanImageToScanRegion=function(){var n=this,t=document.getElementById(this.getScanRegionId());if(this.fileScanImage){t.innerHTML="<br>",t.appendChild(this.fileScanImage);return}this.fileScanImage=new Image,this.fileScanImage.onload=function(r){t.innerHTML="<br>",t.appendChild(n.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=CA,this.fileScanImage.alt=et.fileScanAltText()},e.prototype.clearScanRegion=function(){var n=document.getElementById(this.getScanRegionId());n.innerHTML=""},e.prototype.getDashboardSectionId=function(){return"".concat(this.elementId,"__dashboard_section")},e.prototype.getDashboardSectionCameraScanRegionId=function(){return"".concat(this.elementId,"__dashboard_section_csr")},e.prototype.getDashboardSectionSwapLinkId=function(){return wn.SCAN_TYPE_CHANGE_ANCHOR_ID},e.prototype.getScanRegionId=function(){return"".concat(this.elementId,"__scan_region")},e.prototype.getDashboardId=function(){return"".concat(this.elementId,"__dashboard")},e.prototype.getHeaderMessageContainerId=function(){return"".concat(this.elementId,"__header_message")},e.prototype.getCameraPermissionButtonId=function(){return wn.CAMERA_PERMISSION_BUTTON_ID},e.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},e.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},e.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())},e}();var TA=(()=>{class e{navigationService;messagesService;tableId=null;uniqueLinkToken=null;ownerId=null;restaurantid=null;html5QrCodeScanner=null;constructor(t,r){this.navigationService=t,this.messagesService=r}ngAfterViewInit(){this.html5QrCodeScanner=new Cu("reader",{fps:10,qrbox:{width:250,height:250}},!1),this.html5QrCodeScanner.render(this.onScanSuccess.bind(this),this.onScanFailure)}onScanSuccess(t){let r=new URL(t),i=r.searchParams.get("t"),o=r.searchParams.get("u"),c=r.searchParams.get("r"),h=r.searchParams.get("o");this.messagesService.askUser("Czy na pewno chcesz zmienic stolik?",()=>{i?(this.tableId=i,this.uniqueLinkToken=o,this.restaurantid=c,this.ownerId=h,localStorage.setItem("customercurrentTable",this.tableId),localStorage.setItem("uniqueLinkToken",this.uniqueLinkToken),localStorage.setItem("restaurantid",this.restaurantid),localStorage.setItem("ownerid",this.ownerId),this.navigationService.NavigateTo("tableordered"),console.log("Table ID saved:",this.tableId)):console.error("Table ID not found in the scanned QR code.")},()=>{this.navigationService.NavigateTo("tableordered")}),this.html5QrCodeScanner?.clear()}onScanFailure(t){console.warn(`QR code scan error: ${t}`)}ngOnDestroy(){this.html5QrCodeScanner?.clear()}static \u0275fac=function(r){return new(r||e)(z(xe),z(bo))};static \u0275cmp=oe({type:e,selectors:[["app-scanqrcode"]],standalone:!0,features:[se],decls:7,vars:0,consts:[[1,"layoutbox"],[1,"head"],[1,"logo"],["src","https://cdn1.mandarin.com.pl/eologo.png","alt","EasyOrder"],["id","reader",2,"width","300px"],[1,"footstatic"]],template:function(r,i){r&1&&(A(0,"main")(1,"div",0)(2,"div",1)(3,"div",2),K(4,"img",3),T()(),K(5,"div",4)(6,"div",5),T()())},styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;justify-content:space-between;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{width:100%;height:64px;padding:0 32px;border-bottom:3px solid #000;display:flex;justify-content:space-between;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{margin:8px 0;height:48px}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .backbtn[_ngcontent-%COMP%]{height:48px;font-size:48px;font-weight:700;display:flex;justify-content:center;align-items:center;margin:8px 0}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .backbtn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{height:48px;font-size:48px;font-weight:700}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{width:75%;display:flex;flex-direction:column;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-weight:bolder;font-size:140%;margin-bottom:24px}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;background:#fff;padding:16px;font-size:110%;border-radius:16px;color:#000;font-weight:600;letter-spacing:2px;border:3px solid #000;transition:all .5s;margin-bottom:24px}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#333}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;background:#000;padding:16px;font-size:110%;color:#fff;font-weight:600;letter-spacing:2px;border:none;transition:all .5s;border-radius:16px;cursor:pointer}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#333}#reader[_ngcontent-%COMP%]{width:300px;height:300px;border-radius:16px;border:3px black solid;display:flex;flex-direction:column;flex-wrap:wrap;justify-content:center;align-items:center;align-content:center}#reader[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:none!important}#reader__scan_region[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-wrap:wrap;justify-content:center;align-items:center;align-content:center}"]})}return e})();var OA=(()=>{class e{router;constructor(t){this.router=t}setOrder(t){localStorage.setItem("orderNumber",t),this.router.navigate(["/scanqrcode"])}static \u0275fac=function(r){return new(r||e)(z(gi))};static \u0275cmp=oe({type:e,selectors:[["app-setorder"]],standalone:!0,features:[se],decls:14,vars:0,consts:[["orderNumberInput",""],[1,"layoutbox"],[1,"head"],[1,"logo"],["src","https://cdn1.mandarin.com.pl/eologo.png","alt","EasyOrder"],[1,"backbtn"],[1,"loginform"],["type","text"],[3,"click"],[1,"footstatic"]],template:function(r,i){if(r&1){let o=kt();A(0,"main")(1,"div",1)(2,"div",2)(3,"div",3),K(4,"img",4),T(),K(5,"div",5),T(),A(6,"div",6)(7,"label"),P(8,"Wprowad\u017A numer zam\xF3wienia"),T(),K(9,"input",7,0),A(11,"button",8),j("click",function(){Ct(o);let h=_a(10);return _t(i.setOrder(h.value))}),P(12,"Przypisz stolik"),T()(),K(13,"div",9),T()()}},styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;justify-content:space-between;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{width:100%;height:64px;padding:0 32px;border-bottom:3px solid #000;display:flex;justify-content:space-between;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{margin:8px 0;height:48px}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .backbtn[_ngcontent-%COMP%]{height:48px;font-size:48px;font-weight:700;display:flex;justify-content:center;align-items:center;margin:8px 0}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .backbtn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{height:48px;font-size:48px;font-weight:700}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]{width:75%;display:flex;flex-direction:column;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:bolder;font-size:200%;margin-bottom:24px}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;background:#fff;padding:16px;font-size:110%;border-radius:16px;color:#000;font-weight:600;letter-spacing:2px;border:3px solid #000;transition:all .5s;margin-bottom:24px}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#333}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;background:#000;padding:16px;font-size:110%;color:#fff;font-weight:600;letter-spacing:2px;border:none;transition:all .5s;border-radius:16px;cursor:pointer}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#333}"]})}return e})();var NA=(()=>{class e{route;router;waiterId=null;uniqueLinkToken=null;ownerId=null;restaurantId=null;pin="";constructor(t,r){this.route=t,this.router=r,we(Me.firebaseConfig)}ngOnInit(){this.route.queryParams.subscribe(t=>{this.uniqueLinkToken=t.u||null,this.ownerId=t.o||null,this.restaurantId=t.r||null,this.waiterId=t.w||null})}authenticateWaiter(){let t=J();if(!this.restaurantId||!this.uniqueLinkToken||!this.ownerId){console.error("Missing required data");return}let r=Q(t,`Owners/${this.ownerId}/Restaurants/${this.restaurantId}`);he(r).then(i=>{if(i.exists()){let c=i.val().settings.waiter_access_pin;c&&c.toString()===this.pin?this.saveAuthData():console.error("Invalid PIN")}else console.error("Restaurant not found")}).catch(i=>{console.error("Error authenticating waiter:",i)})}saveAuthData(){localStorage.setItem("uniqueLinkToken",this.uniqueLinkToken),localStorage.setItem("restaurantid",this.restaurantId),localStorage.setItem("ownerid",this.ownerId),localStorage.setItem("waiterpin",this.pin),localStorage.setItem("waiterid",this.waiterId),this.router.navigate(["/waiterorderlist"])}static \u0275fac=function(r){return new(r||e)(z(pi),z(gi))};static \u0275cmp=oe({type:e,selectors:[["app-waiterauth"]],standalone:!0,features:[se],decls:13,vars:1,consts:[[1,"layoutbox"],[1,"head"],[1,"logo"],["src","https://cdn1.mandarin.com.pl/eologo.png","alt","EasyOrder"],[1,"backbtn"],[1,"loginform"],["for","pin"],["id","pin","type","password","required","",3,"ngModelChange","ngModel"],[3,"click"],[1,"footstatic"]],template:function(r,i){r&1&&(A(0,"main")(1,"div",0)(2,"div",1)(3,"div",2),K(4,"img",3),T(),K(5,"div",4),T(),A(6,"div",5)(7,"label",6),P(8,"Wprowad\u017A numer PIN"),T(),A(9,"input",7),ot("ngModelChange",function(c){return st(i.pin,c)||(i.pin=c),c}),T(),A(10,"button",8),j("click",function(){return i.authenticateWaiter()}),P(11,"Zaloguj"),T()(),K(12,"div",9),T()()),r&2&&(q(9),it("ngModel",i.pin))},dependencies:[Ht,Kt,_n,An,cn],styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;justify-content:space-between;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{width:100%;height:64px;padding:0 32px;border-bottom:3px solid #000;display:flex;justify-content:space-between;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{margin:8px 0;height:48px}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .backbtn[_ngcontent-%COMP%]{height:48px;font-size:48px;font-weight:700;display:flex;justify-content:center;align-items:center;margin:8px 0}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .backbtn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{height:48px;font-size:48px;font-weight:700}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]{width:75%;display:flex;flex-direction:column;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:bolder;font-size:150%;margin-bottom:24px}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;background:#fff;padding:16px;font-size:110%;border-radius:16px;color:#000;font-weight:600;letter-spacing:2px;border:3px solid #000;transition:all .5s;margin-bottom:24px}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#333}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;background:#000;padding:16px;font-size:110%;color:#fff;font-weight:600;letter-spacing:2px;border:none;transition:all .5s;border-radius:16px;cursor:pointer}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#333}"]})}return e})();var pU=(e,n,t)=>({"background-color":e,color:n,border:t});function gU(e,n){e&1&&(A(0,"p"),P(1,"Brak stolik\xF3w przypisanych do restauracji."),T())}function mU(e,n){if(e&1){let t=kt();A(0,"button",15),j("click",function(){let i=Ct(t).$implicit,o=Ne(2);return _t(o.setTable(i.id))}),P(1),T()}if(e&2){let t=n.$implicit,r=Ne(2);rt("ngStyle",wa(2,pU,t.group_id&&r.tableGroups[t.group_id]?r.tableGroups[t.group_id]:"white",t.group_id&&r.tableGroups[t.group_id]?r.getTextColor(r.tableGroups[t.group_id]):"black",t.group_id&&r.tableGroups[t.group_id]==="#ffffff"||!r.tableGroups[t.group_id]?"2px solid black":"none")),q(),Qt(" ",t.name," ")}}function yU(e,n){if(e&1&&yn(0,mU,2,6,"button",14,mn),e&2){let t=Ne();Cn(t.tables)}}var RA=(()=>{class e{navigationService;tables=[];tableGroups={};isMenuOpen=!1;toggleMenu(){this.isMenuOpen=!this.isMenuOpen}constructor(t){this.navigationService=t;let r=we(Me.firebaseConfig)}ngOnInit(){this.loadTables()}getTextColor(t){let r=t.replace("#",""),i=parseInt(r.substring(0,2),16),o=parseInt(r.substring(2,4),16),c=parseInt(r.substring(4,6),16);return(i*299+o*587+c*114)/1e3>125?"black":"white"}loadTableGroups(){let t=J(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant");if(!r||!i){console.error("Missing owner or restaurant ID");return}let o=Q(t,`Owners/${r}/Restaurants/${i}/TableGroups`);he(o).then(c=>{if(c.exists()){let h=c.val();for(let g in h)this.tableGroups[g]=h[g].color}}).catch(c=>{console.error("Error loading table groups:",c)})}loadTables(){let t=J(),r=localStorage.getItem("currentRestaurant"),i=localStorage.getItem("ownerid");if(!r){console.error("No current restaurant found in local storage");return}let o=Q(t,`Owners/${i}/Restaurants/${r}/Tables`);he(o).then(c=>{if(c.exists()){let h=c.val();this.tables=Object.values(h)}else console.log("No tables found")}).catch(c=>{console.error("Error loading tables:",c)})}setTable(t){localStorage.setItem("currentTable",t),this.goToPage("waitertablelookup")}goToPage(t){this.navigationService.NavigateTo(t)}static \u0275fac=function(r){return new(r||e)(z(xe))};static \u0275cmp=oe({type:e,selectors:[["app-waitertablelist"]],standalone:!0,features:[se],decls:32,vars:6,consts:[[1,"sidebar"],[1,"overlay"],[3,"click"],[1,"active",3,"click"],[1,"layoutbox"],[1,"head"],[1,"logo"],["src","https://cdn1.mandarin.com.pl/eologo.png","alt","EasyOrder",1,"w-full"],[1,"backbtn",3,"click"],[1,"material-symbols-rounded"],[1,"buttons"],[1,"footstatic"],["src","https://cdn1.mandarin.com.pl/eocamera.svg","alt",""],["src","https://cdn1.mandarin.com.pl/eoaddorder.svg","alt",""],[1,"table-button",3,"ngStyle"],[1,"table-button",3,"click","ngStyle"]],template:function(r,i){r&1&&(A(0,"main")(1,"div",0)(2,"div",1)(3,"ul")(4,"li")(5,"span",2),j("click",function(){return i.toggleMenu()}),P(6,"X"),T()(),A(7,"li",3),j("click",function(){return i.goToPage("tablemanage")}),P(8,"Zarz\u0105dzanie stolikami"),T(),A(9,"li",2),j("click",function(){return i.goToPage("restaurantrevievs")}),P(10,"Opinie"),T(),A(11,"li",2),j("click",function(){return i.goToPage("restaurantbilings")}),P(12,"P\u0142atno\u015Bci"),T(),A(13,"li",2),j("click",function(){return i.goToPage("restaurantsettings")}),P(14,"Ustawienia"),T(),A(15,"li",2),j("click",function(){return i.goToPage("managerestaurant")}),P(16,"Powr\xF3t"),T()()()(),A(17,"div",4)(18,"div",5)(19,"div",6),K(20,"img",7),T(),A(21,"div",8),j("click",function(){return i.toggleMenu()}),A(22,"span",9),P(23,"menu"),T()()(),A(24,"div",10),Vt(25,gU,2,0,"p")(26,yU,2,0),T(),A(27,"div",11)(28,"button",2),j("click",function(){return i.goToPage("waiterscan")}),K(29,"img",12),T(),A(30,"button",2),j("click",function(){return i.goToPage("addorder")}),K(31,"img",13),T()()()()),r&2&&(q(),hr("active",i.isMenuOpen),q(),hr("active",i.isMenuOpen),q(23),gn(i.tables.length===0?25:-1),q(),gn(i.tables.length>0?26:-1))},dependencies:[zn,xa],styles:['@font-face{font-family:Varela Round;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/varelaround/v20/w8gdH283Tvk__Lua32TysjIfpcuPP9g.woff2) format("woff2");unicode-range:U+0307-0308,U+0590-05FF,U+200C-2010,U+20AA,U+25CC,U+FB1D-FB4F}@font-face{font-family:Varela Round;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/varelaround/v20/w8gdH283Tvk__Lua32TysjIfqMuPP9g.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Varela Round;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/varelaround/v20/w8gdH283Tvk__Lua32TysjIfqcuPP9g.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Varela Round;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/varelaround/v20/w8gdH283Tvk__Lua32TysjIfp8uP.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;justify-content:space-between;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{width:100%;height:64px;padding:0 32px;border-bottom:3px solid #000;display:flex;justify-content:space-between;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{margin:8px 0;height:48px}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%;z-index:99999}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .backbtn[_ngcontent-%COMP%]{height:48px;font-size:48px;font-weight:700;display:flex;justify-content:center;align-items:center;margin:8px 0}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .backbtn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{height:48px;font-size:48px;font-weight:700}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{width:100%;height:100%;overflow-y:auto;overflow-x:hidden;display:flex;flex-direction:row;flex-wrap:wrap;justify-content:flex-start;align-items:flex-start;align-content:flex-start}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:114px;height:114px;border-radius:16px;margin:8px;font-size:200%;font-weight:bolder}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .footstatic[_ngcontent-%COMP%]{width:100%;border-top:black 3px solid;padding:8px;display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .footstatic[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:calc(50% - 8px);border:2px solid black;border-radius:16px;color:#000;background:#fff;padding:16px;font-size:110%;font-weight:bolder;display:flex;justify-content:center;align-items:center;align-content:center}.sidebar[_ngcontent-%COMP%]{position:fixed;top:0;right:-100%;width:100%;height:100%;background-color:#00000040;box-shadow:-2px 0 5px #00000080;-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px);transition:right .3s ease;z-index:999}.sidebar.active[_ngcontent-%COMP%]{right:0}.sidebar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin-top:0;list-style:none;padding:0}.sidebar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{border-bottom:3px solid black;padding:16px;font-weight:700;margin:0}.sidebar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:first-child{text-align:right;padding-top:0;padding-bottom:0;padding-right:32px;height:64px;display:flex;flex-direction:row;flex-wrap:wrap;justify-content:flex-end;align-items:center;align-content:center}.sidebar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:first-child   span[_ngcontent-%COMP%]{height:48px;width:48px;font-size:32px;font-weight:700;font-family:Varela Round,sans-serif}.sidebar[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]{background:#000;color:#fff}.overlay[_ngcontent-%COMP%]{position:fixed;top:0;right:-250px;width:250px;height:100%;background-color:#fff;box-shadow:-2px 0 5px #00000080;transition:right .3s ease}.overlay.active[_ngcontent-%COMP%]{right:0}']})}return e})();var PA=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275cmp=oe({type:e,selectors:[["app-waitertablelookup"]],standalone:!0,features:[se],decls:2,vars:0,template:function(r,i){r&1&&(A(0,"p"),P(1,"waitertablelookup works!"),T())}})}return e})();function CU(e,n){e&1&&(A(0,"p"),P(1,"Brak zam\xF3wie\u0144 przypisanych do restauracji."),T())}function _U(e,n){if(e&1&&(A(0,"span",19),P(1),T()),e&2){let t=Ne().$implicit,r=Ne();q(),Qt(" ",r.getTableName(t.table_id),"")}}function wU(e,n){if(e&1){let t=kt();Bm(0),A(1,"button",16),j("click",function(){let i=Ct(t).$implicit,o=Ne();return _t(o.setTable(i.name))}),P(2),A(3,"span",17),P(4),T(),Vt(5,_U,2,1,"span",18),T(),Um()}if(e&2){let t=n.$implicit,r=Ne();q(2),Qt(" ",t.name," "),q(2),jt(r.getOrderAge(t.created_at)),q(),rt("ngIf",r.getTableName(t.table_id))}}var kA=(()=>{class e{navigationService;orders=[];tables=[];refreshInterval;constructor(t){this.navigationService=t;let r=we(Me.firebaseConfig)}isMenuOpen=!1;toggleMenu(){this.isMenuOpen=!this.isMenuOpen}ngOnInit(){this.loadOrders(),this.loadTables(),this.refreshInterval=setInterval(()=>{this.loadOrders()},15e3)}ngOnDestroy(){this.refreshInterval&&clearInterval(this.refreshInterval)}loadOrders(){let t=J(),r=localStorage.getItem("currentRestaurant"),i=localStorage.getItem("ownerid");if(!r||!i){console.error("No current restaurant or owner found");return}let o=Q(t,`Owners/${i}/Restaurants/${r}/Orders`);he(o).then(c=>{if(c.exists()){let h=c.val();this.orders=Object.values(h),this.orders.sort((g,m)=>g.created_at<m.created_at?-1:g.created_at>m.created_at||g.completed_at&&!m.completed_at?1:!g.completed_at&&m.completed_at?-1:0)}else console.log("No orders found")}).catch(c=>{console.error("Error loading orders:",c)})}loadTables(){let t=J(),r=localStorage.getItem("currentRestaurant"),i=localStorage.getItem("ownerid");if(!r||!i){console.error("No current restaurant or owner found");return}let o=Q(t,`Owners/${i}/Restaurants/${r}/Tables`);he(o).then(c=>{if(c.exists()){let h=c.val();this.tables=Object.values(h)}else console.log("No tables found")}).catch(c=>{console.error("Error loading tables:",c)})}getOrderAge(t){let i=Date.now()-t,o=Math.floor(i/1e3),c=Math.floor(o/60),h=Math.floor(c/60),g=Math.floor(h/24);return g>0?g===1?"1 d.":`${g} d.`:h>0?h===1?"1 godz.":`${h} godz.`:c>0?c===1?"1 min.":`${c} min.`:o===1?"1 s.":`${o} s.`}getTableName(t){let r=this.tables.find(i=>i.id===t);return r?r.name:null}setTable(t){localStorage.setItem("currentTable",t),this.goToPage("waitertablelookup")}goToPage(t){this.navigationService.NavigateTo(t)}trackOrder(t,r){return r.name}static \u0275fac=function(r){return new(r||e)(z(xe))};static \u0275cmp=oe({type:e,selectors:[["app-waiterorderlist"]],standalone:!0,features:[se],decls:32,vars:7,consts:[[1,"sidebar"],[1,"overlay"],[3,"click"],[1,"active",3,"click"],[1,"layoutbox"],[1,"head"],[1,"logo"],["src","https://cdn1.mandarin.com.pl/eologo.png","alt","EasyOrder",1,"w-full"],[1,"backbtn",3,"click"],[1,"material-symbols-rounded"],[1,"buttons"],[4,"ngIf"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"footstatic"],["src","https://cdn1.mandarin.com.pl/eocamera.svg","alt",""],["src","https://cdn1.mandarin.com.pl/eoaddorder.svg","alt",""],[1,"table-button",3,"click"],[1,"order-time"],["class","order-table",4,"ngIf"],[1,"order-table"]],template:function(r,i){r&1&&(A(0,"main")(1,"div",0)(2,"div",1)(3,"ul")(4,"li")(5,"span",2),j("click",function(){return i.toggleMenu()}),P(6,"X"),T()(),A(7,"li",3),j("click",function(){return i.goToPage("tablemanage")}),P(8,"Zarz\u0105dzanie stolikami"),T(),A(9,"li",2),j("click",function(){return i.goToPage("restaurantrevievs")}),P(10,"Opinie"),T(),A(11,"li",2),j("click",function(){return i.goToPage("restaurantbilings")}),P(12,"P\u0142atno\u015Bci"),T(),A(13,"li",2),j("click",function(){return i.goToPage("restaurantsettings")}),P(14,"Ustawienia"),T(),A(15,"li",2),j("click",function(){return i.goToPage("managerestaurant")}),P(16,"Powr\xF3t"),T()()()(),A(17,"div",4)(18,"div",5)(19,"div",6),K(20,"img",7),T(),A(21,"div",8),j("click",function(){return i.toggleMenu()}),A(22,"span",9),P(23,"menu"),T()()(),A(24,"div",10),Vt(25,CU,2,0,"p",11)(26,wU,6,3,"ng-container",12),T(),A(27,"div",13)(28,"button",2),j("click",function(){return i.goToPage("waiterscan")}),K(29,"img",14),T(),A(30,"button",2),j("click",function(){return i.goToPage("addorder")}),K(31,"img",15),T()()()()),r&2&&(q(),hr("active",i.isMenuOpen),q(),hr("active",i.isMenuOpen),q(23),rt("ngIf",i.orders.length===0),q(),rt("ngForOf",i.orders)("ngForTrackBy",i.trackOrder))},dependencies:[zn,FE,ba],styles:['@font-face{font-family:Varela Round;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/varelaround/v20/w8gdH283Tvk__Lua32TysjIfpcuPP9g.woff2) format("woff2");unicode-range:U+0307-0308,U+0590-05FF,U+200C-2010,U+20AA,U+25CC,U+FB1D-FB4F}@font-face{font-family:Varela Round;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/varelaround/v20/w8gdH283Tvk__Lua32TysjIfqMuPP9g.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Varela Round;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/varelaround/v20/w8gdH283Tvk__Lua32TysjIfqcuPP9g.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Varela Round;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/varelaround/v20/w8gdH283Tvk__Lua32TysjIfp8uP.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;justify-content:space-between;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{width:100%;height:64px;padding:0 32px;border-bottom:3px solid #000;display:flex;justify-content:space-between;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{margin:8px 0;height:48px}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%;z-index:99999}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .backbtn[_ngcontent-%COMP%]{height:48px;font-size:48px;font-weight:700;display:flex;justify-content:center;align-items:center;margin:8px 0}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .backbtn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{height:48px;font-size:48px;font-weight:700}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{width:100%;height:100%;overflow-y:auto;overflow-x:hidden;display:flex;flex-direction:row;flex-wrap:wrap;justify-content:flex-start;align-items:flex-start;align-content:flex-start}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:114px;height:114px;border-radius:16px;margin:8px;font-size:200%;font-weight:bolder}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .footstatic[_ngcontent-%COMP%]{width:100%;border-top:black 3px solid;padding:8px;display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .footstatic[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:calc(50% - 8px);border:2px solid black;border-radius:16px;color:#000;background:#fff;padding:16px;font-size:110%;font-weight:bolder;display:flex;justify-content:center;align-items:center;align-content:center}.sidebar[_ngcontent-%COMP%]{position:fixed;top:0;right:-100%;width:100%;height:100%;background-color:#00000040;box-shadow:-2px 0 5px #00000080;-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px);transition:right .3s ease;z-index:999}.sidebar.active[_ngcontent-%COMP%]{right:0}.sidebar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin-top:0;list-style:none;padding:0}.sidebar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{border-bottom:3px solid black;padding:16px;font-weight:700;margin:0}.sidebar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:first-child{text-align:right;padding-top:0;padding-bottom:0;padding-right:32px;height:64px;display:flex;flex-direction:row;flex-wrap:wrap;justify-content:flex-end;align-items:center;align-content:center}.sidebar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:first-child   span[_ngcontent-%COMP%]{height:48px;width:48px;font-size:32px;font-weight:700;font-family:Varela Round,sans-serif}.sidebar[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]{background:#000;color:#fff}.overlay[_ngcontent-%COMP%]{position:fixed;top:0;right:-250px;width:250px;height:100%;background-color:#fff;box-shadow:-2px 0 5px #00000080;transition:right .3s ease}.overlay.active[_ngcontent-%COMP%]{right:0}']})}return e})();var FA=(()=>{class e{navigationService;tableId=null;uniqueLinkToken=null;ownerId=null;restaurantid=null;html5QrCodeScanner=null;constructor(t){this.navigationService=t}ngAfterViewInit(){this.html5QrCodeScanner=new Cu("reader",{fps:10,qrbox:{width:250,height:250}},!1),this.html5QrCodeScanner.render(this.onScanSuccess.bind(this),this.onScanFailure)}onScanSuccess(t){let r=new URL(t),i=r.searchParams.get("t"),o=r.searchParams.get("u"),c=r.searchParams.get("r"),h=r.searchParams.get("o");i?(this.tableId=i,this.uniqueLinkToken=o,this.restaurantid=c,this.ownerId=h,localStorage.setItem("customercurrentTable",this.tableId),localStorage.setItem("uniqueLinkToken",this.uniqueLinkToken),localStorage.setItem("restaurantid",this.restaurantid),localStorage.setItem("ownerid",this.ownerId),this.navigationService.NavigateTo("tableordered"),console.log("Table ID saved:",this.tableId)):console.error("Table ID not found in the scanned QR code."),this.html5QrCodeScanner?.clear()}onScanFailure(t){console.warn(`QR code scan error: ${t}`)}ngOnDestroy(){this.html5QrCodeScanner?.clear()}static \u0275fac=function(r){return new(r||e)(z(xe))};static \u0275cmp=oe({type:e,selectors:[["app-waiterscan"]],standalone:!0,features:[se],decls:7,vars:0,consts:[[1,"layoutbox"],[1,"head"],[1,"logo"],["src","https://cdn1.mandarin.com.pl/eologo.png","alt","EasyOrder"],["id","reader",2,"width","300px"],[1,"footstatic"]],template:function(r,i){r&1&&(A(0,"main")(1,"div",0)(2,"div",1)(3,"div",2),K(4,"img",3),T()(),K(5,"div",4)(6,"div",5),T()())},styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;justify-content:space-between;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{width:100%;height:64px;padding:0 32px;border-bottom:3px solid #000;display:flex;justify-content:space-between;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{margin:8px 0;height:48px}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .backbtn[_ngcontent-%COMP%]{height:48px;font-size:48px;font-weight:700;display:flex;justify-content:center;align-items:center;margin:8px 0}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .backbtn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{height:48px;font-size:48px;font-weight:700}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{width:75%;display:flex;flex-direction:column;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-weight:bolder;font-size:140%;margin-bottom:24px}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;background:#fff;padding:16px;font-size:110%;border-radius:16px;color:#000;font-weight:600;letter-spacing:2px;border:3px solid #000;transition:all .5s;margin-bottom:24px}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#333}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;background:#000;padding:16px;font-size:110%;color:#fff;font-weight:600;letter-spacing:2px;border:none;transition:all .5s;border-radius:16px;cursor:pointer}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#333}#reader[_ngcontent-%COMP%]{width:300px;height:300px;border-radius:16px;border:3px black solid;display:flex;flex-direction:column;flex-wrap:wrap;justify-content:center;align-items:center;align-content:center}#reader[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:none!important}#reader__scan_region[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-wrap:wrap;justify-content:center;align-items:center;align-content:center}"]})}return e})();var LA=(()=>{class e{navigationService;tableId=null;table=null;tableGroupName=null;groupColor=null;uniqueLinkToken=null;waiterId=null;ownerId=null;restaurantId=null;constructor(t){this.navigationService=t,we(Me.firebaseConfig)}ngOnInit(){this.loadTable(),this.loadUniqueLinkToken()}loadUniqueLinkToken(){let t=J();this.ownerId=sessionStorage.getItem("userId"),this.restaurantId=localStorage.getItem("currentRestaurant"),this.waiterId=localStorage.getItem("waiterId");let r=Q(t,`Owners/${this.ownerId}/Restaurants/${this.restaurantId}/uniqueLinkToken`);he(r).then(i=>{i.exists()?this.uniqueLinkToken=i.val():console.log("No unique link token found")}).catch(i=>{console.error("Error loading unique link token:",i)})}deleteTable(){let t=J(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant");if(!this.tableId||!r||!i){console.error("Missing table, owner, or restaurant ID");return}let o=Q(t,`Owners/${r}/Restaurants/${i}/Tables/${this.tableId}`);nr(o).then(()=>{console.log("Table deleted successfully"),this.navigationService.NavigateTo("tablemanage")}).catch(c=>{console.error("Error deleting table:",c)})}blockTable(){let t=J(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant");if(!this.tableId||!r||!i){console.error("Missing table, owner, or restaurant ID");return}let o=Q(t,`Owners/${r}/Restaurants/${i}/Tables/${this.tableId}`);gt(o,{is_blocked:!0}).then(()=>{console.log("Table blocked successfully"),location.reload()}).catch(c=>{console.error("Error blocking table:",c)})}unlockTable(){let t=J(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant");if(!this.tableId||!r||!i){console.error("Missing table, owner, or restaurant ID");return}let o=Q(t,`Owners/${r}/Restaurants/${i}/Tables/${this.tableId}`);gt(o,{is_blocked:!1}).then(()=>{console.log("Table unlocked successfully"),location.reload()}).catch(c=>{console.error("Error unlocking table:",c)})}saveTable(){}loadTable(){if(this.tableId=localStorage.getItem("currentTable"),!this.tableId){console.error("No current table found in local storage");return}let t=J(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant"),o=Q(t,`Owners/${r}/Restaurants/${i}/Tables/${this.tableId}`);he(o).then(c=>{c.exists()?(this.table=c.val(),this.loadTableGroup()):console.log("No table found")}).catch(c=>{console.error("Error loading table:",c)})}loadTableGroup(){let t=J(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant");if(!this.table?.group_id||this.table.group_id==="0g"){this.tableGroupName="Stoliki bez grupy",this.groupColor="#000000";return}let o=Q(t,`Owners/${r}/Restaurants/${i}/TableGroups/${this.table.group_id}`);he(o).then(c=>{if(c.exists()){let h=c.val();this.tableGroupName=h.name,this.groupColor=h.color}else console.log("No group found for this table")}).catch(c=>{console.error("Error loading group:",c)})}getQRCodeData(){let t=this.table?.id||"",r=this.uniqueLinkToken||"",i=sessionStorage.getItem("userId"),o=localStorage.getItem("currentRestaurant");return`https://easyorder.mandarin.com.pl/settable?tableid=${t}&uniqueLinkToken=${r}&ownerid=${i}&restaurantid=${o}`}static \u0275fac=function(r){return new(r||e)(z(xe))};static \u0275cmp=oe({type:e,selectors:[["app-waiterqrcode"]],standalone:!0,features:[se],decls:4,vars:17,consts:[[1,"qrcodeImage"],[3,"qrdata","allowEmptyString","alt","ariaLabel","cssClass","colorDark","colorLight","elementType","errorCorrectionLevel","margin","scale","title","width"]],template:function(r,i){r&1&&(A(0,"main")(1,"div",0),K(2,"qrcode",1),P(3),T()()),r&2&&(q(2),rt("qrdata","https://easyorder.mandarin.com.pl/waiterauth?u="+i.uniqueLinkToken+"&o="+i.ownerId+"&r="+i.restaurantId+"&w="+i.waiterId)("allowEmptyString",!0)("alt","A custom alt attribute")("ariaLabel","QR Code image with the following content...")("cssClass","center")("colorDark","#000000ff")("colorLight","#ffffffff")("elementType","img")("errorCorrectionLevel","H")("margin",4)("scale",1)("title","A custom title attribute")("width",300),q(),Vm(" https://easyorder.mandarin.com.pl/waiterauth?u=",i.uniqueLinkToken,"&o=",i.ownerId,"&r=",i.restaurantId,"&w=",i.waiterId," "))},dependencies:[Bo,Lo]})}return e})();var BA=(()=>{class e{navigationService;orderNumber="";constructor(t){this.navigationService=t,we(Me.firebaseConfig)}addOrder(){let t=J(),r=localStorage.getItem("ownerid"),i=localStorage.getItem("currentRestaurant");if(!r||!i){console.error("Brak wymaganych danych");return}let o=Date.now().toString(),c={name:this.orderNumber,waiter_get_order_at_table:!0,created_at:Date.now(),canceled_at:null,completed_at:null,table_id:"",waiter_set_order_number:!0,table_id_entered_by_waiter:!1,completed_during_table_clean:!1},h=Q(t,`Owners/${r}/Restaurants/${i}/Orders/${o}`);No(h,c).then(()=>{console.log("Zam\xF3wienie dodane pomy\u015Blnie"),this.orderNumber="",this.navigationService.NavigateTo("waiterorderlist")}).catch(g=>{console.error("B\u0142\u0105d podczas dodawania zam\xF3wienia:",g)})}static \u0275fac=function(r){return new(r||e)(z(xe))};static \u0275cmp=oe({type:e,selectors:[["app-addorder"]],standalone:!0,features:[se],decls:13,vars:1,consts:[[1,"layoutbox"],[1,"head"],[1,"logo"],["src","https://cdn1.mandarin.com.pl/eologo.png","alt","EasyOrder"],[1,"backbtn"],[1,"loginform"],["type","text","id","orderNumber",3,"ngModelChange","ngModel"],[3,"click"],[1,"footstatic"]],template:function(r,i){r&1&&(A(0,"main")(1,"div",0)(2,"div",1)(3,"div",2),K(4,"img",3),T(),K(5,"div",4),T(),A(6,"div",5)(7,"label"),P(8,"Wprowad\u017A numer zam\xF3wienia"),T(),A(9,"input",6),ot("ngModelChange",function(c){return st(i.orderNumber,c)||(i.orderNumber=c),c}),T(),A(10,"button",7),j("click",function(){return i.addOrder()}),P(11,"Dodaj zam\xF3wienie"),T()(),K(12,"div",8),T()()),r&2&&(q(9),it("ngModel",i.orderNumber))},dependencies:[Ht,Kt,_n,cn],styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;justify-content:space-between;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{width:100%;height:64px;padding:0 32px;border-bottom:3px solid #000;display:flex;justify-content:space-between;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{margin:8px 0;height:48px}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .backbtn[_ngcontent-%COMP%]{height:48px;font-size:48px;font-weight:700;display:flex;justify-content:center;align-items:center;margin:8px 0}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .backbtn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{height:48px;font-size:48px;font-weight:700}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]{width:75%;display:flex;flex-direction:column;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:bolder;font-size:200%;margin-bottom:24px}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;background:#fff;padding:16px;font-size:110%;border-radius:16px;color:#000;font-weight:600;letter-spacing:2px;border:3px solid #000;transition:all .5s;margin-bottom:24px}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#333}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;background:#000;padding:16px;font-size:110%;color:#fff;font-weight:600;letter-spacing:2px;border:none;transition:all .5s;border-radius:16px;cursor:pointer}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#333}"]})}return e})();function vU(e,n){if(e&1&&(A(0,"option",9),P(1),T()),e&2){let t=Ne().$implicit;rt("value",t.id),q(),jt(t.name)}}function bU(e,n){if(e&1&&(A(0,"option",10),P(1),T()),e&2){let t=Ne().$implicit;rt("value",t.id),q(),jt(t.name)}}function xU(e,n){if(e&1&&Vt(0,vU,2,2,"option",9)(1,bU,2,2,"option",10),e&2){let t=n.$implicit,r=Ne();gn(t.id==r.table.group_id?0:-1),q(),gn(t.id!=r.table.group_id?1:-1)}}var UA=(()=>{class e{navigationService;table={id:"",name:"",group_id:"",description:"",is_blocked:!1};tableGroups=[];restaurantId="";constructor(t){this.navigationService=t,we(Me.firebaseConfig)}ngOnInit(){this.loadEditedTable(),this.loadTableGroups()}loadEditedTable(){let t=localStorage.getItem("currentTable"),r=sessionStorage.getItem("userId");if(this.restaurantId=localStorage.getItem("currentRestaurant")??"",!t||!r||!this.restaurantId){console.error("Missing table, owner, or restaurant ID");return}let i=J(),o=Q(i,`Owners/${r}/Restaurants/${this.restaurantId}/Tables/${t}`);he(o).then(c=>{c.exists()?this.table=c.val():console.log("No table found")}).catch(c=>{console.error("Error loading table:",c)})}loadTableGroups(){let t=sessionStorage.getItem("userId"),r=localStorage.getItem("currentRestaurant");if(!t||!r){console.error("Missing owner or restaurant ID");return}let i=J(),o=Q(i,`Owners/${t}/Restaurants/${r}/TableGroups`);he(o).then(c=>{c.exists()?this.tableGroups=Object.values(c.val()):console.log("No table groups found")}).catch(c=>{console.error("Error loading table groups:",c)})}saveChanges(){let t=sessionStorage.getItem("userId"),r=localStorage.getItem("currentRestaurant"),i=localStorage.getItem("currentTable");if(!t||!r||!i){console.error("Missing owner, restaurant, or table ID");return}let o=J(),c=Q(o,`Owners/${t}/Restaurants/${r}/Tables/${i}`);gt(c,{name:this.table.name,group_id:this.table.group_id,description:this.table.description,is_blocked:this.table.is_blocked}).then(()=>{console.log("Table updated successfully"),this.navigationService.NavigateTo("tablemanage")}).catch(h=>{console.error("Error updating table:",h)})}static \u0275fac=function(r){return new(r||e)(z(xe))};static \u0275cmp=oe({type:e,selectors:[["app-tableeditnew"]],standalone:!0,features:[se],decls:15,vars:5,consts:[[1,"panel"],[3,"ngSubmit"],["for","table-name"],["id","table-name","type","text","name","tableName","required","",3,"ngModelChange","ngModel","value"],["for","group"],["id","group","name","groupId",3,"ngModelChange","ngModel"],["for","description"],["id","description","name","description","rows","4",3,"ngModelChange","ngModel","value"],["type","submit"],["selected","",3,"value"],[3,"value"]],template:function(r,i){r&1&&(A(0,"div",0)(1,"form",1),j("ngSubmit",function(){return i.saveChanges()}),A(2,"label",2),P(3,"Nazwa stolika"),T(),A(4,"input",3),ot("ngModelChange",function(c){return st(i.table.name,c)||(i.table.name=c),c}),T(),A(5,"label",4),P(6,"Grupa"),T(),A(7,"select",5),ot("ngModelChange",function(c){return st(i.table.group_id,c)||(i.table.group_id=c),c}),yn(8,xU,2,2,null,null,mn),T(),A(10,"label",6),P(11,"Opis"),T(),A(12,"textarea",7),ot("ngModelChange",function(c){return st(i.table.description,c)||(i.table.description=c),c}),T(),A(13,"button",8),P(14,"Zapisz zmiany"),T()()()),r&2&&(q(4),it("ngModel",i.table.name),rt("value",i.table.name),q(3),it("ngModel",i.table.group_id),q(),Cn(i.tableGroups),q(4),it("ngModel",i.table.description),rt("value",i.table.description))},dependencies:[Ht,tr,hh,ph,Kt,Ba,_n,er,An,cn,Wn],styles:[".panel[_ngcontent-%COMP%]{padding:16px;border:1px solid #000;width:300px;margin:0 auto}label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-weight:700}input[_ngcontent-%COMP%], select[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{width:100%;margin-bottom:16px;padding:8px;border:1px solid #ccc}button[_ngcontent-%COMP%]{width:100%;padding:10px;background-color:#000;color:#fff;border:none;cursor:pointer}"]})}return e})();var VA=(()=>{class e{navigationService;messagesService;group={id:"",name:"",color:"",description:"",location:""};constructor(t,r){this.navigationService=t,this.messagesService=r,we(Me.firebaseConfig)}ngOnInit(){this.loadGroupData()}loadGroupData(){let t=localStorage.getItem("currentGroup"),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant");if(!t||!r||!i){console.error("Missing group, owner, or restaurant ID");return}let o=J(),c=Q(o,`Owners/${r}/Restaurants/${i}/TableGroups/${t}`);he(c).then(h=>{h.exists()?this.group=h.val():console.log("No group found")}).catch(h=>{console.error("Error loading group:",h)})}saveChanges(){let t=sessionStorage.getItem("userId"),r=localStorage.getItem("currentRestaurant"),i=localStorage.getItem("currentGroup");if(!t||!r||!i){console.error("Missing owner, restaurant, or group ID");return}let o=J(),c=Q(o,`Owners/${t}/Restaurants/${r}/TableGroups/${i}`);gt(c,{name:this.group.name,color:this.group.color,description:this.group.description,location:this.group.location}).then(()=>{console.log("Group updated successfully"),this.navigationService.NavigateTo("tablegroupmanage")}).catch(h=>{console.error("Error updating group:",h)})}deleteGroup(){this.messagesService.askUser("Czy napewno usun\u0105\u0107 restauracj\u0119?",()=>{this.deleteGroup2()},()=>{console.log("Deletion canceled")})}deleteGroup2(){let t=J(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant"),o=localStorage.getItem("currentGroup");if(!o||!r||!i){console.error("Missing table, owner, or restaurant ID");return}let c=Q(t,`Owners/${r}/Restaurants/${i}/TableGroups/${o}`);nr(c).then(()=>{console.log("Table deleted successfully"),this.navigationService.NavigateTo("tablegroupmanage")}).catch(h=>{console.error("Error deleting table:",h)})}static \u0275fac=function(r){return new(r||e)(z(xe),z(bo))};static \u0275cmp=oe({type:e,selectors:[["app-groupedit"]],standalone:!0,features:[se],decls:21,vars:4,consts:[[3,"ngSubmit"],["for","name"],["id","name","name","name","required","",3,"ngModelChange","ngModel"],["for","color"],["id","color","name","color","required","",3,"ngModelChange","ngModel"],["for","description"],["id","description","name","description",3,"ngModelChange","ngModel"],["for","location"],["id","location","name","location",3,"ngModelChange","ngModel"],["type","submit"],[3,"click"]],template:function(r,i){r&1&&(A(0,"form",0),j("ngSubmit",function(){return i.saveChanges()}),A(1,"div")(2,"label",1),P(3,"Nazwa:"),T(),A(4,"input",2),ot("ngModelChange",function(c){return st(i.group.name,c)||(i.group.name=c),c}),T()(),A(5,"div")(6,"label",3),P(7,"Kolor:"),T(),A(8,"input",4),ot("ngModelChange",function(c){return st(i.group.color,c)||(i.group.color=c),c}),T()(),A(9,"div")(10,"label",5),P(11,"Opis:"),T(),A(12,"textarea",6),ot("ngModelChange",function(c){return st(i.group.description,c)||(i.group.description=c),c}),T()(),A(13,"div")(14,"label",7),P(15,"Lokalizacja:"),T(),A(16,"input",8),ot("ngModelChange",function(c){return st(i.group.location,c)||(i.group.location=c),c}),T()(),A(17,"button",9),P(18,"Zapisz zmiany"),T()(),A(19,"button",10),j("click",function(){return i.deleteGroup()}),P(20,"Usu\u0144 grup\u0119"),T()),r&2&&(q(4),it("ngModel",i.group.name),q(4),it("ngModel",i.group.color),q(4),it("ngModel",i.group.description),q(4),it("ngModel",i.group.location))},dependencies:[Ht,tr,Kt,_n,er,An,cn,Wn]})}return e})();var jA=(()=>{class e{navigationService;tableId=null;table=null;tableGroupName=null;groupColor=null;uniqueLinkToken=null;ownerId=null;restaurantId=null;constructor(t){this.navigationService=t,we(Me.firebaseConfig)}printQRCodePage(){window.print()}ngOnInit(){this.loadTable(),this.loadUniqueLinkToken()}loadUniqueLinkToken(){let t=J();this.ownerId=sessionStorage.getItem("userId"),this.restaurantId=localStorage.getItem("currentRestaurant");let r=Q(t,`Owners/${this.ownerId}/Restaurants/${this.restaurantId}/uniqueLinkToken`);he(r).then(i=>{i.exists()?this.uniqueLinkToken=i.val():console.log("No unique link token found")}).catch(i=>{console.error("Error loading unique link token:",i)})}deleteTable(){let t=J(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant");if(!this.tableId||!r||!i){console.error("Missing table, owner, or restaurant ID");return}let o=Q(t,`Owners/${r}/Restaurants/${i}/Tables/${this.tableId}`);nr(o).then(()=>{console.log("Table deleted successfully"),this.navigationService.NavigateTo("tablemanage")}).catch(c=>{console.error("Error deleting table:",c)})}blockTable(){let t=J(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant");if(!this.tableId||!r||!i){console.error("Missing table, owner, or restaurant ID");return}let o=Q(t,`Owners/${r}/Restaurants/${i}/Tables/${this.tableId}`);gt(o,{is_blocked:!0}).then(()=>{console.log("Table blocked successfully"),location.reload()}).catch(c=>{console.error("Error blocking table:",c)})}unlockTable(){let t=J(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant");if(!this.tableId||!r||!i){console.error("Missing table, owner, or restaurant ID");return}let o=Q(t,`Owners/${r}/Restaurants/${i}/Tables/${this.tableId}`);gt(o,{is_blocked:!1}).then(()=>{console.log("Table unlocked successfully"),location.reload()}).catch(c=>{console.error("Error unlocking table:",c)})}saveTable(){}loadTable(){if(this.tableId=localStorage.getItem("currentTable"),!this.tableId){console.error("No current table found in local storage");return}let t=J(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant"),o=Q(t,`Owners/${r}/Restaurants/${i}/Tables/${this.tableId}`);he(o).then(c=>{c.exists()?(this.table=c.val(),this.loadTableGroup()):console.log("No table found")}).catch(c=>{console.error("Error loading table:",c)})}loadTableGroup(){let t=J(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant");if(!this.table?.group_id||this.table.group_id==="0g"){this.tableGroupName="Stoliki bez grupy",this.groupColor="#000000";return}let o=Q(t,`Owners/${r}/Restaurants/${i}/TableGroups/${this.table.group_id}`);he(o).then(c=>{if(c.exists()){let h=c.val();this.tableGroupName=h.name,this.groupColor=h.color}else console.log("No group found for this table")}).catch(c=>{console.error("Error loading group:",c)})}getQRCodeData(){let t=this.table?.id||"",r=this.uniqueLinkToken||"",i=sessionStorage.getItem("userId"),o=localStorage.getItem("currentRestaurant");return`https://easyorder.mandarin.com.pl/settable?tableid=${t}&uniqueLinkToken=${r}&ownerid=${i}&restaurantid=${o}`}static \u0275fac=function(r){return new(r||e)(z(xe))};static \u0275cmp=oe({type:e,selectors:[["app-cashpointqrcode"]],standalone:!0,features:[se],decls:6,vars:13,consts:[[3,"click"],[1,"qrcodeImage"],[3,"qrdata","allowEmptyString","alt","ariaLabel","cssClass","colorDark","colorLight","elementType","errorCorrectionLevel","margin","scale","title","width"]],template:function(r,i){r&1&&(A(0,"main")(1,"div")(2,"button",0),j("click",function(){return i.printQRCodePage()}),P(3,"Print QR Code"),T()(),A(4,"div",1),K(5,"qrcode",2),T()()),r&2&&(q(5),rt("qrdata","https://easyorder.mandarin.com.pl/setorder")("allowEmptyString",!0)("alt","A custom alt attribute")("ariaLabel","QR Code image with the following content...")("cssClass","center")("colorDark","#000000ff")("colorLight","#ffffffff")("elementType","img")("errorCorrectionLevel","H")("margin",4)("scale",1)("title","A custom title attribute")("width",300))},dependencies:[Bo,Lo],styles:["@media print{button[_ngcontent-%COMP%]{display:none}.qr-code-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-between;margin:0;padding:0}.qr-code-box[_ngcontent-%COMP%]{width:calc(50% - 10px);height:565px;margin:5px;text-align:center;page-break-inside:avoid}.qr-code-container[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:nth-child(2n){page-break-after:always}body[_ngcontent-%COMP%]{background-color:#fff;margin:0}}"]})}return e})();var HA=[{path:"",component:GC},{path:"landingpage",component:GC},{path:"register",component:RD},{path:"login",component:OD},{path:"newrestaurant",component:PD},{path:"managerestaurant",component:kD},{path:"changerestaurant",component:FD},{path:"restaurantbilings",component:LD},{path:"restaurantsettings",component:BD},{path:"tablemanage",component:jD},{path:"tablecreate",component:HD},{path:"tableedit",component:zD},{path:"restaurantstats",component:VD},{path:"restaurantrevievs",component:UD},{path:"settable",component:WD},{path:"tablegroupcreate",component:$D},{path:"tablegroupmanage",component:GD},{path:"showtableqr",component:XM},{path:"tablesettings",component:ZM},{path:"waitersettings",component:QM},{path:"alltablesqrcodes",component:KM},{path:"tableordered",component:eA},{path:"scanqrcode",component:TA},{path:"setorder",component:OA},{path:"waiterauth",component:NA},{path:"waitertablelist",component:RA},{path:"waitertablelookup",component:PA},{path:"waiterorderlist",component:kA},{path:"waiterscan",component:FA},{path:"waiterqrcode",component:LA},{path:"addorder",component:BA},{path:"tableeedit",component:UA},{path:"groupedit",component:VA},{path:"cashpointqrcode",component:jA}];eI(HI,{providers:[UI(HA),{provide:Ht},nI()]});
