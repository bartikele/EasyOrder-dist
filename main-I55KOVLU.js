var qD=Object.create;var $u=Object.defineProperty,GD=Object.defineProperties,YD=Object.getOwnPropertyDescriptor,KD=Object.getOwnPropertyDescriptors,QD=Object.getOwnPropertyNames,lv=Object.getOwnPropertySymbols,ZD=Object.getPrototypeOf,dv=Object.prototype.hasOwnProperty,JD=Object.prototype.propertyIsEnumerable;var uv=(e,t,n)=>t in e?$u(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,C=(e,t)=>{for(var n in t||={})dv.call(t,n)&&uv(e,n,t[n]);if(lv)for(var n of lv(t))JD.call(t,n)&&uv(e,n,t[n]);return e},Q=(e,t)=>GD(e,KD(t));var de=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var XD=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of QD(t))!dv.call(e,i)&&i!==n&&$u(e,i,{get:()=>t[i],enumerable:!(r=YD(t,i))||r.enumerable});return e};var eS=(e,t,n)=>(n=e!=null?qD(ZD(e)):{},XD(t||!e||!e.__esModule?$u(n,"default",{value:e,enumerable:!0}):n,e));var w=(e,t,n)=>new Promise((r,i)=>{var o=c=>{try{a(n.next(c))}catch(l){i(l)}},s=c=>{try{a(n.throw(c))}catch(l){i(l)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(o,s);a((n=n.apply(e,t)).next())});var Lb=de((bG,Fb)=>{"use strict";Fb.exports=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}});var _r=de(ii=>{"use strict";var Um,Lj=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];ii.getSymbolSize=function(t){if(!t)throw new Error('"version" cannot be null or undefined');if(t<1||t>40)throw new Error('"version" should be in range from 1 to 40');return t*4+17};ii.getSymbolTotalCodewords=function(t){return Lj[t]};ii.getBCHDigit=function(e){let t=0;for(;e!==0;)t++,e>>>=1;return t};ii.setToSJISFunction=function(t){if(typeof t!="function")throw new Error('"toSJISFunc" is not a valid function.');Um=t};ii.isKanjiModeEnabled=function(){return typeof Um<"u"};ii.toSJIS=function(t){return Um(t)}});var Au=de(xt=>{"use strict";xt.L={bit:1};xt.M={bit:0};xt.Q={bit:3};xt.H={bit:2};function Vj(e){if(typeof e!="string")throw new Error("Param is not a string");switch(e.toLowerCase()){case"l":case"low":return xt.L;case"m":case"medium":return xt.M;case"q":case"quartile":return xt.Q;case"h":case"high":return xt.H;default:throw new Error("Unknown EC Level: "+e)}}xt.isValid=function(t){return t&&typeof t.bit<"u"&&t.bit>=0&&t.bit<4};xt.from=function(t,n){if(xt.isValid(t))return t;try{return Vj(t)}catch{return n}}});var Ub=de((TG,jb)=>{"use strict";function Vb(){this.buffer=[],this.length=0}Vb.prototype={get:function(e){let t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)===1},put:function(e,t){for(let n=0;n<t;n++)this.putBit((e>>>t-n-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(e){let t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}};jb.exports=Vb});var $b=de((MG,Bb)=>{"use strict";function ba(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}ba.prototype.set=function(e,t,n,r){let i=e*this.size+t;this.data[i]=n,r&&(this.reservedBit[i]=!0)};ba.prototype.get=function(e,t){return this.data[e*this.size+t]};ba.prototype.xor=function(e,t,n){this.data[e*this.size+t]^=n};ba.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]};Bb.exports=ba});var Hb=de(Nu=>{"use strict";var jj=_r().getSymbolSize;Nu.getRowColCoords=function(t){if(t===1)return[];let n=Math.floor(t/7)+2,r=jj(t),i=r===145?26:Math.ceil((r-13)/(2*n-2))*2,o=[r-7];for(let s=1;s<n-1;s++)o[s]=o[s-1]-i;return o.push(6),o.reverse()};Nu.getPositions=function(t){let n=[],r=Nu.getRowColCoords(t),i=r.length;for(let o=0;o<i;o++)for(let s=0;s<i;s++)o===0&&s===0||o===0&&s===i-1||o===i-1&&s===0||n.push([r[o],r[s]]);return n}});var qb=de(zb=>{"use strict";var Uj=_r().getSymbolSize,Wb=7;zb.getPositions=function(t){let n=Uj(t);return[[0,0],[n-Wb,0],[0,n-Wb]]}});var Gb=de(_e=>{"use strict";_e.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};var oi={N1:3,N2:3,N3:40,N4:10};_e.isValid=function(t){return t!=null&&t!==""&&!isNaN(t)&&t>=0&&t<=7};_e.from=function(t){return _e.isValid(t)?parseInt(t,10):void 0};_e.getPenaltyN1=function(t){let n=t.size,r=0,i=0,o=0,s=null,a=null;for(let c=0;c<n;c++){i=o=0,s=a=null;for(let l=0;l<n;l++){let u=t.get(c,l);u===s?i++:(i>=5&&(r+=oi.N1+(i-5)),s=u,i=1),u=t.get(l,c),u===a?o++:(o>=5&&(r+=oi.N1+(o-5)),a=u,o=1)}i>=5&&(r+=oi.N1+(i-5)),o>=5&&(r+=oi.N1+(o-5))}return r};_e.getPenaltyN2=function(t){let n=t.size,r=0;for(let i=0;i<n-1;i++)for(let o=0;o<n-1;o++){let s=t.get(i,o)+t.get(i,o+1)+t.get(i+1,o)+t.get(i+1,o+1);(s===4||s===0)&&r++}return r*oi.N2};_e.getPenaltyN3=function(t){let n=t.size,r=0,i=0,o=0;for(let s=0;s<n;s++){i=o=0;for(let a=0;a<n;a++)i=i<<1&2047|t.get(s,a),a>=10&&(i===1488||i===93)&&r++,o=o<<1&2047|t.get(a,s),a>=10&&(o===1488||o===93)&&r++}return r*oi.N3};_e.getPenaltyN4=function(t){let n=0,r=t.data.length;for(let o=0;o<r;o++)n+=t.data[o];return Math.abs(Math.ceil(n*100/r/5)-10)*oi.N4};function Bj(e,t,n){switch(e){case _e.Patterns.PATTERN000:return(t+n)%2===0;case _e.Patterns.PATTERN001:return t%2===0;case _e.Patterns.PATTERN010:return n%3===0;case _e.Patterns.PATTERN011:return(t+n)%3===0;case _e.Patterns.PATTERN100:return(Math.floor(t/2)+Math.floor(n/3))%2===0;case _e.Patterns.PATTERN101:return t*n%2+t*n%3===0;case _e.Patterns.PATTERN110:return(t*n%2+t*n%3)%2===0;case _e.Patterns.PATTERN111:return(t*n%3+(t+n)%2)%2===0;default:throw new Error("bad maskPattern:"+e)}}_e.applyMask=function(t,n){let r=n.size;for(let i=0;i<r;i++)for(let o=0;o<r;o++)n.isReserved(o,i)||n.xor(o,i,Bj(t,o,i))};_e.getBestMask=function(t,n){let r=Object.keys(_e.Patterns).length,i=0,o=1/0;for(let s=0;s<r;s++){n(s),_e.applyMask(s,t);let a=_e.getPenaltyN1(t)+_e.getPenaltyN2(t)+_e.getPenaltyN3(t)+_e.getPenaltyN4(t);_e.applyMask(s,t),a<o&&(o=a,i=s)}return i}});var $m=de(Bm=>{"use strict";var wr=Au(),xu=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],Ru=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];Bm.getBlocksCount=function(t,n){switch(n){case wr.L:return xu[(t-1)*4+0];case wr.M:return xu[(t-1)*4+1];case wr.Q:return xu[(t-1)*4+2];case wr.H:return xu[(t-1)*4+3];default:return}};Bm.getTotalCodewordsCount=function(t,n){switch(n){case wr.L:return Ru[(t-1)*4+0];case wr.M:return Ru[(t-1)*4+1];case wr.Q:return Ru[(t-1)*4+2];case wr.H:return Ru[(t-1)*4+3];default:return}}});var Yb=de(Pu=>{"use strict";var Da=new Uint8Array(512),Ou=new Uint8Array(256);(function(){let t=1;for(let n=0;n<255;n++)Da[n]=t,Ou[t]=n,t<<=1,t&256&&(t^=285);for(let n=255;n<512;n++)Da[n]=Da[n-255]})();Pu.log=function(t){if(t<1)throw new Error("log("+t+")");return Ou[t]};Pu.exp=function(t){return Da[t]};Pu.mul=function(t,n){return t===0||n===0?0:Da[Ou[t]+Ou[n]]}});var Kb=de(Sa=>{"use strict";var Hm=Yb();Sa.mul=function(t,n){let r=new Uint8Array(t.length+n.length-1);for(let i=0;i<t.length;i++)for(let o=0;o<n.length;o++)r[i+o]^=Hm.mul(t[i],n[o]);return r};Sa.mod=function(t,n){let r=new Uint8Array(t);for(;r.length-n.length>=0;){let i=r[0];for(let s=0;s<n.length;s++)r[s]^=Hm.mul(n[s],i);let o=0;for(;o<r.length&&r[o]===0;)o++;r=r.slice(o)}return r};Sa.generateECPolynomial=function(t){let n=new Uint8Array([1]);for(let r=0;r<t;r++)n=Sa.mul(n,new Uint8Array([1,Hm.exp(r)]));return n}});var Jb=de((kG,Zb)=>{"use strict";var Qb=Kb();function Wm(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}Wm.prototype.initialize=function(t){this.degree=t,this.genPoly=Qb.generateECPolynomial(this.degree)};Wm.prototype.encode=function(t){if(!this.genPoly)throw new Error("Encoder not initialized");let n=new Uint8Array(t.length+this.degree);n.set(t);let r=Qb.mod(n,this.genPoly),i=this.degree-r.length;if(i>0){let o=new Uint8Array(this.degree);return o.set(r,i),o}return r};Zb.exports=Wm});var zm=de(Xb=>{"use strict";Xb.isValid=function(t){return!isNaN(t)&&t>=1&&t<=40}});var qm=de(Wn=>{"use strict";var eD="[0-9]+",$j="[A-Z $%*+\\-./:]+",Ta="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";Ta=Ta.replace(/u/g,"\\u");var Hj="(?:(?![A-Z0-9 $%*+\\-./:]|"+Ta+`)(?:.|[\r
]))+`;Wn.KANJI=new RegExp(Ta,"g");Wn.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");Wn.BYTE=new RegExp(Hj,"g");Wn.NUMERIC=new RegExp(eD,"g");Wn.ALPHANUMERIC=new RegExp($j,"g");var Wj=new RegExp("^"+Ta+"$"),zj=new RegExp("^"+eD+"$"),qj=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");Wn.testKanji=function(t){return Wj.test(t)};Wn.testNumeric=function(t){return zj.test(t)};Wn.testAlphanumeric=function(t){return qj.test(t)}});var Cr=de(Me=>{"use strict";var Gj=zm(),Gm=qm();Me.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]};Me.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]};Me.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]};Me.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]};Me.MIXED={bit:-1};Me.getCharCountIndicator=function(t,n){if(!t.ccBits)throw new Error("Invalid mode: "+t);if(!Gj.isValid(n))throw new Error("Invalid version: "+n);return n>=1&&n<10?t.ccBits[0]:n<27?t.ccBits[1]:t.ccBits[2]};Me.getBestModeForData=function(t){return Gm.testNumeric(t)?Me.NUMERIC:Gm.testAlphanumeric(t)?Me.ALPHANUMERIC:Gm.testKanji(t)?Me.KANJI:Me.BYTE};Me.toString=function(t){if(t&&t.id)return t.id;throw new Error("Invalid mode")};Me.isValid=function(t){return t&&t.bit&&t.ccBits};function Yj(e){if(typeof e!="string")throw new Error("Param is not a string");switch(e.toLowerCase()){case"numeric":return Me.NUMERIC;case"alphanumeric":return Me.ALPHANUMERIC;case"kanji":return Me.KANJI;case"byte":return Me.BYTE;default:throw new Error("Unknown mode: "+e)}}Me.from=function(t,n){if(Me.isValid(t))return t;try{return Yj(t)}catch{return n}}});var oD=de(si=>{"use strict";var ku=_r(),Kj=$m(),tD=Au(),Ir=Cr(),Ym=zm(),rD=7973,nD=ku.getBCHDigit(rD);function Qj(e,t,n){for(let r=1;r<=40;r++)if(t<=si.getCapacity(r,n,e))return r}function iD(e,t){return Ir.getCharCountIndicator(e,t)+4}function Zj(e,t){let n=0;return e.forEach(function(r){let i=iD(r.mode,t);n+=i+r.getBitsLength()}),n}function Jj(e,t){for(let n=1;n<=40;n++)if(Zj(e,n)<=si.getCapacity(n,t,Ir.MIXED))return n}si.from=function(t,n){return Ym.isValid(t)?parseInt(t,10):n};si.getCapacity=function(t,n,r){if(!Ym.isValid(t))throw new Error("Invalid QR Code version");typeof r>"u"&&(r=Ir.BYTE);let i=ku.getSymbolTotalCodewords(t),o=Kj.getTotalCodewordsCount(t,n),s=(i-o)*8;if(r===Ir.MIXED)return s;let a=s-iD(r,t);switch(r){case Ir.NUMERIC:return Math.floor(a/10*3);case Ir.ALPHANUMERIC:return Math.floor(a/11*2);case Ir.KANJI:return Math.floor(a/13);case Ir.BYTE:default:return Math.floor(a/8)}};si.getBestVersionForData=function(t,n){let r,i=tD.from(n,tD.M);if(Array.isArray(t)){if(t.length>1)return Jj(t,i);if(t.length===0)return 1;r=t[0]}else r=t;return Qj(r.mode,r.getLength(),i)};si.getEncodedBits=function(t){if(!Ym.isValid(t)||t<7)throw new Error("Invalid QR Code version");let n=t<<12;for(;ku.getBCHDigit(n)-nD>=0;)n^=rD<<ku.getBCHDigit(n)-nD;return t<<12|n}});var lD=de(cD=>{"use strict";var Km=_r(),aD=1335,Xj=21522,sD=Km.getBCHDigit(aD);cD.getEncodedBits=function(t,n){let r=t.bit<<3|n,i=r<<10;for(;Km.getBCHDigit(i)-sD>=0;)i^=aD<<Km.getBCHDigit(i)-sD;return(r<<10|i)^Xj}});var dD=de((BG,uD)=>{"use strict";var eU=Cr();function Do(e){this.mode=eU.NUMERIC,this.data=e.toString()}Do.getBitsLength=function(t){return 10*Math.floor(t/3)+(t%3?t%3*3+1:0)};Do.prototype.getLength=function(){return this.data.length};Do.prototype.getBitsLength=function(){return Do.getBitsLength(this.data.length)};Do.prototype.write=function(t){let n,r,i;for(n=0;n+3<=this.data.length;n+=3)r=this.data.substr(n,3),i=parseInt(r,10),t.put(i,10);let o=this.data.length-n;o>0&&(r=this.data.substr(n),i=parseInt(r,10),t.put(i,o*3+1))};uD.exports=Do});var hD=de(($G,fD)=>{"use strict";var tU=Cr(),Qm=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function So(e){this.mode=tU.ALPHANUMERIC,this.data=e}So.getBitsLength=function(t){return 11*Math.floor(t/2)+6*(t%2)};So.prototype.getLength=function(){return this.data.length};So.prototype.getBitsLength=function(){return So.getBitsLength(this.data.length)};So.prototype.write=function(t){let n;for(n=0;n+2<=this.data.length;n+=2){let r=Qm.indexOf(this.data[n])*45;r+=Qm.indexOf(this.data[n+1]),t.put(r,11)}this.data.length%2&&t.put(Qm.indexOf(this.data[n]),6)};fD.exports=So});var gD=de((HG,pD)=>{"use strict";pD.exports=function(t){for(var n=[],r=t.length,i=0;i<r;i++){var o=t.charCodeAt(i);if(o>=55296&&o<=56319&&r>i+1){var s=t.charCodeAt(i+1);s>=56320&&s<=57343&&(o=(o-55296)*1024+s-56320+65536,i+=1)}if(o<128){n.push(o);continue}if(o<2048){n.push(o>>6|192),n.push(o&63|128);continue}if(o<55296||o>=57344&&o<65536){n.push(o>>12|224),n.push(o>>6&63|128),n.push(o&63|128);continue}if(o>=65536&&o<=1114111){n.push(o>>18|240),n.push(o>>12&63|128),n.push(o>>6&63|128),n.push(o&63|128);continue}n.push(239,191,189)}return new Uint8Array(n).buffer}});var vD=de((WG,mD)=>{"use strict";var nU=gD(),rU=Cr();function To(e){this.mode=rU.BYTE,typeof e=="string"&&(e=nU(e)),this.data=new Uint8Array(e)}To.getBitsLength=function(t){return t*8};To.prototype.getLength=function(){return this.data.length};To.prototype.getBitsLength=function(){return To.getBitsLength(this.data.length)};To.prototype.write=function(e){for(let t=0,n=this.data.length;t<n;t++)e.put(this.data[t],8)};mD.exports=To});var _D=de((zG,yD)=>{"use strict";var iU=Cr(),oU=_r();function Mo(e){this.mode=iU.KANJI,this.data=e}Mo.getBitsLength=function(t){return t*13};Mo.prototype.getLength=function(){return this.data.length};Mo.prototype.getBitsLength=function(){return Mo.getBitsLength(this.data.length)};Mo.prototype.write=function(e){let t;for(t=0;t<this.data.length;t++){let n=oU.toSJIS(this.data[t]);if(n>=33088&&n<=40956)n-=33088;else if(n>=57408&&n<=60351)n-=49472;else throw new Error("Invalid SJIS character: "+this.data[t]+`
Make sure your charset is UTF-8`);n=(n>>>8&255)*192+(n&255),e.put(n,13)}};yD.exports=Mo});var wD=de((qG,Zm)=>{"use strict";var Ma={single_source_shortest_paths:function(e,t,n){var r={},i={};i[t]=0;var o=Ma.PriorityQueue.make();o.push(t,0);for(var s,a,c,l,u,d,f,h,p;!o.empty();){s=o.pop(),a=s.value,l=s.cost,u=e[a]||{};for(c in u)u.hasOwnProperty(c)&&(d=u[c],f=l+d,h=i[c],p=typeof i[c]>"u",(p||h>f)&&(i[c]=f,o.push(c,f),r[c]=a))}if(typeof n<"u"&&typeof i[n]>"u"){var y=["Could not find a path from ",t," to ",n,"."].join("");throw new Error(y)}return r},extract_shortest_path_from_predecessor_list:function(e,t){for(var n=[],r=t,i;r;)n.push(r),i=e[r],r=e[r];return n.reverse(),n},find_path:function(e,t,n){var r=Ma.single_source_shortest_paths(e,t,n);return Ma.extract_shortest_path_from_predecessor_list(r,n)},PriorityQueue:{make:function(e){var t=Ma.PriorityQueue,n={},r;e=e||{};for(r in t)t.hasOwnProperty(r)&&(n[r]=t[r]);return n.queue=[],n.sorter=e.sorter||t.default_sorter,n},default_sorter:function(e,t){return e.cost-t.cost},push:function(e,t){var n={value:e,cost:t};this.queue.push(n),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};typeof Zm<"u"&&(Zm.exports=Ma)});var MD=de(Ao=>{"use strict";var ue=Cr(),ED=dD(),bD=hD(),DD=vD(),SD=_D(),Aa=qm(),Fu=_r(),sU=wD();function CD(e){return unescape(encodeURIComponent(e)).length}function Na(e,t,n){let r=[],i;for(;(i=e.exec(n))!==null;)r.push({data:i[0],index:i.index,mode:t,length:i[0].length});return r}function TD(e){let t=Na(Aa.NUMERIC,ue.NUMERIC,e),n=Na(Aa.ALPHANUMERIC,ue.ALPHANUMERIC,e),r,i;return Fu.isKanjiModeEnabled()?(r=Na(Aa.BYTE,ue.BYTE,e),i=Na(Aa.KANJI,ue.KANJI,e)):(r=Na(Aa.BYTE_KANJI,ue.BYTE,e),i=[]),t.concat(n,r,i).sort(function(s,a){return s.index-a.index}).map(function(s){return{data:s.data,mode:s.mode,length:s.length}})}function Jm(e,t){switch(t){case ue.NUMERIC:return ED.getBitsLength(e);case ue.ALPHANUMERIC:return bD.getBitsLength(e);case ue.KANJI:return SD.getBitsLength(e);case ue.BYTE:return DD.getBitsLength(e)}}function aU(e){return e.reduce(function(t,n){let r=t.length-1>=0?t[t.length-1]:null;return r&&r.mode===n.mode?(t[t.length-1].data+=n.data,t):(t.push(n),t)},[])}function cU(e){let t=[];for(let n=0;n<e.length;n++){let r=e[n];switch(r.mode){case ue.NUMERIC:t.push([r,{data:r.data,mode:ue.ALPHANUMERIC,length:r.length},{data:r.data,mode:ue.BYTE,length:r.length}]);break;case ue.ALPHANUMERIC:t.push([r,{data:r.data,mode:ue.BYTE,length:r.length}]);break;case ue.KANJI:t.push([r,{data:r.data,mode:ue.BYTE,length:CD(r.data)}]);break;case ue.BYTE:t.push([{data:r.data,mode:ue.BYTE,length:CD(r.data)}])}}return t}function lU(e,t){let n={},r={start:{}},i=["start"];for(let o=0;o<e.length;o++){let s=e[o],a=[];for(let c=0;c<s.length;c++){let l=s[c],u=""+o+c;a.push(u),n[u]={node:l,lastCount:0},r[u]={};for(let d=0;d<i.length;d++){let f=i[d];n[f]&&n[f].node.mode===l.mode?(r[f][u]=Jm(n[f].lastCount+l.length,l.mode)-Jm(n[f].lastCount,l.mode),n[f].lastCount+=l.length):(n[f]&&(n[f].lastCount=l.length),r[f][u]=Jm(l.length,l.mode)+4+ue.getCharCountIndicator(l.mode,t))}}i=a}for(let o=0;o<i.length;o++)r[i[o]].end=0;return{map:r,table:n}}function ID(e,t){let n,r=ue.getBestModeForData(e);if(n=ue.from(t,r),n!==ue.BYTE&&n.bit<r.bit)throw new Error('"'+e+'" cannot be encoded with mode '+ue.toString(n)+`.
 Suggested mode is: `+ue.toString(r));switch(n===ue.KANJI&&!Fu.isKanjiModeEnabled()&&(n=ue.BYTE),n){case ue.NUMERIC:return new ED(e);case ue.ALPHANUMERIC:return new bD(e);case ue.KANJI:return new SD(e);case ue.BYTE:return new DD(e)}}Ao.fromArray=function(t){return t.reduce(function(n,r){return typeof r=="string"?n.push(ID(r,null)):r.data&&n.push(ID(r.data,r.mode)),n},[])};Ao.fromString=function(t,n){let r=TD(t,Fu.isKanjiModeEnabled()),i=cU(r),o=lU(i,n),s=sU.find_path(o.map,"start","end"),a=[];for(let c=1;c<s.length-1;c++)a.push(o.table[s[c]].node);return Ao.fromArray(aU(a))};Ao.rawSplit=function(t){return Ao.fromArray(TD(t,Fu.isKanjiModeEnabled()))}});var ND=de(AD=>{"use strict";var Vu=_r(),Xm=Au(),uU=Ub(),dU=$b(),fU=Hb(),hU=qb(),nv=Gb(),rv=$m(),pU=Jb(),Lu=oD(),gU=lD(),mU=Cr(),ev=MD();function vU(e,t){let n=e.size,r=hU.getPositions(t);for(let i=0;i<r.length;i++){let o=r[i][0],s=r[i][1];for(let a=-1;a<=7;a++)if(!(o+a<=-1||n<=o+a))for(let c=-1;c<=7;c++)s+c<=-1||n<=s+c||(a>=0&&a<=6&&(c===0||c===6)||c>=0&&c<=6&&(a===0||a===6)||a>=2&&a<=4&&c>=2&&c<=4?e.set(o+a,s+c,!0,!0):e.set(o+a,s+c,!1,!0))}}function yU(e){let t=e.size;for(let n=8;n<t-8;n++){let r=n%2===0;e.set(n,6,r,!0),e.set(6,n,r,!0)}}function _U(e,t){let n=fU.getPositions(t);for(let r=0;r<n.length;r++){let i=n[r][0],o=n[r][1];for(let s=-2;s<=2;s++)for(let a=-2;a<=2;a++)s===-2||s===2||a===-2||a===2||s===0&&a===0?e.set(i+s,o+a,!0,!0):e.set(i+s,o+a,!1,!0)}}function wU(e,t){let n=e.size,r=Lu.getEncodedBits(t),i,o,s;for(let a=0;a<18;a++)i=Math.floor(a/3),o=a%3+n-8-3,s=(r>>a&1)===1,e.set(i,o,s,!0),e.set(o,i,s,!0)}function tv(e,t,n){let r=e.size,i=gU.getEncodedBits(t,n),o,s;for(o=0;o<15;o++)s=(i>>o&1)===1,o<6?e.set(o,8,s,!0):o<8?e.set(o+1,8,s,!0):e.set(r-15+o,8,s,!0),o<8?e.set(8,r-o-1,s,!0):o<9?e.set(8,15-o-1+1,s,!0):e.set(8,15-o-1,s,!0);e.set(r-8,8,1,!0)}function CU(e,t){let n=e.size,r=-1,i=n-1,o=7,s=0;for(let a=n-1;a>0;a-=2)for(a===6&&a--;;){for(let c=0;c<2;c++)if(!e.isReserved(i,a-c)){let l=!1;s<t.length&&(l=(t[s]>>>o&1)===1),e.set(i,a-c,l),o--,o===-1&&(s++,o=7)}if(i+=r,i<0||n<=i){i-=r,r=-r;break}}}function IU(e,t,n){let r=new uU;n.forEach(function(c){r.put(c.mode.bit,4),r.put(c.getLength(),mU.getCharCountIndicator(c.mode,e)),c.write(r)});let i=Vu.getSymbolTotalCodewords(e),o=rv.getTotalCodewordsCount(e,t),s=(i-o)*8;for(r.getLengthInBits()+4<=s&&r.put(0,4);r.getLengthInBits()%8!==0;)r.putBit(0);let a=(s-r.getLengthInBits())/8;for(let c=0;c<a;c++)r.put(c%2?17:236,8);return EU(r,e,t)}function EU(e,t,n){let r=Vu.getSymbolTotalCodewords(t),i=rv.getTotalCodewordsCount(t,n),o=r-i,s=rv.getBlocksCount(t,n),a=r%s,c=s-a,l=Math.floor(r/s),u=Math.floor(o/s),d=u+1,f=l-u,h=new pU(f),p=0,y=new Array(s),E=new Array(s),M=0,se=new Uint8Array(e.buffer);for(let Ge=0;Ge<s;Ge++){let pn=Ge<c?u:d;y[Ge]=se.slice(p,p+pn),E[Ge]=h.encode(y[Ge]),p+=pn,M=Math.max(M,pn)}let me=new Uint8Array(r),Ae=0,Ne,pe;for(Ne=0;Ne<M;Ne++)for(pe=0;pe<s;pe++)Ne<y[pe].length&&(me[Ae++]=y[pe][Ne]);for(Ne=0;Ne<f;Ne++)for(pe=0;pe<s;pe++)me[Ae++]=E[pe][Ne];return me}function bU(e,t,n,r){let i;if(Array.isArray(e))i=ev.fromArray(e);else if(typeof e=="string"){let l=t;if(!l){let u=ev.rawSplit(e);l=Lu.getBestVersionForData(u,n)}i=ev.fromString(e,l||40)}else throw new Error("Invalid data");let o=Lu.getBestVersionForData(i,n);if(!o)throw new Error("The amount of data is too big to be stored in a QR Code");if(!t)t=o;else if(t<o)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+o+`.
`);let s=IU(t,n,i),a=Vu.getSymbolSize(t),c=new dU(a);return vU(c,t),yU(c),_U(c,t),tv(c,n,0),t>=7&&wU(c,t),CU(c,s),isNaN(r)&&(r=nv.getBestMask(c,tv.bind(null,c,n))),nv.applyMask(r,c),tv(c,n,r),{modules:c,version:t,errorCorrectionLevel:n,maskPattern:r,segments:i}}AD.create=function(t,n){if(typeof t>"u"||t==="")throw new Error("No input text");let r=Xm.M,i,o;return typeof n<"u"&&(r=Xm.from(n.errorCorrectionLevel,Xm.M),i=Lu.from(n.version),o=nv.from(n.maskPattern),n.toSJISFunc&&Vu.setToSJISFunction(n.toSJISFunc)),bU(t,i,r,o)}});var iv=de(ai=>{"use strict";function xD(e){if(typeof e=="number"&&(e=e.toString()),typeof e!="string")throw new Error("Color should be defined as hex string");let t=e.slice().replace("#","").split("");if(t.length<3||t.length===5||t.length>8)throw new Error("Invalid hex color: "+e);(t.length===3||t.length===4)&&(t=Array.prototype.concat.apply([],t.map(function(r){return[r,r]}))),t.length===6&&t.push("F","F");let n=parseInt(t.join(""),16);return{r:n>>24&255,g:n>>16&255,b:n>>8&255,a:n&255,hex:"#"+t.slice(0,6).join("")}}ai.getOptions=function(t){t||(t={}),t.color||(t.color={});let n=typeof t.margin>"u"||t.margin===null||t.margin<0?4:t.margin,r=t.width&&t.width>=21?t.width:void 0,i=t.scale||4;return{width:r,scale:r?4:i,margin:n,color:{dark:xD(t.color.dark||"#000000ff"),light:xD(t.color.light||"#ffffffff")},type:t.type,rendererOpts:t.rendererOpts||{}}};ai.getScale=function(t,n){return n.width&&n.width>=t+n.margin*2?n.width/(t+n.margin*2):n.scale};ai.getImageWidth=function(t,n){let r=ai.getScale(t,n);return Math.floor((t+n.margin*2)*r)};ai.qrToImageData=function(t,n,r){let i=n.modules.size,o=n.modules.data,s=ai.getScale(i,r),a=Math.floor((i+r.margin*2)*s),c=r.margin*s,l=[r.color.light,r.color.dark];for(let u=0;u<a;u++)for(let d=0;d<a;d++){let f=(u*a+d)*4,h=r.color.light;if(u>=c&&d>=c&&u<a-c&&d<a-c){let p=Math.floor((u-c)/s),y=Math.floor((d-c)/s);h=l[o[p*i+y]?1:0]}t[f++]=h.r,t[f++]=h.g,t[f++]=h.b,t[f]=h.a}}});var RD=de(ju=>{"use strict";var ov=iv();function DU(e,t,n){e.clearRect(0,0,t.width,t.height),t.style||(t.style={}),t.height=n,t.width=n,t.style.height=n+"px",t.style.width=n+"px"}function SU(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}ju.render=function(t,n,r){let i=r,o=n;typeof i>"u"&&(!n||!n.getContext)&&(i=n,n=void 0),n||(o=SU()),i=ov.getOptions(i);let s=ov.getImageWidth(t.modules.size,i),a=o.getContext("2d"),c=a.createImageData(s,s);return ov.qrToImageData(c.data,t,i),DU(a,o,s),a.putImageData(c,0,0),o};ju.renderToDataURL=function(t,n,r){let i=r;typeof i>"u"&&(!n||!n.getContext)&&(i=n,n=void 0),i||(i={});let o=ju.render(t,n,i),s=i.type||"image/png",a=i.rendererOpts||{};return o.toDataURL(s,a.quality)}});var kD=de(PD=>{"use strict";var TU=iv();function OD(e,t){let n=e.a/255,r=t+'="'+e.hex+'"';return n<1?r+" "+t+'-opacity="'+n.toFixed(2).slice(1)+'"':r}function sv(e,t,n){let r=e+t;return typeof n<"u"&&(r+=" "+n),r}function MU(e,t,n){let r="",i=0,o=!1,s=0;for(let a=0;a<e.length;a++){let c=Math.floor(a%t),l=Math.floor(a/t);!c&&!o&&(o=!0),e[a]?(s++,a>0&&c>0&&e[a-1]||(r+=o?sv("M",c+n,.5+l+n):sv("m",i,0),i=0,o=!1),c+1<t&&e[a+1]||(r+=sv("h",s),s=0)):i++}return r}PD.render=function(t,n,r){let i=TU.getOptions(n),o=t.modules.size,s=t.modules.data,a=o+i.margin*2,c=i.color.light.a?"<path "+OD(i.color.light,"fill")+' d="M0 0h'+a+"v"+a+'H0z"/>':"",l="<path "+OD(i.color.dark,"stroke")+' d="'+MU(s,o,i.margin)+'"/>',u='viewBox="0 0 '+a+" "+a+'"',f='<svg xmlns="http://www.w3.org/2000/svg" '+(i.width?'width="'+i.width+'" height="'+i.width+'" ':"")+u+' shape-rendering="crispEdges">'+c+l+`</svg>
`;return typeof r=="function"&&r(null,f),f}});var LD=de(xa=>{"use strict";var AU=Lb(),av=ND(),FD=RD(),NU=kD();function cv(e,t,n,r,i){let o=[].slice.call(arguments,1),s=o.length,a=typeof o[s-1]=="function";if(!a&&!AU())throw new Error("Callback required as last argument");if(a){if(s<2)throw new Error("Too few arguments provided");s===2?(i=n,n=t,t=r=void 0):s===3&&(t.getContext&&typeof i>"u"?(i=r,r=void 0):(i=r,r=n,n=t,t=void 0))}else{if(s<1)throw new Error("Too few arguments provided");return s===1?(n=t,t=r=void 0):s===2&&!t.getContext&&(r=n,n=t,t=void 0),new Promise(function(c,l){try{let u=av.create(n,r);c(e(u,t,r))}catch(u){l(u)}})}try{let c=av.create(n,r);i(null,e(c,t,r))}catch(c){i(c)}}xa.create=av.create;xa.toCanvas=cv.bind(null,FD.render);xa.toDataURL=cv.bind(null,FD.renderToDataURL);xa.toString=cv.bind(null,function(e,t,n){return NU.render(e,n)})});function fv(e,t){return Object.is(e,t)}var xe=null,Ra=!1,Oa=1,gn=Symbol("SIGNAL");function Y(e){let t=xe;return xe=e,t}function hv(){return xe}var Oo={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function zu(e){if(Ra)throw new Error("");if(xe===null)return;xe.consumerOnSignalRead(e);let t=xe.nextProducerIndex++;if(La(xe),t<xe.producerNode.length&&xe.producerNode[t]!==e&&Ro(xe)){let n=xe.producerNode[t];Fa(n,xe.producerIndexOfThis[t])}xe.producerNode[t]!==e&&(xe.producerNode[t]=e,xe.producerIndexOfThis[t]=Ro(xe)?vv(e,xe,t):0),xe.producerLastReadVersion[t]=e.version}function tS(){Oa++}function pv(e){if(!(Ro(e)&&!e.dirty)&&!(!e.dirty&&e.lastCleanEpoch===Oa)){if(!e.producerMustRecompute(e)&&!Gu(e)){e.dirty=!1,e.lastCleanEpoch=Oa;return}e.producerRecomputeValue(e),e.dirty=!1,e.lastCleanEpoch=Oa}}function gv(e){if(e.liveConsumerNode===void 0)return;let t=Ra;Ra=!0;try{for(let n of e.liveConsumerNode)n.dirty||nS(n)}finally{Ra=t}}function mv(){return xe?.consumerAllowSignalWrites!==!1}function nS(e){e.dirty=!0,gv(e),e.consumerMarkedDirty?.(e)}function ka(e){return e&&(e.nextProducerIndex=0),Y(e)}function qu(e,t){if(Y(t),!(!e||e.producerNode===void 0||e.producerIndexOfThis===void 0||e.producerLastReadVersion===void 0)){if(Ro(e))for(let n=e.nextProducerIndex;n<e.producerNode.length;n++)Fa(e.producerNode[n],e.producerIndexOfThis[n]);for(;e.producerNode.length>e.nextProducerIndex;)e.producerNode.pop(),e.producerLastReadVersion.pop(),e.producerIndexOfThis.pop()}}function Gu(e){La(e);for(let t=0;t<e.producerNode.length;t++){let n=e.producerNode[t],r=e.producerLastReadVersion[t];if(r!==n.version||(pv(n),r!==n.version))return!0}return!1}function Yu(e){if(La(e),Ro(e))for(let t=0;t<e.producerNode.length;t++)Fa(e.producerNode[t],e.producerIndexOfThis[t]);e.producerNode.length=e.producerLastReadVersion.length=e.producerIndexOfThis.length=0,e.liveConsumerNode&&(e.liveConsumerNode.length=e.liveConsumerIndexOfThis.length=0)}function vv(e,t,n){if(yv(e),e.liveConsumerNode.length===0&&_v(e))for(let r=0;r<e.producerNode.length;r++)e.producerIndexOfThis[r]=vv(e.producerNode[r],e,r);return e.liveConsumerIndexOfThis.push(n),e.liveConsumerNode.push(t)-1}function Fa(e,t){if(yv(e),e.liveConsumerNode.length===1&&_v(e))for(let r=0;r<e.producerNode.length;r++)Fa(e.producerNode[r],e.producerIndexOfThis[r]);let n=e.liveConsumerNode.length-1;if(e.liveConsumerNode[t]=e.liveConsumerNode[n],e.liveConsumerIndexOfThis[t]=e.liveConsumerIndexOfThis[n],e.liveConsumerNode.length--,e.liveConsumerIndexOfThis.length--,t<e.liveConsumerNode.length){let r=e.liveConsumerIndexOfThis[t],i=e.liveConsumerNode[t];La(i),i.producerIndexOfThis[r]=t}}function Ro(e){return e.consumerIsAlwaysLive||(e?.liveConsumerNode?.length??0)>0}function La(e){e.producerNode??=[],e.producerIndexOfThis??=[],e.producerLastReadVersion??=[]}function yv(e){e.liveConsumerNode??=[],e.liveConsumerIndexOfThis??=[]}function _v(e){return e.producerNode!==void 0}function wv(e){let t=Object.create(rS);t.computation=e;let n=()=>{if(pv(t),zu(t),t.value===Pa)throw t.error;return t.value};return n[gn]=t,n}var Hu=Symbol("UNSET"),Wu=Symbol("COMPUTING"),Pa=Symbol("ERRORED"),rS=Q(C({},Oo),{value:Hu,dirty:!0,error:null,equal:fv,producerMustRecompute(e){return e.value===Hu||e.value===Wu},producerRecomputeValue(e){if(e.value===Wu)throw new Error("Detected cycle in computations.");let t=e.value;e.value=Wu;let n=ka(e),r;try{r=e.computation()}catch(i){r=Pa,e.error=i}finally{qu(e,n)}if(t!==Hu&&t!==Pa&&r!==Pa&&e.equal(t,r)){e.value=t;return}e.value=r,e.version++}});function iS(){throw new Error}var Cv=iS;function Iv(){Cv()}function Ev(e){Cv=e}var oS=null;function bv(e){let t=Object.create(Sv);t.value=e;let n=()=>(zu(t),t.value);return n[gn]=t,n}function Ku(e,t){mv()||Iv(),e.equal(e.value,t)||(e.value=t,sS(e))}function Dv(e,t){mv()||Iv(),Ku(e,t(e.value))}var Sv=Q(C({},Oo),{equal:fv,value:void 0});function sS(e){e.version++,tS(),gv(e),oS?.()}function j(e){return typeof e=="function"}function ci(e){let n=e(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Va=ci(e=>function(n){e(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Po(e,t){if(e){let n=e.indexOf(t);0<=n&&e.splice(n,1)}}var Ee=class e{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(j(r))try{r()}catch(o){t=o instanceof Va?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{Tv(o)}catch(s){t=t??[],s instanceof Va?t=[...t,...s.errors]:t.push(s)}}if(t)throw new Va(t)}}add(t){var n;if(t&&t!==this)if(this.closed)Tv(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(t)}}_hasParent(t){let{_parentage:n}=this;return n===t||Array.isArray(n)&&n.includes(t)}_addParent(t){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t}_removeParent(t){let{_parentage:n}=this;n===t?this._parentage=null:Array.isArray(n)&&Po(n,t)}remove(t){let{_finalizers:n}=this;n&&Po(n,t),t instanceof e&&t._removeParent(this)}};Ee.EMPTY=(()=>{let e=new Ee;return e.closed=!0,e})();var Qu=Ee.EMPTY;function ja(e){return e instanceof Ee||e&&"closed"in e&&j(e.remove)&&j(e.add)&&j(e.unsubscribe)}function Tv(e){j(e)?e():e.unsubscribe()}var Rt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var li={setTimeout(e,t,...n){let{delegate:r}=li;return r?.setTimeout?r.setTimeout(e,t,...n):setTimeout(e,t,...n)},clearTimeout(e){let{delegate:t}=li;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0};function Ua(e){li.setTimeout(()=>{let{onUnhandledError:t}=Rt;if(t)t(e);else throw e})}function ko(){}var Mv=Zu("C",void 0,void 0);function Av(e){return Zu("E",void 0,e)}function Nv(e){return Zu("N",e,void 0)}function Zu(e,t,n){return{kind:e,value:t,error:n}}var Er=null;function ui(e){if(Rt.useDeprecatedSynchronousErrorHandling){let t=!Er;if(t&&(Er={errorThrown:!1,error:null}),e(),t){let{errorThrown:n,error:r}=Er;if(Er=null,n)throw r}}else e()}function xv(e){Rt.useDeprecatedSynchronousErrorHandling&&Er&&(Er.errorThrown=!0,Er.error=e)}var br=class extends Ee{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,ja(t)&&t.add(this)):this.destination=lS}static create(t,n,r){return new di(t,n,r)}next(t){this.isStopped?Xu(Nv(t),this):this._next(t)}error(t){this.isStopped?Xu(Av(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?Xu(Mv,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},aS=Function.prototype.bind;function Ju(e,t){return aS.call(e,t)}var ed=class{constructor(t){this.partialObserver=t}next(t){let{partialObserver:n}=this;if(n.next)try{n.next(t)}catch(r){Ba(r)}}error(t){let{partialObserver:n}=this;if(n.error)try{n.error(t)}catch(r){Ba(r)}else Ba(t)}complete(){let{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(n){Ba(n)}}},di=class extends br{constructor(t,n,r){super();let i;if(j(t)||!t)i={next:t??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&Rt.useDeprecatedNextContext?(o=Object.create(t),o.unsubscribe=()=>this.unsubscribe(),i={next:t.next&&Ju(t.next,o),error:t.error&&Ju(t.error,o),complete:t.complete&&Ju(t.complete,o)}):i=t}this.destination=new ed(i)}};function Ba(e){Rt.useDeprecatedSynchronousErrorHandling?xv(e):Ua(e)}function cS(e){throw e}function Xu(e,t){let{onStoppedNotification:n}=Rt;n&&li.setTimeout(()=>n(e,t))}var lS={closed:!0,next:ko,error:cS,complete:ko};var fi=typeof Symbol=="function"&&Symbol.observable||"@@observable";function dt(e){return e}function td(...e){return nd(e)}function nd(e){return e.length===0?dt:e.length===1?e[0]:function(n){return e.reduce((r,i)=>i(r),n)}}var $=(()=>{class e{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new e;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=dS(n)?n:new di(n,r,i);return ui(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=Rv(r),new r((i,o)=>{let s=new di({next:a=>{try{n(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[fi](){return this}pipe(...n){return nd(n)(this)}toPromise(n){return n=Rv(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return e.create=t=>new e(t),e})();function Rv(e){var t;return(t=e??Rt.Promise)!==null&&t!==void 0?t:Promise}function uS(e){return e&&j(e.next)&&j(e.error)&&j(e.complete)}function dS(e){return e&&e instanceof br||uS(e)&&ja(e)}function rd(e){return j(e?.lift)}function X(e){return t=>{if(rd(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Z(e,t,n,r,i){return new id(e,t,n,r,i)}var id=class extends br{constructor(t,n,r,i,o,s){super(t),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(c){t.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){t.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((t=this.onFinalize)===null||t===void 0||t.call(this))}}};function hi(){return X((e,t)=>{let n=null;e._refCount++;let r=Z(t,void 0,void 0,void 0,()=>{if(!e||e._refCount<=0||0<--e._refCount){n=null;return}let i=e._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),t.unsubscribe()});e.subscribe(r),r.closed||(n=e.connect())})}var pi=class extends ${constructor(t,n){super(),this.source=t,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,rd(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){let t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new Ee;let n=this.getSubject();t.add(this.source.subscribe(Z(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),t.closed&&(this._connection=null,t=Ee.EMPTY)}return t}refCount(){return hi()(this)}};var Ov=ci(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Be=(()=>{class e extends ${constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new $a(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new Ov}next(n){ui(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){ui(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){ui(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Qu:(this.currentObservers=null,o.push(n),new Ee(()=>{this.currentObservers=null,Po(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new $;return n.source=this,n}}return e.create=(t,n)=>new $a(t,n),e})(),$a=class extends Be{constructor(t,n){super(),this.destination=t,this.source=n}next(t){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,t)}error(t){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,t)}complete(){var t,n;(n=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||n===void 0||n.call(t)}_subscribe(t){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(t))!==null&&r!==void 0?r:Qu}};var $e=class extends Be{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){let n=super._subscribe(t);return!n.closed&&t.next(this._value),n}getValue(){let{hasError:t,thrownError:n,_value:r}=this;if(t)throw n;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}};var ft=new $(e=>e.complete());function Pv(e){return e&&j(e.schedule)}function kv(e){return e[e.length-1]}function Ha(e){return j(kv(e))?e.pop():void 0}function zn(e){return Pv(kv(e))?e.pop():void 0}function od(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function Lv(e,t,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(u){try{l(r.next(u))}catch(d){s(d)}}function c(u){try{l(r.throw(u))}catch(d){s(d)}}function l(u){u.done?o(u.value):i(u.value).then(a,c)}l((r=r.apply(e,t||[])).next())})}function Fv(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Dr(e){return this instanceof Dr?(this.v=e,this):new Dr(e)}function Vv(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(h){return function(p){return Promise.resolve(p).then(h,d)}}function a(h,p){r[h]&&(i[h]=function(y){return new Promise(function(E,M){o.push([h,y,E,M])>1||c(h,y)})},p&&(i[h]=p(i[h])))}function c(h,p){try{l(r[h](p))}catch(y){f(o[0][3],y)}}function l(h){h.value instanceof Dr?Promise.resolve(h.value.v).then(u,d):f(o[0][2],h)}function u(h){c("next",h)}function d(h){c("throw",h)}function f(h,p){h(p),o.shift(),o.length&&c(o[0][0],o[0][1])}}function jv(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof Fv=="function"?Fv(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=e[o]&&function(s){return new Promise(function(a,c){s=e[o](s),i(a,c,s.done,s.value)})}}function i(o,s,a,c){Promise.resolve(c).then(function(l){o({value:l,done:a})},s)}}var Wa=e=>e&&typeof e.length=="number"&&typeof e!="function";function za(e){return j(e?.then)}function qa(e){return j(e[fi])}function Ga(e){return Symbol.asyncIterator&&j(e?.[Symbol.asyncIterator])}function Ya(e){return new TypeError(`You provided ${e!==null&&typeof e=="object"?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function fS(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Ka=fS();function Qa(e){return j(e?.[Ka])}function Za(e){return Vv(this,arguments,function*(){let n=e.getReader();try{for(;;){let{value:r,done:i}=yield Dr(n.read());if(i)return yield Dr(void 0);yield yield Dr(r)}}finally{n.releaseLock()}})}function Ja(e){return j(e?.getReader)}function be(e){if(e instanceof $)return e;if(e!=null){if(qa(e))return hS(e);if(Wa(e))return pS(e);if(za(e))return gS(e);if(Ga(e))return Uv(e);if(Qa(e))return mS(e);if(Ja(e))return vS(e)}throw Ya(e)}function hS(e){return new $(t=>{let n=e[fi]();if(j(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function pS(e){return new $(t=>{for(let n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}function gS(e){return new $(t=>{e.then(n=>{t.closed||(t.next(n),t.complete())},n=>t.error(n)).then(null,Ua)})}function mS(e){return new $(t=>{for(let n of e)if(t.next(n),t.closed)return;t.complete()})}function Uv(e){return new $(t=>{yS(e,t).catch(n=>t.error(n))})}function vS(e){return Uv(Za(e))}function yS(e,t){var n,r,i,o;return Lv(this,void 0,void 0,function*(){try{for(n=jv(e);r=yield n.next(),!r.done;){let s=r.value;if(t.next(s),t.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}t.complete()})}function rt(e,t,n,r=0,i=!1){let o=t.schedule(function(){n(),i?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(o),!i)return o}function qn(e,t=0){return X((n,r)=>{n.subscribe(Z(r,i=>rt(r,e,()=>r.next(i),t),()=>rt(r,e,()=>r.complete(),t),i=>rt(r,e,()=>r.error(i),t)))})}function Gn(e,t=0){return X((n,r)=>{r.add(e.schedule(()=>n.subscribe(r),t))})}function Bv(e,t){return be(e).pipe(Gn(t),qn(t))}function $v(e,t){return be(e).pipe(Gn(t),qn(t))}function Hv(e,t){return new $(n=>{let r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}function Wv(e,t){return new $(n=>{let r;return rt(n,t,()=>{r=e[Ka](),rt(n,t,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>j(r?.return)&&r.return()})}function Xa(e,t){if(!e)throw new Error("Iterable cannot be null");return new $(n=>{rt(n,t,()=>{let r=e[Symbol.asyncIterator]();rt(n,t,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function zv(e,t){return Xa(Za(e),t)}function qv(e,t){if(e!=null){if(qa(e))return Bv(e,t);if(Wa(e))return Hv(e,t);if(za(e))return $v(e,t);if(Ga(e))return Xa(e,t);if(Qa(e))return Wv(e,t);if(Ja(e))return zv(e,t)}throw Ya(e)}function ne(e,t){return t?qv(e,t):be(e)}function L(...e){let t=zn(e);return ne(e,t)}function gi(e,t){let n=j(e)?e:()=>e,r=i=>i.error(n());return new $(t?i=>t.schedule(r,0,i):r)}function sd(e){return!!e&&(e instanceof $||j(e.lift)&&j(e.subscribe))}var mn=ci(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"});function H(e,t){return X((n,r)=>{let i=0;n.subscribe(Z(r,o=>{r.next(e.call(t,o,i++))}))})}var{isArray:_S}=Array;function wS(e,t){return _S(t)?e(...t):e(t)}function ec(e){return H(t=>wS(e,t))}var{isArray:CS}=Array,{getPrototypeOf:IS,prototype:ES,keys:bS}=Object;function tc(e){if(e.length===1){let t=e[0];if(CS(t))return{args:t,keys:null};if(DS(t)){let n=bS(t);return{args:n.map(r=>t[r]),keys:n}}}return{args:e,keys:null}}function DS(e){return e&&typeof e=="object"&&IS(e)===ES}function nc(e,t){return e.reduce((n,r,i)=>(n[r]=t[i],n),{})}function rc(...e){let t=zn(e),n=Ha(e),{args:r,keys:i}=tc(e);if(r.length===0)return ne([],t);let o=new $(SS(r,t,i?s=>nc(i,s):dt));return n?o.pipe(ec(n)):o}function SS(e,t,n=dt){return r=>{Gv(t,()=>{let{length:i}=e,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)Gv(t,()=>{let l=ne(e[c],t),u=!1;l.subscribe(Z(r,d=>{o[c]=d,u||(u=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function Gv(e,t,n){e?rt(n,e,t):t()}function Yv(e,t,n,r,i,o,s,a){let c=[],l=0,u=0,d=!1,f=()=>{d&&!c.length&&!l&&t.complete()},h=y=>l<r?p(y):c.push(y),p=y=>{o&&t.next(y),l++;let E=!1;be(n(y,u++)).subscribe(Z(t,M=>{i?.(M),o?h(M):t.next(M)},()=>{E=!0},void 0,()=>{if(E)try{for(l--;c.length&&l<r;){let M=c.shift();s?rt(t,s,()=>p(M)):p(M)}f()}catch(M){t.error(M)}}))};return e.subscribe(Z(t,h,()=>{d=!0,f()})),()=>{a?.()}}function Re(e,t,n=1/0){return j(t)?Re((r,i)=>H((o,s)=>t(r,o,i,s))(be(e(r,i))),n):(typeof t=="number"&&(n=t),X((r,i)=>Yv(r,i,e,n)))}function ad(e=1/0){return Re(dt,e)}function Kv(){return ad(1)}function mi(...e){return Kv()(ne(e,zn(e)))}function ic(e){return new $(t=>{be(e()).subscribe(t)})}function cd(...e){let t=Ha(e),{args:n,keys:r}=tc(e),i=new $(o=>{let{length:s}=n;if(!s){o.complete();return}let a=new Array(s),c=s,l=s;for(let u=0;u<s;u++){let d=!1;be(n[u]).subscribe(Z(o,f=>{d||(d=!0,l--),a[u]=f},()=>c--,void 0,()=>{(!c||!d)&&(l||o.next(r?nc(r,a):a),o.complete())}))}});return t?i.pipe(ec(t)):i}function Ot(e,t){return X((n,r)=>{let i=0;n.subscribe(Z(r,o=>e.call(t,o,i++)&&r.next(o)))})}function it(e){return X((t,n)=>{let r=null,i=!1,o;r=t.subscribe(Z(n,void 0,void 0,s=>{o=be(e(s,it(e)(t))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function Qv(e,t,n,r,i){return(o,s)=>{let a=n,c=t,l=0;o.subscribe(Z(s,u=>{let d=l++;c=a?e(c,u,d):(a=!0,u),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function vi(e,t){return j(t)?Re(e,t,1):Re(e,1)}function Yn(e){return X((t,n)=>{let r=!1;t.subscribe(Z(n,i=>{r=!0,n.next(i)},()=>{r||n.next(e),n.complete()}))})}function vn(e){return e<=0?()=>ft:X((t,n)=>{let r=0;t.subscribe(Z(n,i=>{++r<=e&&(n.next(i),e<=r&&n.complete())}))})}function ld(e){return H(()=>e)}function oc(e=TS){return X((t,n)=>{let r=!1;t.subscribe(Z(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(e())))})}function TS(){return new mn}function Fo(e){return X((t,n)=>{try{t.subscribe(n)}finally{n.add(e)}})}function Yt(e,t){let n=arguments.length>=2;return r=>r.pipe(e?Ot((i,o)=>e(i,o,r)):dt,vn(1),n?Yn(t):oc(()=>new mn))}function yi(e){return e<=0?()=>ft:X((t,n)=>{let r=[];t.subscribe(Z(n,i=>{r.push(i),e<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function ud(e,t){let n=arguments.length>=2;return r=>r.pipe(e?Ot((i,o)=>e(i,o,r)):dt,yi(1),n?Yn(t):oc(()=>new mn))}function dd(e,t){return X(Qv(e,t,arguments.length>=2,!0))}function fd(...e){let t=zn(e);return X((n,r)=>{(t?mi(e,n,t):mi(e,n)).subscribe(r)})}function ht(e,t){return X((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(Z(r,c=>{i?.unsubscribe();let l=0,u=o++;be(e(c,u)).subscribe(i=Z(r,d=>r.next(t?t(c,d,u,l++):d),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function hd(e){return X((t,n)=>{be(e).subscribe(Z(n,()=>n.complete(),ko)),!n.closed&&t.subscribe(n)})}function Oe(e,t,n){let r=j(e)||t||n?{next:e,error:t,complete:n}:e;return r?X((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(Z(o,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),o.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):dt}var Fy="https://g.co/ng/security#xss",S=class extends Error{constructor(t,n){super(kf(t,n)),this.code=t}};function kf(e,t){return`${`NG0${Math.abs(e)}`}${t?": "+t:""}`}function Vc(e){return{toString:e}.toString()}var Md=globalThis;function ge(e){for(let t in e)if(e[t]===ge)return t;throw Error("Could not find renamed property on target object.")}function MS(e,t){for(let n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function st(e){if(typeof e=="string")return e;if(Array.isArray(e))return"["+e.map(st).join(", ")+"]";if(e==null)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;let t=e.toString();if(t==null)return""+t;let n=t.indexOf(`
`);return n===-1?t:t.substring(0,n)}function Ad(e,t){return e==null||e===""?t===null?"":t:t==null||t===""?e:e+" "+t}var AS=ge({__forward_ref__:ge});function Lr(e){return e.__forward_ref__=Lr,e.toString=function(){return st(this())},e}function Je(e){return Ly(e)?e():e}function Ly(e){return typeof e=="function"&&e.hasOwnProperty(AS)&&e.__forward_ref__===Lr}function T(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function En(e){return{providers:e.providers||[],imports:e.imports||[]}}function jc(e){return Zv(e,jy)||Zv(e,Uy)}function Vy(e){return jc(e)!==null}function Zv(e,t){return e.hasOwnProperty(t)?e[t]:null}function NS(e){let t=e&&(e[jy]||e[Uy]);return t||null}function Jv(e){return e&&(e.hasOwnProperty(Xv)||e.hasOwnProperty(xS))?e[Xv]:null}var jy=ge({\u0275prov:ge}),Xv=ge({\u0275inj:ge}),Uy=ge({ngInjectableDef:ge}),xS=ge({ngInjectorDef:ge}),P=class{constructor(t,n){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=T({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function By(e){return e&&!!e.\u0275providers}var RS=ge({\u0275cmp:ge}),OS=ge({\u0275dir:ge}),PS=ge({\u0275pipe:ge}),kS=ge({\u0275mod:ge}),vc=ge({\u0275fac:ge}),jo=ge({__NG_ELEMENT_ID__:ge}),ey=ge({__NG_ENV_ID__:ge});function Uo(e){return typeof e=="string"?e:e==null?"":String(e)}function FS(e){return typeof e=="function"?e.name||e.toString():typeof e=="object"&&e!=null&&typeof e.type=="function"?e.type.name||e.type.toString():Uo(e)}function LS(e,t){let n=t?`. Dependency path: ${t.join(" > ")} > ${e}`:"";throw new S(-200,e)}function Ff(e,t){throw new S(-201,!1)}var W=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}(W||{}),Nd;function $y(){return Nd}function yt(e){let t=Nd;return Nd=e,t}function Hy(e,t,n){let r=jc(e);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&W.Optional)return null;if(t!==void 0)return t;Ff(e,"Injector")}var VS={},Bo=VS,jS="__NG_DI_FLAG__",yc="ngTempTokenPath",US="ngTokenPath",BS=/\n/gm,$S="\u0275",ty="__source",Ii;function HS(){return Ii}function Kn(e){let t=Ii;return Ii=e,t}function WS(e,t=W.Default){if(Ii===void 0)throw new S(-203,!1);return Ii===null?Hy(e,void 0,t):Ii.get(e,t&W.Optional?null:void 0,t)}function z(e,t=W.Default){return($y()||WS)(Je(e),t)}function I(e,t=W.Default){return z(e,Uc(t))}function Uc(e){return typeof e>"u"||typeof e=="number"?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function xd(e){let t=[];for(let n=0;n<e.length;n++){let r=Je(e[n]);if(Array.isArray(r)){if(r.length===0)throw new S(900,!1);let i,o=W.Default;for(let s=0;s<r.length;s++){let a=r[s],c=zS(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}t.push(z(i,o))}else t.push(z(r))}return t}function zS(e){return e[jS]}function qS(e,t,n,r){let i=e[yc];throw t[ty]&&i.unshift(t[ty]),e.message=GS(`
`+e.message,i,n,r),e[US]=i,e[yc]=null,e}function GS(e,t,n,r=null){e=e&&e.charAt(0)===`
`&&e.charAt(1)==$S?e.slice(2):e;let i=st(t);if(Array.isArray(t))i=t.map(st).join(" -> ");else if(typeof t=="object"){let o=[];for(let s in t)if(t.hasOwnProperty(s)){let a=t[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):st(a)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${e.replace(BS,`
  `)}`}function bi(e,t){let n=e.hasOwnProperty(vc);return n?e[vc]:null}function YS(e,t,n){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],o=t[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}function KS(e){return e.flat(Number.POSITIVE_INFINITY)}function Lf(e,t){e.forEach(n=>Array.isArray(n)?Lf(n,t):t(n))}function Wy(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function _c(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function QS(e,t,n,r){let i=e.length;if(i==t)e.push(n,r);else if(i===1)e.push(r,e[0]),e[0]=n;else{for(i--,e.push(e[i-1],e[i]);i>t;){let o=i-2;e[i]=e[o],i--}e[t]=n,e[t+1]=r}}function Vf(e,t,n){let r=Xo(e,t);return r>=0?e[r|1]=n:(r=~r,QS(e,r,t,n)),r}function pd(e,t){let n=Xo(e,t);if(n>=0)return e[n|1]}function Xo(e,t){return ZS(e,t,1)}function ZS(e,t,n){let r=0,i=e.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=e[o<<n];if(t===s)return o<<n;s>t?i=o:r=o+1}return~(i<<n)}var Di={},ot=[],Si=new P(""),zy=new P("",-1),qy=new P(""),wc=class{get(t,n=Bo){if(n===Bo){let r=new Error(`NullInjectorError: No provider for ${st(t)}!`);throw r.name="NullInjectorError",r}return n}},Gy=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}(Gy||{}),Zt=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}(Zt||{}),Jn=function(e){return e[e.None=0]="None",e[e.SignalBased=1]="SignalBased",e[e.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",e}(Jn||{});function JS(e,t,n){let r=e.length;for(;;){let i=e.indexOf(t,n);if(i===-1)return i;if(i===0||e.charCodeAt(i-1)<=32){let o=t.length;if(i+o===r||e.charCodeAt(i+o)<=32)return i}n=i+1}}function Rd(e,t,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];e.setAttribute(t,s,a,o)}else{let o=i,s=n[++r];eT(o)?e.setProperty(t,o,s):e.setAttribute(t,o,s),r++}}return r}function XS(e){return e===3||e===4||e===6}function eT(e){return e.charCodeAt(0)===64}function $o(e,t){if(!(t===null||t.length===0))if(e===null||e.length===0)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){let i=t[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?ny(e,n,i,null,t[++r]):ny(e,n,i,null,null))}}return e}function ny(e,t,n,r,i){let o=0,s=e.length;if(t===-1)s=-1;else for(;o<e.length;){let a=e[o++];if(typeof a=="number"){if(a===t){s=-1;break}else if(a>t){s=o-1;break}}}for(;o<e.length;){let a=e[o];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(e[o+1]=i);return}else if(r===e[o+1]){e[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(e.splice(s,0,t),o=s+1),e.splice(o++,0,n),r!==null&&e.splice(o++,0,r),i!==null&&e.splice(o++,0,i)}var Yy="ng-template";function tT(e,t,n,r){let i=0;if(r){for(;i<t.length&&typeof t[i]=="string";i+=2)if(t[i]==="class"&&JS(t[i+1].toLowerCase(),n,0)!==-1)return!0}else if(jf(e))return!1;if(i=t.indexOf(1,i),i>-1){let o;for(;++i<t.length&&typeof(o=t[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function jf(e){return e.type===4&&e.value!==Yy}function nT(e,t,n){let r=e.type===4&&!n?Yy:e.value;return t===r}function rT(e,t,n){let r=4,i=e.attrs,o=i!==null?sT(i):0,s=!1;for(let a=0;a<t.length;a++){let c=t[a];if(typeof c=="number"){if(!s&&!Pt(r)&&!Pt(c))return!1;if(s&&Pt(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!nT(e,c,n)||c===""&&t.length===1){if(Pt(r))return!1;s=!0}}else if(r&8){if(i===null||!tT(e,i,c,n)){if(Pt(r))return!1;s=!0}}else{let l=t[++a],u=iT(c,i,jf(e),n);if(u===-1){if(Pt(r))return!1;s=!0;continue}if(l!==""){let d;if(u>o?d="":d=i[u+1].toLowerCase(),r&2&&l!==d){if(Pt(r))return!1;s=!0}}}}return Pt(r)||s}function Pt(e){return(e&1)===0}function iT(e,t,n,r){if(t===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<t.length;){let s=t[i];if(s===e)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=t[++i];for(;typeof a=="string";)a=t[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return aT(t,e)}function oT(e,t,n=!1){for(let r=0;r<t.length;r++)if(rT(e,t[r],n))return!0;return!1}function sT(e){for(let t=0;t<e.length;t++){let n=e[t];if(XS(n))return t}return e.length}function aT(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){let r=e[n];if(typeof r=="number")return-1;if(r===t)return n;n++}return-1}function ry(e,t){return e?":not("+t.trim()+")":t}function cT(e){let t=e[0],n=1,r=2,i="",o=!1;for(;n<e.length;){let s=e[n];if(typeof s=="string")if(r&2){let a=e[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Pt(s)&&(t+=ry(o,i),i=""),r=s,o=o||!Pt(r);n++}return i!==""&&(t+=ry(o,i)),t}function lT(e){return e.map(cT).join(",")}function uT(e){let t=[],n=[],r=1,i=2;for(;r<e.length;){let o=e[r];if(typeof o=="string")i===2?o!==""&&t.push(o,e[++r]):i===8&&n.push(o);else{if(!Pt(i))break;i=o}r++}return{attrs:t,classes:n}}function A(e){return Vc(()=>{let t=Xy(e),n=Q(C({},t),{decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===Gy.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&e.dependencies||null,getStandaloneInjector:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||Zt.Emulated,styles:e.styles||ot,_:null,schemas:e.schemas||null,tView:null,id:""});e_(n);let r=e.dependencies;return n.directiveDefs=oy(r,!1),n.pipeDefs=oy(r,!0),n.id=hT(n),n})}function dT(e){return Tr(e)||Ky(e)}function fT(e){return e!==null}function bn(e){return Vc(()=>({type:e.type,bootstrap:e.bootstrap||ot,declarations:e.declarations||ot,imports:e.imports||ot,exports:e.exports||ot,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function iy(e,t){if(e==null)return Di;let n={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r],o,s,a=Jn.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),t?(n[o]=a!==Jn.None?[r,a]:r,t[o]=s):n[o]=r}return n}function at(e){return Vc(()=>{let t=Xy(e);return e_(t),t})}function Tr(e){return e[RS]||null}function Ky(e){return e[OS]||null}function Qy(e){return e[PS]||null}function Zy(e){let t=Tr(e)||Ky(e)||Qy(e);return t!==null?t.standalone:!1}function Jy(e,t){let n=e[kS]||null;if(!n&&t===!0)throw new Error(`Type ${st(e)} does not have '\u0275mod' property.`);return n}function Xy(e){let t={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputTransforms:null,inputConfig:e.inputs||Di,exportAs:e.exportAs||null,standalone:e.standalone===!0,signals:e.signals===!0,selectors:e.selectors||ot,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:iy(e.inputs,t),outputs:iy(e.outputs),debugInfo:null}}function e_(e){e.features?.forEach(t=>t(e))}function oy(e,t){if(!e)return null;let n=t?Qy:dT;return()=>(typeof e=="function"?e():e).map(r=>n(r)).filter(fT)}function hT(e){let t=0,n=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,e.consts,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery].join("|");for(let i of n)t=Math.imul(31,t)+i.charCodeAt(0)<<0;return t+=2147483648,"c"+t}function Uf(e){return{\u0275providers:e}}function pT(...e){return{\u0275providers:t_(!0,e),\u0275fromNgModule:!0}}function t_(e,...t){let n=[],r=new Set,i,o=s=>{n.push(s)};return Lf(t,s=>{let a=s;Od(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&n_(i,o),n}function n_(e,t){for(let n=0;n<e.length;n++){let{ngModule:r,providers:i}=e[n];Bf(i,o=>{t(o,r)})}}function Od(e,t,n,r){if(e=Je(e),!e)return!1;let i=null,o=Jv(e),s=!o&&Tr(e);if(!o&&!s){let c=e.ngModule;if(o=Jv(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=e}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of c)Od(l,t,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{Lf(o.imports,u=>{Od(u,t,n,r)&&(l||=[],l.push(u))})}finally{}l!==void 0&&n_(l,t)}if(!a){let l=bi(i)||(()=>new i);t({provide:i,useFactory:l,deps:ot},i),t({provide:qy,useValue:i,multi:!0},i),t({provide:Si,useValue:()=>z(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let l=e;Bf(c,u=>{t(u,l)})}}else return!1;return i!==e&&e.providers!==void 0}function Bf(e,t){for(let n of e)By(n)&&(n=n.\u0275providers),Array.isArray(n)?Bf(n,t):t(n)}var gT=ge({provide:String,useValue:ge});function r_(e){return e!==null&&typeof e=="object"&&gT in e}function mT(e){return!!(e&&e.useExisting)}function vT(e){return!!(e&&e.useFactory)}function Ti(e){return typeof e=="function"}function yT(e){return!!e.useClass}var Bc=new P(""),dc={},_T={},gd;function $f(){return gd===void 0&&(gd=new wc),gd}var wt=class{},Ho=class extends wt{get destroyed(){return this._destroyed}constructor(t,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,kd(t,s=>this.processProvider(s)),this.records.set(zy,_i(void 0,this)),i.has("environment")&&this.records.set(wt,_i(void 0,this));let o=this.records.get(Bc);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(qy,ot,W.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let t=Y(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Y(t)}}onDestroy(t){return this.assertNotDestroyed(),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){this.assertNotDestroyed();let n=Kn(this),r=yt(void 0),i;try{return t()}finally{Kn(n),yt(r)}}get(t,n=Bo,r=W.Default){if(this.assertNotDestroyed(),t.hasOwnProperty(ey))return t[ey](this);r=Uc(r);let i,o=Kn(this),s=yt(void 0);try{if(!(r&W.SkipSelf)){let c=this.records.get(t);if(c===void 0){let l=bT(t)&&jc(t);l&&this.injectableDefInScope(l)?c=_i(Pd(t),dc):c=null,this.records.set(t,c)}if(c!=null)return this.hydrate(t,c)}let a=r&W.Self?$f():this.parent;return n=r&W.Optional&&n===Bo?null:n,a.get(t,n)}catch(a){if(a.name==="NullInjectorError"){if((a[yc]=a[yc]||[]).unshift(st(t)),o)throw a;return qS(a,t,"R3InjectorError",this.source)}else throw a}finally{yt(s),Kn(o)}}resolveInjectorInitializers(){let t=Y(null),n=Kn(this),r=yt(void 0),i;try{let o=this.get(Si,ot,W.Self);for(let s of o)s()}finally{Kn(n),yt(r),Y(t)}}toString(){let t=[],n=this.records;for(let r of n.keys())t.push(st(r));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new S(205,!1)}processProvider(t){t=Je(t);let n=Ti(t)?t:Je(t&&t.provide),r=CT(t);if(!Ti(t)&&t.multi===!0){let i=this.records.get(n);i||(i=_i(void 0,dc,!0),i.factory=()=>xd(i.multi),this.records.set(n,i)),n=t,i.multi.push(t)}this.records.set(n,r)}hydrate(t,n){let r=Y(null);try{return n.value===dc&&(n.value=_T,n.value=n.factory()),typeof n.value=="object"&&n.value&&ET(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{Y(r)}}injectableDefInScope(t){if(!t.providedIn)return!1;let n=Je(t.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(t){let n=this._onDestroyHooks.indexOf(t);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Pd(e){let t=jc(e),n=t!==null?t.factory:bi(e);if(n!==null)return n;if(e instanceof P)throw new S(204,!1);if(e instanceof Function)return wT(e);throw new S(204,!1)}function wT(e){if(e.length>0)throw new S(204,!1);let n=NS(e);return n!==null?()=>n.factory(e):()=>new e}function CT(e){if(r_(e))return _i(void 0,e.useValue);{let t=i_(e);return _i(t,dc)}}function i_(e,t,n){let r;if(Ti(e)){let i=Je(e);return bi(i)||Pd(i)}else if(r_(e))r=()=>Je(e.useValue);else if(vT(e))r=()=>e.useFactory(...xd(e.deps||[]));else if(mT(e))r=()=>z(Je(e.useExisting));else{let i=Je(e&&(e.useClass||e.provide));if(IT(e))r=()=>new i(...xd(e.deps));else return bi(i)||Pd(i)}return r}function _i(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function IT(e){return!!e.deps}function ET(e){return e!==null&&typeof e=="object"&&typeof e.ngOnDestroy=="function"}function bT(e){return typeof e=="function"||typeof e=="object"&&e instanceof P}function kd(e,t){for(let n of e)Array.isArray(n)?kd(n,t):n&&By(n)?kd(n.\u0275providers,t):t(n)}function Dn(e,t){e instanceof Ho&&e.assertNotDestroyed();let n,r=Kn(e),i=yt(void 0);try{return t()}finally{Kn(r),yt(i)}}function DT(){return $y()!==void 0||HS()!=null}function ST(e){return typeof e=="function"}var Sn=0,V=1,O=2,Qe=3,Ft=4,Vt=5,Wo=6,Cc=7,Ye=8,Mi=9,yn=10,De=11,zo=12,sy=13,ki=14,Lt=15,Mr=16,wi=17,_n=18,$c=19,o_=20,Qn=21,md=22,_t=23,Ct=25,s_=1;var Ar=7,Ic=8,Ai=9,Ke=10,Ec=function(e){return e[e.None=0]="None",e[e.HasTransplantedViews=2]="HasTransplantedViews",e}(Ec||{});function Zn(e){return Array.isArray(e)&&typeof e[s_]=="object"}function Tn(e){return Array.isArray(e)&&e[s_]===!0}function a_(e){return(e.flags&4)!==0}function Hc(e){return e.componentOffset>-1}function Hf(e){return(e.flags&1)===1}function Xn(e){return!!e.template}function Fd(e){return(e[O]&512)!==0}var Ld=class{constructor(t,n,r){this.previousValue=t,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function c_(e,t,n,r){t!==null?t.applyValueToInputSignal(t,r):e[n]=r}function Mn(){return l_}function l_(e){return e.type.prototype.ngOnChanges&&(e.setInput=MT),TT}Mn.ngInherit=!0;function TT(){let e=d_(this),t=e?.current;if(t){let n=e.previous;if(n===Di)e.previous=t;else for(let r in t)n[r]=t[r];e.current=null,this.ngOnChanges(t)}}function MT(e,t,n,r,i){let o=this.declaredInputs[r],s=d_(e)||AT(e,{previous:Di,current:null}),a=s.current||(s.current={}),c=s.previous,l=c[o];a[o]=new Ld(l&&l.currentValue,n,c===Di),c_(e,t,i,n)}var u_="__ngSimpleChanges__";function d_(e){return e[u_]||null}function AT(e,t){return e[u_]=t}var ay=null;var Kt=function(e,t,n){ay?.(e,t,n)},NT="svg",xT="math";function Jt(e){for(;Array.isArray(e);)e=e[Sn];return e}function f_(e,t){return Jt(t[e])}function It(e,t){return Jt(t[e.index])}function Wf(e,t){return e.data[t]}function RT(e,t){return e[t]}function nr(e,t){let n=t[e];return Zn(n)?n:n[Sn]}function OT(e){return(e[O]&4)===4}function zf(e){return(e[O]&128)===128}function PT(e){return Tn(e[Qe])}function Ni(e,t){return t==null?null:e[t]}function h_(e){e[wi]=0}function p_(e){e[O]&1024||(e[O]|=1024,zf(e)&&zc(e))}function kT(e,t){for(;e>0;)t=t[ki],e--;return t}function Wc(e){return!!(e[O]&9216||e[_t]?.dirty)}function Vd(e){e[yn].changeDetectionScheduler?.notify(8),e[O]&64&&(e[O]|=1024),Wc(e)&&zc(e)}function zc(e){e[yn].changeDetectionScheduler?.notify(0);let t=Nr(e);for(;t!==null&&!(t[O]&8192||(t[O]|=8192,!zf(t)));)t=Nr(t)}function g_(e,t){if((e[O]&256)===256)throw new S(911,!1);e[Qn]===null&&(e[Qn]=[]),e[Qn].push(t)}function FT(e,t){if(e[Qn]===null)return;let n=e[Qn].indexOf(t);n!==-1&&e[Qn].splice(n,1)}function Nr(e){let t=e[Qe];return Tn(t)?t[Qe]:t}var q={lFrame:b_(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var m_=!1;function LT(){return q.lFrame.elementDepthCount}function VT(){q.lFrame.elementDepthCount++}function jT(){q.lFrame.elementDepthCount--}function v_(){return q.bindingsEnabled}function UT(){return q.skipHydrationRootTNode!==null}function BT(e){return q.skipHydrationRootTNode===e}function $T(){q.skipHydrationRootTNode=null}function ee(){return q.lFrame.lView}function He(){return q.lFrame.tView}function ke(e){return q.lFrame.contextLView=e,e[Ye]}function Fe(e){return q.lFrame.contextLView=null,e}function ct(){let e=y_();for(;e!==null&&e.type===64;)e=e.parent;return e}function y_(){return q.lFrame.currentTNode}function HT(){let e=q.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}function es(e,t){let n=q.lFrame;n.currentTNode=e,n.isParent=t}function __(){return q.lFrame.isParent}function WT(){q.lFrame.isParent=!1}function zT(){return q.lFrame.contextLView}function w_(){return m_}function cy(e){m_=e}function qT(){return q.lFrame.bindingIndex}function GT(e){return q.lFrame.bindingIndex=e}function Fi(){return q.lFrame.bindingIndex++}function qf(e){let t=q.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}function YT(){return q.lFrame.inI18n}function KT(e,t){let n=q.lFrame;n.bindingIndex=n.bindingRootIndex=e,jd(t)}function QT(){return q.lFrame.currentDirectiveIndex}function jd(e){q.lFrame.currentDirectiveIndex=e}function ZT(e){let t=q.lFrame.currentDirectiveIndex;return t===-1?null:e[t]}function C_(){return q.lFrame.currentQueryIndex}function Gf(e){q.lFrame.currentQueryIndex=e}function JT(e){let t=e[V];return t.type===2?t.declTNode:t.type===1?e[Vt]:null}function I_(e,t,n){if(n&W.SkipSelf){let i=t,o=e;for(;i=i.parent,i===null&&!(n&W.Host);)if(i=JT(o),i===null||(o=o[ki],i.type&10))break;if(i===null)return!1;t=i,e=o}let r=q.lFrame=E_();return r.currentTNode=t,r.lView=e,!0}function Yf(e){let t=E_(),n=e[V];q.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function E_(){let e=q.lFrame,t=e===null?null:e.child;return t===null?b_(e):t}function b_(e){let t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return e!==null&&(e.child=t),t}function D_(){let e=q.lFrame;return q.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}var S_=D_;function Kf(){let e=D_();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function XT(e){return(q.lFrame.contextLView=kT(e,q.lFrame.contextLView))[Ye]}function An(){return q.lFrame.selectedIndex}function xr(e){q.lFrame.selectedIndex=e}function Qf(){let e=q.lFrame;return Wf(e.tView,e.selectedIndex)}function eM(){return q.lFrame.currentNamespace}var T_=!0;function Zf(){return T_}function Jf(e){T_=e}function tM(e,t,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=t.type.prototype;if(r){let s=l_(t);(n.preOrderHooks??=[]).push(e,s),(n.preOrderCheckHooks??=[]).push(e,s)}i&&(n.preOrderHooks??=[]).push(0-e,i),o&&((n.preOrderHooks??=[]).push(e,o),(n.preOrderCheckHooks??=[]).push(e,o))}function Xf(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){let o=e.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=o;s&&(e.contentHooks??=[]).push(-n,s),a&&((e.contentHooks??=[]).push(n,a),(e.contentCheckHooks??=[]).push(n,a)),c&&(e.viewHooks??=[]).push(-n,c),l&&((e.viewHooks??=[]).push(n,l),(e.viewCheckHooks??=[]).push(n,l)),u!=null&&(e.destroyHooks??=[]).push(n,u)}}function fc(e,t,n){M_(e,t,3,n)}function hc(e,t,n,r){(e[O]&3)===n&&M_(e,t,n,r)}function vd(e,t){let n=e[O];(n&3)===t&&(n&=16383,n+=1,e[O]=n)}function M_(e,t,n,r){let i=r!==void 0?e[wi]&65535:0,o=r??-1,s=t.length-1,a=0;for(let c=i;c<s;c++)if(typeof t[c+1]=="number"){if(a=t[c],r!=null&&a>=r)break}else t[c]<0&&(e[wi]+=65536),(a<o||o==-1)&&(nM(e,n,t,c),e[wi]=(e[wi]&4294901760)+c+2),c++}function ly(e,t){Kt(4,e,t);let n=Y(null);try{t.call(e)}finally{Y(n),Kt(5,e,t)}}function nM(e,t,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=e[s];i?e[O]>>14<e[wi]>>16&&(e[O]&3)===t&&(e[O]+=16384,ly(a,o)):ly(a,o)}var Ei=-1,Rr=class{constructor(t,n,r){this.factory=t,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function rM(e){return e instanceof Rr}function iM(e){return(e.flags&8)!==0}function oM(e){return(e.flags&16)!==0}var yd={},Ud=class{constructor(t,n){this.injector=t,this.parentInjector=n}get(t,n,r){r=Uc(r);let i=this.injector.get(t,yd,r);return i!==yd||n===yd?i:this.parentInjector.get(t,n,r)}};function A_(e){return e!==Ei}function bc(e){return e&32767}function sM(e){return e>>16}function Dc(e,t){let n=sM(e),r=t;for(;n>0;)r=r[ki],n--;return r}var Bd=!0;function uy(e){let t=Bd;return Bd=e,t}var aM=256,N_=aM-1,x_=5,cM=0,Qt={};function lM(e,t,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(jo)&&(r=n[jo]),r==null&&(r=n[jo]=cM++);let i=r&N_,o=1<<i;t.data[e+(i>>x_)]|=o}function Sc(e,t){let n=R_(e,t);if(n!==-1)return n;let r=t[V];r.firstCreatePass&&(e.injectorIndex=t.length,_d(r.data,e),_d(t,null),_d(r.blueprint,null));let i=eh(e,t),o=e.injectorIndex;if(A_(i)){let s=bc(i),a=Dc(i,t),c=a[V].data;for(let l=0;l<8;l++)t[o+l]=a[s+l]|c[s+l]}return t[o+8]=i,o}function _d(e,t){e.push(0,0,0,0,0,0,0,0,t)}function R_(e,t){return e.injectorIndex===-1||e.parent&&e.parent.injectorIndex===e.injectorIndex||t[e.injectorIndex+8]===null?-1:e.injectorIndex}function eh(e,t){if(e.parent&&e.parent.injectorIndex!==-1)return e.parent.injectorIndex;let n=0,r=null,i=t;for(;i!==null;){if(r=L_(i),r===null)return Ei;if(n++,i=i[ki],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Ei}function $d(e,t,n){lM(e,t,n)}function O_(e,t,n){if(n&W.Optional||e!==void 0)return e;Ff(t,"NodeInjector")}function P_(e,t,n,r){if(n&W.Optional&&r===void 0&&(r=null),!(n&(W.Self|W.Host))){let i=e[Mi],o=yt(void 0);try{return i?i.get(t,r,n&W.Optional):Hy(t,r,n&W.Optional)}finally{yt(o)}}return O_(r,t,n)}function k_(e,t,n,r=W.Default,i){if(e!==null){if(t[O]&2048&&!(r&W.Self)){let s=hM(e,t,n,r,Qt);if(s!==Qt)return s}let o=F_(e,t,n,r,Qt);if(o!==Qt)return o}return P_(t,n,r,i)}function F_(e,t,n,r,i){let o=dM(n);if(typeof o=="function"){if(!I_(t,e,r))return r&W.Host?O_(i,n,r):P_(t,n,r,i);try{let s;if(s=o(r),s==null&&!(r&W.Optional))Ff(n);else return s}finally{S_()}}else if(typeof o=="number"){let s=null,a=R_(e,t),c=Ei,l=r&W.Host?t[Lt][Vt]:null;for((a===-1||r&W.SkipSelf)&&(c=a===-1?eh(e,t):t[a+8],c===Ei||!fy(r,!1)?a=-1:(s=t[V],a=bc(c),t=Dc(c,t)));a!==-1;){let u=t[V];if(dy(o,a,u.data)){let d=uM(a,t,n,s,r,l);if(d!==Qt)return d}c=t[a+8],c!==Ei&&fy(r,t[V].data[a+8]===l)&&dy(o,a,t)?(s=u,a=bc(c),t=Dc(c,t)):a=-1}}return i}function uM(e,t,n,r,i,o){let s=t[V],a=s.data[e+8],c=r==null?Hc(a)&&Bd:r!=s&&(a.type&3)!==0,l=i&W.Host&&o===a,u=pc(a,s,n,c,l);return u!==null?Or(t,s,u,a):Qt}function pc(e,t,n,r,i){let o=e.providerIndexes,s=t.data,a=o&1048575,c=e.directiveStart,l=e.directiveEnd,u=o>>20,d=r?a:a+u,f=i?a+u:l;for(let h=d;h<f;h++){let p=s[h];if(h<c&&n===p||h>=c&&p.type===n)return h}if(i){let h=s[c];if(h&&Xn(h)&&h.type===n)return c}return null}function Or(e,t,n,r){let i=e[n],o=t.data;if(rM(i)){let s=i;s.resolving&&LS(FS(o[n]));let a=uy(s.canSeeViewProviders);s.resolving=!0;let c,l=s.injectImpl?yt(s.injectImpl):null,u=I_(e,r,W.Default);try{i=e[n]=s.factory(void 0,o,e,r),t.firstCreatePass&&n>=r.directiveStart&&tM(n,o[n],t)}finally{l!==null&&yt(l),uy(a),s.resolving=!1,S_()}}return i}function dM(e){if(typeof e=="string")return e.charCodeAt(0)||0;let t=e.hasOwnProperty(jo)?e[jo]:void 0;return typeof t=="number"?t>=0?t&N_:fM:t}function dy(e,t,n){let r=1<<e;return!!(n[t+(e>>x_)]&r)}function fy(e,t){return!(e&W.Self)&&!(e&W.Host&&t)}var Sr=class{constructor(t,n){this._tNode=t,this._lView=n}get(t,n,r){return k_(this._tNode,this._lView,t,Uc(r),n)}};function fM(){return new Sr(ct(),ee())}function Li(e){return Vc(()=>{let t=e.prototype.constructor,n=t[vc]||Hd(t),r=Object.prototype,i=Object.getPrototypeOf(e.prototype).constructor;for(;i&&i!==r;){let o=i[vc]||Hd(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Hd(e){return Ly(e)?()=>{let t=Hd(Je(e));return t&&t()}:bi(e)}function hM(e,t,n,r,i){let o=e,s=t;for(;o!==null&&s!==null&&s[O]&2048&&!(s[O]&512);){let a=F_(o,s,n,r|W.Self,Qt);if(a!==Qt)return a;let c=o.parent;if(!c){let l=s[o_];if(l){let u=l.get(n,Qt,r);if(u!==Qt)return u}c=L_(s),s=s[ki]}o=c}return i}function L_(e){let t=e[V],n=t.type;return n===2?t.declTNode:n===1?e[Vt]:null}function hy(e,t=null,n=null,r){let i=V_(e,t,n,r);return i.resolveInjectorInitializers(),i}function V_(e,t=null,n=null,r,i=new Set){let o=[n||ot,pT(e)];return r=r||(typeof e=="object"?void 0:st(e)),new Ho(o,t||$f(),r||null,i)}var er=class e{static{this.THROW_IF_NOT_FOUND=Bo}static{this.NULL=new wc}static create(t,n){if(Array.isArray(t))return hy({name:""},n,t,"");{let r=t.name??"";return hy({name:r},t.parent,t.providers,r)}}static{this.\u0275prov=T({token:e,providedIn:"any",factory:()=>z(zy)})}static{this.__NG_ELEMENT_ID__=-1}};var pM=new P("");pM.__NG_ELEMENT_ID__=e=>{let t=ct();if(t===null)throw new S(204,!1);if(t.type&2)return t.value;if(e&W.Optional)return null;throw new S(204,!1)};var gM="ngOriginalError";function wd(e){return e[gM]}var j_=!0,U_=(()=>{class e{static{this.__NG_ELEMENT_ID__=mM}static{this.__NG_ENV_ID__=n=>n}}return e})(),Wd=class extends U_{constructor(t){super(),this._lView=t}onDestroy(t){return g_(this._lView,t),()=>FT(this._lView,t)}};function mM(){return new Wd(ee())}var Vi=(()=>{class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new $e(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=T({token:e,providedIn:"root",factory:()=>new e})}}return e})();var zd=class extends Be{constructor(t=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=t,DT()&&(this.destroyRef=I(U_,{optional:!0})??void 0,this.pendingTasks=I(Vi,{optional:!0})??void 0)}emit(t){let n=Y(null);try{super.next(t)}finally{Y(n)}}subscribe(t,n,r){let i=t,o=n||(()=>null),s=r;if(t&&typeof t=="object"){let c=t;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return t instanceof Ee&&t.add(a),a}wrapInTimeout(t){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{t(n),r!==void 0&&this.pendingTasks?.remove(r)})}}},we=zd;function Tc(...e){}function B_(e){let t,n;function r(){e=Tc;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),t!==void 0&&clearTimeout(t)}catch{}}return t=setTimeout(()=>{e(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{e(),r()})),()=>r()}function py(e){return queueMicrotask(()=>e()),()=>{e=Tc}}var th="isAngularZone",Mc=th+"_ID",vM=0,Pe=class e{constructor(t){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new we(!1),this.onMicrotaskEmpty=new we(!1),this.onStable=new we(!1),this.onError=new we(!1);let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=j_}=t;if(typeof Zone>"u")throw new S(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,wM(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(th)===!0}static assertInAngularZone(){if(!e.isInAngularZone())throw new S(909,!1)}static assertNotInAngularZone(){if(e.isInAngularZone())throw new S(909,!1)}run(t,n,r){return this._inner.run(t,n,r)}runTask(t,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,t,yM,Tc,Tc);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(t,n,r){return this._inner.runGuarded(t,n,r)}runOutsideAngular(t){return this._outer.run(t)}},yM={};function nh(e){if(e._nesting==0&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function _M(e){if(e.isCheckStableRunning||e.callbackScheduled)return;e.callbackScheduled=!0;function t(){B_(()=>{e.callbackScheduled=!1,qd(e),e.isCheckStableRunning=!0,nh(e),e.isCheckStableRunning=!1})}e.scheduleInRootZone?Zone.root.run(()=>{t()}):e._outer.run(()=>{t()}),qd(e)}function wM(e){let t=()=>{_M(e)},n=vM++;e._inner=e._inner.fork({name:"angular",properties:{[th]:!0,[Mc]:n,[Mc+n]:!0},onInvokeTask:(r,i,o,s,a,c)=>{if(CM(c))return r.invokeTask(o,s,a,c);try{return gy(e),r.invokeTask(o,s,a,c)}finally{(e.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||e.shouldCoalesceRunChangeDetection)&&t(),my(e)}},onInvoke:(r,i,o,s,a,c,l)=>{try{return gy(e),r.invoke(o,s,a,c,l)}finally{e.shouldCoalesceRunChangeDetection&&!e.callbackScheduled&&!IM(c)&&t(),my(e)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(e._hasPendingMicrotasks=s.microTask,qd(e),nh(e)):s.change=="macroTask"&&(e.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),e.runOutsideAngular(()=>e.onError.emit(s)),!1)})}function qd(e){e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&e.callbackScheduled===!0?e.hasPendingMicrotasks=!0:e.hasPendingMicrotasks=!1}function gy(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function my(e){e._nesting--,nh(e)}var Gd=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new we,this.onMicrotaskEmpty=new we,this.onStable=new we,this.onError=new we}run(t,n,r){return t.apply(n,r)}runGuarded(t,n,r){return t.apply(n,r)}runOutsideAngular(t){return t()}runTask(t,n,r,i){return t.apply(n,r)}};function CM(e){return $_(e,"__ignore_ng_zone__")}function IM(e){return $_(e,"__scheduler_tick__")}function $_(e,t){return!Array.isArray(e)||e.length!==1?!1:e[0]?.data?.[t]===!0}var wn=class{constructor(){this._console=console}handleError(t){let n=this._findOriginalError(t);this._console.error("ERROR",t),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(t){let n=t&&wd(t);for(;n&&wd(n);)n=wd(n);return n||null}},EM=new P("",{providedIn:"root",factory:()=>{let e=I(Pe),t=I(wn);return n=>e.runOutsideAngular(()=>t.handleError(n))}});function bM(){return ji(ct(),ee())}function ji(e,t){return new en(It(e,t))}var en=(()=>{class e{constructor(n){this.nativeElement=n}static{this.__NG_ELEMENT_ID__=bM}}return e})();function DM(e){return e instanceof en?e.nativeElement:e}function SM(){return this._results[Symbol.iterator]()}var Yd=class e{get changes(){return this._changes??=new we}constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let n=e.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=SM)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,n){return this._results.reduce(t,n)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,n){this.dirty=!1;let r=KS(t);(this._changesDetected=!YS(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(t){this._onDirty=t}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function H_(e){return(e.flags&128)===128}var W_=new Map,TM=0;function MM(){return TM++}function AM(e){W_.set(e[$c],e)}function Kd(e){W_.delete(e[$c])}var vy="__ngContext__";function Pr(e,t){Zn(t)?(e[vy]=t[$c],AM(t)):e[vy]=t}function z_(e){return G_(e[zo])}function q_(e){return G_(e[Ft])}function G_(e){for(;e!==null&&!Tn(e);)e=e[Ft];return e}var Qd;function Y_(e){Qd=e}function NM(){if(Qd!==void 0)return Qd;if(typeof document<"u")return document;throw new S(210,!1)}var rh=new P("",{providedIn:"root",factory:()=>xM}),xM="ng",ih=new P(""),Ui=new P("",{providedIn:"platform",factory:()=>"unknown"});var oh=new P("",{providedIn:"root",factory:()=>NM().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var RM="h",OM="b";var PM=()=>null;function sh(e,t,n=!1){return PM(e,t,n)}var K_=!1,kM=new P("",{providedIn:"root",factory:()=>K_});var sc;function FM(){if(sc===void 0&&(sc=null,Md.trustedTypes))try{sc=Md.trustedTypes.createPolicy("angular",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch{}return sc}function qc(e){return FM()?.createHTML(e)||e}var Cn=class{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Fy})`}},Zd=class extends Cn{getTypeName(){return"HTML"}},Jd=class extends Cn{getTypeName(){return"Style"}},Xd=class extends Cn{getTypeName(){return"Script"}},ef=class extends Cn{getTypeName(){return"URL"}},tf=class extends Cn{getTypeName(){return"ResourceURL"}};function Nn(e){return e instanceof Cn?e.changingThisBreaksApplicationSecurity:e}function Bi(e,t){let n=LM(e);if(n!=null&&n!==t){if(n==="ResourceURL"&&t==="URL")return!0;throw new Error(`Required a safe ${t}, got a ${n} (see ${Fy})`)}return n===t}function LM(e){return e instanceof Cn&&e.getTypeName()||null}function Q_(e){return new Zd(e)}function Z_(e){return new Jd(e)}function J_(e){return new Xd(e)}function X_(e){return new ef(e)}function ew(e){return new tf(e)}function VM(e){let t=new rf(e);return jM()?new nf(t):t}var nf=class{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{let n=new window.DOMParser().parseFromString(qc(t),"text/html").body;return n===null?this.inertDocumentHelper.getInertBodyElement(t):(n.firstChild?.remove(),n)}catch{return null}}},rf=class{constructor(t){this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(t){let n=this.inertDocument.createElement("template");return n.innerHTML=qc(t),n}};function jM(){try{return!!new window.DOMParser().parseFromString(qc(""),"text/html")}catch{return!1}}var UM=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function ah(e){return e=String(e),e.match(UM)?e:"unsafe:"+e}function xn(e){let t={};for(let n of e.split(","))t[n]=!0;return t}function ts(...e){let t={};for(let n of e)for(let r in n)n.hasOwnProperty(r)&&(t[r]=!0);return t}var tw=xn("area,br,col,hr,img,wbr"),nw=xn("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),rw=xn("rp,rt"),BM=ts(rw,nw),$M=ts(nw,xn("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),HM=ts(rw,xn("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),yy=ts(tw,$M,HM,BM),iw=xn("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),WM=xn("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),zM=xn("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),qM=ts(iw,WM,zM),GM=xn("script,style,template"),of=class{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let n=t.firstChild,r=!0,i=[];for(;n;){if(n.nodeType===Node.ELEMENT_NODE?r=this.startElement(n):n.nodeType===Node.TEXT_NODE?this.chars(n.nodeValue):this.sanitizedSomething=!0,r&&n.firstChild){i.push(n),n=QM(n);continue}for(;n;){n.nodeType===Node.ELEMENT_NODE&&this.endElement(n);let o=KM(n);if(o){n=o;break}n=i.pop()}}return this.buf.join("")}startElement(t){let n=_y(t).toLowerCase();if(!yy.hasOwnProperty(n))return this.sanitizedSomething=!0,!GM.hasOwnProperty(n);this.buf.push("<"),this.buf.push(n);let r=t.attributes;for(let i=0;i<r.length;i++){let o=r.item(i),s=o.name,a=s.toLowerCase();if(!qM.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let c=o.value;iw[a]&&(c=ah(c)),this.buf.push(" ",s,'="',wy(c),'"')}return this.buf.push(">"),!0}endElement(t){let n=_y(t).toLowerCase();yy.hasOwnProperty(n)&&!tw.hasOwnProperty(n)&&(this.buf.push("</"),this.buf.push(n),this.buf.push(">"))}chars(t){this.buf.push(wy(t))}};function YM(e,t){return(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function KM(e){let t=e.nextSibling;if(t&&e!==t.previousSibling)throw ow(t);return t}function QM(e){let t=e.firstChild;if(t&&YM(e,t))throw ow(t);return t}function _y(e){let t=e.nodeName;return typeof t=="string"?t:"FORM"}function ow(e){return new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`)}var ZM=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,JM=/([^\#-~ |!])/g;function wy(e){return e.replace(/&/g,"&amp;").replace(ZM,function(t){let n=t.charCodeAt(0),r=t.charCodeAt(1);return"&#"+((n-55296)*1024+(r-56320)+65536)+";"}).replace(JM,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var ac;function sw(e,t){let n=null;try{ac=ac||VM(e);let r=t?String(t):"";n=ac.getInertBodyElement(r);let i=5,o=r;do{if(i===0)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=ac.getInertBodyElement(r)}while(r!==o);let a=new of().sanitizeChildren(Cy(n)||n);return qc(a)}finally{if(n){let r=Cy(n)||n;for(;r.firstChild;)r.firstChild.remove()}}}function Cy(e){return"content"in e&&XM(e)?e.content:null}function XM(e){return e.nodeType===Node.ELEMENT_NODE&&e.nodeName==="TEMPLATE"}var rr=function(e){return e[e.NONE=0]="NONE",e[e.HTML=1]="HTML",e[e.STYLE=2]="STYLE",e[e.SCRIPT=3]="SCRIPT",e[e.URL=4]="URL",e[e.RESOURCE_URL=5]="RESOURCE_URL",e}(rr||{});function aw(e){return e instanceof Function?e():e}var In=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}(In||{}),eA;function ch(e,t){return eA(e,t)}function Ci(e,t,n,r,i){if(r!=null){let o,s=!1;Tn(r)?o=r:Zn(r)&&(s=!0,r=r[Sn]);let a=Jt(r);e===0&&n!==null?i==null?dw(t,n,a):Ac(t,n,a,i||null,!0):e===1&&n!==null?Ac(t,n,a,i||null,!0):e===2?gA(t,a,s):e===3&&t.destroyNode(a),o!=null&&vA(t,e,o,n,i)}}function tA(e,t){return e.createText(t)}function nA(e,t,n){e.setValue(t,n)}function cw(e,t,n){return e.createElement(t,n)}function rA(e,t){lw(e,t),t[Sn]=null,t[Vt]=null}function iA(e,t,n,r,i,o){r[Sn]=i,r[Vt]=t,Yc(e,r,n,1,i,o)}function lw(e,t){t[yn].changeDetectionScheduler?.notify(9),Yc(e,t,t[De],2,null,null)}function oA(e){let t=e[zo];if(!t)return Cd(e[V],e);for(;t;){let n=null;if(Zn(t))n=t[zo];else{let r=t[Ke];r&&(n=r)}if(!n){for(;t&&!t[Ft]&&t!==e;)Zn(t)&&Cd(t[V],t),t=t[Qe];t===null&&(t=e),Zn(t)&&Cd(t[V],t),n=t&&t[Ft]}t=n}}function sA(e,t,n,r){let i=Ke+r,o=n.length;r>0&&(n[i-1][Ft]=t),r<o-Ke?(t[Ft]=n[i],Wy(n,Ke+r,t)):(n.push(t),t[Ft]=null),t[Qe]=n;let s=t[Mr];s!==null&&n!==s&&uw(s,t);let a=t[_n];a!==null&&a.insertView(e),Vd(t),t[O]|=128}function uw(e,t){let n=e[Ai],r=t[Qe];if(Zn(r))e[O]|=Ec.HasTransplantedViews;else{let i=r[Qe][Lt];t[Lt]!==i&&(e[O]|=Ec.HasTransplantedViews)}n===null?e[Ai]=[t]:n.push(t)}function lh(e,t){let n=e[Ai],r=n.indexOf(t);n.splice(r,1)}function qo(e,t){if(e.length<=Ke)return;let n=Ke+t,r=e[n];if(r){let i=r[Mr];i!==null&&i!==e&&lh(i,r),t>0&&(e[n-1][Ft]=r[Ft]);let o=_c(e,Ke+t);rA(r[V],r);let s=o[_n];s!==null&&s.detachView(o[V]),r[Qe]=null,r[Ft]=null,r[O]&=-129}return r}function Gc(e,t){if(!(t[O]&256)){let n=t[De];n.destroyNode&&Yc(e,t,n,3,null,null),oA(t)}}function Cd(e,t){if(t[O]&256)return;let n=Y(null);try{t[O]&=-129,t[O]|=256,t[_t]&&Yu(t[_t]),cA(e,t),aA(e,t),t[V].type===1&&t[De].destroy();let r=t[Mr];if(r!==null&&Tn(t[Qe])){r!==t[Qe]&&lh(r,t);let i=t[_n];i!==null&&i.detachView(e)}Kd(t)}finally{Y(n)}}function aA(e,t){let n=e.cleanup,r=t[Cc];if(n!==null)for(let o=0;o<n.length-1;o+=2)if(typeof n[o]=="string"){let s=n[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[n[o+1]];n[o].call(s)}r!==null&&(t[Cc]=null);let i=t[Qn];if(i!==null){t[Qn]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function cA(e,t){let n;if(e!=null&&(n=e.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=t[n[r]];if(!(i instanceof Rr)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];Kt(4,a,c);try{c.call(a)}finally{Kt(5,a,c)}}else{Kt(4,i,o);try{o.call(i)}finally{Kt(5,i,o)}}}}}function lA(e,t,n){return uA(e,t.parent,n)}function uA(e,t,n){let r=t;for(;r!==null&&r.type&168;)t=r,r=t.parent;if(r===null)return n[Sn];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=e.data[r.directiveStart+i];if(o===Zt.None||o===Zt.Emulated)return null}return It(r,n)}}function Ac(e,t,n,r,i){e.insertBefore(t,n,r,i)}function dw(e,t,n){e.appendChild(t,n)}function Iy(e,t,n,r,i){r!==null?Ac(e,t,n,r,i):dw(e,t,n)}function fw(e,t){return e.parentNode(t)}function dA(e,t){return e.nextSibling(t)}function fA(e,t,n){return pA(e,t,n)}function hA(e,t,n){return e.type&40?It(e,n):null}var pA=hA,Ey;function uh(e,t,n,r){let i=lA(e,r,t),o=t[De],s=r.parent||t[Vt],a=fA(s,r,t);if(i!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)Iy(o,i,n[c],a,!1);else Iy(o,i,n,a,!1);Ey!==void 0&&Ey(o,r,t,n,i)}function Lo(e,t){if(t!==null){let n=t.type;if(n&3)return It(t,e);if(n&4)return sf(-1,e[t.index]);if(n&8){let r=t.child;if(r!==null)return Lo(e,r);{let i=e[t.index];return Tn(i)?sf(-1,i):Jt(i)}}else{if(n&128)return Lo(e,t.next);if(n&32)return ch(t,e)()||Jt(e[t.index]);{let r=hw(e,t);if(r!==null){if(Array.isArray(r))return r[0];let i=Nr(e[Lt]);return Lo(i,r)}else return Lo(e,t.next)}}}return null}function hw(e,t){if(t!==null){let r=e[Lt][Vt],i=t.projection;return r.projection[i]}return null}function sf(e,t){let n=Ke+e+1;if(n<t.length){let r=t[n],i=r[V].firstChild;if(i!==null)return Lo(r,i)}return t[Ar]}function gA(e,t,n){e.removeChild(null,t,n)}function dh(e,t,n,r,i,o,s){for(;n!=null;){if(n.type===128){n=n.next;continue}let a=r[n.index],c=n.type;if(s&&t===0&&(a&&Pr(Jt(a),r),n.flags|=2),(n.flags&32)!==32)if(c&8)dh(e,t,n.child,r,i,o,!1),Ci(t,e,i,a,o);else if(c&32){let l=ch(n,r),u;for(;u=l();)Ci(t,e,i,u,o);Ci(t,e,i,a,o)}else c&16?mA(e,t,r,n,i,o):Ci(t,e,i,a,o);n=s?n.projectionNext:n.next}}function Yc(e,t,n,r,i,o){dh(n,r,e.firstChild,t,i,o,!1)}function mA(e,t,n,r,i,o){let s=n[Lt],c=s[Vt].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let u=c[l];Ci(t,e,i,u,o)}else{let l=c,u=s[Qe];H_(r)&&(l.flags|=128),dh(e,t,l,u,i,o,!0)}}function vA(e,t,n,r,i){let o=n[Ar],s=Jt(n);o!==s&&Ci(t,e,r,o,i);for(let a=Ke;a<n.length;a++){let c=n[a];Yc(c[V],c,e,t,r,o)}}function yA(e,t,n,r,i){if(t)i?e.addClass(n,r):e.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:In.DashCase;i==null?e.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=In.Important),e.setStyle(n,r,i,o))}}function _A(e,t,n){e.setAttribute(t,"style",n)}function pw(e,t,n){n===""?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n)}function gw(e,t,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&Rd(e,t,r),i!==null&&pw(e,t,i),o!==null&&_A(e,t,o)}var jt={};function N(e=1){mw(He(),ee(),An()+e,!1)}function mw(e,t,n,r){if(!r)if((t[O]&3)===3){let o=e.preOrderCheckHooks;o!==null&&fc(t,o,n)}else{let o=e.preOrderHooks;o!==null&&hc(t,o,0,n)}xr(n)}function D(e,t=W.Default){let n=ee();if(n===null)return z(e,t);let r=ct();return k_(r,n,Je(e),t)}function vw(e,t,n,r,i,o){let s=Y(null);try{let a=null;i&Jn.SignalBased&&(a=t[r][gn]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&Jn.HasDecoratorInputTransform&&(o=e.inputTransforms[r].call(t,o)),e.setInput!==null?e.setInput(t,a,o,n,r):c_(t,a,r,o)}finally{Y(s)}}function wA(e,t){let n=e.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)xr(~i);else{let o=i,s=n[++r],a=n[++r];KT(s,o);let c=t[o];a(2,c)}}}finally{xr(-1)}}function Kc(e,t,n,r,i,o,s,a,c,l,u){let d=t.blueprint.slice();return d[Sn]=i,d[O]=r|4|128|8|64,(l!==null||e&&e[O]&2048)&&(d[O]|=2048),h_(d),d[Qe]=d[ki]=e,d[Ye]=n,d[yn]=s||e&&e[yn],d[De]=a||e&&e[De],d[Mi]=c||e&&e[Mi]||null,d[Vt]=o,d[$c]=MM(),d[Wo]=u,d[o_]=l,d[Lt]=t.type==2?e[Lt]:d,d}function Qc(e,t,n,r,i){let o=e.data[t];if(o===null)o=CA(e,t,n,r,i),YT()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=HT();o.injectorIndex=s===null?-1:s.injectorIndex}return es(o,!0),o}function CA(e,t,n,r,i){let o=y_(),s=__(),a=s?o:o&&o.parent,c=e.data[t]=TA(e,a,n,t,r,i);return e.firstChild===null&&(e.firstChild=c),o!==null&&(s?o.child==null&&c.parent!==null&&(o.child=c):o.next===null&&(o.next=c,c.prev=o)),c}function yw(e,t,n,r){if(n===0)return-1;let i=t.length;for(let o=0;o<n;o++)t.push(r),e.blueprint.push(r),e.data.push(null);return i}function _w(e,t,n,r,i){let o=An(),s=r&2;try{xr(-1),s&&t.length>Ct&&mw(e,t,Ct,!1),Kt(s?2:0,i),n(r,i)}finally{xr(o),Kt(s?3:1,i)}}function ww(e,t,n){if(a_(t)){let r=Y(null);try{let i=t.directiveStart,o=t.directiveEnd;for(let s=i;s<o;s++){let a=e.data[s];if(a.contentQueries){let c=n[s];a.contentQueries(1,c,s)}}}finally{Y(r)}}}function Cw(e,t,n){v_()&&(OA(e,t,n,It(n,t)),(n.flags&64)===64&&Tw(e,t,n))}function Iw(e,t,n=It){let r=t.localNames;if(r!==null){let i=t.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(t,e):e[s];e[i++]=a}}}function Ew(e){let t=e.tView;return t===null||t.incompleteFirstPass?e.tView=fh(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):t}function fh(e,t,n,r,i,o,s,a,c,l,u){let d=Ct+r,f=d+i,h=IA(d,f),p=typeof l=="function"?l():l;return h[V]={type:e,blueprint:h,template:n,queries:null,viewQuery:a,declTNode:t,data:h.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:p,incompleteFirstPass:!1,ssrId:u}}function IA(e,t){let n=[];for(let r=0;r<t;r++)n.push(r<e?null:jt);return n}function EA(e,t,n,r){let o=r.get(kM,K_)||n===Zt.ShadowDom,s=e.selectRootElement(t,o);return bA(s),s}function bA(e){DA(e)}var DA=()=>null;function SA(e,t,n,r){let i=Nw(t);i.push(n),e.firstCreatePass&&xw(e).push(r,i.length-1)}function TA(e,t,n,r,i,o){let s=t?t.injectorIndex:-1,a=0;return UT()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function by(e,t,n,r,i){for(let o in t){if(!t.hasOwnProperty(o))continue;let s=t[o];if(s===void 0)continue;r??={};let a,c=Jn.None;Array.isArray(s)?(a=s[0],c=s[1]):a=s;let l=o;if(i!==null){if(!i.hasOwnProperty(o))continue;l=i[o]}e===0?Dy(r,n,l,a,c):Dy(r,n,l,a)}return r}function Dy(e,t,n,r,i){let o;e.hasOwnProperty(n)?(o=e[n]).push(t,r):o=e[n]=[t,r],i!==void 0&&o.push(i)}function MA(e,t,n){let r=t.directiveStart,i=t.directiveEnd,o=e.data,s=t.attrs,a=[],c=null,l=null;for(let u=r;u<i;u++){let d=o[u],f=n?n.get(d):null,h=f?f.inputs:null,p=f?f.outputs:null;c=by(0,d.inputs,u,c,h),l=by(1,d.outputs,u,l,p);let y=c!==null&&s!==null&&!jf(t)?WA(c,u,s):null;a.push(y)}c!==null&&(c.hasOwnProperty("class")&&(t.flags|=8),c.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=a,t.inputs=c,t.outputs=l}function AA(e){return e==="class"?"className":e==="for"?"htmlFor":e==="formaction"?"formAction":e==="innerHtml"?"innerHTML":e==="readonly"?"readOnly":e==="tabindex"?"tabIndex":e}function bw(e,t,n,r,i,o,s,a){let c=It(t,n),l=t.inputs,u;!a&&l!=null&&(u=l[r])?(hh(e,n,u,r,i),Hc(t)&&NA(n,t.index)):t.type&3?(r=AA(r),i=s!=null?s(i,t.value||"",r):i,o.setProperty(c,r,i)):t.type&12}function NA(e,t){let n=nr(t,e);n[O]&16||(n[O]|=64)}function Dw(e,t,n,r){if(v_()){let i=r===null?null:{"":-1},o=kA(e,n),s,a;o===null?s=a=null:[s,a]=o,s!==null&&Sw(e,t,n,s,i,a),i&&FA(n,r,i)}n.mergedAttrs=$o(n.mergedAttrs,n.attrs)}function Sw(e,t,n,r,i,o){for(let l=0;l<r.length;l++)$d(Sc(n,t),e,r[l].type);VA(n,e.data.length,r.length);for(let l=0;l<r.length;l++){let u=r[l];u.providersResolver&&u.providersResolver(u)}let s=!1,a=!1,c=yw(e,t,r.length,null);for(let l=0;l<r.length;l++){let u=r[l];n.mergedAttrs=$o(n.mergedAttrs,u.hostAttrs),jA(e,n,t,c,u),LA(c,u,i),u.contentQueries!==null&&(n.flags|=4),(u.hostBindings!==null||u.hostAttrs!==null||u.hostVars!==0)&&(n.flags|=64);let d=u.type.prototype;!s&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((e.preOrderHooks??=[]).push(n.index),s=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}MA(e,n,o)}function xA(e,t,n,r,i){let o=i.hostBindings;if(o){let s=e.hostBindingOpCodes;s===null&&(s=e.hostBindingOpCodes=[]);let a=~t.index;RA(s)!=a&&s.push(a),s.push(n,r,o)}}function RA(e){let t=e.length;for(;t>0;){let n=e[--t];if(typeof n=="number"&&n<0)return n}return 0}function OA(e,t,n,r){let i=n.directiveStart,o=n.directiveEnd;Hc(n)&&UA(t,n,e.data[i+n.componentOffset]),e.firstCreatePass||Sc(n,t),Pr(r,t);let s=n.initialInputs;for(let a=i;a<o;a++){let c=e.data[a],l=Or(t,e,a,n);if(Pr(l,t),s!==null&&HA(t,a-i,l,c,n,s),Xn(c)){let u=nr(n.index,t);u[Ye]=Or(t,e,a,n)}}}function Tw(e,t,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=QT();try{xr(o);for(let a=r;a<i;a++){let c=e.data[a],l=t[a];jd(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&PA(c,l)}}finally{xr(-1),jd(s)}}function PA(e,t){e.hostBindings!==null&&e.hostBindings(1,t)}function kA(e,t){let n=e.directiveRegistry,r=null,i=null;if(n)for(let o=0;o<n.length;o++){let s=n[o];if(oT(t,s.selectors,!1))if(r||(r=[]),Xn(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let c=a.length;af(e,t,c)}else r.unshift(s),af(e,t,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function af(e,t,n){t.componentOffset=n,(e.components??=[]).push(t.index)}function FA(e,t,n){if(t){let r=e.localNames=[];for(let i=0;i<t.length;i+=2){let o=n[t[i+1]];if(o==null)throw new S(-301,!1);r.push(t[i],o)}}}function LA(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;Xn(t)&&(n[""]=e)}}function VA(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function jA(e,t,n,r,i){e.data[r]=i;let o=i.factory||(i.factory=bi(i.type,!0)),s=new Rr(o,Xn(i),D);e.blueprint[r]=s,n[r]=s,xA(e,t,r,yw(e,n,i.hostVars,jt),i)}function UA(e,t,n){let r=It(t,e),i=Ew(n),o=e[yn].rendererFactory,s=16;n.signals?s=4096:n.onPush&&(s=64);let a=Zc(e,Kc(e,i,null,s,r,t,null,o.createRenderer(r,n),null,null,null));e[t.index]=a}function BA(e,t,n,r,i,o){let s=It(e,t);$A(t[De],s,o,e.value,n,r,i)}function $A(e,t,n,r,i,o,s){if(o==null)e.removeAttribute(t,i,n);else{let a=s==null?Uo(o):s(o,r||"",i);e.setAttribute(t,i,a,n)}}function HA(e,t,n,r,i,o){let s=o[t];if(s!==null)for(let a=0;a<s.length;){let c=s[a++],l=s[a++],u=s[a++],d=s[a++];vw(r,n,c,l,u,d)}}function WA(e,t,n){let r=null,i=0;for(;i<n.length;){let o=n[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(e.hasOwnProperty(o)){r===null&&(r=[]);let s=e[o];for(let a=0;a<s.length;a+=3)if(s[a]===t){r.push(o,s[a+1],s[a+2],n[i+1]);break}}i+=2}return r}function Mw(e,t,n,r){return[e,!0,0,t,null,r,null,n,null,null]}function Aw(e,t){let n=e.contentQueries;if(n!==null){let r=Y(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=e.data[s];Gf(o),a.contentQueries(2,t[s],s)}}}finally{Y(r)}}}function Zc(e,t){return e[zo]?e[sy][Ft]=t:e[zo]=t,e[sy]=t,t}function cf(e,t,n){Gf(0);let r=Y(null);try{t(e,n)}finally{Y(r)}}function Nw(e){return e[Cc]??=[]}function xw(e){return e.cleanup??=[]}function Rw(e,t){let n=e[Mi],r=n?n.get(wn,null):null;r&&r.handleError(t)}function hh(e,t,n,r,i){for(let o=0;o<n.length;){let s=n[o++],a=n[o++],c=n[o++],l=t[s],u=e.data[s];vw(u,l,r,a,c,i)}}function Ow(e,t,n){let r=f_(t,e);nA(e[De],r,n)}function zA(e,t){let n=nr(t,e),r=n[V];qA(r,n);let i=n[Sn];i!==null&&n[Wo]===null&&(n[Wo]=sh(i,n[Mi])),ph(r,n,n[Ye])}function qA(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}function ph(e,t,n){Yf(t);try{let r=e.viewQuery;r!==null&&cf(1,r,n);let i=e.template;i!==null&&_w(e,t,i,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),t[_n]?.finishViewCreation(e),e.staticContentQueries&&Aw(e,t),e.staticViewQueries&&cf(2,e.viewQuery,n);let o=e.components;o!==null&&GA(t,o)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{t[O]&=-5,Kf()}}function GA(e,t){for(let n=0;n<t.length;n++)zA(e,t[n])}function Jc(e,t,n,r){let i=Y(null);try{let o=t.tView,a=e[O]&4096?4096:16,c=Kc(e,o,n,a,null,t,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=e[t.index];c[Mr]=l;let u=e[_n];return u!==null&&(c[_n]=u.createEmbeddedView(o)),ph(o,c,n),c}finally{Y(i)}}function Pw(e,t){let n=Ke+t;if(n<e.length)return e[n]}function Go(e,t){return!t||t.firstChild===null||H_(e)}function Xc(e,t,n,r=!0){let i=t[V];if(sA(i,t,e,n),r){let s=sf(n,e),a=t[De],c=fw(a,e[Ar]);c!==null&&iA(i,e[Vt],a,t,c,s)}let o=t[Wo];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function kw(e,t){let n=qo(e,t);return n!==void 0&&Gc(n[V],n),n}function Nc(e,t,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let o=t[n.index];o!==null&&r.push(Jt(o)),Tn(o)&&YA(o,r);let s=n.type;if(s&8)Nc(e,t,n.child,r);else if(s&32){let a=ch(n,t),c;for(;c=a();)r.push(c)}else if(s&16){let a=hw(t,n);if(Array.isArray(a))r.push(...a);else{let c=Nr(t[Lt]);Nc(c[V],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function YA(e,t){for(let n=Ke;n<e.length;n++){let r=e[n],i=r[V].firstChild;i!==null&&Nc(r[V],r,i,t)}e[Ar]!==e[Sn]&&t.push(e[Ar])}var Fw=[];function KA(e){return e[_t]??QA(e)}function QA(e){let t=Fw.pop()??Object.create(JA);return t.lView=e,t}function ZA(e){e.lView[_t]!==e&&(e.lView=null,Fw.push(e))}var JA=Q(C({},Oo),{consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{zc(e.lView)},consumerOnSignalRead(){this.lView[_t]=this}});function XA(e){let t=e[_t]??Object.create(eN);return t.lView=e,t}var eN=Q(C({},Oo),{consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{let t=Nr(e.lView);for(;t&&!Lw(t[V]);)t=Nr(t);t&&p_(t)},consumerOnSignalRead(){this.lView[_t]=this}});function Lw(e){return e.type!==2}var tN=100;function Vw(e,t=!0,n=0){let r=e[yn],i=r.rendererFactory,o=!1;o||i.begin?.();try{nN(e,n)}catch(s){throw t&&Rw(e,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function nN(e,t){let n=w_();try{cy(!0),lf(e,t);let r=0;for(;Wc(e);){if(r===tN)throw new S(103,!1);r++,lf(e,1)}}finally{cy(n)}}function rN(e,t,n,r){let i=t[O];if((i&256)===256)return;let o=!1,s=!1;!o&&t[yn].inlineEffectRunner?.flush(),Yf(t);let a=!0,c=null,l=null;o||(Lw(e)?(l=KA(t),c=ka(l)):hv()===null?(a=!1,l=XA(t),c=ka(l)):t[_t]&&(Yu(t[_t]),t[_t]=null));try{h_(t),GT(e.bindingStartIndex),n!==null&&_w(e,t,n,2,r);let u=(i&3)===3;if(!o)if(u){let h=e.preOrderCheckHooks;h!==null&&fc(t,h,null)}else{let h=e.preOrderHooks;h!==null&&hc(t,h,0,null),vd(t,0)}if(s||iN(t),jw(t,0),e.contentQueries!==null&&Aw(e,t),!o)if(u){let h=e.contentCheckHooks;h!==null&&fc(t,h)}else{let h=e.contentHooks;h!==null&&hc(t,h,1),vd(t,1)}wA(e,t);let d=e.components;d!==null&&Bw(t,d,0);let f=e.viewQuery;if(f!==null&&cf(2,f,r),!o)if(u){let h=e.viewCheckHooks;h!==null&&fc(t,h)}else{let h=e.viewHooks;h!==null&&hc(t,h,2),vd(t,2)}if(e.firstUpdatePass===!0&&(e.firstUpdatePass=!1),t[md]){for(let h of t[md])h();t[md]=null}o||(t[O]&=-73)}catch(u){throw o||zc(t),u}finally{l!==null&&(qu(l,c),a&&ZA(l)),Kf()}}function jw(e,t){for(let n=z_(e);n!==null;n=q_(n))for(let r=Ke;r<n.length;r++){let i=n[r];Uw(i,t)}}function iN(e){for(let t=z_(e);t!==null;t=q_(t)){if(!(t[O]&Ec.HasTransplantedViews))continue;let n=t[Ai];for(let r=0;r<n.length;r++){let i=n[r];p_(i)}}}function oN(e,t,n){let r=nr(t,e);Uw(r,n)}function Uw(e,t){zf(e)&&lf(e,t)}function lf(e,t){let r=e[V],i=e[O],o=e[_t],s=!!(t===0&&i&16);if(s||=!!(i&64&&t===0),s||=!!(i&1024),s||=!!(o?.dirty&&Gu(o)),s||=!1,o&&(o.dirty=!1),e[O]&=-9217,s)rN(r,e,r.template,e[Ye]);else if(i&8192){jw(e,1);let a=r.components;a!==null&&Bw(e,a,1)}}function Bw(e,t,n){for(let r=0;r<t.length;r++)oN(e,t[r],n)}function gh(e,t){let n=w_()?64:1088;for(e[yn].changeDetectionScheduler?.notify(t);e;){e[O]|=n;let r=Nr(e);if(Fd(e)&&!r)return e;e=r}return null}var kr=class{get rootNodes(){let t=this._lView,n=t[V];return Nc(n,t,n.firstChild,[])}constructor(t,n,r=!0){this._lView=t,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Ye]}set context(t){this._lView[Ye]=t}get destroyed(){return(this._lView[O]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let t=this._lView[Qe];if(Tn(t)){let n=t[Ic],r=n?n.indexOf(this):-1;r>-1&&(qo(t,r),_c(n,r))}this._attachedToViewContainer=!1}Gc(this._lView[V],this._lView)}onDestroy(t){g_(this._lView,t)}markForCheck(){gh(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[O]&=-129}reattach(){Vd(this._lView),this._lView[O]|=128}detectChanges(){this._lView[O]|=1024,Vw(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new S(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let t=Fd(this._lView),n=this._lView[Mr];n!==null&&!t&&lh(n,this._lView),lw(this._lView[V],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new S(902,!1);this._appRef=t;let n=Fd(this._lView),r=this._lView[Mr];r!==null&&!n&&uw(r,this._lView),Vd(this._lView)}},Yo=(()=>{class e{static{this.__NG_ELEMENT_ID__=cN}}return e})(),sN=Yo,aN=class extends sN{constructor(t,n,r){super(),this._declarationLView=t,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,n){return this.createEmbeddedViewImpl(t,n)}createEmbeddedViewImpl(t,n,r){let i=Jc(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:n,dehydratedView:r});return new kr(i)}};function cN(){return mh(ct(),ee())}function mh(e,t){return e.type&4?new aN(t,e,ji(e,t)):null}var Dz=new RegExp(`^(\\d+)*(${OM}|${RM})*(.*)`);var lN=()=>null;function Ko(e,t){return lN(e,t)}var xi=class{},vh=new P("",{providedIn:"root",factory:()=>!1});var $w=new P(""),Hw=new P(""),uf=class{},xc=class{};function uN(e){let t=Error(`No component factory found for ${st(e)}.`);return t[dN]=e,t}var dN="ngComponent";var df=class{resolveComponentFactory(t){throw uN(t)}},Ri=class{static{this.NULL=new df}},Oi=class{},ir=(()=>{class e{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>fN()}}return e})();function fN(){let e=ee(),t=ct(),n=nr(t.index,e);return(Zn(n)?n:e)[De]}var hN=(()=>{class e{static{this.\u0275prov=T({token:e,providedIn:"root",factory:()=>null})}}return e})();function ff(e,t,n){let r=n?e.styles:null,i=n?e.classes:null,o=0;if(t!==null)for(let s=0;s<t.length;s++){let a=t[s];if(typeof a=="number")o=a;else if(o==1)i=Ad(i,a);else if(o==2){let c=a,l=t[++s];r=Ad(r,c+": "+l+";")}}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=i:e.classesWithoutHost=i}var Rc=class extends Ri{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){let n=Tr(t);return new Qo(n,this.ngModule)}};function Sy(e,t){let n=[];for(let r in e){if(!e.hasOwnProperty(r))continue;let i=e[r];if(i===void 0)continue;let o=Array.isArray(i),s=o?i[0]:i,a=o?i[1]:Jn.None;t?n.push({propName:s,templateName:r,isSignal:(a&Jn.SignalBased)!==0}):n.push({propName:s,templateName:r})}return n}function pN(e){let t=e.toLowerCase();return t==="svg"?NT:t==="math"?xT:null}var Qo=class extends xc{get inputs(){let t=this.componentDef,n=t.inputTransforms,r=Sy(t.inputs,!0);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return Sy(this.componentDef.outputs,!1)}constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=lT(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!n}create(t,n,r,i){let o=Y(null);try{i=i||this.ngModule;let s=i instanceof wt?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new Ud(t,s):t,c=a.get(Oi,null);if(c===null)throw new S(407,!1);let l=a.get(hN,null),u=a.get(xi,null),d={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:u},f=c.createRenderer(null,this.componentDef),h=this.componentDef.selectors[0][0]||"div",p=r?EA(f,r,this.componentDef.encapsulation,a):cw(f,h,pN(h)),y=512;this.componentDef.signals?y|=4096:this.componentDef.onPush||(y|=16);let E=null;p!==null&&(E=sh(p,a,!0));let M=fh(0,null,null,1,0,null,null,null,null,null,null),se=Kc(null,M,null,y,null,null,d,f,a,null,E);Yf(se);let me,Ae,Ne=null;try{let pe=this.componentDef,Ge,pn=null;pe.findHostDirectiveDefs?(Ge=[],pn=new Map,pe.findHostDirectiveDefs(pe,Ge,pn),Ge.push(pe)):Ge=[pe];let xo=gN(se,p);Ne=mN(xo,p,pe,Ge,se,d,f),Ae=Wf(M,Ct),p&&_N(f,pe,p,r),n!==void 0&&wN(Ae,this.ngContentSelectors,n),me=yN(Ne,pe,Ge,pn,se,[CN]),ph(M,se,null)}catch(pe){throw Ne!==null&&Kd(Ne),Kd(se),pe}finally{Kf()}return new hf(this.componentType,me,ji(Ae,se),se,Ae)}finally{Y(o)}}},hf=class extends uf{constructor(t,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new kr(i,void 0,!1),this.componentType=t}setInput(t,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[t])){if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),n))return;let o=this._rootLView;hh(o[V],o,i,t,n),this.previousInputValues.set(t,n);let s=nr(this._tNode.index,o);gh(s,1)}}get injector(){return new Sr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}};function gN(e,t){let n=e[V],r=Ct;return e[r]=t,Qc(n,r,2,"#host",null)}function mN(e,t,n,r,i,o,s){let a=i[V];vN(r,e,t,s);let c=null;t!==null&&(c=sh(t,i[Mi]));let l=o.rendererFactory.createRenderer(t,n),u=16;n.signals?u=4096:n.onPush&&(u=64);let d=Kc(i,Ew(n),null,u,i[e.index],e,o,l,null,null,c);return a.firstCreatePass&&af(a,e,r.length-1),Zc(i,d),i[e.index]=d}function vN(e,t,n,r){for(let i of e)t.mergedAttrs=$o(t.mergedAttrs,i.hostAttrs);t.mergedAttrs!==null&&(ff(t,t.mergedAttrs,!0),n!==null&&gw(r,n,t))}function yN(e,t,n,r,i,o){let s=ct(),a=i[V],c=It(s,i);Sw(a,i,s,n,null,r);for(let u=0;u<n.length;u++){let d=s.directiveStart+u,f=Or(i,a,d,s);Pr(f,i)}Tw(a,i,s),c&&Pr(c,i);let l=Or(i,a,s.directiveStart+s.componentOffset,s);if(e[Ye]=i[Ye]=l,o!==null)for(let u of o)u(l,t);return ww(a,s,i),l}function _N(e,t,n,r){if(r)Rd(e,n,["ng-version","18.2.7"]);else{let{attrs:i,classes:o}=uT(t.selectors[0]);i&&Rd(e,n,i),o&&o.length>0&&pw(e,n,o.join(" "))}}function wN(e,t,n){let r=e.projection=[];for(let i=0;i<t.length;i++){let o=n[i];r.push(o!=null?Array.from(o):null)}}function CN(){let e=ct();Xf(ee()[V],e)}var $i=(()=>{class e{static{this.__NG_ELEMENT_ID__=IN}}return e})();function IN(){let e=ct();return zw(e,ee())}var EN=$i,Ww=class extends EN{constructor(t,n,r){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=r}get element(){return ji(this._hostTNode,this._hostLView)}get injector(){return new Sr(this._hostTNode,this._hostLView)}get parentInjector(){let t=eh(this._hostTNode,this._hostLView);if(A_(t)){let n=Dc(t,this._hostLView),r=bc(t),i=n[V].data[r+8];return new Sr(i,n)}else return new Sr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){let n=Ty(this._lContainer);return n!==null&&n[t]||null}get length(){return this._lContainer.length-Ke}createEmbeddedView(t,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=Ko(this._lContainer,t.ssrId),a=t.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,Go(this._hostTNode,s)),a}createComponent(t,n,r,i,o){let s=t&&!ST(t),a;if(s)a=n;else{let p=n||{};a=p.index,r=p.injector,i=p.projectableNodes,o=p.environmentInjector||p.ngModuleRef}let c=s?t:new Qo(Tr(t)),l=r||this.parentInjector;if(!o&&c.ngModule==null){let y=(s?l:this.parentInjector).get(wt,null);y&&(o=y)}let u=Tr(c.componentType??{}),d=Ko(this._lContainer,u?.id??null),f=d?.firstChild??null,h=c.create(l,i,f,o);return this.insertImpl(h.hostView,a,Go(this._hostTNode,d)),h}insert(t,n){return this.insertImpl(t,n,!0)}insertImpl(t,n,r){let i=t._lView;if(PT(i)){let a=this.indexOf(t);if(a!==-1)this.detach(a);else{let c=i[Qe],l=new Ww(c,c[Vt],c[Qe]);l.detach(l.indexOf(t))}}let o=this._adjustIndex(n),s=this._lContainer;return Xc(s,i,o,r),t.attachToViewContainerRef(),Wy(Id(s),o,t),t}move(t,n){return this.insert(t,n)}indexOf(t){let n=Ty(this._lContainer);return n!==null?n.indexOf(t):-1}remove(t){let n=this._adjustIndex(t,-1),r=qo(this._lContainer,n);r&&(_c(Id(this._lContainer),n),Gc(r[V],r))}detach(t){let n=this._adjustIndex(t,-1),r=qo(this._lContainer,n);return r&&_c(Id(this._lContainer),n)!=null?new kr(r):null}_adjustIndex(t,n=0){return t??this.length+n}};function Ty(e){return e[Ic]}function Id(e){return e[Ic]||(e[Ic]=[])}function zw(e,t){let n,r=t[e.index];return Tn(r)?n=r:(n=Mw(r,t,null,e),t[e.index]=n,Zc(t,n)),DN(n,t,e,r),new Ww(n,e,t)}function bN(e,t){let n=e[De],r=n.createComment(""),i=It(t,e),o=fw(n,i);return Ac(n,o,r,dA(n,i),!1),r}var DN=MN,SN=()=>!1;function TN(e,t,n){return SN(e,t,n)}function MN(e,t,n,r){if(e[Ar])return;let i;n.type&8?i=Jt(r):i=bN(t,n),e[Ar]=i}var pf=class e{constructor(t){this.queryList=t,this.matches=null}clone(){return new e(this.queryList)}setDirty(){this.queryList.setDirty()}},gf=class e{constructor(t=[]){this.queries=t}createEmbeddedView(t){let n=t.queries;if(n!==null){let r=t.contentQueries!==null?t.contentQueries[0]:n.length,i=[];for(let o=0;o<r;o++){let s=n.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new e(i)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}finishViewCreation(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let n=0;n<this.queries.length;n++)yh(t,n).matches!==null&&this.queries[n].setDirty()}},mf=class{constructor(t,n,r=null){this.flags=n,this.read=r,typeof t=="string"?this.predicate=FN(t):this.predicate=t}},vf=class e{constructor(t=[]){this.queries=t}elementStart(t,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(t,n)}elementEnd(t){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(t)}embeddedTView(t){let n=null;for(let r=0;r<this.length;r++){let i=n!==null?n.length:0,o=this.getByIndex(r).embeddedTView(t,i);o&&(o.indexInDeclarationView=r,n!==null?n.push(o):n=[o])}return n!==null?new e(n):null}template(t,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(t,n)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}},yf=class e{constructor(t,n=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(t,n){this.isApplyingToNode(n)&&this.matchTNode(t,n)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,n){this.elementStart(t,n)}embeddedTView(t,n){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,n),new e(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,r=t.parent;for(;r!==null&&r.type&8&&r.index!==n;)r=r.parent;return n===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(t,n){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(t,n,AN(n,o)),this.matchTNodeWithReadOption(t,n,pc(n,t,o,!1,!1))}else r===Yo?n.type&4&&this.matchTNodeWithReadOption(t,n,-1):this.matchTNodeWithReadOption(t,n,pc(n,t,r,!1,!1))}matchTNodeWithReadOption(t,n,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===en||i===$i||i===Yo&&n.type&4)this.addMatch(n.index,-2);else{let o=pc(n,t,i,!1,!1);o!==null&&this.addMatch(n.index,o)}else this.addMatch(n.index,r)}}addMatch(t,n){this.matches===null?this.matches=[t,n]:this.matches.push(t,n)}};function AN(e,t){let n=e.localNames;if(n!==null){for(let r=0;r<n.length;r+=2)if(n[r]===t)return n[r+1]}return null}function NN(e,t){return e.type&11?ji(e,t):e.type&4?mh(e,t):null}function xN(e,t,n,r){return n===-1?NN(t,e):n===-2?RN(e,t,r):Or(e,e[V],n,t)}function RN(e,t,n){if(n===en)return ji(t,e);if(n===Yo)return mh(t,e);if(n===$i)return zw(t,e)}function qw(e,t,n,r){let i=t[_n].queries[r];if(i.matches===null){let o=e.data,s=n.matches,a=[];for(let c=0;s!==null&&c<s.length;c+=2){let l=s[c];if(l<0)a.push(null);else{let u=o[l];a.push(xN(t,u,s[c+1],n.metadata.read))}}i.matches=a}return i.matches}function _f(e,t,n,r){let i=e.queries.getByIndex(n),o=i.matches;if(o!==null){let s=qw(e,t,i,n);for(let a=0;a<o.length;a+=2){let c=o[a];if(c>0)r.push(s[a/2]);else{let l=o[a+1],u=t[-c];for(let d=Ke;d<u.length;d++){let f=u[d];f[Mr]===f[Qe]&&_f(f[V],f,l,r)}if(u[Ai]!==null){let d=u[Ai];for(let f=0;f<d.length;f++){let h=d[f];_f(h[V],h,l,r)}}}}}return r}function ON(e,t){return e[_n].queries[t].queryList}function PN(e,t,n){let r=new Yd((n&4)===4);return SA(e,t,r,r.destroy),(t[_n]??=new gf).queries.push(new pf(r))-1}function kN(e,t,n){let r=He();return r.firstCreatePass&&(LN(r,new mf(e,t,n),-1),(t&2)===2&&(r.staticViewQueries=!0)),PN(r,ee(),t)}function FN(e){return e.split(",").map(t=>t.trim())}function LN(e,t,n){e.queries===null&&(e.queries=new vf),e.queries.track(new yf(t,n))}function yh(e,t){return e.queries.getByIndex(t)}function VN(e,t){let n=e[V],r=yh(n,t);return r.crossesNgTemplate?_f(n,e,t,[]):qw(n,e,r,t)}var My=new Set;function Hi(e){My.has(e)||(My.add(e),performance?.mark?.("mark_feature_usage",{detail:{feature:e}}))}function jN(e){return typeof e=="function"&&e[gn]!==void 0}function ns(e,t){Hi("NgSignals");let n=bv(e),r=n[gn];return t?.equal&&(r.equal=t.equal),n.set=i=>Ku(r,i),n.update=i=>Dv(r,i),n.asReadonly=UN.bind(n),n}function UN(){let e=this[gn];if(e.readonlyFn===void 0){let t=()=>this();t[gn]=e,e.readonlyFn=t}return e.readonlyFn}function Gw(e){return jN(e)&&typeof e.set=="function"}function BN(e){return Object.getPrototypeOf(e.prototype).constructor}function Rn(e){let t=BN(e.type),n=!0,r=[e];for(;t;){let i;if(Xn(e))i=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new S(903,!1);i=t.\u0275dir}if(i){if(n){r.push(i);let s=e;s.inputs=cc(e.inputs),s.inputTransforms=cc(e.inputTransforms),s.declaredInputs=cc(e.declaredInputs),s.outputs=cc(e.outputs);let a=i.hostBindings;a&&qN(e,a);let c=i.viewQuery,l=i.contentQueries;if(c&&WN(e,c),l&&zN(e,l),$N(e,i),MS(e.outputs,i.outputs),Xn(i)&&i.data.animation){let u=e.data;u.animation=(u.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(e),a===Rn&&(n=!1)}}t=Object.getPrototypeOf(t)}HN(r)}function $N(e,t){for(let n in t.inputs){if(!t.inputs.hasOwnProperty(n)||e.inputs.hasOwnProperty(n))continue;let r=t.inputs[n];if(r!==void 0&&(e.inputs[n]=r,e.declaredInputs[n]=t.declaredInputs[n],t.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!t.inputTransforms.hasOwnProperty(i))continue;e.inputTransforms??={},e.inputTransforms[i]=t.inputTransforms[i]}}}function HN(e){let t=0,n=null;for(let r=e.length-1;r>=0;r--){let i=e[r];i.hostVars=t+=i.hostVars,i.hostAttrs=$o(i.hostAttrs,n=$o(n,i.hostAttrs))}}function cc(e){return e===Di?{}:e===ot?[]:e}function WN(e,t){let n=e.viewQuery;n?e.viewQuery=(r,i)=>{t(r,i),n(r,i)}:e.viewQuery=t}function zN(e,t){let n=e.contentQueries;n?e.contentQueries=(r,i,o)=>{t(r,i,o),n(r,i,o)}:e.contentQueries=t}function qN(e,t){let n=e.hostBindings;n?e.hostBindings=(r,i)=>{t(r,i),n(r,i)}:e.hostBindings=t}var tr=class{},Zo=class{};var wf=class extends tr{constructor(t,n,r,i=!0){super(),this.ngModuleType=t,this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Rc(this);let o=Jy(t);this._bootstrapComponents=aw(o.bootstrap),this._r3Injector=V_(t,n,[{provide:tr,useValue:this},{provide:Ri,useValue:this.componentFactoryResolver},...r],st(t),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}},Cf=class extends Zo{constructor(t){super(),this.moduleType=t}create(t){return new wf(this.moduleType,t,[])}};var Oc=class extends tr{constructor(t){super(),this.componentFactoryResolver=new Rc(this),this.instance=null;let n=new Ho([...t.providers,{provide:tr,useValue:this},{provide:Ri,useValue:this.componentFactoryResolver}],t.parent||$f(),t.debugName,new Set(["environment"]));this.injector=n,t.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}};function _h(e,t,n=null){return new Oc({providers:e,parent:t,debugName:n,runEnvironmentInitializers:!0}).injector}function Xt(e,t,n){let r=e[t];return Object.is(r,n)?!1:(e[t]=n,!0)}function GN(e,t,n,r){let i=Xt(e,t,n);return Xt(e,t+1,r)||i}function YN(e){return(e.flags&32)===32}function KN(e,t,n,r,i,o,s,a,c){let l=t.consts,u=Qc(t,e,4,s||null,a||null);Dw(t,n,u,Ni(l,c)),Xf(t,u);let d=u.tView=fh(2,u,r,i,o,t.directiveRegistry,t.pipeRegistry,null,t.schemas,l,null);return t.queries!==null&&(t.queries.template(t,u),d.queries=t.queries.embeddedTView(u)),u}function If(e,t,n,r,i,o,s,a,c,l){let u=n+Ct,d=t.firstCreatePass?KN(u,t,e,r,i,o,s,a,c):t.data[u];es(d,!1);let f=QN(t,e,d,n);Zf()&&uh(t,e,f,d),Pr(f,e);let h=Mw(f,e,f,d);return e[u]=h,Zc(e,h),TN(h,d,e),Hf(d)&&Cw(t,e,d),c!=null&&Iw(e,d,l),d}function or(e,t,n,r,i,o,s,a){let c=ee(),l=He(),u=Ni(l.consts,o);return If(c,l,e,t,n,r,i,u,s,a),or}var QN=ZN;function ZN(e,t,n,r){return Jf(!0),t[De].createComment("")}var Vo=function(e){return e[e.EarlyRead=0]="EarlyRead",e[e.Write=1]="Write",e[e.MixedReadWrite=2]="MixedReadWrite",e[e.Read=3]="Read",e}(Vo||{}),JN=(()=>{class e{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=T({token:e,providedIn:"root",factory:()=>new e})}}return e})(),Ay=class e{constructor(){this.ngZone=I(Pe),this.scheduler=I(xi),this.errorHandler=I(wn,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[Vo.EarlyRead,Vo.Write,Vo.MixedReadWrite,Vo.Read]}execute(){this.executing=!0;for(let t of e.PHASES)for(let n of this.sequences)if(!(n.erroredOrDestroyed||!n.hooks[t]))try{n.pipelinedValue=this.ngZone.runOutsideAngular(()=>n.hooks[t](n.pipelinedValue))}catch(r){n.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let t of this.sequences)t.afterRun(),t.once&&this.sequences.delete(t);for(let t of this.deferredRegistrations)this.sequences.add(t);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(t){this.executing?this.deferredRegistrations.add(t):(this.sequences.add(t),this.scheduler.notify(6))}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}static{this.\u0275prov=T({token:e,providedIn:"root",factory:()=>new e})}};function el(e,t,n,r){let i=ee(),o=Fi();if(Xt(i,o,t)){let s=He(),a=Qf();BA(a,i,e,t,n,r)}return el}function XN(e,t,n,r){return Xt(e,Fi(),n)?t+Uo(n)+r:jt}function ex(e,t,n,r,i,o){let s=qT(),a=GN(e,s,n,i);return qf(2),a?t+Uo(n)+r+Uo(i)+o:jt}function lc(e,t){return e<<17|t<<2}function Fr(e){return e>>17&32767}function tx(e){return(e&2)==2}function nx(e,t){return e&131071|t<<17}function Ef(e){return e|2}function Pi(e){return(e&131068)>>2}function Ed(e,t){return e&-131069|t<<2}function rx(e){return(e&1)===1}function bf(e){return e|1}function ix(e,t,n,r,i,o){let s=o?t.classBindings:t.styleBindings,a=Fr(s),c=Pi(s);e[r]=n;let l=!1,u;if(Array.isArray(n)){let d=n;u=d[1],(u===null||Xo(d,u)>0)&&(l=!0)}else u=n;if(i)if(c!==0){let f=Fr(e[a+1]);e[r+1]=lc(f,a),f!==0&&(e[f+1]=Ed(e[f+1],r)),e[a+1]=nx(e[a+1],r)}else e[r+1]=lc(a,0),a!==0&&(e[a+1]=Ed(e[a+1],r)),a=r;else e[r+1]=lc(c,0),a===0?a=r:e[c+1]=Ed(e[c+1],r),c=r;l&&(e[r+1]=Ef(e[r+1])),Ny(e,u,r,!0),Ny(e,u,r,!1),ox(t,u,e,r,o),s=lc(a,c),o?t.classBindings=s:t.styleBindings=s}function ox(e,t,n,r,i){let o=i?e.residualClasses:e.residualStyles;o!=null&&typeof t=="string"&&Xo(o,t)>=0&&(n[r+1]=bf(n[r+1]))}function Ny(e,t,n,r){let i=e[n+1],o=t===null,s=r?Fr(i):Pi(i),a=!1;for(;s!==0&&(a===!1||o);){let c=e[s],l=e[s+1];sx(c,t)&&(a=!0,e[s+1]=r?bf(l):Ef(l)),s=r?Fr(l):Pi(l)}a&&(e[n+1]=r?Ef(i):bf(i))}function sx(e,t){return e===null||t==null||(Array.isArray(e)?e[1]:e)===t?!0:Array.isArray(e)&&typeof t=="string"?Xo(e,t)>=0:!1}var kt={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function ax(e){return e.substring(kt.key,kt.keyEnd)}function cx(e){return lx(e),Yw(e,Kw(e,0,kt.textEnd))}function Yw(e,t){let n=kt.textEnd;return n===t?-1:(t=kt.keyEnd=ux(e,kt.key=t,n),Kw(e,t,n))}function lx(e){kt.key=0,kt.keyEnd=0,kt.value=0,kt.valueEnd=0,kt.textEnd=e.length}function Kw(e,t,n){for(;t<n&&e.charCodeAt(t)<=32;)t++;return t}function ux(e,t,n){for(;t<n&&e.charCodeAt(t)>32;)t++;return t}function On(e,t,n){let r=ee(),i=Fi();if(Xt(r,i,t)){let o=He(),s=Qf();bw(o,s,r,e,t,r[De],n,!1)}return On}function Df(e,t,n,r,i){let o=t.inputs,s=i?"class":"style";hh(e,n,o[s],s,r)}function tl(e,t,n){return Zw(e,t,n,!1),tl}function nl(e,t){return Zw(e,t,null,!0),nl}function Qw(e){fx(yx,dx,e,!0)}function dx(e,t){for(let n=cx(t);n>=0;n=Yw(t,n))Vf(e,ax(t),!0)}function Zw(e,t,n,r){let i=ee(),o=He(),s=qf(2);if(o.firstUpdatePass&&Xw(o,e,s,r),t!==jt&&Xt(i,s,t)){let a=o.data[An()];eC(o,a,i,i[De],e,i[s+1]=wx(t,n),r,s)}}function fx(e,t,n,r){let i=He(),o=qf(2);i.firstUpdatePass&&Xw(i,null,o,r);let s=ee();if(n!==jt&&Xt(s,o,n)){let a=i.data[An()];if(tC(a,r)&&!Jw(i,o)){let c=r?a.classesWithoutHost:a.stylesWithoutHost;c!==null&&(n=Ad(c,n||"")),Df(i,a,s,n,r)}else _x(i,a,s,s[De],s[o+1],s[o+1]=vx(e,t,n),r,o)}}function Jw(e,t){return t>=e.expandoStartIndex}function Xw(e,t,n,r){let i=e.data;if(i[n+1]===null){let o=i[An()],s=Jw(e,n);tC(o,r)&&t===null&&!s&&(t=!1),t=hx(i,o,t,r),ix(i,o,t,n,s,r)}}function hx(e,t,n,r){let i=ZT(e),o=r?t.residualClasses:t.residualStyles;if(i===null)(r?t.classBindings:t.styleBindings)===0&&(n=bd(null,e,t,n,r),n=Jo(n,t.attrs,r),o=null);else{let s=t.directiveStylingLast;if(s===-1||e[s]!==i)if(n=bd(i,e,t,n,r),o===null){let c=px(e,t,r);c!==void 0&&Array.isArray(c)&&(c=bd(null,e,t,c[1],r),c=Jo(c,t.attrs,r),gx(e,t,r,c))}else o=mx(e,t,r)}return o!==void 0&&(r?t.residualClasses=o:t.residualStyles=o),n}function px(e,t,n){let r=n?t.classBindings:t.styleBindings;if(Pi(r)!==0)return e[Fr(r)]}function gx(e,t,n,r){let i=n?t.classBindings:t.styleBindings;e[Fr(i)]=r}function mx(e,t,n){let r,i=t.directiveEnd;for(let o=1+t.directiveStylingLast;o<i;o++){let s=e[o].hostAttrs;r=Jo(r,s,n)}return Jo(r,t.attrs,n)}function bd(e,t,n,r,i){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=t[a],r=Jo(r,o.hostAttrs,i),o!==e);)a++;return e!==null&&(n.directiveStylingLast=a),r}function Jo(e,t,n){let r=n?1:2,i=-1;if(t!==null)for(let o=0;o<t.length;o++){let s=t[o];typeof s=="number"?i=s:i===r&&(Array.isArray(e)||(e=e===void 0?[]:["",e]),Vf(e,s,n?!0:t[++o]))}return e===void 0?null:e}function vx(e,t,n){if(n==null||n==="")return ot;let r=[],i=Nn(n);if(Array.isArray(i))for(let o=0;o<i.length;o++)e(r,i[o],!0);else if(typeof i=="object")for(let o in i)i.hasOwnProperty(o)&&e(r,o,i[o]);else typeof i=="string"&&t(r,i);return r}function yx(e,t,n){let r=String(t);r!==""&&!r.includes(" ")&&Vf(e,r,n)}function _x(e,t,n,r,i,o,s,a){i===jt&&(i=ot);let c=0,l=0,u=0<i.length?i[0]:null,d=0<o.length?o[0]:null;for(;u!==null||d!==null;){let f=c<i.length?i[c+1]:void 0,h=l<o.length?o[l+1]:void 0,p=null,y;u===d?(c+=2,l+=2,f!==h&&(p=d,y=h)):d===null||u!==null&&u<d?(c+=2,p=u):(l+=2,p=d,y=h),p!==null&&eC(e,t,n,r,p,y,s,a),u=c<i.length?i[c]:null,d=l<o.length?o[l]:null}}function eC(e,t,n,r,i,o,s,a){if(!(t.type&3))return;let c=e.data,l=c[a+1],u=rx(l)?xy(c,t,n,i,Pi(l),s):void 0;if(!Pc(u)){Pc(o)||tx(l)&&(o=xy(c,null,n,i,a,s));let d=f_(An(),n);yA(r,s,d,i,o)}}function xy(e,t,n,r,i,o){let s=t===null,a;for(;i>0;){let c=e[i],l=Array.isArray(c),u=l?c[1]:c,d=u===null,f=n[i+1];f===jt&&(f=d?ot:void 0);let h=d?pd(f,r):u===r?f:void 0;if(l&&!Pc(h)&&(h=pd(c,r)),Pc(h)&&(a=h,s))return a;let p=e[i+1];i=s?Fr(p):Pi(p)}if(t!==null){let c=o?t.residualClasses:t.residualStyles;c!=null&&(a=pd(c,r))}return a}function Pc(e){return e!==void 0}function wx(e,t){return e==null||e===""||(typeof t=="string"?e=e+t:typeof e=="object"&&(e=st(Nn(e)))),e}function tC(e,t){return(e.flags&(t?8:16))!==0}var Sf=class{destroy(t){}updateValue(t,n){}swap(t,n){let r=Math.min(t,n),i=Math.max(t,n),o=this.detach(i);if(i-r>1){let s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(t,n){this.attach(n,this.detach(t))}};function Dd(e,t,n,r,i){return e===n&&Object.is(t,r)?1:Object.is(i(e,t),i(n,r))?-1:0}function Cx(e,t,n){let r,i,o=0,s=e.length-1,a=void 0;if(Array.isArray(t)){let c=t.length-1;for(;o<=s&&o<=c;){let l=e.at(o),u=t[o],d=Dd(o,l,o,u,n);if(d!==0){d<0&&e.updateValue(o,u),o++;continue}let f=e.at(s),h=t[c],p=Dd(s,f,c,h,n);if(p!==0){p<0&&e.updateValue(s,h),s--,c--;continue}let y=n(o,l),E=n(s,f),M=n(o,u);if(Object.is(M,E)){let se=n(c,h);Object.is(se,y)?(e.swap(o,s),e.updateValue(s,h),c--,s--):e.move(s,o),e.updateValue(o,u),o++;continue}if(r??=new kc,i??=Oy(e,o,s,n),Tf(e,r,o,M))e.updateValue(o,u),o++,s++;else if(i.has(M))r.set(y,e.detach(o)),s--;else{let se=e.create(o,t[o]);e.attach(o,se),o++,s++}}for(;o<=c;)Ry(e,r,n,o,t[o]),o++}else if(t!=null){let c=t[Symbol.iterator](),l=c.next();for(;!l.done&&o<=s;){let u=e.at(o),d=l.value,f=Dd(o,u,o,d,n);if(f!==0)f<0&&e.updateValue(o,d),o++,l=c.next();else{r??=new kc,i??=Oy(e,o,s,n);let h=n(o,d);if(Tf(e,r,o,h))e.updateValue(o,d),o++,s++,l=c.next();else if(!i.has(h))e.attach(o,e.create(o,d)),o++,s++,l=c.next();else{let p=n(o,u);r.set(p,e.detach(o)),s--}}}for(;!l.done;)Ry(e,r,n,e.length,l.value),l=c.next()}for(;o<=s;)e.destroy(e.detach(s--));r?.forEach(c=>{e.destroy(c)})}function Tf(e,t,n,r){return t!==void 0&&t.has(r)?(e.attach(n,t.get(r)),t.delete(r),!0):!1}function Ry(e,t,n,r,i){if(Tf(e,t,r,n(r,i)))e.updateValue(r,i);else{let o=e.create(r,i);e.attach(r,o)}}function Oy(e,t,n,r){let i=new Set;for(let o=t;o<=n;o++)i.add(r(o,e.at(o)));return i}var kc=class{constructor(){this.kvMap=new Map,this._vMap=void 0}has(t){return this.kvMap.has(t)}delete(t){if(!this.has(t))return!1;let n=this.kvMap.get(t);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(t,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(t),!0}get(t){return this.kvMap.get(t)}set(t,n){if(this.kvMap.has(t)){let r=this.kvMap.get(t);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,n)}else this.kvMap.set(t,n)}forEach(t){for(let[n,r]of this.kvMap)if(t(r,n),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),t(r,n)}}};function sr(e,t){Hi("NgControlFlow");let n=ee(),r=Fi(),i=n[r]!==jt?n[r]:-1,o=i!==-1?Fc(n,Ct+i):void 0,s=0;if(Xt(n,r,e)){let a=Y(null);try{if(o!==void 0&&kw(o,s),e!==-1){let c=Ct+e,l=Fc(n,c),u=xf(n[V],c),d=Ko(l,u.tView.ssrId),f=Jc(n,u,t,{dehydratedView:d});Xc(l,f,s,Go(u,d))}}finally{Y(a)}}else if(o!==void 0){let a=Pw(o,s);a!==void 0&&(a[Ye]=t)}}var Mf=class{constructor(t,n,r){this.lContainer=t,this.$implicit=n,this.$index=r}get $count(){return this.lContainer.length-Ke}};function tn(e,t){return t}var Af=class{constructor(t,n,r){this.hasEmptyBlock=t,this.trackByFn=n,this.liveCollection=r}};function nn(e,t,n,r,i,o,s,a,c,l,u,d,f){Hi("NgControlFlow");let h=ee(),p=He(),y=c!==void 0,E=ee(),M=a?s.bind(E[Lt][Ye]):s,se=new Af(y,M);E[Ct+e]=se,If(h,p,e+1,t,n,r,i,Ni(p.consts,o)),y&&If(h,p,e+2,c,l,u,d,Ni(p.consts,f))}var Nf=class extends Sf{constructor(t,n,r){super(),this.lContainer=t,this.hostLView=n,this.templateTNode=r,this.operationsCounter=void 0,this.needsIndexUpdate=!1}get length(){return this.lContainer.length-Ke}at(t){return this.getLView(t)[Ye].$implicit}attach(t,n){let r=n[Wo];this.needsIndexUpdate||=t!==this.length,Xc(this.lContainer,n,t,Go(this.templateTNode,r))}detach(t){return this.needsIndexUpdate||=t!==this.length-1,Ix(this.lContainer,t)}create(t,n){let r=Ko(this.lContainer,this.templateTNode.tView.ssrId),i=Jc(this.hostLView,this.templateTNode,new Mf(this.lContainer,n,t),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(t){Gc(t[V],t),this.operationsCounter?.recordDestroy()}updateValue(t,n){this.getLView(t)[Ye].$implicit=n}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let t=0;t<this.length;t++)this.getLView(t)[Ye].$index=t}getLView(t){return Ex(this.lContainer,t)}};function rn(e){let t=Y(null),n=An();try{let r=ee(),i=r[V],o=r[n],s=n+1,a=Fc(r,s);if(o.liveCollection===void 0){let l=xf(i,s);o.liveCollection=new Nf(a,r,l)}else o.liveCollection.reset();let c=o.liveCollection;if(Cx(c,e,o.trackByFn),c.updateIndexes(),o.hasEmptyBlock){let l=Fi(),u=c.length===0;if(Xt(r,l,u)){let d=n+2,f=Fc(r,d);if(u){let h=xf(i,d),p=Ko(f,h.tView.ssrId),y=Jc(r,h,void 0,{dehydratedView:p});Xc(f,y,0,Go(h,p))}else kw(f,0)}}}finally{Y(t)}}function Fc(e,t){return e[t]}function Ix(e,t){return qo(e,t)}function Ex(e,t){return Pw(e,t)}function xf(e,t){return Wf(e,t)}function bx(e,t,n,r,i,o){let s=t.consts,a=Ni(s,i),c=Qc(t,e,2,r,a);return Dw(t,n,c,Ni(s,o)),c.attrs!==null&&ff(c,c.attrs,!1),c.mergedAttrs!==null&&ff(c,c.mergedAttrs,!0),t.queries!==null&&t.queries.elementStart(t,c),c}function m(e,t,n,r){let i=ee(),o=He(),s=Ct+e,a=i[De],c=o.firstCreatePass?bx(s,o,i,t,n,r):o.data[s],l=Dx(o,i,c,a,t,e);i[s]=l;let u=Hf(c);return es(c,!0),gw(a,l,c),!YN(c)&&Zf()&&uh(o,i,l,c),LT()===0&&Pr(l,i),VT(),u&&(Cw(o,i,c),ww(o,c,i)),r!==null&&Iw(i,c),m}function g(){let e=ct();__()?WT():(e=e.parent,es(e,!1));let t=e;BT(t)&&$T(),jT();let n=He();return n.firstCreatePass&&(Xf(n,e),a_(e)&&n.queries.elementEnd(e)),t.classesWithoutHost!=null&&iM(t)&&Df(n,t,ee(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&oM(t)&&Df(n,t,ee(),t.stylesWithoutHost,!1),g}function k(e,t,n,r){return m(e,t,n,r),g(),k}var Dx=(e,t,n,r,i,o)=>(Jf(!0),cw(r,i,eM()));function Xe(){return ee()}var Lc="en-US";var Sx=Lc;function Tx(e){typeof e=="string"&&(Sx=e.toLowerCase().replace(/_/g,"-"))}var Mx=(e,t,n)=>{};function b(e,t,n,r){let i=ee(),o=He(),s=ct();return nC(o,i,i[De],s,e,t,r),b}function Ax(e,t,n,r){let i=e.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=t[Cc],c=i[o+2];return a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function nC(e,t,n,r,i,o,s){let a=Hf(r),l=e.firstCreatePass&&xw(e),u=t[Ye],d=Nw(t),f=!0;if(r.type&3||s){let y=It(r,t),E=s?s(y):y,M=d.length,se=s?Ae=>s(Jt(Ae[r.index])):r.index,me=null;if(!s&&a&&(me=Ax(e,t,i,r.index)),me!==null){let Ae=me.__ngLastListenerFn__||me;Ae.__ngNextListenerFn__=o,me.__ngLastListenerFn__=o,f=!1}else{o=ky(r,t,u,o),Mx(y,i,o);let Ae=n.listen(E,i,o);d.push(o,Ae),l&&l.push(i,se,M,M+1)}}else o=ky(r,t,u,o);let h=r.outputs,p;if(f&&h!==null&&(p=h[i])){let y=p.length;if(y)for(let E=0;E<y;E+=2){let M=p[E],se=p[E+1],Ne=t[M][se].subscribe(o),pe=d.length;d.push(o,Ne),l&&l.push(i,r.index,pe,-(pe+1))}}}function Py(e,t,n,r){let i=Y(null);try{return Kt(6,t,n),n(r)!==!1}catch(o){return Rw(e,o),!1}finally{Kt(7,t,n),Y(i)}}function ky(e,t,n,r){return function i(o){if(o===Function)return r;let s=e.componentOffset>-1?nr(e.index,t):t;gh(s,5);let a=Py(t,n,r,o),c=i.__ngNextListenerFn__;for(;c;)a=Py(t,n,c,o)&&a,c=c.__ngNextListenerFn__;return a}}function Se(e=1){return XT(e)}function rl(e,t,n){kN(e,t,n)}function rs(e){let t=ee(),n=He(),r=C_();Gf(r+1);let i=yh(n,r);if(e.dirty&&OT(t)===((i.metadata.flags&2)===2)){if(i.matches===null)e.reset([]);else{let o=VN(t,r);e.reset(o,DM),e.notifyOnChanges()}return!0}return!1}function is(){return ON(ee(),C_())}function rC(e){let t=zT();return RT(t,Ct+e)}function v(e,t=""){let n=ee(),r=He(),i=e+Ct,o=r.firstCreatePass?Qc(r,i,1,t,null):r.data[i],s=Nx(r,n,o,t,e);n[i]=s,Zf()&&uh(r,n,s,o),es(o,!1)}var Nx=(e,t,n,r,i)=>(Jf(!0),tA(t[De],r));function ar(e){return Et("",e,""),ar}function Et(e,t,n){let r=ee(),i=XN(r,e,t,n);return i!==jt&&Ow(r,An(),i),Et}function wh(e,t,n,r,i){let o=ee(),s=ex(o,e,t,n,r,i);return s!==jt&&Ow(o,An(),s),wh}function Le(e,t,n){Gw(t)&&(t=t());let r=ee(),i=Fi();if(Xt(r,i,t)){let o=He(),s=Qf();bw(o,s,r,e,t,r[De],n,!1)}return Le}function Ue(e,t){let n=Gw(e);return n&&e.set(t),n}function Ve(e,t){let n=ee(),r=He(),i=ct();return nC(r,n,n[De],i,e,t),Ve}function xx(e,t,n){let r=He();if(r.firstCreatePass){let i=Xn(e);Rf(n,r.data,r.blueprint,i,!0),Rf(t,r.data,r.blueprint,i,!1)}}function Rf(e,t,n,r,i){if(e=Je(e),Array.isArray(e))for(let o=0;o<e.length;o++)Rf(e[o],t,n,r,i);else{let o=He(),s=ee(),a=ct(),c=Ti(e)?e:Je(e.provide),l=i_(e),u=a.providerIndexes&1048575,d=a.directiveStart,f=a.providerIndexes>>20;if(Ti(e)||!e.multi){let h=new Rr(l,i,D),p=Td(c,t,i?u:u+f,d);p===-1?($d(Sc(a,s),o,c),Sd(o,e,t.length),t.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(h),s.push(h)):(n[p]=h,s[p]=h)}else{let h=Td(c,t,u+f,d),p=Td(c,t,u,u+f),y=h>=0&&n[h],E=p>=0&&n[p];if(i&&!E||!i&&!y){$d(Sc(a,s),o,c);let M=Px(i?Ox:Rx,n.length,i,r,l);!i&&E&&(n[p].providerFactory=M),Sd(o,e,t.length,0),t.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(M),s.push(M)}else{let M=iC(n[i?p:h],l,!i&&r);Sd(o,e,h>-1?h:p,M)}!i&&r&&E&&n[p].componentProviders++}}}function Sd(e,t,n,r){let i=Ti(t),o=yT(t);if(i||o){let c=(o?Je(t.useClass):t).prototype.ngOnDestroy;if(c){let l=e.destroyHooks||(e.destroyHooks=[]);if(!i&&t.multi){let u=l.indexOf(n);u===-1?l.push(n,[r,c]):l[u+1].push(r,c)}else l.push(n,c)}}}function iC(e,t,n){return n&&e.componentProviders++,e.multi.push(t)-1}function Td(e,t,n,r){for(let i=n;i<r;i++)if(t[i]===e)return i;return-1}function Rx(e,t,n,r){return Of(this.multi,[])}function Ox(e,t,n,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=Or(n,n[V],this.providerFactory.index,r);o=a.slice(0,s),Of(i,o);for(let c=s;c<a.length;c++)o.push(a[c])}else o=[],Of(i,o);return o}function Of(e,t){for(let n=0;n<e.length;n++){let r=e[n];t.push(r())}return t}function Px(e,t,n,r,i){let o=new Rr(e,n,D);return o.multi=[],o.index=t,o.componentProviders=0,iC(o,i,r&&!n),o}function os(e,t=[]){return n=>{n.providersResolver=(r,i)=>xx(r,i?i(e):e,t)}}var kx=(()=>{class e{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=t_(!1,n.type),i=r.length>0?_h([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=T({token:e,providedIn:"environment",factory:()=>new e(z(wt))})}}return e})();function x(e){Hi("NgStandalone"),e.getStandaloneInjector=t=>t.get(kx).getOrCreateStandaloneInjector(e)}var il=(()=>{class e{log(n){console.log(n)}warn(n){console.warn(n)}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"platform"})}}return e})();var oC=new P("");function Vr(e){return!!e&&typeof e.then=="function"}function sC(e){return!!e&&typeof e.subscribe=="function"}var aC=new P(""),cC=(()=>{class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r}),this.appInits=I(aC,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let o=i();if(Vr(o))n.push(o);else if(sC(o)){let s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});n.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),Ch=new P("");function Fx(){Ev(()=>{throw new S(600,!1)})}function Lx(e){return e.isBoundToModule}var Vx=10;function jx(e,t,n){try{let r=n();return Vr(r)?r.catch(i=>{throw t.runOutsideAngular(()=>e.handleError(i)),i}):r}catch(r){throw t.runOutsideAngular(()=>e.handleError(r)),r}}var jr=(()=>{class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=I(EM),this.afterRenderManager=I(JN),this.zonelessEnabled=I(vh),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new Be,this.afterTick=new Be,this.componentTypes=[],this.components=[],this.isStable=I(Vi).hasPendingTasks.pipe(H(n=>!n)),this._injector=I(wt)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}get injector(){return this._injector}bootstrap(n,r){let i=n instanceof xc;if(!this._injector.get(cC).done){let f=!i&&Zy(n),h=!1;throw new S(405,h)}let s;i?s=n:s=this._injector.get(Ri).resolveComponentFactory(n),this.componentTypes.push(s.componentType);let a=Lx(s)?void 0:this._injector.get(tr),c=r||s.selector,l=s.create(er.NULL,[],c,a),u=l.location.nativeElement,d=l.injector.get(oC,null);return d?.registerApplication(u),l.onDestroy(()=>{this.detachView(l.hostView),gc(this.components,l),d?.unregisterApplication(u)}),this._loadComponent(l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new S(101,!1);let n=Y(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,Y(n),this.afterTick.next()}}synchronize(){let n=null;this._injector.destroyed||(n=this._injector.get(Oi,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<Vx;)this.synchronizeOnce(n)}synchronizeOnce(n){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:o}of this._views)Ux(i,o,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else n?.begin?.(),n?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>Wc(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;gc(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);let r=this._injector.get(Ch,[]);[...this._bootstrapListeners,...r].forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>gc(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new S(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function gc(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}function Ux(e,t,n,r){if(!n&&!Wc(e))return;Vw(e,t,n&&!r?0:1)}var Pf=class{constructor(t,n){this.ngModuleFactory=t,this.componentFactories=n}},Ih=(()=>{class e{compileModuleSync(n){return new Cf(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=Jy(n),o=aw(i.declarations).reduce((s,a)=>{let c=Tr(a);return c&&s.push(new Qo(c)),s},[]);return new Pf(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var Bx=(()=>{class e{constructor(){this.zone=I(Pe),this.changeDetectionScheduler=I(xi),this.applicationRef=I(jr)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function $x({ngZoneFactory:e,ignoreChangesOutsideZone:t,scheduleInRootZone:n}){return e??=()=>new Pe(Q(C({},Hx()),{scheduleInRootZone:n})),[{provide:Pe,useFactory:e},{provide:Si,multi:!0,useFactory:()=>{let r=I(Bx,{optional:!0});return()=>r.initialize()}},{provide:Si,multi:!0,useFactory:()=>{let r=I(Wx);return()=>{r.initialize()}}},t===!0?{provide:$w,useValue:!0}:[],{provide:Hw,useValue:n??j_}]}function Hx(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}var Wx=(()=>{class e{constructor(){this.subscription=new Ee,this.initialized=!1,this.zone=I(Pe),this.pendingTasks=I(Vi)}initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Pe.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Pe.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var zx=(()=>{class e{constructor(){this.appRef=I(jr),this.taskService=I(Vi),this.ngZone=I(Pe),this.zonelessEnabled=I(vh),this.disableScheduling=I($w,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new Ee,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Mc):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(I(Hw,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Gd||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?py:B_;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Mc+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(n),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,py(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function qx(){return typeof $localize<"u"&&$localize.locale||Lc}var Eh=new P("",{providedIn:"root",factory:()=>I(Eh,W.Optional|W.SkipSelf)||qx()});var lC=new P("");function uc(e){return!!e.platformInjector}function Gx(e){let t=uc(e)?e.r3Injector:e.moduleRef.injector,n=t.get(Pe);return n.run(()=>{uc(e)?e.r3Injector.resolveInjectorInitializers():e.moduleRef.resolveInjectorInitializers();let r=t.get(wn,null),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:o=>{r.handleError(o)}})}),uc(e)){let o=()=>t.destroy(),s=e.platformInjector.get(lC);s.add(o),t.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else e.moduleRef.onDestroy(()=>{gc(e.allPlatformModules,e.moduleRef),i.unsubscribe()});return jx(r,n,()=>{let o=t.get(cC);return o.runInitializers(),o.donePromise.then(()=>{let s=t.get(Eh,Lc);if(Tx(s||Lc),uc(e)){let a=t.get(jr);return e.rootComponent!==void 0&&a.bootstrap(e.rootComponent),a}else return Yx(e.moduleRef,e.allPlatformModules),e.moduleRef})})})}function Yx(e,t){let n=e.injector.get(jr);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(r=>n.bootstrap(r));else if(e.instance.ngDoBootstrap)e.instance.ngDoBootstrap(n);else throw new S(-403,!1);t.push(e)}var mc=null;function Kx(e=[],t){return er.create({name:t,providers:[{provide:Bc,useValue:"platform"},{provide:lC,useValue:new Set([()=>mc=null])},...e]})}function Qx(e=[]){if(mc)return mc;let t=Kx(e);return mc=t,Fx(),Zx(t),t}function Zx(e){e.get(ih,null)?.forEach(n=>n())}var Pn=(()=>{class e{static{this.__NG_ELEMENT_ID__=Jx}}return e})();function Jx(e){return Xx(ct(),ee(),(e&16)===16)}function Xx(e,t,n){if(Hc(e)&&!n){let r=nr(e.index,t);return new kr(r,r)}else if(e.type&175){let r=t[Lt];return new kr(r,t)}return null}function uC(e){try{let{rootComponent:t,appProviders:n,platformProviders:r}=e,i=Qx(r),o=[$x({}),{provide:xi,useExisting:zx},...n||[]],s=new Oc({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1});return Gx({r3Injector:s.injector,platformInjector:i,rootComponent:t})}catch(t){return Promise.reject(t)}}function ss(e){return typeof e=="boolean"?e:e!=null&&e!=="false"}function as(e,t){Hi("NgSignals");let n=wv(e);return t?.equal&&(n[gn].equal=t.equal),n}function kn(e){let t=Y(null);try{return e()}finally{Y(t)}}var hC=null;function Fn(){return hC}function pC(e){hC??=e}var ol=class{};var pt=new P(""),gC=(()=>{class e{historyGo(n){throw new Error("")}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=T({token:e,factory:()=>I(nR),providedIn:"platform"})}}return e})();var nR=(()=>{class e extends gC{constructor(){super(),this._doc=I(pt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Fn().getBaseHref(this._doc)}onPopState(n){let r=Fn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=Fn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=T({token:e,factory:()=>new e,providedIn:"platform"})}}return e})();function mC(e,t){if(e.length==0)return t;if(t.length==0)return e;let n=0;return e.endsWith("/")&&n++,t.startsWith("/")&&n++,n==2?e+t.substring(1):n==1?e+t:e+"/"+t}function dC(e){let t=e.match(/#|\?|$/),n=t&&t.index||e.length,r=n-(e[n-1]==="/"?1:0);return e.slice(0,r)+e.slice(n)}function Ur(e){return e&&e[0]!=="?"?"?"+e:e}var al=(()=>{class e{historyGo(n){throw new Error("")}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=T({token:e,factory:()=>I(vC),providedIn:"root"})}}return e})(),rR=new P(""),vC=(()=>{class e extends al{constructor(n,r){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??I(pt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return mC(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+Ur(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+Ur(o));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+Ur(o));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static{this.\u0275fac=function(r){return new(r||e)(z(gC),z(rR,8))}}static{this.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var cs=(()=>{class e{constructor(n){this._subject=new we,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=sR(dC(fC(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+Ur(r))}normalize(n){return e.stripTrailingSlash(oR(this._basePath,fC(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Ur(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Ur(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r,complete:i})}static{this.normalizeQueryParams=Ur}static{this.joinWithSlash=mC}static{this.stripTrailingSlash=dC}static{this.\u0275fac=function(r){return new(r||e)(z(al))}}static{this.\u0275prov=T({token:e,factory:()=>iR(),providedIn:"root"})}}return e})();function iR(){return new cs(z(al))}function oR(e,t){if(!e||!t.startsWith(e))return t;let n=t.substring(e.length);return n===""||["/",";","?","#"].includes(n[0])?n:t}function fC(e){return e.replace(/\/index.html$/,"")}function sR(e){if(new RegExp("^(https?:)?//").test(e)){let[,n]=e.split(/\/\/[^\/]+/);return n}return e}function yC(e,t){t=encodeURIComponent(t);for(let n of e.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===t)return decodeURIComponent(o)}return null}var Dh=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=bn({type:e})}static{this.\u0275inj=En({})}}return e})(),_C="browser",aR="server";function Sh(e){return e===aR}var sl=class{};var Ah=class extends ol{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Nh=class e extends Ah{static makeCurrent(){pC(new e)}onAndCancel(t,n,r){return t.addEventListener(n,r),()=>{t.removeEventListener(n,r)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.remove()}createElement(t,n){return n=n||this.getDefaultDocument(),n.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return n==="window"?window:n==="document"?t:n==="body"?t.body:null}getBaseHref(t){let n=lR();return n==null?null:uR(n)}resetBaseElement(){ls=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return yC(document.cookie,t)}},ls=null;function lR(){return ls=ls||document.querySelector("base"),ls?ls.getAttribute("href"):null}function uR(e){return new URL(e,document.baseURI).pathname}var dR=(()=>{class e{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=T({token:e,factory:e.\u0275fac})}}return e})(),xh=new P(""),EC=(()=>{class e{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new S(5101,!1);return this._eventNameToPlugin.set(n,r),r}static{this.\u0275fac=function(r){return new(r||e)(z(xh),z(Pe))}}static{this.\u0275prov=T({token:e,factory:e.\u0275fac})}}return e})(),cl=class{constructor(t){this._doc=t}},Th="ng-app-id",bC=(()=>{class e{constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Sh(o),this.resetHostNodes()}addStyles(n){for(let r of n)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(n){for(let r of n)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let n=this.styleNodesInDOM;n&&(n.forEach(r=>r.remove()),n.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(let r of this.getAllStyles())this.addStyleToHost(n,r)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(let r of this.hostNodes)this.addStyleToHost(r,n)}onStyleRemoved(n){let r=this.styleRef;r.get(n)?.elements?.forEach(i=>i.remove()),r.delete(n)}collectServerRenderedStyles(){let n=this.doc.head?.querySelectorAll(`style[${Th}="${this.appId}"]`);if(n?.length){let r=new Map;return n.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(n,r){let i=this.styleRef;if(i.has(n)){let o=i.get(n);return o.usage+=r,o.usage}return i.set(n,{usage:r,elements:[]}),r}getStyleElement(n,r){let i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===n)return i.delete(r),o.removeAttribute(Th),o;{let s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(Th,this.appId),n.appendChild(s),s}}addStyleToHost(n,r){let i=this.getStyleElement(n,r),o=this.styleRef,s=o.get(r)?.elements;s?s.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){let n=this.hostNodes;n.clear(),n.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||e)(z(pt),z(rh),z(oh,8),z(Ui))}}static{this.\u0275prov=T({token:e,factory:e.\u0275fac})}}return e})(),Mh={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Oh=/%COMP%/g,DC="%COMP%",fR=`_nghost-${DC}`,hR=`_ngcontent-${DC}`,pR=!0,gR=new P("",{providedIn:"root",factory:()=>pR});function mR(e){return hR.replace(Oh,e)}function vR(e){return fR.replace(Oh,e)}function SC(e,t){return t.map(n=>n.replace(Oh,e))}var wC=(()=>{class e{constructor(n,r,i,o,s,a,c,l=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=c,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=Sh(a),this.defaultRenderer=new us(n,s,c,this.platformIsServer)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Zt.ShadowDom&&(r=Q(C({},r),{encapsulation:Zt.Emulated}));let i=this.getOrCreateRenderer(n,r);return i instanceof ll?i.applyToHost(n):i instanceof ds&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,d=this.platformIsServer;switch(r.encapsulation){case Zt.Emulated:o=new ll(c,l,r,this.appId,u,s,a,d);break;case Zt.ShadowDom:return new Rh(c,l,n,r,s,a,this.nonce,d);default:o=new ds(c,l,r,u,s,a,d);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||e)(z(EC),z(bC),z(rh),z(gR),z(pt),z(Ui),z(Pe),z(oh))}}static{this.\u0275prov=T({token:e,factory:e.\u0275fac})}}return e})(),us=class{constructor(t,n,r,i){this.eventManager=t,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(t,n){return n?this.doc.createElementNS(Mh[n]||n,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,n){(CC(t)?t.content:t).appendChild(n)}insertBefore(t,n,r){t&&(CC(t)?t.content:t).insertBefore(n,r)}removeChild(t,n){n.remove()}selectRootElement(t,n){let r=typeof t=="string"?this.doc.querySelector(t):t;if(!r)throw new S(-5104,!1);return n||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,r,i){if(i){n=i+":"+n;let o=Mh[i];o?t.setAttributeNS(o,n,r):t.setAttribute(n,r)}else t.setAttribute(n,r)}removeAttribute(t,n,r){if(r){let i=Mh[r];i?t.removeAttributeNS(i,n):t.removeAttribute(`${r}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,r,i){i&(In.DashCase|In.Important)?t.style.setProperty(n,r,i&In.Important?"important":""):t.style[n]=r}removeStyle(t,n,r){r&In.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,r){t!=null&&(t[n]=r)}setValue(t,n){t.nodeValue=n}listen(t,n,r){if(typeof t=="string"&&(t=Fn().getGlobalEventTarget(this.doc,t),!t))throw new Error(`Unsupported event target ${t} for event ${n}`);return this.eventManager.addEventListener(t,n,this.decoratePreventDefault(r))}decoratePreventDefault(t){return n=>{if(n==="__ngUnwrap__")return t;(this.platformIsServer?this.ngZone.runGuarded(()=>t(n)):t(n))===!1&&n.preventDefault()}}};function CC(e){return e.tagName==="TEMPLATE"&&e.content!==void 0}var Rh=class extends us{constructor(t,n,r,i,o,s,a,c){super(t,o,s,c),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=SC(i.id,i.styles);for(let u of l){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=u,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,r){return super.insertBefore(this.nodeOrShadowRoot(t),n,r)}removeChild(t,n){return super.removeChild(null,n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},ds=class extends us{constructor(t,n,r,i,o,s,a,c){super(t,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=c?SC(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},ll=class extends ds{constructor(t,n,r,i,o,s,a,c){let l=i+"-"+r.id;super(t,n,r,o,s,a,c,l),this.contentAttr=mR(l),this.hostAttr=vR(l)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,n){let r=super.createElement(t,n);return super.setAttribute(r,this.contentAttr,""),r}},yR=(()=>{class e extends cl{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||e)(z(pt))}}static{this.\u0275prov=T({token:e,factory:e.\u0275fac})}}return e})(),IC=["alt","control","meta","shift"],_R={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},wR={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey},CR=(()=>{class e extends cl{constructor(n){super(n)}supports(n){return e.parseEventName(n)!=null}addEventListener(n,r,i){let o=e.parseEventName(r),s=e.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Fn().onAndCancel(n,o.domEventName,s))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=e._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),IC.forEach(l=>{let u=r.indexOf(l);u>-1&&(r.splice(u,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(n,r){let i=_R[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),IC.forEach(s=>{if(s!==i){let a=wR[s];a(n)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{e.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return n==="esc"?"escape":n}static{this.\u0275fac=function(r){return new(r||e)(z(pt))}}static{this.\u0275prov=T({token:e,factory:e.\u0275fac})}}return e})();function TC(e,t){return uC(C({rootComponent:e},IR(t)))}function IR(e){return{appProviders:[...TR,...e?.providers??[]],platformProviders:SR}}function ER(){Nh.makeCurrent()}function bR(){return new wn}function DR(){return Y_(document),document}var SR=[{provide:Ui,useValue:_C},{provide:ih,useValue:ER,multi:!0},{provide:pt,useFactory:DR,deps:[]}];var TR=[{provide:Bc,useValue:"root"},{provide:wn,useFactory:bR,deps:[]},{provide:xh,useClass:yR,multi:!0,deps:[pt,Pe,Ui]},{provide:xh,useClass:CR,multi:!0,deps:[pt]},wC,bC,EC,{provide:Oi,useExisting:wC},{provide:sl,useClass:dR,deps:[]},[]];var MC=(()=>{class e{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static{this.\u0275fac=function(r){return new(r||e)(z(pt))}}static{this.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var Ph=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=T({token:e,factory:function(r){let i=null;return r?i=new(r||e):i=z(MR),i},providedIn:"root"})}}return e})(),MR=(()=>{class e extends Ph{constructor(n){super(),this._doc=n}sanitize(n,r){if(r==null)return null;switch(n){case rr.NONE:return r;case rr.HTML:return Bi(r,"HTML")?Nn(r):sw(this._doc,String(r)).toString();case rr.STYLE:return Bi(r,"Style")?Nn(r):r;case rr.SCRIPT:if(Bi(r,"Script"))return Nn(r);throw new S(5200,!1);case rr.URL:return Bi(r,"URL")?Nn(r):ah(String(r));case rr.RESOURCE_URL:if(Bi(r,"ResourceURL"))return Nn(r);throw new S(5201,!1);default:throw new S(5202,!1)}}bypassSecurityTrustHtml(n){return Q_(n)}bypassSecurityTrustStyle(n){return Z_(n)}bypassSecurityTrustScript(n){return J_(n)}bypassSecurityTrustUrl(n){return X_(n)}bypassSecurityTrustResourceUrl(n){return ew(n)}static{this.\u0275fac=function(r){return new(r||e)(z(pt))}}static{this.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var B="primary",Ms=Symbol("RouteTitle"),jh=class{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n[0]:n}return null}getAll(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Ki(e){return new jh(e)}function AR(e,t,n){let r=n.path.split("/");if(r.length>e.length||n.pathMatch==="full"&&(t.hasChildren()||r.length<e.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=e[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:e.slice(0,r.length),posParams:i}}function NR(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!on(e[n],t[n]))return!1;return!0}function on(e,t){let n=e?Uh(e):void 0,r=t?Uh(t):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!LC(e[i],t[i]))return!1;return!0}function Uh(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}function LC(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;let n=[...e].sort(),r=[...t].sort();return n.every((i,o)=>r[o]===i)}else return e===t}function VC(e){return e.length>0?e[e.length-1]:null}function lr(e){return sd(e)?e:Vr(e)?ne(Promise.resolve(e)):L(e)}var xR={exact:UC,subset:BC},jC={exact:RR,subset:OR,ignored:()=>!0};function NC(e,t,n){return xR[n.paths](e.root,t.root,n.matrixParams)&&jC[n.queryParams](e.queryParams,t.queryParams)&&!(n.fragment==="exact"&&e.fragment!==t.fragment)}function RR(e,t){return on(e,t)}function UC(e,t,n){if(!$r(e.segments,t.segments)||!fl(e.segments,t.segments,n)||e.numberOfChildren!==t.numberOfChildren)return!1;for(let r in t.children)if(!e.children[r]||!UC(e.children[r],t.children[r],n))return!1;return!0}function OR(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>LC(e[n],t[n]))}function BC(e,t,n){return $C(e,t,t.segments,n)}function $C(e,t,n,r){if(e.segments.length>n.length){let i=e.segments.slice(0,n.length);return!(!$r(i,n)||t.hasChildren()||!fl(i,n,r))}else if(e.segments.length===n.length){if(!$r(e.segments,n)||!fl(e.segments,n,r))return!1;for(let i in t.children)if(!e.children[i]||!BC(e.children[i],t.children[i],r))return!1;return!0}else{let i=n.slice(0,e.segments.length),o=n.slice(e.segments.length);return!$r(e.segments,i)||!fl(e.segments,i,r)||!e.children[B]?!1:$C(e.children[B],t,o,r)}}function fl(e,t,n){return t.every((r,i)=>jC[n](e[i].parameters,r.parameters))}var Vn=class{constructor(t=new ae([],{}),n={},r=null){this.root=t,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Ki(this.queryParams),this._queryParamMap}toString(){return FR.serialize(this)}},ae=class{constructor(t,n){this.segments=t,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return hl(this)}},Br=class{constructor(t,n){this.path=t,this.parameters=n}get parameterMap(){return this._parameterMap??=Ki(this.parameters),this._parameterMap}toString(){return WC(this)}};function PR(e,t){return $r(e,t)&&e.every((n,r)=>on(n.parameters,t[r].parameters))}function $r(e,t){return e.length!==t.length?!1:e.every((n,r)=>n.path===t[r].path)}function kR(e,t){let n=[];return Object.entries(e.children).forEach(([r,i])=>{r===B&&(n=n.concat(t(i,r)))}),Object.entries(e.children).forEach(([r,i])=>{r!==B&&(n=n.concat(t(i,r)))}),n}var fp=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=T({token:e,factory:()=>new ys,providedIn:"root"})}}return e})(),ys=class{parse(t){let n=new $h(t);return new Vn(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(t){let n=`/${fs(t.root,!0)}`,r=jR(t.queryParams),i=typeof t.fragment=="string"?`#${LR(t.fragment)}`:"";return`${n}${r}${i}`}},FR=new ys;function hl(e){return e.segments.map(t=>WC(t)).join("/")}function fs(e,t){if(!e.hasChildren())return hl(e);if(t){let n=e.children[B]?fs(e.children[B],!1):"",r=[];return Object.entries(e.children).forEach(([i,o])=>{i!==B&&r.push(`${i}:${fs(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=kR(e,(r,i)=>i===B?[fs(e.children[B],!1)]:[`${i}:${fs(r,!1)}`]);return Object.keys(e.children).length===1&&e.children[B]!=null?`${hl(e)}/${n[0]}`:`${hl(e)}/(${n.join("//")})`}}function HC(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ul(e){return HC(e).replace(/%3B/gi,";")}function LR(e){return encodeURI(e)}function Bh(e){return HC(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function pl(e){return decodeURIComponent(e)}function xC(e){return pl(e.replace(/\+/g,"%20"))}function WC(e){return`${Bh(e.path)}${VR(e.parameters)}`}function VR(e){return Object.entries(e).map(([t,n])=>`;${Bh(t)}=${Bh(n)}`).join("")}function jR(e){let t=Object.entries(e).map(([n,r])=>Array.isArray(r)?r.map(i=>`${ul(n)}=${ul(i)}`).join("&"):`${ul(n)}=${ul(r)}`).filter(n=>n);return t.length?`?${t.join("&")}`:""}var UR=/^[^\/()?;#]+/;function kh(e){let t=e.match(UR);return t?t[0]:""}var BR=/^[^\/()?;=#]+/;function $R(e){let t=e.match(BR);return t?t[0]:""}var HR=/^[^=?&#]+/;function WR(e){let t=e.match(HR);return t?t[0]:""}var zR=/^[^&#]+/;function qR(e){let t=e.match(zR);return t?t[0]:""}var $h=class{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ae([],{}):new ae([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(n).length>0)&&(r[B]=new ae(t,n)),r}parseSegment(){let t=kh(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new S(4009,!1);return this.capture(t),new Br(pl(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let n=$R(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=kh(this.remaining);i&&(r=i,this.capture(r))}t[pl(n)]=pl(r)}parseQueryParam(t){let n=WR(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=qR(this.remaining);s&&(r=s,this.capture(r))}let i=xC(n),o=xC(r);if(t.hasOwnProperty(i)){let s=t[i];Array.isArray(s)||(s=[s],t[i]=s),s.push(o)}else t[i]=o}parseParens(t){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=kh(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new S(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):t&&(o=B);let s=this.parseChildren();n[o]=Object.keys(s).length===1?s[B]:new ae([],s),this.consumeOptional("//")}return n}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new S(4011,!1)}};function zC(e){return e.segments.length>0?new ae([],{[B]:e}):e}function qC(e){let t={};for(let[r,i]of Object.entries(e.children)){let o=qC(i);if(r===B&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))t[s]=a;else(o.segments.length>0||o.hasChildren())&&(t[r]=o)}let n=new ae(e.segments,t);return GR(n)}function GR(e){if(e.numberOfChildren===1&&e.children[B]){let t=e.children[B];return new ae(e.segments.concat(t.segments),t.children)}return e}function _s(e){return e instanceof Vn}function YR(e,t,n=null,r=null){let i=GC(e);return YC(i,t,n,r)}function GC(e){let t;function n(o){let s={};for(let c of o.children){let l=n(c);s[c.outlet]=l}let a=new ae(o.url,s);return o===e&&(t=a),a}let r=n(e.root),i=zC(r);return t??i}function YC(e,t,n,r){let i=e;for(;i.parent;)i=i.parent;if(t.length===0)return Fh(i,i,i,n,r);let o=KR(t);if(o.toRoot())return Fh(i,i,new ae([],{}),n,r);let s=QR(o,i,e),a=s.processChildren?gs(s.segmentGroup,s.index,o.commands):QC(s.segmentGroup,s.index,o.commands);return Fh(i,s.segmentGroup,a,n,r)}function gl(e){return typeof e=="object"&&e!=null&&!e.outlets&&!e.segmentPath}function ws(e){return typeof e=="object"&&e!=null&&e.outlets}function Fh(e,t,n,r,i){let o={};r&&Object.entries(r).forEach(([c,l])=>{o[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`});let s;e===t?s=n:s=KC(e,t,n);let a=zC(qC(s));return new Vn(a,o,i)}function KC(e,t,n){let r={};return Object.entries(e.children).forEach(([i,o])=>{o===t?r[i]=n:r[i]=KC(o,t,n)}),new ae(e.segments,r)}var ml=class{constructor(t,n,r){if(this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=r,t&&r.length>0&&gl(r[0]))throw new S(4003,!1);let i=r.find(ws);if(i&&i!==VC(r))throw new S(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function KR(e){if(typeof e[0]=="string"&&e.length===1&&e[0]==="/")return new ml(!0,0,e);let t=0,n=!1,r=e.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?t++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new ml(n,t,r)}var qi=class{constructor(t,n,r){this.segmentGroup=t,this.processChildren=n,this.index=r}};function QR(e,t,n){if(e.isAbsolute)return new qi(t,!0,0);if(!n)return new qi(t,!1,NaN);if(n.parent===null)return new qi(n,!0,0);let r=gl(e.commands[0])?0:1,i=n.segments.length-1+r;return ZR(n,i,e.numberOfDoubleDots)}function ZR(e,t,n){let r=e,i=t,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new S(4005,!1);i=r.segments.length}return new qi(r,!1,i-o)}function JR(e){return ws(e[0])?e[0].outlets:{[B]:e}}function QC(e,t,n){if(e??=new ae([],{}),e.segments.length===0&&e.hasChildren())return gs(e,t,n);let r=XR(e,t,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){let o=new ae(e.segments.slice(0,r.pathIndex),{});return o.children[B]=new ae(e.segments.slice(r.pathIndex),e.children),gs(o,0,i)}else return r.match&&i.length===0?new ae(e.segments,{}):r.match&&!e.hasChildren()?Hh(e,t,n):r.match?gs(e,0,i):Hh(e,t,n)}function gs(e,t,n){if(n.length===0)return new ae(e.segments,{});{let r=JR(n),i={};if(Object.keys(r).some(o=>o!==B)&&e.children[B]&&e.numberOfChildren===1&&e.children[B].segments.length===0){let o=gs(e.children[B],t,n);return new ae(e.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=QC(e.children[o],t,s))}),Object.entries(e.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new ae(e.segments,i)}}function XR(e,t,n){let r=0,i=t,o={match:!1,pathIndex:0,commandIndex:0};for(;i<e.segments.length;){if(r>=n.length)return o;let s=e.segments[i],a=n[r];if(ws(a))break;let c=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!OC(c,l,s))return o;r+=2}else{if(!OC(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Hh(e,t,n){let r=e.segments.slice(0,t),i=0;for(;i<n.length;){let o=n[i];if(ws(o)){let c=eO(o.outlets);return new ae(r,c)}if(i===0&&gl(n[0])){let c=e.segments[t];r.push(new Br(c.path,RC(n[0]))),i++;continue}let s=ws(o)?o.outlets[B]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&gl(a)?(r.push(new Br(s,RC(a))),i+=2):(r.push(new Br(s,{})),i++)}return new ae(r,{})}function eO(e){let t={};return Object.entries(e).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(t[n]=Hh(new ae([],{}),0,r))}),t}function RC(e){let t={};return Object.entries(e).forEach(([n,r])=>t[n]=`${r}`),t}function OC(e,t,n){return e==n.path&&on(t,n.parameters)}var ms="imperative",We=function(e){return e[e.NavigationStart=0]="NavigationStart",e[e.NavigationEnd=1]="NavigationEnd",e[e.NavigationCancel=2]="NavigationCancel",e[e.NavigationError=3]="NavigationError",e[e.RoutesRecognized=4]="RoutesRecognized",e[e.ResolveStart=5]="ResolveStart",e[e.ResolveEnd=6]="ResolveEnd",e[e.GuardsCheckStart=7]="GuardsCheckStart",e[e.GuardsCheckEnd=8]="GuardsCheckEnd",e[e.RouteConfigLoadStart=9]="RouteConfigLoadStart",e[e.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",e[e.ChildActivationStart=11]="ChildActivationStart",e[e.ChildActivationEnd=12]="ChildActivationEnd",e[e.ActivationStart=13]="ActivationStart",e[e.ActivationEnd=14]="ActivationEnd",e[e.Scroll=15]="Scroll",e[e.NavigationSkipped=16]="NavigationSkipped",e}(We||{}),bt=class{constructor(t,n){this.id=t,this.url=n}},Cs=class extends bt{constructor(t,n,r="imperative",i=null){super(t,n),this.type=We.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Hr=class extends bt{constructor(t,n,r){super(t,n),this.urlAfterRedirects=r,this.type=We.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},mt=function(e){return e[e.Redirect=0]="Redirect",e[e.SupersededByNewNavigation=1]="SupersededByNewNavigation",e[e.NoDataFromResolver=2]="NoDataFromResolver",e[e.GuardRejected=3]="GuardRejected",e}(mt||{}),Wh=function(e){return e[e.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",e[e.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",e}(Wh||{}),Ln=class extends bt{constructor(t,n,r,i){super(t,n),this.reason=r,this.code=i,this.type=We.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Wr=class extends bt{constructor(t,n,r,i){super(t,n),this.reason=r,this.code=i,this.type=We.NavigationSkipped}},Is=class extends bt{constructor(t,n,r,i){super(t,n),this.error=r,this.target=i,this.type=We.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},vl=class extends bt{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=We.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},zh=class extends bt{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=We.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},qh=class extends bt{constructor(t,n,r,i,o){super(t,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=We.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Gh=class extends bt{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=We.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Yh=class extends bt{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=We.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Kh=class{constructor(t){this.route=t,this.type=We.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Qh=class{constructor(t){this.route=t,this.type=We.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Zh=class{constructor(t){this.snapshot=t,this.type=We.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Jh=class{constructor(t){this.snapshot=t,this.type=We.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Xh=class{constructor(t){this.snapshot=t,this.type=We.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ep=class{constructor(t){this.snapshot=t,this.type=We.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Es=class{},Qi=class{constructor(t,n){this.url=t,this.navigationBehaviorOptions=n}};function tO(e,t){return e.providers&&!e._injector&&(e._injector=_h(e.providers,t,`Route: ${e.path}`)),e._injector??t}function Ut(e){return e.outlet||B}function nO(e,t){let n=e.filter(r=>Ut(r)===t);return n.push(...e.filter(r=>Ut(r)!==t)),n}function As(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let t=e.parent;t;t=t.parent){let n=t.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var tp=class{get injector(){return As(this.route?.snapshot)??this.rootInjector}set injector(t){}constructor(t){this.rootInjector=t,this.outlet=null,this.route=null,this.children=new bl(this.rootInjector),this.attachRef=null}},bl=(()=>{class e{constructor(n){this.rootInjector=n,this.contexts=new Map}onChildOutletCreated(n,r){let i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new tp(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static{this.\u0275fac=function(r){return new(r||e)(z(wt))}}static{this.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),yl=class{constructor(t){this._root=t}get root(){return this._root.value}parent(t){let n=this.pathFromRoot(t);return n.length>1?n[n.length-2]:null}children(t){let n=np(t,this._root);return n?n.children.map(r=>r.value):[]}firstChild(t){let n=np(t,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(t){let n=rp(t,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==t)}pathFromRoot(t){return rp(t,this._root).map(n=>n.value)}};function np(e,t){if(e===t.value)return t;for(let n of t.children){let r=np(e,n);if(r)return r}return null}function rp(e,t){if(e===t.value)return[t];for(let n of t.children){let r=rp(e,n);if(r.length)return r.unshift(t),r}return[]}var gt=class{constructor(t,n){this.value=t,this.children=n}toString(){return`TreeNode(${this.value})`}};function zi(e){let t={};return e&&e.children.forEach(n=>t[n.value.outlet]=n),t}var _l=class extends yl{constructor(t,n){super(t),this.snapshot=n,hp(this,t)}toString(){return this.snapshot.toString()}};function ZC(e){let t=rO(e),n=new $e([new Br("",{})]),r=new $e({}),i=new $e({}),o=new $e({}),s=new $e(""),a=new cr(n,r,o,s,i,B,e,t.root);return a.snapshot=t.root,new _l(new gt(a,[]),t)}function rO(e){let t={},n={},r={},i="",o=new Gi([],t,r,i,n,B,e,null,{});return new Cl("",new gt(o,[]))}var cr=class{constructor(t,n,r,i,o,s,a,c){this.urlSubject=t,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(H(l=>l[Ms]))??L(void 0),this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(H(t=>Ki(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(H(t=>Ki(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function wl(e,t,n="emptyOnly"){let r,{routeConfig:i}=e;return t!==null&&(n==="always"||i?.path===""||!t.component&&!t.routeConfig?.loadComponent)?r={params:C(C({},t.params),e.params),data:C(C({},t.data),e.data),resolve:C(C(C(C({},e.data),t.data),i?.data),e._resolvedData)}:r={params:C({},e.params),data:C({},e.data),resolve:C(C({},e.data),e._resolvedData??{})},i&&XC(i)&&(r.resolve[Ms]=i.title),r}var Gi=class{get title(){return this.data?.[Ms]}constructor(t,n,r,i,o,s,a,c,l){this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Ki(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Ki(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${n}')`}},Cl=class extends yl{constructor(t,n){super(n),this.url=t,hp(this,n)}toString(){return JC(this._root)}};function hp(e,t){t.value._routerState=e,t.children.forEach(n=>hp(e,n))}function JC(e){let t=e.children.length>0?` { ${e.children.map(JC).join(", ")} } `:"";return`${e.value}${t}`}function Lh(e){if(e.snapshot){let t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,on(t.queryParams,n.queryParams)||e.queryParamsSubject.next(n.queryParams),t.fragment!==n.fragment&&e.fragmentSubject.next(n.fragment),on(t.params,n.params)||e.paramsSubject.next(n.params),NR(t.url,n.url)||e.urlSubject.next(n.url),on(t.data,n.data)||e.dataSubject.next(n.data)}else e.snapshot=e._futureSnapshot,e.dataSubject.next(e._futureSnapshot.data)}function ip(e,t){let n=on(e.params,t.params)&&PR(e.url,t.url),r=!e.parent!=!t.parent;return n&&!r&&(!e.parent||ip(e.parent,t.parent))}function XC(e){return typeof e.title=="string"||e.title===null}var pp=(()=>{class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=B,this.activateEvents=new we,this.deactivateEvents=new we,this.attachEvents=new we,this.detachEvents=new we,this.parentContexts=I(bl),this.location=I($i),this.changeDetector=I(Pn),this.inputBinder=I(gp,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new S(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new S(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new S(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new S(4013,!1);this._activatedRoute=n;let i=this.location,s=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new op(n,a,i.injector);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275dir=at({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Mn]})}}return e})(),op=class e{__ngOutletInjector(t){return new e(this.route,this.childContexts,t)}constructor(t,n,r){this.route=t,this.childContexts=n,this.parent=r}get(t,n){return t===cr?this.route:t===bl?this.childContexts:this.parent.get(t,n)}},gp=new P("");function iO(e,t,n){let r=bs(e,t._root,n?n._root:void 0);return new _l(r,t)}function bs(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=t.value;let i=oO(e,t,n);return new gt(r,i)}else{if(e.shouldAttach(t.value)){let o=e.retrieve(t.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=t.value,s.children=t.children.map(a=>bs(e,a)),s}}let r=sO(t.value),i=t.children.map(o=>bs(e,o));return new gt(r,i)}}function oO(e,t,n){return t.children.map(r=>{for(let i of n.children)if(e.shouldReuseRoute(r.value,i.value.snapshot))return bs(e,r,i);return bs(e,r)})}function sO(e){return new cr(new $e(e.url),new $e(e.params),new $e(e.queryParams),new $e(e.fragment),new $e(e.data),e.outlet,e.component,e)}var Ds=class{constructor(t,n){this.redirectTo=t,this.navigationBehaviorOptions=n}},eI="ngNavigationCancelingError";function Il(e,t){let{redirectTo:n,navigationBehaviorOptions:r}=_s(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,i=tI(!1,mt.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function tI(e,t){let n=new Error(`NavigationCancelingError: ${e||""}`);return n[eI]=!0,n.cancellationCode=t,n}function aO(e){return nI(e)&&_s(e.url)}function nI(e){return!!e&&e[eI]}var cO=(e,t,n,r)=>H(i=>(new sp(t,i.targetRouterState,i.currentRouterState,n,r).activate(e),i)),sp=class{constructor(t,n,r,i,o){this.routeReuseStrategy=t,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(t){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,t),Lh(this.futureState.root),this.activateChildRoutes(n,r,t)}deactivateChildRoutes(t,n,r){let i=zi(n);t.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(t,n,r){let i=t.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(t,n,s.children)}else this.deactivateChildRoutes(t,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(t,n){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,n):this.deactivateRouteAndOutlet(t,n)}detachAndStoreRouteSubtree(t,n){let r=n.getContext(t.value.outlet),i=r&&t.value.component?r.children:n,o=zi(t);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:s,route:t,contexts:a})}}deactivateRouteAndOutlet(t,n){let r=n.getContext(t.value.outlet),i=r&&t.value.component?r.children:n,o=zi(t);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(t,n,r){let i=zi(n);t.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new ep(o.value.snapshot))}),t.children.length&&this.forwardEvent(new Jh(t.value.snapshot))}activateRoutes(t,n,r){let i=t.value,o=n?n.value:null;if(Lh(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(t,n,s.children)}else this.activateChildRoutes(t,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Lh(a.route.value),this.activateChildRoutes(t,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(t,null,s.children)}else this.activateChildRoutes(t,null,r)}},El=class{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},Yi=class{constructor(t,n){this.component=t,this.route=n}};function lO(e,t,n){let r=e._root,i=t?t._root:null;return hs(r,i,n,[r.value])}function uO(e){let t=e.routeConfig?e.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:e,guards:t}}function Ji(e,t){let n=Symbol(),r=t.get(e,n);return r===n?typeof e=="function"&&!Vy(e)?e:t.get(e):r}function hs(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=zi(t);return e.children.forEach(s=>{dO(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>vs(a,n.getContext(s),i)),i}function dO(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=e.value,s=t?t.value:null,a=n?n.getContext(e.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=fO(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new El(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?hs(e,t,a?a.children:null,r,i):hs(e,t,n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Yi(a.outlet.component,s))}else s&&vs(t,a,i),i.canActivateChecks.push(new El(r)),o.component?hs(e,null,a?a.children:null,r,i):hs(e,null,n,r,i);return i}function fO(e,t,n){if(typeof n=="function")return n(e,t);switch(n){case"pathParamsChange":return!$r(e.url,t.url);case"pathParamsOrQueryParamsChange":return!$r(e.url,t.url)||!on(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ip(e,t)||!on(e.queryParams,t.queryParams);case"paramsChange":default:return!ip(e,t)}}function vs(e,t,n){let r=zi(e),i=e.value;Object.entries(r).forEach(([o,s])=>{i.component?t?vs(s,t.children.getContext(o),n):vs(s,null,n):vs(s,t,n)}),i.component?t&&t.outlet&&t.outlet.isActivated?n.canDeactivateChecks.push(new Yi(t.outlet.component,i)):n.canDeactivateChecks.push(new Yi(null,i)):n.canDeactivateChecks.push(new Yi(null,i))}function Ns(e){return typeof e=="function"}function hO(e){return typeof e=="boolean"}function pO(e){return e&&Ns(e.canLoad)}function gO(e){return e&&Ns(e.canActivate)}function mO(e){return e&&Ns(e.canActivateChild)}function vO(e){return e&&Ns(e.canDeactivate)}function yO(e){return e&&Ns(e.canMatch)}function rI(e){return e instanceof mn||e?.name==="EmptyError"}var dl=Symbol("INITIAL_VALUE");function Zi(){return ht(e=>rc(e.map(t=>t.pipe(vn(1),fd(dl)))).pipe(H(t=>{for(let n of t)if(n!==!0){if(n===dl)return dl;if(n===!1||_O(n))return n}return!0}),Ot(t=>t!==dl),vn(1)))}function _O(e){return _s(e)||e instanceof Ds}function wO(e,t){return Re(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?L(Q(C({},n),{guardsResult:!0})):CO(s,r,i,e).pipe(Re(a=>a&&hO(a)?IO(r,o,e,t):L(a)),H(a=>Q(C({},n),{guardsResult:a})))})}function CO(e,t,n,r){return ne(e).pipe(Re(i=>TO(i.component,i.route,n,t,r)),Yt(i=>i!==!0,!0))}function IO(e,t,n,r){return ne(t).pipe(vi(i=>mi(bO(i.route.parent,r),EO(i.route,r),SO(e,i.path,n),DO(e,i.route,n))),Yt(i=>i!==!0,!0))}function EO(e,t){return e!==null&&t&&t(new Xh(e)),L(!0)}function bO(e,t){return e!==null&&t&&t(new Zh(e)),L(!0)}function DO(e,t,n){let r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||r.length===0)return L(!0);let i=r.map(o=>ic(()=>{let s=As(t)??n,a=Ji(o,s),c=gO(a)?a.canActivate(t,e):Dn(s,()=>a(t,e));return lr(c).pipe(Yt())}));return L(i).pipe(Zi())}function SO(e,t,n){let r=t[t.length-1],o=t.slice(0,t.length-1).reverse().map(s=>uO(s)).filter(s=>s!==null).map(s=>ic(()=>{let a=s.guards.map(c=>{let l=As(s.node)??n,u=Ji(c,l),d=mO(u)?u.canActivateChild(r,e):Dn(l,()=>u(r,e));return lr(d).pipe(Yt())});return L(a).pipe(Zi())}));return L(o).pipe(Zi())}function TO(e,t,n,r,i){let o=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!o||o.length===0)return L(!0);let s=o.map(a=>{let c=As(t)??i,l=Ji(a,c),u=vO(l)?l.canDeactivate(e,t,n,r):Dn(c,()=>l(e,t,n,r));return lr(u).pipe(Yt())});return L(s).pipe(Zi())}function MO(e,t,n,r){let i=t.canLoad;if(i===void 0||i.length===0)return L(!0);let o=i.map(s=>{let a=Ji(s,e),c=pO(a)?a.canLoad(t,n):Dn(e,()=>a(t,n));return lr(c)});return L(o).pipe(Zi(),iI(r))}function iI(e){return td(Oe(t=>{if(typeof t!="boolean")throw Il(e,t)}),H(t=>t===!0))}function AO(e,t,n,r){let i=t.canMatch;if(!i||i.length===0)return L(!0);let o=i.map(s=>{let a=Ji(s,e),c=yO(a)?a.canMatch(t,n):Dn(e,()=>a(t,n));return lr(c)});return L(o).pipe(Zi(),iI(r))}var Ss=class{constructor(t){this.segmentGroup=t||null}},Ts=class extends Error{constructor(t){super(),this.urlTree=t}};function Wi(e){return gi(new Ss(e))}function NO(e){return gi(new S(4e3,!1))}function xO(e){return gi(tI(!1,mt.GuardRejected))}var ap=class{constructor(t,n){this.urlSerializer=t,this.urlTree=n}lineralizeSegments(t,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return L(r);if(i.numberOfChildren>1||!i.children[B])return NO(`${t.redirectTo}`);i=i.children[B]}}applyRedirectCommands(t,n,r,i,o){if(typeof n!="string"){let a=n,{queryParams:c,fragment:l,routeConfig:u,url:d,outlet:f,params:h,data:p,title:y}=i,E=Dn(o,()=>a({params:h,data:p,queryParams:c,fragment:l,routeConfig:u,url:d,outlet:f,title:y}));if(E instanceof Vn)throw new Ts(E);n=E}let s=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),t,r);if(n[0]==="/")throw new Ts(s);return s}applyRedirectCreateUrlTree(t,n,r,i){let o=this.createSegmentGroup(t,n.root,r,i);return new Vn(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(t,n){let r={};return Object.entries(t).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(t,n,r,i){let o=this.createSegments(t,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(t,c,r,i)}),new ae(o,s)}createSegments(t,n,r,i){return n.map(o=>o.path[0]===":"?this.findPosParam(t,o,i):this.findOrReturn(o,r))}findPosParam(t,n,r){let i=r[n.path.substring(1)];if(!i)throw new S(4001,!1);return i}findOrReturn(t,n){let r=0;for(let i of n){if(i.path===t.path)return n.splice(r),i;r++}return t}},cp={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function RO(e,t,n,r,i){let o=oI(e,t,n);return o.matched?(r=tO(t,r),AO(r,t,n,i).pipe(H(s=>s===!0?o:C({},cp)))):L(o)}function oI(e,t,n){if(t.path==="**")return OO(n);if(t.path==="")return t.pathMatch==="full"&&(e.hasChildren()||n.length>0)?C({},cp):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(t.matcher||AR)(n,e,t);if(!i)return C({},cp);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?C(C({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function OO(e){return{matched:!0,parameters:e.length>0?VC(e).parameters:{},consumedSegments:e,remainingSegments:[],positionalParamSegments:{}}}function PC(e,t,n,r){return n.length>0&&FO(e,n,r)?{segmentGroup:new ae(t,kO(r,new ae(n,e.children))),slicedSegments:[]}:n.length===0&&LO(e,n,r)?{segmentGroup:new ae(e.segments,PO(e,n,r,e.children)),slicedSegments:n}:{segmentGroup:new ae(e.segments,e.children),slicedSegments:n}}function PO(e,t,n,r){let i={};for(let o of n)if(Dl(e,t,o)&&!r[Ut(o)]){let s=new ae([],{});i[Ut(o)]=s}return C(C({},r),i)}function kO(e,t){let n={};n[B]=t;for(let r of e)if(r.path===""&&Ut(r)!==B){let i=new ae([],{});n[Ut(r)]=i}return n}function FO(e,t,n){return n.some(r=>Dl(e,t,r)&&Ut(r)!==B)}function LO(e,t,n){return n.some(r=>Dl(e,t,r))}function Dl(e,t,n){return(e.hasChildren()||t.length>0)&&n.pathMatch==="full"?!1:n.path===""}function VO(e,t,n){return t.length===0&&!e.children[n]}var lp=class{};function jO(e,t,n,r,i,o,s="emptyOnly"){return new up(e,t,n,r,i,s,o).recognize()}var UO=31,up=class{constructor(t,n,r,i,o,s,a){this.injector=t,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new ap(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(t){return new S(4002,`'${t.segmentGroup}'`)}recognize(){let t=PC(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(H(({children:n,rootSnapshot:r})=>{let i=new gt(r,n),o=new Cl("",i),s=YR(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(t){let n=new Gi([],Object.freeze({}),Object.freeze(C({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),B,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,t,B,n).pipe(H(r=>({children:r,rootSnapshot:n})),it(r=>{if(r instanceof Ts)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Ss?this.noMatchError(r):r}))}processSegmentGroup(t,n,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(t,n,r,o):this.processSegment(t,n,r,r.segments,i,!0,o).pipe(H(s=>s instanceof gt?[s]:[]))}processChildren(t,n,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return ne(o).pipe(vi(s=>{let a=r.children[s],c=nO(n,s);return this.processSegmentGroup(t,c,a,s,i)}),dd((s,a)=>(s.push(...a),s)),Yn(null),ud(),Re(s=>{if(s===null)return Wi(r);let a=sI(s);return BO(a),L(a)}))}processSegment(t,n,r,i,o,s,a){return ne(n).pipe(vi(c=>this.processSegmentAgainstRoute(c._injector??t,n,c,r,i,o,s,a).pipe(it(l=>{if(l instanceof Ss)return L(null);throw l}))),Yt(c=>!!c),it(c=>{if(rI(c))return VO(r,i,o)?L(new lp):Wi(r);throw c}))}processSegmentAgainstRoute(t,n,r,i,o,s,a,c){return Ut(r)!==s&&(s===B||!Dl(i,o,r))?Wi(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(t,i,r,o,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(t,i,n,r,o,s,c):Wi(i)}expandSegmentAgainstRouteUsingRedirect(t,n,r,i,o,s,a){let{matched:c,parameters:l,consumedSegments:u,positionalParamSegments:d,remainingSegments:f}=oI(n,i,o);if(!c)return Wi(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>UO&&(this.allowRedirects=!1));let h=new Gi(o,l,Object.freeze(C({},this.urlTree.queryParams)),this.urlTree.fragment,kC(i),Ut(i),i.component??i._loadedComponent??null,i,FC(i)),p=wl(h,a,this.paramsInheritanceStrategy);h.params=Object.freeze(p.params),h.data=Object.freeze(p.data);let y=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,d,h,t);return this.applyRedirects.lineralizeSegments(i,y).pipe(Re(E=>this.processSegment(t,r,n,E.concat(f),s,!1,a)))}matchSegmentAgainstRoute(t,n,r,i,o,s){let a=RO(n,r,i,t,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(ht(c=>c.matched?(t=r._injector??t,this.getChildConfig(t,r,i).pipe(ht(({routes:l})=>{let u=r._loadedInjector??t,{parameters:d,consumedSegments:f,remainingSegments:h}=c,p=new Gi(f,d,Object.freeze(C({},this.urlTree.queryParams)),this.urlTree.fragment,kC(r),Ut(r),r.component??r._loadedComponent??null,r,FC(r)),y=wl(p,s,this.paramsInheritanceStrategy);p.params=Object.freeze(y.params),p.data=Object.freeze(y.data);let{segmentGroup:E,slicedSegments:M}=PC(n,f,h,l);if(M.length===0&&E.hasChildren())return this.processChildren(u,l,E,p).pipe(H(me=>new gt(p,me)));if(l.length===0&&M.length===0)return L(new gt(p,[]));let se=Ut(r)===o;return this.processSegment(u,l,E,M,se?B:o,!0,p).pipe(H(me=>new gt(p,me instanceof gt?[me]:[])))}))):Wi(n)))}getChildConfig(t,n,r){return n.children?L({routes:n.children,injector:t}):n.loadChildren?n._loadedRoutes!==void 0?L({routes:n._loadedRoutes,injector:n._loadedInjector}):MO(t,n,r,this.urlSerializer).pipe(Re(i=>i?this.configLoader.loadChildren(t,n).pipe(Oe(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):xO(n))):L({routes:[],injector:t})}};function BO(e){e.sort((t,n)=>t.value.outlet===B?-1:n.value.outlet===B?1:t.value.outlet.localeCompare(n.value.outlet))}function $O(e){let t=e.value.routeConfig;return t&&t.path===""}function sI(e){let t=[],n=new Set;for(let r of e){if(!$O(r)){t.push(r);continue}let i=t.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):t.push(r)}for(let r of n){let i=sI(r.children);t.push(new gt(r.value,i))}return t.filter(r=>!n.has(r))}function kC(e){return e.data||{}}function FC(e){return e.resolve||{}}function HO(e,t,n,r,i,o){return Re(s=>jO(e,t,n,r,s.extractedUrl,i,o).pipe(H(({state:a,tree:c})=>Q(C({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function WO(e,t){return Re(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return L(n);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let l of aI(c))s.add(l);let a=0;return ne(s).pipe(vi(c=>o.has(c)?zO(c,r,e,t):(c.data=wl(c,c.parent,e).resolve,L(void 0))),Oe(()=>a++),yi(1),Re(c=>a===s.size?L(n):ft))})}function aI(e){let t=e.children.map(n=>aI(n)).flat();return[e,...t]}function zO(e,t,n,r){let i=e.routeConfig,o=e._resolve;return i?.title!==void 0&&!XC(i)&&(o[Ms]=i.title),qO(o,e,t,r).pipe(H(s=>(e._resolvedData=s,e.data=wl(e,e.parent,n).resolve,null)))}function qO(e,t,n,r){let i=Uh(e);if(i.length===0)return L({});let o={};return ne(i).pipe(Re(s=>GO(e[s],t,n,r).pipe(Yt(),Oe(a=>{if(a instanceof Ds)throw Il(new ys,a);o[s]=a}))),yi(1),ld(o),it(s=>rI(s)?ft:gi(s)))}function GO(e,t,n,r){let i=As(t)??r,o=Ji(e,i),s=o.resolve?o.resolve(t,n):Dn(i,()=>o(t,n));return lr(s)}function Vh(e){return ht(t=>{let n=e(t);return n?ne(n).pipe(H(()=>t)):L(t)})}var cI=(()=>{class e{buildTitle(n){let r,i=n.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===B);return r}getResolvedTitleForRoute(n){return n.data[Ms]}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=T({token:e,factory:()=>I(YO),providedIn:"root"})}}return e})(),YO=(()=>{class e extends cI{constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||e)(z(MC))}}static{this.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),mp=new P("",{providedIn:"root",factory:()=>({})}),KO=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275cmp=A({type:e,selectors:[["ng-component"]],standalone:!0,features:[x],decls:1,vars:0,template:function(r,i){r&1&&k(0,"router-outlet")},dependencies:[pp],encapsulation:2})}}return e})();function vp(e){let t=e.children&&e.children.map(vp),n=t?Q(C({},e),{children:t}):C({},e);return!n.component&&!n.loadComponent&&(t||n.loadChildren)&&n.outlet&&n.outlet!==B&&(n.component=KO),n}var yp=new P(""),QO=(()=>{class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=I(Ih)}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return L(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);let r=lr(n.loadComponent()).pipe(H(lI),Oe(o=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=o}),Fo(()=>{this.componentLoaders.delete(n)})),i=new pi(r,()=>new Be).pipe(hi());return this.componentLoaders.set(n,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return L({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=ZO(r,this.compiler,n,this.onLoadEndListener).pipe(Fo(()=>{this.childrenLoaders.delete(r)})),s=new pi(o,()=>new Be).pipe(hi());return this.childrenLoaders.set(r,s),s}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function ZO(e,t,n,r){return lr(e.loadChildren()).pipe(H(lI),Re(i=>i instanceof Zo||Array.isArray(i)?L(i):ne(t.compileModuleAsync(i))),H(i=>{r&&r(e);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(n).injector,s=o.get(yp,[],{optional:!0,self:!0}).flat()),{routes:s.map(vp),injector:o}}))}function JO(e){return e&&typeof e=="object"&&"default"in e}function lI(e){return JO(e)?e.default:e}var _p=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=T({token:e,factory:()=>I(XO),providedIn:"root"})}}return e})(),XO=(()=>{class e{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),eP=new P("");var tP=new P(""),nP=(()=>{class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Be,this.transitionAbortSubject=new Be,this.configLoader=I(QO),this.environmentInjector=I(wt),this.urlSerializer=I(fp),this.rootContexts=I(bl),this.location=I(cs),this.inputBindingEnabled=I(gp,{optional:!0})!==null,this.titleStrategy=I(cI),this.options=I(mp,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=I(_p),this.createViewTransition=I(eP,{optional:!0}),this.navigationErrorHandler=I(tP,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>L(void 0),this.rootComponentType=null;let n=i=>this.events.next(new Kh(i)),r=i=>this.events.next(new Qh(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;this.transitions?.next(Q(C(C({},this.transitions.value),n),{id:r}))}setupNavigations(n,r,i){return this.transitions=new $e({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:ms,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Ot(o=>o.id!==0),H(o=>Q(C({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),ht(o=>{let s=!1,a=!1;return L(o).pipe(ht(c=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",mt.SupersededByNewNavigation),ft;this.currentTransition=o,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,targetBrowserUrl:typeof c.extras.browserUrl=="string"?this.urlSerializer.parse(c.extras.browserUrl):c.extras.browserUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?Q(C({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),u=c.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!l&&u!=="reload"){let d="";return this.events.next(new Wr(c.id,this.urlSerializer.serialize(c.rawUrl),d,Wh.IgnoredSameUrlNavigation)),c.resolve(!1),ft}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return L(c).pipe(ht(d=>{let f=this.transitions?.getValue();return this.events.next(new Cs(d.id,this.urlSerializer.serialize(d.extractedUrl),d.source,d.restoredState)),f!==this.transitions?.getValue()?ft:Promise.resolve(d)}),HO(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),Oe(d=>{o.targetSnapshot=d.targetSnapshot,o.urlAfterRedirects=d.urlAfterRedirects,this.currentNavigation=Q(C({},this.currentNavigation),{finalUrl:d.urlAfterRedirects});let f=new vl(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:d,extractedUrl:f,source:h,restoredState:p,extras:y}=c,E=new Cs(d,this.urlSerializer.serialize(f),h,p);this.events.next(E);let M=ZC(this.rootComponentType).snapshot;return this.currentTransition=o=Q(C({},c),{targetSnapshot:M,urlAfterRedirects:f,extras:Q(C({},y),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=f,L(o)}else{let d="";return this.events.next(new Wr(c.id,this.urlSerializer.serialize(c.extractedUrl),d,Wh.IgnoredByUrlHandlingStrategy)),c.resolve(!1),ft}}),Oe(c=>{let l=new zh(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),H(c=>(this.currentTransition=o=Q(C({},c),{guards:lO(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),o)),wO(this.environmentInjector,c=>this.events.next(c)),Oe(c=>{if(o.guardsResult=c.guardsResult,c.guardsResult&&typeof c.guardsResult!="boolean")throw Il(this.urlSerializer,c.guardsResult);let l=new qh(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(l)}),Ot(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",mt.GuardRejected),!1)),Vh(c=>{if(c.guards.canActivateChecks.length)return L(c).pipe(Oe(l=>{let u=new Gh(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}),ht(l=>{let u=!1;return L(l).pipe(WO(this.paramsInheritanceStrategy,this.environmentInjector),Oe({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(l,"",mt.NoDataFromResolver)}}))}),Oe(l=>{let u=new Yh(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}))}),Vh(c=>{let l=u=>{let d=[];u.routeConfig?.loadComponent&&!u.routeConfig._loadedComponent&&d.push(this.configLoader.loadComponent(u.routeConfig).pipe(Oe(f=>{u.component=f}),H(()=>{})));for(let f of u.children)d.push(...l(f));return d};return rc(l(c.targetSnapshot.root)).pipe(Yn(null),vn(1))}),Vh(()=>this.afterPreactivation()),ht(()=>{let{currentSnapshot:c,targetSnapshot:l}=o,u=this.createViewTransition?.(this.environmentInjector,c.root,l.root);return u?ne(u).pipe(H(()=>o)):L(o)}),H(c=>{let l=iO(n.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=o=Q(C({},c),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,o}),Oe(()=>{this.events.next(new Es)}),cO(this.rootContexts,n.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),vn(1),Oe({next:c=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Hr(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{s=!0}}),hd(this.transitionAbortSubject.pipe(Oe(c=>{throw c}))),Fo(()=>{!s&&!a&&this.cancelNavigationTransition(o,"",mt.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),it(c=>{if(a=!0,nI(c))this.events.next(new Ln(o.id,this.urlSerializer.serialize(o.extractedUrl),c.message,c.cancellationCode)),aO(c)?this.events.next(new Qi(c.url,c.navigationBehaviorOptions)):o.resolve(!1);else{let l=new Is(o.id,this.urlSerializer.serialize(o.extractedUrl),c,o.targetSnapshot??void 0);try{let u=Dn(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(u instanceof Ds){let{message:d,cancellationCode:f}=Il(this.urlSerializer,u);this.events.next(new Ln(o.id,this.urlSerializer.serialize(o.extractedUrl),d,f)),this.events.next(new Qi(u.redirectTo,u.navigationBehaviorOptions))}else{this.events.next(l);let d=n.errorHandler(c);o.resolve(!!d)}}catch(u){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(u)}}return ft}))}))}cancelNavigationTransition(n,r,i){let o=new Ln(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(o),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return n.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function rP(e){return e!==ms}var iP=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=T({token:e,factory:()=>I(oP),providedIn:"root"})}}return e})(),dp=class{shouldDetach(t){return!1}store(t,n){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,n){return t.routeConfig===n.routeConfig}},oP=(()=>{class e extends dp{static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=Li(e)))(i||e)}})()}static{this.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),uI=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=T({token:e,factory:()=>I(sP),providedIn:"root"})}}return e})(),sP=(()=>{class e extends uI{constructor(){super(...arguments),this.location=I(cs),this.urlSerializer=I(fp),this.options=I(mp,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=I(_p),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Vn,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=ZC(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&n(r.url,r.state)})}handleRouterEvent(n,r){if(n instanceof Cs)this.stateMemento=this.createStateMemento();else if(n instanceof Wr)this.rawUrlTree=r.initialUrl;else if(n instanceof vl){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else n instanceof Es?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):n instanceof Ln&&(n.code===mt.GuardRejected||n.code===mt.NoDataFromResolver)?this.restoreHistory(r):n instanceof Is?this.restoreHistory(r,!0):n instanceof Hr&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,r){let i=n instanceof Vn?this.urlSerializer.serialize(n):n;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let o=this.browserPageId,s=C(C({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(i,"",s)}else{let o=C(C({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",o)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.currentUrlTree===n.finalUrl&&o===0&&(this.resetState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=Li(e)))(i||e)}})()}static{this.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),ps=function(e){return e[e.COMPLETE=0]="COMPLETE",e[e.FAILED=1]="FAILED",e[e.REDIRECTING=2]="REDIRECTING",e}(ps||{});function aP(e,t){e.events.pipe(Ot(n=>n instanceof Hr||n instanceof Ln||n instanceof Is||n instanceof Wr),H(n=>n instanceof Hr||n instanceof Wr?ps.COMPLETE:(n instanceof Ln?n.code===mt.Redirect||n.code===mt.SupersededByNewNavigation:!1)?ps.REDIRECTING:ps.FAILED),Ot(n=>n!==ps.REDIRECTING),vn(1)).subscribe(()=>{t()})}function cP(e){throw e}var lP={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},uP={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Xi=(()=>{class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=I(il),this.stateManager=I(uI),this.options=I(mp,{optional:!0})||{},this.pendingTasks=I(Vi),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=I(nP),this.urlSerializer=I(fp),this.location=I(cs),this.urlHandlingStrategy=I(_p),this._events=new Be,this.errorHandler=this.options.errorHandler||cP,this.navigated=!1,this.routeReuseStrategy=I(iP),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=I(yp,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!I(gp,{optional:!0}),this.eventsSubscription=new Ee,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Ln&&r.code!==mt.Redirect&&r.code!==mt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Hr)this.navigated=!0;else if(r instanceof Qi){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=C({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||rP(i.source)},s);this.scheduleNavigation(a,ms,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}fP(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),ms,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(n,"popstate",r)},0)})}navigateToSyncWithBrowser(n,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let c=C({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let a=this.parseUrl(n);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(vp),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:s,u=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":u=C(C({},this.currentUrlTree.queryParams),o);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=o||null}u!==null&&(u=this.removeEmptyProps(u));let d;try{let f=i?i.snapshot:this.routerState.snapshot.root;d=GC(f)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),d=this.currentUrlTree.root}return YC(d,n,u,l??null)}navigateByUrl(n,r={skipLocationChange:!1}){let i=_s(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,ms,null,r)}navigate(n,r={skipLocationChange:!1}){return dP(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.urlSerializer.parse("/")}}isActive(n,r){let i;if(r===!0?i=C({},lP):r===!1?i=C({},uP):i=r,_s(n))return NC(this.currentUrlTree,n,i);let o=this.parseUrl(n);return NC(this.currentUrlTree,o,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(n,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,l;s?(a=s.resolve,c=s.reject,l=s.promise):l=new Promise((d,f)=>{a=d,c=f});let u=this.pendingTasks.add();return aP(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:o,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(d=>Promise.reject(d))}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function dP(e){for(let t=0;t<e.length;t++)if(e[t]==null)throw new S(4008,!1)}function fP(e){return!(e instanceof Es)&&!(e instanceof Qi)}var hP=new P("");function dI(e,...t){return Uf([{provide:yp,multi:!0,useValue:e},[],{provide:cr,useFactory:pP,deps:[Xi]},{provide:Ch,multi:!0,useFactory:gP},t.map(n=>n.\u0275providers)])}function pP(e){return e.routerState.root}function gP(){let e=I(er);return t=>{let n=e.get(jr);if(t!==n.components[0])return;let r=e.get(Xi),i=e.get(mP);e.get(vP)===1&&r.initialNavigation(),e.get(yP,null,W.Optional)?.setUpPreloading(),e.get(hP,null,W.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var mP=new P("",{factory:()=>new Be}),vP=new P("",{providedIn:"root",factory:()=>1});var yP=new P("");var hI=(()=>{class e{constructor(){}title="Tablefi";static \u0275fac=function(r){return new(r||e)};static \u0275cmp=A({type:e,selectors:[["app-root"]],standalone:!0,features:[x],decls:1,vars:0,template:function(r,i){r&1&&k(0,"router-outlet")},dependencies:[pp,Dh],styles:["router-outlet[_ngcontent-%COMP%]{height:100%;width:100%}"]})}return e})();var II=(()=>{class e{constructor(n,r){this._renderer=n,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static{this.\u0275fac=function(r){return new(r||e)(D(ir),D(en))}}static{this.\u0275dir=at({type:e})}}return e})(),_P=(()=>{class e extends II{static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=Li(e)))(i||e)}})()}static{this.\u0275dir=at({type:e,features:[Rn]})}}return e})(),EI=new P("");var wP={provide:EI,useExisting:Lr(()=>Dt),multi:!0};function CP(){let e=Fn()?Fn().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}var IP=new P(""),Dt=(()=>{class e extends II{constructor(n,r,i){super(n,r),this._compositionMode=i,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!CP())}writeValue(n){let r=n??"";this.setProperty("value",r)}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static{this.\u0275fac=function(r){return new(r||e)(D(ir),D(en),D(IP,8))}}static{this.\u0275dir=at({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&b("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[os([wP]),Rn]})}}return e})();function EP(e){return e==null||(typeof e=="string"||Array.isArray(e))&&e.length===0}var Cp=new P(""),bI=new P("");function bP(e){return EP(e.value)?{required:!0}:null}function pI(e){return null}function DI(e){return e!=null}function SI(e){return Vr(e)?ne(e):e}function TI(e){let t={};return e.forEach(n=>{t=n!=null?C(C({},t),n):t}),Object.keys(t).length===0?null:t}function MI(e,t){return t.map(n=>n(e))}function DP(e){return!e.validate}function AI(e){return e.map(t=>DP(t)?t:n=>t.validate(n))}function SP(e){if(!e)return null;let t=e.filter(DI);return t.length==0?null:function(n){return TI(MI(n,t))}}function Ip(e){return e!=null?SP(AI(e)):null}function TP(e){if(!e)return null;let t=e.filter(DI);return t.length==0?null:function(n){let r=MI(n,t).map(SI);return cd(r).pipe(H(TI))}}function Ep(e){return e!=null?TP(AI(e)):null}function gI(e,t){return e===null?[t]:Array.isArray(e)?[...e,t]:[e,t]}function MP(e){return e._rawValidators}function AP(e){return e._rawAsyncValidators}function wp(e){return e?Array.isArray(e)?e:[e]:[]}function Tl(e,t){return Array.isArray(e)?e.includes(t):e===t}function mI(e,t){let n=wp(t);return wp(e).forEach(i=>{Tl(n,i)||n.push(i)}),n}function vI(e,t){return wp(t).filter(n=>!Tl(e,n))}var Ml=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=Ip(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=Ep(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,n){return this.control?this.control.hasError(t,n):!1}getError(t,n){return this.control?this.control.getError(t,n):null}},no=class extends Ml{get formDirective(){return null}get path(){return null}},Fs=class extends Ml{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Al=class{constructor(t){this._cd=t}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},NP={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},l8=Q(C({},NP),{"[class.ng-submitted]":"isSubmitted"}),sn=(()=>{class e extends Al{constructor(n){super(n)}static{this.\u0275fac=function(r){return new(r||e)(D(Fs,2))}}static{this.\u0275dir=at({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&nl("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[Rn]})}}return e})(),an=(()=>{class e extends Al{constructor(n){super(n)}static{this.\u0275fac=function(r){return new(r||e)(D(no,10))}}static{this.\u0275dir=at({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&nl("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[Rn]})}}return e})();var xs="VALID",Sl="INVALID",eo="PENDING",Rs="DISABLED",ro=class{},Nl=class extends ro{constructor(t,n){super(),this.value=t,this.source=n}},Ps=class extends ro{constructor(t,n){super(),this.pristine=t,this.source=n}},ks=class extends ro{constructor(t,n){super(),this.touched=t,this.source=n}},to=class extends ro{constructor(t,n){super(),this.status=t,this.source=n}};function NI(e){return(Ol(e)?e.validators:e)||null}function xP(e){return Array.isArray(e)?Ip(e):e||null}function xI(e,t){return(Ol(t)?t.asyncValidators:e)||null}function RP(e){return Array.isArray(e)?Ep(e):e||null}function Ol(e){return e!=null&&!Array.isArray(e)&&typeof e=="object"}function OP(e,t,n){let r=e.controls;if(!(t?Object.keys(r):r).length)throw new S(1e3,"");if(!r[n])throw new S(1001,"")}function PP(e,t,n){e._forEachChild((r,i)=>{if(n[i]===void 0)throw new S(1002,"")})}var xl=class{constructor(t,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=as(()=>this.statusReactive()),this.statusReactive=ns(void 0),this._pristine=as(()=>this.pristineReactive()),this.pristineReactive=ns(!0),this._touched=as(()=>this.touchedReactive()),this.touchedReactive=ns(!1),this._events=new Be,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get status(){return kn(this.statusReactive)}set status(t){kn(()=>this.statusReactive.set(t))}get valid(){return this.status===xs}get invalid(){return this.status===Sl}get pending(){return this.status==eo}get disabled(){return this.status===Rs}get enabled(){return this.status!==Rs}get pristine(){return kn(this.pristineReactive)}set pristine(t){kn(()=>this.pristineReactive.set(t))}get dirty(){return!this.pristine}get touched(){return kn(this.touchedReactive)}set touched(t){kn(()=>this.touchedReactive.set(t))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(mI(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(mI(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(vI(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(vI(t,this._rawAsyncValidators))}hasValidator(t){return Tl(this._rawValidators,t)}hasAsyncValidator(t){return Tl(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){let n=this.touched===!1;this.touched=!0;let r=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsTouched(Q(C({},t),{sourceControl:r})),n&&t.emitEvent!==!1&&this._events.next(new ks(!0,r))}markAllAsTouched(t={}){this.markAsTouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(t))}markAsUntouched(t={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=t.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:r})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,r),n&&t.emitEvent!==!1&&this._events.next(new ks(!1,r))}markAsDirty(t={}){let n=this.pristine===!0;this.pristine=!1;let r=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsDirty(Q(C({},t),{sourceControl:r})),n&&t.emitEvent!==!1&&this._events.next(new Ps(!1,r))}markAsPristine(t={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=t.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:t.emitEvent})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t,r),n&&t.emitEvent!==!1&&this._events.next(new Ps(!0,r))}markAsPending(t={}){this.status=eo;let n=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new to(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.markAsPending(Q(C({},t),{sourceControl:n}))}disable(t={}){let n=this._parentMarkedDirty(t.onlySelf);this.status=Rs,this.errors=null,this._forEachChild(i=>{i.disable(Q(C({},t),{onlySelf:!0}))}),this._updateValue();let r=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Nl(this.value,r)),this._events.next(new to(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Q(C({},t),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(t={}){let n=this._parentMarkedDirty(t.onlySelf);this.status=xs,this._forEachChild(r=>{r.enable(Q(C({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Q(C({},t),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(t,n){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===xs||this.status===eo)&&this._runAsyncValidator(r,t.emitEvent)}let n=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Nl(this.value,n)),this._events.next(new to(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(Q(C({},t),{sourceControl:n}))}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Rs:xs}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t,n){if(this.asyncValidator){this.status=eo,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1};let r=SI(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:n,shouldHaveEmitted:t})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let t=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,t}return!1}setErrors(t,n={}){this.errors=t,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(t){let n=t;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(t,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[t]:null}hasError(t,n){return!!this.getError(t,n)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t,n,r){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),(t||r)&&this._events.next(new to(this.status,n)),this._parent&&this._parent._updateControlsErrors(t,n,r)}_initObservables(){this.valueChanges=new we,this.statusChanges=new we}_calculateStatus(){return this._allControlsDisabled()?Rs:this.errors?Sl:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(eo)?eo:this._anyControlsHaveStatus(Sl)?Sl:xs}_anyControlsHaveStatus(t){return this._anyControls(n=>n.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t,n){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!t.onlySelf&&this._parent._updatePristine(t,n),i&&this._events.next(new Ps(this.pristine,n))}_updateTouched(t={},n){this.touched=this._anyControlsTouched(),this._events.next(new ks(this.touched,n)),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,n)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Ol(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let n=this._parent&&this._parent.dirty;return!t&&!!n&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=xP(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=RP(this._rawAsyncValidators)}},Rl=class extends xl{constructor(t,n,r){super(NI(n),xI(r,n)),this.controls=t,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,n){return this.controls[t]?this.controls[t]:(this.controls[t]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(t,n,r={}){this.registerControl(t,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(t,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(t,n,r={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],n&&this.registerControl(t,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,n={}){PP(this,!0,t),Object.keys(t).forEach(r=>{OP(this,!0,r),this.controls[r].setValue(t[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(t,n={}){t!=null&&(Object.keys(t).forEach(r=>{let i=this.controls[r];i&&i.patchValue(t[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(t={},n={}){this._forEachChild((r,i)=>{r.reset(t?t[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(t,n,r)=>(t[r]=n.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&t(r,n)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&t(r))return!0;return!1}_reduceValue(){let t={};return this._reduceChildren(t,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(t,n){let r=t;return this._forEachChild((i,o)=>{r=n(r,i,o)}),r}_allControlsDisabled(){for(let t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}};var bp=new P("CallSetDisabledState",{providedIn:"root",factory:()=>Dp}),Dp="always";function kP(e,t){return[...t.path,e]}function RI(e,t,n=Dp){OI(e,t),t.valueAccessor.writeValue(e.value),(e.disabled||n==="always")&&t.valueAccessor.setDisabledState?.(e.disabled),LP(e,t),jP(e,t),VP(e,t),FP(e,t)}function yI(e,t){e.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(t)})}function FP(e,t){if(t.valueAccessor.setDisabledState){let n=r=>{t.valueAccessor.setDisabledState(r)};e.registerOnDisabledChange(n),t._registerOnDestroy(()=>{e._unregisterOnDisabledChange(n)})}}function OI(e,t){let n=MP(e);t.validator!==null?e.setValidators(gI(n,t.validator)):typeof n=="function"&&e.setValidators([n]);let r=AP(e);t.asyncValidator!==null?e.setAsyncValidators(gI(r,t.asyncValidator)):typeof r=="function"&&e.setAsyncValidators([r]);let i=()=>e.updateValueAndValidity();yI(t._rawValidators,i),yI(t._rawAsyncValidators,i)}function LP(e,t){t.valueAccessor.registerOnChange(n=>{e._pendingValue=n,e._pendingChange=!0,e._pendingDirty=!0,e.updateOn==="change"&&PI(e,t)})}function VP(e,t){t.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,e.updateOn==="blur"&&e._pendingChange&&PI(e,t),e.updateOn!=="submit"&&e.markAsTouched()})}function PI(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function jP(e,t){let n=(r,i)=>{t.valueAccessor.writeValue(r),i&&t.viewToModelUpdate(r)};e.registerOnChange(n),t._registerOnDestroy(()=>{e._unregisterOnChange(n)})}function UP(e,t){e==null,OI(e,t)}function BP(e,t){if(!e.hasOwnProperty("model"))return!1;let n=e.model;return n.isFirstChange()?!0:!Object.is(t,n.currentValue)}function $P(e){return Object.getPrototypeOf(e.constructor)===_P}function HP(e,t){e._syncPendingControls(),t.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function WP(e,t){if(!t)return null;Array.isArray(t);let n,r,i;return t.forEach(o=>{o.constructor===Dt?n=o:$P(o)?r=o:i=o}),i||r||n||null}var zP={provide:no,useExisting:Lr(()=>Bt)},Os=Promise.resolve(),Bt=(()=>{class e extends no{get submitted(){return kn(this.submittedReactive)}constructor(n,r,i){super(),this.callSetDisabledState=i,this._submitted=as(()=>this.submittedReactive()),this.submittedReactive=ns(!1),this._directives=new Set,this.ngSubmit=new we,this.form=new Rl({},Ip(n),Ep(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(n){Os.then(()=>{let r=this._findContainer(n.path);n.control=r.registerControl(n.name,n.control),RI(n.control,n,this.callSetDisabledState),n.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(n)})}getControl(n){return this.form.get(n.path)}removeControl(n){Os.then(()=>{let r=this._findContainer(n.path);r&&r.removeControl(n.name),this._directives.delete(n)})}addFormGroup(n){Os.then(()=>{let r=this._findContainer(n.path),i=new Rl({});UP(i,n),r.registerControl(n.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(n){Os.then(()=>{let r=this._findContainer(n.path);r&&r.removeControl(n.name)})}getFormGroup(n){return this.form.get(n.path)}updateModel(n,r){Os.then(()=>{this.form.get(n.path).setValue(r)})}setValue(n){this.control.setValue(n)}onSubmit(n){return this.submittedReactive.set(!0),HP(this.form,this._directives),this.ngSubmit.emit(n),n?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(n=void 0){this.form.reset(n),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(n){return n.pop(),n.length?this.form.get(n):this.form}static{this.\u0275fac=function(r){return new(r||e)(D(Cp,10),D(bI,10),D(bp,8))}}static{this.\u0275dir=at({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&b("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[os([zP]),Rn]})}}return e})();function _I(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}function wI(e){return typeof e=="object"&&e!==null&&Object.keys(e).length===2&&"value"in e&&"disabled"in e}var qP=class extends xl{constructor(t=null,n,r){super(NI(n),xI(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Ol(n)&&(n.nonNullable||n.initialValueIsDefault)&&(wI(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,n={}){this.value=this._pendingValue=t,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(t,n={}){this.setValue(t,n)}reset(t=this.defaultValue,n={}){this._applyFormState(t),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){_I(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){_I(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){wI(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var GP={provide:Fs,useExisting:Lr(()=>$t)},CI=Promise.resolve(),$t=(()=>{class e extends Fs{constructor(n,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this.control=new qP,this._registered=!1,this.name="",this.update=new we,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=WP(this,o)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){let r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),BP(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){RI(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(n){CI.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){let r=n.isDisabled.currentValue,i=r!==0&&ss(r);CI.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?kP(n,this._parent):[n]}static{this.\u0275fac=function(r){return new(r||e)(D(no,9),D(Cp,10),D(bI,10),D(EI,10),D(Pn,8),D(bp,8))}}static{this.\u0275dir=at({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[os([GP]),Rn,Mn]})}}return e})(),cn=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275dir=at({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return e})();var YP=(()=>{class e{constructor(){this._validator=pI}ngOnChanges(n){if(this.inputName in n){let r=this.normalizeInput(n[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):pI,this._onChange&&this._onChange()}}validate(n){return this._validator(n)}registerOnValidatorChange(n){this._onChange=n}enabled(n){return n!=null}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275dir=at({type:e,features:[Mn]})}}return e})();var KP={provide:Cp,useExisting:Lr(()=>Ht),multi:!0};var Ht=(()=>{class e extends YP{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=ss,this.createValidator=n=>bP}enabled(n){return n}static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=Li(e)))(i||e)}})()}static{this.\u0275dir=at({type:e,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&el("required",i._enabled?"":null)},inputs:{required:"required"},features:[os([KP]),Rn]})}}return e})();var QP=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=bn({type:e})}static{this.\u0275inj=En({})}}return e})();var lt=(()=>{class e{static withConfig(n){return{ngModule:e,providers:[{provide:bp,useValue:n.callSetDisabledState??Dp}]}}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=bn({type:e})}static{this.\u0275inj=En({imports:[QP]})}}return e})();var Tp={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};var _=function(e,t){if(!e)throw zr(t)},zr=function(e){return new Error("Firebase Database ("+Tp.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)};var FI=function(e){let t=[],n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},ZP=function(e){let t=[],n=0,r=0;for(;n<e.length;){let i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=e[n++];t[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=e[n++],s=e[n++],a=e[n++],c=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;t[r++]=String.fromCharCode(55296+(c>>10)),t[r++]=String.fromCharCode(56320+(c&1023))}else{let o=e[n++],s=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return t.join("")},kl={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){let o=e[i],s=i+1<e.length,a=s?e[i+1]:0,c=i+2<e.length,l=c?e[i+2]:0,u=o>>2,d=(o&3)<<4|a>>4,f=(a&15)<<2|l>>6,h=l&63;c||(h=64,s||(f=64)),r.push(n[u],n[d],n[f],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(FI(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):ZP(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();let n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){let o=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0;++i;let l=i<e.length?n[e.charAt(i)]:64;++i;let d=i<e.length?n[e.charAt(i)]:64;if(++i,o==null||a==null||l==null||d==null)throw new Mp;let f=o<<2|a>>4;if(r.push(f),l!==64){let h=a<<4&240|l>>2;if(r.push(h),d!==64){let p=l<<6&192|d;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},Mp=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},Np=function(e){let t=FI(e);return kl.encodeByteArray(t,!0)},Vs=function(e){return Np(e).replace(/\./g,"")},js=function(e){try{return kl.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function LI(e){return VI(void 0,e)}function VI(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:let n=t;return new Date(n.getTime());case Object:e===void 0&&(e={});break;case Array:e=[];break;default:return t}for(let n in t)!t.hasOwnProperty(n)||!JP(n)||(e[n]=VI(e[n],t[n]));return e}function JP(e){return e!=="__proto__"}function XP(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var ek=()=>XP().__FIREBASE_DEFAULTS__,tk=()=>{if(typeof process>"u"||typeof process.env>"u")return;let e=process.env.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},nk=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let t=e&&js(e[1]);return t&&JSON.parse(t)},xp=()=>{try{return ek()||tk()||nk()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},jI=e=>{var t,n;return(n=(t=xp())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},UI=e=>{let t=jI(e);if(!t)return;let n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);let r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},Rp=()=>{var e;return(e=xp())===null||e===void 0?void 0:e.config},BI=e=>{var t;return(t=xp())===null||t===void 0?void 0:t[`_${e}`]};var jn=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}};function $I(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=t||"demo-project",i=e.iat||0,o=e.sub||e.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Vs(JSON.stringify(n)),Vs(JSON.stringify(s)),""].join(".")}function Wt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Us(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Wt())}function HI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function WI(){let e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function Fl(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function un(){return Tp.NODE_CLIENT===!0||Tp.NODE_ADMIN===!0}function zI(){try{return typeof indexedDB=="object"}catch{return!1}}function qI(){return new Promise((e,t)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;t(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){t(n)}})}var rk="FirebaseError",ln=class e extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=rk,Object.setPrototypeOf(this,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Un.prototype.create)}},Un=class{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){let r=n[0]||{},i=`${this.service}/${t}`,o=this.errors[t],s=o?ik(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new ln(i,a,r)}};function ik(e,t){return e.replace(ok,(n,r)=>{let i=t[r];return i!=null?String(i):`<${r}?>`})}var ok=/\{\$([^}]+)}/g;function io(e){return JSON.parse(e)}function Te(e){return JSON.stringify(e)}var GI=function(e){let t={},n={},r={},i="";try{let o=e.split(".");t=io(js(o[0])||""),n=io(js(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch{}return{header:t,claims:n,data:r,signature:i}};var YI=function(e){let t=GI(e),n=t.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},KI=function(e){let t=GI(e).claims;return typeof t=="object"&&t.admin===!0};function zt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function qr(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]}function Ll(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Bs(e,t,n){let r={};for(let i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function $s(e,t){if(e===t)return!0;let n=Object.keys(e),r=Object.keys(t);for(let i of n){if(!r.includes(i))return!1;let o=e[i],s=t[i];if(kI(o)&&kI(s)){if(!$s(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function kI(e){return e!==null&&typeof e=="object"}function Hs(e){let t=[];for(let[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(i=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}var Pl=class{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(t,n){n||(n=0);let r=this.W_;if(typeof t=="string")for(let d=0;d<16;d++)r[d]=t.charCodeAt(n)<<24|t.charCodeAt(n+1)<<16|t.charCodeAt(n+2)<<8|t.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=t[n]<<24|t[n+1]<<16|t[n+2]<<8|t[n+3],n+=4;for(let d=16;d<80;d++){let f=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(f<<1|f>>>31)&4294967295}let i=this.chain_[0],o=this.chain_[1],s=this.chain_[2],a=this.chain_[3],c=this.chain_[4],l,u;for(let d=0;d<80;d++){d<40?d<20?(l=a^o&(s^a),u=1518500249):(l=o^s^a,u=1859775393):d<60?(l=o&s|a&(o|s),u=2400959708):(l=o^s^a,u=3395469782);let f=(i<<5|i>>>27)+l+c+u+r[d]&4294967295;c=a,a=s,s=(o<<30|o>>>2)&4294967295,o=i,i=f}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+s&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(t,n){if(t==null)return;n===void 0&&(n=t.length);let r=n-this.blockSize,i=0,o=this.buf_,s=this.inbuf_;for(;i<n;){if(s===0)for(;i<=r;)this.compress_(t,i),i+=this.blockSize;if(typeof t=="string"){for(;i<n;)if(o[s]=t.charCodeAt(i),++s,++i,s===this.blockSize){this.compress_(o),s=0;break}}else for(;i<n;)if(o[s]=t[i],++s,++i,s===this.blockSize){this.compress_(o),s=0;break}}this.inbuf_=s,this.total_+=n}digest(){let t=[],n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let o=24;o>=0;o-=8)t[r]=this.chain_[i]>>o&255,++r;return t}};function QI(e,t){let n=new Ap(e,t);return n.subscribe.bind(n)}var Ap=class{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,r){let i;if(t===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");sk(t,["next","error","complete"])?i=t:i={next:t,error:n,complete:r},i.next===void 0&&(i.next=Sp),i.error===void 0&&(i.error=Sp),i.complete===void 0&&(i.complete=Sp);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function sk(e,t){if(typeof e!="object"||e===null)return!1;for(let n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function Sp(){}function Ws(e,t){return`${e} failed: ${t} argument `}var ZI=function(e){let t=[],n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);if(i>=55296&&i<=56319){let o=i-55296;r++,_(r<e.length,"Surrogate pair missing trail surrogate.");let s=e.charCodeAt(r)-56320;i=65536+(o<<10)+s}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},zs=function(e){let t=0;for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};var f8=4*60*60*1e3;function ut(e){return e&&e._delegate?e._delegate:e}var St=class{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}};var Gr="[DEFAULT]";var Vl=class{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){let n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){let r=new jn;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;let r=this.normalizeInstanceIdentifier(t?.identifier),i=(n=t?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(ck(t))try{this.getOrInitializeService({instanceIdentifier:Gr})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(t=Gr){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}delete(){return w(this,null,function*(){let t=Array.from(this.instances.values());yield Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(t=Gr){return this.instances.has(t)}getOptions(t=Gr){return this.instancesOptions.get(t)||{}}initialize(t={}){let{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(t,n){var r;let i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(t),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&t(s,i),()=>{o.delete(t)}}invokeOnInitCallbacks(t,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:ak(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=Gr){return this.component?this.component.multipleInstances?t:Gr:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function ak(e){return e===Gr?void 0:e}function ck(e){return e.instantiationMode==="EAGER"}var qs=class{constructor(t){this.name=t,this.providers=new Map}addComponent(t){let n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);let n=new Vl(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}};var lk=[],fe=function(e){return e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT",e}(fe||{}),uk={debug:fe.DEBUG,verbose:fe.VERBOSE,info:fe.INFO,warn:fe.WARN,error:fe.ERROR,silent:fe.SILENT},dk=fe.INFO,fk={[fe.DEBUG]:"log",[fe.VERBOSE]:"log",[fe.INFO]:"info",[fe.WARN]:"warn",[fe.ERROR]:"error"},hk=(e,t,...n)=>{if(t<e.logLevel)return;let r=new Date().toISOString(),i=fk[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)},ur=class{constructor(t){this.name=t,this._logLevel=dk,this._logHandler=hk,this._userLogHandler=null,lk.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in fe))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?uk[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,fe.DEBUG,...t),this._logHandler(this,fe.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,fe.VERBOSE,...t),this._logHandler(this,fe.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,fe.INFO,...t),this._logHandler(this,fe.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,fe.WARN,...t),this._logHandler(this,fe.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,fe.ERROR,...t),this._logHandler(this,fe.ERROR,...t)}};var pk=(e,t)=>t.some(n=>e instanceof n),JI,XI;function gk(){return JI||(JI=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function mk(){return XI||(XI=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var e0=new WeakMap,Pp=new WeakMap,t0=new WeakMap,Op=new WeakMap,Fp=new WeakMap;function vk(e){let t=new Promise((n,r)=>{let i=()=>{e.removeEventListener("success",o),e.removeEventListener("error",s)},o=()=>{n(dn(e.result)),i()},s=()=>{r(e.error),i()};e.addEventListener("success",o),e.addEventListener("error",s)});return t.then(n=>{n instanceof IDBCursor&&e0.set(n,e)}).catch(()=>{}),Fp.set(t,e),t}function yk(e){if(Pp.has(e))return;let t=new Promise((n,r)=>{let i=()=>{e.removeEventListener("complete",o),e.removeEventListener("error",s),e.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",o),e.addEventListener("error",s),e.addEventListener("abort",s)});Pp.set(e,t)}var kp={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return Pp.get(e);if(t==="objectStoreNames")return e.objectStoreNames||t0.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return dn(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function n0(e){kp=e(kp)}function _k(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){let r=e.call(jl(this),t,...n);return t0.set(r,t.sort?t.sort():[t]),dn(r)}:mk().includes(e)?function(...t){return e.apply(jl(this),t),dn(e0.get(this))}:function(...t){return dn(e.apply(jl(this),t))}}function wk(e){return typeof e=="function"?_k(e):(e instanceof IDBTransaction&&yk(e),pk(e,gk())?new Proxy(e,kp):e)}function dn(e){if(e instanceof IDBRequest)return vk(e);if(Op.has(e))return Op.get(e);let t=wk(e);return t!==e&&(Op.set(e,t),Fp.set(t,e)),t}var jl=e=>Fp.get(e);function i0(e,t,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(e,t),a=dn(s);return r&&s.addEventListener("upgradeneeded",c=>{r(dn(s.result),c.oldVersion,c.newVersion,dn(s.transaction),c)}),n&&s.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{o&&c.addEventListener("close",()=>o()),i&&c.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var Ck=["get","getKey","getAll","getAllKeys","count"],Ik=["put","add","delete","clear"],Lp=new Map;function r0(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(Lp.get(t))return Lp.get(t);let n=t.replace(/FromIndex$/,""),r=t!==n,i=Ik.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Ck.includes(n)))return;let o=function(s,...a){return w(this,null,function*(){let c=this.transaction(s,i?"readwrite":"readonly"),l=c.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[n](...a),i&&c.done]))[0]})};return Lp.set(t,o),o}n0(e=>Q(C({},e),{get:(t,n,r)=>r0(t,n)||e.get(t,n,r),has:(t,n)=>!!r0(t,n)||e.has(t,n)}));var jp=class{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Ek(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function Ek(e){let t=e.getComponent();return t?.type==="VERSION"}var Up="@firebase/app",o0="0.10.12";var Bn=new ur("@firebase/app"),bk="@firebase/app-compat",Dk="@firebase/analytics-compat",Sk="@firebase/analytics",Tk="@firebase/app-check-compat",Mk="@firebase/app-check",Ak="@firebase/auth",Nk="@firebase/auth-compat",xk="@firebase/database",Rk="@firebase/data-connect",Ok="@firebase/database-compat",Pk="@firebase/functions",kk="@firebase/functions-compat",Fk="@firebase/installations",Lk="@firebase/installations-compat",Vk="@firebase/messaging",jk="@firebase/messaging-compat",Uk="@firebase/performance",Bk="@firebase/performance-compat",$k="@firebase/remote-config",Hk="@firebase/remote-config-compat",Wk="@firebase/storage",zk="@firebase/storage-compat",qk="@firebase/firestore",Gk="@firebase/vertexai-preview",Yk="@firebase/firestore-compat",Kk="firebase",Qk="10.14.0";var Bp="[DEFAULT]",Zk={[Up]:"fire-core",[bk]:"fire-core-compat",[Sk]:"fire-analytics",[Dk]:"fire-analytics-compat",[Mk]:"fire-app-check",[Tk]:"fire-app-check-compat",[Ak]:"fire-auth",[Nk]:"fire-auth-compat",[xk]:"fire-rtdb",[Rk]:"fire-data-connect",[Ok]:"fire-rtdb-compat",[Pk]:"fire-fn",[kk]:"fire-fn-compat",[Fk]:"fire-iid",[Lk]:"fire-iid-compat",[Vk]:"fire-fcm",[jk]:"fire-fcm-compat",[Uk]:"fire-perf",[Bk]:"fire-perf-compat",[$k]:"fire-rc",[Hk]:"fire-rc-compat",[Wk]:"fire-gcs",[zk]:"fire-gcs-compat",[qk]:"fire-fst",[Yk]:"fire-fst-compat",[Gk]:"fire-vertex","fire-js":"fire-js",[Kk]:"fire-js-all"};var Ul=new Map,Jk=new Map,$p=new Map;function s0(e,t){try{e.container.addComponent(t)}catch(n){Bn.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function fr(e){let t=e.name;if($p.has(t))return Bn.debug(`There were multiple attempts to register component ${t}.`),!1;$p.set(t,e);for(let n of Ul.values())s0(n,e);for(let n of Jk.values())s0(n,e);return!0}function qp(e,t){let n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function oo(e){return e.settings!==void 0}var Xk={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},dr=new Un("app","Firebase",Xk);var Hp=class{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new St("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw dr.create("app-deleted",{appName:this._name})}};var so=Qk;function ie(e,t={}){let n=e;typeof t!="object"&&(t={name:t});let r=Object.assign({name:Bp,automaticDataCollectionEnabled:!1},t),i=r.name;if(typeof i!="string"||!i)throw dr.create("bad-app-name",{appName:String(i)});if(n||(n=Rp()),!n)throw dr.create("no-options");let o=Ul.get(i);if(o){if($s(n,o.options)&&$s(r,o.config))return o;throw dr.create("duplicate-app",{appName:i})}let s=new qs(i);for(let c of $p.values())s.addComponent(c);let a=new Hp(n,r,s);return Ul.set(i,a),a}function Gp(e=Bp){let t=Ul.get(e);if(!t&&e===Bp&&Rp())return ie();if(!t)throw dr.create("no-app",{appName:e});return t}function Tt(e,t,n){var r;let i=(r=Zk[e])!==null&&r!==void 0?r:e;n&&(i+=`-${n}`);let o=i.match(/\s|\//),s=t.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${t}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Bn.warn(a.join(" "));return}fr(new St(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}var e1="firebase-heartbeat-database",t1=1,Gs="firebase-heartbeat-store",Vp=null;function u0(){return Vp||(Vp=i0(e1,t1,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(Gs)}catch(n){console.warn(n)}}}}).catch(e=>{throw dr.create("idb-open",{originalErrorMessage:e.message})})),Vp}function n1(e){return w(this,null,function*(){try{let n=(yield u0()).transaction(Gs),r=yield n.objectStore(Gs).get(d0(e));return yield n.done,r}catch(t){if(t instanceof ln)Bn.warn(t.message);else{let n=dr.create("idb-get",{originalErrorMessage:t?.message});Bn.warn(n.message)}}})}function a0(e,t){return w(this,null,function*(){try{let r=(yield u0()).transaction(Gs,"readwrite");yield r.objectStore(Gs).put(t,d0(e)),yield r.done}catch(n){if(n instanceof ln)Bn.warn(n.message);else{let r=dr.create("idb-set",{originalErrorMessage:n?.message});Bn.warn(r.message)}}})}function d0(e){return`${e.name}!${e.options.appId}`}var r1=1024,i1=30*24*60*60*1e3,Wp=class{constructor(t){this.container=t,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new zp(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return w(this,null,function*(){var t,n;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=c0();return((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{let a=new Date(s.date).valueOf();return Date.now()-a<=i1}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Bn.warn(r)}})}getHeartbeatsHeader(){return w(this,null,function*(){var t;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=c0(),{heartbeatsToSend:r,unsentEntries:i}=o1(this._heartbeatsCache.heartbeats),o=Vs(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Bn.warn(n),""}})}};function c0(){return new Date().toISOString().substring(0,10)}function o1(e,t=r1){let n=[],r=e.slice();for(let i of e){let o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),l0(n)>t){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),l0(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var zp=class{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return w(this,null,function*(){return zI()?qI().then(()=>!0).catch(()=>!1):!1})}read(){return w(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield n1(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(t){return w(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return a0(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return})}add(t){return w(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return a0(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return})}};function l0(e){return Vs(JSON.stringify({version:2,heartbeats:e})).length}function s1(e){fr(new St("platform-logger",t=>new jp(t),"PRIVATE")),fr(new St("heartbeat",t=>new Wp(t),"PRIVATE")),Tt(Up,o0,e),Tt(Up,o0,"esm2017"),Tt("fire-js","")}s1("");var a1="firebase",c1="10.14.0";Tt(a1,c1,"app");var f0="@firebase/database",h0="1.0.8";var Xg="";function l1(e){Xg=e}var tg=class{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,n){n==null?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Te(n))}get(t){let n=this.domStorage_.getItem(this.prefixedName_(t));return n==null?null:io(n)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}};var ng=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,n){n==null?delete this.cache_[t]:this.cache_[t]=n}get(t){return zt(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}};var H0=function(e){try{if(typeof window<"u"&&typeof window[e]<"u"){let t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new tg(t)}}catch{}return new ng},Kr=H0("localStorage"),rg=H0("sessionStorage");var lo=new ur("@firebase/database"),u1=function(){let e=1;return function(){return e++}}(),W0=function(e){let t=ZI(e),n=new Pl;n.update(t);let r=n.digest();return kl.encodeByteArray(r)},fa=function(...e){let t="";for(let n=0;n<e.length;n++){let r=e[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?t+=fa.apply(null,r):typeof r=="object"?t+=Te(r):t+=r,t+=" "}return t},Qr=null,p0=!0,d1=function(e,t){_(!t||e===!0||e===!1,"Can't turn on custom loggers persistently."),e===!0?(lo.logLevel=fe.VERBOSE,Qr=lo.log.bind(lo),t&&rg.set("logging_enabled",!0)):typeof e=="function"?Qr=e:(Qr=null,rg.remove("logging_enabled"))},ze=function(...e){if(p0===!0&&(p0=!1,Qr===null&&rg.get("logging_enabled")===!0&&d1(!0)),Qr){let t=fa.apply(null,e);Qr(t)}},ha=function(e){return function(...t){ze(e,...t)}},ig=function(...e){let t="FIREBASE INTERNAL ERROR: "+fa(...e);lo.error(t)},$n=function(...e){let t=`FIREBASE FATAL ERROR: ${fa(...e)}`;throw lo.error(t),new Error(t)},tt=function(...e){let t="FIREBASE WARNING: "+fa(...e);lo.warn(t)},f1=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&tt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},em=function(e){return typeof e=="number"&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},h1=function(e){if(un()||document.readyState==="complete")e();else{let t=!1,n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}t||(t=!0,e())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},fo="[MIN_NAME]",Zr="[MAX_NAME]",Xr=function(e,t){if(e===t)return 0;if(e===fo||t===Zr)return-1;if(t===fo||e===Zr)return 1;{let n=g0(e),r=g0(t);return n!==null?r!==null?n-r===0?e.length-t.length:n-r:-1:r!==null?1:e<t?-1:1}},p1=function(e,t){return e===t?0:e<t?-1:1},Ys=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+Te(t))},tm=function(e){if(typeof e!="object"||e===null)return Te(e);let t=[];for(let r in e)t.push(r);t.sort();let n="{";for(let r=0;r<t.length;r++)r!==0&&(n+=","),n+=Te(t[r]),n+=":",n+=tm(e[t[r]]);return n+="}",n},z0=function(e,t){let n=e.length;if(n<=t)return[e];let r=[];for(let i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function qe(e,t){for(let n in e)e.hasOwnProperty(n)&&t(n,e[n])}var q0=function(e){_(!em(e),"Invalid JSON number");let t=11,n=52,r=(1<<t-1)-1,i,o,s,a,c;e===0?(o=0,s=0,i=1/e===-1/0?1:0):(i=e<0,e=Math.abs(e),e>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(e)/Math.LN2),r),o=a+r,s=Math.round(e*Math.pow(2,n-a)-Math.pow(2,n))):(o=0,s=Math.round(e/Math.pow(2,1-r-n))));let l=[];for(c=n;c;c-=1)l.push(s%2?1:0),s=Math.floor(s/2);for(c=t;c;c-=1)l.push(o%2?1:0),o=Math.floor(o/2);l.push(i?1:0),l.reverse();let u=l.join(""),d="";for(c=0;c<64;c+=8){let f=parseInt(u.substr(c,8),2).toString(16);f.length===1&&(f="0"+f),d=d+f}return d.toLowerCase()},g1=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},m1=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function v1(e,t){let n="Unknown Error";e==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":e==="permission_denied"?n="Client doesn't have permission to access the desired data.":e==="unavailable"&&(n="The service is unavailable");let r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}var y1=new RegExp("^-?(0*)\\d{1,10}$"),_1=-2147483648,w1=2147483647,g0=function(e){if(y1.test(e)){let t=Number(e);if(t>=_1&&t<=w1)return t}return null},wo=function(e){try{e()}catch(t){setTimeout(()=>{let n=t.stack||"";throw tt("Exception was thrown by user callback.",n),t},Math.floor(0))}},C1=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Xs=function(e,t){let n=setTimeout(e,t);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};var og=class{constructor(t,n){this.appName_=t,this.appCheckProvider=n,this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(r=>this.appCheck=r)}getToken(t){return this.appCheck?this.appCheck.getToken(t):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(n,r):n(null)},0)})}addTokenChangeListener(t){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(t))}notifyForInvalidToken(){tt(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var sg=class{constructor(t,n,r){this.appName_=t,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(n=>n&&n.code==="auth/token-not-initialized"?(ze("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(n,r):n(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(n=>n.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(n=>n.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',tt(t)}},ea=(()=>{class e{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}e.OWNER="owner";return e})(),$l="5",G0="v",Y0="s",K0="r",Q0="f",Z0=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,J0="ls",X0="p",ag="ac",eE="websocket",tE="long_polling";var Hl=class{constructor(t,n,r,i,o=!1,s="",a=!1,c=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=o,this.persistenceKey=s,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Kr.get("host:"+t)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&Kr.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){let t=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${t}${this.host}/${n}`}};function I1(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams}function nE(e,t,n){_(typeof t=="string","typeof type must == string"),_(typeof n=="object","typeof params must == object");let r;if(t===eE)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else if(t===tE)r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+t);I1(e)&&(n.ns=e.namespace);let i=[];return qe(n,(o,s)=>{i.push(o+"="+s)}),r+i.join("&")}var cg=class{constructor(){this.counters_={}}incrementCounter(t,n=1){zt(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=n}get(){return LI(this.counters_)}};var Yp={},Kp={};function nm(e){let t=e.toString();return Yp[t]||(Yp[t]=new cg),Yp[t]}function E1(e,t){let n=e.toString();return Kp[n]||(Kp[n]=t()),Kp[n]}var lg=class{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,n){this.closeAfterResponse=t,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,n){for(this.pendingResponses[t]=n;this.pendingResponses[this.currentResponseNum];){let r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&wo(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var m0="start",b1="close",D1="pLPCommand",S1="pRTLPCB",rE="id",iE="pw",oE="ser",T1="cb",M1="seg",A1="ts",N1="d",x1="dframe",sE=1870,aE=30,R1=sE-aE,O1=25e3,P1=3e4,ug=class e{constructor(t,n,r,i,o,s,a){this.connId=t,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.transportSessionId=s,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=ha(t),this.stats_=nm(n),this.urlFn=c=>(this.appCheckToken&&(c[ag]=this.appCheckToken),nE(n,tE,c))}open(t,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new lg(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(P1)),h1(()=>{if(this.isClosed_)return;this.scriptTagHolder=new dg((...o)=>{let[s,a,c,l,u]=o;if(this.incrementIncomingBytes_(o),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,s===m0)this.id=a,this.password=c;else if(s===b1)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+s)},(...o)=>{let[s,a]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(s,a)},()=>{this.onClosed_()},this.urlFn);let r={};r[m0]="t",r[oE]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[T1]=this.scriptTagHolder.uniqueCallbackIdentifier),r[G0]=$l,this.transportSessionId&&(r[Y0]=this.transportSessionId),this.lastSessionId&&(r[J0]=this.lastSessionId),this.applicationId&&(r[X0]=this.applicationId),this.appCheckToken&&(r[ag]=this.appCheckToken),typeof location<"u"&&location.hostname&&Z0.test(location.hostname)&&(r[K0]=Q0);let i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){e.forceAllow_=!0}static forceDisallow(){e.forceDisallow_=!0}static isAvailable(){return un()?!1:e.forceAllow_?!0:!e.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!g1()&&!m1()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){let n=Te(t);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);let r=Np(n),i=z0(r,R1);for(let o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++}addDisconnectPingFrame(t,n){if(un())return;this.myDisconnFrame=document.createElement("iframe");let r={};r[x1]="t",r[rE]=t,r[iE]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){let n=Te(t).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}},dg=class e{constructor(t,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,un())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=u1(),window[D1+this.uniqueCallbackIdentifier]=t,window[S1+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();let o="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(o='<script>document.domain="'+document.domain+'";<\/script>');let s="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(a){ze("frame writing exception"),a.stack&&ze(a.stack),ze(a)}}}static createIFrame_(){let t=document.createElement("iframe");if(t.style.display="none",document.body){document.body.appendChild(t);try{t.contentWindow.document||ze("No IE domain setting required")}catch{let r=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,n){for(this.myID=t,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let t={};t[rE]=this.myID,t[iE]=this.myPW,t[oE]=this.currentSerial;let n=this.urlFn(t),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+aE+r.length<=sE;){let s=this.pendingSegs.shift();r=r+"&"+M1+i+"="+s.seg+"&"+A1+i+"="+s.ts+"&"+N1+i+"="+s.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(t,n,r){this.pendingSegs.push({seg:t,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(t,n){this.outstandingRequests.add(n);let r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(O1)),o=()=>{clearTimeout(i),r()};this.addTag(t,o)}addTag(t,n){un()?this.doNodeLongPoll(t,n):setTimeout(()=>{try{if(!this.sendNewPolls)return;let r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){let i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{ze("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}};var k1=16384,F1=45e3,Wl=null;typeof MozWebSocket<"u"?Wl=MozWebSocket:typeof WebSocket<"u"&&(Wl=WebSocket);var Ks=(()=>{class e{constructor(n,r,i,o,s,a,c){this.connId=n,this.applicationId=i,this.appCheckToken=o,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=ha(this.connId),this.stats_=nm(r),this.connURL=e.connectionURL_(r,a,c,o,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(n,r,i,o,s){let a={};return a[G0]=$l,!un()&&typeof location<"u"&&location.hostname&&Z0.test(location.hostname)&&(a[K0]=Q0),r&&(a[Y0]=r),i&&(a[J0]=i),o&&(a[ag]=o),s&&(a[X0]=s),nE(n,eE,a)}open(n,r){this.onDisconnect=r,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Kr.set("previous_websocket_failure",!0);try{let i;if(un()){let o=this.nodeAdmin?"AdminNode":"Node";i={headers:{"User-Agent":`Firebase/${$l}/${Xg}/${process.platform}/${o}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);let s=process.env,a=this.connURL.indexOf("wss://")===0?s.HTTPS_PROXY||s.https_proxy:s.HTTP_PROXY||s.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new Wl(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");let o=i.message||i.data;o&&this.log_(o),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");let o=i.message||i.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){e.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){let r=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(r);i&&i.length>1&&parseFloat(i[1])<4.4&&(n=!0)}return!n&&Wl!==null&&!e.forceDisallow_}static previouslyFailed(){return Kr.isInMemoryStorage||Kr.get("previous_websocket_failure")===!0}markConnectionHealthy(){Kr.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){let r=this.frames.join("");this.frames=null;let i=io(r);this.onMessage(i)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if(_(this.frames===null,"We already have a frame buffer"),n.length<=6){let r=Number(n);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(this.mySock===null)return;let r=n.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{let i=this.extractFrameCount_(r);i!==null&&this.appendFrame_(i)}}send(n){this.resetKeepAlive();let r=Te(n);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);let i=z0(r,k1);i.length>1&&this.sendString_(String(i.length));for(let o=0;o<i.length;o++)this.sendString_(i[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(F1))}sendString_(n){try{this.mySock.send(n)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}e.responsesRequiredToBeHealthy=2,e.healthyTimeout=3e4;return e})(),L1=(()=>{class e{constructor(n){this.initTransports_(n)}static get ALL_TRANSPORTS(){return[ug,Ks]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(n){let r=Ks&&Ks.isAvailable(),i=r&&!Ks.previouslyFailed();if(n.webSocketOnly&&(r||tt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Ks];else{let o=this.transports_=[];for(let s of e.ALL_TRANSPORTS)s&&s.isAvailable()&&o.push(s);e.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}e.globalTransportInitialized_=!1;return e})(),V1=6e4,j1=5e3,U1=10*1024,B1=100*1024,Qp="t",v0="d",$1="s",y0="r",H1="e",_0="o",w0="a",C0="n",I0="p",W1="h",fg=class{constructor(t,n,r,i,o,s,a,c,l,u){this.id=t,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=o,this.onMessage_=s,this.onReady_=a,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=ha("c:"+this.id+":"),this.transportManager_=new L1(n),this.log_("Connection created"),this.start_()}start_(){let t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));let i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=Xs(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>B1?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>U1?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return n=>{t===this.conn_?this.onConnectionLost_(n):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return n=>{this.state_!==2&&(t===this.rx_?this.onPrimaryMessageReceived_(n):t===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(t){let n={t:"d",d:t};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if(Qp in t){let n=t[Qp];n===w0?this.upgradeIfSecondaryHealthy_():n===y0?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===_0&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){let n=Ys("t",t),r=Ys("d",t);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:I0,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:w0,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:C0,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){let n=Ys("t",t),r=Ys("d",t);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){let n=Ys(Qp,t);if(v0 in t){let r=t[v0];if(n===W1){let i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===C0){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===$1?this.onConnectionShutdown_(r):n===y0?this.onReset_(r):n===H1?ig("Server Error: "+r):n===_0?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):ig("Unknown control packet command: "+n)}}onHandshake_(t){let n=t.ts,r=t.v,i=t.h;this.sessionId=t.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),$l!==r&&tt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Xs(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(V1))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,n){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Xs(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(j1))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:I0,d:{}}}))}onSecondaryConnectionLost_(){let t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,!t&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Kr.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(t)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var zl=class{put(t,n,r,i){}merge(t,n,r,i){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,n,r){}onDisconnectMerge(t,n,r){}onDisconnectCancel(t,n){}reportStats(t){}};var ql=class{constructor(t){this.allowedEvents_=t,this.listeners_={},_(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...n){if(Array.isArray(this.listeners_[t])){let r=[...this.listeners_[t]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(t,n,r){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:n,context:r});let i=this.getInitialEvent(t);i&&n.apply(r,i)}off(t,n,r){this.validateEventType_(t);let i=this.listeners_[t]||[];for(let o=0;o<i.length;o++)if(i[o].callback===n&&(!r||r===i[o].context)){i.splice(o,1);return}}validateEventType_(t){_(this.allowedEvents_.find(n=>n===t),"Unknown event: "+t)}};var Gl=class e extends ql{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Us()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new e}getInitialEvent(t){return _(t==="online","Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}};var E0=32,b0=768,ce=class{constructor(t,n){if(n===void 0){this.pieces_=t.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}toString(){let t="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(t+="/"+this.pieces_[n]);return t||"/"}};function te(){return new ce("")}function J(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function mr(e){return e.pieces_.length-e.pieceNum_}function ve(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new ce(e.pieces_,t)}function rm(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function z1(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)e.pieces_[n]!==""&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}function ia(e,t=0){return e.pieces_.slice(e.pieceNum_+t)}function cE(e){if(e.pieceNum_>=e.pieces_.length)return null;let t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new ce(t,0)}function Ce(e,t){let n=[];for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof ce)for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else{let r=t.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new ce(n,0)}function K(e){return e.pieceNum_>=e.pieces_.length}function et(e,t){let n=J(e),r=J(t);if(n===null)return t;if(n===r)return et(ve(e),ve(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function q1(e,t){let n=ia(e,0),r=ia(t,0);for(let i=0;i<n.length&&i<r.length;i++){let o=Xr(n[i],r[i]);if(o!==0)return o}return n.length===r.length?0:n.length<r.length?-1:1}function lE(e,t){if(mr(e)!==mr(t))return!1;for(let n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function Mt(e,t){let n=e.pieceNum_,r=t.pieceNum_;if(mr(e)>mr(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}var hg=class{constructor(t,n){this.errorPrefix_=n,this.parts_=ia(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=zs(this.parts_[r]);uE(this)}};function G1(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=zs(t),uE(e)}function Y1(e){let t=e.parts_.pop();e.byteLength_-=zs(t),e.parts_.length>0&&(e.byteLength_-=1)}function uE(e){if(e.byteLength_>b0)throw new Error(e.errorPrefix_+"has a key path longer than "+b0+" bytes ("+e.byteLength_+").");if(e.parts_.length>E0)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+E0+") or object contains a cycle "+Yr(e))}function Yr(e){return e.parts_.length===0?"":"in property '"+e.parts_.join(".")+"'"}var pg=class e extends ql{constructor(){super(["visible"]);let t,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{let r=!document[t];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new e}getInitialEvent(t){return _(t==="visible","Unknown event type: "+t),[this.visible_]}};var Qs=1e3,K1=60*5*1e3,D0=30*1e3,Q1=1.3,Z1=3e4,J1="server_kill",S0=3,im=(()=>{class e extends zl{constructor(n,r,i,o,s,a,c,l){if(super(),this.repoInfo_=n,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=o,this.onServerInfoUpdate_=s,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=l,this.id=e.nextPersistentConnectionId_++,this.log_=ha("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Qs,this.maxReconnectDelay_=K1,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!un())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");pg.getInstance().on("visible",this.onVisible_,this),n.host.indexOf("fblocal")===-1&&Gl.getInstance().on("online",this.onOnline_,this)}sendRequest(n,r,i){let o=++this.requestNumber_,s={r:o,a:n,b:r};this.log_(Te(s)),_(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),i&&(this.requestCBHash_[o]=i)}get(n){this.initConnection_();let r=new jn,o={action:"g",request:{p:n._path.toString(),q:n._queryObject},onComplete:a=>{let c=a.d;a.s==="ok"?r.resolve(c):r.reject(c)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;let s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),r.promise}listen(n,r,i,o){this.initConnection_();let s=n._queryIdentifier,a=n._path.toString();this.log_("Listen called for "+a+" "+s),this.listens.has(a)||this.listens.set(a,new Map),_(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),_(!this.listens.get(a).has(s),"listen() called twice for same path/queryId.");let c={onComplete:o,hashFn:r,query:n,tag:i};this.listens.get(a).set(s,c),this.connected_&&this.sendListen_(c)}sendGet_(n){let r=this.outstandingGets_[n];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(n){let r=n.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);let s={p:i},a="q";n.tag&&(s.q=r._queryObject,s.t=n.tag),s.h=n.hashFn(),this.sendRequest(a,s,c=>{let l=c.d,u=c.s;e.warnOnListenWarnings_(l,r),(this.listens.get(i)&&this.listens.get(i).get(o))===n&&(this.log_("listen response",c),u!=="ok"&&this.removeListen_(i,o),n.onComplete&&n.onComplete(u,l))})}static warnOnListenWarnings_(n,r){if(n&&typeof n=="object"&&zt(n,"w")){let i=qr(n,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){let o='".indexOn": "'+r._queryParams.getIndex().toString()+'"',s=r._path.toString();tt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&n.length===40||KI(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=D0)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let n=this.authToken_,r=YI(n)?"auth":"gauth",i={cred:n};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(r,i,o=>{let s=o.s,a=o.d||"error";this.authToken_===n&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{let r=n.s,i=n.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(n,r){let i=n._path.toString(),o=n._queryIdentifier;this.log_("Unlisten called for "+i+" "+o),_(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,o)&&this.connected_&&this.sendUnlisten_(i,o,n._queryObject,r)}sendUnlisten_(n,r,i,o){this.log_("Unlisten on "+n+" for "+r);let s={p:n},a="n";o&&(s.q=i,s.t=o),this.sendRequest(a,s)}onDisconnectPut(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:r,onComplete:i})}onDisconnectMerge(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:r,onComplete:i})}onDisconnectCancel(n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(n,r,i,o){let s={p:r,d:i};this.log_("onDisconnect "+n,s),this.sendRequest(n,s,a=>{o&&setTimeout(()=>{o(a.s,a.d)},Math.floor(0))})}put(n,r,i,o){this.putInternal("p",n,r,i,o)}merge(n,r,i,o){this.putInternal("m",n,r,i,o)}putInternal(n,r,i,o,s){this.initConnection_();let a={p:r,d:i};s!==void 0&&(a.h=s),this.outstandingPuts_.push({action:n,request:a,onComplete:o}),this.outstandingPutCount_++;let c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+r)}sendPut_(n){let r=this.outstandingPuts_[n].action,i=this.outstandingPuts_[n].request,o=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(r,i,s=>{this.log_(r+" response",s),delete this.outstandingPuts_[n],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),o&&o(s.s,s.d)})}reportStats(n){if(this.connected_){let r={c:n};this.log_("reportStats",r),this.sendRequest("s",r,i=>{if(i.s!=="ok"){let s=i.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+Te(n));let r=n.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,r){this.log_("handleServerMessage",n,r),n==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):n==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):n==="c"?this.onListenRevoked_(r.p,r.q):n==="ac"?this.onAuthRevoked_(r.s,r.d):n==="apc"?this.onAppCheckRevoked_(r.s,r.d):n==="sd"?this.onSecurityDebugPacket_(r):ig("Unrecognized action received from server: "+Te(n)+`
Are you using the latest client?`)}onReady_(n,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(n),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){_(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Qs,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=Qs,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>Z1&&(this.reconnectDelay_=Qs),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let n=new Date().getTime()-this.lastConnectionAttemptTime_,r=Math.max(0,this.reconnectDelay_-n);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*Q1)}this.onConnectStatus_(!1)}establishConnection_(){return w(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+e.nextConnectionId_++,s=this.lastSessionId,a=!1,c=null,l=function(){c?c.close():(a=!0,i())},u=function(f){_(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(f)};this.realtime_={close:l,sendRequest:u};let d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[f,h]=yield Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);a?ze("getToken() completed but was canceled"):(ze("getToken() completed. Creating connection."),this.authToken_=f&&f.accessToken,this.appCheckToken_=h&&h.token,c=new fg(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,n,r,i,p=>{tt(p+" ("+this.repoInfo_.toString()+")"),this.interrupt(J1)},s))}catch(f){this.log_("Failed to get token: "+f),a||(this.repoInfo_.nodeAdmin&&tt(f),l())}}})}interrupt(n){ze("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){ze("Resuming connection for reason: "+n),delete this.interruptReasons_[n],Ll(this.interruptReasons_)&&(this.reconnectDelay_=Qs,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){let r=n-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){let r=this.outstandingPuts_[n];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(n,r){let i;r?i=r.map(s=>tm(s)).join("$"):i="default";let o=this.removeListen_(n,i);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(n,r){let i=new ce(n).toString(),o;if(this.listens.has(i)){let s=this.listens.get(i);o=s.get(r),s.delete(r),s.size===0&&this.listens.delete(i)}else o=void 0;return o}onAuthRevoked_(n,r){ze("Auth token revoked: "+n+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(n==="invalid_token"||n==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=S0&&(this.reconnectDelay_=D0,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,r){ze("App check token revoked: "+n+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(n==="invalid_token"||n==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=S0&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let n of this.listens.values())for(let r of n.values())this.sendListen_(r);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){let n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){let n={},r="js";un()&&(this.repoInfo_.nodeAdmin?r="admin_node":r="node"),n["sdk."+r+"."+Xg.replace(/\./g,"-")]=1,Us()?n["framework.cordova"]=1:Fl()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){let n=Gl.getInstance().currentlyOnline();return Ll(this.interruptReasons_)&&n}}e.nextPersistentConnectionId_=0,e.nextConnectionId_=0;return e})(),G=class e{constructor(t,n){this.name=t,this.node=n}static Wrap(t,n){return new e(t,n)}};var ho=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,n){let r=new G(fo,t),i=new G(fo,n);return this.compare(r,i)!==0}minPost(){return G.MIN}};var Bl,Yl=class extends ho{static get __EMPTY_NODE(){return Bl}static set __EMPTY_NODE(t){Bl=t}compare(t,n){return Xr(t.name,n.name)}isDefinedOn(t){throw zr("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,n){return!1}minPost(){return G.MIN}maxPost(){return new G(Zr,Bl)}makePost(t,n){return _(typeof t=="string","KeyIndex indexValue must always be a string."),new G(t,Bl)}toString(){return".key"}},uo=new Yl;var co=class{constructor(t,n,r,i,o=null){this.isReverse_=i,this.resultGenerator_=o,this.nodeStack_=[];let s=1;for(;!t.isEmpty();)if(t=t,s=n?r(t.key,n):1,i&&(s*=-1),s<0)this.isReverse_?t=t.left:t=t.right;else if(s===0){this.nodeStack_.push(t);break}else this.nodeStack_.push(t),this.isReverse_?t=t.right:t=t.left}getNext(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(t.key,t.value):n={key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}},qt=(()=>{class e{constructor(n,r,i,o,s){this.key=n,this.value=r,this.color=i??e.RED,this.left=o??At.EMPTY_NODE,this.right=s??At.EMPTY_NODE}copy(n,r,i,o,s){return new e(n??this.key,r??this.value,i??this.color,o??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,r,i){let o=this,s=i(n,o.key);return s<0?o=o.copy(null,null,null,o.left.insert(n,r,i),null):s===0?o=o.copy(null,r,null,null,null):o=o.copy(null,null,null,null,o.right.insert(n,r,i)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return At.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,r){let i,o;if(i=this,r(n,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(n,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),r(n,i.key)===0){if(i.right.isEmpty())return At.EMPTY_NODE;o=i.right.min_(),i=i.copy(o.key,o.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(n,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){let n=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){let n=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){let n=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,r)}checkMaxDepth_(){let n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}return e.RED=!0,e.BLACK=!1,e})(),gg=class{copy(t,n,r,i,o){return this}insert(t,n,r){return new qt(t,n,null)}remove(t,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},At=class e{constructor(t,n=e.EMPTY_NODE){this.comparator_=t,this.root_=n}insert(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,qt.BLACK,null,null))}remove(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,qt.BLACK,null,null))}get(t){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(t,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(t){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(t,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new co(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,n){return new co(this.root_,t,this.comparator_,!1,n)}getReverseIteratorFrom(t,n){return new co(this.root_,t,this.comparator_,!0,n)}getReverseIterator(t){return new co(this.root_,null,this.comparator_,!0,t)}};At.EMPTY_NODE=new gg;function X1(e,t){return Xr(e.name,t.name)}function om(e,t){return Xr(e,t)}var mg;function eF(e){mg=e}var dE=function(e){return typeof e=="number"?"number:"+q0(e):"string:"+e},fE=function(e){if(e.isLeafNode()){let t=e.val();_(typeof t=="string"||typeof t=="number"||typeof t=="object"&&zt(t,".sv"),"Priority must be a string or number.")}else _(e===mg||e.isEmpty(),"priority of unexpected type.");_(e===mg||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var T0,po=(()=>{class e{constructor(n,r=e.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=r,this.lazyHash_=null,_(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),fE(this.priorityNode_)}static set __childrenNodeConstructor(n){T0=n}static get __childrenNodeConstructor(){return T0}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new e(this.value_,n)}getImmediateChild(n){return n===".priority"?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return K(n)?this:J(n)===".priority"?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,r){return null}updateImmediateChild(n,r){return n===".priority"?this.updatePriority(r):r.isEmpty()&&n!==".priority"?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,r).updatePriority(this.priorityNode_)}updateChild(n,r){let i=J(n);return i===null?r:r.isEmpty()&&i!==".priority"?this:(_(i!==".priority"||mr(n)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(ve(n),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,r){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+dE(this.priorityNode_.val())+":");let r=typeof this.value_;n+=r+":",r==="number"?n+=q0(this.value_):n+=this.value_,this.lazyHash_=W0(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===e.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof e.__childrenNodeConstructor?-1:(_(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){let r=typeof n.value_,i=typeof this.value_,o=e.VALUE_TYPE_ORDER.indexOf(r),s=e.VALUE_TYPE_ORDER.indexOf(i);return _(o>=0,"Unknown leaf type: "+r),_(s>=0,"Unknown leaf type: "+i),o===s?i==="object"?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:s-o}withIndex(){return this}isIndexed(){return!0}equals(n){if(n===this)return!0;if(n.isLeafNode()){let r=n;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}e.VALUE_TYPE_ORDER=["object","boolean","number","string"];return e})(),hE,pE;function tF(e){hE=e}function nF(e){pE=e}var vg=class extends ho{compare(t,n){let r=t.node.getPriority(),i=n.node.getPriority(),o=r.compareTo(i);return o===0?Xr(t.name,n.name):o}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,n){return!t.getPriority().equals(n.getPriority())}minPost(){return G.MIN}maxPost(){return new G(Zr,new po("[PRIORITY-POST]",pE))}makePost(t,n){let r=hE(t);return new G(n,new po("[PRIORITY-POST]",r))}toString(){return".priority"}},Ie=new vg;var rF=Math.log(2),yg=class{constructor(t){let n=o=>parseInt(Math.log(o)/rF,10),r=o=>parseInt(Array(o+1).join("1"),2);this.count=n(t+1),this.current_=this.count-1;let i=r(this.count);this.bits_=t+1&i}nextBitIsOne(){let t=!(this.bits_&1<<this.current_);return this.current_--,t}},Kl=function(e,t,n,r){e.sort(t);let i=function(c,l){let u=l-c,d,f;if(u===0)return null;if(u===1)return d=e[c],f=n?n(d):d,new qt(f,d.node,qt.BLACK,null,null);{let h=parseInt(u/2,10)+c,p=i(c,h),y=i(h+1,l);return d=e[h],f=n?n(d):d,new qt(f,d.node,qt.BLACK,p,y)}},o=function(c){let l=null,u=null,d=e.length,f=function(p,y){let E=d-p,M=d;d-=p;let se=i(E+1,M),me=e[E],Ae=n?n(me):me;h(new qt(Ae,me.node,y,null,se))},h=function(p){l?(l.left=p,l=p):(u=p,l=p)};for(let p=0;p<c.count;++p){let y=c.nextBitIsOne(),E=Math.pow(2,c.count-(p+1));y?f(E,qt.BLACK):(f(E,qt.BLACK),f(E,qt.RED))}return u},s=new yg(e.length),a=o(s);return new At(r||t,a)};var Zp,ao={},go=class e{constructor(t,n){this.indexes_=t,this.indexSet_=n}static get Default(){return _(ao&&Ie,"ChildrenNode.ts has not been loaded"),Zp=Zp||new e({".priority":ao},{".priority":Ie}),Zp}get(t){let n=qr(this.indexes_,t);if(!n)throw new Error("No index defined for "+t);return n instanceof At?n:null}hasIndex(t){return zt(this.indexSet_,t.toString())}addIndex(t,n){_(t!==uo,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let r=[],i=!1,o=n.getIterator(G.Wrap),s=o.getNext();for(;s;)i=i||t.isDefinedOn(s.node),r.push(s),s=o.getNext();let a;i?a=Kl(r,t.getCompare()):a=ao;let c=t.toString(),l=Object.assign({},this.indexSet_);l[c]=t;let u=Object.assign({},this.indexes_);return u[c]=a,new e(u,l)}addToIndexes(t,n){let r=Bs(this.indexes_,(i,o)=>{let s=qr(this.indexSet_,o);if(_(s,"Missing index implementation for "+o),i===ao)if(s.isDefinedOn(t.node)){let a=[],c=n.getIterator(G.Wrap),l=c.getNext();for(;l;)l.name!==t.name&&a.push(l),l=c.getNext();return a.push(t),Kl(a,s.getCompare())}else return ao;else{let a=n.get(t.name),c=i;return a&&(c=c.remove(new G(t.name,a))),c.insert(t,t.node)}});return new e(r,this.indexSet_)}removeFromIndexes(t,n){let r=Bs(this.indexes_,i=>{if(i===ao)return i;{let o=n.get(t.name);return o?i.remove(new G(t.name,o)):i}});return new e(r,this.indexSet_)}};var Zs,U=(()=>{class e{constructor(n,r,i){this.children_=n,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&fE(this.priorityNode_),this.children_.isEmpty()&&_(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Zs||(Zs=new e(new At(om),null,go.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Zs}updatePriority(n){return this.children_.isEmpty()?this:new e(this.children_,n,this.indexMap_)}getImmediateChild(n){if(n===".priority")return this.getPriority();{let r=this.children_.get(n);return r===null?Zs:r}}getChild(n){let r=J(n);return r===null?this:this.getImmediateChild(r).getChild(ve(n))}hasChild(n){return this.children_.get(n)!==null}updateImmediateChild(n,r){if(_(r,"We should always be passing snapshot nodes"),n===".priority")return this.updatePriority(r);{let i=new G(n,r),o,s;r.isEmpty()?(o=this.children_.remove(n),s=this.indexMap_.removeFromIndexes(i,this.children_)):(o=this.children_.insert(n,r),s=this.indexMap_.addToIndexes(i,this.children_));let a=o.isEmpty()?Zs:this.priorityNode_;return new e(o,a,s)}}updateChild(n,r){let i=J(n);if(i===null)return r;{_(J(n)!==".priority"||mr(n)===1,".priority must be the last token in a path");let o=this.getImmediateChild(i).updateChild(ve(n),r);return this.updateImmediateChild(i,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;let r={},i=0,o=0,s=!0;if(this.forEachChild(Ie,(a,c)=>{r[a]=c.val(n),i++,s&&e.INTEGER_REGEXP_.test(a)?o=Math.max(o,Number(a)):s=!1}),!n&&s&&o<2*i){let a=[];for(let c in r)a[c]=r[c];return a}else return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let n="";this.getPriority().isEmpty()||(n+="priority:"+dE(this.getPriority().val())+":"),this.forEachChild(Ie,(r,i)=>{let o=i.hash();o!==""&&(n+=":"+r+":"+o)}),this.lazyHash_=n===""?"":W0(n)}return this.lazyHash_}getPredecessorChildName(n,r,i){let o=this.resolveIndex_(i);if(o){let s=o.getPredecessorKey(new G(n,r));return s?s.name:null}else return this.children_.getPredecessorKey(n)}getFirstChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(n){let r=this.getFirstChildName(n);return r?new G(r,this.children_.get(r)):null}getLastChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(n){let r=this.getLastChildName(n);return r?new G(r,this.children_.get(r)):null}forEachChild(n,r){let i=this.resolveIndex_(n);return i?i.inorderTraversal(o=>r(o.name,o.node)):this.children_.inorderTraversal(r)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(n,o=>o);{let o=this.children_.getIteratorFrom(n.name,G.Wrap),s=o.peek();for(;s!=null&&r.compare(s,n)<0;)o.getNext(),s=o.peek();return o}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(n,o=>o);{let o=this.children_.getReverseIteratorFrom(n.name,G.Wrap),s=o.peek();for(;s!=null&&r.compare(s,n)>0;)o.getNext(),s=o.peek();return o}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===pa?-1:0}withIndex(n){if(n===uo||this.indexMap_.hasIndex(n))return this;{let r=this.indexMap_.addIndex(n,this.children_);return new e(this.children_,this.priorityNode_,r)}}isIndexed(n){return n===uo||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{let r=n;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){let i=this.getIterator(Ie),o=r.getIterator(Ie),s=i.getNext(),a=o.getNext();for(;s&&a;){if(s.name!==a.name||!s.node.equals(a.node))return!1;s=i.getNext(),a=o.getNext()}return s===null&&a===null}else return!1;else return!1}}resolveIndex_(n){return n===uo?null:this.indexMap_.get(n.toString())}}return e.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,e})(),_g=class extends U{constructor(){super(new At(om),U.EMPTY_NODE,go.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return U.EMPTY_NODE}isEmpty(){return!1}},pa=new _g;Object.defineProperties(G,{MIN:{value:new G(fo,U.EMPTY_NODE)},MAX:{value:new G(Zr,pa)}});Yl.__EMPTY_NODE=U.EMPTY_NODE;po.__childrenNodeConstructor=U;eF(pa);nF(pa);var iF=!0;function je(e,t=null){if(e===null)return U.EMPTY_NODE;if(typeof e=="object"&&".priority"in e&&(t=e[".priority"]),_(t===null||typeof t=="string"||typeof t=="number"||typeof t=="object"&&".sv"in t,"Invalid priority type found: "+typeof t),typeof e=="object"&&".value"in e&&e[".value"]!==null&&(e=e[".value"]),typeof e!="object"||".sv"in e){let n=e;return new po(n,je(t))}if(!(e instanceof Array)&&iF){let n=[],r=!1;if(qe(e,(s,a)=>{if(s.substring(0,1)!=="."){let c=je(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new G(s,c)))}}),n.length===0)return U.EMPTY_NODE;let o=Kl(n,X1,s=>s.name,om);if(r){let s=Kl(n,Ie.getCompare());return new U(o,je(t),new go({".priority":s},{".priority":Ie}))}else return new U(o,je(t),go.Default)}else{let n=U.EMPTY_NODE;return qe(e,(r,i)=>{if(zt(e,r)&&r.substring(0,1)!=="."){let o=je(i);(o.isLeafNode()||!o.isEmpty())&&(n=n.updateImmediateChild(r,o))}}),n.updatePriority(je(t))}}tF(je);var wg=class extends ho{constructor(t){super(),this.indexPath_=t,_(!K(t)&&J(t)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,n){let r=this.extractChild(t.node),i=this.extractChild(n.node),o=r.compareTo(i);return o===0?Xr(t.name,n.name):o}makePost(t,n){let r=je(t),i=U.EMPTY_NODE.updateChild(this.indexPath_,r);return new G(n,i)}maxPost(){let t=U.EMPTY_NODE.updateChild(this.indexPath_,pa);return new G(Zr,t)}toString(){return ia(this.indexPath_,0).join("/")}};var Cg=class extends ho{compare(t,n){let r=t.node.compareTo(n.node);return r===0?Xr(t.name,n.name):r}isDefinedOn(t){return!0}indexedValueChanged(t,n){return!t.equals(n)}minPost(){return G.MIN}maxPost(){return G.MAX}makePost(t,n){let r=je(t);return new G(n,r)}toString(){return".value"}},oF=new Cg;function gE(e){return{type:"value",snapshotNode:e}}function mo(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function oa(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function sa(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}function sF(e,t){return{type:"child_moved",snapshotNode:t,childName:e}}var aa=class{constructor(t){this.index_=t}updateChild(t,n,r,i,o,s){_(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");let a=t.getImmediateChild(n);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(s!=null&&(r.isEmpty()?t.hasChild(n)?s.trackChildChange(oa(n,a)):_(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(mo(n,r)):s.trackChildChange(sa(n,r,a))),t.isLeafNode()&&r.isEmpty())?t:t.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(t,n,r){return r!=null&&(t.isLeafNode()||t.forEachChild(Ie,(i,o)=>{n.hasChild(i)||r.trackChildChange(oa(i,o))}),n.isLeafNode()||n.forEachChild(Ie,(i,o)=>{if(t.hasChild(i)){let s=t.getImmediateChild(i);s.equals(o)||r.trackChildChange(sa(i,o,s))}else r.trackChildChange(mo(i,o))})),n.withIndex(this.index_)}updatePriority(t,n){return t.isEmpty()?U.EMPTY_NODE:t.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}};var Ql=class e{constructor(t){this.indexedFilter_=new aa(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){let n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),t)<=0:this.index_.compare(this.getStartPost(),t)<0,r=this.endIsInclusive_?this.index_.compare(t,this.getEndPost())<=0:this.index_.compare(t,this.getEndPost())<0;return n&&r}updateChild(t,n,r,i,o,s){return this.matches(new G(n,r))||(r=U.EMPTY_NODE),this.indexedFilter_.updateChild(t,n,r,i,o,s)}updateFullNode(t,n,r){n.isLeafNode()&&(n=U.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(U.EMPTY_NODE);let o=this;return n.forEachChild(Ie,(s,a)=>{o.matches(new G(s,a))||(i=i.updateImmediateChild(s,U.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,i,r)}updatePriority(t,n){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){let n=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),n)}else return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){let n=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),n)}else return t.getIndex().maxPost()}};var Ig=class{constructor(t){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{let r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{let r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new Ql(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft(),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}updateChild(t,n,r,i,o,s){return this.rangedFilter_.matches(new G(n,r))||(r=U.EMPTY_NODE),t.getImmediateChild(n).equals(r)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,n,r,i,o,s):this.fullLimitUpdateChild_(t,n,r,o,s)}updateFullNode(t,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=U.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=U.EMPTY_NODE.withIndex(this.index_);let o;this.reverse_?o=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):o=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let s=0;for(;o.hasNext()&&s<this.limit_;){let a=o.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))i=i.updateImmediateChild(a.name,a.node),s++;else break;else continue}}else{i=n.withIndex(this.index_),i=i.updatePriority(U.EMPTY_NODE);let o;this.reverse_?o=i.getReverseIterator(this.index_):o=i.getIterator(this.index_);let s=0;for(;o.hasNext();){let a=o.getNext();s<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?s++:i=i.updateImmediateChild(a.name,U.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,i,r)}updatePriority(t,n){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,n,r,i,o){let s;if(this.reverse_){let d=this.index_.getCompare();s=(f,h)=>d(h,f)}else s=this.index_.getCompare();let a=t;_(a.numChildren()===this.limit_,"");let c=new G(n,r),l=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(c);if(a.hasChild(n)){let d=a.getImmediateChild(n),f=i.getChildAfterChild(this.index_,l,this.reverse_);for(;f!=null&&(f.name===n||a.hasChild(f.name));)f=i.getChildAfterChild(this.index_,f,this.reverse_);let h=f==null?1:s(f,c);if(u&&!r.isEmpty()&&h>=0)return o?.trackChildChange(sa(n,r,d)),a.updateImmediateChild(n,r);{o?.trackChildChange(oa(n,d));let y=a.updateImmediateChild(n,U.EMPTY_NODE);return f!=null&&this.rangedFilter_.matches(f)?(o?.trackChildChange(mo(f.name,f.node)),y.updateImmediateChild(f.name,f.node)):y}}else return r.isEmpty()?t:u&&s(l,c)>=0?(o!=null&&(o.trackChildChange(oa(l.name,l.node)),o.trackChildChange(mo(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(l.name,U.EMPTY_NODE)):t}};var Eg=class e{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ie}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return _(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return _(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:fo}hasEnd(){return this.endSet_}getIndexEndValue(){return _(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return _(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Zr}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return _(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Ie}copy(){let t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}};function aF(e){return e.loadsAllData()?new aa(e.getIndex()):e.hasLimit()?new Ig(e):new Ql(e)}function M0(e){let t={};if(e.isDefault())return t;let n;if(e.index_===Ie?n="$priority":e.index_===oF?n="$value":e.index_===uo?n="$key":(_(e.index_ instanceof wg,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=Te(n),e.startSet_){let r=e.startAfterSet_?"startAfter":"startAt";t[r]=Te(e.indexStartValue_),e.startNameSet_&&(t[r]+=","+Te(e.indexStartName_))}if(e.endSet_){let r=e.endBeforeSet_?"endBefore":"endAt";t[r]=Te(e.indexEndValue_),e.endNameSet_&&(t[r]+=","+Te(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function A0(e){let t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;n===""&&(e.isViewFromLeft()?n="l":n="r"),t.vf=n}return e.index_!==Ie&&(t.i=e.index_.toString()),t}var bg=class e extends zl{constructor(t,n,r,i){super(),this.repoInfo_=t,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=ha("p:rest:"),this.listens_={}}reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,n){return n!==void 0?"tag$"+n:(_(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}listen(t,n,r,i){let o=t._path.toString();this.log_("Listen called for "+o+" "+t._queryIdentifier);let s=e.getListenId_(t,r),a={};this.listens_[s]=a;let c=M0(t._queryParams);this.restRequest_(o+".json",c,(l,u)=>{let d=u;if(l===404&&(d=null,l=null),l===null&&this.onDataUpdate_(o,d,!1,r),qr(this.listens_,s)===a){let f;l?l===401?f="permission_denied":f="rest_error:"+l:f="ok",i(f,null)}})}unlisten(t,n){let r=e.getListenId_(t,n);delete this.listens_[r]}get(t){let n=M0(t._queryParams),r=t._path.toString(),i=new jn;return this.restRequest_(r+".json",n,(o,s)=>{let a=s;o===404&&(a=null,o=null),o===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(t){}restRequest_(t,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,o])=>{i&&i.accessToken&&(n.auth=i.accessToken),o&&o.token&&(n.ac=o.token);let s=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+Hs(n);this.log_("Sending REST request for "+s);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+s+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=io(a.responseText)}catch{tt("Failed to parse JSON response for "+s+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&tt("Got unsuccessful REST response for "+s+" Status: "+a.status),r(a.status);r=null}},a.open("GET",s,!0),a.send()})}};var Dg=class{constructor(){this.rootNode_=U.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,n){this.rootNode_=this.rootNode_.updateChild(t,n)}};function Zl(){return{value:null,children:new Map}}function mE(e,t,n){if(K(t))e.value=n,e.children.clear();else if(e.value!==null)e.value=e.value.updateChild(t,n);else{let r=J(t);e.children.has(r)||e.children.set(r,Zl());let i=e.children.get(r);t=ve(t),mE(i,t,n)}}function Sg(e,t,n){e.value!==null?n(t,e.value):cF(e,(r,i)=>{let o=new ce(t.toString()+"/"+r);Sg(i,o,n)})}function cF(e,t){e.children.forEach((n,r)=>{t(r,n)})}var Tg=class{constructor(t){this.collection_=t,this.last_=null}get(){let t=this.collection_.get(),n=Object.assign({},t);return this.last_&&qe(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=t,n}};var N0=10*1e3,lF=30*1e3,uF=5*60*1e3,Mg=class{constructor(t,n){this.server_=n,this.statsToReport_={},this.statsListener_=new Tg(t);let r=N0+(lF-N0)*Math.random();Xs(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){let t=this.statsListener_.get(),n={},r=!1;qe(t,(i,o)=>{o>0&&zt(this.statsToReport_,i)&&(n[i]=o,r=!0)}),r&&this.server_.reportStats(n),Xs(this.reportStats_.bind(this),Math.floor(Math.random()*2*uF))}};var fn=function(e){return e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",e}(fn||{});function sm(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function am(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function cm(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}var Ag=class e{constructor(t,n,r){this.path=t,this.affectedTree=n,this.revert=r,this.type=fn.ACK_USER_WRITE,this.source=sm()}operationForChild(t){if(K(this.path)){if(this.affectedTree.value!=null)return _(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let n=this.affectedTree.subtree(new ce(t));return new e(te(),n,this.revert)}}else return _(J(this.path)===t,"operationForChild called for unrelated child."),new e(ve(this.path),this.affectedTree,this.revert)}};var Jl=class e{constructor(t,n){this.source=t,this.path=n,this.type=fn.LISTEN_COMPLETE}operationForChild(t){return K(this.path)?new e(this.source,te()):new e(this.source,ve(this.path))}};var vo=class e{constructor(t,n,r){this.source=t,this.path=n,this.snap=r,this.type=fn.OVERWRITE}operationForChild(t){return K(this.path)?new e(this.source,te(),this.snap.getImmediateChild(t)):new e(this.source,ve(this.path),this.snap)}};var ca=class e{constructor(t,n,r){this.source=t,this.path=n,this.children=r,this.type=fn.MERGE}operationForChild(t){if(K(this.path)){let n=this.children.subtree(new ce(t));return n.isEmpty()?null:n.value?new vo(this.source,te(),n.value):new e(this.source,te(),n)}else return _(J(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,ve(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var hn=class{constructor(t,n,r){this.node_=t,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(K(t))return this.isFullyInitialized()&&!this.filtered_;let n=J(t);return this.isCompleteForChild(n)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}};var Ng=class{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}};function dF(e,t,n,r){let i=[],o=[];return t.forEach(s=>{s.type==="child_changed"&&e.index_.indexedValueChanged(s.oldSnap,s.snapshotNode)&&o.push(sF(s.childName,s.snapshotNode))}),Js(e,i,"child_removed",t,r,n),Js(e,i,"child_added",t,r,n),Js(e,i,"child_moved",o,r,n),Js(e,i,"child_changed",t,r,n),Js(e,i,"value",t,r,n),i}function Js(e,t,n,r,i,o){let s=r.filter(a=>a.type===n);s.sort((a,c)=>hF(e,a,c)),s.forEach(a=>{let c=fF(e,a,o);i.forEach(l=>{l.respondsTo(a.type)&&t.push(l.createEvent(c,e.query_))})})}function fF(e,t,n){return t.type==="value"||t.type==="child_removed"||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}function hF(e,t,n){if(t.childName==null||n.childName==null)throw zr("Should only compare child_ events.");let r=new G(t.childName,t.snapshotNode),i=new G(n.childName,n.snapshotNode);return e.index_.compare(r,i)}function cu(e,t){return{eventCache:e,serverCache:t}}function ta(e,t,n,r){return cu(new hn(t,n,r),e.serverCache)}function vE(e,t,n,r){return cu(e.eventCache,new hn(t,n,r))}function Xl(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function Jr(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}var Jp,pF=()=>(Jp||(Jp=new At(p1)),Jp),nt=class e{constructor(t,n=pF()){this.value=t,this.children=n}static fromObject(t){let n=new e(null);return qe(t,(r,i)=>{n=n.set(new ce(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,n){if(this.value!=null&&n(this.value))return{path:te(),value:this.value};if(K(t))return null;{let r=J(t),i=this.children.get(r);if(i!==null){let o=i.findRootMostMatchingPathAndValue(ve(t),n);return o!=null?{path:Ce(new ce(r),o.path),value:o.value}:null}else return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(K(t))return this;{let n=J(t),r=this.children.get(n);return r!==null?r.subtree(ve(t)):new e(null)}}set(t,n){if(K(t))return new e(n,this.children);{let r=J(t),o=(this.children.get(r)||new e(null)).set(ve(t),n),s=this.children.insert(r,o);return new e(this.value,s)}}remove(t){if(K(t))return this.children.isEmpty()?new e(null):new e(null,this.children);{let n=J(t),r=this.children.get(n);if(r){let i=r.remove(ve(t)),o;return i.isEmpty()?o=this.children.remove(n):o=this.children.insert(n,i),this.value===null&&o.isEmpty()?new e(null):new e(this.value,o)}else return this}}get(t){if(K(t))return this.value;{let n=J(t),r=this.children.get(n);return r?r.get(ve(t)):null}}setTree(t,n){if(K(t))return n;{let r=J(t),o=(this.children.get(r)||new e(null)).setTree(ve(t),n),s;return o.isEmpty()?s=this.children.remove(r):s=this.children.insert(r,o),new e(this.value,s)}}fold(t){return this.fold_(te(),t)}fold_(t,n){let r={};return this.children.inorderTraversal((i,o)=>{r[i]=o.fold_(Ce(t,i),n)}),n(t,this.value,r)}findOnPath(t,n){return this.findOnPath_(t,te(),n)}findOnPath_(t,n,r){let i=this.value?r(n,this.value):!1;if(i)return i;if(K(t))return null;{let o=J(t),s=this.children.get(o);return s?s.findOnPath_(ve(t),Ce(n,o),r):null}}foreachOnPath(t,n){return this.foreachOnPath_(t,te(),n)}foreachOnPath_(t,n,r){if(K(t))return this;{this.value&&r(n,this.value);let i=J(t),o=this.children.get(i);return o?o.foreachOnPath_(ve(t),Ce(n,i),r):new e(null)}}foreach(t){this.foreach_(te(),t)}foreach_(t,n){this.children.inorderTraversal((r,i)=>{i.foreach_(Ce(t,r),n)}),this.value&&n(t,this.value)}foreachChild(t){this.children.inorderTraversal((n,r)=>{r.value&&t(n,r.value)})}};var Gt=class e{constructor(t){this.writeTree_=t}static empty(){return new e(new nt(null))}};function na(e,t,n){if(K(t))return new Gt(new nt(n));{let r=e.writeTree_.findRootMostValueAndPath(t);if(r!=null){let i=r.path,o=r.value,s=et(i,t);return o=o.updateChild(s,n),new Gt(e.writeTree_.set(i,o))}else{let i=new nt(n),o=e.writeTree_.setTree(t,i);return new Gt(o)}}}function xg(e,t,n){let r=e;return qe(n,(i,o)=>{r=na(r,Ce(t,i),o)}),r}function x0(e,t){if(K(t))return Gt.empty();{let n=e.writeTree_.setTree(t,new nt(null));return new Gt(n)}}function Rg(e,t){return ei(e,t)!=null}function ei(e,t){let n=e.writeTree_.findRootMostValueAndPath(t);return n!=null?e.writeTree_.get(n.path).getChild(et(n.path,t)):null}function R0(e){let t=[],n=e.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Ie,(r,i)=>{t.push(new G(r,i))}):e.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&t.push(new G(r,i.value))}),t}function pr(e,t){if(K(t))return e;{let n=ei(e,t);return n!=null?new Gt(new nt(n)):new Gt(e.writeTree_.subtree(t))}}function Og(e){return e.writeTree_.isEmpty()}function yo(e,t){return yE(te(),e.writeTree_,t)}function yE(e,t,n){if(t.value!=null)return n.updateChild(e,t.value);{let r=null;return t.children.inorderTraversal((i,o)=>{i===".priority"?(_(o.value!==null,"Priority writes must always be leaf nodes"),r=o.value):n=yE(Ce(e,i),o,n)}),!n.getChild(e).isEmpty()&&r!==null&&(n=n.updateChild(Ce(e,".priority"),r)),n}}function lu(e,t){return IE(t,e)}function gF(e,t,n,r,i){_(r>e.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=na(e.visibleWrites,t,n)),e.lastWriteId=r}function mF(e,t,n,r){_(r>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:n,writeId:r,visible:!0}),e.visibleWrites=xg(e.visibleWrites,t,n),e.lastWriteId=r}function vF(e,t){for(let n=0;n<e.allWrites.length;n++){let r=e.allWrites[n];if(r.writeId===t)return r}return null}function yF(e,t){let n=e.allWrites.findIndex(a=>a.writeId===t);_(n>=0,"removeWrite called with nonexistent writeId.");let r=e.allWrites[n];e.allWrites.splice(n,1);let i=r.visible,o=!1,s=e.allWrites.length-1;for(;i&&s>=0;){let a=e.allWrites[s];a.visible&&(s>=n&&_F(a,r.path)?i=!1:Mt(r.path,a.path)&&(o=!0)),s--}if(i){if(o)return wF(e),!0;if(r.snap)e.visibleWrites=x0(e.visibleWrites,r.path);else{let a=r.children;qe(a,c=>{e.visibleWrites=x0(e.visibleWrites,Ce(r.path,c))})}return!0}else return!1}function _F(e,t){if(e.snap)return Mt(e.path,t);for(let n in e.children)if(e.children.hasOwnProperty(n)&&Mt(Ce(e.path,n),t))return!0;return!1}function wF(e){e.visibleWrites=_E(e.allWrites,CF,te()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}function CF(e){return e.visible}function _E(e,t,n){let r=Gt.empty();for(let i=0;i<e.length;++i){let o=e[i];if(t(o)){let s=o.path,a;if(o.snap)Mt(n,s)?(a=et(n,s),r=na(r,a,o.snap)):Mt(s,n)&&(a=et(s,n),r=na(r,te(),o.snap.getChild(a)));else if(o.children){if(Mt(n,s))a=et(n,s),r=xg(r,a,o.children);else if(Mt(s,n))if(a=et(s,n),K(a))r=xg(r,te(),o.children);else{let c=qr(o.children,J(a));if(c){let l=c.getChild(ve(a));r=na(r,te(),l)}}}else throw zr("WriteRecord should have .snap or .children")}}return r}function wE(e,t,n,r,i){if(!r&&!i){let o=ei(e.visibleWrites,t);if(o!=null)return o;{let s=pr(e.visibleWrites,t);if(Og(s))return n;if(n==null&&!Rg(s,te()))return null;{let a=n||U.EMPTY_NODE;return yo(s,a)}}}else{let o=pr(e.visibleWrites,t);if(!i&&Og(o))return n;if(!i&&n==null&&!Rg(o,te()))return null;{let s=function(l){return(l.visible||i)&&(!r||!~r.indexOf(l.writeId))&&(Mt(l.path,t)||Mt(t,l.path))},a=_E(e.allWrites,s,t),c=n||U.EMPTY_NODE;return yo(a,c)}}}function IF(e,t,n){let r=U.EMPTY_NODE,i=ei(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(Ie,(o,s)=>{r=r.updateImmediateChild(o,s)}),r;if(n){let o=pr(e.visibleWrites,t);return n.forEachChild(Ie,(s,a)=>{let c=yo(pr(o,new ce(s)),a);r=r.updateImmediateChild(s,c)}),R0(o).forEach(s=>{r=r.updateImmediateChild(s.name,s.node)}),r}else{let o=pr(e.visibleWrites,t);return R0(o).forEach(s=>{r=r.updateImmediateChild(s.name,s.node)}),r}}function EF(e,t,n,r,i){_(r||i,"Either existingEventSnap or existingServerSnap must exist");let o=Ce(t,n);if(Rg(e.visibleWrites,o))return null;{let s=pr(e.visibleWrites,o);return Og(s)?i.getChild(n):yo(s,i.getChild(n))}}function bF(e,t,n,r){let i=Ce(t,n),o=ei(e.visibleWrites,i);if(o!=null)return o;if(r.isCompleteForChild(n)){let s=pr(e.visibleWrites,i);return yo(s,r.getNode().getImmediateChild(n))}else return null}function DF(e,t){return ei(e.visibleWrites,t)}function SF(e,t,n,r,i,o,s){let a,c=pr(e.visibleWrites,t),l=ei(c,te());if(l!=null)a=l;else if(n!=null)a=yo(c,n);else return[];if(a=a.withIndex(s),!a.isEmpty()&&!a.isLeafNode()){let u=[],d=s.getCompare(),f=o?a.getReverseIteratorFrom(r,s):a.getIteratorFrom(r,s),h=f.getNext();for(;h&&u.length<i;)d(h,r)!==0&&u.push(h),h=f.getNext();return u}else return[]}function TF(){return{visibleWrites:Gt.empty(),allWrites:[],lastWriteId:-1}}function eu(e,t,n,r){return wE(e.writeTree,e.treePath,t,n,r)}function lm(e,t){return IF(e.writeTree,e.treePath,t)}function O0(e,t,n,r){return EF(e.writeTree,e.treePath,t,n,r)}function tu(e,t){return DF(e.writeTree,Ce(e.treePath,t))}function MF(e,t,n,r,i,o){return SF(e.writeTree,e.treePath,t,n,r,i,o)}function um(e,t,n){return bF(e.writeTree,e.treePath,t,n)}function CE(e,t){return IE(Ce(e.treePath,t),e.writeTree)}function IE(e,t){return{treePath:e,writeTree:t}}var Pg=class{constructor(){this.changeMap=new Map}trackChildChange(t){let n=t.type,r=t.childName;_(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),_(r!==".priority","Only non-priority child changes can be tracked.");let i=this.changeMap.get(r);if(i){let o=i.type;if(n==="child_added"&&o==="child_removed")this.changeMap.set(r,sa(r,t.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&o==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&o==="child_changed")this.changeMap.set(r,oa(r,i.oldSnap));else if(n==="child_changed"&&o==="child_added")this.changeMap.set(r,mo(r,t.snapshotNode));else if(n==="child_changed"&&o==="child_changed")this.changeMap.set(r,sa(r,t.snapshotNode,i.oldSnap));else throw zr("Illegal combination of changes: "+t+" occurred after "+i)}else this.changeMap.set(r,t)}getChanges(){return Array.from(this.changeMap.values())}};var kg=class{getCompleteChild(t){return null}getChildAfterChild(t,n,r){return null}},EE=new kg,la=class{constructor(t,n,r=null){this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(t){let n=this.viewCache_.eventCache;if(n.isCompleteForChild(t))return n.getNode().getImmediateChild(t);{let r=this.optCompleteServerCache_!=null?new hn(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return um(this.writes_,t,r)}}getChildAfterChild(t,n,r){let i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Jr(this.viewCache_),o=MF(this.writes_,i,n,1,r,t);return o.length===0?null:o[0]}};function AF(e){return{filter:e}}function NF(e,t){_(t.eventCache.getNode().isIndexed(e.filter.getIndex()),"Event snap not indexed"),_(t.serverCache.getNode().isIndexed(e.filter.getIndex()),"Server snap not indexed")}function xF(e,t,n,r,i){let o=new Pg,s,a;if(n.type===fn.OVERWRITE){let l=n;l.source.fromUser?s=Fg(e,t,l.path,l.snap,r,i,o):(_(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered()&&!K(l.path),s=nu(e,t,l.path,l.snap,r,i,a,o))}else if(n.type===fn.MERGE){let l=n;l.source.fromUser?s=OF(e,t,l.path,l.children,r,i,o):(_(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered(),s=Lg(e,t,l.path,l.children,r,i,a,o))}else if(n.type===fn.ACK_USER_WRITE){let l=n;l.revert?s=FF(e,t,l.path,r,i,o):s=PF(e,t,l.path,l.affectedTree,r,i,o)}else if(n.type===fn.LISTEN_COMPLETE)s=kF(e,t,n.path,r,o);else throw zr("Unknown operation type: "+n.type);let c=o.getChanges();return RF(t,s,c),{viewCache:s,changes:c}}function RF(e,t,n){let r=t.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=Xl(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(gE(Xl(t)))}}function bE(e,t,n,r,i,o){let s=t.eventCache;if(tu(r,n)!=null)return t;{let a,c;if(K(n))if(_(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){let l=Jr(t),u=l instanceof U?l:U.EMPTY_NODE,d=lm(r,u);a=e.filter.updateFullNode(t.eventCache.getNode(),d,o)}else{let l=eu(r,Jr(t));a=e.filter.updateFullNode(t.eventCache.getNode(),l,o)}else{let l=J(n);if(l===".priority"){_(mr(n)===1,"Can't have a priority with additional path components");let u=s.getNode();c=t.serverCache.getNode();let d=O0(r,n,u,c);d!=null?a=e.filter.updatePriority(u,d):a=s.getNode()}else{let u=ve(n),d;if(s.isCompleteForChild(l)){c=t.serverCache.getNode();let f=O0(r,n,s.getNode(),c);f!=null?d=s.getNode().getImmediateChild(l).updateChild(u,f):d=s.getNode().getImmediateChild(l)}else d=um(r,l,t.serverCache);d!=null?a=e.filter.updateChild(s.getNode(),l,d,u,i,o):a=s.getNode()}}return ta(t,a,s.isFullyInitialized()||K(n),e.filter.filtersNodes())}}function nu(e,t,n,r,i,o,s,a){let c=t.serverCache,l,u=s?e.filter:e.filter.getIndexedFilter();if(K(n))l=u.updateFullNode(c.getNode(),r,null);else if(u.filtersNodes()&&!c.isFiltered()){let h=c.getNode().updateChild(n,r);l=u.updateFullNode(c.getNode(),h,null)}else{let h=J(n);if(!c.isCompleteForPath(n)&&mr(n)>1)return t;let p=ve(n),E=c.getNode().getImmediateChild(h).updateChild(p,r);h===".priority"?l=u.updatePriority(c.getNode(),E):l=u.updateChild(c.getNode(),h,E,p,EE,null)}let d=vE(t,l,c.isFullyInitialized()||K(n),u.filtersNodes()),f=new la(i,d,o);return bE(e,d,n,i,f,a)}function Fg(e,t,n,r,i,o,s){let a=t.eventCache,c,l,u=new la(i,t,o);if(K(n))l=e.filter.updateFullNode(t.eventCache.getNode(),r,s),c=ta(t,l,!0,e.filter.filtersNodes());else{let d=J(n);if(d===".priority")l=e.filter.updatePriority(t.eventCache.getNode(),r),c=ta(t,l,a.isFullyInitialized(),a.isFiltered());else{let f=ve(n),h=a.getNode().getImmediateChild(d),p;if(K(f))p=r;else{let y=u.getCompleteChild(d);y!=null?rm(f)===".priority"&&y.getChild(cE(f)).isEmpty()?p=y:p=y.updateChild(f,r):p=U.EMPTY_NODE}if(h.equals(p))c=t;else{let y=e.filter.updateChild(a.getNode(),d,p,f,u,s);c=ta(t,y,a.isFullyInitialized(),e.filter.filtersNodes())}}}return c}function P0(e,t){return e.eventCache.isCompleteForChild(t)}function OF(e,t,n,r,i,o,s){let a=t;return r.foreach((c,l)=>{let u=Ce(n,c);P0(t,J(u))&&(a=Fg(e,a,u,l,i,o,s))}),r.foreach((c,l)=>{let u=Ce(n,c);P0(t,J(u))||(a=Fg(e,a,u,l,i,o,s))}),a}function k0(e,t,n){return n.foreach((r,i)=>{t=t.updateChild(r,i)}),t}function Lg(e,t,n,r,i,o,s,a){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let c=t,l;K(n)?l=r:l=new nt(null).setTree(n,r);let u=t.serverCache.getNode();return l.children.inorderTraversal((d,f)=>{if(u.hasChild(d)){let h=t.serverCache.getNode().getImmediateChild(d),p=k0(e,h,f);c=nu(e,c,new ce(d),p,i,o,s,a)}}),l.children.inorderTraversal((d,f)=>{let h=!t.serverCache.isCompleteForChild(d)&&f.value===null;if(!u.hasChild(d)&&!h){let p=t.serverCache.getNode().getImmediateChild(d),y=k0(e,p,f);c=nu(e,c,new ce(d),y,i,o,s,a)}}),c}function PF(e,t,n,r,i,o,s){if(tu(i,n)!=null)return t;let a=t.serverCache.isFiltered(),c=t.serverCache;if(r.value!=null){if(K(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return nu(e,t,n,c.getNode().getChild(n),i,o,a,s);if(K(n)){let l=new nt(null);return c.getNode().forEachChild(uo,(u,d)=>{l=l.set(new ce(u),d)}),Lg(e,t,n,l,i,o,a,s)}else return t}else{let l=new nt(null);return r.foreach((u,d)=>{let f=Ce(n,u);c.isCompleteForPath(f)&&(l=l.set(u,c.getNode().getChild(f)))}),Lg(e,t,n,l,i,o,a,s)}}function kF(e,t,n,r,i){let o=t.serverCache,s=vE(t,o.getNode(),o.isFullyInitialized()||K(n),o.isFiltered());return bE(e,s,n,r,EE,i)}function FF(e,t,n,r,i,o){let s;if(tu(r,n)!=null)return t;{let a=new la(r,t,i),c=t.eventCache.getNode(),l;if(K(n)||J(n)===".priority"){let u;if(t.serverCache.isFullyInitialized())u=eu(r,Jr(t));else{let d=t.serverCache.getNode();_(d instanceof U,"serverChildren would be complete if leaf node"),u=lm(r,d)}u=u,l=e.filter.updateFullNode(c,u,o)}else{let u=J(n),d=um(r,u,t.serverCache);d==null&&t.serverCache.isCompleteForChild(u)&&(d=c.getImmediateChild(u)),d!=null?l=e.filter.updateChild(c,u,d,ve(n),a,o):t.eventCache.getNode().hasChild(u)?l=e.filter.updateChild(c,u,U.EMPTY_NODE,ve(n),a,o):l=c,l.isEmpty()&&t.serverCache.isFullyInitialized()&&(s=eu(r,Jr(t)),s.isLeafNode()&&(l=e.filter.updateFullNode(l,s,o)))}return s=t.serverCache.isFullyInitialized()||tu(r,te())!=null,ta(t,l,s,e.filter.filtersNodes())}}var Vg=class{constructor(t,n){this.query_=t,this.eventRegistrations_=[];let r=this.query_._queryParams,i=new aa(r.getIndex()),o=aF(r);this.processor_=AF(o);let s=n.serverCache,a=n.eventCache,c=i.updateFullNode(U.EMPTY_NODE,s.getNode(),null),l=o.updateFullNode(U.EMPTY_NODE,a.getNode(),null),u=new hn(c,s.isFullyInitialized(),i.filtersNodes()),d=new hn(l,a.isFullyInitialized(),o.filtersNodes());this.viewCache_=cu(d,u),this.eventGenerator_=new Ng(this.query_)}get query(){return this.query_}};function LF(e){return e.viewCache_.serverCache.getNode()}function VF(e){return Xl(e.viewCache_)}function jF(e,t){let n=Jr(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!K(t)&&!n.getImmediateChild(J(t)).isEmpty())?n.getChild(t):null}function F0(e){return e.eventRegistrations_.length===0}function UF(e,t){e.eventRegistrations_.push(t)}function L0(e,t,n){let r=[];if(n){_(t==null,"A cancel should cancel all event registrations.");let i=e.query._path;e.eventRegistrations_.forEach(o=>{let s=o.createCancelEvent(n,i);s&&r.push(s)})}if(t){let i=[];for(let o=0;o<e.eventRegistrations_.length;++o){let s=e.eventRegistrations_[o];if(!s.matches(t))i.push(s);else if(t.hasAnyCallback()){i=i.concat(e.eventRegistrations_.slice(o+1));break}}e.eventRegistrations_=i}else e.eventRegistrations_=[];return r}function V0(e,t,n,r){t.type===fn.MERGE&&t.source.queryId!==null&&(_(Jr(e.viewCache_),"We should always have a full cache before handling merges"),_(Xl(e.viewCache_),"Missing event cache, even though we have a server cache"));let i=e.viewCache_,o=xF(e.processor_,i,t,n,r);return NF(e.processor_,o.viewCache),_(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=o.viewCache,DE(e,o.changes,o.viewCache.eventCache.getNode(),null)}function BF(e,t){let n=e.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Ie,(o,s)=>{r.push(mo(o,s))}),n.isFullyInitialized()&&r.push(gE(n.getNode())),DE(e,r,n.getNode(),t)}function DE(e,t,n,r){let i=r?[r]:e.eventRegistrations_;return dF(e.eventGenerator_,t,n,i)}var ru,iu=class{constructor(){this.views=new Map}};function $F(e){_(!ru,"__referenceConstructor has already been defined"),ru=e}function HF(){return _(ru,"Reference.ts has not been loaded"),ru}function WF(e){return e.views.size===0}function dm(e,t,n,r){let i=t.source.queryId;if(i!==null){let o=e.views.get(i);return _(o!=null,"SyncTree gave us an op for an invalid query."),V0(o,t,n,r)}else{let o=[];for(let s of e.views.values())o=o.concat(V0(s,t,n,r));return o}}function SE(e,t,n,r,i){let o=t._queryIdentifier,s=e.views.get(o);if(!s){let a=eu(n,i?r:null),c=!1;a?c=!0:r instanceof U?(a=lm(n,r),c=!1):(a=U.EMPTY_NODE,c=!1);let l=cu(new hn(a,c,!1),new hn(r,i,!1));return new Vg(t,l)}return s}function zF(e,t,n,r,i,o){let s=SE(e,t,r,i,o);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,s),UF(s,n),BF(s,n)}function qF(e,t,n,r){let i=t._queryIdentifier,o=[],s=[],a=vr(e);if(i==="default")for(let[c,l]of e.views.entries())s=s.concat(L0(l,n,r)),F0(l)&&(e.views.delete(c),l.query._queryParams.loadsAllData()||o.push(l.query));else{let c=e.views.get(i);c&&(s=s.concat(L0(c,n,r)),F0(c)&&(e.views.delete(i),c.query._queryParams.loadsAllData()||o.push(c.query)))}return a&&!vr(e)&&o.push(new(HF())(t._repo,t._path)),{removed:o,events:s}}function TE(e){let t=[];for(let n of e.views.values())n.query._queryParams.loadsAllData()||t.push(n);return t}function gr(e,t){let n=null;for(let r of e.views.values())n=n||jF(r,t);return n}function ME(e,t){if(t._queryParams.loadsAllData())return uu(e);{let r=t._queryIdentifier;return e.views.get(r)}}function AE(e,t){return ME(e,t)!=null}function vr(e){return uu(e)!=null}function uu(e){for(let t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}var ou;function GF(e){_(!ou,"__referenceConstructor has already been defined"),ou=e}function YF(){return _(ou,"Reference.ts has not been loaded"),ou}var KF=1,su=class{constructor(t){this.listenProvider_=t,this.syncPointTree_=new nt(null),this.pendingWriteTree_=TF(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function NE(e,t,n,r,i){return gF(e.pendingWriteTree_,t,n,r,i),i?Co(e,new vo(sm(),t,n)):[]}function QF(e,t,n,r){mF(e.pendingWriteTree_,t,n,r);let i=nt.fromObject(n);return Co(e,new ca(sm(),t,i))}function hr(e,t,n=!1){let r=vF(e.pendingWriteTree_,t);if(yF(e.pendingWriteTree_,t)){let o=new nt(null);return r.snap!=null?o=o.set(te(),!0):qe(r.children,s=>{o=o.set(new ce(s),!0)}),Co(e,new Ag(r.path,o,n))}else return[]}function ga(e,t,n){return Co(e,new vo(am(),t,n))}function ZF(e,t,n){let r=nt.fromObject(n);return Co(e,new ca(am(),t,r))}function JF(e,t){return Co(e,new Jl(am(),t))}function XF(e,t,n){let r=hm(e,n);if(r){let i=pm(r),o=i.path,s=i.queryId,a=et(o,t),c=new Jl(cm(s),a);return gm(e,o,c)}else return[]}function xE(e,t,n,r,i=!1){let o=t._path,s=e.syncPointTree_.get(o),a=[];if(s&&(t._queryIdentifier==="default"||AE(s,t))){let c=qF(s,t,n,r);WF(s)&&(e.syncPointTree_=e.syncPointTree_.remove(o));let l=c.removed;if(a=c.events,!i){let u=l.findIndex(f=>f._queryParams.loadsAllData())!==-1,d=e.syncPointTree_.findOnPath(o,(f,h)=>vr(h));if(u&&!d){let f=e.syncPointTree_.subtree(o);if(!f.isEmpty()){let h=rL(f);for(let p=0;p<h.length;++p){let y=h[p],E=y.query,M=kE(e,y);e.listenProvider_.startListening(ra(E),ua(e,E),M.hashFn,M.onComplete)}}}!d&&l.length>0&&!r&&(u?e.listenProvider_.stopListening(ra(t),null):l.forEach(f=>{let h=e.queryToTagMap.get(du(f));e.listenProvider_.stopListening(ra(f),h)}))}iL(e,l)}return a}function RE(e,t,n,r){let i=hm(e,r);if(i!=null){let o=pm(i),s=o.path,a=o.queryId,c=et(s,t),l=new vo(cm(a),c,n);return gm(e,s,l)}else return[]}function eL(e,t,n,r){let i=hm(e,r);if(i){let o=pm(i),s=o.path,a=o.queryId,c=et(s,t),l=nt.fromObject(n),u=new ca(cm(a),c,l);return gm(e,s,u)}else return[]}function tL(e,t,n,r=!1){let i=t._path,o=null,s=!1;e.syncPointTree_.foreachOnPath(i,(f,h)=>{let p=et(f,i);o=o||gr(h,p),s=s||vr(h)});let a=e.syncPointTree_.get(i);a?(s=s||vr(a),o=o||gr(a,te())):(a=new iu,e.syncPointTree_=e.syncPointTree_.set(i,a));let c;o!=null?c=!0:(c=!1,o=U.EMPTY_NODE,e.syncPointTree_.subtree(i).foreachChild((h,p)=>{let y=gr(p,te());y&&(o=o.updateImmediateChild(h,y))}));let l=AE(a,t);if(!l&&!t._queryParams.loadsAllData()){let f=du(t);_(!e.queryToTagMap.has(f),"View does not exist, but we have a tag");let h=oL();e.queryToTagMap.set(f,h),e.tagToQueryMap.set(h,f)}let u=lu(e.pendingWriteTree_,i),d=zF(a,t,n,u,o,c);if(!l&&!s&&!r){let f=ME(a,t);d=d.concat(sL(e,t,f))}return d}function fm(e,t,n){let i=e.pendingWriteTree_,o=e.syncPointTree_.findOnPath(t,(s,a)=>{let c=et(s,t),l=gr(a,c);if(l)return l});return wE(i,t,o,n,!0)}function nL(e,t){let n=t._path,r=null;e.syncPointTree_.foreachOnPath(n,(l,u)=>{let d=et(l,n);r=r||gr(u,d)});let i=e.syncPointTree_.get(n);i?r=r||gr(i,te()):(i=new iu,e.syncPointTree_=e.syncPointTree_.set(n,i));let o=r!=null,s=o?new hn(r,!0,!1):null,a=lu(e.pendingWriteTree_,t._path),c=SE(i,t,a,o?s.getNode():U.EMPTY_NODE,o);return VF(c)}function Co(e,t){return OE(t,e.syncPointTree_,null,lu(e.pendingWriteTree_,te()))}function OE(e,t,n,r){if(K(e.path))return PE(e,t,n,r);{let i=t.get(te());n==null&&i!=null&&(n=gr(i,te()));let o=[],s=J(e.path),a=e.operationForChild(s),c=t.children.get(s);if(c&&a){let l=n?n.getImmediateChild(s):null,u=CE(r,s);o=o.concat(OE(a,c,l,u))}return i&&(o=o.concat(dm(i,e,r,n))),o}}function PE(e,t,n,r){let i=t.get(te());n==null&&i!=null&&(n=gr(i,te()));let o=[];return t.children.inorderTraversal((s,a)=>{let c=n?n.getImmediateChild(s):null,l=CE(r,s),u=e.operationForChild(s);u&&(o=o.concat(PE(u,a,c,l)))}),i&&(o=o.concat(dm(i,e,r,n))),o}function kE(e,t){let n=t.query,r=ua(e,n);return{hashFn:()=>(LF(t)||U.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?XF(e,n._path,r):JF(e,n._path);{let o=v1(i,n);return xE(e,n,null,o)}}}}function ua(e,t){let n=du(t);return e.queryToTagMap.get(n)}function du(e){return e._path.toString()+"$"+e._queryIdentifier}function hm(e,t){return e.tagToQueryMap.get(t)}function pm(e){let t=e.indexOf("$");return _(t!==-1&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new ce(e.substr(0,t))}}function gm(e,t,n){let r=e.syncPointTree_.get(t);_(r,"Missing sync point for query tag that we're tracking");let i=lu(e.pendingWriteTree_,t);return dm(r,n,i,null)}function rL(e){return e.fold((t,n,r)=>{if(n&&vr(n))return[uu(n)];{let i=[];return n&&(i=TE(n)),qe(r,(o,s)=>{i=i.concat(s)}),i}})}function ra(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(YF())(e._repo,e._path):e}function iL(e,t){for(let n=0;n<t.length;++n){let r=t[n];if(!r._queryParams.loadsAllData()){let i=du(r),o=e.queryToTagMap.get(i);e.queryToTagMap.delete(i),e.tagToQueryMap.delete(o)}}}function oL(){return KF++}function sL(e,t,n){let r=t._path,i=ua(e,t),o=kE(e,n),s=e.listenProvider_.startListening(ra(t),i,o.hashFn,o.onComplete),a=e.syncPointTree_.subtree(r);if(i)_(!vr(a.value),"If we're adding a query, it shouldn't be shadowed");else{let c=a.fold((l,u,d)=>{if(!K(l)&&u&&vr(u))return[uu(u).query];{let f=[];return u&&(f=f.concat(TE(u).map(h=>h.query))),qe(d,(h,p)=>{f=f.concat(p)}),f}});for(let l=0;l<c.length;++l){let u=c[l];e.listenProvider_.stopListening(ra(u),ua(e,u))}}return s}var jg=class e{constructor(t){this.node_=t}getImmediateChild(t){let n=this.node_.getImmediateChild(t);return new e(n)}node(){return this.node_}},Ug=class e{constructor(t,n){this.syncTree_=t,this.path_=n}getImmediateChild(t){let n=Ce(this.path_,t);return new e(this.syncTree_,n)}node(){return fm(this.syncTree_,this.path_)}},aL=function(e){return e=e||{},e.timestamp=e.timestamp||new Date().getTime(),e},j0=function(e,t,n){if(!e||typeof e!="object")return e;if(_(".sv"in e,"Unexpected leaf node or priority contents"),typeof e[".sv"]=="string")return cL(e[".sv"],t,n);if(typeof e[".sv"]=="object")return lL(e[".sv"],t);_(!1,"Unexpected server value: "+JSON.stringify(e,null,2))},cL=function(e,t,n){switch(e){case"timestamp":return n.timestamp;default:_(!1,"Unexpected server value: "+e)}},lL=function(e,t,n){e.hasOwnProperty("increment")||_(!1,"Unexpected server value: "+JSON.stringify(e,null,2));let r=e.increment;typeof r!="number"&&_(!1,"Unexpected increment value: "+r);let i=t.node();if(_(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;let s=i.getValue();return typeof s!="number"?r:s+r},FE=function(e,t,n,r){return mm(t,new Ug(n,e),r)},LE=function(e,t,n){return mm(e,new jg(t),n)};function mm(e,t,n){let r=e.getPriority().val(),i=j0(r,t.getImmediateChild(".priority"),n),o;if(e.isLeafNode()){let s=e,a=j0(s.getValue(),t,n);return a!==s.getValue()||i!==s.getPriority().val()?new po(a,je(i)):e}else{let s=e;return o=s,i!==s.getPriority().val()&&(o=o.updatePriority(new po(i))),s.forEachChild(Ie,(a,c)=>{let l=mm(c,t.getImmediateChild(a),n);l!==c&&(o=o.updateImmediateChild(a,l))}),o}}var da=class{constructor(t="",n=null,r={children:{},childCount:0}){this.name=t,this.parent=n,this.node=r}};function vm(e,t){let n=t instanceof ce?t:new ce(t),r=e,i=J(n);for(;i!==null;){let o=qr(r.node.children,i)||{children:{},childCount:0};r=new da(i,r,o),n=ve(n),i=J(n)}return r}function Io(e){return e.node.value}function VE(e,t){e.node.value=t,Bg(e)}function jE(e){return e.node.childCount>0}function uL(e){return Io(e)===void 0&&!jE(e)}function fu(e,t){qe(e.node.children,(n,r)=>{t(new da(n,e,r))})}function UE(e,t,n,r){n&&!r&&t(e),fu(e,i=>{UE(i,t,!0,r)}),n&&r&&t(e)}function dL(e,t,n){let r=n?e:e.parent;for(;r!==null;){if(t(r))return!0;r=r.parent}return!1}function ma(e){return new ce(e.parent===null?e.name:ma(e.parent)+"/"+e.name)}function Bg(e){e.parent!==null&&fL(e.parent,e.name,e)}function fL(e,t,n){let r=uL(n),i=zt(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,Bg(e)):!r&&!i&&(e.node.children[t]=n.node,e.node.childCount++,Bg(e))}var hL=/[\[\].#$\/\u0000-\u001F\u007F]/,pL=/[\[\].#$\u0000-\u001F\u007F]/,Xp=10*1024*1024,ym=function(e){return typeof e=="string"&&e.length!==0&&!hL.test(e)},BE=function(e){return typeof e=="string"&&e.length!==0&&!pL.test(e)},gL=function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),BE(e)},mL=function(e){return e===null||typeof e=="string"||typeof e=="number"&&!em(e)||e&&typeof e=="object"&&zt(e,".sv")},vL=function(e,t,n,r){r&&t===void 0||hu(Ws(e,"value"),t,n)},hu=function(e,t,n){let r=n instanceof ce?new hg(n,e):n;if(t===void 0)throw new Error(e+"contains undefined "+Yr(r));if(typeof t=="function")throw new Error(e+"contains a function "+Yr(r)+" with contents = "+t.toString());if(em(t))throw new Error(e+"contains "+t.toString()+" "+Yr(r));if(typeof t=="string"&&t.length>Xp/3&&zs(t)>Xp)throw new Error(e+"contains a string greater than "+Xp+" utf8 bytes "+Yr(r)+" ('"+t.substring(0,50)+"...')");if(t&&typeof t=="object"){let i=!1,o=!1;if(qe(t,(s,a)=>{if(s===".value")i=!0;else if(s!==".priority"&&s!==".sv"&&(o=!0,!ym(s)))throw new Error(e+" contains an invalid key ("+s+") "+Yr(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);G1(r,s),hu(e,a,r),Y1(r)}),i&&o)throw new Error(e+' contains ".value" child '+Yr(r)+" in addition to actual children.")}},yL=function(e,t){let n,r;for(n=0;n<t.length;n++){r=t[n];let o=ia(r);for(let s=0;s<o.length;s++)if(!(o[s]===".priority"&&s===o.length-1)){if(!ym(o[s]))throw new Error(e+"contains an invalid key ("+o[s]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}t.sort(q1);let i=null;for(n=0;n<t.length;n++){if(r=t[n],i!==null&&Mt(i,r))throw new Error(e+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}},_L=function(e,t,n,r){if(r&&t===void 0)return;let i=Ws(e,"values");if(!(t&&typeof t=="object")||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");let o=[];qe(t,(s,a)=>{let c=new ce(s);if(hu(i,a,Ce(n,c)),rm(c)===".priority"&&!mL(a))throw new Error(i+"contains an invalid value for '"+c.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(c)}),yL(i,o)};var $E=function(e,t,n,r){if(!(r&&n===void 0)&&!BE(n))throw new Error(Ws(e,t)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},wL=function(e,t,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),$E(e,t,n,r)},HE=function(e,t){if(J(t)===".info")throw new Error(e+" failed = Can't modify data under /.info/")},CL=function(e,t){let n=t.path.toString();if(typeof t.repoInfo.host!="string"||t.repoInfo.host.length===0||!ym(t.repoInfo.namespace)&&t.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!gL(n))throw new Error(Ws(e,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var $g=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function _m(e,t){let n=null;for(let r=0;r<t.length;r++){let i=t[r],o=i.getPath();n!==null&&!lE(o,n.path)&&(e.eventLists_.push(n),n=null),n===null&&(n={events:[],path:o}),n.events.push(i)}n&&e.eventLists_.push(n)}function Nt(e,t,n){_m(e,n),IL(e,r=>Mt(r,t)||Mt(t,r))}function IL(e,t){e.recursionDepth_++;let n=!0;for(let r=0;r<e.eventLists_.length;r++){let i=e.eventLists_[r];if(i){let o=i.path;t(o)?(EL(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}}n&&(e.eventLists_=[]),e.recursionDepth_--}function EL(e){for(let t=0;t<e.events.length;t++){let n=e.events[t];if(n!==null){e.events[t]=null;let r=n.getEventRunner();Qr&&ze("event: "+n.toString()),wo(r)}}}var bL="repo_interrupt",DL=25,Hg=class{constructor(t,n,r,i){this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new $g,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Zl(),this.transactionQueueTree_=new da,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function SL(e,t,n){if(e.stats_=nm(e.repoInfo_),e.forceRestClient_||C1())e.server_=new bg(e.repoInfo_,(r,i,o,s)=>{U0(e,r,i,o,s)},e.authTokenProvider_,e.appCheckProvider_),setTimeout(()=>B0(e,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Te(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}e.persistentConnection_=new im(e.repoInfo_,t,(r,i,o,s)=>{U0(e,r,i,o,s)},r=>{B0(e,r)},r=>{ML(e,r)},e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener(r=>{e.server_.refreshAuthToken(r)}),e.appCheckProvider_.addTokenChangeListener(r=>{e.server_.refreshAppCheckToken(r.token)}),e.statsReporter_=E1(e.repoInfo_,()=>new Mg(e.stats_,e.server_)),e.infoData_=new Dg,e.infoSyncTree_=new su({startListening:(r,i,o,s)=>{let a=[],c=e.infoData_.getNode(r._path);return c.isEmpty()||(a=ga(e.infoSyncTree_,r._path,c),setTimeout(()=>{s("ok")},0)),a},stopListening:()=>{}}),wm(e,"connected",!1),e.serverSyncTree_=new su({startListening:(r,i,o,s)=>(e.server_.listen(r,o,i,(a,c)=>{let l=s(a,c);Nt(e.eventQueue_,r._path,l)}),[]),stopListening:(r,i)=>{e.server_.unlisten(r,i)}})}function TL(e){let n=e.infoData_.getNode(new ce(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function pu(e){return aL({timestamp:TL(e)})}function U0(e,t,n,r,i){e.dataUpdateCount++;let o=new ce(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let s=[];if(i)if(r){let c=Bs(n,l=>je(l));s=eL(e.serverSyncTree_,o,c,i)}else{let c=je(n);s=RE(e.serverSyncTree_,o,c,i)}else if(r){let c=Bs(n,l=>je(l));s=ZF(e.serverSyncTree_,o,c)}else{let c=je(n);s=ga(e.serverSyncTree_,o,c)}let a=o;s.length>0&&(a=_o(e,o)),Nt(e.eventQueue_,a,s)}function B0(e,t){wm(e,"connected",t),t===!1&&RL(e)}function ML(e,t){qe(t,(n,r)=>{wm(e,n,r)})}function wm(e,t,n){let r=new ce("/.info/"+t),i=je(n);e.infoData_.updateSnapshot(r,i);let o=ga(e.infoSyncTree_,r,i);Nt(e.eventQueue_,r,o)}function Cm(e){return e.nextWriteId_++}function AL(e,t,n){let r=nL(e.serverSyncTree_,t);return r!=null?Promise.resolve(r):e.server_.get(t).then(i=>{let o=je(i).withIndex(t._queryParams.getIndex());tL(e.serverSyncTree_,t,n,!0);let s;if(t._queryParams.loadsAllData())s=ga(e.serverSyncTree_,t._path,o);else{let a=ua(e.serverSyncTree_,t);s=RE(e.serverSyncTree_,t._path,o,a)}return Nt(e.eventQueue_,t._path,s),xE(e.serverSyncTree_,t,n,null,!0),o},i=>(va(e,"get for query "+Te(t)+" failed: "+i),Promise.reject(new Error(i))))}function NL(e,t,n,r,i){va(e,"set",{path:t.toString(),value:n,priority:r});let o=pu(e),s=je(n,r),a=fm(e.serverSyncTree_,t),c=LE(s,a,o),l=Cm(e),u=NE(e.serverSyncTree_,t,c,l,!0);_m(e.eventQueue_,u),e.server_.put(t.toString(),s.val(!0),(f,h)=>{let p=f==="ok";p||tt("set at "+t+" failed: "+f);let y=hr(e.serverSyncTree_,l,!p);Nt(e.eventQueue_,t,y),Wg(e,i,f,h)});let d=Em(e,t);_o(e,d),Nt(e.eventQueue_,d,[])}function xL(e,t,n,r){va(e,"update",{path:t.toString(),value:n});let i=!0,o=pu(e),s={};if(qe(n,(a,c)=>{i=!1,s[a]=FE(Ce(t,a),je(c),e.serverSyncTree_,o)}),i)ze("update() called with empty data.  Don't do anything."),Wg(e,r,"ok",void 0);else{let a=Cm(e),c=QF(e.serverSyncTree_,t,s,a);_m(e.eventQueue_,c),e.server_.merge(t.toString(),n,(l,u)=>{let d=l==="ok";d||tt("update at "+t+" failed: "+l);let f=hr(e.serverSyncTree_,a,!d),h=f.length>0?_o(e,t):t;Nt(e.eventQueue_,h,f),Wg(e,r,l,u)}),qe(n,l=>{let u=Em(e,Ce(t,l));_o(e,u)}),Nt(e.eventQueue_,t,[])}}function RL(e){va(e,"onDisconnectEvents");let t=pu(e),n=Zl();Sg(e.onDisconnect_,te(),(i,o)=>{let s=FE(i,o,e.serverSyncTree_,t);mE(n,i,s)});let r=[];Sg(n,te(),(i,o)=>{r=r.concat(ga(e.serverSyncTree_,i,o));let s=Em(e,i);_o(e,s)}),e.onDisconnect_=Zl(),Nt(e.eventQueue_,te(),r)}function OL(e){e.persistentConnection_&&e.persistentConnection_.interrupt(bL)}function va(e,...t){let n="";e.persistentConnection_&&(n=e.persistentConnection_.id+":"),ze(n,...t)}function Wg(e,t,n,r){t&&wo(()=>{if(n==="ok")t(null);else{let i=(n||"error").toUpperCase(),o=i;r&&(o+=": "+r);let s=new Error(o);s.code=i,t(s)}})}function WE(e,t,n){return fm(e.serverSyncTree_,t,n)||U.EMPTY_NODE}function Im(e,t=e.transactionQueueTree_){if(t||gu(e,t),Io(t)){let n=qE(e,t);_(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&PL(e,ma(t),n)}else jE(t)&&fu(t,n=>{Im(e,n)})}function PL(e,t,n){let r=n.map(l=>l.currentWriteId),i=WE(e,t,r),o=i,s=i.hash();for(let l=0;l<n.length;l++){let u=n[l];_(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;let d=et(t,u.path);o=o.updateChild(d,u.currentOutputSnapshotRaw)}let a=o.val(!0),c=t;e.server_.put(c.toString(),a,l=>{va(e,"transaction put response",{path:c.toString(),status:l});let u=[];if(l==="ok"){let d=[];for(let f=0;f<n.length;f++)n[f].status=2,u=u.concat(hr(e.serverSyncTree_,n[f].currentWriteId)),n[f].onComplete&&d.push(()=>n[f].onComplete(null,!0,n[f].currentOutputSnapshotResolved)),n[f].unwatcher();gu(e,vm(e.transactionQueueTree_,t)),Im(e,e.transactionQueueTree_),Nt(e.eventQueue_,t,u);for(let f=0;f<d.length;f++)wo(d[f])}else{if(l==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{tt("transaction at "+c.toString()+" failed: "+l);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=l}_o(e,t)}},s)}function _o(e,t){let n=zE(e,t),r=ma(n),i=qE(e,n);return kL(e,i,r),r}function kL(e,t,n){if(t.length===0)return;let r=[],i=[],s=t.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<t.length;a++){let c=t[a],l=et(n,c.path),u=!1,d;if(_(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)u=!0,d=c.abortReason,i=i.concat(hr(e.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=DL)u=!0,d="maxretry",i=i.concat(hr(e.serverSyncTree_,c.currentWriteId,!0));else{let f=WE(e,c.path,s);c.currentInputSnapshot=f;let h=t[a].update(f.val());if(h!==void 0){hu("transaction failed: Data returned ",h,c.path);let p=je(h);typeof h=="object"&&h!=null&&zt(h,".priority")||(p=p.updatePriority(f.getPriority()));let E=c.currentWriteId,M=pu(e),se=LE(p,f,M);c.currentOutputSnapshotRaw=p,c.currentOutputSnapshotResolved=se,c.currentWriteId=Cm(e),s.splice(s.indexOf(E),1),i=i.concat(NE(e.serverSyncTree_,c.path,se,c.currentWriteId,c.applyLocally)),i=i.concat(hr(e.serverSyncTree_,E,!0))}else u=!0,d="nodata",i=i.concat(hr(e.serverSyncTree_,c.currentWriteId,!0))}Nt(e.eventQueue_,n,i),i=[],u&&(t[a].status=2,function(f){setTimeout(f,Math.floor(0))}(t[a].unwatcher),t[a].onComplete&&(d==="nodata"?r.push(()=>t[a].onComplete(null,!1,t[a].currentInputSnapshot)):r.push(()=>t[a].onComplete(new Error(d),!1,null))))}gu(e,e.transactionQueueTree_);for(let a=0;a<r.length;a++)wo(r[a]);Im(e,e.transactionQueueTree_)}function zE(e,t){let n,r=e.transactionQueueTree_;for(n=J(t);n!==null&&Io(r)===void 0;)r=vm(r,n),t=ve(t),n=J(t);return r}function qE(e,t){let n=[];return GE(e,t,n),n.sort((r,i)=>r.order-i.order),n}function GE(e,t,n){let r=Io(t);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);fu(t,i=>{GE(e,i,n)})}function gu(e,t){let n=Io(t);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,VE(t,n.length>0?n:void 0)}fu(t,r=>{gu(e,r)})}function Em(e,t){let n=ma(zE(e,t)),r=vm(e.transactionQueueTree_,t);return dL(r,i=>{eg(e,i)}),eg(e,r),UE(r,i=>{eg(e,i)}),n}function eg(e,t){let n=Io(t);if(n){let r=[],i=[],o=-1;for(let s=0;s<n.length;s++)n[s].status===3||(n[s].status===1?(_(o===s-1,"All SENT items should be at beginning of queue."),o=s,n[s].status=3,n[s].abortReason="set"):(_(n[s].status===0,"Unexpected transaction status in abort"),n[s].unwatcher(),i=i.concat(hr(e.serverSyncTree_,n[s].currentWriteId,!0)),n[s].onComplete&&r.push(n[s].onComplete.bind(null,new Error("set"),!1,null))));o===-1?VE(t,void 0):n.length=o+1,Nt(e.eventQueue_,ma(t),i);for(let s=0;s<r.length;s++)wo(r[s])}}function FL(e){let t="",n=e.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}t+="/"+i}return t}function LL(e){let t={};e.charAt(0)==="?"&&(e=e.substring(1));for(let n of e.split("&")){if(n.length===0)continue;let r=n.split("=");r.length===2?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):tt(`Invalid query segment '${n}' in query '${e}'`)}return t}var $0=function(e,t){let n=VL(e),r=n.namespace;n.domain==="firebase.com"&&$n(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&$n("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||f1();let i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new Hl(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new ce(n.pathString)}},VL=function(e){let t="",n="",r="",i="",o="",s=!0,a="https",c=443;if(typeof e=="string"){let l=e.indexOf("//");l>=0&&(a=e.substring(0,l-1),e=e.substring(l+2));let u=e.indexOf("/");u===-1&&(u=e.length);let d=e.indexOf("?");d===-1&&(d=e.length),t=e.substring(0,Math.min(u,d)),u<d&&(i=FL(e.substring(u,d)));let f=LL(e.substring(Math.min(e.length,d)));l=t.indexOf(":"),l>=0?(s=a==="https"||a==="wss",c=parseInt(t.substring(l+1),10)):l=t.length;let h=t.slice(0,l);if(h.toLowerCase()==="localhost")n="localhost";else if(h.split(".").length<=2)n=h;else{let p=t.indexOf(".");r=t.substring(0,p).toLowerCase(),n=t.substring(p+1),o=r}"ns"in f&&(o=f.ns)}return{host:t,port:c,domain:n,subdomain:r,secure:s,scheme:a,pathString:i,namespace:o}};var zg=class{constructor(t,n,r,i){this.eventType=t,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){let t=this.snapshot.ref;return this.eventType==="value"?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Te(this.snapshot.exportVal())}},qg=class{constructor(t,n,r){this.eventRegistration=t,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}};var Gg=class{constructor(t,n){this.snapshotCallback=t,this.cancelCallback=n}onValue(t,n){this.snapshotCallback.call(null,t,n)}onCancel(t){return _(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}};var Yg=class e{constructor(t,n,r,i){this._repo=t,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return K(this._path)?null:rm(this._path)}get ref(){return new Hn(this._repo,this._path)}get _queryIdentifier(){let t=A0(this._queryParams),n=tm(t);return n==="{}"?"default":n}get _queryObject(){return A0(this._queryParams)}isEqual(t){if(t=ut(t),!(t instanceof e))return!1;let n=this._repo===t._repo,r=lE(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+z1(this._path)}};var Hn=class e extends Yg{constructor(t,n){super(t,n,new Eg,!1)}get parent(){let t=cE(this._path);return t===null?null:new e(this._repo,t)}get root(){let t=this;for(;t.parent!==null;)t=t.parent;return t}},au=class e{constructor(t,n,r){this._node=t,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){let n=new ce(t),r=Kg(this.ref,t);return new e(this._node.getChild(n),r,Ie)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>t(new e(i,Kg(this.ref,r),Ie)))}hasChild(t){let n=new ce(t);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}};function R(e,t){return e=ut(e),e._checkNotDeleted("ref"),t!==void 0?Kg(e._root,t):e._root}function Kg(e,t){return e=ut(e),J(e._path)===null?wL("child","path",t,!1):$E("child","path",t,!1),new Hn(e._repo,Ce(e._path,t))}function Eo(e){return HE("remove",e._path),ya(e,null)}function ya(e,t){e=ut(e),HE("set",e._path),vL("set",t,e._path,!1);let n=new jn;return NL(e._repo,e._path,t,null,n.wrapCallback(()=>{})),n.promise}function Ze(e,t){_L("update",t,e._path,!1);let n=new jn;return xL(e._repo,e._path,t,n.wrapCallback(()=>{})),n.promise}function le(e){e=ut(e);let t=new Gg(()=>{}),n=new Qg(t);return AL(e._repo,e,n).then(r=>new au(r,new Hn(e._repo,e._path),e._queryParams.getIndex()))}var Qg=class e{constructor(t){this.callbackContext=t}respondsTo(t){return t==="value"}createEvent(t,n){let r=n._queryParams.getIndex();return new zg("value",this,new au(t.snapshotNode,new Hn(n._repo,n._path),r))}getEventRunner(t){return t.getEventType()==="cancel"?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,n){return this.callbackContext.hasCancelCallback?new qg(this,t,n):null}matches(t){return t instanceof e?!t.callbackContext||!this.callbackContext?!0:t.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}};$F(Hn);GF(Hn);var jL="FIREBASE_DATABASE_EMULATOR_HOST",Zg={},UL=!1;function BL(e,t,n,r){e.repoInfo_=new Hl(`${t}:${n}`,!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0),r&&(e.authTokenProvider_=r)}function $L(e,t,n,r,i){let o=r||e.options.databaseURL;o===void 0&&(e.options.projectId||$n("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),ze("Using default host for project ",e.options.projectId),o=`${e.options.projectId}-default-rtdb.firebaseio.com`);let s=$0(o,i),a=s.repoInfo,c,l;typeof process<"u"&&process.env&&(l=process.env[jL]),l?(c=!0,o=`http://${l}?ns=${a.namespace}`,s=$0(o,i),a=s.repoInfo):c=!s.repoInfo.secure;let u=i&&c?new ea(ea.OWNER):new sg(e.name,e.options,t);CL("Invalid Firebase Database URL",s),K(s.path)||$n("Database URL must point to the root of a Firebase Database (not including a child path).");let d=WL(a,e,u,new og(e.name,n));return new Jg(d,e)}function HL(e,t){let n=Zg[t];(!n||n[e.key]!==e)&&$n(`Database ${t}(${e.repoInfo_}) has already been deleted.`),OL(e),delete n[e.key]}function WL(e,t,n,r){let i=Zg[t.name];i||(i={},Zg[t.name]=i);let o=i[e.toURLString()];return o&&$n("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new Hg(e,UL,n,r),i[e.toURLString()]=o,o}var Jg=class{constructor(t,n){this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(SL(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Hn(this._repo,te())),this._rootInternal}_delete(){return this._rootInternal!==null&&(HL(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){this._rootInternal===null&&$n("Cannot call "+t+" on a deleted database.")}};function F(e=Gp(),t){let n=qp(e,"database").getImmediate({identifier:t});if(!n._instanceStarted){let r=UI("database");r&&zL(n,...r)}return n}function zL(e,t,n,r={}){e=ut(e),e._checkNotDeleted("useEmulator"),e._instanceStarted&&$n("Cannot call useEmulator() after instance has already been initialized.");let i=e._repoInternal,o;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&$n('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new ea(ea.OWNER);else if(r.mockUserToken){let s=typeof r.mockUserToken=="string"?r.mockUserToken:$I(r.mockUserToken,e.app.options.projectId);o=new ea(s)}BL(i,t,n,o)}function qL(e){l1(so),fr(new St("database",(t,{instanceIdentifier:n})=>{let r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal");return $L(r,i,o,n)},"PUBLIC").setMultipleInstances(!0)),Tt(f0,h0,e),Tt(f0,h0,"esm2017")}im.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)};im.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};qL();var he={production:!0,firebaseConfig:{apiKey:"AIzaSyC2ak3O4qovvrDLGJ-L3a6E1uLASES2xuU",authDomain:"tablefi-31087.firebaseapp.com",databaseURL:"https://tablefi-31087-default-rtdb.europe-west1.firebasedatabase.app",projectId:"tablefi-31087",storageBucket:"tablefi-31087.appspot.com",messagingSenderId:"821585389969",appId:"1:821585389969:web:9383409a2e5fbf601b5230",measurementId:"G-QXT5KZEKGZ"}};var YE=(()=>{class e{db;constructor(){let n=ie(he.firebaseConfig);this.db=F(n)}login(n,r){return new $(i=>{let o=R(this.db,"Owners");le(o).then(s=>{if(s.exists()){let a=s.val(),l=Object.values(a).find(u=>u.email===n);l?l.password===r?i.next(l):i.error("Invalid password"):i.error("No user found with this email")}else i.error("No owners found in the database")}).catch(s=>{console.error("Error fetching owners:",s),i.error("An error occurred while fetching owners")})}).pipe(it(i=>(console.error("Error during login:",i),ne([null]))))}static \u0275fac=function(r){return new(r||e)};static \u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var ye=(()=>{class e{router;constructor(n){this.router=n}NavigateTo(n){this.router.navigate([n])}static \u0275fac=function(r){return new(r||e)(z(Xi))};static \u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var KE=(()=>{class e{loginService;navigationService;email="";password="";constructor(n,r){this.loginService=n,this.navigationService=r}onSubmit(n){n.preventDefault(),this.loginService.login(this.email,this.password).subscribe({next:r=>{r&&(sessionStorage.setItem("userId",r.id),sessionStorage.setItem("userEmail",r.email),sessionStorage.setItem("uniqueLinkToken",r.uniqueLinkToken),console.log("User logged in:",r),alert("Login successful!"),r.Restaurants&&r.Restaurants.length>0?this.navigationService.NavigateTo("changerestaurant"):this.navigationService.NavigateTo("newrestaurant"))},error:r=>{alert(r),console.error("Login error:",r)}})}static \u0275fac=function(r){return new(r||e)(D(YE),D(ye))};static \u0275cmp=A({type:e,selectors:[["app-login"]],standalone:!0,features:[x],decls:15,vars:2,consts:[[1,"displaybox"],[1,"logo"],[1,"loginform"],[3,"ngSubmit"],["type","email","id","email","name","email","placeholder","E-mail","required","",3,"ngModelChange","ngModel"],["type","password","id","password","name","password","placeholder","Has\u0142o","required","",3,"ngModelChange","ngModel"],["type","submit",1,"login"],[1,"footstatic"]],template:function(r,i){r&1&&(m(0,"main")(1,"div",0)(2,"div",1)(3,"h1"),v(4,"EasyOrder"),g()(),m(5,"div",2)(6,"form",3),b("ngSubmit",function(s){return i.onSubmit(s)}),m(7,"div")(8,"input",4),Ve("ngModelChange",function(s){return Ue(i.email,s)||(i.email=s),s}),g()(),m(9,"div")(10,"input",5),Ve("ngModelChange",function(s){return Ue(i.password,s)||(i.password=s),s}),g()(),k(11,"div"),m(12,"button",6),v(13,"Zaloguj"),g()()(),k(14,"div",7),g()()),r&2&&(N(8),Le("ngModel",i.email),N(2),Le("ngModel",i.password))},dependencies:[lt,cn,Dt,sn,an,Ht,$t,Bt],styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;padding:32px;position:relative}.displaybox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center;position:relative}.logo[_ngcontent-%COMP%]{display:flex;font-size:45%;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center;margin-bottom:48px}.loginform[_ngcontent-%COMP%]{width:100%;height:fit-content;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center;position:relative}.loginform[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:100%}.loginform[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;background:#fff;padding:16px;font-size:110%;color:#000;font-weight:600;letter-spacing:2px;border:1px solid #000000;transition:all .5s;margin-bottom:24px}.loginform[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;background:#000;padding:16px;font-size:110%;color:#fff;font-weight:600;letter-spacing:2px;border:none;transition:all .5s}"]})}return e})();function bo(){}var bm=class{zone;task=null;constructor(t){this.zone=t}call(t,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",bo,{},bo,bo)),n.pipe(Oe({next:r,complete:r,error:r})).subscribe(t).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}};function mu(){let e=globalThis.\u0275AngularFireScheduler;if(!e)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return e}function YL(e){return mu().ngZone.runOutsideAngular(()=>e())}function ti(e){return mu().ngZone.run(()=>e())}function KL(e){return QL(mu())(e)}function QL(e){return function(n){return n=n.lift(new bm(e.ngZone)),n.pipe(Gn(e.outsideAngular),qn(e.insideAngular))}}var ZL=(e,t)=>function(){let r=arguments;return t&&setTimeout(()=>{t.state==="scheduled"&&t.invoke()},10),ti(()=>e.apply(void 0,r))},QE=(e,t)=>function(){let n,r=arguments;for(let o=0;o<arguments.length;o++)typeof r[o]=="function"&&(t&&(n||=ti(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",bo,{},bo,bo))),r[o]=ZL(r[o],n));let i=YL(()=>e.apply(this,r));if(!t)if(i instanceof $){let o=mu();return i.pipe(Gn(o.outsideAngular),qn(o.insideAngular))}else return ti(()=>i);return i instanceof $?i.pipe(KL):i instanceof Promise?ti(()=>new Promise((o,s)=>i.then(a=>ti(()=>o(a)),a=>ti(()=>s(a))))):typeof i=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),i.apply(this,arguments)}:ti(()=>i)};function ib(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var ob=ib,sb=new Un("auth","Firebase",ib());var wu=new ur("@firebase/auth");function JL(e,...t){wu.logLevel<=fe.WARN&&wu.warn(`Auth (${so}): ${e}`,...t)}function yu(e,...t){wu.logLevel<=fe.ERROR&&wu.error(`Auth (${so}): ${e}`,...t)}function ZE(e,...t){throw Fm(e,...t)}function km(e,...t){return Fm(e,...t)}function ab(e,t,n){let r=Object.assign(Object.assign({},ob()),{[t]:n});return new Un("auth","Firebase",r).create(t,{appName:e.name})}function _u(e){return ab(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Fm(e,...t){if(typeof e!="string"){let n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return sb.create(e,...t)}function oe(e,t,...n){if(!e)throw Fm(t,...n)}function _a(e){let t="INTERNAL ASSERTION FAILED: "+e;throw yu(t),new Error(t)}function Cu(e,t){e||_a(t)}function XL(){return JE()==="http:"||JE()==="https:"}function JE(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.protocol)||null}function eV(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(XL()||WI()||"connection"in navigator)?navigator.onLine:!0}function tV(){if(typeof navigator>"u")return null;let e=navigator;return e.languages&&e.languages[0]||e.language||null}var ri=class{constructor(t,n){this.shortDelay=t,this.longDelay=n,Cu(n>t,"Short delay should be less than long delay!"),this.isMobile=Us()||Fl()}get(){return eV()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function nV(e,t){Cu(e.emulator,"Emulator should always be set here");let{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}var Iu=class{static initialize(t,n,r){this.fetchImpl=t,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;_a("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;_a("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;_a("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var rV={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var iV=new ri(3e4,6e4);function cb(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function Su(o,s,a,c){return w(this,arguments,function*(e,t,n,r,i={}){return lb(e,i,()=>w(this,null,function*(){let l={},u={};r&&(t==="GET"?u=r:l={body:JSON.stringify(r)});let d=Hs(Object.assign({key:e.config.apiKey},u)).slice(1),f=yield e._getAdditionalHeaders();f["Content-Type"]="application/json",e.languageCode&&(f["X-Firebase-Locale"]=e.languageCode);let h=Object.assign({method:t,headers:f},l);return HI()||(h.referrerPolicy="no-referrer"),Iu.fetch()(ub(e,e.config.apiHost,n,d),h)}))})}function lb(e,t,n){return w(this,null,function*(){e._canInitEmulator=!1;let r=Object.assign(Object.assign({},rV),t);try{let i=new Tm(e),o=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw vu(e,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw vu(e,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw vu(e,"email-already-in-use",s);if(c==="USER_DISABLED")throw vu(e,"user-disabled",s);let u=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw ab(e,u,l);ZE(e,u)}}catch(i){if(i instanceof ln)throw i;ZE(e,"network-request-failed",{message:String(i)})}})}function ub(e,t,n,r){let i=`${t}${n}?${r}`;return e.config.emulator?nV(e.config,i):`${e.config.apiScheme}://${i}`}var Tm=class{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(km(this.auth,"network-request-failed")),iV.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function vu(e,t,n){let r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=km(e,t,r);return i.customData._tokenResponse=n,i}function oV(e,t){return w(this,null,function*(){return Su(e,"POST","/v1/accounts:delete",t)})}function db(e,t){return w(this,null,function*(){return Su(e,"POST","/v1/accounts:lookup",t)})}function wa(e){if(e)try{let t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}function Tu(e,t=!1){return ut(e).getIdToken(t)}function Lm(e,t=!1){return w(this,null,function*(){let n=ut(e),r=yield n.getIdToken(t),i=fb(r);oe(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:wa(Dm(i.auth_time)),issuedAtTime:wa(Dm(i.iat)),expirationTime:wa(Dm(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function Dm(e){return Number(e)*1e3}function fb(e){let[t,n,r]=e.split(".");if(t===void 0||n===void 0||r===void 0)return yu("JWT malformed, contained fewer than 3 sections"),null;try{let i=js(n);return i?JSON.parse(i):(yu("Failed to decode base64 JWT payload"),null)}catch(i){return yu("Caught error parsing JWT payload as JSON",i?.toString()),null}}function XE(e){let t=fb(e);return oe(t,"internal-error"),oe(typeof t.exp<"u","internal-error"),oe(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}function Mm(e,t,n=!1){return w(this,null,function*(){if(n)return t;try{return yield t}catch(r){throw r instanceof ln&&sV(r)&&e.auth.currentUser===e&&(yield e.auth.signOut()),r}})}function sV({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}var Am=class{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;let n=this.getInterval(t);this.timerId=setTimeout(()=>w(this,null,function*(){yield this.iteration()}),n)}iteration(){return w(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Ia=class{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=wa(this.lastLoginAt),this.creationTime=wa(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Eu(e){return w(this,null,function*(){var t;let n=e.auth,r=yield e.getIdToken(),i=yield Mm(e,db(n,{idToken:r}));oe(i?.users.length,n,"internal-error");let o=i.users[0];e._notifyReloadListener(o);let s=!((t=o.providerUserInfo)===null||t===void 0)&&t.length?hb(o.providerUserInfo):[],a=aV(e.providerData,s),c=e.isAnonymous,l=!(e.email&&o.passwordHash)&&!a?.length,u=c?l:!1,d={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new Ia(o.createdAt,o.lastLoginAt),isAnonymous:u};Object.assign(e,d)})}function Vm(e){return w(this,null,function*(){let t=ut(e);yield Eu(t),yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)})}function aV(e,t){return[...e.filter(r=>!t.some(i=>i.providerId===r.providerId)),...t]}function hb(e){return e.map(t=>{var{providerId:n}=t,r=od(t,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function cV(e,t){return w(this,null,function*(){let n=yield lb(e,{},()=>w(this,null,function*(){let r=Hs({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:o}=e.config,s=ub(e,i,"/v1/token",`key=${o}`),a=yield e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Iu.fetch()(s,{method:"POST",headers:a,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function lV(e,t){return w(this,null,function*(){return Su(e,"POST","/v2/accounts:revokeToken",cb(e,t))})}var Ca=class e{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){oe(t.idToken,"internal-error"),oe(typeof t.idToken<"u","internal-error"),oe(typeof t.refreshToken<"u","internal-error");let n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):XE(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){oe(t.length!==0,"internal-error");let n=XE(t);this.updateTokensAndExpiration(t,null,n)}getToken(t,n=!1){return w(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(oe(this.refreshToken,t,"user-token-expired"),this.refreshToken?(yield this.refresh(t,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(t,n){return w(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield cV(t,n);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(t,n,r){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,n){let{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new e;return r&&(oe(typeof r=="string","internal-error",{appName:t}),s.refreshToken=r),i&&(oe(typeof i=="string","internal-error",{appName:t}),s.accessToken=i),o&&(oe(typeof o=="number","internal-error",{appName:t}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new e,this.toJSON())}_performRefresh(){return _a("not implemented")}};function yr(e,t){oe(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}var Ea=class e{constructor(t){var{uid:n,auth:r,stsTokenManager:i}=t,o=od(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Am(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Ia(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(t){return w(this,null,function*(){let n=yield Mm(this,this.stsTokenManager.getToken(this.auth,t));return oe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(t){return Lm(this,t)}reload(){return Vm(this)}_assign(t){this!==t&&(oe(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){let n=new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){oe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(t,n=!1){return w(this,null,function*(){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),n&&(yield Eu(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return w(this,null,function*(){if(oo(this.auth.app))return Promise.reject(_u(this.auth));let t=yield this.getIdToken();return yield Mm(this,oV(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var r,i,o,s,a,c,l,u;let d=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(i=n.email)!==null&&i!==void 0?i:void 0,h=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,p=(s=n.photoURL)!==null&&s!==void 0?s:void 0,y=(a=n.tenantId)!==null&&a!==void 0?a:void 0,E=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,M=(l=n.createdAt)!==null&&l!==void 0?l:void 0,se=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:me,emailVerified:Ae,isAnonymous:Ne,providerData:pe,stsTokenManager:Ge}=n;oe(me&&Ge,t,"internal-error");let pn=Ca.fromJSON(this.name,Ge);oe(typeof me=="string",t,"internal-error"),yr(d,t.name),yr(f,t.name),oe(typeof Ae=="boolean",t,"internal-error"),oe(typeof Ne=="boolean",t,"internal-error"),yr(h,t.name),yr(p,t.name),yr(y,t.name),yr(E,t.name),yr(M,t.name),yr(se,t.name);let xo=new e({uid:me,auth:t,email:f,emailVerified:Ae,displayName:d,isAnonymous:Ne,photoURL:p,phoneNumber:h,tenantId:y,stsTokenManager:pn,createdAt:M,lastLoginAt:se});return pe&&Array.isArray(pe)&&(xo.providerData=pe.map(zD=>Object.assign({},zD))),E&&(xo._redirectEventId=E),xo}static _fromIdTokenResponse(t,n,r=!1){return w(this,null,function*(){let i=new Ca;i.updateFromServerResponse(n);let o=new e({uid:n.localId,auth:t,stsTokenManager:i,isAnonymous:r});return yield Eu(o),o})}static _fromGetAccountInfoResponse(t,n,r){return w(this,null,function*(){let i=n.users[0];oe(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?hb(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new Ca;a.updateFromIdToken(r);let c=new e({uid:i.localId,auth:t,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Ia(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(c,l),c})}};var eb=new Map;function ni(e){Cu(e instanceof Function,"Expected a class definition");let t=eb.get(e);return t?(Cu(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,eb.set(e,t),t)}var uV=(()=>{class e{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return w(this,null,function*(){return!0})}_set(n,r){return w(this,null,function*(){this.storage[n]=r})}_get(n){return w(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return w(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return e.type="NONE",e})(),Nm=uV;function Sm(e,t,n){return`firebase:${e}:${t}:${n}`}var bu=class e{constructor(t,n,r){this.persistence=t,this.auth=n,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=Sm(this.userKey,i.apiKey,o),this.fullPersistenceKey=Sm("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}getCurrentUser(){return w(this,null,function*(){let t=yield this.persistence._get(this.fullUserKey);return t?Ea._fromJSON(this.auth,t):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(t){return w(this,null,function*(){if(this.persistence===t)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(t,n,r="authUser"){return w(this,null,function*(){if(!n.length)return new e(ni(Nm),t,r);let i=(yield Promise.all(n.map(l=>w(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),o=i[0]||ni(Nm),s=Sm(r,t.config.apiKey,t.name),a=null;for(let l of n)try{let u=yield l._get(s);if(u){let d=Ea._fromJSON(t,u);l!==o&&(a=d),o=l;break}}catch{}let c=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!c.length?new e(o,t,r):(o=c[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(n.map(l=>w(this,null,function*(){if(l!==o)try{yield l._remove(s)}catch{}}))),new e(o,t,r))})}};function tb(e){let t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(pV(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(dV(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(mV(t))return"Blackberry";if(vV(t))return"Webos";if(fV(t))return"Safari";if((t.includes("chrome/")||hV(t))&&!t.includes("edge/"))return"Chrome";if(gV(t))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=e.match(n);if(r?.length===2)return r[1]}return"Other"}function dV(e=Wt()){return/firefox\//i.test(e)}function fV(e=Wt()){let t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function hV(e=Wt()){return/crios\//i.test(e)}function pV(e=Wt()){return/iemobile/i.test(e)}function gV(e=Wt()){return/android/i.test(e)}function mV(e=Wt()){return/blackberry/i.test(e)}function vV(e=Wt()){return/webos/i.test(e)}function pb(e,t=[]){let n;switch(e){case"Browser":n=tb(Wt());break;case"Worker":n=`${tb(Wt())}-${e}`;break;default:n=e}let r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${so}/${r}`}var xm=class{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){let r=o=>new Promise((s,a)=>{try{let c=t(o);s(c)}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(t){return w(this,null,function*(){if(this.auth.currentUser===t)return;let n=[];try{for(let r of this.queue)yield r(t),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function yV(n){return w(this,arguments,function*(e,t={}){return Su(e,"GET","/v2/passwordPolicy",cb(e,t))})}var _V=6,Rm=class{constructor(t){var n,r,i,o;let s=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=s.minPasswordLength)!==null&&n!==void 0?n:_V,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=t.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=t.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var n,r,i,o,s,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,c),this.validatePasswordCharacterOptions(t,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsUppercaseLetter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(s=c.containsNumericCharacter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(t,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=t.length>=r),i&&(n.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<t.length;i++)r=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=o))}};var Om=class{constructor(t,n,r,i){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Du(this),this.idTokenSubscription=new Du(this),this.beforeStateQueue=new xm(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=sb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=ni(n)),this._initializationPromise=this.queue(()=>w(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield bu.create(this,t),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return w(this,null,function*(){if(this._deleted)return;let t=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(t,!0)}})}initializeCurrentUserFromIdToken(t){return w(this,null,function*(){try{let n=yield db(this,{idToken:t}),r=yield Ea._fromGetAccountInfoResponse(this,n,t);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(t){return w(this,null,function*(){var n;if(oo(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(t&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(t);(!s||s===a)&&c?.user&&(i=c.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return oe(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(t){return w(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(t){return w(this,null,function*(){try{yield Eu(t)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)})}useDeviceLanguage(){this.languageCode=tV()}_delete(){return w(this,null,function*(){this._deleted=!0})}updateCurrentUser(t){return w(this,null,function*(){if(oo(this.app))return Promise.reject(_u(this));let n=t?ut(t):null;return n&&oe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(t,n=!1){return w(this,null,function*(){if(!this._deleted)return t&&oe(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(t)),this.queue(()=>w(this,null,function*(){yield this.directlySetCurrentUser(t),this.notifyAuthListeners()}))})}signOut(){return w(this,null,function*(){return oo(this.app)?Promise.reject(_u(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(t){return oo(this.app)?Promise.reject(_u(this)):this.queue(()=>w(this,null,function*(){yield this.assertedPersistence.setPersistence(ni(t))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(t){return w(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return w(this,null,function*(){let t=yield yV(this),n=new Rm(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new Un("auth","Firebase",t())}onAuthStateChanged(t,n,r){return this.registerStateListener(this.authStateSubscription,t,n,r)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,r){return this.registerStateListener(this.idTokenSubscription,t,n,r)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{let r=this.onAuthStateChanged(()=>{r(),t()},n)}})}revokeAccessToken(t){return w(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield lV(this,r)}})}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}_setRedirectUser(t,n){return w(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return t===null?r.removeCurrentUser():r.setCurrentUser(t)})}getOrInitRedirectPersistenceManager(t){return w(this,null,function*(){if(!this.redirectPersistenceManager){let n=t&&ni(t)||this._popupRedirectResolver;oe(n,this,"argument-error"),this.redirectPersistenceManager=yield bu.create(this,[ni(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(t){return w(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>w(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===t?this.redirectUser:null})}_persistUserIfCurrent(t){return w(this,null,function*(){if(t===this.currentUser)return this.queue(()=>w(this,null,function*(){return this.directlySetCurrentUser(t)}))})}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,r,i){if(this._deleted)return()=>{};let o=typeof n=="function"?n:n.next.bind(n),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(oe(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof n=="function"){let c=t.addObserver(n,r,i);return()=>{s=!0,c()}}else{let c=t.addObserver(n);return()=>{s=!0,c()}}}directlySetCurrentUser(t){return w(this,null,function*(){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?yield this.assertedPersistence.setCurrentUser(t):yield this.assertedPersistence.removeCurrentUser()})}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return oe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=pb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return w(this,null,function*(){var t;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return w(this,null,function*(){var t;let n=yield(t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken();return n?.error&&JL(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function wV(e){return ut(e)}var Du=class{constructor(t){this.auth=t,this.observer=null,this.addObserver=QI(n=>this.observer=n)}get next(){return oe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var CV={loadJS(){return w(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function IV(e){CV=e}function EV(e){return`__${e}${Math.floor(Math.random()*1e6)}`}function bV(e,t){let n=t?.persistence||[],r=(Array.isArray(n)?n:[n]).map(ni);t?.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t?.popupRedirectResolver)}function Mu(e,t,n,r){return ut(e).onIdTokenChanged(t,n,r)}var gq=EV("rcb"),mq=new ri(3e4,6e4);var vq=new ri(2e3,1e4);var yq=10*60*1e3;var _q=new ri(3e4,6e4);var wq=new ri(5e3,15e3);var Cq=encodeURIComponent("fac");var nb="@firebase/auth",rb="1.7.9";var Pm=class{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}getToken(t){return w(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(t)}:null})}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;let n=this.auth.onIdTokenChanged(r=>{t(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();let n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){oe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function DV(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function SV(e){fr(new St("auth",(t,{options:n})=>{let r=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),o=t.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;oe(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:s,authDomain:a,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:pb(e)},l=new Om(r,i,o,c);return bV(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,r)=>{t.getProvider("auth-internal").initialize()})),fr(new St("auth-internal",t=>{let n=wV(t.getProvider("auth").getImmediate());return(r=>new Pm(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Tt(nb,rb,DV(e)),Tt(nb,rb,"esm2017")}var TV=5*60,Iq=BI("authIdTokenMaxAge")||TV;function MV(){var e,t;return(t=(e=document.getElementsByTagName("head"))===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:document}IV({loadJS(e){return new Promise((t,n)=>{let r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=i=>{let o=km("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",MV().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});SV("Browser");function mb(e){return new $(function(t){var n=Mu(e,t.next.bind(t),t.error.bind(t),t.complete.bind(t));return{unsubscribe:n}})}function vb(e){return mb(e).pipe(ht(function(t){return t?ne(Tu(t)):L(null)}))}var yb=QE(vb,!0);var _b=(()=>{class e{db;constructor(){let n=ie(he.firebaseConfig);this.db=F(n)}emailExists(n){let r=R(this.db,"Owners");return ne(le(r)).pipe(H(i=>{if(i.exists()){let o=i.val();return Object.values(o).map(a=>a.email).includes(n)}return!1}),it(i=>(console.error("Error checking email existence:",i),ne([!1]))))}getNextOwnerId(){let n=R(this.db,"Owners");return ne(le(n)).pipe(H(r=>{if(r.exists()){let i=r.val(),o=Object.keys(i).map(a=>i[a].id);return Math.max(...o)+1}return 1}),it(r=>(console.error("Error fetching owners:",r),ne([1]))))}register(n){return new $(r=>{this.getNextOwnerId().subscribe(i=>{n.id=i;let o=R(this.db,`Owners/${i}`);ya(o,n).then(()=>{r.next(),r.complete()}).catch(s=>{r.error(s)})})}).pipe(it(r=>(console.error("An error occurred while registering the owner:",r),ne([]))))}static \u0275fac=function(r){return new(r||e)};static \u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var wb=(()=>{class e{registrationService;navigationService;email="";password="";confirmPassword="";constructor(n,r){this.registrationService=n,this.navigationService=r}onSubmit(n){if(n.preventDefault(),this.password!==this.confirmPassword){alert("Has\u0142a nie pasuj\u0105 do siebie!");return}this.registrationService.emailExists(this.email).subscribe(r=>{if(r){alert("Email jest ju\u017C zarejestrowany!");return}let i={id:yb,name:this.email.split("@")[0],email:this.email,password:this.password,uniqueLinkToken:this.generateUniqueLinkToken(128)};this.registrationService.register(i).subscribe({next:()=>{console.log("User registered successfully:",i),sessionStorage.setItem("userId",i.id),sessionStorage.setItem("userEmail",i.email),sessionStorage.setItem("uniqueLinkToken",i.uniqueLinkToken),this.navigationService.NavigateTo("newrestaurant")},error:o=>{console.error("Registration failed:",o)}})})}generateUniqueLinkToken(n=128){let r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i="";for(let o=0;o<n;o++)i+=r.charAt(Math.floor(Math.random()*r.length));return i}static \u0275fac=function(r){return new(r||e)(D(_b),D(ye))};static \u0275cmp=A({type:e,selectors:[["app-register"]],standalone:!0,features:[x],decls:16,vars:3,consts:[[1,"displaybox"],[1,"logo"],[1,"loginform"],[3,"ngSubmit"],["type","email","id","email","name","email","placeholder","E-mail","required","",3,"ngModelChange","ngModel"],["type","password","id","password","name","password","placeholder","Has\u0142o","required","",3,"ngModelChange","ngModel"],["type","password","id","confirmPassword","name","confirmPassword","placeholder","Powt\xF3rz has\u0142o","required","",3,"ngModelChange","ngModel"],["type","submit",1,"register"],[1,"footstatic"]],template:function(r,i){r&1&&(m(0,"main")(1,"div",0)(2,"div",1)(3,"h1"),v(4,"EasyOrder"),g()(),m(5,"div",2)(6,"form",3),b("ngSubmit",function(s){return i.onSubmit(s)}),m(7,"div")(8,"input",4),Ve("ngModelChange",function(s){return Ue(i.email,s)||(i.email=s),s}),g()(),m(9,"div")(10,"input",5),Ve("ngModelChange",function(s){return Ue(i.password,s)||(i.password=s),s}),g()(),m(11,"div")(12,"input",6),Ve("ngModelChange",function(s){return Ue(i.confirmPassword,s)||(i.confirmPassword=s),s}),g()(),m(13,"button",7),v(14,"Zarejestruj"),g()()(),k(15,"div",8),g()()),r&2&&(N(8),Le("ngModel",i.email),N(2),Le("ngModel",i.password),N(2),Le("ngModel",i.confirmPassword))},dependencies:[lt,cn,Dt,sn,an,Ht,$t,Bt],styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;padding:32px;position:relative}.displaybox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center;position:relative}.logo[_ngcontent-%COMP%]{display:flex;font-size:45%;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center;margin-bottom:48px}.loginform[_ngcontent-%COMP%]{width:100%;height:fit-content;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center;position:relative}.loginform[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:100%}.loginform[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;background:#fff;padding:16px;font-size:110%;color:#000;font-weight:600;letter-spacing:2px;border:1px solid #000000;transition:all .5s;margin-bottom:24px}.loginform[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;background:#000;padding:16px;font-size:110%;color:#fff;font-weight:600;letter-spacing:2px;border:none;transition:all .5s}"]})}return e})();var jm=(()=>{class e{navigationService;constructor(n){this.navigationService=n}goToPage(n){this.navigationService.NavigateTo(n)}static \u0275fac=function(r){return new(r||e)(D(ye))};static \u0275cmp=A({type:e,selectors:[["app-landing-page"]],standalone:!0,features:[x],decls:10,vars:0,consts:[[1,"displaybox"],[1,"logo"],[1,"buttons"],[1,"register",3,"click"],[1,"login",3,"click"]],template:function(r,i){r&1&&(m(0,"main")(1,"div",0)(2,"div",1)(3,"h1"),v(4,"EasyOrder"),g()(),m(5,"div",2)(6,"button",3),b("click",function(){return i.goToPage("register")}),v(7,"Zarejestruj si\u0119"),g(),m(8,"button",4),b("click",function(){return i.goToPage("login")}),v(9,"Zaloguj si\u0119"),g()()()())},styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;padding:32px;position:relative}.displaybox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center;position:relative}.logo[_ngcontent-%COMP%]{display:flex;font-size:110%;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center;margin-bottom:48px}.buttons[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center}.buttons[_ngcontent-%COMP%]   .register[_ngcontent-%COMP%]{width:100%;background:#000;padding:16px;font-size:110%;color:#fff;font-weight:600;letter-spacing:2px;border:none;transition:all .5s}.buttons[_ngcontent-%COMP%]   .login[_ngcontent-%COMP%]{width:100%;background:#fff;padding:16px;font-size:110%;color:#000;font-weight:600;letter-spacing:2px;border:1px solid #000000;transition:all .5s}.buttons[_ngcontent-%COMP%]   .register[_ngcontent-%COMP%]:hover{background:#292929;transition:all .5s}.buttons[_ngcontent-%COMP%]   .login[_ngcontent-%COMP%]:hover{background:#cecece;transition:all .5s}"]})}return e})();var Cb=(()=>{class e{navigationService;name="";address="";constructor(n){this.navigationService=n;let r=ie(he.firebaseConfig)}onSubmit(n){n.preventDefault();let r=sessionStorage.getItem("uniqueLinkToken"),i=sessionStorage.getItem("userId");if(!i){alert("You must be logged in to create a restaurant.");return}let o={id:Date.now().toString(),name:this.name,address:this.address,uniqueLinkToken:r||"",settings:{table_change_allowed:!0,table_block_allowed:!0,order_number_typed_by_waiter_required:!0,waiter_access_pin:1234},TableGroups:[],Tables:[],Orders:[]};this.saveRestaurant(o,i)}saveRestaurant(n,r){let i=F(),o=n.id,s=R(i,`Owners/${r}/Restaurants/${o}`);ya(s,n).then(()=>{console.log("Restaurant added successfully:",n),this.navigationService.NavigateTo("changerestaurant"),this.resetForm()}).catch(a=>{console.error("Error adding restaurant:",a)})}resetForm(){this.name="",this.address=""}static \u0275fac=function(r){return new(r||e)(D(ye))};static \u0275cmp=A({type:e,selectors:[["app-newrestaurant"]],standalone:!0,features:[x],decls:15,vars:2,consts:[[1,"displaybox"],[1,"logo"],[1,"newrestaurantform"],[3,"ngSubmit"],["type","text","id","name","name","name","placeholder","Nazwa restauracji","required","",3,"ngModelChange","ngModel"],["type","text","id","adress","name","adress","placeholder","Adres","required","",3,"ngModelChange","ngModel"],["type","submit",1,"addrestaurant"],[1,"footstatic"]],template:function(r,i){r&1&&(m(0,"main")(1,"div",0)(2,"div",1)(3,"h1"),v(4,"EasyOrder"),g()(),m(5,"div",2)(6,"form",3),b("ngSubmit",function(s){return i.onSubmit(s)}),m(7,"div")(8,"input",4),Ve("ngModelChange",function(s){return Ue(i.name,s)||(i.name=s),s}),g()(),m(9,"div")(10,"input",5),Ve("ngModelChange",function(s){return Ue(i.address,s)||(i.address=s),s}),g()(),k(11,"div"),m(12,"button",6),v(13,"Dodaj"),g()()(),k(14,"div",7),g()()),r&2&&(N(8),Le("ngModel",i.name),N(2),Le("ngModel",i.address))},dependencies:[lt,cn,Dt,sn,an,Ht,$t,Bt],styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;padding:32px;position:relative}.displaybox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center;position:relative}.logo[_ngcontent-%COMP%]{display:flex;font-size:45%;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center;margin-bottom:48px}.newrestaurantform[_ngcontent-%COMP%]{width:100%;height:fit-content;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center;position:relative}.newrestaurantform[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:100%}.newrestaurantform[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;background:#fff;padding:16px;font-size:110%;color:#000;font-weight:600;letter-spacing:2px;border:1px solid #000000;transition:all .5s;margin-bottom:24px}.newrestaurantform[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;background:#000;padding:16px;font-size:110%;color:#fff;font-weight:600;letter-spacing:2px;border:none;transition:all .5s}"]})}return e})();var Ib=(()=>{class e{navigationService;constructor(n){this.navigationService=n}goToPage(n){this.navigationService.NavigateTo(n)}static \u0275fac=function(r){return new(r||e)(D(ye))};static \u0275cmp=A({type:e,selectors:[["app-restaurantmanage"]],standalone:!0,features:[x],decls:17,vars:0,consts:[[1,"displaybox"],[1,"logo"],[1,"buttons"],[1,"tablemanage",3,"click"],[1,"settings",3,"click"],[1,"revievs",3,"click"],[1,"stats",3,"click"],[1,"bilings",3,"click"],[1,"footstatic"]],template:function(r,i){r&1&&(m(0,"main")(1,"div",0)(2,"div",1)(3,"h1"),v(4,"EasyOrder"),g()(),m(5,"div",2)(6,"button",3),b("click",function(){return i.goToPage("tablemanage")}),v(7,"Zarz\u0105dzanie stolikami"),g(),m(8,"button",4),b("click",function(){return i.goToPage("restaurantsettings")}),v(9,"Ustawienia"),g(),m(10,"button",5),b("click",function(){return i.goToPage("restaurantrevievs")}),v(11,"Opinie restauracji"),g(),m(12,"button",6),b("click",function(){return i.goToPage("restaurantstats")}),v(13,"Statystyki"),g(),m(14,"button",7),b("click",function(){return i.goToPage("restaurantbilings")}),v(15,"P\u0142atno\u015Bci"),g()(),k(16,"div",8),g()())},dependencies:[lt],styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;padding:16px;position:relative}.displaybox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center;position:relative}.logo[_ngcontent-%COMP%]{display:flex;font-size:45%;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center;margin-bottom:48px}.buttons[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center}.buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;background:#fff;padding:24px;font-size:110%;color:#000;font-weight:600;letter-spacing:2px;border:1px solid #000000;transition:all .5s;margin-bottom:24px}"]})}return e})();var Eb={production:!0,firebaseConfig:{apiKey:"AIzaSyC2ak3O4qovvrDLGJ-L3a6E1uLASES2xuU",authDomain:"tablefi-31087.firebaseapp.com",databaseURL:"https://tablefi-31087-default-rtdb.europe-west1.firebasedatabase.app",projectId:"tablefi-31087",storageBucket:"tablefi-31087.appspot.com",messagingSenderId:"821585389969",appId:"1:821585389969:web:9383409a2e5fbf601b5230",measurementId:"G-QXT5KZEKGZ"}};function Dj(e,t){e&1&&(m(0,"p"),v(1,"Brak restauracji przypisanych do konta."),g())}function Sj(e,t){if(e&1){let n=Xe();m(0,"button",6),b("click",function(){let i=ke(n).$implicit,o=Se(2);return Fe(o.setRestaurant(i.id))}),m(1,"p",7),v(2),g(),m(3,"p",7),v(4),g()()}if(e&2){let n=t.$implicit;N(2),wh("",n.name," ",n.id,""),N(2),ar(n.address)}}function Tj(e,t){if(e&1&&nn(0,Sj,5,3,"button",5,tn),e&2){let n=Se();rn(n.restaurants)}}var bb=(()=>{class e{navigationService;restaurants=[];db;constructor(n){this.navigationService=n;let r=ie(Eb.firebaseConfig);this.db=F(r)}ngOnInit(){this.loadRestaurants()}loadRestaurants(){let n=sessionStorage.getItem("userId"),r=R(this.db,`Owners/${n}/Restaurants`);le(r).then(i=>{if(i.exists()){let o=i.val();this.restaurants=Object.values(o),this.restaurants.length===1&&(localStorage.setItem("currentRestaurant",this.restaurants[0].id.toString()),console.log(this.restaurants[0].id.toString()),this.navigationService.NavigateTo("managerestaurant"))}else console.log("No restaurants found for this owner.")}).catch(i=>{console.error("Error loading restaurants:",i)})}setRestaurant(n){localStorage.setItem("currentRestaurant",n),this.navigationService.NavigateTo("managerestaurant")}static \u0275fac=function(r){return new(r||e)(D(ye))};static \u0275cmp=A({type:e,selectors:[["app-changerestaurant"]],standalone:!0,features:[x],decls:12,vars:1,consts:[[1,"displaybox"],[1,"logo"],[1,"flexcontainer"],[1,"buttons"],[1,"footstatic"],[1,"restaurant"],[1,"restaurant",3,"click"],["id","datavalve"]],template:function(r,i){r&1&&(m(0,"main")(1,"div",0)(2,"div",1)(3,"h1"),v(4,"EasyOrder"),g()(),m(5,"div",2)(6,"h1"),v(7,"Wybierz restauracj\u0119"),g(),m(8,"div",3),or(9,Dj,2,0,"p")(10,Tj,2,0),g()(),k(11,"div",4),g()()),r&2&&(N(9),sr(i.restaurants.length===0?9:10))},styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;padding:16px;position:relative}.displaybox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center;position:relative}.logo[_ngcontent-%COMP%]{display:flex;font-size:45%;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center;margin-bottom:48px}.flexcontainer[_ngcontent-%COMP%]{display:flex;font-size:60%;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center}.flexcontainer[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center;font-size:110%;color:#000;font-weight:600}.flexcontainer[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   .restaurant[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center;background:#fff;padding:24px;font-size:110%;color:#000;font-weight:600;letter-spacing:2px;border:1px solid #000000;transition:all .5s;margin-bottom:24px}.flexcontainer[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   .restaurant[_ngcontent-%COMP%]   #datavalve[_ngcontent-%COMP%]{color:#000;font-weight:800;letter-spacing:2px}"]})}return e})();var Db=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275cmp=A({type:e,selectors:[["app-restaurantbilings"]],standalone:!0,features:[x],decls:9,vars:0,consts:[[1,"displaybox"],[1,"logo"],[1,"buttons"],[1,"footstatic"]],template:function(r,i){r&1&&(m(0,"main")(1,"div",0)(2,"div",1)(3,"h1"),v(4,"EasyOrder"),g()(),m(5,"div",2)(6,"h1"),v(7,"Brak Projektu!"),g()(),k(8,"div",3),g()())},styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;padding:32px;position:relative;background:#000!important;color:#ffa700}.displaybox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center;position:relative}.logo[_ngcontent-%COMP%]{display:flex;font-size:45%;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center;margin-bottom:48px}body[_ngcontent-%COMP%]{background:#000!important;color:#ffa700}h1[_ngcontent-%COMP%]{font-size:200%}"]})}return e})();var Sb=(()=>{class e{navigationService;constructor(n){this.navigationService=n,ie(he.firebaseConfig)}goToPage(n){this.navigationService.NavigateTo(n)}deleteaccount(){let n=F(),r=sessionStorage.getItem("userId"),i=R(n,`Owners/${r}`);Eo(i).then(()=>{console.log("owner deleted successfully"),this.navigationService.NavigateTo("landingpage")}).catch(o=>{console.error("Error deleting table:",o)})}static \u0275fac=function(r){return new(r||e)(D(ye))};static \u0275cmp=A({type:e,selectors:[["app-restaurantsettings"]],standalone:!0,features:[x],decls:17,vars:0,consts:[[1,"displaybox"],[1,"logo"],[1,"buttons"],[1,"alltablesqrcodes",3,"click"],[1,"tablesettings",3,"click"],[1,"waitersoptions",3,"click"],[1,"myrestaaurants",3,"click"],[1,"deleteaccount",3,"click"],[1,"footstatic"]],template:function(r,i){r&1&&(m(0,"main")(1,"div",0)(2,"div",1)(3,"h1"),v(4,"EasyOrder"),g()(),m(5,"div",2)(6,"button",3),b("click",function(){return i.goToPage("alltablesqrcodes")}),v(7,"Pobierz kody QR Stolik\xF3w"),g(),m(8,"button",4),b("click",function(){return i.goToPage("tablesettings")}),v(9,"Ustawienia Stolik\xF3w"),g(),m(10,"button",5),b("click",function(){return i.goToPage("waitersettings")}),v(11,"Opcje dotycz\u0105ce kelner\xF3w"),g(),m(12,"button",6),b("click",function(){return i.goToPage("changerestaurant")}),v(13,"Moje restauracje"),g(),m(14,"button",7),b("click",function(){return i.deleteaccount()}),v(15,"Usu\u0144 Konto"),g()(),k(16,"div",8),g()())},styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;padding:16px;position:relative}.displaybox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center;position:relative}.logo[_ngcontent-%COMP%]{display:flex;font-size:45%;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center;margin-bottom:48px}.buttons[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center}.buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;background:#fff;padding:24px;font-size:110%;color:#000;font-weight:600;letter-spacing:2px;border:1px solid #000000;transition:all .5s;margin-bottom:24px}"]})}return e})();var Tb=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275cmp=A({type:e,selectors:[["app-restaurantrevievs"]],standalone:!0,features:[x],decls:2,vars:0,template:function(r,i){r&1&&(m(0,"p"),v(1,"restaurantrevievs works!"),g())}})}return e})();var Mb=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275cmp=A({type:e,selectors:[["app-restaurantstats"]],standalone:!0,features:[x],decls:2,vars:0,template:function(r,i){r&1&&(m(0,"p"),v(1,"restaurantstats works!"),g())}})}return e})();function Mj(e,t){e&1&&(m(0,"p"),v(1,"Brak stolik\xF3w przypisanych do restauracji."),g())}function Aj(e,t){if(e&1){let n=Xe();m(0,"button",6),b("click",function(){let i=ke(n).$implicit,o=Se(2);return Fe(o.setTable(i.id))}),v(1),g()}if(e&2){let n=t.$implicit;N(),Et(" ",n.name," ")}}function Nj(e,t){if(e&1&&nn(0,Aj,2,1,"button",5,tn),e&2){let n=Se();rn(n.tables)}}var Ab=(()=>{class e{navigationService;tables=[];constructor(n){this.navigationService=n;let r=ie(he.firebaseConfig)}ngOnInit(){this.loadTables()}loadTables(){let n=F(),r=localStorage.getItem("currentRestaurant"),i=sessionStorage.getItem("userId");if(!r){console.error("No current restaurant found in local storage");return}let o=R(n,`Owners/${i}/Restaurants/${r}/Tables`);le(o).then(s=>{if(s.exists()){let a=s.val();this.tables=Object.values(a)}else console.log("No tables found")}).catch(s=>{console.error("Error loading tables:",s)})}setTable(n){localStorage.setItem("currentTable",n),this.goToPage("tableedit")}goToPage(n){this.navigationService.NavigateTo(n)}static \u0275fac=function(r){return new(r||e)(D(ye))};static \u0275cmp=A({type:e,selectors:[["app-tablemanage"]],standalone:!0,features:[x],decls:13,vars:1,consts:[[1,"displaybox"],[1,"logo"],[1,"buttons"],[1,"footstatic"],[3,"click"],[1,"table-button"],[1,"table-button",3,"click"]],template:function(r,i){r&1&&(m(0,"main")(1,"div",0)(2,"div",1)(3,"h1"),v(4,"EasyOrder"),g()(),m(5,"div",2),or(6,Mj,2,0,"p")(7,Nj,2,0),g(),m(8,"div",3)(9,"button",4),b("click",function(){return i.goToPage("tablecreate")}),v(10,"Dodaj stolik"),g(),m(11,"button",4),b("click",function(){return i.goToPage("tablegroupmanage")}),v(12,"Edytuj grupy"),g()()()()),r&2&&(N(6),sr(i.tables.length===0?6:7))},styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;padding:16px;position:relative}.displaybox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center;position:relative}.logo[_ngcontent-%COMP%]{display:flex;font-size:45%;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center;margin-bottom:48px}.buttons[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:flex-start;align-items:center;align-content:center}.buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{text-align:left;width:100%;background:#fff;padding:24px;font-size:110%;color:#000;font-weight:600;letter-spacing:2px;border:1px solid #000000;transition:all .5s;margin-bottom:24px}.footstatic[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center}.footstatic[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:calc(100% - 16px);background:#fff;padding:24px;font-size:110%;color:#000;font-weight:600;letter-spacing:2px;border:1px solid #000000;transition:all .5s;margin-bottom:24px;margin-right:8px}"]})}return e})();var Nb=(()=>{class e{navigationService;name="";description="";constructor(n){this.navigationService=n,ie(he.firebaseConfig)}onSubmit(n){n.preventDefault();let r=Date.now().toString(),i="0g",o=localStorage.getItem("currentRestaurant");if(!o){alert("Nie wybrano restauracji.");return}let s={id:r,group_id:i,name:this.name,is_blocked:!1,description:this.description?this.description:""};this.saveTable(s,o)}saveTable(n,r){let i=F(),o=R(i,`Owners/${sessionStorage.getItem("userId")}/Restaurants/${r}/Tables`);Ze(o,{[n.id]:n}).then(()=>{console.log("Stolik dodany pomy\u015Blnie:",n),this.navigationService.NavigateTo("tablemanage"),this.resetForm()}).catch(s=>{console.error("B\u0142\u0105d podczas dodawania stolika:",s)})}resetForm(){this.name="",this.description=""}static \u0275fac=function(r){return new(r||e)(D(ye))};static \u0275cmp=A({type:e,selectors:[["app-tablecreate"]],standalone:!0,features:[x],decls:14,vars:2,consts:[[1,"displaybox"],[1,"logo"],[1,"buttons"],[3,"ngSubmit"],["type","text","id","name","name","name","placeholder","Nazwa Stolika","required","",3,"ngModelChange","ngModel"],["type","text","id","description","name","description","placeholder","Opis . . . ",3,"ngModelChange","ngModel"],["type","submit",1,"addtable"],[1,"footstatic"]],template:function(r,i){r&1&&(m(0,"main")(1,"div",0)(2,"div",1)(3,"h1"),v(4,"EasyOrder"),g()(),m(5,"div",2)(6,"form",3),b("ngSubmit",function(s){return i.onSubmit(s)}),m(7,"div")(8,"input",4),Ve("ngModelChange",function(s){return Ue(i.name,s)||(i.name=s),s}),g()(),m(9,"div")(10,"input",5),Ve("ngModelChange",function(s){return Ue(i.description,s)||(i.description=s),s}),g()(),m(11,"button",6),v(12,"Dodaj stolik"),g()()(),k(13,"div",7),g()()),r&2&&(N(8),Le("ngModel",i.name),N(2),Le("ngModel",i.description))},dependencies:[lt,cn,Dt,sn,an,Ht,$t,Bt],styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;padding:16px;position:relative}.displaybox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center;position:relative}.logo[_ngcontent-%COMP%]{display:flex;font-size:45%;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center;margin-bottom:48px}.buttons[_ngcontent-%COMP%]{width:100%;border:1px solid #000000;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:flex-start;align-items:center;align-content:center}.buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;background:#fff;padding:24px;font-size:110%;color:#000;font-weight:600;letter-spacing:2px;border:1px solid #000000;transition:all .5s;margin-bottom:24px}.footstatic[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center}.footstatic[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:calc(100% - 16px);background:#fff;padding:24px;font-size:110%;color:#000;font-weight:600;letter-spacing:2px;border:1px solid #000000;transition:all .5s;margin-bottom:24px;margin-right:8px}form[_ngcontent-%COMP%]{width:100%;padding:24px;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;border:1px solid #000000;height:24px;margin-bottom:16px}input[_ngcontent-%COMP%]:last-child{height:100px}"]})}return e})();function xj(e,t){if(e&1){let n=Xe();m(0,"button",9),b("click",function(){ke(n);let i=Se(2);return Fe(i.blockTable())}),v(1,"Zablokuj"),g()}}function Rj(e,t){if(e&1){let n=Xe();m(0,"button",9),b("click",function(){ke(n);let i=Se(2);return Fe(i.unlockTable())}),v(1,"Odblokuj"),g()}}function Oj(e,t){if(e&1&&or(0,xj,2,0,"button")(1,Rj,2,0,"button"),e&2){let n=Se();sr((n.table==null?null:n.table.is_blocked)==!1?0:-1),N(),sr((n.table==null?null:n.table.is_blocked)==!0?1:-1)}}var xb=(()=>{class e{navigationService;tableId=null;table=null;tableGroupName=null;groupColor=null;tableBlockAllowed=!0;restaurantId="";constructor(n){this.navigationService=n,ie(he.firebaseConfig)}ngOnInit(){this.loadTable(),this.loadSettings()}loadSettings(){let n=sessionStorage.getItem("userId");if(this.restaurantId=localStorage.getItem("currentRestaurant")??"",!n||!this.restaurantId){console.error("Missing owner or restaurant ID");return}let r=F(),i=R(r,`Owners/${n}/Restaurants/${this.restaurantId}/settings`);le(i).then(o=>{if(o.exists()){let s=o.val();this.tableBlockAllowed=s.table_block_allowed}else console.log("No settings found for this restaurant")}).catch(o=>{console.error("Error loading settings:",o)})}deleteTable(){let n=F(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant");if(!this.tableId||!r||!i){console.error("Missing table, owner, or restaurant ID");return}let o=R(n,`Owners/${r}/Restaurants/${i}/Tables/${this.tableId}`);Eo(o).then(()=>{console.log("Table deleted successfully"),this.navigationService.NavigateTo("tablemanage")}).catch(s=>{console.error("Error deleting table:",s)})}blockTable(){let n=F(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant");if(!this.tableId||!r||!i){console.error("Missing table, owner, or restaurant ID");return}let o=R(n,`Owners/${r}/Restaurants/${i}/Tables/${this.tableId}`);Ze(o,{is_blocked:!0}).then(()=>{console.log("Table blocked successfully"),location.reload()}).catch(s=>{console.error("Error blocking table:",s)})}unlockTable(){let n=F(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant");if(!this.tableId||!r||!i){console.error("Missing table, owner, or restaurant ID");return}let o=R(n,`Owners/${r}/Restaurants/${i}/Tables/${this.tableId}`);Ze(o,{is_blocked:!1}).then(()=>{console.log("Table unlocked successfully"),location.reload()}).catch(s=>{console.error("Error blocking table:",s)})}saveTable(){}showQRCode(){this.navigationService.NavigateTo("showtableqr")}loadTable(){if(this.tableId=localStorage.getItem("currentTable"),!this.tableId){console.error("No current table found in local storage");return}let n=F(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant"),o=R(n,`Owners/${r}/Restaurants/${i}/Tables/${this.tableId}`);le(o).then(s=>{s.exists()?(this.table=s.val(),this.loadTableGroup()):console.log("No table found")}).catch(s=>{console.error("Error loading table:",s)})}loadTableGroup(){let n=F(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant");if(!this.table?.group_id||this.table.group_id==="0g"){this.tableGroupName="Stoliki bez grupy",this.groupColor="#000000";return}let o=R(n,`Owners/${r}/Restaurants/${i}/TableGroups/${this.table.group_id}`);le(o).then(s=>{if(s.exists()){let a=s.val();this.tableGroupName=a.name,this.groupColor=a.color}else console.log("No group found for this table")}).catch(s=>{console.error("Error loading group:",s)})}static \u0275fac=function(r){return new(r||e)(D(ye))};static \u0275cmp=A({type:e,selectors:[["app-tableedit"]],standalone:!0,features:[x],decls:25,vars:6,consts:[[1,"displaybox"],[1,"logo"],[1,"flexcontainer"],[1,"buttons"],[1,"colorbar"],[1,"head"],["name","description","id","description","placeholder","Description","readonly","",3,"value"],[1,"actionbtns"],[1,"arow"],[3,"click"],[1,"footstatic"]],template:function(r,i){r&1&&(m(0,"main")(1,"div",0)(2,"div",1)(3,"h1"),v(4,"EasyOrder"),g()(),m(5,"div",2)(6,"div",3),k(7,"div",4),m(8,"div",5)(9,"h3"),v(10),g(),m(11,"h3"),v(12),g()(),k(13,"textarea",6),m(14,"div",7)(15,"div",8)(16,"button",9),b("click",function(){return i.deleteTable()}),v(17,"Usu\u0144 stolik"),g(),or(18,Oj,2,2),g(),m(19,"div",8)(20,"button"),v(21,"Usu\u0144 zam\xF3wienie"),g(),m(22,"button",9),b("click",function(){return i.showQRCode()}),v(23,"poka\u017C kod qr"),g()()()()(),k(24,"div",10),g()()),r&2&&(N(7),tl("background-color",i.groupColor),N(3),ar(i.table==null?null:i.table.name),N(2),ar(i.tableGroupName),N(),On("value",i.table==null?null:i.table.description),N(5),sr(i.tableBlockAllowed==!0?18:-1))},styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;padding:16px;position:relative}.displaybox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center;position:relative}.flexcontainer[_ngcontent-%COMP%]{width:100%}.logo[_ngcontent-%COMP%]{display:flex;font-size:45%;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center;margin-bottom:48px}.buttons[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center;border:1px solid #000000}.buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:calc(100% - 24px);background:#fff;padding:24px;font-size:110%;color:#000;font-weight:600;letter-spacing:2px;border:1px solid #000000;transition:all .5s}.footstatic[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center}.footstatic[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;background:#fff;padding:24px;font-size:110%;color:#000;font-weight:600;letter-spacing:2px;border:1px solid #000000;transition:all .5s;margin-bottom:24px;margin-right:8px}.arow[_ngcontent-%COMP%]{width:calc(100% - 24px);display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:space-evenly;align-items:center;align-content:center}.arow[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:95%;width:calc(100% - 24px);margin-bottom:16px}.arow[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-child{margin-right:8px}.arow[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-child{margin-left:8px}.actionbtns[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center}.colorbar[_ngcontent-%COMP%]{height:24px;width:100%}.savebtn[_ngcontent-%COMP%]{margin-top:16px;margin-bottom:16px}.head[_ngcontent-%COMP%]{width:100%;padding:8px;display:flex;flex-direction:row;justify-content:space-between;align-items:center;align-content:center}.head[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0}textarea[_ngcontent-%COMP%]{width:calc(100% - 24px);height:100px;margin-bottom:16px;resize:none;border:1px solid #000000}"]})}return e})();var Rb=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275cmp=A({type:e,selectors:[["app-qrapi"]],standalone:!0,features:[x],decls:8,vars:0,consts:[["src","https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=https%3A%2F%2Feasyorder.mandarin.com.pl%2Fsettable%3Ftableid%3D testi d%26uniqueLinkToken%3D testtoken4233"]],template:function(r,i){r&1&&(m(0,"main")(1,"h1"),v(2,"Wygenerowany kod qr:"),g(),k(3,"img",0),m(4,"p"),v(5,"tableid : testid"),g(),m(6,"p"),v(7,"uniqueLinkToken: testtoken4233"),g()())}})}return e})();var Ob=(()=>{class e{route;router;tableId=null;uniqueLinkToken=null;constructor(n,r){this.route=n,this.router=r,ie(he.firebaseConfig)}ngOnInit(){this.route.queryParams.subscribe(n=>{this.tableId=n.tableid||null,this.uniqueLinkToken=n.uniqueLinkToken||null})}setTable(n){let r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant"),o=F();if(!r||!i||!this.tableId||!this.uniqueLinkToken){console.error("Missing required data");return}let s=R(o,`Owners/${r}/Restaurants/${i}/settings`);le(s).then(a=>{a.exists()?a.val().order_number_typed_by_waiter_required?this.verifyOrderNumber(n,r,i):this.saveTableAssignment(n):console.error("Settings not found")}).catch(a=>{console.error("Error loading settings:",a)})}verifyOrderNumber(n,r,i){let o=F(),s=R(o,`Owners/${r}/Restaurants/${i}/Orders`);le(s).then(a=>{if(a.exists()){let c=a.val();Object.values(c).some(u=>u.name===n)?this.saveTableAssignment(n):console.error("Order not found")}else console.log("No orders found")}).catch(a=>{console.error("Error checking order number:",a)})}saveTableAssignment(n){localStorage.setItem("currentTable",this.tableId),localStorage.setItem("uniqueLinkToken",this.uniqueLinkToken),localStorage.setItem("orderNumber",n),this.router.navigate(["/tableordered"])}static \u0275fac=function(r){return new(r||e)(D(cr),D(Xi))};static \u0275cmp=A({type:e,selectors:[["app-settable"]],standalone:!0,features:[x],decls:13,vars:0,consts:[["orderNumberInput",""],[1,"displaybox"],[1,"logo"],[1,"buttons"],["type","number","placeholder","numer zam\xF3wienia"],[3,"click"],[1,"footstatic"]],template:function(r,i){if(r&1){let o=Xe();m(0,"main")(1,"div",1)(2,"div",2)(3,"h1"),v(4,"EasyOrder"),g()(),m(5,"div",3)(6,"label"),v(7,"Wprowad\u017A numer zam\xF3wienia"),g(),k(8,"input",4,0),m(10,"button",5),b("click",function(){ke(o);let a=rC(9);return Fe(i.setTable(a.value))}),v(11,"Przypisz stolik"),g()(),k(12,"div",6),g()()}}})}return e})();function Pj(e,t){if(e&1){let n=Xe();m(0,"div",8),b("dragstart",function(i){let o=ke(n).$implicit,s=Se();return Fe(s.onDragStart(i,o))}),m(1,"button",9),b("click",function(){let i=ke(n).$implicit,o=Se();return Fe(o.setTable(i.id))}),v(2),g()()}if(e&2){let n=t.$implicit;N(2),Et(" ",n.name," ")}}function kj(e,t){if(e&1){let n=Xe();m(0,"div",8),b("dragstart",function(i){let o=ke(n).$implicit,s=Se(2);return Fe(s.onDragStart(i,o))}),m(1,"button",9),b("click",function(){let i=ke(n).$implicit,o=Se(2);return Fe(o.setTable(i.id))}),v(2),g()()}if(e&2){let n=t.$implicit;N(2),Et(" ",n.name," ")}}function Fj(e,t){if(e&1){let n=Xe();m(0,"div",2),b("dragover",function(i){ke(n);let o=Se();return Fe(o.allowDrop(i))})("drop",function(i){let o=ke(n).$implicit,s=Se();return Fe(s.onDrop(i,o.id))}),m(1,"div",3)(2,"h3"),v(3),g()(),nn(4,kj,3,1,"div",4,tn),g()}if(e&2){let n=t.$implicit,r=Se();N(3),ar(n.name),N(),rn(r.getTablesForGroup(n.id))}}var Pb=(()=>{class e{navigationService;cd;tableGroups=[];tables=[];draggedTableId=null;ungroupedTables=[];constructor(n,r){this.navigationService=n,this.cd=r,ie(he.firebaseConfig)}ngOnInit(){this.loadGroupsAndTables()}loadGroupsAndTables(){let n=F(),r=localStorage.getItem("currentRestaurant"),i=sessionStorage.getItem("userId");if(!r){console.error("No current restaurant found in local storage");return}let o=R(n,`Owners/${i}/Restaurants/${r}/Tables`),s=R(n,`Owners/${i}/Restaurants/${r}/TableGroups`);le(o).then(a=>{a.exists()?(this.tables=Object.values(a.val()),this.ungroupedTables=this.tables.filter(c=>c.group_id==="0g")):console.log("No tables found")}).catch(a=>{console.error("Error loading tables:",a)}),le(s).then(a=>{a.exists()?this.tableGroups=Object.values(a.val()):console.log("No table groups found")}).catch(a=>{console.error("Error loading table groups:",a)})}getTablesForGroup(n){return this.tables.filter(r=>r.group_id===n)}onDragStart(n,r){this.draggedTableId=r.id,n.dataTransfer?.setData("text",r.id)}onDrop(n,r){n.preventDefault();let i=this.draggedTableId||n.dataTransfer?.getData("text");if(i){let o=this.tables.find(s=>s.id===i);o&&(o.group_id==="0g"&&(this.ungroupedTables=this.ungroupedTables.filter(s=>s.id!==o.id)),o.group_id=r,r==="0g"&&this.ungroupedTables.push(o),this.updateTableGroup(o),this.cd.detectChanges(),this.draggedTableId=null)}}allowDrop(n){n.preventDefault()}updateTableGroup(n){let r=F(),i=localStorage.getItem("currentRestaurant"),o=sessionStorage.getItem("userId");if(!i){console.error("No current restaurant found in local storage");return}let s=R(r,`Owners/${o}/Restaurants/${i}/Tables/${n.id}`);Ze(s,{group_id:n.group_id}).then(()=>{console.log(`Table ${n.name} moved to group ${n.group_id}`)}).catch(a=>{console.error("Error updating table group:",a)})}setTable(n){localStorage.setItem("currentTable",n),this.goToPage("tableedit")}goToPage(n){this.navigationService.NavigateTo(n)}static \u0275fac=function(r){return new(r||e)(D(ye),D(Pn))};static \u0275cmp=A({type:e,selectors:[["app-tablegroupmanage"]],standalone:!0,features:[x],decls:16,vars:0,consts:[[1,"displaybox"],[1,"logo"],[1,"table-group",3,"dragover","drop"],[1,"head"],["draggable","true"],[1,"table-group"],[1,"footstatic"],[3,"click"],["draggable","true",3,"dragstart"],[1,"table-button",3,"click"]],template:function(r,i){r&1&&(m(0,"main")(1,"div",0)(2,"div",1)(3,"h1"),v(4,"EasyOrder"),g()(),m(5,"div",2),b("dragover",function(s){return i.allowDrop(s)})("drop",function(s){return i.onDrop(s,"0g")}),m(6,"div",3)(7,"h3"),v(8,"Stoliki bez grupy"),g()(),nn(9,Pj,3,1,"div",4,tn),g(),nn(11,Fj,6,1,"div",5,tn),m(13,"div",6)(14,"button",7),b("click",function(){return i.goToPage("tablegroupcreate")}),v(15,"Dodaj now\u0105 grup\u0119"),g()()()()),r&2&&(N(9),rn(i.ungroupedTables),N(2),rn(i.tableGroups))},styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;padding:16px;position:relative}.displaybox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center;position:relative}.logo[_ngcontent-%COMP%]{display:flex;font-size:45%;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center;margin-bottom:48px}.buttons[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:flex-start;align-items:center;align-content:center}.buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{text-align:left;width:100%;background:#fff;padding:24px;font-size:110%;color:#000;font-weight:600;letter-spacing:2px;border:1px solid #000000;transition:all .5s;margin-bottom:24px}.footstatic[_ngcontent-%COMP%]{width:100%}.footstatic[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;background:#fff;padding:24px;font-size:110%;color:#000;font-weight:600;letter-spacing:2px;border:1px solid #000000;transition:all .5s;margin-bottom:24px;margin-right:8px}.table-group[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:flex-start;align-items:flex-start;align-content:center;border:1px solid #000000;padding:0;margin-bottom:20px;min-height:100px}.table-group[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{width:100%;padding:8px;height:40px;font-size:100%;border:1px solid #000000}.table-group[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0}.table-group[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:100%}.table-button[_ngcontent-%COMP%]{width:100%;border:1px solid #000000;height:60px;display:block;text-align:left;margin-bottom:0;padding:8px;font-weight:700}.table-group[_ngcontent-%COMP%]:hover{background-color:#f1f1f1}"]})}return e})();var kb=(()=>{class e{navigationService;name="";description="";color="";location="";constructor(n){this.navigationService=n,ie(he.firebaseConfig)}onSubmit(n){n.preventDefault();let r=Date.now().toString(),i=localStorage.getItem("currentRestaurant");if(!i){alert("Nie wybrano restauracji.");return}let o={id:r,name:this.name,color:this.color,description:this.description?this.description:"",location:this.location?this.location:""};this.saveTableGroup(o,i)}saveTableGroup(n,r){let i=F(),o=R(i,`Owners/${sessionStorage.getItem("userId")}/Restaurants/${r}/TableGroups`);Ze(o,{[n.id]:n}).then(()=>{console.log("Grupa stolik\xF3w dodana pomy\u015Blnie:",n),this.navigationService.NavigateTo("tablegroupmanage"),this.resetForm()}).catch(s=>{console.error("B\u0142\u0105d podczas dodawania grupy stolik\xF3w:",s)})}resetForm(){this.name="",this.description="",this.color="",this.location=""}static \u0275fac=function(r){return new(r||e)(D(ye))};static \u0275cmp=A({type:e,selectors:[["app-tablegroupcreate"]],standalone:!0,features:[x],decls:18,vars:4,consts:[[1,"displaybox"],[1,"logo"],[1,"buttons"],[3,"ngSubmit"],["type","text","id","name","name","name","placeholder","Nazwa Grupy Stolika","required","",3,"ngModelChange","ngModel"],["type","text","id","description","name","description","placeholder","Opis grupy . . . ",3,"ngModelChange","ngModel"],["type","color","id","color","name","color","placeholder","Kolor grupy",3,"ngModelChange","ngModel"],["type","text","id","location","name","location","placeholder","Lokalizacja grupy",3,"ngModelChange","ngModel"],["type","submit",1,"addtable"],[1,"footstatic"]],template:function(r,i){r&1&&(m(0,"main")(1,"div",0)(2,"div",1)(3,"h1"),v(4,"EasyOrder"),g()(),m(5,"div",2)(6,"form",3),b("ngSubmit",function(s){return i.onSubmit(s)}),m(7,"div")(8,"input",4),Ve("ngModelChange",function(s){return Ue(i.name,s)||(i.name=s),s}),g()(),m(9,"div")(10,"input",5),Ve("ngModelChange",function(s){return Ue(i.description,s)||(i.description=s),s}),g()(),m(11,"div")(12,"input",6),Ve("ngModelChange",function(s){return Ue(i.color,s)||(i.color=s),s}),g()(),m(13,"div")(14,"input",7),Ve("ngModelChange",function(s){return Ue(i.location,s)||(i.location=s),s}),g()(),m(15,"button",8),v(16,"Dodaj grup\u0119 stolik\xF3w"),g()()(),k(17,"div",9),g()()),r&2&&(N(8),Le("ngModel",i.name),N(2),Le("ngModel",i.description),N(2),Le("ngModel",i.color),N(2),Le("ngModel",i.location))},dependencies:[lt,cn,Dt,sn,an,Ht,$t,Bt]})}return e})();var No=eS(LD(),1);var xU=["qrcElement"],Uu=(()=>{class e{constructor(n,r){this.renderer=n,this.sanitizer=r,this.allowEmptyString=!1,this.colorDark="#000000ff",this.colorLight="#ffffffff",this.cssClass="qrcode",this.elementType="canvas",this.errorCorrectionLevel="M",this.margin=4,this.qrdata="",this.scale=4,this.width=10,this.qrCodeURL=new we,this.context=null}ngOnChanges(){return w(this,null,function*(){yield this.createQRCode()})}isValidQrCodeText(n){return this.allowEmptyString===!1?!(typeof n>"u"||n===""||n==="null"||n===null):!(typeof n>"u")}toDataURL(n){return new Promise((r,i)=>{(0,No.toDataURL)(this.qrdata,n,(o,s)=>{o?i(o):r(s)})})}toCanvas(n,r){return new Promise((i,o)=>{(0,No.toCanvas)(n,this.qrdata,r,s=>{s?o(s):i("success")})})}toSVG(n){return new Promise((r,i)=>{(0,No.toString)(this.qrdata,n,(o,s)=>{o?i(o):r(s)})})}renderElement(n){for(let r of this.qrcElement.nativeElement.childNodes)this.renderer.removeChild(this.qrcElement.nativeElement,r);this.renderer.appendChild(this.qrcElement.nativeElement,n)}createQRCode(){return w(this,null,function*(){this.version&&this.version>40?(console.warn("[angularx-qrcode] max value for `version` is 40"),this.version=40):this.version&&this.version<1?(console.warn("[angularx-qrcode]`min value for `version` is 1"),this.version=1):this.version!==void 0&&isNaN(this.version)&&(console.warn("[angularx-qrcode] version should be a number, defaulting to auto."),this.version=void 0);try{if(!this.isValidQrCodeText(this.qrdata))throw new Error("[angularx-qrcode] Field `qrdata` is empty, set 'allowEmptyString=\"true\"' to overwrite this behaviour.");this.isValidQrCodeText(this.qrdata)&&this.qrdata===""&&(this.qrdata=" ");let n={color:{dark:this.colorDark,light:this.colorLight},errorCorrectionLevel:this.errorCorrectionLevel,margin:this.margin,scale:this.scale,version:this.version,width:this.width},r=this.imageSrc,i=this.imageHeight||40,o=this.imageWidth||40;switch(this.elementType){case"canvas":{let s=this.renderer.createElement("canvas");this.context=s.getContext("2d"),this.toCanvas(s,n).then(()=>{if(this.ariaLabel&&this.renderer.setAttribute(s,"aria-label",`${this.ariaLabel}`),this.title&&this.renderer.setAttribute(s,"title",`${this.title}`),r&&this.context){this.centerImage=new Image(o,i),r!==this.centerImage.src&&(this.centerImage.crossOrigin="anonymous",this.centerImage.src=r),i!==this.centerImage.height&&(this.centerImage.height=i),o!==this.centerImage.width&&(this.centerImage.width=o);let a=this.centerImage;a&&(a.onload=()=>{this.context?.drawImage(a,s.width/2-o/2,s.height/2-i/2,o,i)})}this.renderElement(s),this.emitQRCodeURL(s)}).catch(a=>{console.error("[angularx-qrcode] canvas error:",a)});break}case"svg":{let s=this.renderer.createElement("div");this.toSVG(n).then(a=>{this.renderer.setProperty(s,"innerHTML",a);let c=s.firstChild;this.renderer.setAttribute(c,"height",`${this.width}`),this.renderer.setAttribute(c,"width",`${this.width}`),this.renderElement(c),this.emitQRCodeURL(c)}).catch(a=>{console.error("[angularx-qrcode] svg error:",a)});break}case"url":case"img":default:{let s=this.renderer.createElement("img");this.toDataURL(n).then(a=>{this.alt&&s.setAttribute("alt",this.alt),this.ariaLabel&&s.setAttribute("aria-label",this.ariaLabel),s.setAttribute("src",a),this.title&&s.setAttribute("title",this.title),this.renderElement(s),this.emitQRCodeURL(s)}).catch(a=>{console.error("[angularx-qrcode] img/url error:",a)})}}}catch(n){console.error("[angularx-qrcode] Error generating QR Code:",n.message)}})}convertBase64ImageUrlToBlob(n){let r=n.split(";base64,"),i=r[0].split(":")[1],o=atob(r[1]),s=new Uint8Array(o.length);for(let a=0;a<o.length;++a)s[a]=o.charCodeAt(a);return new Blob([s],{type:i})}emitQRCodeURL(n){let r=n.constructor.name;if(r===SVGSVGElement.name){let c=n.outerHTML,l=new Blob([c],{type:"image/svg+xml"}),u=URL.createObjectURL(l),d=this.sanitizer.bypassSecurityTrustUrl(u);this.qrCodeURL.emit(d);return}let i="";r===HTMLCanvasElement.name&&(i=n.toDataURL("image/png")),r===HTMLImageElement.name&&(i=n.src);let o=this.convertBase64ImageUrlToBlob(i),s=URL.createObjectURL(o),a=this.sanitizer.bypassSecurityTrustUrl(s);this.qrCodeURL.emit(a)}static{this.\u0275fac=function(r){return new(r||e)(D(ir),D(Ph))}}static{this.\u0275cmp=A({type:e,selectors:[["qrcode"]],viewQuery:function(r,i){if(r&1&&rl(xU,7),r&2){let o;rs(o=is())&&(i.qrcElement=o.first)}},inputs:{allowEmptyString:"allowEmptyString",colorDark:"colorDark",colorLight:"colorLight",cssClass:"cssClass",elementType:"elementType",errorCorrectionLevel:"errorCorrectionLevel",imageSrc:"imageSrc",imageHeight:"imageHeight",imageWidth:"imageWidth",margin:"margin",qrdata:"qrdata",scale:"scale",version:"version",width:"width",alt:"alt",ariaLabel:"ariaLabel",title:"title"},outputs:{qrCodeURL:"qrCodeURL"},features:[Mn],decls:2,vars:2,consts:[["qrcElement",""]],template:function(r,i){r&1&&k(0,"div",null,0),r&2&&Qw(i.cssClass)},encapsulation:2,changeDetection:0})}}return e})(),Bu=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=bn({type:e})}static{this.\u0275inj=En({})}}return e})();var jD=(()=>{class e{navigationService;tableId=null;table=null;tableGroupName=null;groupColor=null;uniqueLinkToken=null;constructor(n){this.navigationService=n,ie(he.firebaseConfig)}ngOnInit(){this.loadTable(),this.loadUniqueLinkToken()}loadUniqueLinkToken(){let n=F(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant"),o=R(n,`Owners/${r}/Restaurants/${i}/uniqueLinkToken`);le(o).then(s=>{s.exists()?this.uniqueLinkToken=s.val():console.log("No unique link token found")}).catch(s=>{console.error("Error loading unique link token:",s)})}deleteTable(){let n=F(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant");if(!this.tableId||!r||!i){console.error("Missing table, owner, or restaurant ID");return}let o=R(n,`Owners/${r}/Restaurants/${i}/Tables/${this.tableId}`);Eo(o).then(()=>{console.log("Table deleted successfully"),this.navigationService.NavigateTo("tablemanage")}).catch(s=>{console.error("Error deleting table:",s)})}blockTable(){let n=F(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant");if(!this.tableId||!r||!i){console.error("Missing table, owner, or restaurant ID");return}let o=R(n,`Owners/${r}/Restaurants/${i}/Tables/${this.tableId}`);Ze(o,{is_blocked:!0}).then(()=>{console.log("Table blocked successfully"),location.reload()}).catch(s=>{console.error("Error blocking table:",s)})}unlockTable(){let n=F(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant");if(!this.tableId||!r||!i){console.error("Missing table, owner, or restaurant ID");return}let o=R(n,`Owners/${r}/Restaurants/${i}/Tables/${this.tableId}`);Ze(o,{is_blocked:!1}).then(()=>{console.log("Table unlocked successfully"),location.reload()}).catch(s=>{console.error("Error unlocking table:",s)})}saveTable(){}loadTable(){if(this.tableId=localStorage.getItem("currentTable"),!this.tableId){console.error("No current table found in local storage");return}let n=F(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant"),o=R(n,`Owners/${r}/Restaurants/${i}/Tables/${this.tableId}`);le(o).then(s=>{s.exists()?(this.table=s.val(),this.loadTableGroup()):console.log("No table found")}).catch(s=>{console.error("Error loading table:",s)})}loadTableGroup(){let n=F(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant");if(!this.table?.group_id||this.table.group_id==="0g"){this.tableGroupName="Stoliki bez grupy",this.groupColor="#000000";return}let o=R(n,`Owners/${r}/Restaurants/${i}/TableGroups/${this.table.group_id}`);le(o).then(s=>{if(s.exists()){let a=s.val();this.tableGroupName=a.name,this.groupColor=a.color}else console.log("No group found for this table")}).catch(s=>{console.error("Error loading group:",s)})}getQRCodeData(){let n=this.table?.id||"",r=this.uniqueLinkToken||"";return`https://easyorder.mandarin.com.pl/settable%3Ftableid%3D${n}%26uniqueLinkToken%3D${r}`}static \u0275fac=function(r){return new(r||e)(D(ye))};static \u0275cmp=A({type:e,selectors:[["app-showtableqr"]],standalone:!0,features:[x],decls:3,vars:13,consts:[[1,"qrcodeImage"],[3,"qrdata","allowEmptyString","alt","ariaLabel","cssClass","colorDark","colorLight","elementType","errorCorrectionLevel","margin","scale","title","width"]],template:function(r,i){r&1&&(m(0,"main")(1,"div",0),k(2,"qrcode",1),g()()),r&2&&(N(2),On("qrdata","https://easyorder.mandarin.com.pl/settable?tableid="+((i.table==null?null:i.table.id)||"")+"&uniqueLinkToken="+(i.uniqueLinkToken||""))("allowEmptyString",!0)("alt","A custom alt attribute")("ariaLabel","QR Code image with the following content...")("cssClass","center")("colorDark","#000000ff")("colorLight","#ffffffff")("elementType","img")("errorCorrectionLevel","H")("margin",4)("scale",1)("title","A custom title attribute")("width",300))},dependencies:[Bu,Uu]})}return e})();var UD=(()=>{class e{tableChangeAllowed=!1;tableBlockAllowed=!1;restaurantId=null;constructor(){ie(he.firebaseConfig)}ngOnInit(){this.loadSettings()}loadSettings(){let n=sessionStorage.getItem("userId");if(this.restaurantId=localStorage.getItem("currentRestaurant"),!n||!this.restaurantId){console.error("Missing owner or restaurant ID");return}let r=F(),i=R(r,`Owners/${n}/Restaurants/${this.restaurantId}/settings`);le(i).then(o=>{if(o.exists()){let s=o.val();this.tableChangeAllowed=s.table_change_allowed,this.tableBlockAllowed=s.table_block_allowed}else console.log("No settings found for this restaurant")}).catch(o=>{console.error("Error loading settings:",o)})}toggleTableChangeAllowed(){this.tableChangeAllowed=!this.tableChangeAllowed,this.saveSettings()}toggleTableBlockAllowed(){this.tableBlockAllowed=!this.tableBlockAllowed,this.saveSettings()}saveSettings(){let n=sessionStorage.getItem("userId");if(!n||!this.restaurantId){console.error("Missing owner or restaurant ID");return}let r=F(),i=R(r,`Owners/${n}/Restaurants/${this.restaurantId}/settings`);Ze(i,{table_change_allowed:this.tableChangeAllowed,table_block_allowed:this.tableBlockAllowed}).then(()=>{console.log("Settings updated successfully")}).catch(o=>{console.error("Error updating settings:",o)})}static \u0275fac=function(r){return new(r||e)};static \u0275cmp=A({type:e,selectors:[["app-tablesettings"]],standalone:!0,features:[x],decls:15,vars:2,consts:[[1,"displaybox"],[1,"logo"],[1,"buttons"],[3,"click"],[1,"footstatic"]],template:function(r,i){r&1&&(m(0,"main")(1,"div",0)(2,"div",1)(3,"h1"),v(4,"EasyOrder"),g()(),m(5,"div",2)(6,"label"),v(7,"Opcja Zmiany stolika:"),g(),m(8,"button",3),b("click",function(){return i.toggleTableChangeAllowed()}),v(9),g(),m(10,"label"),v(11,"Opcja blokowania stolik\xF3w:"),g(),m(12,"button",3),b("click",function(){return i.toggleTableBlockAllowed()}),v(13),g()(),k(14,"div",4),g()()),r&2&&(N(9),Et(" ",i.tableChangeAllowed?"W\u0142\u0105czona":"Wy\u0142\u0105czona"," "),N(4),Et(" ",i.tableBlockAllowed?"W\u0142\u0105czona":"Wy\u0142\u0105czona"," "))}})}return e})();var RU=["pin"],BD=(()=>{class e{order_number_typed_by_waiter_required=!1;waiter_access_pin=1234;restaurantId=null;pinRef;constructor(){ie(he.firebaseConfig)}ngOnInit(){this.loadSettings()}ngAfterViewInit(){this.pinRef||console.error("PIN input element not found")}loadSettings(){let n=sessionStorage.getItem("userId");if(this.restaurantId=localStorage.getItem("currentRestaurant"),!n||!this.restaurantId){console.error("Missing owner or restaurant ID");return}let r=F(),i=R(r,`Owners/${n}/Restaurants/${this.restaurantId}/settings`);le(i).then(o=>{if(o.exists()){let s=o.val();this.order_number_typed_by_waiter_required=s.order_number_typed_by_waiter_required,this.waiter_access_pin=s.waiter_access_pin}else console.log("No settings found for this restaurant")}).catch(o=>{console.error("Error loading settings:",o)})}toggleTableChangeAllowed(){this.order_number_typed_by_waiter_required=!this.order_number_typed_by_waiter_required,this.saveSettings()}toggleTableBlockAllowed(){this.pinRef&&this.pinRef.nativeElement?(this.waiter_access_pin=this.pinRef.nativeElement.value,this.saveSettings()):console.error("PIN input element not available")}saveSettings(){let n=sessionStorage.getItem("userId");if(!n||!this.restaurantId){console.error("Missing owner or restaurant ID");return}let r=F(),i=R(r,`Owners/${n}/Restaurants/${this.restaurantId}/settings`);Ze(i,{order_number_typed_by_waiter_required:this.order_number_typed_by_waiter_required,waiter_access_pin:this.waiter_access_pin}).then(()=>{console.log("Settings updated successfully")}).catch(o=>{console.error("Error updating settings:",o)})}static \u0275fac=function(r){return new(r||e)};static \u0275cmp=A({type:e,selectors:[["app-waitersettings"]],viewQuery:function(r,i){if(r&1&&rl(RU,5),r&2){let o;rs(o=is())&&(i.pinRef=o.first)}},standalone:!0,features:[x],decls:17,vars:2,consts:[["pin",""],[1,"displaybox"],[1,"logo"],[1,"buttons"],[3,"click"],["type","number",3,"value"],[1,"footstatic"]],template:function(r,i){if(r&1){let o=Xe();m(0,"main")(1,"div",1)(2,"div",2)(3,"h1"),v(4,"EasyOrder"),g()(),m(5,"div",3)(6,"label"),v(7,"Opcja Zmiany stolika:"),g(),m(8,"button",4),b("click",function(){return ke(o),Fe(i.toggleTableChangeAllowed())}),v(9),g(),m(10,"label"),v(11,"Opcja blokowania stolik\xF3w:"),g(),k(12,"input",5,0),m(14,"button",4),b("click",function(){return ke(o),Fe(i.toggleTableBlockAllowed())}),v(15,"Update PIN"),g()(),k(16,"div",6),g()()}r&2&&(N(9),Et(" ",i.order_number_typed_by_waiter_required?"W\u0142\u0105czona":"Wy\u0142\u0105czona"," "),N(3),On("value",i.waiter_access_pin))}})}return e})();function OU(e,t){if(e&1&&(m(0,"div",2),k(1,"qrcode",3),g()),e&2){let n=t.$implicit,r=Se();N(),On("qrdata",r.getQRCodeData(n.id))("allowEmptyString",!0)("alt","QR code for table "+n.name)("cssClass","center")("colorDark","#000000ff")("colorLight","#ffffffff")("elementType","img")("errorCorrectionLevel","H")("margin",4)("scale",1)("width",300)}}var $D=(()=>{class e{tables=[];uniqueLinkToken=null;constructor(){ie(he.firebaseConfig)}ngOnInit(){this.loadTables(),this.loadUniqueLinkToken()}loadTables(){let n=sessionStorage.getItem("userId"),r=localStorage.getItem("currentRestaurant");if(!n||!r){console.error("Missing owner or restaurant ID");return}let i=F(),o=R(i,`Owners/${n}/Restaurants/${r}/Tables`);le(o).then(s=>{s.exists()?this.tables=Object.values(s.val()):console.log("No tables found")}).catch(s=>{console.error("Error loading tables:",s)})}loadUniqueLinkToken(){let n=F(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant"),o=R(n,`Owners/${r}/Restaurants/${i}/uniqueLinkToken`);le(o).then(s=>{s.exists()?this.uniqueLinkToken=s.val():console.log("No unique link token found")}).catch(s=>{console.error("Error loading unique link token:",s)})}getQRCodeData(n){let r=this.uniqueLinkToken||"";return`https://easyorder.mandarin.com.pl/settable?tableid=${n}&uniqueLinkToken=${r}`}printQRCodePage(){window.print()}static \u0275fac=function(r){return new(r||e)};static \u0275cmp=A({type:e,selectors:[["app-alltableqrcodes"]],standalone:!0,features:[x],decls:6,vars:0,consts:[[3,"click"],[1,"qr-code-container"],[1,"qr-container"],[3,"qrdata","allowEmptyString","alt","cssClass","colorDark","colorLight","elementType","errorCorrectionLevel","margin","scale","width"]],template:function(r,i){r&1&&(m(0,"div")(1,"button",0),b("click",function(){return i.printQRCodePage()}),v(2,"Print QR Codes"),g()(),m(3,"div",1),nn(4,OU,2,11,"div",2,tn),g()),r&2&&(N(4),rn(i.tables))},dependencies:[Bu,Uu],styles:[".qr-code-container[_ngcontent-%COMP%]{width:100%;min-height:max-content;display:flex;flex-wrap:wrap;justify-content:center}.qr-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;flex-wrap:nowrap;width:375px;height:565px;background:url(https://cdn1.mandarin.com.pl/qrbg2.png) no-repeat center center;background-size:cover;margin:10px;padding:10px;text-align:center;border:1px dashed black}@media print{button[_ngcontent-%COMP%]{display:none}.qr-code-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-between;margin:0;padding:0}.qr-code-box[_ngcontent-%COMP%]{width:calc(50% - 10px);height:565px;margin:5px;text-align:center;page-break-inside:avoid}.qr-code-container[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:nth-child(2n){page-break-after:always}body[_ngcontent-%COMP%]{background-color:#fff;margin:0}}"]})}return e})();var HD=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275cmp=A({type:e,selectors:[["app-tableordered"]],standalone:!0,features:[x],decls:2,vars:0,template:function(r,i){r&1&&(m(0,"p"),v(1,"tableordered works!"),g())}})}return e})();var WD=[{path:"",component:jm},{path:"landingpage",component:jm},{path:"register",component:wb},{path:"login",component:KE},{path:"newrestaurant",component:Cb},{path:"managerestaurant",component:Ib},{path:"changerestaurant",component:bb},{path:"restaurantbilings",component:Db},{path:"restaurantsettings",component:Sb},{path:"tablemanage",component:Ab},{path:"tablecreate",component:Nb},{path:"tableedit",component:xb},{path:"restaurantstats",component:Mb},{path:"restaurantrevievs",component:Tb},{path:"qrapi",component:Rb},{path:"settable",component:Ob},{path:"tablegroupcreate",component:kb},{path:"tablegroupmanage",component:Pb},{path:"showtableqr",component:jD},{path:"tablesettings",component:UD},{path:"waitersettings",component:BD},{path:"alltablesqrcodes",component:$D},{path:"tableordered",component:HD}];TC(hI,{providers:[dI(WD),{provide:lt}]});
