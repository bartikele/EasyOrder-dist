var M2=Object.create;var bp=Object.defineProperty,N2=Object.defineProperties,R2=Object.getOwnPropertyDescriptor,O2=Object.getOwnPropertyDescriptors,P2=Object.getOwnPropertyNames,Sw=Object.getOwnPropertySymbols,k2=Object.getPrototypeOf,Dw=Object.prototype.hasOwnProperty,L2=Object.prototype.propertyIsEnumerable;var Aw=(e,t,n)=>t in e?bp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,K=(e,t)=>{for(var n in t||={})Dw.call(t,n)&&Aw(e,n,t[n]);if(Sw)for(var n of Sw(t))L2.call(t,n)&&Aw(e,n,t[n]);return e},Ue=(e,t)=>N2(e,O2(t));var ut=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var F2=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of P2(t))!Dw.call(e,i)&&i!==n&&bp(e,i,{get:()=>t[i],enumerable:!(r=R2(t,i))||r.enumerable});return e};var Tw=(e,t,n)=>(n=e!=null?M2(k2(e)):{},F2(t||!e||!e.__esModule?bp(n,"default",{value:e,enumerable:!0}):n,e));var X=(e,t,n)=>new Promise((r,i)=>{var o=g=>{try{h(n.next(g))}catch(m){i(m)}},l=g=>{try{h(n.throw(g))}catch(m){i(m)}},h=g=>g.done?r(g.value):Promise.resolve(g.value).then(o,l);h((n=n.apply(e,t)).next())});var tD=ut((nX,eD)=>{"use strict";eD.exports=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}});var bo=ut(ms=>{"use strict";var v_,vV=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];ms.getSymbolSize=function(t){if(!t)throw new Error('"version" cannot be null or undefined');if(t<1||t>40)throw new Error('"version" should be in range from 1 to 40');return t*4+17};ms.getSymbolTotalCodewords=function(t){return vV[t]};ms.getBCHDigit=function(e){let t=0;for(;e!==0;)t++,e>>>=1;return t};ms.setToSJISFunction=function(t){if(typeof t!="function")throw new Error('"toSJISFunc" is not a valid function.');v_=t};ms.isKanjiModeEnabled=function(){return typeof v_<"u"};ms.toSJIS=function(t){return v_(t)}});var kh=ut(Cr=>{"use strict";Cr.L={bit:1};Cr.M={bit:0};Cr.Q={bit:3};Cr.H={bit:2};function CV(e){if(typeof e!="string")throw new Error("Param is not a string");switch(e.toLowerCase()){case"l":case"low":return Cr.L;case"m":case"medium":return Cr.M;case"q":case"quartile":return Cr.Q;case"h":case"high":return Cr.H;default:throw new Error("Unknown EC Level: "+e)}}Cr.isValid=function(t){return t&&typeof t.bit<"u"&&t.bit>=0&&t.bit<4};Cr.from=function(t,n){if(Cr.isValid(t))return t;try{return CV(t)}catch{return n}}});var iD=ut((oX,rD)=>{"use strict";function nD(){this.buffer=[],this.length=0}nD.prototype={get:function(e){let t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)===1},put:function(e,t){for(let n=0;n<t;n++)this.putBit((e>>>t-n-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(e){let t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}};rD.exports=nD});var sD=ut((sX,oD)=>{"use strict";function nu(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}nu.prototype.set=function(e,t,n,r){let i=e*this.size+t;this.data[i]=n,r&&(this.reservedBit[i]=!0)};nu.prototype.get=function(e,t){return this.data[e*this.size+t]};nu.prototype.xor=function(e,t,n){this.data[e*this.size+t]^=n};nu.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]};oD.exports=nu});var aD=ut(Lh=>{"use strict";var EV=bo().getSymbolSize;Lh.getRowColCoords=function(t){if(t===1)return[];let n=Math.floor(t/7)+2,r=EV(t),i=r===145?26:Math.ceil((r-13)/(2*n-2))*2,o=[r-7];for(let l=1;l<n-1;l++)o[l]=o[l-1]-i;return o.push(6),o.reverse()};Lh.getPositions=function(t){let n=[],r=Lh.getRowColCoords(t),i=r.length;for(let o=0;o<i;o++)for(let l=0;l<i;l++)o===0&&l===0||o===0&&l===i-1||o===i-1&&l===0||n.push([r[o],r[l]]);return n}});var uD=ut(lD=>{"use strict";var IV=bo().getSymbolSize,cD=7;lD.getPositions=function(t){let n=IV(t);return[[0,0],[n-cD,0],[0,n-cD]]}});var dD=ut(xt=>{"use strict";xt.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};var ys={N1:3,N2:3,N3:40,N4:10};xt.isValid=function(t){return t!=null&&t!==""&&!isNaN(t)&&t>=0&&t<=7};xt.from=function(t){return xt.isValid(t)?parseInt(t,10):void 0};xt.getPenaltyN1=function(t){let n=t.size,r=0,i=0,o=0,l=null,h=null;for(let g=0;g<n;g++){i=o=0,l=h=null;for(let m=0;m<n;m++){let C=t.get(g,m);C===l?i++:(i>=5&&(r+=ys.N1+(i-5)),l=C,i=1),C=t.get(m,g),C===h?o++:(o>=5&&(r+=ys.N1+(o-5)),h=C,o=1)}i>=5&&(r+=ys.N1+(i-5)),o>=5&&(r+=ys.N1+(o-5))}return r};xt.getPenaltyN2=function(t){let n=t.size,r=0;for(let i=0;i<n-1;i++)for(let o=0;o<n-1;o++){let l=t.get(i,o)+t.get(i,o+1)+t.get(i+1,o)+t.get(i+1,o+1);(l===4||l===0)&&r++}return r*ys.N2};xt.getPenaltyN3=function(t){let n=t.size,r=0,i=0,o=0;for(let l=0;l<n;l++){i=o=0;for(let h=0;h<n;h++)i=i<<1&2047|t.get(l,h),h>=10&&(i===1488||i===93)&&r++,o=o<<1&2047|t.get(h,l),h>=10&&(o===1488||o===93)&&r++}return r*ys.N3};xt.getPenaltyN4=function(t){let n=0,r=t.data.length;for(let o=0;o<r;o++)n+=t.data[o];return Math.abs(Math.ceil(n*100/r/5)-10)*ys.N4};function bV(e,t,n){switch(e){case xt.Patterns.PATTERN000:return(t+n)%2===0;case xt.Patterns.PATTERN001:return t%2===0;case xt.Patterns.PATTERN010:return n%3===0;case xt.Patterns.PATTERN011:return(t+n)%3===0;case xt.Patterns.PATTERN100:return(Math.floor(t/2)+Math.floor(n/3))%2===0;case xt.Patterns.PATTERN101:return t*n%2+t*n%3===0;case xt.Patterns.PATTERN110:return(t*n%2+t*n%3)%2===0;case xt.Patterns.PATTERN111:return(t*n%3+(t+n)%2)%2===0;default:throw new Error("bad maskPattern:"+e)}}xt.applyMask=function(t,n){let r=n.size;for(let i=0;i<r;i++)for(let o=0;o<r;o++)n.isReserved(o,i)||n.xor(o,i,bV(t,o,i))};xt.getBestMask=function(t,n){let r=Object.keys(xt.Patterns).length,i=0,o=1/0;for(let l=0;l<r;l++){n(l),xt.applyMask(l,t);let h=xt.getPenaltyN1(t)+xt.getPenaltyN2(t)+xt.getPenaltyN3(t)+xt.getPenaltyN4(t);xt.applyMask(l,t),h<o&&(o=h,i=l)}return i}});var E_=ut(C_=>{"use strict";var xo=kh(),Fh=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],Bh=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];C_.getBlocksCount=function(t,n){switch(n){case xo.L:return Fh[(t-1)*4+0];case xo.M:return Fh[(t-1)*4+1];case xo.Q:return Fh[(t-1)*4+2];case xo.H:return Fh[(t-1)*4+3];default:return}};C_.getTotalCodewordsCount=function(t,n){switch(n){case xo.L:return Bh[(t-1)*4+0];case xo.M:return Bh[(t-1)*4+1];case xo.Q:return Bh[(t-1)*4+2];case xo.H:return Bh[(t-1)*4+3];default:return}}});var fD=ut(Uh=>{"use strict";var ru=new Uint8Array(512),Vh=new Uint8Array(256);(function(){let t=1;for(let n=0;n<255;n++)ru[n]=t,Vh[t]=n,t<<=1,t&256&&(t^=285);for(let n=255;n<512;n++)ru[n]=ru[n-255]})();Uh.log=function(t){if(t<1)throw new Error("log("+t+")");return Vh[t]};Uh.exp=function(t){return ru[t]};Uh.mul=function(t,n){return t===0||n===0?0:ru[Vh[t]+Vh[n]]}});var hD=ut(iu=>{"use strict";var I_=fD();iu.mul=function(t,n){let r=new Uint8Array(t.length+n.length-1);for(let i=0;i<t.length;i++)for(let o=0;o<n.length;o++)r[i+o]^=I_.mul(t[i],n[o]);return r};iu.mod=function(t,n){let r=new Uint8Array(t);for(;r.length-n.length>=0;){let i=r[0];for(let l=0;l<n.length;l++)r[l]^=I_.mul(n[l],i);let o=0;for(;o<r.length&&r[o]===0;)o++;r=r.slice(o)}return r};iu.generateECPolynomial=function(t){let n=new Uint8Array([1]);for(let r=0;r<t;r++)n=iu.mul(n,new Uint8Array([1,I_.exp(r)]));return n}});var mD=ut((hX,gD)=>{"use strict";var pD=hD();function b_(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}b_.prototype.initialize=function(t){this.degree=t,this.genPoly=pD.generateECPolynomial(this.degree)};b_.prototype.encode=function(t){if(!this.genPoly)throw new Error("Encoder not initialized");let n=new Uint8Array(t.length+this.degree);n.set(t);let r=pD.mod(n,this.genPoly),i=this.degree-r.length;if(i>0){let o=new Uint8Array(this.degree);return o.set(r,i),o}return r};gD.exports=b_});var x_=ut(yD=>{"use strict";yD.isValid=function(t){return!isNaN(t)&&t>=1&&t<=40}});var S_=ut(ji=>{"use strict";var _D="[0-9]+",xV="[A-Z $%*+\\-./:]+",ou="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";ou=ou.replace(/u/g,"\\u");var SV="(?:(?![A-Z0-9 $%*+\\-./:]|"+ou+`)(?:.|[\r
]))+`;ji.KANJI=new RegExp(ou,"g");ji.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");ji.BYTE=new RegExp(SV,"g");ji.NUMERIC=new RegExp(_D,"g");ji.ALPHANUMERIC=new RegExp(xV,"g");var AV=new RegExp("^"+ou+"$"),DV=new RegExp("^"+_D+"$"),TV=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");ji.testKanji=function(t){return AV.test(t)};ji.testNumeric=function(t){return DV.test(t)};ji.testAlphanumeric=function(t){return TV.test(t)}});var So=ut($t=>{"use strict";var MV=x_(),A_=S_();$t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]};$t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]};$t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]};$t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]};$t.MIXED={bit:-1};$t.getCharCountIndicator=function(t,n){if(!t.ccBits)throw new Error("Invalid mode: "+t);if(!MV.isValid(n))throw new Error("Invalid version: "+n);return n>=1&&n<10?t.ccBits[0]:n<27?t.ccBits[1]:t.ccBits[2]};$t.getBestModeForData=function(t){return A_.testNumeric(t)?$t.NUMERIC:A_.testAlphanumeric(t)?$t.ALPHANUMERIC:A_.testKanji(t)?$t.KANJI:$t.BYTE};$t.toString=function(t){if(t&&t.id)return t.id;throw new Error("Invalid mode")};$t.isValid=function(t){return t&&t.bit&&t.ccBits};function NV(e){if(typeof e!="string")throw new Error("Param is not a string");switch(e.toLowerCase()){case"numeric":return $t.NUMERIC;case"alphanumeric":return $t.ALPHANUMERIC;case"kanji":return $t.KANJI;case"byte":return $t.BYTE;default:throw new Error("Unknown mode: "+e)}}$t.from=function(t,n){if($t.isValid(t))return t;try{return NV(t)}catch{return n}}});var ID=ut(_s=>{"use strict";var jh=bo(),RV=E_(),wD=kh(),Ao=So(),D_=x_(),CD=7973,vD=jh.getBCHDigit(CD);function OV(e,t,n){for(let r=1;r<=40;r++)if(t<=_s.getCapacity(r,n,e))return r}function ED(e,t){return Ao.getCharCountIndicator(e,t)+4}function PV(e,t){let n=0;return e.forEach(function(r){let i=ED(r.mode,t);n+=i+r.getBitsLength()}),n}function kV(e,t){for(let n=1;n<=40;n++)if(PV(e,n)<=_s.getCapacity(n,t,Ao.MIXED))return n}_s.from=function(t,n){return D_.isValid(t)?parseInt(t,10):n};_s.getCapacity=function(t,n,r){if(!D_.isValid(t))throw new Error("Invalid QR Code version");typeof r>"u"&&(r=Ao.BYTE);let i=jh.getSymbolTotalCodewords(t),o=RV.getTotalCodewordsCount(t,n),l=(i-o)*8;if(r===Ao.MIXED)return l;let h=l-ED(r,t);switch(r){case Ao.NUMERIC:return Math.floor(h/10*3);case Ao.ALPHANUMERIC:return Math.floor(h/11*2);case Ao.KANJI:return Math.floor(h/13);case Ao.BYTE:default:return Math.floor(h/8)}};_s.getBestVersionForData=function(t,n){let r,i=wD.from(n,wD.M);if(Array.isArray(t)){if(t.length>1)return kV(t,i);if(t.length===0)return 1;r=t[0]}else r=t;return OV(r.mode,r.getLength(),i)};_s.getEncodedBits=function(t){if(!D_.isValid(t)||t<7)throw new Error("Invalid QR Code version");let n=t<<12;for(;jh.getBCHDigit(n)-vD>=0;)n^=CD<<jh.getBCHDigit(n)-vD;return t<<12|n}});var AD=ut(SD=>{"use strict";var T_=bo(),xD=1335,LV=21522,bD=T_.getBCHDigit(xD);SD.getEncodedBits=function(t,n){let r=t.bit<<3|n,i=r<<10;for(;T_.getBCHDigit(i)-bD>=0;)i^=xD<<T_.getBCHDigit(i)-bD;return(r<<10|i)^LV}});var TD=ut((wX,DD)=>{"use strict";var FV=So();function Ga(e){this.mode=FV.NUMERIC,this.data=e.toString()}Ga.getBitsLength=function(t){return 10*Math.floor(t/3)+(t%3?t%3*3+1:0)};Ga.prototype.getLength=function(){return this.data.length};Ga.prototype.getBitsLength=function(){return Ga.getBitsLength(this.data.length)};Ga.prototype.write=function(t){let n,r,i;for(n=0;n+3<=this.data.length;n+=3)r=this.data.substr(n,3),i=parseInt(r,10),t.put(i,10);let o=this.data.length-n;o>0&&(r=this.data.substr(n),i=parseInt(r,10),t.put(i,o*3+1))};DD.exports=Ga});var ND=ut((vX,MD)=>{"use strict";var BV=So(),M_=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function $a(e){this.mode=BV.ALPHANUMERIC,this.data=e}$a.getBitsLength=function(t){return 11*Math.floor(t/2)+6*(t%2)};$a.prototype.getLength=function(){return this.data.length};$a.prototype.getBitsLength=function(){return $a.getBitsLength(this.data.length)};$a.prototype.write=function(t){let n;for(n=0;n+2<=this.data.length;n+=2){let r=M_.indexOf(this.data[n])*45;r+=M_.indexOf(this.data[n+1]),t.put(r,11)}this.data.length%2&&t.put(M_.indexOf(this.data[n]),6)};MD.exports=$a});var OD=ut((CX,RD)=>{"use strict";RD.exports=function(t){for(var n=[],r=t.length,i=0;i<r;i++){var o=t.charCodeAt(i);if(o>=55296&&o<=56319&&r>i+1){var l=t.charCodeAt(i+1);l>=56320&&l<=57343&&(o=(o-55296)*1024+l-56320+65536,i+=1)}if(o<128){n.push(o);continue}if(o<2048){n.push(o>>6|192),n.push(o&63|128);continue}if(o<55296||o>=57344&&o<65536){n.push(o>>12|224),n.push(o>>6&63|128),n.push(o&63|128);continue}if(o>=65536&&o<=1114111){n.push(o>>18|240),n.push(o>>12&63|128),n.push(o>>6&63|128),n.push(o&63|128);continue}n.push(239,191,189)}return new Uint8Array(n).buffer}});var kD=ut((EX,PD)=>{"use strict";var VV=OD(),UV=So();function qa(e){this.mode=UV.BYTE,typeof e=="string"&&(e=VV(e)),this.data=new Uint8Array(e)}qa.getBitsLength=function(t){return t*8};qa.prototype.getLength=function(){return this.data.length};qa.prototype.getBitsLength=function(){return qa.getBitsLength(this.data.length)};qa.prototype.write=function(e){for(let t=0,n=this.data.length;t<n;t++)e.put(this.data[t],8)};PD.exports=qa});var FD=ut((IX,LD)=>{"use strict";var jV=So(),HV=bo();function Ya(e){this.mode=jV.KANJI,this.data=e}Ya.getBitsLength=function(t){return t*13};Ya.prototype.getLength=function(){return this.data.length};Ya.prototype.getBitsLength=function(){return Ya.getBitsLength(this.data.length)};Ya.prototype.write=function(e){let t;for(t=0;t<this.data.length;t++){let n=HV.toSJIS(this.data[t]);if(n>=33088&&n<=40956)n-=33088;else if(n>=57408&&n<=60351)n-=49472;else throw new Error("Invalid SJIS character: "+this.data[t]+`
Make sure your charset is UTF-8`);n=(n>>>8&255)*192+(n&255),e.put(n,13)}};LD.exports=Ya});var BD=ut((bX,N_)=>{"use strict";var su={single_source_shortest_paths:function(e,t,n){var r={},i={};i[t]=0;var o=su.PriorityQueue.make();o.push(t,0);for(var l,h,g,m,C,E,x,D,N;!o.empty();){l=o.pop(),h=l.value,m=l.cost,C=e[h]||{};for(g in C)C.hasOwnProperty(g)&&(E=C[g],x=m+E,D=i[g],N=typeof i[g]>"u",(N||D>x)&&(i[g]=x,o.push(g,x),r[g]=h))}if(typeof n<"u"&&typeof i[n]>"u"){var U=["Could not find a path from ",t," to ",n,"."].join("");throw new Error(U)}return r},extract_shortest_path_from_predecessor_list:function(e,t){for(var n=[],r=t,i;r;)n.push(r),i=e[r],r=e[r];return n.reverse(),n},find_path:function(e,t,n){var r=su.single_source_shortest_paths(e,t,n);return su.extract_shortest_path_from_predecessor_list(r,n)},PriorityQueue:{make:function(e){var t=su.PriorityQueue,n={},r;e=e||{};for(r in t)t.hasOwnProperty(r)&&(n[r]=t[r]);return n.queue=[],n.sorter=e.sorter||t.default_sorter,n},default_sorter:function(e,t){return e.cost-t.cost},push:function(e,t){var n={value:e,cost:t};this.queue.push(n),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};typeof N_<"u"&&(N_.exports=su)});var $D=ut(Za=>{"use strict";var ht=So(),jD=TD(),HD=ND(),zD=kD(),WD=FD(),au=S_(),Hh=bo(),zV=BD();function VD(e){return unescape(encodeURIComponent(e)).length}function cu(e,t,n){let r=[],i;for(;(i=e.exec(n))!==null;)r.push({data:i[0],index:i.index,mode:t,length:i[0].length});return r}function GD(e){let t=cu(au.NUMERIC,ht.NUMERIC,e),n=cu(au.ALPHANUMERIC,ht.ALPHANUMERIC,e),r,i;return Hh.isKanjiModeEnabled()?(r=cu(au.BYTE,ht.BYTE,e),i=cu(au.KANJI,ht.KANJI,e)):(r=cu(au.BYTE_KANJI,ht.BYTE,e),i=[]),t.concat(n,r,i).sort(function(l,h){return l.index-h.index}).map(function(l){return{data:l.data,mode:l.mode,length:l.length}})}function R_(e,t){switch(t){case ht.NUMERIC:return jD.getBitsLength(e);case ht.ALPHANUMERIC:return HD.getBitsLength(e);case ht.KANJI:return WD.getBitsLength(e);case ht.BYTE:return zD.getBitsLength(e)}}function WV(e){return e.reduce(function(t,n){let r=t.length-1>=0?t[t.length-1]:null;return r&&r.mode===n.mode?(t[t.length-1].data+=n.data,t):(t.push(n),t)},[])}function GV(e){let t=[];for(let n=0;n<e.length;n++){let r=e[n];switch(r.mode){case ht.NUMERIC:t.push([r,{data:r.data,mode:ht.ALPHANUMERIC,length:r.length},{data:r.data,mode:ht.BYTE,length:r.length}]);break;case ht.ALPHANUMERIC:t.push([r,{data:r.data,mode:ht.BYTE,length:r.length}]);break;case ht.KANJI:t.push([r,{data:r.data,mode:ht.BYTE,length:VD(r.data)}]);break;case ht.BYTE:t.push([{data:r.data,mode:ht.BYTE,length:VD(r.data)}])}}return t}function $V(e,t){let n={},r={start:{}},i=["start"];for(let o=0;o<e.length;o++){let l=e[o],h=[];for(let g=0;g<l.length;g++){let m=l[g],C=""+o+g;h.push(C),n[C]={node:m,lastCount:0},r[C]={};for(let E=0;E<i.length;E++){let x=i[E];n[x]&&n[x].node.mode===m.mode?(r[x][C]=R_(n[x].lastCount+m.length,m.mode)-R_(n[x].lastCount,m.mode),n[x].lastCount+=m.length):(n[x]&&(n[x].lastCount=m.length),r[x][C]=R_(m.length,m.mode)+4+ht.getCharCountIndicator(m.mode,t))}}i=h}for(let o=0;o<i.length;o++)r[i[o]].end=0;return{map:r,table:n}}function UD(e,t){let n,r=ht.getBestModeForData(e);if(n=ht.from(t,r),n!==ht.BYTE&&n.bit<r.bit)throw new Error('"'+e+'" cannot be encoded with mode '+ht.toString(n)+`.
 Suggested mode is: `+ht.toString(r));switch(n===ht.KANJI&&!Hh.isKanjiModeEnabled()&&(n=ht.BYTE),n){case ht.NUMERIC:return new jD(e);case ht.ALPHANUMERIC:return new HD(e);case ht.KANJI:return new WD(e);case ht.BYTE:return new zD(e)}}Za.fromArray=function(t){return t.reduce(function(n,r){return typeof r=="string"?n.push(UD(r,null)):r.data&&n.push(UD(r.data,r.mode)),n},[])};Za.fromString=function(t,n){let r=GD(t,Hh.isKanjiModeEnabled()),i=GV(r),o=$V(i,n),l=zV.find_path(o.map,"start","end"),h=[];for(let g=1;g<l.length-1;g++)h.push(o.table[l[g]].node);return Za.fromArray(WV(h))};Za.rawSplit=function(t){return Za.fromArray(GD(t,Hh.isKanjiModeEnabled()))}});var YD=ut(qD=>{"use strict";var Wh=bo(),O_=kh(),qV=iD(),YV=sD(),ZV=aD(),XV=uD(),L_=dD(),F_=E_(),QV=mD(),zh=ID(),KV=AD(),JV=So(),P_=$D();function e7(e,t){let n=e.size,r=XV.getPositions(t);for(let i=0;i<r.length;i++){let o=r[i][0],l=r[i][1];for(let h=-1;h<=7;h++)if(!(o+h<=-1||n<=o+h))for(let g=-1;g<=7;g++)l+g<=-1||n<=l+g||(h>=0&&h<=6&&(g===0||g===6)||g>=0&&g<=6&&(h===0||h===6)||h>=2&&h<=4&&g>=2&&g<=4?e.set(o+h,l+g,!0,!0):e.set(o+h,l+g,!1,!0))}}function t7(e){let t=e.size;for(let n=8;n<t-8;n++){let r=n%2===0;e.set(n,6,r,!0),e.set(6,n,r,!0)}}function n7(e,t){let n=ZV.getPositions(t);for(let r=0;r<n.length;r++){let i=n[r][0],o=n[r][1];for(let l=-2;l<=2;l++)for(let h=-2;h<=2;h++)l===-2||l===2||h===-2||h===2||l===0&&h===0?e.set(i+l,o+h,!0,!0):e.set(i+l,o+h,!1,!0)}}function r7(e,t){let n=e.size,r=zh.getEncodedBits(t),i,o,l;for(let h=0;h<18;h++)i=Math.floor(h/3),o=h%3+n-8-3,l=(r>>h&1)===1,e.set(i,o,l,!0),e.set(o,i,l,!0)}function k_(e,t,n){let r=e.size,i=KV.getEncodedBits(t,n),o,l;for(o=0;o<15;o++)l=(i>>o&1)===1,o<6?e.set(o,8,l,!0):o<8?e.set(o+1,8,l,!0):e.set(r-15+o,8,l,!0),o<8?e.set(8,r-o-1,l,!0):o<9?e.set(8,15-o-1+1,l,!0):e.set(8,15-o-1,l,!0);e.set(r-8,8,1,!0)}function i7(e,t){let n=e.size,r=-1,i=n-1,o=7,l=0;for(let h=n-1;h>0;h-=2)for(h===6&&h--;;){for(let g=0;g<2;g++)if(!e.isReserved(i,h-g)){let m=!1;l<t.length&&(m=(t[l]>>>o&1)===1),e.set(i,h-g,m),o--,o===-1&&(l++,o=7)}if(i+=r,i<0||n<=i){i-=r,r=-r;break}}}function o7(e,t,n){let r=new qV;n.forEach(function(g){r.put(g.mode.bit,4),r.put(g.getLength(),JV.getCharCountIndicator(g.mode,e)),g.write(r)});let i=Wh.getSymbolTotalCodewords(e),o=F_.getTotalCodewordsCount(e,t),l=(i-o)*8;for(r.getLengthInBits()+4<=l&&r.put(0,4);r.getLengthInBits()%8!==0;)r.putBit(0);let h=(l-r.getLengthInBits())/8;for(let g=0;g<h;g++)r.put(g%2?17:236,8);return s7(r,e,t)}function s7(e,t,n){let r=Wh.getSymbolTotalCodewords(t),i=F_.getTotalCodewordsCount(t,n),o=r-i,l=F_.getBlocksCount(t,n),h=r%l,g=l-h,m=Math.floor(r/l),C=Math.floor(o/l),E=C+1,x=m-C,D=new QV(x),N=0,U=new Array(l),$=new Array(l),W=0,ie=new Uint8Array(e.buffer);for(let G=0;G<l;G++){let Sn=G<g?C:E;U[G]=ie.slice(N,N+Sn),$[G]=D.encode(U[G]),N+=Sn,W=Math.max(W,Sn)}let ze=new Uint8Array(r),he=0,H,ae;for(H=0;H<W;H++)for(ae=0;ae<l;ae++)H<U[ae].length&&(ze[he++]=U[ae][H]);for(H=0;H<x;H++)for(ae=0;ae<l;ae++)ze[he++]=$[ae][H];return ze}function a7(e,t,n,r){let i;if(Array.isArray(e))i=P_.fromArray(e);else if(typeof e=="string"){let m=t;if(!m){let C=P_.rawSplit(e);m=zh.getBestVersionForData(C,n)}i=P_.fromString(e,m||40)}else throw new Error("Invalid data");let o=zh.getBestVersionForData(i,n);if(!o)throw new Error("The amount of data is too big to be stored in a QR Code");if(!t)t=o;else if(t<o)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+o+`.
`);let l=o7(t,n,i),h=Wh.getSymbolSize(t),g=new YV(h);return e7(g,t),t7(g),n7(g,t),k_(g,n,0),t>=7&&r7(g,t),i7(g,l),isNaN(r)&&(r=L_.getBestMask(g,k_.bind(null,g,n))),L_.applyMask(r,g),k_(g,n,r),{modules:g,version:t,errorCorrectionLevel:n,maskPattern:r,segments:i}}qD.create=function(t,n){if(typeof t>"u"||t==="")throw new Error("No input text");let r=O_.M,i,o;return typeof n<"u"&&(r=O_.from(n.errorCorrectionLevel,O_.M),i=zh.from(n.version),o=L_.from(n.maskPattern),n.toSJISFunc&&Wh.setToSJISFunction(n.toSJISFunc)),a7(t,i,r,o)}});var B_=ut(ws=>{"use strict";function ZD(e){if(typeof e=="number"&&(e=e.toString()),typeof e!="string")throw new Error("Color should be defined as hex string");let t=e.slice().replace("#","").split("");if(t.length<3||t.length===5||t.length>8)throw new Error("Invalid hex color: "+e);(t.length===3||t.length===4)&&(t=Array.prototype.concat.apply([],t.map(function(r){return[r,r]}))),t.length===6&&t.push("F","F");let n=parseInt(t.join(""),16);return{r:n>>24&255,g:n>>16&255,b:n>>8&255,a:n&255,hex:"#"+t.slice(0,6).join("")}}ws.getOptions=function(t){t||(t={}),t.color||(t.color={});let n=typeof t.margin>"u"||t.margin===null||t.margin<0?4:t.margin,r=t.width&&t.width>=21?t.width:void 0,i=t.scale||4;return{width:r,scale:r?4:i,margin:n,color:{dark:ZD(t.color.dark||"#000000ff"),light:ZD(t.color.light||"#ffffffff")},type:t.type,rendererOpts:t.rendererOpts||{}}};ws.getScale=function(t,n){return n.width&&n.width>=t+n.margin*2?n.width/(t+n.margin*2):n.scale};ws.getImageWidth=function(t,n){let r=ws.getScale(t,n);return Math.floor((t+n.margin*2)*r)};ws.qrToImageData=function(t,n,r){let i=n.modules.size,o=n.modules.data,l=ws.getScale(i,r),h=Math.floor((i+r.margin*2)*l),g=r.margin*l,m=[r.color.light,r.color.dark];for(let C=0;C<h;C++)for(let E=0;E<h;E++){let x=(C*h+E)*4,D=r.color.light;if(C>=g&&E>=g&&C<h-g&&E<h-g){let N=Math.floor((C-g)/l),U=Math.floor((E-g)/l);D=m[o[N*i+U]?1:0]}t[x++]=D.r,t[x++]=D.g,t[x++]=D.b,t[x]=D.a}}});var XD=ut(Gh=>{"use strict";var V_=B_();function c7(e,t,n){e.clearRect(0,0,t.width,t.height),t.style||(t.style={}),t.height=n,t.width=n,t.style.height=n+"px",t.style.width=n+"px"}function l7(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}Gh.render=function(t,n,r){let i=r,o=n;typeof i>"u"&&(!n||!n.getContext)&&(i=n,n=void 0),n||(o=l7()),i=V_.getOptions(i);let l=V_.getImageWidth(t.modules.size,i),h=o.getContext("2d"),g=h.createImageData(l,l);return V_.qrToImageData(g.data,t,i),c7(h,o,l),h.putImageData(g,0,0),o};Gh.renderToDataURL=function(t,n,r){let i=r;typeof i>"u"&&(!n||!n.getContext)&&(i=n,n=void 0),i||(i={});let o=Gh.render(t,n,i),l=i.type||"image/png",h=i.rendererOpts||{};return o.toDataURL(l,h.quality)}});var JD=ut(KD=>{"use strict";var u7=B_();function QD(e,t){let n=e.a/255,r=t+'="'+e.hex+'"';return n<1?r+" "+t+'-opacity="'+n.toFixed(2).slice(1)+'"':r}function U_(e,t,n){let r=e+t;return typeof n<"u"&&(r+=" "+n),r}function d7(e,t,n){let r="",i=0,o=!1,l=0;for(let h=0;h<e.length;h++){let g=Math.floor(h%t),m=Math.floor(h/t);!g&&!o&&(o=!0),e[h]?(l++,h>0&&g>0&&e[h-1]||(r+=o?U_("M",g+n,.5+m+n):U_("m",i,0),i=0,o=!1),g+1<t&&e[h+1]||(r+=U_("h",l),l=0)):i++}return r}KD.render=function(t,n,r){let i=u7.getOptions(n),o=t.modules.size,l=t.modules.data,h=o+i.margin*2,g=i.color.light.a?"<path "+QD(i.color.light,"fill")+' d="M0 0h'+h+"v"+h+'H0z"/>':"",m="<path "+QD(i.color.dark,"stroke")+' d="'+d7(l,o,i.margin)+'"/>',C='viewBox="0 0 '+h+" "+h+'"',x='<svg xmlns="http://www.w3.org/2000/svg" '+(i.width?'width="'+i.width+'" height="'+i.width+'" ':"")+C+' shape-rendering="crispEdges">'+g+m+`</svg>
`;return typeof r=="function"&&r(null,x),x}});var tT=ut(lu=>{"use strict";var f7=tD(),j_=YD(),eT=XD(),h7=JD();function H_(e,t,n,r,i){let o=[].slice.call(arguments,1),l=o.length,h=typeof o[l-1]=="function";if(!h&&!f7())throw new Error("Callback required as last argument");if(h){if(l<2)throw new Error("Too few arguments provided");l===2?(i=n,n=t,t=r=void 0):l===3&&(t.getContext&&typeof i>"u"?(i=r,r=void 0):(i=r,r=n,n=t,t=void 0))}else{if(l<1)throw new Error("Too few arguments provided");return l===1?(n=t,t=r=void 0):l===2&&!t.getContext&&(r=n,n=t,t=void 0),new Promise(function(g,m){try{let C=j_.create(n,r);g(e(C,t,r))}catch(C){m(C)}})}try{let g=j_.create(n,r);i(null,e(g,t,r))}catch(g){i(g)}}lu.create=j_.create;lu.toCanvas=H_.bind(null,eT.render);lu.toDataURL=H_.bind(null,eT.renderToDataURL);lu.toString=H_.bind(null,function(e,t,n){return h7.render(e,n)})});var pT=ut((Qh,hT)=>{"use strict";(function(e,t){typeof Qh=="object"&&typeof hT<"u"?t(Qh):typeof define=="function"&&define.amd?define(["exports"],t):(e=typeof globalThis<"u"?globalThis:e||self,t(e.ZXing={}))})(Qh,function(e){"use strict";function t(w){return w==null}var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(w,s){w.__proto__=s}||function(w,s){for(var a in s)s.hasOwnProperty(a)&&(w[a]=s[a])};function r(w,s){n(w,s);function a(){this.constructor=w}w.prototype=s===null?Object.create(s):(a.prototype=s.prototype,new a)}function i(w,s){var a=Object.setPrototypeOf;a?a(w,s):w.__proto__=s}function o(w,s){s===void 0&&(s=w.constructor);var a=Error.captureStackTrace;a&&a(w,s)}var l=function(w){r(s,w);function s(a){var c=this.constructor,u=w.call(this,a)||this;return Object.defineProperty(u,"name",{value:c.name,enumerable:!1}),i(u,c.prototype),o(u),u}return s}(Error);let h=(()=>{class w extends l{constructor(a=void 0){super(a),this.message=a}getKind(){return this.constructor.kind}}return w.kind="Exception",w})(),g=(()=>{class w extends h{}return w.kind="ArgumentException",w})(),m=(()=>{class w extends h{}return w.kind="IllegalArgumentException",w})();class C{constructor(s){if(this.binarizer=s,s===null)throw new m("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(s,a){return this.binarizer.getBlackRow(s,a)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(s,a,c,u){let d=this.binarizer.getLuminanceSource().crop(s,a,c,u);return new C(this.binarizer.createBinarizer(d))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){let s=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new C(this.binarizer.createBinarizer(s))}rotateCounterClockwise45(){let s=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new C(this.binarizer.createBinarizer(s))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}let E=(()=>{class w extends h{static getChecksumInstance(){return new w}}return w.kind="ChecksumException",w})();class x{constructor(s){this.source=s}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class D{static arraycopy(s,a,c,u,d){for(;d--;)c[u++]=s[a++]}static currentTimeMillis(){return Date.now()}}let N=(()=>{class w extends h{}return w.kind="IndexOutOfBoundsException",w})(),U=(()=>{class w extends N{constructor(a=void 0,c=void 0){super(c),this.index=a,this.message=c}}return w.kind="ArrayIndexOutOfBoundsException",w})();class ${static fill(s,a){for(let c=0,u=s.length;c<u;c++)s[c]=a}static fillWithin(s,a,c,u){$.rangeCheck(s.length,a,c);for(let d=a;d<c;d++)s[d]=u}static rangeCheck(s,a,c){if(a>c)throw new m("fromIndex("+a+") > toIndex("+c+")");if(a<0)throw new U(a);if(c>s)throw new U(c)}static asList(...s){return s}static create(s,a,c){return Array.from({length:s}).map(d=>Array.from({length:a}).fill(c))}static createInt32Array(s,a,c){return Array.from({length:s}).map(d=>Int32Array.from({length:a}).fill(c))}static equals(s,a){if(!s||!a||!s.length||!a.length||s.length!==a.length)return!1;for(let c=0,u=s.length;c<u;c++)if(s[c]!==a[c])return!1;return!0}static hashCode(s){if(s===null)return 0;let a=1;for(let c of s)a=31*a+c;return a}static fillUint8Array(s,a){for(let c=0;c!==s.length;c++)s[c]=a}static copyOf(s,a){return s.slice(0,a)}static copyOfUint8Array(s,a){if(s.length<=a){let c=new Uint8Array(a);return c.set(s),c}return s.slice(0,a)}static copyOfRange(s,a,c){let u=c-a,d=new Int32Array(u);return D.arraycopy(s,a,d,0,u),d}static binarySearch(s,a,c){c===void 0&&(c=$.numberComparator);let u=0,d=s.length-1;for(;u<=d;){let f=d+u>>1,p=c(a,s[f]);if(p>0)u=f+1;else if(p<0)d=f-1;else return f}return-u-1}static numberComparator(s,a){return s-a}}class W{static numberOfTrailingZeros(s){let a;if(s===0)return 32;let c=31;return a=s<<16,a!==0&&(c-=16,s=a),a=s<<8,a!==0&&(c-=8,s=a),a=s<<4,a!==0&&(c-=4,s=a),a=s<<2,a!==0&&(c-=2,s=a),c-(s<<1>>>31)}static numberOfLeadingZeros(s){if(s===0)return 32;let a=1;return s>>>16||(a+=16,s<<=16),s>>>24||(a+=8,s<<=8),s>>>28||(a+=4,s<<=4),s>>>30||(a+=2,s<<=2),a-=s>>>31,a}static toHexString(s){return s.toString(16)}static toBinaryString(s){return String(parseInt(String(s),2))}static bitCount(s){return s=s-(s>>>1&1431655765),s=(s&858993459)+(s>>>2&858993459),s=s+(s>>>4)&252645135,s=s+(s>>>8),s=s+(s>>>16),s&63}static truncDivision(s,a){return Math.trunc(s/a)}static parseInt(s,a=void 0){return parseInt(s,a)}}W.MIN_VALUE_32_BITS=-2147483648,W.MAX_VALUE=Number.MAX_SAFE_INTEGER;class ie{constructor(s,a){s===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=s,a==null?this.bits=ie.makeArray(s):this.bits=a)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(s){if(s>this.bits.length*32){let a=ie.makeArray(s);D.arraycopy(this.bits,0,a,0,this.bits.length),this.bits=a}}get(s){return(this.bits[Math.floor(s/32)]&1<<(s&31))!==0}set(s){this.bits[Math.floor(s/32)]|=1<<(s&31)}flip(s){this.bits[Math.floor(s/32)]^=1<<(s&31)}getNextSet(s){let a=this.size;if(s>=a)return a;let c=this.bits,u=Math.floor(s/32),d=c[u];d&=~((1<<(s&31))-1);let f=c.length;for(;d===0;){if(++u===f)return a;d=c[u]}let p=u*32+W.numberOfTrailingZeros(d);return p>a?a:p}getNextUnset(s){let a=this.size;if(s>=a)return a;let c=this.bits,u=Math.floor(s/32),d=~c[u];d&=~((1<<(s&31))-1);let f=c.length;for(;d===0;){if(++u===f)return a;d=~c[u]}let p=u*32+W.numberOfTrailingZeros(d);return p>a?a:p}setBulk(s,a){this.bits[Math.floor(s/32)]=a}setRange(s,a){if(a<s||s<0||a>this.size)throw new m;if(a===s)return;a--;let c=Math.floor(s/32),u=Math.floor(a/32),d=this.bits;for(let f=c;f<=u;f++){let p=f>c?0:s&31,_=(2<<(f<u?31:a&31))-(1<<p);d[f]|=_}}clear(){let s=this.bits.length,a=this.bits;for(let c=0;c<s;c++)a[c]=0}isRange(s,a,c){if(a<s||s<0||a>this.size)throw new m;if(a===s)return!0;a--;let u=Math.floor(s/32),d=Math.floor(a/32),f=this.bits;for(let p=u;p<=d;p++){let y=p>u?0:s&31,v=(2<<(p<d?31:a&31))-(1<<y)&4294967295;if((f[p]&v)!==(c?v:0))return!1}return!0}appendBit(s){this.ensureCapacity(this.size+1),s&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(s,a){if(a<0||a>32)throw new m("Num bits must be between 0 and 32");this.ensureCapacity(this.size+a);for(let c=a;c>0;c--)this.appendBit((s>>c-1&1)===1)}appendBitArray(s){let a=s.size;this.ensureCapacity(this.size+a);for(let c=0;c<a;c++)this.appendBit(s.get(c))}xor(s){if(this.size!==s.size)throw new m("Sizes don't match");let a=this.bits;for(let c=0,u=a.length;c<u;c++)a[c]^=s.bits[c]}toBytes(s,a,c,u){for(let d=0;d<u;d++){let f=0;for(let p=0;p<8;p++)this.get(s)&&(f|=1<<7-p),s++;a[c+d]=f}}getBitArray(){return this.bits}reverse(){let s=new Int32Array(this.bits.length),a=Math.floor((this.size-1)/32),c=a+1,u=this.bits;for(let d=0;d<c;d++){let f=u[d];f=f>>1&1431655765|(f&1431655765)<<1,f=f>>2&858993459|(f&858993459)<<2,f=f>>4&252645135|(f&252645135)<<4,f=f>>8&16711935|(f&16711935)<<8,f=f>>16&65535|(f&65535)<<16,s[a-d]=f}if(this.size!==c*32){let d=c*32-this.size,f=s[0]>>>d;for(let p=1;p<c;p++){let y=s[p];f|=y<<32-d,s[p-1]=f,f=y>>>d}s[c-1]=f}this.bits=s}static makeArray(s){return new Int32Array(Math.floor((s+31)/32))}equals(s){if(!(s instanceof ie))return!1;let a=s;return this.size===a.size&&$.equals(this.bits,a.bits)}hashCode(){return 31*this.size+$.hashCode(this.bits)}toString(){let s="";for(let a=0,c=this.size;a<c;a++)a&7||(s+=" "),s+=this.get(a)?"X":".";return s}clone(){return new ie(this.size,this.bits.slice())}}var ze=function(w){return w[w.OTHER=0]="OTHER",w[w.PURE_BARCODE=1]="PURE_BARCODE",w[w.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",w[w.TRY_HARDER=3]="TRY_HARDER",w[w.CHARACTER_SET=4]="CHARACTER_SET",w[w.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",w[w.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",w[w.ASSUME_GS1=7]="ASSUME_GS1",w[w.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",w[w.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",w[w.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS",w}(ze||{}),he=ze;let H=(()=>{class w extends h{static getFormatInstance(){return new w}}return w.kind="FormatException",w})();var ae=function(w){return w[w.Cp437=0]="Cp437",w[w.ISO8859_1=1]="ISO8859_1",w[w.ISO8859_2=2]="ISO8859_2",w[w.ISO8859_3=3]="ISO8859_3",w[w.ISO8859_4=4]="ISO8859_4",w[w.ISO8859_5=5]="ISO8859_5",w[w.ISO8859_6=6]="ISO8859_6",w[w.ISO8859_7=7]="ISO8859_7",w[w.ISO8859_8=8]="ISO8859_8",w[w.ISO8859_9=9]="ISO8859_9",w[w.ISO8859_10=10]="ISO8859_10",w[w.ISO8859_11=11]="ISO8859_11",w[w.ISO8859_13=12]="ISO8859_13",w[w.ISO8859_14=13]="ISO8859_14",w[w.ISO8859_15=14]="ISO8859_15",w[w.ISO8859_16=15]="ISO8859_16",w[w.SJIS=16]="SJIS",w[w.Cp1250=17]="Cp1250",w[w.Cp1251=18]="Cp1251",w[w.Cp1252=19]="Cp1252",w[w.Cp1256=20]="Cp1256",w[w.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",w[w.UTF8=22]="UTF8",w[w.ASCII=23]="ASCII",w[w.Big5=24]="Big5",w[w.GB18030=25]="GB18030",w[w.EUC_KR=26]="EUC_KR",w}(ae||{});class G{constructor(s,a,c,...u){this.valueIdentifier=s,this.name=c,typeof a=="number"?this.values=Int32Array.from([a]):this.values=a,this.otherEncodingNames=u,G.VALUE_IDENTIFIER_TO_ECI.set(s,this),G.NAME_TO_ECI.set(c,this);let d=this.values;for(let f=0,p=d.length;f!==p;f++){let y=d[f];G.VALUES_TO_ECI.set(y,this)}for(let f of u)G.NAME_TO_ECI.set(f,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(s){if(s<0||s>=900)throw new H("incorect value");let a=G.VALUES_TO_ECI.get(s);if(a===void 0)throw new H("incorect value");return a}static getCharacterSetECIByName(s){let a=G.NAME_TO_ECI.get(s);if(a===void 0)throw new H("incorect value");return a}equals(s){if(!(s instanceof G))return!1;let a=s;return this.getName()===a.getName()}}G.VALUE_IDENTIFIER_TO_ECI=new Map,G.VALUES_TO_ECI=new Map,G.NAME_TO_ECI=new Map,G.Cp437=new G(ae.Cp437,Int32Array.from([0,2]),"Cp437"),G.ISO8859_1=new G(ae.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),G.ISO8859_2=new G(ae.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),G.ISO8859_3=new G(ae.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),G.ISO8859_4=new G(ae.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),G.ISO8859_5=new G(ae.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),G.ISO8859_6=new G(ae.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),G.ISO8859_7=new G(ae.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),G.ISO8859_8=new G(ae.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),G.ISO8859_9=new G(ae.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),G.ISO8859_10=new G(ae.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),G.ISO8859_11=new G(ae.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),G.ISO8859_13=new G(ae.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),G.ISO8859_14=new G(ae.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),G.ISO8859_15=new G(ae.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),G.ISO8859_16=new G(ae.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),G.SJIS=new G(ae.SJIS,20,"SJIS","Shift_JIS"),G.Cp1250=new G(ae.Cp1250,21,"Cp1250","windows-1250"),G.Cp1251=new G(ae.Cp1251,22,"Cp1251","windows-1251"),G.Cp1252=new G(ae.Cp1252,23,"Cp1252","windows-1252"),G.Cp1256=new G(ae.Cp1256,24,"Cp1256","windows-1256"),G.UnicodeBigUnmarked=new G(ae.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),G.UTF8=new G(ae.UTF8,26,"UTF8","UTF-8"),G.ASCII=new G(ae.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),G.Big5=new G(ae.Big5,28,"Big5"),G.GB18030=new G(ae.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),G.EUC_KR=new G(ae.EUC_KR,30,"EUC_KR","EUC-KR");let Sn=(()=>{class w extends h{}return w.kind="UnsupportedOperationException",w})();class Ut{static decode(s,a){let c=this.encodingName(a);return this.customDecoder?this.customDecoder(s,c):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(c)?this.decodeFallback(s,c):new TextDecoder(c).decode(s)}static shouldDecodeOnFallback(s){return!Ut.isBrowser()&&s==="ISO-8859-1"}static encode(s,a){let c=this.encodingName(a);return this.customEncoder?this.customEncoder(s,c):typeof TextEncoder>"u"?this.encodeFallback(s):new TextEncoder().encode(s)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(s){return typeof s=="string"?s:s.getName()}static encodingCharacterSet(s){return s instanceof G?s:G.getCharacterSetECIByName(s)}static decodeFallback(s,a){let c=this.encodingCharacterSet(a);if(Ut.isDecodeFallbackSupported(c)){let u="";for(let d=0,f=s.length;d<f;d++){let p=s[d].toString(16);p.length<2&&(p="0"+p),u+="%"+p}return decodeURIComponent(u)}if(c.equals(G.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(s.buffer));throw new Sn(`Encoding ${this.encodingName(a)} not supported by fallback.`)}static isDecodeFallbackSupported(s){return s.equals(G.UTF8)||s.equals(G.ISO8859_1)||s.equals(G.ASCII)}static encodeFallback(s){let c=btoa(unescape(encodeURIComponent(s))).split(""),u=[];for(let d=0;d<c.length;d++)u.push(c[d].charCodeAt(0));return new Uint8Array(u)}}class Ce{static castAsNonUtf8Char(s,a=null){let c=a?a.getName():this.ISO88591;return Ut.decode(new Uint8Array([s]),c)}static guessEncoding(s,a){if(a!=null&&a.get(he.CHARACTER_SET)!==void 0)return a.get(he.CHARACTER_SET).toString();let c=s.length,u=!0,d=!0,f=!0,p=0,y=0,_=0,v=0,I=0,b=0,A=0,T=0,M=0,R=0,k=0,q=s.length>3&&s[0]===239&&s[1]===187&&s[2]===191;for(let Q=0;Q<c&&(u||d||f);Q++){let B=s[Q]&255;f&&(p>0?B&128?p--:f=!1:B&128&&(B&64?(p++,B&32?(p++,B&16?(p++,B&8?f=!1:v++):_++):y++):f=!1)),u&&(B>127&&B<160?u=!1:B>159&&(B<192||B===215||B===247)&&k++),d&&(I>0?B<64||B===127||B>252?d=!1:I--:B===128||B===160||B>239?d=!1:B>160&&B<224?(b++,T=0,A++,A>M&&(M=A)):B>127?(I++,A=0,T++,T>R&&(R=T)):(A=0,T=0))}return f&&p>0&&(f=!1),d&&I>0&&(d=!1),f&&(q||y+_+v>0)?Ce.UTF8:d&&(Ce.ASSUME_SHIFT_JIS||M>=3||R>=3)?Ce.SHIFT_JIS:u&&d?M===2&&b===2||k*10>=c?Ce.SHIFT_JIS:Ce.ISO88591:u?Ce.ISO88591:d?Ce.SHIFT_JIS:f?Ce.UTF8:Ce.PLATFORM_DEFAULT_ENCODING}static format(s,...a){let c=-1;function u(f,p,y,_,v,I){if(f==="%%")return"%";if(a[++c]===void 0)return;f=_?parseInt(_.substr(1)):void 0;let b=v?parseInt(v.substr(1)):void 0,A;switch(I){case"s":A=a[c];break;case"c":A=a[c][0];break;case"f":A=parseFloat(a[c]).toFixed(f);break;case"p":A=parseFloat(a[c]).toPrecision(f);break;case"e":A=parseFloat(a[c]).toExponential(f);break;case"x":A=parseInt(a[c]).toString(b||16);break;case"d":A=parseFloat(parseInt(a[c],b||10).toPrecision(f)).toFixed(0);break}A=typeof A=="object"?JSON.stringify(A):(+A).toString(b);let T=parseInt(y),M=y&&y[0]+""=="0"?"0":" ";for(;A.length<T;)A=p!==void 0?A+M:M+A;return A}let d=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return s.replace(d,u)}static getBytes(s,a){return Ut.encode(s,a)}static getCharCode(s,a=0){return s.charCodeAt(a)}static getCharAt(s){return String.fromCharCode(s)}}Ce.SHIFT_JIS=G.SJIS.getName(),Ce.GB2312="GB2312",Ce.ISO88591=G.ISO8859_1.getName(),Ce.EUC_JP="EUC_JP",Ce.UTF8=G.UTF8.getName(),Ce.PLATFORM_DEFAULT_ENCODING=Ce.UTF8,Ce.ASSUME_SHIFT_JIS=!1;class yt{constructor(s=""){this.value=s}enableDecoding(s){return this.encoding=s,this}append(s){return typeof s=="string"?this.value+=s.toString():this.encoding?this.value+=Ce.castAsNonUtf8Char(s,this.encoding):this.value+=String.fromCharCode(s),this}appendChars(s,a,c){for(let u=a;a<a+c;u++)this.append(s[u]);return this}length(){return this.value.length}charAt(s){return this.value.charAt(s)}deleteCharAt(s){this.value=this.value.substr(0,s)+this.value.substring(s+1)}setCharAt(s,a){this.value=this.value.substr(0,s)+a+this.value.substr(s+1)}substring(s,a){return this.value.substring(s,a)}setLengthToZero(){this.value=""}toString(){return this.value}insert(s,a){this.value=this.value.substr(0,s)+a+this.value.substr(s+a.length)}}class en{constructor(s,a,c,u){if(this.width=s,this.height=a,this.rowSize=c,this.bits=u,a==null&&(a=s),this.height=a,s<1||a<1)throw new m("Both dimensions must be greater than 0");c==null&&(c=Math.floor((s+31)/32)),this.rowSize=c,u==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(s){let a=s.length,c=s[0].length,u=new en(c,a);for(let d=0;d<a;d++){let f=s[d];for(let p=0;p<c;p++)f[p]&&u.set(p,d)}return u}static parseFromString(s,a,c){if(s===null)throw new m("stringRepresentation cannot be null");let u=new Array(s.length),d=0,f=0,p=-1,y=0,_=0;for(;_<s.length;)if(s.charAt(_)===`
`||s.charAt(_)==="\r"){if(d>f){if(p===-1)p=d-f;else if(d-f!==p)throw new m("row lengths do not match");f=d,y++}_++}else if(s.substring(_,_+a.length)===a)_+=a.length,u[d]=!0,d++;else if(s.substring(_,_+c.length)===c)_+=c.length,u[d]=!1,d++;else throw new m("illegal character encountered: "+s.substring(_));if(d>f){if(p===-1)p=d-f;else if(d-f!==p)throw new m("row lengths do not match");y++}let v=new en(p,y);for(let I=0;I<d;I++)u[I]&&v.set(Math.floor(I%p),Math.floor(I/p));return v}get(s,a){let c=a*this.rowSize+Math.floor(s/32);return(this.bits[c]>>>(s&31)&1)!==0}set(s,a){let c=a*this.rowSize+Math.floor(s/32);this.bits[c]|=1<<(s&31)&4294967295}unset(s,a){let c=a*this.rowSize+Math.floor(s/32);this.bits[c]&=~(1<<(s&31)&4294967295)}flip(s,a){let c=a*this.rowSize+Math.floor(s/32);this.bits[c]^=1<<(s&31)&4294967295}xor(s){if(this.width!==s.getWidth()||this.height!==s.getHeight()||this.rowSize!==s.getRowSize())throw new m("input matrix dimensions do not match");let a=new ie(Math.floor(this.width/32)+1),c=this.rowSize,u=this.bits;for(let d=0,f=this.height;d<f;d++){let p=d*c,y=s.getRow(d,a).getBitArray();for(let _=0;_<c;_++)u[p+_]^=y[_]}}clear(){let s=this.bits,a=s.length;for(let c=0;c<a;c++)s[c]=0}setRegion(s,a,c,u){if(a<0||s<0)throw new m("Left and top must be nonnegative");if(u<1||c<1)throw new m("Height and width must be at least 1");let d=s+c,f=a+u;if(f>this.height||d>this.width)throw new m("The region must fit inside the matrix");let p=this.rowSize,y=this.bits;for(let _=a;_<f;_++){let v=_*p;for(let I=s;I<d;I++)y[v+Math.floor(I/32)]|=1<<(I&31)&4294967295}}getRow(s,a){a==null||a.getSize()<this.width?a=new ie(this.width):a.clear();let c=this.rowSize,u=this.bits,d=s*c;for(let f=0;f<c;f++)a.setBulk(f*32,u[d+f]);return a}setRow(s,a){D.arraycopy(a.getBitArray(),0,this.bits,s*this.rowSize,this.rowSize)}rotate180(){let s=this.getWidth(),a=this.getHeight(),c=new ie(s),u=new ie(s);for(let d=0,f=Math.floor((a+1)/2);d<f;d++)c=this.getRow(d,c),u=this.getRow(a-1-d,u),c.reverse(),u.reverse(),this.setRow(d,u),this.setRow(a-1-d,c)}getEnclosingRectangle(){let s=this.width,a=this.height,c=this.rowSize,u=this.bits,d=s,f=a,p=-1,y=-1;for(let _=0;_<a;_++)for(let v=0;v<c;v++){let I=u[_*c+v];if(I!==0){if(_<f&&(f=_),_>y&&(y=_),v*32<d){let b=0;for(;!(I<<31-b&4294967295);)b++;v*32+b<d&&(d=v*32+b)}if(v*32+31>p){let b=31;for(;!(I>>>b);)b--;v*32+b>p&&(p=v*32+b)}}}return p<d||y<f?null:Int32Array.from([d,f,p-d+1,y-f+1])}getTopLeftOnBit(){let s=this.rowSize,a=this.bits,c=0;for(;c<a.length&&a[c]===0;)c++;if(c===a.length)return null;let u=c/s,d=c%s*32,f=a[c],p=0;for(;!(f<<31-p&4294967295);)p++;return d+=p,Int32Array.from([d,u])}getBottomRightOnBit(){let s=this.rowSize,a=this.bits,c=a.length-1;for(;c>=0&&a[c]===0;)c--;if(c<0)return null;let u=Math.floor(c/s),d=Math.floor(c%s)*32,f=a[c],p=31;for(;!(f>>>p);)p--;return d+=p,Int32Array.from([d,u])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(s){if(!(s instanceof en))return!1;let a=s;return this.width===a.width&&this.height===a.height&&this.rowSize===a.rowSize&&$.equals(this.bits,a.bits)}hashCode(){let s=this.width;return s=31*s+this.width,s=31*s+this.height,s=31*s+this.rowSize,s=31*s+$.hashCode(this.bits),s}toString(s="X ",a="  ",c=`
`){return this.buildToString(s,a,c)}buildToString(s,a,c){let u=new yt;for(let d=0,f=this.height;d<f;d++){for(let p=0,y=this.width;p<y;p++)u.append(this.get(p,d)?s:a);u.append(c)}return u.toString()}clone(){return new en(this.width,this.height,this.rowSize,this.bits.slice())}}let V=(()=>{class w extends h{static getNotFoundInstance(){return new w}}return w.kind="NotFoundException",w})();class tn extends x{constructor(s){super(s),this.luminances=tn.EMPTY,this.buckets=new Int32Array(tn.LUMINANCE_BUCKETS)}getBlackRow(s,a){let c=this.getLuminanceSource(),u=c.getWidth();a==null||a.getSize()<u?a=new ie(u):a.clear(),this.initArrays(u);let d=c.getRow(s,this.luminances),f=this.buckets;for(let y=0;y<u;y++)f[(d[y]&255)>>tn.LUMINANCE_SHIFT]++;let p=tn.estimateBlackPoint(f);if(u<3)for(let y=0;y<u;y++)(d[y]&255)<p&&a.set(y);else{let y=d[0]&255,_=d[1]&255;for(let v=1;v<u-1;v++){let I=d[v+1]&255;(_*4-y-I)/2<p&&a.set(v),y=_,_=I}}return a}getBlackMatrix(){let s=this.getLuminanceSource(),a=s.getWidth(),c=s.getHeight(),u=new en(a,c);this.initArrays(a);let d=this.buckets;for(let y=1;y<5;y++){let _=Math.floor(c*y/5),v=s.getRow(_,this.luminances),I=Math.floor(a*4/5);for(let b=Math.floor(a/5);b<I;b++){let A=v[b]&255;d[A>>tn.LUMINANCE_SHIFT]++}}let f=tn.estimateBlackPoint(d),p=s.getMatrix();for(let y=0;y<c;y++){let _=y*a;for(let v=0;v<a;v++)(p[_+v]&255)<f&&u.set(v,y)}return u}createBinarizer(s){return new tn(s)}initArrays(s){this.luminances.length<s&&(this.luminances=new Uint8ClampedArray(s));let a=this.buckets;for(let c=0;c<tn.LUMINANCE_BUCKETS;c++)a[c]=0}static estimateBlackPoint(s){let a=s.length,c=0,u=0,d=0;for(let v=0;v<a;v++)s[v]>d&&(u=v,d=s[v]),s[v]>c&&(c=s[v]);let f=0,p=0;for(let v=0;v<a;v++){let I=v-u,b=s[v]*I*I;b>p&&(f=v,p=b)}if(u>f){let v=u;u=f,f=v}if(f-u<=a/16)throw new V;let y=f-1,_=-1;for(let v=f-1;v>u;v--){let I=v-u,b=I*I*(f-v)*(c-s[v]);b>_&&(y=v,_=b)}return y<<tn.LUMINANCE_SHIFT}}tn.LUMINANCE_BITS=5,tn.LUMINANCE_SHIFT=8-tn.LUMINANCE_BITS,tn.LUMINANCE_BUCKETS=1<<tn.LUMINANCE_BITS,tn.EMPTY=Uint8ClampedArray.from([0]);class Ne extends tn{constructor(s){super(s),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;let s=this.getLuminanceSource(),a=s.getWidth(),c=s.getHeight();if(a>=Ne.MINIMUM_DIMENSION&&c>=Ne.MINIMUM_DIMENSION){let u=s.getMatrix(),d=a>>Ne.BLOCK_SIZE_POWER;a&Ne.BLOCK_SIZE_MASK&&d++;let f=c>>Ne.BLOCK_SIZE_POWER;c&Ne.BLOCK_SIZE_MASK&&f++;let p=Ne.calculateBlackPoints(u,d,f,a,c),y=new en(a,c);Ne.calculateThresholdForBlock(u,d,f,a,c,p,y),this.matrix=y}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(s){return new Ne(s)}static calculateThresholdForBlock(s,a,c,u,d,f,p){let y=d-Ne.BLOCK_SIZE,_=u-Ne.BLOCK_SIZE;for(let v=0;v<c;v++){let I=v<<Ne.BLOCK_SIZE_POWER;I>y&&(I=y);let b=Ne.cap(v,2,c-3);for(let A=0;A<a;A++){let T=A<<Ne.BLOCK_SIZE_POWER;T>_&&(T=_);let M=Ne.cap(A,2,a-3),R=0;for(let q=-2;q<=2;q++){let Q=f[b+q];R+=Q[M-2]+Q[M-1]+Q[M]+Q[M+1]+Q[M+2]}let k=R/25;Ne.thresholdBlock(s,T,I,k,u,p)}}}static cap(s,a,c){return s<a?a:s>c?c:s}static thresholdBlock(s,a,c,u,d,f){for(let p=0,y=c*d+a;p<Ne.BLOCK_SIZE;p++,y+=d)for(let _=0;_<Ne.BLOCK_SIZE;_++)(s[y+_]&255)<=u&&f.set(a+_,c+p)}static calculateBlackPoints(s,a,c,u,d){let f=d-Ne.BLOCK_SIZE,p=u-Ne.BLOCK_SIZE,y=new Array(c);for(let _=0;_<c;_++){y[_]=new Int32Array(a);let v=_<<Ne.BLOCK_SIZE_POWER;v>f&&(v=f);for(let I=0;I<a;I++){let b=I<<Ne.BLOCK_SIZE_POWER;b>p&&(b=p);let A=0,T=255,M=0;for(let k=0,q=v*u+b;k<Ne.BLOCK_SIZE;k++,q+=u){for(let Q=0;Q<Ne.BLOCK_SIZE;Q++){let B=s[q+Q]&255;A+=B,B<T&&(T=B),B>M&&(M=B)}if(M-T>Ne.MIN_DYNAMIC_RANGE)for(k++,q+=u;k<Ne.BLOCK_SIZE;k++,q+=u)for(let Q=0;Q<Ne.BLOCK_SIZE;Q++)A+=s[q+Q]&255}let R=A>>Ne.BLOCK_SIZE_POWER*2;if(M-T<=Ne.MIN_DYNAMIC_RANGE&&(R=T/2,_>0&&I>0)){let k=(y[_-1][I]+2*y[_][I-1]+y[_-1][I-1])/4;T<k&&(R=k)}y[_][I]=R}}return y}}Ne.BLOCK_SIZE_POWER=3,Ne.BLOCK_SIZE=1<<Ne.BLOCK_SIZE_POWER,Ne.BLOCK_SIZE_MASK=Ne.BLOCK_SIZE-1,Ne.MINIMUM_DIMENSION=Ne.BLOCK_SIZE*5,Ne.MIN_DYNAMIC_RANGE=24;class Qa{constructor(s,a){this.width=s,this.height=a}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(s,a,c,u){throw new Sn("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new Sn("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new Sn("This luminance source does not support rotation by 45 degrees.")}toString(){let s=new Uint8ClampedArray(this.width),a=new yt;for(let c=0;c<this.height;c++){let u=this.getRow(c,s);for(let d=0;d<this.width;d++){let f=u[d]&255,p;f<64?p="#":f<128?p="+":f<192?p=".":p=" ",a.append(p)}a.append(`
`)}return a.toString()}}class zi extends Qa{constructor(s){super(s.getWidth(),s.getHeight()),this.delegate=s}getRow(s,a){let c=this.delegate.getRow(s,a),u=this.getWidth();for(let d=0;d<u;d++)c[d]=255-(c[d]&255);return c}getMatrix(){let s=this.delegate.getMatrix(),a=this.getWidth()*this.getHeight(),c=new Uint8ClampedArray(a);for(let u=0;u<a;u++)c[u]=255-(s[u]&255);return c}isCropSupported(){return this.delegate.isCropSupported()}crop(s,a,c,u){return new zi(this.delegate.crop(s,a,c,u))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new zi(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new zi(this.delegate.rotateCounterClockwise45())}}class Wi extends Qa{constructor(s){super(s.width,s.height),this.canvas=s,this.tempCanvasElement=null,this.buffer=Wi.makeBufferFromCanvasImageData(s)}static makeBufferFromCanvasImageData(s){let a=s.getContext("2d").getImageData(0,0,s.width,s.height);return Wi.toGrayscaleBuffer(a.data,s.width,s.height)}static toGrayscaleBuffer(s,a,c){let u=new Uint8ClampedArray(a*c);for(let d=0,f=0,p=s.length;d<p;d+=4,f++){let y;if(s[d+3]===0)y=255;else{let v=s[d],I=s[d+1],b=s[d+2];y=306*v+601*I+117*b+512>>10}u[f]=y}return u}getRow(s,a){if(s<0||s>=this.getHeight())throw new m("Requested row is outside the image: "+s);let c=this.getWidth(),u=s*c;return a===null?a=this.buffer.slice(u,u+c):(a.length<c&&(a=new Uint8ClampedArray(c)),a.set(this.buffer.slice(u,u+c))),a}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(s,a,c,u){return super.crop(s,a,c,u),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){let s=this.canvas.ownerDocument.createElement("canvas");s.width=this.canvas.width,s.height=this.canvas.height,this.tempCanvasElement=s}return this.tempCanvasElement}rotate(s){let a=this.getTempCanvasElement(),c=a.getContext("2d"),u=s*Wi.DEGREE_TO_RADIANS,d=this.canvas.width,f=this.canvas.height,p=Math.ceil(Math.abs(Math.cos(u))*d+Math.abs(Math.sin(u))*f),y=Math.ceil(Math.abs(Math.sin(u))*d+Math.abs(Math.cos(u))*f);return a.width=p,a.height=y,c.translate(p/2,y/2),c.rotate(u),c.drawImage(this.canvas,d/-2,f/-2),this.buffer=Wi.makeBufferFromCanvasImageData(a),this}invert(){return new zi(this)}}Wi.DEGREE_TO_RADIANS=Math.PI/180;class J_{constructor(s,a,c){this.deviceId=s,this.label=a,this.kind="videoinput",this.groupId=c||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var An=(globalThis||global||self||window||void 0)&&(globalThis||global||self||window||void 0).__awaiter||function(w,s,a,c){function u(d){return d instanceof a?d:new a(function(f){f(d)})}return new(a||(a=Promise))(function(d,f){function p(v){try{_(c.next(v))}catch(I){f(I)}}function y(v){try{_(c.throw(v))}catch(I){f(I)}}function _(v){v.done?d(v.value):u(v.value).then(p,y)}_((c=c.apply(w,s||[])).next())})};class To{constructor(s,a=500,c){this.reader=s,this.timeBetweenScansMillis=a,this._hints=c,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(s){this._timeBetweenDecodingAttempts=s<0?0:s}set hints(s){this._hints=s||null}get hints(){return this._hints}listVideoInputDevices(){return An(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");let s=yield navigator.mediaDevices.enumerateDevices(),a=[];for(let c of s){let u=c.kind==="video"?"videoinput":c.kind;if(u!=="videoinput")continue;let d=c.deviceId||c.id,f=c.label||`Video device ${a.length+1}`,p=c.groupId,y={deviceId:d,label:f,kind:u,groupId:p};a.push(y)}return a})}getVideoInputDevices(){return An(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(a=>new J_(a.deviceId,a.label))})}findDeviceById(s){return An(this,void 0,void 0,function*(){let a=yield this.listVideoInputDevices();return a?a.find(c=>c.deviceId===s):null})}decodeFromInputVideoDevice(s,a){return An(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(s,a)})}decodeOnceFromVideoDevice(s,a){return An(this,void 0,void 0,function*(){this.reset();let c;s?c={deviceId:{exact:s}}:c={facingMode:"environment"};let u={video:c};return yield this.decodeOnceFromConstraints(u,a)})}decodeOnceFromConstraints(s,a){return An(this,void 0,void 0,function*(){let c=yield navigator.mediaDevices.getUserMedia(s);return yield this.decodeOnceFromStream(c,a)})}decodeOnceFromStream(s,a){return An(this,void 0,void 0,function*(){this.reset();let c=yield this.attachStreamToVideo(s,a);return yield this.decodeOnce(c)})}decodeFromInputVideoDeviceContinuously(s,a,c){return An(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(s,a,c)})}decodeFromVideoDevice(s,a,c){return An(this,void 0,void 0,function*(){let u;s?u={deviceId:{exact:s}}:u={facingMode:"environment"};let d={video:u};return yield this.decodeFromConstraints(d,a,c)})}decodeFromConstraints(s,a,c){return An(this,void 0,void 0,function*(){let u=yield navigator.mediaDevices.getUserMedia(s);return yield this.decodeFromStream(u,a,c)})}decodeFromStream(s,a,c){return An(this,void 0,void 0,function*(){this.reset();let u=yield this.attachStreamToVideo(s,a);return yield this.decodeContinuously(u,c)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(s,a){return An(this,void 0,void 0,function*(){let c=this.prepareVideoElement(a);return this.addVideoSource(c,s),this.videoElement=c,this.stream=s,yield this.playVideoOnLoadAsync(c),c})}playVideoOnLoadAsync(s){return new Promise((a,c)=>this.playVideoOnLoad(s,()=>a()))}playVideoOnLoad(s,a){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(s),s.addEventListener("ended",this.videoEndedListener),s.addEventListener("canplay",this.videoCanPlayListener),s.addEventListener("playing",a),this.tryPlayVideo(s)}isVideoPlaying(s){return s.currentTime>0&&!s.paused&&!s.ended&&s.readyState>2}tryPlayVideo(s){return An(this,void 0,void 0,function*(){if(this.isVideoPlaying(s)){console.warn("Trying to play video that is already playing.");return}try{yield s.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(s,a){let c=document.getElementById(s);if(!c)throw new g(`element with id '${s}' not found`);if(c.nodeName.toLowerCase()!==a.toLowerCase())throw new g(`element with id '${s}' must be an ${a} element`);return c}decodeFromImage(s,a){if(!s&&!a)throw new g("either imageElement with a src set or an url must be provided");return a&&!s?this.decodeFromImageUrl(a):this.decodeFromImageElement(s)}decodeFromVideo(s,a){if(!s&&!a)throw new g("Either an element with a src set or an URL must be provided");return a&&!s?this.decodeFromVideoUrl(a):this.decodeFromVideoElement(s)}decodeFromVideoContinuously(s,a,c){if(s===void 0&&a===void 0)throw new g("Either an element with a src set or an URL must be provided");return a&&!s?this.decodeFromVideoUrlContinuously(a,c):this.decodeFromVideoElementContinuously(s,c)}decodeFromImageElement(s){if(!s)throw new g("An image element must be provided.");this.reset();let a=this.prepareImageElement(s);this.imageElement=a;let c;return this.isImageLoaded(a)?c=this.decodeOnce(a,!1,!0):c=this._decodeOnLoadImage(a),c}decodeFromVideoElement(s){let a=this._decodeFromVideoElementSetup(s);return this._decodeOnLoadVideo(a)}decodeFromVideoElementContinuously(s,a){let c=this._decodeFromVideoElementSetup(s);return this._decodeOnLoadVideoContinuously(c,a)}_decodeFromVideoElementSetup(s){if(!s)throw new g("A video element must be provided.");this.reset();let a=this.prepareVideoElement(s);return this.videoElement=a,a}decodeFromImageUrl(s){if(!s)throw new g("An URL must be provided.");this.reset();let a=this.prepareImageElement();this.imageElement=a;let c=this._decodeOnLoadImage(a);return a.src=s,c}decodeFromVideoUrl(s){if(!s)throw new g("An URL must be provided.");this.reset();let a=this.prepareVideoElement(),c=this.decodeFromVideoElement(a);return a.src=s,c}decodeFromVideoUrlContinuously(s,a){if(!s)throw new g("An URL must be provided.");this.reset();let c=this.prepareVideoElement(),u=this.decodeFromVideoElementContinuously(c,a);return c.src=s,u}_decodeOnLoadImage(s){return new Promise((a,c)=>{this.imageLoadedListener=()=>this.decodeOnce(s,!1,!0).then(a,c),s.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(s){return An(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(s),yield this.decodeOnce(s)})}_decodeOnLoadVideoContinuously(s,a){return An(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(s),this.decodeContinuously(s,a)})}isImageLoaded(s){return!(!s.complete||s.naturalWidth===0)}prepareImageElement(s){let a;return typeof s>"u"&&(a=document.createElement("img"),a.width=200,a.height=200),typeof s=="string"&&(a=this.getMediaElement(s,"img")),s instanceof HTMLImageElement&&(a=s),a}prepareVideoElement(s){let a;return!s&&typeof document<"u"&&(a=document.createElement("video"),a.width=200,a.height=200),typeof s=="string"&&(a=this.getMediaElement(s,"video")),s instanceof HTMLVideoElement&&(a=s),a.setAttribute("autoplay","true"),a.setAttribute("muted","true"),a.setAttribute("playsinline","true"),a}decodeOnce(s,a=!0,c=!0){this._stopAsyncDecode=!1;let u=(d,f)=>{if(this._stopAsyncDecode){f(new V("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{let p=this.decode(s);d(p)}catch(p){let y=a&&p instanceof V,v=(p instanceof E||p instanceof H)&&c;if(y||v)return setTimeout(u,this._timeBetweenDecodingAttempts,d,f);f(p)}};return new Promise((d,f)=>u(d,f))}decodeContinuously(s,a){this._stopContinuousDecode=!1;let c=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{let u=this.decode(s);a(u,null),setTimeout(c,this.timeBetweenScansMillis)}catch(u){a(null,u);let d=u instanceof E||u instanceof H,f=u instanceof V;(d||f)&&setTimeout(c,this._timeBetweenDecodingAttempts)}};c()}decode(s){let a=this.createBinaryBitmap(s);return this.decodeBitmap(a)}_isHTMLVideoElement(s){return s.videoWidth!==0}drawFrameOnCanvas(s,a,c){a||(a={sx:0,sy:0,sWidth:s.videoWidth,sHeight:s.videoHeight,dx:0,dy:0,dWidth:s.videoWidth,dHeight:s.videoHeight}),c||(c=this.captureCanvasContext),c.drawImage(s,a.sx,a.sy,a.sWidth,a.sHeight,a.dx,a.dy,a.dWidth,a.dHeight)}drawImageOnCanvas(s,a,c=this.captureCanvasContext){a||(a={sx:0,sy:0,sWidth:s.naturalWidth,sHeight:s.naturalHeight,dx:0,dy:0,dWidth:s.naturalWidth,dHeight:s.naturalHeight}),c||(c=this.captureCanvasContext),c.drawImage(s,a.sx,a.sy,a.sWidth,a.sHeight,a.dx,a.dy,a.dWidth,a.dHeight)}createBinaryBitmap(s){let a=this.getCaptureCanvasContext(s);this._isHTMLVideoElement(s)?this.drawFrameOnCanvas(s):this.drawImageOnCanvas(s);let c=this.getCaptureCanvas(s),u=new Wi(c),d=new Ne(u);return new C(d)}getCaptureCanvasContext(s){if(!this.captureCanvasContext){let c=this.getCaptureCanvas(s).getContext("2d");this.captureCanvasContext=c}return this.captureCanvasContext}getCaptureCanvas(s){if(!this.captureCanvas){let a=this.createCaptureCanvas(s);this.captureCanvas=a}return this.captureCanvas}decodeBitmap(s){return this.reader.decode(s,this._hints)}createCaptureCanvas(s){if(typeof document>"u")return this._destroyCaptureCanvas(),null;let a=document.createElement("canvas"),c,u;return typeof s<"u"&&(s instanceof HTMLVideoElement?(c=s.videoWidth,u=s.videoHeight):s instanceof HTMLImageElement&&(c=s.naturalWidth||s.width,u=s.naturalHeight||s.height)),a.style.width=c+"px",a.style.height=u+"px",a.width=c,a.height=u,a}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(s=>s.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(s,a){try{s.srcObject=a}catch{s.src=URL.createObjectURL(a)}}cleanVideoSource(s){try{s.srcObject=null}catch{s.src=""}this.videoElement.removeAttribute("src")}}class Dn{constructor(s,a,c=a==null?0:8*a.length,u,d,f=D.currentTimeMillis()){this.text=s,this.rawBytes=a,this.numBits=c,this.resultPoints=u,this.format=d,this.timestamp=f,this.text=s,this.rawBytes=a,c==null?this.numBits=a==null?0:8*a.length:this.numBits=c,this.resultPoints=u,this.format=d,this.resultMetadata=null,f==null?this.timestamp=D.currentTimeMillis():this.timestamp=f}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(s,a){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(s,a)}putAllMetadata(s){s!==null&&(this.resultMetadata===null?this.resultMetadata=s:this.resultMetadata=new Map(s))}addResultPoints(s){let a=this.resultPoints;if(a===null)this.resultPoints=s;else if(s!==null&&s.length>0){let c=new Array(a.length+s.length);D.arraycopy(a,0,c,0,a.length),D.arraycopy(s,0,c,a.length,s.length),this.resultPoints=c}}getTimestamp(){return this.timestamp}toString(){return this.text}}var ew=function(w){return w[w.AZTEC=0]="AZTEC",w[w.CODABAR=1]="CODABAR",w[w.CODE_39=2]="CODE_39",w[w.CODE_93=3]="CODE_93",w[w.CODE_128=4]="CODE_128",w[w.DATA_MATRIX=5]="DATA_MATRIX",w[w.EAN_8=6]="EAN_8",w[w.EAN_13=7]="EAN_13",w[w.ITF=8]="ITF",w[w.MAXICODE=9]="MAXICODE",w[w.PDF_417=10]="PDF_417",w[w.QR_CODE=11]="QR_CODE",w[w.RSS_14=12]="RSS_14",w[w.RSS_EXPANDED=13]="RSS_EXPANDED",w[w.UPC_A=14]="UPC_A",w[w.UPC_E=15]="UPC_E",w[w.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION",w}(ew||{}),ye=ew,tw=function(w){return w[w.OTHER=0]="OTHER",w[w.ORIENTATION=1]="ORIENTATION",w[w.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",w[w.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",w[w.ISSUE_NUMBER=4]="ISSUE_NUMBER",w[w.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",w[w.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",w[w.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",w[w.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",w[w.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",w[w.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY",w}(tw||{}),nn=tw;class Ka{constructor(s,a,c,u,d=-1,f=-1){this.rawBytes=s,this.text=a,this.byteSegments=c,this.ecLevel=u,this.structuredAppendSequenceNumber=d,this.structuredAppendParity=f,this.numBits=s==null?0:8*s.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(s){this.numBits=s}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(s){this.errorsCorrected=s}getErasures(){return this.erasures}setErasures(s){this.erasures=s}getOther(){return this.other}setOther(s){this.other=s}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class Ja{exp(s){return this.expTable[s]}log(s){if(s===0)throw new m;return this.logTable[s]}static addOrSubtract(s,a){return s^a}}class Pn{constructor(s,a){if(a.length===0)throw new m;this.field=s;let c=a.length;if(c>1&&a[0]===0){let u=1;for(;u<c&&a[u]===0;)u++;u===c?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(c-u),D.arraycopy(a,u,this.coefficients,0,this.coefficients.length))}else this.coefficients=a}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(s){return this.coefficients[this.coefficients.length-1-s]}evaluateAt(s){if(s===0)return this.getCoefficient(0);let a=this.coefficients,c;if(s===1){c=0;for(let f=0,p=a.length;f!==p;f++){let y=a[f];c=Ja.addOrSubtract(c,y)}return c}c=a[0];let u=a.length,d=this.field;for(let f=1;f<u;f++)c=Ja.addOrSubtract(d.multiply(s,c),a[f]);return c}addOrSubtract(s){if(!this.field.equals(s.field))throw new m("GenericGFPolys do not have same GenericGF field");if(this.isZero())return s;if(s.isZero())return this;let a=this.coefficients,c=s.coefficients;if(a.length>c.length){let f=a;a=c,c=f}let u=new Int32Array(c.length),d=c.length-a.length;D.arraycopy(c,0,u,0,d);for(let f=d;f<c.length;f++)u[f]=Ja.addOrSubtract(a[f-d],c[f]);return new Pn(this.field,u)}multiply(s){if(!this.field.equals(s.field))throw new m("GenericGFPolys do not have same GenericGF field");if(this.isZero()||s.isZero())return this.field.getZero();let a=this.coefficients,c=a.length,u=s.coefficients,d=u.length,f=new Int32Array(c+d-1),p=this.field;for(let y=0;y<c;y++){let _=a[y];for(let v=0;v<d;v++)f[y+v]=Ja.addOrSubtract(f[y+v],p.multiply(_,u[v]))}return new Pn(p,f)}multiplyScalar(s){if(s===0)return this.field.getZero();if(s===1)return this;let a=this.coefficients.length,c=this.field,u=new Int32Array(a),d=this.coefficients;for(let f=0;f<a;f++)u[f]=c.multiply(d[f],s);return new Pn(c,u)}multiplyByMonomial(s,a){if(s<0)throw new m;if(a===0)return this.field.getZero();let c=this.coefficients,u=c.length,d=new Int32Array(u+s),f=this.field;for(let p=0;p<u;p++)d[p]=f.multiply(c[p],a);return new Pn(f,d)}divide(s){if(!this.field.equals(s.field))throw new m("GenericGFPolys do not have same GenericGF field");if(s.isZero())throw new m("Divide by 0");let a=this.field,c=a.getZero(),u=this,d=s.getCoefficient(s.getDegree()),f=a.inverse(d);for(;u.getDegree()>=s.getDegree()&&!u.isZero();){let p=u.getDegree()-s.getDegree(),y=a.multiply(u.getCoefficient(u.getDegree()),f),_=s.multiplyByMonomial(p,y),v=a.buildMonomial(p,y);c=c.addOrSubtract(v),u=u.addOrSubtract(_)}return[c,u]}toString(){let s="";for(let a=this.getDegree();a>=0;a--){let c=this.getCoefficient(a);if(c!==0){if(c<0?(s+=" - ",c=-c):s.length>0&&(s+=" + "),a===0||c!==1){let u=this.field.log(c);u===0?s+="1":u===1?s+="a":(s+="a^",s+=u)}a!==0&&(a===1?s+="x":(s+="x^",s+=a))}}return s}}let tp=(()=>{class w extends h{}return w.kind="ArithmeticException",w})();class it extends Ja{constructor(s,a,c){super(),this.primitive=s,this.size=a,this.generatorBase=c;let u=new Int32Array(a),d=1;for(let p=0;p<a;p++)u[p]=d,d*=2,d>=a&&(d^=s,d&=a-1);this.expTable=u;let f=new Int32Array(a);for(let p=0;p<a-1;p++)f[u[p]]=p;this.logTable=f,this.zero=new Pn(this,Int32Array.from([0])),this.one=new Pn(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(s,a){if(s<0)throw new m;if(a===0)return this.zero;let c=new Int32Array(s+1);return c[0]=a,new Pn(this,c)}inverse(s){if(s===0)throw new tp;return this.expTable[this.size-this.logTable[s]-1]}multiply(s,a){return s===0||a===0?0:this.expTable[(this.logTable[s]+this.logTable[a])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+W.toHexString(this.primitive)+","+this.size+")"}equals(s){return s===this}}it.AZTEC_DATA_12=new it(4201,4096,1),it.AZTEC_DATA_10=new it(1033,1024,1),it.AZTEC_DATA_6=new it(67,64,1),it.AZTEC_PARAM=new it(19,16,1),it.QR_CODE_FIELD_256=new it(285,256,0),it.DATA_MATRIX_FIELD_256=new it(301,256,1),it.AZTEC_DATA_8=it.DATA_MATRIX_FIELD_256,it.MAXICODE_FIELD_64=it.AZTEC_DATA_6;let ec=(()=>{class w extends h{}return w.kind="ReedSolomonException",w})(),fi=(()=>{class w extends h{}return w.kind="IllegalStateException",w})();class tc{constructor(s){this.field=s}decode(s,a){let c=this.field,u=new Pn(c,s),d=new Int32Array(a),f=!0;for(let A=0;A<a;A++){let T=u.evaluateAt(c.exp(A+c.getGeneratorBase()));d[d.length-1-A]=T,T!==0&&(f=!1)}if(f)return;let p=new Pn(c,d),y=this.runEuclideanAlgorithm(c.buildMonomial(a,1),p,a),_=y[0],v=y[1],I=this.findErrorLocations(_),b=this.findErrorMagnitudes(v,I);for(let A=0;A<I.length;A++){let T=s.length-1-c.log(I[A]);if(T<0)throw new ec("Bad error location");s[T]=it.addOrSubtract(s[T],b[A])}}runEuclideanAlgorithm(s,a,c){if(s.getDegree()<a.getDegree()){let A=s;s=a,a=A}let u=this.field,d=s,f=a,p=u.getZero(),y=u.getOne();for(;f.getDegree()>=(c/2|0);){let A=d,T=p;if(d=f,p=y,d.isZero())throw new ec("r_{i-1} was zero");f=A;let M=u.getZero(),R=d.getCoefficient(d.getDegree()),k=u.inverse(R);for(;f.getDegree()>=d.getDegree()&&!f.isZero();){let q=f.getDegree()-d.getDegree(),Q=u.multiply(f.getCoefficient(f.getDegree()),k);M=M.addOrSubtract(u.buildMonomial(q,Q)),f=f.addOrSubtract(d.multiplyByMonomial(q,Q))}if(y=M.multiply(p).addOrSubtract(T),f.getDegree()>=d.getDegree())throw new fi("Division algorithm failed to reduce polynomial?")}let _=y.getCoefficient(0);if(_===0)throw new ec("sigmaTilde(0) was zero");let v=u.inverse(_),I=y.multiplyScalar(v),b=f.multiplyScalar(v);return[I,b]}findErrorLocations(s){let a=s.getDegree();if(a===1)return Int32Array.from([s.getCoefficient(1)]);let c=new Int32Array(a),u=0,d=this.field;for(let f=1;f<d.getSize()&&u<a;f++)s.evaluateAt(f)===0&&(c[u]=d.inverse(f),u++);if(u!==a)throw new ec("Error locator degree does not match number of roots");return c}findErrorMagnitudes(s,a){let c=a.length,u=new Int32Array(c),d=this.field;for(let f=0;f<c;f++){let p=d.inverse(a[f]),y=1;for(let _=0;_<c;_++)if(f!==_){let v=d.multiply(a[_],p),I=v&1?v&-2:v|1;y=d.multiply(y,I)}u[f]=d.multiply(s.evaluateAt(p),d.inverse(y)),d.getGeneratorBase()!==0&&(u[f]=d.multiply(u[f],p))}return u}}var _n=function(w){return w[w.UPPER=0]="UPPER",w[w.LOWER=1]="LOWER",w[w.MIXED=2]="MIXED",w[w.DIGIT=3]="DIGIT",w[w.PUNCT=4]="PUNCT",w[w.BINARY=5]="BINARY",w}(_n||{});let np=(()=>{class w{decode(a){this.ddata=a;let c=a.getBits(),u=this.extractBits(c),d=this.correctBits(u),f=w.convertBoolArrayToByteArray(d),p=w.getEncodedData(d),y=new Ka(f,p,null,null);return y.setNumBits(d.length),y}static highLevelDecode(a){return this.getEncodedData(a)}static getEncodedData(a){let c=a.length,u=_n.UPPER,d=_n.UPPER,f="",p=0;for(;p<c;)if(d===_n.BINARY){if(c-p<5)break;let y=w.readCode(a,p,5);if(p+=5,y===0){if(c-p<11)break;y=w.readCode(a,p,11)+31,p+=11}for(let _=0;_<y;_++){if(c-p<8){p=c;break}let v=w.readCode(a,p,8);f+=Ce.castAsNonUtf8Char(v),p+=8}d=u}else{let y=d===_n.DIGIT?4:5;if(c-p<y)break;let _=w.readCode(a,p,y);p+=y;let v=w.getCharacter(d,_);v.startsWith("CTRL_")?(u=d,d=w.getTable(v.charAt(5)),v.charAt(6)==="L"&&(u=d)):(f+=v,d=u)}return f}static getTable(a){switch(a){case"L":return _n.LOWER;case"P":return _n.PUNCT;case"M":return _n.MIXED;case"D":return _n.DIGIT;case"B":return _n.BINARY;case"U":default:return _n.UPPER}}static getCharacter(a,c){switch(a){case _n.UPPER:return w.UPPER_TABLE[c];case _n.LOWER:return w.LOWER_TABLE[c];case _n.MIXED:return w.MIXED_TABLE[c];case _n.PUNCT:return w.PUNCT_TABLE[c];case _n.DIGIT:return w.DIGIT_TABLE[c];default:throw new fi("Bad table")}}correctBits(a){let c,u;this.ddata.getNbLayers()<=2?(u=6,c=it.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(u=8,c=it.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(u=10,c=it.AZTEC_DATA_10):(u=12,c=it.AZTEC_DATA_12);let d=this.ddata.getNbDatablocks(),f=a.length/u;if(f<d)throw new H;let p=a.length%u,y=new Int32Array(f);for(let A=0;A<f;A++,p+=u)y[A]=w.readCode(a,p,u);try{new tc(c).decode(y,f-d)}catch(A){throw new H(A)}let _=(1<<u)-1,v=0;for(let A=0;A<d;A++){let T=y[A];if(T===0||T===_)throw new H;(T===1||T===_-1)&&v++}let I=new Array(d*u-v),b=0;for(let A=0;A<d;A++){let T=y[A];if(T===1||T===_-1)I.fill(T>1,b,b+u-1),b+=u-1;else for(let M=u-1;M>=0;--M)I[b++]=(T&1<<M)!==0}return I}extractBits(a){let c=this.ddata.isCompact(),u=this.ddata.getNbLayers(),d=(c?11:14)+u*4,f=new Int32Array(d),p=new Array(this.totalBitsInLayer(u,c));if(c)for(let y=0;y<f.length;y++)f[y]=y;else{let y=d+1+2*W.truncDivision(W.truncDivision(d,2)-1,15),_=d/2,v=W.truncDivision(y,2);for(let I=0;I<_;I++){let b=I+W.truncDivision(I,15);f[_-I-1]=v-b-1,f[_+I]=v+b+1}}for(let y=0,_=0;y<u;y++){let v=(u-y)*4+(c?9:12),I=y*2,b=d-1-I;for(let A=0;A<v;A++){let T=A*2;for(let M=0;M<2;M++)p[_+T+M]=a.get(f[I+M],f[I+A]),p[_+2*v+T+M]=a.get(f[I+A],f[b-M]),p[_+4*v+T+M]=a.get(f[b-M],f[b-A]),p[_+6*v+T+M]=a.get(f[b-A],f[I+M])}_+=v*8}return p}static readCode(a,c,u){let d=0;for(let f=c;f<c+u;f++)d<<=1,a[f]&&(d|=1);return d}static readByte(a,c){let u=a.length-c;return u>=8?w.readCode(a,c,8):w.readCode(a,c,u)<<8-u}static convertBoolArrayToByteArray(a){let c=new Uint8Array((a.length+7)/8);for(let u=0;u<c.length;u++)c[u]=w.readByte(a,8*u);return c}totalBitsInLayer(a,c){return((c?88:112)+16*a)*a}}return w.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],w.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],w.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],w.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],w.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],w})();class Je{constructor(){}static round(s){return s===NaN?0:s<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:s>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:s+(s<0?-.5:.5)|0}static distance(s,a,c,u){let d=s-c,f=a-u;return Math.sqrt(d*d+f*f)}static sum(s){let a=0;for(let c=0,u=s.length;c!==u;c++){let d=s[c];a+=d}return a}}class uu{static floatToIntBits(s){return s}}uu.MAX_VALUE=Number.MAX_SAFE_INTEGER;class se{constructor(s,a){this.x=s,this.y=a}getX(){return this.x}getY(){return this.y}equals(s){if(s instanceof se){let a=s;return this.x===a.x&&this.y===a.y}return!1}hashCode(){return 31*uu.floatToIntBits(this.x)+uu.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(s){let a=this.distance(s[0],s[1]),c=this.distance(s[1],s[2]),u=this.distance(s[0],s[2]),d,f,p;if(c>=a&&c>=u?(f=s[0],d=s[1],p=s[2]):u>=c&&u>=a?(f=s[1],d=s[0],p=s[2]):(f=s[2],d=s[0],p=s[1]),this.crossProductZ(d,f,p)<0){let y=d;d=p,p=y}s[0]=d,s[1]=f,s[2]=p}static distance(s,a){return Je.distance(s.x,s.y,a.x,a.y)}static crossProductZ(s,a,c){let u=a.x,d=a.y;return(c.x-u)*(s.y-d)-(c.y-d)*(s.x-u)}}class du{constructor(s,a){this.bits=s,this.points=a}getBits(){return this.bits}getPoints(){return this.points}}class nw extends du{constructor(s,a,c,u,d){super(s,a),this.compact=c,this.nbDatablocks=u,this.nbLayers=d}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}let fu=(()=>{class w{constructor(a,c,u,d){this.image=a,this.height=a.getHeight(),this.width=a.getWidth(),c==null&&(c=w.INIT_SIZE),u==null&&(u=a.getWidth()/2|0),d==null&&(d=a.getHeight()/2|0);let f=c/2|0;if(this.leftInit=u-f,this.rightInit=u+f,this.upInit=d-f,this.downInit=d+f,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new V}detect(){let a=this.leftInit,c=this.rightInit,u=this.upInit,d=this.downInit,f=!1,p=!0,y=!1,_=!1,v=!1,I=!1,b=!1,A=this.width,T=this.height;for(;p;){p=!1;let M=!0;for(;(M||!_)&&c<A;)M=this.containsBlackPoint(u,d,c,!1),M?(c++,p=!0,_=!0):_||c++;if(c>=A){f=!0;break}let R=!0;for(;(R||!v)&&d<T;)R=this.containsBlackPoint(a,c,d,!0),R?(d++,p=!0,v=!0):v||d++;if(d>=T){f=!0;break}let k=!0;for(;(k||!I)&&a>=0;)k=this.containsBlackPoint(u,d,a,!1),k?(a--,p=!0,I=!0):I||a--;if(a<0){f=!0;break}let q=!0;for(;(q||!b)&&u>=0;)q=this.containsBlackPoint(a,c,u,!0),q?(u--,p=!0,b=!0):b||u--;if(u<0){f=!0;break}p&&(y=!0)}if(!f&&y){let M=c-a,R=null;for(let B=1;R===null&&B<M;B++)R=this.getBlackPointOnSegment(a,d-B,a+B,d);if(R==null)throw new V;let k=null;for(let B=1;k===null&&B<M;B++)k=this.getBlackPointOnSegment(a,u+B,a+B,u);if(k==null)throw new V;let q=null;for(let B=1;q===null&&B<M;B++)q=this.getBlackPointOnSegment(c,u+B,c-B,u);if(q==null)throw new V;let Q=null;for(let B=1;Q===null&&B<M;B++)Q=this.getBlackPointOnSegment(c,d-B,c-B,d);if(Q==null)throw new V;return this.centerEdges(Q,R,q,k)}else throw new V}getBlackPointOnSegment(a,c,u,d){let f=Je.round(Je.distance(a,c,u,d)),p=(u-a)/f,y=(d-c)/f,_=this.image;for(let v=0;v<f;v++){let I=Je.round(a+v*p),b=Je.round(c+v*y);if(_.get(I,b))return new se(I,b)}return null}centerEdges(a,c,u,d){let f=a.getX(),p=a.getY(),y=c.getX(),_=c.getY(),v=u.getX(),I=u.getY(),b=d.getX(),A=d.getY(),T=w.CORR;return f<this.width/2?[new se(b-T,A+T),new se(y+T,_+T),new se(v-T,I-T),new se(f+T,p-T)]:[new se(b+T,A+T),new se(y+T,_-T),new se(v-T,I+T),new se(f-T,p-T)]}containsBlackPoint(a,c,u,d){let f=this.image;if(d){for(let p=a;p<=c;p++)if(f.get(p,u))return!0}else for(let p=a;p<=c;p++)if(f.get(u,p))return!0;return!1}}return w.INIT_SIZE=10,w.CORR=1,w})();class rp{static checkAndNudgePoints(s,a){let c=s.getWidth(),u=s.getHeight(),d=!0;for(let f=0;f<a.length&&d;f+=2){let p=Math.floor(a[f]),y=Math.floor(a[f+1]);if(p<-1||p>c||y<-1||y>u)throw new V;d=!1,p===-1?(a[f]=0,d=!0):p===c&&(a[f]=c-1,d=!0),y===-1?(a[f+1]=0,d=!0):y===u&&(a[f+1]=u-1,d=!0)}d=!0;for(let f=a.length-2;f>=0&&d;f-=2){let p=Math.floor(a[f]),y=Math.floor(a[f+1]);if(p<-1||p>c||y<-1||y>u)throw new V;d=!1,p===-1?(a[f]=0,d=!0):p===c&&(a[f]=c-1,d=!0),y===-1?(a[f+1]=0,d=!0):y===u&&(a[f+1]=u-1,d=!0)}}}class br{constructor(s,a,c,u,d,f,p,y,_){this.a11=s,this.a21=a,this.a31=c,this.a12=u,this.a22=d,this.a32=f,this.a13=p,this.a23=y,this.a33=_}static quadrilateralToQuadrilateral(s,a,c,u,d,f,p,y,_,v,I,b,A,T,M,R){let k=br.quadrilateralToSquare(s,a,c,u,d,f,p,y);return br.squareToQuadrilateral(_,v,I,b,A,T,M,R).times(k)}transformPoints(s){let a=s.length,c=this.a11,u=this.a12,d=this.a13,f=this.a21,p=this.a22,y=this.a23,_=this.a31,v=this.a32,I=this.a33;for(let b=0;b<a;b+=2){let A=s[b],T=s[b+1],M=d*A+y*T+I;s[b]=(c*A+f*T+_)/M,s[b+1]=(u*A+p*T+v)/M}}transformPointsWithValues(s,a){let c=this.a11,u=this.a12,d=this.a13,f=this.a21,p=this.a22,y=this.a23,_=this.a31,v=this.a32,I=this.a33,b=s.length;for(let A=0;A<b;A++){let T=s[A],M=a[A],R=d*T+y*M+I;s[A]=(c*T+f*M+_)/R,a[A]=(u*T+p*M+v)/R}}static squareToQuadrilateral(s,a,c,u,d,f,p,y){let _=s-c+d-p,v=a-u+f-y;if(_===0&&v===0)return new br(c-s,d-c,s,u-a,f-u,a,0,0,1);{let I=c-d,b=p-d,A=u-f,T=y-f,M=I*T-b*A,R=(_*T-b*v)/M,k=(I*v-_*A)/M;return new br(c-s+R*c,p-s+k*p,s,u-a+R*u,y-a+k*y,a,R,k,1)}}static quadrilateralToSquare(s,a,c,u,d,f,p,y){return br.squareToQuadrilateral(s,a,c,u,d,f,p,y).buildAdjoint()}buildAdjoint(){return new br(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(s){return new br(this.a11*s.a11+this.a21*s.a12+this.a31*s.a13,this.a11*s.a21+this.a21*s.a22+this.a31*s.a23,this.a11*s.a31+this.a21*s.a32+this.a31*s.a33,this.a12*s.a11+this.a22*s.a12+this.a32*s.a13,this.a12*s.a21+this.a22*s.a22+this.a32*s.a23,this.a12*s.a31+this.a22*s.a32+this.a32*s.a33,this.a13*s.a11+this.a23*s.a12+this.a33*s.a13,this.a13*s.a21+this.a23*s.a22+this.a33*s.a23,this.a13*s.a31+this.a23*s.a32+this.a33*s.a33)}}class rw extends rp{sampleGrid(s,a,c,u,d,f,p,y,_,v,I,b,A,T,M,R,k,q,Q){let B=br.quadrilateralToQuadrilateral(u,d,f,p,y,_,v,I,b,A,T,M,R,k,q,Q);return this.sampleGridWithTransform(s,a,c,B)}sampleGridWithTransform(s,a,c,u){if(a<=0||c<=0)throw new V;let d=new en(a,c),f=new Float32Array(2*a);for(let p=0;p<c;p++){let y=f.length,_=p+.5;for(let v=0;v<y;v+=2)f[v]=v/2+.5,f[v+1]=_;u.transformPoints(f),rp.checkAndNudgePoints(s,f);try{for(let v=0;v<y;v+=2)s.get(Math.floor(f[v]),Math.floor(f[v+1]))&&d.set(v/2,p)}catch{throw new V}}return d}}class Gi{static setGridSampler(s){Gi.gridSampler=s}static getInstance(){return Gi.gridSampler}}Gi.gridSampler=new rw;class Tn{constructor(s,a){this.x=s,this.y=a}toResultPoint(){return new se(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class iw{constructor(s){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=s}detect(){return this.detectMirror(!1)}detectMirror(s){let a=this.getMatrixCenter(),c=this.getBullsEyeCorners(a);if(s){let f=c[0];c[0]=c[2],c[2]=f}this.extractParameters(c);let u=this.sampleGrid(this.image,c[this.shift%4],c[(this.shift+1)%4],c[(this.shift+2)%4],c[(this.shift+3)%4]),d=this.getMatrixCornerPoints(c);return new nw(u,d,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(s){if(!this.isValidPoint(s[0])||!this.isValidPoint(s[1])||!this.isValidPoint(s[2])||!this.isValidPoint(s[3]))throw new V;let a=2*this.nbCenterLayers,c=new Int32Array([this.sampleLine(s[0],s[1],a),this.sampleLine(s[1],s[2],a),this.sampleLine(s[2],s[3],a),this.sampleLine(s[3],s[0],a)]);this.shift=this.getRotation(c,a);let u=0;for(let f=0;f<4;f++){let p=c[(this.shift+f)%4];this.compact?(u<<=7,u+=p>>1&127):(u<<=10,u+=(p>>2&992)+(p>>1&31))}let d=this.getCorrectedParameterData(u,this.compact);this.compact?(this.nbLayers=(d>>6)+1,this.nbDataBlocks=(d&63)+1):(this.nbLayers=(d>>11)+1,this.nbDataBlocks=(d&2047)+1)}getRotation(s,a){let c=0;s.forEach((u,d,f)=>{let p=(u>>a-2<<1)+(u&1);c=(c<<3)+p}),c=((c&1)<<11)+(c>>1);for(let u=0;u<4;u++)if(W.bitCount(c^this.EXPECTED_CORNER_BITS[u])<=2)return u;throw new V}getCorrectedParameterData(s,a){let c,u;a?(c=7,u=2):(c=10,u=4);let d=c-u,f=new Int32Array(c);for(let y=c-1;y>=0;--y)f[y]=s&15,s>>=4;try{new tc(it.AZTEC_PARAM).decode(f,d)}catch{throw new V}let p=0;for(let y=0;y<u;y++)p=(p<<4)+f[y];return p}getBullsEyeCorners(s){let a=s,c=s,u=s,d=s,f=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let I=this.getFirstDifferent(a,f,1,-1),b=this.getFirstDifferent(c,f,1,1),A=this.getFirstDifferent(u,f,-1,1),T=this.getFirstDifferent(d,f,-1,-1);if(this.nbCenterLayers>2){let M=this.distancePoint(T,I)*this.nbCenterLayers/(this.distancePoint(d,a)*(this.nbCenterLayers+2));if(M<.75||M>1.25||!this.isWhiteOrBlackRectangle(I,b,A,T))break}a=I,c=b,u=A,d=T,f=!f}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new V;this.compact=this.nbCenterLayers===5;let p=new se(a.getX()+.5,a.getY()-.5),y=new se(c.getX()+.5,c.getY()+.5),_=new se(u.getX()-.5,u.getY()+.5),v=new se(d.getX()-.5,d.getY()-.5);return this.expandSquare([p,y,_,v],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let s,a,c,u;try{let p=new fu(this.image).detect();s=p[0],a=p[1],c=p[2],u=p[3]}catch{let y=this.image.getWidth()/2,_=this.image.getHeight()/2;s=this.getFirstDifferent(new Tn(y+7,_-7),!1,1,-1).toResultPoint(),a=this.getFirstDifferent(new Tn(y+7,_+7),!1,1,1).toResultPoint(),c=this.getFirstDifferent(new Tn(y-7,_+7),!1,-1,1).toResultPoint(),u=this.getFirstDifferent(new Tn(y-7,_-7),!1,-1,-1).toResultPoint()}let d=Je.round((s.getX()+u.getX()+a.getX()+c.getX())/4),f=Je.round((s.getY()+u.getY()+a.getY()+c.getY())/4);try{let p=new fu(this.image,15,d,f).detect();s=p[0],a=p[1],c=p[2],u=p[3]}catch{s=this.getFirstDifferent(new Tn(d+7,f-7),!1,1,-1).toResultPoint(),a=this.getFirstDifferent(new Tn(d+7,f+7),!1,1,1).toResultPoint(),c=this.getFirstDifferent(new Tn(d-7,f+7),!1,-1,1).toResultPoint(),u=this.getFirstDifferent(new Tn(d-7,f-7),!1,-1,-1).toResultPoint()}return d=Je.round((s.getX()+u.getX()+a.getX()+c.getX())/4),f=Je.round((s.getY()+u.getY()+a.getY()+c.getY())/4),new Tn(d,f)}getMatrixCornerPoints(s){return this.expandSquare(s,2*this.nbCenterLayers,this.getDimension())}sampleGrid(s,a,c,u,d){let f=Gi.getInstance(),p=this.getDimension(),y=p/2-this.nbCenterLayers,_=p/2+this.nbCenterLayers;return f.sampleGrid(s,p,p,y,y,_,y,_,_,y,_,a.getX(),a.getY(),c.getX(),c.getY(),u.getX(),u.getY(),d.getX(),d.getY())}sampleLine(s,a,c){let u=0,d=this.distanceResultPoint(s,a),f=d/c,p=s.getX(),y=s.getY(),_=f*(a.getX()-s.getX())/d,v=f*(a.getY()-s.getY())/d;for(let I=0;I<c;I++)this.image.get(Je.round(p+I*_),Je.round(y+I*v))&&(u|=1<<c-I-1);return u}isWhiteOrBlackRectangle(s,a,c,u){let d=3;s=new Tn(s.getX()-d,s.getY()+d),a=new Tn(a.getX()-d,a.getY()-d),c=new Tn(c.getX()+d,c.getY()-d),u=new Tn(u.getX()+d,u.getY()+d);let f=this.getColor(u,s);if(f===0)return!1;let p=this.getColor(s,a);return p!==f||(p=this.getColor(a,c),p!==f)?!1:(p=this.getColor(c,u),p===f)}getColor(s,a){let c=this.distancePoint(s,a),u=(a.getX()-s.getX())/c,d=(a.getY()-s.getY())/c,f=0,p=s.getX(),y=s.getY(),_=this.image.get(s.getX(),s.getY()),v=Math.ceil(c);for(let b=0;b<v;b++)p+=u,y+=d,this.image.get(Je.round(p),Je.round(y))!==_&&f++;let I=f/c;return I>.1&&I<.9?0:I<=.1===_?1:-1}getFirstDifferent(s,a,c,u){let d=s.getX()+c,f=s.getY()+u;for(;this.isValid(d,f)&&this.image.get(d,f)===a;)d+=c,f+=u;for(d-=c,f-=u;this.isValid(d,f)&&this.image.get(d,f)===a;)d+=c;for(d-=c;this.isValid(d,f)&&this.image.get(d,f)===a;)f+=u;return f-=u,new Tn(d,f)}expandSquare(s,a,c){let u=c/(2*a),d=s[0].getX()-s[2].getX(),f=s[0].getY()-s[2].getY(),p=(s[0].getX()+s[2].getX())/2,y=(s[0].getY()+s[2].getY())/2,_=new se(p+u*d,y+u*f),v=new se(p-u*d,y-u*f);d=s[1].getX()-s[3].getX(),f=s[1].getY()-s[3].getY(),p=(s[1].getX()+s[3].getX())/2,y=(s[1].getY()+s[3].getY())/2;let I=new se(p+u*d,y+u*f),b=new se(p-u*d,y-u*f);return[_,I,v,b]}isValid(s,a){return s>=0&&s<this.image.getWidth()&&a>0&&a<this.image.getHeight()}isValidPoint(s){let a=Je.round(s.getX()),c=Je.round(s.getY());return this.isValid(a,c)}distancePoint(s,a){return Je.distance(s.getX(),s.getY(),a.getX(),a.getY())}distanceResultPoint(s,a){return Je.distance(s.getX(),s.getY(),a.getX(),a.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(W.truncDivision(this.nbLayers-4,8)+1)+15}}class hu{decode(s,a=null){let c=null,u=new iw(s.getBlackMatrix()),d=null,f=null;try{let v=u.detectMirror(!1);d=v.getPoints(),this.reportFoundResultPoints(a,d),f=new np().decode(v)}catch(v){c=v}if(f==null)try{let v=u.detectMirror(!0);d=v.getPoints(),this.reportFoundResultPoints(a,d),f=new np().decode(v)}catch(v){throw c??v}let p=new Dn(f.getText(),f.getRawBytes(),f.getNumBits(),d,ye.AZTEC,D.currentTimeMillis()),y=f.getByteSegments();y!=null&&p.putMetadata(nn.BYTE_SEGMENTS,y);let _=f.getECLevel();return _!=null&&p.putMetadata(nn.ERROR_CORRECTION_LEVEL,_),p}reportFoundResultPoints(s,a){if(s!=null){let c=s.get(he.NEED_RESULT_POINT_CALLBACK);c!=null&&a.forEach((u,d,f)=>{c.foundPossibleResultPoint(u)})}}reset(){}}class WT extends To{constructor(s=500){super(new hu,s)}}class jt{decode(s,a){try{return this.doDecode(s,a)}catch{if(a&&a.get(he.TRY_HARDER)===!0&&s.isRotateSupported()){let d=s.rotateCounterClockwise(),f=this.doDecode(d,a),p=f.getResultMetadata(),y=270;p!==null&&p.get(nn.ORIENTATION)===!0&&(y=y+p.get(nn.ORIENTATION)%360),f.putMetadata(nn.ORIENTATION,y);let _=f.getResultPoints();if(_!==null){let v=d.getHeight();for(let I=0;I<_.length;I++)_[I]=new se(v-_[I].getY()-1,_[I].getX())}return f}else throw new V}}reset(){}doDecode(s,a){let c=s.getWidth(),u=s.getHeight(),d=new ie(c),f=a&&a.get(he.TRY_HARDER)===!0,p=Math.max(1,u>>(f?8:5)),y;f?y=u:y=15;let _=Math.trunc(u/2);for(let v=0;v<y;v++){let I=Math.trunc((v+1)/2),b=(v&1)===0,A=_+p*(b?I:-I);if(A<0||A>=u)break;try{d=s.getBlackRow(A,d)}catch{continue}for(let T=0;T<2;T++){if(T===1&&(d.reverse(),a&&a.get(he.NEED_RESULT_POINT_CALLBACK)===!0)){let M=new Map;a.forEach((R,k)=>M.set(k,R)),M.delete(he.NEED_RESULT_POINT_CALLBACK),a=M}try{let M=this.decodeRow(A,d,a);if(T===1){M.putMetadata(nn.ORIENTATION,180);let R=M.getResultPoints();R!==null&&(R[0]=new se(c-R[0].getX()-1,R[0].getY()),R[1]=new se(c-R[1].getX()-1,R[1].getY()))}return M}catch{}}}throw new V}static recordPattern(s,a,c){let u=c.length;for(let _=0;_<u;_++)c[_]=0;let d=s.getSize();if(a>=d)throw new V;let f=!s.get(a),p=0,y=a;for(;y<d;){if(s.get(y)!==f)c[p]++;else{if(++p===u)break;c[p]=1,f=!f}y++}if(!(p===u||p===u-1&&y===d))throw new V}static recordPatternInReverse(s,a,c){let u=c.length,d=s.get(a);for(;a>0&&u>=0;)s.get(--a)!==d&&(u--,d=!d);if(u>=0)throw new V;jt.recordPattern(s,a+1,c)}static patternMatchVariance(s,a,c){let u=s.length,d=0,f=0;for(let _=0;_<u;_++)d+=s[_],f+=a[_];if(d<f)return Number.POSITIVE_INFINITY;let p=d/f;c*=p;let y=0;for(let _=0;_<u;_++){let v=s[_],I=a[_]*p,b=v>I?v-I:I-v;if(b>c)return Number.POSITIVE_INFINITY;y+=b}return y/d}}class Z extends jt{static findStartPattern(s){let a=s.getSize(),c=s.getNextSet(0),u=0,d=Int32Array.from([0,0,0,0,0,0]),f=c,p=!1,y=6;for(let _=c;_<a;_++)if(s.get(_)!==p)d[u]++;else{if(u===y-1){let v=Z.MAX_AVG_VARIANCE,I=-1;for(let b=Z.CODE_START_A;b<=Z.CODE_START_C;b++){let A=jt.patternMatchVariance(d,Z.CODE_PATTERNS[b],Z.MAX_INDIVIDUAL_VARIANCE);A<v&&(v=A,I=b)}if(I>=0&&s.isRange(Math.max(0,f-(_-f)/2),f,!1))return Int32Array.from([f,_,I]);f+=d[0]+d[1],d=d.slice(2,d.length-1),d[u-1]=0,d[u]=0,u--}else u++;d[u]=1,p=!p}throw new V}static decodeCode(s,a,c){jt.recordPattern(s,c,a);let u=Z.MAX_AVG_VARIANCE,d=-1;for(let f=0;f<Z.CODE_PATTERNS.length;f++){let p=Z.CODE_PATTERNS[f],y=this.patternMatchVariance(a,p,Z.MAX_INDIVIDUAL_VARIANCE);y<u&&(u=y,d=f)}if(d>=0)return d;throw new V}decodeRow(s,a,c){let u=c&&c.get(he.ASSUME_GS1)===!0,d=Z.findStartPattern(a),f=d[2],p=0,y=new Uint8Array(20);y[p++]=f;let _;switch(f){case Z.CODE_START_A:_=Z.CODE_CODE_A;break;case Z.CODE_START_B:_=Z.CODE_CODE_B;break;case Z.CODE_START_C:_=Z.CODE_CODE_C;break;default:throw new H}let v=!1,I=!1,b="",A=d[0],T=d[1],M=Int32Array.from([0,0,0,0,0,0]),R=0,k=0,q=f,Q=0,B=!0,Ve=!1,De=!1;for(;!v;){let As=I;switch(I=!1,R=k,k=Z.decodeCode(a,M,T),y[p++]=k,k!==Z.CODE_STOP&&(B=!0),k!==Z.CODE_STOP&&(Q++,q+=Q*k),A=T,T+=M.reduce((D2,T2)=>D2+T2,0),k){case Z.CODE_START_A:case Z.CODE_START_B:case Z.CODE_START_C:throw new H}switch(_){case Z.CODE_CODE_A:if(k<64)De===Ve?b+=String.fromCharCode(32+k):b+=String.fromCharCode(32+k+128),De=!1;else if(k<96)De===Ve?b+=String.fromCharCode(k-64):b+=String.fromCharCode(k+64),De=!1;else switch(k!==Z.CODE_STOP&&(B=!1),k){case Z.CODE_FNC_1:u&&(b.length===0?b+="]C1":b+="");break;case Z.CODE_FNC_2:case Z.CODE_FNC_3:break;case Z.CODE_FNC_4_A:!Ve&&De?(Ve=!0,De=!1):Ve&&De?(Ve=!1,De=!1):De=!0;break;case Z.CODE_SHIFT:I=!0,_=Z.CODE_CODE_B;break;case Z.CODE_CODE_B:_=Z.CODE_CODE_B;break;case Z.CODE_CODE_C:_=Z.CODE_CODE_C;break;case Z.CODE_STOP:v=!0;break}break;case Z.CODE_CODE_B:if(k<96)De===Ve?b+=String.fromCharCode(32+k):b+=String.fromCharCode(32+k+128),De=!1;else switch(k!==Z.CODE_STOP&&(B=!1),k){case Z.CODE_FNC_1:u&&(b.length===0?b+="]C1":b+="");break;case Z.CODE_FNC_2:case Z.CODE_FNC_3:break;case Z.CODE_FNC_4_B:!Ve&&De?(Ve=!0,De=!1):Ve&&De?(Ve=!1,De=!1):De=!0;break;case Z.CODE_SHIFT:I=!0,_=Z.CODE_CODE_A;break;case Z.CODE_CODE_A:_=Z.CODE_CODE_A;break;case Z.CODE_CODE_C:_=Z.CODE_CODE_C;break;case Z.CODE_STOP:v=!0;break}break;case Z.CODE_CODE_C:if(k<100)k<10&&(b+="0"),b+=k;else switch(k!==Z.CODE_STOP&&(B=!1),k){case Z.CODE_FNC_1:u&&(b.length===0?b+="]C1":b+="");break;case Z.CODE_CODE_A:_=Z.CODE_CODE_A;break;case Z.CODE_CODE_B:_=Z.CODE_CODE_B;break;case Z.CODE_STOP:v=!0;break}break}As&&(_=_===Z.CODE_CODE_A?Z.CODE_CODE_B:Z.CODE_CODE_A)}let Ln=T-A;if(T=a.getNextUnset(T),!a.isRange(T,Math.min(a.getSize(),T+(T-A)/2),!1))throw new V;if(q-=Q*R,q%103!==R)throw new E;let Tr=b.length;if(Tr===0)throw new V;Tr>0&&B&&(_===Z.CODE_CODE_C?b=b.substring(0,Tr-2):b=b.substring(0,Tr-1));let Fn=(d[1]+d[0])/2,vt=A+Ln/2,un=y.length,Qn=new Uint8Array(un);for(let As=0;As<un;As++)Qn[As]=y[As];let Ss=[new se(Fn,s),new se(vt,s)];return new Dn(b,Qn,0,Ss,ye.CODE_128,new Date().getTime())}}Z.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],Z.MAX_AVG_VARIANCE=.25,Z.MAX_INDIVIDUAL_VARIANCE=.7,Z.CODE_SHIFT=98,Z.CODE_CODE_C=99,Z.CODE_CODE_B=100,Z.CODE_CODE_A=101,Z.CODE_FNC_1=102,Z.CODE_FNC_2=97,Z.CODE_FNC_3=96,Z.CODE_FNC_4_A=101,Z.CODE_FNC_4_B=100,Z.CODE_START_A=103,Z.CODE_START_B=104,Z.CODE_START_C=105,Z.CODE_STOP=106;let ip=(()=>{class w extends jt{constructor(a=!1,c=!1){super(),this.usingCheckDigit=a,this.extendedMode=c,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(a,c,u){let d=this.counters;d.fill(0),this.decodeRowResult="";let f=w.findAsteriskPattern(c,d),p=c.getNextSet(f[1]),y=c.getSize(),_,v;do{w.recordPattern(c,p,d);let R=w.toNarrowWidePattern(d);if(R<0)throw new V;_=w.patternToChar(R),this.decodeRowResult+=_,v=p;for(let k of d)p+=k;p=c.getNextSet(p)}while(_!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let I=0;for(let R of d)I+=R;let b=p-v-I;if(p!==y&&b*2<I)throw new V;if(this.usingCheckDigit){let R=this.decodeRowResult.length-1,k=0;for(let q=0;q<R;q++)k+=w.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(q));if(this.decodeRowResult.charAt(R)!==w.ALPHABET_STRING.charAt(k%43))throw new E;this.decodeRowResult=this.decodeRowResult.substring(0,R)}if(this.decodeRowResult.length===0)throw new V;let A;this.extendedMode?A=w.decodeExtended(this.decodeRowResult):A=this.decodeRowResult;let T=(f[1]+f[0])/2,M=v+I/2;return new Dn(A,null,0,[new se(T,a),new se(M,a)],ye.CODE_39,new Date().getTime())}static findAsteriskPattern(a,c){let u=a.getSize(),d=a.getNextSet(0),f=0,p=d,y=!1,_=c.length;for(let v=d;v<u;v++)if(a.get(v)!==y)c[f]++;else{if(f===_-1){if(this.toNarrowWidePattern(c)===w.ASTERISK_ENCODING&&a.isRange(Math.max(0,p-Math.floor((v-p)/2)),p,!1))return[p,v];p+=c[0]+c[1],c.copyWithin(0,2,2+f-1),c[f-1]=0,c[f]=0,f--}else f++;c[f]=1,y=!y}throw new V}static toNarrowWidePattern(a){let c=a.length,u=0,d;do{let f=2147483647;for(let _ of a)_<f&&_>u&&(f=_);u=f,d=0;let p=0,y=0;for(let _=0;_<c;_++){let v=a[_];v>u&&(y|=1<<c-1-_,d++,p+=v)}if(d===3){for(let _=0;_<c&&d>0;_++){let v=a[_];if(v>u&&(d--,v*2>=p))return-1}return y}}while(d>3);return-1}static patternToChar(a){for(let c=0;c<w.CHARACTER_ENCODINGS.length;c++)if(w.CHARACTER_ENCODINGS[c]===a)return w.ALPHABET_STRING.charAt(c);if(a===w.ASTERISK_ENCODING)return"*";throw new V}static decodeExtended(a){let c=a.length,u="";for(let d=0;d<c;d++){let f=a.charAt(d);if(f==="+"||f==="$"||f==="%"||f==="/"){let p=a.charAt(d+1),y="\0";switch(f){case"+":if(p>="A"&&p<="Z")y=String.fromCharCode(p.charCodeAt(0)+32);else throw new H;break;case"$":if(p>="A"&&p<="Z")y=String.fromCharCode(p.charCodeAt(0)-64);else throw new H;break;case"%":if(p>="A"&&p<="E")y=String.fromCharCode(p.charCodeAt(0)-38);else if(p>="F"&&p<="J")y=String.fromCharCode(p.charCodeAt(0)-11);else if(p>="K"&&p<="O")y=String.fromCharCode(p.charCodeAt(0)+16);else if(p>="P"&&p<="T")y=String.fromCharCode(p.charCodeAt(0)+43);else if(p==="U")y="\0";else if(p==="V")y="@";else if(p==="W")y="`";else if(p==="X"||p==="Y"||p==="Z")y="\x7F";else throw new H;break;case"/":if(p>="A"&&p<="O")y=String.fromCharCode(p.charCodeAt(0)-32);else if(p==="Z")y=":";else throw new H;break}u+=y,d++}else u+=f}return u}}return w.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",w.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],w.ASTERISK_ENCODING=148,w})();class _t extends jt{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(s,a,c){let u=this.decodeStart(a),d=this.decodeEnd(a),f=new yt;_t.decodeMiddle(a,u[1],d[0],f);let p=f.toString(),y=null;c!=null&&(y=c.get(he.ALLOWED_LENGTHS)),y==null&&(y=_t.DEFAULT_ALLOWED_LENGTHS);let _=p.length,v=!1,I=0;for(let T of y){if(_===T){v=!0;break}T>I&&(I=T)}if(!v&&_>I&&(v=!0),!v)throw new H;let b=[new se(u[1],s),new se(d[0],s)];return new Dn(p,null,0,b,ye.ITF,new Date().getTime())}static decodeMiddle(s,a,c,u){let d=new Int32Array(10),f=new Int32Array(5),p=new Int32Array(5);for(d.fill(0),f.fill(0),p.fill(0);a<c;){jt.recordPattern(s,a,d);for(let _=0;_<5;_++){let v=2*_;f[_]=d[v],p[_]=d[v+1]}let y=_t.decodeDigit(f);u.append(y.toString()),y=this.decodeDigit(p),u.append(y.toString()),d.forEach(function(_){a+=_})}}decodeStart(s){let a=_t.skipWhiteSpace(s),c=_t.findGuardPattern(s,a,_t.START_PATTERN);return this.narrowLineWidth=(c[1]-c[0])/4,this.validateQuietZone(s,c[0]),c}validateQuietZone(s,a){let c=this.narrowLineWidth*10;c=c<a?c:a;for(let u=a-1;c>0&&u>=0&&!s.get(u);u--)c--;if(c!==0)throw new V}static skipWhiteSpace(s){let a=s.getSize(),c=s.getNextSet(0);if(c===a)throw new V;return c}decodeEnd(s){s.reverse();try{let a=_t.skipWhiteSpace(s),c;try{c=_t.findGuardPattern(s,a,_t.END_PATTERN_REVERSED[0])}catch(d){d instanceof V&&(c=_t.findGuardPattern(s,a,_t.END_PATTERN_REVERSED[1]))}this.validateQuietZone(s,c[0]);let u=c[0];return c[0]=s.getSize()-c[1],c[1]=s.getSize()-u,c}finally{s.reverse()}}static findGuardPattern(s,a,c){let u=c.length,d=new Int32Array(u),f=s.getSize(),p=!1,y=0,_=a;d.fill(0);for(let v=a;v<f;v++)if(s.get(v)!==p)d[y]++;else{if(y===u-1){if(jt.patternMatchVariance(d,c,_t.MAX_INDIVIDUAL_VARIANCE)<_t.MAX_AVG_VARIANCE)return[_,v];_+=d[0]+d[1],D.arraycopy(d,2,d,0,y-1),d[y-1]=0,d[y]=0,y--}else y++;d[y]=1,p=!p}throw new V}static decodeDigit(s){let a=_t.MAX_AVG_VARIANCE,c=-1,u=_t.PATTERNS.length;for(let d=0;d<u;d++){let f=_t.PATTERNS[d],p=jt.patternMatchVariance(s,f,_t.MAX_INDIVIDUAL_VARIANCE);p<a?(a=p,c=d):p===a&&(c=-1)}if(c>=0)return c%10;throw new V}}_t.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],_t.MAX_AVG_VARIANCE=.38,_t.MAX_INDIVIDUAL_VARIANCE=.5,_t.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],_t.START_PATTERN=Int32Array.from([1,1,1,1]),_t.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Nt extends jt{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(s){let a=!1,c,u=0,d=Int32Array.from([0,0,0]);for(;!a;){d=Int32Array.from([0,0,0]),c=Nt.findGuardPattern(s,u,!1,this.START_END_PATTERN,d);let f=c[0];u=c[1];let p=f-(u-f);p>=0&&(a=s.isRange(p,f,!1))}return c}static checkChecksum(s){return Nt.checkStandardUPCEANChecksum(s)}static checkStandardUPCEANChecksum(s){let a=s.length;if(a===0)return!1;let c=parseInt(s.charAt(a-1),10);return Nt.getStandardUPCEANChecksum(s.substring(0,a-1))===c}static getStandardUPCEANChecksum(s){let a=s.length,c=0;for(let u=a-1;u>=0;u-=2){let d=s.charAt(u).charCodeAt(0)-48;if(d<0||d>9)throw new H;c+=d}c*=3;for(let u=a-2;u>=0;u-=2){let d=s.charAt(u).charCodeAt(0)-48;if(d<0||d>9)throw new H;c+=d}return(1e3-c)%10}static decodeEnd(s,a){return Nt.findGuardPattern(s,a,!1,Nt.START_END_PATTERN,new Int32Array(Nt.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(s,a,c,u){return this.findGuardPattern(s,a,c,u,new Int32Array(u.length))}static findGuardPattern(s,a,c,u,d){let f=s.getSize();a=c?s.getNextUnset(a):s.getNextSet(a);let p=0,y=a,_=u.length,v=c;for(let I=a;I<f;I++)if(s.get(I)!==v)d[p]++;else{if(p===_-1){if(jt.patternMatchVariance(d,u,Nt.MAX_INDIVIDUAL_VARIANCE)<Nt.MAX_AVG_VARIANCE)return Int32Array.from([y,I]);y+=d[0]+d[1];let b=d.slice(2,d.length-1);for(let A=0;A<p-1;A++)d[A]=b[A];d[p-1]=0,d[p]=0,p--}else p++;d[p]=1,v=!v}throw new V}static decodeDigit(s,a,c,u){this.recordPattern(s,c,a);let d=this.MAX_AVG_VARIANCE,f=-1,p=u.length;for(let y=0;y<p;y++){let _=u[y],v=jt.patternMatchVariance(a,_,Nt.MAX_INDIVIDUAL_VARIANCE);v<d&&(d=v,f=y)}if(f>=0)return f;throw new V}}Nt.MAX_AVG_VARIANCE=.48,Nt.MAX_INDIVIDUAL_VARIANCE=.7,Nt.START_END_PATTERN=Int32Array.from([1,1,1]),Nt.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Nt.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Nt.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class nc{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(s,a,c){let u=this.decodeRowStringBuffer,d=this.decodeMiddle(a,c,u),f=u.toString(),p=nc.parseExtensionString(f),y=[new se((c[0]+c[1])/2,s),new se(d,s)],_=new Dn(f,null,0,y,ye.UPC_EAN_EXTENSION,new Date().getTime());return p!=null&&_.putAllMetadata(p),_}decodeMiddle(s,a,c){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let d=s.getSize(),f=a[1],p=0;for(let _=0;_<5&&f<d;_++){let v=Nt.decodeDigit(s,u,f,Nt.L_AND_G_PATTERNS);c+=String.fromCharCode(48+v%10);for(let I of u)f+=I;v>=10&&(p|=1<<4-_),_!==4&&(f=s.getNextSet(f),f=s.getNextUnset(f))}if(c.length!==5)throw new V;let y=this.determineCheckDigit(p);if(nc.extensionChecksum(c.toString())!==y)throw new V;return f}static extensionChecksum(s){let a=s.length,c=0;for(let u=a-2;u>=0;u-=2)c+=s.charAt(u).charCodeAt(0)-48;c*=3;for(let u=a-1;u>=0;u-=2)c+=s.charAt(u).charCodeAt(0)-48;return c*=3,c%10}determineCheckDigit(s){for(let a=0;a<10;a++)if(s===this.CHECK_DIGIT_ENCODINGS[a])return a;throw new V}static parseExtensionString(s){if(s.length!==5)return null;let a=nc.parseExtension5String(s);return a==null?null:new Map([[nn.SUGGESTED_PRICE,a]])}static parseExtension5String(s){let a;switch(s.charAt(0)){case"0":a="\xA3";break;case"5":a="$";break;case"9":switch(s){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}a="";break;default:a="";break}let c=parseInt(s.substring(1)),u=(c/100).toString(),d=c%100,f=d<10?"0"+d:d.toString();return a+u+"."+f}}class op{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(s,a,c){let u=this.decodeRowStringBuffer,d=this.decodeMiddle(a,c,u),f=u.toString(),p=op.parseExtensionString(f),y=[new se((c[0]+c[1])/2,s),new se(d,s)],_=new Dn(f,null,0,y,ye.UPC_EAN_EXTENSION,new Date().getTime());return p!=null&&_.putAllMetadata(p),_}decodeMiddle(s,a,c){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let d=s.getSize(),f=a[1],p=0;for(let y=0;y<2&&f<d;y++){let _=Nt.decodeDigit(s,u,f,Nt.L_AND_G_PATTERNS);c+=String.fromCharCode(48+_%10);for(let v of u)f+=v;_>=10&&(p|=1<<1-y),y!==1&&(f=s.getNextSet(f),f=s.getNextUnset(f))}if(c.length!==2)throw new V;if(parseInt(c.toString())%4!==p)throw new V;return f}static parseExtensionString(s){return s.length!==2?null:new Map([[nn.ISSUE_NUMBER,parseInt(s)]])}}class ow{static decodeRow(s,a,c){let u=Nt.findGuardPattern(a,c,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new nc().decodeRow(s,a,u)}catch{return new op().decodeRow(s,a,u)}}}ow.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class ot extends Nt{constructor(){super(),this.decodeRowStringBuffer="",ot.L_AND_G_PATTERNS=ot.L_PATTERNS.map(s=>Int32Array.from(s));for(let s=10;s<20;s++){let a=ot.L_PATTERNS[s-10],c=new Int32Array(a.length);for(let u=0;u<a.length;u++)c[u]=a[a.length-u-1];ot.L_AND_G_PATTERNS[s]=c}}decodeRow(s,a,c){let u=ot.findStartGuardPattern(a),d=c==null?null:c.get(he.NEED_RESULT_POINT_CALLBACK);if(d!=null){let B=new se((u[0]+u[1])/2,s);d.foundPossibleResultPoint(B)}let f=this.decodeMiddle(a,u,this.decodeRowStringBuffer),p=f.rowOffset,y=f.resultString;if(d!=null){let B=new se(p,s);d.foundPossibleResultPoint(B)}let _=this.decodeEnd(a,p);if(d!=null){let B=new se((_[0]+_[1])/2,s);d.foundPossibleResultPoint(B)}let v=_[1],I=v+(v-_[0]);if(I>=a.getSize()||!a.isRange(v,I,!1))throw new V;let b=y.toString();if(b.length<8)throw new H;if(!ot.checkChecksum(b))throw new E;let A=(u[1]+u[0])/2,T=(_[1]+_[0])/2,M=this.getBarcodeFormat(),R=[new se(A,s),new se(T,s)],k=new Dn(b,null,0,R,M,new Date().getTime()),q=0;try{let B=ow.decodeRow(s,a,_[1]);k.putMetadata(nn.UPC_EAN_EXTENSION,B.getText()),k.putAllMetadata(B.getResultMetadata()),k.addResultPoints(B.getResultPoints()),q=B.getText().length}catch{}let Q=c==null?null:c.get(he.ALLOWED_EAN_EXTENSIONS);if(Q!=null){let B=!1;for(let Ve in Q)if(q.toString()===Ve){B=!0;break}if(!B)throw new V}return k}decodeEnd(s,a){return ot.findGuardPattern(s,a,!1,ot.START_END_PATTERN,new Int32Array(ot.START_END_PATTERN.length).fill(0))}static checkChecksum(s){return ot.checkStandardUPCEANChecksum(s)}static checkStandardUPCEANChecksum(s){let a=s.length;if(a===0)return!1;let c=parseInt(s.charAt(a-1),10);return ot.getStandardUPCEANChecksum(s.substring(0,a-1))===c}static getStandardUPCEANChecksum(s){let a=s.length,c=0;for(let u=a-1;u>=0;u-=2){let d=s.charAt(u).charCodeAt(0)-48;if(d<0||d>9)throw new H;c+=d}c*=3;for(let u=a-2;u>=0;u-=2){let d=s.charAt(u).charCodeAt(0)-48;if(d<0||d>9)throw new H;c+=d}return(1e3-c)%10}}let pu=(()=>{class w extends ot{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(a,c,u){let d=this.decodeMiddleCounters;d[0]=0,d[1]=0,d[2]=0,d[3]=0;let f=a.getSize(),p=c[1],y=0;for(let v=0;v<6&&p<f;v++){let I=ot.decodeDigit(a,d,p,ot.L_AND_G_PATTERNS);u+=String.fromCharCode(48+I%10);for(let b of d)p+=b;I>=10&&(y|=1<<5-v)}u=w.determineFirstDigit(u,y),p=ot.findGuardPattern(a,p,!0,ot.MIDDLE_PATTERN,new Int32Array(ot.MIDDLE_PATTERN.length).fill(0))[1];for(let v=0;v<6&&p<f;v++){let I=ot.decodeDigit(a,d,p,ot.L_PATTERNS);u+=String.fromCharCode(48+I);for(let b of d)p+=b}return{rowOffset:p,resultString:u}}getBarcodeFormat(){return ye.EAN_13}static determineFirstDigit(a,c){for(let u=0;u<10;u++)if(c===this.FIRST_DIGIT_ENCODINGS[u])return a=String.fromCharCode(48+u)+a,a;throw new V}}return w.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],w})();class sw extends ot{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(s,a,c){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let d=s.getSize(),f=a[1];for(let y=0;y<4&&f<d;y++){let _=ot.decodeDigit(s,u,f,ot.L_PATTERNS);c+=String.fromCharCode(48+_);for(let v of u)f+=v}f=ot.findGuardPattern(s,f,!0,ot.MIDDLE_PATTERN,new Int32Array(ot.MIDDLE_PATTERN.length).fill(0))[1];for(let y=0;y<4&&f<d;y++){let _=ot.decodeDigit(s,u,f,ot.L_PATTERNS);c+=String.fromCharCode(48+_);for(let v of u)f+=v}return{rowOffset:f,resultString:c}}getBarcodeFormat(){return ye.EAN_8}}class aw extends ot{constructor(){super(...arguments),this.ean13Reader=new pu}getBarcodeFormat(){return ye.UPC_A}decode(s,a){return this.maybeReturnResult(this.ean13Reader.decode(s))}decodeRow(s,a,c){return this.maybeReturnResult(this.ean13Reader.decodeRow(s,a,c))}decodeMiddle(s,a,c){return this.ean13Reader.decodeMiddle(s,a,c)}maybeReturnResult(s){let a=s.getText();if(a.charAt(0)==="0"){let c=new Dn(a.substring(1),null,null,s.getResultPoints(),ye.UPC_A);return s.getResultMetadata()!=null&&c.putAllMetadata(s.getResultMetadata()),c}else throw new V}reset(){this.ean13Reader.reset()}}class xr extends ot{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(s,a,c){let u=this.decodeMiddleCounters.map(_=>_);u[0]=0,u[1]=0,u[2]=0,u[3]=0;let d=s.getSize(),f=a[1],p=0;for(let _=0;_<6&&f<d;_++){let v=xr.decodeDigit(s,u,f,xr.L_AND_G_PATTERNS);c+=String.fromCharCode(48+v%10);for(let I of u)f+=I;v>=10&&(p|=1<<5-_)}let y=xr.determineNumSysAndCheckDigit(c,p);return{rowOffset:f,resultString:y}}decodeEnd(s,a){return xr.findGuardPatternWithoutCounters(s,a,!0,xr.MIDDLE_END_PATTERN)}checkChecksum(s){return ot.checkChecksum(xr.convertUPCEtoUPCA(s))}static determineNumSysAndCheckDigit(s,a){for(let c=0;c<=1;c++)for(let u=0;u<10;u++)if(a===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[c][u]){let d=String.fromCharCode(48+c),f=String.fromCharCode(48+u);return d+s+f}throw V.getNotFoundInstance()}getBarcodeFormat(){return ye.UPC_E}static convertUPCEtoUPCA(s){let a=s.slice(1,7).split("").map(d=>d.charCodeAt(0)),c=new yt;c.append(s.charAt(0));let u=a[5];switch(u){case 0:case 1:case 2:c.appendChars(a,0,2),c.append(u),c.append("0000"),c.appendChars(a,2,3);break;case 3:c.appendChars(a,0,3),c.append("00000"),c.appendChars(a,3,2);break;case 4:c.appendChars(a,0,4),c.append("00000"),c.append(a[4]);break;default:c.appendChars(a,0,5),c.append("0000"),c.append(u);break}return s.length>=8&&c.append(s.charAt(7)),c.toString()}}xr.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),xr.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class sp extends jt{constructor(s){super();let a=s==null?null:s.get(he.POSSIBLE_FORMATS),c=[];t(a)?(c.push(new pu),c.push(new aw),c.push(new sw),c.push(new xr)):(a.indexOf(ye.EAN_13)>-1&&c.push(new pu),a.indexOf(ye.UPC_A)>-1&&c.push(new aw),a.indexOf(ye.EAN_8)>-1&&c.push(new sw),a.indexOf(ye.UPC_E)>-1&&c.push(new xr)),this.readers=c}decodeRow(s,a,c){for(let u of this.readers)try{let d=u.decodeRow(s,a,c),f=d.getBarcodeFormat()===ye.EAN_13&&d.getText().charAt(0)==="0",p=c==null?null:c.get(he.POSSIBLE_FORMATS),y=p==null||p.includes(ye.UPC_A);if(f&&y){let _=d.getRawBytes(),v=new Dn(d.getText().substring(1),_,_?_.length:null,d.getResultPoints(),ye.UPC_A);return v.putAllMetadata(d.getResultMetadata()),v}return d}catch{}throw new V}reset(){for(let s of this.readers)s.reset()}}let Mo=(()=>{class w extends jt{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(a,c){for(let u=0;u<c.length;u++)if(jt.patternMatchVariance(a,c[u],w.MAX_INDIVIDUAL_VARIANCE)<w.MAX_AVG_VARIANCE)return u;throw new V}static count(a){return Je.sum(new Int32Array(a))}static increment(a,c){let u=0,d=c[0];for(let f=1;f<a.length;f++)c[f]>d&&(d=c[f],u=f);a[u]++}static decrement(a,c){let u=0,d=c[0];for(let f=1;f<a.length;f++)c[f]<d&&(d=c[f],u=f);a[u]--}static isFinderPattern(a){let c=a[0]+a[1],u=c+a[2]+a[3],d=c/u;if(d>=w.MIN_FINDER_PATTERN_RATIO&&d<=w.MAX_FINDER_PATTERN_RATIO){let f=Number.MAX_SAFE_INTEGER,p=Number.MIN_SAFE_INTEGER;for(let y of a)y>p&&(p=y),y<f&&(f=y);return p<10*f}return!1}}return w.MAX_AVG_VARIANCE=.2,w.MAX_INDIVIDUAL_VARIANCE=.45,w.MIN_FINDER_PATTERN_RATIO=9.5/12,w.MAX_FINDER_PATTERN_RATIO=12.5/14,w})();class vs{constructor(s,a){this.value=s,this.checksumPortion=a}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(s){if(!(s instanceof vs))return!1;let a=s;return this.value===a.value&&this.checksumPortion===a.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class gu{constructor(s,a,c,u,d){this.value=s,this.startEnd=a,this.value=s,this.startEnd=a,this.resultPoints=new Array,this.resultPoints.push(new se(c,d)),this.resultPoints.push(new se(u,d))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(s){if(!(s instanceof gu))return!1;let a=s;return this.value===a.value}hashCode(){return this.value}}class Wr{constructor(){}static getRSSvalue(s,a,c){let u=0;for(let y of s)u+=y;let d=0,f=0,p=s.length;for(let y=0;y<p-1;y++){let _;for(_=1,f|=1<<y;_<s[y];_++,f&=~(1<<y)){let v=Wr.combins(u-_-1,p-y-2);if(c&&f===0&&u-_-(p-y-1)>=p-y-1&&(v-=Wr.combins(u-_-(p-y),p-y-2)),p-y-1>1){let I=0;for(let b=u-_-(p-y-2);b>a;b--)I+=Wr.combins(u-_-b-1,p-y-3);v-=I*(p-1-y)}else u-_>a&&v--;d+=v}u-=_}return d}static combins(s,a){let c,u;s-a>a?(u=a,c=s-a):(u=s-a,c=a);let d=1,f=1;for(let p=s;p>c;p--)d*=p,f<=u&&(d/=f,f++);for(;f<=u;)d/=f,f++;return d}}class GT{static buildBitArray(s){let a=s.length*2-1;s[s.length-1].getRightChar()==null&&(a-=1);let c=12*a,u=new ie(c),d=0,p=s[0].getRightChar().getValue();for(let y=11;y>=0;--y)p&1<<y&&u.set(d),d++;for(let y=1;y<s.length;++y){let _=s[y],v=_.getLeftChar().getValue();for(let I=11;I>=0;--I)v&1<<I&&u.set(d),d++;if(_.getRightChar()!=null){let I=_.getRightChar().getValue();for(let b=11;b>=0;--b)I&1<<b&&u.set(d),d++}}return u}}class No{constructor(s,a){a?this.decodedInformation=null:(this.finished=s,this.decodedInformation=a)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class ap{constructor(s){this.newPosition=s}getNewPosition(){return this.newPosition}}let Sr=(()=>{class w extends ap{constructor(a,c){super(a),this.value=c}getValue(){return this.value}isFNC1(){return this.value===w.FNC1}}return w.FNC1="$",w})();class Ro extends ap{constructor(s,a,c){super(s),c?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=a}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}let Cs=(()=>{class w extends ap{constructor(a,c,u){if(super(a),c<0||c>10||u<0||u>10)throw new H;this.firstDigit=c,this.secondDigit=u}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===w.FNC1}isSecondDigitFNC1(){return this.secondDigit===w.FNC1}isAnyFNC1(){return this.firstDigit===w.FNC1||this.secondDigit===w.FNC1}}return w.FNC1=10,w})();class re{constructor(){}static parseFieldsInGeneralPurpose(s){if(!s)return null;if(s.length<2)throw new V;let a=s.substring(0,2);for(let d of re.TWO_DIGIT_DATA_LENGTH)if(d[0]===a)return d[1]===re.VARIABLE_LENGTH?re.processVariableAI(2,d[2],s):re.processFixedAI(2,d[1],s);if(s.length<3)throw new V;let c=s.substring(0,3);for(let d of re.THREE_DIGIT_DATA_LENGTH)if(d[0]===c)return d[1]===re.VARIABLE_LENGTH?re.processVariableAI(3,d[2],s):re.processFixedAI(3,d[1],s);for(let d of re.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(d[0]===c)return d[1]===re.VARIABLE_LENGTH?re.processVariableAI(4,d[2],s):re.processFixedAI(4,d[1],s);if(s.length<4)throw new V;let u=s.substring(0,4);for(let d of re.FOUR_DIGIT_DATA_LENGTH)if(d[0]===u)return d[1]===re.VARIABLE_LENGTH?re.processVariableAI(4,d[2],s):re.processFixedAI(4,d[1],s);throw new V}static processFixedAI(s,a,c){if(c.length<s)throw new V;let u=c.substring(0,s);if(c.length<s+a)throw new V;let d=c.substring(s,s+a),f=c.substring(s+a),p="("+u+")"+d,y=re.parseFieldsInGeneralPurpose(f);return y==null?p:p+y}static processVariableAI(s,a,c){let u=c.substring(0,s),d;c.length<s+a?d=c.length:d=s+a;let f=c.substring(s,d),p=c.substring(d),y="("+u+")"+f,_=re.parseFieldsInGeneralPurpose(p);return _==null?y:y+_}}re.VARIABLE_LENGTH=[],re.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",re.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",re.VARIABLE_LENGTH,20],["22",re.VARIABLE_LENGTH,29],["30",re.VARIABLE_LENGTH,8],["37",re.VARIABLE_LENGTH,8],["90",re.VARIABLE_LENGTH,30],["91",re.VARIABLE_LENGTH,30],["92",re.VARIABLE_LENGTH,30],["93",re.VARIABLE_LENGTH,30],["94",re.VARIABLE_LENGTH,30],["95",re.VARIABLE_LENGTH,30],["96",re.VARIABLE_LENGTH,30],["97",re.VARIABLE_LENGTH,3],["98",re.VARIABLE_LENGTH,30],["99",re.VARIABLE_LENGTH,30]],re.THREE_DIGIT_DATA_LENGTH=[["240",re.VARIABLE_LENGTH,30],["241",re.VARIABLE_LENGTH,30],["242",re.VARIABLE_LENGTH,6],["250",re.VARIABLE_LENGTH,30],["251",re.VARIABLE_LENGTH,30],["253",re.VARIABLE_LENGTH,17],["254",re.VARIABLE_LENGTH,20],["400",re.VARIABLE_LENGTH,30],["401",re.VARIABLE_LENGTH,30],["402",17],["403",re.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",re.VARIABLE_LENGTH,20],["421",re.VARIABLE_LENGTH,15],["422",3],["423",re.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],re.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",re.VARIABLE_LENGTH,15],["391",re.VARIABLE_LENGTH,18],["392",re.VARIABLE_LENGTH,15],["393",re.VARIABLE_LENGTH,18],["703",re.VARIABLE_LENGTH,30]],re.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",re.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",re.VARIABLE_LENGTH,20],["8003",re.VARIABLE_LENGTH,30],["8004",re.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",re.VARIABLE_LENGTH,30],["8008",re.VARIABLE_LENGTH,12],["8018",18],["8020",re.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",re.VARIABLE_LENGTH,70],["8200",re.VARIABLE_LENGTH,70]];class Es{constructor(s){this.buffer=new yt,this.information=s}decodeAllCodes(s,a){let c=a,u=null;do{let d=this.decodeGeneralPurposeField(c,u),f=re.parseFieldsInGeneralPurpose(d.getNewString());if(f!=null&&s.append(f),d.isRemaining()?u=""+d.getRemainingValue():u=null,c===d.getNewPosition())break;c=d.getNewPosition()}while(!0);return s.toString()}isStillNumeric(s){if(s+7>this.information.getSize())return s+4<=this.information.getSize();for(let a=s;a<s+3;++a)if(this.information.get(a))return!0;return this.information.get(s+3)}decodeNumeric(s){if(s+7>this.information.getSize()){let d=this.extractNumericValueFromBitArray(s,4);return d===0?new Cs(this.information.getSize(),Cs.FNC1,Cs.FNC1):new Cs(this.information.getSize(),d-1,Cs.FNC1)}let a=this.extractNumericValueFromBitArray(s,7),c=(a-8)/11,u=(a-8)%11;return new Cs(s+7,c,u)}extractNumericValueFromBitArray(s,a){return Es.extractNumericValueFromBitArray(this.information,s,a)}static extractNumericValueFromBitArray(s,a,c){let u=0;for(let d=0;d<c;++d)s.get(a+d)&&(u|=1<<c-d-1);return u}decodeGeneralPurposeField(s,a){this.buffer.setLengthToZero(),a!=null&&this.buffer.append(a),this.current.setPosition(s);let c=this.parseBlocks();return c!=null&&c.isRemaining()?new Ro(this.current.getPosition(),this.buffer.toString(),c.getRemainingValue()):new Ro(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let s,a;do{let c=this.current.getPosition();if(this.current.isAlpha()?(a=this.parseAlphaBlock(),s=a.isFinished()):this.current.isIsoIec646()?(a=this.parseIsoIec646Block(),s=a.isFinished()):(a=this.parseNumericBlock(),s=a.isFinished()),!(c!==this.current.getPosition())&&!s)break}while(!s);return a.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let s=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(s.getNewPosition()),s.isFirstDigitFNC1()){let a;return s.isSecondDigitFNC1()?a=new Ro(this.current.getPosition(),this.buffer.toString()):a=new Ro(this.current.getPosition(),this.buffer.toString(),s.getSecondDigit()),new No(!0,a)}if(this.buffer.append(s.getFirstDigit()),s.isSecondDigitFNC1()){let a=new Ro(this.current.getPosition(),this.buffer.toString());return new No(!0,a)}this.buffer.append(s.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new No(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let s=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(s.getNewPosition()),s.isFNC1()){let a=new Ro(this.current.getPosition(),this.buffer.toString());return new No(!0,a)}this.buffer.append(s.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new No(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let s=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(s.getNewPosition()),s.isFNC1()){let a=new Ro(this.current.getPosition(),this.buffer.toString());return new No(!0,a)}this.buffer.append(s.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new No(!1)}isStillIsoIec646(s){if(s+5>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(s,5);if(a>=5&&a<16)return!0;if(s+7>this.information.getSize())return!1;let c=this.extractNumericValueFromBitArray(s,7);if(c>=64&&c<116)return!0;if(s+8>this.information.getSize())return!1;let u=this.extractNumericValueFromBitArray(s,8);return u>=232&&u<253}decodeIsoIec646(s){let a=this.extractNumericValueFromBitArray(s,5);if(a===15)return new Sr(s+5,Sr.FNC1);if(a>=5&&a<15)return new Sr(s+5,"0"+(a-5));let c=this.extractNumericValueFromBitArray(s,7);if(c>=64&&c<90)return new Sr(s+7,""+(c+1));if(c>=90&&c<116)return new Sr(s+7,""+(c+7));let u=this.extractNumericValueFromBitArray(s,8),d;switch(u){case 232:d="!";break;case 233:d='"';break;case 234:d="%";break;case 235:d="&";break;case 236:d="'";break;case 237:d="(";break;case 238:d=")";break;case 239:d="*";break;case 240:d="+";break;case 241:d=",";break;case 242:d="-";break;case 243:d=".";break;case 244:d="/";break;case 245:d=":";break;case 246:d=";";break;case 247:d="<";break;case 248:d="=";break;case 249:d=">";break;case 250:d="?";break;case 251:d="_";break;case 252:d=" ";break;default:throw new H}return new Sr(s+8,d)}isStillAlpha(s){if(s+5>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(s,5);if(a>=5&&a<16)return!0;if(s+6>this.information.getSize())return!1;let c=this.extractNumericValueFromBitArray(s,6);return c>=16&&c<63}decodeAlphanumeric(s){let a=this.extractNumericValueFromBitArray(s,5);if(a===15)return new Sr(s+5,Sr.FNC1);if(a>=5&&a<15)return new Sr(s+5,"0"+(a-5));let c=this.extractNumericValueFromBitArray(s,6);if(c>=32&&c<58)return new Sr(s+6,""+(c+33));let u;switch(c){case 58:u="*";break;case 59:u=",";break;case 60:u="-";break;case 61:u=".";break;case 62:u="/";break;default:throw new fi("Decoding invalid alphanumeric value: "+c)}return new Sr(s+6,u)}isAlphaTo646ToAlphaLatch(s){if(s+1>this.information.getSize())return!1;for(let a=0;a<5&&a+s<this.information.getSize();++a)if(a===2){if(!this.information.get(s+2))return!1}else if(this.information.get(s+a))return!1;return!0}isAlphaOr646ToNumericLatch(s){if(s+3>this.information.getSize())return!1;for(let a=s;a<s+3;++a)if(this.information.get(a))return!1;return!0}isNumericToAlphaNumericLatch(s){if(s+1>this.information.getSize())return!1;for(let a=0;a<4&&a+s<this.information.getSize();++a)if(this.information.get(s+a))return!1;return!0}}class cp{constructor(s){this.information=s,this.generalDecoder=new Es(s)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}let Ar=(()=>{class w extends cp{constructor(a){super(a)}encodeCompressedGtin(a,c){a.append("(01)");let u=a.length();a.append("9"),this.encodeCompressedGtinWithoutAI(a,c,u)}encodeCompressedGtinWithoutAI(a,c,u){for(let d=0;d<4;++d){let f=this.getGeneralDecoder().extractNumericValueFromBitArray(c+10*d,10);f/100===0&&a.append("0"),f/10===0&&a.append("0"),a.append(f)}w.appendCheckDigit(a,u)}static appendCheckDigit(a,c){let u=0;for(let d=0;d<13;d++){let f=a.charAt(d+c).charCodeAt(0)-48;u+=d&1?f:3*f}u=10-u%10,u===10&&(u=0),a.append(u)}}return w.GTIN_SIZE=40,w})(),$T=(()=>{class w extends Ar{constructor(a){super(a)}parseInformation(){let a=new yt;a.append("(01)");let c=a.length(),u=this.getGeneralDecoder().extractNumericValueFromBitArray(w.HEADER_SIZE,4);return a.append(u),this.encodeCompressedGtinWithoutAI(a,w.HEADER_SIZE+4,c),this.getGeneralDecoder().decodeAllCodes(a,w.HEADER_SIZE+44)}}return w.HEADER_SIZE=4,w})(),qT=(()=>{class w extends cp{constructor(a){super(a)}parseInformation(){let a=new yt;return this.getGeneralDecoder().decodeAllCodes(a,w.HEADER_SIZE)}}return w.HEADER_SIZE=5,w})();class mu extends Ar{constructor(s){super(s)}encodeCompressedWeight(s,a,c){let u=this.getGeneralDecoder().extractNumericValueFromBitArray(a,c);this.addWeightCode(s,u);let d=this.checkWeight(u),f=1e5;for(let p=0;p<5;++p)d/f===0&&s.append("0"),f/=10;s.append(d)}}let cw=(()=>{class w extends mu{constructor(a){super(a)}parseInformation(){if(this.getInformation().getSize()!=w.HEADER_SIZE+mu.GTIN_SIZE+w.WEIGHT_SIZE)throw new V;let a=new yt;return this.encodeCompressedGtin(a,w.HEADER_SIZE),this.encodeCompressedWeight(a,w.HEADER_SIZE+mu.GTIN_SIZE,w.WEIGHT_SIZE),a.toString()}}return w.HEADER_SIZE=5,w.WEIGHT_SIZE=15,w})();class YT extends cw{constructor(s){super(s)}addWeightCode(s,a){s.append("(3103)")}checkWeight(s){return s}}class ZT extends cw{constructor(s){super(s)}addWeightCode(s,a){a<1e4?s.append("(3202)"):s.append("(3203)")}checkWeight(s){return s<1e4?s:s-1e4}}let XT=(()=>{class w extends Ar{constructor(a){super(a)}parseInformation(){if(this.getInformation().getSize()<w.HEADER_SIZE+Ar.GTIN_SIZE)throw new V;let a=new yt;this.encodeCompressedGtin(a,w.HEADER_SIZE);let c=this.getGeneralDecoder().extractNumericValueFromBitArray(w.HEADER_SIZE+Ar.GTIN_SIZE,w.LAST_DIGIT_SIZE);a.append("(392"),a.append(c),a.append(")");let u=this.getGeneralDecoder().decodeGeneralPurposeField(w.HEADER_SIZE+Ar.GTIN_SIZE+w.LAST_DIGIT_SIZE,null);return a.append(u.getNewString()),a.toString()}}return w.HEADER_SIZE=8,w.LAST_DIGIT_SIZE=2,w})(),QT=(()=>{class w extends Ar{constructor(a){super(a)}parseInformation(){if(this.getInformation().getSize()<w.HEADER_SIZE+Ar.GTIN_SIZE)throw new V;let a=new yt;this.encodeCompressedGtin(a,w.HEADER_SIZE);let c=this.getGeneralDecoder().extractNumericValueFromBitArray(w.HEADER_SIZE+Ar.GTIN_SIZE,w.LAST_DIGIT_SIZE);a.append("(393"),a.append(c),a.append(")");let u=this.getGeneralDecoder().extractNumericValueFromBitArray(w.HEADER_SIZE+Ar.GTIN_SIZE+w.LAST_DIGIT_SIZE,w.FIRST_THREE_DIGITS_SIZE);u/100==0&&a.append("0"),u/10==0&&a.append("0"),a.append(u);let d=this.getGeneralDecoder().decodeGeneralPurposeField(w.HEADER_SIZE+Ar.GTIN_SIZE+w.LAST_DIGIT_SIZE+w.FIRST_THREE_DIGITS_SIZE,null);return a.append(d.getNewString()),a.toString()}}return w.HEADER_SIZE=8,w.LAST_DIGIT_SIZE=2,w.FIRST_THREE_DIGITS_SIZE=10,w})(),$i=(()=>{class w extends mu{constructor(a,c,u){super(a),this.dateCode=u,this.firstAIdigits=c}parseInformation(){if(this.getInformation().getSize()!=w.HEADER_SIZE+w.GTIN_SIZE+w.WEIGHT_SIZE+w.DATE_SIZE)throw new V;let a=new yt;return this.encodeCompressedGtin(a,w.HEADER_SIZE),this.encodeCompressedWeight(a,w.HEADER_SIZE+w.GTIN_SIZE,w.WEIGHT_SIZE),this.encodeCompressedDate(a,w.HEADER_SIZE+w.GTIN_SIZE+w.WEIGHT_SIZE),a.toString()}encodeCompressedDate(a,c){let u=this.getGeneralDecoder().extractNumericValueFromBitArray(c,w.DATE_SIZE);if(u==38400)return;a.append("("),a.append(this.dateCode),a.append(")");let d=u%32;u/=32;let f=u%12+1;u/=12;let p=u;p/10==0&&a.append("0"),a.append(p),f/10==0&&a.append("0"),a.append(f),d/10==0&&a.append("0"),a.append(d)}addWeightCode(a,c){a.append("("),a.append(this.firstAIdigits),a.append(c/1e5),a.append(")")}checkWeight(a){return a%1e5}}return w.HEADER_SIZE=8,w.WEIGHT_SIZE=20,w.DATE_SIZE=16,w})();function lw(w){try{if(w.get(1))return new $T(w);if(!w.get(2))return new qT(w);switch(Es.extractNumericValueFromBitArray(w,1,4)){case 4:return new YT(w);case 5:return new ZT(w)}switch(Es.extractNumericValueFromBitArray(w,1,5)){case 12:return new XT(w);case 13:return new QT(w)}switch(Es.extractNumericValueFromBitArray(w,1,7)){case 56:return new $i(w,"310","11");case 57:return new $i(w,"320","11");case 58:return new $i(w,"310","13");case 59:return new $i(w,"320","13");case 60:return new $i(w,"310","15");case 61:return new $i(w,"320","15");case 62:return new $i(w,"310","17");case 63:return new $i(w,"320","17")}}catch(s){throw console.log(s),new fi("unknown decoder: "+w)}}class qi{constructor(s,a,c,u){this.leftchar=s,this.rightchar=a,this.finderpattern=c,this.maybeLast=u}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(s,a){return s instanceof qi?qi.equalsOrNull(s.leftchar,a.leftchar)&&qi.equalsOrNull(s.rightchar,a.rightchar)&&qi.equalsOrNull(s.finderpattern,a.finderpattern):!1}static equalsOrNull(s,a){return s===null?a===null:qi.equals(s,a)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class lp{constructor(s,a,c){this.pairs=s,this.rowNumber=a,this.wasReversed=c}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(s){return this.checkEqualitity(this,s)}toString(){return"{ "+this.pairs+" }"}equals(s,a){return s instanceof lp?this.checkEqualitity(s,a)&&s.wasReversed===a.wasReversed:!1}checkEqualitity(s,a){if(!s||!a)return;let c;return s.forEach((u,d)=>{a.forEach(f=>{u.getLeftChar().getValue()===f.getLeftChar().getValue()&&u.getRightChar().getValue()===f.getRightChar().getValue()&&u.getFinderPatter().getValue()===f.getFinderPatter().getValue()&&(c=!0)})}),c}}class z extends Mo{constructor(s){super(...arguments),this.pairs=new Array(z.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=s===!0}decodeRow(s,a,c){this.pairs.length=0,this.startFromEven=!1;try{return z.constructResult(this.decodeRow2pairs(s,a))}catch(u){this.verbose&&console.log(u)}return this.pairs.length=0,this.startFromEven=!0,z.constructResult(this.decodeRow2pairs(s,a))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(s,a){let c=!1;for(;!c;)try{this.pairs.push(this.retrieveNextPair(a,this.pairs,s))}catch(d){if(d instanceof V){if(!this.pairs.length)throw new V;c=!0}}if(this.checkChecksum())return this.pairs;let u;if(this.rows.length?u=!0:u=!1,this.storeRow(s,!1),u){let d=this.checkRowsBoolean(!1);if(d!=null||(d=this.checkRowsBoolean(!0),d!=null))return d}throw new V}checkRowsBoolean(s){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,s&&(this.rows=this.rows.reverse());let a=null;try{a=this.checkRows(new Array,0)}catch(c){this.verbose&&console.log(c)}return s&&(this.rows=this.rows.reverse()),a}checkRows(s,a){for(let c=a;c<this.rows.length;c++){let u=this.rows[c];this.pairs.length=0;for(let f of s)this.pairs.push(f.getPairs());if(this.pairs.push(u.getPairs()),!z.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let d=new Array(s);d.push(u);try{return this.checkRows(d,c+1)}catch(f){this.verbose&&console.log(f)}}throw new V}static isValidSequence(s){for(let a of z.FINDER_PATTERN_SEQUENCES){if(s.length>a.length)continue;let c=!0;for(let u=0;u<s.length;u++)if(s[u].getFinderPattern().getValue()!=a[u]){c=!1;break}if(c)return!0}return!1}storeRow(s,a){let c=0,u=!1,d=!1;for(;c<this.rows.length;){let f=this.rows[c];if(f.getRowNumber()>s){d=f.isEquivalent(this.pairs);break}u=f.isEquivalent(this.pairs),c++}d||u||z.isPartialRow(this.pairs,this.rows)||(this.rows.push(c,new lp(this.pairs,s,a)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(s,a){for(let c of a)if(c.getPairs().length!==s.length){for(let u of c.getPairs())for(let d of s)if(qi.equals(u,d))break}}static isPartialRow(s,a){for(let c of a){let u=!0;for(let d of s){let f=!1;for(let p of c.getPairs())if(d.equals(p)){f=!0;break}if(!f){u=!1;break}}if(u)return!0}return!1}getRows(){return this.rows}static constructResult(s){let a=GT.buildBitArray(s),u=lw(a).parseInformation(),d=s[0].getFinderPattern().getResultPoints(),f=s[s.length-1].getFinderPattern().getResultPoints(),p=[d[0],d[1],f[0],f[1]];return new Dn(u,null,null,p,ye.RSS_EXPANDED,null)}checkChecksum(){let s=this.pairs.get(0),a=s.getLeftChar(),c=s.getRightChar();if(c==null)return!1;let u=c.getChecksumPortion(),d=2;for(let p=1;p<this.pairs.size();++p){let y=this.pairs.get(p);u+=y.getLeftChar().getChecksumPortion(),d++;let _=y.getRightChar();_!=null&&(u+=_.getChecksumPortion(),d++)}return u%=211,211*(d-4)+u==a.getValue()}static getNextSecondBar(s,a){let c;return s.get(a)?(c=s.getNextUnset(a),c=s.getNextSet(c)):(c=s.getNextSet(a),c=s.getNextUnset(c)),c}retrieveNextPair(s,a,c){let u=a.length%2==0;this.startFromEven&&(u=!u);let d,f=!0,p=-1;do this.findNextPair(s,a,p),d=this.parseFoundFinderPattern(s,c,u),d==null?p=z.getNextSecondBar(s,this.startEnd[0]):f=!1;while(f);let y=this.decodeDataCharacter(s,d,u,!0);if(!this.isEmptyPair(a)&&a[a.length-1].mustBeLast())throw new V;let _;try{_=this.decodeDataCharacter(s,d,u,!1)}catch(v){_=null,this.verbose&&console.log(v)}return new qi(y,_,d,!0)}isEmptyPair(s){return s.length===0}findNextPair(s,a,c){let u=this.getDecodeFinderCounters();u[0]=0,u[1]=0,u[2]=0,u[3]=0;let d=s.getSize(),f;c>=0?f=c:this.isEmptyPair(a)?f=0:f=a[a.length-1].getFinderPattern().getStartEnd()[1];let p=a.length%2!=0;this.startFromEven&&(p=!p);let y=!1;for(;f<d&&(y=!s.get(f),!!y);)f++;let _=0,v=f;for(let I=f;I<d;I++)if(s.get(I)!=y)u[_]++;else{if(_==3){if(p&&z.reverseCounters(u),z.isFinderPattern(u)){this.startEnd[0]=v,this.startEnd[1]=I;return}p&&z.reverseCounters(u),v+=u[0]+u[1],u[0]=u[2],u[1]=u[3],u[2]=0,u[3]=0,_--}else _++;u[_]=1,y=!y}throw new V}static reverseCounters(s){let a=s.length;for(let c=0;c<a/2;++c){let u=s[c];s[c]=s[a-c-1],s[a-c-1]=u}}parseFoundFinderPattern(s,a,c){let u,d,f;if(c){let _=this.startEnd[0]-1;for(;_>=0&&!s.get(_);)_--;_++,u=this.startEnd[0]-_,d=_,f=this.startEnd[1]}else d=this.startEnd[0],f=s.getNextUnset(this.startEnd[1]+1),u=f-this.startEnd[1];let p=this.getDecodeFinderCounters();D.arraycopy(p,0,p,1,p.length-1),p[0]=u;let y;try{y=this.parseFinderValue(p,z.FINDER_PATTERNS)}catch{return null}return new gu(y,[d,f],d,f,a)}decodeDataCharacter(s,a,c,u){let d=this.getDataCharacterCounters();for(let vt=0;vt<d.length;vt++)d[vt]=0;if(u)z.recordPatternInReverse(s,a.getStartEnd()[0],d);else{z.recordPattern(s,a.getStartEnd()[1],d);for(let vt=0,un=d.length-1;vt<un;vt++,un--){let Qn=d[vt];d[vt]=d[un],d[un]=Qn}}let f=17,p=Je.sum(new Int32Array(d))/f,y=(a.getStartEnd()[1]-a.getStartEnd()[0])/15;if(Math.abs(p-y)/y>.3)throw new V;let _=this.getOddCounts(),v=this.getEvenCounts(),I=this.getOddRoundingErrors(),b=this.getEvenRoundingErrors();for(let vt=0;vt<d.length;vt++){let un=1*d[vt]/p,Qn=un+.5;if(Qn<1){if(un<.3)throw new V;Qn=1}else if(Qn>8){if(un>8.7)throw new V;Qn=8}let Ss=vt/2;vt&1?(v[Ss]=Qn,b[Ss]=un-Qn):(_[Ss]=Qn,I[Ss]=un-Qn)}this.adjustOddEvenCounts(f);let A=4*a.getValue()+(c?0:2)+(u?0:1)-1,T=0,M=0;for(let vt=_.length-1;vt>=0;vt--){if(z.isNotA1left(a,c,u)){let un=z.WEIGHTS[A][2*vt];M+=_[vt]*un}T+=_[vt]}let R=0;for(let vt=v.length-1;vt>=0;vt--)if(z.isNotA1left(a,c,u)){let un=z.WEIGHTS[A][2*vt+1];R+=v[vt]*un}let k=M+R;if(T&1||T>13||T<4)throw new V;let q=(13-T)/2,Q=z.SYMBOL_WIDEST[q],B=9-Q,Ve=Wr.getRSSvalue(_,Q,!0),De=Wr.getRSSvalue(v,B,!1),Ln=z.EVEN_TOTAL_SUBSET[q],Tr=z.GSUM[q],Fn=Ve*Ln+De+Tr;return new vs(Fn,k)}static isNotA1left(s,a,c){return!(s.getValue()==0&&a&&c)}adjustOddEvenCounts(s){let a=Je.sum(new Int32Array(this.getOddCounts())),c=Je.sum(new Int32Array(this.getEvenCounts())),u=!1,d=!1;a>13?d=!0:a<4&&(u=!0);let f=!1,p=!1;c>13?p=!0:c<4&&(f=!0);let y=a+c-s,_=(a&1)==1,v=(c&1)==0;if(y==1)if(_){if(v)throw new V;d=!0}else{if(!v)throw new V;p=!0}else if(y==-1)if(_){if(v)throw new V;u=!0}else{if(!v)throw new V;f=!0}else if(y==0){if(_){if(!v)throw new V;a<c?(u=!0,p=!0):(d=!0,f=!0)}else if(v)throw new V}else throw new V;if(u){if(d)throw new V;z.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(d&&z.decrement(this.getOddCounts(),this.getOddRoundingErrors()),f){if(p)throw new V;z.increment(this.getEvenCounts(),this.getOddRoundingErrors())}p&&z.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}z.SYMBOL_WIDEST=[7,5,4,3,1],z.EVEN_TOTAL_SUBSET=[4,20,52,104,204],z.GSUM=[0,348,1388,2948,3988],z.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],z.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],z.FINDER_PAT_A=0,z.FINDER_PAT_B=1,z.FINDER_PAT_C=2,z.FINDER_PAT_D=3,z.FINDER_PAT_E=4,z.FINDER_PAT_F=5,z.FINDER_PATTERN_SEQUENCES=[[z.FINDER_PAT_A,z.FINDER_PAT_A],[z.FINDER_PAT_A,z.FINDER_PAT_B,z.FINDER_PAT_B],[z.FINDER_PAT_A,z.FINDER_PAT_C,z.FINDER_PAT_B,z.FINDER_PAT_D],[z.FINDER_PAT_A,z.FINDER_PAT_E,z.FINDER_PAT_B,z.FINDER_PAT_D,z.FINDER_PAT_C],[z.FINDER_PAT_A,z.FINDER_PAT_E,z.FINDER_PAT_B,z.FINDER_PAT_D,z.FINDER_PAT_D,z.FINDER_PAT_F],[z.FINDER_PAT_A,z.FINDER_PAT_E,z.FINDER_PAT_B,z.FINDER_PAT_D,z.FINDER_PAT_E,z.FINDER_PAT_F,z.FINDER_PAT_F],[z.FINDER_PAT_A,z.FINDER_PAT_A,z.FINDER_PAT_B,z.FINDER_PAT_B,z.FINDER_PAT_C,z.FINDER_PAT_C,z.FINDER_PAT_D,z.FINDER_PAT_D],[z.FINDER_PAT_A,z.FINDER_PAT_A,z.FINDER_PAT_B,z.FINDER_PAT_B,z.FINDER_PAT_C,z.FINDER_PAT_C,z.FINDER_PAT_D,z.FINDER_PAT_E,z.FINDER_PAT_E],[z.FINDER_PAT_A,z.FINDER_PAT_A,z.FINDER_PAT_B,z.FINDER_PAT_B,z.FINDER_PAT_C,z.FINDER_PAT_C,z.FINDER_PAT_D,z.FINDER_PAT_E,z.FINDER_PAT_F,z.FINDER_PAT_F],[z.FINDER_PAT_A,z.FINDER_PAT_A,z.FINDER_PAT_B,z.FINDER_PAT_B,z.FINDER_PAT_C,z.FINDER_PAT_D,z.FINDER_PAT_D,z.FINDER_PAT_E,z.FINDER_PAT_E,z.FINDER_PAT_F,z.FINDER_PAT_F]],z.MAX_PAIRS=11;class KT extends vs{constructor(s,a,c){super(s,a),this.count=0,this.finderPattern=c}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Rt extends Mo{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(s,a,c){let u=this.decodePair(a,!1,s,c);Rt.addOrTally(this.possibleLeftPairs,u),a.reverse();let d=this.decodePair(a,!0,s,c);Rt.addOrTally(this.possibleRightPairs,d),a.reverse();for(let f of this.possibleLeftPairs)if(f.getCount()>1){for(let p of this.possibleRightPairs)if(p.getCount()>1&&Rt.checkChecksum(f,p))return Rt.constructResult(f,p)}throw new V}static addOrTally(s,a){if(a==null)return;let c=!1;for(let u of s)if(u.getValue()===a.getValue()){u.incrementCount(),c=!0;break}c||s.push(a)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(s,a){let c=4537077*s.getValue()+a.getValue(),u=new String(c).toString(),d=new yt;for(let _=13-u.length;_>0;_--)d.append("0");d.append(u);let f=0;for(let _=0;_<13;_++){let v=d.charAt(_).charCodeAt(0)-48;f+=_&1?v:3*v}f=10-f%10,f===10&&(f=0),d.append(f.toString());let p=s.getFinderPattern().getResultPoints(),y=a.getFinderPattern().getResultPoints();return new Dn(d.toString(),null,0,[p[0],p[1],y[0],y[1]],ye.RSS_14,new Date().getTime())}static checkChecksum(s,a){let c=(s.getChecksumPortion()+16*a.getChecksumPortion())%79,u=9*s.getFinderPattern().getValue()+a.getFinderPattern().getValue();return u>72&&u--,u>8&&u--,c===u}decodePair(s,a,c,u){try{let d=this.findFinderPattern(s,a),f=this.parseFoundFinderPattern(s,c,a,d),p=u==null?null:u.get(he.NEED_RESULT_POINT_CALLBACK);if(p!=null){let v=(d[0]+d[1])/2;a&&(v=s.getSize()-1-v),p.foundPossibleResultPoint(new se(v,c))}let y=this.decodeDataCharacter(s,f,!0),_=this.decodeDataCharacter(s,f,!1);return new KT(1597*y.getValue()+_.getValue(),y.getChecksumPortion()+4*_.getChecksumPortion(),f)}catch{return null}}decodeDataCharacter(s,a,c){let u=this.getDataCharacterCounters();for(let R=0;R<u.length;R++)u[R]=0;if(c)jt.recordPatternInReverse(s,a.getStartEnd()[0],u);else{jt.recordPattern(s,a.getStartEnd()[1]+1,u);for(let R=0,k=u.length-1;R<k;R++,k--){let q=u[R];u[R]=u[k],u[k]=q}}let d=c?16:15,f=Je.sum(new Int32Array(u))/d,p=this.getOddCounts(),y=this.getEvenCounts(),_=this.getOddRoundingErrors(),v=this.getEvenRoundingErrors();for(let R=0;R<u.length;R++){let k=u[R]/f,q=Math.floor(k+.5);q<1?q=1:q>8&&(q=8);let Q=Math.floor(R/2);R&1?(y[Q]=q,v[Q]=k-q):(p[Q]=q,_[Q]=k-q)}this.adjustOddEvenCounts(c,d);let I=0,b=0;for(let R=p.length-1;R>=0;R--)b*=9,b+=p[R],I+=p[R];let A=0,T=0;for(let R=y.length-1;R>=0;R--)A*=9,A+=y[R],T+=y[R];let M=b+3*A;if(c){if(I&1||I>12||I<4)throw new V;let R=(12-I)/2,k=Rt.OUTSIDE_ODD_WIDEST[R],q=9-k,Q=Wr.getRSSvalue(p,k,!1),B=Wr.getRSSvalue(y,q,!0),Ve=Rt.OUTSIDE_EVEN_TOTAL_SUBSET[R],De=Rt.OUTSIDE_GSUM[R];return new vs(Q*Ve+B+De,M)}else{if(T&1||T>10||T<4)throw new V;let R=(10-T)/2,k=Rt.INSIDE_ODD_WIDEST[R],q=9-k,Q=Wr.getRSSvalue(p,k,!0),B=Wr.getRSSvalue(y,q,!1),Ve=Rt.INSIDE_ODD_TOTAL_SUBSET[R],De=Rt.INSIDE_GSUM[R];return new vs(B*Ve+Q+De,M)}}findFinderPattern(s,a){let c=this.getDecodeFinderCounters();c[0]=0,c[1]=0,c[2]=0,c[3]=0;let u=s.getSize(),d=!1,f=0;for(;f<u&&(d=!s.get(f),a!==d);)f++;let p=0,y=f;for(let _=f;_<u;_++)if(s.get(_)!==d)c[p]++;else{if(p===3){if(Mo.isFinderPattern(c))return[y,_];y+=c[0]+c[1],c[0]=c[2],c[1]=c[3],c[2]=0,c[3]=0,p--}else p++;c[p]=1,d=!d}throw new V}parseFoundFinderPattern(s,a,c,u){let d=s.get(u[0]),f=u[0]-1;for(;f>=0&&d!==s.get(f);)f--;f++;let p=u[0]-f,y=this.getDecodeFinderCounters(),_=new Int32Array(y.length);D.arraycopy(y,0,_,1,y.length-1),_[0]=p;let v=this.parseFinderValue(_,Rt.FINDER_PATTERNS),I=f,b=u[1];return c&&(I=s.getSize()-1-I,b=s.getSize()-1-b),new gu(v,[f,u[1]],I,b,a)}adjustOddEvenCounts(s,a){let c=Je.sum(new Int32Array(this.getOddCounts())),u=Je.sum(new Int32Array(this.getEvenCounts())),d=!1,f=!1,p=!1,y=!1;s?(c>12?f=!0:c<4&&(d=!0),u>12?y=!0:u<4&&(p=!0)):(c>11?f=!0:c<5&&(d=!0),u>10?y=!0:u<4&&(p=!0));let _=c+u-a,v=(c&1)===(s?1:0),I=(u&1)===1;if(_===1)if(v){if(I)throw new V;f=!0}else{if(!I)throw new V;y=!0}else if(_===-1)if(v){if(I)throw new V;d=!0}else{if(!I)throw new V;p=!0}else if(_===0){if(v){if(!I)throw new V;c<u?(d=!0,y=!0):(f=!0,p=!0)}else if(I)throw new V}else throw new V;if(d){if(f)throw new V;Mo.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(f&&Mo.decrement(this.getOddCounts(),this.getOddRoundingErrors()),p){if(y)throw new V;Mo.increment(this.getEvenCounts(),this.getOddRoundingErrors())}y&&Mo.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Rt.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Rt.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Rt.OUTSIDE_GSUM=[0,161,961,2015,2715],Rt.INSIDE_GSUM=[0,336,1036,1516],Rt.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Rt.INSIDE_ODD_WIDEST=[2,4,6,8],Rt.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Is extends jt{constructor(s,a){super(),this.readers=[],this.verbose=a===!0;let c=s?s.get(he.POSSIBLE_FORMATS):null,u=s&&s.get(he.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;c?((c.includes(ye.EAN_13)||c.includes(ye.UPC_A)||c.includes(ye.EAN_8)||c.includes(ye.UPC_E))&&this.readers.push(new sp(s)),c.includes(ye.CODE_39)&&this.readers.push(new ip(u)),c.includes(ye.CODE_128)&&this.readers.push(new Z),c.includes(ye.ITF)&&this.readers.push(new _t),c.includes(ye.RSS_14)&&this.readers.push(new Rt),c.includes(ye.RSS_EXPANDED)&&this.readers.push(new z(this.verbose))):(this.readers.push(new sp(s)),this.readers.push(new ip),this.readers.push(new sp(s)),this.readers.push(new Z),this.readers.push(new _t),this.readers.push(new Rt),this.readers.push(new z(this.verbose)))}decodeRow(s,a,c){for(let u=0;u<this.readers.length;u++)try{return this.readers[u].decodeRow(s,a,c)}catch{}throw new V}reset(){this.readers.forEach(s=>s.reset())}}class JT extends To{constructor(s=500,a){super(new Is(a),s,a)}}class lt{constructor(s,a,c){this.ecCodewords=s,this.ecBlocks=[a],c&&this.ecBlocks.push(c)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class st{constructor(s,a){this.count=s,this.dataCodewords=a}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Ze{constructor(s,a,c,u,d,f){this.versionNumber=s,this.symbolSizeRows=a,this.symbolSizeColumns=c,this.dataRegionSizeRows=u,this.dataRegionSizeColumns=d,this.ecBlocks=f;let p=0,y=f.getECCodewords(),_=f.getECBlocks();for(let v of _)p+=v.getCount()*(v.getDataCodewords()+y);this.totalCodewords=p}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(s,a){if(s&1||a&1)throw new H;for(let c of Ze.VERSIONS)if(c.symbolSizeRows===s&&c.symbolSizeColumns===a)return c;throw new H}toString(){return""+this.versionNumber}static buildVersions(){return[new Ze(1,10,10,8,8,new lt(5,new st(1,3))),new Ze(2,12,12,10,10,new lt(7,new st(1,5))),new Ze(3,14,14,12,12,new lt(10,new st(1,8))),new Ze(4,16,16,14,14,new lt(12,new st(1,12))),new Ze(5,18,18,16,16,new lt(14,new st(1,18))),new Ze(6,20,20,18,18,new lt(18,new st(1,22))),new Ze(7,22,22,20,20,new lt(20,new st(1,30))),new Ze(8,24,24,22,22,new lt(24,new st(1,36))),new Ze(9,26,26,24,24,new lt(28,new st(1,44))),new Ze(10,32,32,14,14,new lt(36,new st(1,62))),new Ze(11,36,36,16,16,new lt(42,new st(1,86))),new Ze(12,40,40,18,18,new lt(48,new st(1,114))),new Ze(13,44,44,20,20,new lt(56,new st(1,144))),new Ze(14,48,48,22,22,new lt(68,new st(1,174))),new Ze(15,52,52,24,24,new lt(42,new st(2,102))),new Ze(16,64,64,14,14,new lt(56,new st(2,140))),new Ze(17,72,72,16,16,new lt(36,new st(4,92))),new Ze(18,80,80,18,18,new lt(48,new st(4,114))),new Ze(19,88,88,20,20,new lt(56,new st(4,144))),new Ze(20,96,96,22,22,new lt(68,new st(4,174))),new Ze(21,104,104,24,24,new lt(56,new st(6,136))),new Ze(22,120,120,18,18,new lt(68,new st(6,175))),new Ze(23,132,132,20,20,new lt(62,new st(8,163))),new Ze(24,144,144,22,22,new lt(62,new st(8,156),new st(2,155))),new Ze(25,8,18,6,16,new lt(7,new st(1,5))),new Ze(26,8,32,6,14,new lt(11,new st(1,10))),new Ze(27,12,26,10,24,new lt(14,new st(1,16))),new Ze(28,12,36,10,16,new lt(18,new st(1,22))),new Ze(29,16,36,14,16,new lt(24,new st(1,32))),new Ze(30,16,48,14,22,new lt(28,new st(1,49)))]}}Ze.VERSIONS=Ze.buildVersions();class up{constructor(s){let a=s.getHeight();if(a<8||a>144||a&1)throw new H;this.version=up.readVersion(s),this.mappingBitMatrix=this.extractDataRegion(s),this.readMappingMatrix=new en(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(s){let a=s.getHeight(),c=s.getWidth();return Ze.getVersionForDimensions(a,c)}readCodewords(){let s=new Int8Array(this.version.getTotalCodewords()),a=0,c=4,u=0,d=this.mappingBitMatrix.getHeight(),f=this.mappingBitMatrix.getWidth(),p=!1,y=!1,_=!1,v=!1;do if(c===d&&u===0&&!p)s[a++]=this.readCorner1(d,f)&255,c-=2,u+=2,p=!0;else if(c===d-2&&u===0&&f&3&&!y)s[a++]=this.readCorner2(d,f)&255,c-=2,u+=2,y=!0;else if(c===d+4&&u===2&&!(f&7)&&!_)s[a++]=this.readCorner3(d,f)&255,c-=2,u+=2,_=!0;else if(c===d-2&&u===0&&(f&7)===4&&!v)s[a++]=this.readCorner4(d,f)&255,c-=2,u+=2,v=!0;else{do c<d&&u>=0&&!this.readMappingMatrix.get(u,c)&&(s[a++]=this.readUtah(c,u,d,f)&255),c-=2,u+=2;while(c>=0&&u<f);c+=1,u+=3;do c>=0&&u<f&&!this.readMappingMatrix.get(u,c)&&(s[a++]=this.readUtah(c,u,d,f)&255),c+=2,u-=2;while(c<d&&u>=0);c+=3,u+=1}while(c<d||u<f);if(a!==this.version.getTotalCodewords())throw new H;return s}readModule(s,a,c,u){return s<0&&(s+=c,a+=4-(c+4&7)),a<0&&(a+=u,s+=4-(u+4&7)),this.readMappingMatrix.set(a,s),this.mappingBitMatrix.get(a,s)}readUtah(s,a,c,u){let d=0;return this.readModule(s-2,a-2,c,u)&&(d|=1),d<<=1,this.readModule(s-2,a-1,c,u)&&(d|=1),d<<=1,this.readModule(s-1,a-2,c,u)&&(d|=1),d<<=1,this.readModule(s-1,a-1,c,u)&&(d|=1),d<<=1,this.readModule(s-1,a,c,u)&&(d|=1),d<<=1,this.readModule(s,a-2,c,u)&&(d|=1),d<<=1,this.readModule(s,a-1,c,u)&&(d|=1),d<<=1,this.readModule(s,a,c,u)&&(d|=1),d}readCorner1(s,a){let c=0;return this.readModule(s-1,0,s,a)&&(c|=1),c<<=1,this.readModule(s-1,1,s,a)&&(c|=1),c<<=1,this.readModule(s-1,2,s,a)&&(c|=1),c<<=1,this.readModule(0,a-2,s,a)&&(c|=1),c<<=1,this.readModule(0,a-1,s,a)&&(c|=1),c<<=1,this.readModule(1,a-1,s,a)&&(c|=1),c<<=1,this.readModule(2,a-1,s,a)&&(c|=1),c<<=1,this.readModule(3,a-1,s,a)&&(c|=1),c}readCorner2(s,a){let c=0;return this.readModule(s-3,0,s,a)&&(c|=1),c<<=1,this.readModule(s-2,0,s,a)&&(c|=1),c<<=1,this.readModule(s-1,0,s,a)&&(c|=1),c<<=1,this.readModule(0,a-4,s,a)&&(c|=1),c<<=1,this.readModule(0,a-3,s,a)&&(c|=1),c<<=1,this.readModule(0,a-2,s,a)&&(c|=1),c<<=1,this.readModule(0,a-1,s,a)&&(c|=1),c<<=1,this.readModule(1,a-1,s,a)&&(c|=1),c}readCorner3(s,a){let c=0;return this.readModule(s-1,0,s,a)&&(c|=1),c<<=1,this.readModule(s-1,a-1,s,a)&&(c|=1),c<<=1,this.readModule(0,a-3,s,a)&&(c|=1),c<<=1,this.readModule(0,a-2,s,a)&&(c|=1),c<<=1,this.readModule(0,a-1,s,a)&&(c|=1),c<<=1,this.readModule(1,a-3,s,a)&&(c|=1),c<<=1,this.readModule(1,a-2,s,a)&&(c|=1),c<<=1,this.readModule(1,a-1,s,a)&&(c|=1),c}readCorner4(s,a){let c=0;return this.readModule(s-3,0,s,a)&&(c|=1),c<<=1,this.readModule(s-2,0,s,a)&&(c|=1),c<<=1,this.readModule(s-1,0,s,a)&&(c|=1),c<<=1,this.readModule(0,a-2,s,a)&&(c|=1),c<<=1,this.readModule(0,a-1,s,a)&&(c|=1),c<<=1,this.readModule(1,a-1,s,a)&&(c|=1),c<<=1,this.readModule(2,a-1,s,a)&&(c|=1),c<<=1,this.readModule(3,a-1,s,a)&&(c|=1),c}extractDataRegion(s){let a=this.version.getSymbolSizeRows(),c=this.version.getSymbolSizeColumns();if(s.getHeight()!==a)throw new m("Dimension of bitMatrix must match the version size");let u=this.version.getDataRegionSizeRows(),d=this.version.getDataRegionSizeColumns(),f=a/u|0,p=c/d|0,y=f*u,_=p*d,v=new en(_,y);for(let I=0;I<f;++I){let b=I*u;for(let A=0;A<p;++A){let T=A*d;for(let M=0;M<u;++M){let R=I*(u+2)+1+M,k=b+M;for(let q=0;q<d;++q){let Q=A*(d+2)+1+q;if(s.get(Q,R)){let B=T+q;v.set(B,k)}}}}}return v}}class dp{constructor(s,a){this.numDataCodewords=s,this.codewords=a}static getDataBlocks(s,a){let c=a.getECBlocks(),u=0,d=c.getECBlocks();for(let M of d)u+=M.getCount();let f=new Array(u),p=0;for(let M of d)for(let R=0;R<M.getCount();R++){let k=M.getDataCodewords(),q=c.getECCodewords()+k;f[p++]=new dp(k,new Uint8Array(q))}let _=f[0].codewords.length-c.getECCodewords(),v=_-1,I=0;for(let M=0;M<v;M++)for(let R=0;R<p;R++)f[R].codewords[M]=s[I++];let b=a.getVersionNumber()===24,A=b?8:p;for(let M=0;M<A;M++)f[M].codewords[_-1]=s[I++];let T=f[0].codewords.length;for(let M=_;M<T;M++)for(let R=0;R<p;R++){let k=b?(R+8)%p:R,q=b&&k>7?M-1:M;f[k].codewords[q]=s[I++]}if(I!==s.length)throw new m;return f}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class fp{constructor(s){this.bytes=s,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(s){if(s<1||s>32||s>this.available())throw new m(""+s);let a=0,c=this.bitOffset,u=this.byteOffset,d=this.bytes;if(c>0){let f=8-c,p=s<f?s:f,y=f-p,_=255>>8-p<<y;a=(d[u]&_)>>y,s-=p,c+=p,c===8&&(c=0,u++)}if(s>0){for(;s>=8;)a=a<<8|d[u]&255,u++,s-=8;if(s>0){let f=8-s,p=255>>f<<f;a=a<<s|(d[u]&p)>>f,c+=s}}return this.bitOffset=c,this.byteOffset=u,a}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var rn=function(w){return w[w.PAD_ENCODE=0]="PAD_ENCODE",w[w.ASCII_ENCODE=1]="ASCII_ENCODE",w[w.C40_ENCODE=2]="C40_ENCODE",w[w.TEXT_ENCODE=3]="TEXT_ENCODE",w[w.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",w[w.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",w[w.BASE256_ENCODE=6]="BASE256_ENCODE",w}(rn||{});class Yi{static decode(s){let a=new fp(s),c=new yt,u=new yt,d=new Array,f=rn.ASCII_ENCODE;do if(f===rn.ASCII_ENCODE)f=this.decodeAsciiSegment(a,c,u);else{switch(f){case rn.C40_ENCODE:this.decodeC40Segment(a,c);break;case rn.TEXT_ENCODE:this.decodeTextSegment(a,c);break;case rn.ANSIX12_ENCODE:this.decodeAnsiX12Segment(a,c);break;case rn.EDIFACT_ENCODE:this.decodeEdifactSegment(a,c);break;case rn.BASE256_ENCODE:this.decodeBase256Segment(a,c,d);break;default:throw new H}f=rn.ASCII_ENCODE}while(f!==rn.PAD_ENCODE&&a.available()>0);return u.length()>0&&c.append(u.toString()),new Ka(s,c.toString(),d.length===0?null:d,null)}static decodeAsciiSegment(s,a,c){let u=!1;do{let d=s.readBits(8);if(d===0)throw new H;if(d<=128)return u&&(d+=128),a.append(String.fromCharCode(d-1)),rn.ASCII_ENCODE;if(d===129)return rn.PAD_ENCODE;if(d<=229){let f=d-130;f<10&&a.append("0"),a.append(""+f)}else switch(d){case 230:return rn.C40_ENCODE;case 231:return rn.BASE256_ENCODE;case 232:a.append("");break;case 233:case 234:break;case 235:u=!0;break;case 236:a.append("[)>05"),c.insert(0,"");break;case 237:a.append("[)>06"),c.insert(0,"");break;case 238:return rn.ANSIX12_ENCODE;case 239:return rn.TEXT_ENCODE;case 240:return rn.EDIFACT_ENCODE;case 241:break;default:if(d!==254||s.available()!==0)throw new H;break}}while(s.available()>0);return rn.ASCII_ENCODE}static decodeC40Segment(s,a){let c=!1,u=[],d=0;do{if(s.available()===8)return;let f=s.readBits(8);if(f===254)return;this.parseTwoBytes(f,s.readBits(8),u);for(let p=0;p<3;p++){let y=u[p];switch(d){case 0:if(y<3)d=y+1;else if(y<this.C40_BASIC_SET_CHARS.length){let _=this.C40_BASIC_SET_CHARS[y];c?(a.append(String.fromCharCode(_.charCodeAt(0)+128)),c=!1):a.append(_)}else throw new H;break;case 1:c?(a.append(String.fromCharCode(y+128)),c=!1):a.append(String.fromCharCode(y)),d=0;break;case 2:if(y<this.C40_SHIFT2_SET_CHARS.length){let _=this.C40_SHIFT2_SET_CHARS[y];c?(a.append(String.fromCharCode(_.charCodeAt(0)+128)),c=!1):a.append(_)}else switch(y){case 27:a.append("");break;case 30:c=!0;break;default:throw new H}d=0;break;case 3:c?(a.append(String.fromCharCode(y+224)),c=!1):a.append(String.fromCharCode(y+96)),d=0;break;default:throw new H}}}while(s.available()>0)}static decodeTextSegment(s,a){let c=!1,u=[],d=0;do{if(s.available()===8)return;let f=s.readBits(8);if(f===254)return;this.parseTwoBytes(f,s.readBits(8),u);for(let p=0;p<3;p++){let y=u[p];switch(d){case 0:if(y<3)d=y+1;else if(y<this.TEXT_BASIC_SET_CHARS.length){let _=this.TEXT_BASIC_SET_CHARS[y];c?(a.append(String.fromCharCode(_.charCodeAt(0)+128)),c=!1):a.append(_)}else throw new H;break;case 1:c?(a.append(String.fromCharCode(y+128)),c=!1):a.append(String.fromCharCode(y)),d=0;break;case 2:if(y<this.TEXT_SHIFT2_SET_CHARS.length){let _=this.TEXT_SHIFT2_SET_CHARS[y];c?(a.append(String.fromCharCode(_.charCodeAt(0)+128)),c=!1):a.append(_)}else switch(y){case 27:a.append("");break;case 30:c=!0;break;default:throw new H}d=0;break;case 3:if(y<this.TEXT_SHIFT3_SET_CHARS.length){let _=this.TEXT_SHIFT3_SET_CHARS[y];c?(a.append(String.fromCharCode(_.charCodeAt(0)+128)),c=!1):a.append(_),d=0}else throw new H;break;default:throw new H}}}while(s.available()>0)}static decodeAnsiX12Segment(s,a){let c=[];do{if(s.available()===8)return;let u=s.readBits(8);if(u===254)return;this.parseTwoBytes(u,s.readBits(8),c);for(let d=0;d<3;d++){let f=c[d];switch(f){case 0:a.append("\r");break;case 1:a.append("*");break;case 2:a.append(">");break;case 3:a.append(" ");break;default:if(f<14)a.append(String.fromCharCode(f+44));else if(f<40)a.append(String.fromCharCode(f+51));else throw new H;break}}}while(s.available()>0)}static parseTwoBytes(s,a,c){let u=(s<<8)+a-1,d=Math.floor(u/1600);c[0]=d,u-=d*1600,d=Math.floor(u/40),c[1]=d,c[2]=u-d*40}static decodeEdifactSegment(s,a){do{if(s.available()<=16)return;for(let c=0;c<4;c++){let u=s.readBits(6);if(u===31){let d=8-s.getBitOffset();d!==8&&s.readBits(d);return}u&32||(u|=64),a.append(String.fromCharCode(u))}}while(s.available()>0)}static decodeBase256Segment(s,a,c){let u=1+s.getByteOffset(),d=this.unrandomize255State(s.readBits(8),u++),f;if(d===0?f=s.available()/8|0:d<250?f=d:f=250*(d-249)+this.unrandomize255State(s.readBits(8),u++),f<0)throw new H;let p=new Uint8Array(f);for(let y=0;y<f;y++){if(s.available()<8)throw new H;p[y]=this.unrandomize255State(s.readBits(8),u++)}c.push(p);try{a.append(Ut.decode(p,Ce.ISO88591))}catch(y){throw new fi("Platform does not support required encoding: "+y.message)}}static unrandomize255State(s,a){let c=149*a%255+1,u=s-c;return u>=0?u:u+256}}Yi.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Yi.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Yi.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Yi.TEXT_SHIFT2_SET_CHARS=Yi.C40_SHIFT2_SET_CHARS,Yi.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~","\x7F"];class e2{constructor(){this.rsDecoder=new tc(it.DATA_MATRIX_FIELD_256)}decode(s){let a=new up(s),c=a.getVersion(),u=a.readCodewords(),d=dp.getDataBlocks(u,c),f=0;for(let _ of d)f+=_.getNumDataCodewords();let p=new Uint8Array(f),y=d.length;for(let _=0;_<y;_++){let v=d[_],I=v.getCodewords(),b=v.getNumDataCodewords();this.correctErrors(I,b);for(let A=0;A<b;A++)p[A*y+_]=I[A]}return Yi.decode(p)}correctErrors(s,a){let c=new Int32Array(s);try{this.rsDecoder.decode(c,s.length-a)}catch{throw new E}for(let u=0;u<a;u++)s[u]=c[u]}}class Lt{constructor(s){this.image=s,this.rectangleDetector=new fu(this.image)}detect(){let s=this.rectangleDetector.detect(),a=this.detectSolid1(s);if(a=this.detectSolid2(a),a[3]=this.correctTopRight(a),!a[3])throw new V;a=this.shiftToModuleCenter(a);let c=a[0],u=a[1],d=a[2],f=a[3],p=this.transitionsBetween(c,f)+1,y=this.transitionsBetween(d,f)+1;(p&1)===1&&(p+=1),(y&1)===1&&(y+=1),4*p<7*y&&4*y<7*p&&(p=y=Math.max(p,y));let _=Lt.sampleGrid(this.image,c,u,d,f,p,y);return new du(_,[c,u,d,f])}static shiftPoint(s,a,c){let u=(a.getX()-s.getX())/(c+1),d=(a.getY()-s.getY())/(c+1);return new se(s.getX()+u,s.getY()+d)}static moveAway(s,a,c){let u=s.getX(),d=s.getY();return u<a?u-=1:u+=1,d<c?d-=1:d+=1,new se(u,d)}detectSolid1(s){let a=s[0],c=s[1],u=s[3],d=s[2],f=this.transitionsBetween(a,c),p=this.transitionsBetween(c,u),y=this.transitionsBetween(u,d),_=this.transitionsBetween(d,a),v=f,I=[d,a,c,u];return v>p&&(v=p,I[0]=a,I[1]=c,I[2]=u,I[3]=d),v>y&&(v=y,I[0]=c,I[1]=u,I[2]=d,I[3]=a),v>_&&(I[0]=u,I[1]=d,I[2]=a,I[3]=c),I}detectSolid2(s){let a=s[0],c=s[1],u=s[2],d=s[3],f=this.transitionsBetween(a,d),p=Lt.shiftPoint(c,u,(f+1)*4),y=Lt.shiftPoint(u,c,(f+1)*4),_=this.transitionsBetween(p,a),v=this.transitionsBetween(y,d);return _<v?(s[0]=a,s[1]=c,s[2]=u,s[3]=d):(s[0]=c,s[1]=u,s[2]=d,s[3]=a),s}correctTopRight(s){let a=s[0],c=s[1],u=s[2],d=s[3],f=this.transitionsBetween(a,d),p=this.transitionsBetween(c,d),y=Lt.shiftPoint(a,c,(p+1)*4),_=Lt.shiftPoint(u,c,(f+1)*4);f=this.transitionsBetween(y,d),p=this.transitionsBetween(_,d);let v=new se(d.getX()+(u.getX()-c.getX())/(f+1),d.getY()+(u.getY()-c.getY())/(f+1)),I=new se(d.getX()+(a.getX()-c.getX())/(p+1),d.getY()+(a.getY()-c.getY())/(p+1));if(!this.isValid(v))return this.isValid(I)?I:null;if(!this.isValid(I))return v;let b=this.transitionsBetween(y,v)+this.transitionsBetween(_,v),A=this.transitionsBetween(y,I)+this.transitionsBetween(_,I);return b>A?v:I}shiftToModuleCenter(s){let a=s[0],c=s[1],u=s[2],d=s[3],f=this.transitionsBetween(a,d)+1,p=this.transitionsBetween(u,d)+1,y=Lt.shiftPoint(a,c,p*4),_=Lt.shiftPoint(u,c,f*4);f=this.transitionsBetween(y,d)+1,p=this.transitionsBetween(_,d)+1,(f&1)===1&&(f+=1),(p&1)===1&&(p+=1);let v=(a.getX()+c.getX()+u.getX()+d.getX())/4,I=(a.getY()+c.getY()+u.getY()+d.getY())/4;a=Lt.moveAway(a,v,I),c=Lt.moveAway(c,v,I),u=Lt.moveAway(u,v,I),d=Lt.moveAway(d,v,I);let b,A;return y=Lt.shiftPoint(a,c,p*4),y=Lt.shiftPoint(y,d,f*4),b=Lt.shiftPoint(c,a,p*4),b=Lt.shiftPoint(b,u,f*4),_=Lt.shiftPoint(u,d,p*4),_=Lt.shiftPoint(_,c,f*4),A=Lt.shiftPoint(d,u,p*4),A=Lt.shiftPoint(A,a,f*4),[y,b,_,A]}isValid(s){return s.getX()>=0&&s.getX()<this.image.getWidth()&&s.getY()>0&&s.getY()<this.image.getHeight()}static sampleGrid(s,a,c,u,d,f,p){return Gi.getInstance().sampleGrid(s,f,p,.5,.5,f-.5,.5,f-.5,p-.5,.5,p-.5,a.getX(),a.getY(),d.getX(),d.getY(),u.getX(),u.getY(),c.getX(),c.getY())}transitionsBetween(s,a){let c=Math.trunc(s.getX()),u=Math.trunc(s.getY()),d=Math.trunc(a.getX()),f=Math.trunc(a.getY()),p=Math.abs(f-u)>Math.abs(d-c);if(p){let M=c;c=u,u=M,M=d,d=f,f=M}let y=Math.abs(d-c),_=Math.abs(f-u),v=-y/2,I=u<f?1:-1,b=c<d?1:-1,A=0,T=this.image.get(p?u:c,p?c:u);for(let M=c,R=u;M!==d;M+=b){let k=this.image.get(p?R:M,p?M:R);if(k!==T&&(A++,T=k),v+=_,v>0){if(R===f)break;R+=I,v-=y}}return A}}let yu=(()=>{class w{constructor(){this.decoder=new e2}decode(a,c=null){let u,d;if(c!=null&&c.has(he.PURE_BARCODE)){let v=w.extractPureBits(a.getBlackMatrix());u=this.decoder.decode(v),d=w.NO_POINTS}else{let v=new Lt(a.getBlackMatrix()).detect();u=this.decoder.decode(v.getBits()),d=v.getPoints()}let f=u.getRawBytes(),p=new Dn(u.getText(),f,8*f.length,d,ye.DATA_MATRIX,D.currentTimeMillis()),y=u.getByteSegments();y!=null&&p.putMetadata(nn.BYTE_SEGMENTS,y);let _=u.getECLevel();return _!=null&&p.putMetadata(nn.ERROR_CORRECTION_LEVEL,_),p}reset(){}static extractPureBits(a){let c=a.getTopLeftOnBit(),u=a.getBottomRightOnBit();if(c==null||u==null)throw new V;let d=this.moduleSize(c,a),f=c[1],p=u[1],y=c[0],v=(u[0]-y+1)/d,I=(p-f+1)/d;if(v<=0||I<=0)throw new V;let b=d/2;f+=b,y+=b;let A=new en(v,I);for(let T=0;T<I;T++){let M=f+T*d;for(let R=0;R<v;R++)a.get(y+R*d,M)&&A.set(R,T)}return A}static moduleSize(a,c){let u=c.getWidth(),d=a[0],f=a[1];for(;d<u&&c.get(d,f);)d++;if(d===u)throw new V;let p=d-a[0];if(p===0)throw new V;return p}}return w.NO_POINTS=[],w})();class t2 extends To{constructor(s=500){super(new yu,s)}}var rc=function(w){return w[w.L=0]="L",w[w.M=1]="M",w[w.Q=2]="Q",w[w.H=3]="H",w}(rc||{});class Et{constructor(s,a,c){this.value=s,this.stringValue=a,this.bits=c,Et.FOR_BITS.set(c,this),Et.FOR_VALUE.set(s,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(s){switch(s){case"L":return Et.L;case"M":return Et.M;case"Q":return Et.Q;case"H":return Et.H;default:throw new g(s+"not available")}}toString(){return this.stringValue}equals(s){if(!(s instanceof Et))return!1;let a=s;return this.value===a.value}static forBits(s){if(s<0||s>=Et.FOR_BITS.size)throw new m;return Et.FOR_BITS.get(s)}}Et.FOR_BITS=new Map,Et.FOR_VALUE=new Map,Et.L=new Et(rc.L,"L",1),Et.M=new Et(rc.M,"M",0),Et.Q=new Et(rc.Q,"Q",3),Et.H=new Et(rc.H,"H",2);class wn{constructor(s){this.errorCorrectionLevel=Et.forBits(s>>3&3),this.dataMask=s&7}static numBitsDiffering(s,a){return W.bitCount(s^a)}static decodeFormatInformation(s,a){let c=wn.doDecodeFormatInformation(s,a);return c!==null?c:wn.doDecodeFormatInformation(s^wn.FORMAT_INFO_MASK_QR,a^wn.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(s,a){let c=Number.MAX_SAFE_INTEGER,u=0;for(let d of wn.FORMAT_INFO_DECODE_LOOKUP){let f=d[0];if(f===s||f===a)return new wn(d[1]);let p=wn.numBitsDiffering(s,f);p<c&&(u=d[1],c=p),s!==a&&(p=wn.numBitsDiffering(a,f),p<c&&(u=d[1],c=p))}return c<=3?new wn(u):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(s){if(!(s instanceof wn))return!1;let a=s;return this.errorCorrectionLevel===a.errorCorrectionLevel&&this.dataMask===a.dataMask}}wn.FORMAT_INFO_MASK_QR=21522,wn.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class O{constructor(s,...a){this.ecCodewordsPerBlock=s,this.ecBlocks=a}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let s=0,a=this.ecBlocks;for(let c of a)s+=c.getCount();return s}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class S{constructor(s,a){this.count=s,this.dataCodewords=a}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class ue{constructor(s,a,...c){this.versionNumber=s,this.alignmentPatternCenters=a,this.ecBlocks=c;let u=0,d=c[0].getECCodewordsPerBlock(),f=c[0].getECBlocks();for(let p of f)u+=p.getCount()*(p.getDataCodewords()+d);this.totalCodewords=u}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(s){return this.ecBlocks[s.getValue()]}static getProvisionalVersionForDimension(s){if(s%4!==1)throw new H;try{return this.getVersionForNumber((s-17)/4)}catch{throw new H}}static getVersionForNumber(s){if(s<1||s>40)throw new m;return ue.VERSIONS[s-1]}static decodeVersionInformation(s){let a=Number.MAX_SAFE_INTEGER,c=0;for(let u=0;u<ue.VERSION_DECODE_INFO.length;u++){let d=ue.VERSION_DECODE_INFO[u];if(d===s)return ue.getVersionForNumber(u+7);let f=wn.numBitsDiffering(s,d);f<a&&(c=u+7,a=f)}return a<=3?ue.getVersionForNumber(c):null}buildFunctionPattern(){let s=this.getDimensionForVersion(),a=new en(s);a.setRegion(0,0,9,9),a.setRegion(s-8,0,8,9),a.setRegion(0,s-8,9,8);let c=this.alignmentPatternCenters.length;for(let u=0;u<c;u++){let d=this.alignmentPatternCenters[u]-2;for(let f=0;f<c;f++)u===0&&(f===0||f===c-1)||u===c-1&&f===0||a.setRegion(this.alignmentPatternCenters[f]-2,d,5,5)}return a.setRegion(6,9,1,s-17),a.setRegion(9,6,s-17,1),this.versionNumber>6&&(a.setRegion(s-11,0,3,6),a.setRegion(0,s-11,6,3)),a}toString(){return""+this.versionNumber}}ue.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),ue.VERSIONS=[new ue(1,new Int32Array(0),new O(7,new S(1,19)),new O(10,new S(1,16)),new O(13,new S(1,13)),new O(17,new S(1,9))),new ue(2,Int32Array.from([6,18]),new O(10,new S(1,34)),new O(16,new S(1,28)),new O(22,new S(1,22)),new O(28,new S(1,16))),new ue(3,Int32Array.from([6,22]),new O(15,new S(1,55)),new O(26,new S(1,44)),new O(18,new S(2,17)),new O(22,new S(2,13))),new ue(4,Int32Array.from([6,26]),new O(20,new S(1,80)),new O(18,new S(2,32)),new O(26,new S(2,24)),new O(16,new S(4,9))),new ue(5,Int32Array.from([6,30]),new O(26,new S(1,108)),new O(24,new S(2,43)),new O(18,new S(2,15),new S(2,16)),new O(22,new S(2,11),new S(2,12))),new ue(6,Int32Array.from([6,34]),new O(18,new S(2,68)),new O(16,new S(4,27)),new O(24,new S(4,19)),new O(28,new S(4,15))),new ue(7,Int32Array.from([6,22,38]),new O(20,new S(2,78)),new O(18,new S(4,31)),new O(18,new S(2,14),new S(4,15)),new O(26,new S(4,13),new S(1,14))),new ue(8,Int32Array.from([6,24,42]),new O(24,new S(2,97)),new O(22,new S(2,38),new S(2,39)),new O(22,new S(4,18),new S(2,19)),new O(26,new S(4,14),new S(2,15))),new ue(9,Int32Array.from([6,26,46]),new O(30,new S(2,116)),new O(22,new S(3,36),new S(2,37)),new O(20,new S(4,16),new S(4,17)),new O(24,new S(4,12),new S(4,13))),new ue(10,Int32Array.from([6,28,50]),new O(18,new S(2,68),new S(2,69)),new O(26,new S(4,43),new S(1,44)),new O(24,new S(6,19),new S(2,20)),new O(28,new S(6,15),new S(2,16))),new ue(11,Int32Array.from([6,30,54]),new O(20,new S(4,81)),new O(30,new S(1,50),new S(4,51)),new O(28,new S(4,22),new S(4,23)),new O(24,new S(3,12),new S(8,13))),new ue(12,Int32Array.from([6,32,58]),new O(24,new S(2,92),new S(2,93)),new O(22,new S(6,36),new S(2,37)),new O(26,new S(4,20),new S(6,21)),new O(28,new S(7,14),new S(4,15))),new ue(13,Int32Array.from([6,34,62]),new O(26,new S(4,107)),new O(22,new S(8,37),new S(1,38)),new O(24,new S(8,20),new S(4,21)),new O(22,new S(12,11),new S(4,12))),new ue(14,Int32Array.from([6,26,46,66]),new O(30,new S(3,115),new S(1,116)),new O(24,new S(4,40),new S(5,41)),new O(20,new S(11,16),new S(5,17)),new O(24,new S(11,12),new S(5,13))),new ue(15,Int32Array.from([6,26,48,70]),new O(22,new S(5,87),new S(1,88)),new O(24,new S(5,41),new S(5,42)),new O(30,new S(5,24),new S(7,25)),new O(24,new S(11,12),new S(7,13))),new ue(16,Int32Array.from([6,26,50,74]),new O(24,new S(5,98),new S(1,99)),new O(28,new S(7,45),new S(3,46)),new O(24,new S(15,19),new S(2,20)),new O(30,new S(3,15),new S(13,16))),new ue(17,Int32Array.from([6,30,54,78]),new O(28,new S(1,107),new S(5,108)),new O(28,new S(10,46),new S(1,47)),new O(28,new S(1,22),new S(15,23)),new O(28,new S(2,14),new S(17,15))),new ue(18,Int32Array.from([6,30,56,82]),new O(30,new S(5,120),new S(1,121)),new O(26,new S(9,43),new S(4,44)),new O(28,new S(17,22),new S(1,23)),new O(28,new S(2,14),new S(19,15))),new ue(19,Int32Array.from([6,30,58,86]),new O(28,new S(3,113),new S(4,114)),new O(26,new S(3,44),new S(11,45)),new O(26,new S(17,21),new S(4,22)),new O(26,new S(9,13),new S(16,14))),new ue(20,Int32Array.from([6,34,62,90]),new O(28,new S(3,107),new S(5,108)),new O(26,new S(3,41),new S(13,42)),new O(30,new S(15,24),new S(5,25)),new O(28,new S(15,15),new S(10,16))),new ue(21,Int32Array.from([6,28,50,72,94]),new O(28,new S(4,116),new S(4,117)),new O(26,new S(17,42)),new O(28,new S(17,22),new S(6,23)),new O(30,new S(19,16),new S(6,17))),new ue(22,Int32Array.from([6,26,50,74,98]),new O(28,new S(2,111),new S(7,112)),new O(28,new S(17,46)),new O(30,new S(7,24),new S(16,25)),new O(24,new S(34,13))),new ue(23,Int32Array.from([6,30,54,78,102]),new O(30,new S(4,121),new S(5,122)),new O(28,new S(4,47),new S(14,48)),new O(30,new S(11,24),new S(14,25)),new O(30,new S(16,15),new S(14,16))),new ue(24,Int32Array.from([6,28,54,80,106]),new O(30,new S(6,117),new S(4,118)),new O(28,new S(6,45),new S(14,46)),new O(30,new S(11,24),new S(16,25)),new O(30,new S(30,16),new S(2,17))),new ue(25,Int32Array.from([6,32,58,84,110]),new O(26,new S(8,106),new S(4,107)),new O(28,new S(8,47),new S(13,48)),new O(30,new S(7,24),new S(22,25)),new O(30,new S(22,15),new S(13,16))),new ue(26,Int32Array.from([6,30,58,86,114]),new O(28,new S(10,114),new S(2,115)),new O(28,new S(19,46),new S(4,47)),new O(28,new S(28,22),new S(6,23)),new O(30,new S(33,16),new S(4,17))),new ue(27,Int32Array.from([6,34,62,90,118]),new O(30,new S(8,122),new S(4,123)),new O(28,new S(22,45),new S(3,46)),new O(30,new S(8,23),new S(26,24)),new O(30,new S(12,15),new S(28,16))),new ue(28,Int32Array.from([6,26,50,74,98,122]),new O(30,new S(3,117),new S(10,118)),new O(28,new S(3,45),new S(23,46)),new O(30,new S(4,24),new S(31,25)),new O(30,new S(11,15),new S(31,16))),new ue(29,Int32Array.from([6,30,54,78,102,126]),new O(30,new S(7,116),new S(7,117)),new O(28,new S(21,45),new S(7,46)),new O(30,new S(1,23),new S(37,24)),new O(30,new S(19,15),new S(26,16))),new ue(30,Int32Array.from([6,26,52,78,104,130]),new O(30,new S(5,115),new S(10,116)),new O(28,new S(19,47),new S(10,48)),new O(30,new S(15,24),new S(25,25)),new O(30,new S(23,15),new S(25,16))),new ue(31,Int32Array.from([6,30,56,82,108,134]),new O(30,new S(13,115),new S(3,116)),new O(28,new S(2,46),new S(29,47)),new O(30,new S(42,24),new S(1,25)),new O(30,new S(23,15),new S(28,16))),new ue(32,Int32Array.from([6,34,60,86,112,138]),new O(30,new S(17,115)),new O(28,new S(10,46),new S(23,47)),new O(30,new S(10,24),new S(35,25)),new O(30,new S(19,15),new S(35,16))),new ue(33,Int32Array.from([6,30,58,86,114,142]),new O(30,new S(17,115),new S(1,116)),new O(28,new S(14,46),new S(21,47)),new O(30,new S(29,24),new S(19,25)),new O(30,new S(11,15),new S(46,16))),new ue(34,Int32Array.from([6,34,62,90,118,146]),new O(30,new S(13,115),new S(6,116)),new O(28,new S(14,46),new S(23,47)),new O(30,new S(44,24),new S(7,25)),new O(30,new S(59,16),new S(1,17))),new ue(35,Int32Array.from([6,30,54,78,102,126,150]),new O(30,new S(12,121),new S(7,122)),new O(28,new S(12,47),new S(26,48)),new O(30,new S(39,24),new S(14,25)),new O(30,new S(22,15),new S(41,16))),new ue(36,Int32Array.from([6,24,50,76,102,128,154]),new O(30,new S(6,121),new S(14,122)),new O(28,new S(6,47),new S(34,48)),new O(30,new S(46,24),new S(10,25)),new O(30,new S(2,15),new S(64,16))),new ue(37,Int32Array.from([6,28,54,80,106,132,158]),new O(30,new S(17,122),new S(4,123)),new O(28,new S(29,46),new S(14,47)),new O(30,new S(49,24),new S(10,25)),new O(30,new S(24,15),new S(46,16))),new ue(38,Int32Array.from([6,32,58,84,110,136,162]),new O(30,new S(4,122),new S(18,123)),new O(28,new S(13,46),new S(32,47)),new O(30,new S(48,24),new S(14,25)),new O(30,new S(42,15),new S(32,16))),new ue(39,Int32Array.from([6,26,54,82,110,138,166]),new O(30,new S(20,117),new S(4,118)),new O(28,new S(40,47),new S(7,48)),new O(30,new S(43,24),new S(22,25)),new O(30,new S(10,15),new S(67,16))),new ue(40,Int32Array.from([6,30,58,86,114,142,170]),new O(30,new S(19,118),new S(6,119)),new O(28,new S(18,47),new S(31,48)),new O(30,new S(34,24),new S(34,25)),new O(30,new S(20,15),new S(61,16)))];var an=function(w){return w[w.DATA_MASK_000=0]="DATA_MASK_000",w[w.DATA_MASK_001=1]="DATA_MASK_001",w[w.DATA_MASK_010=2]="DATA_MASK_010",w[w.DATA_MASK_011=3]="DATA_MASK_011",w[w.DATA_MASK_100=4]="DATA_MASK_100",w[w.DATA_MASK_101=5]="DATA_MASK_101",w[w.DATA_MASK_110=6]="DATA_MASK_110",w[w.DATA_MASK_111=7]="DATA_MASK_111",w}(an||{});class ar{constructor(s,a){this.value=s,this.isMasked=a}unmaskBitMatrix(s,a){for(let c=0;c<a;c++)for(let u=0;u<a;u++)this.isMasked(c,u)&&s.flip(u,c)}}ar.values=new Map([[an.DATA_MASK_000,new ar(an.DATA_MASK_000,(w,s)=>(w+s&1)===0)],[an.DATA_MASK_001,new ar(an.DATA_MASK_001,(w,s)=>(w&1)===0)],[an.DATA_MASK_010,new ar(an.DATA_MASK_010,(w,s)=>s%3===0)],[an.DATA_MASK_011,new ar(an.DATA_MASK_011,(w,s)=>(w+s)%3===0)],[an.DATA_MASK_100,new ar(an.DATA_MASK_100,(w,s)=>(Math.floor(w/2)+Math.floor(s/3)&1)===0)],[an.DATA_MASK_101,new ar(an.DATA_MASK_101,(w,s)=>w*s%6===0)],[an.DATA_MASK_110,new ar(an.DATA_MASK_110,(w,s)=>w*s%6<3)],[an.DATA_MASK_111,new ar(an.DATA_MASK_111,(w,s)=>(w+s+w*s%3&1)===0)]]);class n2{constructor(s){let a=s.getHeight();if(a<21||(a&3)!==1)throw new H;this.bitMatrix=s}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let s=0;for(let d=0;d<6;d++)s=this.copyBit(d,8,s);s=this.copyBit(7,8,s),s=this.copyBit(8,8,s),s=this.copyBit(8,7,s);for(let d=5;d>=0;d--)s=this.copyBit(8,d,s);let a=this.bitMatrix.getHeight(),c=0,u=a-7;for(let d=a-1;d>=u;d--)c=this.copyBit(8,d,c);for(let d=a-8;d<a;d++)c=this.copyBit(d,8,c);if(this.parsedFormatInfo=wn.decodeFormatInformation(s,c),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new H}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;let s=this.bitMatrix.getHeight(),a=Math.floor((s-17)/4);if(a<=6)return ue.getVersionForNumber(a);let c=0,u=s-11;for(let f=5;f>=0;f--)for(let p=s-9;p>=u;p--)c=this.copyBit(p,f,c);let d=ue.decodeVersionInformation(c);if(d!==null&&d.getDimensionForVersion()===s)return this.parsedVersion=d,d;c=0;for(let f=5;f>=0;f--)for(let p=s-9;p>=u;p--)c=this.copyBit(f,p,c);if(d=ue.decodeVersionInformation(c),d!==null&&d.getDimensionForVersion()===s)return this.parsedVersion=d,d;throw new H}copyBit(s,a,c){return(this.isMirror?this.bitMatrix.get(a,s):this.bitMatrix.get(s,a))?c<<1|1:c<<1}readCodewords(){let s=this.readFormatInformation(),a=this.readVersion(),c=ar.values.get(s.getDataMask()),u=this.bitMatrix.getHeight();c.unmaskBitMatrix(this.bitMatrix,u);let d=a.buildFunctionPattern(),f=!0,p=new Uint8Array(a.getTotalCodewords()),y=0,_=0,v=0;for(let I=u-1;I>0;I-=2){I===6&&I--;for(let b=0;b<u;b++){let A=f?u-1-b:b;for(let T=0;T<2;T++)d.get(I-T,A)||(v++,_<<=1,this.bitMatrix.get(I-T,A)&&(_|=1),v===8&&(p[y++]=_,v=0,_=0))}f=!f}if(y!==a.getTotalCodewords())throw new H;return p}remask(){if(this.parsedFormatInfo===null)return;let s=ar.values[this.parsedFormatInfo.getDataMask()],a=this.bitMatrix.getHeight();s.unmaskBitMatrix(this.bitMatrix,a)}setMirror(s){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=s}mirror(){let s=this.bitMatrix;for(let a=0,c=s.getWidth();a<c;a++)for(let u=a+1,d=s.getHeight();u<d;u++)s.get(a,u)!==s.get(u,a)&&(s.flip(u,a),s.flip(a,u))}}class hp{constructor(s,a){this.numDataCodewords=s,this.codewords=a}static getDataBlocks(s,a,c){if(s.length!==a.getTotalCodewords())throw new m;let u=a.getECBlocksForLevel(c),d=0,f=u.getECBlocks();for(let T of f)d+=T.getCount();let p=new Array(d),y=0;for(let T of f)for(let M=0;M<T.getCount();M++){let R=T.getDataCodewords(),k=u.getECCodewordsPerBlock()+R;p[y++]=new hp(R,new Uint8Array(k))}let _=p[0].codewords.length,v=p.length-1;for(;v>=0&&p[v].codewords.length!==_;)v--;v++;let I=_-u.getECCodewordsPerBlock(),b=0;for(let T=0;T<I;T++)for(let M=0;M<y;M++)p[M].codewords[T]=s[b++];for(let T=v;T<y;T++)p[T].codewords[I]=s[b++];let A=p[0].codewords.length;for(let T=I;T<A;T++)for(let M=0;M<y;M++){let R=M<v?T:T+1;p[M].codewords[R]=s[b++]}return p}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Dr=function(w){return w[w.TERMINATOR=0]="TERMINATOR",w[w.NUMERIC=1]="NUMERIC",w[w.ALPHANUMERIC=2]="ALPHANUMERIC",w[w.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",w[w.BYTE=4]="BYTE",w[w.ECI=5]="ECI",w[w.KANJI=6]="KANJI",w[w.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",w[w.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",w[w.HANZI=9]="HANZI",w}(Dr||{});class me{constructor(s,a,c,u){this.value=s,this.stringValue=a,this.characterCountBitsForVersions=c,this.bits=u,me.FOR_BITS.set(u,this),me.FOR_VALUE.set(s,this)}static forBits(s){let a=me.FOR_BITS.get(s);if(a===void 0)throw new m;return a}getCharacterCountBits(s){let a=s.getVersionNumber(),c;return a<=9?c=0:a<=26?c=1:c=2,this.characterCountBitsForVersions[c]}getValue(){return this.value}getBits(){return this.bits}equals(s){if(!(s instanceof me))return!1;let a=s;return this.value===a.value}toString(){return this.stringValue}}me.FOR_BITS=new Map,me.FOR_VALUE=new Map,me.TERMINATOR=new me(Dr.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),me.NUMERIC=new me(Dr.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),me.ALPHANUMERIC=new me(Dr.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),me.STRUCTURED_APPEND=new me(Dr.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),me.BYTE=new me(Dr.BYTE,"BYTE",Int32Array.from([8,16,16]),4),me.ECI=new me(Dr.ECI,"ECI",Int32Array.from([0,0,0]),7),me.KANJI=new me(Dr.KANJI,"KANJI",Int32Array.from([8,10,12]),8),me.FNC1_FIRST_POSITION=new me(Dr.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),me.FNC1_SECOND_POSITION=new me(Dr.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),me.HANZI=new me(Dr.HANZI,"HANZI",Int32Array.from([8,10,12]),13);let uw=(()=>{class w{static decode(a,c,u,d){let f=new fp(a),p=new yt,y=new Array,_=-1,v=-1;try{let I=null,b=!1,A;do{if(f.available()<4)A=me.TERMINATOR;else{let T=f.readBits(4);A=me.forBits(T)}switch(A){case me.TERMINATOR:break;case me.FNC1_FIRST_POSITION:case me.FNC1_SECOND_POSITION:b=!0;break;case me.STRUCTURED_APPEND:if(f.available()<16)throw new H;_=f.readBits(8),v=f.readBits(8);break;case me.ECI:let T=w.parseECIValue(f);if(I=G.getCharacterSetECIByValue(T),I===null)throw new H;break;case me.HANZI:let M=f.readBits(4),R=f.readBits(A.getCharacterCountBits(c));M===w.GB2312_SUBSET&&w.decodeHanziSegment(f,p,R);break;default:let k=f.readBits(A.getCharacterCountBits(c));switch(A){case me.NUMERIC:w.decodeNumericSegment(f,p,k);break;case me.ALPHANUMERIC:w.decodeAlphanumericSegment(f,p,k,b);break;case me.BYTE:w.decodeByteSegment(f,p,k,I,y,d);break;case me.KANJI:w.decodeKanjiSegment(f,p,k);break;default:throw new H}break}}while(A!==me.TERMINATOR)}catch{throw new H}return new Ka(a,p.toString(),y.length===0?null:y,u===null?null:u.toString(),_,v)}static decodeHanziSegment(a,c,u){if(u*13>a.available())throw new H;let d=new Uint8Array(2*u),f=0;for(;u>0;){let p=a.readBits(13),y=p/96<<8&4294967295|p%96;y<959?y+=41377:y+=42657,d[f]=y>>8&255,d[f+1]=y&255,f+=2,u--}try{c.append(Ut.decode(d,Ce.GB2312))}catch(p){throw new H(p)}}static decodeKanjiSegment(a,c,u){if(u*13>a.available())throw new H;let d=new Uint8Array(2*u),f=0;for(;u>0;){let p=a.readBits(13),y=p/192<<8&4294967295|p%192;y<7936?y+=33088:y+=49472,d[f]=y>>8,d[f+1]=y,f+=2,u--}try{c.append(Ut.decode(d,Ce.SHIFT_JIS))}catch(p){throw new H(p)}}static decodeByteSegment(a,c,u,d,f,p){if(8*u>a.available())throw new H;let y=new Uint8Array(u);for(let v=0;v<u;v++)y[v]=a.readBits(8);let _;d===null?_=Ce.guessEncoding(y,p):_=d.getName();try{c.append(Ut.decode(y,_))}catch(v){throw new H(v)}f.push(y)}static toAlphaNumericChar(a){if(a>=w.ALPHANUMERIC_CHARS.length)throw new H;return w.ALPHANUMERIC_CHARS[a]}static decodeAlphanumericSegment(a,c,u,d){let f=c.length();for(;u>1;){if(a.available()<11)throw new H;let p=a.readBits(11);c.append(w.toAlphaNumericChar(Math.floor(p/45))),c.append(w.toAlphaNumericChar(p%45)),u-=2}if(u===1){if(a.available()<6)throw new H;c.append(w.toAlphaNumericChar(a.readBits(6)))}if(d)for(let p=f;p<c.length();p++)c.charAt(p)==="%"&&(p<c.length()-1&&c.charAt(p+1)==="%"?c.deleteCharAt(p+1):c.setCharAt(p,""))}static decodeNumericSegment(a,c,u){for(;u>=3;){if(a.available()<10)throw new H;let d=a.readBits(10);if(d>=1e3)throw new H;c.append(w.toAlphaNumericChar(Math.floor(d/100))),c.append(w.toAlphaNumericChar(Math.floor(d/10)%10)),c.append(w.toAlphaNumericChar(d%10)),u-=3}if(u===2){if(a.available()<7)throw new H;let d=a.readBits(7);if(d>=100)throw new H;c.append(w.toAlphaNumericChar(Math.floor(d/10))),c.append(w.toAlphaNumericChar(d%10))}else if(u===1){if(a.available()<4)throw new H;let d=a.readBits(4);if(d>=10)throw new H;c.append(w.toAlphaNumericChar(d))}}static parseECIValue(a){let c=a.readBits(8);if(!(c&128))return c&127;if((c&192)===128){let u=a.readBits(8);return(c&63)<<8&4294967295|u}if((c&224)===192){let u=a.readBits(16);return(c&31)<<16&4294967295|u}throw new H}}return w.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",w.GB2312_SUBSET=1,w})();class dw{constructor(s){this.mirrored=s}isMirrored(){return this.mirrored}applyMirroredCorrection(s){if(!this.mirrored||s===null||s.length<3)return;let a=s[0];s[0]=s[2],s[2]=a}}class r2{constructor(){this.rsDecoder=new tc(it.QR_CODE_FIELD_256)}decodeBooleanArray(s,a){return this.decodeBitMatrix(en.parseFromBooleanArray(s),a)}decodeBitMatrix(s,a){let c=new n2(s),u=null;try{return this.decodeBitMatrixParser(c,a)}catch(d){u=d}try{c.remask(),c.setMirror(!0),c.readVersion(),c.readFormatInformation(),c.mirror();let d=this.decodeBitMatrixParser(c,a);return d.setOther(new dw(!0)),d}catch(d){throw u!==null?u:d}}decodeBitMatrixParser(s,a){let c=s.readVersion(),u=s.readFormatInformation().getErrorCorrectionLevel(),d=s.readCodewords(),f=hp.getDataBlocks(d,c,u),p=0;for(let v of f)p+=v.getNumDataCodewords();let y=new Uint8Array(p),_=0;for(let v of f){let I=v.getCodewords(),b=v.getNumDataCodewords();this.correctErrors(I,b);for(let A=0;A<b;A++)y[_++]=I[A]}return uw.decode(y,c,u,a)}correctErrors(s,a){let c=new Int32Array(s);try{this.rsDecoder.decode(c,s.length-a)}catch{throw new E}for(let u=0;u<a;u++)s[u]=c[u]}}class pp extends se{constructor(s,a,c){super(s,a),this.estimatedModuleSize=c}aboutEquals(s,a,c){if(Math.abs(a-this.getY())<=s&&Math.abs(c-this.getX())<=s){let u=Math.abs(s-this.estimatedModuleSize);return u<=1||u<=this.estimatedModuleSize}return!1}combineEstimate(s,a,c){let u=(this.getX()+a)/2,d=(this.getY()+s)/2,f=(this.estimatedModuleSize+c)/2;return new pp(u,d,f)}}class _u{constructor(s,a,c,u,d,f,p){this.image=s,this.startX=a,this.startY=c,this.width=u,this.height=d,this.moduleSize=f,this.resultPointCallback=p,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){let s=this.startX,a=this.height,c=this.width,u=s+c,d=this.startY+a/2,f=new Int32Array(3),p=this.image;for(let y=0;y<a;y++){let _=d+(y&1?-Math.floor((y+1)/2):Math.floor((y+1)/2));f[0]=0,f[1]=0,f[2]=0;let v=s;for(;v<u&&!p.get(v,_);)v++;let I=0;for(;v<u;){if(p.get(v,_))if(I===1)f[1]++;else if(I===2){if(this.foundPatternCross(f)){let b=this.handlePossibleCenter(f,_,v);if(b!==null)return b}f[0]=f[2],f[1]=1,f[2]=0,I=1}else f[++I]++;else I===1&&I++,f[I]++;v++}if(this.foundPatternCross(f)){let b=this.handlePossibleCenter(f,_,u);if(b!==null)return b}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new V}static centerFromEnd(s,a){return a-s[2]-s[1]/2}foundPatternCross(s){let a=this.moduleSize,c=a/2;for(let u=0;u<3;u++)if(Math.abs(a-s[u])>=c)return!1;return!0}crossCheckVertical(s,a,c,u){let d=this.image,f=d.getHeight(),p=this.crossCheckStateCount;p[0]=0,p[1]=0,p[2]=0;let y=s;for(;y>=0&&d.get(a,y)&&p[1]<=c;)p[1]++,y--;if(y<0||p[1]>c)return NaN;for(;y>=0&&!d.get(a,y)&&p[0]<=c;)p[0]++,y--;if(p[0]>c)return NaN;for(y=s+1;y<f&&d.get(a,y)&&p[1]<=c;)p[1]++,y++;if(y===f||p[1]>c)return NaN;for(;y<f&&!d.get(a,y)&&p[2]<=c;)p[2]++,y++;if(p[2]>c)return NaN;let _=p[0]+p[1]+p[2];return 5*Math.abs(_-u)>=2*u?NaN:this.foundPatternCross(p)?_u.centerFromEnd(p,y):NaN}handlePossibleCenter(s,a,c){let u=s[0]+s[1]+s[2],d=_u.centerFromEnd(s,c),f=this.crossCheckVertical(a,d,2*s[1],u);if(!isNaN(f)){let p=(s[0]+s[1]+s[2])/3;for(let _ of this.possibleCenters)if(_.aboutEquals(p,f,d))return _.combineEstimate(f,d,p);let y=new pp(d,f,p);this.possibleCenters.push(y),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(y)}return null}}class gp extends se{constructor(s,a,c,u){super(s,a),this.estimatedModuleSize=c,this.count=u,u===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(s,a,c){if(Math.abs(a-this.getY())<=s&&Math.abs(c-this.getX())<=s){let u=Math.abs(s-this.estimatedModuleSize);return u<=1||u<=this.estimatedModuleSize}return!1}combineEstimate(s,a,c){let u=this.count+1,d=(this.count*this.getX()+a)/u,f=(this.count*this.getY()+s)/u,p=(this.count*this.estimatedModuleSize+c)/u;return new gp(d,f,p,u)}}class i2{constructor(s){this.bottomLeft=s[0],this.topLeft=s[1],this.topRight=s[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}let o2=(()=>{class w{constructor(a,c){this.image=a,this.resultPointCallback=c,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=c}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(a){let c=a!=null&&a.get(he.TRY_HARDER)!==void 0,u=a!=null&&a.get(he.PURE_BARCODE)!==void 0,d=this.image,f=d.getHeight(),p=d.getWidth(),y=Math.floor(3*f/(4*w.MAX_MODULES));(y<w.MIN_SKIP||c)&&(y=w.MIN_SKIP);let _=!1,v=new Int32Array(5);for(let b=y-1;b<f&&!_;b+=y){v[0]=0,v[1]=0,v[2]=0,v[3]=0,v[4]=0;let A=0;for(let T=0;T<p;T++)if(d.get(T,b))(A&1)===1&&A++,v[A]++;else if(A&1)v[A]++;else if(A===4)if(w.foundPatternCross(v)){if(this.handlePossibleCenter(v,b,T,u)===!0)if(y=2,this.hasSkipped===!0)_=this.haveMultiplyConfirmedCenters();else{let R=this.findRowSkip();R>v[2]&&(b+=R-v[2]-y,T=p-1)}else{v[0]=v[2],v[1]=v[3],v[2]=v[4],v[3]=1,v[4]=0,A=3;continue}A=0,v[0]=0,v[1]=0,v[2]=0,v[3]=0,v[4]=0}else v[0]=v[2],v[1]=v[3],v[2]=v[4],v[3]=1,v[4]=0,A=3;else v[++A]++;w.foundPatternCross(v)&&this.handlePossibleCenter(v,b,p,u)===!0&&(y=v[0],this.hasSkipped&&(_=this.haveMultiplyConfirmedCenters()))}let I=this.selectBestPatterns();return se.orderBestPatterns(I),new i2(I)}static centerFromEnd(a,c){return c-a[4]-a[3]-a[2]/2}static foundPatternCross(a){let c=0;for(let f=0;f<5;f++){let p=a[f];if(p===0)return!1;c+=p}if(c<7)return!1;let u=c/7,d=u/2;return Math.abs(u-a[0])<d&&Math.abs(u-a[1])<d&&Math.abs(3*u-a[2])<3*d&&Math.abs(u-a[3])<d&&Math.abs(u-a[4])<d}getCrossCheckStateCount(){let a=this.crossCheckStateCount;return a[0]=0,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a}crossCheckDiagonal(a,c,u,d){let f=this.getCrossCheckStateCount(),p=0,y=this.image;for(;a>=p&&c>=p&&y.get(c-p,a-p);)f[2]++,p++;if(a<p||c<p)return!1;for(;a>=p&&c>=p&&!y.get(c-p,a-p)&&f[1]<=u;)f[1]++,p++;if(a<p||c<p||f[1]>u)return!1;for(;a>=p&&c>=p&&y.get(c-p,a-p)&&f[0]<=u;)f[0]++,p++;if(f[0]>u)return!1;let _=y.getHeight(),v=y.getWidth();for(p=1;a+p<_&&c+p<v&&y.get(c+p,a+p);)f[2]++,p++;if(a+p>=_||c+p>=v)return!1;for(;a+p<_&&c+p<v&&!y.get(c+p,a+p)&&f[3]<u;)f[3]++,p++;if(a+p>=_||c+p>=v||f[3]>=u)return!1;for(;a+p<_&&c+p<v&&y.get(c+p,a+p)&&f[4]<u;)f[4]++,p++;if(f[4]>=u)return!1;let I=f[0]+f[1]+f[2]+f[3]+f[4];return Math.abs(I-d)<2*d&&w.foundPatternCross(f)}crossCheckVertical(a,c,u,d){let f=this.image,p=f.getHeight(),y=this.getCrossCheckStateCount(),_=a;for(;_>=0&&f.get(c,_);)y[2]++,_--;if(_<0)return NaN;for(;_>=0&&!f.get(c,_)&&y[1]<=u;)y[1]++,_--;if(_<0||y[1]>u)return NaN;for(;_>=0&&f.get(c,_)&&y[0]<=u;)y[0]++,_--;if(y[0]>u)return NaN;for(_=a+1;_<p&&f.get(c,_);)y[2]++,_++;if(_===p)return NaN;for(;_<p&&!f.get(c,_)&&y[3]<u;)y[3]++,_++;if(_===p||y[3]>=u)return NaN;for(;_<p&&f.get(c,_)&&y[4]<u;)y[4]++,_++;if(y[4]>=u)return NaN;let v=y[0]+y[1]+y[2]+y[3]+y[4];return 5*Math.abs(v-d)>=2*d?NaN:w.foundPatternCross(y)?w.centerFromEnd(y,_):NaN}crossCheckHorizontal(a,c,u,d){let f=this.image,p=f.getWidth(),y=this.getCrossCheckStateCount(),_=a;for(;_>=0&&f.get(_,c);)y[2]++,_--;if(_<0)return NaN;for(;_>=0&&!f.get(_,c)&&y[1]<=u;)y[1]++,_--;if(_<0||y[1]>u)return NaN;for(;_>=0&&f.get(_,c)&&y[0]<=u;)y[0]++,_--;if(y[0]>u)return NaN;for(_=a+1;_<p&&f.get(_,c);)y[2]++,_++;if(_===p)return NaN;for(;_<p&&!f.get(_,c)&&y[3]<u;)y[3]++,_++;if(_===p||y[3]>=u)return NaN;for(;_<p&&f.get(_,c)&&y[4]<u;)y[4]++,_++;if(y[4]>=u)return NaN;let v=y[0]+y[1]+y[2]+y[3]+y[4];return 5*Math.abs(v-d)>=d?NaN:w.foundPatternCross(y)?w.centerFromEnd(y,_):NaN}handlePossibleCenter(a,c,u,d){let f=a[0]+a[1]+a[2]+a[3]+a[4],p=w.centerFromEnd(a,u),y=this.crossCheckVertical(c,Math.floor(p),a[2],f);if(!isNaN(y)&&(p=this.crossCheckHorizontal(Math.floor(p),Math.floor(y),a[2],f),!isNaN(p)&&(!d||this.crossCheckDiagonal(Math.floor(y),Math.floor(p),a[2],f)))){let _=f/7,v=!1,I=this.possibleCenters;for(let b=0,A=I.length;b<A;b++){let T=I[b];if(T.aboutEquals(_,y,p)){I[b]=T.combineEstimate(y,p,_),v=!0;break}}if(!v){let b=new gp(p,y,_);I.push(b),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(b)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let c=null;for(let u of this.possibleCenters)if(u.getCount()>=w.CENTER_QUORUM)if(c==null)c=u;else return this.hasSkipped=!0,Math.floor((Math.abs(c.getX()-u.getX())-Math.abs(c.getY()-u.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let a=0,c=0,u=this.possibleCenters.length;for(let p of this.possibleCenters)p.getCount()>=w.CENTER_QUORUM&&(a++,c+=p.getEstimatedModuleSize());if(a<3)return!1;let d=c/u,f=0;for(let p of this.possibleCenters)f+=Math.abs(p.getEstimatedModuleSize()-d);return f<=.05*c}selectBestPatterns(){let a=this.possibleCenters.length;if(a<3)throw new V;let c=this.possibleCenters,u;if(a>3){let d=0,f=0;for(let _ of this.possibleCenters){let v=_.getEstimatedModuleSize();d+=v,f+=v*v}u=d/a;let p=Math.sqrt(f/a-u*u);c.sort((_,v)=>{let I=Math.abs(v.getEstimatedModuleSize()-u),b=Math.abs(_.getEstimatedModuleSize()-u);return I<b?-1:I>b?1:0});let y=Math.max(.2*u,p);for(let _=0;_<c.length&&c.length>3;_++){let v=c[_];Math.abs(v.getEstimatedModuleSize()-u)>y&&(c.splice(_,1),_--)}}if(c.length>3){let d=0;for(let f of c)d+=f.getEstimatedModuleSize();u=d/c.length,c.sort((f,p)=>{if(p.getCount()===f.getCount()){let y=Math.abs(p.getEstimatedModuleSize()-u),_=Math.abs(f.getEstimatedModuleSize()-u);return y<_?1:y>_?-1:0}else return p.getCount()-f.getCount()}),c.splice(3)}return[c[0],c[1],c[2]]}}return w.CENTER_QUORUM=2,w.MIN_SKIP=3,w.MAX_MODULES=57,w})();class ic{constructor(s){this.image=s}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(s){this.resultPointCallback=s==null?null:s.get(he.NEED_RESULT_POINT_CALLBACK);let c=new o2(this.image,this.resultPointCallback).find(s);return this.processFinderPatternInfo(c)}processFinderPatternInfo(s){let a=s.getTopLeft(),c=s.getTopRight(),u=s.getBottomLeft(),d=this.calculateModuleSize(a,c,u);if(d<1)throw new V("No pattern found in proccess finder.");let f=ic.computeDimension(a,c,u,d),p=ue.getProvisionalVersionForDimension(f),y=p.getDimensionForVersion()-7,_=null;if(p.getAlignmentPatternCenters().length>0){let A=c.getX()-a.getX()+u.getX(),T=c.getY()-a.getY()+u.getY(),M=1-3/y,R=Math.floor(a.getX()+M*(A-a.getX())),k=Math.floor(a.getY()+M*(T-a.getY()));for(let q=4;q<=16;q<<=1)try{_=this.findAlignmentInRegion(d,R,k,q);break}catch(Q){if(!(Q instanceof V))throw Q}}let v=ic.createTransform(a,c,u,_,f),I=ic.sampleGrid(this.image,v,f),b;return _===null?b=[u,a,c]:b=[u,a,c,_],new du(I,b)}static createTransform(s,a,c,u,d){let f=d-3.5,p,y,_,v;return u!==null?(p=u.getX(),y=u.getY(),_=f-3,v=_):(p=a.getX()-s.getX()+c.getX(),y=a.getY()-s.getY()+c.getY(),_=f,v=f),br.quadrilateralToQuadrilateral(3.5,3.5,f,3.5,_,v,3.5,f,s.getX(),s.getY(),a.getX(),a.getY(),p,y,c.getX(),c.getY())}static sampleGrid(s,a,c){return Gi.getInstance().sampleGridWithTransform(s,c,c,a)}static computeDimension(s,a,c,u){let d=Je.round(se.distance(s,a)/u),f=Je.round(se.distance(s,c)/u),p=Math.floor((d+f)/2)+7;switch(p&3){case 0:p++;break;case 2:p--;break;case 3:throw new V("Dimensions could be not found.")}return p}calculateModuleSize(s,a,c){return(this.calculateModuleSizeOneWay(s,a)+this.calculateModuleSizeOneWay(s,c))/2}calculateModuleSizeOneWay(s,a){let c=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(s.getX()),Math.floor(s.getY()),Math.floor(a.getX()),Math.floor(a.getY())),u=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(a.getX()),Math.floor(a.getY()),Math.floor(s.getX()),Math.floor(s.getY()));return isNaN(c)?u/7:isNaN(u)?c/7:(c+u)/14}sizeOfBlackWhiteBlackRunBothWays(s,a,c,u){let d=this.sizeOfBlackWhiteBlackRun(s,a,c,u),f=1,p=s-(c-s);p<0?(f=s/(s-p),p=0):p>=this.image.getWidth()&&(f=(this.image.getWidth()-1-s)/(p-s),p=this.image.getWidth()-1);let y=Math.floor(a-(u-a)*f);return f=1,y<0?(f=a/(a-y),y=0):y>=this.image.getHeight()&&(f=(this.image.getHeight()-1-a)/(y-a),y=this.image.getHeight()-1),p=Math.floor(s+(p-s)*f),d+=this.sizeOfBlackWhiteBlackRun(s,a,p,y),d-1}sizeOfBlackWhiteBlackRun(s,a,c,u){let d=Math.abs(u-a)>Math.abs(c-s);if(d){let A=s;s=a,a=A,A=c,c=u,u=A}let f=Math.abs(c-s),p=Math.abs(u-a),y=-f/2,_=s<c?1:-1,v=a<u?1:-1,I=0,b=c+_;for(let A=s,T=a;A!==b;A+=_){let M=d?T:A,R=d?A:T;if(I===1===this.image.get(M,R)){if(I===2)return Je.distance(A,T,s,a);I++}if(y+=p,y>0){if(T===u)break;T+=v,y-=f}}return I===2?Je.distance(c+_,u,s,a):NaN}findAlignmentInRegion(s,a,c,u){let d=Math.floor(u*s),f=Math.max(0,a-d),p=Math.min(this.image.getWidth()-1,a+d);if(p-f<s*3)throw new V("Alignment top exceeds estimated module size.");let y=Math.max(0,c-d),_=Math.min(this.image.getHeight()-1,c+d);if(_-y<s*3)throw new V("Alignment bottom exceeds estimated module size.");return new _u(this.image,f,y,p-f,_-y,s,this.resultPointCallback).find()}}class Zi{constructor(){this.decoder=new r2}getDecoder(){return this.decoder}decode(s,a){let c,u;if(a!=null&&a.get(he.PURE_BARCODE)!==void 0){let y=Zi.extractPureBits(s.getBlackMatrix());c=this.decoder.decodeBitMatrix(y,a),u=Zi.NO_POINTS}else{let y=new ic(s.getBlackMatrix()).detect(a);c=this.decoder.decodeBitMatrix(y.getBits(),a),u=y.getPoints()}c.getOther()instanceof dw&&c.getOther().applyMirroredCorrection(u);let d=new Dn(c.getText(),c.getRawBytes(),void 0,u,ye.QR_CODE,void 0),f=c.getByteSegments();f!==null&&d.putMetadata(nn.BYTE_SEGMENTS,f);let p=c.getECLevel();return p!==null&&d.putMetadata(nn.ERROR_CORRECTION_LEVEL,p),c.hasStructuredAppend()&&(d.putMetadata(nn.STRUCTURED_APPEND_SEQUENCE,c.getStructuredAppendSequenceNumber()),d.putMetadata(nn.STRUCTURED_APPEND_PARITY,c.getStructuredAppendParity())),d}reset(){}static extractPureBits(s){let a=s.getTopLeftOnBit(),c=s.getBottomRightOnBit();if(a===null||c===null)throw new V;let u=this.moduleSize(a,s),d=a[1],f=c[1],p=a[0],y=c[0];if(p>=y||d>=f)throw new V;if(f-d!==y-p&&(y=p+(f-d),y>=s.getWidth()))throw new V;let _=Math.round((y-p+1)/u),v=Math.round((f-d+1)/u);if(_<=0||v<=0)throw new V;if(v!==_)throw new V;let I=Math.floor(u/2);d+=I,p+=I;let b=p+Math.floor((_-1)*u)-y;if(b>0){if(b>I)throw new V;p-=b}let A=d+Math.floor((v-1)*u)-f;if(A>0){if(A>I)throw new V;d-=A}let T=new en(_,v);for(let M=0;M<v;M++){let R=d+Math.floor(M*u);for(let k=0;k<_;k++)s.get(p+Math.floor(k*u),R)&&T.set(k,M)}return T}static moduleSize(s,a){let c=a.getHeight(),u=a.getWidth(),d=s[0],f=s[1],p=!0,y=0;for(;d<u&&f<c;){if(p!==a.get(d,f)){if(++y===5)break;p=!p}d++,f++}if(d===u||f===c)throw new V;return(d-s[0])/7}}Zi.NO_POINTS=new Array;class ve{PDF417Common(){}static getBitCountSum(s){return Je.sum(s)}static toIntArray(s){if(s==null||!s.length)return ve.EMPTY_INT_ARRAY;let a=new Int32Array(s.length),c=0;for(let u of s)a[c++]=u;return a}static getCodeword(s){let a=$.binarySearch(ve.SYMBOL_TABLE,s&262143);return a<0?-1:(ve.CODEWORD_TABLE[a]-1)%ve.NUMBER_OF_CODEWORDS}}ve.NUMBER_OF_CODEWORDS=929,ve.MAX_CODEWORDS_IN_BARCODE=ve.NUMBER_OF_CODEWORDS-1,ve.MIN_ROWS_IN_BARCODE=3,ve.MAX_ROWS_IN_BARCODE=90,ve.MODULES_IN_CODEWORD=17,ve.MODULES_IN_STOP_PATTERN=18,ve.BARS_IN_MODULE=8,ve.EMPTY_INT_ARRAY=new Int32Array([]),ve.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),ve.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class s2{constructor(s,a){this.bits=s,this.points=a}getBits(){return this.bits}getPoints(){return this.points}}class Re{static detectMultiple(s,a,c){let u=s.getBlackMatrix(),d=Re.detect(c,u);return d.length||(u=u.clone(),u.rotate180(),d=Re.detect(c,u)),new s2(u,d)}static detect(s,a){let c=new Array,u=0,d=0,f=!1;for(;u<a.getHeight();){let p=Re.findVertices(a,u,d);if(p[0]==null&&p[3]==null){if(!f)break;f=!1,d=0;for(let y of c)y[1]!=null&&(u=Math.trunc(Math.max(u,y[1].getY()))),y[3]!=null&&(u=Math.max(u,Math.trunc(y[3].getY())));u+=Re.ROW_STEP;continue}if(f=!0,c.push(p),!s)break;p[2]!=null?(d=Math.trunc(p[2].getX()),u=Math.trunc(p[2].getY())):(d=Math.trunc(p[4].getX()),u=Math.trunc(p[4].getY()))}return c}static findVertices(s,a,c){let u=s.getHeight(),d=s.getWidth(),f=new Array(8);return Re.copyToResult(f,Re.findRowsWithPattern(s,u,d,a,c,Re.START_PATTERN),Re.INDEXES_START_PATTERN),f[4]!=null&&(c=Math.trunc(f[4].getX()),a=Math.trunc(f[4].getY())),Re.copyToResult(f,Re.findRowsWithPattern(s,u,d,a,c,Re.STOP_PATTERN),Re.INDEXES_STOP_PATTERN),f}static copyToResult(s,a,c){for(let u=0;u<c.length;u++)s[c[u]]=a[u]}static findRowsWithPattern(s,a,c,u,d,f){let p=new Array(4),y=!1,_=new Int32Array(f.length);for(;u<a;u+=Re.ROW_STEP){let I=Re.findGuardPattern(s,d,u,c,!1,f,_);if(I!=null){for(;u>0;){let b=Re.findGuardPattern(s,d,--u,c,!1,f,_);if(b!=null)I=b;else{u++;break}}p[0]=new se(I[0],u),p[1]=new se(I[1],u),y=!0;break}}let v=u+1;if(y){let I=0,b=Int32Array.from([Math.trunc(p[0].getX()),Math.trunc(p[1].getX())]);for(;v<a;v++){let A=Re.findGuardPattern(s,b[0],v,c,!1,f,_);if(A!=null&&Math.abs(b[0]-A[0])<Re.MAX_PATTERN_DRIFT&&Math.abs(b[1]-A[1])<Re.MAX_PATTERN_DRIFT)b=A,I=0;else{if(I>Re.SKIPPED_ROW_COUNT_MAX)break;I++}}v-=I+1,p[2]=new se(b[0],v),p[3]=new se(b[1],v)}return v-u<Re.BARCODE_MIN_HEIGHT&&$.fill(p,null),p}static findGuardPattern(s,a,c,u,d,f,p){$.fillWithin(p,0,p.length,0);let y=a,_=0;for(;s.get(y,c)&&y>0&&_++<Re.MAX_PIXEL_DRIFT;)y--;let v=y,I=0,b=f.length;for(let A=d;v<u;v++)if(s.get(v,c)!==A)p[I]++;else{if(I===b-1){if(Re.patternMatchVariance(p,f,Re.MAX_INDIVIDUAL_VARIANCE)<Re.MAX_AVG_VARIANCE)return new Int32Array([y,v]);y+=p[0]+p[1],D.arraycopy(p,2,p,0,I-1),p[I-1]=0,p[I]=0,I--}else I++;p[I]=1,A=!A}return I===b-1&&Re.patternMatchVariance(p,f,Re.MAX_INDIVIDUAL_VARIANCE)<Re.MAX_AVG_VARIANCE?new Int32Array([y,v-1]):null}static patternMatchVariance(s,a,c){let u=s.length,d=0,f=0;for(let _=0;_<u;_++)d+=s[_],f+=a[_];if(d<f)return 1/0;let p=d/f;c*=p;let y=0;for(let _=0;_<u;_++){let v=s[_],I=a[_]*p,b=v>I?v-I:I-v;if(b>c)return 1/0;y+=b}return y/d}}Re.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),Re.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),Re.MAX_AVG_VARIANCE=.42,Re.MAX_INDIVIDUAL_VARIANCE=.8,Re.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),Re.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),Re.MAX_PIXEL_DRIFT=3,Re.MAX_PATTERN_DRIFT=5,Re.SKIPPED_ROW_COUNT_MAX=25,Re.ROW_STEP=5,Re.BARCODE_MIN_HEIGHT=10;class cn{constructor(s,a){if(a.length===0)throw new m;this.field=s;let c=a.length;if(c>1&&a[0]===0){let u=1;for(;u<c&&a[u]===0;)u++;u===c?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(c-u),D.arraycopy(a,u,this.coefficients,0,this.coefficients.length))}else this.coefficients=a}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(s){return this.coefficients[this.coefficients.length-1-s]}evaluateAt(s){if(s===0)return this.getCoefficient(0);if(s===1){let u=0;for(let d of this.coefficients)u=this.field.add(u,d);return u}let a=this.coefficients[0],c=this.coefficients.length;for(let u=1;u<c;u++)a=this.field.add(this.field.multiply(s,a),this.coefficients[u]);return a}add(s){if(!this.field.equals(s.field))throw new m("ModulusPolys do not have same ModulusGF field");if(this.isZero())return s;if(s.isZero())return this;let a=this.coefficients,c=s.coefficients;if(a.length>c.length){let f=a;a=c,c=f}let u=new Int32Array(c.length),d=c.length-a.length;D.arraycopy(c,0,u,0,d);for(let f=d;f<c.length;f++)u[f]=this.field.add(a[f-d],c[f]);return new cn(this.field,u)}subtract(s){if(!this.field.equals(s.field))throw new m("ModulusPolys do not have same ModulusGF field");return s.isZero()?this:this.add(s.negative())}multiply(s){return s instanceof cn?this.multiplyOther(s):this.multiplyScalar(s)}multiplyOther(s){if(!this.field.equals(s.field))throw new m("ModulusPolys do not have same ModulusGF field");if(this.isZero()||s.isZero())return new cn(this.field,new Int32Array([0]));let a=this.coefficients,c=a.length,u=s.coefficients,d=u.length,f=new Int32Array(c+d-1);for(let p=0;p<c;p++){let y=a[p];for(let _=0;_<d;_++)f[p+_]=this.field.add(f[p+_],this.field.multiply(y,u[_]))}return new cn(this.field,f)}negative(){let s=this.coefficients.length,a=new Int32Array(s);for(let c=0;c<s;c++)a[c]=this.field.subtract(0,this.coefficients[c]);return new cn(this.field,a)}multiplyScalar(s){if(s===0)return new cn(this.field,new Int32Array([0]));if(s===1)return this;let a=this.coefficients.length,c=new Int32Array(a);for(let u=0;u<a;u++)c[u]=this.field.multiply(this.coefficients[u],s);return new cn(this.field,c)}multiplyByMonomial(s,a){if(s<0)throw new m;if(a===0)return new cn(this.field,new Int32Array([0]));let c=this.coefficients.length,u=new Int32Array(c+s);for(let d=0;d<c;d++)u[d]=this.field.multiply(this.coefficients[d],a);return new cn(this.field,u)}toString(){let s=new yt;for(let a=this.getDegree();a>=0;a--){let c=this.getCoefficient(a);c!==0&&(c<0?(s.append(" - "),c=-c):s.length()>0&&s.append(" + "),(a===0||c!==1)&&s.append(c),a!==0&&(a===1?s.append("x"):(s.append("x^"),s.append(a))))}return s.toString()}}class a2{add(s,a){return(s+a)%this.modulus}subtract(s,a){return(this.modulus+s-a)%this.modulus}exp(s){return this.expTable[s]}log(s){if(s===0)throw new m;return this.logTable[s]}inverse(s){if(s===0)throw new tp;return this.expTable[this.modulus-this.logTable[s]-1]}multiply(s,a){return s===0||a===0?0:this.expTable[(this.logTable[s]+this.logTable[a])%(this.modulus-1)]}getSize(){return this.modulus}equals(s){return s===this}}class mp extends a2{constructor(s,a){super(),this.modulus=s,this.expTable=new Int32Array(s),this.logTable=new Int32Array(s);let c=1;for(let u=0;u<s;u++)this.expTable[u]=c,c=c*a%s;for(let u=0;u<s-1;u++)this.logTable[this.expTable[u]]=u;this.zero=new cn(this,new Int32Array([0])),this.one=new cn(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(s,a){if(s<0)throw new m;if(a===0)return this.zero;let c=new Int32Array(s+1);return c[0]=a,new cn(this,c)}}mp.PDF417_GF=new mp(ve.NUMBER_OF_CODEWORDS,3);class fw{constructor(){this.field=mp.PDF417_GF}decode(s,a,c){let u=new cn(this.field,s),d=new Int32Array(a),f=!1;for(let T=a;T>0;T--){let M=u.evaluateAt(this.field.exp(T));d[a-T]=M,M!==0&&(f=!0)}if(!f)return 0;let p=this.field.getOne();if(c!=null)for(let T of c){let M=this.field.exp(s.length-1-T),R=new cn(this.field,new Int32Array([this.field.subtract(0,M),1]));p=p.multiply(R)}let y=new cn(this.field,d),_=this.runEuclideanAlgorithm(this.field.buildMonomial(a,1),y,a),v=_[0],I=_[1],b=this.findErrorLocations(v),A=this.findErrorMagnitudes(I,v,b);for(let T=0;T<b.length;T++){let M=s.length-1-this.field.log(b[T]);if(M<0)throw E.getChecksumInstance();s[M]=this.field.subtract(s[M],A[T])}return b.length}runEuclideanAlgorithm(s,a,c){if(s.getDegree()<a.getDegree()){let b=s;s=a,a=b}let u=s,d=a,f=this.field.getZero(),p=this.field.getOne();for(;d.getDegree()>=Math.round(c/2);){let b=u,A=f;if(u=d,f=p,u.isZero())throw E.getChecksumInstance();d=b;let T=this.field.getZero(),M=u.getCoefficient(u.getDegree()),R=this.field.inverse(M);for(;d.getDegree()>=u.getDegree()&&!d.isZero();){let k=d.getDegree()-u.getDegree(),q=this.field.multiply(d.getCoefficient(d.getDegree()),R);T=T.add(this.field.buildMonomial(k,q)),d=d.subtract(u.multiplyByMonomial(k,q))}p=T.multiply(f).subtract(A).negative()}let y=p.getCoefficient(0);if(y===0)throw E.getChecksumInstance();let _=this.field.inverse(y),v=p.multiply(_),I=d.multiply(_);return[v,I]}findErrorLocations(s){let a=s.getDegree(),c=new Int32Array(a),u=0;for(let d=1;d<this.field.getSize()&&u<a;d++)s.evaluateAt(d)===0&&(c[u]=this.field.inverse(d),u++);if(u!==a)throw E.getChecksumInstance();return c}findErrorMagnitudes(s,a,c){let u=a.getDegree(),d=new Int32Array(u);for(let _=1;_<=u;_++)d[u-_]=this.field.multiply(_,a.getCoefficient(_));let f=new cn(this.field,d),p=c.length,y=new Int32Array(p);for(let _=0;_<p;_++){let v=this.field.inverse(c[_]),I=this.field.subtract(0,s.evaluateAt(v)),b=this.field.inverse(f.evaluateAt(v));y[_]=this.field.multiply(I,b)}return y}}class Oo{constructor(s,a,c,u,d){s instanceof Oo?this.constructor_2(s):this.constructor_1(s,a,c,u,d)}constructor_1(s,a,c,u,d){let f=a==null||c==null,p=u==null||d==null;if(f&&p)throw new V;f?(a=new se(0,u.getY()),c=new se(0,d.getY())):p&&(u=new se(s.getWidth()-1,a.getY()),d=new se(s.getWidth()-1,c.getY())),this.image=s,this.topLeft=a,this.bottomLeft=c,this.topRight=u,this.bottomRight=d,this.minX=Math.trunc(Math.min(a.getX(),c.getX())),this.maxX=Math.trunc(Math.max(u.getX(),d.getX())),this.minY=Math.trunc(Math.min(a.getY(),u.getY())),this.maxY=Math.trunc(Math.max(c.getY(),d.getY()))}constructor_2(s){this.image=s.image,this.topLeft=s.getTopLeft(),this.bottomLeft=s.getBottomLeft(),this.topRight=s.getTopRight(),this.bottomRight=s.getBottomRight(),this.minX=s.getMinX(),this.maxX=s.getMaxX(),this.minY=s.getMinY(),this.maxY=s.getMaxY()}static merge(s,a){return s==null?a:a==null?s:new Oo(s.image,s.topLeft,s.bottomLeft,a.topRight,a.bottomRight)}addMissingRows(s,a,c){let u=this.topLeft,d=this.bottomLeft,f=this.topRight,p=this.bottomRight;if(s>0){let y=c?this.topLeft:this.topRight,_=Math.trunc(y.getY()-s);_<0&&(_=0);let v=new se(y.getX(),_);c?u=v:f=v}if(a>0){let y=c?this.bottomLeft:this.bottomRight,_=Math.trunc(y.getY()+a);_>=this.image.getHeight()&&(_=this.image.getHeight()-1);let v=new se(y.getX(),_);c?d=v:p=v}return new Oo(this.image,u,d,f,p)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class c2{constructor(s,a,c,u){this.columnCount=s,this.errorCorrectionLevel=u,this.rowCountUpperPart=a,this.rowCountLowerPart=c,this.rowCount=a+c}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class oc{constructor(){this.buffer=""}static form(s,a){let c=-1;function u(f,p,y,_,v,I){if(f==="%%")return"%";if(a[++c]===void 0)return;f=_?parseInt(_.substr(1)):void 0;let b=v?parseInt(v.substr(1)):void 0,A;switch(I){case"s":A=a[c];break;case"c":A=a[c][0];break;case"f":A=parseFloat(a[c]).toFixed(f);break;case"p":A=parseFloat(a[c]).toPrecision(f);break;case"e":A=parseFloat(a[c]).toExponential(f);break;case"x":A=parseInt(a[c]).toString(b||16);break;case"d":A=parseFloat(parseInt(a[c],b||10).toPrecision(f)).toFixed(0);break}A=typeof A=="object"?JSON.stringify(A):(+A).toString(b);let T=parseInt(y),M=y&&y[0]+""=="0"?"0":" ";for(;A.length<T;)A=p!==void 0?A+M:M+A;return A}let d=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return s.replace(d,u)}format(s,...a){this.buffer+=oc.form(s,a)}toString(){return this.buffer}}let hw=(()=>{class w{constructor(a){this.boundingBox=new Oo(a),this.codewords=new Array(a.getMaxY()-a.getMinY()+1)}getCodewordNearby(a){let c=this.getCodeword(a);if(c!=null)return c;for(let u=1;u<w.MAX_NEARBY_DISTANCE;u++){let d=this.imageRowToCodewordIndex(a)-u;if(d>=0&&(c=this.codewords[d],c!=null)||(d=this.imageRowToCodewordIndex(a)+u,d<this.codewords.length&&(c=this.codewords[d],c!=null)))return c}return null}imageRowToCodewordIndex(a){return a-this.boundingBox.getMinY()}setCodeword(a,c){this.codewords[this.imageRowToCodewordIndex(a)]=c}getCodeword(a){return this.codewords[this.imageRowToCodewordIndex(a)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){let a=new oc,c=0;for(let u of this.codewords){if(u==null){a.format("%3d:    |   %n",c++);continue}a.format("%3d: %3d|%3d%n",c++,u.getRowNumber(),u.getValue())}return a.toString()}}return w.MAX_NEARBY_DISTANCE=5,w})();class sc{constructor(){this.values=new Map}setValue(s){s=Math.trunc(s);let a=this.values.get(s);a==null&&(a=0),a++,this.values.set(s,a)}getValue(){let s=-1,a=new Array;for(let[c,u]of this.values.entries()){let d={getKey:()=>c,getValue:()=>u};d.getValue()>s?(s=d.getValue(),a=[],a.push(d.getKey())):d.getValue()===s&&a.push(d.getKey())}return ve.toIntArray(a)}getConfidence(s){return this.values.get(s)}}class pw extends hw{constructor(s,a){super(s),this._isLeft=a}setRowNumbers(){for(let s of this.getCodewords())s?.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(s){let a=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(a,s);let c=this.getBoundingBox(),u=this._isLeft?c.getTopLeft():c.getTopRight(),d=this._isLeft?c.getBottomLeft():c.getBottomRight(),f=this.imageRowToCodewordIndex(Math.trunc(u.getY())),p=this.imageRowToCodewordIndex(Math.trunc(d.getY())),y=-1,_=1,v=0;for(let I=f;I<p;I++){if(a[I]==null)continue;let b=a[I],A=b.getRowNumber()-y;if(A===0)v++;else if(A===1)_=Math.max(_,v),v=1,y=b.getRowNumber();else if(A<0||b.getRowNumber()>=s.getRowCount()||A>I)a[I]=null;else{let T;_>2?T=(_-2)*A:T=A;let M=T>=I;for(let R=1;R<=T&&!M;R++)M=a[I-R]!=null;M?a[I]=null:(y=b.getRowNumber(),v=1)}}}getRowHeights(){let s=this.getBarcodeMetadata();if(s==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(s);let a=new Int32Array(s.getRowCount());for(let c of this.getCodewords())if(c!=null){let u=c.getRowNumber();if(u>=a.length)continue;a[u]++}return a}adjustIncompleteIndicatorColumnRowNumbers(s){let a=this.getBoundingBox(),c=this._isLeft?a.getTopLeft():a.getTopRight(),u=this._isLeft?a.getBottomLeft():a.getBottomRight(),d=this.imageRowToCodewordIndex(Math.trunc(c.getY())),f=this.imageRowToCodewordIndex(Math.trunc(u.getY())),p=this.getCodewords(),y=-1;for(let _=d;_<f;_++){if(p[_]==null)continue;let v=p[_];v.setRowNumberAsRowIndicatorColumn();let I=v.getRowNumber()-y;I===0||(I===1?y=v.getRowNumber():v.getRowNumber()>=s.getRowCount()?p[_]=null:y=v.getRowNumber())}}getBarcodeMetadata(){let s=this.getCodewords(),a=new sc,c=new sc,u=new sc,d=new sc;for(let p of s){if(p==null)continue;p.setRowNumberAsRowIndicatorColumn();let y=p.getValue()%30,_=p.getRowNumber();switch(this._isLeft||(_+=2),_%3){case 0:c.setValue(y*3+1);break;case 1:d.setValue(y/3),u.setValue(y%3);break;case 2:a.setValue(y+1);break}}if(a.getValue().length===0||c.getValue().length===0||u.getValue().length===0||d.getValue().length===0||a.getValue()[0]<1||c.getValue()[0]+u.getValue()[0]<ve.MIN_ROWS_IN_BARCODE||c.getValue()[0]+u.getValue()[0]>ve.MAX_ROWS_IN_BARCODE)return null;let f=new c2(a.getValue()[0],c.getValue()[0],u.getValue()[0],d.getValue()[0]);return this.removeIncorrectCodewords(s,f),f}removeIncorrectCodewords(s,a){for(let c=0;c<s.length;c++){let u=s[c];if(s[c]==null)continue;let d=u.getValue()%30,f=u.getRowNumber();if(f>a.getRowCount()){s[c]=null;continue}switch(this._isLeft||(f+=2),f%3){case 0:d*3+1!==a.getRowCountUpperPart()&&(s[c]=null);break;case 1:(Math.trunc(d/3)!==a.getErrorCorrectionLevel()||d%3!==a.getRowCountLowerPart())&&(s[c]=null);break;case 2:d+1!==a.getColumnCount()&&(s[c]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class ac{constructor(s,a){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=s,this.barcodeColumnCount=s.getColumnCount(),this.boundingBox=a,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let s=ve.MAX_CODEWORDS_IN_BARCODE,a;do a=s,s=this.adjustRowNumbersAndGetCount();while(s>0&&s<a);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(s){s?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let s=this.adjustRowNumbersByRow();if(s===0)return 0;for(let a=1;a<this.barcodeColumnCount+1;a++){let c=this.detectionResultColumns[a].getCodewords();for(let u=0;u<c.length;u++)c[u]!=null&&(c[u].hasValidRowNumber()||this.adjustRowNumbers(a,u,c))}return s}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let s=this.detectionResultColumns[0].getCodewords(),a=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let c=0;c<s.length;c++)if(s[c]!=null&&a[c]!=null&&s[c].getRowNumber()===a[c].getRowNumber())for(let u=1;u<=this.barcodeColumnCount;u++){let d=this.detectionResultColumns[u].getCodewords()[c];d!=null&&(d.setRowNumber(s[c].getRowNumber()),d.hasValidRowNumber()||(this.detectionResultColumns[u].getCodewords()[c]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let s=0,a=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let c=0;c<a.length;c++){if(a[c]==null)continue;let u=a[c].getRowNumber(),d=0;for(let f=this.barcodeColumnCount+1;f>0&&d<this.ADJUST_ROW_NUMBER_SKIP;f--){let p=this.detectionResultColumns[f].getCodewords()[c];p!=null&&(d=ac.adjustRowNumberIfValid(u,d,p),p.hasValidRowNumber()||s++)}}return s}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let s=0,a=this.detectionResultColumns[0].getCodewords();for(let c=0;c<a.length;c++){if(a[c]==null)continue;let u=a[c].getRowNumber(),d=0;for(let f=1;f<this.barcodeColumnCount+1&&d<this.ADJUST_ROW_NUMBER_SKIP;f++){let p=this.detectionResultColumns[f].getCodewords()[c];p!=null&&(d=ac.adjustRowNumberIfValid(u,d,p),p.hasValidRowNumber()||s++)}}return s}static adjustRowNumberIfValid(s,a,c){return c==null||c.hasValidRowNumber()||(c.isValidRowNumber(s)?(c.setRowNumber(s),a=0):++a),a}adjustRowNumbers(s,a,c){if(!this.detectionResultColumns[s-1])return;let u=c[a],d=this.detectionResultColumns[s-1].getCodewords(),f=d;this.detectionResultColumns[s+1]!=null&&(f=this.detectionResultColumns[s+1].getCodewords());let p=new Array(14);p[2]=d[a],p[3]=f[a],a>0&&(p[0]=c[a-1],p[4]=d[a-1],p[5]=f[a-1]),a>1&&(p[8]=c[a-2],p[10]=d[a-2],p[11]=f[a-2]),a<c.length-1&&(p[1]=c[a+1],p[6]=d[a+1],p[7]=f[a+1]),a<c.length-2&&(p[9]=c[a+2],p[12]=d[a+2],p[13]=f[a+2]);for(let y of p)if(ac.adjustRowNumber(u,y))return}static adjustRowNumber(s,a){return a==null?!1:a.hasValidRowNumber()&&a.getBucket()===s.getBucket()?(s.setRowNumber(a.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(s){this.boundingBox=s}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(s,a){this.detectionResultColumns[s]=a}getDetectionResultColumn(s){return this.detectionResultColumns[s]}toString(){let s=this.detectionResultColumns[0];s==null&&(s=this.detectionResultColumns[this.barcodeColumnCount+1]);let a=new oc;for(let c=0;c<s.getCodewords().length;c++){a.format("CW %3d:",c);for(let u=0;u<this.barcodeColumnCount+2;u++){if(this.detectionResultColumns[u]==null){a.format("    |   ");continue}let d=this.detectionResultColumns[u].getCodewords()[c];if(d==null){a.format("    |   ");continue}a.format(" %3d|%3d",d.getRowNumber(),d.getValue())}a.format("%n")}return a.toString()}}let l2=(()=>{class w{constructor(a,c,u,d){this.rowNumber=w.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(a),this.endX=Math.trunc(c),this.bucket=Math.trunc(u),this.value=Math.trunc(d)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(a){return a!==w.BARCODE_ROW_UNKNOWN&&this.bucket===a%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(a){this.rowNumber=a}toString(){return this.rowNumber+"|"+this.value}}return w.BARCODE_ROW_UNKNOWN=-1,w})();class kn{static initialize(){for(let s=0;s<ve.SYMBOL_TABLE.length;s++){let a=ve.SYMBOL_TABLE[s],c=a&1;for(let u=0;u<ve.BARS_IN_MODULE;u++){let d=0;for(;(a&1)===c;)d+=1,a>>=1;c=a&1,kn.RATIOS_TABLE[s]||(kn.RATIOS_TABLE[s]=new Array(ve.BARS_IN_MODULE)),kn.RATIOS_TABLE[s][ve.BARS_IN_MODULE-u-1]=Math.fround(d/ve.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(s){let a=kn.getDecodedCodewordValue(kn.sampleBitCounts(s));return a!==-1?a:kn.getClosestDecodedValue(s)}static sampleBitCounts(s){let a=Je.sum(s),c=new Int32Array(ve.BARS_IN_MODULE),u=0,d=0;for(let f=0;f<ve.MODULES_IN_CODEWORD;f++){let p=a/(2*ve.MODULES_IN_CODEWORD)+f*a/ve.MODULES_IN_CODEWORD;d+s[u]<=p&&(d+=s[u],u++),c[u]++}return c}static getDecodedCodewordValue(s){let a=kn.getBitValue(s);return ve.getCodeword(a)===-1?-1:a}static getBitValue(s){let a=0;for(let c=0;c<s.length;c++)for(let u=0;u<s[c];u++)a=a<<1|(c%2===0?1:0);return Math.trunc(a)}static getClosestDecodedValue(s){let a=Je.sum(s),c=new Array(ve.BARS_IN_MODULE);if(a>1)for(let f=0;f<c.length;f++)c[f]=Math.fround(s[f]/a);let u=uu.MAX_VALUE,d=-1;this.bSymbolTableReady||kn.initialize();for(let f=0;f<kn.RATIOS_TABLE.length;f++){let p=0,y=kn.RATIOS_TABLE[f];for(let _=0;_<ve.BARS_IN_MODULE;_++){let v=Math.fround(y[_]-c[_]);if(p+=Math.fround(v*v),p>=u)break}p<u&&(u=p,d=ve.SYMBOL_TABLE[f])}return d}}kn.bSymbolTableReady=!1,kn.RATIOS_TABLE=new Array(ve.SYMBOL_TABLE.length).map(w=>w=new Array(ve.BARS_IN_MODULE));class gw{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(s){this.segmentIndex=s}getFileId(){return this.fileId}setFileId(s){this.fileId=s}getOptionalData(){return this.optionalData}setOptionalData(s){this.optionalData=s}isLastSegment(){return this.lastSegment}setLastSegment(s){this.lastSegment=s}getSegmentCount(){return this.segmentCount}setSegmentCount(s){this.segmentCount=s}getSender(){return this.sender||null}setSender(s){this.sender=s}getAddressee(){return this.addressee||null}setAddressee(s){this.addressee=s}getFileName(){return this.fileName}setFileName(s){this.fileName=s}getFileSize(){return this.fileSize}setFileSize(s){this.fileSize=s}getChecksum(){return this.checksum}setChecksum(s){this.checksum=s}getTimestamp(){return this.timestamp}setTimestamp(s){this.timestamp=s}}class mw{static parseLong(s,a=void 0){return parseInt(s,a)}}let u2=(()=>{class w extends h{}return w.kind="NullPointerException",w})();class d2{writeBytes(s){this.writeBytesOffset(s,0,s.length)}writeBytesOffset(s,a,c){if(s==null)throw new u2;if(a<0||a>s.length||c<0||a+c>s.length||a+c<0)throw new N;if(c===0)return;for(let u=0;u<c;u++)this.write(s[a+u])}flush(){}close(){}}class f2 extends h{}class h2 extends d2{constructor(s=32){if(super(),this.count=0,s<0)throw new m("Negative initial size: "+s);this.buf=new Uint8Array(s)}ensureCapacity(s){s-this.buf.length>0&&this.grow(s)}grow(s){let c=this.buf.length<<1;if(c-s<0&&(c=s),c<0){if(s<0)throw new f2;c=W.MAX_VALUE}this.buf=$.copyOfUint8Array(this.buf,c)}write(s){this.ensureCapacity(this.count+1),this.buf[this.count]=s,this.count+=1}writeBytesOffset(s,a,c){if(a<0||a>s.length||c<0||a+c-s.length>0)throw new N;this.ensureCapacity(this.count+c),D.arraycopy(s,a,this.buf,this.count,c),this.count+=c}writeTo(s){s.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return $.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(s){return s?typeof s=="string"?this.toString_string(s):this.toString_number(s):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(s){return new String(this.buf).toString()}toString_number(s){return new String(this.buf).toString()}close(){}}var wt=function(w){return w[w.ALPHA=0]="ALPHA",w[w.LOWER=1]="LOWER",w[w.MIXED=2]="MIXED",w[w.PUNCT=3]="PUNCT",w[w.ALPHA_SHIFT=4]="ALPHA_SHIFT",w[w.PUNCT_SHIFT=5]="PUNCT_SHIFT",w}(wt||{});function yw(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let wu;function Xi(w){if(typeof wu>"u"&&(wu=yw()),wu===null)throw new Error("BigInt is not supported!");return wu(w)}function p2(){let w=[];w[0]=Xi(1);let s=Xi(900);w[1]=s;for(let a=2;a<16;a++)w[a]=w[a-1]*s;return w}class F{static decode(s,a){let c=new yt(""),u=G.ISO8859_1;c.enableDecoding(u);let d=1,f=s[d++],p=new gw;for(;d<s[0];){switch(f){case F.TEXT_COMPACTION_MODE_LATCH:d=F.textCompaction(s,d,c);break;case F.BYTE_COMPACTION_MODE_LATCH:case F.BYTE_COMPACTION_MODE_LATCH_6:d=F.byteCompaction(f,s,u,d,c);break;case F.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(s[d++]);break;case F.NUMERIC_COMPACTION_MODE_LATCH:d=F.numericCompaction(s,d,c);break;case F.ECI_CHARSET:let _=G.getCharacterSetECIByValue(s[d++]);break;case F.ECI_GENERAL_PURPOSE:d+=2;break;case F.ECI_USER_DEFINED:d++;break;case F.BEGIN_MACRO_PDF417_CONTROL_BLOCK:d=F.decodeMacroBlock(s,d,p);break;case F.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case F.MACRO_PDF417_TERMINATOR:throw new H;default:d--,d=F.textCompaction(s,d,c);break}if(d<s.length)f=s[d++];else throw H.getFormatInstance()}if(c.length()===0)throw H.getFormatInstance();let y=new Ka(null,c.toString(),null,a);return y.setOther(p),y}static decodeMacroBlock(s,a,c){if(a+F.NUMBER_OF_SEQUENCE_CODEWORDS>s[0])throw H.getFormatInstance();let u=new Int32Array(F.NUMBER_OF_SEQUENCE_CODEWORDS);for(let p=0;p<F.NUMBER_OF_SEQUENCE_CODEWORDS;p++,a++)u[p]=s[a];c.setSegmentIndex(W.parseInt(F.decodeBase900toBase10(u,F.NUMBER_OF_SEQUENCE_CODEWORDS)));let d=new yt;a=F.textCompaction(s,a,d),c.setFileId(d.toString());let f=-1;for(s[a]===F.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(f=a+1);a<s[0];)switch(s[a]){case F.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(a++,s[a]){case F.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let p=new yt;a=F.textCompaction(s,a+1,p),c.setFileName(p.toString());break;case F.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let y=new yt;a=F.textCompaction(s,a+1,y),c.setSender(y.toString());break;case F.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let _=new yt;a=F.textCompaction(s,a+1,_),c.setAddressee(_.toString());break;case F.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let v=new yt;a=F.numericCompaction(s,a+1,v),c.setSegmentCount(W.parseInt(v.toString()));break;case F.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let I=new yt;a=F.numericCompaction(s,a+1,I),c.setTimestamp(mw.parseLong(I.toString()));break;case F.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let b=new yt;a=F.numericCompaction(s,a+1,b),c.setChecksum(W.parseInt(b.toString()));break;case F.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let A=new yt;a=F.numericCompaction(s,a+1,A),c.setFileSize(mw.parseLong(A.toString()));break;default:throw H.getFormatInstance()}break;case F.MACRO_PDF417_TERMINATOR:a++,c.setLastSegment(!0);break;default:throw H.getFormatInstance()}if(f!==-1){let p=a-f;c.isLastSegment()&&p--,c.setOptionalData($.copyOfRange(s,f,f+p))}return a}static textCompaction(s,a,c){let u=new Int32Array((s[0]-a)*2),d=new Int32Array((s[0]-a)*2),f=0,p=!1;for(;a<s[0]&&!p;){let y=s[a++];if(y<F.TEXT_COMPACTION_MODE_LATCH)u[f]=y/30,u[f+1]=y%30,f+=2;else switch(y){case F.TEXT_COMPACTION_MODE_LATCH:u[f++]=F.TEXT_COMPACTION_MODE_LATCH;break;case F.BYTE_COMPACTION_MODE_LATCH:case F.BYTE_COMPACTION_MODE_LATCH_6:case F.NUMERIC_COMPACTION_MODE_LATCH:case F.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case F.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case F.MACRO_PDF417_TERMINATOR:a--,p=!0;break;case F.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u[f]=F.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,y=s[a++],d[f]=y,f++;break}}return F.decodeTextCompaction(u,d,f,c),a}static decodeTextCompaction(s,a,c,u){let d=wt.ALPHA,f=wt.ALPHA,p=0;for(;p<c;){let y=s[p],_="";switch(d){case wt.ALPHA:if(y<26)_=String.fromCharCode(65+y);else switch(y){case 26:_=" ";break;case F.LL:d=wt.LOWER;break;case F.ML:d=wt.MIXED;break;case F.PS:f=d,d=wt.PUNCT_SHIFT;break;case F.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(a[p]);break;case F.TEXT_COMPACTION_MODE_LATCH:d=wt.ALPHA;break}break;case wt.LOWER:if(y<26)_=String.fromCharCode(97+y);else switch(y){case 26:_=" ";break;case F.AS:f=d,d=wt.ALPHA_SHIFT;break;case F.ML:d=wt.MIXED;break;case F.PS:f=d,d=wt.PUNCT_SHIFT;break;case F.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(a[p]);break;case F.TEXT_COMPACTION_MODE_LATCH:d=wt.ALPHA;break}break;case wt.MIXED:if(y<F.PL)_=F.MIXED_CHARS[y];else switch(y){case F.PL:d=wt.PUNCT;break;case 26:_=" ";break;case F.LL:d=wt.LOWER;break;case F.AL:d=wt.ALPHA;break;case F.PS:f=d,d=wt.PUNCT_SHIFT;break;case F.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(a[p]);break;case F.TEXT_COMPACTION_MODE_LATCH:d=wt.ALPHA;break}break;case wt.PUNCT:if(y<F.PAL)_=F.PUNCT_CHARS[y];else switch(y){case F.PAL:d=wt.ALPHA;break;case F.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(a[p]);break;case F.TEXT_COMPACTION_MODE_LATCH:d=wt.ALPHA;break}break;case wt.ALPHA_SHIFT:if(d=f,y<26)_=String.fromCharCode(65+y);else switch(y){case 26:_=" ";break;case F.TEXT_COMPACTION_MODE_LATCH:d=wt.ALPHA;break}break;case wt.PUNCT_SHIFT:if(d=f,y<F.PAL)_=F.PUNCT_CHARS[y];else switch(y){case F.PAL:d=wt.ALPHA;break;case F.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(a[p]);break;case F.TEXT_COMPACTION_MODE_LATCH:d=wt.ALPHA;break}break}_!==""&&u.append(_),p++}}static byteCompaction(s,a,c,u,d){let f=new h2,p=0,y=0,_=!1;switch(s){case F.BYTE_COMPACTION_MODE_LATCH:let v=new Int32Array(6),I=a[u++];for(;u<a[0]&&!_;)switch(v[p++]=I,y=900*y+I,I=a[u++],I){case F.TEXT_COMPACTION_MODE_LATCH:case F.BYTE_COMPACTION_MODE_LATCH:case F.NUMERIC_COMPACTION_MODE_LATCH:case F.BYTE_COMPACTION_MODE_LATCH_6:case F.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case F.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case F.MACRO_PDF417_TERMINATOR:u--,_=!0;break;default:if(p%5===0&&p>0){for(let b=0;b<6;++b)f.write(Number(Xi(y)>>Xi(8*(5-b))));y=0,p=0}break}u===a[0]&&I<F.TEXT_COMPACTION_MODE_LATCH&&(v[p++]=I);for(let b=0;b<p;b++)f.write(v[b]);break;case F.BYTE_COMPACTION_MODE_LATCH_6:for(;u<a[0]&&!_;){let b=a[u++];if(b<F.TEXT_COMPACTION_MODE_LATCH)p++,y=900*y+b;else switch(b){case F.TEXT_COMPACTION_MODE_LATCH:case F.BYTE_COMPACTION_MODE_LATCH:case F.NUMERIC_COMPACTION_MODE_LATCH:case F.BYTE_COMPACTION_MODE_LATCH_6:case F.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case F.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case F.MACRO_PDF417_TERMINATOR:u--,_=!0;break}if(p%5===0&&p>0){for(let A=0;A<6;++A)f.write(Number(Xi(y)>>Xi(8*(5-A))));y=0,p=0}}break}return d.append(Ut.decode(f.toByteArray(),c)),u}static numericCompaction(s,a,c){let u=0,d=!1,f=new Int32Array(F.MAX_NUMERIC_CODEWORDS);for(;a<s[0]&&!d;){let p=s[a++];if(a===s[0]&&(d=!0),p<F.TEXT_COMPACTION_MODE_LATCH)f[u]=p,u++;else switch(p){case F.TEXT_COMPACTION_MODE_LATCH:case F.BYTE_COMPACTION_MODE_LATCH:case F.BYTE_COMPACTION_MODE_LATCH_6:case F.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case F.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case F.MACRO_PDF417_TERMINATOR:a--,d=!0;break}(u%F.MAX_NUMERIC_CODEWORDS===0||p===F.NUMERIC_COMPACTION_MODE_LATCH||d)&&u>0&&(c.append(F.decodeBase900toBase10(f,u)),u=0)}return a}static decodeBase900toBase10(s,a){let c=Xi(0);for(let d=0;d<a;d++)c+=F.EXP900[a-d-1]*Xi(s[d]);let u=c.toString();if(u.charAt(0)!=="1")throw new H;return u.substring(1)}}F.TEXT_COMPACTION_MODE_LATCH=900,F.BYTE_COMPACTION_MODE_LATCH=901,F.NUMERIC_COMPACTION_MODE_LATCH=902,F.BYTE_COMPACTION_MODE_LATCH_6=924,F.ECI_USER_DEFINED=925,F.ECI_GENERAL_PURPOSE=926,F.ECI_CHARSET=927,F.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,F.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,F.MACRO_PDF417_TERMINATOR=922,F.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,F.MAX_NUMERIC_CODEWORDS=15,F.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,F.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,F.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,F.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,F.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,F.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,F.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,F.PL=25,F.LL=27,F.AS=27,F.ML=28,F.AL=28,F.PS=29,F.PAL=29,F.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,F.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",F.EXP900=yw()?p2():[],F.NUMBER_OF_SEQUENCE_CODEWORDS=2;class Pe{constructor(){}static decode(s,a,c,u,d,f,p){let y=new Oo(s,a,c,u,d),_=null,v=null,I;for(let T=!0;;T=!1){if(a!=null&&(_=Pe.getRowIndicatorColumn(s,y,a,!0,f,p)),u!=null&&(v=Pe.getRowIndicatorColumn(s,y,u,!1,f,p)),I=Pe.merge(_,v),I==null)throw V.getNotFoundInstance();let M=I.getBoundingBox();if(T&&M!=null&&(M.getMinY()<y.getMinY()||M.getMaxY()>y.getMaxY()))y=M;else break}I.setBoundingBox(y);let b=I.getBarcodeColumnCount()+1;I.setDetectionResultColumn(0,_),I.setDetectionResultColumn(b,v);let A=_!=null;for(let T=1;T<=b;T++){let M=A?T:b-T;if(I.getDetectionResultColumn(M)!==void 0)continue;let R;M===0||M===b?R=new pw(y,M===0):R=new hw(y),I.setDetectionResultColumn(M,R);let k=-1,q=k;for(let Q=y.getMinY();Q<=y.getMaxY();Q++){if(k=Pe.getStartColumn(I,M,Q,A),k<0||k>y.getMaxX()){if(q===-1)continue;k=q}let B=Pe.detectCodeword(s,y.getMinX(),y.getMaxX(),A,k,Q,f,p);B!=null&&(R.setCodeword(Q,B),q=k,f=Math.min(f,B.getWidth()),p=Math.max(p,B.getWidth()))}}return Pe.createDecoderResult(I)}static merge(s,a){if(s==null&&a==null)return null;let c=Pe.getBarcodeMetadata(s,a);if(c==null)return null;let u=Oo.merge(Pe.adjustBoundingBox(s),Pe.adjustBoundingBox(a));return new ac(c,u)}static adjustBoundingBox(s){if(s==null)return null;let a=s.getRowHeights();if(a==null)return null;let c=Pe.getMax(a),u=0;for(let p of a)if(u+=c-p,p>0)break;let d=s.getCodewords();for(let p=0;u>0&&d[p]==null;p++)u--;let f=0;for(let p=a.length-1;p>=0&&(f+=c-a[p],!(a[p]>0));p--);for(let p=d.length-1;f>0&&d[p]==null;p--)f--;return s.getBoundingBox().addMissingRows(u,f,s.isLeft())}static getMax(s){let a=-1;for(let c of s)a=Math.max(a,c);return a}static getBarcodeMetadata(s,a){let c;if(s==null||(c=s.getBarcodeMetadata())==null)return a==null?null:a.getBarcodeMetadata();let u;return a==null||(u=a.getBarcodeMetadata())==null?c:c.getColumnCount()!==u.getColumnCount()&&c.getErrorCorrectionLevel()!==u.getErrorCorrectionLevel()&&c.getRowCount()!==u.getRowCount()?null:c}static getRowIndicatorColumn(s,a,c,u,d,f){let p=new pw(a,u);for(let y=0;y<2;y++){let _=y===0?1:-1,v=Math.trunc(Math.trunc(c.getX()));for(let I=Math.trunc(Math.trunc(c.getY()));I<=a.getMaxY()&&I>=a.getMinY();I+=_){let b=Pe.detectCodeword(s,0,s.getWidth(),u,v,I,d,f);b!=null&&(p.setCodeword(I,b),u?v=b.getStartX():v=b.getEndX())}}return p}static adjustCodewordCount(s,a){let c=a[0][1],u=c.getValue(),d=s.getBarcodeColumnCount()*s.getBarcodeRowCount()-Pe.getNumberOfECCodeWords(s.getBarcodeECLevel());if(u.length===0){if(d<1||d>ve.MAX_CODEWORDS_IN_BARCODE)throw V.getNotFoundInstance();c.setValue(d)}else u[0]!==d&&c.setValue(d)}static createDecoderResult(s){let a=Pe.createBarcodeMatrix(s);Pe.adjustCodewordCount(s,a);let c=new Array,u=new Int32Array(s.getBarcodeRowCount()*s.getBarcodeColumnCount()),d=[],f=new Array;for(let y=0;y<s.getBarcodeRowCount();y++)for(let _=0;_<s.getBarcodeColumnCount();_++){let v=a[y][_+1].getValue(),I=y*s.getBarcodeColumnCount()+_;v.length===0?c.push(I):v.length===1?u[I]=v[0]:(f.push(I),d.push(v))}let p=new Array(d.length);for(let y=0;y<p.length;y++)p[y]=d[y];return Pe.createDecoderResultFromAmbiguousValues(s.getBarcodeECLevel(),u,ve.toIntArray(c),ve.toIntArray(f),p)}static createDecoderResultFromAmbiguousValues(s,a,c,u,d){let f=new Int32Array(u.length),p=100;for(;p-- >0;){for(let y=0;y<f.length;y++)a[u[y]]=d[y][f[y]];try{return Pe.decodeCodewords(a,s,c)}catch(y){if(!(y instanceof E))throw y}if(f.length===0)throw E.getChecksumInstance();for(let y=0;y<f.length;y++)if(f[y]<d[y].length-1){f[y]++;break}else if(f[y]=0,y===f.length-1)throw E.getChecksumInstance()}throw E.getChecksumInstance()}static createBarcodeMatrix(s){let a=Array.from({length:s.getBarcodeRowCount()},()=>new Array(s.getBarcodeColumnCount()+2));for(let u=0;u<a.length;u++)for(let d=0;d<a[u].length;d++)a[u][d]=new sc;let c=0;for(let u of s.getDetectionResultColumns()){if(u!=null){for(let d of u.getCodewords())if(d!=null){let f=d.getRowNumber();if(f>=0){if(f>=a.length)continue;a[f][c].setValue(d.getValue())}}}c++}return a}static isValidBarcodeColumn(s,a){return a>=0&&a<=s.getBarcodeColumnCount()+1}static getStartColumn(s,a,c,u){let d=u?1:-1,f=null;if(Pe.isValidBarcodeColumn(s,a-d)&&(f=s.getDetectionResultColumn(a-d).getCodeword(c)),f!=null)return u?f.getEndX():f.getStartX();if(f=s.getDetectionResultColumn(a).getCodewordNearby(c),f!=null)return u?f.getStartX():f.getEndX();if(Pe.isValidBarcodeColumn(s,a-d)&&(f=s.getDetectionResultColumn(a-d).getCodewordNearby(c)),f!=null)return u?f.getEndX():f.getStartX();let p=0;for(;Pe.isValidBarcodeColumn(s,a-d);){a-=d;for(let y of s.getDetectionResultColumn(a).getCodewords())if(y!=null)return(u?y.getEndX():y.getStartX())+d*p*(y.getEndX()-y.getStartX());p++}return u?s.getBoundingBox().getMinX():s.getBoundingBox().getMaxX()}static detectCodeword(s,a,c,u,d,f,p,y){d=Pe.adjustCodewordStartColumn(s,a,c,u,d,f);let _=Pe.getModuleBitCount(s,a,c,u,d,f);if(_==null)return null;let v,I=Je.sum(_);if(u)v=d+I;else{for(let T=0;T<_.length/2;T++){let M=_[T];_[T]=_[_.length-1-T],_[_.length-1-T]=M}v=d,d=v-I}if(!Pe.checkCodewordSkew(I,p,y))return null;let b=kn.getDecodedValue(_),A=ve.getCodeword(b);return A===-1?null:new l2(d,v,Pe.getCodewordBucketNumber(b),A)}static getModuleBitCount(s,a,c,u,d,f){let p=d,y=new Int32Array(8),_=0,v=u?1:-1,I=u;for(;(u?p<c:p>=a)&&_<y.length;)s.get(p,f)===I?(y[_]++,p+=v):(_++,I=!I);return _===y.length||p===(u?c:a)&&_===y.length-1?y:null}static getNumberOfECCodeWords(s){return 2<<s}static adjustCodewordStartColumn(s,a,c,u,d,f){let p=d,y=u?-1:1;for(let _=0;_<2;_++){for(;(u?p>=a:p<c)&&u===s.get(p,f);){if(Math.abs(d-p)>Pe.CODEWORD_SKEW_SIZE)return d;p+=y}y=-y,u=!u}return p}static checkCodewordSkew(s,a,c){return a-Pe.CODEWORD_SKEW_SIZE<=s&&s<=c+Pe.CODEWORD_SKEW_SIZE}static decodeCodewords(s,a,c){if(s.length===0)throw H.getFormatInstance();let u=1<<a+1,d=Pe.correctErrors(s,c,u);Pe.verifyCodewordCount(s,u);let f=F.decode(s,""+a);return f.setErrorsCorrected(d),f.setErasures(c.length),f}static correctErrors(s,a,c){if(a!=null&&a.length>c/2+Pe.MAX_ERRORS||c<0||c>Pe.MAX_EC_CODEWORDS)throw E.getChecksumInstance();return Pe.errorCorrection.decode(s,c,a)}static verifyCodewordCount(s,a){if(s.length<4)throw H.getFormatInstance();let c=s[0];if(c>s.length)throw H.getFormatInstance();if(c===0)if(a<s.length)s[0]=s.length-a;else throw H.getFormatInstance()}static getBitCountForCodeword(s){let a=new Int32Array(8),c=0,u=a.length-1;for(;!((s&1)!==c&&(c=s&1,u--,u<0));)a[u]++,s>>=1;return a}static getCodewordBucketNumber(s){return s instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(s):this.getCodewordBucketNumber_number(s)}static getCodewordBucketNumber_number(s){return Pe.getCodewordBucketNumber(Pe.getBitCountForCodeword(s))}static getCodewordBucketNumber_Int32Array(s){return(s[0]-s[2]+s[4]-s[6]+9)%9}static toString(s){let a=new oc;for(let c=0;c<s.length;c++){a.format("Row %2d: ",c);for(let u=0;u<s[c].length;u++){let d=s[c][u];d.getValue().length===0?a.format("        ",null):a.format("%4d(%2d)",d.getValue()[0],d.getConfidence(d.getValue()[0]))}a.format("%n")}return a.toString()}}Pe.CODEWORD_SKEW_SIZE=2,Pe.MAX_ERRORS=3,Pe.MAX_EC_CODEWORDS=512,Pe.errorCorrection=new fw;class ln{decode(s,a=null){let c=ln.decode(s,a,!1);if(c==null||c.length===0||c[0]==null)throw V.getNotFoundInstance();return c[0]}decodeMultiple(s,a=null){try{return ln.decode(s,a,!0)}catch(c){throw c instanceof H||c instanceof E?V.getNotFoundInstance():c}}static decode(s,a,c){let u=new Array,d=Re.detectMultiple(s,a,c);for(let f of d.getPoints()){let p=Pe.decode(d.getBits(),f[4],f[5],f[6],f[7],ln.getMinCodewordWidth(f),ln.getMaxCodewordWidth(f)),y=new Dn(p.getText(),p.getRawBytes(),void 0,f,ye.PDF_417);y.putMetadata(nn.ERROR_CORRECTION_LEVEL,p.getECLevel());let _=p.getOther();_!=null&&y.putMetadata(nn.PDF417_EXTRA_METADATA,_),u.push(y)}return u.map(f=>f)}static getMaxWidth(s,a){return s==null||a==null?0:Math.trunc(Math.abs(s.getX()-a.getX()))}static getMinWidth(s,a){return s==null||a==null?W.MAX_VALUE:Math.trunc(Math.abs(s.getX()-a.getX()))}static getMaxCodewordWidth(s){return Math.floor(Math.max(Math.max(ln.getMaxWidth(s[0],s[4]),ln.getMaxWidth(s[6],s[2])*ve.MODULES_IN_CODEWORD/ve.MODULES_IN_STOP_PATTERN),Math.max(ln.getMaxWidth(s[1],s[5]),ln.getMaxWidth(s[7],s[3])*ve.MODULES_IN_CODEWORD/ve.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(s){return Math.floor(Math.min(Math.min(ln.getMinWidth(s[0],s[4]),ln.getMinWidth(s[6],s[2])*ve.MODULES_IN_CODEWORD/ve.MODULES_IN_STOP_PATTERN),Math.min(ln.getMinWidth(s[1],s[5]),ln.getMinWidth(s[7],s[3])*ve.MODULES_IN_CODEWORD/ve.MODULES_IN_STOP_PATTERN)))}reset(){}}let yp=(()=>{class w extends h{}return w.kind="ReaderException",w})();class _w{constructor(s,a){this.verbose=s===!0,a&&this.setHints(a)}decode(s,a){return a&&this.setHints(a),this.decodeInternal(s)}decodeWithState(s){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(s)}setHints(s){this.hints=s;let a=!t(s)&&s.get(he.TRY_HARDER)===!0,c=t(s)?null:s.get(he.POSSIBLE_FORMATS),u=new Array;if(!t(c)){let d=c.some(f=>f===ye.UPC_A||f===ye.UPC_E||f===ye.EAN_13||f===ye.EAN_8||f===ye.CODABAR||f===ye.CODE_39||f===ye.CODE_93||f===ye.CODE_128||f===ye.ITF||f===ye.RSS_14||f===ye.RSS_EXPANDED);d&&!a&&u.push(new Is(s,this.verbose)),c.includes(ye.QR_CODE)&&u.push(new Zi),c.includes(ye.DATA_MATRIX)&&u.push(new yu),c.includes(ye.AZTEC)&&u.push(new hu),c.includes(ye.PDF_417)&&u.push(new ln),d&&a&&u.push(new Is(s,this.verbose))}u.length===0&&(a||u.push(new Is(s,this.verbose)),u.push(new Zi),u.push(new yu),u.push(new hu),u.push(new ln),a&&u.push(new Is(s,this.verbose))),this.readers=u}reset(){if(this.readers!==null)for(let s of this.readers)s.reset()}decodeInternal(s){if(this.readers===null)throw new yp("No readers where selected, nothing can be read.");for(let a of this.readers)try{return a.decode(s,this.hints)}catch(c){if(c instanceof yp)continue}throw new V("No MultiFormat Readers were able to detect the code.")}}class g2 extends To{constructor(s=null,a=500){let c=new _w;c.setHints(s),super(c,a)}decodeBitmap(s){return this.reader.decodeWithState(s)}}class m2 extends To{constructor(s=500){super(new ln,s)}}class y2 extends To{constructor(s=500){super(new Zi,s)}}var ww=function(w){return w[w.ERROR_CORRECTION=0]="ERROR_CORRECTION",w[w.CHARACTER_SET=1]="CHARACTER_SET",w[w.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",w[w.MIN_SIZE=3]="MIN_SIZE",w[w.MAX_SIZE=4]="MAX_SIZE",w[w.MARGIN=5]="MARGIN",w[w.PDF417_COMPACT=6]="PDF417_COMPACT",w[w.PDF417_COMPACTION=7]="PDF417_COMPACTION",w[w.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",w[w.AZTEC_LAYERS=9]="AZTEC_LAYERS",w[w.QR_VERSION=10]="QR_VERSION",w}(ww||{}),qt=ww;class _p{constructor(s){this.field=s,this.cachedGenerators=[],this.cachedGenerators.push(new Pn(s,Int32Array.from([1])))}buildGenerator(s){let a=this.cachedGenerators;if(s>=a.length){let c=a[a.length-1],u=this.field;for(let d=a.length;d<=s;d++){let f=c.multiply(new Pn(u,Int32Array.from([1,u.exp(d-1+u.getGeneratorBase())])));a.push(f),c=f}}return a[s]}encode(s,a){if(a===0)throw new m("No error correction bytes");let c=s.length-a;if(c<=0)throw new m("No data bytes provided");let u=this.buildGenerator(a),d=new Int32Array(c);D.arraycopy(s,0,d,0,c);let f=new Pn(this.field,d);f=f.multiplyByMonomial(a,1);let y=f.divide(u)[1].getCoefficients(),_=a-y.length;for(let v=0;v<_;v++)s[c+v]=0;D.arraycopy(y,0,s,c+_,y.length)}}let bs=(()=>{class w{constructor(){}static applyMaskPenaltyRule1(a){return w.applyMaskPenaltyRule1Internal(a,!0)+w.applyMaskPenaltyRule1Internal(a,!1)}static applyMaskPenaltyRule2(a){let c=0,u=a.getArray(),d=a.getWidth(),f=a.getHeight();for(let p=0;p<f-1;p++){let y=u[p];for(let _=0;_<d-1;_++){let v=y[_];v===y[_+1]&&v===u[p+1][_]&&v===u[p+1][_+1]&&c++}}return w.N2*c}static applyMaskPenaltyRule3(a){let c=0,u=a.getArray(),d=a.getWidth(),f=a.getHeight();for(let p=0;p<f;p++)for(let y=0;y<d;y++){let _=u[p];y+6<d&&_[y]===1&&_[y+1]===0&&_[y+2]===1&&_[y+3]===1&&_[y+4]===1&&_[y+5]===0&&_[y+6]===1&&(w.isWhiteHorizontal(_,y-4,y)||w.isWhiteHorizontal(_,y+7,y+11))&&c++,p+6<f&&u[p][y]===1&&u[p+1][y]===0&&u[p+2][y]===1&&u[p+3][y]===1&&u[p+4][y]===1&&u[p+5][y]===0&&u[p+6][y]===1&&(w.isWhiteVertical(u,y,p-4,p)||w.isWhiteVertical(u,y,p+7,p+11))&&c++}return c*w.N3}static isWhiteHorizontal(a,c,u){c=Math.max(c,0),u=Math.min(u,a.length);for(let d=c;d<u;d++)if(a[d]===1)return!1;return!0}static isWhiteVertical(a,c,u,d){u=Math.max(u,0),d=Math.min(d,a.length);for(let f=u;f<d;f++)if(a[f][c]===1)return!1;return!0}static applyMaskPenaltyRule4(a){let c=0,u=a.getArray(),d=a.getWidth(),f=a.getHeight();for(let _=0;_<f;_++){let v=u[_];for(let I=0;I<d;I++)v[I]===1&&c++}let p=a.getHeight()*a.getWidth();return Math.floor(Math.abs(c*2-p)*10/p)*w.N4}static getDataMaskBit(a,c,u){let d,f;switch(a){case 0:d=u+c&1;break;case 1:d=u&1;break;case 2:d=c%3;break;case 3:d=(u+c)%3;break;case 4:d=Math.floor(u/2)+Math.floor(c/3)&1;break;case 5:f=u*c,d=(f&1)+f%3;break;case 6:f=u*c,d=(f&1)+f%3&1;break;case 7:f=u*c,d=f%3+(u+c&1)&1;break;default:throw new m("Invalid mask pattern: "+a)}return d===0}static applyMaskPenaltyRule1Internal(a,c){let u=0,d=c?a.getHeight():a.getWidth(),f=c?a.getWidth():a.getHeight(),p=a.getArray();for(let y=0;y<d;y++){let _=0,v=-1;for(let I=0;I<f;I++){let b=c?p[y][I]:p[I][y];b===v?_++:(_>=5&&(u+=w.N1+(_-5)),_=1,v=b)}_>=5&&(u+=w.N1+(_-5))}return u}}return w.N1=3,w.N2=3,w.N3=40,w.N4=10,w})();class vu{constructor(s,a){this.width=s,this.height=a;let c=new Array(a);for(let u=0;u!==a;u++)c[u]=new Uint8Array(s);this.bytes=c}getHeight(){return this.height}getWidth(){return this.width}get(s,a){return this.bytes[a][s]}getArray(){return this.bytes}setNumber(s,a,c){this.bytes[a][s]=c}setBoolean(s,a,c){this.bytes[a][s]=c?1:0}clear(s){for(let a of this.bytes)$.fill(a,s)}equals(s){if(!(s instanceof vu))return!1;let a=s;if(this.width!==a.width||this.height!==a.height)return!1;for(let c=0,u=this.height;c<u;++c){let d=this.bytes[c],f=a.bytes[c];for(let p=0,y=this.width;p<y;++p)if(d[p]!==f[p])return!1}return!0}toString(){let s=new yt;for(let a=0,c=this.height;a<c;++a){let u=this.bytes[a];for(let d=0,f=this.width;d<f;++d)switch(u[d]){case 0:s.append(" 0");break;case 1:s.append(" 1");break;default:s.append("  ");break}s.append(`
`)}return s.toString()}}let Cu=(()=>{class w{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){let a=new yt;return a.append(`<<
`),a.append(" mode: "),a.append(this.mode?this.mode.toString():"null"),a.append(`
 ecLevel: `),a.append(this.ecLevel?this.ecLevel.toString():"null"),a.append(`
 version: `),a.append(this.version?this.version.toString():"null"),a.append(`
 maskPattern: `),a.append(this.maskPattern.toString()),this.matrix?(a.append(`
 matrix:
`),a.append(this.matrix.toString())):a.append(`
 matrix: null
`),a.append(`>>
`),a.toString()}setMode(a){this.mode=a}setECLevel(a){this.ecLevel=a}setVersion(a){this.version=a}setMaskPattern(a){this.maskPattern=a}setMatrix(a){this.matrix=a}static isValidMaskPattern(a){return a>=0&&a<w.NUM_MASK_PATTERNS}}return w.NUM_MASK_PATTERNS=8,w})(),It=(()=>{class w extends h{}return w.kind="WriterException",w})();class _e{constructor(){}static clearMatrix(s){s.clear(255)}static buildMatrix(s,a,c,u,d){_e.clearMatrix(d),_e.embedBasicPatterns(c,d),_e.embedTypeInfo(a,u,d),_e.maybeEmbedVersionInfo(c,d),_e.embedDataBits(s,u,d)}static embedBasicPatterns(s,a){_e.embedPositionDetectionPatternsAndSeparators(a),_e.embedDarkDotAtLeftBottomCorner(a),_e.maybeEmbedPositionAdjustmentPatterns(s,a),_e.embedTimingPatterns(a)}static embedTypeInfo(s,a,c){let u=new ie;_e.makeTypeInfoBits(s,a,u);for(let d=0,f=u.getSize();d<f;++d){let p=u.get(u.getSize()-1-d),y=_e.TYPE_INFO_COORDINATES[d],_=y[0],v=y[1];if(c.setBoolean(_,v,p),d<8){let I=c.getWidth()-d-1;c.setBoolean(I,8,p)}else{let b=c.getHeight()-7+(d-8);c.setBoolean(8,b,p)}}}static maybeEmbedVersionInfo(s,a){if(s.getVersionNumber()<7)return;let c=new ie;_e.makeVersionInfoBits(s,c);let u=6*3-1;for(let d=0;d<6;++d)for(let f=0;f<3;++f){let p=c.get(u);u--,a.setBoolean(d,a.getHeight()-11+f,p),a.setBoolean(a.getHeight()-11+f,d,p)}}static embedDataBits(s,a,c){let u=0,d=-1,f=c.getWidth()-1,p=c.getHeight()-1;for(;f>0;){for(f===6&&(f-=1);p>=0&&p<c.getHeight();){for(let y=0;y<2;++y){let _=f-y;if(!_e.isEmpty(c.get(_,p)))continue;let v;u<s.getSize()?(v=s.get(u),++u):v=!1,a!==255&&bs.getDataMaskBit(a,_,p)&&(v=!v),c.setBoolean(_,p,v)}p+=d}d=-d,p+=d,f-=2}if(u!==s.getSize())throw new It("Not all bits consumed: "+u+"/"+s.getSize())}static findMSBSet(s){return 32-W.numberOfLeadingZeros(s)}static calculateBCHCode(s,a){if(a===0)throw new m("0 polynomial");let c=_e.findMSBSet(a);for(s<<=c-1;_e.findMSBSet(s)>=c;)s^=a<<_e.findMSBSet(s)-c;return s}static makeTypeInfoBits(s,a,c){if(!Cu.isValidMaskPattern(a))throw new It("Invalid mask pattern");let u=s.getBits()<<3|a;c.appendBits(u,5);let d=_e.calculateBCHCode(u,_e.TYPE_INFO_POLY);c.appendBits(d,10);let f=new ie;if(f.appendBits(_e.TYPE_INFO_MASK_PATTERN,15),c.xor(f),c.getSize()!==15)throw new It("should not happen but we got: "+c.getSize())}static makeVersionInfoBits(s,a){a.appendBits(s.getVersionNumber(),6);let c=_e.calculateBCHCode(s.getVersionNumber(),_e.VERSION_INFO_POLY);if(a.appendBits(c,12),a.getSize()!==18)throw new It("should not happen but we got: "+a.getSize())}static isEmpty(s){return s===255}static embedTimingPatterns(s){for(let a=8;a<s.getWidth()-8;++a){let c=(a+1)%2;_e.isEmpty(s.get(a,6))&&s.setNumber(a,6,c),_e.isEmpty(s.get(6,a))&&s.setNumber(6,a,c)}}static embedDarkDotAtLeftBottomCorner(s){if(s.get(8,s.getHeight()-8)===0)throw new It;s.setNumber(8,s.getHeight()-8,1)}static embedHorizontalSeparationPattern(s,a,c){for(let u=0;u<8;++u){if(!_e.isEmpty(c.get(s+u,a)))throw new It;c.setNumber(s+u,a,0)}}static embedVerticalSeparationPattern(s,a,c){for(let u=0;u<7;++u){if(!_e.isEmpty(c.get(s,a+u)))throw new It;c.setNumber(s,a+u,0)}}static embedPositionAdjustmentPattern(s,a,c){for(let u=0;u<5;++u){let d=_e.POSITION_ADJUSTMENT_PATTERN[u];for(let f=0;f<5;++f)c.setNumber(s+f,a+u,d[f])}}static embedPositionDetectionPattern(s,a,c){for(let u=0;u<7;++u){let d=_e.POSITION_DETECTION_PATTERN[u];for(let f=0;f<7;++f)c.setNumber(s+f,a+u,d[f])}}static embedPositionDetectionPatternsAndSeparators(s){let a=_e.POSITION_DETECTION_PATTERN[0].length;_e.embedPositionDetectionPattern(0,0,s),_e.embedPositionDetectionPattern(s.getWidth()-a,0,s),_e.embedPositionDetectionPattern(0,s.getWidth()-a,s);let c=8;_e.embedHorizontalSeparationPattern(0,c-1,s),_e.embedHorizontalSeparationPattern(s.getWidth()-c,c-1,s),_e.embedHorizontalSeparationPattern(0,s.getWidth()-c,s);let u=7;_e.embedVerticalSeparationPattern(u,0,s),_e.embedVerticalSeparationPattern(s.getHeight()-u-1,0,s),_e.embedVerticalSeparationPattern(u,s.getHeight()-u,s)}static maybeEmbedPositionAdjustmentPatterns(s,a){if(s.getVersionNumber()<2)return;let c=s.getVersionNumber()-1,u=_e.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[c];for(let d=0,f=u.length;d!==f;d++){let p=u[d];if(p>=0)for(let y=0;y!==f;y++){let _=u[y];_>=0&&_e.isEmpty(a.get(_,p))&&_e.embedPositionAdjustmentPattern(_-2,p-2,a)}}}}_e.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),_e.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),_e.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),_e.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),_e.VERSION_INFO_POLY=7973,_e.TYPE_INFO_POLY=1335,_e.TYPE_INFO_MASK_PATTERN=21522;class _2{constructor(s,a){this.dataBytes=s,this.errorCorrectionBytes=a}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class St{constructor(){}static calculateMaskPenalty(s){return bs.applyMaskPenaltyRule1(s)+bs.applyMaskPenaltyRule2(s)+bs.applyMaskPenaltyRule3(s)+bs.applyMaskPenaltyRule4(s)}static encode(s,a,c=null){let u=St.DEFAULT_BYTE_MODE_ENCODING,d=c!==null&&c.get(qt.CHARACTER_SET)!==void 0;d&&(u=c.get(qt.CHARACTER_SET).toString());let f=this.chooseMode(s,u),p=new ie;if(f===me.BYTE&&(d||St.DEFAULT_BYTE_MODE_ENCODING!==u)){let Q=G.getCharacterSetECIByName(u);Q!==void 0&&this.appendECI(Q,p)}this.appendModeInfo(f,p);let y=new ie;this.appendBytes(s,f,y,u);let _;if(c!==null&&c.get(qt.QR_VERSION)!==void 0){let Q=Number.parseInt(c.get(qt.QR_VERSION).toString(),10);_=ue.getVersionForNumber(Q);let B=this.calculateBitsNeeded(f,p,y,_);if(!this.willFit(B,_,a))throw new It("Data too big for requested version")}else _=this.recommendVersion(a,f,p,y);let v=new ie;v.appendBitArray(p);let I=f===me.BYTE?y.getSizeInBytes():s.length;this.appendLengthInfo(I,_,f,v),v.appendBitArray(y);let b=_.getECBlocksForLevel(a),A=_.getTotalCodewords()-b.getTotalECCodewords();this.terminateBits(A,v);let T=this.interleaveWithECBytes(v,_.getTotalCodewords(),A,b.getNumBlocks()),M=new Cu;M.setECLevel(a),M.setMode(f),M.setVersion(_);let R=_.getDimensionForVersion(),k=new vu(R,R),q=this.chooseMaskPattern(T,a,_,k);return M.setMaskPattern(q),_e.buildMatrix(T,a,_,q,k),M.setMatrix(k),M}static recommendVersion(s,a,c,u){let d=this.calculateBitsNeeded(a,c,u,ue.getVersionForNumber(1)),f=this.chooseVersion(d,s),p=this.calculateBitsNeeded(a,c,u,f);return this.chooseVersion(p,s)}static calculateBitsNeeded(s,a,c,u){return a.getSize()+s.getCharacterCountBits(u)+c.getSize()}static getAlphanumericCode(s){return s<St.ALPHANUMERIC_TABLE.length?St.ALPHANUMERIC_TABLE[s]:-1}static chooseMode(s,a=null){if(G.SJIS.getName()===a&&this.isOnlyDoubleByteKanji(s))return me.KANJI;let c=!1,u=!1;for(let d=0,f=s.length;d<f;++d){let p=s.charAt(d);if(St.isDigit(p))c=!0;else if(this.getAlphanumericCode(p.charCodeAt(0))!==-1)u=!0;else return me.BYTE}return u?me.ALPHANUMERIC:c?me.NUMERIC:me.BYTE}static isOnlyDoubleByteKanji(s){let a;try{a=Ut.encode(s,G.SJIS)}catch{return!1}let c=a.length;if(c%2!==0)return!1;for(let u=0;u<c;u+=2){let d=a[u]&255;if((d<129||d>159)&&(d<224||d>235))return!1}return!0}static chooseMaskPattern(s,a,c,u){let d=Number.MAX_SAFE_INTEGER,f=-1;for(let p=0;p<Cu.NUM_MASK_PATTERNS;p++){_e.buildMatrix(s,a,c,p,u);let y=this.calculateMaskPenalty(u);y<d&&(d=y,f=p)}return f}static chooseVersion(s,a){for(let c=1;c<=40;c++){let u=ue.getVersionForNumber(c);if(St.willFit(s,u,a))return u}throw new It("Data too big")}static willFit(s,a,c){let u=a.getTotalCodewords(),f=a.getECBlocksForLevel(c).getTotalECCodewords(),p=u-f,y=(s+7)/8;return p>=y}static terminateBits(s,a){let c=s*8;if(a.getSize()>c)throw new It("data bits cannot fit in the QR Code"+a.getSize()+" > "+c);for(let f=0;f<4&&a.getSize()<c;++f)a.appendBit(!1);let u=a.getSize()&7;if(u>0)for(let f=u;f<8;f++)a.appendBit(!1);let d=s-a.getSizeInBytes();for(let f=0;f<d;++f)a.appendBits(f&1?17:236,8);if(a.getSize()!==c)throw new It("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(s,a,c,u,d,f){if(u>=c)throw new It("Block ID too large");let p=s%c,y=c-p,_=Math.floor(s/c),v=_+1,I=Math.floor(a/c),b=I+1,A=_-I,T=v-b;if(A!==T)throw new It("EC bytes mismatch");if(c!==y+p)throw new It("RS blocks mismatch");if(s!==(I+A)*y+(b+T)*p)throw new It("Total bytes mismatch");u<y?(d[0]=I,f[0]=A):(d[0]=b,f[0]=T)}static interleaveWithECBytes(s,a,c,u){if(s.getSizeInBytes()!==c)throw new It("Number of bits and data bytes does not match");let d=0,f=0,p=0,y=new Array;for(let v=0;v<u;++v){let I=new Int32Array(1),b=new Int32Array(1);St.getNumDataBytesAndNumECBytesForBlockID(a,c,u,v,I,b);let A=I[0],T=new Uint8Array(A);s.toBytes(8*d,T,0,A);let M=St.generateECBytes(T,b[0]);y.push(new _2(T,M)),f=Math.max(f,A),p=Math.max(p,M.length),d+=I[0]}if(c!==d)throw new It("Data bytes does not match offset");let _=new ie;for(let v=0;v<f;++v)for(let I of y){let b=I.getDataBytes();v<b.length&&_.appendBits(b[v],8)}for(let v=0;v<p;++v)for(let I of y){let b=I.getErrorCorrectionBytes();v<b.length&&_.appendBits(b[v],8)}if(a!==_.getSizeInBytes())throw new It("Interleaving error: "+a+" and "+_.getSizeInBytes()+" differ.");return _}static generateECBytes(s,a){let c=s.length,u=new Int32Array(c+a);for(let f=0;f<c;f++)u[f]=s[f]&255;new _p(it.QR_CODE_FIELD_256).encode(u,a);let d=new Uint8Array(a);for(let f=0;f<a;f++)d[f]=u[c+f];return d}static appendModeInfo(s,a){a.appendBits(s.getBits(),4)}static appendLengthInfo(s,a,c,u){let d=c.getCharacterCountBits(a);if(s>=1<<d)throw new It(s+" is bigger than "+((1<<d)-1));u.appendBits(s,d)}static appendBytes(s,a,c,u){switch(a){case me.NUMERIC:St.appendNumericBytes(s,c);break;case me.ALPHANUMERIC:St.appendAlphanumericBytes(s,c);break;case me.BYTE:St.append8BitBytes(s,c,u);break;case me.KANJI:St.appendKanjiBytes(s,c);break;default:throw new It("Invalid mode: "+a)}}static getDigit(s){return s.charCodeAt(0)-48}static isDigit(s){let a=St.getDigit(s);return a>=0&&a<=9}static appendNumericBytes(s,a){let c=s.length,u=0;for(;u<c;){let d=St.getDigit(s.charAt(u));if(u+2<c){let f=St.getDigit(s.charAt(u+1)),p=St.getDigit(s.charAt(u+2));a.appendBits(d*100+f*10+p,10),u+=3}else if(u+1<c){let f=St.getDigit(s.charAt(u+1));a.appendBits(d*10+f,7),u+=2}else a.appendBits(d,4),u++}}static appendAlphanumericBytes(s,a){let c=s.length,u=0;for(;u<c;){let d=St.getAlphanumericCode(s.charCodeAt(u));if(d===-1)throw new It;if(u+1<c){let f=St.getAlphanumericCode(s.charCodeAt(u+1));if(f===-1)throw new It;a.appendBits(d*45+f,11),u+=2}else a.appendBits(d,6),u++}}static append8BitBytes(s,a,c){let u;try{u=Ut.encode(s,c)}catch(d){throw new It(d)}for(let d=0,f=u.length;d!==f;d++){let p=u[d];a.appendBits(p,8)}}static appendKanjiBytes(s,a){let c;try{c=Ut.encode(s,G.SJIS)}catch(d){throw new It(d)}let u=c.length;for(let d=0;d<u;d+=2){let f=c[d]&255,p=c[d+1]&255,y=f<<8&4294967295|p,_=-1;if(y>=33088&&y<=40956?_=y-33088:y>=57408&&y<=60351&&(_=y-49472),_===-1)throw new It("Invalid byte sequence");let v=(_>>8)*192+(_&255);a.appendBits(v,13)}}static appendECI(s,a){a.appendBits(me.ECI.getBits(),4),a.appendBits(s.getValue(),8)}}St.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),St.DEFAULT_BYTE_MODE_ENCODING=G.UTF8.getName();let w2=(()=>{class w{write(a,c,u,d=null){if(a.length===0)throw new m("Found empty contents");if(c<0||u<0)throw new m("Requested dimensions are too small: "+c+"x"+u);let f=Et.L,p=w.QUIET_ZONE_SIZE;d!==null&&(d.get(qt.ERROR_CORRECTION)!==void 0&&(f=Et.fromString(d.get(qt.ERROR_CORRECTION).toString())),d.get(qt.MARGIN)!==void 0&&(p=Number.parseInt(d.get(qt.MARGIN).toString(),10)));let y=St.encode(a,f,d);return this.renderResult(y,c,u,p)}writeToDom(a,c,u,d,f=null){typeof a=="string"&&(a=document.querySelector(a));let p=this.write(c,u,d,f);a&&a.appendChild(p)}renderResult(a,c,u,d){let f=a.getMatrix();if(f===null)throw new fi;let p=f.getWidth(),y=f.getHeight(),_=p+d*2,v=y+d*2,I=Math.max(c,_),b=Math.max(u,v),A=Math.min(Math.floor(I/_),Math.floor(b/v)),T=Math.floor((I-p*A)/2),M=Math.floor((b-y*A)/2),R=this.createSVGElement(I,b);for(let k=0,q=M;k<y;k++,q+=A)for(let Q=0,B=T;Q<p;Q++,B+=A)if(f.get(Q,k)===1){let Ve=this.createSvgRectElement(B,q,A,A);R.appendChild(Ve)}return R}createSVGElement(a,c){let u=document.createElementNS(w.SVG_NS,"svg");return u.setAttributeNS(null,"height",a.toString()),u.setAttributeNS(null,"width",c.toString()),u}createSvgRectElement(a,c,u,d){let f=document.createElementNS(w.SVG_NS,"rect");return f.setAttributeNS(null,"x",a.toString()),f.setAttributeNS(null,"y",c.toString()),f.setAttributeNS(null,"height",u.toString()),f.setAttributeNS(null,"width",d.toString()),f.setAttributeNS(null,"fill","#000000"),f}}return w.QUIET_ZONE_SIZE=4,w.SVG_NS="http://www.w3.org/2000/svg",w})(),vw=(()=>{class w{encode(a,c,u,d,f){if(a.length===0)throw new m("Found empty contents");if(c!==ye.QR_CODE)throw new m("Can only encode QR_CODE, but got "+c);if(u<0||d<0)throw new m(`Requested dimensions are too small: ${u}x${d}`);let p=Et.L,y=w.QUIET_ZONE_SIZE;f!==null&&(f.get(qt.ERROR_CORRECTION)!==void 0&&(p=Et.fromString(f.get(qt.ERROR_CORRECTION).toString())),f.get(qt.MARGIN)!==void 0&&(y=Number.parseInt(f.get(qt.MARGIN).toString(),10)));let _=St.encode(a,p,f);return w.renderResult(_,u,d,y)}static renderResult(a,c,u,d){let f=a.getMatrix();if(f===null)throw new fi;let p=f.getWidth(),y=f.getHeight(),_=p+d*2,v=y+d*2,I=Math.max(c,_),b=Math.max(u,v),A=Math.min(Math.floor(I/_),Math.floor(b/v)),T=Math.floor((I-p*A)/2),M=Math.floor((b-y*A)/2),R=new en(I,b);for(let k=0,q=M;k<y;k++,q+=A)for(let Q=0,B=T;Q<p;Q++,B+=A)f.get(Q,k)===1&&R.setRegion(B,q,A,A);return R}}return w.QUIET_ZONE_SIZE=4,w})();class v2{encode(s,a,c,u,d){let f;switch(a){case ye.QR_CODE:f=new vw;break;default:throw new m("No encoder available for format "+a)}return f.encode(s,a,c,u,d)}}let C2=(()=>{class w extends Qa{constructor(a,c,u,d,f,p,y,_){if(super(p,y),this.yuvData=a,this.dataWidth=c,this.dataHeight=u,this.left=d,this.top=f,d+p>c||f+y>u)throw new m("Crop rectangle does not fit within image data.");_&&this.reverseHorizontal(p,y)}getRow(a,c){if(a<0||a>=this.getHeight())throw new m("Requested row is outside the image: "+a);let u=this.getWidth();(c==null||c.length<u)&&(c=new Uint8ClampedArray(u));let d=(a+this.top)*this.dataWidth+this.left;return D.arraycopy(this.yuvData,d,c,0,u),c}getMatrix(){let a=this.getWidth(),c=this.getHeight();if(a===this.dataWidth&&c===this.dataHeight)return this.yuvData;let u=a*c,d=new Uint8ClampedArray(u),f=this.top*this.dataWidth+this.left;if(a===this.dataWidth)return D.arraycopy(this.yuvData,f,d,0,u),d;for(let p=0;p<c;p++){let y=p*a;D.arraycopy(this.yuvData,f,d,y,a),f+=this.dataWidth}return d}isCropSupported(){return!0}crop(a,c,u,d){return new w(this.yuvData,this.dataWidth,this.dataHeight,this.left+a,this.top+c,u,d,!1)}renderThumbnail(){let a=this.getWidth()/w.THUMBNAIL_SCALE_FACTOR,c=this.getHeight()/w.THUMBNAIL_SCALE_FACTOR,u=new Int32Array(a*c),d=this.yuvData,f=this.top*this.dataWidth+this.left;for(let p=0;p<c;p++){let y=p*a;for(let _=0;_<a;_++){let v=d[f+_*w.THUMBNAIL_SCALE_FACTOR]&255;u[y+_]=4278190080|v*65793}f+=this.dataWidth*w.THUMBNAIL_SCALE_FACTOR}return u}getThumbnailWidth(){return this.getWidth()/w.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/w.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(a,c){let u=this.yuvData;for(let d=0,f=this.top*this.dataWidth+this.left;d<c;d++,f+=this.dataWidth){let p=f+a/2;for(let y=f,_=f+a-1;y<p;y++,_--){let v=u[y];u[y]=u[_],u[_]=v}}}invert(){return new zi(this)}}return w.THUMBNAIL_SCALE_FACTOR=2,w})();class wp extends Qa{constructor(s,a,c,u,d,f,p){if(super(a,c),this.dataWidth=u,this.dataHeight=d,this.left=f,this.top=p,s.BYTES_PER_ELEMENT===4){let y=a*c,_=new Uint8ClampedArray(y);for(let v=0;v<y;v++){let I=s[v],b=I>>16&255,A=I>>7&510,T=I&255;_[v]=(b+A+T)/4&255}this.luminances=_}else this.luminances=s;if(u===void 0&&(this.dataWidth=a),d===void 0&&(this.dataHeight=c),f===void 0&&(this.left=0),p===void 0&&(this.top=0),this.left+a>this.dataWidth||this.top+c>this.dataHeight)throw new m("Crop rectangle does not fit within image data.")}getRow(s,a){if(s<0||s>=this.getHeight())throw new m("Requested row is outside the image: "+s);let c=this.getWidth();(a==null||a.length<c)&&(a=new Uint8ClampedArray(c));let u=(s+this.top)*this.dataWidth+this.left;return D.arraycopy(this.luminances,u,a,0,c),a}getMatrix(){let s=this.getWidth(),a=this.getHeight();if(s===this.dataWidth&&a===this.dataHeight)return this.luminances;let c=s*a,u=new Uint8ClampedArray(c),d=this.top*this.dataWidth+this.left;if(s===this.dataWidth)return D.arraycopy(this.luminances,d,u,0,c),u;for(let f=0;f<a;f++){let p=f*s;D.arraycopy(this.luminances,d,u,p,s),d+=this.dataWidth}return u}isCropSupported(){return!0}crop(s,a,c,u){return new wp(this.luminances,c,u,this.dataWidth,this.dataHeight,this.left+s,this.top+a)}invert(){return new zi(this)}}class Cw extends G{static forName(s){return this.getCharacterSetECIByName(s)}}class vp{}vp.ISO_8859_1=G.ISO8859_1;class Ew{isCompact(){return this.compact}setCompact(s){this.compact=s}getSize(){return this.size}setSize(s){this.size=s}getLayers(){return this.layers}setLayers(s){this.layers=s}getCodeWords(){return this.codeWords}setCodeWords(s){this.codeWords=s}getMatrix(){return this.matrix}setMatrix(s){this.matrix=s}}class Iw{static singletonList(s){return[s]}static min(s,a){return s.sort(a)[0]}}class E2{constructor(s){this.previous=s}getPrevious(){return this.previous}}class xs extends E2{constructor(s,a,c){super(s),this.value=a,this.bitCount=c}appendTo(s,a){s.appendBits(this.value,this.bitCount)}add(s,a){return new xs(this,s,a)}addBinaryShift(s,a){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new xs(this,s,a)}toString(){let s=this.value&(1<<this.bitCount)-1;return s|=1<<this.bitCount,"<"+W.toBinaryString(s|1<<this.bitCount).substring(1)+">"}}class Cp extends xs{constructor(s,a,c){super(s,0,0),this.binaryShiftStart=a,this.binaryShiftByteCount=c}appendTo(s,a){for(let c=0;c<this.binaryShiftByteCount;c++)(c===0||c===31&&this.binaryShiftByteCount<=62)&&(s.appendBits(31,5),this.binaryShiftByteCount>62?s.appendBits(this.binaryShiftByteCount-31,16):c===0?s.appendBits(Math.min(this.binaryShiftByteCount,31),5):s.appendBits(this.binaryShiftByteCount-31,5)),s.appendBits(a[this.binaryShiftStart+c],8)}addBinaryShift(s,a){return new Cp(this,s,a)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function I2(w,s,a){return new Cp(w,s,a)}function cc(w,s,a){return new xs(w,s,a)}let b2=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Qi=0,Eu=1,cr=2,bw=3,Gr=4,x2=new xs(null,0,0),Ep=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function S2(w){for(let s of w)$.fill(s,-1);return w[Qi][Gr]=0,w[Eu][Gr]=0,w[Eu][Qi]=28,w[bw][Gr]=0,w[cr][Gr]=0,w[cr][Qi]=15,w}let xw=S2($.createInt32Array(6,6));class $r{constructor(s,a,c,u){this.token=s,this.mode=a,this.binaryShiftByteCount=c,this.bitCount=u}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(s,a){let c=this.bitCount,u=this.token;if(s!==this.mode){let f=Ep[this.mode][s];u=cc(u,f&65535,f>>16),c+=f>>16}let d=s===cr?4:5;return u=cc(u,a,d),new $r(u,s,0,c+d)}shiftAndAppend(s,a){let c=this.token,u=this.mode===cr?4:5;return c=cc(c,xw[this.mode][s],u),c=cc(c,a,5),new $r(c,this.mode,0,this.bitCount+u+5)}addBinaryShiftChar(s){let a=this.token,c=this.mode,u=this.bitCount;if(this.mode===Gr||this.mode===cr){let p=Ep[c][Qi];a=cc(a,p&65535,p>>16),u+=p>>16,c=Qi}let d=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,f=new $r(a,c,this.binaryShiftByteCount+1,u+d);return f.binaryShiftByteCount===2078&&(f=f.endBinaryShift(s+1)),f}endBinaryShift(s){if(this.binaryShiftByteCount===0)return this;let a=this.token;return a=I2(a,s-this.binaryShiftByteCount,this.binaryShiftByteCount),new $r(a,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(s){let a=this.bitCount+(Ep[this.mode][s.mode]>>16);return this.binaryShiftByteCount<s.binaryShiftByteCount?a+=$r.calculateBinaryShiftCost(s)-$r.calculateBinaryShiftCost(this):this.binaryShiftByteCount>s.binaryShiftByteCount&&s.binaryShiftByteCount>0&&(a+=10),a<=s.bitCount}toBitArray(s){let a=[];for(let u=this.endBinaryShift(s.length).token;u!==null;u=u.getPrevious())a.unshift(u);let c=new ie;for(let u of a)u.appendTo(c,s);return c}toString(){return Ce.format("%s bits=%d bytes=%d",b2[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(s){return s.binaryShiftByteCount>62?21:s.binaryShiftByteCount>31?20:s.binaryShiftByteCount>0?10:0}}$r.INITIAL_STATE=new $r(x2,Qi,0,0);function A2(w){let s=Ce.getCharCode(" "),a=Ce.getCharCode("."),c=Ce.getCharCode(",");w[Qi][s]=1;let u=Ce.getCharCode("Z"),d=Ce.getCharCode("A");for(let b=d;b<=u;b++)w[Qi][b]=b-d+2;w[Eu][s]=1;let f=Ce.getCharCode("z"),p=Ce.getCharCode("a");for(let b=p;b<=f;b++)w[Eu][b]=b-p+2;w[cr][s]=1;let y=Ce.getCharCode("9"),_=Ce.getCharCode("0");for(let b=_;b<=y;b++)w[cr][b]=b-_+2;w[cr][c]=12,w[cr][a]=13;let v=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~","\x7F"];for(let b=0;b<v.length;b++)w[bw][Ce.getCharCode(v[b])]=b;let I=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let b=0;b<I.length;b++)Ce.getCharCode(I[b])>0&&(w[Gr][Ce.getCharCode(I[b])]=b);return w}let Ip=A2($.createInt32Array(5,256));class lc{constructor(s){this.text=s}encode(){let s=Ce.getCharCode(" "),a=Ce.getCharCode(`
`),c=Iw.singletonList($r.INITIAL_STATE);for(let d=0;d<this.text.length;d++){let f,p=d+1<this.text.length?this.text[d+1]:0;switch(this.text[d]){case Ce.getCharCode("\r"):f=p===a?2:0;break;case Ce.getCharCode("."):f=p===s?3:0;break;case Ce.getCharCode(","):f=p===s?4:0;break;case Ce.getCharCode(":"):f=p===s?5:0;break;default:f=0}f>0?(c=lc.updateStateListForPair(c,d,f),d++):c=this.updateStateListForChar(c,d)}return Iw.min(c,(d,f)=>d.getBitCount()-f.getBitCount()).toBitArray(this.text)}updateStateListForChar(s,a){let c=[];for(let u of s)this.updateStateForChar(u,a,c);return lc.simplifyStates(c)}updateStateForChar(s,a,c){let u=this.text[a]&255,d=Ip[s.getMode()][u]>0,f=null;for(let p=0;p<=Gr;p++){let y=Ip[p][u];if(y>0){if(f==null&&(f=s.endBinaryShift(a)),!d||p===s.getMode()||p===cr){let _=f.latchAndAppend(p,y);c.push(_)}if(!d&&xw[s.getMode()][p]>=0){let _=f.shiftAndAppend(p,y);c.push(_)}}}if(s.getBinaryShiftByteCount()>0||Ip[s.getMode()][u]===0){let p=s.addBinaryShiftChar(a);c.push(p)}}static updateStateListForPair(s,a,c){let u=[];for(let d of s)this.updateStateForPair(d,a,c,u);return this.simplifyStates(u)}static updateStateForPair(s,a,c,u){let d=s.endBinaryShift(a);if(u.push(d.latchAndAppend(Gr,c)),s.getMode()!==Gr&&u.push(d.shiftAndAppend(Gr,c)),c===3||c===4){let f=d.latchAndAppend(cr,16-c).latchAndAppend(cr,1);u.push(f)}if(s.getBinaryShiftByteCount()>0){let f=s.addBinaryShiftChar(a).addBinaryShiftChar(a+1);u.push(f)}}static simplifyStates(s){let a=[];for(let c of s){let u=!0;for(let d of a){if(d.isBetterThanOrEqualTo(c)){u=!1;break}c.isBetterThanOrEqualTo(d)&&(a=a.filter(f=>f!==d))}u&&a.push(c)}return a}}class et{constructor(){}static encodeBytes(s){return et.encode(s,et.DEFAULT_EC_PERCENT,et.DEFAULT_AZTEC_LAYERS)}static encode(s,a,c){let u=new lc(s).encode(),d=W.truncDivision(u.getSize()*a,100)+11,f=u.getSize()+d,p,y,_,v,I;if(c!==et.DEFAULT_AZTEC_LAYERS){if(p=c<0,y=Math.abs(c),y>(p?et.MAX_NB_BITS_COMPACT:et.MAX_NB_BITS))throw new m(Ce.format("Illegal value %s for layers",c));_=et.totalBitsInLayer(y,p),v=et.WORD_SIZE[y];let B=_-_%v;if(I=et.stuffBits(u,v),I.getSize()+d>B)throw new m("Data to large for user specified layer");if(p&&I.getSize()>v*64)throw new m("Data to large for user specified layer")}else{v=0,I=null;for(let B=0;;B++){if(B>et.MAX_NB_BITS)throw new m("Data too large for an Aztec code");if(p=B<=3,y=p?B+1:B,_=et.totalBitsInLayer(y,p),f>_)continue;(I==null||v!==et.WORD_SIZE[y])&&(v=et.WORD_SIZE[y],I=et.stuffBits(u,v));let Ve=_-_%v;if(!(p&&I.getSize()>v*64)&&I.getSize()+d<=Ve)break}}let b=et.generateCheckWords(I,_,v),A=I.getSize()/v,T=et.generateModeMessage(p,y,A),M=(p?11:14)+y*4,R=new Int32Array(M),k;if(p){k=M;for(let B=0;B<R.length;B++)R[B]=B}else{k=M+1+2*W.truncDivision(W.truncDivision(M,2)-1,15);let B=W.truncDivision(M,2),Ve=W.truncDivision(k,2);for(let De=0;De<B;De++){let Ln=De+W.truncDivision(De,15);R[B-De-1]=Ve-Ln-1,R[B+De]=Ve+Ln+1}}let q=new en(k);for(let B=0,Ve=0;B<y;B++){let De=(y-B)*4+(p?9:12);for(let Ln=0;Ln<De;Ln++){let Tr=Ln*2;for(let Fn=0;Fn<2;Fn++)b.get(Ve+Tr+Fn)&&q.set(R[B*2+Fn],R[B*2+Ln]),b.get(Ve+De*2+Tr+Fn)&&q.set(R[B*2+Ln],R[M-1-B*2-Fn]),b.get(Ve+De*4+Tr+Fn)&&q.set(R[M-1-B*2-Fn],R[M-1-B*2-Ln]),b.get(Ve+De*6+Tr+Fn)&&q.set(R[M-1-B*2-Ln],R[B*2+Fn])}Ve+=De*8}if(et.drawModeMessage(q,p,k,T),p)et.drawBullsEye(q,W.truncDivision(k,2),5);else{et.drawBullsEye(q,W.truncDivision(k,2),7);for(let B=0,Ve=0;B<W.truncDivision(M,2)-1;B+=15,Ve+=16)for(let De=W.truncDivision(k,2)&1;De<k;De+=2)q.set(W.truncDivision(k,2)-Ve,De),q.set(W.truncDivision(k,2)+Ve,De),q.set(De,W.truncDivision(k,2)-Ve),q.set(De,W.truncDivision(k,2)+Ve)}let Q=new Ew;return Q.setCompact(p),Q.setSize(k),Q.setLayers(y),Q.setCodeWords(A),Q.setMatrix(q),Q}static drawBullsEye(s,a,c){for(let u=0;u<c;u+=2)for(let d=a-u;d<=a+u;d++)s.set(d,a-u),s.set(d,a+u),s.set(a-u,d),s.set(a+u,d);s.set(a-c,a-c),s.set(a-c+1,a-c),s.set(a-c,a-c+1),s.set(a+c,a-c),s.set(a+c,a-c+1),s.set(a+c,a+c-1)}static generateModeMessage(s,a,c){let u=new ie;return s?(u.appendBits(a-1,2),u.appendBits(c-1,6),u=et.generateCheckWords(u,28,4)):(u.appendBits(a-1,5),u.appendBits(c-1,11),u=et.generateCheckWords(u,40,4)),u}static drawModeMessage(s,a,c,u){let d=W.truncDivision(c,2);if(a)for(let f=0;f<7;f++){let p=d-3+f;u.get(f)&&s.set(p,d-5),u.get(f+7)&&s.set(d+5,p),u.get(20-f)&&s.set(p,d+5),u.get(27-f)&&s.set(d-5,p)}else for(let f=0;f<10;f++){let p=d-5+f+W.truncDivision(f,5);u.get(f)&&s.set(p,d-7),u.get(f+10)&&s.set(d+7,p),u.get(29-f)&&s.set(p,d+7),u.get(39-f)&&s.set(d-7,p)}}static generateCheckWords(s,a,c){let u=s.getSize()/c,d=new _p(et.getGF(c)),f=W.truncDivision(a,c),p=et.bitsToWords(s,c,f);d.encode(p,f-u);let y=a%c,_=new ie;_.appendBits(0,y);for(let v of Array.from(p))_.appendBits(v,c);return _}static bitsToWords(s,a,c){let u=new Int32Array(c),d,f;for(d=0,f=s.getSize()/a;d<f;d++){let p=0;for(let y=0;y<a;y++)p|=s.get(d*a+y)?1<<a-y-1:0;u[d]=p}return u}static getGF(s){switch(s){case 4:return it.AZTEC_PARAM;case 6:return it.AZTEC_DATA_6;case 8:return it.AZTEC_DATA_8;case 10:return it.AZTEC_DATA_10;case 12:return it.AZTEC_DATA_12;default:throw new m("Unsupported word size "+s)}}static stuffBits(s,a){let c=new ie,u=s.getSize(),d=(1<<a)-2;for(let f=0;f<u;f+=a){let p=0;for(let y=0;y<a;y++)(f+y>=u||s.get(f+y))&&(p|=1<<a-1-y);(p&d)===d?(c.appendBits(p&d,a),f--):p&d?c.appendBits(p,a):(c.appendBits(p|1,a),f--)}return c}static totalBitsInLayer(s,a){return((a?88:112)+16*s)*s}}et.DEFAULT_EC_PERCENT=33,et.DEFAULT_AZTEC_LAYERS=0,et.MAX_NB_BITS=32,et.MAX_NB_BITS_COMPACT=4,et.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Iu{encode(s,a,c,u){return this.encodeWithHints(s,a,c,u,null)}encodeWithHints(s,a,c,u,d){let f=vp.ISO_8859_1,p=et.DEFAULT_EC_PERCENT,y=et.DEFAULT_AZTEC_LAYERS;return d!=null&&(d.has(qt.CHARACTER_SET)&&(f=Cw.forName(d.get(qt.CHARACTER_SET).toString())),d.has(qt.ERROR_CORRECTION)&&(p=W.parseInt(d.get(qt.ERROR_CORRECTION).toString())),d.has(qt.AZTEC_LAYERS)&&(y=W.parseInt(d.get(qt.AZTEC_LAYERS).toString()))),Iu.encodeLayers(s,a,c,u,f,p,y)}static encodeLayers(s,a,c,u,d,f,p){if(a!==ye.AZTEC)throw new m("Can only encode AZTEC, but got "+a);let y=et.encode(Ce.getBytes(s,d),f,p);return Iu.renderResult(y,c,u)}static renderResult(s,a,c){let u=s.getMatrix();if(u==null)throw new fi;let d=u.getWidth(),f=u.getHeight(),p=Math.max(a,d),y=Math.max(c,f),_=Math.min(p/d,y/f),v=(p-d*_)/2,I=(y-f*_)/2,b=new en(p,y);for(let A=0,T=I;A<f;A++,T+=_)for(let M=0,R=v;M<d;M++,R+=_)u.get(M,A)&&b.setRegion(R,T,_,_);return b}}e.AbstractExpandedDecoder=cp,e.ArgumentException=g,e.ArithmeticException=tp,e.AztecCode=Ew,e.AztecCodeReader=hu,e.AztecCodeWriter=Iu,e.AztecDecoder=np,e.AztecDetector=iw,e.AztecDetectorResult=nw,e.AztecEncoder=et,e.AztecHighLevelEncoder=lc,e.AztecPoint=Tn,e.BarcodeFormat=ye,e.Binarizer=x,e.BinaryBitmap=C,e.BitArray=ie,e.BitMatrix=en,e.BitSource=fp,e.BrowserAztecCodeReader=WT,e.BrowserBarcodeReader=JT,e.BrowserCodeReader=To,e.BrowserDatamatrixCodeReader=t2,e.BrowserMultiFormatReader=g2,e.BrowserPDF417Reader=m2,e.BrowserQRCodeReader=y2,e.BrowserQRCodeSvgWriter=w2,e.CharacterSetECI=G,e.ChecksumException=E,e.Code128Reader=Z,e.Code39Reader=ip,e.DataMatrixDecodedBitStreamParser=Yi,e.DataMatrixReader=yu,e.DecodeHintType=he,e.DecoderResult=Ka,e.DefaultGridSampler=rw,e.DetectorResult=du,e.EAN13Reader=pu,e.EncodeHintType=qt,e.Exception=h,e.FormatException=H,e.GenericGF=it,e.GenericGFPoly=Pn,e.GlobalHistogramBinarizer=tn,e.GridSampler=rp,e.GridSamplerInstance=Gi,e.HTMLCanvasElementLuminanceSource=Wi,e.HybridBinarizer=Ne,e.ITFReader=_t,e.IllegalArgumentException=m,e.IllegalStateException=fi,e.InvertedLuminanceSource=zi,e.LuminanceSource=Qa,e.MathUtils=Je,e.MultiFormatOneDReader=Is,e.MultiFormatReader=_w,e.MultiFormatWriter=v2,e.NotFoundException=V,e.OneDReader=jt,e.PDF417DecodedBitStreamParser=F,e.PDF417DecoderErrorCorrection=fw,e.PDF417Reader=ln,e.PDF417ResultMetadata=gw,e.PerspectiveTransform=br,e.PlanarYUVLuminanceSource=C2,e.QRCodeByteMatrix=vu,e.QRCodeDataMask=ar,e.QRCodeDecodedBitStreamParser=uw,e.QRCodeDecoderErrorCorrectionLevel=Et,e.QRCodeDecoderFormatInformation=wn,e.QRCodeEncoder=St,e.QRCodeEncoderQRCode=Cu,e.QRCodeMaskUtil=bs,e.QRCodeMatrixUtil=_e,e.QRCodeMode=me,e.QRCodeReader=Zi,e.QRCodeVersion=ue,e.QRCodeWriter=vw,e.RGBLuminanceSource=wp,e.RSS14Reader=Rt,e.RSSExpandedReader=z,e.ReaderException=yp,e.ReedSolomonDecoder=tc,e.ReedSolomonEncoder=_p,e.ReedSolomonException=ec,e.Result=Dn,e.ResultMetadataType=nn,e.ResultPoint=se,e.StringUtils=Ce,e.UnsupportedOperationException=Sn,e.VideoInputDevice=J_,e.WhiteRectangleDetector=fu,e.WriterException=It,e.ZXingArrays=$,e.ZXingCharset=Cw,e.ZXingInteger=W,e.ZXingStandardCharsets=vp,e.ZXingStringBuilder=yt,e.ZXingStringEncoding=Ut,e.ZXingSystem=D,e.createAbstractExpandedDecoder=lw,Object.defineProperty(e,"__esModule",{value:!0})})});function Mw(e,t){return Object.is(e,t)}var Yt=null,bu=!1,xu=1,hi=Symbol("SIGNAL");function We(e){let t=Yt;return Yt=e,t}function Nw(){return Yt}var dc={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Ap(e){if(bu)throw new Error("");if(Yt===null)return;Yt.consumerOnSignalRead(e);let t=Yt.nextProducerIndex++;if(Tu(Yt),t<Yt.producerNode.length&&Yt.producerNode[t]!==e&&uc(Yt)){let n=Yt.producerNode[t];Du(n,Yt.producerIndexOfThis[t])}Yt.producerNode[t]!==e&&(Yt.producerNode[t]=e,Yt.producerIndexOfThis[t]=uc(Yt)?kw(e,Yt,t):0),Yt.producerLastReadVersion[t]=e.version}function B2(){xu++}function Rw(e){if(!(uc(e)&&!e.dirty)&&!(!e.dirty&&e.lastCleanEpoch===xu)){if(!e.producerMustRecompute(e)&&!Tp(e)){e.dirty=!1,e.lastCleanEpoch=xu;return}e.producerRecomputeValue(e),e.dirty=!1,e.lastCleanEpoch=xu}}function Ow(e){if(e.liveConsumerNode===void 0)return;let t=bu;bu=!0;try{for(let n of e.liveConsumerNode)n.dirty||V2(n)}finally{bu=t}}function Pw(){return Yt?.consumerAllowSignalWrites!==!1}function V2(e){e.dirty=!0,Ow(e),e.consumerMarkedDirty?.(e)}function Au(e){return e&&(e.nextProducerIndex=0),We(e)}function Dp(e,t){if(We(t),!(!e||e.producerNode===void 0||e.producerIndexOfThis===void 0||e.producerLastReadVersion===void 0)){if(uc(e))for(let n=e.nextProducerIndex;n<e.producerNode.length;n++)Du(e.producerNode[n],e.producerIndexOfThis[n]);for(;e.producerNode.length>e.nextProducerIndex;)e.producerNode.pop(),e.producerLastReadVersion.pop(),e.producerIndexOfThis.pop()}}function Tp(e){Tu(e);for(let t=0;t<e.producerNode.length;t++){let n=e.producerNode[t],r=e.producerLastReadVersion[t];if(r!==n.version||(Rw(n),r!==n.version))return!0}return!1}function Mp(e){if(Tu(e),uc(e))for(let t=0;t<e.producerNode.length;t++)Du(e.producerNode[t],e.producerIndexOfThis[t]);e.producerNode.length=e.producerLastReadVersion.length=e.producerIndexOfThis.length=0,e.liveConsumerNode&&(e.liveConsumerNode.length=e.liveConsumerIndexOfThis.length=0)}function kw(e,t,n){if(Lw(e),e.liveConsumerNode.length===0&&Fw(e))for(let r=0;r<e.producerNode.length;r++)e.producerIndexOfThis[r]=kw(e.producerNode[r],e,r);return e.liveConsumerIndexOfThis.push(n),e.liveConsumerNode.push(t)-1}function Du(e,t){if(Lw(e),e.liveConsumerNode.length===1&&Fw(e))for(let r=0;r<e.producerNode.length;r++)Du(e.producerNode[r],e.producerIndexOfThis[r]);let n=e.liveConsumerNode.length-1;if(e.liveConsumerNode[t]=e.liveConsumerNode[n],e.liveConsumerIndexOfThis[t]=e.liveConsumerIndexOfThis[n],e.liveConsumerNode.length--,e.liveConsumerIndexOfThis.length--,t<e.liveConsumerNode.length){let r=e.liveConsumerIndexOfThis[t],i=e.liveConsumerNode[t];Tu(i),i.producerIndexOfThis[r]=t}}function uc(e){return e.consumerIsAlwaysLive||(e?.liveConsumerNode?.length??0)>0}function Tu(e){e.producerNode??=[],e.producerIndexOfThis??=[],e.producerLastReadVersion??=[]}function Lw(e){e.liveConsumerNode??=[],e.liveConsumerIndexOfThis??=[]}function Fw(e){return e.producerNode!==void 0}function Bw(e){let t=Object.create(U2);t.computation=e;let n=()=>{if(Rw(t),Ap(t),t.value===Su)throw t.error;return t.value};return n[hi]=t,n}var xp=Symbol("UNSET"),Sp=Symbol("COMPUTING"),Su=Symbol("ERRORED"),U2=Ue(K({},dc),{value:xp,dirty:!0,error:null,equal:Mw,producerMustRecompute(e){return e.value===xp||e.value===Sp},producerRecomputeValue(e){if(e.value===Sp)throw new Error("Detected cycle in computations.");let t=e.value;e.value=Sp;let n=Au(e),r;try{r=e.computation()}catch(i){r=Su,e.error=i}finally{Dp(e,n)}if(t!==xp&&t!==Su&&r!==Su&&e.equal(t,r)){e.value=t;return}e.value=r,e.version++}});function j2(){throw new Error}var Vw=j2;function Uw(){Vw()}function jw(e){Vw=e}var H2=null;function Hw(e){let t=Object.create(Ww);t.value=e;let n=()=>(Ap(t),t.value);return n[hi]=t,n}function Np(e,t){Pw()||Uw(),e.equal(e.value,t)||(e.value=t,z2(e))}function zw(e,t){Pw()||Uw(),Np(e,t(e.value))}var Ww=Ue(K({},dc),{equal:Mw,value:void 0});function z2(e){e.version++,B2(),Ow(e),H2?.()}function Ae(e){return typeof e=="function"}function Ds(e){let n=e(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Mu=Ds(e=>function(n){e(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Po(e,t){if(e){let n=e.indexOf(t);0<=n&&e.splice(n,1)}}var Ot=class e{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(Ae(r))try{r()}catch(o){t=o instanceof Mu?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{Gw(o)}catch(l){t=t??[],l instanceof Mu?t=[...t,...l.errors]:t.push(l)}}if(t)throw new Mu(t)}}add(t){var n;if(t&&t!==this)if(this.closed)Gw(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(t)}}_hasParent(t){let{_parentage:n}=this;return n===t||Array.isArray(n)&&n.includes(t)}_addParent(t){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t}_removeParent(t){let{_parentage:n}=this;n===t?this._parentage=null:Array.isArray(n)&&Po(n,t)}remove(t){let{_finalizers:n}=this;n&&Po(n,t),t instanceof e&&t._removeParent(this)}};Ot.EMPTY=(()=>{let e=new Ot;return e.closed=!0,e})();var Rp=Ot.EMPTY;function Nu(e){return e instanceof Ot||e&&"closed"in e&&Ae(e.remove)&&Ae(e.add)&&Ae(e.unsubscribe)}function Gw(e){Ae(e)?e():e.unsubscribe()}var Mr={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Ts={setTimeout(e,t,...n){let{delegate:r}=Ts;return r?.setTimeout?r.setTimeout(e,t,...n):setTimeout(e,t,...n)},clearTimeout(e){let{delegate:t}=Ts;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0};function Ru(e){Ts.setTimeout(()=>{let{onUnhandledError:t}=Mr;if(t)t(e);else throw e})}function fc(){}var $w=Op("C",void 0,void 0);function qw(e){return Op("E",void 0,e)}function Yw(e){return Op("N",e,void 0)}function Op(e,t,n){return{kind:e,value:t,error:n}}var ko=null;function Ms(e){if(Mr.useDeprecatedSynchronousErrorHandling){let t=!ko;if(t&&(ko={errorThrown:!1,error:null}),e(),t){let{errorThrown:n,error:r}=ko;if(ko=null,n)throw r}}else e()}function Zw(e){Mr.useDeprecatedSynchronousErrorHandling&&ko&&(ko.errorThrown=!0,ko.error=e)}var Lo=class extends Ot{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,Nu(t)&&t.add(this)):this.destination=$2}static create(t,n,r){return new Ns(t,n,r)}next(t){this.isStopped?kp(Yw(t),this):this._next(t)}error(t){this.isStopped?kp(qw(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?kp($w,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},W2=Function.prototype.bind;function Pp(e,t){return W2.call(e,t)}var Lp=class{constructor(t){this.partialObserver=t}next(t){let{partialObserver:n}=this;if(n.next)try{n.next(t)}catch(r){Ou(r)}}error(t){let{partialObserver:n}=this;if(n.error)try{n.error(t)}catch(r){Ou(r)}else Ou(t)}complete(){let{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(n){Ou(n)}}},Ns=class extends Lo{constructor(t,n,r){super();let i;if(Ae(t)||!t)i={next:t??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&Mr.useDeprecatedNextContext?(o=Object.create(t),o.unsubscribe=()=>this.unsubscribe(),i={next:t.next&&Pp(t.next,o),error:t.error&&Pp(t.error,o),complete:t.complete&&Pp(t.complete,o)}):i=t}this.destination=new Lp(i)}};function Ou(e){Mr.useDeprecatedSynchronousErrorHandling?Zw(e):Ru(e)}function G2(e){throw e}function kp(e,t){let{onStoppedNotification:n}=Mr;n&&Ts.setTimeout(()=>n(e,t))}var $2={closed:!0,next:fc,error:G2,complete:fc};var Rs=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Kn(e){return e}function Fp(...e){return Bp(e)}function Bp(e){return e.length===0?Kn:e.length===1?e[0]:function(n){return e.reduce((r,i)=>i(r),n)}}var be=(()=>{class e{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new e;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=Y2(n)?n:new Ns(n,r,i);return Ms(()=>{let{operator:l,source:h}=this;o.add(l?l.call(o,h):h?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=Xw(r),new r((i,o)=>{let l=new Ns({next:h=>{try{n(h)}catch(g){o(g),l.unsubscribe()}},error:o,complete:i});this.subscribe(l)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Rs](){return this}pipe(...n){return Bp(n)(this)}toPromise(n){return n=Xw(n),new n((r,i)=>{let o;this.subscribe(l=>o=l,l=>i(l),()=>r(o))})}}return e.create=t=>new e(t),e})();function Xw(e){var t;return(t=e??Mr.Promise)!==null&&t!==void 0?t:Promise}function q2(e){return e&&Ae(e.next)&&Ae(e.error)&&Ae(e.complete)}function Y2(e){return e&&e instanceof Lo||q2(e)&&Nu(e)}function Vp(e){return Ae(e?.lift)}function Xe(e){return t=>{if(Vp(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function $e(e,t,n,r,i){return new Up(e,t,n,r,i)}var Up=class extends Lo{constructor(t,n,r,i,o,l){super(t),this.onFinalize=o,this.shouldUnsubscribe=l,this._next=n?function(h){try{n(h)}catch(g){t.error(g)}}:super._next,this._error=i?function(h){try{i(h)}catch(g){t.error(g)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(h){t.error(h)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((t=this.onFinalize)===null||t===void 0||t.call(this))}}};function Os(){return Xe((e,t)=>{let n=null;e._refCount++;let r=$e(t,void 0,void 0,void 0,()=>{if(!e||e._refCount<=0||0<--e._refCount){n=null;return}let i=e._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),t.unsubscribe()});e.subscribe(r),r.closed||(n=e.connect())})}var Ps=class extends be{constructor(t,n){super(),this.source=t,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Vp(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){let t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new Ot;let n=this.getSubject();t.add(this.source.subscribe($e(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),t.closed&&(this._connection=null,t=Ot.EMPTY)}return t}refCount(){return Os()(this)}};var Qw=Ds(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var dn=(()=>{class e extends be{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Pu(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new Qw}next(n){Ms(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Ms(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Ms(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Rp:(this.currentObservers=null,o.push(n),new Ot(()=>{this.currentObservers=null,Po(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new be;return n.source=this,n}}return e.create=(t,n)=>new Pu(t,n),e})(),Pu=class extends dn{constructor(t,n){super(),this.destination=t,this.source=n}next(t){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,t)}error(t){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,t)}complete(){var t,n;(n=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||n===void 0||n.call(t)}_subscribe(t){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(t))!==null&&r!==void 0?r:Rp}};var fn=class extends dn{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){let n=super._subscribe(t);return!n.closed&&t.next(this._value),n}getValue(){let{hasError:t,thrownError:n,_value:r}=this;if(t)throw n;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}};var jp={now(){return(jp.delegate||Date).now()},delegate:void 0};var ku=class extends Ot{constructor(t,n){super()}schedule(t,n=0){return this}};var hc={setInterval(e,t,...n){let{delegate:r}=hc;return r?.setInterval?r.setInterval(e,t,...n):setInterval(e,t,...n)},clearInterval(e){let{delegate:t}=hc;return(t?.clearInterval||clearInterval)(e)},delegate:void 0};var Lu=class extends ku{constructor(t,n){super(t,n),this.scheduler=t,this.work=n,this.pending=!1}schedule(t,n=0){var r;if(this.closed)return this;this.state=t;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(t,n,r=0){return hc.setInterval(t.flush.bind(t,this),r)}recycleAsyncId(t,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&hc.clearInterval(n)}execute(t,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(t,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,n){let r=!1,i;try{this.work(t)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:t,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Po(r,this),t!=null&&(this.id=this.recycleAsyncId(n,t,null)),this.delay=null,super.unsubscribe()}}};var ks=class e{constructor(t,n=e.now){this.schedulerActionCtor=t,this.now=n}schedule(t,n=0,r){return new this.schedulerActionCtor(this,t).schedule(r,n)}};ks.now=jp.now;var Fu=class extends ks{constructor(t,n=ks.now){super(t,n),this.actions=[],this._active=!1}flush(t){let{actions:n}=this;if(this._active){n.push(t);return}let r;this._active=!0;do if(r=t.execute(t.state,t.delay))break;while(t=n.shift());if(this._active=!1,r){for(;t=n.shift();)t.unsubscribe();throw r}}};var Kw=new Fu(Lu),Jw=Kw;var Jn=new be(e=>e.complete());function Bu(e){return e&&Ae(e.schedule)}function ev(e){return e[e.length-1]}function Vu(e){return Ae(ev(e))?e.pop():void 0}function Ki(e){return Bu(ev(e))?e.pop():void 0}function Hp(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function nv(e,t,n,r){function i(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function h(C){try{m(r.next(C))}catch(E){l(E)}}function g(C){try{m(r.throw(C))}catch(E){l(E)}}function m(C){C.done?o(C.value):i(C.value).then(h,g)}m((r=r.apply(e,t||[])).next())})}function tv(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Fo(e){return this instanceof Fo?(this.v=e,this):new Fo(e)}function rv(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),h("next"),h("throw"),h("return",l),i[Symbol.asyncIterator]=function(){return this},i;function l(D){return function(N){return Promise.resolve(N).then(D,E)}}function h(D,N){r[D]&&(i[D]=function(U){return new Promise(function($,W){o.push([D,U,$,W])>1||g(D,U)})},N&&(i[D]=N(i[D])))}function g(D,N){try{m(r[D](N))}catch(U){x(o[0][3],U)}}function m(D){D.value instanceof Fo?Promise.resolve(D.value.v).then(C,E):x(o[0][2],D)}function C(D){g("next",D)}function E(D){g("throw",D)}function x(D,N){D(N),o.shift(),o.length&&g(o[0][0],o[0][1])}}function iv(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof tv=="function"?tv(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=e[o]&&function(l){return new Promise(function(h,g){l=e[o](l),i(h,g,l.done,l.value)})}}function i(o,l,h,g){Promise.resolve(g).then(function(m){o({value:m,done:h})},l)}}var Uu=e=>e&&typeof e.length=="number"&&typeof e!="function";function ju(e){return Ae(e?.then)}function Hu(e){return Ae(e[Rs])}function zu(e){return Symbol.asyncIterator&&Ae(e?.[Symbol.asyncIterator])}function Wu(e){return new TypeError(`You provided ${e!==null&&typeof e=="object"?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function Z2(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Gu=Z2();function $u(e){return Ae(e?.[Gu])}function qu(e){return rv(this,arguments,function*(){let n=e.getReader();try{for(;;){let{value:r,done:i}=yield Fo(n.read());if(i)return yield Fo(void 0);yield yield Fo(r)}}finally{n.releaseLock()}})}function Yu(e){return Ae(e?.getReader)}function Ht(e){if(e instanceof be)return e;if(e!=null){if(Hu(e))return X2(e);if(Uu(e))return Q2(e);if(ju(e))return K2(e);if(zu(e))return ov(e);if($u(e))return J2(e);if(Yu(e))return eM(e)}throw Wu(e)}function X2(e){return new be(t=>{let n=e[Rs]();if(Ae(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Q2(e){return new be(t=>{for(let n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}function K2(e){return new be(t=>{e.then(n=>{t.closed||(t.next(n),t.complete())},n=>t.error(n)).then(null,Ru)})}function J2(e){return new be(t=>{for(let n of e)if(t.next(n),t.closed)return;t.complete()})}function ov(e){return new be(t=>{tM(e,t).catch(n=>t.error(n))})}function eM(e){return ov(qu(e))}function tM(e,t){var n,r,i,o;return nv(this,void 0,void 0,function*(){try{for(n=iv(e);r=yield n.next(),!r.done;){let l=r.value;if(t.next(l),t.closed)return}}catch(l){i={error:l}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}t.complete()})}function Bn(e,t,n,r=0,i=!1){let o=t.schedule(function(){n(),i?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(o),!i)return o}function Ji(e,t=0){return Xe((n,r)=>{n.subscribe($e(r,i=>Bn(r,e,()=>r.next(i),t),()=>Bn(r,e,()=>r.complete(),t),i=>Bn(r,e,()=>r.error(i),t)))})}function eo(e,t=0){return Xe((n,r)=>{r.add(e.schedule(()=>n.subscribe(r),t))})}function sv(e,t){return Ht(e).pipe(eo(t),Ji(t))}function av(e,t){return Ht(e).pipe(eo(t),Ji(t))}function cv(e,t){return new be(n=>{let r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}function lv(e,t){return new be(n=>{let r;return Bn(n,t,()=>{r=e[Gu](),Bn(n,t,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(l){n.error(l);return}o?n.complete():n.next(i)},0,!0)}),()=>Ae(r?.return)&&r.return()})}function Zu(e,t){if(!e)throw new Error("Iterable cannot be null");return new be(n=>{Bn(n,t,()=>{let r=e[Symbol.asyncIterator]();Bn(n,t,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function uv(e,t){return Zu(qu(e),t)}function dv(e,t){if(e!=null){if(Hu(e))return sv(e,t);if(Uu(e))return cv(e,t);if(ju(e))return av(e,t);if(zu(e))return Zu(e,t);if($u(e))return lv(e,t);if(Yu(e))return uv(e,t)}throw Wu(e)}function at(e,t){return t?dv(e,t):Ht(e)}function xe(...e){let t=Ki(e);return at(e,t)}function Ls(e,t){let n=Ae(e)?e:()=>e,r=i=>i.error(n());return new be(t?i=>t.schedule(r,0,i):r)}function zp(e){return!!e&&(e instanceof be||Ae(e.lift)&&Ae(e.subscribe))}var pi=Ds(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"});function fv(e){return e instanceof Date&&!isNaN(e)}function Oe(e,t){return Xe((n,r)=>{let i=0;n.subscribe($e(r,o=>{r.next(e.call(t,o,i++))}))})}var{isArray:nM}=Array;function rM(e,t){return nM(t)?e(...t):e(t)}function Xu(e){return Oe(t=>rM(e,t))}var{isArray:iM}=Array,{getPrototypeOf:oM,prototype:sM,keys:aM}=Object;function Qu(e){if(e.length===1){let t=e[0];if(iM(t))return{args:t,keys:null};if(cM(t)){let n=aM(t);return{args:n.map(r=>t[r]),keys:n}}}return{args:e,keys:null}}function cM(e){return e&&typeof e=="object"&&oM(e)===sM}function Ku(e,t){return e.reduce((n,r,i)=>(n[r]=t[i],n),{})}function Ju(...e){let t=Ki(e),n=Vu(e),{args:r,keys:i}=Qu(e);if(r.length===0)return at([],t);let o=new be(lM(r,t,i?l=>Ku(i,l):Kn));return n?o.pipe(Xu(n)):o}function lM(e,t,n=Kn){return r=>{hv(t,()=>{let{length:i}=e,o=new Array(i),l=i,h=i;for(let g=0;g<i;g++)hv(t,()=>{let m=at(e[g],t),C=!1;m.subscribe($e(r,E=>{o[g]=E,C||(C=!0,h--),h||r.next(n(o.slice()))},()=>{--l||r.complete()}))},r)},r)}}function hv(e,t,n){e?Bn(n,e,t):t()}function pv(e,t,n,r,i,o,l,h){let g=[],m=0,C=0,E=!1,x=()=>{E&&!g.length&&!m&&t.complete()},D=U=>m<r?N(U):g.push(U),N=U=>{o&&t.next(U),m++;let $=!1;Ht(n(U,C++)).subscribe($e(t,W=>{i?.(W),o?D(W):t.next(W)},()=>{$=!0},void 0,()=>{if($)try{for(m--;g.length&&m<r;){let W=g.shift();l?Bn(t,l,()=>N(W)):N(W)}x()}catch(W){t.error(W)}}))};return e.subscribe($e(t,D,()=>{E=!0,x()})),()=>{h?.()}}function Zt(e,t,n=1/0){return Ae(t)?Zt((r,i)=>Oe((o,l)=>t(r,o,i,l))(Ht(e(r,i))),n):(typeof t=="number"&&(n=t),Xe((r,i)=>pv(r,i,e,n)))}function Wp(e=1/0){return Zt(Kn,e)}function gv(){return Wp(1)}function Fs(...e){return gv()(at(e,Ki(e)))}function ed(e){return new be(t=>{Ht(e()).subscribe(t)})}function Gp(...e){let t=Vu(e),{args:n,keys:r}=Qu(e),i=new be(o=>{let{length:l}=n;if(!l){o.complete();return}let h=new Array(l),g=l,m=l;for(let C=0;C<l;C++){let E=!1;Ht(n[C]).subscribe($e(o,x=>{E||(E=!0,m--),h[C]=x},()=>g--,void 0,()=>{(!g||!E)&&(m||o.next(r?Ku(r,h):h),o.complete())}))}});return t?i.pipe(Xu(t)):i}function $p(e=0,t,n=Jw){let r=-1;return t!=null&&(Bu(t)?n=t:r=t),new be(i=>{let o=fv(e)?+e-n.now():e;o<0&&(o=0);let l=0;return n.schedule(function(){i.closed||(i.next(l++),0<=r?this.schedule(void 0,r):i.complete())},o)})}function Nr(e,t){return Xe((n,r)=>{let i=0;n.subscribe($e(r,o=>e.call(t,o,i++)&&r.next(o)))})}function Vn(e){return Xe((t,n)=>{let r=null,i=!1,o;r=t.subscribe($e(n,void 0,void 0,l=>{o=Ht(e(l,Vn(e)(t))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function mv(e,t,n,r,i){return(o,l)=>{let h=n,g=t,m=0;o.subscribe($e(l,C=>{let E=m++;g=h?e(g,C,E):(h=!0,C),r&&l.next(g)},i&&(()=>{h&&l.next(g),l.complete()})))}}function Bs(e,t){return Ae(t)?Zt(e,t,1):Zt(e,1)}function to(e){return Xe((t,n)=>{let r=!1;t.subscribe($e(n,i=>{r=!0,n.next(i)},()=>{r||n.next(e),n.complete()}))})}function gi(e){return e<=0?()=>Jn:Xe((t,n)=>{let r=0;t.subscribe($e(n,i=>{++r<=e&&(n.next(i),e<=r&&n.complete())}))})}function qp(e){return Oe(()=>e)}function td(e=uM){return Xe((t,n)=>{let r=!1;t.subscribe($e(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(e())))})}function uM(){return new pi}function pc(e){return Xe((t,n)=>{try{t.subscribe(n)}finally{n.add(e)}})}function qr(e,t){let n=arguments.length>=2;return r=>r.pipe(e?Nr((i,o)=>e(i,o,r)):Kn,gi(1),n?to(t):td(()=>new pi))}function Vs(e){return e<=0?()=>Jn:Xe((t,n)=>{let r=[];t.subscribe($e(n,i=>{r.push(i),e<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function Yp(e,t){let n=arguments.length>=2;return r=>r.pipe(e?Nr((i,o)=>e(i,o,r)):Kn,Vs(1),n?to(t):td(()=>new pi))}function Zp(e,t){return Xe(mv(e,t,arguments.length>=2,!0))}function Xp(...e){let t=Ki(e);return Xe((n,r)=>{(t?Fs(e,n,t):Fs(e,n)).subscribe(r)})}function er(e,t){return Xe((n,r)=>{let i=null,o=0,l=!1,h=()=>l&&!i&&r.complete();n.subscribe($e(r,g=>{i?.unsubscribe();let m=0,C=o++;Ht(e(g,C)).subscribe(i=$e(r,E=>r.next(t?t(g,E,C,m++):E),()=>{i=null,h()}))},()=>{l=!0,h()}))})}function Qp(e){return Xe((t,n)=>{Ht(e).subscribe($e(n,()=>n.complete(),fc)),!n.closed&&t.subscribe(n)})}function Xt(e,t,n){let r=Ae(e)||t||n?{next:e,error:t,complete:n}:e;return r?Xe((i,o)=>{var l;(l=r.subscribe)===null||l===void 0||l.call(r);let h=!0;i.subscribe($e(o,g=>{var m;(m=r.next)===null||m===void 0||m.call(r,g),o.next(g)},()=>{var g;h=!1,(g=r.complete)===null||g===void 0||g.call(r),o.complete()},g=>{var m;h=!1,(m=r.error)===null||m===void 0||m.call(r,g),o.error(g)},()=>{var g,m;h&&((g=r.unsubscribe)===null||g===void 0||g.call(r)),(m=r.finalize)===null||m===void 0||m.call(r)}))}):Kn}var nC="https://g.co/ng/security#xss",pe=class extends Error{constructor(t,n){super(_m(t,n)),this.code=t}};function _m(e,t){return`${`NG0${Math.abs(e)}`}${t?": "+t:""}`}function Pd(e){return{toString:e}.toString()}var fg=globalThis;function Ct(e){for(let t in e)if(e[t]===Ct)return t;throw Error("Could not find renamed property on target object.")}function dM(e,t){for(let n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function jn(e){if(typeof e=="string")return e;if(Array.isArray(e))return"["+e.map(jn).join(", ")+"]";if(e==null)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;let t=e.toString();if(t==null)return""+t;let n=t.indexOf(`
`);return n===-1?t:t.substring(0,n)}function hg(e,t){return e==null||e===""?t===null?"":t:t==null||t===""?e:e+" "+t}var fM=Ct({__forward_ref__:Ct});function Zo(e){return e.__forward_ref__=Zo,e.toString=function(){return jn(this())},e}function Mn(e){return rC(e)?e():e}function rC(e){return typeof e=="function"&&e.hasOwnProperty(fM)&&e.__forward_ref__===Zo}function ge(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function Ci(e){return{providers:e.providers||[],imports:e.imports||[]}}function kd(e){return yv(e,oC)||yv(e,sC)}function iC(e){return kd(e)!==null}function yv(e,t){return e.hasOwnProperty(t)?e[t]:null}function hM(e){let t=e&&(e[oC]||e[sC]);return t||null}function _v(e){return e&&(e.hasOwnProperty(wv)||e.hasOwnProperty(pM))?e[wv]:null}var oC=Ct({\u0275prov:Ct}),wv=Ct({\u0275inj:Ct}),sC=Ct({ngInjectableDef:Ct}),pM=Ct({ngInjectorDef:Ct}),Ie=class{constructor(t,n){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=ge({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function aC(e){return e&&!!e.\u0275providers}var gM=Ct({\u0275cmp:Ct}),mM=Ct({\u0275dir:Ct}),yM=Ct({\u0275pipe:Ct}),_M=Ct({\u0275mod:Ct}),hd=Ct({\u0275fac:Ct}),yc=Ct({__NG_ELEMENT_ID__:Ct}),vv=Ct({__NG_ENV_ID__:Ct});function _c(e){return typeof e=="string"?e:e==null?"":String(e)}function wM(e){return typeof e=="function"?e.name||e.toString():typeof e=="object"&&e!=null&&typeof e.type=="function"?e.type.name||e.type.toString():_c(e)}function vM(e,t){let n=t?`. Dependency path: ${t.join(" > ")} > ${e}`:"";throw new pe(-200,e)}function wm(e,t){throw new pe(-201,!1)}var ke=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}(ke||{}),pg;function cC(){return pg}function lr(e){let t=pg;return pg=e,t}function lC(e,t,n){let r=kd(e);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&ke.Optional)return null;if(t!==void 0)return t;wm(e,"Injector")}var CM={},wc=CM,EM="__NG_DI_FLAG__",pd="ngTempTokenPath",IM="ngTokenPath",bM=/\n/gm,xM="\u0275",Cv="__source",zs;function SM(){return zs}function no(e){let t=zs;return zs=e,t}function AM(e,t=ke.Default){if(zs===void 0)throw new pe(-203,!1);return zs===null?lC(e,void 0,t):zs.get(e,t&ke.Optional?null:void 0,t)}function Le(e,t=ke.Default){return(cC()||AM)(Mn(e),t)}function J(e,t=ke.Default){return Le(e,Ld(t))}function Ld(e){return typeof e>"u"||typeof e=="number"?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function gg(e){let t=[];for(let n=0;n<e.length;n++){let r=Mn(e[n]);if(Array.isArray(r)){if(r.length===0)throw new pe(900,!1);let i,o=ke.Default;for(let l=0;l<r.length;l++){let h=r[l],g=DM(h);typeof g=="number"?g===-1?i=h.token:o|=g:i=h}t.push(Le(i,o))}else t.push(Le(r))}return t}function DM(e){return e[EM]}function TM(e,t,n,r){let i=e[pd];throw t[Cv]&&i.unshift(t[Cv]),e.message=MM(`
`+e.message,i,n,r),e[IM]=i,e[pd]=null,e}function MM(e,t,n,r=null){e=e&&e.charAt(0)===`
`&&e.charAt(1)==xM?e.slice(2):e;let i=jn(t);if(Array.isArray(t))i=t.map(jn).join(" -> ");else if(typeof t=="object"){let o=[];for(let l in t)if(t.hasOwnProperty(l)){let h=t[l];o.push(l+":"+(typeof h=="string"?JSON.stringify(h):jn(h)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${e.replace(bM,`
  `)}`}function Gs(e,t){let n=e.hasOwnProperty(hd);return n?e[hd]:null}function NM(e,t,n){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],o=t[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}function RM(e){return e.flat(Number.POSITIVE_INFINITY)}function vm(e,t){e.forEach(n=>Array.isArray(n)?vm(n,t):t(n))}function uC(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function gd(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function OM(e,t,n,r){let i=e.length;if(i==t)e.push(n,r);else if(i===1)e.push(r,e[0]),e[0]=n;else{for(i--,e.push(e[i-1],e[i]);i>t;){let o=i-2;e[i]=e[o],i--}e[t]=n,e[t+1]=r}}function Cm(e,t,n){let r=Nc(e,t);return r>=0?e[r|1]=n:(r=~r,OM(e,r,t,n)),r}function Kp(e,t){let n=Nc(e,t);if(n>=0)return e[n|1]}function Nc(e,t){return PM(e,t,1)}function PM(e,t,n){let r=0,i=e.length>>n;for(;i!==r;){let o=r+(i-r>>1),l=e[o<<n];if(t===l)return o<<n;l>t?i=o:r=o+1}return~(i<<n)}var $s={},Un=[],qs=new Ie(""),dC=new Ie("",-1),fC=new Ie(""),md=class{get(t,n=wc){if(n===wc){let r=new Error(`NullInjectorError: No provider for ${jn(t)}!`);throw r.name="NullInjectorError",r}return n}},hC=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}(hC||{}),Xr=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}(Xr||{}),oo=function(e){return e[e.None=0]="None",e[e.SignalBased=1]="SignalBased",e[e.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",e}(oo||{});function kM(e,t,n){let r=e.length;for(;;){let i=e.indexOf(t,n);if(i===-1)return i;if(i===0||e.charCodeAt(i-1)<=32){let o=t.length;if(i+o===r||e.charCodeAt(i+o)<=32)return i}n=i+1}}function mg(e,t,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],l=n[r++],h=n[r++];e.setAttribute(t,l,h,o)}else{let o=i,l=n[++r];FM(o)?e.setProperty(t,o,l):e.setAttribute(t,o,l),r++}}return r}function LM(e){return e===3||e===4||e===6}function FM(e){return e.charCodeAt(0)===64}function vc(e,t){if(!(t===null||t.length===0))if(e===null||e.length===0)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){let i=t[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?Ev(e,n,i,null,t[++r]):Ev(e,n,i,null,null))}}return e}function Ev(e,t,n,r,i){let o=0,l=e.length;if(t===-1)l=-1;else for(;o<e.length;){let h=e[o++];if(typeof h=="number"){if(h===t){l=-1;break}else if(h>t){l=o-1;break}}}for(;o<e.length;){let h=e[o];if(typeof h=="number")break;if(h===n){if(r===null){i!==null&&(e[o+1]=i);return}else if(r===e[o+1]){e[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}l!==-1&&(e.splice(l,0,t),o=l+1),e.splice(o++,0,n),r!==null&&e.splice(o++,0,r),i!==null&&e.splice(o++,0,i)}var pC="ng-template";function BM(e,t,n,r){let i=0;if(r){for(;i<t.length&&typeof t[i]=="string";i+=2)if(t[i]==="class"&&kM(t[i+1].toLowerCase(),n,0)!==-1)return!0}else if(Em(e))return!1;if(i=t.indexOf(1,i),i>-1){let o;for(;++i<t.length&&typeof(o=t[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function Em(e){return e.type===4&&e.value!==pC}function VM(e,t,n){let r=e.type===4&&!n?pC:e.value;return t===r}function UM(e,t,n){let r=4,i=e.attrs,o=i!==null?zM(i):0,l=!1;for(let h=0;h<t.length;h++){let g=t[h];if(typeof g=="number"){if(!l&&!Rr(r)&&!Rr(g))return!1;if(l&&Rr(g))continue;l=!1,r=g|r&1;continue}if(!l)if(r&4){if(r=2|r&1,g!==""&&!VM(e,g,n)||g===""&&t.length===1){if(Rr(r))return!1;l=!0}}else if(r&8){if(i===null||!BM(e,i,g,n)){if(Rr(r))return!1;l=!0}}else{let m=t[++h],C=jM(g,i,Em(e),n);if(C===-1){if(Rr(r))return!1;l=!0;continue}if(m!==""){let E;if(C>o?E="":E=i[C+1].toLowerCase(),r&2&&m!==E){if(Rr(r))return!1;l=!0}}}}return Rr(r)||l}function Rr(e){return(e&1)===0}function jM(e,t,n,r){if(t===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<t.length;){let l=t[i];if(l===e)return i;if(l===3||l===6)o=!0;else if(l===1||l===2){let h=t[++i];for(;typeof h=="string";)h=t[++i];continue}else{if(l===4)break;if(l===0){i+=4;continue}}i+=o?1:2}return-1}else return WM(t,e)}function HM(e,t,n=!1){for(let r=0;r<t.length;r++)if(UM(e,t[r],n))return!0;return!1}function zM(e){for(let t=0;t<e.length;t++){let n=e[t];if(LM(n))return t}return e.length}function WM(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){let r=e[n];if(typeof r=="number")return-1;if(r===t)return n;n++}return-1}function Iv(e,t){return e?":not("+t.trim()+")":t}function GM(e){let t=e[0],n=1,r=2,i="",o=!1;for(;n<e.length;){let l=e[n];if(typeof l=="string")if(r&2){let h=e[++n];i+="["+l+(h.length>0?'="'+h+'"':"")+"]"}else r&8?i+="."+l:r&4&&(i+=" "+l);else i!==""&&!Rr(l)&&(t+=Iv(o,i),i=""),r=l,o=o||!Rr(r);n++}return i!==""&&(t+=Iv(o,i)),t}function $M(e){return e.map(GM).join(",")}function qM(e){let t=[],n=[],r=1,i=2;for(;r<e.length;){let o=e[r];if(typeof o=="string")i===2?o!==""&&t.push(o,e[++r]):i===8&&n.push(o);else{if(!Rr(i))break;i=o}r++}return{attrs:t,classes:n}}function ce(e){return Pd(()=>{let t=wC(e),n=Ue(K({},t),{decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===hC.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&e.dependencies||null,getStandaloneInjector:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||Xr.Emulated,styles:e.styles||Un,_:null,schemas:e.schemas||null,tView:null,id:""});vC(n);let r=e.dependencies;return n.directiveDefs=xv(r,!1),n.pipeDefs=xv(r,!0),n.id=XM(n),n})}function YM(e){return Vo(e)||gC(e)}function ZM(e){return e!==null}function Ei(e){return Pd(()=>({type:e.type,bootstrap:e.bootstrap||Un,declarations:e.declarations||Un,imports:e.imports||Un,exports:e.exports||Un,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function bv(e,t){if(e==null)return $s;let n={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r],o,l,h=oo.None;Array.isArray(i)?(h=i[0],o=i[1],l=i[2]??o):(o=i,l=i),t?(n[o]=h!==oo.None?[r,h]:r,t[o]=l):n[o]=r}return n}function Hn(e){return Pd(()=>{let t=wC(e);return vC(t),t})}function Vo(e){return e[gM]||null}function gC(e){return e[mM]||null}function mC(e){return e[yM]||null}function yC(e){let t=Vo(e)||gC(e)||mC(e);return t!==null?t.standalone:!1}function _C(e,t){let n=e[_M]||null;if(!n&&t===!0)throw new Error(`Type ${jn(e)} does not have '\u0275mod' property.`);return n}function wC(e){let t={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputTransforms:null,inputConfig:e.inputs||$s,exportAs:e.exportAs||null,standalone:e.standalone===!0,signals:e.signals===!0,selectors:e.selectors||Un,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:bv(e.inputs,t),outputs:bv(e.outputs),debugInfo:null}}function vC(e){e.features?.forEach(t=>t(e))}function xv(e,t){if(!e)return null;let n=t?mC:YM;return()=>(typeof e=="function"?e():e).map(r=>n(r)).filter(ZM)}function XM(e){let t=0,n=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,e.consts,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery].join("|");for(let i of n)t=Math.imul(31,t)+i.charCodeAt(0)<<0;return t+=2147483648,"c"+t}function Im(e){return{\u0275providers:e}}function QM(...e){return{\u0275providers:CC(!0,e),\u0275fromNgModule:!0}}function CC(e,...t){let n=[],r=new Set,i,o=l=>{n.push(l)};return vm(t,l=>{let h=l;yg(h,o,[],r)&&(i||=[],i.push(h))}),i!==void 0&&EC(i,o),n}function EC(e,t){for(let n=0;n<e.length;n++){let{ngModule:r,providers:i}=e[n];bm(i,o=>{t(o,r)})}}function yg(e,t,n,r){if(e=Mn(e),!e)return!1;let i=null,o=_v(e),l=!o&&Vo(e);if(!o&&!l){let g=e.ngModule;if(o=_v(g),o)i=g;else return!1}else{if(l&&!l.standalone)return!1;i=e}let h=r.has(i);if(l){if(h)return!1;if(r.add(i),l.dependencies){let g=typeof l.dependencies=="function"?l.dependencies():l.dependencies;for(let m of g)yg(m,t,n,r)}}else if(o){if(o.imports!=null&&!h){r.add(i);let m;try{vm(o.imports,C=>{yg(C,t,n,r)&&(m||=[],m.push(C))})}finally{}m!==void 0&&EC(m,t)}if(!h){let m=Gs(i)||(()=>new i);t({provide:i,useFactory:m,deps:Un},i),t({provide:fC,useValue:i,multi:!0},i),t({provide:qs,useValue:()=>Le(i),multi:!0},i)}let g=o.providers;if(g!=null&&!h){let m=e;bm(g,C=>{t(C,m)})}}else return!1;return i!==e&&e.providers!==void 0}function bm(e,t){for(let n of e)aC(n)&&(n=n.\u0275providers),Array.isArray(n)?bm(n,t):t(n)}var KM=Ct({provide:String,useValue:Ct});function IC(e){return e!==null&&typeof e=="object"&&KM in e}function JM(e){return!!(e&&e.useExisting)}function eN(e){return!!(e&&e.useFactory)}function Ys(e){return typeof e=="function"}function tN(e){return!!e.useClass}var Fd=new Ie(""),ad={},nN={},Jp;function xm(){return Jp===void 0&&(Jp=new md),Jp}var dr=class{},Cc=class extends dr{get destroyed(){return this._destroyed}constructor(t,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,wg(t,l=>this.processProvider(l)),this.records.set(dC,Us(void 0,this)),i.has("environment")&&this.records.set(dr,Us(void 0,this));let o=this.records.get(Fd);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(fC,Un,ke.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let t=We(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),We(t)}}onDestroy(t){return this.assertNotDestroyed(),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){this.assertNotDestroyed();let n=no(this),r=lr(void 0),i;try{return t()}finally{no(n),lr(r)}}get(t,n=wc,r=ke.Default){if(this.assertNotDestroyed(),t.hasOwnProperty(vv))return t[vv](this);r=Ld(r);let i,o=no(this),l=lr(void 0);try{if(!(r&ke.SkipSelf)){let g=this.records.get(t);if(g===void 0){let m=aN(t)&&kd(t);m&&this.injectableDefInScope(m)?g=Us(_g(t),ad):g=null,this.records.set(t,g)}if(g!=null)return this.hydrate(t,g)}let h=r&ke.Self?xm():this.parent;return n=r&ke.Optional&&n===wc?null:n,h.get(t,n)}catch(h){if(h.name==="NullInjectorError"){if((h[pd]=h[pd]||[]).unshift(jn(t)),o)throw h;return TM(h,t,"R3InjectorError",this.source)}else throw h}finally{lr(l),no(o)}}resolveInjectorInitializers(){let t=We(null),n=no(this),r=lr(void 0),i;try{let o=this.get(qs,Un,ke.Self);for(let l of o)l()}finally{no(n),lr(r),We(t)}}toString(){let t=[],n=this.records;for(let r of n.keys())t.push(jn(r));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new pe(205,!1)}processProvider(t){t=Mn(t);let n=Ys(t)?t:Mn(t&&t.provide),r=iN(t);if(!Ys(t)&&t.multi===!0){let i=this.records.get(n);i||(i=Us(void 0,ad,!0),i.factory=()=>gg(i.multi),this.records.set(n,i)),n=t,i.multi.push(t)}this.records.set(n,r)}hydrate(t,n){let r=We(null);try{return n.value===ad&&(n.value=nN,n.value=n.factory()),typeof n.value=="object"&&n.value&&sN(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{We(r)}}injectableDefInScope(t){if(!t.providedIn)return!1;let n=Mn(t.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(t){let n=this._onDestroyHooks.indexOf(t);n!==-1&&this._onDestroyHooks.splice(n,1)}};function _g(e){let t=kd(e),n=t!==null?t.factory:Gs(e);if(n!==null)return n;if(e instanceof Ie)throw new pe(204,!1);if(e instanceof Function)return rN(e);throw new pe(204,!1)}function rN(e){if(e.length>0)throw new pe(204,!1);let n=hM(e);return n!==null?()=>n.factory(e):()=>new e}function iN(e){if(IC(e))return Us(void 0,e.useValue);{let t=bC(e);return Us(t,ad)}}function bC(e,t,n){let r;if(Ys(e)){let i=Mn(e);return Gs(i)||_g(i)}else if(IC(e))r=()=>Mn(e.useValue);else if(eN(e))r=()=>e.useFactory(...gg(e.deps||[]));else if(JM(e))r=()=>Le(Mn(e.useExisting));else{let i=Mn(e&&(e.useClass||e.provide));if(oN(e))r=()=>new i(...gg(e.deps));else return Gs(i)||_g(i)}return r}function Us(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function oN(e){return!!e.deps}function sN(e){return e!==null&&typeof e=="object"&&typeof e.ngOnDestroy=="function"}function aN(e){return typeof e=="function"||typeof e=="object"&&e instanceof Ie}function wg(e,t){for(let n of e)Array.isArray(n)?wg(n,t):n&&aC(n)?wg(n.\u0275providers,t):t(n)}function Ii(e,t){e instanceof Cc&&e.assertNotDestroyed();let n,r=no(e),i=lr(void 0);try{return t()}finally{no(r),lr(i)}}function cN(){return cC()!==void 0||SM()!=null}function lN(e){return typeof e=="function"}var bi=0,Se=1,Ee=2,En=3,Pr=4,Lr=5,Ec=6,yd=7,vn=8,Zs=9,mi=10,zt=11,Ic=12,Sv=13,na=14,kr=15,Uo=16,js=17,yi=18,Bd=19,xC=20,ro=21,eg=22,ur=23,fr=25,SC=1;var jo=7,_d=8,Xs=9,Cn=10,wd=function(e){return e[e.None=0]="None",e[e.HasTransplantedViews=2]="HasTransplantedViews",e}(wd||{});function io(e){return Array.isArray(e)&&typeof e[SC]=="object"}function xi(e){return Array.isArray(e)&&e[SC]===!0}function AC(e){return(e.flags&4)!==0}function Vd(e){return e.componentOffset>-1}function Sm(e){return(e.flags&1)===1}function so(e){return!!e.template}function vg(e){return(e[Ee]&512)!==0}var Cg=class{constructor(t,n,r){this.previousValue=t,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function DC(e,t,n,r){t!==null?t.applyValueToInputSignal(t,r):e[n]=r}function Si(){return TC}function TC(e){return e.type.prototype.ngOnChanges&&(e.setInput=dN),uN}Si.ngInherit=!0;function uN(){let e=NC(this),t=e?.current;if(t){let n=e.previous;if(n===$s)e.previous=t;else for(let r in t)n[r]=t[r];e.current=null,this.ngOnChanges(t)}}function dN(e,t,n,r,i){let o=this.declaredInputs[r],l=NC(e)||fN(e,{previous:$s,current:null}),h=l.current||(l.current={}),g=l.previous,m=g[o];h[o]=new Cg(m&&m.currentValue,n,g===$s),DC(e,t,i,n)}var MC="__ngSimpleChanges__";function NC(e){return e[MC]||null}function fN(e,t){return e[MC]=t}var Av=null;var Yr=function(e,t,n){Av?.(e,t,n)},hN="svg",pN="math";function Qr(e){for(;Array.isArray(e);)e=e[bi];return e}function RC(e,t){return Qr(t[e])}function hr(e,t){return Qr(t[e.index])}function Am(e,t){return e.data[t]}function gN(e,t){return e[t]}function lo(e,t){let n=t[e];return io(n)?n:n[bi]}function mN(e){return(e[Ee]&4)===4}function Dm(e){return(e[Ee]&128)===128}function yN(e){return xi(e[En])}function Qs(e,t){return t==null?null:e[t]}function OC(e){e[js]=0}function PC(e){e[Ee]&1024||(e[Ee]|=1024,Dm(e)&&jd(e))}function _N(e,t){for(;e>0;)t=t[na],e--;return t}function Ud(e){return!!(e[Ee]&9216||e[ur]?.dirty)}function Eg(e){e[mi].changeDetectionScheduler?.notify(8),e[Ee]&64&&(e[Ee]|=1024),Ud(e)&&jd(e)}function jd(e){e[mi].changeDetectionScheduler?.notify(0);let t=Ho(e);for(;t!==null&&!(t[Ee]&8192||(t[Ee]|=8192,!Dm(t)));)t=Ho(t)}function kC(e,t){if((e[Ee]&256)===256)throw new pe(911,!1);e[ro]===null&&(e[ro]=[]),e[ro].push(t)}function wN(e,t){if(e[ro]===null)return;let n=e[ro].indexOf(t);n!==-1&&e[ro].splice(n,1)}function Ho(e){let t=e[En];return xi(t)?t[En]:t}var Fe={lFrame:WC(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var LC=!1;function vN(){return Fe.lFrame.elementDepthCount}function CN(){Fe.lFrame.elementDepthCount++}function EN(){Fe.lFrame.elementDepthCount--}function FC(){return Fe.bindingsEnabled}function IN(){return Fe.skipHydrationRootTNode!==null}function bN(e){return Fe.skipHydrationRootTNode===e}function xN(){Fe.skipHydrationRootTNode=null}function tt(){return Fe.lFrame.lView}function hn(){return Fe.lFrame.tView}function At(e){return Fe.lFrame.contextLView=e,e[vn]}function Dt(e){return Fe.lFrame.contextLView=null,e}function zn(){let e=BC();for(;e!==null&&e.type===64;)e=e.parent;return e}function BC(){return Fe.lFrame.currentTNode}function SN(){let e=Fe.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}function Rc(e,t){let n=Fe.lFrame;n.currentTNode=e,n.isParent=t}function VC(){return Fe.lFrame.isParent}function AN(){Fe.lFrame.isParent=!1}function DN(){return Fe.lFrame.contextLView}function UC(){return LC}function Dv(e){LC=e}function TN(){return Fe.lFrame.bindingIndex}function MN(e){return Fe.lFrame.bindingIndex=e}function ra(){return Fe.lFrame.bindingIndex++}function Tm(e){let t=Fe.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}function NN(){return Fe.lFrame.inI18n}function RN(e,t){let n=Fe.lFrame;n.bindingIndex=n.bindingRootIndex=e,Ig(t)}function ON(){return Fe.lFrame.currentDirectiveIndex}function Ig(e){Fe.lFrame.currentDirectiveIndex=e}function PN(e){let t=Fe.lFrame.currentDirectiveIndex;return t===-1?null:e[t]}function jC(){return Fe.lFrame.currentQueryIndex}function Mm(e){Fe.lFrame.currentQueryIndex=e}function kN(e){let t=e[Se];return t.type===2?t.declTNode:t.type===1?e[Lr]:null}function HC(e,t,n){if(n&ke.SkipSelf){let i=t,o=e;for(;i=i.parent,i===null&&!(n&ke.Host);)if(i=kN(o),i===null||(o=o[na],i.type&10))break;if(i===null)return!1;t=i,e=o}let r=Fe.lFrame=zC();return r.currentTNode=t,r.lView=e,!0}function Nm(e){let t=zC(),n=e[Se];Fe.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function zC(){let e=Fe.lFrame,t=e===null?null:e.child;return t===null?WC(e):t}function WC(e){let t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return e!==null&&(e.child=t),t}function GC(){let e=Fe.lFrame;return Fe.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}var $C=GC;function Rm(){let e=GC();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function LN(e){return(Fe.lFrame.contextLView=_N(e,Fe.lFrame.contextLView))[vn]}function Ai(){return Fe.lFrame.selectedIndex}function zo(e){Fe.lFrame.selectedIndex=e}function Om(){let e=Fe.lFrame;return Am(e.tView,e.selectedIndex)}function FN(){return Fe.lFrame.currentNamespace}var qC=!0;function Pm(){return qC}function km(e){qC=e}function BN(e,t,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=t.type.prototype;if(r){let l=TC(t);(n.preOrderHooks??=[]).push(e,l),(n.preOrderCheckHooks??=[]).push(e,l)}i&&(n.preOrderHooks??=[]).push(0-e,i),o&&((n.preOrderHooks??=[]).push(e,o),(n.preOrderCheckHooks??=[]).push(e,o))}function Lm(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){let o=e.data[n].type.prototype,{ngAfterContentInit:l,ngAfterContentChecked:h,ngAfterViewInit:g,ngAfterViewChecked:m,ngOnDestroy:C}=o;l&&(e.contentHooks??=[]).push(-n,l),h&&((e.contentHooks??=[]).push(n,h),(e.contentCheckHooks??=[]).push(n,h)),g&&(e.viewHooks??=[]).push(-n,g),m&&((e.viewHooks??=[]).push(n,m),(e.viewCheckHooks??=[]).push(n,m)),C!=null&&(e.destroyHooks??=[]).push(n,C)}}function cd(e,t,n){YC(e,t,3,n)}function ld(e,t,n,r){(e[Ee]&3)===n&&YC(e,t,n,r)}function tg(e,t){let n=e[Ee];(n&3)===t&&(n&=16383,n+=1,e[Ee]=n)}function YC(e,t,n,r){let i=r!==void 0?e[js]&65535:0,o=r??-1,l=t.length-1,h=0;for(let g=i;g<l;g++)if(typeof t[g+1]=="number"){if(h=t[g],r!=null&&h>=r)break}else t[g]<0&&(e[js]+=65536),(h<o||o==-1)&&(VN(e,n,t,g),e[js]=(e[js]&4294901760)+g+2),g++}function Tv(e,t){Yr(4,e,t);let n=We(null);try{t.call(e)}finally{We(n),Yr(5,e,t)}}function VN(e,t,n,r){let i=n[r]<0,o=n[r+1],l=i?-n[r]:n[r],h=e[l];i?e[Ee]>>14<e[js]>>16&&(e[Ee]&3)===t&&(e[Ee]+=16384,Tv(h,o)):Tv(h,o)}var Ws=-1,Wo=class{constructor(t,n,r){this.factory=t,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function UN(e){return e instanceof Wo}function jN(e){return(e.flags&8)!==0}function HN(e){return(e.flags&16)!==0}var ng={},bg=class{constructor(t,n){this.injector=t,this.parentInjector=n}get(t,n,r){r=Ld(r);let i=this.injector.get(t,ng,r);return i!==ng||n===ng?i:this.parentInjector.get(t,n,r)}};function ZC(e){return e!==Ws}function vd(e){return e&32767}function zN(e){return e>>16}function Cd(e,t){let n=zN(e),r=t;for(;n>0;)r=r[na],n--;return r}var xg=!0;function Mv(e){let t=xg;return xg=e,t}var WN=256,XC=WN-1,QC=5,GN=0,Zr={};function $N(e,t,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(yc)&&(r=n[yc]),r==null&&(r=n[yc]=GN++);let i=r&XC,o=1<<i;t.data[e+(i>>QC)]|=o}function Ed(e,t){let n=KC(e,t);if(n!==-1)return n;let r=t[Se];r.firstCreatePass&&(e.injectorIndex=t.length,rg(r.data,e),rg(t,null),rg(r.blueprint,null));let i=Fm(e,t),o=e.injectorIndex;if(ZC(i)){let l=vd(i),h=Cd(i,t),g=h[Se].data;for(let m=0;m<8;m++)t[o+m]=h[l+m]|g[l+m]}return t[o+8]=i,o}function rg(e,t){e.push(0,0,0,0,0,0,0,0,t)}function KC(e,t){return e.injectorIndex===-1||e.parent&&e.parent.injectorIndex===e.injectorIndex||t[e.injectorIndex+8]===null?-1:e.injectorIndex}function Fm(e,t){if(e.parent&&e.parent.injectorIndex!==-1)return e.parent.injectorIndex;let n=0,r=null,i=t;for(;i!==null;){if(r=rE(i),r===null)return Ws;if(n++,i=i[na],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Ws}function Sg(e,t,n){$N(e,t,n)}function JC(e,t,n){if(n&ke.Optional||e!==void 0)return e;wm(t,"NodeInjector")}function eE(e,t,n,r){if(n&ke.Optional&&r===void 0&&(r=null),!(n&(ke.Self|ke.Host))){let i=e[Zs],o=lr(void 0);try{return i?i.get(t,r,n&ke.Optional):lC(t,r,n&ke.Optional)}finally{lr(o)}}return JC(r,t,n)}function tE(e,t,n,r=ke.Default,i){if(e!==null){if(t[Ee]&2048&&!(r&ke.Self)){let l=XN(e,t,n,r,Zr);if(l!==Zr)return l}let o=nE(e,t,n,r,Zr);if(o!==Zr)return o}return eE(t,n,r,i)}function nE(e,t,n,r,i){let o=YN(n);if(typeof o=="function"){if(!HC(t,e,r))return r&ke.Host?JC(i,n,r):eE(t,n,r,i);try{let l;if(l=o(r),l==null&&!(r&ke.Optional))wm(n);else return l}finally{$C()}}else if(typeof o=="number"){let l=null,h=KC(e,t),g=Ws,m=r&ke.Host?t[kr][Lr]:null;for((h===-1||r&ke.SkipSelf)&&(g=h===-1?Fm(e,t):t[h+8],g===Ws||!Rv(r,!1)?h=-1:(l=t[Se],h=vd(g),t=Cd(g,t)));h!==-1;){let C=t[Se];if(Nv(o,h,C.data)){let E=qN(h,t,n,l,r,m);if(E!==Zr)return E}g=t[h+8],g!==Ws&&Rv(r,t[Se].data[h+8]===m)&&Nv(o,h,t)?(l=C,h=vd(g),t=Cd(g,t)):h=-1}}return i}function qN(e,t,n,r,i,o){let l=t[Se],h=l.data[e+8],g=r==null?Vd(h)&&xg:r!=l&&(h.type&3)!==0,m=i&ke.Host&&o===h,C=ud(h,l,n,g,m);return C!==null?Go(t,l,C,h):Zr}function ud(e,t,n,r,i){let o=e.providerIndexes,l=t.data,h=o&1048575,g=e.directiveStart,m=e.directiveEnd,C=o>>20,E=r?h:h+C,x=i?h+C:m;for(let D=E;D<x;D++){let N=l[D];if(D<g&&n===N||D>=g&&N.type===n)return D}if(i){let D=l[g];if(D&&so(D)&&D.type===n)return g}return null}function Go(e,t,n,r){let i=e[n],o=t.data;if(UN(i)){let l=i;l.resolving&&vM(wM(o[n]));let h=Mv(l.canSeeViewProviders);l.resolving=!0;let g,m=l.injectImpl?lr(l.injectImpl):null,C=HC(e,r,ke.Default);try{i=e[n]=l.factory(void 0,o,e,r),t.firstCreatePass&&n>=r.directiveStart&&BN(n,o[n],t)}finally{m!==null&&lr(m),Mv(h),l.resolving=!1,$C()}}return i}function YN(e){if(typeof e=="string")return e.charCodeAt(0)||0;let t=e.hasOwnProperty(yc)?e[yc]:void 0;return typeof t=="number"?t>=0?t&XC:ZN:t}function Nv(e,t,n){let r=1<<e;return!!(n[t+(e>>QC)]&r)}function Rv(e,t){return!(e&ke.Self)&&!(e&ke.Host&&t)}var Bo=class{constructor(t,n){this._tNode=t,this._lView=n}get(t,n,r){return tE(this._tNode,this._lView,t,Ld(r),n)}};function ZN(){return new Bo(zn(),tt())}function ia(e){return Pd(()=>{let t=e.prototype.constructor,n=t[hd]||Ag(t),r=Object.prototype,i=Object.getPrototypeOf(e.prototype).constructor;for(;i&&i!==r;){let o=i[hd]||Ag(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Ag(e){return rC(e)?()=>{let t=Ag(Mn(e));return t&&t()}:Gs(e)}function XN(e,t,n,r,i){let o=e,l=t;for(;o!==null&&l!==null&&l[Ee]&2048&&!(l[Ee]&512);){let h=nE(o,l,n,r|ke.Self,Zr);if(h!==Zr)return h;let g=o.parent;if(!g){let m=l[xC];if(m){let C=m.get(n,Zr,r);if(C!==Zr)return C}g=rE(l),l=l[na]}o=g}return i}function rE(e){let t=e[Se],n=t.type;return n===2?t.declTNode:n===1?e[Lr]:null}function Ov(e,t=null,n=null,r){let i=iE(e,t,n,r);return i.resolveInjectorInitializers(),i}function iE(e,t=null,n=null,r,i=new Set){let o=[n||Un,QM(e)];return r=r||(typeof e=="object"?void 0:jn(e)),new Cc(o,t||xm(),r||null,i)}var ao=class e{static{this.THROW_IF_NOT_FOUND=wc}static{this.NULL=new md}static create(t,n){if(Array.isArray(t))return Ov({name:""},n,t,"");{let r=t.name??"";return Ov({name:r},t.parent,t.providers,r)}}static{this.\u0275prov=ge({token:e,providedIn:"any",factory:()=>Le(dC)})}static{this.__NG_ELEMENT_ID__=-1}};var QN=new Ie("");QN.__NG_ELEMENT_ID__=e=>{let t=zn();if(t===null)throw new pe(204,!1);if(t.type&2)return t.value;if(e&ke.Optional)return null;throw new pe(204,!1)};var KN="ngOriginalError";function ig(e){return e[KN]}var oE=!0,sE=(()=>{class e{static{this.__NG_ELEMENT_ID__=JN}static{this.__NG_ENV_ID__=n=>n}}return e})(),Dg=class extends sE{constructor(t){super(),this._lView=t}onDestroy(t){return kC(this._lView,t),()=>wN(this._lView,t)}};function JN(){return new Dg(tt())}var oa=(()=>{class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new fn(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=ge({token:e,providedIn:"root",factory:()=>new e})}}return e})();var Tg=class extends dn{constructor(t=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=t,cN()&&(this.destroyRef=J(sE,{optional:!0})??void 0,this.pendingTasks=J(oa,{optional:!0})??void 0)}emit(t){let n=We(null);try{super.next(t)}finally{We(n)}}subscribe(t,n,r){let i=t,o=n||(()=>null),l=r;if(t&&typeof t=="object"){let g=t;i=g.next?.bind(g),o=g.error?.bind(g),l=g.complete?.bind(g)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),l&&(l=this.wrapInTimeout(l)));let h=super.subscribe({next:i,error:o,complete:l});return t instanceof Ot&&t.add(h),h}wrapInTimeout(t){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{t(n),r!==void 0&&this.pendingTasks?.remove(r)})}}},Tt=Tg;function Id(...e){}function aE(e){let t,n;function r(){e=Id;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),t!==void 0&&clearTimeout(t)}catch{}}return t=setTimeout(()=>{e(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{e(),r()})),()=>r()}function Pv(e){return queueMicrotask(()=>e()),()=>{e=Id}}var Bm="isAngularZone",bd=Bm+"_ID",eR=0,Qt=class e{constructor(t){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Tt(!1),this.onMicrotaskEmpty=new Tt(!1),this.onStable=new Tt(!1),this.onError=new Tt(!1);let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=oE}=t;if(typeof Zone>"u")throw new pe(908,!1);Zone.assertZonePatched();let l=this;l._nesting=0,l._outer=l._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(l._inner=l._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(l._inner=l._inner.fork(Zone.longStackTraceZoneSpec)),l.shouldCoalesceEventChangeDetection=!i&&r,l.shouldCoalesceRunChangeDetection=i,l.callbackScheduled=!1,l.scheduleInRootZone=o,rR(l)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Bm)===!0}static assertInAngularZone(){if(!e.isInAngularZone())throw new pe(909,!1)}static assertNotInAngularZone(){if(e.isInAngularZone())throw new pe(909,!1)}run(t,n,r){return this._inner.run(t,n,r)}runTask(t,n,r,i){let o=this._inner,l=o.scheduleEventTask("NgZoneEvent: "+i,t,tR,Id,Id);try{return o.runTask(l,n,r)}finally{o.cancelTask(l)}}runGuarded(t,n,r){return this._inner.runGuarded(t,n,r)}runOutsideAngular(t){return this._outer.run(t)}},tR={};function Vm(e){if(e._nesting==0&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function nR(e){if(e.isCheckStableRunning||e.callbackScheduled)return;e.callbackScheduled=!0;function t(){aE(()=>{e.callbackScheduled=!1,Mg(e),e.isCheckStableRunning=!0,Vm(e),e.isCheckStableRunning=!1})}e.scheduleInRootZone?Zone.root.run(()=>{t()}):e._outer.run(()=>{t()}),Mg(e)}function rR(e){let t=()=>{nR(e)},n=eR++;e._inner=e._inner.fork({name:"angular",properties:{[Bm]:!0,[bd]:n,[bd+n]:!0},onInvokeTask:(r,i,o,l,h,g)=>{if(iR(g))return r.invokeTask(o,l,h,g);try{return kv(e),r.invokeTask(o,l,h,g)}finally{(e.shouldCoalesceEventChangeDetection&&l.type==="eventTask"||e.shouldCoalesceRunChangeDetection)&&t(),Lv(e)}},onInvoke:(r,i,o,l,h,g,m)=>{try{return kv(e),r.invoke(o,l,h,g,m)}finally{e.shouldCoalesceRunChangeDetection&&!e.callbackScheduled&&!oR(g)&&t(),Lv(e)}},onHasTask:(r,i,o,l)=>{r.hasTask(o,l),i===o&&(l.change=="microTask"?(e._hasPendingMicrotasks=l.microTask,Mg(e),Vm(e)):l.change=="macroTask"&&(e.hasPendingMacrotasks=l.macroTask))},onHandleError:(r,i,o,l)=>(r.handleError(o,l),e.runOutsideAngular(()=>e.onError.emit(l)),!1)})}function Mg(e){e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&e.callbackScheduled===!0?e.hasPendingMicrotasks=!0:e.hasPendingMicrotasks=!1}function kv(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function Lv(e){e._nesting--,Vm(e)}var Ng=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Tt,this.onMicrotaskEmpty=new Tt,this.onStable=new Tt,this.onError=new Tt}run(t,n,r){return t.apply(n,r)}runGuarded(t,n,r){return t.apply(n,r)}runOutsideAngular(t){return t()}runTask(t,n,r,i){return t.apply(n,r)}};function iR(e){return cE(e,"__ignore_ng_zone__")}function oR(e){return cE(e,"__scheduler_tick__")}function cE(e,t){return!Array.isArray(e)||e.length!==1?!1:e[0]?.data?.[t]===!0}var _i=class{constructor(){this._console=console}handleError(t){let n=this._findOriginalError(t);this._console.error("ERROR",t),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(t){let n=t&&ig(t);for(;n&&ig(n);)n=ig(n);return n||null}},sR=new Ie("",{providedIn:"root",factory:()=>{let e=J(Qt),t=J(_i);return n=>e.runOutsideAngular(()=>t.handleError(n))}});function aR(){return sa(zn(),tt())}function sa(e,t){return new Jr(hr(e,t))}var Jr=(()=>{class e{constructor(n){this.nativeElement=n}static{this.__NG_ELEMENT_ID__=aR}}return e})();function cR(e){return e instanceof Jr?e.nativeElement:e}function lR(){return this._results[Symbol.iterator]()}var Rg=class e{get changes(){return this._changes??=new Tt}constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let n=e.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=lR)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,n){return this._results.reduce(t,n)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,n){this.dirty=!1;let r=RM(t);(this._changesDetected=!NM(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(t){this._onDirty=t}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function lE(e){return(e.flags&128)===128}var uE=new Map,uR=0;function dR(){return uR++}function fR(e){uE.set(e[Bd],e)}function Og(e){uE.delete(e[Bd])}var Fv="__ngContext__";function $o(e,t){io(t)?(e[Fv]=t[Bd],fR(t)):e[Fv]=t}function dE(e){return hE(e[Ic])}function fE(e){return hE(e[Pr])}function hE(e){for(;e!==null&&!xi(e);)e=e[Pr];return e}var Pg;function pE(e){Pg=e}function hR(){if(Pg!==void 0)return Pg;if(typeof document<"u")return document;throw new pe(210,!1)}var Um=new Ie("",{providedIn:"root",factory:()=>pR}),pR="ng",jm=new Ie(""),aa=new Ie("",{providedIn:"platform",factory:()=>"unknown"});var Hm=new Ie("",{providedIn:"root",factory:()=>hR().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var gR="h",mR="b";var yR=()=>null;function zm(e,t,n=!1){return yR(e,t,n)}var gE=!1,_R=new Ie("",{providedIn:"root",factory:()=>gE});var nd;function wR(){if(nd===void 0&&(nd=null,fg.trustedTypes))try{nd=fg.trustedTypes.createPolicy("angular",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch{}return nd}function Hd(e){return wR()?.createHTML(e)||e}var wi=class{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${nC})`}},kg=class extends wi{getTypeName(){return"HTML"}},Lg=class extends wi{getTypeName(){return"Style"}},Fg=class extends wi{getTypeName(){return"Script"}},Bg=class extends wi{getTypeName(){return"URL"}},Vg=class extends wi{getTypeName(){return"ResourceURL"}};function Di(e){return e instanceof wi?e.changingThisBreaksApplicationSecurity:e}function ca(e,t){let n=vR(e);if(n!=null&&n!==t){if(n==="ResourceURL"&&t==="URL")return!0;throw new Error(`Required a safe ${t}, got a ${n} (see ${nC})`)}return n===t}function vR(e){return e instanceof wi&&e.getTypeName()||null}function mE(e){return new kg(e)}function yE(e){return new Lg(e)}function _E(e){return new Fg(e)}function wE(e){return new Bg(e)}function vE(e){return new Vg(e)}function CR(e){let t=new jg(e);return ER()?new Ug(t):t}var Ug=class{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{let n=new window.DOMParser().parseFromString(Hd(t),"text/html").body;return n===null?this.inertDocumentHelper.getInertBodyElement(t):(n.firstChild?.remove(),n)}catch{return null}}},jg=class{constructor(t){this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(t){let n=this.inertDocument.createElement("template");return n.innerHTML=Hd(t),n}};function ER(){try{return!!new window.DOMParser().parseFromString(Hd(""),"text/html")}catch{return!1}}var IR=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Wm(e){return e=String(e),e.match(IR)?e:"unsafe:"+e}function Ti(e){let t={};for(let n of e.split(","))t[n]=!0;return t}function Oc(...e){let t={};for(let n of e)for(let r in n)n.hasOwnProperty(r)&&(t[r]=!0);return t}var CE=Ti("area,br,col,hr,img,wbr"),EE=Ti("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),IE=Ti("rp,rt"),bR=Oc(IE,EE),xR=Oc(EE,Ti("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),SR=Oc(IE,Ti("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Bv=Oc(CE,xR,SR,bR),bE=Ti("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),AR=Ti("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),DR=Ti("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),TR=Oc(bE,AR,DR),MR=Ti("script,style,template"),Hg=class{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let n=t.firstChild,r=!0,i=[];for(;n;){if(n.nodeType===Node.ELEMENT_NODE?r=this.startElement(n):n.nodeType===Node.TEXT_NODE?this.chars(n.nodeValue):this.sanitizedSomething=!0,r&&n.firstChild){i.push(n),n=OR(n);continue}for(;n;){n.nodeType===Node.ELEMENT_NODE&&this.endElement(n);let o=RR(n);if(o){n=o;break}n=i.pop()}}return this.buf.join("")}startElement(t){let n=Vv(t).toLowerCase();if(!Bv.hasOwnProperty(n))return this.sanitizedSomething=!0,!MR.hasOwnProperty(n);this.buf.push("<"),this.buf.push(n);let r=t.attributes;for(let i=0;i<r.length;i++){let o=r.item(i),l=o.name,h=l.toLowerCase();if(!TR.hasOwnProperty(h)){this.sanitizedSomething=!0;continue}let g=o.value;bE[h]&&(g=Wm(g)),this.buf.push(" ",l,'="',Uv(g),'"')}return this.buf.push(">"),!0}endElement(t){let n=Vv(t).toLowerCase();Bv.hasOwnProperty(n)&&!CE.hasOwnProperty(n)&&(this.buf.push("</"),this.buf.push(n),this.buf.push(">"))}chars(t){this.buf.push(Uv(t))}};function NR(e,t){return(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function RR(e){let t=e.nextSibling;if(t&&e!==t.previousSibling)throw xE(t);return t}function OR(e){let t=e.firstChild;if(t&&NR(e,t))throw xE(t);return t}function Vv(e){let t=e.nodeName;return typeof t=="string"?t:"FORM"}function xE(e){return new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`)}var PR=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,kR=/([^\#-~ |!])/g;function Uv(e){return e.replace(/&/g,"&amp;").replace(PR,function(t){let n=t.charCodeAt(0),r=t.charCodeAt(1);return"&#"+((n-55296)*1024+(r-56320)+65536)+";"}).replace(kR,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var rd;function SE(e,t){let n=null;try{rd=rd||CR(e);let r=t?String(t):"";n=rd.getInertBodyElement(r);let i=5,o=r;do{if(i===0)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=rd.getInertBodyElement(r)}while(r!==o);let h=new Hg().sanitizeChildren(jv(n)||n);return Hd(h)}finally{if(n){let r=jv(n)||n;for(;r.firstChild;)r.firstChild.remove()}}}function jv(e){return"content"in e&&LR(e)?e.content:null}function LR(e){return e.nodeType===Node.ELEMENT_NODE&&e.nodeName==="TEMPLATE"}var uo=function(e){return e[e.NONE=0]="NONE",e[e.HTML=1]="HTML",e[e.STYLE=2]="STYLE",e[e.SCRIPT=3]="SCRIPT",e[e.URL=4]="URL",e[e.RESOURCE_URL=5]="RESOURCE_URL",e}(uo||{});function AE(e){return e instanceof Function?e():e}var vi=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}(vi||{}),FR;function Gm(e,t){return FR(e,t)}function Hs(e,t,n,r,i){if(r!=null){let o,l=!1;xi(r)?o=r:io(r)&&(l=!0,r=r[bi]);let h=Qr(r);e===0&&n!==null?i==null?NE(t,n,h):xd(t,n,h,i||null,!0):e===1&&n!==null?xd(t,n,h,i||null,!0):e===2?KR(t,h,l):e===3&&t.destroyNode(h),o!=null&&eO(t,e,o,n,i)}}function BR(e,t){return e.createText(t)}function VR(e,t,n){e.setValue(t,n)}function DE(e,t,n){return e.createElement(t,n)}function UR(e,t){TE(e,t),t[bi]=null,t[Lr]=null}function jR(e,t,n,r,i,o){r[bi]=i,r[Lr]=t,Wd(e,r,n,1,i,o)}function TE(e,t){t[mi].changeDetectionScheduler?.notify(9),Wd(e,t,t[zt],2,null,null)}function HR(e){let t=e[Ic];if(!t)return og(e[Se],e);for(;t;){let n=null;if(io(t))n=t[Ic];else{let r=t[Cn];r&&(n=r)}if(!n){for(;t&&!t[Pr]&&t!==e;)io(t)&&og(t[Se],t),t=t[En];t===null&&(t=e),io(t)&&og(t[Se],t),n=t&&t[Pr]}t=n}}function zR(e,t,n,r){let i=Cn+r,o=n.length;r>0&&(n[i-1][Pr]=t),r<o-Cn?(t[Pr]=n[i],uC(n,Cn+r,t)):(n.push(t),t[Pr]=null),t[En]=n;let l=t[Uo];l!==null&&n!==l&&ME(l,t);let h=t[yi];h!==null&&h.insertView(e),Eg(t),t[Ee]|=128}function ME(e,t){let n=e[Xs],r=t[En];if(io(r))e[Ee]|=wd.HasTransplantedViews;else{let i=r[En][kr];t[kr]!==i&&(e[Ee]|=wd.HasTransplantedViews)}n===null?e[Xs]=[t]:n.push(t)}function $m(e,t){let n=e[Xs],r=n.indexOf(t);n.splice(r,1)}function bc(e,t){if(e.length<=Cn)return;let n=Cn+t,r=e[n];if(r){let i=r[Uo];i!==null&&i!==e&&$m(i,r),t>0&&(e[n-1][Pr]=r[Pr]);let o=gd(e,Cn+t);UR(r[Se],r);let l=o[yi];l!==null&&l.detachView(o[Se]),r[En]=null,r[Pr]=null,r[Ee]&=-129}return r}function zd(e,t){if(!(t[Ee]&256)){let n=t[zt];n.destroyNode&&Wd(e,t,n,3,null,null),HR(t)}}function og(e,t){if(t[Ee]&256)return;let n=We(null);try{t[Ee]&=-129,t[Ee]|=256,t[ur]&&Mp(t[ur]),GR(e,t),WR(e,t),t[Se].type===1&&t[zt].destroy();let r=t[Uo];if(r!==null&&xi(t[En])){r!==t[En]&&$m(r,t);let i=t[yi];i!==null&&i.detachView(e)}Og(t)}finally{We(n)}}function WR(e,t){let n=e.cleanup,r=t[yd];if(n!==null)for(let o=0;o<n.length-1;o+=2)if(typeof n[o]=="string"){let l=n[o+3];l>=0?r[l]():r[-l].unsubscribe(),o+=2}else{let l=r[n[o+1]];n[o].call(l)}r!==null&&(t[yd]=null);let i=t[ro];if(i!==null){t[ro]=null;for(let o=0;o<i.length;o++){let l=i[o];l()}}}function GR(e,t){let n;if(e!=null&&(n=e.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=t[n[r]];if(!(i instanceof Wo)){let o=n[r+1];if(Array.isArray(o))for(let l=0;l<o.length;l+=2){let h=i[o[l]],g=o[l+1];Yr(4,h,g);try{g.call(h)}finally{Yr(5,h,g)}}else{Yr(4,i,o);try{o.call(i)}finally{Yr(5,i,o)}}}}}function $R(e,t,n){return qR(e,t.parent,n)}function qR(e,t,n){let r=t;for(;r!==null&&r.type&168;)t=r,r=t.parent;if(r===null)return n[bi];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=e.data[r.directiveStart+i];if(o===Xr.None||o===Xr.Emulated)return null}return hr(r,n)}}function xd(e,t,n,r,i){e.insertBefore(t,n,r,i)}function NE(e,t,n){e.appendChild(t,n)}function Hv(e,t,n,r,i){r!==null?xd(e,t,n,r,i):NE(e,t,n)}function RE(e,t){return e.parentNode(t)}function YR(e,t){return e.nextSibling(t)}function ZR(e,t,n){return QR(e,t,n)}function XR(e,t,n){return e.type&40?hr(e,n):null}var QR=XR,zv;function qm(e,t,n,r){let i=$R(e,r,t),o=t[zt],l=r.parent||t[Lr],h=ZR(l,r,t);if(i!=null)if(Array.isArray(n))for(let g=0;g<n.length;g++)Hv(o,i,n[g],h,!1);else Hv(o,i,n,h,!1);zv!==void 0&&zv(o,r,t,n,i)}function gc(e,t){if(t!==null){let n=t.type;if(n&3)return hr(t,e);if(n&4)return zg(-1,e[t.index]);if(n&8){let r=t.child;if(r!==null)return gc(e,r);{let i=e[t.index];return xi(i)?zg(-1,i):Qr(i)}}else{if(n&128)return gc(e,t.next);if(n&32)return Gm(t,e)()||Qr(e[t.index]);{let r=OE(e,t);if(r!==null){if(Array.isArray(r))return r[0];let i=Ho(e[kr]);return gc(i,r)}else return gc(e,t.next)}}}return null}function OE(e,t){if(t!==null){let r=e[kr][Lr],i=t.projection;return r.projection[i]}return null}function zg(e,t){let n=Cn+e+1;if(n<t.length){let r=t[n],i=r[Se].firstChild;if(i!==null)return gc(r,i)}return t[jo]}function KR(e,t,n){e.removeChild(null,t,n)}function Ym(e,t,n,r,i,o,l){for(;n!=null;){if(n.type===128){n=n.next;continue}let h=r[n.index],g=n.type;if(l&&t===0&&(h&&$o(Qr(h),r),n.flags|=2),(n.flags&32)!==32)if(g&8)Ym(e,t,n.child,r,i,o,!1),Hs(t,e,i,h,o);else if(g&32){let m=Gm(n,r),C;for(;C=m();)Hs(t,e,i,C,o);Hs(t,e,i,h,o)}else g&16?JR(e,t,r,n,i,o):Hs(t,e,i,h,o);n=l?n.projectionNext:n.next}}function Wd(e,t,n,r,i,o){Ym(n,r,e.firstChild,t,i,o,!1)}function JR(e,t,n,r,i,o){let l=n[kr],g=l[Lr].projection[r.projection];if(Array.isArray(g))for(let m=0;m<g.length;m++){let C=g[m];Hs(t,e,i,C,o)}else{let m=g,C=l[En];lE(r)&&(m.flags|=128),Ym(e,t,m,C,i,o,!0)}}function eO(e,t,n,r,i){let o=n[jo],l=Qr(n);o!==l&&Hs(t,e,r,o,i);for(let h=Cn;h<n.length;h++){let g=n[h];Wd(g[Se],g,e,t,r,o)}}function tO(e,t,n,r,i){if(t)i?e.addClass(n,r):e.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:vi.DashCase;i==null?e.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=vi.Important),e.setStyle(n,r,i,o))}}function nO(e,t,n){e.setAttribute(t,"style",n)}function PE(e,t,n){n===""?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n)}function kE(e,t,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&mg(e,t,r),i!==null&&PE(e,t,i),o!==null&&nO(e,t,o)}var Fr={};function oe(e=1){LE(hn(),tt(),Ai()+e,!1)}function LE(e,t,n,r){if(!r)if((t[Ee]&3)===3){let o=e.preOrderCheckHooks;o!==null&&cd(t,o,n)}else{let o=e.preOrderHooks;o!==null&&ld(t,o,0,n)}zo(n)}function ne(e,t=ke.Default){let n=tt();if(n===null)return Le(e,t);let r=zn();return tE(r,n,Mn(e),t)}function FE(e,t,n,r,i,o){let l=We(null);try{let h=null;i&oo.SignalBased&&(h=t[r][hi]),h!==null&&h.transformFn!==void 0&&(o=h.transformFn(o)),i&oo.HasDecoratorInputTransform&&(o=e.inputTransforms[r].call(t,o)),e.setInput!==null?e.setInput(t,h,o,n,r):DC(t,h,r,o)}finally{We(l)}}function rO(e,t){let n=e.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)zo(~i);else{let o=i,l=n[++r],h=n[++r];RN(l,o);let g=t[o];h(2,g)}}}finally{zo(-1)}}function Gd(e,t,n,r,i,o,l,h,g,m,C){let E=t.blueprint.slice();return E[bi]=i,E[Ee]=r|4|128|8|64,(m!==null||e&&e[Ee]&2048)&&(E[Ee]|=2048),OC(E),E[En]=E[na]=e,E[vn]=n,E[mi]=l||e&&e[mi],E[zt]=h||e&&e[zt],E[Zs]=g||e&&e[Zs]||null,E[Lr]=o,E[Bd]=dR(),E[Ec]=C,E[xC]=m,E[kr]=t.type==2?e[kr]:E,E}function $d(e,t,n,r,i){let o=e.data[t];if(o===null)o=iO(e,t,n,r,i),NN()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let l=SN();o.injectorIndex=l===null?-1:l.injectorIndex}return Rc(o,!0),o}function iO(e,t,n,r,i){let o=BC(),l=VC(),h=l?o:o&&o.parent,g=e.data[t]=uO(e,h,n,t,r,i);return e.firstChild===null&&(e.firstChild=g),o!==null&&(l?o.child==null&&g.parent!==null&&(o.child=g):o.next===null&&(o.next=g,g.prev=o)),g}function BE(e,t,n,r){if(n===0)return-1;let i=t.length;for(let o=0;o<n;o++)t.push(r),e.blueprint.push(r),e.data.push(null);return i}function VE(e,t,n,r,i){let o=Ai(),l=r&2;try{zo(-1),l&&t.length>fr&&LE(e,t,fr,!1),Yr(l?2:0,i),n(r,i)}finally{zo(o),Yr(l?3:1,i)}}function UE(e,t,n){if(AC(t)){let r=We(null);try{let i=t.directiveStart,o=t.directiveEnd;for(let l=i;l<o;l++){let h=e.data[l];if(h.contentQueries){let g=n[l];h.contentQueries(1,g,l)}}}finally{We(r)}}}function jE(e,t,n){FC()&&(mO(e,t,n,hr(n,t)),(n.flags&64)===64&&qE(e,t,n))}function HE(e,t,n=hr){let r=t.localNames;if(r!==null){let i=t.index+1;for(let o=0;o<r.length;o+=2){let l=r[o+1],h=l===-1?n(t,e):e[l];e[i++]=h}}}function zE(e){let t=e.tView;return t===null||t.incompleteFirstPass?e.tView=Zm(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):t}function Zm(e,t,n,r,i,o,l,h,g,m,C){let E=fr+r,x=E+i,D=oO(E,x),N=typeof m=="function"?m():m;return D[Se]={type:e,blueprint:D,template:n,queries:null,viewQuery:h,declTNode:t,data:D.slice().fill(null,E),bindingStartIndex:E,expandoStartIndex:x,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof l=="function"?l():l,firstChild:null,schemas:g,consts:N,incompleteFirstPass:!1,ssrId:C}}function oO(e,t){let n=[];for(let r=0;r<t;r++)n.push(r<e?null:Fr);return n}function sO(e,t,n,r){let o=r.get(_R,gE)||n===Xr.ShadowDom,l=e.selectRootElement(t,o);return aO(l),l}function aO(e){cO(e)}var cO=()=>null;function lO(e,t,n,r){let i=XE(t);i.push(n),e.firstCreatePass&&QE(e).push(r,i.length-1)}function uO(e,t,n,r,i,o){let l=t?t.injectorIndex:-1,h=0;return IN()&&(h|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:l,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:h,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function Wv(e,t,n,r,i){for(let o in t){if(!t.hasOwnProperty(o))continue;let l=t[o];if(l===void 0)continue;r??={};let h,g=oo.None;Array.isArray(l)?(h=l[0],g=l[1]):h=l;let m=o;if(i!==null){if(!i.hasOwnProperty(o))continue;m=i[o]}e===0?Gv(r,n,m,h,g):Gv(r,n,m,h)}return r}function Gv(e,t,n,r,i){let o;e.hasOwnProperty(n)?(o=e[n]).push(t,r):o=e[n]=[t,r],i!==void 0&&o.push(i)}function dO(e,t,n){let r=t.directiveStart,i=t.directiveEnd,o=e.data,l=t.attrs,h=[],g=null,m=null;for(let C=r;C<i;C++){let E=o[C],x=n?n.get(E):null,D=x?x.inputs:null,N=x?x.outputs:null;g=Wv(0,E.inputs,C,g,D),m=Wv(1,E.outputs,C,m,N);let U=g!==null&&l!==null&&!Em(t)?AO(g,C,l):null;h.push(U)}g!==null&&(g.hasOwnProperty("class")&&(t.flags|=8),g.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=h,t.inputs=g,t.outputs=m}function fO(e){return e==="class"?"className":e==="for"?"htmlFor":e==="formaction"?"formAction":e==="innerHtml"?"innerHTML":e==="readonly"?"readOnly":e==="tabindex"?"tabIndex":e}function WE(e,t,n,r,i,o,l,h){let g=hr(t,n),m=t.inputs,C;!h&&m!=null&&(C=m[r])?(Xm(e,n,C,r,i),Vd(t)&&hO(n,t.index)):t.type&3?(r=fO(r),i=l!=null?l(i,t.value||"",r):i,o.setProperty(g,r,i)):t.type&12}function hO(e,t){let n=lo(t,e);n[Ee]&16||(n[Ee]|=64)}function GE(e,t,n,r){if(FC()){let i=r===null?null:{"":-1},o=_O(e,n),l,h;o===null?l=h=null:[l,h]=o,l!==null&&$E(e,t,n,l,i,h),i&&wO(n,r,i)}n.mergedAttrs=vc(n.mergedAttrs,n.attrs)}function $E(e,t,n,r,i,o){for(let m=0;m<r.length;m++)Sg(Ed(n,t),e,r[m].type);CO(n,e.data.length,r.length);for(let m=0;m<r.length;m++){let C=r[m];C.providersResolver&&C.providersResolver(C)}let l=!1,h=!1,g=BE(e,t,r.length,null);for(let m=0;m<r.length;m++){let C=r[m];n.mergedAttrs=vc(n.mergedAttrs,C.hostAttrs),EO(e,n,t,g,C),vO(g,C,i),C.contentQueries!==null&&(n.flags|=4),(C.hostBindings!==null||C.hostAttrs!==null||C.hostVars!==0)&&(n.flags|=64);let E=C.type.prototype;!l&&(E.ngOnChanges||E.ngOnInit||E.ngDoCheck)&&((e.preOrderHooks??=[]).push(n.index),l=!0),!h&&(E.ngOnChanges||E.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(n.index),h=!0),g++}dO(e,n,o)}function pO(e,t,n,r,i){let o=i.hostBindings;if(o){let l=e.hostBindingOpCodes;l===null&&(l=e.hostBindingOpCodes=[]);let h=~t.index;gO(l)!=h&&l.push(h),l.push(n,r,o)}}function gO(e){let t=e.length;for(;t>0;){let n=e[--t];if(typeof n=="number"&&n<0)return n}return 0}function mO(e,t,n,r){let i=n.directiveStart,o=n.directiveEnd;Vd(n)&&IO(t,n,e.data[i+n.componentOffset]),e.firstCreatePass||Ed(n,t),$o(r,t);let l=n.initialInputs;for(let h=i;h<o;h++){let g=e.data[h],m=Go(t,e,h,n);if($o(m,t),l!==null&&SO(t,h-i,m,g,n,l),so(g)){let C=lo(n.index,t);C[vn]=Go(t,e,h,n)}}}function qE(e,t,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,l=ON();try{zo(o);for(let h=r;h<i;h++){let g=e.data[h],m=t[h];Ig(h),(g.hostBindings!==null||g.hostVars!==0||g.hostAttrs!==null)&&yO(g,m)}}finally{zo(-1),Ig(l)}}function yO(e,t){e.hostBindings!==null&&e.hostBindings(1,t)}function _O(e,t){let n=e.directiveRegistry,r=null,i=null;if(n)for(let o=0;o<n.length;o++){let l=n[o];if(HM(t,l.selectors,!1))if(r||(r=[]),so(l))if(l.findHostDirectiveDefs!==null){let h=[];i=i||new Map,l.findHostDirectiveDefs(l,h,i),r.unshift(...h,l);let g=h.length;Wg(e,t,g)}else r.unshift(l),Wg(e,t,0);else i=i||new Map,l.findHostDirectiveDefs?.(l,r,i),r.push(l)}return r===null?null:[r,i]}function Wg(e,t,n){t.componentOffset=n,(e.components??=[]).push(t.index)}function wO(e,t,n){if(t){let r=e.localNames=[];for(let i=0;i<t.length;i+=2){let o=n[t[i+1]];if(o==null)throw new pe(-301,!1);r.push(t[i],o)}}}function vO(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;so(t)&&(n[""]=e)}}function CO(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function EO(e,t,n,r,i){e.data[r]=i;let o=i.factory||(i.factory=Gs(i.type,!0)),l=new Wo(o,so(i),ne);e.blueprint[r]=l,n[r]=l,pO(e,t,r,BE(e,n,i.hostVars,Fr),i)}function IO(e,t,n){let r=hr(t,e),i=zE(n),o=e[mi].rendererFactory,l=16;n.signals?l=4096:n.onPush&&(l=64);let h=qd(e,Gd(e,i,null,l,r,t,null,o.createRenderer(r,n),null,null,null));e[t.index]=h}function bO(e,t,n,r,i,o){let l=hr(e,t);xO(t[zt],l,o,e.value,n,r,i)}function xO(e,t,n,r,i,o,l){if(o==null)e.removeAttribute(t,i,n);else{let h=l==null?_c(o):l(o,r||"",i);e.setAttribute(t,i,h,n)}}function SO(e,t,n,r,i,o){let l=o[t];if(l!==null)for(let h=0;h<l.length;){let g=l[h++],m=l[h++],C=l[h++],E=l[h++];FE(r,n,g,m,C,E)}}function AO(e,t,n){let r=null,i=0;for(;i<n.length;){let o=n[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(e.hasOwnProperty(o)){r===null&&(r=[]);let l=e[o];for(let h=0;h<l.length;h+=3)if(l[h]===t){r.push(o,l[h+1],l[h+2],n[i+1]);break}}i+=2}return r}function YE(e,t,n,r){return[e,!0,0,t,null,r,null,n,null,null]}function ZE(e,t){let n=e.contentQueries;if(n!==null){let r=We(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],l=n[i+1];if(l!==-1){let h=e.data[l];Mm(o),h.contentQueries(2,t[l],l)}}}finally{We(r)}}}function qd(e,t){return e[Ic]?e[Sv][Pr]=t:e[Ic]=t,e[Sv]=t,t}function Gg(e,t,n){Mm(0);let r=We(null);try{t(e,n)}finally{We(r)}}function XE(e){return e[yd]??=[]}function QE(e){return e.cleanup??=[]}function KE(e,t){let n=e[Zs],r=n?n.get(_i,null):null;r&&r.handleError(t)}function Xm(e,t,n,r,i){for(let o=0;o<n.length;){let l=n[o++],h=n[o++],g=n[o++],m=t[l],C=e.data[l];FE(C,m,r,h,g,i)}}function JE(e,t,n){let r=RC(t,e);VR(e[zt],r,n)}function DO(e,t){let n=lo(t,e),r=n[Se];TO(r,n);let i=n[bi];i!==null&&n[Ec]===null&&(n[Ec]=zm(i,n[Zs])),Qm(r,n,n[vn])}function TO(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}function Qm(e,t,n){Nm(t);try{let r=e.viewQuery;r!==null&&Gg(1,r,n);let i=e.template;i!==null&&VE(e,t,i,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),t[yi]?.finishViewCreation(e),e.staticContentQueries&&ZE(e,t),e.staticViewQueries&&Gg(2,e.viewQuery,n);let o=e.components;o!==null&&MO(t,o)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{t[Ee]&=-5,Rm()}}function MO(e,t){for(let n=0;n<t.length;n++)DO(e,t[n])}function Yd(e,t,n,r){let i=We(null);try{let o=t.tView,h=e[Ee]&4096?4096:16,g=Gd(e,o,n,h,null,t,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),m=e[t.index];g[Uo]=m;let C=e[yi];return C!==null&&(g[yi]=C.createEmbeddedView(o)),Qm(o,g,n),g}finally{We(i)}}function eI(e,t){let n=Cn+t;if(n<e.length)return e[n]}function xc(e,t){return!t||t.firstChild===null||lE(e)}function Zd(e,t,n,r=!0){let i=t[Se];if(zR(i,t,e,n),r){let l=zg(n,e),h=t[zt],g=RE(h,e[jo]);g!==null&&jR(i,e[Lr],h,t,g,l)}let o=t[Ec];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function tI(e,t){let n=bc(e,t);return n!==void 0&&zd(n[Se],n),n}function Sd(e,t,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let o=t[n.index];o!==null&&r.push(Qr(o)),xi(o)&&NO(o,r);let l=n.type;if(l&8)Sd(e,t,n.child,r);else if(l&32){let h=Gm(n,t),g;for(;g=h();)r.push(g)}else if(l&16){let h=OE(t,n);if(Array.isArray(h))r.push(...h);else{let g=Ho(t[kr]);Sd(g[Se],g,h,r,!0)}}n=i?n.projectionNext:n.next}return r}function NO(e,t){for(let n=Cn;n<e.length;n++){let r=e[n],i=r[Se].firstChild;i!==null&&Sd(r[Se],r,i,t)}e[jo]!==e[bi]&&t.push(e[jo])}var nI=[];function RO(e){return e[ur]??OO(e)}function OO(e){let t=nI.pop()??Object.create(kO);return t.lView=e,t}function PO(e){e.lView[ur]!==e&&(e.lView=null,nI.push(e))}var kO=Ue(K({},dc),{consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{jd(e.lView)},consumerOnSignalRead(){this.lView[ur]=this}});function LO(e){let t=e[ur]??Object.create(FO);return t.lView=e,t}var FO=Ue(K({},dc),{consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{let t=Ho(e.lView);for(;t&&!rI(t[Se]);)t=Ho(t);t&&PC(t)},consumerOnSignalRead(){this.lView[ur]=this}});function rI(e){return e.type!==2}var BO=100;function iI(e,t=!0,n=0){let r=e[mi],i=r.rendererFactory,o=!1;o||i.begin?.();try{VO(e,n)}catch(l){throw t&&KE(e,l),l}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function VO(e,t){let n=UC();try{Dv(!0),$g(e,t);let r=0;for(;Ud(e);){if(r===BO)throw new pe(103,!1);r++,$g(e,1)}}finally{Dv(n)}}function UO(e,t,n,r){let i=t[Ee];if((i&256)===256)return;let o=!1,l=!1;!o&&t[mi].inlineEffectRunner?.flush(),Nm(t);let h=!0,g=null,m=null;o||(rI(e)?(m=RO(t),g=Au(m)):Nw()===null?(h=!1,m=LO(t),g=Au(m)):t[ur]&&(Mp(t[ur]),t[ur]=null));try{OC(t),MN(e.bindingStartIndex),n!==null&&VE(e,t,n,2,r);let C=(i&3)===3;if(!o)if(C){let D=e.preOrderCheckHooks;D!==null&&cd(t,D,null)}else{let D=e.preOrderHooks;D!==null&&ld(t,D,0,null),tg(t,0)}if(l||jO(t),oI(t,0),e.contentQueries!==null&&ZE(e,t),!o)if(C){let D=e.contentCheckHooks;D!==null&&cd(t,D)}else{let D=e.contentHooks;D!==null&&ld(t,D,1),tg(t,1)}rO(e,t);let E=e.components;E!==null&&aI(t,E,0);let x=e.viewQuery;if(x!==null&&Gg(2,x,r),!o)if(C){let D=e.viewCheckHooks;D!==null&&cd(t,D)}else{let D=e.viewHooks;D!==null&&ld(t,D,2),tg(t,2)}if(e.firstUpdatePass===!0&&(e.firstUpdatePass=!1),t[eg]){for(let D of t[eg])D();t[eg]=null}o||(t[Ee]&=-73)}catch(C){throw o||jd(t),C}finally{m!==null&&(Dp(m,g),h&&PO(m)),Rm()}}function oI(e,t){for(let n=dE(e);n!==null;n=fE(n))for(let r=Cn;r<n.length;r++){let i=n[r];sI(i,t)}}function jO(e){for(let t=dE(e);t!==null;t=fE(t)){if(!(t[Ee]&wd.HasTransplantedViews))continue;let n=t[Xs];for(let r=0;r<n.length;r++){let i=n[r];PC(i)}}}function HO(e,t,n){let r=lo(t,e);sI(r,n)}function sI(e,t){Dm(e)&&$g(e,t)}function $g(e,t){let r=e[Se],i=e[Ee],o=e[ur],l=!!(t===0&&i&16);if(l||=!!(i&64&&t===0),l||=!!(i&1024),l||=!!(o?.dirty&&Tp(o)),l||=!1,o&&(o.dirty=!1),e[Ee]&=-9217,l)UO(r,e,r.template,e[vn]);else if(i&8192){oI(e,1);let h=r.components;h!==null&&aI(e,h,1)}}function aI(e,t,n){for(let r=0;r<t.length;r++)HO(e,t[r],n)}function Km(e,t){let n=UC()?64:1088;for(e[mi].changeDetectionScheduler?.notify(t);e;){e[Ee]|=n;let r=Ho(e);if(vg(e)&&!r)return e;e=r}return null}var qo=class{get rootNodes(){let t=this._lView,n=t[Se];return Sd(n,t,n.firstChild,[])}constructor(t,n,r=!0){this._lView=t,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[vn]}set context(t){this._lView[vn]=t}get destroyed(){return(this._lView[Ee]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let t=this._lView[En];if(xi(t)){let n=t[_d],r=n?n.indexOf(this):-1;r>-1&&(bc(t,r),gd(n,r))}this._attachedToViewContainer=!1}zd(this._lView[Se],this._lView)}onDestroy(t){kC(this._lView,t)}markForCheck(){Km(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Ee]&=-129}reattach(){Eg(this._lView),this._lView[Ee]|=128}detectChanges(){this._lView[Ee]|=1024,iI(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new pe(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let t=vg(this._lView),n=this._lView[Uo];n!==null&&!t&&$m(n,this._lView),TE(this._lView[Se],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new pe(902,!1);this._appRef=t;let n=vg(this._lView),r=this._lView[Uo];r!==null&&!n&&ME(r,this._lView),Eg(this._lView)}},Sc=(()=>{class e{static{this.__NG_ELEMENT_ID__=GO}}return e})(),zO=Sc,WO=class extends zO{constructor(t,n,r){super(),this._declarationLView=t,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,n){return this.createEmbeddedViewImpl(t,n)}createEmbeddedViewImpl(t,n,r){let i=Yd(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:n,dehydratedView:r});return new qo(i)}};function GO(){return Jm(zn(),tt())}function Jm(e,t){return e.type&4?new WO(t,e,sa(e,t)):null}var oG=new RegExp(`^(\\d+)*(${mR}|${gR})*(.*)`);var $O=()=>null;function Ac(e,t){return $O(e,t)}var Ks=class{},e0=new Ie("",{providedIn:"root",factory:()=>!1});var cI=new Ie(""),lI=new Ie(""),qg=class{},Ad=class{};function qO(e){let t=Error(`No component factory found for ${jn(e)}.`);return t[YO]=e,t}var YO="ngComponent";var Yg=class{resolveComponentFactory(t){throw qO(t)}},Js=class{static{this.NULL=new Yg}},ea=class{},fo=(()=>{class e{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>ZO()}}return e})();function ZO(){let e=tt(),t=zn(),n=lo(t.index,e);return(io(n)?n:e)[zt]}var XO=(()=>{class e{static{this.\u0275prov=ge({token:e,providedIn:"root",factory:()=>null})}}return e})();function Zg(e,t,n){let r=n?e.styles:null,i=n?e.classes:null,o=0;if(t!==null)for(let l=0;l<t.length;l++){let h=t[l];if(typeof h=="number")o=h;else if(o==1)i=hg(i,h);else if(o==2){let g=h,m=t[++l];r=hg(r,g+": "+m+";")}}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=i:e.classesWithoutHost=i}var Dd=class extends Js{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){let n=Vo(t);return new Dc(n,this.ngModule)}};function $v(e,t){let n=[];for(let r in e){if(!e.hasOwnProperty(r))continue;let i=e[r];if(i===void 0)continue;let o=Array.isArray(i),l=o?i[0]:i,h=o?i[1]:oo.None;t?n.push({propName:l,templateName:r,isSignal:(h&oo.SignalBased)!==0}):n.push({propName:l,templateName:r})}return n}function QO(e){let t=e.toLowerCase();return t==="svg"?hN:t==="math"?pN:null}var Dc=class extends Ad{get inputs(){let t=this.componentDef,n=t.inputTransforms,r=$v(t.inputs,!0);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return $v(this.componentDef.outputs,!1)}constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=$M(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!n}create(t,n,r,i){let o=We(null);try{i=i||this.ngModule;let l=i instanceof dr?i:i?.injector;l&&this.componentDef.getStandaloneInjector!==null&&(l=this.componentDef.getStandaloneInjector(l)||l);let h=l?new bg(t,l):t,g=h.get(ea,null);if(g===null)throw new pe(407,!1);let m=h.get(XO,null),C=h.get(Ks,null),E={rendererFactory:g,sanitizer:m,inlineEffectRunner:null,changeDetectionScheduler:C},x=g.createRenderer(null,this.componentDef),D=this.componentDef.selectors[0][0]||"div",N=r?sO(x,r,this.componentDef.encapsulation,h):DE(x,D,QO(D)),U=512;this.componentDef.signals?U|=4096:this.componentDef.onPush||(U|=16);let $=null;N!==null&&($=zm(N,h,!0));let W=Zm(0,null,null,1,0,null,null,null,null,null,null),ie=Gd(null,W,null,U,null,null,E,x,h,null,$);Nm(ie);let ze,he,H=null;try{let ae=this.componentDef,G,Sn=null;ae.findHostDirectiveDefs?(G=[],Sn=new Map,ae.findHostDirectiveDefs(ae,G,Sn),G.push(ae)):G=[ae];let Ut=KO(ie,N);H=JO(Ut,N,ae,G,ie,E,x),he=Am(W,fr),N&&nP(x,ae,N,r),n!==void 0&&rP(he,this.ngContentSelectors,n),ze=tP(H,ae,G,Sn,ie,[iP]),Qm(W,ie,null)}catch(ae){throw H!==null&&Og(H),Og(ie),ae}finally{Rm()}return new Xg(this.componentType,ze,sa(he,ie),ie,he)}finally{We(o)}}},Xg=class extends qg{constructor(t,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new qo(i,void 0,!1),this.componentType=t}setInput(t,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[t])){if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),n))return;let o=this._rootLView;Xm(o[Se],o,i,t,n),this.previousInputValues.set(t,n);let l=lo(this._tNode.index,o);Km(l,1)}}get injector(){return new Bo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}};function KO(e,t){let n=e[Se],r=fr;return e[r]=t,$d(n,r,2,"#host",null)}function JO(e,t,n,r,i,o,l){let h=i[Se];eP(r,e,t,l);let g=null;t!==null&&(g=zm(t,i[Zs]));let m=o.rendererFactory.createRenderer(t,n),C=16;n.signals?C=4096:n.onPush&&(C=64);let E=Gd(i,zE(n),null,C,i[e.index],e,o,m,null,null,g);return h.firstCreatePass&&Wg(h,e,r.length-1),qd(i,E),i[e.index]=E}function eP(e,t,n,r){for(let i of e)t.mergedAttrs=vc(t.mergedAttrs,i.hostAttrs);t.mergedAttrs!==null&&(Zg(t,t.mergedAttrs,!0),n!==null&&kE(r,n,t))}function tP(e,t,n,r,i,o){let l=zn(),h=i[Se],g=hr(l,i);$E(h,i,l,n,null,r);for(let C=0;C<n.length;C++){let E=l.directiveStart+C,x=Go(i,h,E,l);$o(x,i)}qE(h,i,l),g&&$o(g,i);let m=Go(i,h,l.directiveStart+l.componentOffset,l);if(e[vn]=i[vn]=m,o!==null)for(let C of o)C(m,t);return UE(h,l,i),m}function nP(e,t,n,r){if(r)mg(e,n,["ng-version","18.2.7"]);else{let{attrs:i,classes:o}=qM(t.selectors[0]);i&&mg(e,n,i),o&&o.length>0&&PE(e,n,o.join(" "))}}function rP(e,t,n){let r=e.projection=[];for(let i=0;i<t.length;i++){let o=n[i];r.push(o!=null?Array.from(o):null)}}function iP(){let e=zn();Lm(tt()[Se],e)}var la=(()=>{class e{static{this.__NG_ELEMENT_ID__=oP}}return e})();function oP(){let e=zn();return dI(e,tt())}var sP=la,uI=class extends sP{constructor(t,n,r){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=r}get element(){return sa(this._hostTNode,this._hostLView)}get injector(){return new Bo(this._hostTNode,this._hostLView)}get parentInjector(){let t=Fm(this._hostTNode,this._hostLView);if(ZC(t)){let n=Cd(t,this._hostLView),r=vd(t),i=n[Se].data[r+8];return new Bo(i,n)}else return new Bo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){let n=qv(this._lContainer);return n!==null&&n[t]||null}get length(){return this._lContainer.length-Cn}createEmbeddedView(t,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let l=Ac(this._lContainer,t.ssrId),h=t.createEmbeddedViewImpl(n||{},o,l);return this.insertImpl(h,i,xc(this._hostTNode,l)),h}createComponent(t,n,r,i,o){let l=t&&!lN(t),h;if(l)h=n;else{let N=n||{};h=N.index,r=N.injector,i=N.projectableNodes,o=N.environmentInjector||N.ngModuleRef}let g=l?t:new Dc(Vo(t)),m=r||this.parentInjector;if(!o&&g.ngModule==null){let U=(l?m:this.parentInjector).get(dr,null);U&&(o=U)}let C=Vo(g.componentType??{}),E=Ac(this._lContainer,C?.id??null),x=E?.firstChild??null,D=g.create(m,i,x,o);return this.insertImpl(D.hostView,h,xc(this._hostTNode,E)),D}insert(t,n){return this.insertImpl(t,n,!0)}insertImpl(t,n,r){let i=t._lView;if(yN(i)){let h=this.indexOf(t);if(h!==-1)this.detach(h);else{let g=i[En],m=new uI(g,g[Lr],g[En]);m.detach(m.indexOf(t))}}let o=this._adjustIndex(n),l=this._lContainer;return Zd(l,i,o,r),t.attachToViewContainerRef(),uC(sg(l),o,t),t}move(t,n){return this.insert(t,n)}indexOf(t){let n=qv(this._lContainer);return n!==null?n.indexOf(t):-1}remove(t){let n=this._adjustIndex(t,-1),r=bc(this._lContainer,n);r&&(gd(sg(this._lContainer),n),zd(r[Se],r))}detach(t){let n=this._adjustIndex(t,-1),r=bc(this._lContainer,n);return r&&gd(sg(this._lContainer),n)!=null?new qo(r):null}_adjustIndex(t,n=0){return t??this.length+n}};function qv(e){return e[_d]}function sg(e){return e[_d]||(e[_d]=[])}function dI(e,t){let n,r=t[e.index];return xi(r)?n=r:(n=YE(r,t,null,e),t[e.index]=n,qd(t,n)),cP(n,t,e,r),new uI(n,e,t)}function aP(e,t){let n=e[zt],r=n.createComment(""),i=hr(t,e),o=RE(n,i);return xd(n,o,r,YR(n,i),!1),r}var cP=dP,lP=()=>!1;function uP(e,t,n){return lP(e,t,n)}function dP(e,t,n,r){if(e[jo])return;let i;n.type&8?i=Qr(r):i=aP(t,n),e[jo]=i}var Qg=class e{constructor(t){this.queryList=t,this.matches=null}clone(){return new e(this.queryList)}setDirty(){this.queryList.setDirty()}},Kg=class e{constructor(t=[]){this.queries=t}createEmbeddedView(t){let n=t.queries;if(n!==null){let r=t.contentQueries!==null?t.contentQueries[0]:n.length,i=[];for(let o=0;o<r;o++){let l=n.getByIndex(o),h=this.queries[l.indexInDeclarationView];i.push(h.clone())}return new e(i)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}finishViewCreation(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let n=0;n<this.queries.length;n++)t0(t,n).matches!==null&&this.queries[n].setDirty()}},Jg=class{constructor(t,n,r=null){this.flags=n,this.read=r,typeof t=="string"?this.predicate=wP(t):this.predicate=t}},em=class e{constructor(t=[]){this.queries=t}elementStart(t,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(t,n)}elementEnd(t){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(t)}embeddedTView(t){let n=null;for(let r=0;r<this.length;r++){let i=n!==null?n.length:0,o=this.getByIndex(r).embeddedTView(t,i);o&&(o.indexInDeclarationView=r,n!==null?n.push(o):n=[o])}return n!==null?new e(n):null}template(t,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(t,n)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}},tm=class e{constructor(t,n=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(t,n){this.isApplyingToNode(n)&&this.matchTNode(t,n)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,n){this.elementStart(t,n)}embeddedTView(t,n){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,n),new e(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,r=t.parent;for(;r!==null&&r.type&8&&r.index!==n;)r=r.parent;return n===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(t,n){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(t,n,fP(n,o)),this.matchTNodeWithReadOption(t,n,ud(n,t,o,!1,!1))}else r===Sc?n.type&4&&this.matchTNodeWithReadOption(t,n,-1):this.matchTNodeWithReadOption(t,n,ud(n,t,r,!1,!1))}matchTNodeWithReadOption(t,n,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===Jr||i===la||i===Sc&&n.type&4)this.addMatch(n.index,-2);else{let o=ud(n,t,i,!1,!1);o!==null&&this.addMatch(n.index,o)}else this.addMatch(n.index,r)}}addMatch(t,n){this.matches===null?this.matches=[t,n]:this.matches.push(t,n)}};function fP(e,t){let n=e.localNames;if(n!==null){for(let r=0;r<n.length;r+=2)if(n[r]===t)return n[r+1]}return null}function hP(e,t){return e.type&11?sa(e,t):e.type&4?Jm(e,t):null}function pP(e,t,n,r){return n===-1?hP(t,e):n===-2?gP(e,t,r):Go(e,e[Se],n,t)}function gP(e,t,n){if(n===Jr)return sa(t,e);if(n===Sc)return Jm(t,e);if(n===la)return dI(t,e)}function fI(e,t,n,r){let i=t[yi].queries[r];if(i.matches===null){let o=e.data,l=n.matches,h=[];for(let g=0;l!==null&&g<l.length;g+=2){let m=l[g];if(m<0)h.push(null);else{let C=o[m];h.push(pP(t,C,l[g+1],n.metadata.read))}}i.matches=h}return i.matches}function nm(e,t,n,r){let i=e.queries.getByIndex(n),o=i.matches;if(o!==null){let l=fI(e,t,i,n);for(let h=0;h<o.length;h+=2){let g=o[h];if(g>0)r.push(l[h/2]);else{let m=o[h+1],C=t[-g];for(let E=Cn;E<C.length;E++){let x=C[E];x[Uo]===x[En]&&nm(x[Se],x,m,r)}if(C[Xs]!==null){let E=C[Xs];for(let x=0;x<E.length;x++){let D=E[x];nm(D[Se],D,m,r)}}}}}return r}function mP(e,t){return e[yi].queries[t].queryList}function yP(e,t,n){let r=new Rg((n&4)===4);return lO(e,t,r,r.destroy),(t[yi]??=new Kg).queries.push(new Qg(r))-1}function _P(e,t,n){let r=hn();return r.firstCreatePass&&(vP(r,new Jg(e,t,n),-1),(t&2)===2&&(r.staticViewQueries=!0)),yP(r,tt(),t)}function wP(e){return e.split(",").map(t=>t.trim())}function vP(e,t,n){e.queries===null&&(e.queries=new em),e.queries.track(new tm(t,n))}function t0(e,t){return e.queries.getByIndex(t)}function CP(e,t){let n=e[Se],r=t0(n,t);return r.crossesNgTemplate?nm(n,e,t,[]):fI(n,e,r,t)}var Yv=new Set;function ua(e){Yv.has(e)||(Yv.add(e),performance?.mark?.("mark_feature_usage",{detail:{feature:e}}))}function EP(e){return typeof e=="function"&&e[hi]!==void 0}function Pc(e,t){ua("NgSignals");let n=Hw(e),r=n[hi];return t?.equal&&(r.equal=t.equal),n.set=i=>Np(r,i),n.update=i=>zw(r,i),n.asReadonly=IP.bind(n),n}function IP(){let e=this[hi];if(e.readonlyFn===void 0){let t=()=>this();t[hi]=e,e.readonlyFn=t}return e.readonlyFn}function hI(e){return EP(e)&&typeof e.set=="function"}function bP(e){return Object.getPrototypeOf(e.prototype).constructor}function Mi(e){let t=bP(e.type),n=!0,r=[e];for(;t;){let i;if(so(e))i=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new pe(903,!1);i=t.\u0275dir}if(i){if(n){r.push(i);let l=e;l.inputs=id(e.inputs),l.inputTransforms=id(e.inputTransforms),l.declaredInputs=id(e.declaredInputs),l.outputs=id(e.outputs);let h=i.hostBindings;h&&TP(e,h);let g=i.viewQuery,m=i.contentQueries;if(g&&AP(e,g),m&&DP(e,m),xP(e,i),dM(e.outputs,i.outputs),so(i)&&i.data.animation){let C=e.data;C.animation=(C.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let l=0;l<o.length;l++){let h=o[l];h&&h.ngInherit&&h(e),h===Mi&&(n=!1)}}t=Object.getPrototypeOf(t)}SP(r)}function xP(e,t){for(let n in t.inputs){if(!t.inputs.hasOwnProperty(n)||e.inputs.hasOwnProperty(n))continue;let r=t.inputs[n];if(r!==void 0&&(e.inputs[n]=r,e.declaredInputs[n]=t.declaredInputs[n],t.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!t.inputTransforms.hasOwnProperty(i))continue;e.inputTransforms??={},e.inputTransforms[i]=t.inputTransforms[i]}}}function SP(e){let t=0,n=null;for(let r=e.length-1;r>=0;r--){let i=e[r];i.hostVars=t+=i.hostVars,i.hostAttrs=vc(i.hostAttrs,n=vc(n,i.hostAttrs))}}function id(e){return e===$s?{}:e===Un?[]:e}function AP(e,t){let n=e.viewQuery;n?e.viewQuery=(r,i)=>{t(r,i),n(r,i)}:e.viewQuery=t}function DP(e,t){let n=e.contentQueries;n?e.contentQueries=(r,i,o)=>{t(r,i,o),n(r,i,o)}:e.contentQueries=t}function TP(e,t){let n=e.hostBindings;n?e.hostBindings=(r,i)=>{t(r,i),n(r,i)}:e.hostBindings=t}var co=class{},Tc=class{};var rm=class extends co{constructor(t,n,r,i=!0){super(),this.ngModuleType=t,this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Dd(this);let o=_C(t);this._bootstrapComponents=AE(o.bootstrap),this._r3Injector=iE(t,n,[{provide:co,useValue:this},{provide:Js,useValue:this.componentFactoryResolver},...r],jn(t),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}},im=class extends Tc{constructor(t){super(),this.moduleType=t}create(t){return new rm(this.moduleType,t,[])}};var Td=class extends co{constructor(t){super(),this.componentFactoryResolver=new Dd(this),this.instance=null;let n=new Cc([...t.providers,{provide:co,useValue:this},{provide:Js,useValue:this.componentFactoryResolver}],t.parent||xm(),t.debugName,new Set(["environment"]));this.injector=n,t.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}};function n0(e,t,n=null){return new Td({providers:e,parent:t,debugName:n,runEnvironmentInitializers:!0}).injector}function Kr(e,t,n){let r=e[t];return Object.is(r,n)?!1:(e[t]=n,!0)}function MP(e,t,n,r){let i=Kr(e,t,n);return Kr(e,t+1,r)||i}function NP(e){return(e.flags&32)===32}function RP(e,t,n,r,i,o,l,h,g){let m=t.consts,C=$d(t,e,4,l||null,h||null);GE(t,n,C,Qs(m,g)),Lm(t,C);let E=C.tView=Zm(2,C,r,i,o,t.directiveRegistry,t.pipeRegistry,null,t.schemas,m,null);return t.queries!==null&&(t.queries.template(t,C),E.queries=t.queries.embeddedTView(C)),C}function om(e,t,n,r,i,o,l,h,g,m){let C=n+fr,E=t.firstCreatePass?RP(C,t,e,r,i,o,l,h,g):t.data[C];Rc(E,!1);let x=OP(t,e,E,n);Pm()&&qm(t,e,x,E),$o(x,e);let D=YE(x,e,x,E);return e[C]=D,qd(e,D),uP(D,E,e),Sm(E)&&jE(t,e,E),g!=null&&HE(e,E,m),E}function In(e,t,n,r,i,o,l,h){let g=tt(),m=hn(),C=Qs(m.consts,o);return om(g,m,e,t,n,r,i,C,l,h),In}var OP=PP;function PP(e,t,n,r){return km(!0),t[zt].createComment("")}var mc=function(e){return e[e.EarlyRead=0]="EarlyRead",e[e.Write=1]="Write",e[e.MixedReadWrite=2]="MixedReadWrite",e[e.Read=3]="Read",e}(mc||{}),kP=(()=>{class e{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=ge({token:e,providedIn:"root",factory:()=>new e})}}return e})(),Zv=class e{constructor(){this.ngZone=J(Qt),this.scheduler=J(Ks),this.errorHandler=J(_i,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[mc.EarlyRead,mc.Write,mc.MixedReadWrite,mc.Read]}execute(){this.executing=!0;for(let t of e.PHASES)for(let n of this.sequences)if(!(n.erroredOrDestroyed||!n.hooks[t]))try{n.pipelinedValue=this.ngZone.runOutsideAngular(()=>n.hooks[t](n.pipelinedValue))}catch(r){n.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let t of this.sequences)t.afterRun(),t.once&&this.sequences.delete(t);for(let t of this.deferredRegistrations)this.sequences.add(t);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(t){this.executing?this.deferredRegistrations.add(t):(this.sequences.add(t),this.scheduler.notify(6))}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}static{this.\u0275prov=ge({token:e,providedIn:"root",factory:()=>new e})}};function Xd(e,t,n,r){let i=tt(),o=ra();if(Kr(i,o,t)){let l=hn(),h=Om();bO(h,i,e,t,n,r)}return Xd}function LP(e,t,n,r){return Kr(e,ra(),n)?t+_c(n)+r:Fr}function FP(e,t,n,r,i,o){let l=TN(),h=MP(e,l,n,i);return Tm(2),h?t+_c(n)+r+_c(i)+o:Fr}function od(e,t){return e<<17|t<<2}function Yo(e){return e>>17&32767}function BP(e){return(e&2)==2}function VP(e,t){return e&131071|t<<17}function sm(e){return e|2}function ta(e){return(e&131068)>>2}function ag(e,t){return e&-131069|t<<2}function UP(e){return(e&1)===1}function am(e){return e|1}function jP(e,t,n,r,i,o){let l=o?t.classBindings:t.styleBindings,h=Yo(l),g=ta(l);e[r]=n;let m=!1,C;if(Array.isArray(n)){let E=n;C=E[1],(C===null||Nc(E,C)>0)&&(m=!0)}else C=n;if(i)if(g!==0){let x=Yo(e[h+1]);e[r+1]=od(x,h),x!==0&&(e[x+1]=ag(e[x+1],r)),e[h+1]=VP(e[h+1],r)}else e[r+1]=od(h,0),h!==0&&(e[h+1]=ag(e[h+1],r)),h=r;else e[r+1]=od(g,0),h===0?h=r:e[g+1]=ag(e[g+1],r),g=r;m&&(e[r+1]=sm(e[r+1])),Xv(e,C,r,!0),Xv(e,C,r,!1),HP(t,C,e,r,o),l=od(h,g),o?t.classBindings=l:t.styleBindings=l}function HP(e,t,n,r,i){let o=i?e.residualClasses:e.residualStyles;o!=null&&typeof t=="string"&&Nc(o,t)>=0&&(n[r+1]=am(n[r+1]))}function Xv(e,t,n,r){let i=e[n+1],o=t===null,l=r?Yo(i):ta(i),h=!1;for(;l!==0&&(h===!1||o);){let g=e[l],m=e[l+1];zP(g,t)&&(h=!0,e[l+1]=r?am(m):sm(m)),l=r?Yo(m):ta(m)}h&&(e[n+1]=r?sm(i):am(i))}function zP(e,t){return e===null||t==null||(Array.isArray(e)?e[1]:e)===t?!0:Array.isArray(e)&&typeof t=="string"?Nc(e,t)>=0:!1}var Or={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function WP(e){return e.substring(Or.key,Or.keyEnd)}function GP(e){return $P(e),pI(e,gI(e,0,Or.textEnd))}function pI(e,t){let n=Or.textEnd;return n===t?-1:(t=Or.keyEnd=qP(e,Or.key=t,n),gI(e,t,n))}function $P(e){Or.key=0,Or.keyEnd=0,Or.value=0,Or.valueEnd=0,Or.textEnd=e.length}function gI(e,t,n){for(;t<n&&e.charCodeAt(t)<=32;)t++;return t}function qP(e,t,n){for(;t<n&&e.charCodeAt(t)>32;)t++;return t}function Ni(e,t,n){let r=tt(),i=ra();if(Kr(r,i,t)){let o=hn(),l=Om();WE(o,l,r,e,t,r[zt],n,!1)}return Ni}function cm(e,t,n,r,i){let o=t.inputs,l=i?"class":"style";Xm(e,n,o[l],l,r)}function Qd(e,t,n){return yI(e,t,n,!1),Qd}function Kd(e,t){return yI(e,t,null,!0),Kd}function mI(e){ZP(tk,YP,e,!0)}function YP(e,t){for(let n=GP(t);n>=0;n=pI(t,n))Cm(e,WP(t),!0)}function yI(e,t,n,r){let i=tt(),o=hn(),l=Tm(2);if(o.firstUpdatePass&&wI(o,e,l,r),t!==Fr&&Kr(i,l,t)){let h=o.data[Ai()];vI(o,h,i,i[zt],e,i[l+1]=rk(t,n),r,l)}}function ZP(e,t,n,r){let i=hn(),o=Tm(2);i.firstUpdatePass&&wI(i,null,o,r);let l=tt();if(n!==Fr&&Kr(l,o,n)){let h=i.data[Ai()];if(CI(h,r)&&!_I(i,o)){let g=r?h.classesWithoutHost:h.stylesWithoutHost;g!==null&&(n=hg(g,n||"")),cm(i,h,l,n,r)}else nk(i,h,l,l[zt],l[o+1],l[o+1]=ek(e,t,n),r,o)}}function _I(e,t){return t>=e.expandoStartIndex}function wI(e,t,n,r){let i=e.data;if(i[n+1]===null){let o=i[Ai()],l=_I(e,n);CI(o,r)&&t===null&&!l&&(t=!1),t=XP(i,o,t,r),jP(i,o,t,n,l,r)}}function XP(e,t,n,r){let i=PN(e),o=r?t.residualClasses:t.residualStyles;if(i===null)(r?t.classBindings:t.styleBindings)===0&&(n=cg(null,e,t,n,r),n=Mc(n,t.attrs,r),o=null);else{let l=t.directiveStylingLast;if(l===-1||e[l]!==i)if(n=cg(i,e,t,n,r),o===null){let g=QP(e,t,r);g!==void 0&&Array.isArray(g)&&(g=cg(null,e,t,g[1],r),g=Mc(g,t.attrs,r),KP(e,t,r,g))}else o=JP(e,t,r)}return o!==void 0&&(r?t.residualClasses=o:t.residualStyles=o),n}function QP(e,t,n){let r=n?t.classBindings:t.styleBindings;if(ta(r)!==0)return e[Yo(r)]}function KP(e,t,n,r){let i=n?t.classBindings:t.styleBindings;e[Yo(i)]=r}function JP(e,t,n){let r,i=t.directiveEnd;for(let o=1+t.directiveStylingLast;o<i;o++){let l=e[o].hostAttrs;r=Mc(r,l,n)}return Mc(r,t.attrs,n)}function cg(e,t,n,r,i){let o=null,l=n.directiveEnd,h=n.directiveStylingLast;for(h===-1?h=n.directiveStart:h++;h<l&&(o=t[h],r=Mc(r,o.hostAttrs,i),o!==e);)h++;return e!==null&&(n.directiveStylingLast=h),r}function Mc(e,t,n){let r=n?1:2,i=-1;if(t!==null)for(let o=0;o<t.length;o++){let l=t[o];typeof l=="number"?i=l:i===r&&(Array.isArray(e)||(e=e===void 0?[]:["",e]),Cm(e,l,n?!0:t[++o]))}return e===void 0?null:e}function ek(e,t,n){if(n==null||n==="")return Un;let r=[],i=Di(n);if(Array.isArray(i))for(let o=0;o<i.length;o++)e(r,i[o],!0);else if(typeof i=="object")for(let o in i)i.hasOwnProperty(o)&&e(r,o,i[o]);else typeof i=="string"&&t(r,i);return r}function tk(e,t,n){let r=String(t);r!==""&&!r.includes(" ")&&Cm(e,r,n)}function nk(e,t,n,r,i,o,l,h){i===Fr&&(i=Un);let g=0,m=0,C=0<i.length?i[0]:null,E=0<o.length?o[0]:null;for(;C!==null||E!==null;){let x=g<i.length?i[g+1]:void 0,D=m<o.length?o[m+1]:void 0,N=null,U;C===E?(g+=2,m+=2,x!==D&&(N=E,U=D)):E===null||C!==null&&C<E?(g+=2,N=C):(m+=2,N=E,U=D),N!==null&&vI(e,t,n,r,N,U,l,h),C=g<i.length?i[g]:null,E=m<o.length?o[m]:null}}function vI(e,t,n,r,i,o,l,h){if(!(t.type&3))return;let g=e.data,m=g[h+1],C=UP(m)?Qv(g,t,n,i,ta(m),l):void 0;if(!Md(C)){Md(o)||BP(m)&&(o=Qv(g,null,n,i,h,l));let E=RC(Ai(),n);tO(r,l,E,i,o)}}function Qv(e,t,n,r,i,o){let l=t===null,h;for(;i>0;){let g=e[i],m=Array.isArray(g),C=m?g[1]:g,E=C===null,x=n[i+1];x===Fr&&(x=E?Un:void 0);let D=E?Kp(x,r):C===r?x:void 0;if(m&&!Md(D)&&(D=Kp(g,r)),Md(D)&&(h=D,l))return h;let N=e[i+1];i=l?Yo(N):ta(N)}if(t!==null){let g=o?t.residualClasses:t.residualStyles;g!=null&&(h=Kp(g,r))}return h}function Md(e){return e!==void 0}function rk(e,t){return e==null||e===""||(typeof t=="string"?e=e+t:typeof e=="object"&&(e=jn(Di(e)))),e}function CI(e,t){return(e.flags&(t?8:16))!==0}var lm=class{destroy(t){}updateValue(t,n){}swap(t,n){let r=Math.min(t,n),i=Math.max(t,n),o=this.detach(i);if(i-r>1){let l=this.detach(r);this.attach(r,o),this.attach(i,l)}else this.attach(r,o)}move(t,n){this.attach(n,this.detach(t))}};function lg(e,t,n,r,i){return e===n&&Object.is(t,r)?1:Object.is(i(e,t),i(n,r))?-1:0}function ik(e,t,n){let r,i,o=0,l=e.length-1,h=void 0;if(Array.isArray(t)){let g=t.length-1;for(;o<=l&&o<=g;){let m=e.at(o),C=t[o],E=lg(o,m,o,C,n);if(E!==0){E<0&&e.updateValue(o,C),o++;continue}let x=e.at(l),D=t[g],N=lg(l,x,g,D,n);if(N!==0){N<0&&e.updateValue(l,D),l--,g--;continue}let U=n(o,m),$=n(l,x),W=n(o,C);if(Object.is(W,$)){let ie=n(g,D);Object.is(ie,U)?(e.swap(o,l),e.updateValue(l,D),g--,l--):e.move(l,o),e.updateValue(o,C),o++;continue}if(r??=new Nd,i??=Jv(e,o,l,n),um(e,r,o,W))e.updateValue(o,C),o++,l++;else if(i.has(W))r.set(U,e.detach(o)),l--;else{let ie=e.create(o,t[o]);e.attach(o,ie),o++,l++}}for(;o<=g;)Kv(e,r,n,o,t[o]),o++}else if(t!=null){let g=t[Symbol.iterator](),m=g.next();for(;!m.done&&o<=l;){let C=e.at(o),E=m.value,x=lg(o,C,o,E,n);if(x!==0)x<0&&e.updateValue(o,E),o++,m=g.next();else{r??=new Nd,i??=Jv(e,o,l,n);let D=n(o,E);if(um(e,r,o,D))e.updateValue(o,E),o++,l++,m=g.next();else if(!i.has(D))e.attach(o,e.create(o,E)),o++,l++,m=g.next();else{let N=n(o,C);r.set(N,e.detach(o)),l--}}}for(;!m.done;)Kv(e,r,n,e.length,m.value),m=g.next()}for(;o<=l;)e.destroy(e.detach(l--));r?.forEach(g=>{e.destroy(g)})}function um(e,t,n,r){return t!==void 0&&t.has(r)?(e.attach(n,t.get(r)),t.delete(r),!0):!1}function Kv(e,t,n,r,i){if(um(e,t,r,n(r,i)))e.updateValue(r,i);else{let o=e.create(r,i);e.attach(r,o)}}function Jv(e,t,n,r){let i=new Set;for(let o=t;o<=n;o++)i.add(r(o,e.at(o)));return i}var Nd=class{constructor(){this.kvMap=new Map,this._vMap=void 0}has(t){return this.kvMap.has(t)}delete(t){if(!this.has(t))return!1;let n=this.kvMap.get(t);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(t,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(t),!0}get(t){return this.kvMap.get(t)}set(t,n){if(this.kvMap.has(t)){let r=this.kvMap.get(t);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,n)}else this.kvMap.set(t,n)}forEach(t){for(let[n,r]of this.kvMap)if(t(r,n),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),t(r,n)}}};function pn(e,t){ua("NgControlFlow");let n=tt(),r=ra(),i=n[r]!==Fr?n[r]:-1,o=i!==-1?Rd(n,fr+i):void 0,l=0;if(Kr(n,r,e)){let h=We(null);try{if(o!==void 0&&tI(o,l),e!==-1){let g=fr+e,m=Rd(n,g),C=pm(n[Se],g),E=Ac(m,C.tView.ssrId),x=Yd(n,C,t,{dehydratedView:E});Zd(m,x,l,xc(C,E))}}finally{We(h)}}else if(o!==void 0){let h=eI(o,l);h!==void 0&&(h[vn]=t)}}var dm=class{constructor(t,n,r){this.lContainer=t,this.$implicit=n,this.$index=r}get $count(){return this.lContainer.length-Cn}};function Wn(e,t){return t}var fm=class{constructor(t,n,r){this.hasEmptyBlock=t,this.trackByFn=n,this.liveCollection=r}};function Gn(e,t,n,r,i,o,l,h,g,m,C,E,x){ua("NgControlFlow");let D=tt(),N=hn(),U=g!==void 0,$=tt(),W=h?l.bind($[kr][vn]):l,ie=new fm(U,W);$[fr+e]=ie,om(D,N,e+1,t,n,r,i,Qs(N.consts,o)),U&&om(D,N,e+2,g,m,C,E,Qs(N.consts,x))}var hm=class extends lm{constructor(t,n,r){super(),this.lContainer=t,this.hostLView=n,this.templateTNode=r,this.operationsCounter=void 0,this.needsIndexUpdate=!1}get length(){return this.lContainer.length-Cn}at(t){return this.getLView(t)[vn].$implicit}attach(t,n){let r=n[Ec];this.needsIndexUpdate||=t!==this.length,Zd(this.lContainer,n,t,xc(this.templateTNode,r))}detach(t){return this.needsIndexUpdate||=t!==this.length-1,ok(this.lContainer,t)}create(t,n){let r=Ac(this.lContainer,this.templateTNode.tView.ssrId),i=Yd(this.hostLView,this.templateTNode,new dm(this.lContainer,n,t),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(t){zd(t[Se],t),this.operationsCounter?.recordDestroy()}updateValue(t,n){this.getLView(t)[vn].$implicit=n}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let t=0;t<this.length;t++)this.getLView(t)[vn].$index=t}getLView(t){return sk(this.lContainer,t)}};function $n(e){let t=We(null),n=Ai();try{let r=tt(),i=r[Se],o=r[n],l=n+1,h=Rd(r,l);if(o.liveCollection===void 0){let m=pm(i,l);o.liveCollection=new hm(h,r,m)}else o.liveCollection.reset();let g=o.liveCollection;if(ik(g,e,o.trackByFn),g.updateIndexes(),o.hasEmptyBlock){let m=ra(),C=g.length===0;if(Kr(r,m,C)){let E=n+2,x=Rd(r,E);if(C){let D=pm(i,E),N=Ac(x,D.tView.ssrId),U=Yd(r,D,void 0,{dehydratedView:N});Zd(x,U,0,xc(D,N))}else tI(x,0)}}}finally{We(t)}}function Rd(e,t){return e[t]}function ok(e,t){return bc(e,t)}function sk(e,t){return eI(e,t)}function pm(e,t){return Am(e,t)}function ak(e,t,n,r,i,o){let l=t.consts,h=Qs(l,i),g=$d(t,e,2,r,h);return GE(t,n,g,Qs(l,o)),g.attrs!==null&&Zg(g,g.attrs,!1),g.mergedAttrs!==null&&Zg(g,g.mergedAttrs,!0),t.queries!==null&&t.queries.elementStart(t,g),g}function L(e,t,n,r){let i=tt(),o=hn(),l=fr+e,h=i[zt],g=o.firstCreatePass?ak(l,o,i,t,n,r):o.data[l],m=ck(o,i,g,h,t,e);i[l]=m;let C=Sm(g);return Rc(g,!0),kE(h,m,g),!NP(g)&&Pm()&&qm(o,i,m,g),vN()===0&&$o(m,i),CN(),C&&(jE(o,i,g),UE(o,g,i)),r!==null&&HE(i,g),L}function P(){let e=zn();VC()?AN():(e=e.parent,Rc(e,!1));let t=e;bN(t)&&xN(),EN();let n=hn();return n.firstCreatePass&&(Lm(n,e),AC(e)&&n.queries.elementEnd(e)),t.classesWithoutHost!=null&&jN(t)&&cm(n,t,tt(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&HN(t)&&cm(n,t,tt(),t.stylesWithoutHost,!1),P}function we(e,t,n,r){return L(e,t,n,r),P(),we}var ck=(e,t,n,r,i,o)=>(km(!0),DE(r,i,FN()));function Ft(){return tt()}var Od="en-US";var lk=Od;function uk(e){typeof e=="string"&&(lk=e.toLowerCase().replace(/_/g,"-"))}var dk=(e,t,n)=>{};function ee(e,t,n,r){let i=tt(),o=hn(),l=zn();return EI(o,i,i[zt],l,e,t,r),ee}function fk(e,t,n,r){let i=e.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let l=i[o];if(l===n&&i[o+1]===r){let h=t[yd],g=i[o+2];return h.length>g?h[g]:null}typeof l=="string"&&(o+=2)}return null}function EI(e,t,n,r,i,o,l){let h=Sm(r),m=e.firstCreatePass&&QE(e),C=t[vn],E=XE(t),x=!0;if(r.type&3||l){let U=hr(r,t),$=l?l(U):U,W=E.length,ie=l?he=>l(Qr(he[r.index])):r.index,ze=null;if(!l&&h&&(ze=fk(e,t,i,r.index)),ze!==null){let he=ze.__ngLastListenerFn__||ze;he.__ngNextListenerFn__=o,ze.__ngLastListenerFn__=o,x=!1}else{o=tC(r,t,C,o),dk(U,i,o);let he=n.listen($,i,o);E.push(o,he),m&&m.push(i,ie,W,W+1)}}else o=tC(r,t,C,o);let D=r.outputs,N;if(x&&D!==null&&(N=D[i])){let U=N.length;if(U)for(let $=0;$<U;$+=2){let W=N[$],ie=N[$+1],H=t[W][ie].subscribe(o),ae=E.length;E.push(o,H),m&&m.push(i,r.index,ae,-(ae+1))}}}function eC(e,t,n,r){let i=We(null);try{return Yr(6,t,n),n(r)!==!1}catch(o){return KE(e,o),!1}finally{Yr(7,t,n),We(i)}}function tC(e,t,n,r){return function i(o){if(o===Function)return r;let l=e.componentOffset>-1?lo(e.index,t):t;Km(l,5);let h=eC(t,n,r,o),g=i.__ngNextListenerFn__;for(;g;)h=eC(t,n,g,o)&&h,g=g.__ngNextListenerFn__;return h}}function gt(e=1){return LN(e)}function Jd(e,t,n){_P(e,t,n)}function kc(e){let t=tt(),n=hn(),r=jC();Mm(r+1);let i=t0(n,r);if(e.dirty&&mN(t)===((i.metadata.flags&2)===2)){if(i.matches===null)e.reset([]);else{let o=CP(t,r);e.reset(o,cR),e.notifyOnChanges()}return!0}return!1}function Lc(){return mP(tt(),jC())}function ef(e){let t=DN();return gN(t,fr+e)}function j(e,t=""){let n=tt(),r=hn(),i=e+fr,o=r.firstCreatePass?$d(r,i,1,t,null):r.data[i],l=hk(r,n,o,t,e);n[i]=l,Pm()&&qm(r,n,l,o),Rc(o,!1)}var hk=(e,t,n,r,i)=>(km(!0),BR(t[zt],r));function ho(e){return on("",e,""),ho}function on(e,t,n){let r=tt(),i=LP(r,e,t,n);return i!==Fr&&JE(r,Ai(),i),on}function r0(e,t,n,r,i){let o=tt(),l=FP(o,e,t,n,r,i);return l!==Fr&&JE(o,Ai(),l),r0}function Bt(e,t,n){hI(t)&&(t=t());let r=tt(),i=ra();if(Kr(r,i,t)){let o=hn(),l=Om();WE(o,l,r,e,t,r[zt],n,!1)}return Bt}function Wt(e,t){let n=hI(e);return n&&e.set(t),n}function Vt(e,t){let n=tt(),r=hn(),i=zn();return EI(r,n,n[zt],i,e,t),Vt}function pk(e,t,n){let r=hn();if(r.firstCreatePass){let i=so(e);gm(n,r.data,r.blueprint,i,!0),gm(t,r.data,r.blueprint,i,!1)}}function gm(e,t,n,r,i){if(e=Mn(e),Array.isArray(e))for(let o=0;o<e.length;o++)gm(e[o],t,n,r,i);else{let o=hn(),l=tt(),h=zn(),g=Ys(e)?e:Mn(e.provide),m=bC(e),C=h.providerIndexes&1048575,E=h.directiveStart,x=h.providerIndexes>>20;if(Ys(e)||!e.multi){let D=new Wo(m,i,ne),N=dg(g,t,i?C:C+x,E);N===-1?(Sg(Ed(h,l),o,g),ug(o,e,t.length),t.push(g),h.directiveStart++,h.directiveEnd++,i&&(h.providerIndexes+=1048576),n.push(D),l.push(D)):(n[N]=D,l[N]=D)}else{let D=dg(g,t,C+x,E),N=dg(g,t,C,C+x),U=D>=0&&n[D],$=N>=0&&n[N];if(i&&!$||!i&&!U){Sg(Ed(h,l),o,g);let W=yk(i?mk:gk,n.length,i,r,m);!i&&$&&(n[N].providerFactory=W),ug(o,e,t.length,0),t.push(g),h.directiveStart++,h.directiveEnd++,i&&(h.providerIndexes+=1048576),n.push(W),l.push(W)}else{let W=II(n[i?N:D],m,!i&&r);ug(o,e,D>-1?D:N,W)}!i&&r&&$&&n[N].componentProviders++}}}function ug(e,t,n,r){let i=Ys(t),o=tN(t);if(i||o){let g=(o?Mn(t.useClass):t).prototype.ngOnDestroy;if(g){let m=e.destroyHooks||(e.destroyHooks=[]);if(!i&&t.multi){let C=m.indexOf(n);C===-1?m.push(n,[r,g]):m[C+1].push(r,g)}else m.push(n,g)}}}function II(e,t,n){return n&&e.componentProviders++,e.multi.push(t)-1}function dg(e,t,n,r){for(let i=n;i<r;i++)if(t[i]===e)return i;return-1}function gk(e,t,n,r){return mm(this.multi,[])}function mk(e,t,n,r){let i=this.multi,o;if(this.providerFactory){let l=this.providerFactory.componentProviders,h=Go(n,n[Se],this.providerFactory.index,r);o=h.slice(0,l),mm(i,o);for(let g=l;g<h.length;g++)o.push(h[g])}else o=[],mm(i,o);return o}function mm(e,t){for(let n=0;n<e.length;n++){let r=e[n];t.push(r())}return t}function yk(e,t,n,r,i){let o=new Wo(e,n,ne);return o.multi=[],o.index=t,o.componentProviders=0,II(o,i,r&&!n),o}function Fc(e,t=[]){return n=>{n.providersResolver=(r,i)=>pk(r,i?i(e):e,t)}}var _k=(()=>{class e{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=CC(!1,n.type),i=r.length>0?n0([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=ge({token:e,providedIn:"environment",factory:()=>new e(Le(dr))})}}return e})();function de(e){ua("NgStandalone"),e.getStandaloneInjector=t=>t.get(_k).getOrCreateStandaloneInjector(e)}var tf=(()=>{class e{log(n){console.log(n)}warn(n){console.warn(n)}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=ge({token:e,factory:e.\u0275fac,providedIn:"platform"})}}return e})();var bI=new Ie("");function Xo(e){return!!e&&typeof e.then=="function"}function xI(e){return!!e&&typeof e.subscribe=="function"}var SI=new Ie(""),AI=(()=>{class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r}),this.appInits=J(SI,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let o=i();if(Xo(o))n.push(o);else if(xI(o)){let l=new Promise((h,g)=>{o.subscribe({complete:h,error:g})});n.push(l)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=ge({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),i0=new Ie("");function wk(){jw(()=>{throw new pe(600,!1)})}function vk(e){return e.isBoundToModule}var Ck=10;function Ek(e,t,n){try{let r=n();return Xo(r)?r.catch(i=>{throw t.runOutsideAngular(()=>e.handleError(i)),i}):r}catch(r){throw t.runOutsideAngular(()=>e.handleError(r)),r}}var Qo=(()=>{class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=J(sR),this.afterRenderManager=J(kP),this.zonelessEnabled=J(e0),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new dn,this.afterTick=new dn,this.componentTypes=[],this.components=[],this.isStable=J(oa).hasPendingTasks.pipe(Oe(n=>!n)),this._injector=J(dr)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}get injector(){return this._injector}bootstrap(n,r){let i=n instanceof Ad;if(!this._injector.get(AI).done){let x=!i&&yC(n),D=!1;throw new pe(405,D)}let l;i?l=n:l=this._injector.get(Js).resolveComponentFactory(n),this.componentTypes.push(l.componentType);let h=vk(l)?void 0:this._injector.get(co),g=r||l.selector,m=l.create(ao.NULL,[],g,h),C=m.location.nativeElement,E=m.injector.get(bI,null);return E?.registerApplication(C),m.onDestroy(()=>{this.detachView(m.hostView),dd(this.components,m),E?.unregisterApplication(C)}),this._loadComponent(m),m}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new pe(101,!1);let n=We(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,We(n),this.afterTick.next()}}synchronize(){let n=null;this._injector.destroyed||(n=this._injector.get(ea,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<Ck;)this.synchronizeOnce(n)}synchronizeOnce(n){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:o}of this._views)Ik(i,o,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else n?.begin?.(),n?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>Ud(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;dd(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);let r=this._injector.get(i0,[]);[...this._bootstrapListeners,...r].forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>dd(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new pe(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=ge({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function dd(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}function Ik(e,t,n,r){if(!n&&!Ud(e))return;iI(e,t,n&&!r?0:1)}var ym=class{constructor(t,n){this.ngModuleFactory=t,this.componentFactories=n}},o0=(()=>{class e{compileModuleSync(n){return new im(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=_C(n),o=AE(i.declarations).reduce((l,h)=>{let g=Vo(h);return g&&l.push(new Dc(g)),l},[]);return new ym(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=ge({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var bk=(()=>{class e{constructor(){this.zone=J(Qt),this.changeDetectionScheduler=J(Ks),this.applicationRef=J(Qo)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=ge({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function xk({ngZoneFactory:e,ignoreChangesOutsideZone:t,scheduleInRootZone:n}){return e??=()=>new Qt(Ue(K({},Sk()),{scheduleInRootZone:n})),[{provide:Qt,useFactory:e},{provide:qs,multi:!0,useFactory:()=>{let r=J(bk,{optional:!0});return()=>r.initialize()}},{provide:qs,multi:!0,useFactory:()=>{let r=J(Ak);return()=>{r.initialize()}}},t===!0?{provide:cI,useValue:!0}:[],{provide:lI,useValue:n??oE}]}function Sk(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}var Ak=(()=>{class e{constructor(){this.subscription=new Ot,this.initialized=!1,this.zone=J(Qt),this.pendingTasks=J(oa)}initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Qt.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Qt.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=ge({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var Dk=(()=>{class e{constructor(){this.appRef=J(Qo),this.taskService=J(oa),this.ngZone=J(Qt),this.zonelessEnabled=J(e0),this.disableScheduling=J(cI,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new Ot,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(bd):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(J(lI,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Ng||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?Pv:aE;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(bd+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(n),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,Pv(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=ge({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function Tk(){return typeof $localize<"u"&&$localize.locale||Od}var s0=new Ie("",{providedIn:"root",factory:()=>J(s0,ke.Optional|ke.SkipSelf)||Tk()});var DI=new Ie("");function sd(e){return!!e.platformInjector}function Mk(e){let t=sd(e)?e.r3Injector:e.moduleRef.injector,n=t.get(Qt);return n.run(()=>{sd(e)?e.r3Injector.resolveInjectorInitializers():e.moduleRef.resolveInjectorInitializers();let r=t.get(_i,null),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:o=>{r.handleError(o)}})}),sd(e)){let o=()=>t.destroy(),l=e.platformInjector.get(DI);l.add(o),t.onDestroy(()=>{i.unsubscribe(),l.delete(o)})}else e.moduleRef.onDestroy(()=>{dd(e.allPlatformModules,e.moduleRef),i.unsubscribe()});return Ek(r,n,()=>{let o=t.get(AI);return o.runInitializers(),o.donePromise.then(()=>{let l=t.get(s0,Od);if(uk(l||Od),sd(e)){let h=t.get(Qo);return e.rootComponent!==void 0&&h.bootstrap(e.rootComponent),h}else return Nk(e.moduleRef,e.allPlatformModules),e.moduleRef})})})}function Nk(e,t){let n=e.injector.get(Qo);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(r=>n.bootstrap(r));else if(e.instance.ngDoBootstrap)e.instance.ngDoBootstrap(n);else throw new pe(-403,!1);t.push(e)}var fd=null;function Rk(e=[],t){return ao.create({name:t,providers:[{provide:Fd,useValue:"platform"},{provide:DI,useValue:new Set([()=>fd=null])},...e]})}function Ok(e=[]){if(fd)return fd;let t=Rk(e);return fd=t,wk(),Pk(t),t}function Pk(e){e.get(jm,null)?.forEach(n=>n())}var Ri=(()=>{class e{static{this.__NG_ELEMENT_ID__=kk}}return e})();function kk(e){return Lk(zn(),tt(),(e&16)===16)}function Lk(e,t,n){if(Vd(e)&&!n){let r=lo(e.index,t);return new qo(r,r)}else if(e.type&175){let r=t[kr];return new qo(r,t)}return null}function TI(e){try{let{rootComponent:t,appProviders:n,platformProviders:r}=e,i=Ok(r),o=[xk({}),{provide:Ks,useExisting:Dk},...n||[]],l=new Td({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1});return Mk({r3Injector:l.injector,platformInjector:i,rootComponent:t})}catch(t){return Promise.reject(t)}}function Bc(e){return typeof e=="boolean"?e:e!=null&&e!=="false"}function Vc(e,t){ua("NgSignals");let n=Bw(e);return t?.equal&&(n[hi].equal=t.equal),n}function Oi(e){let t=We(null);try{return e()}finally{We(t)}}var RI=null;function Pi(){return RI}function OI(e){RI??=e}var nf=class{};var tr=new Ie(""),PI=(()=>{class e{historyGo(n){throw new Error("")}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=ge({token:e,factory:()=>J(Vk),providedIn:"platform"})}}return e})();var Vk=(()=>{class e extends PI{constructor(){super(),this._doc=J(tr),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Pi().getBaseHref(this._doc)}onPopState(n){let r=Pi().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=Pi().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=ge({token:e,factory:()=>new e,providedIn:"platform"})}}return e})();function kI(e,t){if(e.length==0)return t;if(t.length==0)return e;let n=0;return e.endsWith("/")&&n++,t.startsWith("/")&&n++,n==2?e+t.substring(1):n==1?e+t:e+"/"+t}function MI(e){let t=e.match(/#|\?|$/),n=t&&t.index||e.length,r=n-(e[n-1]==="/"?1:0);return e.slice(0,r)+e.slice(n)}function Ko(e){return e&&e[0]!=="?"?"?"+e:e}var of=(()=>{class e{historyGo(n){throw new Error("")}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=ge({token:e,factory:()=>J(LI),providedIn:"root"})}}return e})(),Uk=new Ie(""),LI=(()=>{class e extends of{constructor(n,r){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??J(tr).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return kI(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+Ko(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){let l=this.prepareExternalUrl(i+Ko(o));this._platformLocation.pushState(n,r,l)}replaceState(n,r,i,o){let l=this.prepareExternalUrl(i+Ko(o));this._platformLocation.replaceState(n,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static{this.\u0275fac=function(r){return new(r||e)(Le(PI),Le(Uk,8))}}static{this.\u0275prov=ge({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var Uc=(()=>{class e{constructor(n){this._subject=new Tt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=zk(MI(NI(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+Ko(r))}normalize(n){return e.stripTrailingSlash(Hk(this._basePath,NI(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Ko(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Ko(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r,complete:i})}static{this.normalizeQueryParams=Ko}static{this.joinWithSlash=kI}static{this.stripTrailingSlash=MI}static{this.\u0275fac=function(r){return new(r||e)(Le(of))}}static{this.\u0275prov=ge({token:e,factory:()=>jk(),providedIn:"root"})}}return e})();function jk(){return new Uc(Le(of))}function Hk(e,t){if(!e||!t.startsWith(e))return t;let n=t.substring(e.length);return n===""||["/",";","?","#"].includes(n[0])?n:t}function NI(e){return e.replace(/\/index.html$/,"")}function zk(e){if(new RegExp("^(https?:)?//").test(e)){let[,n]=e.split(/\/\/[^\/]+/);return n}return e}function FI(e,t){t=encodeURIComponent(t);for(let n of e.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===t)return decodeURIComponent(o)}return null}var c0=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=Ei({type:e})}static{this.\u0275inj=Ci({})}}return e})(),BI="browser",Wk="server";function l0(e){return e===Wk}var rf=class{};var f0=class extends nf{constructor(){super(...arguments),this.supportsDOMEvents=!0}},h0=class e extends f0{static makeCurrent(){OI(new e)}onAndCancel(t,n,r){return t.addEventListener(n,r),()=>{t.removeEventListener(n,r)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.remove()}createElement(t,n){return n=n||this.getDefaultDocument(),n.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return n==="window"?window:n==="document"?t:n==="body"?t.body:null}getBaseHref(t){let n=$k();return n==null?null:qk(n)}resetBaseElement(){jc=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return FI(document.cookie,t)}},jc=null;function $k(){return jc=jc||document.querySelector("base"),jc?jc.getAttribute("href"):null}function qk(e){return new URL(e,document.baseURI).pathname}var Yk=(()=>{class e{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=ge({token:e,factory:e.\u0275fac})}}return e})(),p0=new Ie(""),HI=(()=>{class e{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new pe(5101,!1);return this._eventNameToPlugin.set(n,r),r}static{this.\u0275fac=function(r){return new(r||e)(Le(p0),Le(Qt))}}static{this.\u0275prov=ge({token:e,factory:e.\u0275fac})}}return e})(),sf=class{constructor(t){this._doc=t}},u0="ng-app-id",zI=(()=>{class e{constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=l0(o),this.resetHostNodes()}addStyles(n){for(let r of n)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(n){for(let r of n)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let n=this.styleNodesInDOM;n&&(n.forEach(r=>r.remove()),n.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(let r of this.getAllStyles())this.addStyleToHost(n,r)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(let r of this.hostNodes)this.addStyleToHost(r,n)}onStyleRemoved(n){let r=this.styleRef;r.get(n)?.elements?.forEach(i=>i.remove()),r.delete(n)}collectServerRenderedStyles(){let n=this.doc.head?.querySelectorAll(`style[${u0}="${this.appId}"]`);if(n?.length){let r=new Map;return n.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(n,r){let i=this.styleRef;if(i.has(n)){let o=i.get(n);return o.usage+=r,o.usage}return i.set(n,{usage:r,elements:[]}),r}getStyleElement(n,r){let i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===n)return i.delete(r),o.removeAttribute(u0),o;{let l=this.doc.createElement("style");return this.nonce&&l.setAttribute("nonce",this.nonce),l.textContent=r,this.platformIsServer&&l.setAttribute(u0,this.appId),n.appendChild(l),l}}addStyleToHost(n,r){let i=this.getStyleElement(n,r),o=this.styleRef,l=o.get(r)?.elements;l?l.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){let n=this.hostNodes;n.clear(),n.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||e)(Le(tr),Le(Um),Le(Hm,8),Le(aa))}}static{this.\u0275prov=ge({token:e,factory:e.\u0275fac})}}return e})(),d0={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},m0=/%COMP%/g,WI="%COMP%",Zk=`_nghost-${WI}`,Xk=`_ngcontent-${WI}`,Qk=!0,Kk=new Ie("",{providedIn:"root",factory:()=>Qk});function Jk(e){return Xk.replace(m0,e)}function e3(e){return Zk.replace(m0,e)}function GI(e,t){return t.map(n=>n.replace(m0,e))}var VI=(()=>{class e{constructor(n,r,i,o,l,h,g,m=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=l,this.platformId=h,this.ngZone=g,this.nonce=m,this.rendererByCompId=new Map,this.platformIsServer=l0(h),this.defaultRenderer=new Hc(n,l,g,this.platformIsServer)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Xr.ShadowDom&&(r=Ue(K({},r),{encapsulation:Xr.Emulated}));let i=this.getOrCreateRenderer(n,r);return i instanceof af?i.applyToHost(n):i instanceof zc&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let l=this.doc,h=this.ngZone,g=this.eventManager,m=this.sharedStylesHost,C=this.removeStylesOnCompDestroy,E=this.platformIsServer;switch(r.encapsulation){case Xr.Emulated:o=new af(g,m,r,this.appId,C,l,h,E);break;case Xr.ShadowDom:return new g0(g,m,n,r,l,h,this.nonce,E);default:o=new zc(g,m,r,C,l,h,E);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||e)(Le(HI),Le(zI),Le(Um),Le(Kk),Le(tr),Le(aa),Le(Qt),Le(Hm))}}static{this.\u0275prov=ge({token:e,factory:e.\u0275fac})}}return e})(),Hc=class{constructor(t,n,r,i){this.eventManager=t,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(t,n){return n?this.doc.createElementNS(d0[n]||n,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,n){(UI(t)?t.content:t).appendChild(n)}insertBefore(t,n,r){t&&(UI(t)?t.content:t).insertBefore(n,r)}removeChild(t,n){n.remove()}selectRootElement(t,n){let r=typeof t=="string"?this.doc.querySelector(t):t;if(!r)throw new pe(-5104,!1);return n||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,r,i){if(i){n=i+":"+n;let o=d0[i];o?t.setAttributeNS(o,n,r):t.setAttribute(n,r)}else t.setAttribute(n,r)}removeAttribute(t,n,r){if(r){let i=d0[r];i?t.removeAttributeNS(i,n):t.removeAttribute(`${r}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,r,i){i&(vi.DashCase|vi.Important)?t.style.setProperty(n,r,i&vi.Important?"important":""):t.style[n]=r}removeStyle(t,n,r){r&vi.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,r){t!=null&&(t[n]=r)}setValue(t,n){t.nodeValue=n}listen(t,n,r){if(typeof t=="string"&&(t=Pi().getGlobalEventTarget(this.doc,t),!t))throw new Error(`Unsupported event target ${t} for event ${n}`);return this.eventManager.addEventListener(t,n,this.decoratePreventDefault(r))}decoratePreventDefault(t){return n=>{if(n==="__ngUnwrap__")return t;(this.platformIsServer?this.ngZone.runGuarded(()=>t(n)):t(n))===!1&&n.preventDefault()}}};function UI(e){return e.tagName==="TEMPLATE"&&e.content!==void 0}var g0=class extends Hc{constructor(t,n,r,i,o,l,h,g){super(t,o,l,g),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let m=GI(i.id,i.styles);for(let C of m){let E=document.createElement("style");h&&E.setAttribute("nonce",h),E.textContent=C,this.shadowRoot.appendChild(E)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,r){return super.insertBefore(this.nodeOrShadowRoot(t),n,r)}removeChild(t,n){return super.removeChild(null,n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},zc=class extends Hc{constructor(t,n,r,i,o,l,h,g){super(t,o,l,h),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=g?GI(g,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},af=class extends zc{constructor(t,n,r,i,o,l,h,g){let m=i+"-"+r.id;super(t,n,r,o,l,h,g,m),this.contentAttr=Jk(m),this.hostAttr=e3(m)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,n){let r=super.createElement(t,n);return super.setAttribute(r,this.contentAttr,""),r}},t3=(()=>{class e extends sf{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||e)(Le(tr))}}static{this.\u0275prov=ge({token:e,factory:e.\u0275fac})}}return e})(),jI=["alt","control","meta","shift"],n3={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},r3={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey},i3=(()=>{class e extends sf{constructor(n){super(n)}supports(n){return e.parseEventName(n)!=null}addEventListener(n,r,i){let o=e.parseEventName(r),l=e.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Pi().onAndCancel(n,o.domEventName,l))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=e._normalizeKey(r.pop()),l="",h=r.indexOf("code");if(h>-1&&(r.splice(h,1),l="code."),jI.forEach(m=>{let C=r.indexOf(m);C>-1&&(r.splice(C,1),l+=m+".")}),l+=o,r.length!=0||o.length===0)return null;let g={};return g.domEventName=i,g.fullKey=l,g}static matchEventFullKeyCode(n,r){let i=n3[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),jI.forEach(l=>{if(l!==i){let h=r3[l];h(n)&&(o+=l+".")}}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{e.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return n==="esc"?"escape":n}static{this.\u0275fac=function(r){return new(r||e)(Le(tr))}}static{this.\u0275prov=ge({token:e,factory:e.\u0275fac})}}return e})();function $I(e,t){return TI(K({rootComponent:e},o3(t)))}function o3(e){return{appProviders:[...u3,...e?.providers??[]],platformProviders:l3}}function s3(){h0.makeCurrent()}function a3(){return new _i}function c3(){return pE(document),document}var l3=[{provide:aa,useValue:BI},{provide:jm,useValue:s3,multi:!0},{provide:tr,useFactory:c3,deps:[]}];var u3=[{provide:Fd,useValue:"root"},{provide:_i,useFactory:a3,deps:[]},{provide:p0,useClass:t3,multi:!0,deps:[tr,Qt,aa]},{provide:p0,useClass:i3,multi:!0,deps:[tr]},VI,zI,HI,{provide:ea,useExisting:VI},{provide:rf,useClass:Yk,deps:[]},[]];var qI=(()=>{class e{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static{this.\u0275fac=function(r){return new(r||e)(Le(tr))}}static{this.\u0275prov=ge({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var y0=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=ge({token:e,factory:function(r){let i=null;return r?i=new(r||e):i=Le(d3),i},providedIn:"root"})}}return e})(),d3=(()=>{class e extends y0{constructor(n){super(),this._doc=n}sanitize(n,r){if(r==null)return null;switch(n){case uo.NONE:return r;case uo.HTML:return ca(r,"HTML")?Di(r):SE(this._doc,String(r)).toString();case uo.STYLE:return ca(r,"Style")?Di(r):r;case uo.SCRIPT:if(ca(r,"Script"))return Di(r);throw new pe(5200,!1);case uo.URL:return ca(r,"URL")?Di(r):Wm(String(r));case uo.RESOURCE_URL:if(ca(r,"ResourceURL"))return Di(r);throw new pe(5201,!1);default:throw new pe(5202,!1)}}bypassSecurityTrustHtml(n){return mE(n)}bypassSecurityTrustStyle(n){return yE(n)}bypassSecurityTrustScript(n){return _E(n)}bypassSecurityTrustUrl(n){return wE(n)}bypassSecurityTrustResourceUrl(n){return vE(n)}static{this.\u0275fac=function(r){return new(r||e)(Le(tr))}}static{this.\u0275prov=ge({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var Me="primary",sl=Symbol("RouteTitle"),E0=class{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n[0]:n}return null}getAll(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function ma(e){return new E0(e)}function f3(e,t,n){let r=n.path.split("/");if(r.length>e.length||n.pathMatch==="full"&&(t.hasChildren()||r.length<e.length))return null;let i={};for(let o=0;o<r.length;o++){let l=r[o],h=e[o];if(l[0]===":")i[l.substring(1)]=h;else if(l!==h.path)return null}return{consumed:e.slice(0,r.length),posParams:i}}function h3(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!ei(e[n],t[n]))return!1;return!0}function ei(e,t){let n=e?I0(e):void 0,r=t?I0(t):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!nb(e[i],t[i]))return!1;return!0}function I0(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}function nb(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;let n=[...e].sort(),r=[...t].sort();return n.every((i,o)=>r[o]===i)}else return e===t}function rb(e){return e.length>0?e[e.length-1]:null}function po(e){return zp(e)?e:Xo(e)?at(Promise.resolve(e)):xe(e)}var p3={exact:ob,subset:sb},ib={exact:g3,subset:m3,ignored:()=>!0};function ZI(e,t,n){return p3[n.paths](e.root,t.root,n.matrixParams)&&ib[n.queryParams](e.queryParams,t.queryParams)&&!(n.fragment==="exact"&&e.fragment!==t.fragment)}function g3(e,t){return ei(e,t)}function ob(e,t,n){if(!es(e.segments,t.segments)||!uf(e.segments,t.segments,n)||e.numberOfChildren!==t.numberOfChildren)return!1;for(let r in t.children)if(!e.children[r]||!ob(e.children[r],t.children[r],n))return!1;return!0}function m3(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>nb(e[n],t[n]))}function sb(e,t,n){return ab(e,t,t.segments,n)}function ab(e,t,n,r){if(e.segments.length>n.length){let i=e.segments.slice(0,n.length);return!(!es(i,n)||t.hasChildren()||!uf(i,n,r))}else if(e.segments.length===n.length){if(!es(e.segments,n)||!uf(e.segments,n,r))return!1;for(let i in t.children)if(!e.children[i]||!sb(e.children[i],t.children[i],r))return!1;return!0}else{let i=n.slice(0,e.segments.length),o=n.slice(e.segments.length);return!es(e.segments,i)||!uf(e.segments,i,r)||!e.children[Me]?!1:ab(e.children[Me],t,o,r)}}function uf(e,t,n){return t.every((r,i)=>ib[n](e[i].parameters,r.parameters))}var Li=class{constructor(t=new dt([],{}),n={},r=null){this.root=t,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=ma(this.queryParams),this._queryParamMap}toString(){return w3.serialize(this)}},dt=class{constructor(t,n){this.segments=t,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return df(this)}},Jo=class{constructor(t,n){this.path=t,this.parameters=n}get parameterMap(){return this._parameterMap??=ma(this.parameters),this._parameterMap}toString(){return lb(this)}};function y3(e,t){return es(e,t)&&e.every((n,r)=>ei(n.parameters,t[r].parameters))}function es(e,t){return e.length!==t.length?!1:e.every((n,r)=>n.path===t[r].path)}function _3(e,t){let n=[];return Object.entries(e.children).forEach(([r,i])=>{r===Me&&(n=n.concat(t(i,r)))}),Object.entries(e.children).forEach(([r,i])=>{r!==Me&&(n=n.concat(t(i,r)))}),n}var Z0=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=ge({token:e,factory:()=>new Xc,providedIn:"root"})}}return e})(),Xc=class{parse(t){let n=new x0(t);return new Li(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(t){let n=`/${Wc(t.root,!0)}`,r=E3(t.queryParams),i=typeof t.fragment=="string"?`#${v3(t.fragment)}`:"";return`${n}${r}${i}`}},w3=new Xc;function df(e){return e.segments.map(t=>lb(t)).join("/")}function Wc(e,t){if(!e.hasChildren())return df(e);if(t){let n=e.children[Me]?Wc(e.children[Me],!1):"",r=[];return Object.entries(e.children).forEach(([i,o])=>{i!==Me&&r.push(`${i}:${Wc(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=_3(e,(r,i)=>i===Me?[Wc(e.children[Me],!1)]:[`${i}:${Wc(r,!1)}`]);return Object.keys(e.children).length===1&&e.children[Me]!=null?`${df(e)}/${n[0]}`:`${df(e)}/(${n.join("//")})`}}function cb(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function cf(e){return cb(e).replace(/%3B/gi,";")}function v3(e){return encodeURI(e)}function b0(e){return cb(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ff(e){return decodeURIComponent(e)}function XI(e){return ff(e.replace(/\+/g,"%20"))}function lb(e){return`${b0(e.path)}${C3(e.parameters)}`}function C3(e){return Object.entries(e).map(([t,n])=>`;${b0(t)}=${b0(n)}`).join("")}function E3(e){let t=Object.entries(e).map(([n,r])=>Array.isArray(r)?r.map(i=>`${cf(n)}=${cf(i)}`).join("&"):`${cf(n)}=${cf(r)}`).filter(n=>n);return t.length?`?${t.join("&")}`:""}var I3=/^[^\/()?;#]+/;function _0(e){let t=e.match(I3);return t?t[0]:""}var b3=/^[^\/()?;=#]+/;function x3(e){let t=e.match(b3);return t?t[0]:""}var S3=/^[^=?&#]+/;function A3(e){let t=e.match(S3);return t?t[0]:""}var D3=/^[^&#]+/;function T3(e){let t=e.match(D3);return t?t[0]:""}var x0=class{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new dt([],{}):new dt([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(n).length>0)&&(r[Me]=new dt(t,n)),r}parseSegment(){let t=_0(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new pe(4009,!1);return this.capture(t),new Jo(ff(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let n=x3(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=_0(this.remaining);i&&(r=i,this.capture(r))}t[ff(n)]=ff(r)}parseQueryParam(t){let n=A3(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let l=T3(this.remaining);l&&(r=l,this.capture(r))}let i=XI(n),o=XI(r);if(t.hasOwnProperty(i)){let l=t[i];Array.isArray(l)||(l=[l],t[i]=l),l.push(o)}else t[i]=o}parseParens(t){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=_0(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new pe(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):t&&(o=Me);let l=this.parseChildren();n[o]=Object.keys(l).length===1?l[Me]:new dt([],l),this.consumeOptional("//")}return n}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new pe(4011,!1)}};function ub(e){return e.segments.length>0?new dt([],{[Me]:e}):e}function db(e){let t={};for(let[r,i]of Object.entries(e.children)){let o=db(i);if(r===Me&&o.segments.length===0&&o.hasChildren())for(let[l,h]of Object.entries(o.children))t[l]=h;else(o.segments.length>0||o.hasChildren())&&(t[r]=o)}let n=new dt(e.segments,t);return M3(n)}function M3(e){if(e.numberOfChildren===1&&e.children[Me]){let t=e.children[Me];return new dt(e.segments.concat(t.segments),t.children)}return e}function Qc(e){return e instanceof Li}function N3(e,t,n=null,r=null){let i=fb(e);return hb(i,t,n,r)}function fb(e){let t;function n(o){let l={};for(let g of o.children){let m=n(g);l[g.outlet]=m}let h=new dt(o.url,l);return o===e&&(t=h),h}let r=n(e.root),i=ub(r);return t??i}function hb(e,t,n,r){let i=e;for(;i.parent;)i=i.parent;if(t.length===0)return w0(i,i,i,n,r);let o=R3(t);if(o.toRoot())return w0(i,i,new dt([],{}),n,r);let l=O3(o,i,e),h=l.processChildren?qc(l.segmentGroup,l.index,o.commands):gb(l.segmentGroup,l.index,o.commands);return w0(i,l.segmentGroup,h,n,r)}function hf(e){return typeof e=="object"&&e!=null&&!e.outlets&&!e.segmentPath}function Kc(e){return typeof e=="object"&&e!=null&&e.outlets}function w0(e,t,n,r,i){let o={};r&&Object.entries(r).forEach(([g,m])=>{o[g]=Array.isArray(m)?m.map(C=>`${C}`):`${m}`});let l;e===t?l=n:l=pb(e,t,n);let h=ub(db(l));return new Li(h,o,i)}function pb(e,t,n){let r={};return Object.entries(e.children).forEach(([i,o])=>{o===t?r[i]=n:r[i]=pb(o,t,n)}),new dt(e.segments,r)}var pf=class{constructor(t,n,r){if(this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=r,t&&r.length>0&&hf(r[0]))throw new pe(4003,!1);let i=r.find(Kc);if(i&&i!==rb(r))throw new pe(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function R3(e){if(typeof e[0]=="string"&&e.length===1&&e[0]==="/")return new pf(!0,0,e);let t=0,n=!1,r=e.reduce((i,o,l)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let h={};return Object.entries(o.outlets).forEach(([g,m])=>{h[g]=typeof m=="string"?m.split("/"):m}),[...i,{outlets:h}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:l===0?(o.split("/").forEach((h,g)=>{g==0&&h==="."||(g==0&&h===""?n=!0:h===".."?t++:h!=""&&i.push(h))}),i):[...i,o]},[]);return new pf(n,t,r)}var ha=class{constructor(t,n,r){this.segmentGroup=t,this.processChildren=n,this.index=r}};function O3(e,t,n){if(e.isAbsolute)return new ha(t,!0,0);if(!n)return new ha(t,!1,NaN);if(n.parent===null)return new ha(n,!0,0);let r=hf(e.commands[0])?0:1,i=n.segments.length-1+r;return P3(n,i,e.numberOfDoubleDots)}function P3(e,t,n){let r=e,i=t,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new pe(4005,!1);i=r.segments.length}return new ha(r,!1,i-o)}function k3(e){return Kc(e[0])?e[0].outlets:{[Me]:e}}function gb(e,t,n){if(e??=new dt([],{}),e.segments.length===0&&e.hasChildren())return qc(e,t,n);let r=L3(e,t,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){let o=new dt(e.segments.slice(0,r.pathIndex),{});return o.children[Me]=new dt(e.segments.slice(r.pathIndex),e.children),qc(o,0,i)}else return r.match&&i.length===0?new dt(e.segments,{}):r.match&&!e.hasChildren()?S0(e,t,n):r.match?qc(e,0,i):S0(e,t,n)}function qc(e,t,n){if(n.length===0)return new dt(e.segments,{});{let r=k3(n),i={};if(Object.keys(r).some(o=>o!==Me)&&e.children[Me]&&e.numberOfChildren===1&&e.children[Me].segments.length===0){let o=qc(e.children[Me],t,n);return new dt(e.segments,o.children)}return Object.entries(r).forEach(([o,l])=>{typeof l=="string"&&(l=[l]),l!==null&&(i[o]=gb(e.children[o],t,l))}),Object.entries(e.children).forEach(([o,l])=>{r[o]===void 0&&(i[o]=l)}),new dt(e.segments,i)}}function L3(e,t,n){let r=0,i=t,o={match:!1,pathIndex:0,commandIndex:0};for(;i<e.segments.length;){if(r>=n.length)return o;let l=e.segments[i],h=n[r];if(Kc(h))break;let g=`${h}`,m=r<n.length-1?n[r+1]:null;if(i>0&&g===void 0)break;if(g&&m&&typeof m=="object"&&m.outlets===void 0){if(!KI(g,m,l))return o;r+=2}else{if(!KI(g,{},l))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function S0(e,t,n){let r=e.segments.slice(0,t),i=0;for(;i<n.length;){let o=n[i];if(Kc(o)){let g=F3(o.outlets);return new dt(r,g)}if(i===0&&hf(n[0])){let g=e.segments[t];r.push(new Jo(g.path,QI(n[0]))),i++;continue}let l=Kc(o)?o.outlets[Me]:`${o}`,h=i<n.length-1?n[i+1]:null;l&&h&&hf(h)?(r.push(new Jo(l,QI(h))),i+=2):(r.push(new Jo(l,{})),i++)}return new dt(r,{})}function F3(e){let t={};return Object.entries(e).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(t[n]=S0(new dt([],{}),0,r))}),t}function QI(e){let t={};return Object.entries(e).forEach(([n,r])=>t[n]=`${r}`),t}function KI(e,t,n){return e==n.path&&ei(t,n.parameters)}var Yc="imperative",gn=function(e){return e[e.NavigationStart=0]="NavigationStart",e[e.NavigationEnd=1]="NavigationEnd",e[e.NavigationCancel=2]="NavigationCancel",e[e.NavigationError=3]="NavigationError",e[e.RoutesRecognized=4]="RoutesRecognized",e[e.ResolveStart=5]="ResolveStart",e[e.ResolveEnd=6]="ResolveEnd",e[e.GuardsCheckStart=7]="GuardsCheckStart",e[e.GuardsCheckEnd=8]="GuardsCheckEnd",e[e.RouteConfigLoadStart=9]="RouteConfigLoadStart",e[e.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",e[e.ChildActivationStart=11]="ChildActivationStart",e[e.ChildActivationEnd=12]="ChildActivationEnd",e[e.ActivationStart=13]="ActivationStart",e[e.ActivationEnd=14]="ActivationEnd",e[e.Scroll=15]="Scroll",e[e.NavigationSkipped=16]="NavigationSkipped",e}(gn||{}),pr=class{constructor(t,n){this.id=t,this.url=n}},Jc=class extends pr{constructor(t,n,r="imperative",i=null){super(t,n),this.type=gn.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},ts=class extends pr{constructor(t,n,r){super(t,n),this.urlAfterRedirects=r,this.type=gn.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},rr=function(e){return e[e.Redirect=0]="Redirect",e[e.SupersededByNewNavigation=1]="SupersededByNewNavigation",e[e.NoDataFromResolver=2]="NoDataFromResolver",e[e.GuardRejected=3]="GuardRejected",e}(rr||{}),A0=function(e){return e[e.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",e[e.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",e}(A0||{}),ki=class extends pr{constructor(t,n,r,i){super(t,n),this.reason=r,this.code=i,this.type=gn.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},ns=class extends pr{constructor(t,n,r,i){super(t,n),this.reason=r,this.code=i,this.type=gn.NavigationSkipped}},el=class extends pr{constructor(t,n,r,i){super(t,n),this.error=r,this.target=i,this.type=gn.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},gf=class extends pr{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=gn.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},D0=class extends pr{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=gn.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},T0=class extends pr{constructor(t,n,r,i,o){super(t,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=gn.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},M0=class extends pr{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=gn.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},N0=class extends pr{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=gn.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},R0=class{constructor(t){this.route=t,this.type=gn.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},O0=class{constructor(t){this.route=t,this.type=gn.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},P0=class{constructor(t){this.snapshot=t,this.type=gn.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},k0=class{constructor(t){this.snapshot=t,this.type=gn.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},L0=class{constructor(t){this.snapshot=t,this.type=gn.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},F0=class{constructor(t){this.snapshot=t,this.type=gn.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var tl=class{},ya=class{constructor(t,n){this.url=t,this.navigationBehaviorOptions=n}};function B3(e,t){return e.providers&&!e._injector&&(e._injector=n0(e.providers,t,`Route: ${e.path}`)),e._injector??t}function Br(e){return e.outlet||Me}function V3(e,t){let n=e.filter(r=>Br(r)===t);return n.push(...e.filter(r=>Br(r)!==t)),n}function al(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let t=e.parent;t;t=t.parent){let n=t.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var B0=class{get injector(){return al(this.route?.snapshot)??this.rootInjector}set injector(t){}constructor(t){this.rootInjector=t,this.outlet=null,this.route=null,this.children=new Ef(this.rootInjector),this.attachRef=null}},Ef=(()=>{class e{constructor(n){this.rootInjector=n,this.contexts=new Map}onChildOutletCreated(n,r){let i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new B0(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static{this.\u0275fac=function(r){return new(r||e)(Le(dr))}}static{this.\u0275prov=ge({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),mf=class{constructor(t){this._root=t}get root(){return this._root.value}parent(t){let n=this.pathFromRoot(t);return n.length>1?n[n.length-2]:null}children(t){let n=V0(t,this._root);return n?n.children.map(r=>r.value):[]}firstChild(t){let n=V0(t,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(t){let n=U0(t,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==t)}pathFromRoot(t){return U0(t,this._root).map(n=>n.value)}};function V0(e,t){if(e===t.value)return t;for(let n of t.children){let r=V0(e,n);if(r)return r}return null}function U0(e,t){if(e===t.value)return[t];for(let n of t.children){let r=U0(e,n);if(r.length)return r.unshift(t),r}return[]}var nr=class{constructor(t,n){this.value=t,this.children=n}toString(){return`TreeNode(${this.value})`}};function fa(e){let t={};return e&&e.children.forEach(n=>t[n.value.outlet]=n),t}var yf=class extends mf{constructor(t,n){super(t),this.snapshot=n,X0(this,t)}toString(){return this.snapshot.toString()}};function mb(e){let t=U3(e),n=new fn([new Jo("",{})]),r=new fn({}),i=new fn({}),o=new fn({}),l=new fn(""),h=new ti(n,r,o,l,i,Me,e,t.root);return h.snapshot=t.root,new yf(new nr(h,[]),t)}function U3(e){let t={},n={},r={},i="",o=new pa([],t,r,i,n,Me,e,null,{});return new wf("",new nr(o,[]))}var ti=class{constructor(t,n,r,i,o,l,h,g){this.urlSubject=t,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=l,this.component=h,this._futureSnapshot=g,this.title=this.dataSubject?.pipe(Oe(m=>m[sl]))??xe(void 0),this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Oe(t=>ma(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Oe(t=>ma(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function _f(e,t,n="emptyOnly"){let r,{routeConfig:i}=e;return t!==null&&(n==="always"||i?.path===""||!t.component&&!t.routeConfig?.loadComponent)?r={params:K(K({},t.params),e.params),data:K(K({},t.data),e.data),resolve:K(K(K(K({},e.data),t.data),i?.data),e._resolvedData)}:r={params:K({},e.params),data:K({},e.data),resolve:K(K({},e.data),e._resolvedData??{})},i&&_b(i)&&(r.resolve[sl]=i.title),r}var pa=class{get title(){return this.data?.[sl]}constructor(t,n,r,i,o,l,h,g,m){this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=l,this.component=h,this.routeConfig=g,this._resolve=m}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=ma(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=ma(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${n}')`}},wf=class extends mf{constructor(t,n){super(n),this.url=t,X0(this,n)}toString(){return yb(this._root)}};function X0(e,t){t.value._routerState=e,t.children.forEach(n=>X0(e,n))}function yb(e){let t=e.children.length>0?` { ${e.children.map(yb).join(", ")} } `:"";return`${e.value}${t}`}function v0(e){if(e.snapshot){let t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,ei(t.queryParams,n.queryParams)||e.queryParamsSubject.next(n.queryParams),t.fragment!==n.fragment&&e.fragmentSubject.next(n.fragment),ei(t.params,n.params)||e.paramsSubject.next(n.params),h3(t.url,n.url)||e.urlSubject.next(n.url),ei(t.data,n.data)||e.dataSubject.next(n.data)}else e.snapshot=e._futureSnapshot,e.dataSubject.next(e._futureSnapshot.data)}function j0(e,t){let n=ei(e.params,t.params)&&y3(e.url,t.url),r=!e.parent!=!t.parent;return n&&!r&&(!e.parent||j0(e.parent,t.parent))}function _b(e){return typeof e.title=="string"||e.title===null}var Q0=(()=>{class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=Me,this.activateEvents=new Tt,this.deactivateEvents=new Tt,this.attachEvents=new Tt,this.detachEvents=new Tt,this.parentContexts=J(Ef),this.location=J(la),this.changeDetector=J(Ri),this.inputBinder=J(K0,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new pe(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new pe(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new pe(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new pe(4013,!1);this._activatedRoute=n;let i=this.location,l=n.snapshot.component,h=this.parentContexts.getOrCreateContext(this.name).children,g=new H0(n,h,i.injector);this.activated=i.createComponent(l,{index:i.length,injector:g,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275dir=Hn({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Si]})}}return e})(),H0=class e{__ngOutletInjector(t){return new e(this.route,this.childContexts,t)}constructor(t,n,r){this.route=t,this.childContexts=n,this.parent=r}get(t,n){return t===ti?this.route:t===Ef?this.childContexts:this.parent.get(t,n)}},K0=new Ie("");function j3(e,t,n){let r=nl(e,t._root,n?n._root:void 0);return new yf(r,t)}function nl(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=t.value;let i=H3(e,t,n);return new nr(r,i)}else{if(e.shouldAttach(t.value)){let o=e.retrieve(t.value);if(o!==null){let l=o.route;return l.value._futureSnapshot=t.value,l.children=t.children.map(h=>nl(e,h)),l}}let r=z3(t.value),i=t.children.map(o=>nl(e,o));return new nr(r,i)}}function H3(e,t,n){return t.children.map(r=>{for(let i of n.children)if(e.shouldReuseRoute(r.value,i.value.snapshot))return nl(e,r,i);return nl(e,r)})}function z3(e){return new ti(new fn(e.url),new fn(e.params),new fn(e.queryParams),new fn(e.fragment),new fn(e.data),e.outlet,e.component,e)}var rl=class{constructor(t,n){this.redirectTo=t,this.navigationBehaviorOptions=n}},wb="ngNavigationCancelingError";function vf(e,t){let{redirectTo:n,navigationBehaviorOptions:r}=Qc(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,i=vb(!1,rr.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function vb(e,t){let n=new Error(`NavigationCancelingError: ${e||""}`);return n[wb]=!0,n.cancellationCode=t,n}function W3(e){return Cb(e)&&Qc(e.url)}function Cb(e){return!!e&&e[wb]}var G3=(e,t,n,r)=>Oe(i=>(new z0(t,i.targetRouterState,i.currentRouterState,n,r).activate(e),i)),z0=class{constructor(t,n,r,i,o){this.routeReuseStrategy=t,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(t){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,t),v0(this.futureState.root),this.activateChildRoutes(n,r,t)}deactivateChildRoutes(t,n,r){let i=fa(n);t.children.forEach(o=>{let l=o.value.outlet;this.deactivateRoutes(o,i[l],r),delete i[l]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(t,n,r){let i=t.value,o=n?n.value:null;if(i===o)if(i.component){let l=r.getContext(i.outlet);l&&this.deactivateChildRoutes(t,n,l.children)}else this.deactivateChildRoutes(t,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(t,n){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,n):this.deactivateRouteAndOutlet(t,n)}detachAndStoreRouteSubtree(t,n){let r=n.getContext(t.value.outlet),i=r&&t.value.component?r.children:n,o=fa(t);for(let l of Object.values(o))this.deactivateRouteAndItsChildren(l,i);if(r&&r.outlet){let l=r.outlet.detach(),h=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:l,route:t,contexts:h})}}deactivateRouteAndOutlet(t,n){let r=n.getContext(t.value.outlet),i=r&&t.value.component?r.children:n,o=fa(t);for(let l of Object.values(o))this.deactivateRouteAndItsChildren(l,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(t,n,r){let i=fa(n);t.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new F0(o.value.snapshot))}),t.children.length&&this.forwardEvent(new k0(t.value.snapshot))}activateRoutes(t,n,r){let i=t.value,o=n?n.value:null;if(v0(i),i===o)if(i.component){let l=r.getOrCreateContext(i.outlet);this.activateChildRoutes(t,n,l.children)}else this.activateChildRoutes(t,n,r);else if(i.component){let l=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let h=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),l.children.onOutletReAttached(h.contexts),l.attachRef=h.componentRef,l.route=h.route.value,l.outlet&&l.outlet.attach(h.componentRef,h.route.value),v0(h.route.value),this.activateChildRoutes(t,null,l.children)}else l.attachRef=null,l.route=i,l.outlet&&l.outlet.activateWith(i,l.injector),this.activateChildRoutes(t,null,l.children)}else this.activateChildRoutes(t,null,r)}},Cf=class{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},ga=class{constructor(t,n){this.component=t,this.route=n}};function $3(e,t,n){let r=e._root,i=t?t._root:null;return Gc(r,i,n,[r.value])}function q3(e){let t=e.routeConfig?e.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:e,guards:t}}function wa(e,t){let n=Symbol(),r=t.get(e,n);return r===n?typeof e=="function"&&!iC(e)?e:t.get(e):r}function Gc(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=fa(t);return e.children.forEach(l=>{Y3(l,o[l.value.outlet],n,r.concat([l.value]),i),delete o[l.value.outlet]}),Object.entries(o).forEach(([l,h])=>Zc(h,n.getContext(l),i)),i}function Y3(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=e.value,l=t?t.value:null,h=n?n.getContext(e.value.outlet):null;if(l&&o.routeConfig===l.routeConfig){let g=Z3(l,o,o.routeConfig.runGuardsAndResolvers);g?i.canActivateChecks.push(new Cf(r)):(o.data=l.data,o._resolvedData=l._resolvedData),o.component?Gc(e,t,h?h.children:null,r,i):Gc(e,t,n,r,i),g&&h&&h.outlet&&h.outlet.isActivated&&i.canDeactivateChecks.push(new ga(h.outlet.component,l))}else l&&Zc(t,h,i),i.canActivateChecks.push(new Cf(r)),o.component?Gc(e,null,h?h.children:null,r,i):Gc(e,null,n,r,i);return i}function Z3(e,t,n){if(typeof n=="function")return n(e,t);switch(n){case"pathParamsChange":return!es(e.url,t.url);case"pathParamsOrQueryParamsChange":return!es(e.url,t.url)||!ei(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!j0(e,t)||!ei(e.queryParams,t.queryParams);case"paramsChange":default:return!j0(e,t)}}function Zc(e,t,n){let r=fa(e),i=e.value;Object.entries(r).forEach(([o,l])=>{i.component?t?Zc(l,t.children.getContext(o),n):Zc(l,null,n):Zc(l,t,n)}),i.component?t&&t.outlet&&t.outlet.isActivated?n.canDeactivateChecks.push(new ga(t.outlet.component,i)):n.canDeactivateChecks.push(new ga(null,i)):n.canDeactivateChecks.push(new ga(null,i))}function cl(e){return typeof e=="function"}function X3(e){return typeof e=="boolean"}function Q3(e){return e&&cl(e.canLoad)}function K3(e){return e&&cl(e.canActivate)}function J3(e){return e&&cl(e.canActivateChild)}function eL(e){return e&&cl(e.canDeactivate)}function tL(e){return e&&cl(e.canMatch)}function Eb(e){return e instanceof pi||e?.name==="EmptyError"}var lf=Symbol("INITIAL_VALUE");function _a(){return er(e=>Ju(e.map(t=>t.pipe(gi(1),Xp(lf)))).pipe(Oe(t=>{for(let n of t)if(n!==!0){if(n===lf)return lf;if(n===!1||nL(n))return n}return!0}),Nr(t=>t!==lf),gi(1)))}function nL(e){return Qc(e)||e instanceof rl}function rL(e,t){return Zt(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:l}}=n;return l.length===0&&o.length===0?xe(Ue(K({},n),{guardsResult:!0})):iL(l,r,i,e).pipe(Zt(h=>h&&X3(h)?oL(r,o,e,t):xe(h)),Oe(h=>Ue(K({},n),{guardsResult:h})))})}function iL(e,t,n,r){return at(e).pipe(Zt(i=>uL(i.component,i.route,n,t,r)),qr(i=>i!==!0,!0))}function oL(e,t,n,r){return at(t).pipe(Bs(i=>Fs(aL(i.route.parent,r),sL(i.route,r),lL(e,i.path,n),cL(e,i.route,n))),qr(i=>i!==!0,!0))}function sL(e,t){return e!==null&&t&&t(new L0(e)),xe(!0)}function aL(e,t){return e!==null&&t&&t(new P0(e)),xe(!0)}function cL(e,t,n){let r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||r.length===0)return xe(!0);let i=r.map(o=>ed(()=>{let l=al(t)??n,h=wa(o,l),g=K3(h)?h.canActivate(t,e):Ii(l,()=>h(t,e));return po(g).pipe(qr())}));return xe(i).pipe(_a())}function lL(e,t,n){let r=t[t.length-1],o=t.slice(0,t.length-1).reverse().map(l=>q3(l)).filter(l=>l!==null).map(l=>ed(()=>{let h=l.guards.map(g=>{let m=al(l.node)??n,C=wa(g,m),E=J3(C)?C.canActivateChild(r,e):Ii(m,()=>C(r,e));return po(E).pipe(qr())});return xe(h).pipe(_a())}));return xe(o).pipe(_a())}function uL(e,t,n,r,i){let o=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!o||o.length===0)return xe(!0);let l=o.map(h=>{let g=al(t)??i,m=wa(h,g),C=eL(m)?m.canDeactivate(e,t,n,r):Ii(g,()=>m(e,t,n,r));return po(C).pipe(qr())});return xe(l).pipe(_a())}function dL(e,t,n,r){let i=t.canLoad;if(i===void 0||i.length===0)return xe(!0);let o=i.map(l=>{let h=wa(l,e),g=Q3(h)?h.canLoad(t,n):Ii(e,()=>h(t,n));return po(g)});return xe(o).pipe(_a(),Ib(r))}function Ib(e){return Fp(Xt(t=>{if(typeof t!="boolean")throw vf(e,t)}),Oe(t=>t===!0))}function fL(e,t,n,r){let i=t.canMatch;if(!i||i.length===0)return xe(!0);let o=i.map(l=>{let h=wa(l,e),g=tL(h)?h.canMatch(t,n):Ii(e,()=>h(t,n));return po(g)});return xe(o).pipe(_a(),Ib(r))}var il=class{constructor(t){this.segmentGroup=t||null}},ol=class extends Error{constructor(t){super(),this.urlTree=t}};function da(e){return Ls(new il(e))}function hL(e){return Ls(new pe(4e3,!1))}function pL(e){return Ls(vb(!1,rr.GuardRejected))}var W0=class{constructor(t,n){this.urlSerializer=t,this.urlTree=n}lineralizeSegments(t,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return xe(r);if(i.numberOfChildren>1||!i.children[Me])return hL(`${t.redirectTo}`);i=i.children[Me]}}applyRedirectCommands(t,n,r,i,o){if(typeof n!="string"){let h=n,{queryParams:g,fragment:m,routeConfig:C,url:E,outlet:x,params:D,data:N,title:U}=i,$=Ii(o,()=>h({params:D,data:N,queryParams:g,fragment:m,routeConfig:C,url:E,outlet:x,title:U}));if($ instanceof Li)throw new ol($);n=$}let l=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),t,r);if(n[0]==="/")throw new ol(l);return l}applyRedirectCreateUrlTree(t,n,r,i){let o=this.createSegmentGroup(t,n.root,r,i);return new Li(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(t,n){let r={};return Object.entries(t).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let h=o.substring(1);r[i]=n[h]}else r[i]=o}),r}createSegmentGroup(t,n,r,i){let o=this.createSegments(t,n.segments,r,i),l={};return Object.entries(n.children).forEach(([h,g])=>{l[h]=this.createSegmentGroup(t,g,r,i)}),new dt(o,l)}createSegments(t,n,r,i){return n.map(o=>o.path[0]===":"?this.findPosParam(t,o,i):this.findOrReturn(o,r))}findPosParam(t,n,r){let i=r[n.path.substring(1)];if(!i)throw new pe(4001,!1);return i}findOrReturn(t,n){let r=0;for(let i of n){if(i.path===t.path)return n.splice(r),i;r++}return t}},G0={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function gL(e,t,n,r,i){let o=bb(e,t,n);return o.matched?(r=B3(t,r),fL(r,t,n,i).pipe(Oe(l=>l===!0?o:K({},G0)))):xe(o)}function bb(e,t,n){if(t.path==="**")return mL(n);if(t.path==="")return t.pathMatch==="full"&&(e.hasChildren()||n.length>0)?K({},G0):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(t.matcher||f3)(n,e,t);if(!i)return K({},G0);let o={};Object.entries(i.posParams??{}).forEach(([h,g])=>{o[h]=g.path});let l=i.consumed.length>0?K(K({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:l,positionalParamSegments:i.posParams??{}}}function mL(e){return{matched:!0,parameters:e.length>0?rb(e).parameters:{},consumedSegments:e,remainingSegments:[],positionalParamSegments:{}}}function JI(e,t,n,r){return n.length>0&&wL(e,n,r)?{segmentGroup:new dt(t,_L(r,new dt(n,e.children))),slicedSegments:[]}:n.length===0&&vL(e,n,r)?{segmentGroup:new dt(e.segments,yL(e,n,r,e.children)),slicedSegments:n}:{segmentGroup:new dt(e.segments,e.children),slicedSegments:n}}function yL(e,t,n,r){let i={};for(let o of n)if(If(e,t,o)&&!r[Br(o)]){let l=new dt([],{});i[Br(o)]=l}return K(K({},r),i)}function _L(e,t){let n={};n[Me]=t;for(let r of e)if(r.path===""&&Br(r)!==Me){let i=new dt([],{});n[Br(r)]=i}return n}function wL(e,t,n){return n.some(r=>If(e,t,r)&&Br(r)!==Me)}function vL(e,t,n){return n.some(r=>If(e,t,r))}function If(e,t,n){return(e.hasChildren()||t.length>0)&&n.pathMatch==="full"?!1:n.path===""}function CL(e,t,n){return t.length===0&&!e.children[n]}var $0=class{};function EL(e,t,n,r,i,o,l="emptyOnly"){return new q0(e,t,n,r,i,l,o).recognize()}var IL=31,q0=class{constructor(t,n,r,i,o,l,h){this.injector=t,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=l,this.urlSerializer=h,this.applyRedirects=new W0(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(t){return new pe(4002,`'${t.segmentGroup}'`)}recognize(){let t=JI(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(Oe(({children:n,rootSnapshot:r})=>{let i=new nr(r,n),o=new wf("",i),l=N3(r,[],this.urlTree.queryParams,this.urlTree.fragment);return l.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(l),{state:o,tree:l}}))}match(t){let n=new pa([],Object.freeze({}),Object.freeze(K({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),Me,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,t,Me,n).pipe(Oe(r=>({children:r,rootSnapshot:n})),Vn(r=>{if(r instanceof ol)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof il?this.noMatchError(r):r}))}processSegmentGroup(t,n,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(t,n,r,o):this.processSegment(t,n,r,r.segments,i,!0,o).pipe(Oe(l=>l instanceof nr?[l]:[]))}processChildren(t,n,r,i){let o=[];for(let l of Object.keys(r.children))l==="primary"?o.unshift(l):o.push(l);return at(o).pipe(Bs(l=>{let h=r.children[l],g=V3(n,l);return this.processSegmentGroup(t,g,h,l,i)}),Zp((l,h)=>(l.push(...h),l)),to(null),Yp(),Zt(l=>{if(l===null)return da(r);let h=xb(l);return bL(h),xe(h)}))}processSegment(t,n,r,i,o,l,h){return at(n).pipe(Bs(g=>this.processSegmentAgainstRoute(g._injector??t,n,g,r,i,o,l,h).pipe(Vn(m=>{if(m instanceof il)return xe(null);throw m}))),qr(g=>!!g),Vn(g=>{if(Eb(g))return CL(r,i,o)?xe(new $0):da(r);throw g}))}processSegmentAgainstRoute(t,n,r,i,o,l,h,g){return Br(r)!==l&&(l===Me||!If(i,o,r))?da(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(t,i,r,o,l,g):this.allowRedirects&&h?this.expandSegmentAgainstRouteUsingRedirect(t,i,n,r,o,l,g):da(i)}expandSegmentAgainstRouteUsingRedirect(t,n,r,i,o,l,h){let{matched:g,parameters:m,consumedSegments:C,positionalParamSegments:E,remainingSegments:x}=bb(n,i,o);if(!g)return da(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>IL&&(this.allowRedirects=!1));let D=new pa(o,m,Object.freeze(K({},this.urlTree.queryParams)),this.urlTree.fragment,eb(i),Br(i),i.component??i._loadedComponent??null,i,tb(i)),N=_f(D,h,this.paramsInheritanceStrategy);D.params=Object.freeze(N.params),D.data=Object.freeze(N.data);let U=this.applyRedirects.applyRedirectCommands(C,i.redirectTo,E,D,t);return this.applyRedirects.lineralizeSegments(i,U).pipe(Zt($=>this.processSegment(t,r,n,$.concat(x),l,!1,h)))}matchSegmentAgainstRoute(t,n,r,i,o,l){let h=gL(n,r,i,t,this.urlSerializer);return r.path==="**"&&(n.children={}),h.pipe(er(g=>g.matched?(t=r._injector??t,this.getChildConfig(t,r,i).pipe(er(({routes:m})=>{let C=r._loadedInjector??t,{parameters:E,consumedSegments:x,remainingSegments:D}=g,N=new pa(x,E,Object.freeze(K({},this.urlTree.queryParams)),this.urlTree.fragment,eb(r),Br(r),r.component??r._loadedComponent??null,r,tb(r)),U=_f(N,l,this.paramsInheritanceStrategy);N.params=Object.freeze(U.params),N.data=Object.freeze(U.data);let{segmentGroup:$,slicedSegments:W}=JI(n,x,D,m);if(W.length===0&&$.hasChildren())return this.processChildren(C,m,$,N).pipe(Oe(ze=>new nr(N,ze)));if(m.length===0&&W.length===0)return xe(new nr(N,[]));let ie=Br(r)===o;return this.processSegment(C,m,$,W,ie?Me:o,!0,N).pipe(Oe(ze=>new nr(N,ze instanceof nr?[ze]:[])))}))):da(n)))}getChildConfig(t,n,r){return n.children?xe({routes:n.children,injector:t}):n.loadChildren?n._loadedRoutes!==void 0?xe({routes:n._loadedRoutes,injector:n._loadedInjector}):dL(t,n,r,this.urlSerializer).pipe(Zt(i=>i?this.configLoader.loadChildren(t,n).pipe(Xt(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):pL(n))):xe({routes:[],injector:t})}};function bL(e){e.sort((t,n)=>t.value.outlet===Me?-1:n.value.outlet===Me?1:t.value.outlet.localeCompare(n.value.outlet))}function xL(e){let t=e.value.routeConfig;return t&&t.path===""}function xb(e){let t=[],n=new Set;for(let r of e){if(!xL(r)){t.push(r);continue}let i=t.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):t.push(r)}for(let r of n){let i=xb(r.children);t.push(new nr(r.value,i))}return t.filter(r=>!n.has(r))}function eb(e){return e.data||{}}function tb(e){return e.resolve||{}}function SL(e,t,n,r,i,o){return Zt(l=>EL(e,t,n,r,l.extractedUrl,i,o).pipe(Oe(({state:h,tree:g})=>Ue(K({},l),{targetSnapshot:h,urlAfterRedirects:g}))))}function AL(e,t){return Zt(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return xe(n);let o=new Set(i.map(g=>g.route)),l=new Set;for(let g of o)if(!l.has(g))for(let m of Sb(g))l.add(m);let h=0;return at(l).pipe(Bs(g=>o.has(g)?DL(g,r,e,t):(g.data=_f(g,g.parent,e).resolve,xe(void 0))),Xt(()=>h++),Vs(1),Zt(g=>h===l.size?xe(n):Jn))})}function Sb(e){let t=e.children.map(n=>Sb(n)).flat();return[e,...t]}function DL(e,t,n,r){let i=e.routeConfig,o=e._resolve;return i?.title!==void 0&&!_b(i)&&(o[sl]=i.title),TL(o,e,t,r).pipe(Oe(l=>(e._resolvedData=l,e.data=_f(e,e.parent,n).resolve,null)))}function TL(e,t,n,r){let i=I0(e);if(i.length===0)return xe({});let o={};return at(i).pipe(Zt(l=>ML(e[l],t,n,r).pipe(qr(),Xt(h=>{if(h instanceof rl)throw vf(new Xc,h);o[l]=h}))),Vs(1),qp(o),Vn(l=>Eb(l)?Jn:Ls(l)))}function ML(e,t,n,r){let i=al(t)??r,o=wa(e,i),l=o.resolve?o.resolve(t,n):Ii(i,()=>o(t,n));return po(l)}function C0(e){return er(t=>{let n=e(t);return n?at(n).pipe(Oe(()=>t)):xe(t)})}var Ab=(()=>{class e{buildTitle(n){let r,i=n.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===Me);return r}getResolvedTitleForRoute(n){return n.data[sl]}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=ge({token:e,factory:()=>J(NL),providedIn:"root"})}}return e})(),NL=(()=>{class e extends Ab{constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||e)(Le(qI))}}static{this.\u0275prov=ge({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),J0=new Ie("",{providedIn:"root",factory:()=>({})}),RL=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275cmp=ce({type:e,selectors:[["ng-component"]],standalone:!0,features:[de],decls:1,vars:0,template:function(r,i){r&1&&we(0,"router-outlet")},dependencies:[Q0],encapsulation:2})}}return e})();function e1(e){let t=e.children&&e.children.map(e1),n=t?Ue(K({},e),{children:t}):K({},e);return!n.component&&!n.loadComponent&&(t||n.loadChildren)&&n.outlet&&n.outlet!==Me&&(n.component=RL),n}var t1=new Ie(""),OL=(()=>{class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=J(o0)}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return xe(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);let r=po(n.loadComponent()).pipe(Oe(Db),Xt(o=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=o}),pc(()=>{this.componentLoaders.delete(n)})),i=new Ps(r,()=>new dn).pipe(Os());return this.componentLoaders.set(n,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return xe({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=PL(r,this.compiler,n,this.onLoadEndListener).pipe(pc(()=>{this.childrenLoaders.delete(r)})),l=new Ps(o,()=>new dn).pipe(Os());return this.childrenLoaders.set(r,l),l}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=ge({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function PL(e,t,n,r){return po(e.loadChildren()).pipe(Oe(Db),Zt(i=>i instanceof Tc||Array.isArray(i)?xe(i):at(t.compileModuleAsync(i))),Oe(i=>{r&&r(e);let o,l,h=!1;return Array.isArray(i)?(l=i,h=!0):(o=i.create(n).injector,l=o.get(t1,[],{optional:!0,self:!0}).flat()),{routes:l.map(e1),injector:o}}))}function kL(e){return e&&typeof e=="object"&&"default"in e}function Db(e){return kL(e)?e.default:e}var n1=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=ge({token:e,factory:()=>J(LL),providedIn:"root"})}}return e})(),LL=(()=>{class e{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=ge({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),FL=new Ie("");var BL=new Ie(""),VL=(()=>{class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new dn,this.transitionAbortSubject=new dn,this.configLoader=J(OL),this.environmentInjector=J(dr),this.urlSerializer=J(Z0),this.rootContexts=J(Ef),this.location=J(Uc),this.inputBindingEnabled=J(K0,{optional:!0})!==null,this.titleStrategy=J(Ab),this.options=J(J0,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=J(n1),this.createViewTransition=J(FL,{optional:!0}),this.navigationErrorHandler=J(BL,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>xe(void 0),this.rootComponentType=null;let n=i=>this.events.next(new R0(i)),r=i=>this.events.next(new O0(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;this.transitions?.next(Ue(K(K({},this.transitions.value),n),{id:r}))}setupNavigations(n,r,i){return this.transitions=new fn({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Yc,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Nr(o=>o.id!==0),Oe(o=>Ue(K({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),er(o=>{let l=!1,h=!1;return xe(o).pipe(er(g=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",rr.SupersededByNewNavigation),Jn;this.currentTransition=o,this.currentNavigation={id:g.id,initialUrl:g.rawUrl,extractedUrl:g.extractedUrl,targetBrowserUrl:typeof g.extras.browserUrl=="string"?this.urlSerializer.parse(g.extras.browserUrl):g.extras.browserUrl,trigger:g.source,extras:g.extras,previousNavigation:this.lastSuccessfulNavigation?Ue(K({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let m=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),C=g.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!m&&C!=="reload"){let E="";return this.events.next(new ns(g.id,this.urlSerializer.serialize(g.rawUrl),E,A0.IgnoredSameUrlNavigation)),g.resolve(!1),Jn}if(this.urlHandlingStrategy.shouldProcessUrl(g.rawUrl))return xe(g).pipe(er(E=>{let x=this.transitions?.getValue();return this.events.next(new Jc(E.id,this.urlSerializer.serialize(E.extractedUrl),E.source,E.restoredState)),x!==this.transitions?.getValue()?Jn:Promise.resolve(E)}),SL(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),Xt(E=>{o.targetSnapshot=E.targetSnapshot,o.urlAfterRedirects=E.urlAfterRedirects,this.currentNavigation=Ue(K({},this.currentNavigation),{finalUrl:E.urlAfterRedirects});let x=new gf(E.id,this.urlSerializer.serialize(E.extractedUrl),this.urlSerializer.serialize(E.urlAfterRedirects),E.targetSnapshot);this.events.next(x)}));if(m&&this.urlHandlingStrategy.shouldProcessUrl(g.currentRawUrl)){let{id:E,extractedUrl:x,source:D,restoredState:N,extras:U}=g,$=new Jc(E,this.urlSerializer.serialize(x),D,N);this.events.next($);let W=mb(this.rootComponentType).snapshot;return this.currentTransition=o=Ue(K({},g),{targetSnapshot:W,urlAfterRedirects:x,extras:Ue(K({},U),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=x,xe(o)}else{let E="";return this.events.next(new ns(g.id,this.urlSerializer.serialize(g.extractedUrl),E,A0.IgnoredByUrlHandlingStrategy)),g.resolve(!1),Jn}}),Xt(g=>{let m=new D0(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(m)}),Oe(g=>(this.currentTransition=o=Ue(K({},g),{guards:$3(g.targetSnapshot,g.currentSnapshot,this.rootContexts)}),o)),rL(this.environmentInjector,g=>this.events.next(g)),Xt(g=>{if(o.guardsResult=g.guardsResult,g.guardsResult&&typeof g.guardsResult!="boolean")throw vf(this.urlSerializer,g.guardsResult);let m=new T0(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot,!!g.guardsResult);this.events.next(m)}),Nr(g=>g.guardsResult?!0:(this.cancelNavigationTransition(g,"",rr.GuardRejected),!1)),C0(g=>{if(g.guards.canActivateChecks.length)return xe(g).pipe(Xt(m=>{let C=new M0(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(C)}),er(m=>{let C=!1;return xe(m).pipe(AL(this.paramsInheritanceStrategy,this.environmentInjector),Xt({next:()=>C=!0,complete:()=>{C||this.cancelNavigationTransition(m,"",rr.NoDataFromResolver)}}))}),Xt(m=>{let C=new N0(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(C)}))}),C0(g=>{let m=C=>{let E=[];C.routeConfig?.loadComponent&&!C.routeConfig._loadedComponent&&E.push(this.configLoader.loadComponent(C.routeConfig).pipe(Xt(x=>{C.component=x}),Oe(()=>{})));for(let x of C.children)E.push(...m(x));return E};return Ju(m(g.targetSnapshot.root)).pipe(to(null),gi(1))}),C0(()=>this.afterPreactivation()),er(()=>{let{currentSnapshot:g,targetSnapshot:m}=o,C=this.createViewTransition?.(this.environmentInjector,g.root,m.root);return C?at(C).pipe(Oe(()=>o)):xe(o)}),Oe(g=>{let m=j3(n.routeReuseStrategy,g.targetSnapshot,g.currentRouterState);return this.currentTransition=o=Ue(K({},g),{targetRouterState:m}),this.currentNavigation.targetRouterState=m,o}),Xt(()=>{this.events.next(new tl)}),G3(this.rootContexts,n.routeReuseStrategy,g=>this.events.next(g),this.inputBindingEnabled),gi(1),Xt({next:g=>{l=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new ts(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects))),this.titleStrategy?.updateTitle(g.targetRouterState.snapshot),g.resolve(!0)},complete:()=>{l=!0}}),Qp(this.transitionAbortSubject.pipe(Xt(g=>{throw g}))),pc(()=>{!l&&!h&&this.cancelNavigationTransition(o,"",rr.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),Vn(g=>{if(h=!0,Cb(g))this.events.next(new ki(o.id,this.urlSerializer.serialize(o.extractedUrl),g.message,g.cancellationCode)),W3(g)?this.events.next(new ya(g.url,g.navigationBehaviorOptions)):o.resolve(!1);else{let m=new el(o.id,this.urlSerializer.serialize(o.extractedUrl),g,o.targetSnapshot??void 0);try{let C=Ii(this.environmentInjector,()=>this.navigationErrorHandler?.(m));if(C instanceof rl){let{message:E,cancellationCode:x}=vf(this.urlSerializer,C);this.events.next(new ki(o.id,this.urlSerializer.serialize(o.extractedUrl),E,x)),this.events.next(new ya(C.redirectTo,C.navigationBehaviorOptions))}else{this.events.next(m);let E=n.errorHandler(g);o.resolve(!!E)}}catch(C){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(C)}}return Jn}))}))}cancelNavigationTransition(n,r,i){let o=new ki(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(o),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return n.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=ge({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function UL(e){return e!==Yc}var jL=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=ge({token:e,factory:()=>J(HL),providedIn:"root"})}}return e})(),Y0=class{shouldDetach(t){return!1}store(t,n){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,n){return t.routeConfig===n.routeConfig}},HL=(()=>{class e extends Y0{static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=ia(e)))(i||e)}})()}static{this.\u0275prov=ge({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),Tb=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=ge({token:e,factory:()=>J(zL),providedIn:"root"})}}return e})(),zL=(()=>{class e extends Tb{constructor(){super(...arguments),this.location=J(Uc),this.urlSerializer=J(Z0),this.options=J(J0,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=J(n1),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Li,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=mb(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&n(r.url,r.state)})}handleRouterEvent(n,r){if(n instanceof Jc)this.stateMemento=this.createStateMemento();else if(n instanceof ns)this.rawUrlTree=r.initialUrl;else if(n instanceof gf){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else n instanceof tl?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):n instanceof ki&&(n.code===rr.GuardRejected||n.code===rr.NoDataFromResolver)?this.restoreHistory(r):n instanceof el?this.restoreHistory(r,!0):n instanceof ts&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,r){let i=n instanceof Li?this.urlSerializer.serialize(n):n;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let o=this.browserPageId,l=K(K({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(i,"",l)}else{let o=K(K({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",o)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.currentUrlTree===n.finalUrl&&o===0&&(this.resetState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=ia(e)))(i||e)}})()}static{this.\u0275prov=ge({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),$c=function(e){return e[e.COMPLETE=0]="COMPLETE",e[e.FAILED=1]="FAILED",e[e.REDIRECTING=2]="REDIRECTING",e}($c||{});function WL(e,t){e.events.pipe(Nr(n=>n instanceof ts||n instanceof ki||n instanceof el||n instanceof ns),Oe(n=>n instanceof ts||n instanceof ns?$c.COMPLETE:(n instanceof ki?n.code===rr.Redirect||n.code===rr.SupersededByNewNavigation:!1)?$c.REDIRECTING:$c.FAILED),Nr(n=>n!==$c.REDIRECTING),gi(1)).subscribe(()=>{t()})}function GL(e){throw e}var $L={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},qL={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},ni=(()=>{class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=J(tf),this.stateManager=J(Tb),this.options=J(J0,{optional:!0})||{},this.pendingTasks=J(oa),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=J(VL),this.urlSerializer=J(Z0),this.location=J(Uc),this.urlHandlingStrategy=J(n1),this._events=new dn,this.errorHandler=this.options.errorHandler||GL,this.navigated=!1,this.routeReuseStrategy=J(jL),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=J(t1,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!J(K0,{optional:!0}),this.eventsSubscription=new Ot,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof ki&&r.code!==rr.Redirect&&r.code!==rr.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof ts)this.navigated=!0;else if(r instanceof ya){let l=r.navigationBehaviorOptions,h=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),g=K({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||UL(i.source)},l);this.scheduleNavigation(h,Yc,null,g,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}ZL(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Yc,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(n,"popstate",r)},0)})}navigateToSyncWithBrowser(n,r,i){let o={replaceUrl:!0},l=i?.navigationId?i:null;if(i){let g=K({},i);delete g.navigationId,delete g.\u0275routerPageId,Object.keys(g).length!==0&&(o.state=g)}let h=this.parseUrl(n);this.scheduleNavigation(h,r,l,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(e1),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:i,queryParams:o,fragment:l,queryParamsHandling:h,preserveFragment:g}=r,m=g?this.currentUrlTree.fragment:l,C=null;switch(h??this.options.defaultQueryParamsHandling){case"merge":C=K(K({},this.currentUrlTree.queryParams),o);break;case"preserve":C=this.currentUrlTree.queryParams;break;default:C=o||null}C!==null&&(C=this.removeEmptyProps(C));let E;try{let x=i?i.snapshot:this.routerState.snapshot.root;E=fb(x)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),E=this.currentUrlTree.root}return hb(E,n,C,m??null)}navigateByUrl(n,r={skipLocationChange:!1}){let i=Qc(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Yc,null,r)}navigate(n,r={skipLocationChange:!1}){return YL(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.urlSerializer.parse("/")}}isActive(n,r){let i;if(r===!0?i=K({},$L):r===!1?i=K({},qL):i=r,Qc(n))return ZI(this.currentUrlTree,n,i);let o=this.parseUrl(n);return ZI(this.currentUrlTree,o,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(n,r,i,o,l){if(this.disposed)return Promise.resolve(!1);let h,g,m;l?(h=l.resolve,g=l.reject,m=l.promise):m=new Promise((E,x)=>{h=E,g=x});let C=this.pendingTasks.add();return WL(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(C))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:o,resolve:h,reject:g,promise:m,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),m.catch(E=>Promise.reject(E))}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=ge({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function YL(e){for(let t=0;t<e.length;t++)if(e[t]==null)throw new pe(4008,!1)}function ZL(e){return!(e instanceof tl)&&!(e instanceof ya)}var XL=new Ie("");function Mb(e,...t){return Im([{provide:t1,multi:!0,useValue:e},[],{provide:ti,useFactory:QL,deps:[ni]},{provide:i0,multi:!0,useFactory:KL},t.map(n=>n.\u0275providers)])}function QL(e){return e.routerState.root}function KL(){let e=J(ao);return t=>{let n=e.get(Qo);if(t!==n.components[0])return;let r=e.get(ni),i=e.get(JL);e.get(eF)===1&&r.initialNavigation(),e.get(tF,null,ke.Optional)?.setUpPreloading(),e.get(XL,null,ke.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var JL=new Ie("",{factory:()=>new dn}),eF=new Ie("",{providedIn:"root",factory:()=>1});var tF=new Ie("");var Nb=(()=>{class e{constructor(){}title="Tablefi";static \u0275fac=function(r){return new(r||e)};static \u0275cmp=ce({type:e,selectors:[["app-root"]],standalone:!0,features:[de],decls:1,vars:0,template:function(r,i){r&1&&we(0,"router-outlet")},dependencies:[Q0,c0],styles:["router-outlet[_ngcontent-%COMP%]{height:100%;width:100%}"]})}return e})();var Ub=(()=>{class e{constructor(n,r){this._renderer=n,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static{this.\u0275fac=function(r){return new(r||e)(ne(fo),ne(Jr))}}static{this.\u0275dir=Hn({type:e})}}return e})(),nF=(()=>{class e extends Ub{static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=ia(e)))(i||e)}})()}static{this.\u0275dir=Hn({type:e,features:[Mi]})}}return e})(),jb=new Ie("");var rF={provide:jb,useExisting:Zo(()=>qn),multi:!0};function iF(){let e=Pi()?Pi().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}var oF=new Ie(""),qn=(()=>{class e extends Ub{constructor(n,r,i){super(n,r),this._compositionMode=i,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!iF())}writeValue(n){let r=n??"";this.setProperty("value",r)}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static{this.\u0275fac=function(r){return new(r||e)(ne(fo),ne(Jr),ne(oF,8))}}static{this.\u0275dir=Hn({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&ee("input",function(l){return i._handleInput(l.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(l){return i._compositionEnd(l.target.value)})},features:[Fc([rF]),Mi]})}}return e})();function sF(e){return e==null||(typeof e=="string"||Array.isArray(e))&&e.length===0}var i1=new Ie(""),Hb=new Ie("");function aF(e){return sF(e.value)?{required:!0}:null}function Rb(e){return null}function zb(e){return e!=null}function Wb(e){return Xo(e)?at(e):e}function Gb(e){let t={};return e.forEach(n=>{t=n!=null?K(K({},t),n):t}),Object.keys(t).length===0?null:t}function $b(e,t){return t.map(n=>n(e))}function cF(e){return!e.validate}function qb(e){return e.map(t=>cF(t)?t:n=>t.validate(n))}function lF(e){if(!e)return null;let t=e.filter(zb);return t.length==0?null:function(n){return Gb($b(n,t))}}function o1(e){return e!=null?lF(qb(e)):null}function uF(e){if(!e)return null;let t=e.filter(zb);return t.length==0?null:function(n){let r=$b(n,t).map(Wb);return Gp(r).pipe(Oe(Gb))}}function s1(e){return e!=null?uF(qb(e)):null}function Ob(e,t){return e===null?[t]:Array.isArray(e)?[...e,t]:[e,t]}function dF(e){return e._rawValidators}function fF(e){return e._rawAsyncValidators}function r1(e){return e?Array.isArray(e)?e:[e]:[]}function Sf(e,t){return Array.isArray(e)?e.includes(t):e===t}function Pb(e,t){let n=r1(t);return r1(e).forEach(i=>{Sf(n,i)||n.push(i)}),n}function kb(e,t){return r1(t).filter(n=>!Sf(e,n))}var Af=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=o1(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=s1(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,n){return this.control?this.control.hasError(t,n):!1}getError(t,n){return this.control?this.control.getError(t,n):null}},Ea=class extends Af{get formDirective(){return null}get path(){return null}},pl=class extends Af{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Df=class{constructor(t){this._cd=t}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},hF={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},z$=Ue(K({},hF),{"[class.ng-submitted]":"isSubmitted"}),gr=(()=>{class e extends Df{constructor(n){super(n)}static{this.\u0275fac=function(r){return new(r||e)(ne(pl,2))}}static{this.\u0275dir=Hn({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Kd("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[Mi]})}}return e})(),ri=(()=>{class e extends Df{constructor(n){super(n)}static{this.\u0275fac=function(r){return new(r||e)(ne(Ea,10))}}static{this.\u0275dir=Hn({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&Kd("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[Mi]})}}return e})();var ll="VALID",xf="INVALID",va="PENDING",ul="DISABLED",Ia=class{},Tf=class extends Ia{constructor(t,n){super(),this.value=t,this.source=n}},fl=class extends Ia{constructor(t,n){super(),this.pristine=t,this.source=n}},hl=class extends Ia{constructor(t,n){super(),this.touched=t,this.source=n}},Ca=class extends Ia{constructor(t,n){super(),this.status=t,this.source=n}};function Yb(e){return(Rf(e)?e.validators:e)||null}function pF(e){return Array.isArray(e)?o1(e):e||null}function Zb(e,t){return(Rf(t)?t.asyncValidators:e)||null}function gF(e){return Array.isArray(e)?s1(e):e||null}function Rf(e){return e!=null&&!Array.isArray(e)&&typeof e=="object"}function mF(e,t,n){let r=e.controls;if(!(t?Object.keys(r):r).length)throw new pe(1e3,"");if(!r[n])throw new pe(1001,"")}function yF(e,t,n){e._forEachChild((r,i)=>{if(n[i]===void 0)throw new pe(1002,"")})}var Mf=class{constructor(t,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=Vc(()=>this.statusReactive()),this.statusReactive=Pc(void 0),this._pristine=Vc(()=>this.pristineReactive()),this.pristineReactive=Pc(!0),this._touched=Vc(()=>this.touchedReactive()),this.touchedReactive=Pc(!1),this._events=new dn,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get status(){return Oi(this.statusReactive)}set status(t){Oi(()=>this.statusReactive.set(t))}get valid(){return this.status===ll}get invalid(){return this.status===xf}get pending(){return this.status==va}get disabled(){return this.status===ul}get enabled(){return this.status!==ul}get pristine(){return Oi(this.pristineReactive)}set pristine(t){Oi(()=>this.pristineReactive.set(t))}get dirty(){return!this.pristine}get touched(){return Oi(this.touchedReactive)}set touched(t){Oi(()=>this.touchedReactive.set(t))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(Pb(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(Pb(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(kb(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(kb(t,this._rawAsyncValidators))}hasValidator(t){return Sf(this._rawValidators,t)}hasAsyncValidator(t){return Sf(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){let n=this.touched===!1;this.touched=!0;let r=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsTouched(Ue(K({},t),{sourceControl:r})),n&&t.emitEvent!==!1&&this._events.next(new hl(!0,r))}markAllAsTouched(t={}){this.markAsTouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(t))}markAsUntouched(t={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=t.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:r})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,r),n&&t.emitEvent!==!1&&this._events.next(new hl(!1,r))}markAsDirty(t={}){let n=this.pristine===!0;this.pristine=!1;let r=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsDirty(Ue(K({},t),{sourceControl:r})),n&&t.emitEvent!==!1&&this._events.next(new fl(!1,r))}markAsPristine(t={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=t.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:t.emitEvent})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t,r),n&&t.emitEvent!==!1&&this._events.next(new fl(!0,r))}markAsPending(t={}){this.status=va;let n=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Ca(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.markAsPending(Ue(K({},t),{sourceControl:n}))}disable(t={}){let n=this._parentMarkedDirty(t.onlySelf);this.status=ul,this.errors=null,this._forEachChild(i=>{i.disable(Ue(K({},t),{onlySelf:!0}))}),this._updateValue();let r=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Tf(this.value,r)),this._events.next(new Ca(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Ue(K({},t),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(t={}){let n=this._parentMarkedDirty(t.onlySelf);this.status=ll,this._forEachChild(r=>{r.enable(Ue(K({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Ue(K({},t),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(t,n){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===ll||this.status===va)&&this._runAsyncValidator(r,t.emitEvent)}let n=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Tf(this.value,n)),this._events.next(new Ca(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(Ue(K({},t),{sourceControl:n}))}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ul:ll}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t,n){if(this.asyncValidator){this.status=va,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1};let r=Wb(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:n,shouldHaveEmitted:t})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let t=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,t}return!1}setErrors(t,n={}){this.errors=t,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(t){let n=t;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(t,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[t]:null}hasError(t,n){return!!this.getError(t,n)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t,n,r){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),(t||r)&&this._events.next(new Ca(this.status,n)),this._parent&&this._parent._updateControlsErrors(t,n,r)}_initObservables(){this.valueChanges=new Tt,this.statusChanges=new Tt}_calculateStatus(){return this._allControlsDisabled()?ul:this.errors?xf:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(va)?va:this._anyControlsHaveStatus(xf)?xf:ll}_anyControlsHaveStatus(t){return this._anyControls(n=>n.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t,n){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!t.onlySelf&&this._parent._updatePristine(t,n),i&&this._events.next(new fl(this.pristine,n))}_updateTouched(t={},n){this.touched=this._anyControlsTouched(),this._events.next(new hl(this.touched,n)),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,n)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Rf(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let n=this._parent&&this._parent.dirty;return!t&&!!n&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=pF(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=gF(this._rawAsyncValidators)}},Nf=class extends Mf{constructor(t,n,r){super(Yb(n),Zb(r,n)),this.controls=t,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,n){return this.controls[t]?this.controls[t]:(this.controls[t]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(t,n,r={}){this.registerControl(t,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(t,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(t,n,r={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],n&&this.registerControl(t,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,n={}){yF(this,!0,t),Object.keys(t).forEach(r=>{mF(this,!0,r),this.controls[r].setValue(t[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(t,n={}){t!=null&&(Object.keys(t).forEach(r=>{let i=this.controls[r];i&&i.patchValue(t[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(t={},n={}){this._forEachChild((r,i)=>{r.reset(t?t[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(t,n,r)=>(t[r]=n.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&t(r,n)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&t(r))return!0;return!1}_reduceValue(){let t={};return this._reduceChildren(t,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(t,n){let r=t;return this._forEachChild((i,o)=>{r=n(r,i,o)}),r}_allControlsDisabled(){for(let t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}};var a1=new Ie("CallSetDisabledState",{providedIn:"root",factory:()=>c1}),c1="always";function _F(e,t){return[...t.path,e]}function Xb(e,t,n=c1){Qb(e,t),t.valueAccessor.writeValue(e.value),(e.disabled||n==="always")&&t.valueAccessor.setDisabledState?.(e.disabled),vF(e,t),EF(e,t),CF(e,t),wF(e,t)}function Lb(e,t){e.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(t)})}function wF(e,t){if(t.valueAccessor.setDisabledState){let n=r=>{t.valueAccessor.setDisabledState(r)};e.registerOnDisabledChange(n),t._registerOnDestroy(()=>{e._unregisterOnDisabledChange(n)})}}function Qb(e,t){let n=dF(e);t.validator!==null?e.setValidators(Ob(n,t.validator)):typeof n=="function"&&e.setValidators([n]);let r=fF(e);t.asyncValidator!==null?e.setAsyncValidators(Ob(r,t.asyncValidator)):typeof r=="function"&&e.setAsyncValidators([r]);let i=()=>e.updateValueAndValidity();Lb(t._rawValidators,i),Lb(t._rawAsyncValidators,i)}function vF(e,t){t.valueAccessor.registerOnChange(n=>{e._pendingValue=n,e._pendingChange=!0,e._pendingDirty=!0,e.updateOn==="change"&&Kb(e,t)})}function CF(e,t){t.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,e.updateOn==="blur"&&e._pendingChange&&Kb(e,t),e.updateOn!=="submit"&&e.markAsTouched()})}function Kb(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function EF(e,t){let n=(r,i)=>{t.valueAccessor.writeValue(r),i&&t.viewToModelUpdate(r)};e.registerOnChange(n),t._registerOnDestroy(()=>{e._unregisterOnChange(n)})}function IF(e,t){e==null,Qb(e,t)}function bF(e,t){if(!e.hasOwnProperty("model"))return!1;let n=e.model;return n.isFirstChange()?!0:!Object.is(t,n.currentValue)}function xF(e){return Object.getPrototypeOf(e.constructor)===nF}function SF(e,t){e._syncPendingControls(),t.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function AF(e,t){if(!t)return null;Array.isArray(t);let n,r,i;return t.forEach(o=>{o.constructor===qn?n=o:xF(o)?r=o:i=o}),i||r||n||null}var DF={provide:Ea,useExisting:Zo(()=>Vr)},dl=Promise.resolve(),Vr=(()=>{class e extends Ea{get submitted(){return Oi(this.submittedReactive)}constructor(n,r,i){super(),this.callSetDisabledState=i,this._submitted=Vc(()=>this.submittedReactive()),this.submittedReactive=Pc(!1),this._directives=new Set,this.ngSubmit=new Tt,this.form=new Nf({},o1(n),s1(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(n){dl.then(()=>{let r=this._findContainer(n.path);n.control=r.registerControl(n.name,n.control),Xb(n.control,n,this.callSetDisabledState),n.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(n)})}getControl(n){return this.form.get(n.path)}removeControl(n){dl.then(()=>{let r=this._findContainer(n.path);r&&r.removeControl(n.name),this._directives.delete(n)})}addFormGroup(n){dl.then(()=>{let r=this._findContainer(n.path),i=new Nf({});IF(i,n),r.registerControl(n.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(n){dl.then(()=>{let r=this._findContainer(n.path);r&&r.removeControl(n.name)})}getFormGroup(n){return this.form.get(n.path)}updateModel(n,r){dl.then(()=>{this.form.get(n.path).setValue(r)})}setValue(n){this.control.setValue(n)}onSubmit(n){return this.submittedReactive.set(!0),SF(this.form,this._directives),this.ngSubmit.emit(n),n?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(n=void 0){this.form.reset(n),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(n){return n.pop(),n.length?this.form.get(n):this.form}static{this.\u0275fac=function(r){return new(r||e)(ne(i1,10),ne(Hb,10),ne(a1,8))}}static{this.\u0275dir=Hn({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&ee("submit",function(l){return i.onSubmit(l)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Fc([DF]),Mi]})}}return e})();function Fb(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}function Bb(e){return typeof e=="object"&&e!==null&&Object.keys(e).length===2&&"value"in e&&"disabled"in e}var TF=class extends Mf{constructor(t=null,n,r){super(Yb(n),Zb(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Rf(n)&&(n.nonNullable||n.initialValueIsDefault)&&(Bb(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,n={}){this.value=this._pendingValue=t,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(t,n={}){this.setValue(t,n)}reset(t=this.defaultValue,n={}){this._applyFormState(t),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){Fb(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){Fb(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){Bb(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var MF={provide:pl,useExisting:Zo(()=>ir)},Vb=Promise.resolve(),ir=(()=>{class e extends pl{constructor(n,r,i,o,l,h){super(),this._changeDetectorRef=l,this.callSetDisabledState=h,this.control=new TF,this._registered=!1,this.name="",this.update=new Tt,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=AF(this,o)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){let r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),bF(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Xb(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(n){Vb.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){let r=n.isDisabled.currentValue,i=r!==0&&Bc(r);Vb.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?_F(n,this._parent):[n]}static{this.\u0275fac=function(r){return new(r||e)(ne(Ea,9),ne(i1,10),ne(Hb,10),ne(jb,10),ne(Ri,8),ne(a1,8))}}static{this.\u0275dir=Hn({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Fc([MF]),Mi,Si]})}}return e})(),ii=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275dir=Hn({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return e})();var NF=(()=>{class e{constructor(){this._validator=Rb}ngOnChanges(n){if(this.inputName in n){let r=this.normalizeInput(n[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):Rb,this._onChange&&this._onChange()}}validate(n){return this._validator(n)}registerOnValidatorChange(n){this._onChange=n}enabled(n){return n!=null}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275dir=Hn({type:e,features:[Si]})}}return e})();var RF={provide:i1,useExisting:Zo(()=>or),multi:!0};var or=(()=>{class e extends NF{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=Bc,this.createValidator=n=>aF}enabled(n){return n}static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=ia(e)))(i||e)}})()}static{this.\u0275dir=Hn({type:e,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&Xd("required",i._enabled?"":null)},inputs:{required:"required"},features:[Fc([RF]),Mi]})}}return e})();var OF=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=Ei({type:e})}static{this.\u0275inj=Ci({})}}return e})();var bn=(()=>{class e{static withConfig(n){return{ngModule:e,providers:[{provide:a1,useValue:n.callSetDisabledState??c1}]}}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=Ei({type:e})}static{this.\u0275inj=Ci({imports:[OF]})}}return e})();var u1={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};var Y=function(e,t){if(!e)throw rs(t)},rs=function(e){return new Error("Firebase Database ("+u1.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)};var ex=function(e){let t=[],n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},PF=function(e){let t=[],n=0,r=0;for(;n<e.length;){let i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=e[n++];t[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=e[n++],l=e[n++],h=e[n++],g=((i&7)<<18|(o&63)<<12|(l&63)<<6|h&63)-65536;t[r++]=String.fromCharCode(55296+(g>>10)),t[r++]=String.fromCharCode(56320+(g&1023))}else{let o=e[n++],l=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|l&63)}}return t.join("")},Pf={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){let o=e[i],l=i+1<e.length,h=l?e[i+1]:0,g=i+2<e.length,m=g?e[i+2]:0,C=o>>2,E=(o&3)<<4|h>>4,x=(h&15)<<2|m>>6,D=m&63;g||(D=64,l||(x=64)),r.push(n[C],n[E],n[x],n[D])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(ex(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):PF(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();let n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){let o=n[e.charAt(i++)],h=i<e.length?n[e.charAt(i)]:0;++i;let m=i<e.length?n[e.charAt(i)]:64;++i;let E=i<e.length?n[e.charAt(i)]:64;if(++i,o==null||h==null||m==null||E==null)throw new d1;let x=o<<2|h>>4;if(r.push(x),m!==64){let D=h<<4&240|m>>2;if(r.push(D),E!==64){let N=m<<6&192|E;r.push(N)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},d1=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},h1=function(e){let t=ex(e);return Pf.encodeByteArray(t,!0)},gl=function(e){return h1(e).replace(/\./g,"")},ml=function(e){try{return Pf.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function tx(e){return nx(void 0,e)}function nx(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:let n=t;return new Date(n.getTime());case Object:e===void 0&&(e={});break;case Array:e=[];break;default:return t}for(let n in t)!t.hasOwnProperty(n)||!kF(n)||(e[n]=nx(e[n],t[n]));return e}function kF(e){return e!=="__proto__"}function LF(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var FF=()=>LF().__FIREBASE_DEFAULTS__,BF=()=>{if(typeof process>"u"||typeof process.env>"u")return;let e=process.env.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},VF=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let t=e&&ml(e[1]);return t&&JSON.parse(t)},p1=()=>{try{return FF()||BF()||VF()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},rx=e=>{var t,n;return(n=(t=p1())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},ix=e=>{let t=rx(e);if(!t)return;let n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);let r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},g1=()=>{var e;return(e=p1())===null||e===void 0?void 0:e.config},ox=e=>{var t;return(t=p1())===null||t===void 0?void 0:t[`_${e}`]};var Fi=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}};function sx(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=t||"demo-project",i=e.iat||0,o=e.sub||e.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let l=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},e);return[gl(JSON.stringify(n)),gl(JSON.stringify(l)),""].join(".")}function Ur(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function yl(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ur())}function ax(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function cx(){let e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function kf(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function si(){return u1.NODE_CLIENT===!0||u1.NODE_ADMIN===!0}function lx(){try{return typeof indexedDB=="object"}catch{return!1}}function ux(){return new Promise((e,t)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;t(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){t(n)}})}var UF="FirebaseError",oi=class e extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=UF,Object.setPrototypeOf(this,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Bi.prototype.create)}},Bi=class{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){let r=n[0]||{},i=`${this.service}/${t}`,o=this.errors[t],l=o?jF(o,r):"Error",h=`${this.serviceName}: ${l} (${i}).`;return new oi(i,h,r)}};function jF(e,t){return e.replace(HF,(n,r)=>{let i=t[r];return i!=null?String(i):`<${r}?>`})}var HF=/\{\$([^}]+)}/g;function xa(e){return JSON.parse(e)}function Gt(e){return JSON.stringify(e)}var dx=function(e){let t={},n={},r={},i="";try{let o=e.split(".");t=xa(ml(o[0])||""),n=xa(ml(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch{}return{header:t,claims:n,data:r,signature:i}};var fx=function(e){let t=dx(e),n=t.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},hx=function(e){let t=dx(e).claims;return typeof t=="object"&&t.admin===!0};function jr(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function is(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]}function Lf(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function _l(e,t,n){let r={};for(let i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function wl(e,t){if(e===t)return!0;let n=Object.keys(e),r=Object.keys(t);for(let i of n){if(!r.includes(i))return!1;let o=e[i],l=t[i];if(Jb(o)&&Jb(l)){if(!wl(o,l))return!1}else if(o!==l)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function Jb(e){return e!==null&&typeof e=="object"}function vl(e){let t=[];for(let[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(i=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}var Of=class{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(t,n){n||(n=0);let r=this.W_;if(typeof t=="string")for(let E=0;E<16;E++)r[E]=t.charCodeAt(n)<<24|t.charCodeAt(n+1)<<16|t.charCodeAt(n+2)<<8|t.charCodeAt(n+3),n+=4;else for(let E=0;E<16;E++)r[E]=t[n]<<24|t[n+1]<<16|t[n+2]<<8|t[n+3],n+=4;for(let E=16;E<80;E++){let x=r[E-3]^r[E-8]^r[E-14]^r[E-16];r[E]=(x<<1|x>>>31)&4294967295}let i=this.chain_[0],o=this.chain_[1],l=this.chain_[2],h=this.chain_[3],g=this.chain_[4],m,C;for(let E=0;E<80;E++){E<40?E<20?(m=h^o&(l^h),C=1518500249):(m=o^l^h,C=1859775393):E<60?(m=o&l|h&(o|l),C=2400959708):(m=o^l^h,C=3395469782);let x=(i<<5|i>>>27)+m+g+C+r[E]&4294967295;g=h,h=l,l=(o<<30|o>>>2)&4294967295,o=i,i=x}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+l&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+g&4294967295}update(t,n){if(t==null)return;n===void 0&&(n=t.length);let r=n-this.blockSize,i=0,o=this.buf_,l=this.inbuf_;for(;i<n;){if(l===0)for(;i<=r;)this.compress_(t,i),i+=this.blockSize;if(typeof t=="string"){for(;i<n;)if(o[l]=t.charCodeAt(i),++l,++i,l===this.blockSize){this.compress_(o),l=0;break}}else for(;i<n;)if(o[l]=t[i],++l,++i,l===this.blockSize){this.compress_(o),l=0;break}}this.inbuf_=l,this.total_+=n}digest(){let t=[],n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let o=24;o>=0;o-=8)t[r]=this.chain_[i]>>o&255,++r;return t}};function px(e,t){let n=new f1(e,t);return n.subscribe.bind(n)}var f1=class{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,r){let i;if(t===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");zF(t,["next","error","complete"])?i=t:i={next:t,error:n,complete:r},i.next===void 0&&(i.next=l1),i.error===void 0&&(i.error=l1),i.complete===void 0&&(i.complete=l1);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function zF(e,t){if(typeof e!="object"||e===null)return!1;for(let n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function l1(){}function Cl(e,t){return`${e} failed: ${t} argument `}var gx=function(e){let t=[],n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);if(i>=55296&&i<=56319){let o=i-55296;r++,Y(r<e.length,"Surrogate pair missing trail surrogate.");let l=e.charCodeAt(r)-56320;i=65536+(o<<10)+l}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},El=function(e){let t=0;for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};var $$=4*60*60*1e3;function Yn(e){return e&&e._delegate?e._delegate:e}var mr=class{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}};var os="[DEFAULT]";var Ff=class{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){let n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){let r=new Fi;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;let r=this.normalizeInstanceIdentifier(t?.identifier),i=(n=t?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(GF(t))try{this.getOrInitializeService({instanceIdentifier:os})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(t=os){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}delete(){return X(this,null,function*(){let t=Array.from(this.instances.values());yield Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(t=os){return this.instances.has(t)}getOptions(t=os){return this.instancesOptions.get(t)||{}}initialize(t={}){let{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[o,l]of this.instancesDeferred.entries()){let h=this.normalizeInstanceIdentifier(o);r===h&&l.resolve(i)}return i}onInit(t,n){var r;let i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(t),this.onInitCallbacks.set(i,o);let l=this.instances.get(i);return l&&t(l,i),()=>{o.delete(t)}}invokeOnInitCallbacks(t,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:WF(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=os){return this.component?this.component.multipleInstances?t:os:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function WF(e){return e===os?void 0:e}function GF(e){return e.instantiationMode==="EAGER"}var Il=class{constructor(t){this.name=t,this.providers=new Map}addComponent(t){let n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);let n=new Ff(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}};var $F=[],mt=function(e){return e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT",e}(mt||{}),qF={debug:mt.DEBUG,verbose:mt.VERBOSE,info:mt.INFO,warn:mt.WARN,error:mt.ERROR,silent:mt.SILENT},YF=mt.INFO,ZF={[mt.DEBUG]:"log",[mt.VERBOSE]:"log",[mt.INFO]:"info",[mt.WARN]:"warn",[mt.ERROR]:"error"},XF=(e,t,...n)=>{if(t<e.logLevel)return;let r=new Date().toISOString(),i=ZF[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)},go=class{constructor(t){this.name=t,this._logLevel=YF,this._logHandler=XF,this._userLogHandler=null,$F.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in mt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?qF[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,mt.DEBUG,...t),this._logHandler(this,mt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,mt.VERBOSE,...t),this._logHandler(this,mt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,mt.INFO,...t),this._logHandler(this,mt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,mt.WARN,...t),this._logHandler(this,mt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,mt.ERROR,...t),this._logHandler(this,mt.ERROR,...t)}};var QF=(e,t)=>t.some(n=>e instanceof n),mx,yx;function KF(){return mx||(mx=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function JF(){return yx||(yx=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var _x=new WeakMap,y1=new WeakMap,wx=new WeakMap,m1=new WeakMap,w1=new WeakMap;function e8(e){let t=new Promise((n,r)=>{let i=()=>{e.removeEventListener("success",o),e.removeEventListener("error",l)},o=()=>{n(ai(e.result)),i()},l=()=>{r(e.error),i()};e.addEventListener("success",o),e.addEventListener("error",l)});return t.then(n=>{n instanceof IDBCursor&&_x.set(n,e)}).catch(()=>{}),w1.set(t,e),t}function t8(e){if(y1.has(e))return;let t=new Promise((n,r)=>{let i=()=>{e.removeEventListener("complete",o),e.removeEventListener("error",l),e.removeEventListener("abort",l)},o=()=>{n(),i()},l=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",o),e.addEventListener("error",l),e.addEventListener("abort",l)});y1.set(e,t)}var _1={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return y1.get(e);if(t==="objectStoreNames")return e.objectStoreNames||wx.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ai(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function vx(e){_1=e(_1)}function n8(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){let r=e.call(Bf(this),t,...n);return wx.set(r,t.sort?t.sort():[t]),ai(r)}:JF().includes(e)?function(...t){return e.apply(Bf(this),t),ai(_x.get(this))}:function(...t){return ai(e.apply(Bf(this),t))}}function r8(e){return typeof e=="function"?n8(e):(e instanceof IDBTransaction&&t8(e),QF(e,KF())?new Proxy(e,_1):e)}function ai(e){if(e instanceof IDBRequest)return e8(e);if(m1.has(e))return m1.get(e);let t=r8(e);return t!==e&&(m1.set(e,t),w1.set(t,e)),t}var Bf=e=>w1.get(e);function Ex(e,t,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){let l=indexedDB.open(e,t),h=ai(l);return r&&l.addEventListener("upgradeneeded",g=>{r(ai(l.result),g.oldVersion,g.newVersion,ai(l.transaction),g)}),n&&l.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),h.then(g=>{o&&g.addEventListener("close",()=>o()),i&&g.addEventListener("versionchange",m=>i(m.oldVersion,m.newVersion,m))}).catch(()=>{}),h}var i8=["get","getKey","getAll","getAllKeys","count"],o8=["put","add","delete","clear"],v1=new Map;function Cx(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(v1.get(t))return v1.get(t);let n=t.replace(/FromIndex$/,""),r=t!==n,i=o8.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||i8.includes(n)))return;let o=function(l,...h){return X(this,null,function*(){let g=this.transaction(l,i?"readwrite":"readonly"),m=g.store;return r&&(m=m.index(h.shift())),(yield Promise.all([m[n](...h),i&&g.done]))[0]})};return v1.set(t,o),o}vx(e=>Ue(K({},e),{get:(t,n,r)=>Cx(t,n)||e.get(t,n,r),has:(t,n)=>!!Cx(t,n)||e.has(t,n)}));var E1=class{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(s8(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function s8(e){let t=e.getComponent();return t?.type==="VERSION"}var I1="@firebase/app",Ix="0.10.12";var Vi=new go("@firebase/app"),a8="@firebase/app-compat",c8="@firebase/analytics-compat",l8="@firebase/analytics",u8="@firebase/app-check-compat",d8="@firebase/app-check",f8="@firebase/auth",h8="@firebase/auth-compat",p8="@firebase/database",g8="@firebase/data-connect",m8="@firebase/database-compat",y8="@firebase/functions",_8="@firebase/functions-compat",w8="@firebase/installations",v8="@firebase/installations-compat",C8="@firebase/messaging",E8="@firebase/messaging-compat",I8="@firebase/performance",b8="@firebase/performance-compat",x8="@firebase/remote-config",S8="@firebase/remote-config-compat",A8="@firebase/storage",D8="@firebase/storage-compat",T8="@firebase/firestore",M8="@firebase/vertexai-preview",N8="@firebase/firestore-compat",R8="firebase",O8="10.14.0";var b1="[DEFAULT]",P8={[I1]:"fire-core",[a8]:"fire-core-compat",[l8]:"fire-analytics",[c8]:"fire-analytics-compat",[d8]:"fire-app-check",[u8]:"fire-app-check-compat",[f8]:"fire-auth",[h8]:"fire-auth-compat",[p8]:"fire-rtdb",[g8]:"fire-data-connect",[m8]:"fire-rtdb-compat",[y8]:"fire-fn",[_8]:"fire-fn-compat",[w8]:"fire-iid",[v8]:"fire-iid-compat",[C8]:"fire-fcm",[E8]:"fire-fcm-compat",[I8]:"fire-perf",[b8]:"fire-perf-compat",[x8]:"fire-rc",[S8]:"fire-rc-compat",[A8]:"fire-gcs",[D8]:"fire-gcs-compat",[T8]:"fire-fst",[N8]:"fire-fst-compat",[M8]:"fire-vertex","fire-js":"fire-js",[R8]:"fire-js-all"};var Vf=new Map,k8=new Map,x1=new Map;function bx(e,t){try{e.container.addComponent(t)}catch(n){Vi.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function yo(e){let t=e.name;if(x1.has(t))return Vi.debug(`There were multiple attempts to register component ${t}.`),!1;x1.set(t,e);for(let n of Vf.values())bx(n,e);for(let n of k8.values())bx(n,e);return!0}function T1(e,t){let n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Sa(e){return e.settings!==void 0}var L8={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},mo=new Bi("app","Firebase",L8);var S1=class{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new mr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw mo.create("app-deleted",{appName:this._name})}};var Aa=O8;function Be(e,t={}){let n=e;typeof t!="object"&&(t={name:t});let r=Object.assign({name:b1,automaticDataCollectionEnabled:!1},t),i=r.name;if(typeof i!="string"||!i)throw mo.create("bad-app-name",{appName:String(i)});if(n||(n=g1()),!n)throw mo.create("no-options");let o=Vf.get(i);if(o){if(wl(n,o.options)&&wl(r,o.config))return o;throw mo.create("duplicate-app",{appName:i})}let l=new Il(i);for(let g of x1.values())l.addComponent(g);let h=new S1(n,r,l);return Vf.set(i,h),h}function M1(e=b1){let t=Vf.get(e);if(!t&&e===b1&&g1())return Be();if(!t)throw mo.create("no-app",{appName:e});return t}function yr(e,t,n){var r;let i=(r=P8[e])!==null&&r!==void 0?r:e;n&&(i+=`-${n}`);let o=i.match(/\s|\//),l=t.match(/\s|\//);if(o||l){let h=[`Unable to register library "${i}" with version "${t}":`];o&&h.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&l&&h.push("and"),l&&h.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Vi.warn(h.join(" "));return}yo(new mr(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}var F8="firebase-heartbeat-database",B8=1,bl="firebase-heartbeat-store",C1=null;function Dx(){return C1||(C1=Ex(F8,B8,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(bl)}catch(n){console.warn(n)}}}}).catch(e=>{throw mo.create("idb-open",{originalErrorMessage:e.message})})),C1}function V8(e){return X(this,null,function*(){try{let n=(yield Dx()).transaction(bl),r=yield n.objectStore(bl).get(Tx(e));return yield n.done,r}catch(t){if(t instanceof oi)Vi.warn(t.message);else{let n=mo.create("idb-get",{originalErrorMessage:t?.message});Vi.warn(n.message)}}})}function xx(e,t){return X(this,null,function*(){try{let r=(yield Dx()).transaction(bl,"readwrite");yield r.objectStore(bl).put(t,Tx(e)),yield r.done}catch(n){if(n instanceof oi)Vi.warn(n.message);else{let r=mo.create("idb-set",{originalErrorMessage:n?.message});Vi.warn(r.message)}}})}function Tx(e){return`${e.name}!${e.options.appId}`}var U8=1024,j8=30*24*60*60*1e3,A1=class{constructor(t){this.container=t,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new D1(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return X(this,null,function*(){var t,n;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=Sx();return((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(l=>l.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(l=>{let h=new Date(l.date).valueOf();return Date.now()-h<=j8}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Vi.warn(r)}})}getHeartbeatsHeader(){return X(this,null,function*(){var t;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=Sx(),{heartbeatsToSend:r,unsentEntries:i}=H8(this._heartbeatsCache.heartbeats),o=gl(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Vi.warn(n),""}})}};function Sx(){return new Date().toISOString().substring(0,10)}function H8(e,t=U8){let n=[],r=e.slice();for(let i of e){let o=n.find(l=>l.agent===i.agent);if(o){if(o.dates.push(i.date),Ax(n)>t){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Ax(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var D1=class{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return X(this,null,function*(){return lx()?ux().then(()=>!0).catch(()=>!1):!1})}read(){return X(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield V8(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(t){return X(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return xx(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return})}add(t){return X(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return xx(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return})}};function Ax(e){return gl(JSON.stringify({version:2,heartbeats:e})).length}function z8(e){yo(new mr("platform-logger",t=>new E1(t),"PRIVATE")),yo(new mr("heartbeat",t=>new A1(t),"PRIVATE")),yr(I1,Ix,e),yr(I1,Ix,"esm2017"),yr("fire-js","")}z8("");var W8="firebase",G8="10.14.0";yr(W8,G8,"app");var Mx="@firebase/database",Nx="1.0.8";var Oy="";function $8(e){Oy=e}var B1=class{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,n){n==null?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Gt(n))}get(t){let n=this.domStorage_.getItem(this.prefixedName_(t));return n==null?null:xa(n)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}};var V1=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,n){n==null?delete this.cache_[t]:this.cache_[t]=n}get(t){return jr(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}};var cS=function(e){try{if(typeof window<"u"&&typeof window[e]<"u"){let t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new B1(t)}}catch{}return new V1},as=cS("localStorage"),U1=cS("sessionStorage");var Ma=new go("@firebase/database"),q8=function(){let e=1;return function(){return e++}}(),lS=function(e){let t=gx(e),n=new Of;n.update(t);let r=n.digest();return Pf.encodeByteArray(r)},Wl=function(...e){let t="";for(let n=0;n<e.length;n++){let r=e[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?t+=Wl.apply(null,r):typeof r=="object"?t+=Gt(r):t+=r,t+=" "}return t},cs=null,Rx=!0,Y8=function(e,t){Y(!t||e===!0||e===!1,"Can't turn on custom loggers persistently."),e===!0?(Ma.logLevel=mt.VERBOSE,cs=Ma.log.bind(Ma),t&&U1.set("logging_enabled",!0)):typeof e=="function"?cs=e:(cs=null,U1.remove("logging_enabled"))},mn=function(...e){if(Rx===!0&&(Rx=!1,cs===null&&U1.get("logging_enabled")===!0&&Y8(!0)),cs){let t=Wl.apply(null,e);cs(t)}},Gl=function(e){return function(...t){mn(e,...t)}},j1=function(...e){let t="FIREBASE INTERNAL ERROR: "+Wl(...e);Ma.error(t)},Ui=function(...e){let t=`FIREBASE FATAL ERROR: ${Wl(...e)}`;throw Ma.error(t),new Error(t)},Rn=function(...e){let t="FIREBASE WARNING: "+Wl(...e);Ma.warn(t)},Z8=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Rn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Py=function(e){return typeof e=="number"&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},X8=function(e){if(si()||document.readyState==="complete")e();else{let t=!1,n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}t||(t=!0,e())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Ra="[MIN_NAME]",ls="[MAX_NAME]",ds=function(e,t){if(e===t)return 0;if(e===Ra||t===ls)return-1;if(t===Ra||e===ls)return 1;{let n=Ox(e),r=Ox(t);return n!==null?r!==null?n-r===0?e.length-t.length:n-r:-1:r!==null?1:e<t?-1:1}},Q8=function(e,t){return e===t?0:e<t?-1:1},xl=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+Gt(t))},ky=function(e){if(typeof e!="object"||e===null)return Gt(e);let t=[];for(let r in e)t.push(r);t.sort();let n="{";for(let r=0;r<t.length;r++)r!==0&&(n+=","),n+=Gt(t[r]),n+=":",n+=ky(e[t[r]]);return n+="}",n},uS=function(e,t){let n=e.length;if(n<=t)return[e];let r=[];for(let i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function yn(e,t){for(let n in e)e.hasOwnProperty(n)&&t(n,e[n])}var dS=function(e){Y(!Py(e),"Invalid JSON number");let t=11,n=52,r=(1<<t-1)-1,i,o,l,h,g;e===0?(o=0,l=0,i=1/e===-1/0?1:0):(i=e<0,e=Math.abs(e),e>=Math.pow(2,1-r)?(h=Math.min(Math.floor(Math.log(e)/Math.LN2),r),o=h+r,l=Math.round(e*Math.pow(2,n-h)-Math.pow(2,n))):(o=0,l=Math.round(e/Math.pow(2,1-r-n))));let m=[];for(g=n;g;g-=1)m.push(l%2?1:0),l=Math.floor(l/2);for(g=t;g;g-=1)m.push(o%2?1:0),o=Math.floor(o/2);m.push(i?1:0),m.reverse();let C=m.join(""),E="";for(g=0;g<64;g+=8){let x=parseInt(C.substr(g,8),2).toString(16);x.length===1&&(x="0"+x),E=E+x}return E.toLowerCase()},K8=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},J8=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function e4(e,t){let n="Unknown Error";e==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":e==="permission_denied"?n="Client doesn't have permission to access the desired data.":e==="unavailable"&&(n="The service is unavailable");let r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}var t4=new RegExp("^-?(0*)\\d{1,10}$"),n4=-2147483648,r4=2147483647,Ox=function(e){if(t4.test(e)){let t=Number(e);if(t>=n4&&t<=r4)return t}return null},Ua=function(e){try{e()}catch(t){setTimeout(()=>{let n=t.stack||"";throw Rn("Exception was thrown by user callback.",n),t},Math.floor(0))}},i4=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Ml=function(e,t){let n=setTimeout(e,t);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};var H1=class{constructor(t,n){this.appName_=t,this.appCheckProvider=n,this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(r=>this.appCheck=r)}getToken(t){return this.appCheck?this.appCheck.getToken(t):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(n,r):n(null)},0)})}addTokenChangeListener(t){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(t))}notifyForInvalidToken(){Rn(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var z1=class{constructor(t,n,r){this.appName_=t,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(n=>n&&n.code==="auth/token-not-initialized"?(mn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(n,r):n(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(n=>n.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(n=>n.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Rn(t)}},Nl=(()=>{class e{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}e.OWNER="owner";return e})(),jf="5",fS="v",hS="s",pS="r",gS="f",mS=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,yS="ls",_S="p",W1="ac",wS="websocket",vS="long_polling";var Hf=class{constructor(t,n,r,i,o=!1,l="",h=!1,g=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=o,this.persistenceKey=l,this.includeNamespaceInQueryParams=h,this.isUsingEmulator=g,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=as.get("host:"+t)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&as.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){let t=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${t}${this.host}/${n}`}};function o4(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams}function CS(e,t,n){Y(typeof t=="string","typeof type must == string"),Y(typeof n=="object","typeof params must == object");let r;if(t===wS)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else if(t===vS)r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+t);o4(e)&&(n.ns=e.namespace);let i=[];return yn(n,(o,l)=>{i.push(o+"="+l)}),r+i.join("&")}var G1=class{constructor(){this.counters_={}}incrementCounter(t,n=1){jr(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=n}get(){return tx(this.counters_)}};var N1={},R1={};function Ly(e){let t=e.toString();return N1[t]||(N1[t]=new G1),N1[t]}function s4(e,t){let n=e.toString();return R1[n]||(R1[n]=t()),R1[n]}var $1=class{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,n){this.closeAfterResponse=t,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,n){for(this.pendingResponses[t]=n;this.pendingResponses[this.currentResponseNum];){let r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Ua(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var Px="start",a4="close",c4="pLPCommand",l4="pRTLPCB",ES="id",IS="pw",bS="ser",u4="cb",d4="seg",f4="ts",h4="d",p4="dframe",xS=1870,SS=30,g4=xS-SS,m4=25e3,y4=3e4,q1=class e{constructor(t,n,r,i,o,l,h){this.connId=t,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.transportSessionId=l,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Gl(t),this.stats_=Ly(n),this.urlFn=g=>(this.appCheckToken&&(g[W1]=this.appCheckToken),CS(n,vS,g))}open(t,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new $1(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(y4)),X8(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Y1((...o)=>{let[l,h,g,m,C]=o;if(this.incrementIncomingBytes_(o),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,l===Px)this.id=h,this.password=g;else if(l===a4)h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+l)},(...o)=>{let[l,h]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(l,h)},()=>{this.onClosed_()},this.urlFn);let r={};r[Px]="t",r[bS]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[u4]=this.scriptTagHolder.uniqueCallbackIdentifier),r[fS]=jf,this.transportSessionId&&(r[hS]=this.transportSessionId),this.lastSessionId&&(r[yS]=this.lastSessionId),this.applicationId&&(r[_S]=this.applicationId),this.appCheckToken&&(r[W1]=this.appCheckToken),typeof location<"u"&&location.hostname&&mS.test(location.hostname)&&(r[pS]=gS);let i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){e.forceAllow_=!0}static forceDisallow(){e.forceDisallow_=!0}static isAvailable(){return si()?!1:e.forceAllow_?!0:!e.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!K8()&&!J8()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){let n=Gt(t);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);let r=h1(n),i=uS(r,g4);for(let o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++}addDisconnectPingFrame(t,n){if(si())return;this.myDisconnFrame=document.createElement("iframe");let r={};r[p4]="t",r[ES]=t,r[IS]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){let n=Gt(t).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}},Y1=class e{constructor(t,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,si())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=q8(),window[c4+this.uniqueCallbackIdentifier]=t,window[l4+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();let o="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(o='<script>document.domain="'+document.domain+'";<\/script>');let l="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(h){mn("frame writing exception"),h.stack&&mn(h.stack),mn(h)}}}static createIFrame_(){let t=document.createElement("iframe");if(t.style.display="none",document.body){document.body.appendChild(t);try{t.contentWindow.document||mn("No IE domain setting required")}catch{let r=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,n){for(this.myID=t,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let t={};t[ES]=this.myID,t[IS]=this.myPW,t[bS]=this.currentSerial;let n=this.urlFn(t),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+SS+r.length<=xS;){let l=this.pendingSegs.shift();r=r+"&"+d4+i+"="+l.seg+"&"+f4+i+"="+l.ts+"&"+h4+i+"="+l.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(t,n,r){this.pendingSegs.push({seg:t,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(t,n){this.outstandingRequests.add(n);let r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(m4)),o=()=>{clearTimeout(i),r()};this.addTag(t,o)}addTag(t,n){si()?this.doNodeLongPoll(t,n):setTimeout(()=>{try{if(!this.sendNewPolls)return;let r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){let i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{mn("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}};var _4=16384,w4=45e3,zf=null;typeof MozWebSocket<"u"?zf=MozWebSocket:typeof WebSocket<"u"&&(zf=WebSocket);var Sl=(()=>{class e{constructor(n,r,i,o,l,h,g){this.connId=n,this.applicationId=i,this.appCheckToken=o,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Gl(this.connId),this.stats_=Ly(r),this.connURL=e.connectionURL_(r,h,g,o,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(n,r,i,o,l){let h={};return h[fS]=jf,!si()&&typeof location<"u"&&location.hostname&&mS.test(location.hostname)&&(h[pS]=gS),r&&(h[hS]=r),i&&(h[yS]=i),o&&(h[W1]=o),l&&(h[_S]=l),CS(n,wS,h)}open(n,r){this.onDisconnect=r,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,as.set("previous_websocket_failure",!0);try{let i;if(si()){let o=this.nodeAdmin?"AdminNode":"Node";i={headers:{"User-Agent":`Firebase/${jf}/${Oy}/${process.platform}/${o}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);let l=process.env,h=this.connURL.indexOf("wss://")===0?l.HTTPS_PROXY||l.https_proxy:l.HTTP_PROXY||l.http_proxy;h&&(i.proxy={origin:h})}this.mySock=new zf(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");let o=i.message||i.data;o&&this.log_(o),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");let o=i.message||i.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){e.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){let r=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(r);i&&i.length>1&&parseFloat(i[1])<4.4&&(n=!0)}return!n&&zf!==null&&!e.forceDisallow_}static previouslyFailed(){return as.isInMemoryStorage||as.get("previous_websocket_failure")===!0}markConnectionHealthy(){as.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){let r=this.frames.join("");this.frames=null;let i=xa(r);this.onMessage(i)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if(Y(this.frames===null,"We already have a frame buffer"),n.length<=6){let r=Number(n);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(this.mySock===null)return;let r=n.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{let i=this.extractFrameCount_(r);i!==null&&this.appendFrame_(i)}}send(n){this.resetKeepAlive();let r=Gt(n);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);let i=uS(r,_4);i.length>1&&this.sendString_(String(i.length));for(let o=0;o<i.length;o++)this.sendString_(i[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(w4))}sendString_(n){try{this.mySock.send(n)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}e.responsesRequiredToBeHealthy=2,e.healthyTimeout=3e4;return e})(),v4=(()=>{class e{constructor(n){this.initTransports_(n)}static get ALL_TRANSPORTS(){return[q1,Sl]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(n){let r=Sl&&Sl.isAvailable(),i=r&&!Sl.previouslyFailed();if(n.webSocketOnly&&(r||Rn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Sl];else{let o=this.transports_=[];for(let l of e.ALL_TRANSPORTS)l&&l.isAvailable()&&o.push(l);e.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}e.globalTransportInitialized_=!1;return e})(),C4=6e4,E4=5e3,I4=10*1024,b4=100*1024,O1="t",kx="d",x4="s",Lx="r",S4="e",Fx="o",Bx="a",Vx="n",Ux="p",A4="h",Z1=class{constructor(t,n,r,i,o,l,h,g,m,C){this.id=t,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=o,this.onMessage_=l,this.onReady_=h,this.onDisconnect_=g,this.onKill_=m,this.lastSessionId=C,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Gl("c:"+this.id+":"),this.transportManager_=new v4(n),this.log_("Connection created"),this.start_()}start_(){let t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));let i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=Ml(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>b4?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>I4?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return n=>{t===this.conn_?this.onConnectionLost_(n):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return n=>{this.state_!==2&&(t===this.rx_?this.onPrimaryMessageReceived_(n):t===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(t){let n={t:"d",d:t};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if(O1 in t){let n=t[O1];n===Bx?this.upgradeIfSecondaryHealthy_():n===Lx?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===Fx&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){let n=xl("t",t),r=xl("d",t);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Ux,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Bx,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Vx,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){let n=xl("t",t),r=xl("d",t);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){let n=xl(O1,t);if(kx in t){let r=t[kx];if(n===A4){let i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===Vx){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===x4?this.onConnectionShutdown_(r):n===Lx?this.onReset_(r):n===S4?j1("Server Error: "+r):n===Fx?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):j1("Unknown control packet command: "+n)}}onHandshake_(t){let n=t.ts,r=t.v,i=t.h;this.sessionId=t.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),jf!==r&&Rn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Ml(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(C4))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,n){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Ml(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(E4))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Ux,d:{}}}))}onSecondaryConnectionLost_(){let t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,!t&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(as.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(t)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var Wf=class{put(t,n,r,i){}merge(t,n,r,i){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,n,r){}onDisconnectMerge(t,n,r){}onDisconnectCancel(t,n){}reportStats(t){}};var Gf=class{constructor(t){this.allowedEvents_=t,this.listeners_={},Y(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...n){if(Array.isArray(this.listeners_[t])){let r=[...this.listeners_[t]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(t,n,r){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:n,context:r});let i=this.getInitialEvent(t);i&&n.apply(r,i)}off(t,n,r){this.validateEventType_(t);let i=this.listeners_[t]||[];for(let o=0;o<i.length;o++)if(i[o].callback===n&&(!r||r===i[o].context)){i.splice(o,1);return}}validateEventType_(t){Y(this.allowedEvents_.find(n=>n===t),"Unknown event: "+t)}};var $f=class e extends Gf{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!yl()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new e}getInitialEvent(t){return Y(t==="online","Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}};var jx=32,Hx=768,ft=class{constructor(t,n){if(n===void 0){this.pieces_=t.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}toString(){let t="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(t+="/"+this.pieces_[n]);return t||"/"}};function nt(){return new ft("")}function je(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function Co(e){return e.pieces_.length-e.pieceNum_}function bt(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new ft(e.pieces_,t)}function Fy(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function D4(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)e.pieces_[n]!==""&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}function kl(e,t=0){return e.pieces_.slice(e.pieceNum_+t)}function AS(e){if(e.pieceNum_>=e.pieces_.length)return null;let t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new ft(t,0)}function Pt(e,t){let n=[];for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof ft)for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else{let r=t.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new ft(n,0)}function Ge(e){return e.pieceNum_>=e.pieces_.length}function Nn(e,t){let n=je(e),r=je(t);if(n===null)return t;if(n===r)return Nn(bt(e),bt(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function T4(e,t){let n=kl(e,0),r=kl(t,0);for(let i=0;i<n.length&&i<r.length;i++){let o=ds(n[i],r[i]);if(o!==0)return o}return n.length===r.length?0:n.length<r.length?-1:1}function By(e,t){if(Co(e)!==Co(t))return!1;for(let n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function _r(e,t){let n=e.pieceNum_,r=t.pieceNum_;if(Co(e)>Co(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}var X1=class{constructor(t,n){this.errorPrefix_=n,this.parts_=kl(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=El(this.parts_[r]);DS(this)}};function M4(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=El(t),DS(e)}function N4(e){let t=e.parts_.pop();e.byteLength_-=El(t),e.parts_.length>0&&(e.byteLength_-=1)}function DS(e){if(e.byteLength_>Hx)throw new Error(e.errorPrefix_+"has a key path longer than "+Hx+" bytes ("+e.byteLength_+").");if(e.parts_.length>jx)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+jx+") or object contains a cycle "+ss(e))}function ss(e){return e.parts_.length===0?"":"in property '"+e.parts_.join(".")+"'"}var Q1=class e extends Gf{constructor(){super(["visible"]);let t,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{let r=!document[t];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new e}getInitialEvent(t){return Y(t==="visible","Unknown event type: "+t),[this.visible_]}};var Al=1e3,R4=60*5*1e3,zx=30*1e3,O4=1.3,P4=3e4,k4="server_kill",Wx=3,Vy=(()=>{class e extends Wf{constructor(n,r,i,o,l,h,g,m){if(super(),this.repoInfo_=n,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=o,this.onServerInfoUpdate_=l,this.authTokenProvider_=h,this.appCheckTokenProvider_=g,this.authOverride_=m,this.id=e.nextPersistentConnectionId_++,this.log_=Gl("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Al,this.maxReconnectDelay_=R4,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,m&&!si())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Q1.getInstance().on("visible",this.onVisible_,this),n.host.indexOf("fblocal")===-1&&$f.getInstance().on("online",this.onOnline_,this)}sendRequest(n,r,i){let o=++this.requestNumber_,l={r:o,a:n,b:r};this.log_(Gt(l)),Y(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),i&&(this.requestCBHash_[o]=i)}get(n){this.initConnection_();let r=new Fi,o={action:"g",request:{p:n._path.toString(),q:n._queryObject},onComplete:h=>{let g=h.d;h.s==="ok"?r.resolve(g):r.reject(g)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;let l=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(l),r.promise}listen(n,r,i,o){this.initConnection_();let l=n._queryIdentifier,h=n._path.toString();this.log_("Listen called for "+h+" "+l),this.listens.has(h)||this.listens.set(h,new Map),Y(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Y(!this.listens.get(h).has(l),"listen() called twice for same path/queryId.");let g={onComplete:o,hashFn:r,query:n,tag:i};this.listens.get(h).set(l,g),this.connected_&&this.sendListen_(g)}sendGet_(n){let r=this.outstandingGets_[n];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(n){let r=n.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);let l={p:i},h="q";n.tag&&(l.q=r._queryObject,l.t=n.tag),l.h=n.hashFn(),this.sendRequest(h,l,g=>{let m=g.d,C=g.s;e.warnOnListenWarnings_(m,r),(this.listens.get(i)&&this.listens.get(i).get(o))===n&&(this.log_("listen response",g),C!=="ok"&&this.removeListen_(i,o),n.onComplete&&n.onComplete(C,m))})}static warnOnListenWarnings_(n,r){if(n&&typeof n=="object"&&jr(n,"w")){let i=is(n,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){let o='".indexOn": "'+r._queryParams.getIndex().toString()+'"',l=r._path.toString();Rn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&n.length===40||hx(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=zx)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let n=this.authToken_,r=fx(n)?"auth":"gauth",i={cred:n};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(r,i,o=>{let l=o.s,h=o.d||"error";this.authToken_===n&&(l==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,h))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{let r=n.s,i=n.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(n,r){let i=n._path.toString(),o=n._queryIdentifier;this.log_("Unlisten called for "+i+" "+o),Y(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,o)&&this.connected_&&this.sendUnlisten_(i,o,n._queryObject,r)}sendUnlisten_(n,r,i,o){this.log_("Unlisten on "+n+" for "+r);let l={p:n},h="n";o&&(l.q=i,l.t=o),this.sendRequest(h,l)}onDisconnectPut(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:r,onComplete:i})}onDisconnectMerge(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:r,onComplete:i})}onDisconnectCancel(n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(n,r,i,o){let l={p:r,d:i};this.log_("onDisconnect "+n,l),this.sendRequest(n,l,h=>{o&&setTimeout(()=>{o(h.s,h.d)},Math.floor(0))})}put(n,r,i,o){this.putInternal("p",n,r,i,o)}merge(n,r,i,o){this.putInternal("m",n,r,i,o)}putInternal(n,r,i,o,l){this.initConnection_();let h={p:r,d:i};l!==void 0&&(h.h=l),this.outstandingPuts_.push({action:n,request:h,onComplete:o}),this.outstandingPutCount_++;let g=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(g):this.log_("Buffering put: "+r)}sendPut_(n){let r=this.outstandingPuts_[n].action,i=this.outstandingPuts_[n].request,o=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(r,i,l=>{this.log_(r+" response",l),delete this.outstandingPuts_[n],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),o&&o(l.s,l.d)})}reportStats(n){if(this.connected_){let r={c:n};this.log_("reportStats",r),this.sendRequest("s",r,i=>{if(i.s!=="ok"){let l=i.d;this.log_("reportStats","Error sending stats: "+l)}})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+Gt(n));let r=n.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,r){this.log_("handleServerMessage",n,r),n==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):n==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):n==="c"?this.onListenRevoked_(r.p,r.q):n==="ac"?this.onAuthRevoked_(r.s,r.d):n==="apc"?this.onAppCheckRevoked_(r.s,r.d):n==="sd"?this.onSecurityDebugPacket_(r):j1("Unrecognized action received from server: "+Gt(n)+`
Are you using the latest client?`)}onReady_(n,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(n),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){Y(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Al,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=Al,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>P4&&(this.reconnectDelay_=Al),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let n=new Date().getTime()-this.lastConnectionAttemptTime_,r=Math.max(0,this.reconnectDelay_-n);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*O4)}this.onConnectStatus_(!1)}establishConnection_(){return X(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+e.nextConnectionId_++,l=this.lastSessionId,h=!1,g=null,m=function(){g?g.close():(h=!0,i())},C=function(x){Y(g,"sendRequest call when we're not connected not allowed."),g.sendRequest(x)};this.realtime_={close:m,sendRequest:C};let E=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[x,D]=yield Promise.all([this.authTokenProvider_.getToken(E),this.appCheckTokenProvider_.getToken(E)]);h?mn("getToken() completed but was canceled"):(mn("getToken() completed. Creating connection."),this.authToken_=x&&x.accessToken,this.appCheckToken_=D&&D.token,g=new Z1(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,n,r,i,N=>{Rn(N+" ("+this.repoInfo_.toString()+")"),this.interrupt(k4)},l))}catch(x){this.log_("Failed to get token: "+x),h||(this.repoInfo_.nodeAdmin&&Rn(x),m())}}})}interrupt(n){mn("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){mn("Resuming connection for reason: "+n),delete this.interruptReasons_[n],Lf(this.interruptReasons_)&&(this.reconnectDelay_=Al,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){let r=n-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){let r=this.outstandingPuts_[n];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(n,r){let i;r?i=r.map(l=>ky(l)).join("$"):i="default";let o=this.removeListen_(n,i);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(n,r){let i=new ft(n).toString(),o;if(this.listens.has(i)){let l=this.listens.get(i);o=l.get(r),l.delete(r),l.size===0&&this.listens.delete(i)}else o=void 0;return o}onAuthRevoked_(n,r){mn("Auth token revoked: "+n+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(n==="invalid_token"||n==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Wx&&(this.reconnectDelay_=zx,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,r){mn("App check token revoked: "+n+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(n==="invalid_token"||n==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Wx&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let n of this.listens.values())for(let r of n.values())this.sendListen_(r);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){let n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){let n={},r="js";si()&&(this.repoInfo_.nodeAdmin?r="admin_node":r="node"),n["sdk."+r+"."+Oy.replace(/\./g,"-")]=1,yl()?n["framework.cordova"]=1:kf()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){let n=$f.getInstance().currentlyOnline();return Lf(this.interruptReasons_)&&n}}e.nextPersistentConnectionId_=0,e.nextConnectionId_=0;return e})(),He=class e{constructor(t,n){this.name=t,this.node=n}static Wrap(t,n){return new e(t,n)}};var Oa=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,n){let r=new He(Ra,t),i=new He(Ra,n);return this.compare(r,i)!==0}minPost(){return He.MIN}};var Uf,qf=class extends Oa{static get __EMPTY_NODE(){return Uf}static set __EMPTY_NODE(t){Uf=t}compare(t,n){return ds(t.name,n.name)}isDefinedOn(t){throw rs("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,n){return!1}minPost(){return He.MIN}maxPost(){return new He(ls,Uf)}makePost(t,n){return Y(typeof t=="string","KeyIndex indexValue must always be a string."),new He(t,Uf)}toString(){return".key"}},Na=new qf;var Ta=class{constructor(t,n,r,i,o=null){this.isReverse_=i,this.resultGenerator_=o,this.nodeStack_=[];let l=1;for(;!t.isEmpty();)if(t=t,l=n?r(t.key,n):1,i&&(l*=-1),l<0)this.isReverse_?t=t.left:t=t.right;else if(l===0){this.nodeStack_.push(t);break}else this.nodeStack_.push(t),this.isReverse_?t=t.right:t=t.left}getNext(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(t.key,t.value):n={key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}},Hr=(()=>{class e{constructor(n,r,i,o,l){this.key=n,this.value=r,this.color=i??e.RED,this.left=o??wr.EMPTY_NODE,this.right=l??wr.EMPTY_NODE}copy(n,r,i,o,l){return new e(n??this.key,r??this.value,i??this.color,o??this.left,l??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,r,i){let o=this,l=i(n,o.key);return l<0?o=o.copy(null,null,null,o.left.insert(n,r,i),null):l===0?o=o.copy(null,r,null,null,null):o=o.copy(null,null,null,null,o.right.insert(n,r,i)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return wr.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,r){let i,o;if(i=this,r(n,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(n,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),r(n,i.key)===0){if(i.right.isEmpty())return wr.EMPTY_NODE;o=i.right.min_(),i=i.copy(o.key,o.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(n,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){let n=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){let n=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){let n=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,r)}checkMaxDepth_(){let n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}return e.RED=!0,e.BLACK=!1,e})(),K1=class{copy(t,n,r,i,o){return this}insert(t,n,r){return new Hr(t,n,null)}remove(t,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},wr=class e{constructor(t,n=e.EMPTY_NODE){this.comparator_=t,this.root_=n}insert(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,Hr.BLACK,null,null))}remove(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Hr.BLACK,null,null))}get(t){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(t,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(t){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(t,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new Ta(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,n){return new Ta(this.root_,t,this.comparator_,!1,n)}getReverseIteratorFrom(t,n){return new Ta(this.root_,t,this.comparator_,!0,n)}getReverseIterator(t){return new Ta(this.root_,null,this.comparator_,!0,t)}};wr.EMPTY_NODE=new K1;function L4(e,t){return ds(e.name,t.name)}function Uy(e,t){return ds(e,t)}var J1;function F4(e){J1=e}var TS=function(e){return typeof e=="number"?"number:"+dS(e):"string:"+e},MS=function(e){if(e.isLeafNode()){let t=e.val();Y(typeof t=="string"||typeof t=="number"||typeof t=="object"&&jr(t,".sv"),"Priority must be a string or number.")}else Y(e===J1||e.isEmpty(),"priority of unexpected type.");Y(e===J1||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var Gx,Pa=(()=>{class e{constructor(n,r=e.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=r,this.lazyHash_=null,Y(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),MS(this.priorityNode_)}static set __childrenNodeConstructor(n){Gx=n}static get __childrenNodeConstructor(){return Gx}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new e(this.value_,n)}getImmediateChild(n){return n===".priority"?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return Ge(n)?this:je(n)===".priority"?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,r){return null}updateImmediateChild(n,r){return n===".priority"?this.updatePriority(r):r.isEmpty()&&n!==".priority"?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,r).updatePriority(this.priorityNode_)}updateChild(n,r){let i=je(n);return i===null?r:r.isEmpty()&&i!==".priority"?this:(Y(i!==".priority"||Co(n)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(bt(n),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,r){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+TS(this.priorityNode_.val())+":");let r=typeof this.value_;n+=r+":",r==="number"?n+=dS(this.value_):n+=this.value_,this.lazyHash_=lS(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===e.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof e.__childrenNodeConstructor?-1:(Y(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){let r=typeof n.value_,i=typeof this.value_,o=e.VALUE_TYPE_ORDER.indexOf(r),l=e.VALUE_TYPE_ORDER.indexOf(i);return Y(o>=0,"Unknown leaf type: "+r),Y(l>=0,"Unknown leaf type: "+i),o===l?i==="object"?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:l-o}withIndex(){return this}isIndexed(){return!0}equals(n){if(n===this)return!0;if(n.isLeafNode()){let r=n;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}e.VALUE_TYPE_ORDER=["object","boolean","number","string"];return e})(),NS,RS;function B4(e){NS=e}function V4(e){RS=e}var ey=class extends Oa{compare(t,n){let r=t.node.getPriority(),i=n.node.getPriority(),o=r.compareTo(i);return o===0?ds(t.name,n.name):o}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,n){return!t.getPriority().equals(n.getPriority())}minPost(){return He.MIN}maxPost(){return new He(ls,new Pa("[PRIORITY-POST]",RS))}makePost(t,n){let r=NS(t);return new He(n,new Pa("[PRIORITY-POST]",r))}toString(){return".priority"}},kt=new ey;var U4=Math.log(2),ty=class{constructor(t){let n=o=>parseInt(Math.log(o)/U4,10),r=o=>parseInt(Array(o+1).join("1"),2);this.count=n(t+1),this.current_=this.count-1;let i=r(this.count);this.bits_=t+1&i}nextBitIsOne(){let t=!(this.bits_&1<<this.current_);return this.current_--,t}},Yf=function(e,t,n,r){e.sort(t);let i=function(g,m){let C=m-g,E,x;if(C===0)return null;if(C===1)return E=e[g],x=n?n(E):E,new Hr(x,E.node,Hr.BLACK,null,null);{let D=parseInt(C/2,10)+g,N=i(g,D),U=i(D+1,m);return E=e[D],x=n?n(E):E,new Hr(x,E.node,Hr.BLACK,N,U)}},o=function(g){let m=null,C=null,E=e.length,x=function(N,U){let $=E-N,W=E;E-=N;let ie=i($+1,W),ze=e[$],he=n?n(ze):ze;D(new Hr(he,ze.node,U,null,ie))},D=function(N){m?(m.left=N,m=N):(C=N,m=N)};for(let N=0;N<g.count;++N){let U=g.nextBitIsOne(),$=Math.pow(2,g.count-(N+1));U?x($,Hr.BLACK):(x($,Hr.BLACK),x($,Hr.RED))}return C},l=new ty(e.length),h=o(l);return new wr(r||t,h)};var P1,Da={},ka=class e{constructor(t,n){this.indexes_=t,this.indexSet_=n}static get Default(){return Y(Da&&kt,"ChildrenNode.ts has not been loaded"),P1=P1||new e({".priority":Da},{".priority":kt}),P1}get(t){let n=is(this.indexes_,t);if(!n)throw new Error("No index defined for "+t);return n instanceof wr?n:null}hasIndex(t){return jr(this.indexSet_,t.toString())}addIndex(t,n){Y(t!==Na,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let r=[],i=!1,o=n.getIterator(He.Wrap),l=o.getNext();for(;l;)i=i||t.isDefinedOn(l.node),r.push(l),l=o.getNext();let h;i?h=Yf(r,t.getCompare()):h=Da;let g=t.toString(),m=Object.assign({},this.indexSet_);m[g]=t;let C=Object.assign({},this.indexes_);return C[g]=h,new e(C,m)}addToIndexes(t,n){let r=_l(this.indexes_,(i,o)=>{let l=is(this.indexSet_,o);if(Y(l,"Missing index implementation for "+o),i===Da)if(l.isDefinedOn(t.node)){let h=[],g=n.getIterator(He.Wrap),m=g.getNext();for(;m;)m.name!==t.name&&h.push(m),m=g.getNext();return h.push(t),Yf(h,l.getCompare())}else return Da;else{let h=n.get(t.name),g=i;return h&&(g=g.remove(new He(t.name,h))),g.insert(t,t.node)}});return new e(r,this.indexSet_)}removeFromIndexes(t,n){let r=_l(this.indexes_,i=>{if(i===Da)return i;{let o=n.get(t.name);return o?i.remove(new He(t.name,o)):i}});return new e(r,this.indexSet_)}};var Dl,Te=(()=>{class e{constructor(n,r,i){this.children_=n,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&MS(this.priorityNode_),this.children_.isEmpty()&&Y(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Dl||(Dl=new e(new wr(Uy),null,ka.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Dl}updatePriority(n){return this.children_.isEmpty()?this:new e(this.children_,n,this.indexMap_)}getImmediateChild(n){if(n===".priority")return this.getPriority();{let r=this.children_.get(n);return r===null?Dl:r}}getChild(n){let r=je(n);return r===null?this:this.getImmediateChild(r).getChild(bt(n))}hasChild(n){return this.children_.get(n)!==null}updateImmediateChild(n,r){if(Y(r,"We should always be passing snapshot nodes"),n===".priority")return this.updatePriority(r);{let i=new He(n,r),o,l;r.isEmpty()?(o=this.children_.remove(n),l=this.indexMap_.removeFromIndexes(i,this.children_)):(o=this.children_.insert(n,r),l=this.indexMap_.addToIndexes(i,this.children_));let h=o.isEmpty()?Dl:this.priorityNode_;return new e(o,h,l)}}updateChild(n,r){let i=je(n);if(i===null)return r;{Y(je(n)!==".priority"||Co(n)===1,".priority must be the last token in a path");let o=this.getImmediateChild(i).updateChild(bt(n),r);return this.updateImmediateChild(i,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;let r={},i=0,o=0,l=!0;if(this.forEachChild(kt,(h,g)=>{r[h]=g.val(n),i++,l&&e.INTEGER_REGEXP_.test(h)?o=Math.max(o,Number(h)):l=!1}),!n&&l&&o<2*i){let h=[];for(let g in r)h[g]=r[g];return h}else return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let n="";this.getPriority().isEmpty()||(n+="priority:"+TS(this.getPriority().val())+":"),this.forEachChild(kt,(r,i)=>{let o=i.hash();o!==""&&(n+=":"+r+":"+o)}),this.lazyHash_=n===""?"":lS(n)}return this.lazyHash_}getPredecessorChildName(n,r,i){let o=this.resolveIndex_(i);if(o){let l=o.getPredecessorKey(new He(n,r));return l?l.name:null}else return this.children_.getPredecessorKey(n)}getFirstChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(n){let r=this.getFirstChildName(n);return r?new He(r,this.children_.get(r)):null}getLastChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(n){let r=this.getLastChildName(n);return r?new He(r,this.children_.get(r)):null}forEachChild(n,r){let i=this.resolveIndex_(n);return i?i.inorderTraversal(o=>r(o.name,o.node)):this.children_.inorderTraversal(r)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(n,o=>o);{let o=this.children_.getIteratorFrom(n.name,He.Wrap),l=o.peek();for(;l!=null&&r.compare(l,n)<0;)o.getNext(),l=o.peek();return o}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(n,o=>o);{let o=this.children_.getReverseIteratorFrom(n.name,He.Wrap),l=o.peek();for(;l!=null&&r.compare(l,n)>0;)o.getNext(),l=o.peek();return o}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===$l?-1:0}withIndex(n){if(n===Na||this.indexMap_.hasIndex(n))return this;{let r=this.indexMap_.addIndex(n,this.children_);return new e(this.children_,this.priorityNode_,r)}}isIndexed(n){return n===Na||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{let r=n;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){let i=this.getIterator(kt),o=r.getIterator(kt),l=i.getNext(),h=o.getNext();for(;l&&h;){if(l.name!==h.name||!l.node.equals(h.node))return!1;l=i.getNext(),h=o.getNext()}return l===null&&h===null}else return!1;else return!1}}resolveIndex_(n){return n===Na?null:this.indexMap_.get(n.toString())}}return e.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,e})(),ny=class extends Te{constructor(){super(new wr(Uy),Te.EMPTY_NODE,ka.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return Te.EMPTY_NODE}isEmpty(){return!1}},$l=new ny;Object.defineProperties(He,{MIN:{value:new He(Ra,Te.EMPTY_NODE)},MAX:{value:new He(ls,$l)}});qf.__EMPTY_NODE=Te.EMPTY_NODE;Pa.__childrenNodeConstructor=Te;F4($l);V4($l);var j4=!0;function Kt(e,t=null){if(e===null)return Te.EMPTY_NODE;if(typeof e=="object"&&".priority"in e&&(t=e[".priority"]),Y(t===null||typeof t=="string"||typeof t=="number"||typeof t=="object"&&".sv"in t,"Invalid priority type found: "+typeof t),typeof e=="object"&&".value"in e&&e[".value"]!==null&&(e=e[".value"]),typeof e!="object"||".sv"in e){let n=e;return new Pa(n,Kt(t))}if(!(e instanceof Array)&&j4){let n=[],r=!1;if(yn(e,(l,h)=>{if(l.substring(0,1)!=="."){let g=Kt(h);g.isEmpty()||(r=r||!g.getPriority().isEmpty(),n.push(new He(l,g)))}}),n.length===0)return Te.EMPTY_NODE;let o=Yf(n,L4,l=>l.name,Uy);if(r){let l=Yf(n,kt.getCompare());return new Te(o,Kt(t),new ka({".priority":l},{".priority":kt}))}else return new Te(o,Kt(t),ka.Default)}else{let n=Te.EMPTY_NODE;return yn(e,(r,i)=>{if(jr(e,r)&&r.substring(0,1)!=="."){let o=Kt(i);(o.isLeafNode()||!o.isEmpty())&&(n=n.updateImmediateChild(r,o))}}),n.updatePriority(Kt(t))}}B4(Kt);var ry=class extends Oa{constructor(t){super(),this.indexPath_=t,Y(!Ge(t)&&je(t)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,n){let r=this.extractChild(t.node),i=this.extractChild(n.node),o=r.compareTo(i);return o===0?ds(t.name,n.name):o}makePost(t,n){let r=Kt(t),i=Te.EMPTY_NODE.updateChild(this.indexPath_,r);return new He(n,i)}maxPost(){let t=Te.EMPTY_NODE.updateChild(this.indexPath_,$l);return new He(ls,t)}toString(){return kl(this.indexPath_,0).join("/")}};var iy=class extends Oa{compare(t,n){let r=t.node.compareTo(n.node);return r===0?ds(t.name,n.name):r}isDefinedOn(t){return!0}indexedValueChanged(t,n){return!t.equals(n)}minPost(){return He.MIN}maxPost(){return He.MAX}makePost(t,n){let r=Kt(t);return new He(n,r)}toString(){return".value"}},H4=new iy;function OS(e){return{type:"value",snapshotNode:e}}function La(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function Ll(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function Fl(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}function z4(e,t){return{type:"child_moved",snapshotNode:t,childName:e}}var Bl=class{constructor(t){this.index_=t}updateChild(t,n,r,i,o,l){Y(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");let h=t.getImmediateChild(n);return h.getChild(i).equals(r.getChild(i))&&h.isEmpty()===r.isEmpty()||(l!=null&&(r.isEmpty()?t.hasChild(n)?l.trackChildChange(Ll(n,h)):Y(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?l.trackChildChange(La(n,r)):l.trackChildChange(Fl(n,r,h))),t.isLeafNode()&&r.isEmpty())?t:t.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(t,n,r){return r!=null&&(t.isLeafNode()||t.forEachChild(kt,(i,o)=>{n.hasChild(i)||r.trackChildChange(Ll(i,o))}),n.isLeafNode()||n.forEachChild(kt,(i,o)=>{if(t.hasChild(i)){let l=t.getImmediateChild(i);l.equals(o)||r.trackChildChange(Fl(i,o,l))}else r.trackChildChange(La(i,o))})),n.withIndex(this.index_)}updatePriority(t,n){return t.isEmpty()?Te.EMPTY_NODE:t.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}};var Zf=class e{constructor(t){this.indexedFilter_=new Bl(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){let n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),t)<=0:this.index_.compare(this.getStartPost(),t)<0,r=this.endIsInclusive_?this.index_.compare(t,this.getEndPost())<=0:this.index_.compare(t,this.getEndPost())<0;return n&&r}updateChild(t,n,r,i,o,l){return this.matches(new He(n,r))||(r=Te.EMPTY_NODE),this.indexedFilter_.updateChild(t,n,r,i,o,l)}updateFullNode(t,n,r){n.isLeafNode()&&(n=Te.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(Te.EMPTY_NODE);let o=this;return n.forEachChild(kt,(l,h)=>{o.matches(new He(l,h))||(i=i.updateImmediateChild(l,Te.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,i,r)}updatePriority(t,n){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){let n=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),n)}else return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){let n=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),n)}else return t.getIndex().maxPost()}};var oy=class{constructor(t){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{let r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{let r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new Zf(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft(),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}updateChild(t,n,r,i,o,l){return this.rangedFilter_.matches(new He(n,r))||(r=Te.EMPTY_NODE),t.getImmediateChild(n).equals(r)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,n,r,i,o,l):this.fullLimitUpdateChild_(t,n,r,o,l)}updateFullNode(t,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=Te.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=Te.EMPTY_NODE.withIndex(this.index_);let o;this.reverse_?o=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):o=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let l=0;for(;o.hasNext()&&l<this.limit_;){let h=o.getNext();if(this.withinDirectionalStart(h))if(this.withinDirectionalEnd(h))i=i.updateImmediateChild(h.name,h.node),l++;else break;else continue}}else{i=n.withIndex(this.index_),i=i.updatePriority(Te.EMPTY_NODE);let o;this.reverse_?o=i.getReverseIterator(this.index_):o=i.getIterator(this.index_);let l=0;for(;o.hasNext();){let h=o.getNext();l<this.limit_&&this.withinDirectionalStart(h)&&this.withinDirectionalEnd(h)?l++:i=i.updateImmediateChild(h.name,Te.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,i,r)}updatePriority(t,n){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,n,r,i,o){let l;if(this.reverse_){let E=this.index_.getCompare();l=(x,D)=>E(D,x)}else l=this.index_.getCompare();let h=t;Y(h.numChildren()===this.limit_,"");let g=new He(n,r),m=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),C=this.rangedFilter_.matches(g);if(h.hasChild(n)){let E=h.getImmediateChild(n),x=i.getChildAfterChild(this.index_,m,this.reverse_);for(;x!=null&&(x.name===n||h.hasChild(x.name));)x=i.getChildAfterChild(this.index_,x,this.reverse_);let D=x==null?1:l(x,g);if(C&&!r.isEmpty()&&D>=0)return o?.trackChildChange(Fl(n,r,E)),h.updateImmediateChild(n,r);{o?.trackChildChange(Ll(n,E));let U=h.updateImmediateChild(n,Te.EMPTY_NODE);return x!=null&&this.rangedFilter_.matches(x)?(o?.trackChildChange(La(x.name,x.node)),U.updateImmediateChild(x.name,x.node)):U}}else return r.isEmpty()?t:C&&l(m,g)>=0?(o!=null&&(o.trackChildChange(Ll(m.name,m.node)),o.trackChildChange(La(n,r))),h.updateImmediateChild(n,r).updateImmediateChild(m.name,Te.EMPTY_NODE)):t}};var sy=class e{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=kt}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return Y(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Y(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ra}hasEnd(){return this.endSet_}getIndexEndValue(){return Y(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Y(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ls}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return Y(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===kt}copy(){let t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}};function W4(e){return e.loadsAllData()?new Bl(e.getIndex()):e.hasLimit()?new oy(e):new Zf(e)}function $x(e){let t={};if(e.isDefault())return t;let n;if(e.index_===kt?n="$priority":e.index_===H4?n="$value":e.index_===Na?n="$key":(Y(e.index_ instanceof ry,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=Gt(n),e.startSet_){let r=e.startAfterSet_?"startAfter":"startAt";t[r]=Gt(e.indexStartValue_),e.startNameSet_&&(t[r]+=","+Gt(e.indexStartName_))}if(e.endSet_){let r=e.endBeforeSet_?"endBefore":"endAt";t[r]=Gt(e.indexEndValue_),e.endNameSet_&&(t[r]+=","+Gt(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function qx(e){let t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;n===""&&(e.isViewFromLeft()?n="l":n="r"),t.vf=n}return e.index_!==kt&&(t.i=e.index_.toString()),t}var ay=class e extends Wf{constructor(t,n,r,i){super(),this.repoInfo_=t,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Gl("p:rest:"),this.listens_={}}reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,n){return n!==void 0?"tag$"+n:(Y(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}listen(t,n,r,i){let o=t._path.toString();this.log_("Listen called for "+o+" "+t._queryIdentifier);let l=e.getListenId_(t,r),h={};this.listens_[l]=h;let g=$x(t._queryParams);this.restRequest_(o+".json",g,(m,C)=>{let E=C;if(m===404&&(E=null,m=null),m===null&&this.onDataUpdate_(o,E,!1,r),is(this.listens_,l)===h){let x;m?m===401?x="permission_denied":x="rest_error:"+m:x="ok",i(x,null)}})}unlisten(t,n){let r=e.getListenId_(t,n);delete this.listens_[r]}get(t){let n=$x(t._queryParams),r=t._path.toString(),i=new Fi;return this.restRequest_(r+".json",n,(o,l)=>{let h=l;o===404&&(h=null,o=null),o===null?(this.onDataUpdate_(r,h,!1,null),i.resolve(h)):i.reject(new Error(h))}),i.promise}refreshAuthToken(t){}restRequest_(t,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,o])=>{i&&i.accessToken&&(n.auth=i.accessToken),o&&o.token&&(n.ac=o.token);let l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+vl(n);this.log_("Sending REST request for "+l);let h=new XMLHttpRequest;h.onreadystatechange=()=>{if(r&&h.readyState===4){this.log_("REST Response for "+l+" received. status:",h.status,"response:",h.responseText);let g=null;if(h.status>=200&&h.status<300){try{g=xa(h.responseText)}catch{Rn("Failed to parse JSON response for "+l+": "+h.responseText)}r(null,g)}else h.status!==401&&h.status!==404&&Rn("Got unsuccessful REST response for "+l+" Status: "+h.status),r(h.status);r=null}},h.open("GET",l,!0),h.send()})}};var cy=class{constructor(){this.rootNode_=Te.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,n){this.rootNode_=this.rootNode_.updateChild(t,n)}};function Xf(){return{value:null,children:new Map}}function PS(e,t,n){if(Ge(t))e.value=n,e.children.clear();else if(e.value!==null)e.value=e.value.updateChild(t,n);else{let r=je(t);e.children.has(r)||e.children.set(r,Xf());let i=e.children.get(r);t=bt(t),PS(i,t,n)}}function ly(e,t,n){e.value!==null?n(t,e.value):G4(e,(r,i)=>{let o=new ft(t.toString()+"/"+r);ly(i,o,n)})}function G4(e,t){e.children.forEach((n,r)=>{t(r,n)})}var uy=class{constructor(t){this.collection_=t,this.last_=null}get(){let t=this.collection_.get(),n=Object.assign({},t);return this.last_&&yn(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=t,n}};var Yx=10*1e3,$4=30*1e3,q4=5*60*1e3,dy=class{constructor(t,n){this.server_=n,this.statsToReport_={},this.statsListener_=new uy(t);let r=Yx+($4-Yx)*Math.random();Ml(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){let t=this.statsListener_.get(),n={},r=!1;yn(t,(i,o)=>{o>0&&jr(this.statsToReport_,i)&&(n[i]=o,r=!0)}),r&&this.server_.reportStats(n),Ml(this.reportStats_.bind(this),Math.floor(Math.random()*2*q4))}};var ci=function(e){return e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",e}(ci||{});function jy(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Hy(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function zy(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}var fy=class e{constructor(t,n,r){this.path=t,this.affectedTree=n,this.revert=r,this.type=ci.ACK_USER_WRITE,this.source=jy()}operationForChild(t){if(Ge(this.path)){if(this.affectedTree.value!=null)return Y(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let n=this.affectedTree.subtree(new ft(t));return new e(nt(),n,this.revert)}}else return Y(je(this.path)===t,"operationForChild called for unrelated child."),new e(bt(this.path),this.affectedTree,this.revert)}};var Qf=class e{constructor(t,n){this.source=t,this.path=n,this.type=ci.LISTEN_COMPLETE}operationForChild(t){return Ge(this.path)?new e(this.source,nt()):new e(this.source,bt(this.path))}};var Fa=class e{constructor(t,n,r){this.source=t,this.path=n,this.snap=r,this.type=ci.OVERWRITE}operationForChild(t){return Ge(this.path)?new e(this.source,nt(),this.snap.getImmediateChild(t)):new e(this.source,bt(this.path),this.snap)}};var Vl=class e{constructor(t,n,r){this.source=t,this.path=n,this.children=r,this.type=ci.MERGE}operationForChild(t){if(Ge(this.path)){let n=this.children.subtree(new ft(t));return n.isEmpty()?null:n.value?new Fa(this.source,nt(),n.value):new e(this.source,nt(),n)}else return Y(je(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,bt(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var li=class{constructor(t,n,r){this.node_=t,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(Ge(t))return this.isFullyInitialized()&&!this.filtered_;let n=je(t);return this.isCompleteForChild(n)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}};var hy=class{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}};function Y4(e,t,n,r){let i=[],o=[];return t.forEach(l=>{l.type==="child_changed"&&e.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&o.push(z4(l.childName,l.snapshotNode))}),Tl(e,i,"child_removed",t,r,n),Tl(e,i,"child_added",t,r,n),Tl(e,i,"child_moved",o,r,n),Tl(e,i,"child_changed",t,r,n),Tl(e,i,"value",t,r,n),i}function Tl(e,t,n,r,i,o){let l=r.filter(h=>h.type===n);l.sort((h,g)=>X4(e,h,g)),l.forEach(h=>{let g=Z4(e,h,o);i.forEach(m=>{m.respondsTo(h.type)&&t.push(m.createEvent(g,e.query_))})})}function Z4(e,t,n){return t.type==="value"||t.type==="child_removed"||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}function X4(e,t,n){if(t.childName==null||n.childName==null)throw rs("Should only compare child_ events.");let r=new He(t.childName,t.snapshotNode),i=new He(n.childName,n.snapshotNode);return e.index_.compare(r,i)}function fh(e,t){return{eventCache:e,serverCache:t}}function Rl(e,t,n,r){return fh(new li(t,n,r),e.serverCache)}function kS(e,t,n,r){return fh(e.eventCache,new li(t,n,r))}function Kf(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function us(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}var k1,Q4=()=>(k1||(k1=new wr(Q8)),k1),On=class e{constructor(t,n=Q4()){this.value=t,this.children=n}static fromObject(t){let n=new e(null);return yn(t,(r,i)=>{n=n.set(new ft(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,n){if(this.value!=null&&n(this.value))return{path:nt(),value:this.value};if(Ge(t))return null;{let r=je(t),i=this.children.get(r);if(i!==null){let o=i.findRootMostMatchingPathAndValue(bt(t),n);return o!=null?{path:Pt(new ft(r),o.path),value:o.value}:null}else return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(Ge(t))return this;{let n=je(t),r=this.children.get(n);return r!==null?r.subtree(bt(t)):new e(null)}}set(t,n){if(Ge(t))return new e(n,this.children);{let r=je(t),o=(this.children.get(r)||new e(null)).set(bt(t),n),l=this.children.insert(r,o);return new e(this.value,l)}}remove(t){if(Ge(t))return this.children.isEmpty()?new e(null):new e(null,this.children);{let n=je(t),r=this.children.get(n);if(r){let i=r.remove(bt(t)),o;return i.isEmpty()?o=this.children.remove(n):o=this.children.insert(n,i),this.value===null&&o.isEmpty()?new e(null):new e(this.value,o)}else return this}}get(t){if(Ge(t))return this.value;{let n=je(t),r=this.children.get(n);return r?r.get(bt(t)):null}}setTree(t,n){if(Ge(t))return n;{let r=je(t),o=(this.children.get(r)||new e(null)).setTree(bt(t),n),l;return o.isEmpty()?l=this.children.remove(r):l=this.children.insert(r,o),new e(this.value,l)}}fold(t){return this.fold_(nt(),t)}fold_(t,n){let r={};return this.children.inorderTraversal((i,o)=>{r[i]=o.fold_(Pt(t,i),n)}),n(t,this.value,r)}findOnPath(t,n){return this.findOnPath_(t,nt(),n)}findOnPath_(t,n,r){let i=this.value?r(n,this.value):!1;if(i)return i;if(Ge(t))return null;{let o=je(t),l=this.children.get(o);return l?l.findOnPath_(bt(t),Pt(n,o),r):null}}foreachOnPath(t,n){return this.foreachOnPath_(t,nt(),n)}foreachOnPath_(t,n,r){if(Ge(t))return this;{this.value&&r(n,this.value);let i=je(t),o=this.children.get(i);return o?o.foreachOnPath_(bt(t),Pt(n,i),r):new e(null)}}foreach(t){this.foreach_(nt(),t)}foreach_(t,n){this.children.inorderTraversal((r,i)=>{i.foreach_(Pt(t,r),n)}),this.value&&n(t,this.value)}foreachChild(t){this.children.inorderTraversal((n,r)=>{r.value&&t(n,r.value)})}};var zr=class e{constructor(t){this.writeTree_=t}static empty(){return new e(new On(null))}};function Ol(e,t,n){if(Ge(t))return new zr(new On(n));{let r=e.writeTree_.findRootMostValueAndPath(t);if(r!=null){let i=r.path,o=r.value,l=Nn(i,t);return o=o.updateChild(l,n),new zr(e.writeTree_.set(i,o))}else{let i=new On(n),o=e.writeTree_.setTree(t,i);return new zr(o)}}}function py(e,t,n){let r=e;return yn(n,(i,o)=>{r=Ol(r,Pt(t,i),o)}),r}function Zx(e,t){if(Ge(t))return zr.empty();{let n=e.writeTree_.setTree(t,new On(null));return new zr(n)}}function gy(e,t){return fs(e,t)!=null}function fs(e,t){let n=e.writeTree_.findRootMostValueAndPath(t);return n!=null?e.writeTree_.get(n.path).getChild(Nn(n.path,t)):null}function Xx(e){let t=[],n=e.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(kt,(r,i)=>{t.push(new He(r,i))}):e.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&t.push(new He(r,i.value))}),t}function wo(e,t){if(Ge(t))return e;{let n=fs(e,t);return n!=null?new zr(new On(n)):new zr(e.writeTree_.subtree(t))}}function my(e){return e.writeTree_.isEmpty()}function Ba(e,t){return LS(nt(),e.writeTree_,t)}function LS(e,t,n){if(t.value!=null)return n.updateChild(e,t.value);{let r=null;return t.children.inorderTraversal((i,o)=>{i===".priority"?(Y(o.value!==null,"Priority writes must always be leaf nodes"),r=o.value):n=LS(Pt(e,i),o,n)}),!n.getChild(e).isEmpty()&&r!==null&&(n=n.updateChild(Pt(e,".priority"),r)),n}}function hh(e,t){return US(t,e)}function K4(e,t,n,r,i){Y(r>e.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=Ol(e.visibleWrites,t,n)),e.lastWriteId=r}function J4(e,t,n,r){Y(r>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:n,writeId:r,visible:!0}),e.visibleWrites=py(e.visibleWrites,t,n),e.lastWriteId=r}function e6(e,t){for(let n=0;n<e.allWrites.length;n++){let r=e.allWrites[n];if(r.writeId===t)return r}return null}function t6(e,t){let n=e.allWrites.findIndex(h=>h.writeId===t);Y(n>=0,"removeWrite called with nonexistent writeId.");let r=e.allWrites[n];e.allWrites.splice(n,1);let i=r.visible,o=!1,l=e.allWrites.length-1;for(;i&&l>=0;){let h=e.allWrites[l];h.visible&&(l>=n&&n6(h,r.path)?i=!1:_r(r.path,h.path)&&(o=!0)),l--}if(i){if(o)return r6(e),!0;if(r.snap)e.visibleWrites=Zx(e.visibleWrites,r.path);else{let h=r.children;yn(h,g=>{e.visibleWrites=Zx(e.visibleWrites,Pt(r.path,g))})}return!0}else return!1}function n6(e,t){if(e.snap)return _r(e.path,t);for(let n in e.children)if(e.children.hasOwnProperty(n)&&_r(Pt(e.path,n),t))return!0;return!1}function r6(e){e.visibleWrites=FS(e.allWrites,i6,nt()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}function i6(e){return e.visible}function FS(e,t,n){let r=zr.empty();for(let i=0;i<e.length;++i){let o=e[i];if(t(o)){let l=o.path,h;if(o.snap)_r(n,l)?(h=Nn(n,l),r=Ol(r,h,o.snap)):_r(l,n)&&(h=Nn(l,n),r=Ol(r,nt(),o.snap.getChild(h)));else if(o.children){if(_r(n,l))h=Nn(n,l),r=py(r,h,o.children);else if(_r(l,n))if(h=Nn(l,n),Ge(h))r=py(r,nt(),o.children);else{let g=is(o.children,je(h));if(g){let m=g.getChild(bt(h));r=Ol(r,nt(),m)}}}else throw rs("WriteRecord should have .snap or .children")}}return r}function BS(e,t,n,r,i){if(!r&&!i){let o=fs(e.visibleWrites,t);if(o!=null)return o;{let l=wo(e.visibleWrites,t);if(my(l))return n;if(n==null&&!gy(l,nt()))return null;{let h=n||Te.EMPTY_NODE;return Ba(l,h)}}}else{let o=wo(e.visibleWrites,t);if(!i&&my(o))return n;if(!i&&n==null&&!gy(o,nt()))return null;{let l=function(m){return(m.visible||i)&&(!r||!~r.indexOf(m.writeId))&&(_r(m.path,t)||_r(t,m.path))},h=FS(e.allWrites,l,t),g=n||Te.EMPTY_NODE;return Ba(h,g)}}}function o6(e,t,n){let r=Te.EMPTY_NODE,i=fs(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(kt,(o,l)=>{r=r.updateImmediateChild(o,l)}),r;if(n){let o=wo(e.visibleWrites,t);return n.forEachChild(kt,(l,h)=>{let g=Ba(wo(o,new ft(l)),h);r=r.updateImmediateChild(l,g)}),Xx(o).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}else{let o=wo(e.visibleWrites,t);return Xx(o).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}}function s6(e,t,n,r,i){Y(r||i,"Either existingEventSnap or existingServerSnap must exist");let o=Pt(t,n);if(gy(e.visibleWrites,o))return null;{let l=wo(e.visibleWrites,o);return my(l)?i.getChild(n):Ba(l,i.getChild(n))}}function a6(e,t,n,r){let i=Pt(t,n),o=fs(e.visibleWrites,i);if(o!=null)return o;if(r.isCompleteForChild(n)){let l=wo(e.visibleWrites,i);return Ba(l,r.getNode().getImmediateChild(n))}else return null}function c6(e,t){return fs(e.visibleWrites,t)}function l6(e,t,n,r,i,o,l){let h,g=wo(e.visibleWrites,t),m=fs(g,nt());if(m!=null)h=m;else if(n!=null)h=Ba(g,n);else return[];if(h=h.withIndex(l),!h.isEmpty()&&!h.isLeafNode()){let C=[],E=l.getCompare(),x=o?h.getReverseIteratorFrom(r,l):h.getIteratorFrom(r,l),D=x.getNext();for(;D&&C.length<i;)E(D,r)!==0&&C.push(D),D=x.getNext();return C}else return[]}function u6(){return{visibleWrites:zr.empty(),allWrites:[],lastWriteId:-1}}function Jf(e,t,n,r){return BS(e.writeTree,e.treePath,t,n,r)}function Wy(e,t){return o6(e.writeTree,e.treePath,t)}function Qx(e,t,n,r){return s6(e.writeTree,e.treePath,t,n,r)}function eh(e,t){return c6(e.writeTree,Pt(e.treePath,t))}function d6(e,t,n,r,i,o){return l6(e.writeTree,e.treePath,t,n,r,i,o)}function Gy(e,t,n){return a6(e.writeTree,e.treePath,t,n)}function VS(e,t){return US(Pt(e.treePath,t),e.writeTree)}function US(e,t){return{treePath:e,writeTree:t}}var yy=class{constructor(){this.changeMap=new Map}trackChildChange(t){let n=t.type,r=t.childName;Y(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),Y(r!==".priority","Only non-priority child changes can be tracked.");let i=this.changeMap.get(r);if(i){let o=i.type;if(n==="child_added"&&o==="child_removed")this.changeMap.set(r,Fl(r,t.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&o==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&o==="child_changed")this.changeMap.set(r,Ll(r,i.oldSnap));else if(n==="child_changed"&&o==="child_added")this.changeMap.set(r,La(r,t.snapshotNode));else if(n==="child_changed"&&o==="child_changed")this.changeMap.set(r,Fl(r,t.snapshotNode,i.oldSnap));else throw rs("Illegal combination of changes: "+t+" occurred after "+i)}else this.changeMap.set(r,t)}getChanges(){return Array.from(this.changeMap.values())}};var _y=class{getCompleteChild(t){return null}getChildAfterChild(t,n,r){return null}},jS=new _y,Ul=class{constructor(t,n,r=null){this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(t){let n=this.viewCache_.eventCache;if(n.isCompleteForChild(t))return n.getNode().getImmediateChild(t);{let r=this.optCompleteServerCache_!=null?new li(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Gy(this.writes_,t,r)}}getChildAfterChild(t,n,r){let i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:us(this.viewCache_),o=d6(this.writes_,i,n,1,r,t);return o.length===0?null:o[0]}};function f6(e){return{filter:e}}function h6(e,t){Y(t.eventCache.getNode().isIndexed(e.filter.getIndex()),"Event snap not indexed"),Y(t.serverCache.getNode().isIndexed(e.filter.getIndex()),"Server snap not indexed")}function p6(e,t,n,r,i){let o=new yy,l,h;if(n.type===ci.OVERWRITE){let m=n;m.source.fromUser?l=wy(e,t,m.path,m.snap,r,i,o):(Y(m.source.fromServer,"Unknown source."),h=m.source.tagged||t.serverCache.isFiltered()&&!Ge(m.path),l=th(e,t,m.path,m.snap,r,i,h,o))}else if(n.type===ci.MERGE){let m=n;m.source.fromUser?l=m6(e,t,m.path,m.children,r,i,o):(Y(m.source.fromServer,"Unknown source."),h=m.source.tagged||t.serverCache.isFiltered(),l=vy(e,t,m.path,m.children,r,i,h,o))}else if(n.type===ci.ACK_USER_WRITE){let m=n;m.revert?l=w6(e,t,m.path,r,i,o):l=y6(e,t,m.path,m.affectedTree,r,i,o)}else if(n.type===ci.LISTEN_COMPLETE)l=_6(e,t,n.path,r,o);else throw rs("Unknown operation type: "+n.type);let g=o.getChanges();return g6(t,l,g),{viewCache:l,changes:g}}function g6(e,t,n){let r=t.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=Kf(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(OS(Kf(t)))}}function HS(e,t,n,r,i,o){let l=t.eventCache;if(eh(r,n)!=null)return t;{let h,g;if(Ge(n))if(Y(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){let m=us(t),C=m instanceof Te?m:Te.EMPTY_NODE,E=Wy(r,C);h=e.filter.updateFullNode(t.eventCache.getNode(),E,o)}else{let m=Jf(r,us(t));h=e.filter.updateFullNode(t.eventCache.getNode(),m,o)}else{let m=je(n);if(m===".priority"){Y(Co(n)===1,"Can't have a priority with additional path components");let C=l.getNode();g=t.serverCache.getNode();let E=Qx(r,n,C,g);E!=null?h=e.filter.updatePriority(C,E):h=l.getNode()}else{let C=bt(n),E;if(l.isCompleteForChild(m)){g=t.serverCache.getNode();let x=Qx(r,n,l.getNode(),g);x!=null?E=l.getNode().getImmediateChild(m).updateChild(C,x):E=l.getNode().getImmediateChild(m)}else E=Gy(r,m,t.serverCache);E!=null?h=e.filter.updateChild(l.getNode(),m,E,C,i,o):h=l.getNode()}}return Rl(t,h,l.isFullyInitialized()||Ge(n),e.filter.filtersNodes())}}function th(e,t,n,r,i,o,l,h){let g=t.serverCache,m,C=l?e.filter:e.filter.getIndexedFilter();if(Ge(n))m=C.updateFullNode(g.getNode(),r,null);else if(C.filtersNodes()&&!g.isFiltered()){let D=g.getNode().updateChild(n,r);m=C.updateFullNode(g.getNode(),D,null)}else{let D=je(n);if(!g.isCompleteForPath(n)&&Co(n)>1)return t;let N=bt(n),$=g.getNode().getImmediateChild(D).updateChild(N,r);D===".priority"?m=C.updatePriority(g.getNode(),$):m=C.updateChild(g.getNode(),D,$,N,jS,null)}let E=kS(t,m,g.isFullyInitialized()||Ge(n),C.filtersNodes()),x=new Ul(i,E,o);return HS(e,E,n,i,x,h)}function wy(e,t,n,r,i,o,l){let h=t.eventCache,g,m,C=new Ul(i,t,o);if(Ge(n))m=e.filter.updateFullNode(t.eventCache.getNode(),r,l),g=Rl(t,m,!0,e.filter.filtersNodes());else{let E=je(n);if(E===".priority")m=e.filter.updatePriority(t.eventCache.getNode(),r),g=Rl(t,m,h.isFullyInitialized(),h.isFiltered());else{let x=bt(n),D=h.getNode().getImmediateChild(E),N;if(Ge(x))N=r;else{let U=C.getCompleteChild(E);U!=null?Fy(x)===".priority"&&U.getChild(AS(x)).isEmpty()?N=U:N=U.updateChild(x,r):N=Te.EMPTY_NODE}if(D.equals(N))g=t;else{let U=e.filter.updateChild(h.getNode(),E,N,x,C,l);g=Rl(t,U,h.isFullyInitialized(),e.filter.filtersNodes())}}}return g}function Kx(e,t){return e.eventCache.isCompleteForChild(t)}function m6(e,t,n,r,i,o,l){let h=t;return r.foreach((g,m)=>{let C=Pt(n,g);Kx(t,je(C))&&(h=wy(e,h,C,m,i,o,l))}),r.foreach((g,m)=>{let C=Pt(n,g);Kx(t,je(C))||(h=wy(e,h,C,m,i,o,l))}),h}function Jx(e,t,n){return n.foreach((r,i)=>{t=t.updateChild(r,i)}),t}function vy(e,t,n,r,i,o,l,h){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let g=t,m;Ge(n)?m=r:m=new On(null).setTree(n,r);let C=t.serverCache.getNode();return m.children.inorderTraversal((E,x)=>{if(C.hasChild(E)){let D=t.serverCache.getNode().getImmediateChild(E),N=Jx(e,D,x);g=th(e,g,new ft(E),N,i,o,l,h)}}),m.children.inorderTraversal((E,x)=>{let D=!t.serverCache.isCompleteForChild(E)&&x.value===null;if(!C.hasChild(E)&&!D){let N=t.serverCache.getNode().getImmediateChild(E),U=Jx(e,N,x);g=th(e,g,new ft(E),U,i,o,l,h)}}),g}function y6(e,t,n,r,i,o,l){if(eh(i,n)!=null)return t;let h=t.serverCache.isFiltered(),g=t.serverCache;if(r.value!=null){if(Ge(n)&&g.isFullyInitialized()||g.isCompleteForPath(n))return th(e,t,n,g.getNode().getChild(n),i,o,h,l);if(Ge(n)){let m=new On(null);return g.getNode().forEachChild(Na,(C,E)=>{m=m.set(new ft(C),E)}),vy(e,t,n,m,i,o,h,l)}else return t}else{let m=new On(null);return r.foreach((C,E)=>{let x=Pt(n,C);g.isCompleteForPath(x)&&(m=m.set(C,g.getNode().getChild(x)))}),vy(e,t,n,m,i,o,h,l)}}function _6(e,t,n,r,i){let o=t.serverCache,l=kS(t,o.getNode(),o.isFullyInitialized()||Ge(n),o.isFiltered());return HS(e,l,n,r,jS,i)}function w6(e,t,n,r,i,o){let l;if(eh(r,n)!=null)return t;{let h=new Ul(r,t,i),g=t.eventCache.getNode(),m;if(Ge(n)||je(n)===".priority"){let C;if(t.serverCache.isFullyInitialized())C=Jf(r,us(t));else{let E=t.serverCache.getNode();Y(E instanceof Te,"serverChildren would be complete if leaf node"),C=Wy(r,E)}C=C,m=e.filter.updateFullNode(g,C,o)}else{let C=je(n),E=Gy(r,C,t.serverCache);E==null&&t.serverCache.isCompleteForChild(C)&&(E=g.getImmediateChild(C)),E!=null?m=e.filter.updateChild(g,C,E,bt(n),h,o):t.eventCache.getNode().hasChild(C)?m=e.filter.updateChild(g,C,Te.EMPTY_NODE,bt(n),h,o):m=g,m.isEmpty()&&t.serverCache.isFullyInitialized()&&(l=Jf(r,us(t)),l.isLeafNode()&&(m=e.filter.updateFullNode(m,l,o)))}return l=t.serverCache.isFullyInitialized()||eh(r,nt())!=null,Rl(t,m,l,e.filter.filtersNodes())}}var Cy=class{constructor(t,n){this.query_=t,this.eventRegistrations_=[];let r=this.query_._queryParams,i=new Bl(r.getIndex()),o=W4(r);this.processor_=f6(o);let l=n.serverCache,h=n.eventCache,g=i.updateFullNode(Te.EMPTY_NODE,l.getNode(),null),m=o.updateFullNode(Te.EMPTY_NODE,h.getNode(),null),C=new li(g,l.isFullyInitialized(),i.filtersNodes()),E=new li(m,h.isFullyInitialized(),o.filtersNodes());this.viewCache_=fh(E,C),this.eventGenerator_=new hy(this.query_)}get query(){return this.query_}};function v6(e){return e.viewCache_.serverCache.getNode()}function C6(e){return Kf(e.viewCache_)}function E6(e,t){let n=us(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!Ge(t)&&!n.getImmediateChild(je(t)).isEmpty())?n.getChild(t):null}function eS(e){return e.eventRegistrations_.length===0}function I6(e,t){e.eventRegistrations_.push(t)}function tS(e,t,n){let r=[];if(n){Y(t==null,"A cancel should cancel all event registrations.");let i=e.query._path;e.eventRegistrations_.forEach(o=>{let l=o.createCancelEvent(n,i);l&&r.push(l)})}if(t){let i=[];for(let o=0;o<e.eventRegistrations_.length;++o){let l=e.eventRegistrations_[o];if(!l.matches(t))i.push(l);else if(t.hasAnyCallback()){i=i.concat(e.eventRegistrations_.slice(o+1));break}}e.eventRegistrations_=i}else e.eventRegistrations_=[];return r}function nS(e,t,n,r){t.type===ci.MERGE&&t.source.queryId!==null&&(Y(us(e.viewCache_),"We should always have a full cache before handling merges"),Y(Kf(e.viewCache_),"Missing event cache, even though we have a server cache"));let i=e.viewCache_,o=p6(e.processor_,i,t,n,r);return h6(e.processor_,o.viewCache),Y(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=o.viewCache,zS(e,o.changes,o.viewCache.eventCache.getNode(),null)}function b6(e,t){let n=e.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(kt,(o,l)=>{r.push(La(o,l))}),n.isFullyInitialized()&&r.push(OS(n.getNode())),zS(e,r,n.getNode(),t)}function zS(e,t,n,r){let i=r?[r]:e.eventRegistrations_;return Y4(e.eventGenerator_,t,n,i)}var nh,rh=class{constructor(){this.views=new Map}};function x6(e){Y(!nh,"__referenceConstructor has already been defined"),nh=e}function S6(){return Y(nh,"Reference.ts has not been loaded"),nh}function A6(e){return e.views.size===0}function $y(e,t,n,r){let i=t.source.queryId;if(i!==null){let o=e.views.get(i);return Y(o!=null,"SyncTree gave us an op for an invalid query."),nS(o,t,n,r)}else{let o=[];for(let l of e.views.values())o=o.concat(nS(l,t,n,r));return o}}function WS(e,t,n,r,i){let o=t._queryIdentifier,l=e.views.get(o);if(!l){let h=Jf(n,i?r:null),g=!1;h?g=!0:r instanceof Te?(h=Wy(n,r),g=!1):(h=Te.EMPTY_NODE,g=!1);let m=fh(new li(h,g,!1),new li(r,i,!1));return new Cy(t,m)}return l}function D6(e,t,n,r,i,o){let l=WS(e,t,r,i,o);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,l),I6(l,n),b6(l,n)}function T6(e,t,n,r){let i=t._queryIdentifier,o=[],l=[],h=Eo(e);if(i==="default")for(let[g,m]of e.views.entries())l=l.concat(tS(m,n,r)),eS(m)&&(e.views.delete(g),m.query._queryParams.loadsAllData()||o.push(m.query));else{let g=e.views.get(i);g&&(l=l.concat(tS(g,n,r)),eS(g)&&(e.views.delete(i),g.query._queryParams.loadsAllData()||o.push(g.query)))}return h&&!Eo(e)&&o.push(new(S6())(t._repo,t._path)),{removed:o,events:l}}function GS(e){let t=[];for(let n of e.views.values())n.query._queryParams.loadsAllData()||t.push(n);return t}function vo(e,t){let n=null;for(let r of e.views.values())n=n||E6(r,t);return n}function $S(e,t){if(t._queryParams.loadsAllData())return ph(e);{let r=t._queryIdentifier;return e.views.get(r)}}function qS(e,t){return $S(e,t)!=null}function Eo(e){return ph(e)!=null}function ph(e){for(let t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}var ih;function M6(e){Y(!ih,"__referenceConstructor has already been defined"),ih=e}function N6(){return Y(ih,"Reference.ts has not been loaded"),ih}var R6=1,oh=class{constructor(t){this.listenProvider_=t,this.syncPointTree_=new On(null),this.pendingWriteTree_=u6(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function YS(e,t,n,r,i){return K4(e.pendingWriteTree_,t,n,r,i),i?ja(e,new Fa(jy(),t,n)):[]}function O6(e,t,n,r){J4(e.pendingWriteTree_,t,n,r);let i=On.fromObject(n);return ja(e,new Vl(jy(),t,i))}function _o(e,t,n=!1){let r=e6(e.pendingWriteTree_,t);if(t6(e.pendingWriteTree_,t)){let o=new On(null);return r.snap!=null?o=o.set(nt(),!0):yn(r.children,l=>{o=o.set(new ft(l),!0)}),ja(e,new fy(r.path,o,n))}else return[]}function ql(e,t,n){return ja(e,new Fa(Hy(),t,n))}function P6(e,t,n){let r=On.fromObject(n);return ja(e,new Vl(Hy(),t,r))}function k6(e,t){return ja(e,new Qf(Hy(),t))}function L6(e,t,n){let r=Yy(e,n);if(r){let i=Zy(r),o=i.path,l=i.queryId,h=Nn(o,t),g=new Qf(zy(l),h);return Xy(e,o,g)}else return[]}function sh(e,t,n,r,i=!1){let o=t._path,l=e.syncPointTree_.get(o),h=[];if(l&&(t._queryIdentifier==="default"||qS(l,t))){let g=T6(l,t,n,r);A6(l)&&(e.syncPointTree_=e.syncPointTree_.remove(o));let m=g.removed;if(h=g.events,!i){let C=m.findIndex(x=>x._queryParams.loadsAllData())!==-1,E=e.syncPointTree_.findOnPath(o,(x,D)=>Eo(D));if(C&&!E){let x=e.syncPointTree_.subtree(o);if(!x.isEmpty()){let D=V6(x);for(let N=0;N<D.length;++N){let U=D[N],$=U.query,W=KS(e,U);e.listenProvider_.startListening(Pl($),jl(e,$),W.hashFn,W.onComplete)}}}!E&&m.length>0&&!r&&(C?e.listenProvider_.stopListening(Pl(t),null):m.forEach(x=>{let D=e.queryToTagMap.get(gh(x));e.listenProvider_.stopListening(Pl(x),D)}))}U6(e,m)}return h}function ZS(e,t,n,r){let i=Yy(e,r);if(i!=null){let o=Zy(i),l=o.path,h=o.queryId,g=Nn(l,t),m=new Fa(zy(h),g,n);return Xy(e,l,m)}else return[]}function F6(e,t,n,r){let i=Yy(e,r);if(i){let o=Zy(i),l=o.path,h=o.queryId,g=Nn(l,t),m=On.fromObject(n),C=new Vl(zy(h),g,m);return Xy(e,l,C)}else return[]}function Ey(e,t,n,r=!1){let i=t._path,o=null,l=!1;e.syncPointTree_.foreachOnPath(i,(x,D)=>{let N=Nn(x,i);o=o||vo(D,N),l=l||Eo(D)});let h=e.syncPointTree_.get(i);h?(l=l||Eo(h),o=o||vo(h,nt())):(h=new rh,e.syncPointTree_=e.syncPointTree_.set(i,h));let g;o!=null?g=!0:(g=!1,o=Te.EMPTY_NODE,e.syncPointTree_.subtree(i).foreachChild((D,N)=>{let U=vo(N,nt());U&&(o=o.updateImmediateChild(D,U))}));let m=qS(h,t);if(!m&&!t._queryParams.loadsAllData()){let x=gh(t);Y(!e.queryToTagMap.has(x),"View does not exist, but we have a tag");let D=j6();e.queryToTagMap.set(x,D),e.tagToQueryMap.set(D,x)}let C=hh(e.pendingWriteTree_,i),E=D6(h,t,n,C,o,g);if(!m&&!l&&!r){let x=$S(h,t);E=E.concat(H6(e,t,x))}return E}function qy(e,t,n){let i=e.pendingWriteTree_,o=e.syncPointTree_.findOnPath(t,(l,h)=>{let g=Nn(l,t),m=vo(h,g);if(m)return m});return BS(i,t,o,n,!0)}function B6(e,t){let n=t._path,r=null;e.syncPointTree_.foreachOnPath(n,(m,C)=>{let E=Nn(m,n);r=r||vo(C,E)});let i=e.syncPointTree_.get(n);i?r=r||vo(i,nt()):(i=new rh,e.syncPointTree_=e.syncPointTree_.set(n,i));let o=r!=null,l=o?new li(r,!0,!1):null,h=hh(e.pendingWriteTree_,t._path),g=WS(i,t,h,o?l.getNode():Te.EMPTY_NODE,o);return C6(g)}function ja(e,t){return XS(t,e.syncPointTree_,null,hh(e.pendingWriteTree_,nt()))}function XS(e,t,n,r){if(Ge(e.path))return QS(e,t,n,r);{let i=t.get(nt());n==null&&i!=null&&(n=vo(i,nt()));let o=[],l=je(e.path),h=e.operationForChild(l),g=t.children.get(l);if(g&&h){let m=n?n.getImmediateChild(l):null,C=VS(r,l);o=o.concat(XS(h,g,m,C))}return i&&(o=o.concat($y(i,e,r,n))),o}}function QS(e,t,n,r){let i=t.get(nt());n==null&&i!=null&&(n=vo(i,nt()));let o=[];return t.children.inorderTraversal((l,h)=>{let g=n?n.getImmediateChild(l):null,m=VS(r,l),C=e.operationForChild(l);C&&(o=o.concat(QS(C,h,g,m)))}),i&&(o=o.concat($y(i,e,r,n))),o}function KS(e,t){let n=t.query,r=jl(e,n);return{hashFn:()=>(v6(t)||Te.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?L6(e,n._path,r):k6(e,n._path);{let o=e4(i,n);return sh(e,n,null,o)}}}}function jl(e,t){let n=gh(t);return e.queryToTagMap.get(n)}function gh(e){return e._path.toString()+"$"+e._queryIdentifier}function Yy(e,t){return e.tagToQueryMap.get(t)}function Zy(e){let t=e.indexOf("$");return Y(t!==-1&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new ft(e.substr(0,t))}}function Xy(e,t,n){let r=e.syncPointTree_.get(t);Y(r,"Missing sync point for query tag that we're tracking");let i=hh(e.pendingWriteTree_,t);return $y(r,n,i,null)}function V6(e){return e.fold((t,n,r)=>{if(n&&Eo(n))return[ph(n)];{let i=[];return n&&(i=GS(n)),yn(r,(o,l)=>{i=i.concat(l)}),i}})}function Pl(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(N6())(e._repo,e._path):e}function U6(e,t){for(let n=0;n<t.length;++n){let r=t[n];if(!r._queryParams.loadsAllData()){let i=gh(r),o=e.queryToTagMap.get(i);e.queryToTagMap.delete(i),e.tagToQueryMap.delete(o)}}}function j6(){return R6++}function H6(e,t,n){let r=t._path,i=jl(e,t),o=KS(e,n),l=e.listenProvider_.startListening(Pl(t),i,o.hashFn,o.onComplete),h=e.syncPointTree_.subtree(r);if(i)Y(!Eo(h.value),"If we're adding a query, it shouldn't be shadowed");else{let g=h.fold((m,C,E)=>{if(!Ge(m)&&C&&Eo(C))return[ph(C).query];{let x=[];return C&&(x=x.concat(GS(C).map(D=>D.query))),yn(E,(D,N)=>{x=x.concat(N)}),x}});for(let m=0;m<g.length;++m){let C=g[m];e.listenProvider_.stopListening(Pl(C),jl(e,C))}}return l}var Iy=class e{constructor(t){this.node_=t}getImmediateChild(t){let n=this.node_.getImmediateChild(t);return new e(n)}node(){return this.node_}},by=class e{constructor(t,n){this.syncTree_=t,this.path_=n}getImmediateChild(t){let n=Pt(this.path_,t);return new e(this.syncTree_,n)}node(){return qy(this.syncTree_,this.path_)}},z6=function(e){return e=e||{},e.timestamp=e.timestamp||new Date().getTime(),e},rS=function(e,t,n){if(!e||typeof e!="object")return e;if(Y(".sv"in e,"Unexpected leaf node or priority contents"),typeof e[".sv"]=="string")return W6(e[".sv"],t,n);if(typeof e[".sv"]=="object")return G6(e[".sv"],t);Y(!1,"Unexpected server value: "+JSON.stringify(e,null,2))},W6=function(e,t,n){switch(e){case"timestamp":return n.timestamp;default:Y(!1,"Unexpected server value: "+e)}},G6=function(e,t,n){e.hasOwnProperty("increment")||Y(!1,"Unexpected server value: "+JSON.stringify(e,null,2));let r=e.increment;typeof r!="number"&&Y(!1,"Unexpected increment value: "+r);let i=t.node();if(Y(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;let l=i.getValue();return typeof l!="number"?r:l+r},JS=function(e,t,n,r){return Qy(t,new by(n,e),r)},eA=function(e,t,n){return Qy(e,new Iy(t),n)};function Qy(e,t,n){let r=e.getPriority().val(),i=rS(r,t.getImmediateChild(".priority"),n),o;if(e.isLeafNode()){let l=e,h=rS(l.getValue(),t,n);return h!==l.getValue()||i!==l.getPriority().val()?new Pa(h,Kt(i)):e}else{let l=e;return o=l,i!==l.getPriority().val()&&(o=o.updatePriority(new Pa(i))),l.forEachChild(kt,(h,g)=>{let m=Qy(g,t.getImmediateChild(h),n);m!==g&&(o=o.updateImmediateChild(h,m))}),o}}var Hl=class{constructor(t="",n=null,r={children:{},childCount:0}){this.name=t,this.parent=n,this.node=r}};function Ky(e,t){let n=t instanceof ft?t:new ft(t),r=e,i=je(n);for(;i!==null;){let o=is(r.node.children,i)||{children:{},childCount:0};r=new Hl(i,r,o),n=bt(n),i=je(n)}return r}function Ha(e){return e.node.value}function tA(e,t){e.node.value=t,xy(e)}function nA(e){return e.node.childCount>0}function $6(e){return Ha(e)===void 0&&!nA(e)}function mh(e,t){yn(e.node.children,(n,r)=>{t(new Hl(n,e,r))})}function rA(e,t,n,r){n&&!r&&t(e),mh(e,i=>{rA(i,t,!0,r)}),n&&r&&t(e)}function q6(e,t,n){let r=n?e:e.parent;for(;r!==null;){if(t(r))return!0;r=r.parent}return!1}function Yl(e){return new ft(e.parent===null?e.name:Yl(e.parent)+"/"+e.name)}function xy(e){e.parent!==null&&Y6(e.parent,e.name,e)}function Y6(e,t,n){let r=$6(n),i=jr(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,xy(e)):!r&&!i&&(e.node.children[t]=n.node,e.node.childCount++,xy(e))}var Z6=/[\[\].#$\/\u0000-\u001F\u007F]/,X6=/[\[\].#$\u0000-\u001F\u007F]/,L1=10*1024*1024,Jy=function(e){return typeof e=="string"&&e.length!==0&&!Z6.test(e)},iA=function(e){return typeof e=="string"&&e.length!==0&&!X6.test(e)},Q6=function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),iA(e)},K6=function(e){return e===null||typeof e=="string"||typeof e=="number"&&!Py(e)||e&&typeof e=="object"&&jr(e,".sv")},J6=function(e,t,n,r){r&&t===void 0||yh(Cl(e,"value"),t,n)},yh=function(e,t,n){let r=n instanceof ft?new X1(n,e):n;if(t===void 0)throw new Error(e+"contains undefined "+ss(r));if(typeof t=="function")throw new Error(e+"contains a function "+ss(r)+" with contents = "+t.toString());if(Py(t))throw new Error(e+"contains "+t.toString()+" "+ss(r));if(typeof t=="string"&&t.length>L1/3&&El(t)>L1)throw new Error(e+"contains a string greater than "+L1+" utf8 bytes "+ss(r)+" ('"+t.substring(0,50)+"...')");if(t&&typeof t=="object"){let i=!1,o=!1;if(yn(t,(l,h)=>{if(l===".value")i=!0;else if(l!==".priority"&&l!==".sv"&&(o=!0,!Jy(l)))throw new Error(e+" contains an invalid key ("+l+") "+ss(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);M4(r,l),yh(e,h,r),N4(r)}),i&&o)throw new Error(e+' contains ".value" child '+ss(r)+" in addition to actual children.")}},eB=function(e,t){let n,r;for(n=0;n<t.length;n++){r=t[n];let o=kl(r);for(let l=0;l<o.length;l++)if(!(o[l]===".priority"&&l===o.length-1)){if(!Jy(o[l]))throw new Error(e+"contains an invalid key ("+o[l]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}t.sort(T4);let i=null;for(n=0;n<t.length;n++){if(r=t[n],i!==null&&_r(i,r))throw new Error(e+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}},tB=function(e,t,n,r){if(r&&t===void 0)return;let i=Cl(e,"values");if(!(t&&typeof t=="object")||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");let o=[];yn(t,(l,h)=>{let g=new ft(l);if(yh(i,h,Pt(n,g)),Fy(g)===".priority"&&!K6(h))throw new Error(i+"contains an invalid value for '"+g.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(g)}),eB(i,o)};var oA=function(e,t,n,r){if(!(r&&n===void 0)&&!iA(n))throw new Error(Cl(e,t)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},nB=function(e,t,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),oA(e,t,n,r)},sA=function(e,t){if(je(t)===".info")throw new Error(e+" failed = Can't modify data under /.info/")},rB=function(e,t){let n=t.path.toString();if(typeof t.repoInfo.host!="string"||t.repoInfo.host.length===0||!Jy(t.repoInfo.namespace)&&t.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!Q6(n))throw new Error(Cl(e,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var Sy=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function _h(e,t){let n=null;for(let r=0;r<t.length;r++){let i=t[r],o=i.getPath();n!==null&&!By(o,n.path)&&(e.eventLists_.push(n),n=null),n===null&&(n={events:[],path:o}),n.events.push(i)}n&&e.eventLists_.push(n)}function aA(e,t,n){_h(e,n),cA(e,r=>By(r,t))}function vr(e,t,n){_h(e,n),cA(e,r=>_r(r,t)||_r(t,r))}function cA(e,t){e.recursionDepth_++;let n=!0;for(let r=0;r<e.eventLists_.length;r++){let i=e.eventLists_[r];if(i){let o=i.path;t(o)?(iB(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}}n&&(e.eventLists_=[]),e.recursionDepth_--}function iB(e){for(let t=0;t<e.events.length;t++){let n=e.events[t];if(n!==null){e.events[t]=null;let r=n.getEventRunner();cs&&mn("event: "+n.toString()),Ua(r)}}}var oB="repo_interrupt",sB=25,Ay=class{constructor(t,n,r,i){this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Sy,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Xf(),this.transactionQueueTree_=new Hl,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function aB(e,t,n){if(e.stats_=Ly(e.repoInfo_),e.forceRestClient_||i4())e.server_=new ay(e.repoInfo_,(r,i,o,l)=>{iS(e,r,i,o,l)},e.authTokenProvider_,e.appCheckProvider_),setTimeout(()=>oS(e,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Gt(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}e.persistentConnection_=new Vy(e.repoInfo_,t,(r,i,o,l)=>{iS(e,r,i,o,l)},r=>{oS(e,r)},r=>{lB(e,r)},e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener(r=>{e.server_.refreshAuthToken(r)}),e.appCheckProvider_.addTokenChangeListener(r=>{e.server_.refreshAppCheckToken(r.token)}),e.statsReporter_=s4(e.repoInfo_,()=>new dy(e.stats_,e.server_)),e.infoData_=new cy,e.infoSyncTree_=new oh({startListening:(r,i,o,l)=>{let h=[],g=e.infoData_.getNode(r._path);return g.isEmpty()||(h=ql(e.infoSyncTree_,r._path,g),setTimeout(()=>{l("ok")},0)),h},stopListening:()=>{}}),e_(e,"connected",!1),e.serverSyncTree_=new oh({startListening:(r,i,o,l)=>(e.server_.listen(r,o,i,(h,g)=>{let m=l(h,g);vr(e.eventQueue_,r._path,m)}),[]),stopListening:(r,i)=>{e.server_.unlisten(r,i)}})}function cB(e){let n=e.infoData_.getNode(new ft(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function wh(e){return z6({timestamp:cB(e)})}function iS(e,t,n,r,i){e.dataUpdateCount++;let o=new ft(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let l=[];if(i)if(r){let g=_l(n,m=>Kt(m));l=F6(e.serverSyncTree_,o,g,i)}else{let g=Kt(n);l=ZS(e.serverSyncTree_,o,g,i)}else if(r){let g=_l(n,m=>Kt(m));l=P6(e.serverSyncTree_,o,g)}else{let g=Kt(n);l=ql(e.serverSyncTree_,o,g)}let h=o;l.length>0&&(h=Va(e,o)),vr(e.eventQueue_,h,l)}function oS(e,t){e_(e,"connected",t),t===!1&&hB(e)}function lB(e,t){yn(t,(n,r)=>{e_(e,n,r)})}function e_(e,t,n){let r=new ft("/.info/"+t),i=Kt(n);e.infoData_.updateSnapshot(r,i);let o=ql(e.infoSyncTree_,r,i);vr(e.eventQueue_,r,o)}function t_(e){return e.nextWriteId_++}function uB(e,t,n){let r=B6(e.serverSyncTree_,t);return r!=null?Promise.resolve(r):e.server_.get(t).then(i=>{let o=Kt(i).withIndex(t._queryParams.getIndex());Ey(e.serverSyncTree_,t,n,!0);let l;if(t._queryParams.loadsAllData())l=ql(e.serverSyncTree_,t._path,o);else{let h=jl(e.serverSyncTree_,t);l=ZS(e.serverSyncTree_,t._path,o,h)}return vr(e.eventQueue_,t._path,l),sh(e.serverSyncTree_,t,n,null,!0),o},i=>(Zl(e,"get for query "+Gt(t)+" failed: "+i),Promise.reject(new Error(i))))}function dB(e,t,n,r,i){Zl(e,"set",{path:t.toString(),value:n,priority:r});let o=wh(e),l=Kt(n,r),h=qy(e.serverSyncTree_,t),g=eA(l,h,o),m=t_(e),C=YS(e.serverSyncTree_,t,g,m,!0);_h(e.eventQueue_,C),e.server_.put(t.toString(),l.val(!0),(x,D)=>{let N=x==="ok";N||Rn("set at "+t+" failed: "+x);let U=_o(e.serverSyncTree_,m,!N);vr(e.eventQueue_,t,U),Dy(e,i,x,D)});let E=r_(e,t);Va(e,E),vr(e.eventQueue_,E,[])}function fB(e,t,n,r){Zl(e,"update",{path:t.toString(),value:n});let i=!0,o=wh(e),l={};if(yn(n,(h,g)=>{i=!1,l[h]=JS(Pt(t,h),Kt(g),e.serverSyncTree_,o)}),i)mn("update() called with empty data.  Don't do anything."),Dy(e,r,"ok",void 0);else{let h=t_(e),g=O6(e.serverSyncTree_,t,l,h);_h(e.eventQueue_,g),e.server_.merge(t.toString(),n,(m,C)=>{let E=m==="ok";E||Rn("update at "+t+" failed: "+m);let x=_o(e.serverSyncTree_,h,!E),D=x.length>0?Va(e,t):t;vr(e.eventQueue_,D,x),Dy(e,r,m,C)}),yn(n,m=>{let C=r_(e,Pt(t,m));Va(e,C)}),vr(e.eventQueue_,t,[])}}function hB(e){Zl(e,"onDisconnectEvents");let t=wh(e),n=Xf();ly(e.onDisconnect_,nt(),(i,o)=>{let l=JS(i,o,e.serverSyncTree_,t);PS(n,i,l)});let r=[];ly(n,nt(),(i,o)=>{r=r.concat(ql(e.serverSyncTree_,i,o));let l=r_(e,i);Va(e,l)}),e.onDisconnect_=Xf(),vr(e.eventQueue_,nt(),r)}function pB(e,t,n){let r;je(t._path)===".info"?r=Ey(e.infoSyncTree_,t,n):r=Ey(e.serverSyncTree_,t,n),aA(e.eventQueue_,t._path,r)}function sS(e,t,n){let r;je(t._path)===".info"?r=sh(e.infoSyncTree_,t,n):r=sh(e.serverSyncTree_,t,n),aA(e.eventQueue_,t._path,r)}function gB(e){e.persistentConnection_&&e.persistentConnection_.interrupt(oB)}function Zl(e,...t){let n="";e.persistentConnection_&&(n=e.persistentConnection_.id+":"),mn(n,...t)}function Dy(e,t,n,r){t&&Ua(()=>{if(n==="ok")t(null);else{let i=(n||"error").toUpperCase(),o=i;r&&(o+=": "+r);let l=new Error(o);l.code=i,t(l)}})}function lA(e,t,n){return qy(e.serverSyncTree_,t,n)||Te.EMPTY_NODE}function n_(e,t=e.transactionQueueTree_){if(t||vh(e,t),Ha(t)){let n=dA(e,t);Y(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&mB(e,Yl(t),n)}else nA(t)&&mh(t,n=>{n_(e,n)})}function mB(e,t,n){let r=n.map(m=>m.currentWriteId),i=lA(e,t,r),o=i,l=i.hash();for(let m=0;m<n.length;m++){let C=n[m];Y(C.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),C.status=1,C.retryCount++;let E=Nn(t,C.path);o=o.updateChild(E,C.currentOutputSnapshotRaw)}let h=o.val(!0),g=t;e.server_.put(g.toString(),h,m=>{Zl(e,"transaction put response",{path:g.toString(),status:m});let C=[];if(m==="ok"){let E=[];for(let x=0;x<n.length;x++)n[x].status=2,C=C.concat(_o(e.serverSyncTree_,n[x].currentWriteId)),n[x].onComplete&&E.push(()=>n[x].onComplete(null,!0,n[x].currentOutputSnapshotResolved)),n[x].unwatcher();vh(e,Ky(e.transactionQueueTree_,t)),n_(e,e.transactionQueueTree_),vr(e.eventQueue_,t,C);for(let x=0;x<E.length;x++)Ua(E[x])}else{if(m==="datastale")for(let E=0;E<n.length;E++)n[E].status===3?n[E].status=4:n[E].status=0;else{Rn("transaction at "+g.toString()+" failed: "+m);for(let E=0;E<n.length;E++)n[E].status=4,n[E].abortReason=m}Va(e,t)}},l)}function Va(e,t){let n=uA(e,t),r=Yl(n),i=dA(e,n);return yB(e,i,r),r}function yB(e,t,n){if(t.length===0)return;let r=[],i=[],l=t.filter(h=>h.status===0).map(h=>h.currentWriteId);for(let h=0;h<t.length;h++){let g=t[h],m=Nn(n,g.path),C=!1,E;if(Y(m!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),g.status===4)C=!0,E=g.abortReason,i=i.concat(_o(e.serverSyncTree_,g.currentWriteId,!0));else if(g.status===0)if(g.retryCount>=sB)C=!0,E="maxretry",i=i.concat(_o(e.serverSyncTree_,g.currentWriteId,!0));else{let x=lA(e,g.path,l);g.currentInputSnapshot=x;let D=t[h].update(x.val());if(D!==void 0){yh("transaction failed: Data returned ",D,g.path);let N=Kt(D);typeof D=="object"&&D!=null&&jr(D,".priority")||(N=N.updatePriority(x.getPriority()));let $=g.currentWriteId,W=wh(e),ie=eA(N,x,W);g.currentOutputSnapshotRaw=N,g.currentOutputSnapshotResolved=ie,g.currentWriteId=t_(e),l.splice(l.indexOf($),1),i=i.concat(YS(e.serverSyncTree_,g.path,ie,g.currentWriteId,g.applyLocally)),i=i.concat(_o(e.serverSyncTree_,$,!0))}else C=!0,E="nodata",i=i.concat(_o(e.serverSyncTree_,g.currentWriteId,!0))}vr(e.eventQueue_,n,i),i=[],C&&(t[h].status=2,function(x){setTimeout(x,Math.floor(0))}(t[h].unwatcher),t[h].onComplete&&(E==="nodata"?r.push(()=>t[h].onComplete(null,!1,t[h].currentInputSnapshot)):r.push(()=>t[h].onComplete(new Error(E),!1,null))))}vh(e,e.transactionQueueTree_);for(let h=0;h<r.length;h++)Ua(r[h]);n_(e,e.transactionQueueTree_)}function uA(e,t){let n,r=e.transactionQueueTree_;for(n=je(t);n!==null&&Ha(r)===void 0;)r=Ky(r,n),t=bt(t),n=je(t);return r}function dA(e,t){let n=[];return fA(e,t,n),n.sort((r,i)=>r.order-i.order),n}function fA(e,t,n){let r=Ha(t);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);mh(t,i=>{fA(e,i,n)})}function vh(e,t){let n=Ha(t);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,tA(t,n.length>0?n:void 0)}mh(t,r=>{vh(e,r)})}function r_(e,t){let n=Yl(uA(e,t)),r=Ky(e.transactionQueueTree_,t);return q6(r,i=>{F1(e,i)}),F1(e,r),rA(r,i=>{F1(e,i)}),n}function F1(e,t){let n=Ha(t);if(n){let r=[],i=[],o=-1;for(let l=0;l<n.length;l++)n[l].status===3||(n[l].status===1?(Y(o===l-1,"All SENT items should be at beginning of queue."),o=l,n[l].status=3,n[l].abortReason="set"):(Y(n[l].status===0,"Unexpected transaction status in abort"),n[l].unwatcher(),i=i.concat(_o(e.serverSyncTree_,n[l].currentWriteId,!0)),n[l].onComplete&&r.push(n[l].onComplete.bind(null,new Error("set"),!1,null))));o===-1?tA(t,void 0):n.length=o+1,vr(e.eventQueue_,Yl(t),i);for(let l=0;l<r.length;l++)Ua(r[l])}}function _B(e){let t="",n=e.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}t+="/"+i}return t}function wB(e){let t={};e.charAt(0)==="?"&&(e=e.substring(1));for(let n of e.split("&")){if(n.length===0)continue;let r=n.split("=");r.length===2?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Rn(`Invalid query segment '${n}' in query '${e}'`)}return t}var aS=function(e,t){let n=vB(e),r=n.namespace;n.domain==="firebase.com"&&Ui(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Ui("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||Z8();let i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new Hf(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new ft(n.pathString)}},vB=function(e){let t="",n="",r="",i="",o="",l=!0,h="https",g=443;if(typeof e=="string"){let m=e.indexOf("//");m>=0&&(h=e.substring(0,m-1),e=e.substring(m+2));let C=e.indexOf("/");C===-1&&(C=e.length);let E=e.indexOf("?");E===-1&&(E=e.length),t=e.substring(0,Math.min(C,E)),C<E&&(i=_B(e.substring(C,E)));let x=wB(e.substring(Math.min(e.length,E)));m=t.indexOf(":"),m>=0?(l=h==="https"||h==="wss",g=parseInt(t.substring(m+1),10)):m=t.length;let D=t.slice(0,m);if(D.toLowerCase()==="localhost")n="localhost";else if(D.split(".").length<=2)n=D;else{let N=t.indexOf(".");r=t.substring(0,N).toLowerCase(),n=t.substring(N+1),o=r}"ns"in x&&(o=x.ns)}return{host:t,port:g,domain:n,subdomain:r,secure:l,scheme:h,pathString:i,namespace:o}};var ah=class{constructor(t,n,r,i){this.eventType=t,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){let t=this.snapshot.ref;return this.eventType==="value"?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Gt(this.snapshot.exportVal())}},ch=class{constructor(t,n,r){this.eventRegistration=t,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}};var lh=class{constructor(t,n){this.snapshotCallback=t,this.cancelCallback=n}onValue(t,n){this.snapshotCallback.call(null,t,n)}onCancel(t){return Y(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}};var Ty=class e{constructor(t,n,r,i){this._repo=t,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return Ge(this._path)?null:Fy(this._path)}get ref(){return new ui(this._repo,this._path)}get _queryIdentifier(){let t=qx(this._queryParams),n=ky(t);return n==="{}"?"default":n}get _queryObject(){return qx(this._queryParams)}isEqual(t){if(t=Yn(t),!(t instanceof e))return!1;let n=this._repo===t._repo,r=By(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+D4(this._path)}};var ui=class e extends Ty{constructor(t,n){super(t,n,new sy,!1)}get parent(){let t=AS(this._path);return t===null?null:new e(this._repo,t)}get root(){let t=this;for(;t.parent!==null;)t=t.parent;return t}},zl=class e{constructor(t,n,r){this._node=t,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){let n=new ft(t),r=uh(this.ref,t);return new e(this._node.getChild(n),r,kt)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>t(new e(i,uh(this.ref,r),kt)))}hasChild(t){let n=new ft(t);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}};function le(e,t){return e=Yn(e),e._checkNotDeleted("ref"),t!==void 0?uh(e._root,t):e._root}function uh(e,t){return e=Yn(e),je(e._path)===null?nB("child","path",t,!1):oA("child","path",t,!1),new ui(e._repo,Pt(e._path,t))}function za(e){return sA("remove",e._path),Xl(e,null)}function Xl(e,t){e=Yn(e),sA("set",e._path),J6("set",t,e._path,!1);let n=new Fi;return dB(e._repo,e._path,t,null,n.wrapCallback(()=>{})),n.promise}function Jt(e,t){tB("update",t,e._path,!1);let n=new Fi;return fB(e._repo,e._path,t,n.wrapCallback(()=>{})),n.promise}function Ye(e){e=Yn(e);let t=new lh(()=>{}),n=new dh(t);return uB(e._repo,e,n).then(r=>new zl(r,new ui(e._repo,e._path),e._queryParams.getIndex()))}var dh=class e{constructor(t){this.callbackContext=t}respondsTo(t){return t==="value"}createEvent(t,n){let r=n._queryParams.getIndex();return new ah("value",this,new zl(t.snapshotNode,new ui(n._repo,n._path),r))}getEventRunner(t){return t.getEventType()==="cancel"?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,n){return this.callbackContext.hasCancelCallback?new ch(this,t,n):null}matches(t){return t instanceof e?!t.callbackContext||!this.callbackContext?!0:t.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}},My=class e{constructor(t,n){this.eventType=t,this.callbackContext=n}respondsTo(t){let n=t==="children_added"?"child_added":t;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(t,n){return this.callbackContext.hasCancelCallback?new ch(this,t,n):null}createEvent(t,n){Y(t.childName!=null,"Child events should have a childName.");let r=uh(new ui(n._repo,n._path),t.childName),i=n._queryParams.getIndex();return new ah(t.type,this,new zl(t.snapshotNode,r,i),t.prevName)}getEventRunner(t){return t.getEventType()==="cancel"?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,t.prevName)}matches(t){return t instanceof e?this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}};function CB(e,t,n,r,i){let o;if(typeof r=="object"&&(o=void 0,i=r),typeof r=="function"&&(o=r),i&&i.onlyOnce){let g=n,m=(C,E)=>{sS(e._repo,e,h),g(C,E)};m.userCallback=n.userCallback,m.context=n.context,n=m}let l=new lh(n,o||void 0),h=t==="value"?new dh(l):new My(t,l);return pB(e._repo,e,h),()=>sS(e._repo,e,h)}function hA(e,t,n,r){return CB(e,"value",t,n,r)}x6(ui);M6(ui);var EB="FIREBASE_DATABASE_EMULATOR_HOST",Ny={},IB=!1;function bB(e,t,n,r){e.repoInfo_=new Hf(`${t}:${n}`,!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0),r&&(e.authTokenProvider_=r)}function xB(e,t,n,r,i){let o=r||e.options.databaseURL;o===void 0&&(e.options.projectId||Ui("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),mn("Using default host for project ",e.options.projectId),o=`${e.options.projectId}-default-rtdb.firebaseio.com`);let l=aS(o,i),h=l.repoInfo,g,m;typeof process<"u"&&process.env&&(m=process.env[EB]),m?(g=!0,o=`http://${m}?ns=${h.namespace}`,l=aS(o,i),h=l.repoInfo):g=!l.repoInfo.secure;let C=i&&g?new Nl(Nl.OWNER):new z1(e.name,e.options,t);rB("Invalid Firebase Database URL",l),Ge(l.path)||Ui("Database URL must point to the root of a Firebase Database (not including a child path).");let E=AB(h,e,C,new H1(e.name,n));return new Ry(E,e)}function SB(e,t){let n=Ny[t];(!n||n[e.key]!==e)&&Ui(`Database ${t}(${e.repoInfo_}) has already been deleted.`),gB(e),delete n[e.key]}function AB(e,t,n,r){let i=Ny[t.name];i||(i={},Ny[t.name]=i);let o=i[e.toURLString()];return o&&Ui("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new Ay(e,IB,n,r),i[e.toURLString()]=o,o}var Ry=class{constructor(t,n){this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(aB(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ui(this._repo,nt())),this._rootInternal}_delete(){return this._rootInternal!==null&&(SB(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){this._rootInternal===null&&Ui("Cannot call "+t+" on a deleted database.")}};function fe(e=M1(),t){let n=T1(e,"database").getImmediate({identifier:t});if(!n._instanceStarted){let r=ix("database");r&&DB(n,...r)}return n}function DB(e,t,n,r={}){e=Yn(e),e._checkNotDeleted("useEmulator"),e._instanceStarted&&Ui("Cannot call useEmulator() after instance has already been initialized.");let i=e._repoInternal,o;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Ui('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new Nl(Nl.OWNER);else if(r.mockUserToken){let l=typeof r.mockUserToken=="string"?r.mockUserToken:sx(r.mockUserToken,e.app.options.projectId);o=new Nl(l)}bB(i,t,n,o)}function TB(e){$8(Aa),yo(new mr("database",(t,{instanceIdentifier:n})=>{let r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal");return xB(r,i,o,n)},"PUBLIC").setMultipleInstances(!0)),yr(Mx,Nx,e),yr(Mx,Nx,"esm2017")}Vy.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)};Vy.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};TB();var Qe={production:!0,firebaseConfig:{apiKey:"AIzaSyC2ak3O4qovvrDLGJ-L3a6E1uLASES2xuU",authDomain:"tablefi-31087.firebaseapp.com",databaseURL:"https://tablefi-31087-default-rtdb.europe-west1.firebasedatabase.app",projectId:"tablefi-31087",storageBucket:"tablefi-31087.appspot.com",messagingSenderId:"821585389969",appId:"1:821585389969:web:9383409a2e5fbf601b5230",measurementId:"G-QXT5KZEKGZ"}};var pA=(()=>{class e{db;constructor(){let n=Be(Qe.firebaseConfig);this.db=fe(n)}login(n,r){return new be(i=>{let o=le(this.db,"Owners");Ye(o).then(l=>{if(l.exists()){let h=l.val(),m=Object.values(h).find(C=>C.email===n);m?m.password===r?i.next(m):i.error("Invalid password"):i.error("No user found with this email")}else i.error("No owners found in the database")}).catch(l=>{console.error("Error fetching owners:",l),i.error("An error occurred while fetching owners")})}).pipe(Vn(i=>(console.error("Error during login:",i),at([null]))))}static \u0275fac=function(r){return new(r||e)};static \u0275prov=ge({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var rt=(()=>{class e{router;constructor(n){this.router=n}NavigateTo(n){this.router.navigate([n])}static \u0275fac=function(r){return new(r||e)(Le(ni))};static \u0275prov=ge({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var gA=(()=>{class e{loginService;navigationService;email="";password="";constructor(n,r){this.loginService=n,this.navigationService=r}onSubmit(n){n.preventDefault(),this.loginService.login(this.email,this.password).subscribe({next:r=>{r&&(sessionStorage.setItem("userId",r.id),sessionStorage.setItem("userEmail",r.email),sessionStorage.setItem("uniqueLinkToken",r.uniqueLinkToken),console.log("User logged in:",r),this.navigationService.NavigateTo("changerestaurant"))},error:r=>{alert(r),console.error("Login error:",r)}})}static \u0275fac=function(r){return new(r||e)(ne(pA),ne(rt))};static \u0275cmp=ce({type:e,selectors:[["app-login"]],standalone:!0,features:[de],decls:15,vars:2,consts:[[1,"displaybox"],[1,"logo"],[1,"loginform"],[3,"ngSubmit"],["type","email","id","email","name","email","placeholder","E-mail","required","",3,"ngModelChange","ngModel"],["type","password","id","password","name","password","placeholder","Has\u0142o","required","",3,"ngModelChange","ngModel"],["type","submit",1,"login"],[1,"footstatic"]],template:function(r,i){r&1&&(L(0,"main")(1,"div",0)(2,"div",1)(3,"h1"),j(4,"EasyOrder"),P()(),L(5,"div",2)(6,"form",3),ee("ngSubmit",function(l){return i.onSubmit(l)}),L(7,"div")(8,"input",4),Vt("ngModelChange",function(l){return Wt(i.email,l)||(i.email=l),l}),P()(),L(9,"div")(10,"input",5),Vt("ngModelChange",function(l){return Wt(i.password,l)||(i.password=l),l}),P()(),we(11,"div"),L(12,"button",6),j(13,"Zaloguj"),P()()(),we(14,"div",7),P()()),r&2&&(oe(8),Bt("ngModel",i.email),oe(2),Bt("ngModel",i.password))},dependencies:[bn,ii,qn,gr,ri,or,ir,Vr],styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;padding:32px;position:relative}.displaybox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center;position:relative}.logo[_ngcontent-%COMP%]{display:flex;font-size:45%;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center;margin-bottom:48px}.loginform[_ngcontent-%COMP%]{width:100%;height:fit-content;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center;position:relative}.loginform[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:100%}.loginform[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;background:#fff;padding:16px;font-size:110%;color:#000;font-weight:600;letter-spacing:2px;border:1px solid #000000;transition:all .5s;margin-bottom:24px}.loginform[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;background:#000;padding:16px;font-size:110%;color:#fff;font-weight:600;letter-spacing:2px;border:none;transition:all .5s}"]})}return e})();function Wa(){}var i_=class{zone;task=null;constructor(t){this.zone=t}call(t,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Wa,{},Wa,Wa)),n.pipe(Xt({next:r,complete:r,error:r})).subscribe(t).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}};function Ch(){let e=globalThis.\u0275AngularFireScheduler;if(!e)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return e}function NB(e){return Ch().ngZone.runOutsideAngular(()=>e())}function hs(e){return Ch().ngZone.run(()=>e())}function RB(e){return OB(Ch())(e)}function OB(e){return function(n){return n=n.lift(new i_(e.ngZone)),n.pipe(eo(e.outsideAngular),Ji(e.insideAngular))}}var PB=(e,t)=>function(){let r=arguments;return t&&setTimeout(()=>{t.state==="scheduled"&&t.invoke()},10),hs(()=>e.apply(void 0,r))},mA=(e,t)=>function(){let n,r=arguments;for(let o=0;o<arguments.length;o++)typeof r[o]=="function"&&(t&&(n||=hs(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Wa,{},Wa,Wa))),r[o]=PB(r[o],n));let i=NB(()=>e.apply(this,r));if(!t)if(i instanceof be){let o=Ch();return i.pipe(eo(o.outsideAngular),Ji(o.insideAngular))}else return hs(()=>i);return i instanceof be?i.pipe(RB):i instanceof Promise?hs(()=>new Promise((o,l)=>i.then(h=>hs(()=>o(h)),h=>hs(()=>l(h))))):typeof i=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),i.apply(this,arguments)}:hs(()=>i)};function bA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var xA=bA,SA=new Bi("auth","Firebase",bA());var xh=new go("@firebase/auth");function kB(e,...t){xh.logLevel<=mt.WARN&&xh.warn(`Auth (${Aa}): ${e}`,...t)}function Ih(e,...t){xh.logLevel<=mt.ERROR&&xh.error(`Auth (${Aa}): ${e}`,...t)}function yA(e,...t){throw m_(e,...t)}function g_(e,...t){return m_(e,...t)}function AA(e,t,n){let r=Object.assign(Object.assign({},xA()),{[t]:n});return new Bi("auth","Firebase",r).create(t,{appName:e.name})}function bh(e){return AA(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function m_(e,...t){if(typeof e!="string"){let n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return SA.create(e,...t)}function ct(e,t,...n){if(!e)throw m_(t,...n)}function Ql(e){let t="INTERNAL ASSERTION FAILED: "+e;throw Ih(t),new Error(t)}function Sh(e,t){e||Ql(t)}function LB(){return _A()==="http:"||_A()==="https:"}function _A(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.protocol)||null}function FB(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(LB()||cx()||"connection"in navigator)?navigator.onLine:!0}function BB(){if(typeof navigator>"u")return null;let e=navigator;return e.languages&&e.languages[0]||e.language||null}var gs=class{constructor(t,n){this.shortDelay=t,this.longDelay=n,Sh(n>t,"Short delay should be less than long delay!"),this.isMobile=yl()||kf()}get(){return FB()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function VB(e,t){Sh(e.emulator,"Emulator should always be set here");let{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}var Ah=class{static initialize(t,n,r){this.fetchImpl=t,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ql("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ql("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ql("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var UB={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var jB=new gs(3e4,6e4);function DA(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function Nh(o,l,h,g){return X(this,arguments,function*(e,t,n,r,i={}){return TA(e,i,()=>X(this,null,function*(){let m={},C={};r&&(t==="GET"?C=r:m={body:JSON.stringify(r)});let E=vl(Object.assign({key:e.config.apiKey},C)).slice(1),x=yield e._getAdditionalHeaders();x["Content-Type"]="application/json",e.languageCode&&(x["X-Firebase-Locale"]=e.languageCode);let D=Object.assign({method:t,headers:x},m);return ax()||(D.referrerPolicy="no-referrer"),Ah.fetch()(MA(e,e.config.apiHost,n,E),D)}))})}function TA(e,t,n){return X(this,null,function*(){e._canInitEmulator=!1;let r=Object.assign(Object.assign({},UB),t);try{let i=new a_(e),o=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let l=yield o.json();if("needConfirmation"in l)throw Eh(e,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{let h=o.ok?l.errorMessage:l.error.message,[g,m]=h.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Eh(e,"credential-already-in-use",l);if(g==="EMAIL_EXISTS")throw Eh(e,"email-already-in-use",l);if(g==="USER_DISABLED")throw Eh(e,"user-disabled",l);let C=r[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw AA(e,C,m);yA(e,C)}}catch(i){if(i instanceof oi)throw i;yA(e,"network-request-failed",{message:String(i)})}})}function MA(e,t,n,r){let i=`${t}${n}?${r}`;return e.config.emulator?VB(e.config,i):`${e.config.apiScheme}://${i}`}var a_=class{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(g_(this.auth,"network-request-failed")),jB.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function Eh(e,t,n){let r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=g_(e,t,r);return i.customData._tokenResponse=n,i}function HB(e,t){return X(this,null,function*(){return Nh(e,"POST","/v1/accounts:delete",t)})}function NA(e,t){return X(this,null,function*(){return Nh(e,"POST","/v1/accounts:lookup",t)})}function Kl(e){if(e)try{let t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}function Rh(e,t=!1){return Yn(e).getIdToken(t)}function y_(e,t=!1){return X(this,null,function*(){let n=Yn(e),r=yield n.getIdToken(t),i=RA(r);ct(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,l=o?.sign_in_provider;return{claims:i,token:r,authTime:Kl(o_(i.auth_time)),issuedAtTime:Kl(o_(i.iat)),expirationTime:Kl(o_(i.exp)),signInProvider:l||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function o_(e){return Number(e)*1e3}function RA(e){let[t,n,r]=e.split(".");if(t===void 0||n===void 0||r===void 0)return Ih("JWT malformed, contained fewer than 3 sections"),null;try{let i=ml(n);return i?JSON.parse(i):(Ih("Failed to decode base64 JWT payload"),null)}catch(i){return Ih("Caught error parsing JWT payload as JSON",i?.toString()),null}}function wA(e){let t=RA(e);return ct(t,"internal-error"),ct(typeof t.exp<"u","internal-error"),ct(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}function c_(e,t,n=!1){return X(this,null,function*(){if(n)return t;try{return yield t}catch(r){throw r instanceof oi&&zB(r)&&e.auth.currentUser===e&&(yield e.auth.signOut()),r}})}function zB({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}var l_=class{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;let n=this.getInterval(t);this.timerId=setTimeout(()=>X(this,null,function*(){yield this.iteration()}),n)}iteration(){return X(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var eu=class{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Kl(this.lastLoginAt),this.creationTime=Kl(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Dh(e){return X(this,null,function*(){var t;let n=e.auth,r=yield e.getIdToken(),i=yield c_(e,NA(n,{idToken:r}));ct(i?.users.length,n,"internal-error");let o=i.users[0];e._notifyReloadListener(o);let l=!((t=o.providerUserInfo)===null||t===void 0)&&t.length?OA(o.providerUserInfo):[],h=WB(e.providerData,l),g=e.isAnonymous,m=!(e.email&&o.passwordHash)&&!h?.length,C=g?m:!1,E={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new eu(o.createdAt,o.lastLoginAt),isAnonymous:C};Object.assign(e,E)})}function __(e){return X(this,null,function*(){let t=Yn(e);yield Dh(t),yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)})}function WB(e,t){return[...e.filter(r=>!t.some(i=>i.providerId===r.providerId)),...t]}function OA(e){return e.map(t=>{var{providerId:n}=t,r=Hp(t,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function GB(e,t){return X(this,null,function*(){let n=yield TA(e,{},()=>X(this,null,function*(){let r=vl({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:o}=e.config,l=MA(e,i,"/v1/token",`key=${o}`),h=yield e._getAdditionalHeaders();return h["Content-Type"]="application/x-www-form-urlencoded",Ah.fetch()(l,{method:"POST",headers:h,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function $B(e,t){return X(this,null,function*(){return Nh(e,"POST","/v2/accounts:revokeToken",DA(e,t))})}var Jl=class e{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){ct(t.idToken,"internal-error"),ct(typeof t.idToken<"u","internal-error"),ct(typeof t.refreshToken<"u","internal-error");let n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):wA(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){ct(t.length!==0,"internal-error");let n=wA(t);this.updateTokensAndExpiration(t,null,n)}getToken(t,n=!1){return X(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ct(this.refreshToken,t,"user-token-expired"),this.refreshToken?(yield this.refresh(t,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(t,n){return X(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield GB(t,n);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(t,n,r){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,n){let{refreshToken:r,accessToken:i,expirationTime:o}=n,l=new e;return r&&(ct(typeof r=="string","internal-error",{appName:t}),l.refreshToken=r),i&&(ct(typeof i=="string","internal-error",{appName:t}),l.accessToken=i),o&&(ct(typeof o=="number","internal-error",{appName:t}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new e,this.toJSON())}_performRefresh(){return Ql("not implemented")}};function Io(e,t){ct(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}var tu=class e{constructor(t){var{uid:n,auth:r,stsTokenManager:i}=t,o=Hp(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new l_(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new eu(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(t){return X(this,null,function*(){let n=yield c_(this,this.stsTokenManager.getToken(this.auth,t));return ct(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(t){return y_(this,t)}reload(){return __(this)}_assign(t){this!==t&&(ct(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){let n=new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){ct(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(t,n=!1){return X(this,null,function*(){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),n&&(yield Dh(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return X(this,null,function*(){if(Sa(this.auth.app))return Promise.reject(bh(this.auth));let t=yield this.getIdToken();return yield c_(this,HB(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var r,i,o,l,h,g,m,C;let E=(r=n.displayName)!==null&&r!==void 0?r:void 0,x=(i=n.email)!==null&&i!==void 0?i:void 0,D=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,N=(l=n.photoURL)!==null&&l!==void 0?l:void 0,U=(h=n.tenantId)!==null&&h!==void 0?h:void 0,$=(g=n._redirectEventId)!==null&&g!==void 0?g:void 0,W=(m=n.createdAt)!==null&&m!==void 0?m:void 0,ie=(C=n.lastLoginAt)!==null&&C!==void 0?C:void 0,{uid:ze,emailVerified:he,isAnonymous:H,providerData:ae,stsTokenManager:G}=n;ct(ze&&G,t,"internal-error");let Sn=Jl.fromJSON(this.name,G);ct(typeof ze=="string",t,"internal-error"),Io(E,t.name),Io(x,t.name),ct(typeof he=="boolean",t,"internal-error"),ct(typeof H=="boolean",t,"internal-error"),Io(D,t.name),Io(N,t.name),Io(U,t.name),Io($,t.name),Io(W,t.name),Io(ie,t.name);let Ut=new e({uid:ze,auth:t,email:x,emailVerified:he,displayName:E,isAnonymous:H,photoURL:N,phoneNumber:D,tenantId:U,stsTokenManager:Sn,createdAt:W,lastLoginAt:ie});return ae&&Array.isArray(ae)&&(Ut.providerData=ae.map(Ce=>Object.assign({},Ce))),$&&(Ut._redirectEventId=$),Ut}static _fromIdTokenResponse(t,n,r=!1){return X(this,null,function*(){let i=new Jl;i.updateFromServerResponse(n);let o=new e({uid:n.localId,auth:t,stsTokenManager:i,isAnonymous:r});return yield Dh(o),o})}static _fromGetAccountInfoResponse(t,n,r){return X(this,null,function*(){let i=n.users[0];ct(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?OA(i.providerUserInfo):[],l=!(i.email&&i.passwordHash)&&!o?.length,h=new Jl;h.updateFromIdToken(r);let g=new e({uid:i.localId,auth:t,stsTokenManager:h,isAnonymous:l}),m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new eu(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(g,m),g})}};var vA=new Map;function ps(e){Sh(e instanceof Function,"Expected a class definition");let t=vA.get(e);return t?(Sh(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,vA.set(e,t),t)}var qB=(()=>{class e{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return X(this,null,function*(){return!0})}_set(n,r){return X(this,null,function*(){this.storage[n]=r})}_get(n){return X(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return X(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return e.type="NONE",e})(),u_=qB;function s_(e,t,n){return`firebase:${e}:${t}:${n}`}var Th=class e{constructor(t,n,r){this.persistence=t,this.auth=n,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=s_(this.userKey,i.apiKey,o),this.fullPersistenceKey=s_("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}getCurrentUser(){return X(this,null,function*(){let t=yield this.persistence._get(this.fullUserKey);return t?tu._fromJSON(this.auth,t):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(t){return X(this,null,function*(){if(this.persistence===t)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(t,n,r="authUser"){return X(this,null,function*(){if(!n.length)return new e(ps(u_),t,r);let i=(yield Promise.all(n.map(m=>X(this,null,function*(){if(yield m._isAvailable())return m})))).filter(m=>m),o=i[0]||ps(u_),l=s_(r,t.config.apiKey,t.name),h=null;for(let m of n)try{let C=yield m._get(l);if(C){let E=tu._fromJSON(t,C);m!==o&&(h=E),o=m;break}}catch{}let g=i.filter(m=>m._shouldAllowMigration);return!o._shouldAllowMigration||!g.length?new e(o,t,r):(o=g[0],h&&(yield o._set(l,h.toJSON())),yield Promise.all(n.map(m=>X(this,null,function*(){if(m!==o)try{yield m._remove(l)}catch{}}))),new e(o,t,r))})}};function CA(e){let t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(QB(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(YB(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(JB(t))return"Blackberry";if(e5(t))return"Webos";if(ZB(t))return"Safari";if((t.includes("chrome/")||XB(t))&&!t.includes("edge/"))return"Chrome";if(KB(t))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=e.match(n);if(r?.length===2)return r[1]}return"Other"}function YB(e=Ur()){return/firefox\//i.test(e)}function ZB(e=Ur()){let t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function XB(e=Ur()){return/crios\//i.test(e)}function QB(e=Ur()){return/iemobile/i.test(e)}function KB(e=Ur()){return/android/i.test(e)}function JB(e=Ur()){return/blackberry/i.test(e)}function e5(e=Ur()){return/webos/i.test(e)}function PA(e,t=[]){let n;switch(e){case"Browser":n=CA(Ur());break;case"Worker":n=`${CA(Ur())}-${e}`;break;default:n=e}let r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${Aa}/${r}`}var d_=class{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){let r=o=>new Promise((l,h)=>{try{let g=t(o);l(g)}catch(g){h(g)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(t){return X(this,null,function*(){if(this.auth.currentUser===t)return;let n=[];try{for(let r of this.queue)yield r(t),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function t5(n){return X(this,arguments,function*(e,t={}){return Nh(e,"GET","/v2/passwordPolicy",DA(e,t))})}var n5=6,f_=class{constructor(t){var n,r,i,o;let l=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=l.minPasswordLength)!==null&&n!==void 0?n:n5,l.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=l.maxPasswordLength),l.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=l.containsLowercaseCharacter),l.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=l.containsUppercaseCharacter),l.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=l.containsNumericCharacter),l.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=l.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=t.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=t.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var n,r,i,o,l,h;let g={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,g),this.validatePasswordCharacterOptions(t,g),g.isValid&&(g.isValid=(n=g.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),g.isValid&&(g.isValid=(r=g.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),g.isValid&&(g.isValid=(i=g.containsLowercaseLetter)!==null&&i!==void 0?i:!0),g.isValid&&(g.isValid=(o=g.containsUppercaseLetter)!==null&&o!==void 0?o:!0),g.isValid&&(g.isValid=(l=g.containsNumericCharacter)!==null&&l!==void 0?l:!0),g.isValid&&(g.isValid=(h=g.containsNonAlphanumericCharacter)!==null&&h!==void 0?h:!0),g}validatePasswordLengthOptions(t,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=t.length>=r),i&&(n.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<t.length;i++)r=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=o))}};var h_=class{constructor(t,n,r,i){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Mh(this),this.idTokenSubscription=new Mh(this),this.beforeStateQueue=new d_(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=SA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=ps(n)),this._initializationPromise=this.queue(()=>X(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield Th.create(this,t),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return X(this,null,function*(){if(this._deleted)return;let t=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(t,!0)}})}initializeCurrentUserFromIdToken(t){return X(this,null,function*(){try{let n=yield NA(this,{idToken:t}),r=yield tu._fromGetAccountInfoResponse(this,n,t);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(t){return X(this,null,function*(){var n;if(Sa(this.app)){let l=this.app.settings.authIdToken;return l?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(h,h))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(t&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let l=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,h=i?._redirectEventId,g=yield this.tryRedirectSignIn(t);(!l||l===h)&&g?.user&&(i=g.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(l){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ct(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(t){return X(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(t){return X(this,null,function*(){try{yield Dh(t)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)})}useDeviceLanguage(){this.languageCode=BB()}_delete(){return X(this,null,function*(){this._deleted=!0})}updateCurrentUser(t){return X(this,null,function*(){if(Sa(this.app))return Promise.reject(bh(this));let n=t?Yn(t):null;return n&&ct(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(t,n=!1){return X(this,null,function*(){if(!this._deleted)return t&&ct(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(t)),this.queue(()=>X(this,null,function*(){yield this.directlySetCurrentUser(t),this.notifyAuthListeners()}))})}signOut(){return X(this,null,function*(){return Sa(this.app)?Promise.reject(bh(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(t){return Sa(this.app)?Promise.reject(bh(this)):this.queue(()=>X(this,null,function*(){yield this.assertedPersistence.setPersistence(ps(t))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(t){return X(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return X(this,null,function*(){let t=yield t5(this),n=new f_(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new Bi("auth","Firebase",t())}onAuthStateChanged(t,n,r){return this.registerStateListener(this.authStateSubscription,t,n,r)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,r){return this.registerStateListener(this.idTokenSubscription,t,n,r)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{let r=this.onAuthStateChanged(()=>{r(),t()},n)}})}revokeAccessToken(t){return X(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield $B(this,r)}})}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}_setRedirectUser(t,n){return X(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return t===null?r.removeCurrentUser():r.setCurrentUser(t)})}getOrInitRedirectPersistenceManager(t){return X(this,null,function*(){if(!this.redirectPersistenceManager){let n=t&&ps(t)||this._popupRedirectResolver;ct(n,this,"argument-error"),this.redirectPersistenceManager=yield Th.create(this,[ps(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(t){return X(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>X(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===t?this.redirectUser:null})}_persistUserIfCurrent(t){return X(this,null,function*(){if(t===this.currentUser)return this.queue(()=>X(this,null,function*(){return this.directlySetCurrentUser(t)}))})}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,r,i){if(this._deleted)return()=>{};let o=typeof n=="function"?n:n.next.bind(n),l=!1,h=this._isInitialized?Promise.resolve():this._initializationPromise;if(ct(h,this,"internal-error"),h.then(()=>{l||o(this.currentUser)}),typeof n=="function"){let g=t.addObserver(n,r,i);return()=>{l=!0,g()}}else{let g=t.addObserver(n);return()=>{l=!0,g()}}}directlySetCurrentUser(t){return X(this,null,function*(){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?yield this.assertedPersistence.setCurrentUser(t):yield this.assertedPersistence.removeCurrentUser()})}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return ct(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=PA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return X(this,null,function*(){var t;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return X(this,null,function*(){var t;let n=yield(t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken();return n?.error&&kB(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function r5(e){return Yn(e)}var Mh=class{constructor(t){this.auth=t,this.observer=null,this.addObserver=px(n=>this.observer=n)}get next(){return ct(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var i5={loadJS(){return X(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function o5(e){i5=e}function s5(e){return`__${e}${Math.floor(Math.random()*1e6)}`}function a5(e,t){let n=t?.persistence||[],r=(Array.isArray(n)?n:[n]).map(ps);t?.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t?.popupRedirectResolver)}function Oh(e,t,n,r){return Yn(e).onIdTokenChanged(t,n,r)}var Yq=s5("rcb"),Zq=new gs(3e4,6e4);var Xq=new gs(2e3,1e4);var Qq=10*60*1e3;var Kq=new gs(3e4,6e4);var Jq=new gs(5e3,15e3);var eY=encodeURIComponent("fac");var EA="@firebase/auth",IA="1.7.9";var p_=class{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}getToken(t){return X(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(t)}:null})}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;let n=this.auth.onIdTokenChanged(r=>{t(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();let n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ct(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function c5(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function l5(e){yo(new mr("auth",(t,{options:n})=>{let r=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),o=t.getProvider("app-check-internal"),{apiKey:l,authDomain:h}=r.options;ct(l&&!l.includes(":"),"invalid-api-key",{appName:r.name});let g={apiKey:l,authDomain:h,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:PA(e)},m=new h_(r,i,o,g);return a5(m,n),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,r)=>{t.getProvider("auth-internal").initialize()})),yo(new mr("auth-internal",t=>{let n=r5(t.getProvider("auth").getImmediate());return(r=>new p_(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),yr(EA,IA,c5(e)),yr(EA,IA,"esm2017")}var u5=5*60,tY=ox("authIdTokenMaxAge")||u5;function d5(){var e,t;return(t=(e=document.getElementsByTagName("head"))===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:document}o5({loadJS(e){return new Promise((t,n)=>{let r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=i=>{let o=g_("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",d5().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});l5("Browser");function LA(e){return new be(function(t){var n=Oh(e,t.next.bind(t),t.error.bind(t),t.complete.bind(t));return{unsubscribe:n}})}function FA(e){return LA(e).pipe(er(function(t){return t?at(Rh(t)):xe(null)}))}var BA=mA(FA,!0);var VA=(()=>{class e{db;constructor(){let n=Be(Qe.firebaseConfig);this.db=fe(n)}emailExists(n){let r=le(this.db,"Owners");return at(Ye(r)).pipe(Oe(i=>{if(i.exists()){let o=i.val();return Object.values(o).map(h=>h.email).includes(n)}return!1}),Vn(i=>(console.error("Error checking email existence:",i),at([!1]))))}getNextOwnerId(){let n=le(this.db,"Owners");return at(Ye(n)).pipe(Oe(r=>{if(r.exists()){let i=r.val(),o=Object.keys(i).map(h=>i[h].id);return Math.max(...o)+1}return 1}),Vn(r=>(console.error("Error fetching owners:",r),at([1]))))}register(n){return new be(r=>{this.getNextOwnerId().subscribe(i=>{n.id=i;let o=le(this.db,`Owners/${i}`);Xl(o,n).then(()=>{r.next(),r.complete()}).catch(l=>{r.error(l)})})}).pipe(Vn(r=>(console.error("An error occurred while registering the owner:",r),at([]))))}static \u0275fac=function(r){return new(r||e)};static \u0275prov=ge({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var UA=(()=>{class e{registrationService;navigationService;email="";password="";confirmPassword="";constructor(n,r){this.registrationService=n,this.navigationService=r}onSubmit(n){if(n.preventDefault(),this.password!==this.confirmPassword){alert("Has\u0142a nie pasuj\u0105 do siebie!");return}this.registrationService.emailExists(this.email).subscribe(r=>{if(r){alert("Email jest ju\u017C zarejestrowany!");return}let i={id:BA,name:this.email.split("@")[0],email:this.email,password:this.password,uniqueLinkToken:this.generateUniqueLinkToken(128)};this.registrationService.register(i).subscribe({next:()=>{console.log("User registered successfully:",i),sessionStorage.setItem("userId",i.id),sessionStorage.setItem("userEmail",i.email),sessionStorage.setItem("uniqueLinkToken",i.uniqueLinkToken),this.navigationService.NavigateTo("newrestaurant")},error:o=>{console.error("Registration failed:",o)}})})}generateUniqueLinkToken(n=128){let r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i="";for(let o=0;o<n;o++)i+=r.charAt(Math.floor(Math.random()*r.length));return i}static \u0275fac=function(r){return new(r||e)(ne(VA),ne(rt))};static \u0275cmp=ce({type:e,selectors:[["app-register"]],standalone:!0,features:[de],decls:16,vars:3,consts:[[1,"displaybox"],[1,"logo"],[1,"loginform"],[3,"ngSubmit"],["type","email","id","email","name","email","placeholder","E-mail","required","",3,"ngModelChange","ngModel"],["type","password","id","password","name","password","placeholder","Has\u0142o","required","",3,"ngModelChange","ngModel"],["type","password","id","confirmPassword","name","confirmPassword","placeholder","Powt\xF3rz has\u0142o","required","",3,"ngModelChange","ngModel"],["type","submit",1,"register"],[1,"footstatic"]],template:function(r,i){r&1&&(L(0,"main")(1,"div",0)(2,"div",1)(3,"h1"),j(4,"EasyOrder"),P()(),L(5,"div",2)(6,"form",3),ee("ngSubmit",function(l){return i.onSubmit(l)}),L(7,"div")(8,"input",4),Vt("ngModelChange",function(l){return Wt(i.email,l)||(i.email=l),l}),P()(),L(9,"div")(10,"input",5),Vt("ngModelChange",function(l){return Wt(i.password,l)||(i.password=l),l}),P()(),L(11,"div")(12,"input",6),Vt("ngModelChange",function(l){return Wt(i.confirmPassword,l)||(i.confirmPassword=l),l}),P()(),L(13,"button",7),j(14,"Zarejestruj"),P()()(),we(15,"div",8),P()()),r&2&&(oe(8),Bt("ngModel",i.email),oe(2),Bt("ngModel",i.password),oe(2),Bt("ngModel",i.confirmPassword))},dependencies:[bn,ii,qn,gr,ri,or,ir,Vr],styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;padding:32px;position:relative}.displaybox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center;position:relative}.logo[_ngcontent-%COMP%]{display:flex;font-size:45%;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center;margin-bottom:48px}.loginform[_ngcontent-%COMP%]{width:100%;height:fit-content;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center;position:relative}.loginform[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:100%}.loginform[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;background:#fff;padding:16px;font-size:110%;color:#000;font-weight:600;letter-spacing:2px;border:1px solid #000000;transition:all .5s;margin-bottom:24px}.loginform[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;background:#000;padding:16px;font-size:110%;color:#fff;font-weight:600;letter-spacing:2px;border:none;transition:all .5s}"]})}return e})();var w_=(()=>{class e{navigationService;constructor(n){this.navigationService=n}goToPage(n){this.navigationService.NavigateTo(n)}static \u0275fac=function(r){return new(r||e)(ne(rt))};static \u0275cmp=ce({type:e,selectors:[["app-landing-page"]],standalone:!0,features:[de],decls:10,vars:0,consts:[[1,"displaybox"],[1,"logo"],[1,"buttons"],[1,"register",3,"click"],[1,"login",3,"click"]],template:function(r,i){r&1&&(L(0,"main")(1,"div",0)(2,"div",1)(3,"h1"),j(4,"EasyOrder"),P()(),L(5,"div",2)(6,"button",3),ee("click",function(){return i.goToPage("register")}),j(7,"Zarejestruj si\u0119"),P(),L(8,"button",4),ee("click",function(){return i.goToPage("login")}),j(9,"Zaloguj si\u0119"),P()()()())},styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;padding:32px;position:relative}.displaybox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center;position:relative}.logo[_ngcontent-%COMP%]{display:flex;font-size:110%;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center;margin-bottom:48px}.buttons[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center}.buttons[_ngcontent-%COMP%]   .register[_ngcontent-%COMP%]{width:100%;background:#000;padding:16px;font-size:110%;color:#fff;font-weight:600;letter-spacing:2px;border:none;transition:all .5s}.buttons[_ngcontent-%COMP%]   .login[_ngcontent-%COMP%]{width:100%;background:#fff;padding:16px;font-size:110%;color:#000;font-weight:600;letter-spacing:2px;border:1px solid #000000;transition:all .5s}.buttons[_ngcontent-%COMP%]   .register[_ngcontent-%COMP%]:hover{background:#292929;transition:all .5s}.buttons[_ngcontent-%COMP%]   .login[_ngcontent-%COMP%]:hover{background:#cecece;transition:all .5s}"]})}return e})();var jA=(()=>{class e{navigationService;name="";address="";constructor(n){this.navigationService=n;let r=Be(Qe.firebaseConfig)}onSubmit(n){n.preventDefault();let r=sessionStorage.getItem("uniqueLinkToken"),i=sessionStorage.getItem("userId");if(!i){alert("You must be logged in to create a restaurant.");return}let o={id:Date.now().toString(),name:this.name,address:this.address,uniqueLinkToken:r||"",settings:{table_change_allowed:!0,table_block_allowed:!0,order_number_typed_by_waiter_required:!0,waiter_access_pin:1234},TableGroups:[],Tables:[],Orders:[]};this.saveRestaurant(o,i)}saveRestaurant(n,r){let i=fe(),o=n.id,l=le(i,`Owners/${r}/Restaurants/${o}`);Xl(l,n).then(()=>{console.log("Restaurant added successfully:",n),this.navigationService.NavigateTo("changerestaurant"),this.resetForm()}).catch(h=>{console.error("Error adding restaurant:",h)})}resetForm(){this.name="",this.address=""}static \u0275fac=function(r){return new(r||e)(ne(rt))};static \u0275cmp=ce({type:e,selectors:[["app-newrestaurant"]],standalone:!0,features:[de],decls:15,vars:2,consts:[[1,"displaybox"],[1,"logo"],[1,"newrestaurantform"],[3,"ngSubmit"],["type","text","id","name","name","name","placeholder","Nazwa restauracji","required","",3,"ngModelChange","ngModel"],["type","text","id","adress","name","adress","placeholder","Adres","required","",3,"ngModelChange","ngModel"],["type","submit",1,"addrestaurant"],[1,"footstatic"]],template:function(r,i){r&1&&(L(0,"main")(1,"div",0)(2,"div",1)(3,"h1"),j(4,"EasyOrder"),P()(),L(5,"div",2)(6,"form",3),ee("ngSubmit",function(l){return i.onSubmit(l)}),L(7,"div")(8,"input",4),Vt("ngModelChange",function(l){return Wt(i.name,l)||(i.name=l),l}),P()(),L(9,"div")(10,"input",5),Vt("ngModelChange",function(l){return Wt(i.address,l)||(i.address=l),l}),P()(),we(11,"div"),L(12,"button",6),j(13,"Dodaj"),P()()(),we(14,"div",7),P()()),r&2&&(oe(8),Bt("ngModel",i.name),oe(2),Bt("ngModel",i.address))},dependencies:[bn,ii,qn,gr,ri,or,ir,Vr],styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;padding:32px;position:relative}.displaybox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center;position:relative}.logo[_ngcontent-%COMP%]{display:flex;font-size:45%;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center;margin-bottom:48px}.newrestaurantform[_ngcontent-%COMP%]{width:100%;height:fit-content;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center;position:relative}.newrestaurantform[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:100%}.newrestaurantform[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;background:#fff;padding:16px;font-size:110%;color:#000;font-weight:600;letter-spacing:2px;border:1px solid #000000;transition:all .5s;margin-bottom:24px}.newrestaurantform[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;background:#000;padding:16px;font-size:110%;color:#fff;font-weight:600;letter-spacing:2px;border:none;transition:all .5s}"]})}return e})();var HA=(()=>{class e{navigationService;constructor(n){this.navigationService=n}goToPage(n){this.navigationService.NavigateTo(n)}static \u0275fac=function(r){return new(r||e)(ne(rt))};static \u0275cmp=ce({type:e,selectors:[["app-restaurantmanage"]],standalone:!0,features:[de],decls:17,vars:0,consts:[[1,"displaybox"],[1,"logo"],[1,"buttons"],[1,"tablemanage",3,"click"],[1,"settings",3,"click"],[1,"revievs",3,"click"],[1,"stats",3,"click"],[1,"bilings",3,"click"],[1,"footstatic"]],template:function(r,i){r&1&&(L(0,"main")(1,"div",0)(2,"div",1)(3,"h1"),j(4,"EasyOrder"),P()(),L(5,"div",2)(6,"button",3),ee("click",function(){return i.goToPage("tablemanage")}),j(7,"Zarz\u0105dzanie stolikami"),P(),L(8,"button",4),ee("click",function(){return i.goToPage("restaurantsettings")}),j(9,"Ustawienia"),P(),L(10,"button",5),ee("click",function(){return i.goToPage("restaurantrevievs")}),j(11,"Opinie restauracji"),P(),L(12,"button",6),ee("click",function(){return i.goToPage("restaurantstats")}),j(13,"Statystyki"),P(),L(14,"button",7),ee("click",function(){return i.goToPage("restaurantbilings")}),j(15,"P\u0142atno\u015Bci"),P()(),we(16,"div",8),P()())},dependencies:[bn],styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;padding:16px;position:relative}.displaybox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center;position:relative}.logo[_ngcontent-%COMP%]{display:flex;font-size:45%;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center;margin-bottom:48px}.buttons[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center}.buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;background:#fff;padding:24px;font-size:110%;color:#000;font-weight:600;letter-spacing:2px;border:1px solid #000000;transition:all .5s;margin-bottom:24px}"]})}return e})();var Ph={production:!0,firebaseConfig:{apiKey:"AIzaSyC2ak3O4qovvrDLGJ-L3a6E1uLASES2xuU",authDomain:"tablefi-31087.firebaseapp.com",databaseURL:"https://tablefi-31087-default-rtdb.europe-west1.firebasedatabase.app",projectId:"tablefi-31087",storageBucket:"tablefi-31087.appspot.com",messagingSenderId:"821585389969",appId:"1:821585389969:web:9383409a2e5fbf601b5230",measurementId:"G-QXT5KZEKGZ"}};function cV(e,t){e&1&&(L(0,"p"),j(1,"Brak restauracji przypisanych do konta."),P())}function lV(e,t){if(e&1){let n=Ft();L(0,"button",6),ee("click",function(){let i=At(n).$implicit,o=gt(2);return Dt(o.setRestaurant(i.id))}),L(1,"p",7),j(2),P(),L(3,"p",7),j(4),P()()}if(e&2){let n=t.$implicit;oe(2),r0("",n.name," ",n.id,""),oe(2),ho(n.address)}}function uV(e,t){if(e&1&&Gn(0,lV,5,3,"button",5,Wn),e&2){let n=gt();$n(n.restaurants)}}var zA=(()=>{class e{navigationService;restaurants=[];db;constructor(n){this.navigationService=n;let r=Be(Ph.firebaseConfig);this.db=fe(r)}ngOnInit(){this.loadRestaurants()}loadRestaurants(){let n=sessionStorage.getItem("userId"),r=le(this.db,`Owners/${n}/Restaurants`);Ye(r).then(i=>{if(i.exists()){let o=i.val();this.restaurants=Object.values(o),this.restaurants.length===1&&(localStorage.setItem("currentRestaurant",this.restaurants[0].id.toString()),console.log(this.restaurants[0].id.toString()),this.navigationService.NavigateTo("managerestaurant"))}else console.log("No restaurants found for this owner.")}).catch(i=>{console.error("Error loading restaurants:",i)})}setRestaurant(n){localStorage.setItem("currentRestaurant",n),this.navigationService.NavigateTo("managerestaurant")}static \u0275fac=function(r){return new(r||e)(ne(rt))};static \u0275cmp=ce({type:e,selectors:[["app-changerestaurant"]],standalone:!0,features:[de],decls:12,vars:1,consts:[[1,"displaybox"],[1,"logo"],[1,"flexcontainer"],[1,"buttons"],[1,"footstatic"],[1,"restaurant"],[1,"restaurant",3,"click"],["id","datavalve"]],template:function(r,i){r&1&&(L(0,"main")(1,"div",0)(2,"div",1)(3,"h1"),j(4,"EasyOrder"),P()(),L(5,"div",2)(6,"h1"),j(7,"Wybierz restauracj\u0119"),P(),L(8,"div",3),In(9,cV,2,0,"p")(10,uV,2,0),P()(),we(11,"div",4),P()()),r&2&&(oe(9),pn(i.restaurants.length===0?9:10))},styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;padding:16px;position:relative}.displaybox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center;position:relative}.logo[_ngcontent-%COMP%]{display:flex;font-size:45%;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center;margin-bottom:48px}.flexcontainer[_ngcontent-%COMP%]{display:flex;font-size:60%;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center}.flexcontainer[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center;font-size:110%;color:#000;font-weight:600}.flexcontainer[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   .restaurant[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center;background:#fff;padding:24px;font-size:110%;color:#000;font-weight:600;letter-spacing:2px;border:1px solid #000000;transition:all .5s;margin-bottom:24px}.flexcontainer[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   .restaurant[_ngcontent-%COMP%]   #datavalve[_ngcontent-%COMP%]{color:#000;font-weight:800;letter-spacing:2px}"]})}return e})();var WA=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275cmp=ce({type:e,selectors:[["app-restaurantbilings"]],standalone:!0,features:[de],decls:9,vars:0,consts:[[1,"displaybox"],[1,"logo"],[1,"buttons"],[1,"footstatic"]],template:function(r,i){r&1&&(L(0,"main")(1,"div",0)(2,"div",1)(3,"h1"),j(4,"EasyOrder"),P()(),L(5,"div",2)(6,"h1"),j(7,"Brak Projektu!"),P()(),we(8,"div",3),P()())},styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;padding:32px;position:relative;background:#000!important;color:#ffa700}.displaybox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center;position:relative}.logo[_ngcontent-%COMP%]{display:flex;font-size:45%;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center;margin-bottom:48px}body[_ngcontent-%COMP%]{background:#000!important;color:#ffa700}h1[_ngcontent-%COMP%]{font-size:200%}"]})}return e})();var GA=(()=>{class e{navigationService;constructor(n){this.navigationService=n,Be(Qe.firebaseConfig)}goToPage(n){this.navigationService.NavigateTo(n)}deleteaccount(){let n=fe(),r=sessionStorage.getItem("userId"),i=le(n,`Owners/${r}`);za(i).then(()=>{console.log("owner deleted successfully"),this.navigationService.NavigateTo("landingpage")}).catch(o=>{console.error("Error deleting table:",o)})}static \u0275fac=function(r){return new(r||e)(ne(rt))};static \u0275cmp=ce({type:e,selectors:[["app-restaurantsettings"]],standalone:!0,features:[de],decls:19,vars:0,consts:[[1,"displaybox"],[1,"logo"],[1,"buttons"],[1,"alltablesqrcodes",3,"click"],[1,"tablesettings",3,"click"],[1,"waitersoptions",3,"click"],[1,"myrestaaurants",3,"click"],[1,"deleteaccount",3,"click"],[1,"footstatic"]],template:function(r,i){r&1&&(L(0,"main")(1,"div",0)(2,"div",1)(3,"h1"),j(4,"EasyOrder"),P()(),L(5,"div",2)(6,"button",3),ee("click",function(){return i.goToPage("alltablesqrcodes")}),j(7,"Pobierz kody QR Stolik\xF3w"),P(),L(8,"button",4),ee("click",function(){return i.goToPage("tablesettings")}),j(9,"Ustawienia Stolik\xF3w"),P(),L(10,"button",5),ee("click",function(){return i.goToPage("waitersettings")}),j(11,"Opcje dotycz\u0105ce kelner\xF3w"),P(),L(12,"button",6),ee("click",function(){return i.goToPage("changerestaurant")}),j(13,"Moje restauracje"),P(),L(14,"button",6),ee("click",function(){return i.goToPage("newrestaurant")}),j(15,"Dodaj restauracje"),P(),L(16,"button",7),ee("click",function(){return i.deleteaccount()}),j(17,"Usu\u0144 Konto"),P()(),we(18,"div",8),P()())},styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;padding:16px;position:relative}.displaybox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center;position:relative}.logo[_ngcontent-%COMP%]{display:flex;font-size:45%;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center;margin-bottom:48px}.buttons[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center}.buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;background:#fff;padding:24px;font-size:110%;color:#000;font-weight:600;letter-spacing:2px;border:1px solid #000000;transition:all .5s;margin-bottom:24px}"]})}return e})();var $A=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275cmp=ce({type:e,selectors:[["app-restaurantrevievs"]],standalone:!0,features:[de],decls:2,vars:0,template:function(r,i){r&1&&(L(0,"p"),j(1,"restaurantrevievs works!"),P())}})}return e})();var qA=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275cmp=ce({type:e,selectors:[["app-restaurantstats"]],standalone:!0,features:[de],decls:2,vars:0,template:function(r,i){r&1&&(L(0,"p"),j(1,"restaurantstats works!"),P())}})}return e})();function dV(e,t){e&1&&(L(0,"p"),j(1,"Brak stolik\xF3w przypisanych do restauracji."),P())}function fV(e,t){if(e&1){let n=Ft();L(0,"button",6),ee("click",function(){let i=At(n).$implicit,o=gt(2);return Dt(o.setTable(i.id))}),j(1),P()}if(e&2){let n=t.$implicit;oe(),on(" ",n.name," ")}}function hV(e,t){if(e&1&&Gn(0,fV,2,1,"button",5,Wn),e&2){let n=gt();$n(n.tables)}}var YA=(()=>{class e{navigationService;tables=[];constructor(n){this.navigationService=n;let r=Be(Qe.firebaseConfig)}ngOnInit(){this.loadTables()}loadTables(){let n=fe(),r=localStorage.getItem("currentRestaurant"),i=sessionStorage.getItem("userId");if(!r){console.error("No current restaurant found in local storage");return}let o=le(n,`Owners/${i}/Restaurants/${r}/Tables`);Ye(o).then(l=>{if(l.exists()){let h=l.val();this.tables=Object.values(h)}else console.log("No tables found")}).catch(l=>{console.error("Error loading tables:",l)})}setTable(n){localStorage.setItem("currentTable",n),this.goToPage("tableedit")}goToPage(n){this.navigationService.NavigateTo(n)}static \u0275fac=function(r){return new(r||e)(ne(rt))};static \u0275cmp=ce({type:e,selectors:[["app-tablemanage"]],standalone:!0,features:[de],decls:13,vars:1,consts:[[1,"displaybox"],[1,"logo"],[1,"buttons"],[1,"footstatic"],[3,"click"],[1,"table-button"],[1,"table-button",3,"click"]],template:function(r,i){r&1&&(L(0,"main")(1,"div",0)(2,"div",1)(3,"h1"),j(4,"EasyOrder"),P()(),L(5,"div",2),In(6,dV,2,0,"p")(7,hV,2,0),P(),L(8,"div",3)(9,"button",4),ee("click",function(){return i.goToPage("tablecreate")}),j(10,"Dodaj stolik"),P(),L(11,"button",4),ee("click",function(){return i.goToPage("tablegroupmanage")}),j(12,"Edytuj grupy"),P()()()()),r&2&&(oe(6),pn(i.tables.length===0?6:7))},styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;padding:16px;position:relative}.displaybox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center;position:relative}.logo[_ngcontent-%COMP%]{display:flex;font-size:45%;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center;margin-bottom:48px}.buttons[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:flex-start;align-items:center;align-content:center}.buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{text-align:left;width:100%;background:#fff;padding:24px;font-size:110%;color:#000;font-weight:600;letter-spacing:2px;border:1px solid #000000;transition:all .5s;margin-bottom:24px}.footstatic[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center}.footstatic[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:calc(100% - 16px);background:#fff;padding:24px;font-size:110%;color:#000;font-weight:600;letter-spacing:2px;border:1px solid #000000;transition:all .5s;margin-bottom:24px;margin-right:8px}"]})}return e})();var ZA=(()=>{class e{navigationService;name="";description="";constructor(n){this.navigationService=n,Be(Qe.firebaseConfig)}onSubmit(n){n.preventDefault();let r=Date.now().toString(),i="0g",o=localStorage.getItem("currentRestaurant");if(!o){alert("Nie wybrano restauracji.");return}let l={id:r,group_id:i,name:this.name,is_blocked:!1,description:this.description?this.description:""};this.saveTable(l,o)}saveTable(n,r){let i=fe(),o=le(i,`Owners/${sessionStorage.getItem("userId")}/Restaurants/${r}/Tables`);Jt(o,{[n.id]:n}).then(()=>{console.log("Stolik dodany pomy\u015Blnie:",n),this.navigationService.NavigateTo("tablemanage"),this.resetForm()}).catch(l=>{console.error("B\u0142\u0105d podczas dodawania stolika:",l)})}resetForm(){this.name="",this.description=""}static \u0275fac=function(r){return new(r||e)(ne(rt))};static \u0275cmp=ce({type:e,selectors:[["app-tablecreate"]],standalone:!0,features:[de],decls:14,vars:2,consts:[[1,"displaybox"],[1,"logo"],[1,"buttons"],[3,"ngSubmit"],["type","text","id","name","name","name","placeholder","Nazwa Stolika","required","",3,"ngModelChange","ngModel"],["type","text","id","description","name","description","placeholder","Opis . . . ",3,"ngModelChange","ngModel"],["type","submit",1,"addtable"],[1,"footstatic"]],template:function(r,i){r&1&&(L(0,"main")(1,"div",0)(2,"div",1)(3,"h1"),j(4,"EasyOrder"),P()(),L(5,"div",2)(6,"form",3),ee("ngSubmit",function(l){return i.onSubmit(l)}),L(7,"div")(8,"input",4),Vt("ngModelChange",function(l){return Wt(i.name,l)||(i.name=l),l}),P()(),L(9,"div")(10,"input",5),Vt("ngModelChange",function(l){return Wt(i.description,l)||(i.description=l),l}),P()(),L(11,"button",6),j(12,"Dodaj stolik"),P()()(),we(13,"div",7),P()()),r&2&&(oe(8),Bt("ngModel",i.name),oe(2),Bt("ngModel",i.description))},dependencies:[bn,ii,qn,gr,ri,or,ir,Vr],styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;padding:16px;position:relative}.displaybox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center;position:relative}.logo[_ngcontent-%COMP%]{display:flex;font-size:45%;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center;margin-bottom:48px}.buttons[_ngcontent-%COMP%]{width:100%;border:1px solid #000000;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:flex-start;align-items:center;align-content:center}.buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;background:#fff;padding:24px;font-size:110%;color:#000;font-weight:600;letter-spacing:2px;border:1px solid #000000;transition:all .5s;margin-bottom:24px}.footstatic[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center}.footstatic[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:calc(100% - 16px);background:#fff;padding:24px;font-size:110%;color:#000;font-weight:600;letter-spacing:2px;border:1px solid #000000;transition:all .5s;margin-bottom:24px;margin-right:8px}form[_ngcontent-%COMP%]{width:100%;padding:24px;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;border:1px solid #000000;height:24px;margin-bottom:16px}input[_ngcontent-%COMP%]:last-child{height:100px}"]})}return e})();function pV(e,t){if(e&1){let n=Ft();L(0,"button",9),ee("click",function(){At(n);let i=gt(2);return Dt(i.blockTable())}),j(1,"Zablokuj"),P()}}function gV(e,t){if(e&1){let n=Ft();L(0,"button",9),ee("click",function(){At(n);let i=gt(2);return Dt(i.unlockTable())}),j(1,"Odblokuj"),P()}}function mV(e,t){if(e&1&&In(0,pV,2,0,"button")(1,gV,2,0,"button"),e&2){let n=gt();pn((n.table==null?null:n.table.is_blocked)==!1?0:-1),oe(),pn((n.table==null?null:n.table.is_blocked)==!0?1:-1)}}var XA=(()=>{class e{navigationService;tableId=null;table=null;tableGroupName=null;groupColor=null;tableBlockAllowed=!0;restaurantId="";constructor(n){this.navigationService=n,Be(Qe.firebaseConfig)}ngOnInit(){this.loadTable(),this.loadSettings()}loadSettings(){let n=sessionStorage.getItem("userId");if(this.restaurantId=localStorage.getItem("currentRestaurant")??"",!n||!this.restaurantId){console.error("Missing owner or restaurant ID");return}let r=fe(),i=le(r,`Owners/${n}/Restaurants/${this.restaurantId}/settings`);Ye(i).then(o=>{if(o.exists()){let l=o.val();this.tableBlockAllowed=l.table_block_allowed}else console.log("No settings found for this restaurant")}).catch(o=>{console.error("Error loading settings:",o)})}deleteTable(){let n=fe(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant");if(!this.tableId||!r||!i){console.error("Missing table, owner, or restaurant ID");return}let o=le(n,`Owners/${r}/Restaurants/${i}/Tables/${this.tableId}`);za(o).then(()=>{console.log("Table deleted successfully"),this.navigationService.NavigateTo("tablemanage")}).catch(l=>{console.error("Error deleting table:",l)})}blockTable(){let n=fe(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant");if(!this.tableId||!r||!i){console.error("Missing table, owner, or restaurant ID");return}let o=le(n,`Owners/${r}/Restaurants/${i}/Tables/${this.tableId}`);Jt(o,{is_blocked:!0}).then(()=>{console.log("Table blocked successfully"),location.reload()}).catch(l=>{console.error("Error blocking table:",l)})}unlockTable(){let n=fe(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant");if(!this.tableId||!r||!i){console.error("Missing table, owner, or restaurant ID");return}let o=le(n,`Owners/${r}/Restaurants/${i}/Tables/${this.tableId}`);Jt(o,{is_blocked:!1}).then(()=>{console.log("Table unlocked successfully"),location.reload()}).catch(l=>{console.error("Error blocking table:",l)})}saveTable(){}showQRCode(){this.navigationService.NavigateTo("showtableqr")}loadTable(){if(this.tableId=localStorage.getItem("currentTable"),!this.tableId){console.error("No current table found in local storage");return}let n=fe(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant"),o=le(n,`Owners/${r}/Restaurants/${i}/Tables/${this.tableId}`);Ye(o).then(l=>{l.exists()?(this.table=l.val(),this.loadTableGroup()):console.log("No table found")}).catch(l=>{console.error("Error loading table:",l)})}loadTableGroup(){let n=fe(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant");if(!this.table?.group_id||this.table.group_id==="0g"){this.tableGroupName="Stoliki bez grupy",this.groupColor="#000000";return}let o=le(n,`Owners/${r}/Restaurants/${i}/TableGroups/${this.table.group_id}`);Ye(o).then(l=>{if(l.exists()){let h=l.val();this.tableGroupName=h.name,this.groupColor=h.color}else console.log("No group found for this table")}).catch(l=>{console.error("Error loading group:",l)})}static \u0275fac=function(r){return new(r||e)(ne(rt))};static \u0275cmp=ce({type:e,selectors:[["app-tableedit"]],standalone:!0,features:[de],decls:25,vars:6,consts:[[1,"displaybox"],[1,"logo"],[1,"flexcontainer"],[1,"buttons"],[1,"colorbar"],[1,"head"],["name","description","id","description","placeholder","Description","readonly","",3,"value"],[1,"actionbtns"],[1,"arow"],[3,"click"],[1,"footstatic"]],template:function(r,i){r&1&&(L(0,"main")(1,"div",0)(2,"div",1)(3,"h1"),j(4,"EasyOrder"),P()(),L(5,"div",2)(6,"div",3),we(7,"div",4),L(8,"div",5)(9,"h3"),j(10),P(),L(11,"h3"),j(12),P()(),we(13,"textarea",6),L(14,"div",7)(15,"div",8)(16,"button",9),ee("click",function(){return i.deleteTable()}),j(17,"Usu\u0144 stolik"),P(),In(18,mV,2,2),P(),L(19,"div",8)(20,"button"),j(21,"Usu\u0144 zam\xF3wienie"),P(),L(22,"button",9),ee("click",function(){return i.showQRCode()}),j(23,"poka\u017C kod qr"),P()()()()(),we(24,"div",10),P()()),r&2&&(oe(7),Qd("background-color",i.groupColor),oe(3),ho(i.table==null?null:i.table.name),oe(2),ho(i.tableGroupName),oe(),Ni("value",i.table==null?null:i.table.description),oe(5),pn(i.tableBlockAllowed==!0?18:-1))},styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;padding:16px;position:relative}.displaybox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center;position:relative}.flexcontainer[_ngcontent-%COMP%]{width:100%}.logo[_ngcontent-%COMP%]{display:flex;font-size:45%;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center;margin-bottom:48px}.buttons[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center;border:1px solid #000000}.buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:calc(100% - 24px);background:#fff;padding:24px;font-size:110%;color:#000;font-weight:600;letter-spacing:2px;border:1px solid #000000;transition:all .5s}.footstatic[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center}.footstatic[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;background:#fff;padding:24px;font-size:110%;color:#000;font-weight:600;letter-spacing:2px;border:1px solid #000000;transition:all .5s;margin-bottom:24px;margin-right:8px}.arow[_ngcontent-%COMP%]{width:calc(100% - 24px);display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:space-evenly;align-items:center;align-content:center}.arow[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:95%;width:calc(100% - 24px);margin-bottom:16px}.arow[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-child{margin-right:8px}.arow[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-child{margin-left:8px}.actionbtns[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center}.colorbar[_ngcontent-%COMP%]{height:24px;width:100%}.savebtn[_ngcontent-%COMP%]{margin-top:16px;margin-bottom:16px}.head[_ngcontent-%COMP%]{width:100%;padding:8px;display:flex;flex-direction:row;justify-content:space-between;align-items:center;align-content:center}.head[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0}textarea[_ngcontent-%COMP%]{width:calc(100% - 24px);height:100px;margin-bottom:16px;resize:none;border:1px solid #000000}"]})}return e})();var QA=(()=>{class e{route;router;tableId=null;uniqueLinkToken=null;ownerId=null;restaurantid=null;constructor(n,r){this.route=n,this.router=r,Be(Qe.firebaseConfig)}ngOnInit(){this.route.queryParams.subscribe(n=>{this.tableId=n.tableid||null,this.uniqueLinkToken=n.uniqueLinkToken||null,this.ownerId=n.ownerid||null,this.restaurantid=n.restaurantid||null})}setTable(n){let r=localStorage.getItem("currentRestaurant"),i=fe();if(!this.ownerId||!this.restaurantid||!this.tableId||!this.uniqueLinkToken){console.error("Missing required data");return}let o=le(i,`Owners/${this.ownerId}/Restaurants/${r}/settings`);Ye(o).then(l=>{l.exists()?l.val().order_number_typed_by_waiter_required?this.verifyOrderNumber(n):this.saveTableAssignment(n):console.error("Settings not found")}).catch(l=>{console.error("Error loading settings:",l)})}verifyOrderNumber(n){let r=fe(),i=le(r,`Owners/${this.ownerId}/Restaurants/${this.restaurantid}/Orders`);Ye(i).then(o=>{if(o.exists()){let l=o.val();Object.values(l).some(g=>g.name===n)?this.saveTableAssignment(n):console.error("Order not found")}else console.log("No orders found")}).catch(o=>{console.error("Error checking order number:",o)})}saveTableAssignment(n){localStorage.setItem("customercurrentTable",this.tableId),localStorage.setItem("uniqueLinkToken",this.uniqueLinkToken),localStorage.setItem("orderNumber",n),localStorage.setItem("restaurantid",this.restaurantid),localStorage.setItem("ownerid",this.ownerId),this.router.navigate(["/tableordered"])}static \u0275fac=function(r){return new(r||e)(ne(ti),ne(ni))};static \u0275cmp=ce({type:e,selectors:[["app-settable"]],standalone:!0,features:[de],decls:13,vars:0,consts:[["orderNumberInput",""],[1,"displaybox"],[1,"logo"],[1,"buttons"],["type","number","placeholder","numer zam\xF3wienia"],[3,"click"],[1,"footstatic"]],template:function(r,i){if(r&1){let o=Ft();L(0,"main")(1,"div",1)(2,"div",2)(3,"h1"),j(4,"EasyOrder"),P()(),L(5,"div",3)(6,"label"),j(7,"Wprowad\u017A numer zam\xF3wienia"),P(),we(8,"input",4,0),L(10,"button",5),ee("click",function(){At(o);let h=ef(9);return Dt(i.setTable(h.value))}),j(11,"Przypisz stolik"),P()(),we(12,"div",6),P()()}}})}return e})();function yV(e,t){if(e&1){let n=Ft();L(0,"div",8),ee("dragstart",function(i){let o=At(n).$implicit,l=gt();return Dt(l.onDragStart(i,o))}),L(1,"button",9),ee("click",function(){let i=At(n).$implicit,o=gt();return Dt(o.setTable(i.id))}),j(2),P()()}if(e&2){let n=t.$implicit;oe(2),on(" ",n.name," ")}}function _V(e,t){if(e&1){let n=Ft();L(0,"div",8),ee("dragstart",function(i){let o=At(n).$implicit,l=gt(2);return Dt(l.onDragStart(i,o))}),L(1,"button",9),ee("click",function(){let i=At(n).$implicit,o=gt(2);return Dt(o.setTable(i.id))}),j(2),P()()}if(e&2){let n=t.$implicit;oe(2),on(" ",n.name," ")}}function wV(e,t){if(e&1){let n=Ft();L(0,"div",2),ee("dragover",function(i){At(n);let o=gt();return Dt(o.allowDrop(i))})("drop",function(i){let o=At(n).$implicit,l=gt();return Dt(l.onDrop(i,o.id))}),L(1,"div",3)(2,"h3"),j(3),P()(),Gn(4,_V,3,1,"div",4,Wn),P()}if(e&2){let n=t.$implicit,r=gt();oe(3),ho(n.name),oe(),$n(r.getTablesForGroup(n.id))}}var KA=(()=>{class e{navigationService;cd;tableGroups=[];tables=[];draggedTableId=null;ungroupedTables=[];constructor(n,r){this.navigationService=n,this.cd=r,Be(Qe.firebaseConfig)}ngOnInit(){this.loadGroupsAndTables()}loadGroupsAndTables(){let n=fe(),r=localStorage.getItem("currentRestaurant"),i=sessionStorage.getItem("userId");if(!r){console.error("No current restaurant found in local storage");return}let o=le(n,`Owners/${i}/Restaurants/${r}/Tables`),l=le(n,`Owners/${i}/Restaurants/${r}/TableGroups`);Ye(o).then(h=>{h.exists()?(this.tables=Object.values(h.val()),this.ungroupedTables=this.tables.filter(g=>g.group_id==="0g")):console.log("No tables found")}).catch(h=>{console.error("Error loading tables:",h)}),Ye(l).then(h=>{h.exists()?this.tableGroups=Object.values(h.val()):console.log("No table groups found")}).catch(h=>{console.error("Error loading table groups:",h)})}getTablesForGroup(n){return this.tables.filter(r=>r.group_id===n)}onDragStart(n,r){this.draggedTableId=r.id,n.dataTransfer?.setData("text",r.id)}onDrop(n,r){n.preventDefault();let i=this.draggedTableId||n.dataTransfer?.getData("text");if(i){let o=this.tables.find(l=>l.id===i);o&&(o.group_id==="0g"&&(this.ungroupedTables=this.ungroupedTables.filter(l=>l.id!==o.id)),o.group_id=r,r==="0g"&&this.ungroupedTables.push(o),this.updateTableGroup(o),this.cd.detectChanges(),this.draggedTableId=null)}}allowDrop(n){n.preventDefault()}updateTableGroup(n){let r=fe(),i=localStorage.getItem("currentRestaurant"),o=sessionStorage.getItem("userId");if(!i){console.error("No current restaurant found in local storage");return}let l=le(r,`Owners/${o}/Restaurants/${i}/Tables/${n.id}`);Jt(l,{group_id:n.group_id}).then(()=>{console.log(`Table ${n.name} moved to group ${n.group_id}`)}).catch(h=>{console.error("Error updating table group:",h)})}setTable(n){localStorage.setItem("currentTable",n),this.goToPage("tableedit")}goToPage(n){this.navigationService.NavigateTo(n)}static \u0275fac=function(r){return new(r||e)(ne(rt),ne(Ri))};static \u0275cmp=ce({type:e,selectors:[["app-tablegroupmanage"]],standalone:!0,features:[de],decls:16,vars:0,consts:[[1,"displaybox"],[1,"logo"],[1,"table-group",3,"dragover","drop"],[1,"head"],["draggable","true"],[1,"table-group"],[1,"footstatic"],[3,"click"],["draggable","true",3,"dragstart"],[1,"table-button",3,"click"]],template:function(r,i){r&1&&(L(0,"main")(1,"div",0)(2,"div",1)(3,"h1"),j(4,"EasyOrder"),P()(),L(5,"div",2),ee("dragover",function(l){return i.allowDrop(l)})("drop",function(l){return i.onDrop(l,"0g")}),L(6,"div",3)(7,"h3"),j(8,"Stoliki bez grupy"),P()(),Gn(9,yV,3,1,"div",4,Wn),P(),Gn(11,wV,6,1,"div",5,Wn),L(13,"div",6)(14,"button",7),ee("click",function(){return i.goToPage("tablegroupcreate")}),j(15,"Dodaj now\u0105 grup\u0119"),P()()()()),r&2&&(oe(9),$n(i.ungroupedTables),oe(2),$n(i.tableGroups))},styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;padding:16px;position:relative}.displaybox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center;position:relative}.logo[_ngcontent-%COMP%]{display:flex;font-size:45%;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center;margin-bottom:48px}.buttons[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:flex-start;align-items:center;align-content:center}.buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{text-align:left;width:100%;background:#fff;padding:24px;font-size:110%;color:#000;font-weight:600;letter-spacing:2px;border:1px solid #000000;transition:all .5s;margin-bottom:24px}.footstatic[_ngcontent-%COMP%]{width:100%}.footstatic[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;background:#fff;padding:24px;font-size:110%;color:#000;font-weight:600;letter-spacing:2px;border:1px solid #000000;transition:all .5s;margin-bottom:24px;margin-right:8px}.table-group[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:flex-start;align-items:flex-start;align-content:center;border:1px solid #000000;padding:0;margin-bottom:20px;min-height:100px}.table-group[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{width:100%;padding:8px;height:40px;font-size:100%;border:1px solid #000000}.table-group[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0}.table-group[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:100%}.table-button[_ngcontent-%COMP%]{width:100%;border:1px solid #000000;height:60px;display:block;text-align:left;margin-bottom:0;padding:8px;font-weight:700}.table-group[_ngcontent-%COMP%]:hover{background-color:#f1f1f1}"]})}return e})();var JA=(()=>{class e{navigationService;name="";description="";color="";location="";constructor(n){this.navigationService=n,Be(Qe.firebaseConfig)}onSubmit(n){n.preventDefault();let r=Date.now().toString(),i=localStorage.getItem("currentRestaurant");if(!i){alert("Nie wybrano restauracji.");return}let o={id:r,name:this.name,color:this.color,description:this.description?this.description:"",location:this.location?this.location:""};this.saveTableGroup(o,i)}saveTableGroup(n,r){let i=fe(),o=le(i,`Owners/${sessionStorage.getItem("userId")}/Restaurants/${r}/TableGroups`);Jt(o,{[n.id]:n}).then(()=>{console.log("Grupa stolik\xF3w dodana pomy\u015Blnie:",n),this.navigationService.NavigateTo("tablegroupmanage"),this.resetForm()}).catch(l=>{console.error("B\u0142\u0105d podczas dodawania grupy stolik\xF3w:",l)})}resetForm(){this.name="",this.description="",this.color="",this.location=""}static \u0275fac=function(r){return new(r||e)(ne(rt))};static \u0275cmp=ce({type:e,selectors:[["app-tablegroupcreate"]],standalone:!0,features:[de],decls:18,vars:4,consts:[[1,"displaybox"],[1,"logo"],[1,"buttons"],[3,"ngSubmit"],["type","text","id","name","name","name","placeholder","Nazwa Grupy Stolika","required","",3,"ngModelChange","ngModel"],["type","text","id","description","name","description","placeholder","Opis grupy . . . ",3,"ngModelChange","ngModel"],["type","color","id","color","name","color","placeholder","Kolor grupy",3,"ngModelChange","ngModel"],["type","text","id","location","name","location","placeholder","Lokalizacja grupy",3,"ngModelChange","ngModel"],["type","submit",1,"addtable"],[1,"footstatic"]],template:function(r,i){r&1&&(L(0,"main")(1,"div",0)(2,"div",1)(3,"h1"),j(4,"EasyOrder"),P()(),L(5,"div",2)(6,"form",3),ee("ngSubmit",function(l){return i.onSubmit(l)}),L(7,"div")(8,"input",4),Vt("ngModelChange",function(l){return Wt(i.name,l)||(i.name=l),l}),P()(),L(9,"div")(10,"input",5),Vt("ngModelChange",function(l){return Wt(i.description,l)||(i.description=l),l}),P()(),L(11,"div")(12,"input",6),Vt("ngModelChange",function(l){return Wt(i.color,l)||(i.color=l),l}),P()(),L(13,"div")(14,"input",7),Vt("ngModelChange",function(l){return Wt(i.location,l)||(i.location=l),l}),P()(),L(15,"button",8),j(16,"Dodaj grup\u0119 stolik\xF3w"),P()()(),we(17,"div",9),P()()),r&2&&(oe(8),Bt("ngModel",i.name),oe(2),Bt("ngModel",i.description),oe(2),Bt("ngModel",i.color),oe(2),Bt("ngModel",i.location))},dependencies:[bn,ii,qn,gr,ri,or,ir,Vr]})}return e})();var Xa=Tw(tT(),1);var p7=["qrcElement"],$h=(()=>{class e{constructor(n,r){this.renderer=n,this.sanitizer=r,this.allowEmptyString=!1,this.colorDark="#000000ff",this.colorLight="#ffffffff",this.cssClass="qrcode",this.elementType="canvas",this.errorCorrectionLevel="M",this.margin=4,this.qrdata="",this.scale=4,this.width=10,this.qrCodeURL=new Tt,this.context=null}ngOnChanges(){return X(this,null,function*(){yield this.createQRCode()})}isValidQrCodeText(n){return this.allowEmptyString===!1?!(typeof n>"u"||n===""||n==="null"||n===null):!(typeof n>"u")}toDataURL(n){return new Promise((r,i)=>{(0,Xa.toDataURL)(this.qrdata,n,(o,l)=>{o?i(o):r(l)})})}toCanvas(n,r){return new Promise((i,o)=>{(0,Xa.toCanvas)(n,this.qrdata,r,l=>{l?o(l):i("success")})})}toSVG(n){return new Promise((r,i)=>{(0,Xa.toString)(this.qrdata,n,(o,l)=>{o?i(o):r(l)})})}renderElement(n){for(let r of this.qrcElement.nativeElement.childNodes)this.renderer.removeChild(this.qrcElement.nativeElement,r);this.renderer.appendChild(this.qrcElement.nativeElement,n)}createQRCode(){return X(this,null,function*(){this.version&&this.version>40?(console.warn("[angularx-qrcode] max value for `version` is 40"),this.version=40):this.version&&this.version<1?(console.warn("[angularx-qrcode]`min value for `version` is 1"),this.version=1):this.version!==void 0&&isNaN(this.version)&&(console.warn("[angularx-qrcode] version should be a number, defaulting to auto."),this.version=void 0);try{if(!this.isValidQrCodeText(this.qrdata))throw new Error("[angularx-qrcode] Field `qrdata` is empty, set 'allowEmptyString=\"true\"' to overwrite this behaviour.");this.isValidQrCodeText(this.qrdata)&&this.qrdata===""&&(this.qrdata=" ");let n={color:{dark:this.colorDark,light:this.colorLight},errorCorrectionLevel:this.errorCorrectionLevel,margin:this.margin,scale:this.scale,version:this.version,width:this.width},r=this.imageSrc,i=this.imageHeight||40,o=this.imageWidth||40;switch(this.elementType){case"canvas":{let l=this.renderer.createElement("canvas");this.context=l.getContext("2d"),this.toCanvas(l,n).then(()=>{if(this.ariaLabel&&this.renderer.setAttribute(l,"aria-label",`${this.ariaLabel}`),this.title&&this.renderer.setAttribute(l,"title",`${this.title}`),r&&this.context){this.centerImage=new Image(o,i),r!==this.centerImage.src&&(this.centerImage.crossOrigin="anonymous",this.centerImage.src=r),i!==this.centerImage.height&&(this.centerImage.height=i),o!==this.centerImage.width&&(this.centerImage.width=o);let h=this.centerImage;h&&(h.onload=()=>{this.context?.drawImage(h,l.width/2-o/2,l.height/2-i/2,o,i)})}this.renderElement(l),this.emitQRCodeURL(l)}).catch(h=>{console.error("[angularx-qrcode] canvas error:",h)});break}case"svg":{let l=this.renderer.createElement("div");this.toSVG(n).then(h=>{this.renderer.setProperty(l,"innerHTML",h);let g=l.firstChild;this.renderer.setAttribute(g,"height",`${this.width}`),this.renderer.setAttribute(g,"width",`${this.width}`),this.renderElement(g),this.emitQRCodeURL(g)}).catch(h=>{console.error("[angularx-qrcode] svg error:",h)});break}case"url":case"img":default:{let l=this.renderer.createElement("img");this.toDataURL(n).then(h=>{this.alt&&l.setAttribute("alt",this.alt),this.ariaLabel&&l.setAttribute("aria-label",this.ariaLabel),l.setAttribute("src",h),this.title&&l.setAttribute("title",this.title),this.renderElement(l),this.emitQRCodeURL(l)}).catch(h=>{console.error("[angularx-qrcode] img/url error:",h)})}}}catch(n){console.error("[angularx-qrcode] Error generating QR Code:",n.message)}})}convertBase64ImageUrlToBlob(n){let r=n.split(";base64,"),i=r[0].split(":")[1],o=atob(r[1]),l=new Uint8Array(o.length);for(let h=0;h<o.length;++h)l[h]=o.charCodeAt(h);return new Blob([l],{type:i})}emitQRCodeURL(n){let r=n.constructor.name;if(r===SVGSVGElement.name){let g=n.outerHTML,m=new Blob([g],{type:"image/svg+xml"}),C=URL.createObjectURL(m),E=this.sanitizer.bypassSecurityTrustUrl(C);this.qrCodeURL.emit(E);return}let i="";r===HTMLCanvasElement.name&&(i=n.toDataURL("image/png")),r===HTMLImageElement.name&&(i=n.src);let o=this.convertBase64ImageUrlToBlob(i),l=URL.createObjectURL(o),h=this.sanitizer.bypassSecurityTrustUrl(l);this.qrCodeURL.emit(h)}static{this.\u0275fac=function(r){return new(r||e)(ne(fo),ne(y0))}}static{this.\u0275cmp=ce({type:e,selectors:[["qrcode"]],viewQuery:function(r,i){if(r&1&&Jd(p7,7),r&2){let o;kc(o=Lc())&&(i.qrcElement=o.first)}},inputs:{allowEmptyString:"allowEmptyString",colorDark:"colorDark",colorLight:"colorLight",cssClass:"cssClass",elementType:"elementType",errorCorrectionLevel:"errorCorrectionLevel",imageSrc:"imageSrc",imageHeight:"imageHeight",imageWidth:"imageWidth",margin:"margin",qrdata:"qrdata",scale:"scale",version:"version",width:"width",alt:"alt",ariaLabel:"ariaLabel",title:"title"},outputs:{qrCodeURL:"qrCodeURL"},features:[Si],decls:2,vars:2,consts:[["qrcElement",""]],template:function(r,i){r&1&&we(0,"div",null,0),r&2&&mI(i.cssClass)},encapsulation:2,changeDetection:0})}}return e})(),qh=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=Ei({type:e})}static{this.\u0275inj=Ci({})}}return e})();var rT=(()=>{class e{navigationService;tableId=null;table=null;tableGroupName=null;groupColor=null;uniqueLinkToken=null;constructor(n){this.navigationService=n,Be(Qe.firebaseConfig)}ngOnInit(){this.loadTable(),this.loadUniqueLinkToken()}loadUniqueLinkToken(){let n=fe(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant"),o=le(n,`Owners/${r}/Restaurants/${i}/uniqueLinkToken`);Ye(o).then(l=>{l.exists()?this.uniqueLinkToken=l.val():console.log("No unique link token found")}).catch(l=>{console.error("Error loading unique link token:",l)})}deleteTable(){let n=fe(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant");if(!this.tableId||!r||!i){console.error("Missing table, owner, or restaurant ID");return}let o=le(n,`Owners/${r}/Restaurants/${i}/Tables/${this.tableId}`);za(o).then(()=>{console.log("Table deleted successfully"),this.navigationService.NavigateTo("tablemanage")}).catch(l=>{console.error("Error deleting table:",l)})}blockTable(){let n=fe(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant");if(!this.tableId||!r||!i){console.error("Missing table, owner, or restaurant ID");return}let o=le(n,`Owners/${r}/Restaurants/${i}/Tables/${this.tableId}`);Jt(o,{is_blocked:!0}).then(()=>{console.log("Table blocked successfully"),location.reload()}).catch(l=>{console.error("Error blocking table:",l)})}unlockTable(){let n=fe(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant");if(!this.tableId||!r||!i){console.error("Missing table, owner, or restaurant ID");return}let o=le(n,`Owners/${r}/Restaurants/${i}/Tables/${this.tableId}`);Jt(o,{is_blocked:!1}).then(()=>{console.log("Table unlocked successfully"),location.reload()}).catch(l=>{console.error("Error unlocking table:",l)})}saveTable(){}loadTable(){if(this.tableId=localStorage.getItem("currentTable"),!this.tableId){console.error("No current table found in local storage");return}let n=fe(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant"),o=le(n,`Owners/${r}/Restaurants/${i}/Tables/${this.tableId}`);Ye(o).then(l=>{l.exists()?(this.table=l.val(),this.loadTableGroup()):console.log("No table found")}).catch(l=>{console.error("Error loading table:",l)})}loadTableGroup(){let n=fe(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant");if(!this.table?.group_id||this.table.group_id==="0g"){this.tableGroupName="Stoliki bez grupy",this.groupColor="#000000";return}let o=le(n,`Owners/${r}/Restaurants/${i}/TableGroups/${this.table.group_id}`);Ye(o).then(l=>{if(l.exists()){let h=l.val();this.tableGroupName=h.name,this.groupColor=h.color}else console.log("No group found for this table")}).catch(l=>{console.error("Error loading group:",l)})}getQRCodeData(){let n=this.table?.id||"",r=this.uniqueLinkToken||"",i=sessionStorage.getItem("userId"),o=localStorage.getItem("currentRestaurant");return`https://easyorder.mandarin.com.pl/settable?tableid=${n}&uniqueLinkToken=${r}&ownerid=${i}&restaurantid=${o}`}static \u0275fac=function(r){return new(r||e)(ne(rt))};static \u0275cmp=ce({type:e,selectors:[["app-showtableqr"]],standalone:!0,features:[de],decls:3,vars:13,consts:[[1,"qrcodeImage"],[3,"qrdata","allowEmptyString","alt","ariaLabel","cssClass","colorDark","colorLight","elementType","errorCorrectionLevel","margin","scale","title","width"]],template:function(r,i){r&1&&(L(0,"main")(1,"div",0),we(2,"qrcode",1),P()()),r&2&&(oe(2),Ni("qrdata","https://easyorder.mandarin.com.pl/settable?tableid="+((i.table==null?null:i.table.id)||"")+"&uniqueLinkToken="+(i.uniqueLinkToken||""))("allowEmptyString",!0)("alt","A custom alt attribute")("ariaLabel","QR Code image with the following content...")("cssClass","center")("colorDark","#000000ff")("colorLight","#ffffffff")("elementType","img")("errorCorrectionLevel","H")("margin",4)("scale",1)("title","A custom title attribute")("width",300))},dependencies:[qh,$h]})}return e})();var iT=(()=>{class e{tableChangeAllowed=!1;tableBlockAllowed=!1;restaurantId=null;constructor(){Be(Qe.firebaseConfig)}ngOnInit(){this.loadSettings()}loadSettings(){let n=sessionStorage.getItem("userId");if(this.restaurantId=localStorage.getItem("currentRestaurant"),!n||!this.restaurantId){console.error("Missing owner or restaurant ID");return}let r=fe(),i=le(r,`Owners/${n}/Restaurants/${this.restaurantId}/settings`);Ye(i).then(o=>{if(o.exists()){let l=o.val();this.tableChangeAllowed=l.table_change_allowed,this.tableBlockAllowed=l.table_block_allowed}else console.log("No settings found for this restaurant")}).catch(o=>{console.error("Error loading settings:",o)})}toggleTableChangeAllowed(){this.tableChangeAllowed=!this.tableChangeAllowed,this.saveSettings()}toggleTableBlockAllowed(){this.tableBlockAllowed=!this.tableBlockAllowed,this.saveSettings()}saveSettings(){let n=sessionStorage.getItem("userId");if(!n||!this.restaurantId){console.error("Missing owner or restaurant ID");return}let r=fe(),i=le(r,`Owners/${n}/Restaurants/${this.restaurantId}/settings`);Jt(i,{table_change_allowed:this.tableChangeAllowed,table_block_allowed:this.tableBlockAllowed}).then(()=>{console.log("Settings updated successfully")}).catch(o=>{console.error("Error updating settings:",o)})}static \u0275fac=function(r){return new(r||e)};static \u0275cmp=ce({type:e,selectors:[["app-tablesettings"]],standalone:!0,features:[de],decls:15,vars:2,consts:[[1,"displaybox"],[1,"logo"],[1,"buttons"],[3,"click"],[1,"footstatic"]],template:function(r,i){r&1&&(L(0,"main")(1,"div",0)(2,"div",1)(3,"h1"),j(4,"EasyOrder"),P()(),L(5,"div",2)(6,"label"),j(7,"Opcja Zmiany stolika:"),P(),L(8,"button",3),ee("click",function(){return i.toggleTableChangeAllowed()}),j(9),P(),L(10,"label"),j(11,"Opcja blokowania stolik\xF3w:"),P(),L(12,"button",3),ee("click",function(){return i.toggleTableBlockAllowed()}),j(13),P()(),we(14,"div",4),P()()),r&2&&(oe(9),on(" ",i.tableChangeAllowed?"W\u0142\u0105czona":"Wy\u0142\u0105czona"," "),oe(4),on(" ",i.tableBlockAllowed?"W\u0142\u0105czona":"Wy\u0142\u0105czona"," "))}})}return e})();var g7=["pin"],oT=(()=>{class e{order_number_typed_by_waiter_required=!1;waiter_access_pin=1234;restaurantId=null;pinRef;constructor(){Be(Qe.firebaseConfig)}ngOnInit(){this.loadSettings()}ngAfterViewInit(){this.pinRef||console.error("PIN input element not found")}loadSettings(){let n=sessionStorage.getItem("userId");if(this.restaurantId=localStorage.getItem("currentRestaurant"),!n||!this.restaurantId){console.error("Missing owner or restaurant ID");return}let r=fe(),i=le(r,`Owners/${n}/Restaurants/${this.restaurantId}/settings`);Ye(i).then(o=>{if(o.exists()){let l=o.val();this.order_number_typed_by_waiter_required=l.order_number_typed_by_waiter_required,this.waiter_access_pin=l.waiter_access_pin}else console.log("No settings found for this restaurant")}).catch(o=>{console.error("Error loading settings:",o)})}toggleTableChangeAllowed(){this.order_number_typed_by_waiter_required=!this.order_number_typed_by_waiter_required,this.saveSettings()}toggleTableBlockAllowed(){this.pinRef&&this.pinRef.nativeElement?(this.waiter_access_pin=this.pinRef.nativeElement.value,this.saveSettings()):console.error("PIN input element not available")}saveSettings(){let n=sessionStorage.getItem("userId");if(!n||!this.restaurantId){console.error("Missing owner or restaurant ID");return}let r=fe(),i=le(r,`Owners/${n}/Restaurants/${this.restaurantId}/settings`);Jt(i,{order_number_typed_by_waiter_required:this.order_number_typed_by_waiter_required,waiter_access_pin:this.waiter_access_pin}).then(()=>{console.log("Settings updated successfully")}).catch(o=>{console.error("Error updating settings:",o)})}static \u0275fac=function(r){return new(r||e)};static \u0275cmp=ce({type:e,selectors:[["app-waitersettings"]],viewQuery:function(r,i){if(r&1&&Jd(g7,5),r&2){let o;kc(o=Lc())&&(i.pinRef=o.first)}},standalone:!0,features:[de],decls:17,vars:2,consts:[["pin",""],[1,"displaybox"],[1,"logo"],[1,"buttons"],[3,"click"],["type","number",3,"value"],[1,"footstatic"]],template:function(r,i){if(r&1){let o=Ft();L(0,"main")(1,"div",1)(2,"div",2)(3,"h1"),j(4,"EasyOrder"),P()(),L(5,"div",3)(6,"label"),j(7,"Opcja Zmiany stolika:"),P(),L(8,"button",4),ee("click",function(){return At(o),Dt(i.toggleTableChangeAllowed())}),j(9),P(),L(10,"label"),j(11,"Opcja blokowania stolik\xF3w:"),P(),we(12,"input",5,0),L(14,"button",4),ee("click",function(){return At(o),Dt(i.toggleTableBlockAllowed())}),j(15,"Update PIN"),P()(),we(16,"div",6),P()()}r&2&&(oe(9),on(" ",i.order_number_typed_by_waiter_required?"W\u0142\u0105czona":"Wy\u0142\u0105czona"," "),oe(3),Ni("value",i.waiter_access_pin))}})}return e})();function m7(e,t){if(e&1&&(L(0,"div",2),we(1,"qrcode",3),P()),e&2){let n=t.$implicit,r=gt();oe(),Ni("qrdata",r.getQRCodeData(n.id))("allowEmptyString",!0)("alt","QR code for table "+n.name)("cssClass","center")("colorDark","#000000ff")("colorLight","#ffffffff")("elementType","img")("errorCorrectionLevel","H")("margin",4)("scale",1)("width",300)}}var sT=(()=>{class e{tables=[];uniqueLinkToken=null;constructor(){Be(Qe.firebaseConfig)}ngOnInit(){this.loadTables(),this.loadUniqueLinkToken()}loadTables(){let n=sessionStorage.getItem("userId"),r=localStorage.getItem("currentRestaurant");if(!n||!r){console.error("Missing owner or restaurant ID");return}let i=fe(),o=le(i,`Owners/${n}/Restaurants/${r}/Tables`);Ye(o).then(l=>{l.exists()?this.tables=Object.values(l.val()):console.log("No tables found")}).catch(l=>{console.error("Error loading tables:",l)})}loadUniqueLinkToken(){let n=fe(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant"),o=le(n,`Owners/${r}/Restaurants/${i}/uniqueLinkToken`);Ye(o).then(l=>{l.exists()?this.uniqueLinkToken=l.val():console.log("No unique link token found")}).catch(l=>{console.error("Error loading unique link token:",l)})}getQRCodeData(n){let r=this.uniqueLinkToken||"",i=sessionStorage.getItem("userId"),o=localStorage.getItem("currentRestaurant");return`https://easyorder.mandarin.com.pl/settable?tableid=${n}&uniqueLinkToken=${r}&ownerid=${i}&restaurantid=${o}`}printQRCodePage(){window.print()}static \u0275fac=function(r){return new(r||e)};static \u0275cmp=ce({type:e,selectors:[["app-alltableqrcodes"]],standalone:!0,features:[de],decls:6,vars:0,consts:[[3,"click"],[1,"qr-code-container"],[1,"qr-container"],[3,"qrdata","allowEmptyString","alt","cssClass","colorDark","colorLight","elementType","errorCorrectionLevel","margin","scale","width"]],template:function(r,i){r&1&&(L(0,"div")(1,"button",0),ee("click",function(){return i.printQRCodePage()}),j(2,"Print QR Codes"),P()(),L(3,"div",1),Gn(4,m7,2,11,"div",2,Wn),P()),r&2&&(oe(4),$n(i.tables))},dependencies:[qh,$h],styles:[".qr-code-container[_ngcontent-%COMP%]{width:100%;min-height:max-content;display:flex;flex-wrap:wrap;justify-content:center}.qr-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;flex-wrap:nowrap;width:375px;height:565px;background:url(https://cdn1.mandarin.com.pl/qrbg2.png) no-repeat center center;background-size:cover;margin:10px;padding:10px;text-align:center;border:1px dashed black}@media print{button[_ngcontent-%COMP%]{display:none}.qr-code-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-between;margin:0;padding:0}.qr-code-box[_ngcontent-%COMP%]{width:calc(50% - 10px);height:565px;margin:5px;text-align:center;page-break-inside:avoid}.qr-code-container[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:nth-child(2n){page-break-after:always}body[_ngcontent-%COMP%]{background-color:#fff;margin:0}}"]})}return e})();var aT=(()=>{class e{constructor(){Be(Ph.firebaseConfig)}getOrderList(n){let r=fe(),i=le(r,`Owners/${sessionStorage.getItem("userId")}/Restaurants/${n}/Orders`);return new be(o=>(hA(i,l=>{if(l.exists()){let h=l.val();o.next(Object.values(h))}else o.next([])},l=>{o.error(l)}),()=>{}))}static \u0275fac=function(r){return new(r||e)};static \u0275prov=ge({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function _7(e,t){e&1&&(L(0,"h2"),j(1,"Loading order status..."),P())}function w7(e,t){if(e&1&&(L(0,"h2"),j(1),P()),e&2){let n=gt(2);oe(),on(" ",n.status||"Status not available","")}}function v7(e,t){if(e&1&&In(0,w7,2,1,"h2"),e&2){let n=t.$implicit,r=gt();pn(n.table_id==r.tableId?0:-1)}}function C7(e,t){e&1&&(L(0,"h2"),j(1,"No current order found."),P())}function E7(e,t){if(e&1){let n=Ft();L(0,"button",5),ee("click",function(){At(n);let i=gt();return Dt(i.changetable())}),j(1,"Zmie\u0144 stolik"),P()}}var cT=(()=>{class e{databaseService;navigationService;tableId=null;uniqueLinkToken=null;orderNumber=null;ownerId=null;restaurantid=null;orderList=null;updateSubscription=null;status;constructor(n,r){this.databaseService=n,this.navigationService=r,Be(Qe.firebaseConfig)}ngOnInit(){this.tableId=localStorage.getItem("customercurrentTable"),this.uniqueLinkToken=localStorage.getItem("uniqueLinkToken"),this.orderNumber=localStorage.getItem("orderNumber"),this.restaurantid=localStorage.getItem("restaurantid"),this.ownerId=localStorage.getItem("ownerid"),this.orderNumber?this.processOrder(this.orderNumber):console.error("Order number is missing"),this.startOrderUpdates()}ngOnDestroy(){this.updateSubscription?.unsubscribe()}processOrder(n){if(!this.ownerId||!this.restaurantid||!this.tableId||!this.uniqueLinkToken){console.error("Missing required data");return}let r=fe(),i=le(r,`Owners/${this.ownerId}/Restaurants/${this.restaurantid}/Orders`);Ye(i).then(o=>{if(o.exists()){let l=o.val(),h=Object.keys(l).find(g=>l[g].name===n);h?this.updateOrderWithTable(h):this.createNewOrder(n)}else console.log("No orders found, creating a new order"),this.createNewOrder(n)}).catch(o=>{console.error("Error checking orders:",o)})}updateOrderWithTable(n){let r=fe(),i=le(r,`Owners/${this.ownerId}/Restaurants/${this.restaurantid}/Orders/${n}`);Jt(i,{table_id:this.tableId}).then(()=>{console.log("Order updated with table ID successfully")}).catch(o=>{console.error("Error updating order:",o)})}createNewOrder(n){let r=fe(),i={name:n,waiter_get_order_at_table:!1,created_at:Date.now(),canceled_at:null,completed_at:null,table_id:this.tableId,waiter_set_order_number:!0,table_id_entered_by_waiter:!0,completed_during_table_clean:!1},o=le(r,`Owners/${this.ownerId}/Restaurants/${this.restaurantid}/Orders`),l=Date.now().toString();Jt(o,{[l]:i}).then(()=>{console.log("New order created successfully:",i)}).catch(h=>{console.error("Error creating new order:",h)})}startOrderUpdates(){if(!this.restaurantid){console.error("Restaurant ID is missing");return}this.updateSubscription=$p(0,15e3).subscribe(()=>{this.databaseService.getOrderList(this.restaurantid).subscribe(n=>{this.orderList=n.map(r=>Ue(K({},r),{status:this.getOrderStatus(r)}))})})}changetable(){this.navigationService.NavigateTo("scanqrcode")}getOrderStatus(n){n.canceled_at?this.status="Anulowano":n.completed_at?this.status="Zrealizowane":n.created_at?this.status="W realizacji":this.status="Nieznany status"}static \u0275fac=function(r){return new(r||e)(ne(aT),ne(rt))};static \u0275cmp=ce({type:e,selectors:[["app-tableordered"]],standalone:!0,features:[de],decls:12,vars:3,consts:[[1,"displaybox"],[1,"logo"],[1,"buttons"],[1,"addtable"],[1,"footstatic"],[1,"addtable",3,"click"]],template:function(r,i){r&1&&(L(0,"main")(1,"div",0)(2,"div",1)(3,"h1"),j(4,"EasyOrder"),P()(),L(5,"div",2),In(6,_7,2,0,"h2"),Gn(7,v7,1,1,null,null,Wn),In(9,C7,2,0,"h2")(10,E7,2,0,"button",3),P(),we(11,"div",4),P()()),r&2&&(oe(6),pn(i.orderList===null?6:-1),oe(),$n(i.orderList),oe(2),pn(i.orderList&&i.orderList.length===0?9:-1),oe(),pn(i.orderList&&i.orderList.length<=1?10:-1))},styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;padding:16px;position:relative}.displaybox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center;position:relative}.logo[_ngcontent-%COMP%]{display:flex;font-size:45%;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center;margin-bottom:48px}.buttons[_ngcontent-%COMP%]{width:100%;border:none;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:flex-start;align-items:center;align-content:center}.buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;background:#fff;padding:24px;font-size:110%;color:#000;font-weight:600;letter-spacing:2px;border:1px solid #000000;transition:all .5s;margin-bottom:24px}.footstatic[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center}.footstatic[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:calc(100% - 16px);background:#fff;padding:24px;font-size:110%;color:#000;font-weight:600;letter-spacing:2px;border:1px solid #000000;transition:all .5s;margin-bottom:24px;margin-right:8px}form[_ngcontent-%COMP%]{width:100%;padding:24px;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;border:1px solid #000000;height:24px;margin-bottom:16px}input[_ngcontent-%COMP%]:last-child{height:100px}"]})}return e})();var te=function(e){return e[e.QR_CODE=0]="QR_CODE",e[e.AZTEC=1]="AZTEC",e[e.CODABAR=2]="CODABAR",e[e.CODE_39=3]="CODE_39",e[e.CODE_93=4]="CODE_93",e[e.CODE_128=5]="CODE_128",e[e.DATA_MATRIX=6]="DATA_MATRIX",e[e.MAXICODE=7]="MAXICODE",e[e.ITF=8]="ITF",e[e.EAN_13=9]="EAN_13",e[e.EAN_8=10]="EAN_8",e[e.PDF_417=11]="PDF_417",e[e.RSS_14=12]="RSS_14",e[e.RSS_EXPANDED=13]="RSS_EXPANDED",e[e.UPC_A=14]="UPC_A",e[e.UPC_E=15]="UPC_E",e[e.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION",e}(te||{}),lT=new Map([[te.QR_CODE,"QR_CODE"],[te.AZTEC,"AZTEC"],[te.CODABAR,"CODABAR"],[te.CODE_39,"CODE_39"],[te.CODE_93,"CODE_93"],[te.CODE_128,"CODE_128"],[te.DATA_MATRIX,"DATA_MATRIX"],[te.MAXICODE,"MAXICODE"],[te.ITF,"ITF"],[te.EAN_13,"EAN_13"],[te.EAN_8,"EAN_8"],[te.PDF_417,"PDF_417"],[te.RSS_14,"RSS_14"],[te.RSS_EXPANDED,"RSS_EXPANDED"],[te.UPC_A,"UPC_A"],[te.UPC_E,"UPC_E"],[te.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]);function uT(e){return Object.values(te).includes(e)}var di=function(e){return e[e.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",e[e.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE",e}(di||{}),Zn=function(){function e(){}return e.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",e.SCAN_DEFAULT_FPS=2,e.DEFAULT_DISABLE_FLIP=!1,e.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,e.DEFAULT_SUPPORTED_SCAN_TYPE=[di.SCAN_TYPE_CAMERA,di.SCAN_TYPE_FILE],e}();var Yh=function(){function e(t,n){this.format=t,this.formatName=n}return e.prototype.toString=function(){return this.formatName},e.create=function(t){if(!lT.has(t))throw"".concat(t," not in html5QrcodeSupportedFormatsTextMap");return new e(t,lT.get(t))},e}();var z_=function(){function e(){}return e.createFromText=function(t){var n={text:t};return{decodedText:t,result:n}},e.createFromQrcodeResult=function(t){return{decodedText:t.text,result:t}},e}();var dT=function(e){return e[e.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",e[e.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",e[e.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR",e}(dT||{}),Zh=function(){function e(){}return e.createFrom=function(t){return{errorMessage:t,type:dT.UNKWOWN_ERROR}},e}();var Xh=function(){function e(t){this.verbose=t}return e.prototype.log=function(t){this.verbose&&console.log(t)},e.prototype.warn=function(t){this.verbose&&console.warn(t)},e.prototype.logError=function(t,n){(this.verbose||n===!0)&&console.error(t)},e.prototype.logErrors=function(t){if(t.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(t)},e}();function Er(e){return typeof e>"u"||e===null}function fT(e,t,n){return e>n?n:e<t?t:e}var Do=function(){function e(){}return e.codeParseError=function(t){return"QR code parse error, error = ".concat(t)},e.errorGettingUserMedia=function(t){return"Error getting userMedia, error = ".concat(t)},e.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},e.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},e.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},e.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},e.scannerPaused=function(){return"Scanner paused"},e}();var Ke=function(){function e(){}return e.scanningStatus=function(){return"Scanning"},e.idleStatus=function(){return"Idle"},e.errorStatus=function(){return"Error"},e.permissionStatus=function(){return"Permission"},e.noCameraFoundErrorStatus=function(){return"No Cameras"},e.lastMatch=function(t){return"Last Match: ".concat(t)},e.codeScannerTitle=function(){return"Code Scanner"},e.cameraPermissionTitle=function(){return"Request Camera Permissions"},e.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},e.noCameraFound=function(){return"No camera found"},e.scanButtonStopScanningText=function(){return"Stop Scanning"},e.scanButtonStartScanningText=function(){return"Start Scanning"},e.torchOnButton=function(){return"Switch On Torch"},e.torchOffButton=function(){return"Switch Off Torch"},e.torchOnFailedMessage=function(){return"Failed to turn on torch"},e.torchOffFailedMessage=function(){return"Failed to turn off torch"},e.scanButtonScanningStarting=function(){return"Launching Camera..."},e.textIfCameraScanSelected=function(){return"Scan an Image File"},e.textIfFileScanSelected=function(){return"Scan using camera directly"},e.selectCamera=function(){return"Select Camera"},e.fileSelectionChooseImage=function(){return"Choose Image"},e.fileSelectionChooseAnother=function(){return"Choose Another"},e.fileSelectionNoImageSelected=function(){return"No image choosen"},e.anonymousCameraPrefix=function(){return"Anonymous Camera"},e.dragAndDropMessage=function(){return"Or drop an image to scan"},e.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},e.zoom=function(){return"zoom"},e.loadingImage=function(){return"Loading image..."},e.cameraScanAltText=function(){return"Camera based scan"},e.fileScanAltText=function(){return"Fule based scan"},e}();var W_=function(){function e(){}return e.poweredBy=function(){return"Powered by "},e.reportIssues=function(){return"Report issues"},e}();var G_=function(){function e(){}return e.isMediaStreamConstraintsValid=function(t,n){if(typeof t!="object"){var r=typeof t;return n.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(r,"."),!0),!1}for(var i=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],o=new Set(i),l=Object.keys(t),h=0,g=l;h<g.length;h++){var m=g[h];if(o.has(m))return n.logError("".concat(m," is not supported videoConstaints."),!0),!1}return!0},e}();var pt=Tw(pT());var $_=function(){function e(t,n,r){if(this.formatMap=new Map([[te.QR_CODE,pt.BarcodeFormat.QR_CODE],[te.AZTEC,pt.BarcodeFormat.AZTEC],[te.CODABAR,pt.BarcodeFormat.CODABAR],[te.CODE_39,pt.BarcodeFormat.CODE_39],[te.CODE_93,pt.BarcodeFormat.CODE_93],[te.CODE_128,pt.BarcodeFormat.CODE_128],[te.DATA_MATRIX,pt.BarcodeFormat.DATA_MATRIX],[te.MAXICODE,pt.BarcodeFormat.MAXICODE],[te.ITF,pt.BarcodeFormat.ITF],[te.EAN_13,pt.BarcodeFormat.EAN_13],[te.EAN_8,pt.BarcodeFormat.EAN_8],[te.PDF_417,pt.BarcodeFormat.PDF_417],[te.RSS_14,pt.BarcodeFormat.RSS_14],[te.RSS_EXPANDED,pt.BarcodeFormat.RSS_EXPANDED],[te.UPC_A,pt.BarcodeFormat.UPC_A],[te.UPC_E,pt.BarcodeFormat.UPC_E],[te.UPC_EAN_EXTENSION,pt.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!pt)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=n,this.logger=r;var i=this.createZXingFormats(t),o=new Map;o.set(pt.DecodeHintType.POSSIBLE_FORMATS,i),o.set(pt.DecodeHintType.TRY_HARDER,!1),this.hints=o}return e.prototype.decodeAsync=function(t){var n=this;return new Promise(function(r,i){try{r(n.decode(t))}catch(o){i(o)}})},e.prototype.decode=function(t){var n=new pt.MultiFormatReader(this.verbose,this.hints),r=new pt.HTMLCanvasElementLuminanceSource(t),i=new pt.BinaryBitmap(new pt.HybridBinarizer(r)),o=n.decode(i);return{text:o.text,format:Yh.create(this.toHtml5QrcodeSupportedFormats(o.format)),debugData:this.createDebugData()}},e.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(n,r,i){t.set(n,r)}),t},e.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},e.prototype.createZXingFormats=function(t){for(var n=[],r=0,i=t;r<i.length;r++){var o=i[r];this.formatMap.has(o)?n.push(this.formatMap.get(o)):this.logger.logError("".concat(o," is not supported by")+"ZXingHtml5QrcodeShim")}return n},e.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},e}();var I7=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function h(C){try{m(r.next(C))}catch(E){l(E)}}function g(C){try{m(r.throw(C))}catch(E){l(E)}}function m(C){C.done?o(C.value):i(C.value).then(h,g)}m((r=r.apply(e,t||[])).next())})},b7=function(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,l;return l={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function h(m){return function(C){return g([m,C])}}function g(m){if(r)throw new TypeError("Generator is already executing.");for(;l&&(l=0,m[0]&&(n=0)),n;)try{if(r=1,i&&(o=m[0]&2?i.return:m[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,m[1])).done)return o;switch(i=0,o&&(m=[m[0]&2,o.value]),m[0]){case 0:case 1:o=m;break;case 4:return n.label++,{value:m[1],done:!1};case 5:n.label++,i=m[1],m=[0];continue;case 7:m=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(m[0]===6||m[0]===2)){n=0;continue}if(m[0]===3&&(!o||m[1]>o[0]&&m[1]<o[3])){n.label=m[1];break}if(m[0]===6&&n.label<o[1]){n.label=o[1],o=m;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(m);break}o[2]&&n.ops.pop(),n.trys.pop();continue}m=t.call(e,n)}catch(C){m=[6,C],i=0}finally{r=o=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},q_=function(){function e(t,n,r){if(this.formatMap=new Map([[te.QR_CODE,"qr_code"],[te.AZTEC,"aztec"],[te.CODABAR,"codabar"],[te.CODE_39,"code_39"],[te.CODE_93,"code_93"],[te.CODE_128,"code_128"],[te.DATA_MATRIX,"data_matrix"],[te.ITF,"itf"],[te.EAN_13,"ean_13"],[te.EAN_8,"ean_8"],[te.PDF_417,"pdf417"],[te.UPC_A,"upc_a"],[te.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!e.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=n,this.logger=r;var i=this.createBarcodeDetectorFormats(t);if(this.detector=new BarcodeDetector(i),!this.detector)throw"BarcodeDetector detector not supported"}return e.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var t=new BarcodeDetector({formats:["qr_code"]});return typeof t<"u"},e.prototype.decodeAsync=function(t){return I7(this,void 0,void 0,function(){var n,r;return b7(this,function(i){switch(i.label){case 0:return[4,this.detector.detect(t)];case 1:if(n=i.sent(),!n||n.length===0)throw"No barcode or QR code detected.";return r=this.selectLargestBarcode(n),[2,{text:r.rawValue,format:Yh.create(this.toHtml5QrcodeSupportedFormats(r.format)),debugData:this.createDebugData()}]}})})},e.prototype.selectLargestBarcode=function(t){for(var n=null,r=0,i=0,o=t;i<o.length;i++){var l=o[i],h=l.boundingBox.width*l.boundingBox.height;h>r&&(r=h,n=l)}if(!n)throw"No largest barcode found";return n},e.prototype.createBarcodeDetectorFormats=function(t){for(var n=[],r=0,i=t;r<i.length;r++){var o=i[r];this.formatMap.has(o)?n.push(this.formatMap.get(o)):this.logger.warn("".concat(o," is not supported by")+"BarcodeDetectorDelegate")}return{formats:n}},e.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},e.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(n,r,i){t.set(n,r)}),t},e.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},e}();var gT=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function h(C){try{m(r.next(C))}catch(E){l(E)}}function g(C){try{m(r.throw(C))}catch(E){l(E)}}function m(C){C.done?o(C.value):i(C.value).then(h,g)}m((r=r.apply(e,t||[])).next())})},mT=function(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,l;return l={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function h(m){return function(C){return g([m,C])}}function g(m){if(r)throw new TypeError("Generator is already executing.");for(;l&&(l=0,m[0]&&(n=0)),n;)try{if(r=1,i&&(o=m[0]&2?i.return:m[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,m[1])).done)return o;switch(i=0,o&&(m=[m[0]&2,o.value]),m[0]){case 0:case 1:o=m;break;case 4:return n.label++,{value:m[1],done:!1};case 5:n.label++,i=m[1],m=[0];continue;case 7:m=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(m[0]===6||m[0]===2)){n=0;continue}if(m[0]===3&&(!o||m[1]>o[0]&&m[1]<o[3])){n.label=m[1];break}if(m[0]===6&&n.label<o[1]){n.label=o[1],o=m;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(m);break}o[2]&&n.ops.pop(),n.trys.pop();continue}m=t.call(e,n)}catch(C){m=[6,C],i=0}finally{r=o=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},yT=function(){function e(t,n,r,i){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=r,n&&q_.isSupported()?(this.primaryDecoder=new q_(t,r,i),this.secondaryDecoder=new $_(t,r,i)):this.primaryDecoder=new $_(t,r,i)}return e.prototype.decodeAsync=function(t){return gT(this,void 0,void 0,function(){var n;return mT(this,function(r){switch(r.label){case 0:n=performance.now(),r.label=1;case 1:return r.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(t)];case 2:return[2,r.sent()];case 3:return this.possiblyLogPerformance(n),[7];case 4:return[2]}})})},e.prototype.decodeRobustlyAsync=function(t){return gT(this,void 0,void 0,function(){var n,r;return mT(this,function(i){switch(i.label){case 0:n=performance.now(),i.label=1;case 1:return i.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(t)];case 2:return[2,i.sent()];case 3:if(r=i.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(t)];throw r;case 4:return this.possiblyLogPerformance(n),[7];case 5:return[2]}})})},e.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},e.prototype.possiblyLogPerformance=function(t){if(this.verbose){var n=performance.now()-t;this.executionResults.push(n),this.executions++,this.possiblyFlushPerformanceReport()}},e.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var t=0,n=0,r=this.executionResults;n<r.length;n++){var i=r[n];t+=i}var o=t/this.executionResults.length;console.log("".concat(o," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},e}();var Y_=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Kh=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function h(C){try{m(r.next(C))}catch(E){l(E)}}function g(C){try{m(r.throw(C))}catch(E){l(E)}}function m(C){C.done?o(C.value):i(C.value).then(h,g)}m((r=r.apply(e,t||[])).next())})},Jh=function(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,l;return l={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function h(m){return function(C){return g([m,C])}}function g(m){if(r)throw new TypeError("Generator is already executing.");for(;l&&(l=0,m[0]&&(n=0)),n;)try{if(r=1,i&&(o=m[0]&2?i.return:m[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,m[1])).done)return o;switch(i=0,o&&(m=[m[0]&2,o.value]),m[0]){case 0:case 1:o=m;break;case 4:return n.label++,{value:m[1],done:!1};case 5:n.label++,i=m[1],m=[0];continue;case 7:m=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(m[0]===6||m[0]===2)){n=0;continue}if(m[0]===3&&(!o||m[1]>o[0]&&m[1]<o[3])){n.label=m[1];break}if(m[0]===6&&n.label<o[1]){n.label=o[1],o=m;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(m);break}o[2]&&n.ops.pop(),n.trys.pop();continue}m=t.call(e,n)}catch(C){m=[6,C],i=0}finally{r=o=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},_T=function(){function e(t,n){this.name=t,this.track=n}return e.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},e.prototype.apply=function(t){var n={};n[this.name]=t;var r={advanced:[n]};return this.track.applyConstraints(r)},e.prototype.value=function(){var t=this.track.getSettings();if(this.name in t){var n=t[this.name];return n}return null},e}(),x7=function(e){Y_(t,e);function t(n,r){return e.call(this,n,r)||this}return t.prototype.min=function(){return this.getCapabilities().min},t.prototype.max=function(){return this.getCapabilities().max},t.prototype.step=function(){return this.getCapabilities().step},t.prototype.apply=function(n){var r={};r[this.name]=n;var i={advanced:[r]};return this.track.applyConstraints(i)},t.prototype.getCapabilities=function(){this.failIfNotSupported();var n=this.track.getCapabilities(),r=n[this.name];return{min:r.min,max:r.max,step:r.step}},t.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},t}(_T),S7=function(e){Y_(t,e);function t(n){return e.call(this,"zoom",n)||this}return t}(x7),A7=function(e){Y_(t,e);function t(n){return e.call(this,"torch",n)||this}return t}(_T),D7=function(){function e(t){this.track=t}return e.prototype.zoomFeature=function(){return new S7(this.track)},e.prototype.torchFeature=function(){return new A7(this.track)},e}(),T7=function(){function e(t,n,r){this.isClosed=!1,this.parentElement=t,this.mediaStream=n,this.callbacks=r,this.surface=this.createVideoElement(this.parentElement.clientWidth),t.append(this.surface)}return e.prototype.createVideoElement=function(t){var n=document.createElement("video");return n.style.width="".concat(t,"px"),n.style.display="block",n.muted=!0,n.setAttribute("muted","true"),n.playsInline=!0,n},e.prototype.setupSurface=function(){var t=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var n=function(){var r=t.surface.clientWidth,i=t.surface.clientHeight;t.callbacks.onRenderSurfaceReady(r,i),t.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.srcObject=this.mediaStream,this.surface.play()},e.create=function(t,n,r,i){return Kh(this,void 0,void 0,function(){var o,l;return Jh(this,function(h){switch(h.label){case 0:return o=new e(t,n,i),r.aspectRatio?(l={aspectRatio:r.aspectRatio},[4,o.getFirstTrackOrFail().applyConstraints(l)]):[3,2];case 1:h.sent(),h.label=2;case 2:return o.setupSurface(),[2,o]}})})},e.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},e.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},e.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},e.prototype.resume=function(t){this.failIfClosed();var n=this,r=function(){setTimeout(t,200),n.surface.removeEventListener("playing",r)};this.surface.addEventListener("playing",r),this.surface.play()},e.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},e.prototype.getSurface=function(){return this.failIfClosed(),this.surface},e.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},e.prototype.applyVideoConstraints=function(t){return Kh(this,void 0,void 0,function(){return Jh(this,function(n){if("aspectRatio"in t)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(t)]})})},e.prototype.close=function(){if(this.isClosed)return Promise.resolve();var t=this;return new Promise(function(n,r){var i=t.mediaStream.getVideoTracks(),o=i.length,l=0;t.mediaStream.getVideoTracks().forEach(function(h){t.mediaStream.removeTrack(h),h.stop(),++l,l>=o&&(t.isClosed=!0,t.parentElement.removeChild(t.surface),n())})})},e.prototype.getCapabilities=function(){return new D7(this.getFirstTrackOrFail())},e}(),wT=function(){function e(t){this.mediaStream=t}return e.prototype.render=function(t,n,r){return Kh(this,void 0,void 0,function(){return Jh(this,function(i){return[2,T7.create(t,this.mediaStream,n,r)]})})},e.create=function(t){return Kh(this,void 0,void 0,function(){var n,r;return Jh(this,function(i){switch(i.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return n={audio:!1,video:t},[4,navigator.mediaDevices.getUserMedia(n)];case 1:return r=i.sent(),[2,new e(r)]}})})},e}();var vT=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function h(C){try{m(r.next(C))}catch(E){l(E)}}function g(C){try{m(r.throw(C))}catch(E){l(E)}}function m(C){C.done?o(C.value):i(C.value).then(h,g)}m((r=r.apply(e,t||[])).next())})},CT=function(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,l;return l={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function h(m){return function(C){return g([m,C])}}function g(m){if(r)throw new TypeError("Generator is already executing.");for(;l&&(l=0,m[0]&&(n=0)),n;)try{if(r=1,i&&(o=m[0]&2?i.return:m[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,m[1])).done)return o;switch(i=0,o&&(m=[m[0]&2,o.value]),m[0]){case 0:case 1:o=m;break;case 4:return n.label++,{value:m[1],done:!1};case 5:n.label++,i=m[1],m=[0];continue;case 7:m=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(m[0]===6||m[0]===2)){n=0;continue}if(m[0]===3&&(!o||m[1]>o[0]&&m[1]<o[3])){n.label=m[1];break}if(m[0]===6&&n.label<o[1]){n.label=o[1],o=m;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(m);break}o[2]&&n.ops.pop(),n.trys.pop();continue}m=t.call(e,n)}catch(C){m=[6,C],i=0}finally{r=o=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},ET=function(){function e(){}return e.failIfNotSupported=function(){return vT(this,void 0,void 0,function(){return CT(this,function(t){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new e]})})},e.prototype.create=function(t){return vT(this,void 0,void 0,function(){return CT(this,function(n){return[2,wT.create(t)]})})},e}();var M7=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function h(C){try{m(r.next(C))}catch(E){l(E)}}function g(C){try{m(r.throw(C))}catch(E){l(E)}}function m(C){C.done?o(C.value):i(C.value).then(h,g)}m((r=r.apply(e,t||[])).next())})},N7=function(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,l;return l={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function h(m){return function(C){return g([m,C])}}function g(m){if(r)throw new TypeError("Generator is already executing.");for(;l&&(l=0,m[0]&&(n=0)),n;)try{if(r=1,i&&(o=m[0]&2?i.return:m[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,m[1])).done)return o;switch(i=0,o&&(m=[m[0]&2,o.value]),m[0]){case 0:case 1:o=m;break;case 4:return n.label++,{value:m[1],done:!1};case 5:n.label++,i=m[1],m=[0];continue;case 7:m=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(m[0]===6||m[0]===2)){n=0;continue}if(m[0]===3&&(!o||m[1]>o[0]&&m[1]<o[3])){n.label=m[1];break}if(m[0]===6&&n.label<o[1]){n.label=o[1],o=m;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(m);break}o[2]&&n.ops.pop(),n.trys.pop();continue}m=t.call(e,n)}catch(C){m=[6,C],i=0}finally{r=o=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},IT=function(){function e(){}return e.retrieve=function(){if(navigator.mediaDevices)return e.getCamerasFromMediaDevices();var t=MediaStreamTrack;return MediaStreamTrack&&t.getSources?e.getCamerasFromMediaStreamTrack():e.rejectWithError()},e.rejectWithError=function(){var t=Do.unableToQuerySupportedDevices();return e.isHttpsOrLocalhost()||(t=Do.insecureContextCameraQueryError()),Promise.reject(t)},e.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var t=location.host.split(":")[0];return t==="127.0.0.1"||t==="localhost"},e.getCamerasFromMediaDevices=function(){return M7(this,void 0,void 0,function(){var t,n,r,i,o,l,h;return N7(this,function(g){switch(g.label){case 0:return t=function(m){for(var C=m.getVideoTracks(),E=0,x=C;E<x.length;E++){var D=x[E];D.enabled=!1,D.stop(),m.removeTrack(D)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return n=g.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(r=g.sent(),i=[],o=0,l=r;o<l.length;o++)h=l[o],h.kind==="videoinput"&&i.push({id:h.deviceId,label:h.label});return t(n),[2,i]}})})},e.getCamerasFromMediaStreamTrack=function(){return new Promise(function(t,n){var r=function(o){for(var l=[],h=0,g=o;h<g.length;h++){var m=g[h];m.kind==="video"&&l.push({id:m.id,label:m.label})}t(l)},i=MediaStreamTrack;i.getSources(r)})},e}();var Mt=function(e){return e[e.UNKNOWN=0]="UNKNOWN",e[e.NOT_STARTED=1]="NOT_STARTED",e[e.SCANNING=2]="SCANNING",e[e.PAUSED=3]="PAUSED",e}(Mt||{}),R7=function(){function e(){this.state=Mt.NOT_STARTED,this.onGoingTransactionNewState=Mt.UNKNOWN}return e.prototype.directTransition=function(t){this.failIfTransitionOngoing(),this.validateTransition(t),this.state=t},e.prototype.startTransition=function(t){return this.failIfTransitionOngoing(),this.validateTransition(t),this.onGoingTransactionNewState=t,this},e.prototype.execute=function(){if(this.onGoingTransactionNewState===Mt.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var t=this.onGoingTransactionNewState;this.onGoingTransactionNewState=Mt.UNKNOWN,this.directTransition(t)},e.prototype.cancel=function(){if(this.onGoingTransactionNewState===Mt.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=Mt.UNKNOWN},e.prototype.getState=function(){return this.state},e.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==Mt.UNKNOWN)throw"Cannot transition to a new state, already under transition"},e.prototype.validateTransition=function(t){switch(this.state){case Mt.UNKNOWN:throw"Transition from unknown is not allowed";case Mt.NOT_STARTED:this.failIfNewStateIs(t,[Mt.PAUSED]);break;case Mt.SCANNING:break;case Mt.PAUSED:break}},e.prototype.failIfNewStateIs=function(t,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];if(t===o)throw"Cannot transition from ".concat(this.state," to ").concat(t)}},e}(),O7=function(){function e(t){this.stateManager=t}return e.prototype.startTransition=function(t){return this.stateManager.startTransition(t)},e.prototype.directTransition=function(t){this.stateManager.directTransition(t)},e.prototype.getState=function(){return this.stateManager.getState()},e.prototype.canScanFile=function(){return this.stateManager.getState()===Mt.NOT_STARTED},e.prototype.isScanning=function(){return this.stateManager.getState()!==Mt.NOT_STARTED},e.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===Mt.SCANNING},e.prototype.isPaused=function(){return this.stateManager.getState()===Mt.PAUSED},e}();var bT=function(){function e(){}return e.create=function(){return new O7(new R7)},e}();var P7=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),sr=function(e){P7(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.DEFAULT_WIDTH=300,t.DEFAULT_WIDTH_OFFSET=2,t.FILE_SCAN_MIN_HEIGHT=300,t.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,t.MIN_QR_BOX_SIZE=50,t.SHADED_LEFT=1,t.SHADED_RIGHT=2,t.SHADED_TOP=3,t.SHADED_BOTTOM=4,t.SHADED_REGION_ELEMENT_ID="qr-shaded-region",t.VERBOSE=!1,t.BORDER_SHADER_DEFAULT_COLOR="#ffffff",t.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",t}(Zn),k7=function(){function e(t,n){this.logger=n,this.fps=sr.SCAN_DEFAULT_FPS,t?(t.fps&&(this.fps=t.fps),this.disableFlip=t.disableFlip===!0,this.qrbox=t.qrbox,this.aspectRatio=t.aspectRatio,this.videoConstraints=t.videoConstraints):this.disableFlip=sr.DEFAULT_DISABLE_FLIP}return e.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?G_.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},e.prototype.isShadedBoxEnabled=function(){return!Er(this.qrbox)},e.create=function(t,n){return new e(t,n)},e}(),ep=function(){function e(t,n){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(t))throw"HTML Element with id=".concat(t," not found");this.elementId=t,this.verbose=!1;var r,i;typeof n=="boolean"?this.verbose=n===!0:n&&(i=n,this.verbose=i.verbose===!0,r=i.experimentalFeatures),this.logger=new Xh(this.verbose),this.qrcode=new yT(this.getSupportedFormats(n),this.getUseBarCodeDetectorIfSupported(i),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=bT.create()}return e.prototype.start=function(t,n,r,i){var o=this;if(!t)throw"cameraIdOrConfig is required";if(!r||typeof r!="function")throw"qrCodeSuccessCallback is required and should be a function.";var l;i?l=i:l=this.verbose?this.logger.log:function(){};var h=k7.create(n,this.logger);this.clearElement();var g=!1;h.videoConstraints&&(h.isMediaStreamConstraintsValid()?g=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var m=g,C=document.getElementById(this.elementId),E=C.clientWidth?C.clientWidth:sr.DEFAULT_WIDTH;C.style.position="relative",this.shouldScan=!0,this.element=C;var x=this,D=this.stateManagerProxy.startTransition(Mt.SCANNING);return new Promise(function(N,U){var $=m?h.videoConstraints:x.createVideoConstraints(t);if(!$){D.cancel(),U("videoConstraints should be defined");return}var W={};(!m||h.aspectRatio)&&(W.aspectRatio=h.aspectRatio);var ie={onRenderSurfaceReady:function(ze,he){x.setupUi(ze,he,h),x.isScanning=!0,x.foreverScan(h,r,l)}};ET.failIfNotSupported().then(function(ze){ze.create($).then(function(he){return he.render(o.element,W,ie).then(function(H){x.renderedCamera=H,D.execute(),N(null)}).catch(function(H){D.cancel(),U(H)})}).catch(function(he){D.cancel(),U(Do.errorGettingUserMedia(he))})}).catch(function(ze){D.cancel(),U(Do.cameraStreamingNotSupported())})})},e.prototype.pause=function(t){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(Mt.PAUSED),this.showPausedState(),(Er(t)||t!==!0)&&(t=!1),t&&this.renderedCamera&&this.renderedCamera.pause()},e.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var t=this,n=function(){t.stateManagerProxy.directTransition(Mt.SCANNING),t.hidePausedState()};if(!this.renderedCamera.isPaused()){n();return}this.renderedCamera.resume(function(){n()})},e.prototype.getState=function(){return this.stateManagerProxy.getState()},e.prototype.stop=function(){var t=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var n=this.stateManagerProxy.startTransition(Mt.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var r=function(){if(t.element){var o=document.getElementById(sr.SHADED_REGION_ELEMENT_ID);o&&t.element.removeChild(o)}},i=this;return this.renderedCamera.close().then(function(){return i.renderedCamera=null,i.element&&(i.element.removeChild(i.canvasElement),i.canvasElement=null),r(),i.qrRegion&&(i.qrRegion=null),i.context&&(i.context=null),n.execute(),i.hidePausedState(),i.isScanning=!1,Promise.resolve()})},e.prototype.scanFile=function(t,n){return this.scanFileV2(t,n).then(function(r){return r.decodedText})},e.prototype.scanFileV2=function(t,n){var r=this;if(!t||!(t instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(Er(n)&&(n=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(i,o){r.possiblyCloseLastScanImageFile(),r.clearElement(),r.lastScanImageFile=URL.createObjectURL(t);var l=new Image;l.onload=function(){var h=l.width,g=l.height,m=document.getElementById(r.elementId),C=m.clientWidth?m.clientWidth:sr.DEFAULT_WIDTH,E=Math.max(m.clientHeight?m.clientHeight:g,sr.FILE_SCAN_MIN_HEIGHT),x=r.computeCanvasDrawConfig(h,g,C,E);if(n){var D=r.createCanvasElement(C,E,"qr-canvas-visible");D.style.display="inline-block",m.appendChild(D);var N=D.getContext("2d");if(!N)throw"Unable to get 2d context from canvas";N.canvas.width=C,N.canvas.height=E,N.drawImage(l,0,0,h,g,x.x,x.y,x.width,x.height)}var U=sr.FILE_SCAN_HIDDEN_CANVAS_PADDING,$=Math.max(l.width,x.width),W=Math.max(l.height,x.height),ie=$+2*U,ze=W+2*U,he=r.createCanvasElement(ie,ze);m.appendChild(he);var H=he.getContext("2d");if(!H)throw"Unable to get 2d context from canvas";H.canvas.width=ie,H.canvas.height=ze,H.drawImage(l,0,0,h,g,U,U,$,W);try{r.qrcode.decodeRobustlyAsync(he).then(function(ae){i(z_.createFromQrcodeResult(ae))}).catch(o)}catch(ae){o("QR code parse error, error = ".concat(ae))}},l.onerror=o,l.onabort=o,l.onstalled=o,l.onsuspend=o,l.src=URL.createObjectURL(t)})},e.prototype.clear=function(){this.clearElement()},e.getCameras=function(){return IT.retrieve()},e.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},e.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},e.prototype.applyVideoConstraints=function(t){if(t){if(!G_.isMediaStreamConstraintsValid(t,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(t)},e.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},e.prototype.getSupportedFormats=function(t){var n=[te.QR_CODE,te.AZTEC,te.CODABAR,te.CODE_39,te.CODE_93,te.CODE_128,te.DATA_MATRIX,te.MAXICODE,te.ITF,te.EAN_13,te.EAN_8,te.PDF_417,te.RSS_14,te.RSS_EXPANDED,te.UPC_A,te.UPC_E,te.UPC_EAN_EXTENSION];if(!t||typeof t=="boolean"||!t.formatsToSupport)return n;if(!Array.isArray(t.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(t.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var r=[],i=0,o=t.formatsToSupport;i<o.length;i++){var l=o[i];uT(l)?r.push(l):this.logger.warn("Invalid format: ".concat(l," passed in config, ignoring."))}if(r.length===0)throw"None of formatsToSupport match supported values.";return r},e.prototype.getUseBarCodeDetectorIfSupported=function(t){if(Er(t))return!0;if(!Er(t.useBarCodeDetectorIfSupported))return t.useBarCodeDetectorIfSupported!==!1;if(Er(t.experimentalFeatures))return!0;var n=t.experimentalFeatures;return Er(n.useBarCodeDetectorIfSupported)?!0:n.useBarCodeDetectorIfSupported!==!1},e.prototype.validateQrboxSize=function(t,n,r){var i=this,o=r.qrbox;this.validateQrboxConfig(o);var l=this.toQrdimensions(t,n,o),h=function(m){if(m<sr.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(sr.MIN_QR_BOX_SIZE,"px.")},g=function(m){return m>t&&(i.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),m=t),m};h(l.width),h(l.height),l.width=g(l.width)},e.prototype.validateQrboxConfig=function(t){if(typeof t!="number"&&typeof t!="function"&&(t.width===void 0||t.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},e.prototype.toQrdimensions=function(t,n,r){if(typeof r=="number")return{width:r,height:r};if(typeof r=="function")try{return r(t,n)}catch(i){throw new Error("qrbox config was passed as a function but it failed with unknown error"+i)}return r},e.prototype.setupUi=function(t,n,r){r.isShadedBoxEnabled()&&this.validateQrboxSize(t,n,r);var i=Er(r.qrbox)?{width:t,height:n}:r.qrbox;this.validateQrboxConfig(i);var o=this.toQrdimensions(t,n,i);o.height>n&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var l=r.isShadedBoxEnabled()&&o.height<=n,h={x:0,y:0,width:t,height:n},g=l?this.getShadedRegionBounds(t,n,o):h,m=this.createCanvasElement(g.width,g.height),C={willReadFrequently:!0},E=m.getContext("2d",C);E.canvas.width=g.width,E.canvas.height=g.height,this.element.append(m),l&&this.possiblyInsertShadingElement(this.element,t,n,o),this.createScannerPausedUiElement(this.element),this.qrRegion=g,this.context=E,this.canvasElement=m},e.prototype.createScannerPausedUiElement=function(t){var n=document.createElement("div");n.innerText=Do.scannerPaused(),n.style.display="none",n.style.position="absolute",n.style.top="0px",n.style.zIndex="1",n.style.background="rgba(9, 9, 9, 0.46)",n.style.color="#FFECEC",n.style.textAlign="center",n.style.width="100%",t.appendChild(n),this.scannerPausedUiElement=n},e.prototype.scanContext=function(t,n){var r=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(i){return t(i.text,z_.createFromQrcodeResult(i)),r.possiblyUpdateShaders(!0),!0}).catch(function(i){r.possiblyUpdateShaders(!1);var o=Do.codeParseError(i);return n(o,Zh.createFrom(o)),!1})},e.prototype.foreverScan=function(t,n,r){var i=this;if(this.shouldScan&&this.renderedCamera){var o=this.renderedCamera.getSurface(),l=o.videoWidth/o.clientWidth,h=o.videoHeight/o.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var g=this.qrRegion.width*l,m=this.qrRegion.height*h,C=this.qrRegion.x*l,E=this.qrRegion.y*h;this.context.drawImage(o,C,E,g,m,0,0,this.qrRegion.width,this.qrRegion.height);var x=function(){i.foreverScanTimeout=setTimeout(function(){i.foreverScan(t,n,r)},i.getTimeoutFps(t.fps))};this.scanContext(n,r).then(function(D){!D&&t.disableFlip!==!0?(i.context.translate(i.context.canvas.width,0),i.context.scale(-1,1),i.scanContext(n,r).finally(function(){x()})):x()}).catch(function(D){i.logger.logError("Error happend while scanning context",D),x()})}},e.prototype.createVideoConstraints=function(t){if(typeof t=="string")return{deviceId:{exact:t}};if(typeof t=="object"){var n="facingMode",r="deviceId",i={user:!0,environment:!0},o="exact",l=function(N){if(N in i)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(N,"'")},h=Object.keys(t);if(h.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(h.length," keys");var g=Object.keys(t)[0];if(g!==n&&g!==r)throw"Only '".concat(n,"' and '").concat(r,"' ")+" are supported for 'cameraIdOrConfig'";if(g===n){var m=t.facingMode;if(typeof m=="string"){if(l(m))return{facingMode:m}}else if(typeof m=="object")if(o in m){if(l(m["".concat(o)]))return{facingMode:{exact:m["".concat(o)]}}}else throw"'facingMode' should be string or object with"+" ".concat(o," as key.");else{var C=typeof m;throw"Invalid type of 'facingMode' = ".concat(C)}}else{var E=t.deviceId;if(typeof E=="string")return{deviceId:E};if(typeof E=="object"){if(o in E)return{deviceId:{exact:E["".concat(o)]}};throw"'deviceId' should be string or object with"+" ".concat(o," as key.")}else{var x=typeof E;throw"Invalid type of 'deviceId' = ".concat(x)}}}var D=typeof t;throw"Invalid type of 'cameraIdOrConfig' = ".concat(D)},e.prototype.computeCanvasDrawConfig=function(t,n,r,i){if(t<=r&&n<=i){var o=(r-t)/2,l=(i-n)/2;return{x:o,y:l,width:t,height:n}}else{var h=t,g=n;return t>r&&(n=r/t*n,t=r),n>i&&(t=i/n*t,n=i),this.logger.log("Image downsampled from "+"".concat(h,"X").concat(g)+" to ".concat(t,"X").concat(n,".")),this.computeCanvasDrawConfig(t,n,r,i)}},e.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var t=document.getElementById(this.elementId);t&&(t.innerHTML="")},e.prototype.possiblyUpdateShaders=function(t){this.qrMatch!==t&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(n){n.style.backgroundColor=t?sr.BORDER_SHADER_MATCH_COLOR:sr.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=t)},e.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},e.prototype.createCanvasElement=function(t,n,r){var i=t,o=n,l=document.createElement("canvas");return l.style.width="".concat(i,"px"),l.style.height="".concat(o,"px"),l.style.display="none",l.id=Er(r)?"qr-canvas":r,l},e.prototype.getShadedRegionBounds=function(t,n,r){if(r.width>t||r.height>n)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(t-r.width)/2,y:(n-r.height)/2,width:r.width,height:r.height}},e.prototype.possiblyInsertShadingElement=function(t,n,r,i){if(!(n-i.width<1||r-i.height<1)){var o=document.createElement("div");o.style.position="absolute";var l=(n-i.width)/2,h=(r-i.height)/2;if(o.style.borderLeft="".concat(l,"px solid rgba(0, 0, 0, 0.48)"),o.style.borderRight="".concat(l,"px solid rgba(0, 0, 0, 0.48)"),o.style.borderTop="".concat(h,"px solid rgba(0, 0, 0, 0.48)"),o.style.borderBottom="".concat(h,"px solid rgba(0, 0, 0, 0.48)"),o.style.boxSizing="border-box",o.style.top="0px",o.style.bottom="0px",o.style.left="0px",o.style.right="0px",o.id="".concat(sr.SHADED_REGION_ELEMENT_ID),n-i.width<11||r-i.height<11)this.hasBorderShaders=!1;else{var g=5,m=40;this.insertShaderBorders(o,m,g,-g,null,0,!0),this.insertShaderBorders(o,m,g,-g,null,0,!1),this.insertShaderBorders(o,m,g,null,-g,0,!0),this.insertShaderBorders(o,m,g,null,-g,0,!1),this.insertShaderBorders(o,g,m+g,-g,null,-g,!0),this.insertShaderBorders(o,g,m+g,null,-g,-g,!0),this.insertShaderBorders(o,g,m+g,-g,null,-g,!1),this.insertShaderBorders(o,g,m+g,null,-g,-g,!1),this.hasBorderShaders=!0}t.append(o)}},e.prototype.insertShaderBorders=function(t,n,r,i,o,l,h){var g=document.createElement("div");g.style.position="absolute",g.style.backgroundColor=sr.BORDER_SHADER_DEFAULT_COLOR,g.style.width="".concat(n,"px"),g.style.height="".concat(r,"px"),i!==null&&(g.style.top="".concat(i,"px")),o!==null&&(g.style.bottom="".concat(o,"px")),h?g.style.left="".concat(l,"px"):g.style.right="".concat(l,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(g),t.appendChild(g)},e.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},e.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},e.prototype.getTimeoutFps=function(t){return 1e3/t},e}();var Z_="data:image/svg+xml;base64,",xT=Z_+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",ST=Z_+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",X_=Z_+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",AT="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=";var DT=function(){function e(){}return e.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},e}(),TT=function(){function e(){this.data=DT.createDefault();var t=localStorage.getItem(e.LOCAL_STORAGE_KEY);t?this.data=JSON.parse(t):this.reset()}return e.prototype.hasCameraPermissions=function(){return this.data.hasPermission},e.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},e.prototype.setHasPermission=function(t){this.data.hasPermission=t,this.flush()},e.prototype.setLastUsedCameraId=function(t){this.data.lastUsedCameraId=t,this.flush()},e.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},e.prototype.reset=function(){this.data=DT.createDefault(),this.flush()},e.prototype.flush=function(){localStorage.setItem(e.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},e.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",e}();var L7=function(){function e(){this.infoDiv=document.createElement("div")}return e.prototype.renderInto=function(t){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=W_.poweredBy();var n=document.createElement("a");n.innerText="ScanApp",n.href="https://scanapp.org",n.target="new",n.style.color="white",this.infoDiv.appendChild(n);var r=document.createElement("br"),i=document.createElement("br");this.infoDiv.appendChild(r),this.infoDiv.appendChild(i);var o=document.createElement("a");o.innerText=W_.reportIssues(),o.href="https://github.com/mebjas/html5-qrcode/issues",o.target="new",o.style.color="white",this.infoDiv.appendChild(o),t.appendChild(this.infoDiv)},e.prototype.show=function(){this.infoDiv.style.display="block"},e.prototype.hide=function(){this.infoDiv.style.display="none"},e}(),F7=function(){function e(t,n){this.isShowingInfoIcon=!0,this.onTapIn=t,this.onTapOut=n,this.infoIcon=document.createElement("img")}return e.prototype.renderInto=function(t){var n=this;this.infoIcon.alt="Info icon",this.infoIcon.src=X_,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(r){return n.onHoverIn()},this.infoIcon.onmouseout=function(r){return n.onHoverOut()},this.infoIcon.onclick=function(r){return n.onClick()},t.appendChild(this.infoIcon)},e.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},e.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},e.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src=AT,this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=X_,this.infoIcon.style.opacity="0.6")},e}(),MT=function(){function e(){var t=this;this.infoDiv=new L7,this.infoIcon=new F7(function(){t.infoDiv.show()},function(){t.infoDiv.hide()})}return e.prototype.renderInto=function(t){this.infoDiv.renderInto(t),this.infoIcon.renderInto(t)},e}();var B7=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function h(C){try{m(r.next(C))}catch(E){l(E)}}function g(C){try{m(r.throw(C))}catch(E){l(E)}}function m(C){C.done?o(C.value):i(C.value).then(h,g)}m((r=r.apply(e,t||[])).next())})},V7=function(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,l;return l={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function h(m){return function(C){return g([m,C])}}function g(m){if(r)throw new TypeError("Generator is already executing.");for(;l&&(l=0,m[0]&&(n=0)),n;)try{if(r=1,i&&(o=m[0]&2?i.return:m[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,m[1])).done)return o;switch(i=0,o&&(m=[m[0]&2,o.value]),m[0]){case 0:case 1:o=m;break;case 4:return n.label++,{value:m[1],done:!1};case 5:n.label++,i=m[1],m=[0];continue;case 7:m=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(m[0]===6||m[0]===2)){n=0;continue}if(m[0]===3&&(!o||m[1]>o[0]&&m[1]<o[3])){n.label=m[1];break}if(m[0]===6&&n.label<o[1]){n.label=o[1],o=m;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(m);break}o[2]&&n.ops.pop(),n.trys.pop();continue}m=t.call(e,n)}catch(C){m=[6,C],i=0}finally{r=o=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},Q_=function(){function e(){}return e.hasPermissions=function(){return B7(this,void 0,void 0,function(){var t,n,r,i;return V7(this,function(o){switch(o.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(t=o.sent(),n=0,r=t;n<r.length;n++)if(i=r[n],i.kind==="videoinput"&&i.label)return[2,!0];return[2,!1]}})})},e}();var Hi=function(){function e(t){this.supportedScanTypes=this.validateAndReturnScanTypes(t)}return e.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},e.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},e.prototype.isCameraScanRequired=function(){for(var t=0,n=this.supportedScanTypes;t<n.length;t++){var r=n[t];if(e.isCameraScanType(r))return!0}return!1},e.isCameraScanType=function(t){return t===di.SCAN_TYPE_CAMERA},e.isFileScanType=function(t){return t===di.SCAN_TYPE_FILE},e.prototype.validateAndReturnScanTypes=function(t){if(!t||t.length===0)return Zn.DEFAULT_SUPPORTED_SCAN_TYPE;var n=Zn.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(t.length>n)throw"Max ".concat(n," values expected for ")+"supportedScanTypes";for(var r=0,i=t;r<i.length;r++){var o=i[r];if(!Zn.DEFAULT_SUPPORTED_SCAN_TYPE.includes(o))throw"Unsupported scan type ".concat(o)}return t},e}();var sn=function(){function e(){}return e.ALL_ELEMENT_CLASS="html5-qrcode-element",e.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",e.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",e.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",e.TORCH_BUTTON_ID="html5-qrcode-button-torch",e.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",e.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",e.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",e.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",e.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",e.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",e}();var Xn=function(){function e(){}return e.createElement=function(t,n){var r=document.createElement(t);return r.id=n,r.classList.add(sn.ALL_ELEMENT_CLASS),t==="button"&&r.setAttribute("type","button"),r},e}();var RT=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function h(C){try{m(r.next(C))}catch(E){l(E)}}function g(C){try{m(r.throw(C))}catch(E){l(E)}}function m(C){C.done?o(C.value):i(C.value).then(h,g)}m((r=r.apply(e,t||[])).next())})},OT=function(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,l;return l={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function h(m){return function(C){return g([m,C])}}function g(m){if(r)throw new TypeError("Generator is already executing.");for(;l&&(l=0,m[0]&&(n=0)),n;)try{if(r=1,i&&(o=m[0]&2?i.return:m[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,m[1])).done)return o;switch(i=0,o&&(m=[m[0]&2,o.value]),m[0]){case 0:case 1:o=m;break;case 4:return n.label++,{value:m[1],done:!1};case 5:n.label++,i=m[1],m=[0];continue;case 7:m=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(m[0]===6||m[0]===2)){n=0;continue}if(m[0]===3&&(!o||m[1]>o[0]&&m[1]<o[3])){n.label=m[1];break}if(m[0]===6&&n.label<o[1]){n.label=o[1],o=m;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(m);break}o[2]&&n.ops.pop(),n.trys.pop();continue}m=t.call(e,n)}catch(C){m=[6,C],i=0}finally{r=o=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},NT=function(){function e(t,n,r){this.isTorchOn=!1,this.torchCapability=t,this.buttonController=n,this.onTorchActionFailureCallback=r}return e.prototype.isTorchEnabled=function(){return this.isTorchOn},e.prototype.flipState=function(){return RT(this,void 0,void 0,function(){var t,n;return OT(this,function(r){switch(r.label){case 0:this.buttonController.disable(),t=!this.isTorchOn,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.torchCapability.apply(t)];case 2:return r.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),t),[3,4];case 3:return n=r.sent(),this.propagateFailure(t,n),this.buttonController.enable(),[3,4];case 4:return[2]}})})},e.prototype.updateUiBasedOnLatestSettings=function(t,n){t===n?(this.buttonController.setText(n?Ke.torchOffButton():Ke.torchOnButton()),this.isTorchOn=n):this.propagateFailure(n),this.buttonController.enable()},e.prototype.propagateFailure=function(t,n){var r=t?Ke.torchOnFailedMessage():Ke.torchOffFailedMessage();n&&(r+="; Error = "+n),this.onTorchActionFailureCallback(r)},e.prototype.reset=function(){this.isTorchOn=!1},e}(),PT=function(){function e(t,n){this.onTorchActionFailureCallback=n,this.torchButton=Xn.createElement("button",sn.TORCH_BUTTON_ID),this.torchController=new NT(t,this,n)}return e.prototype.render=function(t,n){var r=this;this.torchButton.innerText=Ke.torchOnButton(),this.torchButton.style.display=n.display,this.torchButton.style.marginLeft=n.marginLeft;var i=this;this.torchButton.addEventListener("click",function(o){return RT(r,void 0,void 0,function(){return OT(this,function(l){switch(l.label){case 0:return[4,i.torchController.flipState()];case 1:return l.sent(),i.torchController.isTorchEnabled()?(i.torchButton.classList.remove(sn.TORCH_BUTTON_CLASS_TORCH_OFF),i.torchButton.classList.add(sn.TORCH_BUTTON_CLASS_TORCH_ON)):(i.torchButton.classList.remove(sn.TORCH_BUTTON_CLASS_TORCH_ON),i.torchButton.classList.add(sn.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}})})}),t.appendChild(this.torchButton)},e.prototype.updateTorchCapability=function(t){this.torchController=new NT(t,this,this.onTorchActionFailureCallback)},e.prototype.getTorchButton=function(){return this.torchButton},e.prototype.hide=function(){this.torchButton.style.display="none"},e.prototype.show=function(){this.torchButton.style.display="inline-block"},e.prototype.disable=function(){this.torchButton.disabled=!0},e.prototype.enable=function(){this.torchButton.disabled=!1},e.prototype.setText=function(t){this.torchButton.innerText=t},e.prototype.reset=function(){this.torchButton.innerText=Ke.torchOnButton(),this.torchController.reset()},e.create=function(t,n,r,i){var o=new e(n,i);return o.render(t,r),o},e}();var kT=function(){function e(t,n,r){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=n?"block":"none",t.appendChild(this.fileBasedScanRegion);var i=document.createElement("label");i.setAttribute("for",this.getFileScanInputId()),i.style.display="inline-block",this.fileBasedScanRegion.appendChild(i),this.fileSelectionButton=Xn.createElement("button",sn.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",function(h){i.click()}),i.append(this.fileSelectionButton),this.fileScanInput=Xn.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",i.appendChild(this.fileScanInput);var o=this;this.fileScanInput.addEventListener("change",function(h){if(!(h==null||h.target==null)){var g=h.target;if(!(g.files&&g.files.length===0)){var m=g.files,C=m[0],E=C.name;o.setImageNameToButton(E),r(C)}}});var l=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(l),this.fileBasedScanRegion.addEventListener("dragenter",function(h){o.fileBasedScanRegion.style.border=o.fileBasedScanRegionActiveBorder(),h.stopPropagation(),h.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragleave",function(h){o.fileBasedScanRegion.style.border=o.fileBasedScanRegionDefaultBorder(),h.stopPropagation(),h.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragover",function(h){o.fileBasedScanRegion.style.border=o.fileBasedScanRegionActiveBorder(),h.stopPropagation(),h.preventDefault()}),this.fileBasedScanRegion.addEventListener("drop",function(h){h.stopPropagation(),h.preventDefault(),o.fileBasedScanRegion.style.border=o.fileBasedScanRegionDefaultBorder();var g=h.dataTransfer;if(g){var m=g.files;if(!m||m.length===0)return;for(var C=!1,E=0;E<m.length;++E){var x=m.item(E);if(x){var D=/image.*/;if(x.type.match(D)){C=!0;var N=x.name;o.setImageNameToButton(N),r(x),l.innerText=Ke.dragAndDropMessage();break}}}C||(l.innerText=Ke.dragAndDropMessageOnlyImages())}})}return e.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},e.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},e.prototype.isShowing=function(){return this.fileBasedScanRegion.style.display==="block"},e.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},e.prototype.createFileBasedScanRegion=function(){var t=document.createElement("div");return t.style.textAlign="center",t.style.margin="auto",t.style.width="80%",t.style.maxWidth="600px",t.style.border=this.fileBasedScanRegionDefaultBorder(),t.style.padding="10px",t.style.marginBottom="10px",t},e.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},e.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},e.prototype.createDragAndDropMessage=function(){var t=document.createElement("div");return t.innerText=Ke.dragAndDropMessage(),t.style.fontWeight="400",t},e.prototype.setImageNameToButton=function(t){var n=20;if(t.length>n){var r=t.substring(0,8),i=t.length,o=t.substring(i-8,i);t="".concat(r,"....").concat(o)}var l=Ke.fileSelectionChooseAnother()+" - "+t;this.fileSelectionButton.innerText=l},e.prototype.setInitialValueToButton=function(){var t=Ke.fileSelectionChooseImage()+" - "+Ke.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=t},e.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},e.create=function(t,n,r){var i=new e(t,n,r);return i},e}();var LT=function(){function e(t){this.selectElement=Xn.createElement("select",sn.CAMERA_SELECTION_SELECT_ID),this.cameras=t,this.options=[]}return e.prototype.render=function(t){var n=document.createElement("span");n.style.marginRight="10px";var r=this.cameras.length;if(r===0)throw new Error("No cameras found");if(r===1)n.style.display="none";else{var i=Ke.selectCamera();n.innerText="".concat(i," (").concat(this.cameras.length,")  ")}for(var o=1,l=0,h=this.cameras;l<h.length;l++){var g=h[l],m=g.id,C=g.label==null?m:g.label;(!C||C==="")&&(C=[Ke.anonymousCameraPrefix(),o++].join(" "));var E=document.createElement("option");E.value=m,E.innerText=C,this.options.push(E),this.selectElement.appendChild(E)}n.appendChild(this.selectElement),t.appendChild(n)},e.prototype.disable=function(){this.selectElement.disabled=!0},e.prototype.isDisabled=function(){return this.selectElement.disabled===!0},e.prototype.enable=function(){this.selectElement.disabled=!1},e.prototype.getValue=function(){return this.selectElement.value},e.prototype.hasValue=function(t){for(var n=0,r=this.options;n<r.length;n++){var i=r[n];if(i.value===t)return!0}return!1},e.prototype.setValue=function(t){if(!this.hasValue(t))throw new Error("".concat(t," is not present in the camera list."));this.selectElement.value=t},e.prototype.hasSingleItem=function(){return this.cameras.length===1},e.prototype.numCameras=function(){return this.cameras.length},e.create=function(t,n){var r=new e(n);return r.render(t),r},e}();var FT=function(){function e(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=Xn.createElement("input",sn.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return e.prototype.render=function(t,n){this.zoomElementContainer.style.display=n?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",t.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var r=Ke.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(r),this.rangeText.style.marginRight="10px";var i=this;this.rangeInput.addEventListener("input",function(){return i.onValueChange()}),this.rangeInput.addEventListener("change",function(){return i.onValueChange()}),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},e.prototype.onValueChange=function(){var t=Ke.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(t),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},e.prototype.setValues=function(t,n,r,i){this.rangeInput.min=t.toString(),this.rangeInput.max=n.toString(),this.rangeInput.step=i.toString(),this.rangeInput.value=r.toString(),this.onValueChange()},e.prototype.show=function(){this.zoomElementContainer.style.display="block"},e.prototype.hide=function(){this.zoomElementContainer.style.display="none"},e.prototype.setOnCameraZoomValueChangeCallback=function(t){this.onChangeCallback=t},e.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},e.create=function(t,n){var r=new e;return r.render(t,n),r},e}();var Ir=function(e){return e[e.STATUS_DEFAULT=0]="STATUS_DEFAULT",e[e.STATUS_SUCCESS=1]="STATUS_SUCCESS",e[e.STATUS_WARNING=2]="STATUS_WARNING",e[e.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION",e}(Ir||{});function U7(e){return{fps:e.fps,qrbox:e.qrbox,aspectRatio:e.aspectRatio,disableFlip:e.disableFlip,videoConstraints:e.videoConstraints}}function j7(e,t){return{formatsToSupport:e.formatsToSupport,useBarCodeDetectorIfSupported:e.useBarCodeDetectorIfSupported,experimentalFeatures:e.experimentalFeatures,verbose:t}}var K_=function(){function e(t,n,r){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=t,this.config=this.createConfig(n),this.verbose=r===!0,!document.getElementById(t))throw"HTML Element with id=".concat(t," not found");this.scanTypeSelector=new Hi(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new Xh(this.verbose),this.persistedDataManager=new TT,n.rememberLastUsedCamera!==!0&&this.persistedDataManager.reset()}return e.prototype.render=function(t,n){var r=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(o,l){if(t)t(o,l);else{if(r.lastMatchFound===o)return;r.lastMatchFound=o,r.setHeaderMessage(Ke.lastMatch(o),Ir.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(o,l){n&&n(o,l)};var i=document.getElementById(this.elementId);if(!i)throw"HTML Element with id=".concat(this.elementId," not found");i.innerHTML="",this.createBasicLayout(i),this.html5Qrcode=new ep(this.getScanRegionId(),j7(this.config,this.verbose))},e.prototype.pause=function(t){(Er(t)||t!==!0)&&(t=!1),this.getHtml5QrcodeOrFail().pause(t)},e.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},e.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},e.prototype.clear=function(){var t=this,n=function(){var r=document.getElementById(t.elementId);r&&(r.innerHTML="",t.resetBasicLayout(r))};return this.html5Qrcode?new Promise(function(r,i){if(!t.html5Qrcode){r();return}t.html5Qrcode.isScanning?t.html5Qrcode.stop().then(function(o){if(!t.html5Qrcode){r();return}t.html5Qrcode.clear(),n(),r()}).catch(function(o){t.verbose&&t.logger.logError("Unable to stop qrcode scanner",o),i(o)}):(t.html5Qrcode.clear(),n(),r())}):Promise.resolve()},e.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},e.prototype.applyVideoConstraints=function(t){return this.getHtml5QrcodeOrFail().applyVideoConstraints(t)},e.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},e.prototype.createConfig=function(t){return t?(t.fps||(t.fps=Zn.SCAN_DEFAULT_FPS),t.rememberLastUsedCamera!==!Zn.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(t.rememberLastUsedCamera=Zn.DEFAULT_REMEMBER_LAST_CAMERA_USED),t.supportedScanTypes||(t.supportedScanTypes=Zn.DEFAULT_SUPPORTED_SCAN_TYPE),t):{fps:Zn.SCAN_DEFAULT_FPS,rememberLastUsedCamera:Zn.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:Zn.DEFAULT_SUPPORTED_SCAN_TYPE}},e.prototype.createBasicLayout=function(t){t.style.position="relative",t.style.padding="0px",t.style.border="1px solid silver",this.createHeader(t);var n=document.createElement("div"),r=this.getScanRegionId();n.id=r,n.style.width="100%",n.style.minHeight="100px",n.style.textAlign="center",t.appendChild(n),Hi.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var i=document.createElement("div"),o=this.getDashboardId();i.id=o,i.style.width="100%",t.appendChild(i),this.setupInitialDashboard(i)},e.prototype.resetBasicLayout=function(t){t.style.border="none"},e.prototype.setupInitialDashboard=function(t){this.createSection(t),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},e.prototype.createHeader=function(t){var n=document.createElement("div");n.style.textAlign="left",n.style.margin="0px",t.appendChild(n);var r=new MT;r.renderInto(n);var i=document.createElement("div");i.id=this.getHeaderMessageContainerId(),i.style.display="none",i.style.textAlign="center",i.style.fontSize="14px",i.style.padding="2px 10px",i.style.margin="4px",i.style.borderTop="1px solid #f6f6f6",n.appendChild(i)},e.prototype.createSection=function(t){var n=document.createElement("div");n.id=this.getDashboardSectionId(),n.style.width="100%",n.style.padding="10px 0px 10px 0px",n.style.textAlign="left",t.appendChild(n)},e.prototype.createCameraListUi=function(t,n,r){var i=this;i.showHideScanTypeSwapLink(!1),i.setHeaderMessage(Ke.cameraPermissionRequesting());var o=function(){r||i.createPermissionButton(t,n)};ep.getCameras().then(function(l){i.persistedDataManager.setHasPermission(!0),i.showHideScanTypeSwapLink(!0),i.resetHeaderMessage(),l&&l.length>0?(t.removeChild(n),i.renderCameraSelection(l)):(i.setHeaderMessage(Ke.noCameraFound(),Ir.STATUS_WARNING),o())}).catch(function(l){i.persistedDataManager.setHasPermission(!1),r?r.disabled=!1:o(),i.setHeaderMessage(l,Ir.STATUS_WARNING),i.showHideScanTypeSwapLink(!0)})},e.prototype.createPermissionButton=function(t,n){var r=this,i=Xn.createElement("button",this.getCameraPermissionButtonId());i.innerText=Ke.cameraPermissionTitle(),i.addEventListener("click",function(){i.disabled=!0,r.createCameraListUi(t,n,i)}),n.appendChild(i)},e.prototype.createPermissionsUi=function(t,n){var r=this;if(Hi.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()){Q_.hasPermissions().then(function(i){i?r.createCameraListUi(t,n):(r.persistedDataManager.setHasPermission(!1),r.createPermissionButton(t,n))}).catch(function(i){r.persistedDataManager.setHasPermission(!1),r.createPermissionButton(t,n)});return}this.createPermissionButton(t,n)},e.prototype.createSectionControlPanel=function(){var t=document.getElementById(this.getDashboardSectionId()),n=document.createElement("div");t.appendChild(n);var r=document.createElement("div");r.id=this.getDashboardSectionCameraScanRegionId(),r.style.display=Hi.isCameraScanType(this.currentScanType)?"block":"none",n.appendChild(r);var i=document.createElement("div");i.style.textAlign="center",r.appendChild(i),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(r,i),this.renderFileScanUi(n)},e.prototype.renderFileScanUi=function(t){var n=Hi.isFileScanType(this.currentScanType),r=this,i=function(o){if(!r.html5Qrcode)throw"html5Qrcode not defined";Hi.isFileScanType(r.currentScanType)&&(r.setHeaderMessage(Ke.loadingImage()),r.html5Qrcode.scanFileV2(o,!0).then(function(l){r.resetHeaderMessage(),r.qrCodeSuccessCallback(l.decodedText,l)}).catch(function(l){r.setHeaderMessage(l,Ir.STATUS_WARNING),r.qrCodeErrorCallback(l,Zh.createFrom(l))}))};this.fileSelectionUi=kT.create(t,n,i)},e.prototype.renderCameraSelection=function(t){var n=this,r=this,i=document.getElementById(this.getDashboardSectionCameraScanRegionId());i.style.textAlign="center";var o=FT.create(i,!1),l=function(U){var $=U.zoomFeature();if($.isSupported()){o.setOnCameraZoomValueChangeCallback(function(ie){$.apply(ie)});var W=1;n.config.defaultZoomValueIfSupported&&(W=n.config.defaultZoomValueIfSupported),W=fT(W,$.min(),$.max()),o.setValues($.min(),$.max(),W,$.step()),o.show()}},h=LT.create(i,t),g=document.createElement("span"),m=Xn.createElement("button",sn.CAMERA_START_BUTTON_ID);m.innerText=Ke.scanButtonStartScanningText(),g.appendChild(m);var C=Xn.createElement("button",sn.CAMERA_STOP_BUTTON_ID);C.innerText=Ke.scanButtonStopScanningText(),C.style.display="none",C.disabled=!0,g.appendChild(C);var E,x=function(U){if(!U.torchFeature().isSupported()){E&&E.hide();return}E?E.updateTorchCapability(U.torchFeature()):E=PT.create(g,U.torchFeature(),{display:"none",marginLeft:"5px"},function($){r.setHeaderMessage($,Ir.STATUS_WARNING)}),E.show()};i.appendChild(g);var D=function(U){U||(m.style.display="none"),m.innerText=Ke.scanButtonStartScanningText(),m.style.opacity="1",m.disabled=!1,U&&(m.style.display="inline-block")};if(m.addEventListener("click",function(U){m.innerText=Ke.scanButtonScanningStarting(),h.disable(),m.disabled=!0,m.style.opacity="0.5",n.scanTypeSelector.hasMoreThanOneScanType()&&r.showHideScanTypeSwapLink(!1),r.resetHeaderMessage();var $=h.getValue();r.persistedDataManager.setLastUsedCameraId($),r.html5Qrcode.start($,U7(r.config),r.qrCodeSuccessCallback,r.qrCodeErrorCallback).then(function(W){C.disabled=!1,C.style.display="inline-block",D(!1);var ie=r.html5Qrcode.getRunningTrackCameraCapabilities();n.config.showTorchButtonIfSupported===!0&&x(ie),n.config.showZoomSliderIfSupported===!0&&l(ie)}).catch(function(W){r.showHideScanTypeSwapLink(!0),h.enable(),D(!0),r.setHeaderMessage(W,Ir.STATUS_WARNING)})}),h.hasSingleItem()&&m.click(),C.addEventListener("click",function(U){if(!r.html5Qrcode)throw"html5Qrcode not defined";C.disabled=!0,r.html5Qrcode.stop().then(function($){n.scanTypeSelector.hasMoreThanOneScanType()&&r.showHideScanTypeSwapLink(!0),h.enable(),m.disabled=!1,C.style.display="none",m.style.display="inline-block",E&&(E.reset(),E.hide()),o.removeOnCameraZoomValueChangeCallback(),o.hide(),r.insertCameraScanImageToScanRegion()}).catch(function($){C.disabled=!1,r.setHeaderMessage($,Ir.STATUS_WARNING)})}),r.persistedDataManager.getLastUsedCameraId()){var N=r.persistedDataManager.getLastUsedCameraId();h.hasValue(N)?(h.setValue(N),m.click()):r.persistedDataManager.resetLastUsedCameraId()}},e.prototype.createSectionSwap=function(){var t=this,n=Ke.textIfCameraScanSelected(),r=Ke.textIfFileScanSelected(),i=document.getElementById(this.getDashboardSectionId()),o=document.createElement("div");o.style.textAlign="center";var l=Xn.createElement("span",this.getDashboardSectionSwapLinkId());l.style.textDecoration="underline",l.style.cursor="pointer",l.innerText=Hi.isCameraScanType(this.currentScanType)?n:r,l.addEventListener("click",function(){if(!t.sectionSwapAllowed){t.verbose&&t.logger.logError("Section swap called when not allowed");return}t.resetHeaderMessage(),t.fileSelectionUi.resetValue(),t.sectionSwapAllowed=!1,Hi.isCameraScanType(t.currentScanType)?(t.clearScanRegion(),t.getCameraScanRegion().style.display="none",t.fileSelectionUi.show(),l.innerText=r,t.currentScanType=di.SCAN_TYPE_FILE,t.insertFileScanImageToScanRegion()):(t.clearScanRegion(),t.getCameraScanRegion().style.display="block",t.fileSelectionUi.hide(),l.innerText=n,t.currentScanType=di.SCAN_TYPE_CAMERA,t.insertCameraScanImageToScanRegion(),t.startCameraScanIfPermissionExistsOnSwap()),t.sectionSwapAllowed=!0}),o.appendChild(l),i.appendChild(o)},e.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var t=this,n=this;if(this.persistedDataManager.hasCameraPermissions()){Q_.hasPermissions().then(function(r){if(r){var i=document.getElementById(n.getCameraPermissionButtonId());if(!i)throw t.logger.logError("Permission button not found, fail;"),"Permission button not found";i.click()}else n.persistedDataManager.setHasPermission(!1)}).catch(function(r){n.persistedDataManager.setHasPermission(!1)});return}},e.prototype.resetHeaderMessage=function(){var t=document.getElementById(this.getHeaderMessageContainerId());t.style.display="none"},e.prototype.setHeaderMessage=function(t,n){n||(n=Ir.STATUS_DEFAULT);var r=this.getHeaderMessageDiv();switch(r.innerText=t,r.style.display="block",n){case Ir.STATUS_SUCCESS:r.style.background="rgba(106, 175, 80, 0.26)",r.style.color="#477735";break;case Ir.STATUS_WARNING:r.style.background="rgba(203, 36, 49, 0.14)",r.style.color="#cb2431";break;case Ir.STATUS_DEFAULT:default:r.style.background="rgba(0, 0, 0, 0)",r.style.color="rgb(17, 17, 17)";break}},e.prototype.showHideScanTypeSwapLink=function(t){this.scanTypeSelector.hasMoreThanOneScanType()&&(t!==!0&&(t=!1),this.sectionSwapAllowed=t,this.getDashboardSectionSwapLink().style.display=t?"inline-block":"none")},e.prototype.insertCameraScanImageToScanRegion=function(){var t=this,n=document.getElementById(this.getScanRegionId());if(this.cameraScanImage){n.innerHTML="<br>",n.appendChild(this.cameraScanImage);return}this.cameraScanImage=new Image,this.cameraScanImage.onload=function(r){n.innerHTML="<br>",n.appendChild(t.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=xT,this.cameraScanImage.alt=Ke.cameraScanAltText()},e.prototype.insertFileScanImageToScanRegion=function(){var t=this,n=document.getElementById(this.getScanRegionId());if(this.fileScanImage){n.innerHTML="<br>",n.appendChild(this.fileScanImage);return}this.fileScanImage=new Image,this.fileScanImage.onload=function(r){n.innerHTML="<br>",n.appendChild(t.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=ST,this.fileScanImage.alt=Ke.fileScanAltText()},e.prototype.clearScanRegion=function(){var t=document.getElementById(this.getScanRegionId());t.innerHTML=""},e.prototype.getDashboardSectionId=function(){return"".concat(this.elementId,"__dashboard_section")},e.prototype.getDashboardSectionCameraScanRegionId=function(){return"".concat(this.elementId,"__dashboard_section_csr")},e.prototype.getDashboardSectionSwapLinkId=function(){return sn.SCAN_TYPE_CHANGE_ANCHOR_ID},e.prototype.getScanRegionId=function(){return"".concat(this.elementId,"__scan_region")},e.prototype.getDashboardId=function(){return"".concat(this.elementId,"__dashboard")},e.prototype.getHeaderMessageContainerId=function(){return"".concat(this.elementId,"__header_message")},e.prototype.getCameraPermissionButtonId=function(){return sn.CAMERA_PERMISSION_BUTTON_ID},e.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},e.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},e.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())},e}();function H7(e,t){if(e&1&&(L(0,"p"),j(1),P()),e&2){let n=gt();oe(),on("Table ID: ",n.tableId,"")}}var BT=(()=>{class e{navigationService;tableId=null;uniqueLinkToken=null;ownerId=null;restaurantid=null;html5QrCodeScanner=null;constructor(n){this.navigationService=n}ngAfterViewInit(){this.html5QrCodeScanner=new K_("reader",{fps:10,qrbox:{width:250,height:250}},!1),this.html5QrCodeScanner.render(this.onScanSuccess.bind(this),this.onScanFailure)}onScanSuccess(n){let r=new URL(n),i=r.searchParams.get("tableid"),o=r.searchParams.get("uniqueLinkToken"),l=r.searchParams.get("restaurantid"),h=r.searchParams.get("ownerid");i?(this.tableId=i,this.uniqueLinkToken=o,this.restaurantid=l,this.ownerId=h,localStorage.setItem("customercurrentTable",this.tableId),localStorage.setItem("uniqueLinkToken",this.uniqueLinkToken),localStorage.setItem("restaurantid",this.restaurantid),localStorage.setItem("ownerid",this.ownerId),this.navigationService.NavigateTo("tableordered"),console.log("Table ID saved:",this.tableId)):console.error("Table ID not found in the scanned QR code."),this.html5QrCodeScanner?.clear()}onScanFailure(n){console.warn(`QR code scan error: ${n}`)}ngOnDestroy(){this.html5QrCodeScanner?.clear()}static \u0275fac=function(r){return new(r||e)(ne(rt))};static \u0275cmp=ce({type:e,selectors:[["app-scanqrcode"]],standalone:!0,features:[de],decls:4,vars:1,consts:[["id","reader",2,"width","300px"]],template:function(r,i){r&1&&(L(0,"p"),j(1,"scanqrcode works!"),P(),we(2,"div",0),In(3,H7,2,1,"p")),r&2&&(oe(3),pn(i.tableId?3:-1))}})}return e})();var VT=(()=>{class e{router;constructor(n){this.router=n}setOrder(n){localStorage.setItem("orderNumber",n),this.router.navigate(["/scanqrcode"])}static \u0275fac=function(r){return new(r||e)(ne(ni))};static \u0275cmp=ce({type:e,selectors:[["app-setorder"]],standalone:!0,features:[de],decls:13,vars:0,consts:[["orderNumberInput",""],[1,"displaybox"],[1,"logo"],[1,"buttons"],["type","number","placeholder","numer zam\xF3wienia"],[3,"click"],[1,"footstatic"]],template:function(r,i){if(r&1){let o=Ft();L(0,"main")(1,"div",1)(2,"div",2)(3,"h1"),j(4,"EasyOrder"),P()(),L(5,"div",3)(6,"label"),j(7,"Wprowad\u017A numer zam\xF3wienia"),P(),we(8,"input",4,0),L(10,"button",5),ee("click",function(){At(o);let h=ef(9);return Dt(i.setOrder(h.value))}),j(11,"Przypisz stolik"),P()(),we(12,"div",6),P()()}}})}return e})();var UT=(()=>{class e{route;router;waiterId=null;uniqueLinkToken=null;ownerId=null;restaurantId=null;pin="";constructor(n,r){this.route=n,this.router=r,Be(Qe.firebaseConfig)}ngOnInit(){this.route.queryParams.subscribe(n=>{this.uniqueLinkToken=n.uniqueLinkToken||null,this.ownerId=n.ownerid||null,this.restaurantId=n.restaurantid||null})}authenticateWaiter(){let n=fe();if(!this.restaurantId||!this.uniqueLinkToken||!this.ownerId){console.error("Missing required data");return}let r=le(n,`Owners/${this.ownerId}/Restaurants/${this.restaurantId}`);Ye(r).then(i=>{if(i.exists()){let l=i.val().settings.waiter_access_pin;l&&l.toString()===this.pin?this.saveAuthData():console.error("Invalid PIN")}else console.error("Restaurant not found")}).catch(i=>{console.error("Error authenticating waiter:",i)})}saveAuthData(){localStorage.setItem("uniqueLinkToken",this.uniqueLinkToken),localStorage.setItem("restaurantid",this.restaurantId),localStorage.setItem("ownerid",this.ownerId),localStorage.setItem("waiterpin",this.pin),this.router.navigate(["/waitertablelist"])}static \u0275fac=function(r){return new(r||e)(ne(ti),ne(ni))};static \u0275cmp=ce({type:e,selectors:[["app-waiterauth"]],standalone:!0,features:[de],decls:8,vars:1,consts:[[1,"auth-container"],["for","pin"],["id","pin","type","password","placeholder","Access Pin","required","",3,"ngModelChange","ngModel"],[3,"click"]],template:function(r,i){r&1&&(L(0,"div",0)(1,"h2"),j(2,"Waiter Authentication"),P(),L(3,"label",1),j(4,"Enter Access Pin:"),P(),L(5,"input",2),Vt("ngModelChange",function(l){return Wt(i.pin,l)||(i.pin=l),l}),P(),L(6,"button",3),ee("click",function(){return i.authenticateWaiter()}),j(7,"Proceed to Management"),P()()),r&2&&(oe(5),Bt("ngModel",i.pin))},dependencies:[bn,qn,gr,or,ir]})}return e})();function z7(e,t){e&1&&(L(0,"p"),j(1,"Brak stolik\xF3w przypisanych do restauracji."),P())}function W7(e,t){if(e&1){let n=Ft();L(0,"button",6),ee("click",function(){let i=At(n).$implicit,o=gt(2);return Dt(o.setTable(i.id))}),j(1),P()}if(e&2){let n=t.$implicit;oe(),on(" ",n.name," ")}}function G7(e,t){if(e&1&&Gn(0,W7,2,1,"button",5,Wn),e&2){let n=gt();$n(n.tables)}}var jT=(()=>{class e{navigationService;tables=[];constructor(n){this.navigationService=n;let r=Be(Qe.firebaseConfig)}ngOnInit(){this.loadTables()}loadTables(){let n=fe(),r=localStorage.getItem("currentRestaurant"),i=sessionStorage.getItem("userId");if(!r){console.error("No current restaurant found in local storage");return}let o=le(n,`Owners/${i}/Restaurants/${r}/Tables`);Ye(o).then(l=>{if(l.exists()){let h=l.val();this.tables=Object.values(h)}else console.log("No tables found")}).catch(l=>{console.error("Error loading tables:",l)})}setTable(n){localStorage.setItem("currentTable",n),this.goToPage("waitertablelookup")}goToPage(n){this.navigationService.NavigateTo(n)}static \u0275fac=function(r){return new(r||e)(ne(rt))};static \u0275cmp=ce({type:e,selectors:[["app-waitertablelist"]],standalone:!0,features:[de],decls:13,vars:1,consts:[[1,"displaybox"],[1,"logo"],[1,"buttons"],[1,"footstatic"],[3,"click"],[1,"table-button"],[1,"table-button",3,"click"]],template:function(r,i){r&1&&(L(0,"main")(1,"div",0)(2,"div",1)(3,"h1"),j(4,"EasyOrder"),P()(),L(5,"div",2),In(6,z7,2,0,"p")(7,G7,2,0),P(),L(8,"div",3)(9,"button",4),ee("click",function(){return i.goToPage("tablecreate")}),j(10,"Dodaj stolik"),P(),L(11,"button",4),ee("click",function(){return i.goToPage("tablegroupmanage")}),j(12,"Edytuj grupy"),P()()()()),r&2&&(oe(6),pn(i.tables.length===0?6:7))},styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;padding:16px;position:relative}.displaybox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center;position:relative}.logo[_ngcontent-%COMP%]{display:flex;font-size:45%;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center;margin-bottom:48px}.buttons[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:flex-start;align-items:center;align-content:center}.buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{text-align:left;width:100%;background:#fff;padding:24px;font-size:110%;color:#000;font-weight:600;letter-spacing:2px;border:1px solid #000000;transition:all .5s;margin-bottom:24px}.footstatic[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center}.footstatic[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:calc(100% - 16px);background:#fff;padding:24px;font-size:110%;color:#000;font-weight:600;letter-spacing:2px;border:1px solid #000000;transition:all .5s;margin-bottom:24px;margin-right:8px}"]})}return e})();var HT=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275cmp=ce({type:e,selectors:[["app-waitertablelookup"]],standalone:!0,features:[de],decls:2,vars:0,template:function(r,i){r&1&&(L(0,"p"),j(1,"waitertablelookup works!"),P())}})}return e})();var zT=[{path:"",component:w_},{path:"landingpage",component:w_},{path:"register",component:UA},{path:"login",component:gA},{path:"newrestaurant",component:jA},{path:"managerestaurant",component:HA},{path:"changerestaurant",component:zA},{path:"restaurantbilings",component:WA},{path:"restaurantsettings",component:GA},{path:"tablemanage",component:YA},{path:"tablecreate",component:ZA},{path:"tableedit",component:XA},{path:"restaurantstats",component:qA},{path:"restaurantrevievs",component:$A},{path:"settable",component:QA},{path:"tablegroupcreate",component:JA},{path:"tablegroupmanage",component:KA},{path:"showtableqr",component:rT},{path:"tablesettings",component:iT},{path:"waitersettings",component:oT},{path:"alltablesqrcodes",component:sT},{path:"tableordered",component:cT},{path:"scanqrcode",component:BT},{path:"setorder",component:VT},{path:"waiterauth",component:UT},{path:"waitertablelist",component:jT},{path:"waitertablelookup",component:HT}];$I(Nb,{providers:[Mb(zT),{provide:bn}]});
