var uM=Object.create;var kp=Object.defineProperty,dM=Object.defineProperties,fM=Object.getOwnPropertyDescriptor,hM=Object.getOwnPropertyDescriptors,pM=Object.getOwnPropertyNames,Iu=Object.getOwnPropertySymbols,gM=Object.getPrototypeOf,Lp=Object.prototype.hasOwnProperty,N_=Object.prototype.propertyIsEnumerable;var M_=(e,n,t)=>n in e?kp(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,ne=(e,n)=>{for(var t in n||={})Lp.call(n,t)&&M_(e,t,n[t]);if(Iu)for(var t of Iu(n))N_.call(n,t)&&M_(e,t,n[t]);return e},Le=(e,n)=>dM(e,hM(n));var O_=(e,n)=>{var t={};for(var r in e)Lp.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(e!=null&&Iu)for(var r of Iu(e))n.indexOf(r)<0&&N_.call(e,r)&&(t[r]=e[r]);return t};var dt=(e,n)=>()=>(n||e((n={exports:{}}).exports,n),n.exports);var mM=(e,n,t,r)=>{if(n&&typeof n=="object"||typeof n=="function")for(let i of pM(n))!Lp.call(e,i)&&i!==t&&kp(e,i,{get:()=>n[i],enumerable:!(r=fM(n,i))||r.enumerable});return e};var R_=(e,n,t)=>(t=e!=null?uM(gM(e)):{},mM(n||!e||!e.__esModule?kp(t,"default",{value:e,enumerable:!0}):t,e));var qt=(e,n,t)=>new Promise((r,i)=>{var o=g=>{try{h(t.next(g))}catch(m){i(m)}},c=g=>{try{h(t.throw(g))}catch(m){i(m)}},h=g=>g.done?r(g.value):Promise.resolve(g.value).then(o,c);h((t=t.apply(e,n)).next())});var T2=dt((lX,A2)=>{"use strict";A2.exports=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}});var Mo=dt(Is=>{"use strict";var IC,E7=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];Is.getSymbolSize=function(n){if(!n)throw new Error('"version" cannot be null or undefined');if(n<1||n>40)throw new Error('"version" should be in range from 1 to 40');return n*4+17};Is.getSymbolTotalCodewords=function(n){return E7[n]};Is.getBCHDigit=function(e){let n=0;for(;e!==0;)n++,e>>>=1;return n};Is.setToSJISFunction=function(n){if(typeof n!="function")throw new Error('"toSJISFunc" is not a valid function.');IC=n};Is.isKanjiModeEnabled=function(){return typeof IC<"u"};Is.toSJIS=function(n){return IC(n)}});var qh=dt(Dr=>{"use strict";Dr.L={bit:1};Dr.M={bit:0};Dr.Q={bit:3};Dr.H={bit:2};function I7(e){if(typeof e!="string")throw new Error("Param is not a string");switch(e.toLowerCase()){case"l":case"low":return Dr.L;case"m":case"medium":return Dr.M;case"q":case"quartile":return Dr.Q;case"h":case"high":return Dr.H;default:throw new Error("Unknown EC Level: "+e)}}Dr.isValid=function(n){return n&&typeof n.bit<"u"&&n.bit>=0&&n.bit<4};Dr.from=function(n,t){if(Dr.isValid(n))return n;try{return I7(n)}catch{return t}}});var O2=dt((dX,N2)=>{"use strict";function M2(){this.buffer=[],this.length=0}M2.prototype={get:function(e){let n=Math.floor(e/8);return(this.buffer[n]>>>7-e%8&1)===1},put:function(e,n){for(let t=0;t<n;t++)this.putBit((e>>>n-t-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(e){let n=Math.floor(this.length/8);this.buffer.length<=n&&this.buffer.push(0),e&&(this.buffer[n]|=128>>>this.length%8),this.length++}};N2.exports=M2});var P2=dt((fX,R2)=>{"use strict";function nu(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}nu.prototype.set=function(e,n,t,r){let i=e*this.size+n;this.data[i]=t,r&&(this.reservedBit[i]=!0)};nu.prototype.get=function(e,n){return this.data[e*this.size+n]};nu.prototype.xor=function(e,n,t){this.data[e*this.size+n]^=t};nu.prototype.isReserved=function(e,n){return this.reservedBit[e*this.size+n]};R2.exports=nu});var k2=dt(Yh=>{"use strict";var S7=Mo().getSymbolSize;Yh.getRowColCoords=function(n){if(n===1)return[];let t=Math.floor(n/7)+2,r=S7(n),i=r===145?26:Math.ceil((r-13)/(2*t-2))*2,o=[r-7];for(let c=1;c<t-1;c++)o[c]=o[c-1]-i;return o.push(6),o.reverse()};Yh.getPositions=function(n){let t=[],r=Yh.getRowColCoords(n),i=r.length;for(let o=0;o<i;o++)for(let c=0;c<i;c++)o===0&&c===0||o===0&&c===i-1||o===i-1&&c===0||t.push([r[o],r[c]]);return t}});var B2=dt(F2=>{"use strict";var D7=Mo().getSymbolSize,L2=7;F2.getPositions=function(n){let t=D7(n);return[[0,0],[t-L2,0],[0,t-L2]]}});var V2=dt(At=>{"use strict";At.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};var Ss={N1:3,N2:3,N3:40,N4:10};At.isValid=function(n){return n!=null&&n!==""&&!isNaN(n)&&n>=0&&n<=7};At.from=function(n){return At.isValid(n)?parseInt(n,10):void 0};At.getPenaltyN1=function(n){let t=n.size,r=0,i=0,o=0,c=null,h=null;for(let g=0;g<t;g++){i=o=0,c=h=null;for(let m=0;m<t;m++){let v=n.get(g,m);v===c?i++:(i>=5&&(r+=Ss.N1+(i-5)),c=v,i=1),v=n.get(m,g),v===h?o++:(o>=5&&(r+=Ss.N1+(o-5)),h=v,o=1)}i>=5&&(r+=Ss.N1+(i-5)),o>=5&&(r+=Ss.N1+(o-5))}return r};At.getPenaltyN2=function(n){let t=n.size,r=0;for(let i=0;i<t-1;i++)for(let o=0;o<t-1;o++){let c=n.get(i,o)+n.get(i,o+1)+n.get(i+1,o)+n.get(i+1,o+1);(c===4||c===0)&&r++}return r*Ss.N2};At.getPenaltyN3=function(n){let t=n.size,r=0,i=0,o=0;for(let c=0;c<t;c++){i=o=0;for(let h=0;h<t;h++)i=i<<1&2047|n.get(c,h),h>=10&&(i===1488||i===93)&&r++,o=o<<1&2047|n.get(h,c),h>=10&&(o===1488||o===93)&&r++}return r*Ss.N3};At.getPenaltyN4=function(n){let t=0,r=n.data.length;for(let o=0;o<r;o++)t+=n.data[o];return Math.abs(Math.ceil(t*100/r/5)-10)*Ss.N4};function A7(e,n,t){switch(e){case At.Patterns.PATTERN000:return(n+t)%2===0;case At.Patterns.PATTERN001:return n%2===0;case At.Patterns.PATTERN010:return t%3===0;case At.Patterns.PATTERN011:return(n+t)%3===0;case At.Patterns.PATTERN100:return(Math.floor(n/2)+Math.floor(t/3))%2===0;case At.Patterns.PATTERN101:return n*t%2+n*t%3===0;case At.Patterns.PATTERN110:return(n*t%2+n*t%3)%2===0;case At.Patterns.PATTERN111:return(n*t%3+(n+t)%2)%2===0;default:throw new Error("bad maskPattern:"+e)}}At.applyMask=function(n,t){let r=t.size;for(let i=0;i<r;i++)for(let o=0;o<r;o++)t.isReserved(o,i)||t.xor(o,i,A7(n,o,i))};At.getBestMask=function(n,t){let r=Object.keys(At.Patterns).length,i=0,o=1/0;for(let c=0;c<r;c++){t(c),At.applyMask(c,n);let h=At.getPenaltyN1(n)+At.getPenaltyN2(n)+At.getPenaltyN3(n)+At.getPenaltyN4(n);At.applyMask(c,n),h<o&&(o=h,i=c)}return i}});var DC=dt(SC=>{"use strict";var No=qh(),Xh=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],Zh=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];SC.getBlocksCount=function(n,t){switch(t){case No.L:return Xh[(n-1)*4+0];case No.M:return Xh[(n-1)*4+1];case No.Q:return Xh[(n-1)*4+2];case No.H:return Xh[(n-1)*4+3];default:return}};SC.getTotalCodewordsCount=function(n,t){switch(t){case No.L:return Zh[(n-1)*4+0];case No.M:return Zh[(n-1)*4+1];case No.Q:return Zh[(n-1)*4+2];case No.H:return Zh[(n-1)*4+3];default:return}}});var U2=dt(Kh=>{"use strict";var ru=new Uint8Array(512),Qh=new Uint8Array(256);(function(){let n=1;for(let t=0;t<255;t++)ru[t]=n,Qh[n]=t,n<<=1,n&256&&(n^=285);for(let t=255;t<512;t++)ru[t]=ru[t-255]})();Kh.log=function(n){if(n<1)throw new Error("log("+n+")");return Qh[n]};Kh.exp=function(n){return ru[n]};Kh.mul=function(n,t){return n===0||t===0?0:ru[Qh[n]+Qh[t]]}});var j2=dt(iu=>{"use strict";var AC=U2();iu.mul=function(n,t){let r=new Uint8Array(n.length+t.length-1);for(let i=0;i<n.length;i++)for(let o=0;o<t.length;o++)r[i+o]^=AC.mul(n[i],t[o]);return r};iu.mod=function(n,t){let r=new Uint8Array(n);for(;r.length-t.length>=0;){let i=r[0];for(let c=0;c<t.length;c++)r[c]^=AC.mul(t[c],i);let o=0;for(;o<r.length&&r[o]===0;)o++;r=r.slice(o)}return r};iu.generateECPolynomial=function(n){let t=new Uint8Array([1]);for(let r=0;r<n;r++)t=iu.mul(t,new Uint8Array([1,AC.exp(r)]));return t}});var W2=dt((_X,z2)=>{"use strict";var H2=j2();function TC(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}TC.prototype.initialize=function(n){this.degree=n,this.genPoly=H2.generateECPolynomial(this.degree)};TC.prototype.encode=function(n){if(!this.genPoly)throw new Error("Encoder not initialized");let t=new Uint8Array(n.length+this.degree);t.set(n);let r=H2.mod(t,this.genPoly),i=this.degree-r.length;if(i>0){let o=new Uint8Array(this.degree);return o.set(r,i),o}return r};z2.exports=TC});var MC=dt(G2=>{"use strict";G2.isValid=function(n){return!isNaN(n)&&n>=1&&n<=40}});var NC=dt(Yi=>{"use strict";var $2="[0-9]+",T7="[A-Z $%*+\\-./:]+",ou="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";ou=ou.replace(/u/g,"\\u");var M7="(?:(?![A-Z0-9 $%*+\\-./:]|"+ou+`)(?:.|[\r
]))+`;Yi.KANJI=new RegExp(ou,"g");Yi.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");Yi.BYTE=new RegExp(M7,"g");Yi.NUMERIC=new RegExp($2,"g");Yi.ALPHANUMERIC=new RegExp(T7,"g");var N7=new RegExp("^"+ou+"$"),O7=new RegExp("^"+$2+"$"),R7=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");Yi.testKanji=function(n){return N7.test(n)};Yi.testNumeric=function(n){return O7.test(n)};Yi.testAlphanumeric=function(n){return R7.test(n)}});var Oo=dt(Jt=>{"use strict";var P7=MC(),OC=NC();Jt.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]};Jt.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]};Jt.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]};Jt.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]};Jt.MIXED={bit:-1};Jt.getCharCountIndicator=function(n,t){if(!n.ccBits)throw new Error("Invalid mode: "+n);if(!P7.isValid(t))throw new Error("Invalid version: "+t);return t>=1&&t<10?n.ccBits[0]:t<27?n.ccBits[1]:n.ccBits[2]};Jt.getBestModeForData=function(n){return OC.testNumeric(n)?Jt.NUMERIC:OC.testAlphanumeric(n)?Jt.ALPHANUMERIC:OC.testKanji(n)?Jt.KANJI:Jt.BYTE};Jt.toString=function(n){if(n&&n.id)return n.id;throw new Error("Invalid mode")};Jt.isValid=function(n){return n&&n.bit&&n.ccBits};function k7(e){if(typeof e!="string")throw new Error("Param is not a string");switch(e.toLowerCase()){case"numeric":return Jt.NUMERIC;case"alphanumeric":return Jt.ALPHANUMERIC;case"kanji":return Jt.KANJI;case"byte":return Jt.BYTE;default:throw new Error("Unknown mode: "+e)}}Jt.from=function(n,t){if(Jt.isValid(n))return n;try{return k7(n)}catch{return t}}});var Q2=dt(Ds=>{"use strict";var Jh=Mo(),L7=DC(),q2=qh(),Ro=Oo(),RC=MC(),X2=7973,Y2=Jh.getBCHDigit(X2);function F7(e,n,t){for(let r=1;r<=40;r++)if(n<=Ds.getCapacity(r,t,e))return r}function Z2(e,n){return Ro.getCharCountIndicator(e,n)+4}function B7(e,n){let t=0;return e.forEach(function(r){let i=Z2(r.mode,n);t+=i+r.getBitsLength()}),t}function V7(e,n){for(let t=1;t<=40;t++)if(B7(e,t)<=Ds.getCapacity(t,n,Ro.MIXED))return t}Ds.from=function(n,t){return RC.isValid(n)?parseInt(n,10):t};Ds.getCapacity=function(n,t,r){if(!RC.isValid(n))throw new Error("Invalid QR Code version");typeof r>"u"&&(r=Ro.BYTE);let i=Jh.getSymbolTotalCodewords(n),o=L7.getTotalCodewordsCount(n,t),c=(i-o)*8;if(r===Ro.MIXED)return c;let h=c-Z2(r,n);switch(r){case Ro.NUMERIC:return Math.floor(h/10*3);case Ro.ALPHANUMERIC:return Math.floor(h/11*2);case Ro.KANJI:return Math.floor(h/13);case Ro.BYTE:default:return Math.floor(h/8)}};Ds.getBestVersionForData=function(n,t){let r,i=q2.from(t,q2.M);if(Array.isArray(n)){if(n.length>1)return V7(n,i);if(n.length===0)return 1;r=n[0]}else r=n;return F7(r.mode,r.getLength(),i)};Ds.getEncodedBits=function(n){if(!RC.isValid(n)||n<7)throw new Error("Invalid QR Code version");let t=n<<12;for(;Jh.getBCHDigit(t)-Y2>=0;)t^=X2<<Jh.getBCHDigit(t)-Y2;return n<<12|t}});var tA=dt(eA=>{"use strict";var PC=Mo(),J2=1335,U7=21522,K2=PC.getBCHDigit(J2);eA.getEncodedBits=function(n,t){let r=n.bit<<3|t,i=r<<10;for(;PC.getBCHDigit(i)-K2>=0;)i^=J2<<PC.getBCHDigit(i)-K2;return(r<<10|i)^U7}});var rA=dt((IX,nA)=>{"use strict";var j7=Oo();function Za(e){this.mode=j7.NUMERIC,this.data=e.toString()}Za.getBitsLength=function(n){return 10*Math.floor(n/3)+(n%3?n%3*3+1:0)};Za.prototype.getLength=function(){return this.data.length};Za.prototype.getBitsLength=function(){return Za.getBitsLength(this.data.length)};Za.prototype.write=function(n){let t,r,i;for(t=0;t+3<=this.data.length;t+=3)r=this.data.substr(t,3),i=parseInt(r,10),n.put(i,10);let o=this.data.length-t;o>0&&(r=this.data.substr(t),i=parseInt(r,10),n.put(i,o*3+1))};nA.exports=Za});var oA=dt((SX,iA)=>{"use strict";var H7=Oo(),kC=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function Qa(e){this.mode=H7.ALPHANUMERIC,this.data=e}Qa.getBitsLength=function(n){return 11*Math.floor(n/2)+6*(n%2)};Qa.prototype.getLength=function(){return this.data.length};Qa.prototype.getBitsLength=function(){return Qa.getBitsLength(this.data.length)};Qa.prototype.write=function(n){let t;for(t=0;t+2<=this.data.length;t+=2){let r=kC.indexOf(this.data[t])*45;r+=kC.indexOf(this.data[t+1]),n.put(r,11)}this.data.length%2&&n.put(kC.indexOf(this.data[t]),6)};iA.exports=Qa});var aA=dt((DX,sA)=>{"use strict";sA.exports=function(n){for(var t=[],r=n.length,i=0;i<r;i++){var o=n.charCodeAt(i);if(o>=55296&&o<=56319&&r>i+1){var c=n.charCodeAt(i+1);c>=56320&&c<=57343&&(o=(o-55296)*1024+c-56320+65536,i+=1)}if(o<128){t.push(o);continue}if(o<2048){t.push(o>>6|192),t.push(o&63|128);continue}if(o<55296||o>=57344&&o<65536){t.push(o>>12|224),t.push(o>>6&63|128),t.push(o&63|128);continue}if(o>=65536&&o<=1114111){t.push(o>>18|240),t.push(o>>12&63|128),t.push(o>>6&63|128),t.push(o&63|128);continue}t.push(239,191,189)}return new Uint8Array(t).buffer}});var cA=dt((AX,lA)=>{"use strict";var z7=aA(),W7=Oo();function Ka(e){this.mode=W7.BYTE,typeof e=="string"&&(e=z7(e)),this.data=new Uint8Array(e)}Ka.getBitsLength=function(n){return n*8};Ka.prototype.getLength=function(){return this.data.length};Ka.prototype.getBitsLength=function(){return Ka.getBitsLength(this.data.length)};Ka.prototype.write=function(e){for(let n=0,t=this.data.length;n<t;n++)e.put(this.data[n],8)};lA.exports=Ka});var dA=dt((TX,uA)=>{"use strict";var G7=Oo(),$7=Mo();function Ja(e){this.mode=G7.KANJI,this.data=e}Ja.getBitsLength=function(n){return n*13};Ja.prototype.getLength=function(){return this.data.length};Ja.prototype.getBitsLength=function(){return Ja.getBitsLength(this.data.length)};Ja.prototype.write=function(e){let n;for(n=0;n<this.data.length;n++){let t=$7.toSJIS(this.data[n]);if(t>=33088&&t<=40956)t-=33088;else if(t>=57408&&t<=60351)t-=49472;else throw new Error("Invalid SJIS character: "+this.data[n]+`
Make sure your charset is UTF-8`);t=(t>>>8&255)*192+(t&255),e.put(t,13)}};uA.exports=Ja});var fA=dt((MX,LC)=>{"use strict";var su={single_source_shortest_paths:function(e,n,t){var r={},i={};i[n]=0;var o=su.PriorityQueue.make();o.push(n,0);for(var c,h,g,m,v,b,I,A,R;!o.empty();){c=o.pop(),h=c.value,m=c.cost,v=e[h]||{};for(g in v)v.hasOwnProperty(g)&&(b=v[g],I=m+b,A=i[g],R=typeof i[g]>"u",(R||A>I)&&(i[g]=I,o.push(g,I),r[g]=h))}if(typeof t<"u"&&typeof i[t]>"u"){var j=["Could not find a path from ",n," to ",t,"."].join("");throw new Error(j)}return r},extract_shortest_path_from_predecessor_list:function(e,n){for(var t=[],r=n,i;r;)t.push(r),i=e[r],r=e[r];return t.reverse(),t},find_path:function(e,n,t){var r=su.single_source_shortest_paths(e,n,t);return su.extract_shortest_path_from_predecessor_list(r,t)},PriorityQueue:{make:function(e){var n=su.PriorityQueue,t={},r;e=e||{};for(r in n)n.hasOwnProperty(r)&&(t[r]=n[r]);return t.queue=[],t.sorter=e.sorter||n.default_sorter,t},default_sorter:function(e,n){return e.cost-n.cost},push:function(e,n){var t={value:e,cost:n};this.queue.push(t),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};typeof LC<"u"&&(LC.exports=su)});var wA=dt(el=>{"use strict";var pt=Oo(),gA=rA(),mA=oA(),yA=cA(),CA=dA(),au=NC(),ep=Mo(),q7=fA();function hA(e){return unescape(encodeURIComponent(e)).length}function lu(e,n,t){let r=[],i;for(;(i=e.exec(t))!==null;)r.push({data:i[0],index:i.index,mode:n,length:i[0].length});return r}function _A(e){let n=lu(au.NUMERIC,pt.NUMERIC,e),t=lu(au.ALPHANUMERIC,pt.ALPHANUMERIC,e),r,i;return ep.isKanjiModeEnabled()?(r=lu(au.BYTE,pt.BYTE,e),i=lu(au.KANJI,pt.KANJI,e)):(r=lu(au.BYTE_KANJI,pt.BYTE,e),i=[]),n.concat(t,r,i).sort(function(c,h){return c.index-h.index}).map(function(c){return{data:c.data,mode:c.mode,length:c.length}})}function FC(e,n){switch(n){case pt.NUMERIC:return gA.getBitsLength(e);case pt.ALPHANUMERIC:return mA.getBitsLength(e);case pt.KANJI:return CA.getBitsLength(e);case pt.BYTE:return yA.getBitsLength(e)}}function Y7(e){return e.reduce(function(n,t){let r=n.length-1>=0?n[n.length-1]:null;return r&&r.mode===t.mode?(n[n.length-1].data+=t.data,n):(n.push(t),n)},[])}function X7(e){let n=[];for(let t=0;t<e.length;t++){let r=e[t];switch(r.mode){case pt.NUMERIC:n.push([r,{data:r.data,mode:pt.ALPHANUMERIC,length:r.length},{data:r.data,mode:pt.BYTE,length:r.length}]);break;case pt.ALPHANUMERIC:n.push([r,{data:r.data,mode:pt.BYTE,length:r.length}]);break;case pt.KANJI:n.push([r,{data:r.data,mode:pt.BYTE,length:hA(r.data)}]);break;case pt.BYTE:n.push([{data:r.data,mode:pt.BYTE,length:hA(r.data)}])}}return n}function Z7(e,n){let t={},r={start:{}},i=["start"];for(let o=0;o<e.length;o++){let c=e[o],h=[];for(let g=0;g<c.length;g++){let m=c[g],v=""+o+g;h.push(v),t[v]={node:m,lastCount:0},r[v]={};for(let b=0;b<i.length;b++){let I=i[b];t[I]&&t[I].node.mode===m.mode?(r[I][v]=FC(t[I].lastCount+m.length,m.mode)-FC(t[I].lastCount,m.mode),t[I].lastCount+=m.length):(t[I]&&(t[I].lastCount=m.length),r[I][v]=FC(m.length,m.mode)+4+pt.getCharCountIndicator(m.mode,n))}}i=h}for(let o=0;o<i.length;o++)r[i[o]].end=0;return{map:r,table:t}}function pA(e,n){let t,r=pt.getBestModeForData(e);if(t=pt.from(n,r),t!==pt.BYTE&&t.bit<r.bit)throw new Error('"'+e+'" cannot be encoded with mode '+pt.toString(t)+`.
 Suggested mode is: `+pt.toString(r));switch(t===pt.KANJI&&!ep.isKanjiModeEnabled()&&(t=pt.BYTE),t){case pt.NUMERIC:return new gA(e);case pt.ALPHANUMERIC:return new mA(e);case pt.KANJI:return new CA(e);case pt.BYTE:return new yA(e)}}el.fromArray=function(n){return n.reduce(function(t,r){return typeof r=="string"?t.push(pA(r,null)):r.data&&t.push(pA(r.data,r.mode)),t},[])};el.fromString=function(n,t){let r=_A(n,ep.isKanjiModeEnabled()),i=X7(r),o=Z7(i,t),c=q7.find_path(o.map,"start","end"),h=[];for(let g=1;g<c.length-1;g++)h.push(o.table[c[g]].node);return el.fromArray(Y7(h))};el.rawSplit=function(n){return el.fromArray(_A(n,ep.isKanjiModeEnabled()))}});var bA=dt(vA=>{"use strict";var np=Mo(),BC=qh(),Q7=O2(),K7=P2(),J7=k2(),e9=B2(),jC=V2(),HC=DC(),t9=W2(),tp=Q2(),n9=tA(),r9=Oo(),VC=wA();function i9(e,n){let t=e.size,r=e9.getPositions(n);for(let i=0;i<r.length;i++){let o=r[i][0],c=r[i][1];for(let h=-1;h<=7;h++)if(!(o+h<=-1||t<=o+h))for(let g=-1;g<=7;g++)c+g<=-1||t<=c+g||(h>=0&&h<=6&&(g===0||g===6)||g>=0&&g<=6&&(h===0||h===6)||h>=2&&h<=4&&g>=2&&g<=4?e.set(o+h,c+g,!0,!0):e.set(o+h,c+g,!1,!0))}}function o9(e){let n=e.size;for(let t=8;t<n-8;t++){let r=t%2===0;e.set(t,6,r,!0),e.set(6,t,r,!0)}}function s9(e,n){let t=J7.getPositions(n);for(let r=0;r<t.length;r++){let i=t[r][0],o=t[r][1];for(let c=-2;c<=2;c++)for(let h=-2;h<=2;h++)c===-2||c===2||h===-2||h===2||c===0&&h===0?e.set(i+c,o+h,!0,!0):e.set(i+c,o+h,!1,!0)}}function a9(e,n){let t=e.size,r=tp.getEncodedBits(n),i,o,c;for(let h=0;h<18;h++)i=Math.floor(h/3),o=h%3+t-8-3,c=(r>>h&1)===1,e.set(i,o,c,!0),e.set(o,i,c,!0)}function UC(e,n,t){let r=e.size,i=n9.getEncodedBits(n,t),o,c;for(o=0;o<15;o++)c=(i>>o&1)===1,o<6?e.set(o,8,c,!0):o<8?e.set(o+1,8,c,!0):e.set(r-15+o,8,c,!0),o<8?e.set(8,r-o-1,c,!0):o<9?e.set(8,15-o-1+1,c,!0):e.set(8,15-o-1,c,!0);e.set(r-8,8,1,!0)}function l9(e,n){let t=e.size,r=-1,i=t-1,o=7,c=0;for(let h=t-1;h>0;h-=2)for(h===6&&h--;;){for(let g=0;g<2;g++)if(!e.isReserved(i,h-g)){let m=!1;c<n.length&&(m=(n[c]>>>o&1)===1),e.set(i,h-g,m),o--,o===-1&&(c++,o=7)}if(i+=r,i<0||t<=i){i-=r,r=-r;break}}}function c9(e,n,t){let r=new Q7;t.forEach(function(g){r.put(g.mode.bit,4),r.put(g.getLength(),r9.getCharCountIndicator(g.mode,e)),g.write(r)});let i=np.getSymbolTotalCodewords(e),o=HC.getTotalCodewordsCount(e,n),c=(i-o)*8;for(r.getLengthInBits()+4<=c&&r.put(0,4);r.getLengthInBits()%8!==0;)r.putBit(0);let h=(c-r.getLengthInBits())/8;for(let g=0;g<h;g++)r.put(g%2?17:236,8);return u9(r,e,n)}function u9(e,n,t){let r=np.getSymbolTotalCodewords(n),i=HC.getTotalCodewordsCount(n,t),o=r-i,c=HC.getBlocksCount(n,t),h=r%c,g=c-h,m=Math.floor(r/c),v=Math.floor(o/c),b=v+1,I=m-v,A=new t9(I),R=0,j=new Array(c),Y=new Array(c),G=0,ce=new Uint8Array(e.buffer);for(let q=0;q<c;q++){let rr=q<g?v:b;j[q]=ce.slice(R,R+rr),Y[q]=A.encode(j[q]),R+=rr,G=Math.max(G,rr)}let Xe=new Uint8Array(r),ge=0,H,he;for(H=0;H<G;H++)for(he=0;he<c;he++)H<j[he].length&&(Xe[ge++]=j[he][H]);for(H=0;H<I;H++)for(he=0;he<c;he++)Xe[ge++]=Y[he][H];return Xe}function d9(e,n,t,r){let i;if(Array.isArray(e))i=VC.fromArray(e);else if(typeof e=="string"){let m=n;if(!m){let v=VC.rawSplit(e);m=tp.getBestVersionForData(v,t)}i=VC.fromString(e,m||40)}else throw new Error("Invalid data");let o=tp.getBestVersionForData(i,t);if(!o)throw new Error("The amount of data is too big to be stored in a QR Code");if(!n)n=o;else if(n<o)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+o+`.
`);let c=c9(n,t,i),h=np.getSymbolSize(n),g=new K7(h);return i9(g,n),o9(g),s9(g,n),UC(g,t,0),n>=7&&a9(g,n),l9(g,c),isNaN(r)&&(r=jC.getBestMask(g,UC.bind(null,g,t))),jC.applyMask(r,g),UC(g,t,r),{modules:g,version:n,errorCorrectionLevel:t,maskPattern:r,segments:i}}vA.create=function(n,t){if(typeof n>"u"||n==="")throw new Error("No input text");let r=BC.M,i,o;return typeof t<"u"&&(r=BC.from(t.errorCorrectionLevel,BC.M),i=tp.from(t.version),o=jC.from(t.maskPattern),t.toSJISFunc&&np.setToSJISFunction(t.toSJISFunc)),d9(n,i,r,o)}});var zC=dt(As=>{"use strict";function xA(e){if(typeof e=="number"&&(e=e.toString()),typeof e!="string")throw new Error("Color should be defined as hex string");let n=e.slice().replace("#","").split("");if(n.length<3||n.length===5||n.length>8)throw new Error("Invalid hex color: "+e);(n.length===3||n.length===4)&&(n=Array.prototype.concat.apply([],n.map(function(r){return[r,r]}))),n.length===6&&n.push("F","F");let t=parseInt(n.join(""),16);return{r:t>>24&255,g:t>>16&255,b:t>>8&255,a:t&255,hex:"#"+n.slice(0,6).join("")}}As.getOptions=function(n){n||(n={}),n.color||(n.color={});let t=typeof n.margin>"u"||n.margin===null||n.margin<0?4:n.margin,r=n.width&&n.width>=21?n.width:void 0,i=n.scale||4;return{width:r,scale:r?4:i,margin:t,color:{dark:xA(n.color.dark||"#000000ff"),light:xA(n.color.light||"#ffffffff")},type:n.type,rendererOpts:n.rendererOpts||{}}};As.getScale=function(n,t){return t.width&&t.width>=n+t.margin*2?t.width/(n+t.margin*2):t.scale};As.getImageWidth=function(n,t){let r=As.getScale(n,t);return Math.floor((n+t.margin*2)*r)};As.qrToImageData=function(n,t,r){let i=t.modules.size,o=t.modules.data,c=As.getScale(i,r),h=Math.floor((i+r.margin*2)*c),g=r.margin*c,m=[r.color.light,r.color.dark];for(let v=0;v<h;v++)for(let b=0;b<h;b++){let I=(v*h+b)*4,A=r.color.light;if(v>=g&&b>=g&&v<h-g&&b<h-g){let R=Math.floor((v-g)/c),j=Math.floor((b-g)/c);A=m[o[R*i+j]?1:0]}n[I++]=A.r,n[I++]=A.g,n[I++]=A.b,n[I]=A.a}}});var EA=dt(rp=>{"use strict";var WC=zC();function f9(e,n,t){e.clearRect(0,0,n.width,n.height),n.style||(n.style={}),n.height=t,n.width=t,n.style.height=t+"px",n.style.width=t+"px"}function h9(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}rp.render=function(n,t,r){let i=r,o=t;typeof i>"u"&&(!t||!t.getContext)&&(i=t,t=void 0),t||(o=h9()),i=WC.getOptions(i);let c=WC.getImageWidth(n.modules.size,i),h=o.getContext("2d"),g=h.createImageData(c,c);return WC.qrToImageData(g.data,n,i),f9(h,o,c),h.putImageData(g,0,0),o};rp.renderToDataURL=function(n,t,r){let i=r;typeof i>"u"&&(!t||!t.getContext)&&(i=t,t=void 0),i||(i={});let o=rp.render(n,t,i),c=i.type||"image/png",h=i.rendererOpts||{};return o.toDataURL(c,h.quality)}});var DA=dt(SA=>{"use strict";var p9=zC();function IA(e,n){let t=e.a/255,r=n+'="'+e.hex+'"';return t<1?r+" "+n+'-opacity="'+t.toFixed(2).slice(1)+'"':r}function GC(e,n,t){let r=e+n;return typeof t<"u"&&(r+=" "+t),r}function g9(e,n,t){let r="",i=0,o=!1,c=0;for(let h=0;h<e.length;h++){let g=Math.floor(h%n),m=Math.floor(h/n);!g&&!o&&(o=!0),e[h]?(c++,h>0&&g>0&&e[h-1]||(r+=o?GC("M",g+t,.5+m+t):GC("m",i,0),i=0,o=!1),g+1<n&&e[h+1]||(r+=GC("h",c),c=0)):i++}return r}SA.render=function(n,t,r){let i=p9.getOptions(t),o=n.modules.size,c=n.modules.data,h=o+i.margin*2,g=i.color.light.a?"<path "+IA(i.color.light,"fill")+' d="M0 0h'+h+"v"+h+'H0z"/>':"",m="<path "+IA(i.color.dark,"stroke")+' d="'+g9(c,o,i.margin)+'"/>',v='viewBox="0 0 '+h+" "+h+'"',I='<svg xmlns="http://www.w3.org/2000/svg" '+(i.width?'width="'+i.width+'" height="'+i.width+'" ':"")+v+' shape-rendering="crispEdges">'+g+m+`</svg>
`;return typeof r=="function"&&r(null,I),I}});var TA=dt(cu=>{"use strict";var m9=T2(),$C=bA(),AA=EA(),y9=DA();function qC(e,n,t,r,i){let o=[].slice.call(arguments,1),c=o.length,h=typeof o[c-1]=="function";if(!h&&!m9())throw new Error("Callback required as last argument");if(h){if(c<2)throw new Error("Too few arguments provided");c===2?(i=t,t=n,n=r=void 0):c===3&&(n.getContext&&typeof i>"u"?(i=r,r=void 0):(i=r,r=t,t=n,n=void 0))}else{if(c<1)throw new Error("Too few arguments provided");return c===1?(t=n,n=r=void 0):c===2&&!n.getContext&&(r=t,t=n,n=void 0),new Promise(function(g,m){try{let v=$C.create(t,r);g(e(v,n,r))}catch(v){m(v)}})}try{let g=$C.create(t,r);i(null,e(g,n,r))}catch(g){i(g)}}cu.create=$C.create;cu.toCanvas=qC.bind(null,AA.render);cu.toDataURL=qC.bind(null,AA.renderToDataURL);cu.toString=qC.bind(null,function(e,n,t){return y9.render(e,t)})});var jA=dt((lp,UA)=>{"use strict";(function(e,n){typeof lp=="object"&&typeof UA<"u"?n(lp):typeof define=="function"&&define.amd?define(["exports"],n):(e=typeof globalThis<"u"?globalThis:e||self,n(e.ZXing={}))})(lp,function(e){"use strict";function n(_){return _==null}var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,s){_.__proto__=s}||function(_,s){for(var a in s)s.hasOwnProperty(a)&&(_[a]=s[a])};function r(_,s){t(_,s);function a(){this.constructor=_}_.prototype=s===null?Object.create(s):(a.prototype=s.prototype,new a)}function i(_,s){var a=Object.setPrototypeOf;a?a(_,s):_.__proto__=s}function o(_,s){s===void 0&&(s=_.constructor);var a=Error.captureStackTrace;a&&a(_,s)}var c=function(_){r(s,_);function s(a){var l=this.constructor,u=_.call(this,a)||this;return Object.defineProperty(u,"name",{value:l.name,enumerable:!1}),i(u,l.prototype),o(u),u}return s}(Error);let h=(()=>{class _ extends c{constructor(a=void 0){super(a),this.message=a}getKind(){return this.constructor.kind}}return _.kind="Exception",_})(),g=(()=>{class _ extends h{}return _.kind="ArgumentException",_})(),m=(()=>{class _ extends h{}return _.kind="IllegalArgumentException",_})();class v{constructor(s){if(this.binarizer=s,s===null)throw new m("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(s,a){return this.binarizer.getBlackRow(s,a)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(s,a,l,u){let d=this.binarizer.getLuminanceSource().crop(s,a,l,u);return new v(this.binarizer.createBinarizer(d))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){let s=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new v(this.binarizer.createBinarizer(s))}rotateCounterClockwise45(){let s=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new v(this.binarizer.createBinarizer(s))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}let b=(()=>{class _ extends h{static getChecksumInstance(){return new _}}return _.kind="ChecksumException",_})();class I{constructor(s){this.source=s}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class A{static arraycopy(s,a,l,u,d){for(;d--;)l[u++]=s[a++]}static currentTimeMillis(){return Date.now()}}let R=(()=>{class _ extends h{}return _.kind="IndexOutOfBoundsException",_})(),j=(()=>{class _ extends R{constructor(a=void 0,l=void 0){super(l),this.index=a,this.message=l}}return _.kind="ArrayIndexOutOfBoundsException",_})();class Y{static fill(s,a){for(let l=0,u=s.length;l<u;l++)s[l]=a}static fillWithin(s,a,l,u){Y.rangeCheck(s.length,a,l);for(let d=a;d<l;d++)s[d]=u}static rangeCheck(s,a,l){if(a>l)throw new m("fromIndex("+a+") > toIndex("+l+")");if(a<0)throw new j(a);if(l>s)throw new j(l)}static asList(...s){return s}static create(s,a,l){return Array.from({length:s}).map(d=>Array.from({length:a}).fill(l))}static createInt32Array(s,a,l){return Array.from({length:s}).map(d=>Int32Array.from({length:a}).fill(l))}static equals(s,a){if(!s||!a||!s.length||!a.length||s.length!==a.length)return!1;for(let l=0,u=s.length;l<u;l++)if(s[l]!==a[l])return!1;return!0}static hashCode(s){if(s===null)return 0;let a=1;for(let l of s)a=31*a+l;return a}static fillUint8Array(s,a){for(let l=0;l!==s.length;l++)s[l]=a}static copyOf(s,a){return s.slice(0,a)}static copyOfUint8Array(s,a){if(s.length<=a){let l=new Uint8Array(a);return l.set(s),l}return s.slice(0,a)}static copyOfRange(s,a,l){let u=l-a,d=new Int32Array(u);return A.arraycopy(s,a,d,0,u),d}static binarySearch(s,a,l){l===void 0&&(l=Y.numberComparator);let u=0,d=s.length-1;for(;u<=d;){let f=d+u>>1,p=l(a,s[f]);if(p>0)u=f+1;else if(p<0)d=f-1;else return f}return-u-1}static numberComparator(s,a){return s-a}}class G{static numberOfTrailingZeros(s){let a;if(s===0)return 32;let l=31;return a=s<<16,a!==0&&(l-=16,s=a),a=s<<8,a!==0&&(l-=8,s=a),a=s<<4,a!==0&&(l-=4,s=a),a=s<<2,a!==0&&(l-=2,s=a),l-(s<<1>>>31)}static numberOfLeadingZeros(s){if(s===0)return 32;let a=1;return s>>>16||(a+=16,s<<=16),s>>>24||(a+=8,s<<=8),s>>>28||(a+=4,s<<=4),s>>>30||(a+=2,s<<=2),a-=s>>>31,a}static toHexString(s){return s.toString(16)}static toBinaryString(s){return String(parseInt(String(s),2))}static bitCount(s){return s=s-(s>>>1&1431655765),s=(s&858993459)+(s>>>2&858993459),s=s+(s>>>4)&252645135,s=s+(s>>>8),s=s+(s>>>16),s&63}static truncDivision(s,a){return Math.trunc(s/a)}static parseInt(s,a=void 0){return parseInt(s,a)}}G.MIN_VALUE_32_BITS=-2147483648,G.MAX_VALUE=Number.MAX_SAFE_INTEGER;class ce{constructor(s,a){s===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=s,a==null?this.bits=ce.makeArray(s):this.bits=a)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(s){if(s>this.bits.length*32){let a=ce.makeArray(s);A.arraycopy(this.bits,0,a,0,this.bits.length),this.bits=a}}get(s){return(this.bits[Math.floor(s/32)]&1<<(s&31))!==0}set(s){this.bits[Math.floor(s/32)]|=1<<(s&31)}flip(s){this.bits[Math.floor(s/32)]^=1<<(s&31)}getNextSet(s){let a=this.size;if(s>=a)return a;let l=this.bits,u=Math.floor(s/32),d=l[u];d&=~((1<<(s&31))-1);let f=l.length;for(;d===0;){if(++u===f)return a;d=l[u]}let p=u*32+G.numberOfTrailingZeros(d);return p>a?a:p}getNextUnset(s){let a=this.size;if(s>=a)return a;let l=this.bits,u=Math.floor(s/32),d=~l[u];d&=~((1<<(s&31))-1);let f=l.length;for(;d===0;){if(++u===f)return a;d=~l[u]}let p=u*32+G.numberOfTrailingZeros(d);return p>a?a:p}setBulk(s,a){this.bits[Math.floor(s/32)]=a}setRange(s,a){if(a<s||s<0||a>this.size)throw new m;if(a===s)return;a--;let l=Math.floor(s/32),u=Math.floor(a/32),d=this.bits;for(let f=l;f<=u;f++){let p=f>l?0:s&31,C=(2<<(f<u?31:a&31))-(1<<p);d[f]|=C}}clear(){let s=this.bits.length,a=this.bits;for(let l=0;l<s;l++)a[l]=0}isRange(s,a,l){if(a<s||s<0||a>this.size)throw new m;if(a===s)return!0;a--;let u=Math.floor(s/32),d=Math.floor(a/32),f=this.bits;for(let p=u;p<=d;p++){let y=p>u?0:s&31,w=(2<<(p<d?31:a&31))-(1<<y)&4294967295;if((f[p]&w)!==(l?w:0))return!1}return!0}appendBit(s){this.ensureCapacity(this.size+1),s&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(s,a){if(a<0||a>32)throw new m("Num bits must be between 0 and 32");this.ensureCapacity(this.size+a);for(let l=a;l>0;l--)this.appendBit((s>>l-1&1)===1)}appendBitArray(s){let a=s.size;this.ensureCapacity(this.size+a);for(let l=0;l<a;l++)this.appendBit(s.get(l))}xor(s){if(this.size!==s.size)throw new m("Sizes don't match");let a=this.bits;for(let l=0,u=a.length;l<u;l++)a[l]^=s.bits[l]}toBytes(s,a,l,u){for(let d=0;d<u;d++){let f=0;for(let p=0;p<8;p++)this.get(s)&&(f|=1<<7-p),s++;a[l+d]=f}}getBitArray(){return this.bits}reverse(){let s=new Int32Array(this.bits.length),a=Math.floor((this.size-1)/32),l=a+1,u=this.bits;for(let d=0;d<l;d++){let f=u[d];f=f>>1&1431655765|(f&1431655765)<<1,f=f>>2&858993459|(f&858993459)<<2,f=f>>4&252645135|(f&252645135)<<4,f=f>>8&16711935|(f&16711935)<<8,f=f>>16&65535|(f&65535)<<16,s[a-d]=f}if(this.size!==l*32){let d=l*32-this.size,f=s[0]>>>d;for(let p=1;p<l;p++){let y=s[p];f|=y<<32-d,s[p-1]=f,f=y>>>d}s[l-1]=f}this.bits=s}static makeArray(s){return new Int32Array(Math.floor((s+31)/32))}equals(s){if(!(s instanceof ce))return!1;let a=s;return this.size===a.size&&Y.equals(this.bits,a.bits)}hashCode(){return 31*this.size+Y.hashCode(this.bits)}toString(){let s="";for(let a=0,l=this.size;a<l;a++)a&7||(s+=" "),s+=this.get(a)?"X":".";return s}clone(){return new ce(this.size,this.bits.slice())}}var Xe=function(_){return _[_.OTHER=0]="OTHER",_[_.PURE_BARCODE=1]="PURE_BARCODE",_[_.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",_[_.TRY_HARDER=3]="TRY_HARDER",_[_.CHARACTER_SET=4]="CHARACTER_SET",_[_.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",_[_.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",_[_.ASSUME_GS1=7]="ASSUME_GS1",_[_.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",_[_.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",_[_.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS",_}(Xe||{}),ge=Xe;let H=(()=>{class _ extends h{static getFormatInstance(){return new _}}return _.kind="FormatException",_})();var he=function(_){return _[_.Cp437=0]="Cp437",_[_.ISO8859_1=1]="ISO8859_1",_[_.ISO8859_2=2]="ISO8859_2",_[_.ISO8859_3=3]="ISO8859_3",_[_.ISO8859_4=4]="ISO8859_4",_[_.ISO8859_5=5]="ISO8859_5",_[_.ISO8859_6=6]="ISO8859_6",_[_.ISO8859_7=7]="ISO8859_7",_[_.ISO8859_8=8]="ISO8859_8",_[_.ISO8859_9=9]="ISO8859_9",_[_.ISO8859_10=10]="ISO8859_10",_[_.ISO8859_11=11]="ISO8859_11",_[_.ISO8859_13=12]="ISO8859_13",_[_.ISO8859_14=13]="ISO8859_14",_[_.ISO8859_15=14]="ISO8859_15",_[_.ISO8859_16=15]="ISO8859_16",_[_.SJIS=16]="SJIS",_[_.Cp1250=17]="Cp1250",_[_.Cp1251=18]="Cp1251",_[_.Cp1252=19]="Cp1252",_[_.Cp1256=20]="Cp1256",_[_.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",_[_.UTF8=22]="UTF8",_[_.ASCII=23]="ASCII",_[_.Big5=24]="Big5",_[_.GB18030=25]="GB18030",_[_.EUC_KR=26]="EUC_KR",_}(he||{});class q{constructor(s,a,l,...u){this.valueIdentifier=s,this.name=l,typeof a=="number"?this.values=Int32Array.from([a]):this.values=a,this.otherEncodingNames=u,q.VALUE_IDENTIFIER_TO_ECI.set(s,this),q.NAME_TO_ECI.set(l,this);let d=this.values;for(let f=0,p=d.length;f!==p;f++){let y=d[f];q.VALUES_TO_ECI.set(y,this)}for(let f of u)q.NAME_TO_ECI.set(f,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(s){if(s<0||s>=900)throw new H("incorect value");let a=q.VALUES_TO_ECI.get(s);if(a===void 0)throw new H("incorect value");return a}static getCharacterSetECIByName(s){let a=q.NAME_TO_ECI.get(s);if(a===void 0)throw new H("incorect value");return a}equals(s){if(!(s instanceof q))return!1;let a=s;return this.getName()===a.getName()}}q.VALUE_IDENTIFIER_TO_ECI=new Map,q.VALUES_TO_ECI=new Map,q.NAME_TO_ECI=new Map,q.Cp437=new q(he.Cp437,Int32Array.from([0,2]),"Cp437"),q.ISO8859_1=new q(he.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),q.ISO8859_2=new q(he.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),q.ISO8859_3=new q(he.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),q.ISO8859_4=new q(he.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),q.ISO8859_5=new q(he.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),q.ISO8859_6=new q(he.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),q.ISO8859_7=new q(he.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),q.ISO8859_8=new q(he.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),q.ISO8859_9=new q(he.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),q.ISO8859_10=new q(he.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),q.ISO8859_11=new q(he.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),q.ISO8859_13=new q(he.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),q.ISO8859_14=new q(he.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),q.ISO8859_15=new q(he.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),q.ISO8859_16=new q(he.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),q.SJIS=new q(he.SJIS,20,"SJIS","Shift_JIS"),q.Cp1250=new q(he.Cp1250,21,"Cp1250","windows-1250"),q.Cp1251=new q(he.Cp1251,22,"Cp1251","windows-1251"),q.Cp1252=new q(he.Cp1252,23,"Cp1252","windows-1252"),q.Cp1256=new q(he.Cp1256,24,"Cp1256","windows-1256"),q.UnicodeBigUnmarked=new q(he.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),q.UTF8=new q(he.UTF8,26,"UTF8","UTF-8"),q.ASCII=new q(he.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),q.Big5=new q(he.Big5,28,"Big5"),q.GB18030=new q(he.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),q.EUC_KR=new q(he.EUC_KR,30,"EUC_KR","EUC-KR");let rr=(()=>{class _ extends h{}return _.kind="UnsupportedOperationException",_})();class On{static decode(s,a){let l=this.encodingName(a);return this.customDecoder?this.customDecoder(s,l):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(l)?this.decodeFallback(s,l):new TextDecoder(l).decode(s)}static shouldDecodeOnFallback(s){return!On.isBrowser()&&s==="ISO-8859-1"}static encode(s,a){let l=this.encodingName(a);return this.customEncoder?this.customEncoder(s,l):typeof TextEncoder>"u"?this.encodeFallback(s):new TextEncoder().encode(s)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(s){return typeof s=="string"?s:s.getName()}static encodingCharacterSet(s){return s instanceof q?s:q.getCharacterSetECIByName(s)}static decodeFallback(s,a){let l=this.encodingCharacterSet(a);if(On.isDecodeFallbackSupported(l)){let u="";for(let d=0,f=s.length;d<f;d++){let p=s[d].toString(16);p.length<2&&(p="0"+p),u+="%"+p}return decodeURIComponent(u)}if(l.equals(q.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(s.buffer));throw new rr(`Encoding ${this.encodingName(a)} not supported by fallback.`)}static isDecodeFallbackSupported(s){return s.equals(q.UTF8)||s.equals(q.ISO8859_1)||s.equals(q.ASCII)}static encodeFallback(s){let l=btoa(unescape(encodeURIComponent(s))).split(""),u=[];for(let d=0;d<l.length;d++)u.push(l[d].charCodeAt(0));return new Uint8Array(u)}}class Ie{static castAsNonUtf8Char(s,a=null){let l=a?a.getName():this.ISO88591;return On.decode(new Uint8Array([s]),l)}static guessEncoding(s,a){if(a!=null&&a.get(ge.CHARACTER_SET)!==void 0)return a.get(ge.CHARACTER_SET).toString();let l=s.length,u=!0,d=!0,f=!0,p=0,y=0,C=0,w=0,x=0,E=0,D=0,M=0,O=0,k=0,F=0,X=s.length>3&&s[0]===239&&s[1]===187&&s[2]===191;for(let re=0;re<l&&(u||d||f);re++){let V=s[re]&255;f&&(p>0?V&128?p--:f=!1:V&128&&(V&64?(p++,V&32?(p++,V&16?(p++,V&8?f=!1:w++):C++):y++):f=!1)),u&&(V>127&&V<160?u=!1:V>159&&(V<192||V===215||V===247)&&F++),d&&(x>0?V<64||V===127||V>252?d=!1:x--:V===128||V===160||V>239?d=!1:V>160&&V<224?(E++,M=0,D++,D>O&&(O=D)):V>127?(x++,D=0,M++,M>k&&(k=M)):(D=0,M=0))}return f&&p>0&&(f=!1),d&&x>0&&(d=!1),f&&(X||y+C+w>0)?Ie.UTF8:d&&(Ie.ASSUME_SHIFT_JIS||O>=3||k>=3)?Ie.SHIFT_JIS:u&&d?O===2&&E===2||F*10>=l?Ie.SHIFT_JIS:Ie.ISO88591:u?Ie.ISO88591:d?Ie.SHIFT_JIS:f?Ie.UTF8:Ie.PLATFORM_DEFAULT_ENCODING}static format(s,...a){let l=-1;function u(f,p,y,C,w,x){if(f==="%%")return"%";if(a[++l]===void 0)return;f=C?parseInt(C.substr(1)):void 0;let E=w?parseInt(w.substr(1)):void 0,D;switch(x){case"s":D=a[l];break;case"c":D=a[l][0];break;case"f":D=parseFloat(a[l]).toFixed(f);break;case"p":D=parseFloat(a[l]).toPrecision(f);break;case"e":D=parseFloat(a[l]).toExponential(f);break;case"x":D=parseInt(a[l]).toString(E||16);break;case"d":D=parseFloat(parseInt(a[l],E||10).toPrecision(f)).toFixed(0);break}D=typeof D=="object"?JSON.stringify(D):(+D).toString(E);let M=parseInt(y),O=y&&y[0]+""=="0"?"0":" ";for(;D.length<M;)D=p!==void 0?D+O:O+D;return D}let d=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return s.replace(d,u)}static getBytes(s,a){return On.encode(s,a)}static getCharCode(s,a=0){return s.charCodeAt(a)}static getCharAt(s){return String.fromCharCode(s)}}Ie.SHIFT_JIS=q.SJIS.getName(),Ie.GB2312="GB2312",Ie.ISO88591=q.ISO8859_1.getName(),Ie.EUC_JP="EUC_JP",Ie.UTF8=q.UTF8.getName(),Ie.PLATFORM_DEFAULT_ENCODING=Ie.UTF8,Ie.ASSUME_SHIFT_JIS=!1;class yt{constructor(s=""){this.value=s}enableDecoding(s){return this.encoding=s,this}append(s){return typeof s=="string"?this.value+=s.toString():this.encoding?this.value+=Ie.castAsNonUtf8Char(s,this.encoding):this.value+=String.fromCharCode(s),this}appendChars(s,a,l){for(let u=a;a<a+l;u++)this.append(s[u]);return this}length(){return this.value.length}charAt(s){return this.value.charAt(s)}deleteCharAt(s){this.value=this.value.substr(0,s)+this.value.substring(s+1)}setCharAt(s,a){this.value=this.value.substr(0,s)+a+this.value.substr(s+1)}substring(s,a){return this.value.substring(s,a)}setLengthToZero(){this.value=""}toString(){return this.value}insert(s,a){this.value=this.value.substr(0,s)+a+this.value.substr(s+a.length)}}class cn{constructor(s,a,l,u){if(this.width=s,this.height=a,this.rowSize=l,this.bits=u,a==null&&(a=s),this.height=a,s<1||a<1)throw new m("Both dimensions must be greater than 0");l==null&&(l=Math.floor((s+31)/32)),this.rowSize=l,u==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(s){let a=s.length,l=s[0].length,u=new cn(l,a);for(let d=0;d<a;d++){let f=s[d];for(let p=0;p<l;p++)f[p]&&u.set(p,d)}return u}static parseFromString(s,a,l){if(s===null)throw new m("stringRepresentation cannot be null");let u=new Array(s.length),d=0,f=0,p=-1,y=0,C=0;for(;C<s.length;)if(s.charAt(C)===`
`||s.charAt(C)==="\r"){if(d>f){if(p===-1)p=d-f;else if(d-f!==p)throw new m("row lengths do not match");f=d,y++}C++}else if(s.substring(C,C+a.length)===a)C+=a.length,u[d]=!0,d++;else if(s.substring(C,C+l.length)===l)C+=l.length,u[d]=!1,d++;else throw new m("illegal character encountered: "+s.substring(C));if(d>f){if(p===-1)p=d-f;else if(d-f!==p)throw new m("row lengths do not match");y++}let w=new cn(p,y);for(let x=0;x<d;x++)u[x]&&w.set(Math.floor(x%p),Math.floor(x/p));return w}get(s,a){let l=a*this.rowSize+Math.floor(s/32);return(this.bits[l]>>>(s&31)&1)!==0}set(s,a){let l=a*this.rowSize+Math.floor(s/32);this.bits[l]|=1<<(s&31)&4294967295}unset(s,a){let l=a*this.rowSize+Math.floor(s/32);this.bits[l]&=~(1<<(s&31)&4294967295)}flip(s,a){let l=a*this.rowSize+Math.floor(s/32);this.bits[l]^=1<<(s&31)&4294967295}xor(s){if(this.width!==s.getWidth()||this.height!==s.getHeight()||this.rowSize!==s.getRowSize())throw new m("input matrix dimensions do not match");let a=new ce(Math.floor(this.width/32)+1),l=this.rowSize,u=this.bits;for(let d=0,f=this.height;d<f;d++){let p=d*l,y=s.getRow(d,a).getBitArray();for(let C=0;C<l;C++)u[p+C]^=y[C]}}clear(){let s=this.bits,a=s.length;for(let l=0;l<a;l++)s[l]=0}setRegion(s,a,l,u){if(a<0||s<0)throw new m("Left and top must be nonnegative");if(u<1||l<1)throw new m("Height and width must be at least 1");let d=s+l,f=a+u;if(f>this.height||d>this.width)throw new m("The region must fit inside the matrix");let p=this.rowSize,y=this.bits;for(let C=a;C<f;C++){let w=C*p;for(let x=s;x<d;x++)y[w+Math.floor(x/32)]|=1<<(x&31)&4294967295}}getRow(s,a){a==null||a.getSize()<this.width?a=new ce(this.width):a.clear();let l=this.rowSize,u=this.bits,d=s*l;for(let f=0;f<l;f++)a.setBulk(f*32,u[d+f]);return a}setRow(s,a){A.arraycopy(a.getBitArray(),0,this.bits,s*this.rowSize,this.rowSize)}rotate180(){let s=this.getWidth(),a=this.getHeight(),l=new ce(s),u=new ce(s);for(let d=0,f=Math.floor((a+1)/2);d<f;d++)l=this.getRow(d,l),u=this.getRow(a-1-d,u),l.reverse(),u.reverse(),this.setRow(d,u),this.setRow(a-1-d,l)}getEnclosingRectangle(){let s=this.width,a=this.height,l=this.rowSize,u=this.bits,d=s,f=a,p=-1,y=-1;for(let C=0;C<a;C++)for(let w=0;w<l;w++){let x=u[C*l+w];if(x!==0){if(C<f&&(f=C),C>y&&(y=C),w*32<d){let E=0;for(;!(x<<31-E&4294967295);)E++;w*32+E<d&&(d=w*32+E)}if(w*32+31>p){let E=31;for(;!(x>>>E);)E--;w*32+E>p&&(p=w*32+E)}}}return p<d||y<f?null:Int32Array.from([d,f,p-d+1,y-f+1])}getTopLeftOnBit(){let s=this.rowSize,a=this.bits,l=0;for(;l<a.length&&a[l]===0;)l++;if(l===a.length)return null;let u=l/s,d=l%s*32,f=a[l],p=0;for(;!(f<<31-p&4294967295);)p++;return d+=p,Int32Array.from([d,u])}getBottomRightOnBit(){let s=this.rowSize,a=this.bits,l=a.length-1;for(;l>=0&&a[l]===0;)l--;if(l<0)return null;let u=Math.floor(l/s),d=Math.floor(l%s)*32,f=a[l],p=31;for(;!(f>>>p);)p--;return d+=p,Int32Array.from([d,u])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(s){if(!(s instanceof cn))return!1;let a=s;return this.width===a.width&&this.height===a.height&&this.rowSize===a.rowSize&&Y.equals(this.bits,a.bits)}hashCode(){let s=this.width;return s=31*s+this.width,s=31*s+this.height,s=31*s+this.rowSize,s=31*s+Y.hashCode(this.bits),s}toString(s="X ",a="  ",l=`
`){return this.buildToString(s,a,l)}buildToString(s,a,l){let u=new yt;for(let d=0,f=this.height;d<f;d++){for(let p=0,y=this.width;p<y;p++)u.append(this.get(p,d)?s:a);u.append(l)}return u.toString()}clone(){return new cn(this.width,this.height,this.rowSize,this.bits.slice())}}let U=(()=>{class _ extends h{static getNotFoundInstance(){return new _}}return _.kind="NotFoundException",_})();class un extends I{constructor(s){super(s),this.luminances=un.EMPTY,this.buckets=new Int32Array(un.LUMINANCE_BUCKETS)}getBlackRow(s,a){let l=this.getLuminanceSource(),u=l.getWidth();a==null||a.getSize()<u?a=new ce(u):a.clear(),this.initArrays(u);let d=l.getRow(s,this.luminances),f=this.buckets;for(let y=0;y<u;y++)f[(d[y]&255)>>un.LUMINANCE_SHIFT]++;let p=un.estimateBlackPoint(f);if(u<3)for(let y=0;y<u;y++)(d[y]&255)<p&&a.set(y);else{let y=d[0]&255,C=d[1]&255;for(let w=1;w<u-1;w++){let x=d[w+1]&255;(C*4-y-x)/2<p&&a.set(w),y=C,C=x}}return a}getBlackMatrix(){let s=this.getLuminanceSource(),a=s.getWidth(),l=s.getHeight(),u=new cn(a,l);this.initArrays(a);let d=this.buckets;for(let y=1;y<5;y++){let C=Math.floor(l*y/5),w=s.getRow(C,this.luminances),x=Math.floor(a*4/5);for(let E=Math.floor(a/5);E<x;E++){let D=w[E]&255;d[D>>un.LUMINANCE_SHIFT]++}}let f=un.estimateBlackPoint(d),p=s.getMatrix();for(let y=0;y<l;y++){let C=y*a;for(let w=0;w<a;w++)(p[C+w]&255)<f&&u.set(w,y)}return u}createBinarizer(s){return new un(s)}initArrays(s){this.luminances.length<s&&(this.luminances=new Uint8ClampedArray(s));let a=this.buckets;for(let l=0;l<un.LUMINANCE_BUCKETS;l++)a[l]=0}static estimateBlackPoint(s){let a=s.length,l=0,u=0,d=0;for(let w=0;w<a;w++)s[w]>d&&(u=w,d=s[w]),s[w]>l&&(l=s[w]);let f=0,p=0;for(let w=0;w<a;w++){let x=w-u,E=s[w]*x*x;E>p&&(f=w,p=E)}if(u>f){let w=u;u=f,f=w}if(f-u<=a/16)throw new U;let y=f-1,C=-1;for(let w=f-1;w>u;w--){let x=w-u,E=x*x*(f-w)*(l-s[w]);E>C&&(y=w,C=E)}return y<<un.LUMINANCE_SHIFT}}un.LUMINANCE_BITS=5,un.LUMINANCE_SHIFT=8-un.LUMINANCE_BITS,un.LUMINANCE_BUCKETS=1<<un.LUMINANCE_BITS,un.EMPTY=Uint8ClampedArray.from([0]);class Pe extends un{constructor(s){super(s),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;let s=this.getLuminanceSource(),a=s.getWidth(),l=s.getHeight();if(a>=Pe.MINIMUM_DIMENSION&&l>=Pe.MINIMUM_DIMENSION){let u=s.getMatrix(),d=a>>Pe.BLOCK_SIZE_POWER;a&Pe.BLOCK_SIZE_MASK&&d++;let f=l>>Pe.BLOCK_SIZE_POWER;l&Pe.BLOCK_SIZE_MASK&&f++;let p=Pe.calculateBlackPoints(u,d,f,a,l),y=new cn(a,l);Pe.calculateThresholdForBlock(u,d,f,a,l,p,y),this.matrix=y}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(s){return new Pe(s)}static calculateThresholdForBlock(s,a,l,u,d,f,p){let y=d-Pe.BLOCK_SIZE,C=u-Pe.BLOCK_SIZE;for(let w=0;w<l;w++){let x=w<<Pe.BLOCK_SIZE_POWER;x>y&&(x=y);let E=Pe.cap(w,2,l-3);for(let D=0;D<a;D++){let M=D<<Pe.BLOCK_SIZE_POWER;M>C&&(M=C);let O=Pe.cap(D,2,a-3),k=0;for(let X=-2;X<=2;X++){let re=f[E+X];k+=re[O-2]+re[O-1]+re[O]+re[O+1]+re[O+2]}let F=k/25;Pe.thresholdBlock(s,M,x,F,u,p)}}}static cap(s,a,l){return s<a?a:s>l?l:s}static thresholdBlock(s,a,l,u,d,f){for(let p=0,y=l*d+a;p<Pe.BLOCK_SIZE;p++,y+=d)for(let C=0;C<Pe.BLOCK_SIZE;C++)(s[y+C]&255)<=u&&f.set(a+C,l+p)}static calculateBlackPoints(s,a,l,u,d){let f=d-Pe.BLOCK_SIZE,p=u-Pe.BLOCK_SIZE,y=new Array(l);for(let C=0;C<l;C++){y[C]=new Int32Array(a);let w=C<<Pe.BLOCK_SIZE_POWER;w>f&&(w=f);for(let x=0;x<a;x++){let E=x<<Pe.BLOCK_SIZE_POWER;E>p&&(E=p);let D=0,M=255,O=0;for(let F=0,X=w*u+E;F<Pe.BLOCK_SIZE;F++,X+=u){for(let re=0;re<Pe.BLOCK_SIZE;re++){let V=s[X+re]&255;D+=V,V<M&&(M=V),V>O&&(O=V)}if(O-M>Pe.MIN_DYNAMIC_RANGE)for(F++,X+=u;F<Pe.BLOCK_SIZE;F++,X+=u)for(let re=0;re<Pe.BLOCK_SIZE;re++)D+=s[X+re]&255}let k=D>>Pe.BLOCK_SIZE_POWER*2;if(O-M<=Pe.MIN_DYNAMIC_RANGE&&(k=M/2,C>0&&x>0)){let F=(y[C-1][x]+2*y[C][x-1]+y[C-1][x-1])/4;M<F&&(k=F)}y[C][x]=k}}return y}}Pe.BLOCK_SIZE_POWER=3,Pe.BLOCK_SIZE=1<<Pe.BLOCK_SIZE_POWER,Pe.BLOCK_SIZE_MASK=Pe.BLOCK_SIZE-1,Pe.MINIMUM_DIMENSION=Pe.BLOCK_SIZE*5,Pe.MIN_DYNAMIC_RANGE=24;class nl{constructor(s,a){this.width=s,this.height=a}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(s,a,l,u){throw new rr("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new rr("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new rr("This luminance source does not support rotation by 45 degrees.")}toString(){let s=new Uint8ClampedArray(this.width),a=new yt;for(let l=0;l<this.height;l++){let u=this.getRow(l,s);for(let d=0;d<this.width;d++){let f=u[d]&255,p;f<64?p="#":f<128?p="+":f<192?p=".":p=" ",a.append(p)}a.append(`
`)}return a.toString()}}class Zi extends nl{constructor(s){super(s.getWidth(),s.getHeight()),this.delegate=s}getRow(s,a){let l=this.delegate.getRow(s,a),u=this.getWidth();for(let d=0;d<u;d++)l[d]=255-(l[d]&255);return l}getMatrix(){let s=this.delegate.getMatrix(),a=this.getWidth()*this.getHeight(),l=new Uint8ClampedArray(a);for(let u=0;u<a;u++)l[u]=255-(s[u]&255);return l}isCropSupported(){return this.delegate.isCropSupported()}crop(s,a,l,u){return new Zi(this.delegate.crop(s,a,l,u))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new Zi(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new Zi(this.delegate.rotateCounterClockwise45())}}class Qi extends nl{constructor(s){super(s.width,s.height),this.canvas=s,this.tempCanvasElement=null,this.buffer=Qi.makeBufferFromCanvasImageData(s)}static makeBufferFromCanvasImageData(s){let a=s.getContext("2d").getImageData(0,0,s.width,s.height);return Qi.toGrayscaleBuffer(a.data,s.width,s.height)}static toGrayscaleBuffer(s,a,l){let u=new Uint8ClampedArray(a*l);for(let d=0,f=0,p=s.length;d<p;d+=4,f++){let y;if(s[d+3]===0)y=255;else{let w=s[d],x=s[d+1],E=s[d+2];y=306*w+601*x+117*E+512>>10}u[f]=y}return u}getRow(s,a){if(s<0||s>=this.getHeight())throw new m("Requested row is outside the image: "+s);let l=this.getWidth(),u=s*l;return a===null?a=this.buffer.slice(u,u+l):(a.length<l&&(a=new Uint8ClampedArray(l)),a.set(this.buffer.slice(u,u+l))),a}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(s,a,l,u){return super.crop(s,a,l,u),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){let s=this.canvas.ownerDocument.createElement("canvas");s.width=this.canvas.width,s.height=this.canvas.height,this.tempCanvasElement=s}return this.tempCanvasElement}rotate(s){let a=this.getTempCanvasElement(),l=a.getContext("2d"),u=s*Qi.DEGREE_TO_RADIANS,d=this.canvas.width,f=this.canvas.height,p=Math.ceil(Math.abs(Math.cos(u))*d+Math.abs(Math.sin(u))*f),y=Math.ceil(Math.abs(Math.sin(u))*d+Math.abs(Math.cos(u))*f);return a.width=p,a.height=y,l.translate(p/2,y/2),l.rotate(u),l.drawImage(this.canvas,d/-2,f/-2),this.buffer=Qi.makeBufferFromCanvasImageData(a),this}invert(){return new Zi(this)}}Qi.DEGREE_TO_RADIANS=Math.PI/180;class r_{constructor(s,a,l){this.deviceId=s,this.label=a,this.kind="videoinput",this.groupId=l||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var Ln=(globalThis||global||self||window||void 0)&&(globalThis||global||self||window||void 0).__awaiter||function(_,s,a,l){function u(d){return d instanceof a?d:new a(function(f){f(d)})}return new(a||(a=Promise))(function(d,f){function p(w){try{C(l.next(w))}catch(x){f(x)}}function y(w){try{C(l.throw(w))}catch(x){f(x)}}function C(w){w.done?d(w.value):u(w.value).then(p,y)}C((l=l.apply(_,s||[])).next())})};class Fo{constructor(s,a=500,l){this.reader=s,this.timeBetweenScansMillis=a,this._hints=l,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(s){this._timeBetweenDecodingAttempts=s<0?0:s}set hints(s){this._hints=s||null}get hints(){return this._hints}listVideoInputDevices(){return Ln(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");let s=yield navigator.mediaDevices.enumerateDevices(),a=[];for(let l of s){let u=l.kind==="video"?"videoinput":l.kind;if(u!=="videoinput")continue;let d=l.deviceId||l.id,f=l.label||`Video device ${a.length+1}`,p=l.groupId,y={deviceId:d,label:f,kind:u,groupId:p};a.push(y)}return a})}getVideoInputDevices(){return Ln(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(a=>new r_(a.deviceId,a.label))})}findDeviceById(s){return Ln(this,void 0,void 0,function*(){let a=yield this.listVideoInputDevices();return a?a.find(l=>l.deviceId===s):null})}decodeFromInputVideoDevice(s,a){return Ln(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(s,a)})}decodeOnceFromVideoDevice(s,a){return Ln(this,void 0,void 0,function*(){this.reset();let l;s?l={deviceId:{exact:s}}:l={facingMode:"environment"};let u={video:l};return yield this.decodeOnceFromConstraints(u,a)})}decodeOnceFromConstraints(s,a){return Ln(this,void 0,void 0,function*(){let l=yield navigator.mediaDevices.getUserMedia(s);return yield this.decodeOnceFromStream(l,a)})}decodeOnceFromStream(s,a){return Ln(this,void 0,void 0,function*(){this.reset();let l=yield this.attachStreamToVideo(s,a);return yield this.decodeOnce(l)})}decodeFromInputVideoDeviceContinuously(s,a,l){return Ln(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(s,a,l)})}decodeFromVideoDevice(s,a,l){return Ln(this,void 0,void 0,function*(){let u;s?u={deviceId:{exact:s}}:u={facingMode:"environment"};let d={video:u};return yield this.decodeFromConstraints(d,a,l)})}decodeFromConstraints(s,a,l){return Ln(this,void 0,void 0,function*(){let u=yield navigator.mediaDevices.getUserMedia(s);return yield this.decodeFromStream(u,a,l)})}decodeFromStream(s,a,l){return Ln(this,void 0,void 0,function*(){this.reset();let u=yield this.attachStreamToVideo(s,a);return yield this.decodeContinuously(u,l)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(s,a){return Ln(this,void 0,void 0,function*(){let l=this.prepareVideoElement(a);return this.addVideoSource(l,s),this.videoElement=l,this.stream=s,yield this.playVideoOnLoadAsync(l),l})}playVideoOnLoadAsync(s){return new Promise((a,l)=>this.playVideoOnLoad(s,()=>a()))}playVideoOnLoad(s,a){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(s),s.addEventListener("ended",this.videoEndedListener),s.addEventListener("canplay",this.videoCanPlayListener),s.addEventListener("playing",a),this.tryPlayVideo(s)}isVideoPlaying(s){return s.currentTime>0&&!s.paused&&!s.ended&&s.readyState>2}tryPlayVideo(s){return Ln(this,void 0,void 0,function*(){if(this.isVideoPlaying(s)){console.warn("Trying to play video that is already playing.");return}try{yield s.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(s,a){let l=document.getElementById(s);if(!l)throw new g(`element with id '${s}' not found`);if(l.nodeName.toLowerCase()!==a.toLowerCase())throw new g(`element with id '${s}' must be an ${a} element`);return l}decodeFromImage(s,a){if(!s&&!a)throw new g("either imageElement with a src set or an url must be provided");return a&&!s?this.decodeFromImageUrl(a):this.decodeFromImageElement(s)}decodeFromVideo(s,a){if(!s&&!a)throw new g("Either an element with a src set or an URL must be provided");return a&&!s?this.decodeFromVideoUrl(a):this.decodeFromVideoElement(s)}decodeFromVideoContinuously(s,a,l){if(s===void 0&&a===void 0)throw new g("Either an element with a src set or an URL must be provided");return a&&!s?this.decodeFromVideoUrlContinuously(a,l):this.decodeFromVideoElementContinuously(s,l)}decodeFromImageElement(s){if(!s)throw new g("An image element must be provided.");this.reset();let a=this.prepareImageElement(s);this.imageElement=a;let l;return this.isImageLoaded(a)?l=this.decodeOnce(a,!1,!0):l=this._decodeOnLoadImage(a),l}decodeFromVideoElement(s){let a=this._decodeFromVideoElementSetup(s);return this._decodeOnLoadVideo(a)}decodeFromVideoElementContinuously(s,a){let l=this._decodeFromVideoElementSetup(s);return this._decodeOnLoadVideoContinuously(l,a)}_decodeFromVideoElementSetup(s){if(!s)throw new g("A video element must be provided.");this.reset();let a=this.prepareVideoElement(s);return this.videoElement=a,a}decodeFromImageUrl(s){if(!s)throw new g("An URL must be provided.");this.reset();let a=this.prepareImageElement();this.imageElement=a;let l=this._decodeOnLoadImage(a);return a.src=s,l}decodeFromVideoUrl(s){if(!s)throw new g("An URL must be provided.");this.reset();let a=this.prepareVideoElement(),l=this.decodeFromVideoElement(a);return a.src=s,l}decodeFromVideoUrlContinuously(s,a){if(!s)throw new g("An URL must be provided.");this.reset();let l=this.prepareVideoElement(),u=this.decodeFromVideoElementContinuously(l,a);return l.src=s,u}_decodeOnLoadImage(s){return new Promise((a,l)=>{this.imageLoadedListener=()=>this.decodeOnce(s,!1,!0).then(a,l),s.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(s){return Ln(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(s),yield this.decodeOnce(s)})}_decodeOnLoadVideoContinuously(s,a){return Ln(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(s),this.decodeContinuously(s,a)})}isImageLoaded(s){return!(!s.complete||s.naturalWidth===0)}prepareImageElement(s){let a;return typeof s>"u"&&(a=document.createElement("img"),a.width=200,a.height=200),typeof s=="string"&&(a=this.getMediaElement(s,"img")),s instanceof HTMLImageElement&&(a=s),a}prepareVideoElement(s){let a;return!s&&typeof document<"u"&&(a=document.createElement("video"),a.width=200,a.height=200),typeof s=="string"&&(a=this.getMediaElement(s,"video")),s instanceof HTMLVideoElement&&(a=s),a.setAttribute("autoplay","true"),a.setAttribute("muted","true"),a.setAttribute("playsinline","true"),a}decodeOnce(s,a=!0,l=!0){this._stopAsyncDecode=!1;let u=(d,f)=>{if(this._stopAsyncDecode){f(new U("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{let p=this.decode(s);d(p)}catch(p){let y=a&&p instanceof U,w=(p instanceof b||p instanceof H)&&l;if(y||w)return setTimeout(u,this._timeBetweenDecodingAttempts,d,f);f(p)}};return new Promise((d,f)=>u(d,f))}decodeContinuously(s,a){this._stopContinuousDecode=!1;let l=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{let u=this.decode(s);a(u,null),setTimeout(l,this.timeBetweenScansMillis)}catch(u){a(null,u);let d=u instanceof b||u instanceof H,f=u instanceof U;(d||f)&&setTimeout(l,this._timeBetweenDecodingAttempts)}};l()}decode(s){let a=this.createBinaryBitmap(s);return this.decodeBitmap(a)}_isHTMLVideoElement(s){return s.videoWidth!==0}drawFrameOnCanvas(s,a,l){a||(a={sx:0,sy:0,sWidth:s.videoWidth,sHeight:s.videoHeight,dx:0,dy:0,dWidth:s.videoWidth,dHeight:s.videoHeight}),l||(l=this.captureCanvasContext),l.drawImage(s,a.sx,a.sy,a.sWidth,a.sHeight,a.dx,a.dy,a.dWidth,a.dHeight)}drawImageOnCanvas(s,a,l=this.captureCanvasContext){a||(a={sx:0,sy:0,sWidth:s.naturalWidth,sHeight:s.naturalHeight,dx:0,dy:0,dWidth:s.naturalWidth,dHeight:s.naturalHeight}),l||(l=this.captureCanvasContext),l.drawImage(s,a.sx,a.sy,a.sWidth,a.sHeight,a.dx,a.dy,a.dWidth,a.dHeight)}createBinaryBitmap(s){let a=this.getCaptureCanvasContext(s);this._isHTMLVideoElement(s)?this.drawFrameOnCanvas(s):this.drawImageOnCanvas(s);let l=this.getCaptureCanvas(s),u=new Qi(l),d=new Pe(u);return new v(d)}getCaptureCanvasContext(s){if(!this.captureCanvasContext){let l=this.getCaptureCanvas(s).getContext("2d");this.captureCanvasContext=l}return this.captureCanvasContext}getCaptureCanvas(s){if(!this.captureCanvas){let a=this.createCaptureCanvas(s);this.captureCanvas=a}return this.captureCanvas}decodeBitmap(s){return this.reader.decode(s,this._hints)}createCaptureCanvas(s){if(typeof document>"u")return this._destroyCaptureCanvas(),null;let a=document.createElement("canvas"),l,u;return typeof s<"u"&&(s instanceof HTMLVideoElement?(l=s.videoWidth,u=s.videoHeight):s instanceof HTMLImageElement&&(l=s.naturalWidth||s.width,u=s.naturalHeight||s.height)),a.style.width=l+"px",a.style.height=u+"px",a.width=l,a.height=u,a}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(s=>s.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(s,a){try{s.srcObject=a}catch{s.src=URL.createObjectURL(a)}}cleanVideoSource(s){try{s.srcObject=null}catch{s.src=""}this.videoElement.removeAttribute("src")}}class Fn{constructor(s,a,l=a==null?0:8*a.length,u,d,f=A.currentTimeMillis()){this.text=s,this.rawBytes=a,this.numBits=l,this.resultPoints=u,this.format=d,this.timestamp=f,this.text=s,this.rawBytes=a,l==null?this.numBits=a==null?0:8*a.length:this.numBits=l,this.resultPoints=u,this.format=d,this.resultMetadata=null,f==null?this.timestamp=A.currentTimeMillis():this.timestamp=f}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(s,a){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(s,a)}putAllMetadata(s){s!==null&&(this.resultMetadata===null?this.resultMetadata=s:this.resultMetadata=new Map(s))}addResultPoints(s){let a=this.resultPoints;if(a===null)this.resultPoints=s;else if(s!==null&&s.length>0){let l=new Array(a.length+s.length);A.arraycopy(a,0,l,0,a.length),A.arraycopy(s,0,l,a.length,s.length),this.resultPoints=l}}getTimestamp(){return this.timestamp}toString(){return this.text}}var i_=function(_){return _[_.AZTEC=0]="AZTEC",_[_.CODABAR=1]="CODABAR",_[_.CODE_39=2]="CODE_39",_[_.CODE_93=3]="CODE_93",_[_.CODE_128=4]="CODE_128",_[_.DATA_MATRIX=5]="DATA_MATRIX",_[_.EAN_8=6]="EAN_8",_[_.EAN_13=7]="EAN_13",_[_.ITF=8]="ITF",_[_.MAXICODE=9]="MAXICODE",_[_.PDF_417=10]="PDF_417",_[_.QR_CODE=11]="QR_CODE",_[_.RSS_14=12]="RSS_14",_[_.RSS_EXPANDED=13]="RSS_EXPANDED",_[_.UPC_A=14]="UPC_A",_[_.UPC_E=15]="UPC_E",_[_.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION",_}(i_||{}),Ce=i_,o_=function(_){return _[_.OTHER=0]="OTHER",_[_.ORIENTATION=1]="ORIENTATION",_[_.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",_[_.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",_[_.ISSUE_NUMBER=4]="ISSUE_NUMBER",_[_.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",_[_.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",_[_.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",_[_.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",_[_.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",_[_.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY",_}(o_||{}),dn=o_;class rl{constructor(s,a,l,u,d=-1,f=-1){this.rawBytes=s,this.text=a,this.byteSegments=l,this.ecLevel=u,this.structuredAppendSequenceNumber=d,this.structuredAppendParity=f,this.numBits=s==null?0:8*s.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(s){this.numBits=s}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(s){this.errorsCorrected=s}getErasures(){return this.erasures}setErasures(s){this.erasures=s}getOther(){return this.other}setOther(s){this.other=s}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class il{exp(s){return this.expTable[s]}log(s){if(s===0)throw new m;return this.logTable[s]}static addOrSubtract(s,a){return s^a}}class $n{constructor(s,a){if(a.length===0)throw new m;this.field=s;let l=a.length;if(l>1&&a[0]===0){let u=1;for(;u<l&&a[u]===0;)u++;u===l?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(l-u),A.arraycopy(a,u,this.coefficients,0,this.coefficients.length))}else this.coefficients=a}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(s){return this.coefficients[this.coefficients.length-1-s]}evaluateAt(s){if(s===0)return this.getCoefficient(0);let a=this.coefficients,l;if(s===1){l=0;for(let f=0,p=a.length;f!==p;f++){let y=a[f];l=il.addOrSubtract(l,y)}return l}l=a[0];let u=a.length,d=this.field;for(let f=1;f<u;f++)l=il.addOrSubtract(d.multiply(s,l),a[f]);return l}addOrSubtract(s){if(!this.field.equals(s.field))throw new m("GenericGFPolys do not have same GenericGF field");if(this.isZero())return s;if(s.isZero())return this;let a=this.coefficients,l=s.coefficients;if(a.length>l.length){let f=a;a=l,l=f}let u=new Int32Array(l.length),d=l.length-a.length;A.arraycopy(l,0,u,0,d);for(let f=d;f<l.length;f++)u[f]=il.addOrSubtract(a[f-d],l[f]);return new $n(this.field,u)}multiply(s){if(!this.field.equals(s.field))throw new m("GenericGFPolys do not have same GenericGF field");if(this.isZero()||s.isZero())return this.field.getZero();let a=this.coefficients,l=a.length,u=s.coefficients,d=u.length,f=new Int32Array(l+d-1),p=this.field;for(let y=0;y<l;y++){let C=a[y];for(let w=0;w<d;w++)f[y+w]=il.addOrSubtract(f[y+w],p.multiply(C,u[w]))}return new $n(p,f)}multiplyScalar(s){if(s===0)return this.field.getZero();if(s===1)return this;let a=this.coefficients.length,l=this.field,u=new Int32Array(a),d=this.coefficients;for(let f=0;f<a;f++)u[f]=l.multiply(d[f],s);return new $n(l,u)}multiplyByMonomial(s,a){if(s<0)throw new m;if(a===0)return this.field.getZero();let l=this.coefficients,u=l.length,d=new Int32Array(u+s),f=this.field;for(let p=0;p<u;p++)d[p]=f.multiply(l[p],a);return new $n(f,d)}divide(s){if(!this.field.equals(s.field))throw new m("GenericGFPolys do not have same GenericGF field");if(s.isZero())throw new m("Divide by 0");let a=this.field,l=a.getZero(),u=this,d=s.getCoefficient(s.getDegree()),f=a.inverse(d);for(;u.getDegree()>=s.getDegree()&&!u.isZero();){let p=u.getDegree()-s.getDegree(),y=a.multiply(u.getCoefficient(u.getDegree()),f),C=s.multiplyByMonomial(p,y),w=a.buildMonomial(p,y);l=l.addOrSubtract(w),u=u.addOrSubtract(C)}return[l,u]}toString(){let s="";for(let a=this.getDegree();a>=0;a--){let l=this.getCoefficient(a);if(l!==0){if(l<0?(s+=" - ",l=-l):s.length>0&&(s+=" + "),a===0||l!==1){let u=this.field.log(l);u===0?s+="1":u===1?s+="a":(s+="a^",s+=u)}a!==0&&(a===1?s+="x":(s+="x^",s+=a))}}return s}}let fp=(()=>{class _ extends h{}return _.kind="ArithmeticException",_})();class at extends il{constructor(s,a,l){super(),this.primitive=s,this.size=a,this.generatorBase=l;let u=new Int32Array(a),d=1;for(let p=0;p<a;p++)u[p]=d,d*=2,d>=a&&(d^=s,d&=a-1);this.expTable=u;let f=new Int32Array(a);for(let p=0;p<a-1;p++)f[u[p]]=p;this.logTable=f,this.zero=new $n(this,Int32Array.from([0])),this.one=new $n(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(s,a){if(s<0)throw new m;if(a===0)return this.zero;let l=new Int32Array(s+1);return l[0]=a,new $n(this,l)}inverse(s){if(s===0)throw new fp;return this.expTable[this.size-this.logTable[s]-1]}multiply(s,a){return s===0||a===0?0:this.expTable[(this.logTable[s]+this.logTable[a])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+G.toHexString(this.primitive)+","+this.size+")"}equals(s){return s===this}}at.AZTEC_DATA_12=new at(4201,4096,1),at.AZTEC_DATA_10=new at(1033,1024,1),at.AZTEC_DATA_6=new at(67,64,1),at.AZTEC_PARAM=new at(19,16,1),at.QR_CODE_FIELD_256=new at(285,256,0),at.DATA_MATRIX_FIELD_256=new at(301,256,1),at.AZTEC_DATA_8=at.DATA_MATRIX_FIELD_256,at.MAXICODE_FIELD_64=at.AZTEC_DATA_6;let ol=(()=>{class _ extends h{}return _.kind="ReedSolomonException",_})(),bi=(()=>{class _ extends h{}return _.kind="IllegalStateException",_})();class sl{constructor(s){this.field=s}decode(s,a){let l=this.field,u=new $n(l,s),d=new Int32Array(a),f=!0;for(let D=0;D<a;D++){let M=u.evaluateAt(l.exp(D+l.getGeneratorBase()));d[d.length-1-D]=M,M!==0&&(f=!1)}if(f)return;let p=new $n(l,d),y=this.runEuclideanAlgorithm(l.buildMonomial(a,1),p,a),C=y[0],w=y[1],x=this.findErrorLocations(C),E=this.findErrorMagnitudes(w,x);for(let D=0;D<x.length;D++){let M=s.length-1-l.log(x[D]);if(M<0)throw new ol("Bad error location");s[M]=at.addOrSubtract(s[M],E[D])}}runEuclideanAlgorithm(s,a,l){if(s.getDegree()<a.getDegree()){let D=s;s=a,a=D}let u=this.field,d=s,f=a,p=u.getZero(),y=u.getOne();for(;f.getDegree()>=(l/2|0);){let D=d,M=p;if(d=f,p=y,d.isZero())throw new ol("r_{i-1} was zero");f=D;let O=u.getZero(),k=d.getCoefficient(d.getDegree()),F=u.inverse(k);for(;f.getDegree()>=d.getDegree()&&!f.isZero();){let X=f.getDegree()-d.getDegree(),re=u.multiply(f.getCoefficient(f.getDegree()),F);O=O.addOrSubtract(u.buildMonomial(X,re)),f=f.addOrSubtract(d.multiplyByMonomial(X,re))}if(y=O.multiply(p).addOrSubtract(M),f.getDegree()>=d.getDegree())throw new bi("Division algorithm failed to reduce polynomial?")}let C=y.getCoefficient(0);if(C===0)throw new ol("sigmaTilde(0) was zero");let w=u.inverse(C),x=y.multiplyScalar(w),E=f.multiplyScalar(w);return[x,E]}findErrorLocations(s){let a=s.getDegree();if(a===1)return Int32Array.from([s.getCoefficient(1)]);let l=new Int32Array(a),u=0,d=this.field;for(let f=1;f<d.getSize()&&u<a;f++)s.evaluateAt(f)===0&&(l[u]=d.inverse(f),u++);if(u!==a)throw new ol("Error locator degree does not match number of roots");return l}findErrorMagnitudes(s,a){let l=a.length,u=new Int32Array(l),d=this.field;for(let f=0;f<l;f++){let p=d.inverse(a[f]),y=1;for(let C=0;C<l;C++)if(f!==C){let w=d.multiply(a[C],p),x=w&1?w&-2:w|1;y=d.multiply(y,x)}u[f]=d.multiply(s.evaluateAt(p),d.inverse(y)),d.getGeneratorBase()!==0&&(u[f]=d.multiply(u[f],p))}return u}}var Rn=function(_){return _[_.UPPER=0]="UPPER",_[_.LOWER=1]="LOWER",_[_.MIXED=2]="MIXED",_[_.DIGIT=3]="DIGIT",_[_.PUNCT=4]="PUNCT",_[_.BINARY=5]="BINARY",_}(Rn||{});let hp=(()=>{class _{decode(a){this.ddata=a;let l=a.getBits(),u=this.extractBits(l),d=this.correctBits(u),f=_.convertBoolArrayToByteArray(d),p=_.getEncodedData(d),y=new rl(f,p,null,null);return y.setNumBits(d.length),y}static highLevelDecode(a){return this.getEncodedData(a)}static getEncodedData(a){let l=a.length,u=Rn.UPPER,d=Rn.UPPER,f="",p=0;for(;p<l;)if(d===Rn.BINARY){if(l-p<5)break;let y=_.readCode(a,p,5);if(p+=5,y===0){if(l-p<11)break;y=_.readCode(a,p,11)+31,p+=11}for(let C=0;C<y;C++){if(l-p<8){p=l;break}let w=_.readCode(a,p,8);f+=Ie.castAsNonUtf8Char(w),p+=8}d=u}else{let y=d===Rn.DIGIT?4:5;if(l-p<y)break;let C=_.readCode(a,p,y);p+=y;let w=_.getCharacter(d,C);w.startsWith("CTRL_")?(u=d,d=_.getTable(w.charAt(5)),w.charAt(6)==="L"&&(u=d)):(f+=w,d=u)}return f}static getTable(a){switch(a){case"L":return Rn.LOWER;case"P":return Rn.PUNCT;case"M":return Rn.MIXED;case"D":return Rn.DIGIT;case"B":return Rn.BINARY;case"U":default:return Rn.UPPER}}static getCharacter(a,l){switch(a){case Rn.UPPER:return _.UPPER_TABLE[l];case Rn.LOWER:return _.LOWER_TABLE[l];case Rn.MIXED:return _.MIXED_TABLE[l];case Rn.PUNCT:return _.PUNCT_TABLE[l];case Rn.DIGIT:return _.DIGIT_TABLE[l];default:throw new bi("Bad table")}}correctBits(a){let l,u;this.ddata.getNbLayers()<=2?(u=6,l=at.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(u=8,l=at.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(u=10,l=at.AZTEC_DATA_10):(u=12,l=at.AZTEC_DATA_12);let d=this.ddata.getNbDatablocks(),f=a.length/u;if(f<d)throw new H;let p=a.length%u,y=new Int32Array(f);for(let D=0;D<f;D++,p+=u)y[D]=_.readCode(a,p,u);try{new sl(l).decode(y,f-d)}catch(D){throw new H(D)}let C=(1<<u)-1,w=0;for(let D=0;D<d;D++){let M=y[D];if(M===0||M===C)throw new H;(M===1||M===C-1)&&w++}let x=new Array(d*u-w),E=0;for(let D=0;D<d;D++){let M=y[D];if(M===1||M===C-1)x.fill(M>1,E,E+u-1),E+=u-1;else for(let O=u-1;O>=0;--O)x[E++]=(M&1<<O)!==0}return x}extractBits(a){let l=this.ddata.isCompact(),u=this.ddata.getNbLayers(),d=(l?11:14)+u*4,f=new Int32Array(d),p=new Array(this.totalBitsInLayer(u,l));if(l)for(let y=0;y<f.length;y++)f[y]=y;else{let y=d+1+2*G.truncDivision(G.truncDivision(d,2)-1,15),C=d/2,w=G.truncDivision(y,2);for(let x=0;x<C;x++){let E=x+G.truncDivision(x,15);f[C-x-1]=w-E-1,f[C+x]=w+E+1}}for(let y=0,C=0;y<u;y++){let w=(u-y)*4+(l?9:12),x=y*2,E=d-1-x;for(let D=0;D<w;D++){let M=D*2;for(let O=0;O<2;O++)p[C+M+O]=a.get(f[x+O],f[x+D]),p[C+2*w+M+O]=a.get(f[x+D],f[E-O]),p[C+4*w+M+O]=a.get(f[E-O],f[E-D]),p[C+6*w+M+O]=a.get(f[E-D],f[x+O])}C+=w*8}return p}static readCode(a,l,u){let d=0;for(let f=l;f<l+u;f++)d<<=1,a[f]&&(d|=1);return d}static readByte(a,l){let u=a.length-l;return u>=8?_.readCode(a,l,8):_.readCode(a,l,u)<<8-u}static convertBoolArrayToByteArray(a){let l=new Uint8Array((a.length+7)/8);for(let u=0;u<l.length;u++)l[u]=_.readByte(a,8*u);return l}totalBitsInLayer(a,l){return((l?88:112)+16*a)*a}}return _.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],_.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],_.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],_.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],_.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],_})();class et{constructor(){}static round(s){return s===NaN?0:s<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:s>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:s+(s<0?-.5:.5)|0}static distance(s,a,l,u){let d=s-l,f=a-u;return Math.sqrt(d*d+f*f)}static sum(s){let a=0;for(let l=0,u=s.length;l!==u;l++){let d=s[l];a+=d}return a}}class du{static floatToIntBits(s){return s}}du.MAX_VALUE=Number.MAX_SAFE_INTEGER;class ue{constructor(s,a){this.x=s,this.y=a}getX(){return this.x}getY(){return this.y}equals(s){if(s instanceof ue){let a=s;return this.x===a.x&&this.y===a.y}return!1}hashCode(){return 31*du.floatToIntBits(this.x)+du.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(s){let a=this.distance(s[0],s[1]),l=this.distance(s[1],s[2]),u=this.distance(s[0],s[2]),d,f,p;if(l>=a&&l>=u?(f=s[0],d=s[1],p=s[2]):u>=l&&u>=a?(f=s[1],d=s[0],p=s[2]):(f=s[2],d=s[0],p=s[1]),this.crossProductZ(d,f,p)<0){let y=d;d=p,p=y}s[0]=d,s[1]=f,s[2]=p}static distance(s,a){return et.distance(s.x,s.y,a.x,a.y)}static crossProductZ(s,a,l){let u=a.x,d=a.y;return(l.x-u)*(s.y-d)-(l.y-d)*(s.x-u)}}class fu{constructor(s,a){this.bits=s,this.points=a}getBits(){return this.bits}getPoints(){return this.points}}class s_ extends fu{constructor(s,a,l,u,d){super(s,a),this.compact=l,this.nbDatablocks=u,this.nbLayers=d}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}let hu=(()=>{class _{constructor(a,l,u,d){this.image=a,this.height=a.getHeight(),this.width=a.getWidth(),l==null&&(l=_.INIT_SIZE),u==null&&(u=a.getWidth()/2|0),d==null&&(d=a.getHeight()/2|0);let f=l/2|0;if(this.leftInit=u-f,this.rightInit=u+f,this.upInit=d-f,this.downInit=d+f,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new U}detect(){let a=this.leftInit,l=this.rightInit,u=this.upInit,d=this.downInit,f=!1,p=!0,y=!1,C=!1,w=!1,x=!1,E=!1,D=this.width,M=this.height;for(;p;){p=!1;let O=!0;for(;(O||!C)&&l<D;)O=this.containsBlackPoint(u,d,l,!1),O?(l++,p=!0,C=!0):C||l++;if(l>=D){f=!0;break}let k=!0;for(;(k||!w)&&d<M;)k=this.containsBlackPoint(a,l,d,!0),k?(d++,p=!0,w=!0):w||d++;if(d>=M){f=!0;break}let F=!0;for(;(F||!x)&&a>=0;)F=this.containsBlackPoint(u,d,a,!1),F?(a--,p=!0,x=!0):x||a--;if(a<0){f=!0;break}let X=!0;for(;(X||!E)&&u>=0;)X=this.containsBlackPoint(a,l,u,!0),X?(u--,p=!0,E=!0):E||u--;if(u<0){f=!0;break}p&&(y=!0)}if(!f&&y){let O=l-a,k=null;for(let V=1;k===null&&V<O;V++)k=this.getBlackPointOnSegment(a,d-V,a+V,d);if(k==null)throw new U;let F=null;for(let V=1;F===null&&V<O;V++)F=this.getBlackPointOnSegment(a,u+V,a+V,u);if(F==null)throw new U;let X=null;for(let V=1;X===null&&V<O;V++)X=this.getBlackPointOnSegment(l,u+V,l-V,u);if(X==null)throw new U;let re=null;for(let V=1;re===null&&V<O;V++)re=this.getBlackPointOnSegment(l,d-V,l-V,d);if(re==null)throw new U;return this.centerEdges(re,k,X,F)}else throw new U}getBlackPointOnSegment(a,l,u,d){let f=et.round(et.distance(a,l,u,d)),p=(u-a)/f,y=(d-l)/f,C=this.image;for(let w=0;w<f;w++){let x=et.round(a+w*p),E=et.round(l+w*y);if(C.get(x,E))return new ue(x,E)}return null}centerEdges(a,l,u,d){let f=a.getX(),p=a.getY(),y=l.getX(),C=l.getY(),w=u.getX(),x=u.getY(),E=d.getX(),D=d.getY(),M=_.CORR;return f<this.width/2?[new ue(E-M,D+M),new ue(y+M,C+M),new ue(w-M,x-M),new ue(f+M,p-M)]:[new ue(E+M,D+M),new ue(y+M,C-M),new ue(w-M,x+M),new ue(f-M,p-M)]}containsBlackPoint(a,l,u,d){let f=this.image;if(d){for(let p=a;p<=l;p++)if(f.get(p,u))return!0}else for(let p=a;p<=l;p++)if(f.get(u,p))return!0;return!1}}return _.INIT_SIZE=10,_.CORR=1,_})();class pp{static checkAndNudgePoints(s,a){let l=s.getWidth(),u=s.getHeight(),d=!0;for(let f=0;f<a.length&&d;f+=2){let p=Math.floor(a[f]),y=Math.floor(a[f+1]);if(p<-1||p>l||y<-1||y>u)throw new U;d=!1,p===-1?(a[f]=0,d=!0):p===l&&(a[f]=l-1,d=!0),y===-1?(a[f+1]=0,d=!0):y===u&&(a[f+1]=u-1,d=!0)}d=!0;for(let f=a.length-2;f>=0&&d;f-=2){let p=Math.floor(a[f]),y=Math.floor(a[f+1]);if(p<-1||p>l||y<-1||y>u)throw new U;d=!1,p===-1?(a[f]=0,d=!0):p===l&&(a[f]=l-1,d=!0),y===-1?(a[f+1]=0,d=!0):y===u&&(a[f+1]=u-1,d=!0)}}}class Mr{constructor(s,a,l,u,d,f,p,y,C){this.a11=s,this.a21=a,this.a31=l,this.a12=u,this.a22=d,this.a32=f,this.a13=p,this.a23=y,this.a33=C}static quadrilateralToQuadrilateral(s,a,l,u,d,f,p,y,C,w,x,E,D,M,O,k){let F=Mr.quadrilateralToSquare(s,a,l,u,d,f,p,y);return Mr.squareToQuadrilateral(C,w,x,E,D,M,O,k).times(F)}transformPoints(s){let a=s.length,l=this.a11,u=this.a12,d=this.a13,f=this.a21,p=this.a22,y=this.a23,C=this.a31,w=this.a32,x=this.a33;for(let E=0;E<a;E+=2){let D=s[E],M=s[E+1],O=d*D+y*M+x;s[E]=(l*D+f*M+C)/O,s[E+1]=(u*D+p*M+w)/O}}transformPointsWithValues(s,a){let l=this.a11,u=this.a12,d=this.a13,f=this.a21,p=this.a22,y=this.a23,C=this.a31,w=this.a32,x=this.a33,E=s.length;for(let D=0;D<E;D++){let M=s[D],O=a[D],k=d*M+y*O+x;s[D]=(l*M+f*O+C)/k,a[D]=(u*M+p*O+w)/k}}static squareToQuadrilateral(s,a,l,u,d,f,p,y){let C=s-l+d-p,w=a-u+f-y;if(C===0&&w===0)return new Mr(l-s,d-l,s,u-a,f-u,a,0,0,1);{let x=l-d,E=p-d,D=u-f,M=y-f,O=x*M-E*D,k=(C*M-E*w)/O,F=(x*w-C*D)/O;return new Mr(l-s+k*l,p-s+F*p,s,u-a+k*u,y-a+F*y,a,k,F,1)}}static quadrilateralToSquare(s,a,l,u,d,f,p,y){return Mr.squareToQuadrilateral(s,a,l,u,d,f,p,y).buildAdjoint()}buildAdjoint(){return new Mr(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(s){return new Mr(this.a11*s.a11+this.a21*s.a12+this.a31*s.a13,this.a11*s.a21+this.a21*s.a22+this.a31*s.a23,this.a11*s.a31+this.a21*s.a32+this.a31*s.a33,this.a12*s.a11+this.a22*s.a12+this.a32*s.a13,this.a12*s.a21+this.a22*s.a22+this.a32*s.a23,this.a12*s.a31+this.a22*s.a32+this.a32*s.a33,this.a13*s.a11+this.a23*s.a12+this.a33*s.a13,this.a13*s.a21+this.a23*s.a22+this.a33*s.a23,this.a13*s.a31+this.a23*s.a32+this.a33*s.a33)}}class a_ extends pp{sampleGrid(s,a,l,u,d,f,p,y,C,w,x,E,D,M,O,k,F,X,re){let V=Mr.quadrilateralToQuadrilateral(u,d,f,p,y,C,w,x,E,D,M,O,k,F,X,re);return this.sampleGridWithTransform(s,a,l,V)}sampleGridWithTransform(s,a,l,u){if(a<=0||l<=0)throw new U;let d=new cn(a,l),f=new Float32Array(2*a);for(let p=0;p<l;p++){let y=f.length,C=p+.5;for(let w=0;w<y;w+=2)f[w]=w/2+.5,f[w+1]=C;u.transformPoints(f),pp.checkAndNudgePoints(s,f);try{for(let w=0;w<y;w+=2)s.get(Math.floor(f[w]),Math.floor(f[w+1]))&&d.set(w/2,p)}catch{throw new U}}return d}}class Ki{static setGridSampler(s){Ki.gridSampler=s}static getInstance(){return Ki.gridSampler}}Ki.gridSampler=new a_;class Bn{constructor(s,a){this.x=s,this.y=a}toResultPoint(){return new ue(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class l_{constructor(s){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=s}detect(){return this.detectMirror(!1)}detectMirror(s){let a=this.getMatrixCenter(),l=this.getBullsEyeCorners(a);if(s){let f=l[0];l[0]=l[2],l[2]=f}this.extractParameters(l);let u=this.sampleGrid(this.image,l[this.shift%4],l[(this.shift+1)%4],l[(this.shift+2)%4],l[(this.shift+3)%4]),d=this.getMatrixCornerPoints(l);return new s_(u,d,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(s){if(!this.isValidPoint(s[0])||!this.isValidPoint(s[1])||!this.isValidPoint(s[2])||!this.isValidPoint(s[3]))throw new U;let a=2*this.nbCenterLayers,l=new Int32Array([this.sampleLine(s[0],s[1],a),this.sampleLine(s[1],s[2],a),this.sampleLine(s[2],s[3],a),this.sampleLine(s[3],s[0],a)]);this.shift=this.getRotation(l,a);let u=0;for(let f=0;f<4;f++){let p=l[(this.shift+f)%4];this.compact?(u<<=7,u+=p>>1&127):(u<<=10,u+=(p>>2&992)+(p>>1&31))}let d=this.getCorrectedParameterData(u,this.compact);this.compact?(this.nbLayers=(d>>6)+1,this.nbDataBlocks=(d&63)+1):(this.nbLayers=(d>>11)+1,this.nbDataBlocks=(d&2047)+1)}getRotation(s,a){let l=0;s.forEach((u,d,f)=>{let p=(u>>a-2<<1)+(u&1);l=(l<<3)+p}),l=((l&1)<<11)+(l>>1);for(let u=0;u<4;u++)if(G.bitCount(l^this.EXPECTED_CORNER_BITS[u])<=2)return u;throw new U}getCorrectedParameterData(s,a){let l,u;a?(l=7,u=2):(l=10,u=4);let d=l-u,f=new Int32Array(l);for(let y=l-1;y>=0;--y)f[y]=s&15,s>>=4;try{new sl(at.AZTEC_PARAM).decode(f,d)}catch{throw new U}let p=0;for(let y=0;y<u;y++)p=(p<<4)+f[y];return p}getBullsEyeCorners(s){let a=s,l=s,u=s,d=s,f=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let x=this.getFirstDifferent(a,f,1,-1),E=this.getFirstDifferent(l,f,1,1),D=this.getFirstDifferent(u,f,-1,1),M=this.getFirstDifferent(d,f,-1,-1);if(this.nbCenterLayers>2){let O=this.distancePoint(M,x)*this.nbCenterLayers/(this.distancePoint(d,a)*(this.nbCenterLayers+2));if(O<.75||O>1.25||!this.isWhiteOrBlackRectangle(x,E,D,M))break}a=x,l=E,u=D,d=M,f=!f}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new U;this.compact=this.nbCenterLayers===5;let p=new ue(a.getX()+.5,a.getY()-.5),y=new ue(l.getX()+.5,l.getY()+.5),C=new ue(u.getX()-.5,u.getY()+.5),w=new ue(d.getX()-.5,d.getY()-.5);return this.expandSquare([p,y,C,w],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let s,a,l,u;try{let p=new hu(this.image).detect();s=p[0],a=p[1],l=p[2],u=p[3]}catch{let y=this.image.getWidth()/2,C=this.image.getHeight()/2;s=this.getFirstDifferent(new Bn(y+7,C-7),!1,1,-1).toResultPoint(),a=this.getFirstDifferent(new Bn(y+7,C+7),!1,1,1).toResultPoint(),l=this.getFirstDifferent(new Bn(y-7,C+7),!1,-1,1).toResultPoint(),u=this.getFirstDifferent(new Bn(y-7,C-7),!1,-1,-1).toResultPoint()}let d=et.round((s.getX()+u.getX()+a.getX()+l.getX())/4),f=et.round((s.getY()+u.getY()+a.getY()+l.getY())/4);try{let p=new hu(this.image,15,d,f).detect();s=p[0],a=p[1],l=p[2],u=p[3]}catch{s=this.getFirstDifferent(new Bn(d+7,f-7),!1,1,-1).toResultPoint(),a=this.getFirstDifferent(new Bn(d+7,f+7),!1,1,1).toResultPoint(),l=this.getFirstDifferent(new Bn(d-7,f+7),!1,-1,1).toResultPoint(),u=this.getFirstDifferent(new Bn(d-7,f-7),!1,-1,-1).toResultPoint()}return d=et.round((s.getX()+u.getX()+a.getX()+l.getX())/4),f=et.round((s.getY()+u.getY()+a.getY()+l.getY())/4),new Bn(d,f)}getMatrixCornerPoints(s){return this.expandSquare(s,2*this.nbCenterLayers,this.getDimension())}sampleGrid(s,a,l,u,d){let f=Ki.getInstance(),p=this.getDimension(),y=p/2-this.nbCenterLayers,C=p/2+this.nbCenterLayers;return f.sampleGrid(s,p,p,y,y,C,y,C,C,y,C,a.getX(),a.getY(),l.getX(),l.getY(),u.getX(),u.getY(),d.getX(),d.getY())}sampleLine(s,a,l){let u=0,d=this.distanceResultPoint(s,a),f=d/l,p=s.getX(),y=s.getY(),C=f*(a.getX()-s.getX())/d,w=f*(a.getY()-s.getY())/d;for(let x=0;x<l;x++)this.image.get(et.round(p+x*C),et.round(y+x*w))&&(u|=1<<l-x-1);return u}isWhiteOrBlackRectangle(s,a,l,u){let d=3;s=new Bn(s.getX()-d,s.getY()+d),a=new Bn(a.getX()-d,a.getY()-d),l=new Bn(l.getX()+d,l.getY()-d),u=new Bn(u.getX()+d,u.getY()+d);let f=this.getColor(u,s);if(f===0)return!1;let p=this.getColor(s,a);return p!==f||(p=this.getColor(a,l),p!==f)?!1:(p=this.getColor(l,u),p===f)}getColor(s,a){let l=this.distancePoint(s,a),u=(a.getX()-s.getX())/l,d=(a.getY()-s.getY())/l,f=0,p=s.getX(),y=s.getY(),C=this.image.get(s.getX(),s.getY()),w=Math.ceil(l);for(let E=0;E<w;E++)p+=u,y+=d,this.image.get(et.round(p),et.round(y))!==C&&f++;let x=f/l;return x>.1&&x<.9?0:x<=.1===C?1:-1}getFirstDifferent(s,a,l,u){let d=s.getX()+l,f=s.getY()+u;for(;this.isValid(d,f)&&this.image.get(d,f)===a;)d+=l,f+=u;for(d-=l,f-=u;this.isValid(d,f)&&this.image.get(d,f)===a;)d+=l;for(d-=l;this.isValid(d,f)&&this.image.get(d,f)===a;)f+=u;return f-=u,new Bn(d,f)}expandSquare(s,a,l){let u=l/(2*a),d=s[0].getX()-s[2].getX(),f=s[0].getY()-s[2].getY(),p=(s[0].getX()+s[2].getX())/2,y=(s[0].getY()+s[2].getY())/2,C=new ue(p+u*d,y+u*f),w=new ue(p-u*d,y-u*f);d=s[1].getX()-s[3].getX(),f=s[1].getY()-s[3].getY(),p=(s[1].getX()+s[3].getX())/2,y=(s[1].getY()+s[3].getY())/2;let x=new ue(p+u*d,y+u*f),E=new ue(p-u*d,y-u*f);return[C,x,w,E]}isValid(s,a){return s>=0&&s<this.image.getWidth()&&a>0&&a<this.image.getHeight()}isValidPoint(s){let a=et.round(s.getX()),l=et.round(s.getY());return this.isValid(a,l)}distancePoint(s,a){return et.distance(s.getX(),s.getY(),a.getX(),a.getY())}distanceResultPoint(s,a){return et.distance(s.getX(),s.getY(),a.getX(),a.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(G.truncDivision(this.nbLayers-4,8)+1)+15}}class pu{decode(s,a=null){let l=null,u=new l_(s.getBlackMatrix()),d=null,f=null;try{let w=u.detectMirror(!1);d=w.getPoints(),this.reportFoundResultPoints(a,d),f=new hp().decode(w)}catch(w){l=w}if(f==null)try{let w=u.detectMirror(!0);d=w.getPoints(),this.reportFoundResultPoints(a,d),f=new hp().decode(w)}catch(w){throw l??w}let p=new Fn(f.getText(),f.getRawBytes(),f.getNumBits(),d,Ce.AZTEC,A.currentTimeMillis()),y=f.getByteSegments();y!=null&&p.putMetadata(dn.BYTE_SEGMENTS,y);let C=f.getECLevel();return C!=null&&p.putMetadata(dn.ERROR_CORRECTION_LEVEL,C),p}reportFoundResultPoints(s,a){if(s!=null){let l=s.get(ge.NEED_RESULT_POINT_CALLBACK);l!=null&&a.forEach((u,d,f)=>{l.foundPossibleResultPoint(u)})}}reset(){}}class ET extends Fo{constructor(s=500){super(new pu,s)}}class $t{decode(s,a){try{return this.doDecode(s,a)}catch{if(a&&a.get(ge.TRY_HARDER)===!0&&s.isRotateSupported()){let d=s.rotateCounterClockwise(),f=this.doDecode(d,a),p=f.getResultMetadata(),y=270;p!==null&&p.get(dn.ORIENTATION)===!0&&(y=y+p.get(dn.ORIENTATION)%360),f.putMetadata(dn.ORIENTATION,y);let C=f.getResultPoints();if(C!==null){let w=d.getHeight();for(let x=0;x<C.length;x++)C[x]=new ue(w-C[x].getY()-1,C[x].getX())}return f}else throw new U}}reset(){}doDecode(s,a){let l=s.getWidth(),u=s.getHeight(),d=new ce(l),f=a&&a.get(ge.TRY_HARDER)===!0,p=Math.max(1,u>>(f?8:5)),y;f?y=u:y=15;let C=Math.trunc(u/2);for(let w=0;w<y;w++){let x=Math.trunc((w+1)/2),E=(w&1)===0,D=C+p*(E?x:-x);if(D<0||D>=u)break;try{d=s.getBlackRow(D,d)}catch{continue}for(let M=0;M<2;M++){if(M===1&&(d.reverse(),a&&a.get(ge.NEED_RESULT_POINT_CALLBACK)===!0)){let O=new Map;a.forEach((k,F)=>O.set(F,k)),O.delete(ge.NEED_RESULT_POINT_CALLBACK),a=O}try{let O=this.decodeRow(D,d,a);if(M===1){O.putMetadata(dn.ORIENTATION,180);let k=O.getResultPoints();k!==null&&(k[0]=new ue(l-k[0].getX()-1,k[0].getY()),k[1]=new ue(l-k[1].getX()-1,k[1].getY()))}return O}catch{}}}throw new U}static recordPattern(s,a,l){let u=l.length;for(let C=0;C<u;C++)l[C]=0;let d=s.getSize();if(a>=d)throw new U;let f=!s.get(a),p=0,y=a;for(;y<d;){if(s.get(y)!==f)l[p]++;else{if(++p===u)break;l[p]=1,f=!f}y++}if(!(p===u||p===u-1&&y===d))throw new U}static recordPatternInReverse(s,a,l){let u=l.length,d=s.get(a);for(;a>0&&u>=0;)s.get(--a)!==d&&(u--,d=!d);if(u>=0)throw new U;$t.recordPattern(s,a+1,l)}static patternMatchVariance(s,a,l){let u=s.length,d=0,f=0;for(let C=0;C<u;C++)d+=s[C],f+=a[C];if(d<f)return Number.POSITIVE_INFINITY;let p=d/f;l*=p;let y=0;for(let C=0;C<u;C++){let w=s[C],x=a[C]*p,E=w>x?w-x:x-w;if(E>l)return Number.POSITIVE_INFINITY;y+=E}return y/d}}class te extends $t{static findStartPattern(s){let a=s.getSize(),l=s.getNextSet(0),u=0,d=Int32Array.from([0,0,0,0,0,0]),f=l,p=!1,y=6;for(let C=l;C<a;C++)if(s.get(C)!==p)d[u]++;else{if(u===y-1){let w=te.MAX_AVG_VARIANCE,x=-1;for(let E=te.CODE_START_A;E<=te.CODE_START_C;E++){let D=$t.patternMatchVariance(d,te.CODE_PATTERNS[E],te.MAX_INDIVIDUAL_VARIANCE);D<w&&(w=D,x=E)}if(x>=0&&s.isRange(Math.max(0,f-(C-f)/2),f,!1))return Int32Array.from([f,C,x]);f+=d[0]+d[1],d=d.slice(2,d.length-1),d[u-1]=0,d[u]=0,u--}else u++;d[u]=1,p=!p}throw new U}static decodeCode(s,a,l){$t.recordPattern(s,l,a);let u=te.MAX_AVG_VARIANCE,d=-1;for(let f=0;f<te.CODE_PATTERNS.length;f++){let p=te.CODE_PATTERNS[f],y=this.patternMatchVariance(a,p,te.MAX_INDIVIDUAL_VARIANCE);y<u&&(u=y,d=f)}if(d>=0)return d;throw new U}decodeRow(s,a,l){let u=l&&l.get(ge.ASSUME_GS1)===!0,d=te.findStartPattern(a),f=d[2],p=0,y=new Uint8Array(20);y[p++]=f;let C;switch(f){case te.CODE_START_A:C=te.CODE_CODE_A;break;case te.CODE_START_B:C=te.CODE_CODE_B;break;case te.CODE_START_C:C=te.CODE_CODE_C;break;default:throw new H}let w=!1,x=!1,E="",D=d[0],M=d[1],O=Int32Array.from([0,0,0,0,0,0]),k=0,F=0,X=f,re=0,V=!0,ze=!1,Ne=!1;for(;!w;){let Ls=x;switch(x=!1,k=F,F=te.decodeCode(a,O,M),y[p++]=F,F!==te.CODE_STOP&&(V=!0),F!==te.CODE_STOP&&(re++,X+=re*F),D=M,M+=O.reduce((lM,cM)=>lM+cM,0),F){case te.CODE_START_A:case te.CODE_START_B:case te.CODE_START_C:throw new H}switch(C){case te.CODE_CODE_A:if(F<64)Ne===ze?E+=String.fromCharCode(32+F):E+=String.fromCharCode(32+F+128),Ne=!1;else if(F<96)Ne===ze?E+=String.fromCharCode(F-64):E+=String.fromCharCode(F+64),Ne=!1;else switch(F!==te.CODE_STOP&&(V=!1),F){case te.CODE_FNC_1:u&&(E.length===0?E+="]C1":E+="");break;case te.CODE_FNC_2:case te.CODE_FNC_3:break;case te.CODE_FNC_4_A:!ze&&Ne?(ze=!0,Ne=!1):ze&&Ne?(ze=!1,Ne=!1):Ne=!0;break;case te.CODE_SHIFT:x=!0,C=te.CODE_CODE_B;break;case te.CODE_CODE_B:C=te.CODE_CODE_B;break;case te.CODE_CODE_C:C=te.CODE_CODE_C;break;case te.CODE_STOP:w=!0;break}break;case te.CODE_CODE_B:if(F<96)Ne===ze?E+=String.fromCharCode(32+F):E+=String.fromCharCode(32+F+128),Ne=!1;else switch(F!==te.CODE_STOP&&(V=!1),F){case te.CODE_FNC_1:u&&(E.length===0?E+="]C1":E+="");break;case te.CODE_FNC_2:case te.CODE_FNC_3:break;case te.CODE_FNC_4_B:!ze&&Ne?(ze=!0,Ne=!1):ze&&Ne?(ze=!1,Ne=!1):Ne=!0;break;case te.CODE_SHIFT:x=!0,C=te.CODE_CODE_A;break;case te.CODE_CODE_A:C=te.CODE_CODE_A;break;case te.CODE_CODE_C:C=te.CODE_CODE_C;break;case te.CODE_STOP:w=!0;break}break;case te.CODE_CODE_C:if(F<100)F<10&&(E+="0"),E+=F;else switch(F!==te.CODE_STOP&&(V=!1),F){case te.CODE_FNC_1:u&&(E.length===0?E+="]C1":E+="");break;case te.CODE_CODE_A:C=te.CODE_CODE_A;break;case te.CODE_CODE_B:C=te.CODE_CODE_B;break;case te.CODE_STOP:w=!0;break}break}Ls&&(C=C===te.CODE_CODE_A?te.CODE_CODE_B:te.CODE_CODE_A)}let Yn=M-D;if(M=a.getNextUnset(M),!a.isRange(M,Math.min(a.getSize(),M+(M-D)/2),!1))throw new U;if(X-=re*k,X%103!==k)throw new b;let kr=E.length;if(kr===0)throw new U;kr>0&&V&&(C===te.CODE_CODE_C?E=E.substring(0,kr-2):E=E.substring(0,kr-1));let Xn=(d[1]+d[0])/2,wt=D+Yn/2,xn=y.length,ir=new Uint8Array(xn);for(let Ls=0;Ls<xn;Ls++)ir[Ls]=y[Ls];let ks=[new ue(Xn,s),new ue(wt,s)];return new Fn(E,ir,0,ks,Ce.CODE_128,new Date().getTime())}}te.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],te.MAX_AVG_VARIANCE=.25,te.MAX_INDIVIDUAL_VARIANCE=.7,te.CODE_SHIFT=98,te.CODE_CODE_C=99,te.CODE_CODE_B=100,te.CODE_CODE_A=101,te.CODE_FNC_1=102,te.CODE_FNC_2=97,te.CODE_FNC_3=96,te.CODE_FNC_4_A=101,te.CODE_FNC_4_B=100,te.CODE_START_A=103,te.CODE_START_B=104,te.CODE_START_C=105,te.CODE_STOP=106;let gp=(()=>{class _ extends $t{constructor(a=!1,l=!1){super(),this.usingCheckDigit=a,this.extendedMode=l,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(a,l,u){let d=this.counters;d.fill(0),this.decodeRowResult="";let f=_.findAsteriskPattern(l,d),p=l.getNextSet(f[1]),y=l.getSize(),C,w;do{_.recordPattern(l,p,d);let k=_.toNarrowWidePattern(d);if(k<0)throw new U;C=_.patternToChar(k),this.decodeRowResult+=C,w=p;for(let F of d)p+=F;p=l.getNextSet(p)}while(C!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let x=0;for(let k of d)x+=k;let E=p-w-x;if(p!==y&&E*2<x)throw new U;if(this.usingCheckDigit){let k=this.decodeRowResult.length-1,F=0;for(let X=0;X<k;X++)F+=_.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(X));if(this.decodeRowResult.charAt(k)!==_.ALPHABET_STRING.charAt(F%43))throw new b;this.decodeRowResult=this.decodeRowResult.substring(0,k)}if(this.decodeRowResult.length===0)throw new U;let D;this.extendedMode?D=_.decodeExtended(this.decodeRowResult):D=this.decodeRowResult;let M=(f[1]+f[0])/2,O=w+x/2;return new Fn(D,null,0,[new ue(M,a),new ue(O,a)],Ce.CODE_39,new Date().getTime())}static findAsteriskPattern(a,l){let u=a.getSize(),d=a.getNextSet(0),f=0,p=d,y=!1,C=l.length;for(let w=d;w<u;w++)if(a.get(w)!==y)l[f]++;else{if(f===C-1){if(this.toNarrowWidePattern(l)===_.ASTERISK_ENCODING&&a.isRange(Math.max(0,p-Math.floor((w-p)/2)),p,!1))return[p,w];p+=l[0]+l[1],l.copyWithin(0,2,2+f-1),l[f-1]=0,l[f]=0,f--}else f++;l[f]=1,y=!y}throw new U}static toNarrowWidePattern(a){let l=a.length,u=0,d;do{let f=2147483647;for(let C of a)C<f&&C>u&&(f=C);u=f,d=0;let p=0,y=0;for(let C=0;C<l;C++){let w=a[C];w>u&&(y|=1<<l-1-C,d++,p+=w)}if(d===3){for(let C=0;C<l&&d>0;C++){let w=a[C];if(w>u&&(d--,w*2>=p))return-1}return y}}while(d>3);return-1}static patternToChar(a){for(let l=0;l<_.CHARACTER_ENCODINGS.length;l++)if(_.CHARACTER_ENCODINGS[l]===a)return _.ALPHABET_STRING.charAt(l);if(a===_.ASTERISK_ENCODING)return"*";throw new U}static decodeExtended(a){let l=a.length,u="";for(let d=0;d<l;d++){let f=a.charAt(d);if(f==="+"||f==="$"||f==="%"||f==="/"){let p=a.charAt(d+1),y="\0";switch(f){case"+":if(p>="A"&&p<="Z")y=String.fromCharCode(p.charCodeAt(0)+32);else throw new H;break;case"$":if(p>="A"&&p<="Z")y=String.fromCharCode(p.charCodeAt(0)-64);else throw new H;break;case"%":if(p>="A"&&p<="E")y=String.fromCharCode(p.charCodeAt(0)-38);else if(p>="F"&&p<="J")y=String.fromCharCode(p.charCodeAt(0)-11);else if(p>="K"&&p<="O")y=String.fromCharCode(p.charCodeAt(0)+16);else if(p>="P"&&p<="T")y=String.fromCharCode(p.charCodeAt(0)+43);else if(p==="U")y="\0";else if(p==="V")y="@";else if(p==="W")y="`";else if(p==="X"||p==="Y"||p==="Z")y="\x7F";else throw new H;break;case"/":if(p>="A"&&p<="O")y=String.fromCharCode(p.charCodeAt(0)-32);else if(p==="Z")y=":";else throw new H;break}u+=y,d++}else u+=f}return u}}return _.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",_.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],_.ASTERISK_ENCODING=148,_})();class Ct extends $t{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(s,a,l){let u=this.decodeStart(a),d=this.decodeEnd(a),f=new yt;Ct.decodeMiddle(a,u[1],d[0],f);let p=f.toString(),y=null;l!=null&&(y=l.get(ge.ALLOWED_LENGTHS)),y==null&&(y=Ct.DEFAULT_ALLOWED_LENGTHS);let C=p.length,w=!1,x=0;for(let M of y){if(C===M){w=!0;break}M>x&&(x=M)}if(!w&&C>x&&(w=!0),!w)throw new H;let E=[new ue(u[1],s),new ue(d[0],s)];return new Fn(p,null,0,E,Ce.ITF,new Date().getTime())}static decodeMiddle(s,a,l,u){let d=new Int32Array(10),f=new Int32Array(5),p=new Int32Array(5);for(d.fill(0),f.fill(0),p.fill(0);a<l;){$t.recordPattern(s,a,d);for(let C=0;C<5;C++){let w=2*C;f[C]=d[w],p[C]=d[w+1]}let y=Ct.decodeDigit(f);u.append(y.toString()),y=this.decodeDigit(p),u.append(y.toString()),d.forEach(function(C){a+=C})}}decodeStart(s){let a=Ct.skipWhiteSpace(s),l=Ct.findGuardPattern(s,a,Ct.START_PATTERN);return this.narrowLineWidth=(l[1]-l[0])/4,this.validateQuietZone(s,l[0]),l}validateQuietZone(s,a){let l=this.narrowLineWidth*10;l=l<a?l:a;for(let u=a-1;l>0&&u>=0&&!s.get(u);u--)l--;if(l!==0)throw new U}static skipWhiteSpace(s){let a=s.getSize(),l=s.getNextSet(0);if(l===a)throw new U;return l}decodeEnd(s){s.reverse();try{let a=Ct.skipWhiteSpace(s),l;try{l=Ct.findGuardPattern(s,a,Ct.END_PATTERN_REVERSED[0])}catch(d){d instanceof U&&(l=Ct.findGuardPattern(s,a,Ct.END_PATTERN_REVERSED[1]))}this.validateQuietZone(s,l[0]);let u=l[0];return l[0]=s.getSize()-l[1],l[1]=s.getSize()-u,l}finally{s.reverse()}}static findGuardPattern(s,a,l){let u=l.length,d=new Int32Array(u),f=s.getSize(),p=!1,y=0,C=a;d.fill(0);for(let w=a;w<f;w++)if(s.get(w)!==p)d[y]++;else{if(y===u-1){if($t.patternMatchVariance(d,l,Ct.MAX_INDIVIDUAL_VARIANCE)<Ct.MAX_AVG_VARIANCE)return[C,w];C+=d[0]+d[1],A.arraycopy(d,2,d,0,y-1),d[y-1]=0,d[y]=0,y--}else y++;d[y]=1,p=!p}throw new U}static decodeDigit(s){let a=Ct.MAX_AVG_VARIANCE,l=-1,u=Ct.PATTERNS.length;for(let d=0;d<u;d++){let f=Ct.PATTERNS[d],p=$t.patternMatchVariance(s,f,Ct.MAX_INDIVIDUAL_VARIANCE);p<a?(a=p,l=d):p===a&&(l=-1)}if(l>=0)return l%10;throw new U}}Ct.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],Ct.MAX_AVG_VARIANCE=.38,Ct.MAX_INDIVIDUAL_VARIANCE=.5,Ct.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],Ct.START_PATTERN=Int32Array.from([1,1,1,1]),Ct.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Lt extends $t{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(s){let a=!1,l,u=0,d=Int32Array.from([0,0,0]);for(;!a;){d=Int32Array.from([0,0,0]),l=Lt.findGuardPattern(s,u,!1,this.START_END_PATTERN,d);let f=l[0];u=l[1];let p=f-(u-f);p>=0&&(a=s.isRange(p,f,!1))}return l}static checkChecksum(s){return Lt.checkStandardUPCEANChecksum(s)}static checkStandardUPCEANChecksum(s){let a=s.length;if(a===0)return!1;let l=parseInt(s.charAt(a-1),10);return Lt.getStandardUPCEANChecksum(s.substring(0,a-1))===l}static getStandardUPCEANChecksum(s){let a=s.length,l=0;for(let u=a-1;u>=0;u-=2){let d=s.charAt(u).charCodeAt(0)-48;if(d<0||d>9)throw new H;l+=d}l*=3;for(let u=a-2;u>=0;u-=2){let d=s.charAt(u).charCodeAt(0)-48;if(d<0||d>9)throw new H;l+=d}return(1e3-l)%10}static decodeEnd(s,a){return Lt.findGuardPattern(s,a,!1,Lt.START_END_PATTERN,new Int32Array(Lt.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(s,a,l,u){return this.findGuardPattern(s,a,l,u,new Int32Array(u.length))}static findGuardPattern(s,a,l,u,d){let f=s.getSize();a=l?s.getNextUnset(a):s.getNextSet(a);let p=0,y=a,C=u.length,w=l;for(let x=a;x<f;x++)if(s.get(x)!==w)d[p]++;else{if(p===C-1){if($t.patternMatchVariance(d,u,Lt.MAX_INDIVIDUAL_VARIANCE)<Lt.MAX_AVG_VARIANCE)return Int32Array.from([y,x]);y+=d[0]+d[1];let E=d.slice(2,d.length-1);for(let D=0;D<p-1;D++)d[D]=E[D];d[p-1]=0,d[p]=0,p--}else p++;d[p]=1,w=!w}throw new U}static decodeDigit(s,a,l,u){this.recordPattern(s,l,a);let d=this.MAX_AVG_VARIANCE,f=-1,p=u.length;for(let y=0;y<p;y++){let C=u[y],w=$t.patternMatchVariance(a,C,Lt.MAX_INDIVIDUAL_VARIANCE);w<d&&(d=w,f=y)}if(f>=0)return f;throw new U}}Lt.MAX_AVG_VARIANCE=.48,Lt.MAX_INDIVIDUAL_VARIANCE=.7,Lt.START_END_PATTERN=Int32Array.from([1,1,1]),Lt.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Lt.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Lt.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class al{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(s,a,l){let u=this.decodeRowStringBuffer,d=this.decodeMiddle(a,l,u),f=u.toString(),p=al.parseExtensionString(f),y=[new ue((l[0]+l[1])/2,s),new ue(d,s)],C=new Fn(f,null,0,y,Ce.UPC_EAN_EXTENSION,new Date().getTime());return p!=null&&C.putAllMetadata(p),C}decodeMiddle(s,a,l){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let d=s.getSize(),f=a[1],p=0;for(let C=0;C<5&&f<d;C++){let w=Lt.decodeDigit(s,u,f,Lt.L_AND_G_PATTERNS);l+=String.fromCharCode(48+w%10);for(let x of u)f+=x;w>=10&&(p|=1<<4-C),C!==4&&(f=s.getNextSet(f),f=s.getNextUnset(f))}if(l.length!==5)throw new U;let y=this.determineCheckDigit(p);if(al.extensionChecksum(l.toString())!==y)throw new U;return f}static extensionChecksum(s){let a=s.length,l=0;for(let u=a-2;u>=0;u-=2)l+=s.charAt(u).charCodeAt(0)-48;l*=3;for(let u=a-1;u>=0;u-=2)l+=s.charAt(u).charCodeAt(0)-48;return l*=3,l%10}determineCheckDigit(s){for(let a=0;a<10;a++)if(s===this.CHECK_DIGIT_ENCODINGS[a])return a;throw new U}static parseExtensionString(s){if(s.length!==5)return null;let a=al.parseExtension5String(s);return a==null?null:new Map([[dn.SUGGESTED_PRICE,a]])}static parseExtension5String(s){let a;switch(s.charAt(0)){case"0":a="\xA3";break;case"5":a="$";break;case"9":switch(s){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}a="";break;default:a="";break}let l=parseInt(s.substring(1)),u=(l/100).toString(),d=l%100,f=d<10?"0"+d:d.toString();return a+u+"."+f}}class mp{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(s,a,l){let u=this.decodeRowStringBuffer,d=this.decodeMiddle(a,l,u),f=u.toString(),p=mp.parseExtensionString(f),y=[new ue((l[0]+l[1])/2,s),new ue(d,s)],C=new Fn(f,null,0,y,Ce.UPC_EAN_EXTENSION,new Date().getTime());return p!=null&&C.putAllMetadata(p),C}decodeMiddle(s,a,l){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let d=s.getSize(),f=a[1],p=0;for(let y=0;y<2&&f<d;y++){let C=Lt.decodeDigit(s,u,f,Lt.L_AND_G_PATTERNS);l+=String.fromCharCode(48+C%10);for(let w of u)f+=w;C>=10&&(p|=1<<1-y),y!==1&&(f=s.getNextSet(f),f=s.getNextUnset(f))}if(l.length!==2)throw new U;if(parseInt(l.toString())%4!==p)throw new U;return f}static parseExtensionString(s){return s.length!==2?null:new Map([[dn.ISSUE_NUMBER,parseInt(s)]])}}class c_{static decodeRow(s,a,l){let u=Lt.findGuardPattern(a,l,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new al().decodeRow(s,a,u)}catch{return new mp().decodeRow(s,a,u)}}}c_.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class lt extends Lt{constructor(){super(),this.decodeRowStringBuffer="",lt.L_AND_G_PATTERNS=lt.L_PATTERNS.map(s=>Int32Array.from(s));for(let s=10;s<20;s++){let a=lt.L_PATTERNS[s-10],l=new Int32Array(a.length);for(let u=0;u<a.length;u++)l[u]=a[a.length-u-1];lt.L_AND_G_PATTERNS[s]=l}}decodeRow(s,a,l){let u=lt.findStartGuardPattern(a),d=l==null?null:l.get(ge.NEED_RESULT_POINT_CALLBACK);if(d!=null){let V=new ue((u[0]+u[1])/2,s);d.foundPossibleResultPoint(V)}let f=this.decodeMiddle(a,u,this.decodeRowStringBuffer),p=f.rowOffset,y=f.resultString;if(d!=null){let V=new ue(p,s);d.foundPossibleResultPoint(V)}let C=this.decodeEnd(a,p);if(d!=null){let V=new ue((C[0]+C[1])/2,s);d.foundPossibleResultPoint(V)}let w=C[1],x=w+(w-C[0]);if(x>=a.getSize()||!a.isRange(w,x,!1))throw new U;let E=y.toString();if(E.length<8)throw new H;if(!lt.checkChecksum(E))throw new b;let D=(u[1]+u[0])/2,M=(C[1]+C[0])/2,O=this.getBarcodeFormat(),k=[new ue(D,s),new ue(M,s)],F=new Fn(E,null,0,k,O,new Date().getTime()),X=0;try{let V=c_.decodeRow(s,a,C[1]);F.putMetadata(dn.UPC_EAN_EXTENSION,V.getText()),F.putAllMetadata(V.getResultMetadata()),F.addResultPoints(V.getResultPoints()),X=V.getText().length}catch{}let re=l==null?null:l.get(ge.ALLOWED_EAN_EXTENSIONS);if(re!=null){let V=!1;for(let ze in re)if(X.toString()===ze){V=!0;break}if(!V)throw new U}return F}decodeEnd(s,a){return lt.findGuardPattern(s,a,!1,lt.START_END_PATTERN,new Int32Array(lt.START_END_PATTERN.length).fill(0))}static checkChecksum(s){return lt.checkStandardUPCEANChecksum(s)}static checkStandardUPCEANChecksum(s){let a=s.length;if(a===0)return!1;let l=parseInt(s.charAt(a-1),10);return lt.getStandardUPCEANChecksum(s.substring(0,a-1))===l}static getStandardUPCEANChecksum(s){let a=s.length,l=0;for(let u=a-1;u>=0;u-=2){let d=s.charAt(u).charCodeAt(0)-48;if(d<0||d>9)throw new H;l+=d}l*=3;for(let u=a-2;u>=0;u-=2){let d=s.charAt(u).charCodeAt(0)-48;if(d<0||d>9)throw new H;l+=d}return(1e3-l)%10}}let gu=(()=>{class _ extends lt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(a,l,u){let d=this.decodeMiddleCounters;d[0]=0,d[1]=0,d[2]=0,d[3]=0;let f=a.getSize(),p=l[1],y=0;for(let w=0;w<6&&p<f;w++){let x=lt.decodeDigit(a,d,p,lt.L_AND_G_PATTERNS);u+=String.fromCharCode(48+x%10);for(let E of d)p+=E;x>=10&&(y|=1<<5-w)}u=_.determineFirstDigit(u,y),p=lt.findGuardPattern(a,p,!0,lt.MIDDLE_PATTERN,new Int32Array(lt.MIDDLE_PATTERN.length).fill(0))[1];for(let w=0;w<6&&p<f;w++){let x=lt.decodeDigit(a,d,p,lt.L_PATTERNS);u+=String.fromCharCode(48+x);for(let E of d)p+=E}return{rowOffset:p,resultString:u}}getBarcodeFormat(){return Ce.EAN_13}static determineFirstDigit(a,l){for(let u=0;u<10;u++)if(l===this.FIRST_DIGIT_ENCODINGS[u])return a=String.fromCharCode(48+u)+a,a;throw new U}}return _.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],_})();class u_ extends lt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(s,a,l){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let d=s.getSize(),f=a[1];for(let y=0;y<4&&f<d;y++){let C=lt.decodeDigit(s,u,f,lt.L_PATTERNS);l+=String.fromCharCode(48+C);for(let w of u)f+=w}f=lt.findGuardPattern(s,f,!0,lt.MIDDLE_PATTERN,new Int32Array(lt.MIDDLE_PATTERN.length).fill(0))[1];for(let y=0;y<4&&f<d;y++){let C=lt.decodeDigit(s,u,f,lt.L_PATTERNS);l+=String.fromCharCode(48+C);for(let w of u)f+=w}return{rowOffset:f,resultString:l}}getBarcodeFormat(){return Ce.EAN_8}}class d_ extends lt{constructor(){super(...arguments),this.ean13Reader=new gu}getBarcodeFormat(){return Ce.UPC_A}decode(s,a){return this.maybeReturnResult(this.ean13Reader.decode(s))}decodeRow(s,a,l){return this.maybeReturnResult(this.ean13Reader.decodeRow(s,a,l))}decodeMiddle(s,a,l){return this.ean13Reader.decodeMiddle(s,a,l)}maybeReturnResult(s){let a=s.getText();if(a.charAt(0)==="0"){let l=new Fn(a.substring(1),null,null,s.getResultPoints(),Ce.UPC_A);return s.getResultMetadata()!=null&&l.putAllMetadata(s.getResultMetadata()),l}else throw new U}reset(){this.ean13Reader.reset()}}class Nr extends lt{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(s,a,l){let u=this.decodeMiddleCounters.map(C=>C);u[0]=0,u[1]=0,u[2]=0,u[3]=0;let d=s.getSize(),f=a[1],p=0;for(let C=0;C<6&&f<d;C++){let w=Nr.decodeDigit(s,u,f,Nr.L_AND_G_PATTERNS);l+=String.fromCharCode(48+w%10);for(let x of u)f+=x;w>=10&&(p|=1<<5-C)}let y=Nr.determineNumSysAndCheckDigit(l,p);return{rowOffset:f,resultString:y}}decodeEnd(s,a){return Nr.findGuardPatternWithoutCounters(s,a,!0,Nr.MIDDLE_END_PATTERN)}checkChecksum(s){return lt.checkChecksum(Nr.convertUPCEtoUPCA(s))}static determineNumSysAndCheckDigit(s,a){for(let l=0;l<=1;l++)for(let u=0;u<10;u++)if(a===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[l][u]){let d=String.fromCharCode(48+l),f=String.fromCharCode(48+u);return d+s+f}throw U.getNotFoundInstance()}getBarcodeFormat(){return Ce.UPC_E}static convertUPCEtoUPCA(s){let a=s.slice(1,7).split("").map(d=>d.charCodeAt(0)),l=new yt;l.append(s.charAt(0));let u=a[5];switch(u){case 0:case 1:case 2:l.appendChars(a,0,2),l.append(u),l.append("0000"),l.appendChars(a,2,3);break;case 3:l.appendChars(a,0,3),l.append("00000"),l.appendChars(a,3,2);break;case 4:l.appendChars(a,0,4),l.append("00000"),l.append(a[4]);break;default:l.appendChars(a,0,5),l.append("0000"),l.append(u);break}return s.length>=8&&l.append(s.charAt(7)),l.toString()}}Nr.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Nr.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class yp extends $t{constructor(s){super();let a=s==null?null:s.get(ge.POSSIBLE_FORMATS),l=[];n(a)?(l.push(new gu),l.push(new d_),l.push(new u_),l.push(new Nr)):(a.indexOf(Ce.EAN_13)>-1&&l.push(new gu),a.indexOf(Ce.UPC_A)>-1&&l.push(new d_),a.indexOf(Ce.EAN_8)>-1&&l.push(new u_),a.indexOf(Ce.UPC_E)>-1&&l.push(new Nr)),this.readers=l}decodeRow(s,a,l){for(let u of this.readers)try{let d=u.decodeRow(s,a,l),f=d.getBarcodeFormat()===Ce.EAN_13&&d.getText().charAt(0)==="0",p=l==null?null:l.get(ge.POSSIBLE_FORMATS),y=p==null||p.includes(Ce.UPC_A);if(f&&y){let C=d.getRawBytes(),w=new Fn(d.getText().substring(1),C,C?C.length:null,d.getResultPoints(),Ce.UPC_A);return w.putAllMetadata(d.getResultMetadata()),w}return d}catch{}throw new U}reset(){for(let s of this.readers)s.reset()}}let Bo=(()=>{class _ extends $t{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(a,l){for(let u=0;u<l.length;u++)if($t.patternMatchVariance(a,l[u],_.MAX_INDIVIDUAL_VARIANCE)<_.MAX_AVG_VARIANCE)return u;throw new U}static count(a){return et.sum(new Int32Array(a))}static increment(a,l){let u=0,d=l[0];for(let f=1;f<a.length;f++)l[f]>d&&(d=l[f],u=f);a[u]++}static decrement(a,l){let u=0,d=l[0];for(let f=1;f<a.length;f++)l[f]<d&&(d=l[f],u=f);a[u]--}static isFinderPattern(a){let l=a[0]+a[1],u=l+a[2]+a[3],d=l/u;if(d>=_.MIN_FINDER_PATTERN_RATIO&&d<=_.MAX_FINDER_PATTERN_RATIO){let f=Number.MAX_SAFE_INTEGER,p=Number.MIN_SAFE_INTEGER;for(let y of a)y>p&&(p=y),y<f&&(f=y);return p<10*f}return!1}}return _.MAX_AVG_VARIANCE=.2,_.MAX_INDIVIDUAL_VARIANCE=.45,_.MIN_FINDER_PATTERN_RATIO=9.5/12,_.MAX_FINDER_PATTERN_RATIO=12.5/14,_})();class Ts{constructor(s,a){this.value=s,this.checksumPortion=a}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(s){if(!(s instanceof Ts))return!1;let a=s;return this.value===a.value&&this.checksumPortion===a.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class mu{constructor(s,a,l,u,d){this.value=s,this.startEnd=a,this.value=s,this.startEnd=a,this.resultPoints=new Array,this.resultPoints.push(new ue(l,d)),this.resultPoints.push(new ue(u,d))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(s){if(!(s instanceof mu))return!1;let a=s;return this.value===a.value}hashCode(){return this.value}}class ei{constructor(){}static getRSSvalue(s,a,l){let u=0;for(let y of s)u+=y;let d=0,f=0,p=s.length;for(let y=0;y<p-1;y++){let C;for(C=1,f|=1<<y;C<s[y];C++,f&=~(1<<y)){let w=ei.combins(u-C-1,p-y-2);if(l&&f===0&&u-C-(p-y-1)>=p-y-1&&(w-=ei.combins(u-C-(p-y),p-y-2)),p-y-1>1){let x=0;for(let E=u-C-(p-y-2);E>a;E--)x+=ei.combins(u-C-E-1,p-y-3);w-=x*(p-1-y)}else u-C>a&&w--;d+=w}u-=C}return d}static combins(s,a){let l,u;s-a>a?(u=a,l=s-a):(u=s-a,l=a);let d=1,f=1;for(let p=s;p>l;p--)d*=p,f<=u&&(d/=f,f++);for(;f<=u;)d/=f,f++;return d}}class IT{static buildBitArray(s){let a=s.length*2-1;s[s.length-1].getRightChar()==null&&(a-=1);let l=12*a,u=new ce(l),d=0,p=s[0].getRightChar().getValue();for(let y=11;y>=0;--y)p&1<<y&&u.set(d),d++;for(let y=1;y<s.length;++y){let C=s[y],w=C.getLeftChar().getValue();for(let x=11;x>=0;--x)w&1<<x&&u.set(d),d++;if(C.getRightChar()!=null){let x=C.getRightChar().getValue();for(let E=11;E>=0;--E)x&1<<E&&u.set(d),d++}}return u}}class Vo{constructor(s,a){a?this.decodedInformation=null:(this.finished=s,this.decodedInformation=a)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class Cp{constructor(s){this.newPosition=s}getNewPosition(){return this.newPosition}}let Or=(()=>{class _ extends Cp{constructor(a,l){super(a),this.value=l}getValue(){return this.value}isFNC1(){return this.value===_.FNC1}}return _.FNC1="$",_})();class Uo extends Cp{constructor(s,a,l){super(s),l?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=a}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}let Ms=(()=>{class _ extends Cp{constructor(a,l,u){if(super(a),l<0||l>10||u<0||u>10)throw new H;this.firstDigit=l,this.secondDigit=u}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===_.FNC1}isSecondDigitFNC1(){return this.secondDigit===_.FNC1}isAnyFNC1(){return this.firstDigit===_.FNC1||this.secondDigit===_.FNC1}}return _.FNC1=10,_})();class le{constructor(){}static parseFieldsInGeneralPurpose(s){if(!s)return null;if(s.length<2)throw new U;let a=s.substring(0,2);for(let d of le.TWO_DIGIT_DATA_LENGTH)if(d[0]===a)return d[1]===le.VARIABLE_LENGTH?le.processVariableAI(2,d[2],s):le.processFixedAI(2,d[1],s);if(s.length<3)throw new U;let l=s.substring(0,3);for(let d of le.THREE_DIGIT_DATA_LENGTH)if(d[0]===l)return d[1]===le.VARIABLE_LENGTH?le.processVariableAI(3,d[2],s):le.processFixedAI(3,d[1],s);for(let d of le.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(d[0]===l)return d[1]===le.VARIABLE_LENGTH?le.processVariableAI(4,d[2],s):le.processFixedAI(4,d[1],s);if(s.length<4)throw new U;let u=s.substring(0,4);for(let d of le.FOUR_DIGIT_DATA_LENGTH)if(d[0]===u)return d[1]===le.VARIABLE_LENGTH?le.processVariableAI(4,d[2],s):le.processFixedAI(4,d[1],s);throw new U}static processFixedAI(s,a,l){if(l.length<s)throw new U;let u=l.substring(0,s);if(l.length<s+a)throw new U;let d=l.substring(s,s+a),f=l.substring(s+a),p="("+u+")"+d,y=le.parseFieldsInGeneralPurpose(f);return y==null?p:p+y}static processVariableAI(s,a,l){let u=l.substring(0,s),d;l.length<s+a?d=l.length:d=s+a;let f=l.substring(s,d),p=l.substring(d),y="("+u+")"+f,C=le.parseFieldsInGeneralPurpose(p);return C==null?y:y+C}}le.VARIABLE_LENGTH=[],le.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",le.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",le.VARIABLE_LENGTH,20],["22",le.VARIABLE_LENGTH,29],["30",le.VARIABLE_LENGTH,8],["37",le.VARIABLE_LENGTH,8],["90",le.VARIABLE_LENGTH,30],["91",le.VARIABLE_LENGTH,30],["92",le.VARIABLE_LENGTH,30],["93",le.VARIABLE_LENGTH,30],["94",le.VARIABLE_LENGTH,30],["95",le.VARIABLE_LENGTH,30],["96",le.VARIABLE_LENGTH,30],["97",le.VARIABLE_LENGTH,3],["98",le.VARIABLE_LENGTH,30],["99",le.VARIABLE_LENGTH,30]],le.THREE_DIGIT_DATA_LENGTH=[["240",le.VARIABLE_LENGTH,30],["241",le.VARIABLE_LENGTH,30],["242",le.VARIABLE_LENGTH,6],["250",le.VARIABLE_LENGTH,30],["251",le.VARIABLE_LENGTH,30],["253",le.VARIABLE_LENGTH,17],["254",le.VARIABLE_LENGTH,20],["400",le.VARIABLE_LENGTH,30],["401",le.VARIABLE_LENGTH,30],["402",17],["403",le.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",le.VARIABLE_LENGTH,20],["421",le.VARIABLE_LENGTH,15],["422",3],["423",le.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],le.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",le.VARIABLE_LENGTH,15],["391",le.VARIABLE_LENGTH,18],["392",le.VARIABLE_LENGTH,15],["393",le.VARIABLE_LENGTH,18],["703",le.VARIABLE_LENGTH,30]],le.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",le.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",le.VARIABLE_LENGTH,20],["8003",le.VARIABLE_LENGTH,30],["8004",le.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",le.VARIABLE_LENGTH,30],["8008",le.VARIABLE_LENGTH,12],["8018",18],["8020",le.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",le.VARIABLE_LENGTH,70],["8200",le.VARIABLE_LENGTH,70]];class Ns{constructor(s){this.buffer=new yt,this.information=s}decodeAllCodes(s,a){let l=a,u=null;do{let d=this.decodeGeneralPurposeField(l,u),f=le.parseFieldsInGeneralPurpose(d.getNewString());if(f!=null&&s.append(f),d.isRemaining()?u=""+d.getRemainingValue():u=null,l===d.getNewPosition())break;l=d.getNewPosition()}while(!0);return s.toString()}isStillNumeric(s){if(s+7>this.information.getSize())return s+4<=this.information.getSize();for(let a=s;a<s+3;++a)if(this.information.get(a))return!0;return this.information.get(s+3)}decodeNumeric(s){if(s+7>this.information.getSize()){let d=this.extractNumericValueFromBitArray(s,4);return d===0?new Ms(this.information.getSize(),Ms.FNC1,Ms.FNC1):new Ms(this.information.getSize(),d-1,Ms.FNC1)}let a=this.extractNumericValueFromBitArray(s,7),l=(a-8)/11,u=(a-8)%11;return new Ms(s+7,l,u)}extractNumericValueFromBitArray(s,a){return Ns.extractNumericValueFromBitArray(this.information,s,a)}static extractNumericValueFromBitArray(s,a,l){let u=0;for(let d=0;d<l;++d)s.get(a+d)&&(u|=1<<l-d-1);return u}decodeGeneralPurposeField(s,a){this.buffer.setLengthToZero(),a!=null&&this.buffer.append(a),this.current.setPosition(s);let l=this.parseBlocks();return l!=null&&l.isRemaining()?new Uo(this.current.getPosition(),this.buffer.toString(),l.getRemainingValue()):new Uo(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let s,a;do{let l=this.current.getPosition();if(this.current.isAlpha()?(a=this.parseAlphaBlock(),s=a.isFinished()):this.current.isIsoIec646()?(a=this.parseIsoIec646Block(),s=a.isFinished()):(a=this.parseNumericBlock(),s=a.isFinished()),!(l!==this.current.getPosition())&&!s)break}while(!s);return a.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let s=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(s.getNewPosition()),s.isFirstDigitFNC1()){let a;return s.isSecondDigitFNC1()?a=new Uo(this.current.getPosition(),this.buffer.toString()):a=new Uo(this.current.getPosition(),this.buffer.toString(),s.getSecondDigit()),new Vo(!0,a)}if(this.buffer.append(s.getFirstDigit()),s.isSecondDigitFNC1()){let a=new Uo(this.current.getPosition(),this.buffer.toString());return new Vo(!0,a)}this.buffer.append(s.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Vo(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let s=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(s.getNewPosition()),s.isFNC1()){let a=new Uo(this.current.getPosition(),this.buffer.toString());return new Vo(!0,a)}this.buffer.append(s.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Vo(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let s=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(s.getNewPosition()),s.isFNC1()){let a=new Uo(this.current.getPosition(),this.buffer.toString());return new Vo(!0,a)}this.buffer.append(s.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Vo(!1)}isStillIsoIec646(s){if(s+5>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(s,5);if(a>=5&&a<16)return!0;if(s+7>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(s,7);if(l>=64&&l<116)return!0;if(s+8>this.information.getSize())return!1;let u=this.extractNumericValueFromBitArray(s,8);return u>=232&&u<253}decodeIsoIec646(s){let a=this.extractNumericValueFromBitArray(s,5);if(a===15)return new Or(s+5,Or.FNC1);if(a>=5&&a<15)return new Or(s+5,"0"+(a-5));let l=this.extractNumericValueFromBitArray(s,7);if(l>=64&&l<90)return new Or(s+7,""+(l+1));if(l>=90&&l<116)return new Or(s+7,""+(l+7));let u=this.extractNumericValueFromBitArray(s,8),d;switch(u){case 232:d="!";break;case 233:d='"';break;case 234:d="%";break;case 235:d="&";break;case 236:d="'";break;case 237:d="(";break;case 238:d=")";break;case 239:d="*";break;case 240:d="+";break;case 241:d=",";break;case 242:d="-";break;case 243:d=".";break;case 244:d="/";break;case 245:d=":";break;case 246:d=";";break;case 247:d="<";break;case 248:d="=";break;case 249:d=">";break;case 250:d="?";break;case 251:d="_";break;case 252:d=" ";break;default:throw new H}return new Or(s+8,d)}isStillAlpha(s){if(s+5>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(s,5);if(a>=5&&a<16)return!0;if(s+6>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(s,6);return l>=16&&l<63}decodeAlphanumeric(s){let a=this.extractNumericValueFromBitArray(s,5);if(a===15)return new Or(s+5,Or.FNC1);if(a>=5&&a<15)return new Or(s+5,"0"+(a-5));let l=this.extractNumericValueFromBitArray(s,6);if(l>=32&&l<58)return new Or(s+6,""+(l+33));let u;switch(l){case 58:u="*";break;case 59:u=",";break;case 60:u="-";break;case 61:u=".";break;case 62:u="/";break;default:throw new bi("Decoding invalid alphanumeric value: "+l)}return new Or(s+6,u)}isAlphaTo646ToAlphaLatch(s){if(s+1>this.information.getSize())return!1;for(let a=0;a<5&&a+s<this.information.getSize();++a)if(a===2){if(!this.information.get(s+2))return!1}else if(this.information.get(s+a))return!1;return!0}isAlphaOr646ToNumericLatch(s){if(s+3>this.information.getSize())return!1;for(let a=s;a<s+3;++a)if(this.information.get(a))return!1;return!0}isNumericToAlphaNumericLatch(s){if(s+1>this.information.getSize())return!1;for(let a=0;a<4&&a+s<this.information.getSize();++a)if(this.information.get(s+a))return!1;return!0}}class _p{constructor(s){this.information=s,this.generalDecoder=new Ns(s)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}let Rr=(()=>{class _ extends _p{constructor(a){super(a)}encodeCompressedGtin(a,l){a.append("(01)");let u=a.length();a.append("9"),this.encodeCompressedGtinWithoutAI(a,l,u)}encodeCompressedGtinWithoutAI(a,l,u){for(let d=0;d<4;++d){let f=this.getGeneralDecoder().extractNumericValueFromBitArray(l+10*d,10);f/100===0&&a.append("0"),f/10===0&&a.append("0"),a.append(f)}_.appendCheckDigit(a,u)}static appendCheckDigit(a,l){let u=0;for(let d=0;d<13;d++){let f=a.charAt(d+l).charCodeAt(0)-48;u+=d&1?f:3*f}u=10-u%10,u===10&&(u=0),a.append(u)}}return _.GTIN_SIZE=40,_})(),ST=(()=>{class _ extends Rr{constructor(a){super(a)}parseInformation(){let a=new yt;a.append("(01)");let l=a.length(),u=this.getGeneralDecoder().extractNumericValueFromBitArray(_.HEADER_SIZE,4);return a.append(u),this.encodeCompressedGtinWithoutAI(a,_.HEADER_SIZE+4,l),this.getGeneralDecoder().decodeAllCodes(a,_.HEADER_SIZE+44)}}return _.HEADER_SIZE=4,_})(),DT=(()=>{class _ extends _p{constructor(a){super(a)}parseInformation(){let a=new yt;return this.getGeneralDecoder().decodeAllCodes(a,_.HEADER_SIZE)}}return _.HEADER_SIZE=5,_})();class yu extends Rr{constructor(s){super(s)}encodeCompressedWeight(s,a,l){let u=this.getGeneralDecoder().extractNumericValueFromBitArray(a,l);this.addWeightCode(s,u);let d=this.checkWeight(u),f=1e5;for(let p=0;p<5;++p)d/f===0&&s.append("0"),f/=10;s.append(d)}}let f_=(()=>{class _ extends yu{constructor(a){super(a)}parseInformation(){if(this.getInformation().getSize()!=_.HEADER_SIZE+yu.GTIN_SIZE+_.WEIGHT_SIZE)throw new U;let a=new yt;return this.encodeCompressedGtin(a,_.HEADER_SIZE),this.encodeCompressedWeight(a,_.HEADER_SIZE+yu.GTIN_SIZE,_.WEIGHT_SIZE),a.toString()}}return _.HEADER_SIZE=5,_.WEIGHT_SIZE=15,_})();class AT extends f_{constructor(s){super(s)}addWeightCode(s,a){s.append("(3103)")}checkWeight(s){return s}}class TT extends f_{constructor(s){super(s)}addWeightCode(s,a){a<1e4?s.append("(3202)"):s.append("(3203)")}checkWeight(s){return s<1e4?s:s-1e4}}let MT=(()=>{class _ extends Rr{constructor(a){super(a)}parseInformation(){if(this.getInformation().getSize()<_.HEADER_SIZE+Rr.GTIN_SIZE)throw new U;let a=new yt;this.encodeCompressedGtin(a,_.HEADER_SIZE);let l=this.getGeneralDecoder().extractNumericValueFromBitArray(_.HEADER_SIZE+Rr.GTIN_SIZE,_.LAST_DIGIT_SIZE);a.append("(392"),a.append(l),a.append(")");let u=this.getGeneralDecoder().decodeGeneralPurposeField(_.HEADER_SIZE+Rr.GTIN_SIZE+_.LAST_DIGIT_SIZE,null);return a.append(u.getNewString()),a.toString()}}return _.HEADER_SIZE=8,_.LAST_DIGIT_SIZE=2,_})(),NT=(()=>{class _ extends Rr{constructor(a){super(a)}parseInformation(){if(this.getInformation().getSize()<_.HEADER_SIZE+Rr.GTIN_SIZE)throw new U;let a=new yt;this.encodeCompressedGtin(a,_.HEADER_SIZE);let l=this.getGeneralDecoder().extractNumericValueFromBitArray(_.HEADER_SIZE+Rr.GTIN_SIZE,_.LAST_DIGIT_SIZE);a.append("(393"),a.append(l),a.append(")");let u=this.getGeneralDecoder().extractNumericValueFromBitArray(_.HEADER_SIZE+Rr.GTIN_SIZE+_.LAST_DIGIT_SIZE,_.FIRST_THREE_DIGITS_SIZE);u/100==0&&a.append("0"),u/10==0&&a.append("0"),a.append(u);let d=this.getGeneralDecoder().decodeGeneralPurposeField(_.HEADER_SIZE+Rr.GTIN_SIZE+_.LAST_DIGIT_SIZE+_.FIRST_THREE_DIGITS_SIZE,null);return a.append(d.getNewString()),a.toString()}}return _.HEADER_SIZE=8,_.LAST_DIGIT_SIZE=2,_.FIRST_THREE_DIGITS_SIZE=10,_})(),Ji=(()=>{class _ extends yu{constructor(a,l,u){super(a),this.dateCode=u,this.firstAIdigits=l}parseInformation(){if(this.getInformation().getSize()!=_.HEADER_SIZE+_.GTIN_SIZE+_.WEIGHT_SIZE+_.DATE_SIZE)throw new U;let a=new yt;return this.encodeCompressedGtin(a,_.HEADER_SIZE),this.encodeCompressedWeight(a,_.HEADER_SIZE+_.GTIN_SIZE,_.WEIGHT_SIZE),this.encodeCompressedDate(a,_.HEADER_SIZE+_.GTIN_SIZE+_.WEIGHT_SIZE),a.toString()}encodeCompressedDate(a,l){let u=this.getGeneralDecoder().extractNumericValueFromBitArray(l,_.DATE_SIZE);if(u==38400)return;a.append("("),a.append(this.dateCode),a.append(")");let d=u%32;u/=32;let f=u%12+1;u/=12;let p=u;p/10==0&&a.append("0"),a.append(p),f/10==0&&a.append("0"),a.append(f),d/10==0&&a.append("0"),a.append(d)}addWeightCode(a,l){a.append("("),a.append(this.firstAIdigits),a.append(l/1e5),a.append(")")}checkWeight(a){return a%1e5}}return _.HEADER_SIZE=8,_.WEIGHT_SIZE=20,_.DATE_SIZE=16,_})();function h_(_){try{if(_.get(1))return new ST(_);if(!_.get(2))return new DT(_);switch(Ns.extractNumericValueFromBitArray(_,1,4)){case 4:return new AT(_);case 5:return new TT(_)}switch(Ns.extractNumericValueFromBitArray(_,1,5)){case 12:return new MT(_);case 13:return new NT(_)}switch(Ns.extractNumericValueFromBitArray(_,1,7)){case 56:return new Ji(_,"310","11");case 57:return new Ji(_,"320","11");case 58:return new Ji(_,"310","13");case 59:return new Ji(_,"320","13");case 60:return new Ji(_,"310","15");case 61:return new Ji(_,"320","15");case 62:return new Ji(_,"310","17");case 63:return new Ji(_,"320","17")}}catch(s){throw console.log(s),new bi("unknown decoder: "+_)}}class eo{constructor(s,a,l,u){this.leftchar=s,this.rightchar=a,this.finderpattern=l,this.maybeLast=u}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(s,a){return s instanceof eo?eo.equalsOrNull(s.leftchar,a.leftchar)&&eo.equalsOrNull(s.rightchar,a.rightchar)&&eo.equalsOrNull(s.finderpattern,a.finderpattern):!1}static equalsOrNull(s,a){return s===null?a===null:eo.equals(s,a)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class wp{constructor(s,a,l){this.pairs=s,this.rowNumber=a,this.wasReversed=l}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(s){return this.checkEqualitity(this,s)}toString(){return"{ "+this.pairs+" }"}equals(s,a){return s instanceof wp?this.checkEqualitity(s,a)&&s.wasReversed===a.wasReversed:!1}checkEqualitity(s,a){if(!s||!a)return;let l;return s.forEach((u,d)=>{a.forEach(f=>{u.getLeftChar().getValue()===f.getLeftChar().getValue()&&u.getRightChar().getValue()===f.getRightChar().getValue()&&u.getFinderPatter().getValue()===f.getFinderPatter().getValue()&&(l=!0)})}),l}}class z extends Bo{constructor(s){super(...arguments),this.pairs=new Array(z.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=s===!0}decodeRow(s,a,l){this.pairs.length=0,this.startFromEven=!1;try{return z.constructResult(this.decodeRow2pairs(s,a))}catch(u){this.verbose&&console.log(u)}return this.pairs.length=0,this.startFromEven=!0,z.constructResult(this.decodeRow2pairs(s,a))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(s,a){let l=!1;for(;!l;)try{this.pairs.push(this.retrieveNextPair(a,this.pairs,s))}catch(d){if(d instanceof U){if(!this.pairs.length)throw new U;l=!0}}if(this.checkChecksum())return this.pairs;let u;if(this.rows.length?u=!0:u=!1,this.storeRow(s,!1),u){let d=this.checkRowsBoolean(!1);if(d!=null||(d=this.checkRowsBoolean(!0),d!=null))return d}throw new U}checkRowsBoolean(s){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,s&&(this.rows=this.rows.reverse());let a=null;try{a=this.checkRows(new Array,0)}catch(l){this.verbose&&console.log(l)}return s&&(this.rows=this.rows.reverse()),a}checkRows(s,a){for(let l=a;l<this.rows.length;l++){let u=this.rows[l];this.pairs.length=0;for(let f of s)this.pairs.push(f.getPairs());if(this.pairs.push(u.getPairs()),!z.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let d=new Array(s);d.push(u);try{return this.checkRows(d,l+1)}catch(f){this.verbose&&console.log(f)}}throw new U}static isValidSequence(s){for(let a of z.FINDER_PATTERN_SEQUENCES){if(s.length>a.length)continue;let l=!0;for(let u=0;u<s.length;u++)if(s[u].getFinderPattern().getValue()!=a[u]){l=!1;break}if(l)return!0}return!1}storeRow(s,a){let l=0,u=!1,d=!1;for(;l<this.rows.length;){let f=this.rows[l];if(f.getRowNumber()>s){d=f.isEquivalent(this.pairs);break}u=f.isEquivalent(this.pairs),l++}d||u||z.isPartialRow(this.pairs,this.rows)||(this.rows.push(l,new wp(this.pairs,s,a)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(s,a){for(let l of a)if(l.getPairs().length!==s.length){for(let u of l.getPairs())for(let d of s)if(eo.equals(u,d))break}}static isPartialRow(s,a){for(let l of a){let u=!0;for(let d of s){let f=!1;for(let p of l.getPairs())if(d.equals(p)){f=!0;break}if(!f){u=!1;break}}if(u)return!0}return!1}getRows(){return this.rows}static constructResult(s){let a=IT.buildBitArray(s),u=h_(a).parseInformation(),d=s[0].getFinderPattern().getResultPoints(),f=s[s.length-1].getFinderPattern().getResultPoints(),p=[d[0],d[1],f[0],f[1]];return new Fn(u,null,null,p,Ce.RSS_EXPANDED,null)}checkChecksum(){let s=this.pairs.get(0),a=s.getLeftChar(),l=s.getRightChar();if(l==null)return!1;let u=l.getChecksumPortion(),d=2;for(let p=1;p<this.pairs.size();++p){let y=this.pairs.get(p);u+=y.getLeftChar().getChecksumPortion(),d++;let C=y.getRightChar();C!=null&&(u+=C.getChecksumPortion(),d++)}return u%=211,211*(d-4)+u==a.getValue()}static getNextSecondBar(s,a){let l;return s.get(a)?(l=s.getNextUnset(a),l=s.getNextSet(l)):(l=s.getNextSet(a),l=s.getNextUnset(l)),l}retrieveNextPair(s,a,l){let u=a.length%2==0;this.startFromEven&&(u=!u);let d,f=!0,p=-1;do this.findNextPair(s,a,p),d=this.parseFoundFinderPattern(s,l,u),d==null?p=z.getNextSecondBar(s,this.startEnd[0]):f=!1;while(f);let y=this.decodeDataCharacter(s,d,u,!0);if(!this.isEmptyPair(a)&&a[a.length-1].mustBeLast())throw new U;let C;try{C=this.decodeDataCharacter(s,d,u,!1)}catch(w){C=null,this.verbose&&console.log(w)}return new eo(y,C,d,!0)}isEmptyPair(s){return s.length===0}findNextPair(s,a,l){let u=this.getDecodeFinderCounters();u[0]=0,u[1]=0,u[2]=0,u[3]=0;let d=s.getSize(),f;l>=0?f=l:this.isEmptyPair(a)?f=0:f=a[a.length-1].getFinderPattern().getStartEnd()[1];let p=a.length%2!=0;this.startFromEven&&(p=!p);let y=!1;for(;f<d&&(y=!s.get(f),!!y);)f++;let C=0,w=f;for(let x=f;x<d;x++)if(s.get(x)!=y)u[C]++;else{if(C==3){if(p&&z.reverseCounters(u),z.isFinderPattern(u)){this.startEnd[0]=w,this.startEnd[1]=x;return}p&&z.reverseCounters(u),w+=u[0]+u[1],u[0]=u[2],u[1]=u[3],u[2]=0,u[3]=0,C--}else C++;u[C]=1,y=!y}throw new U}static reverseCounters(s){let a=s.length;for(let l=0;l<a/2;++l){let u=s[l];s[l]=s[a-l-1],s[a-l-1]=u}}parseFoundFinderPattern(s,a,l){let u,d,f;if(l){let C=this.startEnd[0]-1;for(;C>=0&&!s.get(C);)C--;C++,u=this.startEnd[0]-C,d=C,f=this.startEnd[1]}else d=this.startEnd[0],f=s.getNextUnset(this.startEnd[1]+1),u=f-this.startEnd[1];let p=this.getDecodeFinderCounters();A.arraycopy(p,0,p,1,p.length-1),p[0]=u;let y;try{y=this.parseFinderValue(p,z.FINDER_PATTERNS)}catch{return null}return new mu(y,[d,f],d,f,a)}decodeDataCharacter(s,a,l,u){let d=this.getDataCharacterCounters();for(let wt=0;wt<d.length;wt++)d[wt]=0;if(u)z.recordPatternInReverse(s,a.getStartEnd()[0],d);else{z.recordPattern(s,a.getStartEnd()[1],d);for(let wt=0,xn=d.length-1;wt<xn;wt++,xn--){let ir=d[wt];d[wt]=d[xn],d[xn]=ir}}let f=17,p=et.sum(new Int32Array(d))/f,y=(a.getStartEnd()[1]-a.getStartEnd()[0])/15;if(Math.abs(p-y)/y>.3)throw new U;let C=this.getOddCounts(),w=this.getEvenCounts(),x=this.getOddRoundingErrors(),E=this.getEvenRoundingErrors();for(let wt=0;wt<d.length;wt++){let xn=1*d[wt]/p,ir=xn+.5;if(ir<1){if(xn<.3)throw new U;ir=1}else if(ir>8){if(xn>8.7)throw new U;ir=8}let ks=wt/2;wt&1?(w[ks]=ir,E[ks]=xn-ir):(C[ks]=ir,x[ks]=xn-ir)}this.adjustOddEvenCounts(f);let D=4*a.getValue()+(l?0:2)+(u?0:1)-1,M=0,O=0;for(let wt=C.length-1;wt>=0;wt--){if(z.isNotA1left(a,l,u)){let xn=z.WEIGHTS[D][2*wt];O+=C[wt]*xn}M+=C[wt]}let k=0;for(let wt=w.length-1;wt>=0;wt--)if(z.isNotA1left(a,l,u)){let xn=z.WEIGHTS[D][2*wt+1];k+=w[wt]*xn}let F=O+k;if(M&1||M>13||M<4)throw new U;let X=(13-M)/2,re=z.SYMBOL_WIDEST[X],V=9-re,ze=ei.getRSSvalue(C,re,!0),Ne=ei.getRSSvalue(w,V,!1),Yn=z.EVEN_TOTAL_SUBSET[X],kr=z.GSUM[X],Xn=ze*Yn+Ne+kr;return new Ts(Xn,F)}static isNotA1left(s,a,l){return!(s.getValue()==0&&a&&l)}adjustOddEvenCounts(s){let a=et.sum(new Int32Array(this.getOddCounts())),l=et.sum(new Int32Array(this.getEvenCounts())),u=!1,d=!1;a>13?d=!0:a<4&&(u=!0);let f=!1,p=!1;l>13?p=!0:l<4&&(f=!0);let y=a+l-s,C=(a&1)==1,w=(l&1)==0;if(y==1)if(C){if(w)throw new U;d=!0}else{if(!w)throw new U;p=!0}else if(y==-1)if(C){if(w)throw new U;u=!0}else{if(!w)throw new U;f=!0}else if(y==0){if(C){if(!w)throw new U;a<l?(u=!0,p=!0):(d=!0,f=!0)}else if(w)throw new U}else throw new U;if(u){if(d)throw new U;z.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(d&&z.decrement(this.getOddCounts(),this.getOddRoundingErrors()),f){if(p)throw new U;z.increment(this.getEvenCounts(),this.getOddRoundingErrors())}p&&z.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}z.SYMBOL_WIDEST=[7,5,4,3,1],z.EVEN_TOTAL_SUBSET=[4,20,52,104,204],z.GSUM=[0,348,1388,2948,3988],z.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],z.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],z.FINDER_PAT_A=0,z.FINDER_PAT_B=1,z.FINDER_PAT_C=2,z.FINDER_PAT_D=3,z.FINDER_PAT_E=4,z.FINDER_PAT_F=5,z.FINDER_PATTERN_SEQUENCES=[[z.FINDER_PAT_A,z.FINDER_PAT_A],[z.FINDER_PAT_A,z.FINDER_PAT_B,z.FINDER_PAT_B],[z.FINDER_PAT_A,z.FINDER_PAT_C,z.FINDER_PAT_B,z.FINDER_PAT_D],[z.FINDER_PAT_A,z.FINDER_PAT_E,z.FINDER_PAT_B,z.FINDER_PAT_D,z.FINDER_PAT_C],[z.FINDER_PAT_A,z.FINDER_PAT_E,z.FINDER_PAT_B,z.FINDER_PAT_D,z.FINDER_PAT_D,z.FINDER_PAT_F],[z.FINDER_PAT_A,z.FINDER_PAT_E,z.FINDER_PAT_B,z.FINDER_PAT_D,z.FINDER_PAT_E,z.FINDER_PAT_F,z.FINDER_PAT_F],[z.FINDER_PAT_A,z.FINDER_PAT_A,z.FINDER_PAT_B,z.FINDER_PAT_B,z.FINDER_PAT_C,z.FINDER_PAT_C,z.FINDER_PAT_D,z.FINDER_PAT_D],[z.FINDER_PAT_A,z.FINDER_PAT_A,z.FINDER_PAT_B,z.FINDER_PAT_B,z.FINDER_PAT_C,z.FINDER_PAT_C,z.FINDER_PAT_D,z.FINDER_PAT_E,z.FINDER_PAT_E],[z.FINDER_PAT_A,z.FINDER_PAT_A,z.FINDER_PAT_B,z.FINDER_PAT_B,z.FINDER_PAT_C,z.FINDER_PAT_C,z.FINDER_PAT_D,z.FINDER_PAT_E,z.FINDER_PAT_F,z.FINDER_PAT_F],[z.FINDER_PAT_A,z.FINDER_PAT_A,z.FINDER_PAT_B,z.FINDER_PAT_B,z.FINDER_PAT_C,z.FINDER_PAT_D,z.FINDER_PAT_D,z.FINDER_PAT_E,z.FINDER_PAT_E,z.FINDER_PAT_F,z.FINDER_PAT_F]],z.MAX_PAIRS=11;class OT extends Ts{constructor(s,a,l){super(s,a),this.count=0,this.finderPattern=l}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Ft extends Bo{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(s,a,l){let u=this.decodePair(a,!1,s,l);Ft.addOrTally(this.possibleLeftPairs,u),a.reverse();let d=this.decodePair(a,!0,s,l);Ft.addOrTally(this.possibleRightPairs,d),a.reverse();for(let f of this.possibleLeftPairs)if(f.getCount()>1){for(let p of this.possibleRightPairs)if(p.getCount()>1&&Ft.checkChecksum(f,p))return Ft.constructResult(f,p)}throw new U}static addOrTally(s,a){if(a==null)return;let l=!1;for(let u of s)if(u.getValue()===a.getValue()){u.incrementCount(),l=!0;break}l||s.push(a)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(s,a){let l=4537077*s.getValue()+a.getValue(),u=new String(l).toString(),d=new yt;for(let C=13-u.length;C>0;C--)d.append("0");d.append(u);let f=0;for(let C=0;C<13;C++){let w=d.charAt(C).charCodeAt(0)-48;f+=C&1?w:3*w}f=10-f%10,f===10&&(f=0),d.append(f.toString());let p=s.getFinderPattern().getResultPoints(),y=a.getFinderPattern().getResultPoints();return new Fn(d.toString(),null,0,[p[0],p[1],y[0],y[1]],Ce.RSS_14,new Date().getTime())}static checkChecksum(s,a){let l=(s.getChecksumPortion()+16*a.getChecksumPortion())%79,u=9*s.getFinderPattern().getValue()+a.getFinderPattern().getValue();return u>72&&u--,u>8&&u--,l===u}decodePair(s,a,l,u){try{let d=this.findFinderPattern(s,a),f=this.parseFoundFinderPattern(s,l,a,d),p=u==null?null:u.get(ge.NEED_RESULT_POINT_CALLBACK);if(p!=null){let w=(d[0]+d[1])/2;a&&(w=s.getSize()-1-w),p.foundPossibleResultPoint(new ue(w,l))}let y=this.decodeDataCharacter(s,f,!0),C=this.decodeDataCharacter(s,f,!1);return new OT(1597*y.getValue()+C.getValue(),y.getChecksumPortion()+4*C.getChecksumPortion(),f)}catch{return null}}decodeDataCharacter(s,a,l){let u=this.getDataCharacterCounters();for(let k=0;k<u.length;k++)u[k]=0;if(l)$t.recordPatternInReverse(s,a.getStartEnd()[0],u);else{$t.recordPattern(s,a.getStartEnd()[1]+1,u);for(let k=0,F=u.length-1;k<F;k++,F--){let X=u[k];u[k]=u[F],u[F]=X}}let d=l?16:15,f=et.sum(new Int32Array(u))/d,p=this.getOddCounts(),y=this.getEvenCounts(),C=this.getOddRoundingErrors(),w=this.getEvenRoundingErrors();for(let k=0;k<u.length;k++){let F=u[k]/f,X=Math.floor(F+.5);X<1?X=1:X>8&&(X=8);let re=Math.floor(k/2);k&1?(y[re]=X,w[re]=F-X):(p[re]=X,C[re]=F-X)}this.adjustOddEvenCounts(l,d);let x=0,E=0;for(let k=p.length-1;k>=0;k--)E*=9,E+=p[k],x+=p[k];let D=0,M=0;for(let k=y.length-1;k>=0;k--)D*=9,D+=y[k],M+=y[k];let O=E+3*D;if(l){if(x&1||x>12||x<4)throw new U;let k=(12-x)/2,F=Ft.OUTSIDE_ODD_WIDEST[k],X=9-F,re=ei.getRSSvalue(p,F,!1),V=ei.getRSSvalue(y,X,!0),ze=Ft.OUTSIDE_EVEN_TOTAL_SUBSET[k],Ne=Ft.OUTSIDE_GSUM[k];return new Ts(re*ze+V+Ne,O)}else{if(M&1||M>10||M<4)throw new U;let k=(10-M)/2,F=Ft.INSIDE_ODD_WIDEST[k],X=9-F,re=ei.getRSSvalue(p,F,!0),V=ei.getRSSvalue(y,X,!1),ze=Ft.INSIDE_ODD_TOTAL_SUBSET[k],Ne=Ft.INSIDE_GSUM[k];return new Ts(V*ze+re+Ne,O)}}findFinderPattern(s,a){let l=this.getDecodeFinderCounters();l[0]=0,l[1]=0,l[2]=0,l[3]=0;let u=s.getSize(),d=!1,f=0;for(;f<u&&(d=!s.get(f),a!==d);)f++;let p=0,y=f;for(let C=f;C<u;C++)if(s.get(C)!==d)l[p]++;else{if(p===3){if(Bo.isFinderPattern(l))return[y,C];y+=l[0]+l[1],l[0]=l[2],l[1]=l[3],l[2]=0,l[3]=0,p--}else p++;l[p]=1,d=!d}throw new U}parseFoundFinderPattern(s,a,l,u){let d=s.get(u[0]),f=u[0]-1;for(;f>=0&&d!==s.get(f);)f--;f++;let p=u[0]-f,y=this.getDecodeFinderCounters(),C=new Int32Array(y.length);A.arraycopy(y,0,C,1,y.length-1),C[0]=p;let w=this.parseFinderValue(C,Ft.FINDER_PATTERNS),x=f,E=u[1];return l&&(x=s.getSize()-1-x,E=s.getSize()-1-E),new mu(w,[f,u[1]],x,E,a)}adjustOddEvenCounts(s,a){let l=et.sum(new Int32Array(this.getOddCounts())),u=et.sum(new Int32Array(this.getEvenCounts())),d=!1,f=!1,p=!1,y=!1;s?(l>12?f=!0:l<4&&(d=!0),u>12?y=!0:u<4&&(p=!0)):(l>11?f=!0:l<5&&(d=!0),u>10?y=!0:u<4&&(p=!0));let C=l+u-a,w=(l&1)===(s?1:0),x=(u&1)===1;if(C===1)if(w){if(x)throw new U;f=!0}else{if(!x)throw new U;y=!0}else if(C===-1)if(w){if(x)throw new U;d=!0}else{if(!x)throw new U;p=!0}else if(C===0){if(w){if(!x)throw new U;l<u?(d=!0,y=!0):(f=!0,p=!0)}else if(x)throw new U}else throw new U;if(d){if(f)throw new U;Bo.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(f&&Bo.decrement(this.getOddCounts(),this.getOddRoundingErrors()),p){if(y)throw new U;Bo.increment(this.getEvenCounts(),this.getOddRoundingErrors())}y&&Bo.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Ft.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Ft.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Ft.OUTSIDE_GSUM=[0,161,961,2015,2715],Ft.INSIDE_GSUM=[0,336,1036,1516],Ft.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Ft.INSIDE_ODD_WIDEST=[2,4,6,8],Ft.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Os extends $t{constructor(s,a){super(),this.readers=[],this.verbose=a===!0;let l=s?s.get(ge.POSSIBLE_FORMATS):null,u=s&&s.get(ge.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;l?((l.includes(Ce.EAN_13)||l.includes(Ce.UPC_A)||l.includes(Ce.EAN_8)||l.includes(Ce.UPC_E))&&this.readers.push(new yp(s)),l.includes(Ce.CODE_39)&&this.readers.push(new gp(u)),l.includes(Ce.CODE_128)&&this.readers.push(new te),l.includes(Ce.ITF)&&this.readers.push(new Ct),l.includes(Ce.RSS_14)&&this.readers.push(new Ft),l.includes(Ce.RSS_EXPANDED)&&this.readers.push(new z(this.verbose))):(this.readers.push(new yp(s)),this.readers.push(new gp),this.readers.push(new yp(s)),this.readers.push(new te),this.readers.push(new Ct),this.readers.push(new Ft),this.readers.push(new z(this.verbose)))}decodeRow(s,a,l){for(let u=0;u<this.readers.length;u++)try{return this.readers[u].decodeRow(s,a,l)}catch{}throw new U}reset(){this.readers.forEach(s=>s.reset())}}class RT extends Fo{constructor(s=500,a){super(new Os(a),s,a)}}class ut{constructor(s,a,l){this.ecCodewords=s,this.ecBlocks=[a],l&&this.ecBlocks.push(l)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class ct{constructor(s,a){this.count=s,this.dataCodewords=a}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Ze{constructor(s,a,l,u,d,f){this.versionNumber=s,this.symbolSizeRows=a,this.symbolSizeColumns=l,this.dataRegionSizeRows=u,this.dataRegionSizeColumns=d,this.ecBlocks=f;let p=0,y=f.getECCodewords(),C=f.getECBlocks();for(let w of C)p+=w.getCount()*(w.getDataCodewords()+y);this.totalCodewords=p}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(s,a){if(s&1||a&1)throw new H;for(let l of Ze.VERSIONS)if(l.symbolSizeRows===s&&l.symbolSizeColumns===a)return l;throw new H}toString(){return""+this.versionNumber}static buildVersions(){return[new Ze(1,10,10,8,8,new ut(5,new ct(1,3))),new Ze(2,12,12,10,10,new ut(7,new ct(1,5))),new Ze(3,14,14,12,12,new ut(10,new ct(1,8))),new Ze(4,16,16,14,14,new ut(12,new ct(1,12))),new Ze(5,18,18,16,16,new ut(14,new ct(1,18))),new Ze(6,20,20,18,18,new ut(18,new ct(1,22))),new Ze(7,22,22,20,20,new ut(20,new ct(1,30))),new Ze(8,24,24,22,22,new ut(24,new ct(1,36))),new Ze(9,26,26,24,24,new ut(28,new ct(1,44))),new Ze(10,32,32,14,14,new ut(36,new ct(1,62))),new Ze(11,36,36,16,16,new ut(42,new ct(1,86))),new Ze(12,40,40,18,18,new ut(48,new ct(1,114))),new Ze(13,44,44,20,20,new ut(56,new ct(1,144))),new Ze(14,48,48,22,22,new ut(68,new ct(1,174))),new Ze(15,52,52,24,24,new ut(42,new ct(2,102))),new Ze(16,64,64,14,14,new ut(56,new ct(2,140))),new Ze(17,72,72,16,16,new ut(36,new ct(4,92))),new Ze(18,80,80,18,18,new ut(48,new ct(4,114))),new Ze(19,88,88,20,20,new ut(56,new ct(4,144))),new Ze(20,96,96,22,22,new ut(68,new ct(4,174))),new Ze(21,104,104,24,24,new ut(56,new ct(6,136))),new Ze(22,120,120,18,18,new ut(68,new ct(6,175))),new Ze(23,132,132,20,20,new ut(62,new ct(8,163))),new Ze(24,144,144,22,22,new ut(62,new ct(8,156),new ct(2,155))),new Ze(25,8,18,6,16,new ut(7,new ct(1,5))),new Ze(26,8,32,6,14,new ut(11,new ct(1,10))),new Ze(27,12,26,10,24,new ut(14,new ct(1,16))),new Ze(28,12,36,10,16,new ut(18,new ct(1,22))),new Ze(29,16,36,14,16,new ut(24,new ct(1,32))),new Ze(30,16,48,14,22,new ut(28,new ct(1,49)))]}}Ze.VERSIONS=Ze.buildVersions();class vp{constructor(s){let a=s.getHeight();if(a<8||a>144||a&1)throw new H;this.version=vp.readVersion(s),this.mappingBitMatrix=this.extractDataRegion(s),this.readMappingMatrix=new cn(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(s){let a=s.getHeight(),l=s.getWidth();return Ze.getVersionForDimensions(a,l)}readCodewords(){let s=new Int8Array(this.version.getTotalCodewords()),a=0,l=4,u=0,d=this.mappingBitMatrix.getHeight(),f=this.mappingBitMatrix.getWidth(),p=!1,y=!1,C=!1,w=!1;do if(l===d&&u===0&&!p)s[a++]=this.readCorner1(d,f)&255,l-=2,u+=2,p=!0;else if(l===d-2&&u===0&&f&3&&!y)s[a++]=this.readCorner2(d,f)&255,l-=2,u+=2,y=!0;else if(l===d+4&&u===2&&!(f&7)&&!C)s[a++]=this.readCorner3(d,f)&255,l-=2,u+=2,C=!0;else if(l===d-2&&u===0&&(f&7)===4&&!w)s[a++]=this.readCorner4(d,f)&255,l-=2,u+=2,w=!0;else{do l<d&&u>=0&&!this.readMappingMatrix.get(u,l)&&(s[a++]=this.readUtah(l,u,d,f)&255),l-=2,u+=2;while(l>=0&&u<f);l+=1,u+=3;do l>=0&&u<f&&!this.readMappingMatrix.get(u,l)&&(s[a++]=this.readUtah(l,u,d,f)&255),l+=2,u-=2;while(l<d&&u>=0);l+=3,u+=1}while(l<d||u<f);if(a!==this.version.getTotalCodewords())throw new H;return s}readModule(s,a,l,u){return s<0&&(s+=l,a+=4-(l+4&7)),a<0&&(a+=u,s+=4-(u+4&7)),this.readMappingMatrix.set(a,s),this.mappingBitMatrix.get(a,s)}readUtah(s,a,l,u){let d=0;return this.readModule(s-2,a-2,l,u)&&(d|=1),d<<=1,this.readModule(s-2,a-1,l,u)&&(d|=1),d<<=1,this.readModule(s-1,a-2,l,u)&&(d|=1),d<<=1,this.readModule(s-1,a-1,l,u)&&(d|=1),d<<=1,this.readModule(s-1,a,l,u)&&(d|=1),d<<=1,this.readModule(s,a-2,l,u)&&(d|=1),d<<=1,this.readModule(s,a-1,l,u)&&(d|=1),d<<=1,this.readModule(s,a,l,u)&&(d|=1),d}readCorner1(s,a){let l=0;return this.readModule(s-1,0,s,a)&&(l|=1),l<<=1,this.readModule(s-1,1,s,a)&&(l|=1),l<<=1,this.readModule(s-1,2,s,a)&&(l|=1),l<<=1,this.readModule(0,a-2,s,a)&&(l|=1),l<<=1,this.readModule(0,a-1,s,a)&&(l|=1),l<<=1,this.readModule(1,a-1,s,a)&&(l|=1),l<<=1,this.readModule(2,a-1,s,a)&&(l|=1),l<<=1,this.readModule(3,a-1,s,a)&&(l|=1),l}readCorner2(s,a){let l=0;return this.readModule(s-3,0,s,a)&&(l|=1),l<<=1,this.readModule(s-2,0,s,a)&&(l|=1),l<<=1,this.readModule(s-1,0,s,a)&&(l|=1),l<<=1,this.readModule(0,a-4,s,a)&&(l|=1),l<<=1,this.readModule(0,a-3,s,a)&&(l|=1),l<<=1,this.readModule(0,a-2,s,a)&&(l|=1),l<<=1,this.readModule(0,a-1,s,a)&&(l|=1),l<<=1,this.readModule(1,a-1,s,a)&&(l|=1),l}readCorner3(s,a){let l=0;return this.readModule(s-1,0,s,a)&&(l|=1),l<<=1,this.readModule(s-1,a-1,s,a)&&(l|=1),l<<=1,this.readModule(0,a-3,s,a)&&(l|=1),l<<=1,this.readModule(0,a-2,s,a)&&(l|=1),l<<=1,this.readModule(0,a-1,s,a)&&(l|=1),l<<=1,this.readModule(1,a-3,s,a)&&(l|=1),l<<=1,this.readModule(1,a-2,s,a)&&(l|=1),l<<=1,this.readModule(1,a-1,s,a)&&(l|=1),l}readCorner4(s,a){let l=0;return this.readModule(s-3,0,s,a)&&(l|=1),l<<=1,this.readModule(s-2,0,s,a)&&(l|=1),l<<=1,this.readModule(s-1,0,s,a)&&(l|=1),l<<=1,this.readModule(0,a-2,s,a)&&(l|=1),l<<=1,this.readModule(0,a-1,s,a)&&(l|=1),l<<=1,this.readModule(1,a-1,s,a)&&(l|=1),l<<=1,this.readModule(2,a-1,s,a)&&(l|=1),l<<=1,this.readModule(3,a-1,s,a)&&(l|=1),l}extractDataRegion(s){let a=this.version.getSymbolSizeRows(),l=this.version.getSymbolSizeColumns();if(s.getHeight()!==a)throw new m("Dimension of bitMatrix must match the version size");let u=this.version.getDataRegionSizeRows(),d=this.version.getDataRegionSizeColumns(),f=a/u|0,p=l/d|0,y=f*u,C=p*d,w=new cn(C,y);for(let x=0;x<f;++x){let E=x*u;for(let D=0;D<p;++D){let M=D*d;for(let O=0;O<u;++O){let k=x*(u+2)+1+O,F=E+O;for(let X=0;X<d;++X){let re=D*(d+2)+1+X;if(s.get(re,k)){let V=M+X;w.set(V,F)}}}}}return w}}class bp{constructor(s,a){this.numDataCodewords=s,this.codewords=a}static getDataBlocks(s,a){let l=a.getECBlocks(),u=0,d=l.getECBlocks();for(let O of d)u+=O.getCount();let f=new Array(u),p=0;for(let O of d)for(let k=0;k<O.getCount();k++){let F=O.getDataCodewords(),X=l.getECCodewords()+F;f[p++]=new bp(F,new Uint8Array(X))}let C=f[0].codewords.length-l.getECCodewords(),w=C-1,x=0;for(let O=0;O<w;O++)for(let k=0;k<p;k++)f[k].codewords[O]=s[x++];let E=a.getVersionNumber()===24,D=E?8:p;for(let O=0;O<D;O++)f[O].codewords[C-1]=s[x++];let M=f[0].codewords.length;for(let O=C;O<M;O++)for(let k=0;k<p;k++){let F=E?(k+8)%p:k,X=E&&F>7?O-1:O;f[F].codewords[X]=s[x++]}if(x!==s.length)throw new m;return f}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class xp{constructor(s){this.bytes=s,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(s){if(s<1||s>32||s>this.available())throw new m(""+s);let a=0,l=this.bitOffset,u=this.byteOffset,d=this.bytes;if(l>0){let f=8-l,p=s<f?s:f,y=f-p,C=255>>8-p<<y;a=(d[u]&C)>>y,s-=p,l+=p,l===8&&(l=0,u++)}if(s>0){for(;s>=8;)a=a<<8|d[u]&255,u++,s-=8;if(s>0){let f=8-s,p=255>>f<<f;a=a<<s|(d[u]&p)>>f,l+=s}}return this.bitOffset=l,this.byteOffset=u,a}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var fn=function(_){return _[_.PAD_ENCODE=0]="PAD_ENCODE",_[_.ASCII_ENCODE=1]="ASCII_ENCODE",_[_.C40_ENCODE=2]="C40_ENCODE",_[_.TEXT_ENCODE=3]="TEXT_ENCODE",_[_.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",_[_.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",_[_.BASE256_ENCODE=6]="BASE256_ENCODE",_}(fn||{});class to{static decode(s){let a=new xp(s),l=new yt,u=new yt,d=new Array,f=fn.ASCII_ENCODE;do if(f===fn.ASCII_ENCODE)f=this.decodeAsciiSegment(a,l,u);else{switch(f){case fn.C40_ENCODE:this.decodeC40Segment(a,l);break;case fn.TEXT_ENCODE:this.decodeTextSegment(a,l);break;case fn.ANSIX12_ENCODE:this.decodeAnsiX12Segment(a,l);break;case fn.EDIFACT_ENCODE:this.decodeEdifactSegment(a,l);break;case fn.BASE256_ENCODE:this.decodeBase256Segment(a,l,d);break;default:throw new H}f=fn.ASCII_ENCODE}while(f!==fn.PAD_ENCODE&&a.available()>0);return u.length()>0&&l.append(u.toString()),new rl(s,l.toString(),d.length===0?null:d,null)}static decodeAsciiSegment(s,a,l){let u=!1;do{let d=s.readBits(8);if(d===0)throw new H;if(d<=128)return u&&(d+=128),a.append(String.fromCharCode(d-1)),fn.ASCII_ENCODE;if(d===129)return fn.PAD_ENCODE;if(d<=229){let f=d-130;f<10&&a.append("0"),a.append(""+f)}else switch(d){case 230:return fn.C40_ENCODE;case 231:return fn.BASE256_ENCODE;case 232:a.append("");break;case 233:case 234:break;case 235:u=!0;break;case 236:a.append("[)>05"),l.insert(0,"");break;case 237:a.append("[)>06"),l.insert(0,"");break;case 238:return fn.ANSIX12_ENCODE;case 239:return fn.TEXT_ENCODE;case 240:return fn.EDIFACT_ENCODE;case 241:break;default:if(d!==254||s.available()!==0)throw new H;break}}while(s.available()>0);return fn.ASCII_ENCODE}static decodeC40Segment(s,a){let l=!1,u=[],d=0;do{if(s.available()===8)return;let f=s.readBits(8);if(f===254)return;this.parseTwoBytes(f,s.readBits(8),u);for(let p=0;p<3;p++){let y=u[p];switch(d){case 0:if(y<3)d=y+1;else if(y<this.C40_BASIC_SET_CHARS.length){let C=this.C40_BASIC_SET_CHARS[y];l?(a.append(String.fromCharCode(C.charCodeAt(0)+128)),l=!1):a.append(C)}else throw new H;break;case 1:l?(a.append(String.fromCharCode(y+128)),l=!1):a.append(String.fromCharCode(y)),d=0;break;case 2:if(y<this.C40_SHIFT2_SET_CHARS.length){let C=this.C40_SHIFT2_SET_CHARS[y];l?(a.append(String.fromCharCode(C.charCodeAt(0)+128)),l=!1):a.append(C)}else switch(y){case 27:a.append("");break;case 30:l=!0;break;default:throw new H}d=0;break;case 3:l?(a.append(String.fromCharCode(y+224)),l=!1):a.append(String.fromCharCode(y+96)),d=0;break;default:throw new H}}}while(s.available()>0)}static decodeTextSegment(s,a){let l=!1,u=[],d=0;do{if(s.available()===8)return;let f=s.readBits(8);if(f===254)return;this.parseTwoBytes(f,s.readBits(8),u);for(let p=0;p<3;p++){let y=u[p];switch(d){case 0:if(y<3)d=y+1;else if(y<this.TEXT_BASIC_SET_CHARS.length){let C=this.TEXT_BASIC_SET_CHARS[y];l?(a.append(String.fromCharCode(C.charCodeAt(0)+128)),l=!1):a.append(C)}else throw new H;break;case 1:l?(a.append(String.fromCharCode(y+128)),l=!1):a.append(String.fromCharCode(y)),d=0;break;case 2:if(y<this.TEXT_SHIFT2_SET_CHARS.length){let C=this.TEXT_SHIFT2_SET_CHARS[y];l?(a.append(String.fromCharCode(C.charCodeAt(0)+128)),l=!1):a.append(C)}else switch(y){case 27:a.append("");break;case 30:l=!0;break;default:throw new H}d=0;break;case 3:if(y<this.TEXT_SHIFT3_SET_CHARS.length){let C=this.TEXT_SHIFT3_SET_CHARS[y];l?(a.append(String.fromCharCode(C.charCodeAt(0)+128)),l=!1):a.append(C),d=0}else throw new H;break;default:throw new H}}}while(s.available()>0)}static decodeAnsiX12Segment(s,a){let l=[];do{if(s.available()===8)return;let u=s.readBits(8);if(u===254)return;this.parseTwoBytes(u,s.readBits(8),l);for(let d=0;d<3;d++){let f=l[d];switch(f){case 0:a.append("\r");break;case 1:a.append("*");break;case 2:a.append(">");break;case 3:a.append(" ");break;default:if(f<14)a.append(String.fromCharCode(f+44));else if(f<40)a.append(String.fromCharCode(f+51));else throw new H;break}}}while(s.available()>0)}static parseTwoBytes(s,a,l){let u=(s<<8)+a-1,d=Math.floor(u/1600);l[0]=d,u-=d*1600,d=Math.floor(u/40),l[1]=d,l[2]=u-d*40}static decodeEdifactSegment(s,a){do{if(s.available()<=16)return;for(let l=0;l<4;l++){let u=s.readBits(6);if(u===31){let d=8-s.getBitOffset();d!==8&&s.readBits(d);return}u&32||(u|=64),a.append(String.fromCharCode(u))}}while(s.available()>0)}static decodeBase256Segment(s,a,l){let u=1+s.getByteOffset(),d=this.unrandomize255State(s.readBits(8),u++),f;if(d===0?f=s.available()/8|0:d<250?f=d:f=250*(d-249)+this.unrandomize255State(s.readBits(8),u++),f<0)throw new H;let p=new Uint8Array(f);for(let y=0;y<f;y++){if(s.available()<8)throw new H;p[y]=this.unrandomize255State(s.readBits(8),u++)}l.push(p);try{a.append(On.decode(p,Ie.ISO88591))}catch(y){throw new bi("Platform does not support required encoding: "+y.message)}}static unrandomize255State(s,a){let l=149*a%255+1,u=s-l;return u>=0?u:u+256}}to.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],to.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],to.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],to.TEXT_SHIFT2_SET_CHARS=to.C40_SHIFT2_SET_CHARS,to.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~","\x7F"];class PT{constructor(){this.rsDecoder=new sl(at.DATA_MATRIX_FIELD_256)}decode(s){let a=new vp(s),l=a.getVersion(),u=a.readCodewords(),d=bp.getDataBlocks(u,l),f=0;for(let C of d)f+=C.getNumDataCodewords();let p=new Uint8Array(f),y=d.length;for(let C=0;C<y;C++){let w=d[C],x=w.getCodewords(),E=w.getNumDataCodewords();this.correctErrors(x,E);for(let D=0;D<E;D++)p[D*y+C]=x[D]}return to.decode(p)}correctErrors(s,a){let l=new Int32Array(s);try{this.rsDecoder.decode(l,s.length-a)}catch{throw new b}for(let u=0;u<a;u++)s[u]=l[u]}}class zt{constructor(s){this.image=s,this.rectangleDetector=new hu(this.image)}detect(){let s=this.rectangleDetector.detect(),a=this.detectSolid1(s);if(a=this.detectSolid2(a),a[3]=this.correctTopRight(a),!a[3])throw new U;a=this.shiftToModuleCenter(a);let l=a[0],u=a[1],d=a[2],f=a[3],p=this.transitionsBetween(l,f)+1,y=this.transitionsBetween(d,f)+1;(p&1)===1&&(p+=1),(y&1)===1&&(y+=1),4*p<7*y&&4*y<7*p&&(p=y=Math.max(p,y));let C=zt.sampleGrid(this.image,l,u,d,f,p,y);return new fu(C,[l,u,d,f])}static shiftPoint(s,a,l){let u=(a.getX()-s.getX())/(l+1),d=(a.getY()-s.getY())/(l+1);return new ue(s.getX()+u,s.getY()+d)}static moveAway(s,a,l){let u=s.getX(),d=s.getY();return u<a?u-=1:u+=1,d<l?d-=1:d+=1,new ue(u,d)}detectSolid1(s){let a=s[0],l=s[1],u=s[3],d=s[2],f=this.transitionsBetween(a,l),p=this.transitionsBetween(l,u),y=this.transitionsBetween(u,d),C=this.transitionsBetween(d,a),w=f,x=[d,a,l,u];return w>p&&(w=p,x[0]=a,x[1]=l,x[2]=u,x[3]=d),w>y&&(w=y,x[0]=l,x[1]=u,x[2]=d,x[3]=a),w>C&&(x[0]=u,x[1]=d,x[2]=a,x[3]=l),x}detectSolid2(s){let a=s[0],l=s[1],u=s[2],d=s[3],f=this.transitionsBetween(a,d),p=zt.shiftPoint(l,u,(f+1)*4),y=zt.shiftPoint(u,l,(f+1)*4),C=this.transitionsBetween(p,a),w=this.transitionsBetween(y,d);return C<w?(s[0]=a,s[1]=l,s[2]=u,s[3]=d):(s[0]=l,s[1]=u,s[2]=d,s[3]=a),s}correctTopRight(s){let a=s[0],l=s[1],u=s[2],d=s[3],f=this.transitionsBetween(a,d),p=this.transitionsBetween(l,d),y=zt.shiftPoint(a,l,(p+1)*4),C=zt.shiftPoint(u,l,(f+1)*4);f=this.transitionsBetween(y,d),p=this.transitionsBetween(C,d);let w=new ue(d.getX()+(u.getX()-l.getX())/(f+1),d.getY()+(u.getY()-l.getY())/(f+1)),x=new ue(d.getX()+(a.getX()-l.getX())/(p+1),d.getY()+(a.getY()-l.getY())/(p+1));if(!this.isValid(w))return this.isValid(x)?x:null;if(!this.isValid(x))return w;let E=this.transitionsBetween(y,w)+this.transitionsBetween(C,w),D=this.transitionsBetween(y,x)+this.transitionsBetween(C,x);return E>D?w:x}shiftToModuleCenter(s){let a=s[0],l=s[1],u=s[2],d=s[3],f=this.transitionsBetween(a,d)+1,p=this.transitionsBetween(u,d)+1,y=zt.shiftPoint(a,l,p*4),C=zt.shiftPoint(u,l,f*4);f=this.transitionsBetween(y,d)+1,p=this.transitionsBetween(C,d)+1,(f&1)===1&&(f+=1),(p&1)===1&&(p+=1);let w=(a.getX()+l.getX()+u.getX()+d.getX())/4,x=(a.getY()+l.getY()+u.getY()+d.getY())/4;a=zt.moveAway(a,w,x),l=zt.moveAway(l,w,x),u=zt.moveAway(u,w,x),d=zt.moveAway(d,w,x);let E,D;return y=zt.shiftPoint(a,l,p*4),y=zt.shiftPoint(y,d,f*4),E=zt.shiftPoint(l,a,p*4),E=zt.shiftPoint(E,u,f*4),C=zt.shiftPoint(u,d,p*4),C=zt.shiftPoint(C,l,f*4),D=zt.shiftPoint(d,u,p*4),D=zt.shiftPoint(D,a,f*4),[y,E,C,D]}isValid(s){return s.getX()>=0&&s.getX()<this.image.getWidth()&&s.getY()>0&&s.getY()<this.image.getHeight()}static sampleGrid(s,a,l,u,d,f,p){return Ki.getInstance().sampleGrid(s,f,p,.5,.5,f-.5,.5,f-.5,p-.5,.5,p-.5,a.getX(),a.getY(),d.getX(),d.getY(),u.getX(),u.getY(),l.getX(),l.getY())}transitionsBetween(s,a){let l=Math.trunc(s.getX()),u=Math.trunc(s.getY()),d=Math.trunc(a.getX()),f=Math.trunc(a.getY()),p=Math.abs(f-u)>Math.abs(d-l);if(p){let O=l;l=u,u=O,O=d,d=f,f=O}let y=Math.abs(d-l),C=Math.abs(f-u),w=-y/2,x=u<f?1:-1,E=l<d?1:-1,D=0,M=this.image.get(p?u:l,p?l:u);for(let O=l,k=u;O!==d;O+=E){let F=this.image.get(p?k:O,p?O:k);if(F!==M&&(D++,M=F),w+=C,w>0){if(k===f)break;k+=x,w-=y}}return D}}let Cu=(()=>{class _{constructor(){this.decoder=new PT}decode(a,l=null){let u,d;if(l!=null&&l.has(ge.PURE_BARCODE)){let w=_.extractPureBits(a.getBlackMatrix());u=this.decoder.decode(w),d=_.NO_POINTS}else{let w=new zt(a.getBlackMatrix()).detect();u=this.decoder.decode(w.getBits()),d=w.getPoints()}let f=u.getRawBytes(),p=new Fn(u.getText(),f,8*f.length,d,Ce.DATA_MATRIX,A.currentTimeMillis()),y=u.getByteSegments();y!=null&&p.putMetadata(dn.BYTE_SEGMENTS,y);let C=u.getECLevel();return C!=null&&p.putMetadata(dn.ERROR_CORRECTION_LEVEL,C),p}reset(){}static extractPureBits(a){let l=a.getTopLeftOnBit(),u=a.getBottomRightOnBit();if(l==null||u==null)throw new U;let d=this.moduleSize(l,a),f=l[1],p=u[1],y=l[0],w=(u[0]-y+1)/d,x=(p-f+1)/d;if(w<=0||x<=0)throw new U;let E=d/2;f+=E,y+=E;let D=new cn(w,x);for(let M=0;M<x;M++){let O=f+M*d;for(let k=0;k<w;k++)a.get(y+k*d,O)&&D.set(k,M)}return D}static moduleSize(a,l){let u=l.getWidth(),d=a[0],f=a[1];for(;d<u&&l.get(d,f);)d++;if(d===u)throw new U;let p=d-a[0];if(p===0)throw new U;return p}}return _.NO_POINTS=[],_})();class kT extends Fo{constructor(s=500){super(new Cu,s)}}var ll=function(_){return _[_.L=0]="L",_[_.M=1]="M",_[_.Q=2]="Q",_[_.H=3]="H",_}(ll||{});class xt{constructor(s,a,l){this.value=s,this.stringValue=a,this.bits=l,xt.FOR_BITS.set(l,this),xt.FOR_VALUE.set(s,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(s){switch(s){case"L":return xt.L;case"M":return xt.M;case"Q":return xt.Q;case"H":return xt.H;default:throw new g(s+"not available")}}toString(){return this.stringValue}equals(s){if(!(s instanceof xt))return!1;let a=s;return this.value===a.value}static forBits(s){if(s<0||s>=xt.FOR_BITS.size)throw new m;return xt.FOR_BITS.get(s)}}xt.FOR_BITS=new Map,xt.FOR_VALUE=new Map,xt.L=new xt(ll.L,"L",1),xt.M=new xt(ll.M,"M",0),xt.Q=new xt(ll.Q,"Q",3),xt.H=new xt(ll.H,"H",2);class Pn{constructor(s){this.errorCorrectionLevel=xt.forBits(s>>3&3),this.dataMask=s&7}static numBitsDiffering(s,a){return G.bitCount(s^a)}static decodeFormatInformation(s,a){let l=Pn.doDecodeFormatInformation(s,a);return l!==null?l:Pn.doDecodeFormatInformation(s^Pn.FORMAT_INFO_MASK_QR,a^Pn.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(s,a){let l=Number.MAX_SAFE_INTEGER,u=0;for(let d of Pn.FORMAT_INFO_DECODE_LOOKUP){let f=d[0];if(f===s||f===a)return new Pn(d[1]);let p=Pn.numBitsDiffering(s,f);p<l&&(u=d[1],l=p),s!==a&&(p=Pn.numBitsDiffering(a,f),p<l&&(u=d[1],l=p))}return l<=3?new Pn(u):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(s){if(!(s instanceof Pn))return!1;let a=s;return this.errorCorrectionLevel===a.errorCorrectionLevel&&this.dataMask===a.dataMask}}Pn.FORMAT_INFO_MASK_QR=21522,Pn.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class L{constructor(s,...a){this.ecCodewordsPerBlock=s,this.ecBlocks=a}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let s=0,a=this.ecBlocks;for(let l of a)s+=l.getCount();return s}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class S{constructor(s,a){this.count=s,this.dataCodewords=a}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class pe{constructor(s,a,...l){this.versionNumber=s,this.alignmentPatternCenters=a,this.ecBlocks=l;let u=0,d=l[0].getECCodewordsPerBlock(),f=l[0].getECBlocks();for(let p of f)u+=p.getCount()*(p.getDataCodewords()+d);this.totalCodewords=u}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(s){return this.ecBlocks[s.getValue()]}static getProvisionalVersionForDimension(s){if(s%4!==1)throw new H;try{return this.getVersionForNumber((s-17)/4)}catch{throw new H}}static getVersionForNumber(s){if(s<1||s>40)throw new m;return pe.VERSIONS[s-1]}static decodeVersionInformation(s){let a=Number.MAX_SAFE_INTEGER,l=0;for(let u=0;u<pe.VERSION_DECODE_INFO.length;u++){let d=pe.VERSION_DECODE_INFO[u];if(d===s)return pe.getVersionForNumber(u+7);let f=Pn.numBitsDiffering(s,d);f<a&&(l=u+7,a=f)}return a<=3?pe.getVersionForNumber(l):null}buildFunctionPattern(){let s=this.getDimensionForVersion(),a=new cn(s);a.setRegion(0,0,9,9),a.setRegion(s-8,0,8,9),a.setRegion(0,s-8,9,8);let l=this.alignmentPatternCenters.length;for(let u=0;u<l;u++){let d=this.alignmentPatternCenters[u]-2;for(let f=0;f<l;f++)u===0&&(f===0||f===l-1)||u===l-1&&f===0||a.setRegion(this.alignmentPatternCenters[f]-2,d,5,5)}return a.setRegion(6,9,1,s-17),a.setRegion(9,6,s-17,1),this.versionNumber>6&&(a.setRegion(s-11,0,3,6),a.setRegion(0,s-11,6,3)),a}toString(){return""+this.versionNumber}}pe.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),pe.VERSIONS=[new pe(1,new Int32Array(0),new L(7,new S(1,19)),new L(10,new S(1,16)),new L(13,new S(1,13)),new L(17,new S(1,9))),new pe(2,Int32Array.from([6,18]),new L(10,new S(1,34)),new L(16,new S(1,28)),new L(22,new S(1,22)),new L(28,new S(1,16))),new pe(3,Int32Array.from([6,22]),new L(15,new S(1,55)),new L(26,new S(1,44)),new L(18,new S(2,17)),new L(22,new S(2,13))),new pe(4,Int32Array.from([6,26]),new L(20,new S(1,80)),new L(18,new S(2,32)),new L(26,new S(2,24)),new L(16,new S(4,9))),new pe(5,Int32Array.from([6,30]),new L(26,new S(1,108)),new L(24,new S(2,43)),new L(18,new S(2,15),new S(2,16)),new L(22,new S(2,11),new S(2,12))),new pe(6,Int32Array.from([6,34]),new L(18,new S(2,68)),new L(16,new S(4,27)),new L(24,new S(4,19)),new L(28,new S(4,15))),new pe(7,Int32Array.from([6,22,38]),new L(20,new S(2,78)),new L(18,new S(4,31)),new L(18,new S(2,14),new S(4,15)),new L(26,new S(4,13),new S(1,14))),new pe(8,Int32Array.from([6,24,42]),new L(24,new S(2,97)),new L(22,new S(2,38),new S(2,39)),new L(22,new S(4,18),new S(2,19)),new L(26,new S(4,14),new S(2,15))),new pe(9,Int32Array.from([6,26,46]),new L(30,new S(2,116)),new L(22,new S(3,36),new S(2,37)),new L(20,new S(4,16),new S(4,17)),new L(24,new S(4,12),new S(4,13))),new pe(10,Int32Array.from([6,28,50]),new L(18,new S(2,68),new S(2,69)),new L(26,new S(4,43),new S(1,44)),new L(24,new S(6,19),new S(2,20)),new L(28,new S(6,15),new S(2,16))),new pe(11,Int32Array.from([6,30,54]),new L(20,new S(4,81)),new L(30,new S(1,50),new S(4,51)),new L(28,new S(4,22),new S(4,23)),new L(24,new S(3,12),new S(8,13))),new pe(12,Int32Array.from([6,32,58]),new L(24,new S(2,92),new S(2,93)),new L(22,new S(6,36),new S(2,37)),new L(26,new S(4,20),new S(6,21)),new L(28,new S(7,14),new S(4,15))),new pe(13,Int32Array.from([6,34,62]),new L(26,new S(4,107)),new L(22,new S(8,37),new S(1,38)),new L(24,new S(8,20),new S(4,21)),new L(22,new S(12,11),new S(4,12))),new pe(14,Int32Array.from([6,26,46,66]),new L(30,new S(3,115),new S(1,116)),new L(24,new S(4,40),new S(5,41)),new L(20,new S(11,16),new S(5,17)),new L(24,new S(11,12),new S(5,13))),new pe(15,Int32Array.from([6,26,48,70]),new L(22,new S(5,87),new S(1,88)),new L(24,new S(5,41),new S(5,42)),new L(30,new S(5,24),new S(7,25)),new L(24,new S(11,12),new S(7,13))),new pe(16,Int32Array.from([6,26,50,74]),new L(24,new S(5,98),new S(1,99)),new L(28,new S(7,45),new S(3,46)),new L(24,new S(15,19),new S(2,20)),new L(30,new S(3,15),new S(13,16))),new pe(17,Int32Array.from([6,30,54,78]),new L(28,new S(1,107),new S(5,108)),new L(28,new S(10,46),new S(1,47)),new L(28,new S(1,22),new S(15,23)),new L(28,new S(2,14),new S(17,15))),new pe(18,Int32Array.from([6,30,56,82]),new L(30,new S(5,120),new S(1,121)),new L(26,new S(9,43),new S(4,44)),new L(28,new S(17,22),new S(1,23)),new L(28,new S(2,14),new S(19,15))),new pe(19,Int32Array.from([6,30,58,86]),new L(28,new S(3,113),new S(4,114)),new L(26,new S(3,44),new S(11,45)),new L(26,new S(17,21),new S(4,22)),new L(26,new S(9,13),new S(16,14))),new pe(20,Int32Array.from([6,34,62,90]),new L(28,new S(3,107),new S(5,108)),new L(26,new S(3,41),new S(13,42)),new L(30,new S(15,24),new S(5,25)),new L(28,new S(15,15),new S(10,16))),new pe(21,Int32Array.from([6,28,50,72,94]),new L(28,new S(4,116),new S(4,117)),new L(26,new S(17,42)),new L(28,new S(17,22),new S(6,23)),new L(30,new S(19,16),new S(6,17))),new pe(22,Int32Array.from([6,26,50,74,98]),new L(28,new S(2,111),new S(7,112)),new L(28,new S(17,46)),new L(30,new S(7,24),new S(16,25)),new L(24,new S(34,13))),new pe(23,Int32Array.from([6,30,54,78,102]),new L(30,new S(4,121),new S(5,122)),new L(28,new S(4,47),new S(14,48)),new L(30,new S(11,24),new S(14,25)),new L(30,new S(16,15),new S(14,16))),new pe(24,Int32Array.from([6,28,54,80,106]),new L(30,new S(6,117),new S(4,118)),new L(28,new S(6,45),new S(14,46)),new L(30,new S(11,24),new S(16,25)),new L(30,new S(30,16),new S(2,17))),new pe(25,Int32Array.from([6,32,58,84,110]),new L(26,new S(8,106),new S(4,107)),new L(28,new S(8,47),new S(13,48)),new L(30,new S(7,24),new S(22,25)),new L(30,new S(22,15),new S(13,16))),new pe(26,Int32Array.from([6,30,58,86,114]),new L(28,new S(10,114),new S(2,115)),new L(28,new S(19,46),new S(4,47)),new L(28,new S(28,22),new S(6,23)),new L(30,new S(33,16),new S(4,17))),new pe(27,Int32Array.from([6,34,62,90,118]),new L(30,new S(8,122),new S(4,123)),new L(28,new S(22,45),new S(3,46)),new L(30,new S(8,23),new S(26,24)),new L(30,new S(12,15),new S(28,16))),new pe(28,Int32Array.from([6,26,50,74,98,122]),new L(30,new S(3,117),new S(10,118)),new L(28,new S(3,45),new S(23,46)),new L(30,new S(4,24),new S(31,25)),new L(30,new S(11,15),new S(31,16))),new pe(29,Int32Array.from([6,30,54,78,102,126]),new L(30,new S(7,116),new S(7,117)),new L(28,new S(21,45),new S(7,46)),new L(30,new S(1,23),new S(37,24)),new L(30,new S(19,15),new S(26,16))),new pe(30,Int32Array.from([6,26,52,78,104,130]),new L(30,new S(5,115),new S(10,116)),new L(28,new S(19,47),new S(10,48)),new L(30,new S(15,24),new S(25,25)),new L(30,new S(23,15),new S(25,16))),new pe(31,Int32Array.from([6,30,56,82,108,134]),new L(30,new S(13,115),new S(3,116)),new L(28,new S(2,46),new S(29,47)),new L(30,new S(42,24),new S(1,25)),new L(30,new S(23,15),new S(28,16))),new pe(32,Int32Array.from([6,34,60,86,112,138]),new L(30,new S(17,115)),new L(28,new S(10,46),new S(23,47)),new L(30,new S(10,24),new S(35,25)),new L(30,new S(19,15),new S(35,16))),new pe(33,Int32Array.from([6,30,58,86,114,142]),new L(30,new S(17,115),new S(1,116)),new L(28,new S(14,46),new S(21,47)),new L(30,new S(29,24),new S(19,25)),new L(30,new S(11,15),new S(46,16))),new pe(34,Int32Array.from([6,34,62,90,118,146]),new L(30,new S(13,115),new S(6,116)),new L(28,new S(14,46),new S(23,47)),new L(30,new S(44,24),new S(7,25)),new L(30,new S(59,16),new S(1,17))),new pe(35,Int32Array.from([6,30,54,78,102,126,150]),new L(30,new S(12,121),new S(7,122)),new L(28,new S(12,47),new S(26,48)),new L(30,new S(39,24),new S(14,25)),new L(30,new S(22,15),new S(41,16))),new pe(36,Int32Array.from([6,24,50,76,102,128,154]),new L(30,new S(6,121),new S(14,122)),new L(28,new S(6,47),new S(34,48)),new L(30,new S(46,24),new S(10,25)),new L(30,new S(2,15),new S(64,16))),new pe(37,Int32Array.from([6,28,54,80,106,132,158]),new L(30,new S(17,122),new S(4,123)),new L(28,new S(29,46),new S(14,47)),new L(30,new S(49,24),new S(10,25)),new L(30,new S(24,15),new S(46,16))),new pe(38,Int32Array.from([6,32,58,84,110,136,162]),new L(30,new S(4,122),new S(18,123)),new L(28,new S(13,46),new S(32,47)),new L(30,new S(48,24),new S(14,25)),new L(30,new S(42,15),new S(32,16))),new pe(39,Int32Array.from([6,26,54,82,110,138,166]),new L(30,new S(20,117),new S(4,118)),new L(28,new S(40,47),new S(7,48)),new L(30,new S(43,24),new S(22,25)),new L(30,new S(10,15),new S(67,16))),new pe(40,Int32Array.from([6,30,58,86,114,142,170]),new L(30,new S(19,118),new S(6,119)),new L(28,new S(18,47),new S(31,48)),new L(30,new S(34,24),new S(34,25)),new L(30,new S(20,15),new S(61,16)))];var wn=function(_){return _[_.DATA_MASK_000=0]="DATA_MASK_000",_[_.DATA_MASK_001=1]="DATA_MASK_001",_[_.DATA_MASK_010=2]="DATA_MASK_010",_[_.DATA_MASK_011=3]="DATA_MASK_011",_[_.DATA_MASK_100=4]="DATA_MASK_100",_[_.DATA_MASK_101=5]="DATA_MASK_101",_[_.DATA_MASK_110=6]="DATA_MASK_110",_[_.DATA_MASK_111=7]="DATA_MASK_111",_}(wn||{});class pr{constructor(s,a){this.value=s,this.isMasked=a}unmaskBitMatrix(s,a){for(let l=0;l<a;l++)for(let u=0;u<a;u++)this.isMasked(l,u)&&s.flip(u,l)}}pr.values=new Map([[wn.DATA_MASK_000,new pr(wn.DATA_MASK_000,(_,s)=>(_+s&1)===0)],[wn.DATA_MASK_001,new pr(wn.DATA_MASK_001,(_,s)=>(_&1)===0)],[wn.DATA_MASK_010,new pr(wn.DATA_MASK_010,(_,s)=>s%3===0)],[wn.DATA_MASK_011,new pr(wn.DATA_MASK_011,(_,s)=>(_+s)%3===0)],[wn.DATA_MASK_100,new pr(wn.DATA_MASK_100,(_,s)=>(Math.floor(_/2)+Math.floor(s/3)&1)===0)],[wn.DATA_MASK_101,new pr(wn.DATA_MASK_101,(_,s)=>_*s%6===0)],[wn.DATA_MASK_110,new pr(wn.DATA_MASK_110,(_,s)=>_*s%6<3)],[wn.DATA_MASK_111,new pr(wn.DATA_MASK_111,(_,s)=>(_+s+_*s%3&1)===0)]]);class LT{constructor(s){let a=s.getHeight();if(a<21||(a&3)!==1)throw new H;this.bitMatrix=s}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let s=0;for(let d=0;d<6;d++)s=this.copyBit(d,8,s);s=this.copyBit(7,8,s),s=this.copyBit(8,8,s),s=this.copyBit(8,7,s);for(let d=5;d>=0;d--)s=this.copyBit(8,d,s);let a=this.bitMatrix.getHeight(),l=0,u=a-7;for(let d=a-1;d>=u;d--)l=this.copyBit(8,d,l);for(let d=a-8;d<a;d++)l=this.copyBit(d,8,l);if(this.parsedFormatInfo=Pn.decodeFormatInformation(s,l),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new H}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;let s=this.bitMatrix.getHeight(),a=Math.floor((s-17)/4);if(a<=6)return pe.getVersionForNumber(a);let l=0,u=s-11;for(let f=5;f>=0;f--)for(let p=s-9;p>=u;p--)l=this.copyBit(p,f,l);let d=pe.decodeVersionInformation(l);if(d!==null&&d.getDimensionForVersion()===s)return this.parsedVersion=d,d;l=0;for(let f=5;f>=0;f--)for(let p=s-9;p>=u;p--)l=this.copyBit(f,p,l);if(d=pe.decodeVersionInformation(l),d!==null&&d.getDimensionForVersion()===s)return this.parsedVersion=d,d;throw new H}copyBit(s,a,l){return(this.isMirror?this.bitMatrix.get(a,s):this.bitMatrix.get(s,a))?l<<1|1:l<<1}readCodewords(){let s=this.readFormatInformation(),a=this.readVersion(),l=pr.values.get(s.getDataMask()),u=this.bitMatrix.getHeight();l.unmaskBitMatrix(this.bitMatrix,u);let d=a.buildFunctionPattern(),f=!0,p=new Uint8Array(a.getTotalCodewords()),y=0,C=0,w=0;for(let x=u-1;x>0;x-=2){x===6&&x--;for(let E=0;E<u;E++){let D=f?u-1-E:E;for(let M=0;M<2;M++)d.get(x-M,D)||(w++,C<<=1,this.bitMatrix.get(x-M,D)&&(C|=1),w===8&&(p[y++]=C,w=0,C=0))}f=!f}if(y!==a.getTotalCodewords())throw new H;return p}remask(){if(this.parsedFormatInfo===null)return;let s=pr.values[this.parsedFormatInfo.getDataMask()],a=this.bitMatrix.getHeight();s.unmaskBitMatrix(this.bitMatrix,a)}setMirror(s){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=s}mirror(){let s=this.bitMatrix;for(let a=0,l=s.getWidth();a<l;a++)for(let u=a+1,d=s.getHeight();u<d;u++)s.get(a,u)!==s.get(u,a)&&(s.flip(u,a),s.flip(a,u))}}class Ep{constructor(s,a){this.numDataCodewords=s,this.codewords=a}static getDataBlocks(s,a,l){if(s.length!==a.getTotalCodewords())throw new m;let u=a.getECBlocksForLevel(l),d=0,f=u.getECBlocks();for(let M of f)d+=M.getCount();let p=new Array(d),y=0;for(let M of f)for(let O=0;O<M.getCount();O++){let k=M.getDataCodewords(),F=u.getECCodewordsPerBlock()+k;p[y++]=new Ep(k,new Uint8Array(F))}let C=p[0].codewords.length,w=p.length-1;for(;w>=0&&p[w].codewords.length!==C;)w--;w++;let x=C-u.getECCodewordsPerBlock(),E=0;for(let M=0;M<x;M++)for(let O=0;O<y;O++)p[O].codewords[M]=s[E++];for(let M=w;M<y;M++)p[M].codewords[x]=s[E++];let D=p[0].codewords.length;for(let M=x;M<D;M++)for(let O=0;O<y;O++){let k=O<w?M:M+1;p[O].codewords[k]=s[E++]}return p}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Pr=function(_){return _[_.TERMINATOR=0]="TERMINATOR",_[_.NUMERIC=1]="NUMERIC",_[_.ALPHANUMERIC=2]="ALPHANUMERIC",_[_.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",_[_.BYTE=4]="BYTE",_[_.ECI=5]="ECI",_[_.KANJI=6]="KANJI",_[_.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",_[_.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",_[_.HANZI=9]="HANZI",_}(Pr||{});class ye{constructor(s,a,l,u){this.value=s,this.stringValue=a,this.characterCountBitsForVersions=l,this.bits=u,ye.FOR_BITS.set(u,this),ye.FOR_VALUE.set(s,this)}static forBits(s){let a=ye.FOR_BITS.get(s);if(a===void 0)throw new m;return a}getCharacterCountBits(s){let a=s.getVersionNumber(),l;return a<=9?l=0:a<=26?l=1:l=2,this.characterCountBitsForVersions[l]}getValue(){return this.value}getBits(){return this.bits}equals(s){if(!(s instanceof ye))return!1;let a=s;return this.value===a.value}toString(){return this.stringValue}}ye.FOR_BITS=new Map,ye.FOR_VALUE=new Map,ye.TERMINATOR=new ye(Pr.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),ye.NUMERIC=new ye(Pr.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),ye.ALPHANUMERIC=new ye(Pr.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),ye.STRUCTURED_APPEND=new ye(Pr.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),ye.BYTE=new ye(Pr.BYTE,"BYTE",Int32Array.from([8,16,16]),4),ye.ECI=new ye(Pr.ECI,"ECI",Int32Array.from([0,0,0]),7),ye.KANJI=new ye(Pr.KANJI,"KANJI",Int32Array.from([8,10,12]),8),ye.FNC1_FIRST_POSITION=new ye(Pr.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),ye.FNC1_SECOND_POSITION=new ye(Pr.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),ye.HANZI=new ye(Pr.HANZI,"HANZI",Int32Array.from([8,10,12]),13);let p_=(()=>{class _{static decode(a,l,u,d){let f=new xp(a),p=new yt,y=new Array,C=-1,w=-1;try{let x=null,E=!1,D;do{if(f.available()<4)D=ye.TERMINATOR;else{let M=f.readBits(4);D=ye.forBits(M)}switch(D){case ye.TERMINATOR:break;case ye.FNC1_FIRST_POSITION:case ye.FNC1_SECOND_POSITION:E=!0;break;case ye.STRUCTURED_APPEND:if(f.available()<16)throw new H;C=f.readBits(8),w=f.readBits(8);break;case ye.ECI:let M=_.parseECIValue(f);if(x=q.getCharacterSetECIByValue(M),x===null)throw new H;break;case ye.HANZI:let O=f.readBits(4),k=f.readBits(D.getCharacterCountBits(l));O===_.GB2312_SUBSET&&_.decodeHanziSegment(f,p,k);break;default:let F=f.readBits(D.getCharacterCountBits(l));switch(D){case ye.NUMERIC:_.decodeNumericSegment(f,p,F);break;case ye.ALPHANUMERIC:_.decodeAlphanumericSegment(f,p,F,E);break;case ye.BYTE:_.decodeByteSegment(f,p,F,x,y,d);break;case ye.KANJI:_.decodeKanjiSegment(f,p,F);break;default:throw new H}break}}while(D!==ye.TERMINATOR)}catch{throw new H}return new rl(a,p.toString(),y.length===0?null:y,u===null?null:u.toString(),C,w)}static decodeHanziSegment(a,l,u){if(u*13>a.available())throw new H;let d=new Uint8Array(2*u),f=0;for(;u>0;){let p=a.readBits(13),y=p/96<<8&4294967295|p%96;y<959?y+=41377:y+=42657,d[f]=y>>8&255,d[f+1]=y&255,f+=2,u--}try{l.append(On.decode(d,Ie.GB2312))}catch(p){throw new H(p)}}static decodeKanjiSegment(a,l,u){if(u*13>a.available())throw new H;let d=new Uint8Array(2*u),f=0;for(;u>0;){let p=a.readBits(13),y=p/192<<8&4294967295|p%192;y<7936?y+=33088:y+=49472,d[f]=y>>8,d[f+1]=y,f+=2,u--}try{l.append(On.decode(d,Ie.SHIFT_JIS))}catch(p){throw new H(p)}}static decodeByteSegment(a,l,u,d,f,p){if(8*u>a.available())throw new H;let y=new Uint8Array(u);for(let w=0;w<u;w++)y[w]=a.readBits(8);let C;d===null?C=Ie.guessEncoding(y,p):C=d.getName();try{l.append(On.decode(y,C))}catch(w){throw new H(w)}f.push(y)}static toAlphaNumericChar(a){if(a>=_.ALPHANUMERIC_CHARS.length)throw new H;return _.ALPHANUMERIC_CHARS[a]}static decodeAlphanumericSegment(a,l,u,d){let f=l.length();for(;u>1;){if(a.available()<11)throw new H;let p=a.readBits(11);l.append(_.toAlphaNumericChar(Math.floor(p/45))),l.append(_.toAlphaNumericChar(p%45)),u-=2}if(u===1){if(a.available()<6)throw new H;l.append(_.toAlphaNumericChar(a.readBits(6)))}if(d)for(let p=f;p<l.length();p++)l.charAt(p)==="%"&&(p<l.length()-1&&l.charAt(p+1)==="%"?l.deleteCharAt(p+1):l.setCharAt(p,""))}static decodeNumericSegment(a,l,u){for(;u>=3;){if(a.available()<10)throw new H;let d=a.readBits(10);if(d>=1e3)throw new H;l.append(_.toAlphaNumericChar(Math.floor(d/100))),l.append(_.toAlphaNumericChar(Math.floor(d/10)%10)),l.append(_.toAlphaNumericChar(d%10)),u-=3}if(u===2){if(a.available()<7)throw new H;let d=a.readBits(7);if(d>=100)throw new H;l.append(_.toAlphaNumericChar(Math.floor(d/10))),l.append(_.toAlphaNumericChar(d%10))}else if(u===1){if(a.available()<4)throw new H;let d=a.readBits(4);if(d>=10)throw new H;l.append(_.toAlphaNumericChar(d))}}static parseECIValue(a){let l=a.readBits(8);if(!(l&128))return l&127;if((l&192)===128){let u=a.readBits(8);return(l&63)<<8&4294967295|u}if((l&224)===192){let u=a.readBits(16);return(l&31)<<16&4294967295|u}throw new H}}return _.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",_.GB2312_SUBSET=1,_})();class g_{constructor(s){this.mirrored=s}isMirrored(){return this.mirrored}applyMirroredCorrection(s){if(!this.mirrored||s===null||s.length<3)return;let a=s[0];s[0]=s[2],s[2]=a}}class FT{constructor(){this.rsDecoder=new sl(at.QR_CODE_FIELD_256)}decodeBooleanArray(s,a){return this.decodeBitMatrix(cn.parseFromBooleanArray(s),a)}decodeBitMatrix(s,a){let l=new LT(s),u=null;try{return this.decodeBitMatrixParser(l,a)}catch(d){u=d}try{l.remask(),l.setMirror(!0),l.readVersion(),l.readFormatInformation(),l.mirror();let d=this.decodeBitMatrixParser(l,a);return d.setOther(new g_(!0)),d}catch(d){throw u!==null?u:d}}decodeBitMatrixParser(s,a){let l=s.readVersion(),u=s.readFormatInformation().getErrorCorrectionLevel(),d=s.readCodewords(),f=Ep.getDataBlocks(d,l,u),p=0;for(let w of f)p+=w.getNumDataCodewords();let y=new Uint8Array(p),C=0;for(let w of f){let x=w.getCodewords(),E=w.getNumDataCodewords();this.correctErrors(x,E);for(let D=0;D<E;D++)y[C++]=x[D]}return p_.decode(y,l,u,a)}correctErrors(s,a){let l=new Int32Array(s);try{this.rsDecoder.decode(l,s.length-a)}catch{throw new b}for(let u=0;u<a;u++)s[u]=l[u]}}class Ip extends ue{constructor(s,a,l){super(s,a),this.estimatedModuleSize=l}aboutEquals(s,a,l){if(Math.abs(a-this.getY())<=s&&Math.abs(l-this.getX())<=s){let u=Math.abs(s-this.estimatedModuleSize);return u<=1||u<=this.estimatedModuleSize}return!1}combineEstimate(s,a,l){let u=(this.getX()+a)/2,d=(this.getY()+s)/2,f=(this.estimatedModuleSize+l)/2;return new Ip(u,d,f)}}class _u{constructor(s,a,l,u,d,f,p){this.image=s,this.startX=a,this.startY=l,this.width=u,this.height=d,this.moduleSize=f,this.resultPointCallback=p,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){let s=this.startX,a=this.height,l=this.width,u=s+l,d=this.startY+a/2,f=new Int32Array(3),p=this.image;for(let y=0;y<a;y++){let C=d+(y&1?-Math.floor((y+1)/2):Math.floor((y+1)/2));f[0]=0,f[1]=0,f[2]=0;let w=s;for(;w<u&&!p.get(w,C);)w++;let x=0;for(;w<u;){if(p.get(w,C))if(x===1)f[1]++;else if(x===2){if(this.foundPatternCross(f)){let E=this.handlePossibleCenter(f,C,w);if(E!==null)return E}f[0]=f[2],f[1]=1,f[2]=0,x=1}else f[++x]++;else x===1&&x++,f[x]++;w++}if(this.foundPatternCross(f)){let E=this.handlePossibleCenter(f,C,u);if(E!==null)return E}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new U}static centerFromEnd(s,a){return a-s[2]-s[1]/2}foundPatternCross(s){let a=this.moduleSize,l=a/2;for(let u=0;u<3;u++)if(Math.abs(a-s[u])>=l)return!1;return!0}crossCheckVertical(s,a,l,u){let d=this.image,f=d.getHeight(),p=this.crossCheckStateCount;p[0]=0,p[1]=0,p[2]=0;let y=s;for(;y>=0&&d.get(a,y)&&p[1]<=l;)p[1]++,y--;if(y<0||p[1]>l)return NaN;for(;y>=0&&!d.get(a,y)&&p[0]<=l;)p[0]++,y--;if(p[0]>l)return NaN;for(y=s+1;y<f&&d.get(a,y)&&p[1]<=l;)p[1]++,y++;if(y===f||p[1]>l)return NaN;for(;y<f&&!d.get(a,y)&&p[2]<=l;)p[2]++,y++;if(p[2]>l)return NaN;let C=p[0]+p[1]+p[2];return 5*Math.abs(C-u)>=2*u?NaN:this.foundPatternCross(p)?_u.centerFromEnd(p,y):NaN}handlePossibleCenter(s,a,l){let u=s[0]+s[1]+s[2],d=_u.centerFromEnd(s,l),f=this.crossCheckVertical(a,d,2*s[1],u);if(!isNaN(f)){let p=(s[0]+s[1]+s[2])/3;for(let C of this.possibleCenters)if(C.aboutEquals(p,f,d))return C.combineEstimate(f,d,p);let y=new Ip(d,f,p);this.possibleCenters.push(y),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(y)}return null}}class Sp extends ue{constructor(s,a,l,u){super(s,a),this.estimatedModuleSize=l,this.count=u,u===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(s,a,l){if(Math.abs(a-this.getY())<=s&&Math.abs(l-this.getX())<=s){let u=Math.abs(s-this.estimatedModuleSize);return u<=1||u<=this.estimatedModuleSize}return!1}combineEstimate(s,a,l){let u=this.count+1,d=(this.count*this.getX()+a)/u,f=(this.count*this.getY()+s)/u,p=(this.count*this.estimatedModuleSize+l)/u;return new Sp(d,f,p,u)}}class BT{constructor(s){this.bottomLeft=s[0],this.topLeft=s[1],this.topRight=s[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}let VT=(()=>{class _{constructor(a,l){this.image=a,this.resultPointCallback=l,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=l}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(a){let l=a!=null&&a.get(ge.TRY_HARDER)!==void 0,u=a!=null&&a.get(ge.PURE_BARCODE)!==void 0,d=this.image,f=d.getHeight(),p=d.getWidth(),y=Math.floor(3*f/(4*_.MAX_MODULES));(y<_.MIN_SKIP||l)&&(y=_.MIN_SKIP);let C=!1,w=new Int32Array(5);for(let E=y-1;E<f&&!C;E+=y){w[0]=0,w[1]=0,w[2]=0,w[3]=0,w[4]=0;let D=0;for(let M=0;M<p;M++)if(d.get(M,E))(D&1)===1&&D++,w[D]++;else if(D&1)w[D]++;else if(D===4)if(_.foundPatternCross(w)){if(this.handlePossibleCenter(w,E,M,u)===!0)if(y=2,this.hasSkipped===!0)C=this.haveMultiplyConfirmedCenters();else{let k=this.findRowSkip();k>w[2]&&(E+=k-w[2]-y,M=p-1)}else{w[0]=w[2],w[1]=w[3],w[2]=w[4],w[3]=1,w[4]=0,D=3;continue}D=0,w[0]=0,w[1]=0,w[2]=0,w[3]=0,w[4]=0}else w[0]=w[2],w[1]=w[3],w[2]=w[4],w[3]=1,w[4]=0,D=3;else w[++D]++;_.foundPatternCross(w)&&this.handlePossibleCenter(w,E,p,u)===!0&&(y=w[0],this.hasSkipped&&(C=this.haveMultiplyConfirmedCenters()))}let x=this.selectBestPatterns();return ue.orderBestPatterns(x),new BT(x)}static centerFromEnd(a,l){return l-a[4]-a[3]-a[2]/2}static foundPatternCross(a){let l=0;for(let f=0;f<5;f++){let p=a[f];if(p===0)return!1;l+=p}if(l<7)return!1;let u=l/7,d=u/2;return Math.abs(u-a[0])<d&&Math.abs(u-a[1])<d&&Math.abs(3*u-a[2])<3*d&&Math.abs(u-a[3])<d&&Math.abs(u-a[4])<d}getCrossCheckStateCount(){let a=this.crossCheckStateCount;return a[0]=0,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a}crossCheckDiagonal(a,l,u,d){let f=this.getCrossCheckStateCount(),p=0,y=this.image;for(;a>=p&&l>=p&&y.get(l-p,a-p);)f[2]++,p++;if(a<p||l<p)return!1;for(;a>=p&&l>=p&&!y.get(l-p,a-p)&&f[1]<=u;)f[1]++,p++;if(a<p||l<p||f[1]>u)return!1;for(;a>=p&&l>=p&&y.get(l-p,a-p)&&f[0]<=u;)f[0]++,p++;if(f[0]>u)return!1;let C=y.getHeight(),w=y.getWidth();for(p=1;a+p<C&&l+p<w&&y.get(l+p,a+p);)f[2]++,p++;if(a+p>=C||l+p>=w)return!1;for(;a+p<C&&l+p<w&&!y.get(l+p,a+p)&&f[3]<u;)f[3]++,p++;if(a+p>=C||l+p>=w||f[3]>=u)return!1;for(;a+p<C&&l+p<w&&y.get(l+p,a+p)&&f[4]<u;)f[4]++,p++;if(f[4]>=u)return!1;let x=f[0]+f[1]+f[2]+f[3]+f[4];return Math.abs(x-d)<2*d&&_.foundPatternCross(f)}crossCheckVertical(a,l,u,d){let f=this.image,p=f.getHeight(),y=this.getCrossCheckStateCount(),C=a;for(;C>=0&&f.get(l,C);)y[2]++,C--;if(C<0)return NaN;for(;C>=0&&!f.get(l,C)&&y[1]<=u;)y[1]++,C--;if(C<0||y[1]>u)return NaN;for(;C>=0&&f.get(l,C)&&y[0]<=u;)y[0]++,C--;if(y[0]>u)return NaN;for(C=a+1;C<p&&f.get(l,C);)y[2]++,C++;if(C===p)return NaN;for(;C<p&&!f.get(l,C)&&y[3]<u;)y[3]++,C++;if(C===p||y[3]>=u)return NaN;for(;C<p&&f.get(l,C)&&y[4]<u;)y[4]++,C++;if(y[4]>=u)return NaN;let w=y[0]+y[1]+y[2]+y[3]+y[4];return 5*Math.abs(w-d)>=2*d?NaN:_.foundPatternCross(y)?_.centerFromEnd(y,C):NaN}crossCheckHorizontal(a,l,u,d){let f=this.image,p=f.getWidth(),y=this.getCrossCheckStateCount(),C=a;for(;C>=0&&f.get(C,l);)y[2]++,C--;if(C<0)return NaN;for(;C>=0&&!f.get(C,l)&&y[1]<=u;)y[1]++,C--;if(C<0||y[1]>u)return NaN;for(;C>=0&&f.get(C,l)&&y[0]<=u;)y[0]++,C--;if(y[0]>u)return NaN;for(C=a+1;C<p&&f.get(C,l);)y[2]++,C++;if(C===p)return NaN;for(;C<p&&!f.get(C,l)&&y[3]<u;)y[3]++,C++;if(C===p||y[3]>=u)return NaN;for(;C<p&&f.get(C,l)&&y[4]<u;)y[4]++,C++;if(y[4]>=u)return NaN;let w=y[0]+y[1]+y[2]+y[3]+y[4];return 5*Math.abs(w-d)>=d?NaN:_.foundPatternCross(y)?_.centerFromEnd(y,C):NaN}handlePossibleCenter(a,l,u,d){let f=a[0]+a[1]+a[2]+a[3]+a[4],p=_.centerFromEnd(a,u),y=this.crossCheckVertical(l,Math.floor(p),a[2],f);if(!isNaN(y)&&(p=this.crossCheckHorizontal(Math.floor(p),Math.floor(y),a[2],f),!isNaN(p)&&(!d||this.crossCheckDiagonal(Math.floor(y),Math.floor(p),a[2],f)))){let C=f/7,w=!1,x=this.possibleCenters;for(let E=0,D=x.length;E<D;E++){let M=x[E];if(M.aboutEquals(C,y,p)){x[E]=M.combineEstimate(y,p,C),w=!0;break}}if(!w){let E=new Sp(p,y,C);x.push(E),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(E)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let l=null;for(let u of this.possibleCenters)if(u.getCount()>=_.CENTER_QUORUM)if(l==null)l=u;else return this.hasSkipped=!0,Math.floor((Math.abs(l.getX()-u.getX())-Math.abs(l.getY()-u.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let a=0,l=0,u=this.possibleCenters.length;for(let p of this.possibleCenters)p.getCount()>=_.CENTER_QUORUM&&(a++,l+=p.getEstimatedModuleSize());if(a<3)return!1;let d=l/u,f=0;for(let p of this.possibleCenters)f+=Math.abs(p.getEstimatedModuleSize()-d);return f<=.05*l}selectBestPatterns(){let a=this.possibleCenters.length;if(a<3)throw new U;let l=this.possibleCenters,u;if(a>3){let d=0,f=0;for(let C of this.possibleCenters){let w=C.getEstimatedModuleSize();d+=w,f+=w*w}u=d/a;let p=Math.sqrt(f/a-u*u);l.sort((C,w)=>{let x=Math.abs(w.getEstimatedModuleSize()-u),E=Math.abs(C.getEstimatedModuleSize()-u);return x<E?-1:x>E?1:0});let y=Math.max(.2*u,p);for(let C=0;C<l.length&&l.length>3;C++){let w=l[C];Math.abs(w.getEstimatedModuleSize()-u)>y&&(l.splice(C,1),C--)}}if(l.length>3){let d=0;for(let f of l)d+=f.getEstimatedModuleSize();u=d/l.length,l.sort((f,p)=>{if(p.getCount()===f.getCount()){let y=Math.abs(p.getEstimatedModuleSize()-u),C=Math.abs(f.getEstimatedModuleSize()-u);return y<C?1:y>C?-1:0}else return p.getCount()-f.getCount()}),l.splice(3)}return[l[0],l[1],l[2]]}}return _.CENTER_QUORUM=2,_.MIN_SKIP=3,_.MAX_MODULES=57,_})();class cl{constructor(s){this.image=s}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(s){this.resultPointCallback=s==null?null:s.get(ge.NEED_RESULT_POINT_CALLBACK);let l=new VT(this.image,this.resultPointCallback).find(s);return this.processFinderPatternInfo(l)}processFinderPatternInfo(s){let a=s.getTopLeft(),l=s.getTopRight(),u=s.getBottomLeft(),d=this.calculateModuleSize(a,l,u);if(d<1)throw new U("No pattern found in proccess finder.");let f=cl.computeDimension(a,l,u,d),p=pe.getProvisionalVersionForDimension(f),y=p.getDimensionForVersion()-7,C=null;if(p.getAlignmentPatternCenters().length>0){let D=l.getX()-a.getX()+u.getX(),M=l.getY()-a.getY()+u.getY(),O=1-3/y,k=Math.floor(a.getX()+O*(D-a.getX())),F=Math.floor(a.getY()+O*(M-a.getY()));for(let X=4;X<=16;X<<=1)try{C=this.findAlignmentInRegion(d,k,F,X);break}catch(re){if(!(re instanceof U))throw re}}let w=cl.createTransform(a,l,u,C,f),x=cl.sampleGrid(this.image,w,f),E;return C===null?E=[u,a,l]:E=[u,a,l,C],new fu(x,E)}static createTransform(s,a,l,u,d){let f=d-3.5,p,y,C,w;return u!==null?(p=u.getX(),y=u.getY(),C=f-3,w=C):(p=a.getX()-s.getX()+l.getX(),y=a.getY()-s.getY()+l.getY(),C=f,w=f),Mr.quadrilateralToQuadrilateral(3.5,3.5,f,3.5,C,w,3.5,f,s.getX(),s.getY(),a.getX(),a.getY(),p,y,l.getX(),l.getY())}static sampleGrid(s,a,l){return Ki.getInstance().sampleGridWithTransform(s,l,l,a)}static computeDimension(s,a,l,u){let d=et.round(ue.distance(s,a)/u),f=et.round(ue.distance(s,l)/u),p=Math.floor((d+f)/2)+7;switch(p&3){case 0:p++;break;case 2:p--;break;case 3:throw new U("Dimensions could be not found.")}return p}calculateModuleSize(s,a,l){return(this.calculateModuleSizeOneWay(s,a)+this.calculateModuleSizeOneWay(s,l))/2}calculateModuleSizeOneWay(s,a){let l=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(s.getX()),Math.floor(s.getY()),Math.floor(a.getX()),Math.floor(a.getY())),u=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(a.getX()),Math.floor(a.getY()),Math.floor(s.getX()),Math.floor(s.getY()));return isNaN(l)?u/7:isNaN(u)?l/7:(l+u)/14}sizeOfBlackWhiteBlackRunBothWays(s,a,l,u){let d=this.sizeOfBlackWhiteBlackRun(s,a,l,u),f=1,p=s-(l-s);p<0?(f=s/(s-p),p=0):p>=this.image.getWidth()&&(f=(this.image.getWidth()-1-s)/(p-s),p=this.image.getWidth()-1);let y=Math.floor(a-(u-a)*f);return f=1,y<0?(f=a/(a-y),y=0):y>=this.image.getHeight()&&(f=(this.image.getHeight()-1-a)/(y-a),y=this.image.getHeight()-1),p=Math.floor(s+(p-s)*f),d+=this.sizeOfBlackWhiteBlackRun(s,a,p,y),d-1}sizeOfBlackWhiteBlackRun(s,a,l,u){let d=Math.abs(u-a)>Math.abs(l-s);if(d){let D=s;s=a,a=D,D=l,l=u,u=D}let f=Math.abs(l-s),p=Math.abs(u-a),y=-f/2,C=s<l?1:-1,w=a<u?1:-1,x=0,E=l+C;for(let D=s,M=a;D!==E;D+=C){let O=d?M:D,k=d?D:M;if(x===1===this.image.get(O,k)){if(x===2)return et.distance(D,M,s,a);x++}if(y+=p,y>0){if(M===u)break;M+=w,y-=f}}return x===2?et.distance(l+C,u,s,a):NaN}findAlignmentInRegion(s,a,l,u){let d=Math.floor(u*s),f=Math.max(0,a-d),p=Math.min(this.image.getWidth()-1,a+d);if(p-f<s*3)throw new U("Alignment top exceeds estimated module size.");let y=Math.max(0,l-d),C=Math.min(this.image.getHeight()-1,l+d);if(C-y<s*3)throw new U("Alignment bottom exceeds estimated module size.");return new _u(this.image,f,y,p-f,C-y,s,this.resultPointCallback).find()}}class no{constructor(){this.decoder=new FT}getDecoder(){return this.decoder}decode(s,a){let l,u;if(a!=null&&a.get(ge.PURE_BARCODE)!==void 0){let y=no.extractPureBits(s.getBlackMatrix());l=this.decoder.decodeBitMatrix(y,a),u=no.NO_POINTS}else{let y=new cl(s.getBlackMatrix()).detect(a);l=this.decoder.decodeBitMatrix(y.getBits(),a),u=y.getPoints()}l.getOther()instanceof g_&&l.getOther().applyMirroredCorrection(u);let d=new Fn(l.getText(),l.getRawBytes(),void 0,u,Ce.QR_CODE,void 0),f=l.getByteSegments();f!==null&&d.putMetadata(dn.BYTE_SEGMENTS,f);let p=l.getECLevel();return p!==null&&d.putMetadata(dn.ERROR_CORRECTION_LEVEL,p),l.hasStructuredAppend()&&(d.putMetadata(dn.STRUCTURED_APPEND_SEQUENCE,l.getStructuredAppendSequenceNumber()),d.putMetadata(dn.STRUCTURED_APPEND_PARITY,l.getStructuredAppendParity())),d}reset(){}static extractPureBits(s){let a=s.getTopLeftOnBit(),l=s.getBottomRightOnBit();if(a===null||l===null)throw new U;let u=this.moduleSize(a,s),d=a[1],f=l[1],p=a[0],y=l[0];if(p>=y||d>=f)throw new U;if(f-d!==y-p&&(y=p+(f-d),y>=s.getWidth()))throw new U;let C=Math.round((y-p+1)/u),w=Math.round((f-d+1)/u);if(C<=0||w<=0)throw new U;if(w!==C)throw new U;let x=Math.floor(u/2);d+=x,p+=x;let E=p+Math.floor((C-1)*u)-y;if(E>0){if(E>x)throw new U;p-=E}let D=d+Math.floor((w-1)*u)-f;if(D>0){if(D>x)throw new U;d-=D}let M=new cn(C,w);for(let O=0;O<w;O++){let k=d+Math.floor(O*u);for(let F=0;F<C;F++)s.get(p+Math.floor(F*u),k)&&M.set(F,O)}return M}static moduleSize(s,a){let l=a.getHeight(),u=a.getWidth(),d=s[0],f=s[1],p=!0,y=0;for(;d<u&&f<l;){if(p!==a.get(d,f)){if(++y===5)break;p=!p}d++,f++}if(d===u||f===l)throw new U;return(d-s[0])/7}}no.NO_POINTS=new Array;class be{PDF417Common(){}static getBitCountSum(s){return et.sum(s)}static toIntArray(s){if(s==null||!s.length)return be.EMPTY_INT_ARRAY;let a=new Int32Array(s.length),l=0;for(let u of s)a[l++]=u;return a}static getCodeword(s){let a=Y.binarySearch(be.SYMBOL_TABLE,s&262143);return a<0?-1:(be.CODEWORD_TABLE[a]-1)%be.NUMBER_OF_CODEWORDS}}be.NUMBER_OF_CODEWORDS=929,be.MAX_CODEWORDS_IN_BARCODE=be.NUMBER_OF_CODEWORDS-1,be.MIN_ROWS_IN_BARCODE=3,be.MAX_ROWS_IN_BARCODE=90,be.MODULES_IN_CODEWORD=17,be.MODULES_IN_STOP_PATTERN=18,be.BARS_IN_MODULE=8,be.EMPTY_INT_ARRAY=new Int32Array([]),be.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),be.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class UT{constructor(s,a){this.bits=s,this.points=a}getBits(){return this.bits}getPoints(){return this.points}}class ke{static detectMultiple(s,a,l){let u=s.getBlackMatrix(),d=ke.detect(l,u);return d.length||(u=u.clone(),u.rotate180(),d=ke.detect(l,u)),new UT(u,d)}static detect(s,a){let l=new Array,u=0,d=0,f=!1;for(;u<a.getHeight();){let p=ke.findVertices(a,u,d);if(p[0]==null&&p[3]==null){if(!f)break;f=!1,d=0;for(let y of l)y[1]!=null&&(u=Math.trunc(Math.max(u,y[1].getY()))),y[3]!=null&&(u=Math.max(u,Math.trunc(y[3].getY())));u+=ke.ROW_STEP;continue}if(f=!0,l.push(p),!s)break;p[2]!=null?(d=Math.trunc(p[2].getX()),u=Math.trunc(p[2].getY())):(d=Math.trunc(p[4].getX()),u=Math.trunc(p[4].getY()))}return l}static findVertices(s,a,l){let u=s.getHeight(),d=s.getWidth(),f=new Array(8);return ke.copyToResult(f,ke.findRowsWithPattern(s,u,d,a,l,ke.START_PATTERN),ke.INDEXES_START_PATTERN),f[4]!=null&&(l=Math.trunc(f[4].getX()),a=Math.trunc(f[4].getY())),ke.copyToResult(f,ke.findRowsWithPattern(s,u,d,a,l,ke.STOP_PATTERN),ke.INDEXES_STOP_PATTERN),f}static copyToResult(s,a,l){for(let u=0;u<l.length;u++)s[l[u]]=a[u]}static findRowsWithPattern(s,a,l,u,d,f){let p=new Array(4),y=!1,C=new Int32Array(f.length);for(;u<a;u+=ke.ROW_STEP){let x=ke.findGuardPattern(s,d,u,l,!1,f,C);if(x!=null){for(;u>0;){let E=ke.findGuardPattern(s,d,--u,l,!1,f,C);if(E!=null)x=E;else{u++;break}}p[0]=new ue(x[0],u),p[1]=new ue(x[1],u),y=!0;break}}let w=u+1;if(y){let x=0,E=Int32Array.from([Math.trunc(p[0].getX()),Math.trunc(p[1].getX())]);for(;w<a;w++){let D=ke.findGuardPattern(s,E[0],w,l,!1,f,C);if(D!=null&&Math.abs(E[0]-D[0])<ke.MAX_PATTERN_DRIFT&&Math.abs(E[1]-D[1])<ke.MAX_PATTERN_DRIFT)E=D,x=0;else{if(x>ke.SKIPPED_ROW_COUNT_MAX)break;x++}}w-=x+1,p[2]=new ue(E[0],w),p[3]=new ue(E[1],w)}return w-u<ke.BARCODE_MIN_HEIGHT&&Y.fill(p,null),p}static findGuardPattern(s,a,l,u,d,f,p){Y.fillWithin(p,0,p.length,0);let y=a,C=0;for(;s.get(y,l)&&y>0&&C++<ke.MAX_PIXEL_DRIFT;)y--;let w=y,x=0,E=f.length;for(let D=d;w<u;w++)if(s.get(w,l)!==D)p[x]++;else{if(x===E-1){if(ke.patternMatchVariance(p,f,ke.MAX_INDIVIDUAL_VARIANCE)<ke.MAX_AVG_VARIANCE)return new Int32Array([y,w]);y+=p[0]+p[1],A.arraycopy(p,2,p,0,x-1),p[x-1]=0,p[x]=0,x--}else x++;p[x]=1,D=!D}return x===E-1&&ke.patternMatchVariance(p,f,ke.MAX_INDIVIDUAL_VARIANCE)<ke.MAX_AVG_VARIANCE?new Int32Array([y,w-1]):null}static patternMatchVariance(s,a,l){let u=s.length,d=0,f=0;for(let C=0;C<u;C++)d+=s[C],f+=a[C];if(d<f)return 1/0;let p=d/f;l*=p;let y=0;for(let C=0;C<u;C++){let w=s[C],x=a[C]*p,E=w>x?w-x:x-w;if(E>l)return 1/0;y+=E}return y/d}}ke.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),ke.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),ke.MAX_AVG_VARIANCE=.42,ke.MAX_INDIVIDUAL_VARIANCE=.8,ke.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),ke.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),ke.MAX_PIXEL_DRIFT=3,ke.MAX_PATTERN_DRIFT=5,ke.SKIPPED_ROW_COUNT_MAX=25,ke.ROW_STEP=5,ke.BARCODE_MIN_HEIGHT=10;class vn{constructor(s,a){if(a.length===0)throw new m;this.field=s;let l=a.length;if(l>1&&a[0]===0){let u=1;for(;u<l&&a[u]===0;)u++;u===l?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(l-u),A.arraycopy(a,u,this.coefficients,0,this.coefficients.length))}else this.coefficients=a}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(s){return this.coefficients[this.coefficients.length-1-s]}evaluateAt(s){if(s===0)return this.getCoefficient(0);if(s===1){let u=0;for(let d of this.coefficients)u=this.field.add(u,d);return u}let a=this.coefficients[0],l=this.coefficients.length;for(let u=1;u<l;u++)a=this.field.add(this.field.multiply(s,a),this.coefficients[u]);return a}add(s){if(!this.field.equals(s.field))throw new m("ModulusPolys do not have same ModulusGF field");if(this.isZero())return s;if(s.isZero())return this;let a=this.coefficients,l=s.coefficients;if(a.length>l.length){let f=a;a=l,l=f}let u=new Int32Array(l.length),d=l.length-a.length;A.arraycopy(l,0,u,0,d);for(let f=d;f<l.length;f++)u[f]=this.field.add(a[f-d],l[f]);return new vn(this.field,u)}subtract(s){if(!this.field.equals(s.field))throw new m("ModulusPolys do not have same ModulusGF field");return s.isZero()?this:this.add(s.negative())}multiply(s){return s instanceof vn?this.multiplyOther(s):this.multiplyScalar(s)}multiplyOther(s){if(!this.field.equals(s.field))throw new m("ModulusPolys do not have same ModulusGF field");if(this.isZero()||s.isZero())return new vn(this.field,new Int32Array([0]));let a=this.coefficients,l=a.length,u=s.coefficients,d=u.length,f=new Int32Array(l+d-1);for(let p=0;p<l;p++){let y=a[p];for(let C=0;C<d;C++)f[p+C]=this.field.add(f[p+C],this.field.multiply(y,u[C]))}return new vn(this.field,f)}negative(){let s=this.coefficients.length,a=new Int32Array(s);for(let l=0;l<s;l++)a[l]=this.field.subtract(0,this.coefficients[l]);return new vn(this.field,a)}multiplyScalar(s){if(s===0)return new vn(this.field,new Int32Array([0]));if(s===1)return this;let a=this.coefficients.length,l=new Int32Array(a);for(let u=0;u<a;u++)l[u]=this.field.multiply(this.coefficients[u],s);return new vn(this.field,l)}multiplyByMonomial(s,a){if(s<0)throw new m;if(a===0)return new vn(this.field,new Int32Array([0]));let l=this.coefficients.length,u=new Int32Array(l+s);for(let d=0;d<l;d++)u[d]=this.field.multiply(this.coefficients[d],a);return new vn(this.field,u)}toString(){let s=new yt;for(let a=this.getDegree();a>=0;a--){let l=this.getCoefficient(a);l!==0&&(l<0?(s.append(" - "),l=-l):s.length()>0&&s.append(" + "),(a===0||l!==1)&&s.append(l),a!==0&&(a===1?s.append("x"):(s.append("x^"),s.append(a))))}return s.toString()}}class jT{add(s,a){return(s+a)%this.modulus}subtract(s,a){return(this.modulus+s-a)%this.modulus}exp(s){return this.expTable[s]}log(s){if(s===0)throw new m;return this.logTable[s]}inverse(s){if(s===0)throw new fp;return this.expTable[this.modulus-this.logTable[s]-1]}multiply(s,a){return s===0||a===0?0:this.expTable[(this.logTable[s]+this.logTable[a])%(this.modulus-1)]}getSize(){return this.modulus}equals(s){return s===this}}class Dp extends jT{constructor(s,a){super(),this.modulus=s,this.expTable=new Int32Array(s),this.logTable=new Int32Array(s);let l=1;for(let u=0;u<s;u++)this.expTable[u]=l,l=l*a%s;for(let u=0;u<s-1;u++)this.logTable[this.expTable[u]]=u;this.zero=new vn(this,new Int32Array([0])),this.one=new vn(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(s,a){if(s<0)throw new m;if(a===0)return this.zero;let l=new Int32Array(s+1);return l[0]=a,new vn(this,l)}}Dp.PDF417_GF=new Dp(be.NUMBER_OF_CODEWORDS,3);class m_{constructor(){this.field=Dp.PDF417_GF}decode(s,a,l){let u=new vn(this.field,s),d=new Int32Array(a),f=!1;for(let M=a;M>0;M--){let O=u.evaluateAt(this.field.exp(M));d[a-M]=O,O!==0&&(f=!0)}if(!f)return 0;let p=this.field.getOne();if(l!=null)for(let M of l){let O=this.field.exp(s.length-1-M),k=new vn(this.field,new Int32Array([this.field.subtract(0,O),1]));p=p.multiply(k)}let y=new vn(this.field,d),C=this.runEuclideanAlgorithm(this.field.buildMonomial(a,1),y,a),w=C[0],x=C[1],E=this.findErrorLocations(w),D=this.findErrorMagnitudes(x,w,E);for(let M=0;M<E.length;M++){let O=s.length-1-this.field.log(E[M]);if(O<0)throw b.getChecksumInstance();s[O]=this.field.subtract(s[O],D[M])}return E.length}runEuclideanAlgorithm(s,a,l){if(s.getDegree()<a.getDegree()){let E=s;s=a,a=E}let u=s,d=a,f=this.field.getZero(),p=this.field.getOne();for(;d.getDegree()>=Math.round(l/2);){let E=u,D=f;if(u=d,f=p,u.isZero())throw b.getChecksumInstance();d=E;let M=this.field.getZero(),O=u.getCoefficient(u.getDegree()),k=this.field.inverse(O);for(;d.getDegree()>=u.getDegree()&&!d.isZero();){let F=d.getDegree()-u.getDegree(),X=this.field.multiply(d.getCoefficient(d.getDegree()),k);M=M.add(this.field.buildMonomial(F,X)),d=d.subtract(u.multiplyByMonomial(F,X))}p=M.multiply(f).subtract(D).negative()}let y=p.getCoefficient(0);if(y===0)throw b.getChecksumInstance();let C=this.field.inverse(y),w=p.multiply(C),x=d.multiply(C);return[w,x]}findErrorLocations(s){let a=s.getDegree(),l=new Int32Array(a),u=0;for(let d=1;d<this.field.getSize()&&u<a;d++)s.evaluateAt(d)===0&&(l[u]=this.field.inverse(d),u++);if(u!==a)throw b.getChecksumInstance();return l}findErrorMagnitudes(s,a,l){let u=a.getDegree(),d=new Int32Array(u);for(let C=1;C<=u;C++)d[u-C]=this.field.multiply(C,a.getCoefficient(C));let f=new vn(this.field,d),p=l.length,y=new Int32Array(p);for(let C=0;C<p;C++){let w=this.field.inverse(l[C]),x=this.field.subtract(0,s.evaluateAt(w)),E=this.field.inverse(f.evaluateAt(w));y[C]=this.field.multiply(x,E)}return y}}class jo{constructor(s,a,l,u,d){s instanceof jo?this.constructor_2(s):this.constructor_1(s,a,l,u,d)}constructor_1(s,a,l,u,d){let f=a==null||l==null,p=u==null||d==null;if(f&&p)throw new U;f?(a=new ue(0,u.getY()),l=new ue(0,d.getY())):p&&(u=new ue(s.getWidth()-1,a.getY()),d=new ue(s.getWidth()-1,l.getY())),this.image=s,this.topLeft=a,this.bottomLeft=l,this.topRight=u,this.bottomRight=d,this.minX=Math.trunc(Math.min(a.getX(),l.getX())),this.maxX=Math.trunc(Math.max(u.getX(),d.getX())),this.minY=Math.trunc(Math.min(a.getY(),u.getY())),this.maxY=Math.trunc(Math.max(l.getY(),d.getY()))}constructor_2(s){this.image=s.image,this.topLeft=s.getTopLeft(),this.bottomLeft=s.getBottomLeft(),this.topRight=s.getTopRight(),this.bottomRight=s.getBottomRight(),this.minX=s.getMinX(),this.maxX=s.getMaxX(),this.minY=s.getMinY(),this.maxY=s.getMaxY()}static merge(s,a){return s==null?a:a==null?s:new jo(s.image,s.topLeft,s.bottomLeft,a.topRight,a.bottomRight)}addMissingRows(s,a,l){let u=this.topLeft,d=this.bottomLeft,f=this.topRight,p=this.bottomRight;if(s>0){let y=l?this.topLeft:this.topRight,C=Math.trunc(y.getY()-s);C<0&&(C=0);let w=new ue(y.getX(),C);l?u=w:f=w}if(a>0){let y=l?this.bottomLeft:this.bottomRight,C=Math.trunc(y.getY()+a);C>=this.image.getHeight()&&(C=this.image.getHeight()-1);let w=new ue(y.getX(),C);l?d=w:p=w}return new jo(this.image,u,d,f,p)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class HT{constructor(s,a,l,u){this.columnCount=s,this.errorCorrectionLevel=u,this.rowCountUpperPart=a,this.rowCountLowerPart=l,this.rowCount=a+l}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class ul{constructor(){this.buffer=""}static form(s,a){let l=-1;function u(f,p,y,C,w,x){if(f==="%%")return"%";if(a[++l]===void 0)return;f=C?parseInt(C.substr(1)):void 0;let E=w?parseInt(w.substr(1)):void 0,D;switch(x){case"s":D=a[l];break;case"c":D=a[l][0];break;case"f":D=parseFloat(a[l]).toFixed(f);break;case"p":D=parseFloat(a[l]).toPrecision(f);break;case"e":D=parseFloat(a[l]).toExponential(f);break;case"x":D=parseInt(a[l]).toString(E||16);break;case"d":D=parseFloat(parseInt(a[l],E||10).toPrecision(f)).toFixed(0);break}D=typeof D=="object"?JSON.stringify(D):(+D).toString(E);let M=parseInt(y),O=y&&y[0]+""=="0"?"0":" ";for(;D.length<M;)D=p!==void 0?D+O:O+D;return D}let d=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return s.replace(d,u)}format(s,...a){this.buffer+=ul.form(s,a)}toString(){return this.buffer}}let y_=(()=>{class _{constructor(a){this.boundingBox=new jo(a),this.codewords=new Array(a.getMaxY()-a.getMinY()+1)}getCodewordNearby(a){let l=this.getCodeword(a);if(l!=null)return l;for(let u=1;u<_.MAX_NEARBY_DISTANCE;u++){let d=this.imageRowToCodewordIndex(a)-u;if(d>=0&&(l=this.codewords[d],l!=null)||(d=this.imageRowToCodewordIndex(a)+u,d<this.codewords.length&&(l=this.codewords[d],l!=null)))return l}return null}imageRowToCodewordIndex(a){return a-this.boundingBox.getMinY()}setCodeword(a,l){this.codewords[this.imageRowToCodewordIndex(a)]=l}getCodeword(a){return this.codewords[this.imageRowToCodewordIndex(a)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){let a=new ul,l=0;for(let u of this.codewords){if(u==null){a.format("%3d:    |   %n",l++);continue}a.format("%3d: %3d|%3d%n",l++,u.getRowNumber(),u.getValue())}return a.toString()}}return _.MAX_NEARBY_DISTANCE=5,_})();class dl{constructor(){this.values=new Map}setValue(s){s=Math.trunc(s);let a=this.values.get(s);a==null&&(a=0),a++,this.values.set(s,a)}getValue(){let s=-1,a=new Array;for(let[l,u]of this.values.entries()){let d={getKey:()=>l,getValue:()=>u};d.getValue()>s?(s=d.getValue(),a=[],a.push(d.getKey())):d.getValue()===s&&a.push(d.getKey())}return be.toIntArray(a)}getConfidence(s){return this.values.get(s)}}class C_ extends y_{constructor(s,a){super(s),this._isLeft=a}setRowNumbers(){for(let s of this.getCodewords())s?.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(s){let a=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(a,s);let l=this.getBoundingBox(),u=this._isLeft?l.getTopLeft():l.getTopRight(),d=this._isLeft?l.getBottomLeft():l.getBottomRight(),f=this.imageRowToCodewordIndex(Math.trunc(u.getY())),p=this.imageRowToCodewordIndex(Math.trunc(d.getY())),y=-1,C=1,w=0;for(let x=f;x<p;x++){if(a[x]==null)continue;let E=a[x],D=E.getRowNumber()-y;if(D===0)w++;else if(D===1)C=Math.max(C,w),w=1,y=E.getRowNumber();else if(D<0||E.getRowNumber()>=s.getRowCount()||D>x)a[x]=null;else{let M;C>2?M=(C-2)*D:M=D;let O=M>=x;for(let k=1;k<=M&&!O;k++)O=a[x-k]!=null;O?a[x]=null:(y=E.getRowNumber(),w=1)}}}getRowHeights(){let s=this.getBarcodeMetadata();if(s==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(s);let a=new Int32Array(s.getRowCount());for(let l of this.getCodewords())if(l!=null){let u=l.getRowNumber();if(u>=a.length)continue;a[u]++}return a}adjustIncompleteIndicatorColumnRowNumbers(s){let a=this.getBoundingBox(),l=this._isLeft?a.getTopLeft():a.getTopRight(),u=this._isLeft?a.getBottomLeft():a.getBottomRight(),d=this.imageRowToCodewordIndex(Math.trunc(l.getY())),f=this.imageRowToCodewordIndex(Math.trunc(u.getY())),p=this.getCodewords(),y=-1;for(let C=d;C<f;C++){if(p[C]==null)continue;let w=p[C];w.setRowNumberAsRowIndicatorColumn();let x=w.getRowNumber()-y;x===0||(x===1?y=w.getRowNumber():w.getRowNumber()>=s.getRowCount()?p[C]=null:y=w.getRowNumber())}}getBarcodeMetadata(){let s=this.getCodewords(),a=new dl,l=new dl,u=new dl,d=new dl;for(let p of s){if(p==null)continue;p.setRowNumberAsRowIndicatorColumn();let y=p.getValue()%30,C=p.getRowNumber();switch(this._isLeft||(C+=2),C%3){case 0:l.setValue(y*3+1);break;case 1:d.setValue(y/3),u.setValue(y%3);break;case 2:a.setValue(y+1);break}}if(a.getValue().length===0||l.getValue().length===0||u.getValue().length===0||d.getValue().length===0||a.getValue()[0]<1||l.getValue()[0]+u.getValue()[0]<be.MIN_ROWS_IN_BARCODE||l.getValue()[0]+u.getValue()[0]>be.MAX_ROWS_IN_BARCODE)return null;let f=new HT(a.getValue()[0],l.getValue()[0],u.getValue()[0],d.getValue()[0]);return this.removeIncorrectCodewords(s,f),f}removeIncorrectCodewords(s,a){for(let l=0;l<s.length;l++){let u=s[l];if(s[l]==null)continue;let d=u.getValue()%30,f=u.getRowNumber();if(f>a.getRowCount()){s[l]=null;continue}switch(this._isLeft||(f+=2),f%3){case 0:d*3+1!==a.getRowCountUpperPart()&&(s[l]=null);break;case 1:(Math.trunc(d/3)!==a.getErrorCorrectionLevel()||d%3!==a.getRowCountLowerPart())&&(s[l]=null);break;case 2:d+1!==a.getColumnCount()&&(s[l]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class fl{constructor(s,a){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=s,this.barcodeColumnCount=s.getColumnCount(),this.boundingBox=a,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let s=be.MAX_CODEWORDS_IN_BARCODE,a;do a=s,s=this.adjustRowNumbersAndGetCount();while(s>0&&s<a);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(s){s?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let s=this.adjustRowNumbersByRow();if(s===0)return 0;for(let a=1;a<this.barcodeColumnCount+1;a++){let l=this.detectionResultColumns[a].getCodewords();for(let u=0;u<l.length;u++)l[u]!=null&&(l[u].hasValidRowNumber()||this.adjustRowNumbers(a,u,l))}return s}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let s=this.detectionResultColumns[0].getCodewords(),a=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let l=0;l<s.length;l++)if(s[l]!=null&&a[l]!=null&&s[l].getRowNumber()===a[l].getRowNumber())for(let u=1;u<=this.barcodeColumnCount;u++){let d=this.detectionResultColumns[u].getCodewords()[l];d!=null&&(d.setRowNumber(s[l].getRowNumber()),d.hasValidRowNumber()||(this.detectionResultColumns[u].getCodewords()[l]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let s=0,a=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let l=0;l<a.length;l++){if(a[l]==null)continue;let u=a[l].getRowNumber(),d=0;for(let f=this.barcodeColumnCount+1;f>0&&d<this.ADJUST_ROW_NUMBER_SKIP;f--){let p=this.detectionResultColumns[f].getCodewords()[l];p!=null&&(d=fl.adjustRowNumberIfValid(u,d,p),p.hasValidRowNumber()||s++)}}return s}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let s=0,a=this.detectionResultColumns[0].getCodewords();for(let l=0;l<a.length;l++){if(a[l]==null)continue;let u=a[l].getRowNumber(),d=0;for(let f=1;f<this.barcodeColumnCount+1&&d<this.ADJUST_ROW_NUMBER_SKIP;f++){let p=this.detectionResultColumns[f].getCodewords()[l];p!=null&&(d=fl.adjustRowNumberIfValid(u,d,p),p.hasValidRowNumber()||s++)}}return s}static adjustRowNumberIfValid(s,a,l){return l==null||l.hasValidRowNumber()||(l.isValidRowNumber(s)?(l.setRowNumber(s),a=0):++a),a}adjustRowNumbers(s,a,l){if(!this.detectionResultColumns[s-1])return;let u=l[a],d=this.detectionResultColumns[s-1].getCodewords(),f=d;this.detectionResultColumns[s+1]!=null&&(f=this.detectionResultColumns[s+1].getCodewords());let p=new Array(14);p[2]=d[a],p[3]=f[a],a>0&&(p[0]=l[a-1],p[4]=d[a-1],p[5]=f[a-1]),a>1&&(p[8]=l[a-2],p[10]=d[a-2],p[11]=f[a-2]),a<l.length-1&&(p[1]=l[a+1],p[6]=d[a+1],p[7]=f[a+1]),a<l.length-2&&(p[9]=l[a+2],p[12]=d[a+2],p[13]=f[a+2]);for(let y of p)if(fl.adjustRowNumber(u,y))return}static adjustRowNumber(s,a){return a==null?!1:a.hasValidRowNumber()&&a.getBucket()===s.getBucket()?(s.setRowNumber(a.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(s){this.boundingBox=s}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(s,a){this.detectionResultColumns[s]=a}getDetectionResultColumn(s){return this.detectionResultColumns[s]}toString(){let s=this.detectionResultColumns[0];s==null&&(s=this.detectionResultColumns[this.barcodeColumnCount+1]);let a=new ul;for(let l=0;l<s.getCodewords().length;l++){a.format("CW %3d:",l);for(let u=0;u<this.barcodeColumnCount+2;u++){if(this.detectionResultColumns[u]==null){a.format("    |   ");continue}let d=this.detectionResultColumns[u].getCodewords()[l];if(d==null){a.format("    |   ");continue}a.format(" %3d|%3d",d.getRowNumber(),d.getValue())}a.format("%n")}return a.toString()}}let zT=(()=>{class _{constructor(a,l,u,d){this.rowNumber=_.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(a),this.endX=Math.trunc(l),this.bucket=Math.trunc(u),this.value=Math.trunc(d)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(a){return a!==_.BARCODE_ROW_UNKNOWN&&this.bucket===a%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(a){this.rowNumber=a}toString(){return this.rowNumber+"|"+this.value}}return _.BARCODE_ROW_UNKNOWN=-1,_})();class qn{static initialize(){for(let s=0;s<be.SYMBOL_TABLE.length;s++){let a=be.SYMBOL_TABLE[s],l=a&1;for(let u=0;u<be.BARS_IN_MODULE;u++){let d=0;for(;(a&1)===l;)d+=1,a>>=1;l=a&1,qn.RATIOS_TABLE[s]||(qn.RATIOS_TABLE[s]=new Array(be.BARS_IN_MODULE)),qn.RATIOS_TABLE[s][be.BARS_IN_MODULE-u-1]=Math.fround(d/be.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(s){let a=qn.getDecodedCodewordValue(qn.sampleBitCounts(s));return a!==-1?a:qn.getClosestDecodedValue(s)}static sampleBitCounts(s){let a=et.sum(s),l=new Int32Array(be.BARS_IN_MODULE),u=0,d=0;for(let f=0;f<be.MODULES_IN_CODEWORD;f++){let p=a/(2*be.MODULES_IN_CODEWORD)+f*a/be.MODULES_IN_CODEWORD;d+s[u]<=p&&(d+=s[u],u++),l[u]++}return l}static getDecodedCodewordValue(s){let a=qn.getBitValue(s);return be.getCodeword(a)===-1?-1:a}static getBitValue(s){let a=0;for(let l=0;l<s.length;l++)for(let u=0;u<s[l];u++)a=a<<1|(l%2===0?1:0);return Math.trunc(a)}static getClosestDecodedValue(s){let a=et.sum(s),l=new Array(be.BARS_IN_MODULE);if(a>1)for(let f=0;f<l.length;f++)l[f]=Math.fround(s[f]/a);let u=du.MAX_VALUE,d=-1;this.bSymbolTableReady||qn.initialize();for(let f=0;f<qn.RATIOS_TABLE.length;f++){let p=0,y=qn.RATIOS_TABLE[f];for(let C=0;C<be.BARS_IN_MODULE;C++){let w=Math.fround(y[C]-l[C]);if(p+=Math.fround(w*w),p>=u)break}p<u&&(u=p,d=be.SYMBOL_TABLE[f])}return d}}qn.bSymbolTableReady=!1,qn.RATIOS_TABLE=new Array(be.SYMBOL_TABLE.length).map(_=>_=new Array(be.BARS_IN_MODULE));class __{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(s){this.segmentIndex=s}getFileId(){return this.fileId}setFileId(s){this.fileId=s}getOptionalData(){return this.optionalData}setOptionalData(s){this.optionalData=s}isLastSegment(){return this.lastSegment}setLastSegment(s){this.lastSegment=s}getSegmentCount(){return this.segmentCount}setSegmentCount(s){this.segmentCount=s}getSender(){return this.sender||null}setSender(s){this.sender=s}getAddressee(){return this.addressee||null}setAddressee(s){this.addressee=s}getFileName(){return this.fileName}setFileName(s){this.fileName=s}getFileSize(){return this.fileSize}setFileSize(s){this.fileSize=s}getChecksum(){return this.checksum}setChecksum(s){this.checksum=s}getTimestamp(){return this.timestamp}setTimestamp(s){this.timestamp=s}}class w_{static parseLong(s,a=void 0){return parseInt(s,a)}}let WT=(()=>{class _ extends h{}return _.kind="NullPointerException",_})();class GT{writeBytes(s){this.writeBytesOffset(s,0,s.length)}writeBytesOffset(s,a,l){if(s==null)throw new WT;if(a<0||a>s.length||l<0||a+l>s.length||a+l<0)throw new R;if(l===0)return;for(let u=0;u<l;u++)this.write(s[a+u])}flush(){}close(){}}class $T extends h{}class qT extends GT{constructor(s=32){if(super(),this.count=0,s<0)throw new m("Negative initial size: "+s);this.buf=new Uint8Array(s)}ensureCapacity(s){s-this.buf.length>0&&this.grow(s)}grow(s){let l=this.buf.length<<1;if(l-s<0&&(l=s),l<0){if(s<0)throw new $T;l=G.MAX_VALUE}this.buf=Y.copyOfUint8Array(this.buf,l)}write(s){this.ensureCapacity(this.count+1),this.buf[this.count]=s,this.count+=1}writeBytesOffset(s,a,l){if(a<0||a>s.length||l<0||a+l-s.length>0)throw new R;this.ensureCapacity(this.count+l),A.arraycopy(s,a,this.buf,this.count,l),this.count+=l}writeTo(s){s.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return Y.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(s){return s?typeof s=="string"?this.toString_string(s):this.toString_number(s):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(s){return new String(this.buf).toString()}toString_number(s){return new String(this.buf).toString()}close(){}}var _t=function(_){return _[_.ALPHA=0]="ALPHA",_[_.LOWER=1]="LOWER",_[_.MIXED=2]="MIXED",_[_.PUNCT=3]="PUNCT",_[_.ALPHA_SHIFT=4]="ALPHA_SHIFT",_[_.PUNCT_SHIFT=5]="PUNCT_SHIFT",_}(_t||{});function v_(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let wu;function ro(_){if(typeof wu>"u"&&(wu=v_()),wu===null)throw new Error("BigInt is not supported!");return wu(_)}function YT(){let _=[];_[0]=ro(1);let s=ro(900);_[1]=s;for(let a=2;a<16;a++)_[a]=_[a-1]*s;return _}class B{static decode(s,a){let l=new yt(""),u=q.ISO8859_1;l.enableDecoding(u);let d=1,f=s[d++],p=new __;for(;d<s[0];){switch(f){case B.TEXT_COMPACTION_MODE_LATCH:d=B.textCompaction(s,d,l);break;case B.BYTE_COMPACTION_MODE_LATCH:case B.BYTE_COMPACTION_MODE_LATCH_6:d=B.byteCompaction(f,s,u,d,l);break;case B.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(s[d++]);break;case B.NUMERIC_COMPACTION_MODE_LATCH:d=B.numericCompaction(s,d,l);break;case B.ECI_CHARSET:let C=q.getCharacterSetECIByValue(s[d++]);break;case B.ECI_GENERAL_PURPOSE:d+=2;break;case B.ECI_USER_DEFINED:d++;break;case B.BEGIN_MACRO_PDF417_CONTROL_BLOCK:d=B.decodeMacroBlock(s,d,p);break;case B.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case B.MACRO_PDF417_TERMINATOR:throw new H;default:d--,d=B.textCompaction(s,d,l);break}if(d<s.length)f=s[d++];else throw H.getFormatInstance()}if(l.length()===0)throw H.getFormatInstance();let y=new rl(null,l.toString(),null,a);return y.setOther(p),y}static decodeMacroBlock(s,a,l){if(a+B.NUMBER_OF_SEQUENCE_CODEWORDS>s[0])throw H.getFormatInstance();let u=new Int32Array(B.NUMBER_OF_SEQUENCE_CODEWORDS);for(let p=0;p<B.NUMBER_OF_SEQUENCE_CODEWORDS;p++,a++)u[p]=s[a];l.setSegmentIndex(G.parseInt(B.decodeBase900toBase10(u,B.NUMBER_OF_SEQUENCE_CODEWORDS)));let d=new yt;a=B.textCompaction(s,a,d),l.setFileId(d.toString());let f=-1;for(s[a]===B.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(f=a+1);a<s[0];)switch(s[a]){case B.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(a++,s[a]){case B.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let p=new yt;a=B.textCompaction(s,a+1,p),l.setFileName(p.toString());break;case B.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let y=new yt;a=B.textCompaction(s,a+1,y),l.setSender(y.toString());break;case B.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let C=new yt;a=B.textCompaction(s,a+1,C),l.setAddressee(C.toString());break;case B.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let w=new yt;a=B.numericCompaction(s,a+1,w),l.setSegmentCount(G.parseInt(w.toString()));break;case B.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let x=new yt;a=B.numericCompaction(s,a+1,x),l.setTimestamp(w_.parseLong(x.toString()));break;case B.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let E=new yt;a=B.numericCompaction(s,a+1,E),l.setChecksum(G.parseInt(E.toString()));break;case B.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let D=new yt;a=B.numericCompaction(s,a+1,D),l.setFileSize(w_.parseLong(D.toString()));break;default:throw H.getFormatInstance()}break;case B.MACRO_PDF417_TERMINATOR:a++,l.setLastSegment(!0);break;default:throw H.getFormatInstance()}if(f!==-1){let p=a-f;l.isLastSegment()&&p--,l.setOptionalData(Y.copyOfRange(s,f,f+p))}return a}static textCompaction(s,a,l){let u=new Int32Array((s[0]-a)*2),d=new Int32Array((s[0]-a)*2),f=0,p=!1;for(;a<s[0]&&!p;){let y=s[a++];if(y<B.TEXT_COMPACTION_MODE_LATCH)u[f]=y/30,u[f+1]=y%30,f+=2;else switch(y){case B.TEXT_COMPACTION_MODE_LATCH:u[f++]=B.TEXT_COMPACTION_MODE_LATCH;break;case B.BYTE_COMPACTION_MODE_LATCH:case B.BYTE_COMPACTION_MODE_LATCH_6:case B.NUMERIC_COMPACTION_MODE_LATCH:case B.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case B.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case B.MACRO_PDF417_TERMINATOR:a--,p=!0;break;case B.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u[f]=B.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,y=s[a++],d[f]=y,f++;break}}return B.decodeTextCompaction(u,d,f,l),a}static decodeTextCompaction(s,a,l,u){let d=_t.ALPHA,f=_t.ALPHA,p=0;for(;p<l;){let y=s[p],C="";switch(d){case _t.ALPHA:if(y<26)C=String.fromCharCode(65+y);else switch(y){case 26:C=" ";break;case B.LL:d=_t.LOWER;break;case B.ML:d=_t.MIXED;break;case B.PS:f=d,d=_t.PUNCT_SHIFT;break;case B.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(a[p]);break;case B.TEXT_COMPACTION_MODE_LATCH:d=_t.ALPHA;break}break;case _t.LOWER:if(y<26)C=String.fromCharCode(97+y);else switch(y){case 26:C=" ";break;case B.AS:f=d,d=_t.ALPHA_SHIFT;break;case B.ML:d=_t.MIXED;break;case B.PS:f=d,d=_t.PUNCT_SHIFT;break;case B.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(a[p]);break;case B.TEXT_COMPACTION_MODE_LATCH:d=_t.ALPHA;break}break;case _t.MIXED:if(y<B.PL)C=B.MIXED_CHARS[y];else switch(y){case B.PL:d=_t.PUNCT;break;case 26:C=" ";break;case B.LL:d=_t.LOWER;break;case B.AL:d=_t.ALPHA;break;case B.PS:f=d,d=_t.PUNCT_SHIFT;break;case B.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(a[p]);break;case B.TEXT_COMPACTION_MODE_LATCH:d=_t.ALPHA;break}break;case _t.PUNCT:if(y<B.PAL)C=B.PUNCT_CHARS[y];else switch(y){case B.PAL:d=_t.ALPHA;break;case B.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(a[p]);break;case B.TEXT_COMPACTION_MODE_LATCH:d=_t.ALPHA;break}break;case _t.ALPHA_SHIFT:if(d=f,y<26)C=String.fromCharCode(65+y);else switch(y){case 26:C=" ";break;case B.TEXT_COMPACTION_MODE_LATCH:d=_t.ALPHA;break}break;case _t.PUNCT_SHIFT:if(d=f,y<B.PAL)C=B.PUNCT_CHARS[y];else switch(y){case B.PAL:d=_t.ALPHA;break;case B.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(a[p]);break;case B.TEXT_COMPACTION_MODE_LATCH:d=_t.ALPHA;break}break}C!==""&&u.append(C),p++}}static byteCompaction(s,a,l,u,d){let f=new qT,p=0,y=0,C=!1;switch(s){case B.BYTE_COMPACTION_MODE_LATCH:let w=new Int32Array(6),x=a[u++];for(;u<a[0]&&!C;)switch(w[p++]=x,y=900*y+x,x=a[u++],x){case B.TEXT_COMPACTION_MODE_LATCH:case B.BYTE_COMPACTION_MODE_LATCH:case B.NUMERIC_COMPACTION_MODE_LATCH:case B.BYTE_COMPACTION_MODE_LATCH_6:case B.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case B.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case B.MACRO_PDF417_TERMINATOR:u--,C=!0;break;default:if(p%5===0&&p>0){for(let E=0;E<6;++E)f.write(Number(ro(y)>>ro(8*(5-E))));y=0,p=0}break}u===a[0]&&x<B.TEXT_COMPACTION_MODE_LATCH&&(w[p++]=x);for(let E=0;E<p;E++)f.write(w[E]);break;case B.BYTE_COMPACTION_MODE_LATCH_6:for(;u<a[0]&&!C;){let E=a[u++];if(E<B.TEXT_COMPACTION_MODE_LATCH)p++,y=900*y+E;else switch(E){case B.TEXT_COMPACTION_MODE_LATCH:case B.BYTE_COMPACTION_MODE_LATCH:case B.NUMERIC_COMPACTION_MODE_LATCH:case B.BYTE_COMPACTION_MODE_LATCH_6:case B.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case B.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case B.MACRO_PDF417_TERMINATOR:u--,C=!0;break}if(p%5===0&&p>0){for(let D=0;D<6;++D)f.write(Number(ro(y)>>ro(8*(5-D))));y=0,p=0}}break}return d.append(On.decode(f.toByteArray(),l)),u}static numericCompaction(s,a,l){let u=0,d=!1,f=new Int32Array(B.MAX_NUMERIC_CODEWORDS);for(;a<s[0]&&!d;){let p=s[a++];if(a===s[0]&&(d=!0),p<B.TEXT_COMPACTION_MODE_LATCH)f[u]=p,u++;else switch(p){case B.TEXT_COMPACTION_MODE_LATCH:case B.BYTE_COMPACTION_MODE_LATCH:case B.BYTE_COMPACTION_MODE_LATCH_6:case B.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case B.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case B.MACRO_PDF417_TERMINATOR:a--,d=!0;break}(u%B.MAX_NUMERIC_CODEWORDS===0||p===B.NUMERIC_COMPACTION_MODE_LATCH||d)&&u>0&&(l.append(B.decodeBase900toBase10(f,u)),u=0)}return a}static decodeBase900toBase10(s,a){let l=ro(0);for(let d=0;d<a;d++)l+=B.EXP900[a-d-1]*ro(s[d]);let u=l.toString();if(u.charAt(0)!=="1")throw new H;return u.substring(1)}}B.TEXT_COMPACTION_MODE_LATCH=900,B.BYTE_COMPACTION_MODE_LATCH=901,B.NUMERIC_COMPACTION_MODE_LATCH=902,B.BYTE_COMPACTION_MODE_LATCH_6=924,B.ECI_USER_DEFINED=925,B.ECI_GENERAL_PURPOSE=926,B.ECI_CHARSET=927,B.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,B.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,B.MACRO_PDF417_TERMINATOR=922,B.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,B.MAX_NUMERIC_CODEWORDS=15,B.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,B.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,B.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,B.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,B.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,B.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,B.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,B.PL=25,B.LL=27,B.AS=27,B.ML=28,B.AL=28,B.PS=29,B.PAL=29,B.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,B.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",B.EXP900=v_()?YT():[],B.NUMBER_OF_SEQUENCE_CODEWORDS=2;class Ue{constructor(){}static decode(s,a,l,u,d,f,p){let y=new jo(s,a,l,u,d),C=null,w=null,x;for(let M=!0;;M=!1){if(a!=null&&(C=Ue.getRowIndicatorColumn(s,y,a,!0,f,p)),u!=null&&(w=Ue.getRowIndicatorColumn(s,y,u,!1,f,p)),x=Ue.merge(C,w),x==null)throw U.getNotFoundInstance();let O=x.getBoundingBox();if(M&&O!=null&&(O.getMinY()<y.getMinY()||O.getMaxY()>y.getMaxY()))y=O;else break}x.setBoundingBox(y);let E=x.getBarcodeColumnCount()+1;x.setDetectionResultColumn(0,C),x.setDetectionResultColumn(E,w);let D=C!=null;for(let M=1;M<=E;M++){let O=D?M:E-M;if(x.getDetectionResultColumn(O)!==void 0)continue;let k;O===0||O===E?k=new C_(y,O===0):k=new y_(y),x.setDetectionResultColumn(O,k);let F=-1,X=F;for(let re=y.getMinY();re<=y.getMaxY();re++){if(F=Ue.getStartColumn(x,O,re,D),F<0||F>y.getMaxX()){if(X===-1)continue;F=X}let V=Ue.detectCodeword(s,y.getMinX(),y.getMaxX(),D,F,re,f,p);V!=null&&(k.setCodeword(re,V),X=F,f=Math.min(f,V.getWidth()),p=Math.max(p,V.getWidth()))}}return Ue.createDecoderResult(x)}static merge(s,a){if(s==null&&a==null)return null;let l=Ue.getBarcodeMetadata(s,a);if(l==null)return null;let u=jo.merge(Ue.adjustBoundingBox(s),Ue.adjustBoundingBox(a));return new fl(l,u)}static adjustBoundingBox(s){if(s==null)return null;let a=s.getRowHeights();if(a==null)return null;let l=Ue.getMax(a),u=0;for(let p of a)if(u+=l-p,p>0)break;let d=s.getCodewords();for(let p=0;u>0&&d[p]==null;p++)u--;let f=0;for(let p=a.length-1;p>=0&&(f+=l-a[p],!(a[p]>0));p--);for(let p=d.length-1;f>0&&d[p]==null;p--)f--;return s.getBoundingBox().addMissingRows(u,f,s.isLeft())}static getMax(s){let a=-1;for(let l of s)a=Math.max(a,l);return a}static getBarcodeMetadata(s,a){let l;if(s==null||(l=s.getBarcodeMetadata())==null)return a==null?null:a.getBarcodeMetadata();let u;return a==null||(u=a.getBarcodeMetadata())==null?l:l.getColumnCount()!==u.getColumnCount()&&l.getErrorCorrectionLevel()!==u.getErrorCorrectionLevel()&&l.getRowCount()!==u.getRowCount()?null:l}static getRowIndicatorColumn(s,a,l,u,d,f){let p=new C_(a,u);for(let y=0;y<2;y++){let C=y===0?1:-1,w=Math.trunc(Math.trunc(l.getX()));for(let x=Math.trunc(Math.trunc(l.getY()));x<=a.getMaxY()&&x>=a.getMinY();x+=C){let E=Ue.detectCodeword(s,0,s.getWidth(),u,w,x,d,f);E!=null&&(p.setCodeword(x,E),u?w=E.getStartX():w=E.getEndX())}}return p}static adjustCodewordCount(s,a){let l=a[0][1],u=l.getValue(),d=s.getBarcodeColumnCount()*s.getBarcodeRowCount()-Ue.getNumberOfECCodeWords(s.getBarcodeECLevel());if(u.length===0){if(d<1||d>be.MAX_CODEWORDS_IN_BARCODE)throw U.getNotFoundInstance();l.setValue(d)}else u[0]!==d&&l.setValue(d)}static createDecoderResult(s){let a=Ue.createBarcodeMatrix(s);Ue.adjustCodewordCount(s,a);let l=new Array,u=new Int32Array(s.getBarcodeRowCount()*s.getBarcodeColumnCount()),d=[],f=new Array;for(let y=0;y<s.getBarcodeRowCount();y++)for(let C=0;C<s.getBarcodeColumnCount();C++){let w=a[y][C+1].getValue(),x=y*s.getBarcodeColumnCount()+C;w.length===0?l.push(x):w.length===1?u[x]=w[0]:(f.push(x),d.push(w))}let p=new Array(d.length);for(let y=0;y<p.length;y++)p[y]=d[y];return Ue.createDecoderResultFromAmbiguousValues(s.getBarcodeECLevel(),u,be.toIntArray(l),be.toIntArray(f),p)}static createDecoderResultFromAmbiguousValues(s,a,l,u,d){let f=new Int32Array(u.length),p=100;for(;p-- >0;){for(let y=0;y<f.length;y++)a[u[y]]=d[y][f[y]];try{return Ue.decodeCodewords(a,s,l)}catch(y){if(!(y instanceof b))throw y}if(f.length===0)throw b.getChecksumInstance();for(let y=0;y<f.length;y++)if(f[y]<d[y].length-1){f[y]++;break}else if(f[y]=0,y===f.length-1)throw b.getChecksumInstance()}throw b.getChecksumInstance()}static createBarcodeMatrix(s){let a=Array.from({length:s.getBarcodeRowCount()},()=>new Array(s.getBarcodeColumnCount()+2));for(let u=0;u<a.length;u++)for(let d=0;d<a[u].length;d++)a[u][d]=new dl;let l=0;for(let u of s.getDetectionResultColumns()){if(u!=null){for(let d of u.getCodewords())if(d!=null){let f=d.getRowNumber();if(f>=0){if(f>=a.length)continue;a[f][l].setValue(d.getValue())}}}l++}return a}static isValidBarcodeColumn(s,a){return a>=0&&a<=s.getBarcodeColumnCount()+1}static getStartColumn(s,a,l,u){let d=u?1:-1,f=null;if(Ue.isValidBarcodeColumn(s,a-d)&&(f=s.getDetectionResultColumn(a-d).getCodeword(l)),f!=null)return u?f.getEndX():f.getStartX();if(f=s.getDetectionResultColumn(a).getCodewordNearby(l),f!=null)return u?f.getStartX():f.getEndX();if(Ue.isValidBarcodeColumn(s,a-d)&&(f=s.getDetectionResultColumn(a-d).getCodewordNearby(l)),f!=null)return u?f.getEndX():f.getStartX();let p=0;for(;Ue.isValidBarcodeColumn(s,a-d);){a-=d;for(let y of s.getDetectionResultColumn(a).getCodewords())if(y!=null)return(u?y.getEndX():y.getStartX())+d*p*(y.getEndX()-y.getStartX());p++}return u?s.getBoundingBox().getMinX():s.getBoundingBox().getMaxX()}static detectCodeword(s,a,l,u,d,f,p,y){d=Ue.adjustCodewordStartColumn(s,a,l,u,d,f);let C=Ue.getModuleBitCount(s,a,l,u,d,f);if(C==null)return null;let w,x=et.sum(C);if(u)w=d+x;else{for(let M=0;M<C.length/2;M++){let O=C[M];C[M]=C[C.length-1-M],C[C.length-1-M]=O}w=d,d=w-x}if(!Ue.checkCodewordSkew(x,p,y))return null;let E=qn.getDecodedValue(C),D=be.getCodeword(E);return D===-1?null:new zT(d,w,Ue.getCodewordBucketNumber(E),D)}static getModuleBitCount(s,a,l,u,d,f){let p=d,y=new Int32Array(8),C=0,w=u?1:-1,x=u;for(;(u?p<l:p>=a)&&C<y.length;)s.get(p,f)===x?(y[C]++,p+=w):(C++,x=!x);return C===y.length||p===(u?l:a)&&C===y.length-1?y:null}static getNumberOfECCodeWords(s){return 2<<s}static adjustCodewordStartColumn(s,a,l,u,d,f){let p=d,y=u?-1:1;for(let C=0;C<2;C++){for(;(u?p>=a:p<l)&&u===s.get(p,f);){if(Math.abs(d-p)>Ue.CODEWORD_SKEW_SIZE)return d;p+=y}y=-y,u=!u}return p}static checkCodewordSkew(s,a,l){return a-Ue.CODEWORD_SKEW_SIZE<=s&&s<=l+Ue.CODEWORD_SKEW_SIZE}static decodeCodewords(s,a,l){if(s.length===0)throw H.getFormatInstance();let u=1<<a+1,d=Ue.correctErrors(s,l,u);Ue.verifyCodewordCount(s,u);let f=B.decode(s,""+a);return f.setErrorsCorrected(d),f.setErasures(l.length),f}static correctErrors(s,a,l){if(a!=null&&a.length>l/2+Ue.MAX_ERRORS||l<0||l>Ue.MAX_EC_CODEWORDS)throw b.getChecksumInstance();return Ue.errorCorrection.decode(s,l,a)}static verifyCodewordCount(s,a){if(s.length<4)throw H.getFormatInstance();let l=s[0];if(l>s.length)throw H.getFormatInstance();if(l===0)if(a<s.length)s[0]=s.length-a;else throw H.getFormatInstance()}static getBitCountForCodeword(s){let a=new Int32Array(8),l=0,u=a.length-1;for(;!((s&1)!==l&&(l=s&1,u--,u<0));)a[u]++,s>>=1;return a}static getCodewordBucketNumber(s){return s instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(s):this.getCodewordBucketNumber_number(s)}static getCodewordBucketNumber_number(s){return Ue.getCodewordBucketNumber(Ue.getBitCountForCodeword(s))}static getCodewordBucketNumber_Int32Array(s){return(s[0]-s[2]+s[4]-s[6]+9)%9}static toString(s){let a=new ul;for(let l=0;l<s.length;l++){a.format("Row %2d: ",l);for(let u=0;u<s[l].length;u++){let d=s[l][u];d.getValue().length===0?a.format("        ",null):a.format("%4d(%2d)",d.getValue()[0],d.getConfidence(d.getValue()[0]))}a.format("%n")}return a.toString()}}Ue.CODEWORD_SKEW_SIZE=2,Ue.MAX_ERRORS=3,Ue.MAX_EC_CODEWORDS=512,Ue.errorCorrection=new m_;class bn{decode(s,a=null){let l=bn.decode(s,a,!1);if(l==null||l.length===0||l[0]==null)throw U.getNotFoundInstance();return l[0]}decodeMultiple(s,a=null){try{return bn.decode(s,a,!0)}catch(l){throw l instanceof H||l instanceof b?U.getNotFoundInstance():l}}static decode(s,a,l){let u=new Array,d=ke.detectMultiple(s,a,l);for(let f of d.getPoints()){let p=Ue.decode(d.getBits(),f[4],f[5],f[6],f[7],bn.getMinCodewordWidth(f),bn.getMaxCodewordWidth(f)),y=new Fn(p.getText(),p.getRawBytes(),void 0,f,Ce.PDF_417);y.putMetadata(dn.ERROR_CORRECTION_LEVEL,p.getECLevel());let C=p.getOther();C!=null&&y.putMetadata(dn.PDF417_EXTRA_METADATA,C),u.push(y)}return u.map(f=>f)}static getMaxWidth(s,a){return s==null||a==null?0:Math.trunc(Math.abs(s.getX()-a.getX()))}static getMinWidth(s,a){return s==null||a==null?G.MAX_VALUE:Math.trunc(Math.abs(s.getX()-a.getX()))}static getMaxCodewordWidth(s){return Math.floor(Math.max(Math.max(bn.getMaxWidth(s[0],s[4]),bn.getMaxWidth(s[6],s[2])*be.MODULES_IN_CODEWORD/be.MODULES_IN_STOP_PATTERN),Math.max(bn.getMaxWidth(s[1],s[5]),bn.getMaxWidth(s[7],s[3])*be.MODULES_IN_CODEWORD/be.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(s){return Math.floor(Math.min(Math.min(bn.getMinWidth(s[0],s[4]),bn.getMinWidth(s[6],s[2])*be.MODULES_IN_CODEWORD/be.MODULES_IN_STOP_PATTERN),Math.min(bn.getMinWidth(s[1],s[5]),bn.getMinWidth(s[7],s[3])*be.MODULES_IN_CODEWORD/be.MODULES_IN_STOP_PATTERN)))}reset(){}}let Ap=(()=>{class _ extends h{}return _.kind="ReaderException",_})();class b_{constructor(s,a){this.verbose=s===!0,a&&this.setHints(a)}decode(s,a){return a&&this.setHints(a),this.decodeInternal(s)}decodeWithState(s){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(s)}setHints(s){this.hints=s;let a=!n(s)&&s.get(ge.TRY_HARDER)===!0,l=n(s)?null:s.get(ge.POSSIBLE_FORMATS),u=new Array;if(!n(l)){let d=l.some(f=>f===Ce.UPC_A||f===Ce.UPC_E||f===Ce.EAN_13||f===Ce.EAN_8||f===Ce.CODABAR||f===Ce.CODE_39||f===Ce.CODE_93||f===Ce.CODE_128||f===Ce.ITF||f===Ce.RSS_14||f===Ce.RSS_EXPANDED);d&&!a&&u.push(new Os(s,this.verbose)),l.includes(Ce.QR_CODE)&&u.push(new no),l.includes(Ce.DATA_MATRIX)&&u.push(new Cu),l.includes(Ce.AZTEC)&&u.push(new pu),l.includes(Ce.PDF_417)&&u.push(new bn),d&&a&&u.push(new Os(s,this.verbose))}u.length===0&&(a||u.push(new Os(s,this.verbose)),u.push(new no),u.push(new Cu),u.push(new pu),u.push(new bn),a&&u.push(new Os(s,this.verbose))),this.readers=u}reset(){if(this.readers!==null)for(let s of this.readers)s.reset()}decodeInternal(s){if(this.readers===null)throw new Ap("No readers where selected, nothing can be read.");for(let a of this.readers)try{return a.decode(s,this.hints)}catch(l){if(l instanceof Ap)continue}throw new U("No MultiFormat Readers were able to detect the code.")}}class XT extends Fo{constructor(s=null,a=500){let l=new b_;l.setHints(s),super(l,a)}decodeBitmap(s){return this.reader.decodeWithState(s)}}class ZT extends Fo{constructor(s=500){super(new bn,s)}}class QT extends Fo{constructor(s=500){super(new no,s)}}var x_=function(_){return _[_.ERROR_CORRECTION=0]="ERROR_CORRECTION",_[_.CHARACTER_SET=1]="CHARACTER_SET",_[_.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",_[_.MIN_SIZE=3]="MIN_SIZE",_[_.MAX_SIZE=4]="MAX_SIZE",_[_.MARGIN=5]="MARGIN",_[_.PDF417_COMPACT=6]="PDF417_COMPACT",_[_.PDF417_COMPACTION=7]="PDF417_COMPACTION",_[_.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",_[_.AZTEC_LAYERS=9]="AZTEC_LAYERS",_[_.QR_VERSION=10]="QR_VERSION",_}(x_||{}),en=x_;class Tp{constructor(s){this.field=s,this.cachedGenerators=[],this.cachedGenerators.push(new $n(s,Int32Array.from([1])))}buildGenerator(s){let a=this.cachedGenerators;if(s>=a.length){let l=a[a.length-1],u=this.field;for(let d=a.length;d<=s;d++){let f=l.multiply(new $n(u,Int32Array.from([1,u.exp(d-1+u.getGeneratorBase())])));a.push(f),l=f}}return a[s]}encode(s,a){if(a===0)throw new m("No error correction bytes");let l=s.length-a;if(l<=0)throw new m("No data bytes provided");let u=this.buildGenerator(a),d=new Int32Array(l);A.arraycopy(s,0,d,0,l);let f=new $n(this.field,d);f=f.multiplyByMonomial(a,1);let y=f.divide(u)[1].getCoefficients(),C=a-y.length;for(let w=0;w<C;w++)s[l+w]=0;A.arraycopy(y,0,s,l+C,y.length)}}let Rs=(()=>{class _{constructor(){}static applyMaskPenaltyRule1(a){return _.applyMaskPenaltyRule1Internal(a,!0)+_.applyMaskPenaltyRule1Internal(a,!1)}static applyMaskPenaltyRule2(a){let l=0,u=a.getArray(),d=a.getWidth(),f=a.getHeight();for(let p=0;p<f-1;p++){let y=u[p];for(let C=0;C<d-1;C++){let w=y[C];w===y[C+1]&&w===u[p+1][C]&&w===u[p+1][C+1]&&l++}}return _.N2*l}static applyMaskPenaltyRule3(a){let l=0,u=a.getArray(),d=a.getWidth(),f=a.getHeight();for(let p=0;p<f;p++)for(let y=0;y<d;y++){let C=u[p];y+6<d&&C[y]===1&&C[y+1]===0&&C[y+2]===1&&C[y+3]===1&&C[y+4]===1&&C[y+5]===0&&C[y+6]===1&&(_.isWhiteHorizontal(C,y-4,y)||_.isWhiteHorizontal(C,y+7,y+11))&&l++,p+6<f&&u[p][y]===1&&u[p+1][y]===0&&u[p+2][y]===1&&u[p+3][y]===1&&u[p+4][y]===1&&u[p+5][y]===0&&u[p+6][y]===1&&(_.isWhiteVertical(u,y,p-4,p)||_.isWhiteVertical(u,y,p+7,p+11))&&l++}return l*_.N3}static isWhiteHorizontal(a,l,u){l=Math.max(l,0),u=Math.min(u,a.length);for(let d=l;d<u;d++)if(a[d]===1)return!1;return!0}static isWhiteVertical(a,l,u,d){u=Math.max(u,0),d=Math.min(d,a.length);for(let f=u;f<d;f++)if(a[f][l]===1)return!1;return!0}static applyMaskPenaltyRule4(a){let l=0,u=a.getArray(),d=a.getWidth(),f=a.getHeight();for(let C=0;C<f;C++){let w=u[C];for(let x=0;x<d;x++)w[x]===1&&l++}let p=a.getHeight()*a.getWidth();return Math.floor(Math.abs(l*2-p)*10/p)*_.N4}static getDataMaskBit(a,l,u){let d,f;switch(a){case 0:d=u+l&1;break;case 1:d=u&1;break;case 2:d=l%3;break;case 3:d=(u+l)%3;break;case 4:d=Math.floor(u/2)+Math.floor(l/3)&1;break;case 5:f=u*l,d=(f&1)+f%3;break;case 6:f=u*l,d=(f&1)+f%3&1;break;case 7:f=u*l,d=f%3+(u+l&1)&1;break;default:throw new m("Invalid mask pattern: "+a)}return d===0}static applyMaskPenaltyRule1Internal(a,l){let u=0,d=l?a.getHeight():a.getWidth(),f=l?a.getWidth():a.getHeight(),p=a.getArray();for(let y=0;y<d;y++){let C=0,w=-1;for(let x=0;x<f;x++){let E=l?p[y][x]:p[x][y];E===w?C++:(C>=5&&(u+=_.N1+(C-5)),C=1,w=E)}C>=5&&(u+=_.N1+(C-5))}return u}}return _.N1=3,_.N2=3,_.N3=40,_.N4=10,_})();class vu{constructor(s,a){this.width=s,this.height=a;let l=new Array(a);for(let u=0;u!==a;u++)l[u]=new Uint8Array(s);this.bytes=l}getHeight(){return this.height}getWidth(){return this.width}get(s,a){return this.bytes[a][s]}getArray(){return this.bytes}setNumber(s,a,l){this.bytes[a][s]=l}setBoolean(s,a,l){this.bytes[a][s]=l?1:0}clear(s){for(let a of this.bytes)Y.fill(a,s)}equals(s){if(!(s instanceof vu))return!1;let a=s;if(this.width!==a.width||this.height!==a.height)return!1;for(let l=0,u=this.height;l<u;++l){let d=this.bytes[l],f=a.bytes[l];for(let p=0,y=this.width;p<y;++p)if(d[p]!==f[p])return!1}return!0}toString(){let s=new yt;for(let a=0,l=this.height;a<l;++a){let u=this.bytes[a];for(let d=0,f=this.width;d<f;++d)switch(u[d]){case 0:s.append(" 0");break;case 1:s.append(" 1");break;default:s.append("  ");break}s.append(`
`)}return s.toString()}}let bu=(()=>{class _{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){let a=new yt;return a.append(`<<
`),a.append(" mode: "),a.append(this.mode?this.mode.toString():"null"),a.append(`
 ecLevel: `),a.append(this.ecLevel?this.ecLevel.toString():"null"),a.append(`
 version: `),a.append(this.version?this.version.toString():"null"),a.append(`
 maskPattern: `),a.append(this.maskPattern.toString()),this.matrix?(a.append(`
 matrix:
`),a.append(this.matrix.toString())):a.append(`
 matrix: null
`),a.append(`>>
`),a.toString()}setMode(a){this.mode=a}setECLevel(a){this.ecLevel=a}setVersion(a){this.version=a}setMaskPattern(a){this.maskPattern=a}setMatrix(a){this.matrix=a}static isValidMaskPattern(a){return a>=0&&a<_.NUM_MASK_PATTERNS}}return _.NUM_MASK_PATTERNS=8,_})(),Et=(()=>{class _ extends h{}return _.kind="WriterException",_})();class _e{constructor(){}static clearMatrix(s){s.clear(255)}static buildMatrix(s,a,l,u,d){_e.clearMatrix(d),_e.embedBasicPatterns(l,d),_e.embedTypeInfo(a,u,d),_e.maybeEmbedVersionInfo(l,d),_e.embedDataBits(s,u,d)}static embedBasicPatterns(s,a){_e.embedPositionDetectionPatternsAndSeparators(a),_e.embedDarkDotAtLeftBottomCorner(a),_e.maybeEmbedPositionAdjustmentPatterns(s,a),_e.embedTimingPatterns(a)}static embedTypeInfo(s,a,l){let u=new ce;_e.makeTypeInfoBits(s,a,u);for(let d=0,f=u.getSize();d<f;++d){let p=u.get(u.getSize()-1-d),y=_e.TYPE_INFO_COORDINATES[d],C=y[0],w=y[1];if(l.setBoolean(C,w,p),d<8){let x=l.getWidth()-d-1;l.setBoolean(x,8,p)}else{let E=l.getHeight()-7+(d-8);l.setBoolean(8,E,p)}}}static maybeEmbedVersionInfo(s,a){if(s.getVersionNumber()<7)return;let l=new ce;_e.makeVersionInfoBits(s,l);let u=6*3-1;for(let d=0;d<6;++d)for(let f=0;f<3;++f){let p=l.get(u);u--,a.setBoolean(d,a.getHeight()-11+f,p),a.setBoolean(a.getHeight()-11+f,d,p)}}static embedDataBits(s,a,l){let u=0,d=-1,f=l.getWidth()-1,p=l.getHeight()-1;for(;f>0;){for(f===6&&(f-=1);p>=0&&p<l.getHeight();){for(let y=0;y<2;++y){let C=f-y;if(!_e.isEmpty(l.get(C,p)))continue;let w;u<s.getSize()?(w=s.get(u),++u):w=!1,a!==255&&Rs.getDataMaskBit(a,C,p)&&(w=!w),l.setBoolean(C,p,w)}p+=d}d=-d,p+=d,f-=2}if(u!==s.getSize())throw new Et("Not all bits consumed: "+u+"/"+s.getSize())}static findMSBSet(s){return 32-G.numberOfLeadingZeros(s)}static calculateBCHCode(s,a){if(a===0)throw new m("0 polynomial");let l=_e.findMSBSet(a);for(s<<=l-1;_e.findMSBSet(s)>=l;)s^=a<<_e.findMSBSet(s)-l;return s}static makeTypeInfoBits(s,a,l){if(!bu.isValidMaskPattern(a))throw new Et("Invalid mask pattern");let u=s.getBits()<<3|a;l.appendBits(u,5);let d=_e.calculateBCHCode(u,_e.TYPE_INFO_POLY);l.appendBits(d,10);let f=new ce;if(f.appendBits(_e.TYPE_INFO_MASK_PATTERN,15),l.xor(f),l.getSize()!==15)throw new Et("should not happen but we got: "+l.getSize())}static makeVersionInfoBits(s,a){a.appendBits(s.getVersionNumber(),6);let l=_e.calculateBCHCode(s.getVersionNumber(),_e.VERSION_INFO_POLY);if(a.appendBits(l,12),a.getSize()!==18)throw new Et("should not happen but we got: "+a.getSize())}static isEmpty(s){return s===255}static embedTimingPatterns(s){for(let a=8;a<s.getWidth()-8;++a){let l=(a+1)%2;_e.isEmpty(s.get(a,6))&&s.setNumber(a,6,l),_e.isEmpty(s.get(6,a))&&s.setNumber(6,a,l)}}static embedDarkDotAtLeftBottomCorner(s){if(s.get(8,s.getHeight()-8)===0)throw new Et;s.setNumber(8,s.getHeight()-8,1)}static embedHorizontalSeparationPattern(s,a,l){for(let u=0;u<8;++u){if(!_e.isEmpty(l.get(s+u,a)))throw new Et;l.setNumber(s+u,a,0)}}static embedVerticalSeparationPattern(s,a,l){for(let u=0;u<7;++u){if(!_e.isEmpty(l.get(s,a+u)))throw new Et;l.setNumber(s,a+u,0)}}static embedPositionAdjustmentPattern(s,a,l){for(let u=0;u<5;++u){let d=_e.POSITION_ADJUSTMENT_PATTERN[u];for(let f=0;f<5;++f)l.setNumber(s+f,a+u,d[f])}}static embedPositionDetectionPattern(s,a,l){for(let u=0;u<7;++u){let d=_e.POSITION_DETECTION_PATTERN[u];for(let f=0;f<7;++f)l.setNumber(s+f,a+u,d[f])}}static embedPositionDetectionPatternsAndSeparators(s){let a=_e.POSITION_DETECTION_PATTERN[0].length;_e.embedPositionDetectionPattern(0,0,s),_e.embedPositionDetectionPattern(s.getWidth()-a,0,s),_e.embedPositionDetectionPattern(0,s.getWidth()-a,s);let l=8;_e.embedHorizontalSeparationPattern(0,l-1,s),_e.embedHorizontalSeparationPattern(s.getWidth()-l,l-1,s),_e.embedHorizontalSeparationPattern(0,s.getWidth()-l,s);let u=7;_e.embedVerticalSeparationPattern(u,0,s),_e.embedVerticalSeparationPattern(s.getHeight()-u-1,0,s),_e.embedVerticalSeparationPattern(u,s.getHeight()-u,s)}static maybeEmbedPositionAdjustmentPatterns(s,a){if(s.getVersionNumber()<2)return;let l=s.getVersionNumber()-1,u=_e.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[l];for(let d=0,f=u.length;d!==f;d++){let p=u[d];if(p>=0)for(let y=0;y!==f;y++){let C=u[y];C>=0&&_e.isEmpty(a.get(C,p))&&_e.embedPositionAdjustmentPattern(C-2,p-2,a)}}}}_e.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),_e.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),_e.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),_e.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),_e.VERSION_INFO_POLY=7973,_e.TYPE_INFO_POLY=1335,_e.TYPE_INFO_MASK_PATTERN=21522;class KT{constructor(s,a){this.dataBytes=s,this.errorCorrectionBytes=a}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class Tt{constructor(){}static calculateMaskPenalty(s){return Rs.applyMaskPenaltyRule1(s)+Rs.applyMaskPenaltyRule2(s)+Rs.applyMaskPenaltyRule3(s)+Rs.applyMaskPenaltyRule4(s)}static encode(s,a,l=null){let u=Tt.DEFAULT_BYTE_MODE_ENCODING,d=l!==null&&l.get(en.CHARACTER_SET)!==void 0;d&&(u=l.get(en.CHARACTER_SET).toString());let f=this.chooseMode(s,u),p=new ce;if(f===ye.BYTE&&(d||Tt.DEFAULT_BYTE_MODE_ENCODING!==u)){let re=q.getCharacterSetECIByName(u);re!==void 0&&this.appendECI(re,p)}this.appendModeInfo(f,p);let y=new ce;this.appendBytes(s,f,y,u);let C;if(l!==null&&l.get(en.QR_VERSION)!==void 0){let re=Number.parseInt(l.get(en.QR_VERSION).toString(),10);C=pe.getVersionForNumber(re);let V=this.calculateBitsNeeded(f,p,y,C);if(!this.willFit(V,C,a))throw new Et("Data too big for requested version")}else C=this.recommendVersion(a,f,p,y);let w=new ce;w.appendBitArray(p);let x=f===ye.BYTE?y.getSizeInBytes():s.length;this.appendLengthInfo(x,C,f,w),w.appendBitArray(y);let E=C.getECBlocksForLevel(a),D=C.getTotalCodewords()-E.getTotalECCodewords();this.terminateBits(D,w);let M=this.interleaveWithECBytes(w,C.getTotalCodewords(),D,E.getNumBlocks()),O=new bu;O.setECLevel(a),O.setMode(f),O.setVersion(C);let k=C.getDimensionForVersion(),F=new vu(k,k),X=this.chooseMaskPattern(M,a,C,F);return O.setMaskPattern(X),_e.buildMatrix(M,a,C,X,F),O.setMatrix(F),O}static recommendVersion(s,a,l,u){let d=this.calculateBitsNeeded(a,l,u,pe.getVersionForNumber(1)),f=this.chooseVersion(d,s),p=this.calculateBitsNeeded(a,l,u,f);return this.chooseVersion(p,s)}static calculateBitsNeeded(s,a,l,u){return a.getSize()+s.getCharacterCountBits(u)+l.getSize()}static getAlphanumericCode(s){return s<Tt.ALPHANUMERIC_TABLE.length?Tt.ALPHANUMERIC_TABLE[s]:-1}static chooseMode(s,a=null){if(q.SJIS.getName()===a&&this.isOnlyDoubleByteKanji(s))return ye.KANJI;let l=!1,u=!1;for(let d=0,f=s.length;d<f;++d){let p=s.charAt(d);if(Tt.isDigit(p))l=!0;else if(this.getAlphanumericCode(p.charCodeAt(0))!==-1)u=!0;else return ye.BYTE}return u?ye.ALPHANUMERIC:l?ye.NUMERIC:ye.BYTE}static isOnlyDoubleByteKanji(s){let a;try{a=On.encode(s,q.SJIS)}catch{return!1}let l=a.length;if(l%2!==0)return!1;for(let u=0;u<l;u+=2){let d=a[u]&255;if((d<129||d>159)&&(d<224||d>235))return!1}return!0}static chooseMaskPattern(s,a,l,u){let d=Number.MAX_SAFE_INTEGER,f=-1;for(let p=0;p<bu.NUM_MASK_PATTERNS;p++){_e.buildMatrix(s,a,l,p,u);let y=this.calculateMaskPenalty(u);y<d&&(d=y,f=p)}return f}static chooseVersion(s,a){for(let l=1;l<=40;l++){let u=pe.getVersionForNumber(l);if(Tt.willFit(s,u,a))return u}throw new Et("Data too big")}static willFit(s,a,l){let u=a.getTotalCodewords(),f=a.getECBlocksForLevel(l).getTotalECCodewords(),p=u-f,y=(s+7)/8;return p>=y}static terminateBits(s,a){let l=s*8;if(a.getSize()>l)throw new Et("data bits cannot fit in the QR Code"+a.getSize()+" > "+l);for(let f=0;f<4&&a.getSize()<l;++f)a.appendBit(!1);let u=a.getSize()&7;if(u>0)for(let f=u;f<8;f++)a.appendBit(!1);let d=s-a.getSizeInBytes();for(let f=0;f<d;++f)a.appendBits(f&1?17:236,8);if(a.getSize()!==l)throw new Et("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(s,a,l,u,d,f){if(u>=l)throw new Et("Block ID too large");let p=s%l,y=l-p,C=Math.floor(s/l),w=C+1,x=Math.floor(a/l),E=x+1,D=C-x,M=w-E;if(D!==M)throw new Et("EC bytes mismatch");if(l!==y+p)throw new Et("RS blocks mismatch");if(s!==(x+D)*y+(E+M)*p)throw new Et("Total bytes mismatch");u<y?(d[0]=x,f[0]=D):(d[0]=E,f[0]=M)}static interleaveWithECBytes(s,a,l,u){if(s.getSizeInBytes()!==l)throw new Et("Number of bits and data bytes does not match");let d=0,f=0,p=0,y=new Array;for(let w=0;w<u;++w){let x=new Int32Array(1),E=new Int32Array(1);Tt.getNumDataBytesAndNumECBytesForBlockID(a,l,u,w,x,E);let D=x[0],M=new Uint8Array(D);s.toBytes(8*d,M,0,D);let O=Tt.generateECBytes(M,E[0]);y.push(new KT(M,O)),f=Math.max(f,D),p=Math.max(p,O.length),d+=x[0]}if(l!==d)throw new Et("Data bytes does not match offset");let C=new ce;for(let w=0;w<f;++w)for(let x of y){let E=x.getDataBytes();w<E.length&&C.appendBits(E[w],8)}for(let w=0;w<p;++w)for(let x of y){let E=x.getErrorCorrectionBytes();w<E.length&&C.appendBits(E[w],8)}if(a!==C.getSizeInBytes())throw new Et("Interleaving error: "+a+" and "+C.getSizeInBytes()+" differ.");return C}static generateECBytes(s,a){let l=s.length,u=new Int32Array(l+a);for(let f=0;f<l;f++)u[f]=s[f]&255;new Tp(at.QR_CODE_FIELD_256).encode(u,a);let d=new Uint8Array(a);for(let f=0;f<a;f++)d[f]=u[l+f];return d}static appendModeInfo(s,a){a.appendBits(s.getBits(),4)}static appendLengthInfo(s,a,l,u){let d=l.getCharacterCountBits(a);if(s>=1<<d)throw new Et(s+" is bigger than "+((1<<d)-1));u.appendBits(s,d)}static appendBytes(s,a,l,u){switch(a){case ye.NUMERIC:Tt.appendNumericBytes(s,l);break;case ye.ALPHANUMERIC:Tt.appendAlphanumericBytes(s,l);break;case ye.BYTE:Tt.append8BitBytes(s,l,u);break;case ye.KANJI:Tt.appendKanjiBytes(s,l);break;default:throw new Et("Invalid mode: "+a)}}static getDigit(s){return s.charCodeAt(0)-48}static isDigit(s){let a=Tt.getDigit(s);return a>=0&&a<=9}static appendNumericBytes(s,a){let l=s.length,u=0;for(;u<l;){let d=Tt.getDigit(s.charAt(u));if(u+2<l){let f=Tt.getDigit(s.charAt(u+1)),p=Tt.getDigit(s.charAt(u+2));a.appendBits(d*100+f*10+p,10),u+=3}else if(u+1<l){let f=Tt.getDigit(s.charAt(u+1));a.appendBits(d*10+f,7),u+=2}else a.appendBits(d,4),u++}}static appendAlphanumericBytes(s,a){let l=s.length,u=0;for(;u<l;){let d=Tt.getAlphanumericCode(s.charCodeAt(u));if(d===-1)throw new Et;if(u+1<l){let f=Tt.getAlphanumericCode(s.charCodeAt(u+1));if(f===-1)throw new Et;a.appendBits(d*45+f,11),u+=2}else a.appendBits(d,6),u++}}static append8BitBytes(s,a,l){let u;try{u=On.encode(s,l)}catch(d){throw new Et(d)}for(let d=0,f=u.length;d!==f;d++){let p=u[d];a.appendBits(p,8)}}static appendKanjiBytes(s,a){let l;try{l=On.encode(s,q.SJIS)}catch(d){throw new Et(d)}let u=l.length;for(let d=0;d<u;d+=2){let f=l[d]&255,p=l[d+1]&255,y=f<<8&4294967295|p,C=-1;if(y>=33088&&y<=40956?C=y-33088:y>=57408&&y<=60351&&(C=y-49472),C===-1)throw new Et("Invalid byte sequence");let w=(C>>8)*192+(C&255);a.appendBits(w,13)}}static appendECI(s,a){a.appendBits(ye.ECI.getBits(),4),a.appendBits(s.getValue(),8)}}Tt.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),Tt.DEFAULT_BYTE_MODE_ENCODING=q.UTF8.getName();let JT=(()=>{class _{write(a,l,u,d=null){if(a.length===0)throw new m("Found empty contents");if(l<0||u<0)throw new m("Requested dimensions are too small: "+l+"x"+u);let f=xt.L,p=_.QUIET_ZONE_SIZE;d!==null&&(d.get(en.ERROR_CORRECTION)!==void 0&&(f=xt.fromString(d.get(en.ERROR_CORRECTION).toString())),d.get(en.MARGIN)!==void 0&&(p=Number.parseInt(d.get(en.MARGIN).toString(),10)));let y=Tt.encode(a,f,d);return this.renderResult(y,l,u,p)}writeToDom(a,l,u,d,f=null){typeof a=="string"&&(a=document.querySelector(a));let p=this.write(l,u,d,f);a&&a.appendChild(p)}renderResult(a,l,u,d){let f=a.getMatrix();if(f===null)throw new bi;let p=f.getWidth(),y=f.getHeight(),C=p+d*2,w=y+d*2,x=Math.max(l,C),E=Math.max(u,w),D=Math.min(Math.floor(x/C),Math.floor(E/w)),M=Math.floor((x-p*D)/2),O=Math.floor((E-y*D)/2),k=this.createSVGElement(x,E);for(let F=0,X=O;F<y;F++,X+=D)for(let re=0,V=M;re<p;re++,V+=D)if(f.get(re,F)===1){let ze=this.createSvgRectElement(V,X,D,D);k.appendChild(ze)}return k}createSVGElement(a,l){let u=document.createElementNS(_.SVG_NS,"svg");return u.setAttributeNS(null,"height",a.toString()),u.setAttributeNS(null,"width",l.toString()),u}createSvgRectElement(a,l,u,d){let f=document.createElementNS(_.SVG_NS,"rect");return f.setAttributeNS(null,"x",a.toString()),f.setAttributeNS(null,"y",l.toString()),f.setAttributeNS(null,"height",u.toString()),f.setAttributeNS(null,"width",d.toString()),f.setAttributeNS(null,"fill","#000000"),f}}return _.QUIET_ZONE_SIZE=4,_.SVG_NS="http://www.w3.org/2000/svg",_})(),E_=(()=>{class _{encode(a,l,u,d,f){if(a.length===0)throw new m("Found empty contents");if(l!==Ce.QR_CODE)throw new m("Can only encode QR_CODE, but got "+l);if(u<0||d<0)throw new m(`Requested dimensions are too small: ${u}x${d}`);let p=xt.L,y=_.QUIET_ZONE_SIZE;f!==null&&(f.get(en.ERROR_CORRECTION)!==void 0&&(p=xt.fromString(f.get(en.ERROR_CORRECTION).toString())),f.get(en.MARGIN)!==void 0&&(y=Number.parseInt(f.get(en.MARGIN).toString(),10)));let C=Tt.encode(a,p,f);return _.renderResult(C,u,d,y)}static renderResult(a,l,u,d){let f=a.getMatrix();if(f===null)throw new bi;let p=f.getWidth(),y=f.getHeight(),C=p+d*2,w=y+d*2,x=Math.max(l,C),E=Math.max(u,w),D=Math.min(Math.floor(x/C),Math.floor(E/w)),M=Math.floor((x-p*D)/2),O=Math.floor((E-y*D)/2),k=new cn(x,E);for(let F=0,X=O;F<y;F++,X+=D)for(let re=0,V=M;re<p;re++,V+=D)f.get(re,F)===1&&k.setRegion(V,X,D,D);return k}}return _.QUIET_ZONE_SIZE=4,_})();class eM{encode(s,a,l,u,d){let f;switch(a){case Ce.QR_CODE:f=new E_;break;default:throw new m("No encoder available for format "+a)}return f.encode(s,a,l,u,d)}}let tM=(()=>{class _ extends nl{constructor(a,l,u,d,f,p,y,C){if(super(p,y),this.yuvData=a,this.dataWidth=l,this.dataHeight=u,this.left=d,this.top=f,d+p>l||f+y>u)throw new m("Crop rectangle does not fit within image data.");C&&this.reverseHorizontal(p,y)}getRow(a,l){if(a<0||a>=this.getHeight())throw new m("Requested row is outside the image: "+a);let u=this.getWidth();(l==null||l.length<u)&&(l=new Uint8ClampedArray(u));let d=(a+this.top)*this.dataWidth+this.left;return A.arraycopy(this.yuvData,d,l,0,u),l}getMatrix(){let a=this.getWidth(),l=this.getHeight();if(a===this.dataWidth&&l===this.dataHeight)return this.yuvData;let u=a*l,d=new Uint8ClampedArray(u),f=this.top*this.dataWidth+this.left;if(a===this.dataWidth)return A.arraycopy(this.yuvData,f,d,0,u),d;for(let p=0;p<l;p++){let y=p*a;A.arraycopy(this.yuvData,f,d,y,a),f+=this.dataWidth}return d}isCropSupported(){return!0}crop(a,l,u,d){return new _(this.yuvData,this.dataWidth,this.dataHeight,this.left+a,this.top+l,u,d,!1)}renderThumbnail(){let a=this.getWidth()/_.THUMBNAIL_SCALE_FACTOR,l=this.getHeight()/_.THUMBNAIL_SCALE_FACTOR,u=new Int32Array(a*l),d=this.yuvData,f=this.top*this.dataWidth+this.left;for(let p=0;p<l;p++){let y=p*a;for(let C=0;C<a;C++){let w=d[f+C*_.THUMBNAIL_SCALE_FACTOR]&255;u[y+C]=4278190080|w*65793}f+=this.dataWidth*_.THUMBNAIL_SCALE_FACTOR}return u}getThumbnailWidth(){return this.getWidth()/_.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/_.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(a,l){let u=this.yuvData;for(let d=0,f=this.top*this.dataWidth+this.left;d<l;d++,f+=this.dataWidth){let p=f+a/2;for(let y=f,C=f+a-1;y<p;y++,C--){let w=u[y];u[y]=u[C],u[C]=w}}}invert(){return new Zi(this)}}return _.THUMBNAIL_SCALE_FACTOR=2,_})();class Mp extends nl{constructor(s,a,l,u,d,f,p){if(super(a,l),this.dataWidth=u,this.dataHeight=d,this.left=f,this.top=p,s.BYTES_PER_ELEMENT===4){let y=a*l,C=new Uint8ClampedArray(y);for(let w=0;w<y;w++){let x=s[w],E=x>>16&255,D=x>>7&510,M=x&255;C[w]=(E+D+M)/4&255}this.luminances=C}else this.luminances=s;if(u===void 0&&(this.dataWidth=a),d===void 0&&(this.dataHeight=l),f===void 0&&(this.left=0),p===void 0&&(this.top=0),this.left+a>this.dataWidth||this.top+l>this.dataHeight)throw new m("Crop rectangle does not fit within image data.")}getRow(s,a){if(s<0||s>=this.getHeight())throw new m("Requested row is outside the image: "+s);let l=this.getWidth();(a==null||a.length<l)&&(a=new Uint8ClampedArray(l));let u=(s+this.top)*this.dataWidth+this.left;return A.arraycopy(this.luminances,u,a,0,l),a}getMatrix(){let s=this.getWidth(),a=this.getHeight();if(s===this.dataWidth&&a===this.dataHeight)return this.luminances;let l=s*a,u=new Uint8ClampedArray(l),d=this.top*this.dataWidth+this.left;if(s===this.dataWidth)return A.arraycopy(this.luminances,d,u,0,l),u;for(let f=0;f<a;f++){let p=f*s;A.arraycopy(this.luminances,d,u,p,s),d+=this.dataWidth}return u}isCropSupported(){return!0}crop(s,a,l,u){return new Mp(this.luminances,l,u,this.dataWidth,this.dataHeight,this.left+s,this.top+a)}invert(){return new Zi(this)}}class I_ extends q{static forName(s){return this.getCharacterSetECIByName(s)}}class Np{}Np.ISO_8859_1=q.ISO8859_1;class S_{isCompact(){return this.compact}setCompact(s){this.compact=s}getSize(){return this.size}setSize(s){this.size=s}getLayers(){return this.layers}setLayers(s){this.layers=s}getCodeWords(){return this.codeWords}setCodeWords(s){this.codeWords=s}getMatrix(){return this.matrix}setMatrix(s){this.matrix=s}}class D_{static singletonList(s){return[s]}static min(s,a){return s.sort(a)[0]}}class nM{constructor(s){this.previous=s}getPrevious(){return this.previous}}class Ps extends nM{constructor(s,a,l){super(s),this.value=a,this.bitCount=l}appendTo(s,a){s.appendBits(this.value,this.bitCount)}add(s,a){return new Ps(this,s,a)}addBinaryShift(s,a){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Ps(this,s,a)}toString(){let s=this.value&(1<<this.bitCount)-1;return s|=1<<this.bitCount,"<"+G.toBinaryString(s|1<<this.bitCount).substring(1)+">"}}class Op extends Ps{constructor(s,a,l){super(s,0,0),this.binaryShiftStart=a,this.binaryShiftByteCount=l}appendTo(s,a){for(let l=0;l<this.binaryShiftByteCount;l++)(l===0||l===31&&this.binaryShiftByteCount<=62)&&(s.appendBits(31,5),this.binaryShiftByteCount>62?s.appendBits(this.binaryShiftByteCount-31,16):l===0?s.appendBits(Math.min(this.binaryShiftByteCount,31),5):s.appendBits(this.binaryShiftByteCount-31,5)),s.appendBits(a[this.binaryShiftStart+l],8)}addBinaryShift(s,a){return new Op(this,s,a)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function rM(_,s,a){return new Op(_,s,a)}function hl(_,s,a){return new Ps(_,s,a)}let iM=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],io=0,xu=1,gr=2,A_=3,ti=4,oM=new Ps(null,0,0),Rp=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function sM(_){for(let s of _)Y.fill(s,-1);return _[io][ti]=0,_[xu][ti]=0,_[xu][io]=28,_[A_][ti]=0,_[gr][ti]=0,_[gr][io]=15,_}let T_=sM(Y.createInt32Array(6,6));class ni{constructor(s,a,l,u){this.token=s,this.mode=a,this.binaryShiftByteCount=l,this.bitCount=u}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(s,a){let l=this.bitCount,u=this.token;if(s!==this.mode){let f=Rp[this.mode][s];u=hl(u,f&65535,f>>16),l+=f>>16}let d=s===gr?4:5;return u=hl(u,a,d),new ni(u,s,0,l+d)}shiftAndAppend(s,a){let l=this.token,u=this.mode===gr?4:5;return l=hl(l,T_[this.mode][s],u),l=hl(l,a,5),new ni(l,this.mode,0,this.bitCount+u+5)}addBinaryShiftChar(s){let a=this.token,l=this.mode,u=this.bitCount;if(this.mode===ti||this.mode===gr){let p=Rp[l][io];a=hl(a,p&65535,p>>16),u+=p>>16,l=io}let d=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,f=new ni(a,l,this.binaryShiftByteCount+1,u+d);return f.binaryShiftByteCount===2078&&(f=f.endBinaryShift(s+1)),f}endBinaryShift(s){if(this.binaryShiftByteCount===0)return this;let a=this.token;return a=rM(a,s-this.binaryShiftByteCount,this.binaryShiftByteCount),new ni(a,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(s){let a=this.bitCount+(Rp[this.mode][s.mode]>>16);return this.binaryShiftByteCount<s.binaryShiftByteCount?a+=ni.calculateBinaryShiftCost(s)-ni.calculateBinaryShiftCost(this):this.binaryShiftByteCount>s.binaryShiftByteCount&&s.binaryShiftByteCount>0&&(a+=10),a<=s.bitCount}toBitArray(s){let a=[];for(let u=this.endBinaryShift(s.length).token;u!==null;u=u.getPrevious())a.unshift(u);let l=new ce;for(let u of a)u.appendTo(l,s);return l}toString(){return Ie.format("%s bits=%d bytes=%d",iM[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(s){return s.binaryShiftByteCount>62?21:s.binaryShiftByteCount>31?20:s.binaryShiftByteCount>0?10:0}}ni.INITIAL_STATE=new ni(oM,io,0,0);function aM(_){let s=Ie.getCharCode(" "),a=Ie.getCharCode("."),l=Ie.getCharCode(",");_[io][s]=1;let u=Ie.getCharCode("Z"),d=Ie.getCharCode("A");for(let E=d;E<=u;E++)_[io][E]=E-d+2;_[xu][s]=1;let f=Ie.getCharCode("z"),p=Ie.getCharCode("a");for(let E=p;E<=f;E++)_[xu][E]=E-p+2;_[gr][s]=1;let y=Ie.getCharCode("9"),C=Ie.getCharCode("0");for(let E=C;E<=y;E++)_[gr][E]=E-C+2;_[gr][l]=12,_[gr][a]=13;let w=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~","\x7F"];for(let E=0;E<w.length;E++)_[A_][Ie.getCharCode(w[E])]=E;let x=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let E=0;E<x.length;E++)Ie.getCharCode(x[E])>0&&(_[ti][Ie.getCharCode(x[E])]=E);return _}let Pp=aM(Y.createInt32Array(5,256));class pl{constructor(s){this.text=s}encode(){let s=Ie.getCharCode(" "),a=Ie.getCharCode(`
`),l=D_.singletonList(ni.INITIAL_STATE);for(let d=0;d<this.text.length;d++){let f,p=d+1<this.text.length?this.text[d+1]:0;switch(this.text[d]){case Ie.getCharCode("\r"):f=p===a?2:0;break;case Ie.getCharCode("."):f=p===s?3:0;break;case Ie.getCharCode(","):f=p===s?4:0;break;case Ie.getCharCode(":"):f=p===s?5:0;break;default:f=0}f>0?(l=pl.updateStateListForPair(l,d,f),d++):l=this.updateStateListForChar(l,d)}return D_.min(l,(d,f)=>d.getBitCount()-f.getBitCount()).toBitArray(this.text)}updateStateListForChar(s,a){let l=[];for(let u of s)this.updateStateForChar(u,a,l);return pl.simplifyStates(l)}updateStateForChar(s,a,l){let u=this.text[a]&255,d=Pp[s.getMode()][u]>0,f=null;for(let p=0;p<=ti;p++){let y=Pp[p][u];if(y>0){if(f==null&&(f=s.endBinaryShift(a)),!d||p===s.getMode()||p===gr){let C=f.latchAndAppend(p,y);l.push(C)}if(!d&&T_[s.getMode()][p]>=0){let C=f.shiftAndAppend(p,y);l.push(C)}}}if(s.getBinaryShiftByteCount()>0||Pp[s.getMode()][u]===0){let p=s.addBinaryShiftChar(a);l.push(p)}}static updateStateListForPair(s,a,l){let u=[];for(let d of s)this.updateStateForPair(d,a,l,u);return this.simplifyStates(u)}static updateStateForPair(s,a,l,u){let d=s.endBinaryShift(a);if(u.push(d.latchAndAppend(ti,l)),s.getMode()!==ti&&u.push(d.shiftAndAppend(ti,l)),l===3||l===4){let f=d.latchAndAppend(gr,16-l).latchAndAppend(gr,1);u.push(f)}if(s.getBinaryShiftByteCount()>0){let f=s.addBinaryShiftChar(a).addBinaryShiftChar(a+1);u.push(f)}}static simplifyStates(s){let a=[];for(let l of s){let u=!0;for(let d of a){if(d.isBetterThanOrEqualTo(l)){u=!1;break}l.isBetterThanOrEqualTo(d)&&(a=a.filter(f=>f!==d))}u&&a.push(l)}return a}}class tt{constructor(){}static encodeBytes(s){return tt.encode(s,tt.DEFAULT_EC_PERCENT,tt.DEFAULT_AZTEC_LAYERS)}static encode(s,a,l){let u=new pl(s).encode(),d=G.truncDivision(u.getSize()*a,100)+11,f=u.getSize()+d,p,y,C,w,x;if(l!==tt.DEFAULT_AZTEC_LAYERS){if(p=l<0,y=Math.abs(l),y>(p?tt.MAX_NB_BITS_COMPACT:tt.MAX_NB_BITS))throw new m(Ie.format("Illegal value %s for layers",l));C=tt.totalBitsInLayer(y,p),w=tt.WORD_SIZE[y];let V=C-C%w;if(x=tt.stuffBits(u,w),x.getSize()+d>V)throw new m("Data to large for user specified layer");if(p&&x.getSize()>w*64)throw new m("Data to large for user specified layer")}else{w=0,x=null;for(let V=0;;V++){if(V>tt.MAX_NB_BITS)throw new m("Data too large for an Aztec code");if(p=V<=3,y=p?V+1:V,C=tt.totalBitsInLayer(y,p),f>C)continue;(x==null||w!==tt.WORD_SIZE[y])&&(w=tt.WORD_SIZE[y],x=tt.stuffBits(u,w));let ze=C-C%w;if(!(p&&x.getSize()>w*64)&&x.getSize()+d<=ze)break}}let E=tt.generateCheckWords(x,C,w),D=x.getSize()/w,M=tt.generateModeMessage(p,y,D),O=(p?11:14)+y*4,k=new Int32Array(O),F;if(p){F=O;for(let V=0;V<k.length;V++)k[V]=V}else{F=O+1+2*G.truncDivision(G.truncDivision(O,2)-1,15);let V=G.truncDivision(O,2),ze=G.truncDivision(F,2);for(let Ne=0;Ne<V;Ne++){let Yn=Ne+G.truncDivision(Ne,15);k[V-Ne-1]=ze-Yn-1,k[V+Ne]=ze+Yn+1}}let X=new cn(F);for(let V=0,ze=0;V<y;V++){let Ne=(y-V)*4+(p?9:12);for(let Yn=0;Yn<Ne;Yn++){let kr=Yn*2;for(let Xn=0;Xn<2;Xn++)E.get(ze+kr+Xn)&&X.set(k[V*2+Xn],k[V*2+Yn]),E.get(ze+Ne*2+kr+Xn)&&X.set(k[V*2+Yn],k[O-1-V*2-Xn]),E.get(ze+Ne*4+kr+Xn)&&X.set(k[O-1-V*2-Xn],k[O-1-V*2-Yn]),E.get(ze+Ne*6+kr+Xn)&&X.set(k[O-1-V*2-Yn],k[V*2+Xn])}ze+=Ne*8}if(tt.drawModeMessage(X,p,F,M),p)tt.drawBullsEye(X,G.truncDivision(F,2),5);else{tt.drawBullsEye(X,G.truncDivision(F,2),7);for(let V=0,ze=0;V<G.truncDivision(O,2)-1;V+=15,ze+=16)for(let Ne=G.truncDivision(F,2)&1;Ne<F;Ne+=2)X.set(G.truncDivision(F,2)-ze,Ne),X.set(G.truncDivision(F,2)+ze,Ne),X.set(Ne,G.truncDivision(F,2)-ze),X.set(Ne,G.truncDivision(F,2)+ze)}let re=new S_;return re.setCompact(p),re.setSize(F),re.setLayers(y),re.setCodeWords(D),re.setMatrix(X),re}static drawBullsEye(s,a,l){for(let u=0;u<l;u+=2)for(let d=a-u;d<=a+u;d++)s.set(d,a-u),s.set(d,a+u),s.set(a-u,d),s.set(a+u,d);s.set(a-l,a-l),s.set(a-l+1,a-l),s.set(a-l,a-l+1),s.set(a+l,a-l),s.set(a+l,a-l+1),s.set(a+l,a+l-1)}static generateModeMessage(s,a,l){let u=new ce;return s?(u.appendBits(a-1,2),u.appendBits(l-1,6),u=tt.generateCheckWords(u,28,4)):(u.appendBits(a-1,5),u.appendBits(l-1,11),u=tt.generateCheckWords(u,40,4)),u}static drawModeMessage(s,a,l,u){let d=G.truncDivision(l,2);if(a)for(let f=0;f<7;f++){let p=d-3+f;u.get(f)&&s.set(p,d-5),u.get(f+7)&&s.set(d+5,p),u.get(20-f)&&s.set(p,d+5),u.get(27-f)&&s.set(d-5,p)}else for(let f=0;f<10;f++){let p=d-5+f+G.truncDivision(f,5);u.get(f)&&s.set(p,d-7),u.get(f+10)&&s.set(d+7,p),u.get(29-f)&&s.set(p,d+7),u.get(39-f)&&s.set(d-7,p)}}static generateCheckWords(s,a,l){let u=s.getSize()/l,d=new Tp(tt.getGF(l)),f=G.truncDivision(a,l),p=tt.bitsToWords(s,l,f);d.encode(p,f-u);let y=a%l,C=new ce;C.appendBits(0,y);for(let w of Array.from(p))C.appendBits(w,l);return C}static bitsToWords(s,a,l){let u=new Int32Array(l),d,f;for(d=0,f=s.getSize()/a;d<f;d++){let p=0;for(let y=0;y<a;y++)p|=s.get(d*a+y)?1<<a-y-1:0;u[d]=p}return u}static getGF(s){switch(s){case 4:return at.AZTEC_PARAM;case 6:return at.AZTEC_DATA_6;case 8:return at.AZTEC_DATA_8;case 10:return at.AZTEC_DATA_10;case 12:return at.AZTEC_DATA_12;default:throw new m("Unsupported word size "+s)}}static stuffBits(s,a){let l=new ce,u=s.getSize(),d=(1<<a)-2;for(let f=0;f<u;f+=a){let p=0;for(let y=0;y<a;y++)(f+y>=u||s.get(f+y))&&(p|=1<<a-1-y);(p&d)===d?(l.appendBits(p&d,a),f--):p&d?l.appendBits(p,a):(l.appendBits(p|1,a),f--)}return l}static totalBitsInLayer(s,a){return((a?88:112)+16*s)*s}}tt.DEFAULT_EC_PERCENT=33,tt.DEFAULT_AZTEC_LAYERS=0,tt.MAX_NB_BITS=32,tt.MAX_NB_BITS_COMPACT=4,tt.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Eu{encode(s,a,l,u){return this.encodeWithHints(s,a,l,u,null)}encodeWithHints(s,a,l,u,d){let f=Np.ISO_8859_1,p=tt.DEFAULT_EC_PERCENT,y=tt.DEFAULT_AZTEC_LAYERS;return d!=null&&(d.has(en.CHARACTER_SET)&&(f=I_.forName(d.get(en.CHARACTER_SET).toString())),d.has(en.ERROR_CORRECTION)&&(p=G.parseInt(d.get(en.ERROR_CORRECTION).toString())),d.has(en.AZTEC_LAYERS)&&(y=G.parseInt(d.get(en.AZTEC_LAYERS).toString()))),Eu.encodeLayers(s,a,l,u,f,p,y)}static encodeLayers(s,a,l,u,d,f,p){if(a!==Ce.AZTEC)throw new m("Can only encode AZTEC, but got "+a);let y=tt.encode(Ie.getBytes(s,d),f,p);return Eu.renderResult(y,l,u)}static renderResult(s,a,l){let u=s.getMatrix();if(u==null)throw new bi;let d=u.getWidth(),f=u.getHeight(),p=Math.max(a,d),y=Math.max(l,f),C=Math.min(p/d,y/f),w=(p-d*C)/2,x=(y-f*C)/2,E=new cn(p,y);for(let D=0,M=x;D<f;D++,M+=C)for(let O=0,k=w;O<d;O++,k+=C)u.get(O,D)&&E.setRegion(k,M,C,C);return E}}e.AbstractExpandedDecoder=_p,e.ArgumentException=g,e.ArithmeticException=fp,e.AztecCode=S_,e.AztecCodeReader=pu,e.AztecCodeWriter=Eu,e.AztecDecoder=hp,e.AztecDetector=l_,e.AztecDetectorResult=s_,e.AztecEncoder=tt,e.AztecHighLevelEncoder=pl,e.AztecPoint=Bn,e.BarcodeFormat=Ce,e.Binarizer=I,e.BinaryBitmap=v,e.BitArray=ce,e.BitMatrix=cn,e.BitSource=xp,e.BrowserAztecCodeReader=ET,e.BrowserBarcodeReader=RT,e.BrowserCodeReader=Fo,e.BrowserDatamatrixCodeReader=kT,e.BrowserMultiFormatReader=XT,e.BrowserPDF417Reader=ZT,e.BrowserQRCodeReader=QT,e.BrowserQRCodeSvgWriter=JT,e.CharacterSetECI=q,e.ChecksumException=b,e.Code128Reader=te,e.Code39Reader=gp,e.DataMatrixDecodedBitStreamParser=to,e.DataMatrixReader=Cu,e.DecodeHintType=ge,e.DecoderResult=rl,e.DefaultGridSampler=a_,e.DetectorResult=fu,e.EAN13Reader=gu,e.EncodeHintType=en,e.Exception=h,e.FormatException=H,e.GenericGF=at,e.GenericGFPoly=$n,e.GlobalHistogramBinarizer=un,e.GridSampler=pp,e.GridSamplerInstance=Ki,e.HTMLCanvasElementLuminanceSource=Qi,e.HybridBinarizer=Pe,e.ITFReader=Ct,e.IllegalArgumentException=m,e.IllegalStateException=bi,e.InvertedLuminanceSource=Zi,e.LuminanceSource=nl,e.MathUtils=et,e.MultiFormatOneDReader=Os,e.MultiFormatReader=b_,e.MultiFormatWriter=eM,e.NotFoundException=U,e.OneDReader=$t,e.PDF417DecodedBitStreamParser=B,e.PDF417DecoderErrorCorrection=m_,e.PDF417Reader=bn,e.PDF417ResultMetadata=__,e.PerspectiveTransform=Mr,e.PlanarYUVLuminanceSource=tM,e.QRCodeByteMatrix=vu,e.QRCodeDataMask=pr,e.QRCodeDecodedBitStreamParser=p_,e.QRCodeDecoderErrorCorrectionLevel=xt,e.QRCodeDecoderFormatInformation=Pn,e.QRCodeEncoder=Tt,e.QRCodeEncoderQRCode=bu,e.QRCodeMaskUtil=Rs,e.QRCodeMatrixUtil=_e,e.QRCodeMode=ye,e.QRCodeReader=no,e.QRCodeVersion=pe,e.QRCodeWriter=E_,e.RGBLuminanceSource=Mp,e.RSS14Reader=Ft,e.RSSExpandedReader=z,e.ReaderException=Ap,e.ReedSolomonDecoder=sl,e.ReedSolomonEncoder=Tp,e.ReedSolomonException=ol,e.Result=Fn,e.ResultMetadataType=dn,e.ResultPoint=ue,e.StringUtils=Ie,e.UnsupportedOperationException=rr,e.VideoInputDevice=r_,e.WhiteRectangleDetector=hu,e.WriterException=Et,e.ZXingArrays=Y,e.ZXingCharset=I_,e.ZXingInteger=G,e.ZXingStandardCharsets=Np,e.ZXingStringBuilder=yt,e.ZXingStringEncoding=On,e.ZXingSystem=A,e.createAbstractExpandedDecoder=h_,Object.defineProperty(e,"__esModule",{value:!0})})});function P_(e,n){return Object.is(e,n)}var tn=null,Su=!1,Du=1,xi=Symbol("SIGNAL");function $e(e){let n=tn;return tn=e,n}function k_(){return tn}var ml={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Vp(e){if(Su)throw new Error("");if(tn===null)return;tn.consumerOnSignalRead(e);let n=tn.nextProducerIndex++;if(Nu(tn),n<tn.producerNode.length&&tn.producerNode[n]!==e&&gl(tn)){let t=tn.producerNode[n];Mu(t,tn.producerIndexOfThis[n])}tn.producerNode[n]!==e&&(tn.producerNode[n]=e,tn.producerIndexOfThis[n]=gl(tn)?V_(e,tn,n):0),tn.producerLastReadVersion[n]=e.version}function yM(){Du++}function L_(e){if(!(gl(e)&&!e.dirty)&&!(!e.dirty&&e.lastCleanEpoch===Du)){if(!e.producerMustRecompute(e)&&!jp(e)){e.dirty=!1,e.lastCleanEpoch=Du;return}e.producerRecomputeValue(e),e.dirty=!1,e.lastCleanEpoch=Du}}function F_(e){if(e.liveConsumerNode===void 0)return;let n=Su;Su=!0;try{for(let t of e.liveConsumerNode)t.dirty||CM(t)}finally{Su=n}}function B_(){return tn?.consumerAllowSignalWrites!==!1}function CM(e){e.dirty=!0,F_(e),e.consumerMarkedDirty?.(e)}function Tu(e){return e&&(e.nextProducerIndex=0),$e(e)}function Up(e,n){if($e(n),!(!e||e.producerNode===void 0||e.producerIndexOfThis===void 0||e.producerLastReadVersion===void 0)){if(gl(e))for(let t=e.nextProducerIndex;t<e.producerNode.length;t++)Mu(e.producerNode[t],e.producerIndexOfThis[t]);for(;e.producerNode.length>e.nextProducerIndex;)e.producerNode.pop(),e.producerLastReadVersion.pop(),e.producerIndexOfThis.pop()}}function jp(e){Nu(e);for(let n=0;n<e.producerNode.length;n++){let t=e.producerNode[n],r=e.producerLastReadVersion[n];if(r!==t.version||(L_(t),r!==t.version))return!0}return!1}function Hp(e){if(Nu(e),gl(e))for(let n=0;n<e.producerNode.length;n++)Mu(e.producerNode[n],e.producerIndexOfThis[n]);e.producerNode.length=e.producerLastReadVersion.length=e.producerIndexOfThis.length=0,e.liveConsumerNode&&(e.liveConsumerNode.length=e.liveConsumerIndexOfThis.length=0)}function V_(e,n,t){if(U_(e),e.liveConsumerNode.length===0&&j_(e))for(let r=0;r<e.producerNode.length;r++)e.producerIndexOfThis[r]=V_(e.producerNode[r],e,r);return e.liveConsumerIndexOfThis.push(t),e.liveConsumerNode.push(n)-1}function Mu(e,n){if(U_(e),e.liveConsumerNode.length===1&&j_(e))for(let r=0;r<e.producerNode.length;r++)Mu(e.producerNode[r],e.producerIndexOfThis[r]);let t=e.liveConsumerNode.length-1;if(e.liveConsumerNode[n]=e.liveConsumerNode[t],e.liveConsumerIndexOfThis[n]=e.liveConsumerIndexOfThis[t],e.liveConsumerNode.length--,e.liveConsumerIndexOfThis.length--,n<e.liveConsumerNode.length){let r=e.liveConsumerIndexOfThis[n],i=e.liveConsumerNode[n];Nu(i),i.producerIndexOfThis[r]=n}}function gl(e){return e.consumerIsAlwaysLive||(e?.liveConsumerNode?.length??0)>0}function Nu(e){e.producerNode??=[],e.producerIndexOfThis??=[],e.producerLastReadVersion??=[]}function U_(e){e.liveConsumerNode??=[],e.liveConsumerIndexOfThis??=[]}function j_(e){return e.producerNode!==void 0}function H_(e){let n=Object.create(_M);n.computation=e;let t=()=>{if(L_(n),Vp(n),n.value===Au)throw n.error;return n.value};return t[xi]=n,t}var Fp=Symbol("UNSET"),Bp=Symbol("COMPUTING"),Au=Symbol("ERRORED"),_M=Le(ne({},ml),{value:Fp,dirty:!0,error:null,equal:P_,producerMustRecompute(e){return e.value===Fp||e.value===Bp},producerRecomputeValue(e){if(e.value===Bp)throw new Error("Detected cycle in computations.");let n=e.value;e.value=Bp;let t=Tu(e),r;try{r=e.computation()}catch(i){r=Au,e.error=i}finally{Up(e,t)}if(n!==Fp&&n!==Au&&r!==Au&&e.equal(n,r)){e.value=n;return}e.value=r,e.version++}});function wM(){throw new Error}var z_=wM;function W_(){z_()}function G_(e){z_=e}var vM=null;function $_(e){let n=Object.create(Y_);n.value=e;let t=()=>(Vp(n),n.value);return t[xi]=n,t}function zp(e,n){B_()||W_(),e.equal(e.value,n)||(e.value=n,bM(e))}function q_(e,n){B_()||W_(),zp(e,n(e.value))}var Y_=Le(ne({},ml),{equal:P_,value:void 0});function bM(e){e.version++,yM(),F_(e),vM?.()}function Me(e){return typeof e=="function"}function Fs(e){let t=e(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Ou=Fs(e=>function(t){e(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Ho(e,n){if(e){let t=e.indexOf(n);0<=t&&e.splice(t,1)}}var Bt=class e{constructor(n){this.initialTeardown=n,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let n;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(Me(r))try{r()}catch(o){n=o instanceof Ou?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{X_(o)}catch(c){n=n??[],c instanceof Ou?n=[...n,...c.errors]:n.push(c)}}if(n)throw new Ou(n)}}add(n){var t;if(n&&n!==this)if(this.closed)X_(n);else{if(n instanceof e){if(n.closed||n._hasParent(this))return;n._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(n)}}_hasParent(n){let{_parentage:t}=this;return t===n||Array.isArray(t)&&t.includes(n)}_addParent(n){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(n),t):t?[t,n]:n}_removeParent(n){let{_parentage:t}=this;t===n?this._parentage=null:Array.isArray(t)&&Ho(t,n)}remove(n){let{_finalizers:t}=this;t&&Ho(t,n),n instanceof e&&n._removeParent(this)}};Bt.EMPTY=(()=>{let e=new Bt;return e.closed=!0,e})();var Wp=Bt.EMPTY;function Ru(e){return e instanceof Bt||e&&"closed"in e&&Me(e.remove)&&Me(e.add)&&Me(e.unsubscribe)}function X_(e){Me(e)?e():e.unsubscribe()}var Lr={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Bs={setTimeout(e,n,...t){let{delegate:r}=Bs;return r?.setTimeout?r.setTimeout(e,n,...t):setTimeout(e,n,...t)},clearTimeout(e){let{delegate:n}=Bs;return(n?.clearTimeout||clearTimeout)(e)},delegate:void 0};function Pu(e){Bs.setTimeout(()=>{let{onUnhandledError:n}=Lr;if(n)n(e);else throw e})}function yl(){}var Z_=Gp("C",void 0,void 0);function Q_(e){return Gp("E",void 0,e)}function K_(e){return Gp("N",e,void 0)}function Gp(e,n,t){return{kind:e,value:n,error:t}}var zo=null;function Vs(e){if(Lr.useDeprecatedSynchronousErrorHandling){let n=!zo;if(n&&(zo={errorThrown:!1,error:null}),e(),n){let{errorThrown:t,error:r}=zo;if(zo=null,t)throw r}}else e()}function J_(e){Lr.useDeprecatedSynchronousErrorHandling&&zo&&(zo.errorThrown=!0,zo.error=e)}var Wo=class extends Bt{constructor(n){super(),this.isStopped=!1,n?(this.destination=n,Ru(n)&&n.add(this)):this.destination=IM}static create(n,t,r){return new Us(n,t,r)}next(n){this.isStopped?qp(K_(n),this):this._next(n)}error(n){this.isStopped?qp(Q_(n),this):(this.isStopped=!0,this._error(n))}complete(){this.isStopped?qp(Z_,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(n){this.destination.next(n)}_error(n){try{this.destination.error(n)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},xM=Function.prototype.bind;function $p(e,n){return xM.call(e,n)}var Yp=class{constructor(n){this.partialObserver=n}next(n){let{partialObserver:t}=this;if(t.next)try{t.next(n)}catch(r){ku(r)}}error(n){let{partialObserver:t}=this;if(t.error)try{t.error(n)}catch(r){ku(r)}else ku(n)}complete(){let{partialObserver:n}=this;if(n.complete)try{n.complete()}catch(t){ku(t)}}},Us=class extends Wo{constructor(n,t,r){super();let i;if(Me(n)||!n)i={next:n??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&Lr.useDeprecatedNextContext?(o=Object.create(n),o.unsubscribe=()=>this.unsubscribe(),i={next:n.next&&$p(n.next,o),error:n.error&&$p(n.error,o),complete:n.complete&&$p(n.complete,o)}):i=n}this.destination=new Yp(i)}};function ku(e){Lr.useDeprecatedSynchronousErrorHandling?J_(e):Pu(e)}function EM(e){throw e}function qp(e,n){let{onStoppedNotification:t}=Lr;t&&Bs.setTimeout(()=>t(e,n))}var IM={closed:!0,next:yl,error:EM,complete:yl};var js=typeof Symbol=="function"&&Symbol.observable||"@@observable";function or(e){return e}function Xp(...e){return Zp(e)}function Zp(e){return e.length===0?or:e.length===1?e[0]:function(t){return e.reduce((r,i)=>i(r),t)}}var Fe=(()=>{class e{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new e;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=DM(t)?t:new Us(t,r,i);return Vs(()=>{let{operator:c,source:h}=this;o.add(c?c.call(o,h):h?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=ew(r),new r((i,o)=>{let c=new Us({next:h=>{try{t(h)}catch(g){o(g),c.unsubscribe()}},error:o,complete:i});this.subscribe(c)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[js](){return this}pipe(...t){return Zp(t)(this)}toPromise(t){return t=ew(t),new t((r,i)=>{let o;this.subscribe(c=>o=c,c=>i(c),()=>r(o))})}}return e.create=n=>new e(n),e})();function ew(e){var n;return(n=e??Lr.Promise)!==null&&n!==void 0?n:Promise}function SM(e){return e&&Me(e.next)&&Me(e.error)&&Me(e.complete)}function DM(e){return e&&e instanceof Wo||SM(e)&&Ru(e)}function Qp(e){return Me(e?.lift)}function Ke(e){return n=>{if(Qp(n))return n.lift(function(t){try{return e(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ye(e,n,t,r,i){return new Kp(e,n,t,r,i)}var Kp=class extends Wo{constructor(n,t,r,i,o,c){super(n),this.onFinalize=o,this.shouldUnsubscribe=c,this._next=t?function(h){try{t(h)}catch(g){n.error(g)}}:super._next,this._error=i?function(h){try{i(h)}catch(g){n.error(g)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(h){n.error(h)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((n=this.onFinalize)===null||n===void 0||n.call(this))}}};function Hs(){return Ke((e,n)=>{let t=null;e._refCount++;let r=Ye(n,void 0,void 0,void 0,()=>{if(!e||e._refCount<=0||0<--e._refCount){t=null;return}let i=e._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),n.unsubscribe()});e.subscribe(r),r.closed||(t=e.connect())})}var zs=class extends Fe{constructor(n,t){super(),this.source=n,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Qp(n)&&(this.lift=n.lift)}_subscribe(n){return this.getSubject().subscribe(n)}getSubject(){let n=this._subject;return(!n||n.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:n}=this;this._subject=this._connection=null,n?.unsubscribe()}connect(){let n=this._connection;if(!n){n=this._connection=new Bt;let t=this.getSubject();n.add(this.source.subscribe(Ye(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),n.closed&&(this._connection=null,n=Bt.EMPTY)}return n}refCount(){return Hs()(this)}};var tw=Fs(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var nn=(()=>{class e extends Fe{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Lu(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new tw}next(t){Vs(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Vs(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Vs(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Wp:(this.currentObservers=null,o.push(t),new Bt(()=>{this.currentObservers=null,Ho(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new Fe;return t.source=this,t}}return e.create=(n,t)=>new Lu(n,t),e})(),Lu=class extends nn{constructor(n,t){super(),this.destination=n,this.source=t}next(n){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,n)}error(n){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,n)}complete(){var n,t;(t=(n=this.destination)===null||n===void 0?void 0:n.complete)===null||t===void 0||t.call(n)}_subscribe(n){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(n))!==null&&r!==void 0?r:Wp}};var En=class extends nn{constructor(n){super(),this._value=n}get value(){return this.getValue()}_subscribe(n){let t=super._subscribe(n);return!t.closed&&n.next(this._value),t}getValue(){let{hasError:n,thrownError:t,_value:r}=this;if(n)throw t;return this._throwIfClosed(),r}next(n){super.next(this._value=n)}};var Cl={now(){return(Cl.delegate||Date).now()},delegate:void 0};var Go=class extends nn{constructor(n=1/0,t=1/0,r=Cl){super(),this._bufferSize=n,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,n),this._windowTime=Math.max(1,t)}next(n){let{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:c}=this;t||(r.push(n),!i&&r.push(o.now()+c)),this._trimBuffer(),super.next(n)}_subscribe(n){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(n),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let c=0;c<o.length&&!n.closed;c+=r?1:2)n.next(o[c]);return this._checkFinalizedStatuses(n),t}_trimBuffer(){let{_bufferSize:n,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*n;if(n<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let c=t.now(),h=0;for(let g=1;g<r.length&&r[g]<=c;g+=2)h=g;h&&r.splice(0,h+1)}}};var Fu=class extends Bt{constructor(n,t){super()}schedule(n,t=0){return this}};var _l={setInterval(e,n,...t){let{delegate:r}=_l;return r?.setInterval?r.setInterval(e,n,...t):setInterval(e,n,...t)},clearInterval(e){let{delegate:n}=_l;return(n?.clearInterval||clearInterval)(e)},delegate:void 0};var Bu=class extends Fu{constructor(n,t){super(n,t),this.scheduler=n,this.work=t,this.pending=!1}schedule(n,t=0){var r;if(this.closed)return this;this.state=n;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(n,t,r=0){return _l.setInterval(n.flush.bind(n,this),r)}recycleAsyncId(n,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&_l.clearInterval(t)}execute(n,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(n,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(n,t){let r=!1,i;try{this.work(n)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:n,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Ho(r,this),n!=null&&(this.id=this.recycleAsyncId(t,n,null)),this.delay=null,super.unsubscribe()}}};var Ws=class e{constructor(n,t=e.now){this.schedulerActionCtor=n,this.now=t}schedule(n,t=0,r){return new this.schedulerActionCtor(this,n).schedule(r,t)}};Ws.now=Cl.now;var Vu=class extends Ws{constructor(n,t=Ws.now){super(n,t),this.actions=[],this._active=!1}flush(n){let{actions:t}=this;if(this._active){t.push(n);return}let r;this._active=!0;do if(r=n.execute(n.state,n.delay))break;while(n=t.shift());if(this._active=!1,r){for(;n=t.shift();)n.unsubscribe();throw r}}};var AM=new Vu(Bu),nw=AM;var sr=new Fe(e=>e.complete());function Uu(e){return e&&Me(e.schedule)}function rw(e){return e[e.length-1]}function ju(e){return Me(rw(e))?e.pop():void 0}function oo(e){return Uu(rw(e))?e.pop():void 0}function ow(e,n,t,r){function i(o){return o instanceof t?o:new t(function(c){c(o)})}return new(t||(t=Promise))(function(o,c){function h(v){try{m(r.next(v))}catch(b){c(b)}}function g(v){try{m(r.throw(v))}catch(b){c(b)}}function m(v){v.done?o(v.value):i(v.value).then(h,g)}m((r=r.apply(e,n||[])).next())})}function iw(e){var n=typeof Symbol=="function"&&Symbol.iterator,t=n&&e[n],r=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}function $o(e){return this instanceof $o?(this.v=e,this):new $o(e)}function sw(e,n,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(e,n||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),h("next"),h("throw"),h("return",c),i[Symbol.asyncIterator]=function(){return this},i;function c(A){return function(R){return Promise.resolve(R).then(A,b)}}function h(A,R){r[A]&&(i[A]=function(j){return new Promise(function(Y,G){o.push([A,j,Y,G])>1||g(A,j)})},R&&(i[A]=R(i[A])))}function g(A,R){try{m(r[A](R))}catch(j){I(o[0][3],j)}}function m(A){A.value instanceof $o?Promise.resolve(A.value.v).then(v,b):I(o[0][2],A)}function v(A){g("next",A)}function b(A){g("throw",A)}function I(A,R){A(R),o.shift(),o.length&&g(o[0][0],o[0][1])}}function aw(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=e[Symbol.asyncIterator],t;return n?n.call(e):(e=typeof iw=="function"?iw(e):e[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=e[o]&&function(c){return new Promise(function(h,g){c=e[o](c),i(h,g,c.done,c.value)})}}function i(o,c,h,g){Promise.resolve(g).then(function(m){o({value:m,done:h})},c)}}var Hu=e=>e&&typeof e.length=="number"&&typeof e!="function";function zu(e){return Me(e?.then)}function Wu(e){return Me(e[js])}function Gu(e){return Symbol.asyncIterator&&Me(e?.[Symbol.asyncIterator])}function $u(e){return new TypeError(`You provided ${e!==null&&typeof e=="object"?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function TM(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var qu=TM();function Yu(e){return Me(e?.[qu])}function Xu(e){return sw(this,arguments,function*(){let t=e.getReader();try{for(;;){let{value:r,done:i}=yield $o(t.read());if(i)return yield $o(void 0);yield yield $o(r)}}finally{t.releaseLock()}})}function Zu(e){return Me(e?.getReader)}function Yt(e){if(e instanceof Fe)return e;if(e!=null){if(Wu(e))return MM(e);if(Hu(e))return NM(e);if(zu(e))return OM(e);if(Gu(e))return lw(e);if(Yu(e))return RM(e);if(Zu(e))return PM(e)}throw $u(e)}function MM(e){return new Fe(n=>{let t=e[js]();if(Me(t.subscribe))return t.subscribe(n);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function NM(e){return new Fe(n=>{for(let t=0;t<e.length&&!n.closed;t++)n.next(e[t]);n.complete()})}function OM(e){return new Fe(n=>{e.then(t=>{n.closed||(n.next(t),n.complete())},t=>n.error(t)).then(null,Pu)})}function RM(e){return new Fe(n=>{for(let t of e)if(n.next(t),n.closed)return;n.complete()})}function lw(e){return new Fe(n=>{kM(e,n).catch(t=>n.error(t))})}function PM(e){return lw(Xu(e))}function kM(e,n){var t,r,i,o;return ow(this,void 0,void 0,function*(){try{for(t=aw(e);r=yield t.next(),!r.done;){let c=r.value;if(n.next(c),n.closed)return}}catch(c){i={error:c}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}n.complete()})}function Zn(e,n,t,r=0,i=!1){let o=n.schedule(function(){t(),i?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(o),!i)return o}function Qu(e,n=0){return Ke((t,r)=>{t.subscribe(Ye(r,i=>Zn(r,e,()=>r.next(i),n),()=>Zn(r,e,()=>r.complete(),n),i=>Zn(r,e,()=>r.error(i),n)))})}function Ku(e,n=0){return Ke((t,r)=>{r.add(e.schedule(()=>t.subscribe(r),n))})}function cw(e,n){return Yt(e).pipe(Ku(n),Qu(n))}function uw(e,n){return Yt(e).pipe(Ku(n),Qu(n))}function dw(e,n){return new Fe(t=>{let r=0;return n.schedule(function(){r===e.length?t.complete():(t.next(e[r++]),t.closed||this.schedule())})})}function fw(e,n){return new Fe(t=>{let r;return Zn(t,n,()=>{r=e[qu](),Zn(t,n,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(c){t.error(c);return}o?t.complete():t.next(i)},0,!0)}),()=>Me(r?.return)&&r.return()})}function Ju(e,n){if(!e)throw new Error("Iterable cannot be null");return new Fe(t=>{Zn(t,n,()=>{let r=e[Symbol.asyncIterator]();Zn(t,n,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function hw(e,n){return Ju(Xu(e),n)}function pw(e,n){if(e!=null){if(Wu(e))return cw(e,n);if(Hu(e))return dw(e,n);if(zu(e))return uw(e,n);if(Gu(e))return Ju(e,n);if(Yu(e))return fw(e,n);if(Zu(e))return hw(e,n)}throw $u(e)}function vt(e,n){return n?pw(e,n):Yt(e)}function Te(...e){let n=oo(e);return vt(e,n)}function Gs(e,n){let t=Me(e)?e:()=>e,r=i=>i.error(t());return new Fe(n?i=>n.schedule(r,0,i):r)}function Jp(e){return!!e&&(e instanceof Fe||Me(e.lift)&&Me(e.subscribe))}var Ei=Fs(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"});function gw(e){return e instanceof Date&&!isNaN(e)}function Be(e,n){return Ke((t,r)=>{let i=0;t.subscribe(Ye(r,o=>{r.next(e.call(n,o,i++))}))})}var{isArray:LM}=Array;function FM(e,n){return LM(n)?e(...n):e(n)}function ed(e){return Be(n=>FM(e,n))}var{isArray:BM}=Array,{getPrototypeOf:VM,prototype:UM,keys:jM}=Object;function td(e){if(e.length===1){let n=e[0];if(BM(n))return{args:n,keys:null};if(HM(n)){let t=jM(n);return{args:t.map(r=>n[r]),keys:t}}}return{args:e,keys:null}}function HM(e){return e&&typeof e=="object"&&VM(e)===UM}function nd(e,n){return e.reduce((t,r,i)=>(t[r]=n[i],t),{})}function rd(...e){let n=oo(e),t=ju(e),{args:r,keys:i}=td(e);if(r.length===0)return vt([],n);let o=new Fe(zM(r,n,i?c=>nd(i,c):or));return t?o.pipe(ed(t)):o}function zM(e,n,t=or){return r=>{mw(n,()=>{let{length:i}=e,o=new Array(i),c=i,h=i;for(let g=0;g<i;g++)mw(n,()=>{let m=vt(e[g],n),v=!1;m.subscribe(Ye(r,b=>{o[g]=b,v||(v=!0,h--),h||r.next(t(o.slice()))},()=>{--c||r.complete()}))},r)},r)}}function mw(e,n,t){e?Zn(t,e,n):n()}function yw(e,n,t,r,i,o,c,h){let g=[],m=0,v=0,b=!1,I=()=>{b&&!g.length&&!m&&n.complete()},A=j=>m<r?R(j):g.push(j),R=j=>{o&&n.next(j),m++;let Y=!1;Yt(t(j,v++)).subscribe(Ye(n,G=>{i?.(G),o?A(G):n.next(G)},()=>{Y=!0},void 0,()=>{if(Y)try{for(m--;g.length&&m<r;){let G=g.shift();c?Zn(n,c,()=>R(G)):R(G)}I()}catch(G){n.error(G)}}))};return e.subscribe(Ye(n,A,()=>{b=!0,I()})),()=>{h?.()}}function rn(e,n,t=1/0){return Me(n)?rn((r,i)=>Be((o,c)=>n(r,o,i,c))(Yt(e(r,i))),t):(typeof n=="number"&&(t=n),Ke((r,i)=>yw(r,i,e,t)))}function eg(e=1/0){return rn(or,e)}function Cw(){return eg(1)}function $s(...e){return Cw()(vt(e,oo(e)))}function id(e){return new Fe(n=>{Yt(e()).subscribe(n)})}function tg(...e){let n=ju(e),{args:t,keys:r}=td(e),i=new Fe(o=>{let{length:c}=t;if(!c){o.complete();return}let h=new Array(c),g=c,m=c;for(let v=0;v<c;v++){let b=!1;Yt(t[v]).subscribe(Ye(o,I=>{b||(b=!0,m--),h[v]=I},()=>g--,void 0,()=>{(!g||!b)&&(m||o.next(r?nd(r,h):h),o.complete())}))}});return n?i.pipe(ed(n)):i}function ng(e=0,n,t=nw){let r=-1;return n!=null&&(Uu(n)?t=n:r=n),new Fe(i=>{let o=gw(e)?+e-t.now():e;o<0&&(o=0);let c=0;return t.schedule(function(){i.closed||(i.next(c++),0<=r?this.schedule(void 0,r):i.complete())},o)})}function mr(e,n){return Ke((t,r)=>{let i=0;t.subscribe(Ye(r,o=>e.call(n,o,i++)&&r.next(o)))})}function yr(e){return Ke((n,t)=>{let r=null,i=!1,o;r=n.subscribe(Ye(t,void 0,void 0,c=>{o=Yt(e(c,yr(e)(n))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function _w(e,n,t,r,i){return(o,c)=>{let h=t,g=n,m=0;o.subscribe(Ye(c,v=>{let b=m++;g=h?e(g,v,b):(h=!0,v),r&&c.next(g)},i&&(()=>{h&&c.next(g),c.complete()})))}}function qo(e,n){return Me(n)?rn(e,n,1):rn(e,1)}function so(e){return Ke((n,t)=>{let r=!1;n.subscribe(Ye(t,i=>{r=!0,t.next(i)},()=>{r||t.next(e),t.complete()}))})}function Ii(e){return e<=0?()=>sr:Ke((n,t)=>{let r=0;n.subscribe(Ye(t,i=>{++r<=e&&(t.next(i),e<=r&&t.complete())}))})}function rg(e){return Be(()=>e)}function od(e=WM){return Ke((n,t)=>{let r=!1;n.subscribe(Ye(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(e())))})}function WM(){return new Ei}function qs(e){return Ke((n,t)=>{try{n.subscribe(t)}finally{t.add(e)}})}function Fr(e,n){let t=arguments.length>=2;return r=>r.pipe(e?mr((i,o)=>e(i,o,r)):or,Ii(1),t?so(n):od(()=>new Ei))}function Ys(e){return e<=0?()=>sr:Ke((n,t)=>{let r=[];n.subscribe(Ye(t,i=>{r.push(i),e<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function ig(e,n){let t=arguments.length>=2;return r=>r.pipe(e?mr((i,o)=>e(i,o,r)):or,Ys(1),t?so(n):od(()=>new Ei))}function og(e,n){return Ke(_w(e,n,arguments.length>=2,!0))}function sg(...e){let n=oo(e);return Ke((t,r)=>{(n?$s(e,t,n):$s(e,t)).subscribe(r)})}function Cr(e,n){return Ke((t,r)=>{let i=null,o=0,c=!1,h=()=>c&&!i&&r.complete();t.subscribe(Ye(r,g=>{i?.unsubscribe();let m=0,v=o++;Yt(e(g,v)).subscribe(i=Ye(r,b=>r.next(n?n(g,b,v,m++):b),()=>{i=null,h()}))},()=>{c=!0,h()}))})}function ag(e){return Ke((n,t)=>{Yt(e).subscribe(Ye(t,()=>t.complete(),yl)),!t.closed&&n.subscribe(t)})}function on(e,n,t){let r=Me(e)||n||t?{next:e,error:n,complete:t}:e;return r?Ke((i,o)=>{var c;(c=r.subscribe)===null||c===void 0||c.call(r);let h=!0;i.subscribe(Ye(o,g=>{var m;(m=r.next)===null||m===void 0||m.call(r,g),o.next(g)},()=>{var g;h=!1,(g=r.complete)===null||g===void 0||g.call(r),o.complete()},g=>{var m;h=!1,(m=r.error)===null||m===void 0||m.call(r,g),o.error(g)},()=>{var g,m;h&&((g=r.unsubscribe)===null||g===void 0||g.call(r)),(m=r.finalize)===null||m===void 0||m.call(r)}))}):or}var av="https://g.co/ng/security#xss",fe=class extends Error{constructor(n,t){super($d(n,t)),this.code=n}};function $d(e,n){return`${`NG0${Math.abs(e)}`}${n?": "+n:""}`}function Pl(e){return{toString:e}.toString()}var sd="__parameters__";function GM(e){return function(...t){if(e){let r=e(...t);for(let i in r)this[i]=r[i]}}}function lv(e,n,t){return Pl(()=>{let r=GM(n);function i(...o){if(this instanceof i)return r.apply(this,o),this;let c=new i(...o);return h.annotation=c,h;function h(g,m,v){let b=g.hasOwnProperty(sd)?g[sd]:Object.defineProperty(g,sd,{value:[]})[sd];for(;b.length<=v;)b.push(null);return(b[v]=b[v]||[]).push(c),g}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=e,i.annotationCls=i,i})}var Eg=globalThis;function bt(e){for(let n in e)if(e[n]===bt)return n;throw Error("Could not find renamed property on target object.")}function $M(e,n){for(let t in n)n.hasOwnProperty(t)&&!e.hasOwnProperty(t)&&(e[t]=n[t])}function jn(e){if(typeof e=="string")return e;if(Array.isArray(e))return"["+e.map(jn).join(", ")+"]";if(e==null)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;let n=e.toString();if(n==null)return""+n;let t=n.indexOf(`
`);return t===-1?n:n.substring(0,t)}function Ig(e,n){return e==null||e===""?n===null?"":n:n==null||n===""?e:e+" "+n}var qM=bt({__forward_ref__:bt});function Ni(e){return e.__forward_ref__=Ni,e.toString=function(){return jn(this())},e}function Vn(e){return cv(e)?e():e}function cv(e){return typeof e=="function"&&e.hasOwnProperty(qM)&&e.__forward_ref__===Ni}function de(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function Oi(e){return{providers:e.providers||[],imports:e.imports||[]}}function qd(e){return ww(e,dv)||ww(e,fv)}function uv(e){return qd(e)!==null}function ww(e,n){return e.hasOwnProperty(n)?e[n]:null}function YM(e){let n=e&&(e[dv]||e[fv]);return n||null}function vw(e){return e&&(e.hasOwnProperty(bw)||e.hasOwnProperty(XM))?e[bw]:null}var dv=bt({\u0275prov:bt}),bw=bt({\u0275inj:bt}),fv=bt({ngInjectableDef:bt}),XM=bt({ngInjectorDef:bt}),ve=class{constructor(n,t){this._desc=n,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=de({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function hv(e){return e&&!!e.\u0275providers}var ZM=bt({\u0275cmp:bt}),QM=bt({\u0275dir:bt}),KM=bt({\u0275pipe:bt}),JM=bt({\u0275mod:bt}),vd=bt({\u0275fac:bt}),bl=bt({__NG_ELEMENT_ID__:bt}),xw=bt({__NG_ENV_ID__:bt});function k0(e){return typeof e=="string"?e:e==null?"":String(e)}function eN(e){return typeof e=="function"?e.name||e.toString():typeof e=="object"&&e!=null&&typeof e.type=="function"?e.type.name||e.type.toString():k0(e)}function tN(e,n){let t=n?`. Dependency path: ${n.join(" > ")} > ${e}`:"";throw new fe(-200,e)}function L0(e,n){throw new fe(-201,!1)}var je=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}(je||{}),Sg;function pv(){return Sg}function _r(e){let n=Sg;return Sg=e,n}function gv(e,n,t){let r=qd(e);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&je.Optional)return null;if(n!==void 0)return n;L0(e,"Injector")}var nN={},xl=nN,Dg="__NG_DI_FLAG__",bd="ngTempTokenPath",rN="ngTokenPath",iN=/\n/gm,oN="\u0275",Ew="__source",Ks;function sN(){return Ks}function ao(e){let n=Ks;return Ks=e,n}function aN(e,n=je.Default){if(Ks===void 0)throw new fe(-203,!1);return Ks===null?gv(e,void 0,n):Ks.get(e,n&je.Optional?null:void 0,n)}function He(e,n=je.Default){return(pv()||aN)(Vn(e),n)}function K(e,n=je.Default){return He(e,Yd(n))}function Yd(e){return typeof e>"u"||typeof e=="number"?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function Ag(e){let n=[];for(let t=0;t<e.length;t++){let r=Vn(e[t]);if(Array.isArray(r)){if(r.length===0)throw new fe(900,!1);let i,o=je.Default;for(let c=0;c<r.length;c++){let h=r[c],g=lN(h);typeof g=="number"?g===-1?i=h.token:o|=g:i=h}n.push(He(i,o))}else n.push(He(r))}return n}function mv(e,n){return e[Dg]=n,e.prototype[Dg]=n,e}function lN(e){return e[Dg]}function cN(e,n,t,r){let i=e[bd];throw n[Ew]&&i.unshift(n[Ew]),e.message=uN(`
`+e.message,i,t,r),e[rN]=i,e[bd]=null,e}function uN(e,n,t,r=null){e=e&&e.charAt(0)===`
`&&e.charAt(1)==oN?e.slice(2):e;let i=jn(n);if(Array.isArray(n))i=n.map(jn).join(" -> ");else if(typeof n=="object"){let o=[];for(let c in n)if(n.hasOwnProperty(c)){let h=n[c];o.push(c+":"+(typeof h=="string"?JSON.stringify(h):jn(h)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${e.replace(iN,`
  `)}`}var F0=mv(lv("Optional"),8);var yv=mv(lv("SkipSelf"),4);function ea(e,n){let t=e.hasOwnProperty(vd);return t?e[vd]:null}function dN(e,n,t){if(e.length!==n.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],o=n[r];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}function fN(e){return e.flat(Number.POSITIVE_INFINITY)}function B0(e,n){e.forEach(t=>Array.isArray(t)?B0(t,n):n(t))}function Cv(e,n,t){n>=e.length?e.push(t):e.splice(n,0,t)}function xd(e,n){return n>=e.length-1?e.pop():e.splice(n,1)[0]}function hN(e,n,t,r){let i=e.length;if(i==n)e.push(t,r);else if(i===1)e.push(r,e[0]),e[0]=t;else{for(i--,e.push(e[i-1],e[i]);i>n;){let o=i-2;e[i]=e[o],i--}e[n]=t,e[n+1]=r}}function V0(e,n,t){let r=kl(e,n);return r>=0?e[r|1]=t:(r=~r,hN(e,r,n,t)),r}function lg(e,n){let t=kl(e,n);if(t>=0)return e[t|1]}function kl(e,n){return pN(e,n,1)}function pN(e,n,t){let r=0,i=e.length>>t;for(;i!==r;){let o=r+(i-r>>1),c=e[o<<t];if(n===c)return o<<t;c>n?i=o:r=o+1}return~(i<<t)}var ta={},Un=[],Xo=new ve(""),_v=new ve("",-1),wv=new ve(""),Ed=class{get(n,t=xl){if(t===xl){let r=new Error(`NullInjectorError: No provider for ${jn(n)}!`);throw r.name="NullInjectorError",r}return t}},vv=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}(vv||{}),oi=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}(oi||{}),co=function(e){return e[e.None=0]="None",e[e.SignalBased=1]="SignalBased",e[e.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",e}(co||{});function gN(e,n,t){let r=e.length;for(;;){let i=e.indexOf(n,t);if(i===-1)return i;if(i===0||e.charCodeAt(i-1)<=32){let o=n.length;if(i+o===r||e.charCodeAt(i+o)<=32)return i}t=i+1}}function Tg(e,n,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],c=t[r++],h=t[r++];e.setAttribute(n,c,h,o)}else{let o=i,c=t[++r];yN(o)?e.setProperty(n,o,c):e.setAttribute(n,o,c),r++}}return r}function mN(e){return e===3||e===4||e===6}function yN(e){return e.charCodeAt(0)===64}function El(e,n){if(!(n===null||n.length===0))if(e===null||e.length===0)e=n.slice();else{let t=-1;for(let r=0;r<n.length;r++){let i=n[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?Iw(e,t,i,null,n[++r]):Iw(e,t,i,null,null))}}return e}function Iw(e,n,t,r,i){let o=0,c=e.length;if(n===-1)c=-1;else for(;o<e.length;){let h=e[o++];if(typeof h=="number"){if(h===n){c=-1;break}else if(h>n){c=o-1;break}}}for(;o<e.length;){let h=e[o];if(typeof h=="number")break;if(h===t){if(r===null){i!==null&&(e[o+1]=i);return}else if(r===e[o+1]){e[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}c!==-1&&(e.splice(c,0,n),o=c+1),e.splice(o++,0,t),r!==null&&e.splice(o++,0,r),i!==null&&e.splice(o++,0,i)}var bv="ng-template";function CN(e,n,t,r){let i=0;if(r){for(;i<n.length&&typeof n[i]=="string";i+=2)if(n[i]==="class"&&gN(n[i+1].toLowerCase(),t,0)!==-1)return!0}else if(U0(e))return!1;if(i=n.indexOf(1,i),i>-1){let o;for(;++i<n.length&&typeof(o=n[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function U0(e){return e.type===4&&e.value!==bv}function _N(e,n,t){let r=e.type===4&&!t?bv:e.value;return n===r}function wN(e,n,t){let r=4,i=e.attrs,o=i!==null?xN(i):0,c=!1;for(let h=0;h<n.length;h++){let g=n[h];if(typeof g=="number"){if(!c&&!Br(r)&&!Br(g))return!1;if(c&&Br(g))continue;c=!1,r=g|r&1;continue}if(!c)if(r&4){if(r=2|r&1,g!==""&&!_N(e,g,t)||g===""&&n.length===1){if(Br(r))return!1;c=!0}}else if(r&8){if(i===null||!CN(e,i,g,t)){if(Br(r))return!1;c=!0}}else{let m=n[++h],v=vN(g,i,U0(e),t);if(v===-1){if(Br(r))return!1;c=!0;continue}if(m!==""){let b;if(v>o?b="":b=i[v+1].toLowerCase(),r&2&&m!==b){if(Br(r))return!1;c=!0}}}}return Br(r)||c}function Br(e){return(e&1)===0}function vN(e,n,t,r){if(n===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<n.length;){let c=n[i];if(c===e)return i;if(c===3||c===6)o=!0;else if(c===1||c===2){let h=n[++i];for(;typeof h=="string";)h=n[++i];continue}else{if(c===4)break;if(c===0){i+=4;continue}}i+=o?1:2}return-1}else return EN(n,e)}function bN(e,n,t=!1){for(let r=0;r<n.length;r++)if(wN(e,n[r],t))return!0;return!1}function xN(e){for(let n=0;n<e.length;n++){let t=e[n];if(mN(t))return n}return e.length}function EN(e,n){let t=e.indexOf(4);if(t>-1)for(t++;t<e.length;){let r=e[t];if(typeof r=="number")return-1;if(r===n)return t;t++}return-1}function Sw(e,n){return e?":not("+n.trim()+")":n}function IN(e){let n=e[0],t=1,r=2,i="",o=!1;for(;t<e.length;){let c=e[t];if(typeof c=="string")if(r&2){let h=e[++t];i+="["+c+(h.length>0?'="'+h+'"':"")+"]"}else r&8?i+="."+c:r&4&&(i+=" "+c);else i!==""&&!Br(c)&&(n+=Sw(o,i),i=""),r=c,o=o||!Br(r);t++}return i!==""&&(n+=Sw(o,i)),n}function SN(e){return e.map(IN).join(",")}function DN(e){let n=[],t=[],r=1,i=2;for(;r<e.length;){let o=e[r];if(typeof o=="string")i===2?o!==""&&n.push(o,e[++r]):i===8&&t.push(o);else{if(!Br(i))break;i=o}r++}return{attrs:n,classes:t}}function ie(e){return Pl(()=>{let n=Dv(e),t=Le(ne({},n),{decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===vv.OnPush,directiveDefs:null,pipeDefs:null,dependencies:n.standalone&&e.dependencies||null,getStandaloneInjector:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||oi.Emulated,styles:e.styles||Un,_:null,schemas:e.schemas||null,tView:null,id:""});Av(t);let r=e.dependencies;return t.directiveDefs=Aw(r,!1),t.pipeDefs=Aw(r,!0),t.id=MN(t),t})}function AN(e){return Zo(e)||xv(e)}function TN(e){return e!==null}function Ri(e){return Pl(()=>({type:e.type,bootstrap:e.bootstrap||Un,declarations:e.declarations||Un,imports:e.imports||Un,exports:e.exports||Un,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function Dw(e,n){if(e==null)return ta;let t={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r],o,c,h=co.None;Array.isArray(i)?(h=i[0],o=i[1],c=i[2]??o):(o=i,c=i),n?(t[o]=h!==co.None?[r,h]:r,n[o]=c):t[o]=r}return t}function Zt(e){return Pl(()=>{let n=Dv(e);return Av(n),n})}function Zo(e){return e[ZM]||null}function xv(e){return e[QM]||null}function Ev(e){return e[KM]||null}function Iv(e){let n=Zo(e)||xv(e)||Ev(e);return n!==null?n.standalone:!1}function Sv(e,n){let t=e[JM]||null;if(!t&&n===!0)throw new Error(`Type ${jn(e)} does not have '\u0275mod' property.`);return t}function Dv(e){let n={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:n,inputTransforms:null,inputConfig:e.inputs||ta,exportAs:e.exportAs||null,standalone:e.standalone===!0,signals:e.signals===!0,selectors:e.selectors||Un,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Dw(e.inputs,n),outputs:Dw(e.outputs),debugInfo:null}}function Av(e){e.features?.forEach(n=>n(e))}function Aw(e,n){if(!e)return null;let t=n?Ev:AN;return()=>(typeof e=="function"?e():e).map(r=>t(r)).filter(TN)}function MN(e){let n=0,t=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,e.consts,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery].join("|");for(let i of t)n=Math.imul(31,n)+i.charCodeAt(0)<<0;return n+=2147483648,"c"+n}function da(e){return{\u0275providers:e}}function NN(...e){return{\u0275providers:Tv(!0,e),\u0275fromNgModule:!0}}function Tv(e,...n){let t=[],r=new Set,i,o=c=>{t.push(c)};return B0(n,c=>{let h=c;Mg(h,o,[],r)&&(i||=[],i.push(h))}),i!==void 0&&Mv(i,o),t}function Mv(e,n){for(let t=0;t<e.length;t++){let{ngModule:r,providers:i}=e[t];j0(i,o=>{n(o,r)})}}function Mg(e,n,t,r){if(e=Vn(e),!e)return!1;let i=null,o=vw(e),c=!o&&Zo(e);if(!o&&!c){let g=e.ngModule;if(o=vw(g),o)i=g;else return!1}else{if(c&&!c.standalone)return!1;i=e}let h=r.has(i);if(c){if(h)return!1;if(r.add(i),c.dependencies){let g=typeof c.dependencies=="function"?c.dependencies():c.dependencies;for(let m of g)Mg(m,n,t,r)}}else if(o){if(o.imports!=null&&!h){r.add(i);let m;try{B0(o.imports,v=>{Mg(v,n,t,r)&&(m||=[],m.push(v))})}finally{}m!==void 0&&Mv(m,n)}if(!h){let m=ea(i)||(()=>new i);n({provide:i,useFactory:m,deps:Un},i),n({provide:wv,useValue:i,multi:!0},i),n({provide:Xo,useValue:()=>He(i),multi:!0},i)}let g=o.providers;if(g!=null&&!h){let m=e;j0(g,v=>{n(v,m)})}}else return!1;return i!==e&&e.providers!==void 0}function j0(e,n){for(let t of e)hv(t)&&(t=t.\u0275providers),Array.isArray(t)?j0(t,n):n(t)}var ON=bt({provide:String,useValue:bt});function Nv(e){return e!==null&&typeof e=="object"&&ON in e}function RN(e){return!!(e&&e.useExisting)}function PN(e){return!!(e&&e.useFactory)}function na(e){return typeof e=="function"}function kN(e){return!!e.useClass}var Xd=new ve(""),gd={},LN={},cg;function H0(){return cg===void 0&&(cg=new Ed),cg}var vr=class{},Il=class extends vr{get destroyed(){return this._destroyed}constructor(n,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Og(n,c=>this.processProvider(c)),this.records.set(_v,Xs(void 0,this)),i.has("environment")&&this.records.set(vr,Xs(void 0,this));let o=this.records.get(Xd);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(wv,Un,je.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let n=$e(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),$e(n)}}onDestroy(n){return this.assertNotDestroyed(),this._onDestroyHooks.push(n),()=>this.removeOnDestroy(n)}runInContext(n){this.assertNotDestroyed();let t=ao(this),r=_r(void 0),i;try{return n()}finally{ao(t),_r(r)}}get(n,t=xl,r=je.Default){if(this.assertNotDestroyed(),n.hasOwnProperty(xw))return n[xw](this);r=Yd(r);let i,o=ao(this),c=_r(void 0);try{if(!(r&je.SkipSelf)){let g=this.records.get(n);if(g===void 0){let m=jN(n)&&qd(n);m&&this.injectableDefInScope(m)?g=Xs(Ng(n),gd):g=null,this.records.set(n,g)}if(g!=null)return this.hydrate(n,g)}let h=r&je.Self?H0():this.parent;return t=r&je.Optional&&t===xl?null:t,h.get(n,t)}catch(h){if(h.name==="NullInjectorError"){if((h[bd]=h[bd]||[]).unshift(jn(n)),o)throw h;return cN(h,n,"R3InjectorError",this.source)}else throw h}finally{_r(c),ao(o)}}resolveInjectorInitializers(){let n=$e(null),t=ao(this),r=_r(void 0),i;try{let o=this.get(Xo,Un,je.Self);for(let c of o)c()}finally{ao(t),_r(r),$e(n)}}toString(){let n=[],t=this.records;for(let r of t.keys())n.push(jn(r));return`R3Injector[${n.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new fe(205,!1)}processProvider(n){n=Vn(n);let t=na(n)?n:Vn(n&&n.provide),r=BN(n);if(!na(n)&&n.multi===!0){let i=this.records.get(t);i||(i=Xs(void 0,gd,!0),i.factory=()=>Ag(i.multi),this.records.set(t,i)),t=n,i.multi.push(n)}this.records.set(t,r)}hydrate(n,t){let r=$e(null);try{return t.value===gd&&(t.value=LN,t.value=t.factory()),typeof t.value=="object"&&t.value&&UN(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{$e(r)}}injectableDefInScope(n){if(!n.providedIn)return!1;let t=Vn(n.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(n){let t=this._onDestroyHooks.indexOf(n);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Ng(e){let n=qd(e),t=n!==null?n.factory:ea(e);if(t!==null)return t;if(e instanceof ve)throw new fe(204,!1);if(e instanceof Function)return FN(e);throw new fe(204,!1)}function FN(e){if(e.length>0)throw new fe(204,!1);let t=YM(e);return t!==null?()=>t.factory(e):()=>new e}function BN(e){if(Nv(e))return Xs(void 0,e.useValue);{let n=Ov(e);return Xs(n,gd)}}function Ov(e,n,t){let r;if(na(e)){let i=Vn(e);return ea(i)||Ng(i)}else if(Nv(e))r=()=>Vn(e.useValue);else if(PN(e))r=()=>e.useFactory(...Ag(e.deps||[]));else if(RN(e))r=()=>He(Vn(e.useExisting));else{let i=Vn(e&&(e.useClass||e.provide));if(VN(e))r=()=>new i(...Ag(e.deps));else return ea(i)||Ng(i)}return r}function Xs(e,n,t=!1){return{factory:e,value:n,multi:t?[]:void 0}}function VN(e){return!!e.deps}function UN(e){return e!==null&&typeof e=="object"&&typeof e.ngOnDestroy=="function"}function jN(e){return typeof e=="function"||typeof e=="object"&&e instanceof ve}function Og(e,n){for(let t of e)Array.isArray(t)?Og(t,n):t&&hv(t)?Og(t.\u0275providers,n):n(t)}function li(e,n){e instanceof Il&&e.assertNotDestroyed();let t,r=ao(e),i=_r(void 0);try{return n()}finally{ao(r),_r(i)}}function HN(){return pv()!==void 0||sN()!=null}function zN(e){return typeof e=="function"}var ar=0,De=1,Se=2,Sn=3,Ur=4,Gr=5,Hr=6,Id=7,kn=8,ra=9,Si=10,Mt=11,Sl=12,Tw=13,fa=14,lr=15,Qo=16,Zs=17,Di=18,Zd=19,Rv=20,lo=21,ug=22,wr=23,hn=25,Pv=1,Dl=6,Ai=7,Sd=8,ia=9,In=10,Dd=function(e){return e[e.None=0]="None",e[e.HasTransplantedViews=2]="HasTransplantedViews",e}(Dd||{});function jr(e){return Array.isArray(e)&&typeof e[Pv]=="object"}function ci(e){return Array.isArray(e)&&e[Pv]===!0}function kv(e){return(e.flags&4)!==0}function Ll(e){return e.componentOffset>-1}function z0(e){return(e.flags&1)===1}function uo(e){return!!e.template}function Ad(e){return(e[Se]&512)!==0}var Rg=class{constructor(n,t,r){this.previousValue=n,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function Lv(e,n,t,r){n!==null?n.applyValueToInputSignal(n,r):e[t]=r}function Pi(){return Fv}function Fv(e){return e.type.prototype.ngOnChanges&&(e.setInput=GN),WN}Pi.ngInherit=!0;function WN(){let e=Vv(this),n=e?.current;if(n){let t=e.previous;if(t===ta)e.previous=n;else for(let r in n)t[r]=n[r];e.current=null,this.ngOnChanges(n)}}function GN(e,n,t,r,i){let o=this.declaredInputs[r],c=Vv(e)||$N(e,{previous:ta,current:null}),h=c.current||(c.current={}),g=c.previous,m=g[o];h[o]=new Rg(m&&m.currentValue,t,g===ta),Lv(e,n,i,t)}var Bv="__ngSimpleChanges__";function Vv(e){return e[Bv]||null}function $N(e,n){return e[Bv]=n}var Mw=null;var ri=function(e,n,t){Mw?.(e,n,t)},qN="svg",YN="math";function zr(e){for(;Array.isArray(e);)e=e[ar];return e}function Uv(e,n){return zr(n[e])}function cr(e,n){return zr(n[e.index])}function W0(e,n){return e.data[n]}function XN(e,n){return e[n]}function ho(e,n){let t=n[e];return jr(t)?t:t[ar]}function ZN(e){return(e[Se]&4)===4}function G0(e){return(e[Se]&128)===128}function QN(e){return ci(e[Sn])}function oa(e,n){return n==null?null:e[n]}function jv(e){e[Zs]=0}function Hv(e){e[Se]&1024||(e[Se]|=1024,G0(e)&&Kd(e))}function KN(e,n){for(;e>0;)n=n[fa],e--;return n}function Qd(e){return!!(e[Se]&9216||e[wr]?.dirty)}function Pg(e){e[Si].changeDetectionScheduler?.notify(8),e[Se]&64&&(e[Se]|=1024),Qd(e)&&Kd(e)}function Kd(e){e[Si].changeDetectionScheduler?.notify(0);let n=Ko(e);for(;n!==null&&!(n[Se]&8192||(n[Se]|=8192,!G0(n)));)n=Ko(n)}function zv(e,n){if((e[Se]&256)===256)throw new fe(911,!1);e[lo]===null&&(e[lo]=[]),e[lo].push(n)}function JN(e,n){if(e[lo]===null)return;let t=e[lo].indexOf(n);t!==-1&&e[lo].splice(t,1)}function Ko(e){let n=e[Sn];return ci(n)?n[Sn]:n}var Ve={lFrame:Jv(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Wv=!1;function eO(){return Ve.lFrame.elementDepthCount}function tO(){Ve.lFrame.elementDepthCount++}function nO(){Ve.lFrame.elementDepthCount--}function Gv(){return Ve.bindingsEnabled}function Fl(){return Ve.skipHydrationRootTNode!==null}function rO(e){return Ve.skipHydrationRootTNode===e}function iO(e){Ve.skipHydrationRootTNode=e}function oO(){Ve.skipHydrationRootTNode=null}function nt(){return Ve.lFrame.lView}function Dn(){return Ve.lFrame.tView}function Nt(e){return Ve.lFrame.contextLView=e,e[kn]}function Ot(e){return Ve.lFrame.contextLView=null,e}function Qn(){let e=$v();for(;e!==null&&e.type===64;)e=e.parent;return e}function $v(){return Ve.lFrame.currentTNode}function sO(){let e=Ve.lFrame,n=e.currentTNode;return e.isParent?n:n.parent}function Bl(e,n){let t=Ve.lFrame;t.currentTNode=e,t.isParent=n}function qv(){return Ve.lFrame.isParent}function aO(){Ve.lFrame.isParent=!1}function lO(){return Ve.lFrame.contextLView}function Yv(){return Wv}function Nw(e){Wv=e}function cO(){let e=Ve.lFrame,n=e.bindingRootIndex;return n===-1&&(n=e.bindingRootIndex=e.tView.bindingStartIndex),n}function uO(e){return Ve.lFrame.bindingIndex=e}function ha(){return Ve.lFrame.bindingIndex++}function Xv(e){let n=Ve.lFrame,t=n.bindingIndex;return n.bindingIndex=n.bindingIndex+e,t}function dO(){return Ve.lFrame.inI18n}function fO(e,n){let t=Ve.lFrame;t.bindingIndex=t.bindingRootIndex=e,kg(n)}function hO(){return Ve.lFrame.currentDirectiveIndex}function kg(e){Ve.lFrame.currentDirectiveIndex=e}function pO(e){let n=Ve.lFrame.currentDirectiveIndex;return n===-1?null:e[n]}function Zv(){return Ve.lFrame.currentQueryIndex}function $0(e){Ve.lFrame.currentQueryIndex=e}function gO(e){let n=e[De];return n.type===2?n.declTNode:n.type===1?e[Gr]:null}function Qv(e,n,t){if(t&je.SkipSelf){let i=n,o=e;for(;i=i.parent,i===null&&!(t&je.Host);)if(i=gO(o),i===null||(o=o[fa],i.type&10))break;if(i===null)return!1;n=i,e=o}let r=Ve.lFrame=Kv();return r.currentTNode=n,r.lView=e,!0}function q0(e){let n=Kv(),t=e[De];Ve.lFrame=n,n.currentTNode=t.firstChild,n.lView=e,n.tView=t,n.contextLView=e,n.bindingIndex=t.bindingStartIndex,n.inI18n=!1}function Kv(){let e=Ve.lFrame,n=e===null?null:e.child;return n===null?Jv(e):n}function Jv(e){let n={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return e!==null&&(e.child=n),n}function eb(){let e=Ve.lFrame;return Ve.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}var tb=eb;function Y0(){let e=eb();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function mO(e){return(Ve.lFrame.contextLView=KN(e,Ve.lFrame.contextLView))[kn]}function po(){return Ve.lFrame.selectedIndex}function Jo(e){Ve.lFrame.selectedIndex=e}function X0(){let e=Ve.lFrame;return W0(e.tView,e.selectedIndex)}function nb(){return Ve.lFrame.currentNamespace}var rb=!0;function Z0(){return rb}function go(e){rb=e}function yO(e,n,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=n.type.prototype;if(r){let c=Fv(n);(t.preOrderHooks??=[]).push(e,c),(t.preOrderCheckHooks??=[]).push(e,c)}i&&(t.preOrderHooks??=[]).push(0-e,i),o&&((t.preOrderHooks??=[]).push(e,o),(t.preOrderCheckHooks??=[]).push(e,o))}function Q0(e,n){for(let t=n.directiveStart,r=n.directiveEnd;t<r;t++){let o=e.data[t].type.prototype,{ngAfterContentInit:c,ngAfterContentChecked:h,ngAfterViewInit:g,ngAfterViewChecked:m,ngOnDestroy:v}=o;c&&(e.contentHooks??=[]).push(-t,c),h&&((e.contentHooks??=[]).push(t,h),(e.contentCheckHooks??=[]).push(t,h)),g&&(e.viewHooks??=[]).push(-t,g),m&&((e.viewHooks??=[]).push(t,m),(e.viewCheckHooks??=[]).push(t,m)),v!=null&&(e.destroyHooks??=[]).push(t,v)}}function md(e,n,t){ib(e,n,3,t)}function yd(e,n,t,r){(e[Se]&3)===t&&ib(e,n,t,r)}function dg(e,n){let t=e[Se];(t&3)===n&&(t&=16383,t+=1,e[Se]=t)}function ib(e,n,t,r){let i=r!==void 0?e[Zs]&65535:0,o=r??-1,c=n.length-1,h=0;for(let g=i;g<c;g++)if(typeof n[g+1]=="number"){if(h=n[g],r!=null&&h>=r)break}else n[g]<0&&(e[Zs]+=65536),(h<o||o==-1)&&(CO(e,t,n,g),e[Zs]=(e[Zs]&4294901760)+g+2),g++}function Ow(e,n){ri(4,e,n);let t=$e(null);try{n.call(e)}finally{$e(t),ri(5,e,n)}}function CO(e,n,t,r){let i=t[r]<0,o=t[r+1],c=i?-t[r]:t[r],h=e[c];i?e[Se]>>14<e[Zs]>>16&&(e[Se]&3)===n&&(e[Se]+=16384,Ow(h,o)):Ow(h,o)}var Js=-1,es=class{constructor(n,t,r){this.factory=n,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function _O(e){return e instanceof es}function wO(e){return(e.flags&8)!==0}function vO(e){return(e.flags&16)!==0}var fg={},Lg=class{constructor(n,t){this.injector=n,this.parentInjector=t}get(n,t,r){r=Yd(r);let i=this.injector.get(n,fg,r);return i!==fg||t===fg?i:this.parentInjector.get(n,t,r)}};function ob(e){return e!==Js}function Td(e){return e&32767}function bO(e){return e>>16}function Md(e,n){let t=bO(e),r=n;for(;t>0;)r=r[fa],t--;return r}var Fg=!0;function Rw(e){let n=Fg;return Fg=e,n}var xO=256,sb=xO-1,ab=5,EO=0,ii={};function IO(e,n,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(bl)&&(r=t[bl]),r==null&&(r=t[bl]=EO++);let i=r&sb,o=1<<i;n.data[e+(i>>ab)]|=o}function Nd(e,n){let t=lb(e,n);if(t!==-1)return t;let r=n[De];r.firstCreatePass&&(e.injectorIndex=n.length,hg(r.data,e),hg(n,null),hg(r.blueprint,null));let i=K0(e,n),o=e.injectorIndex;if(ob(i)){let c=Td(i),h=Md(i,n),g=h[De].data;for(let m=0;m<8;m++)n[o+m]=h[c+m]|g[c+m]}return n[o+8]=i,o}function hg(e,n){e.push(0,0,0,0,0,0,0,0,n)}function lb(e,n){return e.injectorIndex===-1||e.parent&&e.parent.injectorIndex===e.injectorIndex||n[e.injectorIndex+8]===null?-1:e.injectorIndex}function K0(e,n){if(e.parent&&e.parent.injectorIndex!==-1)return e.parent.injectorIndex;let t=0,r=null,i=n;for(;i!==null;){if(r=hb(i),r===null)return Js;if(t++,i=i[fa],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return Js}function Bg(e,n,t){IO(e,n,t)}function cb(e,n,t){if(t&je.Optional||e!==void 0)return e;L0(n,"NodeInjector")}function ub(e,n,t,r){if(t&je.Optional&&r===void 0&&(r=null),!(t&(je.Self|je.Host))){let i=e[ra],o=_r(void 0);try{return i?i.get(n,r,t&je.Optional):gv(n,r,t&je.Optional)}finally{_r(o)}}return cb(r,n,t)}function db(e,n,t,r=je.Default,i){if(e!==null){if(n[Se]&2048&&!(r&je.Self)){let c=TO(e,n,t,r,ii);if(c!==ii)return c}let o=fb(e,n,t,r,ii);if(o!==ii)return o}return ub(n,t,r,i)}function fb(e,n,t,r,i){let o=DO(t);if(typeof o=="function"){if(!Qv(n,e,r))return r&je.Host?cb(i,t,r):ub(n,t,r,i);try{let c;if(c=o(r),c==null&&!(r&je.Optional))L0(t);else return c}finally{tb()}}else if(typeof o=="number"){let c=null,h=lb(e,n),g=Js,m=r&je.Host?n[lr][Gr]:null;for((h===-1||r&je.SkipSelf)&&(g=h===-1?K0(e,n):n[h+8],g===Js||!kw(r,!1)?h=-1:(c=n[De],h=Td(g),n=Md(g,n)));h!==-1;){let v=n[De];if(Pw(o,h,v.data)){let b=SO(h,n,t,c,r,m);if(b!==ii)return b}g=n[h+8],g!==Js&&kw(r,n[De].data[h+8]===m)&&Pw(o,h,n)?(c=v,h=Td(g),n=Md(g,n)):h=-1}}return i}function SO(e,n,t,r,i,o){let c=n[De],h=c.data[e+8],g=r==null?Ll(h)&&Fg:r!=c&&(h.type&3)!==0,m=i&je.Host&&o===h,v=Cd(h,c,t,g,m);return v!==null?ts(n,c,v,h):ii}function Cd(e,n,t,r,i){let o=e.providerIndexes,c=n.data,h=o&1048575,g=e.directiveStart,m=e.directiveEnd,v=o>>20,b=r?h:h+v,I=i?h+v:m;for(let A=b;A<I;A++){let R=c[A];if(A<g&&t===R||A>=g&&R.type===t)return A}if(i){let A=c[g];if(A&&uo(A)&&A.type===t)return g}return null}function ts(e,n,t,r){let i=e[t],o=n.data;if(_O(i)){let c=i;c.resolving&&tN(eN(o[t]));let h=Rw(c.canSeeViewProviders);c.resolving=!0;let g,m=c.injectImpl?_r(c.injectImpl):null,v=Qv(e,r,je.Default);try{i=e[t]=c.factory(void 0,o,e,r),n.firstCreatePass&&t>=r.directiveStart&&yO(t,o[t],n)}finally{m!==null&&_r(m),Rw(h),c.resolving=!1,tb()}}return i}function DO(e){if(typeof e=="string")return e.charCodeAt(0)||0;let n=e.hasOwnProperty(bl)?e[bl]:void 0;return typeof n=="number"?n>=0?n&sb:AO:n}function Pw(e,n,t){let r=1<<e;return!!(t[n+(e>>ab)]&r)}function kw(e,n){return!(e&je.Self)&&!(e&je.Host&&n)}var Yo=class{constructor(n,t){this._tNode=n,this._lView=t}get(n,t,r){return db(this._tNode,this._lView,n,Yd(r),t)}};function AO(){return new Yo(Qn(),nt())}function mo(e){return Pl(()=>{let n=e.prototype.constructor,t=n[vd]||Vg(n),r=Object.prototype,i=Object.getPrototypeOf(e.prototype).constructor;for(;i&&i!==r;){let o=i[vd]||Vg(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Vg(e){return cv(e)?()=>{let n=Vg(Vn(e));return n&&n()}:ea(e)}function TO(e,n,t,r,i){let o=e,c=n;for(;o!==null&&c!==null&&c[Se]&2048&&!(c[Se]&512);){let h=fb(o,c,t,r|je.Self,ii);if(h!==ii)return h;let g=o.parent;if(!g){let m=c[Rv];if(m){let v=m.get(t,ii,r);if(v!==ii)return v}g=hb(c),c=c[fa]}o=g}return i}function hb(e){let n=e[De],t=n.type;return t===2?n.declTNode:t===1?e[Gr]:null}function Lw(e,n=null,t=null,r){let i=pb(e,n,t,r);return i.resolveInjectorInitializers(),i}function pb(e,n=null,t=null,r,i=new Set){let o=[t||Un,NN(e)];return r=r||(typeof e=="object"?void 0:jn(e)),new Il(o,n||H0(),r||null,i)}var si=class e{static{this.THROW_IF_NOT_FOUND=xl}static{this.NULL=new Ed}static create(n,t){if(Array.isArray(n))return Lw({name:""},t,n,"");{let r=n.name??"";return Lw({name:r},n.parent,n.providers,r)}}static{this.\u0275prov=de({token:e,providedIn:"any",factory:()=>He(_v)})}static{this.__NG_ELEMENT_ID__=-1}};var MO=new ve("");MO.__NG_ELEMENT_ID__=e=>{let n=Qn();if(n===null)throw new fe(204,!1);if(n.type&2)return n.value;if(e&je.Optional)return null;throw new fe(204,!1)};var NO="ngOriginalError";function pg(e){return e[NO]}var gb=!0,mb=(()=>{class e{static{this.__NG_ELEMENT_ID__=OO}static{this.__NG_ENV_ID__=t=>t}}return e})(),Ug=class extends mb{constructor(n){super(),this._lView=n}onDestroy(n){return zv(this._lView,n),()=>JN(this._lView,n)}};function OO(){return new Ug(nt())}var os=(()=>{class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new En(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=de({token:e,providedIn:"root",factory:()=>new e})}}return e})();var jg=class extends nn{constructor(n=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=n,HN()&&(this.destroyRef=K(mb,{optional:!0})??void 0,this.pendingTasks=K(os,{optional:!0})??void 0)}emit(n){let t=$e(null);try{super.next(n)}finally{$e(t)}}subscribe(n,t,r){let i=n,o=t||(()=>null),c=r;if(n&&typeof n=="object"){let g=n;i=g.next?.bind(g),o=g.error?.bind(g),c=g.complete?.bind(g)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),c&&(c=this.wrapInTimeout(c)));let h=super.subscribe({next:i,error:o,complete:c});return n instanceof Bt&&n.add(h),h}wrapInTimeout(n){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{n(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},Pt=jg;function Od(...e){}function yb(e){let n,t;function r(){e=Od;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),n!==void 0&&clearTimeout(n)}catch{}}return n=setTimeout(()=>{e(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{e(),r()})),()=>r()}function Fw(e){return queueMicrotask(()=>e()),()=>{e=Od}}var J0="isAngularZone",Rd=J0+"_ID",RO=0,Xt=class e{constructor(n){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Pt(!1),this.onMicrotaskEmpty=new Pt(!1),this.onStable=new Pt(!1),this.onError=new Pt(!1);let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=gb}=n;if(typeof Zone>"u")throw new fe(908,!1);Zone.assertZonePatched();let c=this;c._nesting=0,c._outer=c._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(c._inner=c._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(c._inner=c._inner.fork(Zone.longStackTraceZoneSpec)),c.shouldCoalesceEventChangeDetection=!i&&r,c.shouldCoalesceRunChangeDetection=i,c.callbackScheduled=!1,c.scheduleInRootZone=o,LO(c)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(J0)===!0}static assertInAngularZone(){if(!e.isInAngularZone())throw new fe(909,!1)}static assertNotInAngularZone(){if(e.isInAngularZone())throw new fe(909,!1)}run(n,t,r){return this._inner.run(n,t,r)}runTask(n,t,r,i){let o=this._inner,c=o.scheduleEventTask("NgZoneEvent: "+i,n,PO,Od,Od);try{return o.runTask(c,t,r)}finally{o.cancelTask(c)}}runGuarded(n,t,r){return this._inner.runGuarded(n,t,r)}runOutsideAngular(n){return this._outer.run(n)}},PO={};function em(e){if(e._nesting==0&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function kO(e){if(e.isCheckStableRunning||e.callbackScheduled)return;e.callbackScheduled=!0;function n(){yb(()=>{e.callbackScheduled=!1,Hg(e),e.isCheckStableRunning=!0,em(e),e.isCheckStableRunning=!1})}e.scheduleInRootZone?Zone.root.run(()=>{n()}):e._outer.run(()=>{n()}),Hg(e)}function LO(e){let n=()=>{kO(e)},t=RO++;e._inner=e._inner.fork({name:"angular",properties:{[J0]:!0,[Rd]:t,[Rd+t]:!0},onInvokeTask:(r,i,o,c,h,g)=>{if(FO(g))return r.invokeTask(o,c,h,g);try{return Bw(e),r.invokeTask(o,c,h,g)}finally{(e.shouldCoalesceEventChangeDetection&&c.type==="eventTask"||e.shouldCoalesceRunChangeDetection)&&n(),Vw(e)}},onInvoke:(r,i,o,c,h,g,m)=>{try{return Bw(e),r.invoke(o,c,h,g,m)}finally{e.shouldCoalesceRunChangeDetection&&!e.callbackScheduled&&!BO(g)&&n(),Vw(e)}},onHasTask:(r,i,o,c)=>{r.hasTask(o,c),i===o&&(c.change=="microTask"?(e._hasPendingMicrotasks=c.microTask,Hg(e),em(e)):c.change=="macroTask"&&(e.hasPendingMacrotasks=c.macroTask))},onHandleError:(r,i,o,c)=>(r.handleError(o,c),e.runOutsideAngular(()=>e.onError.emit(c)),!1)})}function Hg(e){e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&e.callbackScheduled===!0?e.hasPendingMicrotasks=!0:e.hasPendingMicrotasks=!1}function Bw(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function Vw(e){e._nesting--,em(e)}var zg=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Pt,this.onMicrotaskEmpty=new Pt,this.onStable=new Pt,this.onError=new Pt}run(n,t,r){return n.apply(t,r)}runGuarded(n,t,r){return n.apply(t,r)}runOutsideAngular(n){return n()}runTask(n,t,r,i){return n.apply(t,r)}};function FO(e){return Cb(e,"__ignore_ng_zone__")}function BO(e){return Cb(e,"__scheduler_tick__")}function Cb(e,n){return!Array.isArray(e)||e.length!==1?!1:e[0]?.data?.[n]===!0}var Ti=class{constructor(){this._console=console}handleError(n){let t=this._findOriginalError(n);this._console.error("ERROR",n),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(n){let t=n&&pg(n);for(;t&&pg(t);)t=pg(t);return t||null}},VO=new ve("",{providedIn:"root",factory:()=>{let e=K(Xt),n=K(Ti);return t=>e.runOutsideAngular(()=>n.handleError(t))}});function UO(){return pa(Qn(),nt())}function pa(e,n){return new ur(cr(e,n))}var ur=(()=>{class e{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=UO}}return e})();function jO(e){return e instanceof ur?e.nativeElement:e}function HO(){return this._results[Symbol.iterator]()}var Wg=class e{get changes(){return this._changes??=new Pt}constructor(n=!1){this._emitDistinctChangesOnly=n,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let t=e.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=HO)}get(n){return this._results[n]}map(n){return this._results.map(n)}filter(n){return this._results.filter(n)}find(n){return this._results.find(n)}reduce(n,t){return this._results.reduce(n,t)}forEach(n){this._results.forEach(n)}some(n){return this._results.some(n)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(n,t){this.dirty=!1;let r=fN(n);(this._changesDetected=!dN(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(n){this._onDirty=n}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}},zO="ngSkipHydration",WO="ngskiphydration";function _b(e){let n=e.mergedAttrs;if(n===null)return!1;for(let t=0;t<n.length;t+=2){let r=n[t];if(typeof r=="number")return!1;if(typeof r=="string"&&r.toLowerCase()===WO)return!0}return!1}function wb(e){return e.hasAttribute(zO)}function Pd(e){return(e.flags&128)===128}function GO(e){if(Pd(e))return!0;let n=e.parent;for(;n;){if(Pd(e)||_b(n))return!0;n=n.parent}return!1}var vb=new Map,$O=0;function qO(){return $O++}function YO(e){vb.set(e[Zd],e)}function Gg(e){vb.delete(e[Zd])}var Uw="__ngContext__";function ns(e,n){jr(n)?(e[Uw]=n[Zd],YO(n)):e[Uw]=n}function bb(e){return Eb(e[Sl])}function xb(e){return Eb(e[Ur])}function Eb(e){for(;e!==null&&!ci(e);)e=e[Ur];return e}var $g;function Ib(e){$g=e}function Jd(){if($g!==void 0)return $g;if(typeof document<"u")return document;throw new fe(210,!1)}var ef=new ve("",{providedIn:"root",factory:()=>XO}),XO="ng",tm=new ve(""),ui=new ve("",{providedIn:"platform",factory:()=>"unknown"});var nm=new ve("",{providedIn:"root",factory:()=>Jd().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function ZO(){let e=new ga;return K(ui)==="browser"&&(e.store=QO(Jd(),K(ef))),e}var ga=(()=>{class e{constructor(){this.store={},this.onSerializeCallbacks={}}static{this.\u0275prov=de({token:e,providedIn:"root",factory:ZO})}get(t,r){return this.store[t]!==void 0?this.store[t]:r}set(t,r){this.store[t]=r}remove(t){delete this.store[t]}hasKey(t){return this.store.hasOwnProperty(t)}get isEmpty(){return Object.keys(this.store).length===0}onSerialize(t,r){this.onSerializeCallbacks[t]=r}toJson(){for(let t in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(t))try{this.store[t]=this.onSerializeCallbacks[t]()}catch(r){console.warn("Exception in onSerialize callback: ",r)}return JSON.stringify(this.store).replace(/</g,"\\u003C")}}return e})();function QO(e,n){let t=e.getElementById(n+"-state");if(t?.textContent)try{return JSON.parse(t.textContent)}catch(r){console.warn("Exception while restoring TransferState for app "+n,r)}return{}}var Sb="h",Db="b",qg=function(e){return e.FirstChild="f",e.NextSibling="n",e}(qg||{}),KO="e",JO="t",rm="c",Ab="x",kd="r",eR="i",tR="n",Tb="d";var nR="__nghData__",Mb=nR,gg="ngh",rR="nghm",Nb=()=>null;function iR(e,n,t=!1){let r=e.getAttribute(gg);if(r==null)return null;let[i,o]=r.split("|");if(r=t?o:i,!r)return null;let c=o?`|${o}`:"",h=t?i:c,g={};if(r!==""){let v=n.get(ga,null,{optional:!0});v!==null&&(g=v.get(Mb,[])[Number(r)])}let m={data:g,firstChild:e.firstChild??null};return t&&(m.firstChild=e,tf(m,0,e.nextSibling)),h?e.setAttribute(gg,h):e.removeAttribute(gg),m}function oR(){Nb=iR}function im(e,n,t=!1){return Nb(e,n,t)}function sR(e){let n=e._lView;return n[De].type===2?null:(Ad(n)&&(n=n[hn]),n)}function aR(e){return e.textContent?.replace(/\s/gm,"")}function lR(e){let n=Jd(),t=n.createNodeIterator(e,NodeFilter.SHOW_COMMENT,{acceptNode(o){let c=aR(o);return c==="ngetn"||c==="ngtns"?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}}),r,i=[];for(;r=t.nextNode();)i.push(r);for(let o of i)o.textContent==="ngetn"?o.replaceWith(n.createTextNode("")):o.remove()}function tf(e,n,t){e.segmentHeads??={},e.segmentHeads[n]=t}function Yg(e,n){return e.segmentHeads?.[n]??null}function cR(e,n){let t=e.data,r=t[KO]?.[n]??null;return r===null&&t[rm]?.[n]&&(r=om(e,n)),r}function Ob(e,n){return e.data[rm]?.[n]??null}function om(e,n){let t=Ob(e,n)??[],r=0;for(let i of t)r+=i[kd]*(i[Ab]??1);return r}function uR(e){if(typeof e.disconnectedNodes>"u"){let n=e.data[Tb];e.disconnectedNodes=n?new Set(n):null}return e.disconnectedNodes}function Vl(e,n){if(typeof e.disconnectedNodes>"u"){let t=e.data[Tb];e.disconnectedNodes=t?new Set(t):null}return!!uR(e)?.has(n)}var ad=new ve(""),Rb=!1,Pb=new ve("",{providedIn:"root",factory:()=>Rb});var ld;function kb(){if(ld===void 0&&(ld=null,Eg.trustedTypes))try{ld=Eg.trustedTypes.createPolicy("angular",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch{}return ld}function nf(e){return kb()?.createHTML(e)||e}function dR(e){return kb()?.createScriptURL(e)||e}var Mi=class{constructor(n){this.changingThisBreaksApplicationSecurity=n}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${av})`}},Xg=class extends Mi{getTypeName(){return"HTML"}},Zg=class extends Mi{getTypeName(){return"Style"}},Qg=class extends Mi{getTypeName(){return"Script"}},Kg=class extends Mi{getTypeName(){return"URL"}},Jg=class extends Mi{getTypeName(){return"ResourceURL"}};function ki(e){return e instanceof Mi?e.changingThisBreaksApplicationSecurity:e}function ma(e,n){let t=fR(e);if(t!=null&&t!==n){if(t==="ResourceURL"&&n==="URL")return!0;throw new Error(`Required a safe ${n}, got a ${t} (see ${av})`)}return t===n}function fR(e){return e instanceof Mi&&e.getTypeName()||null}function Lb(e){return new Xg(e)}function Fb(e){return new Zg(e)}function Bb(e){return new Qg(e)}function Vb(e){return new Kg(e)}function Ub(e){return new Jg(e)}function hR(e){let n=new t0(e);return pR()?new e0(n):n}var e0=class{constructor(n){this.inertDocumentHelper=n}getInertBodyElement(n){n="<body><remove></remove>"+n;try{let t=new window.DOMParser().parseFromString(nf(n),"text/html").body;return t===null?this.inertDocumentHelper.getInertBodyElement(n):(t.firstChild?.remove(),t)}catch{return null}}},t0=class{constructor(n){this.defaultDoc=n,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(n){let t=this.inertDocument.createElement("template");return t.innerHTML=nf(n),t}};function pR(){try{return!!new window.DOMParser().parseFromString(nf(""),"text/html")}catch{return!1}}var gR=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function sm(e){return e=String(e),e.match(gR)?e:"unsafe:"+e}function Li(e){let n={};for(let t of e.split(","))n[t]=!0;return n}function Ul(...e){let n={};for(let t of e)for(let r in t)t.hasOwnProperty(r)&&(n[r]=!0);return n}var jb=Li("area,br,col,hr,img,wbr"),Hb=Li("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),zb=Li("rp,rt"),mR=Ul(zb,Hb),yR=Ul(Hb,Li("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),CR=Ul(zb,Li("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),jw=Ul(jb,yR,CR,mR),Wb=Li("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),_R=Li("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),wR=Li("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),vR=Ul(Wb,_R,wR),bR=Li("script,style,template"),n0=class{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(n){let t=n.firstChild,r=!0,i=[];for(;t;){if(t.nodeType===Node.ELEMENT_NODE?r=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,r&&t.firstChild){i.push(t),t=IR(t);continue}for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let o=ER(t);if(o){t=o;break}t=i.pop()}}return this.buf.join("")}startElement(n){let t=Hw(n).toLowerCase();if(!jw.hasOwnProperty(t))return this.sanitizedSomething=!0,!bR.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);let r=n.attributes;for(let i=0;i<r.length;i++){let o=r.item(i),c=o.name,h=c.toLowerCase();if(!vR.hasOwnProperty(h)){this.sanitizedSomething=!0;continue}let g=o.value;Wb[h]&&(g=sm(g)),this.buf.push(" ",c,'="',zw(g),'"')}return this.buf.push(">"),!0}endElement(n){let t=Hw(n).toLowerCase();jw.hasOwnProperty(t)&&!jb.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(n){this.buf.push(zw(n))}};function xR(e,n){return(e.compareDocumentPosition(n)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function ER(e){let n=e.nextSibling;if(n&&e!==n.previousSibling)throw Gb(n);return n}function IR(e){let n=e.firstChild;if(n&&xR(e,n))throw Gb(n);return n}function Hw(e){let n=e.nodeName;return typeof n=="string"?n:"FORM"}function Gb(e){return new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`)}var SR=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,DR=/([^\#-~ |!])/g;function zw(e){return e.replace(/&/g,"&amp;").replace(SR,function(n){let t=n.charCodeAt(0),r=n.charCodeAt(1);return"&#"+((t-55296)*1024+(r-56320)+65536)+";"}).replace(DR,function(n){return"&#"+n.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var cd;function $b(e,n){let t=null;try{cd=cd||hR(e);let r=n?String(n):"";t=cd.getInertBodyElement(r);let i=5,o=r;do{if(i===0)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=t.innerHTML,t=cd.getInertBodyElement(r)}while(r!==o);let h=new n0().sanitizeChildren(Ww(t)||t);return nf(h)}finally{if(t){let r=Ww(t)||t;for(;r.firstChild;)r.firstChild.remove()}}}function Ww(e){return"content"in e&&AR(e)?e.content:null}function AR(e){return e.nodeType===Node.ELEMENT_NODE&&e.nodeName==="TEMPLATE"}var yo=function(e){return e[e.NONE=0]="NONE",e[e.HTML=1]="HTML",e[e.STYLE=2]="STYLE",e[e.SCRIPT=3]="SCRIPT",e[e.URL=4]="URL",e[e.RESOURCE_URL=5]="RESOURCE_URL",e}(yo||{});function qb(e){return dR(e[0])}var TR=/^>|^->|<!--|-->|--!>|<!-$/g,MR=/(<|>)/g,NR="\u200B$1\u200B";function OR(e){return e.replace(TR,n=>n.replace(MR,NR))}function RR(e){return e.ownerDocument.body}function Yb(e){return e instanceof Function?e():e}function ud(e){return(e??K(si)).get(ui)==="browser"}var ai=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}(ai||{}),PR;function am(e,n){return PR(e,n)}function Qs(e,n,t,r,i){if(r!=null){let o,c=!1;ci(r)?o=r:jr(r)&&(c=!0,r=r[ar]);let h=zr(r);e===0&&t!==null?i==null?Jb(n,t,h):Ld(n,t,h,i||null,!0):e===1&&t!==null?Ld(n,t,h,i||null,!0):e===2?dm(n,h,c):e===3&&n.destroyNode(h),o!=null&&XR(n,e,o,t,i)}}function Xb(e,n){return e.createText(n)}function kR(e,n,t){e.setValue(n,t)}function Zb(e,n){return e.createComment(OR(n))}function lm(e,n,t){return e.createElement(n,t)}function LR(e,n){Qb(e,n),n[ar]=null,n[Gr]=null}function FR(e,n,t,r,i,o){r[ar]=i,r[Gr]=n,of(e,r,t,1,i,o)}function Qb(e,n){n[Si].changeDetectionScheduler?.notify(9),of(e,n,n[Mt],2,null,null)}function BR(e){let n=e[Sl];if(!n)return mg(e[De],e);for(;n;){let t=null;if(jr(n))t=n[Sl];else{let r=n[In];r&&(t=r)}if(!t){for(;n&&!n[Ur]&&n!==e;)jr(n)&&mg(n[De],n),n=n[Sn];n===null&&(n=e),jr(n)&&mg(n[De],n),t=n&&n[Ur]}n=t}}function VR(e,n,t,r){let i=In+r,o=t.length;r>0&&(t[i-1][Ur]=n),r<o-In?(n[Ur]=t[i],Cv(t,In+r,n)):(t.push(n),n[Ur]=null),n[Sn]=t;let c=n[Qo];c!==null&&t!==c&&Kb(c,n);let h=n[Di];h!==null&&h.insertView(e),Pg(n),n[Se]|=128}function Kb(e,n){let t=e[ia],r=n[Sn];if(jr(r))e[Se]|=Dd.HasTransplantedViews;else{let i=r[Sn][lr];n[lr]!==i&&(e[Se]|=Dd.HasTransplantedViews)}t===null?e[ia]=[n]:t.push(n)}function cm(e,n){let t=e[ia],r=t.indexOf(n);t.splice(r,1)}function Al(e,n){if(e.length<=In)return;let t=In+n,r=e[t];if(r){let i=r[Qo];i!==null&&i!==e&&cm(i,r),n>0&&(e[t-1][Ur]=r[Ur]);let o=xd(e,In+n);LR(r[De],r);let c=o[Di];c!==null&&c.detachView(o[De]),r[Sn]=null,r[Ur]=null,r[Se]&=-129}return r}function rf(e,n){if(!(n[Se]&256)){let t=n[Mt];t.destroyNode&&of(e,n,t,3,null,null),BR(n)}}function mg(e,n){if(n[Se]&256)return;let t=$e(null);try{n[Se]&=-129,n[Se]|=256,n[wr]&&Hp(n[wr]),jR(e,n),UR(e,n),n[De].type===1&&n[Mt].destroy();let r=n[Qo];if(r!==null&&ci(n[Sn])){r!==n[Sn]&&cm(r,n);let i=n[Di];i!==null&&i.detachView(e)}Gg(n)}finally{$e(t)}}function UR(e,n){let t=e.cleanup,r=n[Id];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let c=t[o+3];c>=0?r[c]():r[-c].unsubscribe(),o+=2}else{let c=r[t[o+1]];t[o].call(c)}r!==null&&(n[Id]=null);let i=n[lo];if(i!==null){n[lo]=null;for(let o=0;o<i.length;o++){let c=i[o];c()}}}function jR(e,n){let t;if(e!=null&&(t=e.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=n[t[r]];if(!(i instanceof es)){let o=t[r+1];if(Array.isArray(o))for(let c=0;c<o.length;c+=2){let h=i[o[c]],g=o[c+1];ri(4,h,g);try{g.call(h)}finally{ri(5,h,g)}}else{ri(4,i,o);try{o.call(i)}finally{ri(5,i,o)}}}}}function HR(e,n,t){return zR(e,n.parent,t)}function zR(e,n,t){let r=n;for(;r!==null&&r.type&168;)n=r,r=n.parent;if(r===null)return t[ar];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=e.data[r.directiveStart+i];if(o===oi.None||o===oi.Emulated)return null}return cr(r,t)}}function Ld(e,n,t,r,i){e.insertBefore(n,t,r,i)}function Jb(e,n,t){e.appendChild(n,t)}function Gw(e,n,t,r,i){r!==null?Ld(e,n,t,r,i):Jb(e,n,t)}function ex(e,n){return e.parentNode(n)}function WR(e,n){return e.nextSibling(n)}function GR(e,n,t){return qR(e,n,t)}function $R(e,n,t){return e.type&40?cr(e,t):null}var qR=$R,$w;function um(e,n,t,r){let i=HR(e,r,n),o=n[Mt],c=r.parent||n[Gr],h=GR(c,r,n);if(i!=null)if(Array.isArray(t))for(let g=0;g<t.length;g++)Gw(o,i,t[g],h,!1);else Gw(o,i,t,h,!1);$w!==void 0&&$w(o,r,n,t,i)}function wl(e,n){if(n!==null){let t=n.type;if(t&3)return cr(n,e);if(t&4)return r0(-1,e[n.index]);if(t&8){let r=n.child;if(r!==null)return wl(e,r);{let i=e[n.index];return ci(i)?r0(-1,i):zr(i)}}else{if(t&128)return wl(e,n.next);if(t&32)return am(n,e)()||zr(e[n.index]);{let r=tx(e,n);if(r!==null){if(Array.isArray(r))return r[0];let i=Ko(e[lr]);return wl(i,r)}else return wl(e,n.next)}}}return null}function tx(e,n){if(n!==null){let r=e[lr][Gr],i=n.projection;return r.projection[i]}return null}function r0(e,n){let t=In+e+1;if(t<n.length){let r=n[t],i=r[De].firstChild;if(i!==null)return wl(r,i)}return n[Ai]}function dm(e,n,t){e.removeChild(null,n,t)}function nx(e){e.textContent=""}function fm(e,n,t,r,i,o,c){for(;t!=null;){if(t.type===128){t=t.next;continue}let h=r[t.index],g=t.type;if(c&&n===0&&(h&&ns(zr(h),r),t.flags|=2),(t.flags&32)!==32)if(g&8)fm(e,n,t.child,r,i,o,!1),Qs(n,e,i,h,o);else if(g&32){let m=am(t,r),v;for(;v=m();)Qs(n,e,i,v,o);Qs(n,e,i,h,o)}else g&16?YR(e,n,r,t,i,o):Qs(n,e,i,h,o);t=c?t.projectionNext:t.next}}function of(e,n,t,r,i,o){fm(t,r,e.firstChild,n,i,o,!1)}function YR(e,n,t,r,i,o){let c=t[lr],g=c[Gr].projection[r.projection];if(Array.isArray(g))for(let m=0;m<g.length;m++){let v=g[m];Qs(n,e,i,v,o)}else{let m=g,v=c[Sn];Pd(r)&&(m.flags|=128),fm(e,n,m,v,i,o,!0)}}function XR(e,n,t,r,i){let o=t[Ai],c=zr(t);o!==c&&Qs(n,e,r,o,i);for(let h=In;h<t.length;h++){let g=t[h];of(g[De],g,e,n,r,o)}}function ZR(e,n,t,r,i){if(n)i?e.addClass(t,r):e.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:ai.DashCase;i==null?e.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=ai.Important),e.setStyle(t,r,i,o))}}function QR(e,n,t){e.setAttribute(n,"style",t)}function rx(e,n,t){t===""?e.removeAttribute(n,"class"):e.setAttribute(n,"class",t)}function ix(e,n,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&Tg(e,n,r),i!==null&&rx(e,n,i),o!==null&&QR(e,n,o)}var di={};function Z(e=1){ox(Dn(),nt(),po()+e,!1)}function ox(e,n,t,r){if(!r)if((n[Se]&3)===3){let o=e.preOrderCheckHooks;o!==null&&md(n,o,t)}else{let o=e.preOrderHooks;o!==null&&yd(n,o,0,t)}Jo(t)}function W(e,n=je.Default){let t=nt();if(t===null)return He(e,n);let r=Qn();return db(r,t,Vn(e),n)}function sx(e,n,t,r,i,o){let c=$e(null);try{let h=null;i&co.SignalBased&&(h=n[r][xi]),h!==null&&h.transformFn!==void 0&&(o=h.transformFn(o)),i&co.HasDecoratorInputTransform&&(o=e.inputTransforms[r].call(n,o)),e.setInput!==null?e.setInput(n,h,o,t,r):Lv(n,h,r,o)}finally{$e(c)}}function KR(e,n){let t=e.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Jo(~i);else{let o=i,c=t[++r],h=t[++r];fO(c,o);let g=n[o];h(2,g)}}}finally{Jo(-1)}}function sf(e,n,t,r,i,o,c,h,g,m,v){let b=n.blueprint.slice();return b[ar]=i,b[Se]=r|4|128|8|64,(m!==null||e&&e[Se]&2048)&&(b[Se]|=2048),jv(b),b[Sn]=b[fa]=e,b[kn]=t,b[Si]=c||e&&e[Si],b[Mt]=h||e&&e[Mt],b[ra]=g||e&&e[ra]||null,b[Gr]=o,b[Zd]=qO(),b[Hr]=v,b[Rv]=m,b[lr]=n.type==2?e[lr]:b,b}function af(e,n,t,r,i){let o=e.data[n];if(o===null)o=JR(e,n,t,r,i),dO()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let c=sO();o.injectorIndex=c===null?-1:c.injectorIndex}return Bl(o,!0),o}function JR(e,n,t,r,i){let o=$v(),c=qv(),h=c?o:o&&o.parent,g=e.data[n]=sP(e,h,t,n,r,i);return e.firstChild===null&&(e.firstChild=g),o!==null&&(c?o.child==null&&g.parent!==null&&(o.child=g):o.next===null&&(o.next=g,g.prev=o)),g}function ax(e,n,t,r){if(t===0)return-1;let i=n.length;for(let o=0;o<t;o++)n.push(r),e.blueprint.push(r),e.data.push(null);return i}function lx(e,n,t,r,i){let o=po(),c=r&2;try{Jo(-1),c&&n.length>hn&&ox(e,n,hn,!1),ri(c?2:0,i),t(r,i)}finally{Jo(o),ri(c?3:1,i)}}function cx(e,n,t){if(kv(n)){let r=$e(null);try{let i=n.directiveStart,o=n.directiveEnd;for(let c=i;c<o;c++){let h=e.data[c];if(h.contentQueries){let g=t[c];h.contentQueries(1,g,c)}}}finally{$e(r)}}}function ux(e,n,t){Gv()&&(fP(e,n,t,cr(t,n)),(t.flags&64)===64&&yx(e,n,t))}function dx(e,n,t=cr){let r=n.localNames;if(r!==null){let i=n.index+1;for(let o=0;o<r.length;o+=2){let c=r[o+1],h=c===-1?t(n,e):e[c];e[i++]=h}}}function fx(e){let n=e.tView;return n===null||n.incompleteFirstPass?e.tView=hm(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):n}function hm(e,n,t,r,i,o,c,h,g,m,v){let b=hn+r,I=b+i,A=eP(b,I),R=typeof m=="function"?m():m;return A[De]={type:e,blueprint:A,template:t,queries:null,viewQuery:h,declTNode:n,data:A.slice().fill(null,b),bindingStartIndex:b,expandoStartIndex:I,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof c=="function"?c():c,firstChild:null,schemas:g,consts:R,incompleteFirstPass:!1,ssrId:v}}function eP(e,n){let t=[];for(let r=0;r<n;r++)t.push(r<e?null:di);return t}function tP(e,n,t,r){let o=r.get(Pb,Rb)||t===oi.ShadowDom,c=e.selectRootElement(n,o);return nP(c),c}function nP(e){hx(e)}var hx=()=>null;function rP(e){wb(e)?nx(e):lR(e)}function iP(){hx=rP}function oP(e,n,t,r){let i=wx(n);i.push(t),e.firstCreatePass&&vx(e).push(r,i.length-1)}function sP(e,n,t,r,i,o){let c=n?n.injectorIndex:-1,h=0;return Fl()&&(h|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:c,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:h,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:n,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function qw(e,n,t,r,i){for(let o in n){if(!n.hasOwnProperty(o))continue;let c=n[o];if(c===void 0)continue;r??={};let h,g=co.None;Array.isArray(c)?(h=c[0],g=c[1]):h=c;let m=o;if(i!==null){if(!i.hasOwnProperty(o))continue;m=i[o]}e===0?Yw(r,t,m,h,g):Yw(r,t,m,h)}return r}function Yw(e,n,t,r,i){let o;e.hasOwnProperty(t)?(o=e[t]).push(n,r):o=e[t]=[n,r],i!==void 0&&o.push(i)}function aP(e,n,t){let r=n.directiveStart,i=n.directiveEnd,o=e.data,c=n.attrs,h=[],g=null,m=null;for(let v=r;v<i;v++){let b=o[v],I=t?t.get(b):null,A=I?I.inputs:null,R=I?I.outputs:null;g=qw(0,b.inputs,v,g,A),m=qw(1,b.outputs,v,m,R);let j=g!==null&&c!==null&&!U0(n)?xP(g,v,c):null;h.push(j)}g!==null&&(g.hasOwnProperty("class")&&(n.flags|=8),g.hasOwnProperty("style")&&(n.flags|=16)),n.initialInputs=h,n.inputs=g,n.outputs=m}function lP(e){return e==="class"?"className":e==="for"?"htmlFor":e==="formaction"?"formAction":e==="innerHtml"?"innerHTML":e==="readonly"?"readOnly":e==="tabindex"?"tabIndex":e}function px(e,n,t,r,i,o,c,h){let g=cr(n,t),m=n.inputs,v;!h&&m!=null&&(v=m[r])?(pm(e,t,v,r,i),Ll(n)&&cP(t,n.index)):n.type&3?(r=lP(r),i=c!=null?c(i,n.value||"",r):i,o.setProperty(g,r,i)):n.type&12}function cP(e,n){let t=ho(n,e);t[Se]&16||(t[Se]|=64)}function gx(e,n,t,r){if(Gv()){let i=r===null?null:{"":-1},o=pP(e,t),c,h;o===null?c=h=null:[c,h]=o,c!==null&&mx(e,n,t,c,i,h),i&&gP(t,r,i)}t.mergedAttrs=El(t.mergedAttrs,t.attrs)}function mx(e,n,t,r,i,o){for(let m=0;m<r.length;m++)Bg(Nd(t,n),e,r[m].type);yP(t,e.data.length,r.length);for(let m=0;m<r.length;m++){let v=r[m];v.providersResolver&&v.providersResolver(v)}let c=!1,h=!1,g=ax(e,n,r.length,null);for(let m=0;m<r.length;m++){let v=r[m];t.mergedAttrs=El(t.mergedAttrs,v.hostAttrs),CP(e,t,n,g,v),mP(g,v,i),v.contentQueries!==null&&(t.flags|=4),(v.hostBindings!==null||v.hostAttrs!==null||v.hostVars!==0)&&(t.flags|=64);let b=v.type.prototype;!c&&(b.ngOnChanges||b.ngOnInit||b.ngDoCheck)&&((e.preOrderHooks??=[]).push(t.index),c=!0),!h&&(b.ngOnChanges||b.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(t.index),h=!0),g++}aP(e,t,o)}function uP(e,n,t,r,i){let o=i.hostBindings;if(o){let c=e.hostBindingOpCodes;c===null&&(c=e.hostBindingOpCodes=[]);let h=~n.index;dP(c)!=h&&c.push(h),c.push(t,r,o)}}function dP(e){let n=e.length;for(;n>0;){let t=e[--n];if(typeof t=="number"&&t<0)return t}return 0}function fP(e,n,t,r){let i=t.directiveStart,o=t.directiveEnd;Ll(t)&&_P(n,t,e.data[i+t.componentOffset]),e.firstCreatePass||Nd(t,n),ns(r,n);let c=t.initialInputs;for(let h=i;h<o;h++){let g=e.data[h],m=ts(n,e,h,t);if(ns(m,n),c!==null&&bP(n,h-i,m,g,t,c),uo(g)){let v=ho(t.index,n);v[kn]=ts(n,e,h,t)}}}function yx(e,n,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,c=hO();try{Jo(o);for(let h=r;h<i;h++){let g=e.data[h],m=n[h];kg(h),(g.hostBindings!==null||g.hostVars!==0||g.hostAttrs!==null)&&hP(g,m)}}finally{Jo(-1),kg(c)}}function hP(e,n){e.hostBindings!==null&&e.hostBindings(1,n)}function pP(e,n){let t=e.directiveRegistry,r=null,i=null;if(t)for(let o=0;o<t.length;o++){let c=t[o];if(bN(n,c.selectors,!1))if(r||(r=[]),uo(c))if(c.findHostDirectiveDefs!==null){let h=[];i=i||new Map,c.findHostDirectiveDefs(c,h,i),r.unshift(...h,c);let g=h.length;i0(e,n,g)}else r.unshift(c),i0(e,n,0);else i=i||new Map,c.findHostDirectiveDefs?.(c,r,i),r.push(c)}return r===null?null:[r,i]}function i0(e,n,t){n.componentOffset=t,(e.components??=[]).push(n.index)}function gP(e,n,t){if(n){let r=e.localNames=[];for(let i=0;i<n.length;i+=2){let o=t[n[i+1]];if(o==null)throw new fe(-301,!1);r.push(n[i],o)}}}function mP(e,n,t){if(t){if(n.exportAs)for(let r=0;r<n.exportAs.length;r++)t[n.exportAs[r]]=e;uo(n)&&(t[""]=e)}}function yP(e,n,t){e.flags|=1,e.directiveStart=n,e.directiveEnd=n+t,e.providerIndexes=n}function CP(e,n,t,r,i){e.data[r]=i;let o=i.factory||(i.factory=ea(i.type,!0)),c=new es(o,uo(i),W);e.blueprint[r]=c,t[r]=c,uP(e,n,r,ax(e,t,i.hostVars,di),i)}function _P(e,n,t){let r=cr(n,e),i=fx(t),o=e[Si].rendererFactory,c=16;t.signals?c=4096:t.onPush&&(c=64);let h=lf(e,sf(e,i,null,c,r,n,null,o.createRenderer(r,t),null,null,null));e[n.index]=h}function wP(e,n,t,r,i,o){let c=cr(e,n);vP(n[Mt],c,o,e.value,t,r,i)}function vP(e,n,t,r,i,o,c){if(o==null)e.removeAttribute(n,i,t);else{let h=c==null?k0(o):c(o,r||"",i);e.setAttribute(n,i,h,t)}}function bP(e,n,t,r,i,o){let c=o[n];if(c!==null)for(let h=0;h<c.length;){let g=c[h++],m=c[h++],v=c[h++],b=c[h++];sx(r,t,g,m,v,b)}}function xP(e,n,t){let r=null,i=0;for(;i<t.length;){let o=t[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(e.hasOwnProperty(o)){r===null&&(r=[]);let c=e[o];for(let h=0;h<c.length;h+=3)if(c[h]===n){r.push(o,c[h+1],c[h+2],t[i+1]);break}}i+=2}return r}function Cx(e,n,t,r){return[e,!0,0,n,null,r,null,t,null,null]}function _x(e,n){let t=e.contentQueries;if(t!==null){let r=$e(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],c=t[i+1];if(c!==-1){let h=e.data[c];$0(o),h.contentQueries(2,n[c],c)}}}finally{$e(r)}}}function lf(e,n){return e[Sl]?e[Tw][Ur]=n:e[Sl]=n,e[Tw]=n,n}function o0(e,n,t){$0(0);let r=$e(null);try{n(e,t)}finally{$e(r)}}function wx(e){return e[Id]??=[]}function vx(e){return e.cleanup??=[]}function bx(e,n){let t=e[ra],r=t?t.get(Ti,null):null;r&&r.handleError(n)}function pm(e,n,t,r,i){for(let o=0;o<t.length;){let c=t[o++],h=t[o++],g=t[o++],m=n[c],v=e.data[c];sx(v,m,r,h,g,i)}}function EP(e,n,t){let r=Uv(n,e);kR(e[Mt],r,t)}function IP(e,n){let t=ho(n,e),r=t[De];SP(r,t);let i=t[ar];i!==null&&t[Hr]===null&&(t[Hr]=im(i,t[ra])),gm(r,t,t[kn])}function SP(e,n){for(let t=n.length;t<e.blueprint.length;t++)n.push(e.blueprint[t])}function gm(e,n,t){q0(n);try{let r=e.viewQuery;r!==null&&o0(1,r,t);let i=e.template;i!==null&&lx(e,n,i,1,t),e.firstCreatePass&&(e.firstCreatePass=!1),n[Di]?.finishViewCreation(e),e.staticContentQueries&&_x(e,n),e.staticViewQueries&&o0(2,e.viewQuery,t);let o=e.components;o!==null&&DP(n,o)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{n[Se]&=-5,Y0()}}function DP(e,n){for(let t=0;t<n.length;t++)IP(e,n[t])}function cf(e,n,t,r){let i=$e(null);try{let o=n.tView,h=e[Se]&4096?4096:16,g=sf(e,o,t,h,null,n,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),m=e[n.index];g[Qo]=m;let v=e[Di];return v!==null&&(g[Di]=v.createEmbeddedView(o)),gm(o,g,t),g}finally{$e(i)}}function xx(e,n){let t=In+n;if(t<e.length)return e[t]}function Tl(e,n){return!n||n.firstChild===null||Pd(e)}function uf(e,n,t,r=!0){let i=n[De];if(VR(i,n,e,t),r){let c=r0(t,e),h=n[Mt],g=ex(h,e[Ai]);g!==null&&FR(i,e[Gr],h,n,g,c)}let o=n[Hr];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Ex(e,n){let t=Al(e,n);return t!==void 0&&rf(t[De],t),t}function Fd(e,n,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=n[t.index];o!==null&&r.push(zr(o)),ci(o)&&AP(o,r);let c=t.type;if(c&8)Fd(e,n,t.child,r);else if(c&32){let h=am(t,n),g;for(;g=h();)r.push(g)}else if(c&16){let h=tx(n,t);if(Array.isArray(h))r.push(...h);else{let g=Ko(n[lr]);Fd(g[De],g,h,r,!0)}}t=i?t.projectionNext:t.next}return r}function AP(e,n){for(let t=In;t<e.length;t++){let r=e[t],i=r[De].firstChild;i!==null&&Fd(r[De],r,i,n)}e[Ai]!==e[ar]&&n.push(e[Ai])}var Ix=[];function TP(e){return e[wr]??MP(e)}function MP(e){let n=Ix.pop()??Object.create(OP);return n.lView=e,n}function NP(e){e.lView[wr]!==e&&(e.lView=null,Ix.push(e))}var OP=Le(ne({},ml),{consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{Kd(e.lView)},consumerOnSignalRead(){this.lView[wr]=this}});function RP(e){let n=e[wr]??Object.create(PP);return n.lView=e,n}var PP=Le(ne({},ml),{consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{let n=Ko(e.lView);for(;n&&!Sx(n[De]);)n=Ko(n);n&&Hv(n)},consumerOnSignalRead(){this.lView[wr]=this}});function Sx(e){return e.type!==2}var kP=100;function Dx(e,n=!0,t=0){let r=e[Si],i=r.rendererFactory,o=!1;o||i.begin?.();try{LP(e,t)}catch(c){throw n&&bx(e,c),c}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function LP(e,n){let t=Yv();try{Nw(!0),s0(e,n);let r=0;for(;Qd(e);){if(r===kP)throw new fe(103,!1);r++,s0(e,1)}}finally{Nw(t)}}function FP(e,n,t,r){let i=n[Se];if((i&256)===256)return;let o=!1,c=!1;!o&&n[Si].inlineEffectRunner?.flush(),q0(n);let h=!0,g=null,m=null;o||(Sx(e)?(m=TP(n),g=Tu(m)):k_()===null?(h=!1,m=RP(n),g=Tu(m)):n[wr]&&(Hp(n[wr]),n[wr]=null));try{jv(n),uO(e.bindingStartIndex),t!==null&&lx(e,n,t,2,r);let v=(i&3)===3;if(!o)if(v){let A=e.preOrderCheckHooks;A!==null&&md(n,A,null)}else{let A=e.preOrderHooks;A!==null&&yd(n,A,0,null),dg(n,0)}if(c||BP(n),Ax(n,0),e.contentQueries!==null&&_x(e,n),!o)if(v){let A=e.contentCheckHooks;A!==null&&md(n,A)}else{let A=e.contentHooks;A!==null&&yd(n,A,1),dg(n,1)}KR(e,n);let b=e.components;b!==null&&Mx(n,b,0);let I=e.viewQuery;if(I!==null&&o0(2,I,r),!o)if(v){let A=e.viewCheckHooks;A!==null&&md(n,A)}else{let A=e.viewHooks;A!==null&&yd(n,A,2),dg(n,2)}if(e.firstUpdatePass===!0&&(e.firstUpdatePass=!1),n[ug]){for(let A of n[ug])A();n[ug]=null}o||(n[Se]&=-73)}catch(v){throw o||Kd(n),v}finally{m!==null&&(Up(m,g),h&&NP(m)),Y0()}}function Ax(e,n){for(let t=bb(e);t!==null;t=xb(t))for(let r=In;r<t.length;r++){let i=t[r];Tx(i,n)}}function BP(e){for(let n=bb(e);n!==null;n=xb(n)){if(!(n[Se]&Dd.HasTransplantedViews))continue;let t=n[ia];for(let r=0;r<t.length;r++){let i=t[r];Hv(i)}}}function VP(e,n,t){let r=ho(n,e);Tx(r,t)}function Tx(e,n){G0(e)&&s0(e,n)}function s0(e,n){let r=e[De],i=e[Se],o=e[wr],c=!!(n===0&&i&16);if(c||=!!(i&64&&n===0),c||=!!(i&1024),c||=!!(o?.dirty&&jp(o)),c||=!1,o&&(o.dirty=!1),e[Se]&=-9217,c)FP(r,e,r.template,e[kn]);else if(i&8192){Ax(e,1);let h=r.components;h!==null&&Mx(e,h,1)}}function Mx(e,n,t){for(let r=0;r<n.length;r++)VP(e,n[r],t)}function mm(e,n){let t=Yv()?64:1088;for(e[Si].changeDetectionScheduler?.notify(n);e;){e[Se]|=t;let r=Ko(e);if(Ad(e)&&!r)return e;e=r}return null}var rs=class{get rootNodes(){let n=this._lView,t=n[De];return Fd(t,n,t.firstChild,[])}constructor(n,t,r=!0){this._lView=n,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[kn]}set context(n){this._lView[kn]=n}get destroyed(){return(this._lView[Se]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let n=this._lView[Sn];if(ci(n)){let t=n[Sd],r=t?t.indexOf(this):-1;r>-1&&(Al(n,r),xd(t,r))}this._attachedToViewContainer=!1}rf(this._lView[De],this._lView)}onDestroy(n){zv(this._lView,n)}markForCheck(){mm(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Se]&=-129}reattach(){Pg(this._lView),this._lView[Se]|=128}detectChanges(){this._lView[Se]|=1024,Dx(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new fe(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let n=Ad(this._lView),t=this._lView[Qo];t!==null&&!n&&cm(t,this._lView),Qb(this._lView[De],this._lView)}attachToAppRef(n){if(this._attachedToViewContainer)throw new fe(902,!1);this._appRef=n;let t=Ad(this._lView),r=this._lView[Qo];r!==null&&!t&&Kb(r,this._lView),Pg(this._lView)}},sa=(()=>{class e{static{this.__NG_ELEMENT_ID__=HP}}return e})(),UP=sa,jP=class extends UP{constructor(n,t,r){super(),this._declarationLView=n,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,t){return this.createEmbeddedViewImpl(n,t)}createEmbeddedViewImpl(n,t,r){let i=cf(this._declarationLView,this._declarationTContainer,n,{embeddedViewInjector:t,dehydratedView:r});return new rs(i)}};function HP(){return ym(Qn(),nt())}function ym(e,n){return e.type&4?new jP(n,e,pa(e,n)):null}var zP=new RegExp(`^(\\d+)*(${Db}|${Sb})*(.*)`);function WP(e){let n=e.match(zP),[t,r,i,o]=n,c=r?parseInt(r,10):i,h=[];for(let[g,m,v]of o.matchAll(/(f|n)(\d*)/g)){let b=parseInt(v,10)||1;h.push(m,b)}return[c,...h]}function GP(e){return!e.prev&&e.parent?.type===8}function yg(e){return e.index-hn}function $P(e,n){let t=e.i18nNodes;if(t)return t.get(n)}function df(e,n,t,r){let i=yg(r),o=$P(e,i);if(o===void 0){let c=e.data[tR];if(c?.[i])o=YP(c[i],t);else if(n.firstChild===r)o=e.firstChild;else{let h=r.prev===null,g=r.prev??r.parent;if(GP(r)){let m=yg(r.parent);o=Yg(e,m)}else{let m=cr(g,t);if(h)o=m.firstChild;else{let v=yg(g),b=Yg(e,v);if(g.type===2&&b){let A=om(e,v)+1;o=ff(A,b)}else o=m.nextSibling}}}}return o}function ff(e,n){let t=n;for(let r=0;r<e;r++)t=t.nextSibling;return t}function qP(e,n){let t=e;for(let r=0;r<n.length;r+=2){let i=n[r],o=n[r+1];for(let c=0;c<o;c++)switch(i){case qg.FirstChild:t=t.firstChild;break;case qg.NextSibling:t=t.nextSibling;break}}return t}function YP(e,n){let[t,...r]=WP(e),i;if(t===Sb)i=n[lr][ar];else if(t===Db)i=RR(n[lr][ar]);else{let o=Number(t);i=zr(n[o+hn])}return qP(i,r)}var XP=!1;function ZP(e){XP=e}function QP(e){let n=e[Hr];if(n){let{i18nNodes:t,dehydratedIcuData:r}=n;if(t&&r){let i=e[Mt];for(let o of r.values())KP(i,t,o)}n.i18nNodes=void 0,n.dehydratedIcuData=void 0}}function KP(e,n,t){for(let r of t.node.cases[t.case]){let i=n.get(r.index-hn);i&&dm(e,i,!1)}}function Nx(e){let n=e[Dl]??[],r=e[Sn][Mt];for(let i of n)JP(i,r);e[Dl]=Un}function JP(e,n){let t=0,r=e.firstChild;if(r){let i=e.data[kd];for(;t<i;){let o=r.nextSibling;dm(n,r,!1),r=o,t++}}}function Ox(e){Nx(e);let n=e[ar];jr(n)&&Bd(n);for(let t=In;t<e.length;t++)Bd(e[t])}function Bd(e){QP(e);let n=e[De];for(let t=hn;t<n.bindingStartIndex;t++)if(ci(e[t])){let r=e[t];Ox(r)}else jr(e[t])&&Bd(e[t])}function e3(e){let n=e._views;for(let t of n){let r=sR(t);r!==null&&r[ar]!==null&&(jr(r)?Bd(r):Ox(r))}}function t3(e,n){let t=[];for(let r of n)for(let i=0;i<(r[Ab]??1);i++){let o={data:r,firstChild:null};r[kd]>0&&(o.firstChild=e,e=ff(r[kd],e)),t.push(o)}return[e,t]}var Rx=()=>null;function n3(e,n){let t=e[Dl];return!n||t===null||t.length===0?null:t[0].data[eR]===n?t.shift():(Nx(e),null)}function r3(){Rx=n3}function Ml(e,n){return Rx(e,n)}var aa=class{},Cm=new ve("",{providedIn:"root",factory:()=>!1});var Px=new ve(""),kx=new ve(""),a0=class{},Vd=class{};function i3(e){let n=Error(`No component factory found for ${jn(e)}.`);return n[o3]=e,n}var o3="ngComponent";var l0=class{resolveComponentFactory(n){throw i3(n)}},la=class{static{this.NULL=new l0}},ca=class{},$r=(()=>{class e{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>s3()}}return e})();function s3(){let e=nt(),n=Qn(),t=ho(n.index,e);return(jr(t)?t:e)[Mt]}var a3=(()=>{class e{static{this.\u0275prov=de({token:e,providedIn:"root",factory:()=>null})}}return e})();function c0(e,n,t){let r=t?e.styles:null,i=t?e.classes:null,o=0;if(n!==null)for(let c=0;c<n.length;c++){let h=n[c];if(typeof h=="number")o=h;else if(o==1)i=Ig(i,h);else if(o==2){let g=h,m=n[++c];r=Ig(r,g+": "+m+";")}}t?e.styles=r:e.stylesWithoutHost=r,t?e.classes=i:e.classesWithoutHost=i}var Ud=class extends la{constructor(n){super(),this.ngModule=n}resolveComponentFactory(n){let t=Zo(n);return new Nl(t,this.ngModule)}};function Xw(e,n){let t=[];for(let r in e){if(!e.hasOwnProperty(r))continue;let i=e[r];if(i===void 0)continue;let o=Array.isArray(i),c=o?i[0]:i,h=o?i[1]:co.None;n?t.push({propName:c,templateName:r,isSignal:(h&co.SignalBased)!==0}):t.push({propName:c,templateName:r})}return t}function l3(e){let n=e.toLowerCase();return n==="svg"?qN:n==="math"?YN:null}var Nl=class extends Vd{get inputs(){let n=this.componentDef,t=n.inputTransforms,r=Xw(n.inputs,!0);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return Xw(this.componentDef.outputs,!1)}constructor(n,t){super(),this.componentDef=n,this.ngModule=t,this.componentType=n.type,this.selector=SN(n.selectors),this.ngContentSelectors=n.ngContentSelectors?n.ngContentSelectors:[],this.isBoundToModule=!!t}create(n,t,r,i){let o=$e(null);try{i=i||this.ngModule;let c=i instanceof vr?i:i?.injector;c&&this.componentDef.getStandaloneInjector!==null&&(c=this.componentDef.getStandaloneInjector(c)||c);let h=c?new Lg(n,c):n,g=h.get(ca,null);if(g===null)throw new fe(407,!1);let m=h.get(a3,null),v=h.get(aa,null),b={rendererFactory:g,sanitizer:m,inlineEffectRunner:null,changeDetectionScheduler:v},I=g.createRenderer(null,this.componentDef),A=this.componentDef.selectors[0][0]||"div",R=r?tP(I,r,this.componentDef.encapsulation,h):lm(I,A,l3(A)),j=512;this.componentDef.signals?j|=4096:this.componentDef.onPush||(j|=16);let Y=null;R!==null&&(Y=im(R,h,!0));let G=hm(0,null,null,1,0,null,null,null,null,null,null),ce=sf(null,G,null,j,null,null,b,I,h,null,Y);q0(ce);let Xe,ge,H=null;try{let he=this.componentDef,q,rr=null;he.findHostDirectiveDefs?(q=[],rr=new Map,he.findHostDirectiveDefs(he,q,rr),q.push(he)):q=[he];let On=c3(ce,R);H=u3(On,R,he,q,ce,b,I),ge=W0(G,hn),R&&h3(I,he,R,r),t!==void 0&&p3(ge,this.ngContentSelectors,t),Xe=f3(H,he,q,rr,ce,[g3]),gm(G,ce,null)}catch(he){throw H!==null&&Gg(H),Gg(ce),he}finally{Y0()}return new u0(this.componentType,Xe,pa(ge,ce),ce,ge)}finally{$e(o)}}},u0=class extends a0{constructor(n,t,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new rs(i,void 0,!1),this.componentType=n}setInput(n,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[n])){if(this.previousInputValues??=new Map,this.previousInputValues.has(n)&&Object.is(this.previousInputValues.get(n),t))return;let o=this._rootLView;pm(o[De],o,i,n,t),this.previousInputValues.set(n,t);let c=ho(this._tNode.index,o);mm(c,1)}}get injector(){return new Yo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(n){this.hostView.onDestroy(n)}};function c3(e,n){let t=e[De],r=hn;return e[r]=n,af(t,r,2,"#host",null)}function u3(e,n,t,r,i,o,c){let h=i[De];d3(r,e,n,c);let g=null;n!==null&&(g=im(n,i[ra]));let m=o.rendererFactory.createRenderer(n,t),v=16;t.signals?v=4096:t.onPush&&(v=64);let b=sf(i,fx(t),null,v,i[e.index],e,o,m,null,null,g);return h.firstCreatePass&&i0(h,e,r.length-1),lf(i,b),i[e.index]=b}function d3(e,n,t,r){for(let i of e)n.mergedAttrs=El(n.mergedAttrs,i.hostAttrs);n.mergedAttrs!==null&&(c0(n,n.mergedAttrs,!0),t!==null&&ix(r,t,n))}function f3(e,n,t,r,i,o){let c=Qn(),h=i[De],g=cr(c,i);mx(h,i,c,t,null,r);for(let v=0;v<t.length;v++){let b=c.directiveStart+v,I=ts(i,h,b,c);ns(I,i)}yx(h,i,c),g&&ns(g,i);let m=ts(i,h,c.directiveStart+c.componentOffset,c);if(e[kn]=i[kn]=m,o!==null)for(let v of o)v(m,n);return cx(h,c,i),m}function h3(e,n,t,r){if(r)Tg(e,t,["ng-version","18.2.7"]);else{let{attrs:i,classes:o}=DN(n.selectors[0]);i&&Tg(e,t,i),o&&o.length>0&&rx(e,t,o.join(" "))}}function p3(e,n,t){let r=e.projection=[];for(let i=0;i<n.length;i++){let o=t[i];r.push(o!=null?Array.from(o):null)}}function g3(){let e=Qn();Q0(nt()[De],e)}var ss=(()=>{class e{static{this.__NG_ELEMENT_ID__=m3}}return e})();function m3(){let e=Qn();return Fx(e,nt())}var y3=ss,Lx=class extends y3{constructor(n,t,r){super(),this._lContainer=n,this._hostTNode=t,this._hostLView=r}get element(){return pa(this._hostTNode,this._hostLView)}get injector(){return new Yo(this._hostTNode,this._hostLView)}get parentInjector(){let n=K0(this._hostTNode,this._hostLView);if(ob(n)){let t=Md(n,this._hostLView),r=Td(n),i=t[De].data[r+8];return new Yo(i,t)}else return new Yo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(n){let t=Zw(this._lContainer);return t!==null&&t[n]||null}get length(){return this._lContainer.length-In}createEmbeddedView(n,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let c=Ml(this._lContainer,n.ssrId),h=n.createEmbeddedViewImpl(t||{},o,c);return this.insertImpl(h,i,Tl(this._hostTNode,c)),h}createComponent(n,t,r,i,o){let c=n&&!zN(n),h;if(c)h=t;else{let R=t||{};h=R.index,r=R.injector,i=R.projectableNodes,o=R.environmentInjector||R.ngModuleRef}let g=c?n:new Nl(Zo(n)),m=r||this.parentInjector;if(!o&&g.ngModule==null){let j=(c?m:this.parentInjector).get(vr,null);j&&(o=j)}let v=Zo(g.componentType??{}),b=Ml(this._lContainer,v?.id??null),I=b?.firstChild??null,A=g.create(m,i,I,o);return this.insertImpl(A.hostView,h,Tl(this._hostTNode,b)),A}insert(n,t){return this.insertImpl(n,t,!0)}insertImpl(n,t,r){let i=n._lView;if(QN(i)){let h=this.indexOf(n);if(h!==-1)this.detach(h);else{let g=i[Sn],m=new Lx(g,g[Gr],g[Sn]);m.detach(m.indexOf(n))}}let o=this._adjustIndex(t),c=this._lContainer;return uf(c,i,o,r),n.attachToViewContainerRef(),Cv(Cg(c),o,n),n}move(n,t){return this.insert(n,t)}indexOf(n){let t=Zw(this._lContainer);return t!==null?t.indexOf(n):-1}remove(n){let t=this._adjustIndex(n,-1),r=Al(this._lContainer,t);r&&(xd(Cg(this._lContainer),t),rf(r[De],r))}detach(n){let t=this._adjustIndex(n,-1),r=Al(this._lContainer,t);return r&&xd(Cg(this._lContainer),t)!=null?new rs(r):null}_adjustIndex(n,t=0){return n??this.length+t}};function Zw(e){return e[Sd]}function Cg(e){return e[Sd]||(e[Sd]=[])}function Fx(e,n){let t,r=n[e.index];return ci(r)?t=r:(t=Cx(r,n,null,e),n[e.index]=t,lf(n,t)),Bx(t,n,e,r),new Lx(t,e,n)}function C3(e,n){let t=e[Mt],r=t.createComment(""),i=cr(n,e),o=ex(t,i);return Ld(t,o,r,WR(t,i),!1),r}var Bx=Vx,_m=()=>!1;function _3(e,n,t){return _m(e,n,t)}function Vx(e,n,t,r){if(e[Ai])return;let i;t.type&8?i=zr(r):i=C3(n,t),e[Ai]=i}function w3(e,n,t){if(e[Ai]&&e[Dl])return!0;let r=t[Hr],i=n.index-hn;if(!r||GO(n)||Vl(r,i))return!1;let c=Yg(r,i),h=r.data[rm]?.[i],[g,m]=t3(c,h);return e[Ai]=g,e[Dl]=m,!0}function v3(e,n,t,r){_m(e,t,n)||Vx(e,n,t,r)}function b3(){Bx=v3,_m=w3}var d0=class e{constructor(n){this.queryList=n,this.matches=null}clone(){return new e(this.queryList)}setDirty(){this.queryList.setDirty()}},f0=class e{constructor(n=[]){this.queries=n}createEmbeddedView(n){let t=n.queries;if(t!==null){let r=n.contentQueries!==null?n.contentQueries[0]:t.length,i=[];for(let o=0;o<r;o++){let c=t.getByIndex(o),h=this.queries[c.indexInDeclarationView];i.push(h.clone())}return new e(i)}return null}insertView(n){this.dirtyQueriesWithMatches(n)}detachView(n){this.dirtyQueriesWithMatches(n)}finishViewCreation(n){this.dirtyQueriesWithMatches(n)}dirtyQueriesWithMatches(n){for(let t=0;t<this.queries.length;t++)wm(n,t).matches!==null&&this.queries[t].setDirty()}},h0=class{constructor(n,t,r=null){this.flags=t,this.read=r,typeof n=="string"?this.predicate=M3(n):this.predicate=n}},p0=class e{constructor(n=[]){this.queries=n}elementStart(n,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(n,t)}elementEnd(n){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(n)}embeddedTView(n){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,o=this.getByIndex(r).embeddedTView(n,i);o&&(o.indexInDeclarationView=r,t!==null?t.push(o):t=[o])}return t!==null?new e(t):null}template(n,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(n,t)}getByIndex(n){return this.queries[n]}get length(){return this.queries.length}track(n){this.queries.push(n)}},g0=class e{constructor(n,t=-1){this.metadata=n,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(n,t){this.isApplyingToNode(t)&&this.matchTNode(n,t)}elementEnd(n){this._declarationNodeIndex===n.index&&(this._appliesToNextNode=!1)}template(n,t){this.elementStart(n,t)}embeddedTView(n,t){return this.isApplyingToNode(n)?(this.crossesNgTemplate=!0,this.addMatch(-n.index,t),new e(this.metadata)):null}isApplyingToNode(n){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=n.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(n,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(n,t,x3(t,o)),this.matchTNodeWithReadOption(n,t,Cd(t,n,o,!1,!1))}else r===sa?t.type&4&&this.matchTNodeWithReadOption(n,t,-1):this.matchTNodeWithReadOption(n,t,Cd(t,n,r,!1,!1))}matchTNodeWithReadOption(n,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===ur||i===ss||i===sa&&t.type&4)this.addMatch(t.index,-2);else{let o=Cd(t,n,i,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(n,t){this.matches===null?this.matches=[n,t]:this.matches.push(n,t)}};function x3(e,n){let t=e.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===n)return t[r+1]}return null}function E3(e,n){return e.type&11?pa(e,n):e.type&4?ym(e,n):null}function I3(e,n,t,r){return t===-1?E3(n,e):t===-2?S3(e,n,r):ts(e,e[De],t,n)}function S3(e,n,t){if(t===ur)return pa(n,e);if(t===sa)return ym(n,e);if(t===ss)return Fx(n,e)}function Ux(e,n,t,r){let i=n[Di].queries[r];if(i.matches===null){let o=e.data,c=t.matches,h=[];for(let g=0;c!==null&&g<c.length;g+=2){let m=c[g];if(m<0)h.push(null);else{let v=o[m];h.push(I3(n,v,c[g+1],t.metadata.read))}}i.matches=h}return i.matches}function m0(e,n,t,r){let i=e.queries.getByIndex(t),o=i.matches;if(o!==null){let c=Ux(e,n,i,t);for(let h=0;h<o.length;h+=2){let g=o[h];if(g>0)r.push(c[h/2]);else{let m=o[h+1],v=n[-g];for(let b=In;b<v.length;b++){let I=v[b];I[Qo]===I[Sn]&&m0(I[De],I,m,r)}if(v[ia]!==null){let b=v[ia];for(let I=0;I<b.length;I++){let A=b[I];m0(A[De],A,m,r)}}}}}return r}function D3(e,n){return e[Di].queries[n].queryList}function A3(e,n,t){let r=new Wg((t&4)===4);return oP(e,n,r,r.destroy),(n[Di]??=new f0).queries.push(new d0(r))-1}function T3(e,n,t){let r=Dn();return r.firstCreatePass&&(N3(r,new h0(e,n,t),-1),(n&2)===2&&(r.staticViewQueries=!0)),A3(r,nt(),n)}function M3(e){return e.split(",").map(n=>n.trim())}function N3(e,n,t){e.queries===null&&(e.queries=new p0),e.queries.track(new g0(n,t))}function wm(e,n){return e.queries.getByIndex(n)}function O3(e,n){let t=e[De],r=wm(t,n);return r.crossesNgTemplate?m0(t,e,n,[]):Ux(t,e,r,n)}var Qw=new Set;function Fi(e){Qw.has(e)||(Qw.add(e),performance?.mark?.("mark_feature_usage",{detail:{feature:e}}))}function R3(e){return typeof e=="function"&&e[xi]!==void 0}function jl(e,n){Fi("NgSignals");let t=$_(e),r=t[xi];return n?.equal&&(r.equal=n.equal),t.set=i=>zp(r,i),t.update=i=>q_(r,i),t.asReadonly=P3.bind(t),t}function P3(){let e=this[xi];if(e.readonlyFn===void 0){let n=()=>this();n[xi]=e,e.readonlyFn=n}return e.readonlyFn}function jx(e){return R3(e)&&typeof e.set=="function"}function k3(e){return Object.getPrototypeOf(e.prototype).constructor}function qr(e){let n=k3(e.type),t=!0,r=[e];for(;n;){let i;if(uo(e))i=n.\u0275cmp||n.\u0275dir;else{if(n.\u0275cmp)throw new fe(903,!1);i=n.\u0275dir}if(i){if(t){r.push(i);let c=e;c.inputs=dd(e.inputs),c.inputTransforms=dd(e.inputTransforms),c.declaredInputs=dd(e.declaredInputs),c.outputs=dd(e.outputs);let h=i.hostBindings;h&&U3(e,h);let g=i.viewQuery,m=i.contentQueries;if(g&&B3(e,g),m&&V3(e,m),L3(e,i),$M(e.outputs,i.outputs),uo(i)&&i.data.animation){let v=e.data;v.animation=(v.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let c=0;c<o.length;c++){let h=o[c];h&&h.ngInherit&&h(e),h===qr&&(t=!1)}}n=Object.getPrototypeOf(n)}F3(r)}function L3(e,n){for(let t in n.inputs){if(!n.inputs.hasOwnProperty(t)||e.inputs.hasOwnProperty(t))continue;let r=n.inputs[t];if(r!==void 0&&(e.inputs[t]=r,e.declaredInputs[t]=n.declaredInputs[t],n.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!n.inputTransforms.hasOwnProperty(i))continue;e.inputTransforms??={},e.inputTransforms[i]=n.inputTransforms[i]}}}function F3(e){let n=0,t=null;for(let r=e.length-1;r>=0;r--){let i=e[r];i.hostVars=n+=i.hostVars,i.hostAttrs=El(i.hostAttrs,t=El(t,i.hostAttrs))}}function dd(e){return e===ta?{}:e===Un?[]:e}function B3(e,n){let t=e.viewQuery;t?e.viewQuery=(r,i)=>{n(r,i),t(r,i)}:e.viewQuery=n}function V3(e,n){let t=e.contentQueries;t?e.contentQueries=(r,i,o)=>{n(r,i,o),t(r,i,o)}:e.contentQueries=n}function U3(e,n){let t=e.hostBindings;t?e.hostBindings=(r,i)=>{n(r,i),t(r,i)}:e.hostBindings=n}var fo=class{},Ol=class{};var y0=class extends fo{constructor(n,t,r,i=!0){super(),this.ngModuleType=n,this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Ud(this);let o=Sv(n);this._bootstrapComponents=Yb(o.bootstrap),this._r3Injector=pb(n,t,[{provide:fo,useValue:this},{provide:la,useValue:this.componentFactoryResolver},...r],jn(n),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let n=this._r3Injector;!n.destroyed&&n.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(n){this.destroyCbs.push(n)}},C0=class extends Ol{constructor(n){super(),this.moduleType=n}create(n){return new y0(this.moduleType,n,[])}};var jd=class extends fo{constructor(n){super(),this.componentFactoryResolver=new Ud(this),this.instance=null;let t=new Il([...n.providers,{provide:fo,useValue:this},{provide:la,useValue:this.componentFactoryResolver}],n.parent||H0(),n.debugName,new Set(["environment"]));this.injector=t,n.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(n){this.injector.onDestroy(n)}};function vm(e,n,t=null){return new jd({providers:e,parent:n,debugName:t,runEnvironmentInitializers:!0}).injector}function Hx(e){return e!==null&&(typeof e=="function"||typeof e=="object")}function j3(e,n,t){return e[n]=t}function Wr(e,n,t){let r=e[n];return Object.is(r,t)?!1:(e[n]=t,!0)}function H3(e,n,t,r){let i=Wr(e,n,t);return Wr(e,n+1,r)||i}function z3(e,n,t,r,i){let o=H3(e,n,t,r);return Wr(e,n+2,i)||o}function Hl(e){return(e.flags&32)===32}function W3(e,n,t,r,i,o,c,h,g){let m=n.consts,v=af(n,e,4,c||null,h||null);gx(n,t,v,oa(m,g)),Q0(n,v);let b=v.tView=hm(2,v,r,i,o,n.directiveRegistry,n.pipeRegistry,null,n.schemas,m,null);return n.queries!==null&&(n.queries.template(n,v),b.queries=n.queries.embeddedTView(v)),v}function _0(e,n,t,r,i,o,c,h,g,m){let v=t+hn,b=n.firstCreatePass?W3(v,n,e,r,i,o,c,h,g):n.data[v];Bl(b,!1);let I=zx(n,e,b,t);Z0()&&um(n,e,I,b),ns(I,e);let A=Cx(I,e,I,b);return e[v]=A,lf(e,A),_3(A,b,e),z0(b)&&ux(n,e,b),g!=null&&dx(e,b,m),b}function Wt(e,n,t,r,i,o,c,h){let g=nt(),m=Dn(),v=oa(m.consts,o);return _0(g,m,e,n,t,r,i,v,c,h),Wt}var zx=Wx;function Wx(e,n,t,r){return go(!0),n[Mt].createComment("")}function G3(e,n,t,r){let i=n[Hr],o=!i||Fl()||Hl(t)||Vl(i,r);if(go(o),o)return Wx(e,n,t,r);let c=i.data[JO]?.[r]??null;c!==null&&t.tView!==null&&t.tView.ssrId===null&&(t.tView.ssrId=c);let h=df(i,e,n,t);tf(i,r,h);let g=om(i,r);return ff(g,h)}function $3(){zx=G3}var vl=function(e){return e[e.EarlyRead=0]="EarlyRead",e[e.Write=1]="Write",e[e.MixedReadWrite=2]="MixedReadWrite",e[e.Read=3]="Read",e}(vl||{}),q3=(()=>{class e{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=de({token:e,providedIn:"root",factory:()=>new e})}}return e})(),Kw=class e{constructor(){this.ngZone=K(Xt),this.scheduler=K(aa),this.errorHandler=K(Ti,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[vl.EarlyRead,vl.Write,vl.MixedReadWrite,vl.Read]}execute(){this.executing=!0;for(let n of e.PHASES)for(let t of this.sequences)if(!(t.erroredOrDestroyed||!t.hooks[n]))try{t.pipelinedValue=this.ngZone.runOutsideAngular(()=>t.hooks[n](t.pipelinedValue))}catch(r){t.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let n of this.sequences)n.afterRun(),n.once&&this.sequences.delete(n);for(let n of this.deferredRegistrations)this.sequences.add(n);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(n){this.executing?this.deferredRegistrations.add(n):(this.sequences.add(n),this.scheduler.notify(6))}unregister(n){this.executing&&this.sequences.has(n)?(n.erroredOrDestroyed=!0,n.pipelinedValue=void 0,n.once=!0):(this.sequences.delete(n),this.deferredRegistrations.delete(n))}static{this.\u0275prov=de({token:e,providedIn:"root",factory:()=>new e})}};function hf(e,n,t,r){let i=nt(),o=ha();if(Wr(i,o,n)){let c=Dn(),h=X0();wP(h,i,e,n,t,r)}return hf}function Y3(e,n,t,r){return Wr(e,ha(),t)?n+k0(t)+r:di}function fd(e,n){return e<<17|n<<2}function is(e){return e>>17&32767}function X3(e){return(e&2)==2}function Z3(e,n){return e&131071|n<<17}function w0(e){return e|2}function ua(e){return(e&131068)>>2}function _g(e,n){return e&-131069|n<<2}function Q3(e){return(e&1)===1}function v0(e){return e|1}function K3(e,n,t,r,i,o){let c=o?n.classBindings:n.styleBindings,h=is(c),g=ua(c);e[r]=t;let m=!1,v;if(Array.isArray(t)){let b=t;v=b[1],(v===null||kl(b,v)>0)&&(m=!0)}else v=t;if(i)if(g!==0){let I=is(e[h+1]);e[r+1]=fd(I,h),I!==0&&(e[I+1]=_g(e[I+1],r)),e[h+1]=Z3(e[h+1],r)}else e[r+1]=fd(h,0),h!==0&&(e[h+1]=_g(e[h+1],r)),h=r;else e[r+1]=fd(g,0),h===0?h=r:e[g+1]=_g(e[g+1],r),g=r;m&&(e[r+1]=w0(e[r+1])),Jw(e,v,r,!0),Jw(e,v,r,!1),J3(n,v,e,r,o),c=fd(h,g),o?n.classBindings=c:n.styleBindings=c}function J3(e,n,t,r,i){let o=i?e.residualClasses:e.residualStyles;o!=null&&typeof n=="string"&&kl(o,n)>=0&&(t[r+1]=v0(t[r+1]))}function Jw(e,n,t,r){let i=e[t+1],o=n===null,c=r?is(i):ua(i),h=!1;for(;c!==0&&(h===!1||o);){let g=e[c],m=e[c+1];ek(g,n)&&(h=!0,e[c+1]=r?v0(m):w0(m)),c=r?is(m):ua(m)}h&&(e[t+1]=r?w0(i):v0(i))}function ek(e,n){return e===null||n==null||(Array.isArray(e)?e[1]:e)===n?!0:Array.isArray(e)&&typeof n=="string"?kl(e,n)>=0:!1}var Vr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function tk(e){return e.substring(Vr.key,Vr.keyEnd)}function nk(e){return rk(e),Gx(e,$x(e,0,Vr.textEnd))}function Gx(e,n){let t=Vr.textEnd;return t===n?-1:(n=Vr.keyEnd=ik(e,Vr.key=n,t),$x(e,n,t))}function rk(e){Vr.key=0,Vr.keyEnd=0,Vr.value=0,Vr.valueEnd=0,Vr.textEnd=e.length}function $x(e,n,t){for(;n<t&&e.charCodeAt(n)<=32;)n++;return n}function ik(e,n,t){for(;n<t&&e.charCodeAt(n)>32;)n++;return n}function It(e,n,t){let r=nt(),i=ha();if(Wr(r,i,n)){let o=Dn(),c=X0();px(o,c,r,e,n,r[Mt],t,!1)}return It}function b0(e,n,t,r,i){let o=n.inputs,c=i?"class":"style";pm(e,t,o[c],c,r)}function Yr(e,n){return sk(e,n,null,!0),Yr}function qx(e){ak(hk,ok,e,!0)}function ok(e,n){for(let t=nk(n);t>=0;t=Gx(n,t))V0(e,tk(n),!0)}function sk(e,n,t,r){let i=nt(),o=Dn(),c=Xv(2);if(o.firstUpdatePass&&Xx(o,e,c,r),n!==di&&Wr(i,c,n)){let h=o.data[po()];Zx(o,h,i,i[Mt],e,i[c+1]=gk(n,t),r,c)}}function ak(e,n,t,r){let i=Dn(),o=Xv(2);i.firstUpdatePass&&Xx(i,null,o,r);let c=nt();if(t!==di&&Wr(c,o,t)){let h=i.data[po()];if(Qx(h,r)&&!Yx(i,o)){let g=r?h.classesWithoutHost:h.stylesWithoutHost;g!==null&&(t=Ig(g,t||"")),b0(i,h,c,t,r)}else pk(i,h,c,c[Mt],c[o+1],c[o+1]=fk(e,n,t),r,o)}}function Yx(e,n){return n>=e.expandoStartIndex}function Xx(e,n,t,r){let i=e.data;if(i[t+1]===null){let o=i[po()],c=Yx(e,t);Qx(o,r)&&n===null&&!c&&(n=!1),n=lk(i,o,n,r),K3(i,o,n,t,c,r)}}function lk(e,n,t,r){let i=pO(e),o=r?n.residualClasses:n.residualStyles;if(i===null)(r?n.classBindings:n.styleBindings)===0&&(t=wg(null,e,n,t,r),t=Rl(t,n.attrs,r),o=null);else{let c=n.directiveStylingLast;if(c===-1||e[c]!==i)if(t=wg(i,e,n,t,r),o===null){let g=ck(e,n,r);g!==void 0&&Array.isArray(g)&&(g=wg(null,e,n,g[1],r),g=Rl(g,n.attrs,r),uk(e,n,r,g))}else o=dk(e,n,r)}return o!==void 0&&(r?n.residualClasses=o:n.residualStyles=o),t}function ck(e,n,t){let r=t?n.classBindings:n.styleBindings;if(ua(r)!==0)return e[is(r)]}function uk(e,n,t,r){let i=t?n.classBindings:n.styleBindings;e[is(i)]=r}function dk(e,n,t){let r,i=n.directiveEnd;for(let o=1+n.directiveStylingLast;o<i;o++){let c=e[o].hostAttrs;r=Rl(r,c,t)}return Rl(r,n.attrs,t)}function wg(e,n,t,r,i){let o=null,c=t.directiveEnd,h=t.directiveStylingLast;for(h===-1?h=t.directiveStart:h++;h<c&&(o=n[h],r=Rl(r,o.hostAttrs,i),o!==e);)h++;return e!==null&&(t.directiveStylingLast=h),r}function Rl(e,n,t){let r=t?1:2,i=-1;if(n!==null)for(let o=0;o<n.length;o++){let c=n[o];typeof c=="number"?i=c:i===r&&(Array.isArray(e)||(e=e===void 0?[]:["",e]),V0(e,c,t?!0:n[++o]))}return e===void 0?null:e}function fk(e,n,t){if(t==null||t==="")return Un;let r=[],i=ki(t);if(Array.isArray(i))for(let o=0;o<i.length;o++)e(r,i[o],!0);else if(typeof i=="object")for(let o in i)i.hasOwnProperty(o)&&e(r,o,i[o]);else typeof i=="string"&&n(r,i);return r}function hk(e,n,t){let r=String(n);r!==""&&!r.includes(" ")&&V0(e,r,t)}function pk(e,n,t,r,i,o,c,h){i===di&&(i=Un);let g=0,m=0,v=0<i.length?i[0]:null,b=0<o.length?o[0]:null;for(;v!==null||b!==null;){let I=g<i.length?i[g+1]:void 0,A=m<o.length?o[m+1]:void 0,R=null,j;v===b?(g+=2,m+=2,I!==A&&(R=b,j=A)):b===null||v!==null&&v<b?(g+=2,R=v):(m+=2,R=b,j=A),R!==null&&Zx(e,n,t,r,R,j,c,h),v=g<i.length?i[g]:null,b=m<o.length?o[m]:null}}function Zx(e,n,t,r,i,o,c,h){if(!(n.type&3))return;let g=e.data,m=g[h+1],v=Q3(m)?ev(g,n,t,i,ua(m),c):void 0;if(!Hd(v)){Hd(o)||X3(m)&&(o=ev(g,null,t,i,h,c));let b=Uv(po(),t);ZR(r,c,b,i,o)}}function ev(e,n,t,r,i,o){let c=n===null,h;for(;i>0;){let g=e[i],m=Array.isArray(g),v=m?g[1]:g,b=v===null,I=t[i+1];I===di&&(I=b?Un:void 0);let A=b?lg(I,r):v===r?I:void 0;if(m&&!Hd(A)&&(A=lg(g,r)),Hd(A)&&(h=A,c))return h;let R=e[i+1];i=c?is(R):ua(R)}if(n!==null){let g=o?n.residualClasses:n.residualStyles;g!=null&&(h=lg(g,r))}return h}function Hd(e){return e!==void 0}function gk(e,n){return e==null||e===""||(typeof n=="string"?e=e+n:typeof e=="object"&&(e=jn(ki(e)))),e}function Qx(e,n){return(e.flags&(n?8:16))!==0}var x0=class{destroy(n){}updateValue(n,t){}swap(n,t){let r=Math.min(n,t),i=Math.max(n,t),o=this.detach(i);if(i-r>1){let c=this.detach(r);this.attach(r,o),this.attach(i,c)}else this.attach(r,o)}move(n,t){this.attach(t,this.detach(n))}};function vg(e,n,t,r,i){return e===t&&Object.is(n,r)?1:Object.is(i(e,n),i(t,r))?-1:0}function mk(e,n,t){let r,i,o=0,c=e.length-1,h=void 0;if(Array.isArray(n)){let g=n.length-1;for(;o<=c&&o<=g;){let m=e.at(o),v=n[o],b=vg(o,m,o,v,t);if(b!==0){b<0&&e.updateValue(o,v),o++;continue}let I=e.at(c),A=n[g],R=vg(c,I,g,A,t);if(R!==0){R<0&&e.updateValue(c,A),c--,g--;continue}let j=t(o,m),Y=t(c,I),G=t(o,v);if(Object.is(G,Y)){let ce=t(g,A);Object.is(ce,j)?(e.swap(o,c),e.updateValue(c,A),g--,c--):e.move(c,o),e.updateValue(o,v),o++;continue}if(r??=new zd,i??=nv(e,o,c,t),E0(e,r,o,G))e.updateValue(o,v),o++,c++;else if(i.has(G))r.set(j,e.detach(o)),c--;else{let ce=e.create(o,n[o]);e.attach(o,ce),o++,c++}}for(;o<=g;)tv(e,r,t,o,n[o]),o++}else if(n!=null){let g=n[Symbol.iterator](),m=g.next();for(;!m.done&&o<=c;){let v=e.at(o),b=m.value,I=vg(o,v,o,b,t);if(I!==0)I<0&&e.updateValue(o,b),o++,m=g.next();else{r??=new zd,i??=nv(e,o,c,t);let A=t(o,b);if(E0(e,r,o,A))e.updateValue(o,b),o++,c++,m=g.next();else if(!i.has(A))e.attach(o,e.create(o,b)),o++,c++,m=g.next();else{let R=t(o,v);r.set(R,e.detach(o)),c--}}}for(;!m.done;)tv(e,r,t,e.length,m.value),m=g.next()}for(;o<=c;)e.destroy(e.detach(c--));r?.forEach(g=>{e.destroy(g)})}function E0(e,n,t,r){return n!==void 0&&n.has(r)?(e.attach(t,n.get(r)),n.delete(r),!0):!1}function tv(e,n,t,r,i){if(E0(e,n,r,t(r,i)))e.updateValue(r,i);else{let o=e.create(r,i);e.attach(r,o)}}function nv(e,n,t,r){let i=new Set;for(let o=n;o<=t;o++)i.add(r(o,e.at(o)));return i}var zd=class{constructor(){this.kvMap=new Map,this._vMap=void 0}has(n){return this.kvMap.has(n)}delete(n){if(!this.has(n))return!1;let t=this.kvMap.get(n);return this._vMap!==void 0&&this._vMap.has(t)?(this.kvMap.set(n,this._vMap.get(t)),this._vMap.delete(t)):this.kvMap.delete(n),!0}get(n){return this.kvMap.get(n)}set(n,t){if(this.kvMap.has(n)){let r=this.kvMap.get(n);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,t)}else this.kvMap.set(n,t)}forEach(n){for(let[t,r]of this.kvMap)if(n(r,t),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),n(r,t)}}};function sn(e,n){Fi("NgControlFlow");let t=nt(),r=ha(),i=t[r]!==di?t[r]:-1,o=i!==-1?Wd(t,hn+i):void 0,c=0;if(Wr(t,r,e)){let h=$e(null);try{if(o!==void 0&&Ex(o,c),e!==-1){let g=hn+e,m=Wd(t,g),v=A0(t[De],g),b=Ml(m,v.tView.ssrId),I=cf(t,v,n,{dehydratedView:b});uf(m,I,c,Tl(v,b))}}finally{$e(h)}}else if(o!==void 0){let h=xx(o,c);h!==void 0&&(h[kn]=n)}}var I0=class{constructor(n,t,r){this.lContainer=n,this.$implicit=t,this.$index=r}get $count(){return this.lContainer.length-In}};function pn(e,n){return n}var S0=class{constructor(n,t,r){this.hasEmptyBlock=n,this.trackByFn=t,this.liveCollection=r}};function gn(e,n,t,r,i,o,c,h,g,m,v,b,I){Fi("NgControlFlow");let A=nt(),R=Dn(),j=g!==void 0,Y=nt(),G=h?c.bind(Y[lr][kn]):c,ce=new S0(j,G);Y[hn+e]=ce,_0(A,R,e+1,n,t,r,i,oa(R.consts,o)),j&&_0(A,R,e+2,g,m,v,b,oa(R.consts,I))}var D0=class extends x0{constructor(n,t,r){super(),this.lContainer=n,this.hostLView=t,this.templateTNode=r,this.operationsCounter=void 0,this.needsIndexUpdate=!1}get length(){return this.lContainer.length-In}at(n){return this.getLView(n)[kn].$implicit}attach(n,t){let r=t[Hr];this.needsIndexUpdate||=n!==this.length,uf(this.lContainer,t,n,Tl(this.templateTNode,r))}detach(n){return this.needsIndexUpdate||=n!==this.length-1,yk(this.lContainer,n)}create(n,t){let r=Ml(this.lContainer,this.templateTNode.tView.ssrId),i=cf(this.hostLView,this.templateTNode,new I0(this.lContainer,t,n),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(n){rf(n[De],n),this.operationsCounter?.recordDestroy()}updateValue(n,t){this.getLView(n)[kn].$implicit=t}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let n=0;n<this.length;n++)this.getLView(n)[kn].$index=n}getLView(n){return Ck(this.lContainer,n)}};function mn(e){let n=$e(null),t=po();try{let r=nt(),i=r[De],o=r[t],c=t+1,h=Wd(r,c);if(o.liveCollection===void 0){let m=A0(i,c);o.liveCollection=new D0(h,r,m)}else o.liveCollection.reset();let g=o.liveCollection;if(mk(g,e,o.trackByFn),g.updateIndexes(),o.hasEmptyBlock){let m=ha(),v=g.length===0;if(Wr(r,m,v)){let b=t+2,I=Wd(r,b);if(v){let A=A0(i,b),R=Ml(I,A.tView.ssrId),j=cf(r,A,void 0,{dehydratedView:R});uf(I,j,0,Tl(A,R))}else Ex(I,0)}}}finally{$e(n)}}function Wd(e,n){return e[n]}function yk(e,n){return Al(e,n)}function Ck(e,n){return xx(e,n)}function A0(e,n){return W0(e,n)}function _k(e,n,t,r,i,o){let c=n.consts,h=oa(c,i),g=af(n,e,2,r,h);return gx(n,t,g,oa(c,o)),g.attrs!==null&&c0(g,g.attrs,!1),g.mergedAttrs!==null&&c0(g,g.mergedAttrs,!0),n.queries!==null&&n.queries.elementStart(n,g),g}function T(e,n,t,r){let i=nt(),o=Dn(),c=hn+e,h=i[Mt],g=o.firstCreatePass?_k(c,o,i,n,t,r):o.data[c],m=Kx(o,i,g,h,n,e);i[c]=m;let v=z0(g);return Bl(g,!0),ix(h,m,g),!Hl(g)&&Z0()&&um(o,i,m,g),eO()===0&&ns(m,i),tO(),v&&(ux(o,i,g),cx(o,g,i)),r!==null&&dx(i,g),T}function N(){let e=Qn();qv()?aO():(e=e.parent,Bl(e,!1));let n=e;rO(n)&&oO(),nO();let t=Dn();return t.firstCreatePass&&(Q0(t,e),kv(e)&&t.queries.elementEnd(e)),n.classesWithoutHost!=null&&wO(n)&&b0(t,n,nt(),n.classesWithoutHost,!0),n.stylesWithoutHost!=null&&vO(n)&&b0(t,n,nt(),n.stylesWithoutHost,!1),N}function se(e,n,t,r){return T(e,n,t,r),N(),se}var Kx=(e,n,t,r,i,o)=>(go(!0),lm(r,i,nb()));function wk(e,n,t,r,i,o){let c=n[Hr],h=!c||Fl()||Hl(t)||Vl(c,o);if(go(h),h)return lm(r,i,nb());let g=df(c,e,n,t);return Ob(c,o)&&tf(c,o,g.nextSibling),c&&(_b(t)||wb(g))&&Ll(t)&&(iO(t),nx(g)),g}function vk(){Kx=wk}var bk=(e,n,t,r)=>(go(!0),Zb(n[Mt],""));function xk(e,n,t,r){let i,o=n[Hr],c=!o||Fl()||Vl(o,r)||Hl(t);if(go(c),c)return Zb(n[Mt],"");let h=df(o,e,n,t),g=cR(o,r);return tf(o,r,h),i=ff(g,h),i}function Ek(){bk=xk}function Vt(){return nt()}var Gd="en-US";var Ik=Gd;function Sk(e){typeof e=="string"&&(Ik=e.toLowerCase().replace(/_/g,"-"))}var Dk=(e,n,t)=>{};function $(e,n,t,r){let i=nt(),o=Dn(),c=Qn();return Jx(o,i,i[Mt],c,e,n,r),$}function Ak(e,n,t,r){let i=e.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let c=i[o];if(c===t&&i[o+1]===r){let h=n[Id],g=i[o+2];return h.length>g?h[g]:null}typeof c=="string"&&(o+=2)}return null}function Jx(e,n,t,r,i,o,c){let h=z0(r),m=e.firstCreatePass&&vx(e),v=n[kn],b=wx(n),I=!0;if(r.type&3||c){let j=cr(r,n),Y=c?c(j):j,G=b.length,ce=c?ge=>c(zr(ge[r.index])):r.index,Xe=null;if(!c&&h&&(Xe=Ak(e,n,i,r.index)),Xe!==null){let ge=Xe.__ngLastListenerFn__||Xe;ge.__ngNextListenerFn__=o,Xe.__ngLastListenerFn__=o,I=!1}else{o=iv(r,n,v,o),Dk(j,i,o);let ge=t.listen(Y,i,o);b.push(o,ge),m&&m.push(i,ce,G,G+1)}}else o=iv(r,n,v,o);let A=r.outputs,R;if(I&&A!==null&&(R=A[i])){let j=R.length;if(j)for(let Y=0;Y<j;Y+=2){let G=R[Y],ce=R[Y+1],H=n[G][ce].subscribe(o),he=b.length;b.push(o,H),m&&m.push(i,r.index,he,-(he+1))}}}function rv(e,n,t,r){let i=$e(null);try{return ri(6,n,t),t(r)!==!1}catch(o){return bx(e,o),!1}finally{ri(7,n,t),$e(i)}}function iv(e,n,t,r){return function i(o){if(o===Function)return r;let c=e.componentOffset>-1?ho(e.index,n):n;mm(c,5);let h=rv(n,t,r,o),g=i.__ngNextListenerFn__;for(;g;)h=rv(n,t,g,o)&&h,g=g.__ngNextListenerFn__;return h}}function Qe(e=1){return mO(e)}function pf(e,n,t){T3(e,n,t)}function zl(e){let n=nt(),t=Dn(),r=Zv();$0(r+1);let i=wm(t,r);if(e.dirty&&ZN(n)===((i.metadata.flags&2)===2)){if(i.matches===null)e.reset([]);else{let o=O3(n,r);e.reset(o,jO),e.notifyOnChanges()}return!0}return!1}function Wl(){return D3(nt(),Zv())}function gf(e){let n=lO();return XN(n,hn+e)}function P(e,n=""){let t=nt(),r=Dn(),i=e+hn,o=r.firstCreatePass?af(r,i,1,n,null):r.data[i],c=eE(r,t,o,n,e);t[i]=c,Z0()&&um(r,t,c,o),Bl(o,!1)}var eE=(e,n,t,r,i)=>(go(!0),Xb(n[Mt],r));function Tk(e,n,t,r,i){let o=n[Hr],c=!o||Fl()||Hl(t)||Vl(o,i);return go(c),c?Xb(n[Mt],r):df(o,e,n,t)}function Mk(){eE=Tk}function Gt(e){return yn("",e,""),Gt}function yn(e,n,t){let r=nt(),i=Y3(r,e,n,t);return i!==di&&EP(r,po(),i),yn}function rt(e,n,t){jx(n)&&(n=n());let r=nt(),i=ha();if(Wr(r,i,n)){let o=Dn(),c=X0();px(o,c,r,e,n,r[Mt],t,!1)}return rt}function ot(e,n){let t=jx(e);return t&&e.set(n),t}function it(e,n){let t=nt(),r=Dn(),i=Qn();return Jx(r,t,t[Mt],i,e,n),it}function Nk(e,n,t){let r=Dn();if(r.firstCreatePass){let i=uo(e);T0(t,r.data,r.blueprint,i,!0),T0(n,r.data,r.blueprint,i,!1)}}function T0(e,n,t,r,i){if(e=Vn(e),Array.isArray(e))for(let o=0;o<e.length;o++)T0(e[o],n,t,r,i);else{let o=Dn(),c=nt(),h=Qn(),g=na(e)?e:Vn(e.provide),m=Ov(e),v=h.providerIndexes&1048575,b=h.directiveStart,I=h.providerIndexes>>20;if(na(e)||!e.multi){let A=new es(m,i,W),R=xg(g,n,i?v:v+I,b);R===-1?(Bg(Nd(h,c),o,g),bg(o,e,n.length),n.push(g),h.directiveStart++,h.directiveEnd++,i&&(h.providerIndexes+=1048576),t.push(A),c.push(A)):(t[R]=A,c[R]=A)}else{let A=xg(g,n,v+I,b),R=xg(g,n,v,v+I),j=A>=0&&t[A],Y=R>=0&&t[R];if(i&&!Y||!i&&!j){Bg(Nd(h,c),o,g);let G=Pk(i?Rk:Ok,t.length,i,r,m);!i&&Y&&(t[R].providerFactory=G),bg(o,e,n.length,0),n.push(g),h.directiveStart++,h.directiveEnd++,i&&(h.providerIndexes+=1048576),t.push(G),c.push(G)}else{let G=tE(t[i?R:A],m,!i&&r);bg(o,e,A>-1?A:R,G)}!i&&r&&Y&&t[R].componentProviders++}}}function bg(e,n,t,r){let i=na(n),o=kN(n);if(i||o){let g=(o?Vn(n.useClass):n).prototype.ngOnDestroy;if(g){let m=e.destroyHooks||(e.destroyHooks=[]);if(!i&&n.multi){let v=m.indexOf(t);v===-1?m.push(t,[r,g]):m[v+1].push(r,g)}else m.push(t,g)}}}function tE(e,n,t){return t&&e.componentProviders++,e.multi.push(n)-1}function xg(e,n,t,r){for(let i=t;i<r;i++)if(n[i]===e)return i;return-1}function Ok(e,n,t,r){return M0(this.multi,[])}function Rk(e,n,t,r){let i=this.multi,o;if(this.providerFactory){let c=this.providerFactory.componentProviders,h=ts(t,t[De],this.providerFactory.index,r);o=h.slice(0,c),M0(i,o);for(let g=c;g<h.length;g++)o.push(h[g])}else o=[],M0(i,o);return o}function M0(e,n){for(let t=0;t<e.length;t++){let r=e[t];n.push(r())}return n}function Pk(e,n,t,r,i){let o=new es(e,t,W);return o.multi=[],o.index=n,o.componentProviders=0,tE(o,i,r&&!t),o}function as(e,n=[]){return t=>{t.providersResolver=(r,i)=>Nk(r,i?i(e):e,n)}}var kk=(()=>{class e{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=Tv(!1,t.type),i=r.length>0?vm([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=de({token:e,providedIn:"environment",factory:()=>new e(He(vr))})}}return e})();function oe(e){Fi("NgStandalone"),e.getStandaloneInjector=n=>n.get(kk).getOrCreateStandaloneInjector(e)}function mf(e,n,t,r,i,o){return Fk(nt(),cO(),e,n,t,r,i,o)}function Lk(e,n){let t=e[n];return t===di?void 0:t}function Fk(e,n,t,r,i,o,c,h){let g=n+t;return z3(e,g,i,o,c)?j3(e,g+3,h?r.call(h,i,o,c):r(i,o,c)):Lk(e,g+3)}var yf=(()=>{class e{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"platform"})}}return e})();var nE=new ve("");function ls(e){return!!e&&typeof e.then=="function"}function rE(e){return!!e&&typeof e.subscribe=="function"}var iE=new ve(""),oE=(()=>{class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=K(iE,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=i();if(ls(o))t.push(o);else if(rE(o)){let c=new Promise((h,g)=>{o.subscribe({complete:h,error:g})});t.push(c)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),ya=new ve("");function Bk(){G_(()=>{throw new fe(600,!1)})}function Vk(e){return e.isBoundToModule}var Uk=10;function jk(e,n,t){try{let r=t();return ls(r)?r.catch(i=>{throw n.runOutsideAngular(()=>e.handleError(i)),i}):r}catch(r){throw n.runOutsideAngular(()=>e.handleError(r)),r}}var fi=(()=>{class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=K(VO),this.afterRenderManager=K(q3),this.zonelessEnabled=K(Cm),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new nn,this.afterTick=new nn,this.componentTypes=[],this.components=[],this.isStable=K(os).hasPendingTasks.pipe(Be(t=>!t)),this._injector=K(vr)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}get injector(){return this._injector}bootstrap(t,r){let i=t instanceof Vd;if(!this._injector.get(oE).done){let I=!i&&Iv(t),A=!1;throw new fe(405,A)}let c;i?c=t:c=this._injector.get(la).resolveComponentFactory(t),this.componentTypes.push(c.componentType);let h=Vk(c)?void 0:this._injector.get(fo),g=r||c.selector,m=c.create(si.NULL,[],g,h),v=m.location.nativeElement,b=m.injector.get(nE,null);return b?.registerApplication(v),m.onDestroy(()=>{this.detachView(m.hostView),_d(this.components,m),b?.unregisterApplication(v)}),this._loadComponent(m),m}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new fe(101,!1);let t=$e(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,$e(t),this.afterTick.next()}}synchronize(){let t=null;this._injector.destroyed||(t=this._injector.get(ca,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<Uk;)this.synchronizeOnce(t)}synchronizeOnce(t){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:o}of this._views)Hk(i,o,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else t?.begin?.(),t?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Qd(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;_d(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let r=this._injector.get(ya,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>_d(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new fe(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function _d(e,n){let t=e.indexOf(n);t>-1&&e.splice(t,1)}var hd;function Cf(e){hd??=new WeakMap;let n=hd.get(e);if(n)return n;let t=e.isStable.pipe(Fr(r=>r)).toPromise().then(()=>{});return hd.set(e,t),e.onDestroy(()=>hd?.delete(e)),t}function Hk(e,n,t,r){if(!t&&!Qd(e))return;Dx(e,n,t&&!r?0:1)}var N0=class{constructor(n,t){this.ngModuleFactory=n,this.componentFactories=t}},bm=(()=>{class e{compileModuleSync(t){return new C0(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=Sv(t),o=Yb(i.declarations).reduce((c,h)=>{let g=Zo(h);return g&&c.push(new Nl(g)),c},[]);return new N0(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var zk=(()=>{class e{constructor(){this.zone=K(Xt),this.changeDetectionScheduler=K(aa),this.applicationRef=K(fi)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function Wk({ngZoneFactory:e,ignoreChangesOutsideZone:n,scheduleInRootZone:t}){return e??=()=>new Xt(Le(ne({},Gk()),{scheduleInRootZone:t})),[{provide:Xt,useFactory:e},{provide:Xo,multi:!0,useFactory:()=>{let r=K(zk,{optional:!0});return()=>r.initialize()}},{provide:Xo,multi:!0,useFactory:()=>{let r=K($k);return()=>{r.initialize()}}},n===!0?{provide:Px,useValue:!0}:[],{provide:kx,useValue:t??gb}]}function Gk(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}var $k=(()=>{class e{constructor(){this.subscription=new Bt,this.initialized=!1,this.zone=K(Xt),this.pendingTasks=K(os)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Xt.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Xt.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var qk=(()=>{class e{constructor(){this.appRef=K(fi),this.taskService=K(os),this.ngZone=K(Xt),this.zonelessEnabled=K(Cm),this.disableScheduling=K(Px,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new Bt,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Rd):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(K(kx,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof zg||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?Fw:yb;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Rd+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,Fw(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function Yk(){return typeof $localize<"u"&&$localize.locale||Gd}var xm=new ve("",{providedIn:"root",factory:()=>K(xm,je.Optional|je.SkipSelf)||Yk()});var sE=new ve("");function pd(e){return!!e.platformInjector}function Xk(e){let n=pd(e)?e.r3Injector:e.moduleRef.injector,t=n.get(Xt);return t.run(()=>{pd(e)?e.r3Injector.resolveInjectorInitializers():e.moduleRef.resolveInjectorInitializers();let r=n.get(Ti,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:o=>{r.handleError(o)}})}),pd(e)){let o=()=>n.destroy(),c=e.platformInjector.get(sE);c.add(o),n.onDestroy(()=>{i.unsubscribe(),c.delete(o)})}else e.moduleRef.onDestroy(()=>{_d(e.allPlatformModules,e.moduleRef),i.unsubscribe()});return jk(r,t,()=>{let o=n.get(oE);return o.runInitializers(),o.donePromise.then(()=>{let c=n.get(xm,Gd);if(Sk(c||Gd),pd(e)){let h=n.get(fi);return e.rootComponent!==void 0&&h.bootstrap(e.rootComponent),h}else return Zk(e.moduleRef,e.allPlatformModules),e.moduleRef})})})}function Zk(e,n){let t=e.injector.get(fi);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(e.instance.ngDoBootstrap)e.instance.ngDoBootstrap(t);else throw new fe(-403,!1);n.push(e)}var wd=null;function Qk(e=[],n){return si.create({name:n,providers:[{provide:Xd,useValue:"platform"},{provide:sE,useValue:new Set([()=>wd=null])},...e]})}function Kk(e=[]){if(wd)return wd;let n=Qk(e);return wd=n,Bk(),Jk(n),n}function Jk(e){e.get(tm,null)?.forEach(t=>t())}var Bi=(()=>{class e{static{this.__NG_ELEMENT_ID__=e4}}return e})();function e4(e){return t4(Qn(),nt(),(e&16)===16)}function t4(e,n,t){if(Ll(e)&&!t){let r=ho(e.index,n);return new rs(r,r)}else if(e.type&175){let r=n[lr];return new rs(r,n)}return null}var O0=class{constructor(){}supports(n){return n instanceof Map||Hx(n)}create(){return new R0}},R0=class{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return this._additionsHead!==null||this._changesHead!==null||this._removalsHead!==null}forEachItem(n){let t;for(t=this._mapHead;t!==null;t=t._next)n(t)}forEachPreviousItem(n){let t;for(t=this._previousMapHead;t!==null;t=t._nextPrevious)n(t)}forEachChangedItem(n){let t;for(t=this._changesHead;t!==null;t=t._nextChanged)n(t)}forEachAddedItem(n){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)n(t)}forEachRemovedItem(n){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)n(t)}diff(n){if(!n)n=new Map;else if(!(n instanceof Map||Hx(n)))throw new fe(900,!1);return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(n,(r,i)=>{if(t&&t.key===i)this._maybeAddToChanges(t,r),this._appendAfter=t,t=t._next;else{let o=this._getOrCreateRecordForKey(i,r);t=this._insertBeforeOrAppend(t,o)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let r=t;r!==null;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(n,t){if(n){let r=n._prev;return t._next=n,t._prev=r,n._prev=t,r&&(r._next=t),n===this._mapHead&&(this._mapHead=t),this._appendAfter=n,n}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(n,t){if(this._records.has(n)){let i=this._records.get(n);this._maybeAddToChanges(i,t);let o=i._prev,c=i._next;return o&&(o._next=c),c&&(c._prev=o),i._next=null,i._prev=null,i}let r=new P0(n);return this._records.set(n,r),r.currentValue=t,this._addToAdditions(r),r}_reset(){if(this.isDirty){let n;for(this._previousMapHead=this._mapHead,n=this._previousMapHead;n!==null;n=n._next)n._nextPrevious=n._next;for(n=this._changesHead;n!==null;n=n._nextChanged)n.previousValue=n.currentValue;for(n=this._additionsHead;n!=null;n=n._nextAdded)n.previousValue=n.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(n,t){Object.is(t,n.currentValue)||(n.previousValue=n.currentValue,n.currentValue=t,this._addToChanges(n))}_addToAdditions(n){this._additionsHead===null?this._additionsHead=this._additionsTail=n:(this._additionsTail._nextAdded=n,this._additionsTail=n)}_addToChanges(n){this._changesHead===null?this._changesHead=this._changesTail=n:(this._changesTail._nextChanged=n,this._changesTail=n)}_forEach(n,t){n instanceof Map?n.forEach(t):Object.keys(n).forEach(r=>t(n[r],r))}},P0=class{constructor(n){this.key=n,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}};function ov(){return new Em([new O0])}var Em=(()=>{class e{static{this.\u0275prov=de({token:e,providedIn:"root",factory:ov})}constructor(t){this.factories=t}static create(t,r){if(r){let i=r.factories.slice();t=t.concat(i)}return new e(t)}static extend(t){return{provide:e,useFactory:r=>e.create(t,r||ov()),deps:[[e,new yv,new F0]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r)return r;throw new fe(901,!1)}}return e})();function aE(e){try{let{rootComponent:n,appProviders:t,platformProviders:r}=e,i=Kk(r),o=[Wk({}),{provide:aa,useExisting:qk},...t||[]],c=new jd({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1});return Xk({r3Injector:c.injector,platformInjector:i,rootComponent:n})}catch(n){return Promise.reject(n)}}var sv=!1;function n4(){sv||(sv=!0,oR(),vk(),Mk(),Ek(),$3(),b3(),r3(),iP())}function r4(e,n){return Cf(e)}function lE(){return da([{provide:ad,useFactory:()=>{let e=!0;return ud()&&(e=!!K(ga,{optional:!0})?.get(Mb,null)),e&&Fi("NgHydration"),e}},{provide:Xo,useValue:()=>{ZP(!1),ud()&&K(ad)&&(i4(),n4())},multi:!0},{provide:Pb,useFactory:()=>ud()&&K(ad)},{provide:ya,useFactory:()=>{if(ud()&&K(ad)){let e=K(fi),n=K(si);return()=>{r4(e,n).then(()=>{e3(e)})}}return()=>{}},multi:!0}])}function i4(){let e=Jd(),n;for(let t of e.body.childNodes)if(t.nodeType===Node.COMMENT_NODE&&t.textContent?.trim()===rR){n=t;break}if(!n)throw new fe(-507,!1)}function Gl(e){return typeof e=="boolean"?e:e!=null&&e!=="false"}function $l(e,n){Fi("NgSignals");let t=H_(e);return n?.equal&&(t[xi].equal=n.equal),t}function Vi(e){let n=$e(null);try{return e()}finally{$e(n)}}var fE=null;function Ui(){return fE}function hE(e){fE??=e}var _f=class{};var Kn=new ve(""),pE=(()=>{class e{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=de({token:e,factory:()=>K(a4),providedIn:"platform"})}}return e})();var a4=(()=>{class e extends pE{constructor(){super(),this._doc=K(Kn),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Ui().getBaseHref(this._doc)}onPopState(t){let r=Ui().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Ui().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=de({token:e,factory:()=>new e,providedIn:"platform"})}}return e})();function gE(e,n){if(e.length==0)return n;if(n.length==0)return e;let t=0;return e.endsWith("/")&&t++,n.startsWith("/")&&t++,t==2?e+n.substring(1):t==1?e+n:e+"/"+n}function cE(e){let n=e.match(/#|\?|$/),t=n&&n.index||e.length,r=t-(e[t-1]==="/"?1:0);return e.slice(0,r)+e.slice(t)}function cs(e){return e&&e[0]!=="?"?"?"+e:e}var vf=(()=>{class e{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=de({token:e,factory:()=>K(mE),providedIn:"root"})}}return e})(),l4=new ve(""),mE=(()=>{class e extends vf{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??K(Kn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return gE(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+cs(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let c=this.prepareExternalUrl(i+cs(o));this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,o){let c=this.prepareExternalUrl(i+cs(o));this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||e)(He(pE),He(l4,8))}}static{this.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var ql=(()=>{class e{constructor(t){this._subject=new Pt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=d4(cE(uE(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+cs(r))}normalize(t){return e.stripTrailingSlash(u4(this._basePath,uE(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+cs(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+cs(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=cs}static{this.joinWithSlash=gE}static{this.stripTrailingSlash=cE}static{this.\u0275fac=function(r){return new(r||e)(He(vf))}}static{this.\u0275prov=de({token:e,factory:()=>c4(),providedIn:"root"})}}return e})();function c4(){return new ql(He(vf))}function u4(e,n){if(!e||!n.startsWith(e))return n;let t=n.substring(e.length);return t===""||["/",";","?","#"].includes(t[0])?t:n}function uE(e){return e.replace(/\/index.html$/,"")}function d4(e){if(new RegExp("^(https?:)?//").test(e)){let[,t]=e.split(/\/\/[^\/]+/);return t}return e}function Dm(e,n){n=encodeURIComponent(n);for(let t of e.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===n)return decodeURIComponent(o)}return null}var bf=(()=>{class e{constructor(t,r){this._viewContainer=t,this._context=new Im,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){dE("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){dE("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||e)(W(ss),W(sa))}}static{this.\u0275dir=Zt({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return e})(),Im=class{constructor(){this.$implicit=null,this.ngIf=null}};function dE(e,n){if(!!!(!n||n.createEmbeddedView))throw new Error(`${e} must be a TemplateRef, but received '${jn(n)}'.`)}var xf=(()=>{class e{constructor(t,r,i){this._ngEl=t,this._differs=r,this._renderer=i,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){let t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,r){let[i,o]=t.split("."),c=i.indexOf("-")===-1?void 0:ai.DashCase;r!=null?this._renderer.setStyle(this._ngEl.nativeElement,i,o?`${r}${o}`:r,c):this._renderer.removeStyle(this._ngEl.nativeElement,i,c)}_applyChanges(t){t.forEachRemovedItem(r=>this._setStyle(r.key,null)),t.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}static{this.\u0275fac=function(r){return new(r||e)(W(ur),W(Em),W($r))}}static{this.\u0275dir=Zt({type:e,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0})}}return e})();var Xr=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=Ri({type:e})}static{this.\u0275inj=Oi({})}}return e})(),yE="browser",f4="server";function Yl(e){return e===f4}var wf=class{};var Sf=class e{constructor(n){this.normalizedNames=new Map,this.lazyUpdate=null,n?typeof n=="string"?this.lazyInit=()=>{this.headers=new Map,n.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),o=i.toLowerCase(),c=t.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(c):this.headers.set(o,[c])}})}:typeof Headers<"u"&&n instanceof Headers?(this.headers=new Map,n.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(n).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(n){return this.init(),this.headers.has(n.toLowerCase())}get(n){this.init();let t=this.headers.get(n.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(n){return this.init(),this.headers.get(n.toLowerCase())||null}append(n,t){return this.clone({name:n,value:t,op:"a"})}set(n,t){return this.clone({name:n,value:t,op:"s"})}delete(n,t){return this.clone({name:n,value:t,op:"d"})}maybeSetNormalizedName(n,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,n)}init(){this.lazyInit&&(this.lazyInit instanceof e?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(n=>this.applyUpdate(n)),this.lazyUpdate=null))}copyFrom(n){n.init(),Array.from(n.headers.keys()).forEach(t=>{this.headers.set(t,n.headers.get(t)),this.normalizedNames.set(t,n.normalizedNames.get(t))})}clone(n){let t=new e;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof e?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([n]),t}applyUpdate(n){let t=n.name.toLowerCase();switch(n.op){case"a":case"s":let r=n.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(n.name,t);let i=(n.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let o=n.value;if(!o)this.headers.delete(t),this.normalizedNames.delete(t);else{let c=this.headers.get(t);if(!c)return;c=c.filter(h=>o.indexOf(h)===-1),c.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,c)}break}}setHeaderEntries(n,t){let r=(Array.isArray(t)?t:[t]).map(o=>o.toString()),i=n.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(n,i)}forEach(n){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>n(this.normalizedNames.get(t),this.headers.get(t)))}};var IE=function(e){return e[e.Sent=0]="Sent",e[e.UploadProgress=1]="UploadProgress",e[e.ResponseHeader=2]="ResponseHeader",e[e.DownloadProgress=3]="DownloadProgress",e[e.Response=4]="Response",e[e.User=5]="User",e}(IE||{}),Am=class{constructor(n,t=200,r="OK"){this.headers=n.headers||new Sf,this.status=n.status!==void 0?n.status:t,this.statusText=n.statusText||r,this.url=n.url||null,this.ok=this.status>=200&&this.status<300}};var Df=class e extends Am{constructor(n={}){super(n),this.type=IE.Response,this.body=n.body!==void 0?n.body:null}clone(n={}){return new e({body:n.body!==void 0?n.body:this.body,headers:n.headers||this.headers,status:n.status!==void 0?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}};var h4=new ve("");var p4=new ve(""),CE="b",_E="h",wE="s",vE="st",bE="u",xE="rt",If=new ve(""),g4=["GET","HEAD"];function m4(e,n){let A=K(If),{isCacheActive:t}=A,r=O_(A,["isCacheActive"]),{transferCache:i,method:o}=e;if(!t||i===!1||o==="POST"&&!r.includePostRequests&&!i||o!=="POST"&&!g4.includes(o)||!r.includeRequestsWithAuthHeaders&&y4(e)||r.filter?.(e)===!1)return n(e);let c=K(ga),h=K(p4,{optional:!0}),g=Yl(K(ui));if(h&&!g)throw new fe(2803,!1);let m=g&&h?v4(e.url,h):e.url,v=_4(e,m),b=c.get(v,null),I=r.includeHeaders;if(typeof i=="object"&&i.includeHeaders&&(I=i.includeHeaders),b){let{[CE]:R,[xE]:j,[_E]:Y,[wE]:G,[vE]:ce,[bE]:Xe}=b,ge=R;switch(j){case"arraybuffer":ge=new TextEncoder().encode(R).buffer;break;case"blob":ge=new Blob([R]);break}let H=new Sf(Y);return Te(new Df({body:ge,headers:H,status:G,statusText:ce,url:Xe}))}return n(e).pipe(on(R=>{R instanceof Df&&g&&c.set(v,{[CE]:R.body,[_E]:C4(R.headers,I),[wE]:R.status,[vE]:R.statusText,[bE]:m,[xE]:e.responseType})}))}function y4(e){return e.headers.has("authorization")||e.headers.has("proxy-authorization")}function C4(e,n){if(!n)return{};let t={};for(let r of n){let i=e.getAll(r);i!==null&&(t[r]=i)}return t}function EE(e){return[...e.keys()].sort().map(n=>`${n}=${e.getAll(n)}`).join("&")}function _4(e,n){let{params:t,method:r,responseType:i}=e,o=EE(t),c=e.serializeBody();c instanceof URLSearchParams?c=EE(c):typeof c!="string"&&(c="");let h=[r,i,n,c,o].join("|"),g=w4(h);return g}function w4(e){let n=0;for(let t of e)n=Math.imul(31,n)+t.charCodeAt(0)<<0;return n+=2147483648,n.toString()}function SE(e){return[{provide:If,useFactory:()=>(Fi("NgHttpTransferCache"),ne({isCacheActive:!0},e))},{provide:h4,useValue:m4,multi:!0,deps:[ga,If]},{provide:ya,multi:!0,useFactory:()=>{let n=K(fi),t=K(If);return()=>{Cf(n).then(()=>{t.isCacheActive=!1})}}}]}function v4(e,n){let t=new URL(e,"resolve://").origin,r=n[t];return r?e.replace(t,r):e}var Nm=class extends _f{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Om=class e extends Nm{static makeCurrent(){hE(new e)}onAndCancel(n,t,r){return n.addEventListener(t,r),()=>{n.removeEventListener(t,r)}}dispatchEvent(n,t){n.dispatchEvent(t)}remove(n){n.remove()}createElement(n,t){return t=t||this.getDefaultDocument(),t.createElement(n)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(n){return n.nodeType===Node.ELEMENT_NODE}isShadowRoot(n){return n instanceof DocumentFragment}getGlobalEventTarget(n,t){return t==="window"?window:t==="document"?n:t==="body"?n.body:null}getBaseHref(n){let t=b4();return t==null?null:x4(t)}resetBaseElement(){Xl=null}getUserAgent(){return window.navigator.userAgent}getCookie(n){return Dm(document.cookie,n)}},Xl=null;function b4(){return Xl=Xl||document.querySelector("base"),Xl?Xl.getAttribute("href"):null}function x4(e){return new URL(e,document.baseURI).pathname}var E4=(()=>{class e{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=de({token:e,factory:e.\u0275fac})}}return e})(),Rm=new ve(""),ME=(()=>{class e{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new fe(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||e)(He(Rm),He(Xt))}}static{this.\u0275prov=de({token:e,factory:e.\u0275fac})}}return e})(),Af=class{constructor(n){this._doc=n}},Tm="ng-app-id",NE=(()=>{class e{constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Yl(o),this.resetHostNodes()}addStyles(t){for(let r of t)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(t){for(let r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){let r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${Tm}="${this.appId}"]`);if(t?.length){let r=new Map;return t.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){let i=this.styleRef;if(i.has(t)){let o=i.get(t);return o.usage+=r,o.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){let i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===t)return i.delete(r),o.removeAttribute(Tm),o;{let c=this.doc.createElement("style");return this.nonce&&c.setAttribute("nonce",this.nonce),c.textContent=r,this.platformIsServer&&c.setAttribute(Tm,this.appId),t.appendChild(c),c}}addStyleToHost(t,r){let i=this.getStyleElement(t,r),o=this.styleRef,c=o.get(r)?.elements;c?c.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||e)(He(Kn),He(ef),He(nm,8),He(ui))}}static{this.\u0275prov=de({token:e,factory:e.\u0275fac})}}return e})(),Mm={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Lm=/%COMP%/g,OE="%COMP%",I4=`_nghost-${OE}`,S4=`_ngcontent-${OE}`,D4=!0,A4=new ve("",{providedIn:"root",factory:()=>D4});function T4(e){return S4.replace(Lm,e)}function M4(e){return I4.replace(Lm,e)}function RE(e,n){return n.map(t=>t.replace(Lm,e))}var DE=(()=>{class e{constructor(t,r,i,o,c,h,g,m=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=c,this.platformId=h,this.ngZone=g,this.nonce=m,this.rendererByCompId=new Map,this.platformIsServer=Yl(h),this.defaultRenderer=new Zl(t,c,g,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===oi.ShadowDom&&(r=Le(ne({},r),{encapsulation:oi.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof Tf?i.applyToHost(t):i instanceof Ql&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let c=this.doc,h=this.ngZone,g=this.eventManager,m=this.sharedStylesHost,v=this.removeStylesOnCompDestroy,b=this.platformIsServer;switch(r.encapsulation){case oi.Emulated:o=new Tf(g,m,r,this.appId,v,c,h,b);break;case oi.ShadowDom:return new Pm(g,m,t,r,c,h,this.nonce,b);default:o=new Ql(g,m,r,v,c,h,b);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||e)(He(ME),He(NE),He(ef),He(A4),He(Kn),He(ui),He(Xt),He(nm))}}static{this.\u0275prov=de({token:e,factory:e.\u0275fac})}}return e})(),Zl=class{constructor(n,t,r,i){this.eventManager=n,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(n,t){return t?this.doc.createElementNS(Mm[t]||t,n):this.doc.createElement(n)}createComment(n){return this.doc.createComment(n)}createText(n){return this.doc.createTextNode(n)}appendChild(n,t){(AE(n)?n.content:n).appendChild(t)}insertBefore(n,t,r){n&&(AE(n)?n.content:n).insertBefore(t,r)}removeChild(n,t){t.remove()}selectRootElement(n,t){let r=typeof n=="string"?this.doc.querySelector(n):n;if(!r)throw new fe(-5104,!1);return t||(r.textContent=""),r}parentNode(n){return n.parentNode}nextSibling(n){return n.nextSibling}setAttribute(n,t,r,i){if(i){t=i+":"+t;let o=Mm[i];o?n.setAttributeNS(o,t,r):n.setAttribute(t,r)}else n.setAttribute(t,r)}removeAttribute(n,t,r){if(r){let i=Mm[r];i?n.removeAttributeNS(i,t):n.removeAttribute(`${r}:${t}`)}else n.removeAttribute(t)}addClass(n,t){n.classList.add(t)}removeClass(n,t){n.classList.remove(t)}setStyle(n,t,r,i){i&(ai.DashCase|ai.Important)?n.style.setProperty(t,r,i&ai.Important?"important":""):n.style[t]=r}removeStyle(n,t,r){r&ai.DashCase?n.style.removeProperty(t):n.style[t]=""}setProperty(n,t,r){n!=null&&(n[t]=r)}setValue(n,t){n.nodeValue=t}listen(n,t,r){if(typeof n=="string"&&(n=Ui().getGlobalEventTarget(this.doc,n),!n))throw new Error(`Unsupported event target ${n} for event ${t}`);return this.eventManager.addEventListener(n,t,this.decoratePreventDefault(r))}decoratePreventDefault(n){return t=>{if(t==="__ngUnwrap__")return n;(this.platformIsServer?this.ngZone.runGuarded(()=>n(t)):n(t))===!1&&t.preventDefault()}}};function AE(e){return e.tagName==="TEMPLATE"&&e.content!==void 0}var Pm=class extends Zl{constructor(n,t,r,i,o,c,h,g){super(n,o,c,g),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let m=RE(i.id,i.styles);for(let v of m){let b=document.createElement("style");h&&b.setAttribute("nonce",h),b.textContent=v,this.shadowRoot.appendChild(b)}}nodeOrShadowRoot(n){return n===this.hostEl?this.shadowRoot:n}appendChild(n,t){return super.appendChild(this.nodeOrShadowRoot(n),t)}insertBefore(n,t,r){return super.insertBefore(this.nodeOrShadowRoot(n),t,r)}removeChild(n,t){return super.removeChild(null,t)}parentNode(n){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(n)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Ql=class extends Zl{constructor(n,t,r,i,o,c,h,g){super(n,o,c,h),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=g?RE(g,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Tf=class extends Ql{constructor(n,t,r,i,o,c,h,g){let m=i+"-"+r.id;super(n,t,r,o,c,h,g,m),this.contentAttr=T4(m),this.hostAttr=M4(m)}applyToHost(n){this.applyStyles(),this.setAttribute(n,this.hostAttr,"")}createElement(n,t){let r=super.createElement(n,t);return super.setAttribute(r,this.contentAttr,""),r}},N4=(()=>{class e extends Af{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||e)(He(Kn))}}static{this.\u0275prov=de({token:e,factory:e.\u0275fac})}}return e})(),TE=["alt","control","meta","shift"],O4={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},R4={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey},P4=(()=>{class e extends Af{constructor(t){super(t)}supports(t){return e.parseEventName(t)!=null}addEventListener(t,r,i){let o=e.parseEventName(r),c=e.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ui().onAndCancel(t,o.domEventName,c))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=e._normalizeKey(r.pop()),c="",h=r.indexOf("code");if(h>-1&&(r.splice(h,1),c="code."),TE.forEach(m=>{let v=r.indexOf(m);v>-1&&(r.splice(v,1),c+=m+".")}),c+=o,r.length!=0||o.length===0)return null;let g={};return g.domEventName=i,g.fullKey=c,g}static matchEventFullKeyCode(t,r){let i=O4[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),TE.forEach(c=>{if(c!==i){let h=R4[c];h(t)&&(o+=c+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{e.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(r){return new(r||e)(He(Kn))}}static{this.\u0275prov=de({token:e,factory:e.\u0275fac})}}return e})();function PE(e,n){return aE(ne({rootComponent:e},k4(n)))}function k4(e){return{appProviders:[...U4,...e?.providers??[]],platformProviders:V4}}function L4(){Om.makeCurrent()}function F4(){return new Ti}function B4(){return Ib(document),document}var V4=[{provide:ui,useValue:yE},{provide:tm,useValue:L4,multi:!0},{provide:Kn,useFactory:B4,deps:[]}];var U4=[{provide:Xd,useValue:"root"},{provide:Ti,useFactory:F4,deps:[]},{provide:Rm,useClass:N4,multi:!0,deps:[Kn,Xt,ui]},{provide:Rm,useClass:P4,multi:!0,deps:[Kn]},DE,NE,ME,{provide:ca,useExisting:DE},{provide:wf,useClass:E4,deps:[]},[]];var kE=(()=>{class e{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||e)(He(Kn))}}static{this.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var Fm=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=de({token:e,factory:function(r){let i=null;return r?i=new(r||e):i=He(j4),i},providedIn:"root"})}}return e})(),j4=(()=>{class e extends Fm{constructor(t){super(),this._doc=t}sanitize(t,r){if(r==null)return null;switch(t){case yo.NONE:return r;case yo.HTML:return ma(r,"HTML")?ki(r):$b(this._doc,String(r)).toString();case yo.STYLE:return ma(r,"Style")?ki(r):r;case yo.SCRIPT:if(ma(r,"Script"))return ki(r);throw new fe(5200,!1);case yo.URL:return ma(r,"URL")?ki(r):sm(String(r));case yo.RESOURCE_URL:if(ma(r,"ResourceURL"))return ki(r);throw new fe(5201,!1);default:throw new fe(5202,!1)}}bypassSecurityTrustHtml(t){return Lb(t)}bypassSecurityTrustStyle(t){return Fb(t)}bypassSecurityTrustScript(t){return Bb(t)}bypassSecurityTrustUrl(t){return Vb(t)}bypassSecurityTrustResourceUrl(t){return Ub(t)}static{this.\u0275fac=function(r){return new(r||e)(He(Kn))}}static{this.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),km=function(e){return e[e.NoHttpTransferCache=0]="NoHttpTransferCache",e[e.HttpTransferCacheOptions=1]="HttpTransferCacheOptions",e[e.I18nSupport=2]="I18nSupport",e[e.EventReplay=3]="EventReplay",e}(km||{});function LE(...e){let n=[],t=new Set,r=t.has(km.HttpTransferCacheOptions);for(let{\u0275providers:i,\u0275kind:o}of e)t.add(o),i.length&&n.push(i);return da([[],lE(),t.has(km.NoHttpTransferCache)||r?[]:SE({}),n])}var Re="primary",pc=Symbol("RouteTitle"),Hm=class{constructor(n){this.params=n||{}}has(n){return Object.prototype.hasOwnProperty.call(this.params,n)}get(n){if(this.has(n)){let t=this.params[n];return Array.isArray(t)?t[0]:t}return null}getAll(n){if(this.has(n)){let t=this.params[n];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function xa(e){return new Hm(e)}function H4(e,n,t){let r=t.path.split("/");if(r.length>e.length||t.pathMatch==="full"&&(n.hasChildren()||r.length<e.length))return null;let i={};for(let o=0;o<r.length;o++){let c=r[o],h=e[o];if(c[0]===":")i[c.substring(1)]=h;else if(c!==h.path)return null}return{consumed:e.slice(0,r.length),posParams:i}}function z4(e,n){if(e.length!==n.length)return!1;for(let t=0;t<e.length;++t)if(!hi(e[t],n[t]))return!1;return!0}function hi(e,n){let t=e?zm(e):void 0,r=n?zm(n):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!GE(e[i],n[i]))return!1;return!0}function zm(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}function GE(e,n){if(Array.isArray(e)&&Array.isArray(n)){if(e.length!==n.length)return!1;let t=[...e].sort(),r=[...n].sort();return t.every((i,o)=>r[o]===i)}else return e===n}function $E(e){return e.length>0?e[e.length-1]:null}function Co(e){return Jp(e)?e:ls(e)?vt(Promise.resolve(e)):Te(e)}var W4={exact:YE,subset:XE},qE={exact:G4,subset:$4,ignored:()=>!0};function BE(e,n,t){return W4[t.paths](e.root,n.root,t.matrixParams)&&qE[t.queryParams](e.queryParams,n.queryParams)&&!(t.fragment==="exact"&&e.fragment!==n.fragment)}function G4(e,n){return hi(e,n)}function YE(e,n,t){if(!ds(e.segments,n.segments)||!Of(e.segments,n.segments,t)||e.numberOfChildren!==n.numberOfChildren)return!1;for(let r in n.children)if(!e.children[r]||!YE(e.children[r],n.children[r],t))return!1;return!0}function $4(e,n){return Object.keys(n).length<=Object.keys(e).length&&Object.keys(n).every(t=>GE(e[t],n[t]))}function XE(e,n,t){return ZE(e,n,n.segments,t)}function ZE(e,n,t,r){if(e.segments.length>t.length){let i=e.segments.slice(0,t.length);return!(!ds(i,t)||n.hasChildren()||!Of(i,t,r))}else if(e.segments.length===t.length){if(!ds(e.segments,t)||!Of(e.segments,t,r))return!1;for(let i in n.children)if(!e.children[i]||!XE(e.children[i],n.children[i],r))return!1;return!0}else{let i=t.slice(0,e.segments.length),o=t.slice(e.segments.length);return!ds(e.segments,i)||!Of(e.segments,i,r)||!e.children[Re]?!1:ZE(e.children[Re],n,o,r)}}function Of(e,n,t){return n.every((r,i)=>qE[t](e[i].parameters,r.parameters))}var Hi=class{constructor(n=new ft([],{}),t={},r=null){this.root=n,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=xa(this.queryParams),this._queryParamMap}toString(){return X4.serialize(this)}},ft=class{constructor(n,t){this.segments=n,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Rf(this)}},us=class{constructor(n,t){this.path=n,this.parameters=t}get parameterMap(){return this._parameterMap??=xa(this.parameters),this._parameterMap}toString(){return KE(this)}};function q4(e,n){return ds(e,n)&&e.every((t,r)=>hi(t.parameters,n[r].parameters))}function ds(e,n){return e.length!==n.length?!1:e.every((t,r)=>t.path===n[r].path)}function Y4(e,n){let t=[];return Object.entries(e.children).forEach(([r,i])=>{r===Re&&(t=t.concat(n(i,r)))}),Object.entries(e.children).forEach(([r,i])=>{r!==Re&&(t=t.concat(n(i,r)))}),t}var g1=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=de({token:e,factory:()=>new ic,providedIn:"root"})}}return e})(),ic=class{parse(n){let t=new Gm(n);return new Hi(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(n){let t=`/${Kl(n.root,!0)}`,r=K4(n.queryParams),i=typeof n.fragment=="string"?`#${Z4(n.fragment)}`:"";return`${t}${r}${i}`}},X4=new ic;function Rf(e){return e.segments.map(n=>KE(n)).join("/")}function Kl(e,n){if(!e.hasChildren())return Rf(e);if(n){let t=e.children[Re]?Kl(e.children[Re],!1):"",r=[];return Object.entries(e.children).forEach(([i,o])=>{i!==Re&&r.push(`${i}:${Kl(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=Y4(e,(r,i)=>i===Re?[Kl(e.children[Re],!1)]:[`${i}:${Kl(r,!1)}`]);return Object.keys(e.children).length===1&&e.children[Re]!=null?`${Rf(e)}/${t[0]}`:`${Rf(e)}/(${t.join("//")})`}}function QE(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Mf(e){return QE(e).replace(/%3B/gi,";")}function Z4(e){return encodeURI(e)}function Wm(e){return QE(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Pf(e){return decodeURIComponent(e)}function VE(e){return Pf(e.replace(/\+/g,"%20"))}function KE(e){return`${Wm(e.path)}${Q4(e.parameters)}`}function Q4(e){return Object.entries(e).map(([n,t])=>`;${Wm(n)}=${Wm(t)}`).join("")}function K4(e){let n=Object.entries(e).map(([t,r])=>Array.isArray(r)?r.map(i=>`${Mf(t)}=${Mf(i)}`).join("&"):`${Mf(t)}=${Mf(r)}`).filter(t=>t);return n.length?`?${n.join("&")}`:""}var J4=/^[^\/()?;#]+/;function Bm(e){let n=e.match(J4);return n?n[0]:""}var e8=/^[^\/()?;=#]+/;function t8(e){let n=e.match(e8);return n?n[0]:""}var n8=/^[^=?&#]+/;function r8(e){let n=e.match(n8);return n?n[0]:""}var i8=/^[^&#]+/;function o8(e){let n=e.match(i8);return n?n[0]:""}var Gm=class{constructor(n){this.url=n,this.remaining=n}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ft([],{}):new ft([],this.parseChildren())}parseQueryParams(){let n={};if(this.consumeOptional("?"))do this.parseQueryParam(n);while(this.consumeOptional("&"));return n}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let n=[];for(this.peekStartsWith("(")||n.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),n.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(n.length>0||Object.keys(t).length>0)&&(r[Re]=new ft(n,t)),r}parseSegment(){let n=Bm(this.remaining);if(n===""&&this.peekStartsWith(";"))throw new fe(4009,!1);return this.capture(n),new us(Pf(n),this.parseMatrixParams())}parseMatrixParams(){let n={};for(;this.consumeOptional(";");)this.parseParam(n);return n}parseParam(n){let t=t8(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=Bm(this.remaining);i&&(r=i,this.capture(r))}n[Pf(t)]=Pf(r)}parseQueryParam(n){let t=r8(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let c=o8(this.remaining);c&&(r=c,this.capture(r))}let i=VE(t),o=VE(r);if(n.hasOwnProperty(i)){let c=n[i];Array.isArray(c)||(c=[c],n[i]=c),c.push(o)}else n[i]=o}parseParens(n){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Bm(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new fe(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):n&&(o=Re);let c=this.parseChildren();t[o]=Object.keys(c).length===1?c[Re]:new ft([],c),this.consumeOptional("//")}return t}peekStartsWith(n){return this.remaining.startsWith(n)}consumeOptional(n){return this.peekStartsWith(n)?(this.remaining=this.remaining.substring(n.length),!0):!1}capture(n){if(!this.consumeOptional(n))throw new fe(4011,!1)}};function JE(e){return e.segments.length>0?new ft([],{[Re]:e}):e}function eI(e){let n={};for(let[r,i]of Object.entries(e.children)){let o=eI(i);if(r===Re&&o.segments.length===0&&o.hasChildren())for(let[c,h]of Object.entries(o.children))n[c]=h;else(o.segments.length>0||o.hasChildren())&&(n[r]=o)}let t=new ft(e.segments,n);return s8(t)}function s8(e){if(e.numberOfChildren===1&&e.children[Re]){let n=e.children[Re];return new ft(e.segments.concat(n.segments),n.children)}return e}function oc(e){return e instanceof Hi}function a8(e,n,t=null,r=null){let i=tI(e);return nI(i,n,t,r)}function tI(e){let n;function t(o){let c={};for(let g of o.children){let m=t(g);c[g.outlet]=m}let h=new ft(o.url,c);return o===e&&(n=h),h}let r=t(e.root),i=JE(r);return n??i}function nI(e,n,t,r){let i=e;for(;i.parent;)i=i.parent;if(n.length===0)return Vm(i,i,i,t,r);let o=l8(n);if(o.toRoot())return Vm(i,i,new ft([],{}),t,r);let c=c8(o,i,e),h=c.processChildren?tc(c.segmentGroup,c.index,o.commands):iI(c.segmentGroup,c.index,o.commands);return Vm(i,c.segmentGroup,h,t,r)}function kf(e){return typeof e=="object"&&e!=null&&!e.outlets&&!e.segmentPath}function sc(e){return typeof e=="object"&&e!=null&&e.outlets}function Vm(e,n,t,r,i){let o={};r&&Object.entries(r).forEach(([g,m])=>{o[g]=Array.isArray(m)?m.map(v=>`${v}`):`${m}`});let c;e===n?c=t:c=rI(e,n,t);let h=JE(eI(c));return new Hi(h,o,i)}function rI(e,n,t){let r={};return Object.entries(e.children).forEach(([i,o])=>{o===n?r[i]=t:r[i]=rI(o,n,t)}),new ft(e.segments,r)}var Lf=class{constructor(n,t,r){if(this.isAbsolute=n,this.numberOfDoubleDots=t,this.commands=r,n&&r.length>0&&kf(r[0]))throw new fe(4003,!1);let i=r.find(sc);if(i&&i!==$E(r))throw new fe(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function l8(e){if(typeof e[0]=="string"&&e.length===1&&e[0]==="/")return new Lf(!0,0,e);let n=0,t=!1,r=e.reduce((i,o,c)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let h={};return Object.entries(o.outlets).forEach(([g,m])=>{h[g]=typeof m=="string"?m.split("/"):m}),[...i,{outlets:h}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:c===0?(o.split("/").forEach((h,g)=>{g==0&&h==="."||(g==0&&h===""?t=!0:h===".."?n++:h!=""&&i.push(h))}),i):[...i,o]},[]);return new Lf(t,n,r)}var wa=class{constructor(n,t,r){this.segmentGroup=n,this.processChildren=t,this.index=r}};function c8(e,n,t){if(e.isAbsolute)return new wa(n,!0,0);if(!t)return new wa(n,!1,NaN);if(t.parent===null)return new wa(t,!0,0);let r=kf(e.commands[0])?0:1,i=t.segments.length-1+r;return u8(t,i,e.numberOfDoubleDots)}function u8(e,n,t){let r=e,i=n,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new fe(4005,!1);i=r.segments.length}return new wa(r,!1,i-o)}function d8(e){return sc(e[0])?e[0].outlets:{[Re]:e}}function iI(e,n,t){if(e??=new ft([],{}),e.segments.length===0&&e.hasChildren())return tc(e,n,t);let r=f8(e,n,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){let o=new ft(e.segments.slice(0,r.pathIndex),{});return o.children[Re]=new ft(e.segments.slice(r.pathIndex),e.children),tc(o,0,i)}else return r.match&&i.length===0?new ft(e.segments,{}):r.match&&!e.hasChildren()?$m(e,n,t):r.match?tc(e,0,i):$m(e,n,t)}function tc(e,n,t){if(t.length===0)return new ft(e.segments,{});{let r=d8(t),i={};if(Object.keys(r).some(o=>o!==Re)&&e.children[Re]&&e.numberOfChildren===1&&e.children[Re].segments.length===0){let o=tc(e.children[Re],n,t);return new ft(e.segments,o.children)}return Object.entries(r).forEach(([o,c])=>{typeof c=="string"&&(c=[c]),c!==null&&(i[o]=iI(e.children[o],n,c))}),Object.entries(e.children).forEach(([o,c])=>{r[o]===void 0&&(i[o]=c)}),new ft(e.segments,i)}}function f8(e,n,t){let r=0,i=n,o={match:!1,pathIndex:0,commandIndex:0};for(;i<e.segments.length;){if(r>=t.length)return o;let c=e.segments[i],h=t[r];if(sc(h))break;let g=`${h}`,m=r<t.length-1?t[r+1]:null;if(i>0&&g===void 0)break;if(g&&m&&typeof m=="object"&&m.outlets===void 0){if(!jE(g,m,c))return o;r+=2}else{if(!jE(g,{},c))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function $m(e,n,t){let r=e.segments.slice(0,n),i=0;for(;i<t.length;){let o=t[i];if(sc(o)){let g=h8(o.outlets);return new ft(r,g)}if(i===0&&kf(t[0])){let g=e.segments[n];r.push(new us(g.path,UE(t[0]))),i++;continue}let c=sc(o)?o.outlets[Re]:`${o}`,h=i<t.length-1?t[i+1]:null;c&&h&&kf(h)?(r.push(new us(c,UE(h))),i+=2):(r.push(new us(c,{})),i++)}return new ft(r,{})}function h8(e){let n={};return Object.entries(e).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(n[t]=$m(new ft([],{}),0,r))}),n}function UE(e){let n={};return Object.entries(e).forEach(([t,r])=>n[t]=`${r}`),n}function jE(e,n,t){return e==t.path&&hi(n,t.parameters)}var nc="imperative",An=function(e){return e[e.NavigationStart=0]="NavigationStart",e[e.NavigationEnd=1]="NavigationEnd",e[e.NavigationCancel=2]="NavigationCancel",e[e.NavigationError=3]="NavigationError",e[e.RoutesRecognized=4]="RoutesRecognized",e[e.ResolveStart=5]="ResolveStart",e[e.ResolveEnd=6]="ResolveEnd",e[e.GuardsCheckStart=7]="GuardsCheckStart",e[e.GuardsCheckEnd=8]="GuardsCheckEnd",e[e.RouteConfigLoadStart=9]="RouteConfigLoadStart",e[e.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",e[e.ChildActivationStart=11]="ChildActivationStart",e[e.ChildActivationEnd=12]="ChildActivationEnd",e[e.ActivationStart=13]="ActivationStart",e[e.ActivationEnd=14]="ActivationEnd",e[e.Scroll=15]="Scroll",e[e.NavigationSkipped=16]="NavigationSkipped",e}(An||{}),br=class{constructor(n,t){this.id=n,this.url=t}},ac=class extends br{constructor(n,t,r="imperative",i=null){super(n,t),this.type=An.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},fs=class extends br{constructor(n,t,r){super(n,t),this.urlAfterRedirects=r,this.type=An.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},fr=function(e){return e[e.Redirect=0]="Redirect",e[e.SupersededByNewNavigation=1]="SupersededByNewNavigation",e[e.NoDataFromResolver=2]="NoDataFromResolver",e[e.GuardRejected=3]="GuardRejected",e}(fr||{}),qm=function(e){return e[e.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",e[e.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",e}(qm||{}),ji=class extends br{constructor(n,t,r,i){super(n,t),this.reason=r,this.code=i,this.type=An.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},hs=class extends br{constructor(n,t,r,i){super(n,t),this.reason=r,this.code=i,this.type=An.NavigationSkipped}},lc=class extends br{constructor(n,t,r,i){super(n,t),this.error=r,this.target=i,this.type=An.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Ff=class extends br{constructor(n,t,r,i){super(n,t),this.urlAfterRedirects=r,this.state=i,this.type=An.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ym=class extends br{constructor(n,t,r,i){super(n,t),this.urlAfterRedirects=r,this.state=i,this.type=An.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Xm=class extends br{constructor(n,t,r,i,o){super(n,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=An.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Zm=class extends br{constructor(n,t,r,i){super(n,t),this.urlAfterRedirects=r,this.state=i,this.type=An.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Qm=class extends br{constructor(n,t,r,i){super(n,t),this.urlAfterRedirects=r,this.state=i,this.type=An.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Km=class{constructor(n){this.route=n,this.type=An.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Jm=class{constructor(n){this.route=n,this.type=An.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},e1=class{constructor(n){this.snapshot=n,this.type=An.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},t1=class{constructor(n){this.snapshot=n,this.type=An.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},n1=class{constructor(n){this.snapshot=n,this.type=An.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},r1=class{constructor(n){this.snapshot=n,this.type=An.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var cc=class{},Ea=class{constructor(n,t){this.url=n,this.navigationBehaviorOptions=t}};function p8(e,n){return e.providers&&!e._injector&&(e._injector=vm(e.providers,n,`Route: ${e.path}`)),e._injector??n}function Zr(e){return e.outlet||Re}function g8(e,n){let t=e.filter(r=>Zr(r)===n);return t.push(...e.filter(r=>Zr(r)!==n)),t}function gc(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let n=e.parent;n;n=n.parent){let t=n.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var i1=class{get injector(){return gc(this.route?.snapshot)??this.rootInjector}set injector(n){}constructor(n){this.rootInjector=n,this.outlet=null,this.route=null,this.children=new Wf(this.rootInjector),this.attachRef=null}},Wf=(()=>{class e{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new i1(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||e)(He(vr))}}static{this.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),Bf=class{constructor(n){this._root=n}get root(){return this._root.value}parent(n){let t=this.pathFromRoot(n);return t.length>1?t[t.length-2]:null}children(n){let t=o1(n,this._root);return t?t.children.map(r=>r.value):[]}firstChild(n){let t=o1(n,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(n){let t=s1(n,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==n)}pathFromRoot(n){return s1(n,this._root).map(t=>t.value)}};function o1(e,n){if(e===n.value)return n;for(let t of n.children){let r=o1(e,t);if(r)return r}return null}function s1(e,n){if(e===n.value)return[n];for(let t of n.children){let r=s1(e,t);if(r.length)return r.unshift(n),r}return[]}var dr=class{constructor(n,t){this.value=n,this.children=t}toString(){return`TreeNode(${this.value})`}};function _a(e){let n={};return e&&e.children.forEach(t=>n[t.value.outlet]=t),n}var Vf=class extends Bf{constructor(n,t){super(n),this.snapshot=t,m1(this,n)}toString(){return this.snapshot.toString()}};function oI(e){let n=m8(e),t=new En([new us("",{})]),r=new En({}),i=new En({}),o=new En({}),c=new En(""),h=new pi(t,r,o,c,i,Re,e,n.root);return h.snapshot=n.root,new Vf(new dr(h,[]),n)}function m8(e){let n={},t={},r={},i="",o=new va([],n,r,i,t,Re,e,null,{});return new jf("",new dr(o,[]))}var pi=class{constructor(n,t,r,i,o,c,h,g){this.urlSubject=n,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=c,this.component=h,this._futureSnapshot=g,this.title=this.dataSubject?.pipe(Be(m=>m[pc]))??Te(void 0),this.url=n,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Be(n=>xa(n))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Be(n=>xa(n))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Uf(e,n,t="emptyOnly"){let r,{routeConfig:i}=e;return n!==null&&(t==="always"||i?.path===""||!n.component&&!n.routeConfig?.loadComponent)?r={params:ne(ne({},n.params),e.params),data:ne(ne({},n.data),e.data),resolve:ne(ne(ne(ne({},e.data),n.data),i?.data),e._resolvedData)}:r={params:ne({},e.params),data:ne({},e.data),resolve:ne(ne({},e.data),e._resolvedData??{})},i&&aI(i)&&(r.resolve[pc]=i.title),r}var va=class{get title(){return this.data?.[pc]}constructor(n,t,r,i,o,c,h,g,m){this.url=n,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=c,this.component=h,this.routeConfig=g,this._resolve=m}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=xa(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=xa(this.queryParams),this._queryParamMap}toString(){let n=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${n}', path:'${t}')`}},jf=class extends Bf{constructor(n,t){super(t),this.url=n,m1(this,t)}toString(){return sI(this._root)}};function m1(e,n){n.value._routerState=e,n.children.forEach(t=>m1(e,t))}function sI(e){let n=e.children.length>0?` { ${e.children.map(sI).join(", ")} } `:"";return`${e.value}${n}`}function Um(e){if(e.snapshot){let n=e.snapshot,t=e._futureSnapshot;e.snapshot=t,hi(n.queryParams,t.queryParams)||e.queryParamsSubject.next(t.queryParams),n.fragment!==t.fragment&&e.fragmentSubject.next(t.fragment),hi(n.params,t.params)||e.paramsSubject.next(t.params),z4(n.url,t.url)||e.urlSubject.next(t.url),hi(n.data,t.data)||e.dataSubject.next(t.data)}else e.snapshot=e._futureSnapshot,e.dataSubject.next(e._futureSnapshot.data)}function a1(e,n){let t=hi(e.params,n.params)&&q4(e.url,n.url),r=!e.parent!=!n.parent;return t&&!r&&(!e.parent||a1(e.parent,n.parent))}function aI(e){return typeof e.title=="string"||e.title===null}var y1=(()=>{class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=Re,this.activateEvents=new Pt,this.deactivateEvents=new Pt,this.attachEvents=new Pt,this.detachEvents=new Pt,this.parentContexts=K(Wf),this.location=K(ss),this.changeDetector=K(Bi),this.inputBinder=K(C1,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new fe(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new fe(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new fe(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new fe(4013,!1);this._activatedRoute=t;let i=this.location,c=t.snapshot.component,h=this.parentContexts.getOrCreateContext(this.name).children,g=new l1(t,h,i.injector);this.activated=i.createComponent(c,{index:i.length,injector:g,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275dir=Zt({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Pi]})}}return e})(),l1=class e{__ngOutletInjector(n){return new e(this.route,this.childContexts,n)}constructor(n,t,r){this.route=n,this.childContexts=t,this.parent=r}get(n,t){return n===pi?this.route:n===Wf?this.childContexts:this.parent.get(n,t)}},C1=new ve("");function y8(e,n,t){let r=uc(e,n._root,t?t._root:void 0);return new Vf(r,n)}function uc(e,n,t){if(t&&e.shouldReuseRoute(n.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=n.value;let i=C8(e,n,t);return new dr(r,i)}else{if(e.shouldAttach(n.value)){let o=e.retrieve(n.value);if(o!==null){let c=o.route;return c.value._futureSnapshot=n.value,c.children=n.children.map(h=>uc(e,h)),c}}let r=_8(n.value),i=n.children.map(o=>uc(e,o));return new dr(r,i)}}function C8(e,n,t){return n.children.map(r=>{for(let i of t.children)if(e.shouldReuseRoute(r.value,i.value.snapshot))return uc(e,r,i);return uc(e,r)})}function _8(e){return new pi(new En(e.url),new En(e.params),new En(e.queryParams),new En(e.fragment),new En(e.data),e.outlet,e.component,e)}var dc=class{constructor(n,t){this.redirectTo=n,this.navigationBehaviorOptions=t}},lI="ngNavigationCancelingError";function Hf(e,n){let{redirectTo:t,navigationBehaviorOptions:r}=oc(n)?{redirectTo:n,navigationBehaviorOptions:void 0}:n,i=cI(!1,fr.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function cI(e,n){let t=new Error(`NavigationCancelingError: ${e||""}`);return t[lI]=!0,t.cancellationCode=n,t}function w8(e){return uI(e)&&oc(e.url)}function uI(e){return!!e&&e[lI]}var v8=(e,n,t,r)=>Be(i=>(new c1(n,i.targetRouterState,i.currentRouterState,t,r).activate(e),i)),c1=class{constructor(n,t,r,i,o){this.routeReuseStrategy=n,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(n){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,n),Um(this.futureState.root),this.activateChildRoutes(t,r,n)}deactivateChildRoutes(n,t,r){let i=_a(t);n.children.forEach(o=>{let c=o.value.outlet;this.deactivateRoutes(o,i[c],r),delete i[c]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(n,t,r){let i=n.value,o=t?t.value:null;if(i===o)if(i.component){let c=r.getContext(i.outlet);c&&this.deactivateChildRoutes(n,t,c.children)}else this.deactivateChildRoutes(n,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(n,t){n.value.component&&this.routeReuseStrategy.shouldDetach(n.value.snapshot)?this.detachAndStoreRouteSubtree(n,t):this.deactivateRouteAndOutlet(n,t)}detachAndStoreRouteSubtree(n,t){let r=t.getContext(n.value.outlet),i=r&&n.value.component?r.children:t,o=_a(n);for(let c of Object.values(o))this.deactivateRouteAndItsChildren(c,i);if(r&&r.outlet){let c=r.outlet.detach(),h=r.children.onOutletDeactivated();this.routeReuseStrategy.store(n.value.snapshot,{componentRef:c,route:n,contexts:h})}}deactivateRouteAndOutlet(n,t){let r=t.getContext(n.value.outlet),i=r&&n.value.component?r.children:t,o=_a(n);for(let c of Object.values(o))this.deactivateRouteAndItsChildren(c,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(n,t,r){let i=_a(t);n.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new r1(o.value.snapshot))}),n.children.length&&this.forwardEvent(new t1(n.value.snapshot))}activateRoutes(n,t,r){let i=n.value,o=t?t.value:null;if(Um(i),i===o)if(i.component){let c=r.getOrCreateContext(i.outlet);this.activateChildRoutes(n,t,c.children)}else this.activateChildRoutes(n,t,r);else if(i.component){let c=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let h=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),c.children.onOutletReAttached(h.contexts),c.attachRef=h.componentRef,c.route=h.route.value,c.outlet&&c.outlet.attach(h.componentRef,h.route.value),Um(h.route.value),this.activateChildRoutes(n,null,c.children)}else c.attachRef=null,c.route=i,c.outlet&&c.outlet.activateWith(i,c.injector),this.activateChildRoutes(n,null,c.children)}else this.activateChildRoutes(n,null,r)}},zf=class{constructor(n){this.path=n,this.route=this.path[this.path.length-1]}},ba=class{constructor(n,t){this.component=n,this.route=t}};function b8(e,n,t){let r=e._root,i=n?n._root:null;return Jl(r,i,t,[r.value])}function x8(e){let n=e.routeConfig?e.routeConfig.canActivateChild:null;return!n||n.length===0?null:{node:e,guards:n}}function Sa(e,n){let t=Symbol(),r=n.get(e,t);return r===t?typeof e=="function"&&!uv(e)?e:n.get(e):r}function Jl(e,n,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=_a(n);return e.children.forEach(c=>{E8(c,o[c.value.outlet],t,r.concat([c.value]),i),delete o[c.value.outlet]}),Object.entries(o).forEach(([c,h])=>rc(h,t.getContext(c),i)),i}function E8(e,n,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=e.value,c=n?n.value:null,h=t?t.getContext(e.value.outlet):null;if(c&&o.routeConfig===c.routeConfig){let g=I8(c,o,o.routeConfig.runGuardsAndResolvers);g?i.canActivateChecks.push(new zf(r)):(o.data=c.data,o._resolvedData=c._resolvedData),o.component?Jl(e,n,h?h.children:null,r,i):Jl(e,n,t,r,i),g&&h&&h.outlet&&h.outlet.isActivated&&i.canDeactivateChecks.push(new ba(h.outlet.component,c))}else c&&rc(n,h,i),i.canActivateChecks.push(new zf(r)),o.component?Jl(e,null,h?h.children:null,r,i):Jl(e,null,t,r,i);return i}function I8(e,n,t){if(typeof t=="function")return t(e,n);switch(t){case"pathParamsChange":return!ds(e.url,n.url);case"pathParamsOrQueryParamsChange":return!ds(e.url,n.url)||!hi(e.queryParams,n.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!a1(e,n)||!hi(e.queryParams,n.queryParams);case"paramsChange":default:return!a1(e,n)}}function rc(e,n,t){let r=_a(e),i=e.value;Object.entries(r).forEach(([o,c])=>{i.component?n?rc(c,n.children.getContext(o),t):rc(c,null,t):rc(c,n,t)}),i.component?n&&n.outlet&&n.outlet.isActivated?t.canDeactivateChecks.push(new ba(n.outlet.component,i)):t.canDeactivateChecks.push(new ba(null,i)):t.canDeactivateChecks.push(new ba(null,i))}function mc(e){return typeof e=="function"}function S8(e){return typeof e=="boolean"}function D8(e){return e&&mc(e.canLoad)}function A8(e){return e&&mc(e.canActivate)}function T8(e){return e&&mc(e.canActivateChild)}function M8(e){return e&&mc(e.canDeactivate)}function N8(e){return e&&mc(e.canMatch)}function dI(e){return e instanceof Ei||e?.name==="EmptyError"}var Nf=Symbol("INITIAL_VALUE");function Ia(){return Cr(e=>rd(e.map(n=>n.pipe(Ii(1),sg(Nf)))).pipe(Be(n=>{for(let t of n)if(t!==!0){if(t===Nf)return Nf;if(t===!1||O8(t))return t}return!0}),mr(n=>n!==Nf),Ii(1)))}function O8(e){return oc(e)||e instanceof dc}function R8(e,n){return rn(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:c}}=t;return c.length===0&&o.length===0?Te(Le(ne({},t),{guardsResult:!0})):P8(c,r,i,e).pipe(rn(h=>h&&S8(h)?k8(r,o,e,n):Te(h)),Be(h=>Le(ne({},t),{guardsResult:h})))})}function P8(e,n,t,r){return vt(e).pipe(rn(i=>U8(i.component,i.route,t,n,r)),Fr(i=>i!==!0,!0))}function k8(e,n,t,r){return vt(n).pipe(qo(i=>$s(F8(i.route.parent,r),L8(i.route,r),V8(e,i.path,t),B8(e,i.route,t))),Fr(i=>i!==!0,!0))}function L8(e,n){return e!==null&&n&&n(new n1(e)),Te(!0)}function F8(e,n){return e!==null&&n&&n(new e1(e)),Te(!0)}function B8(e,n,t){let r=n.routeConfig?n.routeConfig.canActivate:null;if(!r||r.length===0)return Te(!0);let i=r.map(o=>id(()=>{let c=gc(n)??t,h=Sa(o,c),g=A8(h)?h.canActivate(n,e):li(c,()=>h(n,e));return Co(g).pipe(Fr())}));return Te(i).pipe(Ia())}function V8(e,n,t){let r=n[n.length-1],o=n.slice(0,n.length-1).reverse().map(c=>x8(c)).filter(c=>c!==null).map(c=>id(()=>{let h=c.guards.map(g=>{let m=gc(c.node)??t,v=Sa(g,m),b=T8(v)?v.canActivateChild(r,e):li(m,()=>v(r,e));return Co(b).pipe(Fr())});return Te(h).pipe(Ia())}));return Te(o).pipe(Ia())}function U8(e,n,t,r,i){let o=n&&n.routeConfig?n.routeConfig.canDeactivate:null;if(!o||o.length===0)return Te(!0);let c=o.map(h=>{let g=gc(n)??i,m=Sa(h,g),v=M8(m)?m.canDeactivate(e,n,t,r):li(g,()=>m(e,n,t,r));return Co(v).pipe(Fr())});return Te(c).pipe(Ia())}function j8(e,n,t,r){let i=n.canLoad;if(i===void 0||i.length===0)return Te(!0);let o=i.map(c=>{let h=Sa(c,e),g=D8(h)?h.canLoad(n,t):li(e,()=>h(n,t));return Co(g)});return Te(o).pipe(Ia(),fI(r))}function fI(e){return Xp(on(n=>{if(typeof n!="boolean")throw Hf(e,n)}),Be(n=>n===!0))}function H8(e,n,t,r){let i=n.canMatch;if(!i||i.length===0)return Te(!0);let o=i.map(c=>{let h=Sa(c,e),g=N8(h)?h.canMatch(n,t):li(e,()=>h(n,t));return Co(g)});return Te(o).pipe(Ia(),fI(r))}var fc=class{constructor(n){this.segmentGroup=n||null}},hc=class extends Error{constructor(n){super(),this.urlTree=n}};function Ca(e){return Gs(new fc(e))}function z8(e){return Gs(new fe(4e3,!1))}function W8(e){return Gs(cI(!1,fr.GuardRejected))}var u1=class{constructor(n,t){this.urlSerializer=n,this.urlTree=t}lineralizeSegments(n,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return Te(r);if(i.numberOfChildren>1||!i.children[Re])return z8(`${n.redirectTo}`);i=i.children[Re]}}applyRedirectCommands(n,t,r,i,o){if(typeof t!="string"){let h=t,{queryParams:g,fragment:m,routeConfig:v,url:b,outlet:I,params:A,data:R,title:j}=i,Y=li(o,()=>h({params:A,data:R,queryParams:g,fragment:m,routeConfig:v,url:b,outlet:I,title:j}));if(Y instanceof Hi)throw new hc(Y);t=Y}let c=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),n,r);if(t[0]==="/")throw new hc(c);return c}applyRedirectCreateUrlTree(n,t,r,i){let o=this.createSegmentGroup(n,t.root,r,i);return new Hi(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(n,t){let r={};return Object.entries(n).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let h=o.substring(1);r[i]=t[h]}else r[i]=o}),r}createSegmentGroup(n,t,r,i){let o=this.createSegments(n,t.segments,r,i),c={};return Object.entries(t.children).forEach(([h,g])=>{c[h]=this.createSegmentGroup(n,g,r,i)}),new ft(o,c)}createSegments(n,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(n,o,i):this.findOrReturn(o,r))}findPosParam(n,t,r){let i=r[t.path.substring(1)];if(!i)throw new fe(4001,!1);return i}findOrReturn(n,t){let r=0;for(let i of t){if(i.path===n.path)return t.splice(r),i;r++}return n}},d1={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function G8(e,n,t,r,i){let o=hI(e,n,t);return o.matched?(r=p8(n,r),H8(r,n,t,i).pipe(Be(c=>c===!0?o:ne({},d1)))):Te(o)}function hI(e,n,t){if(n.path==="**")return $8(t);if(n.path==="")return n.pathMatch==="full"&&(e.hasChildren()||t.length>0)?ne({},d1):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(n.matcher||H4)(t,e,n);if(!i)return ne({},d1);let o={};Object.entries(i.posParams??{}).forEach(([h,g])=>{o[h]=g.path});let c=i.consumed.length>0?ne(ne({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:c,positionalParamSegments:i.posParams??{}}}function $8(e){return{matched:!0,parameters:e.length>0?$E(e).parameters:{},consumedSegments:e,remainingSegments:[],positionalParamSegments:{}}}function HE(e,n,t,r){return t.length>0&&X8(e,t,r)?{segmentGroup:new ft(n,Y8(r,new ft(t,e.children))),slicedSegments:[]}:t.length===0&&Z8(e,t,r)?{segmentGroup:new ft(e.segments,q8(e,t,r,e.children)),slicedSegments:t}:{segmentGroup:new ft(e.segments,e.children),slicedSegments:t}}function q8(e,n,t,r){let i={};for(let o of t)if(Gf(e,n,o)&&!r[Zr(o)]){let c=new ft([],{});i[Zr(o)]=c}return ne(ne({},r),i)}function Y8(e,n){let t={};t[Re]=n;for(let r of e)if(r.path===""&&Zr(r)!==Re){let i=new ft([],{});t[Zr(r)]=i}return t}function X8(e,n,t){return t.some(r=>Gf(e,n,r)&&Zr(r)!==Re)}function Z8(e,n,t){return t.some(r=>Gf(e,n,r))}function Gf(e,n,t){return(e.hasChildren()||n.length>0)&&t.pathMatch==="full"?!1:t.path===""}function Q8(e,n,t){return n.length===0&&!e.children[t]}var f1=class{};function K8(e,n,t,r,i,o,c="emptyOnly"){return new h1(e,n,t,r,i,c,o).recognize()}var J8=31,h1=class{constructor(n,t,r,i,o,c,h){this.injector=n,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=c,this.urlSerializer=h,this.applyRedirects=new u1(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(n){return new fe(4002,`'${n.segmentGroup}'`)}recognize(){let n=HE(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(n).pipe(Be(({children:t,rootSnapshot:r})=>{let i=new dr(r,t),o=new jf("",i),c=a8(r,[],this.urlTree.queryParams,this.urlTree.fragment);return c.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(c),{state:o,tree:c}}))}match(n){let t=new va([],Object.freeze({}),Object.freeze(ne({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),Re,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,n,Re,t).pipe(Be(r=>({children:r,rootSnapshot:t})),yr(r=>{if(r instanceof hc)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof fc?this.noMatchError(r):r}))}processSegmentGroup(n,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(n,t,r,o):this.processSegment(n,t,r,r.segments,i,!0,o).pipe(Be(c=>c instanceof dr?[c]:[]))}processChildren(n,t,r,i){let o=[];for(let c of Object.keys(r.children))c==="primary"?o.unshift(c):o.push(c);return vt(o).pipe(qo(c=>{let h=r.children[c],g=g8(t,c);return this.processSegmentGroup(n,g,h,c,i)}),og((c,h)=>(c.push(...h),c)),so(null),ig(),rn(c=>{if(c===null)return Ca(r);let h=pI(c);return eL(h),Te(h)}))}processSegment(n,t,r,i,o,c,h){return vt(t).pipe(qo(g=>this.processSegmentAgainstRoute(g._injector??n,t,g,r,i,o,c,h).pipe(yr(m=>{if(m instanceof fc)return Te(null);throw m}))),Fr(g=>!!g),yr(g=>{if(dI(g))return Q8(r,i,o)?Te(new f1):Ca(r);throw g}))}processSegmentAgainstRoute(n,t,r,i,o,c,h,g){return Zr(r)!==c&&(c===Re||!Gf(i,o,r))?Ca(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(n,i,r,o,c,g):this.allowRedirects&&h?this.expandSegmentAgainstRouteUsingRedirect(n,i,t,r,o,c,g):Ca(i)}expandSegmentAgainstRouteUsingRedirect(n,t,r,i,o,c,h){let{matched:g,parameters:m,consumedSegments:v,positionalParamSegments:b,remainingSegments:I}=hI(t,i,o);if(!g)return Ca(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>J8&&(this.allowRedirects=!1));let A=new va(o,m,Object.freeze(ne({},this.urlTree.queryParams)),this.urlTree.fragment,zE(i),Zr(i),i.component??i._loadedComponent??null,i,WE(i)),R=Uf(A,h,this.paramsInheritanceStrategy);A.params=Object.freeze(R.params),A.data=Object.freeze(R.data);let j=this.applyRedirects.applyRedirectCommands(v,i.redirectTo,b,A,n);return this.applyRedirects.lineralizeSegments(i,j).pipe(rn(Y=>this.processSegment(n,r,t,Y.concat(I),c,!1,h)))}matchSegmentAgainstRoute(n,t,r,i,o,c){let h=G8(t,r,i,n,this.urlSerializer);return r.path==="**"&&(t.children={}),h.pipe(Cr(g=>g.matched?(n=r._injector??n,this.getChildConfig(n,r,i).pipe(Cr(({routes:m})=>{let v=r._loadedInjector??n,{parameters:b,consumedSegments:I,remainingSegments:A}=g,R=new va(I,b,Object.freeze(ne({},this.urlTree.queryParams)),this.urlTree.fragment,zE(r),Zr(r),r.component??r._loadedComponent??null,r,WE(r)),j=Uf(R,c,this.paramsInheritanceStrategy);R.params=Object.freeze(j.params),R.data=Object.freeze(j.data);let{segmentGroup:Y,slicedSegments:G}=HE(t,I,A,m);if(G.length===0&&Y.hasChildren())return this.processChildren(v,m,Y,R).pipe(Be(Xe=>new dr(R,Xe)));if(m.length===0&&G.length===0)return Te(new dr(R,[]));let ce=Zr(r)===o;return this.processSegment(v,m,Y,G,ce?Re:o,!0,R).pipe(Be(Xe=>new dr(R,Xe instanceof dr?[Xe]:[])))}))):Ca(t)))}getChildConfig(n,t,r){return t.children?Te({routes:t.children,injector:n}):t.loadChildren?t._loadedRoutes!==void 0?Te({routes:t._loadedRoutes,injector:t._loadedInjector}):j8(n,t,r,this.urlSerializer).pipe(rn(i=>i?this.configLoader.loadChildren(n,t).pipe(on(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):W8(t))):Te({routes:[],injector:n})}};function eL(e){e.sort((n,t)=>n.value.outlet===Re?-1:t.value.outlet===Re?1:n.value.outlet.localeCompare(t.value.outlet))}function tL(e){let n=e.value.routeConfig;return n&&n.path===""}function pI(e){let n=[],t=new Set;for(let r of e){if(!tL(r)){n.push(r);continue}let i=n.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):n.push(r)}for(let r of t){let i=pI(r.children);n.push(new dr(r.value,i))}return n.filter(r=>!t.has(r))}function zE(e){return e.data||{}}function WE(e){return e.resolve||{}}function nL(e,n,t,r,i,o){return rn(c=>K8(e,n,t,r,c.extractedUrl,i,o).pipe(Be(({state:h,tree:g})=>Le(ne({},c),{targetSnapshot:h,urlAfterRedirects:g}))))}function rL(e,n){return rn(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Te(t);let o=new Set(i.map(g=>g.route)),c=new Set;for(let g of o)if(!c.has(g))for(let m of gI(g))c.add(m);let h=0;return vt(c).pipe(qo(g=>o.has(g)?iL(g,r,e,n):(g.data=Uf(g,g.parent,e).resolve,Te(void 0))),on(()=>h++),Ys(1),rn(g=>h===c.size?Te(t):sr))})}function gI(e){let n=e.children.map(t=>gI(t)).flat();return[e,...n]}function iL(e,n,t,r){let i=e.routeConfig,o=e._resolve;return i?.title!==void 0&&!aI(i)&&(o[pc]=i.title),oL(o,e,n,r).pipe(Be(c=>(e._resolvedData=c,e.data=Uf(e,e.parent,t).resolve,null)))}function oL(e,n,t,r){let i=zm(e);if(i.length===0)return Te({});let o={};return vt(i).pipe(rn(c=>sL(e[c],n,t,r).pipe(Fr(),on(h=>{if(h instanceof dc)throw Hf(new ic,h);o[c]=h}))),Ys(1),rg(o),yr(c=>dI(c)?sr:Gs(c)))}function sL(e,n,t,r){let i=gc(n)??r,o=Sa(e,i),c=o.resolve?o.resolve(n,t):li(i,()=>o(n,t));return Co(c)}function jm(e){return Cr(n=>{let t=e(n);return t?vt(t).pipe(Be(()=>n)):Te(n)})}var mI=(()=>{class e{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===Re);return r}getResolvedTitleForRoute(t){return t.data[pc]}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=de({token:e,factory:()=>K(aL),providedIn:"root"})}}return e})(),aL=(()=>{class e extends mI{constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||e)(He(kE))}}static{this.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),_1=new ve("",{providedIn:"root",factory:()=>({})}),lL=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275cmp=ie({type:e,selectors:[["ng-component"]],standalone:!0,features:[oe],decls:1,vars:0,template:function(r,i){r&1&&se(0,"router-outlet")},dependencies:[y1],encapsulation:2})}}return e})();function w1(e){let n=e.children&&e.children.map(w1),t=n?Le(ne({},e),{children:n}):ne({},e);return!t.component&&!t.loadComponent&&(n||t.loadChildren)&&t.outlet&&t.outlet!==Re&&(t.component=lL),t}var v1=new ve(""),cL=(()=>{class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=K(bm)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Te(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=Co(t.loadComponent()).pipe(Be(yI),on(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),qs(()=>{this.componentLoaders.delete(t)})),i=new zs(r,()=>new nn).pipe(Hs());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Te({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=uL(r,this.compiler,t,this.onLoadEndListener).pipe(qs(()=>{this.childrenLoaders.delete(r)})),c=new zs(o,()=>new nn).pipe(Hs());return this.childrenLoaders.set(r,c),c}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function uL(e,n,t,r){return Co(e.loadChildren()).pipe(Be(yI),rn(i=>i instanceof Ol||Array.isArray(i)?Te(i):vt(n.compileModuleAsync(i))),Be(i=>{r&&r(e);let o,c,h=!1;return Array.isArray(i)?(c=i,h=!0):(o=i.create(t).injector,c=o.get(v1,[],{optional:!0,self:!0}).flat()),{routes:c.map(w1),injector:o}}))}function dL(e){return e&&typeof e=="object"&&"default"in e}function yI(e){return dL(e)?e.default:e}var b1=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=de({token:e,factory:()=>K(fL),providedIn:"root"})}}return e})(),fL=(()=>{class e{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),hL=new ve("");var pL=new ve(""),gL=(()=>{class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new nn,this.transitionAbortSubject=new nn,this.configLoader=K(cL),this.environmentInjector=K(vr),this.urlSerializer=K(g1),this.rootContexts=K(Wf),this.location=K(ql),this.inputBindingEnabled=K(C1,{optional:!0})!==null,this.titleStrategy=K(mI),this.options=K(_1,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=K(b1),this.createViewTransition=K(hL,{optional:!0}),this.navigationErrorHandler=K(pL,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Te(void 0),this.rootComponentType=null;let t=i=>this.events.next(new Km(i)),r=i=>this.events.next(new Jm(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(Le(ne(ne({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,i){return this.transitions=new En({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:nc,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(mr(o=>o.id!==0),Be(o=>Le(ne({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Cr(o=>{let c=!1,h=!1;return Te(o).pipe(Cr(g=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",fr.SupersededByNewNavigation),sr;this.currentTransition=o,this.currentNavigation={id:g.id,initialUrl:g.rawUrl,extractedUrl:g.extractedUrl,targetBrowserUrl:typeof g.extras.browserUrl=="string"?this.urlSerializer.parse(g.extras.browserUrl):g.extras.browserUrl,trigger:g.source,extras:g.extras,previousNavigation:this.lastSuccessfulNavigation?Le(ne({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let m=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),v=g.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!m&&v!=="reload"){let b="";return this.events.next(new hs(g.id,this.urlSerializer.serialize(g.rawUrl),b,qm.IgnoredSameUrlNavigation)),g.resolve(!1),sr}if(this.urlHandlingStrategy.shouldProcessUrl(g.rawUrl))return Te(g).pipe(Cr(b=>{let I=this.transitions?.getValue();return this.events.next(new ac(b.id,this.urlSerializer.serialize(b.extractedUrl),b.source,b.restoredState)),I!==this.transitions?.getValue()?sr:Promise.resolve(b)}),nL(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),on(b=>{o.targetSnapshot=b.targetSnapshot,o.urlAfterRedirects=b.urlAfterRedirects,this.currentNavigation=Le(ne({},this.currentNavigation),{finalUrl:b.urlAfterRedirects});let I=new Ff(b.id,this.urlSerializer.serialize(b.extractedUrl),this.urlSerializer.serialize(b.urlAfterRedirects),b.targetSnapshot);this.events.next(I)}));if(m&&this.urlHandlingStrategy.shouldProcessUrl(g.currentRawUrl)){let{id:b,extractedUrl:I,source:A,restoredState:R,extras:j}=g,Y=new ac(b,this.urlSerializer.serialize(I),A,R);this.events.next(Y);let G=oI(this.rootComponentType).snapshot;return this.currentTransition=o=Le(ne({},g),{targetSnapshot:G,urlAfterRedirects:I,extras:Le(ne({},j),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=I,Te(o)}else{let b="";return this.events.next(new hs(g.id,this.urlSerializer.serialize(g.extractedUrl),b,qm.IgnoredByUrlHandlingStrategy)),g.resolve(!1),sr}}),on(g=>{let m=new Ym(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(m)}),Be(g=>(this.currentTransition=o=Le(ne({},g),{guards:b8(g.targetSnapshot,g.currentSnapshot,this.rootContexts)}),o)),R8(this.environmentInjector,g=>this.events.next(g)),on(g=>{if(o.guardsResult=g.guardsResult,g.guardsResult&&typeof g.guardsResult!="boolean")throw Hf(this.urlSerializer,g.guardsResult);let m=new Xm(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot,!!g.guardsResult);this.events.next(m)}),mr(g=>g.guardsResult?!0:(this.cancelNavigationTransition(g,"",fr.GuardRejected),!1)),jm(g=>{if(g.guards.canActivateChecks.length)return Te(g).pipe(on(m=>{let v=new Zm(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(v)}),Cr(m=>{let v=!1;return Te(m).pipe(rL(this.paramsInheritanceStrategy,this.environmentInjector),on({next:()=>v=!0,complete:()=>{v||this.cancelNavigationTransition(m,"",fr.NoDataFromResolver)}}))}),on(m=>{let v=new Qm(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(v)}))}),jm(g=>{let m=v=>{let b=[];v.routeConfig?.loadComponent&&!v.routeConfig._loadedComponent&&b.push(this.configLoader.loadComponent(v.routeConfig).pipe(on(I=>{v.component=I}),Be(()=>{})));for(let I of v.children)b.push(...m(I));return b};return rd(m(g.targetSnapshot.root)).pipe(so(null),Ii(1))}),jm(()=>this.afterPreactivation()),Cr(()=>{let{currentSnapshot:g,targetSnapshot:m}=o,v=this.createViewTransition?.(this.environmentInjector,g.root,m.root);return v?vt(v).pipe(Be(()=>o)):Te(o)}),Be(g=>{let m=y8(t.routeReuseStrategy,g.targetSnapshot,g.currentRouterState);return this.currentTransition=o=Le(ne({},g),{targetRouterState:m}),this.currentNavigation.targetRouterState=m,o}),on(()=>{this.events.next(new cc)}),v8(this.rootContexts,t.routeReuseStrategy,g=>this.events.next(g),this.inputBindingEnabled),Ii(1),on({next:g=>{c=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new fs(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects))),this.titleStrategy?.updateTitle(g.targetRouterState.snapshot),g.resolve(!0)},complete:()=>{c=!0}}),ag(this.transitionAbortSubject.pipe(on(g=>{throw g}))),qs(()=>{!c&&!h&&this.cancelNavigationTransition(o,"",fr.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),yr(g=>{if(h=!0,uI(g))this.events.next(new ji(o.id,this.urlSerializer.serialize(o.extractedUrl),g.message,g.cancellationCode)),w8(g)?this.events.next(new Ea(g.url,g.navigationBehaviorOptions)):o.resolve(!1);else{let m=new lc(o.id,this.urlSerializer.serialize(o.extractedUrl),g,o.targetSnapshot??void 0);try{let v=li(this.environmentInjector,()=>this.navigationErrorHandler?.(m));if(v instanceof dc){let{message:b,cancellationCode:I}=Hf(this.urlSerializer,v);this.events.next(new ji(o.id,this.urlSerializer.serialize(o.extractedUrl),b,I)),this.events.next(new Ea(v.redirectTo,v.navigationBehaviorOptions))}else{this.events.next(m);let b=t.errorHandler(g);o.resolve(!!b)}}catch(v){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(v)}}return sr}))}))}cancelNavigationTransition(t,r,i){let o=new ji(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function mL(e){return e!==nc}var yL=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=de({token:e,factory:()=>K(CL),providedIn:"root"})}}return e})(),p1=class{shouldDetach(n){return!1}store(n,t){}shouldAttach(n){return!1}retrieve(n){return null}shouldReuseRoute(n,t){return n.routeConfig===t.routeConfig}},CL=(()=>{class e extends p1{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=mo(e)))(i||e)}})()}static{this.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),CI=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=de({token:e,factory:()=>K(_L),providedIn:"root"})}}return e})(),_L=(()=>{class e extends CI{constructor(){super(...arguments),this.location=K(ql),this.urlSerializer=K(g1),this.options=K(_1,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=K(b1),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Hi,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=oI(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof ac)this.stateMemento=this.createStateMemento();else if(t instanceof hs)this.rawUrlTree=r.initialUrl;else if(t instanceof Ff){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else t instanceof cc?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof ji&&(t.code===fr.GuardRejected||t.code===fr.NoDataFromResolver)?this.restoreHistory(r):t instanceof lc?this.restoreHistory(r,!0):t instanceof fs&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let i=t instanceof Hi?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let o=this.browserPageId,c=ne(ne({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(i,"",c)}else{let o=ne(ne({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",o)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.currentUrlTree===t.finalUrl&&o===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=mo(e)))(i||e)}})()}static{this.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),ec=function(e){return e[e.COMPLETE=0]="COMPLETE",e[e.FAILED=1]="FAILED",e[e.REDIRECTING=2]="REDIRECTING",e}(ec||{});function wL(e,n){e.events.pipe(mr(t=>t instanceof fs||t instanceof ji||t instanceof lc||t instanceof hs),Be(t=>t instanceof fs||t instanceof hs?ec.COMPLETE:(t instanceof ji?t.code===fr.Redirect||t.code===fr.SupersededByNewNavigation:!1)?ec.REDIRECTING:ec.FAILED),mr(t=>t!==ec.REDIRECTING),Ii(1)).subscribe(()=>{n()})}function vL(e){throw e}var bL={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},xL={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},gi=(()=>{class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=K(yf),this.stateManager=K(CI),this.options=K(_1,{optional:!0})||{},this.pendingTasks=K(os),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=K(gL),this.urlSerializer=K(g1),this.location=K(ql),this.urlHandlingStrategy=K(b1),this._events=new nn,this.errorHandler=this.options.errorHandler||vL,this.navigated=!1,this.routeReuseStrategy=K(yL),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=K(v1,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!K(C1,{optional:!0}),this.eventsSubscription=new Bt,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof ji&&r.code!==fr.Redirect&&r.code!==fr.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof fs)this.navigated=!0;else if(r instanceof Ea){let c=r.navigationBehaviorOptions,h=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),g=ne({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||mL(i.source)},c);this.scheduleNavigation(h,nc,null,g,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}IL(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),nc,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},c=i?.navigationId?i:null;if(i){let g=ne({},i);delete g.navigationId,delete g.\u0275routerPageId,Object.keys(g).length!==0&&(o.state=g)}let h=this.parseUrl(t);this.scheduleNavigation(h,r,c,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(w1),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:c,queryParamsHandling:h,preserveFragment:g}=r,m=g?this.currentUrlTree.fragment:c,v=null;switch(h??this.options.defaultQueryParamsHandling){case"merge":v=ne(ne({},this.currentUrlTree.queryParams),o);break;case"preserve":v=this.currentUrlTree.queryParams;break;default:v=o||null}v!==null&&(v=this.removeEmptyProps(v));let b;try{let I=i?i.snapshot:this.routerState.snapshot.root;b=tI(I)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),b=this.currentUrlTree.root}return nI(b,t,v,m??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=oc(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,nc,null,r)}navigate(t,r={skipLocationChange:!1}){return EL(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=ne({},bL):r===!1?i=ne({},xL):i=r,oc(t))return BE(this.currentUrlTree,t,i);let o=this.parseUrl(t);return BE(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,c){if(this.disposed)return Promise.resolve(!1);let h,g,m;c?(h=c.resolve,g=c.reject,m=c.promise):m=new Promise((b,I)=>{h=b,g=I});let v=this.pendingTasks.add();return wL(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(v))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:h,reject:g,promise:m,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),m.catch(b=>Promise.reject(b))}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function EL(e){for(let n=0;n<e.length;n++)if(e[n]==null)throw new fe(4008,!1)}function IL(e){return!(e instanceof cc)&&!(e instanceof Ea)}var SL=new ve("");function _I(e,...n){return da([{provide:v1,multi:!0,useValue:e},[],{provide:pi,useFactory:DL,deps:[gi]},{provide:ya,multi:!0,useFactory:AL},n.map(t=>t.\u0275providers)])}function DL(e){return e.routerState.root}function AL(){let e=K(si);return n=>{let t=e.get(fi);if(n!==t.components[0])return;let r=e.get(gi),i=e.get(TL);e.get(ML)===1&&r.initialNavigation(),e.get(NL,null,je.Optional)?.setUpPreloading(),e.get(SL,null,je.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var TL=new ve("",{factory:()=>new nn}),ML=new ve("",{providedIn:"root",factory:()=>1});var NL=new ve("");var _o=(()=>{class e{messageSubject=new Go(1);message$=this.messageSubject.asObservable();askUser(t,r,i){this.messageSubject.next({message:t,yesHandler:r,noHandler:i})}static \u0275fac=function(r){return new(r||e)};static \u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function OL(e,n){if(e&1){let t=Vt();T(0,"div",1)(1,"div",2)(2,"p"),P(3),N(),T(4,"div",3)(5,"button",4),$("click",function(){Nt(t);let i=Qe();return Ot(i.onYes())}),P(6,"Tak"),N(),T(7,"button",4),$("click",function(){Nt(t);let i=Qe();return Ot(i.onNo())}),P(8,"Nie"),N()()()()}if(e&2){let t=Qe();Z(3),Gt(t.message)}}var wI=(()=>{class e{messagesService;message=null;yesHandler=null;noHandler=null;constructor(t){this.messagesService=t,this.messagesService.message$.subscribe(r=>{this.message=r.message,this.yesHandler=r.yesHandler,this.noHandler=r.noHandler||null})}onYes(){this.yesHandler&&this.yesHandler(),this.clearDialog()}onNo(){this.noHandler&&this.noHandler(),this.clearDialog()}clearDialog(){this.message=null,this.yesHandler=null,this.noHandler=null}static \u0275fac=function(r){return new(r||e)(W(_o))};static \u0275cmp=ie({type:e,selectors:[["app-confirm-dialog"]],standalone:!0,features:[oe],decls:1,vars:1,consts:[["class","overlay",4,"ngIf"],[1,"overlay"],[1,"acceptbox"],[1,"btns"],[3,"click"]],template:function(r,i){r&1&&Wt(0,OL,9,1,"div",0),r&2&&It("ngIf",i.message)},dependencies:[Xr,bf],styles:[".overlay[_ngcontent-%COMP%]{width:100vw;height:100vh;background:#00000059;-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px);position:fixed;z-index:9999;display:flex;flex-direction:column;justify-content:center;align-items:center}.acceptbox[_ngcontent-%COMP%]{height:200px;width:calc(100% - 64px);background:#fff;border-radius:16px;border:2px solid #000000;color:#000;padding:24px;display:flex;flex-direction:column;justify-content:space-around;align-items:center}p[_ngcontent-%COMP%]{font-weight:700;font-size:120%}.btns[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:space-around;align-items:center;align-content:center}button[_ngcontent-%COMP%]{width:calc(50% - 16px);background:#000;padding:16px;font-size:1.1em;color:#fff;font-weight:600;letter-spacing:2px;border:none;transition:background .5s ease;border-radius:16px;cursor:pointer;margin-top:8px}button[_ngcontent-%COMP%]:hover{background:#333}"]})}return e})();var wo=(()=>{class e{messageSubject=new Go(1);message$=this.messageSubject.asObservable();askUser(t,r){this.messageSubject.next({message:t,yesHandler:r})}static \u0275fac=function(r){return new(r||e)};static \u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function RL(e,n){if(e&1){let t=Vt();T(0,"div")(1,"div",1)(2,"p"),P(3),N(),T(4,"button",2),$("click",function(){Nt(t);let i=Qe();return Ot(i.onYes())}),P(5,"Ok"),N()()()}if(e&2){let t=Qe();Z(3),Gt(t.message)}}var vI=(()=>{class e{messagesokService;message=null;yesHandler=null;noHandler=null;constructor(t){this.messagesokService=t,this.messagesokService.message$.subscribe(r=>{this.message=r.message,this.yesHandler=r.yesHandler||null})}onYes(){this.yesHandler&&this.yesHandler(),this.clearDialog()}clearDialog(){this.message=null,this.yesHandler=null,this.noHandler=null}static \u0275fac=function(r){return new(r||e)(W(wo))};static \u0275cmp=ie({type:e,selectors:[["app-ok-dialog"]],standalone:!0,features:[oe],decls:1,vars:1,consts:[[4,"ngIf"],[1,"acceptbox"],[3,"click"]],template:function(r,i){r&1&&Wt(0,RL,6,1,"div",0),r&2&&It("ngIf",i.message)},dependencies:[Xr,bf],styles:["div[_ngcontent-%COMP%]{width:100vw;height:100vh;background:#00000059;-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px);position:fixed;z-index:9999;display:flex;flex-direction:column;justify-content:center;align-items:center}.acceptbox[_ngcontent-%COMP%]{height:200px;width:calc(100% - 64px);background:#fff;border-radius:16px;border:2px solid #000000;color:#000;padding:24px;display:flex;flex-direction:column;justify-content:space-around;align-items:center}p[_ngcontent-%COMP%]{font-weight:700;font-size:120%}button[_ngcontent-%COMP%]{width:100%;background:#000;padding:16px;font-size:1.1em;color:#fff;font-weight:600;letter-spacing:2px;border:none;transition:background .5s ease;border-radius:16px;cursor:pointer;margin-top:8px}button[_ngcontent-%COMP%]:hover{background:#333}"]})}return e})();var bI=(()=>{class e{constructor(){}title="Tablefi";static \u0275fac=function(r){return new(r||e)};static \u0275cmp=ie({type:e,selectors:[["app-root"]],standalone:!0,features:[oe],decls:4,vars:0,consts:[["rel","stylesheet","href",qb`https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200&icon_names=arrow_back`]],template:function(r,i){r&1&&se(0,"link",0)(1,"app-confirm-dialog")(2,"app-ok-dialog")(3,"router-outlet")},dependencies:[y1,Xr,wI,vI],styles:['@font-face{font-family:Lexend;font-style:normal;font-weight:100 900;font-display:swap;src:url(https://fonts.gstatic.com/s/lexend/v23/wlpwgwvFAVdoq2_v9KQU4Wc.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Lexend;font-style:normal;font-weight:100 900;font-display:swap;src:url(https://fonts.gstatic.com/s/lexend/v23/wlpwgwvFAVdoq2_v9aQU4Wc.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Lexend;font-style:normal;font-weight:100 900;font-display:swap;src:url(https://fonts.gstatic.com/s/lexend/v23/wlpwgwvFAVdoq2_v-6QU.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}router-outlet[_ngcontent-%COMP%]{font-family:Lexend,sans-serif;font-optical-sizing:auto;height:100%;width:100%}']})}return e})();var OI=(()=>{class e{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(r){return new(r||e)(W($r),W(ur))}}static{this.\u0275dir=Zt({type:e})}}return e})(),E1=(()=>{class e extends OI{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=mo(e)))(i||e)}})()}static{this.\u0275dir=Zt({type:e,features:[qr]})}}return e})(),nh=new ve("");var PL={provide:nh,useExisting:Ni(()=>Qt),multi:!0};function kL(){let e=Ui()?Ui().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}var LL=new ve(""),Qt=(()=>{class e extends OI{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!kL())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(r){return new(r||e)(W($r),W(ur),W(LL,8))}}static{this.\u0275dir=Zt({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&$("input",function(c){return i._handleInput(c.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(c){return i._compositionEnd(c.target.value)})},features:[as([PL]),qr]})}}return e})();function FL(e){return e==null||(typeof e=="string"||Array.isArray(e))&&e.length===0}var I1=new ve(""),RI=new ve("");function BL(e){return FL(e.value)?{required:!0}:null}function xI(e){return null}function PI(e){return e!=null}function kI(e){return ls(e)?vt(e):e}function LI(e){let n={};return e.forEach(t=>{n=t!=null?ne(ne({},n),t):n}),Object.keys(n).length===0?null:n}function FI(e,n){return n.map(t=>t(e))}function VL(e){return!e.validate}function BI(e){return e.map(n=>VL(n)?n:t=>n.validate(t))}function UL(e){if(!e)return null;let n=e.filter(PI);return n.length==0?null:function(t){return LI(FI(t,n))}}function S1(e){return e!=null?UL(BI(e)):null}function jL(e){if(!e)return null;let n=e.filter(PI);return n.length==0?null:function(t){let r=FI(t,n).map(kI);return tg(r).pipe(Be(LI))}}function D1(e){return e!=null?jL(BI(e)):null}function EI(e,n){return e===null?[n]:Array.isArray(e)?[...e,n]:[e,n]}function HL(e){return e._rawValidators}function zL(e){return e._rawAsyncValidators}function x1(e){return e?Array.isArray(e)?e:[e]:[]}function Zf(e,n){return Array.isArray(e)?e.includes(n):e===n}function II(e,n){let t=x1(n);return x1(e).forEach(i=>{Zf(t,i)||t.push(i)}),t}function SI(e,n){return x1(n).filter(t=>!Zf(e,t))}var Qf=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(n){this._rawValidators=n||[],this._composedValidatorFn=S1(this._rawValidators)}_setAsyncValidators(n){this._rawAsyncValidators=n||[],this._composedAsyncValidatorFn=D1(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(n){this._onDestroyCallbacks.push(n)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(n=>n()),this._onDestroyCallbacks=[]}reset(n=void 0){this.control&&this.control.reset(n)}hasError(n,t){return this.control?this.control.hasError(n,t):!1}getError(n,t){return this.control?this.control.getError(n,t):null}},Ta=class extends Qf{get formDirective(){return null}get path(){return null}},bc=class extends Qf{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Kf=class{constructor(n){this._cd=n}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},WL={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},mq=Le(ne({},WL),{"[class.ng-submitted]":"isSubmitted"}),Cn=(()=>{class e extends Kf{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||e)(W(bc,2))}}static{this.\u0275dir=Zt({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Yr("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[qr]})}}return e})(),Jn=(()=>{class e extends Kf{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||e)(W(Ta,10))}}static{this.\u0275dir=Zt({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&Yr("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[qr]})}}return e})();var yc="VALID",Xf="INVALID",Da="PENDING",Cc="DISABLED",Ma=class{},Jf=class extends Ma{constructor(n,t){super(),this.value=n,this.source=t}},wc=class extends Ma{constructor(n,t){super(),this.pristine=n,this.source=t}},vc=class extends Ma{constructor(n,t){super(),this.touched=n,this.source=t}},Aa=class extends Ma{constructor(n,t){super(),this.status=n,this.source=t}};function VI(e){return(rh(e)?e.validators:e)||null}function GL(e){return Array.isArray(e)?S1(e):e||null}function UI(e,n){return(rh(n)?n.asyncValidators:e)||null}function $L(e){return Array.isArray(e)?D1(e):e||null}function rh(e){return e!=null&&!Array.isArray(e)&&typeof e=="object"}function qL(e,n,t){let r=e.controls;if(!(n?Object.keys(r):r).length)throw new fe(1e3,"");if(!r[t])throw new fe(1001,"")}function YL(e,n,t){e._forEachChild((r,i)=>{if(t[i]===void 0)throw new fe(1002,"")})}var eh=class{constructor(n,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=$l(()=>this.statusReactive()),this.statusReactive=jl(void 0),this._pristine=$l(()=>this.pristineReactive()),this.pristineReactive=jl(!0),this._touched=$l(()=>this.touchedReactive()),this.touchedReactive=jl(!1),this._events=new nn,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(n),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(n){this._rawValidators=this._composedValidatorFn=n}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(n){this._rawAsyncValidators=this._composedAsyncValidatorFn=n}get parent(){return this._parent}get status(){return Vi(this.statusReactive)}set status(n){Vi(()=>this.statusReactive.set(n))}get valid(){return this.status===yc}get invalid(){return this.status===Xf}get pending(){return this.status==Da}get disabled(){return this.status===Cc}get enabled(){return this.status!==Cc}get pristine(){return Vi(this.pristineReactive)}set pristine(n){Vi(()=>this.pristineReactive.set(n))}get dirty(){return!this.pristine}get touched(){return Vi(this.touchedReactive)}set touched(n){Vi(()=>this.touchedReactive.set(n))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(n){this._assignValidators(n)}setAsyncValidators(n){this._assignAsyncValidators(n)}addValidators(n){this.setValidators(II(n,this._rawValidators))}addAsyncValidators(n){this.setAsyncValidators(II(n,this._rawAsyncValidators))}removeValidators(n){this.setValidators(SI(n,this._rawValidators))}removeAsyncValidators(n){this.setAsyncValidators(SI(n,this._rawAsyncValidators))}hasValidator(n){return Zf(this._rawValidators,n)}hasAsyncValidator(n){return Zf(this._rawAsyncValidators,n)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(n={}){let t=this.touched===!1;this.touched=!0;let r=n.sourceControl??this;this._parent&&!n.onlySelf&&this._parent.markAsTouched(Le(ne({},n),{sourceControl:r})),t&&n.emitEvent!==!1&&this._events.next(new vc(!0,r))}markAllAsTouched(n={}){this.markAsTouched({onlySelf:!0,emitEvent:n.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(n))}markAsUntouched(n={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=n.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:n.emitEvent,sourceControl:r})}),this._parent&&!n.onlySelf&&this._parent._updateTouched(n,r),t&&n.emitEvent!==!1&&this._events.next(new vc(!1,r))}markAsDirty(n={}){let t=this.pristine===!0;this.pristine=!1;let r=n.sourceControl??this;this._parent&&!n.onlySelf&&this._parent.markAsDirty(Le(ne({},n),{sourceControl:r})),t&&n.emitEvent!==!1&&this._events.next(new wc(!1,r))}markAsPristine(n={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=n.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:n.emitEvent})}),this._parent&&!n.onlySelf&&this._parent._updatePristine(n,r),t&&n.emitEvent!==!1&&this._events.next(new wc(!0,r))}markAsPending(n={}){this.status=Da;let t=n.sourceControl??this;n.emitEvent!==!1&&(this._events.next(new Aa(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!n.onlySelf&&this._parent.markAsPending(Le(ne({},n),{sourceControl:t}))}disable(n={}){let t=this._parentMarkedDirty(n.onlySelf);this.status=Cc,this.errors=null,this._forEachChild(i=>{i.disable(Le(ne({},n),{onlySelf:!0}))}),this._updateValue();let r=n.sourceControl??this;n.emitEvent!==!1&&(this._events.next(new Jf(this.value,r)),this._events.next(new Aa(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Le(ne({},n),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(n={}){let t=this._parentMarkedDirty(n.onlySelf);this.status=yc,this._forEachChild(r=>{r.enable(Le(ne({},n),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent}),this._updateAncestors(Le(ne({},n),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(n,t){this._parent&&!n.onlySelf&&(this._parent.updateValueAndValidity(n),n.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(n){this._parent=n}getRawValue(){return this.value}updateValueAndValidity(n={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===yc||this.status===Da)&&this._runAsyncValidator(r,n.emitEvent)}let t=n.sourceControl??this;n.emitEvent!==!1&&(this._events.next(new Jf(this.value,t)),this._events.next(new Aa(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!n.onlySelf&&this._parent.updateValueAndValidity(Le(ne({},n),{sourceControl:t}))}_updateTreeValidity(n={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(n)),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Cc:yc}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(n,t){if(this.asyncValidator){this.status=Da,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let r=kI(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:n})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let n=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,n}return!1}setErrors(n,t={}){this.errors=n,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(n){let t=n;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(n,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[n]:null}hasError(n,t){return!!this.getError(n,t)}get root(){let n=this;for(;n._parent;)n=n._parent;return n}_updateControlsErrors(n,t,r){this.status=this._calculateStatus(),n&&this.statusChanges.emit(this.status),(n||r)&&this._events.next(new Aa(this.status,t)),this._parent&&this._parent._updateControlsErrors(n,t,r)}_initObservables(){this.valueChanges=new Pt,this.statusChanges=new Pt}_calculateStatus(){return this._allControlsDisabled()?Cc:this.errors?Xf:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Da)?Da:this._anyControlsHaveStatus(Xf)?Xf:yc}_anyControlsHaveStatus(n){return this._anyControls(t=>t.status===n)}_anyControlsDirty(){return this._anyControls(n=>n.dirty)}_anyControlsTouched(){return this._anyControls(n=>n.touched)}_updatePristine(n,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!n.onlySelf&&this._parent._updatePristine(n,t),i&&this._events.next(new wc(this.pristine,t))}_updateTouched(n={},t){this.touched=this._anyControlsTouched(),this._events.next(new vc(this.touched,t)),this._parent&&!n.onlySelf&&this._parent._updateTouched(n,t)}_registerOnCollectionChange(n){this._onCollectionChange=n}_setUpdateStrategy(n){rh(n)&&n.updateOn!=null&&(this._updateOn=n.updateOn)}_parentMarkedDirty(n){let t=this._parent&&this._parent.dirty;return!n&&!!t&&!this._parent._anyControlsDirty()}_find(n){return null}_assignValidators(n){this._rawValidators=Array.isArray(n)?n.slice():n,this._composedValidatorFn=GL(this._rawValidators)}_assignAsyncValidators(n){this._rawAsyncValidators=Array.isArray(n)?n.slice():n,this._composedAsyncValidatorFn=$L(this._rawAsyncValidators)}},th=class extends eh{constructor(n,t,r){super(VI(t),UI(r,t)),this.controls=n,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(n,t){return this.controls[n]?this.controls[n]:(this.controls[n]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(n,t,r={}){this.registerControl(n,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(n,t={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(n,t,r={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],t&&this.registerControl(n,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(n){return this.controls.hasOwnProperty(n)&&this.controls[n].enabled}setValue(n,t={}){YL(this,!0,n),Object.keys(n).forEach(r=>{qL(this,!0,r),this.controls[r].setValue(n[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(n,t={}){n!=null&&(Object.keys(n).forEach(r=>{let i=this.controls[r];i&&i.patchValue(n[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(n={},t={}){this._forEachChild((r,i)=>{r.reset(n?n[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(n,t,r)=>(n[r]=t.getRawValue(),n))}_syncPendingControls(){let n=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return n&&this.updateValueAndValidity({onlySelf:!0}),n}_forEachChild(n){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&n(r,t)})}_setUpControls(){this._forEachChild(n=>{n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(n){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&n(r))return!0;return!1}_reduceValue(){let n={};return this._reduceChildren(n,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(n,t){let r=n;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let n of Object.keys(this.controls))if(this.controls[n].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(n){return this.controls.hasOwnProperty(n)?this.controls[n]:null}};var A1=new ve("CallSetDisabledState",{providedIn:"root",factory:()=>T1}),T1="always";function XL(e,n){return[...n.path,e]}function jI(e,n,t=T1){HI(e,n),n.valueAccessor.writeValue(e.value),(e.disabled||t==="always")&&n.valueAccessor.setDisabledState?.(e.disabled),QL(e,n),JL(e,n),KL(e,n),ZL(e,n)}function DI(e,n){e.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(n)})}function ZL(e,n){if(n.valueAccessor.setDisabledState){let t=r=>{n.valueAccessor.setDisabledState(r)};e.registerOnDisabledChange(t),n._registerOnDestroy(()=>{e._unregisterOnDisabledChange(t)})}}function HI(e,n){let t=HL(e);n.validator!==null?e.setValidators(EI(t,n.validator)):typeof t=="function"&&e.setValidators([t]);let r=zL(e);n.asyncValidator!==null?e.setAsyncValidators(EI(r,n.asyncValidator)):typeof r=="function"&&e.setAsyncValidators([r]);let i=()=>e.updateValueAndValidity();DI(n._rawValidators,i),DI(n._rawAsyncValidators,i)}function QL(e,n){n.valueAccessor.registerOnChange(t=>{e._pendingValue=t,e._pendingChange=!0,e._pendingDirty=!0,e.updateOn==="change"&&zI(e,n)})}function KL(e,n){n.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,e.updateOn==="blur"&&e._pendingChange&&zI(e,n),e.updateOn!=="submit"&&e.markAsTouched()})}function zI(e,n){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),n.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function JL(e,n){let t=(r,i)=>{n.valueAccessor.writeValue(r),i&&n.viewToModelUpdate(r)};e.registerOnChange(t),n._registerOnDestroy(()=>{e._unregisterOnChange(t)})}function eF(e,n){e==null,HI(e,n)}function tF(e,n){if(!e.hasOwnProperty("model"))return!1;let t=e.model;return t.isFirstChange()?!0:!Object.is(n,t.currentValue)}function nF(e){return Object.getPrototypeOf(e.constructor)===E1}function rF(e,n){e._syncPendingControls(),n.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function iF(e,n){if(!n)return null;Array.isArray(n);let t,r,i;return n.forEach(o=>{o.constructor===Qt?t=o:nF(o)?r=o:i=o}),i||r||t||null}var oF={provide:Ta,useExisting:Ni(()=>Hn)},_c=Promise.resolve(),Hn=(()=>{class e extends Ta{get submitted(){return Vi(this.submittedReactive)}constructor(t,r,i){super(),this.callSetDisabledState=i,this._submitted=$l(()=>this.submittedReactive()),this.submittedReactive=jl(!1),this._directives=new Set,this.ngSubmit=new Pt,this.form=new th({},S1(t),D1(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){_c.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),jI(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){_c.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){_c.then(()=>{let r=this._findContainer(t.path),i=new th({});eF(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){_c.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){_c.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),rF(this.form,this._directives),this.ngSubmit.emit(t),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static{this.\u0275fac=function(r){return new(r||e)(W(I1,10),W(RI,10),W(A1,8))}}static{this.\u0275dir=Zt({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&$("submit",function(c){return i.onSubmit(c)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[as([oF]),qr]})}}return e})();function AI(e,n){let t=e.indexOf(n);t>-1&&e.splice(t,1)}function TI(e){return typeof e=="object"&&e!==null&&Object.keys(e).length===2&&"value"in e&&"disabled"in e}var sF=class extends eh{constructor(n=null,t,r){super(VI(t),UI(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(n),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),rh(t)&&(t.nonNullable||t.initialValueIsDefault)&&(TI(n)?this.defaultValue=n.value:this.defaultValue=n)}setValue(n,t={}){this.value=this._pendingValue=n,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(n,t={}){this.setValue(n,t)}reset(n=this.defaultValue,t={}){this._applyFormState(n),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(n){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(n){this._onChange.push(n)}_unregisterOnChange(n){AI(this._onChange,n)}registerOnDisabledChange(n){this._onDisabledChange.push(n)}_unregisterOnDisabledChange(n){AI(this._onDisabledChange,n)}_forEachChild(n){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(n){TI(n)?(this.value=this._pendingValue=n.value,n.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=n}};var aF={provide:bc,useExisting:Ni(()=>an)},MI=Promise.resolve(),an=(()=>{class e extends bc{constructor(t,r,i,o,c,h){super(),this._changeDetectorRef=c,this.callSetDisabledState=h,this.control=new sF,this._registered=!1,this.name="",this.update=new Pt,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=iF(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),tF(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){jI(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){MI.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&Gl(r);MI.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?XL(t,this._parent):[t]}static{this.\u0275fac=function(r){return new(r||e)(W(Ta,9),W(I1,10),W(RI,10),W(nh,10),W(Bi,8),W(A1,8))}}static{this.\u0275dir=Zt({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[as([aF]),qr,Pi]})}}return e})(),er=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275dir=Zt({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return e})();var lF={provide:nh,useExisting:Ni(()=>Na),multi:!0};function WI(e,n){return e==null?`${n}`:(n&&typeof n=="object"&&(n="Object"),`${e}: ${n}`.slice(0,50))}function cF(e){return e.split(":")[0]}var Na=(()=>{class e extends E1{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let r=this._getOptionId(t),i=WI(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=cF(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=mo(e)))(i||e)}})()}static{this.\u0275dir=Zt({type:e,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&$("change",function(c){return i.onChange(c.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[as([lF]),qr]})}}return e})(),ih=(()=>{class e{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(WI(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||e)(W(ur),W($r),W(Na,9))}}static{this.\u0275dir=Zt({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return e})(),uF={provide:nh,useExisting:Ni(()=>GI),multi:!0};function NI(e,n){return e==null?`${n}`:(typeof n=="string"&&(n=`'${n}'`),n&&typeof n=="object"&&(n="Object"),`${e}: ${n}`.slice(0,50))}function dF(e){return e.split(":")[0]}var GI=(()=>{class e extends E1{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(o=>this._getOptionId(o));r=(o,c)=>{o._setSelected(i.indexOf(c.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let c=o;for(let h=0;h<c.length;h++){let g=c[h],m=this._getOptionValue(g.value);i.push(m)}}else{let c=r.options;for(let h=0;h<c.length;h++){let g=c[h];if(g.selected){let m=this._getOptionValue(g.value);i.push(m)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=dF(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=mo(e)))(i||e)}})()}static{this.\u0275dir=Zt({type:e,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&$("change",function(c){return i.onChange(c.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[as([uF]),qr]})}}return e})(),oh=(()=>{class e{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(NI(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(NI(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||e)(W(ur),W($r),W(GI,9))}}static{this.\u0275dir=Zt({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return e})();var fF=(()=>{class e{constructor(){this._validator=xI}ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):xI,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275dir=Zt({type:e,features:[Pi]})}}return e})();var hF={provide:I1,useExisting:Ni(()=>Tn),multi:!0};var Tn=(()=>{class e extends fF{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=Gl,this.createValidator=t=>BL}enabled(t){return t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=mo(e)))(i||e)}})()}static{this.\u0275dir=Zt({type:e,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&hf("required",i._enabled?"":null)},inputs:{required:"required"},features:[as([hF]),qr]})}}return e})();var pF=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=Ri({type:e})}static{this.\u0275inj=Oi({})}}return e})();var Ut=(()=>{class e{static withConfig(t){return{ngModule:e,providers:[{provide:A1,useValue:t.callSetDisabledState??T1}]}}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=Ri({type:e})}static{this.\u0275inj=Oi({imports:[pF]})}}return e})();var M1={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};var Q=function(e,n){if(!e)throw gs(n)},gs=function(e){return new Error("Firebase Database ("+M1.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)};var qI=function(e){let n=[],t=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?n[t++]=i:i<2048?(n[t++]=i>>6|192,n[t++]=i&63|128):(i&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),n[t++]=i>>18|240,n[t++]=i>>12&63|128,n[t++]=i>>6&63|128,n[t++]=i&63|128):(n[t++]=i>>12|224,n[t++]=i>>6&63|128,n[t++]=i&63|128)}return n},gF=function(e){let n=[],t=0,r=0;for(;t<e.length;){let i=e[t++];if(i<128)n[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=e[t++];n[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=e[t++],c=e[t++],h=e[t++],g=((i&7)<<18|(o&63)<<12|(c&63)<<6|h&63)-65536;n[r++]=String.fromCharCode(55296+(g>>10)),n[r++]=String.fromCharCode(56320+(g&1023))}else{let o=e[t++],c=e[t++];n[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|c&63)}}return n.join("")},ah={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,n){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=n?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){let o=e[i],c=i+1<e.length,h=c?e[i+1]:0,g=i+2<e.length,m=g?e[i+2]:0,v=o>>2,b=(o&3)<<4|h>>4,I=(h&15)<<2|m>>6,A=m&63;g||(A=64,c||(I=64)),r.push(t[v],t[b],t[I],t[A])}return r.join("")},encodeString(e,n){return this.HAS_NATIVE_SUPPORT&&!n?btoa(e):this.encodeByteArray(qI(e),n)},decodeString(e,n){return this.HAS_NATIVE_SUPPORT&&!n?atob(e):gF(this.decodeStringToByteArray(e,n))},decodeStringToByteArray(e,n){this.init_();let t=n?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){let o=t[e.charAt(i++)],h=i<e.length?t[e.charAt(i)]:0;++i;let m=i<e.length?t[e.charAt(i)]:64;++i;let b=i<e.length?t[e.charAt(i)]:64;if(++i,o==null||h==null||m==null||b==null)throw new N1;let I=o<<2|h>>4;if(r.push(I),m!==64){let A=h<<4&240|m>>2;if(r.push(A),b!==64){let R=m<<6&192|b;r.push(R)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},N1=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},R1=function(e){let n=qI(e);return ah.encodeByteArray(n,!0)},xc=function(e){return R1(e).replace(/\./g,"")},O1=function(e){try{return ah.decodeString(e,!0)}catch(n){console.error("base64Decode failed: ",n)}return null};function YI(e){return XI(void 0,e)}function XI(e,n){if(!(n instanceof Object))return n;switch(n.constructor){case Date:let t=n;return new Date(t.getTime());case Object:e===void 0&&(e={});break;case Array:e=[];break;default:return n}for(let t in n)!n.hasOwnProperty(t)||!mF(t)||(e[t]=XI(e[t],n[t]));return e}function mF(e){return e!=="__proto__"}function yF(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var CF=()=>yF().__FIREBASE_DEFAULTS__,_F=()=>{if(typeof process>"u"||typeof process.env>"u")return;let e=process.env.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},wF=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let n=e&&O1(e[1]);return n&&JSON.parse(n)},ZI=()=>{try{return CF()||_F()||wF()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},vF=e=>{var n,t;return(t=(n=ZI())===null||n===void 0?void 0:n.emulatorHosts)===null||t===void 0?void 0:t[e]},QI=e=>{let n=vF(e);if(!n)return;let t=n.lastIndexOf(":");if(t<=0||t+1===n.length)throw new Error(`Invalid host ${n} with no separate hostname and port!`);let r=parseInt(n.substring(t+1),10);return n[0]==="["?[n.substring(1,t-1),r]:[n.substring(0,t),r]},P1=()=>{var e;return(e=ZI())===null||e===void 0?void 0:e.config};var Wi=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((n,t)=>{this.resolve=n,this.reject=t})}wrapCallback(n){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof n=="function"&&(this.promise.catch(()=>{}),n.length===1?n(t):n(t,r))}}};function KI(e,n){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=n||"demo-project",i=e.iat||0,o=e.sub||e.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let c=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},e);return[xc(JSON.stringify(t)),xc(JSON.stringify(c)),""].join(".")}function bF(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function k1(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(bF())}function JI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function mi(){return M1.NODE_CLIENT===!0||M1.NODE_ADMIN===!0}function eS(){try{return typeof indexedDB=="object"}catch{return!1}}function tS(){return new Promise((e,n)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;n(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){n(t)}})}var xF="FirebaseError",ps=class e extends Error{constructor(n,t,r){super(t),this.code=n,this.customData=r,this.name=xF,Object.setPrototypeOf(this,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ec.prototype.create)}},Ec=class{constructor(n,t,r){this.service=n,this.serviceName=t,this.errors=r}create(n,...t){let r=t[0]||{},i=`${this.service}/${n}`,o=this.errors[n],c=o?EF(o,r):"Error",h=`${this.serviceName}: ${c} (${i}).`;return new ps(i,h,r)}};function EF(e,n){return e.replace(IF,(t,r)=>{let i=n[r];return i!=null?String(i):`<${r}?>`})}var IF=/\{\$([^}]+)}/g;function Oa(e){return JSON.parse(e)}function Kt(e){return JSON.stringify(e)}var nS=function(e){let n={},t={},r={},i="";try{let o=e.split(".");n=Oa(O1(o[0])||""),t=Oa(O1(o[1])||""),i=o[2],r=t.d||{},delete t.d}catch{}return{header:n,claims:t,data:r,signature:i}};var rS=function(e){let n=nS(e),t=n.claims;return!!t&&typeof t=="object"&&t.hasOwnProperty("iat")},iS=function(e){let n=nS(e).claims;return typeof n=="object"&&n.admin===!0};function Qr(e,n){return Object.prototype.hasOwnProperty.call(e,n)}function ms(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]}function L1(e){for(let n in e)if(Object.prototype.hasOwnProperty.call(e,n))return!1;return!0}function Ic(e,n,t){let r={};for(let i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=n.call(t,e[i],i,e));return r}function lh(e,n){if(e===n)return!0;let t=Object.keys(e),r=Object.keys(n);for(let i of t){if(!r.includes(i))return!1;let o=e[i],c=n[i];if($I(o)&&$I(c)){if(!lh(o,c))return!1}else if(o!==c)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function $I(e){return e!==null&&typeof e=="object"}function oS(e){let n=[];for(let[t,r]of Object.entries(e))Array.isArray(r)?r.forEach(i=>{n.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):n.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return n.length?"&"+n.join("&"):""}var sh=class{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let n=1;n<this.blockSize;++n)this.pad_[n]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(n,t){t||(t=0);let r=this.W_;if(typeof n=="string")for(let b=0;b<16;b++)r[b]=n.charCodeAt(t)<<24|n.charCodeAt(t+1)<<16|n.charCodeAt(t+2)<<8|n.charCodeAt(t+3),t+=4;else for(let b=0;b<16;b++)r[b]=n[t]<<24|n[t+1]<<16|n[t+2]<<8|n[t+3],t+=4;for(let b=16;b<80;b++){let I=r[b-3]^r[b-8]^r[b-14]^r[b-16];r[b]=(I<<1|I>>>31)&4294967295}let i=this.chain_[0],o=this.chain_[1],c=this.chain_[2],h=this.chain_[3],g=this.chain_[4],m,v;for(let b=0;b<80;b++){b<40?b<20?(m=h^o&(c^h),v=1518500249):(m=o^c^h,v=1859775393):b<60?(m=o&c|h&(o|c),v=2400959708):(m=o^c^h,v=3395469782);let I=(i<<5|i>>>27)+m+g+v+r[b]&4294967295;g=h,h=c,c=(o<<30|o>>>2)&4294967295,o=i,i=I}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+g&4294967295}update(n,t){if(n==null)return;t===void 0&&(t=n.length);let r=t-this.blockSize,i=0,o=this.buf_,c=this.inbuf_;for(;i<t;){if(c===0)for(;i<=r;)this.compress_(n,i),i+=this.blockSize;if(typeof n=="string"){for(;i<t;)if(o[c]=n.charCodeAt(i),++c,++i,c===this.blockSize){this.compress_(o),c=0;break}}else for(;i<t;)if(o[c]=n[i],++c,++i,c===this.blockSize){this.compress_(o),c=0;break}}this.inbuf_=c,this.total_+=t}digest(){let n=[],t=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=t&255,t/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let o=24;o>=0;o-=8)n[r]=this.chain_[i]>>o&255,++r;return n}};function Sc(e,n){return`${e} failed: ${n} argument `}var sS=function(e){let n=[],t=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);if(i>=55296&&i<=56319){let o=i-55296;r++,Q(r<e.length,"Surrogate pair missing trail surrogate.");let c=e.charCodeAt(r)-56320;i=65536+(o<<10)+c}i<128?n[t++]=i:i<2048?(n[t++]=i>>6|192,n[t++]=i&63|128):i<65536?(n[t++]=i>>12|224,n[t++]=i>>6&63|128,n[t++]=i&63|128):(n[t++]=i>>18|240,n[t++]=i>>12&63|128,n[t++]=i>>6&63|128,n[t++]=i&63|128)}return n},Dc=function(e){let n=0;for(let t=0;t<e.length;t++){let r=e.charCodeAt(t);r<128?n++:r<2048?n+=2:r>=55296&&r<=56319?(n+=4,t++):n+=3}return n};var _q=4*60*60*1e3;function vo(e){return e&&e._delegate?e._delegate:e}var Gi=class{constructor(n,t,r){this.name=n,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(n){return this.instantiationMode=n,this}setMultipleInstances(n){return this.multipleInstances=n,this}setServiceProps(n){return this.serviceProps=n,this}setInstanceCreatedCallback(n){return this.onInstanceCreated=n,this}};var ys="[DEFAULT]";var ch=class{constructor(n,t){this.name=n,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(n){let t=this.normalizeInstanceIdentifier(n);if(!this.instancesDeferred.has(t)){let r=new Wi;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(n){var t;let r=this.normalizeInstanceIdentifier(n?.identifier),i=(t=n?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(n){if(n.name!==this.name)throw Error(`Mismatching Component ${n.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=n,!!this.shouldAutoInitialize()){if(DF(n))try{this.getOrInitializeService({instanceIdentifier:ys})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(n=ys){this.instancesDeferred.delete(n),this.instancesOptions.delete(n),this.instances.delete(n)}delete(){return qt(this,null,function*(){let n=Array.from(this.instances.values());yield Promise.all([...n.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...n.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(n=ys){return this.instances.has(n)}getOptions(n=ys){return this.instancesOptions.get(n)||{}}initialize(n={}){let{options:t={}}=n,r=this.normalizeInstanceIdentifier(n.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,c]of this.instancesDeferred.entries()){let h=this.normalizeInstanceIdentifier(o);r===h&&c.resolve(i)}return i}onInit(n,t){var r;let i=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(n),this.onInitCallbacks.set(i,o);let c=this.instances.get(i);return c&&n(c,i),()=>{o.delete(n)}}invokeOnInitCallbacks(n,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(n,t)}catch{}}getOrInitializeService({instanceIdentifier:n,options:t={}}){let r=this.instances.get(n);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:SF(n),options:t}),this.instances.set(n,r),this.instancesOptions.set(n,t),this.invokeOnInitCallbacks(r,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,r)}catch{}return r||null}normalizeInstanceIdentifier(n=ys){return this.component?this.component.multipleInstances?n:ys:n}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function SF(e){return e===ys?void 0:e}function DF(e){return e.instantiationMode==="EAGER"}var Ac=class{constructor(n){this.name=n,this.providers=new Map}addComponent(n){let t=this.getProvider(n.name);if(t.isComponentSet())throw new Error(`Component ${n.name} has already been registered with ${this.name}`);t.setComponent(n)}addOrOverwriteComponent(n){this.getProvider(n.name).isComponentSet()&&this.providers.delete(n.name),this.addComponent(n)}getProvider(n){if(this.providers.has(n))return this.providers.get(n);let t=new ch(n,this);return this.providers.set(n,t),t}getProviders(){return Array.from(this.providers.values())}};var AF=[],St=function(e){return e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT",e}(St||{}),TF={debug:St.DEBUG,verbose:St.VERBOSE,info:St.INFO,warn:St.WARN,error:St.ERROR,silent:St.SILENT},MF=St.INFO,NF={[St.DEBUG]:"log",[St.VERBOSE]:"log",[St.INFO]:"info",[St.WARN]:"warn",[St.ERROR]:"error"},OF=(e,n,...t)=>{if(n<e.logLevel)return;let r=new Date().toISOString(),i=NF[n];if(i)console[i](`[${r}]  ${e.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${n})`)},Ra=class{constructor(n){this.name=n,this._logLevel=MF,this._logHandler=OF,this._userLogHandler=null,AF.push(this)}get logLevel(){return this._logLevel}set logLevel(n){if(!(n in St))throw new TypeError(`Invalid value "${n}" assigned to \`logLevel\``);this._logLevel=n}setLogLevel(n){this._logLevel=typeof n=="string"?TF[n]:n}get logHandler(){return this._logHandler}set logHandler(n){if(typeof n!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=n}get userLogHandler(){return this._userLogHandler}set userLogHandler(n){this._userLogHandler=n}debug(...n){this._userLogHandler&&this._userLogHandler(this,St.DEBUG,...n),this._logHandler(this,St.DEBUG,...n)}log(...n){this._userLogHandler&&this._userLogHandler(this,St.VERBOSE,...n),this._logHandler(this,St.VERBOSE,...n)}info(...n){this._userLogHandler&&this._userLogHandler(this,St.INFO,...n),this._logHandler(this,St.INFO,...n)}warn(...n){this._userLogHandler&&this._userLogHandler(this,St.WARN,...n),this._logHandler(this,St.WARN,...n)}error(...n){this._userLogHandler&&this._userLogHandler(this,St.ERROR,...n),this._logHandler(this,St.ERROR,...n)}};var RF=(e,n)=>n.some(t=>e instanceof t),aS,lS;function PF(){return aS||(aS=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function kF(){return lS||(lS=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var cS=new WeakMap,B1=new WeakMap,uS=new WeakMap,F1=new WeakMap,U1=new WeakMap;function LF(e){let n=new Promise((t,r)=>{let i=()=>{e.removeEventListener("success",o),e.removeEventListener("error",c)},o=()=>{t(yi(e.result)),i()},c=()=>{r(e.error),i()};e.addEventListener("success",o),e.addEventListener("error",c)});return n.then(t=>{t instanceof IDBCursor&&cS.set(t,e)}).catch(()=>{}),U1.set(n,e),n}function FF(e){if(B1.has(e))return;let n=new Promise((t,r)=>{let i=()=>{e.removeEventListener("complete",o),e.removeEventListener("error",c),e.removeEventListener("abort",c)},o=()=>{t(),i()},c=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",o),e.addEventListener("error",c),e.addEventListener("abort",c)});B1.set(e,n)}var V1={get(e,n,t){if(e instanceof IDBTransaction){if(n==="done")return B1.get(e);if(n==="objectStoreNames")return e.objectStoreNames||uS.get(e);if(n==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return yi(e[n])},set(e,n,t){return e[n]=t,!0},has(e,n){return e instanceof IDBTransaction&&(n==="done"||n==="store")?!0:n in e}};function dS(e){V1=e(V1)}function BF(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(n,...t){let r=e.call(uh(this),n,...t);return uS.set(r,n.sort?n.sort():[n]),yi(r)}:kF().includes(e)?function(...n){return e.apply(uh(this),n),yi(cS.get(this))}:function(...n){return yi(e.apply(uh(this),n))}}function VF(e){return typeof e=="function"?BF(e):(e instanceof IDBTransaction&&FF(e),RF(e,PF())?new Proxy(e,V1):e)}function yi(e){if(e instanceof IDBRequest)return LF(e);if(F1.has(e))return F1.get(e);let n=VF(e);return n!==e&&(F1.set(e,n),U1.set(n,e)),n}var uh=e=>U1.get(e);function hS(e,n,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let c=indexedDB.open(e,n),h=yi(c);return r&&c.addEventListener("upgradeneeded",g=>{r(yi(c.result),g.oldVersion,g.newVersion,yi(c.transaction),g)}),t&&c.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),h.then(g=>{o&&g.addEventListener("close",()=>o()),i&&g.addEventListener("versionchange",m=>i(m.oldVersion,m.newVersion,m))}).catch(()=>{}),h}var UF=["get","getKey","getAll","getAllKeys","count"],jF=["put","add","delete","clear"],j1=new Map;function fS(e,n){if(!(e instanceof IDBDatabase&&!(n in e)&&typeof n=="string"))return;if(j1.get(n))return j1.get(n);let t=n.replace(/FromIndex$/,""),r=n!==t,i=jF.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||UF.includes(t)))return;let o=function(c,...h){return qt(this,null,function*(){let g=this.transaction(c,i?"readwrite":"readonly"),m=g.store;return r&&(m=m.index(h.shift())),(yield Promise.all([m[t](...h),i&&g.done]))[0]})};return j1.set(n,o),o}dS(e=>Le(ne({},e),{get:(n,t,r)=>fS(n,t)||e.get(n,t,r),has:(n,t)=>!!fS(n,t)||e.has(n,t)}));var z1=class{constructor(n){this.container=n}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(HF(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function HF(e){let n=e.getComponent();return n?.type==="VERSION"}var W1="@firebase/app",pS="0.10.12";var $i=new Ra("@firebase/app"),zF="@firebase/app-compat",WF="@firebase/analytics-compat",GF="@firebase/analytics",$F="@firebase/app-check-compat",qF="@firebase/app-check",YF="@firebase/auth",XF="@firebase/auth-compat",ZF="@firebase/database",QF="@firebase/data-connect",KF="@firebase/database-compat",JF="@firebase/functions",e6="@firebase/functions-compat",t6="@firebase/installations",n6="@firebase/installations-compat",r6="@firebase/messaging",i6="@firebase/messaging-compat",o6="@firebase/performance",s6="@firebase/performance-compat",a6="@firebase/remote-config",l6="@firebase/remote-config-compat",c6="@firebase/storage",u6="@firebase/storage-compat",d6="@firebase/firestore",f6="@firebase/vertexai-preview",h6="@firebase/firestore-compat",p6="firebase",g6="10.14.0";var G1="[DEFAULT]",m6={[W1]:"fire-core",[zF]:"fire-core-compat",[GF]:"fire-analytics",[WF]:"fire-analytics-compat",[qF]:"fire-app-check",[$F]:"fire-app-check-compat",[YF]:"fire-auth",[XF]:"fire-auth-compat",[ZF]:"fire-rtdb",[QF]:"fire-data-connect",[KF]:"fire-rtdb-compat",[JF]:"fire-fn",[e6]:"fire-fn-compat",[t6]:"fire-iid",[n6]:"fire-iid-compat",[r6]:"fire-fcm",[i6]:"fire-fcm-compat",[o6]:"fire-perf",[s6]:"fire-perf-compat",[a6]:"fire-rc",[l6]:"fire-rc-compat",[c6]:"fire-gcs",[u6]:"fire-gcs-compat",[d6]:"fire-fst",[h6]:"fire-fst-compat",[f6]:"fire-vertex","fire-js":"fire-js",[p6]:"fire-js-all"};var dh=new Map,y6=new Map,$1=new Map;function gS(e,n){try{e.container.addComponent(n)}catch(t){$i.debug(`Component ${n.name} failed to register with FirebaseApp ${e.name}`,t)}}function Tc(e){let n=e.name;if($1.has(n))return $i.debug(`There were multiple attempts to register component ${n}.`),!1;$1.set(n,e);for(let t of dh.values())gS(t,e);for(let t of y6.values())gS(t,e);return!0}function _S(e,n){let t=e.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),e.container.getProvider(n)}var C6={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},bo=new Ec("app","Firebase",C6);var q1=class{constructor(n,t,r){this._isDeleted=!1,this._options=Object.assign({},n),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Gi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(n){this.checkDestroyed(),this._automaticDataCollectionEnabled=n}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(n){this._isDeleted=n}checkDestroyed(){if(this.isDeleted)throw bo.create("app-deleted",{appName:this._name})}};var wS=g6;function we(e,n={}){let t=e;typeof n!="object"&&(n={name:n});let r=Object.assign({name:G1,automaticDataCollectionEnabled:!1},n),i=r.name;if(typeof i!="string"||!i)throw bo.create("bad-app-name",{appName:String(i)});if(t||(t=P1()),!t)throw bo.create("no-options");let o=dh.get(i);if(o){if(lh(t,o.options)&&lh(r,o.config))return o;throw bo.create("duplicate-app",{appName:i})}let c=new Ac(i);for(let g of $1.values())c.addComponent(g);let h=new q1(t,r,c);return dh.set(i,h),h}function vS(e=G1){let n=dh.get(e);if(!n&&e===G1&&P1())return we();if(!n)throw bo.create("no-app",{appName:e});return n}function xo(e,n,t){var r;let i=(r=m6[e])!==null&&r!==void 0?r:e;t&&(i+=`-${t}`);let o=i.match(/\s|\//),c=n.match(/\s|\//);if(o||c){let h=[`Unable to register library "${i}" with version "${n}":`];o&&h.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&c&&h.push("and"),c&&h.push(`version name "${n}" contains illegal characters (whitespace or "/")`),$i.warn(h.join(" "));return}Tc(new Gi(`${i}-version`,()=>({library:i,version:n}),"VERSION"))}var _6="firebase-heartbeat-database",w6=1,Mc="firebase-heartbeat-store",H1=null;function bS(){return H1||(H1=hS(_6,w6,{upgrade:(e,n)=>{switch(n){case 0:try{e.createObjectStore(Mc)}catch(t){console.warn(t)}}}}).catch(e=>{throw bo.create("idb-open",{originalErrorMessage:e.message})})),H1}function v6(e){return qt(this,null,function*(){try{let t=(yield bS()).transaction(Mc),r=yield t.objectStore(Mc).get(xS(e));return yield t.done,r}catch(n){if(n instanceof ps)$i.warn(n.message);else{let t=bo.create("idb-get",{originalErrorMessage:n?.message});$i.warn(t.message)}}})}function mS(e,n){return qt(this,null,function*(){try{let r=(yield bS()).transaction(Mc,"readwrite");yield r.objectStore(Mc).put(n,xS(e)),yield r.done}catch(t){if(t instanceof ps)$i.warn(t.message);else{let r=bo.create("idb-set",{originalErrorMessage:t?.message});$i.warn(r.message)}}})}function xS(e){return`${e.name}!${e.options.appId}`}var b6=1024,x6=30*24*60*60*1e3,Y1=class{constructor(n){this.container=n,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new X1(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return qt(this,null,function*(){var n,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=yS();return((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(c=>c.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(c=>{let h=new Date(c.date).valueOf();return Date.now()-h<=x6}),this._storage.overwrite(this._heartbeatsCache))}catch(r){$i.warn(r)}})}getHeartbeatsHeader(){return qt(this,null,function*(){var n;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=yS(),{heartbeatsToSend:r,unsentEntries:i}=E6(this._heartbeatsCache.heartbeats),o=xc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return $i.warn(t),""}})}};function yS(){return new Date().toISOString().substring(0,10)}function E6(e,n=b6){let t=[],r=e.slice();for(let i of e){let o=t.find(c=>c.agent===i.agent);if(o){if(o.dates.push(i.date),CS(t)>n){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),CS(t)>n){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var X1=class{constructor(n){this.app=n,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return qt(this,null,function*(){return eS()?tS().then(()=>!0).catch(()=>!1):!1})}read(){return qt(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield v6(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(n){return qt(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return mS(this.app,{lastSentHeartbeatDate:(t=n.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:n.heartbeats})}else return})}add(n){return qt(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return mS(this.app,{lastSentHeartbeatDate:(t=n.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...n.heartbeats]})}else return})}};function CS(e){return xc(JSON.stringify({version:2,heartbeats:e})).length}function I6(e){Tc(new Gi("platform-logger",n=>new z1(n),"PRIVATE")),Tc(new Gi("heartbeat",n=>new Y1(n),"PRIVATE")),xo(W1,pS,e),xo(W1,pS,"esm2017"),xo("fire-js","")}I6("");var S6="firebase",D6="10.14.0";xo(S6,D6,"app");var ES="@firebase/database",IS="1.0.8";var Ky="";function A6(e){Ky=e}var ry=class{constructor(n){this.domStorage_=n,this.prefix_="firebase:"}set(n,t){t==null?this.domStorage_.removeItem(this.prefixedName_(n)):this.domStorage_.setItem(this.prefixedName_(n),Kt(t))}get(n){let t=this.domStorage_.getItem(this.prefixedName_(n));return t==null?null:Oa(t)}remove(n){this.domStorage_.removeItem(this.prefixedName_(n))}prefixedName_(n){return this.prefix_+n}toString(){return this.domStorage_.toString()}};var iy=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(n,t){t==null?delete this.cache_[n]:this.cache_[n]=t}get(n){return Qr(this.cache_,n)?this.cache_[n]:null}remove(n){delete this.cache_[n]}};var rD=function(e){try{if(typeof window<"u"&&typeof window[e]<"u"){let n=window[e];return n.setItem("firebase:sentinel","cache"),n.removeItem("firebase:sentinel"),new ry(n)}}catch{}return new iy},_s=rD("localStorage"),oy=rD("sessionStorage");var La=new Ra("@firebase/database"),T6=function(){let e=1;return function(){return e++}}(),iD=function(e){let n=sS(e),t=new sh;t.update(n);let r=t.digest();return ah.encodeByteArray(r)},Zc=function(...e){let n="";for(let t=0;t<e.length;t++){let r=e[t];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?n+=Zc.apply(null,r):typeof r=="object"?n+=Kt(r):n+=r,n+=" "}return n},ws=null,SS=!0,M6=function(e,n){Q(!n||e===!0||e===!1,"Can't turn on custom loggers persistently."),e===!0?(La.logLevel=St.VERBOSE,ws=La.log.bind(La),n&&oy.set("logging_enabled",!0)):typeof e=="function"?ws=e:(ws=null,oy.remove("logging_enabled"))},Mn=function(...e){if(SS===!0&&(SS=!1,ws===null&&oy.get("logging_enabled")===!0&&M6(!0)),ws){let n=Zc.apply(null,e);ws(n)}},Qc=function(e){return function(...n){Mn(e,...n)}},sy=function(...e){let n="FIREBASE INTERNAL ERROR: "+Zc(...e);La.error(n)},qi=function(...e){let n=`FIREBASE FATAL ERROR: ${Zc(...e)}`;throw La.error(n),new Error(n)},Wn=function(...e){let n="FIREBASE WARNING: "+Zc(...e);La.warn(n)},N6=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Wn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Jy=function(e){return typeof e=="number"&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},O6=function(e){if(mi()||document.readyState==="complete")e();else{let n=!1,t=function(){if(!document.body){setTimeout(t,Math.floor(10));return}n||(n=!0,e())};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&t()}),window.attachEvent("onload",t))}},Ba="[MIN_NAME]",vs="[MAX_NAME]",xs=function(e,n){if(e===n)return 0;if(e===Ba||n===vs)return-1;if(n===Ba||e===vs)return 1;{let t=DS(e),r=DS(n);return t!==null?r!==null?t-r===0?e.length-n.length:t-r:-1:r!==null?1:e<n?-1:1}},R6=function(e,n){return e===n?0:e<n?-1:1},Nc=function(e,n){if(n&&e in n)return n[e];throw new Error("Missing required key ("+e+") in object: "+Kt(n))},eC=function(e){if(typeof e!="object"||e===null)return Kt(e);let n=[];for(let r in e)n.push(r);n.sort();let t="{";for(let r=0;r<n.length;r++)r!==0&&(t+=","),t+=Kt(n[r]),t+=":",t+=eC(e[n[r]]);return t+="}",t},oD=function(e,n){let t=e.length;if(t<=n)return[e];let r=[];for(let i=0;i<t;i+=n)i+n>t?r.push(e.substring(i,t)):r.push(e.substring(i,i+n));return r};function Nn(e,n){for(let t in e)e.hasOwnProperty(t)&&n(t,e[t])}var sD=function(e){Q(!Jy(e),"Invalid JSON number");let n=11,t=52,r=(1<<n-1)-1,i,o,c,h,g;e===0?(o=0,c=0,i=1/e===-1/0?1:0):(i=e<0,e=Math.abs(e),e>=Math.pow(2,1-r)?(h=Math.min(Math.floor(Math.log(e)/Math.LN2),r),o=h+r,c=Math.round(e*Math.pow(2,t-h)-Math.pow(2,t))):(o=0,c=Math.round(e/Math.pow(2,1-r-t))));let m=[];for(g=t;g;g-=1)m.push(c%2?1:0),c=Math.floor(c/2);for(g=n;g;g-=1)m.push(o%2?1:0),o=Math.floor(o/2);m.push(i?1:0),m.reverse();let v=m.join(""),b="";for(g=0;g<64;g+=8){let I=parseInt(v.substr(g,8),2).toString(16);I.length===1&&(I="0"+I),b=b+I}return b.toLowerCase()},P6=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},k6=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function L6(e,n){let t="Unknown Error";e==="too_big"?t="The data requested exceeds the maximum size that can be accessed with a single request.":e==="permission_denied"?t="Client doesn't have permission to access the desired data.":e==="unavailable"&&(t="The service is unavailable");let r=new Error(e+" at "+n._path.toString()+": "+t);return r.code=e.toUpperCase(),r}var F6=new RegExp("^-?(0*)\\d{1,10}$"),B6=-2147483648,V6=2147483647,DS=function(e){if(F6.test(e)){let n=Number(e);if(n>=B6&&n<=V6)return n}return null},qa=function(e){try{e()}catch(n){setTimeout(()=>{let t=n.stack||"";throw Wn("Exception was thrown by user callback.",t),n},Math.floor(0))}},U6=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Lc=function(e,n){let t=setTimeout(e,n);return typeof t=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):typeof t=="object"&&t.unref&&t.unref(),t};var ay=class{constructor(n,t){this.appName_=n,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(n){return this.appCheck?this.appCheck.getToken(n):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(n).then(t,r):t(null)},0)})}addTokenChangeListener(n){var t;(t=this.appCheckProvider)===null||t===void 0||t.get().then(r=>r.addTokenListener(n))}notifyForInvalidToken(){Wn(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var ly=class{constructor(n,t,r){this.appName_=n,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(n){return this.auth_?this.auth_.getToken(n).catch(t=>t&&t.code==="auth/token-not-initialized"?(Mn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(n).then(t,r):t(null)},0)})}addTokenChangeListener(n){this.auth_?this.auth_.addAuthTokenListener(n):this.authProvider_.get().then(t=>t.addAuthTokenListener(n))}removeTokenChangeListener(n){this.authProvider_.get().then(t=>t.removeAuthTokenListener(n))}notifyForInvalidToken(){let n='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?n+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?n+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':n+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Wn(n)}},Fc=(()=>{class e{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}e.OWNER="owner";return e})(),hh="5",aD="v",lD="s",cD="r",uD="f",dD=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,fD="ls",hD="p",cy="ac",pD="websocket",gD="long_polling";var ph=class{constructor(n,t,r,i,o=!1,c="",h=!1,g=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=o,this.persistenceKey=c,this.includeNamespaceInQueryParams=h,this.isUsingEmulator=g,this._host=n.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=_s.get("host:"+n)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(n){n!==this.internalHost&&(this.internalHost=n,this.isCacheableHost()&&_s.set("host:"+this._host,this.internalHost))}toString(){let n=this.toURLString();return this.persistenceKey&&(n+="<"+this.persistenceKey+">"),n}toURLString(){let n=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${n}${this.host}/${t}`}};function j6(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams}function mD(e,n,t){Q(typeof n=="string","typeof type must == string"),Q(typeof t=="object","typeof params must == object");let r;if(n===pD)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else if(n===gD)r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+n);j6(e)&&(t.ns=e.namespace);let i=[];return Nn(t,(o,c)=>{i.push(o+"="+c)}),r+i.join("&")}var uy=class{constructor(){this.counters_={}}incrementCounter(n,t=1){Qr(this.counters_,n)||(this.counters_[n]=0),this.counters_[n]+=t}get(){return YI(this.counters_)}};var Z1={},Q1={};function tC(e){let n=e.toString();return Z1[n]||(Z1[n]=new uy),Z1[n]}function H6(e,n){let t=e.toString();return Q1[t]||(Q1[t]=n()),Q1[t]}var dy=class{constructor(n){this.onMessage_=n,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(n,t){this.closeAfterResponse=n,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(n,t){for(this.pendingResponses[n]=t;this.pendingResponses[this.currentResponseNum];){let r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&qa(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var AS="start",z6="close",W6="pLPCommand",G6="pRTLPCB",yD="id",CD="pw",_D="ser",$6="cb",q6="seg",Y6="ts",X6="d",Z6="dframe",wD=1870,vD=30,Q6=wD-vD,K6=25e3,J6=3e4,fy=class e{constructor(n,t,r,i,o,c,h){this.connId=n,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.transportSessionId=c,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Qc(n),this.stats_=tC(t),this.urlFn=g=>(this.appCheckToken&&(g[cy]=this.appCheckToken),mD(t,gD,g))}open(n,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new dy(n),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(J6)),O6(()=>{if(this.isClosed_)return;this.scriptTagHolder=new hy((...o)=>{let[c,h,g,m,v]=o;if(this.incrementIncomingBytes_(o),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,c===AS)this.id=h,this.password=g;else if(c===z6)h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+c)},(...o)=>{let[c,h]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(c,h)},()=>{this.onClosed_()},this.urlFn);let r={};r[AS]="t",r[_D]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[$6]=this.scriptTagHolder.uniqueCallbackIdentifier),r[aD]=hh,this.transportSessionId&&(r[lD]=this.transportSessionId),this.lastSessionId&&(r[fD]=this.lastSessionId),this.applicationId&&(r[hD]=this.applicationId),this.appCheckToken&&(r[cy]=this.appCheckToken),typeof location<"u"&&location.hostname&&dD.test(location.hostname)&&(r[cD]=uD);let i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){e.forceAllow_=!0}static forceDisallow(){e.forceDisallow_=!0}static isAvailable(){return mi()?!1:e.forceAllow_?!0:!e.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!P6()&&!k6()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(n){let t=Kt(n);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);let r=R1(t),i=oD(r,Q6);for(let o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++}addDisconnectPingFrame(n,t){if(mi())return;this.myDisconnFrame=document.createElement("iframe");let r={};r[Z6]="t",r[yD]=n,r[CD]=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(n){let t=Kt(n).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}},hy=class e{constructor(n,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,mi())this.commandCB=n,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=T6(),window[W6+this.uniqueCallbackIdentifier]=n,window[G6+this.uniqueCallbackIdentifier]=t,this.myIFrame=e.createIFrame_();let o="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(o='<script>document.domain="'+document.domain+'";<\/script>');let c="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(h){Mn("frame writing exception"),h.stack&&Mn(h.stack),Mn(h)}}}static createIFrame_(){let n=document.createElement("iframe");if(n.style.display="none",document.body){document.body.appendChild(n);try{n.contentWindow.document||Mn("No IE domain setting required")}catch{let r=document.domain;n.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return n.contentDocument?n.doc=n.contentDocument:n.contentWindow?n.doc=n.contentWindow.document:n.document&&(n.doc=n.document),n}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let n=this.onDisconnect;n&&(this.onDisconnect=null,n())}startLongPoll(n,t){for(this.myID=n,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let n={};n[yD]=this.myID,n[CD]=this.myPW,n[_D]=this.currentSerial;let t=this.urlFn(n),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+vD+r.length<=wD;){let c=this.pendingSegs.shift();r=r+"&"+q6+i+"="+c.seg+"&"+Y6+i+"="+c.ts+"&"+X6+i+"="+c.d,i++}return t=t+r,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(n,t,r){this.pendingSegs.push({seg:n,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(n,t){this.outstandingRequests.add(t);let r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(K6)),o=()=>{clearTimeout(i),r()};this.addTag(n,o)}addTag(n,t){mi()?this.doNodeLongPoll(n,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;let r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=n,r.onload=r.onreadystatechange=function(){let i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Mn("Long-poll script failed to load: "+n),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}};var e5=16384,t5=45e3,gh=null;typeof MozWebSocket<"u"?gh=MozWebSocket:typeof WebSocket<"u"&&(gh=WebSocket);var Oc=(()=>{class e{constructor(t,r,i,o,c,h,g){this.connId=t,this.applicationId=i,this.appCheckToken=o,this.authToken=c,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Qc(this.connId),this.stats_=tC(r),this.connURL=e.connectionURL_(r,h,g,o,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,o,c){let h={};return h[aD]=hh,!mi()&&typeof location<"u"&&location.hostname&&dD.test(location.hostname)&&(h[cD]=uD),r&&(h[lD]=r),i&&(h[fD]=i),o&&(h[cy]=o),c&&(h[hD]=c),mD(t,pD,h)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,_s.set("previous_websocket_failure",!0);try{let i;if(mi()){let o=this.nodeAdmin?"AdminNode":"Node";i={headers:{"User-Agent":`Firebase/${hh}/${Ky}/${process.platform}/${o}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);let c=process.env,h=this.connURL.indexOf("wss://")===0?c.HTTPS_PROXY||c.https_proxy:c.HTTP_PROXY||c.http_proxy;h&&(i.proxy={origin:h})}this.mySock=new gh(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");let o=i.message||i.data;o&&this.log_(o),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");let o=i.message||i.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){e.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){let r=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(r);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&gh!==null&&!e.forceDisallow_}static previouslyFailed(){return _s.isInMemoryStorage||_s.get("previous_websocket_failure")===!0}markConnectionHealthy(){_s.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){let r=this.frames.join("");this.frames=null;let i=Oa(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(Q(this.frames===null,"We already have a frame buffer"),t.length<=6){let r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(this.mySock===null)return;let r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{let i=this.extractFrameCount_(r);i!==null&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();let r=Kt(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);let i=oD(r,e5);i.length>1&&this.sendString_(String(i.length));for(let o=0;o<i.length;o++)this.sendString_(i[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(t5))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}e.responsesRequiredToBeHealthy=2,e.healthyTimeout=3e4;return e})(),n5=(()=>{class e{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[fy,Oc]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){let r=Oc&&Oc.isAvailable(),i=r&&!Oc.previouslyFailed();if(t.webSocketOnly&&(r||Wn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Oc];else{let o=this.transports_=[];for(let c of e.ALL_TRANSPORTS)c&&c.isAvailable()&&o.push(c);e.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}e.globalTransportInitialized_=!1;return e})(),r5=6e4,i5=5e3,o5=10*1024,s5=100*1024,K1="t",TS="d",a5="s",MS="r",l5="e",NS="o",OS="a",RS="n",PS="p",c5="h",py=class{constructor(n,t,r,i,o,c,h,g,m,v){this.id=n,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=o,this.onMessage_=c,this.onReady_=h,this.onDisconnect_=g,this.onKill_=m,this.lastSessionId=v,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Qc("c:"+this.id+":"),this.transportManager_=new n5(t),this.log_("Connection created"),this.start_()}start_(){let n=this.transportManager_.initialTransport();this.conn_=new n(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=n.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));let i=n.healthyTimeout||0;i>0&&(this.healthyTimeout_=Lc(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>s5?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>o5?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(n){return t=>{n===this.conn_?this.onConnectionLost_(t):n===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(n){return t=>{this.state_!==2&&(n===this.rx_?this.onPrimaryMessageReceived_(t):n===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(n){let t={t:"d",d:n};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(n){if(K1 in n){let t=n[K1];t===OS?this.upgradeIfSecondaryHealthy_():t===MS?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===NS&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(n){let t=Nc("t",n),r=Nc("d",n);if(t==="c")this.onSecondaryControl_(r);else if(t==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:PS,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:OS,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:RS,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(n){let t=Nc("t",n),r=Nc("d",n);t==="c"?this.onControl_(r):t==="d"&&this.onDataMessage_(r)}onDataMessage_(n){this.onPrimaryResponse_(),this.onMessage_(n)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(n){let t=Nc(K1,n);if(TS in n){let r=n[TS];if(t===c5){let i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(t===RS){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===a5?this.onConnectionShutdown_(r):t===MS?this.onReset_(r):t===l5?sy("Server Error: "+r):t===NS?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):sy("Unknown control packet command: "+t)}}onHandshake_(n){let t=n.ts,r=n.v,i=n.h;this.sessionId=n.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),hh!==r&&Wn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let n=this.transportManager_.upgradeTransport();n&&this.startUpgrade_(n)}startUpgrade_(n){this.secondaryConn_=new n(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=n.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),Lc(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(r5))}onReset_(n){this.log_("Reset packet received.  New host: "+n),this.repoInfo_.host=n,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(n,t){this.log_("Realtime connection established."),this.conn_=n,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Lc(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(i5))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:PS,d:{}}}))}onSecondaryConnectionLost_(){let n=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===n||this.rx_===n)&&this.close()}onConnectionLost_(n){this.conn_=null,!n&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(_s.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(n){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(n),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(n){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(n)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var mh=class{put(n,t,r,i){}merge(n,t,r,i){}refreshAuthToken(n){}refreshAppCheckToken(n){}onDisconnectPut(n,t,r){}onDisconnectMerge(n,t,r){}onDisconnectCancel(n,t){}reportStats(n){}};var yh=class{constructor(n){this.allowedEvents_=n,this.listeners_={},Q(Array.isArray(n)&&n.length>0,"Requires a non-empty array")}trigger(n,...t){if(Array.isArray(this.listeners_[n])){let r=[...this.listeners_[n]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(n,t,r){this.validateEventType_(n),this.listeners_[n]=this.listeners_[n]||[],this.listeners_[n].push({callback:t,context:r});let i=this.getInitialEvent(n);i&&t.apply(r,i)}off(n,t,r){this.validateEventType_(n);let i=this.listeners_[n]||[];for(let o=0;o<i.length;o++)if(i[o].callback===t&&(!r||r===i[o].context)){i.splice(o,1);return}}validateEventType_(n){Q(this.allowedEvents_.find(t=>t===n),"Unknown event: "+n)}};var Ch=class e extends yh{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!k1()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new e}getInitialEvent(n){return Q(n==="online","Unknown event type: "+n),[this.online_]}currentlyOnline(){return this.online_}};var kS=32,LS=768,ht=class{constructor(n,t){if(t===void 0){this.pieces_=n.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=n,this.pieceNum_=t}toString(){let n="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==""&&(n+="/"+this.pieces_[t]);return n||"/"}};function st(){return new ht("")}function We(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function Do(e){return e.pieces_.length-e.pieceNum_}function Dt(e){let n=e.pieceNum_;return n<e.pieces_.length&&n++,new ht(e.pieces_,n)}function nC(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function u5(e){let n="";for(let t=e.pieceNum_;t<e.pieces_.length;t++)e.pieces_[t]!==""&&(n+="/"+encodeURIComponent(String(e.pieces_[t])));return n||"/"}function jc(e,n=0){return e.pieces_.slice(e.pieceNum_+n)}function bD(e){if(e.pieceNum_>=e.pieces_.length)return null;let n=[];for(let t=e.pieceNum_;t<e.pieces_.length-1;t++)n.push(e.pieces_[t]);return new ht(n,0)}function jt(e,n){let t=[];for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);if(n instanceof ht)for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);else{let r=n.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new ht(t,0)}function qe(e){return e.pieceNum_>=e.pieces_.length}function zn(e,n){let t=We(e),r=We(n);if(t===null)return n;if(t===r)return zn(Dt(e),Dt(n));throw new Error("INTERNAL ERROR: innerPath ("+n+") is not within outerPath ("+e+")")}function d5(e,n){let t=jc(e,0),r=jc(n,0);for(let i=0;i<t.length&&i<r.length;i++){let o=xs(t[i],r[i]);if(o!==0)return o}return t.length===r.length?0:t.length<r.length?-1:1}function rC(e,n){if(Do(e)!==Do(n))return!1;for(let t=e.pieceNum_,r=n.pieceNum_;t<=e.pieces_.length;t++,r++)if(e.pieces_[t]!==n.pieces_[r])return!1;return!0}function xr(e,n){let t=e.pieceNum_,r=n.pieceNum_;if(Do(e)>Do(n))return!1;for(;t<e.pieces_.length;){if(e.pieces_[t]!==n.pieces_[r])return!1;++t,++r}return!0}var gy=class{constructor(n,t){this.errorPrefix_=t,this.parts_=jc(n,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Dc(this.parts_[r]);xD(this)}};function f5(e,n){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(n),e.byteLength_+=Dc(n),xD(e)}function h5(e){let n=e.parts_.pop();e.byteLength_-=Dc(n),e.parts_.length>0&&(e.byteLength_-=1)}function xD(e){if(e.byteLength_>LS)throw new Error(e.errorPrefix_+"has a key path longer than "+LS+" bytes ("+e.byteLength_+").");if(e.parts_.length>kS)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+kS+") or object contains a cycle "+Cs(e))}function Cs(e){return e.parts_.length===0?"":"in property '"+e.parts_.join(".")+"'"}var my=class e extends yh{constructor(){super(["visible"]);let n,t;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",n="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",n="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",n="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",n="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{let r=!document[n];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new e}getInitialEvent(n){return Q(n==="visible","Unknown event type: "+n),[this.visible_]}};var Rc=1e3,p5=60*5*1e3,FS=30*1e3,g5=1.3,m5=3e4,y5="server_kill",BS=3,iC=(()=>{class e extends mh{constructor(t,r,i,o,c,h,g,m){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=o,this.onServerInfoUpdate_=c,this.authTokenProvider_=h,this.appCheckTokenProvider_=g,this.authOverride_=m,this.id=e.nextPersistentConnectionId_++,this.log_=Qc("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Rc,this.maxReconnectDelay_=p5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,m&&!mi())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");my.getInstance().on("visible",this.onVisible_,this),t.host.indexOf("fblocal")===-1&&Ch.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){let o=++this.requestNumber_,c={r:o,a:t,b:r};this.log_(Kt(c)),Q(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(c),i&&(this.requestCBHash_[o]=i)}get(t){this.initConnection_();let r=new Wi,o={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:h=>{let g=h.d;h.s==="ok"?r.resolve(g):r.reject(g)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;let c=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(c),r.promise}listen(t,r,i,o){this.initConnection_();let c=t._queryIdentifier,h=t._path.toString();this.log_("Listen called for "+h+" "+c),this.listens.has(h)||this.listens.set(h,new Map),Q(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Q(!this.listens.get(h).has(c),"listen() called twice for same path/queryId.");let g={onComplete:o,hashFn:r,query:t,tag:i};this.listens.get(h).set(c,g),this.connected_&&this.sendListen_(g)}sendGet_(t){let r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){let r=t.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);let c={p:i},h="q";t.tag&&(c.q=r._queryObject,c.t=t.tag),c.h=t.hashFn(),this.sendRequest(h,c,g=>{let m=g.d,v=g.s;e.warnOnListenWarnings_(m,r),(this.listens.get(i)&&this.listens.get(i).get(o))===t&&(this.log_("listen response",g),v!=="ok"&&this.removeListen_(i,o),t.onComplete&&t.onComplete(v,m))})}static warnOnListenWarnings_(t,r){if(t&&typeof t=="object"&&Qr(t,"w")){let i=ms(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){let o='".indexOn": "'+r._queryParams.getIndex().toString()+'"',c=r._path.toString();Wn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${c} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&t.length===40||iS(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=FS)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let t=this.authToken_,r=rS(t)?"auth":"gauth",i={cred:t};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(r,i,o=>{let c=o.s,h=o.d||"error";this.authToken_===t&&(c==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(c,h))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{let r=t.s,i=t.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){let i=t._path.toString(),o=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+o),Q(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,o)&&this.connected_&&this.sendUnlisten_(i,o,t._queryObject,r)}sendUnlisten_(t,r,i,o){this.log_("Unlisten on "+t+" for "+r);let c={p:t},h="n";o&&(c.q=i,c.t=o),this.sendRequest(h,c)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,o){let c={p:r,d:i};this.log_("onDisconnect "+t,c),this.sendRequest(t,c,h=>{o&&setTimeout(()=>{o(h.s,h.d)},Math.floor(0))})}put(t,r,i,o){this.putInternal("p",t,r,i,o)}merge(t,r,i,o){this.putInternal("m",t,r,i,o)}putInternal(t,r,i,o,c){this.initConnection_();let h={p:r,d:i};c!==void 0&&(h.h=c),this.outstandingPuts_.push({action:t,request:h,onComplete:o}),this.outstandingPutCount_++;let g=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(g):this.log_("Buffering put: "+r)}sendPut_(t){let r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,o=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,c=>{this.log_(r+" response",c),delete this.outstandingPuts_[t],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),o&&o(c.s,c.d)})}reportStats(t){if(this.connected_){let r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{if(i.s!=="ok"){let c=i.d;this.log_("reportStats","Error sending stats: "+c)}})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+Kt(t));let r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),t==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):t==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):t==="c"?this.onListenRevoked_(r.p,r.q):t==="ac"?this.onAuthRevoked_(r.s,r.d):t==="apc"?this.onAppCheckRevoked_(r.s,r.d):t==="sd"?this.onSecurityDebugPacket_(r):sy("Unrecognized action received from server: "+Kt(t)+`
Are you using the latest client?`)}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){Q(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Rc,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Rc,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>m5&&(this.reconnectDelay_=Rc),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let t=new Date().getTime()-this.lastConnectionAttemptTime_,r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*g5)}this.onConnectStatus_(!1)}establishConnection_(){return qt(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let t=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+e.nextConnectionId_++,c=this.lastSessionId,h=!1,g=null,m=function(){g?g.close():(h=!0,i())},v=function(I){Q(g,"sendRequest call when we're not connected not allowed."),g.sendRequest(I)};this.realtime_={close:m,sendRequest:v};let b=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[I,A]=yield Promise.all([this.authTokenProvider_.getToken(b),this.appCheckTokenProvider_.getToken(b)]);h?Mn("getToken() completed but was canceled"):(Mn("getToken() completed. Creating connection."),this.authToken_=I&&I.accessToken,this.appCheckToken_=A&&A.token,g=new py(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,r,i,R=>{Wn(R+" ("+this.repoInfo_.toString()+")"),this.interrupt(y5)},c))}catch(I){this.log_("Failed to get token: "+I),h||(this.repoInfo_.nodeAdmin&&Wn(I),m())}}})}interrupt(t){Mn("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Mn("Resuming connection for reason: "+t),delete this.interruptReasons_[t],L1(this.interruptReasons_)&&(this.reconnectDelay_=Rc,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){let r=t-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){let r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;r?i=r.map(c=>eC(c)).join("$"):i="default";let o=this.removeListen_(t,i);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(t,r){let i=new ht(t).toString(),o;if(this.listens.has(i)){let c=this.listens.get(i);o=c.get(r),c.delete(r),c.size===0&&this.listens.delete(i)}else o=void 0;return o}onAuthRevoked_(t,r){Mn("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(t==="invalid_token"||t==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=BS&&(this.reconnectDelay_=FS,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Mn("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(t==="invalid_token"||t==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=BS&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let t of this.listens.values())for(let r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){let t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){let t={},r="js";mi()&&(this.repoInfo_.nodeAdmin?r="admin_node":r="node"),t["sdk."+r+"."+Ky.replace(/\./g,"-")]=1,k1()?t["framework.cordova"]=1:JI()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){let t=Ch.getInstance().currentlyOnline();return L1(this.interruptReasons_)&&t}}e.nextPersistentConnectionId_=0,e.nextConnectionId_=0;return e})(),Ge=class e{constructor(n,t){this.name=n,this.node=t}static Wrap(n,t){return new e(n,t)}};var Va=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(n,t){let r=new Ge(Ba,n),i=new Ge(Ba,t);return this.compare(r,i)!==0}minPost(){return Ge.MIN}};var fh,_h=class extends Va{static get __EMPTY_NODE(){return fh}static set __EMPTY_NODE(n){fh=n}compare(n,t){return xs(n.name,t.name)}isDefinedOn(n){throw gs("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(n,t){return!1}minPost(){return Ge.MIN}maxPost(){return new Ge(vs,fh)}makePost(n,t){return Q(typeof n=="string","KeyIndex indexValue must always be a string."),new Ge(n,fh)}toString(){return".key"}},Fa=new _h;var ka=class{constructor(n,t,r,i,o=null){this.isReverse_=i,this.resultGenerator_=o,this.nodeStack_=[];let c=1;for(;!n.isEmpty();)if(n=n,c=t?r(n.key,t):1,i&&(c*=-1),c<0)this.isReverse_?n=n.left:n=n.right;else if(c===0){this.nodeStack_.push(n);break}else this.nodeStack_.push(n),this.isReverse_?n=n.right:n=n.left}getNext(){if(this.nodeStack_.length===0)return null;let n=this.nodeStack_.pop(),t;if(this.resultGenerator_?t=this.resultGenerator_(n.key,n.value):t={key:n.key,value:n.value},this.isReverse_)for(n=n.left;!n.isEmpty();)this.nodeStack_.push(n),n=n.right;else for(n=n.right;!n.isEmpty();)this.nodeStack_.push(n),n=n.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let n=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(n.key,n.value):{key:n.key,value:n.value}}},Kr=(()=>{class e{constructor(t,r,i,o,c){this.key=t,this.value=r,this.color=i??e.RED,this.left=o??Er.EMPTY_NODE,this.right=c??Er.EMPTY_NODE}copy(t,r,i,o,c){return new e(t??this.key,r??this.value,i??this.color,o??this.left,c??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let o=this,c=i(t,o.key);return c<0?o=o.copy(null,null,null,o.left.insert(t,r,i),null):c===0?o=o.copy(null,r,null,null,null):o=o.copy(null,null,null,null,o.right.insert(t,r,i)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return Er.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,o;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),r(t,i.key)===0){if(i.right.isEmpty())return Er.EMPTY_NODE;o=i.right.min_(),i=i.copy(o.key,o.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){let t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){let t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){let t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){let t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return e.RED=!0,e.BLACK=!1,e})(),yy=class{copy(n,t,r,i,o){return this}insert(n,t,r){return new Kr(n,t,null)}remove(n,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},Er=class e{constructor(n,t=e.EMPTY_NODE){this.comparator_=n,this.root_=t}insert(n,t){return new e(this.comparator_,this.root_.insert(n,t,this.comparator_).copy(null,null,Kr.BLACK,null,null))}remove(n){return new e(this.comparator_,this.root_.remove(n,this.comparator_).copy(null,null,Kr.BLACK,null,null))}get(n){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(n,r.key),t===0)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(n){let t,r=this.root_,i=null;for(;!r.isEmpty();)if(t=this.comparator_(n,r.key),t===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else t<0?r=r.left:t>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(n){return this.root_.inorderTraversal(n)}reverseTraversal(n){return this.root_.reverseTraversal(n)}getIterator(n){return new ka(this.root_,null,this.comparator_,!1,n)}getIteratorFrom(n,t){return new ka(this.root_,n,this.comparator_,!1,t)}getReverseIteratorFrom(n,t){return new ka(this.root_,n,this.comparator_,!0,t)}getReverseIterator(n){return new ka(this.root_,null,this.comparator_,!0,n)}};Er.EMPTY_NODE=new yy;function C5(e,n){return xs(e.name,n.name)}function oC(e,n){return xs(e,n)}var Cy;function _5(e){Cy=e}var ED=function(e){return typeof e=="number"?"number:"+sD(e):"string:"+e},ID=function(e){if(e.isLeafNode()){let n=e.val();Q(typeof n=="string"||typeof n=="number"||typeof n=="object"&&Qr(n,".sv"),"Priority must be a string or number.")}else Q(e===Cy||e.isEmpty(),"priority of unexpected type.");Q(e===Cy||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var VS,Ua=(()=>{class e{constructor(t,r=e.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,Q(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),ID(this.priorityNode_)}static set __childrenNodeConstructor(t){VS=t}static get __childrenNodeConstructor(){return VS}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new e(this.value_,t)}getImmediateChild(t){return t===".priority"?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return qe(t)?this:We(t)===".priority"?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return t===".priority"?this.updatePriority(r):r.isEmpty()&&t!==".priority"?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){let i=We(t);return i===null?r:r.isEmpty()&&i!==".priority"?this:(Q(i!==".priority"||Do(t)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(Dt(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+ED(this.priorityNode_.val())+":");let r=typeof this.value_;t+=r+":",r==="number"?t+=sD(this.value_):t+=this.value_,this.lazyHash_=iD(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:(Q(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){let r=typeof t.value_,i=typeof this.value_,o=e.VALUE_TYPE_ORDER.indexOf(r),c=e.VALUE_TYPE_ORDER.indexOf(i);return Q(o>=0,"Unknown leaf type: "+r),Q(c>=0,"Unknown leaf type: "+i),o===c?i==="object"?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:c-o}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){let r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}e.VALUE_TYPE_ORDER=["object","boolean","number","string"];return e})(),SD,DD;function w5(e){SD=e}function v5(e){DD=e}var _y=class extends Va{compare(n,t){let r=n.node.getPriority(),i=t.node.getPriority(),o=r.compareTo(i);return o===0?xs(n.name,t.name):o}isDefinedOn(n){return!n.getPriority().isEmpty()}indexedValueChanged(n,t){return!n.getPriority().equals(t.getPriority())}minPost(){return Ge.MIN}maxPost(){return new Ge(vs,new Ua("[PRIORITY-POST]",DD))}makePost(n,t){let r=SD(n);return new Ge(t,new Ua("[PRIORITY-POST]",r))}toString(){return".priority"}},Ht=new _y;var b5=Math.log(2),wy=class{constructor(n){let t=o=>parseInt(Math.log(o)/b5,10),r=o=>parseInt(Array(o+1).join("1"),2);this.count=t(n+1),this.current_=this.count-1;let i=r(this.count);this.bits_=n+1&i}nextBitIsOne(){let n=!(this.bits_&1<<this.current_);return this.current_--,n}},wh=function(e,n,t,r){e.sort(n);let i=function(g,m){let v=m-g,b,I;if(v===0)return null;if(v===1)return b=e[g],I=t?t(b):b,new Kr(I,b.node,Kr.BLACK,null,null);{let A=parseInt(v/2,10)+g,R=i(g,A),j=i(A+1,m);return b=e[A],I=t?t(b):b,new Kr(I,b.node,Kr.BLACK,R,j)}},o=function(g){let m=null,v=null,b=e.length,I=function(R,j){let Y=b-R,G=b;b-=R;let ce=i(Y+1,G),Xe=e[Y],ge=t?t(Xe):Xe;A(new Kr(ge,Xe.node,j,null,ce))},A=function(R){m?(m.left=R,m=R):(v=R,m=R)};for(let R=0;R<g.count;++R){let j=g.nextBitIsOne(),Y=Math.pow(2,g.count-(R+1));j?I(Y,Kr.BLACK):(I(Y,Kr.BLACK),I(Y,Kr.RED))}return v},c=new wy(e.length),h=o(c);return new Er(r||n,h)};var J1,Pa={},ja=class e{constructor(n,t){this.indexes_=n,this.indexSet_=t}static get Default(){return Q(Pa&&Ht,"ChildrenNode.ts has not been loaded"),J1=J1||new e({".priority":Pa},{".priority":Ht}),J1}get(n){let t=ms(this.indexes_,n);if(!t)throw new Error("No index defined for "+n);return t instanceof Er?t:null}hasIndex(n){return Qr(this.indexSet_,n.toString())}addIndex(n,t){Q(n!==Fa,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let r=[],i=!1,o=t.getIterator(Ge.Wrap),c=o.getNext();for(;c;)i=i||n.isDefinedOn(c.node),r.push(c),c=o.getNext();let h;i?h=wh(r,n.getCompare()):h=Pa;let g=n.toString(),m=Object.assign({},this.indexSet_);m[g]=n;let v=Object.assign({},this.indexes_);return v[g]=h,new e(v,m)}addToIndexes(n,t){let r=Ic(this.indexes_,(i,o)=>{let c=ms(this.indexSet_,o);if(Q(c,"Missing index implementation for "+o),i===Pa)if(c.isDefinedOn(n.node)){let h=[],g=t.getIterator(Ge.Wrap),m=g.getNext();for(;m;)m.name!==n.name&&h.push(m),m=g.getNext();return h.push(n),wh(h,c.getCompare())}else return Pa;else{let h=t.get(n.name),g=i;return h&&(g=g.remove(new Ge(n.name,h))),g.insert(n,n.node)}});return new e(r,this.indexSet_)}removeFromIndexes(n,t){let r=Ic(this.indexes_,i=>{if(i===Pa)return i;{let o=t.get(n.name);return o?i.remove(new Ge(n.name,o)):i}});return new e(r,this.indexSet_)}};var Pc,Oe=(()=>{class e{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&ID(this.priorityNode_),this.children_.isEmpty()&&Q(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Pc||(Pc=new e(new Er(oC),null,ja.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Pc}updatePriority(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)}getImmediateChild(t){if(t===".priority")return this.getPriority();{let r=this.children_.get(t);return r===null?Pc:r}}getChild(t){let r=We(t);return r===null?this:this.getImmediateChild(r).getChild(Dt(t))}hasChild(t){return this.children_.get(t)!==null}updateImmediateChild(t,r){if(Q(r,"We should always be passing snapshot nodes"),t===".priority")return this.updatePriority(r);{let i=new Ge(t,r),o,c;r.isEmpty()?(o=this.children_.remove(t),c=this.indexMap_.removeFromIndexes(i,this.children_)):(o=this.children_.insert(t,r),c=this.indexMap_.addToIndexes(i,this.children_));let h=o.isEmpty()?Pc:this.priorityNode_;return new e(o,h,c)}}updateChild(t,r){let i=We(t);if(i===null)return r;{Q(We(t)!==".priority"||Do(t)===1,".priority must be the last token in a path");let o=this.getImmediateChild(i).updateChild(Dt(t),r);return this.updateImmediateChild(i,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;let r={},i=0,o=0,c=!0;if(this.forEachChild(Ht,(h,g)=>{r[h]=g.val(t),i++,c&&e.INTEGER_REGEXP_.test(h)?o=Math.max(o,Number(h)):c=!1}),!t&&c&&o<2*i){let h=[];for(let g in r)h[g]=r[g];return h}else return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let t="";this.getPriority().isEmpty()||(t+="priority:"+ED(this.getPriority().val())+":"),this.forEachChild(Ht,(r,i)=>{let o=i.hash();o!==""&&(t+=":"+r+":"+o)}),this.lazyHash_=t===""?"":iD(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){let o=this.resolveIndex_(i);if(o){let c=o.getPredecessorKey(new Ge(t,r));return c?c.name:null}else return this.children_.getPredecessorKey(t)}getFirstChildName(t){let r=this.resolveIndex_(t);if(r){let i=r.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(t){let r=this.getFirstChildName(t);return r?new Ge(r,this.children_.get(r)):null}getLastChildName(t){let r=this.resolveIndex_(t);if(r){let i=r.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(t){let r=this.getLastChildName(t);return r?new Ge(r,this.children_.get(r)):null}forEachChild(t,r){let i=this.resolveIndex_(t);return i?i.inorderTraversal(o=>r(o.name,o.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){let i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,o=>o);{let o=this.children_.getIteratorFrom(t.name,Ge.Wrap),c=o.peek();for(;c!=null&&r.compare(c,t)<0;)o.getNext(),c=o.peek();return o}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){let i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,o=>o);{let o=this.children_.getReverseIteratorFrom(t.name,Ge.Wrap),c=o.peek();for(;c!=null&&r.compare(c,t)>0;)o.getNext(),c=o.peek();return o}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Kc?-1:0}withIndex(t){if(t===Fa||this.indexMap_.hasIndex(t))return this;{let r=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Fa||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{let r=t;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){let i=this.getIterator(Ht),o=r.getIterator(Ht),c=i.getNext(),h=o.getNext();for(;c&&h;){if(c.name!==h.name||!c.node.equals(h.node))return!1;c=i.getNext(),h=o.getNext()}return c===null&&h===null}else return!1;else return!1}}resolveIndex_(t){return t===Fa?null:this.indexMap_.get(t.toString())}}return e.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,e})(),vy=class extends Oe{constructor(){super(new Er(oC),Oe.EMPTY_NODE,ja.Default)}compareTo(n){return n===this?0:1}equals(n){return n===this}getPriority(){return this}getImmediateChild(n){return Oe.EMPTY_NODE}isEmpty(){return!1}},Kc=new vy;Object.defineProperties(Ge,{MIN:{value:new Ge(Ba,Oe.EMPTY_NODE)},MAX:{value:new Ge(vs,Kc)}});_h.__EMPTY_NODE=Oe.EMPTY_NODE;Ua.__childrenNodeConstructor=Oe;_5(Kc);v5(Kc);var x5=!0;function ln(e,n=null){if(e===null)return Oe.EMPTY_NODE;if(typeof e=="object"&&".priority"in e&&(n=e[".priority"]),Q(n===null||typeof n=="string"||typeof n=="number"||typeof n=="object"&&".sv"in n,"Invalid priority type found: "+typeof n),typeof e=="object"&&".value"in e&&e[".value"]!==null&&(e=e[".value"]),typeof e!="object"||".sv"in e){let t=e;return new Ua(t,ln(n))}if(!(e instanceof Array)&&x5){let t=[],r=!1;if(Nn(e,(c,h)=>{if(c.substring(0,1)!=="."){let g=ln(h);g.isEmpty()||(r=r||!g.getPriority().isEmpty(),t.push(new Ge(c,g)))}}),t.length===0)return Oe.EMPTY_NODE;let o=wh(t,C5,c=>c.name,oC);if(r){let c=wh(t,Ht.getCompare());return new Oe(o,ln(n),new ja({".priority":c},{".priority":Ht}))}else return new Oe(o,ln(n),ja.Default)}else{let t=Oe.EMPTY_NODE;return Nn(e,(r,i)=>{if(Qr(e,r)&&r.substring(0,1)!=="."){let o=ln(i);(o.isLeafNode()||!o.isEmpty())&&(t=t.updateImmediateChild(r,o))}}),t.updatePriority(ln(n))}}w5(ln);var by=class extends Va{constructor(n){super(),this.indexPath_=n,Q(!qe(n)&&We(n)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(n){return n.getChild(this.indexPath_)}isDefinedOn(n){return!n.getChild(this.indexPath_).isEmpty()}compare(n,t){let r=this.extractChild(n.node),i=this.extractChild(t.node),o=r.compareTo(i);return o===0?xs(n.name,t.name):o}makePost(n,t){let r=ln(n),i=Oe.EMPTY_NODE.updateChild(this.indexPath_,r);return new Ge(t,i)}maxPost(){let n=Oe.EMPTY_NODE.updateChild(this.indexPath_,Kc);return new Ge(vs,n)}toString(){return jc(this.indexPath_,0).join("/")}};var xy=class extends Va{compare(n,t){let r=n.node.compareTo(t.node);return r===0?xs(n.name,t.name):r}isDefinedOn(n){return!0}indexedValueChanged(n,t){return!n.equals(t)}minPost(){return Ge.MIN}maxPost(){return Ge.MAX}makePost(n,t){let r=ln(n);return new Ge(t,r)}toString(){return".value"}},E5=new xy;function AD(e){return{type:"value",snapshotNode:e}}function Ha(e,n){return{type:"child_added",snapshotNode:n,childName:e}}function Hc(e,n){return{type:"child_removed",snapshotNode:n,childName:e}}function zc(e,n,t){return{type:"child_changed",snapshotNode:n,childName:e,oldSnap:t}}function I5(e,n){return{type:"child_moved",snapshotNode:n,childName:e}}var Wc=class{constructor(n){this.index_=n}updateChild(n,t,r,i,o,c){Q(n.isIndexed(this.index_),"A node must be indexed if only a child is updated");let h=n.getImmediateChild(t);return h.getChild(i).equals(r.getChild(i))&&h.isEmpty()===r.isEmpty()||(c!=null&&(r.isEmpty()?n.hasChild(t)?c.trackChildChange(Hc(t,h)):Q(n.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?c.trackChildChange(Ha(t,r)):c.trackChildChange(zc(t,r,h))),n.isLeafNode()&&r.isEmpty())?n:n.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(n,t,r){return r!=null&&(n.isLeafNode()||n.forEachChild(Ht,(i,o)=>{t.hasChild(i)||r.trackChildChange(Hc(i,o))}),t.isLeafNode()||t.forEachChild(Ht,(i,o)=>{if(n.hasChild(i)){let c=n.getImmediateChild(i);c.equals(o)||r.trackChildChange(zc(i,o,c))}else r.trackChildChange(Ha(i,o))})),t.withIndex(this.index_)}updatePriority(n,t){return n.isEmpty()?Oe.EMPTY_NODE:n.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}};var vh=class e{constructor(n){this.indexedFilter_=new Wc(n.getIndex()),this.index_=n.getIndex(),this.startPost_=e.getStartPost_(n),this.endPost_=e.getEndPost_(n),this.startIsInclusive_=!n.startAfterSet_,this.endIsInclusive_=!n.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(n){let t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),n)<=0:this.index_.compare(this.getStartPost(),n)<0,r=this.endIsInclusive_?this.index_.compare(n,this.getEndPost())<=0:this.index_.compare(n,this.getEndPost())<0;return t&&r}updateChild(n,t,r,i,o,c){return this.matches(new Ge(t,r))||(r=Oe.EMPTY_NODE),this.indexedFilter_.updateChild(n,t,r,i,o,c)}updateFullNode(n,t,r){t.isLeafNode()&&(t=Oe.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(Oe.EMPTY_NODE);let o=this;return t.forEachChild(Ht,(c,h)=>{o.matches(new Ge(c,h))||(i=i.updateImmediateChild(c,Oe.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(n,i,r)}updatePriority(n,t){return n}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(n){if(n.hasStart()){let t=n.getIndexStartName();return n.getIndex().makePost(n.getIndexStartValue(),t)}else return n.getIndex().minPost()}static getEndPost_(n){if(n.hasEnd()){let t=n.getIndexEndName();return n.getIndex().makePost(n.getIndexEndValue(),t)}else return n.getIndex().maxPost()}};var Ey=class{constructor(n){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{let r=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=t=>{let r=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new vh(n),this.index_=n.getIndex(),this.limit_=n.getLimit(),this.reverse_=!n.isViewFromLeft(),this.startIsInclusive_=!n.startAfterSet_,this.endIsInclusive_=!n.endBeforeSet_}updateChild(n,t,r,i,o,c){return this.rangedFilter_.matches(new Ge(t,r))||(r=Oe.EMPTY_NODE),n.getImmediateChild(t).equals(r)?n:n.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(n,t,r,i,o,c):this.fullLimitUpdateChild_(n,t,r,o,c)}updateFullNode(n,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=Oe.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<t.numChildren()&&t.isIndexed(this.index_)){i=Oe.EMPTY_NODE.withIndex(this.index_);let o;this.reverse_?o=t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):o=t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let c=0;for(;o.hasNext()&&c<this.limit_;){let h=o.getNext();if(this.withinDirectionalStart(h))if(this.withinDirectionalEnd(h))i=i.updateImmediateChild(h.name,h.node),c++;else break;else continue}}else{i=t.withIndex(this.index_),i=i.updatePriority(Oe.EMPTY_NODE);let o;this.reverse_?o=i.getReverseIterator(this.index_):o=i.getIterator(this.index_);let c=0;for(;o.hasNext();){let h=o.getNext();c<this.limit_&&this.withinDirectionalStart(h)&&this.withinDirectionalEnd(h)?c++:i=i.updateImmediateChild(h.name,Oe.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(n,i,r)}updatePriority(n,t){return n}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(n,t,r,i,o){let c;if(this.reverse_){let b=this.index_.getCompare();c=(I,A)=>b(A,I)}else c=this.index_.getCompare();let h=n;Q(h.numChildren()===this.limit_,"");let g=new Ge(t,r),m=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),v=this.rangedFilter_.matches(g);if(h.hasChild(t)){let b=h.getImmediateChild(t),I=i.getChildAfterChild(this.index_,m,this.reverse_);for(;I!=null&&(I.name===t||h.hasChild(I.name));)I=i.getChildAfterChild(this.index_,I,this.reverse_);let A=I==null?1:c(I,g);if(v&&!r.isEmpty()&&A>=0)return o?.trackChildChange(zc(t,r,b)),h.updateImmediateChild(t,r);{o?.trackChildChange(Hc(t,b));let j=h.updateImmediateChild(t,Oe.EMPTY_NODE);return I!=null&&this.rangedFilter_.matches(I)?(o?.trackChildChange(Ha(I.name,I.node)),j.updateImmediateChild(I.name,I.node)):j}}else return r.isEmpty()?n:v&&c(m,g)>=0?(o!=null&&(o.trackChildChange(Hc(m.name,m.node)),o.trackChildChange(Ha(t,r))),h.updateImmediateChild(t,r).updateImmediateChild(m.name,Oe.EMPTY_NODE)):n}};var Iy=class e{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ht}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return Q(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Q(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ba}hasEnd(){return this.endSet_}getIndexEndValue(){return Q(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Q(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:vs}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return Q(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Ht}copy(){let n=new e;return n.limitSet_=this.limitSet_,n.limit_=this.limit_,n.startSet_=this.startSet_,n.startAfterSet_=this.startAfterSet_,n.indexStartValue_=this.indexStartValue_,n.startNameSet_=this.startNameSet_,n.indexStartName_=this.indexStartName_,n.endSet_=this.endSet_,n.endBeforeSet_=this.endBeforeSet_,n.indexEndValue_=this.indexEndValue_,n.endNameSet_=this.endNameSet_,n.indexEndName_=this.indexEndName_,n.index_=this.index_,n.viewFrom_=this.viewFrom_,n}};function S5(e){return e.loadsAllData()?new Wc(e.getIndex()):e.hasLimit()?new Ey(e):new vh(e)}function US(e){let n={};if(e.isDefault())return n;let t;if(e.index_===Ht?t="$priority":e.index_===E5?t="$value":e.index_===Fa?t="$key":(Q(e.index_ instanceof by,"Unrecognized index type!"),t=e.index_.toString()),n.orderBy=Kt(t),e.startSet_){let r=e.startAfterSet_?"startAfter":"startAt";n[r]=Kt(e.indexStartValue_),e.startNameSet_&&(n[r]+=","+Kt(e.indexStartName_))}if(e.endSet_){let r=e.endBeforeSet_?"endBefore":"endAt";n[r]=Kt(e.indexEndValue_),e.endNameSet_&&(n[r]+=","+Kt(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?n.limitToFirst=e.limit_:n.limitToLast=e.limit_),n}function jS(e){let n={};if(e.startSet_&&(n.sp=e.indexStartValue_,e.startNameSet_&&(n.sn=e.indexStartName_),n.sin=!e.startAfterSet_),e.endSet_&&(n.ep=e.indexEndValue_,e.endNameSet_&&(n.en=e.indexEndName_),n.ein=!e.endBeforeSet_),e.limitSet_){n.l=e.limit_;let t=e.viewFrom_;t===""&&(e.isViewFromLeft()?t="l":t="r"),n.vf=t}return e.index_!==Ht&&(n.i=e.index_.toString()),n}var Sy=class e extends mh{constructor(n,t,r,i){super(),this.repoInfo_=n,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Qc("p:rest:"),this.listens_={}}reportStats(n){throw new Error("Method not implemented.")}static getListenId_(n,t){return t!==void 0?"tag$"+t:(Q(n._queryParams.isDefault(),"should have a tag if it's not a default query."),n._path.toString())}listen(n,t,r,i){let o=n._path.toString();this.log_("Listen called for "+o+" "+n._queryIdentifier);let c=e.getListenId_(n,r),h={};this.listens_[c]=h;let g=US(n._queryParams);this.restRequest_(o+".json",g,(m,v)=>{let b=v;if(m===404&&(b=null,m=null),m===null&&this.onDataUpdate_(o,b,!1,r),ms(this.listens_,c)===h){let I;m?m===401?I="permission_denied":I="rest_error:"+m:I="ok",i(I,null)}})}unlisten(n,t){let r=e.getListenId_(n,t);delete this.listens_[r]}get(n){let t=US(n._queryParams),r=n._path.toString(),i=new Wi;return this.restRequest_(r+".json",t,(o,c)=>{let h=c;o===404&&(h=null,o=null),o===null?(this.onDataUpdate_(r,h,!1,null),i.resolve(h)):i.reject(new Error(h))}),i.promise}refreshAuthToken(n){}restRequest_(n,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,o])=>{i&&i.accessToken&&(t.auth=i.accessToken),o&&o.token&&(t.ac=o.token);let c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+n+"?ns="+this.repoInfo_.namespace+oS(t);this.log_("Sending REST request for "+c);let h=new XMLHttpRequest;h.onreadystatechange=()=>{if(r&&h.readyState===4){this.log_("REST Response for "+c+" received. status:",h.status,"response:",h.responseText);let g=null;if(h.status>=200&&h.status<300){try{g=Oa(h.responseText)}catch{Wn("Failed to parse JSON response for "+c+": "+h.responseText)}r(null,g)}else h.status!==401&&h.status!==404&&Wn("Got unsuccessful REST response for "+c+" Status: "+h.status),r(h.status);r=null}},h.open("GET",c,!0),h.send()})}};var Dy=class{constructor(){this.rootNode_=Oe.EMPTY_NODE}getNode(n){return this.rootNode_.getChild(n)}updateSnapshot(n,t){this.rootNode_=this.rootNode_.updateChild(n,t)}};function bh(){return{value:null,children:new Map}}function TD(e,n,t){if(qe(n))e.value=t,e.children.clear();else if(e.value!==null)e.value=e.value.updateChild(n,t);else{let r=We(n);e.children.has(r)||e.children.set(r,bh());let i=e.children.get(r);n=Dt(n),TD(i,n,t)}}function Ay(e,n,t){e.value!==null?t(n,e.value):D5(e,(r,i)=>{let o=new ht(n.toString()+"/"+r);Ay(i,o,t)})}function D5(e,n){e.children.forEach((t,r)=>{n(r,t)})}var Ty=class{constructor(n){this.collection_=n,this.last_=null}get(){let n=this.collection_.get(),t=Object.assign({},n);return this.last_&&Nn(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=n,t}};var HS=10*1e3,A5=30*1e3,T5=5*60*1e3,My=class{constructor(n,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Ty(n);let r=HS+(A5-HS)*Math.random();Lc(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){let n=this.statsListener_.get(),t={},r=!1;Nn(n,(i,o)=>{o>0&&Qr(this.statsToReport_,i)&&(t[i]=o,r=!0)}),r&&this.server_.reportStats(t),Lc(this.reportStats_.bind(this),Math.floor(Math.random()*2*T5))}};var Ci=function(e){return e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",e}(Ci||{});function sC(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function aC(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function lC(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}var Ny=class e{constructor(n,t,r){this.path=n,this.affectedTree=t,this.revert=r,this.type=Ci.ACK_USER_WRITE,this.source=sC()}operationForChild(n){if(qe(this.path)){if(this.affectedTree.value!=null)return Q(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let t=this.affectedTree.subtree(new ht(n));return new e(st(),t,this.revert)}}else return Q(We(this.path)===n,"operationForChild called for unrelated child."),new e(Dt(this.path),this.affectedTree,this.revert)}};var xh=class e{constructor(n,t){this.source=n,this.path=t,this.type=Ci.LISTEN_COMPLETE}operationForChild(n){return qe(this.path)?new e(this.source,st()):new e(this.source,Dt(this.path))}};var za=class e{constructor(n,t,r){this.source=n,this.path=t,this.snap=r,this.type=Ci.OVERWRITE}operationForChild(n){return qe(this.path)?new e(this.source,st(),this.snap.getImmediateChild(n)):new e(this.source,Dt(this.path),this.snap)}};var Gc=class e{constructor(n,t,r){this.source=n,this.path=t,this.children=r,this.type=Ci.MERGE}operationForChild(n){if(qe(this.path)){let t=this.children.subtree(new ht(n));return t.isEmpty()?null:t.value?new za(this.source,st(),t.value):new e(this.source,st(),t)}else return Q(We(this.path)===n,"Can't get a merge for a child not on the path of the operation"),new e(this.source,Dt(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var _i=class{constructor(n,t,r){this.node_=n,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(n){if(qe(n))return this.isFullyInitialized()&&!this.filtered_;let t=We(n);return this.isCompleteForChild(t)}isCompleteForChild(n){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(n)}getNode(){return this.node_}};var Oy=class{constructor(n){this.query_=n,this.index_=this.query_._queryParams.getIndex()}};function M5(e,n,t,r){let i=[],o=[];return n.forEach(c=>{c.type==="child_changed"&&e.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&o.push(I5(c.childName,c.snapshotNode))}),kc(e,i,"child_removed",n,r,t),kc(e,i,"child_added",n,r,t),kc(e,i,"child_moved",o,r,t),kc(e,i,"child_changed",n,r,t),kc(e,i,"value",n,r,t),i}function kc(e,n,t,r,i,o){let c=r.filter(h=>h.type===t);c.sort((h,g)=>O5(e,h,g)),c.forEach(h=>{let g=N5(e,h,o);i.forEach(m=>{m.respondsTo(h.type)&&n.push(m.createEvent(g,e.query_))})})}function N5(e,n,t){return n.type==="value"||n.type==="child_removed"||(n.prevName=t.getPredecessorChildName(n.childName,n.snapshotNode,e.index_)),n}function O5(e,n,t){if(n.childName==null||t.childName==null)throw gs("Should only compare child_ events.");let r=new Ge(n.childName,n.snapshotNode),i=new Ge(t.childName,t.snapshotNode);return e.index_.compare(r,i)}function Fh(e,n){return{eventCache:e,serverCache:n}}function Bc(e,n,t,r){return Fh(new _i(n,t,r),e.serverCache)}function MD(e,n,t,r){return Fh(e.eventCache,new _i(n,t,r))}function Eh(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function bs(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}var ey,R5=()=>(ey||(ey=new Er(R6)),ey),Gn=class e{constructor(n,t=R5()){this.value=n,this.children=t}static fromObject(n){let t=new e(null);return Nn(n,(r,i)=>{t=t.set(new ht(r),i)}),t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(n,t){if(this.value!=null&&t(this.value))return{path:st(),value:this.value};if(qe(n))return null;{let r=We(n),i=this.children.get(r);if(i!==null){let o=i.findRootMostMatchingPathAndValue(Dt(n),t);return o!=null?{path:jt(new ht(r),o.path),value:o.value}:null}else return null}}findRootMostValueAndPath(n){return this.findRootMostMatchingPathAndValue(n,()=>!0)}subtree(n){if(qe(n))return this;{let t=We(n),r=this.children.get(t);return r!==null?r.subtree(Dt(n)):new e(null)}}set(n,t){if(qe(n))return new e(t,this.children);{let r=We(n),o=(this.children.get(r)||new e(null)).set(Dt(n),t),c=this.children.insert(r,o);return new e(this.value,c)}}remove(n){if(qe(n))return this.children.isEmpty()?new e(null):new e(null,this.children);{let t=We(n),r=this.children.get(t);if(r){let i=r.remove(Dt(n)),o;return i.isEmpty()?o=this.children.remove(t):o=this.children.insert(t,i),this.value===null&&o.isEmpty()?new e(null):new e(this.value,o)}else return this}}get(n){if(qe(n))return this.value;{let t=We(n),r=this.children.get(t);return r?r.get(Dt(n)):null}}setTree(n,t){if(qe(n))return t;{let r=We(n),o=(this.children.get(r)||new e(null)).setTree(Dt(n),t),c;return o.isEmpty()?c=this.children.remove(r):c=this.children.insert(r,o),new e(this.value,c)}}fold(n){return this.fold_(st(),n)}fold_(n,t){let r={};return this.children.inorderTraversal((i,o)=>{r[i]=o.fold_(jt(n,i),t)}),t(n,this.value,r)}findOnPath(n,t){return this.findOnPath_(n,st(),t)}findOnPath_(n,t,r){let i=this.value?r(t,this.value):!1;if(i)return i;if(qe(n))return null;{let o=We(n),c=this.children.get(o);return c?c.findOnPath_(Dt(n),jt(t,o),r):null}}foreachOnPath(n,t){return this.foreachOnPath_(n,st(),t)}foreachOnPath_(n,t,r){if(qe(n))return this;{this.value&&r(t,this.value);let i=We(n),o=this.children.get(i);return o?o.foreachOnPath_(Dt(n),jt(t,i),r):new e(null)}}foreach(n){this.foreach_(st(),n)}foreach_(n,t){this.children.inorderTraversal((r,i)=>{i.foreach_(jt(n,r),t)}),this.value&&t(n,this.value)}foreachChild(n){this.children.inorderTraversal((t,r)=>{r.value&&n(t,r.value)})}};var Jr=class e{constructor(n){this.writeTree_=n}static empty(){return new e(new Gn(null))}};function Vc(e,n,t){if(qe(n))return new Jr(new Gn(t));{let r=e.writeTree_.findRootMostValueAndPath(n);if(r!=null){let i=r.path,o=r.value,c=zn(i,n);return o=o.updateChild(c,t),new Jr(e.writeTree_.set(i,o))}else{let i=new Gn(t),o=e.writeTree_.setTree(n,i);return new Jr(o)}}}function Ry(e,n,t){let r=e;return Nn(t,(i,o)=>{r=Vc(r,jt(n,i),o)}),r}function zS(e,n){if(qe(n))return Jr.empty();{let t=e.writeTree_.setTree(n,new Gn(null));return new Jr(t)}}function Py(e,n){return Es(e,n)!=null}function Es(e,n){let t=e.writeTree_.findRootMostValueAndPath(n);return t!=null?e.writeTree_.get(t.path).getChild(zn(t.path,n)):null}function WS(e){let n=[],t=e.writeTree_.value;return t!=null?t.isLeafNode()||t.forEachChild(Ht,(r,i)=>{n.push(new Ge(r,i))}):e.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&n.push(new Ge(r,i.value))}),n}function Io(e,n){if(qe(n))return e;{let t=Es(e,n);return t!=null?new Jr(new Gn(t)):new Jr(e.writeTree_.subtree(n))}}function ky(e){return e.writeTree_.isEmpty()}function Wa(e,n){return ND(st(),e.writeTree_,n)}function ND(e,n,t){if(n.value!=null)return t.updateChild(e,n.value);{let r=null;return n.children.inorderTraversal((i,o)=>{i===".priority"?(Q(o.value!==null,"Priority writes must always be leaf nodes"),r=o.value):t=ND(jt(e,i),o,t)}),!t.getChild(e).isEmpty()&&r!==null&&(t=t.updateChild(jt(e,".priority"),r)),t}}function Bh(e,n){return kD(n,e)}function P5(e,n,t,r,i){Q(r>e.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),e.allWrites.push({path:n,snap:t,writeId:r,visible:i}),i&&(e.visibleWrites=Vc(e.visibleWrites,n,t)),e.lastWriteId=r}function k5(e,n,t,r){Q(r>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:n,children:t,writeId:r,visible:!0}),e.visibleWrites=Ry(e.visibleWrites,n,t),e.lastWriteId=r}function L5(e,n){for(let t=0;t<e.allWrites.length;t++){let r=e.allWrites[t];if(r.writeId===n)return r}return null}function F5(e,n){let t=e.allWrites.findIndex(h=>h.writeId===n);Q(t>=0,"removeWrite called with nonexistent writeId.");let r=e.allWrites[t];e.allWrites.splice(t,1);let i=r.visible,o=!1,c=e.allWrites.length-1;for(;i&&c>=0;){let h=e.allWrites[c];h.visible&&(c>=t&&B5(h,r.path)?i=!1:xr(r.path,h.path)&&(o=!0)),c--}if(i){if(o)return V5(e),!0;if(r.snap)e.visibleWrites=zS(e.visibleWrites,r.path);else{let h=r.children;Nn(h,g=>{e.visibleWrites=zS(e.visibleWrites,jt(r.path,g))})}return!0}else return!1}function B5(e,n){if(e.snap)return xr(e.path,n);for(let t in e.children)if(e.children.hasOwnProperty(t)&&xr(jt(e.path,t),n))return!0;return!1}function V5(e){e.visibleWrites=OD(e.allWrites,U5,st()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}function U5(e){return e.visible}function OD(e,n,t){let r=Jr.empty();for(let i=0;i<e.length;++i){let o=e[i];if(n(o)){let c=o.path,h;if(o.snap)xr(t,c)?(h=zn(t,c),r=Vc(r,h,o.snap)):xr(c,t)&&(h=zn(c,t),r=Vc(r,st(),o.snap.getChild(h)));else if(o.children){if(xr(t,c))h=zn(t,c),r=Ry(r,h,o.children);else if(xr(c,t))if(h=zn(c,t),qe(h))r=Ry(r,st(),o.children);else{let g=ms(o.children,We(h));if(g){let m=g.getChild(Dt(h));r=Vc(r,st(),m)}}}else throw gs("WriteRecord should have .snap or .children")}}return r}function RD(e,n,t,r,i){if(!r&&!i){let o=Es(e.visibleWrites,n);if(o!=null)return o;{let c=Io(e.visibleWrites,n);if(ky(c))return t;if(t==null&&!Py(c,st()))return null;{let h=t||Oe.EMPTY_NODE;return Wa(c,h)}}}else{let o=Io(e.visibleWrites,n);if(!i&&ky(o))return t;if(!i&&t==null&&!Py(o,st()))return null;{let c=function(m){return(m.visible||i)&&(!r||!~r.indexOf(m.writeId))&&(xr(m.path,n)||xr(n,m.path))},h=OD(e.allWrites,c,n),g=t||Oe.EMPTY_NODE;return Wa(h,g)}}}function j5(e,n,t){let r=Oe.EMPTY_NODE,i=Es(e.visibleWrites,n);if(i)return i.isLeafNode()||i.forEachChild(Ht,(o,c)=>{r=r.updateImmediateChild(o,c)}),r;if(t){let o=Io(e.visibleWrites,n);return t.forEachChild(Ht,(c,h)=>{let g=Wa(Io(o,new ht(c)),h);r=r.updateImmediateChild(c,g)}),WS(o).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}else{let o=Io(e.visibleWrites,n);return WS(o).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}}function H5(e,n,t,r,i){Q(r||i,"Either existingEventSnap or existingServerSnap must exist");let o=jt(n,t);if(Py(e.visibleWrites,o))return null;{let c=Io(e.visibleWrites,o);return ky(c)?i.getChild(t):Wa(c,i.getChild(t))}}function z5(e,n,t,r){let i=jt(n,t),o=Es(e.visibleWrites,i);if(o!=null)return o;if(r.isCompleteForChild(t)){let c=Io(e.visibleWrites,i);return Wa(c,r.getNode().getImmediateChild(t))}else return null}function W5(e,n){return Es(e.visibleWrites,n)}function G5(e,n,t,r,i,o,c){let h,g=Io(e.visibleWrites,n),m=Es(g,st());if(m!=null)h=m;else if(t!=null)h=Wa(g,t);else return[];if(h=h.withIndex(c),!h.isEmpty()&&!h.isLeafNode()){let v=[],b=c.getCompare(),I=o?h.getReverseIteratorFrom(r,c):h.getIteratorFrom(r,c),A=I.getNext();for(;A&&v.length<i;)b(A,r)!==0&&v.push(A),A=I.getNext();return v}else return[]}function $5(){return{visibleWrites:Jr.empty(),allWrites:[],lastWriteId:-1}}function Ih(e,n,t,r){return RD(e.writeTree,e.treePath,n,t,r)}function cC(e,n){return j5(e.writeTree,e.treePath,n)}function GS(e,n,t,r){return H5(e.writeTree,e.treePath,n,t,r)}function Sh(e,n){return W5(e.writeTree,jt(e.treePath,n))}function q5(e,n,t,r,i,o){return G5(e.writeTree,e.treePath,n,t,r,i,o)}function uC(e,n,t){return z5(e.writeTree,e.treePath,n,t)}function PD(e,n){return kD(jt(e.treePath,n),e.writeTree)}function kD(e,n){return{treePath:e,writeTree:n}}var Ly=class{constructor(){this.changeMap=new Map}trackChildChange(n){let t=n.type,r=n.childName;Q(t==="child_added"||t==="child_changed"||t==="child_removed","Only child changes supported for tracking"),Q(r!==".priority","Only non-priority child changes can be tracked.");let i=this.changeMap.get(r);if(i){let o=i.type;if(t==="child_added"&&o==="child_removed")this.changeMap.set(r,zc(r,n.snapshotNode,i.snapshotNode));else if(t==="child_removed"&&o==="child_added")this.changeMap.delete(r);else if(t==="child_removed"&&o==="child_changed")this.changeMap.set(r,Hc(r,i.oldSnap));else if(t==="child_changed"&&o==="child_added")this.changeMap.set(r,Ha(r,n.snapshotNode));else if(t==="child_changed"&&o==="child_changed")this.changeMap.set(r,zc(r,n.snapshotNode,i.oldSnap));else throw gs("Illegal combination of changes: "+n+" occurred after "+i)}else this.changeMap.set(r,n)}getChanges(){return Array.from(this.changeMap.values())}};var Fy=class{getCompleteChild(n){return null}getChildAfterChild(n,t,r){return null}},LD=new Fy,$c=class{constructor(n,t,r=null){this.writes_=n,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(n){let t=this.viewCache_.eventCache;if(t.isCompleteForChild(n))return t.getNode().getImmediateChild(n);{let r=this.optCompleteServerCache_!=null?new _i(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return uC(this.writes_,n,r)}}getChildAfterChild(n,t,r){let i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:bs(this.viewCache_),o=q5(this.writes_,i,t,1,r,n);return o.length===0?null:o[0]}};function Y5(e){return{filter:e}}function X5(e,n){Q(n.eventCache.getNode().isIndexed(e.filter.getIndex()),"Event snap not indexed"),Q(n.serverCache.getNode().isIndexed(e.filter.getIndex()),"Server snap not indexed")}function Z5(e,n,t,r,i){let o=new Ly,c,h;if(t.type===Ci.OVERWRITE){let m=t;m.source.fromUser?c=By(e,n,m.path,m.snap,r,i,o):(Q(m.source.fromServer,"Unknown source."),h=m.source.tagged||n.serverCache.isFiltered()&&!qe(m.path),c=Dh(e,n,m.path,m.snap,r,i,h,o))}else if(t.type===Ci.MERGE){let m=t;m.source.fromUser?c=K5(e,n,m.path,m.children,r,i,o):(Q(m.source.fromServer,"Unknown source."),h=m.source.tagged||n.serverCache.isFiltered(),c=Vy(e,n,m.path,m.children,r,i,h,o))}else if(t.type===Ci.ACK_USER_WRITE){let m=t;m.revert?c=tB(e,n,m.path,r,i,o):c=J5(e,n,m.path,m.affectedTree,r,i,o)}else if(t.type===Ci.LISTEN_COMPLETE)c=eB(e,n,t.path,r,o);else throw gs("Unknown operation type: "+t.type);let g=o.getChanges();return Q5(n,c,g),{viewCache:c,changes:g}}function Q5(e,n,t){let r=n.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=Eh(e);(t.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&t.push(AD(Eh(n)))}}function FD(e,n,t,r,i,o){let c=n.eventCache;if(Sh(r,t)!=null)return n;{let h,g;if(qe(t))if(Q(n.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),n.serverCache.isFiltered()){let m=bs(n),v=m instanceof Oe?m:Oe.EMPTY_NODE,b=cC(r,v);h=e.filter.updateFullNode(n.eventCache.getNode(),b,o)}else{let m=Ih(r,bs(n));h=e.filter.updateFullNode(n.eventCache.getNode(),m,o)}else{let m=We(t);if(m===".priority"){Q(Do(t)===1,"Can't have a priority with additional path components");let v=c.getNode();g=n.serverCache.getNode();let b=GS(r,t,v,g);b!=null?h=e.filter.updatePriority(v,b):h=c.getNode()}else{let v=Dt(t),b;if(c.isCompleteForChild(m)){g=n.serverCache.getNode();let I=GS(r,t,c.getNode(),g);I!=null?b=c.getNode().getImmediateChild(m).updateChild(v,I):b=c.getNode().getImmediateChild(m)}else b=uC(r,m,n.serverCache);b!=null?h=e.filter.updateChild(c.getNode(),m,b,v,i,o):h=c.getNode()}}return Bc(n,h,c.isFullyInitialized()||qe(t),e.filter.filtersNodes())}}function Dh(e,n,t,r,i,o,c,h){let g=n.serverCache,m,v=c?e.filter:e.filter.getIndexedFilter();if(qe(t))m=v.updateFullNode(g.getNode(),r,null);else if(v.filtersNodes()&&!g.isFiltered()){let A=g.getNode().updateChild(t,r);m=v.updateFullNode(g.getNode(),A,null)}else{let A=We(t);if(!g.isCompleteForPath(t)&&Do(t)>1)return n;let R=Dt(t),Y=g.getNode().getImmediateChild(A).updateChild(R,r);A===".priority"?m=v.updatePriority(g.getNode(),Y):m=v.updateChild(g.getNode(),A,Y,R,LD,null)}let b=MD(n,m,g.isFullyInitialized()||qe(t),v.filtersNodes()),I=new $c(i,b,o);return FD(e,b,t,i,I,h)}function By(e,n,t,r,i,o,c){let h=n.eventCache,g,m,v=new $c(i,n,o);if(qe(t))m=e.filter.updateFullNode(n.eventCache.getNode(),r,c),g=Bc(n,m,!0,e.filter.filtersNodes());else{let b=We(t);if(b===".priority")m=e.filter.updatePriority(n.eventCache.getNode(),r),g=Bc(n,m,h.isFullyInitialized(),h.isFiltered());else{let I=Dt(t),A=h.getNode().getImmediateChild(b),R;if(qe(I))R=r;else{let j=v.getCompleteChild(b);j!=null?nC(I)===".priority"&&j.getChild(bD(I)).isEmpty()?R=j:R=j.updateChild(I,r):R=Oe.EMPTY_NODE}if(A.equals(R))g=n;else{let j=e.filter.updateChild(h.getNode(),b,R,I,v,c);g=Bc(n,j,h.isFullyInitialized(),e.filter.filtersNodes())}}}return g}function $S(e,n){return e.eventCache.isCompleteForChild(n)}function K5(e,n,t,r,i,o,c){let h=n;return r.foreach((g,m)=>{let v=jt(t,g);$S(n,We(v))&&(h=By(e,h,v,m,i,o,c))}),r.foreach((g,m)=>{let v=jt(t,g);$S(n,We(v))||(h=By(e,h,v,m,i,o,c))}),h}function qS(e,n,t){return t.foreach((r,i)=>{n=n.updateChild(r,i)}),n}function Vy(e,n,t,r,i,o,c,h){if(n.serverCache.getNode().isEmpty()&&!n.serverCache.isFullyInitialized())return n;let g=n,m;qe(t)?m=r:m=new Gn(null).setTree(t,r);let v=n.serverCache.getNode();return m.children.inorderTraversal((b,I)=>{if(v.hasChild(b)){let A=n.serverCache.getNode().getImmediateChild(b),R=qS(e,A,I);g=Dh(e,g,new ht(b),R,i,o,c,h)}}),m.children.inorderTraversal((b,I)=>{let A=!n.serverCache.isCompleteForChild(b)&&I.value===null;if(!v.hasChild(b)&&!A){let R=n.serverCache.getNode().getImmediateChild(b),j=qS(e,R,I);g=Dh(e,g,new ht(b),j,i,o,c,h)}}),g}function J5(e,n,t,r,i,o,c){if(Sh(i,t)!=null)return n;let h=n.serverCache.isFiltered(),g=n.serverCache;if(r.value!=null){if(qe(t)&&g.isFullyInitialized()||g.isCompleteForPath(t))return Dh(e,n,t,g.getNode().getChild(t),i,o,h,c);if(qe(t)){let m=new Gn(null);return g.getNode().forEachChild(Fa,(v,b)=>{m=m.set(new ht(v),b)}),Vy(e,n,t,m,i,o,h,c)}else return n}else{let m=new Gn(null);return r.foreach((v,b)=>{let I=jt(t,v);g.isCompleteForPath(I)&&(m=m.set(v,g.getNode().getChild(I)))}),Vy(e,n,t,m,i,o,h,c)}}function eB(e,n,t,r,i){let o=n.serverCache,c=MD(n,o.getNode(),o.isFullyInitialized()||qe(t),o.isFiltered());return FD(e,c,t,r,LD,i)}function tB(e,n,t,r,i,o){let c;if(Sh(r,t)!=null)return n;{let h=new $c(r,n,i),g=n.eventCache.getNode(),m;if(qe(t)||We(t)===".priority"){let v;if(n.serverCache.isFullyInitialized())v=Ih(r,bs(n));else{let b=n.serverCache.getNode();Q(b instanceof Oe,"serverChildren would be complete if leaf node"),v=cC(r,b)}v=v,m=e.filter.updateFullNode(g,v,o)}else{let v=We(t),b=uC(r,v,n.serverCache);b==null&&n.serverCache.isCompleteForChild(v)&&(b=g.getImmediateChild(v)),b!=null?m=e.filter.updateChild(g,v,b,Dt(t),h,o):n.eventCache.getNode().hasChild(v)?m=e.filter.updateChild(g,v,Oe.EMPTY_NODE,Dt(t),h,o):m=g,m.isEmpty()&&n.serverCache.isFullyInitialized()&&(c=Ih(r,bs(n)),c.isLeafNode()&&(m=e.filter.updateFullNode(m,c,o)))}return c=n.serverCache.isFullyInitialized()||Sh(r,st())!=null,Bc(n,m,c,e.filter.filtersNodes())}}var Uy=class{constructor(n,t){this.query_=n,this.eventRegistrations_=[];let r=this.query_._queryParams,i=new Wc(r.getIndex()),o=S5(r);this.processor_=Y5(o);let c=t.serverCache,h=t.eventCache,g=i.updateFullNode(Oe.EMPTY_NODE,c.getNode(),null),m=o.updateFullNode(Oe.EMPTY_NODE,h.getNode(),null),v=new _i(g,c.isFullyInitialized(),i.filtersNodes()),b=new _i(m,h.isFullyInitialized(),o.filtersNodes());this.viewCache_=Fh(b,v),this.eventGenerator_=new Oy(this.query_)}get query(){return this.query_}};function nB(e){return e.viewCache_.serverCache.getNode()}function rB(e){return Eh(e.viewCache_)}function iB(e,n){let t=bs(e.viewCache_);return t&&(e.query._queryParams.loadsAllData()||!qe(n)&&!t.getImmediateChild(We(n)).isEmpty())?t.getChild(n):null}function YS(e){return e.eventRegistrations_.length===0}function oB(e,n){e.eventRegistrations_.push(n)}function XS(e,n,t){let r=[];if(t){Q(n==null,"A cancel should cancel all event registrations.");let i=e.query._path;e.eventRegistrations_.forEach(o=>{let c=o.createCancelEvent(t,i);c&&r.push(c)})}if(n){let i=[];for(let o=0;o<e.eventRegistrations_.length;++o){let c=e.eventRegistrations_[o];if(!c.matches(n))i.push(c);else if(n.hasAnyCallback()){i=i.concat(e.eventRegistrations_.slice(o+1));break}}e.eventRegistrations_=i}else e.eventRegistrations_=[];return r}function ZS(e,n,t,r){n.type===Ci.MERGE&&n.source.queryId!==null&&(Q(bs(e.viewCache_),"We should always have a full cache before handling merges"),Q(Eh(e.viewCache_),"Missing event cache, even though we have a server cache"));let i=e.viewCache_,o=Z5(e.processor_,i,n,t,r);return X5(e.processor_,o.viewCache),Q(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=o.viewCache,BD(e,o.changes,o.viewCache.eventCache.getNode(),null)}function sB(e,n){let t=e.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Ht,(o,c)=>{r.push(Ha(o,c))}),t.isFullyInitialized()&&r.push(AD(t.getNode())),BD(e,r,t.getNode(),n)}function BD(e,n,t,r){let i=r?[r]:e.eventRegistrations_;return M5(e.eventGenerator_,n,t,i)}var Ah,Th=class{constructor(){this.views=new Map}};function aB(e){Q(!Ah,"__referenceConstructor has already been defined"),Ah=e}function lB(){return Q(Ah,"Reference.ts has not been loaded"),Ah}function cB(e){return e.views.size===0}function dC(e,n,t,r){let i=n.source.queryId;if(i!==null){let o=e.views.get(i);return Q(o!=null,"SyncTree gave us an op for an invalid query."),ZS(o,n,t,r)}else{let o=[];for(let c of e.views.values())o=o.concat(ZS(c,n,t,r));return o}}function VD(e,n,t,r,i){let o=n._queryIdentifier,c=e.views.get(o);if(!c){let h=Ih(t,i?r:null),g=!1;h?g=!0:r instanceof Oe?(h=cC(t,r),g=!1):(h=Oe.EMPTY_NODE,g=!1);let m=Fh(new _i(h,g,!1),new _i(r,i,!1));return new Uy(n,m)}return c}function uB(e,n,t,r,i,o){let c=VD(e,n,r,i,o);return e.views.has(n._queryIdentifier)||e.views.set(n._queryIdentifier,c),oB(c,t),sB(c,t)}function dB(e,n,t,r){let i=n._queryIdentifier,o=[],c=[],h=Ao(e);if(i==="default")for(let[g,m]of e.views.entries())c=c.concat(XS(m,t,r)),YS(m)&&(e.views.delete(g),m.query._queryParams.loadsAllData()||o.push(m.query));else{let g=e.views.get(i);g&&(c=c.concat(XS(g,t,r)),YS(g)&&(e.views.delete(i),g.query._queryParams.loadsAllData()||o.push(g.query)))}return h&&!Ao(e)&&o.push(new(lB())(n._repo,n._path)),{removed:o,events:c}}function UD(e){let n=[];for(let t of e.views.values())t.query._queryParams.loadsAllData()||n.push(t);return n}function So(e,n){let t=null;for(let r of e.views.values())t=t||iB(r,n);return t}function jD(e,n){if(n._queryParams.loadsAllData())return Vh(e);{let r=n._queryIdentifier;return e.views.get(r)}}function HD(e,n){return jD(e,n)!=null}function Ao(e){return Vh(e)!=null}function Vh(e){for(let n of e.views.values())if(n.query._queryParams.loadsAllData())return n;return null}var Mh;function fB(e){Q(!Mh,"__referenceConstructor has already been defined"),Mh=e}function hB(){return Q(Mh,"Reference.ts has not been loaded"),Mh}var pB=1,Nh=class{constructor(n){this.listenProvider_=n,this.syncPointTree_=new Gn(null),this.pendingWriteTree_=$5(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function zD(e,n,t,r,i){return P5(e.pendingWriteTree_,n,t,r,i),i?Ya(e,new za(sC(),n,t)):[]}function gB(e,n,t,r){k5(e.pendingWriteTree_,n,t,r);let i=Gn.fromObject(t);return Ya(e,new Gc(sC(),n,i))}function Eo(e,n,t=!1){let r=L5(e.pendingWriteTree_,n);if(F5(e.pendingWriteTree_,n)){let o=new Gn(null);return r.snap!=null?o=o.set(st(),!0):Nn(r.children,c=>{o=o.set(new ht(c),!0)}),Ya(e,new Ny(r.path,o,t))}else return[]}function Jc(e,n,t){return Ya(e,new za(aC(),n,t))}function mB(e,n,t){let r=Gn.fromObject(t);return Ya(e,new Gc(aC(),n,r))}function yB(e,n){return Ya(e,new xh(aC(),n))}function CB(e,n,t){let r=hC(e,t);if(r){let i=pC(r),o=i.path,c=i.queryId,h=zn(o,n),g=new xh(lC(c),h);return gC(e,o,g)}else return[]}function Oh(e,n,t,r,i=!1){let o=n._path,c=e.syncPointTree_.get(o),h=[];if(c&&(n._queryIdentifier==="default"||HD(c,n))){let g=dB(c,n,t,r);cB(c)&&(e.syncPointTree_=e.syncPointTree_.remove(o));let m=g.removed;if(h=g.events,!i){let v=m.findIndex(I=>I._queryParams.loadsAllData())!==-1,b=e.syncPointTree_.findOnPath(o,(I,A)=>Ao(A));if(v&&!b){let I=e.syncPointTree_.subtree(o);if(!I.isEmpty()){let A=vB(I);for(let R=0;R<A.length;++R){let j=A[R],Y=j.query,G=qD(e,j);e.listenProvider_.startListening(Uc(Y),qc(e,Y),G.hashFn,G.onComplete)}}}!b&&m.length>0&&!r&&(v?e.listenProvider_.stopListening(Uc(n),null):m.forEach(I=>{let A=e.queryToTagMap.get(Uh(I));e.listenProvider_.stopListening(Uc(I),A)}))}bB(e,m)}return h}function WD(e,n,t,r){let i=hC(e,r);if(i!=null){let o=pC(i),c=o.path,h=o.queryId,g=zn(c,n),m=new za(lC(h),g,t);return gC(e,c,m)}else return[]}function _B(e,n,t,r){let i=hC(e,r);if(i){let o=pC(i),c=o.path,h=o.queryId,g=zn(c,n),m=Gn.fromObject(t),v=new Gc(lC(h),g,m);return gC(e,c,v)}else return[]}function jy(e,n,t,r=!1){let i=n._path,o=null,c=!1;e.syncPointTree_.foreachOnPath(i,(I,A)=>{let R=zn(I,i);o=o||So(A,R),c=c||Ao(A)});let h=e.syncPointTree_.get(i);h?(c=c||Ao(h),o=o||So(h,st())):(h=new Th,e.syncPointTree_=e.syncPointTree_.set(i,h));let g;o!=null?g=!0:(g=!1,o=Oe.EMPTY_NODE,e.syncPointTree_.subtree(i).foreachChild((A,R)=>{let j=So(R,st());j&&(o=o.updateImmediateChild(A,j))}));let m=HD(h,n);if(!m&&!n._queryParams.loadsAllData()){let I=Uh(n);Q(!e.queryToTagMap.has(I),"View does not exist, but we have a tag");let A=xB();e.queryToTagMap.set(I,A),e.tagToQueryMap.set(A,I)}let v=Bh(e.pendingWriteTree_,i),b=uB(h,n,t,v,o,g);if(!m&&!c&&!r){let I=jD(h,n);b=b.concat(EB(e,n,I))}return b}function fC(e,n,t){let i=e.pendingWriteTree_,o=e.syncPointTree_.findOnPath(n,(c,h)=>{let g=zn(c,n),m=So(h,g);if(m)return m});return RD(i,n,o,t,!0)}function wB(e,n){let t=n._path,r=null;e.syncPointTree_.foreachOnPath(t,(m,v)=>{let b=zn(m,t);r=r||So(v,b)});let i=e.syncPointTree_.get(t);i?r=r||So(i,st()):(i=new Th,e.syncPointTree_=e.syncPointTree_.set(t,i));let o=r!=null,c=o?new _i(r,!0,!1):null,h=Bh(e.pendingWriteTree_,n._path),g=VD(i,n,h,o?c.getNode():Oe.EMPTY_NODE,o);return rB(g)}function Ya(e,n){return GD(n,e.syncPointTree_,null,Bh(e.pendingWriteTree_,st()))}function GD(e,n,t,r){if(qe(e.path))return $D(e,n,t,r);{let i=n.get(st());t==null&&i!=null&&(t=So(i,st()));let o=[],c=We(e.path),h=e.operationForChild(c),g=n.children.get(c);if(g&&h){let m=t?t.getImmediateChild(c):null,v=PD(r,c);o=o.concat(GD(h,g,m,v))}return i&&(o=o.concat(dC(i,e,r,t))),o}}function $D(e,n,t,r){let i=n.get(st());t==null&&i!=null&&(t=So(i,st()));let o=[];return n.children.inorderTraversal((c,h)=>{let g=t?t.getImmediateChild(c):null,m=PD(r,c),v=e.operationForChild(c);v&&(o=o.concat($D(v,h,g,m)))}),i&&(o=o.concat(dC(i,e,r,t))),o}function qD(e,n){let t=n.query,r=qc(e,t);return{hashFn:()=>(nB(n)||Oe.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?CB(e,t._path,r):yB(e,t._path);{let o=L6(i,t);return Oh(e,t,null,o)}}}}function qc(e,n){let t=Uh(n);return e.queryToTagMap.get(t)}function Uh(e){return e._path.toString()+"$"+e._queryIdentifier}function hC(e,n){return e.tagToQueryMap.get(n)}function pC(e){let n=e.indexOf("$");return Q(n!==-1&&n<e.length-1,"Bad queryKey."),{queryId:e.substr(n+1),path:new ht(e.substr(0,n))}}function gC(e,n,t){let r=e.syncPointTree_.get(n);Q(r,"Missing sync point for query tag that we're tracking");let i=Bh(e.pendingWriteTree_,n);return dC(r,t,i,null)}function vB(e){return e.fold((n,t,r)=>{if(t&&Ao(t))return[Vh(t)];{let i=[];return t&&(i=UD(t)),Nn(r,(o,c)=>{i=i.concat(c)}),i}})}function Uc(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(hB())(e._repo,e._path):e}function bB(e,n){for(let t=0;t<n.length;++t){let r=n[t];if(!r._queryParams.loadsAllData()){let i=Uh(r),o=e.queryToTagMap.get(i);e.queryToTagMap.delete(i),e.tagToQueryMap.delete(o)}}}function xB(){return pB++}function EB(e,n,t){let r=n._path,i=qc(e,n),o=qD(e,t),c=e.listenProvider_.startListening(Uc(n),i,o.hashFn,o.onComplete),h=e.syncPointTree_.subtree(r);if(i)Q(!Ao(h.value),"If we're adding a query, it shouldn't be shadowed");else{let g=h.fold((m,v,b)=>{if(!qe(m)&&v&&Ao(v))return[Vh(v).query];{let I=[];return v&&(I=I.concat(UD(v).map(A=>A.query))),Nn(b,(A,R)=>{I=I.concat(R)}),I}});for(let m=0;m<g.length;++m){let v=g[m];e.listenProvider_.stopListening(Uc(v),qc(e,v))}}return c}var Hy=class e{constructor(n){this.node_=n}getImmediateChild(n){let t=this.node_.getImmediateChild(n);return new e(t)}node(){return this.node_}},zy=class e{constructor(n,t){this.syncTree_=n,this.path_=t}getImmediateChild(n){let t=jt(this.path_,n);return new e(this.syncTree_,t)}node(){return fC(this.syncTree_,this.path_)}},IB=function(e){return e=e||{},e.timestamp=e.timestamp||new Date().getTime(),e},QS=function(e,n,t){if(!e||typeof e!="object")return e;if(Q(".sv"in e,"Unexpected leaf node or priority contents"),typeof e[".sv"]=="string")return SB(e[".sv"],n,t);if(typeof e[".sv"]=="object")return DB(e[".sv"],n);Q(!1,"Unexpected server value: "+JSON.stringify(e,null,2))},SB=function(e,n,t){switch(e){case"timestamp":return t.timestamp;default:Q(!1,"Unexpected server value: "+e)}},DB=function(e,n,t){e.hasOwnProperty("increment")||Q(!1,"Unexpected server value: "+JSON.stringify(e,null,2));let r=e.increment;typeof r!="number"&&Q(!1,"Unexpected increment value: "+r);let i=n.node();if(Q(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;let c=i.getValue();return typeof c!="number"?r:c+r},YD=function(e,n,t,r){return mC(n,new zy(t,e),r)},XD=function(e,n,t){return mC(e,new Hy(n),t)};function mC(e,n,t){let r=e.getPriority().val(),i=QS(r,n.getImmediateChild(".priority"),t),o;if(e.isLeafNode()){let c=e,h=QS(c.getValue(),n,t);return h!==c.getValue()||i!==c.getPriority().val()?new Ua(h,ln(i)):e}else{let c=e;return o=c,i!==c.getPriority().val()&&(o=o.updatePriority(new Ua(i))),c.forEachChild(Ht,(h,g)=>{let m=mC(g,n.getImmediateChild(h),t);m!==g&&(o=o.updateImmediateChild(h,m))}),o}}var Yc=class{constructor(n="",t=null,r={children:{},childCount:0}){this.name=n,this.parent=t,this.node=r}};function yC(e,n){let t=n instanceof ht?n:new ht(n),r=e,i=We(t);for(;i!==null;){let o=ms(r.node.children,i)||{children:{},childCount:0};r=new Yc(i,r,o),t=Dt(t),i=We(t)}return r}function Xa(e){return e.node.value}function ZD(e,n){e.node.value=n,Wy(e)}function QD(e){return e.node.childCount>0}function AB(e){return Xa(e)===void 0&&!QD(e)}function jh(e,n){Nn(e.node.children,(t,r)=>{n(new Yc(t,e,r))})}function KD(e,n,t,r){t&&!r&&n(e),jh(e,i=>{KD(i,n,!0,r)}),t&&r&&n(e)}function TB(e,n,t){let r=t?e:e.parent;for(;r!==null;){if(n(r))return!0;r=r.parent}return!1}function eu(e){return new ht(e.parent===null?e.name:eu(e.parent)+"/"+e.name)}function Wy(e){e.parent!==null&&MB(e.parent,e.name,e)}function MB(e,n,t){let r=AB(t),i=Qr(e.node.children,n);r&&i?(delete e.node.children[n],e.node.childCount--,Wy(e)):!r&&!i&&(e.node.children[n]=t.node,e.node.childCount++,Wy(e))}var NB=/[\[\].#$\/\u0000-\u001F\u007F]/,OB=/[\[\].#$\u0000-\u001F\u007F]/,ty=10*1024*1024,CC=function(e){return typeof e=="string"&&e.length!==0&&!NB.test(e)},JD=function(e){return typeof e=="string"&&e.length!==0&&!OB.test(e)},RB=function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),JD(e)},PB=function(e){return e===null||typeof e=="string"||typeof e=="number"&&!Jy(e)||e&&typeof e=="object"&&Qr(e,".sv")},e2=function(e,n,t,r){r&&n===void 0||Hh(Sc(e,"value"),n,t)},Hh=function(e,n,t){let r=t instanceof ht?new gy(t,e):t;if(n===void 0)throw new Error(e+"contains undefined "+Cs(r));if(typeof n=="function")throw new Error(e+"contains a function "+Cs(r)+" with contents = "+n.toString());if(Jy(n))throw new Error(e+"contains "+n.toString()+" "+Cs(r));if(typeof n=="string"&&n.length>ty/3&&Dc(n)>ty)throw new Error(e+"contains a string greater than "+ty+" utf8 bytes "+Cs(r)+" ('"+n.substring(0,50)+"...')");if(n&&typeof n=="object"){let i=!1,o=!1;if(Nn(n,(c,h)=>{if(c===".value")i=!0;else if(c!==".priority"&&c!==".sv"&&(o=!0,!CC(c)))throw new Error(e+" contains an invalid key ("+c+") "+Cs(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);f5(r,c),Hh(e,h,r),h5(r)}),i&&o)throw new Error(e+' contains ".value" child '+Cs(r)+" in addition to actual children.")}},kB=function(e,n){let t,r;for(t=0;t<n.length;t++){r=n[t];let o=jc(r);for(let c=0;c<o.length;c++)if(!(o[c]===".priority"&&c===o.length-1)){if(!CC(o[c]))throw new Error(e+"contains an invalid key ("+o[c]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}n.sort(d5);let i=null;for(t=0;t<n.length;t++){if(r=n[t],i!==null&&xr(i,r))throw new Error(e+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}},LB=function(e,n,t,r){if(r&&n===void 0)return;let i=Sc(e,"values");if(!(n&&typeof n=="object")||Array.isArray(n))throw new Error(i+" must be an object containing the children to replace.");let o=[];Nn(n,(c,h)=>{let g=new ht(c);if(Hh(i,h,jt(t,g)),nC(g)===".priority"&&!PB(h))throw new Error(i+"contains an invalid value for '"+g.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(g)}),kB(i,o)};var t2=function(e,n,t,r){if(!(r&&t===void 0)&&!JD(t))throw new Error(Sc(e,n)+'was an invalid path = "'+t+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},FB=function(e,n,t,r){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),t2(e,n,t,r)},_C=function(e,n){if(We(n)===".info")throw new Error(e+" failed = Can't modify data under /.info/")},BB=function(e,n){let t=n.path.toString();if(typeof n.repoInfo.host!="string"||n.repoInfo.host.length===0||!CC(n.repoInfo.namespace)&&n.repoInfo.host.split(":")[0]!=="localhost"||t.length!==0&&!RB(t))throw new Error(Sc(e,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var Gy=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function zh(e,n){let t=null;for(let r=0;r<n.length;r++){let i=n[r],o=i.getPath();t!==null&&!rC(o,t.path)&&(e.eventLists_.push(t),t=null),t===null&&(t={events:[],path:o}),t.events.push(i)}t&&e.eventLists_.push(t)}function n2(e,n,t){zh(e,t),r2(e,r=>rC(r,n))}function Ir(e,n,t){zh(e,t),r2(e,r=>xr(r,n)||xr(n,r))}function r2(e,n){e.recursionDepth_++;let t=!0;for(let r=0;r<e.eventLists_.length;r++){let i=e.eventLists_[r];if(i){let o=i.path;n(o)?(VB(e.eventLists_[r]),e.eventLists_[r]=null):t=!1}}t&&(e.eventLists_=[]),e.recursionDepth_--}function VB(e){for(let n=0;n<e.events.length;n++){let t=e.events[n];if(t!==null){e.events[n]=null;let r=t.getEventRunner();ws&&Mn("event: "+t.toString()),qa(r)}}}var UB="repo_interrupt",jB=25,$y=class{constructor(n,t,r,i){this.repoInfo_=n,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Gy,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=bh(),this.transactionQueueTree_=new Yc,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function HB(e,n,t){if(e.stats_=tC(e.repoInfo_),e.forceRestClient_||U6())e.server_=new Sy(e.repoInfo_,(r,i,o,c)=>{KS(e,r,i,o,c)},e.authTokenProvider_,e.appCheckProvider_),setTimeout(()=>JS(e,!0),0);else{if(typeof t<"u"&&t!==null){if(typeof t!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Kt(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}e.persistentConnection_=new iC(e.repoInfo_,n,(r,i,o,c)=>{KS(e,r,i,o,c)},r=>{JS(e,r)},r=>{zB(e,r)},e.authTokenProvider_,e.appCheckProvider_,t),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener(r=>{e.server_.refreshAuthToken(r)}),e.appCheckProvider_.addTokenChangeListener(r=>{e.server_.refreshAppCheckToken(r.token)}),e.statsReporter_=H6(e.repoInfo_,()=>new My(e.stats_,e.server_)),e.infoData_=new Dy,e.infoSyncTree_=new Nh({startListening:(r,i,o,c)=>{let h=[],g=e.infoData_.getNode(r._path);return g.isEmpty()||(h=Jc(e.infoSyncTree_,r._path,g),setTimeout(()=>{c("ok")},0)),h},stopListening:()=>{}}),wC(e,"connected",!1),e.serverSyncTree_=new Nh({startListening:(r,i,o,c)=>(e.server_.listen(r,o,i,(h,g)=>{let m=c(h,g);Ir(e.eventQueue_,r._path,m)}),[]),stopListening:(r,i)=>{e.server_.unlisten(r,i)}})}function i2(e){let t=e.infoData_.getNode(new ht(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function Wh(e){return IB({timestamp:i2(e)})}function KS(e,n,t,r,i){e.dataUpdateCount++;let o=new ht(n);t=e.interceptServerDataCallback_?e.interceptServerDataCallback_(n,t):t;let c=[];if(i)if(r){let g=Ic(t,m=>ln(m));c=_B(e.serverSyncTree_,o,g,i)}else{let g=ln(t);c=WD(e.serverSyncTree_,o,g,i)}else if(r){let g=Ic(t,m=>ln(m));c=mB(e.serverSyncTree_,o,g)}else{let g=ln(t);c=Jc(e.serverSyncTree_,o,g)}let h=o;c.length>0&&(h=Ga(e,o)),Ir(e.eventQueue_,h,c)}function JS(e,n){wC(e,"connected",n),n===!1&&qB(e)}function zB(e,n){Nn(n,(t,r)=>{wC(e,t,r)})}function wC(e,n,t){let r=new ht("/.info/"+n),i=ln(t);e.infoData_.updateSnapshot(r,i);let o=Jc(e.infoSyncTree_,r,i);Ir(e.eventQueue_,r,o)}function vC(e){return e.nextWriteId_++}function WB(e,n,t){let r=wB(e.serverSyncTree_,n);return r!=null?Promise.resolve(r):e.server_.get(n).then(i=>{let o=ln(i).withIndex(n._queryParams.getIndex());jy(e.serverSyncTree_,n,t,!0);let c;if(n._queryParams.loadsAllData())c=Jc(e.serverSyncTree_,n._path,o);else{let h=qc(e.serverSyncTree_,n);c=WD(e.serverSyncTree_,n._path,o,h)}return Ir(e.eventQueue_,n._path,c),Oh(e.serverSyncTree_,n,t,null,!0),o},i=>(tu(e,"get for query "+Kt(n)+" failed: "+i),Promise.reject(new Error(i))))}function GB(e,n,t,r,i){tu(e,"set",{path:n.toString(),value:t,priority:r});let o=Wh(e),c=ln(t,r),h=fC(e.serverSyncTree_,n),g=XD(c,h,o),m=vC(e),v=zD(e.serverSyncTree_,n,g,m,!0);zh(e.eventQueue_,v),e.server_.put(n.toString(),c.val(!0),(I,A)=>{let R=I==="ok";R||Wn("set at "+n+" failed: "+I);let j=Eo(e.serverSyncTree_,m,!R);Ir(e.eventQueue_,n,j),qy(e,i,I,A)});let b=xC(e,n);Ga(e,b),Ir(e.eventQueue_,b,[])}function $B(e,n,t,r){tu(e,"update",{path:n.toString(),value:t});let i=!0,o=Wh(e),c={};if(Nn(t,(h,g)=>{i=!1,c[h]=YD(jt(n,h),ln(g),e.serverSyncTree_,o)}),i)Mn("update() called with empty data.  Don't do anything."),qy(e,r,"ok",void 0);else{let h=vC(e),g=gB(e.serverSyncTree_,n,c,h);zh(e.eventQueue_,g),e.server_.merge(n.toString(),t,(m,v)=>{let b=m==="ok";b||Wn("update at "+n+" failed: "+m);let I=Eo(e.serverSyncTree_,h,!b),A=I.length>0?Ga(e,n):n;Ir(e.eventQueue_,A,I),qy(e,r,m,v)}),Nn(t,m=>{let v=xC(e,jt(n,m));Ga(e,v)}),Ir(e.eventQueue_,n,[])}}function qB(e){tu(e,"onDisconnectEvents");let n=Wh(e),t=bh();Ay(e.onDisconnect_,st(),(i,o)=>{let c=YD(i,o,e.serverSyncTree_,n);TD(t,i,c)});let r=[];Ay(t,st(),(i,o)=>{r=r.concat(Jc(e.serverSyncTree_,i,o));let c=xC(e,i);Ga(e,c)}),e.onDisconnect_=bh(),Ir(e.eventQueue_,st(),r)}function YB(e,n,t){let r;We(n._path)===".info"?r=jy(e.infoSyncTree_,n,t):r=jy(e.serverSyncTree_,n,t),n2(e.eventQueue_,n._path,r)}function eD(e,n,t){let r;We(n._path)===".info"?r=Oh(e.infoSyncTree_,n,t):r=Oh(e.serverSyncTree_,n,t),n2(e.eventQueue_,n._path,r)}function XB(e){e.persistentConnection_&&e.persistentConnection_.interrupt(UB)}function tu(e,...n){let t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":"),Mn(t,...n)}function qy(e,n,t,r){n&&qa(()=>{if(t==="ok")n(null);else{let i=(t||"error").toUpperCase(),o=i;r&&(o+=": "+r);let c=new Error(o);c.code=i,n(c)}})}function o2(e,n,t){return fC(e.serverSyncTree_,n,t)||Oe.EMPTY_NODE}function bC(e,n=e.transactionQueueTree_){if(n||Gh(e,n),Xa(n)){let t=a2(e,n);Q(t.length>0,"Sending zero length transaction queue"),t.every(i=>i.status===0)&&ZB(e,eu(n),t)}else QD(n)&&jh(n,t=>{bC(e,t)})}function ZB(e,n,t){let r=t.map(m=>m.currentWriteId),i=o2(e,n,r),o=i,c=i.hash();for(let m=0;m<t.length;m++){let v=t[m];Q(v.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),v.status=1,v.retryCount++;let b=zn(n,v.path);o=o.updateChild(b,v.currentOutputSnapshotRaw)}let h=o.val(!0),g=n;e.server_.put(g.toString(),h,m=>{tu(e,"transaction put response",{path:g.toString(),status:m});let v=[];if(m==="ok"){let b=[];for(let I=0;I<t.length;I++)t[I].status=2,v=v.concat(Eo(e.serverSyncTree_,t[I].currentWriteId)),t[I].onComplete&&b.push(()=>t[I].onComplete(null,!0,t[I].currentOutputSnapshotResolved)),t[I].unwatcher();Gh(e,yC(e.transactionQueueTree_,n)),bC(e,e.transactionQueueTree_),Ir(e.eventQueue_,n,v);for(let I=0;I<b.length;I++)qa(b[I])}else{if(m==="datastale")for(let b=0;b<t.length;b++)t[b].status===3?t[b].status=4:t[b].status=0;else{Wn("transaction at "+g.toString()+" failed: "+m);for(let b=0;b<t.length;b++)t[b].status=4,t[b].abortReason=m}Ga(e,n)}},c)}function Ga(e,n){let t=s2(e,n),r=eu(t),i=a2(e,t);return QB(e,i,r),r}function QB(e,n,t){if(n.length===0)return;let r=[],i=[],c=n.filter(h=>h.status===0).map(h=>h.currentWriteId);for(let h=0;h<n.length;h++){let g=n[h],m=zn(t,g.path),v=!1,b;if(Q(m!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),g.status===4)v=!0,b=g.abortReason,i=i.concat(Eo(e.serverSyncTree_,g.currentWriteId,!0));else if(g.status===0)if(g.retryCount>=jB)v=!0,b="maxretry",i=i.concat(Eo(e.serverSyncTree_,g.currentWriteId,!0));else{let I=o2(e,g.path,c);g.currentInputSnapshot=I;let A=n[h].update(I.val());if(A!==void 0){Hh("transaction failed: Data returned ",A,g.path);let R=ln(A);typeof A=="object"&&A!=null&&Qr(A,".priority")||(R=R.updatePriority(I.getPriority()));let Y=g.currentWriteId,G=Wh(e),ce=XD(R,I,G);g.currentOutputSnapshotRaw=R,g.currentOutputSnapshotResolved=ce,g.currentWriteId=vC(e),c.splice(c.indexOf(Y),1),i=i.concat(zD(e.serverSyncTree_,g.path,ce,g.currentWriteId,g.applyLocally)),i=i.concat(Eo(e.serverSyncTree_,Y,!0))}else v=!0,b="nodata",i=i.concat(Eo(e.serverSyncTree_,g.currentWriteId,!0))}Ir(e.eventQueue_,t,i),i=[],v&&(n[h].status=2,function(I){setTimeout(I,Math.floor(0))}(n[h].unwatcher),n[h].onComplete&&(b==="nodata"?r.push(()=>n[h].onComplete(null,!1,n[h].currentInputSnapshot)):r.push(()=>n[h].onComplete(new Error(b),!1,null))))}Gh(e,e.transactionQueueTree_);for(let h=0;h<r.length;h++)qa(r[h]);bC(e,e.transactionQueueTree_)}function s2(e,n){let t,r=e.transactionQueueTree_;for(t=We(n);t!==null&&Xa(r)===void 0;)r=yC(r,t),n=Dt(n),t=We(n);return r}function a2(e,n){let t=[];return l2(e,n,t),t.sort((r,i)=>r.order-i.order),t}function l2(e,n,t){let r=Xa(n);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);jh(n,i=>{l2(e,i,t)})}function Gh(e,n){let t=Xa(n);if(t){let r=0;for(let i=0;i<t.length;i++)t[i].status!==2&&(t[r]=t[i],r++);t.length=r,ZD(n,t.length>0?t:void 0)}jh(n,r=>{Gh(e,r)})}function xC(e,n){let t=eu(s2(e,n)),r=yC(e.transactionQueueTree_,n);return TB(r,i=>{ny(e,i)}),ny(e,r),KD(r,i=>{ny(e,i)}),t}function ny(e,n){let t=Xa(n);if(t){let r=[],i=[],o=-1;for(let c=0;c<t.length;c++)t[c].status===3||(t[c].status===1?(Q(o===c-1,"All SENT items should be at beginning of queue."),o=c,t[c].status=3,t[c].abortReason="set"):(Q(t[c].status===0,"Unexpected transaction status in abort"),t[c].unwatcher(),i=i.concat(Eo(e.serverSyncTree_,t[c].currentWriteId,!0)),t[c].onComplete&&r.push(t[c].onComplete.bind(null,new Error("set"),!1,null))));o===-1?ZD(n,void 0):t.length=o+1,Ir(e.eventQueue_,eu(n),i);for(let c=0;c<r.length;c++)qa(r[c])}}function KB(e){let n="",t=e.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}n+="/"+i}return n}function JB(e){let n={};e.charAt(0)==="?"&&(e=e.substring(1));for(let t of e.split("&")){if(t.length===0)continue;let r=t.split("=");r.length===2?n[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Wn(`Invalid query segment '${t}' in query '${e}'`)}return n}var tD=function(e,n){let t=e7(e),r=t.namespace;t.domain==="firebase.com"&&qi(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&t.domain!=="localhost"&&qi("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||N6();let i=t.scheme==="ws"||t.scheme==="wss";return{repoInfo:new ph(t.host,t.secure,r,i,n,"",r!==t.subdomain),path:new ht(t.pathString)}},e7=function(e){let n="",t="",r="",i="",o="",c=!0,h="https",g=443;if(typeof e=="string"){let m=e.indexOf("//");m>=0&&(h=e.substring(0,m-1),e=e.substring(m+2));let v=e.indexOf("/");v===-1&&(v=e.length);let b=e.indexOf("?");b===-1&&(b=e.length),n=e.substring(0,Math.min(v,b)),v<b&&(i=KB(e.substring(v,b)));let I=JB(e.substring(Math.min(e.length,b)));m=n.indexOf(":"),m>=0?(c=h==="https"||h==="wss",g=parseInt(n.substring(m+1),10)):m=n.length;let A=n.slice(0,m);if(A.toLowerCase()==="localhost")t="localhost";else if(A.split(".").length<=2)t=A;else{let R=n.indexOf(".");r=n.substring(0,R).toLowerCase(),t=n.substring(R+1),o=r}"ns"in I&&(o=I.ns)}return{host:n,port:g,domain:t,subdomain:r,secure:c,scheme:h,pathString:i,namespace:o}};var nD="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",t7=function(){let e=0,n=[];return function(t){let r=t===e;e=t;let i,o=new Array(8);for(i=7;i>=0;i--)o[i]=nD.charAt(t%64),t=Math.floor(t/64);Q(t===0,"Cannot push at time == 0");let c=o.join("");if(r){for(i=11;i>=0&&n[i]===63;i--)n[i]=0;n[i]++}else for(i=0;i<12;i++)n[i]=Math.floor(Math.random()*64);for(i=0;i<12;i++)c+=nD.charAt(n[i]);return Q(c.length===20,"nextPushId: Length should be 20."),c}}();var Rh=class{constructor(n,t,r,i){this.eventType=n,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){let n=this.snapshot.ref;return this.eventType==="value"?n._path:n.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Kt(this.snapshot.exportVal())}},Ph=class{constructor(n,t,r){this.eventRegistration=n,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}};var kh=class{constructor(n,t){this.snapshotCallback=n,this.cancelCallback=t}onValue(n,t){this.snapshotCallback.call(null,n,t)}onCancel(n){return Q(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,n)}get hasCancelCallback(){return!!this.cancelCallback}matches(n){return this.snapshotCallback===n.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===n.snapshotCallback.userCallback&&this.snapshotCallback.context===n.snapshotCallback.context}};var Yy=class e{constructor(n,t,r,i){this._repo=n,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return qe(this._path)?null:nC(this._path)}get ref(){return new wi(this._repo,this._path)}get _queryIdentifier(){let n=jS(this._queryParams),t=eC(n);return t==="{}"?"default":t}get _queryObject(){return jS(this._queryParams)}isEqual(n){if(n=vo(n),!(n instanceof e))return!1;let t=this._repo===n._repo,r=rC(this._path,n._path),i=this._queryIdentifier===n._queryIdentifier;return t&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+u5(this._path)}};var wi=class e extends Yy{constructor(n,t){super(n,t,new Iy,!1)}get parent(){let n=bD(this._path);return n===null?null:new e(this._repo,n)}get root(){let n=this;for(;n.parent!==null;)n=n.parent;return n}},Xc=class e{constructor(n,t,r){this._node=n,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(n){let t=new ht(n),r=$a(this.ref,n);return new e(this._node.getChild(t),r,Ht)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(n){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>n(new e(i,$a(this.ref,r),Ht)))}hasChild(n){let t=new ht(n);return!this._node.getChild(t).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}};function J(e,n){return e=vo(e),e._checkNotDeleted("ref"),n!==void 0?$a(e._root,n):e._root}function $a(e,n){return e=vo(e),We(e._path)===null?FB("child","path",n,!1):t2("child","path",n,!1),new wi(e._repo,jt(e._path,n))}function c2(e,n){e=vo(e),_C("push",e._path),e2("push",n,e._path,!0);let t=i2(e._repo),r=t7(t),i=$a(e,r),o=$a(e,r),c;return n!=null?c=To(o,n).then(()=>o):c=Promise.resolve(o),i.then=c.then.bind(c),i.catch=c.then.bind(c,void 0),i}function Sr(e){return _C("remove",e._path),To(e,null)}function To(e,n){e=vo(e),_C("set",e._path),e2("set",n,e._path,!1);let t=new Wi;return GB(e._repo,e._path,n,null,t.wrapCallback(()=>{})),t.promise}function mt(e,n){LB("update",n,e._path,!1);let t=new Wi;return $B(e._repo,e._path,n,t.wrapCallback(()=>{})),t.promise}function me(e){e=vo(e);let n=new kh(()=>{}),t=new Lh(n);return WB(e._repo,e,t).then(r=>new Xc(r,new wi(e._repo,e._path),e._queryParams.getIndex()))}var Lh=class e{constructor(n){this.callbackContext=n}respondsTo(n){return n==="value"}createEvent(n,t){let r=t._queryParams.getIndex();return new Rh("value",this,new Xc(n.snapshotNode,new wi(t._repo,t._path),r))}getEventRunner(n){return n.getEventType()==="cancel"?()=>this.callbackContext.onCancel(n.error):()=>this.callbackContext.onValue(n.snapshot,null)}createCancelEvent(n,t){return this.callbackContext.hasCancelCallback?new Ph(this,n,t):null}matches(n){return n instanceof e?!n.callbackContext||!this.callbackContext?!0:n.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}},Xy=class e{constructor(n,t){this.eventType=n,this.callbackContext=t}respondsTo(n){let t=n==="children_added"?"child_added":n;return t=t==="children_removed"?"child_removed":t,this.eventType===t}createCancelEvent(n,t){return this.callbackContext.hasCancelCallback?new Ph(this,n,t):null}createEvent(n,t){Q(n.childName!=null,"Child events should have a childName.");let r=$a(new wi(t._repo,t._path),n.childName),i=t._queryParams.getIndex();return new Rh(n.type,this,new Xc(n.snapshotNode,r,i),n.prevName)}getEventRunner(n){return n.getEventType()==="cancel"?()=>this.callbackContext.onCancel(n.error):()=>this.callbackContext.onValue(n.snapshot,n.prevName)}matches(n){return n instanceof e?this.eventType===n.eventType&&(!this.callbackContext||!n.callbackContext||this.callbackContext.matches(n.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}};function n7(e,n,t,r,i){let o;if(typeof r=="object"&&(o=void 0,i=r),typeof r=="function"&&(o=r),i&&i.onlyOnce){let g=t,m=(v,b)=>{eD(e._repo,e,h),g(v,b)};m.userCallback=t.userCallback,m.context=t.context,t=m}let c=new kh(t,o||void 0),h=n==="value"?new Lh(c):new Xy(n,c);return YB(e._repo,e,h),()=>eD(e._repo,e,h)}function u2(e,n,t,r){return n7(e,"value",n,t,r)}aB(wi);fB(wi);var r7="FIREBASE_DATABASE_EMULATOR_HOST",Zy={},i7=!1;function o7(e,n,t,r){e.repoInfo_=new ph(`${n}:${t}`,!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0),r&&(e.authTokenProvider_=r)}function s7(e,n,t,r,i){let o=r||e.options.databaseURL;o===void 0&&(e.options.projectId||qi("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Mn("Using default host for project ",e.options.projectId),o=`${e.options.projectId}-default-rtdb.firebaseio.com`);let c=tD(o,i),h=c.repoInfo,g,m;typeof process<"u"&&process.env&&(m=process.env[r7]),m?(g=!0,o=`http://${m}?ns=${h.namespace}`,c=tD(o,i),h=c.repoInfo):g=!c.repoInfo.secure;let v=i&&g?new Fc(Fc.OWNER):new ly(e.name,e.options,n);BB("Invalid Firebase Database URL",c),qe(c.path)||qi("Database URL must point to the root of a Firebase Database (not including a child path).");let b=l7(h,e,v,new ay(e.name,t));return new Qy(b,e)}function a7(e,n){let t=Zy[n];(!t||t[e.key]!==e)&&qi(`Database ${n}(${e.repoInfo_}) has already been deleted.`),XB(e),delete t[e.key]}function l7(e,n,t,r){let i=Zy[n.name];i||(i={},Zy[n.name]=i);let o=i[e.toURLString()];return o&&qi("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new $y(e,i7,t,r),i[e.toURLString()]=o,o}var Qy=class{constructor(n,t){this._repoInternal=n,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(HB(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new wi(this._repo,st())),this._rootInternal}_delete(){return this._rootInternal!==null&&(a7(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(n){this._rootInternal===null&&qi("Cannot call "+n+" on a deleted database.")}};function ee(e=vS(),n){let t=_S(e,"database").getImmediate({identifier:n});if(!t._instanceStarted){let r=QI("database");r&&c7(t,...r)}return t}function c7(e,n,t,r={}){e=vo(e),e._checkNotDeleted("useEmulator"),e._instanceStarted&&qi("Cannot call useEmulator() after instance has already been initialized.");let i=e._repoInternal,o;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&qi('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new Fc(Fc.OWNER);else if(r.mockUserToken){let c=typeof r.mockUserToken=="string"?r.mockUserToken:KI(r.mockUserToken,e.app.options.projectId);o=new Fc(c)}o7(i,n,t,o)}function u7(e){A6(wS),Tc(new Gi("database",(n,{instanceIdentifier:t})=>{let r=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),o=n.getProvider("app-check-internal");return s7(r,i,o,t)},"PUBLIC").setMultipleInstances(!0)),xo(ES,IS,e),xo(ES,IS,"esm2017")}iC.prototype.simpleListen=function(e,n){this.sendRequest("q",{p:e},n)};iC.prototype.echo=function(e,n){this.sendRequest("echo",{d:e},n)};u7();var Ae={production:!0,firebaseConfig:{apiKey:"AIzaSyC2ak3O4qovvrDLGJ-L3a6E1uLASES2xuU",authDomain:"tablefi-31087.firebaseapp.com",databaseURL:"https://tablefi-31087-default-rtdb.europe-west1.firebasedatabase.app",projectId:"tablefi-31087",storageBucket:"tablefi-31087.appspot.com",messagingSenderId:"821585389969",appId:"1:821585389969:web:9383409a2e5fbf601b5230",measurementId:"G-QXT5KZEKGZ"}};var d2=(()=>{class e{db;constructor(){let t=we(Ae.firebaseConfig);this.db=ee(t)}login(t,r){return new Fe(i=>{let o=J(this.db,"Owners");me(o).then(c=>{if(c.exists()){let h=c.val(),m=Object.values(h).find(v=>v.email===t);m?m.password===r?i.next(m):i.error("Invalid password"):i.error("No user found with this email")}else i.error("No owners found in the database")}).catch(c=>{console.error("Error fetching owners:",c),i.error("An error occurred while fetching owners")})}).pipe(yr(i=>(console.error("Error during login:",i),vt([null]))))}static \u0275fac=function(r){return new(r||e)};static \u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var xe=(()=>{class e{router;constructor(t){this.router=t}NavigateTo(t){this.router.navigate([t])}static \u0275fac=function(r){return new(r||e)(He(gi))};static \u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var f2=(()=>{class e{loginService;navigationService;email="";password="";constructor(t,r){this.loginService=t,this.navigationService=r}onSubmit(t){t.preventDefault(),this.loginService.login(this.email,this.password).subscribe({next:r=>{r&&(sessionStorage.setItem("userId",r.id),sessionStorage.setItem("userEmail",r.email),sessionStorage.setItem("uniqueLinkToken",r.uniqueLinkToken),console.log("User logged in:",r),this.navigationService.NavigateTo("changerestaurant"))},error:r=>{alert(r),console.error("Login error:",r)}})}goToPage(t){this.navigationService.NavigateTo(t)}static \u0275fac=function(r){return new(r||e)(W(d2),W(xe))};static \u0275cmp=ie({type:e,selectors:[["app-login"]],standalone:!0,features:[oe],decls:20,vars:2,consts:[[1,"layoutbox"],[1,"head"],[1,"logo"],["src","https://cdn1.mandarin.com.pl/eologo.png","alt","EasyOrder",1,"w-full"],[1,"backbtn",3,"click"],[1,"material-symbols-rounded"],[1,"loginform"],[3,"ngSubmit"],["type","email","id","email","name","email","required","",3,"ngModelChange","ngModel"],["type","password","id","password","name","password","required","",3,"ngModelChange","ngModel"],["type","submit",1,"login"],[1,"footstatic"]],template:function(r,i){r&1&&(T(0,"main")(1,"div",0)(2,"div",1)(3,"div",2),se(4,"img",3),N(),T(5,"div",4),$("click",function(){return i.goToPage("landingpage")}),T(6,"span",5),P(7," arrow_back "),N()()(),T(8,"div",6)(9,"form",7),$("ngSubmit",function(c){return i.onSubmit(c)}),T(10,"div"),P(11," Email "),T(12,"input",8),it("ngModelChange",function(c){return ot(i.email,c)||(i.email=c),c}),N()(),T(13,"div"),P(14," Has\u0142o "),T(15,"input",9),it("ngModelChange",function(c){return ot(i.password,c)||(i.password=c),c}),N()(),se(16,"div"),T(17,"button",10),P(18,"Zaloguj"),N()()(),se(19,"div",11),N()()),r&2&&(Z(12),rt("ngModel",i.email),Z(3),rt("ngModel",i.password))},dependencies:[Ut,er,Qt,Cn,Jn,Tn,an,Hn],styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;justify-content:space-between;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{width:100%;height:64px;padding:0 32px;border-bottom:3px solid #000;display:flex;justify-content:space-between;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{margin:8px 0;height:48px}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .backbtn[_ngcontent-%COMP%]{height:48px;font-size:48px;font-weight:700;display:flex;justify-content:center;align-items:center;margin:8px 0}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .backbtn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{height:48px;font-size:48px;font-weight:700}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]{width:75%;display:flex;flex-direction:column;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:100%}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-weight:bolder;font-size:110%;margin-bottom:16px}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;background:#fff;padding:16px;font-size:110%;border-radius:16px;color:#000;font-weight:600;letter-spacing:2px;border:3px solid #000;transition:all .5s;margin-bottom:24px}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#333}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;background:#000;padding:16px;font-size:110%;color:#fff;font-weight:600;letter-spacing:2px;border:none;transition:all .5s;border-radius:16px;cursor:pointer}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#333}"]})}return e})();var h2=(()=>{class e{db;constructor(){let t=we(Ae.firebaseConfig);this.db=ee(t)}emailExists(t){let r=J(this.db,"Owners");return vt(me(r)).pipe(Be(i=>{if(i.exists()){let o=i.val();return Object.values(o).map(h=>h.email).includes(t)}return!1}),yr(i=>(console.error("Error checking email existence:",i),vt([!1]))))}register(t){let r=J(this.db,"Owners"),i=c2(r);return new Fe(o=>{To(i,Le(ne({},t),{id:i.key})).then(()=>{o.next(i),o.complete()}).catch(c=>{o.error(c)})})}static \u0275fac=function(r){return new(r||e)};static \u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var p2=(()=>{class e{registrationService;navigationService;email="";password="";confirmPassword="";constructor(t,r){this.registrationService=t,this.navigationService=r}onSubmit(t){if(t.preventDefault(),this.password!==this.confirmPassword){alert("Has\u0142a nie pasuj\u0105 do siebie!");return}this.registrationService.emailExists(this.email).subscribe(r=>{if(r){alert("Email jest ju\u017C zarejestrowany!");return}let i={name:this.email.split("@")[0],email:this.email,password:this.password,uniqueLinkToken:this.generateUniqueLinkToken(16)};this.registrationService.register(i).subscribe({next:o=>{let c=o.key;c?(sessionStorage.setItem("userId",c),sessionStorage.setItem("userEmail",i.email),sessionStorage.setItem("uniqueLinkToken",i.uniqueLinkToken),this.navigationService.NavigateTo("newrestaurant")):console.error("Nie uda\u0142o si\u0119 uzyska\u0107 ownerId z Firebase.")},error:o=>{console.error("Registration failed:",o)}})})}generateUniqueLinkToken(t=16){let r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i="";for(let o=0;o<t;o++)i+=r.charAt(Math.floor(Math.random()*r.length));return i}goToPage(t){this.navigationService.NavigateTo(t)}static \u0275fac=function(r){return new(r||e)(W(h2),W(xe))};static \u0275cmp=ie({type:e,selectors:[["app-register"]],standalone:!0,features:[oe],decls:22,vars:3,consts:[[1,"layoutbox"],[1,"head"],[1,"logo"],["src","https://cdn1.mandarin.com.pl/eologo.png","alt","EasyOrder",1,"w-full"],[1,"backbtn",3,"click"],[1,"material-symbols-rounded"],[1,"loginform"],[3,"ngSubmit"],["type","email","id","email","name","email","required","",3,"ngModelChange","ngModel"],["type","password","id","password","name","password","required","",3,"ngModelChange","ngModel"],["type","password","id","confirmPassword","name","confirmPassword","required","",3,"ngModelChange","ngModel"],["type","submit",1,"register"]],template:function(r,i){r&1&&(T(0,"main")(1,"div",0)(2,"div",1)(3,"div",2),se(4,"img",3),N(),T(5,"div",4),$("click",function(){return i.goToPage("landingpage")}),T(6,"span",5),P(7," arrow_back "),N()()(),T(8,"div",6)(9,"form",7),$("ngSubmit",function(c){return i.onSubmit(c)}),T(10,"div"),P(11," E-mail "),T(12,"input",8),it("ngModelChange",function(c){return ot(i.email,c)||(i.email=c),c}),N()(),T(13,"div"),P(14," Has\u0142o "),T(15,"input",9),it("ngModelChange",function(c){return ot(i.password,c)||(i.password=c),c}),N()(),T(16,"div"),P(17," Powt\xF3rz has\u0142o "),T(18,"input",10),it("ngModelChange",function(c){return ot(i.confirmPassword,c)||(i.confirmPassword=c),c}),N()(),T(19,"button",11),P(20,"Zarejestruj"),N()()(),se(21,"div"),N()()),r&2&&(Z(12),rt("ngModel",i.email),Z(3),rt("ngModel",i.password),Z(3),rt("ngModel",i.confirmPassword))},dependencies:[Ut,er,Qt,Cn,Jn,Tn,an,Hn],styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;justify-content:space-between;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{width:100%;height:64px;padding:0 32px;border-bottom:3px solid #000;display:flex;justify-content:space-between;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{margin:8px 0;height:48px}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .backbtn[_ngcontent-%COMP%]{height:48px;font-size:48px;font-weight:700;display:flex;justify-content:center;align-items:center;margin:8px 0}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .backbtn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{height:48px;font-size:48px;font-weight:700}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]{width:75%;display:flex;flex-direction:column;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:100%}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-weight:bolder;font-size:110%;margin-bottom:16px}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;background:#fff;padding:16px;font-size:110%;border-radius:16px;color:#000;font-weight:600;letter-spacing:2px;border:3px solid #000;transition:all .5s;margin-bottom:24px}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#333}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;background:#000;padding:16px;font-size:110%;color:#fff;font-weight:600;letter-spacing:2px;border:none;transition:all .5s;border-radius:16px;cursor:pointer}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#333}"]})}return e})();var EC=(()=>{class e{navigationService;constructor(t){this.navigationService=t}goToPage(t){this.navigationService.NavigateTo(t)}static \u0275fac=function(r){return new(r||e)(W(xe))};static \u0275cmp=ie({type:e,selectors:[["app-landing-page"]],standalone:!0,features:[oe],decls:9,vars:0,consts:[[1,"w-full","h-full","m-0","p-8","flex","flex-row","flex-nowrap","justify-center","items-center"],[1,"w-3/5","h-full","flex","flex-col","flex-nowrap","justify-center","items-center","relative"],[1,"text-[110%]","w-full","flex","flex-col","flex-nowrap","justify-center","items-center","mb-12"],["src","https://cdn1.mandarin.com.pl/eologo.png","alt","EasyOrder",1,"w-full"],[1,"w-full","flex","flex-col","flex-nowrap","justify-center","items-center"],[1,"w-full","bg-black","p-4","text-[110%]","text-white","font-semibold","tracking-widest","border-none","rounded-lg","transition-all","duration-500","mb-4","hover:bg-[#292929]",3,"click"],[1,"w-full","bg-black","p-4","text-[110%]","text-white","font-semibold","tracking-widest","border-none","rounded-lg","transition-all","duration-500","hover:bg-[#292929]",3,"click"]],template:function(r,i){r&1&&(T(0,"main",0)(1,"div",1)(2,"div",2),se(3,"img",3),N(),T(4,"div",4)(5,"button",5),$("click",function(){return i.goToPage("register")}),P(6," Zarejestruj si\u0119 "),N(),T(7,"button",6),$("click",function(){return i.goToPage("login")}),P(8," Zaloguj si\u0119 "),N()()()())},encapsulation:2})}return e})();var g2=(()=>{class e{navigationService;name="";address="";constructor(t){this.navigationService=t;let r=we(Ae.firebaseConfig)}onSubmit(t){t.preventDefault();let r=sessionStorage.getItem("uniqueLinkToken"),i=sessionStorage.getItem("userId");if(!i){alert("You must be logged in to create a restaurant.");return}let o={id:Date.now().toString(),name:this.name,address:this.address,uniqueLinkToken:r||"",settings:{table_change_allowed:!0,table_block_allowed:!0,order_number_typed_by_waiter_required:!0,waiter_access_pin:1234},TableGroups:[],Tables:[],Orders:[]};this.saveRestaurant(o,i)}saveRestaurant(t,r){let i=ee(),o=t.id,c=J(i,`Owners/${r}/Restaurants/${o}`);To(c,t).then(()=>{console.log("Restaurant added successfully:",t),this.navigationService.NavigateTo("changerestaurant"),this.resetForm()}).catch(h=>{console.error("Error adding restaurant:",h)})}resetForm(){this.name="",this.address=""}goToPage(t){this.navigationService.NavigateTo(t)}static \u0275fac=function(r){return new(r||e)(W(xe))};static \u0275cmp=ie({type:e,selectors:[["app-newrestaurant"]],standalone:!0,features:[oe],decls:20,vars:2,consts:[[1,"layoutbox"],[1,"head"],[1,"logo"],["src","https://cdn1.mandarin.com.pl/eologo.png","alt","EasyOrder",1,"w-full"],[1,"backbtn",3,"click"],[1,"material-symbols-rounded"],[1,"form"],[3,"ngSubmit"],["type","text","id","name","name","name","required","",3,"ngModelChange","ngModel"],["type","text","id","adress","name","adress","required","",3,"ngModelChange","ngModel"],["type","submit",1,"addrestaurant"],[1,"footstatic"]],template:function(r,i){r&1&&(T(0,"main")(1,"div",0)(2,"div",1)(3,"div",2),se(4,"img",3),N(),T(5,"div",4),$("click",function(){return i.goToPage("landingpage")}),T(6,"span",5),P(7," arrow_back "),N()()(),T(8,"div",6)(9,"form",7),$("ngSubmit",function(c){return i.onSubmit(c)}),T(10,"div"),P(11," Nazwa restauracji "),T(12,"input",8),it("ngModelChange",function(c){return ot(i.name,c)||(i.name=c),c}),N()(),T(13,"div"),P(14," Adres "),T(15,"input",9),it("ngModelChange",function(c){return ot(i.address,c)||(i.address=c),c}),N()(),se(16,"div"),T(17,"button",10),P(18,"Dodaj"),N()()(),se(19,"div",11),N()()),r&2&&(Z(12),rt("ngModel",i.name),Z(3),rt("ngModel",i.address))},dependencies:[Ut,er,Qt,Cn,Jn,Tn,an,Hn],styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;justify-content:space-between;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{width:100%;height:64px;padding:0 32px;border-bottom:3px solid #000;display:flex;justify-content:space-between;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{margin:8px 0;height:48px}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .backbtn[_ngcontent-%COMP%]{height:48px;font-size:48px;font-weight:700;display:flex;justify-content:center;align-items:center;margin:8px 0}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .backbtn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{height:48px;font-size:48px;font-weight:700}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]{width:75%;display:flex;flex-direction:column;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:100%}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-weight:bolder;font-size:110%;margin-bottom:16px}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;background:#fff;padding:16px;font-size:110%;border-radius:16px;color:#000;font-weight:600;letter-spacing:2px;border:3px solid #000;transition:all .5s;margin-bottom:24px}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#333}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;background:#000;padding:16px;font-size:110%;color:#fff;font-weight:600;letter-spacing:2px;border:none;transition:all .5s;border-radius:16px;cursor:pointer}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#333}"]})}return e})();var m2=(()=>{class e{navigationService;constructor(t){this.navigationService=t}goToPage(t){this.navigationService.NavigateTo(t)}static \u0275fac=function(r){return new(r||e)(W(xe))};static \u0275cmp=ie({type:e,selectors:[["app-restaurantmanage"]],standalone:!0,features:[oe],decls:16,vars:0,consts:[[1,"layoutbox"],[1,"logo"],["src","https://cdn1.mandarin.com.pl/eologo.png","alt","EasyOrder"],[1,"buttons"],[1,"tablemanage",3,"click"],[1,"settings",3,"click"],[1,"revievs",3,"click"],[1,"stats",3,"click"],[1,"bilings",3,"click"],[1,"footstatic"]],template:function(r,i){r&1&&(T(0,"main")(1,"div",0)(2,"div",1),se(3,"img",2),N(),T(4,"div",3)(5,"button",4),$("click",function(){return i.goToPage("tablemanage")}),P(6,"Zarz\u0105dzanie stolikami"),N(),T(7,"button",5),$("click",function(){return i.goToPage("restaurantsettings")}),P(8,"Ustawienia"),N(),T(9,"button",6),$("click",function(){return i.goToPage("restaurantrevievs")}),P(10,"Opinie restauracji"),N(),T(11,"button",7),$("click",function(){return i.goToPage("restaurantstats")}),P(12,"Statystyki"),N(),T(13,"button",8),$("click",function(){return i.goToPage("restaurantbilings")}),P(14,"P\u0142atno\u015Bci"),N()(),se(15,"div",9),N()())},dependencies:[Ut],styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;padding:0;position:relative}.layoutbox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:space-evenly;align-items:center;align-content:center;position:relative}.logo[_ngcontent-%COMP%]{display:flex;font-size:45%;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center}.logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:80px}.buttons[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center}.buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;background:#fff;padding:24px;font-size:110%;color:#000;font-weight:600;letter-spacing:2px;border-bottom:3px solid #000000;transition:all .5s;margin-bottom:0;font-weight:700}.buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-child{border-top:#000000 solid 3px}"]})}return e})();var $h={production:!0,firebaseConfig:{apiKey:"AIzaSyC2ak3O4qovvrDLGJ-L3a6E1uLASES2xuU",authDomain:"tablefi-31087.firebaseapp.com",databaseURL:"https://tablefi-31087-default-rtdb.europe-west1.firebasedatabase.app",projectId:"tablefi-31087",storageBucket:"tablefi-31087.appspot.com",messagingSenderId:"821585389969",appId:"1:821585389969:web:9383409a2e5fbf601b5230",measurementId:"G-QXT5KZEKGZ"}};function h7(e,n){e&1&&(T(0,"p"),P(1,"Brak restauracji przypisanych do konta."),N())}function p7(e,n){if(e&1){let t=Vt();T(0,"button",9),$("click",function(){let i=Nt(t).$implicit,o=Qe(2);return Ot(o.setRestaurant(i.id))}),T(1,"p",10),P(2),N(),T(3,"p",11),P(4),N()()}if(e&2){let t=n.$implicit;Z(2),Gt(t.name),Z(2),Gt(t.address)}}function g7(e,n){if(e&1&&gn(0,p7,5,2,"button",8,pn),e&2){let t=Qe();mn(t.restaurants)}}var y2=(()=>{class e{navigationService;restaurants=[];db;constructor(t){this.navigationService=t;let r=we($h.firebaseConfig);this.db=ee(r)}ngOnInit(){this.loadRestaurants()}loadRestaurants(){let t=sessionStorage.getItem("userId"),r=J(this.db,`Owners/${t}/Restaurants`);me(r).then(i=>{if(i.exists()){let o=i.val();this.restaurants=Object.values(o),this.restaurants.length===1&&(localStorage.setItem("currentRestaurant",this.restaurants[0].id.toString()),console.log(this.restaurants[0].id.toString()),this.navigationService.NavigateTo("managerestaurant"))}else console.log("No restaurants found for this owner.")}).catch(i=>{console.error("Error loading restaurants:",i)})}setRestaurant(t){localStorage.setItem("currentRestaurant",t),this.navigationService.NavigateTo("managerestaurant")}goToPage(t){this.navigationService.NavigateTo(t)}static \u0275fac=function(r){return new(r||e)(W(xe))};static \u0275cmp=ie({type:e,selectors:[["app-changerestaurant"]],standalone:!0,features:[oe],decls:14,vars:1,consts:[[1,"layoutbox"],[1,"head"],[1,"logo"],["src","https://cdn1.mandarin.com.pl/eologo.png","alt","EasyOrder",1,"w-full"],[1,"backbtn",3,"click"],[1,"material-symbols-rounded"],[1,"restaurants"],[1,"footstatic"],[1,"restaurant"],[1,"restaurant",3,"click"],["id","datavalve"],["id","datavalve2"]],template:function(r,i){r&1&&(T(0,"main")(1,"div",0)(2,"div",1)(3,"div",2),se(4,"img",3),N(),T(5,"div",4),$("click",function(){return i.goToPage("managerestaurant")}),T(6,"span",5),P(7," arrow_back "),N()()(),T(8,"div",6),Wt(9,h7,2,0,"p")(10,g7,2,0),N(),T(11,"div",7)(12,"button"),P(13," Dodaj "),N()()()()),r&2&&(Z(9),sn(i.restaurants.length===0?9:10))},styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;justify-content:space-between;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{width:100%;height:64px;padding:0 32px;border-bottom:3px solid #000;display:flex;justify-content:space-between;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{margin:8px 0;height:48px}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .backbtn[_ngcontent-%COMP%]{height:48px;font-size:48px;font-weight:700;display:flex;justify-content:center;align-items:center;margin:8px 0}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .backbtn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{height:48px;font-size:48px;font-weight:700}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .restaurants[_ngcontent-%COMP%]{width:75%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .restaurants[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:flex-start;align-content:flex-start;border:3px black solid;border-radius:16px;padding:16px 16px 48px;margin-bottom:16px}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .restaurants[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   #datavalve[_ngcontent-%COMP%]{font-weight:700;font-size:200%}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .restaurants[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   #datavalve2[_ngcontent-%COMP%]{font-weight:700;font-size:110%}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .restaurants[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#dfdfdf}main[_ngcontent-%COMP%]   .footstatic[_ngcontent-%COMP%]{width:100%;padding:16px}main[_ngcontent-%COMP%]   .footstatic[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;background:#000;padding:16px;font-size:110%;color:#fff;font-weight:600;letter-spacing:2px;border:none;transition:all .5s;border-radius:16px;cursor:pointer}main[_ngcontent-%COMP%]   .footstatic[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#333}"]})}return e})();var C2=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275cmp=ie({type:e,selectors:[["app-restaurantbilings"]],standalone:!0,features:[oe],decls:9,vars:0,consts:[[1,"displaybox"],[1,"logo"],[1,"buttons"],[1,"footstatic"]],template:function(r,i){r&1&&(T(0,"main")(1,"div",0)(2,"div",1)(3,"h1"),P(4,"EasyOrder"),N()(),T(5,"div",2)(6,"h1"),P(7,"Brak Projektu!"),N()(),se(8,"div",3),N()())},styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;padding:32px;position:relative;background:#000!important;color:#ffa700}.displaybox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center;position:relative}.logo[_ngcontent-%COMP%]{display:flex;font-size:45%;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center;margin-bottom:48px}body[_ngcontent-%COMP%]{background:#000!important;color:#ffa700}h1[_ngcontent-%COMP%]{font-size:200%}"]})}return e})();var _2=(()=>{class e{navigationService;constructor(t){this.navigationService=t,we(Ae.firebaseConfig)}goToPage(t){this.navigationService.NavigateTo(t)}deleteaccount(){let t=ee(),r=sessionStorage.getItem("userId"),i=J(t,`Owners/${r}`);Sr(i).then(()=>{console.log("owner deleted successfully"),this.navigationService.NavigateTo("landingpage")}).catch(o=>{console.error("Error deleting table:",o)})}static \u0275fac=function(r){return new(r||e)(W(xe))};static \u0275cmp=ie({type:e,selectors:[["app-restaurantsettings"]],standalone:!0,features:[oe],decls:21,vars:0,consts:[[1,"displaybox"],[1,"logo"],[1,"buttons"],[1,"alltablesqrcodes",3,"click"],[1,"myrestaaurants",3,"click"],[1,"tablesettings",3,"click"],[1,"waitersoptions",3,"click"],[1,"deleteaccount",3,"click"],[1,"footstatic"]],template:function(r,i){r&1&&(T(0,"main")(1,"div",0)(2,"div",1)(3,"h1"),P(4,"EasyOrder"),N()(),T(5,"div",2)(6,"button",3),$("click",function(){return i.goToPage("alltablesqrcodes")}),P(7,"Pobierz kody QR Stolik\xF3w"),N(),T(8,"button",4),$("click",function(){return i.goToPage("cashpointqrcode")}),P(9,"Wygeneruj kod QR obok kasy"),N(),T(10,"button",5),$("click",function(){return i.goToPage("tablesettings")}),P(11,"Ustawienia Stolik\xF3w"),N(),T(12,"button",6),$("click",function(){return i.goToPage("waitersettings")}),P(13,"Opcje dotycz\u0105ce kelner\xF3w"),N(),T(14,"button",4),$("click",function(){return i.goToPage("changerestaurant")}),P(15,"Moje restauracje"),N(),T(16,"button",4),$("click",function(){return i.goToPage("newrestaurant")}),P(17,"Dodaj restauracje"),N(),T(18,"button",7),$("click",function(){return i.deleteaccount()}),P(19,"Usu\u0144 Konto"),N()(),se(20,"div",8),N()())},styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;padding:16px;position:relative}.displaybox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center;position:relative}.logo[_ngcontent-%COMP%]{display:flex;font-size:45%;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center;margin-bottom:48px}.buttons[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center}.buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;background:#fff;padding:24px;font-size:110%;color:#000;font-weight:600;letter-spacing:2px;border:1px solid #000000;transition:all .5s;margin-bottom:24px}"]})}return e})();var w2=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275cmp=ie({type:e,selectors:[["app-restaurantrevievs"]],standalone:!0,features:[oe],decls:2,vars:0,template:function(r,i){r&1&&(T(0,"p"),P(1,"restaurantrevievs works!"),N())}})}return e})();var v2=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275cmp=ie({type:e,selectors:[["app-restaurantstats"]],standalone:!0,features:[oe],decls:2,vars:0,template:function(r,i){r&1&&(T(0,"p"),P(1,"restaurantstats works!"),N())}})}return e})();var m7=(e,n,t)=>({"background-color":e,color:n,border:t});function y7(e,n){e&1&&(T(0,"p"),P(1,"Brak stolik\xF3w przypisanych do restauracji."),N())}function C7(e,n){if(e&1){let t=Vt();T(0,"button",13),$("click",function(){let i=Nt(t).$implicit,o=Qe(2);return Ot(o.setTable(i.id))}),P(1),N()}if(e&2){let t=n.$implicit,r=Qe(2);It("ngStyle",mf(2,m7,t.group_id&&r.tableGroups[t.group_id]?r.tableGroups[t.group_id]:"white",t.group_id&&r.tableGroups[t.group_id]?r.getTextColor(r.tableGroups[t.group_id]):"black",t.group_id&&r.tableGroups[t.group_id]==="#ffffff"||!r.tableGroups[t.group_id]?"2px solid black":"none")),Z(),yn(" ",t.name," ")}}function _7(e,n){if(e&1&&gn(0,C7,2,6,"button",12,pn),e&2){let t=Qe();mn(t.tables)}}var b2=(()=>{class e{navigationService;tables=[];tableGroups={};isMenuOpen=!1;toggleMenu(){this.isMenuOpen=!this.isMenuOpen}constructor(t){this.navigationService=t;let r=we(Ae.firebaseConfig)}ngOnInit(){this.loadTables()}loadTables(){let t=ee(),r=localStorage.getItem("currentRestaurant"),i=sessionStorage.getItem("userId");if(!r){console.error("No current restaurant found in local storage");return}let o=J(t,`Owners/${i}/Restaurants/${r}/Tables`);me(o).then(c=>{if(c.exists()){let h=c.val();this.tables=Object.values(h),this.loadTableGroups()}else console.log("No tables found")}).catch(c=>{console.error("Error loading tables:",c)})}loadTableGroups(){let t=ee(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant");if(!r||!i){console.error("Missing owner or restaurant ID");return}let o=J(t,`Owners/${r}/Restaurants/${i}/TableGroups`);me(o).then(c=>{if(c.exists()){let h=c.val();for(let g in h)this.tableGroups[g]=h[g].color}}).catch(c=>{console.error("Error loading table groups:",c)})}getTextColor(t){let r=t.replace("#",""),i=parseInt(r.substring(0,2),16),o=parseInt(r.substring(2,4),16),c=parseInt(r.substring(4,6),16);return(i*299+o*587+c*114)/1e3>125?"black":"white"}setTable(t){localStorage.setItem("currentTable",t),this.goToPage("tableedit")}goToPage(t){this.navigationService.NavigateTo(t)}static \u0275fac=function(r){return new(r||e)(W(xe))};static \u0275cmp=ie({type:e,selectors:[["app-tablemanage"]],standalone:!0,features:[oe],decls:32,vars:6,consts:[[1,"sidebar"],[1,"overlay"],[3,"click"],[1,"active",3,"click"],[1,"layoutbox"],[1,"head"],[1,"logo"],["src","https://cdn1.mandarin.com.pl/eologo.png","alt","EasyOrder",1,"w-full"],[1,"backbtn",3,"click"],[1,"material-symbols-rounded"],[1,"buttons"],[1,"footstatic"],[1,"table-button",3,"ngStyle"],[1,"table-button",3,"click","ngStyle"]],template:function(r,i){r&1&&(T(0,"main")(1,"div",0)(2,"div",1)(3,"ul")(4,"li")(5,"span",2),$("click",function(){return i.toggleMenu()}),P(6,"X"),N()(),T(7,"li",3),$("click",function(){return i.goToPage("tablemanage")}),P(8,"Zarz\u0105dzanie stolikami"),N(),T(9,"li",2),$("click",function(){return i.goToPage("restaurantrevievs")}),P(10,"Opinie"),N(),T(11,"li",2),$("click",function(){return i.goToPage("restaurantbilings")}),P(12,"P\u0142atno\u015Bci"),N(),T(13,"li",2),$("click",function(){return i.goToPage("restaurantsettings")}),P(14,"Ustawienia"),N(),T(15,"li",2),$("click",function(){return i.goToPage("managerestaurant")}),P(16,"Powr\xF3t"),N()()()(),T(17,"div",4)(18,"div",5)(19,"div",6),se(20,"img",7),N(),T(21,"div",8),$("click",function(){return i.toggleMenu()}),T(22,"span",9),P(23,"menu"),N()()(),T(24,"div",10),Wt(25,y7,2,0,"p")(26,_7,2,0),N(),T(27,"div",11)(28,"button",2),$("click",function(){return i.goToPage("tablecreate")}),P(29,"Dodaj stolik"),N(),T(30,"button",2),$("click",function(){return i.goToPage("tablegroupmanage")}),P(31,"Edytuj grupy"),N()()()()),r&2&&(Z(),Yr("active",i.isMenuOpen),Z(),Yr("active",i.isMenuOpen),Z(23),sn(i.tables.length===0?25:-1),Z(),sn(i.tables.length>0?26:-1))},dependencies:[Xr,xf],styles:['@font-face{font-family:Varela Round;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/varelaround/v20/w8gdH283Tvk__Lua32TysjIfpcuPP9g.woff2) format("woff2");unicode-range:U+0307-0308,U+0590-05FF,U+200C-2010,U+20AA,U+25CC,U+FB1D-FB4F}@font-face{font-family:Varela Round;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/varelaround/v20/w8gdH283Tvk__Lua32TysjIfqMuPP9g.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Varela Round;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/varelaround/v20/w8gdH283Tvk__Lua32TysjIfqcuPP9g.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Varela Round;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/varelaround/v20/w8gdH283Tvk__Lua32TysjIfp8uP.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;justify-content:space-between;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{width:100%;height:64px;padding:0 32px;border-bottom:3px solid #000;display:flex;justify-content:space-between;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{margin:8px 0;height:48px}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%;z-index:99999}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .backbtn[_ngcontent-%COMP%]{height:48px;font-size:48px;font-weight:700;display:flex;justify-content:center;align-items:center;margin:8px 0}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .backbtn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{height:48px;font-size:48px;font-weight:700}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{width:100%;height:100%;overflow-y:auto;overflow-x:hidden;display:flex;flex-direction:row;flex-wrap:wrap;justify-content:flex-start;align-items:flex-start;align-content:flex-start}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:114px;height:114px;border-radius:16px;margin:8px;font-size:200%;font-weight:bolder}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .footstatic[_ngcontent-%COMP%]{width:100%;border-top:black 3px solid;padding:8px;display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .footstatic[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:calc(50% - 8px);border:2px solid black;border-radius:16px;color:#000;background:#fff;padding:16px;font-size:110%;font-weight:bolder}.sidebar[_ngcontent-%COMP%]{position:fixed;top:0;right:-100%;width:100%;height:100%;background-color:#00000040;box-shadow:-2px 0 5px #00000080;-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px);transition:right .3s ease;z-index:999}.sidebar.active[_ngcontent-%COMP%]{right:0}.sidebar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin-top:0;list-style:none;padding:0}.sidebar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{border-bottom:3px solid black;padding:16px;font-weight:700;margin:0}.sidebar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:first-child{text-align:right;padding-top:0;padding-bottom:0;padding-right:32px;height:64px;display:flex;flex-direction:row;flex-wrap:wrap;justify-content:flex-end;align-items:center;align-content:center}.sidebar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:first-child   span[_ngcontent-%COMP%]{height:48px;width:48px;font-size:32px;font-weight:700;font-family:Varela Round,sans-serif}.sidebar[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]{background:#000;color:#fff}.overlay[_ngcontent-%COMP%]{position:fixed;top:0;right:-250px;width:250px;height:100%;background-color:#fff;box-shadow:-2px 0 5px #00000080;transition:right .3s ease}.overlay.active[_ngcontent-%COMP%]{right:0}']})}return e})();function w7(e,n){if(e&1&&(T(0,"option",15),P(1),N()),e&2){let t=Qe().$implicit;It("value",t.id),Z(),Gt(t.name)}}function v7(e,n){if(e&1&&Wt(0,w7,2,2,"option",15),e&2){let t=n.$implicit,r=Qe();sn(t.id!=r.table.group_id?0:-1)}}var x2=(()=>{class e{navigationService;messagesokService;name="";description="";table={id:"",name:"",group_id:"",description:"",is_blocked:!1};tableGroups=[];restaurantId="";constructor(t,r){this.navigationService=t,this.messagesokService=r,we(Ae.firebaseConfig)}ngOnInit(){this.loadTableGroups()}loadTableGroups(){let t=sessionStorage.getItem("userId"),r=localStorage.getItem("currentRestaurant");if(!t||!r){console.error("Missing owner or restaurant ID");return}let i=ee(),o=J(i,`Owners/${t}/Restaurants/${r}/TableGroups`);me(o).then(c=>{c.exists()?this.tableGroups=Object.values(c.val()):console.log("No table groups found")}).catch(c=>{console.error("Error loading table groups:",c)})}goToPage(t){this.navigationService.NavigateTo(t)}onSubmit(t){t.preventDefault();let r=Date.now().toString(),i=localStorage.getItem("currentRestaurant");if(!i){alert("Nie wybrano restauracji.");return}let o={id:r,group_id:this.table.group_id,name:this.name,is_blocked:!1,description:this.description?this.description:""};this.saveTable(o,i)}saveTable(t,r){let i=ee(),o=J(i,`Owners/${sessionStorage.getItem("userId")}/Restaurants/${r}/Tables`);mt(o,{[t.id]:t}).then(()=>{this.messagesokService.askUser("Stolik zosta\u0142 dodany",()=>{this.navigationService.NavigateTo("tablemanage")}),this.resetForm()}).catch(c=>{console.error("B\u0142\u0105d podczas dodawania stolika:",c)})}resetForm(){this.name="",this.description="",this.table.group_id=""}static \u0275fac=function(r){return new(r||e)(W(xe),W(wo))};static \u0275cmp=ie({type:e,selectors:[["app-tablecreate"]],standalone:!0,features:[oe],decls:27,vars:3,consts:[[1,"layoutbox"],[1,"head"],[1,"logo"],["src","https://cdn1.mandarin.com.pl/eologo.png","alt","EasyOrder"],[1,"backbtn",3,"click"],[1,"material-symbols-rounded"],[1,"buttons"],[3,"ngSubmit"],[1,"box"],["type","text","id","name","name","name","required","",3,"ngModelChange","ngModel"],["id","group","name","groupId",3,"ngModelChange","ngModel"],["selected","",3,"value"],["type","text","id","description","name","description",1,"description",3,"ngModelChange","ngModel"],["type","submit",1,"addtable"],[1,"footstatic"],[3,"value"]],template:function(r,i){r&1&&(T(0,"main")(1,"div",0)(2,"div",1)(3,"div",2),se(4,"img",3),N(),T(5,"div",4),$("click",function(){return i.goToPage("tablemanage")}),T(6,"span",5),P(7," arrow_back "),N()()(),T(8,"div",6)(9,"form",7),$("ngSubmit",function(c){return i.onSubmit(c)}),T(10,"div",8)(11,"div"),P(12," Nazwa stolika "),T(13,"input",9),it("ngModelChange",function(c){return ot(i.name,c)||(i.name=c),c}),N()(),T(14,"div"),P(15," Grupa "),T(16,"select",10),it("ngModelChange",function(c){return ot(i.table.group_id,c)||(i.table.group_id=c),c}),T(17,"option",11),P(18,"Wybierz Grup\u0119"),N(),gn(19,v7,1,1,null,null,pn),N()(),T(21,"div"),P(22," Opis Stolika "),T(23,"input",12),it("ngModelChange",function(c){return ot(i.description,c)||(i.description=c),c}),N()()(),T(24,"button",13),P(25,"Dodaj stolik"),N()()(),se(26,"div",14),N()()),r&2&&(Z(13),rt("ngModel",i.name),Z(3),rt("ngModel",i.table.group_id),Z(3),mn(i.tableGroups),Z(4),rt("ngModel",i.description))},dependencies:[Ut,er,ih,oh,Qt,Na,Cn,Jn,Tn,an,Hn],styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;justify-content:space-between;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{width:100%;height:64px;padding:0 32px;border-bottom:3px solid #000;display:flex;justify-content:space-between;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{margin:8px 0;height:48px}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .backbtn[_ngcontent-%COMP%]{height:48px;width:48px;font-size:48px;font-weight:700;display:flex;justify-content:center;align-items:center;margin:8px 0}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .backbtn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{height:48px;font-size:48px;font-weight:700}.buttons[_ngcontent-%COMP%]{width:calc(100% - 48px)}.buttons[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]{width:100%;border:3px solid #000000;border-radius:16px;display:flex;padding:24px;flex-direction:column;flex-wrap:nowrap;justify-content:flex-start;align-items:center;align-content:center}.buttons[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-weight:bolder}.buttons[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;background:#fff;padding:8px;font-size:110%;border-radius:16px;color:#000;font-weight:600;letter-spacing:2px;border:3px solid #000;transition:all .5s;margin-bottom:24px}.buttons[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#333}.buttons[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center}div[_ngcontent-%COMP%]{width:100%}div[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;background:#fff;padding:8px;font-size:110%;border-radius:16px;color:#000;font-weight:600;letter-spacing:2px;border:3px solid #000;transition:all .5s;margin-bottom:24px}.addtable[_ngcontent-%COMP%]{margin-top:24px;width:100%;background:#000;padding:16px;font-size:110%;color:#fff;font-weight:600;letter-spacing:2px;border:none;transition:all .5s;border-radius:16px;cursor:pointer}.addtable[_ngcontent-%COMP%]:hover{background:#333}.description[_ngcontent-%COMP%]{height:100px}"]})}return e})();var b7=(e,n,t)=>({"background-color":e,color:n,border:t}),E2=(()=>{class e{navigationService;messagesService;tableId=null;table=null;tableGroupName=null;groupColor=null;tableBlockAllowed=!0;restaurantId="";tables=[];tableGroups={};isMenuOpen=!1;constructor(t,r){this.navigationService=t,this.messagesService=r,we(Ae.firebaseConfig)}ngOnInit(){this.loadTable(),this.loadSettings()}getTextColor(t){let r=t.replace("#",""),i=parseInt(r.substring(0,2),16),o=parseInt(r.substring(2,4),16),c=parseInt(r.substring(4,6),16);return(i*299+o*587+c*114)/1e3>125?"black":"white"}loadTableGroups(){let t=ee(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant");if(!r||!i){console.error("Missing owner or restaurant ID");return}let o=J(t,`Owners/${r}/Restaurants/${i}/TableGroups`);me(o).then(c=>{if(c.exists()){let h=c.val();for(let g in h)this.tableGroups[g]=h[g].color}}).catch(c=>{console.error("Error loading table groups:",c)})}loadSettings(){let t=sessionStorage.getItem("userId");if(this.restaurantId=localStorage.getItem("currentRestaurant")??"",!t||!this.restaurantId){console.error("Missing owner or restaurant ID");return}let r=ee(),i=J(r,`Owners/${t}/Restaurants/${this.restaurantId}/settings`);me(i).then(o=>{if(o.exists()){let c=o.val();this.tableBlockAllowed=c.table_block_allowed}else console.log("No settings found for this restaurant")}).catch(o=>{console.error("Error loading settings:",o)})}goToPage(t){this.navigationService.NavigateTo(t)}deleteTable(){this.messagesService.askUser("Czy napewno usun\u0105\u0107 stolik?",()=>{this.deleteTable2()},()=>{console.log("Deletion canceled")})}deleteTable2(){let t=ee(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant");if(!this.tableId||!r||!i){console.error("Missing table, owner, or restaurant ID");return}let o=J(t,`Owners/${r}/Restaurants/${i}/Tables/${this.tableId}`);Sr(o).then(()=>{console.log("Table deleted successfully"),this.navigationService.NavigateTo("tablemanage")}).catch(c=>{console.error("Error deleting table:",c)})}blockTable(){let t=ee(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant");if(!this.tableId||!r||!i){console.error("Missing table, owner, or restaurant ID");return}let o=J(t,`Owners/${r}/Restaurants/${i}/Tables/${this.tableId}`);mt(o,{is_blocked:!0}).then(()=>{console.log("Table blocked successfully"),location.reload()}).catch(c=>{console.error("Error blocking table:",c)})}unlockTable(){let t=ee(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant");if(!this.tableId||!r||!i){console.error("Missing table, owner, or restaurant ID");return}let o=J(t,`Owners/${r}/Restaurants/${i}/Tables/${this.tableId}`);mt(o,{is_blocked:!1}).then(()=>{console.log("Table unlocked successfully"),location.reload()}).catch(c=>{console.error("Error blocking table:",c)})}saveTable(){}showQRCode(){this.navigationService.NavigateTo("showtableqr")}loadTable(){if(this.tableId=localStorage.getItem("currentTable"),!this.tableId){console.error("No current table found in local storage");return}let t=ee(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant"),o=J(t,`Owners/${r}/Restaurants/${i}/Tables/${this.tableId}`);me(o).then(c=>{c.exists()?(this.table=c.val(),this.loadTableGroup()):console.log("No table found")}).catch(c=>{console.error("Error loading table:",c)})}loadTableGroup(){let t=ee(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant");if(!this.table?.group_id||this.table.group_id==="0g"){this.tableGroupName="Stoliki bez grupy",this.groupColor="#000000";return}let o=J(t,`Owners/${r}/Restaurants/${i}/TableGroups/${this.table.group_id}`);me(o).then(c=>{if(c.exists()){let h=c.val();this.tableGroupName=h.name,this.groupColor=h.color}else console.log("No group found for this table")}).catch(c=>{console.error("Error loading group:",c)})}static \u0275fac=function(r){return new(r||e)(W(xe),W(_o))};static \u0275cmp=ie({type:e,selectors:[["app-tableedit"]],standalone:!0,features:[oe],decls:27,vars:8,consts:[[1,"layoutbox"],[1,"head"],[1,"logo"],["src","https://cdn1.mandarin.com.pl/eologo.png","alt","EasyOrder"],[1,"backbtn",3,"click"],[1,"material-symbols-rounded"],[1,"flexcontainer"],[1,"buttons"],[1,"colorbar",3,"ngStyle"],[1,"titles"],["name","description","id","description"],[1,"actionbtns"],[1,"arow"],[3,"click"],[1,"footstatic"]],template:function(r,i){r&1&&(T(0,"main")(1,"div",0)(2,"div",1)(3,"div",2),se(4,"img",3),N(),T(5,"div",4),$("click",function(){return i.goToPage("tablemanage")}),T(6,"span",5),P(7," arrow_back "),N()()(),T(8,"div",6)(9,"div",7)(10,"div",8)(11,"div",9)(12,"h1"),P(13),N(),T(14,"h3"),P(15),N()(),T(16,"h3",10),P(17),N()(),T(18,"div",11)(19,"div",12)(20,"button",13),$("click",function(){return i.deleteTable()}),P(21,"Usu\u0144 stolik"),N(),T(22,"button",13),$("click",function(){return i.goToPage("tableeedit")}),P(23,"Edytuj stolik"),N(),T(24,"button",13),$("click",function(){return i.showQRCode()}),P(25,"poka\u017C kod qr"),N()()()()(),se(26,"div",14),N()()),r&2&&(Z(10),It("ngStyle",mf(4,b7,i.groupColor?i.groupColor:"white",i.groupColor?i.getTextColor(i.groupColor):"black",i.groupColor==="#ffffff"||!i.groupColor?"2px solid black":"none")),Z(3),yn("Stolik ",i.table==null?null:i.table.name,""),Z(2),yn("Grupa: ",i.tableGroupName,""),Z(2),Gt(i.table==null?null:i.table.description))},dependencies:[Xr,xf],styles:[".layoutbox[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;min-height:100vh}.flexcontainer[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding:20px}.buttons[_ngcontent-%COMP%]{width:100%;max-width:400px;text-align:center}.head[_ngcontent-%COMP%]{width:100%;height:64px;padding:0 32px;border-bottom:3px solid #000;display:flex;justify-content:space-between;align-items:center;position:relative}.head[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{margin:8px 0;height:48px}.head[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%}.head[_ngcontent-%COMP%]   .backbtn[_ngcontent-%COMP%]{height:48px;width:48px;font-size:48px;font-weight:700;display:flex;justify-content:center;align-items:center;margin:8px 0}.head[_ngcontent-%COMP%]   .backbtn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{height:48px;font-size:48px;font-weight:700}.colorbar[_ngcontent-%COMP%]{height:200px;width:100%;border-radius:20px;margin-bottom:20px;color:#fff;font-weight:700;padding:16px;font-size:110%}h1[_ngcontent-%COMP%]{font-size:200%}.titles[_ngcontent-%COMP%]{margin-bottom:32px}.actionbtns[_ngcontent-%COMP%]   .arow[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;margin:10px 0;font-weight:700}.actionbtns[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;font-weight:700;background-color:#fff;border:3px solid black;border-radius:30px;padding:10px;margin:5px;text-align:left;font-size:16px;cursor:pointer;transition:background-color .3s ease,color .3s ease}.actionbtns[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#000;color:#fff}.footstatic[_ngcontent-%COMP%]{height:50px}@media only screen and (max-width: 600px){.buttons[_ngcontent-%COMP%]{max-width:100%;padding:0 20px}.head[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .head[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:20px}.actionbtns[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:14px}}"]})}return e})();var I2=(()=>{class e{route;router;tableId=null;uniqueLinkToken=null;ownerId=null;restaurantid=null;constructor(t,r){this.route=t,this.router=r,we(Ae.firebaseConfig)}ngOnInit(){this.route.queryParams.subscribe(t=>{this.tableId=t.t||null,this.uniqueLinkToken=t.u||null,this.ownerId=t.o||null,this.restaurantid=t.r||null})}setTable(t){let r=localStorage.getItem("currentRestaurant"),i=ee();if(!this.ownerId||!this.restaurantid||!this.tableId||!this.uniqueLinkToken){console.error("Missing required data");return}let o=J(i,`Owners/${this.ownerId}/Restaurants/${r}/settings`);me(o).then(c=>{c.exists()?c.val().order_number_typed_by_waiter_required?this.verifyOrderNumber(t):this.saveTableAssignment(t):console.error("Settings not found")}).catch(c=>{console.error("Error loading settings:",c)})}verifyOrderNumber(t){let r=ee(),i=J(r,`Owners/${this.ownerId}/Restaurants/${this.restaurantid}/Orders`);me(i).then(o=>{if(o.exists()){let c=o.val();Object.values(c).some(g=>g.name===t)?this.saveTableAssignment(t):console.error("Order not found")}else console.log("No orders found")}).catch(o=>{console.error("Error checking order number:",o)})}saveTableAssignment(t){localStorage.setItem("customercurrentTable",this.tableId),localStorage.setItem("uniqueLinkToken",this.uniqueLinkToken),localStorage.setItem("orderNumber",t),localStorage.setItem("restaurantid",this.restaurantid),localStorage.setItem("ownerid",this.ownerId),this.router.navigate(["/tableordered"])}static \u0275fac=function(r){return new(r||e)(W(pi),W(gi))};static \u0275cmp=ie({type:e,selectors:[["app-settable"]],standalone:!0,features:[oe],decls:14,vars:0,consts:[["orderNumberInput",""],[1,"layoutbox"],[1,"head"],[1,"logo"],["src","https://cdn1.mandarin.com.pl/eologo.png","alt","EasyOrder"],[1,"backbtn"],[1,"loginform"],["type","text"],[3,"click"],[1,"footstatic"]],template:function(r,i){if(r&1){let o=Vt();T(0,"main")(1,"div",1)(2,"div",2)(3,"div",3),se(4,"img",4),N(),se(5,"div",5),N(),T(6,"div",6)(7,"label"),P(8,"Wprowad\u017A numer zam\xF3wienia"),N(),se(9,"input",7,0),T(11,"button",8),$("click",function(){Nt(o);let h=gf(10);return Ot(i.setTable(h.value))}),P(12,"Przypisz stolik"),N()(),se(13,"div",9),N()()}},styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;justify-content:space-between;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{width:100%;height:64px;padding:0 32px;border-bottom:3px solid #000;display:flex;justify-content:space-between;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{margin:8px 0;height:48px}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .backbtn[_ngcontent-%COMP%]{height:48px;font-size:48px;font-weight:700;display:flex;justify-content:center;align-items:center;margin:8px 0}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .backbtn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{height:48px;font-size:48px;font-weight:700}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]{width:75%;display:flex;flex-direction:column;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:bolder;font-size:200%;margin-bottom:24px}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;background:#fff;padding:16px;font-size:110%;border-radius:16px;color:#000;font-weight:600;letter-spacing:2px;border:3px solid #000;transition:all .5s;margin-bottom:24px}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#333}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;background:#000;padding:16px;font-size:110%;color:#fff;font-weight:600;letter-spacing:2px;border:none;transition:all .5s;border-radius:16px;cursor:pointer}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#333}"]})}return e})();function x7(e,n){if(e&1){let t=Vt();T(0,"div",5),$("click",function(){let i=Nt(t).$implicit,o=Qe();return Ot(o.setGroup(i.id))}),T(1,"h3"),P(2),N()()}if(e&2){let t=n.$implicit;Z(2),Gt(t.name)}}var S2=(()=>{class e{navigationService;cd;tableGroups=[];tables=[];draggedTableId=null;ungroupedTables=[];constructor(t,r){this.navigationService=t,this.cd=r,we(Ae.firebaseConfig)}ngOnInit(){this.loadGroupsAndTables()}loadGroupsAndTables(){let t=ee(),r=localStorage.getItem("currentRestaurant"),i=sessionStorage.getItem("userId");if(!r){console.error("No current restaurant found in local storage");return}let o=J(t,`Owners/${i}/Restaurants/${r}/Tables`),c=J(t,`Owners/${i}/Restaurants/${r}/TableGroups`);me(o).then(h=>{h.exists()?(this.tables=Object.values(h.val()),this.ungroupedTables=this.tables.filter(g=>g.group_id==="0g")):console.log("No tables found")}).catch(h=>{console.error("Error loading tables:",h)}),me(c).then(h=>{h.exists()?this.tableGroups=Object.values(h.val()):console.log("No table groups found")}).catch(h=>{console.error("Error loading table groups:",h)})}getTablesForGroup(t){return this.tables.filter(r=>r.group_id===t)}setGroup(t){localStorage.setItem("currentGroup",t),this.goToPage("groupedit")}updateTableGroup(t){let r=ee(),i=localStorage.getItem("currentRestaurant"),o=sessionStorage.getItem("userId");if(!i){console.error("No current restaurant found in local storage");return}let c=J(r,`Owners/${o}/Restaurants/${i}/Tables/${t.id}`);mt(c,{group_id:t.group_id}).then(()=>{console.log(`Table ${t.name} moved to group ${t.group_id}`)}).catch(h=>{console.error("Error updating table group:",h)})}setTable(t){localStorage.setItem("currentTable",t),this.goToPage("tableedit")}goToPage(t){this.navigationService.NavigateTo(t)}static \u0275fac=function(r){return new(r||e)(W(xe),W(Bi))};static \u0275cmp=ie({type:e,selectors:[["app-tablegroupmanage"]],standalone:!0,features:[oe],decls:10,vars:0,consts:[[1,"displaybox"],[1,"logo"],[1,"table-group"],[1,"footstatic"],[3,"click"],[1,"table-group",3,"click"]],template:function(r,i){r&1&&(T(0,"main")(1,"div",0)(2,"div",1)(3,"h1"),P(4,"EasyOrder"),N()(),gn(5,x7,3,1,"div",2,pn),T(7,"div",3)(8,"button",4),$("click",function(){return i.goToPage("tablegroupcreate")}),P(9,"Dodaj now\u0105 grup\u0119"),N()()()()),r&2&&(Z(5),mn(i.tableGroups))},styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;padding:16px;position:relative}.displaybox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center;position:relative}.logo[_ngcontent-%COMP%]{display:flex;font-size:45%;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center;margin-bottom:48px}.buttons[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:flex-start;align-items:center;align-content:center}.buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{text-align:left;width:100%;background:#fff;padding:24px;font-size:110%;color:#000;font-weight:600;letter-spacing:2px;border:1px solid #000000;transition:all .5s;margin-bottom:24px}.footstatic[_ngcontent-%COMP%]{width:100%}.footstatic[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;background:#fff;padding:24px;font-size:110%;color:#000;font-weight:600;letter-spacing:2px;border:1px solid #000000;transition:all .5s;margin-bottom:24px;margin-right:8px}.table-group[_ngcontent-%COMP%]{text-align:left;width:100%;background:#fff;padding:24px;font-size:110%;color:#000;font-weight:600;letter-spacing:2px;border:1px solid #000000;transition:all .5s;margin-bottom:24px}.table-group[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:100%}.table-button[_ngcontent-%COMP%]{width:100%;border:1px solid #000000;height:60px;display:block;text-align:left;margin-bottom:0;padding:8px;font-weight:700}.table-group[_ngcontent-%COMP%]:hover{background-color:#f1f1f1}"]})}return e})();var D2=(()=>{class e{navigationService;messagesokService;name="";description="";color="";location="";constructor(t,r){this.navigationService=t,this.messagesokService=r,we(Ae.firebaseConfig)}goToPage(t){this.navigationService.NavigateTo(t)}onSubmit(t){t.preventDefault();let r=Date.now().toString(),i=localStorage.getItem("currentRestaurant");if(!i){alert("Nie wybrano restauracji.");return}let o={id:r,name:this.name,color:this.color,description:this.description?this.description:"",location:this.location?this.location:""};this.saveTableGroup(o,i)}saveTableGroup(t,r){let i=ee(),o=J(i,`Owners/${sessionStorage.getItem("userId")}/Restaurants/${r}/TableGroups`);mt(o,{[t.id]:t}).then(()=>{this.messagesokService.askUser("Grupa zosta\u0142a dodana.",()=>{this.navigationService.NavigateTo("tablegroupmanage")}),this.resetForm()}).catch(c=>{console.error("B\u0142\u0105d podczas dodawania grupy stolik\xF3w:",c)})}resetForm(){this.name="",this.description="",this.color="",this.location=""}static \u0275fac=function(r){return new(r||e)(W(xe),W(wo))};static \u0275cmp=ie({type:e,selectors:[["app-tablegroupcreate"]],standalone:!0,features:[oe],decls:26,vars:4,consts:[[1,"layoutbox"],[1,"head"],[1,"logo"],["src","https://cdn1.mandarin.com.pl/eologo.png","alt","EasyOrder"],[1,"backbtn",3,"click"],[1,"material-symbols-rounded"],[1,"buttons"],[3,"ngSubmit"],[1,"box"],["type","text","id","name","name","name","required","",3,"ngModelChange","ngModel"],["type","text","id","description","name","description",1,"description",3,"ngModelChange","ngModel"],["type","color","id","color","name","color",3,"ngModelChange","ngModel"],["type","text","id","location","name","location",3,"ngModelChange","ngModel"],["type","submit",1,"addtable"],[1,"footstatic"]],template:function(r,i){r&1&&(T(0,"main")(1,"div",0)(2,"div",1)(3,"div",2),se(4,"img",3),N(),T(5,"div",4),$("click",function(){return i.goToPage("tablegroupmanage")}),T(6,"span",5),P(7," arrow_back "),N()()(),T(8,"div",6)(9,"form",7),$("ngSubmit",function(c){return i.onSubmit(c)}),T(10,"div",8)(11,"div"),P(12," Nazwa grupy "),T(13,"input",9),it("ngModelChange",function(c){return ot(i.name,c)||(i.name=c),c}),N()(),T(14,"div"),P(15," Opis "),T(16,"input",10),it("ngModelChange",function(c){return ot(i.description,c)||(i.description=c),c}),N()(),T(17,"div"),P(18," Kolor "),T(19,"input",11),it("ngModelChange",function(c){return ot(i.color,c)||(i.color=c),c}),N()(),T(20,"div"),P(21," Lokalizacja "),T(22,"input",12),it("ngModelChange",function(c){return ot(i.location,c)||(i.location=c),c}),N()()(),T(23,"button",13),P(24,"Dodaj grup\u0119 stolik\xF3w"),N()()(),se(25,"div",14),N()()),r&2&&(Z(13),rt("ngModel",i.name),Z(3),rt("ngModel",i.description),Z(3),rt("ngModel",i.color),Z(3),rt("ngModel",i.location))},dependencies:[Ut,er,Qt,Cn,Jn,Tn,an,Hn],styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;justify-content:space-between;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{width:100%;height:64px;padding:0 32px;border-bottom:3px solid #000;display:flex;justify-content:space-between;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{margin:8px 0;height:48px}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .backbtn[_ngcontent-%COMP%]{height:48px;width:48px;font-size:48px;font-weight:700;display:flex;justify-content:center;align-items:center;margin:8px 0}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .backbtn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{height:48px;font-size:48px;font-weight:700}.buttons[_ngcontent-%COMP%]{width:calc(100% - 48px)}.buttons[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]{width:100%;border:3px solid #000000;border-radius:16px;display:flex;padding:24px;flex-direction:column;flex-wrap:nowrap;justify-content:flex-start;align-items:center;align-content:center}.buttons[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-weight:bolder}.buttons[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;background:#fff;padding:8px;font-size:110%;border-radius:16px;color:#000;font-weight:600;letter-spacing:2px;border:3px solid #000;transition:all .5s;margin-bottom:24px}.buttons[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#333}.buttons[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center}div[_ngcontent-%COMP%]{width:100%}div[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;background:#fff;padding:8px;font-size:110%;border-radius:16px;color:#000;font-weight:600;letter-spacing:2px;border:3px solid #000;transition:all .5s;margin-bottom:24px}.addtable[_ngcontent-%COMP%]{margin-top:24px;width:100%;background:#000;padding:16px;font-size:110%;color:#fff;font-weight:600;letter-spacing:2px;border:none;transition:all .5s;border-radius:16px;cursor:pointer}.addtable[_ngcontent-%COMP%]:hover{background:#333}.description[_ngcontent-%COMP%]{height:100px}#color[_ngcontent-%COMP%]{padding:0;appearance:none;background:none;border-radius:8px;overflow:hidden;height:48px}"]})}return e})();var tl=R_(TA(),1);var C9=["qrcElement"],Po=(()=>{class e{constructor(t,r){this.renderer=t,this.sanitizer=r,this.allowEmptyString=!1,this.colorDark="#000000ff",this.colorLight="#ffffffff",this.cssClass="qrcode",this.elementType="canvas",this.errorCorrectionLevel="M",this.margin=4,this.qrdata="",this.scale=4,this.width=10,this.qrCodeURL=new Pt,this.context=null}ngOnChanges(){return qt(this,null,function*(){yield this.createQRCode()})}isValidQrCodeText(t){return this.allowEmptyString===!1?!(typeof t>"u"||t===""||t==="null"||t===null):!(typeof t>"u")}toDataURL(t){return new Promise((r,i)=>{(0,tl.toDataURL)(this.qrdata,t,(o,c)=>{o?i(o):r(c)})})}toCanvas(t,r){return new Promise((i,o)=>{(0,tl.toCanvas)(t,this.qrdata,r,c=>{c?o(c):i("success")})})}toSVG(t){return new Promise((r,i)=>{(0,tl.toString)(this.qrdata,t,(o,c)=>{o?i(o):r(c)})})}renderElement(t){for(let r of this.qrcElement.nativeElement.childNodes)this.renderer.removeChild(this.qrcElement.nativeElement,r);this.renderer.appendChild(this.qrcElement.nativeElement,t)}createQRCode(){return qt(this,null,function*(){this.version&&this.version>40?(console.warn("[angularx-qrcode] max value for `version` is 40"),this.version=40):this.version&&this.version<1?(console.warn("[angularx-qrcode]`min value for `version` is 1"),this.version=1):this.version!==void 0&&isNaN(this.version)&&(console.warn("[angularx-qrcode] version should be a number, defaulting to auto."),this.version=void 0);try{if(!this.isValidQrCodeText(this.qrdata))throw new Error("[angularx-qrcode] Field `qrdata` is empty, set 'allowEmptyString=\"true\"' to overwrite this behaviour.");this.isValidQrCodeText(this.qrdata)&&this.qrdata===""&&(this.qrdata=" ");let t={color:{dark:this.colorDark,light:this.colorLight},errorCorrectionLevel:this.errorCorrectionLevel,margin:this.margin,scale:this.scale,version:this.version,width:this.width},r=this.imageSrc,i=this.imageHeight||40,o=this.imageWidth||40;switch(this.elementType){case"canvas":{let c=this.renderer.createElement("canvas");this.context=c.getContext("2d"),this.toCanvas(c,t).then(()=>{if(this.ariaLabel&&this.renderer.setAttribute(c,"aria-label",`${this.ariaLabel}`),this.title&&this.renderer.setAttribute(c,"title",`${this.title}`),r&&this.context){this.centerImage=new Image(o,i),r!==this.centerImage.src&&(this.centerImage.crossOrigin="anonymous",this.centerImage.src=r),i!==this.centerImage.height&&(this.centerImage.height=i),o!==this.centerImage.width&&(this.centerImage.width=o);let h=this.centerImage;h&&(h.onload=()=>{this.context?.drawImage(h,c.width/2-o/2,c.height/2-i/2,o,i)})}this.renderElement(c),this.emitQRCodeURL(c)}).catch(h=>{console.error("[angularx-qrcode] canvas error:",h)});break}case"svg":{let c=this.renderer.createElement("div");this.toSVG(t).then(h=>{this.renderer.setProperty(c,"innerHTML",h);let g=c.firstChild;this.renderer.setAttribute(g,"height",`${this.width}`),this.renderer.setAttribute(g,"width",`${this.width}`),this.renderElement(g),this.emitQRCodeURL(g)}).catch(h=>{console.error("[angularx-qrcode] svg error:",h)});break}case"url":case"img":default:{let c=this.renderer.createElement("img");this.toDataURL(t).then(h=>{this.alt&&c.setAttribute("alt",this.alt),this.ariaLabel&&c.setAttribute("aria-label",this.ariaLabel),c.setAttribute("src",h),this.title&&c.setAttribute("title",this.title),this.renderElement(c),this.emitQRCodeURL(c)}).catch(h=>{console.error("[angularx-qrcode] img/url error:",h)})}}}catch(t){console.error("[angularx-qrcode] Error generating QR Code:",t.message)}})}convertBase64ImageUrlToBlob(t){let r=t.split(";base64,"),i=r[0].split(":")[1],o=atob(r[1]),c=new Uint8Array(o.length);for(let h=0;h<o.length;++h)c[h]=o.charCodeAt(h);return new Blob([c],{type:i})}emitQRCodeURL(t){let r=t.constructor.name;if(r===SVGSVGElement.name){let g=t.outerHTML,m=new Blob([g],{type:"image/svg+xml"}),v=URL.createObjectURL(m),b=this.sanitizer.bypassSecurityTrustUrl(v);this.qrCodeURL.emit(b);return}let i="";r===HTMLCanvasElement.name&&(i=t.toDataURL("image/png")),r===HTMLImageElement.name&&(i=t.src);let o=this.convertBase64ImageUrlToBlob(i),c=URL.createObjectURL(o),h=this.sanitizer.bypassSecurityTrustUrl(c);this.qrCodeURL.emit(h)}static{this.\u0275fac=function(r){return new(r||e)(W($r),W(Fm))}}static{this.\u0275cmp=ie({type:e,selectors:[["qrcode"]],viewQuery:function(r,i){if(r&1&&pf(C9,7),r&2){let o;zl(o=Wl())&&(i.qrcElement=o.first)}},inputs:{allowEmptyString:"allowEmptyString",colorDark:"colorDark",colorLight:"colorLight",cssClass:"cssClass",elementType:"elementType",errorCorrectionLevel:"errorCorrectionLevel",imageSrc:"imageSrc",imageHeight:"imageHeight",imageWidth:"imageWidth",margin:"margin",qrdata:"qrdata",scale:"scale",version:"version",width:"width",alt:"alt",ariaLabel:"ariaLabel",title:"title"},outputs:{qrCodeURL:"qrCodeURL"},features:[Pi],decls:2,vars:2,consts:[["qrcElement",""]],template:function(r,i){r&1&&se(0,"div",null,0),r&2&&qx(i.cssClass)},encapsulation:2,changeDetection:0})}}return e})(),ko=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=Ri({type:e})}static{this.\u0275inj=Oi({})}}return e})();var MA=(()=>{class e{navigationService;tableId=null;table=null;tableGroupName=null;groupColor=null;uniqueLinkToken=null;ownerId=null;restaurantId=null;constructor(t){this.navigationService=t,we(Ae.firebaseConfig)}ngOnInit(){this.loadTable(),this.loadUniqueLinkToken()}printQRCodePage(){window.print()}loadUniqueLinkToken(){let t=ee();this.ownerId=sessionStorage.getItem("userId"),this.restaurantId=localStorage.getItem("currentRestaurant");let r=J(t,`Owners/${this.ownerId}/Restaurants/${this.restaurantId}/uniqueLinkToken`);me(r).then(i=>{i.exists()?this.uniqueLinkToken=i.val():console.log("No unique link token found")}).catch(i=>{console.error("Error loading unique link token:",i)})}deleteTable(){let t=ee(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant");if(!this.tableId||!r||!i){console.error("Missing table, owner, or restaurant ID");return}let o=J(t,`Owners/${r}/Restaurants/${i}/Tables/${this.tableId}`);Sr(o).then(()=>{console.log("Table deleted successfully"),this.navigationService.NavigateTo("tablemanage")}).catch(c=>{console.error("Error deleting table:",c)})}blockTable(){let t=ee(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant");if(!this.tableId||!r||!i){console.error("Missing table, owner, or restaurant ID");return}let o=J(t,`Owners/${r}/Restaurants/${i}/Tables/${this.tableId}`);mt(o,{is_blocked:!0}).then(()=>{console.log("Table blocked successfully"),location.reload()}).catch(c=>{console.error("Error blocking table:",c)})}unlockTable(){let t=ee(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant");if(!this.tableId||!r||!i){console.error("Missing table, owner, or restaurant ID");return}let o=J(t,`Owners/${r}/Restaurants/${i}/Tables/${this.tableId}`);mt(o,{is_blocked:!1}).then(()=>{console.log("Table unlocked successfully"),location.reload()}).catch(c=>{console.error("Error unlocking table:",c)})}saveTable(){}loadTable(){if(this.tableId=localStorage.getItem("currentTable"),!this.tableId){console.error("No current table found in local storage");return}let t=ee(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant"),o=J(t,`Owners/${r}/Restaurants/${i}/Tables/${this.tableId}`);me(o).then(c=>{c.exists()?(this.table=c.val(),this.loadTableGroup()):console.log("No table found")}).catch(c=>{console.error("Error loading table:",c)})}loadTableGroup(){let t=ee(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant");if(!this.table?.group_id||this.table.group_id==="0g"){this.tableGroupName="Stoliki bez grupy",this.groupColor="#000000";return}let o=J(t,`Owners/${r}/Restaurants/${i}/TableGroups/${this.table.group_id}`);me(o).then(c=>{if(c.exists()){let h=c.val();this.tableGroupName=h.name,this.groupColor=h.color}else console.log("No group found for this table")}).catch(c=>{console.error("Error loading group:",c)})}getQRCodeData(){let t=this.table?.id||"",r=this.uniqueLinkToken||"",i=sessionStorage.getItem("userId"),o=localStorage.getItem("currentRestaurant");return`https://easyorder.mandarin.com.pl/settable?tableid=${t}&uniqueLinkToken=${r}&ownerid=${i}&restaurantid=${o}`}static \u0275fac=function(r){return new(r||e)(W(xe))};static \u0275cmp=ie({type:e,selectors:[["app-showtableqr"]],standalone:!0,features:[oe],decls:6,vars:13,consts:[[3,"click"],[1,"qr-container"],[3,"qrdata","allowEmptyString","alt","ariaLabel","cssClass","colorDark","colorLight","elementType","errorCorrectionLevel","margin","scale","title","width"]],template:function(r,i){r&1&&(T(0,"main")(1,"div")(2,"button",0),$("click",function(){return i.printQRCodePage()}),P(3,"Print QR Code"),N()(),T(4,"div",1),se(5,"qrcode",2),N()()),r&2&&(Z(5),It("qrdata","https://easyorder.mandarin.com.pl/settable?t="+i.tableId+"&u="+i.uniqueLinkToken+"&o="+i.ownerId+"&r="+i.restaurantId)("allowEmptyString",!0)("alt","A custom alt attribute")("ariaLabel","QR Code image with the following content...")("cssClass","center")("colorDark","#000000ff")("colorLight","#ffffffff")("elementType","img")("errorCorrectionLevel","H")("margin",4)("scale",1)("title","A custom title attribute")("width",300))},dependencies:[ko,Po],styles:[".qr-code-container[_ngcontent-%COMP%]{width:100%;min-height:max-content;display:flex;flex-wrap:wrap;justify-content:center}.qr-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;flex-wrap:nowrap;width:375px;height:565px;background:url(https://cdn1.mandarin.com.pl/qrbg2.png) no-repeat center center;background-size:cover;margin:10px;padding:10px;text-align:center;border:1px dashed black}@media print{button[_ngcontent-%COMP%]{display:none}.qr-code-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-between;margin:0;padding:0}.qr-code-box[_ngcontent-%COMP%]{width:calc(50% - 10px);height:565px;margin:5px;text-align:center;page-break-inside:avoid}.qr-code-container[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:nth-child(2n){page-break-after:always}body[_ngcontent-%COMP%]{background-color:#fff;margin:0}}"]})}return e})();var NA=(()=>{class e{tableChangeAllowed=!1;tableBlockAllowed=!1;restaurantId=null;constructor(){we(Ae.firebaseConfig)}ngOnInit(){this.loadSettings()}loadSettings(){let t=sessionStorage.getItem("userId");if(this.restaurantId=localStorage.getItem("currentRestaurant"),!t||!this.restaurantId){console.error("Missing owner or restaurant ID");return}let r=ee(),i=J(r,`Owners/${t}/Restaurants/${this.restaurantId}/settings`);me(i).then(o=>{if(o.exists()){let c=o.val();this.tableChangeAllowed=c.table_change_allowed,this.tableBlockAllowed=c.table_block_allowed}else console.log("No settings found for this restaurant")}).catch(o=>{console.error("Error loading settings:",o)})}toggleTableChangeAllowed(){this.tableChangeAllowed=!this.tableChangeAllowed,this.saveSettings()}toggleTableBlockAllowed(){this.tableBlockAllowed=!this.tableBlockAllowed,this.saveSettings()}saveSettings(){let t=sessionStorage.getItem("userId");if(!t||!this.restaurantId){console.error("Missing owner or restaurant ID");return}let r=ee(),i=J(r,`Owners/${t}/Restaurants/${this.restaurantId}/settings`);mt(i,{table_change_allowed:this.tableChangeAllowed,table_block_allowed:this.tableBlockAllowed}).then(()=>{console.log("Settings updated successfully")}).catch(o=>{console.error("Error updating settings:",o)})}static \u0275fac=function(r){return new(r||e)};static \u0275cmp=ie({type:e,selectors:[["app-tablesettings"]],standalone:!0,features:[oe],decls:15,vars:2,consts:[[1,"displaybox"],[1,"logo"],[1,"buttons"],[3,"click"],[1,"footstatic"]],template:function(r,i){r&1&&(T(0,"main")(1,"div",0)(2,"div",1)(3,"h1"),P(4,"EasyOrder"),N()(),T(5,"div",2)(6,"label"),P(7,"Opcja Zmiany stolika:"),N(),T(8,"button",3),$("click",function(){return i.toggleTableChangeAllowed()}),P(9),N(),T(10,"label"),P(11,"Opcja blokowania stolik\xF3w:"),N(),T(12,"button",3),$("click",function(){return i.toggleTableBlockAllowed()}),P(13),N()(),se(14,"div",4),N()()),r&2&&(Z(9),yn(" ",i.tableChangeAllowed?"W\u0142\u0105czona":"Wy\u0142\u0105czona"," "),Z(4),yn(" ",i.tableBlockAllowed?"W\u0142\u0105czona":"Wy\u0142\u0105czona"," "))}})}return e})();var _9=["pin"],OA=(()=>{class e{navigationService;order_number_typed_by_waiter_required=!1;waiter_access_pin=1234;restaurantId=null;pinRef;constructor(t){this.navigationService=t,we(Ae.firebaseConfig)}ngOnInit(){this.loadSettings()}ngAfterViewInit(){this.pinRef||console.error("PIN input element not found")}goToPage(t){this.navigationService.NavigateTo(t)}loadSettings(){let t=sessionStorage.getItem("userId");if(this.restaurantId=localStorage.getItem("currentRestaurant"),!t||!this.restaurantId){console.error("Missing owner or restaurant ID");return}let r=ee(),i=J(r,`Owners/${t}/Restaurants/${this.restaurantId}/settings`);me(i).then(o=>{if(o.exists()){let c=o.val();this.order_number_typed_by_waiter_required=c.order_number_typed_by_waiter_required,this.waiter_access_pin=c.waiter_access_pin}else console.log("No settings found for this restaurant")}).catch(o=>{console.error("Error loading settings:",o)})}toggleTableChangeAllowed(){this.order_number_typed_by_waiter_required=!this.order_number_typed_by_waiter_required,this.saveSettings()}toggleTableBlockAllowed(){this.pinRef&&this.pinRef.nativeElement?(this.waiter_access_pin=this.pinRef.nativeElement.value,this.saveSettings()):console.error("PIN input element not available")}saveSettings(){let t=sessionStorage.getItem("userId");if(!t||!this.restaurantId){console.error("Missing owner or restaurant ID");return}let r=ee(),i=J(r,`Owners/${t}/Restaurants/${this.restaurantId}/settings`);mt(i,{order_number_typed_by_waiter_required:this.order_number_typed_by_waiter_required,waiter_access_pin:this.waiter_access_pin}).then(()=>{console.log("Settings updated successfully")}).catch(o=>{console.error("Error updating settings:",o)})}static \u0275fac=function(r){return new(r||e)(W(xe))};static \u0275cmp=ie({type:e,selectors:[["app-waitersettings"]],viewQuery:function(r,i){if(r&1&&pf(_9,5),r&2){let o;zl(o=Wl())&&(i.pinRef=o.first)}},standalone:!0,features:[oe],decls:19,vars:2,consts:[["pin",""],[1,"displaybox"],[1,"logo"],[1,"buttons"],[3,"click"],["type","number",3,"value"],[1,"myrestaaurants",3,"click"],[1,"footstatic"]],template:function(r,i){if(r&1){let o=Vt();T(0,"main")(1,"div",1)(2,"div",2)(3,"h1"),P(4,"EasyOrder"),N()(),T(5,"div",3)(6,"label"),P(7,"Opcja Zmiany stolika:"),N(),T(8,"button",4),$("click",function(){return Nt(o),Ot(i.toggleTableChangeAllowed())}),P(9),N(),T(10,"label"),P(11,"Opcja blokowania stolik\xF3w:"),N(),se(12,"input",5,0),T(14,"button",4),$("click",function(){return Nt(o),Ot(i.toggleTableBlockAllowed())}),P(15,"Update PIN"),N(),T(16,"button",6),$("click",function(){return Nt(o),Ot(i.goToPage("waiterqrcode"))}),P(17,"Poka\u017C kod qr dla kelner\xF3w"),N()(),se(18,"div",7),N()()}r&2&&(Z(9),yn(" ",i.order_number_typed_by_waiter_required?"W\u0142\u0105czona":"Wy\u0142\u0105czona"," "),Z(3),It("value",i.waiter_access_pin))}})}return e})();function w9(e,n){if(e&1&&(T(0,"div",2),se(1,"qrcode",3),N()),e&2){let t=n.$implicit,r=Qe();Z(),It("qrdata",r.getQRCodeData(t.id))("allowEmptyString",!0)("alt","QR code for table "+t.name)("cssClass","center")("colorDark","#000000ff")("colorLight","#ffffffff")("elementType","img")("errorCorrectionLevel","H")("margin",4)("scale",1)("width",300)}}var RA=(()=>{class e{tables=[];uniqueLinkToken=null;constructor(){we(Ae.firebaseConfig)}ngOnInit(){this.loadTables(),this.loadUniqueLinkToken()}loadTables(){let t=sessionStorage.getItem("userId"),r=localStorage.getItem("currentRestaurant");if(!t||!r){console.error("Missing owner or restaurant ID");return}let i=ee(),o=J(i,`Owners/${t}/Restaurants/${r}/Tables`);me(o).then(c=>{c.exists()?this.tables=Object.values(c.val()):console.log("No tables found")}).catch(c=>{console.error("Error loading tables:",c)})}loadUniqueLinkToken(){let t=ee(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant"),o=J(t,`Owners/${r}/Restaurants/${i}/uniqueLinkToken`);me(o).then(c=>{c.exists()?this.uniqueLinkToken=c.val():console.log("No unique link token found")}).catch(c=>{console.error("Error loading unique link token:",c)})}getQRCodeData(t){let r=this.uniqueLinkToken||"",i=sessionStorage.getItem("userId"),o=localStorage.getItem("currentRestaurant");return`https://easyorder.mandarin.com.pl/settable?t=${t}&u=${r}&o=${i}&r=${o}`}printQRCodePage(){window.print()}static \u0275fac=function(r){return new(r||e)};static \u0275cmp=ie({type:e,selectors:[["app-alltableqrcodes"]],standalone:!0,features:[oe],decls:6,vars:0,consts:[[3,"click"],[1,"qr-code-container"],[1,"qr-container"],[3,"qrdata","allowEmptyString","alt","cssClass","colorDark","colorLight","elementType","errorCorrectionLevel","margin","scale","width"]],template:function(r,i){r&1&&(T(0,"div")(1,"button",0),$("click",function(){return i.printQRCodePage()}),P(2,"Print QR Codes"),N()(),T(3,"div",1),gn(4,w9,2,11,"div",2,pn),N()),r&2&&(Z(4),mn(i.tables))},dependencies:[ko,Po],styles:[".qr-code-container[_ngcontent-%COMP%]{width:100%;min-height:max-content;display:flex;flex-wrap:wrap;justify-content:center}.qr-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;flex-wrap:nowrap;width:375px;height:565px;background:url(https://cdn1.mandarin.com.pl/qrbg2.png) no-repeat center center;background-size:cover;margin:10px;padding:10px;text-align:center;border:1px dashed black}@media print{button[_ngcontent-%COMP%]{display:none}.qr-code-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-between;margin:0;padding:0}.qr-code-box[_ngcontent-%COMP%]{width:calc(50% - 10px);height:565px;margin:5px;text-align:center;page-break-inside:avoid}.qr-code-container[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:nth-child(2n){page-break-after:always}body[_ngcontent-%COMP%]{background-color:#fff;margin:0}}"]})}return e})();var PA=(()=>{class e{constructor(){we($h.firebaseConfig)}getOrderList(t){let r=ee(),i=J(r,`Owners/${sessionStorage.getItem("userId")}/Restaurants/${t}/Orders`);return new Fe(o=>(u2(i,c=>{if(c.exists()){let h=c.val();o.next(Object.values(h))}else o.next([])},c=>{o.error(c)}),()=>{}))}static \u0275fac=function(r){return new(r||e)};static \u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function b9(e,n){e&1&&(T(0,"h2"),P(1,"\u0141adowanie statusu zam\xF3wienia..."),N())}function x9(e,n){if(e&1&&(T(0,"h2"),P(1),N()),e&2){let t=Qe(2);Z(),yn(" ",t.status||"Status nie jest dost\u0119pny","")}}function E9(e,n){if(e&1&&Wt(0,x9,2,1,"h2"),e&2){let t=n.$implicit,r=Qe();sn(t.table_id==r.tableId?0:-1)}}function I9(e,n){e&1&&(T(0,"h2"),P(1,"Nie znaleziono zam\xF3wienia"),N())}function S9(e,n){if(e&1){let t=Vt();T(0,"button",8),$("click",function(){Nt(t);let i=Qe();return Ot(i.changetable())}),P(1,"Zmie\u0144 stolik"),N()}}var kA=(()=>{class e{messageokService;databaseService;navigationService;tableId=null;uniqueLinkToken=null;orderNumber=null;ownerId=null;restaurantid=null;orderList=null;updateSubscription=null;status;constructor(t,r,i){this.messageokService=t,this.databaseService=r,this.navigationService=i,we(Ae.firebaseConfig)}ngOnInit(){this.tableId=localStorage.getItem("customercurrentTable"),this.uniqueLinkToken=localStorage.getItem("uniqueLinkToken"),this.orderNumber=localStorage.getItem("orderNumber"),this.restaurantid=localStorage.getItem("restaurantid"),this.ownerId=localStorage.getItem("ownerid"),this.orderNumber?this.processOrder(this.orderNumber):console.error("Order number is missing"),this.startOrderUpdates()}ngOnDestroy(){this.updateSubscription?.unsubscribe()}processOrder(t){if(!this.ownerId||!this.restaurantid||!this.tableId||!this.uniqueLinkToken){console.error("Missing required data");return}let r=ee(),i=J(r,`Owners/${this.ownerId}/Restaurants/${this.restaurantid}/Orders`);me(i).then(o=>{if(o.exists()){let c=o.val(),h=Object.keys(c).find(g=>c[g].name===t);h?this.updateOrderWithTable(h):this.createNewOrder(t)}else console.log("No orders found, creating a new order"),this.createNewOrder(t)}).catch(o=>{console.error("Error checking orders:",o)})}updateOrderWithTable(t){let r=ee(),i=J(r,`Owners/${this.ownerId}/Restaurants/${this.restaurantid}/Orders/${t}`);mt(i,{table_id:this.tableId}).then(()=>{console.log("Order updated with table ID successfully")}).catch(o=>{console.error("Error updating order:",o)})}createNewOrder(t){let r=ee(),i={name:t,waiter_get_order_at_table:!1,created_at:Date.now(),canceled_at:null,completed_at:null,table_id:this.tableId,waiter_set_order_number:!0,table_id_entered_by_waiter:!0,completed_during_table_clean:!1},o=J(r,`Owners/${this.ownerId}/Restaurants/${this.restaurantid}/Orders`),c=Date.now().toString();mt(o,{[c]:i}).then(()=>{console.log("New order created successfully:",i)}).catch(h=>{console.error("Error creating new order:",h)})}startOrderUpdates(){if(!this.restaurantid){console.error("Restaurant ID is missing");return}this.updateSubscription=ng(0,15e3).subscribe(()=>{this.databaseService.getOrderList(this.restaurantid).subscribe(t=>{this.orderList=t.map(r=>Le(ne({},r),{status:this.getOrderStatus(r)}))})})}changetable(){this.messageokService.askUser("Zeskanuj kod QR stolika",()=>{this.navigationService.NavigateTo("scanqrcode")})}getOrderStatus(t){t.canceled_at?this.status="Anulowano":t.completed_at?this.status="Zrealizowane":t.created_at?this.status="W realizacji":this.status="Nieznany status"}static \u0275fac=function(r){return new(r||e)(W(wo),W(PA),W(xe))};static \u0275cmp=ie({type:e,selectors:[["app-tableordered"]],standalone:!0,features:[oe],decls:13,vars:3,consts:[[1,"layoutbox"],[1,"head"],[1,"logo"],["src","https://cdn1.mandarin.com.pl/eologo.png","alt","EasyOrder"],[1,"backbtn"],[1,"buttons"],[1,"addtable"],[1,"footstatic"],[1,"addtable",3,"click"]],template:function(r,i){r&1&&(T(0,"main")(1,"div",0)(2,"div",1)(3,"div",2),se(4,"img",3),N(),se(5,"div",4),N(),T(6,"div",5),Wt(7,b9,2,0,"h2"),gn(8,E9,1,1,null,null,pn),Wt(10,I9,2,0,"h2")(11,S9,2,0,"button",6),N(),se(12,"div",7),N()()),r&2&&(Z(7),sn(i.orderList===null?7:-1),Z(),mn(i.orderList),Z(2),sn(i.orderList&&i.orderList.length===0?10:-1),Z(),sn(i.orderList&&i.orderList.length<=1?11:-1))},styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;justify-content:space-between;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{width:100%;height:64px;padding:0 32px;border-bottom:3px solid #000;display:flex;justify-content:space-between;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{margin:8px 0;height:48px}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .backbtn[_ngcontent-%COMP%]{height:48px;font-size:48px;font-weight:700;display:flex;justify-content:center;align-items:center;margin:8px 0}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .backbtn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{height:48px;font-size:48px;font-weight:700}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{width:75%;display:flex;flex-direction:column;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-weight:bolder;font-size:140%;margin-bottom:24px}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;background:#fff;padding:16px;font-size:110%;border-radius:16px;color:#000;font-weight:600;letter-spacing:2px;border:3px solid #000;transition:all .5s;margin-bottom:24px}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#333}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;background:#000;padding:16px;font-size:110%;color:#fff;font-weight:600;letter-spacing:2px;border:none;transition:all .5s;border-radius:16px;cursor:pointer}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#333}"]})}return e})();var ae=function(e){return e[e.QR_CODE=0]="QR_CODE",e[e.AZTEC=1]="AZTEC",e[e.CODABAR=2]="CODABAR",e[e.CODE_39=3]="CODE_39",e[e.CODE_93=4]="CODE_93",e[e.CODE_128=5]="CODE_128",e[e.DATA_MATRIX=6]="DATA_MATRIX",e[e.MAXICODE=7]="MAXICODE",e[e.ITF=8]="ITF",e[e.EAN_13=9]="EAN_13",e[e.EAN_8=10]="EAN_8",e[e.PDF_417=11]="PDF_417",e[e.RSS_14=12]="RSS_14",e[e.RSS_EXPANDED=13]="RSS_EXPANDED",e[e.UPC_A=14]="UPC_A",e[e.UPC_E=15]="UPC_E",e[e.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION",e}(ae||{}),LA=new Map([[ae.QR_CODE,"QR_CODE"],[ae.AZTEC,"AZTEC"],[ae.CODABAR,"CODABAR"],[ae.CODE_39,"CODE_39"],[ae.CODE_93,"CODE_93"],[ae.CODE_128,"CODE_128"],[ae.DATA_MATRIX,"DATA_MATRIX"],[ae.MAXICODE,"MAXICODE"],[ae.ITF,"ITF"],[ae.EAN_13,"EAN_13"],[ae.EAN_8,"EAN_8"],[ae.PDF_417,"PDF_417"],[ae.RSS_14,"RSS_14"],[ae.RSS_EXPANDED,"RSS_EXPANDED"],[ae.UPC_A,"UPC_A"],[ae.UPC_E,"UPC_E"],[ae.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]);function FA(e){return Object.values(ae).includes(e)}var vi=function(e){return e[e.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",e[e.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE",e}(vi||{}),tr=function(){function e(){}return e.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",e.SCAN_DEFAULT_FPS=2,e.DEFAULT_DISABLE_FLIP=!1,e.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,e.DEFAULT_SUPPORTED_SCAN_TYPE=[vi.SCAN_TYPE_CAMERA,vi.SCAN_TYPE_FILE],e}();var op=function(){function e(n,t){this.format=n,this.formatName=t}return e.prototype.toString=function(){return this.formatName},e.create=function(n){if(!LA.has(n))throw"".concat(n," not in html5QrcodeSupportedFormatsTextMap");return new e(n,LA.get(n))},e}();var YC=function(){function e(){}return e.createFromText=function(n){var t={text:n};return{decodedText:n,result:t}},e.createFromQrcodeResult=function(n){return{decodedText:n.text,result:n}},e}();var BA=function(e){return e[e.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",e[e.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",e[e.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR",e}(BA||{}),sp=function(){function e(){}return e.createFrom=function(n){return{errorMessage:n,type:BA.UNKWOWN_ERROR}},e}();var ap=function(){function e(n){this.verbose=n}return e.prototype.log=function(n){this.verbose&&console.log(n)},e.prototype.warn=function(n){this.verbose&&console.warn(n)},e.prototype.logError=function(n,t){(this.verbose||t===!0)&&console.error(n)},e.prototype.logErrors=function(n){if(n.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(n)},e}();function Ar(e){return typeof e>"u"||e===null}function VA(e,n,t){return e>t?t:e<n?n:e}var Lo=function(){function e(){}return e.codeParseError=function(n){return"QR code parse error, error = ".concat(n)},e.errorGettingUserMedia=function(n){return"Error getting userMedia, error = ".concat(n)},e.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},e.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},e.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},e.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},e.scannerPaused=function(){return"Scanner paused"},e}();var Je=function(){function e(){}return e.scanningStatus=function(){return"Scanning"},e.idleStatus=function(){return"Idle"},e.errorStatus=function(){return"Error"},e.permissionStatus=function(){return"Permission"},e.noCameraFoundErrorStatus=function(){return"No Cameras"},e.lastMatch=function(n){return"Last Match: ".concat(n)},e.codeScannerTitle=function(){return"Code Scanner"},e.cameraPermissionTitle=function(){return"Request Camera Permissions"},e.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},e.noCameraFound=function(){return"No camera found"},e.scanButtonStopScanningText=function(){return"Stop Scanning"},e.scanButtonStartScanningText=function(){return"Start Scanning"},e.torchOnButton=function(){return"Switch On Torch"},e.torchOffButton=function(){return"Switch Off Torch"},e.torchOnFailedMessage=function(){return"Failed to turn on torch"},e.torchOffFailedMessage=function(){return"Failed to turn off torch"},e.scanButtonScanningStarting=function(){return"Launching Camera..."},e.textIfCameraScanSelected=function(){return"Scan an Image File"},e.textIfFileScanSelected=function(){return"Scan using camera directly"},e.selectCamera=function(){return"Select Camera"},e.fileSelectionChooseImage=function(){return"Choose Image"},e.fileSelectionChooseAnother=function(){return"Choose Another"},e.fileSelectionNoImageSelected=function(){return"No image choosen"},e.anonymousCameraPrefix=function(){return"Anonymous Camera"},e.dragAndDropMessage=function(){return"Or drop an image to scan"},e.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},e.zoom=function(){return"zoom"},e.loadingImage=function(){return"Loading image..."},e.cameraScanAltText=function(){return"Camera based scan"},e.fileScanAltText=function(){return"Fule based scan"},e}();var XC=function(){function e(){}return e.poweredBy=function(){return"Powered by "},e.reportIssues=function(){return"Report issues"},e}();var ZC=function(){function e(){}return e.isMediaStreamConstraintsValid=function(n,t){if(typeof n!="object"){var r=typeof n;return t.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(r,"."),!0),!1}for(var i=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],o=new Set(i),c=Object.keys(n),h=0,g=c;h<g.length;h++){var m=g[h];if(o.has(m))return t.logError("".concat(m," is not supported videoConstaints."),!0),!1}return!0},e}();var gt=R_(jA());var QC=function(){function e(n,t,r){if(this.formatMap=new Map([[ae.QR_CODE,gt.BarcodeFormat.QR_CODE],[ae.AZTEC,gt.BarcodeFormat.AZTEC],[ae.CODABAR,gt.BarcodeFormat.CODABAR],[ae.CODE_39,gt.BarcodeFormat.CODE_39],[ae.CODE_93,gt.BarcodeFormat.CODE_93],[ae.CODE_128,gt.BarcodeFormat.CODE_128],[ae.DATA_MATRIX,gt.BarcodeFormat.DATA_MATRIX],[ae.MAXICODE,gt.BarcodeFormat.MAXICODE],[ae.ITF,gt.BarcodeFormat.ITF],[ae.EAN_13,gt.BarcodeFormat.EAN_13],[ae.EAN_8,gt.BarcodeFormat.EAN_8],[ae.PDF_417,gt.BarcodeFormat.PDF_417],[ae.RSS_14,gt.BarcodeFormat.RSS_14],[ae.RSS_EXPANDED,gt.BarcodeFormat.RSS_EXPANDED],[ae.UPC_A,gt.BarcodeFormat.UPC_A],[ae.UPC_E,gt.BarcodeFormat.UPC_E],[ae.UPC_EAN_EXTENSION,gt.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!gt)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=t,this.logger=r;var i=this.createZXingFormats(n),o=new Map;o.set(gt.DecodeHintType.POSSIBLE_FORMATS,i),o.set(gt.DecodeHintType.TRY_HARDER,!1),this.hints=o}return e.prototype.decodeAsync=function(n){var t=this;return new Promise(function(r,i){try{r(t.decode(n))}catch(o){i(o)}})},e.prototype.decode=function(n){var t=new gt.MultiFormatReader(this.verbose,this.hints),r=new gt.HTMLCanvasElementLuminanceSource(n),i=new gt.BinaryBitmap(new gt.HybridBinarizer(r)),o=t.decode(i);return{text:o.text,format:op.create(this.toHtml5QrcodeSupportedFormats(o.format)),debugData:this.createDebugData()}},e.prototype.createReverseFormatMap=function(){var n=new Map;return this.formatMap.forEach(function(t,r,i){n.set(t,r)}),n},e.prototype.toHtml5QrcodeSupportedFormats=function(n){if(!this.reverseFormatMap.has(n))throw"reverseFormatMap doesn't have ".concat(n);return this.reverseFormatMap.get(n)},e.prototype.createZXingFormats=function(n){for(var t=[],r=0,i=n;r<i.length;r++){var o=i[r];this.formatMap.has(o)?t.push(this.formatMap.get(o)):this.logger.logError("".concat(o," is not supported by")+"ZXingHtml5QrcodeShim")}return t},e.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},e}();var D9=function(e,n,t,r){function i(o){return o instanceof t?o:new t(function(c){c(o)})}return new(t||(t=Promise))(function(o,c){function h(v){try{m(r.next(v))}catch(b){c(b)}}function g(v){try{m(r.throw(v))}catch(b){c(b)}}function m(v){v.done?o(v.value):i(v.value).then(h,g)}m((r=r.apply(e,n||[])).next())})},A9=function(e,n){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,c;return c={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function h(m){return function(v){return g([m,v])}}function g(m){if(r)throw new TypeError("Generator is already executing.");for(;c&&(c=0,m[0]&&(t=0)),t;)try{if(r=1,i&&(o=m[0]&2?i.return:m[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,m[1])).done)return o;switch(i=0,o&&(m=[m[0]&2,o.value]),m[0]){case 0:case 1:o=m;break;case 4:return t.label++,{value:m[1],done:!1};case 5:t.label++,i=m[1],m=[0];continue;case 7:m=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(m[0]===6||m[0]===2)){t=0;continue}if(m[0]===3&&(!o||m[1]>o[0]&&m[1]<o[3])){t.label=m[1];break}if(m[0]===6&&t.label<o[1]){t.label=o[1],o=m;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(m);break}o[2]&&t.ops.pop(),t.trys.pop();continue}m=n.call(e,t)}catch(v){m=[6,v],i=0}finally{r=o=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},KC=function(){function e(n,t,r){if(this.formatMap=new Map([[ae.QR_CODE,"qr_code"],[ae.AZTEC,"aztec"],[ae.CODABAR,"codabar"],[ae.CODE_39,"code_39"],[ae.CODE_93,"code_93"],[ae.CODE_128,"code_128"],[ae.DATA_MATRIX,"data_matrix"],[ae.ITF,"itf"],[ae.EAN_13,"ean_13"],[ae.EAN_8,"ean_8"],[ae.PDF_417,"pdf417"],[ae.UPC_A,"upc_a"],[ae.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!e.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=t,this.logger=r;var i=this.createBarcodeDetectorFormats(n);if(this.detector=new BarcodeDetector(i),!this.detector)throw"BarcodeDetector detector not supported"}return e.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var n=new BarcodeDetector({formats:["qr_code"]});return typeof n<"u"},e.prototype.decodeAsync=function(n){return D9(this,void 0,void 0,function(){var t,r;return A9(this,function(i){switch(i.label){case 0:return[4,this.detector.detect(n)];case 1:if(t=i.sent(),!t||t.length===0)throw"No barcode or QR code detected.";return r=this.selectLargestBarcode(t),[2,{text:r.rawValue,format:op.create(this.toHtml5QrcodeSupportedFormats(r.format)),debugData:this.createDebugData()}]}})})},e.prototype.selectLargestBarcode=function(n){for(var t=null,r=0,i=0,o=n;i<o.length;i++){var c=o[i],h=c.boundingBox.width*c.boundingBox.height;h>r&&(r=h,t=c)}if(!t)throw"No largest barcode found";return t},e.prototype.createBarcodeDetectorFormats=function(n){for(var t=[],r=0,i=n;r<i.length;r++){var o=i[r];this.formatMap.has(o)?t.push(this.formatMap.get(o)):this.logger.warn("".concat(o," is not supported by")+"BarcodeDetectorDelegate")}return{formats:t}},e.prototype.toHtml5QrcodeSupportedFormats=function(n){if(!this.reverseFormatMap.has(n))throw"reverseFormatMap doesn't have ".concat(n);return this.reverseFormatMap.get(n)},e.prototype.createReverseFormatMap=function(){var n=new Map;return this.formatMap.forEach(function(t,r,i){n.set(t,r)}),n},e.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},e}();var HA=function(e,n,t,r){function i(o){return o instanceof t?o:new t(function(c){c(o)})}return new(t||(t=Promise))(function(o,c){function h(v){try{m(r.next(v))}catch(b){c(b)}}function g(v){try{m(r.throw(v))}catch(b){c(b)}}function m(v){v.done?o(v.value):i(v.value).then(h,g)}m((r=r.apply(e,n||[])).next())})},zA=function(e,n){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,c;return c={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function h(m){return function(v){return g([m,v])}}function g(m){if(r)throw new TypeError("Generator is already executing.");for(;c&&(c=0,m[0]&&(t=0)),t;)try{if(r=1,i&&(o=m[0]&2?i.return:m[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,m[1])).done)return o;switch(i=0,o&&(m=[m[0]&2,o.value]),m[0]){case 0:case 1:o=m;break;case 4:return t.label++,{value:m[1],done:!1};case 5:t.label++,i=m[1],m=[0];continue;case 7:m=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(m[0]===6||m[0]===2)){t=0;continue}if(m[0]===3&&(!o||m[1]>o[0]&&m[1]<o[3])){t.label=m[1];break}if(m[0]===6&&t.label<o[1]){t.label=o[1],o=m;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(m);break}o[2]&&t.ops.pop(),t.trys.pop();continue}m=n.call(e,t)}catch(v){m=[6,v],i=0}finally{r=o=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},WA=function(){function e(n,t,r,i){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=r,t&&KC.isSupported()?(this.primaryDecoder=new KC(n,r,i),this.secondaryDecoder=new QC(n,r,i)):this.primaryDecoder=new QC(n,r,i)}return e.prototype.decodeAsync=function(n){return HA(this,void 0,void 0,function(){var t;return zA(this,function(r){switch(r.label){case 0:t=performance.now(),r.label=1;case 1:return r.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(n)];case 2:return[2,r.sent()];case 3:return this.possiblyLogPerformance(t),[7];case 4:return[2]}})})},e.prototype.decodeRobustlyAsync=function(n){return HA(this,void 0,void 0,function(){var t,r;return zA(this,function(i){switch(i.label){case 0:t=performance.now(),i.label=1;case 1:return i.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(n)];case 2:return[2,i.sent()];case 3:if(r=i.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(n)];throw r;case 4:return this.possiblyLogPerformance(t),[7];case 5:return[2]}})})},e.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},e.prototype.possiblyLogPerformance=function(n){if(this.verbose){var t=performance.now()-n;this.executionResults.push(t),this.executions++,this.possiblyFlushPerformanceReport()}},e.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var n=0,t=0,r=this.executionResults;t<r.length;t++){var i=r[t];n+=i}var o=n/this.executionResults.length;console.log("".concat(o," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},e}();var JC=function(){var e=function(n,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(n,t);function r(){this.constructor=n}n.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),cp=function(e,n,t,r){function i(o){return o instanceof t?o:new t(function(c){c(o)})}return new(t||(t=Promise))(function(o,c){function h(v){try{m(r.next(v))}catch(b){c(b)}}function g(v){try{m(r.throw(v))}catch(b){c(b)}}function m(v){v.done?o(v.value):i(v.value).then(h,g)}m((r=r.apply(e,n||[])).next())})},up=function(e,n){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,c;return c={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function h(m){return function(v){return g([m,v])}}function g(m){if(r)throw new TypeError("Generator is already executing.");for(;c&&(c=0,m[0]&&(t=0)),t;)try{if(r=1,i&&(o=m[0]&2?i.return:m[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,m[1])).done)return o;switch(i=0,o&&(m=[m[0]&2,o.value]),m[0]){case 0:case 1:o=m;break;case 4:return t.label++,{value:m[1],done:!1};case 5:t.label++,i=m[1],m=[0];continue;case 7:m=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(m[0]===6||m[0]===2)){t=0;continue}if(m[0]===3&&(!o||m[1]>o[0]&&m[1]<o[3])){t.label=m[1];break}if(m[0]===6&&t.label<o[1]){t.label=o[1],o=m;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(m);break}o[2]&&t.ops.pop(),t.trys.pop();continue}m=n.call(e,t)}catch(v){m=[6,v],i=0}finally{r=o=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},GA=function(){function e(n,t){this.name=n,this.track=t}return e.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},e.prototype.apply=function(n){var t={};t[this.name]=n;var r={advanced:[t]};return this.track.applyConstraints(r)},e.prototype.value=function(){var n=this.track.getSettings();if(this.name in n){var t=n[this.name];return t}return null},e}(),T9=function(e){JC(n,e);function n(t,r){return e.call(this,t,r)||this}return n.prototype.min=function(){return this.getCapabilities().min},n.prototype.max=function(){return this.getCapabilities().max},n.prototype.step=function(){return this.getCapabilities().step},n.prototype.apply=function(t){var r={};r[this.name]=t;var i={advanced:[r]};return this.track.applyConstraints(i)},n.prototype.getCapabilities=function(){this.failIfNotSupported();var t=this.track.getCapabilities(),r=t[this.name];return{min:r.min,max:r.max,step:r.step}},n.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},n}(GA),M9=function(e){JC(n,e);function n(t){return e.call(this,"zoom",t)||this}return n}(T9),N9=function(e){JC(n,e);function n(t){return e.call(this,"torch",t)||this}return n}(GA),O9=function(){function e(n){this.track=n}return e.prototype.zoomFeature=function(){return new M9(this.track)},e.prototype.torchFeature=function(){return new N9(this.track)},e}(),R9=function(){function e(n,t,r){this.isClosed=!1,this.parentElement=n,this.mediaStream=t,this.callbacks=r,this.surface=this.createVideoElement(this.parentElement.clientWidth),n.append(this.surface)}return e.prototype.createVideoElement=function(n){var t=document.createElement("video");return t.style.width="".concat(n,"px"),t.style.display="block",t.muted=!0,t.setAttribute("muted","true"),t.playsInline=!0,t},e.prototype.setupSurface=function(){var n=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var t=function(){var r=n.surface.clientWidth,i=n.surface.clientHeight;n.callbacks.onRenderSurfaceReady(r,i),n.surface.removeEventListener("playing",t)};this.surface.addEventListener("playing",t),this.surface.srcObject=this.mediaStream,this.surface.play()},e.create=function(n,t,r,i){return cp(this,void 0,void 0,function(){var o,c;return up(this,function(h){switch(h.label){case 0:return o=new e(n,t,i),r.aspectRatio?(c={aspectRatio:r.aspectRatio},[4,o.getFirstTrackOrFail().applyConstraints(c)]):[3,2];case 1:h.sent(),h.label=2;case 2:return o.setupSurface(),[2,o]}})})},e.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},e.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},e.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},e.prototype.resume=function(n){this.failIfClosed();var t=this,r=function(){setTimeout(n,200),t.surface.removeEventListener("playing",r)};this.surface.addEventListener("playing",r),this.surface.play()},e.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},e.prototype.getSurface=function(){return this.failIfClosed(),this.surface},e.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},e.prototype.applyVideoConstraints=function(n){return cp(this,void 0,void 0,function(){return up(this,function(t){if("aspectRatio"in n)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(n)]})})},e.prototype.close=function(){if(this.isClosed)return Promise.resolve();var n=this;return new Promise(function(t,r){var i=n.mediaStream.getVideoTracks(),o=i.length,c=0;n.mediaStream.getVideoTracks().forEach(function(h){n.mediaStream.removeTrack(h),h.stop(),++c,c>=o&&(n.isClosed=!0,n.parentElement.removeChild(n.surface),t())})})},e.prototype.getCapabilities=function(){return new O9(this.getFirstTrackOrFail())},e}(),$A=function(){function e(n){this.mediaStream=n}return e.prototype.render=function(n,t,r){return cp(this,void 0,void 0,function(){return up(this,function(i){return[2,R9.create(n,this.mediaStream,t,r)]})})},e.create=function(n){return cp(this,void 0,void 0,function(){var t,r;return up(this,function(i){switch(i.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return t={audio:!1,video:n},[4,navigator.mediaDevices.getUserMedia(t)];case 1:return r=i.sent(),[2,new e(r)]}})})},e}();var qA=function(e,n,t,r){function i(o){return o instanceof t?o:new t(function(c){c(o)})}return new(t||(t=Promise))(function(o,c){function h(v){try{m(r.next(v))}catch(b){c(b)}}function g(v){try{m(r.throw(v))}catch(b){c(b)}}function m(v){v.done?o(v.value):i(v.value).then(h,g)}m((r=r.apply(e,n||[])).next())})},YA=function(e,n){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,c;return c={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function h(m){return function(v){return g([m,v])}}function g(m){if(r)throw new TypeError("Generator is already executing.");for(;c&&(c=0,m[0]&&(t=0)),t;)try{if(r=1,i&&(o=m[0]&2?i.return:m[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,m[1])).done)return o;switch(i=0,o&&(m=[m[0]&2,o.value]),m[0]){case 0:case 1:o=m;break;case 4:return t.label++,{value:m[1],done:!1};case 5:t.label++,i=m[1],m=[0];continue;case 7:m=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(m[0]===6||m[0]===2)){t=0;continue}if(m[0]===3&&(!o||m[1]>o[0]&&m[1]<o[3])){t.label=m[1];break}if(m[0]===6&&t.label<o[1]){t.label=o[1],o=m;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(m);break}o[2]&&t.ops.pop(),t.trys.pop();continue}m=n.call(e,t)}catch(v){m=[6,v],i=0}finally{r=o=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},XA=function(){function e(){}return e.failIfNotSupported=function(){return qA(this,void 0,void 0,function(){return YA(this,function(n){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new e]})})},e.prototype.create=function(n){return qA(this,void 0,void 0,function(){return YA(this,function(t){return[2,$A.create(n)]})})},e}();var P9=function(e,n,t,r){function i(o){return o instanceof t?o:new t(function(c){c(o)})}return new(t||(t=Promise))(function(o,c){function h(v){try{m(r.next(v))}catch(b){c(b)}}function g(v){try{m(r.throw(v))}catch(b){c(b)}}function m(v){v.done?o(v.value):i(v.value).then(h,g)}m((r=r.apply(e,n||[])).next())})},k9=function(e,n){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,c;return c={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function h(m){return function(v){return g([m,v])}}function g(m){if(r)throw new TypeError("Generator is already executing.");for(;c&&(c=0,m[0]&&(t=0)),t;)try{if(r=1,i&&(o=m[0]&2?i.return:m[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,m[1])).done)return o;switch(i=0,o&&(m=[m[0]&2,o.value]),m[0]){case 0:case 1:o=m;break;case 4:return t.label++,{value:m[1],done:!1};case 5:t.label++,i=m[1],m=[0];continue;case 7:m=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(m[0]===6||m[0]===2)){t=0;continue}if(m[0]===3&&(!o||m[1]>o[0]&&m[1]<o[3])){t.label=m[1];break}if(m[0]===6&&t.label<o[1]){t.label=o[1],o=m;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(m);break}o[2]&&t.ops.pop(),t.trys.pop();continue}m=n.call(e,t)}catch(v){m=[6,v],i=0}finally{r=o=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},ZA=function(){function e(){}return e.retrieve=function(){if(navigator.mediaDevices)return e.getCamerasFromMediaDevices();var n=MediaStreamTrack;return MediaStreamTrack&&n.getSources?e.getCamerasFromMediaStreamTrack():e.rejectWithError()},e.rejectWithError=function(){var n=Lo.unableToQuerySupportedDevices();return e.isHttpsOrLocalhost()||(n=Lo.insecureContextCameraQueryError()),Promise.reject(n)},e.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var n=location.host.split(":")[0];return n==="127.0.0.1"||n==="localhost"},e.getCamerasFromMediaDevices=function(){return P9(this,void 0,void 0,function(){var n,t,r,i,o,c,h;return k9(this,function(g){switch(g.label){case 0:return n=function(m){for(var v=m.getVideoTracks(),b=0,I=v;b<I.length;b++){var A=I[b];A.enabled=!1,A.stop(),m.removeTrack(A)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return t=g.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(r=g.sent(),i=[],o=0,c=r;o<c.length;o++)h=c[o],h.kind==="videoinput"&&i.push({id:h.deviceId,label:h.label});return n(t),[2,i]}})})},e.getCamerasFromMediaStreamTrack=function(){return new Promise(function(n,t){var r=function(o){for(var c=[],h=0,g=o;h<g.length;h++){var m=g[h];m.kind==="video"&&c.push({id:m.id,label:m.label})}n(c)},i=MediaStreamTrack;i.getSources(r)})},e}();var kt=function(e){return e[e.UNKNOWN=0]="UNKNOWN",e[e.NOT_STARTED=1]="NOT_STARTED",e[e.SCANNING=2]="SCANNING",e[e.PAUSED=3]="PAUSED",e}(kt||{}),L9=function(){function e(){this.state=kt.NOT_STARTED,this.onGoingTransactionNewState=kt.UNKNOWN}return e.prototype.directTransition=function(n){this.failIfTransitionOngoing(),this.validateTransition(n),this.state=n},e.prototype.startTransition=function(n){return this.failIfTransitionOngoing(),this.validateTransition(n),this.onGoingTransactionNewState=n,this},e.prototype.execute=function(){if(this.onGoingTransactionNewState===kt.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var n=this.onGoingTransactionNewState;this.onGoingTransactionNewState=kt.UNKNOWN,this.directTransition(n)},e.prototype.cancel=function(){if(this.onGoingTransactionNewState===kt.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=kt.UNKNOWN},e.prototype.getState=function(){return this.state},e.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==kt.UNKNOWN)throw"Cannot transition to a new state, already under transition"},e.prototype.validateTransition=function(n){switch(this.state){case kt.UNKNOWN:throw"Transition from unknown is not allowed";case kt.NOT_STARTED:this.failIfNewStateIs(n,[kt.PAUSED]);break;case kt.SCANNING:break;case kt.PAUSED:break}},e.prototype.failIfNewStateIs=function(n,t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(n===o)throw"Cannot transition from ".concat(this.state," to ").concat(n)}},e}(),F9=function(){function e(n){this.stateManager=n}return e.prototype.startTransition=function(n){return this.stateManager.startTransition(n)},e.prototype.directTransition=function(n){this.stateManager.directTransition(n)},e.prototype.getState=function(){return this.stateManager.getState()},e.prototype.canScanFile=function(){return this.stateManager.getState()===kt.NOT_STARTED},e.prototype.isScanning=function(){return this.stateManager.getState()!==kt.NOT_STARTED},e.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===kt.SCANNING},e.prototype.isPaused=function(){return this.stateManager.getState()===kt.PAUSED},e}();var QA=function(){function e(){}return e.create=function(){return new F9(new L9)},e}();var B9=function(){var e=function(n,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(n,t);function r(){this.constructor=n}n.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),hr=function(e){B9(n,e);function n(){return e!==null&&e.apply(this,arguments)||this}return n.DEFAULT_WIDTH=300,n.DEFAULT_WIDTH_OFFSET=2,n.FILE_SCAN_MIN_HEIGHT=300,n.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,n.MIN_QR_BOX_SIZE=50,n.SHADED_LEFT=1,n.SHADED_RIGHT=2,n.SHADED_TOP=3,n.SHADED_BOTTOM=4,n.SHADED_REGION_ELEMENT_ID="qr-shaded-region",n.VERBOSE=!1,n.BORDER_SHADER_DEFAULT_COLOR="#ffffff",n.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",n}(tr),V9=function(){function e(n,t){this.logger=t,this.fps=hr.SCAN_DEFAULT_FPS,n?(n.fps&&(this.fps=n.fps),this.disableFlip=n.disableFlip===!0,this.qrbox=n.qrbox,this.aspectRatio=n.aspectRatio,this.videoConstraints=n.videoConstraints):this.disableFlip=hr.DEFAULT_DISABLE_FLIP}return e.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?ZC.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},e.prototype.isShadedBoxEnabled=function(){return!Ar(this.qrbox)},e.create=function(n,t){return new e(n,t)},e}(),dp=function(){function e(n,t){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(n))throw"HTML Element with id=".concat(n," not found");this.elementId=n,this.verbose=!1;var r,i;typeof t=="boolean"?this.verbose=t===!0:t&&(i=t,this.verbose=i.verbose===!0,r=i.experimentalFeatures),this.logger=new ap(this.verbose),this.qrcode=new WA(this.getSupportedFormats(t),this.getUseBarCodeDetectorIfSupported(i),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=QA.create()}return e.prototype.start=function(n,t,r,i){var o=this;if(!n)throw"cameraIdOrConfig is required";if(!r||typeof r!="function")throw"qrCodeSuccessCallback is required and should be a function.";var c;i?c=i:c=this.verbose?this.logger.log:function(){};var h=V9.create(t,this.logger);this.clearElement();var g=!1;h.videoConstraints&&(h.isMediaStreamConstraintsValid()?g=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var m=g,v=document.getElementById(this.elementId),b=v.clientWidth?v.clientWidth:hr.DEFAULT_WIDTH;v.style.position="relative",this.shouldScan=!0,this.element=v;var I=this,A=this.stateManagerProxy.startTransition(kt.SCANNING);return new Promise(function(R,j){var Y=m?h.videoConstraints:I.createVideoConstraints(n);if(!Y){A.cancel(),j("videoConstraints should be defined");return}var G={};(!m||h.aspectRatio)&&(G.aspectRatio=h.aspectRatio);var ce={onRenderSurfaceReady:function(Xe,ge){I.setupUi(Xe,ge,h),I.isScanning=!0,I.foreverScan(h,r,c)}};XA.failIfNotSupported().then(function(Xe){Xe.create(Y).then(function(ge){return ge.render(o.element,G,ce).then(function(H){I.renderedCamera=H,A.execute(),R(null)}).catch(function(H){A.cancel(),j(H)})}).catch(function(ge){A.cancel(),j(Lo.errorGettingUserMedia(ge))})}).catch(function(Xe){A.cancel(),j(Lo.cameraStreamingNotSupported())})})},e.prototype.pause=function(n){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(kt.PAUSED),this.showPausedState(),(Ar(n)||n!==!0)&&(n=!1),n&&this.renderedCamera&&this.renderedCamera.pause()},e.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var n=this,t=function(){n.stateManagerProxy.directTransition(kt.SCANNING),n.hidePausedState()};if(!this.renderedCamera.isPaused()){t();return}this.renderedCamera.resume(function(){t()})},e.prototype.getState=function(){return this.stateManagerProxy.getState()},e.prototype.stop=function(){var n=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var t=this.stateManagerProxy.startTransition(kt.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var r=function(){if(n.element){var o=document.getElementById(hr.SHADED_REGION_ELEMENT_ID);o&&n.element.removeChild(o)}},i=this;return this.renderedCamera.close().then(function(){return i.renderedCamera=null,i.element&&(i.element.removeChild(i.canvasElement),i.canvasElement=null),r(),i.qrRegion&&(i.qrRegion=null),i.context&&(i.context=null),t.execute(),i.hidePausedState(),i.isScanning=!1,Promise.resolve()})},e.prototype.scanFile=function(n,t){return this.scanFileV2(n,t).then(function(r){return r.decodedText})},e.prototype.scanFileV2=function(n,t){var r=this;if(!n||!(n instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(Ar(t)&&(t=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(i,o){r.possiblyCloseLastScanImageFile(),r.clearElement(),r.lastScanImageFile=URL.createObjectURL(n);var c=new Image;c.onload=function(){var h=c.width,g=c.height,m=document.getElementById(r.elementId),v=m.clientWidth?m.clientWidth:hr.DEFAULT_WIDTH,b=Math.max(m.clientHeight?m.clientHeight:g,hr.FILE_SCAN_MIN_HEIGHT),I=r.computeCanvasDrawConfig(h,g,v,b);if(t){var A=r.createCanvasElement(v,b,"qr-canvas-visible");A.style.display="inline-block",m.appendChild(A);var R=A.getContext("2d");if(!R)throw"Unable to get 2d context from canvas";R.canvas.width=v,R.canvas.height=b,R.drawImage(c,0,0,h,g,I.x,I.y,I.width,I.height)}var j=hr.FILE_SCAN_HIDDEN_CANVAS_PADDING,Y=Math.max(c.width,I.width),G=Math.max(c.height,I.height),ce=Y+2*j,Xe=G+2*j,ge=r.createCanvasElement(ce,Xe);m.appendChild(ge);var H=ge.getContext("2d");if(!H)throw"Unable to get 2d context from canvas";H.canvas.width=ce,H.canvas.height=Xe,H.drawImage(c,0,0,h,g,j,j,Y,G);try{r.qrcode.decodeRobustlyAsync(ge).then(function(he){i(YC.createFromQrcodeResult(he))}).catch(o)}catch(he){o("QR code parse error, error = ".concat(he))}},c.onerror=o,c.onabort=o,c.onstalled=o,c.onsuspend=o,c.src=URL.createObjectURL(n)})},e.prototype.clear=function(){this.clearElement()},e.getCameras=function(){return ZA.retrieve()},e.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},e.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},e.prototype.applyVideoConstraints=function(n){if(n){if(!ZC.isMediaStreamConstraintsValid(n,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(n)},e.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},e.prototype.getSupportedFormats=function(n){var t=[ae.QR_CODE,ae.AZTEC,ae.CODABAR,ae.CODE_39,ae.CODE_93,ae.CODE_128,ae.DATA_MATRIX,ae.MAXICODE,ae.ITF,ae.EAN_13,ae.EAN_8,ae.PDF_417,ae.RSS_14,ae.RSS_EXPANDED,ae.UPC_A,ae.UPC_E,ae.UPC_EAN_EXTENSION];if(!n||typeof n=="boolean"||!n.formatsToSupport)return t;if(!Array.isArray(n.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(n.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var r=[],i=0,o=n.formatsToSupport;i<o.length;i++){var c=o[i];FA(c)?r.push(c):this.logger.warn("Invalid format: ".concat(c," passed in config, ignoring."))}if(r.length===0)throw"None of formatsToSupport match supported values.";return r},e.prototype.getUseBarCodeDetectorIfSupported=function(n){if(Ar(n))return!0;if(!Ar(n.useBarCodeDetectorIfSupported))return n.useBarCodeDetectorIfSupported!==!1;if(Ar(n.experimentalFeatures))return!0;var t=n.experimentalFeatures;return Ar(t.useBarCodeDetectorIfSupported)?!0:t.useBarCodeDetectorIfSupported!==!1},e.prototype.validateQrboxSize=function(n,t,r){var i=this,o=r.qrbox;this.validateQrboxConfig(o);var c=this.toQrdimensions(n,t,o),h=function(m){if(m<hr.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(hr.MIN_QR_BOX_SIZE,"px.")},g=function(m){return m>n&&(i.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),m=n),m};h(c.width),h(c.height),c.width=g(c.width)},e.prototype.validateQrboxConfig=function(n){if(typeof n!="number"&&typeof n!="function"&&(n.width===void 0||n.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},e.prototype.toQrdimensions=function(n,t,r){if(typeof r=="number")return{width:r,height:r};if(typeof r=="function")try{return r(n,t)}catch(i){throw new Error("qrbox config was passed as a function but it failed with unknown error"+i)}return r},e.prototype.setupUi=function(n,t,r){r.isShadedBoxEnabled()&&this.validateQrboxSize(n,t,r);var i=Ar(r.qrbox)?{width:n,height:t}:r.qrbox;this.validateQrboxConfig(i);var o=this.toQrdimensions(n,t,i);o.height>t&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var c=r.isShadedBoxEnabled()&&o.height<=t,h={x:0,y:0,width:n,height:t},g=c?this.getShadedRegionBounds(n,t,o):h,m=this.createCanvasElement(g.width,g.height),v={willReadFrequently:!0},b=m.getContext("2d",v);b.canvas.width=g.width,b.canvas.height=g.height,this.element.append(m),c&&this.possiblyInsertShadingElement(this.element,n,t,o),this.createScannerPausedUiElement(this.element),this.qrRegion=g,this.context=b,this.canvasElement=m},e.prototype.createScannerPausedUiElement=function(n){var t=document.createElement("div");t.innerText=Lo.scannerPaused(),t.style.display="none",t.style.position="absolute",t.style.top="0px",t.style.zIndex="1",t.style.background="rgba(9, 9, 9, 0.46)",t.style.color="#FFECEC",t.style.textAlign="center",t.style.width="100%",n.appendChild(t),this.scannerPausedUiElement=t},e.prototype.scanContext=function(n,t){var r=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(i){return n(i.text,YC.createFromQrcodeResult(i)),r.possiblyUpdateShaders(!0),!0}).catch(function(i){r.possiblyUpdateShaders(!1);var o=Lo.codeParseError(i);return t(o,sp.createFrom(o)),!1})},e.prototype.foreverScan=function(n,t,r){var i=this;if(this.shouldScan&&this.renderedCamera){var o=this.renderedCamera.getSurface(),c=o.videoWidth/o.clientWidth,h=o.videoHeight/o.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var g=this.qrRegion.width*c,m=this.qrRegion.height*h,v=this.qrRegion.x*c,b=this.qrRegion.y*h;this.context.drawImage(o,v,b,g,m,0,0,this.qrRegion.width,this.qrRegion.height);var I=function(){i.foreverScanTimeout=setTimeout(function(){i.foreverScan(n,t,r)},i.getTimeoutFps(n.fps))};this.scanContext(t,r).then(function(A){!A&&n.disableFlip!==!0?(i.context.translate(i.context.canvas.width,0),i.context.scale(-1,1),i.scanContext(t,r).finally(function(){I()})):I()}).catch(function(A){i.logger.logError("Error happend while scanning context",A),I()})}},e.prototype.createVideoConstraints=function(n){if(typeof n=="string")return{deviceId:{exact:n}};if(typeof n=="object"){var t="facingMode",r="deviceId",i={user:!0,environment:!0},o="exact",c=function(R){if(R in i)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(R,"'")},h=Object.keys(n);if(h.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(h.length," keys");var g=Object.keys(n)[0];if(g!==t&&g!==r)throw"Only '".concat(t,"' and '").concat(r,"' ")+" are supported for 'cameraIdOrConfig'";if(g===t){var m=n.facingMode;if(typeof m=="string"){if(c(m))return{facingMode:m}}else if(typeof m=="object")if(o in m){if(c(m["".concat(o)]))return{facingMode:{exact:m["".concat(o)]}}}else throw"'facingMode' should be string or object with"+" ".concat(o," as key.");else{var v=typeof m;throw"Invalid type of 'facingMode' = ".concat(v)}}else{var b=n.deviceId;if(typeof b=="string")return{deviceId:b};if(typeof b=="object"){if(o in b)return{deviceId:{exact:b["".concat(o)]}};throw"'deviceId' should be string or object with"+" ".concat(o," as key.")}else{var I=typeof b;throw"Invalid type of 'deviceId' = ".concat(I)}}}var A=typeof n;throw"Invalid type of 'cameraIdOrConfig' = ".concat(A)},e.prototype.computeCanvasDrawConfig=function(n,t,r,i){if(n<=r&&t<=i){var o=(r-n)/2,c=(i-t)/2;return{x:o,y:c,width:n,height:t}}else{var h=n,g=t;return n>r&&(t=r/n*t,n=r),t>i&&(n=i/t*n,t=i),this.logger.log("Image downsampled from "+"".concat(h,"X").concat(g)+" to ".concat(n,"X").concat(t,".")),this.computeCanvasDrawConfig(n,t,r,i)}},e.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var n=document.getElementById(this.elementId);n&&(n.innerHTML="")},e.prototype.possiblyUpdateShaders=function(n){this.qrMatch!==n&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(t){t.style.backgroundColor=n?hr.BORDER_SHADER_MATCH_COLOR:hr.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=n)},e.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},e.prototype.createCanvasElement=function(n,t,r){var i=n,o=t,c=document.createElement("canvas");return c.style.width="".concat(i,"px"),c.style.height="".concat(o,"px"),c.style.display="none",c.id=Ar(r)?"qr-canvas":r,c},e.prototype.getShadedRegionBounds=function(n,t,r){if(r.width>n||r.height>t)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(n-r.width)/2,y:(t-r.height)/2,width:r.width,height:r.height}},e.prototype.possiblyInsertShadingElement=function(n,t,r,i){if(!(t-i.width<1||r-i.height<1)){var o=document.createElement("div");o.style.position="absolute";var c=(t-i.width)/2,h=(r-i.height)/2;if(o.style.borderLeft="".concat(c,"px solid rgba(0, 0, 0, 0.48)"),o.style.borderRight="".concat(c,"px solid rgba(0, 0, 0, 0.48)"),o.style.borderTop="".concat(h,"px solid rgba(0, 0, 0, 0.48)"),o.style.borderBottom="".concat(h,"px solid rgba(0, 0, 0, 0.48)"),o.style.boxSizing="border-box",o.style.top="0px",o.style.bottom="0px",o.style.left="0px",o.style.right="0px",o.id="".concat(hr.SHADED_REGION_ELEMENT_ID),t-i.width<11||r-i.height<11)this.hasBorderShaders=!1;else{var g=5,m=40;this.insertShaderBorders(o,m,g,-g,null,0,!0),this.insertShaderBorders(o,m,g,-g,null,0,!1),this.insertShaderBorders(o,m,g,null,-g,0,!0),this.insertShaderBorders(o,m,g,null,-g,0,!1),this.insertShaderBorders(o,g,m+g,-g,null,-g,!0),this.insertShaderBorders(o,g,m+g,null,-g,-g,!0),this.insertShaderBorders(o,g,m+g,-g,null,-g,!1),this.insertShaderBorders(o,g,m+g,null,-g,-g,!1),this.hasBorderShaders=!0}n.append(o)}},e.prototype.insertShaderBorders=function(n,t,r,i,o,c,h){var g=document.createElement("div");g.style.position="absolute",g.style.backgroundColor=hr.BORDER_SHADER_DEFAULT_COLOR,g.style.width="".concat(t,"px"),g.style.height="".concat(r,"px"),i!==null&&(g.style.top="".concat(i,"px")),o!==null&&(g.style.bottom="".concat(o,"px")),h?g.style.left="".concat(c,"px"):g.style.right="".concat(c,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(g),n.appendChild(g)},e.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},e.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},e.prototype.getTimeoutFps=function(n){return 1e3/n},e}();var e_="data:image/svg+xml;base64,",KA=e_+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",JA=e_+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",t_=e_+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",eT="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=";var tT=function(){function e(){}return e.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},e}(),nT=function(){function e(){this.data=tT.createDefault();var n=localStorage.getItem(e.LOCAL_STORAGE_KEY);n?this.data=JSON.parse(n):this.reset()}return e.prototype.hasCameraPermissions=function(){return this.data.hasPermission},e.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},e.prototype.setHasPermission=function(n){this.data.hasPermission=n,this.flush()},e.prototype.setLastUsedCameraId=function(n){this.data.lastUsedCameraId=n,this.flush()},e.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},e.prototype.reset=function(){this.data=tT.createDefault(),this.flush()},e.prototype.flush=function(){localStorage.setItem(e.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},e.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",e}();var U9=function(){function e(){this.infoDiv=document.createElement("div")}return e.prototype.renderInto=function(n){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=XC.poweredBy();var t=document.createElement("a");t.innerText="ScanApp",t.href="https://scanapp.org",t.target="new",t.style.color="white",this.infoDiv.appendChild(t);var r=document.createElement("br"),i=document.createElement("br");this.infoDiv.appendChild(r),this.infoDiv.appendChild(i);var o=document.createElement("a");o.innerText=XC.reportIssues(),o.href="https://github.com/mebjas/html5-qrcode/issues",o.target="new",o.style.color="white",this.infoDiv.appendChild(o),n.appendChild(this.infoDiv)},e.prototype.show=function(){this.infoDiv.style.display="block"},e.prototype.hide=function(){this.infoDiv.style.display="none"},e}(),j9=function(){function e(n,t){this.isShowingInfoIcon=!0,this.onTapIn=n,this.onTapOut=t,this.infoIcon=document.createElement("img")}return e.prototype.renderInto=function(n){var t=this;this.infoIcon.alt="Info icon",this.infoIcon.src=t_,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(r){return t.onHoverIn()},this.infoIcon.onmouseout=function(r){return t.onHoverOut()},this.infoIcon.onclick=function(r){return t.onClick()},n.appendChild(this.infoIcon)},e.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},e.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},e.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src=eT,this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=t_,this.infoIcon.style.opacity="0.6")},e}(),rT=function(){function e(){var n=this;this.infoDiv=new U9,this.infoIcon=new j9(function(){n.infoDiv.show()},function(){n.infoDiv.hide()})}return e.prototype.renderInto=function(n){this.infoDiv.renderInto(n),this.infoIcon.renderInto(n)},e}();var H9=function(e,n,t,r){function i(o){return o instanceof t?o:new t(function(c){c(o)})}return new(t||(t=Promise))(function(o,c){function h(v){try{m(r.next(v))}catch(b){c(b)}}function g(v){try{m(r.throw(v))}catch(b){c(b)}}function m(v){v.done?o(v.value):i(v.value).then(h,g)}m((r=r.apply(e,n||[])).next())})},z9=function(e,n){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,c;return c={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function h(m){return function(v){return g([m,v])}}function g(m){if(r)throw new TypeError("Generator is already executing.");for(;c&&(c=0,m[0]&&(t=0)),t;)try{if(r=1,i&&(o=m[0]&2?i.return:m[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,m[1])).done)return o;switch(i=0,o&&(m=[m[0]&2,o.value]),m[0]){case 0:case 1:o=m;break;case 4:return t.label++,{value:m[1],done:!1};case 5:t.label++,i=m[1],m=[0];continue;case 7:m=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(m[0]===6||m[0]===2)){t=0;continue}if(m[0]===3&&(!o||m[1]>o[0]&&m[1]<o[3])){t.label=m[1];break}if(m[0]===6&&t.label<o[1]){t.label=o[1],o=m;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(m);break}o[2]&&t.ops.pop(),t.trys.pop();continue}m=n.call(e,t)}catch(v){m=[6,v],i=0}finally{r=o=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},n_=function(){function e(){}return e.hasPermissions=function(){return H9(this,void 0,void 0,function(){var n,t,r,i;return z9(this,function(o){switch(o.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(n=o.sent(),t=0,r=n;t<r.length;t++)if(i=r[t],i.kind==="videoinput"&&i.label)return[2,!0];return[2,!1]}})})},e}();var Xi=function(){function e(n){this.supportedScanTypes=this.validateAndReturnScanTypes(n)}return e.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},e.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},e.prototype.isCameraScanRequired=function(){for(var n=0,t=this.supportedScanTypes;n<t.length;n++){var r=t[n];if(e.isCameraScanType(r))return!0}return!1},e.isCameraScanType=function(n){return n===vi.SCAN_TYPE_CAMERA},e.isFileScanType=function(n){return n===vi.SCAN_TYPE_FILE},e.prototype.validateAndReturnScanTypes=function(n){if(!n||n.length===0)return tr.DEFAULT_SUPPORTED_SCAN_TYPE;var t=tr.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(n.length>t)throw"Max ".concat(t," values expected for ")+"supportedScanTypes";for(var r=0,i=n;r<i.length;r++){var o=i[r];if(!tr.DEFAULT_SUPPORTED_SCAN_TYPE.includes(o))throw"Unsupported scan type ".concat(o)}return n},e}();var _n=function(){function e(){}return e.ALL_ELEMENT_CLASS="html5-qrcode-element",e.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",e.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",e.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",e.TORCH_BUTTON_ID="html5-qrcode-button-torch",e.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",e.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",e.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",e.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",e.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",e.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",e}();var nr=function(){function e(){}return e.createElement=function(n,t){var r=document.createElement(n);return r.id=t,r.classList.add(_n.ALL_ELEMENT_CLASS),n==="button"&&r.setAttribute("type","button"),r},e}();var oT=function(e,n,t,r){function i(o){return o instanceof t?o:new t(function(c){c(o)})}return new(t||(t=Promise))(function(o,c){function h(v){try{m(r.next(v))}catch(b){c(b)}}function g(v){try{m(r.throw(v))}catch(b){c(b)}}function m(v){v.done?o(v.value):i(v.value).then(h,g)}m((r=r.apply(e,n||[])).next())})},sT=function(e,n){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,c;return c={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function h(m){return function(v){return g([m,v])}}function g(m){if(r)throw new TypeError("Generator is already executing.");for(;c&&(c=0,m[0]&&(t=0)),t;)try{if(r=1,i&&(o=m[0]&2?i.return:m[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,m[1])).done)return o;switch(i=0,o&&(m=[m[0]&2,o.value]),m[0]){case 0:case 1:o=m;break;case 4:return t.label++,{value:m[1],done:!1};case 5:t.label++,i=m[1],m=[0];continue;case 7:m=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(m[0]===6||m[0]===2)){t=0;continue}if(m[0]===3&&(!o||m[1]>o[0]&&m[1]<o[3])){t.label=m[1];break}if(m[0]===6&&t.label<o[1]){t.label=o[1],o=m;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(m);break}o[2]&&t.ops.pop(),t.trys.pop();continue}m=n.call(e,t)}catch(v){m=[6,v],i=0}finally{r=o=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},iT=function(){function e(n,t,r){this.isTorchOn=!1,this.torchCapability=n,this.buttonController=t,this.onTorchActionFailureCallback=r}return e.prototype.isTorchEnabled=function(){return this.isTorchOn},e.prototype.flipState=function(){return oT(this,void 0,void 0,function(){var n,t;return sT(this,function(r){switch(r.label){case 0:this.buttonController.disable(),n=!this.isTorchOn,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.torchCapability.apply(n)];case 2:return r.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),n),[3,4];case 3:return t=r.sent(),this.propagateFailure(n,t),this.buttonController.enable(),[3,4];case 4:return[2]}})})},e.prototype.updateUiBasedOnLatestSettings=function(n,t){n===t?(this.buttonController.setText(t?Je.torchOffButton():Je.torchOnButton()),this.isTorchOn=t):this.propagateFailure(t),this.buttonController.enable()},e.prototype.propagateFailure=function(n,t){var r=n?Je.torchOnFailedMessage():Je.torchOffFailedMessage();t&&(r+="; Error = "+t),this.onTorchActionFailureCallback(r)},e.prototype.reset=function(){this.isTorchOn=!1},e}(),aT=function(){function e(n,t){this.onTorchActionFailureCallback=t,this.torchButton=nr.createElement("button",_n.TORCH_BUTTON_ID),this.torchController=new iT(n,this,t)}return e.prototype.render=function(n,t){var r=this;this.torchButton.innerText=Je.torchOnButton(),this.torchButton.style.display=t.display,this.torchButton.style.marginLeft=t.marginLeft;var i=this;this.torchButton.addEventListener("click",function(o){return oT(r,void 0,void 0,function(){return sT(this,function(c){switch(c.label){case 0:return[4,i.torchController.flipState()];case 1:return c.sent(),i.torchController.isTorchEnabled()?(i.torchButton.classList.remove(_n.TORCH_BUTTON_CLASS_TORCH_OFF),i.torchButton.classList.add(_n.TORCH_BUTTON_CLASS_TORCH_ON)):(i.torchButton.classList.remove(_n.TORCH_BUTTON_CLASS_TORCH_ON),i.torchButton.classList.add(_n.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}})})}),n.appendChild(this.torchButton)},e.prototype.updateTorchCapability=function(n){this.torchController=new iT(n,this,this.onTorchActionFailureCallback)},e.prototype.getTorchButton=function(){return this.torchButton},e.prototype.hide=function(){this.torchButton.style.display="none"},e.prototype.show=function(){this.torchButton.style.display="inline-block"},e.prototype.disable=function(){this.torchButton.disabled=!0},e.prototype.enable=function(){this.torchButton.disabled=!1},e.prototype.setText=function(n){this.torchButton.innerText=n},e.prototype.reset=function(){this.torchButton.innerText=Je.torchOnButton(),this.torchController.reset()},e.create=function(n,t,r,i){var o=new e(t,i);return o.render(n,r),o},e}();var lT=function(){function e(n,t,r){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=t?"block":"none",n.appendChild(this.fileBasedScanRegion);var i=document.createElement("label");i.setAttribute("for",this.getFileScanInputId()),i.style.display="inline-block",this.fileBasedScanRegion.appendChild(i),this.fileSelectionButton=nr.createElement("button",_n.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",function(h){i.click()}),i.append(this.fileSelectionButton),this.fileScanInput=nr.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",i.appendChild(this.fileScanInput);var o=this;this.fileScanInput.addEventListener("change",function(h){if(!(h==null||h.target==null)){var g=h.target;if(!(g.files&&g.files.length===0)){var m=g.files,v=m[0],b=v.name;o.setImageNameToButton(b),r(v)}}});var c=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(c),this.fileBasedScanRegion.addEventListener("dragenter",function(h){o.fileBasedScanRegion.style.border=o.fileBasedScanRegionActiveBorder(),h.stopPropagation(),h.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragleave",function(h){o.fileBasedScanRegion.style.border=o.fileBasedScanRegionDefaultBorder(),h.stopPropagation(),h.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragover",function(h){o.fileBasedScanRegion.style.border=o.fileBasedScanRegionActiveBorder(),h.stopPropagation(),h.preventDefault()}),this.fileBasedScanRegion.addEventListener("drop",function(h){h.stopPropagation(),h.preventDefault(),o.fileBasedScanRegion.style.border=o.fileBasedScanRegionDefaultBorder();var g=h.dataTransfer;if(g){var m=g.files;if(!m||m.length===0)return;for(var v=!1,b=0;b<m.length;++b){var I=m.item(b);if(I){var A=/image.*/;if(I.type.match(A)){v=!0;var R=I.name;o.setImageNameToButton(R),r(I),c.innerText=Je.dragAndDropMessage();break}}}v||(c.innerText=Je.dragAndDropMessageOnlyImages())}})}return e.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},e.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},e.prototype.isShowing=function(){return this.fileBasedScanRegion.style.display==="block"},e.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},e.prototype.createFileBasedScanRegion=function(){var n=document.createElement("div");return n.style.textAlign="center",n.style.margin="auto",n.style.width="80%",n.style.maxWidth="600px",n.style.border=this.fileBasedScanRegionDefaultBorder(),n.style.padding="10px",n.style.marginBottom="10px",n},e.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},e.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},e.prototype.createDragAndDropMessage=function(){var n=document.createElement("div");return n.innerText=Je.dragAndDropMessage(),n.style.fontWeight="400",n},e.prototype.setImageNameToButton=function(n){var t=20;if(n.length>t){var r=n.substring(0,8),i=n.length,o=n.substring(i-8,i);n="".concat(r,"....").concat(o)}var c=Je.fileSelectionChooseAnother()+" - "+n;this.fileSelectionButton.innerText=c},e.prototype.setInitialValueToButton=function(){var n=Je.fileSelectionChooseImage()+" - "+Je.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=n},e.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},e.create=function(n,t,r){var i=new e(n,t,r);return i},e}();var cT=function(){function e(n){this.selectElement=nr.createElement("select",_n.CAMERA_SELECTION_SELECT_ID),this.cameras=n,this.options=[]}return e.prototype.render=function(n){var t=document.createElement("span");t.style.marginRight="10px";var r=this.cameras.length;if(r===0)throw new Error("No cameras found");if(r===1)t.style.display="none";else{var i=Je.selectCamera();t.innerText="".concat(i," (").concat(this.cameras.length,")  ")}for(var o=1,c=0,h=this.cameras;c<h.length;c++){var g=h[c],m=g.id,v=g.label==null?m:g.label;(!v||v==="")&&(v=[Je.anonymousCameraPrefix(),o++].join(" "));var b=document.createElement("option");b.value=m,b.innerText=v,this.options.push(b),this.selectElement.appendChild(b)}t.appendChild(this.selectElement),n.appendChild(t)},e.prototype.disable=function(){this.selectElement.disabled=!0},e.prototype.isDisabled=function(){return this.selectElement.disabled===!0},e.prototype.enable=function(){this.selectElement.disabled=!1},e.prototype.getValue=function(){return this.selectElement.value},e.prototype.hasValue=function(n){for(var t=0,r=this.options;t<r.length;t++){var i=r[t];if(i.value===n)return!0}return!1},e.prototype.setValue=function(n){if(!this.hasValue(n))throw new Error("".concat(n," is not present in the camera list."));this.selectElement.value=n},e.prototype.hasSingleItem=function(){return this.cameras.length===1},e.prototype.numCameras=function(){return this.cameras.length},e.create=function(n,t){var r=new e(t);return r.render(n),r},e}();var uT=function(){function e(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=nr.createElement("input",_n.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return e.prototype.render=function(n,t){this.zoomElementContainer.style.display=t?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",n.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var r=Je.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(r),this.rangeText.style.marginRight="10px";var i=this;this.rangeInput.addEventListener("input",function(){return i.onValueChange()}),this.rangeInput.addEventListener("change",function(){return i.onValueChange()}),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},e.prototype.onValueChange=function(){var n=Je.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(n),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},e.prototype.setValues=function(n,t,r,i){this.rangeInput.min=n.toString(),this.rangeInput.max=t.toString(),this.rangeInput.step=i.toString(),this.rangeInput.value=r.toString(),this.onValueChange()},e.prototype.show=function(){this.zoomElementContainer.style.display="block"},e.prototype.hide=function(){this.zoomElementContainer.style.display="none"},e.prototype.setOnCameraZoomValueChangeCallback=function(n){this.onChangeCallback=n},e.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},e.create=function(n,t){var r=new e;return r.render(n,t),r},e}();var Tr=function(e){return e[e.STATUS_DEFAULT=0]="STATUS_DEFAULT",e[e.STATUS_SUCCESS=1]="STATUS_SUCCESS",e[e.STATUS_WARNING=2]="STATUS_WARNING",e[e.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION",e}(Tr||{});function W9(e){return{fps:e.fps,qrbox:e.qrbox,aspectRatio:e.aspectRatio,disableFlip:e.disableFlip,videoConstraints:e.videoConstraints}}function G9(e,n){return{formatsToSupport:e.formatsToSupport,useBarCodeDetectorIfSupported:e.useBarCodeDetectorIfSupported,experimentalFeatures:e.experimentalFeatures,verbose:n}}var uu=function(){function e(n,t,r){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=n,this.config=this.createConfig(t),this.verbose=r===!0,!document.getElementById(n))throw"HTML Element with id=".concat(n," not found");this.scanTypeSelector=new Xi(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new ap(this.verbose),this.persistedDataManager=new nT,t.rememberLastUsedCamera!==!0&&this.persistedDataManager.reset()}return e.prototype.render=function(n,t){var r=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(o,c){if(n)n(o,c);else{if(r.lastMatchFound===o)return;r.lastMatchFound=o,r.setHeaderMessage(Je.lastMatch(o),Tr.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(o,c){t&&t(o,c)};var i=document.getElementById(this.elementId);if(!i)throw"HTML Element with id=".concat(this.elementId," not found");i.innerHTML="",this.createBasicLayout(i),this.html5Qrcode=new dp(this.getScanRegionId(),G9(this.config,this.verbose))},e.prototype.pause=function(n){(Ar(n)||n!==!0)&&(n=!1),this.getHtml5QrcodeOrFail().pause(n)},e.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},e.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},e.prototype.clear=function(){var n=this,t=function(){var r=document.getElementById(n.elementId);r&&(r.innerHTML="",n.resetBasicLayout(r))};return this.html5Qrcode?new Promise(function(r,i){if(!n.html5Qrcode){r();return}n.html5Qrcode.isScanning?n.html5Qrcode.stop().then(function(o){if(!n.html5Qrcode){r();return}n.html5Qrcode.clear(),t(),r()}).catch(function(o){n.verbose&&n.logger.logError("Unable to stop qrcode scanner",o),i(o)}):(n.html5Qrcode.clear(),t(),r())}):Promise.resolve()},e.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},e.prototype.applyVideoConstraints=function(n){return this.getHtml5QrcodeOrFail().applyVideoConstraints(n)},e.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},e.prototype.createConfig=function(n){return n?(n.fps||(n.fps=tr.SCAN_DEFAULT_FPS),n.rememberLastUsedCamera!==!tr.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(n.rememberLastUsedCamera=tr.DEFAULT_REMEMBER_LAST_CAMERA_USED),n.supportedScanTypes||(n.supportedScanTypes=tr.DEFAULT_SUPPORTED_SCAN_TYPE),n):{fps:tr.SCAN_DEFAULT_FPS,rememberLastUsedCamera:tr.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:tr.DEFAULT_SUPPORTED_SCAN_TYPE}},e.prototype.createBasicLayout=function(n){n.style.position="relative",n.style.padding="0px",n.style.border="1px solid silver",this.createHeader(n);var t=document.createElement("div"),r=this.getScanRegionId();t.id=r,t.style.width="100%",t.style.minHeight="100px",t.style.textAlign="center",n.appendChild(t),Xi.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var i=document.createElement("div"),o=this.getDashboardId();i.id=o,i.style.width="100%",n.appendChild(i),this.setupInitialDashboard(i)},e.prototype.resetBasicLayout=function(n){n.style.border="none"},e.prototype.setupInitialDashboard=function(n){this.createSection(n),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},e.prototype.createHeader=function(n){var t=document.createElement("div");t.style.textAlign="left",t.style.margin="0px",n.appendChild(t);var r=new rT;r.renderInto(t);var i=document.createElement("div");i.id=this.getHeaderMessageContainerId(),i.style.display="none",i.style.textAlign="center",i.style.fontSize="14px",i.style.padding="2px 10px",i.style.margin="4px",i.style.borderTop="1px solid #f6f6f6",t.appendChild(i)},e.prototype.createSection=function(n){var t=document.createElement("div");t.id=this.getDashboardSectionId(),t.style.width="100%",t.style.padding="10px 0px 10px 0px",t.style.textAlign="left",n.appendChild(t)},e.prototype.createCameraListUi=function(n,t,r){var i=this;i.showHideScanTypeSwapLink(!1),i.setHeaderMessage(Je.cameraPermissionRequesting());var o=function(){r||i.createPermissionButton(n,t)};dp.getCameras().then(function(c){i.persistedDataManager.setHasPermission(!0),i.showHideScanTypeSwapLink(!0),i.resetHeaderMessage(),c&&c.length>0?(n.removeChild(t),i.renderCameraSelection(c)):(i.setHeaderMessage(Je.noCameraFound(),Tr.STATUS_WARNING),o())}).catch(function(c){i.persistedDataManager.setHasPermission(!1),r?r.disabled=!1:o(),i.setHeaderMessage(c,Tr.STATUS_WARNING),i.showHideScanTypeSwapLink(!0)})},e.prototype.createPermissionButton=function(n,t){var r=this,i=nr.createElement("button",this.getCameraPermissionButtonId());i.innerText=Je.cameraPermissionTitle(),i.addEventListener("click",function(){i.disabled=!0,r.createCameraListUi(n,t,i)}),t.appendChild(i)},e.prototype.createPermissionsUi=function(n,t){var r=this;if(Xi.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()){n_.hasPermissions().then(function(i){i?r.createCameraListUi(n,t):(r.persistedDataManager.setHasPermission(!1),r.createPermissionButton(n,t))}).catch(function(i){r.persistedDataManager.setHasPermission(!1),r.createPermissionButton(n,t)});return}this.createPermissionButton(n,t)},e.prototype.createSectionControlPanel=function(){var n=document.getElementById(this.getDashboardSectionId()),t=document.createElement("div");n.appendChild(t);var r=document.createElement("div");r.id=this.getDashboardSectionCameraScanRegionId(),r.style.display=Xi.isCameraScanType(this.currentScanType)?"block":"none",t.appendChild(r);var i=document.createElement("div");i.style.textAlign="center",r.appendChild(i),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(r,i),this.renderFileScanUi(t)},e.prototype.renderFileScanUi=function(n){var t=Xi.isFileScanType(this.currentScanType),r=this,i=function(o){if(!r.html5Qrcode)throw"html5Qrcode not defined";Xi.isFileScanType(r.currentScanType)&&(r.setHeaderMessage(Je.loadingImage()),r.html5Qrcode.scanFileV2(o,!0).then(function(c){r.resetHeaderMessage(),r.qrCodeSuccessCallback(c.decodedText,c)}).catch(function(c){r.setHeaderMessage(c,Tr.STATUS_WARNING),r.qrCodeErrorCallback(c,sp.createFrom(c))}))};this.fileSelectionUi=lT.create(n,t,i)},e.prototype.renderCameraSelection=function(n){var t=this,r=this,i=document.getElementById(this.getDashboardSectionCameraScanRegionId());i.style.textAlign="center";var o=uT.create(i,!1),c=function(j){var Y=j.zoomFeature();if(Y.isSupported()){o.setOnCameraZoomValueChangeCallback(function(ce){Y.apply(ce)});var G=1;t.config.defaultZoomValueIfSupported&&(G=t.config.defaultZoomValueIfSupported),G=VA(G,Y.min(),Y.max()),o.setValues(Y.min(),Y.max(),G,Y.step()),o.show()}},h=cT.create(i,n),g=document.createElement("span"),m=nr.createElement("button",_n.CAMERA_START_BUTTON_ID);m.innerText=Je.scanButtonStartScanningText(),g.appendChild(m);var v=nr.createElement("button",_n.CAMERA_STOP_BUTTON_ID);v.innerText=Je.scanButtonStopScanningText(),v.style.display="none",v.disabled=!0,g.appendChild(v);var b,I=function(j){if(!j.torchFeature().isSupported()){b&&b.hide();return}b?b.updateTorchCapability(j.torchFeature()):b=aT.create(g,j.torchFeature(),{display:"none",marginLeft:"5px"},function(Y){r.setHeaderMessage(Y,Tr.STATUS_WARNING)}),b.show()};i.appendChild(g);var A=function(j){j||(m.style.display="none"),m.innerText=Je.scanButtonStartScanningText(),m.style.opacity="1",m.disabled=!1,j&&(m.style.display="inline-block")};if(m.addEventListener("click",function(j){m.innerText=Je.scanButtonScanningStarting(),h.disable(),m.disabled=!0,m.style.opacity="0.5",t.scanTypeSelector.hasMoreThanOneScanType()&&r.showHideScanTypeSwapLink(!1),r.resetHeaderMessage();var Y=h.getValue();r.persistedDataManager.setLastUsedCameraId(Y),r.html5Qrcode.start(Y,W9(r.config),r.qrCodeSuccessCallback,r.qrCodeErrorCallback).then(function(G){v.disabled=!1,v.style.display="inline-block",A(!1);var ce=r.html5Qrcode.getRunningTrackCameraCapabilities();t.config.showTorchButtonIfSupported===!0&&I(ce),t.config.showZoomSliderIfSupported===!0&&c(ce)}).catch(function(G){r.showHideScanTypeSwapLink(!0),h.enable(),A(!0),r.setHeaderMessage(G,Tr.STATUS_WARNING)})}),h.hasSingleItem()&&m.click(),v.addEventListener("click",function(j){if(!r.html5Qrcode)throw"html5Qrcode not defined";v.disabled=!0,r.html5Qrcode.stop().then(function(Y){t.scanTypeSelector.hasMoreThanOneScanType()&&r.showHideScanTypeSwapLink(!0),h.enable(),m.disabled=!1,v.style.display="none",m.style.display="inline-block",b&&(b.reset(),b.hide()),o.removeOnCameraZoomValueChangeCallback(),o.hide(),r.insertCameraScanImageToScanRegion()}).catch(function(Y){v.disabled=!1,r.setHeaderMessage(Y,Tr.STATUS_WARNING)})}),r.persistedDataManager.getLastUsedCameraId()){var R=r.persistedDataManager.getLastUsedCameraId();h.hasValue(R)?(h.setValue(R),m.click()):r.persistedDataManager.resetLastUsedCameraId()}},e.prototype.createSectionSwap=function(){var n=this,t=Je.textIfCameraScanSelected(),r=Je.textIfFileScanSelected(),i=document.getElementById(this.getDashboardSectionId()),o=document.createElement("div");o.style.textAlign="center";var c=nr.createElement("span",this.getDashboardSectionSwapLinkId());c.style.textDecoration="underline",c.style.cursor="pointer",c.innerText=Xi.isCameraScanType(this.currentScanType)?t:r,c.addEventListener("click",function(){if(!n.sectionSwapAllowed){n.verbose&&n.logger.logError("Section swap called when not allowed");return}n.resetHeaderMessage(),n.fileSelectionUi.resetValue(),n.sectionSwapAllowed=!1,Xi.isCameraScanType(n.currentScanType)?(n.clearScanRegion(),n.getCameraScanRegion().style.display="none",n.fileSelectionUi.show(),c.innerText=r,n.currentScanType=vi.SCAN_TYPE_FILE,n.insertFileScanImageToScanRegion()):(n.clearScanRegion(),n.getCameraScanRegion().style.display="block",n.fileSelectionUi.hide(),c.innerText=t,n.currentScanType=vi.SCAN_TYPE_CAMERA,n.insertCameraScanImageToScanRegion(),n.startCameraScanIfPermissionExistsOnSwap()),n.sectionSwapAllowed=!0}),o.appendChild(c),i.appendChild(o)},e.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var n=this,t=this;if(this.persistedDataManager.hasCameraPermissions()){n_.hasPermissions().then(function(r){if(r){var i=document.getElementById(t.getCameraPermissionButtonId());if(!i)throw n.logger.logError("Permission button not found, fail;"),"Permission button not found";i.click()}else t.persistedDataManager.setHasPermission(!1)}).catch(function(r){t.persistedDataManager.setHasPermission(!1)});return}},e.prototype.resetHeaderMessage=function(){var n=document.getElementById(this.getHeaderMessageContainerId());n.style.display="none"},e.prototype.setHeaderMessage=function(n,t){t||(t=Tr.STATUS_DEFAULT);var r=this.getHeaderMessageDiv();switch(r.innerText=n,r.style.display="block",t){case Tr.STATUS_SUCCESS:r.style.background="rgba(106, 175, 80, 0.26)",r.style.color="#477735";break;case Tr.STATUS_WARNING:r.style.background="rgba(203, 36, 49, 0.14)",r.style.color="#cb2431";break;case Tr.STATUS_DEFAULT:default:r.style.background="rgba(0, 0, 0, 0)",r.style.color="rgb(17, 17, 17)";break}},e.prototype.showHideScanTypeSwapLink=function(n){this.scanTypeSelector.hasMoreThanOneScanType()&&(n!==!0&&(n=!1),this.sectionSwapAllowed=n,this.getDashboardSectionSwapLink().style.display=n?"inline-block":"none")},e.prototype.insertCameraScanImageToScanRegion=function(){var n=this,t=document.getElementById(this.getScanRegionId());if(this.cameraScanImage){t.innerHTML="<br>",t.appendChild(this.cameraScanImage);return}this.cameraScanImage=new Image,this.cameraScanImage.onload=function(r){t.innerHTML="<br>",t.appendChild(n.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=KA,this.cameraScanImage.alt=Je.cameraScanAltText()},e.prototype.insertFileScanImageToScanRegion=function(){var n=this,t=document.getElementById(this.getScanRegionId());if(this.fileScanImage){t.innerHTML="<br>",t.appendChild(this.fileScanImage);return}this.fileScanImage=new Image,this.fileScanImage.onload=function(r){t.innerHTML="<br>",t.appendChild(n.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=JA,this.fileScanImage.alt=Je.fileScanAltText()},e.prototype.clearScanRegion=function(){var n=document.getElementById(this.getScanRegionId());n.innerHTML=""},e.prototype.getDashboardSectionId=function(){return"".concat(this.elementId,"__dashboard_section")},e.prototype.getDashboardSectionCameraScanRegionId=function(){return"".concat(this.elementId,"__dashboard_section_csr")},e.prototype.getDashboardSectionSwapLinkId=function(){return _n.SCAN_TYPE_CHANGE_ANCHOR_ID},e.prototype.getScanRegionId=function(){return"".concat(this.elementId,"__scan_region")},e.prototype.getDashboardId=function(){return"".concat(this.elementId,"__dashboard")},e.prototype.getHeaderMessageContainerId=function(){return"".concat(this.elementId,"__header_message")},e.prototype.getCameraPermissionButtonId=function(){return _n.CAMERA_PERMISSION_BUTTON_ID},e.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},e.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},e.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())},e}();var dT=(()=>{class e{navigationService;messagesService;tableId=null;uniqueLinkToken=null;ownerId=null;restaurantid=null;html5QrCodeScanner=null;constructor(t,r){this.navigationService=t,this.messagesService=r}ngAfterViewInit(){this.html5QrCodeScanner=new uu("reader",{fps:10,qrbox:{width:250,height:250}},!1),this.html5QrCodeScanner.render(this.onScanSuccess.bind(this),this.onScanFailure)}onScanSuccess(t){let r=new URL(t),i=r.searchParams.get("t"),o=r.searchParams.get("u"),c=r.searchParams.get("r"),h=r.searchParams.get("o");this.messagesService.askUser("Czy na pewno chcesz zmienic stolik?",()=>{i?(this.tableId=i,this.uniqueLinkToken=o,this.restaurantid=c,this.ownerId=h,localStorage.setItem("customercurrentTable",this.tableId),localStorage.setItem("uniqueLinkToken",this.uniqueLinkToken),localStorage.setItem("restaurantid",this.restaurantid),localStorage.setItem("ownerid",this.ownerId),this.navigationService.NavigateTo("tableordered"),console.log("Table ID saved:",this.tableId)):console.error("Table ID not found in the scanned QR code.")},()=>{this.navigationService.NavigateTo("tableordered")}),this.html5QrCodeScanner?.clear()}onScanFailure(t){console.warn(`QR code scan error: ${t}`)}ngOnDestroy(){this.html5QrCodeScanner?.clear()}static \u0275fac=function(r){return new(r||e)(W(xe),W(_o))};static \u0275cmp=ie({type:e,selectors:[["app-scanqrcode"]],standalone:!0,features:[oe],decls:7,vars:0,consts:[[1,"layoutbox"],[1,"head"],[1,"logo"],["src","https://cdn1.mandarin.com.pl/eologo.png","alt","EasyOrder"],["id","reader",2,"width","300px"],[1,"footstatic"]],template:function(r,i){r&1&&(T(0,"main")(1,"div",0)(2,"div",1)(3,"div",2),se(4,"img",3),N()(),se(5,"div",4)(6,"div",5),N()())},styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;justify-content:space-between;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{width:100%;height:64px;padding:0 32px;border-bottom:3px solid #000;display:flex;justify-content:space-between;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{margin:8px 0;height:48px}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .backbtn[_ngcontent-%COMP%]{height:48px;font-size:48px;font-weight:700;display:flex;justify-content:center;align-items:center;margin:8px 0}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .backbtn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{height:48px;font-size:48px;font-weight:700}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{width:75%;display:flex;flex-direction:column;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-weight:bolder;font-size:140%;margin-bottom:24px}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;background:#fff;padding:16px;font-size:110%;border-radius:16px;color:#000;font-weight:600;letter-spacing:2px;border:3px solid #000;transition:all .5s;margin-bottom:24px}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#333}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;background:#000;padding:16px;font-size:110%;color:#fff;font-weight:600;letter-spacing:2px;border:none;transition:all .5s;border-radius:16px;cursor:pointer}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#333}#reader[_ngcontent-%COMP%]{width:300px;height:300px;border-radius:16px;border:3px black solid;display:flex;flex-direction:column;flex-wrap:wrap;justify-content:center;align-items:center;align-content:center}#reader[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:none!important}#reader__scan_region[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-wrap:wrap;justify-content:center;align-items:center;align-content:center}"]})}return e})();var fT=(()=>{class e{router;constructor(t){this.router=t}setOrder(t){localStorage.setItem("orderNumber",t),this.router.navigate(["/scanqrcode"])}static \u0275fac=function(r){return new(r||e)(W(gi))};static \u0275cmp=ie({type:e,selectors:[["app-setorder"]],standalone:!0,features:[oe],decls:14,vars:0,consts:[["orderNumberInput",""],[1,"layoutbox"],[1,"head"],[1,"logo"],["src","https://cdn1.mandarin.com.pl/eologo.png","alt","EasyOrder"],[1,"backbtn"],[1,"loginform"],["type","text"],[3,"click"],[1,"footstatic"]],template:function(r,i){if(r&1){let o=Vt();T(0,"main")(1,"div",1)(2,"div",2)(3,"div",3),se(4,"img",4),N(),se(5,"div",5),N(),T(6,"div",6)(7,"label"),P(8,"Wprowad\u017A numer zam\xF3wienia"),N(),se(9,"input",7,0),T(11,"button",8),$("click",function(){Nt(o);let h=gf(10);return Ot(i.setOrder(h.value))}),P(12,"Przypisz stolik"),N()(),se(13,"div",9),N()()}},styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;justify-content:space-between;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{width:100%;height:64px;padding:0 32px;border-bottom:3px solid #000;display:flex;justify-content:space-between;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{margin:8px 0;height:48px}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .backbtn[_ngcontent-%COMP%]{height:48px;font-size:48px;font-weight:700;display:flex;justify-content:center;align-items:center;margin:8px 0}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .backbtn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{height:48px;font-size:48px;font-weight:700}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]{width:75%;display:flex;flex-direction:column;align-items:center;position:relative}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:bolder;font-size:200%;margin-bottom:24px}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;background:#fff;padding:16px;font-size:110%;border-radius:16px;color:#000;font-weight:600;letter-spacing:2px;border:3px solid #000;transition:all .5s;margin-bottom:24px}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#333}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;background:#000;padding:16px;font-size:110%;color:#fff;font-weight:600;letter-spacing:2px;border:none;transition:all .5s;border-radius:16px;cursor:pointer}main[_ngcontent-%COMP%]   .layoutbox[_ngcontent-%COMP%]   .loginform[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#333}"]})}return e})();var hT=(()=>{class e{route;router;waiterId=null;uniqueLinkToken=null;ownerId=null;restaurantId=null;pin="";constructor(t,r){this.route=t,this.router=r,we(Ae.firebaseConfig)}ngOnInit(){this.route.queryParams.subscribe(t=>{this.uniqueLinkToken=t.u||null,this.ownerId=t.o||null,this.restaurantId=t.r||null})}authenticateWaiter(){let t=ee();if(!this.restaurantId||!this.uniqueLinkToken||!this.ownerId){console.error("Missing required data");return}let r=J(t,`Owners/${this.ownerId}/Restaurants/${this.restaurantId}`);me(r).then(i=>{if(i.exists()){let c=i.val().settings.waiter_access_pin;c&&c.toString()===this.pin?this.saveAuthData():console.error("Invalid PIN")}else console.error("Restaurant not found")}).catch(i=>{console.error("Error authenticating waiter:",i)})}saveAuthData(){localStorage.setItem("uniqueLinkToken",this.uniqueLinkToken),localStorage.setItem("restaurantid",this.restaurantId),localStorage.setItem("ownerid",this.ownerId),localStorage.setItem("waiterpin",this.pin),this.router.navigate(["/waitertablelist"])}static \u0275fac=function(r){return new(r||e)(W(pi),W(gi))};static \u0275cmp=ie({type:e,selectors:[["app-waiterauth"]],standalone:!0,features:[oe],decls:8,vars:1,consts:[[1,"auth-container"],["for","pin"],["id","pin","type","password","placeholder","Access Pin","required","",3,"ngModelChange","ngModel"],[3,"click"]],template:function(r,i){r&1&&(T(0,"div",0)(1,"h2"),P(2,"Waiter Authentication"),N(),T(3,"label",1),P(4,"Wprowad\u017A numer Pin:"),N(),T(5,"input",2),it("ngModelChange",function(c){return ot(i.pin,c)||(i.pin=c),c}),N(),T(6,"button",3),$("click",function(){return i.authenticateWaiter()}),P(7,"Zaloguj"),N()()),r&2&&(Z(5),rt("ngModel",i.pin))},dependencies:[Ut,Qt,Cn,Tn,an]})}return e})();function $9(e,n){e&1&&(T(0,"p"),P(1,"Brak stolik\xF3w przypisanych do restauracji."),N())}function q9(e,n){if(e&1){let t=Vt();T(0,"button",13),$("click",function(){let i=Nt(t).$implicit,o=Qe(2);return Ot(o.setTable(i.id))}),P(1),N()}if(e&2){let t=n.$implicit;Z(),yn(" ",t.name," ")}}function Y9(e,n){if(e&1&&gn(0,q9,2,1,"button",12,pn),e&2){let t=Qe();mn(t.tables)}}var pT=(()=>{class e{navigationService;tables=[];isMenuOpen=!1;toggleMenu(){this.isMenuOpen=!this.isMenuOpen}constructor(t){this.navigationService=t;let r=we(Ae.firebaseConfig)}ngOnInit(){this.loadTables()}loadTables(){let t=ee(),r=localStorage.getItem("currentRestaurant"),i=localStorage.getItem("ownerid");if(!r){console.error("No current restaurant found in local storage");return}let o=J(t,`Owners/${i}/Restaurants/${r}/Tables`);me(o).then(c=>{if(c.exists()){let h=c.val();this.tables=Object.values(h)}else console.log("No tables found")}).catch(c=>{console.error("Error loading tables:",c)})}setTable(t){localStorage.setItem("currentTable",t),this.goToPage("waitertablelookup")}goToPage(t){this.navigationService.NavigateTo(t)}static \u0275fac=function(r){return new(r||e)(W(xe))};static \u0275cmp=ie({type:e,selectors:[["app-waitertablelist"]],standalone:!0,features:[oe],decls:40,vars:4,consts:[[1,"displaybox"],[1,"logo"],["id","head"],[1,"logotype"],["href","#"],[1,"burger",3,"click"],[1,"material-symbols-rounded"],[1,"menu"],["href","#",1,"menu-item"],[1,"buttons"],[1,"footstatic"],[3,"click"],[1,"table-button"],[1,"table-button",3,"click"]],template:function(r,i){r&1&&(T(0,"main")(1,"div",0)(2,"div",1)(3,"nav",2)(4,"ul")(5,"li",3)(6,"a",4),P(7,"EasyOrder"),N()(),T(8,"li",5),$("click",function(){return i.toggleMenu()}),T(9,"span",6),P(10),N()(),T(11,"li",7)(12,"div"),P(13,"Moje zam\xF3wienia: "),T(14,"a",8),P(15,"Nowe"),N(),T(16,"a",8),P(17,"Wydane"),N()(),T(18,"div"),P(19,"Wszystkie zam\xF3wienia: "),T(20,"a",8),P(21,"Nowe"),N(),T(22,"a",8),P(23,"Wydane"),N()(),T(24,"div"),P(25,"Widok: "),T(26,"a",8),P(27,"Stoliki"),N(),T(28,"a",8),P(29,"Zam\xF3wienia"),N()()()()()(),T(30,"div",9),Wt(31,$9,2,0,"p")(32,Y9,2,0),N(),T(33,"div",10)(34,"button",11),$("click",function(){return i.goToPage("waiterscan")}),T(35,"span",6),P(36," photo_camera "),N()(),T(37,"button",11),$("click",function(){return i.goToPage("addorder")}),T(38,"span",6),P(39," post_add "),N()()()()()),r&2&&(Z(10),Gt(i.isMenuOpen?"X":"menu"),Z(),Yr("is-open",i.isMenuOpen),Z(20),sn(i.tables.length===0?31:32))},styles:["main[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;padding:16px;position:relative}.displaybox[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center;position:relative}.logo[_ngcontent-%COMP%]{display:flex;font-size:45%;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;align-content:center;margin-bottom:48px}.buttons[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:flex-start;align-items:center;align-content:center}.buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{text-align:left;width:100%;background:#fff;padding:24px;font-size:110%;color:#000;font-weight:600;letter-spacing:2px;border:1px solid #000000;transition:all .5s;margin-bottom:24px}.footstatic[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center}.footstatic[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:calc(100% - 16px);background:#fff;padding:24px;font-size:110%;color:#000;font-weight:600;letter-spacing:2px;border:1px solid #000000;transition:all .5s;margin-bottom:24px;margin-right:8px}#head[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:0;padding:0;display:flex;align-items:center;justify-content:space-between;background:#fff;box-shadow:0 2px 4px #0003}#head[_ngcontent-%COMP%]   .logotype[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding:0 8px;font-size:1.4rem;text-decoration:none;color:#000}#head[_ngcontent-%COMP%]   .burger[_ngcontent-%COMP%]{padding:0 10px;border-left:1px solid #eee;display:none;cursor:pointer}#head[_ngcontent-%COMP%]   .burger[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#999;line-height:60px}@media (max-width: 768px){#head[_ngcontent-%COMP%]   .burger[_ngcontent-%COMP%]{display:block}}#head[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]{display:flex;align-items:center}@media (max-width: 768px){#head[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]{display:none}#head[_ngcontent-%COMP%]   .menu.is-open[_ngcontent-%COMP%]{display:block;position:absolute;top:62px;background:#fff;width:100%}#head[_ngcontent-%COMP%]   .menu.is-open[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]{border-bottom:1px solid #cccccc}}#head[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]{padding:0 10px;height:60px;line-height:60px;text-decoration:none;display:block;text-transform:uppercase;font-size:.8rem;font-weight:600;color:#454545}.active[_ngcontent-%COMP%]{background:#000;color:#fff}"]})}return e})();var gT=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275cmp=ie({type:e,selectors:[["app-waitertablelookup"]],standalone:!0,features:[oe],decls:2,vars:0,template:function(r,i){r&1&&(T(0,"p"),P(1,"waitertablelookup works!"),N())}})}return e})();function X9(e,n){e&1&&(T(0,"p"),P(1,"Brak stolik\xF3w przypisanych do restauracji."),N())}function Z9(e,n){if(e&1){let t=Vt();T(0,"button",14),$("click",function(){let i=Nt(t).$implicit,o=Qe(2);return Ot(o.setTable(i.name))}),P(1),N()}if(e&2){let t=n.$implicit;Z(),yn(" ",t.name," ")}}function Q9(e,n){if(e&1&&gn(0,Z9,2,1,"button",13,pn),e&2){let t=Qe();mn(t.orders)}}var mT=(()=>{class e{navigationService;orders=[];constructor(t){this.navigationService=t;let r=we(Ae.firebaseConfig)}isMenuOpen=!1;toggleMenu(){this.isMenuOpen=!this.isMenuOpen}ngOnInit(){this.loadOrders()}loadOrders(){let t=ee(),r=localStorage.getItem("currentRestaurant"),i=localStorage.getItem("ownerid");if(console.log("Current restaurant ID:",r),console.log("Current owner ID:",i),!r||!i){console.error("No current restaurant or owner found");return}let o=J(t,`Owners/${i}/Restaurants/${r}/Orders`);me(o).then(c=>{if(console.log("Firebase Snapshot:",c),c.exists()){let h=c.val();console.log("Orders Data:",h),this.orders=Object.values(h),this.orders.sort((g,m)=>g.created_at<m.created_at?-1:g.created_at>m.created_at||g.completed_at&&!m.completed_at?1:!g.completed_at&&m.completed_at?-1:0),console.log("Sorted Orders:",this.orders)}else console.log("No orders found")}).catch(c=>{console.error("Error loading orders:",c)})}setTable(t){localStorage.setItem("currentTable",t),this.goToPage("waitertablelookup")}goToPage(t){this.navigationService.NavigateTo(t)}static \u0275fac=function(r){return new(r||e)(W(xe))};static \u0275cmp=ie({type:e,selectors:[["app-waiterorderlist"]],standalone:!0,features:[oe],decls:40,vars:4,consts:[[1,"displaybox"],[1,"logo"],["id","head"],[1,"logotype"],["href","#"],[1,"burger",3,"click"],[1,"material-symbols-rounded"],[1,"menu"],["href","#",1,"menu-item"],["href","#",1,"menu-item","active"],[1,"buttons"],[1,"footstatic"],[3,"click"],[1,"table-button"],[1,"table-button",3,"click"]],template:function(r,i){r&1&&(T(0,"main")(1,"div",0)(2,"div",1)(3,"nav",2)(4,"ul")(5,"li",3)(6,"a",4),P(7,"EasyOrder"),N()(),T(8,"li",5),$("click",function(){return i.toggleMenu()}),T(9,"span",6),P(10),N()(),T(11,"li",7)(12,"div"),P(13,"Moje zam\xF3wienia: "),T(14,"a",8),P(15,"Nowe"),N(),T(16,"a",8),P(17,"Wydane"),N()(),T(18,"div"),P(19,"Wszystkie zam\xF3wienia: "),T(20,"a",8),P(21,"Nowe"),N(),T(22,"a",8),P(23,"Wydane"),N()(),T(24,"div"),P(25,"Widok: "),T(26,"a",8),P(27,"Stoliki"),N(),T(28,"a",9),P(29,"Zam\xF3wienia"),N()()()()()(),T(30,"div",10),Wt(31,X9,2,0,"p")(32,Q9,2,0),N(),T(33,"div",11)(34,"button",12),$("click",function(){return i.goToPage("waiterscan")}),T(35,"span",6),P(36," photo_camera "),N()(),T(37,"button",12),$("click",function(){return i.goToPage("addorder")}),T(38,"span",6),P(39," post_add "),N()()()()()),r&2&&(Z(10),Gt(i.isMenuOpen?"X":"menu"),Z(),Yr("is-open",i.isMenuOpen),Z(20),sn(i.orders.length===0?31:32))},styles:["#head[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:0;padding:0;display:flex;align-items:center;justify-content:space-between;background:#fff;box-shadow:0 2px 4px #0003}#head[_ngcontent-%COMP%]   .logotype[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding:0 8px;font-size:1.4rem;text-decoration:none;color:#000}#head[_ngcontent-%COMP%]   .burger[_ngcontent-%COMP%]{padding:0 10px;border-left:1px solid #eee;display:none;cursor:pointer}#head[_ngcontent-%COMP%]   .burger[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#999;line-height:60px}@media (max-width: 768px){#head[_ngcontent-%COMP%]   .burger[_ngcontent-%COMP%]{display:block}}#head[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]{display:flex;align-items:center}@media (max-width: 768px){#head[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]{display:none}#head[_ngcontent-%COMP%]   .menu.is-open[_ngcontent-%COMP%]{display:block;position:absolute;top:62px;background:#fff;width:100%}#head[_ngcontent-%COMP%]   .menu.is-open[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]{border-bottom:1px solid #cccccc}}#head[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]{padding:0 10px;height:60px;line-height:60px;text-decoration:none;display:block;text-transform:uppercase;font-size:.8rem;font-weight:600;color:#454545}.active[_ngcontent-%COMP%]{background:#000;color:#fff!important}"]})}return e})();var yT=(()=>{class e{navigationService;tableId=null;uniqueLinkToken=null;ownerId=null;restaurantid=null;html5QrCodeScanner=null;constructor(t){this.navigationService=t}ngAfterViewInit(){this.html5QrCodeScanner=new uu("reader",{fps:10,qrbox:{width:250,height:250}},!1),this.html5QrCodeScanner.render(this.onScanSuccess.bind(this),this.onScanFailure)}onScanSuccess(t){let r=new URL(t),i=r.searchParams.get("t"),o=r.searchParams.get("u"),c=r.searchParams.get("r"),h=r.searchParams.get("o");i?(this.tableId=i,this.uniqueLinkToken=o,this.restaurantid=c,this.ownerId=h,localStorage.setItem("customercurrentTable",this.tableId),localStorage.setItem("uniqueLinkToken",this.uniqueLinkToken),localStorage.setItem("restaurantid",this.restaurantid),localStorage.setItem("ownerid",this.ownerId),this.navigationService.NavigateTo("tableordered"),console.log("Table ID saved:",this.tableId)):console.error("Table ID not found in the scanned QR code."),this.html5QrCodeScanner?.clear()}onScanFailure(t){console.warn(`QR code scan error: ${t}`)}ngOnDestroy(){this.html5QrCodeScanner?.clear()}static \u0275fac=function(r){return new(r||e)(W(xe))};static \u0275cmp=ie({type:e,selectors:[["app-waiterscan"]],standalone:!0,features:[oe],decls:1,vars:0,consts:[["id","reader",2,"width","300px"]],template:function(r,i){r&1&&se(0,"div",0)}})}return e})();var CT=(()=>{class e{navigationService;tableId=null;table=null;tableGroupName=null;groupColor=null;uniqueLinkToken=null;ownerId=null;restaurantId=null;constructor(t){this.navigationService=t,we(Ae.firebaseConfig)}ngOnInit(){this.loadTable(),this.loadUniqueLinkToken()}loadUniqueLinkToken(){let t=ee();this.ownerId=sessionStorage.getItem("userId"),this.restaurantId=localStorage.getItem("currentRestaurant");let r=J(t,`Owners/${this.ownerId}/Restaurants/${this.restaurantId}/uniqueLinkToken`);me(r).then(i=>{i.exists()?this.uniqueLinkToken=i.val():console.log("No unique link token found")}).catch(i=>{console.error("Error loading unique link token:",i)})}deleteTable(){let t=ee(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant");if(!this.tableId||!r||!i){console.error("Missing table, owner, or restaurant ID");return}let o=J(t,`Owners/${r}/Restaurants/${i}/Tables/${this.tableId}`);Sr(o).then(()=>{console.log("Table deleted successfully"),this.navigationService.NavigateTo("tablemanage")}).catch(c=>{console.error("Error deleting table:",c)})}blockTable(){let t=ee(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant");if(!this.tableId||!r||!i){console.error("Missing table, owner, or restaurant ID");return}let o=J(t,`Owners/${r}/Restaurants/${i}/Tables/${this.tableId}`);mt(o,{is_blocked:!0}).then(()=>{console.log("Table blocked successfully"),location.reload()}).catch(c=>{console.error("Error blocking table:",c)})}unlockTable(){let t=ee(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant");if(!this.tableId||!r||!i){console.error("Missing table, owner, or restaurant ID");return}let o=J(t,`Owners/${r}/Restaurants/${i}/Tables/${this.tableId}`);mt(o,{is_blocked:!1}).then(()=>{console.log("Table unlocked successfully"),location.reload()}).catch(c=>{console.error("Error unlocking table:",c)})}saveTable(){}loadTable(){if(this.tableId=localStorage.getItem("currentTable"),!this.tableId){console.error("No current table found in local storage");return}let t=ee(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant"),o=J(t,`Owners/${r}/Restaurants/${i}/Tables/${this.tableId}`);me(o).then(c=>{c.exists()?(this.table=c.val(),this.loadTableGroup()):console.log("No table found")}).catch(c=>{console.error("Error loading table:",c)})}loadTableGroup(){let t=ee(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant");if(!this.table?.group_id||this.table.group_id==="0g"){this.tableGroupName="Stoliki bez grupy",this.groupColor="#000000";return}let o=J(t,`Owners/${r}/Restaurants/${i}/TableGroups/${this.table.group_id}`);me(o).then(c=>{if(c.exists()){let h=c.val();this.tableGroupName=h.name,this.groupColor=h.color}else console.log("No group found for this table")}).catch(c=>{console.error("Error loading group:",c)})}getQRCodeData(){let t=this.table?.id||"",r=this.uniqueLinkToken||"",i=sessionStorage.getItem("userId"),o=localStorage.getItem("currentRestaurant");return`https://easyorder.mandarin.com.pl/settable?tableid=${t}&uniqueLinkToken=${r}&ownerid=${i}&restaurantid=${o}`}static \u0275fac=function(r){return new(r||e)(W(xe))};static \u0275cmp=ie({type:e,selectors:[["app-waiterqrcode"]],standalone:!0,features:[oe],decls:3,vars:13,consts:[[1,"qrcodeImage"],[3,"qrdata","allowEmptyString","alt","ariaLabel","cssClass","colorDark","colorLight","elementType","errorCorrectionLevel","margin","scale","title","width"]],template:function(r,i){r&1&&(T(0,"main")(1,"div",0),se(2,"qrcode",1),N()()),r&2&&(Z(2),It("qrdata","https://easyorder.mandarin.com.pl/waiterauth?u="+i.uniqueLinkToken+"&o="+i.ownerId+"&r="+i.restaurantId)("allowEmptyString",!0)("alt","A custom alt attribute")("ariaLabel","QR Code image with the following content...")("cssClass","center")("colorDark","#000000ff")("colorLight","#ffffffff")("elementType","img")("errorCorrectionLevel","H")("margin",4)("scale",1)("title","A custom title attribute")("width",300))},dependencies:[ko,Po]})}return e})();var _T=(()=>{class e{navigationService;orderNumber="";constructor(t){this.navigationService=t,we(Ae.firebaseConfig)}addOrder(){let t=ee(),r=localStorage.getItem("ownerid"),i=localStorage.getItem("currentRestaurant");if(!r||!i){console.error("Brak wymaganych danych");return}let o=Date.now().toString(),c={name:this.orderNumber,waiter_get_order_at_table:!0,created_at:Date.now(),canceled_at:null,completed_at:null,table_id:"",waiter_set_order_number:!0,table_id_entered_by_waiter:!1,completed_during_table_clean:!1},h=J(t,`Owners/${r}/Restaurants/${i}/Orders/${o}`);To(h,c).then(()=>{console.log("Zam\xF3wienie dodane pomy\u015Blnie"),this.orderNumber="",this.navigationService.NavigateTo("waiterorderlist")}).catch(g=>{console.error("B\u0142\u0105d podczas dodawania zam\xF3wienia:",g)})}static \u0275fac=function(r){return new(r||e)(W(xe))};static \u0275cmp=ie({type:e,selectors:[["app-addorder"]],standalone:!0,features:[oe],decls:8,vars:1,consts:[["for","orderNumber"],["type","text","id","orderNumber",3,"ngModelChange","ngModel"],[3,"click"]],template:function(r,i){r&1&&(T(0,"p"),P(1,"addorder works!"),N(),T(2,"div")(3,"label",0),P(4,"Numer zam\xF3wienia:"),N(),T(5,"input",1),it("ngModelChange",function(c){return ot(i.orderNumber,c)||(i.orderNumber=c),c}),N(),T(6,"button",2),$("click",function(){return i.addOrder()}),P(7,"Dodaj zam\xF3wienie"),N()()),r&2&&(Z(5),rt("ngModel",i.orderNumber))},dependencies:[Ut,Qt,Cn,an]})}return e})();function K9(e,n){if(e&1&&(T(0,"option",9),P(1),N()),e&2){let t=Qe().$implicit;It("value",t.id),Z(),Gt(t.name)}}function J9(e,n){if(e&1&&(T(0,"option",10),P(1),N()),e&2){let t=Qe().$implicit;It("value",t.id),Z(),Gt(t.name)}}function eV(e,n){if(e&1&&Wt(0,K9,2,2,"option",9)(1,J9,2,2,"option",10),e&2){let t=n.$implicit,r=Qe();sn(t.id==r.table.group_id?0:-1),Z(),sn(t.id!=r.table.group_id?1:-1)}}var wT=(()=>{class e{navigationService;table={id:"",name:"",group_id:"",description:"",is_blocked:!1};tableGroups=[];restaurantId="";constructor(t){this.navigationService=t,we(Ae.firebaseConfig)}ngOnInit(){this.loadEditedTable(),this.loadTableGroups()}loadEditedTable(){let t=localStorage.getItem("currentTable"),r=sessionStorage.getItem("userId");if(this.restaurantId=localStorage.getItem("currentRestaurant")??"",!t||!r||!this.restaurantId){console.error("Missing table, owner, or restaurant ID");return}let i=ee(),o=J(i,`Owners/${r}/Restaurants/${this.restaurantId}/Tables/${t}`);me(o).then(c=>{c.exists()?this.table=c.val():console.log("No table found")}).catch(c=>{console.error("Error loading table:",c)})}loadTableGroups(){let t=sessionStorage.getItem("userId"),r=localStorage.getItem("currentRestaurant");if(!t||!r){console.error("Missing owner or restaurant ID");return}let i=ee(),o=J(i,`Owners/${t}/Restaurants/${r}/TableGroups`);me(o).then(c=>{c.exists()?this.tableGroups=Object.values(c.val()):console.log("No table groups found")}).catch(c=>{console.error("Error loading table groups:",c)})}saveChanges(){let t=sessionStorage.getItem("userId"),r=localStorage.getItem("currentRestaurant"),i=localStorage.getItem("currentTable");if(!t||!r||!i){console.error("Missing owner, restaurant, or table ID");return}let o=ee(),c=J(o,`Owners/${t}/Restaurants/${r}/Tables/${i}`);mt(c,{name:this.table.name,group_id:this.table.group_id,description:this.table.description,is_blocked:this.table.is_blocked}).then(()=>{console.log("Table updated successfully"),this.navigationService.NavigateTo("tablemanage")}).catch(h=>{console.error("Error updating table:",h)})}static \u0275fac=function(r){return new(r||e)(W(xe))};static \u0275cmp=ie({type:e,selectors:[["app-tableeditnew"]],standalone:!0,features:[oe],decls:15,vars:5,consts:[[1,"panel"],[3,"ngSubmit"],["for","table-name"],["id","table-name","type","text","name","tableName","required","",3,"ngModelChange","ngModel","value"],["for","group"],["id","group","name","groupId",3,"ngModelChange","ngModel"],["for","description"],["id","description","name","description","rows","4",3,"ngModelChange","ngModel","value"],["type","submit"],["selected","",3,"value"],[3,"value"]],template:function(r,i){r&1&&(T(0,"div",0)(1,"form",1),$("ngSubmit",function(){return i.saveChanges()}),T(2,"label",2),P(3,"Nazwa stolika"),N(),T(4,"input",3),it("ngModelChange",function(c){return ot(i.table.name,c)||(i.table.name=c),c}),N(),T(5,"label",4),P(6,"Grupa"),N(),T(7,"select",5),it("ngModelChange",function(c){return ot(i.table.group_id,c)||(i.table.group_id=c),c}),gn(8,eV,2,2,null,null,pn),N(),T(10,"label",6),P(11,"Opis"),N(),T(12,"textarea",7),it("ngModelChange",function(c){return ot(i.table.description,c)||(i.table.description=c),c}),N(),T(13,"button",8),P(14,"Zapisz zmiany"),N()()()),r&2&&(Z(4),rt("ngModel",i.table.name),It("value",i.table.name),Z(3),rt("ngModel",i.table.group_id),Z(),mn(i.tableGroups),Z(4),rt("ngModel",i.table.description),It("value",i.table.description))},dependencies:[Ut,er,ih,oh,Qt,Na,Cn,Jn,Tn,an,Hn],styles:[".panel[_ngcontent-%COMP%]{padding:16px;border:1px solid #000;width:300px;margin:0 auto}label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-weight:700}input[_ngcontent-%COMP%], select[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{width:100%;margin-bottom:16px;padding:8px;border:1px solid #ccc}button[_ngcontent-%COMP%]{width:100%;padding:10px;background-color:#000;color:#fff;border:none;cursor:pointer}"]})}return e})();var vT=(()=>{class e{navigationService;messagesService;group={id:"",name:"",color:"",description:"",location:""};constructor(t,r){this.navigationService=t,this.messagesService=r,we(Ae.firebaseConfig)}ngOnInit(){this.loadGroupData()}loadGroupData(){let t=localStorage.getItem("currentGroup"),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant");if(!t||!r||!i){console.error("Missing group, owner, or restaurant ID");return}let o=ee(),c=J(o,`Owners/${r}/Restaurants/${i}/TableGroups/${t}`);me(c).then(h=>{h.exists()?this.group=h.val():console.log("No group found")}).catch(h=>{console.error("Error loading group:",h)})}saveChanges(){let t=sessionStorage.getItem("userId"),r=localStorage.getItem("currentRestaurant"),i=localStorage.getItem("currentGroup");if(!t||!r||!i){console.error("Missing owner, restaurant, or group ID");return}let o=ee(),c=J(o,`Owners/${t}/Restaurants/${r}/TableGroups/${i}`);mt(c,{name:this.group.name,color:this.group.color,description:this.group.description,location:this.group.location}).then(()=>{console.log("Group updated successfully"),this.navigationService.NavigateTo("tablegroupmanage")}).catch(h=>{console.error("Error updating group:",h)})}deleteGroup(){this.messagesService.askUser("Czy napewno usun\u0105\u0107 restauracj\u0119?",()=>{this.deleteGroup2()},()=>{console.log("Deletion canceled")})}deleteGroup2(){let t=ee(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant"),o=localStorage.getItem("currentGroup");if(!o||!r||!i){console.error("Missing table, owner, or restaurant ID");return}let c=J(t,`Owners/${r}/Restaurants/${i}/TableGroups/${o}`);Sr(c).then(()=>{console.log("Table deleted successfully"),this.navigationService.NavigateTo("tablegroupmanage")}).catch(h=>{console.error("Error deleting table:",h)})}static \u0275fac=function(r){return new(r||e)(W(xe),W(_o))};static \u0275cmp=ie({type:e,selectors:[["app-groupedit"]],standalone:!0,features:[oe],decls:21,vars:4,consts:[[3,"ngSubmit"],["for","name"],["id","name","name","name","required","",3,"ngModelChange","ngModel"],["for","color"],["id","color","name","color","required","",3,"ngModelChange","ngModel"],["for","description"],["id","description","name","description",3,"ngModelChange","ngModel"],["for","location"],["id","location","name","location",3,"ngModelChange","ngModel"],["type","submit"],[3,"click"]],template:function(r,i){r&1&&(T(0,"form",0),$("ngSubmit",function(){return i.saveChanges()}),T(1,"div")(2,"label",1),P(3,"Nazwa:"),N(),T(4,"input",2),it("ngModelChange",function(c){return ot(i.group.name,c)||(i.group.name=c),c}),N()(),T(5,"div")(6,"label",3),P(7,"Kolor:"),N(),T(8,"input",4),it("ngModelChange",function(c){return ot(i.group.color,c)||(i.group.color=c),c}),N()(),T(9,"div")(10,"label",5),P(11,"Opis:"),N(),T(12,"textarea",6),it("ngModelChange",function(c){return ot(i.group.description,c)||(i.group.description=c),c}),N()(),T(13,"div")(14,"label",7),P(15,"Lokalizacja:"),N(),T(16,"input",8),it("ngModelChange",function(c){return ot(i.group.location,c)||(i.group.location=c),c}),N()(),T(17,"button",9),P(18,"Zapisz zmiany"),N()(),T(19,"button",10),$("click",function(){return i.deleteGroup()}),P(20,"Usu\u0144 grup\u0119"),N()),r&2&&(Z(4),rt("ngModel",i.group.name),Z(4),rt("ngModel",i.group.color),Z(4),rt("ngModel",i.group.description),Z(4),rt("ngModel",i.group.location))},dependencies:[Ut,er,Qt,Cn,Jn,Tn,an,Hn]})}return e})();var bT=(()=>{class e{navigationService;tableId=null;table=null;tableGroupName=null;groupColor=null;uniqueLinkToken=null;ownerId=null;restaurantId=null;constructor(t){this.navigationService=t,we(Ae.firebaseConfig)}printQRCodePage(){window.print()}ngOnInit(){this.loadTable(),this.loadUniqueLinkToken()}loadUniqueLinkToken(){let t=ee();this.ownerId=sessionStorage.getItem("userId"),this.restaurantId=localStorage.getItem("currentRestaurant");let r=J(t,`Owners/${this.ownerId}/Restaurants/${this.restaurantId}/uniqueLinkToken`);me(r).then(i=>{i.exists()?this.uniqueLinkToken=i.val():console.log("No unique link token found")}).catch(i=>{console.error("Error loading unique link token:",i)})}deleteTable(){let t=ee(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant");if(!this.tableId||!r||!i){console.error("Missing table, owner, or restaurant ID");return}let o=J(t,`Owners/${r}/Restaurants/${i}/Tables/${this.tableId}`);Sr(o).then(()=>{console.log("Table deleted successfully"),this.navigationService.NavigateTo("tablemanage")}).catch(c=>{console.error("Error deleting table:",c)})}blockTable(){let t=ee(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant");if(!this.tableId||!r||!i){console.error("Missing table, owner, or restaurant ID");return}let o=J(t,`Owners/${r}/Restaurants/${i}/Tables/${this.tableId}`);mt(o,{is_blocked:!0}).then(()=>{console.log("Table blocked successfully"),location.reload()}).catch(c=>{console.error("Error blocking table:",c)})}unlockTable(){let t=ee(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant");if(!this.tableId||!r||!i){console.error("Missing table, owner, or restaurant ID");return}let o=J(t,`Owners/${r}/Restaurants/${i}/Tables/${this.tableId}`);mt(o,{is_blocked:!1}).then(()=>{console.log("Table unlocked successfully"),location.reload()}).catch(c=>{console.error("Error unlocking table:",c)})}saveTable(){}loadTable(){if(this.tableId=localStorage.getItem("currentTable"),!this.tableId){console.error("No current table found in local storage");return}let t=ee(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant"),o=J(t,`Owners/${r}/Restaurants/${i}/Tables/${this.tableId}`);me(o).then(c=>{c.exists()?(this.table=c.val(),this.loadTableGroup()):console.log("No table found")}).catch(c=>{console.error("Error loading table:",c)})}loadTableGroup(){let t=ee(),r=sessionStorage.getItem("userId"),i=localStorage.getItem("currentRestaurant");if(!this.table?.group_id||this.table.group_id==="0g"){this.tableGroupName="Stoliki bez grupy",this.groupColor="#000000";return}let o=J(t,`Owners/${r}/Restaurants/${i}/TableGroups/${this.table.group_id}`);me(o).then(c=>{if(c.exists()){let h=c.val();this.tableGroupName=h.name,this.groupColor=h.color}else console.log("No group found for this table")}).catch(c=>{console.error("Error loading group:",c)})}getQRCodeData(){let t=this.table?.id||"",r=this.uniqueLinkToken||"",i=sessionStorage.getItem("userId"),o=localStorage.getItem("currentRestaurant");return`https://easyorder.mandarin.com.pl/settable?tableid=${t}&uniqueLinkToken=${r}&ownerid=${i}&restaurantid=${o}`}static \u0275fac=function(r){return new(r||e)(W(xe))};static \u0275cmp=ie({type:e,selectors:[["app-cashpointqrcode"]],standalone:!0,features:[oe],decls:6,vars:13,consts:[[3,"click"],[1,"qrcodeImage"],[3,"qrdata","allowEmptyString","alt","ariaLabel","cssClass","colorDark","colorLight","elementType","errorCorrectionLevel","margin","scale","title","width"]],template:function(r,i){r&1&&(T(0,"main")(1,"div")(2,"button",0),$("click",function(){return i.printQRCodePage()}),P(3,"Print QR Code"),N()(),T(4,"div",1),se(5,"qrcode",2),N()()),r&2&&(Z(5),It("qrdata","https://easyorder.mandarin.com.pl/setorder")("allowEmptyString",!0)("alt","A custom alt attribute")("ariaLabel","QR Code image with the following content...")("cssClass","center")("colorDark","#000000ff")("colorLight","#ffffffff")("elementType","img")("errorCorrectionLevel","H")("margin",4)("scale",1)("title","A custom title attribute")("width",300))},dependencies:[ko,Po],styles:["@media print{button[_ngcontent-%COMP%]{display:none}.qr-code-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-between;margin:0;padding:0}.qr-code-box[_ngcontent-%COMP%]{width:calc(50% - 10px);height:565px;margin:5px;text-align:center;page-break-inside:avoid}.qr-code-container[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:nth-child(2n){page-break-after:always}body[_ngcontent-%COMP%]{background-color:#fff;margin:0}}"]})}return e})();var xT=[{path:"",component:EC},{path:"landingpage",component:EC},{path:"register",component:p2},{path:"login",component:f2},{path:"newrestaurant",component:g2},{path:"managerestaurant",component:m2},{path:"changerestaurant",component:y2},{path:"restaurantbilings",component:C2},{path:"restaurantsettings",component:_2},{path:"tablemanage",component:b2},{path:"tablecreate",component:x2},{path:"tableedit",component:E2},{path:"restaurantstats",component:v2},{path:"restaurantrevievs",component:w2},{path:"settable",component:I2},{path:"tablegroupcreate",component:D2},{path:"tablegroupmanage",component:S2},{path:"showtableqr",component:MA},{path:"tablesettings",component:NA},{path:"waitersettings",component:OA},{path:"alltablesqrcodes",component:RA},{path:"tableordered",component:kA},{path:"scanqrcode",component:dT},{path:"setorder",component:fT},{path:"waiterauth",component:hT},{path:"waitertablelist",component:pT},{path:"waitertablelookup",component:gT},{path:"waiterorderlist",component:mT},{path:"waiterscan",component:yT},{path:"waiterqrcode",component:CT},{path:"addorder",component:_T},{path:"tableeedit",component:wT},{path:"groupedit",component:vT},{path:"cashpointqrcode",component:bT}];PE(bI,{providers:[_I(xT),{provide:Ut},LE()]});
